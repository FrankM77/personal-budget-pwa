(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function SI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pg={exports:{}},uu={};var Dw;function AI(){if(Dw)return uu;Dw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var d in a)d!=="key"&&(o[d]=a[d])}else o=a;return a=o.ref,{$$typeof:t,type:i,key:c,ref:a!==void 0?a:null,props:o}}return uu.Fragment=e,uu.jsx=n,uu.jsxs=n,uu}var Mw;function CI(){return Mw||(Mw=1,Pg.exports=AI()),Pg.exports}var v=CI(),Lg={exports:{}},je={};var Ow;function NI(){if(Ow)return je;Ow=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),_=Symbol.iterator;function E(j){return j===null||typeof j!="object"?null:(j=_&&j[_]||j["@@iterator"],typeof j=="function"?j:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,R={};function L(j,Z,ue){this.props=j,this.context=Z,this.refs=R,this.updater=ue||k}L.prototype.isReactComponent={},L.prototype.setState=function(j,Z){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Z,"setState")},L.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function z(){}z.prototype=L.prototype;function V(j,Z,ue){this.props=j,this.context=Z,this.refs=R,this.updater=ue||k}var G=V.prototype=new z;G.constructor=V,A(G,L.prototype),G.isPureReactComponent=!0;var ee=Array.isArray;function te(){}var S={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function O(j,Z,ue){var he=ue.ref;return{$$typeof:t,type:j,key:Z,ref:he!==void 0?he:null,props:ue}}function P(j,Z){return O(j.type,Z,j.props)}function D(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function F(j){var Z={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ue){return Z[ue]})}var U=/\/+/g;function Ce(j,Z){return typeof j=="object"&&j!==null&&j.key!=null?F(""+j.key):Z.toString(36)}function xe(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(te,te):(j.status="pending",j.then(function(Z){j.status==="pending"&&(j.status="fulfilled",j.value=Z)},function(Z){j.status==="pending"&&(j.status="rejected",j.reason=Z)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function $(j,Z,ue,he,ge){var be=typeof j;(be==="undefined"||be==="boolean")&&(j=null);var we=!1;if(j===null)we=!0;else switch(be){case"bigint":case"string":case"number":we=!0;break;case"object":switch(j.$$typeof){case t:case e:we=!0;break;case g:return we=j._init,$(we(j._payload),Z,ue,he,ge)}}if(we)return ge=ge(j),we=he===""?"."+Ce(j,0):he,ee(ge)?(ue="",we!=null&&(ue=we.replace(U,"$&/")+"/"),$(ge,Z,ue,"",function(nt){return nt})):ge!=null&&(D(ge)&&(ge=P(ge,ue+(ge.key==null||j&&j.key===ge.key?"":(""+ge.key).replace(U,"$&/")+"/")+we)),Z.push(ge)),1;we=0;var tt=he===""?".":he+":";if(ee(j))for(var de=0;de<j.length;de++)he=j[de],be=tt+Ce(he,de),we+=$(he,Z,ue,be,ge);else if(de=E(j),typeof de=="function")for(j=de.call(j),de=0;!(he=j.next()).done;)he=he.value,be=tt+Ce(he,de++),we+=$(he,Z,ue,be,ge);else if(be==="object"){if(typeof j.then=="function")return $(xe(j),Z,ue,he,ge);throw Z=String(j),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return we}function le(j,Z,ue){if(j==null)return j;var he=[],ge=0;return $(j,he,"","",function(be){return Z.call(ue,be,ge++)}),he}function me(j){if(j._status===-1){var Z=j._result;Z=Z(),Z.then(function(ue){(j._status===0||j._status===-1)&&(j._status=1,j._result=ue)},function(ue){(j._status===0||j._status===-1)&&(j._status=2,j._result=ue)}),j._status===-1&&(j._status=0,j._result=Z)}if(j._status===1)return j._result.default;throw j._result}var Te=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},ae={map:le,forEach:function(j,Z,ue){le(j,function(){Z.apply(this,arguments)},ue)},count:function(j){var Z=0;return le(j,function(){Z++}),Z},toArray:function(j){return le(j,function(Z){return Z})||[]},only:function(j){if(!D(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return je.Activity=b,je.Children=ae,je.Component=L,je.Fragment=n,je.Profiler=a,je.PureComponent=V,je.StrictMode=i,je.Suspense=h,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,je.__COMPILER_RUNTIME={__proto__:null,c:function(j){return S.H.useMemoCache(j)}},je.cache=function(j){return function(){return j.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(j,Z,ue){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var he=A({},j.props),ge=j.key;if(Z!=null)for(be in Z.key!==void 0&&(ge=""+Z.key),Z)!N.call(Z,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&Z.ref===void 0||(he[be]=Z[be]);var be=arguments.length-2;if(be===1)he.children=ue;else if(1<be){for(var we=Array(be),tt=0;tt<be;tt++)we[tt]=arguments[tt+2];he.children=we}return O(j.type,ge,he)},je.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},je.createElement=function(j,Z,ue){var he,ge={},be=null;if(Z!=null)for(he in Z.key!==void 0&&(be=""+Z.key),Z)N.call(Z,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ge[he]=Z[he]);var we=arguments.length-2;if(we===1)ge.children=ue;else if(1<we){for(var tt=Array(we),de=0;de<we;de++)tt[de]=arguments[de+2];ge.children=tt}if(j&&j.defaultProps)for(he in we=j.defaultProps,we)ge[he]===void 0&&(ge[he]=we[he]);return O(j,be,ge)},je.createRef=function(){return{current:null}},je.forwardRef=function(j){return{$$typeof:d,render:j}},je.isValidElement=D,je.lazy=function(j){return{$$typeof:g,_payload:{_status:-1,_result:j},_init:me}},je.memo=function(j,Z){return{$$typeof:f,type:j,compare:Z===void 0?null:Z}},je.startTransition=function(j){var Z=S.T,ue={};S.T=ue;try{var he=j(),ge=S.S;ge!==null&&ge(ue,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(te,Te)}catch(be){Te(be)}finally{Z!==null&&ue.types!==null&&(Z.types=ue.types),S.T=Z}},je.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},je.use=function(j){return S.H.use(j)},je.useActionState=function(j,Z,ue){return S.H.useActionState(j,Z,ue)},je.useCallback=function(j,Z){return S.H.useCallback(j,Z)},je.useContext=function(j){return S.H.useContext(j)},je.useDebugValue=function(){},je.useDeferredValue=function(j,Z){return S.H.useDeferredValue(j,Z)},je.useEffect=function(j,Z){return S.H.useEffect(j,Z)},je.useEffectEvent=function(j){return S.H.useEffectEvent(j)},je.useId=function(){return S.H.useId()},je.useImperativeHandle=function(j,Z,ue){return S.H.useImperativeHandle(j,Z,ue)},je.useInsertionEffect=function(j,Z){return S.H.useInsertionEffect(j,Z)},je.useLayoutEffect=function(j,Z){return S.H.useLayoutEffect(j,Z)},je.useMemo=function(j,Z){return S.H.useMemo(j,Z)},je.useOptimistic=function(j,Z){return S.H.useOptimistic(j,Z)},je.useReducer=function(j,Z,ue){return S.H.useReducer(j,Z,ue)},je.useRef=function(j){return S.H.useRef(j)},je.useState=function(j){return S.H.useState(j)},je.useSyncExternalStore=function(j,Z,ue){return S.H.useSyncExternalStore(j,Z,ue)},je.useTransition=function(){return S.H.useTransition()},je.version="19.2.0",je}var Vw;function Sy(){return Vw||(Vw=1,Lg.exports=NI()),Lg.exports}var M=Sy();const Kh=SI(M);var Ug={exports:{}},du={},zg={exports:{}},Bg={};var jw;function RI(){return jw||(jw=1,(function(t){function e($,le){var me=$.length;$.push(le);e:for(;0<me;){var Te=me-1>>>1,ae=$[Te];if(0<a(ae,le))$[Te]=le,$[me]=ae,me=Te;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var le=$[0],me=$.pop();if(me!==le){$[0]=me;e:for(var Te=0,ae=$.length,j=ae>>>1;Te<j;){var Z=2*(Te+1)-1,ue=$[Z],he=Z+1,ge=$[he];if(0>a(ue,me))he<ae&&0>a(ge,ue)?($[Te]=ge,$[he]=me,Te=he):($[Te]=ue,$[Z]=me,Te=Z);else if(he<ae&&0>a(ge,me))$[Te]=ge,$[he]=me,Te=he;else break e}}return le}function a($,le){var me=$.sortIndex-le.sortIndex;return me!==0?me:$.id-le.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var h=[],f=[],g=1,b=null,_=3,E=!1,k=!1,A=!1,R=!1,L=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function G($){for(var le=n(f);le!==null;){if(le.callback===null)i(f);else if(le.startTime<=$)i(f),le.sortIndex=le.expirationTime,e(h,le);else break;le=n(f)}}function ee($){if(A=!1,G($),!k)if(n(h)!==null)k=!0,te||(te=!0,F());else{var le=n(f);le!==null&&xe(ee,le.startTime-$)}}var te=!1,S=-1,N=5,O=-1;function P(){return R?!0:!(t.unstable_now()-O<N)}function D(){if(R=!1,te){var $=t.unstable_now();O=$;var le=!0;try{e:{k=!1,A&&(A=!1,z(S),S=-1),E=!0;var me=_;try{t:{for(G($),b=n(h);b!==null&&!(b.expirationTime>$&&P());){var Te=b.callback;if(typeof Te=="function"){b.callback=null,_=b.priorityLevel;var ae=Te(b.expirationTime<=$);if($=t.unstable_now(),typeof ae=="function"){b.callback=ae,G($),le=!0;break t}b===n(h)&&i(h),G($)}else i(h);b=n(h)}if(b!==null)le=!0;else{var j=n(f);j!==null&&xe(ee,j.startTime-$),le=!1}}break e}finally{b=null,_=me,E=!1}le=void 0}}finally{le?F():te=!1}}}var F;if(typeof V=="function")F=function(){V(D)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Ce=U.port2;U.port1.onmessage=D,F=function(){Ce.postMessage(null)}}else F=function(){L(D,0)};function xe($,le){S=L(function(){$(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function($){switch(_){case 1:case 2:case 3:var le=3;break;default:le=_}var me=_;_=le;try{return $()}finally{_=me}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var me=_;_=$;try{return le()}finally{_=me}},t.unstable_scheduleCallback=function($,le,me){var Te=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Te+me:Te):me=Te,$){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=me+ae,$={id:g++,callback:le,priorityLevel:$,startTime:me,expirationTime:ae,sortIndex:-1},me>Te?($.sortIndex=me,e(f,$),n(h)===null&&$===n(f)&&(A?(z(S),S=-1):A=!0,xe(ee,me-Te))):($.sortIndex=ae,e(h,$),k||E||(k=!0,te||(te=!0,F()))),$},t.unstable_shouldYield=P,t.unstable_wrapCallback=function($){var le=_;return function(){var me=_;_=le;try{return $.apply(this,arguments)}finally{_=me}}}})(Bg)),Bg}var Pw;function II(){return Pw||(Pw=1,zg.exports=RI()),zg.exports}var Fg={exports:{}},yn={};var Lw;function kI(){if(Lw)return yn;Lw=1;var t=Sy();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,f,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:h,containerInfo:f,implementation:g}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,yn.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,g)},yn.flushSync=function(h){var f=c.T,g=i.p;try{if(c.T=null,i.p=2,h)return h()}finally{c.T=f,i.p=g,i.d.f()}},yn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},yn.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},yn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,b=d(g,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:_,fetchPriority:E}):g==="script"&&i.d.X(h,{crossOrigin:b,integrity:_,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},yn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=d(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},yn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,b=d(g,f.crossOrigin);i.d.L(h,g,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},yn.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=d(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},yn.requestFormReset=function(h){i.d.r(h)},yn.unstable_batchedUpdates=function(h,f){return h(f)},yn.useFormState=function(h,f,g){return c.H.useFormState(h,f,g)},yn.useFormStatus=function(){return c.H.useHostTransitionStatus()},yn.version="19.2.0",yn}var Uw;function DI(){if(Uw)return Fg.exports;Uw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Fg.exports=kI(),Fg.exports}var zw;function MI(){if(zw)return du;zw=1;var t=II(),e=Sy(),n=DI();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function h(r){if(o(r)!==r)throw Error(i(188))}function f(r){var s=r.alternate;if(!s){if(s=o(r),s===null)throw Error(i(188));return s!==r?null:r}for(var l=r,u=s;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){l=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return h(p),r;if(y===u)return h(p),s;y=y.sibling}throw Error(i(188))}if(l.return!==u.return)l=p,u=y;else{for(var x=!1,C=p.child;C;){if(C===l){x=!0,l=p,u=y;break}if(C===u){x=!0,u=p,l=y;break}C=C.sibling}if(!x){for(C=y.child;C;){if(C===l){x=!0,l=y,u=p;break}if(C===u){x=!0,u=y,l=p;break}C=C.sibling}if(!x)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var b=Object.assign,_=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),V=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function F(r){return r===null||typeof r!="object"?null:(r=D&&r[D]||r["@@iterator"],typeof r=="function"?r:null)}var U=Symbol.for("react.client.reference");function Ce(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===U?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case L:return"Profiler";case R:return"StrictMode";case ee:return"Suspense";case te:return"SuspenseList";case O:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case V:return r.displayName||"Context";case z:return(r._context.displayName||"Context")+".Consumer";case G:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case S:return s=r.displayName||null,s!==null?s:Ce(r.type)||"Memo";case N:s=r._payload,r=r._init;try{return Ce(r(s))}catch{}}return null}var xe=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Te=[],ae=-1;function j(r){return{current:r}}function Z(r){0>ae||(r.current=Te[ae],Te[ae]=null,ae--)}function ue(r,s){ae++,Te[ae]=r.current,r.current=s}var he=j(null),ge=j(null),be=j(null),we=j(null);function tt(r,s){switch(ue(be,s),ue(ge,r),ue(he,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?tw(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=tw(s),r=nw(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Z(he),ue(he,r)}function de(){Z(he),Z(ge),Z(be)}function nt(r){r.memoizedState!==null&&ue(we,r);var s=he.current,l=nw(s,r.type);s!==l&&(ue(ge,r),ue(he,l))}function ut(r){ge.current===r&&(Z(he),Z(ge)),we.current===r&&(Z(we),au._currentValue=me)}var In,ti;function ni(r){if(In===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);In=s&&s[1]||"",ti=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+In+r+ti}var Ia=!1;function kr(r,s){if(!r||Ia)return"";Ia=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(J){var X=J}Reflect.construct(r,[],se)}else{try{se.call()}catch(J){X=J}r.call(se.prototype)}}else{try{throw Error()}catch(J){X=J}(se=r())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(J){if(J&&X&&typeof J.stack=="string")return[J.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),x=y[0],C=y[1];if(x&&C){var B=x.split(`
`),Q=C.split(`
`);for(p=u=0;u<B.length&&!B[u].includes("DetermineComponentFrameRoot");)u++;for(;p<Q.length&&!Q[p].includes("DetermineComponentFrameRoot");)p++;if(u===B.length||p===Q.length)for(u=B.length-1,p=Q.length-1;1<=u&&0<=p&&B[u]!==Q[p];)p--;for(;1<=u&&0<=p;u--,p--)if(B[u]!==Q[p]){if(u!==1||p!==1)do if(u--,p--,0>p||B[u]!==Q[p]){var ne=`
`+B[u].replace(" at new "," at ");return r.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",r.displayName)),ne}while(1<=u&&0<=p);break}}}finally{Ia=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?ni(l):""}function ka(r,s){switch(r.tag){case 26:case 27:case 5:return ni(r.type);case 16:return ni("Lazy");case 13:return r.child!==s&&s!==null?ni("Suspense Fallback"):ni("Suspense");case 19:return ni("SuspenseList");case 0:case 15:return kr(r.type,!1);case 11:return kr(r.type.render,!1);case 1:return kr(r.type,!0);case 31:return ni("Activity");default:return""}}function Ne(r){try{var s="",l=null;do s+=ka(r,l),l=r,r=r.return;while(r);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Le=Object.prototype.hasOwnProperty,pt=t.unstable_scheduleCallback,sn=t.unstable_cancelCallback,qn=t.unstable_shouldYield,vd=t.unstable_requestPaint,Sn=t.unstable_now,Da=t.unstable_getCurrentPriorityLevel,cc=t.unstable_ImmediatePriority,uc=t.unstable_UserBlockingPriority,vs=t.unstable_NormalPriority,zm=t.unstable_LowPriority,bd=t.unstable_IdlePriority,_d=t.log,wd=t.unstable_setDisableYieldValue,Ai=null,an=null;function ii(r){if(typeof _d=="function"&&wd(r),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(Ai,r)}catch{}}var Mt=Math.clz32?Math.clz32:Td,xd=Math.log,Do=Math.LN2;function Td(r){return r>>>=0,r===0?32:31-(xd(r)/Do|0)|0}var $i=256,Ma=262144,Ut=4194304;function Gi(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ki(r,s,l){var u=r.pendingLanes;if(u===0)return 0;var p=0,y=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var C=u&134217727;return C!==0?(u=C&~y,u!==0?p=Gi(u):(x&=C,x!==0?p=Gi(x):l||(l=C&~r,l!==0&&(p=Gi(l))))):(C=u&~y,C!==0?p=Gi(C):x!==0?p=Gi(x):l||(l=u&~r,l!==0&&(p=Gi(l)))),p===0?0:s!==0&&s!==p&&(s&y)===0&&(y=p&-p,l=s&-s,y>=l||y===32&&(l&4194048)!==0)?s:p}function Ci(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Bm(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ed(){var r=Ut;return Ut<<=1,(Ut&62914560)===0&&(Ut=4194304),r}function Yi(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function Oa(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Fm(r,s,l,u,p,y){var x=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var C=r.entanglements,B=r.expirationTimes,Q=r.hiddenUpdates;for(l=x&~l;0<l;){var ne=31-Mt(l),se=1<<ne;C[ne]=0,B[ne]=-1;var X=Q[ne];if(X!==null)for(Q[ne]=null,ne=0;ne<X.length;ne++){var J=X[ne];J!==null&&(J.lane&=-536870913)}l&=~se}u!==0&&Va(r,u,0),y!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=y&~(x&~s))}function Va(r,s,l){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Mt(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|l&261930}function dc(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var u=31-Mt(l),p=1<<u;p&s|r[u]&s&&(r[u]|=s),l&=~p}}function hc(r,s){var l=s&-s;return l=(l&42)!==0?1:ja(l),(l&(r.suspendedLanes|s))!==0?0:l}function ja(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Dr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Sd(){var r=le.p;return r!==0?r:(r=window.event,r===void 0?32:Sw(r.type))}function Ni(r,s){var l=le.p;try{return le.p=r,s()}finally{le.p=l}}var Ri=Math.random().toString(36).slice(2),zt="__reactFiber$"+Ri,en="__reactProps$"+Ri,Qi="__reactContainer$"+Ri,Mo="__reactEvents$"+Ri,qm="__reactListeners$"+Ri,Ad="__reactHandles$"+Ri,Cd="__reactResources$"+Ri,Xi="__reactMarker$"+Ri;function Oo(r){delete r[zt],delete r[en],delete r[Mo],delete r[qm],delete r[Ad]}function Wi(r){var s=r[zt];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Qi]||l[zt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=cw(r);r!==null;){if(l=r[zt])return l;r=cw(r)}return s}r=l,l=r.parentNode}return null}function ri(r){if(r=r[zt]||r[Qi]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function Hn(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Zi(r){var s=r[Cd];return s||(s=r[Cd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Bt(r){r[Xi]=!0}var fc=new Set,mc={};function Ji(r,s){er(r,s),er(r+"Capture",s)}function er(r,s){for(mc[r]=s,r=0;r<s.length;r++)fc.add(s[r])}var pc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gc={},yc={};function Nd(r){return Le.call(yc,r)?!0:Le.call(gc,r)?!1:pc.test(r)?yc[r]=!0:(gc[r]=!0,!1)}function Vo(r,s,l){if(Nd(s))if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+l)}}function $n(r,s,l){if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+l)}}function Ft(r,s,l,u){if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(s,l,""+u)}}function tn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function bs(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function vc(r,s,l){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return p.call(this)},set:function(x){l=""+x,y.call(this,x)}}),Object.defineProperty(r,s,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function at(r){if(!r._valueTracker){var s=bs(r)?"checked":"value";r._valueTracker=vc(r,s,""+r[s])}}function Pa(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return r&&(u=bs(r)?r.checked?"true":"false":r.value),r=u,r!==l?(s.setValue(r),!0):!1}function tr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var La=/[\n"\\]/g;function kn(r){return r.replace(La,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function jo(r,s,l,u,p,y,x,C){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),s!=null?x==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+tn(s)):r.value!==""+tn(s)&&(r.value=""+tn(s)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),s!=null?bc(r,x,tn(s)):l!=null?bc(r,x,tn(l)):u!=null&&r.removeAttribute("value"),p==null&&y!=null&&(r.defaultChecked=!!y),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+tn(C):r.removeAttribute("name")}function Rd(r,s,l,u,p,y,x,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),s!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){at(r);return}l=l!=null?""+tn(l):"",s=s!=null?""+tn(s):l,C||s===r.value||(r.value=s),r.defaultValue=s}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=C?r.checked:!!u,r.defaultChecked=!!u,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x),at(r)}function bc(r,s,l){s==="number"&&tr(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function _s(r,s,l,u){if(r=r.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=s.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&u&&(r[l].defaultSelected=!0)}else{for(l=""+tn(l),s=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,u&&(r[p].defaultSelected=!0);return}s!==null||r[p].disabled||(s=r[p])}s!==null&&(s.selected=!0)}}function Id(r,s,l){if(s!=null&&(s=""+tn(s),s!==r.value&&(r.value=s),l==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=l!=null?""+tn(l):""}function ws(r,s,l,u){if(s==null){if(u!=null){if(l!=null)throw Error(i(92));if(xe(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),s=l}l=tn(s),r.defaultValue=l,u=r.textContent,u===l&&u!==""&&u!==null&&(r.value=u),at(r)}function Dn(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var kd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _c(r,s,l){var u=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,l):typeof l!="number"||l===0||kd.has(s)?s==="float"?r.cssFloat=l:r[s]=(""+l).trim():r[s]=l+"px"}function wc(r,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var p in s)u=s[p],s.hasOwnProperty(p)&&l[p]!==u&&_c(r,p,u)}else for(var y in s)s.hasOwnProperty(y)&&_c(r,y,s[y])}function Po(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Lo(r){return xs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ii(){}var xc=null;function si(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ts=null,nr=null;function Ua(r){var s=ri(r);if(s&&(r=s.stateNode)){var l=r[en]||null;e:switch(r=s.stateNode,s.type){case"input":if(jo(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+kn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==r&&u.form===r.form){var p=u[en]||null;if(!p)throw Error(i(90));jo(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<l.length;s++)u=l[s],u.form===r.form&&Pa(u)}break e;case"textarea":Id(r,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&_s(r,!!l.multiple,s,!1)}}}var Uo=!1;function Es(r,s,l){if(Uo)return r(s,l);Uo=!0;try{var u=r(s);return u}finally{if(Uo=!1,(Ts!==null||nr!==null)&&(Sh(),Ts&&(s=Ts,r=nr,nr=Ts=null,Ua(s),r)))for(s=0;s<r.length;s++)Ua(r[s])}}function ki(r,s){var l=r.stateNode;if(l===null)return null;var u=l[en]||null;if(u===null)return null;l=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),za=!1;if(ai)try{var dt={};Object.defineProperty(dt,"passive",{get:function(){za=!0}}),window.addEventListener("test",dt,dt),window.removeEventListener("test",dt,dt)}catch{za=!1}var ir=null,Tc=null,Ba=null;function Ec(){if(Ba)return Ba;var r,s=Tc,l=s.length,u,p="value"in ir?ir.value:ir.textContent,y=p.length;for(r=0;r<l&&s[r]===p[r];r++);var x=l-r;for(u=1;u<=x&&s[l-u]===p[y-u];u++);return Ba=p.slice(r,1<u?1-u:void 0)}function Fa(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Mr(){return!0}function Di(){return!1}function on(r){function s(l,u,p,y,x){this._reactName=l,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(l=r[C],this[C]=l?l(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Mr:Di,this.isPropagationStopped=Di,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),s}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rr=on(Or),Ss=b({},Or,{view:0,detail:0}),Sc=on(Ss),As,zo,sr,Bo=b({},Ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==sr&&(sr&&r.type==="mousemove"?(As=r.screenX-sr.screenX,zo=r.screenY-sr.screenY):zo=As=0,sr=r),As)},movementY:function(r){return"movementY"in r?r.movementY:zo}}),Ac=on(Bo),qa=b({},Bo,{dataTransfer:0}),Md=on(qa),Od=b({},Ss,{relatedTarget:0}),Ha=on(Od),Cc=b({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),Vd=on(Cc),Fo=b({},Or,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),jd=on(Fo),Pd=b({},Or,{data:0}),ar=on(Pd),Ld={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ud={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bd(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=zd[r])?!!s[r]:!1}function Cs(){return Bd}var An=b({},Ss,{key:function(r){if(r.key){var s=Ld[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Fa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ud[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cs,charCode:function(r){return r.type==="keypress"?Fa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Fa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Fd=on(An),qd=b({},Bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vr=on(qd),m=b({},Ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cs}),w=on(m),T=b({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=on(T),K=b({},Bo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),W=on(K),fe=b({},Or,{newState:0,oldState:0}),Ue=on(fe),Ot=[9,13,27,32],it=ai&&"CompositionEvent"in window,wt=null;ai&&"documentMode"in document&&(wt=document.documentMode);var oi=ai&&"TextEvent"in window&&!wt,or=ai&&(!it||wt&&8<wt&&11>=wt),Mi=" ",Oi=!1;function $a(r,s){switch(r){case"keyup":return Ot.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ho=!1;function QN(r,s){switch(r){case"compositionend":return qo(s);case"keypress":return s.which!==32?null:(Oi=!0,Mi);case"textInput":return r=s.data,r===Mi&&Oi?null:r;default:return null}}function XN(r,s){if(Ho)return r==="compositionend"||!it&&$a(r,s)?(r=Ec(),Ba=Tc=ir=null,Ho=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return or&&s.locale!=="ko"?null:s.data;default:return null}}var WN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hb(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!WN[r.type]:s==="textarea"}function fb(r,s,l,u){Ts?nr?nr.push(u):nr=[u]:Ts=u,s=Dh(s,"onChange"),0<s.length&&(l=new rr("onChange","change",null,l,u),r.push({event:l,listeners:s}))}var Nc=null,Rc=null;function ZN(r){Q_(r,0)}function Hd(r){var s=Hn(r);if(Pa(s))return r}function mb(r,s){if(r==="change")return s}var pb=!1;if(ai){var Hm;if(ai){var $m="oninput"in document;if(!$m){var gb=document.createElement("div");gb.setAttribute("oninput","return;"),$m=typeof gb.oninput=="function"}Hm=$m}else Hm=!1;pb=Hm&&(!document.documentMode||9<document.documentMode)}function yb(){Nc&&(Nc.detachEvent("onpropertychange",vb),Rc=Nc=null)}function vb(r){if(r.propertyName==="value"&&Hd(Rc)){var s=[];fb(s,Rc,r,si(r)),Es(ZN,s)}}function JN(r,s,l){r==="focusin"?(yb(),Nc=s,Rc=l,Nc.attachEvent("onpropertychange",vb)):r==="focusout"&&yb()}function eR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Hd(Rc)}function tR(r,s){if(r==="click")return Hd(s)}function nR(r,s){if(r==="input"||r==="change")return Hd(s)}function iR(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Gn=typeof Object.is=="function"?Object.is:iR;function Ic(r,s){if(Gn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var p=l[u];if(!Le.call(s,p)||!Gn(r[p],s[p]))return!1}return!0}function bb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function _b(r,s){var l=bb(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=s&&u>=s)return{node:l,offset:s-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=bb(l)}}function wb(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?wb(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function xb(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=tr(r.document);s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=tr(r.document)}return s}function Gm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var rR=ai&&"documentMode"in document&&11>=document.documentMode,$o=null,Km=null,kc=null,Ym=!1;function Tb(r,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ym||$o==null||$o!==tr(u)||(u=$o,"selectionStart"in u&&Gm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),kc&&Ic(kc,u)||(kc=u,u=Dh(Km,"onSelect"),0<u.length&&(s=new rr("onSelect","select",null,s,l),r.push({event:s,listeners:u}),s.target=$o)))}function Ga(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var Go={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},Qm={},Eb={};ai&&(Eb=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function Ka(r){if(Qm[r])return Qm[r];if(!Go[r])return r;var s=Go[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Eb)return Qm[r]=s[l];return r}var Sb=Ka("animationend"),Ab=Ka("animationiteration"),Cb=Ka("animationstart"),sR=Ka("transitionrun"),aR=Ka("transitionstart"),oR=Ka("transitioncancel"),Nb=Ka("transitionend"),Rb=new Map,Xm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xm.push("scrollEnd");function Vi(r,s){Rb.set(r,s),Ji(s,[r])}var $d=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},li=[],Ko=0,Wm=0;function Gd(){for(var r=Ko,s=Wm=Ko=0;s<r;){var l=li[s];li[s++]=null;var u=li[s];li[s++]=null;var p=li[s];li[s++]=null;var y=li[s];if(li[s++]=null,u!==null&&p!==null){var x=u.pending;x===null?p.next=p:(p.next=x.next,x.next=p),u.pending=p}y!==0&&Ib(l,p,y)}}function Kd(r,s,l,u){li[Ko++]=r,li[Ko++]=s,li[Ko++]=l,li[Ko++]=u,Wm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Zm(r,s,l,u){return Kd(r,s,l,u),Yd(r)}function Ya(r,s){return Kd(r,null,null,s),Yd(r)}function Ib(r,s,l){r.lanes|=l;var u=r.alternate;u!==null&&(u.lanes|=l);for(var p=!1,y=r.return;y!==null;)y.childLanes|=l,u=y.alternate,u!==null&&(u.childLanes|=l),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(p=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,p&&s!==null&&(p=31-Mt(l),r=y.hiddenUpdates,u=r[p],u===null?r[p]=[s]:u.push(s),s.lane=l|536870912),y):null}function Yd(r){if(50<Jc)throw Jc=0,og=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Yo={};function lR(r,s,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(r,s,l,u){return new lR(r,s,l,u)}function Jm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function jr(r,s){var l=r.alternate;return l===null?(l=Kn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function kb(r,s){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,s=l.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Qd(r,s,l,u,p,y){var x=0;if(u=r,typeof r=="function")Jm(r)&&(x=1);else if(typeof r=="string")x=fI(r,l,he.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case O:return r=Kn(31,l,s,p),r.elementType=O,r.lanes=y,r;case A:return Qa(l.children,p,y,s);case R:x=8,p|=24;break;case L:return r=Kn(12,l,s,p|2),r.elementType=L,r.lanes=y,r;case ee:return r=Kn(13,l,s,p),r.elementType=ee,r.lanes=y,r;case te:return r=Kn(19,l,s,p),r.elementType=te,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case V:x=10;break e;case z:x=9;break e;case G:x=11;break e;case S:x=14;break e;case N:x=16,u=null;break e}x=29,l=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Kn(x,l,s,p),s.elementType=r,s.type=u,s.lanes=y,s}function Qa(r,s,l,u){return r=Kn(7,r,u,s),r.lanes=l,r}function ep(r,s,l){return r=Kn(6,r,null,s),r.lanes=l,r}function Db(r){var s=Kn(18,null,null,0);return s.stateNode=r,s}function tp(r,s,l){return s=Kn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Mb=new WeakMap;function ci(r,s){if(typeof r=="object"&&r!==null){var l=Mb.get(r);return l!==void 0?l:(s={value:r,source:s,stack:Ne(s)},Mb.set(r,s),s)}return{value:r,source:s,stack:Ne(s)}}var Qo=[],Xo=0,Xd=null,Dc=0,ui=[],di=0,Ns=null,lr=1,cr="";function Pr(r,s){Qo[Xo++]=Dc,Qo[Xo++]=Xd,Xd=r,Dc=s}function Ob(r,s,l){ui[di++]=lr,ui[di++]=cr,ui[di++]=Ns,Ns=r;var u=lr;r=cr;var p=32-Mt(u)-1;u&=~(1<<p),l+=1;var y=32-Mt(s)+p;if(30<y){var x=p-p%5;y=(u&(1<<x)-1).toString(32),u>>=x,p-=x,lr=1<<32-Mt(s)+p|l<<p|u,cr=y+r}else lr=1<<y|l<<p|u,cr=r}function np(r){r.return!==null&&(Pr(r,1),Ob(r,1,0))}function ip(r){for(;r===Xd;)Xd=Qo[--Xo],Qo[Xo]=null,Dc=Qo[--Xo],Qo[Xo]=null;for(;r===Ns;)Ns=ui[--di],ui[di]=null,cr=ui[--di],ui[di]=null,lr=ui[--di],ui[di]=null}function Vb(r,s){ui[di++]=lr,ui[di++]=cr,ui[di++]=Ns,lr=s.id,cr=s.overflow,Ns=r}var ln=null,bt=null,Xe=!1,Rs=null,hi=!1,rp=Error(i(519));function Is(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mc(ci(s,r)),rp}function jb(r){var s=r.stateNode,l=r.type,u=r.memoizedProps;switch(s[zt]=r,s[en]=u,l){case"dialog":He("cancel",s),He("close",s);break;case"iframe":case"object":case"embed":He("load",s);break;case"video":case"audio":for(l=0;l<tu.length;l++)He(tu[l],s);break;case"source":He("error",s);break;case"img":case"image":case"link":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"input":He("invalid",s),Rd(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":He("invalid",s);break;case"textarea":He("invalid",s),ws(s,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||u.suppressHydrationWarning===!0||J_(s.textContent,l)?(u.popover!=null&&(He("beforetoggle",s),He("toggle",s)),u.onScroll!=null&&He("scroll",s),u.onScrollEnd!=null&&He("scrollend",s),u.onClick!=null&&(s.onclick=Ii),s=!0):s=!1,s||Is(r,!0)}function Pb(r){for(ln=r.return;ln;)switch(ln.tag){case 5:case 31:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:ln=ln.return}}function Wo(r){if(r!==ln)return!1;if(!Xe)return Pb(r),Xe=!0,!1;var s=r.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||xg(r.type,r.memoizedProps)),l=!l),l&&bt&&Is(r),Pb(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));bt=lw(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));bt=lw(r)}else s===27?(s=bt,Hs(r.type)?(r=Cg,Cg=null,bt=r):bt=s):bt=ln?mi(r.stateNode.nextSibling):null;return!0}function Xa(){bt=ln=null,Xe=!1}function sp(){var r=Rs;return r!==null&&(jn===null?jn=r:jn.push.apply(jn,r),Rs=null),r}function Mc(r){Rs===null?Rs=[r]:Rs.push(r)}var ap=j(null),Wa=null,Lr=null;function ks(r,s,l){ue(ap,s._currentValue),s._currentValue=l}function Ur(r){r._currentValue=ap.current,Z(ap)}function op(r,s,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===l)break;r=r.return}}function lp(r,s,l,u){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var y=p.dependencies;if(y!==null){var x=p.child;y=y.firstContext;e:for(;y!==null;){var C=y;y=p;for(var B=0;B<s.length;B++)if(C.context===s[B]){y.lanes|=l,C=y.alternate,C!==null&&(C.lanes|=l),op(y.return,l,r),u||(x=null);break e}y=C.next}}else if(p.tag===18){if(x=p.return,x===null)throw Error(i(341));x.lanes|=l,y=x.alternate,y!==null&&(y.lanes|=l),op(x,l,r),x=null}else x=p.child;if(x!==null)x.return=p;else for(x=p;x!==null;){if(x===r){x=null;break}if(p=x.sibling,p!==null){p.return=x.return,x=p;break}x=x.return}p=x}}function Zo(r,s,l,u){r=null;for(var p=s,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var x=p.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var C=p.type;Gn(p.pendingProps.value,x.value)||(r!==null?r.push(C):r=[C])}}else if(p===we.current){if(x=p.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(au):r=[au])}p=p.return}r!==null&&lp(s,r,l,u),s.flags|=262144}function Wd(r){for(r=r.firstContext;r!==null;){if(!Gn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Za(r){Wa=r,Lr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function cn(r){return Lb(Wa,r)}function Zd(r,s){return Wa===null&&Za(r),Lb(r,s)}function Lb(r,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Lr===null){if(r===null)throw Error(i(308));Lr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Lr=Lr.next=s;return l}var cR=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(l,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(l){return l()})}},uR=t.unstable_scheduleCallback,dR=t.unstable_NormalPriority,qt={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cp(){return{controller:new cR,data:new Map,refCount:0}}function Oc(r){r.refCount--,r.refCount===0&&uR(dR,function(){r.controller.abort()})}var Vc=null,up=0,Jo=0,el=null;function hR(r,s){if(Vc===null){var l=Vc=[];up=0,Jo=fg(),el={status:"pending",value:void 0,then:function(u){l.push(u)}}}return up++,s.then(Ub,Ub),s}function Ub(){if(--up===0&&Vc!==null){el!==null&&(el.status="fulfilled");var r=Vc;Vc=null,Jo=0,el=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function fR(r,s){var l=[],u={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var p=0;p<l.length;p++)(0,l[p])(s)},function(p){for(u.status="rejected",u.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),u}var zb=$.S;$.S=function(r,s){T_=Sn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&hR(r,s),zb!==null&&zb(r,s)};var Ja=j(null);function dp(){var r=Ja.current;return r!==null?r:gt.pooledCache}function Jd(r,s){s===null?ue(Ja,Ja.current):ue(Ja,s.pool)}function Bb(){var r=dp();return r===null?null:{parent:qt._currentValue,pool:r}}var tl=Error(i(460)),hp=Error(i(474)),eh=Error(i(542)),th={then:function(){}};function Fb(r){return r=r.status,r==="fulfilled"||r==="rejected"}function qb(r,s,l){switch(l=r[l],l===void 0?r.push(s):l!==s&&(s.then(Ii,Ii),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,$b(r),r;default:if(typeof s.status=="string")s.then(Ii,Ii);else{if(r=gt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=u}},function(u){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,$b(r),r}throw to=s,tl}}function eo(r){try{var s=r._init;return s(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(to=l,tl):l}}var to=null;function Hb(){if(to===null)throw Error(i(459));var r=to;return to=null,r}function $b(r){if(r===tl||r===eh)throw Error(i(483))}var nl=null,jc=0;function nh(r){var s=jc;return jc+=1,nl===null&&(nl=[]),qb(nl,r,s)}function Pc(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function ih(r,s){throw s.$$typeof===_?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Gb(r){function s(H,q){if(r){var Y=H.deletions;Y===null?(H.deletions=[q],H.flags|=16):Y.push(q)}}function l(H,q){if(!r)return null;for(;q!==null;)s(H,q),q=q.sibling;return null}function u(H){for(var q=new Map;H!==null;)H.key!==null?q.set(H.key,H):q.set(H.index,H),H=H.sibling;return q}function p(H,q){return H=jr(H,q),H.index=0,H.sibling=null,H}function y(H,q,Y){return H.index=Y,r?(Y=H.alternate,Y!==null?(Y=Y.index,Y<q?(H.flags|=67108866,q):Y):(H.flags|=67108866,q)):(H.flags|=1048576,q)}function x(H){return r&&H.alternate===null&&(H.flags|=67108866),H}function C(H,q,Y,ie){return q===null||q.tag!==6?(q=ep(Y,H.mode,ie),q.return=H,q):(q=p(q,Y),q.return=H,q)}function B(H,q,Y,ie){var Se=Y.type;return Se===A?ne(H,q,Y.props.children,ie,Y.key):q!==null&&(q.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===N&&eo(Se)===q.type)?(q=p(q,Y.props),Pc(q,Y),q.return=H,q):(q=Qd(Y.type,Y.key,Y.props,null,H.mode,ie),Pc(q,Y),q.return=H,q)}function Q(H,q,Y,ie){return q===null||q.tag!==4||q.stateNode.containerInfo!==Y.containerInfo||q.stateNode.implementation!==Y.implementation?(q=tp(Y,H.mode,ie),q.return=H,q):(q=p(q,Y.children||[]),q.return=H,q)}function ne(H,q,Y,ie,Se){return q===null||q.tag!==7?(q=Qa(Y,H.mode,ie,Se),q.return=H,q):(q=p(q,Y),q.return=H,q)}function se(H,q,Y){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=ep(""+q,H.mode,Y),q.return=H,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case E:return Y=Qd(q.type,q.key,q.props,null,H.mode,Y),Pc(Y,q),Y.return=H,Y;case k:return q=tp(q,H.mode,Y),q.return=H,q;case N:return q=eo(q),se(H,q,Y)}if(xe(q)||F(q))return q=Qa(q,H.mode,Y,null),q.return=H,q;if(typeof q.then=="function")return se(H,nh(q),Y);if(q.$$typeof===V)return se(H,Zd(H,q),Y);ih(H,q)}return null}function X(H,q,Y,ie){var Se=q!==null?q.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Se!==null?null:C(H,q,""+Y,ie);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:return Y.key===Se?B(H,q,Y,ie):null;case k:return Y.key===Se?Q(H,q,Y,ie):null;case N:return Y=eo(Y),X(H,q,Y,ie)}if(xe(Y)||F(Y))return Se!==null?null:ne(H,q,Y,ie,null);if(typeof Y.then=="function")return X(H,q,nh(Y),ie);if(Y.$$typeof===V)return X(H,q,Zd(H,Y),ie);ih(H,Y)}return null}function J(H,q,Y,ie,Se){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return H=H.get(Y)||null,C(q,H,""+ie,Se);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case E:return H=H.get(ie.key===null?Y:ie.key)||null,B(q,H,ie,Se);case k:return H=H.get(ie.key===null?Y:ie.key)||null,Q(q,H,ie,Se);case N:return ie=eo(ie),J(H,q,Y,ie,Se)}if(xe(ie)||F(ie))return H=H.get(Y)||null,ne(q,H,ie,Se,null);if(typeof ie.then=="function")return J(H,q,Y,nh(ie),Se);if(ie.$$typeof===V)return J(H,q,Y,Zd(q,ie),Se);ih(q,ie)}return null}function ve(H,q,Y,ie){for(var Se=null,Je=null,_e=q,Be=q=0,Ge=null;_e!==null&&Be<Y.length;Be++){_e.index>Be?(Ge=_e,_e=null):Ge=_e.sibling;var et=X(H,_e,Y[Be],ie);if(et===null){_e===null&&(_e=Ge);break}r&&_e&&et.alternate===null&&s(H,_e),q=y(et,q,Be),Je===null?Se=et:Je.sibling=et,Je=et,_e=Ge}if(Be===Y.length)return l(H,_e),Xe&&Pr(H,Be),Se;if(_e===null){for(;Be<Y.length;Be++)_e=se(H,Y[Be],ie),_e!==null&&(q=y(_e,q,Be),Je===null?Se=_e:Je.sibling=_e,Je=_e);return Xe&&Pr(H,Be),Se}for(_e=u(_e);Be<Y.length;Be++)Ge=J(_e,H,Be,Y[Be],ie),Ge!==null&&(r&&Ge.alternate!==null&&_e.delete(Ge.key===null?Be:Ge.key),q=y(Ge,q,Be),Je===null?Se=Ge:Je.sibling=Ge,Je=Ge);return r&&_e.forEach(function(Qs){return s(H,Qs)}),Xe&&Pr(H,Be),Se}function Re(H,q,Y,ie){if(Y==null)throw Error(i(151));for(var Se=null,Je=null,_e=q,Be=q=0,Ge=null,et=Y.next();_e!==null&&!et.done;Be++,et=Y.next()){_e.index>Be?(Ge=_e,_e=null):Ge=_e.sibling;var Qs=X(H,_e,et.value,ie);if(Qs===null){_e===null&&(_e=Ge);break}r&&_e&&Qs.alternate===null&&s(H,_e),q=y(Qs,q,Be),Je===null?Se=Qs:Je.sibling=Qs,Je=Qs,_e=Ge}if(et.done)return l(H,_e),Xe&&Pr(H,Be),Se;if(_e===null){for(;!et.done;Be++,et=Y.next())et=se(H,et.value,ie),et!==null&&(q=y(et,q,Be),Je===null?Se=et:Je.sibling=et,Je=et);return Xe&&Pr(H,Be),Se}for(_e=u(_e);!et.done;Be++,et=Y.next())et=J(_e,H,Be,et.value,ie),et!==null&&(r&&et.alternate!==null&&_e.delete(et.key===null?Be:et.key),q=y(et,q,Be),Je===null?Se=et:Je.sibling=et,Je=et);return r&&_e.forEach(function(EI){return s(H,EI)}),Xe&&Pr(H,Be),Se}function mt(H,q,Y,ie){if(typeof Y=="object"&&Y!==null&&Y.type===A&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:e:{for(var Se=Y.key;q!==null;){if(q.key===Se){if(Se=Y.type,Se===A){if(q.tag===7){l(H,q.sibling),ie=p(q,Y.props.children),ie.return=H,H=ie;break e}}else if(q.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===N&&eo(Se)===q.type){l(H,q.sibling),ie=p(q,Y.props),Pc(ie,Y),ie.return=H,H=ie;break e}l(H,q);break}else s(H,q);q=q.sibling}Y.type===A?(ie=Qa(Y.props.children,H.mode,ie,Y.key),ie.return=H,H=ie):(ie=Qd(Y.type,Y.key,Y.props,null,H.mode,ie),Pc(ie,Y),ie.return=H,H=ie)}return x(H);case k:e:{for(Se=Y.key;q!==null;){if(q.key===Se)if(q.tag===4&&q.stateNode.containerInfo===Y.containerInfo&&q.stateNode.implementation===Y.implementation){l(H,q.sibling),ie=p(q,Y.children||[]),ie.return=H,H=ie;break e}else{l(H,q);break}else s(H,q);q=q.sibling}ie=tp(Y,H.mode,ie),ie.return=H,H=ie}return x(H);case N:return Y=eo(Y),mt(H,q,Y,ie)}if(xe(Y))return ve(H,q,Y,ie);if(F(Y)){if(Se=F(Y),typeof Se!="function")throw Error(i(150));return Y=Se.call(Y),Re(H,q,Y,ie)}if(typeof Y.then=="function")return mt(H,q,nh(Y),ie);if(Y.$$typeof===V)return mt(H,q,Zd(H,Y),ie);ih(H,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,q!==null&&q.tag===6?(l(H,q.sibling),ie=p(q,Y),ie.return=H,H=ie):(l(H,q),ie=ep(Y,H.mode,ie),ie.return=H,H=ie),x(H)):l(H,q)}return function(H,q,Y,ie){try{jc=0;var Se=mt(H,q,Y,ie);return nl=null,Se}catch(_e){if(_e===tl||_e===eh)throw _e;var Je=Kn(29,_e,null,H.mode);return Je.lanes=ie,Je.return=H,Je}finally{}}}var no=Gb(!0),Kb=Gb(!1),Ds=!1;function fp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ms(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Os(r,s,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(rt&2)!==0){var p=u.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),u.pending=s,s=Yd(r),Ib(r,null,l),s}return Kd(r,u,s,l),Yd(r)}function Lc(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,l|=u,s.lanes=l,dc(r,l)}}function pp(r,s){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?p=y=x:y=y.next=x,l=l.next}while(l!==null);y===null?p=y=s:y=y.next=s}else p=y=s;l={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}var gp=!1;function Uc(){if(gp){var r=el;if(r!==null)throw r}}function zc(r,s,l,u){gp=!1;var p=r.updateQueue;Ds=!1;var y=p.firstBaseUpdate,x=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var B=C,Q=B.next;B.next=null,x===null?y=Q:x.next=Q,x=B;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,C=ne.lastBaseUpdate,C!==x&&(C===null?ne.firstBaseUpdate=Q:C.next=Q,ne.lastBaseUpdate=B))}if(y!==null){var se=p.baseState;x=0,ne=Q=B=null,C=y;do{var X=C.lane&-536870913,J=X!==C.lane;if(J?($e&X)===X:(u&X)===X){X!==0&&X===Jo&&(gp=!0),ne!==null&&(ne=ne.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ve=r,Re=C;X=s;var mt=l;switch(Re.tag){case 1:if(ve=Re.payload,typeof ve=="function"){se=ve.call(mt,se,X);break e}se=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Re.payload,X=typeof ve=="function"?ve.call(mt,se,X):ve,X==null)break e;se=b({},se,X);break e;case 2:Ds=!0}}X=C.callback,X!==null&&(r.flags|=64,J&&(r.flags|=8192),J=p.callbacks,J===null?p.callbacks=[X]:J.push(X))}else J={lane:X,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ne===null?(Q=ne=J,B=se):ne=ne.next=J,x|=X;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;J=C,C=J.next,J.next=null,p.lastBaseUpdate=J,p.shared.pending=null}}while(!0);ne===null&&(B=se),p.baseState=B,p.firstBaseUpdate=Q,p.lastBaseUpdate=ne,y===null&&(p.shared.lanes=0),Us|=x,r.lanes=x,r.memoizedState=se}}function Yb(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Qb(r,s){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)Yb(l[r],s)}var il=j(null),rh=j(0);function Xb(r,s){r=Yr,ue(rh,r),ue(il,s),Yr=r|s.baseLanes}function yp(){ue(rh,Yr),ue(il,il.current)}function vp(){Yr=rh.current,Z(il),Z(rh)}var Yn=j(null),fi=null;function Vs(r){var s=r.alternate;ue(Vt,Vt.current&1),ue(Yn,r),fi===null&&(s===null||il.current!==null||s.memoizedState!==null)&&(fi=r)}function bp(r){ue(Vt,Vt.current),ue(Yn,r),fi===null&&(fi=r)}function Wb(r){r.tag===22?(ue(Vt,Vt.current),ue(Yn,r),fi===null&&(fi=r)):js()}function js(){ue(Vt,Vt.current),ue(Yn,Yn.current)}function Qn(r){Z(Yn),fi===r&&(fi=null),Z(Vt)}var Vt=j(0);function sh(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Sg(l)||Ag(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var zr=0,ze=null,ht=null,Ht=null,ah=!1,rl=!1,io=!1,oh=0,Bc=0,sl=null,mR=0;function Nt(){throw Error(i(321))}function _p(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Gn(r[l],s[l]))return!1;return!0}function wp(r,s,l,u,p,y){return zr=y,ze=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=r===null||r.memoizedState===null?O1:jp,io=!1,y=l(u,p),io=!1,rl&&(y=Jb(s,l,u,p)),Zb(r),y}function Zb(r){$.H=Hc;var s=ht!==null&&ht.next!==null;if(zr=0,Ht=ht=ze=null,ah=!1,Bc=0,sl=null,s)throw Error(i(300));r===null||$t||(r=r.dependencies,r!==null&&Wd(r)&&($t=!0))}function Jb(r,s,l,u){ze=r;var p=0;do{if(rl&&(sl=null),Bc=0,rl=!1,25<=p)throw Error(i(301));if(p+=1,Ht=ht=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}$.H=V1,y=s(l,u)}while(rl);return y}function pR(){var r=$.H,s=r.useState()[0];return s=typeof s.then=="function"?Fc(s):s,r=r.useState()[0],(ht!==null?ht.memoizedState:null)!==r&&(ze.flags|=1024),s}function xp(){var r=oh!==0;return oh=0,r}function Tp(r,s,l){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~l}function Ep(r){if(ah){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ah=!1}zr=0,Ht=ht=ze=null,rl=!1,Bc=oh=0,sl=null}function Cn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?ze.memoizedState=Ht=r:Ht=Ht.next=r,Ht}function jt(){if(ht===null){var r=ze.alternate;r=r!==null?r.memoizedState:null}else r=ht.next;var s=Ht===null?ze.memoizedState:Ht.next;if(s!==null)Ht=s,ht=r;else{if(r===null)throw ze.alternate===null?Error(i(467)):Error(i(310));ht=r,r={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Ht===null?ze.memoizedState=Ht=r:Ht=Ht.next=r}return Ht}function lh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fc(r){var s=Bc;return Bc+=1,sl===null&&(sl=[]),r=qb(sl,r,s),s=ze,(Ht===null?s.memoizedState:Ht.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?O1:jp),r}function ch(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Fc(r);if(r.$$typeof===V)return cn(r)}throw Error(i(438,String(r)))}function Sp(r){var s=null,l=ze.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var u=ze.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=lh(),ze.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(r),u=0;u<r;u++)l[u]=P;return s.index++,l}function Br(r,s){return typeof s=="function"?s(r):s}function uh(r){var s=jt();return Ap(s,ht,r)}function Ap(r,s,l){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var p=r.baseQueue,y=u.pending;if(y!==null){if(p!==null){var x=p.next;p.next=y.next,y.next=x}s.baseQueue=p=y,u.pending=null}if(y=r.baseState,p===null)r.memoizedState=y;else{s=p.next;var C=x=null,B=null,Q=s,ne=!1;do{var se=Q.lane&-536870913;if(se!==Q.lane?($e&se)===se:(zr&se)===se){var X=Q.revertLane;if(X===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),se===Jo&&(ne=!0);else if((zr&X)===X){Q=Q.next,X===Jo&&(ne=!0);continue}else se={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},B===null?(C=B=se,x=y):B=B.next=se,ze.lanes|=X,Us|=X;se=Q.action,io&&l(y,se),y=Q.hasEagerState?Q.eagerState:l(y,se)}else X={lane:se,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},B===null?(C=B=X,x=y):B=B.next=X,ze.lanes|=se,Us|=se;Q=Q.next}while(Q!==null&&Q!==s);if(B===null?x=y:B.next=C,!Gn(y,r.memoizedState)&&($t=!0,ne&&(l=el,l!==null)))throw l;r.memoizedState=y,r.baseState=x,r.baseQueue=B,u.lastRenderedState=y}return p===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Cp(r){var s=jt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var u=l.dispatch,p=l.pending,y=s.memoizedState;if(p!==null){l.pending=null;var x=p=p.next;do y=r(y,x.action),x=x.next;while(x!==p);Gn(y,s.memoizedState)||($t=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,u]}function e1(r,s,l){var u=ze,p=jt(),y=Xe;if(y){if(l===void 0)throw Error(i(407));l=l()}else l=s();var x=!Gn((ht||p).memoizedState,l);if(x&&(p.memoizedState=l,$t=!0),p=p.queue,Ip(i1.bind(null,u,p,r),[r]),p.getSnapshot!==s||x||Ht!==null&&Ht.memoizedState.tag&1){if(u.flags|=2048,al(9,{destroy:void 0},n1.bind(null,u,p,l,s),null),gt===null)throw Error(i(349));y||(zr&127)!==0||t1(u,s,l)}return l}function t1(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=ze.updateQueue,s===null?(s=lh(),ze.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function n1(r,s,l,u){s.value=l,s.getSnapshot=u,r1(s)&&s1(r)}function i1(r,s,l){return l(function(){r1(s)&&s1(r)})}function r1(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Gn(r,l)}catch{return!0}}function s1(r){var s=Ya(r,2);s!==null&&Pn(s,r,2)}function Np(r){var s=Cn();if(typeof r=="function"){var l=r;if(r=l(),io){ii(!0);try{l()}finally{ii(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:r},s}function a1(r,s,l,u){return r.baseState=l,Ap(r,ht,typeof u=="function"?u:Br)}function gR(r,s,l,u,p){if(fh(r))throw Error(i(485));if(r=s.action,r!==null){var y={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){y.listeners.push(x)}};$.T!==null?l(!0):y.isTransition=!1,u(y),l=s.pending,l===null?(y.next=s.pending=y,o1(s,y)):(y.next=l.next,s.pending=l.next=y)}}function o1(r,s){var l=s.action,u=s.payload,p=r.state;if(s.isTransition){var y=$.T,x={};$.T=x;try{var C=l(p,u),B=$.S;B!==null&&B(x,C),l1(r,s,C)}catch(Q){Rp(r,s,Q)}finally{y!==null&&x.types!==null&&(y.types=x.types),$.T=y}}else try{y=l(p,u),l1(r,s,y)}catch(Q){Rp(r,s,Q)}}function l1(r,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){c1(r,s,u)},function(u){return Rp(r,s,u)}):c1(r,s,l)}function c1(r,s,l){s.status="fulfilled",s.value=l,u1(s),r.state=l,s=r.pending,s!==null&&(l=s.next,l===s?r.pending=null:(l=l.next,s.next=l,o1(r,l)))}function Rp(r,s,l){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=l,u1(s),s=s.next;while(s!==u)}r.action=null}function u1(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function d1(r,s){return s}function h1(r,s){if(Xe){var l=gt.formState;if(l!==null){e:{var u=ze;if(Xe){if(bt){t:{for(var p=bt,y=hi;p.nodeType!==8;){if(!y){p=null;break t}if(p=mi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){bt=mi(p.nextSibling),u=p.data==="F!";break e}}Is(u)}u=!1}u&&(s=l[0])}}return l=Cn(),l.memoizedState=l.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d1,lastRenderedState:s},l.queue=u,l=k1.bind(null,ze,u),u.dispatch=l,u=Np(!1),y=Vp.bind(null,ze,!1,u.queue),u=Cn(),p={state:s,dispatch:null,action:r,pending:null},u.queue=p,l=gR.bind(null,ze,p,y,l),p.dispatch=l,u.memoizedState=r,[s,l,!1]}function f1(r){var s=jt();return m1(s,ht,r)}function m1(r,s,l){if(s=Ap(r,s,d1)[0],r=uh(Br)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Fc(s)}catch(x){throw x===tl?eh:x}else u=s;s=jt();var p=s.queue,y=p.dispatch;return l!==s.memoizedState&&(ze.flags|=2048,al(9,{destroy:void 0},yR.bind(null,p,l),null)),[u,y,r]}function yR(r,s){r.action=s}function p1(r){var s=jt(),l=ht;if(l!==null)return m1(s,l,r);jt(),s=s.memoizedState,l=jt();var u=l.queue.dispatch;return l.memoizedState=r,[s,u,!1]}function al(r,s,l,u){return r={tag:r,create:l,deps:u,inst:s,next:null},s=ze.updateQueue,s===null&&(s=lh(),ze.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,s.lastEffect=r),r}function g1(){return jt().memoizedState}function dh(r,s,l,u){var p=Cn();ze.flags|=r,p.memoizedState=al(1|s,{destroy:void 0},l,u===void 0?null:u)}function hh(r,s,l,u){var p=jt();u=u===void 0?null:u;var y=p.memoizedState.inst;ht!==null&&u!==null&&_p(u,ht.memoizedState.deps)?p.memoizedState=al(s,y,l,u):(ze.flags|=r,p.memoizedState=al(1|s,y,l,u))}function y1(r,s){dh(8390656,8,r,s)}function Ip(r,s){hh(2048,8,r,s)}function vR(r){ze.flags|=4;var s=ze.updateQueue;if(s===null)s=lh(),ze.updateQueue=s,s.events=[r];else{var l=s.events;l===null?s.events=[r]:l.push(r)}}function v1(r){var s=jt().memoizedState;return vR({ref:s,nextImpl:r}),function(){if((rt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function b1(r,s){return hh(4,2,r,s)}function _1(r,s){return hh(4,4,r,s)}function w1(r,s){if(typeof s=="function"){r=r();var l=s(r);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function x1(r,s,l){l=l!=null?l.concat([r]):null,hh(4,4,w1.bind(null,s,r),l)}function kp(){}function T1(r,s){var l=jt();s=s===void 0?null:s;var u=l.memoizedState;return s!==null&&_p(s,u[1])?u[0]:(l.memoizedState=[r,s],r)}function E1(r,s){var l=jt();s=s===void 0?null:s;var u=l.memoizedState;if(s!==null&&_p(s,u[1]))return u[0];if(u=r(),io){ii(!0);try{r()}finally{ii(!1)}}return l.memoizedState=[u,s],u}function Dp(r,s,l){return l===void 0||(zr&1073741824)!==0&&($e&261930)===0?r.memoizedState=s:(r.memoizedState=l,r=S_(),ze.lanes|=r,Us|=r,l)}function S1(r,s,l,u){return Gn(l,s)?l:il.current!==null?(r=Dp(r,l,u),Gn(r,s)||($t=!0),r):(zr&42)===0||(zr&1073741824)!==0&&($e&261930)===0?($t=!0,r.memoizedState=l):(r=S_(),ze.lanes|=r,Us|=r,s)}function A1(r,s,l,u,p){var y=le.p;le.p=y!==0&&8>y?y:8;var x=$.T,C={};$.T=C,Vp(r,!1,s,l);try{var B=p(),Q=$.S;if(Q!==null&&Q(C,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ne=fR(B,u);qc(r,s,ne,Zn(r))}else qc(r,s,u,Zn(r))}catch(se){qc(r,s,{then:function(){},status:"rejected",reason:se},Zn())}finally{le.p=y,x!==null&&C.types!==null&&(x.types=C.types),$.T=x}}function bR(){}function Mp(r,s,l,u){if(r.tag!==5)throw Error(i(476));var p=C1(r).queue;A1(r,p,s,me,l===null?bR:function(){return N1(r),l(u)})}function C1(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:me},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:l},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function N1(r){var s=C1(r);s.next===null&&(s=r.alternate.memoizedState),qc(r,s.next.queue,{},Zn())}function Op(){return cn(au)}function R1(){return jt().memoizedState}function I1(){return jt().memoizedState}function _R(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var l=Zn();r=Ms(l);var u=Os(s,r,l);u!==null&&(Pn(u,s,l),Lc(u,s,l)),s={cache:cp()},r.payload=s;return}s=s.return}}function wR(r,s,l){var u=Zn();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},fh(r)?D1(s,l):(l=Zm(r,s,l,u),l!==null&&(Pn(l,r,u),M1(l,s,u)))}function k1(r,s,l){var u=Zn();qc(r,s,l,u)}function qc(r,s,l,u){var p={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(fh(r))D1(s,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var x=s.lastRenderedState,C=y(x,l);if(p.hasEagerState=!0,p.eagerState=C,Gn(C,x))return Kd(r,s,p,0),gt===null&&Gd(),!1}catch{}finally{}if(l=Zm(r,s,p,u),l!==null)return Pn(l,r,u),M1(l,s,u),!0}return!1}function Vp(r,s,l,u){if(u={lane:2,revertLane:fg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},fh(r)){if(s)throw Error(i(479))}else s=Zm(r,l,u,2),s!==null&&Pn(s,r,2)}function fh(r){var s=r.alternate;return r===ze||s!==null&&s===ze}function D1(r,s){rl=ah=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function M1(r,s,l){if((l&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,l|=u,s.lanes=l,dc(r,l)}}var Hc={readContext:cn,use:ch,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};Hc.useEffectEvent=Nt;var O1={readContext:cn,use:ch,useCallback:function(r,s){return Cn().memoizedState=[r,s===void 0?null:s],r},useContext:cn,useEffect:y1,useImperativeHandle:function(r,s,l){l=l!=null?l.concat([r]):null,dh(4194308,4,w1.bind(null,s,r),l)},useLayoutEffect:function(r,s){return dh(4194308,4,r,s)},useInsertionEffect:function(r,s){dh(4,2,r,s)},useMemo:function(r,s){var l=Cn();s=s===void 0?null:s;var u=r();if(io){ii(!0);try{r()}finally{ii(!1)}}return l.memoizedState=[u,s],u},useReducer:function(r,s,l){var u=Cn();if(l!==void 0){var p=l(s);if(io){ii(!0);try{l(s)}finally{ii(!1)}}}else p=s;return u.memoizedState=u.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},u.queue=r,r=r.dispatch=wR.bind(null,ze,r),[u.memoizedState,r]},useRef:function(r){var s=Cn();return r={current:r},s.memoizedState=r},useState:function(r){r=Np(r);var s=r.queue,l=k1.bind(null,ze,s);return s.dispatch=l,[r.memoizedState,l]},useDebugValue:kp,useDeferredValue:function(r,s){var l=Cn();return Dp(l,r,s)},useTransition:function(){var r=Np(!1);return r=A1.bind(null,ze,r.queue,!0,!1),Cn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,l){var u=ze,p=Cn();if(Xe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),gt===null)throw Error(i(349));($e&127)!==0||t1(u,s,l)}p.memoizedState=l;var y={value:l,getSnapshot:s};return p.queue=y,y1(i1.bind(null,u,y,r),[r]),u.flags|=2048,al(9,{destroy:void 0},n1.bind(null,u,y,l,s),null),l},useId:function(){var r=Cn(),s=gt.identifierPrefix;if(Xe){var l=cr,u=lr;l=(u&~(1<<32-Mt(u)-1)).toString(32)+l,s="_"+s+"R_"+l,l=oh++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=mR++,s="_"+s+"r_"+l.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Op,useFormState:h1,useActionState:h1,useOptimistic:function(r){var s=Cn();s.memoizedState=s.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Vp.bind(null,ze,!0,l),l.dispatch=s,[r,s]},useMemoCache:Sp,useCacheRefresh:function(){return Cn().memoizedState=_R.bind(null,ze)},useEffectEvent:function(r){var s=Cn(),l={impl:r};return s.memoizedState=l,function(){if((rt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},jp={readContext:cn,use:ch,useCallback:T1,useContext:cn,useEffect:Ip,useImperativeHandle:x1,useInsertionEffect:b1,useLayoutEffect:_1,useMemo:E1,useReducer:uh,useRef:g1,useState:function(){return uh(Br)},useDebugValue:kp,useDeferredValue:function(r,s){var l=jt();return S1(l,ht.memoizedState,r,s)},useTransition:function(){var r=uh(Br)[0],s=jt().memoizedState;return[typeof r=="boolean"?r:Fc(r),s]},useSyncExternalStore:e1,useId:R1,useHostTransitionStatus:Op,useFormState:f1,useActionState:f1,useOptimistic:function(r,s){var l=jt();return a1(l,ht,r,s)},useMemoCache:Sp,useCacheRefresh:I1};jp.useEffectEvent=v1;var V1={readContext:cn,use:ch,useCallback:T1,useContext:cn,useEffect:Ip,useImperativeHandle:x1,useInsertionEffect:b1,useLayoutEffect:_1,useMemo:E1,useReducer:Cp,useRef:g1,useState:function(){return Cp(Br)},useDebugValue:kp,useDeferredValue:function(r,s){var l=jt();return ht===null?Dp(l,r,s):S1(l,ht.memoizedState,r,s)},useTransition:function(){var r=Cp(Br)[0],s=jt().memoizedState;return[typeof r=="boolean"?r:Fc(r),s]},useSyncExternalStore:e1,useId:R1,useHostTransitionStatus:Op,useFormState:p1,useActionState:p1,useOptimistic:function(r,s){var l=jt();return ht!==null?a1(l,ht,r,s):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:Sp,useCacheRefresh:I1};V1.useEffectEvent=v1;function Pp(r,s,l,u){s=r.memoizedState,l=l(u,s),l=l==null?s:b({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Lp={enqueueSetState:function(r,s,l){r=r._reactInternals;var u=Zn(),p=Ms(u);p.payload=s,l!=null&&(p.callback=l),s=Os(r,p,u),s!==null&&(Pn(s,r,u),Lc(s,r,u))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var u=Zn(),p=Ms(u);p.tag=1,p.payload=s,l!=null&&(p.callback=l),s=Os(r,p,u),s!==null&&(Pn(s,r,u),Lc(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Zn(),u=Ms(l);u.tag=2,s!=null&&(u.callback=s),s=Os(r,u,l),s!==null&&(Pn(s,r,l),Lc(s,r,l))}};function j1(r,s,l,u,p,y,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,x):s.prototype&&s.prototype.isPureReactComponent?!Ic(l,u)||!Ic(p,y):!0}function P1(r,s,l,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==r&&Lp.enqueueReplaceState(s,s.state,null)}function ro(r,s){var l=s;if("ref"in s){l={};for(var u in s)u!=="ref"&&(l[u]=s[u])}if(r=r.defaultProps){l===s&&(l=b({},l));for(var p in r)l[p]===void 0&&(l[p]=r[p])}return l}function L1(r){$d(r)}function U1(r){console.error(r)}function z1(r){$d(r)}function mh(r,s){try{var l=r.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function B1(r,s,l){try{var u=r.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Up(r,s,l){return l=Ms(l),l.tag=3,l.payload={element:null},l.callback=function(){mh(r,s)},l}function F1(r){return r=Ms(r),r.tag=3,r}function q1(r,s,l,u){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;r.payload=function(){return p(y)},r.callback=function(){B1(s,l,u)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){B1(s,l,u),typeof p!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function xR(r,s,l,u,p){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=l.alternate,s!==null&&Zo(s,l,p,!0),l=Yn.current,l!==null){switch(l.tag){case 31:case 13:return fi===null?Ah():l.alternate===null&&Rt===0&&(Rt=3),l.flags&=-257,l.flags|=65536,l.lanes=p,u===th?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([u]):s.add(u),ug(r,u,p)),!1;case 22:return l.flags|=65536,u===th?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([u]):l.add(u)),ug(r,u,p)),!1}throw Error(i(435,l.tag))}return ug(r,u,p),Ah(),!1}if(Xe)return s=Yn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,u!==rp&&(r=Error(i(422),{cause:u}),Mc(ci(r,l)))):(u!==rp&&(s=Error(i(423),{cause:u}),Mc(ci(s,l))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,u=ci(u,l),p=Up(r.stateNode,u,p),pp(r,p),Rt!==4&&(Rt=2)),!1;var y=Error(i(520),{cause:u});if(y=ci(y,l),Zc===null?Zc=[y]:Zc.push(y),Rt!==4&&(Rt=2),s===null)return!0;u=ci(u,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,r=p&-p,l.lanes|=r,r=Up(l.stateNode,u,r),pp(l,r),!1;case 1:if(s=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(zs===null||!zs.has(y))))return l.flags|=65536,p&=-p,l.lanes|=p,p=F1(p),q1(p,r,l,u),pp(l,p),!1}l=l.return}while(l!==null);return!1}var zp=Error(i(461)),$t=!1;function un(r,s,l,u){s.child=r===null?Kb(s,null,l,u):no(s,r.child,l,u)}function H1(r,s,l,u,p){l=l.render;var y=s.ref;if("ref"in u){var x={};for(var C in u)C!=="ref"&&(x[C]=u[C])}else x=u;return Za(s),u=wp(r,s,l,x,y,p),C=xp(),r!==null&&!$t?(Tp(r,s,p),Fr(r,s,p)):(Xe&&C&&np(s),s.flags|=1,un(r,s,u,p),s.child)}function $1(r,s,l,u,p){if(r===null){var y=l.type;return typeof y=="function"&&!Jm(y)&&y.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=y,G1(r,s,y,u,p)):(r=Qd(l.type,null,u,s,s.mode,p),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,!Yp(r,p)){var x=y.memoizedProps;if(l=l.compare,l=l!==null?l:Ic,l(x,u)&&r.ref===s.ref)return Fr(r,s,p)}return s.flags|=1,r=jr(y,u),r.ref=s.ref,r.return=s,s.child=r}function G1(r,s,l,u,p){if(r!==null){var y=r.memoizedProps;if(Ic(y,u)&&r.ref===s.ref)if($t=!1,s.pendingProps=u=y,Yp(r,p))(r.flags&131072)!==0&&($t=!0);else return s.lanes=r.lanes,Fr(r,s,p)}return Bp(r,s,l,u,p)}function K1(r,s,l,u){var p=u.children,y=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,r!==null){for(u=s.child=r.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,s.child=null;return Y1(r,s,y,l,u)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Jd(s,y!==null?y.cachePool:null),y!==null?Xb(s,y):yp(),Wb(s);else return u=s.lanes=536870912,Y1(r,s,y!==null?y.baseLanes|l:l,l,u)}else y!==null?(Jd(s,y.cachePool),Xb(s,y),js(),s.memoizedState=null):(r!==null&&Jd(s,null),yp(),js());return un(r,s,p,l),s.child}function $c(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Y1(r,s,l,u,p){var y=dp();return y=y===null?null:{parent:qt._currentValue,pool:y},s.memoizedState={baseLanes:l,cachePool:y},r!==null&&Jd(s,null),yp(),Wb(s),r!==null&&Zo(r,s,u,!0),s.childLanes=p,null}function ph(r,s){return s=yh({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function Q1(r,s,l){return no(s,r.child,null,l),r=ph(s,s.pendingProps),r.flags|=2,Qn(s),s.memoizedState=null,r}function TR(r,s,l){var u=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(Xe){if(u.mode==="hidden")return r=ph(s,u),s.lanes=536870912,$c(null,r);if(bp(s),(r=bt)?(r=ow(r,hi),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Ns!==null?{id:lr,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},l=Db(r),l.return=s,s.child=l,ln=s,bt=null)):r=null,r===null)throw Is(s);return s.lanes=536870912,null}return ph(s,u)}var y=r.memoizedState;if(y!==null){var x=y.dehydrated;if(bp(s),p)if(s.flags&256)s.flags&=-257,s=Q1(r,s,l);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if($t||Zo(r,s,l,!1),p=(l&r.childLanes)!==0,$t||p){if(u=gt,u!==null&&(x=hc(u,l),x!==0&&x!==y.retryLane))throw y.retryLane=x,Ya(r,x),Pn(u,r,x),zp;Ah(),s=Q1(r,s,l)}else r=y.treeContext,bt=mi(x.nextSibling),ln=s,Xe=!0,Rs=null,hi=!1,r!==null&&Vb(s,r),s=ph(s,u),s.flags|=4096;return s}return r=jr(r.child,{mode:u.mode,children:u.children}),r.ref=s.ref,s.child=r,r.return=s,r}function gh(r,s){var l=s.ref;if(l===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(s.flags|=4194816)}}function Bp(r,s,l,u,p){return Za(s),l=wp(r,s,l,u,void 0,p),u=xp(),r!==null&&!$t?(Tp(r,s,p),Fr(r,s,p)):(Xe&&u&&np(s),s.flags|=1,un(r,s,l,p),s.child)}function X1(r,s,l,u,p,y){return Za(s),s.updateQueue=null,l=Jb(s,u,l,p),Zb(r),u=xp(),r!==null&&!$t?(Tp(r,s,y),Fr(r,s,y)):(Xe&&u&&np(s),s.flags|=1,un(r,s,l,y),s.child)}function W1(r,s,l,u,p){if(Za(s),s.stateNode===null){var y=Yo,x=l.contextType;typeof x=="object"&&x!==null&&(y=cn(x)),y=new l(u,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Lp,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=u,y.state=s.memoizedState,y.refs={},fp(s),x=l.contextType,y.context=typeof x=="object"&&x!==null?cn(x):Yo,y.state=s.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Pp(s,l,x,u),y.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(x=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),x!==y.state&&Lp.enqueueReplaceState(y,y.state,null),zc(s,u,y,p),Uc(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){y=s.stateNode;var C=s.memoizedProps,B=ro(l,C);y.props=B;var Q=y.context,ne=l.contextType;x=Yo,typeof ne=="object"&&ne!==null&&(x=cn(ne));var se=l.getDerivedStateFromProps;ne=typeof se=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,ne||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||Q!==x)&&P1(s,y,u,x),Ds=!1;var X=s.memoizedState;y.state=X,zc(s,u,y,p),Uc(),Q=s.memoizedState,C||X!==Q||Ds?(typeof se=="function"&&(Pp(s,l,se,u),Q=s.memoizedState),(B=Ds||j1(s,l,B,u,X,Q,x))?(ne||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=Q),y.props=u,y.state=Q,y.context=x,u=B):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,mp(r,s),x=s.memoizedProps,ne=ro(l,x),y.props=ne,se=s.pendingProps,X=y.context,Q=l.contextType,B=Yo,typeof Q=="object"&&Q!==null&&(B=cn(Q)),C=l.getDerivedStateFromProps,(Q=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==se||X!==B)&&P1(s,y,u,B),Ds=!1,X=s.memoizedState,y.state=X,zc(s,u,y,p),Uc();var J=s.memoizedState;x!==se||X!==J||Ds||r!==null&&r.dependencies!==null&&Wd(r.dependencies)?(typeof C=="function"&&(Pp(s,l,C,u),J=s.memoizedState),(ne=Ds||j1(s,l,ne,u,X,J,B)||r!==null&&r.dependencies!==null&&Wd(r.dependencies))?(Q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,J,B),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,J,B)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=J),y.props=u,y.state=J,y.context=B,u=ne):(typeof y.componentDidUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(s.flags|=1024),u=!1)}return y=u,gh(r,s),u=(s.flags&128)!==0,y||u?(y=s.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,r!==null&&u?(s.child=no(s,r.child,null,p),s.child=no(s,null,l,p)):un(r,s,l,p),s.memoizedState=y.state,r=s.child):r=Fr(r,s,p),r}function Z1(r,s,l,u){return Xa(),s.flags|=256,un(r,s,l,u),s.child}var Fp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qp(r){return{baseLanes:r,cachePool:Bb()}}function Hp(r,s,l){return r=r!==null?r.childLanes&~l:0,s&&(r|=Wn),r}function J1(r,s,l){var u=s.pendingProps,p=!1,y=(s.flags&128)!==0,x;if((x=y)||(x=r!==null&&r.memoizedState===null?!1:(Vt.current&2)!==0),x&&(p=!0,s.flags&=-129),x=(s.flags&32)!==0,s.flags&=-33,r===null){if(Xe){if(p?Vs(s):js(),(r=bt)?(r=ow(r,hi),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Ns!==null?{id:lr,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},l=Db(r),l.return=s,s.child=l,ln=s,bt=null)):r=null,r===null)throw Is(s);return Ag(r)?s.lanes=32:s.lanes=536870912,null}var C=u.children;return u=u.fallback,p?(js(),p=s.mode,C=yh({mode:"hidden",children:C},p),u=Qa(u,p,l,null),C.return=s,u.return=s,C.sibling=u,s.child=C,u=s.child,u.memoizedState=qp(l),u.childLanes=Hp(r,x,l),s.memoizedState=Fp,$c(null,u)):(Vs(s),$p(s,C))}var B=r.memoizedState;if(B!==null&&(C=B.dehydrated,C!==null)){if(y)s.flags&256?(Vs(s),s.flags&=-257,s=Gp(r,s,l)):s.memoizedState!==null?(js(),s.child=r.child,s.flags|=128,s=null):(js(),C=u.fallback,p=s.mode,u=yh({mode:"visible",children:u.children},p),C=Qa(C,p,l,null),C.flags|=2,u.return=s,C.return=s,u.sibling=C,s.child=u,no(s,r.child,null,l),u=s.child,u.memoizedState=qp(l),u.childLanes=Hp(r,x,l),s.memoizedState=Fp,s=$c(null,u));else if(Vs(s),Ag(C)){if(x=C.nextSibling&&C.nextSibling.dataset,x)var Q=x.dgst;x=Q,u=Error(i(419)),u.stack="",u.digest=x,Mc({value:u,source:null,stack:null}),s=Gp(r,s,l)}else if($t||Zo(r,s,l,!1),x=(l&r.childLanes)!==0,$t||x){if(x=gt,x!==null&&(u=hc(x,l),u!==0&&u!==B.retryLane))throw B.retryLane=u,Ya(r,u),Pn(x,r,u),zp;Sg(C)||Ah(),s=Gp(r,s,l)}else Sg(C)?(s.flags|=192,s.child=r.child,s=null):(r=B.treeContext,bt=mi(C.nextSibling),ln=s,Xe=!0,Rs=null,hi=!1,r!==null&&Vb(s,r),s=$p(s,u.children),s.flags|=4096);return s}return p?(js(),C=u.fallback,p=s.mode,B=r.child,Q=B.sibling,u=jr(B,{mode:"hidden",children:u.children}),u.subtreeFlags=B.subtreeFlags&65011712,Q!==null?C=jr(Q,C):(C=Qa(C,p,l,null),C.flags|=2),C.return=s,u.return=s,u.sibling=C,s.child=u,$c(null,u),u=s.child,C=r.child.memoizedState,C===null?C=qp(l):(p=C.cachePool,p!==null?(B=qt._currentValue,p=p.parent!==B?{parent:B,pool:B}:p):p=Bb(),C={baseLanes:C.baseLanes|l,cachePool:p}),u.memoizedState=C,u.childLanes=Hp(r,x,l),s.memoizedState=Fp,$c(r.child,u)):(Vs(s),l=r.child,r=l.sibling,l=jr(l,{mode:"visible",children:u.children}),l.return=s,l.sibling=null,r!==null&&(x=s.deletions,x===null?(s.deletions=[r],s.flags|=16):x.push(r)),s.child=l,s.memoizedState=null,l)}function $p(r,s){return s=yh({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function yh(r,s){return r=Kn(22,r,null,s),r.lanes=0,r}function Gp(r,s,l){return no(s,r.child,null,l),r=$p(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function e_(r,s,l){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),op(r.return,s,l)}function Kp(r,s,l,u,p,y){var x=r.memoizedState;x===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:p,treeForkCount:y}:(x.isBackwards=s,x.rendering=null,x.renderingStartTime=0,x.last=u,x.tail=l,x.tailMode=p,x.treeForkCount=y)}function t_(r,s,l){var u=s.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var x=Vt.current,C=(x&2)!==0;if(C?(x=x&1|2,s.flags|=128):x&=1,ue(Vt,x),un(r,s,u,l),u=Xe?Dc:0,!C&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&e_(r,l,s);else if(r.tag===19)e_(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(l=s.child,p=null;l!==null;)r=l.alternate,r!==null&&sh(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),Kp(s,!1,p,l,y,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(r=p.alternate,r!==null&&sh(r)===null){s.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}Kp(s,!0,l,null,y,u);break;case"together":Kp(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Fr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),Us|=s.lanes,(l&s.childLanes)===0)if(r!==null){if(Zo(r,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,l=jr(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=jr(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function Yp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Wd(r)))}function ER(r,s,l){switch(s.tag){case 3:tt(s,s.stateNode.containerInfo),ks(s,qt,r.memoizedState.cache),Xa();break;case 27:case 5:nt(s);break;case 4:tt(s,s.stateNode.containerInfo);break;case 10:ks(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,bp(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Vs(s),s.flags|=128,null):(l&s.child.childLanes)!==0?J1(r,s,l):(Vs(s),r=Fr(r,s,l),r!==null?r.sibling:null);Vs(s);break;case 19:var p=(r.flags&128)!==0;if(u=(l&s.childLanes)!==0,u||(Zo(r,s,l,!1),u=(l&s.childLanes)!==0),p){if(u)return t_(r,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ue(Vt,Vt.current),u)break;return null;case 22:return s.lanes=0,K1(r,s,l,s.pendingProps);case 24:ks(s,qt,r.memoizedState.cache)}return Fr(r,s,l)}function n_(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps)$t=!0;else{if(!Yp(r,l)&&(s.flags&128)===0)return $t=!1,ER(r,s,l);$t=(r.flags&131072)!==0}else $t=!1,Xe&&(s.flags&1048576)!==0&&Ob(s,Dc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(r=eo(s.elementType),s.type=r,typeof r=="function")Jm(r)?(u=ro(r,u),s.tag=1,s=W1(null,s,r,u,l)):(s.tag=0,s=Bp(null,s,r,u,l));else{if(r!=null){var p=r.$$typeof;if(p===G){s.tag=11,s=H1(null,s,r,u,l);break e}else if(p===S){s.tag=14,s=$1(null,s,r,u,l);break e}}throw s=Ce(r)||r,Error(i(306,s,""))}}return s;case 0:return Bp(r,s,s.type,s.pendingProps,l);case 1:return u=s.type,p=ro(u,s.pendingProps),W1(r,s,u,p,l);case 3:e:{if(tt(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var y=s.memoizedState;p=y.element,mp(r,s),zc(s,u,null,l);var x=s.memoizedState;if(u=x.cache,ks(s,qt,u),u!==y.cache&&lp(s,[qt],l,!0),Uc(),u=x.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:x.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=Z1(r,s,u,l);break e}else if(u!==p){p=ci(Error(i(424)),s),Mc(p),s=Z1(r,s,u,l);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(bt=mi(r.firstChild),ln=s,Xe=!0,Rs=null,hi=!0,l=Kb(s,null,u,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Xa(),u===p){s=Fr(r,s,l);break e}un(r,s,u,l)}s=s.child}return s;case 26:return gh(r,s),r===null?(l=fw(s.type,null,s.pendingProps,null))?s.memoizedState=l:Xe||(l=s.type,r=s.pendingProps,u=Mh(be.current).createElement(l),u[zt]=s,u[en]=r,dn(u,l,r),Bt(u),s.stateNode=u):s.memoizedState=fw(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return nt(s),r===null&&Xe&&(u=s.stateNode=uw(s.type,s.pendingProps,be.current),ln=s,hi=!0,p=bt,Hs(s.type)?(Cg=p,bt=mi(u.firstChild)):bt=p),un(r,s,s.pendingProps.children,l),gh(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Xe&&((p=u=bt)&&(u=eI(u,s.type,s.pendingProps,hi),u!==null?(s.stateNode=u,ln=s,bt=mi(u.firstChild),hi=!1,p=!0):p=!1),p||Is(s)),nt(s),p=s.type,y=s.pendingProps,x=r!==null?r.memoizedProps:null,u=y.children,xg(p,y)?u=null:x!==null&&xg(p,x)&&(s.flags|=32),s.memoizedState!==null&&(p=wp(r,s,pR,null,null,l),au._currentValue=p),gh(r,s),un(r,s,u,l),s.child;case 6:return r===null&&Xe&&((r=l=bt)&&(l=tI(l,s.pendingProps,hi),l!==null?(s.stateNode=l,ln=s,bt=null,r=!0):r=!1),r||Is(s)),null;case 13:return J1(r,s,l);case 4:return tt(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=no(s,null,u,l):un(r,s,u,l),s.child;case 11:return H1(r,s,s.type,s.pendingProps,l);case 7:return un(r,s,s.pendingProps,l),s.child;case 8:return un(r,s,s.pendingProps.children,l),s.child;case 12:return un(r,s,s.pendingProps.children,l),s.child;case 10:return u=s.pendingProps,ks(s,s.type,u.value),un(r,s,u.children,l),s.child;case 9:return p=s.type._context,u=s.pendingProps.children,Za(s),p=cn(p),u=u(p),s.flags|=1,un(r,s,u,l),s.child;case 14:return $1(r,s,s.type,s.pendingProps,l);case 15:return G1(r,s,s.type,s.pendingProps,l);case 19:return t_(r,s,l);case 31:return TR(r,s,l);case 22:return K1(r,s,l,s.pendingProps);case 24:return Za(s),u=cn(qt),r===null?(p=dp(),p===null&&(p=gt,y=cp(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=l),p=y),s.memoizedState={parent:u,cache:p},fp(s),ks(s,qt,p)):((r.lanes&l)!==0&&(mp(r,s),zc(s,null,null,l),Uc()),p=r.memoizedState,y=s.memoizedState,p.parent!==u?(p={parent:u,cache:u},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),ks(s,qt,u)):(u=y.cache,ks(s,qt,u),u!==p.cache&&lp(s,[qt],l,!0))),un(r,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function qr(r){r.flags|=4}function Qp(r,s,l,u,p){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if(R_())r.flags|=8192;else throw to=th,hp}else r.flags&=-16777217}function i_(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!vw(s))if(R_())r.flags|=8192;else throw to=th,hp}function vh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Ed():536870912,r.lanes|=s,ul|=s)}function Gc(r,s){if(!Xe)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function _t(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(s)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=u,r.childLanes=l,s}function SR(r,s,l){var u=s.pendingProps;switch(ip(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(s),null;case 1:return _t(s),null;case 3:return l=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ur(qt),de(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Wo(s)?qr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,sp())),_t(s),null;case 26:var p=s.type,y=s.memoizedState;return r===null?(qr(s),y!==null?(_t(s),i_(s,y)):(_t(s),Qp(s,p,null,u,l))):y?y!==r.memoizedState?(qr(s),_t(s),i_(s,y)):(_t(s),s.flags&=-16777217):(r=r.memoizedProps,r!==u&&qr(s),_t(s),Qp(s,p,r,u,l)),null;case 27:if(ut(s),l=be.current,p=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&qr(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return _t(s),null}r=he.current,Wo(s)?jb(s):(r=uw(p,u,l),s.stateNode=r,qr(s))}return _t(s),null;case 5:if(ut(s),p=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&qr(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return _t(s),null}if(y=he.current,Wo(s))jb(s);else{var x=Mh(be.current);switch(y){case 1:y=x.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=x.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=x.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=x.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=x.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?x.createElement("select",{is:u.is}):x.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?x.createElement(p,{is:u.is}):x.createElement(p)}}y[zt]=s,y[en]=u;e:for(x=s.child;x!==null;){if(x.tag===5||x.tag===6)y.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===s)break e;for(;x.sibling===null;){if(x.return===null||x.return===s)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}s.stateNode=y;e:switch(dn(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&qr(s)}}return _t(s),Qp(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,l),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&qr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=be.current,Wo(s)){if(r=s.stateNode,l=s.memoizedProps,u=null,p=ln,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}r[zt]=s,r=!!(r.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||J_(r.nodeValue,l)),r||Is(s,!0)}else r=Mh(r).createTextNode(u),r[zt]=s,s.stateNode=r}return _t(s),null;case 31:if(l=s.memoizedState,r===null||r.memoizedState!==null){if(u=Wo(s),l!==null){if(r===null){if(!u)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[zt]=s}else Xa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_t(s),r=!1}else l=sp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return s.flags&256?(Qn(s),s):(Qn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return _t(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=Wo(s),u!==null&&u.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[zt]=s}else Xa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_t(s),p=!1}else p=sp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(Qn(s),s):(Qn(s),null)}return Qn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=u!==null,r=r!==null&&r.memoizedState!==null,l&&(u=s.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),l!==r&&l&&(s.child.flags|=8192),vh(s,s.updateQueue),_t(s),null);case 4:return de(),r===null&&yg(s.stateNode.containerInfo),_t(s),null;case 10:return Ur(s.type),_t(s),null;case 19:if(Z(Vt),u=s.memoizedState,u===null)return _t(s),null;if(p=(s.flags&128)!==0,y=u.rendering,y===null)if(p)Gc(u,!1);else{if(Rt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(y=sh(r),y!==null){for(s.flags|=128,Gc(u,!1),r=y.updateQueue,s.updateQueue=r,vh(s,r),s.subtreeFlags=0,r=l,l=s.child;l!==null;)kb(l,r),l=l.sibling;return ue(Vt,Vt.current&1|2),Xe&&Pr(s,u.treeForkCount),s.child}r=r.sibling}u.tail!==null&&Sn()>Th&&(s.flags|=128,p=!0,Gc(u,!1),s.lanes=4194304)}else{if(!p)if(r=sh(y),r!==null){if(s.flags|=128,p=!0,r=r.updateQueue,s.updateQueue=r,vh(s,r),Gc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Xe)return _t(s),null}else 2*Sn()-u.renderingStartTime>Th&&l!==536870912&&(s.flags|=128,p=!0,Gc(u,!1),s.lanes=4194304);u.isBackwards?(y.sibling=s.child,s.child=y):(r=u.last,r!==null?r.sibling=y:s.child=y,u.last=y)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Sn(),r.sibling=null,l=Vt.current,ue(Vt,p?l&1|2:l&1),Xe&&Pr(s,u.treeForkCount),r):(_t(s),null);case 22:case 23:return Qn(s),vp(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(l&536870912)!==0&&(s.flags&128)===0&&(_t(s),s.subtreeFlags&6&&(s.flags|=8192)):_t(s),l=s.updateQueue,l!==null&&vh(s,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==l&&(s.flags|=2048),r!==null&&Z(Ja),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ur(qt),_t(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function AR(r,s){switch(ip(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ur(qt),de(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return ut(s),null;case 31:if(s.memoizedState!==null){if(Qn(s),s.alternate===null)throw Error(i(340));Xa()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Qn(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Xa()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Z(Vt),null;case 4:return de(),null;case 10:return Ur(s.type),null;case 22:case 23:return Qn(s),vp(),r!==null&&Z(Ja),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Ur(qt),null;case 25:return null;default:return null}}function r_(r,s){switch(ip(s),s.tag){case 3:Ur(qt),de();break;case 26:case 27:case 5:ut(s);break;case 4:de();break;case 31:s.memoizedState!==null&&Qn(s);break;case 13:Qn(s);break;case 19:Z(Vt);break;case 10:Ur(s.type);break;case 22:case 23:Qn(s),vp(),r!==null&&Z(Ja);break;case 24:Ur(qt)}}function Kc(r,s){try{var l=s.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var p=u.next;l=p;do{if((l.tag&r)===r){u=void 0;var y=l.create,x=l.inst;u=y(),x.destroy=u}l=l.next}while(l!==p)}}catch(C){lt(s,s.return,C)}}function Ps(r,s,l){try{var u=s.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&r)===r){var x=u.inst,C=x.destroy;if(C!==void 0){x.destroy=void 0,p=s;var B=l,Q=C;try{Q()}catch(ne){lt(p,B,ne)}}}u=u.next}while(u!==y)}}catch(ne){lt(s,s.return,ne)}}function s_(r){var s=r.updateQueue;if(s!==null){var l=r.stateNode;try{Qb(s,l)}catch(u){lt(r,r.return,u)}}}function a_(r,s,l){l.props=ro(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(u){lt(r,s,u)}}function Yc(r,s){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof l=="function"?r.refCleanup=l(u):l.current=u}}catch(p){lt(r,s,p)}}function ur(r,s){var l=r.ref,u=r.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(p){lt(r,s,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){lt(r,s,p)}else l.current=null}function o_(r){var s=r.type,l=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(p){lt(r,r.return,p)}}function Xp(r,s,l){try{var u=r.stateNode;YR(u,r.type,l,s),u[en]=s}catch(p){lt(r,r.return,p)}}function l_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Hs(r.type)||r.tag===4}function Wp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||l_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Hs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Zp(r,s,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(r),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Ii));else if(u!==4&&(u===27&&Hs(r.type)&&(l=r.stateNode,s=null),r=r.child,r!==null))for(Zp(r,s,l),r=r.sibling;r!==null;)Zp(r,s,l),r=r.sibling}function bh(r,s,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(u!==4&&(u===27&&Hs(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(bh(r,s,l),r=r.sibling;r!==null;)bh(r,s,l),r=r.sibling}function c_(r){var s=r.stateNode,l=r.memoizedProps;try{for(var u=r.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);dn(s,u,l),s[zt]=r,s[en]=l}catch(y){lt(r,r.return,y)}}var Hr=!1,Gt=!1,Jp=!1,u_=typeof WeakSet=="function"?WeakSet:Set,nn=null;function CR(r,s){if(r=r.containerInfo,_g=zh,r=xb(r),Gm(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var x=0,C=-1,B=-1,Q=0,ne=0,se=r,X=null;t:for(;;){for(var J;se!==l||p!==0&&se.nodeType!==3||(C=x+p),se!==y||u!==0&&se.nodeType!==3||(B=x+u),se.nodeType===3&&(x+=se.nodeValue.length),(J=se.firstChild)!==null;)X=se,se=J;for(;;){if(se===r)break t;if(X===l&&++Q===p&&(C=x),X===y&&++ne===u&&(B=x),(J=se.nextSibling)!==null)break;se=X,X=se.parentNode}se=J}l=C===-1||B===-1?null:{start:C,end:B}}else l=null}l=l||{start:0,end:0}}else l=null;for(wg={focusedElem:r,selectionRange:l},zh=!1,nn=s;nn!==null;)if(s=nn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,nn=r;else for(;nn!==null;){switch(s=nn,y=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)p=r[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,l=s,p=y.memoizedProps,y=y.memoizedState,u=l.stateNode;try{var ve=ro(l.type,p);r=u.getSnapshotBeforeUpdate(ve,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(Re){lt(l,l.return,Re)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,l=r.nodeType,l===9)Eg(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Eg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,nn=r;break}nn=s.return}}function d_(r,s,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Gr(r,l),u&4&&Kc(5,l);break;case 1:if(Gr(r,l),u&4)if(r=l.stateNode,s===null)try{r.componentDidMount()}catch(x){lt(l,l.return,x)}else{var p=ro(l.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(p,s,r.__reactInternalSnapshotBeforeUpdate)}catch(x){lt(l,l.return,x)}}u&64&&s_(l),u&512&&Yc(l,l.return);break;case 3:if(Gr(r,l),u&64&&(r=l.updateQueue,r!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{Qb(r,s)}catch(x){lt(l,l.return,x)}}break;case 27:s===null&&u&4&&c_(l);case 26:case 5:Gr(r,l),s===null&&u&4&&o_(l),u&512&&Yc(l,l.return);break;case 12:Gr(r,l);break;case 31:Gr(r,l),u&4&&m_(r,l);break;case 13:Gr(r,l),u&4&&p_(r,l),u&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=jR.bind(null,l),nI(r,l))));break;case 22:if(u=l.memoizedState!==null||Hr,!u){s=s!==null&&s.memoizedState!==null||Gt,p=Hr;var y=Gt;Hr=u,(Gt=s)&&!y?Kr(r,l,(l.subtreeFlags&8772)!==0):Gr(r,l),Hr=p,Gt=y}break;case 30:break;default:Gr(r,l)}}function h_(r){var s=r.alternate;s!==null&&(r.alternate=null,h_(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Oo(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var xt=null,Mn=!1;function $r(r,s,l){for(l=l.child;l!==null;)f_(r,s,l),l=l.sibling}function f_(r,s,l){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Ai,l)}catch{}switch(l.tag){case 26:Gt||ur(l,s),$r(r,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Gt||ur(l,s);var u=xt,p=Mn;Hs(l.type)&&(xt=l.stateNode,Mn=!1),$r(r,s,l),iu(l.stateNode),xt=u,Mn=p;break;case 5:Gt||ur(l,s);case 6:if(u=xt,p=Mn,xt=null,$r(r,s,l),xt=u,Mn=p,xt!==null)if(Mn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(l.stateNode)}catch(y){lt(l,s,y)}else try{xt.removeChild(l.stateNode)}catch(y){lt(l,s,y)}break;case 18:xt!==null&&(Mn?(r=xt,sw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),vl(r)):sw(xt,l.stateNode));break;case 4:u=xt,p=Mn,xt=l.stateNode.containerInfo,Mn=!0,$r(r,s,l),xt=u,Mn=p;break;case 0:case 11:case 14:case 15:Ps(2,l,s),Gt||Ps(4,l,s),$r(r,s,l);break;case 1:Gt||(ur(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"&&a_(l,s,u)),$r(r,s,l);break;case 21:$r(r,s,l);break;case 22:Gt=(u=Gt)||l.memoizedState!==null,$r(r,s,l),Gt=u;break;default:$r(r,s,l)}}function m_(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{vl(r)}catch(l){lt(s,s.return,l)}}}function p_(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{vl(r)}catch(l){lt(s,s.return,l)}}function NR(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new u_),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new u_),s;default:throw Error(i(435,r.tag))}}function _h(r,s){var l=NR(r);s.forEach(function(u){if(!l.has(u)){l.add(u);var p=PR.bind(null,r,u);u.then(p,p)}})}function On(r,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var p=l[u],y=r,x=s,C=x;e:for(;C!==null;){switch(C.tag){case 27:if(Hs(C.type)){xt=C.stateNode,Mn=!1;break e}break;case 5:xt=C.stateNode,Mn=!1;break e;case 3:case 4:xt=C.stateNode.containerInfo,Mn=!0;break e}C=C.return}if(xt===null)throw Error(i(160));f_(y,x,p),xt=null,Mn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)g_(s,r),s=s.sibling}var ji=null;function g_(r,s){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:On(s,r),Vn(r),u&4&&(Ps(3,r,r.return),Kc(3,r),Ps(5,r,r.return));break;case 1:On(s,r),Vn(r),u&512&&(Gt||l===null||ur(l,l.return)),u&64&&Hr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var p=ji;if(On(s,r),Vn(r),u&512&&(Gt||l===null||ur(l,l.return)),u&4){var y=l!==null?l.memoizedState:null;if(u=r.memoizedState,l===null)if(u===null)if(r.stateNode===null){e:{u=r.type,l=r.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Xi]||y[zt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),dn(y,u,l),y[zt]=r,Bt(y),u=y;break e;case"link":var x=gw("link","href",p).get(u+(l.href||""));if(x){for(var C=0;C<x.length;C++)if(y=x[C],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(C,1);break t}}y=p.createElement(u),dn(y,u,l),p.head.appendChild(y);break;case"meta":if(x=gw("meta","content",p).get(u+(l.content||""))){for(C=0;C<x.length;C++)if(y=x[C],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(C,1);break t}}y=p.createElement(u),dn(y,u,l),p.head.appendChild(y);break;default:throw Error(i(468,u))}y[zt]=r,Bt(y),u=y}r.stateNode=u}else yw(p,r.type,r.stateNode);else r.stateNode=pw(p,u,r.memoizedProps);else y!==u?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,u===null?yw(p,r.type,r.stateNode):pw(p,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Xp(r,r.memoizedProps,l.memoizedProps)}break;case 27:On(s,r),Vn(r),u&512&&(Gt||l===null||ur(l,l.return)),l!==null&&u&4&&Xp(r,r.memoizedProps,l.memoizedProps);break;case 5:if(On(s,r),Vn(r),u&512&&(Gt||l===null||ur(l,l.return)),r.flags&32){p=r.stateNode;try{Dn(p,"")}catch(ve){lt(r,r.return,ve)}}u&4&&r.stateNode!=null&&(p=r.memoizedProps,Xp(r,p,l!==null?l.memoizedProps:p)),u&1024&&(Jp=!0);break;case 6:if(On(s,r),Vn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,l=r.stateNode;try{l.nodeValue=u}catch(ve){lt(r,r.return,ve)}}break;case 3:if(jh=null,p=ji,ji=Oh(s.containerInfo),On(s,r),ji=p,Vn(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{vl(s.containerInfo)}catch(ve){lt(r,r.return,ve)}Jp&&(Jp=!1,y_(r));break;case 4:u=ji,ji=Oh(r.stateNode.containerInfo),On(s,r),Vn(r),ji=u;break;case 12:On(s,r),Vn(r);break;case 31:On(s,r),Vn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,_h(r,u)));break;case 13:On(s,r),Vn(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(xh=Sn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,_h(r,u)));break;case 22:p=r.memoizedState!==null;var B=l!==null&&l.memoizedState!==null,Q=Hr,ne=Gt;if(Hr=Q||p,Gt=ne||B,On(s,r),Gt=ne,Hr=Q,Vn(r),u&8192)e:for(s=r.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(l===null||B||Hr||Gt||so(r)),l=null,s=r;;){if(s.tag===5||s.tag===26){if(l===null){B=l=s;try{if(y=B.stateNode,p)x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{C=B.stateNode;var se=B.memoizedProps.style,X=se!=null&&se.hasOwnProperty("display")?se.display:null;C.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(ve){lt(B,B.return,ve)}}}else if(s.tag===6){if(l===null){B=s;try{B.stateNode.nodeValue=p?"":B.memoizedProps}catch(ve){lt(B,B.return,ve)}}}else if(s.tag===18){if(l===null){B=s;try{var J=B.stateNode;p?aw(J,!0):aw(B.stateNode,!1)}catch(ve){lt(B,B.return,ve)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,_h(r,l))));break;case 19:On(s,r),Vn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,_h(r,u)));break;case 30:break;case 21:break;default:On(s,r),Vn(r)}}function Vn(r){var s=r.flags;if(s&2){try{for(var l,u=r.return;u!==null;){if(l_(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var p=l.stateNode,y=Wp(r);bh(r,y,p);break;case 5:var x=l.stateNode;l.flags&32&&(Dn(x,""),l.flags&=-33);var C=Wp(r);bh(r,C,x);break;case 3:case 4:var B=l.stateNode.containerInfo,Q=Wp(r);Zp(r,Q,B);break;default:throw Error(i(161))}}catch(ne){lt(r,r.return,ne)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function y_(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;y_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Gr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)d_(r,s.alternate,s),s=s.sibling}function so(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Ps(4,s,s.return),so(s);break;case 1:ur(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&a_(s,s.return,l),so(s);break;case 27:iu(s.stateNode);case 26:case 5:ur(s,s.return),so(s);break;case 22:s.memoizedState===null&&so(s);break;case 30:so(s);break;default:so(s)}r=r.sibling}}function Kr(r,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,p=r,y=s,x=y.flags;switch(y.tag){case 0:case 11:case 15:Kr(p,y,l),Kc(4,y);break;case 1:if(Kr(p,y,l),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Q){lt(u,u.return,Q)}if(u=y,p=u.updateQueue,p!==null){var C=u.stateNode;try{var B=p.shared.hiddenCallbacks;if(B!==null)for(p.shared.hiddenCallbacks=null,p=0;p<B.length;p++)Yb(B[p],C)}catch(Q){lt(u,u.return,Q)}}l&&x&64&&s_(y),Yc(y,y.return);break;case 27:c_(y);case 26:case 5:Kr(p,y,l),l&&u===null&&x&4&&o_(y),Yc(y,y.return);break;case 12:Kr(p,y,l);break;case 31:Kr(p,y,l),l&&x&4&&m_(p,y);break;case 13:Kr(p,y,l),l&&x&4&&p_(p,y);break;case 22:y.memoizedState===null&&Kr(p,y,l),Yc(y,y.return);break;case 30:break;default:Kr(p,y,l)}s=s.sibling}}function eg(r,s){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Oc(l))}function tg(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Oc(r))}function Pi(r,s,l,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)v_(r,s,l,u),s=s.sibling}function v_(r,s,l,u){var p=s.flags;switch(s.tag){case 0:case 11:case 15:Pi(r,s,l,u),p&2048&&Kc(9,s);break;case 1:Pi(r,s,l,u);break;case 3:Pi(r,s,l,u),p&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Oc(r)));break;case 12:if(p&2048){Pi(r,s,l,u),r=s.stateNode;try{var y=s.memoizedProps,x=y.id,C=y.onPostCommit;typeof C=="function"&&C(x,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){lt(s,s.return,B)}}else Pi(r,s,l,u);break;case 31:Pi(r,s,l,u);break;case 13:Pi(r,s,l,u);break;case 23:break;case 22:y=s.stateNode,x=s.alternate,s.memoizedState!==null?y._visibility&2?Pi(r,s,l,u):Qc(r,s):y._visibility&2?Pi(r,s,l,u):(y._visibility|=2,ol(r,s,l,u,(s.subtreeFlags&10256)!==0||!1)),p&2048&&eg(x,s);break;case 24:Pi(r,s,l,u),p&2048&&tg(s.alternate,s);break;default:Pi(r,s,l,u)}}function ol(r,s,l,u,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=r,x=s,C=l,B=u,Q=x.flags;switch(x.tag){case 0:case 11:case 15:ol(y,x,C,B,p),Kc(8,x);break;case 23:break;case 22:var ne=x.stateNode;x.memoizedState!==null?ne._visibility&2?ol(y,x,C,B,p):Qc(y,x):(ne._visibility|=2,ol(y,x,C,B,p)),p&&Q&2048&&eg(x.alternate,x);break;case 24:ol(y,x,C,B,p),p&&Q&2048&&tg(x.alternate,x);break;default:ol(y,x,C,B,p)}s=s.sibling}}function Qc(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=r,u=s,p=u.flags;switch(u.tag){case 22:Qc(l,u),p&2048&&eg(u.alternate,u);break;case 24:Qc(l,u),p&2048&&tg(u.alternate,u);break;default:Qc(l,u)}s=s.sibling}}var Xc=8192;function ll(r,s,l){if(r.subtreeFlags&Xc)for(r=r.child;r!==null;)b_(r,s,l),r=r.sibling}function b_(r,s,l){switch(r.tag){case 26:ll(r,s,l),r.flags&Xc&&r.memoizedState!==null&&mI(l,ji,r.memoizedState,r.memoizedProps);break;case 5:ll(r,s,l);break;case 3:case 4:var u=ji;ji=Oh(r.stateNode.containerInfo),ll(r,s,l),ji=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Xc,Xc=16777216,ll(r,s,l),Xc=u):ll(r,s,l));break;default:ll(r,s,l)}}function __(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Wc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];nn=u,x_(u,r)}__(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)w_(r),r=r.sibling}function w_(r){switch(r.tag){case 0:case 11:case 15:Wc(r),r.flags&2048&&Ps(9,r,r.return);break;case 3:Wc(r);break;case 12:Wc(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,wh(r)):Wc(r);break;default:Wc(r)}}function wh(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];nn=u,x_(u,r)}__(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Ps(8,s,s.return),wh(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,wh(s));break;default:wh(s)}r=r.sibling}}function x_(r,s){for(;nn!==null;){var l=nn;switch(l.tag){case 0:case 11:case 15:Ps(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Oc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,nn=u;else e:for(l=r;nn!==null;){u=nn;var p=u.sibling,y=u.return;if(h_(u),u===l){nn=null;break e}if(p!==null){p.return=y,nn=p;break e}nn=y}}}var RR={getCacheForType:function(r){var s=cn(qt),l=s.data.get(r);return l===void 0&&(l=r(),s.data.set(r,l)),l},cacheSignal:function(){return cn(qt).controller.signal}},IR=typeof WeakMap=="function"?WeakMap:Map,rt=0,gt=null,qe=null,$e=0,ot=0,Xn=null,Ls=!1,cl=!1,ng=!1,Yr=0,Rt=0,Us=0,ao=0,ig=0,Wn=0,ul=0,Zc=null,jn=null,rg=!1,xh=0,T_=0,Th=1/0,Eh=null,zs=null,Wt=0,Bs=null,dl=null,Qr=0,sg=0,ag=null,E_=null,Jc=0,og=null;function Zn(){return(rt&2)!==0&&$e!==0?$e&-$e:$.T!==null?fg():Sd()}function S_(){if(Wn===0)if(($e&536870912)===0||Xe){var r=Ma;Ma<<=1,(Ma&3932160)===0&&(Ma=262144),Wn=r}else Wn=536870912;return r=Yn.current,r!==null&&(r.flags|=32),Wn}function Pn(r,s,l){(r===gt&&(ot===2||ot===9)||r.cancelPendingCommit!==null)&&(hl(r,0),Fs(r,$e,Wn,!1)),Oa(r,l),((rt&2)===0||r!==gt)&&(r===gt&&((rt&2)===0&&(ao|=l),Rt===4&&Fs(r,$e,Wn,!1)),dr(r))}function A_(r,s,l){if((rt&6)!==0)throw Error(i(327));var u=!l&&(s&127)===0&&(s&r.expiredLanes)===0||Ci(r,s),p=u?MR(r,s):cg(r,s,!0),y=u;do{if(p===0){cl&&!u&&Fs(r,s,0,!1);break}else{if(l=r.current.alternate,y&&!kR(l)){p=cg(r,s,!1),y=!1;continue}if(p===2){if(y=s,r.errorRecoveryDisabledLanes&y)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){s=x;e:{var C=r;p=Zc;var B=C.current.memoizedState.isDehydrated;if(B&&(hl(C,x).flags|=256),x=cg(C,x,!1),x!==2){if(ng&&!B){C.errorRecoveryDisabledLanes|=y,ao|=y,p=4;break e}y=jn,jn=p,y!==null&&(jn===null?jn=y:jn.push.apply(jn,y))}p=x}if(y=!1,p!==2)continue}}if(p===1){hl(r,0),Fs(r,s,0,!0);break}e:{switch(u=r,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Fs(u,s,Wn,!Ls);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(p=xh+300-Sn(),10<p)){if(Fs(u,s,Wn,!Ls),Ki(u,0,!0)!==0)break e;Qr=s,u.timeoutHandle=iw(C_.bind(null,u,l,jn,Eh,rg,s,Wn,ao,ul,Ls,y,"Throttled",-0,0),p);break e}C_(u,l,jn,Eh,rg,s,Wn,ao,ul,Ls,y,null,-0,0)}}break}while(!0);dr(r)}function C_(r,s,l,u,p,y,x,C,B,Q,ne,se,X,J){if(r.timeoutHandle=-1,se=s.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ii},b_(s,y,se);var ve=(y&62914560)===y?xh-Sn():(y&4194048)===y?T_-Sn():0;if(ve=pI(se,ve),ve!==null){Qr=y,r.cancelPendingCommit=ve(V_.bind(null,r,s,y,l,u,p,x,C,B,ne,se,null,X,J)),Fs(r,y,x,!Q);return}}V_(r,s,y,l,u,p,x,C,B)}function kR(r){for(var s=r;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var p=l[u],y=p.getSnapshot;p=p.value;try{if(!Gn(y(),p))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Fs(r,s,l,u){s&=~ig,s&=~ao,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var p=s;0<p;){var y=31-Mt(p),x=1<<y;u[y]=-1,p&=~x}l!==0&&Va(r,l,s)}function Sh(){return(rt&6)===0?(eu(0),!1):!0}function lg(){if(qe!==null){if(ot===0)var r=qe.return;else r=qe,Lr=Wa=null,Ep(r),nl=null,jc=0,r=qe;for(;r!==null;)r_(r.alternate,r),r=r.return;qe=null}}function hl(r,s){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,WR(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Qr=0,lg(),gt=r,qe=l=jr(r.current,null),$e=s,ot=0,Xn=null,Ls=!1,cl=Ci(r,s),ng=!1,ul=Wn=ig=ao=Us=Rt=0,jn=Zc=null,rg=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var p=31-Mt(u),y=1<<p;s|=r[p],u&=~y}return Yr=s,Gd(),l}function N_(r,s){ze=null,$.H=Hc,s===tl||s===eh?(s=Hb(),ot=3):s===hp?(s=Hb(),ot=4):ot=s===zp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Xn=s,qe===null&&(Rt=1,mh(r,ci(s,r.current)))}function R_(){var r=Yn.current;return r===null?!0:($e&4194048)===$e?fi===null:($e&62914560)===$e||($e&536870912)!==0?r===fi:!1}function I_(){var r=$.H;return $.H=Hc,r===null?Hc:r}function k_(){var r=$.A;return $.A=RR,r}function Ah(){Rt=4,Ls||($e&4194048)!==$e&&Yn.current!==null||(cl=!0),(Us&134217727)===0&&(ao&134217727)===0||gt===null||Fs(gt,$e,Wn,!1)}function cg(r,s,l){var u=rt;rt|=2;var p=I_(),y=k_();(gt!==r||$e!==s)&&(Eh=null,hl(r,s)),s=!1;var x=Rt;e:do try{if(ot!==0&&qe!==null){var C=qe,B=Xn;switch(ot){case 8:lg(),x=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(s=!0);var Q=ot;if(ot=0,Xn=null,fl(r,C,B,Q),l&&cl){x=0;break e}break;default:Q=ot,ot=0,Xn=null,fl(r,C,B,Q)}}DR(),x=Rt;break}catch(ne){N_(r,ne)}while(!0);return s&&r.shellSuspendCounter++,Lr=Wa=null,rt=u,$.H=p,$.A=y,qe===null&&(gt=null,$e=0,Gd()),x}function DR(){for(;qe!==null;)D_(qe)}function MR(r,s){var l=rt;rt|=2;var u=I_(),p=k_();gt!==r||$e!==s?(Eh=null,Th=Sn()+500,hl(r,s)):cl=Ci(r,s);e:do try{if(ot!==0&&qe!==null){s=qe;var y=Xn;t:switch(ot){case 1:ot=0,Xn=null,fl(r,s,y,1);break;case 2:case 9:if(Fb(y)){ot=0,Xn=null,M_(s);break}s=function(){ot!==2&&ot!==9||gt!==r||(ot=7),dr(r)},y.then(s,s);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:Fb(y)?(ot=0,Xn=null,M_(s)):(ot=0,Xn=null,fl(r,s,y,7));break;case 5:var x=null;switch(qe.tag){case 26:x=qe.memoizedState;case 5:case 27:var C=qe;if(x?vw(x):C.stateNode.complete){ot=0,Xn=null;var B=C.sibling;if(B!==null)qe=B;else{var Q=C.return;Q!==null?(qe=Q,Ch(Q)):qe=null}break t}}ot=0,Xn=null,fl(r,s,y,5);break;case 6:ot=0,Xn=null,fl(r,s,y,6);break;case 8:lg(),Rt=6;break e;default:throw Error(i(462))}}OR();break}catch(ne){N_(r,ne)}while(!0);return Lr=Wa=null,$.H=u,$.A=p,rt=l,qe!==null?0:(gt=null,$e=0,Gd(),Rt)}function OR(){for(;qe!==null&&!qn();)D_(qe)}function D_(r){var s=n_(r.alternate,r,Yr);r.memoizedProps=r.pendingProps,s===null?Ch(r):qe=s}function M_(r){var s=r,l=s.alternate;switch(s.tag){case 15:case 0:s=X1(l,s,s.pendingProps,s.type,void 0,$e);break;case 11:s=X1(l,s,s.pendingProps,s.type.render,s.ref,$e);break;case 5:Ep(s);default:r_(l,s),s=qe=kb(s,Yr),s=n_(l,s,Yr)}r.memoizedProps=r.pendingProps,s===null?Ch(r):qe=s}function fl(r,s,l,u){Lr=Wa=null,Ep(s),nl=null,jc=0;var p=s.return;try{if(xR(r,p,s,l,$e)){Rt=1,mh(r,ci(l,r.current)),qe=null;return}}catch(y){if(p!==null)throw qe=p,y;Rt=1,mh(r,ci(l,r.current)),qe=null;return}s.flags&32768?(Xe||u===1?r=!0:cl||($e&536870912)!==0?r=!1:(Ls=r=!0,(u===2||u===9||u===3||u===6)&&(u=Yn.current,u!==null&&u.tag===13&&(u.flags|=16384))),O_(s,r)):Ch(s)}function Ch(r){var s=r;do{if((s.flags&32768)!==0){O_(s,Ls);return}r=s.return;var l=SR(s.alternate,s,Yr);if(l!==null){qe=l;return}if(s=s.sibling,s!==null){qe=s;return}qe=s=r}while(s!==null);Rt===0&&(Rt=5)}function O_(r,s){do{var l=AR(r.alternate,r);if(l!==null){l.flags&=32767,qe=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(r=r.sibling,r!==null)){qe=r;return}qe=r=l}while(r!==null);Rt=6,qe=null}function V_(r,s,l,u,p,y,x,C,B){r.cancelPendingCommit=null;do Nh();while(Wt!==0);if((rt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(y=s.lanes|s.childLanes,y|=Wm,Fm(r,l,y,x,C,B),r===gt&&(qe=gt=null,$e=0),dl=s,Bs=r,Qr=l,sg=y,ag=p,E_=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,LR(vs,function(){return z_(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,p=le.p,le.p=2,x=rt,rt|=4;try{CR(r,s,l)}finally{rt=x,le.p=p,$.T=u}}Wt=1,j_(),P_(),L_()}}function j_(){if(Wt===1){Wt=0;var r=Bs,s=dl,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=$.T,$.T=null;var u=le.p;le.p=2;var p=rt;rt|=4;try{g_(s,r);var y=wg,x=xb(r.containerInfo),C=y.focusedElem,B=y.selectionRange;if(x!==C&&C&&C.ownerDocument&&wb(C.ownerDocument.documentElement,C)){if(B!==null&&Gm(C)){var Q=B.start,ne=B.end;if(ne===void 0&&(ne=Q),"selectionStart"in C)C.selectionStart=Q,C.selectionEnd=Math.min(ne,C.value.length);else{var se=C.ownerDocument||document,X=se&&se.defaultView||window;if(X.getSelection){var J=X.getSelection(),ve=C.textContent.length,Re=Math.min(B.start,ve),mt=B.end===void 0?Re:Math.min(B.end,ve);!J.extend&&Re>mt&&(x=mt,mt=Re,Re=x);var H=_b(C,Re),q=_b(C,mt);if(H&&q&&(J.rangeCount!==1||J.anchorNode!==H.node||J.anchorOffset!==H.offset||J.focusNode!==q.node||J.focusOffset!==q.offset)){var Y=se.createRange();Y.setStart(H.node,H.offset),J.removeAllRanges(),Re>mt?(J.addRange(Y),J.extend(q.node,q.offset)):(Y.setEnd(q.node,q.offset),J.addRange(Y))}}}}for(se=[],J=C;J=J.parentNode;)J.nodeType===1&&se.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<se.length;C++){var ie=se[C];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}zh=!!_g,wg=_g=null}finally{rt=p,le.p=u,$.T=l}}r.current=s,Wt=2}}function P_(){if(Wt===2){Wt=0;var r=Bs,s=dl,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=$.T,$.T=null;var u=le.p;le.p=2;var p=rt;rt|=4;try{d_(r,s.alternate,s)}finally{rt=p,le.p=u,$.T=l}}Wt=3}}function L_(){if(Wt===4||Wt===3){Wt=0,vd();var r=Bs,s=dl,l=Qr,u=E_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Wt=5:(Wt=0,dl=Bs=null,U_(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(zs=null),Dr(l),s=s.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Ai,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=$.T,p=le.p,le.p=2,$.T=null;try{for(var y=r.onRecoverableError,x=0;x<u.length;x++){var C=u[x];y(C.value,{componentStack:C.stack})}}finally{$.T=s,le.p=p}}(Qr&3)!==0&&Nh(),dr(r),p=r.pendingLanes,(l&261930)!==0&&(p&42)!==0?r===og?Jc++:(Jc=0,og=r):Jc=0,eu(0)}}function U_(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Oc(s)))}function Nh(){return j_(),P_(),L_(),z_()}function z_(){if(Wt!==5)return!1;var r=Bs,s=sg;sg=0;var l=Dr(Qr),u=$.T,p=le.p;try{le.p=32>l?32:l,$.T=null,l=ag,ag=null;var y=Bs,x=Qr;if(Wt=0,dl=Bs=null,Qr=0,(rt&6)!==0)throw Error(i(331));var C=rt;if(rt|=4,w_(y.current),v_(y,y.current,x,l),rt=C,eu(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Ai,y)}catch{}return!0}finally{le.p=p,$.T=u,U_(r,s)}}function B_(r,s,l){s=ci(l,s),s=Up(r.stateNode,s,2),r=Os(r,s,2),r!==null&&(Oa(r,2),dr(r))}function lt(r,s,l){if(r.tag===3)B_(r,r,l);else for(;s!==null;){if(s.tag===3){B_(s,r,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(zs===null||!zs.has(u))){r=ci(l,r),l=F1(2),u=Os(s,l,2),u!==null&&(q1(l,u,s,r),Oa(u,2),dr(u));break}}s=s.return}}function ug(r,s,l){var u=r.pingCache;if(u===null){u=r.pingCache=new IR;var p=new Set;u.set(s,p)}else p=u.get(s),p===void 0&&(p=new Set,u.set(s,p));p.has(l)||(ng=!0,p.add(l),r=VR.bind(null,r,s,l),s.then(r,r))}function VR(r,s,l){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,gt===r&&($e&l)===l&&(Rt===4||Rt===3&&($e&62914560)===$e&&300>Sn()-xh?(rt&2)===0&&hl(r,0):ig|=l,ul===$e&&(ul=0)),dr(r)}function F_(r,s){s===0&&(s=Ed()),r=Ya(r,s),r!==null&&(Oa(r,s),dr(r))}function jR(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),F_(r,l)}function PR(r,s){var l=0;switch(r.tag){case 31:case 13:var u=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),F_(r,l)}function LR(r,s){return pt(r,s)}var Rh=null,ml=null,dg=!1,Ih=!1,hg=!1,qs=0;function dr(r){r!==ml&&r.next===null&&(ml===null?Rh=ml=r:ml=ml.next=r),Ih=!0,dg||(dg=!0,zR())}function eu(r,s){if(!hg&&Ih){hg=!0;do for(var l=!1,u=Rh;u!==null;){if(r!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var x=u.suspendedLanes,C=u.pingedLanes;y=(1<<31-Mt(42|r)+1)-1,y&=p&~(x&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,G_(u,y))}else y=$e,y=Ki(u,u===gt?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Ci(u,y)||(l=!0,G_(u,y));u=u.next}while(l);hg=!1}}function UR(){q_()}function q_(){Ih=dg=!1;var r=0;qs!==0&&XR()&&(r=qs);for(var s=Sn(),l=null,u=Rh;u!==null;){var p=u.next,y=H_(u,s);y===0?(u.next=null,l===null?Rh=p:l.next=p,p===null&&(ml=l)):(l=u,(r!==0||(y&3)!==0)&&(Ih=!0)),u=p}Wt!==0&&Wt!==5||eu(r),qs!==0&&(qs=0)}function H_(r,s){for(var l=r.suspendedLanes,u=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var x=31-Mt(y),C=1<<x,B=p[x];B===-1?((C&l)===0||(C&u)!==0)&&(p[x]=Bm(C,s)):B<=s&&(r.expiredLanes|=C),y&=~C}if(s=gt,l=$e,l=Ki(r,r===s?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,l===0||r===s&&(ot===2||ot===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&sn(u),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Ci(r,l)){if(s=l&-l,s===r.callbackPriority)return s;switch(u!==null&&sn(u),Dr(l)){case 2:case 8:l=uc;break;case 32:l=vs;break;case 268435456:l=bd;break;default:l=vs}return u=$_.bind(null,r),l=pt(l,u),r.callbackPriority=s,r.callbackNode=l,s}return u!==null&&u!==null&&sn(u),r.callbackPriority=2,r.callbackNode=null,2}function $_(r,s){if(Wt!==0&&Wt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(Nh()&&r.callbackNode!==l)return null;var u=$e;return u=Ki(r,r===gt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(A_(r,u,s),H_(r,Sn()),r.callbackNode!=null&&r.callbackNode===l?$_.bind(null,r):null)}function G_(r,s){if(Nh())return null;A_(r,s,!0)}function zR(){ZR(function(){(rt&6)!==0?pt(cc,UR):q_()})}function fg(){if(qs===0){var r=Jo;r===0&&(r=$i,$i<<=1,($i&261888)===0&&($i=256)),qs=r}return qs}function K_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Lo(""+r)}function Y_(r,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,r.id&&l.setAttribute("form",r.id),s.parentNode.insertBefore(l,s),r=new FormData(r),l.parentNode.removeChild(l),r}function BR(r,s,l,u,p){if(s==="submit"&&l&&l.stateNode===p){var y=K_((p[en]||null).action),x=u.submitter;x&&(s=(s=x[en]||null)?K_(s.formAction):x.getAttribute("formAction"),s!==null&&(y=s,x=null));var C=new rr("action","action",null,u,p);r.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(qs!==0){var B=x?Y_(p,x):new FormData(p);Mp(l,{pending:!0,data:B,method:p.method,action:y},null,B)}}else typeof y=="function"&&(C.preventDefault(),B=x?Y_(p,x):new FormData(p),Mp(l,{pending:!0,data:B,method:p.method,action:y},y,B))},currentTarget:p}]})}}for(var mg=0;mg<Xm.length;mg++){var pg=Xm[mg],FR=pg.toLowerCase(),qR=pg[0].toUpperCase()+pg.slice(1);Vi(FR,"on"+qR)}Vi(Sb,"onAnimationEnd"),Vi(Ab,"onAnimationIteration"),Vi(Cb,"onAnimationStart"),Vi("dblclick","onDoubleClick"),Vi("focusin","onFocus"),Vi("focusout","onBlur"),Vi(sR,"onTransitionRun"),Vi(aR,"onTransitionStart"),Vi(oR,"onTransitionCancel"),Vi(Nb,"onTransitionEnd"),er("onMouseEnter",["mouseout","mouseover"]),er("onMouseLeave",["mouseout","mouseover"]),er("onPointerEnter",["pointerout","pointerover"]),er("onPointerLeave",["pointerout","pointerover"]),Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tu));function Q_(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],p=u.event;u=u.listeners;e:{var y=void 0;if(s)for(var x=u.length-1;0<=x;x--){var C=u[x],B=C.instance,Q=C.currentTarget;if(C=C.listener,B!==y&&p.isPropagationStopped())break e;y=C,p.currentTarget=Q;try{y(p)}catch(ne){$d(ne)}p.currentTarget=null,y=B}else for(x=0;x<u.length;x++){if(C=u[x],B=C.instance,Q=C.currentTarget,C=C.listener,B!==y&&p.isPropagationStopped())break e;y=C,p.currentTarget=Q;try{y(p)}catch(ne){$d(ne)}p.currentTarget=null,y=B}}}}function He(r,s){var l=s[Mo];l===void 0&&(l=s[Mo]=new Set);var u=r+"__bubble";l.has(u)||(X_(s,r,2,!1),l.add(u))}function gg(r,s,l){var u=0;s&&(u|=4),X_(l,r,u,s)}var kh="_reactListening"+Math.random().toString(36).slice(2);function yg(r){if(!r[kh]){r[kh]=!0,fc.forEach(function(l){l!=="selectionchange"&&(HR.has(l)||gg(l,!1,r),gg(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[kh]||(s[kh]=!0,gg("selectionchange",!1,s))}}function X_(r,s,l,u){switch(Sw(s)){case 2:var p=vI;break;case 8:p=bI;break;default:p=Dg}l=p.bind(null,s,l,r),p=void 0,!za||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),u?p!==void 0?r.addEventListener(s,l,{capture:!0,passive:p}):r.addEventListener(s,l,!0):p!==void 0?r.addEventListener(s,l,{passive:p}):r.addEventListener(s,l,!1)}function vg(r,s,l,u,p){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var x=u.tag;if(x===3||x===4){var C=u.stateNode.containerInfo;if(C===p)break;if(x===4)for(x=u.return;x!==null;){var B=x.tag;if((B===3||B===4)&&x.stateNode.containerInfo===p)return;x=x.return}for(;C!==null;){if(x=Wi(C),x===null)return;if(B=x.tag,B===5||B===6||B===26||B===27){u=y=x;continue e}C=C.parentNode}}u=u.return}Es(function(){var Q=y,ne=si(l),se=[];e:{var X=Rb.get(r);if(X!==void 0){var J=rr,ve=r;switch(r){case"keypress":if(Fa(l)===0)break e;case"keydown":case"keyup":J=Fd;break;case"focusin":ve="focus",J=Ha;break;case"focusout":ve="blur",J=Ha;break;case"beforeblur":case"afterblur":J=Ha;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Md;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=w;break;case Sb:case Ab:case Cb:J=Vd;break;case Nb:J=I;break;case"scroll":case"scrollend":J=Sc;break;case"wheel":J=W;break;case"copy":case"cut":case"paste":J=jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Vr;break;case"toggle":case"beforetoggle":J=Ue}var Re=(s&4)!==0,mt=!Re&&(r==="scroll"||r==="scrollend"),H=Re?X!==null?X+"Capture":null:X;Re=[];for(var q=Q,Y;q!==null;){var ie=q;if(Y=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||Y===null||H===null||(ie=ki(q,H),ie!=null&&Re.push(nu(q,ie,Y))),mt)break;q=q.return}0<Re.length&&(X=new J(X,ve,null,l,ne),se.push({event:X,listeners:Re}))}}if((s&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",J=r==="mouseout"||r==="pointerout",X&&l!==xc&&(ve=l.relatedTarget||l.fromElement)&&(Wi(ve)||ve[Qi]))break e;if((J||X)&&(X=ne.window===ne?ne:(X=ne.ownerDocument)?X.defaultView||X.parentWindow:window,J?(ve=l.relatedTarget||l.toElement,J=Q,ve=ve?Wi(ve):null,ve!==null&&(mt=o(ve),Re=ve.tag,ve!==mt||Re!==5&&Re!==27&&Re!==6)&&(ve=null)):(J=null,ve=Q),J!==ve)){if(Re=Ac,ie="onMouseLeave",H="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(Re=Vr,ie="onPointerLeave",H="onPointerEnter",q="pointer"),mt=J==null?X:Hn(J),Y=ve==null?X:Hn(ve),X=new Re(ie,q+"leave",J,l,ne),X.target=mt,X.relatedTarget=Y,ie=null,Wi(ne)===Q&&(Re=new Re(H,q+"enter",ve,l,ne),Re.target=Y,Re.relatedTarget=mt,ie=Re),mt=ie,J&&ve)t:{for(Re=$R,H=J,q=ve,Y=0,ie=H;ie;ie=Re(ie))Y++;ie=0;for(var Se=q;Se;Se=Re(Se))ie++;for(;0<Y-ie;)H=Re(H),Y--;for(;0<ie-Y;)q=Re(q),ie--;for(;Y--;){if(H===q||q!==null&&H===q.alternate){Re=H;break t}H=Re(H),q=Re(q)}Re=null}else Re=null;J!==null&&W_(se,X,J,Re,!1),ve!==null&&mt!==null&&W_(se,mt,ve,Re,!0)}}e:{if(X=Q?Hn(Q):window,J=X.nodeName&&X.nodeName.toLowerCase(),J==="select"||J==="input"&&X.type==="file")var Je=mb;else if(hb(X))if(pb)Je=nR;else{Je=eR;var _e=JN}else J=X.nodeName,!J||J.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Po(Q.elementType)&&(Je=mb):Je=tR;if(Je&&(Je=Je(r,Q))){fb(se,Je,l,ne);break e}_e&&_e(r,X,Q),r==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&bc(X,"number",X.value)}switch(_e=Q?Hn(Q):window,r){case"focusin":(hb(_e)||_e.contentEditable==="true")&&($o=_e,Km=Q,kc=null);break;case"focusout":kc=Km=$o=null;break;case"mousedown":Ym=!0;break;case"contextmenu":case"mouseup":case"dragend":Ym=!1,Tb(se,l,ne);break;case"selectionchange":if(rR)break;case"keydown":case"keyup":Tb(se,l,ne)}var Be;if(it)e:{switch(r){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Ho?$a(r,l)&&(Ge="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Ge="onCompositionStart");Ge&&(or&&l.locale!=="ko"&&(Ho||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Ho&&(Be=Ec()):(ir=ne,Tc="value"in ir?ir.value:ir.textContent,Ho=!0)),_e=Dh(Q,Ge),0<_e.length&&(Ge=new ar(Ge,r,null,l,ne),se.push({event:Ge,listeners:_e}),Be?Ge.data=Be:(Be=qo(l),Be!==null&&(Ge.data=Be)))),(Be=oi?QN(r,l):XN(r,l))&&(Ge=Dh(Q,"onBeforeInput"),0<Ge.length&&(_e=new ar("onBeforeInput","beforeinput",null,l,ne),se.push({event:_e,listeners:Ge}),_e.data=Be)),BR(se,r,Q,l,ne)}Q_(se,s)})}function nu(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Dh(r,s){for(var l=s+"Capture",u=[];r!==null;){var p=r,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=ki(r,l),p!=null&&u.unshift(nu(r,p,y)),p=ki(r,s),p!=null&&u.push(nu(r,p,y))),r.tag===3)return u;r=r.return}return[]}function $R(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function W_(r,s,l,u,p){for(var y=s._reactName,x=[];l!==null&&l!==u;){var C=l,B=C.alternate,Q=C.stateNode;if(C=C.tag,B!==null&&B===u)break;C!==5&&C!==26&&C!==27||Q===null||(B=Q,p?(Q=ki(l,y),Q!=null&&x.unshift(nu(l,Q,B))):p||(Q=ki(l,y),Q!=null&&x.push(nu(l,Q,B)))),l=l.return}x.length!==0&&r.push({event:s,listeners:x})}var GR=/\r\n?/g,KR=/\u0000|\uFFFD/g;function Z_(r){return(typeof r=="string"?r:""+r).replace(GR,`
`).replace(KR,"")}function J_(r,s){return s=Z_(s),Z_(r)===s}function ft(r,s,l,u,p,y){switch(l){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Dn(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Dn(r,""+u);break;case"className":$n(r,"class",u);break;case"tabIndex":$n(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(r,l,u);break;case"style":wc(r,u,y);break;case"data":if(s!=="object"){$n(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||l!=="href")){r.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=Lo(""+u),r.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(s!=="input"&&ft(r,s,"name",p.name,p,null),ft(r,s,"formEncType",p.formEncType,p,null),ft(r,s,"formMethod",p.formMethod,p,null),ft(r,s,"formTarget",p.formTarget,p,null)):(ft(r,s,"encType",p.encType,p,null),ft(r,s,"method",p.method,p,null),ft(r,s,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=Lo(""+u),r.setAttribute(l,u);break;case"onClick":u!=null&&(r.onclick=Ii);break;case"onScroll":u!=null&&He("scroll",r);break;case"onScrollEnd":u!=null&&He("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}l=Lo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""+u):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":u===!0?r.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,u):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(l,u):r.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(l):r.setAttribute(l,u);break;case"popover":He("beforetoggle",r),He("toggle",r),Vo(r,"popover",u);break;case"xlinkActuate":Ft(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ft(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ft(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ft(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ft(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ft(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Vo(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Dd.get(l)||l,Vo(r,l,u))}}function bg(r,s,l,u,p,y){switch(l){case"style":wc(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof u=="string"?Dn(r,u):(typeof u=="number"||typeof u=="bigint")&&Dn(r,""+u);break;case"onScroll":u!=null&&He("scroll",r);break;case"onScrollEnd":u!=null&&He("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),s=l.slice(2,p?l.length-7:void 0),y=r[en]||null,y=y!=null?y[l]:null,typeof y=="function"&&r.removeEventListener(s,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(s,u,p);break e}l in r?r[l]=u:u===!0?r.setAttribute(l,""):Vo(r,l,u)}}}function dn(r,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",r),He("load",r);var u=!1,p=!1,y;for(y in l)if(l.hasOwnProperty(y)){var x=l[y];if(x!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(r,s,y,x,l,null)}}p&&ft(r,s,"srcSet",l.srcSet,l,null),u&&ft(r,s,"src",l.src,l,null);return;case"input":He("invalid",r);var C=y=x=p=null,B=null,Q=null;for(u in l)if(l.hasOwnProperty(u)){var ne=l[u];if(ne!=null)switch(u){case"name":p=ne;break;case"type":x=ne;break;case"checked":B=ne;break;case"defaultChecked":Q=ne;break;case"value":y=ne;break;case"defaultValue":C=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,s));break;default:ft(r,s,u,ne,l,null)}}Rd(r,y,C,B,Q,x,p,!1);return;case"select":He("invalid",r),u=x=y=null;for(p in l)if(l.hasOwnProperty(p)&&(C=l[p],C!=null))switch(p){case"value":y=C;break;case"defaultValue":x=C;break;case"multiple":u=C;default:ft(r,s,p,C,l,null)}s=y,l=x,r.multiple=!!u,s!=null?_s(r,!!u,s,!1):l!=null&&_s(r,!!u,l,!0);return;case"textarea":He("invalid",r),y=p=u=null;for(x in l)if(l.hasOwnProperty(x)&&(C=l[x],C!=null))switch(x){case"value":u=C;break;case"defaultValue":p=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:ft(r,s,x,C,l,null)}ws(r,u,p,y);return;case"option":for(B in l)if(l.hasOwnProperty(B)&&(u=l[B],u!=null))switch(B){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ft(r,s,B,u,l,null)}return;case"dialog":He("beforetoggle",r),He("toggle",r),He("cancel",r),He("close",r);break;case"iframe":case"object":He("load",r);break;case"video":case"audio":for(u=0;u<tu.length;u++)He(tu[u],r);break;case"image":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"embed":case"source":case"link":He("error",r),He("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in l)if(l.hasOwnProperty(Q)&&(u=l[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(r,s,Q,u,l,null)}return;default:if(Po(s)){for(ne in l)l.hasOwnProperty(ne)&&(u=l[ne],u!==void 0&&bg(r,s,ne,u,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(u=l[C],u!=null&&ft(r,s,C,u,l,null))}function YR(r,s,l,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,x=null,C=null,B=null,Q=null,ne=null;for(J in l){var se=l[J];if(l.hasOwnProperty(J)&&se!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":B=se;default:u.hasOwnProperty(J)||ft(r,s,J,null,u,se)}}for(var X in u){var J=u[X];if(se=l[X],u.hasOwnProperty(X)&&(J!=null||se!=null))switch(X){case"type":y=J;break;case"name":p=J;break;case"checked":Q=J;break;case"defaultChecked":ne=J;break;case"value":x=J;break;case"defaultValue":C=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:J!==se&&ft(r,s,X,J,u,se)}}jo(r,x,C,B,Q,ne,y,p);return;case"select":J=x=C=X=null;for(y in l)if(B=l[y],l.hasOwnProperty(y)&&B!=null)switch(y){case"value":break;case"multiple":J=B;default:u.hasOwnProperty(y)||ft(r,s,y,null,u,B)}for(p in u)if(y=u[p],B=l[p],u.hasOwnProperty(p)&&(y!=null||B!=null))switch(p){case"value":X=y;break;case"defaultValue":C=y;break;case"multiple":x=y;default:y!==B&&ft(r,s,p,y,u,B)}s=C,l=x,u=J,X!=null?_s(r,!!l,X,!1):!!u!=!!l&&(s!=null?_s(r,!!l,s,!0):_s(r,!!l,l?[]:"",!1));return;case"textarea":J=X=null;for(C in l)if(p=l[C],l.hasOwnProperty(C)&&p!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:ft(r,s,C,null,u,p)}for(x in u)if(p=u[x],y=l[x],u.hasOwnProperty(x)&&(p!=null||y!=null))switch(x){case"value":X=p;break;case"defaultValue":J=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&ft(r,s,x,p,u,y)}Id(r,X,J);return;case"option":for(var ve in l)if(X=l[ve],l.hasOwnProperty(ve)&&X!=null&&!u.hasOwnProperty(ve))switch(ve){case"selected":r.selected=!1;break;default:ft(r,s,ve,null,u,X)}for(B in u)if(X=u[B],J=l[B],u.hasOwnProperty(B)&&X!==J&&(X!=null||J!=null))switch(B){case"selected":r.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ft(r,s,B,X,u,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in l)X=l[Re],l.hasOwnProperty(Re)&&X!=null&&!u.hasOwnProperty(Re)&&ft(r,s,Re,null,u,X);for(Q in u)if(X=u[Q],J=l[Q],u.hasOwnProperty(Q)&&X!==J&&(X!=null||J!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:ft(r,s,Q,X,u,J)}return;default:if(Po(s)){for(var mt in l)X=l[mt],l.hasOwnProperty(mt)&&X!==void 0&&!u.hasOwnProperty(mt)&&bg(r,s,mt,void 0,u,X);for(ne in u)X=u[ne],J=l[ne],!u.hasOwnProperty(ne)||X===J||X===void 0&&J===void 0||bg(r,s,ne,X,u,J);return}}for(var H in l)X=l[H],l.hasOwnProperty(H)&&X!=null&&!u.hasOwnProperty(H)&&ft(r,s,H,null,u,X);for(se in u)X=u[se],J=l[se],!u.hasOwnProperty(se)||X===J||X==null&&J==null||ft(r,s,se,X,u,J)}function ew(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function QR(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var p=l[u],y=p.transferSize,x=p.initiatorType,C=p.duration;if(y&&C&&ew(x)){for(x=0,C=p.responseEnd,u+=1;u<l.length;u++){var B=l[u],Q=B.startTime;if(Q>C)break;var ne=B.transferSize,se=B.initiatorType;ne&&ew(se)&&(B=B.responseEnd,x+=ne*(B<C?1:(C-Q)/(B-Q)))}if(--u,s+=8*(y+x)/(p.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var _g=null,wg=null;function Mh(r){return r.nodeType===9?r:r.ownerDocument}function tw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nw(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function xg(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Tg=null;function XR(){var r=window.event;return r&&r.type==="popstate"?r===Tg?!1:(Tg=r,!0):(Tg=null,!1)}var iw=typeof setTimeout=="function"?setTimeout:void 0,WR=typeof clearTimeout=="function"?clearTimeout:void 0,rw=typeof Promise=="function"?Promise:void 0,ZR=typeof queueMicrotask=="function"?queueMicrotask:typeof rw<"u"?function(r){return rw.resolve(null).then(r).catch(JR)}:iw;function JR(r){setTimeout(function(){throw r})}function Hs(r){return r==="head"}function sw(r,s){var l=s,u=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(u===0){r.removeChild(p),vl(s);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")iu(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,iu(l);for(var y=l.firstChild;y;){var x=y.nextSibling,C=y.nodeName;y[Xi]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=x}}else l==="body"&&iu(r.ownerDocument.body);l=p}while(l);vl(s)}function aw(r,s){var l=r;r=0;do{var u=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=u}while(l)}function Eg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Eg(l),Oo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function eI(r,s,l,u){for(;r.nodeType===1;){var p=l;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Xi])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=mi(r.nextSibling),r===null)break}return null}function tI(r,s,l){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=mi(r.nextSibling),r===null))return null;return r}function ow(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=mi(r.nextSibling),r===null))return null;return r}function Sg(r){return r.data==="$?"||r.data==="$~"}function Ag(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function nI(r,s){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||l.readyState!=="loading")s();else{var u=function(){s(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function mi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var Cg=null;function lw(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(s===0)return mi(r.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}r=r.nextSibling}return null}function cw(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return r;s--}else l!=="/$"&&l!=="/&"||s++}r=r.previousSibling}return null}function uw(r,s,l){switch(s=Mh(l),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function iu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Oo(r)}var pi=new Map,dw=new Set;function Oh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Xr=le.d;le.d={f:iI,r:rI,D:sI,C:aI,L:oI,m:lI,X:uI,S:cI,M:dI};function iI(){var r=Xr.f(),s=Sh();return r||s}function rI(r){var s=ri(r);s!==null&&s.tag===5&&s.type==="form"?N1(s):Xr.r(r)}var pl=typeof document>"u"?null:document;function hw(r,s,l){var u=pl;if(u&&typeof s=="string"&&s){var p=kn(s);p='link[rel="'+r+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),dw.has(p)||(dw.add(p),r={rel:r,crossOrigin:l,href:s},u.querySelector(p)===null&&(s=u.createElement("link"),dn(s,"link",r),Bt(s),u.head.appendChild(s)))}}function sI(r){Xr.D(r),hw("dns-prefetch",r,null)}function aI(r,s){Xr.C(r,s),hw("preconnect",r,s)}function oI(r,s,l){Xr.L(r,s,l);var u=pl;if(u&&r&&s){var p='link[rel="preload"][as="'+kn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+kn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+kn(l.imageSizes)+'"]')):p+='[href="'+kn(r)+'"]';var y=p;switch(s){case"style":y=gl(r);break;case"script":y=yl(r)}pi.has(y)||(r=b({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:r,as:s},l),pi.set(y,r),u.querySelector(p)!==null||s==="style"&&u.querySelector(ru(y))||s==="script"&&u.querySelector(su(y))||(s=u.createElement("link"),dn(s,"link",r),Bt(s),u.head.appendChild(s)))}}function lI(r,s){Xr.m(r,s);var l=pl;if(l&&r){var u=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+kn(u)+'"][href="'+kn(r)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=yl(r)}if(!pi.has(y)&&(r=b({rel:"modulepreload",href:r},s),pi.set(y,r),l.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(su(y)))return}u=l.createElement("link"),dn(u,"link",r),Bt(u),l.head.appendChild(u)}}}function cI(r,s,l){Xr.S(r,s,l);var u=pl;if(u&&r){var p=Zi(u).hoistableStyles,y=gl(r);s=s||"default";var x=p.get(y);if(!x){var C={loading:0,preload:null};if(x=u.querySelector(ru(y)))C.loading=5;else{r=b({rel:"stylesheet",href:r,"data-precedence":s},l),(l=pi.get(y))&&Ng(r,l);var B=x=u.createElement("link");Bt(B),dn(B,"link",r),B._p=new Promise(function(Q,ne){B.onload=Q,B.onerror=ne}),B.addEventListener("load",function(){C.loading|=1}),B.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Vh(x,s,u)}x={type:"stylesheet",instance:x,count:1,state:C},p.set(y,x)}}}function uI(r,s){Xr.X(r,s);var l=pl;if(l&&r){var u=Zi(l).hoistableScripts,p=yl(r),y=u.get(p);y||(y=l.querySelector(su(p)),y||(r=b({src:r,async:!0},s),(s=pi.get(p))&&Rg(r,s),y=l.createElement("script"),Bt(y),dn(y,"link",r),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function dI(r,s){Xr.M(r,s);var l=pl;if(l&&r){var u=Zi(l).hoistableScripts,p=yl(r),y=u.get(p);y||(y=l.querySelector(su(p)),y||(r=b({src:r,async:!0,type:"module"},s),(s=pi.get(p))&&Rg(r,s),y=l.createElement("script"),Bt(y),dn(y,"link",r),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function fw(r,s,l,u){var p=(p=be.current)?Oh(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=gl(l.href),l=Zi(p).hoistableStyles,u=l.get(s),u||(u={type:"style",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=gl(l.href);var y=Zi(p).hoistableStyles,x=y.get(r);if(x||(p=p.ownerDocument||p,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,x),(y=p.querySelector(ru(r)))&&!y._p&&(x.instance=y,x.state.loading=5),pi.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},pi.set(r,l),y||hI(p,r,l,x.state))),s&&u===null)throw Error(i(528,""));return x}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=yl(l),l=Zi(p).hoistableScripts,u=l.get(s),u||(u={type:"script",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function gl(r){return'href="'+kn(r)+'"'}function ru(r){return'link[rel="stylesheet"]['+r+"]"}function mw(r){return b({},r,{"data-precedence":r.precedence,precedence:null})}function hI(r,s,l,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),dn(s,"link",l),Bt(s),r.head.appendChild(s))}function yl(r){return'[src="'+kn(r)+'"]'}function su(r){return"script[async]"+r}function pw(r,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+kn(l.href)+'"]');if(u)return s.instance=u,Bt(u),u;var p=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Bt(u),dn(u,"style",p),Vh(u,l.precedence,r),s.instance=u;case"stylesheet":p=gl(l.href);var y=r.querySelector(ru(p));if(y)return s.state.loading|=4,s.instance=y,Bt(y),y;u=mw(l),(p=pi.get(p))&&Ng(u,p),y=(r.ownerDocument||r).createElement("link"),Bt(y);var x=y;return x._p=new Promise(function(C,B){x.onload=C,x.onerror=B}),dn(y,"link",u),s.state.loading|=4,Vh(y,l.precedence,r),s.instance=y;case"script":return y=yl(l.src),(p=r.querySelector(su(y)))?(s.instance=p,Bt(p),p):(u=l,(p=pi.get(y))&&(u=b({},l),Rg(u,p)),r=r.ownerDocument||r,p=r.createElement("script"),Bt(p),dn(p,"link",u),r.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Vh(u,l.precedence,r));return s.instance}function Vh(r,s,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,x=0;x<u.length;x++){var C=u[x];if(C.dataset.precedence===s)y=C;else if(y!==p)break}y?y.parentNode.insertBefore(r,y.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(r,s.firstChild))}function Ng(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Rg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var jh=null;function gw(r,s,l){if(jh===null){var u=new Map,p=jh=new Map;p.set(l,u)}else p=jh,u=p.get(l),u||(u=new Map,p.set(l,u));if(u.has(r))return u;for(u.set(r,null),l=l.getElementsByTagName(r),p=0;p<l.length;p++){var y=l[p];if(!(y[Xi]||y[zt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var x=y.getAttribute(s)||"";x=r+x;var C=u.get(x);C?C.push(y):u.set(x,[y])}}return u}function yw(r,s,l){r=r.ownerDocument||r,r.head.insertBefore(l,s==="title"?r.querySelector("head > title"):null)}function fI(r,s,l){if(l===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function vw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function mI(r,s,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=gl(u.href),y=s.querySelector(ru(p));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Ph.bind(r),s.then(r,r)),l.state.loading|=4,l.instance=y,Bt(y);return}y=s.ownerDocument||s,u=mw(u),(p=pi.get(p))&&Ng(u,p),y=y.createElement("link"),Bt(y);var x=y;x._p=new Promise(function(C,B){x.onload=C,x.onerror=B}),dn(y,"link",u),l.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=Ph.bind(r),s.addEventListener("load",l),s.addEventListener("error",l))}}var Ig=0;function pI(r,s){return r.stylesheets&&r.count===0&&Uh(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var u=setTimeout(function(){if(r.stylesheets&&Uh(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+s);0<r.imgBytes&&Ig===0&&(Ig=62500*QR());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Uh(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Ig?50:800)+s);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Ph(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Lh=null;function Uh(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Lh=new Map,s.forEach(gI,r),Lh=null,Ph.call(r))}function gI(r,s){if(!(s.state.loading&4)){var l=Lh.get(r);if(l)var u=l.get(null);else{l=new Map,Lh.set(r,l);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var x=p[y];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),u=x)}u&&l.set(null,u)}p=s.instance,x=p.getAttribute("data-precedence"),y=l.get(x)||u,y===u&&l.set(null,p),l.set(x,p),this.count++,u=Ph.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),s.state.loading|=4}}var au={$$typeof:V,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function yI(r,s,l,u,p,y,x,C,B){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yi(0),this.hiddenUpdates=Yi(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function bw(r,s,l,u,p,y,x,C,B,Q,ne,se){return r=new yI(r,s,l,x,B,Q,ne,se,C),s=1,y===!0&&(s|=24),y=Kn(3,null,null,s),r.current=y,y.stateNode=r,s=cp(),s.refCount++,r.pooledCache=s,s.refCount++,y.memoizedState={element:u,isDehydrated:l,cache:s},fp(y),r}function _w(r){return r?(r=Yo,r):Yo}function ww(r,s,l,u,p,y){p=_w(p),u.context===null?u.context=p:u.pendingContext=p,u=Ms(s),u.payload={element:l},y=y===void 0?null:y,y!==null&&(u.callback=y),l=Os(r,u,s),l!==null&&(Pn(l,r,s),Lc(l,r,s))}function xw(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function kg(r,s){xw(r,s),(r=r.alternate)&&xw(r,s)}function Tw(r){if(r.tag===13||r.tag===31){var s=Ya(r,67108864);s!==null&&Pn(s,r,67108864),kg(r,67108864)}}function Ew(r){if(r.tag===13||r.tag===31){var s=Zn();s=ja(s);var l=Ya(r,s);l!==null&&Pn(l,r,s),kg(r,s)}}var zh=!0;function vI(r,s,l,u){var p=$.T;$.T=null;var y=le.p;try{le.p=2,Dg(r,s,l,u)}finally{le.p=y,$.T=p}}function bI(r,s,l,u){var p=$.T;$.T=null;var y=le.p;try{le.p=8,Dg(r,s,l,u)}finally{le.p=y,$.T=p}}function Dg(r,s,l,u){if(zh){var p=Mg(u);if(p===null)vg(r,s,u,Bh,l),Aw(r,u);else if(wI(p,r,s,l,u))u.stopPropagation();else if(Aw(r,u),s&4&&-1<_I.indexOf(r)){for(;p!==null;){var y=ri(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var x=Gi(y.pendingLanes);if(x!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;x;){var B=1<<31-Mt(x);C.entanglements[1]|=B,x&=~B}dr(y),(rt&6)===0&&(Th=Sn()+500,eu(0))}}break;case 31:case 13:C=Ya(y,2),C!==null&&Pn(C,y,2),Sh(),kg(y,2)}if(y=Mg(u),y===null&&vg(r,s,u,Bh,l),y===p)break;p=y}p!==null&&u.stopPropagation()}else vg(r,s,u,null,l)}}function Mg(r){return r=si(r),Og(r)}var Bh=null;function Og(r){if(Bh=null,r=Wi(r),r!==null){var s=o(r);if(s===null)r=null;else{var l=s.tag;if(l===13){if(r=c(s),r!==null)return r;r=null}else if(l===31){if(r=d(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Bh=r,null}function Sw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Da()){case cc:return 2;case uc:return 8;case vs:case zm:return 32;case bd:return 268435456;default:return 32}default:return 32}}var Vg=!1,$s=null,Gs=null,Ks=null,ou=new Map,lu=new Map,Ys=[],_I="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Aw(r,s){switch(r){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":Ks=null;break;case"pointerover":case"pointerout":ou.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":lu.delete(s.pointerId)}}function cu(r,s,l,u,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},s!==null&&(s=ri(s),s!==null&&Tw(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),r)}function wI(r,s,l,u,p){switch(s){case"focusin":return $s=cu($s,r,s,l,u,p),!0;case"dragenter":return Gs=cu(Gs,r,s,l,u,p),!0;case"mouseover":return Ks=cu(Ks,r,s,l,u,p),!0;case"pointerover":var y=p.pointerId;return ou.set(y,cu(ou.get(y)||null,r,s,l,u,p)),!0;case"gotpointercapture":return y=p.pointerId,lu.set(y,cu(lu.get(y)||null,r,s,l,u,p)),!0}return!1}function Cw(r){var s=Wi(r.target);if(s!==null){var l=o(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){r.blockedOn=s,Ni(r.priority,function(){Ew(l)});return}}else if(s===31){if(s=d(l),s!==null){r.blockedOn=s,Ni(r.priority,function(){Ew(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Fh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Mg(r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);xc=u,l.target.dispatchEvent(u),xc=null}else return s=ri(l),s!==null&&Tw(s),r.blockedOn=l,!1;s.shift()}return!0}function Nw(r,s,l){Fh(r)&&l.delete(s)}function xI(){Vg=!1,$s!==null&&Fh($s)&&($s=null),Gs!==null&&Fh(Gs)&&(Gs=null),Ks!==null&&Fh(Ks)&&(Ks=null),ou.forEach(Nw),lu.forEach(Nw)}function qh(r,s){r.blockedOn===s&&(r.blockedOn=null,Vg||(Vg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,xI)))}var Hh=null;function Rw(r){Hh!==r&&(Hh=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Hh===r&&(Hh=null);for(var s=0;s<r.length;s+=3){var l=r[s],u=r[s+1],p=r[s+2];if(typeof u!="function"){if(Og(u||l)===null)continue;break}var y=ri(l);y!==null&&(r.splice(s,3),s-=3,Mp(y,{pending:!0,data:p,method:l.method,action:u},u,p))}}))}function vl(r){function s(B){return qh(B,r)}$s!==null&&qh($s,r),Gs!==null&&qh(Gs,r),Ks!==null&&qh(Ks,r),ou.forEach(s),lu.forEach(s);for(var l=0;l<Ys.length;l++){var u=Ys[l];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Ys.length&&(l=Ys[0],l.blockedOn===null);)Cw(l),l.blockedOn===null&&Ys.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var p=l[u],y=l[u+1],x=p[en]||null;if(typeof y=="function")x||Rw(l);else if(x){var C=null;if(y&&y.hasAttribute("formAction")){if(p=y,x=y[en]||null)C=x.formAction;else if(Og(p)!==null)continue}else C=x.action;typeof C=="function"?l[u+1]=C:(l.splice(u,3),u-=3),Rw(l)}}}function Iw(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(x){return p=x})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function jg(r){this._internalRoot=r}$h.prototype.render=jg.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,u=Zn();ww(l,u,r,s,null,null)},$h.prototype.unmount=jg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ww(r.current,2,null,r,null,null),Sh(),s[Qi]=null}};function $h(r){this._internalRoot=r}$h.prototype.unstable_scheduleHydration=function(r){if(r){var s=Sd();r={blockedOn:null,target:r,priority:s};for(var l=0;l<Ys.length&&s!==0&&s<Ys[l].priority;l++);Ys.splice(l,0,r),l===0&&Cw(r)}};var kw=e.version;if(kw!=="19.2.0")throw Error(i(527,kw,"19.2.0"));le.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var TI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gh.isDisabled&&Gh.supportsFiber)try{Ai=Gh.inject(TI),an=Gh}catch{}}return du.createRoot=function(r,s){if(!a(r))throw Error(i(299));var l=!1,u="",p=L1,y=U1,x=z1;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError)),s=bw(r,1,!1,null,null,l,u,null,p,y,x,Iw),r[Qi]=s.current,yg(r),new jg(s)},du.hydrateRoot=function(r,s,l){if(!a(r))throw Error(i(299));var u=!1,p="",y=L1,x=U1,C=z1,B=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(B=l.formState)),s=bw(r,1,!0,s,l??null,u,p,B,y,x,C,Iw),s.context=_w(null),l=s.current,u=Zn(),u=ja(u),p=Ms(u),p.callback=null,Os(l,p,u),l=u,s.current.lanes=l,Oa(s,l),dr(s),r[Qi]=s.current,yg(r),new $h(s)},du.version="19.2.0",du}var Bw;function OI(){if(Bw)return Ug.exports;Bw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ug.exports=MI(),Ug.exports}var VI=OI();const jI="modulepreload",PI=function(t){return"/personal-budget-pwa/"+t},Fw={},LI=function(e,n,i){let a=Promise.resolve();if(n&&n.length>0){let f=function(g){return Promise.all(g.map(b=>Promise.resolve(b).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var c=f;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");a=f(n.map(g=>{if(g=PI(g),g in Fw)return;Fw[g]=!0;const b=g.endsWith(".css"),_=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const E=document.createElement("link");if(E.rel=b?"stylesheet":jI,b||(E.as="script"),E.crossOrigin="",E.href=g,h&&E.setAttribute("nonce",h),document.head.appendChild(E),b)return new Promise((k,A)=>{E.addEventListener("load",k),E.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return a.then(d=>{for(const h of d||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})};function UI(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:a,onRegisteredSW:o,onRegisterError:c}=t;let d,h;const f=async(b=!0)=>{await h};async function g(){if("serviceWorker"in navigator){if(d=await LI(async()=>{const{Workbox:b}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:b}},[]).then(({Workbox:b})=>new b("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(b=>{c?.(b)}),!d)return;d.addEventListener("activated",b=>{(b.isUpdate||b.isExternal)&&window.location.reload()}),d.addEventListener("installed",b=>{b.isUpdate||i?.()}),d.register({immediate:e}).then(b=>{o?o("/personal-budget-pwa/sw.js",b):a?.(b)}).catch(b=>{c?.(b)})}}return h=g(),f}var qw="popstate";function zI(t={}){function e(a,o){let{pathname:c="/",search:d="",hash:h=""}=Co(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),E0("",{pathname:c,search:d,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let h=a.location.href,f=h.indexOf("#");d=f===-1?h:h.slice(0,f)}return d+"#"+(typeof o=="string"?o:Du(o))}function i(a,o){Si(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return FI(e,n,i,t)}function St(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Si(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BI(){return Math.random().toString(36).substring(2,10)}function Hw(t,e){return{usr:t.state,key:t.key,idx:e}}function E0(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Co(e):e,state:n,key:e&&e.key||i||BI()}}function Du({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Co(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function FI(t,e,n,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,c=a.history,d="POP",h=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function b(){d="POP";let R=g(),L=R==null?null:R-f;f=R,h&&h({action:d,location:A.location,delta:L})}function _(R,L){d="PUSH";let z=E0(A.location,R,L);n&&n(z,R),f=g()+1;let V=Hw(z,f),G=A.createHref(z);try{c.pushState(V,"",G)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;a.location.assign(G)}o&&h&&h({action:d,location:A.location,delta:1})}function E(R,L){d="REPLACE";let z=E0(A.location,R,L);n&&n(z,R),f=g();let V=Hw(z,f),G=A.createHref(z);c.replaceState(V,"",G),o&&h&&h({action:d,location:A.location,delta:0})}function k(R){return qI(R)}let A={get action(){return d},get location(){return t(a,c)},listen(R){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(qw,b),h=R,()=>{a.removeEventListener(qw,b),h=null}},createHref(R){return e(a,R)},createURL:k,encodeLocation(R){let L=k(R);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:_,replace:E,go(R){return c.go(R)}};return A}function qI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),St(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Du(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function nS(t,e,n="/"){return HI(t,e,n,!1)}function HI(t,e,n,i){let a=typeof e=="string"?Co(e):e,o=os(a.pathname||"/",n);if(o==null)return null;let c=iS(t);$I(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let f=nk(o);d=ek(c[h],f,i)}return d}function iS(t,e=[],n=[],i="",a=!1){let o=(c,d,h=a,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&h)return;St(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let b=is([i,g.relativePath]),_=n.concat(g);c.children&&c.children.length>0&&(St(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),iS(c.children,e,_,b,h)),!(c.path==null&&!c.index)&&e.push({path:b,score:ZI(b,c.index),routesMeta:_})};return t.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))o(c,d);else for(let h of rS(c.path))o(c,d,!0,h)}),e}function rS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let c=rS(i.join("/")),d=[];return d.push(...c.map(h=>h===""?o:[o,h].join("/"))),a&&d.push(...c),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function $I(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:JI(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var GI=/^:[\w-]+$/,KI=3,YI=2,QI=1,XI=10,WI=-2,$w=t=>t==="*";function ZI(t,e){let n=t.split("/"),i=n.length;return n.some($w)&&(i+=WI),e&&(i+=YI),n.filter(a=>!$w(a)).reduce((a,o)=>a+(GI.test(o)?KI:o===""?QI:XI),i)}function JI(t,e){return t.length===e.length&&t.slice(0,-1).every((i,a)=>i===e[a])?t[t.length-1]-e[e.length-1]:0}function ek(t,e,n=!1){let{routesMeta:i}=t,a={},o="/",c=[];for(let d=0;d<i.length;++d){let h=i[d],f=d===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",b=Af({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),_=h.route;if(!b&&f&&n&&!i[i.length-1].route.index&&(b=Af({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!b)return null;Object.assign(a,b.params),c.push({params:a,pathname:is([o,b.pathname]),pathnameBase:ok(is([o,b.pathnameBase])),route:_}),b.pathnameBase!=="/"&&(o=is([o,b.pathnameBase]))}return c}function Af(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=tk(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:b},_)=>{if(g==="*"){let k=d[_]||"";c=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const E=d[_];return b&&!E?f[g]=void 0:f[g]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:t}}function tk(t,e=!1,n=!0){Si(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(i.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function nk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Si(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function os(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var ik=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rk=t=>ik.test(t);function sk(t,e="/"){let{pathname:n,search:i="",hash:a=""}=typeof t=="string"?Co(t):t,o;if(n)if(rk(n))o=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),Si(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${n}`)}n.startsWith("/")?o=Gw(n.substring(1),"/"):o=Gw(n,e)}else o=e;return{pathname:o,search:lk(i),hash:ck(a)}}function Gw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function qg(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ak(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sS(t){let e=ak(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function aS(t,e,n,i=!1){let a;typeof t=="string"?a=Co(t):(a={...t},St(!a.pathname||!a.pathname.includes("?"),qg("?","pathname","search",a)),St(!a.pathname||!a.pathname.includes("#"),qg("#","pathname","hash",a)),St(!a.search||!a.search.includes("#"),qg("#","search","hash",a)));let o=t===""||a.pathname==="",c=o?"/":a.pathname,d;if(c==null)d=n;else{let b=e.length-1;if(!i&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),b-=1;a.pathname=_.join("/")}d=b>=0?e[b]:"/"}let h=sk(a,d),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var is=t=>t.join("/").replace(/\/\/+/g,"/"),ok=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ck=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oS=["POST","PUT","PATCH","DELETE"];new Set(oS);var dk=["GET",...oS];new Set(dk);var Wl=M.createContext(null);Wl.displayName="DataRouter";var im=M.createContext(null);im.displayName="DataRouterState";M.createContext(!1);var lS=M.createContext({isTransitioning:!1});lS.displayName="ViewTransition";var hk=M.createContext(new Map);hk.displayName="Fetchers";var fk=M.createContext(null);fk.displayName="Await";var Nr=M.createContext(null);Nr.displayName="Navigation";var Zu=M.createContext(null);Zu.displayName="Location";var Rr=M.createContext({outlet:null,matches:[],isDataRoute:!1});Rr.displayName="Route";var Ay=M.createContext(null);Ay.displayName="RouteError";function mk(t,{relative:e}={}){St(Ju(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=M.useContext(Nr),{hash:a,pathname:o,search:c}=ed(t,{relative:e}),d=o;return n!=="/"&&(d=o==="/"?n:is([n,o])),i.createHref({pathname:d,search:c,hash:a})}function Ju(){return M.useContext(Zu)!=null}function Ta(){return St(Ju(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Zu).location}var cS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uS(t){M.useContext(Nr).static||M.useLayoutEffect(t)}function Ea(){let{isDataRoute:t}=M.useContext(Rr);return t?Nk():pk()}function pk(){St(Ju(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(Wl),{basename:e,navigator:n}=M.useContext(Nr),{matches:i}=M.useContext(Rr),{pathname:a}=Ta(),o=JSON.stringify(sS(i)),c=M.useRef(!1);return uS(()=>{c.current=!0}),M.useCallback((h,f={})=>{if(Si(c.current,cS),!c.current)return;if(typeof h=="number"){n.go(h);return}let g=aS(h,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:is([e,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[e,n,o,a,t])}M.createContext(null);function gk(){let{matches:t}=M.useContext(Rr),e=t[t.length-1];return e?e.params:{}}function ed(t,{relative:e}={}){let{matches:n}=M.useContext(Rr),{pathname:i}=Ta(),a=JSON.stringify(sS(n));return M.useMemo(()=>aS(t,JSON.parse(a),i,e==="path"),[t,a,i,e])}function yk(t,e){return dS(t,e)}function dS(t,e,n,i,a){St(Ju(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=M.useContext(Nr),{matches:c}=M.useContext(Rr),d=c[c.length-1],h=d?d.params:{},f=d?d.pathname:"/",g=d?d.pathnameBase:"/",b=d&&d.route;{let z=b&&b.path||"";hS(f,!b||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let _=Ta(),E;if(e){let z=typeof e=="string"?Co(e):e;St(g==="/"||z.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${z.pathname}" was given in the \`location\` prop.`),E=z}else E=_;let k=E.pathname||"/",A=k;if(g!=="/"){let z=g.replace(/^\//,"").split("/");A="/"+k.replace(/^\//,"").split("/").slice(z.length).join("/")}let R=nS(t,{pathname:A});Si(b||R!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Si(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=xk(R&&R.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:is([g,o.encodeLocation?o.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:is([g,o.encodeLocation?o.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),c,n,i,a);return e&&L?M.createElement(Zu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},L):L}function vk(){let t=Ck(),e=uk(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:o},"ErrorBoundary")," or"," ",M.createElement("code",{style:o},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:a},n):null,c)}var bk=M.createElement(vk,null),_k=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?M.createElement(Rr.Provider,{value:this.props.routeContext},M.createElement(Ay.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wk({routeContext:t,match:e,children:n}){let i=M.useContext(Wl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Rr.Provider,{value:t},n)}function xk(t,e=[],n=null,i=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=n?.errors;if(c!=null){let g=o.findIndex(b=>b.route.id&&c?.[b.route.id]!==void 0);St(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let d=!1,h=-1;if(n)for(let g=0;g<o.length;g++){let b=o[g];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(h=g),b.route.id){let{loaderData:_,errors:E}=n,k=b.route.loader&&!_.hasOwnProperty(b.route.id)&&(!E||E[b.route.id]===void 0);if(b.route.lazy||k){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let f=n&&i?(g,b)=>{i(g,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:b})}:void 0;return o.reduceRight((g,b,_)=>{let E,k=!1,A=null,R=null;n&&(E=c&&b.route.id?c[b.route.id]:void 0,A=b.route.errorElement||bk,d&&(h<0&&_===0?(hS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,R=null):h===_&&(k=!0,R=b.route.hydrateFallbackElement||null)));let L=e.concat(o.slice(0,_+1)),z=()=>{let V;return E?V=A:k?V=R:b.route.Component?V=M.createElement(b.route.Component,null):b.route.element?V=b.route.element:V=g,M.createElement(wk,{match:b,routeContext:{outlet:g,matches:L,isDataRoute:n!=null},children:V})};return n&&(b.route.ErrorBoundary||b.route.errorElement||_===0)?M.createElement(_k,{location:n.location,revalidation:n.revalidation,component:A,error:E,children:z(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:f}):z()},null)}function Cy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tk(t){let e=M.useContext(Wl);return St(e,Cy(t)),e}function Ek(t){let e=M.useContext(im);return St(e,Cy(t)),e}function Sk(t){let e=M.useContext(Rr);return St(e,Cy(t)),e}function Ny(t){let e=Sk(t),n=e.matches[e.matches.length-1];return St(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Ak(){return Ny("useRouteId")}function Ck(){let t=M.useContext(Ay),e=Ek("useRouteError"),n=Ny("useRouteError");return t!==void 0?t:e.errors?.[n]}function Nk(){let{router:t}=Tk("useNavigate"),e=Ny("useNavigate"),n=M.useRef(!1);return uS(()=>{n.current=!0}),M.useCallback(async(a,o={})=>{Si(n.current,cS),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var Kw={};function hS(t,e,n){!e&&!Kw[t]&&(Kw[t]=!0,Si(!1,n))}M.memo(Rk);function Rk({routes:t,future:e,state:n,unstable_onError:i}){return dS(t,void 0,n,i,e)}function Wr(t){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ik({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:a,static:o=!1}){St(!Ju(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=M.useMemo(()=>({basename:c,navigator:a,static:o,future:{}}),[c,a,o]);typeof n=="string"&&(n=Co(n));let{pathname:h="/",search:f="",hash:g="",state:b=null,key:_="default"}=n,E=M.useMemo(()=>{let k=os(h,c);return k==null?null:{location:{pathname:k,search:f,hash:g,state:b,key:_},navigationType:i}},[c,h,f,g,b,_,i]);return Si(E!=null,`<Router basename="${c}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:M.createElement(Nr.Provider,{value:d},M.createElement(Zu.Provider,{children:e,value:E}))}function kk({children:t,location:e}){return yk(S0(t),e)}function S0(t,e=[]){let n=[];return M.Children.forEach(t,(i,a)=>{if(!M.isValidElement(i))return;let o=[...e,a];if(i.type===M.Fragment){n.push.apply(n,S0(i.props.children,o));return}St(i.type===Wr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=S0(i.props.children,o)),n.push(c)}),n}var of="get",lf="application/x-www-form-urlencoded";function rm(t){return t!=null&&typeof t.tagName=="string"}function Dk(t){return rm(t)&&t.tagName.toLowerCase()==="button"}function Mk(t){return rm(t)&&t.tagName.toLowerCase()==="form"}function Ok(t){return rm(t)&&t.tagName.toLowerCase()==="input"}function Vk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jk(t,e){return t.button===0&&(!e||e==="_self")&&!Vk(t)}var Yh=null;function Pk(){if(Yh===null)try{new FormData(document.createElement("form"),0),Yh=!1}catch{Yh=!0}return Yh}var Lk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hg(t){return t!=null&&!Lk.has(t)?(Si(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lf}"`),null):t}function Uk(t,e){let n,i,a,o,c;if(Mk(t)){let d=t.getAttribute("action");i=d?os(d,e):null,n=t.getAttribute("method")||of,a=Hg(t.getAttribute("enctype"))||lf,o=new FormData(t)}else if(Dk(t)||Ok(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||d.getAttribute("action");if(i=h?os(h,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||of,a=Hg(t.getAttribute("formenctype"))||Hg(d.getAttribute("enctype"))||lf,o=new FormData(d,t),!Pk()){let{name:f,type:g,value:b}=t;if(g==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,b)}}else{if(rm(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=of,i=null,a=lf,c=t}return o&&a==="text/plain"&&(c=o,o=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ry(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zk(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&os(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Bk(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Fk(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function qk(t,e,n){let i=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let c=await Bk(o,n);return c.links?c.links():[]}return[]}));return Kk(i.flat(1).filter(Fk).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Yw(t,e,n,i,a,o){let c=(h,f)=>n[f]?h.route.id!==n[f].route.id:!0,d=(h,f)=>n[f].pathname!==h.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,f)=>c(h,f)||d(h,f)):o==="data"?e.filter((h,f)=>{let g=i.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(c(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Hk(t,e,{includeHydrateFallback:n}={}){return $k(t.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function $k(t){return[...new Set(t)]}function Gk(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function Kk(t,e){let n=new Set;return new Set(e),t.reduce((i,a)=>{let o=JSON.stringify(Gk(a));return n.has(o)||(n.add(o),i.push({key:o,link:a})),i},[])}function fS(){let t=M.useContext(Wl);return Ry(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Yk(){let t=M.useContext(im);return Ry(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Iy=M.createContext(void 0);Iy.displayName="FrameworkContext";function mS(){let t=M.useContext(Iy);return Ry(t,"You must render this element inside a <HydratedRouter> element"),t}function Qk(t,e){let n=M.useContext(Iy),[i,a]=M.useState(!1),[o,c]=M.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:b}=e,_=M.useRef(null);M.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let A=L=>{L.forEach(z=>{c(z.isIntersecting)})},R=new IntersectionObserver(A,{threshold:.5});return _.current&&R.observe(_.current),()=>{R.disconnect()}}},[t]),M.useEffect(()=>{if(i){let A=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(A)}}},[i]);let E=()=>{a(!0)},k=()=>{a(!1),c(!1)};return n?t!=="intent"?[o,_,{}]:[o,_,{onFocus:hu(d,E),onBlur:hu(h,k),onMouseEnter:hu(f,E),onMouseLeave:hu(g,k),onTouchStart:hu(b,E)}]:[!1,_,{}]}function hu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Xk({page:t,...e}){let{router:n}=fS(),i=M.useMemo(()=>nS(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?M.createElement(Zk,{page:t,matches:i,...e}):null}function Wk(t){let{manifest:e,routeModules:n}=mS(),[i,a]=M.useState([]);return M.useEffect(()=>{let o=!1;return qk(t,e,n).then(c=>{o||a(c)}),()=>{o=!0}},[t,e,n]),i}function Zk({page:t,matches:e,...n}){let i=Ta(),{manifest:a,routeModules:o}=mS(),{basename:c}=fS(),{loaderData:d,matches:h}=Yk(),f=M.useMemo(()=>Yw(t,e,h,a,i,"data"),[t,e,h,a,i]),g=M.useMemo(()=>Yw(t,e,h,a,i,"assets"),[t,e,h,a,i]),b=M.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let k=new Set,A=!1;if(e.forEach(L=>{let z=a.routes[L.route.id];!z||!z.hasLoader||(!f.some(V=>V.route.id===L.route.id)&&L.route.id in d&&o[L.route.id]?.shouldRevalidate||z.hasClientLoader?A=!0:k.add(L.route.id))}),k.size===0)return[];let R=zk(t,c,"data");return A&&k.size>0&&R.searchParams.set("_routes",e.filter(L=>k.has(L.route.id)).map(L=>L.route.id).join(",")),[R.pathname+R.search]},[c,d,i,a,f,e,t,o]),_=M.useMemo(()=>Hk(g,a),[g,a]),E=Wk(g);return M.createElement(M.Fragment,null,b.map(k=>M.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),_.map(k=>M.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),E.map(({key:k,link:A})=>M.createElement("link",{key:k,nonce:n.nonce,...A})))}function Jk(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var pS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pS&&(window.__reactRouterVersion="7.9.6")}catch{}function eD({basename:t,children:e,window:n}){let i=M.useRef();i.current==null&&(i.current=zI({window:n,v5Compat:!0}));let a=i.current,[o,c]=M.useState({action:a.action,location:a.location}),d=M.useCallback(h=>{M.startTransition(()=>c(h))},[c]);return M.useLayoutEffect(()=>a.listen(d),[a,d]),M.createElement(Ik,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a})}var gS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yS=M.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:a,reloadDocument:o,replace:c,state:d,target:h,to:f,preventScrollReset:g,viewTransition:b,..._},E){let{basename:k}=M.useContext(Nr),A=typeof f=="string"&&gS.test(f),R,L=!1;if(typeof f=="string"&&A&&(R=f,pS))try{let O=new URL(window.location.href),P=f.startsWith("//")?new URL(O.protocol+f):new URL(f),D=os(P.pathname,k);P.origin===O.origin&&D!=null?f=D+P.search+P.hash:L=!0}catch{Si(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=mk(f,{relative:a}),[V,G,ee]=Qk(i,_),te=rD(f,{replace:c,state:d,target:h,preventScrollReset:g,relative:a,viewTransition:b});function S(O){e&&e(O),O.defaultPrevented||te(O)}let N=M.createElement("a",{..._,...ee,href:R||z,onClick:L||o?e:S,ref:Jk(E,G),target:h,"data-discover":!A&&n==="render"?"true":void 0});return V&&!A?M.createElement(M.Fragment,null,N,M.createElement(Xk,{page:z})):N});yS.displayName="Link";var tD=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:a=!1,style:o,to:c,viewTransition:d,children:h,...f},g){let b=ed(c,{relative:f.relative}),_=Ta(),E=M.useContext(im),{navigator:k,basename:A}=M.useContext(Nr),R=E!=null&&cD(b)&&d===!0,L=k.encodeLocation?k.encodeLocation(b).pathname:b.pathname,z=_.pathname,V=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(z=z.toLowerCase(),V=V?V.toLowerCase():null,L=L.toLowerCase()),V&&A&&(V=os(V,A)||V);const G=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let ee=z===L||!a&&z.startsWith(L)&&z.charAt(G)==="/",te=V!=null&&(V===L||!a&&V.startsWith(L)&&V.charAt(L.length)==="/"),S={isActive:ee,isPending:te,isTransitioning:R},N=ee?e:void 0,O;typeof i=="function"?O=i(S):O=[i,ee?"active":null,te?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(S):o;return M.createElement(yS,{...f,"aria-current":N,className:O,ref:g,style:P,to:c,viewTransition:d},typeof h=="function"?h(S):h)});tD.displayName="NavLink";var nD=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:a,state:o,method:c=of,action:d,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:b,..._},E)=>{let k=oD(),A=lD(d,{relative:f}),R=c.toLowerCase()==="get"?"get":"post",L=typeof d=="string"&&gS.test(d),z=V=>{if(h&&h(V),V.defaultPrevented)return;V.preventDefault();let G=V.nativeEvent.submitter,ee=G?.getAttribute("formmethod")||c;k(G||V.currentTarget,{fetcherKey:e,method:ee,navigate:n,replace:a,state:o,relative:f,preventScrollReset:g,viewTransition:b})};return M.createElement("form",{ref:E,method:R,action:A,onSubmit:i?h:z,..._,"data-discover":!L&&t==="render"?"true":void 0})});nD.displayName="Form";function iD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vS(t){let e=M.useContext(Wl);return St(e,iD(t)),e}function rD(t,{target:e,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:c}={}){let d=Ea(),h=Ta(),f=ed(t,{relative:o});return M.useCallback(g=>{if(jk(g,e)){g.preventDefault();let b=n!==void 0?n:Du(h)===Du(f);d(t,{replace:b,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[h,d,f,n,i,e,t,a,o,c])}var sD=0,aD=()=>`__${String(++sD)}__`;function oD(){let{router:t}=vS("useSubmit"),{basename:e}=M.useContext(Nr),n=Ak();return M.useCallback(async(i,a={})=>{let{action:o,method:c,encType:d,formData:h,body:f}=Uk(i,e);if(a.navigate===!1){let g=a.fetcherKey||aD();await t.fetch(g,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:h,body:f,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:h,body:f,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function lD(t,{relative:e}={}){let{basename:n}=M.useContext(Nr),i=M.useContext(Rr);St(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...ed(t||".",{relative:e})},c=Ta();if(t==null){o.search=c.search;let d=new URLSearchParams(o.search),h=d.getAll("index");if(h.some(g=>g==="")){d.delete("index"),h.filter(b=>b).forEach(b=>d.append("index",b));let g=d.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:is([n,o.pathname])),Du(o)}function cD(t,{relative:e}={}){let n=M.useContext(lS);St(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=vS("useViewTransitionState"),a=ed(t,{relative:e});if(!n.isTransitioning)return!1;let o=os(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=os(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Af(a.pathname,c)!=null||Af(a.pathname,o)!=null}const uD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),Qw=t=>{const e=dD(t);return e.charAt(0).toUpperCase()+e.slice(1)},bS=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),hD=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var fD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const mD=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:o,iconNode:c,...d},h)=>M.createElement("svg",{ref:h,...fD,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:bS("lucide",a),...!o&&!hD(d)&&{"aria-hidden":"true"},...d},[...c.map(([f,g])=>M.createElement(f,g)),...Array.isArray(o)?o:[o]]));const Fe=(t,e)=>{const n=M.forwardRef(({className:i,...a},o)=>M.createElement(mD,{ref:o,iconNode:e,className:bS(`lucide-${uD(Qw(t))}`,`lucide-${t}`,i),...a}));return n.displayName=Qw(t),n};const pD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Mu=Fe("arrow-left",pD);const gD=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],yD=Fe("arrow-right-left",gD);const vD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],bD=Fe("check",vD);const _D=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],wD=Fe("chevron-down",_D);const xD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],TD=Fe("chevron-left",xD);const ED=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],lo=Fe("chevron-right",ED);const SD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],AD=Fe("circle-arrow-down",SD);const CD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],ND=Fe("circle-arrow-up",CD);const RD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ky=Fe("circle-check-big",RD);const ID=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xw=Fe("circle-check",ID);const kD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],kl=Fe("circle-plus",kD);const DD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ww=Fe("circle",DD);const MD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],OD=Fe("copy",MD);const VD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Zw=Fe("download",VD);const jD=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],PD=Fe("eye-off",jD);const LD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],UD=Fe("eye",LD);const zD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],BD=Fe("file-text",zD);const FD=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],qD=Fe("folder-plus",FD);const HD=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],$D=Fe("funnel",HD);const GD=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],KD=Fe("git-branch",GD);const YD=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],QD=Fe("house",YD);const XD=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],WD=Fe("list",XD);const ZD=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Jw=Fe("loader",ZD);const JD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],e4=Fe("log-out",JD);const t4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],A0=Fe("mail",t4);const n4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],i4=Fe("plus",n4);const r4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],rs=Fe("refresh-cw",r4);const s4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],a4=Fe("search",s4);const o4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],l4=Fe("settings",o4);const c4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],u4=Fe("target",c4);const d4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],cf=Fe("trash-2",d4);const h4=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_S=Fe("trash",h4);const f4=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],m4=Fe("trending-down",f4);const p4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],wS=Fe("triangle-alert",p4);const g4=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],y4=Fe("undo-2",g4);const v4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],b4=Fe("upload",v4);const _4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],w4=Fe("user-plus",_4);const x4=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],xS=Fe("wallet",x4);const T4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],E4=Fe("wifi-off",T4);const S4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],A4=Fe("wifi",S4);const C4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zl=Fe("x",C4),Dy=M.createContext({});function sm(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const My=typeof window<"u",Oy=My?M.useLayoutEffect:M.useEffect,am=M.createContext(null);function Vy(t,e){t.indexOf(e)===-1&&t.push(e)}function jy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ls=(t,e,n)=>n>e?e:n<t?t:n;let Py=()=>{};const cs={},TS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function ES(t){return typeof t=="object"&&t!==null}const SS=t=>/^0[^.\s]+$/u.test(t);function Ly(t){let e;return()=>(e===void 0&&(e=t()),e)}const xi=t=>t,N4=(t,e)=>n=>e(t(n)),td=(...t)=>t.reduce(N4),Ou=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class Uy{constructor(){this.subscriptions=[]}add(e){return Vy(this.subscriptions,e),()=>jy(this.subscriptions,e)}notify(e,n,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,n,i);else for(let o=0;o<a;o++){const c=this.subscriptions[o];c&&c(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vr=t=>t*1e3,wi=t=>t/1e3;function AS(t,e){return e?t*(1e3/e):0}const CS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,R4=1e-7,I4=12;function k4(t,e,n,i,a){let o,c,d=0;do c=e+(n-e)/2,o=CS(c,i,a)-t,o>0?n=c:e=c;while(Math.abs(o)>R4&&++d<I4);return c}function nd(t,e,n,i){if(t===e&&n===i)return xi;const a=o=>k4(o,0,1,t,n);return o=>o===0||o===1?o:CS(a(o),e,i)}const NS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,RS=t=>e=>1-t(1-e),IS=nd(.33,1.53,.69,.99),zy=RS(IS),kS=NS(zy),DS=t=>(t*=2)<1?.5*zy(t):.5*(2-Math.pow(2,-10*(t-1))),By=t=>1-Math.sin(Math.acos(t)),MS=RS(By),OS=NS(By),D4=nd(.42,0,1,1),M4=nd(0,0,.58,1),VS=nd(.42,0,.58,1),O4=t=>Array.isArray(t)&&typeof t[0]!="number",jS=t=>Array.isArray(t)&&typeof t[0]=="number",V4={linear:xi,easeIn:D4,easeInOut:VS,easeOut:M4,circIn:By,circInOut:OS,circOut:MS,backIn:zy,backInOut:kS,backOut:IS,anticipate:DS},j4=t=>typeof t=="string",ex=t=>{if(jS(t)){Py(t.length===4);const[e,n,i,a]=t;return nd(e,n,i,a)}else if(j4(t))return V4[t];return t},Qh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function P4(t,e){let n=new Set,i=new Set,a=!1,o=!1;const c=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function h(g){c.has(g)&&(f.schedule(g),t()),g(d)}const f={schedule:(g,b=!1,_=!1)=>{const k=_&&a?n:i;return b&&c.add(g),k.has(g)||k.add(g),g},cancel:g=>{i.delete(g),c.delete(g)},process:g=>{if(d=g,a){o=!0;return}a=!0,[n,i]=[i,n],n.forEach(h),n.clear(),a=!1,o&&(o=!1,f.process(g))}};return f}const L4=40;function PS(t,e){let n=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,c=Qh.reduce((V,G)=>(V[G]=P4(o),V),{}),{setup:d,read:h,resolveKeyframes:f,preUpdate:g,update:b,preRender:_,render:E,postRender:k}=c,A=()=>{const V=cs.useManualTiming?a.timestamp:performance.now();n=!1,cs.useManualTiming||(a.delta=i?1e3/60:Math.max(Math.min(V-a.timestamp,L4),1)),a.timestamp=V,a.isProcessing=!0,d.process(a),h.process(a),f.process(a),g.process(a),b.process(a),_.process(a),E.process(a),k.process(a),a.isProcessing=!1,n&&e&&(i=!1,t(A))},R=()=>{n=!0,i=!0,a.isProcessing||t(A)};return{schedule:Qh.reduce((V,G)=>{const ee=c[G];return V[G]=(te,S=!1,N=!1)=>(n||R(),ee.schedule(te,S,N)),V},{}),cancel:V=>{for(let G=0;G<Qh.length;G++)c[Qh[G]].cancel(V)},state:a,steps:c}}const{schedule:Tt,cancel:ma,state:hn,steps:$g}=PS(typeof requestAnimationFrame<"u"?requestAnimationFrame:xi,!0);let uf;function U4(){uf=void 0}const zn={now:()=>(uf===void 0&&zn.set(hn.isProcessing||cs.useManualTiming?hn.timestamp:performance.now()),uf),set:t=>{uf=t,queueMicrotask(U4)}},LS=t=>e=>typeof e=="string"&&e.startsWith(t),Fy=LS("--"),z4=LS("var(--"),qy=t=>z4(t)?B4.test(t.split("/*")[0].trim()):!1,B4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Jl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Vu={...Jl,transform:t=>ls(0,1,t)},Xh={...Jl,default:1},wu=t=>Math.round(t*1e5)/1e5,Hy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function F4(t){return t==null}const q4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,$y=(t,e)=>n=>!!(typeof n=="string"&&q4.test(n)&&n.startsWith(t)||e&&!F4(n)&&Object.prototype.hasOwnProperty.call(n,e)),US=(t,e,n)=>i=>{if(typeof i!="string")return i;const[a,o,c,d]=i.match(Hy);return{[t]:parseFloat(a),[e]:parseFloat(o),[n]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},H4=t=>ls(0,255,t),Gg={...Jl,transform:t=>Math.round(H4(t))},ho={test:$y("rgb","red"),parse:US("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Gg.transform(t)+", "+Gg.transform(e)+", "+Gg.transform(n)+", "+wu(Vu.transform(i))+")"};function $4(t){let e="",n="",i="",a="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),a=t.substring(4,5),e+=e,n+=n,i+=i,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const C0={test:$y("#"),parse:$4,transform:ho.transform},id=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Js=id("deg"),br=id("%"),Me=id("px"),G4=id("vh"),K4=id("vw"),tx={...br,parse:t=>br.parse(t)/100,transform:t=>br.transform(t*100)},El={test:$y("hsl","hue"),parse:US("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+br.transform(wu(e))+", "+br.transform(wu(n))+", "+wu(Vu.transform(i))+")"},Yt={test:t=>ho.test(t)||C0.test(t)||El.test(t),parse:t=>ho.test(t)?ho.parse(t):El.test(t)?El.parse(t):C0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ho.transform(t):El.transform(t),getAnimatableNone:t=>{const e=Yt.parse(t);return e.alpha=0,Yt.transform(e)}},Y4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Q4(t){return isNaN(t)&&typeof t=="string"&&(t.match(Hy)?.length||0)+(t.match(Y4)?.length||0)>0}const zS="number",BS="color",X4="var",W4="var(",nx="${}",Z4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ju(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},a=[];let o=0;const d=e.replace(Z4,h=>(Yt.test(h)?(i.color.push(o),a.push(BS),n.push(Yt.parse(h))):h.startsWith(W4)?(i.var.push(o),a.push(X4),n.push(h)):(i.number.push(o),a.push(zS),n.push(parseFloat(h))),++o,nx)).split(nx);return{values:n,split:d,indexes:i,types:a}}function FS(t){return ju(t).values}function qS(t){const{split:e,types:n}=ju(t),i=e.length;return a=>{let o="";for(let c=0;c<i;c++)if(o+=e[c],a[c]!==void 0){const d=n[c];d===zS?o+=wu(a[c]):d===BS?o+=Yt.transform(a[c]):o+=a[c]}return o}}const J4=t=>typeof t=="number"?0:Yt.test(t)?Yt.getAnimatableNone(t):t;function eM(t){const e=FS(t);return qS(t)(e.map(J4))}const pa={test:Q4,parse:FS,createTransformer:qS,getAnimatableNone:eM};function Kg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function tM({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let a=0,o=0,c=0;if(!e)a=o=c=n;else{const d=n<.5?n*(1+e):n+e-n*e,h=2*n-d;a=Kg(h,d,t+1/3),o=Kg(h,d,t),c=Kg(h,d,t-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:i}}function Cf(t,e){return n=>n>0?e:t}const Et=(t,e,n)=>t+(e-t)*n,Yg=(t,e,n)=>{const i=t*t,a=n*(e*e-i)+i;return a<0?0:Math.sqrt(a)},nM=[C0,ho,El],iM=t=>nM.find(e=>e.test(t));function ix(t){const e=iM(t);if(!e)return!1;let n=e.parse(t);return e===El&&(n=tM(n)),n}const rx=(t,e)=>{const n=ix(t),i=ix(e);if(!n||!i)return Cf(t,e);const a={...n};return o=>(a.red=Yg(n.red,i.red,o),a.green=Yg(n.green,i.green,o),a.blue=Yg(n.blue,i.blue,o),a.alpha=Et(n.alpha,i.alpha,o),ho.transform(a))},N0=new Set(["none","hidden"]);function rM(t,e){return N0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function sM(t,e){return n=>Et(t,e,n)}function Gy(t){return typeof t=="number"?sM:typeof t=="string"?qy(t)?Cf:Yt.test(t)?rx:lM:Array.isArray(t)?HS:typeof t=="object"?Yt.test(t)?rx:aM:Cf}function HS(t,e){const n=[...t],i=n.length,a=t.map((o,c)=>Gy(o)(o,e[c]));return o=>{for(let c=0;c<i;c++)n[c]=a[c](o);return n}}function aM(t,e){const n={...t,...e},i={};for(const a in n)t[a]!==void 0&&e[a]!==void 0&&(i[a]=Gy(t[a])(t[a],e[a]));return a=>{for(const o in i)n[o]=i[o](a);return n}}function oM(t,e){const n=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const o=e.types[a],c=t.indexes[o][i[o]],d=t.values[c]??0;n[a]=d,i[o]++}return n}const lM=(t,e)=>{const n=pa.createTransformer(e),i=ju(t),a=ju(e);return i.indexes.var.length===a.indexes.var.length&&i.indexes.color.length===a.indexes.color.length&&i.indexes.number.length>=a.indexes.number.length?N0.has(t)&&!a.values.length||N0.has(e)&&!i.values.length?rM(t,e):td(HS(oM(i,a),a.values),n):Cf(t,e)};function $S(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Et(t,e,n):Gy(t)(t,e)}const cM=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Tt.update(e,n),stop:()=>ma(e),now:()=>hn.isProcessing?hn.timestamp:zn.now()}},GS=(t,e,n=10)=>{let i="";const a=Math.max(Math.round(e/n),2);for(let o=0;o<a;o++)i+=Math.round(t(o/(a-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Nf=2e4;function Ky(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Nf;)e+=n,i=t.next(e);return e>=Nf?1/0:e}function uM(t,e=100,n){const i=n({...t,keyframes:[0,e]}),a=Math.min(Ky(i),Nf);return{type:"keyframes",ease:o=>i.next(a*o).value/e,duration:wi(a)}}const dM=5;function KS(t,e,n){const i=Math.max(e-dM,0);return AS(n-t(i),e-i)}const It={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Qg=.001;function hM({duration:t=It.duration,bounce:e=It.bounce,velocity:n=It.velocity,mass:i=It.mass}){let a,o,c=1-e;c=ls(It.minDamping,It.maxDamping,c),t=ls(It.minDuration,It.maxDuration,wi(t)),c<1?(a=f=>{const g=f*c,b=g*t,_=g-n,E=R0(f,c),k=Math.exp(-b);return Qg-_/E*k},o=f=>{const b=f*c*t,_=b*n+n,E=Math.pow(c,2)*Math.pow(f,2)*t,k=Math.exp(-b),A=R0(Math.pow(f,2),c);return(-a(f)+Qg>0?-1:1)*((_-E)*k)/A}):(a=f=>{const g=Math.exp(-f*t),b=(f-n)*t+1;return-Qg+g*b},o=f=>{const g=Math.exp(-f*t),b=(n-f)*(t*t);return g*b});const d=5/t,h=mM(a,o,d);if(t=vr(t),isNaN(h))return{stiffness:It.stiffness,damping:It.damping,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:c*2*Math.sqrt(i*f),duration:t}}}const fM=12;function mM(t,e,n){let i=n;for(let a=1;a<fM;a++)i=i-t(i)/e(i);return i}function R0(t,e){return t*Math.sqrt(1-e*e)}const pM=["duration","bounce"],gM=["stiffness","damping","mass"];function sx(t,e){return e.some(n=>t[n]!==void 0)}function yM(t){let e={velocity:It.velocity,stiffness:It.stiffness,damping:It.damping,mass:It.mass,isResolvedFromDuration:!1,...t};if(!sx(t,gM)&&sx(t,pM))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),a=i*i,o=2*ls(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:It.mass,stiffness:a,damping:o}}else{const n=hM(t);e={...e,...n,mass:It.mass},e.isResolvedFromDuration=!0}return e}function Rf(t=It.visualDuration,e=It.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:a}=n;const o=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],d={done:!1,value:o},{stiffness:h,damping:f,mass:g,duration:b,velocity:_,isResolvedFromDuration:E}=yM({...n,velocity:-wi(n.velocity||0)}),k=_||0,A=f/(2*Math.sqrt(h*g)),R=c-o,L=wi(Math.sqrt(h/g)),z=Math.abs(R)<5;i||(i=z?It.restSpeed.granular:It.restSpeed.default),a||(a=z?It.restDelta.granular:It.restDelta.default);let V;if(A<1){const ee=R0(L,A);V=te=>{const S=Math.exp(-A*L*te);return c-S*((k+A*L*R)/ee*Math.sin(ee*te)+R*Math.cos(ee*te))}}else if(A===1)V=ee=>c-Math.exp(-L*ee)*(R+(k+L*R)*ee);else{const ee=L*Math.sqrt(A*A-1);V=te=>{const S=Math.exp(-A*L*te),N=Math.min(ee*te,300);return c-S*((k+A*L*R)*Math.sinh(N)+ee*R*Math.cosh(N))/ee}}const G={calculatedDuration:E&&b||null,next:ee=>{const te=V(ee);if(E)d.done=ee>=b;else{let S=ee===0?k:0;A<1&&(S=ee===0?vr(k):KS(V,ee,te));const N=Math.abs(S)<=i,O=Math.abs(c-te)<=a;d.done=N&&O}return d.value=d.done?c:te,d},toString:()=>{const ee=Math.min(Ky(G),Nf),te=GS(S=>G.next(ee*S).value,ee,30);return ee+"ms "+te},toTransition:()=>{}};return G}Rf.applyToOptions=t=>{const e=uM(t,100,Rf);return t.ease=e.ease,t.duration=vr(e.duration),t.type="keyframes",t};function I0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:c,min:d,max:h,restDelta:f=.5,restSpeed:g}){const b=t[0],_={done:!1,value:b},E=N=>d!==void 0&&N<d||h!==void 0&&N>h,k=N=>d===void 0?h:h===void 0||Math.abs(d-N)<Math.abs(h-N)?d:h;let A=n*e;const R=b+A,L=c===void 0?R:c(R);L!==R&&(A=L-b);const z=N=>-A*Math.exp(-N/i),V=N=>L+z(N),G=N=>{const O=z(N),P=V(N);_.done=Math.abs(O)<=f,_.value=_.done?L:P};let ee,te;const S=N=>{E(_.value)&&(ee=N,te=Rf({keyframes:[_.value,k(_.value)],velocity:KS(V,N,_.value),damping:a,stiffness:o,restDelta:f,restSpeed:g}))};return S(0),{calculatedDuration:null,next:N=>{let O=!1;return!te&&ee===void 0&&(O=!0,G(N),S(N)),ee!==void 0&&N>=ee?te.next(N-ee):(!O&&G(N),_)}}}function vM(t,e,n){const i=[],a=n||cs.mix||$S,o=t.length-1;for(let c=0;c<o;c++){let d=a(t[c],t[c+1]);if(e){const h=Array.isArray(e)?e[c]||xi:e;d=td(h,d)}i.push(d)}return i}function bM(t,e,{clamp:n=!0,ease:i,mixer:a}={}){const o=t.length;if(Py(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=vM(e,i,a),h=d.length,f=g=>{if(c&&g<t[0])return e[0];let b=0;if(h>1)for(;b<t.length-2&&!(g<t[b+1]);b++);const _=Ou(t[b],t[b+1],g);return d[b](_)};return n?g=>f(ls(t[0],t[o-1],g)):f}function _M(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const a=Ou(0,e,i);t.push(Et(n,1,a))}}function wM(t){const e=[0];return _M(e,t.length-1),e}function xM(t,e){return t.map(n=>n*e)}function TM(t,e){return t.map(()=>e||VS).splice(0,t.length-1)}function xu({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const a=O4(i)?i.map(ex):ex(i),o={done:!1,value:e[0]},c=xM(n&&n.length===e.length?n:wM(e),t),d=bM(c,e,{ease:Array.isArray(a)?a:TM(e,a)});return{calculatedDuration:t,next:h=>(o.value=d(h),o.done=h>=t,o)}}const EM=t=>t!==null;function Yy(t,{repeat:e,repeatType:n="loop"},i,a=1){const o=t.filter(EM),d=a<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!d||i===void 0?o[d]:i}const SM={decay:I0,inertia:I0,tween:xu,keyframes:xu,spring:Rf};function YS(t){typeof t.type=="string"&&(t.type=SM[t.type])}class Qy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const AM=t=>t/100;class Xy extends Qy{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==zn.now()&&this.tick(zn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;YS(e);const{type:n=xu,repeat:i=0,repeatDelay:a=0,repeatType:o,velocity:c=0}=e;let{keyframes:d}=e;const h=n||xu;h!==xu&&typeof d[0]!="number"&&(this.mixKeyframes=td(AM,$S(d[0],d[1])),d=[0,100]);const f=h({...e,keyframes:d});o==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...d].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=Ky(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+a,this.totalDuration=this.resolvedDuration*(i+1)-a,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:a,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:d,calculatedDuration:h}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:g,repeat:b,repeatType:_,repeatDelay:E,type:k,onUpdate:A,finalKeyframe:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const L=this.currentTime-f*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?L<0:L>a;this.currentTime=Math.max(L,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let V=this.currentTime,G=i;if(b){const N=Math.min(this.currentTime,a)/d;let O=Math.floor(N),P=N%1;!P&&N>=1&&(P=1),P===1&&O--,O=Math.min(O,b+1),!!(O%2)&&(_==="reverse"?(P=1-P,E&&(P-=E/d)):_==="mirror"&&(G=c)),V=ls(0,1,P)*d}const ee=z?{done:!1,value:g[0]}:G.next(V);o&&(ee.value=o(ee.value));let{done:te}=ee;!z&&h!==null&&(te=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&te);return S&&k!==I0&&(ee.value=Yy(g,this.options,R,this.speed)),A&&A(ee.value),S&&this.finish(),ee}then(e,n){return this.finished.then(e,n)}get duration(){return wi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+wi(e)}get time(){return wi(this.currentTime)}set time(e){e=vr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(zn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=wi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=cM,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(zn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function CM(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const fo=t=>t*180/Math.PI,k0=t=>{const e=fo(Math.atan2(t[1],t[0]));return D0(e)},NM={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:k0,rotateZ:k0,skewX:t=>fo(Math.atan(t[1])),skewY:t=>fo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},D0=t=>(t=t%360,t<0&&(t+=360),t),ax=k0,ox=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),lx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),RM={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ox,scaleY:lx,scale:t=>(ox(t)+lx(t))/2,rotateX:t=>D0(fo(Math.atan2(t[6],t[5]))),rotateY:t=>D0(fo(Math.atan2(-t[2],t[0]))),rotateZ:ax,rotate:ax,skewX:t=>fo(Math.atan(t[4])),skewY:t=>fo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function M0(t){return t.includes("scale")?1:0}function O0(t,e){if(!t||t==="none")return M0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,a;if(n)i=RM,a=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=NM,a=d}if(!a)return M0(e);const o=i[e],c=a[1].split(",").map(kM);return typeof o=="function"?o(c):c[o]}const IM=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return O0(n,e)};function kM(t){return parseFloat(t.trim())}const ec=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],tc=new Set(ec),cx=t=>t===Jl||t===Me,DM=new Set(["x","y","z"]),MM=ec.filter(t=>!DM.has(t));function OM(t){const e=[];return MM.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const po={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>O0(e,"x"),y:(t,{transform:e})=>O0(e,"y")};po.translateX=po.x;po.translateY=po.y;const go=new Set;let V0=!1,j0=!1,P0=!1;function QS(){if(j0){const t=Array.from(go).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const a=OM(i);a.length&&(n.set(i,a),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const a=n.get(i);a&&a.forEach(([o,c])=>{i.getValue(o)?.set(c)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}j0=!1,V0=!1,go.forEach(t=>t.complete(P0)),go.clear()}function XS(){go.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(j0=!0)})}function VM(){P0=!0,XS(),QS(),P0=!1}class Wy{constructor(e,n,i,a,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=a,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(go.add(this),V0||(V0=!0,Tt.read(XS),Tt.resolveKeyframes(QS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:a}=this;if(e[0]===null){const o=a?.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&n){const d=i.readValue(n,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),a&&o===void 0&&a.set(e[0])}CM(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),go.delete(this)}cancel(){this.state==="scheduled"&&(go.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const jM=t=>t.startsWith("--");function PM(t,e,n){jM(e)?t.style.setProperty(e,n):t.style[e]=n}const LM=Ly(()=>window.ScrollTimeline!==void 0),UM={};function zM(t,e){const n=Ly(t);return()=>UM[e]??n()}const WS=zM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),mu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,ux={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:mu([0,.65,.55,1]),circOut:mu([.55,0,1,.45]),backIn:mu([.31,.01,.66,-.59]),backOut:mu([.33,1.53,.69,.99])};function ZS(t,e){if(t)return typeof t=="function"?WS()?GS(t,e):"ease-out":jS(t)?mu(t):Array.isArray(t)?t.map(n=>ZS(n,e)||ux.easeOut):ux[t]}function BM(t,e,n,{delay:i=0,duration:a=300,repeat:o=0,repeatType:c="loop",ease:d="easeOut",times:h}={},f=void 0){const g={[e]:n};h&&(g.offset=h);const b=ZS(d,a);Array.isArray(b)&&(g.easing=b);const _={delay:i,duration:a,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return f&&(_.pseudoElement=f),t.animate(g,_)}function JS(t){return typeof t=="function"&&"applyToOptions"in t}function FM({type:t,...e}){return JS(t)&&WS()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class qM extends Qy{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:a,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:d,onComplete:h}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,Py(typeof e.type!="string");const f=FM(e);this.animation=BM(n,i,a,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=Yy(a,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(g):PM(n,i,g),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return wi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+wi(e)}get time(){return wi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=vr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&LM()?(this.animation.timeline=e,xi):n(this)}}const eA={anticipate:DS,backInOut:kS,circInOut:OS};function HM(t){return t in eA}function $M(t){typeof t.ease=="string"&&HM(t.ease)&&(t.ease=eA[t.ease])}const dx=10;class GM extends qM{constructor(e){$M(e),YS(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:a,element:o,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const d=new Xy({...c,autoplay:!1}),h=vr(this.finishedTime??this.time);n.setWithVelocity(d.sample(h-dx).value,d.sample(h).value,dx),d.stop()}}const hx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(pa.test(t)||t==="0")&&!t.startsWith("url("));function KM(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function YM(t,e,n,i){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],c=hx(a,e),d=hx(o,e);return!c||!d?!1:KM(t)||(n==="spring"||JS(n))&&i}function L0(t){t.duration=0,t.type="keyframes"}const QM=new Set(["opacity","clipPath","filter","transform"]),XM=Ly(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function WM(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:a,damping:o,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=e.owner.getProps();return XM()&&n&&QM.has(n)&&(n!=="transform"||!f)&&!h&&!i&&a!=="mirror"&&o!==0&&c!=="inertia"}const ZM=40;class JM extends Qy{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:c="loop",keyframes:d,name:h,motionValue:f,element:g,...b}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=zn.now();const _={autoplay:e,delay:n,type:i,repeat:a,repeatDelay:o,repeatType:c,name:h,motionValue:f,element:g,...b},E=g?.KeyframeResolver||Wy;this.keyframeResolver=new E(d,(k,A,R)=>this.onKeyframesResolved(k,A,_,!R),h,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,a){this.keyframeResolver=void 0;const{name:o,type:c,velocity:d,delay:h,isHandoff:f,onUpdate:g}=i;this.resolvedAt=zn.now(),YM(e,o,c,d)||((cs.instantAnimations||!h)&&g?.(Yy(e,i,n)),e[0]=e[e.length-1],L0(i),i.repeat=0);const _={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>ZM?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},E=!f&&WM(_)?new GM({..._,element:_.motionValue.owner.current}):new Xy(_);E.finished.then(()=>this.notifyFinished()).catch(xi),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),VM()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const e3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function t3(t){const e=e3.exec(t);if(!e)return[,];const[,n,i,a]=e;return[`--${n??i}`,a]}function tA(t,e,n=1){const[i,a]=t3(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const c=o.trim();return TS(c)?parseFloat(c):c}return qy(a)?tA(a,e,n+1):a}function Zy(t,e){return t?.[e]??t?.default??t}const nA=new Set(["width","height","top","left","right","bottom",...ec]),n3={test:t=>t==="auto",parse:t=>t},iA=t=>e=>e.test(t),rA=[Jl,Me,br,Js,K4,G4,n3],fx=t=>rA.find(iA(t));function i3(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||SS(t):!0}const r3=new Set(["brightness","contrast","saturate","opacity"]);function s3(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Hy)||[];if(!i)return t;const a=n.replace(i,"");let o=r3.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+a+")"}const a3=/\b([a-z-]*)\(.*?\)/gu,U0={...pa,getAnimatableNone:t=>{const e=t.match(a3);return e?e.map(s3).join(" "):t}},mx={...Jl,transform:Math.round},o3={rotate:Js,rotateX:Js,rotateY:Js,rotateZ:Js,scale:Xh,scaleX:Xh,scaleY:Xh,scaleZ:Xh,skew:Js,skewX:Js,skewY:Js,distance:Me,translateX:Me,translateY:Me,translateZ:Me,x:Me,y:Me,z:Me,perspective:Me,transformPerspective:Me,opacity:Vu,originX:tx,originY:tx,originZ:Me},Jy={borderWidth:Me,borderTopWidth:Me,borderRightWidth:Me,borderBottomWidth:Me,borderLeftWidth:Me,borderRadius:Me,radius:Me,borderTopLeftRadius:Me,borderTopRightRadius:Me,borderBottomRightRadius:Me,borderBottomLeftRadius:Me,width:Me,maxWidth:Me,height:Me,maxHeight:Me,top:Me,right:Me,bottom:Me,left:Me,padding:Me,paddingTop:Me,paddingRight:Me,paddingBottom:Me,paddingLeft:Me,margin:Me,marginTop:Me,marginRight:Me,marginBottom:Me,marginLeft:Me,backgroundPositionX:Me,backgroundPositionY:Me,...o3,zIndex:mx,fillOpacity:Vu,strokeOpacity:Vu,numOctaves:mx},l3={...Jy,color:Yt,backgroundColor:Yt,outlineColor:Yt,fill:Yt,stroke:Yt,borderColor:Yt,borderTopColor:Yt,borderRightColor:Yt,borderBottomColor:Yt,borderLeftColor:Yt,filter:U0,WebkitFilter:U0},sA=t=>l3[t];function aA(t,e){let n=sA(t);return n!==U0&&(n=pa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const c3=new Set(["auto","none","0"]);function u3(t,e,n){let i=0,a;for(;i<t.length&&!a;){const o=t[i];typeof o=="string"&&!c3.has(o)&&ju(o).values.length&&(a=t[i]),i++}if(a&&n)for(const o of e)t[o]=aA(n,a)}class d3 extends Wy{constructor(e,n,i,a,o){super(e,n,i,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),qy(f))){const g=tA(f,n.current);g!==void 0&&(e[h]=g),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!nA.has(i)||e.length!==2)return;const[a,o]=e,c=fx(a),d=fx(o);if(c!==d)if(cx(c)&&cx(d))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else po[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let a=0;a<e.length;a++)(e[a]===null||i3(e[a]))&&i.push(a);i.length&&u3(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=po[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&e.getValue(i,a).jump(a,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const a=e.getValue(n);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,c=i[o];i[o]=po[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,h])=>{e.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function h3(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const a=n?.[t]??i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const oA=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function lA(t){return ES(t)&&"offsetHeight"in t}const px=30,f3=t=>!isNaN(parseFloat(t));class m3{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const a=zn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=zn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=f3(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Uy);const i=this.events[e].add(n);return e==="change"?()=>{i(),Tt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=zn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>px)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,px);return AS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Pl(t,e){return new m3(t,e)}const{schedule:ev}=PS(queueMicrotask,!1),Ui={x:!1,y:!1};function cA(){return Ui.x||Ui.y}function p3(t){return t==="x"||t==="y"?Ui[t]?null:(Ui[t]=!0,()=>{Ui[t]=!1}):Ui.x||Ui.y?null:(Ui.x=Ui.y=!0,()=>{Ui.x=Ui.y=!1})}function uA(t,e){const n=h3(t),i=new AbortController,a={passive:!0,...e,signal:i.signal};return[n,a,()=>i.abort()]}function gx(t){return!(t.pointerType==="touch"||cA())}function g3(t,e,n={}){const[i,a,o]=uA(t,n),c=d=>{if(!gx(d))return;const{target:h}=d,f=e(h,d);if(typeof f!="function"||!h)return;const g=b=>{gx(b)&&(f(b),h.removeEventListener("pointerleave",g))};h.addEventListener("pointerleave",g,a)};return i.forEach(d=>{d.addEventListener("pointerenter",c,a)}),o}const dA=(t,e)=>e?t===e?!0:dA(t,e.parentElement):!1,tv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,y3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function v3(t){return y3.has(t.tagName)||t.tabIndex!==-1}const df=new WeakSet;function yx(t){return e=>{e.key==="Enter"&&t(e)}}function Xg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const b3=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=yx(()=>{if(df.has(n))return;Xg(n,"down");const a=yx(()=>{Xg(n,"up")}),o=()=>Xg(n,"cancel");n.addEventListener("keyup",a,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function vx(t){return tv(t)&&!cA()}function _3(t,e,n={}){const[i,a,o]=uA(t,n),c=d=>{const h=d.currentTarget;if(!vx(d))return;df.add(h);const f=e(h,d),g=(E,k)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",_),df.has(h)&&df.delete(h),vx(E)&&typeof f=="function"&&f(E,{success:k})},b=E=>{g(E,h===window||h===document||n.useGlobalTarget||dA(h,E.target))},_=E=>{g(E,!1)};window.addEventListener("pointerup",b,a),window.addEventListener("pointercancel",_,a)};return i.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",c,a),lA(d)&&(d.addEventListener("focus",f=>b3(f,a)),!v3(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),o}function hA(t){return ES(t)&&"ownerSVGElement"in t}function w3(t){return hA(t)&&t.tagName==="svg"}const xn=t=>!!(t&&t.getVelocity),x3=[...rA,Yt,pa],T3=t=>x3.find(iA(t)),nv=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function bx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function E3(...t){return e=>{let n=!1;const i=t.map(a=>{const o=bx(a,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<i.length;a++){const o=i[a];typeof o=="function"?o():bx(t[a],null)}}}}function S3(...t){return M.useCallback(E3(...t),t)}class A3 extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,a=lA(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=a-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function C3({children:t,isPresent:e,anchorX:n,root:i}){const a=M.useId(),o=M.useRef(null),c=M.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=M.useContext(nv),h=S3(o,t?.ref);return M.useInsertionEffect(()=>{const{width:f,height:g,top:b,left:_,right:E}=c.current;if(e||!o.current||!f||!g)return;const k=n==="left"?`left: ${_}`:`right: ${E}`;o.current.dataset.motionPopId=a;const A=document.createElement("style");d&&(A.nonce=d);const R=i??document.head;return R.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${k}px !important;
            top: ${b}px !important;
          }
        `),()=>{R.contains(A)&&R.removeChild(A)}},[e]),v.jsx(A3,{isPresent:e,childRef:o,sizeRef:c,children:M.cloneElement(t,{ref:h})})}const N3=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:a,presenceAffectsLayout:o,mode:c,anchorX:d,root:h})=>{const f=sm(R3),g=M.useId();let b=!0,_=M.useMemo(()=>(b=!1,{id:g,initial:e,isPresent:n,custom:a,onExitComplete:E=>{f.set(E,!0);for(const k of f.values())if(!k)return;i&&i()},register:E=>(f.set(E,!1),()=>f.delete(E))}),[n,f,i]);return o&&b&&(_={..._}),M.useMemo(()=>{f.forEach((E,k)=>f.set(k,!1))},[n]),M.useEffect(()=>{!n&&!f.size&&i&&i()},[n]),c==="popLayout"&&(t=v.jsx(C3,{isPresent:n,anchorX:d,root:h,children:t})),v.jsx(am.Provider,{value:_,children:t})};function R3(){return new Map}function fA(t=!0){const e=M.useContext(am);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:a}=e,o=M.useId();M.useEffect(()=>{if(t)return a(o)},[t]);const c=M.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,c]:[!0]}const Wh=t=>t.key||"";function _x(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const Ll=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:o="sync",propagate:c=!1,anchorX:d="left",root:h})=>{const[f,g]=fA(c),b=M.useMemo(()=>_x(t),[t]),_=c&&!f?[]:b.map(Wh),E=M.useRef(!0),k=M.useRef(b),A=sm(()=>new Map),[R,L]=M.useState(b),[z,V]=M.useState(b);Oy(()=>{E.current=!1,k.current=b;for(let te=0;te<z.length;te++){const S=Wh(z[te]);_.includes(S)?A.delete(S):A.get(S)!==!0&&A.set(S,!1)}},[z,_.length,_.join("-")]);const G=[];if(b!==R){let te=[...b];for(let S=0;S<z.length;S++){const N=z[S],O=Wh(N);_.includes(O)||(te.splice(S,0,N),G.push(N))}return o==="wait"&&G.length&&(te=G),V(_x(te)),L(b),null}const{forceRender:ee}=M.useContext(Dy);return v.jsx(v.Fragment,{children:z.map(te=>{const S=Wh(te),N=c&&!f?!1:b===z||_.includes(S),O=()=>{if(A.has(S))A.set(S,!0);else return;let P=!0;A.forEach(D=>{D||(P=!1)}),P&&(ee?.(),V(k.current),c&&g?.(),i&&i())};return v.jsx(N3,{isPresent:N,initial:!E.current||n?void 0:!1,custom:e,presenceAffectsLayout:a,mode:o,root:h,onExitComplete:N?void 0:O,anchorX:d,children:te},S)})})},mA=M.createContext({strict:!1}),wx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ul={};for(const t in wx)Ul[t]={isEnabled:e=>wx[t].some(n=>!!e[n])};function I3(t){for(const e in t)Ul[e]={...Ul[e],...t[e]}}const k3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function If(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||k3.has(t)}let pA=t=>!If(t);function D3(t){typeof t=="function"&&(pA=e=>e.startsWith("on")?!If(e):t(e))}try{D3(require("@emotion/is-prop-valid").default)}catch{}function M3(t,e,n){const i={};for(const a in t)a==="values"&&typeof t.values=="object"||(pA(a)||n===!0&&If(a)||!e&&!If(a)||t.draggable&&a.startsWith("onDrag"))&&(i[a]=t[a]);return i}const om=M.createContext({});function lm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Pu(t){return typeof t=="string"||Array.isArray(t)}const iv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rv=["initial",...iv];function cm(t){return lm(t.animate)||rv.some(e=>Pu(t[e]))}function gA(t){return!!(cm(t)||t.variants)}function O3(t,e){if(cm(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Pu(n)?n:void 0,animate:Pu(i)?i:void 0}}return t.inherit!==!1?e:{}}function V3(t){const{initial:e,animate:n}=O3(t,M.useContext(om));return M.useMemo(()=>({initial:e,animate:n}),[xx(e),xx(n)])}function xx(t){return Array.isArray(t)?t.join(" "):t}const Lu={};function j3(t){for(const e in t)Lu[e]=t[e],Fy(e)&&(Lu[e].isCSSVariable=!0)}function yA(t,{layout:e,layoutId:n}){return tc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Lu[t]||t==="opacity")}const P3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},L3=ec.length;function U3(t,e,n){let i="",a=!0;for(let o=0;o<L3;o++){const c=ec[o],d=t[c];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(c.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||n){const f=oA(d,Jy[c]);if(!h){a=!1;const g=P3[c]||c;i+=`${g}(${f}) `}n&&(e[c]=f)}}return i=i.trim(),n?i=n(e,a?"":i):a&&(i="none"),i}function sv(t,e,n){const{style:i,vars:a,transformOrigin:o}=t;let c=!1,d=!1;for(const h in e){const f=e[h];if(tc.has(h)){c=!0;continue}else if(Fy(h)){a[h]=f;continue}else{const g=oA(f,Jy[h]);h.startsWith("origin")?(d=!0,o[h]=g):i[h]=g}}if(e.transform||(c||n?i.transform=U3(e,t.transform,n):i.transform&&(i.transform="none")),d){const{originX:h="50%",originY:f="50%",originZ:g=0}=o;i.transformOrigin=`${h} ${f} ${g}`}}const av=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vA(t,e,n){for(const i in e)!xn(e[i])&&!yA(i,n)&&(t[i]=e[i])}function z3({transformTemplate:t},e){return M.useMemo(()=>{const n=av();return sv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function B3(t,e){const n=t.style||{},i={};return vA(i,n,t),Object.assign(i,z3(t,e)),i}function F3(t,e){const n={},i=B3(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const q3={offset:"stroke-dashoffset",array:"stroke-dasharray"},H3={offset:"strokeDashoffset",array:"strokeDasharray"};function $3(t,e,n=1,i=0,a=!0){t.pathLength=1;const o=a?q3:H3;t[o.offset]=Me.transform(-i);const c=Me.transform(e),d=Me.transform(n);t[o.array]=`${c} ${d}`}function bA(t,{attrX:e,attrY:n,attrScale:i,pathLength:a,pathSpacing:o=1,pathOffset:c=0,...d},h,f,g){if(sv(t,d,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:b,style:_}=t;b.transform&&(_.transform=b.transform,delete b.transform),(_.transform||b.transformOrigin)&&(_.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),_.transform&&(_.transformBox=g?.transformBox??"fill-box",delete b.transformBox),e!==void 0&&(b.x=e),n!==void 0&&(b.y=n),i!==void 0&&(b.scale=i),a!==void 0&&$3(b,a,o,c,!1)}const _A=()=>({...av(),attrs:{}}),wA=t=>typeof t=="string"&&t.toLowerCase()==="svg";function G3(t,e,n,i){const a=M.useMemo(()=>{const o=_A();return bA(o,e,wA(i),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};vA(o,t.style,t),a.style={...o,...a.style}}return a}const K3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ov(t){return typeof t!="string"||t.includes("-")?!1:!!(K3.indexOf(t)>-1||/[A-Z]/u.test(t))}function Y3(t,e,n,{latestValues:i},a,o=!1){const d=(ov(t)?G3:F3)(e,i,a,t),h=M3(e,typeof t=="string",o),f=t!==M.Fragment?{...h,...d,ref:n}:{},{children:g}=e,b=M.useMemo(()=>xn(g)?g.get():g,[g]);return M.createElement(t,{...f,children:b})}function Tx(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function lv(t,e,n,i){if(typeof e=="function"){const[a,o]=Tx(i);e=e(n!==void 0?n:t.custom,a,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,o]=Tx(i);e=e(n!==void 0?n:t.custom,a,o)}return e}function hf(t){return xn(t)?t.get():t}function Q3({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,a){return{latestValues:X3(n,i,a,t),renderState:e()}}function X3(t,e,n,i){const a={},o=i(t,{});for(const _ in o)a[_]=hf(o[_]);let{initial:c,animate:d}=t;const h=cm(t),f=gA(t);e&&f&&!h&&t.inherit!==!1&&(c===void 0&&(c=e.initial),d===void 0&&(d=e.animate));let g=n?n.initial===!1:!1;g=g||c===!1;const b=g?d:c;if(b&&typeof b!="boolean"&&!lm(b)){const _=Array.isArray(b)?b:[b];for(let E=0;E<_.length;E++){const k=lv(t,_[E]);if(k){const{transitionEnd:A,transition:R,...L}=k;for(const z in L){let V=L[z];if(Array.isArray(V)){const G=g?V.length-1:0;V=V[G]}V!==null&&(a[z]=V)}for(const z in A)a[z]=A[z]}}}return a}const xA=t=>(e,n)=>{const i=M.useContext(om),a=M.useContext(am),o=()=>Q3(t,e,i,a);return n?o():sm(o)};function cv(t,e,n){const{style:i}=t,a={};for(const o in i)(xn(i[o])||e.style&&xn(e.style[o])||yA(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(a[o]=i[o]);return a}const W3=xA({scrapeMotionValuesFromProps:cv,createRenderState:av});function TA(t,e,n){const i=cv(t,e,n);for(const a in t)if(xn(t[a])||xn(e[a])){const o=ec.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;i[o]=t[a]}return i}const Z3=xA({scrapeMotionValuesFromProps:TA,createRenderState:_A}),J3=Symbol.for("motionComponentSymbol");function Sl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function eO(t,e,n){return M.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Sl(n)&&(n.current=i))},[e])}const uv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tO="framerAppearId",EA="data-"+uv(tO),SA=M.createContext({});function nO(t,e,n,i,a){const{visualElement:o}=M.useContext(om),c=M.useContext(mA),d=M.useContext(am),h=M.useContext(nv).reducedMotion,f=M.useRef(null);i=i||c.renderer,!f.current&&i&&(f.current=i(t,{visualState:e,parent:o,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const g=f.current,b=M.useContext(SA);g&&!g.projection&&a&&(g.type==="html"||g.type==="svg")&&iO(f.current,n,a,b);const _=M.useRef(!1);M.useInsertionEffect(()=>{g&&_.current&&g.update(n,d)});const E=n[EA],k=M.useRef(!!E&&!window.MotionHandoffIsComplete?.(E)&&window.MotionHasOptimisedAnimation?.(E));return Oy(()=>{g&&(_.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),k.current&&g.animationState&&g.animationState.animateChanges())}),M.useEffect(()=>{g&&(!k.current&&g.animationState&&g.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(E)}),k.current=!1),g.enteringChildren=void 0)}),g}function iO(t,e,n,i){const{layoutId:a,layout:o,drag:c,dragConstraints:d,layoutScroll:h,layoutRoot:f,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:AA(t.parent)),t.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!c||d&&Sl(d),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:h,layoutRoot:f})}function AA(t){if(t)return t.options.allowProjection!==!1?t.projection:AA(t.parent)}function Wg(t,{forwardMotionProps:e=!1}={},n,i){n&&I3(n);const a=ov(t)?Z3:W3;function o(d,h){let f;const g={...M.useContext(nv),...d,layoutId:rO(d)},{isStatic:b}=g,_=V3(d),E=a(d,b);if(!b&&My){sO();const k=aO(g);f=k.MeasureLayout,_.visualElement=nO(t,E,g,i,k.ProjectionNode)}return v.jsxs(om.Provider,{value:_,children:[f&&_.visualElement?v.jsx(f,{visualElement:_.visualElement,...g}):null,Y3(t,d,eO(E,_.visualElement,h),E,b,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=M.forwardRef(o);return c[J3]=t,c}function rO({layoutId:t}){const e=M.useContext(Dy).id;return e&&t!==void 0?e+"-"+t:t}function sO(t,e){M.useContext(mA).strict}function aO(t){const{drag:e,layout:n}=Ul;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function oO(t,e){if(typeof Proxy>"u")return Wg;const n=new Map,i=(o,c)=>Wg(o,c,t,e),a=(o,c)=>i(o,c);return new Proxy(a,{get:(o,c)=>c==="create"?i:(n.has(c)||n.set(c,Wg(c,void 0,t,e)),n.get(c))})}function CA({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function lO({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function cO(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Zg(t){return t===void 0||t===1}function z0({scale:t,scaleX:e,scaleY:n}){return!Zg(t)||!Zg(e)||!Zg(n)}function co(t){return z0(t)||NA(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function NA(t){return Ex(t.x)||Ex(t.y)}function Ex(t){return t&&t!=="0%"}function kf(t,e,n){const i=t-n,a=e*i;return n+a}function Sx(t,e,n,i,a){return a!==void 0&&(t=kf(t,a,i)),kf(t,n,i)+e}function B0(t,e=0,n=1,i,a){t.min=Sx(t.min,e,n,i,a),t.max=Sx(t.max,e,n,i,a)}function RA(t,{x:e,y:n}){B0(t.x,e.translate,e.scale,e.originPoint),B0(t.y,n.translate,n.scale,n.originPoint)}const Ax=.999999999999,Cx=1.0000000000001;function uO(t,e,n,i=!1){const a=n.length;if(!a)return;e.x=e.y=1;let o,c;for(let d=0;d<a;d++){o=n[d],c=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Cl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,RA(t,c)),i&&co(o.latestValues)&&Cl(t,o.latestValues))}e.x<Cx&&e.x>Ax&&(e.x=1),e.y<Cx&&e.y>Ax&&(e.y=1)}function Al(t,e){t.min=t.min+e,t.max=t.max+e}function Nx(t,e,n,i,a=.5){const o=Et(t.min,t.max,a);B0(t,e,n,o,i)}function Cl(t,e){Nx(t.x,e.x,e.scaleX,e.scale,e.originX),Nx(t.y,e.y,e.scaleY,e.scale,e.originY)}function IA(t,e){return CA(cO(t.getBoundingClientRect(),e))}function dO(t,e,n){const i=IA(t,n),{scroll:a}=e;return a&&(Al(i.x,a.offset.x),Al(i.y,a.offset.y)),i}const Rx=()=>({translate:0,scale:1,origin:0,originPoint:0}),Nl=()=>({x:Rx(),y:Rx()}),Ix=()=>({min:0,max:0}),Pt=()=>({x:Ix(),y:Ix()}),F0={current:null},kA={current:!1};function hO(){if(kA.current=!0,!!My)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>F0.current=t.matches;t.addEventListener("change",e),e()}else F0.current=!1}const fO=new WeakMap;function mO(t,e,n){for(const i in e){const a=e[i],o=n[i];if(xn(a))t.addValue(i,a);else if(xn(o))t.addValue(i,Pl(a,{owner:t}));else if(o!==a)if(t.hasValue(i)){const c=t.getValue(i);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=t.getStaticValue(i);t.addValue(i,Pl(c!==void 0?c:a,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const kx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class pO{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:a,blockInitialAnimation:o,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Wy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=zn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Tt.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=d,this.blockInitialAnimation=!!o,this.isControllingVariants=cm(n),this.isVariantNode=gA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...b}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in b){const E=b[_];h[_]!==void 0&&xn(E)&&E.set(h[_])}}mount(e){this.current=e,fO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),kA.current||hO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:F0.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ma(this.notifyUpdate),ma(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=tc.has(e);i&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Tt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{a(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ul){const n=Ul[e];if(!n)continue;const{isEnabled:i,Feature:a}=n;if(!this.features[e]&&a&&i(this.props)&&(this.features[e]=new a(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<kx.length;i++){const a=kx[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,c=e[o];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=mO(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Pl(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(TS(i)||SS(i))?i=parseFloat(i):!T3(i)&&pa.test(n)&&(i=aA(e,n)),this.setBaseTarget(e,xn(i)?i.get():i)),xn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=lv(this.props,n,this.presenceContext?.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!xn(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Uy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){ev.render(this.render)}}class DA extends pO{constructor(){super(...arguments),this.KeyframeResolver=d3}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function MA(t,{style:e,vars:n},i,a){const o=t.style;let c;for(c in e)o[c]=e[c];a?.applyProjectionStyles(o,i);for(c in n)o.setProperty(c,n[c])}function gO(t){return window.getComputedStyle(t)}class yO extends DA{constructor(){super(...arguments),this.type="html",this.renderInstance=MA}readValueFromInstance(e,n){if(tc.has(n))return this.projection?.isProjecting?M0(n):IM(e,n);{const i=gO(e),a=(Fy(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return IA(e,n)}build(e,n,i){sv(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return cv(e,n,i)}}const OA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vO(t,e,n,i){MA(t,e,void 0,i);for(const a in e.attrs)t.setAttribute(OA.has(a)?a:uv(a),e.attrs[a])}class bO extends DA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(tc.has(n)){const i=sA(n);return i&&i.default||0}return n=OA.has(n)?n:uv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return TA(e,n,i)}build(e,n,i){bA(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,a){vO(e,n,i,a)}mount(e){this.isSVGTag=wA(e.tagName),super.mount(e)}}const _O=(t,e)=>ov(t)?new bO(e):new yO(e,{allowProjection:t!==M.Fragment});function Dl(t,e,n){const i=t.getProps();return lv(i,e,n!==void 0?n:i.custom,t)}const q0=t=>Array.isArray(t);function wO(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Pl(n))}function xO(t){return q0(t)?t[t.length-1]||0:t}function dv(t,e){const n=Dl(t,e);let{transitionEnd:i={},transition:a={},...o}=n||{};o={...o,...i};for(const c in o){const d=xO(o[c]);wO(t,c,d)}}function TO(t){return!!(xn(t)&&t.add)}function H0(t,e){const n=t.getValue("willChange");if(TO(n))return n.add(e);if(!n&&cs.WillChange){const i=new cs.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function VA(t){return t.props[EA]}const EO=t=>t!==null;function SO(t,{repeat:e,repeatType:n="loop"},i){const a=t.filter(EO),o=e&&n!=="loop"&&e%2===1?0:a.length-1;return a[o]}const AO={type:"spring",stiffness:500,damping:25,restSpeed:10},CO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),NO={type:"keyframes",duration:.8},RO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},IO=(t,{keyframes:e})=>e.length>2?NO:tc.has(t)?t.startsWith("scale")?CO(e[1]):AO:RO;function kO({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:a,repeat:o,repeatType:c,repeatDelay:d,from:h,elapsed:f,...g}){return!!Object.keys(g).length}const hv=(t,e,n,i={},a,o)=>c=>{const d=Zy(i,t)||{},h=d.delay||i.delay||0;let{elapsed:f=0}=i;f=f-vr(h);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-f,onUpdate:_=>{e.set(_),d.onUpdate&&d.onUpdate(_)},onComplete:()=>{c(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:o?void 0:a};kO(d)||Object.assign(g,IO(t,g)),g.duration&&(g.duration=vr(g.duration)),g.repeatDelay&&(g.repeatDelay=vr(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let b=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(L0(g),g.delay===0&&(b=!0)),(cs.instantAnimations||cs.skipAnimations)&&(b=!0,L0(g),g.delay=0),g.allowFlatten=!d.type&&!d.ease,b&&!o&&e.get()!==void 0){const _=SO(g.keyframes,d);if(_!==void 0){Tt.update(()=>{g.onUpdate(_),g.onComplete()});return}}return d.isSync?new Xy(g):new JM(g)};function DO({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function jA(t,e,{delay:n=0,transitionOverride:i,type:a}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:c,...d}=e;i&&(o=i);const h=[],f=a&&t.animationState&&t.animationState.getState()[a];for(const g in d){const b=t.getValue(g,t.latestValues[g]??null),_=d[g];if(_===void 0||f&&DO(f,g))continue;const E={delay:n,...Zy(o||{},g)},k=b.get();if(k!==void 0&&!b.isAnimating&&!Array.isArray(_)&&_===k&&!E.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const L=VA(t);if(L){const z=window.MotionHandoffAnimation(L,g,Tt);z!==null&&(E.startTime=z,A=!0)}}H0(t,g),b.start(hv(g,b,_,t.shouldReduceMotion&&nA.has(g)?{type:!1}:E,t,A));const R=b.animation;R&&h.push(R)}return c&&Promise.all(h).then(()=>{Tt.update(()=>{c&&dv(t,c)})}),h}function PA(t,e,n,i=0,a=1){const o=Array.from(t).sort((f,g)=>f.sortNodePosition(g)).indexOf(e),c=t.size,d=(c-1)*i;return typeof n=="function"?n(o,c):a===1?o*i:d-o*i}function $0(t,e,n={}){const i=Dl(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const o=i?()=>Promise.all(jA(t,i,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:b}=a;return MO(t,e,h,f,g,b,n)}:()=>Promise.resolve(),{when:d}=a;if(d){const[h,f]=d==="beforeChildren"?[o,c]:[c,o];return h().then(()=>f())}else return Promise.all([o(),c(n.delay)])}function MO(t,e,n=0,i=0,a=0,o=1,c){const d=[];for(const h of t.variantChildren)h.notify("AnimationStart",e),d.push($0(h,e,{...c,delay:n+(typeof i=="function"?0:i)+PA(t.variantChildren,h,i,a,o)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(d)}function LA(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const a=e.map(o=>$0(t,o,n));i=Promise.all(a)}else if(typeof e=="string")i=$0(t,e,n);else{const a=typeof e=="function"?Dl(t,e,n.custom):e;i=Promise.all(jA(t,a,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function UA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const OO=rv.length;function zA(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?zA(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<OO;n++){const i=rv[n],a=t.props[i];(Pu(a)||a===!1)&&(e[i]=a)}return e}const VO=[...iv].reverse(),jO=iv.length;function PO(t){return e=>Promise.all(e.map(({animation:n,options:i})=>LA(t,n,i)))}function LO(t){let e=PO(t),n=Dx(),i=!0;const a=h=>(f,g)=>{const b=Dl(t,g,h==="exit"?t.presenceContext?.custom:void 0);if(b){const{transition:_,transitionEnd:E,...k}=b;f={...f,...k,...E}}return f};function o(h){e=h(t)}function c(h){const{props:f}=t,g=zA(t.parent)||{},b=[],_=new Set;let E={},k=1/0;for(let R=0;R<jO;R++){const L=VO[R],z=n[L],V=f[L]!==void 0?f[L]:g[L],G=Pu(V),ee=L===h?z.isActive:null;ee===!1&&(k=R);let te=V===g[L]&&V!==f[L]&&G;if(te&&i&&t.manuallyAnimateOnMount&&(te=!1),z.protectedKeys={...E},!z.isActive&&ee===null||!V&&!z.prevProp||lm(V)||typeof V=="boolean")continue;const S=UO(z.prevProp,V);let N=S||L===h&&z.isActive&&!te&&G||R>k&&G,O=!1;const P=Array.isArray(V)?V:[V];let D=P.reduce(a(L),{});ee===!1&&(D={});const{prevResolvedValues:F={}}=z,U={...F,...D},Ce=le=>{N=!0,_.has(le)&&(O=!0,_.delete(le)),z.needsAnimating[le]=!0;const me=t.getValue(le);me&&(me.liveStyle=!1)};for(const le in U){const me=D[le],Te=F[le];if(E.hasOwnProperty(le))continue;let ae=!1;q0(me)&&q0(Te)?ae=!UA(me,Te):ae=me!==Te,ae?me!=null?Ce(le):_.add(le):me!==void 0&&_.has(le)?Ce(le):z.protectedKeys[le]=!0}z.prevProp=V,z.prevResolvedValues=D,z.isActive&&(E={...E,...D}),i&&t.blockInitialAnimation&&(N=!1);const xe=te&&S;N&&(!xe||O)&&b.push(...P.map(le=>{const me={type:L};if(typeof le=="string"&&i&&!xe&&t.manuallyAnimateOnMount&&t.parent){const{parent:Te}=t,ae=Dl(Te,le);if(Te.enteringChildren&&ae){const{delayChildren:j}=ae.transition||{};me.delay=PA(Te.enteringChildren,t,j)}}return{animation:le,options:me}}))}if(_.size){const R={};if(typeof f.initial!="boolean"){const L=Dl(t,Array.isArray(f.initial)?f.initial[0]:f.initial);L&&L.transition&&(R.transition=L.transition)}_.forEach(L=>{const z=t.getBaseTarget(L),V=t.getValue(L);V&&(V.liveStyle=!0),R[L]=z??null}),b.push({animation:R})}let A=!!b.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(A=!1),i=!1,A?e(b):Promise.resolve()}function d(h,f){if(n[h].isActive===f)return Promise.resolve();t.variantChildren?.forEach(b=>b.animationState?.setActive(h,f)),n[h].isActive=f;const g=c(h);for(const b in n)n[b].protectedKeys={};return g}return{animateChanges:c,setActive:d,setAnimateFunction:o,getState:()=>n,reset:()=>{n=Dx()}}}function UO(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!UA(e,t):!1}function oo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Dx(){return{animate:oo(!0),whileInView:oo(),whileHover:oo(),whileTap:oo(),whileDrag:oo(),whileFocus:oo(),exit:oo()}}class Sa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class zO extends Sa{constructor(e){super(e),e.animationState||(e.animationState=LO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();lm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let BO=0;class FO extends Sa{constructor(){super(...arguments),this.id=BO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const a=this.node.animationState.setActive("exit",!e);n&&!e&&a.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const qO={animation:{Feature:zO},exit:{Feature:FO}};function Uu(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function rd(t){return{point:{x:t.pageX,y:t.pageY}}}const HO=t=>e=>tv(e)&&t(e,rd(e));function Tu(t,e,n,i){return Uu(t,e,HO(n),i)}const BA=1e-4,$O=1-BA,GO=1+BA,FA=.01,KO=0-FA,YO=0+FA;function Nn(t){return t.max-t.min}function QO(t,e,n){return Math.abs(t-e)<=n}function Mx(t,e,n,i=.5){t.origin=i,t.originPoint=Et(e.min,e.max,t.origin),t.scale=Nn(n)/Nn(e),t.translate=Et(n.min,n.max,t.origin)-t.originPoint,(t.scale>=$O&&t.scale<=GO||isNaN(t.scale))&&(t.scale=1),(t.translate>=KO&&t.translate<=YO||isNaN(t.translate))&&(t.translate=0)}function Eu(t,e,n,i){Mx(t.x,e.x,n.x,i?i.originX:void 0),Mx(t.y,e.y,n.y,i?i.originY:void 0)}function Ox(t,e,n){t.min=n.min+e.min,t.max=t.min+Nn(e)}function XO(t,e,n){Ox(t.x,e.x,n.x),Ox(t.y,e.y,n.y)}function Vx(t,e,n){t.min=e.min-n.min,t.max=t.min+Nn(e)}function Su(t,e,n){Vx(t.x,e.x,n.x),Vx(t.y,e.y,n.y)}function yi(t){return[t("x"),t("y")]}const qA=({current:t})=>t?t.ownerDocument.defaultView:null,jx=(t,e)=>Math.abs(t-e);function WO(t,e){const n=jx(t.x,e.x),i=jx(t.y,e.y);return Math.sqrt(n**2+i**2)}class HA{constructor(e,n,{transformPagePoint:i,contextWindow:a=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=e0(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,k=WO(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!k)return;const{point:A}=_,{timestamp:R}=hn;this.history.push({...A,timestamp:R});const{onStart:L,onMove:z}=this.handlers;E||(L&&L(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,_)},this.handlePointerMove=(_,E)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Jg(E,this.transformPagePoint),Tt.update(this.updatePoint,!0)},this.handlePointerUp=(_,E)=>{this.end();const{onEnd:k,onSessionEnd:A,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const L=e0(_.type==="pointercancel"?this.lastMoveEventInfo:Jg(E,this.transformPagePoint),this.history);this.startEvent&&k&&k(_,L),A&&A(_,L)},!tv(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=a||window;const d=rd(e),h=Jg(d,this.transformPagePoint),{point:f}=h,{timestamp:g}=hn;this.history=[{...f,timestamp:g}];const{onSessionStart:b}=n;b&&b(e,e0(h,this.history)),this.removeListeners=td(Tu(this.contextWindow,"pointermove",this.handlePointerMove),Tu(this.contextWindow,"pointerup",this.handlePointerUp),Tu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ma(this.updatePoint)}}function Jg(t,e){return e?{point:e(t.point)}:t}function Px(t,e){return{x:t.x-e.x,y:t.y-e.y}}function e0({point:t},e){return{point:t,delta:Px(t,$A(e)),offset:Px(t,ZO(e)),velocity:JO(e,.1)}}function ZO(t){return t[0]}function $A(t){return t[t.length-1]}function JO(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const a=$A(t);for(;n>=0&&(i=t[n],!(a.timestamp-i.timestamp>vr(e)));)n--;if(!i)return{x:0,y:0};const o=wi(a.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const c={x:(a.x-i.x)/o,y:(a.y-i.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function eV(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Et(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Et(n,t,i.max):Math.min(t,n)),t}function Lx(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function tV(t,{top:e,left:n,bottom:i,right:a}){return{x:Lx(t.x,n,a),y:Lx(t.y,e,i)}}function Ux(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function nV(t,e){return{x:Ux(t.x,e.x),y:Ux(t.y,e.y)}}function iV(t,e){let n=.5;const i=Nn(t),a=Nn(e);return a>i?n=Ou(e.min,e.max-i,t.min):i>a&&(n=Ou(t.min,t.max-a,e.min)),ls(0,1,n)}function rV(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const G0=.35;function sV(t=G0){return t===!1?t=0:t===!0&&(t=G0),{x:zx(t,"left","right"),y:zx(t,"top","bottom")}}function zx(t,e,n){return{min:Bx(t,e),max:Bx(t,n)}}function Bx(t,e){return typeof t=="number"?t:t[e]||0}const aV=new WeakMap;class oV{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const o=b=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(rd(b).point)},c=(b,_)=>{const{drag:E,dragPropagation:k,onDragStart:A}=this.getProps();if(E&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=p3(E),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yi(L=>{let z=this.getAxisMotionValue(L).get()||0;if(br.test(z)){const{projection:V}=this.visualElement;if(V&&V.layout){const G=V.layout.layoutBox[L];G&&(z=Nn(G)*(parseFloat(z)/100))}}this.originPoint[L]=z}),A&&Tt.postRender(()=>A(b,_)),H0(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},d=(b,_)=>{this.latestPointerEvent=b,this.latestPanInfo=_;const{dragPropagation:E,dragDirectionLock:k,onDirectionLock:A,onDrag:R}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:L}=_;if(k&&this.currentDirection===null){this.currentDirection=lV(L),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",_.point,L),this.updateAxis("y",_.point,L),this.visualElement.render(),R&&R(b,_)},h=(b,_)=>{this.latestPointerEvent=b,this.latestPanInfo=_,this.stop(b,_),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>yi(b=>this.getAnimationState(b)==="paused"&&this.getAxisMotionValue(b).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new HA(e,{onSessionStart:o,onStart:c,onMove:d,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:qA(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,a=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!a||!i)return;const{velocity:c}=a;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&Tt.postRender(()=>d(i,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:a}=this.getProps();if(!i||!Zh(e,a,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=eV(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&Sl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=tV(i.layoutBox,e):this.constraints=!1,this.elastic=sV(n),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&yi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=rV(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Sl(e))return!1;const i=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=dO(i,a.root,this.visualElement.getTransformPagePoint());let c=nV(a.layout.layoutBox,o);if(n){const d=n(lO(c));this.hasMutatedConstraints=!!d,d&&(c=CA(d))}return c}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:a,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},f=yi(g=>{if(!Zh(g,n,this.currentDirection))return;let b=h&&h[g]||{};c&&(b={min:0,max:0});const _=a?200:1e6,E=a?40:1e7,k={type:"inertia",velocity:i?e[g]:0,bounceStiffness:_,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...b};return this.startAxisValueAnimation(g,k)});return Promise.all(f).then(d)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return H0(this.visualElement,e),i.start(hv(e,i,0,n,this.visualElement,!1))}stopAnimation(){yi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){yi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),a=i[n];return a||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){yi(n=>{const{drag:i}=this.getProps();if(!Zh(n,i,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(n);if(a&&a.layout){const{min:c,max:d}=a.layout.layoutBox[n];o.set(e[n]-Et(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Sl(n)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};yi(c=>{const d=this.getAxisMotionValue(c);if(d&&this.constraints!==!1){const h=d.get();a[c]=iV({min:h,max:h},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),yi(c=>{if(!Zh(c,e,null))return;const d=this.getAxisMotionValue(c),{min:h,max:f}=this.constraints[c];d.set(Et(h,f,a[c]))})}addListeners(){if(!this.visualElement.current)return;aV.set(this.visualElement,this);const e=this.visualElement.current,n=Tu(e,"pointerdown",h=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();Sl(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Tt.read(i);const c=Uu(window,"resize",()=>this.scalePositionWithinConstraints()),d=a.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(yi(g=>{const b=this.getAxisMotionValue(g);b&&(this.originPoint[g]+=h[g].translate,b.set(b.get()+h[g].translate))}),this.visualElement.render())}));return()=>{c(),n(),o(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:c=G0,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:a,dragConstraints:o,dragElastic:c,dragMomentum:d}}}function Zh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function lV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class cV extends Sa{constructor(e){super(e),this.removeGroupControls=xi,this.removeListeners=xi,this.controls=new oV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xi}unmount(){this.removeGroupControls(),this.removeListeners()}}const Fx=t=>(e,n)=>{t&&Tt.postRender(()=>t(e,n))};class uV extends Sa{constructor(){super(...arguments),this.removePointerDownListener=xi}onPointerDown(e){this.session=new HA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:Fx(e),onStart:Fx(n),onMove:i,onEnd:(o,c)=>{delete this.session,a&&Tt.postRender(()=>a(o,c))}}}mount(){this.removePointerDownListener=Tu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ff={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const fu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Me.test(t))t=parseFloat(t);else return t;const n=qx(t,e.target.x),i=qx(t,e.target.y);return`${n}% ${i}%`}},dV={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,a=pa.parse(t);if(a.length>5)return i;const o=pa.createTransformer(t),c=typeof a[0]!="number"?1:0,d=n.x.scale*e.x,h=n.y.scale*e.y;a[0+c]/=d,a[1+c]/=h;const f=Et(d,h,.5);return typeof a[2+c]=="number"&&(a[2+c]/=f),typeof a[3+c]=="number"&&(a[3+c]/=f),o(a)}};let t0=!1;class hV extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:a}=this.props,{projection:o}=e;j3(fV),o&&(n.group&&n.group.add(o),i&&i.register&&a&&i.register(o),t0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),ff.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:a,isPresent:o}=this.props,{projection:c}=i;return c&&(c.isPresent=o,t0=!0,a||e.layoutDependency!==n||n===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||Tt.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ev.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:a}=e;t0=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function GA(t){const[e,n]=fA(),i=M.useContext(Dy);return v.jsx(hV,{...t,layoutGroup:i,switchLayoutGroup:M.useContext(SA),isPresent:e,safeToRemove:n})}const fV={borderRadius:{...fu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:fu,borderTopRightRadius:fu,borderBottomLeftRadius:fu,borderBottomRightRadius:fu,boxShadow:dV};function mV(t,e,n){const i=xn(t)?t:Pl(t);return i.start(hv("",i,e,n)),i.animation}const pV=(t,e)=>t.depth-e.depth;class gV{constructor(){this.children=[],this.isDirty=!1}add(e){Vy(this.children,e),this.isDirty=!0}remove(e){jy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(pV),this.isDirty=!1,this.children.forEach(e)}}function yV(t,e){const n=zn.now(),i=({timestamp:a})=>{const o=a-n;o>=e&&(ma(i),t(o-e))};return Tt.setup(i,!0),()=>ma(i)}const KA=["TopLeft","TopRight","BottomLeft","BottomRight"],vV=KA.length,Hx=t=>typeof t=="string"?parseFloat(t):t,$x=t=>typeof t=="number"||Me.test(t);function bV(t,e,n,i,a,o){a?(t.opacity=Et(0,n.opacity??1,_V(i)),t.opacityExit=Et(e.opacity??1,0,wV(i))):o&&(t.opacity=Et(e.opacity??1,n.opacity??1,i));for(let c=0;c<vV;c++){const d=`border${KA[c]}Radius`;let h=Gx(e,d),f=Gx(n,d);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||$x(h)===$x(f)?(t[d]=Math.max(Et(Hx(h),Hx(f),i),0),(br.test(f)||br.test(h))&&(t[d]+="%")):t[d]=f}(e.rotate||n.rotate)&&(t.rotate=Et(e.rotate||0,n.rotate||0,i))}function Gx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const _V=YA(0,.5,MS),wV=YA(.5,.95,xi);function YA(t,e,n){return i=>i<t?0:i>e?1:n(Ou(t,e,i))}function Kx(t,e){t.min=e.min,t.max=e.max}function gi(t,e){Kx(t.x,e.x),Kx(t.y,e.y)}function Yx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Qx(t,e,n,i,a){return t-=e,t=kf(t,1/n,i),a!==void 0&&(t=kf(t,1/a,i)),t}function xV(t,e=0,n=1,i=.5,a,o=t,c=t){if(br.test(e)&&(e=parseFloat(e),e=Et(c.min,c.max,e/100)-c.min),typeof e!="number")return;let d=Et(o.min,o.max,i);t===o&&(d-=e),t.min=Qx(t.min,e,n,d,a),t.max=Qx(t.max,e,n,d,a)}function Xx(t,e,[n,i,a],o,c){xV(t,e[n],e[i],e[a],e.scale,o,c)}const TV=["x","scaleX","originX"],EV=["y","scaleY","originY"];function Wx(t,e,n,i){Xx(t.x,e,TV,n?n.x:void 0,i?i.x:void 0),Xx(t.y,e,EV,n?n.y:void 0,i?i.y:void 0)}function Zx(t){return t.translate===0&&t.scale===1}function QA(t){return Zx(t.x)&&Zx(t.y)}function Jx(t,e){return t.min===e.min&&t.max===e.max}function SV(t,e){return Jx(t.x,e.x)&&Jx(t.y,e.y)}function eT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function XA(t,e){return eT(t.x,e.x)&&eT(t.y,e.y)}function tT(t){return Nn(t.x)/Nn(t.y)}function nT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class AV{constructor(){this.members=[]}add(e){Vy(this.members,e),e.scheduleRender()}remove(e){if(jy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(a=>e===a);if(n===0)return!1;let i;for(let a=n;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CV(t,e,n){let i="";const a=t.x.translate/e.x,o=t.y.translate/e.y,c=n?.z||0;if((a||o||c)&&(i=`translate3d(${a}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:g,rotateX:b,rotateY:_,skewX:E,skewY:k}=n;f&&(i=`perspective(${f}px) ${i}`),g&&(i+=`rotate(${g}deg) `),b&&(i+=`rotateX(${b}deg) `),_&&(i+=`rotateY(${_}deg) `),E&&(i+=`skewX(${E}deg) `),k&&(i+=`skewY(${k}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(i+=`scale(${d}, ${h})`),i||"none"}const n0=["","X","Y","Z"],NV=1e3;let RV=0;function i0(t,e,n,i){const{latestValues:a}=e;a[t]&&(n[t]=a[t],e.setStaticValue(t,0),i&&(i[t]=0))}function WA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=VA(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Tt,!(a||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&WA(i)}function ZA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(c={},d=e?.()){this.id=RV++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(DV),this.nodes.forEach(jV),this.nodes.forEach(PV),this.nodes.forEach(MV)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new gV)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Uy),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const h=this.eventHandlers.get(c);h&&h.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=hA(c)&&!w3(c),this.instance=c;const{layoutId:d,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||d)&&(this.isLayoutDirty=!0),t){let g,b=0;const _=()=>this.root.updateBlockedByResize=!1;Tt.read(()=>{b=window.innerWidth}),t(c,()=>{const E=window.innerWidth;E!==b&&(b=E,this.root.updateBlockedByResize=!0,g&&g(),g=yV(_,250),ff.hasAnimatedSinceResize&&(ff.hasAnimatedSinceResize=!1,this.nodes.forEach(sT)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&f&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:b,hasRelativeLayoutChanged:_,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||f.getDefaultTransition()||FV,{onLayoutAnimationStart:A,onLayoutAnimationComplete:R}=f.getProps(),L=!this.targetLayout||!XA(this.targetLayout,E),z=!b&&_;if(this.options.layoutRoot||this.resumeFrom||z||b&&(L||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const V={...Zy(k,"layout"),onPlay:A,onComplete:R};(f.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V),this.setAnimationOrigin(g,z)}else b||sT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ma(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(LV),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&WA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const b=this.path[g];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(iT);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(rT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(VV),this.nodes.forEach(IV),this.nodes.forEach(kV)):this.nodes.forEach(rT),this.clearAllSnapshots();const d=zn.now();hn.delta=ls(0,1e3/60,d-hn.timestamp),hn.timestamp=d,hn.isProcessing=!0,$g.update.process(hn),$g.preRender.process(hn),$g.render.process(hn),hn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ev.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(OV),this.sharedNodes.forEach(UV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Nn(this.snapshot.measuredBox.x)&&!Nn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&this.instance){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!QA(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;c&&this.instance&&(d||co(this.latestValues)||g)&&(a(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return c&&(h=this.removeTransform(h)),qV(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Pt();const d=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(HV))){const{scroll:f}=this.root;f&&(Al(d.x,f.offset.x),Al(d.y,f.offset.y))}return d}removeElementScroll(c){const d=Pt();if(gi(d,c),this.scroll?.wasRoot)return d;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:g,options:b}=f;f!==this.root&&g&&b.layoutScroll&&(g.wasRoot&&gi(d,c),Al(d.x,g.offset.x),Al(d.y,g.offset.y))}return d}applyTransform(c,d=!1){const h=Pt();gi(h,c);for(let f=0;f<this.path.length;f++){const g=this.path[f];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Cl(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),co(g.latestValues)&&Cl(h,g.latestValues)}return co(this.latestValues)&&Cl(h,this.latestValues),h}removeTransform(c){const d=Pt();gi(d,c);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!co(f.latestValues))continue;z0(f.latestValues)&&f.updateSnapshot();const g=Pt(),b=f.measurePageBox();gi(g,b),Wx(d,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return co(this.latestValues)&&Wx(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==hn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(c||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:b}=this.options;if(!(!this.layout||!(g||b))){if(this.resolvedRelativeTargetAt=hn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),Su(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pt(),this.targetWithTransforms=Pt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),XO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gi(this.target,this.layout.layoutBox),RA(this.target,this.targetDelta)):gi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),Su(this.relativeTargetOrigin,this.target,_.target),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||z0(this.parent.latestValues)||NA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),d=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===hn.timestamp&&(h=!1),h)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;gi(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,_=this.treeScale.y;uO(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Pt());const{target:E}=c;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Yx(this.prevProjectionDelta.x,this.projectionDelta.x),Yx(this.prevProjectionDelta.y,this.projectionDelta.y)),Eu(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==_||!nT(this.projectionDelta.x,this.prevProjectionDelta.x)||!nT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Nl(),this.projectionDelta=Nl(),this.projectionDeltaWithTransform=Nl()}setAnimationOrigin(c,d=!1){const h=this.snapshot,f=h?h.latestValues:{},g={...this.latestValues},b=Nl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const _=Pt(),E=h?h.source:void 0,k=this.layout?this.layout.source:void 0,A=E!==k,R=this.getStack(),L=!R||R.members.length<=1,z=!!(A&&!L&&this.options.crossfade===!0&&!this.path.some(BV));this.animationProgress=0;let V;this.mixTargetDelta=G=>{const ee=G/1e3;aT(b.x,c.x,ee),aT(b.y,c.y,ee),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Su(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zV(this.relativeTarget,this.relativeTargetOrigin,_,ee),V&&SV(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=Pt()),gi(V,this.relativeTarget)),A&&(this.animationValues=g,bV(g,f,this.latestValues,ee,z,L)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ee},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ma(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Tt.update(()=>{ff.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Pl(0)),this.currentAnimation=mV(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),c.onUpdate&&c.onUpdate(d)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(NV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:h,layout:f,latestValues:g}=c;if(!(!d||!h||!f)){if(this!==c&&this.layout&&f&&JA(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Pt();const b=Nn(this.layout.layoutBox.x);h.x.min=c.target.x.min,h.x.max=h.x.min+b;const _=Nn(this.layout.layoutBox.y);h.y.min=c.target.y.min,h.y.max=h.y.min+_}gi(d,h),Cl(d,g),Eu(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new AV),this.sharedNodes.get(c).add(d);const f=d.options.initialPromotionConfig;d.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:h}=c;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const f={};h.z&&i0("z",c,f,this.animationValues);for(let g=0;g<n0.length;g++)i0(`rotate${n0[g]}`,c,f,this.animationValues),i0(`skew${n0[g]}`,c,f,this.animationValues);c.render();for(const g in f)c.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);c.scheduleRender()}applyProjectionStyles(c,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=hf(d?.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=hf(d?.pointerEvents)||""),this.hasProjected&&!co(this.latestValues)&&(c.transform=h?h({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let b=CV(this.projectionDeltaWithTransform,this.treeScale,g);h&&(b=h(g,b)),c.transform=b;const{x:_,y:E}=this.projectionDelta;c.transformOrigin=`${_.origin*100}% ${E.origin*100}% 0`,f.animationValues?c.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const k in Lu){if(g[k]===void 0)continue;const{correct:A,applyTo:R,isCSSVariable:L}=Lu[k],z=b==="none"?g[k]:A(g[k],f);if(R){const V=R.length;for(let G=0;G<V;G++)c[R[G]]=z}else L?this.options.visualElement.renderState.vars[k]=z:c[k]=z}this.options.layoutId&&(c.pointerEvents=f===this?hf(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(iT),this.root.sharedNodes.clear()}}}function IV(t){t.updateLayout()}function kV(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:a}=t.options,o=e.source!==t.layout.source;a==="size"?yi(g=>{const b=o?e.measuredBox[g]:e.layoutBox[g],_=Nn(b);b.min=n[g].min,b.max=b.min+_}):JA(a,e.layoutBox,n)&&yi(g=>{const b=o?e.measuredBox[g]:e.layoutBox[g],_=Nn(n[g]);b.max=b.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+_)});const c=Nl();Eu(c,n,e.layoutBox);const d=Nl();o?Eu(d,t.applyTransform(i,!0),e.measuredBox):Eu(d,n,e.layoutBox);const h=!QA(c);let f=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:b,layout:_}=g;if(b&&_){const E=Pt();Su(E,e.layoutBox,b.layoutBox);const k=Pt();Su(k,n,_.layoutBox),XA(E,k)||(f=!0),g.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=E,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:d,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function DV(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function MV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function OV(t){t.clearSnapshot()}function iT(t){t.clearMeasurements()}function rT(t){t.isLayoutDirty=!1}function VV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function sT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function jV(t){t.resolveTargetDelta()}function PV(t){t.calcProjection()}function LV(t){t.resetSkewAndRotation()}function UV(t){t.removeLeadSnapshot()}function aT(t,e,n){t.translate=Et(e.translate,0,n),t.scale=Et(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function oT(t,e,n,i){t.min=Et(e.min,n.min,i),t.max=Et(e.max,n.max,i)}function zV(t,e,n,i){oT(t.x,e.x,n.x,i),oT(t.y,e.y,n.y,i)}function BV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const FV={duration:.45,ease:[.4,0,.1,1]},lT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),cT=lT("applewebkit/")&&!lT("chrome/")?Math.round:xi;function uT(t){t.min=cT(t.min),t.max=cT(t.max)}function qV(t){uT(t.x),uT(t.y)}function JA(t,e,n){return t==="position"||t==="preserve-aspect"&&!QO(tT(e),tT(n),.2)}function HV(t){return t!==t.root&&t.scroll?.wasRoot}const $V=ZA({attachResizeListener:(t,e)=>Uu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),r0={current:void 0},e2=ZA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!r0.current){const t=new $V({});t.mount(window),t.setOptions({layoutScroll:!0}),r0.current=t}return r0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),GV={pan:{Feature:uV},drag:{Feature:cV,ProjectionNode:e2,MeasureLayout:GA}};function dT(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,o=i[a];o&&Tt.postRender(()=>o(e,rd(e)))}class KV extends Sa{mount(){const{current:e}=this.node;e&&(this.unmount=g3(e,(n,i)=>(dT(this.node,i,"Start"),a=>dT(this.node,a,"End"))))}unmount(){}}class YV extends Sa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=td(Uu(this.node.current,"focus",()=>this.onFocus()),Uu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function hT(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),o=i[a];o&&Tt.postRender(()=>o(e,rd(e)))}class QV extends Sa{mount(){const{current:e}=this.node;e&&(this.unmount=_3(e,(n,i)=>(hT(this.node,i,"Start"),(a,{success:o})=>hT(this.node,a,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const K0=new WeakMap,s0=new WeakMap,XV=t=>{const e=K0.get(t.target);e&&e(t)},WV=t=>{t.forEach(XV)};function ZV({root:t,...e}){const n=t||document;s0.has(n)||s0.set(n,{});const i=s0.get(n),a=JSON.stringify(e);return i[a]||(i[a]=new IntersectionObserver(WV,{root:t,...e})),i[a]}function JV(t,e,n){const i=ZV(e);return K0.set(t,n),i.observe(t),()=>{K0.delete(t),i.unobserve(t)}}const ej={some:0,all:1};class tj extends Sa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:a="some",once:o}=e,c={root:n?n.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:ej[a]},d=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:b}=this.node.getProps(),_=f?g:b;_&&_(h)};return JV(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(nj(e,n))&&this.startObserver()}unmount(){}}function nj({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const ij={inView:{Feature:tj},tap:{Feature:QV},focus:{Feature:YV},hover:{Feature:KV}},rj={layout:{ProjectionNode:e2,MeasureLayout:GA}},sj={...qO,...ij,...GV,...rj},_o=oO(sj,_O);function aj(t){t.values.forEach(e=>e.stop())}function Y0(t,e){[...e].reverse().forEach(i=>{const a=t.getVariant(i);a&&dv(t,a),t.variantChildren&&t.variantChildren.forEach(o=>{Y0(o,e)})})}function oj(t,e){if(Array.isArray(e))return Y0(t,e);if(typeof e=="string")return Y0(t,[e]);dv(t,e)}function lj(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,i){const a=[];return t.forEach(o=>{a.push(LA(o,n,{transitionOverride:i}))}),Promise.all(a)},set(n){return t.forEach(i=>{oj(i,n)})},stop(){t.forEach(n=>{aj(n)})},mount(){return()=>{e.stop()}}};return e}function cj(){const t=sm(lj);return Oy(t.mount,[]),t}const uj=cj,fT=t=>{let e;const n=new Set,i=(f,g)=>{const b=typeof f=="function"?f(e):f;if(!Object.is(b,e)){const _=e;e=g??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(E=>E(e,_))}},a=()=>e,d={setState:i,getState:a,getInitialState:()=>h,subscribe:f=>(n.add(f),()=>n.delete(f))},h=e=t(i,a,d);return d},dj=(t=>t?fT(t):fT),hj=t=>t;function fj(t,e=hj){const n=Kh.useSyncExternalStore(t.subscribe,Kh.useCallback(()=>e(t.getState()),[t,e]),Kh.useCallback(()=>e(t.getInitialState()),[t,e]));return Kh.useDebugValue(n),n}const mT=t=>{const e=dj(t),n=i=>fj(e,i);return Object.assign(n,e),n},um=(t=>t?mT(t):mT);function mj(t,e){let n;try{n=t()}catch{return}return{getItem:a=>{var o;const c=h=>h===null?null:JSON.parse(h,void 0),d=(o=n.getItem(a))!=null?o:null;return d instanceof Promise?d.then(c):c(d)},setItem:(a,o)=>n.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>n.removeItem(a)}}const Q0=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(i){return Q0(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return Q0(i)(n)}}}},pj=(t,e)=>(n,i,a)=>{let o={storage:mj(()=>localStorage),partialize:A=>A,version:0,merge:(A,R)=>({...R,...A}),...e},c=!1;const d=new Set,h=new Set;let f=o.storage;if(!f)return t((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...A)},i,a);const g=()=>{const A=o.partialize({...i()});return f.setItem(o.name,{state:A,version:o.version})},b=a.setState;a.setState=(A,R)=>(b(A,R),g());const _=t((...A)=>(n(...A),g()),i,a);a.getInitialState=()=>_;let E;const k=()=>{var A,R;if(!f)return;c=!1,d.forEach(z=>{var V;return z((V=i())!=null?V:_)});const L=((R=o.onRehydrateStorage)==null?void 0:R.call(o,(A=i())!=null?A:_))||void 0;return Q0(f.getItem.bind(f))(o.name).then(z=>{if(z)if(typeof z.version=="number"&&z.version!==o.version){if(o.migrate){const V=o.migrate(z.state,z.version);return V instanceof Promise?V.then(G=>[!0,G]):[!0,V]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,z.state];return[!1,void 0]}).then(z=>{var V;const[G,ee]=z;if(E=o.merge(ee,(V=i())!=null?V:_),n(E,!0),G)return g()}).then(()=>{L?.(E,void 0),E=i(),c=!0,h.forEach(z=>z(E))}).catch(z=>{L?.(void 0,z)})};return a.persist={setOptions:A=>{o={...o,...A},A.storage&&(f=A.storage)},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>k(),hasHydrated:()=>c,onHydrate:A=>(d.add(A),()=>{d.delete(A)}),onFinishHydration:A=>(h.add(A),()=>{h.delete(A)})},o.skipHydration||k(),E||_},fv=pj;var Rl=9e15,Aa=1e9,X0="0123456789abcdef",Df="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Mf="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",W0={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Rl,maxE:Rl,crypto:!1},t2,es,Oe=!0,dm="[DecimalError] ",ga=dm+"Invalid argument: ",n2=dm+"Precision limit exceeded",i2=dm+"crypto unavailable",r2="[object Decimal]",Tn=Math.floor,Zt=Math.pow,gj=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,yj=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,vj=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,s2=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Fi=1e7,Ie=7,bj=9007199254740991,_j=Df.length-1,Z0=Mf.length-1,ce={toStringTag:r2};ce.absoluteValue=ce.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ee(t)};ce.ceil=function(){return Ee(new this.constructor(this),this.e+1,2)};ce.clampedTo=ce.clamp=function(t,e){var n,i=this,a=i.constructor;if(t=new a(t),e=new a(e),!t.s||!e.s)return new a(NaN);if(t.gt(e))throw Error(ga+e);return n=i.cmp(t),n<0?t:i.cmp(e)>0?e:new a(i)};ce.comparedTo=ce.cmp=function(t){var e,n,i,a,o=this,c=o.d,d=(t=new o.constructor(t)).d,h=o.s,f=t.s;if(!c||!d)return!h||!f?NaN:h!==f?h:c===d?0:!c^h<0?1:-1;if(!c[0]||!d[0])return c[0]?h:d[0]?-f:0;if(h!==f)return h;if(o.e!==t.e)return o.e>t.e^h<0?1:-1;for(i=c.length,a=d.length,e=0,n=i<a?i:a;e<n;++e)if(c[e]!==d[e])return c[e]>d[e]^h<0?1:-1;return i===a?0:i>a^h<0?1:-1};ce.cosine=ce.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+Ie,i.rounding=1,n=wj(i,u2(i,n)),i.precision=t,i.rounding=e,Ee(es==2||es==3?n.neg():n,t,e,!0)):new i(1):new i(NaN)};ce.cubeRoot=ce.cbrt=function(){var t,e,n,i,a,o,c,d,h,f,g=this,b=g.constructor;if(!g.isFinite()||g.isZero())return new b(g);for(Oe=!1,o=g.s*Zt(g.s*g,1/3),!o||Math.abs(o)==1/0?(n=pn(g.d),t=g.e,(o=(t-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=Zt(n,1/3),t=Tn((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?n="5e"+t:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),i=new b(n),i.s=g.s):i=new b(o.toString()),c=(t=b.precision)+3;;)if(d=i,h=d.times(d).times(d),f=h.plus(g),i=yt(f.plus(g).times(d),f.plus(h),c+2,1),pn(d.d).slice(0,c)===(n=pn(i.d)).slice(0,c))if(n=n.slice(c-3,c+1),n=="9999"||!a&&n=="4999"){if(!a&&(Ee(d,t+1,0),d.times(d).times(d).eq(g))){i=d;break}c+=4,a=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Ee(i,t+1,1),e=!i.times(i).times(i).eq(g));break}return Oe=!0,Ee(i,t,b.rounding,e)};ce.decimalPlaces=ce.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Tn(this.e/Ie))*Ie,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};ce.dividedBy=ce.div=function(t){return yt(this,new this.constructor(t))};ce.dividedToIntegerBy=ce.divToInt=function(t){var e=this,n=e.constructor;return Ee(yt(e,new n(t),0,1,1),n.precision,n.rounding)};ce.equals=ce.eq=function(t){return this.cmp(t)===0};ce.floor=function(){return Ee(new this.constructor(this),this.e+1,3)};ce.greaterThan=ce.gt=function(t){return this.cmp(t)>0};ce.greaterThanOrEqualTo=ce.gte=function(t){var e=this.cmp(t);return e==1||e===0};ce.hyperbolicCosine=ce.cosh=function(){var t,e,n,i,a,o=this,c=o.constructor,d=new c(1);if(!o.isFinite())return new c(o.s?1/0:NaN);if(o.isZero())return d;n=c.precision,i=c.rounding,c.precision=n+Math.max(o.e,o.sd())+4,c.rounding=1,a=o.d.length,a<32?(t=Math.ceil(a/3),e=(1/fm(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),o=zl(c,1,o.times(e),new c(1),!0);for(var h,f=t,g=new c(8);f--;)h=o.times(o),o=d.minus(h.times(g.minus(h.times(g))));return Ee(o,c.precision=n,c.rounding=i,!0)};ce.hyperbolicSine=ce.sinh=function(){var t,e,n,i,a=this,o=a.constructor;if(!a.isFinite()||a.isZero())return new o(a);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<3)a=zl(o,2,a,a,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:t|0,a=a.times(1/fm(5,t)),a=zl(o,2,a,a,!0);for(var c,d=new o(5),h=new o(16),f=new o(20);t--;)c=a.times(a),a=a.times(d.plus(c.times(h.times(c).plus(f))))}return o.precision=e,o.rounding=n,Ee(a,e,n,!0)};ce.hyperbolicTangent=ce.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,yt(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)};ce.inverseCosine=ce.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),i=e.precision,a=e.rounding;return n!==-1?n===0?t.isNeg()?gr(e,i,a):new e(0):new e(NaN):t.isZero()?gr(e,i+4,a).times(.5):(e.precision=i+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=i,e.rounding=a,t.times(2))};ce.inverseHyperbolicCosine=ce.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,Oe=!1,n=n.times(n).minus(1).sqrt().plus(n),Oe=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)};ce.inverseHyperbolicSine=ce.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,Oe=!1,n=n.times(n).plus(1).sqrt().plus(n),Oe=!0,i.precision=t,i.rounding=e,n.ln())};ce.inverseHyperbolicTangent=ce.atanh=function(){var t,e,n,i,a=this,o=a.constructor;return a.isFinite()?a.e>=0?new o(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(t=o.precision,e=o.rounding,i=a.sd(),Math.max(i,t)<2*-a.e-1?Ee(new o(a),t,e,!0):(o.precision=n=i-a.e,a=yt(a.plus(1),new o(1).minus(a),n+t,1),o.precision=t+4,o.rounding=1,a=a.ln(),o.precision=t,o.rounding=e,a.times(.5))):new o(NaN)};ce.inverseSine=ce.asin=function(){var t,e,n,i,a=this,o=a.constructor;return a.isZero()?new o(a):(e=a.abs().cmp(1),n=o.precision,i=o.rounding,e!==-1?e===0?(t=gr(o,n+4,i).times(.5),t.s=a.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,a=a.div(new o(1).minus(a.times(a)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=i,a.times(2)))};ce.inverseTangent=ce.atan=function(){var t,e,n,i,a,o,c,d,h,f=this,g=f.constructor,b=g.precision,_=g.rounding;if(f.isFinite()){if(f.isZero())return new g(f);if(f.abs().eq(1)&&b+4<=Z0)return c=gr(g,b+4,_).times(.25),c.s=f.s,c}else{if(!f.s)return new g(NaN);if(b+4<=Z0)return c=gr(g,b+4,_).times(.5),c.s=f.s,c}for(g.precision=d=b+10,g.rounding=1,n=Math.min(28,d/Ie+2|0),t=n;t;--t)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(Oe=!1,e=Math.ceil(d/Ie),i=1,h=f.times(f),c=new g(f),a=f;t!==-1;)if(a=a.times(h),o=c.minus(a.div(i+=2)),a=a.times(h),c=o.plus(a.div(i+=2)),c.d[e]!==void 0)for(t=e;c.d[t]===o.d[t]&&t--;);return n&&(c=c.times(2<<n-1)),Oe=!0,Ee(c,g.precision=b,g.rounding=_,!0)};ce.isFinite=function(){return!!this.d};ce.isInteger=ce.isInt=function(){return!!this.d&&Tn(this.e/Ie)>this.d.length-2};ce.isNaN=function(){return!this.s};ce.isNegative=ce.isNeg=function(){return this.s<0};ce.isPositive=ce.isPos=function(){return this.s>0};ce.isZero=function(){return!!this.d&&this.d[0]===0};ce.lessThan=ce.lt=function(t){return this.cmp(t)<0};ce.lessThanOrEqualTo=ce.lte=function(t){return this.cmp(t)<1};ce.logarithm=ce.log=function(t){var e,n,i,a,o,c,d,h,f=this,g=f.constructor,b=g.precision,_=g.rounding,E=5;if(t==null)t=new g(10),e=!0;else{if(t=new g(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new g(NaN);e=t.eq(10)}if(n=f.d,f.s<0||!n||!n[0]||f.eq(1))return new g(n&&!n[0]?-1/0:f.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(a=n[0];a%10===0;)a/=10;o=a!==1}if(Oe=!1,d=b+E,c=oa(f,d),i=e?Of(g,d+10):oa(t,d),h=yt(c,i,d,1),zu(h.d,a=b,_))do if(d+=10,c=oa(f,d),i=e?Of(g,d+10):oa(t,d),h=yt(c,i,d,1),!o){+pn(h.d).slice(a+1,a+15)+1==1e14&&(h=Ee(h,b+1,0));break}while(zu(h.d,a+=10,_));return Oe=!0,Ee(h,b,_)};ce.minus=ce.sub=function(t){var e,n,i,a,o,c,d,h,f,g,b,_,E=this,k=E.constructor;if(t=new k(t),!E.d||!t.d)return!E.s||!t.s?t=new k(NaN):E.d?t.s=-t.s:t=new k(t.d||E.s!==t.s?E:NaN),t;if(E.s!=t.s)return t.s=-t.s,E.plus(t);if(f=E.d,_=t.d,d=k.precision,h=k.rounding,!f[0]||!_[0]){if(_[0])t.s=-t.s;else if(f[0])t=new k(E);else return new k(h===3?-0:0);return Oe?Ee(t,d,h):t}if(n=Tn(t.e/Ie),g=Tn(E.e/Ie),f=f.slice(),o=g-n,o){for(b=o<0,b?(e=f,o=-o,c=_.length):(e=_,n=g,c=f.length),i=Math.max(Math.ceil(d/Ie),c)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=f.length,c=_.length,b=i<c,b&&(c=i),i=0;i<c;i++)if(f[i]!=_[i]){b=f[i]<_[i];break}o=0}for(b&&(e=f,f=_,_=e,t.s=-t.s),c=f.length,i=_.length-c;i>0;--i)f[c++]=0;for(i=_.length;i>o;){if(f[--i]<_[i]){for(a=i;a&&f[--a]===0;)f[a]=Fi-1;--f[a],f[i]+=Fi}f[i]-=_[i]}for(;f[--c]===0;)f.pop();for(;f[0]===0;f.shift())--n;return f[0]?(t.d=f,t.e=hm(f,n),Oe?Ee(t,d,h):t):new k(h===3?-0:0)};ce.modulo=ce.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?Ee(new i(n),i.precision,i.rounding):(Oe=!1,i.modulo==9?(e=yt(n,t.abs(),0,3,1),e.s*=t.s):e=yt(n,t,0,i.modulo,1),e=e.times(t),Oe=!0,n.minus(e))};ce.naturalExponential=ce.exp=function(){return J0(this)};ce.naturalLogarithm=ce.ln=function(){return oa(this)};ce.negated=ce.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ee(t)};ce.plus=ce.add=function(t){var e,n,i,a,o,c,d,h,f,g,b=this,_=b.constructor;if(t=new _(t),!b.d||!t.d)return!b.s||!t.s?t=new _(NaN):b.d||(t=new _(t.d||b.s===t.s?b:NaN)),t;if(b.s!=t.s)return t.s=-t.s,b.minus(t);if(f=b.d,g=t.d,d=_.precision,h=_.rounding,!f[0]||!g[0])return g[0]||(t=new _(b)),Oe?Ee(t,d,h):t;if(o=Tn(b.e/Ie),i=Tn(t.e/Ie),f=f.slice(),a=o-i,a){for(a<0?(n=f,a=-a,c=g.length):(n=g,i=o,c=f.length),o=Math.ceil(d/Ie),c=o>c?o+1:c+1,a>c&&(a=c,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(c=f.length,a=g.length,c-a<0&&(a=c,n=g,g=f,f=n),e=0;a;)e=(f[--a]=f[a]+g[a]+e)/Fi|0,f[a]%=Fi;for(e&&(f.unshift(e),++i),c=f.length;f[--c]==0;)f.pop();return t.d=f,t.e=hm(f,i),Oe?Ee(t,d,h):t};ce.precision=ce.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ga+t);return n.d?(e=a2(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};ce.round=function(){var t=this,e=t.constructor;return Ee(new e(t),t.e+1,e.rounding)};ce.sine=ce.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+Ie,i.rounding=1,n=Tj(i,u2(i,n)),i.precision=t,i.rounding=e,Ee(es>2?n.neg():n,t,e,!0)):new i(NaN)};ce.squareRoot=ce.sqrt=function(){var t,e,n,i,a,o,c=this,d=c.d,h=c.e,f=c.s,g=c.constructor;if(f!==1||!d||!d[0])return new g(!f||f<0&&(!d||d[0])?NaN:d?c:1/0);for(Oe=!1,f=Math.sqrt(+c),f==0||f==1/0?(e=pn(d),(e.length+h)%2==0&&(e+="0"),f=Math.sqrt(e),h=Tn((h+1)/2)-(h<0||h%2),f==1/0?e="5e"+h:(e=f.toExponential(),e=e.slice(0,e.indexOf("e")+1)+h),i=new g(e)):i=new g(f.toString()),n=(h=g.precision)+3;;)if(o=i,i=o.plus(yt(c,o,n+2,1)).times(.5),pn(o.d).slice(0,n)===(e=pn(i.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!a&&e=="4999"){if(!a&&(Ee(o,h+1,0),o.times(o).eq(c))){i=o;break}n+=4,a=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ee(i,h+1,1),t=!i.times(i).eq(c));break}return Oe=!0,Ee(i,h,g.rounding,t)};ce.tangent=ce.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,n=n.sin(),n.s=1,n=yt(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,Ee(es==2||es==4?n.neg():n,t,e,!0)):new i(NaN)};ce.times=ce.mul=function(t){var e,n,i,a,o,c,d,h,f,g=this,b=g.constructor,_=g.d,E=(t=new b(t)).d;if(t.s*=g.s,!_||!_[0]||!E||!E[0])return new b(!t.s||_&&!_[0]&&!E||E&&!E[0]&&!_?NaN:!_||!E?t.s/0:t.s*0);for(n=Tn(g.e/Ie)+Tn(t.e/Ie),h=_.length,f=E.length,h<f&&(o=_,_=E,E=o,c=h,h=f,f=c),o=[],c=h+f,i=c;i--;)o.push(0);for(i=f;--i>=0;){for(e=0,a=h+i;a>i;)d=o[a]+E[i]*_[a-i-1]+e,o[a--]=d%Fi|0,e=d/Fi|0;o[a]=(o[a]+e)%Fi|0}for(;!o[--c];)o.pop();return e?++n:o.shift(),t.d=o,t.e=hm(o,n),Oe?Ee(t,b.precision,b.rounding):t};ce.toBinary=function(t,e){return mv(this,2,t,e)};ce.toDecimalPlaces=ce.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(Fn(t,0,Aa),e===void 0?e=i.rounding:Fn(e,0,8),Ee(n,t+n.e+1,e))};ce.toExponential=function(t,e){var n,i=this,a=i.constructor;return t===void 0?n=Ar(i,!0):(Fn(t,0,Aa),e===void 0?e=a.rounding:Fn(e,0,8),i=Ee(new a(i),t+1,e),n=Ar(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n};ce.toFixed=function(t,e){var n,i,a=this,o=a.constructor;return t===void 0?n=Ar(a):(Fn(t,0,Aa),e===void 0?e=o.rounding:Fn(e,0,8),i=Ee(new o(a),t+a.e+1,e),n=Ar(i,!1,t+i.e+1)),a.isNeg()&&!a.isZero()?"-"+n:n};ce.toFraction=function(t){var e,n,i,a,o,c,d,h,f,g,b,_,E=this,k=E.d,A=E.constructor;if(!k)return new A(E);if(f=n=new A(1),i=h=new A(0),e=new A(i),o=e.e=a2(k)-E.e-1,c=o%Ie,e.d[0]=Zt(10,c<0?Ie+c:c),t==null)t=o>0?e:f;else{if(d=new A(t),!d.isInt()||d.lt(f))throw Error(ga+d);t=d.gt(e)?o>0?e:f:d}for(Oe=!1,d=new A(pn(k)),g=A.precision,A.precision=o=k.length*Ie*2;b=yt(d,e,0,1,1),a=n.plus(b.times(i)),a.cmp(t)!=1;)n=i,i=a,a=f,f=h.plus(b.times(a)),h=a,a=e,e=d.minus(b.times(a)),d=a;return a=yt(t.minus(n),i,0,1,1),h=h.plus(a.times(f)),n=n.plus(a.times(i)),h.s=f.s=E.s,_=yt(f,i,o,1).minus(E).abs().cmp(yt(h,n,o,1).minus(E).abs())<1?[f,i]:[h,n],A.precision=g,Oe=!0,_};ce.toHexadecimal=ce.toHex=function(t,e){return mv(this,16,t,e)};ce.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),t==null){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),e===void 0?e=i.rounding:Fn(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(Oe=!1,n=yt(n,t,0,e,1).times(t),Oe=!0,Ee(n)):(t.s=n.s,n=t),n};ce.toNumber=function(){return+this};ce.toOctal=function(t,e){return mv(this,8,t,e)};ce.toPower=ce.pow=function(t){var e,n,i,a,o,c,d=this,h=d.constructor,f=+(t=new h(t));if(!d.d||!t.d||!d.d[0]||!t.d[0])return new h(Zt(+d,f));if(d=new h(d),d.eq(1))return d;if(i=h.precision,o=h.rounding,t.eq(1))return Ee(d,i,o);if(e=Tn(t.e/Ie),e>=t.d.length-1&&(n=f<0?-f:f)<=bj)return a=o2(h,d,n,i),t.s<0?new h(1).div(a):Ee(a,i,o);if(c=d.s,c<0){if(e<t.d.length-1)return new h(NaN);if((t.d[e]&1)==0&&(c=1),d.e==0&&d.d[0]==1&&d.d.length==1)return d.s=c,d}return n=Zt(+d,f),e=n==0||!isFinite(n)?Tn(f*(Math.log("0."+pn(d.d))/Math.LN10+d.e+1)):new h(n+"").e,e>h.maxE+1||e<h.minE-1?new h(e>0?c/0:0):(Oe=!1,h.rounding=d.s=1,n=Math.min(12,(e+"").length),a=J0(t.times(oa(d,i+n)),i),a.d&&(a=Ee(a,i+5,1),zu(a.d,i,o)&&(e=i+10,a=Ee(J0(t.times(oa(d,e+n)),e),e+5,1),+pn(a.d).slice(i+1,i+15)+1==1e14&&(a=Ee(a,i+1,0)))),a.s=c,Oe=!0,h.rounding=o,Ee(a,i,o))};ce.toPrecision=function(t,e){var n,i=this,a=i.constructor;return t===void 0?n=Ar(i,i.e<=a.toExpNeg||i.e>=a.toExpPos):(Fn(t,1,Aa),e===void 0?e=a.rounding:Fn(e,0,8),i=Ee(new a(i),t,e),n=Ar(i,t<=i.e||i.e<=a.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n};ce.toSignificantDigits=ce.toSD=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(Fn(t,1,Aa),e===void 0?e=i.rounding:Fn(e,0,8)),Ee(new i(n),t,e)};ce.toString=function(){var t=this,e=t.constructor,n=Ar(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};ce.truncated=ce.trunc=function(){return Ee(new this.constructor(this),this.e+1,1)};ce.valueOf=ce.toJSON=function(){var t=this,e=t.constructor,n=Ar(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function pn(t){var e,n,i,a=t.length-1,o="",c=t[0];if(a>0){for(o+=c,e=1;e<a;e++)i=t[e]+"",n=Ie-i.length,n&&(o+=ea(n)),o+=i;c=t[e],i=c+"",n=Ie-i.length,n&&(o+=ea(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return o+c}function Fn(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ga+t)}function zu(t,e,n,i){var a,o,c,d;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=Ie,a=0):(a=Math.ceil((e+1)/Ie),e%=Ie),o=Zt(10,Ie-e),d=t[a]%o|0,i==null?e<3?(e==0?d=d/100|0:e==1&&(d=d/10|0),c=n<4&&d==99999||n>3&&d==49999||d==5e4||d==0):c=(n<4&&d+1==o||n>3&&d+1==o/2)&&(t[a+1]/o/100|0)==Zt(10,e-2)-1||(d==o/2||d==0)&&(t[a+1]/o/100|0)==0:e<4?(e==0?d=d/1e3|0:e==1?d=d/100|0:e==2&&(d=d/10|0),c=(i||n<4)&&d==9999||!i&&n>3&&d==4999):c=((i||n<4)&&d+1==o||!i&&n>3&&d+1==o/2)&&(t[a+1]/o/1e3|0)==Zt(10,e-3)-1,c}function mf(t,e,n){for(var i,a=[0],o,c=0,d=t.length;c<d;){for(o=a.length;o--;)a[o]*=e;for(a[0]+=X0.indexOf(t.charAt(c++)),i=0;i<a.length;i++)a[i]>n-1&&(a[i+1]===void 0&&(a[i+1]=0),a[i+1]+=a[i]/n|0,a[i]%=n)}return a.reverse()}function wj(t,e){var n,i,a;if(e.isZero())return e;i=e.d.length,i<32?(n=Math.ceil(i/3),a=(1/fm(4,n)).toString()):(n=16,a="2.3283064365386962890625e-10"),t.precision+=n,e=zl(t,1,e.times(a),new t(1));for(var o=n;o--;){var c=e.times(e);e=c.times(c).minus(c).times(8).plus(1)}return t.precision-=n,e}var yt=(function(){function t(i,a,o){var c,d=0,h=i.length;for(i=i.slice();h--;)c=i[h]*a+d,i[h]=c%o|0,d=c/o|0;return d&&i.unshift(d),i}function e(i,a,o,c){var d,h;if(o!=c)h=o>c?1:-1;else for(d=h=0;d<o;d++)if(i[d]!=a[d]){h=i[d]>a[d]?1:-1;break}return h}function n(i,a,o,c){for(var d=0;o--;)i[o]-=d,d=i[o]<a[o]?1:0,i[o]=d*c+i[o]-a[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,a,o,c,d,h){var f,g,b,_,E,k,A,R,L,z,V,G,ee,te,S,N,O,P,D,F,U=i.constructor,Ce=i.s==a.s?1:-1,xe=i.d,$=a.d;if(!xe||!xe[0]||!$||!$[0])return new U(!i.s||!a.s||(xe?$&&xe[0]==$[0]:!$)?NaN:xe&&xe[0]==0||!$?Ce*0:Ce/0);for(h?(E=1,g=i.e-a.e):(h=Fi,E=Ie,g=Tn(i.e/E)-Tn(a.e/E)),D=$.length,O=xe.length,L=new U(Ce),z=L.d=[],b=0;$[b]==(xe[b]||0);b++);if($[b]>(xe[b]||0)&&g--,o==null?(te=o=U.precision,c=U.rounding):d?te=o+(i.e-a.e)+1:te=o,te<0)z.push(1),k=!0;else{if(te=te/E+2|0,b=0,D==1){for(_=0,$=$[0],te++;(b<O||_)&&te--;b++)S=_*h+(xe[b]||0),z[b]=S/$|0,_=S%$|0;k=_||b<O}else{for(_=h/($[0]+1)|0,_>1&&($=t($,_,h),xe=t(xe,_,h),D=$.length,O=xe.length),N=D,V=xe.slice(0,D),G=V.length;G<D;)V[G++]=0;F=$.slice(),F.unshift(0),P=$[0],$[1]>=h/2&&++P;do _=0,f=e($,V,D,G),f<0?(ee=V[0],D!=G&&(ee=ee*h+(V[1]||0)),_=ee/P|0,_>1?(_>=h&&(_=h-1),A=t($,_,h),R=A.length,G=V.length,f=e(A,V,R,G),f==1&&(_--,n(A,D<R?F:$,R,h))):(_==0&&(f=_=1),A=$.slice()),R=A.length,R<G&&A.unshift(0),n(V,A,G,h),f==-1&&(G=V.length,f=e($,V,D,G),f<1&&(_++,n(V,D<G?F:$,G,h))),G=V.length):f===0&&(_++,V=[0]),z[b++]=_,f&&V[0]?V[G++]=xe[N]||0:(V=[xe[N]],G=1);while((N++<O||V[0]!==void 0)&&te--);k=V[0]!==void 0}z[0]||z.shift()}if(E==1)L.e=g,t2=k;else{for(b=1,_=z[0];_>=10;_/=10)b++;L.e=b+g*E-1,Ee(L,d?o+L.e+1:o,c,k)}return L}})();function Ee(t,e,n,i){var a,o,c,d,h,f,g,b,_,E=t.constructor;e:if(e!=null){if(b=t.d,!b)return t;for(a=1,d=b[0];d>=10;d/=10)a++;if(o=e-a,o<0)o+=Ie,c=e,g=b[_=0],h=g/Zt(10,a-c-1)%10|0;else if(_=Math.ceil((o+1)/Ie),d=b.length,_>=d)if(i){for(;d++<=_;)b.push(0);g=h=0,a=1,o%=Ie,c=o-Ie+1}else break e;else{for(g=d=b[_],a=1;d>=10;d/=10)a++;o%=Ie,c=o-Ie+a,h=c<0?0:g/Zt(10,a-c-1)%10|0}if(i=i||e<0||b[_+1]!==void 0||(c<0?g:g%Zt(10,a-c-1)),f=n<4?(h||i)&&(n==0||n==(t.s<0?3:2)):h>5||h==5&&(n==4||i||n==6&&(o>0?c>0?g/Zt(10,a-c):0:b[_-1])%10&1||n==(t.s<0?8:7)),e<1||!b[0])return b.length=0,f?(e-=t.e+1,b[0]=Zt(10,(Ie-e%Ie)%Ie),t.e=-e||0):b[0]=t.e=0,t;if(o==0?(b.length=_,d=1,_--):(b.length=_+1,d=Zt(10,Ie-o),b[_]=c>0?(g/Zt(10,a-c)%Zt(10,c)|0)*d:0),f)for(;;)if(_==0){for(o=1,c=b[0];c>=10;c/=10)o++;for(c=b[0]+=d,d=1;c>=10;c/=10)d++;o!=d&&(t.e++,b[0]==Fi&&(b[0]=1));break}else{if(b[_]+=d,b[_]!=Fi)break;b[_--]=0,d=1}for(o=b.length;b[--o]===0;)b.pop()}return Oe&&(t.e>E.maxE?(t.d=null,t.e=NaN):t.e<E.minE&&(t.e=0,t.d=[0])),t}function Ar(t,e,n){if(!t.isFinite())return c2(t);var i,a=t.e,o=pn(t.d),c=o.length;return e?(n&&(i=n-c)>0?o=o.charAt(0)+"."+o.slice(1)+ea(i):c>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):a<0?(o="0."+ea(-a-1)+o,n&&(i=n-c)>0&&(o+=ea(i))):a>=c?(o+=ea(a+1-c),n&&(i=n-a-1)>0&&(o=o+"."+ea(i))):((i=a+1)<c&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-c)>0&&(a+1===c&&(o+="."),o+=ea(i))),o}function hm(t,e){var n=t[0];for(e*=Ie;n>=10;n/=10)e++;return e}function Of(t,e,n){if(e>_j)throw Oe=!0,n&&(t.precision=n),Error(n2);return Ee(new t(Df),e,1,!0)}function gr(t,e,n){if(e>Z0)throw Error(n2);return Ee(new t(Mf),e,n,!0)}function a2(t){var e=t.length-1,n=e*Ie+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function ea(t){for(var e="";t--;)e+="0";return e}function o2(t,e,n,i){var a,o=new t(1),c=Math.ceil(i/Ie+4);for(Oe=!1;;){if(n%2&&(o=o.times(e),gT(o.d,c)&&(a=!0)),n=Tn(n/2),n===0){n=o.d.length-1,a&&o.d[n]===0&&++o.d[n];break}e=e.times(e),gT(e.d,c)}return Oe=!0,o}function pT(t){return t.d[t.d.length-1]&1}function l2(t,e,n){for(var i,a,o=new t(e[0]),c=0;++c<e.length;){if(a=new t(e[c]),!a.s){o=a;break}i=o.cmp(a),(i===n||i===0&&o.s===n)&&(o=a)}return o}function J0(t,e){var n,i,a,o,c,d,h,f=0,g=0,b=0,_=t.constructor,E=_.rounding,k=_.precision;if(!t.d||!t.d[0]||t.e>17)return new _(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(Oe=!1,h=k):h=e,d=new _(.03125);t.e>-2;)t=t.times(d),b+=5;for(i=Math.log(Zt(2,b))/Math.LN10*2+5|0,h+=i,n=o=c=new _(1),_.precision=h;;){if(o=Ee(o.times(t),h,1),n=n.times(++g),d=c.plus(yt(o,n,h,1)),pn(d.d).slice(0,h)===pn(c.d).slice(0,h)){for(a=b;a--;)c=Ee(c.times(c),h,1);if(e==null)if(f<3&&zu(c.d,h-i,E,f))_.precision=h+=10,n=o=d=new _(1),g=0,f++;else return Ee(c,_.precision=k,E,Oe=!0);else return _.precision=k,c}c=d}}function oa(t,e){var n,i,a,o,c,d,h,f,g,b,_,E=1,k=10,A=t,R=A.d,L=A.constructor,z=L.rounding,V=L.precision;if(A.s<0||!R||!R[0]||!A.e&&R[0]==1&&R.length==1)return new L(R&&!R[0]?-1/0:A.s!=1?NaN:R?0:A);if(e==null?(Oe=!1,g=V):g=e,L.precision=g+=k,n=pn(R),i=n.charAt(0),Math.abs(o=A.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)A=A.times(t),n=pn(A.d),i=n.charAt(0),E++;o=A.e,i>1?(A=new L("0."+n),o++):A=new L(i+"."+n.slice(1))}else return f=Of(L,g+2,V).times(o+""),A=oa(new L(i+"."+n.slice(1)),g-k).plus(f),L.precision=V,e==null?Ee(A,V,z,Oe=!0):A;for(b=A,h=c=A=yt(A.minus(1),A.plus(1),g,1),_=Ee(A.times(A),g,1),a=3;;){if(c=Ee(c.times(_),g,1),f=h.plus(yt(c,new L(a),g,1)),pn(f.d).slice(0,g)===pn(h.d).slice(0,g))if(h=h.times(2),o!==0&&(h=h.plus(Of(L,g+2,V).times(o+""))),h=yt(h,new L(E),g,1),e==null)if(zu(h.d,g-k,z,d))L.precision=g+=k,f=c=A=yt(b.minus(1),b.plus(1),g,1),_=Ee(A.times(A),g,1),a=d=1;else return Ee(h,L.precision=V,z,Oe=!0);else return L.precision=V,h;h=f,a+=2}}function c2(t){return String(t.s*t.s/0)}function pf(t,e){var n,i,a;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;i++);for(a=e.length;e.charCodeAt(a-1)===48;--a);if(e=e.slice(i,a),e){if(a-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%Ie,n<0&&(i+=Ie),i<a){for(i&&t.d.push(+e.slice(0,i)),a-=Ie;i<a;)t.d.push(+e.slice(i,i+=Ie));e=e.slice(i),i=Ie-e.length}else i-=a;for(;i--;)e+="0";t.d.push(+e),Oe&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function xj(t,e){var n,i,a,o,c,d,h,f,g;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),s2.test(e))return pf(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(yj.test(e))n=16,e=e.toLowerCase();else if(gj.test(e))n=2;else if(vj.test(e))n=8;else throw Error(ga+e);for(o=e.search(/p/i),o>0?(h=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),c=o>=0,i=t.constructor,c&&(e=e.replace(".",""),d=e.length,o=d-o,a=o2(i,new i(n),o,o*2)),f=mf(e,n,Fi),g=f.length-1,o=g;f[o]===0;--o)f.pop();return o<0?new i(t.s*0):(t.e=hm(f,g),t.d=f,Oe=!1,c&&(t=yt(t,a,d*4)),h&&(t=t.times(Math.abs(h)<54?Zt(2,h):pr.pow(2,h))),Oe=!0,t)}function Tj(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:zl(t,2,e,e);n=1.4*Math.sqrt(i),n=n>16?16:n|0,e=e.times(1/fm(5,n)),e=zl(t,2,e,e);for(var a,o=new t(5),c=new t(16),d=new t(20);n--;)a=e.times(e),e=e.times(o.plus(a.times(c.times(a).minus(d))));return e}function zl(t,e,n,i,a){var o,c,d,h,f=t.precision,g=Math.ceil(f/Ie);for(Oe=!1,h=n.times(n),d=new t(i);;){if(c=yt(d.times(h),new t(e++*e++),f,1),d=a?i.plus(c):i.minus(c),i=yt(c.times(h),new t(e++*e++),f,1),c=d.plus(i),c.d[g]!==void 0){for(o=g;c.d[o]===d.d[o]&&o--;);if(o==-1)break}o=d,d=i,i=c,c=o}return Oe=!0,c.d.length=g+1,c}function fm(t,e){for(var n=t;--e;)n*=t;return n}function u2(t,e){var n,i=e.s<0,a=gr(t,t.precision,1),o=a.times(.5);if(e=e.abs(),e.lte(o))return es=i?4:1,e;if(n=e.divToInt(a),n.isZero())es=i?3:2;else{if(e=e.minus(n.times(a)),e.lte(o))return es=pT(n)?i?2:3:i?4:1,e;es=pT(n)?i?1:4:i?3:2}return e.minus(a).abs()}function mv(t,e,n,i){var a,o,c,d,h,f,g,b,_,E=t.constructor,k=n!==void 0;if(k?(Fn(n,1,Aa),i===void 0?i=E.rounding:Fn(i,0,8)):(n=E.precision,i=E.rounding),!t.isFinite())g=c2(t);else{for(g=Ar(t),c=g.indexOf("."),k?(a=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):a=e,c>=0&&(g=g.replace(".",""),_=new E(1),_.e=g.length-c,_.d=mf(Ar(_),10,a),_.e=_.d.length),b=mf(g,10,a),o=h=b.length;b[--h]==0;)b.pop();if(!b[0])g=k?"0p+0":"0";else{if(c<0?o--:(t=new E(t),t.d=b,t.e=o,t=yt(t,_,n,i,0,a),b=t.d,o=t.e,f=t2),c=b[n],d=a/2,f=f||b[n+1]!==void 0,f=i<4?(c!==void 0||f)&&(i===0||i===(t.s<0?3:2)):c>d||c===d&&(i===4||f||i===6&&b[n-1]&1||i===(t.s<0?8:7)),b.length=n,f)for(;++b[--n]>a-1;)b[n]=0,n||(++o,b.unshift(1));for(h=b.length;!b[h-1];--h);for(c=0,g="";c<h;c++)g+=X0.charAt(b[c]);if(k){if(h>1)if(e==16||e==8){for(c=e==16?4:3,--h;h%c;h++)g+="0";for(b=mf(g,a,e),h=b.length;!b[h-1];--h);for(c=1,g="1.";c<h;c++)g+=X0.charAt(b[c])}else g=g.charAt(0)+"."+g.slice(1);g=g+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)g="0"+g;g="0."+g}else if(++o>h)for(o-=h;o--;)g+="0";else o<h&&(g=g.slice(0,o)+"."+g.slice(o))}g=(e==16?"0x":e==2?"0b":e==8?"0o":"")+g}return t.s<0?"-"+g:g}function gT(t,e){if(t.length>e)return t.length=e,!0}function Ej(t){return new this(t).abs()}function Sj(t){return new this(t).acos()}function Aj(t){return new this(t).acosh()}function Cj(t,e){return new this(t).plus(e)}function Nj(t){return new this(t).asin()}function Rj(t){return new this(t).asinh()}function Ij(t){return new this(t).atan()}function kj(t){return new this(t).atanh()}function Dj(t,e){t=new this(t),e=new this(e);var n,i=this.precision,a=this.rounding,o=i+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=gr(this,o,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?gr(this,i,a):new this(0),n.s=t.s):!t.d||e.isZero()?(n=gr(this,o,1).times(.5),n.s=t.s):e.s<0?(this.precision=o,this.rounding=1,n=this.atan(yt(t,e,o,1)),e=gr(this,o,1),this.precision=i,this.rounding=a,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(yt(t,e,o,1)),n}function Mj(t){return new this(t).cbrt()}function Oj(t){return Ee(t=new this(t),t.e+1,2)}function Vj(t,e,n){return new this(t).clamp(e,n)}function jj(t){if(!t||typeof t!="object")throw Error(dm+"Object expected");var e,n,i,a=t.defaults===!0,o=["precision",1,Aa,"rounding",0,8,"toExpNeg",-Rl,0,"toExpPos",0,Rl,"maxE",0,Rl,"minE",-Rl,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],a&&(this[n]=W0[n]),(i=t[n])!==void 0)if(Tn(i)===i&&i>=o[e+1]&&i<=o[e+2])this[n]=i;else throw Error(ga+n+": "+i);if(n="crypto",a&&(this[n]=W0[n]),(i=t[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(i2);else this[n]=!1;else throw Error(ga+n+": "+i);return this}function Pj(t){return new this(t).cos()}function Lj(t){return new this(t).cosh()}function d2(t){var e,n,i;function a(o){var c,d,h,f=this;if(!(f instanceof a))return new a(o);if(f.constructor=a,yT(o)){f.s=o.s,Oe?!o.d||o.e>a.maxE?(f.e=NaN,f.d=null):o.e<a.minE?(f.e=0,f.d=[0]):(f.e=o.e,f.d=o.d.slice()):(f.e=o.e,f.d=o.d?o.d.slice():o.d);return}if(h=typeof o,h==="number"){if(o===0){f.s=1/o<0?-1:1,f.e=0,f.d=[0];return}if(o<0?(o=-o,f.s=-1):f.s=1,o===~~o&&o<1e7){for(c=0,d=o;d>=10;d/=10)c++;Oe?c>a.maxE?(f.e=NaN,f.d=null):c<a.minE?(f.e=0,f.d=[0]):(f.e=c,f.d=[o]):(f.e=c,f.d=[o]);return}if(o*0!==0){o||(f.s=NaN),f.e=NaN,f.d=null;return}return pf(f,o.toString())}if(h==="string")return(d=o.charCodeAt(0))===45?(o=o.slice(1),f.s=-1):(d===43&&(o=o.slice(1)),f.s=1),s2.test(o)?pf(f,o):xj(f,o);if(h==="bigint")return o<0?(o=-o,f.s=-1):f.s=1,pf(f,o.toString());throw Error(ga+o)}if(a.prototype=ce,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=jj,a.clone=d2,a.isDecimal=yT,a.abs=Ej,a.acos=Sj,a.acosh=Aj,a.add=Cj,a.asin=Nj,a.asinh=Rj,a.atan=Ij,a.atanh=kj,a.atan2=Dj,a.cbrt=Mj,a.ceil=Oj,a.clamp=Vj,a.cos=Pj,a.cosh=Lj,a.div=Uj,a.exp=zj,a.floor=Bj,a.hypot=Fj,a.ln=qj,a.log=Hj,a.log10=Gj,a.log2=$j,a.max=Kj,a.min=Yj,a.mod=Qj,a.mul=Xj,a.pow=Wj,a.random=Zj,a.round=Jj,a.sign=e5,a.sin=t5,a.sinh=n5,a.sqrt=i5,a.sub=r5,a.sum=s5,a.tan=a5,a.tanh=o5,a.trunc=l5,t===void 0&&(t={}),t&&t.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return a.config(t),a}function Uj(t,e){return new this(t).div(e)}function zj(t){return new this(t).exp()}function Bj(t){return Ee(t=new this(t),t.e+1,3)}function Fj(){var t,e,n=new this(0);for(Oe=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return Oe=!0,new this(1/0);n=e}return Oe=!0,n.sqrt()}function yT(t){return t instanceof pr||t&&t.toStringTag===r2||!1}function qj(t){return new this(t).ln()}function Hj(t,e){return new this(t).log(e)}function $j(t){return new this(t).log(2)}function Gj(t){return new this(t).log(10)}function Kj(){return l2(this,arguments,-1)}function Yj(){return l2(this,arguments,1)}function Qj(t,e){return new this(t).mod(e)}function Xj(t,e){return new this(t).mul(e)}function Wj(t,e){return new this(t).pow(e)}function Zj(t){var e,n,i,a,o=0,c=new this(1),d=[];if(t===void 0?t=this.precision:Fn(t,1,Aa),i=Math.ceil(t/Ie),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)a=e[o],a>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:d[o++]=a%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)a=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),a>=214e7?crypto.randomBytes(4).copy(e,o):(d.push(a%1e7),o+=4);o=i/4}else throw Error(i2);else for(;o<i;)d[o++]=Math.random()*1e7|0;for(i=d[--o],t%=Ie,i&&t&&(a=Zt(10,Ie-t),d[o]=(i/a|0)*a);d[o]===0;o--)d.pop();if(o<0)n=0,d=[0];else{for(n=-1;d[0]===0;n-=Ie)d.shift();for(i=1,a=d[0];a>=10;a/=10)i++;i<Ie&&(n-=Ie-i)}return c.e=n,c.d=d,c}function Jj(t){return Ee(t=new this(t),t.e+1,this.rounding)}function e5(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function t5(t){return new this(t).sin()}function n5(t){return new this(t).sinh()}function i5(t){return new this(t).sqrt()}function r5(t,e){return new this(t).sub(e)}function s5(){var t=0,e=arguments,n=new this(e[t]);for(Oe=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return Oe=!0,Ee(n,this.precision,this.rounding)}function a5(t){return new this(t).tan()}function o5(t){return new this(t).tanh()}function l5(t){return Ee(t=new this(t),t.e+1,1)}ce[Symbol.for("nodejs.util.inspect.custom")]=ce.toString;ce[Symbol.toStringTag]="Decimal";var pr=ce.constructor=d2(W0);Df=new pr(Df);Mf=new pr(Mf);const c5=()=>{};var vT={};const h2=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},u5=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const o=t[n++];e[i++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=t[n++],c=t[n++],d=t[n++],h=((a&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],c=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},f2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const o=t[a],c=a+1<t.length,d=c?t[a+1]:0,h=a+2<t.length,f=h?t[a+2]:0,g=o>>2,b=(o&3)<<4|d>>4;let _=(d&15)<<2|f>>6,E=f&63;h||(E=64,c||(_=64)),i.push(n[g],n[b],n[_],n[E])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const o=n[t.charAt(a++)],d=a<t.length?n[t.charAt(a)]:0;++a;const f=a<t.length?n[t.charAt(a)]:64;++a;const b=a<t.length?n[t.charAt(a)]:64;if(++a,o==null||d==null||f==null||b==null)throw new d5;const _=o<<2|d>>4;if(i.push(_),f!==64){const E=d<<4&240|f>>2;if(i.push(E),b!==64){const k=f<<6&192|b;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class d5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h5=function(t){const e=h2(t);return f2.encodeByteArray(e,!0)},Vf=function(t){return h5(t).replace(/\./g,"")},m2=function(t){try{return f2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function f5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const m5=()=>f5().__FIREBASE_DEFAULTS__,p5=()=>{if(typeof process>"u"||typeof vT>"u")return;const t=vT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},g5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&m2(t[1]);return e&&JSON.parse(e)},mm=()=>{try{return c5()||m5()||p5()||g5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},p2=t=>mm()?.emulatorHosts?.[t],y5=t=>{const e=p2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},g2=()=>mm()?.config,y2=t=>mm()?.[`_${t}`];class v5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function nc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function v2(t){return(await fetch(t,{credentials:"include"})).ok}function b5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Vf(JSON.stringify(n)),Vf(JSON.stringify(c)),""].join(".")}const Au={};function _5(){const t={prod:[],emulator:[]};for(const e of Object.keys(Au))Au[e]?t.emulator.push(e):t.prod.push(e);return t}function w5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let bT=!1;function b2(t,e){if(typeof window>"u"||typeof document>"u"||!nc(window.location.host)||Au[t]===e||Au[t]||bT)return;Au[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=_5().prod.length>0;function c(){const _=document.getElementById(i);_&&_.remove()}function d(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{bT=!0,c()},_}function g(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function b(){const _=w5(i),E=n("text"),k=document.getElementById(E)||document.createElement("span"),A=n("learnmore"),R=document.getElementById(A)||document.createElement("a"),L=n("preprendIcon"),z=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const V=_.element;d(V),g(R,A);const G=f();h(z,L),V.append(z,k,R,G),document.body.appendChild(V)}o?(k.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function x5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function T5(){const t=mm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function E5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function S5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function A5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function C5(){const t=En();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function N5(){return!T5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R5(){try{return typeof indexedDB=="object"}catch{return!1}}function I5(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}const k5="FirebaseError";class ps extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=k5,Object.setPrototypeOf(this,ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sd.prototype.create)}}class sd{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?D5(o,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new ps(a,d,i)}}function D5(t,e){return t.replace(M5,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const M5=/\{\$([^}]+)}/g;function O5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const o=t[a],c=e[a];if(_T(o)&&_T(c)){if(!wo(o,c))return!1}else if(o!==c)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function _T(t){return t!==null&&typeof t=="object"}function ad(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function pu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,o]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function gu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function V5(t,e){const n=new j5(t,e);return n.subscribe.bind(n)}class j5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let a;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");P5(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:i},a.next===void 0&&(a.next=a0),a.error===void 0&&(a.error=a0),a.complete===void 0&&(a.complete=a0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function a0(){}function At(t){return t&&t._delegate?t._delegate:t}class xo{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const uo="[DEFAULT]";class L5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new v5;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z5(e))try{this.getOrInitializeService({instanceIdentifier:uo})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:a});i.resolve(o)}catch{}}}}clearInstance(e=uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uo){return this.instances.has(e)}getOptions(e=uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);i===d&&c.resolve(a)}return a}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:U5(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=uo){return this.component?this.component.multipleInstances?e:uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U5(t){return t===uo?void 0:t}function z5(t){return t.instantiationMode==="EAGER"}class B5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new L5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const F5={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},q5=Ke.INFO,H5={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},$5=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=H5[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pv{constructor(e){this.name=e,this._logLevel=q5,this._logHandler=$5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const G5=(t,e)=>e.some(n=>t instanceof n);let wT,xT;function K5(){return wT||(wT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y5(){return xT||(xT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _2=new WeakMap,ey=new WeakMap,w2=new WeakMap,o0=new WeakMap,gv=new WeakMap;function Q5(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{n(ca(t.result)),a()},c=()=>{i(t.error),a()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&_2.set(n,t)}).catch(()=>{}),gv.set(e,t),e}function X5(t){if(ey.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{n(),a()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});ey.set(t,e)}let ty={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ey.get(t);if(e==="objectStoreNames")return t.objectStoreNames||w2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ca(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function W5(t){ty=t(ty)}function Z5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(l0(this),e,...n);return w2.set(i,e.sort?e.sort():[e]),ca(i)}:Y5().includes(t)?function(...e){return t.apply(l0(this),e),ca(_2.get(this))}:function(...e){return ca(t.apply(l0(this),e))}}function J5(t){return typeof t=="function"?Z5(t):(t instanceof IDBTransaction&&X5(t),G5(t,K5())?new Proxy(t,ty):t)}function ca(t){if(t instanceof IDBRequest)return Q5(t);if(o0.has(t))return o0.get(t);const e=J5(t);return e!==t&&(o0.set(t,e),gv.set(e,t)),e}const l0=t=>gv.get(t);function e6(t,e,{blocked:n,upgrade:i,blocking:a,terminated:o}={}){const c=indexedDB.open(t,e),d=ca(c);return i&&c.addEventListener("upgradeneeded",h=>{i(ca(c.result),h.oldVersion,h.newVersion,ca(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),d.then(h=>{o&&h.addEventListener("close",()=>o()),a&&h.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const t6=["get","getKey","getAll","getAllKeys","count"],n6=["put","add","delete","clear"],c0=new Map;function TT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(c0.get(e))return c0.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=n6.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||t6.includes(n)))return;const o=async function(c,...d){const h=this.transaction(c,a?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(d.shift())),(await Promise.all([f[n](...d),a&&h.done]))[0]};return c0.set(e,o),o}W5(t=>({...t,get:(e,n,i)=>TT(e,n)||t.get(e,n,i),has:(e,n)=>!!TT(e,n)||t.has(e,n)}));class i6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(r6(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function r6(t){return t.getComponent()?.type==="VERSION"}const ny="@firebase/app",ET="0.14.6";const us=new pv("@firebase/app"),s6="@firebase/app-compat",a6="@firebase/analytics-compat",o6="@firebase/analytics",l6="@firebase/app-check-compat",c6="@firebase/app-check",u6="@firebase/auth",d6="@firebase/auth-compat",h6="@firebase/database",f6="@firebase/data-connect",m6="@firebase/database-compat",p6="@firebase/functions",g6="@firebase/functions-compat",y6="@firebase/installations",v6="@firebase/installations-compat",b6="@firebase/messaging",_6="@firebase/messaging-compat",w6="@firebase/performance",x6="@firebase/performance-compat",T6="@firebase/remote-config",E6="@firebase/remote-config-compat",S6="@firebase/storage",A6="@firebase/storage-compat",C6="@firebase/firestore",N6="@firebase/ai",R6="@firebase/firestore-compat",I6="firebase",k6="12.6.0";const iy="[DEFAULT]",D6={[ny]:"fire-core",[s6]:"fire-core-compat",[o6]:"fire-analytics",[a6]:"fire-analytics-compat",[c6]:"fire-app-check",[l6]:"fire-app-check-compat",[u6]:"fire-auth",[d6]:"fire-auth-compat",[h6]:"fire-rtdb",[f6]:"fire-data-connect",[m6]:"fire-rtdb-compat",[p6]:"fire-fn",[g6]:"fire-fn-compat",[y6]:"fire-iid",[v6]:"fire-iid-compat",[b6]:"fire-fcm",[_6]:"fire-fcm-compat",[w6]:"fire-perf",[x6]:"fire-perf-compat",[T6]:"fire-rc",[E6]:"fire-rc-compat",[S6]:"fire-gcs",[A6]:"fire-gcs-compat",[C6]:"fire-fst",[R6]:"fire-fst-compat",[N6]:"fire-vertex","fire-js":"fire-js",[I6]:"fire-js-all"};const jf=new Map,M6=new Map,ry=new Map;function ST(t,e){try{t.container.addComponent(e)}catch(n){us.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bl(t){const e=t.name;if(ry.has(e))return us.debug(`There were multiple attempts to register component ${e}.`),!1;ry.set(e,t);for(const n of jf.values())ST(n,t);for(const n of M6.values())ST(n,t);return!0}function yv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bi(t){return t==null?!1:t.settings!==void 0}const O6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ua=new sd("app","Firebase",O6);class V6{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new xo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ua.create("app-deleted",{appName:this._name})}}const ic=k6;function x2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:iy,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw ua.create("bad-app-name",{appName:String(a)});if(n||(n=g2()),!n)throw ua.create("no-options");const o=jf.get(a);if(o){if(wo(n,o.options)&&wo(i,o.config))return o;throw ua.create("duplicate-app",{appName:a})}const c=new B5(a);for(const h of ry.values())c.addComponent(h);const d=new V6(n,i,c);return jf.set(a,d),d}function T2(t=iy){const e=jf.get(t);if(!e&&t===iy&&g2())return x2();if(!e)throw ua.create("no-app",{appName:t});return e}function da(t,e,n){let i=D6[t]??t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),us.warn(c.join(" "));return}Bl(new xo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const j6="firebase-heartbeat-database",P6=1,Bu="firebase-heartbeat-store";let u0=null;function E2(){return u0||(u0=e6(j6,P6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bu)}catch(n){console.warn(n)}}}}).catch(t=>{throw ua.create("idb-open",{originalErrorMessage:t.message})})),u0}async function L6(t){try{const n=(await E2()).transaction(Bu),i=await n.objectStore(Bu).get(S2(t));return await n.done,i}catch(e){if(e instanceof ps)us.warn(e.message);else{const n=ua.create("idb-get",{originalErrorMessage:e?.message});us.warn(n.message)}}}async function AT(t,e){try{const i=(await E2()).transaction(Bu,"readwrite");await i.objectStore(Bu).put(e,S2(t)),await i.done}catch(n){if(n instanceof ps)us.warn(n.message);else{const i=ua.create("idb-set",{originalErrorMessage:n?.message});us.warn(i.message)}}}function S2(t){return`${t.name}!${t.options.appId}`}const U6=1024,z6=30;class B6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new q6(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=CT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>z6){const a=H6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){us.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=CT(),{heartbeatsToSend:n,unsentEntries:i}=F6(this._heartbeatsCache.heartbeats),a=Vf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return us.warn(e),""}}}function CT(){return new Date().toISOString().substring(0,10)}function F6(t,e=U6){const n=[];let i=t.slice();for(const a of t){const o=n.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),NT(n)>e){o.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),NT(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class q6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return R5()?I5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await L6(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return AT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return AT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function NT(t){return Vf(JSON.stringify({version:2,heartbeats:t})).length}function H6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}function $6(t){Bl(new xo("platform-logger",e=>new i6(e),"PRIVATE")),Bl(new xo("heartbeat",e=>new B6(e),"PRIVATE")),da(ny,ET,t),da(ny,ET,"esm2020"),da("fire-js","")}$6("");function A2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const G6=A2,C2=new sd("auth","Firebase",A2());const Pf=new pv("@firebase/auth");function K6(t,...e){Pf.logLevel<=Ke.WARN&&Pf.warn(`Auth (${ic}): ${t}`,...e)}function gf(t,...e){Pf.logLevel<=Ke.ERROR&&Pf.error(`Auth (${ic}): ${t}`,...e)}function qi(t,...e){throw vv(t,...e)}function _r(t,...e){return vv(t,...e)}function N2(t,e,n){const i={...G6(),[e]:n};return new sd("auth","Firebase",i).create(e,{appName:t.name})}function ss(t){return N2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return C2.create(t,...e)}function ke(t,e,...n){if(!t)throw vv(e,...n)}function ts(t){const e="INTERNAL ASSERTION FAILED: "+t;throw gf(e),new Error(e)}function ds(t,e){t||ts(e)}function sy(){return typeof self<"u"&&self.location?.href||""}function Y6(){return RT()==="http:"||RT()==="https:"}function RT(){return typeof self<"u"&&self.location?.protocol||null}function Q6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y6()||S5()||"connection"in navigator)?navigator.onLine:!0}function X6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class od{constructor(e,n){this.shortDelay=e,this.longDelay=n,ds(n>e,"Short delay should be less than long delay!"),this.isMobile=x5()||A5()}get(){return Q6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bv(t,e){ds(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class R2{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const W6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Z6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],J6=new od(3e4,6e4);function gs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ir(t,e,n,i,a={}){return I2(t,a,async()=>{let o={},c={};i&&(e==="GET"?c=i:o={body:JSON.stringify(i)});const d=ad({key:t.config.apiKey,...c}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return E5()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&nc(t.emulatorConfig.host)&&(f.credentials="include"),R2.fetch()(await k2(t,t.config.apiHost,n,d),f)})}async function I2(t,e,n){t._canInitEmulator=!1;const i={...W6,...e};try{const a=new tP(t),o=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Jh(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const d=o.ok?c.errorMessage:c.error.message,[h,f]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jh(t,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Jh(t,"email-already-in-use",c);if(h==="USER_DISABLED")throw Jh(t,"user-disabled",c);const g=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw N2(t,g,f);qi(t,g)}}catch(a){if(a instanceof ps)throw a;qi(t,"network-request-failed",{message:String(a)})}}async function ld(t,e,n,i,a={}){const o=await Ir(t,e,n,i,a);return"mfaPendingCredential"in o&&qi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function k2(t,e,n,i){const a=`${e}${n}?${i}`,o=t,c=o.config.emulator?bv(t.config,a):`${t.config.apiScheme}://${a}`;return Z6.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function eP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(_r(this.auth,"network-request-failed")),J6.get())})}}function Jh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const a=_r(t,e,i);return a.customData._tokenResponse=n,a}function IT(t){return t!==void 0&&t.enterprise!==void 0}class nP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return eP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function iP(t,e){return Ir(t,"GET","/v2/recaptchaConfig",gs(t,e))}async function rP(t,e){return Ir(t,"POST","/v1/accounts:delete",e)}async function Lf(t,e){return Ir(t,"POST","/v1/accounts:lookup",e)}function Cu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sP(t,e=!1){const n=At(t),i=await n.getIdToken(e),a=_v(i);ke(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o?.sign_in_provider;return{claims:a,token:i,authTime:Cu(d0(a.auth_time)),issuedAtTime:Cu(d0(a.iat)),expirationTime:Cu(d0(a.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function d0(t){return Number(t)*1e3}function _v(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return gf("JWT malformed, contained fewer than 3 sections"),null;try{const a=m2(n);return a?JSON.parse(a):(gf("Failed to decode base64 JWT payload"),null)}catch(a){return gf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function kT(t){const e=_v(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Fl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ps&&aP(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function aP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class oP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ay{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cu(this.lastLoginAt),this.creationTime=Cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Uf(t){const e=t.auth,n=await t.getIdToken(),i=await Fl(t,Lf(e,{idToken:n}));ke(i?.users.length,e,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=a.providerUserInfo?.length?D2(a.providerUserInfo):[],c=cP(t.providerData,o),d=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!c?.length,f=d?h:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new ay(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function lP(t){const e=At(t);await Uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cP(t,e){return[...t.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function D2(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function uP(t,e){const n=await I2(t,{},async()=>{const i=ad({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=t.config,c=await k2(t,a,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:i};return t.emulatorConfig&&nc(t.emulatorConfig.host)&&(h.credentials="include"),R2.fetch()(c,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dP(t,e){return Ir(t,"POST","/v2/accounts:revokeToken",gs(t,e))}class Ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const n=kT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:a,expiresIn:o}=await uP(e,n);this.updateTokensAndExpiration(i,a,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:a,expirationTime:o}=n,c=new Ml;return i&&(ke(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(ke(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),o&&(ke(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ml,this.toJSON())}_performRefresh(){return ts("not implemented")}}function Xs(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zi{constructor({uid:e,auth:n,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new oP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ay(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Fl(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sP(this,e)}reload(){return lP(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Uf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bi(this.auth.app))return Promise.reject(ss(this.auth));const e=await this.getIdToken();return await Fl(this,rP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,a=n.email??void 0,o=n.phoneNumber??void 0,c=n.photoURL??void 0,d=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:b,emailVerified:_,isAnonymous:E,providerData:k,stsTokenManager:A}=n;ke(b&&A,e,"internal-error");const R=Ml.fromJSON(this.name,A);ke(typeof b=="string",e,"internal-error"),Xs(i,e.name),Xs(a,e.name),ke(typeof _=="boolean",e,"internal-error"),ke(typeof E=="boolean",e,"internal-error"),Xs(o,e.name),Xs(c,e.name),Xs(d,e.name),Xs(h,e.name),Xs(f,e.name),Xs(g,e.name);const L=new zi({uid:b,auth:e,email:a,emailVerified:_,displayName:i,isAnonymous:E,photoURL:c,phoneNumber:o,tenantId:d,stsTokenManager:R,createdAt:f,lastLoginAt:g});return k&&Array.isArray(k)&&(L.providerData=k.map(z=>({...z}))),h&&(L._redirectEventId=h),L}static async _fromIdTokenResponse(e,n,i=!1){const a=new Ml;a.updateFromServerResponse(n);const o=new zi({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Uf(o),o}static async _fromGetAccountInfoResponse(e,n,i){const a=n.users[0];ke(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?D2(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!o?.length,d=new Ml;d.updateFromIdToken(i);const h=new zi({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new ay(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!o?.length};return Object.assign(h,f),h}}const DT=new Map;function ns(t){ds(t instanceof Function,"Expected a class definition");let e=DT.get(t);return e?(ds(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,DT.set(t,e),e)}class M2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}M2.type="NONE";const MT=M2;function yf(t,e,n){return`firebase:${t}:${e}:${n}`}class Ol{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:a,name:o}=this.auth;this.fullUserKey=yf(this.userKey,a.apiKey,o),this.fullPersistenceKey=yf("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Lf(this.auth,{idToken:e}).catch(()=>{});return n?zi._fromGetAccountInfoResponse(this.auth,n,e):null}return zi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ol(ns(MT),e,i);const a=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=a[0]||ns(MT);const c=yf(i,e.config.apiKey,e.name);let d=null;for(const f of n)try{const g=await f._get(c);if(g){let b;if(typeof g=="string"){const _=await Lf(e,{idToken:g}).catch(()=>{});if(!_)break;b=await zi._fromGetAccountInfoResponse(e,_,g)}else b=zi._fromJSON(e,g);f!==o&&(d=b),o=f;break}}catch{}const h=a.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ol(o,e,i):(o=h[0],d&&await o._set(c,d.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new Ol(o,e,i))}}function OT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(P2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(O2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(U2(e))return"Blackberry";if(z2(e))return"Webos";if(V2(e))return"Safari";if((e.includes("chrome/")||j2(e))&&!e.includes("edge/"))return"Chrome";if(L2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function O2(t=En()){return/firefox\//i.test(t)}function V2(t=En()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j2(t=En()){return/crios\//i.test(t)}function P2(t=En()){return/iemobile/i.test(t)}function L2(t=En()){return/android/i.test(t)}function U2(t=En()){return/blackberry/i.test(t)}function z2(t=En()){return/webos/i.test(t)}function wv(t=En()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hP(t=En()){return wv(t)&&!!window.navigator?.standalone}function fP(){return C5()&&document.documentMode===10}function B2(t=En()){return wv(t)||L2(t)||z2(t)||U2(t)||/windows phone/i.test(t)||P2(t)}function F2(t,e=[]){let n;switch(t){case"Browser":n=OT(En());break;case"Worker":n=`${OT(En())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ic}/${i}`}class mP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((c,d)=>{try{const h=e(o);c(h)}catch(h){d(h)}});i.onAbort=n,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function pP(t,e={}){return Ir(t,"GET","/v2/passwordPolicy",gs(t,e))}const gP=6;class yP{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??gP,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class vP{constructor(e,n,i,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VT(this),this.idTokenSubscription=new VT(this),this.beforeStateQueue=new mP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=C2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ns(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ol.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Lf(this,{idToken:e}),i=await zi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(bi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&d?.user&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Uf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=X6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bi(this.app))return Promise.reject(ss(this));const n=e?At(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bi(this.app)?Promise.reject(ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bi(this.app)?Promise.reject(ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pP(this),n=new yP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sd("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await dP(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ns(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await Ol.create(this,[ns(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,a){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(d,this,"internal-error"),d.then(()=>{c||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,a);return()=>{c=!0,h()}}else{const h=e.addObserver(n);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=F2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&K6(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ca(t){return At(t)}class VT{constructor(e){this.auth=e,this.observer=null,this.addObserver=V5(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let pm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bP(t){pm=t}function q2(t){return pm.loadJS(t)}function _P(){return pm.recaptchaEnterpriseScript}function wP(){return pm.gapiScript}function xP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class TP{constructor(){this.enterprise=new EP}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class EP{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const SP="recaptcha-enterprise",H2="NO_RECAPTCHA";class AP{constructor(e){this.type=SP,this.auth=Ca(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,d)=>{iP(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new nP(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(h=>{d(h)})})}function a(o,c,d){const h=window.grecaptcha;IT(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(H2)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new TP().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(d=>{if(!n&&IT(window.grecaptcha))a(d,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=_P();h.length!==0&&(h+=d),q2(h).then(()=>{a(d,o,c)}).catch(f=>{c(f)})}}).catch(d=>{c(d)})})}}async function jT(t,e,n,i=!1,a=!1){const o=new AP(t);let c;if(a)c=H2;else try{c=await o.verify(n)}catch{c=await o.verify(n,!0)}const d={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,f=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function zf(t,e,n,i,a){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await jT(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await jT(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(o)})}function CP(t,e){const n=yv(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),o=n.getOptions();if(wo(o,e??{}))return a;qi(a,"already-initialized")}return n.initialize({options:e})}function NP(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(ns);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function RP(t,e,n){const i=Ca(t);ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,o=$2(e),{host:c,port:d}=IP(e),h=d===null?"":`:${d}`,f={url:`${o}//${c}${h}/`},g=Object.freeze({host:c,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){ke(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ke(wo(f,i.config.emulator)&&wo(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,nc(c)?(v2(`${o}//${c}${h}`),b2("Auth",!0)):kP()}function $2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IP(t){const e=$2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const o=a[1];return{host:o,port:PT(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:PT(c)}}}function PT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class xv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ts("not implemented")}_getIdTokenResponse(e){return ts("not implemented")}_linkToIdToken(e,n){return ts("not implemented")}_getReauthenticationResolver(e){return ts("not implemented")}}async function DP(t,e){return Ir(t,"POST","/v1/accounts:signUp",e)}async function MP(t,e){return ld(t,"POST","/v1/accounts:signInWithPassword",gs(t,e))}async function G2(t,e){return Ir(t,"POST","/v1/accounts:sendOobCode",gs(t,e))}async function OP(t,e){return G2(t,e)}async function VP(t,e){return G2(t,e)}async function jP(t,e){return ld(t,"POST","/v1/accounts:signInWithEmailLink",gs(t,e))}async function PP(t,e){return ld(t,"POST","/v1/accounts:signInWithEmailLink",gs(t,e))}class Fu extends xv{constructor(e,n,i,a=null){super("password",i),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Fu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Fu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zf(e,n,"signInWithPassword",MP);case"emailLink":return jP(e,{email:this._email,oobCode:this._password});default:qi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zf(e,i,"signUpPassword",DP);case"emailLink":return PP(e,{idToken:n,email:this._email,oobCode:this._password});default:qi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vl(t,e){return ld(t,"POST","/v1/accounts:signInWithIdp",gs(t,e))}const LP="http://localhost";class To extends xv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new To(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...o}=n;if(!i||!a)return null;const c=new To(i,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Vl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Vl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vl(e,n)}buildRequest(){const e={requestUri:LP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ad(n)}return e}}function UP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zP(t){const e=pu(gu(t)).link,n=e?pu(gu(e)).deep_link_id:null,i=pu(gu(t)).deep_link_id;return(i?pu(gu(i)).link:null)||i||n||e||t}class Tv{constructor(e){const n=pu(gu(e)),i=n.apiKey??null,a=n.oobCode??null,o=UP(n.mode??null);ke(i&&a&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=zP(e);try{return new Tv(n)}catch{return null}}}class No{constructor(){this.providerId=No.PROVIDER_ID}static credential(e,n){return Fu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Tv.parseLink(n);return ke(i,"argument-error"),Fu._fromEmailAndCode(e,i.code,i.tenantId)}}No.PROVIDER_ID="password";No.EMAIL_PASSWORD_SIGN_IN_METHOD="password";No.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class K2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cd extends K2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ta extends cd{constructor(){super("facebook.com")}static credential(e){return To._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.FACEBOOK_SIGN_IN_METHOD="facebook.com";ta.PROVIDER_ID="facebook.com";class na extends cd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return To._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return na.credential(n,i)}catch{return null}}}na.GOOGLE_SIGN_IN_METHOD="google.com";na.PROVIDER_ID="google.com";class ia extends cd{constructor(){super("github.com")}static credential(e){return To._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ia.credential(e.oauthAccessToken)}catch{return null}}}ia.GITHUB_SIGN_IN_METHOD="github.com";ia.PROVIDER_ID="github.com";class ra extends cd{constructor(){super("twitter.com")}static credential(e,n){return To._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ra.credential(n,i)}catch{return null}}}ra.TWITTER_SIGN_IN_METHOD="twitter.com";ra.PROVIDER_ID="twitter.com";async function BP(t,e){return ld(t,"POST","/v1/accounts:signUp",gs(t,e))}class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,a=!1){const o=await zi._fromIdTokenResponse(e,i,a),c=LT(i);return new Eo({user:o,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const a=LT(i);return new Eo({user:e,providerId:a,_tokenResponse:i,operationType:n})}}function LT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Bf extends ps{constructor(e,n,i,a){super(n.code,n.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Bf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,a){return new Bf(e,n,i,a)}}function Y2(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Bf._fromErrorAndOperation(t,o,e,i):o})}async function FP(t,e,n=!1){const i=await Fl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Eo._forOperation(t,"link",i)}async function Q2(t,e,n=!1){const{auth:i}=t;if(bi(i.app))return Promise.reject(ss(i));const a="reauthenticate";try{const o=await Fl(t,Y2(i,a,e,t),n);ke(o.idToken,i,"internal-error");const c=_v(o.idToken);ke(c,i,"internal-error");const{sub:d}=c;return ke(t.uid===d,i,"user-mismatch"),Eo._forOperation(t,a,o)}catch(o){throw o?.code==="auth/user-not-found"&&qi(i,"user-mismatch"),o}}async function X2(t,e,n=!1){if(bi(t.app))return Promise.reject(ss(t));const i="signIn",a=await Y2(t,i,e),o=await Eo._fromIdTokenResponse(t,i,a);return n||await t._updateCurrentUser(o.user),o}async function qP(t,e){return X2(Ca(t),e)}async function HP(t,e){return Q2(At(t),e)}async function W2(t){const e=Ca(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $P(t,e,n){const i=Ca(t);await zf(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",VP)}async function GP(t,e,n){if(bi(t.app))return Promise.reject(ss(t));const i=Ca(t),c=await zf(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BP).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&W2(t),h}),d=await Eo._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function KP(t,e,n){return bi(t.app)?Promise.reject(ss(t)):qP(At(t),No.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&W2(t),i})}async function UT(t,e){const n=At(t),a={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:o}=await OP(n.auth,a);o!==t.email&&await t.reload()}async function YP(t,e){return Ir(t,"POST","/v1/accounts:update",e)}async function QP(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=At(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await Fl(i,YP(i.auth,o));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const d=i.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function XP(t,e,n,i){return At(t).onIdTokenChanged(e,n,i)}function WP(t,e,n){return At(t).beforeAuthStateChanged(e,n)}function ZP(t,e,n,i){return At(t).onAuthStateChanged(e,n,i)}function zT(t){return At(t).signOut()}async function JP(t){return At(t).delete()}const Ff="__sak";class Z2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const e9=1e3,t9=10;class J2 extends Z2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),a=this.localCache[n];i!==a&&e(n,a,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,d,h)=>{this.notifyListeners(c,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);fP()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,t9):a()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},e9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}J2.type="LOCAL";const n9=J2;class eC extends Z2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}eC.type="SESSION";const tC=eC;function i9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class gm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const i=new gm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:a,data:o}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async f=>f(n.origin,o)),h=await i9(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gm.receivers=[];function Ev(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}class r9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((d,h)=>{const f=Ev("",20);a.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(b){const _=b;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(_.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function wr(){return window}function s9(t){wr().location.href=t}function nC(){return typeof wr().WorkerGlobalScope<"u"&&typeof wr().importScripts=="function"}async function a9(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function o9(){return navigator?.serviceWorker?.controller||null}function l9(){return nC()?self:null}const iC="firebaseLocalStorageDb",c9=1,qf="firebaseLocalStorage",rC="fbase_key";class ud{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ym(t,e){return t.transaction([qf],e?"readwrite":"readonly").objectStore(qf)}function u9(){const t=indexedDB.deleteDatabase(iC);return new ud(t).toPromise()}function oy(){const t=indexedDB.open(iC,c9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(qf,{keyPath:rC})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(qf)?e(i):(i.close(),await u9(),e(await oy()))})})}async function BT(t,e,n){const i=ym(t,!0).put({[rC]:e,value:n});return new ud(i).toPromise()}async function d9(t,e){const n=ym(t,!1).get(e),i=await new ud(n).toPromise();return i===void 0?null:i.value}function FT(t,e){const n=ym(t,!0).delete(e);return new ud(n).toPromise()}const h9=800,f9=3;class sC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>f9)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gm._getInstance(l9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await a9(),!this.activeServiceWorker)return;this.sender=new r9(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||o9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await oy();return await BT(e,Ff,"1"),await FT(e,Ff),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>BT(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>d9(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>FT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=ym(a,!1).getAll();return new ud(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sC.type="LOCAL";const m9=sC;new od(3e4,6e4);function p9(t,e){return e?ns(e):(ke(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Sv extends xv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function g9(t){return X2(t.auth,new Sv(t),t.bypassAuthState)}function y9(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),Q2(n,new Sv(t),t.bypassAuthState)}async function v9(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),FP(n,new Sv(t),t.bypassAuthState)}class aC{constructor(e,n,i,a,o=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:a,tenantId:o,error:c,type:d}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g9;case"linkViaPopup":case"linkViaRedirect":return v9;case"reauthViaPopup":case"reauthViaRedirect":return y9;default:qi(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const b9=new od(2e3,1e4);class Il extends aC{constructor(e,n,i,a,o){super(e,n,a,o),this.provider=i,this.authWindow=null,this.pollId=null,Il.currentPopupAction&&Il.currentPopupAction.cancel(),Il.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const e=Ev();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Il.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b9.get())};e()}}Il.currentPopupAction=null;const _9="pendingRedirect",vf=new Map;class w9 extends aC{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=vf.get(this.auth._key());if(!e){try{const i=await x9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}vf.set(this.auth._key(),e)}return this.bypassAuthState||vf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function x9(t,e){const n=S9(e),i=E9(t);if(!await i._isAvailable())return!1;const a=await i._get(n)==="true";return await i._remove(n),a}function T9(t,e){vf.set(t._key(),e)}function E9(t){return ns(t._redirectPersistence)}function S9(t){return yf(_9,t.config.apiKey,t.name)}async function A9(t,e,n=!1){if(bi(t.app))return Promise.reject(ss(t));const i=Ca(t),a=p9(i,e),c=await new w9(i,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const C9=600*1e3;class N9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!R9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!oC(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(_r(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=C9&&this.cachedEventUids.clear(),this.cachedEventUids.has(qT(e))}saveEventToCache(e){this.cachedEventUids.add(qT(e)),this.lastProcessedEventTime=Date.now()}}function qT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function oC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function R9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oC(t);default:return!1}}async function I9(t,e={}){return Ir(t,"GET","/v1/projects",e)}const k9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,D9=/^https?/;async function M9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await I9(t);for(const n of e)try{if(O9(n))return}catch{}qi(t,"unauthorized-domain")}function O9(t){const e=sy(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!D9.test(n))return!1;if(k9.test(t))return i===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const V9=new od(3e4,6e4);function HT(){const t=wr().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function j9(t){return new Promise((e,n)=>{function i(){HT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HT(),n(_r(t,"network-request-failed"))},timeout:V9.get()})}if(wr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wr().gapi?.load)i();else{const a=xP("iframefcb");return wr()[a]=()=>{gapi.load?i():n(_r(t,"network-request-failed"))},q2(`${wP()}?onload=${a}`).catch(o=>n(o))}}).catch(e=>{throw bf=null,e})}let bf=null;function P9(t){return bf=bf||j9(t),bf}const L9=new od(5e3,15e3),U9="__/auth/iframe",z9="emulator/auth/iframe",B9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q9(t){const e=t.config;ke(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bv(e,z9):`https://${t.config.authDomain}/${U9}`,i={apiKey:e.apiKey,appName:t.name,v:ic},a=F9.get(t.config.apiHost);a&&(i.eid=a);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${ad(i).slice(1)}`}async function H9(t){const e=await P9(t),n=wr().gapi;return ke(n,t,"internal-error"),e.open({where:document.body,url:q9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B9,dontclear:!0},i=>new Promise(async(a,o)=>{await i.restyle({setHideOnLeave:!1});const c=_r(t,"network-request-failed"),d=wr().setTimeout(()=>{o(c)},L9.get());function h(){wr().clearTimeout(d),a(i)}i.ping(h).then(h,()=>{o(c)})}))}const $9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G9=500,K9=600,Y9="_blank",Q9="http://localhost";class $T{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X9(t,e,n,i=G9,a=K9){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const h={...$9,width:i.toString(),height:a.toString(),top:o,left:c},f=En().toLowerCase();n&&(d=j2(f)?Y9:n),O2(f)&&(e=e||Q9,h.scrollbars="yes");const g=Object.entries(h).reduce((_,[E,k])=>`${_}${E}=${k},`,"");if(hP(f)&&d!=="_self")return W9(e||"",d),new $T(null);const b=window.open(e||"",d,g);ke(b,t,"popup-blocked");try{b.focus()}catch{}return new $T(b)}function W9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const Z9="__/auth/handler",J9="emulator/auth/handler",eL=encodeURIComponent("fac");async function GT(t,e,n,i,a,o){ke(t.config.authDomain,t,"auth-domain-config-required"),ke(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ic,eventId:a};if(e instanceof K2){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",O5(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,b]of Object.entries({}))c[g]=b}if(e instanceof cd){const g=e.getScopes().filter(b=>b!=="");g.length>0&&(c.scopes=g.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const g of Object.keys(d))d[g]===void 0&&delete d[g];const h=await t._getAppCheckToken(),f=h?`#${eL}=${encodeURIComponent(h)}`:"";return`${tL(t)}?${ad(d).slice(1)}${f}`}function tL({config:t}){return t.emulator?bv(t,J9):`https://${t.authDomain}/${Z9}`}const h0="webStorageSupport";class nL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tC,this._completeRedirectFn=A9,this._overrideRedirectResult=T9}async _openPopup(e,n,i,a){ds(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await GT(e,n,i,sy(),a);return X9(e,o,Ev())}async _openRedirect(e,n,i,a){await this._originValidation(e);const o=await GT(e,n,i,sy(),a);return s9(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:o}=this.eventManagers[n];return a?Promise.resolve(a):(ds(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await H9(e),i=new N9(e);return n.register("authEvent",a=>(ke(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(h0,{type:h0},a=>{const o=a?.[0]?.[h0];o!==void 0&&n(!!o),qi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=M9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return B2()||V2()||wv()}}const iL=nL;var KT="@firebase/auth",YT="1.11.1";class rL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function sL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aL(t){Bl(new xo("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;ke(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F2(t)},f=new vP(i,a,o,h);return NP(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Bl(new xo("auth-internal",e=>{const n=Ca(e.getProvider("auth").getImmediate());return(i=>new rL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),da(KT,YT,sL(t)),da(KT,YT,"esm2020")}const oL=300,lL=y2("authIdTokenMaxAge")||oL;let QT=null;const cL=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>lL)return;const a=n?.token;QT!==a&&(QT=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function uL(t=T2()){const e=yv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=CP(t,{popupRedirectResolver:iL,persistence:[m9,n9,tC]}),i=y2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=cL(o.toString());WP(n,c,()=>c(n.currentUser)),XP(n,d=>c(d))}}const a=p2("auth");return a&&RP(n,`http://${a}`),n}function dL(){return document.getElementsByTagName("head")?.[0]??document}bP({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=a=>{const o=_r("internal-error");o.customData=a,n(o)},i.type="text/javascript",i.charset="UTF-8",dL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aL("Browser");var hL="firebase",fL="12.6.0";da(hL,fL,"app");var XT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ha,lC;(function(){var t;function e(S,N){function O(){}O.prototype=N.prototype,S.F=N.prototype,S.prototype=new O,S.prototype.constructor=S,S.D=function(P,D,F){for(var U=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)U[Ce-2]=arguments[Ce];return N.prototype[D].apply(P,U)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(S,N,O){O||(O=0);const P=Array(16);if(typeof N=="string")for(var D=0;D<16;++D)P[D]=N.charCodeAt(O++)|N.charCodeAt(O++)<<8|N.charCodeAt(O++)<<16|N.charCodeAt(O++)<<24;else for(D=0;D<16;++D)P[D]=N[O++]|N[O++]<<8|N[O++]<<16|N[O++]<<24;N=S.g[0],O=S.g[1],D=S.g[2];let F=S.g[3],U;U=N+(F^O&(D^F))+P[0]+3614090360&4294967295,N=O+(U<<7&4294967295|U>>>25),U=F+(D^N&(O^D))+P[1]+3905402710&4294967295,F=N+(U<<12&4294967295|U>>>20),U=D+(O^F&(N^O))+P[2]+606105819&4294967295,D=F+(U<<17&4294967295|U>>>15),U=O+(N^D&(F^N))+P[3]+3250441966&4294967295,O=D+(U<<22&4294967295|U>>>10),U=N+(F^O&(D^F))+P[4]+4118548399&4294967295,N=O+(U<<7&4294967295|U>>>25),U=F+(D^N&(O^D))+P[5]+1200080426&4294967295,F=N+(U<<12&4294967295|U>>>20),U=D+(O^F&(N^O))+P[6]+2821735955&4294967295,D=F+(U<<17&4294967295|U>>>15),U=O+(N^D&(F^N))+P[7]+4249261313&4294967295,O=D+(U<<22&4294967295|U>>>10),U=N+(F^O&(D^F))+P[8]+1770035416&4294967295,N=O+(U<<7&4294967295|U>>>25),U=F+(D^N&(O^D))+P[9]+2336552879&4294967295,F=N+(U<<12&4294967295|U>>>20),U=D+(O^F&(N^O))+P[10]+4294925233&4294967295,D=F+(U<<17&4294967295|U>>>15),U=O+(N^D&(F^N))+P[11]+2304563134&4294967295,O=D+(U<<22&4294967295|U>>>10),U=N+(F^O&(D^F))+P[12]+1804603682&4294967295,N=O+(U<<7&4294967295|U>>>25),U=F+(D^N&(O^D))+P[13]+4254626195&4294967295,F=N+(U<<12&4294967295|U>>>20),U=D+(O^F&(N^O))+P[14]+2792965006&4294967295,D=F+(U<<17&4294967295|U>>>15),U=O+(N^D&(F^N))+P[15]+1236535329&4294967295,O=D+(U<<22&4294967295|U>>>10),U=N+(D^F&(O^D))+P[1]+4129170786&4294967295,N=O+(U<<5&4294967295|U>>>27),U=F+(O^D&(N^O))+P[6]+3225465664&4294967295,F=N+(U<<9&4294967295|U>>>23),U=D+(N^O&(F^N))+P[11]+643717713&4294967295,D=F+(U<<14&4294967295|U>>>18),U=O+(F^N&(D^F))+P[0]+3921069994&4294967295,O=D+(U<<20&4294967295|U>>>12),U=N+(D^F&(O^D))+P[5]+3593408605&4294967295,N=O+(U<<5&4294967295|U>>>27),U=F+(O^D&(N^O))+P[10]+38016083&4294967295,F=N+(U<<9&4294967295|U>>>23),U=D+(N^O&(F^N))+P[15]+3634488961&4294967295,D=F+(U<<14&4294967295|U>>>18),U=O+(F^N&(D^F))+P[4]+3889429448&4294967295,O=D+(U<<20&4294967295|U>>>12),U=N+(D^F&(O^D))+P[9]+568446438&4294967295,N=O+(U<<5&4294967295|U>>>27),U=F+(O^D&(N^O))+P[14]+3275163606&4294967295,F=N+(U<<9&4294967295|U>>>23),U=D+(N^O&(F^N))+P[3]+4107603335&4294967295,D=F+(U<<14&4294967295|U>>>18),U=O+(F^N&(D^F))+P[8]+1163531501&4294967295,O=D+(U<<20&4294967295|U>>>12),U=N+(D^F&(O^D))+P[13]+2850285829&4294967295,N=O+(U<<5&4294967295|U>>>27),U=F+(O^D&(N^O))+P[2]+4243563512&4294967295,F=N+(U<<9&4294967295|U>>>23),U=D+(N^O&(F^N))+P[7]+1735328473&4294967295,D=F+(U<<14&4294967295|U>>>18),U=O+(F^N&(D^F))+P[12]+2368359562&4294967295,O=D+(U<<20&4294967295|U>>>12),U=N+(O^D^F)+P[5]+4294588738&4294967295,N=O+(U<<4&4294967295|U>>>28),U=F+(N^O^D)+P[8]+2272392833&4294967295,F=N+(U<<11&4294967295|U>>>21),U=D+(F^N^O)+P[11]+1839030562&4294967295,D=F+(U<<16&4294967295|U>>>16),U=O+(D^F^N)+P[14]+4259657740&4294967295,O=D+(U<<23&4294967295|U>>>9),U=N+(O^D^F)+P[1]+2763975236&4294967295,N=O+(U<<4&4294967295|U>>>28),U=F+(N^O^D)+P[4]+1272893353&4294967295,F=N+(U<<11&4294967295|U>>>21),U=D+(F^N^O)+P[7]+4139469664&4294967295,D=F+(U<<16&4294967295|U>>>16),U=O+(D^F^N)+P[10]+3200236656&4294967295,O=D+(U<<23&4294967295|U>>>9),U=N+(O^D^F)+P[13]+681279174&4294967295,N=O+(U<<4&4294967295|U>>>28),U=F+(N^O^D)+P[0]+3936430074&4294967295,F=N+(U<<11&4294967295|U>>>21),U=D+(F^N^O)+P[3]+3572445317&4294967295,D=F+(U<<16&4294967295|U>>>16),U=O+(D^F^N)+P[6]+76029189&4294967295,O=D+(U<<23&4294967295|U>>>9),U=N+(O^D^F)+P[9]+3654602809&4294967295,N=O+(U<<4&4294967295|U>>>28),U=F+(N^O^D)+P[12]+3873151461&4294967295,F=N+(U<<11&4294967295|U>>>21),U=D+(F^N^O)+P[15]+530742520&4294967295,D=F+(U<<16&4294967295|U>>>16),U=O+(D^F^N)+P[2]+3299628645&4294967295,O=D+(U<<23&4294967295|U>>>9),U=N+(D^(O|~F))+P[0]+4096336452&4294967295,N=O+(U<<6&4294967295|U>>>26),U=F+(O^(N|~D))+P[7]+1126891415&4294967295,F=N+(U<<10&4294967295|U>>>22),U=D+(N^(F|~O))+P[14]+2878612391&4294967295,D=F+(U<<15&4294967295|U>>>17),U=O+(F^(D|~N))+P[5]+4237533241&4294967295,O=D+(U<<21&4294967295|U>>>11),U=N+(D^(O|~F))+P[12]+1700485571&4294967295,N=O+(U<<6&4294967295|U>>>26),U=F+(O^(N|~D))+P[3]+2399980690&4294967295,F=N+(U<<10&4294967295|U>>>22),U=D+(N^(F|~O))+P[10]+4293915773&4294967295,D=F+(U<<15&4294967295|U>>>17),U=O+(F^(D|~N))+P[1]+2240044497&4294967295,O=D+(U<<21&4294967295|U>>>11),U=N+(D^(O|~F))+P[8]+1873313359&4294967295,N=O+(U<<6&4294967295|U>>>26),U=F+(O^(N|~D))+P[15]+4264355552&4294967295,F=N+(U<<10&4294967295|U>>>22),U=D+(N^(F|~O))+P[6]+2734768916&4294967295,D=F+(U<<15&4294967295|U>>>17),U=O+(F^(D|~N))+P[13]+1309151649&4294967295,O=D+(U<<21&4294967295|U>>>11),U=N+(D^(O|~F))+P[4]+4149444226&4294967295,N=O+(U<<6&4294967295|U>>>26),U=F+(O^(N|~D))+P[11]+3174756917&4294967295,F=N+(U<<10&4294967295|U>>>22),U=D+(N^(F|~O))+P[2]+718787259&4294967295,D=F+(U<<15&4294967295|U>>>17),U=O+(F^(D|~N))+P[9]+3951481745&4294967295,S.g[0]=S.g[0]+N&4294967295,S.g[1]=S.g[1]+(D+(U<<21&4294967295|U>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+F&4294967295}i.prototype.v=function(S,N){N===void 0&&(N=S.length);const O=N-this.blockSize,P=this.C;let D=this.h,F=0;for(;F<N;){if(D==0)for(;F<=O;)a(this,S,F),F+=this.blockSize;if(typeof S=="string"){for(;F<N;)if(P[D++]=S.charCodeAt(F++),D==this.blockSize){a(this,P),D=0;break}}else for(;F<N;)if(P[D++]=S[F++],D==this.blockSize){a(this,P),D=0;break}}this.h=D,this.o+=N},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var N=1;N<S.length-8;++N)S[N]=0;N=this.o*8;for(var O=S.length-8;O<S.length;++O)S[O]=N&255,N/=256;for(this.v(S),S=Array(16),N=0,O=0;O<4;++O)for(let P=0;P<32;P+=8)S[N++]=this.g[O]>>>P&255;return S};function o(S,N){var O=d;return Object.prototype.hasOwnProperty.call(O,S)?O[S]:O[S]=N(S)}function c(S,N){this.h=N;const O=[];let P=!0;for(let D=S.length-1;D>=0;D--){const F=S[D]|0;P&&F==N||(O[D]=F,P=!1)}this.g=O}var d={};function h(S){return-128<=S&&S<128?o(S,function(N){return new c([N|0],N<0?-1:0)}):new c([S|0],S<0?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return b;if(S<0)return R(f(-S));const N=[];let O=1;for(let P=0;S>=O;P++)N[P]=S/O|0,O*=4294967296;return new c(N,0)}function g(S,N){if(S.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(S.charAt(0)=="-")return R(g(S.substring(1),N));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=f(Math.pow(N,8));let P=b;for(let F=0;F<S.length;F+=8){var D=Math.min(8,S.length-F);const U=parseInt(S.substring(F,F+D),N);D<8?(D=f(Math.pow(N,D)),P=P.j(D).add(f(U))):(P=P.j(O),P=P.add(f(U)))}return P}var b=h(0),_=h(1),E=h(16777216);t=c.prototype,t.m=function(){if(A(this))return-R(this).m();let S=0,N=1;for(let O=0;O<this.g.length;O++){const P=this.i(O);S+=(P>=0?P:4294967296+P)*N,N*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(k(this))return"0";if(A(this))return"-"+R(this).toString(S);const N=f(Math.pow(S,6));var O=this;let P="";for(;;){const D=G(O,N).g;O=L(O,D.j(N));let F=((O.g.length>0?O.g[0]:O.h)>>>0).toString(S);if(O=D,k(O))return F+P;for(;F.length<6;)F="0"+F;P=F+P}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function k(S){if(S.h!=0)return!1;for(let N=0;N<S.g.length;N++)if(S.g[N]!=0)return!1;return!0}function A(S){return S.h==-1}t.l=function(S){return S=L(this,S),A(S)?-1:k(S)?0:1};function R(S){const N=S.g.length,O=[];for(let P=0;P<N;P++)O[P]=~S.g[P];return new c(O,~S.h).add(_)}t.abs=function(){return A(this)?R(this):this},t.add=function(S){const N=Math.max(this.g.length,S.g.length),O=[];let P=0;for(let D=0;D<=N;D++){let F=P+(this.i(D)&65535)+(S.i(D)&65535),U=(F>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);P=U>>>16,F&=65535,U&=65535,O[D]=U<<16|F}return new c(O,O[O.length-1]&-2147483648?-1:0)};function L(S,N){return S.add(R(N))}t.j=function(S){if(k(this)||k(S))return b;if(A(this))return A(S)?R(this).j(R(S)):R(R(this).j(S));if(A(S))return R(this.j(R(S)));if(this.l(E)<0&&S.l(E)<0)return f(this.m()*S.m());const N=this.g.length+S.g.length,O=[];for(var P=0;P<2*N;P++)O[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<S.g.length;D++){const F=this.i(P)>>>16,U=this.i(P)&65535,Ce=S.i(D)>>>16,xe=S.i(D)&65535;O[2*P+2*D]+=U*xe,z(O,2*P+2*D),O[2*P+2*D+1]+=F*xe,z(O,2*P+2*D+1),O[2*P+2*D+1]+=U*Ce,z(O,2*P+2*D+1),O[2*P+2*D+2]+=F*Ce,z(O,2*P+2*D+2)}for(S=0;S<N;S++)O[S]=O[2*S+1]<<16|O[2*S];for(S=N;S<2*N;S++)O[S]=0;return new c(O,0)};function z(S,N){for(;(S[N]&65535)!=S[N];)S[N+1]+=S[N]>>>16,S[N]&=65535,N++}function V(S,N){this.g=S,this.h=N}function G(S,N){if(k(N))throw Error("division by zero");if(k(S))return new V(b,b);if(A(S))return N=G(R(S),N),new V(R(N.g),R(N.h));if(A(N))return N=G(S,R(N)),new V(R(N.g),N.h);if(S.g.length>30){if(A(S)||A(N))throw Error("slowDivide_ only works with positive integers.");for(var O=_,P=N;P.l(S)<=0;)O=ee(O),P=ee(P);var D=te(O,1),F=te(P,1);for(P=te(P,2),O=te(O,2);!k(P);){var U=F.add(P);U.l(S)<=0&&(D=D.add(O),F=U),P=te(P,1),O=te(O,1)}return N=L(S,D.j(N)),new V(D,N)}for(D=b;S.l(N)>=0;){for(O=Math.max(1,Math.floor(S.m()/N.m())),P=Math.ceil(Math.log(O)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),F=f(O),U=F.j(N);A(U)||U.l(S)>0;)O-=P,F=f(O),U=F.j(N);k(F)&&(F=_),D=D.add(F),S=L(S,U)}return new V(D,S)}t.B=function(S){return G(this,S).h},t.and=function(S){const N=Math.max(this.g.length,S.g.length),O=[];for(let P=0;P<N;P++)O[P]=this.i(P)&S.i(P);return new c(O,this.h&S.h)},t.or=function(S){const N=Math.max(this.g.length,S.g.length),O=[];for(let P=0;P<N;P++)O[P]=this.i(P)|S.i(P);return new c(O,this.h|S.h)},t.xor=function(S){const N=Math.max(this.g.length,S.g.length),O=[];for(let P=0;P<N;P++)O[P]=this.i(P)^S.i(P);return new c(O,this.h^S.h)};function ee(S){const N=S.g.length+1,O=[];for(let P=0;P<N;P++)O[P]=S.i(P)<<1|S.i(P-1)>>>31;return new c(O,S.h)}function te(S,N){const O=N>>5;N%=32;const P=S.g.length-O,D=[];for(let F=0;F<P;F++)D[F]=N>0?S.i(F+O)>>>N|S.i(F+O+1)<<32-N:S.i(F+O);return new c(D,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,lC=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,ha=c}).apply(typeof XT<"u"?XT:typeof self<"u"?self:typeof window<"u"?window:{});var ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var cC,yu,uC,_f,ly,dC,hC,fC;(function(){var t,e=Object.defineProperty;function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof ef=="object"&&ef];for(var w=0;w<m.length;++w){var T=m[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=n(this);function a(m,w){if(w)e:{var T=i;m=m.split(".");for(var I=0;I<m.length-1;I++){var K=m[I];if(!(K in T))break e;T=T[K]}m=m[m.length-1],I=T[m],w=w(I),w!=I&&w!=null&&e(T,m,{configurable:!0,writable:!0,value:w})}}a("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(m){return m||function(w){var T=[],I;for(I in w)Object.prototype.hasOwnProperty.call(w,I)&&T.push([I,w[I]]);return T}});var o=o||{},c=this||self;function d(m){var w=typeof m;return w=="object"&&m!=null||w=="function"}function h(m,w,T){return m.call.apply(m.bind,arguments)}function f(m,w,T){return f=h,f.apply(null,arguments)}function g(m,w){var T=Array.prototype.slice.call(arguments,1);return function(){var I=T.slice();return I.push.apply(I,arguments),m.apply(this,I)}}function b(m,w){function T(){}T.prototype=w.prototype,m.Z=w.prototype,m.prototype=new T,m.prototype.constructor=m,m.Ob=function(I,K,W){for(var fe=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)fe[Ue-2]=arguments[Ue];return w.prototype[K].apply(I,fe)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function E(m){const w=m.length;if(w>0){const T=Array(w);for(let I=0;I<w;I++)T[I]=m[I];return T}return[]}function k(m,w){for(let I=1;I<arguments.length;I++){const K=arguments[I];var T=typeof K;if(T=T!="object"?T:K?Array.isArray(K)?"array":T:"null",T=="array"||T=="object"&&typeof K.length=="number"){T=m.length||0;const W=K.length||0;m.length=T+W;for(let fe=0;fe<W;fe++)m[T+fe]=K[fe]}else m.push(K)}}class A{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function R(m){c.setTimeout(()=>{throw m},0)}function L(){var m=S;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}class z{constructor(){this.h=this.g=null}add(w,T){const I=V.get();I.set(w,T),this.h?this.h.next=I:this.g=I,this.h=I}}var V=new A(()=>new G,m=>m.reset());class G{constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,te=!1,S=new z,N=()=>{const m=Promise.resolve(void 0);ee=()=>{m.then(O)}};function O(){for(var m;m=L();){try{m.h.call(m.g)}catch(T){R(T)}var w=V;w.j(m),w.h<100&&(w.h++,m.next=w.g,w.g=m)}te=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const T=()=>{};c.addEventListener("test",T,w),c.removeEventListener("test",T,w)}catch{}return m})();function U(m){return/^[\s\xa0]*$/.test(m)}function Ce(m,w){D.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,w)}b(Ce,D),Ce.prototype.init=function(m,w){const T=this.type=m.type,I=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget,w||(T=="mouseover"?w=m.fromElement:T=="mouseout"&&(w=m.toElement)),this.relatedTarget=w,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var xe="closure_listenable_"+(Math.random()*1e6|0),$=0;function le(m,w,T,I,K){this.listener=m,this.proxy=null,this.src=w,this.type=T,this.capture=!!I,this.ha=K,this.key=++$,this.da=this.fa=!1}function me(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Te(m,w,T){for(const I in m)w.call(T,m[I],I,m)}function ae(m,w){for(const T in m)w.call(void 0,m[T],T,m)}function j(m){const w={};for(const T in m)w[T]=m[T];return w}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(m,w){let T,I;for(let K=1;K<arguments.length;K++){I=arguments[K];for(T in I)m[T]=I[T];for(let W=0;W<Z.length;W++)T=Z[W],Object.prototype.hasOwnProperty.call(I,T)&&(m[T]=I[T])}}function he(m){this.src=m,this.g={},this.h=0}he.prototype.add=function(m,w,T,I,K){const W=m.toString();m=this.g[W],m||(m=this.g[W]=[],this.h++);const fe=be(m,w,I,K);return fe>-1?(w=m[fe],T||(w.fa=!1)):(w=new le(w,this.src,W,!!I,K),w.fa=T,m.push(w)),w};function ge(m,w){const T=w.type;if(T in m.g){var I=m.g[T],K=Array.prototype.indexOf.call(I,w,void 0),W;(W=K>=0)&&Array.prototype.splice.call(I,K,1),W&&(me(w),m.g[T].length==0&&(delete m.g[T],m.h--))}}function be(m,w,T,I){for(let K=0;K<m.length;++K){const W=m[K];if(!W.da&&W.listener==w&&W.capture==!!T&&W.ha==I)return K}return-1}var we="closure_lm_"+(Math.random()*1e6|0),tt={};function de(m,w,T,I,K){if(Array.isArray(w)){for(let W=0;W<w.length;W++)de(m,w[W],T,I,K);return null}return T=Ne(T),m&&m[xe]?m.J(w,T,d(I)?!!I.capture:!1,K):nt(m,w,T,!1,I,K)}function nt(m,w,T,I,K,W){if(!w)throw Error("Invalid event type");const fe=d(K)?!!K.capture:!!K;let Ue=kr(m);if(Ue||(m[we]=Ue=new he(m)),T=Ue.add(w,T,I,fe,W),T.proxy)return T;if(I=ut(),T.proxy=I,I.src=m,I.listener=T,m.addEventListener)F||(K=fe),K===void 0&&(K=!1),m.addEventListener(w.toString(),I,K);else if(m.attachEvent)m.attachEvent(ni(w.toString()),I);else if(m.addListener&&m.removeListener)m.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ut(){function m(T){return w.call(m.src,m.listener,T)}const w=Ia;return m}function In(m,w,T,I,K){if(Array.isArray(w))for(var W=0;W<w.length;W++)In(m,w[W],T,I,K);else I=d(I)?!!I.capture:!!I,T=Ne(T),m&&m[xe]?(m=m.i,W=String(w).toString(),W in m.g&&(w=m.g[W],T=be(w,T,I,K),T>-1&&(me(w[T]),Array.prototype.splice.call(w,T,1),w.length==0&&(delete m.g[W],m.h--)))):m&&(m=kr(m))&&(w=m.g[w.toString()],m=-1,w&&(m=be(w,T,I,K)),(T=m>-1?w[m]:null)&&ti(T))}function ti(m){if(typeof m!="number"&&m&&!m.da){var w=m.src;if(w&&w[xe])ge(w.i,m);else{var T=m.type,I=m.proxy;w.removeEventListener?w.removeEventListener(T,I,m.capture):w.detachEvent?w.detachEvent(ni(T),I):w.addListener&&w.removeListener&&w.removeListener(I),(T=kr(w))?(ge(T,m),T.h==0&&(T.src=null,w[we]=null)):me(m)}}}function ni(m){return m in tt?tt[m]:tt[m]="on"+m}function Ia(m,w){if(m.da)m=!0;else{w=new Ce(w,this);const T=m.listener,I=m.ha||m.src;m.fa&&ti(m),m=T.call(I,w)}return m}function kr(m){return m=m[we],m instanceof he?m:null}var ka="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ne(m){return typeof m=="function"?m:(m[ka]||(m[ka]=function(w){return m.handleEvent(w)}),m[ka])}function Le(){P.call(this),this.i=new he(this),this.M=this,this.G=null}b(Le,P),Le.prototype[xe]=!0,Le.prototype.removeEventListener=function(m,w,T,I){In(this,m,w,T,I)};function pt(m,w){var T,I=m.G;if(I)for(T=[];I;I=I.G)T.push(I);if(m=m.M,I=w.type||w,typeof w=="string")w=new D(w,m);else if(w instanceof D)w.target=w.target||m;else{var K=w;w=new D(I,m),ue(w,K)}K=!0;let W,fe;if(T)for(fe=T.length-1;fe>=0;fe--)W=w.g=T[fe],K=sn(W,I,!0,w)&&K;if(W=w.g=m,K=sn(W,I,!0,w)&&K,K=sn(W,I,!1,w)&&K,T)for(fe=0;fe<T.length;fe++)W=w.g=T[fe],K=sn(W,I,!1,w)&&K}Le.prototype.N=function(){if(Le.Z.N.call(this),this.i){var m=this.i;for(const w in m.g){const T=m.g[w];for(let I=0;I<T.length;I++)me(T[I]);delete m.g[w],m.h--}}this.G=null},Le.prototype.J=function(m,w,T,I){return this.i.add(String(m),w,!1,T,I)},Le.prototype.K=function(m,w,T,I){return this.i.add(String(m),w,!0,T,I)};function sn(m,w,T,I){if(w=m.i.g[String(w)],!w)return!0;w=w.concat();let K=!0;for(let W=0;W<w.length;++W){const fe=w[W];if(fe&&!fe.da&&fe.capture==T){const Ue=fe.listener,Ot=fe.ha||fe.src;fe.fa&&ge(m.i,fe),K=Ue.call(Ot,I)!==!1&&K}}return K&&!I.defaultPrevented}function qn(m,w){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:c.setTimeout(m,w||0)}function vd(m){m.g=qn(()=>{m.g=null,m.i&&(m.i=!1,vd(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}class Sn extends P{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:vd(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Da(m){P.call(this),this.h=m,this.g={}}b(Da,P);var cc=[];function uc(m){Te(m.g,function(w,T){this.g.hasOwnProperty(T)&&ti(w)},m),m.g={}}Da.prototype.N=function(){Da.Z.N.call(this),uc(this)},Da.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vs=c.JSON.stringify,zm=c.JSON.parse,bd=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function _d(){}function wd(){}var Ai={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function an(){D.call(this,"d")}b(an,D);function ii(){D.call(this,"c")}b(ii,D);var Mt={},xd=null;function Do(){return xd=xd||new Le}Mt.Ia="serverreachability";function Td(m){D.call(this,Mt.Ia,m)}b(Td,D);function $i(m){const w=Do();pt(w,new Td(w))}Mt.STAT_EVENT="statevent";function Ma(m,w){D.call(this,Mt.STAT_EVENT,m),this.stat=w}b(Ma,D);function Ut(m){const w=Do();pt(w,new Ma(w,m))}Mt.Ja="timingevent";function Gi(m,w){D.call(this,Mt.Ja,m),this.size=w}b(Gi,D);function Ki(m,w){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},w)}function Ci(){this.g=!0}Ci.prototype.ua=function(){this.g=!1};function Bm(m,w,T,I,K,W){m.info(function(){if(m.g)if(W){var fe="",Ue=W.split("&");for(let it=0;it<Ue.length;it++){var Ot=Ue[it].split("=");if(Ot.length>1){const wt=Ot[0];Ot=Ot[1];const oi=wt.split("_");fe=oi.length>=2&&oi[1]=="type"?fe+(wt+"="+Ot+"&"):fe+(wt+"=redacted&")}}}else fe=null;else fe=W;return"XMLHTTP REQ ("+I+") [attempt "+K+"]: "+w+`
`+T+`
`+fe})}function Ed(m,w,T,I,K,W,fe){m.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+K+"]: "+w+`
`+T+`
`+W+" "+fe})}function Yi(m,w,T,I){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+Fm(m,T)+(I?" "+I:"")})}function Oa(m,w){m.info(function(){return"TIMEOUT: "+w})}Ci.prototype.info=function(){};function Fm(m,w){if(!m.g)return w;if(!w)return null;try{const W=JSON.parse(w);if(W){for(m=0;m<W.length;m++)if(Array.isArray(W[m])){var T=W[m];if(!(T.length<2)){var I=T[1];if(Array.isArray(I)&&!(I.length<1)){var K=I[0];if(K!="noop"&&K!="stop"&&K!="close")for(let fe=1;fe<I.length;fe++)I[fe]=""}}}}return vs(W)}catch{return w}}var Va={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},dc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hc;function ja(){}b(ja,_d),ja.prototype.g=function(){return new XMLHttpRequest},hc=new ja;function Dr(m){return encodeURIComponent(String(m))}function Sd(m){var w=1;m=m.split(":");const T=[];for(;w>0&&m.length;)T.push(m.shift()),w--;return m.length&&T.push(m.join(":")),T}function Ni(m,w,T,I){this.j=m,this.i=w,this.l=T,this.S=I||1,this.V=new Da(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ri}function Ri(){this.i=null,this.g="",this.h=!1}var zt={},en={};function Qi(m,w,T){m.M=1,m.A=Pa(Ft(w)),m.u=T,m.R=!0,Mo(m,null)}function Mo(m,w){m.F=Date.now(),Xi(m),m.B=Ft(m.A);var T=m.B,I=m.S;Array.isArray(I)||(I=[String(I)]),Po(T.i,"t",I),m.C=0,T=m.j.L,m.h=new Ri,m.g=zd(m.j,T?w:null,!m.u),m.P>0&&(m.O=new Sn(f(m.Y,m,m.g),m.P)),w=m.V,T=m.g,I=m.ba;var K="readystatechange";Array.isArray(K)||(K&&(cc[0]=K.toString()),K=cc);for(let W=0;W<K.length;W++){const fe=de(T,K[W],I||w.handleEvent,!1,w.h||w);if(!fe)break;w.g[fe.key]=fe}w=m.J?j(m.J):{},m.u?(m.v||(m.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,w)):(m.v="GET",m.g.ea(m.B,m.v,null,w)),$i(),Bm(m.i,m.v,m.B,m.l,m.S,m.u)}Ni.prototype.ba=function(m){m=m.target;const w=this.O;w&&Di(m)==3?w.j():this.Y(m)},Ni.prototype.Y=function(m){try{if(m==this.g)e:{const Ue=Di(this.g),Ot=this.g.ya(),it=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||on(this.g)))){this.K||Ue!=4||Ot==7||(Ot==8||it<=0?$i(3):$i(2)),Wi(this);var w=this.g.ca();this.X=w;var T=qm(this);if(this.o=w==200,Ed(this.i,this.v,this.B,this.l,this.S,Ue,w),this.o){if(this.U&&!this.L){t:{if(this.g){var I,K=this.g;if((I=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(I)){var W=I;break t}}W=null}if(m=W)Yi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Zi(this,m);else{this.o=!1,this.m=3,Ut(12),Hn(this),ri(this);break e}}if(this.R){m=!0;let wt;for(;!this.K&&this.C<T.length;)if(wt=Cd(this,T),wt==en){Ue==4&&(this.m=4,Ut(14),m=!1),Yi(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==zt){this.m=4,Ut(15),Yi(this.i,this.l,T,"[Invalid Chunk]"),m=!1;break}else Yi(this.i,this.l,wt,null),Zi(this,wt);if(Ad(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||T.length!=0||this.h.h||(this.m=1,Ut(16),m=!1),this.o=this.o&&m,!m)Yi(this.i,this.l,T,"[Invalid Chunked Response]"),Hn(this),ri(this);else if(T.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Cc(fe),fe.P=!0,Ut(11))}}else Yi(this.i,this.l,T,null),Zi(this,T);Ue==4&&Hn(this),this.o&&!this.K&&(Ue==4?jd(this.j,this):(this.o=!1,Xi(this)))}else Or(this.g),w==400&&T.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),Hn(this),ri(this)}}}catch{}finally{}};function qm(m){if(!Ad(m))return m.g.la();const w=on(m.g);if(w==="")return"";let T="";const I=w.length,K=Di(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Hn(m),ri(m),"";m.h.i=new c.TextDecoder}for(let W=0;W<I;W++)m.h.h=!0,T+=m.h.i.decode(w[W],{stream:!(K&&W==I-1)});return w.length=0,m.h.g+=T,m.C=0,m.h.g}function Ad(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Cd(m,w){var T=m.C,I=w.indexOf(`
`,T);return I==-1?en:(T=Number(w.substring(T,I)),isNaN(T)?zt:(I+=1,I+T>w.length?en:(w=w.slice(I,I+T),m.C=I+T,w)))}Ni.prototype.cancel=function(){this.K=!0,Hn(this)};function Xi(m){m.T=Date.now()+m.H,Oo(m,m.H)}function Oo(m,w){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ki(f(m.aa,m),w)}function Wi(m){m.D&&(c.clearTimeout(m.D),m.D=null)}Ni.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Oa(this.i,this.B),this.M!=2&&($i(),Ut(17)),Hn(this),this.m=2,ri(this)):Oo(this,this.T-m)};function ri(m){m.j.I==0||m.K||jd(m.j,m)}function Hn(m){Wi(m);var w=m.O;w&&typeof w.dispose=="function"&&w.dispose(),m.O=null,uc(m.V),m.g&&(w=m.g,m.g=null,w.abort(),w.dispose())}function Zi(m,w){try{var T=m.j;if(T.I!=0&&(T.g==m||er(T.h,m))){if(!m.L&&er(T.h,m)&&T.I==3){try{var I=T.Ba.g.parse(w)}catch{I=null}if(Array.isArray(I)&&I.length==3){var K=I;if(K[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<m.F)Fo(T),As(T);else break e;Ha(T),Ut(18)}}else T.xa=K[1],0<T.xa-T.K&&K[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Ki(f(T.Va,T),6e3));Ji(T.h)<=1&&T.ta&&(T.ta=void 0)}else ar(T,11)}else if((m.L||T.g==m)&&Fo(T),!U(w))for(K=T.Ba.g.parse(w),w=0;w<K.length;w++){let it=K[w];const wt=it[0];if(!(wt<=T.K))if(T.K=wt,it=it[1],T.I==2)if(it[0]=="c"){T.M=it[1],T.ba=it[2];const oi=it[3];oi!=null&&(T.ka=oi,T.j.info("VER="+T.ka));const or=it[4];or!=null&&(T.za=or,T.j.info("SVER="+T.za));const Mi=it[5];Mi!=null&&typeof Mi=="number"&&Mi>0&&(I=1.5*Mi,T.O=I,T.j.info("backChannelRequestTimeoutMs_="+I)),I=T;const Oi=m.g;if(Oi){const $a=Oi.g?Oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($a){var W=I.h;W.g||$a.indexOf("spdy")==-1&&$a.indexOf("quic")==-1&&$a.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(pc(W,W.h),W.h=null))}if(I.G){const qo=Oi.g?Oi.g.getResponseHeader("X-HTTP-Session-Id"):null;qo&&(I.wa=qo,at(I.J,I.G,qo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-m.F,T.j.info("Handshake RTT: "+T.T+"ms")),I=T;var fe=m;if(I.na=Ud(I,I.L?I.ba:null,I.W),fe.L){gc(I.h,fe);var Ue=fe,Ot=I.O;Ot&&(Ue.H=Ot),Ue.D&&(Wi(Ue),Xi(Ue)),I.g=fe}else Od(I);T.i.length>0&&sr(T)}else it[0]!="stop"&&it[0]!="close"||ar(T,7);else T.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?ar(T,7):Sc(T):it[0]!="noop"&&T.l&&T.l.qa(it),T.A=0)}}$i(4)}catch{}}var Bt=class{constructor(m,w){this.g=m,this.map=w}};function fc(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function mc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ji(m){return m.h?1:m.g?m.g.size:0}function er(m,w){return m.h?m.h==w:m.g?m.g.has(w):!1}function pc(m,w){m.g?m.g.add(w):m.h=w}function gc(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}fc.prototype.cancel=function(){if(this.i=yc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function yc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let w=m.i;for(const T of m.g.values())w=w.concat(T.G);return w}return E(m.i)}var Nd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vo(m,w){if(m){m=m.split("&");for(let T=0;T<m.length;T++){const I=m[T].indexOf("=");let K,W=null;I>=0?(K=m[T].substring(0,I),W=m[T].substring(I+1)):K=m[T],w(K,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function $n(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;m instanceof $n?(this.l=m.l,tn(this,m.j),this.o=m.o,this.g=m.g,bs(this,m.u),this.h=m.h,vc(this,Dd(m.i)),this.m=m.m):m&&(w=String(m).match(Nd))?(this.l=!1,tn(this,w[1]||"",!0),this.o=tr(w[2]||""),this.g=tr(w[3]||"",!0),bs(this,w[4]),this.h=tr(w[5]||"",!0),vc(this,w[6]||"",!0),this.m=tr(w[7]||"")):(this.l=!1,this.i=new ws(null,this.l))}$n.prototype.toString=function(){const m=[];var w=this.j;w&&m.push(La(w,jo,!0),":");var T=this.g;return(T||w=="file")&&(m.push("//"),(w=this.o)&&m.push(La(w,jo,!0),"@"),m.push(Dr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&m.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&m.push("/"),m.push(La(T,T.charAt(0)=="/"?bc:Rd,!0))),(T=this.i.toString())&&m.push("?",T),(T=this.m)&&m.push("#",La(T,Id)),m.join("")},$n.prototype.resolve=function(m){const w=Ft(this);let T=!!m.j;T?tn(w,m.j):T=!!m.o,T?w.o=m.o:T=!!m.g,T?w.g=m.g:T=m.u!=null;var I=m.h;if(T)bs(w,m.u);else if(T=!!m.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var K=w.h.lastIndexOf("/");K!=-1&&(I=w.h.slice(0,K+1)+I)}if(K=I,K==".."||K==".")I="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){I=K.lastIndexOf("/",0)==0,K=K.split("/");const W=[];for(let fe=0;fe<K.length;){const Ue=K[fe++];Ue=="."?I&&fe==K.length&&W.push(""):Ue==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),I&&fe==K.length&&W.push("")):(W.push(Ue),I=!0)}I=W.join("/")}else I=K}return T?w.h=I:T=m.i.toString()!=="",T?vc(w,Dd(m.i)):T=!!m.m,T&&(w.m=m.m),w};function Ft(m){return new $n(m)}function tn(m,w,T){m.j=T?tr(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function bs(m,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);m.u=w}else m.u=null}function vc(m,w,T){w instanceof ws?(m.i=w,Lo(m.i,m.l)):(T||(w=La(w,_s)),m.i=new ws(w,m.l))}function at(m,w,T){m.i.set(w,T)}function Pa(m){return at(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function tr(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function La(m,w,T){return typeof m=="string"?(m=encodeURI(m).replace(w,kn),T&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function kn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var jo=/[#\/\?@]/g,Rd=/[#\?:]/g,bc=/[#\?]/g,_s=/[#\?@]/g,Id=/#/g;function ws(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function Dn(m){m.g||(m.g=new Map,m.h=0,m.i&&Vo(m.i,function(w,T){m.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}t=ws.prototype,t.add=function(m,w){Dn(this),this.i=null,m=xs(this,m);let T=this.g.get(m);return T||this.g.set(m,T=[]),T.push(w),this.h+=1,this};function kd(m,w){Dn(m),w=xs(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function _c(m,w){return Dn(m),w=xs(m,w),m.g.has(w)}t.forEach=function(m,w){Dn(this),this.g.forEach(function(T,I){T.forEach(function(K){m.call(w,K,I,this)},this)},this)};function wc(m,w){Dn(m);let T=[];if(typeof w=="string")_c(m,w)&&(T=T.concat(m.g.get(xs(m,w))));else for(m=Array.from(m.g.values()),w=0;w<m.length;w++)T=T.concat(m[w]);return T}t.set=function(m,w){return Dn(this),this.i=null,m=xs(this,m),_c(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},t.get=function(m,w){return m?(m=wc(this,m),m.length>0?String(m[0]):w):w};function Po(m,w,T){kd(m,w),T.length>0&&(m.i=null,m.g.set(xs(m,w),E(T)),m.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(let I=0;I<w.length;I++){var T=w[I];const K=Dr(T);T=wc(this,T);for(let W=0;W<T.length;W++){let fe=K;T[W]!==""&&(fe+="="+Dr(T[W])),m.push(fe)}}return this.i=m.join("&")};function Dd(m){const w=new ws;return w.i=m.i,m.g&&(w.g=new Map(m.g),w.h=m.h),w}function xs(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function Lo(m,w){w&&!m.j&&(Dn(m),m.i=null,m.g.forEach(function(T,I){const K=I.toLowerCase();I!=K&&(kd(this,I),Po(this,K,T))},m)),m.j=w}function Ii(m,w){const T=new Ci;if(c.Image){const I=new Image;I.onload=g(si,T,"TestLoadImage: loaded",!0,w,I),I.onerror=g(si,T,"TestLoadImage: error",!1,w,I),I.onabort=g(si,T,"TestLoadImage: abort",!1,w,I),I.ontimeout=g(si,T,"TestLoadImage: timeout",!1,w,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=m}else w(!1)}function xc(m,w){const T=new Ci,I=new AbortController,K=setTimeout(()=>{I.abort(),si(T,"TestPingServer: timeout",!1,w)},1e4);fetch(m,{signal:I.signal}).then(W=>{clearTimeout(K),W.ok?si(T,"TestPingServer: ok",!0,w):si(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(K),si(T,"TestPingServer: error",!1,w)})}function si(m,w,T,I,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),I(T)}catch{}}function Ts(){this.g=new bd}function nr(m){this.i=m.Sb||null,this.h=m.ab||!1}b(nr,_d),nr.prototype.g=function(){return new Ua(this.i,this.h)};function Ua(m,w){Le.call(this),this.H=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Ua,Le),t=Ua.prototype,t.open=function(m,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=w,this.readyState=1,ki(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(w.body=m),(this.H||c).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Es(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ki(this)),this.g&&(this.readyState=3,ki(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Uo(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Uo(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?Es(this):ki(this),this.readyState==3&&Uo(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,Es(this))},t.Na=function(m){this.g&&(this.response=m,Es(this))},t.ga=function(){this.g&&Es(this)};function Es(m){m.readyState=4,m.l=null,m.j=null,m.B=null,ki(m)}t.setRequestHeader=function(m,w){this.A.append(m,w)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,m.push(T[0]+": "+T[1]),T=w.next();return m.join(`\r
`)};function ki(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ua.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ai(m){let w="";return Te(m,function(T,I){w+=I,w+=":",w+=T,w+=`\r
`}),w}function za(m,w,T){e:{for(I in T){var I=!1;break e}I=!0}I||(T=ai(T),typeof m=="string"?T!=null&&Dr(T):at(m,w,T))}function dt(m){Le.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(dt,Le);var ir=/^https?$/i,Tc=["POST","PUT"];t=dt.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,w,T,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hc.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(W){Ba(this,W);return}if(m=T||"",T=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var K in I)T.set(K,I[K]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())T.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(T.keys()).find(W=>W.toLowerCase()=="content-type"),K=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Tc,w,void 0)>=0)||I||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,fe]of T)this.g.setRequestHeader(W,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(W){Ba(this,W)}};function Ba(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.o=5,Ec(m),Mr(m)}function Ec(m){m.A||(m.A=!0,pt(m,"complete"),pt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,pt(this,"complete"),pt(this,"abort"),Mr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mr(this,!0)),dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Fa(this):this.Xa())},t.Xa=function(){Fa(this)};function Fa(m){if(m.h&&typeof o<"u"){if(m.v&&Di(m)==4)setTimeout(m.Ca.bind(m),0);else if(pt(m,"readystatechange"),Di(m)==4){m.h=!1;try{const W=m.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var I;if(I=W===0){let fe=String(m.D).match(Nd)[1]||null;!fe&&c.self&&c.self.location&&(fe=c.self.location.protocol.slice(0,-1)),I=!ir.test(fe?fe.toLowerCase():"")}T=I}if(T)pt(m,"complete"),pt(m,"success");else{m.o=6;try{var K=Di(m)>2?m.g.statusText:""}catch{K=""}m.l=K+" ["+m.ca()+"]",Ec(m)}}finally{Mr(m)}}}}function Mr(m,w){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const T=m.g;m.g=null,w||pt(m,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Di(m){return m.g?m.g.readyState:0}t.ca=function(){try{return Di(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var w=this.g.responseText;return m&&w.indexOf(m)==0&&(w=w.substring(m.length)),zm(w)}};function on(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Or(m){const w={};m=(m.g&&Di(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<m.length;I++){if(U(m[I]))continue;var T=Sd(m[I]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const W=w[K]||[];w[K]=W,W.push(T)}ae(w,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function rr(m,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[m]||w}function Ss(m){this.za=0,this.i=[],this.j=new Ci,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=rr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=rr("baseRetryDelayMs",5e3,m),this.Za=rr("retryDelaySeedMs",1e4,m),this.Ta=rr("forwardChannelMaxRetries",2,m),this.va=rr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new fc(m&&m.concurrentRequestLimit),this.Ba=new Ts,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ss.prototype,t.ka=8,t.I=1,t.connect=function(m,w,T,I){Ut(0),this.W=m,this.H=w||{},T&&I!==void 0&&(this.H.OSID=T,this.H.OAID=I),this.F=this.X,this.J=Ud(this,null,this.W),sr(this)};function Sc(m){if(zo(m),m.I==3){var w=m.V++,T=Ft(m.J);if(at(T,"SID",m.M),at(T,"RID",w),at(T,"TYPE","terminate"),qa(m,T),w=new Ni(m,m.j,w),w.M=2,w.A=Pa(Ft(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(w.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=w.A,T=!0),T||(w.g=zd(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Xi(w)}Ld(m)}function As(m){m.g&&(Cc(m),m.g.cancel(),m.g=null)}function zo(m){As(m),m.v&&(c.clearTimeout(m.v),m.v=null),Fo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function sr(m){if(!mc(m.h)&&!m.m){m.m=!0;var w=m.Ea;ee||N(),te||(ee(),te=!0),S.add(w,m),m.D=0}}function Bo(m,w){return Ji(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=w.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ki(f(m.Ea,m,w),Pd(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const K=new Ni(this,this.j,m);let W=this.o;if(this.U&&(W?(W=j(W),ue(W,this.U)):W=this.U),this.u!==null||this.R||(K.J=W,W=null),this.S)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var I=this.i[T];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(w+=I,w>4096){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=Md(this,K,w),T=Ft(this.J),at(T,"RID",m),at(T,"CVER",22),this.G&&at(T,"X-HTTP-Session-Id",this.G),qa(this,T),W&&(this.R?w="headers="+Dr(ai(W))+"&"+w:this.u&&za(T,this.u,W)),pc(this.h,K),this.Ra&&at(T,"TYPE","init"),this.S?(at(T,"$req",w),at(T,"SID","null"),K.U=!0,Qi(K,T,null)):Qi(K,T,w),this.I=2}}else this.I==3&&(m?Ac(this,m):this.i.length==0||mc(this.h)||Ac(this))};function Ac(m,w){var T;w?T=w.l:T=m.V++;const I=Ft(m.J);at(I,"SID",m.M),at(I,"RID",T),at(I,"AID",m.K),qa(m,I),m.u&&m.o&&za(I,m.u,m.o),T=new Ni(m,m.j,T,m.D+1),m.u===null&&(T.J=m.o),w&&(m.i=w.G.concat(m.i)),w=Md(m,T,1e3),T.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),pc(m.h,T),Qi(T,I,w)}function qa(m,w){m.H&&Te(m.H,function(T,I){at(w,I,T)}),m.l&&Te({},function(T,I){at(w,I,T)})}function Md(m,w,T){T=Math.min(m.i.length,T);const I=m.l?f(m.l.Ka,m.l,m):null;e:{var K=m.i;let Ue=-1;for(;;){const Ot=["count="+T];Ue==-1?T>0?(Ue=K[0].g,Ot.push("ofs="+Ue)):Ue=0:Ot.push("ofs="+Ue);let it=!0;for(let wt=0;wt<T;wt++){var W=K[wt].g;const oi=K[wt].map;if(W-=Ue,W<0)Ue=Math.max(0,K[wt].g-100),it=!1;else try{W="req"+W+"_"||"";try{var fe=oi instanceof Map?oi:Object.entries(oi);for(const[or,Mi]of fe){let Oi=Mi;d(Mi)&&(Oi=vs(Mi)),Ot.push(W+or+"="+encodeURIComponent(Oi))}}catch(or){throw Ot.push(W+"type="+encodeURIComponent("_badmap")),or}}catch{I&&I(oi)}}if(it){fe=Ot.join("&");break e}}fe=void 0}return m=m.i.splice(0,T),w.G=m,fe}function Od(m){if(!m.g&&!m.v){m.Y=1;var w=m.Da;ee||N(),te||(ee(),te=!0),S.add(w,m),m.A=0}}function Ha(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ki(f(m.Da,m),Pd(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,Vd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ki(f(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),As(this),Vd(this))};function Cc(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Vd(m){m.g=new Ni(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var w=Ft(m.na);at(w,"RID","rpc"),at(w,"SID",m.M),at(w,"AID",m.K),at(w,"CI",m.F?"0":"1"),!m.F&&m.ia&&at(w,"TO",m.ia),at(w,"TYPE","xmlhttp"),qa(m,w),m.u&&m.o&&za(w,m.u,m.o),m.O&&(m.g.H=m.O);var T=m.g;m=m.ba,T.M=1,T.A=Pa(Ft(w)),T.u=null,T.R=!0,Mo(T,m)}t.Va=function(){this.C!=null&&(this.C=null,As(this),Ha(this),Ut(19))};function Fo(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function jd(m,w){var T=null;if(m.g==w){Fo(m),Cc(m),m.g=null;var I=2}else if(er(m.h,w))T=w.G,gc(m.h,w),I=1;else return;if(m.I!=0){if(w.o)if(I==1){T=w.u?w.u.length:0,w=Date.now()-w.F;var K=m.D;I=Do(),pt(I,new Gi(I,T)),sr(m)}else Od(m);else if(K=w.m,K==3||K==0&&w.X>0||!(I==1&&Bo(m,w)||I==2&&Ha(m)))switch(T&&T.length>0&&(w=m.h,w.i=w.i.concat(T)),K){case 1:ar(m,5);break;case 4:ar(m,10);break;case 3:ar(m,6);break;default:ar(m,2)}}}function Pd(m,w){let T=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(T*=2),T*w}function ar(m,w){if(m.j.info("Error code "+w),w==2){var T=f(m.bb,m),I=m.Ua;const K=!I;I=new $n(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||tn(I,"https"),Pa(I),K?Ii(I.toString(),T):xc(I.toString(),T)}else Ut(2);m.I=0,m.l&&m.l.pa(w),Ld(m),zo(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Ld(m){if(m.I=0,m.ja=[],m.l){const w=yc(m.h);(w.length!=0||m.i.length!=0)&&(k(m.ja,w),k(m.ja,m.i),m.h.i.length=0,E(m.i),m.i.length=0),m.l.oa()}}function Ud(m,w,T){var I=T instanceof $n?Ft(T):new $n(T);if(I.g!="")w&&(I.g=w+"."+I.g),bs(I,I.u);else{var K=c.location;I=K.protocol,w=w?w+"."+K.hostname:K.hostname,K=+K.port;const W=new $n(null);I&&tn(W,I),w&&(W.g=w),K&&bs(W,K),T&&(W.h=T),I=W}return T=m.G,w=m.wa,T&&w&&at(I,T,w),at(I,"VER",m.ka),qa(m,I),I}function zd(m,w,T){if(w&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=m.Aa&&!m.ma?new dt(new nr({ab:T})):new dt(m.ma),w.Fa(m.L),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bd(){}t=Bd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Cs(){}Cs.prototype.g=function(m,w){return new An(m,w)};function An(m,w){Le.call(this),this.g=new Ss(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(m?m["X-WebChannel-Client-Profile"]=w.sa:m={"X-WebChannel-Client-Profile":w.sa}),this.g.U=m,(m=w&&w.Qb)&&!U(m)&&(this.g.u=m),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!U(w)&&(this.g.G=w,m=this.h,m!==null&&w in m&&(m=this.h,w in m&&delete m[w])),this.j=new Vr(this)}b(An,Le),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){Sc(this.g)},An.prototype.o=function(m){var w=this.g;if(typeof m=="string"){var T={};T.__data__=m,m=T}else this.v&&(T={},T.__data__=vs(m),m=T);w.i.push(new Bt(w.Ya++,m)),w.I==3&&sr(w)},An.prototype.N=function(){this.g.l=null,delete this.j,Sc(this.g),delete this.g,An.Z.N.call(this)};function Fd(m){an.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const T in w){m=T;break e}m=void 0}(this.i=m)&&(m=this.i,w=w!==null&&m in w?w[m]:void 0),this.data=w}else this.data=m}b(Fd,an);function qd(){ii.call(this),this.status=1}b(qd,ii);function Vr(m){this.g=m}b(Vr,Bd),Vr.prototype.ra=function(){pt(this.g,"a")},Vr.prototype.qa=function(m){pt(this.g,new Fd(m))},Vr.prototype.pa=function(m){pt(this.g,new qd)},Vr.prototype.oa=function(){pt(this.g,"b")},Cs.prototype.createWebChannel=Cs.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,fC=function(){return new Cs},hC=function(){return Do()},dC=Mt,ly={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Va.NO_ERROR=0,Va.TIMEOUT=8,Va.HTTP_ERROR=6,_f=Va,dc.COMPLETE="complete",uC=dc,wd.EventType=Ai,Ai.OPEN="a",Ai.CLOSE="b",Ai.ERROR="c",Ai.MESSAGE="d",Le.prototype.listen=Le.prototype.J,yu=wd,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,cC=dt}).apply(typeof ef<"u"?ef:typeof self<"u"?self:typeof window<"u"?window:{});const WT="@firebase/firestore",ZT="4.9.2";class _n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");let rc="12.3.0";const So=new pv("@firebase/firestore");function bl(){return So.logLevel}function ye(t,...e){if(So.logLevel<=Ke.DEBUG){const n=e.map(Av);So.debug(`Firestore (${rc}): ${t}`,...n)}}function hs(t,...e){if(So.logLevel<=Ke.ERROR){const n=e.map(Av);So.error(`Firestore (${rc}): ${t}`,...n)}}function ql(t,...e){if(So.logLevel<=Ke.WARN){const n=e.map(Av);So.warn(`Firestore (${rc}): ${t}`,...n)}}function Av(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function De(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,mC(t,i,n)}function mC(t,e,n){let i=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw hs(i),new Error(i)}function st(t,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,t||mC(e,a,i)}function Pe(t,e){return t}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends ps{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class as{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class pC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(_n.UNAUTHENTICATED)))}shutdown(){}}class pL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class gL{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){st(this.o===void 0,42304);let i=this.i;const a=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new as;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new as,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await a(this.currentUser)}))},d=h=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new as)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(st(typeof i.accessToken=="string",31837,{l:i}),new pC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new _n(e)}}class yL{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vL{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new yL(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(_n.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class JT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bL{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){st(this.o===void 0,3512);const i=o=>{o.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ye("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const a=o=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>a(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new JT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(st(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new JT(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function _L(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class Cv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=_L(40);for(let o=0;o<a.length;++o)i.length<20&&a[o]<n&&(i+=e.charAt(a[o]%62))}return i}}function Ye(t,e){return t<e?-1:t>e?1:0}function cy(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const a=t.charAt(i),o=e.charAt(i);if(a!==o)return f0(a)===f0(o)?Ye(a,o):f0(a)?1:-1}return Ye(t.length,e.length)}const wL=55296,xL=57343;function f0(t){const e=t.charCodeAt(0);return e>=wL&&e<=xL}function Hl(t,e,n){return t.length===e.length&&t.every(((i,a)=>n(i,e[a])))}const eE="__name__";class fr{constructor(e,n,i){n===void 0?n=0:n>e.length&&De(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&De(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return fr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const o=fr.compareSegments(e.get(a),n.get(a));if(o!==0)return o}return Ye(e.length,n.length)}static compareSegments(e,n){const i=fr.isNumericId(e),a=fr.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?fr.extractNumericId(e).compare(fr.extractNumericId(n)):cy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ha.fromString(e.substring(4,e.length-2))}}class vt extends fr{construct(e,n,i){return new vt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((a=>a.length>0)))}return new vt(n)}static emptyPath(){return new vt([])}}const TL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends fr{construct(e,n,i){return new mn(e,n,i)}static isValidIdentifier(e){return TL.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eE}static keyField(){return new mn([eE])}static fromServerFormat(e){const n=[];let i="",a=0;const o=()=>{if(i.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new pe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[a+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new pe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(o(),a++)}if(o(),c)throw new pe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(vt.fromString(e))}static fromName(e){return new Ae(vt.fromString(e).popFirst(5))}static empty(){return new Ae(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new vt(e.slice()))}}function gC(t,e,n){if(!n)throw new pe(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function EL(t,e,n,i){if(e===!0&&i===!0)throw new pe(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tE(t){if(!Ae.isDocumentKey(t))throw new pe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nE(t){if(Ae.isDocumentKey(t))throw new pe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De(12329,{type:typeof t})}function Bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vm(t);throw new pe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Xt(t,e){const n={typeString:t};return e&&(n.value=e),n}function dd(t,e){if(!yC(t))throw new pe(re.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const a=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const c=t[i];if(a&&typeof c!==a){n=`JSON field '${i}' must be a ${a}.`;break}if(o!==void 0&&c!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new pe(re.INVALID_ARGUMENT,n);return!0}const iE=-62135596800,rE=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*rE);return new We(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<iE)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rE}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dd(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:Xt("string",We._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new We(0,0))}static max(){return new Ve(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const qu=-1;function SL(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,a=Ve.fromTimestamp(i===1e9?new We(n+1,0):new We(n,i));return new ya(a,Ae.empty(),e)}function AL(t){return new ya(t.readTime,t.key,qu)}class ya{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ya(Ve.min(),Ae.empty(),qu)}static max(){return new ya(Ve.max(),Ae.empty(),qu)}}function CL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(t.documentKey,e.documentKey),n!==0?n:Ye(t.largestBatchId,e.largestBatchId))}const NL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function sc(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==NL)throw t;ye("LocalStore","Unexpectedly lost primary lease")}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((i,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,a)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,i)=>{n(e)}))}static reject(e){return new oe(((n,i)=>{i(e)}))}static waitFor(e){return new oe(((n,i)=>{let a=0,o=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++o,c&&o===a&&n()}),(h=>i(h)))})),c=!0,o===a&&n()}))}static or(e){let n=oe.resolve(!1);for(const i of e)n=n.next((a=>a?oe.resolve(a):i()));return n}static forEach(e,n){const i=[];return e.forEach(((a,o)=>{i.push(n.call(this,a,o))})),this.waitFor(i)}static mapArray(e,n){return new oe(((i,a)=>{const o=e.length,c=new Array(o);let d=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next((g=>{c[f]=g,++d,d===o&&i(c)}),(g=>a(g)))}}))}static doWhile(e,n){return new oe(((i,a)=>{const o=()=>{e()===!0?n().next((()=>{o()}),a):i()};o()}))}}function IL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ac(t){return t.name==="IndexedDbTransactionError"}class bm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bm.ce=-1;const Nv=-1;function _m(t){return t==null}function Hf(t){return t===0&&1/t==-1/0}function kL(t){return typeof t=="number"&&Number.isInteger(t)&&!Hf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const vC="";function DL(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sE(e)),e=ML(t.get(n),e);return sE(e)}function ML(t,e){let n=e;const i=t.length;for(let a=0;a<i;a++){const o=t.charAt(a);switch(o){case"\0":n+="";break;case vC:n+="";break;default:n+=o}}return n}function sE(t){return t+vC+""}function aE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Na(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ct{constructor(e,n){this.comparator=e,this.root=n||fn.EMPTY}insert(e,n){return new Ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tf(this.root,e,this.comparator,!0)}}class tf{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fn{constructor(e,n,i,a,o){this.key=e,this.value=n,this.color=i??fn.RED,this.left=a??fn.EMPTY,this.right=o??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,o){return new fn(e??this.key,n??this.value,i??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const o=i(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,n,i),null):o===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return fn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,n,i,a,o){return this}insert(e,n,i){return new fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new oE(this.data.getIterator())}getIteratorFrom(e){return new oE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,o=i.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Jt(this.comparator);return n.data=e,n}}class oE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ei{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new ei([])}unionWith(e){let n=new Jt(mn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ei(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class _C extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _C("Invalid base64 string: "+o):o}})(e);return new gn(n)}static fromUint8Array(e){const n=(function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o})(e);return new gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const OL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function va(t){if(st(!!t,39018),typeof t=="string"){let e=0;const n=OL.exec(t);if(st(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Lt(t.seconds),nanos:Lt(t.nanos)}}function Lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ba(t){return typeof t=="string"?gn.fromBase64String(t):gn.fromUint8Array(t)}const wC="server_timestamp",xC="__type__",TC="__previous_value__",EC="__local_write_time__";function Rv(t){return(t?.mapValue?.fields||{})[xC]?.stringValue===wC}function wm(t){const e=t.mapValue.fields[TC];return Rv(e)?wm(e):e}function Hu(t){const e=va(t.mapValue.fields[EC].timestampValue);return new We(e.seconds,e.nanos)}class VL{constructor(e,n,i,a,o,c,d,h,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const $f="(default)";class $u{constructor(e,n){this.projectId=e,this.database=n||$f}static empty(){return new $u("","")}get isDefaultDatabase(){return this.database===$f}isEqual(e){return e instanceof $u&&e.projectId===this.projectId&&e.database===this.database}}const SC="__type__",jL="__max__",nf={mapValue:{}},AC="__vector__",Gf="value";function _a(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rv(t)?4:LL(t)?9007199254740991:PL(t)?10:11:De(28295,{value:t})}function Cr(t,e){if(t===e)return!0;const n=_a(t);if(n!==_a(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hu(t).isEqual(Hu(e));case 3:return(function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=va(a.timestampValue),d=va(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,o){return ba(a.bytesValue).isEqual(ba(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,o){return Lt(a.geoPointValue.latitude)===Lt(o.geoPointValue.latitude)&&Lt(a.geoPointValue.longitude)===Lt(o.geoPointValue.longitude)})(t,e);case 2:return(function(a,o){if("integerValue"in a&&"integerValue"in o)return Lt(a.integerValue)===Lt(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=Lt(a.doubleValue),d=Lt(o.doubleValue);return c===d?Hf(c)===Hf(d):isNaN(c)&&isNaN(d)}return!1})(t,e);case 9:return Hl(t.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:case 11:return(function(a,o){const c=a.mapValue.fields||{},d=o.mapValue.fields||{};if(aE(c)!==aE(d))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(d[h]===void 0||!Cr(c[h],d[h])))return!1;return!0})(t,e);default:return De(52216,{left:t})}}function Gu(t,e){return(t.values||[]).find((n=>Cr(n,e)))!==void 0}function $l(t,e){if(t===e)return 0;const n=_a(t),i=_a(e);if(n!==i)return Ye(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ye(t.booleanValue,e.booleanValue);case 2:return(function(o,c){const d=Lt(o.integerValue||o.doubleValue),h=Lt(c.integerValue||c.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(t,e);case 3:return lE(t.timestampValue,e.timestampValue);case 4:return lE(Hu(t),Hu(e));case 5:return cy(t.stringValue,e.stringValue);case 6:return(function(o,c){const d=ba(o),h=ba(c);return d.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(o,c){const d=o.split("/"),h=c.split("/");for(let f=0;f<d.length&&f<h.length;f++){const g=Ye(d[f],h[f]);if(g!==0)return g}return Ye(d.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,c){const d=Ye(Lt(o.latitude),Lt(c.latitude));return d!==0?d:Ye(Lt(o.longitude),Lt(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return cE(t.arrayValue,e.arrayValue);case 10:return(function(o,c){const d=o.fields||{},h=c.fields||{},f=d[Gf]?.arrayValue,g=h[Gf]?.arrayValue,b=Ye(f?.values?.length||0,g?.values?.length||0);return b!==0?b:cE(f,g)})(t.mapValue,e.mapValue);case 11:return(function(o,c){if(o===nf.mapValue&&c===nf.mapValue)return 0;if(o===nf.mapValue)return 1;if(c===nf.mapValue)return-1;const d=o.fields||{},h=Object.keys(d),f=c.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let b=0;b<h.length&&b<g.length;++b){const _=cy(h[b],g[b]);if(_!==0)return _;const E=$l(d[h[b]],f[g[b]]);if(E!==0)return E}return Ye(h.length,g.length)})(t.mapValue,e.mapValue);default:throw De(23264,{he:n})}}function lE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ye(t,e);const n=va(t),i=va(e),a=Ye(n.seconds,i.seconds);return a!==0?a:Ye(n.nanos,i.nanos)}function cE(t,e){const n=t.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const o=$l(n[a],i[a]);if(o)return o}return Ye(n.length,i.length)}function Gl(t){return uy(t)}function uy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=va(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ba(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ae.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",a=!0;for(const o of n.values||[])a?a=!1:i+=",",i+=uy(o);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let a="{",o=!0;for(const c of i)o?o=!1:a+=",",a+=`${c}:${uy(n.fields[c])}`;return a+"}"})(t.mapValue):De(61005,{value:t})}function wf(t){switch(_a(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wm(t);return e?16+wf(e):16;case 5:return 2*t.stringValue.length;case 6:return ba(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,o)=>a+wf(o)),0)})(t.arrayValue);case 10:case 11:return(function(i){let a=0;return Na(i.fields,((o,c)=>{a+=o.length+wf(c)})),a})(t.mapValue);default:throw De(13486,{value:t})}}function uE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dy(t){return!!t&&"integerValue"in t}function Iv(t){return!!t&&"arrayValue"in t}function dE(t){return!!t&&"nullValue"in t}function hE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xf(t){return!!t&&"mapValue"in t}function PL(t){return(t?.mapValue?.fields||{})[SC]?.stringValue===AC}function Nu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Na(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Nu(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nu(t.arrayValue.values[n]);return e}return{...t}}function LL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===jL}class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!xf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nu(n)}setAll(e){let n=mn.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!n.isImmediateParentOf(d)){const h=this.getFieldsMap(n);this.applyChanges(h,i,a),i={},a=[],n=d.popLast()}c?i[d.lastSegment()]=Nu(c):a.push(d.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,a)}delete(e){const n=this.field(e.popLast());xf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];xf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){Na(n,((a,o)=>e[a]=o));for(const a of i)delete e[a]}clone(){return new Un(Nu(this.value))}}function CC(t){const e=[];return Na(t.fields,((n,i)=>{const a=new mn([n]);if(xf(i)){const o=CC(i.mapValue).fields;if(o.length===0)e.push(a);else for(const c of o)e.push(a.child(c))}else e.push(a)})),new ei(e)}class wn{constructor(e,n,i,a,o,c,d){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new wn(e,0,Ve.min(),Ve.min(),Ve.min(),Un.empty(),0)}static newFoundDocument(e,n,i,a){return new wn(e,1,n,Ve.min(),i,a,0)}static newNoDocument(e,n){return new wn(e,2,n,Ve.min(),Ve.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new wn(e,3,n,Ve.min(),Ve.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Kf{constructor(e,n){this.position=e,this.inclusive=n}}function fE(t,e,n){let i=0;for(let a=0;a<t.position.length;a++){const o=e[a],c=t.position[a];if(o.field.isKeyField()?i=Ae.comparator(Ae.fromName(c.referenceValue),n.key):i=$l(c,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function mE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cr(t.position[n],e.position[n]))return!1;return!0}class Ku{constructor(e,n="asc"){this.field=e,this.dir=n}}function UL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class NC{}class Qt extends NC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new BL(e,n,i):n==="array-contains"?new HL(e,i):n==="in"?new $L(e,i):n==="not-in"?new GL(e,i):n==="array-contains-any"?new KL(e,i):new Qt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new FL(e,i):new qL(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($l(n,this.value)):n!==null&&_a(this.value)===_a(n)&&this.matchesComparison($l(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hi extends NC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Hi(e,n)}matches(e){return RC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function RC(t){return t.op==="and"}function IC(t){return zL(t)&&RC(t)}function zL(t){for(const e of t.filters)if(e instanceof Hi)return!1;return!0}function hy(t){if(t instanceof Qt)return t.field.canonicalString()+t.op.toString()+Gl(t.value);if(IC(t))return t.filters.map((e=>hy(e))).join(",");{const e=t.filters.map((n=>hy(n))).join(",");return`${t.op}(${e})`}}function kC(t,e){return t instanceof Qt?(function(i,a){return a instanceof Qt&&i.op===a.op&&i.field.isEqual(a.field)&&Cr(i.value,a.value)})(t,e):t instanceof Hi?(function(i,a){return a instanceof Hi&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((o,c,d)=>o&&kC(c,a.filters[d])),!0):!1})(t,e):void De(19439)}function DC(t){return t instanceof Qt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Gl(n.value)}`})(t):t instanceof Hi?(function(n){return n.op.toString()+" {"+n.getFilters().map(DC).join(" ,")+"}"})(t):"Filter"}class BL extends Qt{constructor(e,n,i){super(e,n,i),this.key=Ae.fromName(i.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class FL extends Qt{constructor(e,n){super(e,"in",n),this.keys=MC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class qL extends Qt{constructor(e,n){super(e,"not-in",n),this.keys=MC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function MC(t,e){return(e.arrayValue?.values||[]).map((n=>Ae.fromName(n.referenceValue)))}class HL extends Qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Iv(n)&&Gu(n.arrayValue,this.value)}}class $L extends Qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gu(this.value.arrayValue,n)}}class GL extends Qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Gu(this.value.arrayValue,n)}}class KL extends Qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Iv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Gu(this.value.arrayValue,i)))}}class YL{constructor(e,n=null,i=[],a=[],o=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=c,this.endAt=d,this.Te=null}}function pE(t,e=null,n=[],i=[],a=null,o=null,c=null){return new YL(t,e,n,i,a,o,c)}function kv(t){const e=Pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>hy(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),_m(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Gl(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Gl(i))).join(",")),e.Te=n}return e.Te}function Dv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!UL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mE(t.startAt,e.startAt)&&mE(t.endAt,e.endAt)}function fy(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class oc{constructor(e,n=null,i=[],a=[],o=null,c="F",d=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function QL(t,e,n,i,a,o,c,d){return new oc(t,e,n,i,a,o,c,d)}function xm(t){return new oc(t)}function gE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function OC(t){return t.collectionGroup!==null}function Ru(t){const e=Pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Jt(mn.comparator);return c.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(d=d.add(f.field))}))})),d})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ku(o,i))})),n.has(mn.keyField().canonicalString())||e.Ie.push(new Ku(mn.keyField(),i))}return e.Ie}function xr(t){const e=Pe(t);return e.Ee||(e.Ee=XL(e,Ru(t))),e.Ee}function XL(t,e){if(t.limitType==="F")return pE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const o=a.dir==="desc"?"asc":"desc";return new Ku(a.field,o)}));const n=t.endAt?new Kf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Kf(t.startAt.position,t.startAt.inclusive):null;return pE(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function my(t,e){const n=t.filters.concat([e]);return new oc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yf(t,e,n){return new oc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Tm(t,e){return Dv(xr(t),xr(e))&&t.limitType===e.limitType}function VC(t){return`${kv(xr(t))}|lt:${t.limitType}`}function _l(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((a=>DC(a))).join(", ")}]`),_m(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((a=>Gl(a))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((a=>Gl(a))).join(",")),`Target(${i})`})(xr(t))}; limitType=${t.limitType})`}function Em(t,e){return e.isFoundDocument()&&(function(i,a){const o=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Ae.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(t,e)&&(function(i,a){for(const o of Ru(i))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(i,a){for(const o of i.filters)if(!o.matches(a))return!1;return!0})(t,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,h){const f=fE(c,d,h);return c.inclusive?f<=0:f<0})(i.startAt,Ru(i),a)||i.endAt&&!(function(c,d,h){const f=fE(c,d,h);return c.inclusive?f>=0:f>0})(i.endAt,Ru(i),a))})(t,e)}function WL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jC(t){return(e,n)=>{let i=!1;for(const a of Ru(t)){const o=ZL(a,e,n);if(o!==0)return o;i=i||a.field.isKeyField()}return 0}}function ZL(t,e,n){const i=t.field.isKeyField()?Ae.comparator(e.key,n.key):(function(o,c,d){const h=c.data.field(o),f=d.data.field(o);return h!==null&&f!==null?$l(h,f):De(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return De(19790,{direction:t.dir})}}class Ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,o]of i)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Na(this.inner,((n,i)=>{for(const[a,o]of i)e(a,o)}))}isEmpty(){return bC(this.inner)}size(){return this.innerSize}}const JL=new Ct(Ae.comparator);function fs(){return JL}const PC=new Ct(Ae.comparator);function vu(...t){let e=PC;for(const n of t)e=e.insert(n.key,n);return e}function LC(t){let e=PC;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function mo(){return Iu()}function UC(){return Iu()}function Iu(){return new Ro((t=>t.toString()),((t,e)=>t.isEqual(e)))}const eU=new Ct(Ae.comparator),tU=new Jt(Ae.comparator);function Qe(...t){let e=tU;for(const n of t)e=e.add(n);return e}const nU=new Jt(Ye);function iU(){return nU}function Mv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hf(e)?"-0":e}}function zC(t){return{integerValue:""+t}}function rU(t,e){return kL(e)?zC(e):Mv(t,e)}class Sm{constructor(){this._=void 0}}function sU(t,e,n){return t instanceof Qf?(function(a,o){const c={fields:{[xC]:{stringValue:wC},[EC]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&Rv(o)&&(o=wm(o)),o&&(c.fields[TC]=o),{mapValue:c}})(n,e):t instanceof Yu?FC(t,e):t instanceof Qu?qC(t,e):(function(a,o){const c=BC(a,o),d=yE(c)+yE(a.Ae);return dy(c)&&dy(a.Ae)?zC(d):Mv(a.serializer,d)})(t,e)}function aU(t,e,n){return t instanceof Yu?FC(t,e):t instanceof Qu?qC(t,e):n}function BC(t,e){return t instanceof Xf?(function(i){return dy(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Qf extends Sm{}class Yu extends Sm{constructor(e){super(),this.elements=e}}function FC(t,e){const n=HC(e);for(const i of t.elements)n.some((a=>Cr(a,i)))||n.push(i);return{arrayValue:{values:n}}}class Qu extends Sm{constructor(e){super(),this.elements=e}}function qC(t,e){let n=HC(e);for(const i of t.elements)n=n.filter((a=>!Cr(a,i)));return{arrayValue:{values:n}}}class Xf extends Sm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function yE(t){return Lt(t.integerValue||t.doubleValue)}function HC(t){return Iv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function oU(t,e){return t.field.isEqual(e.field)&&(function(i,a){return i instanceof Yu&&a instanceof Yu||i instanceof Qu&&a instanceof Qu?Hl(i.elements,a.elements,Cr):i instanceof Xf&&a instanceof Xf?Cr(i.Ae,a.Ae):i instanceof Qf&&a instanceof Qf})(t.transform,e.transform)}class lU{constructor(e,n){this.version=e,this.transformResults=n}}class Ti{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ti}static exists(e){return new Ti(void 0,e)}static updateTime(e){return new Ti(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Am{}function $C(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ov(t.key,Ti.none()):new hd(t.key,t.data,Ti.none());{const n=t.data,i=Un.empty();let a=new Jt(mn.comparator);for(let o of e.fields)if(!a.has(o)){let c=n.field(o);c===null&&o.length>1&&(o=o.popLast(),c=n.field(o)),c===null?i.delete(o):i.set(o,c),a=a.add(o)}return new Ra(t.key,i,new ei(a.toArray()),Ti.none())}}function cU(t,e,n){t instanceof hd?(function(a,o,c){const d=a.value.clone(),h=bE(a.fieldTransforms,o,c.transformResults);d.setAll(h),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(t,e,n):t instanceof Ra?(function(a,o,c){if(!Tf(a.precondition,o))return void o.convertToUnknownDocument(c.version);const d=bE(a.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(GC(a)),h.setAll(d),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(t,e,n):(function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function ku(t,e,n,i){return t instanceof hd?(function(o,c,d,h){if(!Tf(o.precondition,c))return d;const f=o.value.clone(),g=_E(o.fieldTransforms,h,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(t,e,n,i):t instanceof Ra?(function(o,c,d,h){if(!Tf(o.precondition,c))return d;const f=_E(o.fieldTransforms,h,c),g=c.data;return g.setAll(GC(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(t,e,n,i):(function(o,c,d){return Tf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(t,e,n)}function uU(t,e){let n=null;for(const i of t.fieldTransforms){const a=e.data.field(i.field),o=BC(i.transform,a||null);o!=null&&(n===null&&(n=Un.empty()),n.set(i.field,o))}return n||null}function vE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Hl(i,a,((o,c)=>oU(o,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hd extends Am{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ra extends Am{constructor(e,n,i,a,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function GC(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function bE(t,e,n){const i=new Map;st(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const o=t[a],c=o.transform,d=e.data.field(o.field);i.set(o.field,aU(c,d,n[a]))}return i}function _E(t,e,n){const i=new Map;for(const a of t){const o=a.transform,c=n.data.field(a.field);i.set(a.field,sU(o,c,e))}return i}class Ov extends Am{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dU extends Am{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hU{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&cU(o,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ku(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ku(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=UC();return this.mutations.forEach((a=>{const o=e.get(a.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=n.has(a.key)?null:d;const h=$C(c,d);h!==null&&i.set(a.key,h),c.isValidDocument()||c.convertToNoDocument(Ve.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Qe())}isEqual(e){return this.batchId===e.batchId&&Hl(this.mutations,e.mutations,((n,i)=>vE(n,i)))&&Hl(this.baseMutations,e.baseMutations,((n,i)=>vE(n,i)))}}class Vv{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){st(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return eU})();const o=e.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,i[c].version);return new Vv(e,n,i,a)}}class fU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class mU{constructor(e,n){this.count=e,this.unchangedNames=n}}var Kt,Ze;function pU(t){switch(t){case re.OK:return De(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return De(15467,{code:t})}}function KC(t){if(t===void 0)return hs("GRPC error has no .code"),re.UNKNOWN;switch(t){case Kt.OK:return re.OK;case Kt.CANCELLED:return re.CANCELLED;case Kt.UNKNOWN:return re.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return re.INTERNAL;case Kt.UNAVAILABLE:return re.UNAVAILABLE;case Kt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Kt.NOT_FOUND:return re.NOT_FOUND;case Kt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Kt.ABORTED:return re.ABORTED;case Kt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Kt.DATA_LOSS:return re.DATA_LOSS;default:return De(39323,{code:t})}}(Ze=Kt||(Kt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";function gU(){return new TextEncoder}const yU=new ha([4294967295,4294967295],0);function wE(t){const e=gU().encode(t),n=new lC;return n.update(e),new Uint8Array(n.digest())}function xE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ha([n,i],0),new ha([a,o],0)]}class jv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new bu(`Invalid padding: ${n}`);if(i<0)throw new bu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new bu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new bu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ha.fromNumber(this.ge)}ye(e,n,i){let a=e.add(n.multiply(ha.fromNumber(i)));return a.compare(yU)===1&&(a=new ha([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=wE(e),[i,a]=xE(n);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,a,o);if(!this.we(c))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new jv(o,a,n);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const n=wE(e),[i,a]=xE(n);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,a,o);this.Se(c)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Cm{constructor(e,n,i,a,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,fd.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Cm(Ve.min(),a,new Ct(Ye),fs(),Qe())}}class fd{constructor(e,n,i,a,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new fd(i,n,Qe(),Qe(),Qe())}}class Ef{constructor(e,n,i,a){this.be=e,this.removedTargetIds=n,this.key=i,this.De=a}}class YC{constructor(e,n){this.targetId=e,this.Ce=n}}class QC{constructor(e,n,i=gn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class TE{constructor(){this.ve=0,this.Fe=EE(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qe(),n=Qe(),i=Qe();return this.Fe.forEach(((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:De(38017,{changeType:o})}})),new fd(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=EE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vU{constructor(e){this.Ge=e,this.ze=new Map,this.je=fs(),this.Je=rf(),this.He=rf(),this.Ye=new Ct(Ye)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,i=e.Ce.count,a=this.ot(n);if(a){const o=a.target;if(fy(o))if(i===0){const c=new Ae(o.path);this.et(n,c,wn.newNoDocument(c,Ve.min()))}else st(i===1,20013,{expectedCount:i});else{const c=this._t(n);if(c!==i){const d=this.ut(e),h=d?this.ct(d,e,c):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:o=0}=n;let c,d;try{c=ba(i).toUint8Array()}catch(h){if(h instanceof _C)return ql("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new jv(c,a,o)}catch(h){return ql(h instanceof bu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.ge===0?null:d}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let a=0;return i.forEach((o=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.et(n,o,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((o,c)=>{const d=this.ot(c);if(d){if(o.current&&fy(d.target)){const h=new Ae(d.target.path);this.It(h).has(c)||this.Et(c,h)||this.et(c,h,wn.newNoDocument(h,e))}o.Be&&(n.set(c,o.ke()),o.qe())}}));let i=Qe();this.He.forEach(((o,c)=>{let d=!0;c.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const a=new Cm(e,n,this.Ye,this.je,i);return this.je=fs(),this.Je=rf(),this.He=rf(),this.Ye=new Ct(Ye),a}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new TE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Jt(Ye),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Jt(Ye),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new TE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function rf(){return new Ct(Ae.comparator)}function EE(){return new Ct(Ae.comparator)}const bU={asc:"ASCENDING",desc:"DESCENDING"},_U={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wU={and:"AND",or:"OR"};class xU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function py(t,e){return t.useProto3Json||_m(e)?e:{value:e}}function Wf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function TU(t,e){return Wf(t,e.toTimestamp())}function Tr(t){return st(!!t,49232),Ve.fromTimestamp((function(n){const i=va(n);return new We(i.seconds,i.nanos)})(t))}function Pv(t,e){return gy(t,e).canonicalString()}function gy(t,e){const n=(function(a){return new vt(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function WC(t){const e=vt.fromString(t);return st(nN(e),10190,{key:e.toString()}),e}function yy(t,e){return Pv(t.databaseId,e.path)}function m0(t,e){const n=WC(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ae(JC(n))}function ZC(t,e){return Pv(t.databaseId,e)}function EU(t){const e=WC(t);return e.length===4?vt.emptyPath():JC(e)}function vy(t){return new vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JC(t){return st(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function SE(t,e,n){return{name:yy(t,e),fields:n.value.mapValue.fields}}function SU(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:De(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(st(g===void 0||typeof g=="string",58123),gn.fromBase64String(g||"")):(st(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),gn.fromUint8Array(g||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(f){const g=f.code===void 0?re.UNKNOWN:KC(f.code);return new pe(g,f.message||"")})(c);n=new QC(i,a,o,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=m0(t,i.document.name),o=Tr(i.document.updateTime),c=i.document.createTime?Tr(i.document.createTime):Ve.min(),d=new Un({mapValue:{fields:i.document.fields}}),h=wn.newFoundDocument(a,o,c,d),f=i.targetIds||[],g=i.removedTargetIds||[];n=new Ef(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=m0(t,i.document),o=i.readTime?Tr(i.readTime):Ve.min(),c=wn.newNoDocument(a,o),d=i.removedTargetIds||[];n=new Ef([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=m0(t,i.document),o=i.removedTargetIds||[];n=new Ef([],o,a,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:o}=i,c=new mU(a,o),d=i.targetId;n=new YC(d,c)}}return n}function AU(t,e){let n;if(e instanceof hd)n={update:SE(t,e.key,e.value)};else if(e instanceof Ov)n={delete:yy(t,e.key)};else if(e instanceof Ra)n={update:SE(t,e.key,e.data),updateMask:VU(e.fieldMask)};else{if(!(e instanceof dU))return De(16599,{Vt:e.type});n={verify:yy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(o,c){const d=c.transform;if(d instanceof Qf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Yu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Qu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Xf)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw De(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(a,o){return o.updateTime!==void 0?{updateTime:TU(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:De(27497)})(t,e.precondition)),n}function CU(t,e){return t&&t.length>0?(st(e!==void 0,14353),t.map((n=>(function(a,o){let c=a.updateTime?Tr(a.updateTime):Tr(o);return c.isEqual(Ve.min())&&(c=Tr(o)),new lU(c,a.transformResults||[])})(n,e)))):[]}function NU(t,e){return{documents:[ZC(t,e.path)]}}function RU(t,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=ZC(t,a);const o=(function(f){if(f.length!==0)return tN(Hi.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((g=>(function(_){return{field:wl(_.field),direction:DU(_.dir)}})(g)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=py(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:a}}function IU(t){let e=EU(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){st(i===1,65062);const g=n.from[0];g.allDescendants?a=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=(function(b){const _=eN(b);return _ instanceof Hi&&IC(_)?_.getFilters():[_]})(n.where));let c=[];n.orderBy&&(c=(function(b){return b.map((_=>(function(k){return new Ku(xl(k.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(_)))})(n.orderBy));let d=null;n.limit&&(d=(function(b){let _;return _=typeof b=="object"?b.value:b,_m(_)?null:_})(n.limit));let h=null;n.startAt&&(h=(function(b){const _=!!b.before,E=b.values||[];return new Kf(E,_)})(n.startAt));let f=null;return n.endAt&&(f=(function(b){const _=!b.before,E=b.values||[];return new Kf(E,_)})(n.endAt)),QL(e,a,c,o,d,"F",h,f)}function kU(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function eN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=xl(n.unaryFilter.field);return Qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=xl(n.unaryFilter.field);return Qt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=xl(n.unaryFilter.field);return Qt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=xl(n.unaryFilter.field);return Qt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Qt.create(xl(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Hi.create(n.compositeFilter.filters.map((i=>eN(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(n.compositeFilter.op))})(t):De(30097,{filter:t})}function DU(t){return bU[t]}function MU(t){return _U[t]}function OU(t){return wU[t]}function wl(t){return{fieldPath:t.canonicalString()}}function xl(t){return mn.fromServerFormat(t.fieldPath)}function tN(t){return t instanceof Qt?(function(n){if(n.op==="=="){if(hE(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NAN"}};if(dE(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hE(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NAN"}};if(dE(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(n.field),op:MU(n.op),value:n.value}}})(t):t instanceof Hi?(function(n){const i=n.getFilters().map((a=>tN(a)));return i.length===1?i[0]:{compositeFilter:{op:OU(n.op),filters:i}}})(t):De(54877,{filter:t})}function VU(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function nN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class la{constructor(e,n,i,a,o=Ve.min(),c=Ve.min(),d=gn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new la(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class jU{constructor(e){this.yt=e}}function PU(t){const e=IU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yf(e,e.limit,"L"):e}class LU{constructor(){this.Cn=new UU}addToCollectionParentIndex(e,n){return this.Cn.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(ya.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(ya.min())}updateCollectionGroup(e,n,i){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class UU{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new Jt(vt.comparator),o=!a.has(i);return this.index[n]=a.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Jt(vt.comparator)).toArray()}}const AE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iN=41943040;class Ln{static withCacheSize(e){return new Ln(e,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln(iN,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);class Kl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Kl(0)}static cr(){return new Kl(-1)}}const CE="LruGarbageCollector",zU=1048576;function NE([t,e],[n,i]){const a=Ye(t,n);return a===0?Ye(e,i):a}class BU{constructor(e){this.Ir=e,this.buffer=new Jt(NE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();NE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FU{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(CE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ac(n)?ye(CE,"Ignoring IndexedDB error during garbage collection: ",n):await sc(n)}await this.Vr(3e5)}))}}class qU{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return oe.resolve(bm.ce);const i=new BU(n);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(AE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,a,o,c,d,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,c=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(i=b,d=Date.now(),this.removeTargets(e,i,n)))).next((b=>(o=b,h=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(f=Date.now(),bl()<=Ke.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${o} targets in `+(h-d)+`ms
	Removed ${b} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:b}))))}}function HU(t,e){return new qU(t,e)}class $U{constructor(){this.changes=new Ro((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?oe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class GU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class KU{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(i!==null&&ku(i.mutation,a,ei.empty(),We.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Qe()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Qe()){const a=mo();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,i).next((o=>{let c=vu();return o.forEach(((d,h)=>{c=c.insert(d,h.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const i=mo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Qe())))}populateOverlays(e,n,i){const a=[];return i.forEach((o=>{n.has(o)||a.push(o)})),this.documentOverlayCache.getOverlays(e,a).next((o=>{o.forEach(((c,d)=>{n.set(c,d)}))}))}computeViews(e,n,i,a){let o=fs();const c=Iu(),d=(function(){return Iu()})();return n.forEach(((h,f)=>{const g=i.get(f.key);a.has(f.key)&&(g===void 0||g.mutation instanceof Ra)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),ku(g.mutation,f,g.mutation.getFieldMask(),We.now())):c.set(f.key,ei.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,g)=>c.set(f,g))),n.forEach(((f,g)=>d.set(f,new GU(g,c.get(f)??null)))),d)))}recalculateAndSaveOverlays(e,n){const i=Iu();let a=new Ct(((c,d)=>c-d)),o=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const d of c)d.keys().forEach((h=>{const f=n.get(h);if(f===null)return;let g=i.get(h)||ei.empty();g=d.applyToLocalView(f,g),i.set(h,g);const b=(a.get(d.batchId)||Qe()).add(h);a=a.insert(d.batchId,b)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),f=h.key,g=h.value,b=UC();g.forEach((_=>{if(!o.has(_)){const E=$C(n.get(_),i.get(_));E!==null&&b.set(_,E),o=o.add(_)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,b))}return oe.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,a){return(function(c){return Ae.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):OC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next((o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-o.size):oe.resolve(mo());let d=qu,h=o;return c.next((f=>oe.forEach(f,((g,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),o.get(g)?oe.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{h=h.insert(g,_)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,Qe()))).next((g=>({batchId:d,changes:LC(g)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next((i=>{let a=vu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const o=n.collectionGroup;let c=vu();return this.indexManager.getCollectionParents(e,o).next((d=>oe.forEach(d,(h=>{const f=(function(b,_){return new oc(_,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,a).next((g=>{g.forEach(((b,_)=>{c=c.insert(b,_)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,i,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,a)))).next((c=>{o.forEach(((h,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,wn.newInvalidDocument(g)))}));let d=vu();return c.forEach(((h,f)=>{const g=o.get(h);g!==void 0&&ku(g.mutation,f,ei.empty(),We.now()),Em(n,f)&&(d=d.insert(h,f))})),d}))}}class YU{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return oe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Tr(a.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:PU(a.bundledQuery),readTime:Tr(a.readTime)}})(n)),oe.resolve()}}class QU{constructor(){this.overlays=new Ct(Ae.comparator),this.qr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=mo();return oe.forEach(n,(a=>this.getOverlay(e,a).next((o=>{o!==null&&i.set(a,o)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((a,o)=>{this.St(e,n,o)})),oe.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),oe.resolve()}getOverlaysForCollection(e,n,i){const a=mo(),o=n.length+1,c=new Ae(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const h=d.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&a.set(h.getKey(),h)}return oe.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let o=new Ct(((f,g)=>f-g));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=mo(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const d=mo(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,g)=>d.set(f,g))),!(d.size()>=a)););return oe.resolve(d)}St(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new fU(n,i));let o=this.qr.get(n);o===void 0&&(o=Qe(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}class XU{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}class Lv{constructor(){this.Qr=new Jt(rn.$r),this.Ur=new Jt(rn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new rn(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new rn(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Ae(new vt([])),i=new rn(n,e),a=new rn(n,e+1),o=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ae(new vt([])),i=new rn(n,e),a=new rn(n,e+1);let o=Qe();return this.Ur.forEachInRange([i,a],(c=>{o=o.add(c.key)})),o}containsKey(e){const n=new rn(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class rn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ae.comparator(e.key,n.key)||Ye(e.Yr,n.Yr)}static Kr(e,n){return Ye(e.Yr,n.Yr)||Ae.comparator(e.key,n.key)}}class WU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(rn.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new hU(o,n,i,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new rn(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return oe.resolve(c)}lookupMutationBatch(e,n){return oe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.ei(i),o=a<0?0:a;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Nv:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new rn(n,0),a=new rn(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,a],(c=>{const d=this.Xr(c.Yr);o.push(d)})),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Jt(Ye);return n.forEach((a=>{const o=new rn(a,0),c=new rn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(d=>{i=i.add(d.Yr)}))})),oe.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let o=i;Ae.isDocumentKey(o)||(o=o.child(""));const c=new rn(new Ae(o),0);let d=new Jt(Ye);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===a&&(d=d.add(h.Yr)),!0)}),c),oe.resolve(this.ti(d))}ti(e){const n=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){st(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return oe.forEach(n.mutations,(a=>{const o=new rn(a.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new rn(n,0),a=this.Zr.firstAfterOrEqual(i);return oe.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class ZU{constructor(e){this.ri=e,this.docs=(function(){return new Ct(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),o=a?a.size:0,c=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return oe.resolve(i?i.document.mutableCopy():wn.newInvalidDocument(n))}getEntries(e,n){let i=fs();return n.forEach((a=>{const o=this.docs.get(a);i=i.insert(a,o?o.document.mutableCopy():wn.newInvalidDocument(a))})),oe.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let o=fs();const c=n.path,d=new Ae(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||CL(AL(g),i)<=0||(a.has(g.key)||Em(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,n,i,a){De(9500)}ii(e,n){return oe.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new JU(this)}getSize(e){return oe.resolve(this.size)}}class JU extends $U{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),oe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class ez{constructor(e){this.persistence=e,this.si=new Ro((n=>kv(n)),Dv),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new Lv,this.targetCount=0,this.ai=Kl.ur()}forEachTarget(e,n){return this.si.forEach(((i,a)=>n(a))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),oe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Kl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Pr(n),oe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,i){let a=0;const o=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),oe.waitFor(o).next((()=>a))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return oe.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),oe.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const a=this.persistence.referenceDelegate,o=[];return a&&n.forEach((c=>{o.push(a.markPotentiallyOrphaned(e,c))})),oe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return oe.resolve(i)}containsKey(e,n){return oe.resolve(this._i.containsKey(n))}}class rN{constructor(e,n){this.ui={},this.overlays={},this.ci=new bm(0),this.li=!1,this.li=!0,this.hi=new XU,this.referenceDelegate=e(this),this.Pi=new ez(this),this.indexManager=new LU,this.remoteDocumentCache=(function(a){return new ZU(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new jU(n),this.Ii=new YU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new WU(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ye("MemoryPersistence","Starting transaction:",e);const a=new tz(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((o=>this.referenceDelegate.di(a).next((()=>o)))).toPromise().then((o=>(a.raiseOnCommittedEvent(),o)))}Ai(e,n){return oe.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class tz extends RL{constructor(e){super(),this.currentSequenceNumber=e}}class Uv{constructor(e){this.persistence=e,this.Ri=new Lv,this.Vi=null}static mi(e){return new Uv(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),oe.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(i=>{const a=Ae.fromPath(i);return this.gi(e,a).next((o=>{o||n.removeEntry(a,Ve.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return oe.or([()=>oe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Zf{constructor(e,n){this.persistence=e,this.pi=new Ro((i=>DL(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=HU(this,n)}static mi(e,n){return new Zf(e,n)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((a=>i+a))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return oe.forEach(this.pi,((i,a)=>this.br(e,i,a).next((o=>o?oe.resolve():n(a)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,n).next((d=>{d||(i++,o.removeEntry(c,Ve.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),oe.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wf(e.data.value)),n}br(e,n,i){return oe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return oe.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class zv{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=a}static As(e,n){let i=Qe(),a=Qe();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new zv(e,n.fromCache,i,a)}}class nz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class iz{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return N5()?8:IL(En())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,a){const o={result:null};return this.ys(e,n).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,n,a,i).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new nz;return this.Ss(e,n,c).next((d=>{if(o.result=d,this.Vs)return this.bs(e,n,c,d.size)}))})).next((()=>o.result))}bs(e,n,i,a){return i.documentReadCount<this.fs?(bl()<=Ke.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",_l(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(bl()<=Ke.DEBUG&&ye("QueryEngine","Query:",_l(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(bl()<=Ke.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",_l(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(n))):oe.resolve())}ys(e,n){if(gE(n))return oe.resolve(null);let i=xr(n);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=Yf(n,null,"F"),i=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const c=Qe(...o);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((h=>{const f=this.Ds(n,d);return this.Cs(n,f,c,h.readTime)?this.ys(e,Yf(n,null,"F")):this.vs(e,f,n,h)}))))})))))}ws(e,n,i,a){return gE(n)||a.isEqual(Ve.min())?oe.resolve(null):this.ps.getDocuments(e,i).next((o=>{const c=this.Ds(n,o);return this.Cs(n,c,i,a)?oe.resolve(null):(bl()<=Ke.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),_l(n)),this.vs(e,c,n,SL(a,qu)).next((d=>d)))}))}Ds(e,n){let i=new Jt(jC(e));return n.forEach(((a,o)=>{Em(e,o)&&(i=i.add(o))})),i}Cs(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}Ss(e,n,i){return bl()<=Ke.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",_l(n)),this.ps.getDocumentsMatchingQuery(e,n,ya.min(),i)}vs(e,n,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((o=>(n.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const Bv="LocalStore",rz=3e8;class sz{constructor(e,n,i,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new Ct(Ye),this.xs=new Ro((o=>kv(o)),Dv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KU(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function az(t,e,n,i){return new sz(t,e,n,i)}async function sN(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next((o=>(a=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((o=>{const c=[],d=[];let h=Qe();for(const f of a){c.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of o){d.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return n.localDocuments.getDocuments(i,h).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:d})))}))}))}function oz(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,h,f,g){const b=f.batch,_=b.keys();let E=oe.resolve();return _.forEach((k=>{E=E.next((()=>g.getEntry(h,k))).next((A=>{const R=f.docVersions.get(k);st(R!==null,48541),A.version.compareTo(R)<0&&(b.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),g.addEntry(A)))}))})),E.next((()=>d.mutationQueue.removeMutationBatch(h,b)))})(n,i,e,o).next((()=>o.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let h=Qe();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(h=h.add(d.batch.mutations[f].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(i,a)))}))}function aN(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function lz(t,e){const n=Pe(t),i=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const d=[];e.targetChanges.forEach(((g,b)=>{const _=a.get(b);if(!_)return;d.push(n.Pi.removeMatchingKeys(o,g.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(o,g.addedDocuments,b))));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?E=E.withResumeToken(gn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,i)),a=a.insert(b,E),(function(A,R,L){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=rz?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(_,E,g)&&d.push(n.Pi.updateTargetData(o,E))}));let h=fs(),f=Qe();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))})),d.push(cz(o,c,e.documentUpdates).next((g=>{h=g.ks,f=g.qs}))),!i.isEqual(Ve.min())){const g=n.Pi.getLastRemoteSnapshotVersion(o).next((b=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));d.push(g)}return oe.waitFor(d).next((()=>c.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(n.Ms=a,o)))}function cz(t,e,n){let i=Qe(),a=Qe();return n.forEach((o=>i=i.add(o))),e.getEntries(t,i).next((o=>{let c=fs();return n.forEach(((d,h)=>{const f=o.get(d);h.isFoundDocument()!==f.isFoundDocument()&&(a=a.add(d)),h.isNoDocument()&&h.version.isEqual(Ve.min())?(e.removeEntry(d,h.readTime),c=c.insert(d,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(d,h)):ye(Bv,"Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",h.version)})),{ks:c,qs:a}}))}function uz(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Nv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function dz(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return n.Pi.getTargetData(i,e).next((o=>o?(a=o,oe.resolve(a)):n.Pi.allocateTargetId(i).next((c=>(a=new la(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=n.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function by(t,e,n){const i=Pe(t),a=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!ac(c))throw c;ye(Bv,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function RE(t,e,n){const i=Pe(t);let a=Ve.min(),o=Qe();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(h,f,g){const b=Pe(h),_=b.xs.get(g);return _!==void 0?oe.resolve(b.Ms.get(_)):b.Pi.getTargetData(f,g)})(i,c,xr(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,d.targetId).next((h=>{o=h}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,n?a:Ve.min(),n?o:Qe()))).next((d=>(hz(i,WL(e),d),{documents:d,Qs:o})))))}function hz(t,e,n){let i=t.Os.get(e)||Ve.min();n.forEach(((a,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),t.Os.set(e,i)}class IE{constructor(){this.activeTargetIds=iU()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fz{constructor(){this.Mo=new IE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new IE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mz{Oo(e){}shutdown(){}}const kE="ConnectivityMonitor";class DE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(kE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(kE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let sf=null;function _y(){return sf===null?sf=(function(){return 268435456+Math.round(2147483648*Math.random())})():sf++,"0x"+sf.toString(16)}const p0="RestConnection",pz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gz{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===$f?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,n,i,a,o){const c=_y(),d=this.zo(e,n.toUriEncodedString());ye(p0,`Sending RPC '${e}' ${c}:`,d,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,a,o);const{host:f}=new URL(d),g=nc(f);return this.Jo(e,d,h,i,g).then((b=>(ye(p0,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw ql(p0,`RPC '${e}' ${c} failed with error: `,b,"url: ",d,"request:",i),b}))}Ho(e,n,i,a,o,c){return this.Go(e,n,i,a,o)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,o)=>e[o]=a)),i&&i.headers.forEach(((a,o)=>e[o]=a))}zo(e,n){const i=pz[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}class yz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const vn="WebChannelConnection";class vz extends gz{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,a,o){const c=_y();return new Promise(((d,h)=>{const f=new cC;f.setWithCredentials(!0),f.listenOnce(uC.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case _f.NO_ERROR:const b=f.getResponseJson();ye(vn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),d(b);break;case _f.TIMEOUT:ye(vn,`RPC '${e}' ${c} timed out`),h(new pe(re.DEADLINE_EXCEEDED,"Request time out"));break;case _f.HTTP_ERROR:const _=f.getStatus();if(ye(vn,`RPC '${e}' ${c} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const k=E?.error;if(k&&k.status&&k.message){const A=(function(L){const z=L.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(z)>=0?z:re.UNKNOWN})(k.status);h(new pe(A,k.message))}else h(new pe(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new pe(re.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ye(vn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(a);ye(vn,`RPC '${e}' ${c} sending request:`,a),f.send(n,"POST",g,i,15)}))}T_(e,n,i){const a=_y(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=fC(),d=hC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const g=o.join("");ye(vn,`Creating RPC '${e}' stream ${a}: ${g}`,h);const b=c.createWebChannel(g,h);this.I_(b);let _=!1,E=!1;const k=new yz({Yo:R=>{E?ye(vn,`Not sending because RPC '${e}' stream ${a} is closed:`,R):(_||(ye(vn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),_=!0),ye(vn,`RPC '${e}' stream ${a} sending:`,R),b.send(R))},Zo:()=>b.close()}),A=(R,L,z)=>{R.listen(L,(V=>{try{z(V)}catch(G){setTimeout((()=>{throw G}),0)}}))};return A(b,yu.EventType.OPEN,(()=>{E||(ye(vn,`RPC '${e}' stream ${a} transport opened.`),k.o_())})),A(b,yu.EventType.CLOSE,(()=>{E||(E=!0,ye(vn,`RPC '${e}' stream ${a} transport closed`),k.a_(),this.E_(b))})),A(b,yu.EventType.ERROR,(R=>{E||(E=!0,ql(vn,`RPC '${e}' stream ${a} transport errored. Name:`,R.name,"Message:",R.message),k.a_(new pe(re.UNAVAILABLE,"The operation could not be completed")))})),A(b,yu.EventType.MESSAGE,(R=>{if(!E){const L=R.data[0];st(!!L,16349);const z=L,V=z?.error||z[0]?.error;if(V){ye(vn,`RPC '${e}' stream ${a} received error:`,V);const G=V.status;let ee=(function(N){const O=Kt[N];if(O!==void 0)return KC(O)})(G),te=V.message;ee===void 0&&(ee=re.INTERNAL,te="Unknown error status: "+G+" with message "+V.message),E=!0,k.a_(new pe(ee,te)),b.close()}else ye(vn,`RPC '${e}' stream ${a} received:`,L),k.u_(L)}})),A(d,dC.STAT_EVENT,(R=>{R.stat===ly.PROXY?ye(vn,`RPC '${e}' stream ${a} detected buffering proxy`):R.stat===ly.NOPROXY&&ye(vn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function g0(){return typeof document<"u"?document:null}function Nm(t){return new xU(t,!0)}class oN{constructor(e,n,i=1e3,a=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=a,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-i);a>0&&ye("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ME="PersistentStream";class lN{constructor(e,n,i,a,o,c,d,h){this.Mi=e,this.S_=i,this.b_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new oN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(hs(n.toString()),hs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===n&&this.G_(i,a)}),(i=>{e((()=>{const a=new pe(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(ME,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ye(ME,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bz extends lN{constructor(e,n,i,a,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,c),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=SU(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Ve.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Ve.min():c.readTime?Tr(c.readTime):Ve.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=vy(this.serializer),n.addTarget=(function(o,c){let d;const h=c.target;if(d=fy(h)?{documents:NU(o,h)}:{query:RU(o,h).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=XC(o,c.resumeToken);const f=py(o,c.expectedCount);f!==null&&(d.expectedCount=f)}else if(c.snapshotVersion.compareTo(Ve.min())>0){d.readTime=Wf(o,c.snapshotVersion.toTimestamp());const f=py(o,c.expectedCount);f!==null&&(d.expectedCount=f)}return d})(this.serializer,e);const i=kU(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=vy(this.serializer),n.removeTarget=e,this.q_(n)}}class _z extends lN{constructor(e,n,i,a,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=CU(e.writeResults,e.commitTime),i=Tr(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=vy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>AU(this.serializer,i)))};this.q_(n)}}class wz{}class xz extends wz{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,gy(n,i),a,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(re.UNKNOWN,o.toString())}))}Ho(e,n,i,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,gy(n,i),a,c,d,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(re.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Tz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hs(n),this.aa=!1):ye("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ao="RemoteStore";class Ez{constructor(e,n,i,a,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Io(this)&&(ye(Ao,"Restarting streams for network reachability change."),await(async function(h){const f=Pe(h);f.Ea.add(4),await md(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Rm(f)})(this))}))})),this.Ra=new Tz(i,a)}}async function Rm(t){if(Io(t))for(const e of t.da)await e(!0)}async function md(t){for(const e of t.da)await e(!1)}function cN(t,e){const n=Pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$v(n)?Hv(n):lc(n).O_()&&qv(n,e))}function Fv(t,e){const n=Pe(t),i=lc(n);n.Ia.delete(e),i.O_()&&uN(n,e),n.Ia.size===0&&(i.O_()?i.L_():Io(n)&&n.Ra.set("Unknown"))}function qv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lc(t).Y_(e)}function uN(t,e){t.Va.Ue(e),lc(t).Z_(e)}function Hv(t){t.Va=new vU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),lc(t).start(),t.Ra.ua()}function $v(t){return Io(t)&&!lc(t).x_()&&t.Ia.size>0}function Io(t){return Pe(t).Ea.size===0}function dN(t){t.Va=void 0}async function Sz(t){t.Ra.set("Online")}async function Az(t){t.Ia.forEach(((e,n)=>{qv(t,e)}))}async function Cz(t,e){dN(t),$v(t)?(t.Ra.ha(e),Hv(t)):t.Ra.set("Unknown")}async function Nz(t,e,n){if(t.Ra.set("Online"),e instanceof QC&&e.state===2&&e.cause)try{await(async function(a,o){const c=o.cause;for(const d of o.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(t,e)}catch(i){ye(Ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Jf(t,i)}else if(e instanceof Ef?t.Va.Ze(e):e instanceof YC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ve.min()))try{const i=await aN(t.localStore);n.compareTo(i)>=0&&await(function(o,c){const d=o.Va.Tt(c);return d.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(h.resumeToken,c))}})),d.targetMismatches.forEach(((h,f)=>{const g=o.Ia.get(h);if(!g)return;o.Ia.set(h,g.withResumeToken(gn.EMPTY_BYTE_STRING,g.snapshotVersion)),uN(o,h);const b=new la(g.target,h,f,g.sequenceNumber);qv(o,b)})),o.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(i){ye(Ao,"Failed to raise snapshot:",i),await Jf(t,i)}}async function Jf(t,e,n){if(!ac(e))throw e;t.Ea.add(1),await md(t),t.Ra.set("Offline"),n||(n=()=>aN(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ye(Ao,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Rm(t)}))}function hN(t,e){return e().catch((n=>Jf(t,n,e)))}async function Im(t){const e=Pe(t),n=wa(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Nv;for(;Rz(e);)try{const a=await uz(e.localStore,i);if(a===null){e.Ta.length===0&&n.L_();break}i=a.batchId,Iz(e,a)}catch(a){await Jf(e,a)}fN(e)&&mN(e)}function Rz(t){return Io(t)&&t.Ta.length<10}function Iz(t,e){t.Ta.push(e);const n=wa(t);n.O_()&&n.X_&&n.ea(e.mutations)}function fN(t){return Io(t)&&!wa(t).x_()&&t.Ta.length>0}function mN(t){wa(t).start()}async function kz(t){wa(t).ra()}async function Dz(t){const e=wa(t);for(const n of t.Ta)e.ea(n.mutations)}async function Mz(t,e,n){const i=t.Ta.shift(),a=Vv.from(i,e,n);await hN(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await Im(t)}async function Oz(t,e){e&&wa(t).X_&&await(async function(i,a){if((function(c){return pU(c)&&c!==re.ABORTED})(a.code)){const o=i.Ta.shift();wa(i).B_(),await hN(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,a))),await Im(i)}})(t,e),fN(t)&&mN(t)}async function OE(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),ye(Ao,"RemoteStore received new credentials");const i=Io(n);n.Ea.add(3),await md(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Rm(n)}async function Vz(t,e){const n=Pe(t);e?(n.Ea.delete(2),await Rm(n)):e||(n.Ea.add(2),await md(n),n.Ra.set("Unknown"))}function lc(t){return t.ma||(t.ma=(function(n,i,a){const o=Pe(n);return o.sa(),new bz(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(t.datastore,t.asyncQueue,{Xo:Sz.bind(null,t),t_:Az.bind(null,t),r_:Cz.bind(null,t),H_:Nz.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),$v(t)?Hv(t):t.Ra.set("Unknown")):(await t.ma.stop(),dN(t))}))),t.ma}function wa(t){return t.fa||(t.fa=(function(n,i,a){const o=Pe(n);return o.sa(),new _z(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:kz.bind(null,t),r_:Oz.bind(null,t),ta:Dz.bind(null,t),na:Mz.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Im(t)):(await t.fa.stop(),t.Ta.length>0&&(ye(Ao,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Gv{constructor(e,n,i,a,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,o){const c=Date.now()+i,d=new Gv(e,n,c,a,o);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kv(t,e){if(hs("AsyncQueue",`${e}: ${t}`),ac(t))return new pe(re.UNAVAILABLE,`${e}: ${t}`);throw t}class jl{static emptySet(e){return new jl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ae.comparator(n.key,i.key):(n,i)=>Ae.comparator(n.key,i.key),this.keyedMap=vu(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,o=i.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new jl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class VE{constructor(){this.ga=new Ct(Ae.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Yl{constructor(e,n,i,a,o,c,d,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,a,o){const c=[];return n.forEach((d=>{c.push({type:0,doc:d})})),new Yl(e,n,jl.emptySet(n),c,i,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}class jz{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Pz{constructor(){this.queries=jE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const a=Pe(n),o=a.queries;a.queries=jE(),o.forEach(((c,d)=>{for(const h of d.Sa)h.onError(i)}))})(this,new pe(re.ABORTED,"Firestore shutting down"))}}function jE(){return new Ro((t=>VC(t)),Tm)}async function Yv(t,e){const n=Pe(t);let i=3;const a=e.query;let o=n.queries.get(a);o?!o.ba()&&e.Da()&&(i=2):(o=new jz,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(a,!0);break;case 1:o.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=Kv(c,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(d)}n.queries.set(a,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Xv(n)}async function Qv(t,e){const n=Pe(t),i=e.query;let a=3;const o=n.queries.get(i);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?a=e.Da()?0:1:!o.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Lz(t,e){const n=Pe(t);let i=!1;for(const a of e){const o=a.query,c=n.queries.get(o);if(c){for(const d of c.Sa)d.Fa(a)&&(i=!0);c.wa=a}}i&&Xv(n)}function Uz(t,e,n){const i=Pe(t),a=i.queries.get(e);if(a)for(const o of a.Sa)o.onError(n);i.queries.delete(e)}function Xv(t){t.Ca.forEach((e=>{e.next()}))}var wy,PE;(PE=wy||(wy={})).Ma="default",PE.Cache="cache";class Wv{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Yl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wy.Cache}}class pN{constructor(e){this.key=e}}class gN{constructor(e){this.key=e}}class zz{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qe(),this.mutatedKeys=Qe(),this.eu=jC(e),this.tu=new jl(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new VE,a=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const h=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,f=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((g,b)=>{const _=a.get(g),E=Em(this.query,b)?b:null,k=!!_&&this.mutatedKeys.has(_.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let R=!1;_&&E?_.data.isEqual(E.data)?k!==A&&(i.track({type:3,doc:E}),R=!0):this.su(_,E)||(i.track({type:2,doc:E}),R=!0,(h&&this.eu(E,h)>0||f&&this.eu(E,f)<0)&&(d=!0)):!_&&E?(i.track({type:0,doc:E}),R=!0):_&&!E&&(i.track({type:1,doc:_}),R=!0,(h||f)&&(d=!0)),R&&(E?(c=c.add(E),o=A?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:c,iu:i,Cs:d,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,b)=>(function(E,k){const A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:R})}};return A(E)-A(k)})(g.type,b.type)||this.eu(g.doc,b.doc))),this.ou(i),a=a??!1;const d=n&&!a?this._u():[],h=this.Xa.size===0&&this.current&&!a?1:0,f=h!==this.Za;return this.Za=h,c.length!==0||f?{snapshot:new Yl(this.query,e.tu,o,c,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new VE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Qe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new gN(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new pN(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Qe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zv="SyncEngine";class Bz{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Fz{constructor(e){this.key=e,this.hu=!1}}class qz{constructor(e,n,i,a,o,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ro((d=>VC(d)),Tm),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(Ae.comparator),this.Au=new Map,this.Ru=new Lv,this.Vu={},this.mu=new Map,this.fu=Kl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Hz(t,e,n=!0){const i=xN(t);let a;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.lu()):a=await yN(i,e,n,!0),a}async function $z(t,e){const n=xN(t);await yN(n,e,!0,!1)}async function yN(t,e,n,i){const a=await dz(t.localStore,xr(e)),o=a.targetId,c=t.sharedClientState.addLocalQueryTarget(o,n);let d;return i&&(d=await Gz(t,e,o,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&cN(t.remoteStore,a),d}async function Gz(t,e,n,i,a){t.pu=(b,_,E)=>(async function(A,R,L,z){let V=R.view.ru(L);V.Cs&&(V=await RE(A.localStore,R.query,!1).then((({documents:S})=>R.view.ru(S,V))));const G=z&&z.targetChanges.get(R.targetId),ee=z&&z.targetMismatches.get(R.targetId)!=null,te=R.view.applyChanges(V,A.isPrimaryClient,G,ee);return UE(A,R.targetId,te.au),te.snapshot})(t,b,_,E);const o=await RE(t.localStore,e,!0),c=new zz(e,o.Qs),d=c.ru(o.documents),h=fd.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",a),f=c.applyChanges(d,t.isPrimaryClient,h);UE(t,n,f.au);const g=new Bz(e,n,c);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function Kz(t,e,n){const i=Pe(t),a=i.Tu.get(e),o=i.Iu.get(a.targetId);if(o.length>1)return i.Iu.set(a.targetId,o.filter((c=>!Tm(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await by(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),n&&Fv(i.remoteStore,a.targetId),xy(i,a.targetId)})).catch(sc)):(xy(i,a.targetId),await by(i.localStore,a.targetId,!0))}async function Yz(t,e){const n=Pe(t),i=n.Tu.get(e),a=n.Iu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Fv(n.remoteStore,i.targetId))}async function Qz(t,e,n){const i=n8(t);try{const a=await(function(c,d){const h=Pe(c),f=We.now(),g=d.reduce(((E,k)=>E.add(k.key)),Qe());let b,_;return h.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let k=fs(),A=Qe();return h.Ns.getEntries(E,g).next((R=>{k=R,k.forEach(((L,z)=>{z.isValidDocument()||(A=A.add(L))}))})).next((()=>h.localDocuments.getOverlayedDocuments(E,k))).next((R=>{b=R;const L=[];for(const z of d){const V=uU(z,b.get(z.key).overlayedDocument);V!=null&&L.push(new Ra(z.key,V,CC(V.value.mapValue),Ti.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,L,d)})).next((R=>{_=R;const L=R.applyToLocalDocumentSet(b,A);return h.documentOverlayCache.saveOverlays(E,R.batchId,L)}))})).then((()=>({batchId:_.batchId,changes:LC(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,h){let f=c.Vu[c.currentUser.toKey()];f||(f=new Ct(Ye)),f=f.insert(d,h),c.Vu[c.currentUser.toKey()]=f})(i,a.batchId,n),await pd(i,a.changes),await Im(i.remoteStore)}catch(a){const o=Kv(a,"Failed to persist write");n.reject(o)}}async function vN(t,e){const n=Pe(t);try{const i=await lz(n.localStore,e);e.targetChanges.forEach(((a,o)=>{const c=n.Au.get(o);c&&(st(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?st(c.hu,14607):a.removedDocuments.size>0&&(st(c.hu,42227),c.hu=!1))})),await pd(n,i,e)}catch(i){await sc(i)}}function LE(t,e,n){const i=Pe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.Tu.forEach(((o,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const h=Pe(c);h.onlineState=d;let f=!1;h.queries.forEach(((g,b)=>{for(const _ of b.Sa)_.va(d)&&(f=!0)})),f&&Xv(h)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Xz(t,e,n){const i=Pe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Au.get(e),o=a&&a.key;if(o){let c=new Ct(Ae.comparator);c=c.insert(o,wn.newNoDocument(o,Ve.min()));const d=Qe().add(o),h=new Cm(Ve.min(),new Map,new Ct(Ye),c,d);await vN(i,h),i.du=i.du.remove(o),i.Au.delete(e),Jv(i)}else await by(i.localStore,e,!1).then((()=>xy(i,e,n))).catch(sc)}async function Wz(t,e){const n=Pe(t),i=e.batch.batchId;try{const a=await oz(n.localStore,e);_N(n,i,null),bN(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await pd(n,a)}catch(a){await sc(a)}}async function Zz(t,e,n){const i=Pe(t);try{const a=await(function(c,d){const h=Pe(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return h.mutationQueue.lookupMutationBatch(f,d).next((b=>(st(b!==null,37113),g=b.keys(),h.mutationQueue.removeMutationBatch(f,b)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>h.localDocuments.getDocuments(f,g)))}))})(i.localStore,e);_N(i,e,n),bN(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await pd(i,a)}catch(a){await sc(a)}}function bN(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function _N(t,e,n){const i=Pe(t);let a=i.Vu[i.currentUser.toKey()];if(a){const o=a.get(e);o&&(n?o.reject(n):o.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function xy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((i=>{t.Ru.containsKey(i)||wN(t,i)}))}function wN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Fv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Jv(t))}function UE(t,e,n){for(const i of n)i instanceof pN?(t.Ru.addReference(i.key,e),Jz(t,i)):i instanceof gN?(ye(Zv,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||wN(t,i.key)):De(19791,{wu:i})}function Jz(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ye(Zv,"New document in limbo: "+n),t.Eu.add(i),Jv(t))}function Jv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ae(vt.fromString(e)),i=t.fu.next();t.Au.set(i,new Fz(n)),t.du=t.du.insert(n,i),cN(t.remoteStore,new la(xr(xm(n.path)),i,"TargetPurposeLimboResolution",bm.ce))}}async function pd(t,e,n){const i=Pe(t),a=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,h)=>{c.push(i.pu(h,e,n).then((f=>{if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:n?.targetChanges.get(h.targetId)?.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){a.push(f);const g=zv.As(h.targetId,f);o.push(g)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(h,f){const g=Pe(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>oe.forEach(f,(_=>oe.forEach(_.Es,(E=>g.persistence.referenceDelegate.addReference(b,_.targetId,E))).next((()=>oe.forEach(_.ds,(E=>g.persistence.referenceDelegate.removeReference(b,_.targetId,E)))))))))}catch(b){if(!ac(b))throw b;ye(Bv,"Failed to update sequence numbers: "+b)}for(const b of f){const _=b.targetId;if(!b.fromCache){const E=g.Ms.get(_),k=E.snapshotVersion,A=E.withLastLimboFreeSnapshotVersion(k);g.Ms=g.Ms.insert(_,A)}}})(i.localStore,o))}async function e8(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){ye(Zv,"User change. New user:",e.toKey());const i=await sN(n.localStore,e);n.currentUser=e,(function(o,c){o.mu.forEach((d=>{d.forEach((h=>{h.reject(new pe(re.CANCELLED,c))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await pd(n,i.Ls)}}function t8(t,e){const n=Pe(t),i=n.Au.get(e);if(i&&i.hu)return Qe().add(i.key);{let a=Qe();const o=n.Iu.get(e);if(!o)return a;for(const c of o){const d=n.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function xN(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=t8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xz.bind(null,e),e.Pu.H_=Lz.bind(null,e.eventManager),e.Pu.yu=Uz.bind(null,e.eventManager),e}function n8(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zz.bind(null,e),e}class em{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return az(this.persistence,new iz,e.initialUser,this.serializer)}Cu(e){return new rN(Uv.mi,this.serializer)}Du(e){return new fz}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}em.provider={build:()=>new em};class i8 extends em{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){st(this.persistence.referenceDelegate instanceof Zf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new FU(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new rN((i=>Zf.mi(i,n)),this.serializer)}}class Ty{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>LE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=e8.bind(null,this.syncEngine),await Vz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Pz})()}createDatastore(e){const n=Nm(e.databaseInfo.databaseId),i=(function(o){return new vz(o)})(e.databaseInfo);return(function(o,c,d,h){return new xz(o,c,d,h)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,a,o,c,d){return new Ez(i,a,o,c,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>LE(this.syncEngine,n,0)),(function(){return DE.v()?new DE:new mz})())}createSyncEngine(e,n){return(function(a,o,c,d,h,f,g){const b=new qz(a,o,c,d,h,f);return g&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Pe(n);ye(Ao,"RemoteStore shutting down."),i.Ea.add(5),await md(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ty.provider={build:()=>new Ty};class eb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const xa="FirestoreClient";class r8{constructor(e,n,i,a,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=_n.UNAUTHENTICATED,this.clientId=Cv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async c=>{ye(xa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ye(xa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Kv(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function y0(t,e){t.asyncQueue.verifyOperationInProgress(),ye(xa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async a=>{i.isEqual(a)||(await sN(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function zE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await s8(t);ye(xa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>OE(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,a)=>OE(e.remoteStore,a))),t._onlineComponents=e}async function s8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ye(xa,"Using user provided OfflineComponentProvider");try{await y0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===re.FAILED_PRECONDITION||a.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;ql("Error using user provided cache. Falling back to memory cache: "+n),await y0(t,new em)}}else ye(xa,"Using default OfflineComponentProvider"),await y0(t,new i8(void 0));return t._offlineComponents}async function TN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ye(xa,"Using user provided OnlineComponentProvider"),await zE(t,t._uninitializedComponentsProvider._online)):(ye(xa,"Using default OnlineComponentProvider"),await zE(t,new Ty))),t._onlineComponents}function a8(t){return TN(t).then((e=>e.syncEngine))}async function tm(t){const e=await TN(t),n=e.eventManager;return n.onListen=Hz.bind(null,e.syncEngine),n.onUnlisten=Kz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$z.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Yz.bind(null,e.syncEngine),n}function o8(t,e,n={}){const i=new as;return t.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,h,f){const g=new eb({next:_=>{g.Nu(),c.enqueueAndForget((()=>Qv(o,b)));const E=_.docs.has(d);!E&&_.fromCache?f.reject(new pe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&h&&h.source==="server"?f.reject(new pe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),b=new Wv(xm(d.path),g,{includeMetadataChanges:!0,qa:!0});return Yv(o,b)})(await tm(t),t.asyncQueue,e,n,i))),i.promise}function l8(t,e,n={}){const i=new as;return t.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,h,f){const g=new eb({next:_=>{g.Nu(),c.enqueueAndForget((()=>Qv(o,b))),_.fromCache&&h.source==="server"?f.reject(new pe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),b=new Wv(d,g,{includeMetadataChanges:!0,qa:!0});return Yv(o,b)})(await tm(t),t.asyncQueue,e,n,i))),i.promise}function EN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const BE=new Map;const SN="firestore.googleapis.com",FE=!0;class qE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SN,this.ssl=FE}else this.host=e.host,this.ssl=e.ssl??FE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zU)throw new pe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=EN(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class km{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new mL;switch(i.type){case"firstParty":return new vL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=BE.get(n);i&&(ye("ComponentProvider","Removing Datastore"),BE.delete(n),i.terminate())})(this),Promise.resolve()}}function c8(t,e,n,i={}){t=Bn(t,km);const a=nc(e),o=t._getSettings(),c={...o,emulatorOptions:t._getEmulatorOptions()},d=`${e}:${n}`;a&&(v2(`https://${d}`),b2("Firestore",!0)),o.host!==SN&&o.host!==d&&ql("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:d,ssl:a,emulatorOptions:i};if(!wo(h,c)&&(t._setSettings(h),i.mockUserToken)){let f,g;if(typeof i.mockUserToken=="string")f=i.mockUserToken,g=_n.MOCK_USER;else{f=b5(i.mockUserToken,t._app?.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new pe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new _n(b)}t._authCredentials=new pL(new pC(f,g))}}class ys{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ys(this.firestore,e,this._query)}}class Dt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}toJSON(){return{type:Dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(dd(n,Dt._jsonSchema))return new Dt(e,i||null,new Ae(vt.fromString(n.referencePath)))}}Dt._jsonSchemaVersion="firestore/documentReference/1.0",Dt._jsonSchema={type:Xt("string",Dt._jsonSchemaVersion),referencePath:Xt("string")};class fa extends ys{constructor(e,n,i){super(e,n,xm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new Ae(e))}withConverter(e){return new fa(this.firestore,e,this._path)}}function mr(t,e,...n){if(t=At(t),gC("collection","path",e),t instanceof km){const i=vt.fromString(e,...n);return nE(i),new fa(t,null,i)}{if(!(t instanceof Dt||t instanceof fa))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vt.fromString(e,...n));return nE(i),new fa(t.firestore,null,i)}}function kt(t,e,...n){if(t=At(t),arguments.length===1&&(e=Cv.newId()),gC("doc","path",e),t instanceof km){const i=vt.fromString(e,...n);return tE(i),new Dt(t,null,new Ae(i))}{if(!(t instanceof Dt||t instanceof fa))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vt.fromString(e,...n));return tE(i),new Dt(t.firestore,t instanceof fa?t.converter:null,new Ae(i))}}const HE="AsyncQueue";class $E{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new oN(this,"async_queue_retry"),this._c=()=>{const i=g0();i&&ye(HE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=g0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=g0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new as;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ac(e))throw e;ye(HE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,hs("INTERNAL UNHANDLED ERROR: ",GE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=Gv.createAndSchedule(this,e,n,i,(o=>this.hc(o)));return this.tc.push(a),a}uc(){this.nc&&De(47125,{Pc:GE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function GE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function KE(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const a=n;for(const o of i)if(o in a&&typeof a[o]=="function")return!0;return!1})(t,["next","error","complete"])}class ms extends km{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new $E,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $E(e),this._firestoreClient=void 0,await e}}}function u8(t,e){const n=typeof t=="object"?t:T2(),i=typeof t=="string"?t:$f,a=yv(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const o=y5("firestore");o&&c8(a,...o)}return a}function Dm(t){if(t._terminated)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||d8(t),t._firestoreClient}function d8(t){const e=t._freezeSettings(),n=(function(a,o,c,d){return new VL(a,o,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,EN(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new r8(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(a){const o=a?._online.build();return{_offline:a?._offline.build(o),_online:o}})(t._componentsProvider))}class _i{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _i(gn.fromBase64String(e))}catch(n){throw new pe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _i(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_i._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dd(e,_i._jsonSchema))return _i.fromBase64String(e.bytes)}}_i._jsonSchemaVersion="firestore/bytes/1.0",_i._jsonSchema={type:Xt("string",_i._jsonSchemaVersion),bytes:Xt("string")};class Mm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tb{constructor(e){this._methodName=e}}class Er{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Er._jsonSchemaVersion}}static fromJSON(e){if(dd(e,Er._jsonSchema))return new Er(e.latitude,e.longitude)}}Er._jsonSchemaVersion="firestore/geoPoint/1.0",Er._jsonSchema={type:Xt("string",Er._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};class Sr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==a[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dd(e,Sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Sr(e.vectorValues);throw new pe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sr._jsonSchemaVersion="firestore/vectorValue/1.0",Sr._jsonSchema={type:Xt("string",Sr._jsonSchemaVersion),vectorValues:Xt("object")};const h8=/^__.*__$/;class f8{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ra(e,this.data,this.fieldMask,n,this.fieldTransforms):new hd(e,this.data,n,this.fieldTransforms)}}class AN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ra(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function CN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:t})}}class nb{constructor(e,n,i,a,o,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new nb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(CN(this.Ac)&&h8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class m8{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Nm(e)}Cc(e,n,i,a=!1){return new nb({Ac:e,methodName:n,Dc:i,path:mn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Om(t){const e=t._freezeSettings(),n=Nm(t._databaseId);return new m8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function NN(t,e,n,i,a,o={}){const c=t.Cc(o.merge||o.mergeFields?2:0,e,n,a);ib("Data must be an object, but it was:",c,i);const d=RN(i,c);let h,f;if(o.merge)h=new ei(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const b of o.mergeFields){const _=Ey(e,b,n);if(!c.contains(_))throw new pe(re.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);kN(g,_)||g.push(_)}h=new ei(g),f=c.fieldTransforms.filter((b=>h.covers(b.field)))}else h=null,f=c.fieldTransforms;return new f8(new Un(d),h,f)}class Vm extends tb{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vm}}function p8(t,e,n,i){const a=t.Cc(1,e,n);ib("Data must be an object, but it was:",a,i);const o=[],c=Un.empty();Na(i,((h,f)=>{const g=rb(e,h,n);f=At(f);const b=a.yc(g);if(f instanceof Vm)o.push(g);else{const _=gd(f,b);_!=null&&(o.push(g),c.set(g,_))}}));const d=new ei(o);return new AN(c,d,a.fieldTransforms)}function g8(t,e,n,i,a,o){const c=t.Cc(1,e,n),d=[Ey(e,i,n)],h=[a];if(o.length%2!=0)throw new pe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)d.push(Ey(e,o[_])),h.push(o[_+1]);const f=[],g=Un.empty();for(let _=d.length-1;_>=0;--_)if(!kN(f,d[_])){const E=d[_];let k=h[_];k=At(k);const A=c.yc(E);if(k instanceof Vm)f.push(E);else{const R=gd(k,A);R!=null&&(f.push(E),g.set(E,R))}}const b=new ei(f);return new AN(g,b,c.fieldTransforms)}function y8(t,e,n,i=!1){return gd(n,t.Cc(i?4:3,e))}function gd(t,e){if(IN(t=At(t)))return ib("Unsupported field value:",e,t),RN(t,e);if(t instanceof tb)return(function(i,a){if(!CN(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(a);o&&a.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const o=[];let c=0;for(const d of i){let h=gd(d,a.wc(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}})(t,e)}return(function(i,a){if((i=At(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return rU(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=We.fromDate(i);return{timestampValue:Wf(a.serializer,o)}}if(i instanceof We){const o=new We(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Wf(a.serializer,o)}}if(i instanceof Er)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _i)return{bytesValue:XC(a.serializer,i._byteString)};if(i instanceof Dt){const o=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Pv(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Sr)return(function(c,d){return{mapValue:{fields:{[SC]:{stringValue:AC},[Gf]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw d.Sc("VectorValues must only contain numeric values.");return Mv(d.serializer,f)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${vm(i)}`)})(t,e)}function RN(t,e){const n={};return bC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Na(t,((i,a)=>{const o=gd(a,e.mc(i));o!=null&&(n[i]=o)})),{mapValue:{fields:n}}}function IN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof Er||t instanceof _i||t instanceof Dt||t instanceof tb||t instanceof Sr)}function ib(t,e,n){if(!IN(n)||!yC(n)){const i=vm(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Ey(t,e,n){if((e=At(e))instanceof Mm)return e._internalPath;if(typeof e=="string")return rb(t,e);throw nm("Field path arguments must be of type string or ",t,!1,void 0,n)}const v8=new RegExp("[~\\*/\\[\\]]");function rb(t,e,n){if(e.search(v8)>=0)throw nm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Mm(...e.split("."))._internalPath}catch{throw nm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nm(t,e,n,i,a){const o=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${i}`),c&&(h+=` in document ${a}`),h+=")"),new pe(re.INVALID_ARGUMENT,d+t+h)}function kN(t,e){return t.some((n=>n.isEqual(e)))}class DN{constructor(e,n,i,a,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new b8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class b8 extends DN{data(){return super.data()}}function jm(t,e){return typeof e=="string"?rb(t,e):e instanceof Mm?e._internalPath:e._delegate._internalPath}function MN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sb{}class ab extends sb{}function Bi(t,e,...n){let i=[];e instanceof sb&&i.push(e),i=i.concat(n),(function(o){const c=o.filter((h=>h instanceof ob)).length,d=o.filter((h=>h instanceof Pm)).length;if(c>1||c>0&&d>0)throw new pe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)t=a._apply(t);return t}class Pm extends ab{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Pm(e,n,i)}_apply(e){const n=this._parse(e);return ON(e._query,n),new ys(e.firestore,e.converter,my(e._query,n))}_parse(e){const n=Om(e.firestore);return(function(o,c,d,h,f,g,b){let _;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new pe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){XE(b,g);const k=[];for(const A of b)k.push(QE(h,o,A));_={arrayValue:{values:k}}}else _=QE(h,o,b)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||XE(b,g),_=y8(d,c,b,g==="in"||g==="not-in");return Qt.create(f,g,_)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ws(t,e,n){const i=e,a=jm("where",t);return Pm._create(a,i,n)}class ob extends sb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ob(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Hi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,o){let c=a;const d=o.getFlattenedFilters();for(const h of d)ON(c,h),c=my(c,h)})(e._query,n),new ys(e.firestore,e.converter,my(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lb extends ab{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new lb(e,n)}_apply(e){const n=(function(a,o,c){if(a.startAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ku(o,c)})(e._query,this._field,this._direction);return new ys(e.firestore,e.converter,(function(a,o){const c=a.explicitOrderBy.concat([o]);return new oc(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function Xu(t,e="asc"){const n=e,i=jm("orderBy",t);return lb._create(i,n)}class cb extends ab{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new cb(e,n,i)}_apply(e){return new ys(e.firestore,e.converter,Yf(e._query,this._limit,this._limitType))}}function YE(t){return cb._create("limit",t,"F")}function QE(t,e,n){if(typeof(n=At(n))=="string"){if(n==="")throw new pe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OC(e)&&n.indexOf("/")!==-1)throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(vt.fromString(n));if(!Ae.isDocumentKey(i))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return uE(t,new Ae(i))}if(n instanceof Dt)return uE(t,n._key);throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vm(n)}.`)}function XE(t,e){if(!Array.isArray(t)||t.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ON(t,e){const n=(function(a,o){for(const c of a)for(const d of c.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _8{convertValue(e,n="none"){switch(_a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Na(e,((a,o)=>{i[a]=this.convertValue(o,n)})),i}convertVectorValue(e){const n=e.fields?.[Gf].arrayValue?.values?.map((i=>Lt(i.doubleValue)));return new Sr(n)}convertGeoPoint(e){return new Er(Lt(e.latitude),Lt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=wm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Hu(e));default:return null}}convertTimestamp(e){const n=va(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=vt.fromString(e);st(nN(i),9688,{name:e});const a=new $u(i.get(1),i.get(3)),o=new Ae(i.popFirst(5));return a.isEqual(n)||hs(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function VN(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class _u{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yo extends DN{constructor(e,n,i,a,o,c){super(e,n,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(jm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=yo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",yo._jsonSchema={type:Xt("string",yo._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Sf extends yo{data(e={}){return super.data(e)}}class vo{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new _u(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Sf(this._firestore,this._userDataWriter,i.key,i,new _u(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const h=new Sf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new _u(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const h=new Sf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new _u(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let f=-1,g=-1;return d.type!==0&&(f=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),g=c.indexOf(d.doc.key)),{type:w8(d.type),doc:h,oldIndex:f,newIndex:g}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],a=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function w8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:t})}}function x8(t){t=Bn(t,Dt);const e=Bn(t.firestore,ms);return o8(Dm(e),t._key).then((n=>jN(e,t,n)))}vo._jsonSchemaVersion="firestore/querySnapshot/1.0",vo._jsonSchema={type:Xt("string",vo._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class ub extends _8{constructor(e){super(),this.firestore=e}convertBytes(e){return new _i(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}}function Ql(t){t=Bn(t,ys);const e=Bn(t.firestore,ms),n=Dm(e),i=new ub(e);return MN(t._query),l8(n,t._query).then((a=>new vo(e,i,t,a)))}function sa(t,e,n){t=Bn(t,Dt);const i=Bn(t.firestore,ms),a=VN(t.converter,e,n);return Um(i,[NN(Om(i),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,Ti.none())])}function yd(t,e,n,...i){t=Bn(t,Dt);const a=Bn(t.firestore,ms),o=Om(a);let c;return c=typeof(e=At(e))=="string"||e instanceof Mm?g8(o,"updateDoc",t._key,e,n,i):p8(o,"updateDoc",t._key,e),Um(a,[c.toMutation(t._key,Ti.exists(!0))])}function Xl(t){return Um(Bn(t.firestore,ms),[new Ov(t._key,Ti.none())])}function Lm(t,e){const n=Bn(t.firestore,ms),i=kt(t),a=VN(t.converter,e);return Um(n,[NN(Om(t.firestore),"addDoc",i._key,a,t.converter!==null,{}).toMutation(i._key,Ti.exists(!1))]).then((()=>i))}function bo(t,...e){t=At(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||KE(e[i])||(n=e[i++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(KE(e[i])){const h=e[i];e[i]=h.next?.bind(h),e[i+1]=h.error?.bind(h),e[i+2]=h.complete?.bind(h)}let o,c,d;if(t instanceof Dt)c=Bn(t.firestore,ms),d=xm(t._key.path),o={next:h=>{e[i]&&e[i](jN(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=Bn(t,ys);c=Bn(h.firestore,ms),d=h._query;const f=new ub(c);o={next:g=>{e[i]&&e[i](new vo(c,f,h,g))},error:e[i+1],complete:e[i+2]},MN(t._query)}return(function(f,g,b,_){const E=new eb(_),k=new Wv(g,E,b);return f.asyncQueue.enqueueAndForget((async()=>Yv(await tm(f),k))),()=>{E.Nu(),f.asyncQueue.enqueueAndForget((async()=>Qv(await tm(f),k)))}})(Dm(c),d,a,o)}function Um(t,e){return(function(i,a){const o=new as;return i.asyncQueue.enqueueAndForget((async()=>Qz(await a8(i),a,o))),o.promise})(Dm(t),e)}function jN(t,e,n){const i=n.docs.get(e._key),a=new ub(t);return new yo(t,a,e._key,i,new _u(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(a){rc=a})(ic),Bl(new xo("firestore",((i,{instanceIdentifier:a,options:o})=>{const c=i.getProvider("app").getImmediate(),d=new ms(new gL(i.getProvider("auth-internal")),new bL(c,i.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new pe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $u(f.options.projectId,g)})(c,a),c);return o={useFetchStreams:n,...o},d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),da(WT,ZT,e),da(WT,ZT,"esm2020")})();const T8={apiKey:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:d7a8169fd53f437e42aba9"},PN=x2(T8),Zs=uL(PN),ct=u8(PN),v0=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),Ei=um()(fv(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const a=(await KP(Zs,e,n)).user;if(!a.emailVerified)return await zT(Zs),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${a.email} not verified`),!1;const o=v0(a);return t({currentUser:o,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${o.email}`),!0}catch(i){console.error("Login error:",i),console.error("Error code:",i.code),console.error("Error message:",i.message);let a="Login failed. Please try again.";if(i.code)switch(i.code){case"auth/invalid-email":a="Invalid email address.";break;case"auth/user-disabled":a="This account has been disabled.";break;case"auth/user-not-found":a="No account found with this email.";break;case"auth/wrong-password":a="Incorrect password.";break;case"auth/too-many-requests":a="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":a="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":a="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${i.code}`),a="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",i),a="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},register:async(e,n,i)=>{t({isLoading:!0,loginError:null});try{const o=(await GP(Zs,e,n)).user;await QP(o,{displayName:i}),await UT(o);const c=v0(o);return t({currentUser:c,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${c.email}, verification email sent`),!0}catch(a){console.error("Registration error:",a);let o="Registration failed. Please try again.";switch(a.code){case"auth/email-already-in-use":o="An account with this email already exists.";break;case"auth/invalid-email":o="Invalid email address.";break;case"auth/weak-password":o="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":o="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:o}),!1}},logout:async()=>{try{await zT(Zs),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await $P(Zs,e),t({isLoading:!1}),!0}catch(n){console.error("Password reset error:",n);let i="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":i="No account found with this email.";break;case"auth/invalid-email":i="Invalid email address.";break;case"auth/too-many-requests":i="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:i}),!1}},sendEmailVerification:async()=>{const e=Zs.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await UT(e),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(n){console.error("Email verification error:",n);let i="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":i="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:i}),!1}},resendEmailVerification:async()=>{const e=Ei.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,i=60*1e3;if(n<i){const a=Math.ceil((i-n)/1e3);return t({loginError:`Please wait ${a} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},deleteAccount:async e=>{const n=Zs.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const i=No.credential(n.email,e);return await HP(n,i),await JP(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${n.email}`),!0}catch(i){console.error("Account deletion error:",i);let a="Failed to delete account. Please try again.";switch(i.code){case"auth/requires-recent-login":a="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":a="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":a="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":a="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:a}),!1}},initializeAuth:()=>Ei.getState().isInitialized?()=>{}:(t({isInitialized:!1}),ZP(Zs,i=>{const a=Date.now(),o=Ei.getState(),c=i?v0(i):null,d=o.lastAuthTime&&a-o.lastAuthTime<o.offlineGracePeriod,f=typeof navigator<"u"&&!navigator.onLine&&o.isAuthenticated&&d&&!c,g=i?i.emailVerified:!0,b=i&&g||!!f,_=i?c:f?o.currentUser:null;t({currentUser:_,isAuthenticated:b,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:i&&g?a:o.lastAuthTime}),_?console.log(` Auth state: User is signed in (${_.email})`,f?"(offline grace period)":g?"(verified)":"(unverified)"):console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),b0=t=>mr(ct,"users",t,"transactions"),yr={subscribeToTransactions:(t,e)=>{const n=Bi(b0(t),Xu("date","desc"));return bo(n,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));e(o)})},getAllTransactions:async t=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=Bi(b0(t),Xu("date","desc")),i=(await Ql(e)).docs.map(a=>({id:a.id,...a.data()}));return console.log(` Fetched ${i.length} transactions:`,i.map(a=>({id:a.id,description:a.description}))),i},addTransaction:async t=>{const{userId:e,id:n,...i}=t;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,i),console.log(` Original transaction had temp ID: ${n}`);try{console.log(" About to call addDoc with:",i);const a=await Lm(b0(e),i);console.log(" addDoc succeeded, docRef:",a),console.log(` Document ID: ${a.id}`),console.log(` Document path: ${a.path}`);const o={id:a.id,...i,userId:e};return console.log(" Final result object:",o),o}catch(a){throw console.error(" addDoc failed:",a),console.error("Error message:",a.message),a}},updateTransaction:async(t,e,n)=>{const i=kt(ct,"users",t,"transactions",e);return await yd(i,n)},deleteTransaction:async(t,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=kt(ct,"users",t,"transactions",e);console.log(` Deleting document at path: ${n.path}`),await Xl(n),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n),console.error("Error message:",n.message),n}}},_0=t=>mr(ct,"users",t,"envelopes"),aa={subscribeToEnvelopes:(t,e)=>{const n=Bi(_0(t),Xu("orderIndex","asc"));return bo(n,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));e(o)})},getAllEnvelopes:async t=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=_0(t),a=(await Ql(e)).docs.map((o,c)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??c})).sort((o,c)=>{const d=o.orderIndex??0,h=c.orderIndex??0;return d-h});return console.log(" Fetched envelopes:",a.length),a}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...i}=t;if(!e)throw new Error("User ID is required to create envelope");console.log(` EnvelopeService.createEnvelope: Adding envelope for user ${e}:`,i),console.log(` Original envelope had temp ID: ${n}`);try{const a=await Lm(_0(e),i);console.log(" Envelope addDoc succeeded, docRef:",a),console.log(` Document ID: ${a.id}`);const o={id:a.id,...i,userId:e};return console.log(" Final envelope result object:",o),o}catch(a){throw console.error(" Envelope addDoc failed:",a),a}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=kt(ct,"users",t,"envelopes",e.id);return await sa(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const i=kt(ct,"users",t,"envelopes",e);return await yd(i,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=kt(ct,"users",t,"envelopes",e);await Xl(n),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},E8=({set:t,get:e,getCurrentUserId:n,isNetworkError:i})=>{const a=o=>({id:o.id,date:o.date?.toDate?.()?o.date.toDate().toISOString():o.date,amount:parseFloat(o.amount)||0,description:o.description||"",envelopeId:o.envelopeId||"",reconciled:o.reconciled||!1,type:o.type==="income"?"Income":o.type==="expense"?"Expense":"Transfer",transferId:o.transferId||void 0,userId:o.userId||void 0});return{createEnvelope:async o=>{const c=o.currentBalance&&o.currentBalance>0,d=c?{...o,currentBalance:0,orderIndex:o.orderIndex??0}:{...o,orderIndex:o.orderIndex??0},h=`temp-${Date.now()}-${Math.random()}`,f={...d,id:h};if(t(g=>({envelopes:[...g.envelopes,f],isLoading:!0})),c){console.log(` Creating initial deposit transaction locally first: ${f.name} (tempId: ${h})`);try{await e().addTransaction({description:"Initial Deposit",amount:o.currentBalance,envelopeId:h,date:new Date().toISOString(),type:"Income",reconciled:!1}),console.log(" Initial deposit transaction created locally");const g=e().getEnvelopeBalance(h);console.log(` Test balance for temp envelope ${h}: $${g.toNumber()}`)}catch(g){console.error(" Failed to create initial deposit transaction locally:",g)}}try{console.log(" Attempting Firebase envelope creation...");const g=n(),b={...d,id:"",userId:g},_=await aa.createEnvelope(b);console.log(" Firebase envelope creation successful:",_);const E={id:_.id,name:_.name,currentBalance:_.currentBalance,lastUpdated:_.lastUpdated,isActive:_.isActive??!0,orderIndex:_.orderIndex??0,userId:_.userId};if(t(k=>({envelopes:k.envelopes.map(A=>A.id===h?E:A),isLoading:!1,pendingSync:!1})),c){console.log(` Updating transactions from temp envelope ID ${h} to real ID ${_.id}`),console.log(" Transactions before update:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description}))),t(A=>({transactions:A.transactions.map(R=>R.envelopeId===h?{...R,envelopeId:_.id}:R)})),console.log(" Transactions after envelopeId update:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description})));const k=e().transactions.filter(A=>A.envelopeId===_.id&&A.id&&A.id.startsWith("temp-"));console.log(` Found ${k.length} transactions to sync for envelope ${_.id}:`,k.map(A=>({id:A.id,envelopeId:A.envelopeId})));for(const A of k)try{console.log(" Syncing transaction:",A);const R={...A,amount:A.amount.toString(),type:A.type.toLowerCase(),date:We.fromDate(new Date(A.date))},L=await yr.addTransaction(R);console.log(" Transaction synced:",L);const z=a(L);console.log(` Replacing temp transaction ${A.id} with Firebase transaction ${L.id}`),t(V=>({transactions:V.transactions.map(G=>G.id===A.id?z:G)}))}catch(R){console.error(` Failed to sync transaction ${A.id}:`,R)}console.log(" Final transactions after sync:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description}))),t({pendingSync:!1}),console.log(` All transactions synced for envelope ${_.id}`)}}catch(g){console.error("Create Envelope Failed:",g),console.log("Error details:",{code:g?.code,message:g?.message,name:g?.name,isNetworkError:i(g)}),i(g)?(console.log(" Treating as offline scenario - keeping temp envelope and transactions"),t({isLoading:!1,pendingSync:!0,error:null})):(console.log(" Real error - removing temp envelope"),t(b=>({envelopes:b.envelopes.filter(_=>_.id!==h),transactions:b.transactions.filter(_=>_.envelopeId!==h),error:g.message,isLoading:!1})))}},addToEnvelope:async(o,c,d,h)=>{const f=h?typeof h=="string"?h:h.toISOString():new Date().toISOString();await e().addTransaction({description:d,amount:c,envelopeId:o,date:f,type:"Income",reconciled:!1})},spendFromEnvelope:async(o,c,d,h)=>{const f=h?typeof h=="string"?h:h.toISOString():new Date().toISOString();await e().addTransaction({description:d,amount:c,envelopeId:o,date:f,type:"Expense",reconciled:!1})},transferFunds:async(o,c,d,h,f)=>{console.log(`Transferring ${d} from ${o} to ${c} with note: ${h}`);const g=f?typeof f=="string"?f:f.toISOString():new Date().toISOString(),b=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(_=>_.id===c)?.name||"envelope"}`,amount:d,envelopeId:o,date:g,type:"Expense",transferId:b,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(_=>_.id===o)?.name||"envelope"}`,amount:d,envelopeId:c,date:g,type:"Income",transferId:b,reconciled:!1})},deleteEnvelope:async o=>{const c=e().transactions.filter(d=>d.envelopeId===o);t(d=>({envelopes:d.envelopes.filter(h=>h.id!==o),transactions:d.transactions.filter(h=>h.envelopeId!==o),isLoading:!0}));try{const d=n();await aa.deleteEnvelope(d,o);for(const h of c)h.id&&!h.id.startsWith("temp-")&&await yr.deleteTransaction(d,h.id);await e().removeEnvelopeFromTemplates(o),t({isLoading:!1})}catch(d){if(console.error("Delete Envelope Failed:",d),i(d))t({isLoading:!1,pendingSync:!0,error:null});else{const h=e().envelopes.find(f=>f.id===o);t(h?f=>({envelopes:[...f.envelopes,h],transactions:[...f.transactions,...c],error:d.message,isLoading:!1}):{error:d.message,isLoading:!1})}}},renameEnvelope:async(o,c)=>{t(d=>({envelopes:d.envelopes.map(h=>h.id===o?{...h,name:c}:h),isLoading:!0}));try{t({isLoading:!1})}catch(d){console.error("Rename Envelope Failed:",d),t({error:d.message,isLoading:!1})}}}},w0=t=>mr(ct,"users",t,"distributionTemplates"),vi={subscribeToDistributionTemplates:(t,e)=>{const n=Bi(w0(t),Xu("lastUsed","desc"));return bo(n,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));e(o)})},getAllDistributionTemplates:async t=>{const e=Bi(w0(t),Xu("lastUsed","desc"));return(await Ql(e)).docs.map(i=>({id:i.id,...i.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...i}=t;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,i);try{const a=await Lm(w0(e),i);console.log(" Template addDoc succeeded, docRef:",a);const o={id:a.id,...i,userId:e};return console.log(" Final template result object:",o),o}catch(a){throw console.error(" Template addDoc failed:",a),a}},saveDistributionTemplate:async(t,e)=>{const n=kt(ct,"users",t,"distributionTemplates",e.id);return await sa(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const i=kt(ct,"users",t,"distributionTemplates",e);return await yd(i,n)},deleteDistributionTemplate:async(t,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=kt(ct,"users",t,"distributionTemplates",e);await Xl(n),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},S8=({set:t,get:e,getCurrentUserId:n,isNetworkError:i})=>({saveTemplate:async(a,o,c)=>{console.log(" saveTemplate called with:",{name:a,distributions:o,note:c});try{const d=n(),h={id:`temp-${Date.now()}`,userId:d,name:a,note:c,lastUsed:new Date().toISOString(),distributions:o};console.log(" Attempting Firebase template save..."),console.log(" Current online status:",navigator.onLine);try{const f=vi.createDistributionTemplate(h),g=new Promise((_,E)=>setTimeout(()=>E(new Error("Firebase timeout - likely offline")),5e3)),b=await Promise.race([f,g]);console.log(" Firebase template save succeeded (online mode):",b),console.log(" Template saved to Firebase - real-time subscription will update local state"),console.log(" Template saved to Firebase:",b),console.log(" Store now has templates:",e().distributionTemplates.length)}catch(f){throw console.log(" Firebase template save failed or timed out:",f.message),f}}catch(d){console.error(" Failed to save template to Firebase, saving locally:",d),console.log(" Error details:",{name:d?.name||"Unknown",message:d?.message||"Unknown",code:d?.code||"Unknown",isNetworkError:i(d)});const h=n(),f={id:`local-${Date.now()}`,userId:h,name:a,note:c,lastUsed:new Date().toISOString(),distributions:o};console.log(" Saving template locally (offline):",f),t(g=>({distributionTemplates:[...g.distributionTemplates,f],pendingSync:!0})),console.log(" Template saved locally as fallback:",f),console.log(" Store now has templates:",e().distributionTemplates.length)}},deleteTemplate:async a=>{try{const o=n();await vi.deleteDistributionTemplate(o,a),t(c=>({distributionTemplates:c.distributionTemplates.filter(d=>d.id!==a)})),console.log(" Template deleted from Firebase:",a)}catch(o){throw console.error(" Failed to delete template from Firebase:",o),o}},cleanupOrphanedTemplates:async()=>{console.log(" Cleaning up orphaned templates...");const a=e().distributionTemplates,o=e().envelopes,c=new Set(o.map(h=>h.id));let d=0;for(const h of a){const f={...h.distributions},g={};for(const[b,_]of Object.entries(h.distributions))c.has(b)&&(g[b]=_);if(Object.keys(g).length===0){console.log(` Deleting orphaned template: ${h.name}`);const b=n();await vi.deleteDistributionTemplate(b,h.id),d++}else if(JSON.stringify(g)!==JSON.stringify(f)){console.log(` Updating template ${h.name} - removed orphaned envelope references`);const b=n();await vi.updateDistributionTemplate(b,h.id,{distributions:g}),d++}}d>0?console.log(` Cleaned up ${d} templates`):console.log(" No orphaned templates found")},updateTemplateEnvelopeReferences:async(a,o)=>{console.log(` Updating template references: ${a}  ${o}`);const c=e().distributionTemplates;let d=0;for(const h of c)if(h.distributions[a]!==void 0){const f={...h.distributions};f[o]=f[a],delete f[a],console.log(` Updating template: ${h.name}`);const g=n();await vi.updateDistributionTemplate(g,h.id,{distributions:f}),d++}d>0&&console.log(` Updated ${d} templates with new envelope reference`)},removeEnvelopeFromTemplates:async a=>{console.log(` Removing envelope ${a} from all templates`);const o=e().distributionTemplates;let c=0,d=0;for(const h of o)if(h.distributions[a]!==void 0){const f={...h.distributions};if(delete f[a],Object.keys(f).length===0){console.log(` Deleting template ${h.name} - no envelopes left`);const g=n();await vi.deleteDistributionTemplate(g,h.id),d++}else{console.log(` Removing envelope from template: ${h.name}`);const g=n();await vi.updateDistributionTemplate(g,h.id,{distributions:f}),c++}}(c>0||d>0)&&console.log(` Updated ${c} templates, deleted ${d} empty templates`)}}),x0=t=>mr(ct,"users",t,"appSettings"),Jr={subscribeToAppSettings:(t,e)=>{const n=Bi(x0(t),YE(1));return bo(n,a=>{if(a.empty){e(null);return}const o=a.docs.map(c=>({id:c.id,...c.data()}))[0];e(o)})},getAppSettings:async t=>{const e=Bi(x0(t),YE(1)),n=await Ql(e);if(n.empty)return null;const i=n.docs[0];return{id:i.id,...i.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const i=await Lm(x0(e),n);console.log(" Settings addDoc succeeded, docRef:",i);const a={id:i.id,...n,userId:e};return console.log(" Final settings result object:",a),a}catch(i){throw console.error(" Settings addDoc failed:",i),i}},saveAppSettings:async(t,e)=>{const n=kt(ct,"users",t,"appSettings",e.id);return await sa(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const i=kt(ct,"users",t,"appSettings",e);return await yd(i,n)},deleteAppSettings:async(t,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=kt(ct,"users",t,"appSettings",e);await Xl(n),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},LN=({set:t,get:e,getCurrentUserId:n})=>({updateAppSettings:async i=>{const a=e();if(!a.appSettings){try{await LN({set:t,get:e,getCurrentUserId:n}).initializeAppSettings();const o=e();if(o.appSettings){const c={...o.appSettings,...i};t({appSettings:c});const d=n();await Jr.updateAppSettings(d,o.appSettings.id,i),console.log(" App settings updated successfully")}}catch(o){console.error(" Failed to initialize/update settings:",o)}return}try{t(c=>({appSettings:{...c.appSettings,...i}}));const o=n();await Jr.updateAppSettings(o,a.appSettings.id,i),console.log(" App settings updated successfully")}catch(o){throw console.error(" Failed to update app settings:",o),t(c=>({appSettings:c.appSettings})),o}},initializeAppSettings:async()=>{try{const a={userId:n(),theme:"system"},o=await Jr.createAppSettings(a);t({appSettings:o}),console.log(" App settings initialized successfully")}catch(i){console.error(" Failed to initialize app settings:",i);const a=n();t({appSettings:{id:"local-settings",userId:a,theme:"system"}})}}}),A8=t=>t==="income"?"Income":t==="expense"?"Expense":t==="transfer"?"Transfer":t,UN=t=>{const e=t.toLowerCase();return e==="income"||e==="expense"||e==="transfer"?e:"expense"},zN=t=>({id:t.id,date:t.date?.toDate?.()?t.date.toDate().toISOString():t.date,amount:typeof t.amount=="string"?parseFloat(t.amount)||0:t.amount,description:t.description||"",envelopeId:t.envelopeId||"",reconciled:t.reconciled??!1,type:A8(t.type),transferId:t.transferId??void 0,userId:t.userId}),C8=(t,e)=>({id:t.id,userId:e,envelopeId:t.envelopeId,amount:t.amount.toString(),date:We.fromDate(new Date(t.date)),description:t.description,reconciled:t.reconciled??!1,type:UN(t.type),transferId:t.transferId??null}),N8=t=>({envelopeId:t.envelopeId,amount:t.amount.toString(),date:We.fromDate(new Date(t.date)),description:t.description,reconciled:t.reconciled??!1,type:UN(t.type),transferId:t.transferId??null}),R8=({set:t,get:e,getCurrentUserId:n,isNetworkError:i})=>({addTransaction:async a=>{const o=`temp-${Date.now()}-${Math.random()}`,c=n(),d={...a,id:o,userId:c};if(t(h=>({transactions:[...h.transactions,d],isLoading:!0})),a.envelopeId.startsWith("temp-"))console.log(` Skipping Firebase sync for transaction with temp envelopeId: ${a.envelopeId}`),t({isLoading:!1,pendingSync:!0});else try{const h=C8(d,c),f=await yr.addTransaction(h);console.log(` Replacing temp transaction ${o} with Firebase transaction:`,f);const g=zN(f);t(b=>({transactions:b.transactions.map(_=>_.id===o?g:_),isLoading:!1,pendingSync:!1}))}catch(h){console.error("Add Transaction Failed:",h),i(h)?t({isLoading:!1,pendingSync:!0,error:null}):t(f=>({transactions:f.transactions.filter(g=>g.id!==o),error:h.message,isLoading:!1}))}},deleteTransaction:async a=>{const o=e().transactions.find(d=>d.id===a);if(!o)return;const c=[a];if(o.transferId){const d=e().transactions.find(h=>h.transferId===o.transferId&&h.id!==a);d&&d.id&&c.push(d.id)}t(d=>({transactions:d.transactions.filter(h=>h.id&&!c.includes(h.id)),isLoading:!0}));try{const d=n(),h=c.filter(f=>!f.startsWith("temp-"));for(const f of h)console.log(` About to delete transaction ID: ${f}`),await yr.deleteTransaction(d,f),console.log(` Deleted transaction ID: ${f}`);console.log(" All transaction deletions completed"),t({isLoading:!1})}catch(d){if(console.error("Delete Transaction Failed:",d),i(d))t({isLoading:!1,pendingSync:!0,error:null});else{const h=c.map(f=>e().transactions.find(g=>g.id===f)||o).filter(Boolean);t(f=>({transactions:[...f.transactions,...h],error:d.message,isLoading:!1}))}}},updateTransaction:async a=>{console.log(" updateTransaction called:",a),t(o=>({transactions:o.transactions.map(c=>c.id===a.id?a:c),isLoading:!0}));try{const o=n(),c=yr.updateTransaction(o,a.id,N8(a)),d=new Promise((h,f)=>setTimeout(()=>f(new Error("Firebase timeout - likely offline")),5e3));await Promise.race([c,d]),console.log(" Transaction updated in Firebase"),t({isLoading:!1})}catch(o){console.error("Update Transaction Failed:",o),console.log(" Error details:",{name:o?.name||"Unknown",message:o?.message||"Unknown",code:o?.code||"Unknown",isNetworkError:i(o)}),i(o)?(console.log(" Treating as offline scenario - keeping local transaction update"),t({isLoading:!1,pendingSync:!0,error:null})):t({error:o.message,isLoading:!1})}},restoreTransaction:async a=>{t(o=>({transactions:[...o.transactions,a],isLoading:!0}));try{t({isLoading:!1})}catch(o){console.error("Restore Transaction Failed:",o),t({error:o.message,isLoading:!1})}}}),I8=({set:t,get:e,getCurrentUserId:n,isNetworkError:i,loadFallbackData:a,checkOnlineStatus:o,clearUserData:c})=>{const d=async()=>{const A=e(),R=n();if(A.resetPending){console.log(" fetchData: Reset pending detected, performing Firebase reset instead..."),await e().performFirebaseReset();return}console.log(" fetchData: Starting data fetch for user:",R),t({isLoading:!0,error:null});try{let L,z,V,G;[L,z,V,G]=await Promise.all([aa.getAllEnvelopes(R).catch(S=>(console.error(" Failed to fetch envelopes:",S),[])),yr.getAllTransactions(R).catch(S=>(console.error(" Failed to fetch transactions:",S),[])),vi.getAllDistributionTemplates(R).catch(S=>(console.error(" Failed to fetch templates:",S),[])),Jr.getAppSettings(R).catch(S=>(console.error(" Failed to fetch settings:",S),null))]),console.log(" fetchData: Firebase calls completed"),console.log(" Fetched data counts:",{envelopes:L?.length||0,transactions:z?.length||0,templates:V?.length||0,settings:G?"found":"null"}),e().markOnlineFromFirebaseSuccess();const ee=(L?.length||0)>0||(z?.length||0)>0||(V?.length||0)>0;let te=null;ee||(console.log(" No data from Firebase, loading fallback data..."),te=await a(),te&&(console.log(" Using fallback data for initialization"),L=te.envelopes||[],z=te.transactions||[],V=te.distributionTemplates||[],G=te.appSettings||null)),t(S=>{const N=ae=>ae.map(j=>({...j,date:j.date&&typeof j.date=="object"&&j.date.toDate?j.date.toDate().toISOString():j.date,type:j.type==="income"?"Income":j.type==="expense"?"Expense":j.type==="transfer"?"Transfer":j.type,amount:typeof j.amount=="string"?parseFloat(j.amount):j.amount})),O=ae=>({id:ae.id,name:ae.name,currentBalance:ae.currentBalance||0,lastUpdated:ae.lastUpdated,isActive:ae.isActive??!0,orderIndex:ae.orderIndex??0}),P=L.filter(ae=>!("orderIndex"in ae));P.length>0&&(console.log(` Migrating ${P.length} envelopes to add orderIndex...`),P.forEach((ae,j)=>{const Z=j,ue=n();aa.saveEnvelope(ue,{...ae,orderIndex:Z}).then(()=>console.log(` Migrated envelope ${ae.name} with orderIndex ${Z}`)).catch(he=>console.warn(`Failed to migrate envelope ${ae.id}:`,he))}));const D=L.map(O),F=new Set([...S.envelopes.map(ae=>ae.id),...L.map(ae=>ae.id)]),U=S.envelopes.filter(ae=>ae.id&&!L.some(j=>j.id===ae.id)&&!ae.id.startsWith("temp-")),Ce=S.transactions.filter(ae=>ae.id&&!z.some(j=>j.id===ae.id)&&(!ae.id.startsWith("temp-")||F.has(ae.envelopeId)));let xe,$=[];navigator.onLine?(xe=V,console.log(` Online mode: Using Firebase templates only (${xe.length} templates)`)):($=S.distributionTemplates.filter(ae=>ae.id&&!V.some(j=>j.id===ae.id)),xe=V.concat($),console.log(` Offline mode: Merged ${V.length} Firebase + ${$.length} local templates`)),console.log(" fetchData merge details:"),console.log("  Store envelopes:",S.envelopes.map(ae=>({id:ae.id,name:ae.name}))),console.log("  Firebase envelopes:",L.map(ae=>({id:ae.id,name:ae.name}))),console.log("  Store transactions:",S.transactions.map(ae=>({id:ae.id,envelopeId:ae.envelopeId,description:ae.description}))),console.log("  Firebase transactions:",z.map(ae=>({id:ae.id,envelopeId:ae.envelopeId,description:ae.description}))),console.log("  Store templates:",S.distributionTemplates.map(ae=>({id:ae.id,name:ae.name}))),console.log("  Firebase templates:",V.map(ae=>({id:ae.id,name:ae.name}))),console.log("  Local-only envelopes:",U.map(ae=>({id:ae.id,name:ae.name}))),console.log("  Local-only transactions:",Ce.map(ae=>({id:ae.id,envelopeId:ae.envelopeId,description:ae.description}))),console.log("  Local-only templates:",$.map(ae=>({id:ae.id,name:ae.name}))),console.log("  Total merged templates:",xe.length,xe.map(ae=>({id:ae.id,name:ae.name})));const le=D.concat(U),me=N(z).concat(Ce);let Te=G;if(G&&"isDarkMode"in G&&!("theme"in G)){const ae=G;if(Te={...ae,theme:ae.isDarkMode?"dark":"light"},delete Te.isDarkMode,Te&&Te.id){const j=n();Jr.updateAppSettings(j,Te.id,{theme:Te.theme}).catch(Z=>console.warn("Failed to migrate app settings:",Z))}}return{envelopes:le,transactions:me,distributionTemplates:xe,appSettings:Te,isLoading:!1,pendingSync:!1}})}catch(L){console.error("Sync Failed:",L),i(L)?t({isLoading:!1,pendingSync:!0}):t({error:L.message,isLoading:!1})}},h=async()=>{if(!e().isOnline)return;if(e().resetPending){console.log(" Sync detected pending reset - performing Firebase reset..."),t({pendingSync:!0});try{await e().performFirebaseReset(),console.log(" Pending reset completed during sync")}catch(R){console.error("Firebase reset during sync failed:",R)}return}t({pendingSync:!0});try{await e().fetchData()}catch(R){console.error("Manual sync failed:",R)}},f=async()=>{const A=await o();t({isOnline:A})},g=()=>{e().isOnline||(console.log(" Firebase operation succeeded - marking as online"),t({isOnline:!0}))},b=()=>{c()},_=async A=>{try{if(!A.envelopes||!A.transactions)return{success:!1,message:"Invalid backup format: Missing core data."};const R=n();console.log(` Importing data for user: ${R}`),console.log(" Clearing existing Firebase data before import..."),await E(),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,pendingSync:!0,isLoading:!0}),console.log(" Local state cleared before import");const L=A.envelopes.map(S=>({id:S.id||`imported-${Date.now()}-${Math.random()}`,name:S.name,currentBalance:S.currentBalance||S.budget||0,lastUpdated:new Date().toISOString(),isActive:S.isActive??!0,orderIndex:S.orderIndex??0,userId:R})),z=A.transactions.map(S=>({...S,id:S.id||`imported-${Date.now()}-${Math.random()}`,userId:R,date:S.date,amount:typeof S.amount=="number"?S.amount:parseFloat(S.amount)||0,type:S.type,reconciled:S.reconciled??!1})),V=(A.distributionTemplates||[]).map(S=>({...S,id:S.id||`imported-${Date.now()}-${Math.random()}`,userId:R})),G=A.appSettings?{...A.appSettings,id:A.appSettings.id||`settings-${R}`,userId:R}:null;console.log(` Importing: ${L.length} envelopes, ${z.length} transactions, ${V.length} templates`),t({envelopes:L,transactions:z,distributionTemplates:V,appSettings:G,error:null,pendingSync:!0});try{console.log(" Syncing imported data to Firebase...");for(const S of L)try{await aa.saveEnvelope(R,S),console.log(` Synced envelope: ${S.name}`)}catch(N){console.error(` Failed to sync envelope ${S.name}:`,N)}for(const S of z)try{const N={...S,amount:S.amount.toString(),type:S.type.toLowerCase(),date:We.fromDate(new Date(S.date))};await yr.addTransaction(N),console.log(` Synced transaction: ${S.description}`)}catch(N){console.error(` Failed to sync transaction ${S.description}:`,N)}for(const S of V)try{await vi.createDistributionTemplate(S),console.log(` Synced template: ${S.name}`)}catch(N){console.error(` Failed to sync template ${S.name}:`,N)}if(G)try{await Jr.createAppSettings(G),console.log(" Synced app settings")}catch(S){console.error(" Failed to sync app settings:",S)}console.log(" All imported data synced to Firebase"),t({pendingSync:!1,isLoading:!1})}catch(S){console.error(" Error syncing to Firebase:",S),t({pendingSync:!0})}const ee=V.length,te=G?"Settings imported.":"";return{success:!0,message:`Imported and synced ${L.length} envelopes, ${z.length} transactions${ee>0?`, ${ee} templates`:""} to Firebase.${te?` ${te}`:""}`}}catch(R){return console.error("Import failed:",R),{success:!1,message:"Failed to import data. Check file format."}}},E=async()=>{console.log(" performFirebaseReset: Starting complete Firebase reset..."),t({isLoading:!0});try{const A=n();console.log(" Querying Firebase for all data to delete...");const[R,L,z,V]=await Promise.all([aa.getAllEnvelopes(A).catch(S=>(console.error(" Failed to fetch envelopes for reset:",S),[])),yr.getAllTransactions(A).catch(S=>(console.error(" Failed to fetch transactions for reset:",S),[])),vi.getAllDistributionTemplates(A).catch(S=>(console.error(" Failed to fetch templates for reset:",S),[])),Jr.getAppSettings(A).catch(S=>(console.error(" Failed to fetch settings for reset:",S),null))]);console.log(` Found in Firebase: ${R.length} envelopes, ${L.length} transactions, ${z.length} templates`);let G=0;for(const S of R)if(S.id)try{await aa.deleteEnvelope(A,S.id),G++,console.log(` Deleted envelope: ${S.name||S.id}`)}catch(N){console.error(` Failed to delete envelope ${S.id}:`,N)}let ee=0;for(const S of L)if(S.id)try{await yr.deleteTransaction(A,S.id),ee++,console.log(` Deleted transaction: ${S.id}`)}catch(N){console.error(` Failed to delete transaction ${S.id}:`,N)}let te=0;for(const S of z)if(S.id)try{await vi.deleteDistributionTemplate(A,S.id),te++,console.log(` Deleted template: ${S.name||S.id}`)}catch(N){console.error(` Failed to delete template ${S.id}:`,N)}if(V?.id)try{await Jr.deleteAppSettings(A,V.id),console.log(" Deleted app settings")}catch(S){console.error(" Failed to delete app settings:",S)}console.log(` Firebase reset complete: Deleted ${G} envelopes, ${ee} transactions, ${te} templates`),t({resetPending:!1,isLoading:!1,pendingSync:!1})}catch(A){throw console.error(" Error during Firebase reset:",A),t({isLoading:!1,pendingSync:!0}),A}};return{fetchData:d,syncData:h,updateOnlineStatus:f,markOnlineFromFirebaseSuccess:g,handleUserLogout:b,importData:_,performFirebaseReset:E,resetData:async()=>{if(console.log(" Starting complete data reset (offline-first)..."),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,resetPending:!0,isLoading:!0}),console.log(" Local state cleared immediately"),e().isOnline){console.log(" Online - performing Firebase reset immediately...");try{await e().performFirebaseReset(),console.log(" Firebase reset completed immediately")}catch(R){console.error(" Firebase reset failed, will retry on next sync:",R),t({isLoading:!1,pendingSync:!0})}}else console.log(" Offline - Firebase reset will be performed when connection is restored"),t({isLoading:!1,pendingSync:!0})}}},k8=t=>zN(t),D8=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0}),M8=t=>({id:t.id,name:t.name||"",distributions:t.distributions||{},lastUsed:t.lastUsed?.toDate?.()?t.lastUsed.toDate().toISOString():t.lastUsed||new Date().toISOString(),note:t.note||"",userId:t.userId||void 0}),WE=(t,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=aa.subscribeToEnvelopes(e,c=>{const d=t.getState();if(d.isOnline&&!d.pendingSync&&!d.resetPending){console.log(" Real-time sync: Envelopes updated",c.length);const h=c.map(D8);t.setState({envelopes:h})}}),i=yr.subscribeToTransactions(e,c=>{const d=t.getState();if(d.isOnline&&!d.pendingSync&&!d.resetPending){console.log(" Real-time sync: Transactions updated",c.length);const h=c.map(k8);t.setState({transactions:h})}}),a=vi.subscribeToDistributionTemplates(e,c=>{const d=t.getState();if(d.isOnline&&!d.pendingSync&&!d.resetPending){console.log(" Real-time sync: Templates updated from Firebase",c.length),console.log(" Firebase templates:",c.map(f=>({id:f.id,name:f.name})));const h=c.map(M8);console.log(" Setting store templates to:",h.map(f=>({id:f.id,name:f.name}))),t.setState({distributionTemplates:h})}else console.log(" Real-time sync: Skipping template update (offline or pending changes)")}),o=Jr.subscribeToAppSettings(e,c=>{const d=t.getState();d.isOnline&&!d.pendingSync&&!d.resetPending&&(console.log(" Real-time sync: Settings updated",c?"found":"null"),t.setState({appSettings:c}))});window.__firebaseUnsubscribers={envelopes:n,transactions:i,templates:a,settings:o},console.log(" Real-time subscriptions active - cross-device sync enabled")},O8=t=>{const{useEnvelopeStore:e,useAuthStore:n,getCurrentUserId:i}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const d=e.getState();d.isOnline&&(d.pendingSync||d.resetPending)&&(console.log(" Auto-syncing pending operations..."),d.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let a=null;const o=()=>{a&&clearInterval(a),a=setInterval(async()=>{const d=e.getState();if(!d.isOnline&&!d.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(d.pendingSync||d.resetPending)&&e.getState().syncData(),a&&(clearInterval(a),a=null)):e.setState({testingConnectivity:!1})}catch(h){console.log(" Periodic retry failed:",h),e.setState({testingConnectivity:!1})}}else d.isOnline&&a&&(clearInterval(a),a=null)},3e4)};o(),e.subscribe(d=>{!d.isOnline&&!a&&(console.log(" Starting periodic connectivity retry"),o())});const c=n.getState();c.isAuthenticated&&c.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),WE(e,i())),n.subscribe(d=>{if(d.isAuthenticated&&d.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),WE(e,i());else if(!d.isAuthenticated&&!d.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const h=window.__firebaseUnsubscribers;h.envelopes&&h.envelopes(),h.transactions&&h.transactions(),h.templates&&h.templates(),h.settings&&h.settings(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}})},V8=async()=>{try{console.log(" Attempting to load fallback data from backup file...");const t=await fetch("/HouseBudget_Backup_2025-11-25.json");if(t.ok){const e=await t.json();return console.log(" Loaded fallback data:",{envelopes:e.envelopes?.length||0,transactions:e.transactions?.length||0,templates:e.distributionTemplates?.length||0}),e}}catch(t){console.log(" Could not load fallback data:",t)}return null},Tl=()=>{const{currentUser:t}=Ei.getState();if(!t)throw new Error("No authenticated user found");return t.id},j8=()=>{console.log(" Clearing user data on logout"),Rn.setState({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},P8=async()=>{if(typeof navigator>"u"||!navigator.onLine)return console.log(" Browser reports offline"),!1;const t=async(n,i={})=>{try{const a=new AbortController,o=setTimeout(()=>a.abort(),4e3);return await fetch(n,{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:a.signal,...i}),clearTimeout(o),!0}catch(a){return console.log(` Connectivity test failed for ${n}:`,a instanceof Error?a.message:"Unknown error"),!1}},e=[t("https://httpbin.org/status/200",{method:"GET"}),t("https://www.cloudflare.com/favicon.ico"),t("https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"),t("https://www.google.com/favicon.ico")];console.log(" Testing connectivity with multiple endpoints...");try{const n=await Promise.allSettled(e),i=n.filter(o=>o.status==="fulfilled"&&o.value===!0).length,a=n.length;return i>0?(console.log(` Connectivity confirmed (${i}/${a} tests passed)`),!0):(console.log(` All connectivity tests failed (${a} tests)`),!1)}catch(n){return console.log(" Connectivity testing error:",n),!1}},af=t=>{const e=t?.code?.toLowerCase()||"",n=t?.message?.toLowerCase()||"",i=t?.name?.toLowerCase()||"";return!!(e==="unavailable"||e==="cancelled"||n.includes("network")||n.includes("offline")||n.includes("disconnected")||n.includes("connection")||n.includes("fetch")||n.includes("timeout")||n.includes("err_internet_disconnected")||n.includes("err_network_changed")||n.includes("err_connection_refused")||!navigator.onLine||i==="undefined"&&n==="undefined")},Rn=um()(fv((t,e)=>{const n=E8({set:t,get:e,getCurrentUserId:Tl,isNetworkError:af}),i=S8({set:t,get:e,getCurrentUserId:Tl,isNetworkError:af}),a=LN({set:t,get:e,getCurrentUserId:Tl}),o=R8({set:t,get:e,getCurrentUserId:Tl,isNetworkError:af}),c=I8({set:t,get:e,getCurrentUserId:Tl,isNetworkError:af,loadFallbackData:V8,checkOnlineStatus:P8,clearUserData:j8});return{envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,addTransaction:o.addTransaction,createEnvelope:n.createEnvelope,addToEnvelope:n.addToEnvelope,spendFromEnvelope:n.spendFromEnvelope,transferFunds:n.transferFunds,deleteEnvelope:n.deleteEnvelope,deleteTransaction:o.deleteTransaction,updateTransaction:o.updateTransaction,restoreTransaction:o.restoreTransaction,renameEnvelope:n.renameEnvelope,saveTemplate:i.saveTemplate,deleteTemplate:i.deleteTemplate,updateAppSettings:a.updateAppSettings,initializeAppSettings:a.initializeAppSettings,cleanupOrphanedTemplates:i.cleanupOrphanedTemplates,updateTemplateEnvelopeReferences:i.updateTemplateEnvelopeReferences,removeEnvelopeFromTemplates:i.removeEnvelopeFromTemplates,fetchData:c.fetchData,syncData:c.syncData,updateOnlineStatus:c.updateOnlineStatus,markOnlineFromFirebaseSuccess:c.markOnlineFromFirebaseSuccess,handleUserLogout:c.handleUserLogout,importData:c.importData,performFirebaseReset:c.performFirebaseReset,resetData:c.resetData,getEnvelopeBalance:d=>{const h=e();if(!h.envelopes.find(R=>R.id===d))return console.log(` getEnvelopeBalance: Envelope ${d} not found`),new pr(0);const g=h.transactions.filter(R=>R.envelopeId===d),b=g.filter(R=>R.type==="Expense"),_=g.filter(R=>R.type==="Income"),E=b.reduce((R,L)=>R.plus(new pr(L.amount||0)),new pr(0));return _.reduce((R,L)=>R.plus(new pr(L.amount||0)),new pr(0)).minus(E)}}},{name:"envelope-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,distributionTemplates:t.distributionTemplates,appSettings:t.appSettings})}));O8({useEnvelopeStore:Rn,useAuthStore:Ei,getCurrentUserId:Tl});class bn{static instance;static getInstance(){return bn.instance||(bn.instance=new bn),bn.instance}async getMonthlyBudget(e,n){try{const i=kt(ct,"monthlyBudgets",`${e}_${n}`),a=await x8(i);if(a.exists()){const o=a.data();return{id:o.id,userId:o.userId,month:o.month,totalIncome:parseFloat(o.totalIncome),availableToBudget:parseFloat(o.availableToBudget),createdAt:o.createdAt.toDate().toISOString(),updatedAt:o.updatedAt.toDate().toISOString()}}return null}catch(i){throw console.error("Error getting monthly budget:",i),i}}async createOrUpdateMonthlyBudget(e){try{const n=We.now(),i=`${e.userId}_${e.month}`,a={id:i,userId:e.userId,month:e.month,totalIncome:e.totalIncome.toString(),availableToBudget:e.availableToBudget.toString(),createdAt:n,updatedAt:n};return await sa(kt(ct,"monthlyBudgets",i),a),{...e,id:i,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating/updating monthly budget:",n),n}}async getIncomeSources(e,n){try{const i=Bi(mr(ct,"incomeSources"),Ws("userId","==",e),Ws("month","==",n));return(await Ql(i)).docs.map(o=>{const c=o.data();return{id:c.id,userId:c.userId,month:c.month,name:c.name,amount:parseFloat(c.amount),frequency:c.frequency,category:c.category,createdAt:c.createdAt.toDate().toISOString(),updatedAt:c.updatedAt.toDate().toISOString()}})}catch(i){throw console.error("Error getting income sources:",i),i}}async createIncomeSource(e){try{const n=We.now(),i=kt(mr(ct,"incomeSources")),a={id:i.id,userId:e.userId,month:e.month,name:e.name,amount:e.amount.toString(),frequency:e.frequency||"monthly",...e.category&&{category:e.category},createdAt:n,updatedAt:n};return await sa(i,a),{...e,frequency:e.frequency||"monthly",id:i.id,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating income source:",n),n}}async getEnvelopeAllocations(e,n){try{const i=Bi(mr(ct,"envelopeAllocations"),Ws("userId","==",e),Ws("month","==",n));return(await Ql(i)).docs.map(o=>{const c=o.data();return{id:c.id,userId:c.userId,envelopeId:c.envelopeId,month:c.month,budgetedAmount:parseFloat(c.budgetedAmount),createdAt:c.createdAt.toDate().toISOString(),updatedAt:c.updatedAt.toDate().toISOString()}})}catch(i){throw console.error("Error getting envelope allocations:",i),i}}async createEnvelopeAllocation(e){try{const n=We.now(),i=kt(mr(ct,"envelopeAllocations")),a={id:i.id,userId:e.userId,envelopeId:e.envelopeId,month:e.month,budgetedAmount:e.budgetedAmount.toString(),createdAt:n,updatedAt:n};return await sa(i,a),{...e,id:i.id,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating envelope allocation:",n),n}}async copyMonthData(e,n,i){try{const a=await this.getIncomeSources(e,n);for(const f of a)await this.createIncomeSource({...f,month:i});const o=await this.getEnvelopeAllocations(e,n);for(const f of o)await this.createEnvelopeAllocation({...f,month:i});const c=a.reduce((f,g)=>f+g.amount,0),d=o.reduce((f,g)=>f+g.budgetedAmount,0),h=c-d;await this.createOrUpdateMonthlyBudget({userId:e,month:i,totalIncome:c,availableToBudget:h})}catch(a){throw console.error("Error copying month data:",a),a}}async deleteIncomeSource(e){try{const n=kt(ct,"incomeSources",e);await Xl(n)}catch(n){throw console.error("Error deleting income source:",n),n}}async updateIncomeSource(e,n){try{const i=kt(ct,"incomeSources",e),a={...n,updatedAt:We.now()};await sa(i,a,{merge:!0})}catch(i){throw console.error("Error updating income source:",i),i}}async deleteEnvelopeAllocation(e){try{const n=kt(ct,"envelopeAllocations",e);await Xl(n)}catch(n){throw console.error("Error deleting envelope allocation:",n),n}}async updateEnvelopeAllocation(e,n){try{const i=kt(ct,"envelopeAllocations",e),a={...n,updatedAt:We.now()};await sa(i,a,{merge:!0})}catch(i){throw console.error("Error updating envelope allocation:",i),i}}async clearMonthData(e,n){try{const[i,a]=await Promise.all([this.getIncomeSources(e,n),this.getEnvelopeAllocations(e,n)]),o=i.map(d=>this.deleteIncomeSource(d.id)),c=a.map(d=>this.deleteEnvelopeAllocation(d.id));await Promise.all([...o,...c]),await this.createOrUpdateMonthlyBudget({userId:e,month:n,totalIncome:0,availableToBudget:0})}catch(i){throw console.error("Error clearing month data:",i),i}}async calculateAvailableToBudget(e,n){try{const i=await this.getIncomeSources(e,n),a=await this.getEnvelopeAllocations(e,n),o=i.reduce((d,h)=>d+h.amount,0),c=a.reduce((d,h)=>d+h.budgetedAmount,0);return o-c}catch(i){throw console.error("Error calculating available to budget:",i),i}}subscribeToMonthlyBudget(e,n,i){const a=kt(ct,"monthlyBudgets",`${e}_${n}`);return bo(a,o=>{if(o.exists()){const c=o.data();i(c)}else i(null)})}subscribeToIncomeSources(e,n,i){const a=Bi(mr(ct,"incomeSources"),Ws("userId","==",e),Ws("month","==",n));return bo(a,o=>{const c=o.docs.map(d=>({id:d.id,...d.data()}));i(c)})}subscribeToEnvelopeAllocations(e,n,i){const a=Bi(mr(ct,"envelopeAllocations"),Ws("userId","==",e),Ws("month","==",n));return bo(a,o=>{const c=o.docs.map(d=>({id:d.id,...d.data()}));i(c)})}}const L8=t=>t?{id:t.id,userId:t.userId,month:t.month,totalIncome:parseFloat(t.totalIncome),availableToBudget:parseFloat(t.availableToBudget),createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}:null,U8=t=>({id:t.id,userId:t.userId,month:t.month,name:t.name,amount:parseFloat(t.amount),frequency:t.frequency,category:t.category,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}),z8=t=>({id:t.id,userId:t.userId,envelopeId:t.envelopeId,month:t.month,budgetedAmount:parseFloat(t.budgetedAmount),createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}),T0=(t,e,n)=>{if(window.__monthlyBudgetUnsubscribers){console.log(" Monthly budget real-time subscriptions already active, skipping setup");return}console.log(" Setting up monthly budget real-time Firebase subscriptions for month:",n);const i=bn.getInstance(),a=i.subscribeToMonthlyBudget(e,n,d=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending){console.log(" Real-time sync: Monthly budget updated",d?"found":"null");const f=L8(d);t.setState({monthlyBudget:f})}}),o=i.subscribeToIncomeSources(e,n,d=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending){const f=d.map(U8),g=new Set,b=f.filter(_=>g.has(_.id)?!1:(g.add(_.id),!0));t.setState({incomeSources:b})}}),c=i.subscribeToEnvelopeAllocations(e,n,d=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending){console.log(" Real-time sync: Envelope allocations updated",d.length);const f=d.map(z8);t.setState({envelopeAllocations:f})}});window.__monthlyBudgetUnsubscribers={monthlyBudget:a,incomeSources:o,envelopeAllocations:c},console.log(" Monthly budget real-time subscriptions active for month:",n)},ZE=()=>{if(window.__monthlyBudgetUnsubscribers){const t=window.__monthlyBudgetUnsubscribers;t.monthlyBudget&&t.monthlyBudget(),t.incomeSources&&t.incomeSources(),t.envelopeAllocations&&t.envelopeAllocations(),delete window.__monthlyBudgetUnsubscribers,console.log(" Cleaned up monthly budget Firebase subscriptions")}},B8=t=>{const{useMonthlyBudgetStore:e,useAuthStore:n,getCurrentUserId:i}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const h=e.getState();h.isOnline&&(h.pendingSync||h.resetPending)&&(console.log(" Auto-syncing pending operations..."),h.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let a=null;const o=()=>{a&&clearInterval(a),a=setInterval(async()=>{const h=e.getState();if(!h.isOnline&&!h.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(h.pendingSync||h.resetPending)&&e.getState().syncData(),a&&(clearInterval(a),a=null)):e.setState({testingConnectivity:!1})}catch(f){console.log(" Periodic retry failed:",f),e.setState({testingConnectivity:!1})}}else h.isOnline&&a&&(clearInterval(a),a=null)},3e4)};o(),e.subscribe(h=>{!h.isOnline&&!a&&(console.log(" Starting periodic connectivity retry"),o())});let c=null;e.subscribe(h=>{if(c!==null&&h.currentMonth!==c){console.log(" Month changed from",c,"to",h.currentMonth),ZE();const f=n.getState();f.isAuthenticated&&f.currentUser&&T0(e,i(),h.currentMonth)}c=h.currentMonth});const d=n.getState();if(d.isAuthenticated&&d.currentUser){console.log(" User already authenticated on app load, setting up monthly budget real-time subscriptions");const h=e.getState().currentMonth;T0(e,i(),h)}n.subscribe(h=>{if(h.isAuthenticated&&h.currentUser){console.log(" User authenticated, setting up monthly budget real-time subscriptions");const f=e.getState().currentMonth;T0(e,i(),f)}else!h.isAuthenticated&&!h.isLoading&&(console.log(" User logged out, clearing monthly budget data and unsubscribing"),ZE(),e.getState().handleUserLogout())})},F8=()=>{const t=new Date;return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}`},Zr=()=>{const t=Ei.getState().currentUser;if(!t)throw new Error("User not authenticated");return t.id},q8=Zr,H8=async(t,e,n)=>{const{transactions:i,addTransaction:a,deleteTransaction:o}=Rn.getState(),c="Monthly Budget Allocation",[d,h]=n.split("-").map(Number);console.log(" Syncing budget allocation transaction:",{envelopeId:t,budgetedAmount:e,month:n,totalTransactions:i.length});const f=i.filter(b=>{if(b.envelopeId!==t||b.description!==c)return!1;try{let _;if(typeof b.date=="string")_=new Date(b.date);else if(b.date?.toDate&&typeof b.date.toDate=="function")_=b.date.toDate();else return!1;return _.getFullYear()===d&&_.getMonth()+1===h}catch{return!1}});console.log(" Found existing transactions:",f.length);for(const b of f)console.log(" Deleting old allocation transaction:",b.id,"amount:",b.amount),await o(b.id);const g=new pr(e.toString()||"0");if(g.gt(0)){console.log(" Creating new allocation transaction with amount",g.toNumber());const b=new Date(d,h-1,2).toISOString();await a({description:c,amount:g.toNumber(),envelopeId:t,date:b,type:"Income",reconciled:!0})}else console.log(" No new transaction needed (amount is 0)")},Jn=um()(fv((t,e)=>({currentMonth:F8(),monthlyBudget:null,incomeSources:[],envelopeAllocations:[],isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,setCurrentMonth:n=>{t({currentMonth:n}),e().fetchMonthlyData()},fetchMonthlyData:async()=>{try{t({isLoading:!0,error:null});const n=Zr(),i=e().currentMonth,a=bn.getInstance(),[o,c,d]=await Promise.all([a.getMonthlyBudget(n,i),a.getIncomeSources(n,i),a.getEnvelopeAllocations(n,i)]);t({monthlyBudget:o,incomeSources:c,envelopeAllocations:d,isLoading:!1})}catch(n){console.error("Error fetching monthly data:",n),t({error:n instanceof Error?n.message:"Failed to fetch monthly data",isLoading:!1})}},createIncomeSource:async n=>{try{const i=Zr(),a=e().currentMonth,o=bn.getInstance();await o.createIncomeSource({...n,userId:i,month:a});const c=await o.getIncomeSources(i,a);t({incomeSources:c})}catch(i){throw console.error("Error creating income source:",i),i}},updateIncomeSource:async(n,i)=>{try{const a={updatedAt:We.now()};i.name!==void 0&&(a.name=i.name),i.amount!==void 0&&(a.amount=i.amount.toString()),i.frequency!==void 0&&(a.frequency=i.frequency),i.category!==void 0&&(a.category=i.category);const o=kt(ct,"incomeSources",n);await yd(o,a);const c=bn.getInstance(),d=Zr(),h=e().currentMonth,f=await c.getIncomeSources(d,h);t({incomeSources:f})}catch(a){throw console.error("Error updating income source:",a),a}},deleteIncomeSource:async n=>{t(a=>({incomeSources:a.incomeSources.filter(o=>o.id!==n)})),bn.getInstance().deleteIncomeSource(n).catch(a=>{console.error("Error deleting income source from Firebase:",a)})},restoreIncomeSource:async(n,i)=>{try{t(a=>{const o=[...a.incomeSources];return i!==void 0&&i>=0&&i<=o.length?o.splice(i,0,n):o.push(n),{incomeSources:o}}),await e().refreshAvailableToBudget()}catch(a){throw console.error("Error restoring income source:",a),a}},createEnvelopeAllocation:async n=>{try{const i=Zr(),a=e().currentMonth,o=bn.getInstance();await o.createEnvelopeAllocation({...n,userId:i,month:a});const c=await o.getEnvelopeAllocations(i,a);t({envelopeAllocations:c})}catch(i){throw console.error("Error creating envelope allocation:",i),i}},updateEnvelopeAllocation:async(n,i)=>{try{const a=Zr(),o=e().currentMonth,c=bn.getInstance(),d={};i.envelopeId!==void 0&&(d.envelopeId=i.envelopeId),i.budgetedAmount!==void 0&&(d.budgetedAmount=i.budgetedAmount.toString()),await c.updateEnvelopeAllocation(n,d);const h=await c.getEnvelopeAllocations(a,o);t({envelopeAllocations:h})}catch(a){throw console.error("Error updating envelope allocation:",a),a}},deleteEnvelopeAllocation:async n=>{t(a=>({envelopeAllocations:a.envelopeAllocations.filter(o=>o.id!==n)})),bn.getInstance().deleteEnvelopeAllocation(n).catch(a=>{console.error("Error deleting envelope allocation from Firebase:",a)})},restoreEnvelopeAllocation:async(n,i)=>{try{t(a=>{const o=[...a.envelopeAllocations];return i!==void 0&&i>=0&&i<=o.length?o.splice(i,0,n):o.push(n),{envelopeAllocations:o}}),await e().refreshAvailableToBudget()}catch(a){throw console.error("Error restoring envelope allocation:",a),a}},setEnvelopeAllocation:async(n,i)=>{try{console.log(" setEnvelopeAllocation called:",{envelopeId:n,budgetedAmount:i});const a=e().envelopeAllocations.find(c=>c.envelopeId===n);console.log(" Existing allocation:",a),a?(console.log(" Updating existing allocation..."),await e().updateEnvelopeAllocation(a.id,{budgetedAmount:i}),console.log(" Allocation updated")):(console.log(" Creating new allocation..."),await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:i}),console.log(" Allocation created")),console.log(" Syncing budget allocation transaction...");const o=e().currentMonth;await H8(n,i,o),console.log(" Transaction synced"),console.log(" Refreshing available to budget..."),await e().refreshAvailableToBudget(),console.log(" Available to budget refreshed")}catch(a){throw console.error(" Error setting envelope allocation:",a),console.error("Error details:",a instanceof Error?a.message:a),a}},copyFromPreviousMonth:async()=>{try{t({isLoading:!0,error:null});const n=Zr(),i=e().currentMonth,[a,o]=i.split("-").map(Number);let c=a,d=o-1;d<1&&(c=a-1,d=12);const h=`${c}-${d.toString().padStart(2,"0")}`,f=bn.getInstance(),[g,b]=await Promise.all([f.getIncomeSources(n,h),f.getEnvelopeAllocations(n,h)]);for(const _ of g)await e().createIncomeSource({name:_.name,amount:_.amount});for(const _ of b)await e().setEnvelopeAllocation(_.envelopeId,_.budgetedAmount);await e().fetchMonthlyData()}catch(n){console.error("Error copying from previous month:",n),t({error:n instanceof Error?n.message:"Failed to copy month data",isLoading:!1})}},calculateAvailableToBudget:()=>{const n=e(),i=n.incomeSources.reduce((o,c)=>o+c.amount,0),a=n.envelopeAllocations.reduce((o,c)=>o+c.budgetedAmount,0);return i-a},refreshAvailableToBudget:async()=>{try{const n=e(),i=Zr(),a=n.currentMonth,o=n.incomeSources.reduce((g,b)=>g+b.amount,0),c=n.envelopeAllocations.reduce((g,b)=>g+b.budgetedAmount,0),d=o-c,h=bn.getInstance(),f=n.monthlyBudget;if(f){const g={...f,availableToBudget:d,totalIncome:o};await h.createOrUpdateMonthlyBudget(g),t({monthlyBudget:g})}else{const g=await h.createOrUpdateMonthlyBudget({userId:i,month:a,totalIncome:o,availableToBudget:d});t({monthlyBudget:g})}}catch(n){console.error("Error refreshing available to budget:",n)}},loadDemoData:(n,i)=>{t({incomeSources:n,envelopeAllocations:i,isLoading:!1})},clearMonthData:async()=>{try{const n=Zr(),i=e().currentMonth,a=bn.getInstance(),{transactions:o,deleteTransaction:c}=Rn.getState(),d="Monthly Budget Allocation",[h,f]=i.split("-").map(Number),g=o.filter(b=>{if(b.description!==d)return!1;try{const _=new Date(b.date);return _.getFullYear()===h&&_.getMonth()+1===f}catch{return!1}});for(const b of g)await c(b.id);await a.clearMonthData(n,i),t({incomeSources:[],envelopeAllocations:[]}),await e().refreshAvailableToBudget()}catch(n){throw console.error("Error clearing month data:",n),n}},updateOnlineStatus:async()=>{console.log("Monthly budget updateOnlineStatus called")},syncData:async()=>{console.log("Monthly budget syncData called")},handleUserLogout:()=>{t({monthlyBudget:null,incomeSources:[],envelopeAllocations:[],isLoading:!1,error:null,pendingSync:!1,resetPending:!1,testingConnectivity:!1})}}),{name:"monthly-budget-store",partialize:t=>({currentMonth:t.currentMonth})}));B8({useMonthlyBudgetStore:Jn,useAuthStore:Ei,getCurrentUserId:q8});const BN=({currentMonth:t,onMonthChange:e})=>{const[n,i]=t.split("-").map(Number),o=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],c=()=>{let f=n,g=i-1;g<1&&(f=n-1,g=12);const b=`${f}-${g.toString().padStart(2,"0")}`;e(b)},d=()=>{let f=n,g=i+1;g>12&&(f=n+1,g=1);const b=`${f}-${g.toString().padStart(2,"0")}`;e(b)},h=()=>{const f=new Date,g=`${f.getFullYear()}-${(f.getMonth()+1).toString().padStart(2,"0")}`;e(g)};return v.jsx("div",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 py-3",children:v.jsxs("div",{className:"flex items-center justify-between max-w-md mx-auto",children:[v.jsx("button",{onClick:c,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:v.jsx(TD,{size:20})}),v.jsx("div",{className:"flex-1 text-center",children:v.jsxs("button",{onClick:h,className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Click to go to current month",children:[o," ",n]})}),v.jsx("button",{onClick:d,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:v.jsx(lo,{size:20})})]})})},FN=({amount:t,totalIncome:e,totalAllocated:n,isLoading:i=!1})=>{const a=e>0?n/e*100:0,o=Math.abs(t)<.01,c=t<0,d=t>0,f=o?{icon:ky,color:"text-green-600 dark:text-emerald-400",bgColor:"bg-green-50 dark:bg-emerald-900/20",borderColor:"border-green-200 dark:border-emerald-800",title:"Budget Balanced!",subtitle:"Every dollar has a job"}:c?{icon:m4,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",title:"Over Budget",subtitle:"Reduce allocations or add income"}:{icon:u4,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",title:"Available to Budget",subtitle:"Assign money to envelopes"},g=f.icon;return i?v.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-900 rounded-2xl p-6 border border-gray-200 dark:border-zinc-800 animate-pulse",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-32"}),v.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20"})]}),v.jsx("div",{className:"h-2 bg-gray-200 dark:bg-zinc-700 rounded"})]}):v.jsxs("div",{className:`rounded-2xl p-6 border ${f.bgColor} ${f.borderColor}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:`p-2 rounded-xl ${f.bgColor} ${f.borderColor}`,children:v.jsx(g,{size:24,className:f.color})}),v.jsxs("div",{children:[v.jsx("h3",{className:`font-semibold ${f.color}`,children:f.title}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:f.subtitle})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsxs("div",{className:`text-3xl font-bold ${f.color}`,children:[c?"-":"","$",Math.abs(t).toFixed(2)]}),o&&v.jsx("div",{className:"text-sm text-green-600 dark:text-emerald-400 font-medium",children:"Perfect Balance"})]})]}),!o&&e>0&&v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-zinc-400",children:[v.jsx("span",{children:"Allocated"}),v.jsxs("span",{children:[a.toFixed(0),"% of income"]})]}),v.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:v.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${c?"bg-red-500":d?"bg-blue-500":"bg-green-500"}`,style:{width:`${Math.min(a,100)}%`}})}),v.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-500",children:[v.jsxs("span",{children:["$",n.toFixed(2)," allocated"]}),v.jsxs("span",{children:["$",e.toFixed(2)," income"]})]})]}),v.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-zinc-700",children:v.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",e.toFixed(2)]}),v.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Total Income"})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",n.toFixed(2)]}),v.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Allocated"})]})]})})]})},qN=()=>{const[t,e]=M.useState(!1),n=M.useRef(null),{currentUser:i,logout:a}=Ei(),{handleUserLogout:o}=Rn(),c=Ea();M.useEffect(()=>{const f=g=>{n.current&&!n.current.contains(g.target)&&e(!1)};if(t)return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[t]);const d=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{o(),a(),c("/"),e(!1)}catch(f){console.error("Logout failed:",f)}};if(!i)return null;const h=i.displayName?.charAt(0)?.toUpperCase()||i.email?.charAt(0)?.toUpperCase()||"U";return v.jsxs("div",{className:"relative",ref:n,children:[v.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[v.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:h}),v.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:i.displayName||i.email?.split("@")[0]||"User"}),v.jsx(wD,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${t?"rotate-180":""}`})]}),t&&v.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[v.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:h}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:i.displayName||i.email?.split("@")[0]||"User"}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:i.email})]})]})}),v.jsxs("div",{className:"py-1",children:[v.jsxs("button",{onClick:()=>{c("/settings"),e(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[v.jsx(l4,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),v.jsxs("button",{onClick:d,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[v.jsx(e4,{size:18}),"Log Out"]})]})]})]})},Wu=({children:t,onDelete:e,threshold:n=-100})=>{const i=uj(),[a,o]=M.useState(!1),c=M.useRef(0),d=()=>{o(!0),c.current=Date.now()},h=async(f,g)=>{const b=g.offset.x,_=g.velocity.x;if(setTimeout(()=>o(!1),100),b<n||b<-50&&_<-500){const E=e();E===!1?i.start({x:0}):E instanceof Promise&&E.then(k=>{k===!1&&i.start({x:0})})}else i.start({x:0})};return v.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[v.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:v.jsx(cf,{className:"text-white w-6 h-6"})}),v.jsx(_o.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:d,onDragEnd:h,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${a?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:a?"none":"auto"},children:t})]})},HN=({message:t="Loading your budget...",showTimeout:e=!1})=>v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[v.jsx("div",{className:"mb-8",children:v.jsxs("div",{className:"relative",children:[v.jsx(rs,{size:48,className:"text-blue-500 animate-spin"}),v.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:v.jsx(xS,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),v.jsxs("div",{className:"text-center space-y-3",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),v.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),v.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),v.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),v.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),v.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),v.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),v.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),v.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),v.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&v.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:v.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),v.jsx("div",{className:"mt-8 w-full max-w-md",children:v.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:v.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),ko=um((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,i="neutral",a)=>{t({message:n,type:i,isVisible:!0,undoAction:a}),setTimeout(()=>{e().hideToast()},6e3)},hideToast:()=>{t({isVisible:!1})}})),$N=({isVisible:t,onClose:e,mode:n,initialIncomeSource:i})=>{const{createIncomeSource:a,updateIncomeSource:o}=Jn(),{showToast:c}=ko(),[d,h]=M.useState(""),[f,g]=M.useState(""),[b,_]=M.useState(!1);M.useEffect(()=>{if(!t)return;const k=window.setTimeout(()=>{n==="edit"&&i?(h(i.name),g(i.amount.toString())):(h(""),g(""))},0);return()=>window.clearTimeout(k)},[t,n,i]);const E=async k=>{if(k.preventDefault(),!d.trim()||!f||parseFloat(f)<=0){c("Please fill in all required fields with valid values","error");return}_(!0);try{if(n==="add")await a({name:d.trim(),amount:parseFloat(f)}),c(`Added "${d.trim()}" as income source`,"success");else if(n==="edit"){if(!i){c("Error: No income source to edit","error");return}await o(i.id,{name:d.trim(),amount:parseFloat(f)}),c(`Updated "${d.trim()}" income source`,"success")}e()}catch(A){console.error("Error saving income source:",A),c("Failed to save income source. Please try again.","error")}finally{_(!1)}};return t?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),v.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),v.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),v.jsx("input",{type:"text",value:d,onChange:k=>h(k.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),v.jsx("input",{type:"number",value:f,onChange:k=>g(k.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:b||!d.trim()||!f||parseFloat(f)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})}):null},$8=({isVisible:t,onClose:e,onConfirm:n,currentMonth:i,incomeCount:a,totalIncome:o,allocationCount:c,totalAllocated:d,isLoading:h=!1})=>{const[f,g]=M.useState(""),[b,_]=M.useState("confirm"),E=R=>{const[L,z]=R.split("-");return new Date(parseInt(L),parseInt(z)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},k=()=>{b==="confirm"?_("type"):b==="type"&&f==="START FRESH"&&n()},A=()=>{_("confirm"),g(""),e()};return t?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[v.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",E(i)]}),v.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:h,children:""})]}),v.jsx("div",{className:"p-6 space-y-4",children:b==="confirm"?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:v.jsxs("div",{className:"flex items-start",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),v.jsxs("div",{className:"ml-3",children:[v.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),v.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:v.jsxs("ul",{className:"space-y-1",children:[v.jsxs("li",{children:[" ",a," income source",a!==1?"s":""," (totaling $",o.toFixed(2),"/month)"]}),v.jsxs("li",{children:[" ",c," envelope allocation",c!==1?"s":""," (totaling $",d.toFixed(2),")"]})]})})]})]})}),v.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),v.jsx("div",{className:"ml-3",children:v.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[v.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data."]})})]})}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"You can undo this action within 30 seconds if you change your mind."})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"text-center",children:[v.jsxs("p",{className:"text-sm text-gray-900 dark:text-white mb-4",children:["Type ",v.jsx("strong",{children:"START FRESH"})," to confirm:"]}),v.jsx("input",{type:"text",value:f,onChange:R=>g(R.target.value),placeholder:"START FRESH",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-zinc-800 dark:text-white text-center font-mono text-lg",autoFocus:!0})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center",children:"This action cannot be undone after 30 seconds"})]})}),v.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[v.jsx("button",{type:"button",onClick:A,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:h,children:"Cancel"}),v.jsx("button",{type:"button",onClick:k,disabled:h||b==="type"&&f!=="START FRESH",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Clearing...":b==="confirm"?"Continue":"Start Fresh"})]})]})}):null},G8=({currentMonth:t,onCopy:e,onDismiss:n,isLoading:i=!1})=>{const a=c=>{const[d,h]=c.split("-");return new Date(parseInt(d),parseInt(h)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},o=c=>{const[d,h]=c.split("-").map(Number);let f=d,g=h-1;return g<1&&(f=d-1,g=12),a(`${f}-${g.toString().padStart(2,"0")}`)};return v.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6 mb-6",children:[v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsxs("div",{className:"flex items-start space-x-3",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx(OD,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:"Copy Previous Month?"}),v.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:["Would you like to copy your budget setup from ",o(t)," to get started with ",a(t),"?"]}),v.jsx("p",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"This will copy your income sources and envelope allocations, but not transactions."})]})]}),v.jsx("button",{onClick:n,className:"flex-shrink-0 text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 transition-colors","aria-label":"Dismiss",children:v.jsx(Zl,{className:"h-5 w-5"})})]}),v.jsxs("div",{className:"mt-4 flex space-x-3",children:[v.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 bg-white dark:bg-zinc-800 border border-blue-300 dark:border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-zinc-700 transition-colors",disabled:i,children:"Start Fresh"}),v.jsx("button",{onClick:e,disabled:i,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Copying...":"Copy Previous Month"})]})]})},K8=()=>{const{envelopes:t,fetchData:e,isOnline:n,pendingSync:i,syncData:a,isLoading:o,getEnvelopeBalance:c,testingConnectivity:d}=Rn(),{currentMonth:h,incomeSources:f,envelopeAllocations:g,calculateAvailableToBudget:b,deleteIncomeSource:_,restoreIncomeSource:E,clearMonthData:k,copyFromPreviousMonth:A,setEnvelopeAllocation:R,fetchMonthlyData:L}=Jn(),{showToast:z}=ko(),V=Ea(),[G,ee]=M.useState(!1),[te,S]=M.useState("add"),[N,O]=M.useState(null),[P,D]=M.useState(!1),[F,U]=M.useState(!1),[Ce,xe]=M.useState(!1),$=M.useRef(null),[le,me]=M.useState(!0),[Te,ae]=M.useState(!1),j=M.useRef(null),[Z,ue]=M.useState(null),[he,ge]=M.useState(""),be=M.useRef(null);M.useEffect(()=>(console.log(" Starting initial data load, isInitialLoading:",le),(async()=>{console.log(" Setting timeout for loading message"),j.current=setTimeout(()=>{console.log(" Loading timeout reached, showing timeout message"),ae(!0)},8e3);try{console.log(" Fetching data in parallel..."),await Promise.all([e().then(()=>console.log(" Envelope data fetched")),L().then(()=>console.log(" Monthly budget data fetched"))]),j.current&&clearTimeout(j.current),console.log(" Data load complete, hiding loading screen"),me(!1),ae(!1)}catch(Le){console.error(" Error loading initial data:",Le),me(!1),ae(!1)}})(),()=>{j.current&&clearTimeout(j.current)}),[]),M.useEffect(()=>{Z&&be.current&&(be.current.focus(),be.current.select())},[Z]);const we=[...t].sort((Ne,Le)=>{const pt=Ne.orderIndex??0,sn=Le.orderIndex??0;return pt!==sn?pt-sn:Ne.name.localeCompare(Le.name)}),tt=t.reduce((Ne,Le)=>Ne+c(Le.id).toNumber(),0);console.log(" Total balance:",tt);const de=async()=>{if(Z)try{const Ne=parseFloat(he)||0;await R(Z,Ne)}catch(Ne){console.error("Failed to save budget amount:",Ne),z("Failed to update budget","error")}finally{ue(null),ge("")}},nt=()=>{S("add"),O(null),ee(!0)},ut=Ne=>{$.current&&clearTimeout($.current),!P&&(S("edit"),O(Ne),ee(!0))},In=Ne=>{$.current&&clearTimeout($.current),D(!0);const Le=f.findIndex(sn=>sn.id===Ne.id),pt={...Ne};_(Ne.id).catch(console.error),z(`Deleted "${Ne.name}"`,"neutral",()=>E(pt,Le)),setTimeout(()=>D(!1),500)},ti=()=>{ee(!1),O(null)},ni=()=>{U(!0)},Ia=async()=>{try{await k(),U(!1),z(`"${h}" budget cleared`,"neutral",()=>z('Cannot undo "Start Fresh" after 30 seconds',"error"))}catch(Ne){console.error("Error clearing month data:",Ne),z("Failed to clear month data","error")}},kr=async()=>{try{await A(),xe(!1),z("Previous month budget copied","success")}catch(Ne){console.error("Error copying previous month:",Ne),z("Failed to copy previous month","error")}},ka=b();return console.log(" Checking loading screen condition, isInitialLoading:",le),le?(console.log(" Showing loading screen"),v.jsx(HN,{message:Te?"Still loading... This is normal on slow connections":"Loading your budget...",showTimeout:Te})):(console.log(" Showing main content"),v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 z-30",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("div",{className:"flex items-center gap-2",children:n?o?v.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[v.jsx(rs,{size:16,className:"animate-spin"}),v.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):i?v.jsxs("button",{onClick:a,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[v.jsx(rs,{size:16}),v.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):v.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[v.jsx(A4,{size:16}),v.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):v.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[v.jsx(E4,{size:16}),v.jsx("span",{className:"text-sm font-medium",children:d?"Testing...":o?"Saving...":"Offline"})]})}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:()=>V("/transactions"),className:"text-blue-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Transaction History",children:v.jsx(WD,{size:22})}),v.jsx("button",{onClick:()=>V("/monthly-budget-demo"),className:"text-purple-500 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",title:"Monthly Budget Demo",children:v.jsx(KD,{size:22})}),v.jsx("button",{onClick:ni,className:"text-orange-500 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",title:"Start Fresh - Clear current month budget",children:v.jsx(rs,{size:22})}),v.jsx(qN,{})]})]}),v.jsx("div",{className:"mt-4",children:v.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Personal Budget"})})]}),v.jsxs("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[v.jsx(BN,{currentMonth:h,onMonthChange:Ne=>{Jn.getState().setCurrentMonth(Ne),setTimeout(()=>{const Le=Jn.getState();Le.currentMonth===Ne&&Le.incomeSources.length===0&&Le.envelopeAllocations.length===0&&xe(!0)},500)}}),v.jsx(FN,{amount:ka,totalIncome:f.reduce((Ne,Le)=>Ne+Le.amount,0),totalAllocated:g.reduce((Ne,Le)=>Ne+Le.budgetedAmount,0),isLoading:o}),Ce&&v.jsx(G8,{currentMonth:h,onCopy:kr,onDismiss:()=>xe(!1)}),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Income Sources"}),v.jsx("button",{onClick:nt,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:v.jsx(kl,{size:20})})]}),f.length===0?v.jsx("div",{className:"text-center py-6",children:v.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm",children:"No income sources yet. Add your monthly income."})}):v.jsx("div",{className:"space-y-3",children:v.jsx(Ll,{initial:!1,mode:"popLayout",children:f.map(Ne=>v.jsx(_o.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(Wu,{onDelete:()=>In(Ne),children:v.jsxs("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>ut(Ne),children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:Ne.name}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly income"})]}),v.jsxs("p",{className:"font-semibold text-green-600 dark:text-emerald-400",children:["$",Ne.amount.toFixed(2)]})]})})},Ne.id))})})]}),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Spending Envelopes"}),v.jsx("button",{onClick:()=>V("/add-envelope"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Envelope",children:v.jsx(kl,{size:20})})]}),we.length===0?v.jsxs("div",{className:"text-center py-6",children:[v.jsx(xS,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),v.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:"No envelopes yet. Create one to get started."}),v.jsx("button",{onClick:()=>V("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]}):v.jsx("div",{className:"space-y-3",children:we.map(Ne=>{const pt=g.find(qn=>qn.envelopeId===Ne.id)?.budgetedAmount||0,sn=c(Ne.id);return v.jsxs("div",{onClick:()=>Z!==Ne.id&&V(`/envelope/${Ne.id}`),className:"bg-gray-50 dark:bg-zinc-800 p-4 rounded-xl cursor-pointer active:scale-[0.99] transition-transform",children:[v.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:Ne.name}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("div",{className:"flex items-center space-x-4",onClick:qn=>qn.stopPropagation(),children:Z===Ne.id?v.jsxs("div",{className:"flex items-center space-x-1",children:[v.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),v.jsx("form",{onSubmit:qn=>{qn.preventDefault(),de()},children:v.jsx("input",{ref:be,type:"number",value:he,onChange:qn=>ge(qn.target.value),onBlur:de,onKeyDown:qn=>{qn.key==="Escape"&&ue(null)},className:"w-24 bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-300 font-semibold text-left rounded-md px-2 py-1 border border-blue-300 dark:border-blue-500 focus:ring-2 focus:ring-blue-500 outline-none",step:"0.01",placeholder:"0.00"})})]}):v.jsxs("button",{onClick:()=>{ue(Ne.id),ge(pt.toFixed(2))},className:"flex items-center space-x-1 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors rounded-md p-1 -m-1",children:[v.jsx("span",{className:"text-sm",children:"Budgeted:"}),v.jsxs("span",{className:"font-semibold",children:["$",pt.toFixed(2)]})]})}),v.jsxs("div",{className:"text-right",children:[v.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Remaining"}),v.jsxs("div",{className:`font-semibold ${sn.toNumber()<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[sn.toNumber()<0?"-":"","$",Math.abs(sn.toNumber()).toFixed(2)]})]})]})]},Ne.id)})})]})]}),v.jsx("button",{onClick:()=>V("/add-transaction"),className:"fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform",children:v.jsx(kl,{size:28})}),v.jsx($N,{isVisible:G,onClose:ti,mode:te,initialIncomeSource:N}),v.jsx($8,{isVisible:F,onClose:()=>U(!1),onConfirm:Ia,currentMonth:h,incomeCount:f.length,totalIncome:f.reduce((Ne,Le)=>Ne+Le.amount,0),allocationCount:g.length,totalAllocated:g.reduce((Ne,Le)=>Ne+Le.budgetedAmount,0)})]}))},GN=({isVisible:t,onClose:e,mode:n,currentEnvelope:i,initialTransaction:a})=>{const{addToEnvelope:o,spendFromEnvelope:c,updateTransaction:d,deleteTransaction:h}=Rn(),[f,g]=M.useState(""),[b,_]=M.useState(""),[E,k]=M.useState(new Date().toISOString().split("T")[0]);if(M.useEffect(()=>{if(!t)return;const V=window.setTimeout(()=>{if(n==="edit"&&a){g(a.amount.toString()),_(a.description);try{const G=new Date(a.date);isNaN(G.getTime())?(console.warn("Invalid date in transaction:",a.date),k(new Date().toISOString().split("T")[0])):k(G.toISOString().split("T")[0])}catch(G){console.error("Error parsing transaction date:",G),k(new Date().toISOString().split("T")[0])}}else g(""),_(""),k(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(V)},[t,n,a]),!t)return null;const A=V=>{V.preventDefault();const G=parseFloat(f);isNaN(G)||G<=0||(n==="add"?o(i.id,G,b,new Date(E)):n==="spend"?c(i.id,G,b,new Date(E)):n==="edit"&&a&&d({...a,amount:G,description:b,date:new Date(E).toISOString()}),e())},R=()=>{!a||!a.id||window.confirm("Are you sure you want to delete this transaction?")&&(h(a.id),e())},L=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",z=n==="add"?"text-green-500":"text-red-500";return v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[v.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),v.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:L}),v.jsx("button",{onClick:A,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0,children:"Save"})]}),v.jsxs("form",{onSubmit:A,className:"p-6 space-y-6",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${z}`,children:"$"}),v.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:f,onChange:V=>{const G=V.target.value;(G===""||!isNaN(parseFloat(G))&&parseFloat(G)>=0)&&g(G)},onKeyDown:V=>{(V.key==="e"||V.key==="E"||V.key==="+"||V.key==="-")&&V.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${z} placeholder-gray-700`})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),v.jsx("input",{type:"text",value:b,onChange:V=>_(V.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),v.jsx("input",{type:"date",value:E,onChange:V=>{console.log("Date changed to:",V.target.value),k(V.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),n==="edit"&&v.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:v.jsxs("button",{type:"button",onClick:R,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[v.jsx(_S,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},Y8=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:i,transferFunds:a}=Rn(),[o,c]=M.useState(""),[d,h]=M.useState(""),[f,g]=M.useState(""),[b,_]=M.useState(new Date().toISOString().split("T")[0]),E=i.filter(R=>R.id!==n.id);if(M.useEffect(()=>{if(!t)return;const R=window.setTimeout(()=>{c(""),h(""),g(""),_(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(R)},[t]),!t)return null;const k=R=>{R.preventDefault();const L=parseFloat(d);isNaN(L)||L<=0||!o||(a(n.id,o,L,f,new Date(b)),e())},A=i.find(R=>R.id===o);return v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[v.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),v.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),v.jsx("button",{onClick:k,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!d||parseFloat(d)<=0||!o,children:"Transfer"})]}),v.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),v.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),v.jsxs("select",{value:o,onChange:R=>c(R.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[v.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),E.map(R=>v.jsx("option",{value:R.id,className:"bg-white dark:bg-zinc-900",children:R.name},R.id))]})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),v.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:d,onChange:R=>h(R.target.value),onKeyDown:R=>{(R.key==="e"||R.key==="E"||R.key==="+"||R.key==="-")&&R.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),v.jsx("input",{type:"text",value:f,onChange:R=>g(R.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),v.jsx("input",{type:"date",value:b,onChange:R=>_(R.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),A&&d&&parseFloat(d)>0&&v.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",v.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(d).toFixed(2)]})," from"," ",v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:A.name})]})]})]})})},Q8=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},X8=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},KN=({transaction:t,envelopeName:e,onReconcile:n,onEdit:i})=>{if(!t)return null;const a=t.type==="Income",o=t.type==="Expense";let c="text-gray-900 dark:text-white";return a&&(c="text-green-600 dark:text-green-400"),o&&(c="text-red-600 dark:text-red-400"),v.jsxs("div",{onClick:i,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[v.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:t.description||"No Description"}),t.reconciled&&v.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),v.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1",children:[v.jsx("span",{children:Q8(t.date)}),e&&v.jsxs(v.Fragment,{children:[v.jsx("span",{children:""}),v.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${c}`,children:[o?"-":a?"+":"",X8(t.amount)]}),n?v.jsx("button",{type:"button",onClick:d=>{d.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?v.jsx(Xw,{className:"text-green-500",size:20}):v.jsx(Ww,{className:"text-gray-400",size:20})}):v.jsx("span",{children:t.reconciled?v.jsx(Xw,{className:"text-green-500",size:20}):v.jsx(Ww,{className:"text-gray-400",size:20})})]})]})},JE=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),W8=()=>{const{id:t}=gk(),{envelopes:e,transactions:n,fetchData:i,isLoading:a,deleteEnvelope:o,renameEnvelope:c,updateTransaction:d,deleteTransaction:h,restoreTransaction:f,getEnvelopeBalance:g}=Rn(),{showToast:b}=ko(),_=Ea(),E=Ta(),[k,A]=M.useState(!1),[R,L]=M.useState(!1),[z,V]=M.useState(!1),[G,ee]=M.useState(null);M.useEffect(()=>{e.length===0&&i()},[]);const te=e.find(D=>D.id===t);if(!te)return a?v.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:v.jsx("p",{children:"Loading envelope..."})}):v.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:v.jsx("p",{children:"Envelope not found."})});const S=n.filter(D=>D.envelopeId===te.id).sort((D,F)=>new Date(F.date).getTime()-new Date(D.date).getTime()),N=()=>{E.state?.fromGlobalFAB?_("/"):_(-1)},O=()=>{t&&(o(t),_(-1))},P=D=>{const F={...D,reconciled:!D.reconciled};d(F)};return v.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4",children:[v.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[v.jsx("button",{onClick:()=>{const D=prompt("Rename envelope:",te.name);D&&D.trim()&&t&&c(t,D)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),v.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.name}),v.jsx("button",{onClick:N,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),v.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const D=g(te.id).toNumber();return console.log(`Debug: Envelope ${te.name} Balance:`,D),v.jsx("span",{className:`text-xl font-bold ${D<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:JE(D)})})()]}),v.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-zinc-400",children:[v.jsx("span",{children:"Budget"}),v.jsx("span",{children:JE(te.currentBalance||0)})]})]}),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>A(!0),children:[v.jsx(ND,{className:"w-5 h-5 mr-3"}),"Add Money"]}),v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>L(!0),children:[v.jsx(AD,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>V(!0),children:[v.jsx(yD,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),v.jsxs("section",{className:"mt-6",children:[v.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:S.length===0?v.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):v.jsx(Ll,{initial:!1,mode:"popLayout",children:S.map(D=>v.jsx(_o.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(Wu,{onDelete:()=>{if(!D.id)return;const F={...D};h(D.id),b("Transaction deleted","neutral",()=>f(F))},children:v.jsx(KN,{transaction:D,onReconcile:()=>P(D),onEdit:()=>ee(D)})})},D.id))})})]}),v.jsx("div",{className:"mt-8",children:v.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${te.name}"? This will delete all transactions.`)&&O()},children:[v.jsx(_S,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(k||R||G)&&v.jsx(GN,{isVisible:k||R||!!G,onClose:()=>{A(!1),L(!1),ee(null)},mode:k?"add":R?"spend":"edit",currentEnvelope:te,initialTransaction:G}),z&&v.jsx(Y8,{isVisible:z,onClose:()=>V(!1),sourceEnvelope:te})]})},Z8="1.1.0",J8={version:Z8},e7=()=>{const t=Ea(),e=M.useRef(null),{envelopes:n,transactions:i,distributionTemplates:a,resetData:o,importData:c,getEnvelopeBalance:d,appSettings:h,updateAppSettings:f,initializeAppSettings:g,cleanupOrphanedTemplates:b}=Rn(),{currentUser:_,deleteAccount:E}=Ei(),[k,A]=M.useState(null),[R,L]=M.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[z,V]=M.useState(!1),[G,ee]=M.useState(!1),[te,S]=M.useState(""),[N,O]=M.useState(!1),P=978307200,D=h?.theme??"system";M.useEffect(()=>{h||g().catch(j=>{console.error("Failed to initialize app settings:",j)})},[h,g]);const F=(j,Z)=>{A({type:j,text:Z}),setTimeout(()=>A(null),3500)},U=M.useMemo(()=>{const j=n.length,Z=i.length,ue=a.length,he=n.reduce((tt,de)=>tt+d(de.id).toNumber(),0),ge=0,be=i.reduce((tt,de)=>{let nt=0;if(typeof de.date=="string"){const ut=Date.parse(de.date);nt=Number.isNaN(ut)?0:ut}else typeof de.date=="number"&&(nt=de.date<2e9?(de.date+P)*1e3:de.date);return Math.max(tt,nt)},0),we=ge||be?new Date(Math.max(ge,be)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:j,transactionCount:Z,templateCount:ue,totalBalance:he,lastUpdated:we}},[n,i,a]),Ce=()=>{try{const j={appVersion:"2.0 (PWA)",backupDate:Date.now(),appSettings:h||{theme:"system"},envelopes:n.map(be=>({...be,currentBalance:d(be.id).toNumber(),lastUpdated:new Date().toISOString()})),transactions:i,distributionTemplates:a},Z=new Blob([JSON.stringify(j,null,2)],{type:"application/json"}),ue=URL.createObjectURL(Z),he=document.createElement("a");he.href=ue,he.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(he),he.click(),document.body.removeChild(he),URL.revokeObjectURL(ue);const ge=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",ge),L(ge),F("success","Backup downloaded successfully.")}catch(j){console.error(j),F("error","Failed to create backup file.")}},xe=()=>{try{const j=["Date","Description","Amount","Type","Envelope","Reconciled"],Z=i.map(we=>{const tt=n.find(ut=>ut.id===we.envelopeId)?.name||"Unknown",de=(we.description||"").replace(/"/g,'""');let nt="Invalid Date";if(we.date){if(typeof we.date=="string")nt=we.date.split("T")[0];else if(typeof we.date=="number"){const ut=we.date<2e9?(we.date+P)*1e3:we.date;nt=new Date(ut).toISOString().split("T")[0]}}return[nt,`"${de}"`,we.amount.toFixed(2),we.type,`"${tt}"`,we.reconciled?"Yes":"No"].join(",")}),ue=[j.join(","),...Z].join(`
`),he=new Blob([ue],{type:"text/csv;charset=utf-8;"}),ge=URL.createObjectURL(he),be=document.createElement("a");be.href=ge,be.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(be),be.click(),document.body.removeChild(be),URL.revokeObjectURL(ge),F("success","CSV export ready to open in Excel/Numbers.")}catch(j){console.error(j),F("error","Failed to export CSV.")}},$=()=>{e.current?.click()},le=j=>{const Z=j.target.files?.[0];if(!Z)return;const ue=new FileReader;ue.onload=async he=>{try{const ge=JSON.parse(he.target?.result),be=await c(ge);if(!be.success){F("error",be.message);return}if(ge.appSettings?.theme)try{await f({theme:ge.appSettings.theme})}catch(we){console.error("Failed to update imported settings:",we)}else if(ge.appSettings?.isDarkMode!==void 0)try{const we=ge.appSettings.isDarkMode?"dark":"light";await f({theme:we})}catch(we){console.error("Failed to update imported settings:",we)}F("success",`Loaded ${ge.envelopes?.length??0} envelopes, ${ge.transactions?.length??0} transactions, and ${ge.distributionTemplates?.length??0} templates.`)}catch(ge){console.error(ge),F("error","Invalid backup file. Please verify the JSON.")}},ue.readAsText(Z),j.target.value=""},me=async()=>{V(!0);try{F("success","Scanning templates for orphaned references..."),await b(),F("success","Orphaned templates have been cleaned up successfully.")}catch(j){console.error("Template cleanup failed:",j),F("error","Failed to clean up orphaned templates. Check console for details.")}finally{V(!1)}},Te=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, templates, and settings from the cloud. This action cannot be undone."))try{await o(),F("success","All data has been permanently deleted."),t("/")}catch(j){console.error("Reset failed:",j),F("error","Failed to delete all data. Some data may remain.")}},ae=async()=>{if(!te.trim()){F("error","Please enter your password to confirm account deletion.");return}ee(!0);try{await o(),await E(te)?F("success","Your account has been permanently deleted."):F("error","Failed to delete account. Please try again.")}catch(j){console.error("Account deletion failed:",j),F("error","Failed to delete account. Please try again.")}finally{ee(!1),O(!1),S("")}};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[v.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),v.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto",children:[k&&v.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${k.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[k.type==="success"?v.jsx(ky,{size:18}):v.jsx(cf,{size:18}),k.text]}),v.jsx("section",{children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Zw,{className:"text-blue-500",size:22}),v.jsxs("div",{children:[v.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),v.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, templates, and settings."})]})]}),v.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:U.envelopeCount})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:U.transactionCount})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Templates"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:U.templateCount})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Data Last Modified"}),v.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:U.lastUpdated})]})]})]})}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[D==="light"&&v.jsx("span",{className:"text-orange-500 text-lg",children:""}),D==="dark"&&v.jsx("span",{className:"text-purple-500 text-lg",children:""}),D==="system"&&v.jsx("span",{className:"text-gray-500 text-lg",children:""}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),v.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:D})]}),v.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),v.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(j=>v.jsx("button",{onClick:async()=>{try{await f({theme:j.value})}catch(Z){console.error("Failed to update theme setting:",Z)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${D===j.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:j.label},j.value))})]})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[v.jsxs("button",{onClick:Ce,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Zw,{className:"text-blue-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),v.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",R]})]})]}),v.jsx(lo,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:$,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(b4,{className:"text-blue-500",size:20}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),v.jsx(lo,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:xe,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(BD,{className:"text-blue-500",size:20}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transactions (CSV)"})]}),v.jsx(lo,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:me,disabled:z,className:`w-full p-4 flex items-center justify-between transition-colors ${z?"bg-gray-50 dark:bg-zinc-800/50 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[v.jsxs("div",{className:"flex items-center gap-3",children:[z?v.jsx(Jw,{className:"text-blue-500 animate-spin",size:20}):v.jsx(rs,{className:"text-blue-500",size:20}),v.jsx("span",{className:`font-medium ${z?"text-gray-500 dark:text-zinc-400":"text-gray-900 dark:text-white"}`,children:z?"Cleaning Templates...":"Clean Up Orphaned Templates"})]}),z?v.jsx("div",{className:"text-gray-400 text-sm",children:"Working..."}):v.jsx(lo,{className:"text-gray-400",size:18})]}),v.jsx("input",{type:"file",ref:e,onChange:le,accept:".json",className:"hidden"})]})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[v.jsx("p",{children:"Create regular backups before major changes."}),v.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),v.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),v.jsx("p",{children:"Restoring replaces all current envelopes, transactions, templates, and settings."})]})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[v.jsxs("button",{onClick:Te,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group border-b border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(cf,{className:"text-red-500 group-hover:text-red-600",size:20}),v.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Reset All Data"})]}),v.jsx(lo,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:()=>O(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(cf,{className:"text-red-600 group-hover:text-red-700",size:20}),v.jsx("span",{className:"text-red-600 group-hover:text-red-700 font-medium",children:"Delete Account"})]}),v.jsx(lo,{className:"text-gray-400",size:18})]})]}),v.jsxs("div",{className:"px-1 pt-2 text-xs text-gray-500 dark:text-zinc-500 space-y-1",children:[v.jsx("div",{children:"This clears every envelope, transaction, and template. Use with caution."}),v.jsx("div",{children:"Deleting your account permanently removes all data and cannot be undone."})]})]}),v.jsxs("div",{className:"text-center pt-4 pb-12 text-xs text-gray-400 dark:text-zinc-500 font-medium",children:["House Budget PWA  App Version ",J8.version]})]}),N&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full p-6 shadow-xl",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:v.jsx(wS,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),v.jsx("button",{onClick:()=>O(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:v.jsx(Zl,{size:20})})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[v.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium mb-2",children:"This action cannot be undone"}),v.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Deleting your account will permanently remove all your data including envelopes, transactions, templates, and settings. This action is irreversible."})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Account Email: ",v.jsx("span",{className:"font-semibold",children:_?.email})]}),v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),v.jsx("input",{type:"password",value:te,onChange:j=>S(j.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your password",disabled:G})]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("button",{onClick:()=>O(!1),disabled:G,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:"Cancel"}),v.jsx("button",{onClick:ae,disabled:G||!te.trim(),className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-md transition-colors disabled:cursor-not-allowed flex items-center justify-center gap-2",children:G?v.jsxs(v.Fragment,{children:[v.jsx(Jw,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Account"})]})]})]})})]})},t7=()=>{const t=Ea(),{createEnvelope:e}=Rn(),[n,i]=M.useState(""),[a,o]=M.useState(""),c=d=>{if(d.preventDefault(),!n.trim())return;const h=parseFloat(a),f=isNaN(h)?0:h,g=Rn.getState().envelopes,_=(g.length>0?Math.max(...g.map(E=>E.orderIndex??0)):-1)+1;e({name:n,currentBalance:f,lastUpdated:new Date().toISOString(),isActive:!0,orderIndex:_}),t("/")};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[v.jsx("button",{onClick:()=>t("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:v.jsx(Mu,{size:24})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"New Envelope"})]}),v.jsx("div",{className:"p-4 max-w-md mx-auto",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[v.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:v.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:v.jsx(qD,{size:40})})}),v.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Envelope Name"}),v.jsx("input",{type:"text",id:"name",value:n,onChange:d=>i(d.target.value),placeholder:"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),v.jsx("input",{type:"number",id:"balance",value:a,onChange:d=>o(d.target.value),onKeyDown:d=>{(d.key==="e"||d.key==="E"||d.key==="+"||d.key==="-")&&d.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later by editing the envelope budget on the main screen.'})]}),v.jsxs("div",{className:"pt-4 flex gap-3",children:[v.jsx("button",{type:"button",onClick:()=>t("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:!n.trim(),className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${n.trim()?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:"Create Envelope"})]})]})]})})]})},n7=()=>{const t=Ea(),{envelopes:e,getEnvelopeBalance:n,addToEnvelope:i,spendFromEnvelope:a}=Rn(),[o,c]=M.useState(""),[d,h]=M.useState(""),[f,g]=M.useState(new Date().toISOString().split("T")[0]),[b,_]=M.useState(""),[E,k]=M.useState("expense"),A=o&&parseFloat(o)>0&&b,R=V=>{if(V.preventDefault(),!A)return;const G=parseFloat(o),ee=new Date(f);E==="income"?i(b,G,d,ee):a(b,G,d,ee),t("/")},L=[...e].sort((V,G)=>{const ee=V.orderIndex??0,te=G.orderIndex??0;return ee!==te?ee-te:V.name.localeCompare(G.name)}),z=E==="income"?"text-green-500":"text-red-500";return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center justify-between",children:[v.jsx("button",{onClick:()=>t(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),v.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),v.jsx("button",{onClick:R,disabled:!A,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),v.jsx("div",{className:"p-4 max-w-md mx-auto",children:v.jsxs("form",{onSubmit:R,className:"space-y-6",children:[v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:v.jsxs("div",{className:"flex",children:[v.jsx("button",{type:"button",onClick:()=>k("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${E==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),v.jsx("button",{type:"button",onClick:()=>k("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${E==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${z}`,children:"$"}),v.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:o,onChange:V=>{const G=V.target.value;(G===""||!isNaN(parseFloat(G))&&parseFloat(G)>=0)&&c(G)},onKeyDown:V=>{(V.key==="e"||V.key==="E"||V.key==="+"||V.key==="-")&&V.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${z} placeholder-gray-700`})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),v.jsx("input",{type:"text",value:d,onChange:V=>h(V.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),v.jsx("input",{type:"date",value:f,onChange:V=>g(V.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Envelope"}),v.jsxs("select",{value:b,onChange:V=>_(V.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",children:[v.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select an envelope"}),L.map(V=>v.jsxs("option",{value:V.id,className:"bg-white dark:bg-zinc-900",children:[V.name," ($",n(V.id).toNumber().toFixed(2),")"]},V.id))]})]})]})})]})},i7=()=>{const t=Ea(),{transactions:e,envelopes:n,updateTransaction:i,deleteTransaction:a,restoreTransaction:o}=Rn(),{showToast:c}=ko(),[d,h]=M.useState(!1),[f,g]=M.useState(""),[b,_]=M.useState("all"),[E,k]=M.useState("All"),[A,R]=M.useState(!1),[L,z]=M.useState(()=>{const P=new Date;return P.setMonth(P.getMonth()-1),P.toISOString().split("T")[0]}),[V,G]=M.useState(()=>new Date().toISOString().split("T")[0]),[ee,te]=M.useState(null),S=M.useMemo(()=>e.map(D=>{if(!D)return null;let F=D.date;if(typeof D.date=="number"){const Ce=(D.date+978307200)*1e3;F=new Date(Ce).toISOString()}else if(!D.date||typeof D.date!="string")return null;return{...D,date:F}}).filter(Boolean).filter(D=>{if(f){const U=f.toLowerCase(),Ce=n.find(le=>le.id===D.envelopeId)?.name.toLowerCase()||"",xe=D.amount.toFixed(2);if(!(D.description.toLowerCase().includes(U)||Ce.includes(U)||xe.includes(U)))return!1}if(b!=="all"&&D.envelopeId!==b||E!=="All"&&D.type!==E||!D.date||typeof D.date!="string")return!1;const F=D.date.split("T")[0];return!(F<L||F>V||A&&!D.reconciled)}).sort((D,F)=>new Date(F.date).getTime()-new Date(D.date).getTime()),[e,n,f,b,E,L,V,A]),N=ee?n.find(P=>P.id===ee.envelopeId):null,O=P=>{const D={...P,reconciled:!P.reconciled};i(D)};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:v.jsx(Mu,{size:24})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),v.jsx("button",{onClick:()=>h(!d),className:`p-2 rounded-full transition-colors ${d?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:v.jsx($D,{size:20,className:d?"fill-current":""})})]}),v.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${d?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:v.jsxs("div",{className:"p-4 space-y-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx(a4,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),v.jsx("input",{type:"text",placeholder:"Search transactions...",value:f,onChange:P=>g(P.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),f&&v.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:v.jsx(Zl,{size:16})})]}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),v.jsxs("select",{value:b,onChange:P=>_(P.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[v.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((P,D)=>P.name.localeCompare(D.name)).map(P=>v.jsx("option",{value:P.id,children:P.name},P.id))]})]}),v.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(P=>v.jsx("button",{onClick:()=>k(P),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${E===P?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:P},P))}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),v.jsx("div",{className:"relative",children:v.jsx("input",{type:"date",value:L,onChange:P=>z(P.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),v.jsx("div",{className:"relative",children:v.jsx("input",{type:"date",value:V,onChange:P=>G(P.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),v.jsxs("div",{className:"flex items-center justify-between pt-2",children:[v.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),v.jsx("button",{onClick:()=>R(!A),className:`w-11 h-6 rounded-full transition-colors relative ${A?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:v.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${A?"translate-x-5":"translate-x-0"}`})})]})]})}),v.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:S.length===0?v.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):v.jsx(Ll,{initial:!1,mode:"popLayout",children:S.map(P=>{const D=n.find(F=>F.id===P.envelopeId);return v.jsx(_o.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(Wu,{onDelete:()=>{if(!P.id)return;const F={...P};a(P.id),c("Transaction deleted","neutral",()=>o(F))},children:v.jsx(KN,{transaction:P,envelopeName:D?.name||"Unknown Envelope",onReconcile:()=>O(P),onEdit:()=>{D?te(P):alert("Cannot edit: Envelope deleted.")}})})},P.id)})})})}),ee&&N&&v.jsx(GN,{isVisible:!!ee,onClose:()=>te(null),mode:"edit",currentEnvelope:N,initialTransaction:ee})]})},YN=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],r7=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const i=YN.map(d=>({...d,met:d.regex.test(t)})).filter(d=>d.met).length;let a,o,c;return i<=1?(a="weak",o="text-red-500",c="Weak"):i<=3?(a="medium",o="text-yellow-500",c="Medium"):i===4?(a="strong",o="text-blue-500",c="Strong"):(a="very-strong",o="text-green-500",c="Very Strong"),{score:i,level:a,color:o,label:c}},db=t=>{const e=YN.map(a=>({...a,met:a.regex.test(t)})),n=r7(t),i=e.every(a=>a.met);return{requirements:e,strength:n,isValid:i,isEmpty:!t.trim()}},s7=({password:t,className:e=""})=>{const{strength:n,isEmpty:i}=db(t);return i?null:v.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[v.jsx("div",{className:"flex-1",children:v.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(a=>v.jsx("div",{className:`h-1 flex-1 rounded-full ${a<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},a))})}),v.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},a7=({password:t,className:e=""})=>{const{requirements:n,isEmpty:i}=db(t);return i?null:v.jsx("div",{className:`space-y-1 ${e}`,children:n.map(a=>v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.met?v.jsx(bD,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):v.jsx(Zl,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),v.jsx("span",{className:a.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:a.label})]},a.id))})},o7=()=>{const[t,e]=M.useState(""),[n,i]=M.useState(""),[a,o]=M.useState(""),[c,d]=M.useState(!1),[h,f]=M.useState(!1),[g,b]=M.useState(!1),[_,E]=M.useState(!1),{login:k,register:A,sendPasswordReset:R,isLoading:L,loginError:z,clearError:V}=Ei(),G=db(n),ee=async S=>{if(S.preventDefault(),V(),t.trim()&&n.trim())if(h){if(!a.trim()||!G.isValid)return;await A(t.trim(),n,a.trim())}else await k(t.trim(),n)},te=async S=>{S.preventDefault(),t.trim()&&await R(t.trim())&&E(!0)};return M.useEffect(()=>{e(""),i(""),o(""),E(!1)},[h,g]),v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsx("div",{className:"text-center",children:v.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),v.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),v.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:g?v.jsxs("form",{onSubmit:te,className:"space-y-6",children:[v.jsxs("div",{className:"text-center mb-2",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(A0,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{id:"reset-email",type:"email",value:t,onChange:S=>e(S.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:L,autoComplete:"email"})]})]}),_?v.jsxs("div",{className:"text-center py-4",children:[v.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:v.jsx(A0,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),v.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),v.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",v.jsx("span",{className:"font-medium",children:t})]}),v.jsxs("button",{type:"button",onClick:()=>b(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[v.jsx(Mu,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{type:"submit",disabled:L||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:L?"Sending...":"Send Reset Link"}),v.jsx("div",{className:"mt-4 text-center",children:v.jsxs("button",{type:"button",onClick:()=>b(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:L,children:[v.jsx(Mu,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):v.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h?"Create Account":"Sign In"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:h?"Create a new account to get started":"Sign in to your account"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),v.jsx("input",{id:"email",type:"email",value:t,onChange:S=>e(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:L,autoComplete:"username"})]}),h&&v.jsxs("div",{children:[v.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),v.jsx("input",{id:"displayName",type:"text",value:a,onChange:S=>o(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:L})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!h&&v.jsx("button",{type:"button",onClick:()=>b(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:L,children:"Forgot password?"})]}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{id:"password",type:c?"text":"password",value:n,onChange:S=>i(S.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${h&&n&&!G.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:L,autoComplete:h?"new-password":"current-password"}),v.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:L,children:c?v.jsx(PD,{className:"h-5 w-5"}):v.jsx(UD,{className:"h-5 w-5"})})]}),h&&n&&v.jsx("div",{className:"mt-2",children:v.jsx(s7,{password:n})}),h&&n&&v.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:v.jsx(a7,{password:n})})]}),z&&v.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[z,z.includes("verify your email")&&v.jsx("div",{className:"mt-3",children:v.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),v.jsx("button",{type:"submit",disabled:L||!t.trim()||!n.trim()||h&&!a.trim()||h&&!G.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:L?h?"Creating Account...":"Signing in...":h?"Create Account":"Sign In"}),v.jsx("div",{className:"mt-6 text-center",children:v.jsxs("button",{type:"button",onClick:()=>{f(!h),b(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:L,children:[v.jsx(w4,{className:"h-4 w-4"}),h?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},eS=()=>{const[t,e]=M.useState(!1),[n,i]=M.useState(!1),{currentUser:a,resendEmailVerification:o,logout:c,loginError:d}=Ei();M.useEffect(()=>{a||console.warn("EmailVerificationView: No current user, this should not happen")},[a]);const h=async()=>{e(!0),i(!1);const g=await o();e(!1),g&&(i(!0),setTimeout(()=>i(!1),3e3))},f=async()=>{await c()};return a?v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsx("div",{className:"text-center",children:v.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),v.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),v.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:v.jsx(A0,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",v.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.email})]}),v.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(ky,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),v.jsxs("div",{className:"text-left",children:[v.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),v.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[v.jsx("li",{children:"1. Open your email inbox"}),v.jsx("li",{children:"2. Find the email from House Budget"}),v.jsx("li",{children:'3. Click the "Verify Email" link'}),v.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),d&&v.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:d}),n&&v.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),v.jsx("button",{onClick:h,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?v.jsxs(v.Fragment,{children:[v.jsx(rs,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):v.jsxs(v.Fragment,{children:[v.jsx(rs,{className:"h-4 w-4"}),"Resend verification email"]})}),v.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[v.jsx(Mu,{className:"h-4 w-4"}),"Back to sign in"]})]})}),v.jsx("div",{className:"text-center",children:v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},l7=({isVisible:t,onClose:e,initialAllocation:n,getEnvelopeName:i,onEnvelopeNameUpdate:a})=>{const[o,c]=M.useState(""),[d,h]=M.useState(""),[f,g]=M.useState(!1),b=M.useRef(null),{setEnvelopeAllocation:_}=Jn(),{showToast:E}=ko();M.useEffect(()=>{if(!t)return;const A=window.setTimeout(()=>{n?(c(i(n.envelopeId)),h(n.budgetedAmount.toString())):(c(""),h("")),setTimeout(()=>{b.current&&(b.current.focus(),b.current.select())},100)},0);return()=>window.clearTimeout(A)},[t,n,i]);const k=async A=>{if(A.preventDefault(),!(!o.trim()||!d||parseFloat(d)<=0)){g(!0);try{if(n){o.trim()!==i(n.envelopeId)&&a?.(n.envelopeId,o.trim());const R=parseFloat(d);await _(n.envelopeId,R),E(`Budget updated to $${R.toFixed(2)}`,"success")}e()}catch(R){console.error("Error saving envelope allocation:",R),E("Failed to save budget amount","error")}finally{g(!1)}}};return t?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Set Budget Amount"}),v.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),v.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Envelope Name *"}),v.jsx("input",{type:"text",value:o,onChange:A=>c(A.target.value),placeholder:"e.g., Groceries, Gas, Entertainment",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Budgeted Amount *"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),v.jsx("input",{ref:b,type:"number",value:d,onChange:A=>h(A.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0,autoComplete:"off"})]})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:f||!o.trim()||!d||parseFloat(d)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Saving...":"Save Changes"})]})]})]})}):null},c7=({isOpen:t,onClose:e,onEnvelopeCreated:n})=>{const{setEnvelopeAllocation:i}=Jn(),[a,o]=M.useState(""),[c,d]=M.useState(""),[h,f]=M.useState(!1),[g,b]=M.useState(!1),_=async k=>{if(k.preventDefault(),!(!a.trim()||!c)){f(!0);try{const A=`env-${a.toLowerCase().replace(/\s+/g,"-")}-${Date.now()}`,R=parseFloat(c)||0;await i(A,R),b(!0),setTimeout(()=>{b(!1),e(),n&&n(A,a.trim()),o(""),d("")},1500)}catch(A){console.error("Error creating envelope:",A)}finally{f(!1)}}},E=()=>{o(""),d(""),b(!1),e()};return t?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-xl max-w-md w-full",children:[v.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-zinc-800",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Envelope"}),v.jsx("button",{onClick:E,className:"p-1 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",children:v.jsx(Zl,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),v.jsxs("div",{className:"p-4",children:[g&&v.jsxs("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg flex items-center gap-2",children:[v.jsx(i4,{className:"w-4 h-4 text-green-600 dark:text-green-400 flex-shrink-0"}),v.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:"Envelope created successfully!"})]}),v.jsxs("form",{onSubmit:_,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Envelope Name"}),v.jsx("input",{type:"text",value:a,onChange:k=>o(k.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Groceries, Gas, Entertainment",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Budgeted Amount"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:"$"}),v.jsx("input",{type:"number",step:"0.01",min:"0",value:c,onChange:k=>d(k.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",required:!0})]})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsx("button",{type:"button",onClick:E,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-zinc-800 hover:bg-gray-200 dark:hover:bg-zinc-700 rounded-lg transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:h||!a.trim()||!c,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 dark:disabled:bg-zinc-700 text-white rounded-lg transition-colors disabled:cursor-not-allowed",children:h?"Creating...":"Create Envelope"})]})]})]})]})}):null},hr={currentMonth:"2025-01",incomeSources:[{id:"income-1",userId:"demo-user",month:"2025-01",name:"Primary Job",amount:4e3,frequency:"monthly",category:"salary",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"income-2",userId:"demo-user",month:"2025-01",name:"Freelance",amount:800,frequency:"monthly",category:"side-hustle",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],envelopeAllocations:[{id:"alloc-1",userId:"demo-user",envelopeId:"env-groceries",month:"2025-01",budgetedAmount:600,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"alloc-2",userId:"demo-user",envelopeId:"env-gas",month:"2025-01",budgetedAmount:200,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"alloc-3",userId:"demo-user",envelopeId:"env-utilities",month:"2025-01",budgetedAmount:300,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]},tS={"env-groceries":"Groceries","env-gas":"Gas","env-utilities":"Utilities","env-entertainment":"Entertainment","env-savings":"Emergency Savings","env-dining":"Dining Out","env-clothing":"Clothing","env-insurance":"Insurance","env-subscriptions":"Subscriptions","env-gifts":"Gifts"},u7=()=>{const{currentMonth:t,incomeSources:e,envelopeAllocations:n,isLoading:i,calculateAvailableToBudget:a,deleteIncomeSource:o,restoreIncomeSource:c,deleteEnvelopeAllocation:d,restoreEnvelopeAllocation:h}=Jn(),{showToast:f}=ko(),g=de=>{Jn.setState({currentMonth:de}),de===hr.currentMonth?Jn.setState({incomeSources:hr.incomeSources,envelopeAllocations:hr.envelopeAllocations,isLoading:!1}):Jn.setState({incomeSources:[],envelopeAllocations:[],isLoading:!1})},b=()=>{t!==hr.currentMonth&&Jn.setState({incomeSources:hr.incomeSources.map(de=>({...de,month:t,id:`${de.id}-${t}`})),envelopeAllocations:hr.envelopeAllocations.map(de=>({...de,month:t,id:`${de.id}-${t}`})),isLoading:!1})},[_,E]=M.useState(!1),[k,A]=M.useState(!1),[R,L]=M.useState("add"),[z,V]=M.useState(null),[G,ee]=M.useState(!1),[te,S]=M.useState(null),[N,O]=M.useState(!1),[P,D]=M.useState(!1),[F,U]=M.useState({}),Ce=M.useRef(null),xe=()=>{L("add"),V(null),A(!0)},$=()=>{D(!0)},le=(de,nt)=>{U(ut=>({...ut,[de]:nt}))},me=de=>{Ce.current&&(clearTimeout(Ce.current),Ce.current=null),!N&&(L("edit"),V(de),A(!0))},Te=de=>{Ce.current&&(clearTimeout(Ce.current),Ce.current=null),O(!0);const nt=e.findIndex(In=>In.id===de.id),ut={...de};o(de.id).catch(In=>{console.error("Firebase delete failed:",In)}),f(`Deleted "${de.name}"`,"neutral",()=>c(ut,nt)),setTimeout(()=>{O(!1)},500)},ae=()=>{A(!1),V(null)},j=()=>{ee(!1),S(null)},Z=(de,nt)=>{U(ut=>({...ut,[de]:nt}))},ue=de=>{const nt=n.findIndex(ti=>ti.id===de),ut=n[nt];if(!ut)return;const In={...ut};d(de).catch(ti=>{console.error("Firebase delete failed:",ti)}),f(`Deleted "${tt(ut.envelopeId)}" allocation`,"neutral",()=>{h(In,nt)})},he=de=>{Ce.current&&(clearTimeout(Ce.current),Ce.current=null),!N&&(ee(!0),S(de))};M.useEffect(()=>{(()=>{_||(Jn.setState({currentMonth:hr.currentMonth,incomeSources:hr.incomeSources,envelopeAllocations:hr.envelopeAllocations,isLoading:!1}),E(!0))})()},[_]),M.useEffect(()=>()=>{Ce.current&&clearTimeout(Ce.current)},[]);const ge=a(),be=e.reduce((de,nt)=>de+nt.amount,0),we=n.reduce((de,nt)=>de+nt.budgetedAmount,0),tt=de=>F[de]?F[de]:tS[de]?tS[de]:de.replace("env-","").split("-").map(ut=>ut.charAt(0).toUpperCase()+ut.slice(1)).join(" ")||de;return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 z-30",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("div",{className:"flex items-center gap-2",children:v.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[v.jsx(rs,{size:16,className:i?"animate-spin":""}),v.jsx("span",{className:"text-sm font-medium",children:i?"Loading...":"Demo Ready"})]})}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:b,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors text-sm font-medium",disabled:i||t===hr.currentMonth,children:"Copy Month"}),v.jsx(qN,{})]})]}),v.jsxs("div",{className:"mt-4",children:[v.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Zero-Based Budget Demo"}),v.jsx("p",{className:"text-gray-600 dark:text-zinc-400 mt-1",children:"EveryDollar-style monthly budgeting"})]})]}),v.jsxs("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[v.jsx(BN,{currentMonth:t,onMonthChange:g}),v.jsx(FN,{amount:ge,totalIncome:be,totalAllocated:we,isLoading:i}),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Income Sources"}),v.jsx("button",{onClick:xe,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:v.jsx(kl,{size:20})})]}),e.length===0?v.jsx("div",{className:"text-center py-6",children:v.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm",children:"No income sources yet. Add your monthly income to get started."})}):v.jsx("div",{className:"space-y-3",children:v.jsx(Ll,{initial:!1,mode:"popLayout",children:e.map(de=>v.jsx(_o.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(Wu,{onDelete:()=>Te(de),children:v.jsxs("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>me(de),children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:de.name}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly income"})]}),v.jsx("div",{className:"flex items-center justify-end gap-2",children:v.jsxs("p",{className:"font-semibold text-green-600 dark:text-emerald-400",children:["$",de.amount.toFixed(2)]})})]})})},de.id))})})]}),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Envelope Allocations"}),v.jsx("button",{onClick:$,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:v.jsx(kl,{size:20})})]}),n.length===0?v.jsx("div",{className:"text-center py-6",children:v.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm",children:"No allocations yet. Fund envelopes from your available budget."})}):v.jsx("div",{className:"space-y-3",children:v.jsx(Ll,{initial:!1,mode:"popLayout",children:n.map(de=>v.jsx(_o.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(Wu,{onDelete:()=>ue(de.id),children:v.jsxs("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>he(de),children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:tt(de.envelopeId)}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Budgeted this month"})]}),v.jsx("div",{className:"flex items-center justify-end gap-2",children:v.jsxs("p",{className:"font-semibold text-blue-600 dark:text-blue-400",children:["$",de.budgetedAmount.toFixed(2)]})})]})})},de.id))})})]}),v.jsxs("section",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-2xl p-4 border border-blue-200 dark:border-blue-800",children:[v.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Demo Instructions"}),v.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[v.jsx("li",{children:" Use month selector to navigate between months"}),v.jsx("li",{children:' "Copy Month" copies data from previous month'}),v.jsx("li",{children:" Available to Budget shows your zero-based progress"}),v.jsx("li",{children:" Swipe income/envelope items to delete, tap to edit amounts"}),v.jsx("li",{children:" Goal: Get Available to Budget to $0.00"})]})]})]}),v.jsx("button",{className:"fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform",onClick:()=>{},children:v.jsx(kl,{size:28})}),v.jsx($N,{isVisible:k,onClose:ae,mode:R,initialIncomeSource:z}),v.jsx(c7,{isOpen:P,onClose:()=>D(!1),onEnvelopeCreated:le}),v.jsx(l7,{isVisible:G,onClose:j,initialAllocation:te,getEnvelopeName:tt,onEnvelopeNameUpdate:Z})]})},d7=()=>{const{message:t,type:e,isVisible:n,undoAction:i,hideToast:a}=ko(),o=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return v.jsx(Ll,{children:n&&v.jsx(_o.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:v.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${o()}`,children:[v.jsx("div",{className:"flex items-center flex-1 min-w-0",children:v.jsx("span",{className:"text-sm font-medium truncate pr-2",children:t})}),v.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[i&&v.jsxs("button",{onClick:()=>{i(),a()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[v.jsx(y4,{size:14,className:"inline mr-1"}),"Undo"]}),v.jsx("button",{onClick:a,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:v.jsx(Zl,{size:16})})]})]})})})};class Li extends M.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((i,a)=>i!==e.resetKeys?.[a])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[v.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:v.jsx(wS,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,v.jsxs("div",{className:"flex flex-col gap-3",children:[v.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[v.jsx(rs,{className:"h-4 w-4"}),"Try Again"]}),v.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[v.jsx(QD,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}function h7(){const[t,e]=M.useState(!0),{appSettings:n}=Rn(),{isAuthenticated:i,isInitialized:a,initializeAuth:o,lastAuthTime:c,offlineGracePeriod:d,currentUser:h}=Ei();if(M.useEffect(()=>{const b=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(b)},[]),M.useEffect(()=>o(),[o]),M.useEffect(()=>{const b=document.documentElement,_=window.matchMedia("(prefers-color-scheme: dark)"),E=()=>{const k=n?.theme??"system",A=_.matches;k==="dark"||k==="system"&&A?b.classList.add("dark"):b.classList.remove("dark")};if(E(),n?.theme==="system")return _.addEventListener("change",E),()=>_.removeEventListener("change",E)},[n]),t||!a)return v.jsx(HN,{message:"Initializing Personal Budget..."});if(!i)return h?v.jsx(Li,{children:v.jsx(eS,{})}):v.jsx(Li,{children:v.jsx(o7,{})});const g=typeof navigator<"u"&&!navigator.onLine&&i&&c&&Date.now()-c<d;return v.jsxs(Li,{children:[g&&v.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),v.jsx("div",{className:"ml-3",children:v.jsxs("p",{className:"text-sm",children:[v.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((d-(Date.now()-c))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),v.jsx(eD,{children:v.jsxs(kk,{children:[v.jsx(Wr,{path:"/",element:v.jsx(Li,{children:v.jsx(K8,{})})}),v.jsx(Wr,{path:"/envelope/:id",element:v.jsx(Li,{children:v.jsx(W8,{})})}),v.jsx(Wr,{path:"/add-envelope",element:v.jsx(Li,{children:v.jsx(t7,{})})}),v.jsx(Wr,{path:"/add-transaction",element:v.jsx(Li,{children:v.jsx(n7,{})})}),v.jsx(Wr,{path:"/transactions",element:v.jsx(Li,{children:v.jsx(i7,{})})}),v.jsx(Wr,{path:"/settings",element:v.jsx(Li,{children:v.jsx(e7,{})})}),v.jsx(Wr,{path:"/verify-email",element:v.jsx(Li,{children:v.jsx(eS,{})})}),v.jsx(Wr,{path:"/monthly-budget-demo",element:v.jsx(Li,{children:v.jsx(u7,{})})})]})}),v.jsx(d7,{})]})}UI({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});VI.createRoot(document.getElementById("root")).render(v.jsx(M.StrictMode,{children:v.jsx(h7,{})}));
