function BQ(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function bl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Z_={exports:{}},tg={};var JM;function UQ(){if(JM)return tg;JM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return tg.Fragment=e,tg.jsx=n,tg.jsxs=n,tg}var ej;function FQ(){return ej||(ej=1,Z_.exports=UQ()),Z_.exports}var m=FQ(),J_={exports:{}},st={};var tj;function $Q(){if(tj)return st;tj=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),g=Symbol.iterator;function v(F){return F===null||typeof F!="object"?null:(F=g&&F[g]||F["@@iterator"],typeof F=="function"?F:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function _(F,Q,te){this.props=F,this.context=Q,this.refs=w,this.updater=te||b}_.prototype.isReactComponent={},_.prototype.setState=function(F,Q){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Q,"setState")},_.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function T(){}T.prototype=_.prototype;function N(F,Q,te){this.props=F,this.context=Q,this.refs=w,this.updater=te||b}var D=N.prototype=new T;D.constructor=N,x(D,_.prototype),D.isPureReactComponent=!0;var P=Array.isArray;function O(){}var C={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function R(F,Q,te){var W=te.ref;return{$$typeof:t,type:F,key:Q,ref:W!==void 0?W:null,props:te}}function j(F,Q){return R(F.type,Q,F.props)}function L(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function B(F){var Q={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(te){return Q[te]})}var z=/\/+/g;function Y(F,Q){return typeof F=="object"&&F!==null&&F.key!=null?B(""+F.key):Q.toString(36)}function Z(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(O,O):(F.status="pending",F.then(function(Q){F.status==="pending"&&(F.status="fulfilled",F.value=Q)},function(Q){F.status==="pending"&&(F.status="rejected",F.reason=Q)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function G(F,Q,te,W,ue){var re=typeof F;(re==="undefined"||re==="boolean")&&(F=null);var oe=!1;if(F===null)oe=!0;else switch(re){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(F.$$typeof){case t:case e:oe=!0;break;case f:return oe=F._init,G(oe(F._payload),Q,te,W,ue)}}if(oe)return ue=ue(F),oe=W===""?"."+Y(F,0):W,P(ue)?(te="",oe!=null&&(te=oe.replace(z,"$&/")+"/"),G(ue,Q,te,"",function(Ee){return Ee})):ue!=null&&(L(ue)&&(ue=j(ue,te+(ue.key==null||F&&F.key===ue.key?"":(""+ue.key).replace(z,"$&/")+"/")+oe)),Q.push(ue)),1;oe=0;var we=W===""?".":W+":";if(P(F))for(var se=0;se<F.length;se++)W=F[se],re=we+Y(W,se),oe+=G(W,Q,te,re,ue);else if(se=v(F),typeof se=="function")for(F=se.call(F),se=0;!(W=F.next()).done;)W=W.value,re=we+Y(W,se++),oe+=G(W,Q,te,re,ue);else if(re==="object"){if(typeof F.then=="function")return G(Z(F),Q,te,W,ue);throw Q=String(F),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return oe}function K(F,Q,te){if(F==null)return F;var W=[],ue=0;return G(F,W,"","",function(re){return Q.call(te,re,ue++)}),W}function X(F){if(F._status===-1){var Q=F._result;Q=Q(),Q.then(function(te){(F._status===0||F._status===-1)&&(F._status=1,F._result=te)},function(te){(F._status===0||F._status===-1)&&(F._status=2,F._result=te)}),F._status===-1&&(F._status=0,F._result=Q)}if(F._status===1)return F._result.default;throw F._result}var ee=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},J={map:K,forEach:function(F,Q,te){K(F,function(){Q.apply(this,arguments)},te)},count:function(F){var Q=0;return K(F,function(){Q++}),Q},toArray:function(F){return K(F,function(Q){return Q})||[]},only:function(F){if(!L(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return st.Activity=h,st.Children=J,st.Component=_,st.Fragment=n,st.Profiler=i,st.PureComponent=N,st.StrictMode=r,st.Suspense=c,st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,st.__COMPILER_RUNTIME={__proto__:null,c:function(F){return C.H.useMemoCache(F)}},st.cache=function(F){return function(){return F.apply(null,arguments)}},st.cacheSignal=function(){return null},st.cloneElement=function(F,Q,te){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var W=x({},F.props),ue=F.key;if(Q!=null)for(re in Q.key!==void 0&&(ue=""+Q.key),Q)!I.call(Q,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&Q.ref===void 0||(W[re]=Q[re]);var re=arguments.length-2;if(re===1)W.children=te;else if(1<re){for(var oe=Array(re),we=0;we<re;we++)oe[we]=arguments[we+2];W.children=oe}return R(F.type,ue,W)},st.createContext=function(F){return F={$$typeof:s,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},st.createElement=function(F,Q,te){var W,ue={},re=null;if(Q!=null)for(W in Q.key!==void 0&&(re=""+Q.key),Q)I.call(Q,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ue[W]=Q[W]);var oe=arguments.length-2;if(oe===1)ue.children=te;else if(1<oe){for(var we=Array(oe),se=0;se<oe;se++)we[se]=arguments[se+2];ue.children=we}if(F&&F.defaultProps)for(W in oe=F.defaultProps,oe)ue[W]===void 0&&(ue[W]=oe[W]);return R(F,re,ue)},st.createRef=function(){return{current:null}},st.forwardRef=function(F){return{$$typeof:o,render:F}},st.isValidElement=L,st.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:X}},st.memo=function(F,Q){return{$$typeof:d,type:F,compare:Q===void 0?null:Q}},st.startTransition=function(F){var Q=C.T,te={};C.T=te;try{var W=F(),ue=C.S;ue!==null&&ue(te,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(O,ee)}catch(re){ee(re)}finally{Q!==null&&te.types!==null&&(Q.types=te.types),C.T=Q}},st.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},st.use=function(F){return C.H.use(F)},st.useActionState=function(F,Q,te){return C.H.useActionState(F,Q,te)},st.useCallback=function(F,Q){return C.H.useCallback(F,Q)},st.useContext=function(F){return C.H.useContext(F)},st.useDebugValue=function(){},st.useDeferredValue=function(F,Q){return C.H.useDeferredValue(F,Q)},st.useEffect=function(F,Q){return C.H.useEffect(F,Q)},st.useEffectEvent=function(F){return C.H.useEffectEvent(F)},st.useId=function(){return C.H.useId()},st.useImperativeHandle=function(F,Q,te){return C.H.useImperativeHandle(F,Q,te)},st.useInsertionEffect=function(F,Q){return C.H.useInsertionEffect(F,Q)},st.useLayoutEffect=function(F,Q){return C.H.useLayoutEffect(F,Q)},st.useMemo=function(F,Q){return C.H.useMemo(F,Q)},st.useOptimistic=function(F,Q){return C.H.useOptimistic(F,Q)},st.useReducer=function(F,Q,te){return C.H.useReducer(F,Q,te)},st.useRef=function(F){return C.H.useRef(F)},st.useState=function(F){return C.H.useState(F)},st.useSyncExternalStore=function(F,Q,te){return C.H.useSyncExternalStore(F,Q,te)},st.useTransition=function(){return C.H.useTransition()},st.version="19.2.0",st}var nj;function Ih(){return nj||(nj=1,J_.exports=$Q()),J_.exports}var A=Ih();const Fo=bl(A),qQ=BQ({__proto__:null,default:Fo},[A]);var eE={exports:{}},ng={},tE={exports:{}},nE={};var rj;function GQ(){return rj||(rj=1,(function(t){function e(G,K){var X=G.length;G.push(K);e:for(;0<X;){var ee=X-1>>>1,J=G[ee];if(0<i(J,K))G[ee]=K,G[X]=J,X=ee;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var K=G[0],X=G.pop();if(X!==K){G[0]=X;e:for(var ee=0,J=G.length,F=J>>>1;ee<F;){var Q=2*(ee+1)-1,te=G[Q],W=Q+1,ue=G[W];if(0>i(te,X))W<J&&0>i(ue,te)?(G[ee]=ue,G[W]=X,ee=W):(G[ee]=te,G[Q]=X,ee=Q);else if(W<J&&0>i(ue,X))G[ee]=ue,G[W]=X,ee=W;else break e}}return K}function i(G,K){var X=G.sortIndex-K.sortIndex;return X!==0?X:G.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],d=[],f=1,h=null,g=3,v=!1,b=!1,x=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function D(G){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=G)r(d),K.sortIndex=K.expirationTime,e(c,K);else break;K=n(d)}}function P(G){if(x=!1,D(G),!b)if(n(c)!==null)b=!0,O||(O=!0,B());else{var K=n(d);K!==null&&Z(P,K.startTime-G)}}var O=!1,C=-1,I=5,R=-1;function j(){return w?!0:!(t.unstable_now()-R<I)}function L(){if(w=!1,O){var G=t.unstable_now();R=G;var K=!0;try{e:{b=!1,x&&(x=!1,T(C),C=-1),v=!0;var X=g;try{t:{for(D(G),h=n(c);h!==null&&!(h.expirationTime>G&&j());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,g=h.priorityLevel;var J=ee(h.expirationTime<=G);if(G=t.unstable_now(),typeof J=="function"){h.callback=J,D(G),K=!0;break t}h===n(c)&&r(c),D(G)}else r(c);h=n(c)}if(h!==null)K=!0;else{var F=n(d);F!==null&&Z(P,F.startTime-G),K=!1}}break e}finally{h=null,g=X,v=!1}K=void 0}}finally{K?B():O=!1}}}var B;if(typeof N=="function")B=function(){N(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Y=z.port2;z.port1.onmessage=L,B=function(){Y.postMessage(null)}}else B=function(){_(L,0)};function Z(G,K){C=_(function(){G(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var X=g;g=K;try{return G()}finally{g=X}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var X=g;g=G;try{return K()}finally{g=X}},t.unstable_scheduleCallback=function(G,K,X){var ee=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ee+X:ee):X=ee,G){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=X+J,G={id:f++,callback:K,priorityLevel:G,startTime:X,expirationTime:J,sortIndex:-1},X>ee?(G.sortIndex=X,e(d,G),n(c)===null&&G===n(d)&&(x?(T(C),C=-1):x=!0,Z(P,X-ee))):(G.sortIndex=J,e(c,G),b||v||(b=!0,O||(O=!0,B()))),G},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(G){var K=g;return function(){var X=g;g=K;try{return G.apply(this,arguments)}finally{g=X}}}})(nE)),nE}var ij;function HQ(){return ij||(ij=1,tE.exports=GQ()),tE.exports}var rE={exports:{}},Zr={};var aj;function WQ(){if(aj)return Zr;aj=1;var t=Ih();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,d,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:d,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Zr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Zr.createPortal=function(c,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(c,d,null,f)},Zr.flushSync=function(c){var d=s.T,f=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=d,r.p=f,r.d.f()}},Zr.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(c,d))},Zr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Zr.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var f=d.as,h=o(f,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?r.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:v}):f==="script"&&r.d.X(c,{crossOrigin:h,integrity:g,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Zr.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=o(d.as,d.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(c)},Zr.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,h=o(f,d.crossOrigin);r.d.L(c,f,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Zr.preloadModule=function(c,d){if(typeof c=="string")if(d){var f=o(d.as,d.crossOrigin);r.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(c)},Zr.requestFormReset=function(c){r.d.r(c)},Zr.unstable_batchedUpdates=function(c,d){return c(d)},Zr.useFormState=function(c,d,f){return s.H.useFormState(c,d,f)},Zr.useFormStatus=function(){return s.H.useHostTransitionStatus()},Zr.version="19.2.0",Zr}var sj;function dU(){if(sj)return rE.exports;sj=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),rE.exports=WQ(),rE.exports}var oj;function YQ(){if(oj)return ng;oj=1;var t=HQ(),e=Ih(),n=dU();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(r(188))}function d(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(r(188));return u!==l?null:l}for(var p=l,y=u;;){var E=p.return;if(E===null)break;var k=E.alternate;if(k===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===k.child){for(k=E.child;k;){if(k===p)return c(E),l;if(k===y)return c(E),u;k=k.sibling}throw Error(r(188))}if(p.return!==y.return)p=E,y=k;else{for(var V=!1,q=E.child;q;){if(q===p){V=!0,p=E,y=k;break}if(q===y){V=!0,y=E,p=k;break}q=q.sibling}if(!V){for(q=k.child;q;){if(q===p){V=!0,p=k,y=E;break}if(q===y){V=!0,y=k,p=E;break}q=q.sibling}if(!V)throw Error(r(189))}}if(p.alternate!==y)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:u}function f(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=f(l),u!==null)return u;l=l.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),N=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(l){return l===null||typeof l!="object"?null:(l=L&&l[L]||l["@@iterator"],typeof l=="function"?l:null)}var z=Symbol.for("react.client.reference");function Y(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===z?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case _:return"Profiler";case w:return"StrictMode";case P:return"Suspense";case O:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case N:return l.displayName||"Context";case T:return(l._context.displayName||"Context")+".Consumer";case D:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case C:return u=l.displayName||null,u!==null?u:Y(l.type)||"Memo";case I:u=l._payload,l=l._init;try{return Y(l(u))}catch{}}return null}var Z=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ee=[],J=-1;function F(l){return{current:l}}function Q(l){0>J||(l.current=ee[J],ee[J]=null,J--)}function te(l,u){J++,ee[J]=l.current,l.current=u}var W=F(null),ue=F(null),re=F(null),oe=F(null);function we(l,u){switch(te(re,u),te(ue,l),te(W,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?SM(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=SM(u),l=_M(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Q(W),te(W,l)}function se(){Q(W),Q(ue),Q(re)}function Ee(l){l.memoizedState!==null&&te(oe,l);var u=W.current,p=_M(u,l.type);u!==p&&(te(ue,l),te(W,p))}function ge(l){ue.current===l&&(Q(W),Q(ue)),oe.current===l&&(Q(oe),Qp._currentValue=X)}var ne,Ie;function ye(l){if(ne===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);ne=u&&u[1]||"",Ie=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ne+l+Ie}var Se=!1;function Oe(l,u){if(!l||Se)return"";Se=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ke,[])}catch(xe){var ve=xe}Reflect.construct(l,[],ke)}else{try{ke.call()}catch(xe){ve=xe}l.call(ke.prototype)}}else{try{throw Error()}catch(xe){ve=xe}(ke=l())&&typeof ke.catch=="function"&&ke.catch(function(){})}}catch(xe){if(xe&&ve&&typeof xe.stack=="string")return[xe.stack,ve.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=y.DetermineComponentFrameRoot(),V=k[0],q=k[1];if(V&&q){var ie=V.split(`
`),pe=q.split(`
`);for(E=y=0;y<ie.length&&!ie[y].includes("DetermineComponentFrameRoot");)y++;for(;E<pe.length&&!pe[E].includes("DetermineComponentFrameRoot");)E++;if(y===ie.length||E===pe.length)for(y=ie.length-1,E=pe.length-1;1<=y&&0<=E&&ie[y]!==pe[E];)E--;for(;1<=y&&0<=E;y--,E--)if(ie[y]!==pe[E]){if(y!==1||E!==1)do if(y--,E--,0>E||ie[y]!==pe[E]){var _e=`
`+ie[y].replace(" at new "," at ");return l.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",l.displayName)),_e}while(1<=y&&0<=E);break}}}finally{Se=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?ye(p):""}function Pe(l,u){switch(l.tag){case 26:case 27:case 5:return ye(l.type);case 16:return ye("Lazy");case 13:return l.child!==u&&u!==null?ye("Suspense Fallback"):ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return Oe(l.type,!1);case 11:return Oe(l.type.render,!1);case 1:return Oe(l.type,!0);case 31:return ye("Activity");default:return""}}function Ge(l){try{var u="",p=null;do u+=Pe(l,p),p=l,l=l.return;while(l);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var je=Object.prototype.hasOwnProperty,Je=t.unstable_scheduleCallback,Lt=t.unstable_cancelCallback,Ln=t.unstable_shouldYield,Sn=t.unstable_requestPaint,ht=t.unstable_now,Vt=t.unstable_getCurrentPriorityLevel,Yr=t.unstable_ImmediatePriority,Kr=t.unstable_UserBlockingPriority,Me=t.unstable_NormalPriority,mt=t.unstable_LowPriority,Sr=t.unstable_IdlePriority,On=t.log,_n=t.unstable_setDisableYieldValue,sn=null,Dt=null;function on(l){if(typeof On=="function"&&_n(l),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(sn,l)}catch{}}var et=Math.clz32?Math.clz32:ur,Xr=Math.log,ln=Math.LN2;function ur(l){return l>>>=0,l===0?32:31-(Xr(l)/ln|0)|0}var lt=256,cn=262144,nn=4194304;function ci(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Qr(l,u,p){var y=l.pendingLanes;if(y===0)return 0;var E=0,k=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var q=y&134217727;return q!==0?(y=q&~k,y!==0?E=ci(y):(V&=q,V!==0?E=ci(V):p||(p=q&~l,p!==0&&(E=ci(p))))):(q=y&~k,q!==0?E=ci(q):V!==0?E=ci(V):p||(p=y&~l,p!==0&&(E=ci(p)))),E===0?0:u!==0&&u!==E&&(u&k)===0&&(k=E&-E,p=u&-u,k>=p||k===32&&(p&4194048)!==0)?u:E}function En(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Ha(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Al(){var l=nn;return nn<<=1,(nn&62914560)===0&&(nn=4194304),l}function Es(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function Xc(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function rS(l,u,p,y,E,k){var V=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var q=l.entanglements,ie=l.expirationTimes,pe=l.hiddenUpdates;for(p=V&~p;0<p;){var _e=31-et(p),ke=1<<_e;q[_e]=0,ie[_e]=-1;var ve=pe[_e];if(ve!==null)for(pe[_e]=null,_e=0;_e<ve.length;_e++){var xe=ve[_e];xe!==null&&(xe.lane&=-536870913)}p&=~ke}y!==0&&Qc(l,y,0),k!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=k&~(V&~u))}function Qc(l,u,p){l.pendingLanes|=u,l.suspendedLanes&=~u;var y=31-et(u);l.entangledLanes|=u,l.entanglements[y]=l.entanglements[y]|1073741824|p&261930}function np(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var y=31-et(p),E=1<<y;E&u|l[y]&u&&(l[y]|=u),p&=~E}}function rp(l,u){var p=u&-u;return p=(p&42)!==0?1:Zc(p),(p&(l.suspendedLanes|u))!==0?0:p}function Zc(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function bo(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function zv(){var l=K.p;return l!==0?l:(l=window.event,l===void 0?32:HM(l.type))}function Wa(l,u){var p=K.p;try{return K.p=l,u()}finally{K.p=p}}var Ya=Math.random().toString(36).slice(2),Hn="__reactFiber$"+Ya,_r="__reactProps$"+Ya,Ts="__reactContainer$"+Ya,Id="__reactEvents$"+Ya,iS="__reactListeners$"+Ya,Lv="__reactHandles$"+Ya,Vv="__reactResources$"+Ya,As="__reactMarker$"+Ya;function Od(l){delete l[Hn],delete l[_r],delete l[Id],delete l[iS],delete l[Lv]}function ks(l){var u=l[Hn];if(u)return u;for(var p=l.parentNode;p;){if(u=p[Ts]||p[Hn]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(l=IM(l);l!==null;){if(p=l[Hn])return p;l=IM(l)}return u}l=p,p=l.parentNode}return null}function fa(l){if(l=l[Hn]||l[Ts]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function $i(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function Cs(l){var u=l[Vv];return u||(u=l[Vv]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Wn(l){l[As]=!0}var ip=new Set,ap={};function Ns(l,u){Is(l,u),Is(l+"Capture",u)}function Is(l,u){for(ap[l]=u,l=0;l<u.length;l++)ip.add(u[l])}var sp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),op={},lp={};function Bv(l){return je.call(lp,l)?!0:je.call(op,l)?!1:sp.test(l)?lp[l]=!0:(op[l]=!0,!1)}function Pd(l,u,p){if(Bv(u))if(p===null)l.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+p)}}function qi(l,u,p){if(p===null)l.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+p)}}function Yn(l,u,p,y){if(y===null)l.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(u,p,""+y)}}function Er(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function kl(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function cp(l,u,p){var y=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var E=y.get,k=y.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return E.call(this)},set:function(V){p=""+V,k.call(this,V)}}),Object.defineProperty(l,u,{enumerable:y.enumerable}),{getValue:function(){return p},setValue:function(V){p=""+V},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Bt(l){if(!l._valueTracker){var u=kl(l)?"checked":"value";l._valueTracker=cp(l,u,""+l[u])}}function Jc(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var p=u.getValue(),y="";return l&&(y=kl(l)?l.checked?"true":"false":l.value),l=y,l!==p?(u.setValue(l),!0):!1}function Os(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var eu=/[\n"\\]/g;function Ei(l){return l.replace(eu,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Dd(l,u,p,y,E,k,V,q){l.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?l.type=V:l.removeAttribute("type"),u!=null?V==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Er(u)):l.value!==""+Er(u)&&(l.value=""+Er(u)):V!=="submit"&&V!=="reset"||l.removeAttribute("value"),u!=null?up(l,V,Er(u)):p!=null?up(l,V,Er(p)):y!=null&&l.removeAttribute("value"),E==null&&k!=null&&(l.defaultChecked=!!k),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?l.name=""+Er(q):l.removeAttribute("name")}function Uv(l,u,p,y,E,k,V,q){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(l.type=k),u!=null||p!=null){if(!(k!=="submit"&&k!=="reset"||u!=null)){Bt(l);return}p=p!=null?""+Er(p):"",u=u!=null?""+Er(u):p,q||u===l.value||(l.value=u),l.defaultValue=u}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=q?l.checked:!!y,l.defaultChecked=!!y,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(l.name=V),Bt(l)}function up(l,u,p){u==="number"&&Os(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Cl(l,u,p,y){if(l=l.options,u){u={};for(var E=0;E<p.length;E++)u["$"+p[E]]=!0;for(p=0;p<l.length;p++)E=u.hasOwnProperty("$"+l[p].value),l[p].selected!==E&&(l[p].selected=E),E&&y&&(l[p].defaultSelected=!0)}else{for(p=""+Er(p),u=null,E=0;E<l.length;E++){if(l[E].value===p){l[E].selected=!0,y&&(l[E].defaultSelected=!0);return}u!==null||l[E].disabled||(u=l[E])}u!==null&&(u.selected=!0)}}function Fv(l,u,p){if(u!=null&&(u=""+Er(u),u!==l.value&&(l.value=u),p==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=p!=null?""+Er(p):""}function Nl(l,u,p,y){if(u==null){if(y!=null){if(p!=null)throw Error(r(92));if(Z(y)){if(1<y.length)throw Error(r(93));y=y[0]}p=y}p==null&&(p=""),u=p}p=Er(u),l.defaultValue=p,y=l.textContent,y===p&&y!==""&&y!==null&&(l.value=y),Bt(l)}function Ti(l,u){if(u){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=u;return}}l.textContent=u}var $v=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dp(l,u,p){var y=u.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":y?l.setProperty(u,p):typeof p!="number"||p===0||$v.has(u)?u==="float"?l.cssFloat=p:l[u]=(""+p).trim():l[u]=p+"px"}function fp(l,u,p){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var E in u)y=u[E],u.hasOwnProperty(E)&&p[E]!==y&&dp(l,E,y)}else for(var k in u)u.hasOwnProperty(k)&&dp(l,k,u[k])}function Rd(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Il=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Md(l){return Il.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Ka(){}var hp=null;function ha(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ol=null,Ps=null;function tu(l){var u=fa(l);if(u&&(l=u.stateNode)){var p=l[_r]||null;e:switch(l=u.stateNode,u.type){case"input":if(Dd(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),u=p.name,p.type==="radio"&&u!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ei(""+u)+'"][type="radio"]'),u=0;u<p.length;u++){var y=p[u];if(y!==l&&y.form===l.form){var E=y[_r]||null;if(!E)throw Error(r(90));Dd(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(u=0;u<p.length;u++)y=p[u],y.form===l.form&&Jc(y)}break e;case"textarea":Fv(l,p.value,p.defaultValue);break e;case"select":u=p.value,u!=null&&Cl(l,!!p.multiple,u,!1)}}}var jd=!1;function Pl(l,u,p){if(jd)return l(u,p);jd=!0;try{var y=l(u);return y}finally{if(jd=!1,(Ol!==null||Ps!==null)&&(z0(),Ol&&(u=Ol,l=Ps,Ps=Ol=null,tu(u),l)))for(u=0;u<l.length;u++)tu(l[u])}}function Xa(l,u){var p=l.stateNode;if(p===null)return null;var y=p[_r]||null;if(y===null)return null;p=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,u,typeof p));return p}var pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nu=!1;if(pa)try{var Gt={};Object.defineProperty(Gt,"passive",{get:function(){nu=!0}}),window.addEventListener("test",Gt,Gt),window.removeEventListener("test",Gt,Gt)}catch{nu=!1}var Ds=null,pp=null,ru=null;function gp(){if(ru)return ru;var l,u=pp,p=u.length,y,E="value"in Ds?Ds.value:Ds.textContent,k=E.length;for(l=0;l<p&&u[l]===E[l];l++);var V=p-l;for(y=1;y<=V&&u[p-y]===E[k-y];y++);return ru=E.slice(l,1<y?1-y:void 0)}function iu(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function xo(){return!0}function Qa(){return!1}function Rr(l){function u(p,y,E,k,V){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=k,this.target=V,this.currentTarget=null;for(var q in l)l.hasOwnProperty(q)&&(p=l[q],this[q]=p?p(k):k[q]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?xo:Qa,this.isPropagationStopped=Qa,this}return h(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=xo)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=xo)},persist:function(){},isPersistent:xo}),u}var wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rs=Rr(wo),Dl=h({},wo,{view:0,detail:0}),mp=Rr(Dl),Rl,zd,Ms,Ld=h({},Dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ml,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ms&&(Ms&&l.type==="mousemove"?(Rl=l.screenX-Ms.screenX,zd=l.screenY-Ms.screenY):zd=Rl=0,Ms=l),Rl)},movementY:function(l){return"movementY"in l?l.movementY:zd}}),vp=Rr(Ld),au=h({},Ld,{dataTransfer:0}),Gv=Rr(au),Hv=h({},Dl,{relatedTarget:0}),su=Rr(Hv),yp=h({},wo,{animationName:0,elapsedTime:0,pseudoElement:0}),Wv=Rr(yp),Vd=h({},wo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Yv=Rr(Vd),Kv=h({},wo,{data:0}),js=Rr(Kv),Xv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jv(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Zv[l])?!!u[l]:!1}function Ml(){return Jv}var ui=h({},Dl,{key:function(l){if(l.key){var u=Xv[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=iu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Qv[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ml,charCode:function(l){return l.type==="keypress"?iu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?iu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),e0=Rr(ui),t0=h({},Ld,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),So=Rr(t0),S=h({},Dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ml}),M=Rr(S),U=h({},wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=Rr(U),fe=h({},Ld,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),be=Rr(fe),Re=h({},wo,{newState:0,oldState:0}),ct=Rr(Re),Vn=[9,13,27,32],Rt=pa&&"CompositionEvent"in window,mn=null;pa&&"documentMode"in document&&(mn=document.documentMode);var ga=pa&&"TextEvent"in window&&!mn,zs=pa&&(!Rt||mn&&8<mn&&11>=mn),Za=" ",Ja=!1;function ou(l,u){switch(l){case"keyup":return Vn.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bd(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Ud=!1;function uX(l,u){switch(l){case"compositionend":return Bd(u);case"keypress":return u.which!==32?null:(Ja=!0,Za);case"textInput":return l=u.data,l===Za&&Ja?null:l;default:return null}}function dX(l,u){if(Ud)return l==="compositionend"||!Rt&&ou(l,u)?(l=gp(),ru=pp=Ds=null,Ud=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return zs&&u.locale!=="ko"?null:u.data;default:return null}}var fX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DP(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!fX[l.type]:u==="textarea"}function RP(l,u,p,y){Ol?Ps?Ps.push(y):Ps=[y]:Ol=y,u=q0(u,"onChange"),0<u.length&&(p=new Rs("onChange","change",null,p,y),l.push({event:p,listeners:u}))}var bp=null,xp=null;function hX(l){mM(l,0)}function n0(l){var u=$i(l);if(Jc(u))return l}function MP(l,u){if(l==="change")return u}var jP=!1;if(pa){var aS;if(pa){var sS="oninput"in document;if(!sS){var zP=document.createElement("div");zP.setAttribute("oninput","return;"),sS=typeof zP.oninput=="function"}aS=sS}else aS=!1;jP=aS&&(!document.documentMode||9<document.documentMode)}function LP(){bp&&(bp.detachEvent("onpropertychange",VP),xp=bp=null)}function VP(l){if(l.propertyName==="value"&&n0(xp)){var u=[];RP(u,xp,l,ha(l)),Pl(hX,u)}}function pX(l,u,p){l==="focusin"?(LP(),bp=u,xp=p,bp.attachEvent("onpropertychange",VP)):l==="focusout"&&LP()}function gX(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return n0(xp)}function mX(l,u){if(l==="click")return n0(u)}function vX(l,u){if(l==="input"||l==="change")return n0(u)}function yX(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Gi=typeof Object.is=="function"?Object.is:yX;function wp(l,u){if(Gi(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!je.call(u,E)||!Gi(l[E],u[E]))return!1}return!0}function BP(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function UP(l,u){var p=BP(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=u&&y>=u)return{node:p,offset:u-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=BP(p)}}function FP(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?FP(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function $P(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=Os(l.document);u instanceof l.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)l=u.contentWindow;else break;u=Os(l.document)}return u}function oS(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var bX=pa&&"documentMode"in document&&11>=document.documentMode,Fd=null,lS=null,Sp=null,cS=!1;function qP(l,u,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;cS||Fd==null||Fd!==Os(y)||(y=Fd,"selectionStart"in y&&oS(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Sp&&wp(Sp,y)||(Sp=y,y=q0(lS,"onSelect"),0<y.length&&(u=new Rs("onSelect","select",null,u,p),l.push({event:u,listeners:y}),u.target=Fd)))}function lu(l,u){var p={};return p[l.toLowerCase()]=u.toLowerCase(),p["Webkit"+l]="webkit"+u,p["Moz"+l]="moz"+u,p}var $d={animationend:lu("Animation","AnimationEnd"),animationiteration:lu("Animation","AnimationIteration"),animationstart:lu("Animation","AnimationStart"),transitionrun:lu("Transition","TransitionRun"),transitionstart:lu("Transition","TransitionStart"),transitioncancel:lu("Transition","TransitionCancel"),transitionend:lu("Transition","TransitionEnd")},uS={},GP={};pa&&(GP=document.createElement("div").style,"AnimationEvent"in window||(delete $d.animationend.animation,delete $d.animationiteration.animation,delete $d.animationstart.animation),"TransitionEvent"in window||delete $d.transitionend.transition);function cu(l){if(uS[l])return uS[l];if(!$d[l])return l;var u=$d[l],p;for(p in u)if(u.hasOwnProperty(p)&&p in GP)return uS[l]=u[p];return l}var HP=cu("animationend"),WP=cu("animationiteration"),YP=cu("animationstart"),xX=cu("transitionrun"),wX=cu("transitionstart"),SX=cu("transitioncancel"),KP=cu("transitionend"),XP=new Map,dS="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dS.push("scrollEnd");function es(l,u){XP.set(l,u),Ns(u,[l])}var r0=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},ma=[],qd=0,fS=0;function i0(){for(var l=qd,u=fS=qd=0;u<l;){var p=ma[u];ma[u++]=null;var y=ma[u];ma[u++]=null;var E=ma[u];ma[u++]=null;var k=ma[u];if(ma[u++]=null,y!==null&&E!==null){var V=y.pending;V===null?E.next=E:(E.next=V.next,V.next=E),y.pending=E}k!==0&&QP(p,E,k)}}function a0(l,u,p,y){ma[qd++]=l,ma[qd++]=u,ma[qd++]=p,ma[qd++]=y,fS|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function hS(l,u,p,y){return a0(l,u,p,y),s0(l)}function uu(l,u){return a0(l,null,null,u),s0(l)}function QP(l,u,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var E=!1,k=l.return;k!==null;)k.childLanes|=p,y=k.alternate,y!==null&&(y.childLanes|=p),k.tag===22&&(l=k.stateNode,l===null||l._visibility&1||(E=!0)),l=k,k=k.return;return l.tag===3?(k=l.stateNode,E&&u!==null&&(E=31-et(p),l=k.hiddenUpdates,y=l[E],y===null?l[E]=[u]:y.push(u),u.lane=p|536870912),k):null}function s0(l){if(50<qp)throw qp=0,S_=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Gd={};function _X(l,u,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(l,u,p,y){return new _X(l,u,p,y)}function pS(l){return l=l.prototype,!(!l||!l.isReactComponent)}function _o(l,u){var p=l.alternate;return p===null?(p=Hi(l.tag,u,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function ZP(l,u){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,u=p.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function o0(l,u,p,y,E,k){var V=0;if(y=l,typeof l=="function")pS(l)&&(V=1);else if(typeof l=="string")V=CQ(l,p,W.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=Hi(31,p,u,E),l.elementType=R,l.lanes=k,l;case x:return du(p.children,E,k,u);case w:V=8,E|=24;break;case _:return l=Hi(12,p,u,E|2),l.elementType=_,l.lanes=k,l;case P:return l=Hi(13,p,u,E),l.elementType=P,l.lanes=k,l;case O:return l=Hi(19,p,u,E),l.elementType=O,l.lanes=k,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case N:V=10;break e;case T:V=9;break e;case D:V=11;break e;case C:V=14;break e;case I:V=16,y=null;break e}V=29,p=Error(r(130,l===null?"null":typeof l,"")),y=null}return u=Hi(V,p,u,E),u.elementType=l,u.type=y,u.lanes=k,u}function du(l,u,p,y){return l=Hi(7,l,y,u),l.lanes=p,l}function gS(l,u,p){return l=Hi(6,l,null,u),l.lanes=p,l}function JP(l){var u=Hi(18,null,null,0);return u.stateNode=l,u}function mS(l,u,p){return u=Hi(4,l.children!==null?l.children:[],l.key,u),u.lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var eD=new WeakMap;function va(l,u){if(typeof l=="object"&&l!==null){var p=eD.get(l);return p!==void 0?p:(u={value:l,source:u,stack:Ge(u)},eD.set(l,u),u)}return{value:l,source:u,stack:Ge(u)}}var Hd=[],Wd=0,l0=null,_p=0,ya=[],ba=0,jl=null,Ls=1,Vs="";function Eo(l,u){Hd[Wd++]=_p,Hd[Wd++]=l0,l0=l,_p=u}function tD(l,u,p){ya[ba++]=Ls,ya[ba++]=Vs,ya[ba++]=jl,jl=l;var y=Ls;l=Vs;var E=32-et(y)-1;y&=~(1<<E),p+=1;var k=32-et(u)+E;if(30<k){var V=E-E%5;k=(y&(1<<V)-1).toString(32),y>>=V,E-=V,Ls=1<<32-et(u)+E|p<<E|y,Vs=k+l}else Ls=1<<k|p<<E|y,Vs=l}function vS(l){l.return!==null&&(Eo(l,1),tD(l,1,0))}function yS(l){for(;l===l0;)l0=Hd[--Wd],Hd[Wd]=null,_p=Hd[--Wd],Hd[Wd]=null;for(;l===jl;)jl=ya[--ba],ya[ba]=null,Vs=ya[--ba],ya[ba]=null,Ls=ya[--ba],ya[ba]=null}function nD(l,u){ya[ba++]=Ls,ya[ba++]=Vs,ya[ba++]=jl,Ls=u.id,Vs=u.overflow,jl=l}var Mr=null,un=null,At=!1,zl=null,xa=!1,bS=Error(r(519));function Ll(l){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ep(va(u,l)),bS}function rD(l){var u=l.stateNode,p=l.type,y=l.memoizedProps;switch(u[Hn]=l,u[_r]=y,p){case"dialog":yt("cancel",u),yt("close",u);break;case"iframe":case"object":case"embed":yt("load",u);break;case"video":case"audio":for(p=0;p<Hp.length;p++)yt(Hp[p],u);break;case"source":yt("error",u);break;case"img":case"image":case"link":yt("error",u),yt("load",u);break;case"details":yt("toggle",u);break;case"input":yt("invalid",u),Uv(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":yt("invalid",u);break;case"textarea":yt("invalid",u),Nl(u,y.value,y.defaultValue,y.children)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||u.textContent===""+p||y.suppressHydrationWarning===!0||xM(u.textContent,p)?(y.popover!=null&&(yt("beforetoggle",u),yt("toggle",u)),y.onScroll!=null&&yt("scroll",u),y.onScrollEnd!=null&&yt("scrollend",u),y.onClick!=null&&(u.onclick=Ka),u=!0):u=!1,u||Ll(l,!0)}function iD(l){for(Mr=l.return;Mr;)switch(Mr.tag){case 5:case 31:case 13:xa=!1;return;case 27:case 3:xa=!0;return;default:Mr=Mr.return}}function Yd(l){if(l!==Mr)return!1;if(!At)return iD(l),At=!0,!1;var u=l.tag,p;if((p=u!==3&&u!==27)&&((p=u===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||z_(l.type,l.memoizedProps)),p=!p),p&&un&&Ll(l),iD(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));un=NM(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));un=NM(l)}else u===27?(u=un,Zl(l.type)?(l=F_,F_=null,un=l):un=u):un=Mr?Sa(l.stateNode.nextSibling):null;return!0}function fu(){un=Mr=null,At=!1}function xS(){var l=zl;return l!==null&&(Ni===null?Ni=l:Ni.push.apply(Ni,l),zl=null),l}function Ep(l){zl===null?zl=[l]:zl.push(l)}var wS=F(null),hu=null,To=null;function Vl(l,u,p){te(wS,u._currentValue),u._currentValue=p}function Ao(l){l._currentValue=wS.current,Q(wS)}function SS(l,u,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===p)break;l=l.return}}function _S(l,u,p,y){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var k=E.dependencies;if(k!==null){var V=E.child;k=k.firstContext;e:for(;k!==null;){var q=k;k=E;for(var ie=0;ie<u.length;ie++)if(q.context===u[ie]){k.lanes|=p,q=k.alternate,q!==null&&(q.lanes|=p),SS(k.return,p,l),y||(V=null);break e}k=q.next}}else if(E.tag===18){if(V=E.return,V===null)throw Error(r(341));V.lanes|=p,k=V.alternate,k!==null&&(k.lanes|=p),SS(V,p,l),V=null}else V=E.child;if(V!==null)V.return=E;else for(V=E;V!==null;){if(V===l){V=null;break}if(E=V.sibling,E!==null){E.return=V.return,V=E;break}V=V.return}E=V}}function Kd(l,u,p,y){l=null;for(var E=u,k=!1;E!==null;){if(!k){if((E.flags&524288)!==0)k=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var V=E.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var q=E.type;Gi(E.pendingProps.value,V.value)||(l!==null?l.push(q):l=[q])}}else if(E===oe.current){if(V=E.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(Qp):l=[Qp])}E=E.return}l!==null&&_S(u,l,p,y),u.flags|=262144}function c0(l){for(l=l.firstContext;l!==null;){if(!Gi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function pu(l){hu=l,To=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function jr(l){return aD(hu,l)}function u0(l,u){return hu===null&&pu(l),aD(l,u)}function aD(l,u){var p=u._currentValue;if(u={context:u,memoizedValue:p,next:null},To===null){if(l===null)throw Error(r(308));To=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else To=To.next=u;return p}var EX=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){u.aborted=!0,l.forEach(function(p){return p()})}},TX=t.unstable_scheduleCallback,AX=t.unstable_NormalPriority,Kn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ES(){return{controller:new EX,data:new Map,refCount:0}}function Tp(l){l.refCount--,l.refCount===0&&TX(AX,function(){l.controller.abort()})}var Ap=null,TS=0,Xd=0,Qd=null;function kX(l,u){if(Ap===null){var p=Ap=[];TS=0,Xd=C_(),Qd={status:"pending",value:void 0,then:function(y){p.push(y)}}}return TS++,u.then(sD,sD),u}function sD(){if(--TS===0&&Ap!==null){Qd!==null&&(Qd.status="fulfilled");var l=Ap;Ap=null,Xd=0,Qd=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function CX(l,u){var p=[],y={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return l.then(function(){y.status="fulfilled",y.value=u;for(var E=0;E<p.length;E++)(0,p[E])(u)},function(E){for(y.status="rejected",y.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),y}var oD=G.S;G.S=function(l,u){qR=ht(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&kX(l,u),oD!==null&&oD(l,u)};var gu=F(null);function AS(){var l=gu.current;return l!==null?l:Jt.pooledCache}function d0(l,u){u===null?te(gu,gu.current):te(gu,u.pool)}function lD(){var l=AS();return l===null?null:{parent:Kn._currentValue,pool:l}}var Zd=Error(r(460)),kS=Error(r(474)),f0=Error(r(542)),h0={then:function(){}};function cD(l){return l=l.status,l==="fulfilled"||l==="rejected"}function uD(l,u,p){switch(p=l[p],p===void 0?l.push(u):p!==u&&(u.then(Ka,Ka),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,fD(l),l;default:if(typeof u.status=="string")u.then(Ka,Ka);else{if(l=Jt,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(y){if(u.status==="pending"){var E=u;E.status="fulfilled",E.value=y}},function(y){if(u.status==="pending"){var E=u;E.status="rejected",E.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,fD(l),l}throw vu=u,Zd}}function mu(l){try{var u=l._init;return u(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(vu=p,Zd):p}}var vu=null;function dD(){if(vu===null)throw Error(r(459));var l=vu;return vu=null,l}function fD(l){if(l===Zd||l===f0)throw Error(r(483))}var Jd=null,kp=0;function p0(l){var u=kp;return kp+=1,Jd===null&&(Jd=[]),uD(Jd,l,u)}function Cp(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function g0(l,u){throw u.$$typeof===g?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function hD(l){function u(de,ce){if(l){var he=de.deletions;he===null?(de.deletions=[ce],de.flags|=16):he.push(ce)}}function p(de,ce){if(!l)return null;for(;ce!==null;)u(de,ce),ce=ce.sibling;return null}function y(de){for(var ce=new Map;de!==null;)de.key!==null?ce.set(de.key,de):ce.set(de.index,de),de=de.sibling;return ce}function E(de,ce){return de=_o(de,ce),de.index=0,de.sibling=null,de}function k(de,ce,he){return de.index=he,l?(he=de.alternate,he!==null?(he=he.index,he<ce?(de.flags|=67108866,ce):he):(de.flags|=67108866,ce)):(de.flags|=1048576,ce)}function V(de){return l&&de.alternate===null&&(de.flags|=67108866),de}function q(de,ce,he,Te){return ce===null||ce.tag!==6?(ce=gS(he,de.mode,Te),ce.return=de,ce):(ce=E(ce,he),ce.return=de,ce)}function ie(de,ce,he,Te){var Ye=he.type;return Ye===x?_e(de,ce,he.props.children,Te,he.key):ce!==null&&(ce.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===I&&mu(Ye)===ce.type)?(ce=E(ce,he.props),Cp(ce,he),ce.return=de,ce):(ce=o0(he.type,he.key,he.props,null,de.mode,Te),Cp(ce,he),ce.return=de,ce)}function pe(de,ce,he,Te){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==he.containerInfo||ce.stateNode.implementation!==he.implementation?(ce=mS(he,de.mode,Te),ce.return=de,ce):(ce=E(ce,he.children||[]),ce.return=de,ce)}function _e(de,ce,he,Te,Ye){return ce===null||ce.tag!==7?(ce=du(he,de.mode,Te,Ye),ce.return=de,ce):(ce=E(ce,he),ce.return=de,ce)}function ke(de,ce,he){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=gS(""+ce,de.mode,he),ce.return=de,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case v:return he=o0(ce.type,ce.key,ce.props,null,de.mode,he),Cp(he,ce),he.return=de,he;case b:return ce=mS(ce,de.mode,he),ce.return=de,ce;case I:return ce=mu(ce),ke(de,ce,he)}if(Z(ce)||B(ce))return ce=du(ce,de.mode,he,null),ce.return=de,ce;if(typeof ce.then=="function")return ke(de,p0(ce),he);if(ce.$$typeof===N)return ke(de,u0(de,ce),he);g0(de,ce)}return null}function ve(de,ce,he,Te){var Ye=ce!==null?ce.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Ye!==null?null:q(de,ce,""+he,Te);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case v:return he.key===Ye?ie(de,ce,he,Te):null;case b:return he.key===Ye?pe(de,ce,he,Te):null;case I:return he=mu(he),ve(de,ce,he,Te)}if(Z(he)||B(he))return Ye!==null?null:_e(de,ce,he,Te,null);if(typeof he.then=="function")return ve(de,ce,p0(he),Te);if(he.$$typeof===N)return ve(de,ce,u0(de,he),Te);g0(de,he)}return null}function xe(de,ce,he,Te,Ye){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return de=de.get(he)||null,q(ce,de,""+Te,Ye);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case v:return de=de.get(Te.key===null?he:Te.key)||null,ie(ce,de,Te,Ye);case b:return de=de.get(Te.key===null?he:Te.key)||null,pe(ce,de,Te,Ye);case I:return Te=mu(Te),xe(de,ce,he,Te,Ye)}if(Z(Te)||B(Te))return de=de.get(he)||null,_e(ce,de,Te,Ye,null);if(typeof Te.then=="function")return xe(de,ce,he,p0(Te),Ye);if(Te.$$typeof===N)return xe(de,ce,he,u0(ce,Te),Ye);g0(ce,Te)}return null}function Ue(de,ce,he,Te){for(var Ye=null,Nt=null,$e=ce,ft=ce=0,St=null;$e!==null&&ft<he.length;ft++){$e.index>ft?(St=$e,$e=null):St=$e.sibling;var It=ve(de,$e,he[ft],Te);if(It===null){$e===null&&($e=St);break}l&&$e&&It.alternate===null&&u(de,$e),ce=k(It,ce,ft),Nt===null?Ye=It:Nt.sibling=It,Nt=It,$e=St}if(ft===he.length)return p(de,$e),At&&Eo(de,ft),Ye;if($e===null){for(;ft<he.length;ft++)$e=ke(de,he[ft],Te),$e!==null&&(ce=k($e,ce,ft),Nt===null?Ye=$e:Nt.sibling=$e,Nt=$e);return At&&Eo(de,ft),Ye}for($e=y($e);ft<he.length;ft++)St=xe($e,de,ft,he[ft],Te),St!==null&&(l&&St.alternate!==null&&$e.delete(St.key===null?ft:St.key),ce=k(St,ce,ft),Nt===null?Ye=St:Nt.sibling=St,Nt=St);return l&&$e.forEach(function(rc){return u(de,rc)}),At&&Eo(de,ft),Ye}function tt(de,ce,he,Te){if(he==null)throw Error(r(151));for(var Ye=null,Nt=null,$e=ce,ft=ce=0,St=null,It=he.next();$e!==null&&!It.done;ft++,It=he.next()){$e.index>ft?(St=$e,$e=null):St=$e.sibling;var rc=ve(de,$e,It.value,Te);if(rc===null){$e===null&&($e=St);break}l&&$e&&rc.alternate===null&&u(de,$e),ce=k(rc,ce,ft),Nt===null?Ye=rc:Nt.sibling=rc,Nt=rc,$e=St}if(It.done)return p(de,$e),At&&Eo(de,ft),Ye;if($e===null){for(;!It.done;ft++,It=he.next())It=ke(de,It.value,Te),It!==null&&(ce=k(It,ce,ft),Nt===null?Ye=It:Nt.sibling=It,Nt=It);return At&&Eo(de,ft),Ye}for($e=y($e);!It.done;ft++,It=he.next())It=xe($e,de,ft,It.value,Te),It!==null&&(l&&It.alternate!==null&&$e.delete(It.key===null?ft:It.key),ce=k(It,ce,ft),Nt===null?Ye=It:Nt.sibling=It,Nt=It);return l&&$e.forEach(function(VQ){return u(de,VQ)}),At&&Eo(de,ft),Ye}function Yt(de,ce,he,Te){if(typeof he=="object"&&he!==null&&he.type===x&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case v:e:{for(var Ye=he.key;ce!==null;){if(ce.key===Ye){if(Ye=he.type,Ye===x){if(ce.tag===7){p(de,ce.sibling),Te=E(ce,he.props.children),Te.return=de,de=Te;break e}}else if(ce.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===I&&mu(Ye)===ce.type){p(de,ce.sibling),Te=E(ce,he.props),Cp(Te,he),Te.return=de,de=Te;break e}p(de,ce);break}else u(de,ce);ce=ce.sibling}he.type===x?(Te=du(he.props.children,de.mode,Te,he.key),Te.return=de,de=Te):(Te=o0(he.type,he.key,he.props,null,de.mode,Te),Cp(Te,he),Te.return=de,de=Te)}return V(de);case b:e:{for(Ye=he.key;ce!==null;){if(ce.key===Ye)if(ce.tag===4&&ce.stateNode.containerInfo===he.containerInfo&&ce.stateNode.implementation===he.implementation){p(de,ce.sibling),Te=E(ce,he.children||[]),Te.return=de,de=Te;break e}else{p(de,ce);break}else u(de,ce);ce=ce.sibling}Te=mS(he,de.mode,Te),Te.return=de,de=Te}return V(de);case I:return he=mu(he),Yt(de,ce,he,Te)}if(Z(he))return Ue(de,ce,he,Te);if(B(he)){if(Ye=B(he),typeof Ye!="function")throw Error(r(150));return he=Ye.call(he),tt(de,ce,he,Te)}if(typeof he.then=="function")return Yt(de,ce,p0(he),Te);if(he.$$typeof===N)return Yt(de,ce,u0(de,he),Te);g0(de,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,ce!==null&&ce.tag===6?(p(de,ce.sibling),Te=E(ce,he),Te.return=de,de=Te):(p(de,ce),Te=gS(he,de.mode,Te),Te.return=de,de=Te),V(de)):p(de,ce)}return function(de,ce,he,Te){try{kp=0;var Ye=Yt(de,ce,he,Te);return Jd=null,Ye}catch($e){if($e===Zd||$e===f0)throw $e;var Nt=Hi(29,$e,null,de.mode);return Nt.lanes=Te,Nt.return=de,Nt}finally{}}}var yu=hD(!0),pD=hD(!1),Bl=!1;function CS(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function NS(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Ul(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Fl(l,u,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(Mt&2)!==0){var E=y.pending;return E===null?u.next=u:(u.next=E.next,E.next=u),y.pending=u,u=s0(l),QP(l,null,p),u}return a0(l,y,u,p),s0(l)}function Np(l,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,np(l,p)}}function IS(l,u){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,k=null;if(p=p.firstBaseUpdate,p!==null){do{var V={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};k===null?E=k=V:k=k.next=V,p=p.next}while(p!==null);k===null?E=k=u:k=k.next=u}else E=k=u;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:k,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}var OS=!1;function Ip(){if(OS){var l=Qd;if(l!==null)throw l}}function Op(l,u,p,y){OS=!1;var E=l.updateQueue;Bl=!1;var k=E.firstBaseUpdate,V=E.lastBaseUpdate,q=E.shared.pending;if(q!==null){E.shared.pending=null;var ie=q,pe=ie.next;ie.next=null,V===null?k=pe:V.next=pe,V=ie;var _e=l.alternate;_e!==null&&(_e=_e.updateQueue,q=_e.lastBaseUpdate,q!==V&&(q===null?_e.firstBaseUpdate=pe:q.next=pe,_e.lastBaseUpdate=ie))}if(k!==null){var ke=E.baseState;V=0,_e=pe=ie=null,q=k;do{var ve=q.lane&-536870913,xe=ve!==q.lane;if(xe?(wt&ve)===ve:(y&ve)===ve){ve!==0&&ve===Xd&&(OS=!0),_e!==null&&(_e=_e.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var Ue=l,tt=q;ve=u;var Yt=p;switch(tt.tag){case 1:if(Ue=tt.payload,typeof Ue=="function"){ke=Ue.call(Yt,ke,ve);break e}ke=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=tt.payload,ve=typeof Ue=="function"?Ue.call(Yt,ke,ve):Ue,ve==null)break e;ke=h({},ke,ve);break e;case 2:Bl=!0}}ve=q.callback,ve!==null&&(l.flags|=64,xe&&(l.flags|=8192),xe=E.callbacks,xe===null?E.callbacks=[ve]:xe.push(ve))}else xe={lane:ve,tag:q.tag,payload:q.payload,callback:q.callback,next:null},_e===null?(pe=_e=xe,ie=ke):_e=_e.next=xe,V|=ve;if(q=q.next,q===null){if(q=E.shared.pending,q===null)break;xe=q,q=xe.next,xe.next=null,E.lastBaseUpdate=xe,E.shared.pending=null}}while(!0);_e===null&&(ie=ke),E.baseState=ie,E.firstBaseUpdate=pe,E.lastBaseUpdate=_e,k===null&&(E.shared.lanes=0),Wl|=V,l.lanes=V,l.memoizedState=ke}}function gD(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function mD(l,u){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)gD(p[l],u)}var ef=F(null),m0=F(0);function vD(l,u){l=Mo,te(m0,l),te(ef,u),Mo=l|u.baseLanes}function PS(){te(m0,Mo),te(ef,ef.current)}function DS(){Mo=m0.current,Q(ef),Q(m0)}var Wi=F(null),wa=null;function $l(l){var u=l.alternate;te(Bn,Bn.current&1),te(Wi,l),wa===null&&(u===null||ef.current!==null||u.memoizedState!==null)&&(wa=l)}function RS(l){te(Bn,Bn.current),te(Wi,l),wa===null&&(wa=l)}function yD(l){l.tag===22?(te(Bn,Bn.current),te(Wi,l),wa===null&&(wa=l)):ql()}function ql(){te(Bn,Bn.current),te(Wi,Wi.current)}function Yi(l){Q(Wi),wa===l&&(wa=null),Q(Bn)}var Bn=F(0);function v0(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||B_(p)||U_(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ko=0,ut=null,Ht=null,Xn=null,y0=!1,tf=!1,bu=!1,b0=0,Pp=0,nf=null,NX=0;function Pn(){throw Error(r(321))}function MS(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!Gi(l[p],u[p]))return!1;return!0}function jS(l,u,p,y,E,k){return ko=k,ut=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,G.H=l===null||l.memoizedState===null?tR:QS,bu=!1,k=p(y,E),bu=!1,tf&&(k=xD(u,p,y,E)),bD(l),k}function bD(l){G.H=Mp;var u=Ht!==null&&Ht.next!==null;if(ko=0,Xn=Ht=ut=null,y0=!1,Pp=0,nf=null,u)throw Error(r(300));l===null||Qn||(l=l.dependencies,l!==null&&c0(l)&&(Qn=!0))}function xD(l,u,p,y){ut=l;var E=0;do{if(tf&&(nf=null),Pp=0,tf=!1,25<=E)throw Error(r(301));if(E+=1,Xn=Ht=null,l.updateQueue!=null){var k=l.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}G.H=nR,k=u(p,y)}while(tf);return k}function IX(){var l=G.H,u=l.useState()[0];return u=typeof u.then=="function"?Dp(u):u,l=l.useState()[0],(Ht!==null?Ht.memoizedState:null)!==l&&(ut.flags|=1024),u}function zS(){var l=b0!==0;return b0=0,l}function LS(l,u,p){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~p}function VS(l){if(y0){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}y0=!1}ko=0,Xn=Ht=ut=null,tf=!1,Pp=b0=0,nf=null}function di(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xn===null?ut.memoizedState=Xn=l:Xn=Xn.next=l,Xn}function Un(){if(Ht===null){var l=ut.alternate;l=l!==null?l.memoizedState:null}else l=Ht.next;var u=Xn===null?ut.memoizedState:Xn.next;if(u!==null)Xn=u,Ht=l;else{if(l===null)throw ut.alternate===null?Error(r(467)):Error(r(310));Ht=l,l={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Xn===null?ut.memoizedState=Xn=l:Xn=Xn.next=l}return Xn}function x0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dp(l){var u=Pp;return Pp+=1,nf===null&&(nf=[]),l=uD(nf,l,u),u=ut,(Xn===null?u.memoizedState:Xn.next)===null&&(u=u.alternate,G.H=u===null||u.memoizedState===null?tR:QS),l}function w0(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Dp(l);if(l.$$typeof===N)return jr(l)}throw Error(r(438,String(l)))}function BS(l){var u=null,p=ut.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var y=ut.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(E){return E.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=x0(),ut.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(l),y=0;y<l;y++)p[y]=j;return u.index++,p}function Co(l,u){return typeof u=="function"?u(l):u}function S0(l){var u=Un();return US(u,Ht,l)}function US(l,u,p){var y=l.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=p;var E=l.baseQueue,k=y.pending;if(k!==null){if(E!==null){var V=E.next;E.next=k.next,k.next=V}u.baseQueue=E=k,y.pending=null}if(k=l.baseState,E===null)l.memoizedState=k;else{u=E.next;var q=V=null,ie=null,pe=u,_e=!1;do{var ke=pe.lane&-536870913;if(ke!==pe.lane?(wt&ke)===ke:(ko&ke)===ke){var ve=pe.revertLane;if(ve===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),ke===Xd&&(_e=!0);else if((ko&ve)===ve){pe=pe.next,ve===Xd&&(_e=!0);continue}else ke={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},ie===null?(q=ie=ke,V=k):ie=ie.next=ke,ut.lanes|=ve,Wl|=ve;ke=pe.action,bu&&p(k,ke),k=pe.hasEagerState?pe.eagerState:p(k,ke)}else ve={lane:ke,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},ie===null?(q=ie=ve,V=k):ie=ie.next=ve,ut.lanes|=ke,Wl|=ke;pe=pe.next}while(pe!==null&&pe!==u);if(ie===null?V=k:ie.next=q,!Gi(k,l.memoizedState)&&(Qn=!0,_e&&(p=Qd,p!==null)))throw p;l.memoizedState=k,l.baseState=V,l.baseQueue=ie,y.lastRenderedState=k}return E===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function FS(l){var u=Un(),p=u.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var y=p.dispatch,E=p.pending,k=u.memoizedState;if(E!==null){p.pending=null;var V=E=E.next;do k=l(k,V.action),V=V.next;while(V!==E);Gi(k,u.memoizedState)||(Qn=!0),u.memoizedState=k,u.baseQueue===null&&(u.baseState=k),p.lastRenderedState=k}return[k,y]}function wD(l,u,p){var y=ut,E=Un(),k=At;if(k){if(p===void 0)throw Error(r(407));p=p()}else p=u();var V=!Gi((Ht||E).memoizedState,p);if(V&&(E.memoizedState=p,Qn=!0),E=E.queue,GS(ED.bind(null,y,E,l),[l]),E.getSnapshot!==u||V||Xn!==null&&Xn.memoizedState.tag&1){if(y.flags|=2048,rf(9,{destroy:void 0},_D.bind(null,y,E,p,u),null),Jt===null)throw Error(r(349));k||(ko&127)!==0||SD(y,u,p)}return p}function SD(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},u=ut.updateQueue,u===null?(u=x0(),ut.updateQueue=u,u.stores=[l]):(p=u.stores,p===null?u.stores=[l]:p.push(l))}function _D(l,u,p,y){u.value=p,u.getSnapshot=y,TD(u)&&AD(l)}function ED(l,u,p){return p(function(){TD(u)&&AD(l)})}function TD(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!Gi(l,p)}catch{return!0}}function AD(l){var u=uu(l,2);u!==null&&Ii(u,l,2)}function $S(l){var u=di();if(typeof l=="function"){var p=l;if(l=p(),bu){on(!0);try{p()}finally{on(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:l},u}function kD(l,u,p,y){return l.baseState=p,US(l,Ht,typeof y=="function"?y:Co)}function OX(l,u,p,y,E){if(T0(l))throw Error(r(485));if(l=u.action,l!==null){var k={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){k.listeners.push(V)}};G.T!==null?p(!0):k.isTransition=!1,y(k),p=u.pending,p===null?(k.next=u.pending=k,CD(u,k)):(k.next=p.next,u.pending=p.next=k)}}function CD(l,u){var p=u.action,y=u.payload,E=l.state;if(u.isTransition){var k=G.T,V={};G.T=V;try{var q=p(E,y),ie=G.S;ie!==null&&ie(V,q),ND(l,u,q)}catch(pe){qS(l,u,pe)}finally{k!==null&&V.types!==null&&(k.types=V.types),G.T=k}}else try{k=p(E,y),ND(l,u,k)}catch(pe){qS(l,u,pe)}}function ND(l,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){ID(l,u,y)},function(y){return qS(l,u,y)}):ID(l,u,p)}function ID(l,u,p){u.status="fulfilled",u.value=p,OD(u),l.state=p,u=l.pending,u!==null&&(p=u.next,p===u?l.pending=null:(p=p.next,u.next=p,CD(l,p)))}function qS(l,u,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=p,OD(u),u=u.next;while(u!==y)}l.action=null}function OD(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function PD(l,u){return u}function DD(l,u){if(At){var p=Jt.formState;if(p!==null){e:{var y=ut;if(At){if(un){t:{for(var E=un,k=xa;E.nodeType!==8;){if(!k){E=null;break t}if(E=Sa(E.nextSibling),E===null){E=null;break t}}k=E.data,E=k==="F!"||k==="F"?E:null}if(E){un=Sa(E.nextSibling),y=E.data==="F!";break e}}Ll(y)}y=!1}y&&(u=p[0])}}return p=di(),p.memoizedState=p.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:PD,lastRenderedState:u},p.queue=y,p=ZD.bind(null,ut,y),y.dispatch=p,y=$S(!1),k=XS.bind(null,ut,!1,y.queue),y=di(),E={state:u,dispatch:null,action:l,pending:null},y.queue=E,p=OX.bind(null,ut,E,k,p),E.dispatch=p,y.memoizedState=l,[u,p,!1]}function RD(l){var u=Un();return MD(u,Ht,l)}function MD(l,u,p){if(u=US(l,u,PD)[0],l=S0(Co)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=Dp(u)}catch(V){throw V===Zd?f0:V}else y=u;u=Un();var E=u.queue,k=E.dispatch;return p!==u.memoizedState&&(ut.flags|=2048,rf(9,{destroy:void 0},PX.bind(null,E,p),null)),[y,k,l]}function PX(l,u){l.action=u}function jD(l){var u=Un(),p=Ht;if(p!==null)return MD(u,p,l);Un(),u=u.memoizedState,p=Un();var y=p.queue.dispatch;return p.memoizedState=l,[u,y,!1]}function rf(l,u,p,y){return l={tag:l,create:p,deps:y,inst:u,next:null},u=ut.updateQueue,u===null&&(u=x0(),ut.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,u.lastEffect=l),l}function zD(){return Un().memoizedState}function _0(l,u,p,y){var E=di();ut.flags|=l,E.memoizedState=rf(1|u,{destroy:void 0},p,y===void 0?null:y)}function E0(l,u,p,y){var E=Un();y=y===void 0?null:y;var k=E.memoizedState.inst;Ht!==null&&y!==null&&MS(y,Ht.memoizedState.deps)?E.memoizedState=rf(u,k,p,y):(ut.flags|=l,E.memoizedState=rf(1|u,k,p,y))}function LD(l,u){_0(8390656,8,l,u)}function GS(l,u){E0(2048,8,l,u)}function DX(l){ut.flags|=4;var u=ut.updateQueue;if(u===null)u=x0(),ut.updateQueue=u,u.events=[l];else{var p=u.events;p===null?u.events=[l]:p.push(l)}}function VD(l){var u=Un().memoizedState;return DX({ref:u,nextImpl:l}),function(){if((Mt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function BD(l,u){return E0(4,2,l,u)}function UD(l,u){return E0(4,4,l,u)}function FD(l,u){if(typeof u=="function"){l=l();var p=u(l);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function $D(l,u,p){p=p!=null?p.concat([l]):null,E0(4,4,FD.bind(null,u,l),p)}function HS(){}function qD(l,u){var p=Un();u=u===void 0?null:u;var y=p.memoizedState;return u!==null&&MS(u,y[1])?y[0]:(p.memoizedState=[l,u],l)}function GD(l,u){var p=Un();u=u===void 0?null:u;var y=p.memoizedState;if(u!==null&&MS(u,y[1]))return y[0];if(y=l(),bu){on(!0);try{l()}finally{on(!1)}}return p.memoizedState=[y,u],y}function WS(l,u,p){return p===void 0||(ko&1073741824)!==0&&(wt&261930)===0?l.memoizedState=u:(l.memoizedState=p,l=HR(),ut.lanes|=l,Wl|=l,p)}function HD(l,u,p,y){return Gi(p,u)?p:ef.current!==null?(l=WS(l,p,y),Gi(l,u)||(Qn=!0),l):(ko&42)===0||(ko&1073741824)!==0&&(wt&261930)===0?(Qn=!0,l.memoizedState=p):(l=HR(),ut.lanes|=l,Wl|=l,u)}function WD(l,u,p,y,E){var k=K.p;K.p=k!==0&&8>k?k:8;var V=G.T,q={};G.T=q,XS(l,!1,u,p);try{var ie=E(),pe=G.S;if(pe!==null&&pe(q,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var _e=CX(ie,y);Rp(l,u,_e,Qi(l))}else Rp(l,u,y,Qi(l))}catch(ke){Rp(l,u,{then:function(){},status:"rejected",reason:ke},Qi())}finally{K.p=k,V!==null&&q.types!==null&&(V.types=q.types),G.T=V}}function RX(){}function YS(l,u,p,y){if(l.tag!==5)throw Error(r(476));var E=YD(l).queue;WD(l,E,u,X,p===null?RX:function(){return KD(l),p(y)})}function YD(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:X},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:p},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function KD(l){var u=YD(l);u.next===null&&(u=l.alternate.memoizedState),Rp(l,u.next.queue,{},Qi())}function KS(){return jr(Qp)}function XD(){return Un().memoizedState}function QD(){return Un().memoizedState}function MX(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var p=Qi();l=Ul(p);var y=Fl(u,l,p);y!==null&&(Ii(y,u,p),Np(y,u,p)),u={cache:ES()},l.payload=u;return}u=u.return}}function jX(l,u,p){var y=Qi();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},T0(l)?JD(u,p):(p=hS(l,u,p,y),p!==null&&(Ii(p,l,y),eR(p,u,y)))}function ZD(l,u,p){var y=Qi();Rp(l,u,p,y)}function Rp(l,u,p,y){var E={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(T0(l))JD(u,E);else{var k=l.alternate;if(l.lanes===0&&(k===null||k.lanes===0)&&(k=u.lastRenderedReducer,k!==null))try{var V=u.lastRenderedState,q=k(V,p);if(E.hasEagerState=!0,E.eagerState=q,Gi(q,V))return a0(l,u,E,0),Jt===null&&i0(),!1}catch{}finally{}if(p=hS(l,u,E,y),p!==null)return Ii(p,l,y),eR(p,u,y),!0}return!1}function XS(l,u,p,y){if(y={lane:2,revertLane:C_(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},T0(l)){if(u)throw Error(r(479))}else u=hS(l,p,y,2),u!==null&&Ii(u,l,2)}function T0(l){var u=l.alternate;return l===ut||u!==null&&u===ut}function JD(l,u){tf=y0=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function eR(l,u,p){if((p&4194048)!==0){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,np(l,p)}}var Mp={readContext:jr,use:w0,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn};Mp.useEffectEvent=Pn;var tR={readContext:jr,use:w0,useCallback:function(l,u){return di().memoizedState=[l,u===void 0?null:u],l},useContext:jr,useEffect:LD,useImperativeHandle:function(l,u,p){p=p!=null?p.concat([l]):null,_0(4194308,4,FD.bind(null,u,l),p)},useLayoutEffect:function(l,u){return _0(4194308,4,l,u)},useInsertionEffect:function(l,u){_0(4,2,l,u)},useMemo:function(l,u){var p=di();u=u===void 0?null:u;var y=l();if(bu){on(!0);try{l()}finally{on(!1)}}return p.memoizedState=[y,u],y},useReducer:function(l,u,p){var y=di();if(p!==void 0){var E=p(u);if(bu){on(!0);try{p(u)}finally{on(!1)}}}else E=u;return y.memoizedState=y.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},y.queue=l,l=l.dispatch=jX.bind(null,ut,l),[y.memoizedState,l]},useRef:function(l){var u=di();return l={current:l},u.memoizedState=l},useState:function(l){l=$S(l);var u=l.queue,p=ZD.bind(null,ut,u);return u.dispatch=p,[l.memoizedState,p]},useDebugValue:HS,useDeferredValue:function(l,u){var p=di();return WS(p,l,u)},useTransition:function(){var l=$S(!1);return l=WD.bind(null,ut,l.queue,!0,!1),di().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,p){var y=ut,E=di();if(At){if(p===void 0)throw Error(r(407));p=p()}else{if(p=u(),Jt===null)throw Error(r(349));(wt&127)!==0||SD(y,u,p)}E.memoizedState=p;var k={value:p,getSnapshot:u};return E.queue=k,LD(ED.bind(null,y,k,l),[l]),y.flags|=2048,rf(9,{destroy:void 0},_D.bind(null,y,k,p,u),null),p},useId:function(){var l=di(),u=Jt.identifierPrefix;if(At){var p=Vs,y=Ls;p=(y&~(1<<32-et(y)-1)).toString(32)+p,u="_"+u+"R_"+p,p=b0++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=NX++,u="_"+u+"r_"+p.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:KS,useFormState:DD,useActionState:DD,useOptimistic:function(l){var u=di();u.memoizedState=u.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=XS.bind(null,ut,!0,p),p.dispatch=u,[l,u]},useMemoCache:BS,useCacheRefresh:function(){return di().memoizedState=MX.bind(null,ut)},useEffectEvent:function(l){var u=di(),p={impl:l};return u.memoizedState=p,function(){if((Mt&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},QS={readContext:jr,use:w0,useCallback:qD,useContext:jr,useEffect:GS,useImperativeHandle:$D,useInsertionEffect:BD,useLayoutEffect:UD,useMemo:GD,useReducer:S0,useRef:zD,useState:function(){return S0(Co)},useDebugValue:HS,useDeferredValue:function(l,u){var p=Un();return HD(p,Ht.memoizedState,l,u)},useTransition:function(){var l=S0(Co)[0],u=Un().memoizedState;return[typeof l=="boolean"?l:Dp(l),u]},useSyncExternalStore:wD,useId:XD,useHostTransitionStatus:KS,useFormState:RD,useActionState:RD,useOptimistic:function(l,u){var p=Un();return kD(p,Ht,l,u)},useMemoCache:BS,useCacheRefresh:QD};QS.useEffectEvent=VD;var nR={readContext:jr,use:w0,useCallback:qD,useContext:jr,useEffect:GS,useImperativeHandle:$D,useInsertionEffect:BD,useLayoutEffect:UD,useMemo:GD,useReducer:FS,useRef:zD,useState:function(){return FS(Co)},useDebugValue:HS,useDeferredValue:function(l,u){var p=Un();return Ht===null?WS(p,l,u):HD(p,Ht.memoizedState,l,u)},useTransition:function(){var l=FS(Co)[0],u=Un().memoizedState;return[typeof l=="boolean"?l:Dp(l),u]},useSyncExternalStore:wD,useId:XD,useHostTransitionStatus:KS,useFormState:jD,useActionState:jD,useOptimistic:function(l,u){var p=Un();return Ht!==null?kD(p,Ht,l,u):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:BS,useCacheRefresh:QD};nR.useEffectEvent=VD;function ZS(l,u,p,y){u=l.memoizedState,p=p(y,u),p=p==null?u:h({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var JS={enqueueSetState:function(l,u,p){l=l._reactInternals;var y=Qi(),E=Ul(y);E.payload=u,p!=null&&(E.callback=p),u=Fl(l,E,y),u!==null&&(Ii(u,l,y),Np(u,l,y))},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var y=Qi(),E=Ul(y);E.tag=1,E.payload=u,p!=null&&(E.callback=p),u=Fl(l,E,y),u!==null&&(Ii(u,l,y),Np(u,l,y))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=Qi(),y=Ul(p);y.tag=2,u!=null&&(y.callback=u),u=Fl(l,y,p),u!==null&&(Ii(u,l,p),Np(u,l,p))}};function rR(l,u,p,y,E,k,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,k,V):u.prototype&&u.prototype.isPureReactComponent?!wp(p,y)||!wp(E,k):!0}function iR(l,u,p,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==l&&JS.enqueueReplaceState(u,u.state,null)}function xu(l,u){var p=u;if("ref"in u){p={};for(var y in u)y!=="ref"&&(p[y]=u[y])}if(l=l.defaultProps){p===u&&(p=h({},p));for(var E in l)p[E]===void 0&&(p[E]=l[E])}return p}function aR(l){r0(l)}function sR(l){console.error(l)}function oR(l){r0(l)}function A0(l,u){try{var p=l.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function lR(l,u,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function e_(l,u,p){return p=Ul(p),p.tag=3,p.payload={element:null},p.callback=function(){A0(l,u)},p}function cR(l){return l=Ul(l),l.tag=3,l}function uR(l,u,p,y){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var k=y.value;l.payload=function(){return E(k)},l.callback=function(){lR(u,p,y)}}var V=p.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){lR(u,p,y),typeof E!="function"&&(Yl===null?Yl=new Set([this]):Yl.add(this));var q=y.stack;this.componentDidCatch(y.value,{componentStack:q!==null?q:""})})}function zX(l,u,p,y,E){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=p.alternate,u!==null&&Kd(u,p,E,!0),p=Wi.current,p!==null){switch(p.tag){case 31:case 13:return wa===null?L0():p.alternate===null&&Dn===0&&(Dn=3),p.flags&=-257,p.flags|=65536,p.lanes=E,y===h0?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([y]):u.add(y),T_(l,y,E)),!1;case 22:return p.flags|=65536,y===h0?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([y]):p.add(y)),T_(l,y,E)),!1}throw Error(r(435,p.tag))}return T_(l,y,E),L0(),!1}if(At)return u=Wi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=E,y!==bS&&(l=Error(r(422),{cause:y}),Ep(va(l,p)))):(y!==bS&&(u=Error(r(423),{cause:y}),Ep(va(u,p))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,y=va(y,p),E=e_(l.stateNode,y,E),IS(l,E),Dn!==4&&(Dn=2)),!1;var k=Error(r(520),{cause:y});if(k=va(k,p),$p===null?$p=[k]:$p.push(k),Dn!==4&&(Dn=2),u===null)return!0;y=va(y,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,l=E&-E,p.lanes|=l,l=e_(p.stateNode,y,l),IS(p,l),!1;case 1:if(u=p.type,k=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Yl===null||!Yl.has(k))))return p.flags|=65536,E&=-E,p.lanes|=E,E=cR(E),uR(E,l,p,y),IS(p,E),!1}p=p.return}while(p!==null);return!1}var t_=Error(r(461)),Qn=!1;function zr(l,u,p,y){u.child=l===null?pD(u,null,p,y):yu(u,l.child,p,y)}function dR(l,u,p,y,E){p=p.render;var k=u.ref;if("ref"in y){var V={};for(var q in y)q!=="ref"&&(V[q]=y[q])}else V=y;return pu(u),y=jS(l,u,p,V,k,E),q=zS(),l!==null&&!Qn?(LS(l,u,E),No(l,u,E)):(At&&q&&vS(u),u.flags|=1,zr(l,u,y,E),u.child)}function fR(l,u,p,y,E){if(l===null){var k=p.type;return typeof k=="function"&&!pS(k)&&k.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=k,hR(l,u,k,y,E)):(l=o0(p.type,null,y,u,u.mode,E),l.ref=u.ref,l.return=u,u.child=l)}if(k=l.child,!c_(l,E)){var V=k.memoizedProps;if(p=p.compare,p=p!==null?p:wp,p(V,y)&&l.ref===u.ref)return No(l,u,E)}return u.flags|=1,l=_o(k,y),l.ref=u.ref,l.return=u,u.child=l}function hR(l,u,p,y,E){if(l!==null){var k=l.memoizedProps;if(wp(k,y)&&l.ref===u.ref)if(Qn=!1,u.pendingProps=y=k,c_(l,E))(l.flags&131072)!==0&&(Qn=!0);else return u.lanes=l.lanes,No(l,u,E)}return n_(l,u,p,y,E)}function pR(l,u,p,y){var E=y.children,k=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((u.flags&128)!==0){if(k=k!==null?k.baseLanes|p:p,l!==null){for(y=u.child=l.child,E=0;y!==null;)E=E|y.lanes|y.childLanes,y=y.sibling;y=E&~k}else y=0,u.child=null;return gR(l,u,k,p,y)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&d0(u,k!==null?k.cachePool:null),k!==null?vD(u,k):PS(),yD(u);else return y=u.lanes=536870912,gR(l,u,k!==null?k.baseLanes|p:p,p,y)}else k!==null?(d0(u,k.cachePool),vD(u,k),ql(),u.memoizedState=null):(l!==null&&d0(u,null),PS(),ql());return zr(l,u,E,p),u.child}function jp(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function gR(l,u,p,y,E){var k=AS();return k=k===null?null:{parent:Kn._currentValue,pool:k},u.memoizedState={baseLanes:p,cachePool:k},l!==null&&d0(u,null),PS(),yD(u),l!==null&&Kd(l,u,y,!0),u.childLanes=E,null}function k0(l,u){return u=N0({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function mR(l,u,p){return yu(u,l.child,null,p),l=k0(u,u.pendingProps),l.flags|=2,Yi(u),u.memoizedState=null,l}function LX(l,u,p){var y=u.pendingProps,E=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(At){if(y.mode==="hidden")return l=k0(u,y),u.lanes=536870912,jp(null,l);if(RS(u),(l=un)?(l=CM(l,xa),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:jl!==null?{id:Ls,overflow:Vs}:null,retryLane:536870912,hydrationErrors:null},p=JP(l),p.return=u,u.child=p,Mr=u,un=null)):l=null,l===null)throw Ll(u);return u.lanes=536870912,null}return k0(u,y)}var k=l.memoizedState;if(k!==null){var V=k.dehydrated;if(RS(u),E)if(u.flags&256)u.flags&=-257,u=mR(l,u,p);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(r(558));else if(Qn||Kd(l,u,p,!1),E=(p&l.childLanes)!==0,Qn||E){if(y=Jt,y!==null&&(V=rp(y,p),V!==0&&V!==k.retryLane))throw k.retryLane=V,uu(l,V),Ii(y,l,V),t_;L0(),u=mR(l,u,p)}else l=k.treeContext,un=Sa(V.nextSibling),Mr=u,At=!0,zl=null,xa=!1,l!==null&&nD(u,l),u=k0(u,y),u.flags|=4096;return u}return l=_o(l.child,{mode:y.mode,children:y.children}),l.ref=u.ref,u.child=l,l.return=u,l}function C0(l,u){var p=u.ref;if(p===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(u.flags|=4194816)}}function n_(l,u,p,y,E){return pu(u),p=jS(l,u,p,y,void 0,E),y=zS(),l!==null&&!Qn?(LS(l,u,E),No(l,u,E)):(At&&y&&vS(u),u.flags|=1,zr(l,u,p,E),u.child)}function vR(l,u,p,y,E,k){return pu(u),u.updateQueue=null,p=xD(u,y,p,E),bD(l),y=zS(),l!==null&&!Qn?(LS(l,u,k),No(l,u,k)):(At&&y&&vS(u),u.flags|=1,zr(l,u,p,k),u.child)}function yR(l,u,p,y,E){if(pu(u),u.stateNode===null){var k=Gd,V=p.contextType;typeof V=="object"&&V!==null&&(k=jr(V)),k=new p(y,k),u.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=JS,u.stateNode=k,k._reactInternals=u,k=u.stateNode,k.props=y,k.state=u.memoizedState,k.refs={},CS(u),V=p.contextType,k.context=typeof V=="object"&&V!==null?jr(V):Gd,k.state=u.memoizedState,V=p.getDerivedStateFromProps,typeof V=="function"&&(ZS(u,p,V,y),k.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(V=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),V!==k.state&&JS.enqueueReplaceState(k,k.state,null),Op(u,y,k,E),Ip(),k.state=u.memoizedState),typeof k.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(l===null){k=u.stateNode;var q=u.memoizedProps,ie=xu(p,q);k.props=ie;var pe=k.context,_e=p.contextType;V=Gd,typeof _e=="object"&&_e!==null&&(V=jr(_e));var ke=p.getDerivedStateFromProps;_e=typeof ke=="function"||typeof k.getSnapshotBeforeUpdate=="function",q=u.pendingProps!==q,_e||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(q||pe!==V)&&iR(u,k,y,V),Bl=!1;var ve=u.memoizedState;k.state=ve,Op(u,y,k,E),Ip(),pe=u.memoizedState,q||ve!==pe||Bl?(typeof ke=="function"&&(ZS(u,p,ke,y),pe=u.memoizedState),(ie=Bl||rR(u,p,ie,y,ve,pe,V))?(_e||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(u.flags|=4194308)):(typeof k.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=pe),k.props=y,k.state=pe,k.context=V,y=ie):(typeof k.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{k=u.stateNode,NS(l,u),V=u.memoizedProps,_e=xu(p,V),k.props=_e,ke=u.pendingProps,ve=k.context,pe=p.contextType,ie=Gd,typeof pe=="object"&&pe!==null&&(ie=jr(pe)),q=p.getDerivedStateFromProps,(pe=typeof q=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(V!==ke||ve!==ie)&&iR(u,k,y,ie),Bl=!1,ve=u.memoizedState,k.state=ve,Op(u,y,k,E),Ip();var xe=u.memoizedState;V!==ke||ve!==xe||Bl||l!==null&&l.dependencies!==null&&c0(l.dependencies)?(typeof q=="function"&&(ZS(u,p,q,y),xe=u.memoizedState),(_e=Bl||rR(u,p,_e,y,ve,xe,ie)||l!==null&&l.dependencies!==null&&c0(l.dependencies))?(pe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(y,xe,ie),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(y,xe,ie)),typeof k.componentDidUpdate=="function"&&(u.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof k.componentDidUpdate!="function"||V===l.memoizedProps&&ve===l.memoizedState||(u.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&ve===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=xe),k.props=y,k.state=xe,k.context=ie,y=_e):(typeof k.componentDidUpdate!="function"||V===l.memoizedProps&&ve===l.memoizedState||(u.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&ve===l.memoizedState||(u.flags|=1024),y=!1)}return k=y,C0(l,u),y=(u.flags&128)!==0,k||y?(k=u.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:k.render(),u.flags|=1,l!==null&&y?(u.child=yu(u,l.child,null,E),u.child=yu(u,null,p,E)):zr(l,u,p,E),u.memoizedState=k.state,l=u.child):l=No(l,u,E),l}function bR(l,u,p,y){return fu(),u.flags|=256,zr(l,u,p,y),u.child}var r_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function i_(l){return{baseLanes:l,cachePool:lD()}}function a_(l,u,p){return l=l!==null?l.childLanes&~p:0,u&&(l|=Xi),l}function xR(l,u,p){var y=u.pendingProps,E=!1,k=(u.flags&128)!==0,V;if((V=k)||(V=l!==null&&l.memoizedState===null?!1:(Bn.current&2)!==0),V&&(E=!0,u.flags&=-129),V=(u.flags&32)!==0,u.flags&=-33,l===null){if(At){if(E?$l(u):ql(),(l=un)?(l=CM(l,xa),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:jl!==null?{id:Ls,overflow:Vs}:null,retryLane:536870912,hydrationErrors:null},p=JP(l),p.return=u,u.child=p,Mr=u,un=null)):l=null,l===null)throw Ll(u);return U_(l)?u.lanes=32:u.lanes=536870912,null}var q=y.children;return y=y.fallback,E?(ql(),E=u.mode,q=N0({mode:"hidden",children:q},E),y=du(y,E,p,null),q.return=u,y.return=u,q.sibling=y,u.child=q,y=u.child,y.memoizedState=i_(p),y.childLanes=a_(l,V,p),u.memoizedState=r_,jp(null,y)):($l(u),s_(u,q))}var ie=l.memoizedState;if(ie!==null&&(q=ie.dehydrated,q!==null)){if(k)u.flags&256?($l(u),u.flags&=-257,u=o_(l,u,p)):u.memoizedState!==null?(ql(),u.child=l.child,u.flags|=128,u=null):(ql(),q=y.fallback,E=u.mode,y=N0({mode:"visible",children:y.children},E),q=du(q,E,p,null),q.flags|=2,y.return=u,q.return=u,y.sibling=q,u.child=y,yu(u,l.child,null,p),y=u.child,y.memoizedState=i_(p),y.childLanes=a_(l,V,p),u.memoizedState=r_,u=jp(null,y));else if($l(u),U_(q)){if(V=q.nextSibling&&q.nextSibling.dataset,V)var pe=V.dgst;V=pe,y=Error(r(419)),y.stack="",y.digest=V,Ep({value:y,source:null,stack:null}),u=o_(l,u,p)}else if(Qn||Kd(l,u,p,!1),V=(p&l.childLanes)!==0,Qn||V){if(V=Jt,V!==null&&(y=rp(V,p),y!==0&&y!==ie.retryLane))throw ie.retryLane=y,uu(l,y),Ii(V,l,y),t_;B_(q)||L0(),u=o_(l,u,p)}else B_(q)?(u.flags|=192,u.child=l.child,u=null):(l=ie.treeContext,un=Sa(q.nextSibling),Mr=u,At=!0,zl=null,xa=!1,l!==null&&nD(u,l),u=s_(u,y.children),u.flags|=4096);return u}return E?(ql(),q=y.fallback,E=u.mode,ie=l.child,pe=ie.sibling,y=_o(ie,{mode:"hidden",children:y.children}),y.subtreeFlags=ie.subtreeFlags&65011712,pe!==null?q=_o(pe,q):(q=du(q,E,p,null),q.flags|=2),q.return=u,y.return=u,y.sibling=q,u.child=y,jp(null,y),y=u.child,q=l.child.memoizedState,q===null?q=i_(p):(E=q.cachePool,E!==null?(ie=Kn._currentValue,E=E.parent!==ie?{parent:ie,pool:ie}:E):E=lD(),q={baseLanes:q.baseLanes|p,cachePool:E}),y.memoizedState=q,y.childLanes=a_(l,V,p),u.memoizedState=r_,jp(l.child,y)):($l(u),p=l.child,l=p.sibling,p=_o(p,{mode:"visible",children:y.children}),p.return=u,p.sibling=null,l!==null&&(V=u.deletions,V===null?(u.deletions=[l],u.flags|=16):V.push(l)),u.child=p,u.memoizedState=null,p)}function s_(l,u){return u=N0({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function N0(l,u){return l=Hi(22,l,null,u),l.lanes=0,l}function o_(l,u,p){return yu(u,l.child,null,p),l=s_(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function wR(l,u,p){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),SS(l.return,u,p)}function l_(l,u,p,y,E,k){var V=l.memoizedState;V===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E,treeForkCount:k}:(V.isBackwards=u,V.rendering=null,V.renderingStartTime=0,V.last=y,V.tail=p,V.tailMode=E,V.treeForkCount=k)}function SR(l,u,p){var y=u.pendingProps,E=y.revealOrder,k=y.tail;y=y.children;var V=Bn.current,q=(V&2)!==0;if(q?(V=V&1|2,u.flags|=128):V&=1,te(Bn,V),zr(l,u,y,p),y=At?_p:0,!q&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&wR(l,p,u);else if(l.tag===19)wR(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(E){case"forwards":for(p=u.child,E=null;p!==null;)l=p.alternate,l!==null&&v0(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=u.child,u.child=null):(E=p.sibling,p.sibling=null),l_(u,!1,E,p,k,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,E=u.child,u.child=null;E!==null;){if(l=E.alternate,l!==null&&v0(l)===null){u.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}l_(u,!0,p,null,k,y);break;case"together":l_(u,!1,null,null,void 0,y);break;default:u.memoizedState=null}return u.child}function No(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),Wl|=u.lanes,(p&u.childLanes)===0)if(l!==null){if(Kd(l,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,p=_o(l,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,p=p.sibling=_o(l,l.pendingProps),p.return=u;p.sibling=null}return u.child}function c_(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&c0(l)))}function VX(l,u,p){switch(u.tag){case 3:we(u,u.stateNode.containerInfo),Vl(u,Kn,l.memoizedState.cache),fu();break;case 27:case 5:Ee(u);break;case 4:we(u,u.stateNode.containerInfo);break;case 10:Vl(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,RS(u),null;break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?($l(u),u.flags|=128,null):(p&u.child.childLanes)!==0?xR(l,u,p):($l(u),l=No(l,u,p),l!==null?l.sibling:null);$l(u);break;case 19:var E=(l.flags&128)!==0;if(y=(p&u.childLanes)!==0,y||(Kd(l,u,p,!1),y=(p&u.childLanes)!==0),E){if(y)return SR(l,u,p);u.flags|=128}if(E=u.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),te(Bn,Bn.current),y)break;return null;case 22:return u.lanes=0,pR(l,u,p,u.pendingProps);case 24:Vl(u,Kn,l.memoizedState.cache)}return No(l,u,p)}function _R(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps)Qn=!0;else{if(!c_(l,p)&&(u.flags&128)===0)return Qn=!1,VX(l,u,p);Qn=(l.flags&131072)!==0}else Qn=!1,At&&(u.flags&1048576)!==0&&tD(u,_p,u.index);switch(u.lanes=0,u.tag){case 16:e:{var y=u.pendingProps;if(l=mu(u.elementType),u.type=l,typeof l=="function")pS(l)?(y=xu(l,y),u.tag=1,u=yR(null,u,l,y,p)):(u.tag=0,u=n_(null,u,l,y,p));else{if(l!=null){var E=l.$$typeof;if(E===D){u.tag=11,u=dR(null,u,l,y,p);break e}else if(E===C){u.tag=14,u=fR(null,u,l,y,p);break e}}throw u=Y(l)||l,Error(r(306,u,""))}}return u;case 0:return n_(l,u,u.type,u.pendingProps,p);case 1:return y=u.type,E=xu(y,u.pendingProps),yR(l,u,y,E,p);case 3:e:{if(we(u,u.stateNode.containerInfo),l===null)throw Error(r(387));y=u.pendingProps;var k=u.memoizedState;E=k.element,NS(l,u),Op(u,y,null,p);var V=u.memoizedState;if(y=V.cache,Vl(u,Kn,y),y!==k.cache&&_S(u,[Kn],p,!0),Ip(),y=V.element,k.isDehydrated)if(k={element:y,isDehydrated:!1,cache:V.cache},u.updateQueue.baseState=k,u.memoizedState=k,u.flags&256){u=bR(l,u,y,p);break e}else if(y!==E){E=va(Error(r(424)),u),Ep(E),u=bR(l,u,y,p);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(un=Sa(l.firstChild),Mr=u,At=!0,zl=null,xa=!0,p=pD(u,null,y,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(fu(),y===E){u=No(l,u,p);break e}zr(l,u,y,p)}u=u.child}return u;case 26:return C0(l,u),l===null?(p=RM(u.type,null,u.pendingProps,null))?u.memoizedState=p:At||(p=u.type,l=u.pendingProps,y=G0(re.current).createElement(p),y[Hn]=u,y[_r]=l,Lr(y,p,l),Wn(y),u.stateNode=y):u.memoizedState=RM(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Ee(u),l===null&&At&&(y=u.stateNode=OM(u.type,u.pendingProps,re.current),Mr=u,xa=!0,E=un,Zl(u.type)?(F_=E,un=Sa(y.firstChild)):un=E),zr(l,u,u.pendingProps.children,p),C0(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&At&&((E=y=un)&&(y=gQ(y,u.type,u.pendingProps,xa),y!==null?(u.stateNode=y,Mr=u,un=Sa(y.firstChild),xa=!1,E=!0):E=!1),E||Ll(u)),Ee(u),E=u.type,k=u.pendingProps,V=l!==null?l.memoizedProps:null,y=k.children,z_(E,k)?y=null:V!==null&&z_(E,V)&&(u.flags|=32),u.memoizedState!==null&&(E=jS(l,u,IX,null,null,p),Qp._currentValue=E),C0(l,u),zr(l,u,y,p),u.child;case 6:return l===null&&At&&((l=p=un)&&(p=mQ(p,u.pendingProps,xa),p!==null?(u.stateNode=p,Mr=u,un=null,l=!0):l=!1),l||Ll(u)),null;case 13:return xR(l,u,p);case 4:return we(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=yu(u,null,y,p):zr(l,u,y,p),u.child;case 11:return dR(l,u,u.type,u.pendingProps,p);case 7:return zr(l,u,u.pendingProps,p),u.child;case 8:return zr(l,u,u.pendingProps.children,p),u.child;case 12:return zr(l,u,u.pendingProps.children,p),u.child;case 10:return y=u.pendingProps,Vl(u,u.type,y.value),zr(l,u,y.children,p),u.child;case 9:return E=u.type._context,y=u.pendingProps.children,pu(u),E=jr(E),y=y(E),u.flags|=1,zr(l,u,y,p),u.child;case 14:return fR(l,u,u.type,u.pendingProps,p);case 15:return hR(l,u,u.type,u.pendingProps,p);case 19:return SR(l,u,p);case 31:return LX(l,u,p);case 22:return pR(l,u,p,u.pendingProps);case 24:return pu(u),y=jr(Kn),l===null?(E=AS(),E===null&&(E=Jt,k=ES(),E.pooledCache=k,k.refCount++,k!==null&&(E.pooledCacheLanes|=p),E=k),u.memoizedState={parent:y,cache:E},CS(u),Vl(u,Kn,E)):((l.lanes&p)!==0&&(NS(l,u),Op(u,null,null,p),Ip()),E=l.memoizedState,k=u.memoizedState,E.parent!==y?(E={parent:y,cache:y},u.memoizedState=E,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=E),Vl(u,Kn,y)):(y=k.cache,Vl(u,Kn,y),y!==E.cache&&_S(u,[Kn],p,!0))),zr(l,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Io(l){l.flags|=4}function u_(l,u,p,y,E){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(E&335544128)===E)if(l.stateNode.complete)l.flags|=8192;else if(XR())l.flags|=8192;else throw vu=h0,kS}else l.flags&=-16777217}function ER(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!VM(u))if(XR())l.flags|=8192;else throw vu=h0,kS}function I0(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Al():536870912,l.lanes|=u,lf|=u)}function zp(l,u){if(!At)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function dn(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(u)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=y,l.childLanes=p,u}function BX(l,u,p){var y=u.pendingProps;switch(yS(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(u),null;case 1:return dn(u),null;case 3:return p=u.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Ao(Kn),se(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Yd(u)?Io(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,xS())),dn(u),null;case 26:var E=u.type,k=u.memoizedState;return l===null?(Io(u),k!==null?(dn(u),ER(u,k)):(dn(u),u_(u,E,null,y,p))):k?k!==l.memoizedState?(Io(u),dn(u),ER(u,k)):(dn(u),u.flags&=-16777217):(l=l.memoizedProps,l!==y&&Io(u),dn(u),u_(u,E,l,y,p)),null;case 27:if(ge(u),p=re.current,E=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==y&&Io(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return dn(u),null}l=W.current,Yd(u)?rD(u):(l=OM(E,y,p),u.stateNode=l,Io(u))}return dn(u),null;case 5:if(ge(u),E=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==y&&Io(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return dn(u),null}if(k=W.current,Yd(u))rD(u);else{var V=G0(re.current);switch(k){case 1:k=V.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:k=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":k=V.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":k=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":k=V.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof y.is=="string"?V.createElement("select",{is:y.is}):V.createElement("select"),y.multiple?k.multiple=!0:y.size&&(k.size=y.size);break;default:k=typeof y.is=="string"?V.createElement(E,{is:y.is}):V.createElement(E)}}k[Hn]=u,k[_r]=y;e:for(V=u.child;V!==null;){if(V.tag===5||V.tag===6)k.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===u)break e;for(;V.sibling===null;){if(V.return===null||V.return===u)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}u.stateNode=k;e:switch(Lr(k,E,y),E){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&Io(u)}}return dn(u),u_(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,p),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==y&&Io(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(r(166));if(l=re.current,Yd(u)){if(l=u.stateNode,p=u.memoizedProps,y=null,E=Mr,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}l[Hn]=u,l=!!(l.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||xM(l.nodeValue,p)),l||Ll(u,!0)}else l=G0(l).createTextNode(y),l[Hn]=u,u.stateNode=l}return dn(u),null;case 31:if(p=u.memoizedState,l===null||l.memoizedState!==null){if(y=Yd(u),p!==null){if(l===null){if(!y)throw Error(r(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[Hn]=u}else fu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;dn(u),l=!1}else p=xS(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return u.flags&256?(Yi(u),u):(Yi(u),null);if((u.flags&128)!==0)throw Error(r(558))}return dn(u),null;case 13:if(y=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=Yd(u),y!==null&&y.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=u.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[Hn]=u}else fu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;dn(u),E=!1}else E=xS(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return u.flags&256?(Yi(u),u):(Yi(u),null)}return Yi(u),(u.flags&128)!==0?(u.lanes=p,u):(p=y!==null,l=l!==null&&l.memoizedState!==null,p&&(y=u.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool),k=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(k=y.memoizedState.cachePool.pool),k!==E&&(y.flags|=2048)),p!==l&&p&&(u.child.flags|=8192),I0(u,u.updateQueue),dn(u),null);case 4:return se(),l===null&&P_(u.stateNode.containerInfo),dn(u),null;case 10:return Ao(u.type),dn(u),null;case 19:if(Q(Bn),y=u.memoizedState,y===null)return dn(u),null;if(E=(u.flags&128)!==0,k=y.rendering,k===null)if(E)zp(y,!1);else{if(Dn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(k=v0(l),k!==null){for(u.flags|=128,zp(y,!1),l=k.updateQueue,u.updateQueue=l,I0(u,l),u.subtreeFlags=0,l=p,p=u.child;p!==null;)ZP(p,l),p=p.sibling;return te(Bn,Bn.current&1|2),At&&Eo(u,y.treeForkCount),u.child}l=l.sibling}y.tail!==null&&ht()>M0&&(u.flags|=128,E=!0,zp(y,!1),u.lanes=4194304)}else{if(!E)if(l=v0(k),l!==null){if(u.flags|=128,E=!0,l=l.updateQueue,u.updateQueue=l,I0(u,l),zp(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!At)return dn(u),null}else 2*ht()-y.renderingStartTime>M0&&p!==536870912&&(u.flags|=128,E=!0,zp(y,!1),u.lanes=4194304);y.isBackwards?(k.sibling=u.child,u.child=k):(l=y.last,l!==null?l.sibling=k:u.child=k,y.last=k)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=ht(),l.sibling=null,p=Bn.current,te(Bn,E?p&1|2:p&1),At&&Eo(u,y.treeForkCount),l):(dn(u),null);case 22:case 23:return Yi(u),DS(),y=u.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(p&536870912)!==0&&(u.flags&128)===0&&(dn(u),u.subtreeFlags&6&&(u.flags|=8192)):dn(u),p=u.updateQueue,p!==null&&I0(u,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048),l!==null&&Q(gu),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Ao(Kn),dn(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function UX(l,u){switch(yS(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Ao(Kn),se(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return ge(u),null;case 31:if(u.memoizedState!==null){if(Yi(u),u.alternate===null)throw Error(r(340));fu()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(Yi(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));fu()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Q(Bn),null;case 4:return se(),null;case 10:return Ao(u.type),null;case 22:case 23:return Yi(u),DS(),l!==null&&Q(gu),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Ao(Kn),null;case 25:return null;default:return null}}function TR(l,u){switch(yS(u),u.tag){case 3:Ao(Kn),se();break;case 26:case 27:case 5:ge(u);break;case 4:se();break;case 31:u.memoizedState!==null&&Yi(u);break;case 13:Yi(u);break;case 19:Q(Bn);break;case 10:Ao(u.type);break;case 22:case 23:Yi(u),DS(),l!==null&&Q(gu);break;case 24:Ao(Kn)}}function Lp(l,u){try{var p=u.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var E=y.next;p=E;do{if((p.tag&l)===l){y=void 0;var k=p.create,V=p.inst;y=k(),V.destroy=y}p=p.next}while(p!==E)}}catch(q){Ft(u,u.return,q)}}function Gl(l,u,p){try{var y=u.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var k=E.next;y=k;do{if((y.tag&l)===l){var V=y.inst,q=V.destroy;if(q!==void 0){V.destroy=void 0,E=u;var ie=p,pe=q;try{pe()}catch(_e){Ft(E,ie,_e)}}}y=y.next}while(y!==k)}}catch(_e){Ft(u,u.return,_e)}}function AR(l){var u=l.updateQueue;if(u!==null){var p=l.stateNode;try{mD(u,p)}catch(y){Ft(l,l.return,y)}}}function kR(l,u,p){p.props=xu(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){Ft(l,u,y)}}function Vp(l,u){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(E){Ft(l,u,E)}}function Bs(l,u){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(E){Ft(l,u,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){Ft(l,u,E)}else p.current=null}function CR(l){var u=l.type,p=l.memoizedProps,y=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(E){Ft(l,l.return,E)}}function d_(l,u,p){try{var y=l.stateNode;cQ(y,l.type,p,u),y[_r]=u}catch(E){Ft(l,l.return,E)}}function NR(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Zl(l.type)||l.tag===4}function f_(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||NR(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Zl(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function h_(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,u):(u=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,u.appendChild(l),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=Ka));else if(y!==4&&(y===27&&Zl(l.type)&&(p=l.stateNode,u=null),l=l.child,l!==null))for(h_(l,u,p),l=l.sibling;l!==null;)h_(l,u,p),l=l.sibling}function O0(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?p.insertBefore(l,u):p.appendChild(l);else if(y!==4&&(y===27&&Zl(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(O0(l,u,p),l=l.sibling;l!==null;)O0(l,u,p),l=l.sibling}function IR(l){var u=l.stateNode,p=l.memoizedProps;try{for(var y=l.type,E=u.attributes;E.length;)u.removeAttributeNode(E[0]);Lr(u,y,p),u[Hn]=l,u[_r]=p}catch(k){Ft(l,l.return,k)}}var Oo=!1,Zn=!1,p_=!1,OR=typeof WeakSet=="function"?WeakSet:Set,Tr=null;function FX(l,u){if(l=l.containerInfo,M_=Z0,l=$P(l),oS(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,k=y.focusNode;y=y.focusOffset;try{p.nodeType,k.nodeType}catch{p=null;break e}var V=0,q=-1,ie=-1,pe=0,_e=0,ke=l,ve=null;t:for(;;){for(var xe;ke!==p||E!==0&&ke.nodeType!==3||(q=V+E),ke!==k||y!==0&&ke.nodeType!==3||(ie=V+y),ke.nodeType===3&&(V+=ke.nodeValue.length),(xe=ke.firstChild)!==null;)ve=ke,ke=xe;for(;;){if(ke===l)break t;if(ve===p&&++pe===E&&(q=V),ve===k&&++_e===y&&(ie=V),(xe=ke.nextSibling)!==null)break;ke=ve,ve=ke.parentNode}ke=xe}p=q===-1||ie===-1?null:{start:q,end:ie}}else p=null}p=p||{start:0,end:0}}else p=null;for(j_={focusedElem:l,selectionRange:p},Z0=!1,Tr=u;Tr!==null;)if(u=Tr,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Tr=l;else for(;Tr!==null;){switch(u=Tr,k=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)E=l[p],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&k!==null){l=void 0,p=u,E=k.memoizedProps,k=k.memoizedState,y=p.stateNode;try{var Ue=xu(p.type,E);l=y.getSnapshotBeforeUpdate(Ue,k),y.__reactInternalSnapshotBeforeUpdate=l}catch(tt){Ft(p,p.return,tt)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,p=l.nodeType,p===9)V_(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":V_(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,Tr=l;break}Tr=u.return}}function PR(l,u,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Do(l,p),y&4&&Lp(5,p);break;case 1:if(Do(l,p),y&4)if(l=p.stateNode,u===null)try{l.componentDidMount()}catch(V){Ft(p,p.return,V)}else{var E=xu(p.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(E,u,l.__reactInternalSnapshotBeforeUpdate)}catch(V){Ft(p,p.return,V)}}y&64&&AR(p),y&512&&Vp(p,p.return);break;case 3:if(Do(l,p),y&64&&(l=p.updateQueue,l!==null)){if(u=null,p.child!==null)switch(p.child.tag){case 27:case 5:u=p.child.stateNode;break;case 1:u=p.child.stateNode}try{mD(l,u)}catch(V){Ft(p,p.return,V)}}break;case 27:u===null&&y&4&&IR(p);case 26:case 5:Do(l,p),u===null&&y&4&&CR(p),y&512&&Vp(p,p.return);break;case 12:Do(l,p);break;case 31:Do(l,p),y&4&&MR(l,p);break;case 13:Do(l,p),y&4&&jR(l,p),y&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=QX.bind(null,p),vQ(l,p))));break;case 22:if(y=p.memoizedState!==null||Oo,!y){u=u!==null&&u.memoizedState!==null||Zn,E=Oo;var k=Zn;Oo=y,(Zn=u)&&!k?Ro(l,p,(p.subtreeFlags&8772)!==0):Do(l,p),Oo=E,Zn=k}break;case 30:break;default:Do(l,p)}}function DR(l){var u=l.alternate;u!==null&&(l.alternate=null,DR(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Od(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var vn=null,Ai=!1;function Po(l,u,p){for(p=p.child;p!==null;)RR(l,u,p),p=p.sibling}function RR(l,u,p){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(sn,p)}catch{}switch(p.tag){case 26:Zn||Bs(p,u),Po(l,u,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Zn||Bs(p,u);var y=vn,E=Ai;Zl(p.type)&&(vn=p.stateNode,Ai=!1),Po(l,u,p),Yp(p.stateNode),vn=y,Ai=E;break;case 5:Zn||Bs(p,u);case 6:if(y=vn,E=Ai,vn=null,Po(l,u,p),vn=y,Ai=E,vn!==null)if(Ai)try{(vn.nodeType===9?vn.body:vn.nodeName==="HTML"?vn.ownerDocument.body:vn).removeChild(p.stateNode)}catch(k){Ft(p,u,k)}else try{vn.removeChild(p.stateNode)}catch(k){Ft(p,u,k)}break;case 18:vn!==null&&(Ai?(l=vn,AM(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),mf(l)):AM(vn,p.stateNode));break;case 4:y=vn,E=Ai,vn=p.stateNode.containerInfo,Ai=!0,Po(l,u,p),vn=y,Ai=E;break;case 0:case 11:case 14:case 15:Gl(2,p,u),Zn||Gl(4,p,u),Po(l,u,p);break;case 1:Zn||(Bs(p,u),y=p.stateNode,typeof y.componentWillUnmount=="function"&&kR(p,u,y)),Po(l,u,p);break;case 21:Po(l,u,p);break;case 22:Zn=(y=Zn)||p.memoizedState!==null,Po(l,u,p),Zn=y;break;default:Po(l,u,p)}}function MR(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{mf(l)}catch(p){Ft(u,u.return,p)}}}function jR(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{mf(l)}catch(p){Ft(u,u.return,p)}}function $X(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new OR),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new OR),u;default:throw Error(r(435,l.tag))}}function P0(l,u){var p=$X(l);u.forEach(function(y){if(!p.has(y)){p.add(y);var E=ZX.bind(null,l,y);y.then(E,E)}})}function ki(l,u){var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y],k=l,V=u,q=V;e:for(;q!==null;){switch(q.tag){case 27:if(Zl(q.type)){vn=q.stateNode,Ai=!1;break e}break;case 5:vn=q.stateNode,Ai=!1;break e;case 3:case 4:vn=q.stateNode.containerInfo,Ai=!0;break e}q=q.return}if(vn===null)throw Error(r(160));RR(k,V,E),vn=null,Ai=!1,k=E.alternate,k!==null&&(k.return=null),E.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)zR(u,l),u=u.sibling}var ts=null;function zR(l,u){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:ki(u,l),Ci(l),y&4&&(Gl(3,l,l.return),Lp(3,l),Gl(5,l,l.return));break;case 1:ki(u,l),Ci(l),y&512&&(Zn||p===null||Bs(p,p.return)),y&64&&Oo&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var E=ts;if(ki(u,l),Ci(l),y&512&&(Zn||p===null||Bs(p,p.return)),y&4){var k=p!==null?p.memoizedState:null;if(y=l.memoizedState,p===null)if(y===null)if(l.stateNode===null){e:{y=l.type,p=l.memoizedProps,E=E.ownerDocument||E;t:switch(y){case"title":k=E.getElementsByTagName("title")[0],(!k||k[As]||k[Hn]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=E.createElement(y),E.head.insertBefore(k,E.querySelector("head > title"))),Lr(k,y,p),k[Hn]=l,Wn(k),y=k;break e;case"link":var V=zM("link","href",E).get(y+(p.href||""));if(V){for(var q=0;q<V.length;q++)if(k=V[q],k.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&k.getAttribute("rel")===(p.rel==null?null:p.rel)&&k.getAttribute("title")===(p.title==null?null:p.title)&&k.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){V.splice(q,1);break t}}k=E.createElement(y),Lr(k,y,p),E.head.appendChild(k);break;case"meta":if(V=zM("meta","content",E).get(y+(p.content||""))){for(q=0;q<V.length;q++)if(k=V[q],k.getAttribute("content")===(p.content==null?null:""+p.content)&&k.getAttribute("name")===(p.name==null?null:p.name)&&k.getAttribute("property")===(p.property==null?null:p.property)&&k.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&k.getAttribute("charset")===(p.charSet==null?null:p.charSet)){V.splice(q,1);break t}}k=E.createElement(y),Lr(k,y,p),E.head.appendChild(k);break;default:throw Error(r(468,y))}k[Hn]=l,Wn(k),y=k}l.stateNode=y}else LM(E,l.type,l.stateNode);else l.stateNode=jM(E,y,l.memoizedProps);else k!==y?(k===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):k.count--,y===null?LM(E,l.type,l.stateNode):jM(E,y,l.memoizedProps)):y===null&&l.stateNode!==null&&d_(l,l.memoizedProps,p.memoizedProps)}break;case 27:ki(u,l),Ci(l),y&512&&(Zn||p===null||Bs(p,p.return)),p!==null&&y&4&&d_(l,l.memoizedProps,p.memoizedProps);break;case 5:if(ki(u,l),Ci(l),y&512&&(Zn||p===null||Bs(p,p.return)),l.flags&32){E=l.stateNode;try{Ti(E,"")}catch(Ue){Ft(l,l.return,Ue)}}y&4&&l.stateNode!=null&&(E=l.memoizedProps,d_(l,E,p!==null?p.memoizedProps:E)),y&1024&&(p_=!0);break;case 6:if(ki(u,l),Ci(l),y&4){if(l.stateNode===null)throw Error(r(162));y=l.memoizedProps,p=l.stateNode;try{p.nodeValue=y}catch(Ue){Ft(l,l.return,Ue)}}break;case 3:if(Y0=null,E=ts,ts=H0(u.containerInfo),ki(u,l),ts=E,Ci(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{mf(u.containerInfo)}catch(Ue){Ft(l,l.return,Ue)}p_&&(p_=!1,LR(l));break;case 4:y=ts,ts=H0(l.stateNode.containerInfo),ki(u,l),Ci(l),ts=y;break;case 12:ki(u,l),Ci(l);break;case 31:ki(u,l),Ci(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,P0(l,y)));break;case 13:ki(u,l),Ci(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(R0=ht()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,P0(l,y)));break;case 22:E=l.memoizedState!==null;var ie=p!==null&&p.memoizedState!==null,pe=Oo,_e=Zn;if(Oo=pe||E,Zn=_e||ie,ki(u,l),Zn=_e,Oo=pe,Ci(l),y&8192)e:for(u=l.stateNode,u._visibility=E?u._visibility&-2:u._visibility|1,E&&(p===null||ie||Oo||Zn||wu(l)),p=null,u=l;;){if(u.tag===5||u.tag===26){if(p===null){ie=p=u;try{if(k=ie.stateNode,E)V=k.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{q=ie.stateNode;var ke=ie.memoizedProps.style,ve=ke!=null&&ke.hasOwnProperty("display")?ke.display:null;q.style.display=ve==null||typeof ve=="boolean"?"":(""+ve).trim()}}catch(Ue){Ft(ie,ie.return,Ue)}}}else if(u.tag===6){if(p===null){ie=u;try{ie.stateNode.nodeValue=E?"":ie.memoizedProps}catch(Ue){Ft(ie,ie.return,Ue)}}}else if(u.tag===18){if(p===null){ie=u;try{var xe=ie.stateNode;E?kM(xe,!0):kM(ie.stateNode,!1)}catch(Ue){Ft(ie,ie.return,Ue)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,P0(l,p))));break;case 19:ki(u,l),Ci(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,P0(l,y)));break;case 30:break;case 21:break;default:ki(u,l),Ci(l)}}function Ci(l){var u=l.flags;if(u&2){try{for(var p,y=l.return;y!==null;){if(NR(y)){p=y;break}y=y.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var E=p.stateNode,k=f_(l);O0(l,k,E);break;case 5:var V=p.stateNode;p.flags&32&&(Ti(V,""),p.flags&=-33);var q=f_(l);O0(l,q,V);break;case 3:case 4:var ie=p.stateNode.containerInfo,pe=f_(l);h_(l,pe,ie);break;default:throw Error(r(161))}}catch(_e){Ft(l,l.return,_e)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function LR(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;LR(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Do(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)PR(l,u.alternate,u),u=u.sibling}function wu(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Gl(4,u,u.return),wu(u);break;case 1:Bs(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&kR(u,u.return,p),wu(u);break;case 27:Yp(u.stateNode);case 26:case 5:Bs(u,u.return),wu(u);break;case 22:u.memoizedState===null&&wu(u);break;case 30:wu(u);break;default:wu(u)}l=l.sibling}}function Ro(l,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,E=l,k=u,V=k.flags;switch(k.tag){case 0:case 11:case 15:Ro(E,k,p),Lp(4,k);break;case 1:if(Ro(E,k,p),y=k,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(pe){Ft(y,y.return,pe)}if(y=k,E=y.updateQueue,E!==null){var q=y.stateNode;try{var ie=E.shared.hiddenCallbacks;if(ie!==null)for(E.shared.hiddenCallbacks=null,E=0;E<ie.length;E++)gD(ie[E],q)}catch(pe){Ft(y,y.return,pe)}}p&&V&64&&AR(k),Vp(k,k.return);break;case 27:IR(k);case 26:case 5:Ro(E,k,p),p&&y===null&&V&4&&CR(k),Vp(k,k.return);break;case 12:Ro(E,k,p);break;case 31:Ro(E,k,p),p&&V&4&&MR(E,k);break;case 13:Ro(E,k,p),p&&V&4&&jR(E,k);break;case 22:k.memoizedState===null&&Ro(E,k,p),Vp(k,k.return);break;case 30:break;default:Ro(E,k,p)}u=u.sibling}}function g_(l,u){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Tp(p))}function m_(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Tp(l))}function ns(l,u,p,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)VR(l,u,p,y),u=u.sibling}function VR(l,u,p,y){var E=u.flags;switch(u.tag){case 0:case 11:case 15:ns(l,u,p,y),E&2048&&Lp(9,u);break;case 1:ns(l,u,p,y);break;case 3:ns(l,u,p,y),E&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Tp(l)));break;case 12:if(E&2048){ns(l,u,p,y),l=u.stateNode;try{var k=u.memoizedProps,V=k.id,q=k.onPostCommit;typeof q=="function"&&q(V,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ie){Ft(u,u.return,ie)}}else ns(l,u,p,y);break;case 31:ns(l,u,p,y);break;case 13:ns(l,u,p,y);break;case 23:break;case 22:k=u.stateNode,V=u.alternate,u.memoizedState!==null?k._visibility&2?ns(l,u,p,y):Bp(l,u):k._visibility&2?ns(l,u,p,y):(k._visibility|=2,af(l,u,p,y,(u.subtreeFlags&10256)!==0||!1)),E&2048&&g_(V,u);break;case 24:ns(l,u,p,y),E&2048&&m_(u.alternate,u);break;default:ns(l,u,p,y)}}function af(l,u,p,y,E){for(E=E&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var k=l,V=u,q=p,ie=y,pe=V.flags;switch(V.tag){case 0:case 11:case 15:af(k,V,q,ie,E),Lp(8,V);break;case 23:break;case 22:var _e=V.stateNode;V.memoizedState!==null?_e._visibility&2?af(k,V,q,ie,E):Bp(k,V):(_e._visibility|=2,af(k,V,q,ie,E)),E&&pe&2048&&g_(V.alternate,V);break;case 24:af(k,V,q,ie,E),E&&pe&2048&&m_(V.alternate,V);break;default:af(k,V,q,ie,E)}u=u.sibling}}function Bp(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=l,y=u,E=y.flags;switch(y.tag){case 22:Bp(p,y),E&2048&&g_(y.alternate,y);break;case 24:Bp(p,y),E&2048&&m_(y.alternate,y);break;default:Bp(p,y)}u=u.sibling}}var Up=8192;function sf(l,u,p){if(l.subtreeFlags&Up)for(l=l.child;l!==null;)BR(l,u,p),l=l.sibling}function BR(l,u,p){switch(l.tag){case 26:sf(l,u,p),l.flags&Up&&l.memoizedState!==null&&NQ(p,ts,l.memoizedState,l.memoizedProps);break;case 5:sf(l,u,p);break;case 3:case 4:var y=ts;ts=H0(l.stateNode.containerInfo),sf(l,u,p),ts=y;break;case 22:l.memoizedState===null&&(y=l.alternate,y!==null&&y.memoizedState!==null?(y=Up,Up=16777216,sf(l,u,p),Up=y):sf(l,u,p));break;default:sf(l,u,p)}}function UR(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Fp(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];Tr=y,$R(y,l)}UR(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)FR(l),l=l.sibling}function FR(l){switch(l.tag){case 0:case 11:case 15:Fp(l),l.flags&2048&&Gl(9,l,l.return);break;case 3:Fp(l);break;case 12:Fp(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,D0(l)):Fp(l);break;default:Fp(l)}}function D0(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];Tr=y,$R(y,l)}UR(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Gl(8,u,u.return),D0(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,D0(u));break;default:D0(u)}l=l.sibling}}function $R(l,u){for(;Tr!==null;){var p=Tr;switch(p.tag){case 0:case 11:case 15:Gl(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Tp(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Tr=y;else e:for(p=l;Tr!==null;){y=Tr;var E=y.sibling,k=y.return;if(DR(y),y===p){Tr=null;break e}if(E!==null){E.return=k,Tr=E;break e}Tr=k}}}var qX={getCacheForType:function(l){var u=jr(Kn),p=u.data.get(l);return p===void 0&&(p=l(),u.data.set(l,p)),p},cacheSignal:function(){return jr(Kn).controller.signal}},GX=typeof WeakMap=="function"?WeakMap:Map,Mt=0,Jt=null,vt=null,wt=0,Ut=0,Ki=null,Hl=!1,of=!1,v_=!1,Mo=0,Dn=0,Wl=0,Su=0,y_=0,Xi=0,lf=0,$p=null,Ni=null,b_=!1,R0=0,qR=0,M0=1/0,j0=null,Yl=null,dr=0,Kl=null,cf=null,jo=0,x_=0,w_=null,GR=null,qp=0,S_=null;function Qi(){return(Mt&2)!==0&&wt!==0?wt&-wt:G.T!==null?C_():zv()}function HR(){if(Xi===0)if((wt&536870912)===0||At){var l=cn;cn<<=1,(cn&3932160)===0&&(cn=262144),Xi=l}else Xi=536870912;return l=Wi.current,l!==null&&(l.flags|=32),Xi}function Ii(l,u,p){(l===Jt&&(Ut===2||Ut===9)||l.cancelPendingCommit!==null)&&(uf(l,0),Xl(l,wt,Xi,!1)),Xc(l,p),((Mt&2)===0||l!==Jt)&&(l===Jt&&((Mt&2)===0&&(Su|=p),Dn===4&&Xl(l,wt,Xi,!1)),Us(l))}function WR(l,u,p){if((Mt&6)!==0)throw Error(r(327));var y=!p&&(u&127)===0&&(u&l.expiredLanes)===0||En(l,u),E=y?YX(l,u):E_(l,u,!0),k=y;do{if(E===0){of&&!y&&Xl(l,u,0,!1);break}else{if(p=l.current.alternate,k&&!HX(p)){E=E_(l,u,!1),k=!1;continue}if(E===2){if(k=u,l.errorRecoveryDisabledLanes&k)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){u=V;e:{var q=l;E=$p;var ie=q.current.memoizedState.isDehydrated;if(ie&&(uf(q,V).flags|=256),V=E_(q,V,!1),V!==2){if(v_&&!ie){q.errorRecoveryDisabledLanes|=k,Su|=k,E=4;break e}k=Ni,Ni=E,k!==null&&(Ni===null?Ni=k:Ni.push.apply(Ni,k))}E=V}if(k=!1,E!==2)continue}}if(E===1){uf(l,0),Xl(l,u,0,!0);break}e:{switch(y=l,k=E,k){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Xl(y,u,Xi,!Hl);break e;case 2:Ni=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(E=R0+300-ht(),10<E)){if(Xl(y,u,Xi,!Hl),Qr(y,0,!0)!==0)break e;jo=u,y.timeoutHandle=EM(YR.bind(null,y,p,Ni,j0,b_,u,Xi,Su,lf,Hl,k,"Throttled",-0,0),E);break e}YR(y,p,Ni,j0,b_,u,Xi,Su,lf,Hl,k,null,-0,0)}}break}while(!0);Us(l)}function YR(l,u,p,y,E,k,V,q,ie,pe,_e,ke,ve,xe){if(l.timeoutHandle=-1,ke=u.subtreeFlags,ke&8192||(ke&16785408)===16785408){ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ka},BR(u,k,ke);var Ue=(k&62914560)===k?R0-ht():(k&4194048)===k?qR-ht():0;if(Ue=IQ(ke,Ue),Ue!==null){jo=k,l.cancelPendingCommit=Ue(nM.bind(null,l,u,k,p,y,E,V,q,ie,_e,ke,null,ve,xe)),Xl(l,k,V,!pe);return}}nM(l,u,k,p,y,E,V,q,ie)}function HX(l){for(var u=l;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var E=p[y],k=E.getSnapshot;E=E.value;try{if(!Gi(k(),E))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Xl(l,u,p,y){u&=~y_,u&=~Su,l.suspendedLanes|=u,l.pingedLanes&=~u,y&&(l.warmLanes|=u),y=l.expirationTimes;for(var E=u;0<E;){var k=31-et(E),V=1<<k;y[k]=-1,E&=~V}p!==0&&Qc(l,p,u)}function z0(){return(Mt&6)===0?(Gp(0),!1):!0}function __(){if(vt!==null){if(Ut===0)var l=vt.return;else l=vt,To=hu=null,VS(l),Jd=null,kp=0,l=vt;for(;l!==null;)TR(l.alternate,l),l=l.return;vt=null}}function uf(l,u){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,fQ(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),jo=0,__(),Jt=l,vt=p=_o(l.current,null),wt=u,Ut=0,Ki=null,Hl=!1,of=En(l,u),v_=!1,lf=Xi=y_=Su=Wl=Dn=0,Ni=$p=null,b_=!1,(u&8)!==0&&(u|=u&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=u;0<y;){var E=31-et(y),k=1<<E;u|=l[E],y&=~k}return Mo=u,i0(),p}function KR(l,u){ut=null,G.H=Mp,u===Zd||u===f0?(u=dD(),Ut=3):u===kS?(u=dD(),Ut=4):Ut=u===t_?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ki=u,vt===null&&(Dn=1,A0(l,va(u,l.current)))}function XR(){var l=Wi.current;return l===null?!0:(wt&4194048)===wt?wa===null:(wt&62914560)===wt||(wt&536870912)!==0?l===wa:!1}function QR(){var l=G.H;return G.H=Mp,l===null?Mp:l}function ZR(){var l=G.A;return G.A=qX,l}function L0(){Dn=4,Hl||(wt&4194048)!==wt&&Wi.current!==null||(of=!0),(Wl&134217727)===0&&(Su&134217727)===0||Jt===null||Xl(Jt,wt,Xi,!1)}function E_(l,u,p){var y=Mt;Mt|=2;var E=QR(),k=ZR();(Jt!==l||wt!==u)&&(j0=null,uf(l,u)),u=!1;var V=Dn;e:do try{if(Ut!==0&&vt!==null){var q=vt,ie=Ki;switch(Ut){case 8:__(),V=6;break e;case 3:case 2:case 9:case 6:Wi.current===null&&(u=!0);var pe=Ut;if(Ut=0,Ki=null,df(l,q,ie,pe),p&&of){V=0;break e}break;default:pe=Ut,Ut=0,Ki=null,df(l,q,ie,pe)}}WX(),V=Dn;break}catch(_e){KR(l,_e)}while(!0);return u&&l.shellSuspendCounter++,To=hu=null,Mt=y,G.H=E,G.A=k,vt===null&&(Jt=null,wt=0,i0()),V}function WX(){for(;vt!==null;)JR(vt)}function YX(l,u){var p=Mt;Mt|=2;var y=QR(),E=ZR();Jt!==l||wt!==u?(j0=null,M0=ht()+500,uf(l,u)):of=En(l,u);e:do try{if(Ut!==0&&vt!==null){u=vt;var k=Ki;t:switch(Ut){case 1:Ut=0,Ki=null,df(l,u,k,1);break;case 2:case 9:if(cD(k)){Ut=0,Ki=null,eM(u);break}u=function(){Ut!==2&&Ut!==9||Jt!==l||(Ut=7),Us(l)},k.then(u,u);break e;case 3:Ut=7;break e;case 4:Ut=5;break e;case 7:cD(k)?(Ut=0,Ki=null,eM(u)):(Ut=0,Ki=null,df(l,u,k,7));break;case 5:var V=null;switch(vt.tag){case 26:V=vt.memoizedState;case 5:case 27:var q=vt;if(V?VM(V):q.stateNode.complete){Ut=0,Ki=null;var ie=q.sibling;if(ie!==null)vt=ie;else{var pe=q.return;pe!==null?(vt=pe,V0(pe)):vt=null}break t}}Ut=0,Ki=null,df(l,u,k,5);break;case 6:Ut=0,Ki=null,df(l,u,k,6);break;case 8:__(),Dn=6;break e;default:throw Error(r(462))}}KX();break}catch(_e){KR(l,_e)}while(!0);return To=hu=null,G.H=y,G.A=E,Mt=p,vt!==null?0:(Jt=null,wt=0,i0(),Dn)}function KX(){for(;vt!==null&&!Ln();)JR(vt)}function JR(l){var u=_R(l.alternate,l,Mo);l.memoizedProps=l.pendingProps,u===null?V0(l):vt=u}function eM(l){var u=l,p=u.alternate;switch(u.tag){case 15:case 0:u=vR(p,u,u.pendingProps,u.type,void 0,wt);break;case 11:u=vR(p,u,u.pendingProps,u.type.render,u.ref,wt);break;case 5:VS(u);default:TR(p,u),u=vt=ZP(u,Mo),u=_R(p,u,Mo)}l.memoizedProps=l.pendingProps,u===null?V0(l):vt=u}function df(l,u,p,y){To=hu=null,VS(u),Jd=null,kp=0;var E=u.return;try{if(zX(l,E,u,p,wt)){Dn=1,A0(l,va(p,l.current)),vt=null;return}}catch(k){if(E!==null)throw vt=E,k;Dn=1,A0(l,va(p,l.current)),vt=null;return}u.flags&32768?(At||y===1?l=!0:of||(wt&536870912)!==0?l=!1:(Hl=l=!0,(y===2||y===9||y===3||y===6)&&(y=Wi.current,y!==null&&y.tag===13&&(y.flags|=16384))),tM(u,l)):V0(u)}function V0(l){var u=l;do{if((u.flags&32768)!==0){tM(u,Hl);return}l=u.return;var p=BX(u.alternate,u,Mo);if(p!==null){vt=p;return}if(u=u.sibling,u!==null){vt=u;return}vt=u=l}while(u!==null);Dn===0&&(Dn=5)}function tM(l,u){do{var p=UX(l.alternate,l);if(p!==null){p.flags&=32767,vt=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(l=l.sibling,l!==null)){vt=l;return}vt=l=p}while(l!==null);Dn=6,vt=null}function nM(l,u,p,y,E,k,V,q,ie){l.cancelPendingCommit=null;do B0();while(dr!==0);if((Mt&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(k=u.lanes|u.childLanes,k|=fS,rS(l,p,k,V,q,ie),l===Jt&&(vt=Jt=null,wt=0),cf=u,Kl=l,jo=p,x_=k,w_=E,GR=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,JX(Me,function(){return oM(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=G.T,G.T=null,E=K.p,K.p=2,V=Mt,Mt|=4;try{FX(l,u,p)}finally{Mt=V,K.p=E,G.T=y}}dr=1,rM(),iM(),aM()}}function rM(){if(dr===1){dr=0;var l=Kl,u=cf,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=G.T,G.T=null;var y=K.p;K.p=2;var E=Mt;Mt|=4;try{zR(u,l);var k=j_,V=$P(l.containerInfo),q=k.focusedElem,ie=k.selectionRange;if(V!==q&&q&&q.ownerDocument&&FP(q.ownerDocument.documentElement,q)){if(ie!==null&&oS(q)){var pe=ie.start,_e=ie.end;if(_e===void 0&&(_e=pe),"selectionStart"in q)q.selectionStart=pe,q.selectionEnd=Math.min(_e,q.value.length);else{var ke=q.ownerDocument||document,ve=ke&&ke.defaultView||window;if(ve.getSelection){var xe=ve.getSelection(),Ue=q.textContent.length,tt=Math.min(ie.start,Ue),Yt=ie.end===void 0?tt:Math.min(ie.end,Ue);!xe.extend&&tt>Yt&&(V=Yt,Yt=tt,tt=V);var de=UP(q,tt),ce=UP(q,Yt);if(de&&ce&&(xe.rangeCount!==1||xe.anchorNode!==de.node||xe.anchorOffset!==de.offset||xe.focusNode!==ce.node||xe.focusOffset!==ce.offset)){var he=ke.createRange();he.setStart(de.node,de.offset),xe.removeAllRanges(),tt>Yt?(xe.addRange(he),xe.extend(ce.node,ce.offset)):(he.setEnd(ce.node,ce.offset),xe.addRange(he))}}}}for(ke=[],xe=q;xe=xe.parentNode;)xe.nodeType===1&&ke.push({element:xe,left:xe.scrollLeft,top:xe.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<ke.length;q++){var Te=ke[q];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Z0=!!M_,j_=M_=null}finally{Mt=E,K.p=y,G.T=p}}l.current=u,dr=2}}function iM(){if(dr===2){dr=0;var l=Kl,u=cf,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=G.T,G.T=null;var y=K.p;K.p=2;var E=Mt;Mt|=4;try{PR(l,u.alternate,u)}finally{Mt=E,K.p=y,G.T=p}}dr=3}}function aM(){if(dr===4||dr===3){dr=0,Sn();var l=Kl,u=cf,p=jo,y=GR;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?dr=5:(dr=0,cf=Kl=null,sM(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(Yl=null),bo(p),u=u.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(sn,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=G.T,E=K.p,K.p=2,G.T=null;try{for(var k=l.onRecoverableError,V=0;V<y.length;V++){var q=y[V];k(q.value,{componentStack:q.stack})}}finally{G.T=u,K.p=E}}(jo&3)!==0&&B0(),Us(l),E=l.pendingLanes,(p&261930)!==0&&(E&42)!==0?l===S_?qp++:(qp=0,S_=l):qp=0,Gp(0)}}function sM(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Tp(u)))}function B0(){return rM(),iM(),aM(),oM()}function oM(){if(dr!==5)return!1;var l=Kl,u=x_;x_=0;var p=bo(jo),y=G.T,E=K.p;try{K.p=32>p?32:p,G.T=null,p=w_,w_=null;var k=Kl,V=jo;if(dr=0,cf=Kl=null,jo=0,(Mt&6)!==0)throw Error(r(331));var q=Mt;if(Mt|=4,FR(k.current),VR(k,k.current,V,p),Mt=q,Gp(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(sn,k)}catch{}return!0}finally{K.p=E,G.T=y,sM(l,u)}}function lM(l,u,p){u=va(p,u),u=e_(l.stateNode,u,2),l=Fl(l,u,2),l!==null&&(Xc(l,2),Us(l))}function Ft(l,u,p){if(l.tag===3)lM(l,l,p);else for(;u!==null;){if(u.tag===3){lM(u,l,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Yl===null||!Yl.has(y))){l=va(p,l),p=cR(2),y=Fl(u,p,2),y!==null&&(uR(p,y,u,l),Xc(y,2),Us(y));break}}u=u.return}}function T_(l,u,p){var y=l.pingCache;if(y===null){y=l.pingCache=new GX;var E=new Set;y.set(u,E)}else E=y.get(u),E===void 0&&(E=new Set,y.set(u,E));E.has(p)||(v_=!0,E.add(p),l=XX.bind(null,l,u,p),u.then(l,l))}function XX(l,u,p){var y=l.pingCache;y!==null&&y.delete(u),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Jt===l&&(wt&p)===p&&(Dn===4||Dn===3&&(wt&62914560)===wt&&300>ht()-R0?(Mt&2)===0&&uf(l,0):y_|=p,lf===wt&&(lf=0)),Us(l)}function cM(l,u){u===0&&(u=Al()),l=uu(l,u),l!==null&&(Xc(l,u),Us(l))}function QX(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),cM(l,p)}function ZX(l,u){var p=0;switch(l.tag){case 31:case 13:var y=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(u),cM(l,p)}function JX(l,u){return Je(l,u)}var U0=null,ff=null,A_=!1,F0=!1,k_=!1,Ql=0;function Us(l){l!==ff&&l.next===null&&(ff===null?U0=ff=l:ff=ff.next=l),F0=!0,A_||(A_=!0,tQ())}function Gp(l,u){if(!k_&&F0){k_=!0;do for(var p=!1,y=U0;y!==null;){if(l!==0){var E=y.pendingLanes;if(E===0)var k=0;else{var V=y.suspendedLanes,q=y.pingedLanes;k=(1<<31-et(42|l)+1)-1,k&=E&~(V&~q),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(p=!0,hM(y,k))}else k=wt,k=Qr(y,y===Jt?k:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(k&3)===0||En(y,k)||(p=!0,hM(y,k));y=y.next}while(p);k_=!1}}function eQ(){uM()}function uM(){F0=A_=!1;var l=0;Ql!==0&&dQ()&&(l=Ql);for(var u=ht(),p=null,y=U0;y!==null;){var E=y.next,k=dM(y,u);k===0?(y.next=null,p===null?U0=E:p.next=E,E===null&&(ff=p)):(p=y,(l!==0||(k&3)!==0)&&(F0=!0)),y=E}dr!==0&&dr!==5||Gp(l),Ql!==0&&(Ql=0)}function dM(l,u){for(var p=l.suspendedLanes,y=l.pingedLanes,E=l.expirationTimes,k=l.pendingLanes&-62914561;0<k;){var V=31-et(k),q=1<<V,ie=E[V];ie===-1?((q&p)===0||(q&y)!==0)&&(E[V]=Ha(q,u)):ie<=u&&(l.expiredLanes|=q),k&=~q}if(u=Jt,p=wt,p=Qr(l,l===u?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,p===0||l===u&&(Ut===2||Ut===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&Lt(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||En(l,p)){if(u=p&-p,u===l.callbackPriority)return u;switch(y!==null&&Lt(y),bo(p)){case 2:case 8:p=Kr;break;case 32:p=Me;break;case 268435456:p=Sr;break;default:p=Me}return y=fM.bind(null,l),p=Je(p,y),l.callbackPriority=u,l.callbackNode=p,u}return y!==null&&y!==null&&Lt(y),l.callbackPriority=2,l.callbackNode=null,2}function fM(l,u){if(dr!==0&&dr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(B0()&&l.callbackNode!==p)return null;var y=wt;return y=Qr(l,l===Jt?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(WR(l,y,u),dM(l,ht()),l.callbackNode!=null&&l.callbackNode===p?fM.bind(null,l):null)}function hM(l,u){if(B0())return null;WR(l,u,!0)}function tQ(){hQ(function(){(Mt&6)!==0?Je(Yr,eQ):uM()})}function C_(){if(Ql===0){var l=Xd;l===0&&(l=lt,lt<<=1,(lt&261888)===0&&(lt=256)),Ql=l}return Ql}function pM(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Md(""+l)}function gM(l,u){var p=u.ownerDocument.createElement("input");return p.name=u.name,p.value=u.value,l.id&&p.setAttribute("form",l.id),u.parentNode.insertBefore(p,u),l=new FormData(l),p.parentNode.removeChild(p),l}function nQ(l,u,p,y,E){if(u==="submit"&&p&&p.stateNode===E){var k=pM((E[_r]||null).action),V=y.submitter;V&&(u=(u=V[_r]||null)?pM(u.formAction):V.getAttribute("formAction"),u!==null&&(k=u,V=null));var q=new Rs("action","action",null,y,E);l.push({event:q,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Ql!==0){var ie=V?gM(E,V):new FormData(E);YS(p,{pending:!0,data:ie,method:E.method,action:k},null,ie)}}else typeof k=="function"&&(q.preventDefault(),ie=V?gM(E,V):new FormData(E),YS(p,{pending:!0,data:ie,method:E.method,action:k},k,ie))},currentTarget:E}]})}}for(var N_=0;N_<dS.length;N_++){var I_=dS[N_],rQ=I_.toLowerCase(),iQ=I_[0].toUpperCase()+I_.slice(1);es(rQ,"on"+iQ)}es(HP,"onAnimationEnd"),es(WP,"onAnimationIteration"),es(YP,"onAnimationStart"),es("dblclick","onDoubleClick"),es("focusin","onFocus"),es("focusout","onBlur"),es(xX,"onTransitionRun"),es(wX,"onTransitionStart"),es(SX,"onTransitionCancel"),es(KP,"onTransitionEnd"),Is("onMouseEnter",["mouseout","mouseover"]),Is("onMouseLeave",["mouseout","mouseover"]),Is("onPointerEnter",["pointerout","pointerover"]),Is("onPointerLeave",["pointerout","pointerover"]),Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aQ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hp));function mM(l,u){u=(u&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],E=y.event;y=y.listeners;e:{var k=void 0;if(u)for(var V=y.length-1;0<=V;V--){var q=y[V],ie=q.instance,pe=q.currentTarget;if(q=q.listener,ie!==k&&E.isPropagationStopped())break e;k=q,E.currentTarget=pe;try{k(E)}catch(_e){r0(_e)}E.currentTarget=null,k=ie}else for(V=0;V<y.length;V++){if(q=y[V],ie=q.instance,pe=q.currentTarget,q=q.listener,ie!==k&&E.isPropagationStopped())break e;k=q,E.currentTarget=pe;try{k(E)}catch(_e){r0(_e)}E.currentTarget=null,k=ie}}}}function yt(l,u){var p=u[Id];p===void 0&&(p=u[Id]=new Set);var y=l+"__bubble";p.has(y)||(vM(u,l,2,!1),p.add(y))}function O_(l,u,p){var y=0;u&&(y|=4),vM(p,l,y,u)}var $0="_reactListening"+Math.random().toString(36).slice(2);function P_(l){if(!l[$0]){l[$0]=!0,ip.forEach(function(p){p!=="selectionchange"&&(aQ.has(p)||O_(p,!1,l),O_(p,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[$0]||(u[$0]=!0,O_("selectionchange",!1,u))}}function vM(l,u,p,y){switch(HM(u)){case 2:var E=DQ;break;case 8:E=RQ;break;default:E=W_}p=E.bind(null,u,p,l),E=void 0,!nu||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(E=!0),y?E!==void 0?l.addEventListener(u,p,{capture:!0,passive:E}):l.addEventListener(u,p,!0):E!==void 0?l.addEventListener(u,p,{passive:E}):l.addEventListener(u,p,!1)}function D_(l,u,p,y,E){var k=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var V=y.tag;if(V===3||V===4){var q=y.stateNode.containerInfo;if(q===E)break;if(V===4)for(V=y.return;V!==null;){var ie=V.tag;if((ie===3||ie===4)&&V.stateNode.containerInfo===E)return;V=V.return}for(;q!==null;){if(V=ks(q),V===null)return;if(ie=V.tag,ie===5||ie===6||ie===26||ie===27){y=k=V;continue e}q=q.parentNode}}y=y.return}Pl(function(){var pe=k,_e=ha(p),ke=[];e:{var ve=XP.get(l);if(ve!==void 0){var xe=Rs,Ue=l;switch(l){case"keypress":if(iu(p)===0)break e;case"keydown":case"keyup":xe=e0;break;case"focusin":Ue="focus",xe=su;break;case"focusout":Ue="blur",xe=su;break;case"beforeblur":case"afterblur":xe=su;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=vp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=Gv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=M;break;case HP:case WP:case YP:xe=Wv;break;case KP:xe=H;break;case"scroll":case"scrollend":xe=mp;break;case"wheel":xe=be;break;case"copy":case"cut":case"paste":xe=Yv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=So;break;case"toggle":case"beforetoggle":xe=ct}var tt=(u&4)!==0,Yt=!tt&&(l==="scroll"||l==="scrollend"),de=tt?ve!==null?ve+"Capture":null:ve;tt=[];for(var ce=pe,he;ce!==null;){var Te=ce;if(he=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||he===null||de===null||(Te=Xa(ce,de),Te!=null&&tt.push(Wp(ce,Te,he))),Yt)break;ce=ce.return}0<tt.length&&(ve=new xe(ve,Ue,null,p,_e),ke.push({event:ve,listeners:tt}))}}if((u&7)===0){e:{if(ve=l==="mouseover"||l==="pointerover",xe=l==="mouseout"||l==="pointerout",ve&&p!==hp&&(Ue=p.relatedTarget||p.fromElement)&&(ks(Ue)||Ue[Ts]))break e;if((xe||ve)&&(ve=_e.window===_e?_e:(ve=_e.ownerDocument)?ve.defaultView||ve.parentWindow:window,xe?(Ue=p.relatedTarget||p.toElement,xe=pe,Ue=Ue?ks(Ue):null,Ue!==null&&(Yt=a(Ue),tt=Ue.tag,Ue!==Yt||tt!==5&&tt!==27&&tt!==6)&&(Ue=null)):(xe=null,Ue=pe),xe!==Ue)){if(tt=vp,Te="onMouseLeave",de="onMouseEnter",ce="mouse",(l==="pointerout"||l==="pointerover")&&(tt=So,Te="onPointerLeave",de="onPointerEnter",ce="pointer"),Yt=xe==null?ve:$i(xe),he=Ue==null?ve:$i(Ue),ve=new tt(Te,ce+"leave",xe,p,_e),ve.target=Yt,ve.relatedTarget=he,Te=null,ks(_e)===pe&&(tt=new tt(de,ce+"enter",Ue,p,_e),tt.target=he,tt.relatedTarget=Yt,Te=tt),Yt=Te,xe&&Ue)t:{for(tt=sQ,de=xe,ce=Ue,he=0,Te=de;Te;Te=tt(Te))he++;Te=0;for(var Ye=ce;Ye;Ye=tt(Ye))Te++;for(;0<he-Te;)de=tt(de),he--;for(;0<Te-he;)ce=tt(ce),Te--;for(;he--;){if(de===ce||ce!==null&&de===ce.alternate){tt=de;break t}de=tt(de),ce=tt(ce)}tt=null}else tt=null;xe!==null&&yM(ke,ve,xe,tt,!1),Ue!==null&&Yt!==null&&yM(ke,Yt,Ue,tt,!0)}}e:{if(ve=pe?$i(pe):window,xe=ve.nodeName&&ve.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ve.type==="file")var Nt=MP;else if(DP(ve))if(jP)Nt=vX;else{Nt=gX;var $e=pX}else xe=ve.nodeName,!xe||xe.toLowerCase()!=="input"||ve.type!=="checkbox"&&ve.type!=="radio"?pe&&Rd(pe.elementType)&&(Nt=MP):Nt=mX;if(Nt&&(Nt=Nt(l,pe))){RP(ke,Nt,p,_e);break e}$e&&$e(l,ve,pe),l==="focusout"&&pe&&ve.type==="number"&&pe.memoizedProps.value!=null&&up(ve,"number",ve.value)}switch($e=pe?$i(pe):window,l){case"focusin":(DP($e)||$e.contentEditable==="true")&&(Fd=$e,lS=pe,Sp=null);break;case"focusout":Sp=lS=Fd=null;break;case"mousedown":cS=!0;break;case"contextmenu":case"mouseup":case"dragend":cS=!1,qP(ke,p,_e);break;case"selectionchange":if(bX)break;case"keydown":case"keyup":qP(ke,p,_e)}var ft;if(Rt)e:{switch(l){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else Ud?ou(l,p)&&(St="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(St="onCompositionStart");St&&(zs&&p.locale!=="ko"&&(Ud||St!=="onCompositionStart"?St==="onCompositionEnd"&&Ud&&(ft=gp()):(Ds=_e,pp="value"in Ds?Ds.value:Ds.textContent,Ud=!0)),$e=q0(pe,St),0<$e.length&&(St=new js(St,l,null,p,_e),ke.push({event:St,listeners:$e}),ft?St.data=ft:(ft=Bd(p),ft!==null&&(St.data=ft)))),(ft=ga?uX(l,p):dX(l,p))&&(St=q0(pe,"onBeforeInput"),0<St.length&&($e=new js("onBeforeInput","beforeinput",null,p,_e),ke.push({event:$e,listeners:St}),$e.data=ft)),nQ(ke,l,pe,p,_e)}mM(ke,u)})}function Wp(l,u,p){return{instance:l,listener:u,currentTarget:p}}function q0(l,u){for(var p=u+"Capture",y=[];l!==null;){var E=l,k=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||k===null||(E=Xa(l,p),E!=null&&y.unshift(Wp(l,E,k)),E=Xa(l,u),E!=null&&y.push(Wp(l,E,k))),l.tag===3)return y;l=l.return}return[]}function sQ(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function yM(l,u,p,y,E){for(var k=u._reactName,V=[];p!==null&&p!==y;){var q=p,ie=q.alternate,pe=q.stateNode;if(q=q.tag,ie!==null&&ie===y)break;q!==5&&q!==26&&q!==27||pe===null||(ie=pe,E?(pe=Xa(p,k),pe!=null&&V.unshift(Wp(p,pe,ie))):E||(pe=Xa(p,k),pe!=null&&V.push(Wp(p,pe,ie)))),p=p.return}V.length!==0&&l.push({event:u,listeners:V})}var oQ=/\r\n?/g,lQ=/\u0000|\uFFFD/g;function bM(l){return(typeof l=="string"?l:""+l).replace(oQ,`
`).replace(lQ,"")}function xM(l,u){return u=bM(u),bM(l)===u}function Wt(l,u,p,y,E,k){switch(p){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||Ti(l,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&Ti(l,""+y);break;case"className":qi(l,"class",y);break;case"tabIndex":qi(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":qi(l,p,y);break;case"style":fp(l,y,k);break;case"data":if(u!=="object"){qi(l,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||p!=="href")){l.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=Md(""+y),l.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(p==="formAction"?(u!=="input"&&Wt(l,u,"name",E.name,E,null),Wt(l,u,"formEncType",E.formEncType,E,null),Wt(l,u,"formMethod",E.formMethod,E,null),Wt(l,u,"formTarget",E.formTarget,E,null)):(Wt(l,u,"encType",E.encType,E,null),Wt(l,u,"method",E.method,E,null),Wt(l,u,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=Md(""+y),l.setAttribute(p,y);break;case"onClick":y!=null&&(l.onclick=Ka);break;case"onScroll":y!=null&&yt("scroll",l);break;case"onScrollEnd":y!=null&&yt("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}p=Md(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""+y):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":y===!0?l.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,y):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(p,y):l.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(p):l.setAttribute(p,y);break;case"popover":yt("beforetoggle",l),yt("toggle",l),Pd(l,"popover",y);break;case"xlinkActuate":Yn(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Yn(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Yn(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Yn(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Yn(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Yn(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Yn(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Yn(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Yn(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Pd(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=qv.get(p)||p,Pd(l,p,y))}}function R_(l,u,p,y,E,k){switch(p){case"style":fp(l,y,k);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof y=="string"?Ti(l,y):(typeof y=="number"||typeof y=="bigint")&&Ti(l,""+y);break;case"onScroll":y!=null&&yt("scroll",l);break;case"onScrollEnd":y!=null&&yt("scrollend",l);break;case"onClick":y!=null&&(l.onclick=Ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ap.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),u=p.slice(2,E?p.length-7:void 0),k=l[_r]||null,k=k!=null?k[p]:null,typeof k=="function"&&l.removeEventListener(u,k,E),typeof y=="function")){typeof k!="function"&&k!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(u,y,E);break e}p in l?l[p]=y:y===!0?l.setAttribute(p,""):Pd(l,p,y)}}}function Lr(l,u,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",l),yt("load",l);var y=!1,E=!1,k;for(k in p)if(p.hasOwnProperty(k)){var V=p[k];if(V!=null)switch(k){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Wt(l,u,k,V,p,null)}}E&&Wt(l,u,"srcSet",p.srcSet,p,null),y&&Wt(l,u,"src",p.src,p,null);return;case"input":yt("invalid",l);var q=k=V=E=null,ie=null,pe=null;for(y in p)if(p.hasOwnProperty(y)){var _e=p[y];if(_e!=null)switch(y){case"name":E=_e;break;case"type":V=_e;break;case"checked":ie=_e;break;case"defaultChecked":pe=_e;break;case"value":k=_e;break;case"defaultValue":q=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,u));break;default:Wt(l,u,y,_e,p,null)}}Uv(l,k,q,ie,pe,V,E,!1);return;case"select":yt("invalid",l),y=V=k=null;for(E in p)if(p.hasOwnProperty(E)&&(q=p[E],q!=null))switch(E){case"value":k=q;break;case"defaultValue":V=q;break;case"multiple":y=q;default:Wt(l,u,E,q,p,null)}u=k,p=V,l.multiple=!!y,u!=null?Cl(l,!!y,u,!1):p!=null&&Cl(l,!!y,p,!0);return;case"textarea":yt("invalid",l),k=E=y=null;for(V in p)if(p.hasOwnProperty(V)&&(q=p[V],q!=null))switch(V){case"value":y=q;break;case"defaultValue":E=q;break;case"children":k=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(91));break;default:Wt(l,u,V,q,p,null)}Nl(l,y,E,k);return;case"option":for(ie in p)if(p.hasOwnProperty(ie)&&(y=p[ie],y!=null))switch(ie){case"selected":l.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Wt(l,u,ie,y,p,null)}return;case"dialog":yt("beforetoggle",l),yt("toggle",l),yt("cancel",l),yt("close",l);break;case"iframe":case"object":yt("load",l);break;case"video":case"audio":for(y=0;y<Hp.length;y++)yt(Hp[y],l);break;case"image":yt("error",l),yt("load",l);break;case"details":yt("toggle",l);break;case"embed":case"source":case"link":yt("error",l),yt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in p)if(p.hasOwnProperty(pe)&&(y=p[pe],y!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Wt(l,u,pe,y,p,null)}return;default:if(Rd(u)){for(_e in p)p.hasOwnProperty(_e)&&(y=p[_e],y!==void 0&&R_(l,u,_e,y,p,void 0));return}}for(q in p)p.hasOwnProperty(q)&&(y=p[q],y!=null&&Wt(l,u,q,y,p,null))}function cQ(l,u,p,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,k=null,V=null,q=null,ie=null,pe=null,_e=null;for(xe in p){var ke=p[xe];if(p.hasOwnProperty(xe)&&ke!=null)switch(xe){case"checked":break;case"value":break;case"defaultValue":ie=ke;default:y.hasOwnProperty(xe)||Wt(l,u,xe,null,y,ke)}}for(var ve in y){var xe=y[ve];if(ke=p[ve],y.hasOwnProperty(ve)&&(xe!=null||ke!=null))switch(ve){case"type":k=xe;break;case"name":E=xe;break;case"checked":pe=xe;break;case"defaultChecked":_e=xe;break;case"value":V=xe;break;case"defaultValue":q=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(r(137,u));break;default:xe!==ke&&Wt(l,u,ve,xe,y,ke)}}Dd(l,V,q,ie,pe,_e,k,E);return;case"select":xe=V=q=ve=null;for(k in p)if(ie=p[k],p.hasOwnProperty(k)&&ie!=null)switch(k){case"value":break;case"multiple":xe=ie;default:y.hasOwnProperty(k)||Wt(l,u,k,null,y,ie)}for(E in y)if(k=y[E],ie=p[E],y.hasOwnProperty(E)&&(k!=null||ie!=null))switch(E){case"value":ve=k;break;case"defaultValue":q=k;break;case"multiple":V=k;default:k!==ie&&Wt(l,u,E,k,y,ie)}u=q,p=V,y=xe,ve!=null?Cl(l,!!p,ve,!1):!!y!=!!p&&(u!=null?Cl(l,!!p,u,!0):Cl(l,!!p,p?[]:"",!1));return;case"textarea":xe=ve=null;for(q in p)if(E=p[q],p.hasOwnProperty(q)&&E!=null&&!y.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Wt(l,u,q,null,y,E)}for(V in y)if(E=y[V],k=p[V],y.hasOwnProperty(V)&&(E!=null||k!=null))switch(V){case"value":ve=E;break;case"defaultValue":xe=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==k&&Wt(l,u,V,E,y,k)}Fv(l,ve,xe);return;case"option":for(var Ue in p)if(ve=p[Ue],p.hasOwnProperty(Ue)&&ve!=null&&!y.hasOwnProperty(Ue))switch(Ue){case"selected":l.selected=!1;break;default:Wt(l,u,Ue,null,y,ve)}for(ie in y)if(ve=y[ie],xe=p[ie],y.hasOwnProperty(ie)&&ve!==xe&&(ve!=null||xe!=null))switch(ie){case"selected":l.selected=ve&&typeof ve!="function"&&typeof ve!="symbol";break;default:Wt(l,u,ie,ve,y,xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in p)ve=p[tt],p.hasOwnProperty(tt)&&ve!=null&&!y.hasOwnProperty(tt)&&Wt(l,u,tt,null,y,ve);for(pe in y)if(ve=y[pe],xe=p[pe],y.hasOwnProperty(pe)&&ve!==xe&&(ve!=null||xe!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,u));break;default:Wt(l,u,pe,ve,y,xe)}return;default:if(Rd(u)){for(var Yt in p)ve=p[Yt],p.hasOwnProperty(Yt)&&ve!==void 0&&!y.hasOwnProperty(Yt)&&R_(l,u,Yt,void 0,y,ve);for(_e in y)ve=y[_e],xe=p[_e],!y.hasOwnProperty(_e)||ve===xe||ve===void 0&&xe===void 0||R_(l,u,_e,ve,y,xe);return}}for(var de in p)ve=p[de],p.hasOwnProperty(de)&&ve!=null&&!y.hasOwnProperty(de)&&Wt(l,u,de,null,y,ve);for(ke in y)ve=y[ke],xe=p[ke],!y.hasOwnProperty(ke)||ve===xe||ve==null&&xe==null||Wt(l,u,ke,ve,y,xe)}function wM(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uQ(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,p=performance.getEntriesByType("resource"),y=0;y<p.length;y++){var E=p[y],k=E.transferSize,V=E.initiatorType,q=E.duration;if(k&&q&&wM(V)){for(V=0,q=E.responseEnd,y+=1;y<p.length;y++){var ie=p[y],pe=ie.startTime;if(pe>q)break;var _e=ie.transferSize,ke=ie.initiatorType;_e&&wM(ke)&&(ie=ie.responseEnd,V+=_e*(ie<q?1:(q-pe)/(ie-pe)))}if(--y,u+=8*(k+V)/(E.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var M_=null,j_=null;function G0(l){return l.nodeType===9?l:l.ownerDocument}function SM(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _M(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function z_(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var L_=null;function dQ(){var l=window.event;return l&&l.type==="popstate"?l===L_?!1:(L_=l,!0):(L_=null,!1)}var EM=typeof setTimeout=="function"?setTimeout:void 0,fQ=typeof clearTimeout=="function"?clearTimeout:void 0,TM=typeof Promise=="function"?Promise:void 0,hQ=typeof queueMicrotask=="function"?queueMicrotask:typeof TM<"u"?function(l){return TM.resolve(null).then(l).catch(pQ)}:EM;function pQ(l){setTimeout(function(){throw l})}function Zl(l){return l==="head"}function AM(l,u){var p=u,y=0;do{var E=p.nextSibling;if(l.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"||p==="/&"){if(y===0){l.removeChild(E),mf(u);return}y--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")y++;else if(p==="html")Yp(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,Yp(p);for(var k=p.firstChild;k;){var V=k.nextSibling,q=k.nodeName;k[As]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&k.rel.toLowerCase()==="stylesheet"||p.removeChild(k),k=V}}else p==="body"&&Yp(l.ownerDocument.body);p=E}while(p);mf(u)}function kM(l,u){var p=l;l=0;do{var y=p.nextSibling;if(p.nodeType===1?u?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(u?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),y&&y.nodeType===8)if(p=y.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=y}while(p)}function V_(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var p=u;switch(u=u.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":V_(p),Od(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function gQ(l,u,p,y){for(;l.nodeType===1;){var E=p;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[As])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(k=l.getAttribute("rel"),k==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(k!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(k=l.getAttribute("src"),(k!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&k&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var k=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===k)return l}else return l;if(l=Sa(l.nextSibling),l===null)break}return null}function mQ(l,u,p){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Sa(l.nextSibling),l===null))return null;return l}function CM(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=Sa(l.nextSibling),l===null))return null;return l}function B_(l){return l.data==="$?"||l.data==="$~"}function U_(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function vQ(l,u){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||p.readyState!=="loading")u();else{var y=function(){u(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Sa(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var F_=null;function NM(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(u===0)return Sa(l.nextSibling);u--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||u++}l=l.nextSibling}return null}function IM(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(u===0)return l;u--}else p!=="/$"&&p!=="/&"||u++}l=l.previousSibling}return null}function OM(l,u,p){switch(u=G0(p),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Yp(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);Od(l)}var _a=new Map,PM=new Set;function H0(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var zo=K.d;K.d={f:yQ,r:bQ,D:xQ,C:wQ,L:SQ,m:_Q,X:TQ,S:EQ,M:AQ};function yQ(){var l=zo.f(),u=z0();return l||u}function bQ(l){var u=fa(l);u!==null&&u.tag===5&&u.type==="form"?KD(u):zo.r(l)}var hf=typeof document>"u"?null:document;function DM(l,u,p){var y=hf;if(y&&typeof u=="string"&&u){var E=Ei(u);E='link[rel="'+l+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),PM.has(E)||(PM.add(E),l={rel:l,crossOrigin:p,href:u},y.querySelector(E)===null&&(u=y.createElement("link"),Lr(u,"link",l),Wn(u),y.head.appendChild(u)))}}function xQ(l){zo.D(l),DM("dns-prefetch",l,null)}function wQ(l,u){zo.C(l,u),DM("preconnect",l,u)}function SQ(l,u,p){zo.L(l,u,p);var y=hf;if(y&&l&&u){var E='link[rel="preload"][as="'+Ei(u)+'"]';u==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+Ei(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+Ei(p.imageSizes)+'"]')):E+='[href="'+Ei(l)+'"]';var k=E;switch(u){case"style":k=pf(l);break;case"script":k=gf(l)}_a.has(k)||(l=h({rel:"preload",href:u==="image"&&p&&p.imageSrcSet?void 0:l,as:u},p),_a.set(k,l),y.querySelector(E)!==null||u==="style"&&y.querySelector(Kp(k))||u==="script"&&y.querySelector(Xp(k))||(u=y.createElement("link"),Lr(u,"link",l),Wn(u),y.head.appendChild(u)))}}function _Q(l,u){zo.m(l,u);var p=hf;if(p&&l){var y=u&&typeof u.as=="string"?u.as:"script",E='link[rel="modulepreload"][as="'+Ei(y)+'"][href="'+Ei(l)+'"]',k=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=gf(l)}if(!_a.has(k)&&(l=h({rel:"modulepreload",href:l},u),_a.set(k,l),p.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Xp(k)))return}y=p.createElement("link"),Lr(y,"link",l),Wn(y),p.head.appendChild(y)}}}function EQ(l,u,p){zo.S(l,u,p);var y=hf;if(y&&l){var E=Cs(y).hoistableStyles,k=pf(l);u=u||"default";var V=E.get(k);if(!V){var q={loading:0,preload:null};if(V=y.querySelector(Kp(k)))q.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":u},p),(p=_a.get(k))&&$_(l,p);var ie=V=y.createElement("link");Wn(ie),Lr(ie,"link",l),ie._p=new Promise(function(pe,_e){ie.onload=pe,ie.onerror=_e}),ie.addEventListener("load",function(){q.loading|=1}),ie.addEventListener("error",function(){q.loading|=2}),q.loading|=4,W0(V,u,y)}V={type:"stylesheet",instance:V,count:1,state:q},E.set(k,V)}}}function TQ(l,u){zo.X(l,u);var p=hf;if(p&&l){var y=Cs(p).hoistableScripts,E=gf(l),k=y.get(E);k||(k=p.querySelector(Xp(E)),k||(l=h({src:l,async:!0},u),(u=_a.get(E))&&q_(l,u),k=p.createElement("script"),Wn(k),Lr(k,"link",l),p.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(E,k))}}function AQ(l,u){zo.M(l,u);var p=hf;if(p&&l){var y=Cs(p).hoistableScripts,E=gf(l),k=y.get(E);k||(k=p.querySelector(Xp(E)),k||(l=h({src:l,async:!0,type:"module"},u),(u=_a.get(E))&&q_(l,u),k=p.createElement("script"),Wn(k),Lr(k,"link",l),p.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(E,k))}}function RM(l,u,p,y){var E=(E=re.current)?H0(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(u=pf(p.href),p=Cs(E).hoistableStyles,y=p.get(u),y||(y={type:"style",instance:null,count:0,state:null},p.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=pf(p.href);var k=Cs(E).hoistableStyles,V=k.get(l);if(V||(E=E.ownerDocument||E,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(l,V),(k=E.querySelector(Kp(l)))&&!k._p&&(V.instance=k,V.state.loading=5),_a.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},_a.set(l,p),k||kQ(E,l,p,V.state))),u&&y===null)throw Error(r(528,""));return V}if(u&&y!==null)throw Error(r(529,""));return null;case"script":return u=p.async,p=p.src,typeof p=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=gf(p),p=Cs(E).hoistableScripts,y=p.get(u),y||(y={type:"script",instance:null,count:0,state:null},p.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function pf(l){return'href="'+Ei(l)+'"'}function Kp(l){return'link[rel="stylesheet"]['+l+"]"}function MM(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function kQ(l,u,p,y){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=l.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),Lr(u,"link",p),Wn(u),l.head.appendChild(u))}function gf(l){return'[src="'+Ei(l)+'"]'}function Xp(l){return"script[async]"+l}function jM(l,u,p){if(u.count++,u.instance===null)switch(u.type){case"style":var y=l.querySelector('style[data-href~="'+Ei(p.href)+'"]');if(y)return u.instance=y,Wn(y),y;var E=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),Wn(y),Lr(y,"style",E),W0(y,p.precedence,l),u.instance=y;case"stylesheet":E=pf(p.href);var k=l.querySelector(Kp(E));if(k)return u.state.loading|=4,u.instance=k,Wn(k),k;y=MM(p),(E=_a.get(E))&&$_(y,E),k=(l.ownerDocument||l).createElement("link"),Wn(k);var V=k;return V._p=new Promise(function(q,ie){V.onload=q,V.onerror=ie}),Lr(k,"link",y),u.state.loading|=4,W0(k,p.precedence,l),u.instance=k;case"script":return k=gf(p.src),(E=l.querySelector(Xp(k)))?(u.instance=E,Wn(E),E):(y=p,(E=_a.get(k))&&(y=h({},p),q_(y,E)),l=l.ownerDocument||l,E=l.createElement("script"),Wn(E),Lr(E,"link",y),l.head.appendChild(E),u.instance=E);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,W0(y,p.precedence,l));return u.instance}function W0(l,u,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,k=E,V=0;V<y.length;V++){var q=y[V];if(q.dataset.precedence===u)k=q;else if(k!==E)break}k?k.parentNode.insertBefore(l,k.nextSibling):(u=p.nodeType===9?p.head:p,u.insertBefore(l,u.firstChild))}function $_(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function q_(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var Y0=null;function zM(l,u,p){if(Y0===null){var y=new Map,E=Y0=new Map;E.set(p,y)}else E=Y0,y=E.get(p),y||(y=new Map,E.set(p,y));if(y.has(l))return y;for(y.set(l,null),p=p.getElementsByTagName(l),E=0;E<p.length;E++){var k=p[E];if(!(k[As]||k[Hn]||l==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var V=k.getAttribute(u)||"";V=l+V;var q=y.get(V);q?q.push(k):y.set(V,[k])}}return y}function LM(l,u,p){l=l.ownerDocument||l,l.head.insertBefore(p,u==="title"?l.querySelector("head > title"):null)}function CQ(l,u,p){if(p===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function VM(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function NQ(l,u,p,y){if(p.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var E=pf(y.href),k=u.querySelector(Kp(E));if(k){u=k._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=K0.bind(l),u.then(l,l)),p.state.loading|=4,p.instance=k,Wn(k);return}k=u.ownerDocument||u,y=MM(y),(E=_a.get(E))&&$_(y,E),k=k.createElement("link"),Wn(k);var V=k;V._p=new Promise(function(q,ie){V.onload=q,V.onerror=ie}),Lr(k,"link",y),p.instance=k}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,u),(u=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=K0.bind(l),u.addEventListener("load",p),u.addEventListener("error",p))}}var G_=0;function IQ(l,u){return l.stylesheets&&l.count===0&&Q0(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var y=setTimeout(function(){if(l.stylesheets&&Q0(l,l.stylesheets),l.unsuspend){var k=l.unsuspend;l.unsuspend=null,k()}},6e4+u);0<l.imgBytes&&G_===0&&(G_=62500*uQ());var E=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Q0(l,l.stylesheets),l.unsuspend)){var k=l.unsuspend;l.unsuspend=null,k()}},(l.imgBytes>G_?50:800)+u);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(y),clearTimeout(E)}}:null}function K0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Q0(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var X0=null;function Q0(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,X0=new Map,u.forEach(OQ,l),X0=null,K0.call(l))}function OQ(l,u){if(!(u.state.loading&4)){var p=X0.get(l);if(p)var y=p.get(null);else{p=new Map,X0.set(l,p);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<E.length;k++){var V=E[k];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(p.set(V.dataset.precedence,V),y=V)}y&&p.set(null,y)}E=u.instance,V=E.getAttribute("data-precedence"),k=p.get(V)||y,k===y&&p.set(null,E),p.set(V,E),this.count++,y=K0.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),k?k.parentNode.insertBefore(E,k.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),u.state.loading|=4}}var Qp={$$typeof:N,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function PQ(l,u,p,y,E,k,V,q,ie){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Es(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Es(0),this.hiddenUpdates=Es(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=k,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function BM(l,u,p,y,E,k,V,q,ie,pe,_e,ke){return l=new PQ(l,u,p,V,ie,pe,_e,ke,q),u=1,k===!0&&(u|=24),k=Hi(3,null,null,u),l.current=k,k.stateNode=l,u=ES(),u.refCount++,l.pooledCache=u,u.refCount++,k.memoizedState={element:y,isDehydrated:p,cache:u},CS(k),l}function UM(l){return l?(l=Gd,l):Gd}function FM(l,u,p,y,E,k){E=UM(E),y.context===null?y.context=E:y.pendingContext=E,y=Ul(u),y.payload={element:p},k=k===void 0?null:k,k!==null&&(y.callback=k),p=Fl(l,y,u),p!==null&&(Ii(p,l,u),Np(p,l,u))}function $M(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function H_(l,u){$M(l,u),(l=l.alternate)&&$M(l,u)}function qM(l){if(l.tag===13||l.tag===31){var u=uu(l,67108864);u!==null&&Ii(u,l,67108864),H_(l,67108864)}}function GM(l){if(l.tag===13||l.tag===31){var u=Qi();u=Zc(u);var p=uu(l,u);p!==null&&Ii(p,l,u),H_(l,u)}}var Z0=!0;function DQ(l,u,p,y){var E=G.T;G.T=null;var k=K.p;try{K.p=2,W_(l,u,p,y)}finally{K.p=k,G.T=E}}function RQ(l,u,p,y){var E=G.T;G.T=null;var k=K.p;try{K.p=8,W_(l,u,p,y)}finally{K.p=k,G.T=E}}function W_(l,u,p,y){if(Z0){var E=Y_(y);if(E===null)D_(l,u,y,J0,p),WM(l,y);else if(jQ(E,l,u,p,y))y.stopPropagation();else if(WM(l,y),u&4&&-1<MQ.indexOf(l)){for(;E!==null;){var k=fa(E);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var V=ci(k.pendingLanes);if(V!==0){var q=k;for(q.pendingLanes|=2,q.entangledLanes|=2;V;){var ie=1<<31-et(V);q.entanglements[1]|=ie,V&=~ie}Us(k),(Mt&6)===0&&(M0=ht()+500,Gp(0))}}break;case 31:case 13:q=uu(k,2),q!==null&&Ii(q,k,2),z0(),H_(k,2)}if(k=Y_(y),k===null&&D_(l,u,y,J0,p),k===E)break;E=k}E!==null&&y.stopPropagation()}else D_(l,u,y,null,p)}}function Y_(l){return l=ha(l),K_(l)}var J0=null;function K_(l){if(J0=null,l=ks(l),l!==null){var u=a(l);if(u===null)l=null;else{var p=u.tag;if(p===13){if(l=s(u),l!==null)return l;l=null}else if(p===31){if(l=o(u),l!==null)return l;l=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return J0=l,null}function HM(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vt()){case Yr:return 2;case Kr:return 8;case Me:case mt:return 32;case Sr:return 268435456;default:return 32}default:return 32}}var X_=!1,Jl=null,ec=null,tc=null,Zp=new Map,Jp=new Map,nc=[],MQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function WM(l,u){switch(l){case"focusin":case"focusout":Jl=null;break;case"dragenter":case"dragleave":ec=null;break;case"mouseover":case"mouseout":tc=null;break;case"pointerover":case"pointerout":Zp.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jp.delete(u.pointerId)}}function eg(l,u,p,y,E,k){return l===null||l.nativeEvent!==k?(l={blockedOn:u,domEventName:p,eventSystemFlags:y,nativeEvent:k,targetContainers:[E]},u!==null&&(u=fa(u),u!==null&&qM(u)),l):(l.eventSystemFlags|=y,u=l.targetContainers,E!==null&&u.indexOf(E)===-1&&u.push(E),l)}function jQ(l,u,p,y,E){switch(u){case"focusin":return Jl=eg(Jl,l,u,p,y,E),!0;case"dragenter":return ec=eg(ec,l,u,p,y,E),!0;case"mouseover":return tc=eg(tc,l,u,p,y,E),!0;case"pointerover":var k=E.pointerId;return Zp.set(k,eg(Zp.get(k)||null,l,u,p,y,E)),!0;case"gotpointercapture":return k=E.pointerId,Jp.set(k,eg(Jp.get(k)||null,l,u,p,y,E)),!0}return!1}function YM(l){var u=ks(l.target);if(u!==null){var p=a(u);if(p!==null){if(u=p.tag,u===13){if(u=s(p),u!==null){l.blockedOn=u,Wa(l.priority,function(){GM(p)});return}}else if(u===31){if(u=o(p),u!==null){l.blockedOn=u,Wa(l.priority,function(){GM(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function ey(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var p=Y_(l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);hp=y,p.target.dispatchEvent(y),hp=null}else return u=fa(p),u!==null&&qM(u),l.blockedOn=p,!1;u.shift()}return!0}function KM(l,u,p){ey(l)&&p.delete(u)}function zQ(){X_=!1,Jl!==null&&ey(Jl)&&(Jl=null),ec!==null&&ey(ec)&&(ec=null),tc!==null&&ey(tc)&&(tc=null),Zp.forEach(KM),Jp.forEach(KM)}function ty(l,u){l.blockedOn===u&&(l.blockedOn=null,X_||(X_=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zQ)))}var ny=null;function XM(l){ny!==l&&(ny=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ny===l&&(ny=null);for(var u=0;u<l.length;u+=3){var p=l[u],y=l[u+1],E=l[u+2];if(typeof y!="function"){if(K_(y||p)===null)continue;break}var k=fa(p);k!==null&&(l.splice(u,3),u-=3,YS(k,{pending:!0,data:E,method:p.method,action:y},y,E))}}))}function mf(l){function u(ie){return ty(ie,l)}Jl!==null&&ty(Jl,l),ec!==null&&ty(ec,l),tc!==null&&ty(tc,l),Zp.forEach(u),Jp.forEach(u);for(var p=0;p<nc.length;p++){var y=nc[p];y.blockedOn===l&&(y.blockedOn=null)}for(;0<nc.length&&(p=nc[0],p.blockedOn===null);)YM(p),p.blockedOn===null&&nc.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var E=p[y],k=p[y+1],V=E[_r]||null;if(typeof k=="function")V||XM(p);else if(V){var q=null;if(k&&k.hasAttribute("formAction")){if(E=k,V=k[_r]||null)q=V.formAction;else if(K_(E)!==null)continue}else q=V.action;typeof q=="function"?p[y+1]=q:(p.splice(y,3),y-=3),XM(p)}}}function QM(){function l(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(V){return E=V})},focusReset:"manual",scroll:"manual"})}function u(){E!==null&&(E(),E=null),y||setTimeout(p,20)}function p(){if(!y&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,E=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(p,100),function(){y=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),E!==null&&(E(),E=null)}}}function Q_(l){this._internalRoot=l}ry.prototype.render=Q_.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var p=u.current,y=Qi();FM(p,y,l,u,null,null)},ry.prototype.unmount=Q_.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;FM(l.current,2,null,l,null,null),z0(),u[Ts]=null}};function ry(l){this._internalRoot=l}ry.prototype.unstable_scheduleHydration=function(l){if(l){var u=zv();l={blockedOn:null,target:l,priority:u};for(var p=0;p<nc.length&&u!==0&&u<nc[p].priority;p++);nc.splice(p,0,l),p===0&&YM(l)}};var ZM=e.version;if(ZM!=="19.2.0")throw Error(r(527,ZM,"19.2.0"));K.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=d(u),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var LQ={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iy.isDisabled&&iy.supportsFiber)try{sn=iy.inject(LQ),Dt=iy}catch{}}return ng.createRoot=function(l,u){if(!i(l))throw Error(r(299));var p=!1,y="",E=aR,k=sR,V=oR;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(k=u.onCaughtError),u.onRecoverableError!==void 0&&(V=u.onRecoverableError)),u=BM(l,1,!1,null,null,p,y,null,E,k,V,QM),l[Ts]=u.current,P_(l),new Q_(u)},ng.hydrateRoot=function(l,u,p){if(!i(l))throw Error(r(299));var y=!1,E="",k=aR,V=sR,q=oR,ie=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(k=p.onUncaughtError),p.onCaughtError!==void 0&&(V=p.onCaughtError),p.onRecoverableError!==void 0&&(q=p.onRecoverableError),p.formState!==void 0&&(ie=p.formState)),u=BM(l,1,!0,u,p??null,y,E,ie,k,V,q,QM),u.context=UM(null),p=u.current,y=Qi(),y=Zc(y),E=Ul(y),E.callback=null,Fl(p,E,y),p=y,u.current.lanes=p,Xc(u,p),Us(u),l[Ts]=u.current,P_(l),new ry(u)},ng.version="19.2.0",ng}var lj;function KQ(){if(lj)return eE.exports;lj=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),eE.exports=YQ(),eE.exports}var XQ=KQ();const QQ="modulepreload",ZQ=function(t){return"/personal-budget-pwa/"+t},cj={},eh=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=c(n.map(d=>{if(d=ZQ(d),d in cj)return;cj[d]=!0;const f=d.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":QQ,f||(g.as="script"),g.crossOrigin="",g.href=d,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((v,b)=>{g.addEventListener("load",v),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function JQ(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:s}=t;let o,c;const d=async(h=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(o=await eh(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(h=>{s?.(h)}),!o)return;o.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),o.addEventListener("installed",h=>{h.isUpdate||r?.()}),o.register({immediate:e}).then(h=>{a?a("/personal-budget-pwa/sw.js",h):i?.(h)}).catch(h=>{s?.(h)})}}return c=f(),d}const eZ=()=>{};var uj={};const fU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tZ=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},hU={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,f=a>>2,h=(a&3)<<4|o>>4;let g=(o&15)<<2|d>>6,v=d&63;c||(v=64,s||(g=64)),r.push(n[f],n[h],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tZ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||d==null||h==null)throw new nZ;const g=a<<2|o>>4;if(r.push(g),d!==64){const v=o<<4&240|d>>2;if(r.push(v),h!==64){const b=d<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nZ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rZ=function(t){const e=fU(t);return hU.encodeByteArray(e,!0)},Ab=function(t){return rZ(t).replace(/\./g,"")},pU=function(t){try{return hU.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function iZ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const aZ=()=>iZ().__FIREBASE_DEFAULTS__,sZ=()=>{if(typeof process>"u"||typeof uj>"u")return;const t=uj.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oZ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pU(t[1]);return e&&JSON.parse(e)},d1=()=>{try{return eZ()||aZ()||sZ()||oZ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gU=t=>d1()?.emulatorHosts?.[t],mU=t=>{const e=gU(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vU=()=>d1()?.config,yU=t=>d1()?.[`_${t}`];class lZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Uc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function f2(t){return(await fetch(t,{credentials:"include"})).ok}function cZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ab(JSON.stringify(n)),Ab(JSON.stringify(s)),""].join(".")}const Ig={};function uZ(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ig))Ig[e]?t.emulator.push(e):t.prod.push(e);return t}function dZ(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let dj=!1;function h2(t,e){if(typeof window>"u"||typeof document>"u"||!Uc(window.location.host)||Ig[t]===e||Ig[t]||dj)return;Ig[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=uZ().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{dj=!0,s()},g}function f(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function h(){const g=dZ(r),v=n("text"),b=document.getElementById(v)||document.createElement("span"),x=n("learnmore"),w=document.getElementById(x)||document.createElement("a"),_=n("preprendIcon"),T=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const N=g.element;o(N),f(w,x);const D=d();c(T,_),N.append(T,b,w,D),document.body.appendChild(N)}a?(b.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function si(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fZ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(si())}function hZ(){const t=d1()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mZ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vZ(){const t=si();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yZ(){return!hZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bZ(){try{return typeof indexedDB=="object"}catch{return!1}}function xZ(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const wZ="FirebaseError";class po extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wZ,Object.setPrototypeOf(this,po.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rm.prototype.create)}}class Rm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?SZ(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new po(i,o,r)}}function SZ(t,e){return t.replace(_Z,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const _Z=/\{\$([^}]+)}/g;function EZ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(fj(a)&&fj(s)){if(!Tc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function fj(t){return t!==null&&typeof t=="object"}function Mm(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function mg(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function vg(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TZ(t,e){const n=new AZ(t,e);return n.subscribe.bind(n)}class AZ{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kZ(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=iE),i.error===void 0&&(i.error=iE),i.complete===void 0&&(i.complete=iE);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kZ(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function iE(){}function zt(t){return t&&t._delegate?t._delegate:t}let Ac=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const Au="[DEFAULT]";let CZ=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lZ;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IZ(e))try{this.getOrInitializeService({instanceIdentifier:Au})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Au){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Au){return this.instances.has(e)}getOptions(e=Au){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NZ(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Au){return this.component?this.component.multipleInstances?e:Au:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function NZ(t){return t===Au?void 0:t}function IZ(t){return t.instantiationMode==="EAGER"}class OZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CZ(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var _t;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_t||(_t={}));const PZ={debug:_t.DEBUG,verbose:_t.VERBOSE,info:_t.INFO,warn:_t.WARN,error:_t.ERROR,silent:_t.SILENT},DZ=_t.INFO,RZ={[_t.DEBUG]:"log",[_t.VERBOSE]:"log",[_t.INFO]:"info",[_t.WARN]:"warn",[_t.ERROR]:"error"},MZ=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=RZ[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let p2=class{constructor(e){this.name=e,this._logLevel=DZ,this._logHandler=MZ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _t))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PZ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_t.DEBUG,...e),this._logHandler(this,_t.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_t.VERBOSE,...e),this._logHandler(this,_t.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_t.INFO,...e),this._logHandler(this,_t.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_t.WARN,...e),this._logHandler(this,_t.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_t.ERROR,...e),this._logHandler(this,_t.ERROR,...e)}};const jZ=(t,e)=>e.some(n=>t instanceof n);let hj,pj;function zZ(){return hj||(hj=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LZ(){return pj||(pj=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bU=new WeakMap,zA=new WeakMap,xU=new WeakMap,aE=new WeakMap,g2=new WeakMap;function VZ(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(bc(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&bU.set(n,t)}).catch(()=>{}),g2.set(e,t),e}function BZ(t){if(zA.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});zA.set(t,e)}let LA={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zA.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xU.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UZ(t){LA=t(LA)}function FZ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sE(this),e,...n);return xU.set(r,e.sort?e.sort():[e]),bc(r)}:LZ().includes(t)?function(...e){return t.apply(sE(this),e),bc(bU.get(this))}:function(...e){return bc(t.apply(sE(this),e))}}function $Z(t){return typeof t=="function"?FZ(t):(t instanceof IDBTransaction&&BZ(t),jZ(t,zZ())?new Proxy(t,LA):t)}function bc(t){if(t instanceof IDBRequest)return VZ(t);if(aE.has(t))return aE.get(t);const e=$Z(t);return e!==t&&(aE.set(t,e),g2.set(e,t)),e}const sE=t=>g2.get(t);function qZ(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=bc(s);return r&&s.addEventListener("upgradeneeded",c=>{r(bc(s.result),c.oldVersion,c.newVersion,bc(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const GZ=["get","getKey","getAll","getAllKeys","count"],HZ=["put","add","delete","clear"],oE=new Map;function gj(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(oE.get(e))return oE.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=HZ.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||GZ.includes(n)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(o.shift())),(await Promise.all([d[n](...o),i&&c.done]))[0]};return oE.set(e,a),a}UZ(t=>({...t,get:(e,n,r)=>gj(e,n)||t.get(e,n,r),has:(e,n)=>!!gj(e,n)||t.has(e,n)}));class WZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YZ(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YZ(t){return t.getComponent()?.type==="VERSION"}const VA="@firebase/app",mj="0.14.6";const nl=new p2("@firebase/app"),KZ="@firebase/app-compat",XZ="@firebase/analytics-compat",QZ="@firebase/analytics",ZZ="@firebase/app-check-compat",JZ="@firebase/app-check",eJ="@firebase/auth",tJ="@firebase/auth-compat",nJ="@firebase/database",rJ="@firebase/data-connect",iJ="@firebase/database-compat",aJ="@firebase/functions",sJ="@firebase/functions-compat",oJ="@firebase/installations",lJ="@firebase/installations-compat",cJ="@firebase/messaging",uJ="@firebase/messaging-compat",dJ="@firebase/performance",fJ="@firebase/performance-compat",hJ="@firebase/remote-config",pJ="@firebase/remote-config-compat",gJ="@firebase/storage",mJ="@firebase/storage-compat",vJ="@firebase/firestore",yJ="@firebase/ai",bJ="@firebase/firestore-compat",xJ="firebase",wJ="12.6.0";const BA="[DEFAULT]",SJ={[VA]:"fire-core",[KZ]:"fire-core-compat",[QZ]:"fire-analytics",[XZ]:"fire-analytics-compat",[JZ]:"fire-app-check",[ZZ]:"fire-app-check-compat",[eJ]:"fire-auth",[tJ]:"fire-auth-compat",[nJ]:"fire-rtdb",[rJ]:"fire-data-connect",[iJ]:"fire-rtdb-compat",[aJ]:"fire-fn",[sJ]:"fire-fn-compat",[oJ]:"fire-iid",[lJ]:"fire-iid-compat",[cJ]:"fire-fcm",[uJ]:"fire-fcm-compat",[dJ]:"fire-perf",[fJ]:"fire-perf-compat",[hJ]:"fire-rc",[pJ]:"fire-rc-compat",[gJ]:"fire-gcs",[mJ]:"fire-gcs-compat",[vJ]:"fire-fst",[bJ]:"fire-fst-compat",[yJ]:"fire-vertex","fire-js":"fire-js",[xJ]:"fire-js-all"};const kb=new Map,_J=new Map,UA=new Map;function vj(t,e){try{t.container.addComponent(e)}catch(n){nl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ju(t){const e=t.name;if(UA.has(e))return nl.debug(`There were multiple attempts to register component ${e}.`),!1;UA.set(e,t);for(const n of kb.values())vj(n,t);for(const n of _J.values())vj(n,t);return!0}function f1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ra(t){return t==null?!1:t.settings!==void 0}const EJ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xc=new Rm("app","Firebase",EJ);class TJ{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ac("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xc.create("app-deleted",{appName:this._name})}}const Oh=wJ;function wU(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:BA,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw xc.create("bad-app-name",{appName:String(i)});if(n||(n=vU()),!n)throw xc.create("no-options");const a=kb.get(i);if(a){if(Tc(n,a.options)&&Tc(r,a.config))return a;throw xc.create("duplicate-app",{appName:i})}const s=new OZ(i);for(const c of UA.values())s.addComponent(c);const o=new TJ(n,r,s);return kb.set(i,o),o}function m2(t=BA){const e=kb.get(t);if(!e&&t===BA&&vU())return wU();if(!e)throw xc.create("no-app",{appName:t});return e}function Qs(t,e,n){let r=SJ[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nl.warn(s.join(" "));return}Ju(new Ac(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const AJ="firebase-heartbeat-database",kJ=1,Yg="firebase-heartbeat-store";let lE=null;function SU(){return lE||(lE=qZ(AJ,kJ,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yg)}catch(n){console.warn(n)}}}}).catch(t=>{throw xc.create("idb-open",{originalErrorMessage:t.message})})),lE}async function CJ(t){try{const n=(await SU()).transaction(Yg),r=await n.objectStore(Yg).get(_U(t));return await n.done,r}catch(e){if(e instanceof po)nl.warn(e.message);else{const n=xc.create("idb-get",{originalErrorMessage:e?.message});nl.warn(n.message)}}}async function yj(t,e){try{const r=(await SU()).transaction(Yg,"readwrite");await r.objectStore(Yg).put(e,_U(t)),await r.done}catch(n){if(n instanceof po)nl.warn(n.message);else{const r=xc.create("idb-set",{originalErrorMessage:n?.message});nl.warn(r.message)}}}function _U(t){return`${t.name}!${t.options.appId}`}const NJ=1024,IJ=30;class OJ{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DJ(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=bj();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>IJ){const i=RJ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){nl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=bj(),{heartbeatsToSend:n,unsentEntries:r}=PJ(this._heartbeatsCache.heartbeats),i=Ab(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return nl.warn(e),""}}}function bj(){return new Date().toISOString().substring(0,10)}function PJ(t,e=NJ){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),xj(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xj(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DJ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bZ()?xZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CJ(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yj(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yj(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function xj(t){return Ab(JSON.stringify({version:2,heartbeats:t})).length}function RJ(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function MJ(t){Ju(new Ac("platform-logger",e=>new WZ(e),"PRIVATE")),Ju(new Ac("heartbeat",e=>new OJ(e),"PRIVATE")),Qs(VA,mj,t),Qs(VA,mj,"esm2020"),Qs("fire-js","")}MJ("");function EU(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jJ=EU,TU=new Rm("auth","Firebase",EU());const Cb=new p2("@firebase/auth");function zJ(t,...e){Cb.logLevel<=_t.WARN&&Cb.warn(`Auth (${Oh}): ${t}`,...e)}function nb(t,...e){Cb.logLevel<=_t.ERROR&&Cb.error(`Auth (${Oh}): ${t}`,...e)}function gs(t,...e){throw v2(t,...e)}function Zs(t,...e){return v2(t,...e)}function AU(t,e,n){const r={...jJ(),[e]:n};return new Rm("auth","Firebase",r).create(e,{appName:t.name})}function Yo(t){return AU(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function v2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return TU.create(t,...e)}function Qe(t,e,...n){if(!t)throw v2(e,...n)}function $o(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nb(e),new Error(e)}function rl(t,e){t||$o(e)}function FA(){return typeof self<"u"&&self.location?.href||""}function LJ(){return wj()==="http:"||wj()==="https:"}function wj(){return typeof self<"u"&&self.location?.protocol||null}function VJ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LJ()||gZ()||"connection"in navigator)?navigator.onLine:!0}function BJ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class jm{constructor(e,n){this.shortDelay=e,this.longDelay=n,rl(n>e,"Short delay should be less than long delay!"),this.isMobile=fZ()||mZ()}get(){return VJ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function y2(t,e){rl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class kU{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$o("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$o("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$o("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const UJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const FJ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$J=new jm(3e4,6e4);function ws(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ua(t,e,n,r,i={}){return CU(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=Mm({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...a};return pZ()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Uc(t.emulatorConfig.host)&&(d.credentials="include"),kU.fetch()(await NU(t,t.config.apiHost,n,o),d)})}async function CU(t,e,n){t._canInitEmulator=!1;const r={...UJ,...e};try{const i=new GJ(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw ay(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,d]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ay(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw ay(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw ay(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw AU(t,f,d);gs(t,f)}}catch(i){if(i instanceof po)throw i;gs(t,"network-request-failed",{message:String(i)})}}async function zm(t,e,n,r,i={}){const a=await Ua(t,e,n,r,i);return"mfaPendingCredential"in a&&gs(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function NU(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?y2(t.config,i):`${t.config.apiScheme}://${i}`;return FJ.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function qJ(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GJ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zs(this.auth,"network-request-failed")),$J.get())})}}function ay(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Zs(t,e,r);return i.customData._tokenResponse=n,i}function Sj(t){return t!==void 0&&t.enterprise!==void 0}class HJ{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return qJ(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WJ(t,e){return Ua(t,"GET","/v2/recaptchaConfig",ws(t,e))}async function YJ(t,e){return Ua(t,"POST","/v1/accounts:delete",e)}async function Nb(t,e){return Ua(t,"POST","/v1/accounts:lookup",e)}function Og(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KJ(t,e=!1){const n=zt(t),r=await n.getIdToken(e),i=b2(r);Qe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a?.sign_in_provider;return{claims:i,token:r,authTime:Og(cE(i.auth_time)),issuedAtTime:Og(cE(i.iat)),expirationTime:Og(cE(i.exp)),signInProvider:s||null,signInSecondFactor:a?.sign_in_second_factor||null}}function cE(t){return Number(t)*1e3}function b2(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nb("JWT malformed, contained fewer than 3 sections"),null;try{const i=pU(n);return i?JSON.parse(i):(nb("Failed to decode base64 JWT payload"),null)}catch(i){return nb("Caught error parsing JWT payload as JSON",i?.toString()),null}}function _j(t){const e=b2(t);return Qe(e,"internal-error"),Qe(typeof e.exp<"u","internal-error"),Qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function th(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof po&&XJ(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function XJ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class QJ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class $A{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Og(this.lastLoginAt),this.creationTime=Og(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ib(t){const e=t.auth,n=await t.getIdToken(),r=await th(t,Nb(e,{idToken:n}));Qe(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?IU(i.providerUserInfo):[],s=JJ(t.providerData,a),o=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!s?.length,d=o?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new $A(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function ZJ(t){const e=zt(t);await Ib(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JJ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function IU(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function eee(t,e){const n=await CU(t,{},async()=>{const r=Mm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await NU(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&Uc(t.emulatorConfig.host)&&(c.credentials="include"),kU.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tee(t,e){return Ua(t,"POST","/v2/accounts:revokeToken",ws(t,e))}class qf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken<"u","internal-error"),Qe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_j(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Qe(e.length!==0,"internal-error");const n=_j(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await eee(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new qf;return r&&(Qe(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Qe(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(Qe(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qf,this.toJSON())}_performRefresh(){return $o("not implemented")}}function ic(t,e){Qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class cs{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new QJ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $A(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await th(this,this.stsTokenManager.getToken(this.auth,e));return Qe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return KJ(this,e)}reload(){return ZJ(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new cs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ib(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ra(this.auth.app))return Promise.reject(Yo(this.auth));const e=await this.getIdToken();return await th(this,YJ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,s=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:h,emailVerified:g,isAnonymous:v,providerData:b,stsTokenManager:x}=n;Qe(h&&x,e,"internal-error");const w=qf.fromJSON(this.name,x);Qe(typeof h=="string",e,"internal-error"),ic(r,e.name),ic(i,e.name),Qe(typeof g=="boolean",e,"internal-error"),Qe(typeof v=="boolean",e,"internal-error"),ic(a,e.name),ic(s,e.name),ic(o,e.name),ic(c,e.name),ic(d,e.name),ic(f,e.name);const _=new cs({uid:h,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:v,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:w,createdAt:d,lastLoginAt:f});return b&&Array.isArray(b)&&(_.providerData=b.map(T=>({...T}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new qf;i.updateFromServerResponse(n);const a=new cs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ib(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Qe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?IU(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!a?.length,o=new qf;o.updateFromIdToken(r);const c=new cs({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new $A(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,d),c}}const Ej=new Map;function qo(t){rl(t instanceof Function,"Expected a class definition");let e=Ej.get(t);return e?(rl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ej.set(t,e),e)}class OU{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}OU.type="NONE";const Tj=OU;function rb(t,e,n){return`firebase:${t}:${e}:${n}`}class Gf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=rb(this.userKey,i.apiKey,a),this.fullPersistenceKey=rb("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Nb(this.auth,{idToken:e}).catch(()=>{});return n?cs._fromGetAccountInfoResponse(this.auth,n,e):null}return cs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Gf(qo(Tj),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||qo(Tj);const s=rb(r,e.config.apiKey,e.name);let o=null;for(const d of n)try{const f=await d._get(s);if(f){let h;if(typeof f=="string"){const g=await Nb(e,{idToken:f}).catch(()=>{});if(!g)break;h=await cs._fromGetAccountInfoResponse(e,g,f)}else h=cs._fromJSON(e,f);d!==a&&(o=h),a=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Gf(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(s)}catch{}})),new Gf(a,e,r))}}function Aj(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zU(e))return"Blackberry";if(LU(e))return"Webos";if(DU(e))return"Safari";if((e.includes("chrome/")||RU(e))&&!e.includes("edge/"))return"Chrome";if(jU(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function PU(t=si()){return/firefox\//i.test(t)}function DU(t=si()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RU(t=si()){return/crios\//i.test(t)}function MU(t=si()){return/iemobile/i.test(t)}function jU(t=si()){return/android/i.test(t)}function zU(t=si()){return/blackberry/i.test(t)}function LU(t=si()){return/webos/i.test(t)}function x2(t=si()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nee(t=si()){return x2(t)&&!!window.navigator?.standalone}function ree(){return vZ()&&document.documentMode===10}function VU(t=si()){return x2(t)||jU(t)||LU(t)||zU(t)||/windows phone/i.test(t)||MU(t)}function BU(t,e=[]){let n;switch(t){case"Browser":n=Aj(si());break;case"Worker":n=`${Aj(si())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oh}/${r}`}class iee{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function aee(t,e={}){return Ua(t,"GET","/v2/passwordPolicy",ws(t,e))}const see=6;class oee{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??see,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class lee{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kj(this),this.idTokenSubscription=new kj(this),this.beforeStateQueue=new iee(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TU,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qo(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Gf.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nb(this,{idToken:e}),r=await cs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ra(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,s=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!a||a===s)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ib(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BJ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ra(this.app))return Promise.reject(Yo(this));const n=e?zt(e):null;return n&&Qe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ra(this.app)?Promise.reject(Yo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ra(this.app)?Promise.reject(Yo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aee(this),n=new oee(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rm("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await tee(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qo(e)||this._popupRedirectResolver;Qe(n,this,"argument-error"),this.redirectPersistenceManager=await Gf.create(this,[qo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ra(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&zJ(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Fc(t){return zt(t)}class kj{constructor(e){this.auth=e,this.observer=null,this.addObserver=TZ(n=>this.observer=n)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let h1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cee(t){h1=t}function UU(t){return h1.loadJS(t)}function uee(){return h1.recaptchaEnterpriseScript}function dee(){return h1.gapiScript}function fee(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class hee{constructor(){this.enterprise=new pee}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class pee{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const gee="recaptcha-enterprise",FU="NO_RECAPTCHA";class mee{constructor(e){this.type=gee,this.auth=Fc(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{WJ(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const d=new HJ(c);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,s(d.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;Sj(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(d=>{s(d)}).catch(()=>{s(FU)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hee().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&Sj(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=uee();c.length!==0&&(c+=o),UU(c).then(()=>{i(o,a,s)}).catch(d=>{s(d)})}}).catch(o=>{s(o)})})}}async function Cj(t,e,n,r=!1,i=!1){const a=new mee(t);let s;if(i)s=FU;else try{s=await a.verify(n)}catch{s=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ob(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Cj(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Cj(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(a)})}function vee(t,e){const n=f1(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Tc(a,e??{}))return i;gs(i,"already-initialized")}return n.initialize({options:e})}function yee(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(qo);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function bee(t,e,n){const r=Fc(t);Qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=$U(e),{host:s,port:o}=xee(e),c=o===null?"":`:${o}`,d={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Qe(Tc(d,r.config.emulator)&&Tc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Uc(s)?(f2(`${a}//${s}${c}`),h2("Auth",!0)):wee()}function $U(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xee(t){const e=$U(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Nj(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:Nj(s)}}}function Nj(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wee(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class w2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $o("not implemented")}_getIdTokenResponse(e){return $o("not implemented")}_linkToIdToken(e,n){return $o("not implemented")}_getReauthenticationResolver(e){return $o("not implemented")}}async function See(t,e){return Ua(t,"POST","/v1/accounts:resetPassword",ws(t,e))}async function _ee(t,e){return Ua(t,"POST","/v1/accounts:signUp",e)}async function Eee(t,e){return Ua(t,"POST","/v1/accounts:update",ws(t,e))}async function Tee(t,e){return zm(t,"POST","/v1/accounts:signInWithPassword",ws(t,e))}async function qU(t,e){return Ua(t,"POST","/v1/accounts:sendOobCode",ws(t,e))}async function Aee(t,e){return qU(t,e)}async function kee(t,e){return qU(t,e)}async function Cee(t,e){return zm(t,"POST","/v1/accounts:signInWithEmailLink",ws(t,e))}async function Nee(t,e){return zm(t,"POST","/v1/accounts:signInWithEmailLink",ws(t,e))}class Kg extends w2{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Kg(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Kg(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ob(e,n,"signInWithPassword",Tee);case"emailLink":return Cee(e,{email:this._email,oobCode:this._password});default:gs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ob(e,r,"signUpPassword",_ee);case"emailLink":return Nee(e,{idToken:n,email:this._email,oobCode:this._password});default:gs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Hf(t,e){return zm(t,"POST","/v1/accounts:signInWithIdp",ws(t,e))}const Iee="http://localhost";class ed extends w2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ed(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):gs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const s=new ed(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Hf(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Hf(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hf(e,n)}buildRequest(){const e={requestUri:Iee,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Mm(n)}return e}}function Oee(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Pee(t){const e=mg(vg(t)).link,n=e?mg(vg(e)).deep_link_id:null,r=mg(vg(t)).deep_link_id;return(r?mg(vg(r)).link:null)||r||n||e||t}class S2{constructor(e){const n=mg(vg(e)),r=n.apiKey??null,i=n.oobCode??null,a=Oee(n.mode??null);Qe(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Pee(e);try{return new S2(n)}catch{return null}}}class vd{constructor(){this.providerId=vd.PROVIDER_ID}static credential(e,n){return Kg._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=S2.parseLink(n);return Qe(r,"argument-error"),Kg._fromEmailAndCode(e,r.code,r.tenantId)}}vd.PROVIDER_ID="password";vd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class GU{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Lm extends GU{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cc extends Lm{constructor(){super("facebook.com")}static credential(e){return ed._fromParams({providerId:cc.PROVIDER_ID,signInMethod:cc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cc.credentialFromTaggedObject(e)}static credentialFromError(e){return cc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cc.credential(e.oauthAccessToken)}catch{return null}}}cc.FACEBOOK_SIGN_IN_METHOD="facebook.com";cc.PROVIDER_ID="facebook.com";class uc extends Lm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ed._fromParams({providerId:uc.PROVIDER_ID,signInMethod:uc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return uc.credentialFromTaggedObject(e)}static credentialFromError(e){return uc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return uc.credential(n,r)}catch{return null}}}uc.GOOGLE_SIGN_IN_METHOD="google.com";uc.PROVIDER_ID="google.com";class dc extends Lm{constructor(){super("github.com")}static credential(e){return ed._fromParams({providerId:dc.PROVIDER_ID,signInMethod:dc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dc.credentialFromTaggedObject(e)}static credentialFromError(e){return dc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dc.credential(e.oauthAccessToken)}catch{return null}}}dc.GITHUB_SIGN_IN_METHOD="github.com";dc.PROVIDER_ID="github.com";class fc extends Lm{constructor(){super("twitter.com")}static credential(e,n){return ed._fromParams({providerId:fc.PROVIDER_ID,signInMethod:fc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fc.credentialFromTaggedObject(e)}static credentialFromError(e){return fc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fc.credential(n,r)}catch{return null}}}fc.TWITTER_SIGN_IN_METHOD="twitter.com";fc.PROVIDER_ID="twitter.com";async function Dee(t,e){return zm(t,"POST","/v1/accounts:signUp",ws(t,e))}class td{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await cs._fromIdTokenResponse(e,r,i),s=Ij(r);return new td({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Ij(r);return new td({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Ij(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Pb extends po{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Pb.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Pb(e,n,r,i)}}function HU(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Pb._fromErrorAndOperation(t,a,e,r):a})}async function Ree(t,e,n=!1){const r=await th(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return td._forOperation(t,"link",r)}async function WU(t,e,n=!1){const{auth:r}=t;if(ra(r.app))return Promise.reject(Yo(r));const i="reauthenticate";try{const a=await th(t,HU(r,i,e,t),n);Qe(a.idToken,r,"internal-error");const s=b2(a.idToken);Qe(s,r,"internal-error");const{sub:o}=s;return Qe(t.uid===o,r,"user-mismatch"),td._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&gs(r,"user-mismatch"),a}}async function YU(t,e,n=!1){if(ra(t.app))return Promise.reject(Yo(t));const r="signIn",i=await HU(t,r,e),a=await td._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function Mee(t,e){return YU(Fc(t),e)}async function jee(t,e){return WU(zt(t),e)}function zee(t,e,n){Qe(n.url?.length>0,t,"invalid-continue-uri"),Qe(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Qe(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Qe(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Qe(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function _2(t){const e=Fc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Lee(t,e,n){const r=Fc(t);await Ob(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",kee)}async function Vee(t,e,n){await See(zt(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_2(t),r})}async function Bee(t,e){await Eee(zt(t),{oobCode:e})}async function Uee(t,e,n){if(ra(t.app))return Promise.reject(Yo(t));const r=Fc(t),s=await Ob(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dee).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&_2(t),c}),o=await td._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function Fee(t,e,n){return ra(t.app)?Promise.reject(Yo(t)):Mee(zt(t),vd.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_2(t),r})}async function Oj(t,e){const n=zt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&zee(n.auth,i,e);const{email:a}=await Aee(n.auth,i);a!==t.email&&await t.reload()}async function $ee(t,e){return Ua(t,"POST","/v1/accounts:update",e)}async function qee(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=zt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await th(r,$ee(r.auth,a));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function Gee(t,e,n,r){return zt(t).onIdTokenChanged(e,n,r)}function Hee(t,e,n){return zt(t).beforeAuthStateChanged(e,n)}function Wee(t,e,n,r){return zt(t).onAuthStateChanged(e,n,r)}function Pj(t){return zt(t).signOut()}async function Yee(t){return zt(t).delete()}const Db="__sak";class KU{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Db,"1"),this.storage.removeItem(Db),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Kee=1e3,Xee=10;class XU extends KU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VU(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);ree()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Xee):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Kee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}XU.type="LOCAL";const Qee=XU;class QU extends KU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}QU.type="SESSION";const ZU=QU;function Zee(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class p1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new p1(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!s?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async d=>d(n.origin,a)),c=await Zee(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}p1.receivers=[];function E2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class Jee{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const d=E2("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const g=h;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Js(){return window}function ete(t){Js().location.href=t}function JU(){return typeof Js().WorkerGlobalScope<"u"&&typeof Js().importScripts=="function"}async function tte(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nte(){return navigator?.serviceWorker?.controller||null}function rte(){return JU()?self:null}const e9="firebaseLocalStorageDb",ite=1,Rb="firebaseLocalStorage",t9="fbase_key";class Vm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function g1(t,e){return t.transaction([Rb],e?"readwrite":"readonly").objectStore(Rb)}function ate(){const t=indexedDB.deleteDatabase(e9);return new Vm(t).toPromise()}function qA(){const t=indexedDB.open(e9,ite);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Rb,{keyPath:t9})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Rb)?e(r):(r.close(),await ate(),e(await qA()))})})}async function Dj(t,e,n){const r=g1(t,!0).put({[t9]:e,value:n});return new Vm(r).toPromise()}async function ste(t,e){const n=g1(t,!1).get(e),r=await new Vm(n).toPromise();return r===void 0?null:r.value}function Rj(t,e){const n=g1(t,!0).delete(e);return new Vm(n).toPromise()}const ote=800,lte=3;class n9{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qA(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>lte)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JU()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=p1._getInstance(rte()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await tte(),!this.activeServiceWorker)return;this.sender=new Jee(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nte()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qA();return await Dj(e,Db,"1"),await Rj(e,Db),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Dj(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ste(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Rj(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=g1(i,!1).getAll();return new Vm(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ote)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}n9.type="LOCAL";const cte=n9;new jm(3e4,6e4);function ute(t,e){return e?qo(e):(Qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class T2 extends w2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hf(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hf(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hf(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dte(t){return YU(t.auth,new T2(t),t.bypassAuthState)}function fte(t){const{auth:e,user:n}=t;return Qe(n,e,"internal-error"),WU(n,new T2(t),t.bypassAuthState)}async function hte(t){const{auth:e,user:n}=t;return Qe(n,e,"internal-error"),Ree(n,new T2(t),t.bypassAuthState)}class r9{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dte;case"linkViaPopup":case"linkViaRedirect":return hte;case"reauthViaPopup":case"reauthViaRedirect":return fte;default:gs(this.auth,"internal-error")}}resolve(e){rl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pte=new jm(2e3,1e4);class Of extends r9{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Of.currentPopupAction&&Of.currentPopupAction.cancel(),Of.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){rl(this.filter.length===1,"Popup operations only handle one event");const e=E2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Of.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pte.get())};e()}}Of.currentPopupAction=null;const gte="pendingRedirect",ib=new Map;class mte extends r9{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ib.get(this.auth._key());if(!e){try{const r=await vte(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ib.set(this.auth._key(),e)}return this.bypassAuthState||ib.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vte(t,e){const n=xte(e),r=bte(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function yte(t,e){ib.set(t._key(),e)}function bte(t){return qo(t._redirectPersistence)}function xte(t){return rb(gte,t.config.apiKey,t.name)}async function wte(t,e,n=!1){if(ra(t.app))return Promise.reject(Yo(t));const r=Fc(t),i=ute(r,e),s=await new mte(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}const Ste=600*1e3;class _te{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ete(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!i9(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Zs(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ste&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mj(e))}saveEventToCache(e){this.cachedEventUids.add(Mj(e)),this.lastProcessedEventTime=Date.now()}}function Mj(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function i9({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Ete(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return i9(t);default:return!1}}async function Tte(t,e={}){return Ua(t,"GET","/v1/projects",e)}const Ate=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kte=/^https?/;async function Cte(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Tte(t);for(const n of e)try{if(Nte(n))return}catch{}gs(t,"unauthorized-domain")}function Nte(t){const e=FA(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!kte.test(n))return!1;if(Ate.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ite=new jm(3e4,6e4);function jj(){const t=Js().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ote(t){return new Promise((e,n)=>{function r(){jj(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jj(),n(Zs(t,"network-request-failed"))},timeout:Ite.get()})}if(Js().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Js().gapi?.load)r();else{const i=fee("iframefcb");return Js()[i]=()=>{gapi.load?r():n(Zs(t,"network-request-failed"))},UU(`${dee()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw ab=null,e})}let ab=null;function Pte(t){return ab=ab||Ote(t),ab}const Dte=new jm(5e3,15e3),Rte="__/auth/iframe",Mte="emulator/auth/iframe",jte={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zte=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lte(t){const e=t.config;Qe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?y2(e,Mte):`https://${t.config.authDomain}/${Rte}`,r={apiKey:e.apiKey,appName:t.name,v:Oh},i=zte.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Mm(r).slice(1)}`}async function Vte(t){const e=await Pte(t),n=Js().gapi;return Qe(n,t,"internal-error"),e.open({where:document.body,url:Lte(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jte,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=Zs(t,"network-request-failed"),o=Js().setTimeout(()=>{a(s)},Dte.get());function c(){Js().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}const Bte={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ute=500,Fte=600,$te="_blank",qte="http://localhost";class zj{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Gte(t,e,n,r=Ute,i=Fte){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={...Bte,width:r.toString(),height:i.toString(),top:a,left:s},d=si().toLowerCase();n&&(o=RU(d)?$te:n),PU(d)&&(e=e||qte,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[v,b])=>`${g}${v}=${b},`,"");if(nee(d)&&o!=="_self")return Hte(e||"",o),new zj(null);const h=window.open(e||"",o,f);Qe(h,t,"popup-blocked");try{h.focus()}catch{}return new zj(h)}function Hte(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const Wte="__/auth/handler",Yte="emulator/auth/handler",Kte=encodeURIComponent("fac");async function Lj(t,e,n,r,i,a){Qe(t.config.authDomain,t,"auth-domain-config-required"),Qe(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Oh,eventId:i};if(e instanceof GU){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",EZ(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))s[f]=h}if(e instanceof Lm){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),d=c?`#${Kte}=${encodeURIComponent(c)}`:"";return`${Xte(t)}?${Mm(o).slice(1)}${d}`}function Xte({config:t}){return t.emulator?y2(t,Yte):`https://${t.authDomain}/${Wte}`}const uE="webStorageSupport";class Qte{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZU,this._completeRedirectFn=wte,this._overrideRedirectResult=yte}async _openPopup(e,n,r,i){rl(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await Lj(e,n,r,FA(),i);return Gte(e,a,E2())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await Lj(e,n,r,FA(),i);return ete(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(rl(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Vte(e),r=new _te(e);return n.register("authEvent",i=>(Qe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(uE,{type:uE},i=>{const a=i?.[0]?.[uE];a!==void 0&&n(!!a),gs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Cte(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VU()||DU()||x2()}}const Zte=Qte;var Vj="@firebase/auth",Bj="1.11.1";class Jte{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ene(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tne(t){Ju(new Ac("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;Qe(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BU(t)},d=new lee(r,i,a,c);return yee(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ju(new Ac("auth-internal",e=>{const n=Fc(e.getProvider("auth").getImmediate());return(r=>new Jte(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qs(Vj,Bj,ene(t)),Qs(Vj,Bj,"esm2020")}const nne=300,rne=yU("authIdTokenMaxAge")||nne;let Uj=null;const ine=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rne)return;const i=n?.token;Uj!==i&&(Uj=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function a9(t=m2()){const e=f1(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vee(t,{popupRedirectResolver:Zte,persistence:[cte,Qee,ZU]}),r=yU("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=ine(a.toString());Hee(n,s,()=>s(n.currentUser)),Gee(n,o=>s(o))}}const i=gU("auth");return i&&bee(n,`http://${i}`),n}function ane(){return document.getElementsByTagName("head")?.[0]??document}cee({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Zs("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",ane().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tne("Browser");var Fj="popstate";function sne(t={}){function e(i,a){let{pathname:s="/",search:o="",hash:c=""}=yd(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),GA("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=i.location.href,d=c.indexOf("#");o=d===-1?c:c.slice(0,d)}return o+"#"+(typeof a=="string"?a:Xg(a))}function r(i,a){Ma(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return lne(e,n,r,t)}function Cn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ma(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function one(){return Math.random().toString(36).substring(2,10)}function $j(t,e){return{usr:t.state,key:t.key,idx:e}}function GA(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?yd(e):e,state:n,key:e&&e.key||r||one()}}function Xg({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function yd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function lne(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,d=f();d==null&&(d=0,s.replaceState({...s.state,idx:d},""));function f(){return(s.state||{idx:null}).idx}function h(){o="POP";let w=f(),_=w==null?null:w-d;d=w,c&&c({action:o,location:x.location,delta:_})}function g(w,_){o="PUSH";let T=GA(x.location,w,_);n&&n(T,w),d=f()+1;let N=$j(T,d),D=x.createHref(T);try{s.pushState(N,"",D)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(D)}a&&c&&c({action:o,location:x.location,delta:1})}function v(w,_){o="REPLACE";let T=GA(x.location,w,_);n&&n(T,w),d=f();let N=$j(T,d),D=x.createHref(T);s.replaceState(N,"",D),a&&c&&c({action:o,location:x.location,delta:0})}function b(w){return cne(w)}let x={get action(){return o},get location(){return t(i,s)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Fj,h),c=w,()=>{i.removeEventListener(Fj,h),c=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let _=b(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:v,go(w){return s.go(w)}};return x}function cne(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Cn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Xg(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function s9(t,e,n="/"){return une(t,e,n,!1)}function une(t,e,n,r){let i=typeof e=="string"?yd(e):e,a=il(i.pathname||"/",n);if(a==null)return null;let s=o9(t);dne(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let d=Sne(a);o=xne(s[c],d,r)}return o}function o9(t,e=[],n=[],r="",i=!1){let a=(s,o,c=i,d)=>{let f={relativePath:d===void 0?s.path||"":d,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;Cn(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let h=Ko([r,f.relativePath]),g=n.concat(f);s.children&&s.children.length>0&&(Cn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),o9(s.children,e,g,h,c)),!(s.path==null&&!s.index)&&e.push({path:h,score:yne(h,s.index),routesMeta:g})};return t.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let c of l9(s.path))a(s,o,!0,c)}),e}function l9(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=l9(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function dne(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bne(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var fne=/^:[\w-]+$/,hne=3,pne=2,gne=1,mne=10,vne=-2,qj=t=>t==="*";function yne(t,e){let n=t.split("/"),r=n.length;return n.some(qj)&&(r+=vne),e&&(r+=pne),n.filter(i=>!qj(i)).reduce((i,a)=>i+(fne.test(a)?hne:a===""?gne:mne),r)}function bne(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function xne(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],d=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=Mb({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!h&&d&&n&&!r[r.length-1].route.index&&(h=Mb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:Ko([a,h.pathname]),pathnameBase:Ane(Ko([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=Ko([a,h.pathnameBase]))}return s}function Mb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=wne(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:h},g)=>{if(f==="*"){let b=o[g]||"";s=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const v=o[g];return h&&!v?d[f]=void 0:d[f]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:s,pattern:t}}function wne(t,e=!1,n=!0){Ma(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Sne(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ma(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function il(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var _ne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Ene(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?yd(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=Gj(n.substring(1),"/"):a=Gj(n,e)):a=e,{pathname:a,search:kne(r),hash:Cne(i)}}function Gj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function dE(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Tne(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function c9(t){let e=Tne(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function u9(t,e,n,r=!1){let i;typeof t=="string"?i=yd(t):(i={...t},Cn(!i.pathname||!i.pathname.includes("?"),dE("?","pathname","search",i)),Cn(!i.pathname||!i.pathname.includes("#"),dE("#","pathname","hash",i)),Cn(!i.search||!i.search.includes("#"),dE("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}o=h>=0?e[h]:"/"}let c=Ene(i,o),d=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}var Ko=t=>t.join("/").replace(/\/\/+/g,"/"),Ane=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kne=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Cne=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Nne=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Ine(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function One(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var d9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function f9(t,e){let n=t;if(typeof n!="string"||!_ne.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(d9)try{let a=new URL(window.location.href),s=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=il(s.pathname,e);s.origin===a.origin&&o!=null?n=o+s.search+s.hash:i=!0}catch{Ma(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var h9=["POST","PUT","PATCH","DELETE"];new Set(h9);var Pne=["GET",...h9];new Set(Pne);var Ph=A.createContext(null);Ph.displayName="DataRouter";var m1=A.createContext(null);m1.displayName="DataRouterState";var Dne=A.createContext(!1),p9=A.createContext({isTransitioning:!1});p9.displayName="ViewTransition";var Rne=A.createContext(new Map);Rne.displayName="Fetchers";var Mne=A.createContext(null);Mne.displayName="Await";var Fa=A.createContext(null);Fa.displayName="Navigation";var Bm=A.createContext(null);Bm.displayName="Location";var go=A.createContext({outlet:null,matches:[],isDataRoute:!1});go.displayName="Route";var A2=A.createContext(null);A2.displayName="RouteError";var g9="REACT_ROUTER_ERROR",jne="REDIRECT",zne="ROUTE_ERROR_RESPONSE";function Lne(t){if(t.startsWith(`${g9}:${jne}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Vne(t){if(t.startsWith(`${g9}:${zne}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Nne(e.status,e.statusText,e.data)}catch{}}function Bne(t,{relative:e}={}){Cn(Um(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Fa),{hash:i,pathname:a,search:s}=Fm(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:Ko([n,a])),r.createHref({pathname:o,search:s,hash:i})}function Um(){return A.useContext(Bm)!=null}function Ss(){return Cn(Um(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Bm).location}var m9="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function v9(t){A.useContext(Fa).static||A.useLayoutEffect(t)}function $a(){let{isDataRoute:t}=A.useContext(go);return t?ere():Une()}function Une(){Cn(Um(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Ph),{basename:e,navigator:n}=A.useContext(Fa),{matches:r}=A.useContext(go),{pathname:i}=Ss(),a=JSON.stringify(c9(r)),s=A.useRef(!1);return v9(()=>{s.current=!0}),A.useCallback((c,d={})=>{if(Ma(s.current,m9),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=u9(c,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ko([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,a,i,t])}A.createContext(null);function Fne(){let{matches:t}=A.useContext(go),e=t[t.length-1];return e?e.params:{}}function Fm(t,{relative:e}={}){let{matches:n}=A.useContext(go),{pathname:r}=Ss(),i=JSON.stringify(c9(n));return A.useMemo(()=>u9(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function $ne(t,e){return y9(t,e)}function y9(t,e,n,r,i){Cn(Um(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(Fa),{matches:s}=A.useContext(go),o=s[s.length-1],c=o?o.params:{},d=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let T=h&&h.path||"";x9(d,!h||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let g=Ss(),v;if(e){let T=typeof e=="string"?yd(e):e;Cn(f==="/"||T.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${T.pathname}" was given in the \`location\` prop.`),v=T}else v=g;let b=v.pathname||"/",x=b;if(f!=="/"){let T=f.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let w=s9(t,{pathname:x});Ma(h||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Ma(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=Yne(w&&w.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:Ko([f,a.encodeLocation?a.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:Ko([f,a.encodeLocation?a.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),s,n,r,i);return e&&_?A.createElement(Bm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},_):_}function qne(){let t=Jne(),e=Ine(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,s)}var Gne=A.createElement(qne,null),b9=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=Vne(t.digest);n&&(t=n)}let e=t!==void 0?A.createElement(go.Provider,{value:this.props.routeContext},A.createElement(A2.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?A.createElement(Hne,{error:t},e):e}};b9.contextType=Dne;var fE=new WeakMap;function Hne({children:t,error:e}){let{basename:n}=A.useContext(Fa);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=Lne(e.digest);if(r){let i=fE.get(e);if(i)throw i;let a=f9(r.location,n);if(d9&&!fE.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw fE.set(e,s),s}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function Wne({routeContext:t,match:e,children:n}){let r=A.useContext(Ph);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(go.Provider,{value:t},n)}function Yne(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n?.errors;if(s!=null){let f=a.findIndex(h=>h.route.id&&s?.[h.route.id]!==void 0);Cn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,c=-1;if(n)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:v}=n,b=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||b){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let d=n&&r?(f,h)=>{r(f,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:One(n.matches),errorInfo:h})}:void 0;return a.reduceRight((f,h,g)=>{let v,b=!1,x=null,w=null;n&&(v=s&&h.route.id?s[h.route.id]:void 0,x=h.route.errorElement||Gne,o&&(c<0&&g===0?(x9("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):c===g&&(b=!0,w=h.route.hydrateFallbackElement||null)));let _=e.concat(a.slice(0,g+1)),T=()=>{let N;return v?N=x:b?N=w:h.route.Component?N=A.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=f,A.createElement(Wne,{match:h,routeContext:{outlet:f,matches:_,isDataRoute:n!=null},children:N})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?A.createElement(b9,{location:n.location,revalidation:n.revalidation,component:x,error:v,children:T(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:d}):T()},null)}function k2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Kne(t){let e=A.useContext(Ph);return Cn(e,k2(t)),e}function Xne(t){let e=A.useContext(m1);return Cn(e,k2(t)),e}function Qne(t){let e=A.useContext(go);return Cn(e,k2(t)),e}function C2(t){let e=Qne(t),n=e.matches[e.matches.length-1];return Cn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Zne(){return C2("useRouteId")}function Jne(){let t=A.useContext(A2),e=Xne("useRouteError"),n=C2("useRouteError");return t!==void 0?t:e.errors?.[n]}function ere(){let{router:t}=Kne("useNavigate"),e=C2("useNavigate"),n=A.useRef(!1);return v9(()=>{n.current=!0}),A.useCallback(async(i,a={})=>{Ma(n.current,m9),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var Hj={};function x9(t,e,n){!e&&!Hj[t]&&(Hj[t]=!0,Ma(!1,n))}A.memo(tre);function tre({routes:t,future:e,state:n,onError:r}){return y9(t,void 0,n,r,e)}function Gs(t){Cn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nre({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){Cn(!Um(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof n=="string"&&(n=yd(n));let{pathname:d="/",search:f="",hash:h="",state:g=null,key:v="default"}=n,b=A.useMemo(()=>{let x=il(d,o);return x==null?null:{location:{pathname:x,search:f,hash:h,state:g,key:v},navigationType:r}},[o,d,f,h,g,v,r]);return Ma(b!=null,`<Router basename="${o}"> is not able to match the URL "${d}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(Fa.Provider,{value:c},A.createElement(Bm.Provider,{children:e,value:b}))}function rre({children:t,location:e}){return $ne(HA(t),e)}function HA(t,e=[]){let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let a=[...e,i];if(r.type===A.Fragment){n.push.apply(n,HA(r.props.children,a));return}Cn(r.type===Gs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Cn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=HA(r.props.children,a)),n.push(s)}),n}var sb="get",ob="application/x-www-form-urlencoded";function v1(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function ire(t){return v1(t)&&t.tagName.toLowerCase()==="button"}function are(t){return v1(t)&&t.tagName.toLowerCase()==="form"}function sre(t){return v1(t)&&t.tagName.toLowerCase()==="input"}function ore(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lre(t,e){return t.button===0&&(!e||e==="_self")&&!ore(t)}function WA(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function cre(t,e){let n=WA(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var sy=null;function ure(){if(sy===null)try{new FormData(document.createElement("form"),0),sy=!1}catch{sy=!0}return sy}var dre=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hE(t){return t!=null&&!dre.has(t)?(Ma(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ob}"`),null):t}function fre(t,e){let n,r,i,a,s;if(are(t)){let o=t.getAttribute("action");r=o?il(o,e):null,n=t.getAttribute("method")||sb,i=hE(t.getAttribute("enctype"))||ob,a=new FormData(t)}else if(ire(t)||sre(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?il(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||sb,i=hE(t.getAttribute("formenctype"))||hE(o.getAttribute("enctype"))||ob,a=new FormData(o,t),!ure()){let{name:d,type:f,value:h}=t;if(f==="image"){let g=d?`${d}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else d&&a.append(d,h)}}else{if(v1(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=sb,r=null,i=ob,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function N2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hre(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&il(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function pre(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gre(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function mre(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await pre(a,n);return s.links?s.links():[]}return[]}));return xre(r.flat(1).filter(gre).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Wj(t,e,n,r,i,a){let s=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,o=(c,d)=>n[d].pathname!==c.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==c.params["*"];return a==="assets"?e.filter((c,d)=>s(c,d)||o(c,d)):a==="data"?e.filter((c,d)=>{let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(s(c,d)||o(c,d))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function vre(t,e,{includeHydrateFallback:n}={}){return yre(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function yre(t){return[...new Set(t)]}function bre(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function xre(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(bre(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function w9(){let t=A.useContext(Ph);return N2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function wre(){let t=A.useContext(m1);return N2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var I2=A.createContext(void 0);I2.displayName="FrameworkContext";function S9(){let t=A.useContext(I2);return N2(t,"You must render this element inside a <HydratedRouter> element"),t}function Sre(t,e){let n=A.useContext(I2),[r,i]=A.useState(!1),[a,s]=A.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:f,onTouchStart:h}=e,g=A.useRef(null);A.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=_=>{_.forEach(T=>{s(T.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[t]),A.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let v=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,g,{}]:[a,g,{onFocus:rg(o,v),onBlur:rg(c,b),onMouseEnter:rg(d,v),onMouseLeave:rg(f,b),onTouchStart:rg(h,v)}]:[!1,g,{}]}function rg(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function _re({page:t,...e}){let{router:n}=w9(),r=A.useMemo(()=>s9(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(Tre,{page:t,matches:r,...e}):null}function Ere(t){let{manifest:e,routeModules:n}=S9(),[r,i]=A.useState([]);return A.useEffect(()=>{let a=!1;return mre(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function Tre({page:t,matches:e,...n}){let r=Ss(),{future:i,manifest:a,routeModules:s}=S9(),{basename:o}=w9(),{loaderData:c,matches:d}=wre(),f=A.useMemo(()=>Wj(t,e,d,a,r,"data"),[t,e,d,a,r]),h=A.useMemo(()=>Wj(t,e,d,a,r,"assets"),[t,e,d,a,r]),g=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(T=>{let N=a.routes[T.route.id];!N||!N.hasLoader||(!f.some(D=>D.route.id===T.route.id)&&T.route.id in c&&s[T.route.id]?.shouldRevalidate||N.hasClientLoader?w=!0:x.add(T.route.id))}),x.size===0)return[];let _=hre(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return w&&x.size>0&&_.searchParams.set("_routes",e.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[_.pathname+_.search]},[o,i.unstable_trailingSlashAwareDataRequests,c,r,a,f,e,t,s]),v=A.useMemo(()=>vre(h,a),[h,a]),b=Ere(h);return A.createElement(A.Fragment,null,g.map(x=>A.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),v.map(x=>A.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),b.map(({key:x,link:w})=>A.createElement("link",{key:x,nonce:n.nonce,...w,crossOrigin:w.crossOrigin??n.crossOrigin})))}function Are(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var kre=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kre&&(window.__reactRouterVersion="7.13.0")}catch{}function Cre({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=A.useRef();i.current==null&&(i.current=sne({window:r,v5Compat:!0}));let a=i.current,[s,o]=A.useState({action:a.action,location:a.location}),c=A.useCallback(d=>{n===!1?o(d):A.startTransition(()=>o(d))},[n]);return A.useLayoutEffect(()=>a.listen(c),[a,c]),A.createElement(nre,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}var _9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,E9=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:d,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...v},b){let{basename:x,unstable_useTransitions:w}=A.useContext(Fa),_=typeof d=="string"&&_9.test(d),T=f9(d,x);d=T.to;let N=Bne(d,{relative:i}),[D,P,O]=Sre(r,v),C=Pre(d,{replace:s,state:o,target:c,preventScrollReset:f,relative:i,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:w});function I(j){e&&e(j),j.defaultPrevented||C(j)}let R=A.createElement("a",{...v,...O,href:T.absoluteURL||N,onClick:T.isExternal||a?e:I,ref:Are(b,P),target:c,"data-discover":!_&&n==="render"?"true":void 0});return D&&!_?A.createElement(A.Fragment,null,R,A.createElement(_re,{page:N})):R});E9.displayName="Link";var Nre=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...d},f){let h=Fm(s,{relative:d.relative}),g=Ss(),v=A.useContext(m1),{navigator:b,basename:x}=A.useContext(Fa),w=v!=null&&zre(h)&&o===!0,_=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,T=g.pathname,N=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(T=T.toLowerCase(),N=N?N.toLowerCase():null,_=_.toLowerCase()),N&&x&&(N=il(N,x)||N);const D=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let P=T===_||!i&&T.startsWith(_)&&T.charAt(D)==="/",O=N!=null&&(N===_||!i&&N.startsWith(_)&&N.charAt(_.length)==="/"),C={isActive:P,isPending:O,isTransitioning:w},I=P?e:void 0,R;typeof r=="function"?R=r(C):R=[r,P?"active":null,O?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(C):a;return A.createElement(E9,{...d,"aria-current":I,className:R,ref:f,style:j,to:s,viewTransition:o},typeof c=="function"?c(C):c)});Nre.displayName="NavLink";var Ire=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=sb,action:o,onSubmit:c,relative:d,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...v},b)=>{let{unstable_useTransitions:x}=A.useContext(Fa),w=Mre(),_=jre(o,{relative:d}),T=s.toLowerCase()==="get"?"get":"post",N=typeof o=="string"&&_9.test(o),D=P=>{if(c&&c(P),P.defaultPrevented)return;P.preventDefault();let O=P.nativeEvent.submitter,C=O?.getAttribute("formmethod")||s,I=()=>w(O||P.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:i,state:a,relative:d,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g});x&&n!==!1?A.startTransition(()=>I()):I()};return A.createElement("form",{ref:b,method:T,action:_,onSubmit:r?c:D,...v,"data-discover":!N&&t==="render"?"true":void 0})});Ire.displayName="Form";function Ore(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function T9(t){let e=A.useContext(Ph);return Cn(e,Ore(t)),e}function Pre(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let d=$a(),f=Ss(),h=Fm(t,{relative:a});return A.useCallback(g=>{if(lre(g,e)){g.preventDefault();let v=n!==void 0?n:Xg(f)===Xg(h),b=()=>d(t,{replace:v,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});c?A.startTransition(()=>b()):b()}},[f,d,h,n,r,e,t,i,a,s,o,c])}function A9(t){Ma(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(WA(t)),n=A.useRef(!1),r=Ss(),i=A.useMemo(()=>cre(r.search,n.current?null:e.current),[r.search]),a=$a(),s=A.useCallback((o,c)=>{const d=WA(typeof o=="function"?o(new URLSearchParams(i)):o);n.current=!0,a("?"+d,c)},[a,i]);return[i,s]}var Dre=0,Rre=()=>`__${String(++Dre)}__`;function Mre(){let{router:t}=T9("useSubmit"),{basename:e}=A.useContext(Fa),n=Zne(),r=t.fetch,i=t.navigate;return A.useCallback(async(a,s={})=>{let{action:o,method:c,encType:d,formData:f,body:h}=fre(a,e);if(s.navigate===!1){let g=s.fetcherKey||Rre();await r(g,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||d,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,n])}function jre(t,{relative:e}={}){let{basename:n}=A.useContext(Fa),r=A.useContext(go);Cn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Fm(t||".",{relative:e})},s=Ss();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let f=o.toString();a.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Ko([n,a.pathname])),Xg(a)}function zre(t,{relative:e}={}){let n=A.useContext(p9);Cn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=T9("useViewTransitionState"),i=Fm(t,{relative:e});if(!n.isTransitioning)return!1;let a=il(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=il(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Mb(i.pathname,s)!=null||Mb(i.pathname,a)!=null}var k9=dU();const Lre=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Vre=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Yj=t=>{const e=Vre(t);return e.charAt(0).toUpperCase()+e.slice(1)},C9=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Bre=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Ure={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Fre=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>A.createElement("svg",{ref:c,...Ure,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:C9("lucide",i),...!a&&!Bre(o)&&{"aria-hidden":"true"},...o},[...s.map(([d,f])=>A.createElement(d,f)),...Array.isArray(a)?a:[a]]));const He=(t,e)=>{const n=A.forwardRef(({className:r,...i},a)=>A.createElement(Fre,{ref:a,iconNode:e,className:C9(`lucide-${Lre(Yj(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Yj(t),n};const $re=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],al=He("arrow-left",$re);const qre=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Gre=He("arrow-right-left",qre);const Hre=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Wre=He("arrow-right",Hre);const Yre=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],Kre=He("bug",Yre);const Xre=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Qre=He("calendar",Xre);const Zre=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],jb=He("chart-column",Zre);const Jre=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],N9=He("chart-pie",Jre);const eie=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],O2=He("check",eie);const tie=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],nie=He("chevron-down",tie);const rie=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],iie=He("chevron-left",rie);const aie=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],rs=He("chevron-right",aie);const sie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],oie=He("circle-alert",sie);const lie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],cie=He("circle-arrow-down",lie);const uie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],die=He("circle-arrow-up",uie);const fie=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zb=He("circle-check-big",fie);const hie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hs=He("circle-check",hie);const pie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Kj=He("circle",pie);const gie=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],mie=He("clock",gie);const vie=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],yg=He("dollar-sign",vie);const yie=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],YA=He("download",yie);const bie=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],xie=He("ellipsis",bie);const wie=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],I9=He("eye-off",wie);const Sie=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],O9=He("eye",Sie);const _ie=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Eie=He("file-text",_ie);const Tie=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],P2=He("folder-open",Tie);const Aie=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],kie=He("folder",Aie);const Cie=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],P9=He("funnel",Cie);const Nie=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],nh=He("grip-vertical",Nie);const Iie=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Oie=He("house",Iie);const Pie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Xj=He("info",Pie);const Die=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Rie=He("list",Die);const Mie=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Qj=He("loader",Mie);const jie=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Zj=He("lock",jie);const zie=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Lie=He("log-out",zie);const Vie=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],KA=He("mail",Vie);const Bie=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Jj=He("mic",Bie);const Uie=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Fie=He("pause",Uie);const $ie=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],qie=He("pen",$ie);const Gie=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],bd=He("piggy-bank",Gie);const Hie=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],xd=He("plus",Hie);const Wie=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],rh=He("refresh-cw",Wie);const Yie=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Kie=He("rotate-ccw",Yie);const Xie=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],D9=He("search",Xie);const Qie=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zie=He("settings",Qie);const Jie=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],R9=He("skip-forward",Jie);const eae=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Wf=He("sparkles",eae);const tae=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],nae=He("tags",tae);const rae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],iae=He("target",rae);const aae=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Qg=He("trash-2",aae);const sae=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],M9=He("trash",sae);const oae=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ju=He("trending-up",oae);const lae=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Gu=He("triangle-alert",lae);const cae=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],uae=He("undo-2",cae);const dae=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],fae=He("upload",dae);const hae=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],pae=He("user-plus",hae);const gae=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],mae=He("user",gae);const vae=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],ih=He("wallet",vae);const yae=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$m=He("x",yae),e4=t=>{let e;const n=new Set,r=(d,f)=>{const h=typeof d=="function"?d(e):d;if(!Object.is(h,e)){const g=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(v=>v(e,g))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d))},c=e=t(r,i,o);return o},bae=(t=>t?e4(t):e4),xae=t=>t;function wae(t,e=xae){const n=Fo.useSyncExternalStore(t.subscribe,Fo.useCallback(()=>e(t.getState()),[t,e]),Fo.useCallback(()=>e(t.getInitialState()),[t,e]));return Fo.useDebugValue(n),n}const t4=t=>{const e=bae(t),n=r=>wae(e,r);return Object.assign(n,e),n},D2=(t=>t?t4(t):t4),n4={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",VITE_FIREBASE_APP_ID:"1:137454342284:web:0ae73943f9058a4342aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-VMP5DF6273",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app",VITE_RECAPTCHA_ENTERPRISE_SITE_KEY:"6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"},Zg=new Map,oy=t=>{const e=Zg.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},Sae=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=Zg.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return Zg.set(n.name,i),{type:"tracked",store:t,...i}},_ae=(t,e)=>{if(e===void 0)return;const n=Zg.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&Zg.delete(t))},Eae=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(s=>s.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},Tae=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:s,store:o,...c}=e;let d;try{d=(a??(n4?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return t(n,r,i);const{connection:f,...h}=Sae(o,d,c);let g=!0;i.setState=((x,w,_)=>{const T=n(x,w);if(!g)return T;const N=_===void 0?{type:s||Eae(new Error().stack)||"anonymous"}:typeof _=="string"?{type:_}:_;return o===void 0?(f?.send(N,r()),T):(f?.send({...N,type:`${o}/${N.type}`},{...oy(c.name),[o]:i.getState()}),T)}),i.devtools={cleanup:()=>{f&&typeof f.unsubscribe=="function"&&f.unsubscribe(),_ae(c.name,o)}};const v=(...x)=>{const w=g;g=!1,n(...x),g=w},b=t(i.setState,r,i);if(h.type==="untracked"?f?.init(b):(h.stores[h.store]=i,f?.init(Object.fromEntries(Object.entries(h.stores).map(([x,w])=>[x,x===h.store?b:w.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let x=!1;const w=i.dispatch;i.dispatch=(..._)=>{(n4?"production":void 0)!=="production"&&_[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),w(..._)}}return f.subscribe(x=>{var w;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return pE(x.payload,_=>{if(_.type==="__setState"){if(o===void 0){v(_.state);return}Object.keys(_.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const T=_.state[o];if(T==null)return;JSON.stringify(i.getState())!==JSON.stringify(T)&&v(T);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(_)});case"DISPATCH":switch(x.payload.type){case"RESET":return v(b),o===void 0?f?.init(i.getState()):f?.init(oy(c.name));case"COMMIT":if(o===void 0){f?.init(i.getState());return}return f?.init(oy(c.name));case"ROLLBACK":return pE(x.state,_=>{if(o===void 0){v(_),f?.init(i.getState());return}v(_[o]),f?.init(oy(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return pE(x.state,_=>{if(o===void 0){v(_);return}JSON.stringify(i.getState())!==JSON.stringify(_[o])&&v(_[o])});case"IMPORT_STATE":{const{nextLiftedState:_}=x.payload,T=(w=_.computedStates.slice(-1)[0])==null?void 0:w.state;if(!T)return;v(o===void 0?T:T[o]),f?.send(null,_);return}case"PAUSE_RECORDING":return g=!g}return}}),b},Aae=Tae,pE=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function kae(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const s=c=>c===null?null:JSON.parse(c,void 0),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const XA=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return XA(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return XA(r)(n)}}}},Cae=(t,e)=>(n,r,i)=>{let a={storage:kae(()=>localStorage),partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...e},s=!1;const o=new Set,c=new Set;let d=a.storage;if(!d)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...x)},r,i);const f=()=>{const x=a.partialize({...r()});return d.setItem(a.name,{state:x,version:a.version})},h=i.setState;i.setState=(x,w)=>(h(x,w),f());const g=t((...x)=>(n(...x),f()),r,i);i.getInitialState=()=>g;let v;const b=()=>{var x,w;if(!d)return;s=!1,o.forEach(T=>{var N;return T((N=r())!=null?N:g)});const _=((w=a.onRehydrateStorage)==null?void 0:w.call(a,(x=r())!=null?x:g))||void 0;return XA(d.getItem.bind(d))(a.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==a.version){if(a.migrate){const N=a.migrate(T.state,T.version);return N instanceof Promise?N.then(D=>[!0,D]):[!0,N]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var N;const[D,P]=T;if(v=a.merge(P,(N=r())!=null?N:g),n(v,!0),D)return f()}).then(()=>{_?.(v,void 0),v=r(),s=!0,c.forEach(T=>T(v))}).catch(T=>{_?.(void 0,T)})};return i.persist={setOptions:x=>{a={...a,...x},x.storage&&(d=x.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>s,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},a.skipHydration||b(),v||g},j9=Cae;var Nae="firebase",Iae="12.6.0";Qs(Nae,Iae,"app");var r4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var wc,z9;(function(){var t;function e(C,I){function R(){}R.prototype=I.prototype,C.F=I.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(j,L,B){for(var z=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)z[Y-2]=arguments[Y];return I.prototype[L].apply(j,z)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,I,R){R||(R=0);const j=Array(16);if(typeof I=="string")for(var L=0;L<16;++L)j[L]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(L=0;L<16;++L)j[L]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=C.g[0],R=C.g[1],L=C.g[2];let B=C.g[3],z;z=I+(B^R&(L^B))+j[0]+3614090360&4294967295,I=R+(z<<7&4294967295|z>>>25),z=B+(L^I&(R^L))+j[1]+3905402710&4294967295,B=I+(z<<12&4294967295|z>>>20),z=L+(R^B&(I^R))+j[2]+606105819&4294967295,L=B+(z<<17&4294967295|z>>>15),z=R+(I^L&(B^I))+j[3]+3250441966&4294967295,R=L+(z<<22&4294967295|z>>>10),z=I+(B^R&(L^B))+j[4]+4118548399&4294967295,I=R+(z<<7&4294967295|z>>>25),z=B+(L^I&(R^L))+j[5]+1200080426&4294967295,B=I+(z<<12&4294967295|z>>>20),z=L+(R^B&(I^R))+j[6]+2821735955&4294967295,L=B+(z<<17&4294967295|z>>>15),z=R+(I^L&(B^I))+j[7]+4249261313&4294967295,R=L+(z<<22&4294967295|z>>>10),z=I+(B^R&(L^B))+j[8]+1770035416&4294967295,I=R+(z<<7&4294967295|z>>>25),z=B+(L^I&(R^L))+j[9]+2336552879&4294967295,B=I+(z<<12&4294967295|z>>>20),z=L+(R^B&(I^R))+j[10]+4294925233&4294967295,L=B+(z<<17&4294967295|z>>>15),z=R+(I^L&(B^I))+j[11]+2304563134&4294967295,R=L+(z<<22&4294967295|z>>>10),z=I+(B^R&(L^B))+j[12]+1804603682&4294967295,I=R+(z<<7&4294967295|z>>>25),z=B+(L^I&(R^L))+j[13]+4254626195&4294967295,B=I+(z<<12&4294967295|z>>>20),z=L+(R^B&(I^R))+j[14]+2792965006&4294967295,L=B+(z<<17&4294967295|z>>>15),z=R+(I^L&(B^I))+j[15]+1236535329&4294967295,R=L+(z<<22&4294967295|z>>>10),z=I+(L^B&(R^L))+j[1]+4129170786&4294967295,I=R+(z<<5&4294967295|z>>>27),z=B+(R^L&(I^R))+j[6]+3225465664&4294967295,B=I+(z<<9&4294967295|z>>>23),z=L+(I^R&(B^I))+j[11]+643717713&4294967295,L=B+(z<<14&4294967295|z>>>18),z=R+(B^I&(L^B))+j[0]+3921069994&4294967295,R=L+(z<<20&4294967295|z>>>12),z=I+(L^B&(R^L))+j[5]+3593408605&4294967295,I=R+(z<<5&4294967295|z>>>27),z=B+(R^L&(I^R))+j[10]+38016083&4294967295,B=I+(z<<9&4294967295|z>>>23),z=L+(I^R&(B^I))+j[15]+3634488961&4294967295,L=B+(z<<14&4294967295|z>>>18),z=R+(B^I&(L^B))+j[4]+3889429448&4294967295,R=L+(z<<20&4294967295|z>>>12),z=I+(L^B&(R^L))+j[9]+568446438&4294967295,I=R+(z<<5&4294967295|z>>>27),z=B+(R^L&(I^R))+j[14]+3275163606&4294967295,B=I+(z<<9&4294967295|z>>>23),z=L+(I^R&(B^I))+j[3]+4107603335&4294967295,L=B+(z<<14&4294967295|z>>>18),z=R+(B^I&(L^B))+j[8]+1163531501&4294967295,R=L+(z<<20&4294967295|z>>>12),z=I+(L^B&(R^L))+j[13]+2850285829&4294967295,I=R+(z<<5&4294967295|z>>>27),z=B+(R^L&(I^R))+j[2]+4243563512&4294967295,B=I+(z<<9&4294967295|z>>>23),z=L+(I^R&(B^I))+j[7]+1735328473&4294967295,L=B+(z<<14&4294967295|z>>>18),z=R+(B^I&(L^B))+j[12]+2368359562&4294967295,R=L+(z<<20&4294967295|z>>>12),z=I+(R^L^B)+j[5]+4294588738&4294967295,I=R+(z<<4&4294967295|z>>>28),z=B+(I^R^L)+j[8]+2272392833&4294967295,B=I+(z<<11&4294967295|z>>>21),z=L+(B^I^R)+j[11]+1839030562&4294967295,L=B+(z<<16&4294967295|z>>>16),z=R+(L^B^I)+j[14]+4259657740&4294967295,R=L+(z<<23&4294967295|z>>>9),z=I+(R^L^B)+j[1]+2763975236&4294967295,I=R+(z<<4&4294967295|z>>>28),z=B+(I^R^L)+j[4]+1272893353&4294967295,B=I+(z<<11&4294967295|z>>>21),z=L+(B^I^R)+j[7]+4139469664&4294967295,L=B+(z<<16&4294967295|z>>>16),z=R+(L^B^I)+j[10]+3200236656&4294967295,R=L+(z<<23&4294967295|z>>>9),z=I+(R^L^B)+j[13]+681279174&4294967295,I=R+(z<<4&4294967295|z>>>28),z=B+(I^R^L)+j[0]+3936430074&4294967295,B=I+(z<<11&4294967295|z>>>21),z=L+(B^I^R)+j[3]+3572445317&4294967295,L=B+(z<<16&4294967295|z>>>16),z=R+(L^B^I)+j[6]+76029189&4294967295,R=L+(z<<23&4294967295|z>>>9),z=I+(R^L^B)+j[9]+3654602809&4294967295,I=R+(z<<4&4294967295|z>>>28),z=B+(I^R^L)+j[12]+3873151461&4294967295,B=I+(z<<11&4294967295|z>>>21),z=L+(B^I^R)+j[15]+530742520&4294967295,L=B+(z<<16&4294967295|z>>>16),z=R+(L^B^I)+j[2]+3299628645&4294967295,R=L+(z<<23&4294967295|z>>>9),z=I+(L^(R|~B))+j[0]+4096336452&4294967295,I=R+(z<<6&4294967295|z>>>26),z=B+(R^(I|~L))+j[7]+1126891415&4294967295,B=I+(z<<10&4294967295|z>>>22),z=L+(I^(B|~R))+j[14]+2878612391&4294967295,L=B+(z<<15&4294967295|z>>>17),z=R+(B^(L|~I))+j[5]+4237533241&4294967295,R=L+(z<<21&4294967295|z>>>11),z=I+(L^(R|~B))+j[12]+1700485571&4294967295,I=R+(z<<6&4294967295|z>>>26),z=B+(R^(I|~L))+j[3]+2399980690&4294967295,B=I+(z<<10&4294967295|z>>>22),z=L+(I^(B|~R))+j[10]+4293915773&4294967295,L=B+(z<<15&4294967295|z>>>17),z=R+(B^(L|~I))+j[1]+2240044497&4294967295,R=L+(z<<21&4294967295|z>>>11),z=I+(L^(R|~B))+j[8]+1873313359&4294967295,I=R+(z<<6&4294967295|z>>>26),z=B+(R^(I|~L))+j[15]+4264355552&4294967295,B=I+(z<<10&4294967295|z>>>22),z=L+(I^(B|~R))+j[6]+2734768916&4294967295,L=B+(z<<15&4294967295|z>>>17),z=R+(B^(L|~I))+j[13]+1309151649&4294967295,R=L+(z<<21&4294967295|z>>>11),z=I+(L^(R|~B))+j[4]+4149444226&4294967295,I=R+(z<<6&4294967295|z>>>26),z=B+(R^(I|~L))+j[11]+3174756917&4294967295,B=I+(z<<10&4294967295|z>>>22),z=L+(I^(B|~R))+j[2]+718787259&4294967295,L=B+(z<<15&4294967295|z>>>17),z=R+(B^(L|~I))+j[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(L+(z<<21&4294967295|z>>>11))&4294967295,C.g[2]=C.g[2]+L&4294967295,C.g[3]=C.g[3]+B&4294967295}r.prototype.v=function(C,I){I===void 0&&(I=C.length);const R=I-this.blockSize,j=this.C;let L=this.h,B=0;for(;B<I;){if(L==0)for(;B<=R;)i(this,C,B),B+=this.blockSize;if(typeof C=="string"){for(;B<I;)if(j[L++]=C.charCodeAt(B++),L==this.blockSize){i(this,j),L=0;break}}else for(;B<I;)if(j[L++]=C[B++],L==this.blockSize){i(this,j),L=0;break}}this.h=L,this.o+=I},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,R=0;R<4;++R)for(let j=0;j<32;j+=8)C[I++]=this.g[R]>>>j&255;return C};function a(C,I){var R=o;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=I(C)}function s(C,I){this.h=I;const R=[];let j=!0;for(let L=C.length-1;L>=0;L--){const B=C[L]|0;j&&B==I||(R[L]=B,j=!1)}this.g=R}var o={};function c(C){return-128<=C&&C<128?a(C,function(I){return new s([I|0],I<0?-1:0)}):new s([C|0],C<0?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return h;if(C<0)return w(d(-C));const I=[];let R=1;for(let j=0;C>=R;j++)I[j]=C/R|0,R*=4294967296;return new s(I,0)}function f(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return w(f(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=d(Math.pow(I,8));let j=h;for(let B=0;B<C.length;B+=8){var L=Math.min(8,C.length-B);const z=parseInt(C.substring(B,B+L),I);L<8?(L=d(Math.pow(I,L)),j=j.j(L).add(d(z))):(j=j.j(R),j=j.add(d(z)))}return j}var h=c(0),g=c(1),v=c(16777216);t=s.prototype,t.m=function(){if(x(this))return-w(this).m();let C=0,I=1;for(let R=0;R<this.g.length;R++){const j=this.i(R);C+=(j>=0?j:4294967296+j)*I,I*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(x(this))return"-"+w(this).toString(C);const I=d(Math.pow(C,6));var R=this;let j="";for(;;){const L=D(R,I).g;R=_(R,L.j(I));let B=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=L,b(R))return B+j;for(;B.length<6;)B="0"+B;j=B+j}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function x(C){return C.h==-1}t.l=function(C){return C=_(this,C),x(C)?-1:b(C)?0:1};function w(C){const I=C.g.length,R=[];for(let j=0;j<I;j++)R[j]=~C.g[j];return new s(R,~C.h).add(g)}t.abs=function(){return x(this)?w(this):this},t.add=function(C){const I=Math.max(this.g.length,C.g.length),R=[];let j=0;for(let L=0;L<=I;L++){let B=j+(this.i(L)&65535)+(C.i(L)&65535),z=(B>>>16)+(this.i(L)>>>16)+(C.i(L)>>>16);j=z>>>16,B&=65535,z&=65535,R[L]=z<<16|B}return new s(R,R[R.length-1]&-2147483648?-1:0)};function _(C,I){return C.add(w(I))}t.j=function(C){if(b(this)||b(C))return h;if(x(this))return x(C)?w(this).j(w(C)):w(w(this).j(C));if(x(C))return w(this.j(w(C)));if(this.l(v)<0&&C.l(v)<0)return d(this.m()*C.m());const I=this.g.length+C.g.length,R=[];for(var j=0;j<2*I;j++)R[j]=0;for(j=0;j<this.g.length;j++)for(let L=0;L<C.g.length;L++){const B=this.i(j)>>>16,z=this.i(j)&65535,Y=C.i(L)>>>16,Z=C.i(L)&65535;R[2*j+2*L]+=z*Z,T(R,2*j+2*L),R[2*j+2*L+1]+=B*Z,T(R,2*j+2*L+1),R[2*j+2*L+1]+=z*Y,T(R,2*j+2*L+1),R[2*j+2*L+2]+=B*Y,T(R,2*j+2*L+2)}for(C=0;C<I;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=I;C<2*I;C++)R[C]=0;return new s(R,0)};function T(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function N(C,I){this.g=C,this.h=I}function D(C,I){if(b(I))throw Error("division by zero");if(b(C))return new N(h,h);if(x(C))return I=D(w(C),I),new N(w(I.g),w(I.h));if(x(I))return I=D(C,w(I)),new N(w(I.g),I.h);if(C.g.length>30){if(x(C)||x(I))throw Error("slowDivide_ only works with positive integers.");for(var R=g,j=I;j.l(C)<=0;)R=P(R),j=P(j);var L=O(R,1),B=O(j,1);for(j=O(j,2),R=O(R,2);!b(j);){var z=B.add(j);z.l(C)<=0&&(L=L.add(R),B=z),j=O(j,1),R=O(R,1)}return I=_(C,L.j(I)),new N(L,I)}for(L=h;C.l(I)>=0;){for(R=Math.max(1,Math.floor(C.m()/I.m())),j=Math.ceil(Math.log(R)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),B=d(R),z=B.j(I);x(z)||z.l(C)>0;)R-=j,B=d(R),z=B.j(I);b(B)&&(B=g),L=L.add(B),C=_(C,z)}return new N(L,C)}t.B=function(C){return D(this,C).h},t.and=function(C){const I=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<I;j++)R[j]=this.i(j)&C.i(j);return new s(R,this.h&C.h)},t.or=function(C){const I=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<I;j++)R[j]=this.i(j)|C.i(j);return new s(R,this.h|C.h)},t.xor=function(C){const I=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<I;j++)R[j]=this.i(j)^C.i(j);return new s(R,this.h^C.h)};function P(C){const I=C.g.length+1,R=[];for(let j=0;j<I;j++)R[j]=C.i(j)<<1|C.i(j-1)>>>31;return new s(R,C.h)}function O(C,I){const R=I>>5;I%=32;const j=C.g.length-R,L=[];for(let B=0;B<j;B++)L[B]=I>0?C.i(B+R)>>>I|C.i(B+R+1)<<32-I:C.i(B+R);return new s(L,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,z9=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=f,wc=s}).apply(typeof r4<"u"?r4:typeof self<"u"?self:typeof window<"u"?window:{});var ly=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var L9,bg,V9,lb,QA,B9,U9,F9;(function(){var t,e=Object.defineProperty;function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof ly=="object"&&ly];for(var M=0;M<S.length;++M){var U=S[M];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var r=n(this);function i(S,M){if(M)e:{var U=r;S=S.split(".");for(var H=0;H<S.length-1;H++){var fe=S[H];if(!(fe in U))break e;U=U[fe]}S=S[S.length-1],H=U[S],M=M(H),M!=H&&M!=null&&e(U,S,{configurable:!0,writable:!0,value:M})}}i("Symbol.dispose",function(S){return S||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(S){return S||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(S){return S||function(M){var U=[],H;for(H in M)Object.prototype.hasOwnProperty.call(M,H)&&U.push([H,M[H]]);return U}});var a=a||{},s=this||self;function o(S){var M=typeof S;return M=="object"&&S!=null||M=="function"}function c(S,M,U){return S.call.apply(S.bind,arguments)}function d(S,M,U){return d=c,d.apply(null,arguments)}function f(S,M){var U=Array.prototype.slice.call(arguments,1);return function(){var H=U.slice();return H.push.apply(H,arguments),S.apply(this,H)}}function h(S,M){function U(){}U.prototype=M.prototype,S.Z=M.prototype,S.prototype=new U,S.prototype.constructor=S,S.Ob=function(H,fe,be){for(var Re=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)Re[ct-2]=arguments[ct];return M.prototype[fe].apply(H,Re)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?S=>S&&AsyncContext.Snapshot.wrap(S):S=>S;function v(S){const M=S.length;if(M>0){const U=Array(M);for(let H=0;H<M;H++)U[H]=S[H];return U}return[]}function b(S,M){for(let H=1;H<arguments.length;H++){const fe=arguments[H];var U=typeof fe;if(U=U!="object"?U:fe?Array.isArray(fe)?"array":U:"null",U=="array"||U=="object"&&typeof fe.length=="number"){U=S.length||0;const be=fe.length||0;S.length=U+be;for(let Re=0;Re<be;Re++)S[U+Re]=fe[Re]}else S.push(fe)}}class x{constructor(M,U){this.i=M,this.j=U,this.h=0,this.g=null}get(){let M;return this.h>0?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function w(S){s.setTimeout(()=>{throw S},0)}function _(){var S=C;let M=null;return S.g&&(M=S.g,S.g=S.g.next,S.g||(S.h=null),M.next=null),M}class T{constructor(){this.h=this.g=null}add(M,U){const H=N.get();H.set(M,U),this.h?this.h.next=H:this.g=H,this.h=H}}var N=new x(()=>new D,S=>S.reset());class D{constructor(){this.next=this.g=this.h=null}set(M,U){this.h=M,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let P,O=!1,C=new T,I=()=>{const S=Promise.resolve(void 0);P=()=>{S.then(R)}};function R(){for(var S;S=_();){try{S.h.call(S.g)}catch(U){w(U)}var M=N;M.j(S),M.h<100&&(M.h++,S.next=M.g,M.g=S)}O=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(S,M){this.type=S,this.g=this.target=M,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var S=!1,M=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const U=()=>{};s.addEventListener("test",U,M),s.removeEventListener("test",U,M)}catch{}return S})();function z(S){return/^[\s\xa0]*$/.test(S)}function Y(S,M){L.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S&&this.init(S,M)}h(Y,L),Y.prototype.init=function(S,M){const U=this.type=S.type,H=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;this.target=S.target||S.srcElement,this.g=M,M=S.relatedTarget,M||(U=="mouseover"?M=S.fromElement:U=="mouseout"&&(M=S.toElement)),this.relatedTarget=M,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=S.pointerType,this.state=S.state,this.i=S,S.defaultPrevented&&Y.Z.h.call(this)},Y.prototype.h=function(){Y.Z.h.call(this);const S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),G=0;function K(S,M,U,H,fe){this.listener=S,this.proxy=null,this.src=M,this.type=U,this.capture=!!H,this.ha=fe,this.key=++G,this.da=this.fa=!1}function X(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function ee(S,M,U){for(const H in S)M.call(U,S[H],H,S)}function J(S,M){for(const U in S)M.call(void 0,S[U],U,S)}function F(S){const M={};for(const U in S)M[U]=S[U];return M}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(S,M){let U,H;for(let fe=1;fe<arguments.length;fe++){H=arguments[fe];for(U in H)S[U]=H[U];for(let be=0;be<Q.length;be++)U=Q[be],Object.prototype.hasOwnProperty.call(H,U)&&(S[U]=H[U])}}function W(S){this.src=S,this.g={},this.h=0}W.prototype.add=function(S,M,U,H,fe){const be=S.toString();S=this.g[be],S||(S=this.g[be]=[],this.h++);const Re=re(S,M,H,fe);return Re>-1?(M=S[Re],U||(M.fa=!1)):(M=new K(M,this.src,be,!!H,fe),M.fa=U,S.push(M)),M};function ue(S,M){const U=M.type;if(U in S.g){var H=S.g[U],fe=Array.prototype.indexOf.call(H,M,void 0),be;(be=fe>=0)&&Array.prototype.splice.call(H,fe,1),be&&(X(M),S.g[U].length==0&&(delete S.g[U],S.h--))}}function re(S,M,U,H){for(let fe=0;fe<S.length;++fe){const be=S[fe];if(!be.da&&be.listener==M&&be.capture==!!U&&be.ha==H)return fe}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),we={};function se(S,M,U,H,fe){if(Array.isArray(M)){for(let be=0;be<M.length;be++)se(S,M[be],U,H,fe);return null}return U=Ge(U),S&&S[Z]?S.J(M,U,o(H)?!!H.capture:!1,fe):Ee(S,M,U,!1,H,fe)}function Ee(S,M,U,H,fe,be){if(!M)throw Error("Invalid event type");const Re=o(fe)?!!fe.capture:!!fe;let ct=Oe(S);if(ct||(S[oe]=ct=new W(S)),U=ct.add(M,U,H,Re,be),U.proxy)return U;if(H=ge(),U.proxy=H,H.src=S,H.listener=U,S.addEventListener)B||(fe=Re),fe===void 0&&(fe=!1),S.addEventListener(M.toString(),H,fe);else if(S.attachEvent)S.attachEvent(ye(M.toString()),H);else if(S.addListener&&S.removeListener)S.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return U}function ge(){function S(U){return M.call(S.src,S.listener,U)}const M=Se;return S}function ne(S,M,U,H,fe){if(Array.isArray(M))for(var be=0;be<M.length;be++)ne(S,M[be],U,H,fe);else H=o(H)?!!H.capture:!!H,U=Ge(U),S&&S[Z]?(S=S.i,be=String(M).toString(),be in S.g&&(M=S.g[be],U=re(M,U,H,fe),U>-1&&(X(M[U]),Array.prototype.splice.call(M,U,1),M.length==0&&(delete S.g[be],S.h--)))):S&&(S=Oe(S))&&(M=S.g[M.toString()],S=-1,M&&(S=re(M,U,H,fe)),(U=S>-1?M[S]:null)&&Ie(U))}function Ie(S){if(typeof S!="number"&&S&&!S.da){var M=S.src;if(M&&M[Z])ue(M.i,S);else{var U=S.type,H=S.proxy;M.removeEventListener?M.removeEventListener(U,H,S.capture):M.detachEvent?M.detachEvent(ye(U),H):M.addListener&&M.removeListener&&M.removeListener(H),(U=Oe(M))?(ue(U,S),U.h==0&&(U.src=null,M[oe]=null)):X(S)}}}function ye(S){return S in we?we[S]:we[S]="on"+S}function Se(S,M){if(S.da)S=!0;else{M=new Y(M,this);const U=S.listener,H=S.ha||S.src;S.fa&&Ie(S),S=U.call(H,M)}return S}function Oe(S){return S=S[oe],S instanceof W?S:null}var Pe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ge(S){return typeof S=="function"?S:(S[Pe]||(S[Pe]=function(M){return S.handleEvent(M)}),S[Pe])}function je(){j.call(this),this.i=new W(this),this.M=this,this.G=null}h(je,j),je.prototype[Z]=!0,je.prototype.removeEventListener=function(S,M,U,H){ne(this,S,M,U,H)};function Je(S,M){var U,H=S.G;if(H)for(U=[];H;H=H.G)U.push(H);if(S=S.M,H=M.type||M,typeof M=="string")M=new L(M,S);else if(M instanceof L)M.target=M.target||S;else{var fe=M;M=new L(H,S),te(M,fe)}fe=!0;let be,Re;if(U)for(Re=U.length-1;Re>=0;Re--)be=M.g=U[Re],fe=Lt(be,H,!0,M)&&fe;if(be=M.g=S,fe=Lt(be,H,!0,M)&&fe,fe=Lt(be,H,!1,M)&&fe,U)for(Re=0;Re<U.length;Re++)be=M.g=U[Re],fe=Lt(be,H,!1,M)&&fe}je.prototype.N=function(){if(je.Z.N.call(this),this.i){var S=this.i;for(const M in S.g){const U=S.g[M];for(let H=0;H<U.length;H++)X(U[H]);delete S.g[M],S.h--}}this.G=null},je.prototype.J=function(S,M,U,H){return this.i.add(String(S),M,!1,U,H)},je.prototype.K=function(S,M,U,H){return this.i.add(String(S),M,!0,U,H)};function Lt(S,M,U,H){if(M=S.i.g[String(M)],!M)return!0;M=M.concat();let fe=!0;for(let be=0;be<M.length;++be){const Re=M[be];if(Re&&!Re.da&&Re.capture==U){const ct=Re.listener,Vn=Re.ha||Re.src;Re.fa&&ue(S.i,Re),fe=ct.call(Vn,H)!==!1&&fe}}return fe&&!H.defaultPrevented}function Ln(S,M){if(typeof S!="function")if(S&&typeof S.handleEvent=="function")S=d(S.handleEvent,S);else throw Error("Invalid listener argument");return Number(M)>2147483647?-1:s.setTimeout(S,M||0)}function Sn(S){S.g=Ln(()=>{S.g=null,S.i&&(S.i=!1,Sn(S))},S.l);const M=S.h;S.h=null,S.m.apply(null,M)}class ht extends j{constructor(M,U){super(),this.m=M,this.l=U,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:Sn(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vt(S){j.call(this),this.h=S,this.g={}}h(Vt,j);var Yr=[];function Kr(S){ee(S.g,function(M,U){this.g.hasOwnProperty(U)&&Ie(M)},S),S.g={}}Vt.prototype.N=function(){Vt.Z.N.call(this),Kr(this)},Vt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Me=s.JSON.stringify,mt=s.JSON.parse,Sr=class{stringify(S){return s.JSON.stringify(S,void 0)}parse(S){return s.JSON.parse(S,void 0)}};function On(){}function _n(){}var sn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Dt(){L.call(this,"d")}h(Dt,L);function on(){L.call(this,"c")}h(on,L);var et={},Xr=null;function ln(){return Xr=Xr||new je}et.Ia="serverreachability";function ur(S){L.call(this,et.Ia,S)}h(ur,L);function lt(S){const M=ln();Je(M,new ur(M))}et.STAT_EVENT="statevent";function cn(S,M){L.call(this,et.STAT_EVENT,S),this.stat=M}h(cn,L);function nn(S){const M=ln();Je(M,new cn(M,S))}et.Ja="timingevent";function ci(S,M){L.call(this,et.Ja,S),this.size=M}h(ci,L);function Qr(S,M){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){S()},M)}function En(){this.g=!0}En.prototype.ua=function(){this.g=!1};function Ha(S,M,U,H,fe,be){S.info(function(){if(S.g)if(be){var Re="",ct=be.split("&");for(let Rt=0;Rt<ct.length;Rt++){var Vn=ct[Rt].split("=");if(Vn.length>1){const mn=Vn[0];Vn=Vn[1];const ga=mn.split("_");Re=ga.length>=2&&ga[1]=="type"?Re+(mn+"="+Vn+"&"):Re+(mn+"=redacted&")}}}else Re=null;else Re=be;return"XMLHTTP REQ ("+H+") [attempt "+fe+"]: "+M+`
`+U+`
`+Re})}function Al(S,M,U,H,fe,be,Re){S.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+fe+"]: "+M+`
`+U+`
`+be+" "+Re})}function Es(S,M,U,H){S.info(function(){return"XMLHTTP TEXT ("+M+"): "+rS(S,U)+(H?" "+H:"")})}function Xc(S,M){S.info(function(){return"TIMEOUT: "+M})}En.prototype.info=function(){};function rS(S,M){if(!S.g)return M;if(!M)return null;try{const be=JSON.parse(M);if(be){for(S=0;S<be.length;S++)if(Array.isArray(be[S])){var U=be[S];if(!(U.length<2)){var H=U[1];if(Array.isArray(H)&&!(H.length<1)){var fe=H[0];if(fe!="noop"&&fe!="stop"&&fe!="close")for(let Re=1;Re<H.length;Re++)H[Re]=""}}}}return Me(be)}catch{return M}}var Qc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},np={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rp;function Zc(){}h(Zc,On),Zc.prototype.g=function(){return new XMLHttpRequest},rp=new Zc;function bo(S){return encodeURIComponent(String(S))}function zv(S){var M=1;S=S.split(":");const U=[];for(;M>0&&S.length;)U.push(S.shift()),M--;return S.length&&U.push(S.join(":")),U}function Wa(S,M,U,H){this.j=S,this.i=M,this.l=U,this.S=H||1,this.V=new Vt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ya}function Ya(){this.i=null,this.g="",this.h=!1}var Hn={},_r={};function Ts(S,M,U){S.M=1,S.A=Jc(Yn(M)),S.u=U,S.R=!0,Id(S,null)}function Id(S,M){S.F=Date.now(),As(S),S.B=Yn(S.A);var U=S.B,H=S.S;Array.isArray(H)||(H=[String(H)]),Rd(U.i,"t",H),S.C=0,U=S.j.L,S.h=new Ya,S.g=Zv(S.j,U?M:null,!S.u),S.P>0&&(S.O=new ht(d(S.Y,S,S.g),S.P)),M=S.V,U=S.g,H=S.ba;var fe="readystatechange";Array.isArray(fe)||(fe&&(Yr[0]=fe.toString()),fe=Yr);for(let be=0;be<fe.length;be++){const Re=se(U,fe[be],H||M.handleEvent,!1,M.h||M);if(!Re)break;M.g[Re.key]=Re}M=S.J?F(S.J):{},S.u?(S.v||(S.v="POST"),M["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.B,S.v,S.u,M)):(S.v="GET",S.g.ea(S.B,S.v,null,M)),lt(),Ha(S.i,S.v,S.B,S.l,S.S,S.u)}Wa.prototype.ba=function(S){S=S.target;const M=this.O;M&&Qa(S)==3?M.j():this.Y(S)},Wa.prototype.Y=function(S){try{if(S==this.g)e:{const ct=Qa(this.g),Vn=this.g.ya(),Rt=this.g.ca();if(!(ct<3)&&(ct!=3||this.g&&(this.h.h||this.g.la()||Rr(this.g)))){this.K||ct!=4||Vn==7||(Vn==8||Rt<=0?lt(3):lt(2)),ks(this);var M=this.g.ca();this.X=M;var U=iS(this);if(this.o=M==200,Al(this.i,this.v,this.B,this.l,this.S,ct,M),this.o){if(this.U&&!this.L){t:{if(this.g){var H,fe=this.g;if((H=fe.g?fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(H)){var be=H;break t}}be=null}if(S=be)Es(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Cs(this,S);else{this.o=!1,this.m=3,nn(12),$i(this),fa(this);break e}}if(this.R){S=!0;let mn;for(;!this.K&&this.C<U.length;)if(mn=Vv(this,U),mn==_r){ct==4&&(this.m=4,nn(14),S=!1),Es(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Hn){this.m=4,nn(15),Es(this.i,this.l,U,"[Invalid Chunk]"),S=!1;break}else Es(this.i,this.l,mn,null),Cs(this,mn);if(Lv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||U.length!=0||this.h.h||(this.m=1,nn(16),S=!1),this.o=this.o&&S,!S)Es(this.i,this.l,U,"[Invalid Chunked Response]"),$i(this),fa(this);else if(U.length>0&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.aa&&!Re.P&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),yp(Re),Re.P=!0,nn(11))}}else Es(this.i,this.l,U,null),Cs(this,U);ct==4&&$i(this),this.o&&!this.K&&(ct==4?Yv(this.j,this):(this.o=!1,As(this)))}else wo(this.g),M==400&&U.indexOf("Unknown SID")>0?(this.m=3,nn(12)):(this.m=0,nn(13)),$i(this),fa(this)}}}catch{}finally{}};function iS(S){if(!Lv(S))return S.g.la();const M=Rr(S.g);if(M==="")return"";let U="";const H=M.length,fe=Qa(S.g)==4;if(!S.h.i){if(typeof TextDecoder>"u")return $i(S),fa(S),"";S.h.i=new s.TextDecoder}for(let be=0;be<H;be++)S.h.h=!0,U+=S.h.i.decode(M[be],{stream:!(fe&&be==H-1)});return M.length=0,S.h.g+=U,S.C=0,S.h.g}function Lv(S){return S.g?S.v=="GET"&&S.M!=2&&S.j.Aa:!1}function Vv(S,M){var U=S.C,H=M.indexOf(`
`,U);return H==-1?_r:(U=Number(M.substring(U,H)),isNaN(U)?Hn:(H+=1,H+U>M.length?_r:(M=M.slice(H,H+U),S.C=H+U,M)))}Wa.prototype.cancel=function(){this.K=!0,$i(this)};function As(S){S.T=Date.now()+S.H,Od(S,S.H)}function Od(S,M){if(S.D!=null)throw Error("WatchDog timer not null");S.D=Qr(d(S.aa,S),M)}function ks(S){S.D&&(s.clearTimeout(S.D),S.D=null)}Wa.prototype.aa=function(){this.D=null;const S=Date.now();S-this.T>=0?(Xc(this.i,this.B),this.M!=2&&(lt(),nn(17)),$i(this),this.m=2,fa(this)):Od(this,this.T-S)};function fa(S){S.j.I==0||S.K||Yv(S.j,S)}function $i(S){ks(S);var M=S.O;M&&typeof M.dispose=="function"&&M.dispose(),S.O=null,Kr(S.V),S.g&&(M=S.g,S.g=null,M.abort(),M.dispose())}function Cs(S,M){try{var U=S.j;if(U.I!=0&&(U.g==S||Is(U.h,S))){if(!S.L&&Is(U.h,S)&&U.I==3){try{var H=U.Ba.g.parse(M)}catch{H=null}if(Array.isArray(H)&&H.length==3){var fe=H;if(fe[0]==0){e:if(!U.v){if(U.g)if(U.g.F+3e3<S.F)Vd(U),Rl(U);else break e;su(U),nn(18)}}else U.xa=fe[1],0<U.xa-U.K&&fe[2]<37500&&U.F&&U.A==0&&!U.C&&(U.C=Qr(d(U.Va,U),6e3));Ns(U.h)<=1&&U.ta&&(U.ta=void 0)}else js(U,11)}else if((S.L||U.g==S)&&Vd(U),!z(M))for(fe=U.Ba.g.parse(M),M=0;M<fe.length;M++){let Rt=fe[M];const mn=Rt[0];if(!(mn<=U.K))if(U.K=mn,Rt=Rt[1],U.I==2)if(Rt[0]=="c"){U.M=Rt[1],U.ba=Rt[2];const ga=Rt[3];ga!=null&&(U.ka=ga,U.j.info("VER="+U.ka));const zs=Rt[4];zs!=null&&(U.za=zs,U.j.info("SVER="+U.za));const Za=Rt[5];Za!=null&&typeof Za=="number"&&Za>0&&(H=1.5*Za,U.O=H,U.j.info("backChannelRequestTimeoutMs_="+H)),H=U;const Ja=S.g;if(Ja){const ou=Ja.g?Ja.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ou){var be=H.h;be.g||ou.indexOf("spdy")==-1&&ou.indexOf("quic")==-1&&ou.indexOf("h2")==-1||(be.j=be.l,be.g=new Set,be.h&&(sp(be,be.h),be.h=null))}if(H.G){const Bd=Ja.g?Ja.g.getResponseHeader("X-HTTP-Session-Id"):null;Bd&&(H.wa=Bd,Bt(H.J,H.G,Bd))}}U.I=3,U.l&&U.l.ra(),U.aa&&(U.T=Date.now()-S.F,U.j.info("Handshake RTT: "+U.T+"ms")),H=U;var Re=S;if(H.na=Qv(H,H.L?H.ba:null,H.W),Re.L){op(H.h,Re);var ct=Re,Vn=H.O;Vn&&(ct.H=Vn),ct.D&&(ks(ct),As(ct)),H.g=Re}else Hv(H);U.i.length>0&&Ms(U)}else Rt[0]!="stop"&&Rt[0]!="close"||js(U,7);else U.I==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?js(U,7):mp(U):Rt[0]!="noop"&&U.l&&U.l.qa(Rt),U.A=0)}}lt(4)}catch{}}var Wn=class{constructor(S,M){this.g=S,this.map=M}};function ip(S){this.l=S||10,s.PerformanceNavigationTiming?(S=s.performance.getEntriesByType("navigation"),S=S.length>0&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ap(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function Ns(S){return S.h?1:S.g?S.g.size:0}function Is(S,M){return S.h?S.h==M:S.g?S.g.has(M):!1}function sp(S,M){S.g?S.g.add(M):S.h=M}function op(S,M){S.h&&S.h==M?S.h=null:S.g&&S.g.has(M)&&S.g.delete(M)}ip.prototype.cancel=function(){if(this.i=lp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function lp(S){if(S.h!=null)return S.i.concat(S.h.G);if(S.g!=null&&S.g.size!==0){let M=S.i;for(const U of S.g.values())M=M.concat(U.G);return M}return v(S.i)}var Bv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pd(S,M){if(S){S=S.split("&");for(let U=0;U<S.length;U++){const H=S[U].indexOf("=");let fe,be=null;H>=0?(fe=S[U].substring(0,H),be=S[U].substring(H+1)):fe=S[U],M(fe,be?decodeURIComponent(be.replace(/\+/g," ")):"")}}}function qi(S){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let M;S instanceof qi?(this.l=S.l,Er(this,S.j),this.o=S.o,this.g=S.g,kl(this,S.u),this.h=S.h,cp(this,qv(S.i)),this.m=S.m):S&&(M=String(S).match(Bv))?(this.l=!1,Er(this,M[1]||"",!0),this.o=Os(M[2]||""),this.g=Os(M[3]||"",!0),kl(this,M[4]),this.h=Os(M[5]||"",!0),cp(this,M[6]||"",!0),this.m=Os(M[7]||"")):(this.l=!1,this.i=new Nl(null,this.l))}qi.prototype.toString=function(){const S=[];var M=this.j;M&&S.push(eu(M,Dd,!0),":");var U=this.g;return(U||M=="file")&&(S.push("//"),(M=this.o)&&S.push(eu(M,Dd,!0),"@"),S.push(bo(U).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U=this.u,U!=null&&S.push(":",String(U))),(U=this.h)&&(this.g&&U.charAt(0)!="/"&&S.push("/"),S.push(eu(U,U.charAt(0)=="/"?up:Uv,!0))),(U=this.i.toString())&&S.push("?",U),(U=this.m)&&S.push("#",eu(U,Fv)),S.join("")},qi.prototype.resolve=function(S){const M=Yn(this);let U=!!S.j;U?Er(M,S.j):U=!!S.o,U?M.o=S.o:U=!!S.g,U?M.g=S.g:U=S.u!=null;var H=S.h;if(U)kl(M,S.u);else if(U=!!S.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var fe=M.h.lastIndexOf("/");fe!=-1&&(H=M.h.slice(0,fe+1)+H)}if(fe=H,fe==".."||fe==".")H="";else if(fe.indexOf("./")!=-1||fe.indexOf("/.")!=-1){H=fe.lastIndexOf("/",0)==0,fe=fe.split("/");const be=[];for(let Re=0;Re<fe.length;){const ct=fe[Re++];ct=="."?H&&Re==fe.length&&be.push(""):ct==".."?((be.length>1||be.length==1&&be[0]!="")&&be.pop(),H&&Re==fe.length&&be.push("")):(be.push(ct),H=!0)}H=be.join("/")}else H=fe}return U?M.h=H:U=S.i.toString()!=="",U?cp(M,qv(S.i)):U=!!S.m,U&&(M.m=S.m),M};function Yn(S){return new qi(S)}function Er(S,M,U){S.j=U?Os(M,!0):M,S.j&&(S.j=S.j.replace(/:$/,""))}function kl(S,M){if(M){if(M=Number(M),isNaN(M)||M<0)throw Error("Bad port number "+M);S.u=M}else S.u=null}function cp(S,M,U){M instanceof Nl?(S.i=M,Md(S.i,S.l)):(U||(M=eu(M,Cl)),S.i=new Nl(M,S.l))}function Bt(S,M,U){S.i.set(M,U)}function Jc(S){return Bt(S,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),S}function Os(S,M){return S?M?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function eu(S,M,U){return typeof S=="string"?(S=encodeURI(S).replace(M,Ei),U&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function Ei(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Dd=/[#\/\?@]/g,Uv=/[#\?:]/g,up=/[#\?]/g,Cl=/[#\?@]/g,Fv=/#/g;function Nl(S,M){this.h=this.g=null,this.i=S||null,this.j=!!M}function Ti(S){S.g||(S.g=new Map,S.h=0,S.i&&Pd(S.i,function(M,U){S.add(decodeURIComponent(M.replace(/\+/g," ")),U)}))}t=Nl.prototype,t.add=function(S,M){Ti(this),this.i=null,S=Il(this,S);let U=this.g.get(S);return U||this.g.set(S,U=[]),U.push(M),this.h+=1,this};function $v(S,M){Ti(S),M=Il(S,M),S.g.has(M)&&(S.i=null,S.h-=S.g.get(M).length,S.g.delete(M))}function dp(S,M){return Ti(S),M=Il(S,M),S.g.has(M)}t.forEach=function(S,M){Ti(this),this.g.forEach(function(U,H){U.forEach(function(fe){S.call(M,fe,H,this)},this)},this)};function fp(S,M){Ti(S);let U=[];if(typeof M=="string")dp(S,M)&&(U=U.concat(S.g.get(Il(S,M))));else for(S=Array.from(S.g.values()),M=0;M<S.length;M++)U=U.concat(S[M]);return U}t.set=function(S,M){return Ti(this),this.i=null,S=Il(this,S),dp(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[M]),this.h+=1,this},t.get=function(S,M){return S?(S=fp(this,S),S.length>0?String(S[0]):M):M};function Rd(S,M,U){$v(S,M),U.length>0&&(S.i=null,S.g.set(Il(S,M),v(U)),S.h+=U.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],M=Array.from(this.g.keys());for(let H=0;H<M.length;H++){var U=M[H];const fe=bo(U);U=fp(this,U);for(let be=0;be<U.length;be++){let Re=fe;U[be]!==""&&(Re+="="+bo(U[be])),S.push(Re)}}return this.i=S.join("&")};function qv(S){const M=new Nl;return M.i=S.i,S.g&&(M.g=new Map(S.g),M.h=S.h),M}function Il(S,M){return M=String(M),S.j&&(M=M.toLowerCase()),M}function Md(S,M){M&&!S.j&&(Ti(S),S.i=null,S.g.forEach(function(U,H){const fe=H.toLowerCase();H!=fe&&($v(this,H),Rd(this,fe,U))},S)),S.j=M}function Ka(S,M){const U=new En;if(s.Image){const H=new Image;H.onload=f(ha,U,"TestLoadImage: loaded",!0,M,H),H.onerror=f(ha,U,"TestLoadImage: error",!1,M,H),H.onabort=f(ha,U,"TestLoadImage: abort",!1,M,H),H.ontimeout=f(ha,U,"TestLoadImage: timeout",!1,M,H),s.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=S}else M(!1)}function hp(S,M){const U=new En,H=new AbortController,fe=setTimeout(()=>{H.abort(),ha(U,"TestPingServer: timeout",!1,M)},1e4);fetch(S,{signal:H.signal}).then(be=>{clearTimeout(fe),be.ok?ha(U,"TestPingServer: ok",!0,M):ha(U,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(fe),ha(U,"TestPingServer: error",!1,M)})}function ha(S,M,U,H,fe){try{fe&&(fe.onload=null,fe.onerror=null,fe.onabort=null,fe.ontimeout=null),H(U)}catch{}}function Ol(){this.g=new Sr}function Ps(S){this.i=S.Sb||null,this.h=S.ab||!1}h(Ps,On),Ps.prototype.g=function(){return new tu(this.i,this.h)};function tu(S,M){je.call(this),this.H=S,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(tu,je),t=tu.prototype,t.open=function(S,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=S,this.D=M,this.readyState=1,Xa(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const M={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};S&&(M.body=S),(this.H||s).fetch(new Request(this.D,M)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pl(this)),this.readyState=0},t.Pa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Xa(this)),this.g&&(this.readyState=3,Xa(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jd(this)}else S.text().then(this.Oa.bind(this),this.ga.bind(this))};function jd(S){S.j.read().then(S.Ma.bind(S)).catch(S.ga.bind(S))}t.Ma=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var M=S.value?S.value:new Uint8Array(0);(M=this.B.decode(M,{stream:!S.done}))&&(this.response=this.responseText+=M)}S.done?Pl(this):Xa(this),this.readyState==3&&jd(this)}},t.Oa=function(S){this.g&&(this.response=this.responseText=S,Pl(this))},t.Na=function(S){this.g&&(this.response=S,Pl(this))},t.ga=function(){this.g&&Pl(this)};function Pl(S){S.readyState=4,S.l=null,S.j=null,S.B=null,Xa(S)}t.setRequestHeader=function(S,M){this.A.append(S,M)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],M=this.h.entries();for(var U=M.next();!U.done;)U=U.value,S.push(U[0]+": "+U[1]),U=M.next();return S.join(`\r
`)};function Xa(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(tu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function pa(S){let M="";return ee(S,function(U,H){M+=H,M+=":",M+=U,M+=`\r
`}),M}function nu(S,M,U){e:{for(H in U){var H=!1;break e}H=!0}H||(U=pa(U),typeof S=="string"?U!=null&&bo(U):Bt(S,M,U))}function Gt(S){je.call(this),this.headers=new Map,this.L=S||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Gt,je);var Ds=/^https?$/i,pp=["POST","PUT"];t=Gt.prototype,t.Fa=function(S){this.H=S},t.ea=function(S,M,U,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);M=M?M.toUpperCase():"GET",this.D=S,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rp.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(M,String(S),!0),this.B=!1}catch(be){ru(this,be);return}if(S=U||"",U=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var fe in H)U.set(fe,H[fe]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const be of H.keys())U.set(be,H.get(be));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(U.keys()).find(be=>be.toLowerCase()=="content-type"),fe=s.FormData&&S instanceof s.FormData,!(Array.prototype.indexOf.call(pp,M,void 0)>=0)||H||fe||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[be,Re]of U)this.g.setRequestHeader(be,Re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(S),this.v=!1}catch(be){ru(this,be)}};function ru(S,M){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=M,S.o=5,gp(S),xo(S)}function gp(S){S.A||(S.A=!0,Je(S,"complete"),Je(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=S||7,Je(this,"complete"),Je(this,"abort"),xo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xo(this,!0)),Gt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?iu(this):this.Xa())},t.Xa=function(){iu(this)};function iu(S){if(S.h&&typeof a<"u"){if(S.v&&Qa(S)==4)setTimeout(S.Ca.bind(S),0);else if(Je(S,"readystatechange"),Qa(S)==4){S.h=!1;try{const be=S.ca();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var U;if(!(U=M)){var H;if(H=be===0){let Re=String(S.D).match(Bv)[1]||null;!Re&&s.self&&s.self.location&&(Re=s.self.location.protocol.slice(0,-1)),H=!Ds.test(Re?Re.toLowerCase():"")}U=H}if(U)Je(S,"complete"),Je(S,"success");else{S.o=6;try{var fe=Qa(S)>2?S.g.statusText:""}catch{fe=""}S.l=fe+" ["+S.ca()+"]",gp(S)}}finally{xo(S)}}}}function xo(S,M){if(S.g){S.m&&(clearTimeout(S.m),S.m=null);const U=S.g;S.g=null,M||Je(S,"ready");try{U.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Qa(S){return S.g?S.g.readyState:0}t.ca=function(){try{return Qa(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(S){if(this.g){var M=this.g.responseText;return S&&M.indexOf(S)==0&&(M=M.substring(S.length)),mt(M)}};function Rr(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.F){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function wo(S){const M={};S=(S.g&&Qa(S)>=2&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<S.length;H++){if(z(S[H]))continue;var U=zv(S[H]);const fe=U[0];if(U=U[1],typeof U!="string")continue;U=U.trim();const be=M[fe]||[];M[fe]=be,be.push(U)}J(M,function(H){return H.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rs(S,M,U){return U&&U.internalChannelParams&&U.internalChannelParams[S]||M}function Dl(S){this.za=0,this.i=[],this.j=new En,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rs("failFast",!1,S),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rs("baseRetryDelayMs",5e3,S),this.Za=Rs("retryDelaySeedMs",1e4,S),this.Ta=Rs("forwardChannelMaxRetries",2,S),this.va=Rs("forwardChannelRequestTimeoutMs",2e4,S),this.ma=S&&S.xmlHttpFactory||void 0,this.Ua=S&&S.Rb||void 0,this.Aa=S&&S.useFetchStreams||!1,this.O=void 0,this.L=S&&S.supportsCrossDomainXhr||!1,this.M="",this.h=new ip(S&&S.concurrentRequestLimit),this.Ba=new Ol,this.S=S&&S.fastHandshake||!1,this.R=S&&S.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=S&&S.Pb||!1,S&&S.ua&&this.j.ua(),S&&S.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&S&&S.detectBufferingProxy||!1,this.ia=void 0,S&&S.longPollingTimeout&&S.longPollingTimeout>0&&(this.ia=S.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Dl.prototype,t.ka=8,t.I=1,t.connect=function(S,M,U,H){nn(0),this.W=S,this.H=M||{},U&&H!==void 0&&(this.H.OSID=U,this.H.OAID=H),this.F=this.X,this.J=Qv(this,null,this.W),Ms(this)};function mp(S){if(zd(S),S.I==3){var M=S.V++,U=Yn(S.J);if(Bt(U,"SID",S.M),Bt(U,"RID",M),Bt(U,"TYPE","terminate"),au(S,U),M=new Wa(S,S.j,M),M.M=2,M.A=Jc(Yn(U)),U=!1,s.navigator&&s.navigator.sendBeacon)try{U=s.navigator.sendBeacon(M.A.toString(),"")}catch{}!U&&s.Image&&(new Image().src=M.A,U=!0),U||(M.g=Zv(M.j,null),M.g.ea(M.A)),M.F=Date.now(),As(M)}Xv(S)}function Rl(S){S.g&&(yp(S),S.g.cancel(),S.g=null)}function zd(S){Rl(S),S.v&&(s.clearTimeout(S.v),S.v=null),Vd(S),S.h.cancel(),S.m&&(typeof S.m=="number"&&s.clearTimeout(S.m),S.m=null)}function Ms(S){if(!ap(S.h)&&!S.m){S.m=!0;var M=S.Ea;P||I(),O||(P(),O=!0),C.add(M,S),S.D=0}}function Ld(S,M){return Ns(S.h)>=S.h.j-(S.m?1:0)?!1:S.m?(S.i=M.G.concat(S.i),!0):S.I==1||S.I==2||S.D>=(S.Sa?0:S.Ta)?!1:(S.m=Qr(d(S.Ea,S,M),Kv(S,S.D)),S.D++,!0)}t.Ea=function(S){if(this.m)if(this.m=null,this.I==1){if(!S){this.V=Math.floor(Math.random()*1e5),S=this.V++;const fe=new Wa(this,this.j,S);let be=this.o;if(this.U&&(be?(be=F(be),te(be,this.U)):be=this.U),this.u!==null||this.R||(fe.J=be,be=null),this.S)e:{for(var M=0,U=0;U<this.i.length;U++){t:{var H=this.i[U];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(M+=H,M>4096){M=U;break e}if(M===4096||U===this.i.length-1){M=U+1;break e}}M=1e3}else M=1e3;M=Gv(this,fe,M),U=Yn(this.J),Bt(U,"RID",S),Bt(U,"CVER",22),this.G&&Bt(U,"X-HTTP-Session-Id",this.G),au(this,U),be&&(this.R?M="headers="+bo(pa(be))+"&"+M:this.u&&nu(U,this.u,be)),sp(this.h,fe),this.Ra&&Bt(U,"TYPE","init"),this.S?(Bt(U,"$req",M),Bt(U,"SID","null"),fe.U=!0,Ts(fe,U,null)):Ts(fe,U,M),this.I=2}}else this.I==3&&(S?vp(this,S):this.i.length==0||ap(this.h)||vp(this))};function vp(S,M){var U;M?U=M.l:U=S.V++;const H=Yn(S.J);Bt(H,"SID",S.M),Bt(H,"RID",U),Bt(H,"AID",S.K),au(S,H),S.u&&S.o&&nu(H,S.u,S.o),U=new Wa(S,S.j,U,S.D+1),S.u===null&&(U.J=S.o),M&&(S.i=M.G.concat(S.i)),M=Gv(S,U,1e3),U.H=Math.round(S.va*.5)+Math.round(S.va*.5*Math.random()),sp(S.h,U),Ts(U,H,M)}function au(S,M){S.H&&ee(S.H,function(U,H){Bt(M,H,U)}),S.l&&ee({},function(U,H){Bt(M,H,U)})}function Gv(S,M,U){U=Math.min(S.i.length,U);const H=S.l?d(S.l.Ka,S.l,S):null;e:{var fe=S.i;let ct=-1;for(;;){const Vn=["count="+U];ct==-1?U>0?(ct=fe[0].g,Vn.push("ofs="+ct)):ct=0:Vn.push("ofs="+ct);let Rt=!0;for(let mn=0;mn<U;mn++){var be=fe[mn].g;const ga=fe[mn].map;if(be-=ct,be<0)ct=Math.max(0,fe[mn].g-100),Rt=!1;else try{be="req"+be+"_"||"";try{var Re=ga instanceof Map?ga:Object.entries(ga);for(const[zs,Za]of Re){let Ja=Za;o(Za)&&(Ja=Me(Za)),Vn.push(be+zs+"="+encodeURIComponent(Ja))}}catch(zs){throw Vn.push(be+"type="+encodeURIComponent("_badmap")),zs}}catch{H&&H(ga)}}if(Rt){Re=Vn.join("&");break e}}Re=void 0}return S=S.i.splice(0,U),M.G=S,Re}function Hv(S){if(!S.g&&!S.v){S.Y=1;var M=S.Da;P||I(),O||(P(),O=!0),C.add(M,S),S.A=0}}function su(S){return S.g||S.v||S.A>=3?!1:(S.Y++,S.v=Qr(d(S.Da,S),Kv(S,S.A)),S.A++,!0)}t.Da=function(){if(this.v=null,Wv(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var S=4*this.T;this.j.info("BP detection timer enabled: "+S),this.B=Qr(d(this.Wa,this),S)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,nn(10),Rl(this),Wv(this))};function yp(S){S.B!=null&&(s.clearTimeout(S.B),S.B=null)}function Wv(S){S.g=new Wa(S,S.j,"rpc",S.Y),S.u===null&&(S.g.J=S.o),S.g.P=0;var M=Yn(S.na);Bt(M,"RID","rpc"),Bt(M,"SID",S.M),Bt(M,"AID",S.K),Bt(M,"CI",S.F?"0":"1"),!S.F&&S.ia&&Bt(M,"TO",S.ia),Bt(M,"TYPE","xmlhttp"),au(S,M),S.u&&S.o&&nu(M,S.u,S.o),S.O&&(S.g.H=S.O);var U=S.g;S=S.ba,U.M=1,U.A=Jc(Yn(M)),U.u=null,U.R=!0,Id(U,S)}t.Va=function(){this.C!=null&&(this.C=null,Rl(this),su(this),nn(19))};function Vd(S){S.C!=null&&(s.clearTimeout(S.C),S.C=null)}function Yv(S,M){var U=null;if(S.g==M){Vd(S),yp(S),S.g=null;var H=2}else if(Is(S.h,M))U=M.G,op(S.h,M),H=1;else return;if(S.I!=0){if(M.o)if(H==1){U=M.u?M.u.length:0,M=Date.now()-M.F;var fe=S.D;H=ln(),Je(H,new ci(H,U)),Ms(S)}else Hv(S);else if(fe=M.m,fe==3||fe==0&&M.X>0||!(H==1&&Ld(S,M)||H==2&&su(S)))switch(U&&U.length>0&&(M=S.h,M.i=M.i.concat(U)),fe){case 1:js(S,5);break;case 4:js(S,10);break;case 3:js(S,6);break;default:js(S,2)}}}function Kv(S,M){let U=S.Qa+Math.floor(Math.random()*S.Za);return S.isActive()||(U*=2),U*M}function js(S,M){if(S.j.info("Error code "+M),M==2){var U=d(S.bb,S),H=S.Ua;const fe=!H;H=new qi(H||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Er(H,"https"),Jc(H),fe?Ka(H.toString(),U):hp(H.toString(),U)}else nn(2);S.I=0,S.l&&S.l.pa(M),Xv(S),zd(S)}t.bb=function(S){S?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function Xv(S){if(S.I=0,S.ja=[],S.l){const M=lp(S.h);(M.length!=0||S.i.length!=0)&&(b(S.ja,M),b(S.ja,S.i),S.h.i.length=0,v(S.i),S.i.length=0),S.l.oa()}}function Qv(S,M,U){var H=U instanceof qi?Yn(U):new qi(U);if(H.g!="")M&&(H.g=M+"."+H.g),kl(H,H.u);else{var fe=s.location;H=fe.protocol,M=M?M+"."+fe.hostname:fe.hostname,fe=+fe.port;const be=new qi(null);H&&Er(be,H),M&&(be.g=M),fe&&kl(be,fe),U&&(be.h=U),H=be}return U=S.G,M=S.wa,U&&M&&Bt(H,U,M),Bt(H,"VER",S.ka),au(S,H),H}function Zv(S,M,U){if(M&&!S.L)throw Error("Can't create secondary domain capable XhrIo object.");return M=S.Aa&&!S.ma?new Gt(new Ps({ab:U})):new Gt(S.ma),M.Fa(S.L),M}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jv(){}t=Jv.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ml(){}Ml.prototype.g=function(S,M){return new ui(S,M)};function ui(S,M){je.call(this),this.g=new Dl(M),this.l=S,this.h=M&&M.messageUrlParams||null,S=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(S?S["X-WebChannel-Content-Type"]=M.messageContentType:S={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.sa&&(S?S["X-WebChannel-Client-Profile"]=M.sa:S={"X-WebChannel-Client-Profile":M.sa}),this.g.U=S,(S=M&&M.Qb)&&!z(S)&&(this.g.u=S),this.A=M&&M.supportsCrossDomainXhr||!1,this.v=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!z(M)&&(this.g.G=M,S=this.h,S!==null&&M in S&&(S=this.h,M in S&&delete S[M])),this.j=new So(this)}h(ui,je),ui.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ui.prototype.close=function(){mp(this.g)},ui.prototype.o=function(S){var M=this.g;if(typeof S=="string"){var U={};U.__data__=S,S=U}else this.v&&(U={},U.__data__=Me(S),S=U);M.i.push(new Wn(M.Ya++,S)),M.I==3&&Ms(M)},ui.prototype.N=function(){this.g.l=null,delete this.j,mp(this.g),delete this.g,ui.Z.N.call(this)};function e0(S){Dt.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var M=S.__sm__;if(M){e:{for(const U in M){S=U;break e}S=void 0}(this.i=S)&&(S=this.i,M=M!==null&&S in M?M[S]:void 0),this.data=M}else this.data=S}h(e0,Dt);function t0(){on.call(this),this.status=1}h(t0,on);function So(S){this.g=S}h(So,Jv),So.prototype.ra=function(){Je(this.g,"a")},So.prototype.qa=function(S){Je(this.g,new e0(S))},So.prototype.pa=function(S){Je(this.g,new t0)},So.prototype.oa=function(){Je(this.g,"b")},Ml.prototype.createWebChannel=Ml.prototype.g,ui.prototype.send=ui.prototype.o,ui.prototype.open=ui.prototype.m,ui.prototype.close=ui.prototype.close,F9=function(){return new Ml},U9=function(){return ln()},B9=et,QA={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qc.NO_ERROR=0,Qc.TIMEOUT=8,Qc.HTTP_ERROR=6,lb=Qc,np.COMPLETE="complete",V9=np,_n.EventType=sn,sn.OPEN="a",sn.CLOSE="b",sn.ERROR="c",sn.MESSAGE="d",je.prototype.listen=je.prototype.J,bg=_n,Gt.prototype.listenOnce=Gt.prototype.K,Gt.prototype.getLastError=Gt.prototype.Ha,Gt.prototype.getLastErrorCode=Gt.prototype.ya,Gt.prototype.getStatus=Gt.prototype.ca,Gt.prototype.getResponseJson=Gt.prototype.La,Gt.prototype.getResponseText=Gt.prototype.la,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Fa,L9=Gt}).apply(typeof ly<"u"?ly:typeof self<"u"?self:typeof window<"u"?window:{});const i4="@firebase/firestore",a4="4.9.2";class ti{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let Dh="12.3.0";const nd=new p2("@firebase/firestore");function Tf(){return nd.logLevel}function Le(t,...e){if(nd.logLevel<=_t.DEBUG){const n=e.map(R2);nd.debug(`Firestore (${Dh}): ${t}`,...n)}}function sl(t,...e){if(nd.logLevel<=_t.ERROR){const n=e.map(R2);nd.error(`Firestore (${Dh}): ${t}`,...n)}}function ah(t,...e){if(nd.logLevel<=_t.WARN){const n=e.map(R2);nd.warn(`Firestore (${Dh}): ${t}`,...n)}}function R2(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function nt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,$9(t,r,n)}function $9(t,e,n){let r=`FIRESTORE (${Dh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw sl(r),new Error(r)}function jt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||$9(e,i,r)}function ot(t,e){return t}const Ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends po{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class q9{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Oae{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ti.UNAUTHENTICATED)))}shutdown(){}}class Pae{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Dae{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){jt(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new Xo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Xo,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},o=c=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Xo)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(jt(typeof r.accessToken=="string",31837,{l:r}),new q9(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return jt(e===null||typeof e=="string",2055,{h:e}),new ti(e)}}class Rae{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ti.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Mae{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Rae(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ti.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class s4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jae{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ra(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){jt(this.o===void 0,3512);const r=a=>{a.error!=null&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Le("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new s4(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(jt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new s4(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function zae(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class M2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=zae(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function Et(t,e){return t<e?-1:t>e?1:0}function ZA(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return gE(i)===gE(a)?Et(i,a):gE(i)?1:-1}return Et(t.length,e.length)}const Lae=55296,Vae=57343;function gE(t){const e=t.charCodeAt(0);return e>=Lae&&e<=Vae}function sh(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}const o4="__name__";class Ws{constructor(e,n,r){n===void 0?n=0:n>e.length&&nt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&nt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ws.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ws?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Ws.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Et(e.length,n.length)}static compareSegments(e,n){const r=Ws.isNumericId(e),i=Ws.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ws.extractNumericId(e).compare(Ws.extractNumericId(n)):ZA(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wc.fromString(e.substring(4,e.length-2))}}class an extends Ws{construct(e,n,r){return new an(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ze(Ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new an(n)}static emptyPath(){return new an([])}}const Bae=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gr extends Ws{construct(e,n,r){return new Gr(e,n,r)}static isValidIdentifier(e){return Bae.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===o4}static keyField(){return new Gr([o4])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ze(Ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new ze(Ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ze(Ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new ze(Ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gr(n)}static emptyPath(){return new Gr([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(an.fromString(e))}static fromName(e){return new Xe(an.fromString(e).popFirst(5))}static empty(){return new Xe(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&an.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return an.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new an(e.slice()))}}function G9(t,e,n){if(!n)throw new ze(Ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Uae(t,e,n,r){if(e===!0&&r===!0)throw new ze(Ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function l4(t){if(!Xe.isDocumentKey(t))throw new ze(Ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function c4(t){if(Xe.isDocumentKey(t))throw new ze(Ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function H9(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function y1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":nt(12329,{type:typeof t})}function bi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ze(Ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=y1(t);throw new ze(Ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ar(t,e){const n={typeString:t};return e&&(n.value=e),n}function qm(t,e){if(!H9(t))throw new ze(Ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new ze(Ae.INVALID_ARGUMENT,n);return!0}const u4=-62135596800,d4=1e6;class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*d4);return new xt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ze(Ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ze(Ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<u4)throw new ze(Ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(Ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d4}_compareTo(e){return this.seconds===e.seconds?Et(this.nanoseconds,e.nanoseconds):Et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qm(e,xt._jsonSchema))return new xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-u4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xt._jsonSchemaVersion="firestore/timestamp/1.0",xt._jsonSchema={type:ar("string",xt._jsonSchemaVersion),seconds:ar("number"),nanoseconds:ar("number")};class it{static fromTimestamp(e){return new it(e)}static min(){return new it(new xt(0,0))}static max(){return new it(new xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Jg=-1;function Fae(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=it.fromTimestamp(r===1e9?new xt(n+1,0):new xt(n,r));return new kc(i,Xe.empty(),e)}function $ae(t){return new kc(t.readTime,t.key,Jg)}class kc{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new kc(it.min(),Xe.empty(),Jg)}static max(){return new kc(it.max(),Xe.empty(),Jg)}}function qae(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Xe.comparator(t.documentKey,e.documentKey),n!==0?n:Et(t.largestBatchId,e.largestBatchId))}const Gae="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hae{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Rh(t){if(t.code!==Ae.FAILED_PRECONDITION||t.message!==Gae)throw t;Le("LocalStore","Unexpectedly lost primary lease")}class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ce(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ce?n:Ce.resolve(n)}catch(n){return Ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ce.reject(n)}static resolve(e){return new Ce(((n,r)=>{n(e)}))}static reject(e){return new Ce(((n,r)=>{r(e)}))}static waitFor(e){return new Ce(((n,r)=>{let i=0,a=0,s=!1;e.forEach((o=>{++i,o.next((()=>{++a,s&&a===i&&n()}),(c=>r(c)))})),s=!0,a===i&&n()}))}static or(e){let n=Ce.resolve(!1);for(const r of e)n=n.next((i=>i?Ce.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new Ce(((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const d=c;n(e[d]).next((f=>{s[d]=f,++o,o===a&&r(s)}),(f=>i(f)))}}))}static doWhile(e,n){return new Ce(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}function Wae(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mh(t){return t.name==="IndexedDbTransactionError"}class b1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}b1.ce=-1;const j2=-1;function x1(t){return t==null}function Lb(t){return t===0&&1/t==-1/0}function Yae(t){return typeof t=="number"&&Number.isInteger(t)&&!Lb(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const W9="";function Kae(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=f4(e)),e=Xae(t.get(n),e);return f4(e)}function Xae(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case W9:n+="";break;default:n+=a}}return n}function f4(t){return t+W9+""}function h4(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $c(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Y9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Nn{constructor(e,n){this.comparator=e,this.root=n||qr.EMPTY}insert(e,n){return new Nn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new Nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cy(this.root,e,this.comparator,!1)}getReverseIterator(){return new cy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cy(this.root,e,this.comparator,!0)}}class cy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??qr.RED,this.left=i??qr.EMPTY,this.right=a??qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new qr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return qr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw nt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw nt(27949);return e+(this.isRed()?0:1)}}qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1;qr.EMPTY=new class{constructor(){this.size=0}get key(){throw nt(57766)}get value(){throw nt(16141)}get color(){throw nt(16727)}get left(){throw nt(29726)}get right(){throw nt(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new qr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vr{constructor(e){this.comparator=e,this.data=new Nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new p4(this.data.getIterator())}getIteratorFrom(e){return new p4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof vr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new vr(this.comparator);return n.data=e,n}}class p4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class aa{constructor(e){this.fields=e,e.sort(Gr.comparator)}static empty(){return new aa([])}unionWith(e){let n=new vr(Gr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new aa(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return sh(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class K9 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new K9("Invalid base64 string: "+a):a}})(e);return new Hr(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new Hr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hr.EMPTY_BYTE_STRING=new Hr("");const Qae=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cc(t){if(jt(!!t,39018),typeof t=="string"){let e=0;const n=Qae.exec(t);if(jt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qn(t.seconds),nanos:qn(t.nanos)}}function qn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Nc(t){return typeof t=="string"?Hr.fromBase64String(t):Hr.fromUint8Array(t)}const X9="server_timestamp",Q9="__type__",Z9="__previous_value__",J9="__local_write_time__";function z2(t){return(t?.mapValue?.fields||{})[Q9]?.stringValue===X9}function w1(t){const e=t.mapValue.fields[Z9];return z2(e)?w1(e):e}function em(t){const e=Cc(t.mapValue.fields[J9].timestampValue);return new xt(e.seconds,e.nanos)}class Zae{constructor(e,n,r,i,a,s,o,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const Vb="(default)";class tm{constructor(e,n){this.projectId=e,this.database=n||Vb}static empty(){return new tm("","")}get isDefaultDatabase(){return this.database===Vb}isEqual(e){return e instanceof tm&&e.projectId===this.projectId&&e.database===this.database}}const eF="__type__",Jae="__max__",uy={mapValue:{}},tF="__vector__",Bb="value";function Ic(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?z2(t)?4:tse(t)?9007199254740991:ese(t)?10:11:nt(28295,{value:t})}function lo(t,e){if(t===e)return!0;const n=Ic(t);if(n!==Ic(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return em(t).isEqual(em(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Cc(i.timestampValue),o=Cc(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Nc(i.bytesValue).isEqual(Nc(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return qn(i.geoPointValue.latitude)===qn(a.geoPointValue.latitude)&&qn(i.geoPointValue.longitude)===qn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return qn(i.integerValue)===qn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=qn(i.doubleValue),o=qn(a.doubleValue);return s===o?Lb(s)===Lb(o):isNaN(s)&&isNaN(o)}return!1})(t,e);case 9:return sh(t.arrayValue.values||[],e.arrayValue.values||[],lo);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(h4(s)!==h4(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!lo(s[c],o[c])))return!1;return!0})(t,e);default:return nt(52216,{left:t})}}function nm(t,e){return(t.values||[]).find((n=>lo(n,e)))!==void 0}function oh(t,e){if(t===e)return 0;const n=Ic(t),r=Ic(e);if(n!==r)return Et(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Et(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const o=qn(a.integerValue||a.doubleValue),c=qn(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(t,e);case 3:return g4(t.timestampValue,e.timestampValue);case 4:return g4(em(t),em(e));case 5:return ZA(t.stringValue,e.stringValue);case 6:return(function(a,s){const o=Nc(a),c=Nc(s);return o.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const o=a.split("/"),c=s.split("/");for(let d=0;d<o.length&&d<c.length;d++){const f=Et(o[d],c[d]);if(f!==0)return f}return Et(o.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const o=Et(qn(a.latitude),qn(s.latitude));return o!==0?o:Et(qn(a.longitude),qn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return m4(t.arrayValue,e.arrayValue);case 10:return(function(a,s){const o=a.fields||{},c=s.fields||{},d=o[Bb]?.arrayValue,f=c[Bb]?.arrayValue,h=Et(d?.values?.length||0,f?.values?.length||0);return h!==0?h:m4(d,f)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===uy.mapValue&&s===uy.mapValue)return 0;if(a===uy.mapValue)return 1;if(s===uy.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),d=s.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let h=0;h<c.length&&h<f.length;++h){const g=ZA(c[h],f[h]);if(g!==0)return g;const v=oh(o[c[h]],d[f[h]]);if(v!==0)return v}return Et(c.length,f.length)})(t.mapValue,e.mapValue);default:throw nt(23264,{he:n})}}function g4(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Et(t,e);const n=Cc(t),r=Cc(e),i=Et(n.seconds,r.seconds);return i!==0?i:Et(n.nanos,r.nanos)}function m4(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=oh(n[i],r[i]);if(a)return a}return Et(n.length,r.length)}function lh(t){return JA(t)}function JA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Cc(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Nc(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Xe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=JA(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${JA(n.fields[s])}`;return i+"}"})(t.mapValue):nt(61005,{value:t})}function cb(t){switch(Ic(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=w1(t);return e?16+cb(e):16;case 5:return 2*t.stringValue.length;case 6:return Nc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+cb(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return $c(r.fields,((a,s)=>{i+=a.length+cb(s)})),i})(t.mapValue);default:throw nt(13486,{value:t})}}function v4(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ek(t){return!!t&&"integerValue"in t}function L2(t){return!!t&&"arrayValue"in t}function y4(t){return!!t&&"nullValue"in t}function b4(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ub(t){return!!t&&"mapValue"in t}function ese(t){return(t?.mapValue?.fields||{})[eF]?.stringValue===tF}function Pg(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $c(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Pg(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pg(t.arrayValue.values[n]);return e}return{...t}}function tse(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Jae}class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ub(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pg(n)}setAll(e){let n=Gr.emptyPath(),r={},i=[];e.forEach(((s,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=Pg(s):i.push(o.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());ub(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return lo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ub(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){$c(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Ri(Pg(this.value))}}function nF(t){const e=[];return $c(t.fields,((n,r)=>{const i=new Gr([n]);if(ub(r)){const a=nF(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new aa(e)}class ni{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ni(e,0,it.min(),it.min(),it.min(),Ri.empty(),0)}static newFoundDocument(e,n,r,i){return new ni(e,1,n,it.min(),r,i,0)}static newNoDocument(e,n){return new ni(e,2,n,it.min(),it.min(),Ri.empty(),0)}static newUnknownDocument(e,n){return new ni(e,3,n,it.min(),it.min(),Ri.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ni&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ni(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ub{constructor(e,n){this.position=e,this.inclusive=n}}function x4(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=Xe.comparator(Xe.fromName(s.referenceValue),n.key):r=oh(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function w4(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!lo(t.position[n],e.position[n]))return!1;return!0}class rm{constructor(e,n="asc"){this.field=e,this.dir=n}}function nse(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class rF{}class rr extends rF{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ise(e,n,r):n==="array-contains"?new ose(e,r):n==="in"?new lse(e,r):n==="not-in"?new cse(e,r):n==="array-contains-any"?new use(e,r):new rr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ase(e,r):new sse(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(oh(n,this.value)):n!==null&&Ic(this.value)===Ic(n)&&this.matchesComparison(oh(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ms extends rF{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ms(e,n)}matches(e){return iF(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iF(t){return t.op==="and"}function aF(t){return rse(t)&&iF(t)}function rse(t){for(const e of t.filters)if(e instanceof ms)return!1;return!0}function tk(t){if(t instanceof rr)return t.field.canonicalString()+t.op.toString()+lh(t.value);if(aF(t))return t.filters.map((e=>tk(e))).join(",");{const e=t.filters.map((n=>tk(n))).join(",");return`${t.op}(${e})`}}function sF(t,e){return t instanceof rr?(function(r,i){return i instanceof rr&&r.op===i.op&&r.field.isEqual(i.field)&&lo(r.value,i.value)})(t,e):t instanceof ms?(function(r,i){return i instanceof ms&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,s,o)=>a&&sF(s,i.filters[o])),!0):!1})(t,e):void nt(19439)}function oF(t){return t instanceof rr?(function(n){return`${n.field.canonicalString()} ${n.op} ${lh(n.value)}`})(t):t instanceof ms?(function(n){return n.op.toString()+" {"+n.getFilters().map(oF).join(" ,")+"}"})(t):"Filter"}class ise extends rr{constructor(e,n,r){super(e,n,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const n=Xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class ase extends rr{constructor(e,n){super(e,"in",n),this.keys=lF("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class sse extends rr{constructor(e,n){super(e,"not-in",n),this.keys=lF("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function lF(t,e){return(e.arrayValue?.values||[]).map((n=>Xe.fromName(n.referenceValue)))}class ose extends rr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return L2(n)&&nm(n.arrayValue,this.value)}}class lse extends rr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nm(this.value.arrayValue,n)}}class cse extends rr{constructor(e,n){super(e,"not-in",n)}matches(e){if(nm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nm(this.value.arrayValue,n)}}class use extends rr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!L2(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>nm(this.value.arrayValue,r)))}}class dse{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function S4(t,e=null,n=[],r=[],i=null,a=null,s=null){return new dse(t,e,n,r,i,a,s)}function V2(t){const e=ot(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>tk(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),x1(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>lh(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>lh(r))).join(",")),e.Te=n}return e.Te}function B2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nse(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sF(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!w4(t.startAt,e.startAt)&&w4(t.endAt,e.endAt)}function nk(t){return Xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class jh{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function fse(t,e,n,r,i,a,s,o){return new jh(t,e,n,r,i,a,s,o)}function S1(t){return new jh(t)}function _4(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cF(t){return t.collectionGroup!==null}function Dg(t){const e=ot(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new vr(Gr.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((d=>{d.isInequality()&&(o=o.add(d.field))}))})),o})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new rm(a,r))})),n.has(Gr.keyField().canonicalString())||e.Ie.push(new rm(Gr.keyField(),r))}return e.Ie}function eo(t){const e=ot(t);return e.Ee||(e.Ee=hse(e,Dg(t))),e.Ee}function hse(t,e){if(t.limitType==="F")return S4(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new rm(i.field,a)}));const n=t.endAt?new Ub(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ub(t.startAt.position,t.startAt.inclusive):null;return S4(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rk(t,e){const n=t.filters.concat([e]);return new jh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fb(t,e,n){return new jh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _1(t,e){return B2(eo(t),eo(e))&&t.limitType===e.limitType}function uF(t){return`${V2(eo(t))}|lt:${t.limitType}`}function Af(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>oF(i))).join(", ")}]`),x1(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>lh(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>lh(i))).join(",")),`Target(${r})`})(eo(t))}; limitType=${t.limitType})`}function E1(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Xe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Dg(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,o,c){const d=x4(s,o,c);return s.inclusive?d<=0:d<0})(r.startAt,Dg(r),i)||r.endAt&&!(function(s,o,c){const d=x4(s,o,c);return s.inclusive?d>=0:d>0})(r.endAt,Dg(r),i))})(t,e)}function pse(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dF(t){return(e,n)=>{let r=!1;for(const i of Dg(t)){const a=gse(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function gse(t,e,n){const r=t.field.isKeyField()?Xe.comparator(e.key,n.key):(function(a,s,o){const c=s.data.field(a),d=o.data.field(a);return c!==null&&d!==null?oh(c,d):nt(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return nt(19790,{direction:t.dir})}}class wd{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$c(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return Y9(this.inner)}size(){return this.innerSize}}const mse=new Nn(Xe.comparator);function ol(){return mse}const fF=new Nn(Xe.comparator);function xg(...t){let e=fF;for(const n of t)e=e.insert(n.key,n);return e}function hF(t){let e=fF;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function zu(){return Rg()}function pF(){return Rg()}function Rg(){return new wd((t=>t.toString()),((t,e)=>t.isEqual(e)))}const vse=new Nn(Xe.comparator),yse=new vr(Xe.comparator);function Tt(...t){let e=yse;for(const n of t)e=e.add(n);return e}const bse=new vr(Et);function xse(){return bse}function U2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lb(e)?"-0":e}}function gF(t){return{integerValue:""+t}}function wse(t,e){return Yae(e)?gF(e):U2(t,e)}class T1{constructor(){this._=void 0}}function Sse(t,e,n){return t instanceof $b?(function(i,a){const s={fields:{[Q9]:{stringValue:X9},[J9]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&z2(a)&&(a=w1(a)),a&&(s.fields[Z9]=a),{mapValue:s}})(n,e):t instanceof ch?vF(t,e):t instanceof im?yF(t,e):(function(i,a){const s=mF(i,a),o=E4(s)+E4(i.Ae);return ek(s)&&ek(i.Ae)?gF(o):U2(i.serializer,o)})(t,e)}function _se(t,e,n){return t instanceof ch?vF(t,e):t instanceof im?yF(t,e):n}function mF(t,e){return t instanceof qb?(function(r){return ek(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class $b extends T1{}class ch extends T1{constructor(e){super(),this.elements=e}}function vF(t,e){const n=bF(e);for(const r of t.elements)n.some((i=>lo(i,r)))||n.push(r);return{arrayValue:{values:n}}}class im extends T1{constructor(e){super(),this.elements=e}}function yF(t,e){let n=bF(e);for(const r of t.elements)n=n.filter((i=>!lo(i,r)));return{arrayValue:{values:n}}}class qb extends T1{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function E4(t){return qn(t.integerValue||t.doubleValue)}function bF(t){return L2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Ese{constructor(e,n){this.field=e,this.transform=n}}function Tse(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof ch&&i instanceof ch||r instanceof im&&i instanceof im?sh(r.elements,i.elements,lo):r instanceof qb&&i instanceof qb?lo(r.Ae,i.Ae):r instanceof $b&&i instanceof $b})(t.transform,e.transform)}class Ase{constructor(e,n){this.version=e,this.transformResults=n}}class xi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xi}static exists(e){return new xi(void 0,e)}static updateTime(e){return new xi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function db(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class A1{}function xF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new k1(t.key,xi.none()):new Gm(t.key,t.data,xi.none());{const n=t.data,r=Ri.empty();let i=new vr(Gr.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new qc(t.key,r,new aa(i.toArray()),xi.none())}}function kse(t,e,n){t instanceof Gm?(function(i,a,s){const o=i.value.clone(),c=A4(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()})(t,e,n):t instanceof qc?(function(i,a,s){if(!db(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=A4(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(wF(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Mg(t,e,n,r){return t instanceof Gm?(function(a,s,o,c){if(!db(a.precondition,s))return o;const d=a.value.clone(),f=k4(a.fieldTransforms,c,s);return d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof qc?(function(a,s,o,c){if(!db(a.precondition,s))return o;const d=k4(a.fieldTransforms,c,s),f=s.data;return f.setAll(wF(a)),f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(a,s,o){return db(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o})(t,e,n)}function Cse(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=mF(r.transform,i||null);a!=null&&(n===null&&(n=Ri.empty()),n.set(r.field,a))}return n||null}function T4(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&sh(r,i,((a,s)=>Tse(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gm extends A1{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qc extends A1{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function wF(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function A4(t,e,n){const r=new Map;jt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,_se(s,o,n[i]))}return r}function k4(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,Sse(a,s,e))}return r}class k1 extends A1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nse extends A1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ise{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&kse(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pF();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const c=xF(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(it.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Tt())}isEqual(e){return this.batchId===e.batchId&&sh(this.mutations,e.mutations,((n,r)=>T4(n,r)))&&sh(this.baseMutations,e.baseMutations,((n,r)=>T4(n,r)))}}class F2{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){jt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return vse})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new F2(e,n,r,i)}}class Ose{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Pse{constructor(e,n){this.count=e,this.unchangedNames=n}}var er,kt;function Dse(t){switch(t){case Ae.OK:return nt(64938);case Ae.CANCELLED:case Ae.UNKNOWN:case Ae.DEADLINE_EXCEEDED:case Ae.RESOURCE_EXHAUSTED:case Ae.INTERNAL:case Ae.UNAVAILABLE:case Ae.UNAUTHENTICATED:return!1;case Ae.INVALID_ARGUMENT:case Ae.NOT_FOUND:case Ae.ALREADY_EXISTS:case Ae.PERMISSION_DENIED:case Ae.FAILED_PRECONDITION:case Ae.ABORTED:case Ae.OUT_OF_RANGE:case Ae.UNIMPLEMENTED:case Ae.DATA_LOSS:return!0;default:return nt(15467,{code:t})}}function SF(t){if(t===void 0)return sl("GRPC error has no .code"),Ae.UNKNOWN;switch(t){case er.OK:return Ae.OK;case er.CANCELLED:return Ae.CANCELLED;case er.UNKNOWN:return Ae.UNKNOWN;case er.DEADLINE_EXCEEDED:return Ae.DEADLINE_EXCEEDED;case er.RESOURCE_EXHAUSTED:return Ae.RESOURCE_EXHAUSTED;case er.INTERNAL:return Ae.INTERNAL;case er.UNAVAILABLE:return Ae.UNAVAILABLE;case er.UNAUTHENTICATED:return Ae.UNAUTHENTICATED;case er.INVALID_ARGUMENT:return Ae.INVALID_ARGUMENT;case er.NOT_FOUND:return Ae.NOT_FOUND;case er.ALREADY_EXISTS:return Ae.ALREADY_EXISTS;case er.PERMISSION_DENIED:return Ae.PERMISSION_DENIED;case er.FAILED_PRECONDITION:return Ae.FAILED_PRECONDITION;case er.ABORTED:return Ae.ABORTED;case er.OUT_OF_RANGE:return Ae.OUT_OF_RANGE;case er.UNIMPLEMENTED:return Ae.UNIMPLEMENTED;case er.DATA_LOSS:return Ae.DATA_LOSS;default:return nt(39323,{code:t})}}(kt=er||(er={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";function Rse(){return new TextEncoder}const Mse=new wc([4294967295,4294967295],0);function C4(t){const e=Rse().encode(t),n=new z9;return n.update(e),new Uint8Array(n.digest())}function N4(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new wc([n,r],0),new wc([i,a],0)]}class $2{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wg(`Invalid padding: ${n}`);if(r<0)throw new wg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wg(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new wg(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=wc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(wc.fromNumber(r)));return i.compare(Mse)===1&&(i=new wc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=C4(e),[r,i]=N4(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new $2(a,i,n);return r.forEach((o=>s.insert(o))),s}insert(e){if(this.ge===0)return;const n=C4(e),[r,i]=N4(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class wg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class C1{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Hm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new C1(it.min(),i,new Nn(Et),ol(),Tt())}}class Hm{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Hm(r,n,Tt(),Tt(),Tt())}}class fb{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class _F{constructor(e,n){this.targetId=e,this.Ce=n}}class EF{constructor(e,n,r=Hr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class I4{constructor(){this.ve=0,this.Fe=O4(),this.Me=Hr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Tt(),n=Tt(),r=Tt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:nt(38017,{changeType:a})}})),new Hm(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=O4()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,jt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class jse{constructor(e){this.Ge=e,this.ze=new Map,this.je=ol(),this.Je=dy(),this.He=dy(),this.Ye=new Nn(Et)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:nt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(nk(a))if(r===0){const s=new Xe(a.path);this.et(n,s,ni.newNoDocument(s,it.min()))}else jt(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const o=this.ut(e),c=o?this.ct(o,e,s):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=Nc(r).toUint8Array()}catch(c){if(c instanceof K9)return ah("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new $2(s,i,a)}catch(c){return ah(c instanceof wg?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,s)=>{const o=this.ot(s);if(o){if(a.current&&nk(o.target)){const c=new Xe(o.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,ni.newNoDocument(c,e))}a.Be&&(n.set(s,a.ke()),a.qe())}}));let r=Tt();this.He.forEach(((a,s)=>{let o=!0;s.forEachWhile((c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const i=new C1(e,n,this.Ye,this.je,r);return this.je=ol(),this.Je=dy(),this.He=dy(),this.Ye=new Nn(Et),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new I4,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new vr(Et),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new vr(Et),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new I4),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function dy(){return new Nn(Xe.comparator)}function O4(){return new Nn(Xe.comparator)}const zse={asc:"ASCENDING",desc:"DESCENDING"},Lse={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vse={and:"AND",or:"OR"};class Bse{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ik(t,e){return t.useProto3Json||x1(e)?e:{value:e}}function Gb(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Use(t,e){return Gb(t,e.toTimestamp())}function to(t){return jt(!!t,49232),it.fromTimestamp((function(n){const r=Cc(n);return new xt(r.seconds,r.nanos)})(t))}function q2(t,e){return ak(t,e).canonicalString()}function ak(t,e){const n=(function(i){return new an(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function AF(t){const e=an.fromString(t);return jt(OF(e),10190,{key:e.toString()}),e}function sk(t,e){return q2(t.databaseId,e.path)}function mE(t,e){const n=AF(e);if(n.get(1)!==t.databaseId.projectId)throw new ze(Ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ze(Ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Xe(CF(n))}function kF(t,e){return q2(t.databaseId,e)}function Fse(t){const e=AF(t);return e.length===4?an.emptyPath():CF(e)}function ok(t){return new an(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CF(t){return jt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function P4(t,e,n){return{name:sk(t,e),fields:n.value.mapValue.fields}}function $se(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:nt(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(d,f){return d.useProto3Json?(jt(f===void 0||typeof f=="string",58123),Hr.fromBase64String(f||"")):(jt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Hr.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&(function(d){const f=d.code===void 0?Ae.UNKNOWN:SF(d.code);return new ze(f,d.message||"")})(s);n=new EF(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=mE(t,r.document.name),a=to(r.document.updateTime),s=r.document.createTime?to(r.document.createTime):it.min(),o=new Ri({mapValue:{fields:r.document.fields}}),c=ni.newFoundDocument(i,a,s,o),d=r.targetIds||[],f=r.removedTargetIds||[];n=new fb(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=mE(t,r.document),a=r.readTime?to(r.readTime):it.min(),s=ni.newNoDocument(i,a),o=r.removedTargetIds||[];n=new fb([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=mE(t,r.document),a=r.removedTargetIds||[];n=new fb([],a,i,null)}else{if(!("filter"in e))return nt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new Pse(i,a),o=r.targetId;n=new _F(o,s)}}return n}function qse(t,e){let n;if(e instanceof Gm)n={update:P4(t,e.key,e.value)};else if(e instanceof k1)n={delete:sk(t,e.key)};else if(e instanceof qc)n={update:P4(t,e.key,e.data),updateMask:Jse(e.fieldMask)};else{if(!(e instanceof Nse))return nt(16599,{Vt:e.type});n={verify:sk(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,s){const o=s.transform;if(o instanceof $b)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ch)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof im)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof qb)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw nt(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:Use(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:nt(27497)})(t,e.precondition)),n}function Gse(t,e){return t&&t.length>0?(jt(e!==void 0,14353),t.map((n=>(function(i,a){let s=i.updateTime?to(i.updateTime):to(a);return s.isEqual(it.min())&&(s=to(a)),new Ase(s,i.transformResults||[])})(n,e)))):[]}function Hse(t,e){return{documents:[kF(t,e.path)]}}function Wse(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kF(t,i);const a=(function(d){if(d.length!==0)return IF(ms.create(d,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const s=(function(d){if(d.length!==0)return d.map((f=>(function(g){return{field:kf(g.field),direction:Xse(g.dir)}})(f)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=ik(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:i}}function Yse(t){let e=Fse(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){jt(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=(function(h){const g=NF(h);return g instanceof ms&&aF(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(h){return h.map((g=>(function(b){return new rm(Cf(b.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g)))})(n.orderBy));let o=null;n.limit&&(o=(function(h){let g;return g=typeof h=="object"?h.value:h,x1(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(h){const g=!!h.before,v=h.values||[];return new Ub(v,g)})(n.startAt));let d=null;return n.endAt&&(d=(function(h){const g=!h.before,v=h.values||[];return new Ub(v,g)})(n.endAt)),fse(e,i,s,a,o,"F",c,d)}function Kse(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nt(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NF(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Cf(n.unaryFilter.field);return rr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Cf(n.unaryFilter.field);return rr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Cf(n.unaryFilter.field);return rr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Cf(n.unaryFilter.field);return rr.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return nt(61313);default:return nt(60726)}})(t):t.fieldFilter!==void 0?(function(n){return rr.create(Cf(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return nt(58110);default:return nt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ms.create(n.compositeFilter.filters.map((r=>NF(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return nt(1026)}})(n.compositeFilter.op))})(t):nt(30097,{filter:t})}function Xse(t){return zse[t]}function Qse(t){return Lse[t]}function Zse(t){return Vse[t]}function kf(t){return{fieldPath:t.canonicalString()}}function Cf(t){return Gr.fromServerFormat(t.fieldPath)}function IF(t){return t instanceof rr?(function(n){if(n.op==="=="){if(b4(n.value))return{unaryFilter:{field:kf(n.field),op:"IS_NAN"}};if(y4(n.value))return{unaryFilter:{field:kf(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(b4(n.value))return{unaryFilter:{field:kf(n.field),op:"IS_NOT_NAN"}};if(y4(n.value))return{unaryFilter:{field:kf(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kf(n.field),op:Qse(n.op),value:n.value}}})(t):t instanceof ms?(function(n){const r=n.getFilters().map((i=>IF(i)));return r.length===1?r[0]:{compositeFilter:{op:Zse(n.op),filters:r}}})(t):nt(54877,{filter:t})}function Jse(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function OF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class pc{constructor(e,n,r,i,a=it.min(),s=it.min(),o=Hr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new pc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new pc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class eoe{constructor(e){this.yt=e}}function toe(t){const e=Yse({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fb(e,e.limit,"L"):e}class noe{constructor(){this.Cn=new roe}addToCollectionParentIndex(e,n){return this.Cn.add(n),Ce.resolve()}getCollectionParents(e,n){return Ce.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Ce.resolve()}deleteFieldIndex(e,n){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,n){return Ce.resolve()}getDocumentsMatchingTarget(e,n){return Ce.resolve(null)}getIndexType(e,n){return Ce.resolve(0)}getFieldIndexes(e,n){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,n){return Ce.resolve(kc.min())}getMinOffsetFromCollectionGroup(e,n){return Ce.resolve(kc.min())}updateCollectionGroup(e,n,r){return Ce.resolve()}updateIndexEntries(e,n){return Ce.resolve()}}class roe{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new vr(an.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vr(an.comparator)).toArray()}}const D4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PF=41943040;class Pi{static withCacheSize(e){return new Pi(e,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Pi.DEFAULT_COLLECTION_PERCENTILE=10,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pi.DEFAULT=new Pi(PF,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pi.DISABLED=new Pi(-1,0,0);class uh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new uh(0)}static cr(){return new uh(-1)}}const R4="LruGarbageCollector",ioe=1048576;function M4([t,e],[n,r]){const i=Et(t,n);return i===0?Et(e,r):i}class aoe{constructor(e){this.Ir=e,this.buffer=new vr(M4),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();M4(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class soe{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Le(R4,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mh(n)?Le(R4,"Ignoring IndexedDB error during garbage collection: ",n):await Rh(n)}await this.Vr(3e5)}))}}class ooe{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Ce.resolve(b1.ce);const r=new aoe(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(D4)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),D4):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,s,o,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,o=Date.now(),this.removeTargets(e,r,n)))).next((h=>(a=h,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(d=Date.now(),Tf()<=_t.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${h} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),Ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:h}))))}}function loe(t,e){return new ooe(t,e)}class coe{constructor(){this.changes=new wd((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ni.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ce.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uoe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class doe{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Mg(r.mutation,i,aa.empty(),xt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Tt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Tt()){const i=zu();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let s=xg();return a.forEach(((o,c)=>{s=s.insert(o,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=zu();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Tt())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,o)=>{n.set(s,o)}))}))}computeViews(e,n,r,i){let a=ol();const s=Rg(),o=(function(){return Rg()})();return n.forEach(((c,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof qc)?a=a.insert(d.key,d):f!==void 0?(s.set(d.key,f.mutation.getFieldMask()),Mg(f.mutation,d,f.mutation.getFieldMask(),xt.now())):s.set(d.key,aa.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((d,f)=>s.set(d,f))),n.forEach(((d,f)=>o.set(d,new uoe(f,s.get(d)??null)))),o)))}recalculateAndSaveOverlays(e,n){const r=Rg();let i=new Nn(((s,o)=>s-o)),a=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const o of s)o.keys().forEach((c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||aa.empty();f=o.applyToLocalView(d,f),r.set(c,f);const h=(i.get(o.batchId)||Tt()).add(c);i=i.insert(o.batchId,h)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),d=c.key,f=c.value,h=pF();f.forEach((g=>{if(!a.has(g)){const v=xF(n.get(g),r.get(g));v!==null&&h.set(g,v),a=a.add(g)}})),s.push(this.documentOverlayCache.saveOverlays(e,d,h))}return Ce.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return Xe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):Ce.resolve(zu());let o=Jg,c=a;return s.next((d=>Ce.forEach(d,((f,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(f)?Ce.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{c=c.insert(f,g)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,c,d,Tt()))).next((f=>({batchId:o,changes:hF(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Xe(n)).next((r=>{let i=xg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=xg();return this.indexManager.getCollectionParents(e,a).next((o=>Ce.forEach(o,(c=>{const d=(function(h,g){return new jh(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((f=>{f.forEach(((h,g)=>{s=s.insert(h,g)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((s=>{a.forEach(((c,d)=>{const f=d.getKey();s.get(f)===null&&(s=s.insert(f,ni.newInvalidDocument(f)))}));let o=xg();return s.forEach(((c,d)=>{const f=a.get(c);f!==void 0&&Mg(f.mutation,d,aa.empty(),xt.now()),E1(n,d)&&(o=o.insert(c,d))})),o}))}}class foe{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Ce.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:to(i.createTime)}})(n)),Ce.resolve()}getNamedQuery(e,n){return Ce.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:toe(i.bundledQuery),readTime:to(i.readTime)}})(n)),Ce.resolve()}}class hoe{constructor(){this.overlays=new Nn(Xe.comparator),this.qr=new Map}getOverlay(e,n){return Ce.resolve(this.overlays.get(n))}getOverlays(e,n){const r=zu();return Ce.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.St(e,n,a)})),Ce.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),Ce.resolve()}getOverlaysForCollection(e,n,r){const i=zu(),a=n.length+1,s=new Xe(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Ce.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new Nn(((d,f)=>d-f));const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=zu(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const o=zu(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((d,f)=>o.set(d,f))),!(o.size()>=i)););return Ce.resolve(o)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ose(n,r));let a=this.qr.get(n);a===void 0&&(a=Tt(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class poe{constructor(){this.sessionToken=Hr.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ce.resolve()}}class G2{constructor(){this.Qr=new vr(Cr.$r),this.Ur=new vr(Cr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Cr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Cr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Xe(new an([])),r=new Cr(n,e),i=new Cr(n,e+1),a=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),a.push(s.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Xe(new an([])),r=new Cr(n,e),i=new Cr(n,e+1);let a=Tt();return this.Ur.forEachInRange([r,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const n=new Cr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Cr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Xe.comparator(e.key,n.key)||Et(e.Yr,n.Yr)}static Kr(e,n){return Et(e.Yr,n.Yr)||Xe.comparator(e.key,n.key)}}class goe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new vr(Cr.$r)}checkEmpty(e){return Ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ise(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Zr=this.Zr.add(new Cr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ce.resolve(s)}lookupMutationBatch(e,n){return Ce.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return Ce.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(this.mutationQueue.length===0?j2:this.tr-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Cr(n,0),i=new Cr(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(s=>{const o=this.Xr(s.Yr);a.push(o)})),Ce.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vr(Et);return n.forEach((i=>{const a=new Cr(i,0),s=new Cr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,s],(o=>{r=r.add(o.Yr)}))})),Ce.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Xe.isDocumentKey(a)||(a=a.child(""));const s=new Cr(new Xe(a),0);let o=new vr(Et);return this.Zr.forEachWhile((c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(o=o.add(c.Yr)),!0)}),s),Ce.resolve(this.ti(o))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){jt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Ce.forEach(n.mutations,(i=>{const a=new Cr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Cr(n,0),i=this.Zr.firstAfterOrEqual(r);return Ce.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class moe{constructor(e){this.ri=e,this.docs=(function(){return new Nn(Xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ce.resolve(r?r.document.mutableCopy():ni.newInvalidDocument(n))}getEntries(e,n){let r=ol();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ni.newInvalidDocument(i))})),Ce.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ol();const s=n.path,o=new Xe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||qae($ae(f),r)<=0||(i.has(f.key)||E1(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return Ce.resolve(a)}getAllFromCollectionGroup(e,n,r,i){nt(9500)}ii(e,n){return Ce.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new voe(this)}getSize(e){return Ce.resolve(this.size)}}class voe extends coe{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),Ce.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class yoe{constructor(e){this.persistence=e,this.si=new wd((n=>V2(n)),B2),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.oi=0,this._i=new G2,this.targetCount=0,this.ai=uh.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Ce.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new uh(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Ce.resolve()}updateTargetData(e,n){return this.Pr(n),Ce.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach(((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),Ce.waitFor(a).next((()=>i))}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Ce.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Ce.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),Ce.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Ce.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Ce.resolve(r)}containsKey(e,n){return Ce.resolve(this._i.containsKey(n))}}class DF{constructor(e,n){this.ui={},this.overlays={},this.ci=new b1(0),this.li=!1,this.li=!0,this.hi=new poe,this.referenceDelegate=e(this),this.Pi=new yoe(this),this.indexManager=new noe,this.remoteDocumentCache=(function(i){return new moe(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new eoe(n),this.Ii=new foe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hoe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new goe(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Le("MemoryPersistence","Starting transaction:",e);const i=new boe(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,n){return Ce.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class boe extends Hae{constructor(e){super(),this.currentSequenceNumber=e}}class H2{constructor(e){this.persistence=e,this.Ri=new G2,this.Vi=null}static mi(e){return new H2(e)}get fi(){if(this.Vi)return this.Vi;throw nt(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Ce.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Ce.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Ce.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.fi,(r=>{const i=Xe.fromPath(r);return this.gi(e,i).next((a=>{a||n.removeEntry(i,it.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Ce.or([()=>Ce.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Hb{constructor(e,n){this.persistence=e,this.pi=new wd((r=>Kae(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=loe(this,n)}static mi(e,n){return new Hb(e,n)}Ei(){}di(e){return Ce.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return Ce.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?Ce.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,n).next((o=>{o||(r++,a.removeEntry(s,it.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Ce.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Ce.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Ce.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Ce.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=cb(e.data.value)),n}br(e,n,r){return Ce.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return Ce.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class W2{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Tt(),i=Tt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new W2(e,n.fromCache,r,i)}}class xoe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class woe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return yZ()?8:Wae(si())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ws(e,n,i,r).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new xoe;return this.Ss(e,n,s).next((o=>{if(a.result=o,this.Vs)return this.bs(e,n,s,o.size)}))})).next((()=>a.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(Tf()<=_t.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",Af(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ce.resolve()):(Tf()<=_t.DEBUG&&Le("QueryEngine","Query:",Af(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Tf()<=_t.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",Af(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,eo(n))):Ce.resolve())}ys(e,n){if(_4(n))return Ce.resolve(null);let r=eo(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Fb(n,null,"F"),r=eo(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const s=Tt(...a);return this.ps.getDocuments(e,s).next((o=>this.indexManager.getMinOffset(e,r).next((c=>{const d=this.Ds(n,o);return this.Cs(n,d,s,c.readTime)?this.ys(e,Fb(n,null,"F")):this.vs(e,d,n,c)}))))})))))}ws(e,n,r,i){return _4(n)||i.isEqual(it.min())?Ce.resolve(null):this.ps.getDocuments(e,r).next((a=>{const s=this.Ds(n,a);return this.Cs(n,s,r,i)?Ce.resolve(null):(Tf()<=_t.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Af(n)),this.vs(e,s,n,Fae(i,Jg)).next((o=>o)))}))}Ds(e,n){let r=new vr(dF(e));return n.forEach(((i,a)=>{E1(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return Tf()<=_t.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Af(n)),this.ps.getDocumentsMatchingQuery(e,n,kc.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((s=>{a=a.insert(s.key,s)})),a)))}}const Y2="LocalStore",Soe=3e8;class _oe{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Nn(Et),this.xs=new wd((a=>V2(a)),B2),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new doe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Eoe(t,e,n,r){return new _oe(t,e,n,r)}async function RF(t,e){const n=ot(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const s=[],o=[];let c=Tt();for(const d of i){s.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of a){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next((d=>({Ls:d,removedBatchIds:s,addedBatchIds:o})))}))}))}function Toe(t,e){const n=ot(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,c,d,f){const h=d.batch,g=h.keys();let v=Ce.resolve();return g.forEach((b=>{v=v.next((()=>f.getEntry(c,b))).next((x=>{const w=d.docVersions.get(b);jt(w!==null,48541),x.version.compareTo(w)<0&&(h.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),f.addEntry(x)))}))})),v.next((()=>o.mutationQueue.removeMutationBatch(c,h)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let c=Tt();for(let d=0;d<o.mutationResults.length;++d)o.mutationResults[d].transformResults.length>0&&(c=c.add(o.batch.mutations[d].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function MF(t){const e=ot(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Aoe(t,e){const n=ot(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];e.targetChanges.forEach(((f,h)=>{const g=i.get(h);if(!g)return;o.push(n.Pi.removeMatchingKeys(a,f.removedDocuments,h).next((()=>n.Pi.addMatchingKeys(a,f.addedDocuments,h))));let v=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?v=v.withResumeToken(Hr.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),i=i.insert(h,v),(function(x,w,_){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Soe?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0})(g,v,f)&&o.push(n.Pi.updateTargetData(a,v))}));let c=ol(),d=Tt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))})),o.push(koe(a,s,e.documentUpdates).next((f=>{c=f.ks,d=f.qs}))),!r.isEqual(it.min())){const f=n.Pi.getLastRemoteSnapshotVersion(a).next((h=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));o.push(f)}return Ce.waitFor(o).next((()=>s.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,c,d))).next((()=>c))})).then((a=>(n.Ms=i,a)))}function koe(t,e,n){let r=Tt(),i=Tt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let s=ol();return n.forEach(((o,c)=>{const d=a.get(o);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(it.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):Le(Y2,"Ignoring outdated watch update for ",o,". Current version:",d.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function Coe(t,e){const n=ot(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=j2),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Noe(t,e){const n=ot(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((a=>a?(i=a,Ce.resolve(i)):n.Pi.allocateTargetId(r).next((s=>(i=new pc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function lk(t,e,n){const r=ot(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Mh(s))throw s;Le(Y2,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function j4(t,e,n){const r=ot(t);let i=it.min(),a=Tt();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,d,f){const h=ot(c),g=h.xs.get(f);return g!==void 0?Ce.resolve(h.Ms.get(g)):h.Pi.getTargetData(d,f)})(r,s,eo(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,o.targetId).next((c=>{a=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:it.min(),n?a:Tt()))).next((o=>(Ioe(r,pse(e),o),{documents:o,Qs:a})))))}function Ioe(t,e,n){let r=t.Os.get(e)||it.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}class z4{constructor(){this.activeTargetIds=xse()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ooe{constructor(){this.Mo=new z4,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new z4,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Poe{Oo(e){}shutdown(){}}const L4="ConnectivityMonitor";class V4{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Le(L4,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Le(L4,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let fy=null;function ck(){return fy===null?fy=(function(){return 268435456+Math.round(2147483648*Math.random())})():fy++,"0x"+fy.toString(16)}const vE="RestConnection",Doe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Roe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Vb?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const s=ck(),o=this.zo(e,n.toUriEncodedString());Le(vE,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,a);const{host:d}=new URL(o),f=Uc(d);return this.Jo(e,o,c,r,f).then((h=>(Le(vE,`Received RPC '${e}' ${s}: `,h),h)),(h=>{throw ah(vE,`RPC '${e}' ${s} failed with error: `,h,"url: ",o,"request:",r),h}))}Ho(e,n,r,i,a,s){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,n){const r=Doe[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class Moe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Jr="WebChannelConnection";class joe extends Roe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const s=ck();return new Promise(((o,c)=>{const d=new L9;d.setWithCredentials(!0),d.listenOnce(V9.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case lb.NO_ERROR:const h=d.getResponseJson();Le(Jr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case lb.TIMEOUT:Le(Jr,`RPC '${e}' ${s} timed out`),c(new ze(Ae.DEADLINE_EXCEEDED,"Request time out"));break;case lb.HTTP_ERROR:const g=d.getStatus();if(Le(Jr,`RPC '${e}' ${s} failed with status:`,g,"response text:",d.getResponseText()),g>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v?.error;if(b&&b.status&&b.message){const x=(function(_){const T=_.toLowerCase().replace(/_/g,"-");return Object.values(Ae).indexOf(T)>=0?T:Ae.UNKNOWN})(b.status);c(new ze(x,b.message))}else c(new ze(Ae.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ze(Ae.UNAVAILABLE,"Connection failed."));break;default:nt(9055,{l_:e,streamId:s,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Le(Jr,`RPC '${e}' ${s} completed.`)}}));const f=JSON.stringify(i);Le(Jr,`RPC '${e}' ${s} sending request:`,i),d.send(n,"POST",f,r,15)}))}T_(e,n,r){const i=ck(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=F9(),o=U9(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=a.join("");Le(Jr,`Creating RPC '${e}' stream ${i}: ${f}`,c);const h=s.createWebChannel(f,c);this.I_(h);let g=!1,v=!1;const b=new Moe({Yo:w=>{v?Le(Jr,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(g||(Le(Jr,`Opening RPC '${e}' stream ${i} transport.`),h.open(),g=!0),Le(Jr,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},Zo:()=>h.close()}),x=(w,_,T)=>{w.listen(_,(N=>{try{T(N)}catch(D){setTimeout((()=>{throw D}),0)}}))};return x(h,bg.EventType.OPEN,(()=>{v||(Le(Jr,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),x(h,bg.EventType.CLOSE,(()=>{v||(v=!0,Le(Jr,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(h))})),x(h,bg.EventType.ERROR,(w=>{v||(v=!0,ah(Jr,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),b.a_(new ze(Ae.UNAVAILABLE,"The operation could not be completed")))})),x(h,bg.EventType.MESSAGE,(w=>{if(!v){const _=w.data[0];jt(!!_,16349);const T=_,N=T?.error||T[0]?.error;if(N){Le(Jr,`RPC '${e}' stream ${i} received error:`,N);const D=N.status;let P=(function(I){const R=er[I];if(R!==void 0)return SF(R)})(D),O=N.message;P===void 0&&(P=Ae.INTERNAL,O="Unknown error status: "+D+" with message "+N.message),v=!0,b.a_(new ze(P,O)),h.close()}else Le(Jr,`RPC '${e}' stream ${i} received:`,_),b.u_(_)}})),x(o,B9.STAT_EVENT,(w=>{w.stat===QA.PROXY?Le(Jr,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===QA.NOPROXY&&Le(Jr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function yE(){return typeof document<"u"?document:null}function N1(t){return new Bse(t,!0)}class jF{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const B4="PersistentStream";class zF{constructor(e,n,r,i,a,s,o,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jF(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ae.RESOURCE_EXHAUSTED?(sl(n.toString()),sl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new ze(Ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Le(B4,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Le(B4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zoe extends zF{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=$se(this.serializer,e),r=(function(a){if(!("targetChange"in a))return it.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?it.min():s.readTime?to(s.readTime):it.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ok(this.serializer),n.addTarget=(function(a,s){let o;const c=s.target;if(o=nk(c)?{documents:Hse(a,c)}:{query:Wse(a,c).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=TF(a,s.resumeToken);const d=ik(a,s.expectedCount);d!==null&&(o.expectedCount=d)}else if(s.snapshotVersion.compareTo(it.min())>0){o.readTime=Gb(a,s.snapshotVersion.toTimestamp());const d=ik(a,s.expectedCount);d!==null&&(o.expectedCount=d)}return o})(this.serializer,e);const r=Kse(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ok(this.serializer),n.removeTarget=e,this.q_(n)}}class Loe extends zF{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return jt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,jt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){jt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Gse(e.writeResults,e.commitTime),r=to(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ok(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>qse(this.serializer,r)))};this.q_(n)}}class Voe{}class Boe extends Voe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ze(Ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Go(e,ak(n,r),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ze(Ae.UNKNOWN,a.toString())}))}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Ho(e,ak(n,r),i,s,o,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ze(Ae.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Uoe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sl(n),this.aa=!1):Le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const rd="RemoteStore";class Foe{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{Sd(this)&&(Le(rd,"Restarting streams for network reachability change."),await(async function(c){const d=ot(c);d.Ea.add(4),await Wm(d),d.Ra.set("Unknown"),d.Ea.delete(4),await I1(d)})(this))}))})),this.Ra=new Uoe(r,i)}}async function I1(t){if(Sd(t))for(const e of t.da)await e(!0)}async function Wm(t){for(const e of t.da)await e(!1)}function LF(t,e){const n=ot(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Z2(n)?Q2(n):zh(n).O_()&&X2(n,e))}function K2(t,e){const n=ot(t),r=zh(n);n.Ia.delete(e),r.O_()&&VF(n,e),n.Ia.size===0&&(r.O_()?r.L_():Sd(n)&&n.Ra.set("Unknown"))}function X2(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(it.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zh(t).Y_(e)}function VF(t,e){t.Va.Ue(e),zh(t).Z_(e)}function Q2(t){t.Va=new jse({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),zh(t).start(),t.Ra.ua()}function Z2(t){return Sd(t)&&!zh(t).x_()&&t.Ia.size>0}function Sd(t){return ot(t).Ea.size===0}function BF(t){t.Va=void 0}async function $oe(t){t.Ra.set("Online")}async function qoe(t){t.Ia.forEach(((e,n)=>{X2(t,e)}))}async function Goe(t,e){BF(t),Z2(t)?(t.Ra.ha(e),Q2(t)):t.Ra.set("Unknown")}async function Hoe(t,e,n){if(t.Ra.set("Online"),e instanceof EF&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.Va.removeTarget(o))})(t,e)}catch(r){Le(rd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wb(t,r)}else if(e instanceof fb?t.Va.Ze(e):e instanceof _F?t.Va.st(e):t.Va.tt(e),!n.isEqual(it.min()))try{const r=await MF(t.localStore);n.compareTo(r)>=0&&await(function(a,s){const o=a.Va.Tt(s);return o.targetChanges.forEach(((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ia.get(d);f&&a.Ia.set(d,f.withResumeToken(c.resumeToken,s))}})),o.targetMismatches.forEach(((c,d)=>{const f=a.Ia.get(c);if(!f)return;a.Ia.set(c,f.withResumeToken(Hr.EMPTY_BYTE_STRING,f.snapshotVersion)),VF(a,c);const h=new pc(f.target,c,d,f.sequenceNumber);X2(a,h)})),a.remoteSyncer.applyRemoteEvent(o)})(t,n)}catch(r){Le(rd,"Failed to raise snapshot:",r),await Wb(t,r)}}async function Wb(t,e,n){if(!Mh(e))throw e;t.Ea.add(1),await Wm(t),t.Ra.set("Offline"),n||(n=()=>MF(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Le(rd,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await I1(t)}))}function UF(t,e){return e().catch((n=>Wb(t,n,e)))}async function O1(t){const e=ot(t),n=Oc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:j2;for(;Woe(e);)try{const i=await Coe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Yoe(e,i)}catch(i){await Wb(e,i)}FF(e)&&$F(e)}function Woe(t){return Sd(t)&&t.Ta.length<10}function Yoe(t,e){t.Ta.push(e);const n=Oc(t);n.O_()&&n.X_&&n.ea(e.mutations)}function FF(t){return Sd(t)&&!Oc(t).x_()&&t.Ta.length>0}function $F(t){Oc(t).start()}async function Koe(t){Oc(t).ra()}async function Xoe(t){const e=Oc(t);for(const n of t.Ta)e.ea(n.mutations)}async function Qoe(t,e,n){const r=t.Ta.shift(),i=F2.from(r,e,n);await UF(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await O1(t)}async function Zoe(t,e){e&&Oc(t).X_&&await(async function(r,i){if((function(s){return Dse(s)&&s!==Ae.ABORTED})(i.code)){const a=r.Ta.shift();Oc(r).B_(),await UF(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await O1(r)}})(t,e),FF(t)&&$F(t)}async function U4(t,e){const n=ot(t);n.asyncQueue.verifyOperationInProgress(),Le(rd,"RemoteStore received new credentials");const r=Sd(n);n.Ea.add(3),await Wm(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await I1(n)}async function Joe(t,e){const n=ot(t);e?(n.Ea.delete(2),await I1(n)):e||(n.Ea.add(2),await Wm(n),n.Ra.set("Unknown"))}function zh(t){return t.ma||(t.ma=(function(n,r,i){const a=ot(n);return a.sa(),new zoe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:$oe.bind(null,t),t_:qoe.bind(null,t),r_:Goe.bind(null,t),H_:Hoe.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Z2(t)?Q2(t):t.Ra.set("Unknown")):(await t.ma.stop(),BF(t))}))),t.ma}function Oc(t){return t.fa||(t.fa=(function(n,r,i){const a=ot(n);return a.sa(),new Loe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Koe.bind(null,t),r_:Zoe.bind(null,t),ta:Xoe.bind(null,t),na:Qoe.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await O1(t)):(await t.fa.stop(),t.Ta.length>0&&(Le(rd,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class J2{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Xo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new J2(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(Ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eN(t,e){if(sl("AsyncQueue",`${e}: ${t}`),Mh(t))return new ze(Ae.UNAVAILABLE,`${e}: ${t}`);throw t}class Yf{static emptySet(e){return new Yf(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Xe.comparator(n.key,r.key):(n,r)=>Xe.comparator(n.key,r.key),this.keyedMap=xg(),this.sortedSet=new Nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Yf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class F4{constructor(){this.ga=new Nn(Xe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):nt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class dh{constructor(e,n,r,i,a,s,o,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach((o=>{s.push({type:0,doc:o})})),new dh(e,n,Yf.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class ele{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class tle{constructor(){this.queries=$4(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ot(n),a=i.queries;i.queries=$4(),a.forEach(((s,o)=>{for(const c of o.Sa)c.onError(r)}))})(this,new ze(Ae.ABORTED,"Firestore shutting down"))}}function $4(){return new wd((t=>uF(t)),_1)}async function tN(t,e){const n=ot(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new ele,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=eN(s,`Initialization of query '${Af(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&rN(n)}async function nN(t,e){const n=ot(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.Sa.indexOf(e);s>=0&&(a.Sa.splice(s,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nle(t,e){const n=ot(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.Sa)o.Fa(i)&&(r=!0);s.wa=i}}r&&rN(n)}function rle(t,e,n){const r=ot(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function rN(t){t.Ca.forEach((e=>{e.next()}))}var uk,q4;(q4=uk||(uk={})).Ma="default",q4.Cache="cache";class iN{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new dh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=dh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==uk.Cache}}class qF{constructor(e){this.key=e}}class GF{constructor(e){this.key=e}}class ile{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Tt(),this.mutatedKeys=Tt(),this.eu=dF(e),this.tu=new Yf(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new F4,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,h)=>{const g=i.get(f),v=E1(this.query,h)?h:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let w=!1;g&&v?g.data.isEqual(v.data)?b!==x&&(r.track({type:3,doc:v}),w=!0):this.su(g,v)||(r.track({type:2,doc:v}),w=!0,(c&&this.eu(v,c)>0||d&&this.eu(v,d)<0)&&(o=!0)):!g&&v?(r.track({type:0,doc:v}),w=!0):g&&!v&&(r.track({type:1,doc:g}),w=!0,(c||d)&&(o=!0)),w&&(v?(s=s.add(v),a=x?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((f,h)=>(function(v,b){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt(20277,{Rt:w})}};return x(v)-x(b)})(f.type,h.type)||this.eu(f.doc,h.doc))),this.ou(r),i=i??!1;const o=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,s.length!==0||d?{snapshot:new dh(this.query,e.tu,a,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new F4,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Tt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new GF(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new qF(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Tt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return dh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const aN="SyncEngine";class ale{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class sle{constructor(e){this.key=e,this.hu=!1}}class ole{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new wd((o=>uF(o)),_1),this.Iu=new Map,this.Eu=new Set,this.du=new Nn(Xe.comparator),this.Au=new Map,this.Ru=new G2,this.Vu={},this.mu=new Map,this.fu=uh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lle(t,e,n=!0){const r=QF(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await HF(r,e,n,!0),i}async function cle(t,e){const n=QF(t);await HF(n,e,!0,!1)}async function HF(t,e,n,r){const i=await Noe(t.localStore,eo(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await ule(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&LF(t.remoteStore,i),o}async function ule(t,e,n,r,i){t.pu=(h,g,v)=>(async function(x,w,_,T){let N=w.view.ru(_);N.Cs&&(N=await j4(x.localStore,w.query,!1).then((({documents:C})=>w.view.ru(C,N))));const D=T&&T.targetChanges.get(w.targetId),P=T&&T.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(N,x.isPrimaryClient,D,P);return H4(x,w.targetId,O.au),O.snapshot})(t,h,g,v);const a=await j4(t.localStore,e,!0),s=new ile(e,a.Qs),o=s.ru(a.documents),c=Hm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=s.applyChanges(o,t.isPrimaryClient,c);H4(t,n,d.au);const f=new ale(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function dle(t,e,n){const r=ot(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((s=>!_1(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await lk(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&K2(r.remoteStore,i.targetId),dk(r,i.targetId)})).catch(Rh)):(dk(r,i.targetId),await lk(r.localStore,i.targetId,!0))}async function fle(t,e){const n=ot(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),K2(n.remoteStore,r.targetId))}async function hle(t,e,n){const r=xle(t);try{const i=await(function(s,o){const c=ot(s),d=xt.now(),f=o.reduce(((v,b)=>v.add(b.key)),Tt());let h,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let b=ol(),x=Tt();return c.Ns.getEntries(v,f).next((w=>{b=w,b.forEach(((_,T)=>{T.isValidDocument()||(x=x.add(_))}))})).next((()=>c.localDocuments.getOverlayedDocuments(v,b))).next((w=>{h=w;const _=[];for(const T of o){const N=Cse(T,h.get(T.key).overlayedDocument);N!=null&&_.push(new qc(T.key,N,nF(N.value.mapValue),xi.exists(!0)))}return c.mutationQueue.addMutationBatch(v,d,_,o)})).next((w=>{g=w;const _=w.applyToLocalDocumentSet(h,x);return c.documentOverlayCache.saveOverlays(v,w.batchId,_)}))})).then((()=>({batchId:g.batchId,changes:hF(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,o,c){let d=s.Vu[s.currentUser.toKey()];d||(d=new Nn(Et)),d=d.insert(o,c),s.Vu[s.currentUser.toKey()]=d})(r,i.batchId,n),await Ym(r,i.changes),await O1(r.remoteStore)}catch(i){const a=eN(i,"Failed to persist write");n.reject(a)}}async function WF(t,e){const n=ot(t);try{const r=await Aoe(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=n.Au.get(a);s&&(jt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?jt(s.hu,14607):i.removedDocuments.size>0&&(jt(s.hu,42227),s.hu=!1))})),await Ym(n,r,e)}catch(r){await Rh(r)}}function G4(t,e,n){const r=ot(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(s,o){const c=ot(s);c.onlineState=o;let d=!1;c.queries.forEach(((f,h)=>{for(const g of h.Sa)g.va(o)&&(d=!0)})),d&&rN(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ple(t,e,n){const r=ot(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let s=new Nn(Xe.comparator);s=s.insert(a,ni.newNoDocument(a,it.min()));const o=Tt().add(a),c=new C1(it.min(),new Map,new Nn(Et),s,o);await WF(r,c),r.du=r.du.remove(a),r.Au.delete(e),sN(r)}else await lk(r.localStore,e,!1).then((()=>dk(r,e,n))).catch(Rh)}async function gle(t,e){const n=ot(t),r=e.batch.batchId;try{const i=await Toe(n.localStore,e);KF(n,r,null),YF(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ym(n,i)}catch(i){await Rh(i)}}async function mle(t,e,n){const r=ot(t);try{const i=await(function(s,o){const c=ot(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let f;return c.mutationQueue.lookupMutationBatch(d,o).next((h=>(jt(h!==null,37113),f=h.keys(),c.mutationQueue.removeMutationBatch(d,h)))).next((()=>c.mutationQueue.performConsistencyCheck(d))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f))).next((()=>c.localDocuments.getDocuments(d,f)))}))})(r.localStore,e);KF(r,e,n),YF(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ym(r,i)}catch(i){await Rh(i)}}function YF(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function KF(t,e,n){const r=ot(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function dk(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||XF(t,r)}))}function XF(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(K2(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),sN(t))}function H4(t,e,n){for(const r of n)r instanceof qF?(t.Ru.addReference(r.key,e),vle(t,r)):r instanceof GF?(Le(aN,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||XF(t,r.key)):nt(19791,{wu:r})}function vle(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Le(aN,"New document in limbo: "+n),t.Eu.add(r),sN(t))}function sN(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Xe(an.fromString(e)),r=t.fu.next();t.Au.set(r,new sle(n)),t.du=t.du.insert(n,r),LF(t.remoteStore,new pc(eo(S1(n.path)),r,"TargetPurposeLimboResolution",b1.ce))}}async function Ym(t,e,n){const r=ot(t),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,c)=>{s.push(r.pu(c,e,n).then((d=>{if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){i.push(d);const f=W2.As(c.targetId,d);a.push(f)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(c,d){const f=ot(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>Ce.forEach(d,(g=>Ce.forEach(g.Es,(v=>f.persistence.referenceDelegate.addReference(h,g.targetId,v))).next((()=>Ce.forEach(g.ds,(v=>f.persistence.referenceDelegate.removeReference(h,g.targetId,v)))))))))}catch(h){if(!Mh(h))throw h;Le(Y2,"Failed to update sequence numbers: "+h)}for(const h of d){const g=h.targetId;if(!h.fromCache){const v=f.Ms.get(g),b=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(b);f.Ms=f.Ms.insert(g,x)}}})(r.localStore,a))}async function yle(t,e){const n=ot(t);if(!n.currentUser.isEqual(e)){Le(aN,"User change. New user:",e.toKey());const r=await RF(n.localStore,e);n.currentUser=e,(function(a,s){a.mu.forEach((o=>{o.forEach((c=>{c.reject(new ze(Ae.CANCELLED,s))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ym(n,r.Ls)}}function ble(t,e){const n=ot(t),r=n.Au.get(e);if(r&&r.hu)return Tt().add(r.key);{let i=Tt();const a=n.Iu.get(e);if(!a)return i;for(const s of a){const o=n.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}function QF(t){const e=ot(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=WF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ble.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ple.bind(null,e),e.Pu.H_=nle.bind(null,e.eventManager),e.Pu.yu=rle.bind(null,e.eventManager),e}function xle(t){const e=ot(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gle.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mle.bind(null,e),e}class Yb{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=N1(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Eoe(this.persistence,new woe,e.initialUser,this.serializer)}Cu(e){return new DF(H2.mi,this.serializer)}Du(e){return new Ooe}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yb.provider={build:()=>new Yb};class wle extends Yb{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){jt(this.persistence.referenceDelegate instanceof Hb,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new soe(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Pi.withCacheSize(this.cacheSizeBytes):Pi.DEFAULT;return new DF((r=>Hb.mi(r,n)),this.serializer)}}class fk{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>G4(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yle.bind(null,this.syncEngine),await Joe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new tle})()}createDatastore(e){const n=N1(e.databaseInfo.databaseId),r=(function(a){return new joe(a)})(e.databaseInfo);return(function(a,s,o,c){return new Boe(a,s,o,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,s,o){return new Foe(r,i,a,s,o)})(this.localStore,this.datastore,e.asyncQueue,(n=>G4(this.syncEngine,n,0)),(function(){return V4.v()?new V4:new Poe})())}createSyncEngine(e,n){return(function(i,a,s,o,c,d,f){const h=new ole(i,a,s,o,c,d);return f&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=ot(n);Le(rd,"RemoteStore shutting down."),r.Ea.add(5),await Wm(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}fk.provider={build:()=>new fk};class oN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Pc="FirestoreClient";class Sle{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ti.UNAUTHENTICATED,this.clientId=M2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async s=>{Le(Pc,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(Le(Pc,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=eN(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function bE(t,e){t.asyncQueue.verifyOperationInProgress(),Le(Pc,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await RF(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function W4(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _le(t);Le(Pc,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>U4(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>U4(e.remoteStore,i))),t._onlineComponents=e}async function _le(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Le(Pc,"Using user provided OfflineComponentProvider");try{await bE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ae.FAILED_PRECONDITION||i.code===Ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;ah("Error using user provided cache. Falling back to memory cache: "+n),await bE(t,new Yb)}}else Le(Pc,"Using default OfflineComponentProvider"),await bE(t,new wle(void 0));return t._offlineComponents}async function ZF(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Le(Pc,"Using user provided OnlineComponentProvider"),await W4(t,t._uninitializedComponentsProvider._online)):(Le(Pc,"Using default OnlineComponentProvider"),await W4(t,new fk))),t._onlineComponents}function Ele(t){return ZF(t).then((e=>e.syncEngine))}async function Kb(t){const e=await ZF(t),n=e.eventManager;return n.onListen=lle.bind(null,e.syncEngine),n.onUnlisten=dle.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cle.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fle.bind(null,e.syncEngine),n}function Tle(t,e,n={}){const r=new Xo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,d){const f=new oN({next:g=>{f.Nu(),s.enqueueAndForget((()=>nN(a,h)));const v=g.docs.has(o);!v&&g.fromCache?d.reject(new ze(Ae.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&c&&c.source==="server"?d.reject(new ze(Ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),h=new iN(S1(o.path),f,{includeMetadataChanges:!0,qa:!0});return tN(a,h)})(await Kb(t),t.asyncQueue,e,n,r))),r.promise}function Ale(t,e,n={}){const r=new Xo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,d){const f=new oN({next:g=>{f.Nu(),s.enqueueAndForget((()=>nN(a,h))),g.fromCache&&c.source==="server"?d.reject(new ze(Ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),h=new iN(o,f,{includeMetadataChanges:!0,qa:!0});return tN(a,h)})(await Kb(t),t.asyncQueue,e,n,r))),r.promise}function JF(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Y4=new Map;const e$="firestore.googleapis.com",K4=!0;class X4{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ze(Ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=e$,this.ssl=K4}else this.host=e.host,this.ssl=e.ssl??K4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ioe)throw new ze(Ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Uae("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JF(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ze(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ze(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ze(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class P1{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(Ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(Ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X4(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Oae;switch(r.type){case"firstParty":return new Mae(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ze(Ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Y4.get(n);r&&(Le("ComponentProvider","Removing Datastore"),Y4.delete(n),r.terminate())})(this),Promise.resolve()}}function kle(t,e,n,r={}){t=bi(t,P1);const i=Uc(e),a=t._getSettings(),s={...a,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;i&&(f2(`https://${o}`),h2("Firestore",!0)),a.host!==e$&&a.host!==o&&ah("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:o,ssl:i,emulatorOptions:r};if(!Tc(c,s)&&(t._setSettings(c),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=ti.MOCK_USER;else{d=cZ(r.mockUserToken,t._app?.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new ze(Ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ti(h)}t._authCredentials=new Pae(new q9(d,f))}}class xl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xl(this.firestore,e,this._query)}}class zn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}toJSON(){return{type:zn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(qm(n,zn._jsonSchema))return new zn(e,r||null,new Xe(an.fromString(n.referencePath)))}}zn._jsonSchemaVersion="firestore/documentReference/1.0",zn._jsonSchema={type:ar("string",zn._jsonSchemaVersion),referencePath:ar("string")};class Sc extends xl{constructor(e,n,r){super(e,n,S1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new Xe(e))}withConverter(e){return new Sc(this.firestore,e,this._path)}}function Fr(t,e,...n){if(t=zt(t),G9("collection","path",e),t instanceof P1){const r=an.fromString(e,...n);return c4(r),new Sc(t,null,r)}{if(!(t instanceof zn||t instanceof Sc))throw new ze(Ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(an.fromString(e,...n));return c4(r),new Sc(t.firestore,null,r)}}function bt(t,e,...n){if(t=zt(t),arguments.length===1&&(e=M2.newId()),G9("doc","path",e),t instanceof P1){const r=an.fromString(e,...n);return l4(r),new zn(t,null,new Xe(r))}{if(!(t instanceof zn||t instanceof Sc))throw new ze(Ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(an.fromString(e,...n));return l4(r),new zn(t.firestore,t instanceof Sc?t.converter:null,new Xe(r))}}const Q4="AsyncQueue";class Z4{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jF(this,"async_queue_retry"),this._c=()=>{const r=yE();r&&Le(Q4,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=yE();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Xo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Mh(e))throw e;Le(Q4,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,sl("INTERNAL UNHANDLED ERROR: ",J4(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=J2.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&nt(47125,{Pc:J4(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function J4(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function ez(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class co extends P1{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Z4,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Z4(e),this._firestoreClient=void 0,await e}}}function Cle(t,e){const n=typeof t=="object"?t:m2(),r=typeof t=="string"?t:Vb,i=f1(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=mU("firestore");a&&kle(i,...a)}return i}function Km(t){if(t._terminated)throw new ze(Ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Nle(t),t._firestoreClient}function Nle(t){const e=t._freezeSettings(),n=(function(i,a,s,o){return new Zae(i,a,s,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,JF(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Sle(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class Ia{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ia(Hr.fromBase64String(e))}catch(n){throw new ze(Ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ia(Hr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ia._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qm(e,Ia._jsonSchema))return Ia.fromBase64String(e.bytes)}}Ia._jsonSchemaVersion="firestore/bytes/1.0",Ia._jsonSchema={type:ar("string",Ia._jsonSchemaVersion),bytes:ar("string")};class Xm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ze(Ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class D1{constructor(e){this._methodName=e}}class no{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ze(Ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ze(Ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Et(this._lat,e._lat)||Et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:no._jsonSchemaVersion}}static fromJSON(e){if(qm(e,no._jsonSchema))return new no(e.latitude,e.longitude)}}no._jsonSchemaVersion="firestore/geoPoint/1.0",no._jsonSchema={type:ar("string",no._jsonSchemaVersion),latitude:ar("number"),longitude:ar("number")};class ro{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ro._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qm(e,ro._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ro(e.vectorValues);throw new ze(Ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ro._jsonSchemaVersion="firestore/vectorValue/1.0",ro._jsonSchema={type:ar("string",ro._jsonSchemaVersion),vectorValues:ar("object")};const Ile=/^__.*__$/;class Ole{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gm(e,this.data,n,this.fieldTransforms)}}class t${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function n$(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt(40011,{Ac:t})}}class R1{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new R1({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xb(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(n$(this.Ac)&&Ile.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ple{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||N1(e)}Cc(e,n,r,i=!1){return new R1({Ac:e,methodName:n,Dc:r,path:Gr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qm(t){const e=t._freezeSettings(),n=N1(t._databaseId);return new Ple(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lN(t,e,n,r,i,a={}){const s=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);uN("Data must be an object, but it was:",s,r);const o=a$(r,s);let c,d;if(a.merge)c=new aa(s.fieldMask),d=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const h of a.mergeFields){const g=hk(e,h,n);if(!s.contains(g))throw new ze(Ae.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);o$(f,g)||f.push(g)}c=new aa(f),d=s.fieldTransforms.filter((h=>c.covers(h.field)))}else c=null,d=s.fieldTransforms;return new Ole(new Ri(o),c,d)}class Zm extends D1{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zm}}function Dle(t,e,n){return new R1({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cN extends D1{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Dle(this,e,!0),r=this.vc.map((a=>Lh(a,n))),i=new ch(r);return new Ese(e.path,i)}isEqual(e){return e instanceof cN&&Tc(this.vc,e.vc)}}function r$(t,e,n,r){const i=t.Cc(1,e,n);uN("Data must be an object, but it was:",i,r);const a=[],s=Ri.empty();$c(r,((c,d)=>{const f=dN(e,c,n);d=zt(d);const h=i.yc(f);if(d instanceof Zm)a.push(f);else{const g=Lh(d,h);g!=null&&(a.push(f),s.set(f,g))}}));const o=new aa(a);return new t$(s,o,i.fieldTransforms)}function i$(t,e,n,r,i,a){const s=t.Cc(1,e,n),o=[hk(e,r,n)],c=[i];if(a.length%2!=0)throw new ze(Ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(hk(e,a[g])),c.push(a[g+1]);const d=[],f=Ri.empty();for(let g=o.length-1;g>=0;--g)if(!o$(d,o[g])){const v=o[g];let b=c[g];b=zt(b);const x=s.yc(v);if(b instanceof Zm)d.push(v);else{const w=Lh(b,x);w!=null&&(d.push(v),f.set(v,w))}}const h=new aa(d);return new t$(f,h,s.fieldTransforms)}function Rle(t,e,n,r=!1){return Lh(n,t.Cc(r?4:3,e))}function Lh(t,e){if(s$(t=zt(t)))return uN("Unsupported field value:",e,t),a$(t,e);if(t instanceof D1)return(function(r,i){if(!n$(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let s=0;for(const o of r){let c=Lh(o,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wse(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=xt.fromDate(r);return{timestampValue:Gb(i.serializer,a)}}if(r instanceof xt){const a=new xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gb(i.serializer,a)}}if(r instanceof no)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ia)return{bytesValue:TF(i.serializer,r._byteString)};if(r instanceof zn){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:q2(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ro)return(function(s,o){return{mapValue:{fields:{[eF]:{stringValue:tF},[Bb]:{arrayValue:{values:s.toArray().map((d=>{if(typeof d!="number")throw o.Sc("VectorValues must only contain numeric values.");return U2(o.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${y1(r)}`)})(t,e)}function a$(t,e){const n={};return Y9(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$c(t,((r,i)=>{const a=Lh(i,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function s$(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xt||t instanceof no||t instanceof Ia||t instanceof zn||t instanceof D1||t instanceof ro)}function uN(t,e,n){if(!s$(n)||!H9(n)){const r=y1(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function hk(t,e,n){if((e=zt(e))instanceof Xm)return e._internalPath;if(typeof e=="string")return dN(t,e);throw Xb("Field path arguments must be of type string or ",t,!1,void 0,n)}const Mle=new RegExp("[~\\*/\\[\\]]");function dN(t,e,n){if(e.search(Mle)>=0)throw Xb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xm(...e.split("."))._internalPath}catch{throw Xb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xb(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new ze(Ae.INVALID_ARGUMENT,o+t+c)}function o$(t,e){return t.some((n=>n.isEqual(e)))}class l${constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jle(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(M1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jle extends l${data(){return super.data()}}function M1(t,e){return typeof e=="string"?dN(t,e):e instanceof Xm?e._internalPath:e._delegate._internalPath}function c$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ze(Ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fN{}class hN extends fN{}function Mi(t,e,...n){let r=[];e instanceof fN&&r.push(e),r=r.concat(n),(function(a){const s=a.filter((c=>c instanceof pN)).length,o=a.filter((c=>c instanceof j1)).length;if(s>1||s>0&&o>0)throw new ze(Ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class j1 extends hN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new j1(e,n,r)}_apply(e){const n=this._parse(e);return u$(e._query,n),new xl(e.firestore,e.converter,rk(e._query,n))}_parse(e){const n=Qm(e.firestore);return(function(a,s,o,c,d,f,h){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new ze(Ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){rz(h,f);const b=[];for(const x of h)b.push(nz(c,a,x));g={arrayValue:{values:b}}}else g=nz(c,a,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||rz(h,f),g=Rle(o,s,h,f==="in"||f==="not-in");return rr.create(d,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hb(t,e,n){const r=e,i=M1("where",t);return j1._create(i,r,n)}class pN extends fN{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pN(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ms.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)u$(s,c),s=rk(s,c)})(e._query,n),new xl(e.firestore,e.converter,rk(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gN extends hN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gN(e,n)}_apply(e){const n=(function(i,a,s){if(i.startAt!==null)throw new ze(Ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ze(Ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rm(a,s)})(e._query,this._field,this._direction);return new xl(e.firestore,e.converter,(function(i,a){const s=i.explicitOrderBy.concat([a]);return new jh(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function ds(t,e="asc"){const n=e,r=M1("orderBy",t);return gN._create(r,n)}class mN extends hN{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new mN(e,n,r)}_apply(e){return new xl(e.firestore,e.converter,Fb(e._query,this._limit,this._limitType))}}function tz(t){return mN._create("limit",t,"F")}function nz(t,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new ze(Ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cF(e)&&n.indexOf("/")!==-1)throw new ze(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(an.fromString(n));if(!Xe.isDocumentKey(r))throw new ze(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return v4(t,new Xe(r))}if(n instanceof zn)return v4(t,n._key);throw new ze(Ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${y1(n)}.`)}function rz(t,e){if(!Array.isArray(t)||t.length===0)throw new ze(Ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function u$(t,e){const n=(function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ze(Ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ze(Ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class zle{convertValue(e,n="none"){switch(Ic(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Nc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw nt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $c(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[Bb].arrayValue?.values?.map((r=>qn(r.doubleValue)));return new ro(n)}convertGeoPoint(e){return new no(qn(e.latitude),qn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=w1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(em(e));default:return null}}convertTimestamp(e){const n=Cc(e);return new xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=an.fromString(e);jt(OF(r),9688,{name:e});const i=new tm(r.get(1),r.get(3)),a=new Xe(r.popFirst(5));return i.isEqual(n)||sl(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function vN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Sg{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hu extends l${constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(M1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(Ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Hu._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Hu._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hu._jsonSchema={type:ar("string",Hu._jsonSchemaVersion),bundleSource:ar("string","DocumentSnapshot"),bundleName:ar("string"),bundle:ar("string")};class pb extends Hu{data(e={}){return super.data(e)}}class Wu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Sg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new pb(this._firestore,this._userDataWriter,r.key,r,new Sg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ze(Ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((o=>{const c=new pb(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Sg(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>a||o.type!==3)).map((o=>{const c=new pb(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Sg(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return o.type!==0&&(d=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:Lle(o.type),doc:c,oldIndex:d,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(Ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=M2.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Lle(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt(61501,{type:t})}}function xE(t){t=bi(t,zn);const e=bi(t.firestore,co);return Tle(Km(e),t._key).then((n=>d$(e,t,n)))}Wu._jsonSchemaVersion="firestore/querySnapshot/1.0",Wu._jsonSchema={type:ar("string",Wu._jsonSchemaVersion),bundleSource:ar("string","QuerySnapshot"),bundleName:ar("string"),bundle:ar("string")};class yN extends zle{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ia(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,n)}}function Ji(t){t=bi(t,xl);const e=bi(t.firestore,co),n=Km(e),r=new yN(e);return c$(t._query),Ale(n,t._query).then((i=>new Wu(e,r,t,i)))}function ea(t,e,n){t=bi(t,zn);const r=bi(t.firestore,co),i=vN(t.converter,e,n);return Jm(r,[lN(Qm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,xi.none())])}function Ys(t,e,n,...r){t=bi(t,zn);const i=bi(t.firestore,co),a=Qm(i);let s;return s=typeof(e=zt(e))=="string"||e instanceof Xm?i$(a,"updateDoc",t._key,e,n,r):r$(a,"updateDoc",t._key,e),Jm(i,[s.toMutation(t._key,xi.exists(!0))])}function na(t){return Jm(bi(t.firestore,co),[new k1(t._key,xi.none())])}function z1(t,e){const n=bi(t.firestore,co),r=bt(t),i=vN(t.converter,e);return Jm(n,[lN(Qm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,xi.exists(!1))]).then((()=>r))}function Dc(t,...e){t=zt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||ez(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(ez(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let a,s,o;if(t instanceof zn)s=bi(t.firestore,co),o=S1(t._key.path),a={next:c=>{e[r]&&e[r](d$(s,t,c))},error:e[r+1],complete:e[r+2]};else{const c=bi(t,xl);s=bi(c.firestore,co),o=c._query;const d=new yN(s);a={next:f=>{e[r]&&e[r](new Wu(s,d,c,f))},error:e[r+1],complete:e[r+2]},c$(t._query)}return(function(d,f,h,g){const v=new oN(g),b=new iN(f,v,h);return d.asyncQueue.enqueueAndForget((async()=>tN(await Kb(d),b))),()=>{v.Nu(),d.asyncQueue.enqueueAndForget((async()=>nN(await Kb(d),b)))}})(Km(s),o,i,a)}function Jm(t,e){return(function(r,i){const a=new Xo;return r.asyncQueue.enqueueAndForget((async()=>hle(await Ele(r),i,a))),a.promise})(Km(t),e)}function d$(t,e,n){const r=n.docs.get(e._key),i=new yN(t);return new Hu(t,i,e._key,r,new Sg(n.hasPendingWrites,n.fromCache),e.converter)}class Vle{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Qm(e)}set(e,n,r){this._verifyNotCommitted();const i=wE(e,this._firestore),a=vN(i.converter,n,r),s=lN(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,xi.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=wE(e,this._firestore);let s;return s=typeof(n=zt(n))=="string"||n instanceof Xm?i$(this._dataReader,"WriteBatch.update",a._key,n,r,i):r$(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,xi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=wE(e,this._firestore);return this._mutations=this._mutations.concat(new k1(n._key,xi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(Ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wE(t,e){if((t=zt(t)).firestore!==e)throw new ze(Ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function iz(){return new Zm("deleteField")}function Ble(...t){return new cN("arrayUnion",t)}function pk(t){return Km(t=bi(t,co)),new Vle(t,(e=>Jm(t,e)))}(function(e,n=!0){(function(i){Dh=i})(Oh),Ju(new Ac("firestore",((r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new co(new Dae(r.getProvider("auth-internal")),new jae(s,r.getProvider("app-check-internal")),(function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ze(Ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tm(d.options.projectId,f)})(s,i),s);return a={useFetchStreams:n,...a},o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),Qs(i4,a4,e),Qs(i4,a4,"esm2020")})();const Ule={apiKey:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:0ae73943f9058a4342aba9",measurementId:"G-VMP5DF6273"},f$=wU(Ule),fi=a9(f$),Ze=Cle(f$),Di={DEBUG:0,INFO:1,WARN:2,ERROR:3};class Fle{logs=[];maxLogs=1e3;sessionId;subscribers=new Set;constructor(){this.sessionId=this.generateSessionId(),this.info("Logger","Session started",{sessionId:this.sessionId})}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}createEntry(e,n,r,i){return{id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),level:e,message:r,source:n,data:i,userId:this.getUserId(),sessionId:this.sessionId}}getUserId(){try{const e=localStorage.getItem("auth-storage");if(e)return JSON.parse(e).state?.user?.uid}catch{}}addLog(e){this.logs.push(e),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.notifySubscribers();const r=["DEBUG","INFO","WARN","ERROR"][e.level],i=e.level===Di.ERROR?"error":e.level===Di.WARN?"warn":"log";console[i](`[${r}] ${e.source}: ${e.message}`,e.data||"")}notifySubscribers(){const e=[...this.logs];this.subscribers.forEach(n=>n(e))}debug(e,n,r){this.addLog(this.createEntry(Di.DEBUG,e,n,r))}info(e,n,r){this.addLog(this.createEntry(Di.INFO,e,n,r))}warn(e,n,r){this.addLog(this.createEntry(Di.WARN,e,n,r))}error(e,n,r){this.addLog(this.createEntry(Di.ERROR,e,n,r))}getLogs(e){let n=[...this.logs];if(e?.level!==void 0&&(n=n.filter(r=>r.level>=e.level)),e?.source&&(n=n.filter(r=>r.source.toLowerCase().includes(e.source.toLowerCase()))),e?.search){const r=e.search.toLowerCase();n=n.filter(i=>i.message.toLowerCase().includes(r)||i.data&&JSON.stringify(i.data).toLowerCase().includes(r))}return e?.startTime&&(n=n.filter(r=>r.timestamp>=e.startTime)),e?.endTime&&(n=n.filter(r=>r.timestamp<=e.endTime)),n.reverse()}subscribe(e){return this.subscribers.add(e),e([...this.logs]),()=>{this.subscribers.delete(e)}}exportLogs(e){const n=this.getLogs(e),r={exportedAt:new Date().toISOString(),sessionId:this.sessionId,totalLogs:n.length,logs:n.map(i=>({...i,timestamp:new Date(i.timestamp).toISOString(),level:["DEBUG","INFO","WARN","ERROR"][i.level]}))};return JSON.stringify(r,null,2)}downloadLogs(e){const n=this.exportLogs(e),r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`budget-app-logs-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}clearLogs(){this.logs=[],this.notifySubscribers(),this.info("Logger","Logs cleared")}getStats(){const e={},n={},r=["DEBUG","INFO","WARN","ERROR"];this.logs.forEach(a=>{const s=r[a.level];e[s]=(e[s]||0)+1,n[a.source]=(n[a.source]||0)+1});const i=this.logs.length>0?Date.now()-this.logs[0].timestamp:0;return{total:this.logs.length,byLevel:e,bySource:n,sessionDuration:i}}}const Tn=new Fle;function SE(t){if(typeof t=="string"){const e=t.match(/^[^\w]*\s*([A-Za-z]+):\s*(.*)/);return e?{source:e[1],message:e[2]}:{source:"App",message:t}}return{source:"App",message:String(t)}}const $={log:(...t)=>{const{source:e,message:n}=SE(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;Tn.info(e,n,r)},warn:(...t)=>{const{source:e,message:n}=SE(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;Tn.warn(e,n,r)},error:(...t)=>{const{source:e,message:n}=SE(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;Tn.error(e,n,r)}},az=()=>({url:window.location.origin+"/personal-budget-pwa/",handleCodeInApp:!1}),hy=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),Zt=D2()(j9(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await Fee(fi,e,n)).user;if($.log(` Checking email verification for: ${i.email}`),$.log(" emailVerified status:",i.emailVerified),$.log(" Firebase user object:",{uid:i.uid,email:i.email,emailVerified:i.emailVerified,metadata:i.metadata}),!i.emailVerified)return $.log(` BLOCKING LOGIN: Email not verified for ${i.email}`),await Pj(fi),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),$.log(` Login blocked: ${i.email} not verified`),!1;$.log(` EMAIL VERIFIED: Allowing login for ${i.email}`);const a=hy(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),$.log(` User logged in: ${a.email}`),!0}catch(r){$.error("Login error:",r),$.error("Error code:",r.code),$.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:$.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else $.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await Uee(fi,e,n)).user;await qee(a,{displayName:r}),await Oj(a,az());const s=hy(a);return t({currentUser:s,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),$.log(` User registered: ${s.email}, verification email sent`),!0}catch(i){$.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await Pj(fi),$.log(" User logged out")}catch(e){$.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await Lee(fi,e),t({isLoading:!1}),!0}catch(n){$.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=fi.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await Oj(e,az()),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),$.log(` Verification email sent to: ${e.email}`),!0}catch(n){$.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=Zt.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},checkVerificationStatus:async()=>{const e=fi.currentUser;if(!e)return!1;try{await e.reload();const n=fi.currentUser;if(n?.emailVerified){const r=hy(n);return t({currentUser:r,isAuthenticated:!0,lastAuthTime:Date.now()}),$.log(` Email verified for: ${n.email}`),!0}return!1}catch(n){return $.error("Error checking verification status:",n),!1}},deleteAccount:async e=>{const n=fi.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=vd.credential(n.email,e);return await jee(n,r),await Yee(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),$.log(` Account permanently deleted: ${n.email}`),!0}catch(r){$.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},confirmPasswordReset:async(e,n)=>{t({isLoading:!0,loginError:null});try{return await Vee(fi,e,n),t({isLoading:!1}),$.log(" Password reset successful"),!0}catch(r){$.error("Password reset confirmation error:",r);let i="Failed to reset password. The link may be expired or invalid.";switch(r.code){case"auth/expired-action-code":i="The password reset link has expired. Please request a new one.";break;case"auth/invalid-action-code":i="The password reset link is invalid. Please request a new one.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>Zt.getState().isInitialized?()=>{}:(t({isInitialized:!1}),Wee(fi,async r=>{const i=Date.now(),a=Zt.getState(),s=r?hy(r):null,o=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,d=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&o&&!s,f=r?r.emailVerified:!0,h=r&&f||!!d,g=r?s:d?a.currentUser:null;if(t({currentUser:g,isAuthenticated:h,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&f?i:a.lastAuthTime}),g)if($.log(` Auth state: User is signed in (${g.email})`,d?"(offline grace period)":f?"(verified)":"(unverified)"),$.log(" Onboarding check:",{isVerified:f,shouldGrantOfflineAccess:d,willCheckOnboarding:f&&!d}),f&&!d){$.log(" Loading budgetStore to check onboarding...");const v=await eh(()=>Promise.resolve().then(()=>Zq),[]).then(b=>b.useBudgetStore.getState());$.log(" Calling budgetStore.checkAndStartOnboarding()..."),await v.checkAndStartOnboarding()}else $.log(" Skipping onboarding check (not verified or offline grace period)");else $.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),h$=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],$le=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=h$.map(o=>({...o,met:o.regex.test(t)})).filter(o=>o.met).length;let i,a,s;return r<=1?(i="weak",a="text-red-500",s="Weak"):r<=3?(i="medium",a="text-yellow-500",s="Medium"):r===4?(i="strong",a="text-blue-500",s="Strong"):(i="very-strong",a="text-green-500",s="Very Strong"),{score:r,level:i,color:a,label:s}},L1=t=>{const e=h$.map(i=>({...i,met:i.regex.test(t)})),n=$le(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},p$=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=L1(t);return r?null:m.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[m.jsx("div",{className:"flex-1",children:m.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>m.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),m.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},g$=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=L1(t);return r?null:m.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>m.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?m.jsx(O2,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):m.jsx($m,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},qle=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[i,a]=A.useState(""),[s,o]=A.useState(!1),[c,d]=A.useState(!1),[f,h]=A.useState(!1),[g,v]=A.useState(!1),{login:b,register:x,sendPasswordReset:w,isLoading:_,loginError:T,clearError:N}=Zt(),D=L1(n),P=async C=>{if(C.preventDefault(),N(),t.trim()&&n.trim())if(c){if(!i.trim()||!D.isValid)return;await x(t.trim(),n,i.trim())}else await b(t.trim(),n)},O=async C=>{C.preventDefault(),t.trim()&&await w(t.trim())&&v(!0)};return A.useEffect(()=>{e(""),r(""),a(""),v(!1)},[c,f]),m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:f?m.jsxs("form",{onSubmit:O,className:"space-y-6",children:[m.jsxs("div",{className:"text-center mb-2",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(KA,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"reset-email",type:"email",value:t,onChange:C=>e(C.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:_,autoComplete:"email"})]})]}),g?m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:m.jsx(KA,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),m.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),m.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",m.jsx("span",{className:"font-medium",children:t})]}),m.jsxs("button",{type:"button",onClick:()=>h(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[m.jsx(al,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"submit",disabled:_||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:_?"Sending...":"Send Reset Link"}),m.jsx("div",{className:"mt-4 text-center",children:m.jsxs("button",{type:"button",onClick:()=>h(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:_,children:[m.jsx(al,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):m.jsxs("form",{onSubmit:P,className:"space-y-6",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c?"Create Account":"Sign In"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:c?"Create a new account to get started":"Sign in to your account"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),m.jsx("input",{id:"email",type:"email",value:t,onChange:C=>e(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:_,autoComplete:"username"})]}),c&&m.jsxs("div",{children:[m.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),m.jsx("input",{id:"displayName",type:"text",value:i,onChange:C=>a(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:_})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!c&&m.jsx("button",{type:"button",onClick:()=>h(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:_,children:"Forgot password?"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"password",type:s?"text":"password",value:n,onChange:C=>r(C.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${c&&n&&!D.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:_,autoComplete:c?"new-password":"current-password"}),m.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:_,children:s?m.jsx(I9,{className:"h-5 w-5"}):m.jsx(O9,{className:"h-5 w-5"})})]}),c&&n&&m.jsx("div",{className:"mt-2",children:m.jsx(p$,{password:n})}),c&&n&&m.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:m.jsx(g$,{password:n})})]}),T&&m.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[T,T.includes("verify your email")&&m.jsx("div",{className:"mt-3",children:m.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),m.jsx("button",{type:"submit",disabled:_||!t.trim()||!n.trim()||c&&!i.trim()||c&&!D.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:_?c?"Creating Account...":"Signing in...":c?"Create Account":"Sign In"}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("button",{type:"button",onClick:()=>{d(!c),h(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:_,children:[m.jsx(pae,{className:"h-4 w-4"}),c?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},Gle=({oobCode:t,onSuccess:e,onCancel:n})=>{const[r,i]=A.useState(""),[a,s]=A.useState(""),[o,c]=A.useState(!1),[d,f]=A.useState(!1),{confirmPasswordReset:h,isLoading:g,loginError:v,clearError:b}=Zt(),x=L1(r);A.useEffect(()=>{b()},[b]);const w=async _=>{if(_.preventDefault(),r!==a||!x.isValid)return;await h(t,r)&&f(!0)};return d?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-6",children:m.jsx(zb,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Password Reset Complete"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Your password has been successfully updated. You can now log in with your new password."}),m.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200",children:"Go to Login"})]})}):m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"Reset Password"})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create a new password for your account"})]})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:m.jsxs("form",{onSubmit:w,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(Zj,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"new-password",type:o?"text":"password",value:r,onChange:_=>i(_.target.value),className:"w-full pl-10 pr-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Enter new password",required:!0}),m.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",onClick:()=>c(!o),children:o?m.jsx(I9,{className:"h-5 w-5"}):m.jsx(O9,{className:"h-5 w-5"})})]}),m.jsx("div",{className:"mt-2",children:m.jsx(p$,{password:r})})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(Zj,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"confirm-password",type:o?"text":"password",value:a,onChange:_=>s(_.target.value),className:`w-full pl-10 px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors ${a&&r!==a?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Confirm new password",required:!0})]}),a&&r!==a&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Passwords do not match"})]}),m.jsx(g$,{password:r}),v&&m.jsx("div",{className:"p-3 rounded-md bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm",children:v}),m.jsx("button",{type:"submit",disabled:g||!r||!a||r!==a||!x.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:g?"Updating Password...":"Reset Password"}),m.jsx("div",{className:"text-center",children:m.jsxs("button",{type:"button",onClick:n,className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium inline-flex items-center",children:[m.jsx(al,{className:"h-4 w-4 mr-1"}),"Back to Login"]})})]})})]})})},m$=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(!1),{currentUser:i,resendEmailVerification:a,checkVerificationStatus:s,logout:o,loginError:c}=Zt();A.useEffect(()=>{i||$.warn("EmailVerificationView: No current user, this should not happen")},[i]),A.useEffect(()=>{const h=()=>{$.log("Window focused, checking verification status..."),s()};return window.addEventListener("focus",h),()=>window.removeEventListener("focus",h)},[s]);const d=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},f=async()=>{await o()};return i?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:m.jsx(KA,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(zb,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),m.jsxs("div",{className:"text-left",children:[m.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),m.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[m.jsx("li",{children:"1. Open your email inbox"}),m.jsx("li",{children:"2. Find the email from House Budget"}),m.jsx("li",{children:'3. Click the "Verify Email" link'}),m.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&m.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&m.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),m.jsx("button",{onClick:d,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?m.jsxs(m.Fragment,{children:[m.jsx(rh,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):m.jsxs(m.Fragment,{children:[m.jsx(rh,{className:"h-4 w-4"}),"Resend verification email"]})}),m.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[m.jsx(al,{className:"h-4 w-4"}),"Back to sign in"]})]})}),m.jsx("div",{className:"text-center",children:m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},v$=({message:t="Loading your budget...",showTimeout:e=!1})=>m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[m.jsx("div",{className:"mb-8",children:m.jsxs("div",{className:"relative",children:[m.jsx(rh,{size:48,className:"text-blue-500 animate-spin"}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx(ih,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),m.jsxs("div",{className:"text-center space-y-3",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),m.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),m.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),m.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),m.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&m.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:m.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),m.jsx("div",{className:"mt-8 w-full max-w-md",children:m.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),bN=A.createContext({});function V1(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const xN=typeof window<"u",wN=xN?A.useLayoutEffect:A.useEffect,B1=A.createContext(null);function SN(t,e){t.indexOf(e)===-1&&t.push(e)}function _N(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ll=(t,e,n)=>n>e?e:n<t?t:n;let EN=()=>{};const cl={},y$=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function b$(t){return typeof t=="object"&&t!==null}const x$=t=>/^0[^.\s]+$/u.test(t);function TN(t){let e;return()=>(e===void 0&&(e=t()),e)}const Da=t=>t,Hle=(t,e)=>n=>e(t(n)),ev=(...t)=>t.reduce(Hle),am=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class AN{constructor(){this.subscriptions=[]}add(e){return SN(this.subscriptions,e),()=>_N(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const io=t=>t*1e3,Oa=t=>t/1e3;function w$(t,e){return e?t*(1e3/e):0}const S$=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Wle=1e-7,Yle=12;function Kle(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=S$(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>Wle&&++o<Yle);return s}function tv(t,e,n,r){if(t===e&&n===r)return Da;const i=a=>Kle(a,0,1,t,n);return a=>a===0||a===1?a:S$(i(a),e,r)}const _$=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,E$=t=>e=>1-t(1-e),T$=tv(.33,1.53,.69,.99),kN=E$(T$),A$=_$(kN),k$=t=>(t*=2)<1?.5*kN(t):.5*(2-Math.pow(2,-10*(t-1))),CN=t=>1-Math.sin(Math.acos(t)),C$=E$(CN),N$=_$(CN),Xle=tv(.42,0,1,1),Qle=tv(0,0,.58,1),I$=tv(.42,0,.58,1),Zle=t=>Array.isArray(t)&&typeof t[0]!="number",O$=t=>Array.isArray(t)&&typeof t[0]=="number",Jle={linear:Da,easeIn:Xle,easeInOut:I$,easeOut:Qle,circIn:CN,circInOut:N$,circOut:C$,backIn:kN,backInOut:A$,backOut:T$,anticipate:k$},ece=t=>typeof t=="string",sz=t=>{if(O$(t)){EN(t.length===4);const[e,n,r,i]=t;return tv(e,n,r,i)}else if(ece(t))return Jle[t];return t},py=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function tce(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(f){s.has(f)&&(d.schedule(f),t()),f(o)}const d={schedule:(f,h=!1,g=!1)=>{const b=g&&i?n:r;return h&&s.add(f),b.has(f)||b.add(f),f},cancel:f=>{r.delete(f),s.delete(f)},process:f=>{if(o=f,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,a&&(a=!1,d.process(f))}};return d}const nce=40;function P$(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=py.reduce((N,D)=>(N[D]=tce(a),N),{}),{setup:o,read:c,resolveKeyframes:d,preUpdate:f,update:h,preRender:g,render:v,postRender:b}=s,x=()=>{const N=cl.useManualTiming?i.timestamp:performance.now();n=!1,cl.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(N-i.timestamp,nce),1)),i.timestamp=N,i.isProcessing=!0,o.process(i),c.process(i),d.process(i),f.process(i),h.process(i),g.process(i),v.process(i),b.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},w=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:py.reduce((N,D)=>{const P=s[D];return N[D]=(O,C=!1,I=!1)=>(n||w(),P.schedule(O,C,I)),N},{}),cancel:N=>{for(let D=0;D<py.length;D++)s[py[D]].cancel(N)},state:i,steps:s}}const{schedule:bn,cancel:Rc,state:Ur,steps:_E}=P$(typeof requestAnimationFrame<"u"?requestAnimationFrame:Da,!0);let gb;function rce(){gb=void 0}const ji={now:()=>(gb===void 0&&ji.set(Ur.isProcessing||cl.useManualTiming?Ur.timestamp:performance.now()),gb),set:t=>{gb=t,queueMicrotask(rce)}},D$=t=>e=>typeof e=="string"&&e.startsWith(t),NN=D$("--"),ice=D$("var(--"),IN=t=>ice(t)?ace.test(t.split("/*")[0].trim()):!1,ace=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Vh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},sm={...Vh,transform:t=>ll(0,1,t)},gy={...Vh,default:1},jg=t=>Math.round(t*1e5)/1e5,ON=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function sce(t){return t==null}const oce=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,PN=(t,e)=>n=>!!(typeof n=="string"&&oce.test(n)&&n.startsWith(t)||e&&!sce(n)&&Object.prototype.hasOwnProperty.call(n,e)),R$=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(ON);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},lce=t=>ll(0,255,t),EE={...Vh,transform:t=>Math.round(lce(t))},Lu={test:PN("rgb","red"),parse:R$("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+EE.transform(t)+", "+EE.transform(e)+", "+EE.transform(n)+", "+jg(sm.transform(r))+")"};function cce(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const gk={test:PN("#"),parse:cce,transform:Lu.transform},nv=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),sc=nv("deg"),ao=nv("%"),rt=nv("px"),uce=nv("vh"),dce=nv("vw"),oz={...ao,parse:t=>ao.parse(t)/100,transform:t=>ao.transform(t*100)},Pf={test:PN("hsl","hue"),parse:R$("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ao.transform(jg(e))+", "+ao.transform(jg(n))+", "+jg(sm.transform(r))+")"},tr={test:t=>Lu.test(t)||gk.test(t)||Pf.test(t),parse:t=>Lu.test(t)?Lu.parse(t):Pf.test(t)?Pf.parse(t):gk.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Lu.transform(t):Pf.transform(t),getAnimatableNone:t=>{const e=tr.parse(t);return e.alpha=0,tr.transform(e)}},fce=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function hce(t){return isNaN(t)&&typeof t=="string"&&(t.match(ON)?.length||0)+(t.match(fce)?.length||0)>0}const M$="number",j$="color",pce="var",gce="var(",lz="${}",mce=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function om(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(mce,c=>(tr.test(c)?(r.color.push(a),i.push(j$),n.push(tr.parse(c))):c.startsWith(gce)?(r.var.push(a),i.push(pce),n.push(c)):(r.number.push(a),i.push(M$),n.push(parseFloat(c))),++a,lz)).split(lz);return{values:n,split:o,indexes:r,types:i}}function z$(t){return om(t).values}function L$(t){const{split:e,types:n}=om(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===M$?a+=jg(i[s]):o===j$?a+=tr.transform(i[s]):a+=i[s]}return a}}const vce=t=>typeof t=="number"?0:tr.test(t)?tr.getAnimatableNone(t):t;function yce(t){const e=z$(t);return L$(t)(e.map(vce))}const Mc={test:hce,parse:z$,createTransformer:L$,getAnimatableNone:yce};function TE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function bce({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=TE(c,o,t+1/3),a=TE(c,o,t),s=TE(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Qb(t,e){return n=>n>0?e:t}const kn=(t,e,n)=>t+(e-t)*n,AE=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},xce=[gk,Lu,Pf],wce=t=>xce.find(e=>e.test(t));function cz(t){const e=wce(t);if(!e)return!1;let n=e.parse(t);return e===Pf&&(n=bce(n)),n}const uz=(t,e)=>{const n=cz(t),r=cz(e);if(!n||!r)return Qb(t,e);const i={...n};return a=>(i.red=AE(n.red,r.red,a),i.green=AE(n.green,r.green,a),i.blue=AE(n.blue,r.blue,a),i.alpha=kn(n.alpha,r.alpha,a),Lu.transform(i))},mk=new Set(["none","hidden"]);function Sce(t,e){return mk.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function _ce(t,e){return n=>kn(t,e,n)}function DN(t){return typeof t=="number"?_ce:typeof t=="string"?IN(t)?Qb:tr.test(t)?uz:Ace:Array.isArray(t)?V$:typeof t=="object"?tr.test(t)?uz:Ece:Qb}function V$(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>DN(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function Ece(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=DN(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function Tce(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const Ace=(t,e)=>{const n=Mc.createTransformer(e),r=om(t),i=om(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?mk.has(t)&&!i.values.length||mk.has(e)&&!r.values.length?Sce(t,e):ev(V$(Tce(r,i),i.values),n):Qb(t,e)};function B$(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?kn(t,e,n):DN(t)(t,e)}const kce=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>bn.update(e,n),stop:()=>Rc(e),now:()=>Ur.isProcessing?Ur.timestamp:ji.now()}},U$=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Zb=2e4;function RN(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Zb;)e+=n,r=t.next(e);return e>=Zb?1/0:e}function Cce(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(RN(r),Zb);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Oa(i)}}const Nce=5;function F$(t,e,n){const r=Math.max(e-Nce,0);return w$(n-t(r),e-r)}const Rn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},kE=.001;function Ice({duration:t=Rn.duration,bounce:e=Rn.bounce,velocity:n=Rn.velocity,mass:r=Rn.mass}){let i,a,s=1-e;s=ll(Rn.minDamping,Rn.maxDamping,s),t=ll(Rn.minDuration,Rn.maxDuration,Oa(t)),s<1?(i=d=>{const f=d*s,h=f*t,g=f-n,v=vk(d,s),b=Math.exp(-h);return kE-g/v*b},a=d=>{const h=d*s*t,g=h*n+n,v=Math.pow(s,2)*Math.pow(d,2)*t,b=Math.exp(-h),x=vk(Math.pow(d,2),s);return(-i(d)+kE>0?-1:1)*((g-v)*b)/x}):(i=d=>{const f=Math.exp(-d*t),h=(d-n)*t+1;return-kE+f*h},a=d=>{const f=Math.exp(-d*t),h=(n-d)*(t*t);return f*h});const o=5/t,c=Pce(i,a,o);if(t=io(t),isNaN(c))return{stiffness:Rn.stiffness,damping:Rn.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:s*2*Math.sqrt(r*d),duration:t}}}const Oce=12;function Pce(t,e,n){let r=n;for(let i=1;i<Oce;i++)r=r-t(r)/e(r);return r}function vk(t,e){return t*Math.sqrt(1-e*e)}const Dce=["duration","bounce"],Rce=["stiffness","damping","mass"];function dz(t,e){return e.some(n=>t[n]!==void 0)}function Mce(t){let e={velocity:Rn.velocity,stiffness:Rn.stiffness,damping:Rn.damping,mass:Rn.mass,isResolvedFromDuration:!1,...t};if(!dz(t,Rce)&&dz(t,Dce))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*ll(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Rn.mass,stiffness:i,damping:a}}else{const n=Ice(t);e={...e,...n,mass:Rn.mass},e.isResolvedFromDuration=!0}return e}function Jb(t=Rn.visualDuration,e=Rn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:d,mass:f,duration:h,velocity:g,isResolvedFromDuration:v}=Mce({...n,velocity:-Oa(n.velocity||0)}),b=g||0,x=d/(2*Math.sqrt(c*f)),w=s-a,_=Oa(Math.sqrt(c/f)),T=Math.abs(w)<5;r||(r=T?Rn.restSpeed.granular:Rn.restSpeed.default),i||(i=T?Rn.restDelta.granular:Rn.restDelta.default);let N;if(x<1){const P=vk(_,x);N=O=>{const C=Math.exp(-x*_*O);return s-C*((b+x*_*w)/P*Math.sin(P*O)+w*Math.cos(P*O))}}else if(x===1)N=P=>s-Math.exp(-_*P)*(w+(b+_*w)*P);else{const P=_*Math.sqrt(x*x-1);N=O=>{const C=Math.exp(-x*_*O),I=Math.min(P*O,300);return s-C*((b+x*_*w)*Math.sinh(I)+P*w*Math.cosh(I))/P}}const D={calculatedDuration:v&&h||null,next:P=>{const O=N(P);if(v)o.done=P>=h;else{let C=P===0?b:0;x<1&&(C=P===0?io(b):F$(N,P,O));const I=Math.abs(C)<=r,R=Math.abs(s-O)<=i;o.done=I&&R}return o.value=o.done?s:O,o},toString:()=>{const P=Math.min(RN(D),Zb),O=U$(C=>D.next(P*C).value,P,30);return P+"ms "+O},toTransition:()=>{}};return D}Jb.applyToOptions=t=>{const e=Cce(t,100,Jb);return t.ease=e.ease,t.duration=io(e.duration),t.type="keyframes",t};function yk({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:d=.5,restSpeed:f}){const h=t[0],g={done:!1,value:h},v=I=>o!==void 0&&I<o||c!==void 0&&I>c,b=I=>o===void 0?c:c===void 0||Math.abs(o-I)<Math.abs(c-I)?o:c;let x=n*e;const w=h+x,_=s===void 0?w:s(w);_!==w&&(x=_-h);const T=I=>-x*Math.exp(-I/r),N=I=>_+T(I),D=I=>{const R=T(I),j=N(I);g.done=Math.abs(R)<=d,g.value=g.done?_:j};let P,O;const C=I=>{v(g.value)&&(P=I,O=Jb({keyframes:[g.value,b(g.value)],velocity:F$(N,I,g.value),damping:i,stiffness:a,restDelta:d,restSpeed:f}))};return C(0),{calculatedDuration:null,next:I=>{let R=!1;return!O&&P===void 0&&(R=!0,D(I),C(I)),P!==void 0&&I>=P?O.next(I-P):(!R&&D(I),g)}}}function jce(t,e,n){const r=[],i=n||cl.mix||B$,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Da:e;o=ev(c,o)}r.push(o)}return r}function zce(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(EN(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=jce(e,r,i),c=o.length,d=f=>{if(s&&f<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const g=am(t[h],t[h+1],f);return o[h](g)};return n?f=>d(ll(t[0],t[a-1],f)):d}function Lce(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=am(0,e,r);t.push(kn(n,1,i))}}function Vce(t){const e=[0];return Lce(e,t.length-1),e}function Bce(t,e){return t.map(n=>n*e)}function Uce(t,e){return t.map(()=>e||I$).splice(0,t.length-1)}function zg({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Zle(r)?r.map(sz):sz(r),a={done:!1,value:e[0]},s=Bce(n&&n.length===e.length?n:Vce(e),t),o=zce(s,e,{ease:Array.isArray(i)?i:Uce(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const Fce=t=>t!==null;function MN(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(Fce),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const $ce={decay:yk,inertia:yk,tween:zg,keyframes:zg,spring:Jb};function $$(t){typeof t.type=="string"&&(t.type=$ce[t.type])}class jN{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const qce=t=>t/100;class zN extends jN{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==ji.now()&&this.tick(ji.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;$$(e);const{type:n=zg,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const c=n||zg;c!==zg&&typeof o[0]!="number"&&(this.mixKeyframes=ev(qce,B$(o[0],o[1])),o=[0,100]);const d=c({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-s})),d.calculatedDuration===null&&(d.calculatedDuration=RN(d));const{calculatedDuration:f}=d;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:f,repeat:h,repeatType:g,repeatDelay:v,type:b,onUpdate:x,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const _=this.currentTime-d*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?_<0:_>i;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let N=this.currentTime,D=r;if(h){const I=Math.min(this.currentTime,i)/o;let R=Math.floor(I),j=I%1;!j&&I>=1&&(j=1),j===1&&R--,R=Math.min(R,h+1),!!(R%2)&&(g==="reverse"?(j=1-j,v&&(j-=v/o)):g==="mirror"&&(D=s)),N=ll(0,1,j)*o}const P=T?{done:!1,value:f[0]}:D.next(N);a&&(P.value=a(P.value));let{done:O}=P;!T&&c!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return C&&b!==yk&&(P.value=MN(f,this.options,w,this.speed)),x&&x(P.value),C&&this.finish(),P}then(e,n){return this.finished.then(e,n)}get duration(){return Oa(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Oa(e)}get time(){return Oa(this.currentTime)}set time(e){e=io(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ji.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Oa(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=kce,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ji.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Gce(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Vu=t=>t*180/Math.PI,bk=t=>{const e=Vu(Math.atan2(t[1],t[0]));return xk(e)},Hce={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:bk,rotateZ:bk,skewX:t=>Vu(Math.atan(t[1])),skewY:t=>Vu(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},xk=t=>(t=t%360,t<0&&(t+=360),t),fz=bk,hz=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),pz=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Wce={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:hz,scaleY:pz,scale:t=>(hz(t)+pz(t))/2,rotateX:t=>xk(Vu(Math.atan2(t[6],t[5]))),rotateY:t=>xk(Vu(Math.atan2(-t[2],t[0]))),rotateZ:fz,rotate:fz,skewX:t=>Vu(Math.atan(t[4])),skewY:t=>Vu(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function wk(t){return t.includes("scale")?1:0}function Sk(t,e){if(!t||t==="none")return wk(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Wce,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Hce,i=o}if(!i)return wk(e);const a=r[e],s=i[1].split(",").map(Kce);return typeof a=="function"?a(s):s[a]}const Yce=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Sk(n,e)};function Kce(t){return parseFloat(t.trim())}const Bh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Uh=new Set(Bh),gz=t=>t===Vh||t===rt,Xce=new Set(["x","y","z"]),Qce=Bh.filter(t=>!Xce.has(t));function Zce(t){const e=[];return Qce.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Yu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Sk(e,"x"),y:(t,{transform:e})=>Sk(e,"y")};Yu.translateX=Yu.x;Yu.translateY=Yu.y;const Ku=new Set;let _k=!1,Ek=!1,Tk=!1;function q$(){if(Ek){const t=Array.from(Ku).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Zce(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ek=!1,_k=!1,Ku.forEach(t=>t.complete(Tk)),Ku.clear()}function G$(){Ku.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ek=!0)})}function Jce(){Tk=!0,G$(),q$(),Tk=!1}class LN{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Ku.add(this),_k||(_k=!0,bn.read(G$),bn.resolveKeyframes(q$))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}Gce(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ku.delete(this)}cancel(){this.state==="scheduled"&&(Ku.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const eue=t=>t.startsWith("--");function tue(t,e,n){eue(e)?t.style.setProperty(e,n):t.style[e]=n}const nue=TN(()=>window.ScrollTimeline!==void 0),rue={};function iue(t,e){const n=TN(t);return()=>rue[e]??n()}const H$=iue(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_g=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,mz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_g([0,.65,.55,1]),circOut:_g([.55,0,1,.45]),backIn:_g([.31,.01,.66,-.59]),backOut:_g([.33,1.53,.69,.99])};function W$(t,e){if(t)return typeof t=="function"?H$()?U$(t,e):"ease-out":O$(t)?_g(t):Array.isArray(t)?t.map(n=>W$(n,e)||mz.easeOut):mz[t]}function aue(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:c}={},d=void 0){const f={[e]:n};c&&(f.offset=c);const h=W$(o,i);Array.isArray(h)&&(f.easing=h);const g={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return d&&(g.pseudoElement=d),t.animate(f,g)}function Y$(t){return typeof t=="function"&&"applyToOptions"in t}function sue({type:t,...e}){return Y$(t)&&H$()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class oue extends jN{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,EN(typeof e.type!="string");const d=sue(e);this.animation=aue(n,r,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=MN(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):tue(n,r,f),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Oa(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Oa(e)}get time(){return Oa(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=io(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&nue()?(this.animation.timeline=e,Da):n(this)}}const K$={anticipate:k$,backInOut:A$,circInOut:N$};function lue(t){return t in K$}function cue(t){typeof t.ease=="string"&&lue(t.ease)&&(t.ease=K$[t.ease])}const vz=10;class uue extends oue{constructor(e){cue(e),$$(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new zN({...s,autoplay:!1}),c=io(this.finishedTime??this.time);n.setWithVelocity(o.sample(c-vz).value,o.sample(c).value,vz),o.stop()}}const yz=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Mc.test(t)||t==="0")&&!t.startsWith("url("));function due(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function fue(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=yz(i,e),o=yz(a,e);return!s||!o?!1:due(t)||(n==="spring"||Y$(n))&&r}function Ak(t){t.duration=0,t.type="keyframes"}const hue=new Set(["opacity","clipPath","filter","transform"]),pue=TN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function gue(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return pue()&&n&&hue.has(n)&&(n!=="transform"||!d)&&!c&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const mue=40;class vue extends jN{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:c,motionValue:d,element:f,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ji.now();const g={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:d,element:f,...h},v=f?.KeyframeResolver||LN;this.keyframeResolver=new v(o,(b,x,w)=>this.onKeyframesResolved(b,x,g,!w),c,d,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:c,isHandoff:d,onUpdate:f}=r;this.resolvedAt=ji.now(),fue(e,a,s,o)||((cl.instantAnimations||!c)&&f?.(MN(e,r,n)),e[0]=e[e.length-1],Ak(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>mue?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!d&&gue(g)?new uue({...g,element:g.motionValue.owner.current}):new zN(g);v.finished.then(()=>this.notifyFinished()).catch(Da),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Jce()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const yue=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bue(t){const e=yue.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function X$(t,e,n=1){const[r,i]=bue(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return y$(s)?parseFloat(s):s}return IN(i)?X$(i,e,n+1):i}function VN(t,e){return t?.[e]??t?.default??t}const Q$=new Set(["width","height","top","left","right","bottom",...Bh]),xue={test:t=>t==="auto",parse:t=>t},Z$=t=>e=>e.test(t),J$=[Vh,rt,ao,sc,dce,uce,xue],bz=t=>J$.find(Z$(t));function wue(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||x$(t):!0}const Sue=new Set(["brightness","contrast","saturate","opacity"]);function _ue(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ON)||[];if(!r)return t;const i=n.replace(r,"");let a=Sue.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const Eue=/\b([a-z-]*)\(.*?\)/gu,kk={...Mc,getAnimatableNone:t=>{const e=t.match(Eue);return e?e.map(_ue).join(" "):t}},xz={...Vh,transform:Math.round},Tue={rotate:sc,rotateX:sc,rotateY:sc,rotateZ:sc,scale:gy,scaleX:gy,scaleY:gy,scaleZ:gy,skew:sc,skewX:sc,skewY:sc,distance:rt,translateX:rt,translateY:rt,translateZ:rt,x:rt,y:rt,z:rt,perspective:rt,transformPerspective:rt,opacity:sm,originX:oz,originY:oz,originZ:rt},BN={borderWidth:rt,borderTopWidth:rt,borderRightWidth:rt,borderBottomWidth:rt,borderLeftWidth:rt,borderRadius:rt,radius:rt,borderTopLeftRadius:rt,borderTopRightRadius:rt,borderBottomRightRadius:rt,borderBottomLeftRadius:rt,width:rt,maxWidth:rt,height:rt,maxHeight:rt,top:rt,right:rt,bottom:rt,left:rt,padding:rt,paddingTop:rt,paddingRight:rt,paddingBottom:rt,paddingLeft:rt,margin:rt,marginTop:rt,marginRight:rt,marginBottom:rt,marginLeft:rt,backgroundPositionX:rt,backgroundPositionY:rt,...Tue,zIndex:xz,fillOpacity:sm,strokeOpacity:sm,numOctaves:xz},Aue={...BN,color:tr,backgroundColor:tr,outlineColor:tr,fill:tr,stroke:tr,borderColor:tr,borderTopColor:tr,borderRightColor:tr,borderBottomColor:tr,borderLeftColor:tr,filter:kk,WebkitFilter:kk},e8=t=>Aue[t];function t8(t,e){let n=e8(t);return n!==kk&&(n=Mc),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const kue=new Set(["auto","none","0"]);function Cue(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!kue.has(a)&&om(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=t8(n,i)}class Nue extends LN{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),IN(d))){const f=X$(d,n.current);f!==void 0&&(e[c]=f),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Q$.has(r)||e.length!==2)return;const[i,a]=e,s=bz(i),o=bz(a);if(s!==o)if(gz(s)&&gz(o))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else Yu[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||wue(e[i]))&&r.push(i);r.length&&Cue(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=Yu[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{e.getValue(o).set(c)}),this.resolveNoneKeyframes()}}function Iue(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const n8=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function r8(t){return b$(t)&&"offsetHeight"in t}const wz=30,Oue=t=>!isNaN(parseFloat(t));class Pue{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=ji.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ji.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Oue(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new AN);const r=this.events[e].add(n);return e==="change"?()=>{r(),bn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ji.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>wz)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,wz);return w$(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fh(t,e){return new Pue(t,e)}const{schedule:UN}=P$(queueMicrotask,!1),is={x:!1,y:!1};function i8(){return is.x||is.y}function Due(t){return t==="x"||t==="y"?is[t]?null:(is[t]=!0,()=>{is[t]=!1}):is.x||is.y?null:(is.x=is.y=!0,()=>{is.x=is.y=!1})}function a8(t,e){const n=Iue(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Sz(t){return!(t.pointerType==="touch"||i8())}function Rue(t,e,n={}){const[r,i,a]=a8(t,n),s=o=>{if(!Sz(o))return;const{target:c}=o,d=e(c,o);if(typeof d!="function"||!c)return;const f=h=>{Sz(h)&&(d(h),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,i)};return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const s8=(t,e)=>e?t===e?!0:s8(t,e.parentElement):!1,FN=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Mue=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function jue(t){return Mue.has(t.tagName)||t.tabIndex!==-1}const mb=new WeakSet;function _z(t){return e=>{e.key==="Enter"&&t(e)}}function CE(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const zue=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=_z(()=>{if(mb.has(n))return;CE(n,"down");const i=_z(()=>{CE(n,"up")}),a=()=>CE(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Ez(t){return FN(t)&&!i8()}function Lue(t,e,n={}){const[r,i,a]=a8(t,n),s=o=>{const c=o.currentTarget;if(!Ez(o))return;mb.add(c);const d=e(c,o),f=(v,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),mb.has(c)&&mb.delete(c),Ez(v)&&typeof d=="function"&&d(v,{success:b})},h=v=>{f(v,c===window||c===document||n.useGlobalTarget||s8(c,v.target))},g=v=>{f(v,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),r8(o)&&(o.addEventListener("focus",d=>zue(d,i)),!jue(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function o8(t){return b$(t)&&"ownerSVGElement"in t}function Vue(t){return o8(t)&&t.tagName==="svg"}const ii=t=>!!(t&&t.getVelocity),Bue=[...J$,tr,Mc],Uue=t=>Bue.find(Z$(t)),$N=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Tz(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Fue(...t){return e=>{let n=!1;const r=t.map(i=>{const a=Tz(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():Tz(t[i],null)}}}}function $ue(...t){return A.useCallback(Fue(...t),t)}class que extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=r8(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Gue({children:t,isPresent:e,anchorX:n,root:r}){const i=A.useId(),a=A.useRef(null),s=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=A.useContext($N),c=$ue(a,t?.ref);return A.useInsertionEffect(()=>{const{width:d,height:f,top:h,left:g,right:v}=s.current;if(e||!a.current||!d||!f)return;const b=n==="left"?`left: ${g}`:`right: ${v}`;a.current.dataset.motionPopId=i;const x=document.createElement("style");o&&(x.nonce=o);const w=r??document.head;return w.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${b}px !important;
            top: ${h}px !important;
          }
        `),()=>{w.contains(x)&&w.removeChild(x)}},[e]),m.jsx(que,{isPresent:e,childRef:a,sizeRef:s,children:A.cloneElement(t,{ref:c})})}const Hue=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,root:c})=>{const d=V1(Wue),f=A.useId();let h=!0,g=A.useMemo(()=>(h=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:v=>{d.set(v,!0);for(const b of d.values())if(!b)return;r&&r()},register:v=>(d.set(v,!1),()=>d.delete(v))}),[n,d,r]);return a&&h&&(g={...g}),A.useMemo(()=>{d.forEach((v,b)=>d.set(b,!1))},[n]),A.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),s==="popLayout"&&(t=m.jsx(Gue,{isPresent:n,anchorX:o,root:c,children:t})),m.jsx(B1.Provider,{value:g,children:t})};function Wue(){return new Map}function l8(t=!0){const e=A.useContext(B1);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=A.useId();A.useEffect(()=>{if(t)return i(a)},[t]);const s=A.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const my=t=>t.key||"";function Az(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const lr=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",root:c})=>{const[d,f]=l8(s),h=A.useMemo(()=>Az(t),[t]),g=s&&!d?[]:h.map(my),v=A.useRef(!0),b=A.useRef(h),x=V1(()=>new Map),[w,_]=A.useState(h),[T,N]=A.useState(h);wN(()=>{v.current=!1,b.current=h;for(let O=0;O<T.length;O++){const C=my(T[O]);g.includes(C)?x.delete(C):x.get(C)!==!0&&x.set(C,!1)}},[T,g.length,g.join("-")]);const D=[];if(h!==w){let O=[...h];for(let C=0;C<T.length;C++){const I=T[C],R=my(I);g.includes(R)||(O.splice(C,0,I),D.push(I))}return a==="wait"&&D.length&&(O=D),N(Az(O)),_(h),null}const{forceRender:P}=A.useContext(bN);return m.jsx(m.Fragment,{children:T.map(O=>{const C=my(O),I=s&&!d?!1:h===T||g.includes(C),R=()=>{if(x.has(C))x.set(C,!0);else return;let j=!0;x.forEach(L=>{L||(j=!1)}),j&&(P?.(),N(b.current),s&&f?.(),r&&r())};return m.jsx(Hue,{isPresent:I,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:c,onExitComplete:I?void 0:R,anchorX:o,children:O},C)})})},c8=A.createContext({strict:!1}),kz={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},hh={};for(const t in kz)hh[t]={isEnabled:e=>kz[t].some(n=>!!e[n])};function Yue(t){for(const e in t)hh[e]={...hh[e],...t[e]}}const Kue=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ex(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Kue.has(t)}let u8=t=>!ex(t);function Xue(t){typeof t=="function"&&(u8=e=>e.startsWith("on")?!ex(e):t(e))}try{Xue(require("@emotion/is-prop-valid").default)}catch{}function Que(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(u8(i)||n===!0&&ex(i)||!e&&!ex(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const U1=A.createContext({});function F1(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function lm(t){return typeof t=="string"||Array.isArray(t)}const qN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],GN=["initial",...qN];function $1(t){return F1(t.animate)||GN.some(e=>lm(t[e]))}function d8(t){return!!($1(t)||t.variants)}function Zue(t,e){if($1(t)){const{initial:n,animate:r}=t;return{initial:n===!1||lm(n)?n:void 0,animate:lm(r)?r:void 0}}return t.inherit!==!1?e:{}}function Jue(t){const{initial:e,animate:n}=Zue(t,A.useContext(U1));return A.useMemo(()=>({initial:e,animate:n}),[Cz(e),Cz(n)])}function Cz(t){return Array.isArray(t)?t.join(" "):t}const cm={};function ede(t){for(const e in t)cm[e]=t[e],NN(e)&&(cm[e].isCSSVariable=!0)}function f8(t,{layout:e,layoutId:n}){return Uh.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!cm[t]||t==="opacity")}const tde={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nde=Bh.length;function rde(t,e,n){let r="",i=!0;for(let a=0;a<nde;a++){const s=Bh[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(s.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const d=n8(o,BN[s]);if(!c){i=!1;const f=tde[s]||s;r+=`${f}(${d}) `}n&&(e[s]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function HN(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const d=e[c];if(Uh.has(c)){s=!0;continue}else if(NN(c)){i[c]=d;continue}else{const f=n8(d,BN[c]);c.startsWith("origin")?(o=!0,a[c]=f):r[c]=f}}if(e.transform||(s||n?r.transform=rde(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:d="50%",originZ:f=0}=a;r.transformOrigin=`${c} ${d} ${f}`}}const WN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function h8(t,e,n){for(const r in e)!ii(e[r])&&!f8(r,n)&&(t[r]=e[r])}function ide({transformTemplate:t},e){return A.useMemo(()=>{const n=WN();return HN(n,e,t),Object.assign({},n.vars,n.style)},[e])}function ade(t,e){const n=t.style||{},r={};return h8(r,n,t),Object.assign(r,ide(t,e)),r}function sde(t,e){const n={},r=ade(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const ode={offset:"stroke-dashoffset",array:"stroke-dasharray"},lde={offset:"strokeDashoffset",array:"strokeDasharray"};function cde(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?ode:lde;t[a.offset]=rt.transform(-r);const s=rt.transform(e),o=rt.transform(n);t[a.array]=`${s} ${o}`}function p8(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},c,d,f){if(HN(t,o,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:g}=t;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=f?.transformBox??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&cde(h,i,a,s,!1)}const g8=()=>({...WN(),attrs:{}}),m8=t=>typeof t=="string"&&t.toLowerCase()==="svg";function ude(t,e,n,r){const i=A.useMemo(()=>{const a=g8();return p8(a,e,m8(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};h8(a,t.style,t),i.style={...a,...i.style}}return i}const dde=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function YN(t){return typeof t!="string"||t.includes("-")?!1:!!(dde.indexOf(t)>-1||/[A-Z]/u.test(t))}function fde(t,e,n,{latestValues:r},i,a=!1){const o=(YN(t)?ude:sde)(e,r,i,t),c=Que(e,typeof t=="string",a),d=t!==A.Fragment?{...c,...o,ref:n}:{},{children:f}=e,h=A.useMemo(()=>ii(f)?f.get():f,[f]);return A.createElement(t,{...d,children:h})}function Nz(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function KN(t,e,n,r){if(typeof e=="function"){const[i,a]=Nz(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=Nz(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function vb(t){return ii(t)?t.get():t}function hde({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:pde(n,r,i,t),renderState:e()}}function pde(t,e,n,r){const i={},a=r(t,{});for(const g in a)i[g]=vb(a[g]);let{initial:s,animate:o}=t;const c=$1(t),d=d8(t);e&&d&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||s===!1;const h=f?o:s;if(h&&typeof h!="boolean"&&!F1(h)){const g=Array.isArray(h)?h:[h];for(let v=0;v<g.length;v++){const b=KN(t,g[v]);if(b){const{transitionEnd:x,transition:w,..._}=b;for(const T in _){let N=_[T];if(Array.isArray(N)){const D=f?N.length-1:0;N=N[D]}N!==null&&(i[T]=N)}for(const T in x)i[T]=x[T]}}}return i}const v8=t=>(e,n)=>{const r=A.useContext(U1),i=A.useContext(B1),a=()=>hde(t,e,r,i);return n?a():V1(a)};function XN(t,e,n){const{style:r}=t,i={};for(const a in r)(ii(r[a])||e.style&&ii(e.style[a])||f8(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const gde=v8({scrapeMotionValuesFromProps:XN,createRenderState:WN});function y8(t,e,n){const r=XN(t,e,n);for(const i in t)if(ii(t[i])||ii(e[i])){const a=Bh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const mde=v8({scrapeMotionValuesFromProps:y8,createRenderState:g8}),vde=Symbol.for("motionComponentSymbol");function Df(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function yde(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Df(n)&&(n.current=r))},[e])}const QN=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),bde="framerAppearId",b8="data-"+QN(bde),x8=A.createContext({});function xde(t,e,n,r,i){const{visualElement:a}=A.useContext(U1),s=A.useContext(c8),o=A.useContext(B1),c=A.useContext($N).reducedMotion,d=A.useRef(null);r=r||s.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const f=d.current,h=A.useContext(x8);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&wde(d.current,n,i,h);const g=A.useRef(!1);A.useInsertionEffect(()=>{f&&g.current&&f.update(n,o)});const v=n[b8],b=A.useRef(!!v&&!window.MotionHandoffIsComplete?.(v)&&window.MotionHasOptimisedAnimation?.(v));return wN(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),A.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(v)}),b.current=!1),f.enteringChildren=void 0)}),f}function wde(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:d,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:w8(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Df(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:d})}function w8(t){if(t)return t.options.allowProjection!==!1?t.projection:w8(t.parent)}function NE(t,{forwardMotionProps:e=!1}={},n,r){n&&Yue(n);const i=YN(t)?mde:gde;function a(o,c){let d;const f={...A.useContext($N),...o,layoutId:Sde(o)},{isStatic:h}=f,g=Jue(o),v=i(o,h);if(!h&&xN){_de();const b=Ede(f);d=b.MeasureLayout,g.visualElement=xde(t,v,f,r,b.ProjectionNode)}return m.jsxs(U1.Provider,{value:g,children:[d&&g.visualElement?m.jsx(d,{visualElement:g.visualElement,...f}):null,fde(t,o,yde(v,g.visualElement,c),v,h,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const s=A.forwardRef(a);return s[vde]=t,s}function Sde({layoutId:t}){const e=A.useContext(bN).id;return e&&t!==void 0?e+"-"+t:t}function _de(t,e){A.useContext(c8).strict}function Ede(t){const{drag:e,layout:n}=hh;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Tde(t,e){if(typeof Proxy>"u")return NE;const n=new Map,r=(a,s)=>NE(a,s,t,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(n.has(s)||n.set(s,NE(s,void 0,t,e)),n.get(s))})}function S8({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Ade({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function kde(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function IE(t){return t===void 0||t===1}function Ck({scale:t,scaleX:e,scaleY:n}){return!IE(t)||!IE(e)||!IE(n)}function ku(t){return Ck(t)||_8(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function _8(t){return Iz(t.x)||Iz(t.y)}function Iz(t){return t&&t!=="0%"}function tx(t,e,n){const r=t-n,i=e*r;return n+i}function Oz(t,e,n,r,i){return i!==void 0&&(t=tx(t,i,r)),tx(t,n,r)+e}function Nk(t,e=0,n=1,r,i){t.min=Oz(t.min,e,n,r,i),t.max=Oz(t.max,e,n,r,i)}function E8(t,{x:e,y:n}){Nk(t.x,e.translate,e.scale,e.originPoint),Nk(t.y,n.translate,n.scale,n.originPoint)}const Pz=.999999999999,Dz=1.0000000000001;function Cde(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Mf(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,E8(t,s)),r&&ku(a.latestValues)&&Mf(t,a.latestValues))}e.x<Dz&&e.x>Pz&&(e.x=1),e.y<Dz&&e.y>Pz&&(e.y=1)}function Rf(t,e){t.min=t.min+e,t.max=t.max+e}function Rz(t,e,n,r,i=.5){const a=kn(t.min,t.max,i);Nk(t,e,n,a,r)}function Mf(t,e){Rz(t.x,e.x,e.scaleX,e.scale,e.originX),Rz(t.y,e.y,e.scaleY,e.scale,e.originY)}function T8(t,e){return S8(kde(t.getBoundingClientRect(),e))}function Nde(t,e,n){const r=T8(t,n),{scroll:i}=e;return i&&(Rf(r.x,i.offset.x),Rf(r.y,i.offset.y)),r}const Mz=()=>({translate:0,scale:1,origin:0,originPoint:0}),jf=()=>({x:Mz(),y:Mz()}),jz=()=>({min:0,max:0}),$n=()=>({x:jz(),y:jz()}),Ik={current:null},A8={current:!1};function Ide(){if(A8.current=!0,!!xN)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ik.current=t.matches;t.addEventListener("change",e),e()}else Ik.current=!1}const Ode=new WeakMap;function Pde(t,e,n){for(const r in e){const i=e[r],a=n[r];if(ii(i))t.addValue(r,i);else if(ii(a))t.addValue(r,fh(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,fh(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const zz=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Dde{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=LN,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=ji.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,bn.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=$1(n),this.isVariantNode=d8(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in h){const v=h[g];c[g]!==void 0&&ii(v)&&v.set(c[g])}}mount(e){this.current=e,Ode.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),A8.current||Ide(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ik.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Rc(this.notifyUpdate),Rc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Uh.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&bn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in hh){const n=hh[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$n()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<zz.length;r++){const i=zz[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Pde(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=fh(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(y$(r)||x$(r))?r=parseFloat(r):!Uue(r)&&Mc.test(n)&&(r=t8(e,n)),this.setBaseTarget(e,ii(r)?r.get():r)),ii(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=KN(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ii(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new AN),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){UN.render(this.render)}}class k8 extends Dde{constructor(){super(...arguments),this.KeyframeResolver=Nue}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ii(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function C8(t,{style:e,vars:n},r,i){const a=t.style;let s;for(s in e)a[s]=e[s];i?.applyProjectionStyles(a,r);for(s in n)a.setProperty(s,n[s])}function Rde(t){return window.getComputedStyle(t)}class Mde extends k8{constructor(){super(...arguments),this.type="html",this.renderInstance=C8}readValueFromInstance(e,n){if(Uh.has(n))return this.projection?.isProjecting?wk(n):Yce(e,n);{const r=Rde(e),i=(NN(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return T8(e,n)}build(e,n,r){HN(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return XN(e,n,r)}}const N8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function jde(t,e,n,r){C8(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(N8.has(i)?i:QN(i),e.attrs[i])}class zde extends k8{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$n}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Uh.has(n)){const r=e8(n);return r&&r.default||0}return n=N8.has(n)?n:QN(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return y8(e,n,r)}build(e,n,r){p8(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){jde(e,n,r,i)}mount(e){this.isSVGTag=m8(e.tagName),super.mount(e)}}const Lde=(t,e)=>YN(t)?new zde(e):new Mde(e,{allowProjection:t!==A.Fragment});function Kf(t,e,n){const r=t.getProps();return KN(r,e,n!==void 0?n:r.custom,t)}const Ok=t=>Array.isArray(t);function Vde(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,fh(n))}function Bde(t){return Ok(t)?t[t.length-1]||0:t}function ZN(t,e){const n=Kf(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=Bde(a[s]);Vde(t,s,o)}}function Ude(t){return!!(ii(t)&&t.add)}function Pk(t,e){const n=t.getValue("willChange");if(Ude(n))return n.add(e);if(!n&&cl.WillChange){const r=new cl.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function I8(t){return t.props[b8]}const Fde=t=>t!==null;function $de(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Fde),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const qde={type:"spring",stiffness:500,damping:25,restSpeed:10},Gde=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Hde={type:"keyframes",duration:.8},Wde={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Yde=(t,{keyframes:e})=>e.length>2?Hde:Uh.has(t)?t.startsWith("scale")?Gde(e[1]):qde:Wde;function Kde({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:d,...f}){return!!Object.keys(f).length}const JN=(t,e,n,r={},i,a)=>s=>{const o=VN(r,t)||{},c=o.delay||r.delay||0;let{elapsed:d=0}=r;d=d-io(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-d,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};Kde(o)||Object.assign(f,Yde(t,f)),f.duration&&(f.duration=io(f.duration)),f.repeatDelay&&(f.repeatDelay=io(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(Ak(f),f.delay===0&&(h=!0)),(cl.instantAnimations||cl.skipAnimations)&&(h=!0,Ak(f),f.delay=0),f.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const g=$de(f.keyframes,o);if(g!==void 0){bn.update(()=>{f.onUpdate(g),f.onComplete()});return}}return o.isSync?new zN(f):new vue(f)};function Xde({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function O8(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=e;r&&(a=r);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const f in o){const h=t.getValue(f,t.latestValues[f]??null),g=o[f];if(g===void 0||d&&Xde(d,f))continue;const v={delay:n,...VN(a||{},f)},b=h.get();if(b!==void 0&&!h.isAnimating&&!Array.isArray(g)&&g===b&&!v.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const _=I8(t);if(_){const T=window.MotionHandoffAnimation(_,f,bn);T!==null&&(v.startTime=T,x=!0)}}Pk(t,f),h.start(JN(f,h,g,t.shouldReduceMotion&&Q$.has(f)?{type:!1}:v,t,x));const w=h.animation;w&&c.push(w)}return s&&Promise.all(c).then(()=>{bn.update(()=>{s&&ZN(t,s)})}),c}function P8(t,e,n,r=0,i=1){const a=Array.from(t).sort((d,f)=>d.sortNodePosition(f)).indexOf(e),s=t.size,o=(s-1)*r;return typeof n=="function"?n(a,s):i===1?a*r:o-a*r}function Dk(t,e,n={}){const r=Kf(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(O8(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:h}=i;return Qde(t,e,c,d,f,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,d]=o==="beforeChildren"?[a,s]:[s,a];return c().then(()=>d())}else return Promise.all([a(),s(n.delay)])}function Qde(t,e,n=0,r=0,i=0,a=1,s){const o=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),o.push(Dk(c,e,{...s,delay:n+(typeof r=="function"?0:r)+P8(t.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(o)}function D8(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Dk(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=Dk(t,e,n);else{const i=typeof e=="function"?Kf(t,e,n.custom):e;r=Promise.all(O8(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function R8(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Zde=GN.length;function M8(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?M8(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Zde;n++){const r=GN[n],i=t.props[r];(lm(i)||i===!1)&&(e[r]=i)}return e}const Jde=[...qN].reverse(),efe=qN.length;function tfe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>D8(t,n,r)))}function nfe(t){let e=tfe(t),n=Lz(),r=!0;const i=c=>(d,f)=>{const h=Kf(t,f,c==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:g,transitionEnd:v,...b}=h;d={...d,...b,...v}}return d};function a(c){e=c(t)}function s(c){const{props:d}=t,f=M8(t.parent)||{},h=[],g=new Set;let v={},b=1/0;for(let w=0;w<efe;w++){const _=Jde[w],T=n[_],N=d[_]!==void 0?d[_]:f[_],D=lm(N),P=_===c?T.isActive:null;P===!1&&(b=w);let O=N===f[_]&&N!==d[_]&&D;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),T.protectedKeys={...v},!T.isActive&&P===null||!N&&!T.prevProp||F1(N)||typeof N=="boolean")continue;const C=rfe(T.prevProp,N);let I=C||_===c&&T.isActive&&!O&&D||w>b&&D,R=!1;const j=Array.isArray(N)?N:[N];let L=j.reduce(i(_),{});P===!1&&(L={});const{prevResolvedValues:B={}}=T,z={...B,...L},Y=K=>{I=!0,g.has(K)&&(R=!0,g.delete(K)),T.needsAnimating[K]=!0;const X=t.getValue(K);X&&(X.liveStyle=!1)};for(const K in z){const X=L[K],ee=B[K];if(v.hasOwnProperty(K))continue;let J=!1;Ok(X)&&Ok(ee)?J=!R8(X,ee):J=X!==ee,J?X!=null?Y(K):g.add(K):X!==void 0&&g.has(K)?Y(K):T.protectedKeys[K]=!0}T.prevProp=N,T.prevResolvedValues=L,T.isActive&&(v={...v,...L}),r&&t.blockInitialAnimation&&(I=!1);const Z=O&&C;I&&(!Z||R)&&h.push(...j.map(K=>{const X={type:_};if(typeof K=="string"&&r&&!Z&&t.manuallyAnimateOnMount&&t.parent){const{parent:ee}=t,J=Kf(ee,K);if(ee.enteringChildren&&J){const{delayChildren:F}=J.transition||{};X.delay=P8(ee.enteringChildren,t,F)}}return{animation:K,options:X}}))}if(g.size){const w={};if(typeof d.initial!="boolean"){const _=Kf(t,Array.isArray(d.initial)?d.initial[0]:d.initial);_&&_.transition&&(w.transition=_.transition)}g.forEach(_=>{const T=t.getBaseTarget(_),N=t.getValue(_);N&&(N.liveStyle=!0),w[_]=T??null}),h.push({animation:w})}let x=!!h.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function o(c,d){if(n[c].isActive===d)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(c,d)),n[c].isActive=d;const f=s(c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Lz()}}}function rfe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!R8(e,t):!1}function _u(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Lz(){return{animate:_u(!0),whileInView:_u(),whileHover:_u(),whileTap:_u(),whileDrag:_u(),whileFocus:_u(),exit:_u()}}class Gc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class ife extends Gc{constructor(e){super(e),e.animationState||(e.animationState=nfe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();F1(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let afe=0;class sfe extends Gc{constructor(){super(...arguments),this.id=afe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const ofe={animation:{Feature:ife},exit:{Feature:sfe}};function um(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function rv(t){return{point:{x:t.pageX,y:t.pageY}}}const lfe=t=>e=>FN(e)&&t(e,rv(e));function Lg(t,e,n,r){return um(t,e,lfe(n),r)}const j8=1e-4,cfe=1-j8,ufe=1+j8,z8=.01,dfe=0-z8,ffe=0+z8;function mi(t){return t.max-t.min}function hfe(t,e,n){return Math.abs(t-e)<=n}function Vz(t,e,n,r=.5){t.origin=r,t.originPoint=kn(e.min,e.max,t.origin),t.scale=mi(n)/mi(e),t.translate=kn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=cfe&&t.scale<=ufe||isNaN(t.scale))&&(t.scale=1),(t.translate>=dfe&&t.translate<=ffe||isNaN(t.translate))&&(t.translate=0)}function Vg(t,e,n,r){Vz(t.x,e.x,n.x,r?r.originX:void 0),Vz(t.y,e.y,n.y,r?r.originY:void 0)}function Bz(t,e,n){t.min=n.min+e.min,t.max=t.min+mi(e)}function pfe(t,e,n){Bz(t.x,e.x,n.x),Bz(t.y,e.y,n.y)}function Uz(t,e,n){t.min=e.min-n.min,t.max=t.min+mi(e)}function Bg(t,e,n){Uz(t.x,e.x,n.x),Uz(t.y,e.y,n.y)}function Na(t){return[t("x"),t("y")]}const L8=({current:t})=>t?t.ownerDocument.defaultView:null,Fz=(t,e)=>Math.abs(t-e);function gfe(t,e){const n=Fz(t.x,e.x),r=Fz(t.y,e.y);return Math.sqrt(n**2+r**2)}class V8{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=PE(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=gfe(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!b)return;const{point:x}=g,{timestamp:w}=Ur;this.history.push({...x,timestamp:w});const{onStart:_,onMove:T}=this.handlers;v||(_&&_(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=OE(v,this.transformPagePoint),bn.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:b,onSessionEnd:x,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=PE(g.type==="pointercancel"?this.lastMoveEventInfo:OE(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,_),x&&x(g,_)},!FN(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const o=rv(e),c=OE(o,this.transformPagePoint),{point:d}=c,{timestamp:f}=Ur;this.history=[{...d,timestamp:f}];const{onSessionStart:h}=n;h&&h(e,PE(c,this.history)),this.removeListeners=ev(Lg(this.contextWindow,"pointermove",this.handlePointerMove),Lg(this.contextWindow,"pointerup",this.handlePointerUp),Lg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Rc(this.updatePoint)}}function OE(t,e){return e?{point:e(t.point)}:t}function $z(t,e){return{x:t.x-e.x,y:t.y-e.y}}function PE({point:t},e){return{point:t,delta:$z(t,B8(e)),offset:$z(t,mfe(e)),velocity:vfe(e,.1)}}function mfe(t){return t[0]}function B8(t){return t[t.length-1]}function vfe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=B8(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>io(e)));)n--;if(!r)return{x:0,y:0};const a=Oa(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function yfe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?kn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?kn(n,t,r.max):Math.min(t,n)),t}function qz(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function bfe(t,{top:e,left:n,bottom:r,right:i}){return{x:qz(t.x,n,i),y:qz(t.y,e,r)}}function Gz(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function xfe(t,e){return{x:Gz(t.x,e.x),y:Gz(t.y,e.y)}}function wfe(t,e){let n=.5;const r=mi(t),i=mi(e);return i>r?n=am(e.min,e.max-r,t.min):r>i&&(n=am(t.min,t.max-i,e.min)),ll(0,1,n)}function Sfe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Rk=.35;function _fe(t=Rk){return t===!1?t=0:t===!0&&(t=Rk),{x:Hz(t,"left","right"),y:Hz(t,"top","bottom")}}function Hz(t,e,n){return{min:Wz(t,e),max:Wz(t,n)}}function Wz(t,e){return typeof t=="number"?t:t[e]||0}const Efe=new WeakMap;class Tfe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$n(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(rv(h).point)},s=(h,g)=>{const{drag:v,dragPropagation:b,onDragStart:x}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Due(v),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Na(_=>{let T=this.getAxisMotionValue(_).get()||0;if(ao.test(T)){const{projection:N}=this.visualElement;if(N&&N.layout){const D=N.layout.layoutBox[_];D&&(T=mi(D)*(parseFloat(T)/100))}}this.originPoint[_]=T}),x&&bn.postRender(()=>x(h,g)),Pk(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:x,onDrag:w}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:_}=g;if(b&&this.currentDirection===null){this.currentDirection=Afe(_),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,_),this.updateAxis("y",g.point,_),this.visualElement.render(),w&&w(h,g)},c=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Na(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new V8(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:L8(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&bn.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!vy(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=yfe(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Df(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=bfe(r.layoutBox,e):this.constraints=!1,this.elastic=_fe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Na(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Sfe(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Df(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=Nde(r,i.root,this.visualElement.getTransformPagePoint());let s=xfe(i.layout.layoutBox,a);if(n){const o=n(Ade(s));this.hasMutatedConstraints=!!o,o&&(s=S8(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},d=Na(f=>{if(!vy(f,n,this.currentDirection))return;let h=c&&c[f]||{};s&&(h={min:0,max:0});const g=i?200:1e6,v=i?40:1e7,b={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(f,b)});return Promise.all(d).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Pk(this.visualElement,e),r.start(JN(e,r,0,n,this.visualElement,!1))}stopAnimation(){Na(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Na(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Na(n=>{const{drag:r}=this.getProps();if(!vy(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-kn(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Df(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Na(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=wfe({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Na(s=>{if(!vy(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:d}=this.constraints[s];o.set(kn(c,d,i[s]))})}addListeners(){if(!this.visualElement.current)return;Efe.set(this.visualElement,this);const e=this.visualElement.current,n=Lg(e,"pointerdown",c=>{const{drag:d,dragListener:f=!0}=this.getProps();d&&f&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Df(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),bn.read(r);const s=um(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Na(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=c[f].translate,h.set(h.get()+c[f].translate))}),this.visualElement.render())}));return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=Rk,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function vy(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Afe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class kfe extends Gc{constructor(e){super(e),this.removeGroupControls=Da,this.removeListeners=Da,this.controls=new Tfe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Da}unmount(){this.removeGroupControls(),this.removeListeners()}}const Yz=t=>(e,n)=>{t&&bn.postRender(()=>t(e,n))};class Cfe extends Gc{constructor(){super(...arguments),this.removePointerDownListener=Da}onPointerDown(e){this.session=new V8(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:L8(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Yz(e),onStart:Yz(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&bn.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Lg(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Kz(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ig={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(rt.test(t))t=parseFloat(t);else return t;const n=Kz(t,e.target.x),r=Kz(t,e.target.y);return`${n}% ${r}%`}},Nfe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Mc.parse(t);if(i.length>5)return r;const a=Mc.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const d=kn(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=d),typeof i[3+s]=="number"&&(i[3+s]/=d),a(i)}};let DE=!1;class Ife extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;ede(Ofe),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),DE&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),yb.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,DE=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||bn.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),UN.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;DE=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function U8(t){const[e,n]=l8(),r=A.useContext(bN);return m.jsx(Ife,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(x8),isPresent:e,safeToRemove:n})}const Ofe={borderRadius:{...ig,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ig,borderTopRightRadius:ig,borderBottomLeftRadius:ig,borderBottomRightRadius:ig,boxShadow:Nfe};function Pfe(t,e,n){const r=ii(t)?t:fh(t);return r.start(JN("",r,e,n)),r.animation}const Dfe=(t,e)=>t.depth-e.depth;class Rfe{constructor(){this.children=[],this.isDirty=!1}add(e){SN(this.children,e),this.isDirty=!0}remove(e){_N(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Dfe),this.isDirty=!1,this.children.forEach(e)}}function Mfe(t,e){const n=ji.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Rc(r),t(a-e))};return bn.setup(r,!0),()=>Rc(r)}const F8=["TopLeft","TopRight","BottomLeft","BottomRight"],jfe=F8.length,Xz=t=>typeof t=="string"?parseFloat(t):t,Qz=t=>typeof t=="number"||rt.test(t);function zfe(t,e,n,r,i,a){i?(t.opacity=kn(0,n.opacity??1,Lfe(r)),t.opacityExit=kn(e.opacity??1,0,Vfe(r))):a&&(t.opacity=kn(e.opacity??1,n.opacity??1,r));for(let s=0;s<jfe;s++){const o=`border${F8[s]}Radius`;let c=Zz(e,o),d=Zz(n,o);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Qz(c)===Qz(d)?(t[o]=Math.max(kn(Xz(c),Xz(d),r),0),(ao.test(d)||ao.test(c))&&(t[o]+="%")):t[o]=d}(e.rotate||n.rotate)&&(t.rotate=kn(e.rotate||0,n.rotate||0,r))}function Zz(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Lfe=$8(0,.5,C$),Vfe=$8(.5,.95,Da);function $8(t,e,n){return r=>r<t?0:r>e?1:n(am(t,e,r))}function Jz(t,e){t.min=e.min,t.max=e.max}function Ea(t,e){Jz(t.x,e.x),Jz(t.y,e.y)}function e3(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function t3(t,e,n,r,i){return t-=e,t=tx(t,1/n,r),i!==void 0&&(t=tx(t,1/i,r)),t}function Bfe(t,e=0,n=1,r=.5,i,a=t,s=t){if(ao.test(e)&&(e=parseFloat(e),e=kn(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=kn(a.min,a.max,r);t===a&&(o-=e),t.min=t3(t.min,e,n,o,i),t.max=t3(t.max,e,n,o,i)}function n3(t,e,[n,r,i],a,s){Bfe(t,e[n],e[r],e[i],e.scale,a,s)}const Ufe=["x","scaleX","originX"],Ffe=["y","scaleY","originY"];function r3(t,e,n,r){n3(t.x,e,Ufe,n?n.x:void 0,r?r.x:void 0),n3(t.y,e,Ffe,n?n.y:void 0,r?r.y:void 0)}function i3(t){return t.translate===0&&t.scale===1}function q8(t){return i3(t.x)&&i3(t.y)}function a3(t,e){return t.min===e.min&&t.max===e.max}function $fe(t,e){return a3(t.x,e.x)&&a3(t.y,e.y)}function s3(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function G8(t,e){return s3(t.x,e.x)&&s3(t.y,e.y)}function o3(t){return mi(t.x)/mi(t.y)}function l3(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class qfe{constructor(){this.members=[]}add(e){SN(this.members,e),e.scheduleRender()}remove(e){if(_N(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Gfe(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=n?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:f,rotateX:h,rotateY:g,skewX:v,skewY:b}=n;d&&(r=`perspective(${d}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),g&&(r+=`rotateY(${g}deg) `),v&&(r+=`skewX(${v}deg) `),b&&(r+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const RE=["","X","Y","Z"],Hfe=1e3;let Wfe=0;function ME(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function H8(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=I8(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",bn,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&H8(r)}function W8({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e?.()){this.id=Wfe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Xfe),this.nodes.forEach(ehe),this.nodes.forEach(the),this.nodes.forEach(Qfe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Rfe)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new AN),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=o8(s)&&!Vue(s),this.instance=s;const{layoutId:o,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let f,h=0;const g=()=>this.root.updateBlockedByResize=!1;bn.read(()=>{h=window.innerWidth}),t(s,()=>{const v=window.innerWidth;v!==h&&(h=v,this.root.updateBlockedByResize=!0,f&&f(),f=Mfe(g,250),yb.hasAnimatedSinceResize&&(yb.hasAnimatedSinceResize=!1,this.nodes.forEach(d3)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&d&&(o||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||d.getDefaultTransition()||she,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=d.getProps(),_=!this.targetLayout||!G8(this.targetLayout,v),T=!h&&g;if(this.options.layoutRoot||this.resumeFrom||T||h&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...VN(b,"layout"),onPlay:x,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(f,T)}else h||d3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Rc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nhe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&H8(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(c3);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(u3);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Jfe),this.nodes.forEach(Yfe),this.nodes.forEach(Kfe)):this.nodes.forEach(u3),this.clearAllSnapshots();const o=ji.now();Ur.delta=ll(0,1e3/60,o-Ur.timestamp),Ur.timestamp=o,Ur.isProcessing=!0,_E.update.process(Ur),_E.preRender.process(Ur),_E.render.process(Ur),Ur.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,UN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Zfe),this.sharedNodes.forEach(rhe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!mi(this.snapshot.measuredBox.x)&&!mi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$n(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!q8(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;s&&this.instance&&(o||ku(this.latestValues)||f)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),ohe(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return $n();const o=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(lhe))){const{scroll:d}=this.root;d&&(Rf(o.x,d.offset.x),Rf(o.y,d.offset.y))}return o}removeElementScroll(s){const o=$n();if(Ea(o,s),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:f,options:h}=d;d!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Ea(o,s),Rf(o.x,f.offset.x),Rf(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const c=$n();Ea(c,s);for(let d=0;d<this.path.length;d++){const f=this.path[d];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Mf(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),ku(f.latestValues)&&Mf(c,f.latestValues)}return ku(this.latestValues)&&Mf(c,this.latestValues),c}removeTransform(s){const o=$n();Ea(o,s);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!ku(d.latestValues))continue;Ck(d.latestValues)&&d.updateSnapshot();const f=$n(),h=d.measurePageBox();Ea(f,h),r3(o,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return ku(this.latestValues)&&r3(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ur.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Ur.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$n(),this.relativeTargetOrigin=$n(),Bg(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Ea(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$n(),this.targetWithTransforms=$n()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pfe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ea(this.target,this.layout.layoutBox),E8(this.target,this.targetDelta)):Ea(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$n(),this.relativeTargetOrigin=$n(),Bg(this.relativeTargetOrigin,this.target,g.target),Ea(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ck(this.parent.latestValues)||_8(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),o=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ur.timestamp&&(c=!1),c)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Ea(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;Cde(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=$n());const{target:v}=s;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(e3(this.prevProjectionDelta.x,this.projectionDelta.x),e3(this.prevProjectionDelta.y,this.projectionDelta.y)),Vg(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!l3(this.projectionDelta.x,this.prevProjectionDelta.x)||!l3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=jf(),this.projectionDelta=jf(),this.projectionDeltaWithTransform=jf()}setAnimationOrigin(s,o=!1){const c=this.snapshot,d=c?c.latestValues:{},f={...this.latestValues},h=jf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=$n(),v=c?c.source:void 0,b=this.layout?this.layout.source:void 0,x=v!==b,w=this.getStack(),_=!w||w.members.length<=1,T=!!(x&&!_&&this.options.crossfade===!0&&!this.path.some(ahe));this.animationProgress=0;let N;this.mixTargetDelta=D=>{const P=D/1e3;f3(h.x,s.x,P),f3(h.y,s.y,P),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bg(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ihe(this.relativeTarget,this.relativeTargetOrigin,g,P),N&&$fe(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=$n()),Ea(N,this.relativeTarget)),x&&(this.animationValues=f,zfe(f,d,this.latestValues,P,T,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Rc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bn.update(()=>{yb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=fh(0)),this.currentAnimation=Pfe(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Hfe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:d,latestValues:f}=s;if(!(!o||!c||!d)){if(this!==s&&this.layout&&d&&Y8(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||$n();const h=mi(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const g=mi(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+g}Ea(o,c),Mf(o,f),Vg(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new qfe),this.sharedNodes.get(s).add(o);const d=o.options.initialPromotionConfig;o.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const d={};c.z&&ME("z",s,d,this.animationValues);for(let f=0;f<RE.length;f++)ME(`rotate${RE[f]}`,s,d,this.animationValues),ME(`skew${RE[f]}`,s,d,this.animationValues);s.render();for(const f in d)s.setStaticValue(f,d[f]),this.animationValues&&(this.animationValues[f]=d[f]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=vb(o?.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=vb(o?.pointerEvents)||""),this.hasProjected&&!ku(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const f=d.animationValues||d.latestValues;this.applyTransformsToTarget();let h=Gfe(this.projectionDeltaWithTransform,this.treeScale,f);c&&(h=c(f,h)),s.transform=h;const{x:g,y:v}=this.projectionDelta;s.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,d.animationValues?s.opacity=d===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in cm){if(f[b]===void 0)continue;const{correct:x,applyTo:w,isCSSVariable:_}=cm[b],T=h==="none"?f[b]:x(f[b],d);if(w){const N=w.length;for(let D=0;D<N;D++)s[w[D]]=T}else _?this.options.visualElement.renderState.vars[b]=T:s[b]=T}this.options.layoutId&&(s.pointerEvents=d===this?vb(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(c3),this.root.sharedNodes.clear()}}}function Yfe(t){t.updateLayout()}function Kfe(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?Na(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=mi(h);h.min=n[f].min,h.max=h.min+g}):Y8(i,e.layoutBox,n)&&Na(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=mi(n[f]);h.max=h.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const s=jf();Vg(s,n,e.layoutBox);const o=jf();a?Vg(o,t.applyTransform(r,!0),e.measuredBox):Vg(o,n,e.layoutBox);const c=!q8(s);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:g}=f;if(h&&g){const v=$n();Bg(v,e.layoutBox,h.layoutBox);const b=$n();Bg(b,n,g.layoutBox),G8(v,b)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:o,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Xfe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Qfe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Zfe(t){t.clearSnapshot()}function c3(t){t.clearMeasurements()}function u3(t){t.isLayoutDirty=!1}function Jfe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function d3(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ehe(t){t.resolveTargetDelta()}function the(t){t.calcProjection()}function nhe(t){t.resetSkewAndRotation()}function rhe(t){t.removeLeadSnapshot()}function f3(t,e,n){t.translate=kn(e.translate,0,n),t.scale=kn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function h3(t,e,n,r){t.min=kn(e.min,n.min,r),t.max=kn(e.max,n.max,r)}function ihe(t,e,n,r){h3(t.x,e.x,n.x,r),h3(t.y,e.y,n.y,r)}function ahe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const she={duration:.45,ease:[.4,0,.1,1]},p3=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),g3=p3("applewebkit/")&&!p3("chrome/")?Math.round:Da;function m3(t){t.min=g3(t.min),t.max=g3(t.max)}function ohe(t){m3(t.x),m3(t.y)}function Y8(t,e,n){return t==="position"||t==="preserve-aspect"&&!hfe(o3(e),o3(n),.2)}function lhe(t){return t!==t.root&&t.scroll?.wasRoot}const che=W8({attachResizeListener:(t,e)=>um(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),jE={current:void 0},K8=W8({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!jE.current){const t=new che({});t.mount(window),t.setOptions({layoutScroll:!0}),jE.current=t}return jE.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),uhe={pan:{Feature:Cfe},drag:{Feature:kfe,ProjectionNode:K8,MeasureLayout:U8}};function v3(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&bn.postRender(()=>a(e,rv(e)))}class dhe extends Gc{mount(){const{current:e}=this.node;e&&(this.unmount=Rue(e,(n,r)=>(v3(this.node,r,"Start"),i=>v3(this.node,i,"End"))))}unmount(){}}class fhe extends Gc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ev(um(this.node.current,"focus",()=>this.onFocus()),um(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function y3(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&bn.postRender(()=>a(e,rv(e)))}class hhe extends Gc{mount(){const{current:e}=this.node;e&&(this.unmount=Lue(e,(n,r)=>(y3(this.node,r,"Start"),(i,{success:a})=>y3(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Mk=new WeakMap,zE=new WeakMap,phe=t=>{const e=Mk.get(t.target);e&&e(t)},ghe=t=>{t.forEach(phe)};function mhe({root:t,...e}){const n=t||document;zE.has(n)||zE.set(n,{});const r=zE.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(ghe,{root:t,...e})),r[i]}function vhe(t,e,n){const r=mhe(e);return Mk.set(t,n),r.observe(t),()=>{Mk.delete(t),r.unobserve(t)}}const yhe={some:0,all:1};class bhe extends Gc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:yhe[i]},o=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),g=d?f:h;g&&g(c)};return vhe(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(xhe(e,n))&&this.startObserver()}unmount(){}}function xhe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const whe={inView:{Feature:bhe},tap:{Feature:hhe},focus:{Feature:fhe},hover:{Feature:dhe}},She={layout:{ProjectionNode:K8,MeasureLayout:U8}},_he={...ofe,...whe,...uhe,...She},gt=Tde(_he,Lde);function Ehe(t){t.values.forEach(e=>e.stop())}function jk(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&ZN(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{jk(a,e)})})}function The(t,e){if(Array.isArray(e))return jk(t,e);if(typeof e=="string")return jk(t,[e]);ZN(t,e)}function Ahe(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(D8(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{The(r,n)})},stop(){t.forEach(n=>{Ehe(n)})},mount(){return()=>{e.stop()}}};return e}function khe(){const t=V1(Ahe);return wN(t.mount,[]),t}const Che=khe,Hc=D2((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},2e3)},hideToast:()=>{t({isVisible:!1})}})),yy=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=Hc(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return m.jsx(lr,{children:n&&m.jsx(gt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-24 right-6 z-[110] max-w-xs",children:m.jsxs("div",{className:`rounded-lg shadow-lg p-3 flex items-center justify-between ${a()}`,children:[m.jsx("div",{className:"flex items-center flex-1 min-w-0",children:m.jsx("span",{className:"text-xs font-medium whitespace-pre-line pr-2",children:t})}),m.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r&&m.jsxs("button",{onClick:()=>{r(),i()},className:"px-2 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-bold transition-colors",children:[m.jsx(uae,{size:12,className:"inline mr-1"}),"Undo"]}),m.jsx("button",{onClick:i,className:"p-0.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:m.jsx($m,{size:14})})]})]})})})};class Zi extends A.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){$.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[m.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:m.jsx(Gu,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[m.jsx(rh,{className:"h-4 w-4"}),"Try Again"]}),m.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[m.jsx(Oie,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const Nhe=({onAddTransaction:t})=>{const e=$a(),n=Ss(),[r,i]=A.useState(!1),a=A.useRef(null),s=d=>n.pathname===d;A.useEffect(()=>{const d=f=>{a.current&&!a.current.contains(f.target)&&i(!1)};if(r)return document.addEventListener("mousedown",d),document.addEventListener("touchstart",d),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("touchstart",d)}},[r]);const o=[{path:"/reports",icon:m.jsx(jb,{className:"w-5 h-5"}),label:"Reports"},{path:"/analytics",icon:m.jsx(ju,{className:"w-5 h-5"}),label:"Analytics"},{path:"/budget-breakdown",icon:m.jsx(N9,{className:"w-5 h-5"}),label:"Budget Breakdown"}],c=({path:d,icon:f,label:h})=>{const g=s(d);return m.jsxs("button",{onClick:v=>{v.stopPropagation(),e(d)},className:`
          relative group flex flex-col items-center justify-center
          w-12 h-12 rounded-2xl transition-all duration-300
          ${g?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
        `,children:[m.jsx("div",{className:`transition-transform duration-300 ${g?"scale-110":"group-hover:scale-105"}`,children:f}),m.jsx("span",{className:"sr-only",children:h}),g&&m.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]})};return m.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center z-[100] pointer-events-none safe-area-inset-bottom",children:m.jsxs("nav",{className:`
          pointer-events-auto
          flex items-center gap-1 p-2 pl-4 pr-4
          bg-white/60 dark:bg-zinc-900/60 backdrop-blur-xl
          border border-zinc-200/30 dark:border-zinc-800/30
          rounded-full shadow-2xl shadow-zinc-900/10
          transform transition-all duration-500 ease-out
        `,onClick:d=>d.stopPropagation(),onTouchStart:d=>d.stopPropagation(),onTouchEnd:d=>d.stopPropagation(),children:[m.jsx(c,{path:"/",label:"Budget",icon:m.jsx(ih,{className:"w-6 h-6"})}),m.jsx(c,{path:"/transactions",label:"Transactions",icon:m.jsx(Rie,{className:"w-6 h-6"})}),m.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),m.jsx("button",{onClick:d=>{if(d.stopPropagation(),i(!1),t){t();return}e("/add-transaction")},className:`
            -mt-8 mb-2 mx-1
            group relative flex items-center justify-center
            w-16 h-16 rounded-full
            bg-blue-600 text-white
            shadow-xl shadow-blue-600/30
            hover:shadow-blue-600/50 hover:scale-105 hover:-translate-y-1
            active:scale-95 active:translate-y-0
            transition-all duration-300 cubic-bezier(0.175, 0.885, 0.32, 1.275)
          `,children:m.jsx(xd,{className:"w-8 h-8 transition-transform duration-300 group-hover:rotate-90"})}),m.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),m.jsxs("div",{className:"relative",ref:a,children:[m.jsxs("button",{onClick:d=>{d.stopPropagation(),i(!r)},className:`
              relative group flex flex-col items-center justify-center
              w-12 h-12 rounded-2xl transition-all duration-300
              ${r?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
            `,children:[m.jsx("div",{className:`transition-transform duration-300 ${r?"scale-110":"group-hover:scale-105"}`,children:m.jsx(xie,{className:"w-6 h-6"})}),m.jsx("span",{className:"sr-only",children:"More"}),r&&m.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]}),r&&m.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-56 bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-200/50 dark:border-zinc-800/50 backdrop-blur-xl z-50 overflow-hidden",onClick:d=>d.stopPropagation(),onTouchStart:d=>d.stopPropagation(),onTouchEnd:d=>d.stopPropagation(),children:m.jsx("div",{className:"p-2 space-y-1",children:o.map((d,f)=>m.jsxs("button",{onClick:h=>{h.stopPropagation(),e(d.path),i(!1)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[m.jsx("div",{className:"text-zinc-600 dark:text-zinc-400",children:d.icon}),m.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:d.label})]},f))})})]}),m.jsx(c,{path:"/settings",label:"Settings",icon:m.jsx(Zie,{className:"w-6 h-6"})})]})})};function Ihe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function Ohe(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function Qo(t,e){return function(n){n&&(t[e]=n)}}function X8(t,e,n){return function(r){r&&(t[e][n]=r)}}function b3(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function Phe(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var s,o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];var d=(s=this[r])[i].apply(s,o);return d===this[r]?this:d})})}}var Dhe="function",Rhe="object",Mhe="string",jhe="number",eI="undefined",Q8=typeof window!==eI,zhe=typeof document!==eI&&document,Lhe=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],ir=1e-7,by={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function Vhe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function nx(t,e,n,r){return(t*r+e*n)/(n+r)}function q1(t){return typeof t===eI}function vs(t){return t&&typeof t===Rhe}function cr(t){return Array.isArray(t)}function Vi(t){return typeof t===Mhe}function ph(t){return typeof t===jhe}function tI(t){return typeof t===Dhe}function Bhe(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function Z8(t,e,n,r,i){var a=nI(t,e,n);return a?n:Uhe(t,e,n+1,r,i)}function nI(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function Uhe(t,e,n,r,i){for(var a=function(d){var f=e[d].trim();if(f===t.close&&!nI(t,e,d))return{value:d};var h=d,g=Bi(i,function(v){var b=v.open;return b===f});if(g&&(h=Z8(g,e,d,r,i)),h===-1)return s=d,"break";d=h,s=d},s,o=n;o<r;++o){var c=a(o);if(o=s,typeof c=="object")return c.value;if(c==="break")break}return-1}function rI(t,e){var n=Vi(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,c=o===void 0?s:o,d=n.openCloseCharacters,f=d===void 0?Lhe:d,h=f.map(function(C){var I=C.open,R=C.close;return I===R?I:I+"|"+R}).join("|"),g="(\\s*"+i+"\\s*|"+h+"|\\s+)",v=new RegExp(g,"g"),b=t.split(v).filter(function(C){return C&&C!=="undefined"}),x=b.length,w=[],_=[];function T(){return _.length?(w.push(_.join("")),_=[],!0):!1}for(var N=function(C){var I=b[C].trim(),R=C,j=Bi(f,function(z){var Y=z.open;return Y===I}),L=Bi(f,function(z){var Y=z.close;return Y===I});if(j){if(R=Z8(j,b,C,x,f),R!==-1&&c)return T()&&a||(w.push(b.slice(C,R+1).join("")),C=R,a)?(D=C,"break"):(D=C,"continue")}else if(L&&!nI(L,b,C)){var B=Vhe(f);return B.splice(f.indexOf(L),1),{value:rI(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:c,openCloseCharacters:B})}}else if(Bhe(I,i)&&!s)return T(),a?(D=C,"break"):(D=C,"continue");R===-1&&(R=x-1),_.push(b.slice(C,R+1).join("")),C=R,D=C},D,P=0;P<x;++P){var O=N(P);if(P=D,typeof O=="object")return O.value;if(O==="break")break}return _.length&&w.push(_.join("")),w}function jc(t){return rI(t,"")}function Bu(t){return rI(t,",")}function J8(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function iv(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function Fhe(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function bb(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function dm(){return Date.now?Date.now():new Date().getTime()}function ul(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Bi(t,e,n){var r=ul(t,e);return r>-1?t[r]:n}var e7=(function(){var t=dm(),e=Q8&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=dm(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),$he=(function(){var t=Q8&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function dl(t){return Object.keys(t)}function qhe(t){var e=dl(t);return e.map(function(n){return t[n]})}function Xt(t,e){var n=iv(t),r=n.value,i=n.unit;if(vs(e)){var a=e[i];if(a){if(tI(a))return a(r);if(by[i])return by[i](r,a)}}else if(i==="%")return r*e/100;return by[i]?by[i](r):r}function zk(t,e,n){return Math.max(e,Math.min(t,n))}function x3(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[at(e[0],ir),at(e[0]/r,ir)],[at(e[1]*r,ir),at(e[1],ir)]].filter(function(i){return i.every(function(a,s){var o=e[s],c=at(o,ir);return n?a<=o||a<=c:a>=o||a>=c})})[0]||t}function t7(t,e,n,r){if(!r)return t.map(function(v,b){return zk(v,e[b],n[b])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=x3(t,e,!1,s),c=o[0],d=o[1],f=x3(t,n,!0,s),h=f[0],g=f[1];return i<c||a<d?(i=c,a=d):(i>h||a>g)&&(i=h,a=g),[i,a]}function Ghe(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function Lk(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Gn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Hhe(t){return[0,1].map(function(e){return Lk(t.map(function(n){return n[e]}))})}function w3(t){var e=Hhe(t),n=Gn(e,t[0]),r=Gn(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function Zo(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function at(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function S3(t,e){return t.forEach(function(n,r){t[r]=at(t[r],e)}),t}function Whe(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function n7(t){return t.reduce(function(e,n){return e.concat(n)},[])}function r7(t,e){t.indexOf(e)===-1&&t.push(e)}function gr(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function i7(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function a7(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Vr(t,e,n,r){t.addEventListener(e,n,r)}function fr(t,e,n,r){t.removeEventListener(e,n,r)}function Fh(t){return t?.ownerDocument||zhe}function iI(t){return Fh(t).documentElement}function Wc(t){return Fh(t).body}function _c(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function s7(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function $h(t){return vs(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var Yhe=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,s=i.indexOf(n),o=s===-1?i.length:s;i[o]=n,a[o]=r},t})(),Khe=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),Xhe=typeof Map=="function",Qhe=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function Zhe(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],s=i[1],o=new Qhe;n[a]=o,r[s]=o}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var s=i[0],o=i[1];if(s===o)return[0,0];var c=n[s],d=r[o-1],f=c.getIndex();c.disconnect(),d?c.connect(d,d.next):c.connect(void 0,n[0]);var h=c.getIndex();return[f,h]})}var Jhe=(function(){function t(n,r,i,a,s,o,c,d){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=c,this.fixed=d}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=Zhe(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,s){var o=a[0],c=a[1],d=r[s],f=d[0],h=d[1];if(o!==c)return i.push([f,h]),!0}),this.cachePureChanged=i},t})();function av(t,e,n){var r=Xhe?Map:n?Khe:Yhe,i=n||function(T){return T},a=[],s=[],o=[],c=t.map(i),d=e.map(i),f=new r,h=new r,g=[],v=[],b={},x=[],w=0,_=0;return c.forEach(function(T,N){f.set(T,N)}),d.forEach(function(T,N){h.set(T,N)}),c.forEach(function(T,N){var D=h.get(T);typeof D>"u"?(++_,s.push(N)):b[D]=_}),d.forEach(function(T,N){var D=f.get(T);typeof D>"u"?(a.push(N),++w):(o.push([D,N]),_=b[N]||0,g.push([D-_,N-w]),v.push(N===D),D!==N&&x.push([D,N]))}),s.reverse(),new Jhe(t,e,a,s,x,o,g,v)}var epe=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=av(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),Vk=function(t,e){return Vk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Vk(t,e)};function sv(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ks=function(){return Ks=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ks.apply(this,arguments)};function o7(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function _3(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function E3(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function l7(t){var e=[];return t.forEach(function(n){e=e.concat(cr(n)?l7(n):n)}),e}function LE(t,e){if(!e)return t;for(var n in e)q1(t[n])&&(t[n]=e[n]);return t}function rx(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function T3(t){var e=t.className,n=o7(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function A3(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function G1(t){if(!t)return null;var e=t.b;return $h(e)?e:G1(t.c)}function c7(t){var e=t.parentNode;e&&e.removeChild(t)}function u7(t){t.forEach(function(e){e()})}function tpe(){return this.constructor(this.props,this.context)}var aI=0,H1=(function(){function t(n,r,i,a,s,o,c){c===void 0&&(c={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=s,this.ref=o,this.ps=c,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,s){var o=this,c=o.d,d=qhe(r).filter(function(b){return b.$_req}),f=l7(d.map(function(b){return b.$_subs})),h=Bi(f,function(b){return b.d===c});if(o.b&&!Vi(i)&&!s&&!o.s(i.props,a)&&!h){var g=f.reduce(function(b,x){var w=x.d;return b[0]?b[0].d===w&&b.push(x):w>c&&b.push(x),b},[]);return g.forEach(function(b){ov(b,b._ps,[b.o],n,r,!0)}),!1}o.o=i,o.ss(a);var v=o.ps;return Vi(i)||(o.ps=i.props,o.ref=i.ref),sI(this),o.r(n,r,o.b?v:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function d7(){return Object.__CROACT_CURRENT_INSTNACE__}function npe(){return aI}function rpe(t){aI=t}function sI(t){return Object.__CROACT_CURRENT_INSTNACE__=t,aI=0,t}var oI=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=Ks(Ks({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,s=ov(a.c,[a],[a.o],i,a._cs,Ks(Ks({},this.state),this.$_state),r);s&&(n&&i.push(n),u7(i),sI(null))},t})(),f7=(function(t){sv(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return rx(this.props,r)||rx(this.state,i)},e})(oI);function h7(t){var e=function(n){e.current=n};return e.current=t,e}function ipe(t){return t._fr=!0,t}function ape(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new oI(e,n),a.constructor=t,t._fr?(r.fr=h7(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=tpe),a.$_p=r,a}var spe=(function(t){sv(e,t);function e(r,i,a,s,o,c,d){d===void 0&&(d={});var f=t.call(this,r,i,a,s,o,c,LE(d,r.defaultProps))||this;return f.typ="comp",f._usefs=[],f._uefs=[],f._defs=[],f}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(LE(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var s,o,c=this,d=c.t;c.ps=LE(c.ps,c.t.defaultProps);var f=c.ps,h=!c.b,g=d.contextType,v=c.b,b=g?.get(c);c._cs=i,h?(v=ape(d,f,b,c),c.b=v):(v.props=f,v.context=b);var x=v.state;c._usefs=[],c._uefs=[];var w=v.render();((o=(s=w?.props)===null||s===void 0?void 0:s.children)===null||o===void 0?void 0:o.length)===0&&(w.props.children=c.ps.children);var _=Ks(Ks({},i),v.$_cs);ov(c,c._ps,w?[w]:[],r,_),h?c._uefs.push(function(){g?.register(c),v.componentDidMount()}):c._uefs.push(function(){v.componentDidUpdate(a,x)}),r.push(function(){c._usefs.forEach(function(T){T()}),h?c.md():c.ud(),c._defs=c._uefs.map(function(T){return T()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(s){s.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(s){s&&s()}),i.b.componentWillUnmount()},e})(H1);function ope(t,e,n){var r=lI(T3(t),T3(e)),i=r.added,a=r.removed,s=r.changed;for(var o in i)n.setAttribute(o,i[o]);for(var c in s)n.setAttribute(c,s[c][1]);for(var d in a)n.removeAttribute(d)}function lpe(t,e,n){var r=lI(t,e),i=r.added,a=r.removed;for(var s in a)n.e(s,!0);for(var o in i)n.e(o)}function lI(t,e){var n=dl(t),r=dl(e),i=av(n,r,function(c){return c}),a={},s={},o={};return i.added.forEach(function(c){var d=r[c];a[d]=e[d]}),i.removed.forEach(function(c){var d=n[c];s[d]=t[d]}),i.maintained.forEach(function(c){var d=c[0],f=n[d],h=[t[f],e[f]];t[f]!==e[f]&&(o[f]=h)}),{added:a,removed:s,changed:o}}function cpe(t,e,n){var r=n.style,i=lI(t,e),a=i.added,s=i.removed,o=i.changed;for(var c in a){var d=bb(c,"-");r.setProperty(d,a[c])}for(var c in o){var f=bb(c,"-");r.setProperty(f,o[c][1])}for(var c in s){var h=bb(c,"-");r.removeProperty(h)}}function upe(t){return t.replace(/^on/g,"").toLowerCase()}var dpe=(function(t){sv(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,s=a._es,o=a.b,c=upe(r);i?(fr(o,c,s[r]),delete s[r]):(s[r]=function(d){var f,h;(h=(f=a.ps)[r])===null||h===void 0||h.call(f,d)},Vr(o,c,s[r]))},n.s=function(r){return rx(this.ps,r)},n.r=function(r,i,a){var s,o=this,c=!o.b,d=o.ps;if(c){var f=G1(o.c),h=!1;o._svg||o.t==="svg"?h=!0:h=f&&f.ownerSVGElement,o._svg=h;var g=(s=o._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],v=o.t;if(g)o._hyd=[].slice.call(g.children||[]);else{var b=Fh(f);h?g=b.createElementNS("http://www.w3.org/2000/svg",v):g=b.createElement(v)}o.b=g}ov(o,o._ps,d.children,r,i);var x=o.b,w=A3(a),_=w[0],T=w[1],N=A3(d),D=N[0],P=N[1];return ope(_,D,x),lpe(T,P,o),cpe(a.style||{},d.style||{},x),r.push(function(){c?o.md():o.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var s in i)fr(a,s,i[s]);r._ps.forEach(function(o){o.un()}),r._es={},r._sel||c7(a)},e})(H1);function fm(t){if(!t||$h(t))return t;var e=t.$_p._ps;return e.length?fm(e[0].b):null}function p7(t){if(t){if(t.b&&$h(t.b))return t;var e=t._ps;return e.length?p7(e[0]):null}}function fs(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,s=i.ref,o=o7(i,["key","ref"]);return{type:t,key:a,ref:s,props:Ks(Ks({},o),{children:n7(n).filter(function(c){return c!=null&&c!==!1})})}}var g7=(function(t){sv(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(H1),fpe=(function(t){sv(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,s=!a.b;if(s){var o=G1(a.c),c=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=c||Fh(o).createTextNode(a.t.replace("text_",""))}return r.push(function(){s?a.md():a.ud()}),!0},n.un=function(){c7(this.b)},e})(H1);function hpe(t,e,n){var r=n.map(function(c){return Vi(c)?null:c.key}),i=E3(e.map(function(c){return c.k})),a=E3(r),s=av(i,a,function(c){return c});s.removed.forEach(function(c){e.splice(c,1)[0].un()}),s.ordered.forEach(function(c){var d=c[0],f=c[1],h=e.splice(d,1)[0];e.splice(f,0,h);var g=fm(h.b),v=fm(e[f+1]&&e[f+1].b);g&&g.parentNode.insertBefore(g,v)}),s.added.forEach(function(c){e.splice(c,0,k3(n[c],r[c],c,t))});var o=s.maintained.filter(function(c){c[0];var d=c[1],f=n[d],h=e[d],g=Vi(f)?"text_".concat(f):f.type;return g!==h.t?(h.un(),e.splice(d,1,k3(f,r[d],d,t)),!0):(h.i=d,!1)});return _3(_3([],s.added,!0),o.map(function(c){c[0];var d=c[1];return d}))}function ppe(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=fm(n[i].b);if(a)return a}return null}function k3(t,e,n,r){var i=r.d+1;if(Vi(t)||ph(t))return new fpe("text_".concat(t),i,e,n,r,null,{});var a=t.type,s=typeof a=="string"?dpe:spe;return new s(a,i,e,n,r,t.ref,t.props)}function ov(t,e,n,r,i,a,s){var o=hpe(t,e,n),c=t._hyd,d=e.filter(function(h,g){return h._hyd=c,h.u(r,i,n[g],a,s)});t.typ==="container"&&t._sel&&e.forEach(function(h){var g=p7(h);g&&(g._sel=!0)}),t._hyd=null;var f=G1(t);return f&&o.reverse().forEach(function(h){var g=e[h],v=fm(g.b);if(v&&f!==v&&!v.parentNode){var b=ppe(t,g);f.insertBefore(v,b)}}),d.length>0}function gpe(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new g7(e));var a=[];return ov(n,n._ps,t?[t]:[],a,r,void 0,void 0),u7(a),sI(null),i||(e.__CROACT__=n),n}function C3(t,e,n){return!n&&t&&(n=new g7(e.parentElement),n._hyd=[e],n._sel=!0),gpe(t,e,n),n}function m7(t){var e=d7(),n=e._hs||(e._hs=[]),r=npe(),i=n[r];if(rpe(r+1),i){if(!rx(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function mpe(t,e){var n=m7({func:t,deps:e});return n.value}function vpe(t){return mpe(function(){return h7(t)},[])}function v7(t,e,n){var r=d7(),i=m7({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function ype(t,e,n){v7(function(){t?.(e())},n,!0)}function cI(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function y7(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function b7(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function uI(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function bpe(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function xpe(t,e){var n=uI("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function Bk(t){return t.replace(/_/g,".")}function Eg(t,e){var n=null,r="-1";return cI(t,function(i){var a=uI("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=xpe(i.versionTest.toLowerCase(),e)||r),r=Bk(r),!0)}),{preset:n,version:r}}function xy(t,e){var n={brand:"",version:"-1"};return cI(t,function(r){var i=x7(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function x7(t,e){return y7(t,function(n){var r=n.brand;return uI(""+e.test,r.toLowerCase())})}var w7=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],S7=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Uk=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],_7=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],E7=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function T7(t){return!!Eg(_7,t).preset}function wpe(t){var e=b7(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:T7(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=Eg(w7,e),s=a.preset,o=a.version,c=Eg(E7,e),d=c.preset,f=c.version,h=Eg(S7,e);if(r.chromium=!!h.preset,r.chromiumVersion=h.version,!r.chromium){var g=Eg(Uk,e);r.webkit=!!g.preset,r.webkitVersion=g.version}return d&&(i.name=d.id,i.version=f,i.majorVersion=parseInt(f,10)),s&&(r.name=s.id,r.version=o,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function Spe(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!xy(_7,n).brand||T7(b7())},o={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&cI(Uk,function(g){return x7(n,g)});var c=xy(S7,n);if(s.chromium=!!c.brand,s.chromiumVersion=c.version||"-1",!s.chromium){var d=xy(Uk,n);s.webkit=!!d.brand,s.webkitVersion=d.version||"-1"}var f=y7(E7,function(g){return new RegExp(""+g.test,"g").exec(a)});o.name=f?f.id:"";{var h=xy(w7,n);s.name=h.brand||s.name,s.version=h.brand&&t?t.uaFullVersion:h.version}return s.webkit&&(o.name=r?"ios":"mac"),o.name==="ios"&&s.webview&&(s.version="-1"),o.version=Bk(o.version),s.version=Bk(s.version),o.majorVersion=parseInt(o.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:o,isMobile:r,isHints:!0}}function _pe(t){return bpe()?Spe():wpe(t)}function Epe(t,e,n,r,i,a){for(var s=0;s<i;++s){var o=n+s*i,c=r+s*i;t[o]+=t[c]*a,e[o]+=e[c]*a}}function Tpe(t,e,n,r,i){for(var a=0;a<i;++a){var s=n+a*i,o=r+a*i,c=t[s],d=e[s];t[s]=t[o],t[o]=c,e[s]=e[o],e[o]=d}}function Ape(t,e,n,r,i){for(var a=0;a<r;++a){var s=n+a*r;t[s]/=i,e[s]/=i}}function A7(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function uo(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=hn(e),i=0;i<e;++i){var a=e*i+i;if(!at(n[a],ir)){for(var s=i+1;s<e;++s)if(n[e*i+s]){Tpe(n,r,i,s,e);break}}if(!at(n[a],ir))return[];Ape(n,r,i,e,n[a]);for(var s=0;s<e;++s){var o=s,c=s+i*e,d=n[c];!at(d,ir)||i===s||Epe(n,r,o,i,e,-d)}}return r}function kpe(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function k7(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function Cpe(t,e){for(var n=hn(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function id(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function ys(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=hn(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var s=0;s<i-1;++s)r[a*n+s]=t[a*e+s];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function ix(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=hn(t);return e.forEach(function(i){r=Qt(r,i,t)}),r}function Qt(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<a;++o){r[o*n+s]=0;for(var c=0;c<i;++c)r[o*n+s]+=t[c*n+s]*e[o*i+c]}return r}function Ct(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function Ke(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function Npe(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function C7(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function oi(t,e,n){n===void 0&&(n=e.length);var r=Qt(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function Ipe(t,e){return Qt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function Ope(t,e){return Qt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Ppe(t,e){return Qt(t,cv(e,4))}function wy(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,s=e[2],o=s===void 0?1:s;return Qt(t,[r,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function lv(t,e){return oi(cv(e,3),id(t,3))}function VE(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,s=e[2],o=s===void 0?0:s;return Qt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,o,1],4)}function N3(t,e){return Qt(t,e,4)}function cv(t,e){var n=Math.cos(t),r=Math.sin(t),i=hn(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function hn(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function dI(t,e){for(var n=hn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function ad(t,e){for(var n=hn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function fI(t,e,n,r,i,a,s,o){var c=t[0],d=t[1],f=e[0],h=e[1],g=n[0],v=n[1],b=r[0],x=r[1],w=i[0],_=i[1],T=a[0],N=a[1],D=s[0],P=s[1],O=o[0],C=o[1],I=[c,0,f,0,g,0,b,0,d,0,h,0,v,0,x,0,1,0,1,0,1,0,1,0,0,c,0,f,0,g,0,b,0,d,0,h,0,v,0,x,0,1,0,1,0,1,0,1,-w*c,-_*c,-T*f,-N*f,-D*g,-P*g,-O*b,-C*b,-w*d,-_*d,-T*h,-N*h,-D*v,-P*v,-O*x,-C*x],R=uo(I,8);if(!R.length)return[];var j=Qt(R,[w,_,T,N,D,P,O,C],8);return j[8]=1,ys(kpe(j),3,4)}var Ug=function(){return Ug=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ug.apply(this,arguments)};function Dpe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function hm(t,e){return e===void 0&&(e=0),Nf(gh(t,e))}function Rpe(t,e){var n=oi(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Nf(t){var e=Dpe();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function gh(t,e){e===void 0&&(e=0);var n=cr(t)?t:jc(t);return n.map(function(r){var i=J8(r),a=i.prefix,s=i.value,o=null,c=a,d="";if(a==="translate"||a==="translateX"||a==="translate3d"){var f=vs(e)?Ug(Ug({},e),{"o%":e["%"]}):{"%":e,"o%":e},h=Bu(s).map(function(z,Y){return Y===0&&"x%"in f?f["%"]=e["x%"]:Y===1&&"y%"in f?f["%"]=e["y%"]:f["%"]=e["o%"],Xt(z,f)}),g=h[0],v=h[1],b=v===void 0?0:v,x=h[2],w=x===void 0?0:x;o=VE,d=[g,b,w]}else if(a==="translateY"){var _=vs(e)?Ug({"%":e["y%"]},e):{"%":e},b=Xt(s,_);o=VE,d=[0,b,0]}else if(a==="translateZ"){var w=parseFloat(s);o=VE,d=[0,0,w]}else if(a==="scale"||a==="scale3d"){var T=Bu(s).map(function(z){return parseFloat(z)}),N=T[0],D=T[1],P=D===void 0?N:D,O=T[2],C=O===void 0?1:O;o=wy,d=[N,P,C]}else if(a==="scaleX"){var N=parseFloat(s);o=wy,d=[N,1,1]}else if(a==="scaleY"){var P=parseFloat(s);o=wy,d=[1,P,1]}else if(a==="scaleZ"){var C=parseFloat(s);o=wy,d=[1,1,C]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var I=iv(s),R=I.unit,j=I.value,L=R==="rad"?j:j*Math.PI/180;a==="rotate"||a==="rotateZ"?(c="rotateZ",o=Ppe):a==="rotateX"?o=Ipe:a==="rotateY"&&(o=Ope),d=L}else if(a==="matrix3d")o=N3,d=Bu(s).map(function(z){return parseFloat(z)});else if(a==="matrix"){var B=Bu(s).map(function(z){return parseFloat(z)});o=N3,d=[B[0],B[1],0,0,B[2],B[3],0,0,0,0,1,0,B[4],B[5],0,1]}else c="";return{name:a,functionName:c,value:s,matrixFunction:o,functionValue:d}})}var Fk=function(t,e){return Fk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Fk(t,e)};function Mpe(t,e){Fk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var N7=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),I7=(function(t){Mpe(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,N7)||this}return e})(epe);function jpe(t,e){return av(t,e,N7)}var $k=function(){return $k=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$k.apply(this,arguments)};function zpe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var W1=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(vs(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(vs(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var s=ul(a,function(o){return o.listener===r});s>-1&&a.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,zpe(a).forEach(function(o){o.listener(r),o.once&&i.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push($k({listener:r},i))},t})();var qk=function(t,e){return qk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},qk(t,e)};function Lpe(t,e){qk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var zf=function(){return zf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zf.apply(this,arguments)};function Vpe(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function I3(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function Sy(t){if(t){if(Vi(t))return document.querySelector(t)}else return null;if(tI(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var Bpe=(function(t){Lpe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=Sy(i.container);if(!a){this._flag=!1;return}var s=0,o=0,c=0,d=0;if(a===document.body)c=window.innerWidth,d=window.innerHeight;else{var f=a.getBoundingClientRect();s=f.top,o=f.left,c=f.width,d=f.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:c,height:d},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,s=r.clientY,o=i.threshold,c=o===void 0?0:o,d=this,f=d._startRect,h=d._startPos;this._currentOptions=i;var g=[0,0];return f.top>s-c?(h[1]>f.top||s<h[1])&&(g[1]=-1):f.top+f.height<s+c&&(h[1]<f.top+f.height||s>h[1])&&(g[1]=1),f.left>a-c?(h[0]>f.left||a<h[0])&&(g[0]=-1):f.left+f.width<a+c&&(h[0]<f.left+f.width||a>h[0])&&(g[0]=1),!g[0]&&!g[1]?!1:this._continueDrag(zf(zf({},i),{direction:g,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=r.direction,c=r.throttleTime,d=c===void 0?0:c,f=r.inputEvent,h=r.isDrag,g=this._getScrollPosition(o||[0,0],r),v=g[0]-s[0],b=g[1]-s[1],x=o||[v?Math.abs(v)/v:0,b?Math.abs(b)/b:0];return this._prevScrollPos=g,this._lock=!1,!v&&!b?!1:(this.emit("move",{offsetX:x[0]?v:0,offsetY:x[1]?b:0,inputEvent:f}),d&&h&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},d)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,s=i.getScrollPosition,o=s===void 0?Vpe:s;return o({container:Sy(a),direction:r})},n._continueDrag=function(r){var i=this,a,s=r.container,o=r.direction,c=r.throttleTime,d=r.useScroll,f=r.isDrag,h=r.inputEvent;if(!(!this._flag||f&&this._isWait)){var g=dm(),v=Math.max(c+this._prevTime-g,0);if(v>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},v),!1;this._prevTime=g;var b=this._getScrollPosition(o,r);this._prevScrollPos=b,f&&(this._isWait=!0),d||(this._lock=!0);var x={container:Sy(s),direction:o,inputEvent:h};return(a=r.requestScroll)===null||a===void 0||a.call(r,x),this.emit("scroll",x),this._isWait=!1,d||this.checkScroll(zf(zf({},r),{prevScrollPos:b,direction:o,inputEvent:h}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?I3:i,s=Sy(r.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=I3(window,this._onScroll):this._unregister=a(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(W1);function Upe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function Oi(t){return at(t,ir)}function Fpe(t,e){return t.every(function(n,r){return Oi(n-e[r])===0})}function $pe(t,e){return!Oi(t[0]-e[0])&&!Oi(t[1]-e[1])}function O7(t){return t.length<3?0:Math.abs(Ghe(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function O3(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,s=sd(t),o=s.minX,c=s.minY,d=s.maxX,f=s.maxY,h=n/(d-o),g=r/(f-c);return t.map(function(v){return[i+(v[0]-o)*h,a+(v[1]-c)*g]})}function sd(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function Gk(t,e,n){var r=t[0],i=t[1],a=sd(e),s=a.minX,o=a.maxX,c=[[s,i],[o,i]],d=ax(c[0],c[1]),f=Hk(e),h=[];if(f.forEach(function(b){var x=ax(b[0],b[1]),w=b[0];if(Fpe(d,x))h.push({pos:t,line:b,type:"line"});else{var _=P7(hI(d,x),[c,b]);_.forEach(function(T){b.some(function(N){return $pe(N,T)})?h.push({pos:T,line:b,type:"point"}):Oi(w[1]-i)!==0&&h.push({pos:T,line:b,type:"intersection"})})}}),Bi(h,function(b){return b[0]===r}))return!0;var g=0,v={};return h.forEach(function(b){var x=b.pos,w=b.type,_=b.line;if(!(x[0]>r))if(w==="intersection")++g;else{if(w==="line")return;if(w==="point"){var T=Bi(_,function(P){return P[1]!==i}),N=v[x[0]],D=T[1]>i?1:-1;N?N!==D&&++g:v[x[0]]=D}}}),g%2===1}function ax(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],s=i-n,o=a-r;Math.abs(s)<ir&&(s=0),Math.abs(o)<ir&&(o=0);var c=0,d=0,f=0;return s?o?(c=-o/s,d=1,f=-c*n-r):(d=1,f=-r):o&&(c=-1,f=n),[c,d,f]}function hI(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],o=e[2],c=n===0&&a===0,d=r===0&&s===0,f=[];if(c&&d)return[];if(c){var h=-i/r,g=-o/s;return h!==g?[]:[[-1/0,h],[1/0,h]]}else if(d){var v=-i/n,b=-o/a;return v!==b?[]:[[v,-1/0],[v,1/0]]}else if(n===0){var x=-i/r,w=-(s*x+o)/a;f=[[w,x]]}else if(a===0){var x=-o/s,w=-(r*x+i)/n;f=[[w,x]]}else if(r===0){var w=-i/n,x=-(a*w+o)/s;f=[[w,x]]}else if(s===0){var w=-o/a,x=-(n*w+i)/r;f=[[w,x]]}else{var w=(r*o-s*i)/(s*n-r*a),x=-(n*w+i)/r;f=[[w,x]]}return f.map(function(_){return[_[0],_[1]]})}function P7(t,e){var n=e.map(function(h){return[0,1].map(function(g){return[Math.min(h[0][g],h[1][g]),Math.max(h[0][g],h[1][g])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],s=i[1];if(Oi(a-t[1][0])){if(!Oi(s-t[1][1])){var d=Math.max.apply(Math,n.map(function(h){return h[0][0]})),f=Math.min.apply(Math,n.map(function(h){return h[0][1]}));if(Oi(d-f)>0)return[];r=[[d,s],[f,s]]}}else{var o=Math.max.apply(Math,n.map(function(h){return h[1][0]})),c=Math.min.apply(Math,n.map(function(h){return h[1][1]}));if(Oi(o-c)>0)return[];r=[[a,o],[a,c]]}}return r.length||(r=t.filter(function(h){var g=h[0],v=h[1];return n.every(function(b){return 0<=Oi(g-b[0][0])&&0<=Oi(b[0][1]-g)&&0<=Oi(v-b[1][0])&&0<=Oi(b[1][1]-v)})})),r.map(function(h){return[Oi(h[0]),Oi(h[1])]})}function Hk(t){return Upe(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function qpe(t,e){var n=t.slice(),r=e.slice();w3(n)===-1&&n.reverse(),w3(r)===-1&&r.reverse();var i=Hk(n),a=Hk(r),s=i.map(function(f){return ax(f[0],f[1])}),o=a.map(function(f){return ax(f[0],f[1])}),c=[];s.forEach(function(f,h){var g=i[h],v=[];o.forEach(function(b,x){var w=hI(f,b),_=P7(w,[g,a[x]]);v.push.apply(v,_.map(function(T){return{index1:h,index2:x,pos:T,type:"intersection"}}))}),v.sort(function(b,x){return Zo(g[0],b.pos)-Zo(g[0],x.pos)}),c.push.apply(c,v),Gk(g[1],r)&&c.push({index1:h,index2:-1,pos:g[1],type:"inside"})}),a.forEach(function(f,h){if(Gk(f[1],n)){var g=!1,v=ul(c,function(b){var x=b.index2;return x===h?(g=!0,!1):!!g});v===-1&&(g=!1,v=ul(c,function(b){var x=b.index1,w=b.index2;return x===-1&&w+1===h?(g=!0,!1):!!g})),v===-1?c.push({index1:-1,index2:h,pos:f[1],type:"inside"}):c.splice(v,0,{index1:-1,index2:h,pos:f[1],type:"inside"})}});var d={};return c.filter(function(f){var h=f.pos,g=h[0]+"x"+h[1];return d[g]?!1:(d[g]=!0,!0)})}function Gpe(t,e){var n=qpe(t,e);return n.map(function(r){var i=r.pos;return i})}function Hpe(t,e){var n=Gpe(t,e);return O7(n)}var Wk=function(t,e){return Wk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Wk(t,e)};function Wpe(t,e){Wk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Jn=function(){return Jn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Jn.apply(this,arguments)};function Ype(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function BE(t){return Ype([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function Kpe(t){return t.touches&&t.touches.length>=2}function _y(t){return t?t.touches?Qpe(t.touches):[D7(t)]:[]}function Xpe(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function P3(t,e,n){var r=n.length,i=Fg(t,r),a=i.clientX,s=i.clientY,o=i.originalClientX,c=i.originalClientY,d=Fg(e,r),f=d.clientX,h=d.clientY,g=Fg(n,r),v=g.clientX,b=g.clientY,x=a-f,w=s-h,_=a-v,T=s-b;return{clientX:o,clientY:c,deltaX:x,deltaY:w,distX:_,distY:T}}function UE(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Qpe(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(D7(t[r]));return n}function D7(t){return{clientX:t.clientX,clientY:t.clientY}}function Fg(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var FE=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),BE(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),BE(e)-BE(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=P3(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],s=0;s<i;++s)a[s]=P3([e[s]],[n[s]],[r[s]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=Fg(e,this.length),i=Fg(this.prevClients,this.length),a=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(a*a+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),UE(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),UE(e)/UE(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),D3=["textarea","input"],Zpe=(function(t){Wpe(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(g,v){if(v===void 0&&(v=!0),!(!i.flag&&g.cancelable===!1)){var b=g.type.indexOf("drag")>=-1;if(!(i.flag&&b)){i._isDragAPI=!0;var x=i.options,w=x.container,_=x.pinchOutside,T=x.preventWheelClick,N=x.preventRightClick,D=x.preventDefault,P=x.checkInput,O=x.dragFocusedInput,C=x.preventClickEventOnDragStart,I=x.preventClickEventOnDrag,R=x.preventClickEventByCondition,j=i._useTouch,L=!i.flag;if(i._isSecondaryButton=g.which===3||g.button===2,T&&(g.which===2||g.button===1)||N&&(g.which===3||g.button===2))return i.stop(),!1;if(L){var B=i._window.document.activeElement,z=g.target;if(z){var Y=z.tagName.toLowerCase(),Z=D3.indexOf(Y)>-1,G=z.isContentEditable;if(Z||G){if(P||!O&&B===z)return!1;if(B&&(B===z||G&&B.isContentEditable&&B.contains(z)))if(O)z.blur();else return!1}else if((D||g.type==="touchstart")&&B){var K=B.tagName.toLowerCase();(B.isContentEditable||D3.indexOf(K)>-1)&&B.blur()}(C||I||R)&&Vr(i._window,"click",i._onClick,!0)}i.clientStores=[new FE(_y(g))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=v,i._dragFlag=!0,i._prevInputEvent=g,i.data={},i.doubleFlag=dm()-i.prevTime<200,i._isMouseEvent=Xpe(g),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var X=i._preventMouseEvent||i.emit("dragStart",Jn(Jn({data:i.data,datas:i.data,inputEvent:g,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:v,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){g.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));X===!1&&i.stop(),i._isMouseEvent&&i.flag&&D&&g.preventDefault()}if(!i.flag)return!1;var ee=0;if(L?(i._attchDragEvent(),j&&_&&(ee=setTimeout(function(){Vr(w,"touchstart",i.onDragStart,{passive:!1})}))):j&&_&&fr(w,"touchstart",i.onDragStart),i.flag&&Kpe(g)){if(clearTimeout(ee),L&&g.touches.length!==g.changedTouches.length)return;i.pinchFlag||i.onPinchStart(g)}}}},i.onDrag=function(g,v){if(i.flag){var b=i.options.preventDefault;!i._isMouseEvent&&b&&g.preventDefault(),i._prevInputEvent=g;var x=_y(g),w=i.moveClients(x,g,!1);if(i._dragFlag){if(i.pinchFlag||w.deltaX||w.deltaY){var _=i._preventMouseEvent||i.emit("drag",Jn(Jn({},w),{isScroll:!!v,inputEvent:g}));if(_===!1){i.stop();return}}i.pinchFlag&&i.onPinch(g,x)}i.getCurrentStore().getPosition(x,!0)}},i.onDragEnd=function(g){if(i.flag){var v=i.options,b=v.pinchOutside,x=v.container,w=v.preventClickEventOnDrag,_=v.preventClickEventOnDragStart,T=v.preventClickEventByCondition,N=i.isDrag;(w||_||T)&&requestAnimationFrame(function(){i._allowClickEvent()}),!T&&!_&&w&&!N&&i._allowClickEvent(),i._useTouch&&b&&fr(x,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(g);var D=g?.touches?_y(g):[],P=D.length;P===0||!i.options.keepDragging?i.flag=!1:i._addStore(new FE(D));var O=i._getPosition(),C=dm(),I=!N&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=N||I?0:C,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Jn({data:i.data,datas:i.data,isDouble:I,isDrag:N,isClick:!N,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:g,isTrusted:i._isTrusted},O)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){fr(i._window,"click",i._onClick,!0)},i._onClick=function(g){i._allowClickEvent(),i._allowMouseEvent();var v=i.options.preventClickEventByCondition;v?.(g)||(g.stopPropagation(),g.preventDefault())},i._onContextMenu=function(g){var v=i.options;v.preventRightClick?i.onDragEnd(g):g.preventDefault()},i._passCallback=function(){};var a=[].concat(n),s=a[0];i._window=s7(s)?s:_c(s),i.options=Jn({checkInput:!1,container:s&&!("document"in s)?_c(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=i.options,c=o.container,d=o.events,f=o.checkWindowBlur;if(i._useDrag=d.indexOf("drag")>-1,i._useTouch=d.indexOf("touch")>-1,i._useMouse=d.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(g){Vr(g,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(g){Vr(g,"mousedown",i.onDragStart),Vr(g,"mousemove",i._passCallback)}),Vr(c,"contextmenu",i._onContextMenu)),f&&Vr(_c(),"blur",i.onBlur),i._useTouch){var h={passive:!1};a.forEach(function(g){Vr(g,"touchstart",i.onDragStart,h),Vr(g,"touchmove",i._passCallback,h)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(c){var d=c.clientX,f=c.clientY;return{clientX:d+i,clientY:f+a,originalClientX:d,originalClientY:f}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),Jn(Jn({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),fr(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){fr(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){fr(a,"mousedown",n.onDragStart)}),fr(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){fr(a,"touchstart",n.onDragStart)}),fr(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new FE(_y(n));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",Jn(Jn({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Jn(Jn({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Jn(Jn({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),Jn(Jn({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(d,f){var h=f.getPosition();return d.distX+=h.distX,d.distY+=h.distY,d},a),o=s.distX,c=s.distY;return Jn(Jn({},a),{distX:o,distY:c})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(Vr(r,"dragover",this.onDrag,i),Vr(n,"dragend",this.onDragEnd)),this._useMouse&&(Vr(r,"mousemove",this.onDrag),Vr(n,"mouseup",this.onDragEnd)),this._useTouch&&(Vr(r,"touchmove",this.onDrag,i),Vr(n,"touchend",this.onDragEnd,i),Vr(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(fr(r,"dragover",this.onDrag),fr(n,"dragend",this.onDragEnd)),this._useMouse&&(fr(r,"mousemove",this.onDrag),fr(n,"mouseup",this.onDragEnd)),this._useTouch&&(fr(r,"touchstart",this.onDragStart),fr(r,"touchmove",this.onDrag),fr(n,"touchend",this.onDragEnd),fr(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(W1);function Jpe(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var ege=Jpe;function tge(t){return ege(t).toString(36)}function nge(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function rge(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?Bu(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function ige(t,e,n,r,i){var a=Fh(r),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=rge(t,e,n),(i||a.head||a.body).appendChild(s),s}function age(t){var e="rCS"+tge(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=nge(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=ige(e,t,r,n,i);else{var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,c=parseFloat(a.getAttribute("data-styled-count"))||0;c<=1?(a.remove?a.remove():(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(c-1))}}}}}var Yk=function(){return Yk=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yk.apply(this,arguments)};function sge(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function R7(t,e){var n=age(e),r=n.className;return ipe(function(i,a){var s=i.className,o=s===void 0?"":s;i.cspNonce;var c=sge(i,["className","cspNonce"]),d=vpe();return ype(a,function(){return d.current},[]),v7(function(){var f=n.inject(d.current,{nonce:i.cspNonce});return function(){f.destroy()}},[]),fs(t,Yk({ref:d,"data-styled-id":r,className:"".concat(o," ").concat(r)},c))})}var Kk=function(t,e){return Kk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Kk(t,e)};function uv(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Kk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ae=function(){return ae=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ae.apply(this,arguments)};function oge(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function lge(t,e,n,r){var i=arguments.length,a=i<3?e:r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function cge(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function De(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function dv(t,e){return ae({events:[],props:[],name:t},e)}var uge=["n","w","s","e"],pI=["n","w","s","e","nw","ne","sw","se"];function dge(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function fge(t){var e=dge(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var qh=_pe(),M7=qh.browser.webkit,j7=M7&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),z7=qh.browser.name,L7=parseInt(qh.browser.version,10),hge=z7==="chrome",pge=qh.browser.chromium,gge=parseInt(qh.browser.chromiumVersion,10)||0,mge=hge&&L7>=109||pge&&gge>=109,vge=z7==="firefox",yge=parseInt(qh.browser.webkitVersion,10)>=612||L7>=15,gI="moveable-",bge=pI.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),xge=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(bge,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(fge(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(j7?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),wge=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Xk=1e-4,wi=1e-7,Ey=1e-9,Qk=Math.pow(10,10),R3=-Qk,Sge={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},mI={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},V7={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},B7=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function fv(t,e,n,r,i,a){var s,o;a===void 0&&(a="draggable");var c=(o=(s=e.gestos[a])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},d=c.originalDatas||c.datas,f=d[a]||(d[a]={});return ae(ae({},c),{isPinch:!!r,parentEvent:!0,datas:f,originalDatas:t.originalDatas})}var mh=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),ae(ae({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var s=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function Xf(t,e,n,r){var i=t.length===16,a=i?4:3,s=Ed(t,n,r,a),o=le(s,4),c=le(o[0],2),d=c[0],f=c[1],h=le(o[1],2),g=h[0],v=h[1],b=le(o[2],2),x=b[0],w=b[1],_=le(o[3],2),T=_[0],N=_[1],D=le(An(t,e,a),2),P=D[0],O=D[1],C=Math.min(d,g,x,T),I=Math.min(f,v,w,N),R=Math.max(d,g,x,T),j=Math.max(f,v,w,N);d=d-C||0,g=g-C||0,x=x-C||0,T=T-C||0,f=f-I||0,v=v-I||0,w=w-I||0,N=N-I||0,P=P-C||0,O=O-I||0;var L=t[0],B=t[a+1],z=pi(L*B);return{left:C,top:I,right:R,bottom:j,origin:[P,O],pos1:[d,f],pos2:[g,v],pos3:[x,w],pos4:[T,N],direction:z}}function U7(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,s=a.moveableClientRect,o=a.rootMatrix,c=a.is3d,d=a.pos1,f=s.left,h=s.top,g=c?4:3,v=le(Ke(bh(o,[n-f,r-h],g),d),2),b=v[0],x=v[1],w=le(mo({datas:i,distX:b,distY:x}),2),_=w[0],T=w[1];return[_,T]}function _d(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,s=r.is3d,o=r.left,c=r.top,d=r.origin,f=r.offsetMatrix,h=r.targetMatrix,g=r.transformOrigin,v=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=h,n.beforeMatrix=a,n.offsetMatrix=f,n.transformOrigin=g,n.inverseMatrix=uo(i,v),n.inverseBeforeMatrix=uo(a,v),n.absoluteOrigin=id(Ct([o,c],d),v),n.startDragBeforeDist=oi(n.inverseBeforeMatrix,n.absoluteOrigin,v),n.startDragDist=oi(n.inverseMatrix,n.absoluteOrigin,v)}function _ge(t){return Xf(t.datas.beforeTransform,[50,50],100,100).direction}function Y1(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,s=i.nextTransforms,o=s.length,c=i.nextTransformAppendedIndexes,d=-1;a===-1?(n==="translate"?d=0:n==="rotate"&&(d=ul(s,function(v){return v.match(/scale\(/g)})),d===-1&&(d=s.length),r.transformIndex=d):Bi(c,function(v){return v.index===a&&v.functionName===n})?d=a:d=a+c.filter(function(v){return v.index<a}).length;var f=Kme(s,t.state,d),h=f.targetFunction,g=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=f.beforeFunctionTexts,r.afterFunctionTexts=f.afterFunctionTexts,r.beforeTransform=f.beforeFunctionMatrix,r.beforeTransform2=f.beforeFunctionMatrix2,r.targetTansform=f.targetFunctionMatrix,r.afterTransform=f.afterFunctionMatrix,r.afterTransform2=f.afterFunctionMatrix2,r.targetAllTransform=f.allFunctionMatrix,h.functionName===g?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):o>d&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=De(De([],le(c),!1),[{functionName:n,index:d,isAppend:!0}],!1))}function K1(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function Ege(t){var e=t.datas,n=t.distX,r=t.distY,i=le($7({datas:e,distX:n,distY:r}),2),a=i[0],s=i[1],o=F7(e,Cpe([a,s],4));return oi(o,id([0,0,0],4),4)}function F7(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,c=n?Qt(o,e,4):Qt(e,o,4),d=Qt(uo(n?a:r,4),c,4),f=Qt(d,uo(n?s:i,4),4);return f}function $7(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,c=a?4:3;return Ke(oi(i,Ct(o,[n,r]),c),s)}function mo(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,c=n.startDragBeforeDist,d=n.startDragDist,f=n.absoluteOrigin,h=o?4:3;return Ke(oi(e?a:s,Ct(f,[r,i]),h),e?c:d)}function Tge(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,s=n.is3d;n.startDragBeforeDist;var o=n.startDragDist,c=n.absoluteOrigin,d=s?4:3;return Ke(oi(a,Ct(o,[r,i]),d),c)}function Age(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(s,o){var c=iv(s),d=c.value,f=c.unit,h=o?i:r,g=o?n:e;if(s==="%"||isNaN(d)){var v=h?a[o]/h:0;return g*v}else if(f!=="%")return d;return g*d/100}):a}function q7(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function kge(t,e){return q7(e).map(function(n){return t[n]})}function $E(t,e){var n=(e+1)/2;return[nx(t[0][0],t[1][0],n,1-n),nx(t[0][1],t[1][1],n,1-n)]}function mr(t,e){var n=$E([t[0],t[1]],e[0]),r=$E([t[2],t[3]],e[0]);return $E([n,r],e[1])}function Cge(t,e,n,r,i,a){var s=Ed(e,n,r,i),o=mr(s,a),c=t[0]-o[0],d=t[1]-o[1];return[c,d]}function hv(t,e,n,r){return Qt(t,qg(e,r,n),r)}function Nge(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,s=t.is3d,o=s?4:3,c;if(Vi(n)){var d=e.beforeTransform,f=e.afterTransform;r?c=ys(hm(n),4,o):c=ys(Qt(Qt(d,hm([n]),4),f,4),4,o)}else c=n;return hv(a,c,i,o)}function Ige(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,s=t.targetAllTransform,o=i?4:3;return hv(r,Qt(s||a,dI(e,o),o),n,o)}function X1(t,e){var n=Gh(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=cr(r)?r:jc(r),Zk(t,e,i)},setTransformIndex:function(r){Zk(t,e,r)}}}function Q1(t,e,n){var r=Gh(e),i=r.startTransforms;Zk(t,e,ul(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function Zk(t,e,n){var r=Gh(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var s=t.state,o=gh([a],{"x%":function(c){return c/100*s.offsetWidth},"y%":function(c){return c/100*s.offsetHeight}});i.startValue=o[0].functionValue}}}function vI(t,e){var n=Gh(t);n.nextTransforms=jc(e)}function Gh(t){return t.originalDatas.beforeRenderable}function sx(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Ty(t){return(sx(t)||[]).join(" ")}function Ay(t){return Gh(t).nextStyle}function G7(t,e,n,r,i){vI(i,e);var a=hi.drag(t,fv(i,t.state,n,r)),s=a?a.transform:e;return ae(ae({transform:e,drag:a},vi({transform:s},i)),{afterTransform:s})}function yI(t,e,n,r,i,a){var s=Nge(t.state,i,e,a),o=Dge(t,n,r,s);return o}function H7(t,e,n,r,i,a,s){var o=yI(t,e,n,i,a,s),c=t.state,d=c.left,f=c.top,h=t.props.groupable,g=h?d:0,v=h?f:0,b=Ke(r,o);return Ke(b,[g,v])}function Oge(t,e,n,r,i,a,s){var o=H7(t,e,n,r,i,a,s);return o}function Pge(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function Dge(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,s=i.height,o=i.is3d,c=o?4:3,d=[a/2*(1+e[0])+n[0],s/2*(1+e[1])+n[1]];return An(r,d,c)}function Rge(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return H7(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function Mge(t,e,n,r,i,a){var s=t.props.groupable,o=t.state,c=o.transformOrigin,d=o.offsetMatrix,f=o.is3d,h=o.width,g=o.height,v=o.left,b=o.top,x=a.fixedDirection,w=a.nextTargetMatrix||o.targetMatrix,_=f?4:3,T=Age(i,e,n,h,g,c),N=s?v:0,D=s?b:0,P=hv(d,w,T,_),O=Cge(r,P,e,n,_,x);return Ke(O,[N,D])}function jge(t,e){return mr(za(t.state),e)}function zge(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function Lge(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Vge(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function W7(t,e,n){for(var r=t,i=[],a=iI(t)||Wc(t),s=!n&&t===e||t===a,o=s,c=!1,d=3,f,h,g,v=!1,b=gm(e,e,!0).offsetParent,x=1;r&&!o;){o=s;var w=Ui(r),_=w("position"),T=vq(r),N=_==="fixed",D=Vge(w),P=Npe(jme(T)),O=void 0,C=!1,I=!1,R=0,j=0,L=0,B=0,z={hasTransform:!1,fixedContainer:null};N&&(v=!0,z=Ume(r),b=z.fixedContainer);var Y=P.length;!c&&(Y===16||D.length)&&(c=!0,d=4,iC(i),g&&(g=ys(g,3,4))),c&&Y===9&&(P=ys(P,3,4));var Z=Bme(r,t),G=Z.tagName,K=Z.hasOffset,X=Z.isSVG,ee=Z.origin,J=Z.targetOrigin,F=Z.offset,Q=le(F,2),te=Q[0],W=Q[1];G==="svg"&&!r.ownerSVGElement&&g&&(i.push({type:"target",target:r,matrix:Fme(r,d)}),i.push({type:"offset",target:r,matrix:hn(d)}));var ue=parseFloat(w("zoom"))||1;if(N)O=z.fixedContainer,C=!0;else{var re=gm(r,e,!1,!0,w),oe=re.offsetZoom;if(O=re.offsetParent,C=re.isEnd,I=re.isStatic,x*=oe,(re.isCustomElement||oe!==1)&&I)te-=O.offsetLeft,W-=O.offsetTop;else if(vge||mge){var we=re.parentSlotElement;if(we){for(var se=O,Ee=0,ge=0;se&&Lge(se);)Ee+=se.offsetLeft,ge+=se.offsetTop,se=se.offsetParent;te-=Ee,W-=ge}}}if(M7&&!yge&&K&&!X&&I&&(_==="relative"||_==="static")&&(te-=O.offsetLeft,W-=O.offsetTop,s=s||C),N)K&&z.hasTransform&&(L=O.clientLeft,B=O.clientTop);else if(K&&b!==O&&(R=O.clientLeft,j=O.clientTop),K&&O===a){var ne=yq(r,!1);te+=ne[0],W+=ne[1]}if(i.push({type:"target",target:r,matrix:qg(P,d,ee)}),D.length&&(i.push({type:"offset",target:r,matrix:hn(d)}),i.push({type:"target",target:r,matrix:qg(hm(D),d,ee)})),K){var Ie=r===t,ye=Ie?0:r.scrollLeft,Se=Ie?0:r.scrollTop;i.push({type:"offset",target:r,matrix:ad([te-ye+R-L,W-Se+j-B],d)})}else i.push({type:"offset",target:r,origin:ee});if(ue!==1&&i.push({type:"zoom",target:r,matrix:qg(dI([ue,ue],d),d,[0,0])}),g||(g=P),f||(f=ee),h||(h=J),o||N)break;r=O,s=C,(!n||r===a)&&(o=s)}return g||(g=hn(d)),f||(f=[0,0]),h||(h=[0,0]),{zoom:x,offsetContainer:b,matrixes:i,targetMatrix:g,transformOrigin:f,targetOrigin:h,is3d:c,hasFixed:v}}var Pu=null,Du=null,Lf=null;function vh(t){t?(window.Map&&(Pu=new Map,Du=new Map),Lf=[]):(Pu=null,Lf=null,Du=null)}function Bge(t){var e=Du?.get(t);if(e)return e;var n=Gg(t,!0);return Du&&Du.set(t,n),n}function Uge(t,e){if(Lf){var n=Bi(Lf,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=W7(t,e,!0);return Lf&&Lf.push([[t,e],r]),r}function Ui(t){var e=Pu?.get(t);if(!e){var n=_c(t).getComputedStyle(t);if(!Pu)return function(a){return n[a]};e={style:n,cached:{}},Pu.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function hs(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(s,o){return a[o]=a[o]||{},a[o][e]=a[o][e]||{},ae(ae({},n),{isRequestChild:!0,datas:a[o][e],originalDatas:a[o]})})}function qE(t,e,n,r,i,a,s){var o=!!n.match(/Start$/g),c=!!n.match(/End$/g),d=i.isPinch,f=i.datas,h=hs(t,e.name,i),g=t.moveables,v=[],b=h.map(function(x,w){var _=g[w],T=_.state,N=T.gestos,D=x;if(o)D=new mh(s).dragStart(r,x),v.push(D);else{if(N[s]||(N[s]=f.childGestos[w]),!N[s])return;D=fv(x,T,r,d,a,s),v.push(D)}var P=e[n](_,ae(ae({},D),{parentFlag:!0}));return c&&(N[s]=null),P});return o&&(f.childGestos=g.map(function(x){return x.state.gestos[s]})),{eventParams:b,childEvents:v}}function Jo(t,e,n,r,i,a){i===void 0&&(i=function(f,h){return h});var s=!!n.match(/End$/g),o=hs(t,e.name,r),c=t.moveables,d=o.map(function(f,h){var g=c[h],v=f;v=i(g,f);var b=e[n](g,ae(ae({},v),{parentFlag:!0}));return s&&(g.state.gestos={}),b});return d}function ox(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,s=r.datas.startPositions||za(e.state),o=mr(s,i),c=le(oi(cv(-t.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),2),d=c[0],f=c[1];return r.datas.originalX=d,r.datas.originalY=f,r}function Y7(t,e,n,r){var i=t.getState(),a=i.renderPoses,s=i.rotation,o=i.direction,c=od(t.props,e).zoom,d=$g(s/Math.PI*180),f={},h=t.renderState;h.renderDirectionMap||(h.renderDirectionMap={});var g=h.renderDirectionMap;n.forEach(function(b){var x=b.dir;f[x]=!0});var v=pi(o);return n.map(function(b){var x=b.data,w=b.classNames,_=b.dir,T=mI[_];if(!T||!f[_])return null;g[_]=!0;var N=(at(d,15)+v*V7[_]+720)%180,D={};return dl(x).forEach(function(P){D["data-".concat(P)]=x[P]}),r.createElement("div",ae({className:We.apply(void 0,De(["control","direction",_,e],le(w),!1)),"data-rotation":N,"data-direction":_},D,{key:"direction-".concat(_),style:dx.apply(void 0,De([s,c],le(T.map(function(P){return a[P]})),!1))}))})}function K7(t,e,n,r){var i=od(t.props,n),a=i.renderDirections,s=a===void 0?e:a,o=i.displayAroundControls;if(!s)return[];var c=s===!0?pI:s;return De(De([],le(o?J7(t,r,n,c):[]),!1),le(Y7(t,n,c.map(function(d){return{data:{},classNames:[],dir:d}}),r)),!1)}function pm(t,e,n,r,i,a){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var c=Gn(n,r),d=e?at(c/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:We.apply(void 0,De(["line","direction",e?"edge":"",e],le(s),!1)),"data-rotation":d,"data-line-key":a,"data-direction":e,style:Ag(n,r,i,c)})}function X7(t,e,n,r,i){var a=n===!0?uge:n;return a.map(function(s,o){var c=le(mI[s],2),d=c[0],f=c[1];if(f!=null)return pm(t,s,r[d],r[f],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function Q7(t){return function(e,n){var r=od(e.props,t).edge;return r&&(r===!0||r.length)?De(De([],le(X7(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),le(Fge(e,t,n)),!1):Z7(e,t,n)}}function Z7(t,e,n){return K7(t,pI,e,n)}function Fge(t,e,n){return K7(t,["nw","ne","sw","se"],e,n)}function J7(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,o=a.rotation,c=a.direction,d=i.renderDirectionMap,f=t.props.zoom,h=pi(c),g=o/Math.PI*180;return(r||dl(d)).map(function(v){var b=mI[v];if(!b)return null;var x=(at(g,15)+h*V7[v]+720)%180,w=["around-control"];return n&&w.push("direction",n),e.createElement("div",{className:We.apply(void 0,De([],le(w),!1)),"data-rotation":x,"data-direction":v,key:"direction-around-".concat(v),style:dx.apply(void 0,De([o,f],le(b.map(function(_){return s[_]})),!1))})})}function bI(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,s=r.left,o=s===void 0?-1/0:s,c=r.top,d=c===void 0?-1/0:c,f=r.right,h=f===void 0?1/0:f,g=r.bottom,v=g===void 0?1/0:g,b={position:a,left:o,top:d,right:h,bottom:v};return{vertical:M3(b,e,!0),horizontal:M3(b,n,!1)}}function Z1(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,s=r.clientLeft,o=r.clientTop,c=n.snapOffset,d=c.left,f=c.top,h=c.right,g=c.bottom,v=e||t.props.bounds||{},b=v.position||"client",x=b==="css",w=v.left,_=w===void 0?-1/0:w,T=v.top,N=T===void 0?-1/0:T,D=v.right,P=D===void 0?x?-1/0:1/0:D,O=v.bottom,C=O===void 0?x?-1/0:1/0:O;return x&&(P=a+h-d-P,C=i+g-f-C),{left:_+d-s,right:P+d-s,top:N+f-o,bottom:C+f-o}}function $ge(t,e,n){var r=Z1(t),i=r.left,a=r.top,s=r.right,o=r.bottom,c=le(n,2),d=c[0],f=c[1],h=le(Ke(n,e),2),g=h[0],v=h[1];Ne(g)<wi&&(g=0),Ne(v)<wi&&(v=0);var b=v>0,x=g>0,w={isBound:!1,offset:0,pos:0},_={isBound:!1,offset:0,pos:0};if(g===0&&v===0)return{vertical:w,horizontal:_};if(g===0)b?o<f&&(_.pos=o,_.offset=f-o):a>f&&(_.pos=a,_.offset=f-a);else if(v===0)x?s<d&&(w.pos=s,w.offset=d-s):i>d&&(w.pos=i,w.offset=d-i);else{var T=v/g,N=n[1]-T*d,D=0,P=0,O=!1;x&&s<=d?(D=T*s+N,P=s,O=!0):!x&&d<=i&&(D=T*i+N,P=i,O=!0),O&&(D<a||D>o)&&(O=!1),O||(b&&o<=f?(D=o,P=(D-N)/T,O=!0):!b&&f<=a&&(D=a,P=(D-N)/T,O=!0)),O&&(w.isBound=!0,w.pos=P,w.offset=d-P,_.isBound=!0,_.pos=D,_.offset=f-D)}return{vertical:w,horizontal:_}}function M3(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,De([],le(e),!1)),s=Math.max.apply(Math,De([],le(e),!1)),o=[];return r+1>a&&o.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<s&&o.push({direction:"end",isBound:!0,offset:s-i,pos:i}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(c,d){return Ne(d.offset)-Ne(c.offset)})}function j3(t,e,n){var r=n?t.map(function(i){return lv(i,n)}):t;return r.some(function(i){return i[0]<e.left&&Ne(i[0]-e.left)>.1||i[0]>e.right&&Ne(i[0]-e.right)>.1||i[1]<e.top&&Ne(i[1]-e.top)>.1||i[1]>e.bottom&&Ne(i[1]-e.bottom)>.1})}function qge(t,e,n){var r=ja(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,s){return Ne(a-t[n?0:1])-Ne(s-t[n?0:1])}).map(function(a){return Gn([0,0],n?[a,e]:[e,a])})}function Gge(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=Z1(t),o=s.left,c=s.top,d=s.right,f=s.bottom,h=o-r[0],g=d-r[0],v=c-r[1],b=f-r[1],x={left:h,top:v,right:g,bottom:b};if(!j3(n,x,0))return[];var w=[];return[[h,0],[g,0],[v,1],[b,1]].forEach(function(_){var T=le(_,2),N=T[0],D=T[1];n.forEach(function(P){var O=Gn([0,0],P);w.push.apply(w,De([],le(qge(P,N,D).map(function(C){return a+C-O}).filter(function(C){return!j3(e,x,C)}).map(function(C){return at(C*180/Math.PI,wi)})),!1))})}),w}var Hge=["left","right","center"],Wge=["top","bottom","middle"],z3={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},zc={start:"left",end:"right",center:"center"},Lc={start:"top",end:"bottom",center:"middle"};function Vf(){return{left:!1,top:!1,right:!1,bottom:!1}}function Hh(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,c=n.snapGridWidth,d=n.snapGridHeight,f=t.state,h=f.guidelines,g=f.enableSnap;return!r||!g||e&&r!==!0&&r.indexOf(e)<0?!1:!!(c||d||i||a||h&&h.length||s&&s.length||o&&o.length)}function xI(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function Yge(t,e){var n=xI(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function wI(t,e){var n=Yge(t,e),r=Wge.filter(function(a){return a in n}),i=Hge.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function Kge(t,e,n){var r=An(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function Xge(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<ir&&(i=0),Math.abs(a)<ir&&(a=0);var s=0,o=0,c=0;return i?a?(s=-a/i,o=1,c=s*n[0]-n[1]):(o=1,c=-n[1]):(s=-1,c=n[0]),[s,o,c].map(function(d){return at(d,ir)})}var eq="snapRotationThreshold",tq="snapRotationDegrees",nq="snapHorizontalThreshold",rq="snapVerticalThreshold";function J1(t,e,n,r,i,a,s){var o;r===void 0&&(r=[]),i===void 0&&(i=[]);var c=t.props,d=((o=t.state.snapThresholdInfo)===null||o===void 0?void 0:o.multiples)||[1,1],f=Z3(s,c[nq],5),h=Z3(a,c[rq],5);return iq(t.state.guidelines,e,n,r,i,f,h,d)}function iq(t,e,n,r,i,a,s,o){return{vertical:V3(t,"vertical",e,s*o[0],r),horizontal:V3(t,"horizontal",n,a*o[1],i)}}function Qge(t,e,n){var r=le(n,2),i=r[0],a=r[1],s=le(e,2),o=s[0],c=s[1],d=le(Ke(n,e),2),f=d[0],h=d[1],g=h>0,v=f>0;f=fx(f),h=fx(h);var b={isSnap:!1,offset:0,pos:0},x={isSnap:!1,offset:0,pos:0};if(f===0&&h===0)return{vertical:b,horizontal:x};var w=J1(t,f?[i]:[],h?[a]:[],[],[],void 0,void 0),_=w.vertical,T=w.horizontal;_.posInfos.filter(function(G){var K=G.pos;return v?K>=o:K<=o}),T.posInfos.filter(function(G){var K=G.pos;return g?K>=c:K<=c}),_.isSnap=_.posInfos.length>0,T.isSnap=T.posInfos.length>0;var N=Jk(_),D=N.isSnap,P=N.guideline,O=Jk(T),C=O.isSnap,I=O.guideline,R=C?I.pos[1]:0,j=D?P.pos[0]:0;if(f===0)C&&(x.isSnap=!0,x.pos=I.pos[1],x.offset=a-x.pos);else if(h===0)D&&(b.isSnap=!0,b.pos=j,b.offset=i-j);else{var L=h/f,B=n[1]-L*i,z=0,Y=0,Z=!1;D?(Y=j,z=L*Y+B,Z=!0):C&&(z=R,Y=(z-B)/L,Z=!0),Z&&(b.isSnap=!0,b.pos=Y,b.offset=i-Y,x.isSnap=!0,x.pos=z,x.offset=a-z)}return{vertical:b,horizontal:x}}function gc(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function L3(t,e,n,r){var i=wI(t.props.snapDirections,e),a=J1(t,i.vertical,i.horizontal,i.verticalNames.map(function(c){return gc(c)}),i.horizontalNames.map(function(c){return gc(c)}),n,r),s=gc(i.horizontalNames[a.horizontal.index]),o=gc(i.verticalNames[a.vertical.index]);return{vertical:ae(ae({},a.vertical),{direction:o}),horizontal:ae(ae({},a.horizontal),{direction:s})}}function Jk(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:s}}function V3(t,e,n,r,i){var a,s;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o=e==="vertical",c=o?0:1,d=n.map(function(h,g){var v=i[g]||"",b=t.map(function(x){var w=x.pos,_=h-w[c];return{offset:_,dist:Ne(_),guideline:x,direction:v}}).filter(function(x){var w=x.guideline,_=x.dist,T=w.type;return!(T!==e||_>r)}).sort(function(x,w){return x.dist-w.dist});return{pos:h,index:g,guidelineInfos:b,direction:v}}).filter(function(h){return h.guidelineInfos.length>0}).sort(function(h,g){return h.guidelineInfos[0].dist-g.guidelineInfos[0].dist}),f=d.length>0;return{isSnap:f,index:f?d[0].index:-1,direction:(s=(a=d[0])===null||a===void 0?void 0:a.direction)!==null&&s!==void 0?s:"",posInfos:d}}function Zge(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(g,v,b){var x=b[v+1]||b[0];a.push(g),a.push([(g[0]+x[0])/2,(g[1]+x[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,De([],le(kge([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var s=a.map(function(g){return mr(e,g)}),o=s.map(function(g){return g[0]}),c=s.map(function(g){return g[1]}),d=J1(t,o,c,a.map(function(g){return gc(g[0])}),a.map(function(g){return gc(g[1])}),r,i),f=gc(a.map(function(g){return g[0]})[d.vertical.index]),h=gc(a.map(function(g){return g[1]})[d.horizontal.index]);return{vertical:ae(ae({},d.vertical),{direction:f}),horizontal:ae(ae({},d.horizontal),{direction:h})}}function aq(t,e){var n=Ne(t.offset),r=Ne(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<wi?1:r<wi?-1:n-r}function lx(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],s=n.offset[e],o=r.offset[e];if(i){if(!a)return-1}else return 1;return aq({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function Jge(t,e,n){var r=[];if(n)Ne(e[0])!==1||Ne(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var c=[s*i[0],o*i[1]];e[0]===c[0]&&e[1]===c[1]||r.push([e,c])})})}else if(t[0]){var a=Ne(e[0])===1?[1]:[1,-1];a.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var a=Ne(e[1])===1?[1]:[1,-1];a.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function sq(t,e){var n=Lk([e[0][0],e[1][0]]),r=Lk([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function SI(t,e){var n=le(e,2),r=n[0],i=n[1],a=i[0]-r[0],s=i[1]-r[1];Ne(a)<wi&&(a=0),Ne(s)<wi&&(s=0);var o,c;if(!a)o=r[0],c=t[0];else if(!s)o=r[1],c=t[1];else{var d=s/a;o=d*(t[0]-r[0])+r[1],c=t[1]}return o-c}function oq(t,e,n,r){return r===void 0&&(r=wi),t.every(function(i){var a=SI(i,e),s=a<=0;return s===n||Ne(a)<=r})}function B3(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function eme(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var c=o.left,d=o.top,f=o.width,h=o.height,g=[[c,d],[c,d+h]],v=[[c,d],[c+f,d]],b=[[c+f,d],[c+f,d+h]],x=[[c,d+h],[c+f,d+h]];if(oq([[c,d],[c+f,d],[c,d+h],[c+f,d+h]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var w=mc(n,s,v,i),_=mc(n,s,x,i),T=mc(n,s,g,a),N=mc(n,s,b,a),D=w.isBound&&_.isBound,P=w.isBound||_.isBound,O=T.isBound&&N.isBound,C=T.isBound||N.isBound,I=yh(w.offset,_.offset),R=yh(T.offset,N.offset),j=[0,0],L=!1,B=!1;return Ne(R)<Ne(I)?(j=[I,0],L=P,B=D):(j=[0,R],L=C,B=O),{isAllBound:B,isVerticalBound:P,isHorizontalBound:C,isBound:L,offset:j}}function mc(t,e,n,r,i,a){var s=le(e,2),o=s[0],c=s[1],d=t[0],f=n[0],h=n[1],g=fx(h[1]-f[1]),v=fx(h[0]-f[0]),b=c,x=o,w=-o/c;if(v){if(!g){if(a&&!b)return{isBound:!1,offset:0};if(x){var D=(f[1]-d[1])/w+d[0];return B3(D,f[0],h[0],r,i)}else{var T=f[1]-d[1],N=Ne(T)<=(i||0);return{isBound:N,offset:N?T:0}}}}else{if(a&&!x)return{isBound:!1,offset:0};if(b){var _=w*(f[0]-d[0])+d[1];return B3(_,f[1],h[1],r,i)}else{var T=f[0]-d[0],N=Ne(T)<=(i||0);return{isBound:N,offset:N?T:0}}}return{isBound:!1,offset:0}}function lq(t,e,n){return e.map(function(r){var i=eme(t,r),a=i.isBound,s=i.offset,o=i.isVerticalBound,c=i.isHorizontalBound,d=r.multiple,f=mo({datas:n,distX:s[0],distY:s[1]}).map(function(h,g){return h*(d[g]?2/d[g]:0)});return{sign:d,isBound:a,isVerticalBound:o,isHorizontalBound:c,isSnap:!1,offset:f}})}function tme(t,e,n){var r,i=_I(t,e,[0,0],!1).map(function(g){return ae(ae({},g),{multiple:g.multiple.map(function(v){return Ne(v)*2})})}),a=lq(t,i,n),s=lx(a,0),o=lx(a,1),c=0,d=0,f=s.isVerticalBound||o.isVerticalBound,h=s.isHorizontalBound||o.isHorizontalBound;return(f||h)&&(r=le(Tge({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),2),c=r[0],d=r[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:h,offset:d}}}function nme(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function _I(t,e,n,r){var i=t.state,a=i.allMatrix,s=i.is3d,o=Ed(a,100,100,s?4:3),c=mr(o,[0,0]);return nme(n,r).map(function(d){var f=le(d,3),h=f[0],g=f[1],v=f[2],b=[mr(o,g),mr(o,v)],x=Xge(b),w=sq(c,b),_=w.vertical,T=w.horizontal,N=SI(c,b)<=0;return{multiple:h,centerSign:N,verticalSign:_,horizontalSign:T,lineConstants:x,line:[mr(e,g),mr(e,v)]}})}function U3(t,e,n,r){var i=r?t.map(function(a){return lv(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var s=SI(n,a)<=0;return!oq(e,a,s)})}function rme(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return Ne(n[0]);if(!a)return Ne(n[1]);var s=a/i;return Ne((-s*n[0]+n[1])/Math.sqrt(Math.pow(s,2)+1))}function ime(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var s=a/i,o=-s*n[0]+n[1];return[-o/(s+1/s),o/(s*s+1)]}function ame(t,e,n,r,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var o=a.left,c=a.top,d=a.width,f=a.height,h=o-r[0],g=o+d-r[0],v=c-r[1],b=c+f-r[1],x=[[h,v],[g,v],[h,b],[g,b]],w=mr(n,[0,0]);if(!U3(n,x,w,0))return[];var _=[],T=x.map(function(N){return[ja(N),Gn([0,0],N)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(N){var D=Gn([0,0],ime(N)),P=rme(N);_.push.apply(_,De([],le(T.filter(function(O){var C=le(O,1),I=C[0];return I&&P<=I}).map(function(O){var C=le(O,2),I=C[0],R=C[1],j=Math.acos(I?P/I:0),L=R+j,B=R-j;return[s+L-D,s+B-D]}).reduce(function(O,C){return O.push.apply(O,De([],le(C),!1)),O},[]).filter(function(O){return!U3(e,x,w,O)}).map(function(O){return at(O*180/Math.PI,wi)})),!1))}),_}function sme(t){var e=t.props.innerBounds,n=Vf();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,s=r.pos3,o=r.pos4,c=[i,a,s,o],d=mr(c,[0,0]),f=e.left,h=e.top,g=e.width,v=e.height,b=[[f,h],[f,h+v]],x=[[f,h],[f+g,h]],w=[[f+g,h],[f+g,h+v]],_=[[f,h+v],[f+g,h+v]],T=_I(t,c,[0,0],!1),N=[],D=[];return T.forEach(function(P){var O=P.line,C=P.lineConstants,I=sq(d,O),R=I.horizontal,j=I.vertical,L=mc(O,C,x,j,1,!0),B=mc(O,C,_,j,1,!0),z=mc(O,C,b,R,1,!0),Y=mc(O,C,w,R,1,!0);L.isBound&&!n.top&&(N.push(h),n.top=!0),B.isBound&&!n.bottom&&(N.push(h+v),n.bottom=!0),z.isBound&&!n.left&&(D.push(f),n.left=!0),Y.isBound&&!n.right&&(D.push(f+g),n.right=!0)}),{boundMap:n,horizontal:N,vertical:D}}function ome(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(Ne(i)<ir&&(i=0),Ne(a)<ir&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var s=a/i,o=t[1]-s*t[0];if(r){var c=s*(e[0]+n)+o;return[n,c-e[1]]}else{var d=(e[1]+n-o)/s;return[d-e[0],n]}}function eC(t,e,n,r,i){var a=ome(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var s=Zo(t,e),o=Zo(a,t),c=Zo(a,e),d=o>s||c>s,f=le(mo({datas:i,distX:a[0],distY:a[1]}),2),h=f[0],g=f[1];return{offset:[h,g],isOutside:d}}function cx(t,e){return t.isBound?t.offset:e.isSnap?Jk(e).offset:0}function lme(t,e,n,r,i){var a=le(e,2),s=a[0],o=a[1],c=le(n,2),d=c[0],f=c[1],h=le(r,2),g=h[0],v=h[1],b=le(i,2),x=b[0],w=b[1],_=-x,T=-w;if(t&&s&&o){_=0,T=0;var N=[];if(d&&f?N.push([0,w],[x,0]):d?N.push([x,0]):f?N.push([0,w]):g&&v?N.push([0,w],[x,0]):g?N.push([x,0]):v&&N.push([0,w]),N.length){N.sort(function(C,I){return ja(Ke([s,o],C))-ja(Ke([s,o],I))});var D=N[0];if(D[0]&&Ne(s)>ir)_=-D[0],T=o*Ne(s+_)/Ne(s)-o;else if(D[1]&&Ne(o)>ir){var P=o;T=-D[1],_=s*Ne(o+T)/Ne(P)-s}if(t&&f&&d)if(Ne(_)>ir&&Ne(_)<Ne(x)){var O=Ne(x)/Ne(_);_*=O,T*=O}else if(Ne(T)>ir&&Ne(T)<Ne(w)){var O=Ne(w)/Ne(T);_*=O,T*=O}else _=yh(-x,_),T=yh(-w,T)}}else _=s||d?-x:0,T=o||f?-w:0;return[_,T]}function cme(t,e,n,r,i,a){if(!Hh(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=AI(a.absolutePoses,[e,n]),o=Ra(s),c=o.left,d=o.right,f=o.top,h=o.bottom,g={horizontal:s.map(function(Y){return Y[1]}),vertical:s.map(function(Y){return Y[0]})},v=xI(t.props.snapDirections),b=wI(v,{left:c,right:d,top:f,bottom:h,center:(c+d)/2,middle:(f+h)/2}),x=ew(t,i,b,g),w=x.vertical,_=x.horizontal,T=tme(t,s,a),N=T.vertical,D=T.horizontal,P=w.isSnap,O=_.isSnap,C=w.isBound||N.isBound,I=_.isBound||D.isBound,R=yh(w.offset,N.offset),j=yh(_.offset,D.offset),L=le(lme(r,[e,n],[C,I],[P,O],[R,j]),2),B=L[0],z=L[1];return[{isBound:C,isSnap:P,offset:B},{isBound:I,isSnap:O,offset:z}]}function ew(t,e,n,r){r===void 0&&(r=n);var i=bI(Z1(t),r.vertical,r.horizontal),a=i.horizontal,s=i.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:J1(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),c=o.horizontal,d=o.vertical,f=cx(a[0],c),h=cx(s[0],d),g=Ne(f),v=Ne(h);return{horizontal:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:g,bounds:a,snap:c},vertical:{isBound:s[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:h,dist:v,bounds:s,snap:d}}}function F3(t,e,n,r,i,a,s){s===void 0&&(s=[1,1]);var o=bI(e,n,r),c=o.horizontal,d=o.vertical,f=iq(t,n,r,[],[],i,a,s),h=f.horizontal,g=f.vertical,v=cx(c[0],h),b=cx(d[0],g),x=Ne(v),w=Ne(b);return{horizontal:{isBound:c[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:v,dist:x,bounds:c,snap:h},vertical:{isBound:d[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:b,dist:w,bounds:d,snap:g}}}function ume(t,e,n,r){var i=Gn(t,e)/Math.PI*180,a=n.vertical,s=a.isBound,o=a.isSnap,c=a.dist,d=n.horizontal,f=d.isBound,h=d.isSnap,g=d.dist,v=i%180,b=v<3||v>177,x=v>87&&v<93;return g<c&&(s||o&&!x&&(!r||!b))?"vertical":f||h&&!b&&(!r||!x)?"horizontal":""}function dme(t,e,n,r,i,a){return n.map(function(s){var o=le(s,2),c=o[0],d=o[1],f=mr(e,c),h=mr(e,d),g=r?fme(t,f,h,i):ew(t,i,{vertical:[h[0]],horizontal:[h[1]]}),v=g.horizontal,b=v.offset,x=v.isBound,w=v.isSnap,_=g.vertical,T=_.offset,N=_.isBound,D=_.isSnap,P=Ke(d,c);if(!T&&!b)return{isBound:N||x,isSnap:D||w,sign:P,offset:[0,0]};var O=ume(f,h,g,r);if(!O)return{sign:P,isBound:!1,isSnap:!1,offset:[0,0]};var C=O==="vertical",I=[0,0];return!r&&Ne(d[0])===1&&Ne(d[1])===1&&c[0]!==d[0]&&c[1]!==d[1]?I=mo({datas:a,distX:-T,distY:-b}):I=eC(f,h,-(C?T:b),C,a).offset,I=I.map(function(R,j){return R*(P[j]?2/P[j]:0)}),{sign:P,isBound:C?N:x,isSnap:C?D:w,offset:I}})}function $3(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function fme(t,e,n,r){var i=$ge(t,e,n),a=i.horizontal,s=i.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Qge(t,e,n),c=o.horizontal,d=o.vertical,f=$3(a,c),h=$3(s,d),g=Ne(f),v=Ne(h);return{horizontal:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:g},vertical:{isBound:s.isBound,isSnap:d.isSnap,offset:h,dist:v}}}function hme(t,e,n,r,i){var a=[-n[0],-n[1]],s=t.state,o=s.width,c=s.height,d=t.props.bounds,f=1/0,h=1/0;if(d){var g=[[n[0],-n[1]],[-n[0],n[1]]],v=d.left,b=v===void 0?-1/0:v,x=d.top,w=x===void 0?-1/0:x,_=d.right,T=_===void 0?1/0:_,N=d.bottom,D=N===void 0?1/0:N;g.forEach(function(P){var O=P[0]!==a[0],C=P[1]!==a[1],I=mr(e,P),R=Gn(r,I)*360/Math.PI;if(C){var j=I.slice();(Ne(R-360)<2||Ne(R-180)<2)&&(j[1]=r[1]);var L=eC(r,j,(r[1]<I[1]?D:w)-I[1],!1,i),B=le(L.offset,2),z=B[1],Y=L.isOutside;isNaN(z)||(h=c+(Y?1:-1)*Ne(z))}if(O){var j=I.slice();(Ne(R-90)<2||Ne(R-270)<2)&&(j[0]=r[0]);var Z=eC(r,j,(r[0]<I[0]?T:b)-I[0],!0,i),G=le(Z.offset,1),K=G[0],X=Z.isOutside;isNaN(K)||(f=o+(X?1:-1)*Ne(K))}})}return{maxWidth:f,maxHeight:h}}var hi={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,s=t.getState(),o=s.dragInfo,c=s.beforeOrigin;if(r||!i||!o)return[];var d=o.dist;if(!d[0]&&!d[1])return[];var f=ja(d),h=Gn(d,[0,0]);return[e.createElement("div",{className:We("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(h,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,s=a.gestos,o=a.style;if(s.draggable)return!1;s.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],_d(t,e),Q1(t,e,"translate"),Pme(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var c=dt(t,e,ae({set:function(f){n.startValue=f}},X1(t,e))),d=r||Ve(t,"onDragStart",c);return d!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?c:!1},drag:function(t,e){if(e){Y1(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,s=e.deltaOffset,o=e.useSnap,c=e.isRequest,d=e.isGroup,f=e.parentThrottleDrag,h=e.distX,g=e.distY,v=n.isDrag,b=n.prevDist,x=n.prevBeforeDist,w=n.startValue;if(v){s&&(h+=s[0],g+=s[1]);var _=t.props,T=_.parentMoveable,N=d?0:_.throttleDrag||f||0,D=r?0:_.throttleDragRotate||0,P=0,O=!1,C=!1,I=!1,R=!1;if(!r&&D>0&&(h||g)){var j=_.startDragRotate||0,L=at(j+Gn([0,0],[h,g])*180/Math.PI,D)-j,B=g*Math.abs(Math.cos((L-90)/180*Math.PI)),z=h*Math.abs(Math.cos(L/180*Math.PI)),Y=ja([z,B]);P=L*Math.PI/180,h=Y*Math.cos(P),g=Y*Math.sin(P)}if(!a&&!r&&!i){var Z=le(cme(t,h,g,D,!o&&c||s,n),2),G=Z[0],K=Z[1];O=G.isSnap,C=G.isBound,I=K.isSnap,R=K.isBound;var X=G.offset,ee=K.offset;h+=X,g+=ee}var J=Ct($7({datas:n,distX:h,distY:g}),w),F=Ct(Ege({datas:n,distX:h,distY:g}),w);S3(F,wi),S3(J,wi),D||(!O&&!C&&(F[0]=at(F[0],N),J[0]=at(J[0],N)),!I&&!R&&(F[1]=at(F[1],N),J[1]=at(J[1],N)));var Q=Ke(J,w),te=Ke(F,w),W=Ke(te,b),ue=Ke(Q,x);n.prevDist=te,n.prevBeforeDist=Q,n.passDelta=W,n.passDist=te;var re=n.left+Q[0],oe=n.top+Q[1],we=n.right-Q[0],se=n.bottom-Q[1],Ee=K1(n,"translate(".concat(F[0],"px, ").concat(F[1],"px)"),"translate(".concat(te[0],"px, ").concat(te[1],"px)"));if(vI(e,Ee),t.state.dragInfo.dist=r?[0,0]:te,!(!r&&!T&&W.every(function(Se){return!Se})&&ue.some(function(Se){return!Se}))){var ge=t.state,ne=ge.width,Ie=ge.height,ye=dt(t,e,ae({transform:Ee,dist:te,delta:W,translate:F,beforeDist:Q,beforeDelta:ue,beforeTranslate:J,left:re,top:oe,right:we,bottom:se,width:ne,height:Ie,isPinch:a},vi({transform:Ee},e)));return!r&&Ve(t,"onDrag",ye),ye}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,ae(ae({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=la(t,e,{});return!n&&Ve(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var c=qE(t,this,"dragStart",[a||0,s||0],e,!1,"draggable"),d=c.childEvents,f=c.eventParams,h=ae(ae({},o),{targets:t.props.targets,events:f}),g=Ve(t,"onDragGroupStart",h);i.isDrag=g!==!1;var v=(r=(n=d[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[v[0]%1,v[1]%1],i.isDrag?o:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,ae(ae({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=qE(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var s=ae({targets:t.props.targets,events:a},r);return Ve(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=qE(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Ve(t,"onDragGroupEnd",la(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(s){return a=s.useSnap,{datas:e,useSnap:a}},request:function(s){return"x"in s?r=s.x-n.left:"deltaX"in s&&(r+=s.deltaX),"y"in s?i=s.y-n.top:"deltaY"in s&&(i+=s.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function cq(t,e){var n=mr(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function pme(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=[i/2*(1+e[0]),a/2*(1+e[1])],c=An(n,o,s),d=[0,0];return{fixedPosition:c,fixedDirection:e,fixedOffset:d}}function uq(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=Pge(e,i,a),c=An(n,e,s),d=[i?0:e[0],a?0:e[1]];return{fixedPosition:c,fixedDirection:o,fixedOffset:d}}var q3=NI("resizable"),tC={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:Q7("resizable"),dragControlCondition:q3,viewClassName:CI("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,s=e.parentDirection,o=e.parentGesto,c=e.datas,d=e.parentFixedDirection,f=e.parentEvent,h=_q(s,i,r,c),g=t.state,v=g.target,b=g.width,x=g.height,w=g.gestos;if(!h||!v||w.resizable)return!1;w.resizable=o||t.controlGesto,!i&&_d(t,e),c.datas={},c.direction=h,c.startOffsetWidth=b,c.startOffsetHeight=x,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=g.inlineCSSWidth||g.cssWidth,c.startHeight=g.inlineCSSHeight||g.cssHeight,c.maxSize=[1/0,1/0],a||(c.minSize=[g.minOffsetWidth,g.minOffsetHeight],c.maxSize=[g.maxOffsetWidth,g.maxOffsetHeight]);var _=t.props.transformOrigin||"% %";c.transformOrigin=Vi(_)?_.split(" "):_,c.startOffsetMatrix=g.offsetMatrix,c.startTransformOrigin=g.transformOrigin,c.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!h[0]&&!h[1]||h[0]||!h[1];function T(R){c.ratio=R&&isFinite(R)?R:0}c.startPositions=za(t.state);function N(R){var j=cq(c.startPositions,R);c.fixedDirection=j.fixedDirection,c.fixedPosition=j.fixedPosition,c.fixedOffset=j.fixedOffset}function D(R){var j=uq(t.state,R);c.fixedDirection=j.fixedDirection,c.fixedPosition=j.fixedPosition,c.fixedOffset=j.fixedOffset}function P(R){c.minSize=[Xt("".concat(R[0]),0)||0,Xt("".concat(R[1]),0)||0]}function O(R){var j=[R[0]||1/0,R[1]||1/0];(!ph(j[0])||isFinite(j[0]))&&(j[0]=Xt("".concat(j[0]),0)||1/0),(!ph(j[1])||isFinite(j[1]))&&(j[1]=Xt("".concat(j[1]),0)||1/0),c.maxSize=j}T(b/x),N(d||[-h[0],-h[1]]),c.setFixedDirection=N,c.setFixedPosition=D,c.setMin=P,c.setMax=O;var C=dt(t,e,{direction:h,startRatio:c.ratio,set:function(R){var j=le(R,2),L=j[0],B=j[1];c.startWidth=L,c.startHeight=B},setMin:P,setMax:O,setRatio:T,setFixedDirection:N,setFixedPosition:D,setOrigin:function(R){c.transformOrigin=R},dragStart:hi.dragStart(t,new mh().dragStart([0,0],e))}),I=f||Ve(t,"onResizeStart",C);return c.startFixedDirection=c.fixedDirection,c.startFixedPosition=c.fixedPosition,I!==!1&&(c.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:h}),c.isResize?C:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,c=e.parentDist,d=e.useSnap,f=e.isRequest,h=e.isGroup,g=e.parentEvent,v=e.resolveMatrix,b=r.isResize,x=r.transformOrigin,w=r.startWidth,_=r.startHeight,T=r.prevWidth,N=r.prevHeight,D=r.minSize,P=r.maxSize,O=r.ratio,C=r.startOffsetWidth,I=r.startOffsetHeight,R=r.isWidth;if(!b)return;if(v){var j=t.state.is3d,L=r.startOffsetMatrix,B=r.startTransformOrigin,z=j?4:3,Y=hm(sx(e)),Z=Math.sqrt(Y.length);z!==Z&&(Y=ys(Y,Z,z));var G=hv(L,Y,B,z),K=Ed(G,C,I,z);r.startPositions=K,r.nextTargetMatrix=Y,r.nextAllMatrix=G}var X=od(t.props,"resizable"),ee=X.resizeFormat,J=X.throttleResize,F=J===void 0?i?0:1:J,Q=X.parentMoveable,te=X.keepRatioFinally,W=r.direction,ue=W,re=0,oe=0;!W[0]&&!W[1]&&(ue=[1,1]);var we=O&&(s??X.keepRatio)||!1;function se(){var ht=r.fixedDirection,Vt=Nq(ue,we,r,e);re=Vt.distWidth,oe=Vt.distHeight;var Yr=ue[0]-ht[0]||we?Math.max(C+re,wi):C,Kr=ue[1]-ht[1]||we?Math.max(I+oe,wi):I;return we&&C&&I&&(R?Kr=Yr/O:Yr=Kr*O),[Yr,Kr]}var Ee=le(se(),2),ge=Ee[0],ne=Ee[1];g||(r.setFixedDirection(r.fixedDirection),Ve(t,"onBeforeResize",dt(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(ht){var Vt;return r.setFixedDirection(ht),Vt=le(se(),2),ge=Vt[0],ne=Vt[1],[ge,ne]},setFixedPosition:function(ht){var Vt;return r.setFixedPosition(ht),Vt=le(se(),2),ge=Vt[0],ne=Vt[1],[ge,ne]},boundingWidth:ge,boundingHeight:ne,setSize:function(ht){var Vt;Vt=le(ht,2),ge=Vt[0],ne=Vt[1]}},!0)));var Ie=o;o||(!i&&a?Ie=jge(t,[0,0]):Ie=r.fixedPosition);var ye=[0,0];a||(ye=Ime(t,ge,ne,W,Ie,!d&&f,r)),c&&(!c[0]&&(ye[0]=0),!c[1]&&(ye[1]=0));function Se(){var ht;ee&&(ht=le(ee([ge,ne]),2),ge=ht[0],ne=ht[1]),ge=at(ge,F),ne=at(ne,F)}if(we){ue[0]&&ue[1]&&ye[0]&&ye[1]&&(Ne(ye[0])>Ne(ye[1])?ye[1]=0:ye[0]=0);var Oe=!ye[0]&&!ye[1];Oe&&Se(),ue[0]&&!ue[1]||ye[0]&&!ye[1]||Oe&&R?(ge+=ye[0],ne=ge/O):(!ue[0]&&ue[1]||!ye[0]&&ye[1]||Oe&&!R)&&(ne+=ye[1],ge=ne*O)}else ge+=ye[0],ne+=ye[1],ge=Math.max(0,ge),ne=Math.max(0,ne);n=le(t7([ge,ne],D,P,we?O:!1),2),ge=n[0],ne=n[1],Se(),we&&(h||te)&&(R?ne=ge/O:ge=ne*O),re=ge-C,oe=ne-I;var Pe=[re-T,oe-N];r.prevWidth=re,r.prevHeight=oe;var Ge=Mge(t,ge,ne,Ie,x,r);if(!(!Q&&Pe.every(function(ht){return!ht})&&Ge.every(function(ht){return!ht}))){var je=hi.drag(t,fv(e,t.state,Ge,!!a,!1,"draggable")),Je=je.transform,Lt=w+re,Ln=_+oe,Sn=dt(t,e,ae({width:Lt,height:Ln,offsetWidth:Math.round(ge),offsetHeight:Math.round(ne),startRatio:O,boundingWidth:ge,boundingHeight:ne,direction:W,dist:[re,oe],delta:Pe,isPinch:!!a,drag:je},Tq({style:{width:"".concat(Lt,"px"),height:"".concat(Ln,"px")},transform:Je},je,e)));return!g&&Ve(t,"onResize",Sn),Sn}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var c=t.state,d=c.width,f=c.height,h=d-(i+s),g=f-(a+o),v=Ne(h)>3,b=Ne(g)>3;if(v&&(n.startWidth+=h,n.startOffsetWidth+=h,n.prevWidth+=h),b&&(n.startHeight+=g,n.startOffsetHeight+=g,n.prevHeight+=g),v||b)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=la(t,e,{});return!r&&Ve(t,"onResizeEnd",i),i}},dragGroupControlCondition:q3,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,ae(ae({},e),{isGroup:!0}));if(!r)return!1;var i=hs(t,"resizable",e),a=n.startOffsetWidth,s=n.startOffsetHeight;function o(){var v=n.minSize;i.forEach(function(b){var x=b.datas,w=x.minSize,_=x.startOffsetWidth,T=x.startOffsetHeight,N=a*(_?w[0]/_:0),D=s*(T?w[1]/T:0);v[0]=Math.max(v[0],N),v[1]=Math.max(v[1],D)})}function c(){var v=n.maxSize;i.forEach(function(b){var x=b.datas,w=x.maxSize,_=x.startOffsetWidth,T=x.startOffsetHeight,N=a*(_?w[0]/_:0),D=s*(T?w[1]/T:0);v[0]=Math.min(v[0],N),v[1]=Math.min(v[1],D)})}var d=Jo(t,this,"dragControlStart",e,function(v,b){return ox(t,v,n,b)});o(),c();var f=function(v){r.setFixedDirection(v),d.forEach(function(b,x){b.setFixedDirection(v),ox(t,b.moveable,n,i[x])})};n.setFixedDirection=f;var h=ae(ae({},r),{targets:t.props.targets,events:d.map(function(v){return ae(ae({},v),{setMin:function(b){v.setMin(b),o()},setMax:function(b){v.setMax(b),c()}})}),setFixedDirection:f,setMin:function(v){r.setMin(v),o()},setMax:function(v){r.setMax(v),c()}}),g=Ve(t,"onResizeGroupStart",h);return n.isResize=g!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=od(t.props,"resizable");nw(t,"onBeforeResize",function(v){Ve(t,"onBeforeResizeGroup",dt(t,e,ae(ae({},v),{targets:r.targets}),!0))});var i=this.dragControl(t,ae(ae({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,s=i.boundingHeight,o=i.dist,c=r.keepRatio,d=[a/(a-o[0]),s/(s-o[1])],f=n.fixedPosition,h=Jo(t,this,"dragControl",e,function(v,b){var x=le(oi(cv(t.rotation/180*Math.PI,3),[b.datas.originalX*d[0],b.datas.originalY*d[1],1],3),2),w=x[0],_=x[1];return ae(ae({},b),{parentDist:null,parentScale:d,dragClient:Ct(f,[w,_]),parentKeepRatio:c})}),g=ae({targets:r.targets,events:h},i);return Ve(t,"onResizeGroup",g),g}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=Jo(t,this,"dragControlEnd",e),a=la(t,e,{targets:t.props.targets,events:i});return Ve(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(s){var o;return i=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(o=s?.horizontal)!==null&&o!==void 0?o:!0,useSnap:i}},request:function(s){return"offsetWidth"in s?n=s.offsetWidth-a.offsetWidth:"deltaWidth"in s&&(n+=s.deltaWidth),"offsetHeight"in s?r=s.offsetHeight-a.offsetHeight:"deltaHeight"in s&&(r+=s.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:s.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function GE(t,e,n,r,i){var a=t.props.groupable,s=t.state,o=s.is3d?4:3,c=e.origin,d=An(t.state.rootMatrix,Ke([c[0],c[1]],a?[0,0]:[s.left,s.top]),o),f=Ct([i.left,i.top],d);e.startAbsoluteOrigin=f,e.prevDeg=Gn(f,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Zo(f,[n,r])}function xb(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,s=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++s:a<t&&a<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function HE(t,e,n,r){return xb(Gn(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function WE(t,e,n,r,i,a){var s=t.props.throttleRotate,o=s===void 0?0:s,c=n.prevSnapDeg,d=0,f=!1;if(a){var h=Nme(t,e,r,i+r);f=h.isSnap,d=i+h.dist}f||(d=at(i+r,o));var g=d-i;return n.prevSnapDeg=g,[g-c,g,d]}function dq(t,e,n){var r=le(e,4),i=r[0],a=r[1],s=r[2],o=r[3];if(t==="none")return[];if(cr(t))return t.map(function(w){return dq(w,[i,a,s,o],n)[0]});var c=le((t||"top").split("-"),2),d=c[0],f=c[1],h=[i,a];d==="left"?h=[s,i]:d==="right"?h=[a,o]:d==="bottom"&&(h=[o,s]);var g=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2],v=wq(h,n);if(f){var b=f==="top"||f==="left",x=d==="bottom"||d==="left";g=h[b&&!x||!b&&x?0:1]}return[[g,v]]}function nC(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(gr(n,We("rotation-control"))||t.props.rotateAroundControls&&gr(n,We("around-control"))||gr(n,We("control"))&&gr(n,We("rotatable")))return!0;var r=t.props.rotationTarget;return r?II(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var gme=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,mme={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[gme],viewClassName:function(t){return t.isDragging("rotatable")?We("view-rotation-dragging"):""},render:function(t,e){var n=od(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,c=n.resolveAblesWithRotatable,d=t.getState(),f=d.renderPoses,h=d.direction;if(!r)return null;var g=dq(i,f,h),v=[];if(g.forEach(function(_,T){var N=le(_,2),D=N[0],P=N[1];v.push(e.createElement("div",{key:"rotation".concat(T),className:We("rotation"),style:{transform:"translate(-50%) translate(".concat(D[0],"px, ").concat(D[1],"px) rotate(").concat(P,"rad)")}},e.createElement("div",{className:We("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:We("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var b=dl(c||{}),x={};b.forEach(function(_){c[_].forEach(function(T){x[T]=_})});var w=[];cr(s)&&(w=s.map(function(_){var T=x[_];return{data:T?{resolve:T}:{},classNames:T?["move"]:[],dir:_}})),v.push.apply(v,De([],le(Y7(t,"rotatable",w,e)),!1))}return o&&v.push.apply(v,De([],le(J7(t,e)),!1)),v},dragControlCondition:nC,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=e.parentRotate,c=e.parentFlag,d=e.isPinch,f=e.isRequest,h=t.state,g=h.target,v=h.left,b=h.top,x=h.direction,w=h.beforeDirection,_=h.targetTransform,T=h.moveableClientRect,N=h.offsetMatrix,D=h.targetMatrix,P=h.allMatrix,O=h.width,C=h.height;if(!f&&!g)return!1;var I=t.getRect();i.rect=I,i.transform=_,i.left=v,i.top=b;var R=function(ue){var re=uq(t.state,ue);i.fixedDirection=re.fixedDirection,i.fixedOffset=re.fixedOffset,i.fixedPosition=re.fixedPosition,F&&F.setFixedPosition(ue)},j=function(ue){var re=pme(t.state,ue);i.fixedDirection=re.fixedDirection,i.fixedOffset=re.fixedOffset,i.fixedPosition=re.fixedPosition,F&&F.setFixedDirection(ue)},L=a,B=s;if(f||d||c){var z=o||0;i.beforeInfo={origin:I.beforeOrigin,prevDeg:z,defaultDeg:z,prevSnapDeg:0,startDist:0},i.afterInfo=ae(ae({},i.beforeInfo),{origin:I.origin}),i.absoluteInfo=ae(ae({},i.beforeInfo),{origin:I.origin,startValue:z})}else{var Y=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(Y){var Z=Y.getAttribute("data-direction")||"",G=Sge[Z];if(G){i.isControl=!0,i.isAroundControl=gr(Y,We("around-control")),i.controlDirection=G;var K=Y.getAttribute("data-resolve");K&&(i.resolveAble=K);var X=Gme(h.rootMatrix,h.renderPoses,T);n=le(mr(X,G),2),L=n[0],B=n[1]}}i.beforeInfo={origin:I.beforeOrigin},i.afterInfo={origin:I.origin},i.absoluteInfo={origin:I.origin,startValue:I.rotation};var ee=R;R=function(ue){var re=h.is3d?4:3,oe=le(Ct(k7(D,re),ue),2),we=oe[0],se=oe[1],Ee=oi(N,id([we,se],re)),ge=oi(P,id([ue[0],ue[1]],re));ee(ue);var ne=h.posDelta;i.beforeInfo.origin=Ke(Ee,ne),i.afterInfo.origin=Ke(ge,ne),i.absoluteInfo.origin=Ke(ge,ne),GE(t,i.beforeInfo,L,B,T),GE(t,i.afterInfo,L,B,T),GE(t,i.absoluteInfo,L,B,T)},j=function(ue){var re=mr([[0,0],[O,0],[0,C],[O,C]],ue);R(re)}}i.startClientX=L,i.startClientY=B,i.direction=x,i.beforeDirection=w,i.startValue=0,i.datas={},Q1(t,e,"rotate");var J=!1,F=!1;if(i.isControl&&i.resolveAble){var Q=i.resolveAble;Q==="resizable"&&(F=tC.dragControlStart(t,ae(ae({},new mh("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}F||(J=hi.dragStart(t,new mh().dragStart([0,0],e))),R(Hme(t));var te=dt(t,e,ae(ae({set:function(ue){i.startValue=ue*Math.PI/180},setFixedDirection:j,setFixedPosition:R},X1(t,e)),{dragStart:J,resizeStart:F})),W=Ve(t,"onRotateStart",te);return i.isRotate=W!==!1,h.snapRenderInfo={request:e.isRequest},i.isRotate?te:!1},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.clientDistX,o=e.clientDistY,c=e.parentRotate,d=e.parentFlag,f=e.isPinch,h=e.groupDelta,g=e.resolveMatrix,v=a.beforeDirection,b=a.beforeInfo,x=a.afterInfo,w=a.absoluteInfo,_=a.isRotate,T=a.startValue,N=a.rect,D=a.startClientX,P=a.startClientY;if(_){Y1(t,e,"rotate");var O=_ge(e),C=v*O,I=t.props.parentMoveable,R=0,j,L,B=0,z,Y,Z=0,G,K,X=180/Math.PI*T,ee=w.startValue,J=!1,F=D+s,Q=P+o;if(!d&&"parentDist"in e){var te=e.parentDist;j=te,z=te,G=te}else f||d?(j=xb(c,v,b),z=xb(c,C,x),G=xb(c,C,w)):(j=HE(F,Q,v,b),z=HE(F,Q,C,x),G=HE(F,Q,C,w),J=!0);if(L=X+j,Y=X+z,K=ee+G,Ve(t,"onBeforeRotate",dt(t,e,{beforeRotation:L,rotation:Y,absoluteRotation:K,setRotation:function(Ie){z=Ie-X,j=z,G=z}},!0)),n=le(WE(t,N,b,j,X,J),3),R=n[0],j=n[1],L=n[2],r=le(WE(t,N,x,z,X,J),3),B=r[0],z=r[1],Y=r[2],i=le(WE(t,N,w,G,ee,J),3),Z=i[0],G=i[1],K=i[2],!(!Z&&!B&&!R&&!I&&!g)){var W=K1(a,"rotate(".concat(Y,"deg)"),"rotate(".concat(z,"deg)"));g&&(a.fixedPosition=yI(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var ue=Rge(t,z,a),re=Ke(Ct(h||[0,0],ue),a.prevInverseDist||[0,0]);a.prevInverseDist=ue,a.requestValue=null;var oe=G7(t,W,re,f,e),we=oe,se=Zo([F,Q],w.startAbsoluteOrigin)-w.startDist,Ee=void 0;if(a.resolveAble==="resizable"){var ge=tC.dragControl(t,ae(ae({},fv(e,t.state,[e.deltaX,e.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:se}));ge&&(Ee=ge,we=Tq(we,ge,e))}var ne=dt(t,e,ae(ae({delta:B,dist:z,rotate:Y,rotation:Y,beforeDist:j,beforeDelta:R,beforeRotate:L,beforeRotation:L,absoluteDist:G,absoluteDelta:Z,absoluteRotate:K,absoluteRotation:K,isPinch:!!f,resize:Ee},oe),we));return Ve(t,"onRotate",ne),ne}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=la(t,e,{});return Ve(t,"onRotateEnd",r),r}},dragGroupControlCondition:nC,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var c=Jo(t,this,"dragControlStart",e,function(h,g){var v=h.state,b=v.left,x=v.top,w=v.beforeOrigin,_=Ct(Ke([b,x],[i,a]),Ke(w,s));return g.datas.startGroupClient=_,g.datas.groupClient=_,ae(ae({},g),{parentRotate:0})}),d=ae(ae({},o),{targets:t.props.targets,events:c}),f=Ve(t,"onRotateGroupStart",d);return n.isRotate=f!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){nw(t,"onBeforeRotate",function(d){Ve(t,"onBeforeRotateGroup",dt(t,e,ae(ae({},d),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,s=a/180*Math.PI,o=Jo(t,this,"dragControl",e,function(d,f){var h=f.datas.startGroupClient,g=le(f.datas.groupClient,2),v=g[0],b=g[1],x=le(lv(h,s*i),2),w=x[0],_=x[1],T=[w-v,_-b];return f.datas.groupClient=[w,_],ae(ae({},f),{parentRotate:a,groupDelta:T})});t.rotation=i*r.beforeRotation;var c=ae({targets:t.props.targets,events:o,set:function(d){t.rotation=d},setGroupRotation:function(d){t.rotation=d}},r);return Ve(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=Jo(t,this,"dragControlEnd",e),a=la(t,e,{targets:t.props.targets,events:i});return Ve(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function vme(t,e){var n,r=t.direction,i=t.classNames,a=t.size,s=t.pos,o=t.zoom,c=t.key,d=r==="horizontal",f=d?"Y":"X";return e.createElement("div",{key:c,className:i.join(" "),style:(n={},n[d?"width":"height"]="".concat(a),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(o,")"),n)})}function EI(t,e){return vme(ae(ae({},t),{classNames:De([We("line","guideline",t.direction)],le(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(at(n,.1),"px")})}),e)}function G3(t,e,n,r,i,a,s,o){var c=t.props.zoom;return n.map(function(d,f){var h=d.type,g=d.pos,v=[0,0];return v[s]=r,v[s?0:1]=-i+g,EI({key:"".concat(e,"TargetGuideline").concat(f),classNames:[We("target","bold",h)],posValue:v,sizeValue:a,zoom:c,direction:e},o)})}function H3(t,e,n,r,i,a){var s=t.props,o=s.zoom,c=s.isDisplayInnerSnapDigit,d=e==="horizontal"?zc:Lc,f=i[d.start],h=i[d.end];return n.filter(function(g){var v=g.hide,b=g.elementRect;if(v)return!1;if(c&&b){var x=b.rect;if(x[d.start]<=f&&h<=x[d.end])return!1}return!0}).map(function(g,v){var b=g.pos,x=g.size,w=g.element,_=g.className,T=[-r[0]+b[0],-r[1]+b[1]];return EI({key:"".concat(e,"-default-guideline-").concat(v),classNames:w?[We("bold"),_]:[We("normal"),_],direction:e,posValue:T,sizeValue:x,zoom:o},a)})}function Tg(t,e,n,r,i,a,s,o){var c,d=t.props,f=d.snapDigit,h=f===void 0?0:f,g=d.isDisplaySnapDigit,v=g===void 0?!0:g,b=d.snapDistFormat,x=b===void 0?function(P,O){return P}:b,w=d.zoom,_=e==="horizontal"?"X":"Y",T=e==="vertical"?"height":"width",N=Math.abs(i),D=v?parseFloat(N.toFixed(h)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:We("guideline-group",e),style:(c={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},c[T]="".concat(N,"px"),c)},EI({direction:e,classNames:[We(n),s],size:"100%",posValue:[0,0],sizeValue:N,zoom:w},o),o.createElement("div",{className:We("size-value","gap"),style:{transform:"translate".concat(_,"(-50%) scale(").concat(w,")")}},D>0?x(D,e):""))}function yme(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,s=i?zc:Lc,o=n[s.start],c=n[s.end];return Aq(e,function(d){return d.pos[i]}).map(function(d){var f=[],h=[],g=[];return d.forEach(function(v){var b,x,w=v.element,_=v.elementRect.rect;if(_[s.end]<o)f.push(v);else if(c<_[s.start])h.push(v);else if(_[s.start]<=o&&c<=_[s.end]&&r){var T=v.pos,N={element:w,rect:ae(ae({},_),(b={},b[s.end]=_[s.start],b))},D={element:w,rect:ae(ae({},_),(x={},x[s.start]=_[s.end],x))},P=[0,0],O=[0,0];P[i]=T[i],P[a]=T[a],O[i]=T[i],O[a]=T[a]+v.size,f.push({type:t,pos:P,size:0,elementRect:N,direction:"",elementDirection:"end"}),h.push({type:t,pos:O,size:0,elementRect:D,direction:"",elementDirection:"start"})}}),f.sort(function(v,b){return b.pos[a]-v.pos[a]}),h.sort(function(v,b){return v.pos[a]-b.pos[a]}),{total:d,start:f,end:h,inner:g}})}function bme(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var c=e.filter(function(w){return w.type===o}),d=o==="vertical"?1:0,f=d?0:1,h=yme(o,c,r,a),g=d?Lc:zc,v=d?zc:Lc,b=r[g.start],x=r[g.end];h.forEach(function(w){var _=w.total,T=w.start,N=w.end,D=w.inner,P=n[f]+_[0].pos[f]-r[v.start],O=r;T.forEach(function(C){var I=C.elementRect.rect,R=O[g.start]-I[g.end];if(R>0){var j=[0,0];j[d]=n[d]+O[g.start]-b-R,j[f]=P,s.push(Tg(t,o,"dashed",s.length,R,j,C.className,i))}O=I}),O=r,N.forEach(function(C){var I=C.elementRect.rect,R=I[g.start]-O[g.end];if(R>0){var j=[0,0];j[d]=n[d]+O[g.end]-b,j[f]=P,s.push(Tg(t,o,"dashed",s.length,R,j,C.className,i))}O=I}),D.forEach(function(C){var I=C.elementRect.rect,R=b-I[g.start],j=I[g.end]-x,L=[0,0],B=[0,0];L[d]=n[d]-R,L[f]=P,B[d]=n[d]+x-b,B[f]=P,s.push(Tg(t,o,"dashed",s.length,R,L,C.className,i)),s.push(Tg(t,o,"dashed",s.length,j,B,C.className,i))})})}),s}function xme(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(w){return w.type===s}).slice(0,1),c=s==="vertical"?0:1,d=c?0:1,f=c?Lc:zc,h=c?zc:Lc,g=r[f.start],v=r[f.end],b=r[h.start],x=r[h.end];o.forEach(function(w){var _=w.gap,T=w.gapRects,N=Math.max.apply(Math,De([b],le(T.map(function(O){var C=O.rect;return C[h.start]})),!1)),D=Math.min.apply(Math,De([x],le(T.map(function(O){var C=O.rect;return C[h.end]})),!1)),P=(N+D)/2;N===D||P===(b+x)/2||T.forEach(function(O){var C=O.rect,I=O.className,R=[n[0],n[1]];if(C[f.end]<g)R[c]+=C[f.end]-g;else if(v<C[f.start])R[c]+=C[f.start]-g-_;else return;R[d]+=P-b,a.push(Tg(t,c?"vertical":"horizontal","gap",a.length,_,R,I,i))})})}),a}function rC(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,s=i.overflow,o=i.scrollHeight,c=i.scrollWidth,d=i.clientHeight,f=i.clientWidth,h=i.clientLeft,g=i.clientTop,v=t.props,b=v.snapGap,x=b===void 0?!0:b,w=v.verticalGuidelines,_=v.horizontalGuidelines,T=v.snapThreshold,N=T===void 0?5:T,D=v.maxSnapElementGuidelineDistance,P=D===void 0?1/0:D,O=v.isDisplayGridGuidelines,C=Ra(za(t.state)),I=C.top,R=C.left,j=C.bottom,L=C.right,B={top:I,left:R,bottom:j,right:L,center:(R+L)/2,middle:(I+j)/2},z=Eme(t),Y=De([],le(z),!1),Z=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(ee){return ee*N});x&&Y.push.apply(Y,De([],le(wme(t,B,Z)),!1));var G=ae({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(Y.push.apply(Y,De([],le(_me(t,s?c:f,s?o:d,h,g,G,O)),!1)),a){var K=i.left,X=i.top;G.left+=K,G.top+=X,G.right+=K,G.bottom+=X}return Y.push.apply(Y,De([],le(hq(_||!1,w||!1,s?c:f,s?o:d,h,g,G)),!1)),Y=Y.filter(function(ee){var J=ee.element,F=ee.elementRect,Q=ee.type;if(!J||!F)return!0;var te=F.rect;return fq(B,te,Q,P)}),Y}function wme(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,c=t.state.elementRects,d=[];return[["vertical",zc,Lc],["horizontal",Lc,zc]].forEach(function(f){var h=le(f,3),g=h[0],v=h[1],b=h[2],x=e[v.start],w=e[v.end],_=e[v.center],T=e[b.start],N=e[b.end],D={left:n[0],top:n[1]};function P(I){var R=I.rect,j=D[v.start];return R[v.end]<x+j?x-R[v.end]:w-j<R[v.start]?R[v.start]-w:-1}var O=c.filter(function(I){var R=I.rect;return R[b.start]>N||R[b.end]<T?!1:P(I)>0}).sort(function(I,R){return P(I)-P(R)}),C=[];O.forEach(function(I){O.forEach(function(R){if(I!==R){var j=I.rect,L=R.rect,B=j[b.start],z=j[b.end],Y=L[b.start],Z=L[b.end];B>Z||Y>z||C.push([I,R])}})}),C.forEach(function(I){var R=le(I,2),j=R[0],L=R[1],B=j.rect,z=L.rect,Y=B[v.start],Z=B[v.end],G=z[v.start],K=z[v.end],X=D[v.start],ee=0,J=0,F=!1,Q=!1,te=!1;if(Z<=x&&w<=G){if(Q=!0,ee=(G-Z-(w-x))/2,J=Z+ee+(w-x)/2,Ne(J-_)>X)return}else if(Z<G&&K<x+X){if(F=!0,ee=G-Z,J=K+ee,Ne(J-x)>X)return}else if(Z<G&&w-X<Y){if(te=!0,ee=G-Z,J=Y-ee,Ne(J-w)>X)return}else return;ee&&fq(e,z,g,a)&&(ee>o||d.push({type:g,pos:g==="vertical"?[J,0]:[0,J],element:L.element,size:0,className:L.className,isStart:F,isCenter:Q,isEnd:te,gap:ee,hide:!0,gapRects:[j,L],direction:"",elementDirection:""}))})}),d}function Sme(t,e,n,r){var i,a,s=t.props,o=t.state,c=s.snapGridAll,d=s.snapGridWidth,f=d===void 0?0:d,h=s.snapGridHeight,g=h===void 0?0:h,v=o.snapRenderInfo,b=v&&(((i=v.direction)===null||i===void 0?void 0:i[0])||((a=v.direction)===null||a===void 0?void 0:a[1])),x=t.moveables;if(c&&x&&b&&(f||g)){if(o.snapThresholdInfo)return;o.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var w=t.getRect(),_=w.children,T=v.direction;if(_){var N=T.map(function(P,O){var C=O===0?{snapSize:f,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:g,posName:"top",sizeName:"height",clientOffset:r.top-n},I=C.snapSize,R=C.posName,j=C.sizeName,L=C.clientOffset;if(!I)return{dir:P,multiple:1,snapSize:I,snapOffset:0};var B=w[j],z=w[R],Y=n7(_.map(function(F){return[F[R]-z,F[j],B-F[j]-F[R]+z]})).filter(function(F){return F}).sort(function(F,Q){return F-Q}),Z=Y[0],G=Y.map(function(F){return at(F/Z,.1)*I}),K=1,X=at(B/Z,.1);for(K=1;K<=10&&!G.every(function(F){return F*K%1===0});++K);var ee=(-P+1)/2,J=nx(z-L,z-L+B,ee,1-ee);return{multiple:X*K,dir:P,snapSize:I,snapOffset:Math.round(J/I)}}),D=N.map(function(P){return P.multiple||1});o.snapThresholdInfo.multiples=D,o.snapThresholdInfo.offset=N.map(function(P){return P.snapOffset}),N.forEach(function(P,O){P.snapSize})}}else o.snapThresholdInfo=null}function _me(t,e,n,r,i,a,s){r===void 0&&(r=0),i===void 0&&(i=0);var o=t.props,c=t.state,d=o.snapGridWidth,f=d===void 0?0:d,h=o.snapGridHeight,g=h===void 0?0:h,v=[],b=a.left,x=a.top,w=[0,0];Sme(t,r,i,a);var _=c.snapThresholdInfo,T=f,N=g;if(_&&(f*=_.multiples[0]||1,g*=_.multiples[1]||1,w=_.offset),g){for(var D=function(O){v.push({type:"horizontal",pos:[b,at(w[1]*N+O-i+x,.1)],className:We("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},P=0;P<=n*2;P+=g)D(P);for(var P=-g;P>=-n;P-=g)D(P)}if(f){for(var D=function(C){v.push({type:"vertical",pos:[at(w[0]*T+C-r+b,.1),x],className:We("grid-guideline"),size:n,hide:!s,direction:"",grid:!0})},P=0;P<=e*2;P+=f)D(P);for(var P=-f;P>=-e;P-=f)D(P)}return v}function fq(t,e,n,r){return n==="horizontal"?Ne(t.right-e.left)<=r||Ne(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Ne(t.bottom-e.top)<=r||Ne(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function Eme(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(g){return!g.refresh}),a=r.map(function(g){return vs(g)&&"element"in g?ae(ae({},g),{element:so(g.element,!0)}):{element:so(g,!0)}}).filter(function(g){return g.element}),s=jpe(i.map(function(g){return g.element}),a.map(function(g){return g.element})),o=s.maintained,c=s.added,d=[];o.forEach(function(g){var v=le(g,2),b=v[0],x=v[1];d[x]=i[b]}),Tme(t,c.map(function(g){return a[g]})).map(function(g,v){d[c[v]]=g}),e.elementRects=d;var f=xI(t.props.elementSnapDirections),h=[];return d.forEach(function(g){var v=g.element,b=g.top,x=b===void 0?f.top:b,w=g.left,_=w===void 0?f.left:w,T=g.right,N=T===void 0?f.right:T,D=g.bottom,P=D===void 0?f.bottom:D,O=g.center,C=O===void 0?f.center:O,I=g.middle,R=I===void 0?f.middle:I,j=g.className,L=g.rect,B=wI({top:x,right:N,left:_,bottom:P,center:C,middle:R},L),z=B.horizontal,Y=B.vertical,Z=B.horizontalNames,G=B.verticalNames,K=L.top,X=L.left,ee=L.right-X,J=L.bottom-K,F=[ee,J];Y.forEach(function(Q,te){h.push({type:"vertical",element:v,pos:[at(Q,.1),K],size:J,sizes:F,className:j,elementRect:g,elementDirection:z3[G[te]]||G[te],direction:""})}),z.forEach(function(Q,te){h.push({type:"horizontal",element:v,pos:[X,at(Q,.1)],size:ee,sizes:F,className:j,elementRect:g,elementDirection:z3[Z[te]]||Z[te],direction:""})})}),h}function W3(t,e){return t?t.map(function(n){var r=vs(n)?n:{pos:n},i=r.pos;return ph(i)?r:ae(ae({},r),{pos:Xt(i,e)})}):[]}function hq(t,e,n,r,i,a,s){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],c=s.left,d=s.top,f=s.bottom,h=s.right,g=n+h-c,v=r+f-d;return W3(t,v).forEach(function(b){o.push({type:"horizontal",pos:[c,at(b.pos-a+d,.1)],size:g,className:b.className,direction:""})}),W3(e,g).forEach(function(b){o.push({type:"vertical",pos:[at(b.pos-i+c,.1),d],size:v,className:b.className,direction:""})}),o}function Tme(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,s=r.is3d,o=r.offsetDelta,c=s?4:3,d=le(Kge(a,i,c),2),f=d[0],h=d[1],g=n?0:o[0],v=n?0:o[1];return e.map(function(b){var x=b.element.getBoundingClientRect(),w=x.left-f-g,_=x.top-h-v,T=_+x.height,N=w+x.width,D=le(bh(a,[w,_],c),2),P=D[0],O=D[1],C=le(bh(a,[N,T],c),2),I=C[0],R=C[1];return ae(ae({},b),{rect:{left:P,right:I,top:O,bottom:R,center:(P+I)/2,middle:(O+R)/2}})})}function ky(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var s=so(r,!0);if(s){var o=Gg(s),c=J3(e,[o.left-i.left,o.top-i.top]),d=J3(e,[o.right-i.right,o.bottom-i.bottom]);a.left=at(c[0],1e-5),a.top=at(c[1],1e-5),a.right=at(d[0],1e-5),a.bottom=at(d[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=rC(t),e.enableSnap=!0,!0}function pq(t,e,n,r,i,a){var s=Ed(t,e,n,a?4:3),o=mr(s,r);return AI(s,Ke(i,o))}function Y3(t){return t?t/Ne(t):0}function Ame(t,e,n,r,i,a){var s=a.fixedDirection,o=Jge(n,s,r),c=_I(t,e,n,r),d=De(De([],le(dme(t,e,o,r,i,a)),!1),le(lq(t,c,a)),!1),f=lx(d,0),h=lx(d,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function kme(t,e,n,r,i,a,s,o,c){var d=mr(e,s),f=ew(t,o,{vertical:[d[0]],horizontal:[d[1]]}),h=f.horizontal.offset,g=f.vertical.offset;if(at(g,Xk)||at(h,Xk)){var v=le(mo({datas:c,distX:-g,distY:-h}),2),b=v[0],x=v[1],w=Math.min(i||1/0,n+s[0]*b),_=Math.min(a||1/0,r+s[1]*x);return[w-n,_-r]}return[0,0]}function gq(t,e,n,r,i,a,s,o){for(var c=za(t.state),d=t.props.keepRatio,f=0,h=0,g=0;g<2;++g){var v=e(f,h),b=Ame(t,v,i,d,s,o),x=b.width,w=b.height,_=x.isBound,T=w.isBound,N=x.offset,D=w.offset;if(g===1&&(_||(N=0),T||(D=0)),g===0&&s&&!_&&!T)return[0,0];if(d){var P=Ne(N)*(n?1/n:1),O=Ne(D)*(r?1/r:1),C=_&&T?P<O:T||!_&&P<O;C?N=n*D/r:D=r*N/n}f+=N,h+=D}if(!d&&i[0]&&i[1]){var I=hme(t,c,i,a,o),R=I.maxWidth,j=I.maxHeight,L=le(kme(t,e(f,h).map(function(Y){return Y.map(function(Z){return at(Z,Xk)})}),n+f,r+h,R,j,i,s,o),2),N=L[0],D=L[1];f+=N,h+=D}return[f,h]}function $g(t){return t<0&&(t=t%360+360),t%=360,t}function Cme(t,e){e=$g(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return Ne(t-r)<Ne(t-i)?r:i}function YE(t,e){t=$g(t),e=$g(e);var n=$g(t-e);return Math.min(n,360-n)}function Nme(t,e,n,r){var i,a=t.props,s=(i=a[eq])!==null&&i!==void 0?i:5,o=a[tq];if(Hh(t,"rotatable")){var c=e.pos1,d=e.pos2,f=e.pos3,h=e.pos4,g=e.origin,v=n*Math.PI/180,b=[c,d,f,h].map(function(D){return Ke(D,g)}),x=b.map(function(D){return lv(D,v)}),w=De(De([],le(Gge(t,b,x,g,n)),!1),le(ame(t,b,x,g,n)),!1);w.sort(function(D,P){return Ne(D-n)-Ne(P-n)});var _=w.length>0;if(_)return{isSnap:_,dist:_?w[0]:n}}if(o?.length&&s){var T=o.slice().sort(function(D,P){return YE(D,r)-YE(P,r)}),N=T[0];if(YE(N,r)<=s)return{isSnap:!0,dist:n+Cme(r,N)-r}}return{isSnap:!1,dist:n}}function Ime(t,e,n,r,i,a,s){if(!Hh(t,"resizable"))return[0,0];var o=s.fixedDirection,c=s.nextAllMatrix,d=t.state,f=d.allMatrix,h=d.is3d;return gq(t,function(g,v){return pq(c||f,e+g,n+v,o,i,h)},e,n,r,i,a,s)}function Ome(t,e,n,r,i){if(!Hh(t,"scalable"))return[0,0];var a=i.startOffsetWidth,s=i.startOffsetHeight,o=i.fixedPosition,c=i.fixedDirection,d=i.is3d,f=gq(t,function(h,g){return pq(Ige(i,Ct(e,[h/a,g/s])),a,s,c,o,d)},a,s,n,o,r,i);return[f[0]/a,f[1]/s]}function Pme(t,e){e.absolutePoses=za(t.state)}function K3(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Bi(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return ae(ae({},r),{direction:i.direction})})}function X3(t,e,n,r,i,a){var s=bI(Z1(t,a),e,n),o=s.vertical,c=s.horizontal,d=Vf();o.forEach(function(b){b.isBound&&(b.direction==="start"&&(d.left=!0),b.direction==="end"&&(d.right=!0),r.push({type:"bounds",pos:b.pos}))}),c.forEach(function(b){b.isBound&&(b.direction==="start"&&(d.top=!0),b.direction==="end"&&(d.bottom=!0),i.push({type:"bounds",pos:b.pos}))});var f=sme(t),h=f.boundMap,g=f.vertical,v=f.horizontal;return g.forEach(function(b){ul(r,function(x){var w=x.type,_=x.pos;return w==="bounds"&&_===b})>=0||r.push({type:"bounds",pos:b})}),v.forEach(function(b){ul(i,function(x){var w=x.type,_=x.pos;return w==="bounds"&&_===b})>=0||i.push({type:"bounds",pos:b})}),{boundMap:d,innerBoundMap:h}}var Dme=NI("",["resizable","scalable"]),Rme={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",eq,tq,nq,rq,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,s=n.pos2,o=n.pos3,c=n.pos4,d=n.snapRenderInfo,f=t.props.snapRenderThreshold,h=f===void 0?1:f;if(!d||!d.render||!Hh(t,""))return Uf(t,"boundMap",Vf(),function(W){return JSON.stringify(W)}),Uf(t,"innerBoundMap",Vf(),function(W){return JSON.stringify(W)}),[];n.guidelines=rC(t);var g=Math.min(a[0],s[0],o[0],c[0]),v=Math.min(a[1],s[1],o[1],c[1]),b=d.externalPoses||[],x=za(t.state),w=[],_=[],T=[],N=[],D=[],P=Ra(x),O=P.width,C=P.height,I=P.top,R=P.left,j=P.bottom,L=P.right,B={left:R,right:L,top:I,bottom:j,center:(R+L)/2,middle:(I+j)/2},z=b.length>0,Y=z?Ra(b):{};if(!d.request){if(d.direction&&D.push(Zge(t,x,d.direction,h,h)),d.snap){var Z=Ra(x);d.center&&(Z.middle=(Z.top+Z.bottom)/2,Z.center=(Z.left+Z.right)/2),D.push(L3(t,Z,h,h))}z&&(d.center&&(Y.middle=(Y.top+Y.bottom)/2,Y.center=(Y.left+Y.right)/2),D.push(L3(t,Y,h,h))),D.forEach(function(W){var ue=W.vertical.posInfos,re=W.horizontal.posInfos;w.push.apply(w,De([],le(ue.filter(function(oe){var we=oe.guidelineInfos;return we.some(function(se){var Ee=se.guideline;return!Ee.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),_.push.apply(_,De([],le(re.filter(function(oe){var we=oe.guidelineInfos;return we.some(function(se){var Ee=se.guideline;return!Ee.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),T.push.apply(T,De([],le(K3(ue)),!1)),N.push.apply(N,De([],le(K3(re)),!1))})}var G=X3(t,[R,L],[I,j],w,_),K=G.boundMap,X=G.innerBoundMap;z&&X3(t,[Y.left,Y.right],[Y.top,Y.bottom],w,_,d.externalBounds);var ee=De(De([],le(T),!1),le(N),!1),J=ee.filter(function(W){return W.element&&!W.gapRects}),F=ee.filter(function(W){return W.gapRects}).sort(function(W,ue){return W.gap-ue.gap});Ve(t,"onSnap",{guidelines:ee.filter(function(W){var ue=W.element;return!ue}),elements:J,gaps:F},!0);var Q=Uf(t,"boundMap",K,function(W){return JSON.stringify(W)},Vf()),te=Uf(t,"innerBoundMap",X,function(W){return JSON.stringify(W)},Vf());return(K===Q||X===te)&&Ve(t,"onBound",{bounds:K,innerBounds:X},!0),De(De(De(De(De(De([],le(bme(t,J,[g,v],B,e)),!1),le(xme(t,F,[g,v],B,e)),!1),le(H3(t,"horizontal",N,[i,r],B,e)),!1),le(H3(t,"vertical",T,[i,r],B,e)),!1),le(G3(t,"horizontal",_,g,r,O,0,e)),!1),le(G3(t,"vertical",w,v,i,C,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},ky(t)},drag:function(t){var e=t.state;ky(t)||(e.guidelines=rC(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(Dme(t,e)||nC(t,e))return!0;if(!e.isRequest&&e.inputEvent)return gr(e.inputEvent.target,We("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,ky(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,ky(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function Mme(t,e){return[t[0]*e[0],t[1]*e[1]]}function We(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ihe.apply(void 0,De([gI],le(t),!1))}function mq(t){t()}function jme(t){return!t||t==="none"?[1,0,0,1,0,0]:vs(t)?t:hm(t)}function qg(t,e,n){return ix(e,ad(n,e),t,ad(n.map(function(r){return-r}),e))}function zme(t,e,n){if(e==="%"){var r=TI(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function Lme(t){var e=Vme(kI(t,":before"));return e.map(function(n,r){var i=iv(n),a=i.value,s=i.unit;return a*zme(t,s,r===0)})}function ux(t){return t?t.split(" "):["0","0"]}function Vme(t){return ux(t.transformOrigin)}function vq(t){var e=Ui(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var s=[],o=function(d){var f=i[d].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(h){return f[h]}).join(", "),")"))},c=0;c<a;++c)o(c);return s.join(" ")}return""}function gm(t,e,n,r,i){var a,s,o=iI(t)||Wc(t),c=!1,d,f;if(!t||n)d=t;else{var h=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,g=t.parentElement;h?(c=!0,f=g,d=h):d=g}for(var v=!1,b=t===e||d===e,x="relative",w=1,_=parseFloat(i?.("zoom"))||1,T=i?.("position");d&&d!==o;){e===d&&(b=!0);var N=Ui(d),D=d.tagName.toLowerCase(),P=vq(d),O=N("willChange"),C=parseFloat(N("zoom"))||1;if(x=N("position"),r&&C!==1){w=C;break}if(!n&&r&&_!==1&&T&&T!=="absolute"||D==="svg"||D==="foreignobject"||x!=="static"||P&&P!=="none"||O==="transform")break;var I=(s=t?.assignedSlot)===null||s===void 0?void 0:s.parentNode,R=d.parentNode;I&&(c=!0,f=R);var j=R;if(j&&j.nodeType===11){d=j.host,v=!0,x=Ui(d)("position");break}d=j,x="relative"}return{offsetZoom:w,hasSlot:c,parentSlotElement:f,isCustomElement:v,isStatic:x==="static",isEnd:b||!d||d===o,offsetParent:d||o}}function Bme(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,s=Ui(t),o=q1(i),c=!o,d,f;return!c&&(r!=="svg"||t.ownerSVGElement)?(d=j7?Lme(t):ux(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=d.slice(),c=!0,r==="svg"?(i=0,a=0):(n=le($me(t,d,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],d[0]=n[2],d[1]=n[3])):(d=ux(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=d.slice()),{tagName:r,isSVG:o,hasOffset:c,offset:[i||0,a||0],origin:d,targetOrigin:f}}function yq(t,e){var n=Ui(t),r=Ui(Wc(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),s=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(s=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,s]}function iC(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=ys(n,3,4))})}function Ume(t){for(var e=t.parentElement,n=!1,r=Wc(t);e;){var i=kI(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function tw(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(C7(t,!e).join(","),")")}function TI(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function Fme(t,e){var n,r=TI(t),i=r.width,a=r.height,s=r.clientWidth,o=r.clientHeight,c=s/i,d=o/a,f=t.preserveAspectRatio.baseVal,h=f.align,g=f.meetOrSlice,v=[0,0],b=[c,d],x=[0,0];if(h!==1){var w=(h-2)%3,_=Math.floor((h-2)/3);v[0]=i*w/2,v[1]=a*_/2;var T=g===2?Math.max(d,c):Math.min(c,d);b[0]=T,b[1]=T,x[0]=(s-i)/2*w,x[1]=(o-a)/2*_}var N=dI(b,e);return n=le(x,2),N[e*(e-1)]=n[0],N[e*(e-1)+1]=n[1],qg(N,e,v)}function $me(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=Ui(t),a=i("transform-box")==="fill-box",s=t.getBBox(),o=TI(t.ownerSVGElement),c=s.x,d=s.y;r==="foreignobject"&&!c&&!d&&(c=parseFloat(t.getAttribute("x"))||0,d=parseFloat(t.getAttribute("y"))||0);var f=c-o.x,h=d-o.y,g=a?e[0]:e[0]-f,v=a?e[1]:e[1]-h;return[f,h,g,v]}function An(t,e,n){return oi(t,id(e,n),n)}function Ed(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return An(t,i,r)})}function Ra(t){var e=t.map(function(d){return d[0]}),n=t.map(function(d){return d[1]}),r=Math.min.apply(Math,De([],le(e),!1)),i=Math.min.apply(Math,De([],le(n),!1)),a=Math.max.apply(Math,De([],le(e),!1)),s=Math.max.apply(Math,De([],le(n),!1)),o=a-r,c=s-i;return{left:r,top:i,right:a,bottom:s,width:o,height:c}}function Q3(t,e,n,r){var i=Ed(t,e,n,r);return Ra(i)}function qme(t,e,n,r,i){var a,s=t.target,o=t.origin,c=e.matrix,d=xq(s),f=d.offsetWidth,h=d.offsetHeight,g=n.getBoundingClientRect(),v=[0,0];n===Wc(n)&&(v=yq(s,!0));for(var b=s.getBoundingClientRect(),x=b.left-g.left+n.scrollLeft-(n.clientLeft||0)+v[0],w=b.top-g.top+n.scrollTop-(n.clientTop||0)+v[1],_=b.width,T=b.height,N=ix(r,i,c),D=Q3(N,f,h,r),P=D.left,O=D.top,C=D.width,I=D.height,R=An(N,o,r),j=Ke(R,[P,O]),L=[x+j[0]*_/C,w+j[1]*T/I],B=[0,0],z=0;++z<10;){var Y=uo(i,r);a=le(Ke(An(Y,L,r),An(Y,R,r)),2),B[0]=a[0],B[1]=a[1];var Z=ix(r,i,ad(B,r),c),G=Q3(Z,f,h,r),K=G.left,X=G.top,ee=K-x,J=X-w;if(Ne(ee)<2&&Ne(J)<2)break;L[0]-=ee,L[1]-=J}return B.map(function(F){return Math.round(F)})}function Gme(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(c){return An(t,c,i)}),s=n.left,o=n.top;return a.map(function(c){return[c[0]+s,c[1]+o]})}function ja(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function bq(t,e){return ja([e[0]-t[0],e[1]-t[1]])}function Ag(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Gn(t,e));var i=bq(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function dx(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(o,c){return o+c[0]},0)/i,s=n.reduce(function(o,c){return o+c[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function od(t,e){var n=t[e];return vs(n)?ae(ae({},t),n):t}function xq(t){var e=t&&!q1(t.offsetWidth),n=0,r=0,i=0,a=0,s=0,o=0,c=0,d=0,f=0,h=0,g=0,v=0,b=1/0,x=1/0,w=1/0,_=1/0,T=0,N=0,D=!1;if(t)if(!e&&t.ownerSVGElement){var P=t.getBBox();D=!0,n=P.width,r=P.height,s=n,o=r,c=n,d=r,i=n,a=r}else{var O=Ui(t),C=t.style,I=O("boxSizing")==="border-box",R=parseFloat(O("borderLeftWidth"))||0,j=parseFloat(O("borderRightWidth"))||0,L=parseFloat(O("borderTopWidth"))||0,B=parseFloat(O("borderBottomWidth"))||0,z=parseFloat(O("paddingLeft"))||0,Y=parseFloat(O("paddingRight"))||0,Z=parseFloat(O("paddingTop"))||0,G=parseFloat(O("paddingBottom"))||0,K=z+Y,X=Z+G,ee=R+j,J=L+B,F=K+ee,Q=X+J,te=O("position"),W=0,ue=0;if("clientLeft"in t){var re=null;if(te==="absolute"){var oe=gm(t,Wc(t));re=oe.offsetParent}else re=t.parentElement;if(re){var we=Ui(re);W=parseFloat(we("width")),ue=parseFloat(we("height"))}}f=Math.max(K,Xt(O("minWidth"),W)||0),h=Math.max(X,Xt(O("minHeight"),ue)||0),b=Xt(O("maxWidth"),W),x=Xt(O("maxHeight"),ue),isNaN(b)&&(b=1/0),isNaN(x)&&(x=1/0),T=Xt(C.width,0)||0,N=Xt(C.height,0)||0,s=parseFloat(O("width"))||0,o=parseFloat(O("height"))||0,c=Ne(s-T)<1?zk(f,T||s,b):s,d=Ne(o-N)<1?zk(h,N||o,x):o,n=c,r=d,i=c,a=d,I?(w=b,_=x,g=f,v=h,c=n-F,d=r-Q):(w=b+F,_=x+Q,g=f+F,v=h+Q,n=c+F,r=d+Q),i=c+K,a=d+X}return{svg:D,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:c,contentHeight:d,inlineCSSWidth:T,inlineCSSHeight:N,cssWidth:s,cssHeight:o,minWidth:f,minHeight:h,maxWidth:b,maxHeight:x,minOffsetWidth:g,minOffsetHeight:v,maxOffsetWidth:w,maxOffsetHeight:_}}function wq(t,e){return Gn(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Cy(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Sq(t,e){var n=t===Wc(t)||t===iI(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Ui(t)("overflow")!=="visible",ae(ae({},e),r)}function KE(t,e,n,r){var i=t.left,a=t.right,s=t.top,o=t.bottom,c=e.top,d=e.left,f={left:d+i,top:c+s,right:d+a,bottom:c+o,width:a-i,height:o-s};return n&&r?Sq(n,f):f}function Gg(t,e){var n=0,r=0,i=0,a=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,i=s.width,a=s.height}var o={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?Sq(t,o):o}function Hme(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,s=i.offsetHeight,o=i.svg,c=i.transformOrigin;return!n&&o&&r?OI(r,a,s):c}function _q(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=Eq(a,r)}return i}function Eq(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function AI(t,e){return[Ct(e,t[0]),Ct(e,t[1]),Ct(e,t[2]),Ct(e,t[3])]}function za(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,s=t.pos4;return AI([r,i,a,s],[e,n])}function aC(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function Bf(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&aC(t,e),r?.unset(),t[n]=null}function vi(t,e){if(e){var n=Gh(e);n.nextStyle=ae(ae({},n.nextStyle),t)}return{style:t,cssText:dl(t).map(function(r){return"".concat(bb(r,"-"),": ").concat(t[r],";")}).join("")}}function Tq(t,e,n){var r=e.afterTransform||e.transform;return ae(ae({},vi(ae(ae(ae({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function dt(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=ae(ae({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function la(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),ae(ae({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function nw(t,e,n){t._emitter.on(e,n)}function Ve(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function kI(t,e){return _c(t).getComputedStyle(t,e)}function Ny(t,e,n){var r={},i={};return t.filter(function(a){var s=a.name;if(r[s]||!e.some(function(o){return a[o]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[s]=!0,!0})}function sC(t,e){return t===e||t==null&&e==null}function Z3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!q1(i))return i}return t[n]}function Aq(t,e){var n=[],r=[];return t.forEach(function(i,a){var s=e(i,a,t),o=r.indexOf(s),c=n[o]||[];o===-1&&(r.push(s),n.push(c)),c.push(i)}),n}function Wme(t,e){var n=[],r={};return t.forEach(function(i,a){var s=e(i,a,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(i)}),n}function kq(t){return t.reduce(function(e,n){return e.concat(n)},[])}function yh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Ne(r)-Ne(n)}),t[0]}function bh(t,e,n){return oi(uo(t,n),id(e,n),n)}function Yme(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=le(bh(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function Ta(t,e,n,r){if(!n[0]&&!n[1])return e;var i=An(t,[Y3(n[0]||1),0],r),a=An(t,[0,Y3(n[1]||1)],r),s=An(t,[n[0]/ja(i),n[1]/ja(a)],r);return Ct(e,s)}function as(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function fx(t){return Ne(t)<=wi?0:t}function CI(t){return function(e){if(!e.isDragging(t))return"";var n=zge(e,t),r=n.deg;return r?We("view-control-rotation".concat(r)):""}}function NI(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return gr(i,We("direction"))&&(!t||gr(i,We(t)))}}function Kme(t,e,n){var r,i=gh(t,{"x%":function(P){return P/100*e.offsetWidth},"y%":function(P){return P/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),s=t.slice(0,n<0?void 0:n+1),o=t[n]||"",c=n<0?[]:t.slice(n),d=n<0?[]:t.slice(n+1),f=i.slice(0,n<0?void 0:n),h=i.slice(0,n<0?void 0:n+1),g=(r=i[n])!==null&&r!==void 0?r:gh([""])[0],v=n<0?[]:i.slice(n),b=n<0?[]:i.slice(n+1),x=g?[g]:[],w=Nf(f),_=Nf(h),T=Nf(v),N=Nf(b),D=Qt(w,T,4);return{transforms:t,beforeFunctionMatrix:w,beforeFunctionMatrix2:_,targetFunctionMatrix:Nf(x),afterFunctionMatrix:T,afterFunctionMatrix2:N,allFunctionMatrix:D,beforeFunctions:f,beforeFunctions2:h,targetFunction:x[0],afterFunctions:v,afterFunctions2:b,beforeFunctionTexts:a,beforeFunctionTexts2:s,targetFunctionText:o,afterFunctionTexts:c,afterFunctionTexts2:d}}function Xme(t){return!t||!vs(t)||$h(t)?!1:cr(t)||"length"in t}function so(t,e){return t?$h(t)?t:Vi(t)?e?document.querySelector(t):t:tI(t)?t():s7(t)?t:"current"in t?t.current:t:null}function II(t,e){if(!t)return[];var n=Xme(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return Vi(i)&&e?De(De([],le(r),!1),le([].slice.call(document.querySelectorAll(i))),!1):(cr(i)?r.push(II(i,e)):r.push(so(i,e)),r)},[])}function Qme(t,e,n){var r=Gn(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function J3(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=uo(n,i);return r||(a=ys(a,3,4)),a[12]=0,a[13]=0,a[14]=0,Rpe(a,e)}function Cq(t,e,n,r,i){var a=le(t,2),s=a[0],o=a[1],c=0,d=0;if(i&&s&&o){var f=Gn([0,0],e),h=Gn([0,0],r),g=ja(e),v=Math.cos(f-h)*g;if(!r[0])d=v,c=d*n;else if(!r[1])c=v,d=c/n;else{var b=r[0]*s,x=r[1]*o,w=Math.atan2(b+e[0],x+e[1]),_=Math.atan2(b,x);w<0&&(w+=Math.PI*2),_<0&&(_+=Math.PI*2);var T=0;Ne(w-_)<Math.PI/2||Ne(w-_)>Math.PI/2*3||(_+=Math.PI),T=w-_,T>Math.PI*2?T-=Math.PI*2:T>Math.PI?T=2*Math.PI-T:T<-Math.PI&&(T=-2*Math.PI-T);var N=ja([b+e[0],x+e[1]])*Math.cos(T);c=N*Math.sin(_)-b,d=N*Math.cos(_)-x,r[0]<0&&(c*=-1),r[1]<0&&(d*=-1)}}else c=r[0]*e[0],d=r[1]*e[1];return[c,d]}function Nq(t,e,n,r){var i,a=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,c=0,d=0,f=r.distX,h=r.distY,g=r.pinchScale,v=r.parentDistance,b=r.parentDist,x=r.parentScale,w=n.fixedDirection,_=[0,1].map(function(C){return Ne(t[C]-w[C])}),T=[0,1].map(function(C){var I=_[C];return I!==0&&(I=2/I),I});if(b)c=b[0],d=b[1],e&&(c?d||(d=c/a):c=d*a);else if(ph(g))c=(g-1)*s,d=(g-1)*o;else if(x)c=(x[0]-1)*s,d=(x[1]-1)*o;else if(v){var N=s*_[0],D=o*_[1],P=ja([N,D]);c=v/P*N*T[0],d=v/P*D*T[1]}else{var O=mo({datas:n,distX:f,distY:h});O=T.map(function(C,I){return O[I]*C}),i=le(Cq([s,o],O,a,t,e),2),c=i[0],d=i[1]}return{distWidth:c,distHeight:d}}function oC(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=le(t.split(" "),2),r=n[0],i=n[1],a=oC(r||""),s=oC(i||""),o=ae(ae({},a),s),c={x:"50%",y:"50%"};return o.x&&(c.x=o.x),o.y&&(c.y=o.y),o.value&&(o.x&&!o.y&&(c.y=o.value),!o.x&&o.y&&(c.x=o.value)),c}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function OI(t,e,n){var r=oC(t,!0),i=r.x,a=r.y;return[Xt(i,e)||0,Xt(a,n)||0]}function Zme(t,e,n){var r=t.map(function(a){return Ke(a,e)}),i=r.map(function(a){return lv(a,n)});return{prev:r,next:i,result:i.map(function(a){return Ct(a,e)})}}function Iq(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=cr(n),s=cr(i);return a&&s?Iq(n,i):!a&&!s?n===i:!1})}function Uf(t,e,n,r,i){var a=t._store,s=a[e];if(!(e in a))if(i!=null)a[e]=i,s=i;else return a[e]=n,n;return s===n||r(s)===r(n)?s:(a[e]=n,n)}function pi(t){return t>=0?1:-1}function Ne(t){return Math.abs(t)}function XE(t,e){return Whe(t).map(function(n){return e(n)})}function Oq(t){return ph(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var Jme=dv("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,s=t.props,o=s.pinchable,c=s.ables;if(!o)return!1;var d="onPinch".concat(r?"Group":"","Start"),f="drag".concat(r?"Group":"","ControlStart"),h=(o===!0?t.controlAbles:c.filter(function(x){return o.indexOf(x.name)>-1})).filter(function(x){return x.canPinch&&x[f]}),g=dt(t,e,{});r&&(g.targets=r);var v=Ve(t,d,g);n.isPinch=v!==!1,n.ables=h;var b=n.isPinch;return b?(h.forEach(function(x){if(a[x.name]=a[x.name]||{},!!x[f]){var w=ae(ae({},e),{datas:a[x.name],parentRotate:i,isPinch:!0});x[f](t,w)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},b):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,s=e.inputEvent,o=e.targets,c=e.angle;if(n.isPinch){var d=i*(1-1/r),f=dt(t,e,{});o&&(f.targets=o);var h="onPinch".concat(o?"Group":"");Ve(t,h,f);var g=n.ables,v="drag".concat(o?"Group":"","Control");return g.forEach(function(b){b[v]&&b[v](t,ae(ae({},e),{datas:a[b.name],inputEvent:s,resolveMatrix:!0,pinchScale:r,parentDistance:d,parentRotate:c,isPinch:!0}))}),f}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(a?"Group":"","End"),c=la(t,e,{isDrag:r});a&&(c.targets=a),Ve(t,o,c);var d=n.ables,f="drag".concat(a?"Group":"","ControlEnd");return d.forEach(function(h){h[f]&&h[f](t,ae(ae({},e),{isDrag:r,datas:s[h.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,ae(ae({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,ae(ae({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,ae(ae({},e),{targets:t.props.targets}))}}),eL=NI("scalable"),eve={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:Q7("scalable"),dragControlCondition:eL,viewClassName:CI("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,s=_q(a,r,i,n),o=t.state,c=o.width,d=o.height,f=o.targetTransform,h=o.target,g=o.pos1,v=o.pos2,b=o.pos4;if(!s||!h)return!1;r||_d(t,e),n.datas={},n.transform=f,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=c,n.startOffsetHeight=d,n.startValue=[1,1];var x=!s[0]&&!s[1]||s[0]||!s[1];Q1(t,e,"scale"),n.isWidth=x;function w(O){n.ratio=O&&isFinite(O)?O:0}n.startPositions=za(t.state);function _(O){var C=cq(n.startPositions,O);n.fixedDirection=C.fixedDirection,n.fixedPosition=C.fixedPosition,n.fixedOffset=C.fixedOffset}n.setFixedDirection=_,w(Zo(g,v)/Zo(v,b)),_([-s[0],-s[1]]);var T=function(O){n.minScaleSize=O},N=function(O){n.maxScaleSize=O};T([-1/0,-1/0]),N([1/0,1/0]);var D=dt(t,e,ae(ae({direction:s,set:function(O){n.startValue=O},setRatio:w,setFixedDirection:_,setMinScaleSize:T,setMaxScaleSize:N},X1(t,e)),{dragStart:hi.dragStart(t,new mh().dragStart([0,0],e))})),P=Ve(t,"onScaleStart",D);return n.startFixedDirection=n.fixedDirection,P!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?D:!1},dragControl:function(t,e){Y1(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,s=e.dragClient,o=e.isRequest,c=e.useSnap,d=e.resolveMatrix,f=n.prevDist,h=n.direction,g=n.startOffsetWidth,v=n.startOffsetHeight,b=n.isScale,x=n.startValue,w=n.isWidth,_=n.ratio;if(!b)return!1;var T=t.props,N=T.throttleScale,D=T.parentMoveable,P=h;!h[0]&&!h[1]&&(P=[1,1]);var O=_&&(r??T.keepRatio)||!1,C=t.state,I=[x[0],x[1]];function R(){var ge=Nq(P,O,n,e),ne=ge.distWidth,Ie=ge.distHeight,ye=g?(g+ne)/g:1,Se=v?(v+Ie)/v:1;x[0]||(I[0]=ne/g),x[1]||(I[1]=Ie/v);var Oe=(P[0]||O?ye:1)*I[0],Pe=(P[1]||O?Se:1)*I[1];return Oe===0&&(Oe=pi(f[0])*Ey),Pe===0&&(Pe=pi(f[1])*Ey),[Oe,Pe]}var j=R();if(!a&&t.props.groupable){var L=C.snapRenderInfo||{},B=L.direction;cr(B)&&(B[0]||B[1])&&(C.snapRenderInfo={direction:h,request:e.isRequest})}Ve(t,"onBeforeScale",dt(t,e,{scale:j,setFixedDirection:function(ge){return n.setFixedDirection(ge),j=R(),j},startFixedDirection:n.startFixedDirection,setScale:function(ge){j=ge}},!0));var z=[j[0]/I[0],j[1]/I[1]],Y=s,Z=[0,0],G=pi(z[0]*z[1]),K=!s&&!i&&a;if(K||d?Y=yI(t,n.targetAllTransform,[0,0],[0,0],n):s||(Y=n.fixedPosition),a||(Z=Ome(t,z,h,!c&&o,n)),O){P[0]&&P[1]&&Z[0]&&Z[1]&&(Math.abs(Z[0]*g)>Math.abs(Z[1]*v)?Z[1]=0:Z[0]=0);var X=!Z[0]&&!Z[1];if(X&&(w?z[0]=at(z[0]*I[0],N)/I[0]:z[1]=at(z[1]*I[1],N)/I[1]),P[0]&&!P[1]||Z[0]&&!Z[1]||X&&w){z[0]+=Z[0];var ee=g*z[0]*I[0]/_;z[1]=pi(G*z[0])*Ne(ee/v/I[1])}else if(!P[0]&&P[1]||!Z[0]&&Z[1]||X&&!w){z[1]+=Z[1];var J=v*z[1]*I[1]*_;z[0]=pi(G*z[1])*Ne(J/g/I[0])}}else z[0]+=Z[0],z[1]+=Z[1],Z[0]||(z[0]=at(z[0]*I[0],N)/I[0]),Z[1]||(z[1]=at(z[1]*I[1],N)/I[1]);z[0]===0&&(z[0]=pi(f[0])*Ey),z[1]===0&&(z[1]=pi(f[1])*Ey),j=Mme(z,[I[0],I[1]]);var F=[g,v],Q=[g*j[0],v*j[1]];Q=t7(Q,n.minScaleSize,n.maxScaleSize,O?_:!1),j=XE(2,function(ge){return F[ge]?Q[ge]/F[ge]:Q[ge]}),z=XE(2,function(ge){return j[ge]/I[ge]});var te=XE(2,function(ge){return f[ge]?z[ge]/f[ge]:z[ge]}),W="scale(".concat(z.join(", "),")"),ue="scale(".concat(j.join(", "),")"),re=K1(n,ue,W),oe=!x[0]||!x[1],we=Oge(t,oe?ue:W,n.fixedDirection,Y,n.fixedOffset,n,oe),se=K?we:Ke(we,n.prevInverseDist||[0,0]);if(n.prevDist=z,n.prevInverseDist=we,j[0]===f[0]&&j[1]===f[1]&&se.every(function(ge){return!ge})&&!D&&!K)return!1;var Ee=dt(t,e,ae({offsetWidth:g,offsetHeight:v,direction:h,scale:j,dist:z,delta:te,isPinch:!!a},G7(t,re,se,a,e)));return Ve(t,"onScale",Ee),Ee},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=la(t,e,{});return Ve(t,"onScaleEnd",r),r},dragGroupControlCondition:eL,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=hs(t,"resizable",e);n.moveableScale=t.scale;var a=Jo(t,this,"dragControlStart",e,function(d,f){return ox(t,d,n,f)}),s=function(d){r.setFixedDirection(d),a.forEach(function(f,h){f.setFixedDirection(d),ox(t,f.moveable,n,i[h])})};n.setFixedDirection=s;var o=ae(ae({},r),{targets:t.props.targets,events:a,setFixedDirection:s}),c=Ve(t,"onScaleGroupStart",o);return n.isScale=c!==!1,n.isScale?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){nw(t,"onBeforeScale",function(f){Ve(t,"onBeforeScaleGroup",dt(t,e,ae(ae({},f),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var s=t.props.keepRatio,o=n.fixedPosition,c=Jo(t,this,"dragControl",e,function(f,h){var g=le(oi(cv(t.rotation/180*Math.PI,3),[h.datas.originalX*i[0],h.datas.originalY*i[1],1],3),2),v=g[0],b=g[1];return ae(ae({},h),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:Ct(o,[v,b])})}),d=ae({targets:t.props.targets,events:c},r);return Ve(t,"onScaleGroup",d),d}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=Jo(t,this,"dragControlEnd",e),a=la(t,e,{targets:t.props.targets,events:i});return Ve(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function ac(t,e){return t.map(function(n,r){return nx(n,e[r],1,2)})}function tL(t,e,n){var r=Gn(t,e),i=Gn(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function tve(t,e){var n=tL(t[0],t[1],t[2]),r=tL(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var nve={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:CI("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,s=n.zoom;if(r||i||!a)return[];var o=t.state,c=o.pos1,d=o.pos2,f=o.pos3,h=o.pos4,g=ac(c,d),v=ac(d,c),b=ac(c,f),x=ac(f,c),w=ac(f,h),_=ac(h,f),T=ac(d,h),N=ac(h,d);return De([e.createElement("div",{className:We("line"),key:"middeLine1",style:Ag(g,w,s)}),e.createElement("div",{className:We("line"),key:"middeLine2",style:Ag(v,_,s)}),e.createElement("div",{className:We("line"),key:"middeLine3",style:Ag(b,T,s)}),e.createElement("div",{className:We("line"),key:"middeLine4",style:Ag(x,N,s)})],le(Z7(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return gr(n,We("direction"))&&gr(n,We("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,s=Eq(a,n);if(!s||!i)return!1;var o=t.state,c=o.transformOrigin,d=o.is3d,f=o.targetTransform,h=o.targetMatrix,g=o.width,v=o.height,b=o.left,x=o.top;n.datas={},n.targetTransform=f,n.warpTargetMatrix=d?h:ys(h,3,4),n.targetInverseMatrix=A7(uo(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=b,n.top=x,n.poses=[[0,0],[g,0],[0,v],[g,v]].map(function(T){return Ke(T,c)}),n.nextPoses=n.poses.map(function(T){var N=le(T,2),D=N[0],P=N[1];return oi(n.warpTargetMatrix,[D,P,0,1],4)}),n.startValue=hn(4),n.prevMatrix=hn(4),n.absolutePoses=za(o),n.posIndexes=q7(s),_d(t,e),Q1(t,e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var w=dt(t,e,ae({set:function(T){n.startValue=T}},X1(t,e))),_=Ve(t,"onWarpStart",w);return _!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,c=n.isWarp,d=n.startValue,f=n.poses,h=n.posIndexes,g=n.absolutePoses;if(!c)return!1;if(Y1(t,e,"matrix3d"),Hh(t,"warpable")){var v=h.map(function(R){return g[R]});v.length>1&&v.push([(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2]);var b=ew(t,r,{horizontal:v.map(function(R){return R[1]+a}),vertical:v.map(function(R){return R[0]+i})}),x=b.horizontal,w=b.vertical;a-=x.offset,i-=w.offset}var _=mo({datas:n,distX:i,distY:a},!0),T=n.nextPoses.slice();if(h.forEach(function(R){T[R]=Ct(T[R],_)}),!wge.every(function(R){return tve(R.map(function(j){return f[j]}),R.map(function(j){return T[j]}))}))return!1;var N=fI(f[0],f[2],f[1],f[3],T[0],T[2],T[1],T[3]);if(!N.length)return!1;var D=Qt(s,N,4),P=F7(n,D,!0),O=Qt(uo(o,4),P,4);n.prevMatrix=P;var C=Qt(d,P,4),I=K1(n,"matrix3d(".concat(C.join(", "),")"),"matrix3d(".concat(P.join(", "),")"));return vI(e,I),Ve(t,"onWarp",dt(t,e,ae({delta:O,matrix:C,dist:P,multiply:Qt,transform:I},vi({transform:I},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Ve(t,"onWarpEnd",la(t,e,{})),r):!1}},rve=We("area-pieces"),Iy=We("area-piece"),Pq=We("avoid"),ive=We("view-dragging");function QE(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;a7(e,Pq),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function nL(t){return t.createElement("div",{key:"area_pieces",className:rve},t.createElement("div",{className:Iy}),t.createElement("div",{className:Iy}),t.createElement("div",{className:Iy}),t.createElement("div",{className:Iy}))}var Dq={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,s=n.passDragArea,o=t.getState(),c=o.width,d=o.height,f=o.renderPoses,h=s?We("area","pass"):We("area");if(a)return[e.createElement("div",{key:"area",ref:Qo(t,"areaElement"),className:h}),nL(e)];if(!r||!i)return[];var g=fI([0,0],[c,0],[0,d],[c,d],f[0],f[1],f[2],f[3]),v=g.length?tw(g,!0):"none";return[e.createElement("div",{key:"area",ref:Qo(t,"areaElement"),className:h,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(d,"px"),transformOrigin:"0 0",transform:v}}),nL(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,c=o.moveableClientRect,d=o.renderPoses,f=o.rootMatrix,h=o.is3d,g=c.left,v=c.top,b=Ra(d),x=b.left,w=b.top,_=b.width,T=b.height,N=h?4:3,D=le(bh(f,[r-g,i-v],N),2),P=D[0],O=D[1];P-=x,O-=w;var C=[{left:x,top:w,width:_,height:O-10},{left:x,top:w,width:P-10,height:T},{left:x,top:w+O+10,width:_,height:T-O-10},{left:x+P+10,top:w,width:_-P-10,height:T}],I=[].slice.call(s.nextElementSibling.children);C.forEach(function(R,j){I[j].style.cssText="left: ".concat(R.left,"px;top: ").concat(R.top,"px; width: ").concat(R.width,"px; height: ").concat(R.height,"px;")}),i7(s,Pq),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,QE(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||QE(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){QE(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&e7(function(){e.disableNativeEvent=!1})}},ave=dv("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,s=t.getState(),o=s.beforeOrigin,c=s.rotation,d=s.svg,f=s.allMatrix,h=s.is3d,g=s.left,v=s.top,b=s.offsetWidth,x=s.offsetHeight,w;if(!a&&d&&i){var _=le(OI(i,b,x),2),T=_[0],N=_[1],D=h?4:3,P=An(f,[T,N],D);w=dx(c,r,Ke(P,[g,v]))}else w=dx(c,r,o);return[e.createElement("div",{className:We("control","origin"),style:w,key:"beforeOrigin"})]}});function sve(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var ove={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,s=new Bpe,o=so(i,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var c=e.isControl?"controlGesto":"targetGesto",d=e.targets;s.on("scroll",function(f){var h=f.container,g=f.direction,v=dt(t,e,{scrollContainer:h,direction:g}),b=d?"onScrollGroup":"onScroll";d&&(v.targets=d),Ve(t,b,v)}).on("move",function(f){var h=f.offsetX,g=f.offsetY,v=f.inputEvent;t[c].scrollBy(h,g,v.inputEvent,!1)}).on("scrollDrag",function(f){var h=f.next;h(t[c].getCurrentEvent())}),s.dragStart(e,ae({container:o},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,s=r.scrollThreshold,o=s===void 0?0:s,c=r.scrollThrottleTime,d=c===void 0?0:c,f=r.getScrollPosition,h=f===void 0?sve:f,g=r.scrollOptions;return n.drag(e,ae({container:a,threshold:o,throttleTime:d,getScrollPosition:function(v){return h({scrollContainer:v.container,direction:v.direction})}},g)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,ae(ae({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,ae(ae({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,ae(ae({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,ae(ae({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},Rq={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},lve=dv("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=Oq(n.padding||{}),i=r.left,a=r.top,s=r.right,o=r.bottom,c=t.getState(),d=c.renderPoses,f=c.pos1,h=c.pos2,g=c.pos3,v=c.pos4,b=[f,h,g,v],x=[];return i>0&&x.push([0,2]),a>0&&x.push([0,1]),s>0&&x.push([1,3]),o>0&&x.push([2,3]),x.map(function(w,_){var T=le(w,2),N=T[0],D=T[1],P=b[N],O=b[D],C=d[N],I=d[D],R=fI([0,0],[100,0],[0,100],[100,100],P,O,C,I);if(R.length)return e.createElement("div",{key:"padding".concat(_),className:We("padding"),style:{transform:tw(R,!0)}})})}}),rL=["nw","ne","se","sw"];function Oy(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var cve=[1,2,5,6],uve=[0,3,4,7],Ru=[1,-1,-1,1],Mu=[1,1,-1,-1];function PI(t,e,n,r,i,a,s,o){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=n),o===void 0&&(o=r);var c=[],d=!1,f=t.filter(function(g){return!g.virtual}),h=f.map(function(g){var v=g.horizontal,b=g.vertical,x=g.pos;if(b&&!d&&(d=!0,c.push("/")),d){var w=Math.max(0,b===1?x[1]-a:o-x[1]);return c.push(as(w,r,e)),w}else{var w=Math.max(0,v===1?x[0]-i:s-x[0]);return c.push(as(w,n,e)),w}});return{radiusPoses:f,styles:c,raws:h}}function Mq(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function jq(t,e,n,r,i,a,s){var o,c,d,f;a===void 0&&(a=[0,0]),s===void 0&&(s=!1);var h=t.indexOf("/"),g=(h>-1?t.slice(0,h):t).length,v=t.slice(0,g),b=t.slice(g+1),x=v.length,w=b.length,_=w>0,T=le(v,4),N=T[0],D=N===void 0?"0px":N,P=T[1],O=P===void 0?D:P,C=T[2],I=C===void 0?D:C,R=T[3],j=R===void 0?O:R,L=le(b,4),B=L[0],z=B===void 0?D:B,Y=L[1],Z=Y===void 0?_?z:O:Y,G=L[2],K=G===void 0?_?z:I:G,X=L[3],ee=X===void 0?_?Z:j:X,J=[D,O,I,j].map(function(re){return Xt(re,e)}),F=[z,Z,K,ee].map(function(re){return Xt(re,n)}),Q=J.slice(),te=F.slice();o=le(Oy([Q[0],Q[1]],e),2),Q[0]=o[0],Q[1]=o[1],c=le(Oy([Q[3],Q[2]],e),2),Q[3]=c[0],Q[2]=c[1],d=le(Oy([te[0],te[3]],n),2),te[0]=d[0],te[3]=d[1],f=le(Oy([te[1],te[2]],n),2),te[1]=f[0],te[2]=f[1];var W=s?Q:Q.slice(0,Math.max(a[0],x)),ue=s?te:te.slice(0,Math.max(a[1],w));return De(De([],le(W.map(function(re,oe){var we=rL[oe];return{virtual:oe>=x,horizontal:Ru[oe],vertical:0,pos:[r+re,i+(Mu[oe]===-1?n:0)],sub:!0,raw:J[oe],direction:we}})),!1),le(ue.map(function(re,oe){var we=rL[oe];return{virtual:oe>=w,horizontal:0,vertical:Mu[oe],pos:[r+(Ru[oe]===-1?e:0),i+re],sub:!0,raw:F[oe],direction:we}})),!1)}function dve(t,e,n,r,i){i===void 0&&(i=e.length);var a=Mq(t.slice(r)),s=a.horizontalRange,o=a.verticalRange,c=n-r,d=0;if(c===0)d=i;else if(c>0&&c<s[1])d=s[1]-c;else if(c>=o[0])d=o[0]+o[1]-c;else return;t.splice(n,d),e.splice(n,d)}function fve(t,e,n,r,i,a,s,o,c,d,f){d===void 0&&(d=0),f===void 0&&(f=0);var h=Mq(t.slice(n)),g=h.horizontalRange,v=h.verticalRange;if(r>-1)for(var b=Ru[r]===1?a-d:o-a,x=g[1];x<=r;++x){var w=Mu[x]===1?f:c,_=0;if(r===x?_=a:x===0?_=d+b:Ru[x]===-1&&(_=o-(e[n][0]-d)),t.splice(n+x,0,{horizontal:Ru[x],vertical:0,pos:[_,w]}),e.splice(n+x,0,[_,w]),x===0)break}else if(i>-1){var T=Mu[i]===1?s-f:c-s;if(g[1]===0&&v[1]===0){var N=[d+T,f];t.push({horizontal:Ru[0],vertical:0,pos:N}),e.push(N)}for(var D=v[0],x=v[1];x<=i;++x){var _=Ru[x]===1?d:o,w=0;if(i===x?w=s:x===0?w=f+T:Mu[x]===1?w=e[n+D][1]:Mu[x]===-1&&(w=c-(e[n+D][1]-f)),t.push({horizontal:0,vertical:Mu[x],pos:[_,w]}),e.push([_,w]),x===0)break}}}function hve(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var pve=[[0,-1,"n"],[1,0,"e"]],gve=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function DI(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,s=i.height,o=e,c=o.type,d=o.poses,f=c==="rect",h=c==="circle";if(c==="polygon")return n.map(function(O){return"".concat(as(O[0],a,r)," ").concat(as(O[1],s,r))});if(f||c==="inset"){var g=n[1][1],v=n[3][0],b=n[7][0],x=n[5][1];if(f)return[g,v,x,b].map(function(O){return"".concat(O,"px")});var w=[g,a-v,s-x,b].map(function(O,C){return as(O,C%2?a:s,r)});if(n.length>8){var _=le(Ke(n[4],n[0]),2),T=_[0],N=_[1];w.push.apply(w,De(["round"],le(PI(d.slice(8).map(function(O,C){return ae(ae({},O),{pos:n[C]})}),r,T,N,b,g,v,x).styles),!1))}return w}else if(h||c==="ellipse"){var D=n[0],P=as(Ne(n[1][1]-D[1]),h?Math.sqrt((a*a+s*s)/2):s,r),w=h?[P]:[as(Ne(n[2][0]-D[0]),a,r),P];return w.push("at",as(D[0],a,r),as(D[1],s,r)),w}}function hx(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return gve.map(function(s){var o=le(s,3),c=o[0],d=o[1],f=o[2],h=i[c+1],g=a[d+1];return{vertical:Ne(d),horizontal:Ne(c),direction:f,pos:[h,g]}})}function zq(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[Ne(e[1]-e[0]),Ne(n[1]-n[0])]}function iL(t,e,n,r,i){var a,s,o,c,d,f,h,g,v;if(t){var b=i;if(!b){var x=Ui(t),w=x("clipPath");b=w!=="none"?w:x("clip")}if(!((!b||b==="none"||b==="auto")&&(b=r,!b))){var _=J8(b),T=_.prefix,N=T===void 0?b:T,D=_.value,P=D===void 0?"":D,O=N==="circle",C=" ";if(N==="polygon"){var I=Bu(P||"0% 0%, 100% 0%, 100% 100%, 0% 100%");C=",";var R=I.map(function(Lt){var Ln=le(Lt.split(" "),2),Sn=Ln[0],ht=Ln[1];return{vertical:1,horizontal:1,pos:[Xt(Sn,e),Xt(ht,n)]}}),j=sd(R.map(function(Lt){return Lt.pos}));return{type:N,clipText:b,poses:R,splitter:C,left:j.minX,right:j.maxX,top:j.minY,bottom:j.maxY}}else if(O||N==="ellipse"){var L="",B="",z=0,Y=0,I=jc(P);if(O){var Z="";a=le(I,4),s=a[0],Z=s===void 0?"50%":s,o=a[2],L=o===void 0?"50%":o,c=a[3],B=c===void 0?"50%":c,z=Xt(Z,Math.sqrt((e*e+n*n)/2)),Y=z}else{var G="",K="";d=le(I,5),f=d[0],G=f===void 0?"50%":f,h=d[1],K=h===void 0?"50%":h,g=d[3],L=g===void 0?"50%":g,v=d[4],B=v===void 0?"50%":v,z=Xt(G,e),Y=Xt(K,n)}var X=[Xt(L,e),Xt(B,n)],R=De([{vertical:1,horizontal:1,pos:X,direction:"nesw"}],le(pve.slice(0,O?1:2).map(function(Sn){return{vertical:Ne(Sn[1]),horizontal:Sn[0],direction:Sn[2],sub:!0,pos:[X[0]+Sn[0]*z,X[1]+Sn[1]*Y]}})),!1);return{type:N,clipText:b,radiusX:z,radiusY:Y,left:X[0]-z,top:X[1]-Y,right:X[0]+z,bottom:X[1]+Y,poses:R,splitter:C}}else if(N==="inset"){var I=jc(P||"0 0 0 0"),ee=I.indexOf("round"),J=(ee>-1?I.slice(0,ee):I).length,F=I.slice(J+1),Q=le(I.slice(0,J),4),te=Q[0],W=Q[1],ue=W===void 0?te:W,re=Q[2],oe=re===void 0?te:re,we=Q[3],se=we===void 0?ue:we,Ee=le([te,oe].map(function(Sn){return Xt(Sn,n)}),2),ge=Ee[0],ne=Ee[1],Ie=le([se,ue].map(function(Sn){return Xt(Sn,e)}),2),ye=Ie[0],Se=Ie[1],Oe=e-Se,Pe=n-ne,Ge=jq(F,Oe-ye,Pe-ge,ye,ge),R=De(De([],le(hx(ge,Oe,Pe,ye)),!1),le(Ge),!1);return{type:"inset",clipText:b,poses:R,top:ge,left:ye,right:Oe,bottom:Pe,radius:F,splitter:C}}else if(N==="rect"){var I=Bu(P||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));C=",";var je=le(I.map(function(Yr){var Kr=iv(Yr).value;return Kr}),4),Je=je[0],Se=je[1],ne=je[2],ye=je[3],R=hx(Je,Se,ne,ye);return{type:"rect",clipText:b,poses:R,top:Je,right:Se,bottom:ne,left:ye,values:I,splitter:C}}}}}function mve(t,e,n,r,i){var a=t[e],s=a.direction,o=a.sub,c=t.map(function(){return[0,0]}),d=s?s.split(""):[];if(r&&e<8){var f=d.filter(function(z){return z==="w"||z==="e"}),h=d.filter(function(z){return z==="n"||z==="s"}),g=f[0],v=h[0];c[e]=n;var b=le(zq(t),2),x=b[0],w=b[1],_=x&&w?x/w:0;if(_&&i){var T=(e+4)%8,N=t[T].pos,D=[0,0];s.indexOf("w")>-1?D[0]=-1:s.indexOf("e")>-1&&(D[0]=1),s.indexOf("n")>-1?D[1]=-1:s.indexOf("s")>-1&&(D[1]=1);var P=Cq([x,w],n,_,D,!0),O=x+P[0],C=w+P[1],I=N[1],R=N[1],j=N[0],L=N[0];D[0]===-1?j=L-O:D[0]===1?L=j+O:(j=j-O/2,L=L+O/2),D[1]===-1?I=R-C:(D[1]===1||(I=R-C/2),R=I+C);var B=hx(I,L,R,j);t.forEach(function(z,Y){c[Y][0]=B[Y].pos[0]-z.pos[0],c[Y][1]=B[Y].pos[1]-z.pos[1]})}else t.forEach(function(z,Y){var Z=z.direction;Z&&(Z.indexOf(g)>-1&&(c[Y][0]=n[0]),Z.indexOf(v)>-1&&(c[Y][1]=n[1]))}),g&&(c[1][0]=n[0]/2,c[5][0]=n[0]/2),v&&(c[3][1]=n[1]/2,c[7][1]=n[1]/2)}else s&&!o?d.forEach(function(z){var Y=z==="n"||z==="s";t.forEach(function(Z,G){var K=Z.direction,X=Z.horizontal,ee=Z.vertical;!K||K.indexOf(z)===-1||(c[G]=[Y||!X?0:n[0],!Y||!ee?0:n[1]])})}):c[e]=n;return c}function vve(t,e){var n=le(U7(t,e),2),r=n[0],i=n[1],a=e.datas,s=a.clipPath,o=a.clipIndex,c=s,d=c.type,f=c.poses,h=c.splitter,g=f.map(function(T){return T.pos});if(d==="polygon")g.splice(o,0,[r,i]);else if(d==="inset"){var v=cve.indexOf(o),b=uve.indexOf(o),x=f.length;if(fve(f,g,8,v,b,r,i,g[4][0],g[4][1],g[0][0],g[0][1]),x===f.length)return}else return;var w=DI(t,s,g),_="".concat(d,"(").concat(w.join(h),")");Ve(t,"onClip",dt(t,e,ae({clipEventType:"added",clipType:d,poses:g,clipStyles:w,clipStyle:_,distX:0,distY:0},vi({clipPath:_},e))))}function yve(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,s=a.type,o=a.poses,c=a.splitter,d=o.map(function(v){return v.pos}),f=d.length;if(s==="polygon")o.splice(i,1),d.splice(i,1);else if(s==="inset"){if(i<8||(dve(o,d,i,8,f),f===o.length))return}else return;var h=DI(t,r,d),g="".concat(s,"(").concat(h.join(c),")");Ve(t,"onClip",dt(t,e,ae({clipEventType:"removed",clipType:s,poses:d,clipStyles:h,clipStyle:g,distX:0,distY:0},vi({clipPath:g},e))))}var bve={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,s=n.zoom,o=n.groupable,c=t.getState(),d=c.target,f=c.width,h=c.height,g=c.allMatrix,v=c.is3d,b=c.left,x=c.top,w=c.pos1,_=c.pos2,T=c.pos3,N=c.pos4,D=c.clipPathState,P=c.snapBoundInfos,O=c.rotation;if(!d||o)return[];var C=iL(d,f,h,i||"inset",D||r);if(!C)return[];var I=v?4:3,R=C.type,j=C.poses,L=j.map(function(Se){var Oe=An(g,Se.pos,I);return[Oe[0]-b,Oe[1]-x]}),B=[],z=[],Y=R==="rect",Z=R==="inset",G=R==="polygon";if(Y||Z||G){var K=Z?L.slice(0,8):L;z=K.map(function(Se,Oe){var Pe=Oe===0?K[K.length-1]:K[Oe-1],Ge=Gn(Pe,Se),je=bq(Pe,Se);return e.createElement("div",{key:"clipLine".concat(Oe),className:We("line","clip-line","snap-control"),"data-clip-index":Oe,style:{width:"".concat(je,"px"),transform:"translate(".concat(Pe[0],"px, ").concat(Pe[1],"px) rotate(").concat(Ge,"rad) scaleY(").concat(s,")")}})})}if(B=L.map(function(Se,Oe){return e.createElement("div",{key:"clipControl".concat(Oe),className:We("control","clip-control","snap-control"),"data-clip-index":Oe,style:{transform:"translate(".concat(Se[0],"px, ").concat(Se[1],"px) rotate(").concat(O,"rad) scale(").concat(s,")")}})}),Z&&B.push.apply(B,De([],le(L.slice(8).map(function(Se,Oe){return e.createElement("div",{key:"clipRadiusControl".concat(Oe),className:We("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Oe,style:{transform:"translate(".concat(Se[0],"px, ").concat(Se[1],"px) rotate(").concat(O,"rad) scale(").concat(s,")")}})})),!1)),R==="circle"||R==="ellipse"){var X=C.left,ee=C.top,J=C.radiusX,F=C.radiusY,Q=le(Ke(An(g,[X,ee],I),An(g,[0,0],I)),2),te=Q[0],W=Q[1],ue="none";if(!a){for(var re=Math.max(10,J/5,F/5),oe=[],we=0;we<=re;++we){var se=Math.PI*2/re*we;oe.push([J+(J-s)*Math.cos(se),F+(F-s)*Math.sin(se)])}oe.push([J,-2]),oe.push([-2,-2]),oe.push([-2,F*2+2]),oe.push([J*2+2,F*2+2]),oe.push([J*2+2,-2]),oe.push([J,-2]),ue="polygon(".concat(oe.map(function(Se){return"".concat(Se[0],"px ").concat(Se[1],"px")}).join(", "),")")}B.push(e.createElement("div",{key:"clipEllipse",className:We("clip-ellipse","snap-control"),style:{width:"".concat(J*2,"px"),height:"".concat(F*2,"px"),clipPath:ue,transform:"translate(".concat(-b+te,"px, ").concat(-x+W,"px) ").concat(tw(g))}}))}if(a){var Ee=Ra(De([w,_,T,N],le(L),!1)),ge=Ee.width,ne=Ee.height,Ie=Ee.left,ye=Ee.top;if(G||Y||Z){var oe=Z?L.slice(0,8):L;B.push(e.createElement("div",{key:"clipArea",className:We("clip-area","snap-control"),style:{width:"".concat(ge,"px"),height:"".concat(ne,"px"),transform:"translate(".concat(Ie,"px, ").concat(ye,"px)"),clipPath:"polygon(".concat(oe.map(function(Oe){return"".concat(Oe[0]-Ie,"px ").concat(Oe[1]-ye,"px")}).join(", "),")")}}))}}return P&&["vertical","horizontal"].forEach(function(Se){var Oe=P[Se],Pe=Se==="horizontal";Oe.isSnap&&z.push.apply(z,De([],le(Oe.snap.posInfos.map(function(Ge,je){var Je=Ge.pos,Lt=Ke(An(g,Pe?[0,Je]:[Je,0],I),[b,x]),Ln=Ke(An(g,Pe?[f,Je]:[Je,h],I),[b,x]);return pm(e,"",Lt,Ln,s,"clip".concat(Se,"snap").concat(je),"guideline")})),!1)),Oe.isBound&&z.push.apply(z,De([],le(Oe.bounds.map(function(Ge,je){var Je=Ge.pos,Lt=Ke(An(g,Pe?[0,Je]:[Je,0],I),[b,x]),Ln=Ke(An(g,Pe?[f,Je]:[Je,h],I),[b,x]);return pm(e,"",Lt,Ln,s,"clip".concat(Se,"bounds").concat(je),"guideline","bounds","bold")})),!1))}),De(De([],le(B),!1),le(z),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,ae(ae({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,s=n.target,o=n.width,c=n.height,d=e.inputEvent?e.inputEvent.target:null,f=d&&d.getAttribute("class")||"",h=e.datas,g=iL(s,o,c,i||"inset",a);if(!g)return!1;var v=g.clipText,b=g.type,x=g.poses,w=Ve(t,"onClipStart",dt(t,e,{clipType:b,clipStyle:v,poses:x.map(function(_){return _.pos})}));return w===!1?(h.isClipStart=!1,!1):(h.isControl=f&&f.indexOf("clip-control")>-1,h.isLine=f.indexOf("clip-line")>-1,h.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,h.clipIndex=d?parseInt(d.getAttribute("data-clip-index"),10):-1,h.clipPath=g,h.isClipStart=!0,n.clipPathState=v,_d(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.originalDatas,o=e.isDragTarget;if(!a.isClipStart)return!1;var c=a,d=c.isControl,f=c.isLine,h=c.isArea,g=c.clipIndex,v=c.clipPath;if(!v)return!1;var b=od(t.props,"clippable"),x=b.keepRatio,w=0,_=0,T=s.draggable,N=mo(e);o&&T?(n=le(T.prevBeforeDist,2),w=n[0],_=n[1]):(r=le(N,2),w=r[0],_=r[1]);var D=[w,_],P=t.state,O=P.width,C=P.height,I=!h&&!d&&!f,R=v.type,j=v.poses,L=v.splitter,B=j.map(function(lt){return lt.pos});I&&(w=-w,_=-_);var z=!d||j[g].direction==="nesw",Y=R==="inset"||R==="rect",Z=j.map(function(){return[0,0]});if(d&&!z){var G=j[g],K=G.horizontal,X=G.vertical,ee=[w*Ne(K),_*Ne(X)];Z=mve(j,g,ee,Y,x)}else z&&(Z=B.map(function(){return[w,_]}));var J=B.map(function(lt,cn){return Ct(lt,Z[cn])}),F=De([],le(J),!1);P.snapBoundInfos=null;var Q=v.type==="circle",te=v.type==="ellipse";if(Q||te){var W=Ra(J),ue=Ne(W.bottom-W.top),re=Ne(te?W.right-W.left:ue),oe=J[0][1]+ue,we=J[0][0]-re,se=J[0][0]+re;Q&&(F.push([se,W.bottom]),Z.push([1,0])),F.push([W.left,oe]),Z.push([0,1]),F.push([we,W.bottom]),Z.push([1,0])}var Ee=hq((b.clipHorizontalGuidelines||[]).map(function(lt){return Xt("".concat(lt),C)}),(b.clipVerticalGuidelines||[]).map(function(lt){return Xt("".concat(lt),O)}),O,C),ge=[],ne=[];if(Q||te)ge=[F[4][0],F[2][0]],ne=[F[1][1],F[3][1]];else if(Y){var Ie=[F[0],F[2],F[4],F[6]],ye=[Z[0],Z[2],Z[4],Z[6]];ge=Ie.filter(function(lt,cn){return ye[cn][0]}).map(function(lt){return lt[0]}),ne=Ie.filter(function(lt,cn){return ye[cn][1]}).map(function(lt){return lt[1]})}else ge=F.filter(function(lt,cn){return Z[cn][0]}).map(function(lt){return lt[0]}),ne=F.filter(function(lt,cn){return Z[cn][1]}).map(function(lt){return lt[1]});var Se=[0,0],Oe=F3(Ee,b.clipTargetBounds&&{left:0,top:0,right:O,bottom:C},ge,ne,5,5),Pe=Oe.horizontal,Ge=Oe.vertical,je=Pe.offset,Je=Ge.offset;if(Pe.isBound&&(Se[1]+=je),Ge.isBound&&(Se[0]+=Je),(te||Q)&&Z[0][0]===0&&Z[0][1]===0){var W=Ra(J),Lt=W.bottom-W.top,Ln=te?W.right-W.left:Lt,Sn=Ge.isBound?Ne(Je):Ge.snapIndex===0?-Je:Je,ht=Pe.isBound?Ne(je):Pe.snapIndex===0?-je:je;Ln-=Sn,Lt-=ht,Q&&(Lt=aq(Ge,Pe)>0?Lt:Ln,Ln=Lt);var Vt=F[0];F[1][1]=Vt[1]-Lt,F[2][0]=Vt[0]+Ln,F[3][1]=Vt[1]+Lt,F[4][0]=Vt[0]-Ln}else if(Y&&x&&d){var Yr=le(zq(j),2),Kr=Yr[0],Me=Yr[1],mt=Kr&&Me?Kr/Me:0,Sr=j[g],On=Sr.direction||"",_n=F[1][1],oe=F[5][1],we=F[7][0],se=F[3][0];Ne(je)<=Ne(Je)?je=pi(je)*Ne(Je)/mt:Je=pi(Je)*Ne(je)*mt,On.indexOf("w")>-1?we-=Je:On.indexOf("e")>-1?se-=Je:(we+=Je/2,se-=Je/2),On.indexOf("n")>-1?_n-=je:On.indexOf("s")>-1?oe-=je:(_n+=je/2,oe-=je/2);var sn=hx(_n,se,oe,we);F.forEach(function(ci,Qr){var En;En=le(sn[Qr].pos,2),ci[0]=En[0],ci[1]=En[1]})}else F.forEach(function(lt,cn){var nn=Z[cn];nn[0]&&(lt[0]-=Je),nn[1]&&(lt[1]-=je)});var Dt=DI(t,v,J),on="".concat(R,"(").concat(Dt.join(L),")");if(P.clipPathState=on,Q||te)ge=[F[4][0],F[2][0]],ne=[F[1][1],F[3][1]];else if(Y){var Ie=[F[0],F[2],F[4],F[6]];ge=Ie.map(function(cn){return cn[0]}),ne=Ie.map(function(cn){return cn[1]})}else ge=F.map(function(lt){return lt[0]}),ne=F.map(function(lt){return lt[1]});if(P.snapBoundInfos=F3(Ee,b.clipTargetBounds&&{left:0,top:0,right:O,bottom:C},ge,ne,1,1),T){var et=P.is3d,Xr=P.allMatrix,ln=et?4:3,ur=Se;o&&(ur=[D[0]+Se[0]-N[0],D[1]+Se[1]-N[1]]),T.deltaOffset=Qt(Xr,[ur[0],ur[1],0,0],ln)}return Ve(t,"onClip",dt(t,e,ae({clipEventType:"changed",clipType:R,poses:J,clipStyle:on,clipStyles:Dt,distX:w,distY:_},vi((i={},i[R==="rect"?"clip":"clipPath"]=on,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,s=r.isClipStart,o=r.isControl;return s?(Ve(t,"onClipEnd",la(t,e,{})),i&&(o?yve(t,e):a&&vve(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},xve={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":gr(e.inputEvent.target,We("origin"))},dragControlStart:function(t,e){var n=e.datas;_d(t,e);var r=dt(t,e,{dragStart:hi.dragStart(t,new mh().dragStart([0,0],e))}),i=Ve(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=le(mo(e),2),s=a[0],o=a[1],c=t.state,d=c.width,f=c.height,h=c.offsetMatrix,g=c.targetMatrix,v=c.is3d,b=t.props.originRelative,x=b===void 0?!0:b,w=v?4:3,_=[s,o];if(i){var T=e.distOrigin;(T[0]||T[1])&&(_=T)}var N=Ct(n.startOrigin,_),D=Ct(n.startTargetOrigin,_),P=Ke(_,n.prevOrigin),O=hv(h,g,N,w),C=t.getRect(),I=Ra(Ed(O,d,f,w)),R=[C.left-I.left,C.top-I.top];n.prevOrigin=_;var j=[as(D[0],d,x),as(D[1],f,x)].join(" "),L=hi.drag(t,fv(e,t.state,R,!!r)),B=dt(t,e,ae(ae({width:d,height:f,origin:N,dist:_,delta:P,transformOrigin:j,drag:L},vi({transformOrigin:j,transform:L.transform},e)),{afterTransform:L.transform}));return Ve(t,"onDragOrigin",B),B},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Ve(t,"onDragOriginEnd",la(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-a[0],s[1]=o.origin[1]-a[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function wve(t,e,n,r){var i=t.filter(function(c){var d=c.virtual,f=c.horizontal;return f&&!d}).length,a=t.filter(function(c){var d=c.virtual,f=c.vertical;return f&&!d}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(a===0?s=4:a<4&&(s=7)),e===1&&(a<=1?s=5:a<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];Sve(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function Sve(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function _ve(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function aL(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=jc(t),jq(a,e,n,0,0,r,i)}function sL(t,e,n,r,i){var a=t.state,s=a.width,o=a.height,c=PI(i,t.props.roundRelative,s,o),d=c.raws,f=c.styles,h=c.radiusPoses,g=hve(h,d),v=g.horizontals,b=g.verticals,x=f.join(" ");a.borderRadiusState=x;var w=dt(t,e,ae({horizontals:v,verticals:b,borderRadius:x,width:s,height:o,delta:r,dist:n},vi({borderRadius:x},e)));return Ve(t,"onRound",w),w}function oL(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],s=t.getTargets()[0];s&&(a?.props.target===s?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=kI(s).borderRadius,r.borderRadius=i))}return i}var Eve={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?We("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,s=n.allMatrix,o=n.is3d,c=n.left,d=n.top,f=n.borderRadiusState,h=t.props,g=h.minRoundControls,v=g===void 0?[0,0]:g,b=h.maxRoundControls,x=b===void 0?[4,4]:b,w=h.zoom,_=h.roundPadding,T=_===void 0?0:_,N=h.isDisplayShadowRoundControls,D=h.groupable;if(!r)return null;var P=f||oL(t),O=o?4:3,C=aL(P,i,a,v,!0);if(!C)return null;var I=0,R=0,j=D?[0,0]:[c,d];return C.map(function(L,B){var z=L.horizontal,Y=L.vertical,Z=L.direction||"",G=De([],le(L.pos),!1);R+=Math.abs(z),I+=Math.abs(Y),z&&Z.indexOf("n")>-1&&(G[1]-=T),Y&&Z.indexOf("w")>-1&&(G[0]-=T),z&&Z.indexOf("s")>-1&&(G[1]+=T),Y&&Z.indexOf("e")>-1&&(G[0]+=T);var K=Ke(An(s,G,O),j),X=N&&N!=="horizontal",ee=L.vertical?I<=x[1]&&(X||!L.virtual):R<=x[0]&&(N||!L.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(B),className:We("control","border-radius",L.vertical?"vertical":"",L.virtual?"virtual":""),"data-radius-index":B,style:{display:ee?"block":"none",transform:"translate(".concat(K[0],"px, ").concat(K[1],"px) scale(").concat(w,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,o=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,c=s?parseInt(i.getAttribute("data-radius-index"),10):-1,d=-1;if(o){var f=i.getAttribute("data-line-key")||"";f&&(d=parseInt(f.replace(/render-line-/g,""),10),isNaN(d)&&(d=-1))}if(!s&&!o)return!1;var h=dt(t,e,{}),g=Ve(t,"onRoundStart",h);if(g===!1)return!1;r.lineIndex=d,r.controlIndex=c,r.isControl=s,r.isLine=o,_d(t,e);var v=t.props,b=v.roundRelative,x=v.minRoundControls,w=x===void 0?[0,0]:x,_=t.state,T=_.width,N=_.height;r.isRound=!0,r.prevDist=[0,0];var D=oL(t),P=aL(D||"",T,N,w,!0)||[];return r.controlPoses=P,_.borderRadiusState=PI(P,b,T,N).styles.join(" "),h},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=le(mo(e),2),s=a[0],o=a[1],c=[s,o],d=Ke(c,n.prevDist),f=t.props.maxRoundControls,h=f===void 0?[4,4]:f,g=t.state,v=g.width,b=g.height,x=r[i],w=x.vertical,_=x.horizontal,T=r.map(function(D){var P=D.horizontal,O=D.vertical,C=[P*_*c[0],O*w*c[1]];if(P){if(h[0]===1)return C;if(h[0]<4&&P!==_)return C}else{if(h[1]===0)return C[1]=O*_*c[0]/v*b,C;if(w){if(h[1]===1)return C;if(h[1]<4&&O!==w)return C}}return[0,0]});T[i]=c;var N=r.map(function(D,P){return ae(ae({},D),{pos:Ct(D.pos,T[P])})});return i<4?N.slice(0,i+1).forEach(function(D){D.virtual=!1}):N.slice(4,i+1).forEach(function(D){D.virtual=!1}),n.prevDist=[s,o],sL(t,e,c,d,N)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,s=r.controlIndex,o=r.isLine,c=r.lineIndex,d=r.controlPoses,f=d.filter(function(_){var T=_.virtual;return T}).length,h=t.props.roundClickable,g=h===void 0?!0:h;if(i&&g){if(a&&(g===!0||g==="control"))_ve(d,s);else if(o&&(g===!0||g==="line")){var v=le(U7(t,e),2),b=v[0],x=v[1];wve(d,c,b,x)}f!==d.filter(function(_){var T=_.virtual;return T}).length&&sL(t,e,[0,0],[0,0],d)}var w=la(t,e,{});return Ve(t,"onRoundEnd",w),n.borderRadiusState="",w},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=hs(t,"roundable",e),s=ae({targets:t.props.targets,events:a.map(function(o,c){return ae(ae({},o),{target:i[c],moveable:r[c],currentTarget:r[c]})})},n);return Ve(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=hs(t,"roundable",e),s=ae({targets:t.props.targets,events:a.map(function(o,c){return ae(ae(ae({},o),{target:i[c],moveable:r[c],currentTarget:r[c]}),vi({borderRadius:n.borderRadius},o))})},n);return Ve(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=hs(t,"roundable",e);nw(t,"onRound",function(o){var c=ae({targets:t.props.targets,events:i.map(function(d,f){return ae(ae(ae({},d),{target:r[f],moveable:n[f],currentTarget:n[f]}),vi({borderRadius:o.borderRadius},d))})},o);Ve(t,"onRoundGroup",c)});var a=this.dragControlEnd(t,e);if(!a)return!1;var s=ae({targets:t.props.targets,events:i.map(function(o,c){var d;return ae(ae({},o),{target:r[c],moveable:n[c],currentTarget:n[c],lastEvent:(d=o.datas)===null||d===void 0?void 0:d.lastEvent})})},a);return Ve(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function Tve(t,e){var n=e?4:3,r=hn(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var Lq={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,s=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(C7(i,!0),")"),o=!a||a==="none"?s:a;e.datas.startTransforms=Tve(o,r)?[]:jc(o)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return dt(t,e,{setTransform:function(n){e.datas.startTransforms=cr(n)?n:jc(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return dt(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Ve(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Ve(t,"onBeforeRender",dt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Ve(t,"onBeforeRenderEnd",dt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=hs(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.setTransform(c,s),n.resetStyle(s),n.fillDragStartParams(c,s)});Ve(t,"onBeforeRenderGroupStart",dt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=hs(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.resetStyle(s),n.fillDragParams(c,s)});Ve(t,"onBeforeRenderGroup",dt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Ve(t,"onBeforeRenderGroupEnd",dt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Vq={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Ve(t,"onRenderStart",dt(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Ve(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Ve(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Ve(t,"onRenderGroupStart",dt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=hs(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragParams(c,s)});Ve(t,"onRenderGroup",dt(t,e,ae(ae({isPinch:!!e.isPinch,targets:t.props.targets,transform:Ty(e),transformObject:{}},vi(Ay(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=hs(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragEndParams(c,s)});Ve(t,"onRenderGroupEnd",dt(t,e,ae({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:Ty(e)},vi(Ay(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return gh(sx(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),dt(t,e,ae({isPinch:!!e.isPinch,transformObject:n,transform:Ty(e)},vi(Ay(e))))},fillDragEndParams:function(t,e){var n={};return gh(sx(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),dt(t,e,ae({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:Ty(e)},vi(Ay(e))))}};function Hg(t,e,n,r,i,a,s){a.clientDistX=a.distX,a.clientDistY=a.distY;var o=i==="Start",c=i==="End",d=i==="After",f=t.state.target,h=a.isRequest,g=r.indexOf("Control")>-1;if(!f||o&&g&&!h&&t.areaElement===a.inputEvent.target)return!1;var v=De([],le(e),!1);if(h){var b=a.requestAble;v.some(function(B){return B.name===b})||v.push.apply(v,De([],le(t.props.ables.filter(function(B){return B.name===b})),!1))}if(!v.length||v.every(function(B){return B.dragRelation}))return!1;var x=a.inputEvent,w;c&&x&&(w=document.elementFromPoint(a.clientX,a.clientY)||x.target);var _=!1,T=function(){var B;_=!0,(B=a.stop)===null||B===void 0||B.call(a)},N=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());N&&t.updateRect(i,!0,!1);var D=a.datas,P=g?"controlGesto":"targetGesto",O=t[P],C=function(B,z,Y){if(!(z in B)||O!==t[P])return!1;var Z=B.name,G=D[Z]||(D[Z]={});if(o&&(G.isEventStart=!Y||!B[Y]||B[Y](t,a)),!G.isEventStart)return!1;var K=B[z](t,ae(ae({},a),{stop:T,datas:G,originalDatas:D,inputTarget:w}));return t._emitter.off(),o&&K===!1&&(G.isEventStart=!1),K};N&&v.forEach(function(B){B.unset&&B.unset(t)}),C(Lq,"drag".concat(r).concat(i));var I=0,R=0;n.forEach(function(B){if(_)return!1;var z="".concat(B).concat(r).concat(i),Y="".concat(B).concat(r,"Condition");i===""&&!h&&Yme(t.state,a);var Z=v.filter(function(X){return X[z]});Z=Z.filter(function(X,ee){return X.name&&Z.indexOf(X)===ee});var G=Z.filter(function(X){return C(X,z,Y)}),K=G.length;_&&++I,K&&++R,!_&&o&&Z.length&&!K&&(I+=Z.filter(function(X){var ee=X.name,J=D[ee];return J.isEventStart?X.dragRelation!=="strong":!1}).length?1:0)}),(!d||R)&&C(Vq,"drag".concat(r).concat(i));var j=O!==t[P]||I===n.length;if((c||_||j)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(B){B.state.gestos={}}),v.forEach(function(B){B.unset&&B.unset(t)})),o&&!j&&!h&&R&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||j)return!1;if(!o&&R&&!s||c){var L=t.props.flushSync||mq;L(function(){t.updateRect(c?i:"",!0,!1),t.forceUpdate()})}return!o&&!c&&!d&&R&&!s&&Hg(t,e,n,r,i+"After",a),!0}function RI(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,s=t.areaElement,o=t._dragTarget;return!o||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===o||o.contains(a)||a===s||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||gr(a,"moveable-area")||gr(a,"moveable-padding")||gr(a,"moveable-edgeDraggable")}}function Bq(t,e,n){var r=t.controlBox,i=[],a=t.props,s=a.dragArea,o=t.state.target,c=a.dragTarget;i.push(r),(!s||c)&&i.push(e),!s&&c&&o&&e!==o&&a.dragTargetSelf&&i.push(o);var d=RI(t);return Fq(t,i,"targetAbles",n,{dragStart:d,pinchStart:d})}function Uq(t,e){var n=t.controlBox,r=[];r.push(n);var i=RI(t,!0),a=function(s,o){if(o===void 0&&(o=s.inputEvent.target),o===n)return!0;var c=i(s,o);return!c};return Fq(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function Fq(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",s=t.props,o=s.pinchOutside,c=s.pinchThreshold,d=s.preventClickEventOnDrag,f=s.preventClickDefault,h=s.checkInput,g=s.dragFocusedInput,v=s.preventDefault,b=v===void 0?!0:v,x=s.preventRightClick,w=x===void 0?!0:x,_=s.preventWheelClick,T=_===void 0?!0:_,N=s.dragContainer,D=so(N,!0),P={preventDefault:b,preventRightClick:w,preventWheelClick:T,container:D||_c(t.getControlBoxElement()),pinchThreshold:c,pinchOutside:o,preventClickEventOnDrag:a?d:!1,preventClickEventOnDragStart:a?f:!1,preventClickEventByCondition:a?null:function(I){return t.controlBox.contains(I.target)},checkInput:a?h:!1,dragFocusedInput:g},O=new Zpe(e,P),C=r==="Control";return["drag","pinch"].forEach(function(I){["Start","","End"].forEach(function(R){O.on("".concat(I).concat(R),function(j){var L,B=j.eventType,z=I==="drag"&&j.isPinch;if(i[B]&&!i[B](j)){j.stop();return}if(!z){var Y=I==="drag"?[I]:["drag",I],Z=De([],le(t[n]),!1),G=Hg(t,Z,Y,r,R,j);G?(t.props.stopPropagation||R==="Start"&&C)&&((L=j?.inputEvent)===null||L===void 0||L.stopPropagation()):j.stop()}})})}),O}var Ave=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var s=i.eventName,o=i.moveable;o.state.disableNativeEvent||i.ables.forEach(function(c){c[s](o,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function kve(t,e,n,r){var i;n===void 0&&(n=e);var a=W7(t,e),s=a.matrixes,o=a.is3d,c=a.targetMatrix,d=a.transformOrigin,f=a.targetOrigin,h=a.offsetContainer,g=a.hasFixed,v=a.zoom,b=Uge(h,n),x=b.matrixes,w=b.is3d,_=b.offsetContainer,T=b.zoom,N=r,D=4,P=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,O=c,C=hn(D),I=hn(D),R=hn(D),j=hn(D),L=s.length,B=x.map(function(ee){return ae(ae({},ee),{matrix:ee.matrix?De([],le(ee.matrix),!1):void 0})}).reverse();s.reverse(),!o&&N&&(O=ys(O,3,4),iC(s)),!w&&N&&iC(B),B.forEach(function(ee){I=Qt(I,ee.matrix,D)});var z=n||Wc(t),Y=((i=B[0])===null||i===void 0?void 0:i.target)||gm(z,z,!0).offsetParent,Z=B.slice(1).reduce(function(ee,J){return Qt(ee,J.matrix,D)},hn(D));s.forEach(function(ee,J){if(L-2===J&&(R=C.slice()),L-1===J&&(j=C.slice()),!ee.matrix){var F=s[J+1],Q=qme(ee,F,Y,D,Qt(Z,C,D));ee.matrix=ad(Q,D)}C=Qt(C,ee.matrix,D)});var G=!P&&o;O||(O=hn(G?4:3));var K=tw(P&&O.length===16?ys(O,4,3):O,G),X=I;return I=A7(I,D,D),{hasZoom:v!==1||T!==1,hasFixed:g,matrixes:s,rootMatrix:I,originalRootMatrix:X,beforeMatrix:R,offsetMatrix:j,allMatrix:C,targetMatrix:O,targetTransform:K,inlineTransform:t.style.transform,transformOrigin:d,targetOrigin:f,is3d:N,offsetContainer:h,offsetRootContainer:_}}function Cve(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,s=0,o={},c=xq(t);if(t&&(i=c.offsetWidth,a=c.offsetHeight),t){var d=kve(t,e,n,r),f=Xf(d.allMatrix,d.transformOrigin,i,a);o=ae(ae({},d),f);var h=Xf(d.allMatrix,[50,50],100,100);s=wq([h.pos1,h.pos2],h.direction)}var g=4;return ae(ae(ae({hasZoom:!1,width:i,height:a,rotation:s},c),{originalRootMatrix:hn(g),rootMatrix:hn(g),beforeMatrix:hn(g),offsetMatrix:hn(g),allMatrix:hn(g),targetMatrix:hn(g),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),o)}function lC(t,e,n,r,i,a){a===void 0&&(a=[]);var s=1,o=[0,0],c=Cy(),d=Cy(),f=Cy(),h=Cy(),g=[0,0],v={},b=Cve(e,n,i,!0);if(e){var x=Ui(e);a.forEach(function(B){v[B]=x(B)});var w=b.is3d?4:3,_=Xf(b.offsetMatrix,Ct(b.transformOrigin,k7(b.targetMatrix,w)),b.width,b.height);s=_.direction,o=Ct(_.origin,[_.left-b.left,_.top-b.top]),h=Gg(b.offsetRootContainer);var T=gm(r,r,!0).offsetParent||b.offsetRootContainer;if(b.hasZoom){var N=Xf(Qt(b.originalRootMatrix,b.allMatrix),b.transformOrigin,b.width,b.height),D=Xf(b.originalRootMatrix,ux(Ui(T)("transformOrigin")).map(function(B){return parseFloat(B)}),T.offsetWidth,T.offsetHeight);if(c=KE(N,h),f=KE(D,h,T,!0),t){var P=N.left,O=N.top;d=KE({left:P,top:O,bottom:O,right:O},h)}}else{c=Gg(e),f=Bge(T),t&&(d=Gg(t));var C=f.left,I=f.top,R=f.clientLeft,j=f.clientTop,L=[c.left-C,c.top-I];g=Ke(bh(b.rootMatrix,L,4),[R+b.left,j+b.top])}}return ae({targetClientRect:c,containerClientRect:f,moveableClientRect:d,rootContainerClientRect:h,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:v,offsetDelta:g},b)}function lL(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=sd([e,n,r,i]),s=[a.minX,a.minY],o=Ke(t.origin,s);return e=Ke(e,s),n=Ke(n,s),r=Ke(r,s),i=Ke(i,s),ae(ae({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:i,origin:o,beforeOrigin:o,isPersisted:!0})}var xh=(function(t){uv(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=ae({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},lC(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new W1,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}$he(n._observerId),n._observerId=e7(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,s=n.target,o=n.zoom,c=n.cspNonce,d=n.translateZ,f=n.cssStyled,h=n.groupable,g=n.linePadding,v=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var b=le(i||[0,0],2),x=b[0],w=b[1],_=r.left,T=r.top,N=r.target,D=r.direction,P=r.hasFixed,O=r.offsetDelta,C=n.targets,I=this.isDragging(),R={};this.getEnabledAbles().forEach(function(Z){R["data-able-".concat(Z.name.toLowerCase())]=!0});var j=this._getAbleClassName(),L=C&&C.length&&(N||h)||s||!this._hasFirstTarget&&this.state.isPersisted,B=this.controlBox||this.props.firstRenderState||this.props.persistData,z=[_-x,T-w];!h&&n.useAccuratePosition&&(z[0]+=O[0],z[1]+=O[1]);var Y={position:P?"fixed":"absolute",display:L?"block":"none",visibility:B?"visible":"hidden",transform:"translate3d(".concat(z[0],"px, ").concat(z[1],"px, ").concat(d,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return g&&(Y["--moveable-line-padding"]=g),v&&(Y["--moveable-control-padding"]=v),fs(f,ae({cspNonce:c,ref:Qo(this,"controlBox"),className:"".concat(We("control-box",D===-1?"reverse":"",I?"dragging":"")," ").concat(j," ").concat(a)},R,{onClick:this._onPreventClick,style:Y}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),Bf(this,!1),Bf(this,!0);var a=this.events;for(var s in a){var o=a[s];o&&o.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Bi(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(gI)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&RI(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,s=r.pos2,o=r.pos3,c=r.pos4,d=r.targetClientRect;if(!i)return 0;var f;if($h(n)){var h=n.getBoundingClientRect();f={left:h.left,top:h.top,width:h.width,height:h.height}}else f=ae({width:0,height:0},n);var g=f.left,v=f.top,b=f.width,x=f.height,w=O3([a,s,c,o],d),_=Hpe(w,[[g,v],[g+b,v],[g+b,v+x],[g,v+x]]),T=O7(w);return!_||!T?0:Math.min(100,_/T*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,s=i.pos1,o=i.pos2,c=i.pos3,d=i.pos4,f=i.targetClientRect;return a?Gk([n,r],O3([s,o,d,c],f)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,s=!a.parentPosition&&!a.wrapperMoveable;s&&vh(!0);var o=a.parentMoveable,c=this.state,d=c.target||a.target,f=this.getContainer(),h=o?o._rootContainer:this._rootContainer,g=lC(this.controlBox,d,f,f,h||f,this._getRequestStyles());if(!d&&this._hasFirstTarget&&a.persistData){var v=lL(a.persistData);for(var b in v)g[b]=v[b]}s&&vh(),this.updateState(g,o?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,s=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var o=a.getEventData();return!!(!((r=o[n])===null||r===void 0)&&r.isEventStart)}if(s?.isFlag()){if(!n)return!0;var o=s.getEventData();return!!(!((i=o[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=za(this.state),i=le(r,4),a=i[0],s=i[1],o=i[2],c=i[3],d=Ra(r),f=n.width,h=n.height,g=d.width,v=d.height,b=d.left,x=d.top,w=[n.left,n.top],_=Ct(w,n.origin),T=Ct(w,n.beforeOrigin),N=n.transformOrigin;return{width:g,height:v,left:b,top:x,pos1:a,pos2:s,pos3:o,pos4:c,offsetWidth:f,offsetHeight:h,beforeOrigin:T,origin:_,transformOrigin:N,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&aC(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&aC(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return Qme(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,s=a.props,o=s.parentMoveable||s.wrapperMoveable||a,c=o.props.ables,d=s.groupable,f=Bi(c,function(_){return _.name===n});if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var h=f.request(a),g=i||r.isInstant,v=h.isControl?"controlAbles":"targetAbles",b="".concat(d?"Group":"").concat(h.isControl?"Control":""),x=De([],le(o[v]),!1),w={request:function(_){return Hg(a,x,["drag"],b,"",ae(ae({},h.request(_)),{requestAble:n,isRequest:!0}),g),w},requestEnd:function(){return Hg(a,x,["drag"],b,"End",ae(ae({},h.requestEnd()),{requestAble:n,isRequest:!0}),g),w}};return Hg(a,x,["drag"],b,"Start",ae(ae({},h.requestStart(r)),{requestAble:n,isRequest:!0}),g),g?w.request(r).requestEnd():w},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,s=n.transformOrigin,o=n.allMatrix,c=n.is3d,d=n.pos1,f=n.pos2,h=n.pos3,g=n.pos4,v=n.left,b=n.top,x=n.isPersisted,w=r.zoom||1;if(!i&&w<=1){n.renderPoses=[d,f,h,g],n.renderLines=[[d,f],[f,g],[g,h],[h,d]];return}var _=Oq(i||{}),T=_.left,N=_.top,D=_.bottom,P=_.right,O=c?4:3,C=[];x?C=s:this.controlBox&&r.groupable?C=a:C=Ct(a,[v,b]);var I=ix(O,ad(C.map(function(Y){return-Y}),O),o,ad(s,O)),R=Ta(I,d,[-T,-N],O),j=Ta(I,f,[P,-N],O),L=Ta(I,h,[-T,D],O),B=Ta(I,g,[P,D],O);n.renderPoses=[R,j,L,B],n.renderLines=[[R,j],[j,B],[B,L],[L,R]];{var z=w/2;n.renderLines=[[Ta(I,d,[-T-z,-N],O),Ta(I,f,[P+z,-N],O)],[Ta(I,f,[P,-N-z],O),Ta(I,g,[P,D+z],O)],[Ta(I,g,[P+z,D],O),Ta(I,h,[-T-z,D],O)],[Ta(I,h,[-T,D+z],O),Ta(I,d,[-T,-N-z],O)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,s=this.state,o=s.target,c=s.container;if(!(!o&&!r)){this.updateAbles();var d=!sC(o,r),f=d||!sC(c,i);if(f){var h=i||this.controlBox;h&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&h&&this.updateRect("End",!1,!1),this._isPropTargetChanged=d}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=R7(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,s=r.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&a){var o=lL(a);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,s=this.getEnabledAbles(n),o="drag".concat(r,"Start"),c="pinch".concat(r,"Start"),d="drag".concat(r,"ControlStart"),f=Ny(s,[o,c],a),h=Ny(s,[d],a);this.enabledAbles=s,this.targetAbles=f,this.controlAbles=h},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:fs};return this.renderState={},Wme(kq(Ny(this.getEnabledAbles(),["render"],i).map(function(s){var o=s.render;return o(n,a)||[]})).filter(function(s){return s}),function(s){var o=s.key;return o}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return De(De([],le(r),!1),le(o),!1)},De([],le(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(Bf(this,!1),this.updateState({gestos:{}})),r||Bf(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=Bq(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=Uq(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=so(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,s=r.hideChildMoveableDefaultLines,o=r.parentMoveable;if(a||o&&s)return[];var c=this.getState(),d={createElement:fs};return c.renderLines.map(function(f,h){return pm(d,"",f[0],f[1],i,"render-line-".concat(h))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,s=this._prevDragArea,o=r.dragArea,c=!o&&a!==i,d=(n||o)&&s!==o;return c||d||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,s=dl(a);if(this._isTargetChanged())for(var o in a){var c=a[o];c&&c.destroy(),a[o]=null}if(i){var d=this.enabledAbles;s.forEach(function(f){var h=Ny(d,[f]),g=h.length>0,v=a[f];if(!g){v&&(v.destroy(),a[f]=null);return}v||(v=new Ave(i,n,f),a[f]=v),v.setAbles(h)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=so(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=so(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(De(De([],le(this._getAbleViewClassNames()),!1),[this.isDragging()?ive:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=Aq(n.filter(Boolean),function(d){return d}).map(function(d){var f=le(d,1),h=f[0];return h}),a=this._viewClassNames,s=av(a,i),o=s.removed,c=s.added;o.forEach(function(d){a7(r,a[d])}),c.forEach(function(d){i7(r,i[d])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,s=this.controlGesto,o=a?.isFlag()?a.getEventData():{},c=s?.isFlag()?s.getEventData():{};return i.map(function(d){var f,h,g,v=d.name,b=((f=d.className)===null||f===void 0?void 0:f.call(d,r))||"";return(!((h=o[v])===null||h===void 0)&&h.isEventStart||!((g=c[v])===null||g===void 0)&&g.isEventStart)&&(b+=" ".concat(We("".concat(v).concat(n,"-dragging")))),b.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,s=_c(this.getControlBoxElement());if(!s.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var o=new s.ResizeObserver(this.checkUpdateRect);o.observe(a,{box:"border-box"}),this._reiszeObserver=o}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,s=a.target,o=_c(this.getControlBoxElement());if(!o.MutationObserver||!s||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===s&&this._mutationObserver)){var c=new o.MutationObserver(function(d){var f,h;try{for(var g=cge(d),v=g.next();!v.done;v=g.next()){var b=v.value;b.type==="attributes"&&b.attributeName==="style"&&r.checkUpdateRect()}}catch(x){f={error:x}}finally{try{v&&!v.done&&(h=g.return)&&h.call(g)}finally{if(f)throw f.error}}});c.observe(s,{attributes:!0}),this._mutationObserver=c}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:mq,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(f7),MI={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),s=a.left,o=a.top,c=a.isPersisted,d=r.zoom||1,f=t.renderGroupRects,h=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];c?i=h.map(function(){return null}):h=[];var g=Uf(t,"parentPosition",[s,o],function(b){return b.join(",")}),v=Uf(t,"requestStyles",t.getRequestChildStyles(),function(b){return b.join(",")});return t.moveables=t.moveables.slice(0,i.length),De(De([],le(i.map(function(b,x){return e.createElement(xh,{key:"moveable"+x,ref:X8(t,"moveables",x),target:b,origin:!1,requestStyles:v,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,o],persistData:h[x],zoom:d})})),!1),le(kq(f.map(function(b,x){var w=b.pos1,_=b.pos2,T=b.pos3,N=b.pos4,D=[w,_,T,N];return[[0,1],[1,3],[3,2],[2,0]].map(function(P,O){var C=le(P,2),I=C[0],R=C[1];return pm(e,"",Ke(D[I],g),Ke(D[R],g),d,"group-rect-".concat(x,"-").concat(O))})}))),!1)}},Nve=dv("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),s=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||s)){var o=n.contains(i);Ve(t,"onClick",dt(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),s=a>-1,o=!1;a===-1&&(a=ul(i,function(c){return c.contains(r)}),o=a>-1),Ve(t,"onClickGroup",dt(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:s,containsTarget:o,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function vf(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),ae(ae({},t),{datas:e})}var Ive=dv("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?X7(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&gr(i,We("direction"))&&gr(i,We("edge"))&&gr(i,We("edgeDraggable"))},dragStart:function(t,e){return hi.dragStart(t,vf(e))},drag:function(t,e){return hi.drag(t,vf(e))},dragEnd:function(t,e){return hi.dragEnd(t,vf(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&gr(i,We("direction"))&&gr(i,We("line"))},dragGroupStart:function(t,e){return hi.dragGroupStart(t,vf(e))},dragGroup:function(t,e){return hi.dragGroup(t,vf(e))},dragGroupEnd:function(t,e){return hi.dragGroupEnd(t,vf(e))},unset:function(t){return hi.unset(t)}}),$q={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},jI=[Lq,Rq,Rme,Jme,hi,Ive,tC,eve,nve,mme,ove,lve,ave,xve,bve,Eve,MI,$q,Nve,Dq,Vq],Ove=jI.reduce(function(t,e){return(e.events||[]).forEach(function(n){r7(t,n)}),t},[]),Pve=jI.reduce(function(t,e){return(e.props||[]).forEach(function(n){r7(t,n)}),t},[]);function cL(t,e){var n=le(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function Py(t,e){var n=le(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function uL(t,e){return Math.max.apply(Math,De([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.max(i[e],a[e],s[e],o[e])})),!1))}function dL(t,e){return Math.min.apply(Math,De([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.min(i[e],a[e],s[e],o[e])})),!1))}function Dve(t,e){var n,r,i,a=[0,0],s=[0,0],o=[0,0],c=[0,0],d=0,f=0;if(!t.length)return{pos1:a,pos2:s,pos3:o,pos4:c,minX:0,minY:0,maxX:0,maxY:0,width:d,height:f,rotation:e};var h=at(e,wi);if(h%90){var g=h/180*Math.PI,v=Math.tan(g),b=-1/v,x=[Qk,R3],w=[[0,0],[0,0]],_=[Qk,R3],T=[[0,0],[0,0]];t.forEach(function(te){te.forEach(function(W){var ue=cL([-v,1,0],W),re=cL([-b,1,0],W);x[0]>ue&&(w[0]=W,x[0]=ue),x[1]<ue&&(w[1]=W,x[1]=ue),_[0]>re&&(T[0]=W,_[0]=re),_[1]<re&&(T[1]=W,_[1]=re)})});var N=le(w,2),D=N[0],P=N[1],O=le(T,2),C=O[0],I=O[1],R=[-v,1,Py([-v,1],D)],j=[-v,1,Py([-v,1],P)],L=[-b,1,Py([-b,1],C)],B=[-b,1,Py([-b,1],I)];n=le([[R,L],[R,B],[j,L],[j,B]].map(function(te){var W=le(te,2),ue=W[0],re=W[1];return hI(ue,re)[0]}),4),a=n[0],s=n[1],o=n[2],c=n[3],d=_[1]-_[0],f=x[1]-x[0]}else{var z=dL(t,0),Y=dL(t,1),Z=uL(t,0),G=uL(t,1);if(a=[z,Y],s=[Z,Y],o=[z,G],c=[Z,G],d=Z-z,f=G-Y,h%180){var K=[o,a,c,s];r=le(K,4),a=r[0],s=r[1],o=r[2],c=r[3],d=G-Y,f=Z-z}}if(h%360>180){var K=[c,o,s,a];i=le(K,4),a=i[0],s=i[1],o=i[2],c=i[3]}var X=sd([a,s,o,c]),ee=X.minX,J=X.minY,F=X.maxX,Q=X.maxY;return{pos1:a,pos2:s,pos3:o,pos4:c,width:d,height:f,minX:ee,minY:J,maxX:F,maxY:Q,rotation:e}}function qq(t,e){var n=e.map(function(r){if(cr(r)){var i=qq(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var s=Bi(t,function(o){var c=o.manager;return c.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&cr(n[0])?n[0]:n}var Rve=(function(t){uv(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new I7,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;vh(!0),this.moveables.forEach(function(we){we.updateRect(n,!1,!1)});var o=this.props,c=this.moveables,d=s.target||o.target,f=c.map(function(we){return{finded:!1,manager:we}}),h=this.props.targetGroups||[],g=qq(f,h),v=o.useDefaultGroupRotate;g.push.apply(g,De([],le(f.filter(function(we){var se=we.finded;return!se}).map(function(we){var se=we.manager;return se})),!1));var b=[],x=!r||n!==""&&o.updateGroup,w=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var _=(a=o.persistData)===null||a===void 0?void 0:a.rotation;_!=null&&(w=_)}function T(we,se,Ee){var ge=we.map(function(Ge){if(cr(Ge)){var je=T(Ge,se),Je=[je.pos1,je.pos2,je.pos3,je.pos4];return b.push(je),{poses:Je,rotation:je.rotation}}else return{poses:za(Ge.state),rotation:Ge.getRotation()}}),ne=ge.map(function(Ge){var je=Ge.rotation;return je}),Ie=0,ye=ne[0],Se=ne.every(function(Ge){return Math.abs(ye-Ge)<.1});x?Ie=!v&&Se?ye:w:Ie=!v&&!Ee&&Se?ye:se;var Oe=ge.map(function(Ge){var je=Ge.poses;return je}),Pe=Dve(Oe,Ie);return Pe}var N=T(g,this.rotation,!0);x&&(this.rotation=N.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=h,this.renderGroupRects=b;var D=this.transformOrigin,P=this.rotation,O=this.scale,C=N.width,I=N.height,R=N.minX,j=N.minY,L=Zme([[0,0],[C,0],[0,I],[C,I]],OI(D,C,I),this.rotation/180*Math.PI),B=sd(L.result),z=B.minX,Y=B.minY,Z=" rotate(".concat(P,"deg)")+" scale(".concat(pi(O[0]),", ").concat(pi(O[1]),")"),G="translate(".concat(-z,"px, ").concat(-Y,"px)").concat(Z);this.controlBox.style.transform="translate3d(".concat(R,"px, ").concat(j,"px, ").concat(this.props.translateZ||0,")"),d.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(D,";")+"width:".concat(C,"px;height:").concat(I,"px;")+"transform: ".concat(G),s.width=C,s.height=I;var K=this.getContainer(),X=lC(this.controlBox,d,this.controlBox,this.getContainer(),this._rootContainer||K,[]),ee=[X.left,X.top],J=le(za(X),4),F=J[0],Q=J[1],te=J[2],W=J[3],ue=sd([F,Q,te,W]),re=[ue.minX,ue.minY],oe=pi(O[0]*O[1]);X.pos1=Ke(F,re),X.pos2=Ke(Q,re),X.pos3=Ke(te,re),X.pos4=Ke(W,re),X.left=R-X.left+re[0],X.top=j-X.top+re[1],X.origin=Ke(Ct(ee,X.origin),re),X.beforeOrigin=Ke(Ct(ee,X.beforeOrigin),re),X.originalBeforeOrigin=Ct(ee,X.originalBeforeOrigin),X.transformOrigin=Ke(Ct(ee,X.transformOrigin),re),d.style.transform="translate(".concat(-z-re[0],"px, ").concat(-Y-re[1],"px)")+Z,vh(),this.updateState(ae(ae({},X),{posDelta:re,direction:oe,beforeDirection:oe}),i)},e.prototype.getRect=function(){return ae(ae({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return De(De([],le(r),!1),le(o),!1)},[]);return n},e.prototype.getMoveables=function(){return De([],le(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,De(De([],le(this.props.ables),!1),[MI],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=so(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,s=r.targets,o=this.differ.update(s),c=o.added,d=o.changed,f=o.removed,h=c.length||f.length;(h||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Bf(this,!1),Bf(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=Bq(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=Uq(this,"GroupControl")));var g=!sC(n.container,r.container);g&&(n.container=r.container),(g||h||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||d.length||s.length&&!Iq(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!h},e.prototype._updateObserver=function(){},e.defaultProps=ae(ae({},xh.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(xh),Mve=(function(t){uv(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,s=i.cssStyled,o=i.persistData,c=i.targets||[],d=c.length,f=this.isUnmounted||!d,h=(r=o?.children)!==null&&r!==void 0?r:[];return f&&!d&&h.length?c=h.map(function(){return null}):f||(h=[]),fs(s,{cspNonce:a,ref:Qo(this,"controlBox"),className:We("control-box")},c.map(function(g,v){var b,x,w=(x=(b=i.individualGroupableProps)===null||b===void 0?void 0:b.call(i,g,v))!==null&&x!==void 0?x:{};return fs(xh,ae({key:"moveable"+v,ref:X8(n,"moveables",v)},i,w,{target:g,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:h[v]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),vh(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),vh()},e.prototype.getRect=function(){return ae(ae({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(c){return c.request(n,ae(ae({},r),{isInstant:!1}),!1)}),s=i||r.isInstant,o={request:function(c){return a.forEach(function(d){return d.request(c)}),this},requestEnd:function(){return a.forEach(function(c){return c.requestEnd()}),this}};return s?o.request(r).requestEnd():o},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Bi(this.moveables,function(s){var o=s.getTargets()[0],c=s.getControlBoxElement(),d=s.getDragElement();return!o||!d?!1:d===i||d.contains(i)||d!==o&&o===i||o.contains(i)||c===i||c.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return De([],le(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(xh);function Gq(t,e){var n=[];return t.forEach(function(r){if(r){if(Vi(r)){e[r]&&n.push.apply(n,De([],le(e[r]),!1));return}cr(r)?n.push.apply(n,De([],le(Gq(r,e)),!1)):n.push(r)}}),n}function Hq(t,e){var n=[];return t.forEach(function(r){if(r){if(Vi(r)){e[r]&&n.push.apply(n,De([],le(e[r]),!1));return}cr(r)?n.push(Hq(r,e)):n.push(r)}}),n}function Wq(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?cr(n)&&cr(i)?Wq(n,i):!0:!1})}var jve=(function(t){uv(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new I7,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var s=a.css;s&&s.forEach(function(o){n[o]=!0})});var i=dl(n).join(`
`);this.defaultStyled=R7("div",Ohe(gI,xge+i))},e.getTotalAbles=function(){return De([Rq,MI,$q,Dq],le(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,s=i.props,o=oge(i,["ables","props"]),c=le(this._updateRefs(!0),2),d=c[0],f=c[1],h=Gq(d,f),g=h.length>1,v=r.getTotalAbles(),b=De(De([],le(v),!1),le(a||[]),!1),x=ae(ae(ae({},o),s||{}),{ables:b,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=h;var w=null,_=this.moveable,T=o.persistData;if(T?.children&&(g=!0),o.individualGroupable)return fs(Mve,ae({key:"individual-group",ref:Qo(this,"moveable")},x,{target:null,targets:h}));if(g){var N=Hq(d,f);if(_&&!_.props.groupable&&!_.props.individualGroupable){var D=_.props.target;D&&h.indexOf(D)>-1&&(w=ae({},_.state))}return fs(Rve,ae({key:"group",ref:Qo(this,"moveable")},x,(n=o.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:h,targetGroups:N,firstRenderState:w}))}else{var P=h[0];if(_&&(_.props.groupable||_.props.individualGroupable)){var O=_.moveables||[],C=Bi(O,function(I){return I.props.target===P});C&&(w=ae({},C.state))}return fs(xh,ae({key:"single",ref:Qo(this,"moveable")},x,{target:P,firstRenderState:w}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=II(this.props.target||this.props.targets),a=typeof document<"u",s=Wq(r,i),o=this.selectorMap,c={};return this.refTargets.forEach(function d(f){if(Vi(f)){var h=o[f];h?c[f]=o[f]:a&&(s=!0,c[f]=[].slice.call(document.querySelectorAll(f)))}else cr(f)&&f.forEach(d)}),this._tmpRefTargets=i,this._tmpSelectorMap=c,[i,c,!n&&s]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),s=a.added,o=a.removed,c=s.length||o.length;c&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var d=le(this._updateRefs(),3),f=d[0],h=d[1],g=d[2];this.refTargets=f,this.selectorMap=h,g&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,lge([Phe(B7)],e.prototype,"moveable",void 0),e})(f7),zve=(function(t){uv(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=jI,e})(jve),cC=function(t,e){return cC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},cC(t,e)};function zI(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");cC(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var mm=function(){return mm=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mm.apply(this,arguments)};function Lve(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var Vve=(function(t){zI(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return fs(zve,mm({ref:Qo(this,"moveable")},this.state))},e})(oI),Bve=Pve,Uve=B7,Fve=Ove,$ve=(function(t){zI(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var s=mm({},i),o={};Fve.forEach(function(f){o[Fhe("on ".concat(f))]=function(h){return a.trigger(f,h)}});var c;i.warpSelf?(delete i.warpSelf,a._warp=!0,c=r):(c=Fh(r).createElement("div"),r.appendChild(c)),a.containerProvider=C3(fs(Vve,mm({ref:Qo(a,"innerMoveable")},s,o)),c),a.selfElement=c;var d=s.target;return cr(d)&&d.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;C3(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=Lve([b3(Uve,function(r,i){r[i]||(r[i]=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[i]))return o[i].apply(o,a)})}),b3(Bve,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var s;this.setState((s={},s[i]=a,s))},enumerable:!0,configurable:!0})})],e),e})(W1),Yq=(function(t){zI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})($ve),vc=(t=>(t.Mouse="mouse",t.Touch="touch",t.Pointer="pointer",t))(vc||{}),kg=(t=>(t.CancelledByMovement="cancelled-by-movement",t.CancelledByRelease="cancelled-by-release",t.CancelledOutsideElement="cancelled-outside-element",t))(kg||{});const qve=["mousedown","mousemove","mouseup","mouseleave","mouseout"],Gve=["touchstart","touchmove","touchend","touchcancel"],Hve=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function Wve(t){return typeof t=="object"&&t!==null&&"pageX"in t&&typeof t.pageX=="number"&&"pageY"in t&&typeof t.pageY=="number"}function Yve(t){var e;return qve.includes((e=t?.nativeEvent)==null?void 0:e.type)}function Kq(t){var e;return Gve.includes((e=t?.nativeEvent)==null?void 0:e.type)||"touches"in t}function Kve(t){const{nativeEvent:e}=t;return e?Hve.includes(e?.type)||"pointerId"in e:!1}function ZE(t){return Yve(t)||Kq(t)||Kve(t)}function fL(t){var e;const n=Kq(t)?(e=t?.touches)==null?void 0:e[0]:t;return Wve(n)?{x:n.pageX,y:n.pageY}:null}function Xve(t){return{target:t.target,currentTarget:t.currentTarget,nativeEvent:t,persist:()=>{}}}function LI(t,{threshold:e=400,captureEvent:n=!1,detect:r=vc.Pointer,cancelOnMovement:i=!1,cancelOutsideElement:a=!0,filterEvents:s,onStart:o,onMove:c,onFinish:d,onCancel:f}={}){const h=A.useRef(!1),g=A.useRef(!1),v=A.useRef(),b=A.useRef(),x=A.useRef(t),w=A.useRef(null),_=A.useCallback(P=>O=>{g.current||ZE(O)&&(s!==void 0&&!s(O)||(n&&O.persist(),o?.(O,{context:P}),w.current=fL(O),g.current=!0,v.current=O.currentTarget,b.current=setTimeout(()=>{x.current&&(x.current(O,{context:P}),h.current=!0)},e)))},[n,s,o,e]),T=A.useCallback(P=>(O,C)=>{ZE(O)&&g.current&&(w.current=null,n&&O.persist(),h.current?d?.(O,{context:P}):g.current&&f?.(O,{context:P,reason:C??kg.CancelledByRelease}),h.current=!1,g.current=!1,b.current!==void 0&&clearTimeout(b.current))},[n,d,f]),N=A.useCallback(P=>O=>{if(ZE(O)&&(c?.(O,{context:P}),i!==!1&&w.current)){const C=fL(O);if(C){const I=i===!0?25:i,R={x:Math.abs(C.x-w.current.x),y:Math.abs(C.y-w.current.y)};(R.x>I||R.y>I)&&T(P)(O,kg.CancelledByMovement)}}},[T,i,c]),D=A.useCallback(P=>{if(t===null)return{};switch(r){case vc.Mouse:{const O={onMouseDown:_(P),onMouseMove:N(P),onMouseUp:T(P)};return a&&(O.onMouseLeave=C=>{T(P)(C,kg.CancelledOutsideElement)}),O}case vc.Touch:return{onTouchStart:_(P),onTouchMove:N(P),onTouchEnd:T(P)};case vc.Pointer:{const O={onPointerDown:_(P),onPointerMove:N(P),onPointerUp:T(P)};return a&&(O.onPointerLeave=C=>T(P)(C,kg.CancelledOutsideElement)),O}}},[t,T,a,r,N,_]);return A.useEffect(()=>{function P(O){const C=Xve(O);T()(C)}return window.addEventListener("mouseup",P),window.addEventListener("touchend",P),window.addEventListener("pointerup",P),()=>{window.removeEventListener("mouseup",P),window.removeEventListener("touchend",P),window.removeEventListener("pointerup",P)}},[T]),A.useEffect(()=>()=>{b.current!==void 0&&clearTimeout(b.current)},[]),A.useEffect(()=>{x.current=t},[t]),D}const Xq=()=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){const e=document.getElementById("ios-haptic-trigger");e&&e.click()}else typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50)},px=t=>t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="number"?new Date(t):t?.toDate&&typeof t.toDate=="function"?t.toDate():new Date:new Date,Cu=t=>px(t).toISOString(),Qve=t=>{const e=px(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},Zve=t=>{const e=t.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},Qf=t=>{const e=t;let n=0;typeof e.amount=="number"?n=e.amount:typeof e.amount=="string"&&(n=parseFloat(e.amount)),isNaN(n)&&(n=0);const r=Cu(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:n,date:r,month:e.month||Qve(r),description:e.description||"",merchant:e.merchant||void 0,type:Zve(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,splitGroupId:e.splitGroupId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}},Dy=t=>Fr(Ze,"users",t,"transactions"),Jve={subscribeToTransactions:(t,e)=>{const n=Mi(Dy(t),ds("date","desc"));return Dc(n,i=>{const a=i.docs.map(s=>Qf({id:s.id,...s.data()}));e(a)})},subscribeToTransactionsByMonth:(t,e,n)=>{$.log(` TransactionService: Subscribing to transactions for ${e}`);const r=Mi(Dy(t),hb("month","==",e),ds("date","desc"));return Dc(r,i=>{const a=i.docs.map(s=>Qf({id:s.id,...s.data()}));n(a)},i=>{$.error(` TransactionService: Subscription failed for ${e}:`,i)})},getAllTransactions:async t=>{$.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=Mi(Dy(t),ds("date","desc")),r=(await Ji(e)).docs.map(i=>Qf({id:i.id,...i.data()}));return $.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");$.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),$.log(` Original transaction had temp ID: ${n}`);try{$.log(" About to call addDoc with:",r);const i=await z1(Dy(e),r);$.log(" addDoc succeeded, docRef:",i),$.log(` Document ID: ${i.id}`),$.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return $.log(" Final result object:",a),a}catch(i){$.error(" addDoc failed:",i);const a=i;throw $.error("Error message:",a.message),i}},updateTransaction:async(t,e,n)=>{const r=bt(Ze,"users",t,"transactions",e);return await Ys(r,n)},deleteTransaction:async(t,e)=>{$.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=bt(Ze,"users",t,"transactions",e);$.log(` Deleting document at path: ${n.path}`),await na(n),$.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){$.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n);const r=n;throw $.error("Error message:",r.message),n}}},JE=t=>Fr(Ze,"users",t,"envelopes"),e0e={subscribeToEnvelopes:(t,e)=>{const n=Mi(JE(t),ds("orderIndex","asc"));return Dc(n,i=>{const a=i.docs.map(s=>{const o=s.data();return{id:s.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated}});e(a)})},getAllEnvelopes:async t=>{try{$.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=JE(t),i=(await Ji(e)).docs.map((a,s)=>{const o=a.data();return{id:a.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated,orderIndex:o.orderIndex??s}}).sort((a,s)=>{const o=a.orderIndex??0,c=s.orderIndex??0;return o-c});return $.log(" Fetched envelopes:",i.length),i}catch(e){return $.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await z1(JE(e),r)).id,...r,userId:e}}catch(i){throw $.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=bt(Ze,"users",t,"envelopes",e.id);return await ea(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=bt(Ze,"users",t,"envelopes",e);return await Ys(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{$.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=bt(Ze,"users",t,"envelopes",e);await na(n),$.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},eT=t=>Fr(Ze,"users",t,"distributionTemplates"),t0e={subscribeToDistributionTemplates:(t,e)=>{const n=Mi(eT(t),ds("lastUsed","desc"));return Dc(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=Mi(eT(t),ds("lastUsed","desc"));return(await Ji(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");$.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await z1(eT(e),r);$.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return $.log(" Final template result object:",a),a}catch(i){throw $.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=bt(Ze,"users",t,"distributionTemplates",e.id);return await ea(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=bt(Ze,"users",t,"distributionTemplates",e);return await Ys(r,n)},deleteDistributionTemplate:async(t,e)=>{$.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=bt(Ze,"users",t,"distributionTemplates",e);await na(n),$.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},tT=t=>Fr(Ze,"users",t,"appSettings"),Qq={subscribeToAppSettings:(t,e)=>{const n=Mi(tT(t),tz(1));return Dc(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(s=>({id:s.id,...s.data()}))[0];e(a)})},getAppSettings:async t=>{const e=Mi(tT(t),tz(1)),n=await Ji(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");$.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await z1(tT(e),n);$.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return $.log(" Final settings result object:",i),i}catch(r){throw $.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=bt(Ze,"users",t,"appSettings",e.id);return await ea(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=bt(Ze,"users",t,"appSettings",e);return await ea(r,n,{merge:!0})},deleteAppSettings:async(t,e)=>{$.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=bt(Ze,"users",t,"appSettings",e);await na(n),$.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},hL=Object.freeze(Object.defineProperty({__proto__:null,AppSettingsService:Qq},Symbol.toStringTag,{value:"Module"}));class Go{static instance;constructor(){}static getInstance(){return Go.instance||(Go.instance=new Go),Go.instance}createId(){return bt(Fr(Ze,"temp")).id}async createCategory(e){const n=bt(Ze,`users/${e.userId}/categories`,e.id);return await ea(n,e),e}async getCategories(e){const n=Mi(Fr(Ze,`users/${e}/categories`),ds("orderIndex","asc"));return(await Ji(n)).docs.map(i=>i.data())}async updateCategory(e,n){const r=bt(Ze,`users/${e}/categories`,n.id);await ea(r,n,{merge:!0})}async deleteCategory(e,n){const r=bt(Ze,`users/${e}/categories`,n);await na(r)}async reorderCategories(e,n){const r=pk(Ze);n.forEach((i,a)=>{const s=bt(Ze,`users/${e}/categories`,i.id);r.update(s,{orderIndex:a})}),await r.commit()}async deduplicateCategories(e){const n=await this.getCategories(e),r=new Map,i=[];for(const s of n){const o=s.name.toLowerCase().trim();r.has(o)?i.push(s.id):r.set(o,s)}if(i.length===0)return $.log(" No duplicate categories found"),0;$.log(` Found ${i.length} duplicate categories to remove`);const a=450;for(let s=0;s<i.length;s+=a){const o=pk(Ze);i.slice(s,s+a).forEach(d=>{const f=bt(Ze,`users/${e}/categories`,d);o.delete(f)}),await o.commit(),$.log(` Deleted batch ${Math.floor(s/a)+1}`)}return $.log(` Removed ${i.length} duplicate categories`),i.length}subscribeToCategories(e,n){const r=Mi(Fr(Ze,`users/${e}/categories`),ds("orderIndex","asc"));return Dc(r,i=>{const a=i.docs.map(s=>s.data());n(a)},i=>{$.error(" Category subscription error:",i)})}}Go.getInstance();class us{static instance;static getInstance(){return us.instance||(us.instance=new us),us.instance}async restoreUserData(e,n){try{$.log(" BudgetService.restoreUserData: STARTING RESTORE for user:",e),await this.deleteAllUserData(e);const r=[{name:"envelopes",data:n.envelopes||[]},{name:"transactions",data:n.transactions||[]},{name:"categories",data:n.categories||[]},{name:"envelopeAllocations",data:n.allocations?Object.values(n.allocations).flat():[]},{name:"monthlyBudgets",data:this.prepareMonthlyBudgetsData(n.allocations,n.incomeSources)},{name:"appSettings",data:n.appSettings?[n.appSettings]:[]}],i=[];for(const{name:s,data:o}of r)if(Array.isArray(o))for(const c of o){if(!c.id&&s!=="monthlyBudgets")continue;const d={...c,userId:e};let f=c.id;s==="monthlyBudgets"&&c.month&&(f=c.month);const h=bt(Ze,"users",e,s,f);i.push({ref:h,data:d})}$.log(` Prepared ${i.length} items for restoration.`);const a=450;for(let s=0;s<i.length;s+=a){const o=pk(Ze);i.slice(s,s+a).forEach(d=>{o.set(d.ref,d.data)}),$.log(` Committing batch ${Math.floor(s/a)+1}/${Math.ceil(i.length/a)}...`),await o.commit()}$.log(" Restore completed successfully.")}catch(r){throw $.warn(` BudgetService.restoreUserData failed: ${r}`),new Error(`Failed to restore user data: ${r instanceof Error?r.message:"Unknown error"}`)}}async getEnvelopes(e){try{$.log(" BudgetService.getEnvelopes called for user:",e);const n=Fr(Ze,"users",e,"envelopes"),a=(await Ji(n)).docs.map((s,o)=>({id:s.id,...s.data(),orderIndex:s.data().orderIndex??o})).sort((s,o)=>{const c=s.orderIndex??0,d=o.orderIndex??0;return c-d});return $.log(" Fetched envelopes:",a.length),a}catch(n){throw $.warn(` BudgetService.getEnvelopes failed: ${n}`),new Error(`Failed to fetch envelopes: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactions(e){try{$.log(" BudgetService.getTransactions: Fetching for user",e);const n=Fr(Ze,"users",e,"transactions"),r=Mi(n,ds("date","desc")),a=(await Ji(r)).docs.map(s=>{const o={id:s.id,...s.data()};return Qf(o)});return $.log(` Fetched ${a.length} transactions`),a}catch(n){throw $.warn(` BudgetService.getTransactions failed: ${n}`),new Error(`Failed to fetch transactions: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactionsByMonth(e,n){try{$.log(` BudgetService.getTransactionsByMonth: Fetching for user ${e}, month ${n}`);const r=Fr(Ze,"users",e,"transactions"),i=Mi(r,hb("month","==",n),ds("date","desc")),s=(await Ji(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Qf(c)});return $.log(` Fetched ${s.length} transactions for ${n}`),s}catch(r){throw $.warn(` BudgetService.getTransactionsByMonth failed: ${r}`),new Error(`Failed to fetch transactions for month ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async getTransactionsByEnvelope(e,n){try{$.log(` BudgetService.getTransactionsByEnvelope: Fetching for user ${e}, envelope ${n}`);const r=Fr(Ze,"users",e,"transactions"),i=Mi(r,hb("envelopeId","==",n),ds("date","desc")),s=(await Ji(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Qf(c)});return $.log(` Fetched ${s.length} transactions for envelope ${n}`),s}catch(r){throw $.warn(` BudgetService.getTransactionsByEnvelope failed: ${r}`),new Error(`Failed to fetch transactions for envelope ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async createEnvelope(e){try{$.log(" BudgetService.createEnvelope called for user:",e.userId);const n=Fr(Ze,"users",e.userId,"envelopes"),r=bt(n),i=xt.now(),a={...e,createdAt:i,lastUpdated:i};ea(r,a).catch(o=>$.warn(`Create env failed: ${o}`));const s={...e,id:r.id,createdAt:Cu(i),lastUpdated:Cu(i)};return $.log(" Created envelope (optimistic):",s.id),s}catch(n){throw $.warn(` BudgetService.createEnvelope failed: ${n}`),new Error(`Failed to create envelope: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelope(e,n){try{$.log(" BudgetService.updateEnvelope called for envelope:",n.id);const r=bt(Ze,"users",e,"envelopes",n.id);ea(r,{...n,lastUpdated:xt.now()},{merge:!0}).catch(i=>$.warn(`Update env failed: ${i}`)),$.log(" Updated envelope (optimistic):",n.id)}catch(r){throw $.warn(` BudgetService.updateEnvelope failed: ${r}`),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,n){try{const r=bt(Ze,"users",e,"envelopes",n),i=Mi(Fr(Ze,"users",e,"transactions"),hb("envelopeId","==",n)),s=(await Ji(i)).docs.map(o=>na(o.ref));await Promise.all([na(r),...s]),$.log(" Deleted envelope and associated transactions from Firestore:",n)}catch(r){throw $.warn(` BudgetService.deleteEnvelope failed: ${r}`),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,n){try{$.log(" BudgetService.reorderEnvelopes called for user:",e);const r=n.map(i=>{const a=bt(Ze,"users",e,"envelopes",i.id);return ea(a,{orderIndex:i.orderIndex,lastUpdated:xt.now()},{merge:!0})});Promise.all(r).catch(i=>$.warn(`Reorder env failed: ${i}`)),$.log(" Reordered envelopes (optimistic)")}catch(r){throw $.warn(` BudgetService.reorderEnvelopes failed: ${r}`),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{$.log(" BudgetService.createTransaction called for user:",e.userId);const n=Fr(Ze,"users",e.userId,"transactions"),r=bt(n),i=xt.now();if(e.paymentMethod){const c={...e.paymentMethod};c.last4===void 0&&delete c.last4,e.paymentMethod=c}const s={...Object.fromEntries(Object.entries(e).filter(([c,d])=>d!==void 0)),createdAt:i};ea(r,s).catch(c=>$.warn(`Create tx failed: ${c}`));const o={...e,id:r.id};return $.log(" Created transaction (optimistic):",o.id),o}catch(n){throw $.warn(` BudgetService.createTransaction failed: ${n}`),new Error(`Failed to create transaction: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateTransaction(e,n){try{if($.log(" BudgetService.updateTransaction called for transaction:",n.id),n.paymentMethod){const a={...n.paymentMethod};a.last4===void 0&&delete a.last4,n.paymentMethod=a}const r=Object.fromEntries(Object.entries(n).filter(([a,s])=>s!==void 0)),i=bt(Ze,"users",e,"transactions",n.id);ea(i,r,{merge:!0}).catch(a=>$.warn(`Update tx failed: ${a}`)),$.log(" Updated transaction (optimistic):",n.id)}catch(r){throw $.warn(` BudgetService.updateTransaction failed: ${r}`),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,n){try{$.log(" BudgetService.deleteTransaction called for transaction:",n);const r=bt(Ze,"users",e,"transactions",n);na(r).catch(i=>$.warn(`Delete tx failed: ${i}`)),$.log(" Deleted transaction (optimistic):",n)}catch(r){throw $.warn(` BudgetService.deleteTransaction failed: ${r}`),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async createIncomeSource(e){try{$.log(" BudgetService.createIncomeSource (Embedded) called for user:",e.userId);const n=bt(Ze,"users",e.userId,"monthlyBudgets",e.month),r=xt.now(),i=`inc_${r.toMillis()}_${Math.random().toString(36).substring(2,9)}`,a={...e,id:i,amount:Number(e.amount),createdAt:r,updatedAt:r};Ys(n,{incomeSources:Ble(a),updatedAt:r}).catch(o=>{o.code==="not-found"?ea(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[a],allocations:{},totalIncome:0,availableToBudget:0}).catch(c=>$.warn(`Failed to create monthly budget doc: ${c}`)):$.warn(`Create income failed: ${o}`)});const s={...e,id:i,amount:Number(e.amount),createdAt:Cu(r),updatedAt:Cu(r)};return $.log(" Created income source (optimistic/embedded):",s.id),s}catch(n){throw $.warn(` BudgetService.createIncomeSource failed: ${n}`),new Error(`Failed to create income source: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateIncomeSource(e,n,r,i){try{$.log(" BudgetService.updateIncomeSource (Embedded) called for source:",n);const a=bt(Ze,"users",e,"monthlyBudgets",r);xE(a).then(s=>{if(!s.exists())return;const d=(s.data().incomeSources||[]).map(f=>{if(f.id===n){const h={...f,...i,updatedAt:xt.now()};return i.amount!==void 0&&(h.amount=Number(i.amount)),h}return f});Ys(a,{incomeSources:d,updatedAt:xt.now()})}).catch(s=>$.warn(`Update income failed: ${s}`)),$.log(" Updated income source (optimistic/embedded):",n)}catch(a){throw $.warn(` BudgetService.updateIncomeSource failed: ${a}`),a}}async deleteIncomeSource(e,n,r){try{$.log(" BudgetService.deleteIncomeSource (Embedded) called for source:",n);const i=bt(Ze,"users",e,"monthlyBudgets",r);xE(i).then(a=>{if(!a.exists())return;const c=(a.data().incomeSources||[]).filter(d=>d.id!==n);Ys(i,{incomeSources:c,updatedAt:xt.now()})}).catch(a=>$.warn(`Delete income failed: ${a}`)),$.log(" Deleted income source (optimistic/embedded):",n)}catch(i){throw $.warn(` BudgetService.deleteIncomeSource failed: ${i}`),new Error(`Failed to delete income source: ${i instanceof Error?i.message:"Unknown error"}`)}}async createEnvelopeAllocation(e){try{$.log(" BudgetService.createEnvelopeAllocation (Embedded) called for user:",e.userId);const n=bt(Ze,"users",e.userId,"monthlyBudgets",e.month),r=xt.now(),i={[`allocations.${e.envelopeId}`]:Number(e.budgetedAmount),updatedAt:r};Ys(n,i).catch(s=>{s.code==="not-found"?ea(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[],allocations:{[e.envelopeId]:Number(e.budgetedAmount)},totalIncome:0,availableToBudget:0}).catch(o=>$.warn(`Failed to create monthly budget doc: ${o}`)):$.warn(`Create allocation failed: ${s}`)});const a={...e,id:e.envelopeId,createdAt:Cu(r),updatedAt:Cu(r)};return $.log(" Created allocation (optimistic/embedded):",a.id),a}catch(n){throw $.warn(` BudgetService.createEnvelopeAllocation failed: ${n}`),new Error(`Failed to create envelope allocation: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelopeAllocation(e,n,r,i){try{$.log(" BudgetService.updateEnvelopeAllocation (Embedded) called for envelope:",n);const a=bt(Ze,"users",e,"monthlyBudgets",r),s={updatedAt:xt.now()};i.budgetedAmount!==void 0&&(s[`allocations.${n}`]=Number(i.budgetedAmount)),Ys(a,s).catch(o=>$.warn(`Update allocation failed: ${o}`)),$.log(" Updated allocation (optimistic/embedded):",n)}catch(a){throw $.warn(` BudgetService.updateEnvelopeAllocation failed: ${a}`),new Error(`Failed to update envelope allocation: ${a instanceof Error?a.message:"Unknown error"}`)}}async deleteEnvelopeAllocation(e,n,r){try{$.log(" BudgetService.deleteEnvelopeAllocation (Embedded) called for envelope:",n);const i=bt(Ze,"users",e,"monthlyBudgets",r);Ys(i,{[`allocations.${n}`]:iz(),updatedAt:xt.now()}).catch(a=>$.warn(`Delete allocation failed: ${a}`)),$.log(" Deleted allocation (optimistic/embedded):",n)}catch(i){throw $.warn(` BudgetService.deleteEnvelopeAllocation failed: ${i}`),new Error(`Failed to delete envelope allocation: ${i instanceof Error?i.message:"Unknown error"}`)}}async getMonthData(e,n){try{$.log(` BudgetService.getMonthData (Embedded): Fetching for user ${e}, month ${n}`);const r=bt(Ze,"users",e,"monthlyBudgets",n),i=await xE(r);if(!i.exists())return $.log(` No budget data found for ${n}, returning empty defaults.`),{incomeSources:[],allocations:[]};const a=i.data(),s=(a.incomeSources||[]).map(d=>({...d,amount:Number(d.amount),createdAt:d.createdAt?.toDate?d.createdAt.toDate().toISOString():d.createdAt||new Date().toISOString(),updatedAt:d.updatedAt?.toDate?d.updatedAt.toDate().toISOString():d.updatedAt||new Date().toISOString()})).sort((d,f)=>new Date(d.createdAt).getTime()-new Date(f.createdAt).getTime()),o=a.allocations||{},c=Object.entries(o).map(([d,f])=>({id:d,userId:e,envelopeId:d,month:n,budgetedAmount:Number(f),createdAt:a.createdAt?.toDate?a.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((d,f)=>new Date(d.createdAt).getTime()-new Date(f.createdAt).getTime());return $.log(` Fetched ${s.length} income sources and ${c.length} allocations for ${n}`),{incomeSources:s,allocations:c}}catch(r){throw $.warn(` BudgetService.getMonthData failed: ${r}`),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{$.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const n={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(v=>v.id));$.log(` Found ${r.length} existing envelopes`);const a=Fr(Ze,"users",e,"envelopeAllocations"),s=await Ji(a),o=[],c=new Set;for(const v of s.docs){const b=v.data();c.add(b.month),i.has(b.envelopeId)||(o.push(v.id),$.log(` Found orphaned allocation: ${v.id} for envelope ${b.envelopeId} in month ${b.month}`))}if(o.length>0){const v=o.map(b=>na(bt(Ze,"users",e,"envelopeAllocations",b)));await Promise.all(v),n.orphanedAllocationsDeleted+=o.length,n.details.deletedAllocationIds.push(...o),$.log(` Deleted ${o.length} orphaned allocations (legacy)`)}const d=Fr(Ze,"users",e,"monthlyBudgets"),f=await Ji(d);for(const v of f.docs){const x=v.data().allocations||{},w={};let _=!1;Object.keys(x).forEach(T=>{i.has(T)||(w[`allocations.${T}`]=iz(),_=!0,$.log(` Found orphaned embedded allocation in ${v.id} for envelope ${T}`),n.orphanedAllocationsDeleted++,n.details.deletedAllocationIds.push(`${v.id}_${T}`))}),_&&(w.updatedAt=xt.now(),await Ys(v.ref,w),c.add(v.id))}const h=await this.getTransactions(e),g=[];for(const v of h)i.has(v.envelopeId)||(g.push(v.id),$.log(` Found orphaned transaction: ${v.id} for envelope ${v.envelopeId}`));if(g.length>0){const v=g.map(b=>na(bt(Ze,"users",e,"transactions",b)));await Promise.all(v),n.orphanedTransactionsDeleted=g.length,n.details.deletedTransactionIds=g,$.log(` Deleted ${g.length} orphaned transactions`)}return n.details.monthsProcessed=Array.from(c),$.log(" Cleanup completed:",{orphanedAllocationsDeleted:n.orphanedAllocationsDeleted,orphanedTransactionsDeleted:n.orphanedTransactionsDeleted,monthsProcessed:n.details.monthsProcessed.length}),n}catch(n){throw $.warn(` BudgetService.cleanupOrphanedData failed: ${n}`),new Error(`Failed to cleanup orphaned data: ${n instanceof Error?n.message:"Unknown error"}`)}}subscribeToMonthlyBudget(e,n,r){const i=bt(Ze,"users",e,"monthlyBudgets",n);return Dc(i,a=>{if(!a.exists()){r({incomeSources:[],allocations:[]});return}const s=a.data(),o=(s.incomeSources||[]).map(f=>({...f,amount:Number(f.amount),createdAt:f.createdAt?.toDate?f.createdAt.toDate().toISOString():f.createdAt||new Date().toISOString(),updatedAt:f.updatedAt?.toDate?f.updatedAt.toDate().toISOString():f.updatedAt||new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime()),c=s.allocations||{},d=Object.entries(c).map(([f,h])=>({id:f,userId:e,envelopeId:f,month:n,budgetedAmount:Number(h),createdAt:s.createdAt?.toDate?s.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:s.updatedAt?.toDate?s.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime());r({incomeSources:o,allocations:d})})}prepareMonthlyBudgetsData(e,n){const r=[],i=new Set;return e&&Object.keys(e).forEach(a=>i.add(a)),n&&Object.keys(n).forEach(a=>i.add(a)),i.forEach(a=>{const s=e?.[a]||[],o=n?.[a]||[],c={};s.forEach(f=>{c[f.envelopeId]=f.budgetedAmount});const d={month:a,userId:"",incomeSources:o,allocations:c,totalIncome:o.reduce((f,h)=>f+Number(h.amount||0),0),availableToBudget:o.reduce((f,h)=>f+Number(h.amount||0),0)-s.reduce((f,h)=>f+Number(h.budgetedAmount||0),0),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r.push(d)}),r}async deleteAllUserData(e){try{$.log(" BudgetService.deleteAllUserData: STARTING DELETION for user:",e);const n=["envelopes","transactions","categories","incomeSources","envelopeAllocations","monthlyBudgets","appSettings"];for(const r of n){$.log(` Deleting collection: ${r}...`);const i=Fr(Ze,"users",e,r),a=await Ji(i);if(a.empty){$.log("   (Empty collection)");continue}const s=a.docs.map(o=>na(o.ref));await Promise.all(s),$.log(`    Deleted ${a.size} documents from ${r}`)}$.log(" All user data deleted successfully.")}catch(n){throw $.warn(` BudgetService.deleteAllUserData failed: ${n}`),new Error(`Failed to delete all user data: ${n instanceof Error?n.message:"Unknown error"}`)}}}const VI=us.getInstance(),n0e=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated?.toDate?.()?t.lastUpdated.toDate().toISOString():t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig,categoryId:t.categoryId}),r0e=t=>({id:t.id,userId:t.userId,name:t.name,orderIndex:t.orderIndex,isArchived:t.isArchived,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt}),pL=(t,e)=>{if(window.__firebaseUnsubscribers){$.log(" Real-time subscriptions already active, skipping setup");return}$.log(" Setting up real-time Firebase subscriptions...");const n=t.getState().currentMonth;$.log(" Current month for subscriptions:",n);const r=e0e.subscribeToEnvelopes(e,g=>{$.log(" Real-time sync: Envelopes updated",g.length);const v=g.map(n0e),b=t.getState(),x=new Set(b.envelopes.map(T=>T.id)),w=new Set(v.map(T=>T.id)),_=[...v.filter(T=>x.has(T.id)),...b.envelopes.filter(T=>!w.has(T.id))];t.setState({envelopes:_})}),i={},a=g=>{i[g]||(i[g]=Jve.subscribeToTransactionsByMonth(e,g,v=>{$.log(` Real-time sync: Transactions updated for ${g}`,v.length);const w=[...t.getState().transactions.filter(_=>_.month!==g),...v];t.setState({transactions:w})}))},s=[t.getState().currentMonth,...t.getState().loadedTransactionMonths||[]];Array.from(new Set(s)).forEach(g=>{g&&a(g)});const c=Go.getInstance().subscribeToCategories(e,g=>{$.log(" Real-time sync: Categories updated",g.length);const v=g.map(r0e),b=Array.from(new Map(v.map(x=>[x.id,x])).values());b.length!==v.length&&$.warn(" Duplicate categories detected in real-time update, deduplicating..."),t.setState({categories:b})}),d=t0e.subscribeToDistributionTemplates(e,g=>{$.log(" Real-time sync: Templates updated from Firebase",g.length)}),f=Qq.subscribeToAppSettings(e,g=>{$.log(" Real-time sync: Settings updated",g?"found":"null");const v=t.getState();if(g){const b={...v.appSettings,...g,paymentSources:g.paymentSources??v.appSettings?.paymentSources??[]};t.setState({appSettings:b})}else $.log(" Firebase settings null, preserving local state")}),h=VI.subscribeToMonthlyBudget(e,n,g=>{$.log(` Real-time sync: Monthly budget updated (${g.incomeSources.length} sources, ${g.allocations.length} allocations)`);const v=t.getState();t.setState({incomeSources:{...v.incomeSources,[n]:g.incomeSources},allocations:{...v.allocations,[n]:g.allocations}})});window.__firebaseUnsubscribers={envelopes:r,transactionMonths:i,categories:c,templates:d,settings:f,monthlyBudget:h,setupTransactionSubscription:a},$.log(" Real-time subscriptions active - cross-device sync enabled")},i0e=t=>{const{useBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{$.log(" Browser online event detected"),e.setState({isOnline:!0})}),window.addEventListener("offline",()=>{$.log(" Browser offline event detected"),e.setState({isOnline:!1})}),e.setState({isOnline:navigator.onLine});const i=n.getState();i.isAuthenticated&&i.currentUser&&($.log(" User already authenticated on app load, setting up real-time subscriptions"),pL(e,r())),n.subscribe(s=>{if(s.isAuthenticated&&s.currentUser)$.log(" User authenticated, setting up real-time subscriptions"),pL(e,r());else if(!s.isAuthenticated&&!s.isLoading){if($.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const o=window.__firebaseUnsubscribers;o.envelopes&&o.envelopes(),o.transactionMonths&&Object.values(o.transactionMonths).forEach(c=>c()),o.categories&&o.categories(),o.templates&&o.templates(),o.settings&&o.settings(),o.monthlyBudget&&o.monthlyBudget(),delete window.__firebaseUnsubscribers,$.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let a=[];e.subscribe(s=>{if(!n.getState().isAuthenticated)return;const c=Array.from(new Set([s.currentMonth,...s.loadedTransactionMonths||[]])).filter(Boolean).sort();if(c.some(f=>!a.includes(f))&&window.__firebaseUnsubscribers){const f=window.__firebaseUnsubscribers,h=f.setupTransactionSubscription;h&&c.forEach(v=>{a.includes(v)||h(v)});const g=a.find(v=>v===s.currentMonth)?s.currentMonth:null;if(s.currentMonth&&g!==s.currentMonth){const v=r();v&&f.monthlyBudget&&(f.monthlyBudget(),f.monthlyBudget=VI.subscribeToMonthlyBudget(v,s.currentMonth,b=>{$.log(` Real-time sync: Monthly budget updated for ${s.currentMonth}`);const x=e.getState();e.setState({incomeSources:{...x.incomeSources,[s.currentMonth]:b.incomeSources},allocations:{...x.allocations,[s.currentMonth]:b.allocations}})}))}a=c}})},Eu=us.getInstance(),Ry=()=>{const{currentUser:t}=Zt.getState();if(!t)throw new Error("No authenticated user found");return t},a0e=({set:t,get:e})=>({addTransaction:async n=>{try{t({isLoading:!0,error:null});const r=Ry(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,userId:r.id,month:a},o=await Eu.createTransaction(s);t(c=>c.transactions.some(f=>f.id===o.id)?{isLoading:!1}:{transactions:[...c.transactions,o],isLoading:!1}),$.log(" Added transaction:",o.id)}catch(r){throw $.error(" addTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async n=>{try{t({isLoading:!0,error:null});const r=Ry(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await Eu.updateTransaction(r.id,s),t(o=>({transactions:o.transactions.map(c=>c.id===n.id?s:c),isLoading:!1})),$.log(" Updated transaction:",n.id)}catch(r){throw $.error(" updateTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async n=>{try{t({isLoading:!0,error:null});const r=Ry();await Eu.deleteTransaction(r.id,n),t(i=>({transactions:i.transactions.filter(a=>a.id!==n),isLoading:!1})),$.log(" Deleted transaction:",n)}catch(r){throw $.error(" deleteTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async n=>{try{t({isLoading:!0,error:null});const r=Ry(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await Eu.updateTransaction(r.id,s),t(o=>{const c=o.transactions.findIndex(f=>f.id===n.id);let d;return c>=0?d=o.transactions.map(f=>f.id===n.id?s:f):d=[...o.transactions,s],{transactions:d,isLoading:!1}}),$.log(" Restored transaction:",n.id)}catch(r){throw $.error(" restoreTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to restore transaction"}),r}},transferFunds:async(n,r,i,a,s)=>{try{const o=s?typeof s=="string"?s:s.toISOString():new Date().toISOString(),c=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(d=>d.id===r)?.name||"envelope"}`,amount:i,envelopeId:n,date:o,type:"Expense",transferId:c,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(d=>d.id===n)?.name||"envelope"}`,amount:i,envelopeId:r,date:o,type:"Income",transferId:c,reconciled:!1}),$.log(" Transfer completed")}catch(o){throw $.error(" transferFunds failed:",o),o}},fetchTransactionsForMonth:async n=>{const r=e();if(!(r.areAllTransactionsLoaded||r.loadedTransactionMonths.includes(n)))try{const{currentUser:i}=Zt.getState();if(!i)return;t(s=>({loadedTransactionMonths:[...s.loadedTransactionMonths,n]})),$.log(` Fetching transactions for month: ${n}`);const a=await Eu.getTransactionsByMonth(i.id,n);t(s=>({transactions:[...s.transactions.filter(o=>o.month!==n),...a]})),$.log(` Loaded ${a.length} transactions for ${n}`)}catch(i){$.error(` Failed to fetch transactions for ${n}:`,i),t(a=>({loadedTransactionMonths:a.loadedTransactionMonths.filter(s=>s!==n)}))}},fetchTransactionsForEnvelope:async n=>{if(!e().areAllTransactionsLoaded)try{const{currentUser:i}=Zt.getState();if(!i)return;$.log(` Fetching transactions for envelope: ${n}`);const a=await Eu.getTransactionsByEnvelope(i.id,n);t(s=>{const o=new Map(s.transactions.map(c=>[c.id,c]));return a.forEach(c=>{o.set(c.id,c)}),{transactions:Array.from(o.values())}}),$.log(` Loaded ${a.length} transactions for envelope ${n}`)}catch(i){$.error(` Failed to fetch transactions for envelope ${n}:`,i)}},fetchAllTransactions:async()=>{if(!e().areAllTransactionsLoaded)try{t({isLoading:!0});const{currentUser:r}=Zt.getState();if(!r){t({isLoading:!1});return}$.log(" Fetching ALL transactions history...");const i=await Eu.getTransactions(r.id);t({transactions:i,areAllTransactionsLoaded:!0,isLoading:!1}),$.log(` Loaded complete history: ${i.length} transactions`)}catch(r){$.error(" Failed to fetch all transactions:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to fetch transaction history"})}},getEnvelopeBalance:(n,r)=>{const i=e(),a=i.envelopes.find(s=>s.id===n);if(!a)return $.log(` getEnvelopeBalance: Envelope ${n} not found`),0;if(a.isPiggybank){const s=i.transactions.filter(h=>h.envelopeId===n),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),d=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-d}if(r){const s=i.transactions.filter(h=>h.envelopeId===n&&h.month===r),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),d=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-d}return $.warn(` getEnvelopeBalance: Month not provided for non-piggybank envelope ${n}. Returning 0.`),0}}),yf=us.getInstance(),bf=()=>{const{currentUser:t}=Zt.getState();if(!t)throw new Error("No authenticated user found");return t},s0e=({set:t,get:e})=>({addEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=bf(),i={...n,userId:r.id},a=await yf.createEnvelope(i);return t(s=>s.envelopes.some(c=>c.id===a.id)?{isLoading:!1}:{envelopes:[...s.envelopes,a],isLoading:!1}),$.log(" Added envelope:",a.id),a.id}catch(r){throw $.error(" addEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=bf();await yf.updateEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.map(a=>a.id===n.id?n:a),isLoading:!1})),$.log(" Updated envelope:",n.id)}catch(r){throw $.error(" updateEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=bf();await yf.deleteEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.filter(a=>a.id!==n),transactions:i.transactions.filter(a=>a.envelopeId!==n),isLoading:!1})),$.log(" Deleted envelope:",n)}catch(r){throw $.error(" deleteEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async n=>{try{t({isLoading:!0,error:null});const r=e(),i=new Map;n.forEach((c,d)=>{i.set(c,d)});const a=r.envelopes.map(c=>{if(!i.has(c.id))return c;const d=i.get(c.id);return c.orderIndex===d?c:{...c,orderIndex:d}}),s=a.filter((c,d)=>c!==r.envelopes[d]);if(!s.length){t({isLoading:!1});return}const o=bf();await yf.reorderEnvelopes(o.id,s),t({envelopes:a,isLoading:!1}),$.log(" Reordered envelopes")}catch(r){throw $.error(" reorderEnvelopes failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},renameEnvelope:async(n,r)=>{try{t({isLoading:!0,error:null});const a=e().envelopes.find(c=>c.id===n);if(!a)throw new Error("Envelope not found");t(c=>({envelopes:c.envelopes.map(d=>d.id===n?{...d,name:r}:d),isLoading:!0}));const s=bf(),o={...a,name:r};await yf.updateEnvelope(s.id,o),t({isLoading:!1}),$.log(" Renamed envelope:",n)}catch(i){throw $.error(" renameEnvelope failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},removeEnvelopeFromMonth:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(` Removing envelope ${n} from month ${r}`);const i=e(),a=i.allocations[r]?.find(o=>o.envelopeId===n);a?await e().deleteEnvelopeAllocation(a.id):$.log(` No allocation found for envelope ${n} in ${r}`);const s=i.transactions.filter(o=>o.envelopeId===n&&(o.month===r||o.date.startsWith(r)));s.length>0&&($.log(` Deleting ${s.length} transactions for envelope ${n} in ${r}`),await Promise.all(s.map(o=>e().deleteTransaction(o.id)))),t({isLoading:!1}),$.log(` Removed envelope ${n} from month ${r}`)}catch(i){throw $.error(" removeEnvelopeFromMonth failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to remove envelope from month"}),i}},updatePiggybankContribution:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Updating piggybank contribution:",{envelopeId:n,newAmount:r});const i=bf(),a=e().envelopes.find(o=>o.id===n&&o.isPiggybank);if(!a)throw new Error("Piggybank not found");const s={...a,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:a.piggybankConfig?.targetAmount,color:a.piggybankConfig?.color,icon:a.piggybankConfig?.icon,paused:a.piggybankConfig?.paused??!1}};if($.log(" Updating envelope in Firestore:",s),await yf.updateEnvelope(i.id,s),$.log(" Envelope updated successfully"),t(o=>({envelopes:o.envelopes.map(c=>c.id===n?s:c),isLoading:!1})),!a.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(n,r),setTimeout(()=>{e().transactions.find(c=>c.envelopeId===n&&(c.description==="Monthly Allocation"||c.description==="Piggybank Contribution"))||$.warn(" Piggybank contribution transaction not found after update")},1e3)}catch(o){$.error(" Failed to update piggybank contribution:",o)}$.log(" Piggybank contribution updated successfully")}catch(i){throw $.error(" updatePiggybankContribution failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}}}),xf=us.getInstance(),wf=()=>{const{currentUser:t}=Zt.getState();if(!t)throw new Error("No authenticated user found");return t},o0e=({set:t,get:e})=>({addIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null});const i=wf();$.log(" Adding income source:",{month:n,source:r});const a=await xf.createIncomeSource({...r,userId:i.id,month:n});t(s=>{const o=s.incomeSources[n]||[];return o.some(d=>d.id===a.id)?{isLoading:!1}:{incomeSources:{...s.incomeSources,[n]:[...o,a]},isLoading:!1}}),$.log(" Added income source:",a.id)}catch(i){throw $.error(" addIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Updating income source:",{month:n,sourceId:r.id}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.map(s=>s.id===r.id?{...r,updatedAt:new Date().toISOString()}:s)||[]},isLoading:!1}));const{currentUser:i}=Zt.getState();if(!i)return;await xf.updateIncomeSource(i.id,r.id,n,r),$.log(" Updated income source:",r.id)}catch(i){throw $.error(" updateIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Deleting income source:",{month:n,sourceId:r}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.filter(s=>s.id!==r)||[]},isLoading:!1}));const{currentUser:i}=Zt.getState();if(!i)return;await xf.deleteIncomeSource(i.id,r,n),$.log(" Deleted income source:",r)}catch(i){throw $.error(" deleteIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async n=>{try{t({isLoading:!0,error:null});const r=wf();$.log(" Copying allocations from previous month:",n);const[i,a]=n.split("-").map(Number);let s=i,o=a-1;o<1&&(s=i-1,o=12);const c=`${s}-${String(o).padStart(2,"0")}`;(!e().incomeSources[c]||!e().allocations[c])&&($.log(` Previous month ${c} data missing, fetching...`),await e().fetchMonthData(c));const d=e().incomeSources[c]||[];if($.log(` Found ${d.length} income sources from ${c}`),d.length>0){for(const v of d){const{id:b,...x}=v;await e().addIncomeSource(n,x)}$.log(` Copied ${d.length} income sources to ${n}`)}const f=e().allocations[c]||[];$.log(` Found ${f.length} allocations from ${c}`);const h=f.filter(v=>{const b=e().envelopes.find(x=>x.id===v.envelopeId);return!!b&&!b.isPiggybank});if(h.length>0){for(const v of h)await e().createEnvelopeAllocation({envelopeId:v.envelopeId,budgetedAmount:v.budgetedAmount,userId:r.id,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),v.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:v.budgetedAmount,envelopeId:v.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0});$.log(` Copied ${h.length} regular allocations to ${n}`)}const g=e().envelopes.filter(v=>v.isPiggybank);$.log(` Processing ${g.length} piggybanks for ${n}`);for(const v of g){const b=v.piggybankConfig?.monthlyContribution,x=v.piggybankConfig?.paused??!1;if(!x&&b&&b>0)try{$.log(` Setting piggybank allocation for ${v.name}: ${b}`),await e().setEnvelopeAllocation(v.id,b)}catch(w){$.error(` Failed to set allocation for piggybank ${v.name}:`,w)}else $.log(` Skipping piggybank ${v.name} (paused=${x}, contribution=${b})`)}t({isLoading:!1}),$.log(` Complete monthly setup copied to ${n}`)}catch(r){throw $.error(" copyPreviousMonthAllocations failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(n,r)=>{try{t({isLoading:!0,error:null});const i=wf(),a=e().currentMonth,s=e().envelopes.find(d=>d.id===n);if(!s){$.error(` setEnvelopeAllocation: Envelope ${n} not found in store! Aborting.`),t({isLoading:!1});return}const o=!!s.isPiggybank;$.log(` setEnvelopeAllocation called: envelopeId=${n}, amount=${r}, currentMonth=${a}, isPiggybank=${o}`);const c=e().allocations[a]?.find(d=>d.envelopeId===n);if(c?await e().updateEnvelopeAllocation(c.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r,userId:i.id,month:a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o&&r>0&&!s?.piggybankConfig?.paused){const d=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));if(d){const f={...d,amount:r,description:"Piggybank Contribution"};await e().updateTransaction(f)}else{const f={description:"Piggybank Contribution",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}if(!o&&r>0){const d=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));if(d){const f={...d,amount:r,description:"Budgeted"};await e().updateTransaction(f)}else{const f={description:"Budgeted",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}$.log(" Envelope allocation set successfully")}catch(i){throw $.error(" setEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async n=>{try{const r=wf(),i=e().currentMonth,a=await xf.createEnvelopeAllocation({envelopeId:n.envelopeId,budgetedAmount:n.budgetedAmount,userId:r.id,month:i});t(s=>{const o=s.allocations[i]||[];return o.some(d=>d.id===a.id)?{isLoading:!1}:{allocations:{...s.allocations,[i]:[...o,a]},isLoading:!1}}),$.log(" Created envelope allocation:",a.id)}catch(r){throw $.error(" createEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(n,r)=>{try{$.log(" Updating envelope allocation:",{id:n,updates:r});const i=e().currentMonth,a=wf(),s=e().allocations[i]?.find(d=>d.id===n);if(!s)throw new Error("Allocation not found");const o=e().envelopes.find(d=>d.id===s.envelopeId),c=o?.isPiggybank;if(await xf.updateEnvelopeAllocation(a.id,s.envelopeId,i,{budgetedAmount:r.budgetedAmount}),t(d=>({allocations:{...d.allocations,[i]:d.allocations[i]?.map(f=>f.id===n?{...f,...r,updatedAt:new Date().toISOString()}:f)||[]},isLoading:!1})),c&&r.budgetedAmount!==void 0){const d=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));d?r.budgetedAmount>0&&!o?.piggybankConfig?.paused?await e().updateTransaction({...d,amount:r.budgetedAmount,description:"Piggybank Contribution"}):(r.budgetedAmount===0||o?.piggybankConfig?.paused)&&await e().deleteTransaction(d.id):r.budgetedAmount>0&&!o?.piggybankConfig?.paused&&await e().addTransaction({description:"Piggybank Contribution",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!c&&r.budgetedAmount!==void 0){const d=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));d?r.budgetedAmount>0?await e().updateTransaction({...d,amount:r.budgetedAmount,description:"Budgeted"}):r.budgetedAmount===0&&await e().deleteTransaction(d.id):r.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}$.log(" Updated envelope allocation:",n)}catch(i){throw $.error(" updateEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async n=>{try{$.log(" Deleting envelope allocation:",n);const r=e().currentMonth,i=e().allocations[r]?.find(s=>s.id===n);if(!i){$.warn("Allocation not found in store, skipping delete");return}const a=wf();await xf.deleteEnvelopeAllocation(a.id,i.envelopeId,r),t(s=>({allocations:{...s.allocations,[r]:s.allocations[r]?.filter(o=>o.id!==n)||[]},isLoading:!1})),$.log(" Deleted envelope allocation:",n)}catch(r){throw $.error(" deleteEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const n=e().currentMonth,r=e().allocations[n]||[],i=e().incomeSources[n]||[],a=r.reduce((c,d)=>c+d.budgetedAmount,0);return i.reduce((c,d)=>c+d.amount,0)-a}catch(n){throw $.error(" refreshAvailableToBudget failed:",n),t({error:n instanceof Error?n.message:"Failed to refresh available to budget"}),n}}}),Fs=Go.getInstance(),ag=()=>{const{currentUser:t}=Zt.getState();if(!t)throw new Error("No authenticated user found");return t},l0e=({set:t,get:e})=>({fetchCategories:async()=>{try{t({isLoading:!0,error:null});const{currentUser:n}=Zt.getState();if(!n)return;const r=await Fs.getCategories(n.id),i=Array.from(new Map(r.map(a=>[a.id,a])).values());t({categories:i,isLoading:!1})}catch(n){$.error("Failed to fetch categories:",n),t({isLoading:!1})}},addCategory:async n=>{try{t({isLoading:!0,error:null});const r=ag(),i=e().categories.find(o=>o.name.toLowerCase().trim()===(n.name||"").toLowerCase().trim());if(i)return $.log(` Category "${n.name}" already exists, skipping creation`),t({isLoading:!1}),i.id;const a=Fs.createId(),s={...n,id:a,userId:r.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),orderIndex:e().categories.length};return await Fs.createCategory(s),t(o=>o.categories.some(d=>d.id===a)?{isLoading:!1}:{categories:[...o.categories,s],isLoading:!1}),a}catch(r){throw $.error("Failed to add category:",r),t({isLoading:!1}),r}},updateCategory:async n=>{try{t({isLoading:!0,error:null});const r=ag(),i={...n,updatedAt:new Date().toISOString()};await Fs.updateCategory(r.id,i),t(a=>({categories:a.categories.map(s=>s.id===n.id?i:s),isLoading:!1}))}catch(r){throw $.error("Failed to update category:",r),t({isLoading:!1}),r}},deleteCategory:async n=>{try{t({isLoading:!0,error:null});const r=ag(),i=e().envelopes.filter(a=>a.categoryId===n);if(i.length>0){let a=e().categories.find(s=>s.name.toLowerCase().trim()==="uncategorized"&&s.id!==n);if(!a){const s=Fs.createId(),o=new Date().toISOString();a={id:s,userId:r.id,name:"Uncategorized",orderIndex:e().categories.length,isDefault:!0,createdAt:o,updatedAt:o},await Fs.createCategory(a),t(c=>c.categories.some(f=>f.id===s)?{}:{categories:[...c.categories,a]}),$.log(' Created new "Uncategorized" category for orphaned envelopes:',s)}for(const s of i){const o={...s,categoryId:a.id};await e().updateEnvelope(o)}$.log(` Reassigned ${i.length} envelopes to "Uncategorized"`)}await Fs.deleteCategory(r.id,n),t(a=>({categories:a.categories.filter(s=>s.id!==n),isLoading:!1}))}catch(r){throw $.error("Failed to delete category:",r),t({isLoading:!1}),r}},ensureDefaultCategory:async()=>{const n=e().categories.find(o=>o.isDefault);if(n)return n.id;const r=ag(),i=Fs.createId(),a=new Date().toISOString(),s={id:i,userId:r.id,name:"Uncategorized",orderIndex:e().categories.length,isDefault:!0,createdAt:a,updatedAt:a};return await Fs.createCategory(s),t(o=>o.categories.some(d=>d.id===i)?{}:{categories:[...o.categories,s]}),$.log(' Created default "Uncategorized" category:',i),i},reorderCategories:async n=>{try{t({isLoading:!0,error:null});const r=ag(),i=e(),a=new Map;n.forEach((o,c)=>a.set(o,c));const s=i.categories.map(o=>{if(!a.has(o.id))return o;const c=a.get(o.id);return o.orderIndex===c?o:{...o,orderIndex:c}});t({categories:s.sort((o,c)=>o.orderIndex-c.orderIndex)}),await Fs.reorderCategories(r.id,s),t({isLoading:!1})}catch(r){throw $.error("Failed to reorder categories:",r),t({isLoading:!1}),r}}}),c0e=us.getInstance(),Tu=()=>Zt.getState().currentUser?.id||"",u0e=({set:t,get:e})=>({setIsOnboardingActive:n=>{t({isOnboardingActive:n})},checkAndStartOnboarding:async()=>{const n=Tu();if(!n){$.log(" No user ID, skipping onboarding check");return}const r=`onboardingCompleted_${n}`,i=typeof localStorage<"u"?localStorage.getItem(r)==="true":!1;$.log(" checkAndStartOnboarding called:",{userId:n,isOnboardingCompleted:i,isOnboardingActive:e().isOnboardingActive,localStorage_key:r,localStorage_value:localStorage.getItem(r)});const a=`guidedTutorialCompleted_${n}`,s=typeof localStorage<"u"?localStorage.getItem(a)==="true":!1;if(i){t({isOnboardingCompleted:!0,guidedTutorialCompleted:s}),$.log(" Skipping onboarding: already completed (localStorage)",{isTutorialCompleted:s});return}try{if((await c0e.getEnvelopes(n)).length>0){$.log(" Existing user detected on new device  skipping onboarding, setting localStorage"),localStorage.setItem(r,"true"),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}}catch(o){$.error(" Failed to check existing envelopes for onboarding:",o),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}e().isOnboardingActive||($.log(" Starting onboarding for new user - setting isOnboardingActive to TRUE"),t({isOnboardingCompleted:!1,isOnboardingActive:!0}),$.log(" isOnboardingActive set to:",e().isOnboardingActive))},completeOnboarding:()=>{const n=Tu();if(n){const r=`onboardingCompleted_${n}`;localStorage.setItem(r,"true"),$.log(" Onboarding completed for user:",n)}t({isOnboardingCompleted:!0,isOnboardingActive:!1})},resetOnboarding:()=>{const n=Tu();if(n){const r=`onboardingCompleted_${n}`;localStorage.removeItem(r),$.log(" Onboarding reset for user:",n)}t({isOnboardingCompleted:!1,isOnboardingActive:!0})},startGuidedTutorial:()=>{$.log(" Starting guided tutorial"),t({guidedTutorialStep:0,guidedTutorialCompleted:!1})},advanceGuidedTutorial:()=>{const n=e().guidedTutorialStep;if(n===null)return;const r=n+1;if(r>=4){const a=Tu();a&&localStorage.setItem(`guidedTutorialCompleted_${a}`,"true"),$.log(" Guided tutorial completed!"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})}else $.log(" Advancing guided tutorial to step:",r),t({guidedTutorialStep:r})},skipGuidedTutorial:()=>{const n=Tu();n&&localStorage.setItem(`guidedTutorialCompleted_${n}`,"true"),$.log(" Guided tutorial skipped"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})},completeGuidedTutorial:()=>{const n=Tu();n&&localStorage.setItem(`guidedTutorialCompleted_${n}`,"true"),$.log(" Guided tutorial completed!"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})},resetGuidedTutorial:()=>{const n=Tu();n&&localStorage.removeItem(`guidedTutorialCompleted_${n}`),$.log(" Guided tutorial reset  starting at step 0"),t({guidedTutorialStep:0,guidedTutorialCompleted:!1})}}),d0e=({set:t,get:e})=>({updateAppSettings:async n=>{try{t({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:n.theme??r.appSettings?.theme??"system",fontSize:n.fontSize??r.appSettings?.fontSize??"medium",enableMoveableReorder:n.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,paymentSources:n.paymentSources??r.appSettings?.paymentSources??[],siriToken:n.siriToken??r.appSettings?.siriToken};(n.userId||r.appSettings?.userId)&&(i.userId=n.userId??r.appSettings?.userId),i.paymentSources&&(i.paymentSources=i.paymentSources.map(s=>{const o={...s};return o.last4===void 0&&delete o.last4,o}));const{currentUser:a}=Zt.getState();if(a){const{AppSettingsService:s}=await eh(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>hL);return{AppSettingsService:o}},void 0);await s.updateAppSettings(a.id,i.id,i)}t({appSettings:i,isLoading:!1}),$.log(" Updated app settings")}catch(r){throw $.error(" updateAppSettings failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;const{currentUser:r}=Zt.getState();if(r){const{AppSettingsService:a}=await eh(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>hL);return{AppSettingsService:o}},void 0),s=await a.getAppSettings(r.id);if(s){t({appSettings:s}),$.log(" Loaded app settings from Firestore");return}}const i={id:"default",theme:"system",fontSize:"medium",enableMoveableReorder:!0,paymentSources:[]};r&&(i.userId=r.id),t({appSettings:i}),$.log(" Initialized default app settings")}catch(n){$.error(" initializeAppSettings failed:",n),t({error:n instanceof Error?n.message:"Failed to initialize settings"})}},updateOnlineStatus:async()=>{try{const n=typeof navigator<"u"?navigator.onLine:!0;t({isOnline:n}),$.log(" Online status updated:",n)}catch(n){$.error(" Failed to update online status:",n)}}}),sg=us.getInstance(),nT=Go.getInstance(),gL=()=>{const{currentUser:t}=Zt.getState();if(!t)throw new Error("No authenticated user found");return t},f0e=({set:t,get:e})=>({setMonth:async n=>{t({currentMonth:n});const r=e();r.loadedTransactionMonths.includes(n)||t(a=>({loadedTransactionMonths:[...a.loadedTransactionMonths,n]})),(r.incomeSources[n]===void 0||r.allocations[n]===void 0)&&($.log(`Month ${n} budget data missing in store, fetching...`),t({isLoading:!0}),await e().fetchMonthData(n),t({isLoading:!1}))},init:async()=>{$.log("BudgetStore initializing...");const n=e();try{t({isLoading:!0,error:null});const{currentUser:r}=Zt.getState();if(!r){$.log("No user logged in, skipping data fetch"),t({isLoading:!1});return}$.log(`Fetching data for user: ${r.id}, month: ${n.currentMonth}`);const[i,a,s]=await Promise.all([sg.getEnvelopes(r.id),nT.getCategories(r.id).catch(b=>($.error(" Failed to load categories:",b),[])),sg.getMonthData(r.id,n.currentMonth)]),o=[n.currentMonth];let c=Array.from(new Map(a.map(b=>[b.id,b])).values());const d=new Set;let f=!1;for(const b of c){const x=b.name.toLowerCase().trim();if(d.has(x)){f=!0;break}d.add(x)}f&&r&&($.log(" Duplicate category names detected, running Firestore cleanup..."),await nT.deduplicateCategories(r.id)>0&&(c=await nT.getCategories(r.id))),t({envelopes:i,loadedTransactionMonths:o,areAllTransactionsLoaded:!1,categories:c,incomeSources:{...n.incomeSources,[n.currentMonth]:s.incomeSources},allocations:{...n.allocations,[n.currentMonth]:s.allocations},isLoading:!1,error:null}),$.log(` BudgetStore initialized: ${i.length} envelopes, current month: ${n.currentMonth}`);const h=e(),g=new Set(h.transactions.map(b=>b.month)),v=Array.from(g).filter(b=>b!==void 0&&b!==h.currentMonth&&(!h.incomeSources[b]||!h.allocations[b]));if(v.length>0){$.log(` Auto-fixing ${v.length} lazy loading gaps: ${v.join(", ")}`);for(const b of v)try{await e().fetchMonthData(b);const x=e();(!x.incomeSources[b]||!x.allocations[b])&&($.log(` Creating empty month data for ${b} (no budget data found in Firestore)`),t(w=>({incomeSources:{...w.incomeSources,[b]:[]},allocations:{...w.allocations,[b]:[]}}))),$.log(` Fixed lazy loading gap for ${b}`)}catch(x){$.error(` Failed to fix lazy loading gap for ${b}:`,x)}}else $.log(" No lazy loading gaps detected for current month transactions")}catch(r){$.error(" BudgetStore initialization failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},fetchData:async()=>{await e().init()},fetchMonthData:async n=>{try{const{currentUser:r}=Zt.getState();if(!r){$.log("No user logged in, skipping month data fetch");return}$.log(`Fetching month data for: ${n}`),e().loadedTransactionMonths.includes(n)||t(s=>({loadedTransactionMonths:[...s.loadedTransactionMonths,n]}));const i=await sg.getMonthData(r.id,n),a=e();if(t({incomeSources:{...a.incomeSources,[n]:i.incomeSources},allocations:{...a.allocations,[n]:i.allocations}}),$.log(` Fetched budget data for ${n}`),n===e().currentMonth){const s=async()=>{try{const o=e(),c=o.allocations[n]||[],d=o.transactions.filter(h=>h.month===n);let f=0;for(const h of c){const g=o.envelopes.find(b=>b.id===h.envelopeId);if(g?.isPiggybank)continue;const v=d.find(b=>b.envelopeId===h.envelopeId&&(b.description==="Monthly Budget Allocation"||b.description==="Monthly Allocation"||b.description==="Budgeted"||b.description==="Piggybank Contribution"));v?v.amount!==h.budgetedAmount&&($.log(` Repairing mismatch for envelope ${g?.name||h.envelopeId}: Alloc ${h.budgetedAmount} vs Tx ${v.amount}`),await o.updateTransaction({...v,amount:h.budgetedAmount}),f++):h.budgetedAmount>0&&($.log(` Repairing missing transaction for envelope ${g?.name||h.envelopeId}`),await o.addTransaction({description:"Budgeted",amount:h.budgetedAmount,envelopeId:h.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),f++)}f>0&&$.log(` Repaired ${f} allocation discrepancies for ${n}`)}catch(o){$.error(` Verification failed for ${n}:`,o)}};setTimeout(()=>{s().catch(o=>$.error("Verification failed:",o))},1e3)}}catch(r){$.error(` Failed to fetch month data for ${n}:`,r)}},clearMonthData:async n=>{try{t({isLoading:!0,error:null}),$.log(` Clearing all data for month: ${n}`);const r=gL(),{monthlyBudgetService:i}=await eh(async()=>{const{monthlyBudgetService:a}=await import("./MonthlyBudgetService-CBKGhzzH.js");return{monthlyBudgetService:a}},[]);await i.clearMonthData(r.id,n),await e().init(),$.log(` Cleared month data for ${n}`),t({isLoading:!1})}catch(r){throw $.error(" clearMonthData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to clear month data"}),r}},resetData:async()=>{$.log(" Resetting all data"),t({isLoading:!0});try{const{currentUser:n}=Zt.getState();n?($.log(" Deleting all data from Firestore for user:",n.id),await sg.deleteAllUserData(n.id)):$.warn(" No user logged in, only clearing local state"),t({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null}),$.log(" Reset data complete")}catch(n){throw $.error(" resetData failed:",n),t({isLoading:!1,error:n instanceof Error?n.message:"Failed to reset data"}),n}},importData:async n=>{try{if(t({isLoading:!0,error:null}),!n||typeof n!="object")throw new Error("Invalid data format");const r=gL();return $.log(" Starting Time Machine Restore for user:",r.id),await sg.restoreUserData(r.id,n),$.log(" Reloading app state from cloud..."),await e().init(),t({isLoading:!1}),{success:!0,message:"Data restored successfully from backup."}}catch(r){return $.error(" importData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},handleUserLogout:()=>{$.log(" Clearing user data on logout"),t({envelopes:[],transactions:[],categories:[],incomeSources:{},allocations:{},isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null})}}),h0e=()=>Zt.getState().currentUser?.id||"",pt=D2()(Aae(j9((t,e)=>({envelopes:[],transactions:[],categories:[],appSettings:null,incomeSources:{},allocations:{},loadedTransactionMonths:[],areAllTransactionsLoaded:!1,currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isOnboardingActive:!1,isOnboardingCompleted:!1,guidedTutorialStep:null,guidedTutorialCompleted:!1,isLoading:!1,error:null,...a0e({set:t,get:e}),...s0e({set:t,get:e}),...o0e({set:t,get:e}),...l0e({set:t,get:e}),...u0e({set:t,get:e}),...d0e({set:t,get:e}),...f0e({set:t,get:e})}),{name:"budget-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,categories:t.categories,appSettings:t.appSettings,incomeSources:t.incomeSources,allocations:t.allocations,currentMonth:t.currentMonth,isOnline:t.isOnline})})));i0e({useBudgetStore:pt,useAuthStore:Zt,getCurrentUserId:h0e});const Zq=Object.freeze(Object.defineProperty({__proto__:null,useBudgetStore:pt},Symbol.toStringTag,{value:"Module"})),mL=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&t.seconds!==void 0)return new Date(t.seconds*1e3);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}if(typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?null:e}return null},p0e=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,reorderEnvelopes:a}=pt(),{currentUser:s}=Zt(),{currentMonth:o,incomeSources:c,allocations:d,deleteIncomeSource:f,setEnvelopeAllocation:h,copyPreviousMonthAllocations:g,isLoading:v}=pt(),{showToast:b}=Hc(),[x,w]=A.useState(!1),_=A.useRef(null),[T,N]=A.useState(!1),D=!T||r||v,[P,O]=A.useState([]),C=A.useRef([]),[I,R]=A.useState([]),j=A.useRef([]),L=A.useCallback(te=>t.find(re=>re.id===te)?.isPiggybank?pt.getState().getEnvelopeBalance(te):pt.getState().getEnvelopeBalance(te,o),[t,o]);A.useEffect(()=>{const te=t.filter(W=>{if(!W.isPiggybank||!W.isActive)return!1;if(W.createdAt)try{const ue=mL(W.createdAt);if(!ue)return $.error(` Invalid creation date for piggybank ${W.name}:`,W.createdAt),!1;const re=`${ue.getFullYear()}-${String(ue.getMonth()+1).padStart(2,"0")}`;return o>=re}catch(ue){return $.error(` Error processing piggybank ${W.name}:`,ue,{createdAt:W.createdAt,typeofCreatedAt:typeof W.createdAt}),!1}return!0}).sort((W,ue)=>{const re=W.orderIndex??0,oe=ue.orderIndex??0;return re-oe});R(te),j.current=te},[t,o]);const B=I,z=P;A.useEffect(()=>(_.current=setTimeout(()=>{w(!0)},8e3),n(),N(!0),()=>{_.current&&clearTimeout(_.current)}),[]),A.useEffect(()=>{T&&!r&&!v&&(w(!1),_.current&&clearTimeout(_.current))},[T,r,v]),A.useEffect(()=>{const te=t.filter(W=>{if(W.isPiggybank||W.isActive===!1)return!1;const re=(d[o]||[]).some(we=>we.envelopeId===W.id),oe=e.some(we=>we.envelopeId===W.id&&(we.month===o||we.date.startsWith(o)));return re||oe}).sort((W,ue)=>{const re=W.orderIndex??0,oe=ue.orderIndex??0;return re-oe});O(te),C.current=te},[t,d,o,e]);const Y=(c[o]||[]).reduce((te,W)=>te+W.amount,0),Z=(d[o]||[]).filter(te=>z.some(W=>W.id===te.envelopeId)||B.some(W=>W.id===te.envelopeId)).reduce((te,W)=>te+W.budgetedAmount,0),G=Y-Z,K=A.useCallback(async te=>{if(!te.length)return;const W=te.map(ue=>ue.id);try{await a(W)}catch(ue){$.error("Failed to persist envelope order:",ue),b("Failed to save envelope order","error")}},[a,b]),X=A.useCallback(async te=>{await K(te)},[K]),ee=A.useCallback(te=>{f(o,te.id).catch($.error),b(`Deleted "${te.name}"`,"neutral")},[f,o,b]),J=A.useCallback(async te=>{try{const W=te||o;$.log(" Copying to month:",W),await g(W),b("Previous month budget copied","success")}catch(W){$.error("Error copying previous month:",W),b("Failed to copy previous month","error")}},[g,b,o]),F=A.useCallback(async()=>{if(!s||!o){b("Cannot clear data: not logged in or no month selected","error");return}try{await pt.getState().clearMonthData(o),b(`"${o}" budget and transactions cleared successfully`,"success")}catch(te){$.error("Error clearing month data:",te),b("Failed to clear month data","error")}},[s,o,b]),Q=A.useCallback(async(te,W)=>{try{await h(te,W),setTimeout(()=>{const ue=pt.getState(),re=ue.currentMonth,oe=ue.incomeSources[re]||[],we=ue.allocations[re]||[],se=new Set(ue.envelopes.filter(Ie=>{if(Ie.isPiggybank){if(!Ie.isActive)return!1;if(Ie.createdAt){const ye=mL(Ie.createdAt);if(!ye)return!1;const Se=`${ye.getFullYear()}-${String(ye.getMonth()+1).padStart(2,"0")}`;return re>=Se}return!0}return Ie.isActive!==!1}).map(Ie=>Ie.id)),Ee=we.filter(Ie=>se.has(Ie.envelopeId)),ge=oe.reduce((Ie,ye)=>Ie+ye.amount,0),ne=Ee.reduce((Ie,ye)=>Ie+ye.budgetedAmount,0);ge-ne<-.005?b(`You can't spend more than you make.
You're not in Congress!`,"error"):Math.abs(ge-ne)<.005&&ge>0&&b("Every dollar has a job ","success")},100)}catch(ue){$.error("Failed to set allocation:",ue),b("Failed to update budget","error")}},[h,b]);return{visibleEnvelopes:z,piggybanks:B,incomeSources:c,availableToBudget:G,currentMonth:o,allocations:d,transactions:e,isLoading:r,isInitialLoading:D,isOnline:i,showTimeoutMessage:x,getEnvelopeBalance:L,fetchData:n,reorderEnvelopes:X,deleteIncomeSource:ee,clearMonthData:F,copyFromPreviousMonth:J,setEnvelopeAllocation:Q,localOrderRef:C,setLocalEnvelopes:O,localPiggybankOrderRef:j,setLocalPiggybanks:R}},g0e=({currentMonth:t,onMonthChange:e,budgetStatus:n})=>{const[r,i]=t.split("-").map(Number),s=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],o=()=>{let h=r,g=i-1;g<1&&(h=r-1,g=12);const v=`${h}-${g.toString().padStart(2,"0")}`;e(v)},c=()=>{let h=r,g=i+1;g>12&&(h=r+1,g=1);const v=`${h}-${g.toString().padStart(2,"0")}`;e(v)},d=()=>{const h=new Date,g=`${h.getFullYear()}-${(h.getMonth()+1).toString().padStart(2,"0")}`;e(g)},f=()=>{if(!n)return null;const{amount:h,totalIncome:g,totalAllocated:v}=n,b=typeof h=="number"?h:0,x=typeof g=="number"?g:0,w=typeof v=="number"?v:0,_=Math.abs(b)<.005,T=b<-.005,N=x>0?w/x*100:0;let D="text-gray-900 dark:text-white",P="bg-green-500",O="Left to Budget",C=x>0?Math.min(N,100):0,I=!0;return x===0?(O="Add income to start budgeting",C=0,I=!1,D="text-gray-500 dark:text-zinc-500"):_?(D="text-green-600 dark:text-emerald-400",P="bg-green-500",O="Perfect! Every dollar has a job ",C=100,I=!1):T&&(D="text-red-600 dark:text-red-400",P="bg-red-500",O="You're not in Congress! Try again.",C=100),m.jsxs("div",{className:"flex flex-col justify-center min-w-0 w-full",children:[m.jsxs("div",{className:"flex items-baseline justify-start mb-1",children:[m.jsx("span",{className:`text-xs font-medium truncate mr-1.5 ${D}`,children:O}),I&&m.jsxs("span",{className:`text-sm font-bold truncate ${D}`,children:[T?"-":"","$",Math.abs(b).toFixed(2)]})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${P}`,style:{width:`${C}%`}})})]})};return m.jsxs("div",{className:"py-2 space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-center gap-4",children:[m.jsx("button",{onClick:o,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:m.jsx(iie,{size:20})}),m.jsx("div",{className:"text-center",children:m.jsxs("button",{onClick:d,className:"text-base font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors whitespace-nowrap",title:"Click to go to current month",children:[s," ",r]})}),m.jsx("button",{onClick:c,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:m.jsx(rs,{size:20})})]}),n&&m.jsx("div",{className:"px-1",children:f()})]})},rw=({children:t,onDelete:e,threshold:n=-100,disabled:r=!1})=>{const i=Che(),[a,s]=A.useState(!1),o=A.useRef(0),c=()=>{r||(s(!0),o.current=Date.now())},d=async(f,h)=>{if(r)return;const g=h.offset.x,v=h.velocity.x;if(setTimeout(()=>s(!1),100),g<n||g<-50&&v<-500){const b=e();b===!1?i.start({x:0}):b instanceof Promise&&b.then(x=>{x===!1&&i.start({x:0})})}else i.start({x:0})};return m.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[m.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:m.jsx(Qg,{className:"text-white w-6 h-6"})}),m.jsx(gt.div,{drag:r?!1:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:d,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${a?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:a?"none":"auto"},children:t})]})},m0e=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:s}=pt(),{showToast:o}=Hc(),[c,d]=A.useState(""),[f,h]=A.useState(""),[g,v]=A.useState(!1);A.useEffect(()=>{if(!t)return;const x=window.setTimeout(()=>{n==="edit"&&r?(d(r.name),h(r.amount.toString())):(d(""),h(""))},0);return()=>window.clearTimeout(x)},[t,n,r]);const b=async x=>{if(x.preventDefault(),!c.trim()||!f||parseFloat(f)<=0){o("Please fill in all required fields with valid values","error");return}v(!0);try{if(n==="add")await i(s,{name:c.trim(),amount:parseFloat(f),month:s,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o("Income source added successfully","success");else{if(!r){o("Error: No income source to edit","error");return}await a(s,{...r,name:c.trim(),amount:parseFloat(f),updatedAt:new Date().toISOString()}),o(`Updated "${c.trim()}" income source`,"success")}e()}catch(w){$.error("Error saving income source:",w),o("Failed to save income source. Please try again.","error")}finally{v(!1)}};return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(gt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),m.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),m.jsx("input",{type:"text",value:c,onChange:x=>d(x.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:x=>{const w=x.target.value.replace(/\D/g,"");if(!w){h("");return}const T=(parseInt(w,10)/100).toFixed(2);h(T)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:g||!c.trim()||!f||parseFloat(f)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})]})})},v0e=({isVisible:t,onClose:e,categories:n,currentCategoryId:r,envelopeName:i,onSelect:a})=>(A.useEffect(()=>{if(t){const s=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${s}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,s)}}},[t]),m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4",children:[m.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(gt.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-t-2xl sm:rounded-2xl w-full sm:max-w-sm max-h-[70vh] overflow-hidden relative z-10 pb-[calc(env(safe-area-inset-bottom)+5rem)]",children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(P2,{size:18,className:"text-blue-600 dark:text-blue-400"}),m.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Move Envelope"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors text-lg",children:""})]}),m.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-zinc-800/50",children:m.jsxs("p",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Moving ",m.jsx("span",{className:"font-medium text-gray-700 dark:text-zinc-300",children:i})," to:"]})}),m.jsx("div",{className:"overflow-y-auto max-h-[50vh]",children:n.map(s=>{const o=s.id===r;return m.jsxs("button",{onClick:()=>{o||a(s.id)},disabled:o,className:`w-full flex items-center justify-between px-4 py-3 transition-colors ${o?"bg-blue-50 dark:bg-blue-900/20 cursor-default":"hover:bg-gray-50 dark:hover:bg-zinc-800 active:bg-gray-100 dark:active:bg-zinc-700"}`,children:[m.jsx("span",{className:`text-sm ${o?"font-semibold text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-white"}`,children:s.name}),o&&m.jsx(O2,{size:16,className:"text-blue-600 dark:text-blue-400"})]},s.id)})})]})]})})),y0e=({currentMonth:t,onCopy:e,isLoading:n=!1})=>{const r=o=>{const[c,d]=o.split("-");return new Date(parseInt(c),parseInt(d)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},i=o=>{const[c,d]=o.split("-").map(Number);let f=c,h=d-1;return h<1&&(f=c-1,h=12),r(`${f}-${h.toString().padStart(2,"0")}`)},a=r(t),s=i(t);return m.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 py-12 space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-blue-100 dark:bg-blue-900/30 blur-2xl rounded-full opacity-50"}),m.jsxs("div",{className:"relative bg-white dark:bg-zinc-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-700",children:[m.jsx(Qre,{className:"w-12 h-12 text-blue-500"}),m.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-white p-1.5 rounded-full border-2 border-white dark:border-zinc-900",children:m.jsx(Wf,{size:14})})]})]}),m.jsxs("div",{className:"max-w-xs mx-auto space-y-2",children:[m.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["It looks like you need a budget for ",a]}),m.jsxs("p",{className:"text-gray-500 dark:text-zinc-400",children:["We can copy your budget from ",s," to get you started right away."]})]}),m.jsx("div",{className:"w-full max-w-xs space-y-3 pt-2",children:m.jsx("button",{onClick:e,disabled:n,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-sm transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?"Creating...":m.jsx(m.Fragment,{children:m.jsxs("span",{children:["Create ",a," Budget"]})})})})]})},b0e="/personal-budget-pwa/icon-512.png",rT="/personal-budget-pwa/images/budget-balanced.png",My=["Giving","Savings","Housing","Transportation","Food","Personal","Health","Insurance","Debt"],x0e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-green-400 dark:border-green-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Income Sources"}),m.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:m.jsx(xd,{size:12,className:"text-white"})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsx("span",{className:"text-[10px] text-gray-700 dark:text-zinc-300",children:"Salary"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-emerald-400",children:"$3,500.00"})]}),m.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsx("span",{className:"text-[10px] text-gray-700 dark:text-zinc-300",children:"Freelance"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-emerald-400",children:"$800.00"})]})]})]}),w0e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-purple-400 dark:border-purple-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-purple-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Food"}),m.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:m.jsx(xd,{size:12,className:"text-white"})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Groceries"}),m.jsx("div",{className:"w-16 h-1 bg-gray-200 dark:bg-zinc-600 rounded-full mt-0.5",children:m.jsx("div",{className:"w-10 h-1 bg-purple-500 rounded-full"})})]}),m.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-zinc-300",children:"$350 / $500"})]}),m.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Dining Out"}),m.jsx("div",{className:"w-16 h-1 bg-gray-200 dark:bg-zinc-600 rounded-full mt-0.5",children:m.jsx("div",{className:"w-6 h-1 bg-purple-500 rounded-full"})})]}),m.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-zinc-300",children:"$75 / $200"})]})]})]}),S0e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-blue-400 dark:border-blue-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between text-[10px] font-medium mb-1",children:[m.jsx("span",{className:"text-gray-700 dark:text-zinc-300",children:"Left to Budget"}),m.jsx("span",{className:"font-bold text-green-600",children:"$0.00"})]}),m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:m.jsx("div",{className:"w-full h-2 bg-green-500 rounded-full"})}),m.jsx("div",{className:"text-[9px] text-green-600 dark:text-emerald-400 text-center mt-1 font-medium",children:"Every dollar has a job!"})]}),_0e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-pink-400 dark:border-pink-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-pink-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsx("div",{className:"flex justify-between items-center mb-2",children:m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(bd,{size:12,className:"text-pink-500"}),m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Piggybanks"})]})}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Vacation Fund"}),m.jsx("span",{className:"text-[10px] font-bold text-pink-600",children:"$1,200 / $3,000"})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-600 rounded-full mt-1",children:m.jsx("div",{className:"w-2/5 h-1.5 bg-pink-500 rounded-full"})})]}),m.jsxs("div",{className:"py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Emergency Fund"}),m.jsx("span",{className:"text-[10px] font-bold text-pink-600",children:"$4,500 / $10,000"})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-600 rounded-full mt-1",children:m.jsx("div",{className:"w-[45%] h-1.5 bg-pink-500 rounded-full"})})]})]})]}),E0e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-cyan-400 dark:border-cyan-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-cyan-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"ANALYTICS"}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"relative w-16 h-16 flex-shrink-0",children:[m.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full -rotate-90",children:[m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-gray-200 dark:text-zinc-700"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#8B5CF6",strokeWidth:"3",strokeDasharray:"35 65",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#3B82F6",strokeWidth:"3",strokeDasharray:"25 75",strokeDashoffset:"-35",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#10B981",strokeWidth:"3",strokeDasharray:"20 80",strokeDashoffset:"-60",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#F59E0B",strokeWidth:"3",strokeDasharray:"15 85",strokeDashoffset:"-80",strokeLinecap:"round"})]}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[m.jsx("span",{className:"text-[8px] text-gray-500 dark:text-zinc-500",children:"Total"}),m.jsx("span",{className:"text-[10px] font-bold text-gray-900 dark:text-white",children:"$4,300"})]})]}),m.jsxs("div",{className:"space-y-1 flex-1",children:[m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Housing 35%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Food 25%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Transport 20%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Personal 15%"})]})]})]})]}),T0e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-teal-400 dark:border-teal-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-teal-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"TRENDS"}),m.jsx("div",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300 mb-2",children:"Monthly Spending"}),m.jsx("div",{className:"flex items-end gap-1 h-12",children:[65,45,80,55,70,40].map((t,e)=>m.jsxs("div",{className:"flex-1 flex flex-col items-center gap-0.5",children:[m.jsx("div",{className:"w-full rounded-t",style:{height:`${t}%`,background:`hsl(${200+e*20}, 70%, 55%)`}}),m.jsx("span",{className:"text-[7px] text-gray-400",children:["Jan","Feb","Mar","Apr","May","Jun"][e]})]},e))})]}),$s=[{id:"housing",label:"Housing",sub:"Rent, Utilities"},{id:"food",label:"Food",sub:"Groceries, Dining"},{id:"transport",label:"Transportation",sub:"Gas, Insurance"},{id:"savings",label:"Savings",sub:"Emergency, Goals"}],A0e=()=>{const[t,e]=A.useState($s),n=Fo.useRef(0);return A.useEffect(()=>{const r=[()=>e([$s[1],$s[0],$s[2],$s[3]]),()=>e([$s[3],$s[1],$s[0],$s[2]]),()=>e($s)],i=setInterval(()=>{n.current=(n.current+1)%r.length,r[n.current]()},2e3);return()=>clearInterval(i)},[]),m.jsxs("div",{className:"bg-white dark:bg-indigo-950/30 rounded-lg p-2 border border-indigo-300 dark:border-indigo-700 space-y-1",children:[m.jsx(lr,{mode:"popLayout",children:t.map(r=>m.jsxs(gt.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:"flex items-center gap-2 py-1.5 px-2 bg-indigo-50 dark:bg-indigo-900/40 rounded-lg",children:[m.jsx(nh,{size:14,className:"text-indigo-400 dark:text-indigo-500 flex-shrink-0"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"text-[11px] font-medium text-indigo-900 dark:text-indigo-200",children:r.label}),m.jsx("div",{className:"text-[9px] text-indigo-600 dark:text-indigo-400",children:r.sub})]})]},r.id))}),m.jsx("p",{className:"text-[9px] text-indigo-500 dark:text-indigo-400 text-center italic mt-1",children:"Categories reordering automatically..."})]})},k0e=({currentMonth:t,onComplete:e,onSkip:n})=>{const[r,i]=A.useState(0),[a,s]=A.useState(0),[o,c]=A.useState(2500),[d,f]=A.useState(My),[h,g]=A.useState(!1),{addCategory:v}=pt(),b=j=>{f(L=>L.includes(j)?L.filter(B=>B!==j):[...L,j])},x=async()=>{for(let j=0;j<d.length;j++)await v({name:d[j],orderIndex:j,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});e()},w=async()=>{for(let j=0;j<My.length;j++)await v({name:My[j],orderIndex:j,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});n()};A.useEffect(()=>{if(r===5){c(2500);const j=2e3,L=20,B=j/L,z=2500/L;let Y=0;const Z=setInterval(()=>{Y++;const G=Math.max(0,2500-z*Y);c(G),Y>=L&&(clearInterval(Z),setTimeout(()=>{let K=0;const X=10,ee=200,J=500/X,F=setInterval(()=>{K++;const Q=-(J*K);c(Q),K>=X&&clearInterval(F)},ee)},1e3))},B);return()=>clearInterval(Z)}},[a,r]);const T=(j=>{const[L,B]=j.split("-");return new Date(parseInt(L),parseInt(B)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})})(t),N=[{icon:Wf,title:"Welcome to Dollars At Work!",description:`Let's set up your budget for ${T}`,content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Dollars At Work helps you take control of your money using the ",m.jsx("strong",{children:"zero-based budgeting"})," method."]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Every dollar gets a job, and you'll know exactly where your money is going."}),m.jsxs("div",{className:"bg-gray-100 dark:bg-zinc-800/50 rounded-xl p-3 space-y-2",children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 text-center mb-1",children:"Your budget will look like this:"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-2 flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-bold text-gray-900 dark:text-white",children:"February 2026"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600",children:"$0.00 left"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-1.5 text-center",children:[m.jsx(yg,{size:14,className:"text-green-500 mx-auto"}),m.jsx("span",{className:"text-[8px] text-gray-600 dark:text-zinc-400",children:"Income"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-1.5 text-center",children:[m.jsx(ih,{size:14,className:"text-purple-500 mx-auto"}),m.jsx("span",{className:"text-[8px] text-gray-600 dark:text-zinc-400",children:"Envelopes"})]})]})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:m.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium",children:"This quick guide will show you how to get started in just a few steps!"})})]}),color:"blue"},{icon:nae,title:"Step 1: Choose Categories",description:"Select categories to organize your spending",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Categories help group your envelopes. Select the ones you need:"}),m.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto pr-1",children:My.map(j=>m.jsxs("button",{onClick:()=>b(j),className:`p-3 rounded-xl border text-sm font-medium transition-all flex items-center gap-2 ${d.includes(j)?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300":"bg-white border-gray-200 text-gray-600 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-400"}`,children:[m.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${d.includes(j)?"border-blue-500 bg-blue-500":"border-gray-400"}`,children:d.includes(j)&&m.jsx(Hs,{size:12,className:"text-white"})}),j]},j))}),d.length===0&&m.jsx("p",{className:"text-red-500 text-xs",children:"Please select at least one category."})]}),color:"blue"},{icon:yg,title:"Step 2: Add Your Income",description:"Tell us how much money you have to work with",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Add your income sources for the month. This could be:"}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(Hs,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Salary"})," - Your regular paycheck"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(Hs,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Freelance"})," - Side gig income"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(Hs,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Other Income"})," - Any other money coming in"]})]})]}),m.jsx(x0e,{}),m.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-green-900 dark:text-green-200",children:[m.jsxs("strong",{children:["Tap the ",m.jsx(xd,{className:"w-4 h-4 inline"})," button"]}),' next to "Income Sources" to add your income.']})})]}),color:"green"},{icon:ih,title:"Step 3: Create Spending Envelopes",description:"Organize your spending into categories",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Spending envelopes are where you track expenses. You'll assign each envelope to a category."}),m.jsx(w0e,{}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(Hs,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Groceries"})," (Food)"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(Hs,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Rent/Mortgage"})," (Housing)"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(Hs,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Gas"})," (Transportation)"]})]})]}),m.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-purple-900 dark:text-purple-200",children:[m.jsx("strong",{children:'Tap "+" on a category section'})," to add an envelope to it."]})})]}),color:"purple"},{icon:nh,title:"Step 4: Organize Your Budget",description:"Reorder categories and envelopes to match your preferences",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Your budget should work the way ",m.jsx("strong",{children:"you"})," think about money. Customize the order to match your priorities!"]}),m.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4",children:[m.jsxs("h4",{className:"font-medium text-indigo-900 dark:text-indigo-200 mb-3 flex items-center gap-2",children:[m.jsx(nh,{className:"w-4 h-4"}),"Drag to Reorder"]}),m.jsxs("div",{className:"space-y-2 mb-3",children:[m.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[m.jsx("strong",{children:"Mobile:"})," Long-press and drag"]}),m.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[m.jsx("strong",{children:"PC:"})," Click and hold on the ",m.jsx("strong",{children:"dots"}),", then drag"]})]}),m.jsx(A0e,{}),m.jsxs("ul",{className:"space-y-1 text-sm text-indigo-700 dark:text-indigo-400 mt-3",children:[m.jsx("li",{children:"- Reorder categories: Settings  Manage Categories"}),m.jsx("li",{children:"- Reorder envelopes: On the main budget screen"})]})]}),m.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[m.jsx("strong",{children:"Pro tip:"})," Try organizing: Income  Fixed Expenses  Variable Expenses  Savings Goals"]})})]}),color:"indigo"},{icon:ju,title:"Step 5: Allocate Your Budget",description:"Assign money to each envelope",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Now comes the fun part - giving every dollar a job!"}),m.jsx(S0e,{}),m.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 rounded-r-xl p-4 relative",children:[m.jsx("button",{onClick:()=>s(j=>j+1),className:"absolute top-2 right-2 p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-lg transition-colors",title:"Replay animation",children:m.jsx(Kie,{className:"w-4 h-4"})}),m.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium mb-2",children:'The "Left to Budget" amount shows unassigned money'}),m.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 mb-3",children:["Your goal is to get this to ",m.jsx("strong",{children:"$0.00"})," by allocating all your income to envelopes."]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 font-medium",children:[m.jsx("span",{children:"Left to Budget"}),m.jsxs("span",{className:`font-bold ${o<0?"text-red-600 dark:text-red-400":""}`,children:["$",o.toFixed(2)]})]}),m.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2 overflow-hidden",children:m.jsx(gt.div,{className:`h-full rounded-full ${o<0?"bg-red-500":"bg-green-500"}`,initial:{width:"0%"},animate:{width:o<0?"100%":`${(2500-o)/2500*100}%`},transition:{duration:.3,ease:"easeInOut"}})}),m.jsxs(gt.div,{className:`text-xs font-medium text-center mt-1 ${o===0?"text-green-600 dark:text-emerald-400":o<0?"text-red-600 dark:text-red-400":"text-blue-700 dark:text-blue-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.5},children:[o===0&&"Perfect! Every dollar has a job!",o<0&&"You're not in Congress! Try again.",o>0&&"Keep allocating until you reach $0"]})]},a)]}),m.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[m.jsx("strong",{children:"Pro tip:"})," Start with essential expenses (rent, utilities, groceries) first, then allocate what's left."]})})]}),color:"blue"},{icon:bd,title:"Bonus: Piggybanks (Savings Goals)",description:"Save for future goals",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Piggybanks are special envelopes for ",m.jsx("strong",{children:"savings goals"})," that carry over month-to-month."]}),m.jsx(_0e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(iae,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Set a Goal"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Vacation, emergency fund, new car - whatever you're saving for"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(yg,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Contributions"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Set a monthly amount to save"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(ju,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Track Progress"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Watch your savings grow toward your goal"})]})]})]})]}),color:"pink"},{icon:jb,title:"Analytics: Spending Insights",description:"Visualize where your money goes",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["The ",m.jsx("strong",{children:"Analytics"})," screen gives you powerful insights into your spending habits over time."]}),m.jsx(E0e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(N9,{className:"w-5 h-5 text-cyan-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Spending Totals"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"See a donut chart of spending by category"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(jb,{className:"w-5 h-5 text-cyan-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Spending Breakdown"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly stacked bar chart by category"})]})]})]}),m.jsx("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 border border-cyan-200 dark:border-cyan-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-cyan-900 dark:text-cyan-200",children:[m.jsx("strong",{children:"Access Analytics"}),' from the bottom navigation bar under the "More" menu.']})})]}),color:"blue"},{icon:ju,title:"Analytics: Income & Savings",description:"Track your financial health over time",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Monitor your ",m.jsx("strong",{children:"income trends"})," and ",m.jsx("strong",{children:"savings rate"})," to stay on track."]}),m.jsx(T0e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(yg,{className:"w-5 h-5 text-teal-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Income"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Track income by source over time with stacked bars"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(ju,{className:"w-5 h-5 text-teal-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Savings Rate"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"See what percentage of income you're saving each month"})]})]})]}),m.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-teal-900 dark:text-teal-200",children:[m.jsx("strong",{children:"Time frames:"})," View 1, 3, 6, 9, or 12 months of data, or filter by year."]})})]}),color:"blue"},{icon:rT,title:"You're Ready to Budget!",description:"Start taking control of your money",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"That's it! You now know the basics of Dollars At Work:"}),m.jsx("div",{className:"space-y-2",children:["Choose your categories","Add your income sources","Create envelopes in categories","Organize your budget order","Allocate until Left to Budget = $0","Set up Piggybanks for savings goals","Track trends in Analytics"].map((j,L)=>m.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[m.jsx("div",{className:"w-7 h-7 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:m.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold text-xs",children:L+1})}),m.jsx("span",{className:"text-sm",children:j})]},L))}),m.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mt-4",children:m.jsx("p",{className:"text-sm text-center text-blue-900 dark:text-blue-200 font-medium",children:`Click "Start Budgeting" below and we'll guide you through your first setup!`})})]}),color:"green",useCustomIcon:!0}],D=N[r],P=D.useCustomIcon?rT:D.icon,O=r===N.length-1,C=r===0,I={blue:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700"},green:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",button:"bg-green-600 hover:bg-green-700"},purple:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-600 dark:text-purple-400",button:"bg-purple-600 hover:bg-purple-700"},indigo:{bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-600 dark:text-indigo-400",button:"bg-indigo-600 hover:bg-indigo-700"},pink:{bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-600 dark:text-pink-400",button:"bg-pink-600 hover:bg-pink-700"}},R=I[D.color]||I.blue;return m.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex items-center justify-center p-4",children:m.jsxs("div",{className:"w-full max-w-2xl",children:[m.jsx(lr,{children:h&&m.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs(gt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-gray-200 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Skip Onboarding?"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-4",children:"We'll set up default categories for you. You can always restart this guide from Settings."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Continue Guide"}),m.jsx("button",{onClick:w,className:"flex-1 py-2.5 px-4 bg-gray-800 dark:bg-zinc-700 text-white rounded-xl font-medium hover:bg-gray-900 dark:hover:bg-zinc-600 transition-colors",children:"Skip"})]})]})})}),m.jsx(lr,{mode:"wait",children:m.jsxs(gt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[m.jsx("div",{className:"flex justify-end px-4 pt-3",children:m.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 text-xs text-gray-400 dark:text-zinc-500 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors px-2 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800",children:[m.jsx(R9,{size:14}),"Skip"]})}),m.jsx("div",{className:"px-6 pb-2",children:m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:D.title}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:D.description})]}),m.jsx("div",{className:"flex flex-col items-center mx-4",children:r===0?m.jsx("img",{src:b0e,alt:"Dollars At Work",className:`w-20 h-20 ${R.text}`}):D.useCustomIcon?m.jsx("img",{src:rT,alt:"Budget Balanced",className:`w-32 h-32 ${R.text}`}):m.jsx("div",{className:`${R.bg} p-3 rounded-xl`,children:typeof P=="string"?null:m.jsx(P,{className:`w-8 h-8 ${R.text}`})})})]})}),m.jsx("div",{className:"px-6 pb-6 pt-2 max-h-[55vh] overflow-y-auto",children:D.content}),m.jsx("div",{className:"px-6 pb-2 flex justify-center gap-1.5",children:N.map((j,L)=>m.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${L===r?`w-8 ${R.button}`:L<r?"w-2 bg-gray-400 dark:bg-zinc-600":"w-2 bg-gray-200 dark:bg-zinc-700"}`},L))}),m.jsx("div",{className:"text-center pb-2",children:m.jsxs("span",{className:"text-xs text-gray-400 dark:text-zinc-500",children:[r+1," of ",N.length]})}),m.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[!C&&m.jsxs("button",{onClick:()=>i(j=>j-1),className:"flex-1 py-3 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors flex items-center justify-center gap-2",children:[m.jsx(al,{className:"w-5 h-5"}),"Back"]}),m.jsx("button",{onClick:()=>{if(O)x();else{if(D.title.includes("Choose Categories")&&d.length===0)return;i(j=>j+1)}},disabled:D.title.includes("Choose Categories")&&d.length===0,className:`${C?"flex-1":"flex-[2]"} py-3 px-4 ${R.button} text-white rounded-xl font-semibold transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:O?m.jsxs(m.Fragment,{children:[m.jsx(Wf,{className:"w-5 h-5"}),"Start Budgeting"]}):m.jsxs(m.Fragment,{children:["Next",m.jsx(Wre,{className:"w-5 h-5"})]})})]})]},r)})]})})},C0e=({piggybank:t,balance:e,onNavigate:n,setMoveableRef:r,isReorderingActive:i,activelyDraggingId:a,onItemDragStart:s,onLongPressTrigger:o,onMoveCategory:c})=>{const d=A.useRef(null),[f,h]=A.useState(!1),g=LI(j=>{Xq(),o(j,t.id)},{threshold:500,cancelOnMovement:25,detect:vc.Touch}),v=t.piggybankConfig?.targetAmount,b=t.piggybankConfig?.monthlyContribution??0,x=t.piggybankConfig?.color||"#3B82F6",w=t.piggybankConfig?.paused||!1,_=e,T=(j,L=1)=>{const B=j.replace("#",""),z=parseInt(B,16),Y=z>>16&255,Z=z>>8&255,G=z&255;return`rgba(${Y}, ${Z}, ${G}, ${L})`},N=`linear-gradient(135deg, ${T(x,.14)} 0%, ${T(x,.05)} 100%)`,D=T(x,.4),P=v&&v>0?Math.min(_/v*100,100):0,O=v&&_>=v;A.useEffect(()=>{a&&a!==t.id&&h(!1)},[a,t.id]),A.useEffect(()=>{a===t.id&&(h(!0),s&&s(t.id))},[a,t.id,s]),A.useEffect(()=>{if(!a&&f){const j=setTimeout(()=>{h(!1)},300);return()=>clearTimeout(j)}},[a,f]);const C=j=>{if(f||i){j.preventDefault(),j.stopPropagation();return}n(t.id)},I=a===t.id,R=m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:j=>o(j,t.id),children:m.jsx(nh,{size:20})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3 mb-1",children:[m.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[m.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center",style:{backgroundColor:`${x}20`},children:m.jsx(bd,{size:12,style:{color:x}})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate leading-tight",children:t.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[m.jsx(ju,{size:10,style:{color:x}}),m.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400 font-medium",children:["$",b.toFixed(2),"/mo"]}),w&&m.jsxs("span",{className:"text-[9px] text-orange-600 dark:text-orange-400 font-bold ml-1 flex items-center gap-0.5",children:[m.jsx(Fie,{size:8})," PAUSED"]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c&&m.jsx("button",{onClick:j=>{j.stopPropagation(),c(t)},className:"p-1 text-gray-300 dark:text-zinc-600 hover:text-blue-500 dark:hover:text-blue-400 transition-colors rounded-md",title:"Move to category",children:m.jsx(P2,{size:14})}),m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:["$",_.toFixed(2)]}),m.jsxs("div",{className:"text-[9px] text-gray-400 dark:text-zinc-500 mt-1",children:["of $",v?.toFixed(0)||"0"]})]})]})]}),v&&v>0&&m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800/50 rounded-full h-0.5 overflow-hidden",children:m.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${P}%`,backgroundColor:x}})}),O&&!v&&m.jsx("div",{className:"text-[9px] text-green-600 dark:text-green-400 font-bold mt-0.5",children:" GOAL REACHED"})]})]});return m.jsx(gt.div,{...g(),layout:!I,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:j=>{r&&r(j),d.current=j},onClick:C,style:{background:N,borderColor:D,boxShadow:I?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",zIndex:I?50:1,scale:I?1.02:1},className:"rounded-xl py-1.5 px-3 border transition-all cursor-pointer shadow-sm hover:shadow-md select-none active:scale-[0.99] group",children:R})},og=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,s=r&255;return`rgba(${i}, ${a}, ${s}, ${e})`},N0e=12,I0e=(t,e,n)=>Math.min(Math.max(t,e),n),O0e=({env:t,budgetedAmount:e,remainingBalance:n,navigate:r,transactions:i,currentMonth:a,setMoveableRef:s,isReorderingActive:o,activelyDraggingId:c,onItemDragStart:d,onLongPressTrigger:f,onMoveCategory:h})=>{const g=!!t.isPiggybank,v=t.piggybankConfig?.color||"#3B82F6",b=g?`linear-gradient(135deg, ${og(v,.18)} 0%, ${og(v,.08)} 100%)`:void 0,x=g?og(v,.5):void 0,[w,_]=A.useState(!1),T=LI(B=>{Xq(),f(B,t.id)},{threshold:500,cancelOnMovement:25,detect:vc.Touch}),N=i.filter(B=>B.envelopeId===t.id&&B.month===a),D=N.filter(B=>B.type==="Expense"),P=N.filter(B=>B.type==="Income"),O=D.reduce((B,z)=>B+(z.amount||0),0),C=P.reduce((B,z)=>B+(z.amount||0),0),I=C>0?Math.max(0,O/C*100):0,R=B=>{if(w||o){B.preventDefault(),B.stopPropagation();return}r(`/envelope/${t.id}`)};A.useEffect(()=>{c&&c!==t.id&&_(!1)},[c,t.id]),A.useEffect(()=>{c===t.id&&(_(!0),d(t.id))},[c,t.id,d]),A.useEffect(()=>{if(!c&&w){const B=setTimeout(()=>{_(!1)},300);return()=>clearTimeout(B)}},[c,w]);const j=m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:B=>f(B,t.id),children:m.jsx(nh,{size:20})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[g&&m.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center border",style:{borderColor:og(v,.4),backgroundColor:og(v,.15),color:v},children:m.jsx(bd,{size:10})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-tight",children:t.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[m.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),m.jsxs("span",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300",children:["$",e.toFixed(2)]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:B=>{B.stopPropagation(),h(t)},className:"p-1 text-gray-300 dark:text-zinc-600 hover:text-blue-500 dark:hover:text-blue-400 transition-colors rounded-md",title:"Move to category",children:m.jsx(P2,{size:14})}),m.jsxs("div",{className:"text-right",children:[m.jsxs("span",{className:`text-sm font-bold leading-none ${(typeof n=="number"?n:n.toNumber())<0||100-I<=5?"text-red-500":I>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof n=="number"?n:n.toNumber()).toFixed(2)]}),m.jsx("span",{className:"text-[9px] text-gray-400 dark:text-zinc-500 block uppercase tracking-wider mt-0.5",children:"Remaining"})]})]})]}),e>0&&m.jsx("div",{className:"mt-1",children:m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700/50 rounded-full h-0.5 overflow-hidden",children:m.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof n=="number"?n:n.toNumber())<0||100-I<=5?"bg-red-500":I>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-I,2)}%`}})})})]})]}),L=c===t.id;return m.jsx(gt.div,{...T(),layout:!L,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},"data-envelope-id":t.id,ref:s(t.id),onClick:R,style:{boxShadow:L?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",background:b,borderColor:x,cursor:L?"grabbing":"pointer",zIndex:L?50:1,scale:L?1.02:1},className:`py-1.5 px-3 rounded-xl active:scale-[0.99] transition-all select-none border group ${g?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:j})},P0e=({category:t,envelopes:e,allocations:n,currentMonth:r,transactions:i,navigate:a,getEnvelopeBalance:s,onReorderGlobal:o,isFirstCategory:c=!1,onMoveCategory:d})=>{const[f,h]=A.useState(e),g=A.useRef(e),[v,b]=A.useState(!1),[x,w]=A.useState(null),_=A.useRef(!1),T=A.useRef(null),N=A.useRef({}),D=A.useRef({}),P=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{v||(h(e),g.current=e)},[e,v]);const O=A.useCallback((I,R)=>{const j=D.current[R];if(j){_.current=!0;const L=I.nativeEvent||I;j.dragStart(L)}},[]),C=A.useCallback(I=>R=>{R?N.current[I]=R:delete N.current[I]},[]);return A.useEffect(()=>{const I=()=>{Object.values(D.current).forEach(L=>L?.destroy()),D.current={}};if(!f.length)return;const R=()=>{f.forEach(L=>{const B=N.current[L.id];if(!B||!T.current)return;const z=new Yq(T.current,{target:B,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[]});z.on("dragStart",Z=>{if(!_.current){Z.stop();return}const G=Z.inputEvent.target;if(G.closest(".js-budget-target")||G.tagName==="INPUT"){Z.stop();return}const K=g.current.findIndex(J=>J.id===L.id),X=Z.target,ee=X.getBoundingClientRect();w(L.id),P.current={activeId:L.id,startIndex:K,currentIndex:K,itemHeight:ee.height+N0e},X.style.transition="none",X.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",X.style.zIndex="20",b(!0)});let Y=null;z.on("drag",Z=>{const G=Z.target;Y!==null&&cancelAnimationFrame(Y),Y=requestAnimationFrame(()=>{const K=P.current;if(K.activeId!==L.id)return;const X=Z.beforeTranslate[1];G.style.transform=`translateY(${X}px)`,G.style.transition="none";const{itemHeight:ee,startIndex:J}=K,F=Math.round(X/ee),Q=I0e(J+F,0,g.current.length-1);Q!==K.currentIndex&&(K.currentIndex=Q,g.current.forEach((te,W)=>{if(te.id===L.id)return;const ue=N.current[te.id];if(!ue)return;let re=0;J<Q&&W>J&&W<=Q?re=-ee:J>Q&&W>=Q&&W<J&&(re=ee),ue.style.transform=re?`translateY(${re}px)`:"",ue.style.transition="transform 0.2s ease"})),Y=null})}),z.on("dragEnd",Z=>{Y!==null&&(cancelAnimationFrame(Y),Y=null);const G=Z.target,{startIndex:K,currentIndex:X}=P.current;if(G.style.transform="",G.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",G.style.boxShadow="",g.current.forEach(ee=>{const J=N.current[ee.id];J&&(J.style.transform="",J.style.transition="")}),K!==X){const ee=[...g.current],[J]=ee.splice(K,1);ee.splice(X,0,J),g.current=ee,h(ee),o(ee.map(F=>F.id))}setTimeout(()=>{G.style.zIndex="",w(null),b(!1),_.current=!1},300)}),z.on("click",()=>{const Z=window.event?.target;Z&&(Z.closest(".js-budget-target")||Z.tagName==="INPUT")||a(`/envelope/${L.id}`)}),D.current[L.id]=z})},j=window.setTimeout(R,80);return()=>{clearTimeout(j),I()}},[f,a,o]),e.length===0&&t.id==="uncategorized"?null:m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[m.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2",children:t.name}),m.jsx("button",{id:c?"tutorial-add-envelope":void 0,onClick:()=>a(t.id==="uncategorized"?"/add-envelope":`/add-envelope?categoryId=${t.id}`),className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",title:`Add to ${t.name}`,children:m.jsx(xd,{size:20})})]}),m.jsx("div",{id:c?"tutorial-allocation-area":void 0,ref:T,className:"space-y-2 relative",children:f.length===0?m.jsx("div",{className:"py-2 text-center border border-dashed border-gray-100 dark:border-zinc-800 rounded-xl",children:m.jsx("p",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:"Empty category"})}):m.jsx(lr,{initial:!1,children:f.map(I=>{const j=(n[r]||[]).find(B=>B.envelopeId===I.id)?.budgetedAmount||0,L=s(I.id);return I.isPiggybank?m.jsx(C0e,{piggybank:I,balance:L,onNavigate:B=>a(`/envelope/${B}`),setMoveableRef:C(I.id),isReorderingActive:v,activelyDraggingId:x,onItemDragStart:()=>{},onLongPressTrigger:O,onMoveCategory:d},I.id):m.jsx(O0e,{env:I,budgetedAmount:j,remainingBalance:L,navigate:a,transactions:i,currentMonth:r,setMoveableRef:C,isReorderingActive:v,activelyDraggingId:x,onItemDragStart:()=>{},onLongPressTrigger:O,onMoveCategory:d},I.id)})})})]})},D0e=()=>{const{visibleEnvelopes:t,piggybanks:e,incomeSources:n,availableToBudget:r,currentMonth:i,allocations:a,transactions:s,isLoading:o,isInitialLoading:c,showTimeoutMessage:d,getEnvelopeBalance:f,deleteIncomeSource:h}=p0e(),{setMonth:g,setIsOnboardingActive:v,isOnboardingActive:b,isOnboardingCompleted:x,completeOnboarding:w,categories:_,fetchCategories:T,ensureDefaultCategory:N,envelopes:D,reorderEnvelopes:P,startGuidedTutorial:O,updateEnvelope:C}=pt(),I=$a(),[R,j]=A.useState(!1),[L,B]=A.useState("add"),[z,Y]=A.useState(null),[Z,G]=A.useState(!1),[K,X]=A.useState(!1),[ee,J]=A.useState(null),F=A.useRef(null),Q=A.useRef(null),[te,W]=A.useState(0);A.useEffect(()=>{_.length===0&&T()},[_.length,T]),A.useEffect(()=>{const ye=[...t,...e],Se=new Set(_.map(Pe=>Pe.id)),Oe=ye.filter(Pe=>!Pe.categoryId||!Se.has(Pe.categoryId));Oe.length>0&&_.length>0&&N().then(Pe=>{Oe.forEach(Ge=>{C({...Ge,categoryId:Pe})})})},[t,e,_,N,C]);const ue=A.useMemo(()=>{const ye={};return _.forEach(Oe=>ye[Oe.id]=[]),[...t,...e].sort((Oe,Pe)=>(Oe.orderIndex??0)-(Pe.orderIndex??0)).forEach(Oe=>{if(Oe.categoryId&&ye[Oe.categoryId])ye[Oe.categoryId].push(Oe);else{const Pe=_.find(Ge=>Ge.isDefault);Pe&&ye[Pe.id]?.push(Oe)}}),{groups:ye}},[_,t,e]),re=A.useCallback(async ye=>{const Se=[...D.map(je=>je.id)],Oe=new Set(ye),Pe=[];let Ge=0;Se.forEach(je=>{Oe.has(je)?Pe.push(ye[Ge++]):Pe.push(je)}),await P(Pe)},[D,P]);A.useLayoutEffect(()=>{if(b)return;const ye=Q.current;if(!ye)return;const Se=()=>W(ye.getBoundingClientRect().height);Se();const Oe=new ResizeObserver(()=>Se());return Oe.observe(ye),window.addEventListener("resize",Se),()=>{window.removeEventListener("resize",Se),Oe.disconnect()}},[b,i,n,a,t,e,r]),A.useEffect(()=>{if(!c&&!o){const ye=setTimeout(()=>{if(b)return;if(x){v(!1);const Pe=(n[i]||[]).length===0&&(a[i]||[]).length===0,Ge=Object.keys(n).some(je=>(n[je]||[]).length>0)||Object.keys(a).some(je=>(a[je]||[]).length>0);X(!!(Pe&&Ge));return}const Se=(n[i]||[]).length===0&&(a[i]||[]).length===0,Oe=Object.keys(n).some(Pe=>(n[Pe]||[]).length>0)||Object.keys(a).some(Pe=>(a[Pe]||[]).length>0);Se?Oe?(X(!0),v(!1)):(v(!0),X(!1)):(X(!1),v(!1))},500);return()=>clearTimeout(ye)}},[c,o,i,n,a,x]);const oe=()=>{B("add"),Y(null),j(!0)},we=ye=>{F.current&&clearTimeout(F.current),!Z&&(B("edit"),Y(ye),j(!0))},se=ye=>{F.current&&clearTimeout(F.current),G(!0),h(ye),setTimeout(()=>G(!1),500)},Ee=()=>{j(!1),Y(null)},ge=async()=>{X(!1);const{copyPreviousMonthAllocations:ye}=pt.getState();await ye(i)},ne=()=>{w(),v(!1),O()},Ie=()=>{w(),v(!1),O()};return c?m.jsx(v$,{message:d?"Still loading...":"Loading your budget...",showTimeout:d}):m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:".moveable-control, .moveable-origin, .moveable-line { display: none !important; }"}}),m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[!b&&m.jsx("header",{ref:Q,className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:m.jsx(g0e,{currentMonth:i,onMonthChange:ye=>{X(!1),g(ye)},budgetStatus:{amount:r,totalIncome:(n[i]||[]).reduce((ye,Se)=>ye+Se.amount,0),totalAllocated:(a[i]||[]).filter(ye=>t.some(Se=>Se.id===ye.envelopeId)||e.some(Se=>Se.id===ye.envelopeId)).reduce((ye,Se)=>ye+Se.budgetedAmount,0)}})}),m.jsxs("div",{className:"pb-[calc(8rem+env(safe-area-inset-bottom))] px-4 max-w-4xl mx-auto space-y-4",style:b?void 0:{paddingTop:Math.max(0,te+16)},children:[b?m.jsx(k0e,{currentMonth:i,onComplete:ne,onSkip:Ie}):K?m.jsx(y0e,{currentMonth:i,onCopy:ge}):m.jsxs(m.Fragment,{children:[m.jsxs("section",{id:"tutorial-income-section",className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[m.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Income Sources"}),m.jsx("button",{onClick:oe,className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",children:m.jsx(xd,{size:20})})]}),(n[i]||[]).length===0?m.jsx("div",{className:"text-center py-4",children:m.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-[10px]",children:"No income sources yet."})}):m.jsx("div",{className:"space-y-2",children:m.jsx(lr,{initial:!1,mode:"popLayout",children:(n[i]||[]).map(ye=>m.jsx(gt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(rw,{onDelete:()=>se(ye),children:m.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>we(ye),children:[m.jsx("div",{className:"flex-1",children:m.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:ye.name})}),m.jsxs("p",{className:"text-xs font-bold text-green-600 dark:text-emerald-400",children:["$",ye.amount.toFixed(2)]})]})})},ye.id))})})]}),_.map((ye,Se)=>m.jsx(P0e,{category:ye,envelopes:ue.groups[ye.id]||[],allocations:a,currentMonth:i,transactions:s,navigate:I,getEnvelopeBalance:f,onReorderGlobal:re,isFirstCategory:Se===0,onMoveCategory:J},ye.id)),_.length===0&&m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 text-center py-12",children:[m.jsx(ih,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),m.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:"No envelopes yet."}),m.jsx("button",{onClick:()=>I("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]})]}),m.jsx(m0e,{isVisible:R,onClose:Ee,mode:L,initialIncomeSource:z}),m.jsx(v0e,{isVisible:!!ee,onClose:()=>J(null),categories:_,currentCategoryId:ee?.categoryId||"",envelopeName:ee?.name||"",onSelect:async ye=>{if(ee)try{const Se=D.find(Pe=>Pe.id===ee.id);if(!Se)return;const Oe={id:Se.id,name:Se.name,currentBalance:Se.currentBalance,lastUpdated:Se.lastUpdated,isActive:Se.isActive,orderIndex:Se.orderIndex,categoryId:ye};Se.userId&&(Oe.userId=Se.userId),Se.createdAt&&(Oe.createdAt=Se.createdAt),Se.isPiggybank!==void 0&&(Oe.isPiggybank=Se.isPiggybank),Se.piggybankConfig&&(Oe.piggybankConfig=Se.piggybankConfig),await C(Oe),J(null)}catch(Se){console.error("Move category failed:",Se)}}})]})]})]})},R0e=[],Jq=({selectedCard:t,onCardSelect:e,initialCards:n=R0e,disabled:r=!1,isUserSelected:i=!1})=>{const a=pt(J=>J.appSettings),s=pt(J=>J.updateAppSettings),[o,c]=A.useState(n.length>0?n[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}),[d,f]=A.useState(!1),[h,g]=A.useState(!1),[v,b]=A.useState(n),[x,w]=A.useState(null),[_,T]=A.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),[N,D]=A.useState(null),[P,O]=A.useState(null);A.useEffect(()=>{a?.paymentSources&&(b(a.paymentSources),a.paymentSources.length>0&&!t&&c(a.paymentSources[0]))},[a,t]);const C=t||o;A.useEffect(()=>{!t&&e&&v.length>0&&e(v[0])},[t,e,v]);const I=J=>{r||(J.id==="add-new"?g(!0):(c(J),e?.(J),f(!1)))},R=()=>{r||f(!d)},j=J=>{r||w(J)},L=async()=>{if(x&&!r){const J=v.filter(F=>F.id!==x.id);if(b(J),C?.id===x.id){const F=J.length>0?J[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"};c(F),e?.(F)}w(null),f(!1);try{await s({paymentSources:J})}catch(F){$.error("Failed to delete card from app settings:",F),b(v),alert("Failed to delete card. Please try again.");return}}},B=()=>{w(null)},z=async()=>{if(r)return;const J=!["Cash","Venmo"].includes(_.network);if(J&&(_.last4.length!==4||!/^\d{4}$/.test(_.last4))){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!_.name.trim()){alert("Please enter a name");return}const F={id:`custom-${Date.now()}`,name:_.name.trim(),network:_.network,last4:J?_.last4:void 0,color:_.color},Q=[...v,F];b(Q),c(F),e?.(F),g(!1),f(!1);try{await s({paymentSources:Q})}catch(te){$.error("Failed to save card to app settings:",te),b(v),c(C),alert("Failed to save card. Please try again.");return}T({name:"",network:"Visa",last4:"",color:"#3b82f6"})},Y=(J,F)=>{r||(D(F),J.dataTransfer.effectAllowed="move")},Z=(J,F)=>{r||!N||(J.preventDefault(),J.dataTransfer.dropEffect="move",O(F))},G=()=>{O(null)},K=async(J,F)=>{if(r||!N)return;J.preventDefault(),O(null);const Q=v.findIndex(W=>W.id===N.id);if(Q===-1||Q===F)return;const te=[...v];te.splice(Q,1),te.splice(F,0,N),b(te),D(null);try{await s({paymentSources:te})}catch(W){$.error("Failed to reorder cards:",W),b(v),alert("Failed to reorder cards. Please try again.")}},X=()=>{D(null),O(null)},ee=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&m.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),m.jsxs("div",{onClick:R,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[m.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:C.color},children:[m.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:C.network}),m.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(C.network)?C.network==="Cash"?"$$$":"@":` ${C.last4||""}`})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:C.name}),m.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cash","Venmo"].includes(C.network)?C.network:`(...${C.last4})`})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-400",children:d?"":""}),!i&&m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),d&&m.jsxs("div",{className:"card-stack-dropdown",children:[v.length>1&&m.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 text-center",children:" Drag and drop cards to reorder"}),m.jsx("div",{className:"card-stack",children:m.jsx(lr,{initial:!1,mode:"popLayout",children:[...v,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((J,F)=>{const Q=C.id===J.id,te=J.id==="add-new",W=["Cash","Venmo"].includes(J.network);return m.jsx(gt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(rw,{onDelete:()=>!te&&!r&&j(J),threshold:-80,children:m.jsxs("div",{className:`card-stack-item ${Q?"selected":""} ${te?"add-new-card":""} ${N?.id===J.id?"dragging":""} ${P===F?"drag-over":""}`,onClick:()=>I(J),draggable:!te&&!r,onDragStart:te?void 0:ue=>Y(ue,J),onDragOver:te?void 0:ue=>Z(ue,F),onDragLeave:te?void 0:G,onDrop:te?void 0:ue=>K(ue,F),onDragEnd:te?void 0:X,style:{backgroundColor:te?"#f3f4f6":J.color,color:te?"#374151":J.color==="#e3e3e3"?"#000":"#fff",zIndex:v.length-F,opacity:N?.id===J.id?.5:1,transform:P===F?"scale(1.02)":"scale(1)"},children:[m.jsxs("div",{className:"card-header",children:[m.jsx("span",{className:"card-network",children:te?"":J.network}),Q&&!te&&m.jsx("span",{className:"selected-indicator",children:""})]}),m.jsxs("div",{className:"card-details",children:[m.jsx("div",{className:"card-name",children:J.name}),m.jsx("div",{className:"card-number",children:te?"":W?J.network==="Cash"?"$$$":"@":` ${J.last4}`})]}),te&&m.jsx("div",{className:"add-icon",children:m.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[m.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},J.id)})})})]})]}),h&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Payment Method"}),m.jsx("button",{type:"button",onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),m.jsx("input",{type:"text",value:_.name,onChange:J=>T({..._,name:J.target.value}),placeholder:"e.g., Wallet Cash, My Venmo",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),m.jsxs("select",{value:_.network,onChange:J=>T({..._,network:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[m.jsx("option",{value:"Visa",children:"Visa"}),m.jsx("option",{value:"Mastercard",children:"Mastercard"}),m.jsx("option",{value:"Amex",children:"Amex"}),m.jsx("option",{value:"Cash",children:"Cash"}),m.jsx("option",{value:"Venmo",children:"Venmo"})]})]}),!["Cash","Venmo"].includes(_.network)&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),m.jsx("input",{type:"text",value:_.last4,onChange:J=>T({..._,last4:J.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:ee.map(J=>m.jsx("button",{type:"button",onClick:()=>T({..._,color:J}),className:`w-full h-10 rounded-lg border-2 transition-all ${_.color===J?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:J}},J))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),m.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:_.color},children:[m.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:_.network}),m.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(_.network)?_.network==="Cash"?"$$$":"@":` ${_.last4||"0000"}`})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"button",onClick:z,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add"})]})]})]})}),x&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",m.jsx("span",{className:"font-medium",children:x.name}),"?"]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"button",onClick:B,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"button",onClick:L,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},eG=({envelopes:t,transactionAmount:e,onSplitChange:n,initialSelectedEnvelopeId:r})=>{const{categories:i}=pt(),[a,s]=A.useState([]),[o,c]=A.useState(!1),d=A.useRef(null);A.useEffect(()=>{r&&!o&&t.some(O=>O.id===r)&&(s([r]),c(!0))},[r,t,o]);const[f,h]=A.useState({}),[g,v]=A.useState(e),b=A.useMemo(()=>{const P=[],O=[],C={};return i.forEach(I=>{C[I.id]=[]}),t.forEach(I=>{I.categoryId&&C[I.categoryId]?C[I.categoryId].push(I):O.push(I)}),i.sort((I,R)=>(I.orderIndex??0)-(R.orderIndex??0)).forEach(I=>{C[I.id].length>0&&P.push({name:I.name,id:I.id,envelopes:C[I.id]})}),O.length>0&&P.push({name:"Other",id:"uncategorized",envelopes:O}),P},[t,i]),x=P=>{s(O=>O.includes(P)?O.filter(C=>C!==P):[...O,P])},w=(P,O)=>{h(C=>({...C,[P]:O}))},_=Fo.useRef(a.length);A.useEffect(()=>{if(a.length===1){const P=a[0];h({[P]:e})}else if(a.length>1&&_.current<=1){const P={};a.forEach(O=>{P[O]=0}),h(P)}_.current=a.length},[a.length,a,e]),A.useEffect(()=>{const P=Object.values(f).reduce((O,C)=>O+(C||0),0);v(e-P),n(f)},[f,e,n]),A.useEffect(()=>{const P={...f};Object.keys(P).forEach(O=>{a.includes(O)||delete P[O]}),Object.keys(P).length!==Object.keys(f).length&&h(P)},[a,f]),A.useEffect(()=>{const P=d.current;if(!P)return;const O=()=>{const{scrollTop:C,scrollHeight:I,clientHeight:R}=P;C===0?P.scrollTop=1:C+R>=I&&(P.scrollTop=I-R-1)};return P.addEventListener("touchstart",O,{passive:!0}),()=>P.removeEventListener("touchstart",O)},[]);const T=()=>{s([]),h({})},N=Math.abs(g)<.01&&a.length>0,D=a.length>0&&Math.abs(g)>.01;return m.jsxs("div",{className:"space-y-3",children:[a.length>1&&m.jsxs("div",{className:`p-3 rounded-lg ${D?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":N?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),m.jsxs("span",{className:`font-bold text-lg ${D?"text-red-600 dark:text-red-400":N?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",g.toFixed(2)]})]}),D&&m.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:a.length>1?"Split Across Envelopes":"Select Envelope"}),a.length>0&&m.jsx("button",{type:"button",onClick:T,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),m.jsx("div",{ref:d,className:"max-h-72 overflow-y-auto rounded-lg border border-gray-200 dark:border-zinc-800 overscroll-contain",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:b.map(P=>m.jsxs("div",{children:[m.jsx("div",{className:"sticky top-0 z-10 px-3 py-1.5 bg-gray-100 dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700",children:m.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider",children:P.name})}),P.envelopes.map(O=>{const C=a.includes(O.id);return m.jsxs("div",{onClick:()=>x(O.id),className:`flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 transition-colors cursor-pointer active:bg-gray-100 dark:active:bg-zinc-700 ${C?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[m.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center mr-3 transition-colors ${C?"bg-blue-600 border-blue-600":"border-gray-300 dark:border-zinc-600"}`,children:C&&m.jsx(O2,{size:14,className:"text-white",strokeWidth:3})}),m.jsx("span",{className:`flex-1 text-sm ${C?"text-blue-900 dark:text-blue-100 font-medium":"text-gray-900 dark:text-white"}`,children:O.name}),C&&a.length>1&&m.jsxs("div",{className:"flex items-center",onClick:I=>I.stopPropagation(),children:[m.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400 text-sm",children:"$"}),m.jsx("input",{type:"number",min:"0",step:"0.01",value:f[O.id]||"",onChange:I=>w(O.id,parseFloat(I.target.value)||0),className:"w-24 px-2 py-1 text-sm border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},O.id)})]},P.id))})]})},tG=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i,envelopes:a})=>{const{addTransaction:s,updateTransaction:o,deleteTransaction:c,currentMonth:d}=pt(),[f,h]=A.useState(""),[g,v]=A.useState(""),[b,x]=A.useState(""),[w,_]=A.useState(new Date().toISOString().split("T")[0]),[T,N]=A.useState(null),[D,P]=A.useState(null),[O,C]=A.useState({}),I=a?[...a].filter(z=>z.isActive!==!1).sort((z,Y)=>{const Z=z.orderIndex??0,G=Y.orderIndex??0;return Z!==G?Z-G:z.name.localeCompare(Y.name)}):[];A.useEffect(()=>{if(t)if(n==="edit"&&i){if(h(i.amount.toString()),v(i.merchant||""),x(i.description),N(i.paymentMethod||null),a){const z=a.find(Y=>Y.id===i.envelopeId);P(z||r),C({[i.envelopeId]:i.amount})}try{const z=new Date(i.date);isNaN(z.getTime())?($.warn("Invalid date in transaction:",i.date),_(new Date().toISOString().split("T")[0])):_(z.toISOString().split("T")[0])}catch(z){$.error("Error parsing transaction date:",z),_(new Date().toISOString().split("T")[0])}}else h(""),v(""),x(""),_(new Date().toISOString().split("T")[0]),P(r),C({})},[t,n,i,r,a]);const R=async z=>{z.preventDefault();const Y=parseFloat(f);if(isNaN(Y)||Y<=0){$.log(" Invalid amount:",f);return}const Z=n==="edit"&&Object.keys(O).length>0;$.log(" Saving transaction:",{mode:n,amount:Y,note:b,date:w,splitAmounts:O,paymentMethod:T});try{const G=new Date(w),K=`${G.getFullYear()}-${(G.getMonth()+1).toString().padStart(2,"0")}`;if(K!==d){const X=`This transaction date (${K}) does not match the current budget month (${d}). Are you sure you want to save it?`;if(!window.confirm(X))return}n==="add"?($.log(" Adding income transaction"),await s({amount:Y,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(D||r).id,type:"Income",reconciled:!1,paymentMethod:T||void 0})):n==="spend"?($.log(" Adding expense transaction"),await s({amount:Y,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(D||r).id,type:"Expense",reconciled:!1,paymentMethod:T||void 0})):n==="edit"&&i&&($.log(" Updating transaction"),Z?await o({...i,amount:Y,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:Object.keys(O)[0]||i.envelopeId,paymentMethod:T||void 0}):await o({...i,amount:Y,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(D||r).id,paymentMethod:T||void 0})),$.log(" Transaction saved successfully"),e()}catch(G){$.error(" Error saving transaction:",G),alert("Failed to save transaction: "+(G instanceof Error?G.message:"Unknown error"))}},j=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},L=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",B=n==="add"?"text-green-500":"text-red-500";return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),m.jsxs(gt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10 flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),m.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:L}),m.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0||i?.isAutomatic,children:i?.isAutomatic?"":"Save"})]}),m.jsxs("form",{onSubmit:R,className:"p-6 space-y-6 flex-1 overflow-y-auto",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${B}`,children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:z=>{const Y=z.target.value.replace(/\D/g,"");if(!Y){h("");return}const G=(parseInt(Y,10)/100).toFixed(2);h(G)},onKeyDown:z=>{(z.key==="e"||z.key==="E"||z.key==="+"||z.key==="-")&&z.preventDefault()},placeholder:"0.00",autoFocus:!0,disabled:i?.isAutomatic,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${B} placeholder-gray-700 ${i?.isAutomatic?"cursor-not-allowed opacity-80":""}`})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),m.jsx("input",{type:"text",value:g,onChange:z=>v(z.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),!i?.isAutomatic&&m.jsx(Jq,{selectedCard:T,onCardSelect:N}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),m.jsx("input",{type:"text",value:b,onChange:z=>x(z.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const z=new Date(w);return`${z.getFullYear()}-${(z.getMonth()+1).toString().padStart(2,"0")}`!==d?m.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[m.jsx(Gu,{size:14}),m.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),m.jsx("input",{type:"date",value:w,onChange:z=>{$.log("Date changed to:",z.target.value),_(z.target.value)},required:!0,disabled:i?.isAutomatic,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark] disabled:opacity-80"})]}),n==="edit"&&a&&m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:m.jsx(eG,{envelopes:I,transactionAmount:parseFloat(f)||0,onSplitChange:C,initialSelectedEnvelopeId:i?.envelopeId})}),n==="edit"&&!i?.isAutomatic&&m.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:m.jsxs("button",{type:"button",onClick:j,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[m.jsx(M9,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})]})})},M0e=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=pt(),[a,s]=A.useState(""),[o,c]=A.useState(""),[d,f]=A.useState(""),[h,g]=A.useState(new Date().toISOString().split("T")[0]),v=r.filter(w=>w.id!==n.id);A.useEffect(()=>{if(!t)return;const w=window.setTimeout(()=>{s(""),c(""),f(""),g(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(w)},[t]);const b=w=>{w.preventDefault();const _=parseFloat(o);isNaN(_)||_<=0||!a||(i(n.id,a,_,d,new Date(h)),e())},x=r.find(w=>w.id===a);return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),m.jsxs(gt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),m.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),m.jsx("button",{onClick:b,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!o||parseFloat(o)<=0||!a,children:"Transfer"})]}),m.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),m.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),m.jsxs("select",{value:a,onChange:w=>s(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[m.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),v.map(w=>m.jsx("option",{value:w.id,className:"bg-white dark:bg-zinc-900",children:w.name},w.id))]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:w=>{const _=w.target.value.replace(/\D/g,"");if(!_){c("");return}const N=(parseInt(_,10)/100).toFixed(2);c(N)},onKeyDown:w=>{(w.key==="e"||w.key==="E"||w.key==="+"||w.key==="-")&&w.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),m.jsx("input",{type:"text",value:d,onChange:w=>f(w.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),m.jsx("input",{type:"date",value:h,onChange:w=>g(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),x&&o&&parseFloat(o)>0&&m.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",m.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(o).toFixed(2)]})," from"," ",m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:x.name})]})]})]})]})})},j0e=({isOpen:t,onClose:e,onSave:n,existingPiggybank:r})=>{const[i,a]=A.useState(""),[s,o]=A.useState(""),[c,d]=A.useState(""),[f,h]=A.useState("#3B82F6"),[g,v]=A.useState("piggy-bank"),[b,x]=A.useState(!1),[w,_]=A.useState(!1);A.useEffect(()=>{r?(a(r.name),o(r.piggybankConfig?.targetAmount?.toString()||""),d(r.piggybankConfig?.monthlyContribution.toString()||"0"),h(r.piggybankConfig?.color||"#3B82F6"),v(r.piggybankConfig?.icon||"piggy-bank"),x(r.piggybankConfig?.paused||!1)):(a(""),o(""),d(""),h("#3B82F6"),v("piggy-bank"),x(!1))},[r,t]);const T=async D=>{if(D.preventDefault(),!(!i.trim()||!c)){_(!0);try{const P={name:i.trim(),isPiggybank:!0,piggybankConfig:{monthlyContribution:parseFloat(c),color:f,icon:g,paused:b}};s&&parseFloat(s)>0&&(P.piggybankConfig.targetAmount=parseFloat(s)),r&&(P.id=r.id,P.currentBalance=r.currentBalance,P.lastUpdated=new Date().toISOString(),P.isActive=r.isActive,P.orderIndex=r.orderIndex,P.userId=r.userId),await n(P),e()}catch(P){$.error("Error saving piggybank:",P),alert("Failed to save piggybank")}finally{_(!1)}}},N=[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}];return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),m.jsxs(gt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-800 px-6 py-4 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:m.jsx(bd,{size:20,className:"text-blue-600 dark:text-blue-400"})}),m.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r?"Edit Piggybank":"New Piggybank"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:m.jsx($m,{size:24})})]}),m.jsxs("form",{onSubmit:T,className:"p-6 space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"piggybank-name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Piggybank Name *"}),m.jsx("input",{type:"text",id:"piggybank-name",value:i,onChange:D=>a(D.target.value),placeholder:"e.g. Vacation Fund, Emergency Savings",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",id:"monthly-contribution",value:c,onChange:D=>{const P=D.target.value.replace(/\D/g,"");if(!P){d("");return}const C=(parseInt(P,10)/100).toFixed(2);d(C)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",id:"target-amount",value:s,onChange:D=>{const P=D.target.value.replace(/\D/g,"");if(!P){o("");return}const C=(parseInt(P,10)/100).toFixed(2);o(C)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),m.jsx("div",{className:"space-y-2",children:m.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:b,onChange:D=>x(D.target.checked),className:"w-5 h-5 rounded border-gray-300 dark:border-zinc-700 text-blue-600 focus:ring-2 focus:ring-blue-500"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Pause auto-contributions"}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Monthly contributions will be skipped while paused"})]})]})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:N.map(D=>m.jsx("button",{type:"button",onClick:()=>h(D.value),className:`w-full aspect-square rounded-lg transition-all ${f===D.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:D.value},title:D.label},D.value))})]}),m.jsxs("div",{className:"pt-4 flex gap-3",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",disabled:w,children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!i.trim()||!c||w,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&c&&!w?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:w?"Saving...":r?"Update":"Create"})]})]})]})]})})},z0e=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return $.error("Date error:",e),"Error"}},L0e=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},nG=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;$.log(" Transaction payment method:",t.paymentMethod);const i=t.type==="Income",a=t.type==="Expense";let s="text-gray-900 dark:text-white";return i&&(s="text-green-600 dark:text-green-400"),a&&(s="text-red-600 dark:text-red-400"),m.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 active:scale-[0.99] transition-all cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[m.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&m.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&m.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),m.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[m.jsx("span",{children:z0e(t.date)}),e&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),t.paymentMethod&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:t.paymentMethod.color}}),m.jsx("span",{className:"truncate max-w-[80px]",children:t.paymentMethod.name})]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${s}`,children:[a?"-":i?"+":"",L0e(t.amount)]}),n?m.jsx("button",{type:"button",onClick:o=>{o.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?m.jsx(Hs,{className:"text-green-500",size:20}):m.jsx(Kj,{className:"text-gray-400",size:20})}):m.jsx("span",{children:t.reconciled?m.jsx(Hs,{className:"text-green-500",size:20}):m.jsx(Kj,{className:"text-gray-400",size:20})})]})]})},iT=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),V0e=()=>{const{id:t}=Fne(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:s,updateTransaction:o,deleteTransaction:c,restoreTransaction:d,getEnvelopeBalance:f,currentMonth:h,allocations:g,incomeSources:v,setEnvelopeAllocation:b,updatePiggybankContribution:x,updateEnvelope:w,fetchTransactionsForEnvelope:_}=pt(),{showToast:T}=Hc(),N=$a(),D=Ss(),[P,O]=A.useState(!1),[C,I]=A.useState(!1),[R,j]=A.useState(!1),[L,B]=A.useState(null),[z,Y]=A.useState(!1),[Z,G]=A.useState(!1),[K,X]=A.useState(""),ee=A.useRef(null),J=A.useRef(!1);A.useEffect(()=>{e.length===0&&r()},[]);const F=e.find(ne=>ne.id===t);A.useEffect(()=>{F?.isPiggybank&&F.id&&_(F.id)},[F?.isPiggybank,F?.id,_]);const Q=async ne=>{if(F)try{const Ie={...F,...ne,id:F.id,userId:F.userId,currentBalance:F.currentBalance,lastUpdated:new Date().toISOString(),isActive:F.isActive,orderIndex:F.orderIndex};await w(Ie),T("Piggybank updated successfully","success"),Y(!1)}catch(Ie){$.error("Failed to update piggybank:",Ie),T("Failed to update piggybank","error")}},te=F?.isPiggybank?F.piggybankConfig?.monthlyContribution||0:g[h]?.find(ne=>ne.envelopeId===t)?.budgetedAmount||0;A.useEffect(()=>{Z&&(X(te.toString()),setTimeout(()=>{ee.current?.focus(),ee.current?.select()},50))},[Z,te]);const W=ne=>{const Ie=(v[h]||[]).reduce((Pe,Ge)=>Pe+Ge.amount,0),ye=g[h]||[];let Oe=ye.map(Pe=>F&&Pe.envelopeId===F.id&&ne!==void 0?{...Pe,budgetedAmount:ne}:Pe).filter(Pe=>{const Ge=e.find(je=>je.id===Pe.envelopeId);return Ge?Ge.isActive!==!1:!1}).reduce((Pe,Ge)=>Pe+Ge.budgetedAmount,0);return ne!==void 0&&F&&(ye.some(Ge=>Ge.envelopeId===F.id)||(Oe+=ne)),Ie-Oe},re=Z?W(parseFloat(K)||0):W(),oe=async()=>{if(!F||J.current)return;const ne=parseFloat(K);if(isNaN(ne)||ne<0){T("Please enter a valid positive number","error");return}J.current=!0;try{F.isPiggybank?await x(F.id,ne):await b(F.id,ne),G(!1)}catch(Ie){$.error("Failed to save budget:",Ie),T("Failed to update budget","error")}finally{J.current=!1}};if(!F)return i?m.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:m.jsx("p",{children:"Loading envelope..."})}):m.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:m.jsx("p",{children:"Envelope not found."})});const we=n.filter(ne=>ne.envelopeId===F.id).filter(ne=>{if(ne.description==="Budgeted"||ne.description==="Piggybank Contribution")return!1;if(F.isPiggybank){if(!F.createdAt)return!0;const Ie=px(F.createdAt).toISOString().split("T")[0];return px(ne.date).toISOString().split("T")[0]>=Ie}return ne.month===h||!ne.month}).sort((ne,Ie)=>new Date(Ie.date).getTime()-new Date(ne.date).getTime()),se=()=>{D.state?.fromGlobalFAB?N("/"):N(-1)},Ee=()=>{t&&(a(t),N(-1))},ge=ne=>{const Ie={...ne,reconciled:!ne.reconciled};o(Ie)};return m.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-[calc(8rem+env(safe-area-inset-bottom))] max-w-4xl mx-auto",children:[m.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[m.jsx("button",{onClick:()=>{if(F.isPiggybank)Y(!0);else{const ne=prompt("Rename envelope:",F.name);ne&&ne.trim()&&t&&s(t,ne)}},className:"text-blue-600 dark:text-blue-400 font-medium",children:F.isPiggybank?"Edit":"Rename"}),m.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:F.name}),m.jsx("button",{onClick:se,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),m.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const ne=F.isPiggybank?f(F.id):f(F.id,h);return m.jsx("span",{className:`text-xl font-bold ${ne<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:iT(ne)})})()]}),m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-zinc-400",children:F.isPiggybank?"Monthly Contribution":"Budgeted This Month"}),Z?m.jsx("form",{onSubmit:ne=>{ne.preventDefault(),oe()},className:"flex items-center gap-2",children:m.jsx("input",{ref:ee,type:"number",step:"0.01",value:K,onChange:ne=>X(ne.target.value),onBlur:oe,className:"w-24 px-2 py-1 text-right font-semibold bg-gray-100 dark:bg-zinc-800 rounded border border-blue-500 focus:outline-none"})}):m.jsx("div",{onClick:()=>G(!0),className:"px-2 py-1 -mr-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 cursor-pointer transition-colors",children:m.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:iT(te)})})]}),m.jsxs("div",{className:`mt-3 py-1.5 px-3 rounded-md flex justify-between items-center text-xs font-medium transition-colors ${re<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":re===0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:[m.jsx("span",{children:"Left to Budget:"}),m.jsx("span",{children:iT(re)})]})]})]}),m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>O(!0),children:[m.jsx(die,{className:"w-5 h-5 mr-3"}),"Add Money"]}),m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>I(!0),children:[m.jsx(cie,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>j(!0),children:[m.jsx(Gre,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),m.jsxs("section",{className:"mt-6",children:[m.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:we.length===0?m.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):m.jsx(lr,{initial:!1,mode:"popLayout",children:we.map(ne=>m.jsx(gt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(rw,{disabled:ne.isAutomatic,onDelete:()=>{if(!ne.id)return;const Ie={...ne};c(ne.id),T("Transaction deleted","neutral",()=>d(Ie))},children:m.jsx(nG,{transaction:ne,onReconcile:()=>ge(ne),onEdit:()=>{ne.isAutomatic||B(ne)}})})},ne.id))})})]}),m.jsx("div",{className:"mt-8",children:m.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{const ne=F.isPiggybank?`Are you sure you want to delete "${F.name}"? This will delete the piggybank and all its history.`:`Are you sure you want to remove "${F.name}" from ${h}? This will delete all transactions for this month only.`;confirm(ne)&&Ee()},children:[m.jsx(M9,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),m.jsx(tG,{isVisible:P||C||!!L,onClose:()=>{O(!1),I(!1),B(null)},mode:P?"add":C?"spend":"edit",currentEnvelope:F,initialTransaction:L}),m.jsx(M0e,{isVisible:R,onClose:()=>j(!1),sourceEnvelope:F}),m.jsx(j0e,{isOpen:z,onClose:()=>Y(!1),onSave:Q,existingPiggybank:F})]})},B0e=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:s,totalAllocated:o,transactionCount:c,totalTransactionAmount:d,isLoading:f=!1})=>{const[h,g]=A.useState("confirm"),v=w=>{const[_,T]=w.split("-");return new Date(parseInt(_),parseInt(T)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},b=()=>{h==="confirm"?g("final_confirm"):h==="final_confirm"&&n()},x=()=>{g("confirm"),e()};return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(gt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",v(r)]}),m.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:f,children:""})]}),m.jsx("div",{className:"p-6 space-y-4",children:h==="confirm"?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),m.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:m.jsxs("ul",{className:"space-y-1",children:[m.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),m.jsxs("li",{children:[" ",s," envelope allocation",s!==1?"s":""," (totaling $",o.toFixed(2),")"]}),m.jsxs("li",{children:[" ",c," transaction",c!==1?"s":""," (totaling $",d.toFixed(2),")"]})]})})]})]})}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[m.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data, income sources, allocations, and all transactions."]})})]})})]}):m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:m.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-2",children:"Are you absolutely sure?"}),m.jsxs("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["This action cannot be undone. All budget data and transactions for ",m.jsx("strong",{children:v(r)})," will be permanently removed."]})]})}),m.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:f,children:"Cancel"}),m.jsx("button",{type:"button",onClick:b,disabled:f,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Clearing...":h==="confirm"?"Continue":"Yes, Start Fresh"})]})]})]})})},U0e=({isOpen:t,onClose:e})=>{const[n,r]=A.useState([]),[i,a]=A.useState({level:void 0,source:"",search:""}),[s,o]=A.useState(!1),[c,d]=A.useState(!0);A.useEffect(()=>{if(t)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[t]),A.useEffect(()=>Tn.subscribe(T=>{r(T),c&&setTimeout(()=>{const N=document.getElementById("log-container");N&&(N.scrollTop=N.scrollHeight)},100)}),[c]);const f=A.useMemo(()=>Tn.getLogs({level:i.level,source:i.source||void 0,search:i.search||void 0}),[n,i]),h=A.useMemo(()=>{const _=new Set;return n.forEach(T=>_.add(T.source)),Array.from(_).sort()},[n]),g=A.useMemo(()=>Tn.getStats(),[n]),v=_=>new Date(_).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),b=_=>{switch(_){case Di.DEBUG:return{icon:Kre,color:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-800"};case Di.INFO:return{icon:Xj,color:"text-blue-500",bgColor:"bg-blue-100 dark:bg-blue-900"};case Di.WARN:return{icon:Gu,color:"text-yellow-500",bgColor:"bg-yellow-100 dark:bg-yellow-900"};case Di.ERROR:return{icon:oie,color:"text-red-500",bgColor:"bg-red-100 dark:bg-red-900"};default:return{icon:Xj,color:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-800"}}},x=()=>{Tn.downloadLogs({level:i.level,source:i.source||void 0,search:i.search||void 0})},w=()=>{Tn.clearLogs()};return t?m.jsx(lr,{children:m.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:e,children:m.jsxs(gt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col border border-gray-200 dark:border-zinc-800 overscroll-contain",onClick:_=>_.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Real-time Logs"}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-zinc-400",children:[m.jsx(mie,{className:"w-4 h-4"}),m.jsxs("span",{children:[g.total," entries"]}),m.jsx("span",{children:""}),m.jsxs("span",{children:["Session: ",Math.floor(g.sessionDuration/1e3),"s"]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>d(!c),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${c?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-zinc-800 dark:text-zinc-300"}`,children:"Auto-scroll"}),m.jsx("button",{onClick:x,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",title:"Export logs",children:m.jsx(YA,{className:"w-4 h-4"})}),m.jsx("button",{onClick:w,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",title:"Clear logs",children:m.jsx(Qg,{className:"w-4 h-4"})}),m.jsx("button",{onClick:e,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",children:m.jsx($m,{className:"w-5 h-5"})})]})]}),m.jsxs("div",{className:"border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("button",{onClick:()=>o(!s),className:"w-full px-4 py-3 flex items-center justify-between text-sm text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(P9,{className:"w-4 h-4"}),m.jsx("span",{children:"Filters"}),(i.level!==void 0||i.source||i.search)&&m.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 rounded-full text-xs",children:"Active"})]}),m.jsx(nie,{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`})]}),m.jsx(lr,{children:s&&m.jsxs(gt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-4 space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Level"}),m.jsxs("select",{value:i.level??"",onChange:_=>a(T=>({...T,level:_.target.value?Number(_.target.value):void 0})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white",children:[m.jsx("option",{value:"",children:"All Levels"}),m.jsx("option",{value:Di.DEBUG,children:"Debug"}),m.jsx("option",{value:Di.INFO,children:"Info"}),m.jsx("option",{value:Di.WARN,children:"Warning"}),m.jsx("option",{value:Di.ERROR,children:"Error"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Source"}),m.jsxs("select",{value:i.source,onChange:_=>a(T=>({...T,source:_.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white",children:[m.jsx("option",{value:"",children:"All Sources"}),h.map(_=>m.jsx("option",{value:_,children:_},_))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Search"}),m.jsxs("div",{className:"relative",children:[m.jsx(D9,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),m.jsx("input",{type:"text",value:i.search,onChange:_=>a(T=>({...T,search:_.target.value})),placeholder:"Search messages...",className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-400"})]})]})]}),m.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600 dark:text-zinc-400",children:[m.jsxs("span",{children:["Debug: ",g.byLevel.DEBUG||0]}),m.jsxs("span",{children:["Info: ",g.byLevel.INFO||0]}),m.jsxs("span",{children:["Warn: ",g.byLevel.WARN||0]}),m.jsxs("span",{children:["Error: ",g.byLevel.ERROR||0]})]})]})})]}),m.jsx("div",{id:"log-container",className:"flex-1 overflow-y-auto p-4 space-y-1 font-mono text-sm overscroll-contain touch-pan-y",style:{maxHeight:"calc(90vh - 280px)"},children:f.length===0?m.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-zinc-400",children:n.length===0?"No logs yet":"No logs match current filters"}):f.map(_=>{const T=b(_.level),N=T.icon;return m.jsxs(gt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`flex items-start gap-3 p-2 rounded-lg ${T.bgColor} hover:opacity-80 transition-opacity`,children:[m.jsx(N,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${T.color}`}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:v(_.timestamp)}),m.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-zinc-400",children:_.source}),_.userId&&m.jsx("div",{className:"w-3 h-3 text-gray-400 flex items-center justify-center",title:`User: ${_.userId}`,children:m.jsx(mae,{className:"w-3 h-3"})})]}),m.jsx("div",{className:"text-gray-900 dark:text-white break-words",children:_.message}),_.data&&m.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-zinc-400 bg-black/5 dark:bg-white/5 p-2 rounded overflow-x-auto",children:m.jsx("pre",{children:JSON.stringify(_.data,null,2)})})]})]},_.id)})})]})})}):null},F0e=()=>{const t=$a(),e=A.useRef(null),{envelopes:n,transactions:r,categories:i,resetData:a,importData:s,getEnvelopeBalance:o,appSettings:c,updateAppSettings:d,initializeAppSettings:f,incomeSources:h,allocations:g,currentMonth:v,clearMonthData:b,handleUserLogout:x,resetOnboarding:w,resetGuidedTutorial:_}=pt(),{deleteAccount:T,currentUser:N,logout:D}=Zt(),[P,O]=A.useState(null),[C,I]=A.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[R,j]=A.useState(!1),[L,B]=A.useState(""),[z,Y]=A.useState(!1),[Z,G]=A.useState(!1),[K,X]=A.useState(null),[ee,J]=A.useState(!1),[F,Q]=A.useState(!1),[te,W]=A.useState(!1),[ue,re]=A.useState(null),oe=()=>{const Me=window.setTimeout(()=>{W(!0),Tn.info("Settings","Log viewer opened via long press")},500);re(Me)},we=()=>{ue&&(clearTimeout(ue),re(null))},se=Me=>{Me.preventDefault();const mt=window.setTimeout(()=>{W(!0),Tn.info("Settings","Log viewer opened via long press (mobile)")},500);re(mt)},Ee=Me=>{Me.preventDefault(),ue&&(clearTimeout(ue),re(null))},ge=()=>{W(!0),Tn.info("Settings","Log viewer opened via double click")},ne=978307200,Ie=c?.theme??"system",ye=c?.fontSize??"medium";A.useEffect(()=>{c||f().catch(Me=>{Tn.error("Settings","Failed to initialize app settings",{error:Me})})},[f,c]);const Se=(Me,mt)=>{O({type:Me,text:mt}),setTimeout(()=>O(null),3500)},Oe=A.useMemo(()=>{const Me=n.length,mt=r.length,Sr=v?g[v]||[]:[],On=Object.values(h).reduce((Xr,ln)=>Xr+ln.length,0),_n=Sr.length,sn=n.reduce((Xr,ln)=>{const ur=ln.isPiggybank?o(ln.id):o(ln.id,v);return Xr+(typeof ur=="number"?ur:0)},0),Dt=0,on=r.reduce((Xr,ln)=>{let ur=0;if(typeof ln.date=="string"){const lt=Date.parse(ln.date);ur=Number.isNaN(lt)?0:lt}else typeof ln.date=="number"&&(ur=ln.date<2e9?(ln.date+ne)*1e3:ln.date);return Math.max(Xr,ur)},0),et=Dt||on?new Date(Math.max(Dt,on)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:Me,transactionCount:mt,incomeSourceCount:On,allocationCount:_n,totalBalance:sn,lastUpdated:et}},[n,r,h,g,v]),Pe=()=>{try{Tn.info("Settings","Creating backup...");const Me={appVersion:"1.10.3",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:n.map(sn=>({...sn,currentBalance:(()=>{const Dt=sn.isPiggybank?o(sn.id):o(sn.id,v);return typeof Dt=="number"?Dt:0})(),lastUpdated:new Date().toISOString()})),transactions:r,categories:i,allocations:g,incomeSources:h},mt=new Blob([JSON.stringify(Me,null,2)],{type:"application/json"}),Sr=URL.createObjectURL(mt),On=document.createElement("a");On.href=Sr,On.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(On),On.click(),document.body.removeChild(On),URL.revokeObjectURL(Sr);const _n=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",_n),I(_n),X({success:!0,message:"Backup downloaded successfully."})}catch(Me){Tn.error("Settings","Backup creation failed",{error:Me}),X({success:!1,message:"Failed to create backup file.",onRetry:Pe})}},Ge=()=>{G(!0),X(null);try{const Me=["Date","Merchant","Payment Method","Notes","Amount","Type","Envelope","Reconciled"],mt=r.filter(et=>et.description!=="Budgeted"&&et.description!=="Piggybank Contribution"),Sr=new Set,On=[];for(const et of mt){let Xr,ln,ur;if(et.splitGroupId&&!Sr.has(et.splitGroupId)){Sr.add(et.splitGroupId);const En=mt.filter(Ha=>Ha.splitGroupId===et.splitGroupId);Xr=En.reduce((Ha,Al)=>Ha+Al.amount,0),ln=En.map(Ha=>n.find(Al=>Al.id===Ha.envelopeId)?.name||"Unknown").join(", "),ur=En.every(Ha=>Ha.reconciled)}else{if(et.splitGroupId&&Sr.has(et.splitGroupId))continue;Xr=et.amount,ln=n.find(En=>En.id===et.envelopeId)?.name||"Unknown",ur=et.reconciled}const lt=(et.merchant||"").replace(/"/g,'""'),cn=(et.description||"").replace(/"/g,'""');let nn="";et.paymentMethod&&(nn=`${et.paymentMethod.name} (...${et.paymentMethod.last4})`);const ci=nn.replace(/"/g,'""');let Qr="Invalid Date";if(et.date){if(typeof et.date=="string")Qr=et.date.split("T")[0];else if(typeof et.date=="number"){const En=et.date<2e9?(et.date+ne)*1e3:et.date;Qr=new Date(En).toISOString().split("T")[0]}}On.push([Qr,`"${lt}"`,`"${ci}"`,`"${cn}"`,Xr.toFixed(2),et.type,`"${ln}"`,ur?"Yes":"No"].join(","))}const _n=[Me.join(","),...On].join(`
`),sn=new Blob([_n],{type:"text/csv;charset=utf-8;"}),Dt=URL.createObjectURL(sn),on=document.createElement("a");on.href=Dt,on.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(on),on.click(),document.body.removeChild(on),URL.revokeObjectURL(Dt),X({success:!0,message:"Transactions CSV exported successfully."})}catch(Me){Tn.error("Settings","CSV export failed",{error:Me}),X({success:!1,message:"Failed to export CSV. Please try again.",onRetry:Ge})}finally{G(!1)}},je=()=>{e.current?.click()},Je=Me=>{const mt=Me.target.files?.[0];if(!mt)return;const Sr=new FileReader;Sr.onload=async On=>{try{const _n=JSON.parse(On.target?.result),sn=await s(_n);if(!sn.success){Se("error",sn.message);return}if(_n.appSettings?.theme)try{await d({theme:_n.appSettings.theme})}catch(Dt){Tn.error("Settings","Failed to update imported settings",{error:Dt})}Se("success",`Loaded ${_n.envelopes?.length??0} envelopes, ${_n.transactions?.length??0} transactions.`)}catch(_n){Tn.error("Settings","Import failed",{error:_n}),Se("error","Invalid backup file. Please verify the JSON.")}},Sr.readAsText(mt),Me.target.value=""},Lt=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await a(),Se("success","All data has been permanently deleted."),t("/")}catch(Me){Tn.error("Settings","Reset failed",{error:Me}),Se("error","Failed to delete all data. Some data may remain.")}},Ln=async()=>{if(!L.trim()){Se("error","Please enter your password to confirm account deletion.");return}j(!0);try{await a(),await T(L)?Se("success","Your account has been permanently deleted."):Se("error","Failed to delete account. Please try again.")}catch(Me){Tn.error("Settings","Account deletion failed",{error:Me}),Se("error","Failed to delete account. Please try again.")}finally{j(!1),Y(!1),B("")}},Sn=async()=>{if(!N){Se("error","You must be logged in to clean up data.");return}J(!0);try{const Me=await VI.cleanupOrphanedData(N.id),mt=Me.orphanedAllocationsDeleted+Me.orphanedTransactionsDeleted;mt>0?Se("success",`Cleaned ${mt} orphaned items: ${Me.orphanedAllocationsDeleted} allocations and ${Me.orphanedTransactionsDeleted} transactions.`):Se("success","No orphaned data found. Your database is already clean!")}catch(Me){Tn.error("Settings","Cleanup failed",{error:Me}),Se("error","Failed to clean up orphaned data. Please try again.")}finally{J(!1)}},ht=()=>{Q(!0)},Vt=async()=>{Q(!1),await b(v),Se("success","Month data has been reset.")},Yr=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{x(),D(),t("/")}catch(Me){Tn.error("Settings","Logout failed",{error:Me})}},Kr=N?.displayName?.charAt(0)?.toUpperCase()||N?.email?.charAt(0)?.toUpperCase()||"U";return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[m.jsx("button",{onClick:()=>t(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),m.jsxs("div",{className:"p-4 space-y-6 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[P&&m.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${P.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[P.type==="success"?m.jsx(zb,{size:18}):m.jsx(Qg,{size:18}),P.text]}),m.jsx("section",{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 flex items-center gap-4",children:[m.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-semibold shadow-md",children:Kr}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:N?.displayName||N?.email?.split("@")[0]||"User"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate",children:N?.email}),m.jsxs("button",{onClick:Yr,className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium flex items-center gap-1 hover:underline",children:[m.jsx(Lie,{size:14})," Log Out"]})]})]})}),m.jsx("section",{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(YA,{className:"text-blue-500",size:22}),m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Oe.envelopeCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Oe.transactionCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Oe.incomeSourceCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Oe.allocationCount})]})]})]})}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Categories"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:m.jsxs("button",{onClick:()=>t("/settings/categories"),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-xl",children:""}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Manage Categories"})]}),m.jsx(rs,{className:"text-gray-400",size:18})]})})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[Ie==="light"&&m.jsx("span",{className:"text-orange-500 text-lg",children:""}),Ie==="dark"&&m.jsx("span",{className:"text-purple-500 text-lg",children:""}),Ie==="system"&&m.jsx("span",{className:"text-gray-500 text-lg",children:""}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:Ie})]}),m.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(Me=>m.jsx("button",{onClick:async()=>{try{await d({theme:Me.value})}catch(mt){Tn.error("Settings","Failed to update theme setting",{error:mt})}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${Ie===Me.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:Me.label},Me.value))})]}),m.jsx("div",{className:"h-px bg-gray-100 dark:bg-zinc-800"}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-gray-500 text-lg",children:"Aa"}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Font Size"})]}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:ye})]}),m.jsx("div",{className:"flex gap-2",children:[{label:"A",value:"extra-small",sizeClass:"text-[10px]"},{label:"A",value:"small",sizeClass:"text-xs"},{label:"A",value:"medium",sizeClass:"text-base"},{label:"A",value:"large",sizeClass:"text-xl"},{label:"A",value:"extra-large",sizeClass:"text-2xl"}].map(Me=>m.jsx("button",{onClick:async()=>{try{await d({fontSize:Me.value})}catch(mt){Tn.error("Settings","Failed to update font size setting",{error:mt})}},className:`flex-1 py-2 rounded-lg font-medium border transition-colors flex items-center justify-center ${ye===Me.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:m.jsx("span",{className:Me.sizeClass,children:Me.label})},Me.value))})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Help & Guide"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[m.jsxs("button",{onClick:()=>{w(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Wf,{className:"text-purple-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Onboarding Guide"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"View the welcome tutorial again"})]})]}),m.jsx(rs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>{_(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Wf,{className:"text-blue-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Guided Tutorial"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Walk through the hands-on setup again"})]})]}),m.jsx(rs,{className:"text-gray-400",size:18})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[m.jsxs("button",{onClick:Pe,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(YA,{className:"text-blue-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),m.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",C]})]})]}),m.jsx(rs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:je,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(fae,{className:"text-blue-500",size:20}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),m.jsx(rs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Ge,disabled:Z,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[Z?m.jsx(Qj,{className:"text-blue-500 animate-spin",size:20}):m.jsx(Eie,{className:"text-blue-500",size:20}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:Z?"Preparing CSV":"Export Transactions (CSV)"})]}),m.jsx(rs,{className:"text-gray-400",size:18})]}),m.jsx("input",{type:"file",ref:e,onChange:Je,accept:".json",className:"hidden"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[m.jsxs("button",{onClick:ht,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(rh,{className:"text-orange-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Start Fresh (This Month)"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Clear all allocations and data for the current month only"})]})]}),m.jsx(rs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Sn,disabled:ee,className:"w-full p-4 flex items-center justify-between hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800 disabled:opacity-60 disabled:cursor-not-allowed",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[ee?m.jsx(Qj,{className:"text-yellow-500 animate-spin",size:20}):m.jsx(Wf,{className:"text-yellow-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:ee?"Cleaning Data...":"Purge Orphaned Data"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Remove allocations and transactions pointing to deleted envelopes"})]})]}),m.jsx(rs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Lt,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Qg,{className:"text-red-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete everything"})]})]}),m.jsx(rs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>Y(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Gu,{className:"text-red-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),m.jsx(rs,{className:"text-gray-400",size:18})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider px-4 mb-2",children:"Siri Integration"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-200 dark:border-zinc-800",children:m.jsxs("div",{className:"p-4",children:[m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-3",children:"Use this token in your Siri Shortcut to add transactions by voice."}),c?.siriToken?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("code",{className:"flex-1 bg-gray-100 dark:bg-zinc-800 px-3 py-2 rounded-lg text-sm font-mono text-gray-900 dark:text-white select-all",children:c.siriToken}),m.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c.siriToken),Se("success","Token copied to clipboard")},className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",title:"Copy token",children:m.jsx("div",{className:"flex items-center gap-1",children:m.jsx("span",{className:"text-sm font-medium",children:"Copy"})})}),m.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to regenerate your Siri token? You will need to update your Shortcut.")){const Me=crypto.randomUUID().replace(/-/g,"").slice(0,16);await d({siriToken:Me}),Se("success","Siri token regenerated")}},className:"p-2 bg-gray-200 dark:bg-zinc-700 text-gray-700 dark:text-zinc-300 rounded-lg hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",title:"Regenerate token",children:m.jsx(rh,{size:20})})]}):m.jsx("button",{onClick:async()=>{const Me=crypto.randomUUID().replace(/-/g,"").slice(0,16);await d({siriToken:Me}),Se("success","Siri token generated")},className:"w-full py-2 px-4 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors",children:"Generate Siri Token"})]})})]}),m.jsx("div",{className:"text-center py-4",children:m.jsxs("p",{className:"text-xs text-gray-400 dark:text-zinc-500 cursor-pointer select-none hover:text-gray-300 dark:hover:text-zinc-400 transition-colors",onMouseDown:oe,onMouseUp:we,onMouseLeave:we,onTouchStart:se,onTouchEnd:Ee,onTouchCancel:Ee,onDoubleClick:ge,title:"Long press or double-click to view logs",children:["Version ","1.10.3"," (PWA)"]})}),K&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[K.success?m.jsx(zb,{className:"text-green-500",size:24}):m.jsx(Gu,{className:"text-red-500",size:24}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:K.success?"Success":"Error"})]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:K.message}),m.jsxs("div",{className:"flex gap-2",children:[K.onRetry&&m.jsx("button",{onClick:()=>{X(null),K.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),m.jsx("button",{onClick:()=>X(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),m.jsx(B0e,{isVisible:F,onClose:()=>Q(!1),onConfirm:Vt,currentMonth:v,incomeCount:(h[v]||[]).length,totalIncome:(h[v]||[]).reduce((Me,mt)=>Me+mt.amount,0),allocationCount:(g[v]||[]).filter(Me=>n.some(mt=>mt.id===Me.envelopeId)).length,totalAllocated:(g[v]||[]).filter(Me=>n.some(mt=>mt.id===Me.envelopeId)).reduce((Me,mt)=>Me+mt.budgetedAmount,0),transactionCount:r.filter(Me=>Me.month===v).length,totalTransactionAmount:r.filter(Me=>Me.month===v).reduce((Me,mt)=>Me+mt.amount,0)}),z&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx(Gu,{className:"text-red-500",size:24}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),m.jsx("input",{type:"password",value:L,onChange:Me=>B(Me.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>{Y(!1),B("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),m.jsx("button",{onClick:Ln,disabled:R||!L.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Deleting...":"Delete Account"})]})]})}),m.jsx(U0e,{isOpen:te,onClose:()=>W(!1)})]})]})},$0e=({category:t,isBeingDragged:e,isEditing:n,editName:r,setEditName:i,handleUpdate:a,setEditingId:s,handleDelete:o,handleLongPressTrigger:c,setMoveableRef:d})=>{const f=LI(h=>{c(h,t.id)},{threshold:500,cancelOnMovement:25,detect:vc.Touch});return m.jsx("div",{...f(),ref:d(t.id),style:{cursor:e?"grabbing":"pointer"},className:"bg-white dark:bg-zinc-900 rounded-xl p-4 border border-gray-100 dark:border-zinc-800 flex items-center justify-between group select-none",children:n?m.jsxs("div",{className:"flex-1 flex gap-2",children:[m.jsx("input",{type:"text",value:r,onChange:h=>i(h.target.value),className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),m.jsx("button",{onClick:()=>a(t.id),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm",children:"Save"}),m.jsx("button",{onClick:()=>s(null),className:"text-gray-500 px-2 text-sm",children:"Cancel"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"text-gray-400 dark:text-zinc-600 cursor-grab active:cursor-grabbing",onMouseDown:h=>c(h,t.id),children:m.jsx(nh,{size:20})}),m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.name})]}),m.jsxs("div",{className:"flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{onClick:()=>{s(t.id),i(t.name)},className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400",children:m.jsx(qie,{size:18})}),m.jsx("button",{onClick:()=>o(t.id),className:"p-2 text-gray-500 hover:text-red-600 dark:hover:text-red-400",children:m.jsx(Qg,{size:18})})]})]})})},q0e=()=>{const t=$a(),{categories:e,addCategory:n,updateCategory:r,deleteCategory:i,reorderCategories:a}=pt(),{showToast:s}=Hc(),[o,c]=A.useState(!1),[d,f]=A.useState(""),[h,g]=A.useState(null),[v,b]=A.useState(""),[x,w]=A.useState(e),_=A.useRef(e),[T,N]=A.useState(!1),[D,P]=A.useState(null),O=A.useRef(!1),C=A.useRef(null),I=A.useRef({}),R=A.useRef({}),j=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{T||(w(e),_.current=e)},[e,T]),A.useEffect(()=>(T?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[T]);const L=A.useCallback((ee,J)=>{$.log(" Long press triggered for category:",J);const F=R.current[J];if(F){$.log(" Moveable instance found, starting drag"),O.current=!0;const Q=ee.nativeEvent||ee;F.dragStart(Q)}else $.log(" No moveable instance found for:",J)},[]),B=A.useCallback(ee=>J=>{J?I.current[ee]=J:delete I.current[ee]},[]),z=async ee=>{if(ee.preventDefault(),!!d.trim())try{await n({name:d.trim(),orderIndex:e.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),f(""),c(!1),s("Category added","success")}catch(J){$.error(J),s("Failed to add category","error")}},Y=async ee=>{if(!v.trim())return;const J=e.find(F=>F.id===ee);if(J)try{await r({...J,name:v.trim()}),g(null),s("Category updated","success")}catch(F){$.error(F),s("Failed to update category","error")}},Z=async ee=>{if(e.length<=1){s("Cannot delete the last category","error");return}if(confirm('Are you sure? Envelopes in this category will be moved to "Uncategorized".'))try{await i(ee),s("Category deleted","success")}catch(J){$.error(J),s("Failed to delete category","error")}},G=8,K=(ee,J,F)=>Math.max(J,Math.min(F,ee)),X=A.useCallback(async ee=>{if(!ee.length)return;const J=ee.map(F=>F.id);try{await a(J)}catch(F){$.error("Failed to persist category order:",F),s("Failed to save category order","error")}},[a,s]);return A.useEffect(()=>{const ee=()=>{Object.values(R.current).forEach(Q=>Q?.destroy()),R.current={}};if(!x.length)return;const J=()=>{x.forEach(Q=>{const te=I.current[Q.id];if(!te||!C.current)return;const W=new Yq(C.current,{target:te,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[],edge:!1,origin:!1});W.on("dragStart",re=>{if($.log(" Moveable dragStart event",{isManualDrag:O.current,categoryId:Q.id}),!O.current){$.log(" Stopping drag - not manual"),re.stop();return}const oe=re.inputEvent.target;if(oe.tagName==="INPUT"||oe.tagName==="BUTTON"||oe.closest("button")){$.log(" Stopping drag - clicked on button/input"),re.stop();return}$.log(" Drag starting for category:",Q.id);const we=_.current.findIndex(ge=>ge.id===Q.id),se=re.target,Ee=se.getBoundingClientRect();P(Q.id),j.current={activeId:Q.id,startIndex:we,currentIndex:we,itemHeight:Ee.height+G},se.style.transition="none",se.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",se.style.zIndex="20",N(!0)});let ue=null;W.on("drag",re=>{const oe=re.target;ue!==null&&cancelAnimationFrame(ue),ue=requestAnimationFrame(()=>{const we=j.current;if(we.activeId!==Q.id)return;const se=re.beforeTranslate[1];oe.style.transform=`translateY(${se}px)`,oe.style.transition="none";const{itemHeight:Ee,startIndex:ge}=we,ne=Math.round(se/Ee),Ie=K(ge+ne,0,_.current.length-1);Ie!==we.currentIndex&&(we.currentIndex=Ie,_.current.forEach((ye,Se)=>{if(ye.id===Q.id)return;const Oe=I.current[ye.id];if(!Oe)return;let Pe=0;ge<Ie&&Se>ge&&Se<=Ie?Pe=-Ee:ge>Ie&&Se>=Ie&&Se<ge&&(Pe=Ee),Oe.style.transform=Pe?`translateY(${Pe}px)`:"",Oe.style.transition="transform 0.2s ease"})),ue=null})}),W.on("dragEnd",re=>{ue!==null&&(cancelAnimationFrame(ue),ue=null);const oe=re.target,{startIndex:we,currentIndex:se}=j.current;if(oe.style.transform="",oe.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",oe.style.boxShadow="",_.current.forEach(Ee=>{const ge=I.current[Ee.id];ge&&(ge.style.transform="",ge.style.transition="")}),we!==se){const Ee=[..._.current],[ge]=Ee.splice(we,1);Ee.splice(se,0,ge),_.current=Ee,w(Ee),X(Ee)}setTimeout(()=>{oe.style.zIndex="",P(null),N(!1),O.current=!1},300)}),R.current[Q.id]=W})},F=window.setTimeout(J,80);return()=>{clearTimeout(F),ee()}},[x,X]),m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[m.jsx("style",{children:`
        .moveable-control-box,
        .moveable-line,
        .moveable-direction {
          display: none !important;
        }
      `}),m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[m.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:m.jsx(al,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Manage Categories"})]}),m.jsxs("div",{className:"p-4 max-w-2xl mx-auto space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:o?m.jsxs("form",{onSubmit:z,className:"flex gap-2",children:[m.jsx("input",{type:"text",value:d,onChange:ee=>f(ee.target.value),placeholder:"Category Name",className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),m.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium",children:"Save"}),m.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-500 px-2",children:"Cancel"})]}):m.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 font-medium py-2",children:[m.jsx(xd,{size:20}),"Add Category"]})}),m.jsxs("div",{ref:C,className:"space-y-2",style:{touchAction:T?"none":"auto"},children:[x.map(ee=>m.jsx($0e,{category:ee,isBeingDragged:D===ee.id,isEditing:h===ee.id,editName:v,setEditName:b,handleUpdate:Y,setEditingId:g,handleDelete:Z,handleLongPressTrigger:L,setMoveableRef:B},ee.id)),x.length===0&&!o&&m.jsx("div",{className:"text-center text-gray-500 dark:text-zinc-500 py-8",children:"No categories yet. Add one to get started."})]})]})]})},G0e=()=>{const{addEnvelope:t,setEnvelopeAllocation:e,currentMonth:n,categories:r,fetchCategories:i}=pt(),{showToast:a}=Hc(),s=$a(),[o]=A9();Fo.useEffect(()=>{r.length===0&&i()},[r.length,i]);const[c,d]=A.useState(""),[f,h]=A.useState(o.get("type")==="piggybank"),[g,v]=A.useState(o.get("categoryId")||"");Fo.useEffect(()=>{if(!o.get("categoryId")&&r.length>0&&!g){const C=r.find(I=>I.isDefault);C&&v(C.id)}},[r,o,g]);const[b,x]=A.useState(""),[w,_]=A.useState(""),[T,N]=A.useState("#3B82F6"),[D,P]=A.useState(!1),O=async C=>{if(C.preventDefault(),!c.trim()||D)return;P(!0);const I=pt.getState().envelopes,j=(I.length>0?Math.max(...I.map(Y=>Y.orderIndex??0)):-1)+1,L=f?new Date(`${n}-01T00:00:00`):new Date,B={name:c,currentBalance:0,lastUpdated:new Date().toISOString(),createdAt:L.toISOString(),isActive:!0,orderIndex:j,categoryId:g||void 0};if(f){B.isPiggybank=!0;const Y={monthlyContribution:parseFloat(w||"0"),color:T,icon:"piggy-bank"};b&&parseFloat(b)>0&&(Y.targetAmount=parseFloat(b)),B.piggybankConfig=Y}t(B).then(Y=>{if(Y){const Z=f?parseFloat(w||"0"):0;e(Y,Z).catch(G=>$.error("Failed to create allocation:",G)),setTimeout(()=>{s("/")},50)}}).catch(Y=>{$.error("Failed to create envelope:",Y),a(Y.message||"Failed to create envelope","error"),P(!1)})};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[m.jsx("button",{onClick:()=>s("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:m.jsx(al,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f?"New Piggybank":"New Envelope"})]}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[m.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:m.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:f?m.jsx(bd,{size:40}):m.jsx(kie,{size:40})})}),m.jsxs("form",{onSubmit:O,className:"p-6 space-y-6 pb-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Type"}),m.jsxs("div",{className:"flex bg-gray-100 dark:bg-zinc-800 p-1 rounded-xl",children:[m.jsx("button",{type:"button",onClick:()=>h(!1),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300":"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm"}`,children:"Spending"}),m.jsx("button",{type:"button",onClick:()=>h(!0),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300"}`,children:"Piggybank"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Category"}),m.jsx("select",{id:"category",value:g,onChange:C=>v(C.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all appearance-none",children:r.map(C=>m.jsx("option",{value:C.id,children:C.name},C.id))})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:f?"Piggybank Name":"Envelope Name"}),m.jsx("input",{type:"text",id:"name",value:c,onChange:C=>d(C.target.value),placeholder:f?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),f&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"number",id:"monthly-contribution",value:w,onChange:C=>_(C.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:f})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"number",id:"target-amount",value:b,onChange:C=>x(C.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(C=>m.jsx("button",{type:"button",onClick:()=>N(C.value),className:`w-full aspect-square rounded-lg transition-all ${T===C.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:C.value},title:C.label},C.value))})]})]}),m.jsxs("div",{className:"pt-4 flex gap-3",children:[m.jsx("button",{type:"button",onClick:()=>s("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!c.trim()||f&&!w||D,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${c.trim()&&(!f||w)&&!D?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:D?"Creating...":f?"Create Piggybank":"Create Envelope"})]})]})]})})]})};const H0e="type.googleapis.com/google.protobuf.Int64Value",W0e="type.googleapis.com/google.protobuf.UInt64Value";function rG(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function gx(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>gx(e));if(typeof t=="function"||typeof t=="object")return rG(t,e=>gx(e));throw new Error("Data cannot be encoded in JSON: "+t)}function wh(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case H0e:case W0e:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>wh(e)):typeof t=="function"||typeof t=="object"?rG(t,e=>wh(e)):t}const BI="functions";const vL={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zi extends po{constructor(e,n,r){super(`${BI}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,zi.prototype)}}function Y0e(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function mx(t,e){let n=Y0e(t),r=n,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!vL[s])return new zi("internal","internal");n=vL[s],r=s}const o=a.message;typeof o=="string"&&(r=o),i=a.details,i!==void 0&&(i=wh(i))}}catch{}return n==="ok"?null:new zi(n,r,i)}class K0e{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ra(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}const uC="us-central1",X0e=/^data: (.*?)(?:\n|$)/;function Q0e(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new zi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Z0e{constructor(e,n,r,i,a=uC,s=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new K0e(e,n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=uC}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function J0e(t,e,n){const r=Uc(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(f2(t.emulatorOrigin+"/backends"),h2("Functions",!0))}function eye(t,e,n){const r=i=>nye(t,e,i,{});return r.stream=(i,a)=>iye(t,e,i,a),r}function iG(t){return t.emulatorOrigin&&Uc(t.emulatorOrigin)?"include":void 0}async function tye(t,e,n,r,i){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:iG(i)})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function aG(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function nye(t,e,n,r){const i=t._url(e);return rye(t,i,n,r)}async function rye(t,e,n,r){n=gx(n);const i={data:n},a=await aG(t,r),s=r.timeout||7e4,o=Q0e(s),c=await Promise.race([tye(e,i,a,t.fetchImpl,t),o.promise,t.cancelAllRequests]);if(o.cancel(),!c)throw new zi("cancelled","Firebase Functions instance was deleted.");const d=mx(c.status,c.json);if(d)throw d;if(!c.json)throw new zi("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new zi("internal","Response is missing data field.");return{data:wh(f)}}function iye(t,e,n,r){const i=t._url(e);return aye(t,i,n,r||{})}async function aye(t,e,n,r){n=gx(n);const i={data:n},a=await aG(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let s;try{s=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r?.signal,credentials:iG(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const b=new zi("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const v=mx(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let o,c;const d=new Promise((g,v)=>{o=g,c=v});r?.signal?.addEventListener("abort",()=>{const g=new zi("cancelled","Request was cancelled.");c(g)});const f=s.body.getReader(),h=sye(f,o,c,r?.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:v,done:b}=await g.read();return{value:v,done:b}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:d}}function sye(t,e,n,r){const i=(s,o)=>{const c=s.match(X0e);if(!c)return;const d=c[1];try{const f=JSON.parse(d);if("result"in f){e(wh(f.result));return}if("message"in f){o.enqueue(wh(f.message));return}if("error"in f){const h=mx(0,f);o.error(h),n(h);return}}catch(f){if(f instanceof zi){o.error(f),n(f);return}}},a=new TextDecoder;return new ReadableStream({start(s){let o="";return c();async function c(){if(r?.aborted){const d=new zi("cancelled","Request was cancelled");return s.error(d),n(d),Promise.resolve()}try{const{value:d,done:f}=await t.read();if(f){o.trim()&&i(o.trim(),s),s.close();return}if(r?.aborted){const g=new zi("cancelled","Request was cancelled");s.error(g),n(g),await t.cancel();return}o+=a.decode(d,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const g of h)g.trim()&&i(g.trim(),s);return c()}catch(d){const f=d instanceof zi?d:mx(0,null);s.error(f),n(f)}}},cancel(){return t.cancel()}})}const yL="@firebase/functions",bL="0.13.1";const oye="auth-internal",lye="app-check-internal",cye="messaging-internal";function uye(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(oye),s=n.getProvider(cye),o=n.getProvider(lye);return new Z0e(i,a,s,o,r)};Ju(new Ac(BI,e,"PUBLIC").setMultipleInstances(!0)),Qs(yL,bL,t),Qs(yL,bL,"esm2020")}function dye(t=m2(),e=uC){const r=f1(zt(t),BI).getImmediate({identifier:e}),i=mU("functions");return i&&fye(r,...i),r}function fye(t,e,n){J0e(zt(t),e,n)}function hye(t,e,n){return eye(zt(t),e)}uye();function sG(t,e){const n={amount:null,merchant:null,envelope:null,envelopeId:null,description:null,paymentMethodName:null,type:"Expense",confidence:0};if(!t||t.trim().length===0)return n;const r=t.trim();let i=r,a=0;const s=r.match(/\b(?:with|using)\s+(.+)$/i);if(s&&s[1]){const v=s[1].trim();v.length>0&&v.length<60&&(n.paymentMethodName=v,i=i.replace(s[0]," ").trim(),a++)}/\b(income|earned|received|got paid|paycheck|salary|deposit|refund)\b/i.test(r)&&(n.type="Income",a++);const c=[/\$\s?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/,/(\d{1,}(?:,\d{3})*\.\d{1,2})\s*(?:dollars?)?/,/\b(\d{1,}(?:,\d{3})*)\s*(?:dollars?|bucks?)\b/i,/(?:for|of|spent|paid|cost|was)\s+\$?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/i];for(const v of c){const b=r.match(v);if(b){const x=b[1].replace(/,/g,""),w=parseFloat(x);if(!isNaN(w)&&w>0){n.amount=w,i=i.replace(b[0]," ").trim(),a++;break}}}if(n.amount===null){const v=r.match(/\b(\d{1,}(?:\.\d{1,2})?)\b/);if(v){const b=parseFloat(v[1]);!isNaN(b)&&b>0&&b<1e6&&(n.amount=b,i=i.replace(v[0]," ").trim(),a++)}}const d=e.filter(v=>v.isActive!==!1);let f=null;for(const v of d){const b=v.name.toLowerCase(),x=r.toLowerCase();if(x.includes(b)){const T=b.length/x.length;(!f||T>f.score)&&(f={envelope:v,score:Math.max(T,.8)});continue}const w=x.split(/\s+/),_=b.split(/\s+/);for(const T of _)if(!(T.length<3)){for(const N of w)if(!(N.length<3)&&(N.startsWith(T.slice(0,-1))||T.startsWith(N.slice(0,-1)))){const D=Math.min(N.length,T.length)/Math.max(N.length,T.length);D>=.6&&(!f||D>f.score)&&(f={envelope:v,score:D})}}}if(f){n.envelope=f.envelope.name,n.envelopeId=f.envelope.id,a++;const v=new RegExp(f.envelope.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");i=i.replace(v," ").trim()}const h=/\b(at|for|from|to|the|a|an|on|in|my|spent|paid|bought|got|transaction|purchase|payment|income|earned|received)\b/gi;let g=i.replace(h," ").replace(/\s+/g," ").trim();return g=g.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9]+$/g,"").trim(),g.length>0&&g.length<100&&(n.merchant=g,a++),n.description=r,n.confidence=0,n.amount!==null&&(n.confidence+=.35),n.envelopeId!==null&&(n.confidence+=.3),n.merchant!==null&&(n.confidence+=.2),n.paymentMethodName!==null&&(n.confidence+=.1),a>0&&(n.confidence+=.05),n.confidence=Math.min(n.confidence,1),n}async function pye(t,e){const n=e.filter(i=>i.isActive!==!1),r=n.map(i=>i.name);try{const a=a9().currentUser;$.log(" Siri: AI parsing request starting...",{user:a?a.email:"NOT_LOGGED_IN",isEmailVerified:a?.emailVerified}),$.log(" Siri: Calling Cloud Function to parse:",t);const s=dye(),d=(await hye(s,"parseTransaction")({text:t,userEnvelopes:r})).data;$.log(" Siri: Cloud Function response:",d);let f=null,h=d.envelope;if(d.envelope){const g=n.find(v=>v.name.toLowerCase()===d.envelope.toLowerCase());g&&(f=g.id,h=g.name)}return{amount:d.amount,merchant:d.merchant,envelope:h,envelopeId:f,description:d.description||t,paymentMethodName:d.paymentMethodName||null,type:d.type||"Expense",confidence:.9}}catch(i){return $.warn(" Siri: Cloud Function failed, falling back to regex parser:",i.message),sG(t,e)}}function gye(t,e){return $.log(" Siri: Parsing locally with regex:",t),sG(t,e)}function mye(t){const e=[/ignore\s+previous\s+instructions/gi,/system\s*:/gi,/human\s*:/gi,/assistant\s*:/gi,/\[INST\]/gi,/\[/g,/\]/g,/\{/g,/\}/g];let n=t;return e.forEach(r=>{n=n.replace(r,"")}),n.length>500&&(n=n.substring(0,500)),n=n.trim(),n}async function dC(t,e){const n=mye(t);return $.log(" Siri: parseSiriQuery called with text:",n),typeof navigator<"u"&&!navigator.onLine?($.log(" Siri: Offline  using local parser"),gye(n,e)):($.log(" Siri: Online  attempting AI parsing"),pye(n,e))}function vye(){const[t,e]=A9(),{envelopes:n}=pt(),[r,i]=A.useState(null),[a,s]=A.useState(!1),[o,c]=A.useState(null);A.useEffect(()=>{const f=t.get("query");if($.log(" Siri: Hook checking URL params - query:",f),!f||f.trim().length===0){$.log(" Siri: No query parameter found"),c(null);return}$.log(" Siri: Found query parameter, parsing:",f),c(f),s(!0),dC(f,n).then(g=>{$.log(" Siri: Parsed result:",g),i(g)}).catch(g=>{$.error(" Siri: Parse failed:",g),i(null)}).finally(()=>{s(!1)});const h=new URLSearchParams(t);h.delete("query"),e(h,{replace:!0})},[t,n,dC]);const d=A.useCallback(()=>{i(null),c(null)},[]);return{parsedData:r,isParsing:a,siriQuery:o,clearParsedData:d}}const oG=({onClose:t,onSaved:e})=>{const n=$a(),{envelopes:r,addTransaction:i,currentMonth:a,appSettings:s}=pt(),{parsedData:o,isParsing:c,siriQuery:d,clearParsedData:f}=vye(),h=()=>{const oe=sessionStorage.getItem("siriParsedData"),we=sessionStorage.getItem("siriQuery");if(oe&&we)try{const se=JSON.parse(oe);if($.log(" Siri: Loaded stored data from sessionStorage:",se),se.amount!==null&&v(se.amount.toFixed(2)),se.merchant&&x(se.merchant),se.description&&_(se.description),se.type&&R(se.type==="Income"?"income":"expense"),se.envelopeId&&K(se.envelopeId),se.paymentMethodName&&s?.paymentSources?.length){const Ee=se.paymentMethodName.toLowerCase(),ge=s.paymentSources.find(ne=>{const Ie=ne.name.toLowerCase();return Ie===Ee||Ie.includes(Ee)||Ee.includes(Ie)});ge&&(z(ge),Z(!1))}N(!0),P(we),$.log(" Siri: Pre-filled form from sessionStorage"),sessionStorage.removeItem("siriParsedData"),sessionStorage.removeItem("siriQuery")}catch(se){$.error(" Siri: Failed to parse stored data:",se)}};A.useEffect(()=>{!o&&!d&&h()},[o,d,s?.paymentSources]),A.useEffect(()=>{const oe=()=>{$.log(" Siri: Received siri-query-ready event"),h()};return window.addEventListener("siri-query-ready",oe),()=>window.removeEventListener("siri-query-ready",oe)},[s?.paymentSources]);const[g,v]=A.useState(""),[b,x]=A.useState(""),[w,_]=A.useState(""),[T,N]=A.useState(!1),[D,P]=A.useState(null),[O,C]=A.useState(()=>{const oe=new Date;return new Date(oe.getTime()-oe.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[I,R]=A.useState("expense"),[j,L]=A.useState({}),[B,z]=A.useState(null),[Y,Z]=A.useState(!1),[G,K]=A.useState(null);A.useEffect(()=>{if(!(!o||T)){if(o.amount!==null&&v(o.amount.toFixed(2)),o.merchant&&x(o.merchant),o.description&&_(o.description),o.type&&R(o.type==="Income"?"income":"expense"),o.envelopeId&&K(o.envelopeId),o.paymentMethodName&&s?.paymentSources?.length){const oe=o.paymentMethodName.toLowerCase(),we=s.paymentSources.find(se=>{const Ee=se.name.toLowerCase();return Ee===oe||Ee.includes(oe)||oe.includes(Ee)});we&&(z(we),Z(!1))}N(!0),$.log(" Siri: Pre-filled form with parsed data:",o)}},[o,T,s?.paymentSources]);const X=()=>{if(t){t();return}n("/")},ee=oe=>{z(oe),B&&Z(!0)},J=Object.keys(j).length>0,F=Object.values(j).reduce((oe,we)=>oe+(we||0),0),Q=Math.abs(F-parseFloat(g||"0"))<.01,te=g&&parseFloat(g)>0&&J&&Q,W=async oe=>{if(oe.preventDefault(),!te)return;const[we,se,Ee]=O.split("-").map(Number),ge=new Date(we,se-1,Ee,12,0,0);$.log(" Selected date:",O),$.log(" Parsed date:",ge.toISOString());try{const[ne,Ie]=O.split("-").map(Number),ye=`${ne}-${Ie.toString().padStart(2,"0")}`;if(ye!==a){const Pe=`This transaction date (${ye}) does not match the current budget month (${a}). Are you sure you want to save it?`;if(!window.confirm(Pe))return}const Se=Object.entries(j).filter(([Pe,Ge])=>Ge>0),Oe=Se.length>1?crypto.randomUUID():void 0;Promise.all(Se.map(([Pe,Ge])=>i({amount:Ge,description:w,merchant:b||void 0,date:ge.toISOString(),envelopeId:Pe,type:I==="income"?"Income":"Expense",reconciled:!1,paymentMethod:B||void 0,splitGroupId:Oe}).catch(je=>$.error("Failed to create transaction:",je)))).catch(Pe=>$.error("Failed to create transactions:",Pe)),e&&e(),t?t():n("/")}catch(ne){$.error("Error saving transaction:",ne),alert("Failed to save transaction: "+(ne instanceof Error?ne.message:"Unknown error"))}},ue=[...r].filter(oe=>oe.isActive!==!1).sort((oe,we)=>{const se=oe.orderIndex??0,Ee=we.orderIndex??0;return se!==Ee?se-Ee:oe.name.localeCompare(we.name)}),re=I==="income"?"text-green-500":"text-red-500";return m.jsxs("div",{className:"h-screen overflow-y-auto bg-gray-50 dark:bg-black overscroll-contain",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-20 flex items-center justify-between",children:[m.jsx("button",{onClick:X,className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),m.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),m.jsx("button",{onClick:W,disabled:!te,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),c&&m.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl flex items-center gap-3",children:[m.jsx(Jj,{size:18,className:"text-purple-500 animate-pulse"}),m.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Parsing voice input..."})]}),T&&!c&&(d||D)&&m.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx(Jj,{size:14,className:"text-purple-500"}),m.jsx("span",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300",children:"Siri Shortcut"}),o&&m.jsxs("span",{className:"ml-auto text-[10px] text-purple-500 dark:text-purple-400",children:[Math.round(o.confidence*100),"% confidence"]})]}),m.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 italic truncate",children:['"',d||D,'"']}),m.jsx("button",{type:"button",onClick:()=>{f(),N(!1),P(null)},className:"text-[10px] text-purple-500 dark:text-purple-400 underline mt-1",children:"Clear pre-filled data"})]}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:m.jsxs("form",{onSubmit:W,className:"space-y-6",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:m.jsxs("div",{className:"flex",children:[m.jsx("button",{type:"button",onClick:()=>R("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${I==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),m.jsx("button",{type:"button",onClick:()=>R("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${I==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${re}`,children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:g,onChange:oe=>{const we=oe.target.value.replace(/\D/g,"");if(!we){v("");return}const Ee=(parseInt(we,10)/100).toFixed(2);v(Ee)},onKeyDown:oe=>{(oe.key==="e"||oe.key==="E"||oe.key==="+"||oe.key==="-")&&oe.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${re} placeholder-gray-700`})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),m.jsx("input",{type:"text",value:b,onChange:oe=>x(oe.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsx(Jq,{selectedCard:B,onCardSelect:ee,isUserSelected:Y}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),m.jsx("input",{type:"text",value:w,onChange:oe=>_(oe.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[oe,we]=O.split("-").map(Number);return`${oe}-${we.toString().padStart(2,"0")}`!==a?m.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[m.jsx(Gu,{size:14}),m.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),m.jsx("input",{type:"date",value:O,onChange:oe=>C(oe.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:m.jsx(eG,{envelopes:ue,transactionAmount:parseFloat(g)||0,onSplitChange:L,initialSelectedEnvelopeId:G})})]})})]})},yye=()=>{const t=$a(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:s,appSettings:o,fetchAllTransactions:c,areAllTransactionsLoaded:d,isLoading:f}=pt(),{showToast:h}=Hc(),[g,v]=A.useState(!1),[b,x]=A.useState(""),[w,_]=A.useState("all"),[T,N]=A.useState("All"),[D,P]=A.useState(!1),[O,C]=A.useState("all"),[I,R]=A.useState(!1),[j,L]=A.useState("all"),[B,z]=A.useState(!1),[Y,Z]=A.useState(()=>{const W=new Date;return W.setMonth(W.getMonth()-1),W.toISOString().split("T")[0]}),[G,K]=A.useState(()=>new Date().toISOString().split("T")[0]),[X,ee]=A.useState(null),J=A.useMemo(()=>{$.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:I,currentMonth:s,transactionMonths:e.map(re=>({id:re.id,month:re.month,date:re.date,description:re.description}))});let W=e;return I||(W=e.filter(re=>re.month===s||!re.month),$.log(" After month filter:",{remaining:W.length,currentMonth:s,filteredTransactions:W.map(re=>({id:re.id,description:re.description,month:re.month,matchesCurrentMonth:re.month===s}))})),W.map(re=>{if(!re)return null;let oe=re.date;if(typeof re.date=="number"){const se=(re.date+978307200)*1e3;oe=new Date(se).toISOString()}else if(!re.date||typeof re.date!="string")return null;return{...re,date:oe}}).filter(Boolean).filter(re=>{if(re.description==="Budgeted"||re.description==="Piggybank Contribution")return!1;if(b){const we=b.toLowerCase(),se=n.find(ne=>ne.id===re.envelopeId)?.name.toLowerCase()||"",Ee=re.amount.toFixed(2);if(!(re.description.toLowerCase().includes(we)||se.includes(we)||Ee.includes(we)))return!1}if(w!=="all"&&re.envelopeId!==w||T!=="All"&&re.type!==T||j!=="all"&&(!re.paymentMethod||re.paymentMethod.id!==j)||!re.date||typeof re.date!="string")return!1;const oe=re.date.split("T")[0];return!(B&&(oe<Y||oe>G)||O!=="all"&&new Date(oe).getMonth()!==parseInt(O)||D&&!re.reconciled)}).sort((re,oe)=>new Date(oe.date).getTime()-new Date(re.date).getTime())},[e,n,b,w,T,j,Y,G,D,I,s,B]);$.log(" Final filtered transactions:",{count:J.length,transactions:J.map(W=>({id:W.id,description:W.description,amount:W.amount,date:W.date,month:W.month,type:W.type}))});const F=A.useMemo(()=>{const W=[],ue=new Set;for(const re of J)if(re.splitGroupId&&!ue.has(re.splitGroupId)){ue.add(re.splitGroupId);const oe=J.filter(Ee=>Ee.splitGroupId===re.splitGroupId),we=oe.reduce((Ee,ge)=>Ee+ge.amount,0),se=oe.map(Ee=>n.find(ge=>ge.id===Ee.envelopeId)?.name||"Unknown").join(", ");W.push({key:`split-${re.splitGroupId}`,transaction:re,totalAmount:we,envelopeNames:se,splitTransactions:oe,isSplitGroup:!0})}else{if(re.splitGroupId&&ue.has(re.splitGroupId))continue;{const oe=n.find(we=>we.id===re.envelopeId)?.name||"Unknown Envelope";W.push({key:re.id,transaction:re,totalAmount:re.amount,envelopeNames:oe,splitTransactions:[re],isSplitGroup:!1})}}return W},[J,n]),Q=X?n.find(W=>W.id===X.envelopeId):null,te=W=>{const ue={...W,reconciled:!W.reconciled};r(ue)};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))] transition-colors duration-200",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:m.jsx(al,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),m.jsx("button",{onClick:()=>v(!g),className:`p-2 rounded-full transition-colors ${g?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:m.jsx(P9,{size:20,className:g?"fill-current":""})})]}),m.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[m.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",s]}),m.jsx("button",{onClick:()=>{const W=!I;R(W),W&&!d&&c()},disabled:f,className:`text-sm px-3 py-1 rounded-md transition-colors ${I?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"} ${f?"opacity-50 cursor-not-allowed":""}`,children:f?"Loading...":I?"Current Month Only":"All Time"})]}),m.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:m.jsxs("div",{className:"relative",children:[m.jsx(D9,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),m.jsx("input",{type:"text",placeholder:"Search transactions...",value:b,onChange:W=>x(W.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),b&&m.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:m.jsx($m,{size:16})})]})}),m.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${g?"max-h-[600px] opacity-100":"max-h-0 opacity-0"}`,children:m.jsxs("div",{className:"p-4 space-y-4",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),m.jsxs("select",{value:j,onChange:W=>L(W.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Payment Methods"}),o?.paymentSources?.map(W=>m.jsx("option",{value:W.id,children:W.name},W.id))]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),m.jsxs("select",{value:w,onChange:W=>_(W.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((W,ue)=>W.name.localeCompare(ue.name)).map(W=>m.jsx("option",{value:W.id,children:W.name},W.id))]})]}),m.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(W=>m.jsx("button",{onClick:()=>N(W),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${T===W?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:W},W))}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),m.jsxs("select",{value:O,onChange:W=>C(W.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(W,ue)=>ue).map(W=>m.jsx("option",{value:W,children:new Date(2022,W).toLocaleString("default",{month:"long"})},W))]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Date Range"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Enable"}),m.jsx("button",{onClick:()=>z(!B),className:`w-9 h-5 rounded-full transition-colors relative ${B?"bg-blue-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${B?"translate-x-4":"translate-x-0"}`})})]})]}),m.jsxs("div",{className:`grid grid-cols-2 gap-4 transition-opacity ${B?"opacity-100":"opacity-50 pointer-events-none"}`,children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"From"}),m.jsx("div",{className:"relative",children:m.jsx("input",{type:"date",value:Y,onChange:W=>Z(W.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"To"}),m.jsx("div",{className:"relative",children:m.jsx("input",{type:"date",value:G,onChange:W=>K(W.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),m.jsx("button",{onClick:()=>P(!D),className:`w-11 h-6 rounded-full transition-colors relative ${D?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${D?"translate-x-5":"translate-x-0"}`})})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),m.jsx("button",{onClick:()=>R(!I),className:`w-11 h-6 rounded-full transition-colors relative ${I?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${I?"translate-x-5":"translate-x-0"}`})})]})]})}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:F.length===0?m.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):m.jsx(lr,{initial:!1,mode:"popLayout",children:F.map(W=>{const ue=W.transaction;return m.jsx(gt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(rw,{disabled:ue.isAutomatic,onDelete:()=>{const re=W.splitTransactions.map(oe=>({...oe}));for(const oe of W.splitTransactions)oe.id&&i(oe.id);h(W.isSplitGroup?"Split transaction deleted":"Transaction deleted","neutral",()=>{for(const oe of re)a(oe)})},children:m.jsx(nG,{transaction:{...ue,amount:W.totalAmount},envelopeName:W.envelopeNames,onReconcile:()=>{for(const re of W.splitTransactions)te(re)},onEdit:()=>{if(ue.isAutomatic)return;n.find(oe=>oe.id===ue.envelopeId)?ee(ue):alert("Cannot edit: Envelope deleted.")}})})},W.key)})})})}),m.jsx(tG,{isVisible:!!X&&!!Q,onClose:()=>ee(null),mode:"edit",currentEnvelope:Q||{},initialTransaction:X,envelopes:n})]})};function lG(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=lG(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function qt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=lG(t))&&(r&&(r+=" "),r+=e);return r}var bye=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function UI(t){if(typeof t!="string")return!1;var e=bye;return e.includes(t)}var xye=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],wye=new Set(xye);function cG(t){return typeof t!="string"?!1:wye.has(t)}function uG(t){return typeof t=="string"&&t.startsWith("data-")}function bs(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(cG(n)||uG(n))&&(e[n]=t[n]);return e}function vm(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return bs(e)}return typeof t=="object"&&!Array.isArray(t)?bs(t):null}function ca(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(cG(n)||uG(n)||UI(n))&&(e[n]=t[n]);return e}var Sye=["children","width","height","viewBox","className","style","title","desc"];function fC(){return fC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fC.apply(null,arguments)}function _ye(t,e){if(t==null)return{};var n,r,i=Eye(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Eye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var dG=A.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:s,style:o,title:c,desc:d}=t,f=_ye(t,Sye),h=a||{width:r,height:i,x:0,y:0},g=qt("recharts-surface",s);return A.createElement("svg",fC({},ca(f),{className:g,width:r,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),A.createElement("title",null,c),A.createElement("desc",null,d),n)}),Tye=["children","className"];function hC(){return hC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hC.apply(null,arguments)}function Aye(t,e){if(t==null)return{};var n,r,i=kye(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var li=A.forwardRef((t,e)=>{var{children:n,className:r}=t,i=Aye(t,Tye),a=qt("recharts-layer",r);return A.createElement("g",hC({className:a},ca(i),{ref:e}),n)}),Cye=A.createContext(null);function rn(t){return function(){return t}}const fG=Math.cos,vx=Math.sin,_s=Math.sqrt,yx=Math.PI,iw=2*yx,pC=Math.PI,gC=2*pC,Nu=1e-6,Nye=gC-Nu;function hG(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Iye(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return hG;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Oye{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?hG:Iye(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,d=i-n,f=s-e,h=o-n,g=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Nu)if(!(Math.abs(h*c-d*f)>Nu)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-s,b=i-o,x=c*c+d*d,w=v*v+b*b,_=Math.sqrt(x),T=Math.sqrt(g),N=a*Math.tan((pC-Math.acos((x+g-w)/(2*_*T)))/2),D=N/T,P=N/_;Math.abs(D-1)>Nu&&this._append`L${e+D*f},${n+D*h}`,this._append`A${a},${a},0,0,${+(h*v>f*b)},${this._x1=e+P*c},${this._y1=n+P*d}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),d=e+o,f=n+c,h=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Nu||Math.abs(this._y1-f)>Nu)&&this._append`L${d},${f}`,r&&(g<0&&(g=g%gC+gC),g>Nye?this._append`A${r},${r},0,1,${h},${e-o},${n-c}A${r},${r},0,1,${h},${this._x1=d},${this._y1=f}`:g>Nu&&this._append`A${r},${r},0,${+(g>=pC)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function FI(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Oye(e)}function $I(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function pG(t){this._context=t}pG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function aw(t){return new pG(t)}function gG(t){return t[0]}function mG(t){return t[1]}function vG(t,e){var n=rn(!0),r=null,i=aw,a=null,s=FI(o);t=typeof t=="function"?t:t===void 0?gG:rn(t),e=typeof e=="function"?e:e===void 0?mG:rn(e);function o(c){var d,f=(c=$I(c)).length,h,g=!1,v;for(r==null&&(a=i(v=s())),d=0;d<=f;++d)!(d<f&&n(h=c[d],d,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(h,d,c),+e(h,d,c));if(v)return a=null,v+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:rn(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:rn(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:rn(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function jy(t,e,n){var r=null,i=rn(!0),a=null,s=aw,o=null,c=FI(d);t=typeof t=="function"?t:t===void 0?gG:rn(+t),e=typeof e=="function"?e:rn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?mG:rn(+n);function d(h){var g,v,b,x=(h=$I(h)).length,w,_=!1,T,N=new Array(x),D=new Array(x);for(a==null&&(o=s(T=c())),g=0;g<=x;++g){if(!(g<x&&i(w=h[g],g,h))===_)if(_=!_)v=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=g-1;b>=v;--b)o.point(N[b],D[b]);o.lineEnd(),o.areaEnd()}_&&(N[g]=+t(w,g,h),D[g]=+e(w,g,h),o.point(r?+r(w,g,h):N[g],n?+n(w,g,h):D[g]))}if(T)return o=null,T+""||null}function f(){return vG().defined(i).curve(s).context(a)}return d.x=function(h){return arguments.length?(t=typeof h=="function"?h:rn(+h),r=null,d):t},d.x0=function(h){return arguments.length?(t=typeof h=="function"?h:rn(+h),d):t},d.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:rn(+h),d):r},d.y=function(h){return arguments.length?(e=typeof h=="function"?h:rn(+h),n=null,d):e},d.y0=function(h){return arguments.length?(e=typeof h=="function"?h:rn(+h),d):e},d.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:rn(+h),d):n},d.lineX0=d.lineY0=function(){return f().x(t).y(e)},d.lineY1=function(){return f().x(t).y(n)},d.lineX1=function(){return f().x(r).y(e)},d.defined=function(h){return arguments.length?(i=typeof h=="function"?h:rn(!!h),d):i},d.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),d):s},d.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),d):a},d}class yG{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Pye(t){return new yG(t,!0)}function Dye(t){return new yG(t,!1)}const qI={draw(t,e){const n=_s(e/yx);t.moveTo(n,0),t.arc(0,0,n,0,iw)}},Rye={draw(t,e){const n=_s(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},bG=_s(1/3),Mye=bG*2,jye={draw(t,e){const n=_s(e/Mye),r=n*bG;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},zye={draw(t,e){const n=_s(e),r=-n/2;t.rect(r,r,n,n)}},Lye=.8908130915292852,xG=vx(yx/10)/vx(7*yx/10),Vye=vx(iw/10)*xG,Bye=-fG(iw/10)*xG,Uye={draw(t,e){const n=_s(e*Lye),r=Vye*n,i=Bye*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=iw*a/5,o=fG(s),c=vx(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},aT=_s(3),Fye={draw(t,e){const n=-_s(e/(aT*3));t.moveTo(0,n*2),t.lineTo(-aT*n,-n),t.lineTo(aT*n,-n),t.closePath()}},Aa=-.5,ka=_s(3)/2,mC=1/_s(12),$ye=(mC/2+1)*3,qye={draw(t,e){const n=_s(e/$ye),r=n/2,i=n*mC,a=r,s=n*mC+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(Aa*r-ka*i,ka*r+Aa*i),t.lineTo(Aa*a-ka*s,ka*a+Aa*s),t.lineTo(Aa*o-ka*c,ka*o+Aa*c),t.lineTo(Aa*r+ka*i,Aa*i-ka*r),t.lineTo(Aa*a+ka*s,Aa*s-ka*a),t.lineTo(Aa*o+ka*c,Aa*c-ka*o),t.closePath()}};function Gye(t,e){let n=null,r=FI(i);t=typeof t=="function"?t:rn(t||qI),e=typeof e=="function"?e:rn(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:rn(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:rn(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function bx(){}function xx(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function wG(t){this._context=t}wG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Hye(t){return new wG(t)}function SG(t){this._context=t}SG.prototype={areaStart:bx,areaEnd:bx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:xx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Wye(t){return new SG(t)}function _G(t){this._context=t}_G.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:xx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Yye(t){return new _G(t)}function EG(t){this._context=t}EG.prototype={areaStart:bx,areaEnd:bx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Kye(t){return new EG(t)}function xL(t){return t<0?-1:1}function wL(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(xL(a)+xL(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function SL(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function sT(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function wx(t){this._context=t}wx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sT(this,this._t0,SL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,sT(this,SL(this,n=wL(this,t,e)),n);break;default:sT(this,this._t0,n=wL(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function TG(t){this._context=new AG(t)}(TG.prototype=Object.create(wx.prototype)).point=function(t,e){wx.prototype.point.call(this,e,t)};function AG(t){this._context=t}AG.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function Xye(t){return new wx(t)}function Qye(t){return new TG(t)}function kG(t){this._context=t}kG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=_L(t),i=_L(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function _L(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Zye(t){return new kG(t)}function sw(t,e){this._context=t,this._t=e}sw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Jye(t){return new sw(t,.5)}function ebe(t){return new sw(t,0)}function tbe(t){return new sw(t,1)}function ld(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function vC(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function nbe(t,e){return t[e]}function rbe(t){const e=[];return e.key=t,e}function ibe(){var t=rn([]),e=vC,n=ld,r=nbe;function i(a){var s=Array.from(t.apply(this,arguments),rbe),o,c=s.length,d=-1,f;for(const h of a)for(o=0,++d;o<c;++o)(s[o][d]=[0,+r(h,s[o].key,d,a)]).data=h;for(o=0,f=$I(e(s));o<c;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:rn(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:rn(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?vC:typeof a=="function"?a:rn(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??ld,i):n},i}function abe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}ld(t,e)}}function sbe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}ld(t,e)}}function obe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,d=0;o<s;++o){for(var f=t[e[o]],h=f[r][1]||0,g=f[r-1][1]||0,v=(h-g)/2,b=0;b<o;++b){var x=t[e[b]],w=x[r][1]||0,_=x[r-1][1]||0;v+=w-_}c+=h,d+=v*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=d/c)}i[r-1][1]+=i[r-1][0]=n,ld(t,e)}}var oT={},lT={},EL;function lbe(){return EL||(EL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(lT)),lT}var cT={},TL;function CG(){return TL||(TL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(cT)),cT}var uT={},AL;function GI(){return AL||(AL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(uT)),uT}var dT={},fT={},kL;function cbe(){return kL||(kL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(fT)),fT}var CL;function HI(){return CL||(CL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cbe(),n=GI();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,c="",d="",f=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const h=i[o];d?h==="\\"&&o+1<s?(o++,c+=i[o]):h===d?d="":c+=h:f?h==='"'||h==="'"?d=h:h==="]"?(f=!1,a.push(c),c=""):c+=h:h==="["?(f=!0,c&&(a.push(c),c="")):h==="."?c&&(a.push(c),c=""):c+=h,o++}return c&&a.push(c),a}t.toPath=r})(dT)),dT}var NL;function WI(){return NL||(NL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lbe(),n=CG(),r=GI(),i=HI();function a(o,c,d){if(o==null)return d;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return d;const f=o[c];return f===void 0?n.isDeepKey(c)?a(o,i.toPath(c),d):d:f}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const f=o[c];return f===void 0?d:f}default:{if(Array.isArray(c))return s(o,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return d;const f=o[c];return f===void 0?d:f}}}function s(o,c,d){if(c.length===0)return d;let f=o;for(let h=0;h<c.length;h++){if(f==null||e.isUnsafeProperty(c[h]))return d;f=f[c[h]]}return f===void 0?d:f}t.get=a})(oT)),oT}var hT,IL;function ube(){return IL||(IL=1,hT=WI().get),hT}var dbe=ube();const cd=bl(dbe);var fbe=4;function yc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fbe,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Mn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,s)=>{var o=n[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+yc(o)+a:i+a},"")}var Ir=t=>t===0?0:t>0?1:-1,ua=t=>typeof t=="number"&&t!=+t,fl=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,qe=t=>(typeof t=="number"||t instanceof Number)&&!ua(t),La=t=>qe(t)||typeof t=="string",hbe=0,ym=t=>{var e=++hbe;return"".concat(t||"").concat(e)},ai=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!qe(e)&&typeof e!="string")return r;var a;if(fl(e)){if(n==null)return r;var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return ua(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},NG=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function hr(t,e,n){return qe(t)&&qe(e)?yc(t+n*(e-t)):e}function pbe(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):cd(r,e))===n)}var Pr=t=>t===null||typeof t>"u",pv=t=>Pr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function gbe(t){return t!=null}function gv(){}var mbe=["type","size","sizeType"];function yC(){return yC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yC.apply(null,arguments)}function OL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OL(Object(n),!0).forEach(function(r){vbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vbe(t,e,n){return(e=ybe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ybe(t){var e=bbe(t,"string");return typeof e=="symbol"?e:e+""}function bbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xbe(t,e){if(t==null)return{};var n,r,i=wbe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var IG={symbolCircle:qI,symbolCross:Rye,symbolDiamond:jye,symbolSquare:zye,symbolStar:Uye,symbolTriangle:Fye,symbolWye:qye},Sbe=Math.PI/180,_be=t=>{var e="symbol".concat(pv(t));return IG[e]||qI},Ebe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*Sbe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Tbe=(t,e)=>{IG["symbol".concat(pv(t))]=e},OG=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=xbe(t,mbe),a=PL(PL({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var g=_be(s),v=Gye().type(g).size(Ebe(n,r,s)),b=v();if(b!==null)return b},{className:c,cx:d,cy:f}=a,h=ca(a);return qe(d)&&qe(f)&&qe(n)?A.createElement("path",yC({},h,{className:qt("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(f,")"),d:o()})):null};OG.registerSymbol=Tbe;var PG=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,Abe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{UI(i)&&(r[i]=(a=>n[i](n,a)))}),r},kbe=(t,e,n)=>r=>(t(e,n,r),null),ow=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];UI(i)&&typeof a=="function"&&(r||(r={}),r[i]=kbe(a,e,n))}),r};function DL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cbe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DL(Object(n),!0).forEach(function(r){Nbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nbe(t,e,n){return(e=Ibe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ibe(t){var e=Obe(t,"string");return typeof e=="symbol"?e:e+""}function Obe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wr(t,e){var n=Cbe({},t),r=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&r[o]!==void 0&&(s[o]=r[o]),s),n);return a}var pT={},gT={},RL;function Pbe(){return RL||(RL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const s=n[a],o=r(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}t.uniqBy=e})(gT)),gT}var mT={},ML;function DG(){return ML||(ML=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(mT)),mT}var vT={},yT={},bT={},jL;function Dbe(){return jL||(jL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(bT)),bT}var zL;function YI(){return zL||(zL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Dbe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(yT)),yT}var xT={},LL;function Rbe(){return LL||(LL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(xT)),xT}var VL;function Mbe(){return VL||(VL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YI(),n=Rbe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(vT)),vT}var wT={},ST={},BL;function jbe(){return BL||(BL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WI();function n(r){return function(i){return e.get(i,r)}}t.property=n})(ST)),ST}var _T={},ET={},TT={},AT={},UL;function RG(){return UL||(UL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(AT)),AT}var kT={},FL;function MG(){return FL||(FL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(kT)),kT}var CT={},$L;function jG(){return $L||($L=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(CT)),CT}var qL;function zbe(){return qL||(qL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RG(),n=MG(),r=jG();function i(f,h,g){return typeof g!="function"?i(f,h,()=>{}):a(f,h,function v(b,x,w,_,T,N){const D=g(b,x,w,_,T,N);return D!==void 0?!!D:a(b,x,v,N)},new Map)}function a(f,h,g,v){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,g,v);case"function":return Object.keys(h).length>0?a(f,{...h},g,v):r.eq(f,h);default:return e.isObject(f)?typeof h=="string"?h==="":!0:r.eq(f,h)}}function s(f,h,g,v){if(h==null)return!0;if(Array.isArray(h))return c(f,h,g,v);if(h instanceof Map)return o(f,h,g,v);if(h instanceof Set)return d(f,h,g,v);const b=Object.keys(h);if(f==null||n.isPrimitive(f))return b.length===0;if(b.length===0)return!0;if(v?.has(h))return v.get(h)===f;v?.set(h,f);try{for(let x=0;x<b.length;x++){const w=b[x];if(!n.isPrimitive(f)&&!(w in f)||h[w]===void 0&&f[w]!==void 0||h[w]===null&&f[w]!==null||!g(f[w],h[w],w,f,h,v))return!1}return!0}finally{v?.delete(h)}}function o(f,h,g,v){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,x]of h.entries()){const w=f.get(b);if(g(w,x,b,f,h,v)===!1)return!1}return!0}function c(f,h,g,v){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let x=0;x<h.length;x++){const w=h[x];let _=!1;for(let T=0;T<f.length;T++){if(b.has(T))continue;const N=f[T];let D=!1;if(g(N,w,x,f,h,v)&&(D=!0),D){b.add(T),_=!0;break}}if(!_)return!1}return!0}function d(f,h,g,v){return h.size===0?!0:f instanceof Set?c([...f],[...h],g,v):!1}t.isMatchWith=i,t.isSetMatch=d})(TT)),TT}var GL;function zG(){return GL||(GL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zbe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(ET)),ET}var NT={},IT={},OT={},HL;function Lbe(){return HL||(HL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(OT)),OT}var PT={},WL;function LG(){return WL||(WL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(PT)),PT}var DT={},YL;function VG(){return YL||(YL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",d="[object Set]",f="[object Array]",h="[object Function]",g="[object ArrayBuffer]",v="[object Object]",b="[object Error]",x="[object DataView]",w="[object Uint8Array]",_="[object Uint8ClampedArray]",T="[object Uint16Array]",N="[object Uint32Array]",D="[object BigUint64Array]",P="[object Int8Array]",O="[object Int16Array]",C="[object Int32Array]",I="[object BigInt64Array]",R="[object Float32Array]",j="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=f,t.bigInt64ArrayTag=I,t.bigUint64ArrayTag=D,t.booleanTag=i,t.dataViewTag=x,t.dateTag=o,t.errorTag=b,t.float32ArrayTag=R,t.float64ArrayTag=j,t.functionTag=h,t.int16ArrayTag=O,t.int32ArrayTag=C,t.int8ArrayTag=P,t.mapTag=c,t.numberTag=r,t.objectTag=v,t.regexpTag=e,t.setTag=d,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=T,t.uint32ArrayTag=N,t.uint8ArrayTag=w,t.uint8ClampedArrayTag=_})(DT)),DT}var RT={},KL;function Vbe(){return KL||(KL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(RT)),RT}var XL;function BG(){return XL||(XL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Lbe(),n=LG(),r=VG(),i=MG(),a=Vbe();function s(f,h){return o(f,void 0,f,new Map,h)}function o(f,h,g,v=new Map,b=void 0){const x=b?.(f,h,g,v);if(x!==void 0)return x;if(i.isPrimitive(f))return f;if(v.has(f))return v.get(f);if(Array.isArray(f)){const w=new Array(f.length);v.set(f,w);for(let _=0;_<f.length;_++)w[_]=o(f[_],_,g,v,b);return Object.hasOwn(f,"index")&&(w.index=f.index),Object.hasOwn(f,"input")&&(w.input=f.input),w}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const w=new RegExp(f.source,f.flags);return w.lastIndex=f.lastIndex,w}if(f instanceof Map){const w=new Map;v.set(f,w);for(const[_,T]of f)w.set(_,o(T,_,g,v,b));return w}if(f instanceof Set){const w=new Set;v.set(f,w);for(const _ of f)w.add(o(_,void 0,g,v,b));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const w=new(Object.getPrototypeOf(f)).constructor(f.length);v.set(f,w);for(let _=0;_<f.length;_++)w[_]=o(f[_],_,g,v,b);return w}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const w=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return v.set(f,w),c(w,f,g,v,b),w}if(typeof File<"u"&&f instanceof File){const w=new File([f],f.name,{type:f.type});return v.set(f,w),c(w,f,g,v,b),w}if(typeof Blob<"u"&&f instanceof Blob){const w=new Blob([f],{type:f.type});return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof Error){const w=new f.constructor;return v.set(f,w),w.message=f.message,w.name=f.name,w.stack=f.stack,w.cause=f.cause,c(w,f,g,v,b),w}if(f instanceof Boolean){const w=new Boolean(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof Number){const w=new Number(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof String){const w=new String(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(typeof f=="object"&&d(f)){const w=Object.create(Object.getPrototypeOf(f));return v.set(f,w),c(w,f,g,v,b),w}return f}function c(f,h,g=f,v,b){const x=[...Object.keys(h),...e.getSymbols(h)];for(let w=0;w<x.length;w++){const _=x[w],T=Object.getOwnPropertyDescriptor(f,_);(T==null||T.writable)&&(f[_]=o(h[_],_,g,v,b))}}function d(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=c})(IT)),IT}var QL;function Bbe(){return QL||(QL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BG();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(NT)),NT}var ZL;function Ube(){return ZL||(ZL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zG(),n=Bbe();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(_T)),_T}var MT={},jT={},zT={},JL;function Fbe(){return JL||(JL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BG(),n=VG();function r(i,a){return e.cloneDeepWith(i,(s,o,c,d)=>{const f=a?.(s,o,c,d);if(f!==void 0)return f;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new i.constructor(i?.valueOf());return e.copyProperties(h,i),h}case n.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}t.cloneDeepWith=r})(zT)),zT}var e5;function $be(){return e5||(e5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Fbe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(jT)),jT}var LT={},VT={},t5;function UG(){return t5||(t5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(VT)),VT}var BT={},n5;function qbe(){return n5||(n5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LG();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(BT)),BT}var r5;function Gbe(){return r5||(r5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CG(),n=UG(),r=qbe(),i=HI();function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&s?.[o]==null?c=i.toPath(o):c=[o],c.length===0)return!1;let d=s;for(let f=0;f<c.length;f++){const h=c[f];if((d==null||!Object.hasOwn(d,h))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(h)&&h<d.length))return!1;d=d[h]}return!0}t.has=a})(LT)),LT}var i5;function Hbe(){return i5||(i5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zG(),n=GI(),r=$be(),i=WI(),a=Gbe();function s(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return c=r.cloneDeep(c),function(d){const f=i.get(d,o);return f===void 0?a.has(d,o):c===void 0?f===void 0:e.isMatch(f,c)}}t.matchesProperty=s})(MT)),MT}var a5;function Wbe(){return a5||(a5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DG(),n=jbe(),r=Ube(),i=Hbe();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=a})(wT)),wT}var s5;function Ybe(){return s5||(s5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Pbe(),n=DG(),r=Mbe(),i=Wbe();function a(s,o=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(o)):[]}t.uniqBy=a})(pT)),pT}var UT,o5;function Kbe(){return o5||(o5=1,UT=Ybe().uniqBy),UT}var Xbe=Kbe();const l5=bl(Xbe);function Qbe(t,e,n){return e===!0?l5(t,n):typeof e=="function"?l5(t,e):t}var FT={exports:{}},$T={},qT={exports:{}},GT={};var c5;function Zbe(){if(c5)return GT;c5=1;var t=Ih();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(h,g){var v=g(),b=r({inst:{value:v,getSnapshot:g}}),x=b[0].inst,w=b[1];return a(function(){x.value=v,x.getSnapshot=g,c(x)&&w({inst:x})},[h,v,g]),i(function(){return c(x)&&w({inst:x}),h(function(){c(x)&&w({inst:x})})},[h]),s(v),v}function c(h){var g=h.getSnapshot;h=h.value;try{var v=g();return!n(h,v)}catch{return!0}}function d(h,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return GT.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,GT}var u5;function Jbe(){return u5||(u5=1,qT.exports=Zbe()),qT.exports}var d5;function exe(){if(d5)return $T;d5=1;var t=Ih(),e=Jbe();function n(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return $T.useSyncExternalStoreWithSelector=function(d,f,h,g,v){var b=a(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=o(function(){function _(O){if(!T){if(T=!0,N=O,O=g(O),v!==void 0&&x.hasValue){var C=x.value;if(v(C,O))return D=C}return D=O}if(C=D,r(N,O))return C;var I=g(O);return v!==void 0&&v(C,I)?(N=O,C):(N=O,D=I)}var T=!1,N,D,P=h===void 0?null:h;return[function(){return _(f())},P===null?void 0:function(){return _(P())}]},[f,h,g,v]);var w=i(d,b[0],b[1]);return s(function(){x.hasValue=!0,x.value=w},[w]),c(w),w},$T}var f5;function txe(){return f5||(f5=1,FT.exports=exe()),FT.exports}var nxe=txe(),KI=A.createContext(null),rxe=t=>t,gn=()=>{var t=A.useContext(KI);return t?t.store.dispatch:rxe},wb=()=>{},ixe=()=>wb,axe=(t,e)=>t===e;function Fe(t){var e=A.useContext(KI);return nxe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:ixe,e?e.store.getState:wb,e?e.store.getState:wb,e?t:wb,axe)}function sxe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function oxe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function lxe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var h5=t=>Array.isArray(t)?t:[t];function cxe(t){const e=Array.isArray(t[0])?t[0]:t;return lxe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function uxe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var dxe=class{constructor(t){this.value=t}deref(){return this.value}},fxe=typeof WeakRef<"u"?WeakRef:dxe,hxe=0,p5=1;function zy(){return{s:hxe,v:void 0,o:null,p:null}}function FG(t,e={}){let n=zy();const{resultEqualityCheck:r}=e;let i,a=0;function s(){let o=n;const{length:c}=arguments;for(let h=0,g=c;h<g;h++){const v=arguments[h];if(typeof v=="function"||typeof v=="object"&&v!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const x=b.get(v);x===void 0?(o=zy(),b.set(v,o)):o=x}else{let b=o.p;b===null&&(o.p=b=new Map);const x=b.get(v);x===void 0?(o=zy(),b.set(v,o)):o=x}}const d=o;let f;if(o.s===p5)f=o.v;else if(f=t.apply(null,arguments),a++,r){const h=i?.deref?.()??i;h!=null&&r(h,f)&&(f=h,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new fxe(f):f}return d.s=p5,d.v=f,f}return s.clearCache=()=>{n=zy(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function pxe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,o,c={},d=i.pop();typeof d=="object"&&(c=d,d=i.pop()),sxe(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...n,...c},{memoize:h,memoizeOptions:g=[],argsMemoize:v=FG,argsMemoizeOptions:b=[]}=f,x=h5(g),w=h5(b),_=cxe(i),T=h(function(){return a++,d.apply(null,arguments)},...x),N=v(function(){s++;const P=uxe(_,arguments);return o=T.apply(null,P),o},...w);return Object.assign(N,{resultFunc:d,memoizedResultFunc:T,dependencies:_,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var me=pxe(FG),gxe=Object.assign((t,e=me)=>{oxe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[n[c]]=o,s),{}))},{withTypes:()=>gxe}),HT={},WT={},YT={},g5;function mxe(){return g5||(g5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const s=e(r),o=e(i);if(s===o&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};t.compareValues=n})(YT)),YT}var KT={},XT={},m5;function $G(){return m5||(m5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(XT)),XT}var v5;function vxe(){return v5||(v5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$G(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(KT)),KT}var y5;function yxe(){return y5||(y5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mxe(),n=vxe(),r=HI();function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(v=>String(v));const d=(v,b)=>{let x=v;for(let w=0;w<b.length&&x!=null;++w)x=x[b[w]];return x},f=(v,b)=>b==null||v==null?b:typeof v=="object"&&"key"in v?Object.hasOwn(b,v.key)?b[v.key]:d(b,v.path):typeof v=="function"?v(b):Array.isArray(v)?d(b,v):typeof b=="object"?b[v]:b,h=s.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:r.toPath(v)}));return a.map(v=>({original:v,criteria:h.map(b=>f(b,v))})).slice().sort((v,b)=>{for(let x=0;x<h.length;x++){const w=e.compareValues(v.criteria[x],b.criteria[x],o[x]);if(w!==0)return w}return 0}).map(v=>v.original)}t.orderBy=i})(WT)),WT}var QT={},b5;function bxe(){return b5||(b5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),s=(o,c)=>{for(let d=0;d<o.length;d++){const f=o[d];Array.isArray(f)&&c<a?s(f,c+1):i.push(f)}};return s(n,0),i}t.flatten=e})(QT)),QT}var ZT={},x5;function qG(){return x5||(x5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UG(),n=YI(),r=RG(),i=jG();function a(s,o,c){return r.isObject(c)&&(typeof o=="number"&&n.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.eq(c[o],s):!1}t.isIterateeCall=a})(ZT)),ZT}var w5;function xxe(){return w5||(w5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yxe(),n=bxe(),r=qG();function i(a,...s){const o=s.length;return o>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,n.flatten(s),["asc"])}t.sortBy=i})(HT)),HT}var JT,S5;function wxe(){return S5||(S5=1,JT=xxe().sortBy),JT}var Sxe=wxe();const lw=bl(Sxe);var GG=t=>t.legend.settings,_xe=t=>t.legend.size,Exe=t=>t.legend.payload;me([Exe,GG],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?lw(r,n):r});var Ly=1;function Txe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>Ly||Math.abs(s.left-e.left)>Ly||Math.abs(s.top-e.top)>Ly||Math.abs(s.width-e.width)>Ly)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Br(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Axe=typeof Symbol=="function"&&Symbol.observable||"@@observable",_5=Axe,eA=()=>Math.random().toString(36).substring(7).split("").join("."),kxe={INIT:`@@redux/INIT${eA()}`,REPLACE:`@@redux/REPLACE${eA()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${eA()}`},Sx=kxe;function XI(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function HG(t,e,n){if(typeof t!="function")throw new Error(Br(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Br(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Br(1));return n(HG)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,c=!1;function d(){s===a&&(s=new Map,a.forEach((w,_)=>{s.set(_,w)}))}function f(){if(c)throw new Error(Br(3));return i}function h(w){if(typeof w!="function")throw new Error(Br(4));if(c)throw new Error(Br(5));let _=!0;d();const T=o++;return s.set(T,w),function(){if(_){if(c)throw new Error(Br(6));_=!1,d(),s.delete(T),a=null}}}function g(w){if(!XI(w))throw new Error(Br(7));if(typeof w.type>"u")throw new Error(Br(8));if(typeof w.type!="string")throw new Error(Br(17));if(c)throw new Error(Br(9));try{c=!0,i=r(i,w)}finally{c=!1}return(a=s).forEach(T=>{T()}),w}function v(w){if(typeof w!="function")throw new Error(Br(10));r=w,g({type:Sx.REPLACE})}function b(){const w=h;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(Br(11));function T(){const D=_;D.next&&D.next(f())}return T(),{unsubscribe:w(T)}},[_5](){return this}}}return g({type:Sx.INIT}),{dispatch:g,subscribe:h,getState:f,replaceReducer:v,[_5]:b}}function Cxe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Sx.INIT})>"u")throw new Error(Br(12));if(typeof n(void 0,{type:Sx.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Br(13))})}function WG(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{Cxe(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const d={};for(let f=0;f<r.length;f++){const h=r[f],g=n[h],v=s[h],b=g(v,o);if(typeof b>"u")throw o&&o.type,new Error(Br(14));d[h]=b,c=c||b!==v}return c=c||r.length!==Object.keys(s).length,c?d:s}}function _x(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Nxe(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(Br(15))};const s={getState:i.getState,dispatch:(c,...d)=>a(c,...d)},o=t.map(c=>c(s));return a=_x(...o)(i.dispatch),{...i,dispatch:a}}}function YG(t){return XI(t)&&"type"in t&&typeof t.type=="string"}var KG=Symbol.for("immer-nothing"),E5=Symbol.for("immer-draftable"),Si=Symbol.for("immer-state");function ss(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var sa=Object,Sh=sa.getPrototypeOf,Ex="constructor",cw="prototype",bC="configurable",Tx="enumerable",Sb="writable",bm="value",hl=t=>!!t&&!!t[Si];function xs(t){return t?XG(t)||dw(t)||!!t[E5]||!!t[Ex]?.[E5]||fw(t)||hw(t):!1}var Ixe=sa[cw][Ex].toString(),T5=new WeakMap;function XG(t){if(!t||!QI(t))return!1;const e=Sh(t);if(e===null||e===sa[cw])return!0;const n=sa.hasOwnProperty.call(e,Ex)&&e[Ex];if(n===Object)return!0;if(!If(n))return!1;let r=T5.get(n);return r===void 0&&(r=Function.toString.call(n),T5.set(n,r)),r===Ixe}function uw(t,e,n=!0){mv(t)===0?(n?Reflect.ownKeys(t):sa.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function mv(t){const e=t[Si];return e?e.type_:dw(t)?1:fw(t)?2:hw(t)?3:0}var A5=(t,e,n=mv(t))=>n===2?t.has(e):sa[cw].hasOwnProperty.call(t,e),xC=(t,e,n=mv(t))=>n===2?t.get(e):t[e],Ax=(t,e,n,r=mv(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function Oxe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var dw=Array.isArray,fw=t=>t instanceof Map,hw=t=>t instanceof Set,QI=t=>typeof t=="object",If=t=>typeof t=="function",tA=t=>typeof t=="boolean";function Pxe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Vo=t=>t.copy_||t.base_,ZI=t=>t.modified_?t.copy_:t.base_;function wC(t,e){if(fw(t))return new Map(t);if(hw(t))return new Set(t);if(dw(t))return Array[cw].slice.call(t);const n=XG(t);if(e===!0||e==="class_only"&&!n){const r=sa.getOwnPropertyDescriptors(t);delete r[Si];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o[Sb]===!1&&(o[Sb]=!0,o[bC]=!0),(o.get||o.set)&&(r[s]={[bC]:!0,[Sb]:!0,[Tx]:o[Tx],[bm]:t[s]})}return sa.create(Sh(t),r)}else{const r=Sh(t);if(r!==null&&n)return{...t};const i=sa.create(r);return sa.assign(i,t)}}function JI(t,e=!1){return pw(t)||hl(t)||!xs(t)||(mv(t)>1&&sa.defineProperties(t,{set:Vy,add:Vy,clear:Vy,delete:Vy}),sa.freeze(t),e&&uw(t,(n,r)=>{JI(r,!0)},!1)),t}function Dxe(){ss(2)}var Vy={[bm]:Dxe};function pw(t){return t===null||!QI(t)?!0:sa.isFrozen(t)}var kx="MapSet",SC="Patches",k5="ArrayMethods",QG={};function ud(t){const e=QG[t];return e||ss(0,t),e}var C5=t=>!!QG[t],xm,ZG=()=>xm,Rxe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:C5(kx)?ud(kx):void 0,arrayMethodsPlugin_:C5(k5)?ud(k5):void 0});function N5(t,e){e&&(t.patchPlugin_=ud(SC),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function _C(t){EC(t),t.drafts_.forEach(Mxe),t.drafts_=null}function EC(t){t===xm&&(xm=t.parent_)}var I5=t=>xm=Rxe(xm,t);function Mxe(t){const e=t[Si];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function O5(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Si].modified_&&(_C(e),ss(4)),xs(t)&&(t=P5(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Si].base_,t,e)}else t=P5(e,n);return jxe(e,t,!0),_C(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==KG?t:void 0}function P5(t,e){if(pw(e))return e;const n=e[Si];if(!n)return Cx(e,t.handledSet_,t);if(!gw(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);tH(n,t)}return n.copy_}function jxe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&JI(e,n)}function JG(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var gw=(t,e)=>t.scope_===e,zxe=[];function eH(t,e,n,r){const i=Vo(t),a=t.type_;if(r!==void 0&&xC(i,r,a)===e){Ax(i,r,n,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;uw(i,(c,d)=>{if(hl(d)){const f=o.get(d)||[];f.push(c),o.set(d,f)}})}const s=t.draftLocations_.get(e)??zxe;for(const o of s)Ax(i,o,n,a)}function Lxe(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!gw(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const s=ZI(a);eH(t,a.draft_??a,s,n),tH(a,i)})}function tH(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}JG(t)}}function Vxe(t,e,n){const{scope_:r}=t;if(hl(n)){const i=n[Si];gw(i,r)&&i.callbacks_.push(function(){_b(t);const s=ZI(i);eH(t,n,s,e)})}else xs(n)&&t.callbacks_.push(function(){const a=Vo(t);t.type_===3?a.has(n)&&Cx(n,r.handledSet_,r):xC(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Cx(xC(t.copy_,e,t.type_),r.handledSet_,r)})}function Cx(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||hl(t)||e.has(t)||!xs(t)||pw(t)||(e.add(t),uw(t,(r,i)=>{if(hl(i)){const a=i[Si];if(gw(a,n)){const s=ZI(a);Ax(t,r,s,t.type_),JG(a)}}else xs(i)&&Cx(i,e,n)})),t}function Bxe(t,e){const n=dw(t),r={type_:n?1:0,scope_:e?e.scope_:ZG(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=Nx;n&&(i=[r],a=wm);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,[o,r]}var Nx={get(t,e){if(e===Si)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=Vo(t);if(!A5(i,e,t.type_))return Uxe(t,i,e);const a=i[e];if(t.finalized_||!xs(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&Pxe(e))return a;if(a===nA(t.base_,e)){_b(t);const s=t.type_===1?+e:e,o=AC(t.scope_,a,t,s);return t.copy_[s]=o}return a},has(t,e){return e in Vo(t)},ownKeys(t){return Reflect.ownKeys(Vo(t))},set(t,e,n){const r=nH(Vo(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=nA(Vo(t),e),a=i?.[Si];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(Oxe(n,i)&&(n!==void 0||A5(t.base_,e,t.type_)))return!0;_b(t),TC(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),Vxe(t,e,n)),!0},deleteProperty(t,e){return _b(t),nA(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),TC(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Vo(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[Sb]:!0,[bC]:t.type_!==1||e!=="length",[Tx]:r[Tx],[bm]:n[e]}},defineProperty(){ss(11)},getPrototypeOf(t){return Sh(t.base_)},setPrototypeOf(){ss(12)}},wm={};for(let t in Nx){let e=Nx[t];wm[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}wm.deleteProperty=function(t,e){return wm.set.call(this,t,e,void 0)};wm.set=function(t,e,n){return Nx.set.call(this,t[0],e,n,t[0])};function nA(t,e){const n=t[Si];return(n?Vo(n):t)[e]}function Uxe(t,e,n){const r=nH(e,n);return r?bm in r?r[bm]:r.get?.call(t.draft_):void 0}function nH(t,e){if(!(e in t))return;let n=Sh(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Sh(n)}}function TC(t){t.modified_||(t.modified_=!0,t.parent_&&TC(t.parent_))}function _b(t){t.copy_||(t.assigned_=new Map,t.copy_=wC(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Fxe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(If(n)&&!If(r)){const s=r;r=n;const o=this;return function(d=s,...f){return o.produce(d,h=>r.call(this,h,...f))}}If(r)||ss(6),i!==void 0&&!If(i)&&ss(7);let a;if(xs(n)){const s=I5(this),o=AC(s,n,void 0);let c=!0;try{a=r(o),c=!1}finally{c?_C(s):EC(s)}return N5(s,i),O5(a,s)}else if(!n||!QI(n)){if(a=r(n),a===void 0&&(a=n),a===KG&&(a=void 0),this.autoFreeze_&&JI(a,!0),i){const s=[],o=[];ud(SC).generateReplacementPatches_(n,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else ss(1,n)},this.produceWithPatches=(n,r)=>{if(If(n))return(o,...c)=>this.produceWithPatches(o,d=>n(d,...c));let i,a;return[this.produce(n,r,(o,c)=>{i=o,a=c}),i,a]},tA(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),tA(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),tA(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){xs(e)||ss(8),hl(e)&&(e=ps(e));const n=I5(this),r=AC(n,e,void 0);return r[Si].isManual_=!0,EC(n),r}finishDraft(e,n){const r=e&&e[Si];(!r||!r.isManual_)&&ss(9);const{scope_:i}=r;return N5(i,n),O5(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=ud(SC).applyPatches_;return hl(e)?i(e,n):this.produce(e,a=>i(a,n))}};function AC(t,e,n,r){const[i,a]=fw(e)?ud(kx).proxyMap_(e,n):hw(e)?ud(kx).proxySet_(e,n):Bxe(e,n);return(n?.scope_??ZG()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?Lxe(n,a,r):a.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:d}=c;a.modified_&&d&&d.generatePatches_(a,[],c)}),i}function ps(t){return hl(t)||ss(10,t),rH(t)}function rH(t){if(!xs(t)||pw(t))return t;const e=t[Si];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=wC(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=wC(t,!0);return uw(n,(i,a)=>{Ax(n,i,rH(a))},r),e&&(e.finalized_=!1),n}var $xe=new Fxe,iH=$xe.produce;function aH(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var qxe=aH(),Gxe=aH,Hxe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_x:_x.apply(null,arguments)};function Va(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(oa(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>YG(r)&&r.type===t,n}var sH=class Cg extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Cg.prototype)}static get[Symbol.species](){return Cg}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Cg(...e[0].concat(this)):new Cg(...e.concat(this))}};function D5(t){return xs(t)?iH(t,()=>{}):t}function By(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Wxe(t){return typeof t=="boolean"}var Yxe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new sH;return n&&(Wxe(n)?s.push(qxe):s.push(Gxe(n.extraArgument))),s},oH="RTK_autoBatch",yn=()=>t=>({payload:t,meta:{[oH]:!0}}),R5=t=>e=>{setTimeout(e,t)},lH=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:R5(10):t.type==="callback"?t.queueNotification:R5(t.timeout),d=()=>{s=!1,a&&(a=!1,o.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const h=()=>i&&f(),g=r.subscribe(h);return o.add(f),()=>{g(),o.delete(f)}},dispatch(f){try{return i=!f?.meta?.[oH],a=!i,a&&(s||(s=!0,c(d))),r.dispatch(f)}finally{i=!0}}})},Kxe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new sH(t);return r&&i.push(lH(typeof r=="object"?r:void 0)),i};function Xxe(t){const e=Yxe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(XI(n))o=WG(n);else throw new Error(oa(1));let c;typeof r=="function"?c=r(e):c=e();let d=_x;i&&(d=Hxe({trace:!1,...typeof i=="object"&&i}));const f=Nxe(...c),h=Kxe(f);let g=typeof s=="function"?s(h):h();const v=d(...g);return HG(o,a,v)}function cH(t){const e={},n=[];let r;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(oa(28));if(o in e)throw new Error(oa(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return n.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function Qxe(t){return typeof t=="function"}function Zxe(t,e){let[n,r,i]=cH(e),a;if(Qxe(t))a=()=>D5(t());else{const o=D5(t);a=()=>o}function s(o=a(),c){let d=[n[c.type],...r.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[i]),d.reduce((f,h)=>{if(h)if(hl(f)){const v=h(f,c);return v===void 0?f:v}else{if(xs(f))return iH(f,g=>h(g,c));{const g=h(f,c);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},o)}return s.getInitialState=a,s}var Jxe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",e1e=(t=21)=>{let e="",n=t;for(;n--;)e+=Jxe[Math.random()*64|0];return e},t1e=Symbol.for("rtk-slice-createasyncthunk");function n1e(t,e){return`${t}/${e}`}function r1e({creators:t}={}){const e=t?.asyncThunk?.[t1e];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(oa(11));const s=(typeof r.reducers=="function"?r.reducers(a1e()):r.reducers)||{},o=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(N,D){const P=typeof N=="string"?N:N.type;if(!P)throw new Error(oa(12));if(P in c.sliceCaseReducersByType)throw new Error(oa(13));return c.sliceCaseReducersByType[P]=D,d},addMatcher(N,D){return c.sliceMatchers.push({matcher:N,reducer:D}),d},exposeAction(N,D){return c.actionCreators[N]=D,d},exposeCaseReducer(N,D){return c.sliceCaseReducersByName[N]=D,d}};o.forEach(N=>{const D=s[N],P={reducerName:N,type:n1e(i,N),createNotation:typeof r.reducers=="function"};o1e(D)?c1e(P,D,d,e):s1e(P,D,d)});function f(){const[N={},D=[],P=void 0]=typeof r.extraReducers=="function"?cH(r.extraReducers):[r.extraReducers],O={...N,...c.sliceCaseReducersByType};return Zxe(r.initialState,C=>{for(let I in O)C.addCase(I,O[I]);for(let I of c.sliceMatchers)C.addMatcher(I.matcher,I.reducer);for(let I of D)C.addMatcher(I.matcher,I.reducer);P&&C.addDefaultCase(P)})}const h=N=>N,g=new Map,v=new WeakMap;let b;function x(N,D){return b||(b=f()),b(N,D)}function w(){return b||(b=f()),b.getInitialState()}function _(N,D=!1){function P(C){let I=C[N];return typeof I>"u"&&D&&(I=By(v,P,w)),I}function O(C=h){const I=By(g,D,()=>new WeakMap);return By(I,C,()=>{const R={};for(const[j,L]of Object.entries(r.selectors??{}))R[j]=i1e(L,C,()=>By(v,C,w),D);return R})}return{reducerPath:N,getSelectors:O,get selectors(){return O(P)},selectSlice:P}}const T={name:i,reducer:x,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,..._(a),injectInto(N,{reducerPath:D,...P}={}){const O=D??a;return N.inject({reducerPath:O,reducer:x},P),{...T,..._(O,!0)}}};return T}}function i1e(t,e,n,r){function i(a,...s){let o=e(a);return typeof o>"u"&&r&&(o=n()),t(o,...s)}return i.unwrapped=t,i}var Fi=r1e();function a1e(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function s1e({type:t,reducerName:e,createNotation:n},r,i){let a,s;if("reducer"in r){if(n&&!l1e(r))throw new Error(oa(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?Va(t,s):Va(t))}function o1e(t){return t._reducerDefinitionType==="asyncThunk"}function l1e(t){return t._reducerDefinitionType==="reducerWithPrepare"}function c1e({type:t,reducerName:e},n,r,i){if(!i)throw new Error(oa(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:d,options:f}=n,h=i(t,a,f);r.exposeAction(e,h),s&&r.addCase(h.fulfilled,s),o&&r.addCase(h.pending,o),c&&r.addCase(h.rejected,c),d&&r.addMatcher(h.settled,d),r.exposeCaseReducer(e,{fulfilled:s||Uy,pending:o||Uy,rejected:c||Uy,settled:d||Uy})}function Uy(){}var u1e="task",uH="listener",dH="completed",eO="cancelled",d1e=`task-${eO}`,f1e=`task-${dH}`,kC=`${uH}-${eO}`,h1e=`${uH}-${dH}`,mw=class{constructor(t){this.code=t,this.message=`${u1e} ${eO} (reason: ${t})`}name="TaskAbortError";message},tO=(t,e)=>{if(typeof t!="function")throw new TypeError(oa(32))},Ix=()=>{},fH=(t,e=Ix)=>(t.catch(e),t),hH=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Xu=t=>{if(t.aborted)throw new mw(t.reason)};function pH(t,e){let n=Ix;return new Promise((r,i)=>{const a=()=>i(new mw(t.reason));if(t.aborted){a();return}n=hH(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=Ix})}var p1e=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof mw?"cancelled":"rejected",error:n}}finally{e?.()}},Ox=t=>e=>fH(pH(t,e).then(n=>(Xu(t),n))),gH=t=>{const e=Ox(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Zf}=Object,M5={},vw="listenerMiddleware",g1e=(t,e)=>{const n=r=>hH(t,()=>r.abort(t.reason));return(r,i)=>{tO(r);const a=new AbortController;n(a);const s=p1e(async()=>{Xu(t),Xu(a.signal);const o=await r({pause:Ox(a.signal),delay:gH(a.signal),signal:a.signal});return Xu(a.signal),o},()=>a.abort(f1e));return i?.autoJoin&&e.push(s.catch(Ix)),{result:Ox(t)(s),cancel(){a.abort(d1e)}}}},m1e=(t,e)=>{const n=async(r,i)=>{Xu(e);let a=()=>{};const o=[new Promise((c,d)=>{let f=t({predicate:r,effect:(h,g)=>{g.unsubscribe(),c([h,g.getState(),g.getOriginalState()])}});a=()=>{f(),d()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await pH(e,Promise.race(o));return Xu(e),c}finally{a()}};return(r,i)=>fH(n(r,i))},mH=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Va(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(oa(21));return tO(a),{predicate:i,type:e,effect:a}},vH=Zf(t=>{const{type:e,predicate:n,effect:r}=mH(t);return{id:e1e(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(oa(22))}}},{withTypes:()=>vH}),j5=(t,e)=>{const{type:n,effect:r,predicate:i}=mH(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},CC=t=>{t.pending.forEach(e=>{e.abort(kC)})},v1e=(t,e)=>()=>{for(const n of e.keys())CC(n);t.clear()},z5=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},yH=Zf(Va(`${vw}/add`),{withTypes:()=>yH}),y1e=Va(`${vw}/removeAll`),bH=Zf(Va(`${vw}/remove`),{withTypes:()=>bH}),b1e=(...t)=>{console.error(`${vw}/error`,...t)},vv=(t={})=>{const e=new Map,n=new Map,r=v=>{const b=n.get(v)??0;n.set(v,b+1)},i=v=>{const b=n.get(v)??1;b===1?n.delete(v):n.set(v,b-1)},{extra:a,onError:s=b1e}=t;tO(s);const o=v=>(v.unsubscribe=()=>e.delete(v.id),e.set(v.id,v),b=>{v.unsubscribe(),b?.cancelActive&&CC(v)}),c=v=>{const b=j5(e,v)??vH(v);return o(b)};Zf(c,{withTypes:()=>c});const d=v=>{const b=j5(e,v);return b&&(b.unsubscribe(),v.cancelActive&&CC(b)),!!b};Zf(d,{withTypes:()=>d});const f=async(v,b,x,w)=>{const _=new AbortController,T=m1e(c,_.signal),N=[];try{v.pending.add(_),r(v),await Promise.resolve(v.effect(b,Zf({},x,{getOriginalState:w,condition:(D,P)=>T(D,P).then(Boolean),take:T,delay:gH(_.signal),pause:Ox(_.signal),extra:a,signal:_.signal,fork:g1e(_.signal,N),unsubscribe:v.unsubscribe,subscribe:()=>{e.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((D,P,O)=>{D!==_&&(D.abort(kC),O.delete(D))})},cancel:()=>{_.abort(kC),v.pending.delete(_)},throwIfCancelled:()=>{Xu(_.signal)}})))}catch(D){D instanceof mw||z5(s,D,{raisedBy:"effect"})}finally{await Promise.all(N),_.abort(h1e),i(v),v.pending.delete(_)}},h=v1e(e,n);return{middleware:v=>b=>x=>{if(!YG(x))return b(x);if(yH.match(x))return c(x.payload);if(y1e.match(x)){h();return}if(bH.match(x))return d(x.payload);let w=v.getState();const _=()=>{if(w===M5)throw new Error(oa(23));return w};let T;try{if(T=b(x),e.size>0){const N=v.getState(),D=Array.from(e.values());for(const P of D){let O=!1;try{O=P.predicate(x,N,w)}catch(C){O=!1,z5(s,C,{raisedBy:"predicate"})}O&&f(P,x,v,_)}}}finally{w=M5}return T},startListening:c,stopListening:d,clearListeners:h}};function oa(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var x1e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},xH=Fi({name:"chartLayout",initialState:x1e,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:w1e,setLayout:S1e,setChartSize:_1e,setScale:E1e}=xH.actions,T1e=xH.reducer;function wH(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function en(t){return Number.isFinite(t)}function fo(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function L5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ff(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L5(Object(n),!0).forEach(function(r){A1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function A1e(t,e,n){return(e=k1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k1e(t){var e=C1e(t,"string");return typeof e=="symbol"?e:e+""}function C1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pn(t,e,n){return Pr(t)||Pr(e)?n:La(e)?cd(t,e,n):typeof e=="function"?e(t):n}var N1e=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&qe(t[a]))return Ff(Ff({},t),{},{[a]:t[a]+(r||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&qe(t[s]))return Ff(Ff({},t),{},{[s]:t[s]+(i||0)})}return t},Td=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",SH=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,a,s=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(n),s},_H=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:d,tickCount:f,ticks:h,niceTicks:g,axisType:v}=t;if(!s)return null;var b=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,x=i==="category"&&s.bandwidth?s.bandwidth()/b:0;if(x=v==="angleAxis"&&a&&a.length>=2?Ir(a[0]-a[1])*2*x:x,h||g){var w=(h||g||[]).map((_,T)=>{var N=r?r.indexOf(_):_;return{coordinate:s(N)+x,value:_,offset:x,index:T}});return w.filter(_=>!ua(_.coordinate))}return c&&d?d.map((_,T)=>({coordinate:s(_)+x,value:_,index:T,offset:x})):s.ticks&&f!=null?s.ticks(f).map((_,T)=>({coordinate:s(_)+x,value:_,offset:x,index:T})):s.domain().map((_,T)=>({coordinate:s(_)+x,value:r?r[_]:_,index:T,offset:x}))},V5=1e-4,I1e=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-V5,a=Math.max(r[0],r[1])+V5,s=t(e[0]),o=t(e[n-1]);(s<i||s>a||o<i||o>a)&&t.domain([e[0],e[n-1]])}},O1e=(t,e)=>{if(!e||e.length!==2||!qe(e[0])||!qe(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!qe(t[0])||t[0]<n)&&(i[0]=n),(!qe(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},P1e=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0,o=0;o<n;++o){var c=t[o],d=c?.[i];if(d!=null){var f=d[1],h=d[0],g=ua(f)?h:f;g>=0?(d[0]=a,d[1]=a+g,a=f):(d[0]=s,d[1]=s+g,s=f)}}}},D1e=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0;s<n;++s){var o=t[s],c=o?.[i];if(c!=null){var d=ua(c[1])?c[0]:c[1];d>=0?(c[0]=a,c[1]=a+d,a=c[1]):(c[0]=0,c[1]=0)}}}},R1e={sign:P1e,expand:abe,none:ld,silhouette:sbe,wiggle:obe,positive:D1e},M1e=(t,e,n)=>{var r,i=(r=R1e[n])!==null&&r!==void 0?r:ld,a=ibe().keys(e).value((o,c)=>Number(pn(o,c,0))).order(vC).offset(i),s=a(t);return s.forEach((o,c)=>{o.forEach((d,f)=>{var h=pn(t[f],e[c],0);Array.isArray(h)&&h.length===2&&qe(h[0])&&qe(h[1])&&(d[0]=h[0],d[1]=h[1])})}),s};function j1e(t){return t==null?void 0:String(t)}var B5=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var o=pn(a,e.dataKey,e.scale.domain()[s]);return Pr(o)?null:e.scale(o)-i/2+r},z1e=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},L1e=t=>{var e=t.flat(2).filter(qe);return[Math.min(...e),Math.max(...e)]},V1e=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],B1e=(t,e,n)=>{if(t!=null)return V1e(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:s}=a,o=s.reduce((c,d)=>{var f=wH(d,e,n),h=L1e(f);return!en(h[0])||!en(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},U5=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,F5=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Px=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=lw(e,f=>f.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],d=i[s-1];a=Math.min((c?.coordinate||0)-(d?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function $5(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Ff(Ff({},e),{},{dataKey:n,payload:r,value:i,name:a})}function yw(t,e){if(t)return String(t);if(typeof e=="string")return e}var U1e=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},F1e=(t,e)=>e==="centric"?t.angle:t.radius,wl=t=>t.layout.width,Sl=t=>t.layout.height,$1e=t=>t.layout.scale,EH=t=>t.layout.margin,bw=me(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),xw=me(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),TH="data-recharts-item-index",AH="data-recharts-item-id",yv=60;function q5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q5(Object(n),!0).forEach(function(r){q1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function q1e(t,e,n){return(e=G1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G1e(t){var e=H1e(t,"string");return typeof e=="symbol"?e:e+""}function H1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W1e=t=>t.brush.height;function Y1e(t){var e=xw(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:yv;return n+i}return n},0)}function K1e(t){var e=xw(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:yv;return n+i}return n},0)}function X1e(t){var e=bw(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Q1e(t){var e=bw(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var yr=me([wl,Sl,EH,W1e,Y1e,K1e,X1e,Q1e,GG,_xe],(t,e,n,r,i,a,s,o,c,d)=>{var f={left:(n.left||0)+i,right:(n.right||0)+a},h={top:(n.top||0)+s,bottom:(n.bottom||0)+o},g=Fy(Fy({},h),f),v=g.bottom;g.bottom+=r,g=N1e(g,c,d);var b=t-g.left-g.right,x=e-g.top-g.bottom;return Fy(Fy({brushBottom:v},g),{},{width:Math.max(b,0),height:Math.max(x,0)})}),Z1e=me(yr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),nO=me(wl,Sl,(t,e)=>({x:0,y:0,width:t,height:e})),J1e=A.createContext(null),_i=()=>A.useContext(J1e)!=null,ww=t=>t.brush,Sw=me([ww,yr,EH],(t,e,n)=>({height:t.height,x:qe(t.x)?t.x:e.left,y:qe(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:qe(t.width)?t.width:e.width})),rA={},iA={},aA={},G5;function ewe(){return G5||(G5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),d=a==null||a.includes("trailing"),f=()=>{o!==null&&(n.apply(s,o),s=void 0,o=null)},h=()=>{d&&f(),x()};let g=null;const v=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,h()},r)},b=()=>{g!==null&&(clearTimeout(g),g=null)},x=()=>{b(),s=void 0,o=null},w=()=>{f()},_=function(...T){if(i?.aborted)return;s=this,o=T;const N=g==null;v(),c&&N&&f()};return _.schedule=v,_.cancel=x,_.flush=w,i?.addEventListener("abort",x,{once:!0}),_}t.debounce=e})(aA)),aA}var H5;function twe(){return H5||(H5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ewe();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,d=Array(2);s&&(d[0]="leading"),o&&(d[1]="trailing");let f,h=null;const g=e.debounce(function(...x){f=r.apply(this,x),h=null},i,{edges:d}),v=function(...x){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(f=r.apply(this,x),h=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,x),f)},b=()=>(g.flush(),f);return v.cancel=g.cancel,v.flush=b,v}t.debounce=n})(iA)),iA}var W5;function nwe(){return W5||(W5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=twe();function n(r,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:o})}t.throttle=n})(rA)),rA}var sA,Y5;function rwe(){return Y5||(Y5=1,sA=nwe().throttle),sA}var iwe=rwe();const awe=bl(iwe);var Dx=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>i[s++]))}},kH=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:s}=n,o=fl(r)?t:Number(r),c=fl(i)?e:Number(i);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},swe={width:0,height:0,overflow:"visible"},owe={width:0,overflowX:"visible"},lwe={height:0,overflowY:"visible"},cwe={},uwe=t=>{var{width:e,height:n}=t,r=fl(e),i=fl(n);return r&&i?swe:r?owe:i?lwe:cwe};function dwe(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function NC(){return NC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NC.apply(null,arguments)}function K5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K5(Object(n),!0).forEach(function(r){fwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fwe(t,e,n){return(e=hwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hwe(t){var e=pwe(t,"string");return typeof e=="symbol"?e:e+""}function pwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CH=A.createContext({width:-1,height:-1});function gwe(t){return fo(t.width)&&fo(t.height)}function NH(t){var{children:e,width:n,height:r}=t,i=A.useMemo(()=>({width:n,height:r}),[n,r]);return gwe(i)?A.createElement(CH.Provider,{value:i},e):null}var rO=()=>A.useContext(CH),mwe=A.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:c,children:d,debounce:f=0,id:h,className:g,onResize:v,style:b={}}=t,x=A.useRef(null),w=A.useRef();w.current=v,A.useImperativeHandle(e,()=>x.current);var[_,T]=A.useState({containerWidth:r.width,containerHeight:r.height}),N=A.useCallback((I,R)=>{T(j=>{var L=Math.round(I),B=Math.round(R);return j.containerWidth===L&&j.containerHeight===B?j:{containerWidth:L,containerHeight:B}})},[]);A.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return gv;var I=B=>{var z,{width:Y,height:Z}=B[0].contentRect;N(Y,Z),(z=w.current)===null||z===void 0||z.call(w,Y,Z)};f>0&&(I=awe(I,f,{trailing:!0,leading:!1}));var R=new ResizeObserver(I),{width:j,height:L}=x.current.getBoundingClientRect();return N(j,L),R.observe(x.current),()=>{R.disconnect()}},[N,f]);var{containerWidth:D,containerHeight:P}=_;Dx(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:O,calculatedHeight:C}=kH(D,P,{width:i,height:a,aspect:n,maxHeight:c});return Dx(O!=null&&O>0||C!=null&&C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,O,C,i,a,s,o,n),A.createElement("div",{id:h?"".concat(h):void 0,className:qt("recharts-responsive-container",g),style:X5(X5({},b),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:x},A.createElement("div",{style:uwe({width:i,height:a})},A.createElement(NH,{width:O,height:C},d)))}),_w=A.forwardRef((t,e)=>{var n=rO();if(fo(n.width)&&fo(n.height))return t.children;var{width:r,height:i}=dwe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=kH(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return qe(a)&&qe(s)?A.createElement(NH,{width:a,height:s},t.children):A.createElement(mwe,NC({},t,{width:r,height:i,ref:e}))});function IH(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var bv=()=>{var t,e=_i(),n=Fe(Z1e),r=Fe(Sw),i=(t=Fe(ww))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},vwe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},OH=()=>{var t;return(t=Fe(yr))!==null&&t!==void 0?t:vwe},PH=()=>Fe(wl),DH=()=>Fe(Sl),Pt=t=>t.layout.layoutType,xv=()=>Fe(Pt),ywe=()=>{var t=xv();return t!==void 0},Ew=t=>{var e=gn(),n=_i(),{width:r,height:i}=t,a=rO(),s=r,o=i;return a&&(s=a.width>0?a.width:r,o=a.height>0?a.height:i),A.useEffect(()=>{!n&&fo(s)&&fo(o)&&e(_1e({width:s,height:o}))},[e,n,s,o]),null},RH=Symbol.for("immer-nothing"),Q5=Symbol.for("immer-draftable"),da=Symbol.for("immer-state");function os(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Sm=Object.getPrototypeOf;function _h(t){return!!t&&!!t[da]}function dd(t){return t?MH(t)||Array.isArray(t)||!!t[Q5]||!!t.constructor?.[Q5]||wv(t)||Aw(t):!1}var bwe=Object.prototype.constructor.toString(),Z5=new WeakMap;function MH(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=Z5.get(n);return r===void 0&&(r=Function.toString.call(n),Z5.set(n,r)),r===bwe}function Rx(t,e,n=!0){Tw(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function Tw(t){const e=t[da];return e?e.type_:Array.isArray(t)?1:wv(t)?2:Aw(t)?3:0}function IC(t,e){return Tw(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function jH(t,e,n){const r=Tw(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function xwe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function wv(t){return t instanceof Map}function Aw(t){return t instanceof Set}function Iu(t){return t.copy_||t.base_}function OC(t,e){if(wv(t))return new Map(t);if(Aw(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=MH(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[da];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(Sm(t),r)}else{const r=Sm(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function iO(t,e=!1){return kw(t)||_h(t)||!dd(t)||(Tw(t)>1&&Object.defineProperties(t,{set:$y,add:$y,clear:$y,delete:$y}),Object.freeze(t),e&&Object.values(t).forEach(n=>iO(n,!0))),t}function wwe(){os(2)}var $y={value:wwe};function kw(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Swe={};function fd(t){const e=Swe[t];return e||os(0,t),e}var _m;function zH(){return _m}function _we(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function J5(t,e){e&&(fd("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function PC(t){DC(t),t.drafts_.forEach(Ewe),t.drafts_=null}function DC(t){t===_m&&(_m=t.parent_)}function eV(t){return _m=_we(_m,t)}function Ewe(t){const e=t[da];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function tV(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[da].modified_&&(PC(e),os(4)),dd(t)&&(t=Mx(e,t),e.parent_||jx(e,t)),e.patches_&&fd("Patches").generateReplacementPatches_(n[da].base_,t,e.patches_,e.inversePatches_)):t=Mx(e,n,[]),PC(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==RH?t:void 0}function Mx(t,e,n){if(kw(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[da];if(!i)return Rx(e,(a,s)=>nV(t,i,e,a,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return jx(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),Rx(s,(c,d)=>nV(t,i,a,c,d,n,o),r),jx(t,a,!1),n&&t.patches_&&fd("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function nV(t,e,n,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=kw(i);if(!(o&&!s)){if(_h(i)){const c=a&&e&&e.type_!==3&&!IC(e.assigned_,r)?a.concat(r):void 0,d=Mx(t,i,c);if(jH(n,r,d),_h(d))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(dd(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;Mx(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(wv(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&jx(t,i)}}}function jx(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&iO(e,n)}function Twe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:zH(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=aO;n&&(i=[r],a=Em);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var aO={get(t,e){if(e===da)return t;const n=Iu(t);if(!IC(n,e))return Awe(t,n,e);const r=n[e];return t.finalized_||!dd(r)?r:r===oA(t.base_,e)?(lA(t),t.copy_[e]=MC(r,t)):r},has(t,e){return e in Iu(t)},ownKeys(t){return Reflect.ownKeys(Iu(t))},set(t,e,n){const r=LH(Iu(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=oA(Iu(t),e),a=i?.[da];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(xwe(n,i)&&(n!==void 0||IC(t.base_,e)))return!0;lA(t),RC(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return oA(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,lA(t),RC(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Iu(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){os(11)},getPrototypeOf(t){return Sm(t.base_)},setPrototypeOf(){os(12)}},Em={};Rx(aO,(t,e)=>{Em[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Em.deleteProperty=function(t,e){return Em.set.call(this,t,e,void 0)};Em.set=function(t,e,n){return aO.set.call(this,t[0],e,n,t[0])};function oA(t,e){const n=t[da];return(n?Iu(n):t)[e]}function Awe(t,e,n){const r=LH(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function LH(t,e){if(!(e in t))return;let n=Sm(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Sm(n)}}function RC(t){t.modified_||(t.modified_=!0,t.parent_&&RC(t.parent_))}function lA(t){t.copy_||(t.copy_=OC(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var kwe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(c=a,...d){return s.produce(c,f=>n.call(this,f,...d))}}typeof n!="function"&&os(6),r!==void 0&&typeof r!="function"&&os(7);let i;if(dd(e)){const a=eV(this),s=MC(e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?PC(a):DC(a)}return J5(a,r),tV(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===RH&&(i=void 0),this.autoFreeze_&&iO(i,!0),r){const a=[],s=[];fd("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else os(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){dd(t)||os(8),_h(t)&&(t=Cwe(t));const e=eV(this),n=MC(t,void 0);return n[da].isManual_=!0,DC(e),n}finishDraft(t,e){const n=t&&t[da];(!n||!n.isManual_)&&os(9);const{scope_:r}=n;return J5(r,e),tV(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=fd("Patches").applyPatches_;return _h(t)?r(t,e):this.produce(t,i=>r(i,e))}};function MC(t,e){const n=wv(t)?fd("MapSet").proxyMap_(t,e):Aw(t)?fd("MapSet").proxySet_(t,e):Twe(t,e);return(e?e.scope_:zH()).drafts_.push(n),n}function Cwe(t){return _h(t)||os(10,t),VH(t)}function VH(t){if(!dd(t)||kw(t))return t;const e=t[da];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=OC(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=OC(t,!0);return Rx(n,(i,a)=>{jH(n,i,VH(a))},r),e&&(e.finalized_=!1),n}var Nwe=new kwe;Nwe.produce;var Iwe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},BH=Fi({name:"legend",initialState:Iwe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:yn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ps(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:yn()},removeLegendPayload:{reducer(t,e){var n=ps(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:yn()}}}),{setLegendSize:mMe,setLegendSettings:vMe,addLegendPayload:UH,replaceLegendPayload:FH,removeLegendPayload:$H}=BH.actions,Owe=BH.reducer;function jC(){return jC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jC.apply(null,arguments)}function rV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rV(Object(n),!0).forEach(function(r){Pwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pwe(t,e,n){return(e=Dwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dwe(t){var e=Rwe(t,"string");return typeof e=="symbol"?e:e+""}function Rwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mwe(t){return Array.isArray(t)&&La(t[0])&&La(t[1])?t.join(" ~ "):t}var jwe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:d,label:f,labelFormatter:h,accessibilityLayer:g=!1}=t,v=()=>{if(a&&a.length){var P={padding:0,margin:0},O=(o?lw(a,o):a).map((C,I)=>{if(C.type==="none")return null;var R=C.formatter||s||Mwe,{value:j,name:L}=C,B=j,z=L;if(R){var Y=R(j,L,C,I,a);if(Array.isArray(Y))[B,z]=Y;else if(Y!=null)B=Y;else return null}var Z=cA({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:Z},La(z)?A.createElement("span",{className:"recharts-tooltip-item-name"},z):null,La(z)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},B),A.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:P},O)}return null},b=cA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),x=cA({margin:0},i),w=!Pr(f),_=w?f:"",T=qt("recharts-default-tooltip",c),N=qt("recharts-tooltip-label",d);w&&h&&a!==void 0&&a!==null&&(_=h(f,a));var D=g?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",jC({className:T,style:b},D),A.createElement("p",{className:N,style:x},A.isValidElement(_)?_:"".concat(_)),v())},lg="recharts-tooltip-wrapper",zwe={visibility:"hidden"};function Lwe(t){var{coordinate:e,translateX:n,translateY:r}=t;return qt(lg,{["".concat(lg,"-right")]:qe(n)&&e&&qe(e.x)&&n>=e.x,["".concat(lg,"-left")]:qe(n)&&e&&qe(e.x)&&n<e.x,["".concat(lg,"-bottom")]:qe(r)&&e&&qe(e.y)&&r>=e.y,["".concat(lg,"-top")]:qe(r)&&e&&qe(e.y)&&r<e.y})}function iV(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:d}=t;if(a&&qe(a[r]))return a[r];var f=n[r]-o-(i>0?i:0),h=n[r]+i;if(e[r])return s[r]?f:h;var g=c[r];if(g==null)return 0;if(s[r]){var v=f,b=g;return v<b?Math.max(h,g):Math.max(f,g)}if(d==null)return 0;var x=h+o,w=g+d;return x>w?Math.max(f,g):Math.max(h,g)}function Vwe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Bwe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:c}=t,d,f,h;return s.height>0&&s.width>0&&n?(f=iV({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),h=iV({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),d=Vwe({translateX:f,translateY:h,useTranslate3d:o})):d=zwe,{cssProperties:d,cssClasses:Lwe({translateX:f,translateY:h,coordinate:n})}}function aV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aV(Object(n),!0).forEach(function(r){zC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zC(t,e,n){return(e=Uwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uwe(t){var e=Fwe(t,"string");return typeof e=="symbol"?e:e+""}function Fwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class $we extends A.PureComponent{constructor(){super(...arguments),zC(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),zC(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:d,position:f,reverseDirection:h,useTranslate3d:g,viewBox:v,wrapperStyle:b,lastBoundingBox:x,innerRef:w,hasPortalFromProps:_}=this.props,{cssClasses:T,cssProperties:N}=Bwe({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:d,position:f,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:g,viewBox:v}),D=_?{}:qy(qy({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),P=qy(qy({},D),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},b);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:P,ref:w},a)}}var qH=()=>{var t;return(t=Fe(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function LC(){return LC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LC.apply(null,arguments)}function sV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sV(Object(n),!0).forEach(function(r){qwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qwe(t,e,n){return(e=Gwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gwe(t){var e=Hwe(t,"string");return typeof e=="symbol"?e:e+""}function Hwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lV={curveBasisClosed:Wye,curveBasisOpen:Yye,curveBasis:Hye,curveBumpX:Pye,curveBumpY:Dye,curveLinearClosed:Kye,curveLinear:aw,curveMonotoneX:Xye,curveMonotoneY:Qye,curveNatural:Zye,curveStep:Jye,curveStepAfter:tbe,curveStepBefore:ebe},zx=t=>en(t.x)&&en(t.y),cV=t=>t.base!=null&&zx(t.base)&&zx(t),cg=t=>t.x,ug=t=>t.y,Wwe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(pv(t));return(n==="curveMonotone"||n==="curveBump")&&e?lV["".concat(n).concat(e==="vertical"?"Y":"X")]:lV[n]||aw},Ywe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=t,s=Wwe(e,i),o=a?n.filter(zx):n,c;if(Array.isArray(r)){var d=n.map((v,b)=>oV(oV({},v),{},{base:r[b]}));i==="vertical"?c=jy().y(ug).x1(cg).x0(v=>v.base.x):c=jy().x(cg).y1(ug).y0(v=>v.base.y);var f=c.defined(cV).curve(s),h=a?d.filter(cV):d;return f(h)}i==="vertical"&&qe(r)?c=jy().y(ug).x1(cg).x0(r):qe(r)?c=jy().x(cg).y1(ug).y0(r):c=vG().x(cg).y(ug);var g=c.defined(zx).curve(s);return g(o)},sO=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=xv();if((!n||!n.length)&&!r)return null;var s={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},o=n&&n.length?Ywe(s):r;return A.createElement("path",LC({},bs(t),Abe(t),{className:qt("recharts-curve",e),d:o===null?void 0:o,ref:i}))},Kwe=["x","y","top","left","width","height","className"];function VC(){return VC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VC.apply(null,arguments)}function uV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xwe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uV(Object(n),!0).forEach(function(r){Qwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qwe(t,e,n){return(e=Zwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zwe(t){var e=Jwe(t,"string");return typeof e=="symbol"?e:e+""}function Jwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eSe(t,e){if(t==null)return{};var n,r,i=tSe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var nSe=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),rSe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:s=0,className:o}=t,c=eSe(t,Kwe),d=Xwe({x:e,y:n,top:r,left:i,width:a,height:s},c);return!qe(e)||!qe(n)||!qe(a)||!qe(s)||!qe(r)||!qe(i)?null:A.createElement("path",VC({},ca(d),{className:qt("recharts-cross",o),d:nSe(e,n,a,s,r,i)}))};function iSe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function dV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dV(Object(n),!0).forEach(function(r){aSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aSe(t,e,n){return(e=sSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sSe(t){var e=oSe(t,"string");return typeof e=="symbol"?e:e+""}function oSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lSe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),GH=(t,e,n)=>t.map(r=>"".concat(lSe(r)," ").concat(e,"ms ").concat(n)).join(","),cSe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Tm=(t,e)=>Object.keys(e).reduce((n,r)=>fV(fV({},n),{},{[r]:t(r,e[r])}),{});function hV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(n),!0).forEach(function(r){uSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uSe(t,e,n){return(e=dSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dSe(t){var e=fSe(t,"string");return typeof e=="symbol"?e:e+""}function fSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lx=(t,e,n)=>t+(e-t)*n,BC=t=>{var{from:e,to:n}=t;return e!==n},HH=(t,e,n)=>{var r=Tm((i,a)=>{if(BC(a)){var[s,o]=t(a.from,a.to,a.velocity);return pr(pr({},a),{},{from:s,velocity:o})}return a},e);return n<1?Tm((i,a)=>BC(a)&&r[i]!=null?pr(pr({},a),{},{velocity:Lx(a.velocity,r[i].velocity,n),from:Lx(a.from,r[i].from,n)}):a,e):HH(t,r,n-1)};function hSe(t,e,n,r,i,a){var s,o=r.reduce((g,v)=>pr(pr({},g),{},{[v]:{from:t[v],velocity:0,to:e[v]}}),{}),c=()=>Tm((g,v)=>v.from,o),d=()=>!Object.values(o).filter(BC).length,f=null,h=g=>{s||(s=g);var v=g-s,b=v/n.dt;o=HH(n,o,b),i(pr(pr(pr({},t),e),c())),s=g,d()||(f=a.setTimeout(h))};return()=>(f=a.setTimeout(h),()=>{var g;(g=f)===null||g===void 0||g()})}function pSe(t,e,n,r,i,a,s){var o=null,c=i.reduce((h,g)=>{var v=t[g],b=e[g];return v==null||b==null?h:pr(pr({},h),{},{[g]:[v,b]})},{}),d,f=h=>{d||(d=h);var g=(h-d)/r,v=Tm((x,w)=>Lx(...w,n(g)),c);if(a(pr(pr(pr({},t),e),v)),g<1)o=s.setTimeout(f);else{var b=Tm((x,w)=>Lx(...w,n(1)),c);a(pr(pr(pr({},t),e),b))}};return()=>(o=s.setTimeout(f),()=>{var h;(h=o)===null||h===void 0||h()})}const gSe=(t,e,n,r,i,a)=>{var s=cSe(t,e);return n==null?()=>(i(pr(pr({},t),e)),()=>{}):n.isStepper===!0?hSe(t,e,n,s,i,a):pSe(t,e,n,r,s,i,a)};var Vx=1e-4,WH=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],YH=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),pV=(t,e)=>n=>{var r=WH(t,e);return YH(r,n)},mSe=(t,e)=>n=>{var r=WH(t,e),i=[...r.map((a,s)=>a*s).slice(1),0];return YH(i,n)},vSe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},ySe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=vSe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},bSe=(t,e,n,r)=>{var i=pV(t,n),a=pV(e,r),s=mSe(t,n),o=d=>d>1?1:d<0?0:d,c=d=>{for(var f=d>1?1:d,h=f,g=0;g<8;++g){var v=i(h)-f,b=s(h);if(Math.abs(v-f)<Vx||b<Vx)return a(h);h=o(h-v/b)}return a(h)};return c.isStepper=!1,c},gV=function(){return bSe(...ySe(...arguments))},xSe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(s,o,c)=>{var d=-(s-o)*n,f=c*r,h=c+(d-f)*i/1e3,g=c*i/1e3+s;return Math.abs(g-o)<Vx&&Math.abs(h)<Vx?[o,0]:[g,h]};return a.isStepper=!0,a.dt=i,a},wSe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return gV(t);case"spring":return xSe();default:if(t.split("(")[0]==="cubic-bezier")return gV(t)}return typeof t=="function"?t:null};function SSe(t){var e,n=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...d]=o;if(typeof c=="number"){i=t.setTimeout(a.bind(null,d),c);return}a(c),i=t.setTimeout(a.bind(null,d));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class _Se{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function ESe(){return SSe(new _Se)}var TSe=A.createContext(ESe);function ASe(t,e){var n=A.useContext(TSe);return A.useMemo(()=>e??n(t),[t,e,n])}var kSe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Cw={isSsr:kSe()},CSe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},mV={t:0},uA={t:1};function Nw(t){var e=Wr(t,CSe),{isActive:n,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:d}=e,f=n==="auto"?!Cw.isSsr:n,h=ASe(e.animationId,e.animationManager),[g,v]=A.useState(f?mV:uA),b=A.useRef(null);return A.useEffect(()=>{f||v(uA)},[f]),A.useEffect(()=>{if(!f||!r)return gv;var x=gSe(mV,uA,wSe(a),i,v,h.getTimeoutController()),w=()=>{b.current=x()};return h.start([c,s,w,i,o]),()=>{h.stop(),b.current&&b.current(),o()}},[f,r,i,a,s,c,o,h]),d(g.t)}function Iw(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(ym(e)),r=A.useRef(t);return r.current!==t&&(n.current=ym(e),r.current=t),n.current}var NSe=["radius"],ISe=["radius"],vV,yV,bV,xV,wV,SV,_V,EV,TV,AV;function kV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(n),!0).forEach(function(r){OSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OSe(t,e,n){return(e=PSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PSe(t){var e=DSe(t,"string");return typeof e=="symbol"?e:e+""}function DSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bx(){return Bx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bx.apply(null,arguments)}function NV(t,e){if(t==null)return{};var n,r,i=RSe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function RSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function qs(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var IV=(t,e,n,r,i)=>{var a=yc(n),s=yc(r),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,d=a>=0?1:-1,f=s>=0&&a>=0||s<0&&a<0?1:0,h;if(o>0&&i instanceof Array){for(var g=[0,0,0,0],v=0,b=4;v<b;v++)g[v]=i[v]>o?o:i[v];h=Mn(vV||(vV=qs(["M",",",""])),t,e+c*g[0]),g[0]>0&&(h+=Mn(yV||(yV=qs(["A ",",",",0,0,",",",",",""])),g[0],g[0],f,t+d*g[0],e)),h+=Mn(bV||(bV=qs(["L ",",",""])),t+n-d*g[1],e),g[1]>0&&(h+=Mn(xV||(xV=qs(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],f,t+n,e+c*g[1])),h+=Mn(wV||(wV=qs(["L ",",",""])),t+n,e+r-c*g[2]),g[2]>0&&(h+=Mn(SV||(SV=qs(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],f,t+n-d*g[2],e+r)),h+=Mn(_V||(_V=qs(["L ",",",""])),t+d*g[3],e+r),g[3]>0&&(h+=Mn(EV||(EV=qs(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],f,t,e+r-c*g[3])),h+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);h=Mn(TV||(TV=qs(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*x,x,x,f,t+d*x,e,t+n-d*x,e,x,x,f,t+n,e+c*x,t+n,e+r-c*x,x,x,f,t+n-d*x,e+r,t+d*x,e+r,x,x,f,t,e+r-c*x)}else h=Mn(AV||(AV=qs(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},OV={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},KH=t=>{var e=Wr(t,OV),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var K=n.current.getTotalLength();K&&i(K)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:d,className:f}=e,{animationEasing:h,animationDuration:g,animationBegin:v,isAnimationActive:b,isUpdateAnimationActive:x}=e,w=A.useRef(o),_=A.useRef(c),T=A.useRef(a),N=A.useRef(s),D=A.useMemo(()=>({x:a,y:s,width:o,height:c,radius:d}),[a,s,o,c,d]),P=Iw(D,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var O=qt("recharts-rectangle",f);if(!x){var C=ca(e),{radius:I}=C,R=NV(C,NSe);return A.createElement("path",Bx({},R,{x:yc(a),y:yc(s),width:yc(o),height:yc(c),radius:typeof d=="number"?d:void 0,className:O,d:IV(a,s,o,c,d)}))}var j=w.current,L=_.current,B=T.current,z=N.current,Y="0px ".concat(r===-1?1:r,"px"),Z="".concat(r,"px 0px"),G=GH(["strokeDasharray"],g,typeof h=="string"?h:OV.animationEasing);return A.createElement(Nw,{animationId:P,key:P,canBegin:r>0,duration:g,easing:h,isActive:x,begin:v},K=>{var X=hr(j,o,K),ee=hr(L,c,K),J=hr(B,a,K),F=hr(z,s,K);n.current&&(w.current=X,_.current=ee,T.current=J,N.current=F);var Q;b?K>0?Q={transition:G,strokeDasharray:Z}:Q={strokeDasharray:Y}:Q={strokeDasharray:Z};var te=ca(e),{radius:W}=te,ue=NV(te,ISe);return A.createElement("path",Bx({},ue,{radius:typeof d=="number"?d:void 0,className:O,d:IV(J,F,X,ee,d),ref:n,style:CV(CV({},Q),e.style)}))})};function PV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PV(Object(n),!0).forEach(function(r){MSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MSe(t,e,n){return(e=jSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jSe(t){var e=zSe(t,"string");return typeof e=="symbol"?e:e+""}function zSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ux=Math.PI/180,LSe=t=>t*180/Math.PI,sr=(t,e,n,r)=>({x:t+Math.cos(-Ux*r)*n,y:e+Math.sin(-Ux*r)*n}),XH=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},VSe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},BSe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,s=VSe({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(n-i)/s,c=Math.acos(o);return r>a&&(c=2*Math.PI-c),{radius:s,angle:LSe(c),angleInRadian:c}},USe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},FSe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return t+s*360},$Se=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=BSe({x:n,y:r},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:d}=USe(e),f=a,h;if(c<=d){for(;f>d;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=d}else{for(;f>c;)f-=360;for(;f<d;)f+=360;h=f>=d&&f<=c}return h?DV(DV({},e),{},{radius:i,angle:FSe(f,e)}):null};function QH(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,s=sr(e,n,r,i),o=sr(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var RV,MV,jV,zV,LV,VV,BV;function UC(){return UC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UC.apply(null,arguments)}function Uu(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var qSe=(t,e)=>{var n=Ir(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Gy=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=t,d=o*(s?1:-1)+r,f=Math.asin(o/d)/Ux,h=c?i:i+a*f,g=sr(e,n,d,h),v=sr(e,n,r,h),b=c?i-a*f:i,x=sr(e,n,d*Math.cos(f*Ux),b);return{center:g,circleTangency:v,lineTangency:x,theta:f}},ZH=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=t,o=qSe(a,s),c=a+o,d=sr(e,n,i,a),f=sr(e,n,i,c),h=Mn(RV||(RV=Uu(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,i,i,+(Math.abs(o)>180),+(a>c),f.x,f.y);if(r>0){var g=sr(e,n,r,a),v=sr(e,n,r,c);h+=Mn(MV||(MV=Uu(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,r,r,+(Math.abs(o)>180),+(a<=c),g.x,g.y)}else h+=Mn(jV||(jV=Uu(["L ",","," Z"])),e,n);return h},GSe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:d}=t,f=Ir(d-c),{circleTangency:h,lineTangency:g,theta:v}=Gy({cx:e,cy:n,radius:i,angle:c,sign:f,cornerRadius:a,cornerIsExternal:o}),{circleTangency:b,lineTangency:x,theta:w}=Gy({cx:e,cy:n,radius:i,angle:d,sign:-f,cornerRadius:a,cornerIsExternal:o}),_=o?Math.abs(c-d):Math.abs(c-d)-v-w;if(_<0)return s?Mn(zV||(zV=Uu(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,a,a,a*2,a,a,-a*2):ZH({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:d});var T=Mn(LV||(LV=Uu(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,a,a,+(f<0),h.x,h.y,i,i,+(_>180),+(f<0),b.x,b.y,a,a,+(f<0),x.x,x.y);if(r>0){var{circleTangency:N,lineTangency:D,theta:P}=Gy({cx:e,cy:n,radius:r,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:O,lineTangency:C,theta:I}=Gy({cx:e,cy:n,radius:r,angle:d,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),R=o?Math.abs(c-d):Math.abs(c-d)-P-I;if(R<0&&a===0)return"".concat(T,"L").concat(e,",").concat(n,"Z");T+=Mn(VV||(VV=Uu(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),C.x,C.y,a,a,+(f<0),O.x,O.y,r,r,+(R>180),+(f>0),N.x,N.y,a,a,+(f<0),D.x,D.y)}else T+=Mn(BV||(BV=Uu(["L",",","Z"])),e,n);return T},HSe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},JH=t=>{var e=Wr(t,HSe),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:f,className:h}=e;if(a<i||d===f)return null;var g=qt("recharts-sector",h),v=a-i,b=ai(s,v,0,!0),x;return b>0&&Math.abs(d-f)<360?x=GSe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(b,v/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:f}):x=ZH({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:d,endAngle:f}),A.createElement("path",UC({},ca(e),{className:g,d:x}))};function WSe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(PG(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,c=sr(r,i,a,o),d=sr(r,i,s,o);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return QH(e)}}var dA={},fA={},hA={},UV;function YSe(){return UV||(UV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$G();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(hA)),hA}var FV;function KSe(){return FV||(FV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YSe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(fA)),fA}var $V;function XSe(){return $V||($V=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qG(),n=KSe();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),s=s===void 0?i<a?1:-1:n.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let d=0;d<o;d++)c[d]=i,i+=s;return c}t.range=r})(dA)),dA}var pA,qV;function QSe(){return qV||(qV=1,pA=XSe().range),pA}var ZSe=QSe();const eW=bl(ZSe);function Ec(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function JSe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oO(t){let e,n,r;t.length!==2?(e=Ec,n=(o,c)=>Ec(t(o),c),r=(o,c)=>t(o)-c):(e=t===Ec||t===JSe?t:e_e,n=t,r=t);function i(o,c,d=0,f=o.length){if(d<f){if(e(c,c)!==0)return f;do{const h=d+f>>>1;n(o[h],c)<0?d=h+1:f=h}while(d<f)}return d}function a(o,c,d=0,f=o.length){if(d<f){if(e(c,c)!==0)return f;do{const h=d+f>>>1;n(o[h],c)<=0?d=h+1:f=h}while(d<f)}return d}function s(o,c,d=0,f=o.length){const h=i(o,c,d,f-1);return h>d&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function e_e(){return 0}function tW(t){return t===null?NaN:+t}function*t_e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const n_e=oO(Ec),Sv=n_e.right;oO(tW).center;class GV extends Map{constructor(e,n=a_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(HV(this,e))}has(e){return super.has(HV(this,e))}set(e,n){return super.set(r_e(this,e),n)}delete(e){return super.delete(i_e(this,e))}}function HV({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function r_e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function i_e({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function a_e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function s_e(t=Ec){if(t===Ec)return nW;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function nW(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const o_e=Math.sqrt(50),l_e=Math.sqrt(10),c_e=Math.sqrt(2);function Fx(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=o_e?10:a>=l_e?5:a>=c_e?2:1;let o,c,d;return i<0?(d=Math.pow(10,-i)/s,o=Math.round(t*d),c=Math.round(e*d),o/d<t&&++o,c/d>e&&--c,d=-d):(d=Math.pow(10,i)*s,o=Math.round(t/d),c=Math.round(e/d),o*d<t&&++o,c*d>e&&--c),c<o&&.5<=n&&n<2?Fx(t,e,n*2):[o,c,d]}function FC(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Fx(e,t,n):Fx(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let d=0;d<o;++d)c[d]=(a-d)/-s;else for(let d=0;d<o;++d)c[d]=(a-d)*s;else if(s<0)for(let d=0;d<o;++d)c[d]=(i+d)/-s;else for(let d=0;d<o;++d)c[d]=(i+d)*s;return c}function $C(t,e,n){return e=+e,t=+t,n=+n,Fx(t,e,n)[2]}function qC(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?$C(e,t,n):$C(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function WV(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function YV(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function rW(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?nW:s_e(i);r>n;){if(r-n>600){const c=r-n+1,d=e-n+1,f=Math.log(c),h=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*h*(c-h)/c)*(d-c/2<0?-1:1),v=Math.max(n,Math.floor(e-d*h/c+g)),b=Math.min(r,Math.floor(e+(c-d)*h/c+g));rW(t,e,v,b,i)}const a=t[e];let s=n,o=r;for(dg(t,n,e),i(t[r],a)>0&&dg(t,n,r);s<o;){for(dg(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?dg(t,n,o):(++o,dg(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function dg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function u_e(t,e,n){if(t=Float64Array.from(t_e(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return YV(t);if(e>=1)return WV(t);var r,i=(r-1)*e,a=Math.floor(i),s=WV(rW(t,a).subarray(0,a+1)),o=YV(t.subarray(a+1));return s+(o-s)*(i-a)}}function d_e(t,e,n=tW){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function f_e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function qa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function _l(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const GC=Symbol("implicit");function lO(){var t=new GV,e=[],n=[],r=GC;function i(a){let s=t.get(a);if(s===void 0){if(r!==GC)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new GV;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return lO(e,n).unknown(r)},qa.apply(i,arguments),i}function cO(){var t=lO().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,d=0,f=.5;delete t.unknown;function h(){var g=e().length,v=i<r,b=v?i:r,x=v?r:i;a=(x-b)/Math.max(1,g-c+d*2),o&&(a=Math.floor(a)),b+=(x-b-a*(g-c))*f,s=a*(1-c),o&&(b=Math.round(b),s=Math.round(s));var w=f_e(g).map(function(_){return b+a*_});return n(v?w.reverse():w)}return t.domain=function(g){return arguments.length?(e(g),h()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(g){return arguments.length?(o=!!g,h()):o},t.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),h()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),h()):c},t.paddingOuter=function(g){return arguments.length?(d=+g,h()):d},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),h()):f},t.copy=function(){return cO(e(),[r,i]).round(o).paddingInner(c).paddingOuter(d).align(f)},qa.apply(h(),arguments)}function iW(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return iW(e())},t}function h_e(){return iW(cO.apply(null,arguments).paddingInner(1))}function uO(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function aW(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function _v(){}var Am=.7,$x=1/Am,Jf="\\s*([+-]?\\d+)\\s*",km="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",p_e=/^#([0-9a-f]{3,8})$/,g_e=new RegExp(`^rgb\\(${Jf},${Jf},${Jf}\\)$`),m_e=new RegExp(`^rgb\\(${oo},${oo},${oo}\\)$`),v_e=new RegExp(`^rgba\\(${Jf},${Jf},${Jf},${km}\\)$`),y_e=new RegExp(`^rgba\\(${oo},${oo},${oo},${km}\\)$`),b_e=new RegExp(`^hsl\\(${km},${oo},${oo}\\)$`),x_e=new RegExp(`^hsla\\(${km},${oo},${oo},${km}\\)$`),KV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uO(_v,Cm,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:XV,formatHex:XV,formatHex8:w_e,formatHsl:S_e,formatRgb:QV,toString:QV});function XV(){return this.rgb().formatHex()}function w_e(){return this.rgb().formatHex8()}function S_e(){return sW(this).formatHsl()}function QV(){return this.rgb().formatRgb()}function Cm(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=p_e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ZV(e):n===3?new Li(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Hy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Hy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=g_e.exec(t))?new Li(e[1],e[2],e[3],1):(e=m_e.exec(t))?new Li(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=v_e.exec(t))?Hy(e[1],e[2],e[3],e[4]):(e=y_e.exec(t))?Hy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=b_e.exec(t))?t6(e[1],e[2]/100,e[3]/100,1):(e=x_e.exec(t))?t6(e[1],e[2]/100,e[3]/100,e[4]):KV.hasOwnProperty(t)?ZV(KV[t]):t==="transparent"?new Li(NaN,NaN,NaN,0):null}function ZV(t){return new Li(t>>16&255,t>>8&255,t&255,1)}function Hy(t,e,n,r){return r<=0&&(t=e=n=NaN),new Li(t,e,n,r)}function __e(t){return t instanceof _v||(t=Cm(t)),t?(t=t.rgb(),new Li(t.r,t.g,t.b,t.opacity)):new Li}function HC(t,e,n,r){return arguments.length===1?__e(t):new Li(t,e,n,r??1)}function Li(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}uO(Li,HC,aW(_v,{brighter(t){return t=t==null?$x:Math.pow($x,t),new Li(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Am:Math.pow(Am,t),new Li(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Li(Qu(this.r),Qu(this.g),Qu(this.b),qx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:JV,formatHex:JV,formatHex8:E_e,formatRgb:e6,toString:e6}));function JV(){return`#${Fu(this.r)}${Fu(this.g)}${Fu(this.b)}`}function E_e(){return`#${Fu(this.r)}${Fu(this.g)}${Fu(this.b)}${Fu((isNaN(this.opacity)?1:this.opacity)*255)}`}function e6(){const t=qx(this.opacity);return`${t===1?"rgb(":"rgba("}${Qu(this.r)}, ${Qu(this.g)}, ${Qu(this.b)}${t===1?")":`, ${t})`}`}function qx(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Qu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Fu(t){return t=Qu(t),(t<16?"0":"")+t.toString(16)}function t6(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ls(t,e,n,r)}function sW(t){if(t instanceof ls)return new ls(t.h,t.s,t.l,t.opacity);if(t instanceof _v||(t=Cm(t)),!t)return new ls;if(t instanceof ls)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new ls(s,o,c,t.opacity)}function T_e(t,e,n,r){return arguments.length===1?sW(t):new ls(t,e,n,r??1)}function ls(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}uO(ls,T_e,aW(_v,{brighter(t){return t=t==null?$x:Math.pow($x,t),new ls(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Am:Math.pow(Am,t),new ls(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Li(gA(t>=240?t-240:t+120,i,r),gA(t,i,r),gA(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ls(n6(this.h),Wy(this.s),Wy(this.l),qx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qx(this.opacity);return`${t===1?"hsl(":"hsla("}${n6(this.h)}, ${Wy(this.s)*100}%, ${Wy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function n6(t){return t=(t||0)%360,t<0?t+360:t}function Wy(t){return Math.max(0,Math.min(1,t||0))}function gA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const dO=t=>()=>t;function A_e(t,e){return function(n){return t+n*e}}function k_e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function C_e(t){return(t=+t)==1?oW:function(e,n){return n-e?k_e(e,n,t):dO(isNaN(e)?n:e)}}function oW(t,e){var n=e-t;return n?A_e(t,n):dO(isNaN(t)?e:t)}const r6=(function t(e){var n=C_e(e);function r(i,a){var s=n((i=HC(i)).r,(a=HC(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),d=oW(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=d(f),i+""}}return r.gamma=t,r})(1);function N_e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function I_e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function O_e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Wh(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function P_e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Gx(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function D_e(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Wh(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var WC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mA=new RegExp(WC.source,"g");function R_e(t){return function(){return t}}function M_e(t){return function(e){return t(e)+""}}function j_e(t,e){var n=WC.lastIndex=mA.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=WC.exec(t))&&(i=mA.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Gx(r,i)})),n=mA.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?M_e(c[0].x):R_e(e):(e=c.length,function(d){for(var f=0,h;f<e;++f)o[(h=c[f]).i]=h.x(d);return o.join("")})}function Wh(t,e){var n=typeof e,r;return e==null||n==="boolean"?dO(e):(n==="number"?Gx:n==="string"?(r=Cm(e))?(e=r,r6):j_e:e instanceof Cm?r6:e instanceof Date?P_e:I_e(e)?N_e:Array.isArray(e)?O_e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?D_e:Gx)(t,e)}function fO(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function z_e(t,e){e===void 0&&(e=t,t=Wh);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function L_e(t){return function(){return t}}function Hx(t){return+t}var i6=[0,1];function yi(t){return t}function YC(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:L_e(isNaN(e)?NaN:.5)}function V_e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function B_e(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=YC(i,r),a=n(s,a)):(r=YC(r,i),a=n(a,s)),function(o){return a(r(o))}}function U_e(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=YC(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=Sv(t,o,1,r)-1;return a[c](i[c](o))}}function Ev(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ow(){var t=i6,e=i6,n=Wh,r,i,a,s=yi,o,c,d;function f(){var g=Math.min(t.length,e.length);return s!==yi&&(s=V_e(t[0],t[g-1])),o=g>2?U_e:B_e,c=d=null,h}function h(g){return g==null||isNaN(g=+g)?a:(c||(c=o(t.map(r),e,n)))(r(s(g)))}return h.invert=function(g){return s(i((d||(d=o(e,t.map(r),Gx)))(g)))},h.domain=function(g){return arguments.length?(t=Array.from(g,Hx),f()):t.slice()},h.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},h.rangeRound=function(g){return e=Array.from(g),n=fO,f()},h.clamp=function(g){return arguments.length?(s=g?!0:yi,f()):s!==yi},h.interpolate=function(g){return arguments.length?(n=g,f()):n},h.unknown=function(g){return arguments.length?(a=g,h):a},function(g,v){return r=g,i=v,f()}}function hO(){return Ow()(yi,yi)}function F_e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Wx(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Eh(t){return t=Wx(Math.abs(t)),t?t[1]:NaN}function $_e(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function q_e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var G_e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nm(t){if(!(e=G_e.exec(t)))throw new Error("invalid format: "+t);var e;return new pO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Nm.prototype=pO.prototype;function pO(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}pO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function H_e(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var lW;function W_e(t,e){var n=Wx(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(lW=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Wx(t,Math.max(0,e+a-1))[0]}function a6(t,e){var n=Wx(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const s6={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:F_e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>a6(t*100,e),r:a6,s:W_e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function o6(t){return t}var l6=Array.prototype.map,c6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Y_e(t){var e=t.grouping===void 0||t.thousands===void 0?o6:$_e(l6.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?o6:q_e(l6.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(h){h=Nm(h);var g=h.fill,v=h.align,b=h.sign,x=h.symbol,w=h.zero,_=h.width,T=h.comma,N=h.precision,D=h.trim,P=h.type;P==="n"?(T=!0,P="g"):s6[P]||(N===void 0&&(N=12),D=!0,P="g"),(w||g==="0"&&v==="=")&&(w=!0,g="0",v="=");var O=x==="$"?n:x==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",C=x==="$"?r:/[%p]/.test(P)?s:"",I=s6[P],R=/[defgprs%]/.test(P);N=N===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function j(L){var B=O,z=C,Y,Z,G;if(P==="c")z=I(L)+z,L="";else{L=+L;var K=L<0||1/L<0;if(L=isNaN(L)?c:I(Math.abs(L),N),D&&(L=H_e(L)),K&&+L==0&&b!=="+"&&(K=!1),B=(K?b==="("?b:o:b==="-"||b==="("?"":b)+B,z=(P==="s"?c6[8+lW/3]:"")+z+(K&&b==="("?")":""),R){for(Y=-1,Z=L.length;++Y<Z;)if(G=L.charCodeAt(Y),48>G||G>57){z=(G===46?i+L.slice(Y+1):L.slice(Y))+z,L=L.slice(0,Y);break}}}T&&!w&&(L=e(L,1/0));var X=B.length+L.length+z.length,ee=X<_?new Array(_-X+1).join(g):"";switch(T&&w&&(L=e(ee+L,ee.length?_-z.length:1/0),ee=""),v){case"<":L=B+L+z+ee;break;case"=":L=B+ee+L+z;break;case"^":L=ee.slice(0,X=ee.length>>1)+B+L+z+ee.slice(X);break;default:L=ee+B+L+z;break}return a(L)}return j.toString=function(){return h+""},j}function f(h,g){var v=d((h=Nm(h),h.type="f",h)),b=Math.max(-8,Math.min(8,Math.floor(Eh(g)/3)))*3,x=Math.pow(10,-b),w=c6[8+b/3];return function(_){return v(x*_)+w}}return{format:d,formatPrefix:f}}var Yy,gO,cW;K_e({thousands:",",grouping:[3],currency:["$",""]});function K_e(t){return Yy=Y_e(t),gO=Yy.format,cW=Yy.formatPrefix,Yy}function X_e(t){return Math.max(0,-Eh(Math.abs(t)))}function Q_e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Eh(e)/3)))*3-Eh(Math.abs(t)))}function Z_e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Eh(e)-Eh(t))+1}function uW(t,e,n,r){var i=qC(t,e,n),a;switch(r=Nm(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Q_e(i,s))&&(r.precision=a),cW(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Z_e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=X_e(i))&&(r.precision=a-(r.type==="%")*2);break}}return gO(r)}function Yc(t){var e=t.domain;return t.ticks=function(n){var r=e();return FC(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return uW(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,d,f=10;for(o<s&&(d=s,s=o,o=d,d=i,i=a,a=d);f-- >0;){if(d=$C(s,o,n),d===c)return r[i]=s,r[a]=o,e(r);if(d>0)s=Math.floor(s/d)*d,o=Math.ceil(o/d)*d;else if(d<0)s=Math.ceil(s*d)/d,o=Math.floor(o*d)/d;else break;c=d}return t},t}function dW(){var t=hO();return t.copy=function(){return Ev(t,dW())},qa.apply(t,arguments),Yc(t)}function fW(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Hx),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return fW(t).unknown(e)},t=arguments.length?Array.from(t,Hx):[0,1],Yc(n)}function hW(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function u6(t){return Math.log(t)}function d6(t){return Math.exp(t)}function J_e(t){return-Math.log(-t)}function eEe(t){return-Math.exp(-t)}function tEe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function nEe(t){return t===10?tEe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function rEe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function f6(t){return(e,n)=>-t(-e,n)}function mO(t){const e=t(u6,d6),n=e.domain;let r=10,i,a;function s(){return i=rEe(r),a=nEe(r),n()[0]<0?(i=f6(i),a=f6(a),t(J_e,eEe)):t(u6,d6),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let d=c[0],f=c[c.length-1];const h=f<d;h&&([d,f]=[f,d]);let g=i(d),v=i(f),b,x;const w=o==null?10:+o;let _=[];if(!(r%1)&&v-g<w){if(g=Math.floor(g),v=Math.ceil(v),d>0){for(;g<=v;++g)for(b=1;b<r;++b)if(x=g<0?b/a(-g):b*a(g),!(x<d)){if(x>f)break;_.push(x)}}else for(;g<=v;++g)for(b=r-1;b>=1;--b)if(x=g>0?b/a(-g):b*a(g),!(x<d)){if(x>f)break;_.push(x)}_.length*2<w&&(_=FC(d,f,w))}else _=FC(g,v,Math.min(v-g,w)).map(a);return h?_.reverse():_},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Nm(c)).precision==null&&(c.trim=!0),c=gO(c)),o===1/0)return c;const d=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=d?c(f):""}},e.nice=()=>n(hW(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function pW(){const t=mO(Ow()).domain([1,10]);return t.copy=()=>Ev(t,pW()).base(t.base()),qa.apply(t,arguments),t}function h6(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function p6(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function vO(t){var e=1,n=t(h6(e),p6(e));return n.constant=function(r){return arguments.length?t(h6(e=+r),p6(e)):e},Yc(n)}function gW(){var t=vO(Ow());return t.copy=function(){return Ev(t,gW()).constant(t.constant())},qa.apply(t,arguments)}function g6(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function iEe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function aEe(t){return t<0?-t*t:t*t}function yO(t){var e=t(yi,yi),n=1;function r(){return n===1?t(yi,yi):n===.5?t(iEe,aEe):t(g6(n),g6(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Yc(e)}function bO(){var t=yO(Ow());return t.copy=function(){return Ev(t,bO()).exponent(t.exponent())},qa.apply(t,arguments),t}function sEe(){return bO.apply(null,arguments).exponent(.5)}function m6(t){return Math.sign(t)*t*t}function oEe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function mW(){var t=hO(),e=[0,1],n=!1,r;function i(a){var s=oEe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(m6(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Hx)).map(m6)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return mW(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},qa.apply(i,arguments),Yc(i)}function vW(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=d_e(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[Sv(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Ec),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return vW().domain(t).range(e).unknown(r)},qa.apply(a,arguments)}function yW(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[Sv(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,r[0]]:d>=n?[r[n-1],e]:[r[d-1],r[d]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return yW().domain([t,e]).range(i).unknown(a)},qa.apply(Yc(s),arguments)}function bW(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Sv(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return bW().domain(t).range(e).unknown(n)},qa.apply(i,arguments)}const vA=new Date,yA=new Date;function br(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let d;do c.push(d=new Date(+a)),e(a,o),t(a);while(d<a&&a<s);return c},i.filter=a=>br(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(vA.setTime(+a),yA.setTime(+s),t(vA),t(yA),Math.floor(n(vA,yA))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Yx=br(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Yx.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?br(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Yx);Yx.range;const Ho=1e3,Pa=Ho*60,Wo=Pa*60,pl=Wo*24,xO=pl*7,v6=pl*30,bA=pl*365,$u=br(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ho)},(t,e)=>(e-t)/Ho,t=>t.getUTCSeconds());$u.range;const wO=br(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ho)},(t,e)=>{t.setTime(+t+e*Pa)},(t,e)=>(e-t)/Pa,t=>t.getMinutes());wO.range;const SO=br(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Pa)},(t,e)=>(e-t)/Pa,t=>t.getUTCMinutes());SO.range;const _O=br(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ho-t.getMinutes()*Pa)},(t,e)=>{t.setTime(+t+e*Wo)},(t,e)=>(e-t)/Wo,t=>t.getHours());_O.range;const EO=br(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Wo)},(t,e)=>(e-t)/Wo,t=>t.getUTCHours());EO.range;const Tv=br(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Pa)/pl,t=>t.getDate()-1);Tv.range;const Pw=br(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pl,t=>t.getUTCDate()-1);Pw.range;const xW=br(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pl,t=>Math.floor(t/pl));xW.range;function Ad(t){return br(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Pa)/xO)}const Dw=Ad(0),Kx=Ad(1),lEe=Ad(2),cEe=Ad(3),Th=Ad(4),uEe=Ad(5),dEe=Ad(6);Dw.range;Kx.range;lEe.range;cEe.range;Th.range;uEe.range;dEe.range;function kd(t){return br(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/xO)}const Rw=kd(0),Xx=kd(1),fEe=kd(2),hEe=kd(3),Ah=kd(4),pEe=kd(5),gEe=kd(6);Rw.range;Xx.range;fEe.range;hEe.range;Ah.range;pEe.range;gEe.range;const TO=br(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());TO.range;const AO=br(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());AO.range;const gl=br(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());gl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:br(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});gl.range;const ml=br(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ml.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:br(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ml.range;function wW(t,e,n,r,i,a){const s=[[$u,1,Ho],[$u,5,5*Ho],[$u,15,15*Ho],[$u,30,30*Ho],[a,1,Pa],[a,5,5*Pa],[a,15,15*Pa],[a,30,30*Pa],[i,1,Wo],[i,3,3*Wo],[i,6,6*Wo],[i,12,12*Wo],[r,1,pl],[r,2,2*pl],[n,1,xO],[e,1,v6],[e,3,3*v6],[t,1,bA]];function o(d,f,h){const g=f<d;g&&([d,f]=[f,d]);const v=h&&typeof h.range=="function"?h:c(d,f,h),b=v?v.range(d,+f+1):[];return g?b.reverse():b}function c(d,f,h){const g=Math.abs(f-d)/h,v=oO(([,,w])=>w).right(s,g);if(v===s.length)return t.every(qC(d/bA,f/bA,h));if(v===0)return Yx.every(Math.max(qC(d,f,h),1));const[b,x]=s[g/s[v-1][2]<s[v][2]/g?v-1:v];return b.every(x)}return[o,c]}const[mEe,vEe]=wW(ml,AO,Rw,xW,EO,SO),[yEe,bEe]=wW(gl,TO,Dw,Tv,_O,wO);function xA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function wA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function fg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function xEe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,d=hg(i),f=pg(i),h=hg(a),g=pg(a),v=hg(s),b=pg(s),x=hg(o),w=pg(o),_=hg(c),T=pg(c),N={a:K,A:X,b:ee,B:J,c:null,d:_6,e:_6,f:$Ee,g:JEe,G:tTe,H:BEe,I:UEe,j:FEe,L:SW,m:qEe,M:GEe,p:F,q:Q,Q:A6,s:k6,S:HEe,u:WEe,U:YEe,V:KEe,w:XEe,W:QEe,x:null,X:null,y:ZEe,Y:eTe,Z:nTe,"%":T6},D={a:te,A:W,b:ue,B:re,c:null,d:E6,e:E6,f:sTe,g:mTe,G:yTe,H:rTe,I:iTe,j:aTe,L:EW,m:oTe,M:lTe,p:oe,q:we,Q:A6,s:k6,S:cTe,u:uTe,U:dTe,V:fTe,w:hTe,W:pTe,x:null,X:null,y:gTe,Y:vTe,Z:bTe,"%":T6},P={a:j,A:L,b:B,B:z,c:Y,d:w6,e:w6,f:jEe,g:x6,G:b6,H:S6,I:S6,j:PEe,L:MEe,m:OEe,M:DEe,p:R,q:IEe,Q:LEe,s:VEe,S:REe,u:TEe,U:AEe,V:kEe,w:EEe,W:CEe,x:Z,X:G,y:x6,Y:b6,Z:NEe,"%":zEe};N.x=O(n,N),N.X=O(r,N),N.c=O(e,N),D.x=O(n,D),D.X=O(r,D),D.c=O(e,D);function O(se,Ee){return function(ge){var ne=[],Ie=-1,ye=0,Se=se.length,Oe,Pe,Ge;for(ge instanceof Date||(ge=new Date(+ge));++Ie<Se;)se.charCodeAt(Ie)===37&&(ne.push(se.slice(ye,Ie)),(Pe=y6[Oe=se.charAt(++Ie)])!=null?Oe=se.charAt(++Ie):Pe=Oe==="e"?" ":"0",(Ge=Ee[Oe])&&(Oe=Ge(ge,Pe)),ne.push(Oe),ye=Ie+1);return ne.push(se.slice(ye,Ie)),ne.join("")}}function C(se,Ee){return function(ge){var ne=fg(1900,void 0,1),Ie=I(ne,se,ge+="",0),ye,Se;if(Ie!=ge.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(Ee&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(ye=wA(fg(ne.y,0,1)),Se=ye.getUTCDay(),ye=Se>4||Se===0?Xx.ceil(ye):Xx(ye),ye=Pw.offset(ye,(ne.V-1)*7),ne.y=ye.getUTCFullYear(),ne.m=ye.getUTCMonth(),ne.d=ye.getUTCDate()+(ne.w+6)%7):(ye=xA(fg(ne.y,0,1)),Se=ye.getDay(),ye=Se>4||Se===0?Kx.ceil(ye):Kx(ye),ye=Tv.offset(ye,(ne.V-1)*7),ne.y=ye.getFullYear(),ne.m=ye.getMonth(),ne.d=ye.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),Se="Z"in ne?wA(fg(ne.y,0,1)).getUTCDay():xA(fg(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(Se+5)%7:ne.w+ne.U*7-(Se+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,wA(ne)):xA(ne)}}function I(se,Ee,ge,ne){for(var Ie=0,ye=Ee.length,Se=ge.length,Oe,Pe;Ie<ye;){if(ne>=Se)return-1;if(Oe=Ee.charCodeAt(Ie++),Oe===37){if(Oe=Ee.charAt(Ie++),Pe=P[Oe in y6?Ee.charAt(Ie++):Oe],!Pe||(ne=Pe(se,ge,ne))<0)return-1}else if(Oe!=ge.charCodeAt(ne++))return-1}return ne}function R(se,Ee,ge){var ne=d.exec(Ee.slice(ge));return ne?(se.p=f.get(ne[0].toLowerCase()),ge+ne[0].length):-1}function j(se,Ee,ge){var ne=v.exec(Ee.slice(ge));return ne?(se.w=b.get(ne[0].toLowerCase()),ge+ne[0].length):-1}function L(se,Ee,ge){var ne=h.exec(Ee.slice(ge));return ne?(se.w=g.get(ne[0].toLowerCase()),ge+ne[0].length):-1}function B(se,Ee,ge){var ne=_.exec(Ee.slice(ge));return ne?(se.m=T.get(ne[0].toLowerCase()),ge+ne[0].length):-1}function z(se,Ee,ge){var ne=x.exec(Ee.slice(ge));return ne?(se.m=w.get(ne[0].toLowerCase()),ge+ne[0].length):-1}function Y(se,Ee,ge){return I(se,e,Ee,ge)}function Z(se,Ee,ge){return I(se,n,Ee,ge)}function G(se,Ee,ge){return I(se,r,Ee,ge)}function K(se){return s[se.getDay()]}function X(se){return a[se.getDay()]}function ee(se){return c[se.getMonth()]}function J(se){return o[se.getMonth()]}function F(se){return i[+(se.getHours()>=12)]}function Q(se){return 1+~~(se.getMonth()/3)}function te(se){return s[se.getUTCDay()]}function W(se){return a[se.getUTCDay()]}function ue(se){return c[se.getUTCMonth()]}function re(se){return o[se.getUTCMonth()]}function oe(se){return i[+(se.getUTCHours()>=12)]}function we(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var Ee=O(se+="",N);return Ee.toString=function(){return se},Ee},parse:function(se){var Ee=C(se+="",!1);return Ee.toString=function(){return se},Ee},utcFormat:function(se){var Ee=O(se+="",D);return Ee.toString=function(){return se},Ee},utcParse:function(se){var Ee=C(se+="",!0);return Ee.toString=function(){return se},Ee}}}var y6={"-":"",_:" ",0:"0"},Dr=/^\s*\d+/,wEe=/^%/,SEe=/[\\^$*+?|[\]().{}]/g;function Ot(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function _Ee(t){return t.replace(SEe,"\\$&")}function hg(t){return new RegExp("^(?:"+t.map(_Ee).join("|")+")","i")}function pg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function EEe(t,e,n){var r=Dr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function TEe(t,e,n){var r=Dr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function AEe(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function kEe(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function CEe(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function b6(t,e,n){var r=Dr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function x6(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function NEe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function IEe(t,e,n){var r=Dr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function OEe(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function w6(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function PEe(t,e,n){var r=Dr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function S6(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function DEe(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function REe(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function MEe(t,e,n){var r=Dr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function jEe(t,e,n){var r=Dr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function zEe(t,e,n){var r=wEe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function LEe(t,e,n){var r=Dr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function VEe(t,e,n){var r=Dr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function _6(t,e){return Ot(t.getDate(),e,2)}function BEe(t,e){return Ot(t.getHours(),e,2)}function UEe(t,e){return Ot(t.getHours()%12||12,e,2)}function FEe(t,e){return Ot(1+Tv.count(gl(t),t),e,3)}function SW(t,e){return Ot(t.getMilliseconds(),e,3)}function $Ee(t,e){return SW(t,e)+"000"}function qEe(t,e){return Ot(t.getMonth()+1,e,2)}function GEe(t,e){return Ot(t.getMinutes(),e,2)}function HEe(t,e){return Ot(t.getSeconds(),e,2)}function WEe(t){var e=t.getDay();return e===0?7:e}function YEe(t,e){return Ot(Dw.count(gl(t)-1,t),e,2)}function _W(t){var e=t.getDay();return e>=4||e===0?Th(t):Th.ceil(t)}function KEe(t,e){return t=_W(t),Ot(Th.count(gl(t),t)+(gl(t).getDay()===4),e,2)}function XEe(t){return t.getDay()}function QEe(t,e){return Ot(Kx.count(gl(t)-1,t),e,2)}function ZEe(t,e){return Ot(t.getFullYear()%100,e,2)}function JEe(t,e){return t=_W(t),Ot(t.getFullYear()%100,e,2)}function eTe(t,e){return Ot(t.getFullYear()%1e4,e,4)}function tTe(t,e){var n=t.getDay();return t=n>=4||n===0?Th(t):Th.ceil(t),Ot(t.getFullYear()%1e4,e,4)}function nTe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ot(e/60|0,"0",2)+Ot(e%60,"0",2)}function E6(t,e){return Ot(t.getUTCDate(),e,2)}function rTe(t,e){return Ot(t.getUTCHours(),e,2)}function iTe(t,e){return Ot(t.getUTCHours()%12||12,e,2)}function aTe(t,e){return Ot(1+Pw.count(ml(t),t),e,3)}function EW(t,e){return Ot(t.getUTCMilliseconds(),e,3)}function sTe(t,e){return EW(t,e)+"000"}function oTe(t,e){return Ot(t.getUTCMonth()+1,e,2)}function lTe(t,e){return Ot(t.getUTCMinutes(),e,2)}function cTe(t,e){return Ot(t.getUTCSeconds(),e,2)}function uTe(t){var e=t.getUTCDay();return e===0?7:e}function dTe(t,e){return Ot(Rw.count(ml(t)-1,t),e,2)}function TW(t){var e=t.getUTCDay();return e>=4||e===0?Ah(t):Ah.ceil(t)}function fTe(t,e){return t=TW(t),Ot(Ah.count(ml(t),t)+(ml(t).getUTCDay()===4),e,2)}function hTe(t){return t.getUTCDay()}function pTe(t,e){return Ot(Xx.count(ml(t)-1,t),e,2)}function gTe(t,e){return Ot(t.getUTCFullYear()%100,e,2)}function mTe(t,e){return t=TW(t),Ot(t.getUTCFullYear()%100,e,2)}function vTe(t,e){return Ot(t.getUTCFullYear()%1e4,e,4)}function yTe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ah(t):Ah.ceil(t),Ot(t.getUTCFullYear()%1e4,e,4)}function bTe(){return"+0000"}function T6(){return"%"}function A6(t){return+t}function k6(t){return Math.floor(+t/1e3)}var Sf,AW,kW;xTe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xTe(t){return Sf=xEe(t),AW=Sf.format,Sf.parse,kW=Sf.utcFormat,Sf.utcParse,Sf}function wTe(t){return new Date(t)}function STe(t){return t instanceof Date?+t:+new Date(+t)}function kO(t,e,n,r,i,a,s,o,c,d){var f=hO(),h=f.invert,g=f.domain,v=d(".%L"),b=d(":%S"),x=d("%I:%M"),w=d("%I %p"),_=d("%a %d"),T=d("%b %d"),N=d("%B"),D=d("%Y");function P(O){return(c(O)<O?v:o(O)<O?b:s(O)<O?x:a(O)<O?w:r(O)<O?i(O)<O?_:T:n(O)<O?N:D)(O)}return f.invert=function(O){return new Date(h(O))},f.domain=function(O){return arguments.length?g(Array.from(O,STe)):g().map(wTe)},f.ticks=function(O){var C=g();return t(C[0],C[C.length-1],O??10)},f.tickFormat=function(O,C){return C==null?P:d(C)},f.nice=function(O){var C=g();return(!O||typeof O.range!="function")&&(O=e(C[0],C[C.length-1],O??10)),O?g(hW(C,O)):f},f.copy=function(){return Ev(f,kO(t,e,n,r,i,a,s,o,c,d))},f}function _Te(){return qa.apply(kO(yEe,bEe,gl,TO,Dw,Tv,_O,wO,$u,AW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ETe(){return qa.apply(kO(mEe,vEe,ml,AO,Rw,Pw,EO,SO,$u,kW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Mw(){var t=0,e=1,n,r,i,a,s=yi,o=!1,c;function d(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),d):[t,e]},d.clamp=function(h){return arguments.length?(o=!!h,d):o},d.interpolator=function(h){return arguments.length?(s=h,d):s};function f(h){return function(g){var v,b;return arguments.length?([v,b]=g,s=h(v,b),d):[s(0),s(1)]}}return d.range=f(Wh),d.rangeRound=f(fO),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),d}}function Kc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function CW(){var t=Yc(Mw()(yi));return t.copy=function(){return Kc(t,CW())},_l.apply(t,arguments)}function NW(){var t=mO(Mw()).domain([1,10]);return t.copy=function(){return Kc(t,NW()).base(t.base())},_l.apply(t,arguments)}function IW(){var t=vO(Mw());return t.copy=function(){return Kc(t,IW()).constant(t.constant())},_l.apply(t,arguments)}function CO(){var t=yO(Mw());return t.copy=function(){return Kc(t,CO()).exponent(t.exponent())},_l.apply(t,arguments)}function TTe(){return CO.apply(null,arguments).exponent(.5)}function OW(){var t=[],e=yi;function n(r){if(r!=null&&!isNaN(r=+r))return e((Sv(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ec),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>u_e(t,a/r))},n.copy=function(){return OW(e).domain(t)},_l.apply(n,arguments)}function jw(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,d=yi,f,h=!1,g;function v(x){return isNaN(x=+x)?g:(x=.5+((x=+f(x))-a)*(r*x<r*a?o:c),d(h?Math.max(0,Math.min(1,x)):x))}v.domain=function(x){return arguments.length?([t,e,n]=x,i=f(t=+t),a=f(e=+e),s=f(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,v):[t,e,n]},v.clamp=function(x){return arguments.length?(h=!!x,v):h},v.interpolator=function(x){return arguments.length?(d=x,v):d};function b(x){return function(w){var _,T,N;return arguments.length?([_,T,N]=w,d=z_e(x,[_,T,N]),v):[d(0),d(.5),d(1)]}}return v.range=b(Wh),v.rangeRound=b(fO),v.unknown=function(x){return arguments.length?(g=x,v):g},function(x){return f=x,i=x(t),a=x(e),s=x(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,v}}function PW(){var t=Yc(jw()(yi));return t.copy=function(){return Kc(t,PW())},_l.apply(t,arguments)}function DW(){var t=mO(jw()).domain([.1,1,10]);return t.copy=function(){return Kc(t,DW()).base(t.base())},_l.apply(t,arguments)}function RW(){var t=vO(jw());return t.copy=function(){return Kc(t,RW()).constant(t.constant())},_l.apply(t,arguments)}function NO(){var t=yO(jw());return t.copy=function(){return Kc(t,NO()).exponent(t.exponent())},_l.apply(t,arguments)}function ATe(){return NO.apply(null,arguments).exponent(.5)}const Ng=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:cO,scaleDiverging:PW,scaleDivergingLog:DW,scaleDivergingPow:NO,scaleDivergingSqrt:ATe,scaleDivergingSymlog:RW,scaleIdentity:fW,scaleImplicit:GC,scaleLinear:dW,scaleLog:pW,scaleOrdinal:lO,scalePoint:h_e,scalePow:bO,scaleQuantile:vW,scaleQuantize:yW,scaleRadial:mW,scaleSequential:CW,scaleSequentialLog:NW,scaleSequentialPow:CO,scaleSequentialQuantile:OW,scaleSequentialSqrt:TTe,scaleSequentialSymlog:IW,scaleSqrt:sEe,scaleSymlog:gW,scaleThreshold:bW,scaleTime:_Te,scaleUtc:ETe,tickFormat:uW},Symbol.toStringTag,{value:"Module"}));var El=t=>t.chartData,zw=me([El],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),MW=(t,e,n,r)=>r?zw(t):El(t),kTe=(t,e,n)=>n?zw(t):El(t);function Vc(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(en(e)&&en(n))return!0}return!1}function C6(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function jW(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(en(n))i=n;else if(typeof n=="function")return;if(en(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(Vc(s))return s}}function CTe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Vc(r))return C6(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(qe(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&U5.test(i)){var c=U5.exec(i);if(c==null||c[1]==null||e==null)s=void 0;else{var d=+c[1];s=e[0]-d}}else s=e?.[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(qe(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e?.[1]))}catch{}else if(typeof a=="string"&&F5.test(a)){var f=F5.exec(a);if(f==null||f[1]==null||e==null)o=void 0;else{var h=+f[1];o=e[1]+h}}else o=e?.[1];var g=[s,o];if(Vc(g))return e==null?g:C6(g,e,n)}}}var Yh=1e9,NTe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},OO,xn=!0,Ba="[DecimalError] ",Zu=Ba+"Invalid argument: ",IO=Ba+"Exponent out of range: ",Kh=Math.floor,Ou=Math.pow,ITe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ia,Nr=1e7,fn=7,zW=9007199254740991,Qx=Kh(zW/fn),Be={};Be.absoluteValue=Be.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Be.comparedTo=Be.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Be.decimalPlaces=Be.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*fn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Be.dividedBy=Be.div=function(t){return el(this,new this.constructor(t))};Be.dividedToIntegerBy=Be.idiv=function(t){var e=this,n=e.constructor;return tn(el(e,new n(t),0,1),n.precision)};Be.equals=Be.eq=function(t){return!this.cmp(t)};Be.exponent=function(){return or(this)};Be.greaterThan=Be.gt=function(t){return this.cmp(t)>0};Be.greaterThanOrEqualTo=Be.gte=function(t){return this.cmp(t)>=0};Be.isInteger=Be.isint=function(){return this.e>this.d.length-2};Be.isNegative=Be.isneg=function(){return this.s<0};Be.isPositive=Be.ispos=function(){return this.s>0};Be.isZero=function(){return this.s===0};Be.lessThan=Be.lt=function(t){return this.cmp(t)<0};Be.lessThanOrEqualTo=Be.lte=function(t){return this.cmp(t)<1};Be.logarithm=Be.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ia))throw Error(Ba+"NaN");if(n.s<1)throw Error(Ba+(n.s?"NaN":"-Infinity"));return n.eq(ia)?new r(0):(xn=!1,e=el(Im(n,a),Im(t,a),a),xn=!0,tn(e,i))};Be.minus=Be.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?BW(e,t):LW(e,(t.s=-t.s,t))};Be.modulo=Be.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ba+"NaN");return n.s?(xn=!1,e=el(n,t,0,1).times(t),xn=!0,n.minus(e)):tn(new r(n),i)};Be.naturalExponential=Be.exp=function(){return VW(this)};Be.naturalLogarithm=Be.ln=function(){return Im(this)};Be.negated=Be.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Be.plus=Be.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?LW(e,t):BW(e,(t.s=-t.s,t))};Be.precision=Be.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Zu+t);if(e=or(i)+1,r=i.d.length-1,n=r*fn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Be.squareRoot=Be.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Ba+"NaN")}for(t=or(o),xn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Xs(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Kh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(el(o,a,s+2)).times(.5),Xs(a.d).slice(0,s)===(e=Xs(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(tn(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return xn=!0,tn(r,n)};Be.times=Be.mul=function(t){var e,n,r,i,a,s,o,c,d,f=this,h=f.constructor,g=f.d,v=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,d=v.length,c<d&&(a=g,g=v,v=a,s=c,c=d,d=s),a=[],s=c+d,r=s;r--;)a.push(0);for(r=d;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+v[r]*g[i-r-1]+e,a[i--]=o%Nr|0,e=o/Nr|0;a[i]=(a[i]+e)%Nr|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,xn?tn(t,h.precision):t};Be.toDecimalPlaces=Be.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ho(t,0,Yh),e===void 0?e=r.rounding:ho(e,0,8),tn(n,t+or(n)+1,e))};Be.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=hd(r,!0):(ho(t,0,Yh),e===void 0?e=i.rounding:ho(e,0,8),r=tn(new i(r),t+1,e),n=hd(r,!0,t+1)),n};Be.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?hd(i):(ho(t,0,Yh),e===void 0?e=a.rounding:ho(e,0,8),r=tn(new a(i),t+or(i)+1,e),n=hd(r.abs(),!1,t+or(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Be.toInteger=Be.toint=function(){var t=this,e=t.constructor;return tn(new e(t),or(t)+1,e.rounding)};Be.toNumber=function(){return+this};Be.toPower=Be.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,d=12,f=+(t=new c(t));if(!t.s)return new c(ia);if(o=new c(o),!o.s){if(t.s<1)throw Error(Ba+"Infinity");return o}if(o.eq(ia))return o;if(r=c.precision,t.eq(ia))return tn(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=f<0?-f:f)<=zW){for(i=new c(ia),e=Math.ceil(r/fn+4),xn=!1;n%2&&(i=i.times(o),I6(i.d,e)),n=Kh(n/2),n!==0;)o=o.times(o),I6(o.d,e);return xn=!0,t.s<0?new c(ia).div(i):tn(i,r)}}else if(a<0)throw Error(Ba+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,xn=!1,i=t.times(Im(o,r+d)),xn=!0,i=VW(i),i.s=a,i};Be.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=or(i),r=hd(i,n<=a.toExpNeg||n>=a.toExpPos)):(ho(t,1,Yh),e===void 0?e=a.rounding:ho(e,0,8),i=tn(new a(i),t,e),n=or(i),r=hd(i,t<=n||n<=a.toExpNeg,t)),r};Be.toSignificantDigits=Be.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ho(t,1,Yh),e===void 0?e=r.rounding:ho(e,0,8)),tn(new r(n),t,e)};Be.toString=Be.valueOf=Be.val=Be.toJSON=Be[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=or(t),n=t.constructor;return hd(t,e<=n.toExpNeg||e>=n.toExpPos)};function LW(t,e){var n,r,i,a,s,o,c,d,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),xn?tn(e,h):e;if(c=t.d,d=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=d.length):(r=d,i=s,o=c.length),s=Math.ceil(h/fn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=d.length,o-a<0&&(a=o,r=d,d=c,c=r),n=0;a;)n=(c[--a]=c[a]+d[a]+n)/Nr|0,c[a]%=Nr;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,xn?tn(e,h):e}function ho(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Zu+t)}function Xs(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=fn-r.length,n&&(a+=oc(n)),a+=r;s=t[e],r=s+"",n=fn-r.length,n&&(a+=oc(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var el=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Nr|0,s=a/Nr|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Nr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,d,f,h,g,v,b,x,w,_,T,N,D,P,O,C,I,R=r.constructor,j=r.s==i.s?1:-1,L=r.d,B=i.d;if(!r.s)return new R(r);if(!i.s)throw Error(Ba+"Division by zero");for(c=r.e-i.e,C=B.length,P=L.length,v=new R(j),b=v.d=[],d=0;B[d]==(L[d]||0);)++d;if(B[d]>(L[d]||0)&&--c,a==null?T=a=R.precision:s?T=a+(or(r)-or(i))+1:T=a,T<0)return new R(0);if(T=T/fn+2|0,d=0,C==1)for(f=0,B=B[0],T++;(d<P||f)&&T--;d++)N=f*Nr+(L[d]||0),b[d]=N/B|0,f=N%B|0;else{for(f=Nr/(B[0]+1)|0,f>1&&(B=t(B,f),L=t(L,f),C=B.length,P=L.length),D=C,x=L.slice(0,C),w=x.length;w<C;)x[w++]=0;I=B.slice(),I.unshift(0),O=B[0],B[1]>=Nr/2&&++O;do f=0,o=e(B,x,C,w),o<0?(_=x[0],C!=w&&(_=_*Nr+(x[1]||0)),f=_/O|0,f>1?(f>=Nr&&(f=Nr-1),h=t(B,f),g=h.length,w=x.length,o=e(h,x,g,w),o==1&&(f--,n(h,C<g?I:B,g))):(f==0&&(o=f=1),h=B.slice()),g=h.length,g<w&&h.unshift(0),n(x,h,w),o==-1&&(w=x.length,o=e(B,x,C,w),o<1&&(f++,n(x,C<w?I:B,w))),w=x.length):o===0&&(f++,x=[0]),b[d++]=f,o&&x[0]?x[w++]=L[D]||0:(x=[L[D]],w=1);while((D++<P||x[0]!==void 0)&&T--)}return b[0]||b.shift(),v.e=c,tn(v,s?a+or(v)+1:a)}})();function VW(t,e){var n,r,i,a,s,o,c=0,d=0,f=t.constructor,h=f.precision;if(or(t)>16)throw Error(IO+or(t));if(!t.s)return new f(ia);for(xn=!1,o=h,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),d+=5;for(r=Math.log(Ou(2,d))/Math.LN10*2+5|0,o+=r,n=i=a=new f(ia),f.precision=o;;){if(i=tn(i.times(t),o),n=n.times(++c),s=a.plus(el(i,n,o)),Xs(s.d).slice(0,o)===Xs(a.d).slice(0,o)){for(;d--;)a=tn(a.times(a),o);return f.precision=h,e==null?(xn=!0,tn(a,h)):a}a=s}}function or(t){for(var e=t.e*fn,n=t.d[0];n>=10;n/=10)e++;return e}function SA(t,e,n){if(e>t.LN10.sd())throw xn=!0,n&&(t.precision=n),Error(Ba+"LN10 precision limit exceeded");return tn(new t(t.LN10),e)}function oc(t){for(var e="";t--;)e+="0";return e}function Im(t,e){var n,r,i,a,s,o,c,d,f,h=1,g=10,v=t,b=v.d,x=v.constructor,w=x.precision;if(v.s<1)throw Error(Ba+(v.s?"NaN":"-Infinity"));if(v.eq(ia))return new x(0);if(e==null?(xn=!1,d=w):d=e,v.eq(10))return e==null&&(xn=!0),SA(x,d);if(d+=g,x.precision=d,n=Xs(b),r=n.charAt(0),a=or(v),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=Xs(v.d),r=n.charAt(0),h++;a=or(v),r>1?(v=new x("0."+n),a++):v=new x(r+"."+n.slice(1))}else return c=SA(x,d+2,w).times(a+""),v=Im(new x(r+"."+n.slice(1)),d-g).plus(c),x.precision=w,e==null?(xn=!0,tn(v,w)):v;for(o=s=v=el(v.minus(ia),v.plus(ia),d),f=tn(v.times(v),d),i=3;;){if(s=tn(s.times(f),d),c=o.plus(el(s,new x(i),d)),Xs(c.d).slice(0,d)===Xs(o.d).slice(0,d))return o=o.times(2),a!==0&&(o=o.plus(SA(x,d+2,w).times(a+""))),o=el(o,new x(h),d),x.precision=w,e==null?(xn=!0,tn(o,w)):o;o=c,i+=2}}function N6(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Kh(n/fn),t.d=[],r=(n+1)%fn,n<0&&(r+=fn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=fn;r<i;)t.d.push(+e.slice(r,r+=fn));e=e.slice(r),r=fn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),xn&&(t.e>Qx||t.e<-Qx))throw Error(IO+n)}else t.s=0,t.e=0,t.d=[0];return t}function tn(t,e,n){var r,i,a,s,o,c,d,f,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=fn,i=e,d=h[f=0];else{if(f=Math.ceil((r+1)/fn),a=h.length,f>=a)return t;for(d=a=h[f],s=1;a>=10;a/=10)s++;r%=fn,i=r-fn+s}if(n!==void 0&&(a=Ou(10,s-i-1),o=d/a%10|0,c=e<0||h[f+1]!==void 0||d%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?d/Ou(10,s-i):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=or(t),h.length=1,e=e-a-1,h[0]=Ou(10,(fn-e%fn)%fn),t.e=Kh(-e/fn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,a=1,f--):(h.length=f+1,a=Ou(10,fn-r),h[f]=i>0?(d/Ou(10,s-i)%Ou(10,i)|0)*a:0),c)for(;;)if(f==0){(h[0]+=a)==Nr&&(h[0]=1,++t.e);break}else{if(h[f]+=a,h[f]!=Nr)break;h[f--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(xn&&(t.e>Qx||t.e<-Qx))throw Error(IO+or(t));return t}function BW(t,e){var n,r,i,a,s,o,c,d,f,h,g=t.constructor,v=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),xn?tn(e,v):e;if(c=t.d,h=e.d,r=e.e,d=t.e,c=c.slice(),s=d-r,s){for(f=s<0,f?(n=c,s=-s,o=h.length):(n=h,r=d,o=c.length),i=Math.max(Math.ceil(v/fn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){f=c[i]<h[i];break}s=0}for(f&&(n=c,c=h,h=n,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=Nr-1;--c[a],c[i]+=Nr}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,xn?tn(e,v):e):new g(0)}function hd(t,e,n){var r,i=or(t),a=Xs(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+oc(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+oc(-i-1)+a,n&&(r=n-s)>0&&(a+=oc(r))):i>=s?(a+=oc(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+oc(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=oc(r))),t.s<0?"-"+a:a}function I6(t,e){if(t.length>e)return t.length=e,!0}function UW(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Zu+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return N6(s,a.toString())}else if(typeof a!="string")throw Error(Zu+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,ITe.test(a))N6(s,a);else throw Error(Zu+a)}if(i.prototype=Be,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=UW,i.config=i.set=OTe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function OTe(t){if(!t||typeof t!="object")throw Error(Ba+"Object expected");var e,n,r,i=["precision",1,Yh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Kh(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Zu+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Zu+n+": "+r);return this}var OO=UW(NTe);ia=new OO(1);const $t=OO;var PTe=t=>t,FW={},$W=t=>t===FW,O6=t=>function e(){return arguments.length===0||arguments.length===1&&$W(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},qW=(t,e)=>t===1?e:O6(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(s=>s!==FW).length;return a>=t?e(...r):qW(t-a,O6(function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];var d=r.map(f=>$W(f)?o.shift():f);return e(...d,...o)}))}),DTe=t=>qW(t.length,t),KC=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},RTe=DTe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),MTe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return PTe;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,c)=>c(o),a(...arguments))}};function GW(t){var e;return t===0?e=1:e=Math.floor(new $t(t).abs().log(10).toNumber())+1,e}function HW(t,e,n){for(var r=new $t(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var WW=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},YW=(t,e,n)=>{if(t.lte(0))return new $t(0);var r=GW(t.toNumber()),i=new $t(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new $t(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?new $t(c.toNumber()):new $t(Math.ceil(c.toNumber()))},jTe=(t,e,n)=>{var r=new $t(1),i=new $t(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new $t(10).pow(GW(t)-1),i=new $t(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new $t(Math.floor(t)))}else t===0?i=new $t(Math.floor((e-1)/2)):n||(i=new $t(Math.floor(t)));var s=Math.floor((e-1)/2),o=MTe(RTe(c=>i.add(new $t(c-s).mul(r)).toNumber()),KC);return o(0,e)},KW=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new $t(0),tickMin:new $t(0),tickMax:new $t(0)};var s=YW(new $t(n).sub(e).div(r-1),i,a),o;e<=0&&n>=0?o=new $t(0):(o=new $t(e).add(n).div(2),o=o.sub(new $t(o).mod(s)));var c=Math.ceil(o.sub(e).div(s).toNumber()),d=Math.ceil(new $t(n).sub(o).div(s).toNumber()),f=c+d+1;return f>r?KW(e,n,r,i,a+1):(f<r&&(d=n>0?d+(r-f):d,c=n>0?c:c+(r-f)),{step:s,tickMin:o.sub(new $t(c).mul(s)),tickMax:o.add(new $t(d).mul(s))})},zTe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,c]=WW([n,r]);if(o===-1/0||c===1/0){var d=c===1/0?[o,...KC(0,i-1).map(()=>1/0)]:[...KC(0,i-1).map(()=>-1/0),c];return n>r?d.reverse():d}if(o===c)return jTe(o,i,a);var{step:f,tickMin:h,tickMax:g}=KW(o,c,s,a,0),v=HW(h,g.add(new $t(.1).mul(f)),f);return n>r?v.reverse():v},LTe=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=WW([r,i]);if(s===-1/0||o===1/0)return[r,i];if(s===o)return[s];var c=Math.max(n,2),d=YW(new $t(o).sub(s).div(c-1),a,0),f=[...HW(new $t(s),new $t(o),d),o];return a===!1&&(f=f.map(h=>Math.round(h))),r>i?f.reverse():f},XW=t=>t.rootProps.maxBarSize,VTe=t=>t.rootProps.barGap,QW=t=>t.rootProps.barCategoryGap,BTe=t=>t.rootProps.barSize,Av=t=>t.rootProps.stackOffset,ZW=t=>t.rootProps.reverseStackOrder,PO=t=>t.options.chartName,DO=t=>t.rootProps.syncId,JW=t=>t.rootProps.syncMethod,RO=t=>t.options.eventEmitter,Or={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Bo={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ta={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Lw=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},UTe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Bo.angleAxisId,includeHidden:!1,name:void 0,reversed:Bo.reversed,scale:Bo.scale,tick:Bo.tick,tickCount:void 0,ticks:void 0,type:Bo.type,unit:void 0},FTe={allowDataOverflow:ta.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ta.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ta.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ta.scale,tick:ta.tick,tickCount:ta.tickCount,ticks:void 0,type:ta.type,unit:void 0},$Te={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Bo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Bo.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Bo.scale,tick:Bo.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},qTe={allowDataOverflow:ta.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ta.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ta.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ta.scale,tick:ta.tick,tickCount:ta.tickCount,ticks:void 0,type:"category",unit:void 0},MO=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?$Te:UTe,jO=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?qTe:FTe,Vw=t=>t.polarOptions,zO=me([wl,Sl,yr],XH),eY=me([Vw,zO],(t,e)=>{if(t!=null)return ai(t.innerRadius,e,0)}),tY=me([Vw,zO],(t,e)=>{if(t!=null)return ai(t.outerRadius,e,e*.8)}),GTe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},nY=me([Vw],GTe);me([MO,nY],Lw);var rY=me([zO,eY,tY],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});me([jO,rY],Lw);var iY=me([Pt,Vw,eY,tY,wl,Sl],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:o,startAngle:c,endAngle:d}=e;return{cx:ai(s,i,i/2),cy:ai(o,a,a/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:d,clockWise:!1}}}),wn=(t,e)=>e,kv=(t,e,n)=>n;function LO(t){return t?.id}function aY(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,s=new Map;return t.forEach(o=>{var c,d=(c=o.data)!==null&&c!==void 0?c:r;if(!(d==null||d.length===0)){var f=LO(o);d.forEach((h,g)=>{var v=a==null||i?g:String(pn(h,a,null)),b=pn(h,o.dataKey,0),x;s.has(v)?x=s.get(v):x={},Object.assign(x,{[f]:b}),s.set(v,x)})}}),Array.from(s.values())}function Bw(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var Uw=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function Fw(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function HTe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var xr=t=>{var e=Pt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Xh=t=>t.tooltip.settings.axisId;function P6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P6(Object(n),!0).forEach(function(r){WTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WTe(t,e,n){return(e=YTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YTe(t){var e=KTe(t,"string");return typeof e=="symbol"?e:e+""}function KTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XC=[0,"auto"],Ar={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},sY=(t,e)=>t.cartesianAxis.xAxis[e],vo=(t,e)=>{var n=sY(t,e);return n??Ar},kr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:XC,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:yv},oY=(t,e)=>t.cartesianAxis.yAxis[e],yo=(t,e)=>{var n=oY(t,e);return n??kr},XTe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},VO=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??XTe},In=(t,e,n)=>{switch(e){case"xAxis":return vo(t,n);case"yAxis":return yo(t,n);case"zAxis":return VO(t,n);case"angleAxis":return MO(t,n);case"radiusAxis":return jO(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},QTe=(t,e,n)=>{switch(e){case"xAxis":return vo(t,n);case"yAxis":return yo(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Cv=(t,e,n)=>{switch(e){case"xAxis":return vo(t,n);case"yAxis":return yo(t,n);case"angleAxis":return MO(t,n);case"radiusAxis":return jO(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},lY=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function BO(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var UO=t=>t.graphicalItems.cartesianItems,ZTe=me([wn,kv],BO),FO=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),Nv=me([UO,In,ZTe],FO,{memoizeOptions:{resultEqualityCheck:Fw}}),cY=me([Nv],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(Bw)),uY=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),JTe=me([Nv],uY),$O=t=>t.map(e=>e.data).filter(Boolean).flat(1),eAe=me([Nv],$O,{memoizeOptions:{resultEqualityCheck:Fw}}),qO=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},GO=me([eAe,MW],qO),HO=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:pn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:pn(i,r)}))):t.map(r=>({value:r})),$w=me([GO,In,Nv],HO);function dY(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Eb(t){if(La(t)||t instanceof Date){var e=Number(t);if(en(e))return e}}function D6(t){if(Array.isArray(t)){var e=[Eb(t[0]),Eb(t[1])];return Vc(e)?e:void 0}var n=Eb(t);if(n!=null)return[n,n]}function vl(t){return t.map(Eb).filter(gbe)}function tAe(t,e,n){return!n||typeof e!="number"||ua(e)?[]:n.length?vl(n.flatMap(r=>{var i=pn(t,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!en(a)||!en(s)))return[e-a,e+s]})):[]}var wr=t=>{var e=xr(t),n=Xh(t);return Cv(t,e,n)},Iv=me([wr],t=>t?.dataKey),nAe=me([cY,MW,wr],aY),fY=(t,e,n,r)=>{var i={},a=e.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,d=r?[...c].reverse():c,f=d.map(LO);return[o,{stackedData:M1e(t,f,n),graphicalItems:d}]}))},QC=me([nAe,cY,Av,ZW],fY),hY=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var s=B1e(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},rAe=me([In],t=>t.allowDataOverflow),WO=t=>{var e;if(t==null||!("domain"in t))return XC;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=vl(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:XC},YO=me([In],WO),KO=me([YO,rAe],jW),iAe=me([QC,El,wn,KO],hY,{memoizeOptions:{resultEqualityCheck:Uw}}),qw=t=>t.errorBars,aAe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>dY(n,r)),Jx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},XO=(t,e,n,r,i)=>{var a,s;if(n.length>0&&t.forEach(o=>{n.forEach(c=>{var d,f,h=(d=r[c.id])===null||d===void 0?void 0:d.filter(_=>dY(i,_)),g=pn(o,(f=e.dataKey)!==null&&f!==void 0?f:c.dataKey),v=tAe(o,g,h);if(v.length>=2){var b=Math.min(...v),x=Math.max(...v);(a==null||b<a)&&(a=b),(s==null||x>s)&&(s=x)}var w=D6(g);w!=null&&(a=a==null?w[0]:Math.min(a,w[0]),s=s==null?w[1]:Math.max(s,w[1]))})}),e?.dataKey!=null&&t.forEach(o=>{var c=D6(pn(o,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),en(a)&&en(s))return[a,s]},sAe=me([GO,In,JTe,qw,wn],XO,{memoizeOptions:{resultEqualityCheck:Uw}});function oAe(t){var{value:e}=t;if(La(e)||e instanceof Date)return e}var lAe=(t,e,n)=>{var r=t.map(oAe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&NG(r))?eW(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},pY=t=>t.referenceElements.dots,Qh=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),cAe=me([pY,wn,kv],Qh),gY=t=>t.referenceElements.areas,uAe=me([gY,wn,kv],Qh),mY=t=>t.referenceElements.lines,dAe=me([mY,wn,kv],Qh),vY=(t,e)=>{if(t!=null){var n=vl(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},fAe=me(cAe,wn,vY),yY=(t,e)=>{if(t!=null){var n=vl(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},hAe=me([uAe,wn],yY);function pAe(t){var e;if(t.x!=null)return vl([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:vl(n)}function gAe(t){var e;if(t.y!=null)return vl([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:vl(n)}var bY=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?pAe(r):gAe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},mAe=me([dAe,wn],bY),vAe=me(fAe,mAe,hAe,(t,e,n)=>Jx(t,n,e)),QO=(t,e,n,r,i,a,s,o)=>{if(n!=null)return n;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",d=c?Jx(r,a,i):Jx(a,i);return CTe(e,d,t.allowDataOverflow)},yAe=me([In,YO,KO,iAe,sAe,vAe,Pt,wn],QO,{memoizeOptions:{resultEqualityCheck:Uw}}),bAe=[0,1],ZO=(t,e,n,r,i,a,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:o,type:c}=t,d=Td(e,a);if(d&&o==null){var f;return eW(0,(f=n?.length)!==null&&f!==void 0?f:0)}return c==="category"?lAe(r,t,d):i==="expand"?bAe:s}},JO=me([In,Pt,GO,$w,Av,wn,yAe],ZO),xY=(t,e,n,r,i)=>{if(t!=null){var{scale:a,type:s}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(pv(a));return o in Ng?o:"point"}}},Zh=me([In,Pt,lY,PO,wn],xY);function xAe(t){if(t!=null){if(t in Ng)return Ng[t]();var e="scale".concat(pv(t));if(e in Ng)return Ng[e]()}}function eP(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=xAe(e);if(i!=null){var a=i.domain(n).range(r);return I1e(a),a}}}var tP=(t,e,n)=>{var r=WO(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Vc(t))return zTe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Vc(t))return LTe(t,e.tickCount,e.allowDecimals)}},nP=me([JO,Cv,Zh],tP),rP=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Vc(e)&&Array.isArray(n)&&n.length>0){var i=e[0],a=n[0],s=e[1],o=n[n.length-1];return[Math.min(i,a),Math.max(s,o)]}return e},wAe=me([In,JO,nP,wn],rP),SAe=me($w,In,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(vl(t.map(h=>h.value))).sort((h,g)=>h-g),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<r.length-1;o++){var c=r[o],d=r[o+1];if(!(c==null||d==null)){var f=d-c;n=Math.min(n,f)}}return n/s}}),wY=me(SAe,Pt,QW,yr,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!en(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=ai(n,t*a),o=t*a/2;return o-s-(o-s)/a*s}return 0}),_Ae=(t,e,n)=>{var r=vo(t,e);return r==null||typeof r.padding!="string"?0:wY(t,"xAxis",e,n,r.padding)},EAe=(t,e,n)=>{var r=yo(t,e);return r==null||typeof r.padding!="string"?0:wY(t,"yAxis",e,n,r.padding)},TAe=me(vo,_Ae,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),AAe=me(yo,EAe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),kAe=me([yr,TAe,Sw,ww,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),CAe=me([yr,Pt,AAe,Sw,ww,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Ov=(t,e,n,r)=>{var i;switch(e){case"xAxis":return kAe(t,n,r);case"yAxis":return CAe(t,n,r);case"zAxis":return(i=VO(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return nY(t);case"radiusAxis":return rY(t,n);default:return}},SY=me([In,Ov],Lw),kh=me([In,Zh,wAe,SY],eP);me([Nv,qw,wn],aAe);function _Y(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var Gw=(t,e)=>e,Hw=(t,e,n)=>n,NAe=me(bw,Gw,Hw,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(_Y)),IAe=me(xw,Gw,Hw,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(_Y)),EY=(t,e)=>({width:t.width,height:e.height}),OAe=(t,e)=>{var n=typeof e.width=="number"?e.width:yv;return{width:n,height:t.height}},TY=me(yr,vo,EY),PAe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},DAe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},RAe=me(Sl,yr,NAe,Gw,Hw,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=EY(e,o);s==null&&(s=PAe(e,r,t));var d=r==="top"&&!i||r==="bottom"&&i;a[o.id]=s-Number(d)*c.height,s+=(d?-1:1)*c.height}),a}),MAe=me(wl,yr,IAe,Gw,Hw,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=OAe(e,o);s==null&&(s=DAe(e,r,t));var d=r==="left"&&!i||r==="right"&&i;a[o.id]=s-Number(d)*c.width,s+=(d?-1:1)*c.width}),a}),jAe=(t,e)=>{var n=vo(t,e);if(n!=null)return RAe(t,n.orientation,n.mirror)},zAe=me([yr,vo,jAe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),LAe=(t,e)=>{var n=yo(t,e);if(n!=null)return MAe(t,n.orientation,n.mirror)},VAe=me([yr,yo,LAe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),AY=me(yr,yo,(t,e)=>{var n=typeof e.width=="number"?e.width:yv;return{width:n,height:t.height}}),R6=(t,e,n)=>{switch(e){case"xAxis":return TY(t,n).width;case"yAxis":return AY(t,n).height;default:return}},kY=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,o=Td(t,r),c=e.map(d=>d.value);if(s&&o&&a==="category"&&i&&NG(c))return c}},iP=me([Pt,$w,In,wn],kY),CY=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,s=Td(t,r);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},aP=me([Pt,$w,Cv,wn],CY),M6=me([Pt,QTe,Zh,kh,iP,aP,Ov,nP,wn],(t,e,n,r,i,a,s,o,c)=>{if(e!=null){var d=Td(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:d,niceTicks:o,range:s,realScaleType:n,scale:r}}}),BAe=(t,e,n,r,i,a,s,o,c)=>{if(!(e==null||r==null)){var d=Td(t,c),{type:f,ticks:h,tickCount:g}=e,v=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=f==="category"&&r.bandwidth?r.bandwidth()/v:0;b=c==="angleAxis"&&a!=null&&a.length>=2?Ir(a[0]-a[1])*2*b:b;var x=h||i;if(x){var w=x.map((_,T)=>{var N=s?s.indexOf(_):_;return{index:T,coordinate:r(N)+b,value:_,offset:b}});return w.filter(_=>en(_.coordinate))}return d&&o?o.map((_,T)=>({coordinate:r(_)+b,value:_,index:T,offset:b})).filter(_=>en(_.coordinate)):r.ticks?r.ticks(g).map(_=>({coordinate:r(_)+b,value:_,offset:b})):r.domain().map((_,T)=>({coordinate:r(_)+b,value:s?s[_]:_,index:T,offset:b}))}},NY=me([Pt,Cv,Zh,kh,nP,Ov,iP,aP,wn],BAe),UAe=(t,e,n,r,i,a,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=Td(t,s),{tickCount:c}=e,d=0;return d=s==="angleAxis"&&r?.length>=2?Ir(r[0]-r[1])*2*d:d,o&&a?a.map((f,h)=>({coordinate:n(f)+d,value:f,index:h,offset:d})):n.ticks?n.ticks(c).map(f=>({coordinate:n(f)+d,value:f,offset:d})):n.domain().map((f,h)=>({coordinate:n(f)+d,value:i?i[f]:f,index:h,offset:d}))}},Ch=me([Pt,Cv,kh,Ov,iP,aP,wn],UAe),Nh=me(In,kh,(t,e)=>{if(!(t==null||e==null))return Zx(Zx({},t),{},{scale:e})}),FAe=me([In,Zh,JO,SY],eP);me((t,e,n)=>VO(t,n),FAe,(t,e)=>{if(!(t==null||e==null))return Zx(Zx({},t),{},{scale:e})});var $Ae=me([Pt,bw,xw],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),IY=t=>t.options.defaultTooltipEventType,OY=t=>t.options.validateTooltipEventTypes;function PY(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function sP(t,e){var n=IY(t),r=OY(t);return PY(e,n,r)}function qAe(t){return Fe(e=>sP(e,t))}var DY=(t,e)=>{var n,r=Number(e);if(!(ua(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},GAe=t=>t.tooltip.settings,hc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},HAe={itemInteraction:{click:hc,hover:hc},axisInteraction:{click:hc,hover:hc},keyboardInteraction:hc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},RY=Fi({name:"tooltip",initialState:HAe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:yn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ps(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:yn()},removeTooltipEntrySettings:{reducer(t,e){var n=ps(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:yn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:WAe,replaceTooltipEntrySettings:YAe,removeTooltipEntrySettings:KAe,setTooltipSettingsState:XAe,setActiveMouseOverItemIndex:MY,mouseLeaveItem:QAe,mouseLeaveChart:jY,setActiveClickItemIndex:ZAe,setMouseOverAxisIndex:zY,setMouseClickAxisIndex:JAe,setSyncInteraction:ZC,setKeyboardInteraction:JC}=RY.actions,eke=RY.reducer;function j6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ky(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j6(Object(n),!0).forEach(function(r){tke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tke(t,e,n){return(e=nke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nke(t){var e=rke(t,"string");return typeof e=="symbol"?e:e+""}function rke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ike(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function ake(t){return t.index!=null}var LY=(t,e,n,r)=>{if(e==null)return hc;var i=ike(t,e,n);if(i==null)return hc;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(ake(i)){if(a)return Ky(Ky({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Ky(Ky({},hc),{},{coordinate:i.coordinate})};function ske(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function oke(t,e){var n=ske(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),s=Math.max(r,i);return n>=a&&n<=s}function lke(t,e,n){if(n==null||e==null)return!0;var r=pn(t,e);return r==null||!Vc(n)?!0:oke(r,n)}var oP=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!en(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var c=Math.max(s,Math.min(a,o)),d=e[c];return d==null||lke(d,n,r)?String(c):null},VY=(t,e,n,r,i,a,s,o)=>{if(!(a==null||o==null)){var c=s[0],d=c==null?void 0:o(c.positions,a);if(d!=null)return d;var f=i?.[Number(a)];if(f)switch(n){case"horizontal":return{x:f.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:f.coordinate}}}},BY=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},Pv=t=>t.options.tooltipPayloadSearcher,Jh=t=>t.tooltip;function z6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z6(Object(n),!0).forEach(function(r){cke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cke(t,e,n){return(e=uke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uke(t){var e=dke(t,"string");return typeof e=="symbol"?e:e+""}function dke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fke(t,e){return t??e}var UY=(t,e,n,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:d,dataEndIndex:f}=n,h=[];return t.reduce((g,v)=>{var b,{dataDefinedOnItem:x,settings:w}=v,_=fke(x,o),T=Array.isArray(_)?wH(_,d,f):_,N=(b=w?.dataKey)!==null&&b!==void 0?b:r,D=w?.nameKey,P;if(r&&Array.isArray(T)&&!Array.isArray(T[0])&&s==="axis"?P=pbe(T,r,i):P=a(T,e,c,D),Array.isArray(P))P.forEach(C=>{var I=L6(L6({},w),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});g.push($5({tooltipEntrySettings:I,dataKey:C.dataKey,payload:C.payload,value:pn(C.payload,C.dataKey),name:C.name}))});else{var O;g.push($5({tooltipEntrySettings:w,dataKey:N,payload:P,value:pn(P,N),name:(O=pn(P,D))!==null&&O!==void 0?O:w?.name}))}return g},h)}},lP=me([wr,Pt,lY,PO,xr],xY),hke=me([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),pke=me([xr,Xh],BO),ep=me([hke,wr,pke],FO,{memoizeOptions:{resultEqualityCheck:Fw}}),gke=me([ep],t=>t.filter(Bw)),mke=me([ep],$O,{memoizeOptions:{resultEqualityCheck:Fw}}),tp=me([mke,El],qO),vke=me([gke,El,wr],aY),cP=me([tp,wr,ep],HO),FY=me([wr],WO),yke=me([wr],t=>t.allowDataOverflow),$Y=me([FY,yke],jW),bke=me([ep],t=>t.filter(Bw)),xke=me([vke,bke,Av,ZW],fY),wke=me([xke,El,xr,$Y],hY),Ske=me([ep],uY),_ke=me([tp,wr,Ske,qw,xr],XO,{memoizeOptions:{resultEqualityCheck:Uw}}),Eke=me([pY,xr,Xh],Qh),Tke=me([Eke,xr],vY),Ake=me([gY,xr,Xh],Qh),kke=me([Ake,xr],yY),Cke=me([mY,xr,Xh],Qh),Nke=me([Cke,xr],bY),Ike=me([Tke,Nke,kke],Jx),Oke=me([wr,FY,$Y,wke,_ke,Ike,Pt,xr],QO),Dv=me([wr,Pt,tp,cP,Av,xr,Oke],ZO),Pke=me([Dv,wr,lP],tP),Dke=me([wr,Dv,Pke,xr],rP),qY=t=>{var e=xr(t),n=Xh(t),r=!1;return Ov(t,e,n,r)},GY=me([wr,qY],Lw),HY=me([wr,lP,Dke,GY],eP),Rke=me([Pt,cP,wr,xr],kY),Mke=me([Pt,cP,wr,xr],CY),jke=(t,e,n,r,i,a,s,o)=>{if(e){var{type:c}=e,d=Td(t,o);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=c==="category"&&r.bandwidth?r.bandwidth()/f:0;return h=o==="angleAxis"&&i!=null&&i?.length>=2?Ir(i[0]-i[1])*2*h:h,d&&s?s.map((g,v)=>({coordinate:r(g)+h,value:g,index:v,offset:h})):r.domain().map((g,v)=>({coordinate:r(g)+h,value:a?a[g]:g,index:v,offset:h}))}}},Tl=me([Pt,wr,lP,HY,qY,Rke,Mke,xr],jke),uP=me([IY,OY,GAe],(t,e,n)=>PY(n.shared,t,e)),WY=t=>t.tooltip.settings.trigger,dP=t=>t.tooltip.settings.defaultIndex,Rv=me([Jh,uP,WY,dP],LY),pd=me([Rv,tp,Iv,Dv],oP),YY=me([Tl,pd],DY),fP=me([Rv],t=>{if(t)return t.dataKey}),zke=me([Rv],t=>{if(t)return t.graphicalItemId}),KY=me([Jh,uP,WY,dP],BY),Lke=me([wl,Sl,Pt,yr,Tl,dP,KY,Pv],VY),Vke=me([Rv,Lke],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Bke=me([Rv],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),Uke=me([KY,pd,El,Iv,YY,Pv,uP],UY);me([Uke],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function V6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function B6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V6(Object(n),!0).forEach(function(r){Fke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fke(t,e,n){return(e=$ke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ke(t){var e=qke(t,"string");return typeof e=="symbol"?e:e+""}function qke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gke=()=>Fe(wr),Hke=()=>{var t=Gke(),e=Fe(Tl),n=Fe(HY);return Px(!t||!n?void 0:B6(B6({},t),{},{scale:n}),e)};function U6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _f(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U6(Object(n),!0).forEach(function(r){Wke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wke(t,e,n){return(e=Yke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yke(t){var e=Kke(t,"string");return typeof e=="symbol"?e:e+""}function Kke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xke=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},Qke=(t,e,n,r)=>{var i=e.find(d=>d&&d.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=r;return _f(_f(_f({},r),sr(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=r;return _f(_f(_f({},r),sr(r.cx,r.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Zke(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var XY=(t,e,n,r,i)=>{var a,s=(a=e?.length)!==null&&a!==void 0?a:0;if(s<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,d,f,h,g,v=o>0?(c=n[o-1])===null||c===void 0?void 0:c.coordinate:(d=n[s-1])===null||d===void 0?void 0:d.coordinate,b=(f=n[o])===null||f===void 0?void 0:f.coordinate,x=o>=s-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(g=n[o+1])===null||g===void 0?void 0:g.coordinate,w=void 0;if(!(v==null||b==null||x==null))if(Ir(b-v)!==Ir(x-b)){var _=[];if(Ir(x-b)===Ir(i[1]-i[0])){w=x;var T=b+i[1]-i[0];_[0]=Math.min(T,(T+v)/2),_[1]=Math.max(T,(T+v)/2)}else{w=v;var N=x+i[1]-i[0];_[0]=Math.min(b,(N+b)/2),_[1]=Math.max(b,(N+b)/2)}var D=[Math.min(b,(w+b)/2),Math.max(b,(w+b)/2)];if(t>D[0]&&t<=D[1]||t>=_[0]&&t<=_[1]){var P;return(P=n[o])===null||P===void 0?void 0:P.index}}else{var O=Math.min(v,x),C=Math.max(v,x);if(t>(O+b)/2&&t<=(C+b)/2){var I;return(I=n[o])===null||I===void 0?void 0:I.index}}}else if(e)for(var R=0;R<s;R++){var j=e[R];if(j!=null){var L=e[R+1],B=e[R-1];if(R===0&&L!=null&&t<=(j.coordinate+L.coordinate)/2||R===s-1&&B!=null&&t>(j.coordinate+B.coordinate)/2||R>0&&R<s-1&&B!=null&&L!=null&&t>(j.coordinate+B.coordinate)/2&&t<=(j.coordinate+L.coordinate)/2)return j.index}}return-1},Jke=()=>Fe(PO),hP=(t,e)=>e,QY=(t,e,n)=>n,pP=(t,e,n,r)=>r,eCe=me(Tl,t=>lw(t,e=>e.coordinate)),gP=me([Jh,hP,QY,pP],LY),mP=me([gP,tp,Iv,Dv],oP),tCe=(t,e,n)=>{if(e!=null){var r=Jh(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},ZY=me([Jh,hP,QY,pP],BY),e1=me([wl,Sl,Pt,yr,Tl,pP,ZY,Pv],VY),nCe=me([gP,e1],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),JY=me([Tl,mP],DY),rCe=me([ZY,mP,El,Iv,JY,Pv,hP],UY),iCe=me([gP,mP],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),aCe=(t,e,n,r,i,a,s)=>{if(!(!t||!n||!r||!i)&&Zke(t,s)){var o=U1e(t,e),c=XY(o,a,i,n,r),d=Xke(e,i,c,t);return{activeIndex:String(c),activeCoordinate:d}}},sCe=(t,e,n,r,i,a,s)=>{if(!(!t||!r||!i||!a||!n)){var o=$Se(t,n);if(o){var c=F1e(o,e),d=XY(c,s,a,r,i),f=Qke(e,a,d,o);return{activeIndex:String(d),activeCoordinate:f}}}},oCe=(t,e,n,r,i,a,s,o)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?aCe(t,e,r,i,a,s,o):sCe(t,e,n,r,i,a,s)},lCe=me(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),cCe=me(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Or)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:HTe}});function F6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F6(Object(n),!0).forEach(function(r){uCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uCe(t,e,n){return(e=dCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dCe(t){var e=fCe(t,"string");return typeof e=="symbol"?e:e+""}function fCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hCe={},pCe={zIndexMap:Object.values(Or).reduce((t,e)=>$6($6({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),hCe)},gCe=new Set(Object.values(Or));function mCe(t){return gCe.has(t)}var eK=Fi({name:"zIndex",initialState:pCe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:yn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!mCe(n)&&delete t.zIndexMap[n])},prepare:yn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:yn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:yn()}}}),{registerZIndexPortal:vCe,unregisterZIndexPortal:yCe,registerZIndexPortalElement:bCe,unregisterZIndexPortalElement:xCe}=eK.actions,wCe=eK.reducer;function Ga(t){var{zIndex:e,children:n}=t,r=ywe(),i=r&&e!==void 0&&e!==0,a=_i(),s=gn();A.useLayoutEffect(()=>i?(s(vCe({zIndex:e})),()=>{s(yCe({zIndex:e}))}):gv,[s,e,i]);var o=Fe(c=>lCe(c,e,a));return i?o?k9.createPortal(n,o):null:n}function e2(){return e2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e2.apply(null,arguments)}function q6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q6(Object(n),!0).forEach(function(r){SCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SCe(t,e,n){return(e=_Ce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ce(t){var e=ECe(t,"string");return typeof e=="symbol"?e:e+""}function ECe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TCe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return A.isValidElement(e)?A.cloneElement(e,r):A.createElement(n,r)}function ACe(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:d,chartName:f}=t,h=n,g=r,v=i;if(!c||!h||f!=="ScatterChart"&&d!=="axis")return null;var b,x,w;if(f==="ScatterChart")b=h,x=rSe,w=Or.cursorLine;else if(f==="BarChart")b=iSe(o,h,a,s),x=KH,w=Or.cursorRectangle;else if(o==="radial"&&PG(h)){var{cx:_,cy:T,radius:N,startAngle:D,endAngle:P}=QH(h);b={cx:_,cy:T,startAngle:D,endAngle:P,innerRadius:N,outerRadius:N},x=JH,w=Or.cursorLine}else b={points:WSe(o,h,a)},x=sO,w=Or.cursorLine;var O=typeof c=="object"&&"className"in c?c.className:void 0,C=Xy(Xy(Xy(Xy({stroke:"#ccc",pointerEvents:"none"},a),b),vm(c)),{},{payload:g,payloadIndex:v,className:qt("recharts-tooltip-cursor",O)});return A.createElement(Ga,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:w},A.createElement(TCe,{cursor:c,cursorComp:x,cursorProps:C}))}function kCe(t){var e=Hke(),n=OH(),r=xv(),i=Jke();return e==null||n==null||r==null||i==null?null:A.createElement(ACe,e2({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var tK=A.createContext(null),CCe=()=>A.useContext(tK),_A={exports:{}},G6;function NCe(){return G6||(G6=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function a(c,d,f,h,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new i(f,h||c,g),b=n?n+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],v]:c._events[b].push(v):(c._events[b]=v,c._eventsCount++),c}function s(c,d){--c._eventsCount===0?c._events=new r:delete c._events[d]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],f,h;if(this._eventsCount===0)return d;for(h in f=this._events)e.call(f,h)&&d.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},o.prototype.listeners=function(d){var f=n?n+d:d,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,v=h.length,b=new Array(v);g<v;g++)b[g]=h[g].fn;return b},o.prototype.listenerCount=function(d){var f=n?n+d:d,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(d,f,h,g,v,b){var x=n?n+d:d;if(!this._events[x])return!1;var w=this._events[x],_=arguments.length,T,N;if(w.fn){switch(w.once&&this.removeListener(d,w.fn,void 0,!0),_){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,h),!0;case 4:return w.fn.call(w.context,f,h,g),!0;case 5:return w.fn.call(w.context,f,h,g,v),!0;case 6:return w.fn.call(w.context,f,h,g,v,b),!0}for(N=1,T=new Array(_-1);N<_;N++)T[N-1]=arguments[N];w.fn.apply(w.context,T)}else{var D=w.length,P;for(N=0;N<D;N++)switch(w[N].once&&this.removeListener(d,w[N].fn,void 0,!0),_){case 1:w[N].fn.call(w[N].context);break;case 2:w[N].fn.call(w[N].context,f);break;case 3:w[N].fn.call(w[N].context,f,h);break;case 4:w[N].fn.call(w[N].context,f,h,g);break;default:if(!T)for(P=1,T=new Array(_-1);P<_;P++)T[P-1]=arguments[P];w[N].fn.apply(w[N].context,T)}}return!0},o.prototype.on=function(d,f,h){return a(this,d,f,h,!1)},o.prototype.once=function(d,f,h){return a(this,d,f,h,!0)},o.prototype.removeListener=function(d,f,h,g){var v=n?n+d:d;if(!this._events[v])return this;if(!f)return s(this,v),this;var b=this._events[v];if(b.fn)b.fn===f&&(!g||b.once)&&(!h||b.context===h)&&s(this,v);else{for(var x=0,w=[],_=b.length;x<_;x++)(b[x].fn!==f||g&&!b[x].once||h&&b[x].context!==h)&&w.push(b[x]);w.length?this._events[v]=w.length===1?w[0]:w:s(this,v)}return this},o.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(_A)),_A.exports}var ICe=NCe();const OCe=bl(ICe);var Om=new OCe,t2="recharts.syncEvent.tooltip",H6="recharts.syncEvent.brush";function nK(t,e){if(e){var n=Number.parseInt(e,10);if(!ua(n))return t?.[n]}}var PCe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},rK=Fi({name:"options",initialState:PCe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),DCe=rK.reducer,{createEventEmitter:RCe}=rK.actions;function MCe(t){return t.tooltip.syncInteraction}var jCe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},iK=Fi({name:"chartData",initialState:jCe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:W6,setDataStartEndIndexes:zCe,setComputedData:yMe}=iK.actions,LCe=iK.reducer,VCe=["x","y"];function Y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ef(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y6(Object(n),!0).forEach(function(r){BCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BCe(t,e,n){return(e=UCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UCe(t){var e=FCe(t,"string");return typeof e=="symbol"?e:e+""}function FCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ce(t,e){if(t==null)return{};var n,r,i=qCe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qCe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function GCe(){var t=Fe(DO),e=Fe(RO),n=gn(),r=Fe(JW),i=Fe(Tl),a=xv(),s=bv(),o=Fe(c=>c.rootProps.className);A.useEffect(()=>{if(t==null)return gv;var c=(d,f,h)=>{if(e!==h&&t===d){if(r==="index"){var g;if(s&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate&&f.payload.sourceViewBox){var v=f.payload.coordinate,{x:b,y:x}=v,w=$Ce(v,VCe),{x:_,y:T,width:N,height:D}=f.payload.sourceViewBox,P=Ef(Ef({},w),{},{x:s.x+(N?(b-_)/N:0)*s.width,y:s.y+(D?(x-T)/D:0)*s.height});n(Ef(Ef({},f),{},{payload:Ef(Ef({},f.payload),{},{coordinate:P})}))}else n(f);return}if(i!=null){var O;if(typeof r=="function"){var C={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},I=r(i,C);O=i[I]}else r==="value"&&(O=i.find(G=>String(G.value)===f.payload.label));var{coordinate:R}=f.payload;if(O==null||f.payload.active===!1||R==null||s==null){n(ZC({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:j,y:L}=R,B=Math.min(j,s.x+s.width),z=Math.min(L,s.y+s.height),Y={x:a==="horizontal"?O.coordinate:B,y:a==="horizontal"?z:O.coordinate},Z=ZC({active:f.payload.active,coordinate:Y,dataKey:f.payload.dataKey,index:String(O.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(Z)}}};return Om.on(t2,c),()=>{Om.off(t2,c)}},[o,n,e,t,r,i,a,s])}function HCe(){var t=Fe(DO),e=Fe(RO),n=gn();A.useEffect(()=>{if(t==null)return gv;var r=(i,a,s)=>{e!==s&&t===i&&n(zCe(a))};return Om.on(H6,r),()=>{Om.off(H6,r)}},[n,e,t])}function WCe(){var t=gn();A.useEffect(()=>{t(RCe())},[t]),GCe(),HCe()}function YCe(t,e,n,r,i,a){var s=Fe(v=>tCe(v,t,e)),o=Fe(RO),c=Fe(DO),d=Fe(JW),f=Fe(MCe),h=f?.active,g=bv();A.useEffect(()=>{if(!h&&c!=null&&o!=null){var v=ZC({active:a,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:g,graphicalItemId:void 0});Om.emit(t2,c,v,o)}},[h,n,s,i,r,o,c,d,a,g])}function K6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K6(Object(n),!0).forEach(function(r){KCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KCe(t,e,n){return(e=XCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XCe(t){var e=QCe(t,"string");return typeof e=="symbol"?e:e+""}function QCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZCe(t){return t.dataKey}function JCe(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(jwe,e)}var Q6=[],e2e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Ww(t){var e,n,r=Wr(t,e2e),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:d,isAnimationActive:f,offset:h,payloadUniqBy:g,position:v,reverseDirection:b,useTranslate3d:x,wrapperStyle:w,cursor:_,shared:T,trigger:N,defaultIndex:D,portal:P,axisId:O}=r,C=gn(),I=typeof D=="number"?String(D):D;A.useEffect(()=>{C(XAe({shared:T,trigger:N,axisId:O,active:i,defaultIndex:I}))},[C,T,N,O,i,I]);var R=bv(),j=qH(),L=qAe(T),{activeIndex:B,isActive:z}=(e=Fe(oe=>iCe(oe,L,N,I)))!==null&&e!==void 0?e:{},Y=Fe(oe=>rCe(oe,L,N,I)),Z=Fe(oe=>JY(oe,L,N,I)),G=Fe(oe=>nCe(oe,L,N,I)),K=Y,X=CCe(),ee=(n=i??z)!==null&&n!==void 0?n:!1,[J,F]=Txe([K,ee]),Q=L==="axis"?Z:void 0;YCe(L,N,G,Q,B,ee);var te=P??X;if(te==null||R==null||L==null)return null;var W=K??Q6;ee||(W=Q6),d&&W.length&&(W=Qbe(W.filter(oe=>oe.value!=null&&(oe.hide!==!0||r.includeHidden)),g,ZCe));var ue=W.length>0,re=A.createElement($we,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:f,active:ee,coordinate:G,hasPayload:ue,offset:h,position:v,reverseDirection:b,useTranslate3d:x,viewBox:R,wrapperStyle:w,lastBoundingBox:J,innerRef:F,hasPortalFromProps:!!P},JCe(c,X6(X6({},r),{},{payload:W,label:Q,active:ee,activeIndex:B,coordinate:G,accessibilityLayer:j})));return A.createElement(A.Fragment,null,k9.createPortal(re,te),ee&&A.createElement(kCe,{cursor:_,tooltipEventType:L,coordinate:G,payload:W,index:B}))}var Mv=t=>null;Mv.displayName="Cell";function t2e(t,e,n){return(e=n2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n2e(t){var e=r2e(t,"string");return typeof e=="symbol"?e:e+""}function r2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class i2e{constructor(e){t2e(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function Z6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function a2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z6(Object(n),!0).forEach(function(r){s2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function s2e(t,e,n){return(e=o2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o2e(t){var e=l2e(t,"string");return typeof e=="symbol"?e:e+""}function l2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c2e={cacheSize:2e3,enableCache:!0},aK=a2e({},c2e),J6=new i2e(aK.cacheSize),u2e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},eB="recharts_measurement_span";function d2e(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var tB=(t,e)=>{try{var n=document.getElementById(eB);n||(n=document.createElement("span"),n.setAttribute("id",eB),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,u2e,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Wg=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Cw.isSsr)return{width:0,height:0};if(!aK.enableCache)return tB(e,n);var r=d2e(e,n),i=J6.get(r);if(i)return i;var a=tB(e,n);return J6.set(r,a),a},sK;function f2e(t,e,n){return(e=h2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h2e(t){var e=p2e(t,"string");return typeof e=="symbol"?e:e+""}function p2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,g2e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,m2e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,v2e={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},y2e=["cm","mm","pt","pc","in","Q","px"];function b2e(t){return y2e.includes(t)}var $f="NaN";function x2e(t,e){return t*v2e[e]}class $r{static parse(e){var n,[,r,i]=(n=m2e.exec(e))!==null&&n!==void 0?n:[];return r==null?$r.NaN:new $r(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,ua(e)&&(this.unit=""),n!==""&&!g2e.test(n)&&(this.num=NaN,this.unit=""),b2e(n)&&(this.num=x2e(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new $r(NaN,""):new $r(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new $r(NaN,""):new $r(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new $r(NaN,""):new $r(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new $r(NaN,""):new $r(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ua(this.num)}}sK=$r;f2e($r,"NaN",new sK(NaN,""));function oK(t){if(t==null||t.includes($f))return $f;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=nB.exec(e))!==null&&n!==void 0?n:[],s=$r.parse(r??""),o=$r.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return $f;e=e.replace(nB,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,f,h,g]=(d=rB.exec(e))!==null&&d!==void 0?d:[],v=$r.parse(f??""),b=$r.parse(g??""),x=h==="+"?v.add(b):v.subtract(b);if(x.isNaN())return $f;e=e.replace(rB,x.toString())}return e}var iB=/\(([^()]*)\)/;function w2e(t){for(var e=t,n;(n=iB.exec(e))!=null;){var[,r]=n;e=e.replace(iB,oK(r))}return e}function S2e(t){var e=t.replace(/\s+/g,"");return e=w2e(e),e=oK(e),e}function _2e(t){try{return S2e(t)}catch{return $f}}function EA(t){var e=_2e(t.slice(5,-1));return e===$f?"":e}var E2e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],T2e=["dx","dy","angle","className","breakAll"];function n2(){return n2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n2.apply(null,arguments)}function aB(t,e){if(t==null)return{};var n,r,i=A2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function A2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var lK=/[ \f\n\r\t\v\u2028\u2029]+/,cK=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Pr(e)||(n?i=e.toString().split(""):i=e.toString().split(lK));var a=i.map(o=>({word:o,width:Wg(o,r).width})),s=n?0:Wg("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function k2e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var uK=(t,e,n,r)=>t.reduce((i,a)=>{var{word:s,width:o}=a,c=i[i.length-1];if(c&&o!=null&&(e==null||r||c.width+o+n<Number(e)))c.words.push(s),c.width+=o+n;else{var d={words:[s],width:o};i.push(d)}return i},[]),dK=t=>t.reduce((e,n)=>e.width>n.width?e:n),C2e="",sB=(t,e,n,r,i,a,s,o)=>{var c=t.slice(0,e),d=cK({breakAll:n,style:r,children:c+C2e});if(!d)return[!1,[]];var f=uK(d.wordsWithComputedWidth,a,s,o),h=f.length>i||dK(f).width>Number(a);return[h,f]},N2e=(t,e,n,r,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=t,d=qe(a),f=String(s),h=uK(e,r,n,i);if(!d||i)return h;var g=h.length>a||dK(h).width>Number(r);if(!g)return h;for(var v=0,b=f.length-1,x=0,w;v<=b&&x<=f.length-1;){var _=Math.floor((v+b)/2),T=_-1,[N,D]=sB(f,T,c,o,a,r,n,i),[P]=sB(f,_,c,o,a,r,n,i);if(!N&&!P&&(v=_+1),N&&P&&(b=_-1),!N&&P){w=D;break}x++}return w||h},oB=t=>{var e=Pr(t)?[]:t.toString().split(lK);return[{words:e,width:void 0}]},I2e=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=t;if((e||n)&&!Cw.isSsr){var o,c,d=cK({breakAll:a,children:r,style:i});if(d){var{wordsWithComputedWidth:f,spaceWidth:h}=d;o=f,c=h}else return oB(r);return N2e({breakAll:a,children:r,maxLines:s,style:i},o,c,e,!!n)}return oB(r)},fK="#808080",O2e={angle:0,breakAll:!1,capHeight:"0.71em",fill:fK,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Yw=A.forwardRef((t,e)=>{var n=Wr(t,O2e),{x:r,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:d,verticalAnchor:f}=n,h=aB(n,E2e),g=A.useMemo(()=>I2e({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:v,dy:b,angle:x,className:w,breakAll:_}=h,T=aB(h,T2e);if(!La(r)||!La(i)||g.length===0)return null;var N=Number(r)+(qe(v)?v:0),D=Number(i)+(qe(b)?b:0);if(!en(N)||!en(D))return null;var P;switch(f){case"start":P=EA("calc(".concat(s,")"));break;case"middle":P=EA("calc(".concat((g.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:P=EA("calc(".concat(g.length-1," * -").concat(a,")"));break}var O=[];if(c){var C=g[0].width,{width:I}=h;O.push("scale(".concat(qe(I)&&qe(C)?I/C:1,")"))}return x&&O.push("rotate(".concat(x,", ").concat(N,", ").concat(D,")")),O.length&&(T.transform=O.join(" ")),A.createElement("text",n2({},ca(T),{ref:e,x:N,y:D,className:qt("recharts-text",w),textAnchor:d,fill:o.includes("url")?fK:o}),g.map((R,j)=>{var L=R.words.join(_?"":" ");return A.createElement("tspan",{x:N,dy:j===0?P:a,key:"".concat(L,"-").concat(j)},L)}))});Yw.displayName="Text";var P2e=["labelRef"],D2e=["content"];function lB(t,e){if(t==null)return{};var n,r,i=R2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function R2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function cB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cB(Object(n),!0).forEach(function(r){M2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M2e(t,e,n){return(e=j2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j2e(t){var e=z2e(t,"string");return typeof e=="symbol"?e:e+""}function z2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uo(){return Uo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uo.apply(null,arguments)}var hK=A.createContext(null),pK=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s,children:o}=t,c=A.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,n,r,i,a,s]);return A.createElement(hK.Provider,{value:c},o)},gK=()=>{var t=A.useContext(hK),e=bv();return t||IH(e)},L2e=A.createContext(null),V2e=()=>{var t=A.useContext(L2e),e=Fe(iY);return t||e},B2e=t=>{var{value:e,formatter:n}=t,r=Pr(t.children)?e:t.children;return typeof n=="function"?n(r):r},vP=t=>t!=null&&typeof t=="function",U2e=(t,e)=>{var n=Ir(e-t),r=Math.min(Math.abs(e-t),360);return n*r},F2e=(t,e,n,r,i)=>{var{offset:a,className:s}=t,{cx:o,cy:c,innerRadius:d,outerRadius:f,startAngle:h,endAngle:g,clockWise:v}=i,b=(d+f)/2,x=U2e(h,g),w=x>=0?1:-1,_,T;switch(e){case"insideStart":_=h+w*a,T=v;break;case"insideEnd":_=g-w*a,T=!v;break;case"end":_=g+w*a,T=v;break;default:throw new Error("Unsupported position ".concat(e))}T=x<=0?T:!T;var N=sr(o,c,b,_),D=sr(o,c,b,_+(T?1:-1)*359),P="M".concat(N.x,",").concat(N.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(D.x,",").concat(D.y),O=Pr(t.id)?ym("recharts-radial-line-"):t.id;return A.createElement("text",Uo({},r,{dominantBaseline:"central",className:qt("recharts-radial-bar-label",s)}),A.createElement("defs",null,A.createElement("path",{id:O,d:P})),A.createElement("textPath",{xlinkHref:"#".concat(O)},n))},$2e=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=t,d=(o+c)/2;if(n==="outside"){var{x:f,y:h}=sr(r,i,s+e,d);return{x:f,y:h,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+s)/2,{x:v,y:b}=sr(r,i,g,d);return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},r2=t=>"cx"in t&&qe(t.cx),q2e=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,a;n!=null&&!r2(n)&&(a=n);var{x:s,y:o,upperWidth:c,lowerWidth:d,height:f}=e,h=s,g=s+(c-d)/2,v=(h+g)/2,b=(c+d)/2,x=h+c/2,w=f>=0?1:-1,_=w*r,T=w>0?"end":"start",N=w>0?"start":"end",D=c>=0?1:-1,P=D*r,O=D>0?"end":"start",C=D>0?"start":"end";if(i==="top"){var I={x:h+c/2,y:o-_,textAnchor:"middle",verticalAnchor:T};return Fn(Fn({},I),a?{height:Math.max(o-a.y,0),width:c}:{})}if(i==="bottom"){var R={x:g+d/2,y:o+f+_,textAnchor:"middle",verticalAnchor:N};return Fn(Fn({},R),a?{height:Math.max(a.y+a.height-(o+f),0),width:d}:{})}if(i==="left"){var j={x:v-P,y:o+f/2,textAnchor:O,verticalAnchor:"middle"};return Fn(Fn({},j),a?{width:Math.max(j.x-a.x,0),height:f}:{})}if(i==="right"){var L={x:v+b+P,y:o+f/2,textAnchor:C,verticalAnchor:"middle"};return Fn(Fn({},L),a?{width:Math.max(a.x+a.width-L.x,0),height:f}:{})}var B=a?{width:b,height:f}:{};return i==="insideLeft"?Fn({x:v+P,y:o+f/2,textAnchor:C,verticalAnchor:"middle"},B):i==="insideRight"?Fn({x:v+b-P,y:o+f/2,textAnchor:O,verticalAnchor:"middle"},B):i==="insideTop"?Fn({x:h+c/2,y:o+_,textAnchor:"middle",verticalAnchor:N},B):i==="insideBottom"?Fn({x:g+d/2,y:o+f-_,textAnchor:"middle",verticalAnchor:T},B):i==="insideTopLeft"?Fn({x:h+P,y:o+_,textAnchor:C,verticalAnchor:N},B):i==="insideTopRight"?Fn({x:h+c-P,y:o+_,textAnchor:O,verticalAnchor:N},B):i==="insideBottomLeft"?Fn({x:g+P,y:o+f-_,textAnchor:C,verticalAnchor:T},B):i==="insideBottomRight"?Fn({x:g+d-P,y:o+f-_,textAnchor:O,verticalAnchor:T},B):i&&typeof i=="object"&&(qe(i.x)||fl(i.x))&&(qe(i.y)||fl(i.y))?Fn({x:s+ai(i.x,b),y:o+ai(i.y,f),textAnchor:"end",verticalAnchor:"end"},B):Fn({x,y:o+f/2,textAnchor:"middle",verticalAnchor:"middle"},B)},G2e={angle:0,offset:5,zIndex:Or.label,position:"middle",textBreakAll:!1};function lc(t){var e=Wr(t,G2e),{viewBox:n,position:r,value:i,children:a,content:s,className:o="",textBreakAll:c,labelRef:d}=e,f=V2e(),h=gK(),g=r==="center"?h:f??h,v,b,x;if(n==null?v=g:r2(n)?v=n:v=IH(n),!v||Pr(i)&&Pr(a)&&!A.isValidElement(s)&&typeof s!="function")return null;var w=Fn(Fn({},e),{},{viewBox:v});if(A.isValidElement(s)){var{labelRef:_}=w,T=lB(w,P2e);return A.cloneElement(s,T)}if(typeof s=="function"){var{content:N}=w,D=lB(w,D2e);if(b=A.createElement(s,D),A.isValidElement(b))return b}else b=B2e(e);var P=ca(e);if(r2(v)){if(r==="insideStart"||r==="insideEnd"||r==="end")return F2e(e,r,b,P,v);x=$2e(v,e.offset,e.position)}else x=q2e(e,v);return A.createElement(Ga,{zIndex:e.zIndex},A.createElement(Yw,Uo({ref:d,className:qt("recharts-label",o)},P,x,{textAnchor:k2e(P.textAnchor)?P.textAnchor:x.textAnchor,breakAll:c}),b))}lc.displayName="Label";var H2e=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?A.createElement(lc,Uo({key:"label-implicit"},r)):La(t)?A.createElement(lc,Uo({key:"label-implicit",value:t},r)):A.isValidElement(t)?t.type===lc?A.cloneElement(t,Fn({key:"label-implicit"},r)):A.createElement(lc,Uo({key:"label-implicit",content:t},r)):vP(t)?A.createElement(lc,Uo({key:"label-implicit",content:t},r)):t&&typeof t=="object"?A.createElement(lc,Uo({},t,{key:"label-implicit"},r)):null};function mK(t){var{label:e,labelRef:n}=t,r=gK();return H2e(e,r,n)||null}var TA={},AA={},uB;function W2e(){return uB||(uB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(AA)),AA}var kA={},dB;function Y2e(){return dB||(dB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(kA)),kA}var fB;function K2e(){return fB||(fB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=W2e(),n=Y2e(),r=YI();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(TA)),TA}var CA,hB;function X2e(){return hB||(hB=1,CA=K2e().last),CA}var Q2e=X2e();const Z2e=bl(Q2e);var J2e=["valueAccessor"],eNe=["dataKey","clockWise","id","textBreakAll","zIndex"];function t1(){return t1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t1.apply(null,arguments)}function pB(t,e){if(t==null)return{};var n,r,i=tNe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var nNe=t=>Array.isArray(t.value)?Z2e(t.value):t.value,vK=A.createContext(void 0),rNe=vK.Provider,yK=A.createContext(void 0),iNe=yK.Provider;function aNe(){return A.useContext(vK)}function sNe(){return A.useContext(yK)}function Tb(t){var{valueAccessor:e=nNe}=t,n=pB(t,J2e),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:o}=n,c=pB(n,eNe),d=aNe(),f=sNe(),h=d||f;return!h||!h.length?null:A.createElement(Ga,{zIndex:o??Or.label},A.createElement(li,{className:"recharts-label-list"},h.map((g,v)=>{var b,x=Pr(r)?e(g,v):pn(g&&g.payload,r),w=Pr(a)?{}:{id:"".concat(a,"-").concat(v)};return A.createElement(lc,t1({key:"label-".concat(v)},ca(g),c,w,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:x,textBreakAll:s,viewBox:g.viewBox,index:v,zIndex:0}))})))}Tb.displayName="LabelList";function bK(t){var{label:e}=t;return e?e===!0?A.createElement(Tb,{key:"labelList-implicit"}):A.isValidElement(e)||vP(e)?A.createElement(Tb,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(Tb,t1({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var xK=t=>t.graphicalItems.polarItems,oNe=me([wn,kv],BO),Kw=me([xK,In,oNe],FO),lNe=me([Kw],$O),Xw=me([lNe,zw],qO),cNe=me([Xw,In,Kw],HO);me([Xw,In,Kw],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,s=pn(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:pn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var gB=()=>{},uNe=me([Xw,In,Kw,qw,wn],XO),dNe=me([In,YO,KO,gB,uNe,gB,Pt,wn],QO),wK=me([In,Pt,Xw,cNe,Av,wn,dNe],ZO),fNe=me([wK,In,Zh],tP);me([In,wK,fNe,wn],rP);var hNe={radiusAxis:{},angleAxis:{}},SK=Fi({name:"polarAxis",initialState:hNe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:bMe,removeRadiusAxis:xMe,addAngleAxis:wMe,removeAngleAxis:SMe}=SK.actions,pNe=SK.reducer;function mB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mB(Object(n),!0).forEach(function(r){gNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gNe(t,e,n){return(e=mNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mNe(t){var e=vNe(t,"string");return typeof e=="symbol"?e:e+""}function vNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yNe=(t,e)=>e,yP=me([xK,yNe],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),bNe=[],bP=(t,e,n)=>n?.length===0?bNe:n,_K=me([zw,yP,bP],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>vB(vB({},e.presentationProps),a.props))),i!=null)return i}}),xNe=me([_K,yP,bP],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,s=pn(r,e.nameKey,e.name),o;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?o=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:yw(s,e.dataKey),color:o,payload:r,type:e.legendType}})}),wNe=me([_K,yP,bP,yr],(t,e,n,r)=>{if(!(e==null||t==null))return TIe({offset:r,pieSettings:e,displayedData:t,cells:n})}),NA={exports:{}},Kt={};var yB;function SNe(){if(yB)return Kt;yB=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function b(x){if(typeof x=="object"&&x!==null){var w=x.$$typeof;switch(w){case t:switch(x=x.type,x){case n:case i:case r:case c:case d:case g:return x;default:switch(x=x&&x.$$typeof,x){case s:case o:case h:case f:return x;case a:return x;default:return w}}case e:return w}}}return Kt.ContextConsumer=a,Kt.ContextProvider=s,Kt.Element=t,Kt.ForwardRef=o,Kt.Fragment=n,Kt.Lazy=h,Kt.Memo=f,Kt.Portal=e,Kt.Profiler=i,Kt.StrictMode=r,Kt.Suspense=c,Kt.SuspenseList=d,Kt.isContextConsumer=function(x){return b(x)===a},Kt.isContextProvider=function(x){return b(x)===s},Kt.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},Kt.isForwardRef=function(x){return b(x)===o},Kt.isFragment=function(x){return b(x)===n},Kt.isLazy=function(x){return b(x)===h},Kt.isMemo=function(x){return b(x)===f},Kt.isPortal=function(x){return b(x)===e},Kt.isProfiler=function(x){return b(x)===i},Kt.isStrictMode=function(x){return b(x)===r},Kt.isSuspense=function(x){return b(x)===c},Kt.isSuspenseList=function(x){return b(x)===d},Kt.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===c||x===d||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===f||x.$$typeof===s||x.$$typeof===a||x.$$typeof===o||x.$$typeof===v||x.getModuleId!==void 0)},Kt.typeOf=b,Kt}var bB;function _Ne(){return bB||(bB=1,NA.exports=SNe()),NA.exports}var ENe=_Ne(),xB=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",wB=null,IA=null,EK=t=>{if(t===wB&&Array.isArray(IA))return IA;var e=[];return A.Children.forEach(t,n=>{Pr(n)||(ENe.isFragment(n)?e=e.concat(EK(n.props.children)):e.push(n))}),IA=e,wB=t,e};function xP(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>xB(i)):r=[xB(e)],EK(t).forEach(i=>{var a=cd(i,"type.displayName")||cd(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var OA={},SB;function TNe(){return SB||(SB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(OA)),OA}var PA,_B;function ANe(){return _B||(_B=1,PA=TNe().isPlainObject),PA}var kNe=ANe();const CNe=bl(kNe);var EB,TB,AB,kB,CB;function NB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NB(Object(n),!0).forEach(function(r){NNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NNe(t,e,n){return(e=INe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function INe(t){var e=ONe(t,"string");return typeof e=="symbol"?e:e+""}function ONe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n1(){return n1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n1.apply(null,arguments)}function gg(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var OB=(t,e,n,r,i)=>{var a=n-r,s;return s=Mn(EB||(EB=gg(["M ",",",""])),t,e),s+=Mn(TB||(TB=gg(["L ",",",""])),t+n,e),s+=Mn(AB||(AB=gg(["L ",",",""])),t+n-a/2,e+i),s+=Mn(kB||(kB=gg(["L ",",",""])),t+n-a/2-r,e+i),s+=Mn(CB||(CB=gg(["L ",","," Z"])),t,e),s},PNe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DNe=t=>{var e=Wr(t,PNe),{x:n,y:r,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:c,animationDuration:d,animationBegin:f,isUpdateAnimationActive:h}=e,g=A.useRef(null),[v,b]=A.useState(-1),x=A.useRef(i),w=A.useRef(a),_=A.useRef(s),T=A.useRef(n),N=A.useRef(r),D=Iw(t,"trapezoid-");if(A.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var Y=g.current.getTotalLength();Y&&b(Y)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var P=qt("recharts-trapezoid",o);if(!h)return A.createElement("g",null,A.createElement("path",n1({},ca(e),{className:P,d:OB(n,r,i,a,s)})));var O=x.current,C=w.current,I=_.current,R=T.current,j=N.current,L="0px ".concat(v===-1?1:v,"px"),B="".concat(v,"px 0px"),z=GH(["strokeDasharray"],d,c);return A.createElement(Nw,{animationId:D,key:D,canBegin:v>0,duration:d,easing:c,isActive:h,begin:f},Y=>{var Z=hr(O,i,Y),G=hr(C,a,Y),K=hr(I,s,Y),X=hr(R,n,Y),ee=hr(j,r,Y);g.current&&(x.current=Z,w.current=G,_.current=K,T.current=X,N.current=ee);var J=Y>0?{transition:z,strokeDasharray:B}:{strokeDasharray:L};return A.createElement("path",n1({},ca(e),{className:P,d:OB(X,ee,Z,G,K),ref:g,style:IB(IB({},J),e.style)}))})},RNe=["option","shapeType","activeClassName"];function MNe(t,e){if(t==null)return{};var n,r,i=jNe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function PB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function r1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PB(Object(n),!0).forEach(function(r){zNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zNe(t,e,n){return(e=LNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LNe(t){var e=VNe(t,"string");return typeof e=="symbol"?e:e+""}function VNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BNe(t,e){return r1(r1({},e),t)}function UNe(t,e){return t==="symbols"}function DB(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return A.createElement(KH,n);case"trapezoid":return A.createElement(DNe,n);case"sector":return A.createElement(JH,n);case"symbols":if(UNe(e))return A.createElement(OG,n);break;case"curve":return A.createElement(sO,n);default:return null}}function FNe(t){return A.isValidElement(t)?t.props:t}function TK(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=MNe(t,RNe),a;if(A.isValidElement(e))a=A.cloneElement(e,r1(r1({},i),FNe(e)));else if(typeof e=="function")a=e(i,i.index);else if(CNe(e)&&typeof e!="boolean"){var s=BNe(e,i);a=A.createElement(DB,{shapeType:n,elementProps:s})}else{var o=i;a=A.createElement(DB,{shapeType:n,elementProps:o})}return i.isActive?A.createElement(li,{className:r},a):a}var wP=(t,e,n)=>{var r=gn();return(i,a)=>s=>{t?.(i,a,s),r(MY({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},SP=t=>{var e=gn();return(n,r)=>i=>{t?.(n,r,i),e(QAe())}},_P=(t,e,n)=>{var r=gn();return(i,a)=>s=>{t?.(i,a,s),r(ZAe({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function AK(t){var{tooltipEntrySettings:e}=t,n=gn(),r=_i(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(WAe(e)):i.current!==e&&n(YAe({prev:i.current,next:e})),i.current=e)},[e,n,r]),A.useLayoutEffect(()=>()=>{i.current&&(n(KAe(i.current)),i.current=null)},[n]),null}function $Ne(t){var{legendPayload:e}=t,n=gn(),r=_i(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(UH(e)):i.current!==e&&n(FH({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n($H(i.current)),i.current=null)},[n]),null}function qNe(t){var{legendPayload:e}=t,n=gn(),r=Fe(Pt),i=A.useRef(null);return A.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(UH(e)):i.current!==e&&n(FH({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n($H(i.current)),i.current=null)},[n]),null}var DA,GNe=()=>{var[t]=A.useState(()=>ym("uid-"));return t},HNe=(DA=qQ.useId)!==null&&DA!==void 0?DA:GNe;function WNe(t,e){var n=HNe();return e||(t?"".concat(t,"-").concat(n):n)}var YNe=A.createContext(void 0),kK=t=>{var{id:e,type:n,children:r}=t,i=WNe("recharts-".concat(n),e);return A.createElement(YNe.Provider,{value:i},r(i))},KNe={cartesianItems:[],polarItems:[]},CK=Fi({name:"graphicalItems",initialState:KNe,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:yn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ps(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:yn()},removeCartesianGraphicalItem:{reducer(t,e){var n=ps(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:yn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:yn()},removePolarGraphicalItem:{reducer(t,e){var n=ps(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:yn()}}}),{addCartesianGraphicalItem:XNe,replaceCartesianGraphicalItem:QNe,removeCartesianGraphicalItem:ZNe,addPolarGraphicalItem:JNe,removePolarGraphicalItem:eIe}=CK.actions,tIe=CK.reducer,nIe=t=>{var e=gn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(XNe(t)):n.current!==t&&e(QNe({prev:n.current,next:t})),n.current=t},[e,t]),A.useLayoutEffect(()=>()=>{n.current&&(e(ZNe(n.current)),n.current=null)},[e]),null},rIe=A.memo(nIe);function iIe(t){var e=gn();return A.useLayoutEffect(()=>(e(JNe(t)),()=>{e(eIe(t))}),[e,t]),null}var aIe=["key"],sIe=["onMouseEnter","onClick","onMouseLeave"],oIe=["id"],lIe=["id"];function RB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RB(Object(n),!0).forEach(function(r){cIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cIe(t,e,n){return(e=uIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uIe(t){var e=dIe(t,"string");return typeof e=="symbol"?e:e+""}function dIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bc(){return Bc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bc.apply(null,arguments)}function Qw(t,e){if(t==null)return{};var n,r,i=fIe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function fIe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function hIe(t){var e=A.useMemo(()=>xP(t.children,Mv),[t.children]),n=Fe(r=>xNe(r,t.id,e));return n==null?null:A.createElement(qNe,{legendPayload:n})}var pIe=A.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:s,name:o,hide:c,tooltipType:d,id:f}=t,h={dataDefinedOnItem:r.map(g=>g.tooltipPayload),positions:r.map(g=>g.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:s,dataKey:e,nameKey:n,name:yw(o,e),hide:c,type:d,color:s,unit:"",graphicalItemId:f}};return A.createElement(AK,{tooltipEntrySettings:h})}),gIe=(t,e)=>t>e?"start":t<e?"end":"middle",mIe=(t,e,n)=>ai(typeof e=="function"?e(t):e,n,n*.8),vIe=(t,e,n)=>{var{top:r,left:i,width:a,height:s}=e,o=XH(a,s),c=i+ai(t.cx,a,a/2),d=r+ai(t.cy,s,s/2),f=ai(t.innerRadius,o,0),h=mIe(n,t.outerRadius,o),g=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:d,innerRadius:f,outerRadius:h,maxRadius:g}},yIe=(t,e)=>{var n=Ir(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function bIe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var xIe=(t,e)=>{if(A.isValidElement(t))return A.cloneElement(t,e);if(typeof t=="function")return t(e);var n=qt("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=Qw(e,aIe);return A.createElement(sO,Bc({},i,{type:"linear",className:n}))},wIe=(t,e,n)=>{if(A.isValidElement(t))return A.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),A.isValidElement(r)))return r;var i=qt("recharts-pie-label-text",bIe(t));return A.createElement(Yw,Bc({},e,{alignmentBaseline:"middle",className:i}),r)};function SIe(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:s}=n;if(!r||!i||!e)return null;var o=bs(n),c=vm(i),d=vm(a),f=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=e.map((g,v)=>{var b=(g.startAngle+g.endAngle)/2,x=sr(g.cx,g.cy,g.outerRadius+f,b),w=jn(jn(jn(jn({},o),g),{},{stroke:"none"},c),{},{index:v,textAnchor:gIe(x.x,g.cx)},x),_=jn(jn(jn(jn({},o),g),{},{fill:"none",stroke:g.fill},d),{},{index:v,points:[sr(g.cx,g.cy,g.outerRadius,b),x],key:"line"});return A.createElement(Ga,{zIndex:Or.label,key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},A.createElement(li,null,a&&xIe(a,_),wIe(i,w,pn(g,s))))});return A.createElement(li,{className:"recharts-pie-labels"},h)}function _Ie(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?A.createElement(bK,{label:i}):A.createElement(SIe,{sectors:e,props:n,showLabels:r})}function EIe(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:s}=t,o=Fe(pd),c=Fe(fP),d=Fe(zke),{onMouseEnter:f,onClick:h,onMouseLeave:g}=i,v=Qw(i,sIe),b=wP(f,i.dataKey,s),x=SP(g),w=_P(h,i.dataKey,s);return e==null||e.length===0?null:A.createElement(A.Fragment,null,e.map((_,T)=>{if(_?.startAngle===0&&_?.endAngle===0&&e.length!==1)return null;var N=d==null||d===s,D=String(T)===o&&(c==null||i.dataKey===c)&&N,P=o?r:null,O=n&&D?n:P,C=jn(jn({},_),{},{stroke:_.stroke,tabIndex:-1,[TH]:T,[AH]:s});return A.createElement(li,Bc({key:"sector-".concat(_?.startAngle,"-").concat(_?.endAngle,"-").concat(_.midAngle,"-").concat(T),tabIndex:-1,className:"recharts-pie-sector"},ow(v,_,T),{onMouseEnter:b(_,T),onMouseLeave:x(_,T),onClick:w(_,T)}),A.createElement(TK,Bc({option:a??O,index:T,shapeType:"sector",isActive:D},C)))}))}function TIe(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:s,startAngle:o,endAngle:c,dataKey:d,nameKey:f,tooltipType:h}=n,g=Math.abs(n.minAngle),v=yIe(o,c),b=Math.abs(v),x=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,w=r.filter(O=>pn(O,d,0)!==0).length,_=(b>=360?w:w-1)*x,T=b-w*g-_,N=r.reduce((O,C)=>{var I=pn(C,d,0);return O+(qe(I)?I:0)},0),D;if(N>0){var P;D=r.map((O,C)=>{var I=pn(O,d,0),R=pn(O,f,C),j=vIe(n,a,O),L=(qe(I)?I:0)/N,B,z=jn(jn({},O),i&&i[C]&&i[C].props);C?B=P.endAngle+Ir(v)*x*(I!==0?1:0):B=o;var Y=B+Ir(v)*((I!==0?g:0)+L*T),Z=(B+Y)/2,G=(j.innerRadius+j.outerRadius)/2,K=[{name:R,value:I,payload:z,dataKey:d,type:h,graphicalItemId:n.id}],X=sr(j.cx,j.cy,G,Z);return P=jn(jn(jn(jn({},n.presentationProps),{},{percent:L,cornerRadius:typeof s=="string"?parseFloat(s):s,name:R,tooltipPayload:K,midAngle:Z,middleRadius:G,tooltipPosition:X},z),j),{},{value:I,dataKey:d,startAngle:B,endAngle:Y,payload:z,paddingAngle:Ir(v)*x}),P})}return D}function AIe(t){var{showLabels:e,sectors:n,children:r}=t,i=A.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return A.createElement(iNe,{value:e?i:void 0},r)}function kIe(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,activeShape:d,inactiveShape:f,onAnimationStart:h,onAnimationEnd:g}=e,v=Iw(e,"recharts-pie-"),b=n.current,[x,w]=A.useState(!1),_=A.useCallback(()=>{typeof g=="function"&&g(),w(!1)},[g]),T=A.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return A.createElement(AIe,{showLabels:!x,sectors:i},A.createElement(Nw,{animationId:v,begin:s,duration:o,isActive:a,easing:c,onAnimationStart:T,onAnimationEnd:_,key:v},N=>{var D=[],P=i&&i[0],O=P?.startAngle;return i?.forEach((C,I)=>{var R=b&&b[I],j=I>0?cd(C,"paddingAngle",0):0;if(R){var L=hr(R.endAngle-R.startAngle,C.endAngle-C.startAngle,N),B=jn(jn({},C),{},{startAngle:O+j,endAngle:O+L+j});D.push(B),O=B.endAngle}else{var{endAngle:z,startAngle:Y}=C,Z=hr(0,z-Y,N),G=jn(jn({},C),{},{startAngle:O+j,endAngle:O+Z+j});D.push(G),O=G.endAngle}}),n.current=D,A.createElement(li,null,A.createElement(EIe,{sectors:D,activeShape:d,inactiveShape:f,allOtherPieProps:e,shape:e.shape,id:r}))}),A.createElement(_Ie,{showLabels:!x,sectors:i,props:e}),e.children)}var CIe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Or.area};function NIe(t){var{id:e}=t,n=Qw(t,oIe),{hide:r,className:i,rootTabIndex:a}=t,s=A.useMemo(()=>xP(t.children,Mv),[t.children]),o=Fe(f=>wNe(f,e,s)),c=A.useRef(null),d=qt("recharts-pie",i);return r||o==null?(c.current=null,A.createElement(li,{tabIndex:a,className:d})):A.createElement(Ga,{zIndex:t.zIndex},A.createElement(pIe,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:o,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),A.createElement(li,{tabIndex:a,className:d},A.createElement(kIe,{props:jn(jn({},n),{},{sectors:o}),previousSectorsRef:c,id:e})))}function NK(t){var e=Wr(t,CIe),{id:n}=e,r=Qw(e,lIe),i=bs(r);return A.createElement(kK,{id:n,type:"pie"},a=>A.createElement(A.Fragment,null,A.createElement(iIe,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),A.createElement(hIe,Bc({},r,{id:a})),A.createElement(NIe,Bc({},r,{id:a}))))}NK.displayName="Pie";function MB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MB(Object(n),!0).forEach(function(r){IIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IIe(t,e,n){return(e=OIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OIe(t){var e=PIe(t,"string");return typeof e=="symbol"?e:e+""}function PIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IK=0,DIe={xAxis:{},yAxis:{},zAxis:{}},OK=Fi({name:"cartesianAxis",initialState:DIe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:yn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:yn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:yn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:yn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:yn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:yn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:yn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:yn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:yn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var s=[...a,r].slice(-3);t.yAxis[n]=jB(jB({},t.yAxis[n]),{},{width:r,widthHistory:s})}}}}),{addXAxis:RIe,replaceXAxis:MIe,removeXAxis:jIe,addYAxis:zIe,replaceYAxis:LIe,removeYAxis:VIe,addZAxis:_Me,replaceZAxis:EMe,removeZAxis:TMe,updateYAxisWidth:BIe}=OK.actions,UIe=OK.reducer,FIe=me([yr],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),$Ie=me([FIe,wl,Sl],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),PK=()=>Fe($Ie),zB=(t,e,n)=>{var r=n??t;if(!Pr(r))return ai(r,e,0)},qIe=(t,e,n)=>{var r={},i=t.filter(Bw),a=t.filter(d=>d.stackId==null),s=i.reduce((d,f)=>(d[f.stackId]||(d[f.stackId]=[]),d[f.stackId].push(f),d),r),o=Object.entries(s).map(d=>{var[f,h]=d,g=h.map(b=>b.dataKey),v=zB(e,n,h[0].barSize);return{stackId:f,dataKeys:g,barSize:v}}),c=a.map(d=>{var f=[d.dataKey].filter(g=>g!=null),h=zB(e,n,d.barSize);return{stackId:void 0,dataKeys:f,barSize:h}});return[...o,...c]};function LB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LB(Object(n),!0).forEach(function(r){GIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GIe(t,e,n){return(e=HIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HIe(t){var e=WIe(t,"string");return typeof e=="symbol"?e:e+""}function WIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YIe(t,e,n,r,i){var a=r.length;if(!(a<1)){var s=ai(t,n,0,!0),o,c=[];if(en(r[0].barSize)){var d=!1,f=n/a,h=r.reduce((_,T)=>_+(T.barSize||0),0);h+=(a-1)*s,h>=n&&(h-=(a-1)*s,s=0),h>=n&&f>0&&(d=!0,f*=.9,h=a*f);var g=(n-h)/2>>0,v={offset:g-s,size:0};o=r.reduce((_,T)=>{var N,D={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:v.offset+v.size+s,size:d?f:(N=T.barSize)!==null&&N!==void 0?N:0}},P=[..._,D];return v=P[P.length-1].position,P},c)}else{var b=ai(e,n,0,!0);n-2*b-(a-1)*s<=0&&(s=0);var x=(n-2*b-(a-1)*s)/a;x>1&&(x>>=0);var w=en(i)?Math.min(x,i):x;o=r.reduce((_,T,N)=>[..._,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:b+(x+s)*N+(x-w)/2,size:w}}],c)}return o}}var KIe=(t,e,n,r,i,a,s)=>{var o=Pr(s)?e:s,c=YIe(n,r,i!==a?i:a,t,o);return i!==a&&c!=null&&(c=c.map(d=>Qy(Qy({},d),{},{position:Qy(Qy({},d.position),{},{offset:d.position.offset-i/2})}))),c},XIe=(t,e)=>{var n=LO(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===n)}}}};function QIe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&en(t.zIndex)?t.zIndex:e}var DK=t=>{var{chartData:e}=t,n=gn(),r=_i();return A.useEffect(()=>r?()=>{}:(n(W6(e)),()=>{n(W6(void 0))}),[e,n,r]),null},VB={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},RK=Fi({name:"brush",initialState:VB,reducers:{setBrushSettings(t,e){return e.payload==null?VB:e.payload}}}),{setBrushSettings:AMe}=RK.actions,ZIe=RK.reducer;function BB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(n),!0).forEach(function(r){MK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MK(t,e,n){return(e=JIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JIe(t){var e=eOe(t,"string");return typeof e=="symbol"?e:e+""}function eOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tOe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},nOe=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return tOe({x:e,y:n},{x:r,y:i})};class Zw{static create(e){return new Zw(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}MK(Zw,"EPS",1e-4);var rOe=t=>{var e=Object.keys(t).reduce((n,r)=>Zy(Zy({},n),{},{[r]:Zw.create(t[r])}),{});return Zy(Zy({},e),{},{apply(n){var{bandAware:r,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(a=>{var[s,o]=a;return[s,e[s].apply(o,{bandAware:r,position:i})]}))},isInRange(n){return Object.keys(n).every(r=>e[r].isInRange(n[r]))}})};function iOe(t){return(t%180+180)%180}var aOe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=iOe(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},sOe={dots:[],areas:[],lines:[]},jK=Fi({name:"referenceElements",initialState:sOe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=ps(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=ps(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=ps(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:kMe,removeDot:CMe,addArea:NMe,removeArea:IMe,addLine:oOe,removeLine:lOe}=jK.actions,cOe=jK.reducer,zK=A.createContext(void 0),uOe=t=>{var{children:e}=t,[n]=A.useState("".concat(ym("recharts"),"-clip")),r=PK();if(r==null)return null;var{x:i,y:a,width:s,height:o}=r;return A.createElement(zK.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:a,height:o,width:s}))),e)},dOe=()=>A.useContext(zK);function UB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UB(Object(n),!0).forEach(function(r){fOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fOe(t,e,n){return(e=hOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hOe(t){var e=pOe(t,"string");return typeof e=="symbol"?e:e+""}function pOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function i1(){return i1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i1.apply(null,arguments)}var gOe=(t,e)=>{var n;if(A.isValidElement(t))n=A.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!en(e.x1)||!en(e.y1)||!en(e.x2)||!en(e.y2))return null;n=A.createElement("line",i1({},e,{className:"recharts-reference-line-line"}))}return n},mOe=(t,e,n,r,i,a)=>{var{x:s,width:o}=a,c=i.y.apply(t,{position:n});if(ua(c)||e==="discard"&&!i.y.isInRange(c))return null;var d=[{x:s+o,y:c},{x:s,y:c}];return r==="left"?d.reverse():d},vOe=(t,e,n,r,i,a)=>{var{y:s,height:o}=a,c=i.x.apply(t,{position:n});if(ua(c)||e==="discard"&&!i.x.isInRange(c))return null;var d=[{x:c,y:s+o},{x:c,y:s}];return r==="top"?d.reverse():d},yOe=(t,e,n,r)=>{var i=t.map(a=>r.apply(a,{position:n}));return e==="discard"&&i.some(a=>!r.isInRange(a))?null:i},bOe=(t,e,n,r,i,a)=>{var{x:s,y:o,segment:c,ifOverflow:d}=a,f=La(s),h=La(o);return h?mOe(o,d,n,i,t,e):f?vOe(s,d,n,r,t,e):c!=null&&c.length===2?yOe(c,d,n,t):null};function xOe(t){var e=gn();return A.useEffect(()=>(e(oOe(t)),()=>{e(lOe(t))})),null}function wOe(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:a}=t,s=_i(),o=dOe(),c=Fe(O=>vo(O,e)),d=Fe(O=>yo(O,n)),f=Fe(O=>kh(O,"xAxis",e,s)),h=Fe(O=>kh(O,"yAxis",n,s)),g=bv();if(!o||!g||c==null||d==null||f==null||h==null)return null;var v=rOe({x:f,y:h}),b=bOe(v,g,t.position,c.orientation,d.orientation,t);if(!b)return null;var[{x,y:w},{x:_,y:T}]=b,N=a==="hidden"?"url(#".concat(o,")"):void 0,D=FB(FB({clipPath:N},ca(t)),{},{x1:x,y1:w,x2:_,y2:T}),P=nOe({x1:x,y1:w,x2:_,y2:T});return A.createElement(Ga,{zIndex:t.zIndex},A.createElement(li,{className:qt("recharts-reference-line",i)},gOe(r,D),A.createElement(pK,i1({},P,{lowerWidth:P.width,upperWidth:P.width}),A.createElement(mK,{label:t.label}),t.children)))}var SOe={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Or.line};function EP(t){var e=Wr(t,SOe);return A.createElement(A.Fragment,null,A.createElement(xOe,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),A.createElement(wOe,e))}EP.displayName="ReferenceLine";function LK(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function _Oe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return aOe(r,n)}function EOe(t,e,n){var r=n==="width",{x:i,y:a,width:s,height:o}=t;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function Pm(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function TOe(t,e){return LK(t,e+1)}function AOe(t,e,n,r,i){for(var a=(r||[]).slice(),{start:s,end:o}=e,c=0,d=1,f=s,h=function(){var b=r?.[c];if(b===void 0)return{v:LK(r,d)};var x=c,w,_=()=>(w===void 0&&(w=n(b,x)),w),T=b.coordinate,N=c===0||Pm(t,T,_,f,o);N||(c=0,f=s,d+=1),N&&(f=T+t*(_()/2+i),c+=d)},g;d<=a.length;)if(g=h(),g)return g.v;return[]}function kOe(t,e,n,r,i){var a=(r||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=e,d=1;d<=s;d++){for(var f=(s-1)%d,h=o,g=!0,v=function(){var T=r[b],N=b,D,P=()=>(D===void 0&&(D=n(T,N)),D),O=T.coordinate,C=b===f||Pm(t,O,P,h,c);if(!C)return g=!1,1;C&&(h=O+t*(P()/2+i))},b=f;b<s&&!v();b+=d);if(g){for(var x=[],w=f;w<s;w+=d)x.push(r[w]);return x}}return[]}function $B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ei(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$B(Object(n),!0).forEach(function(r){COe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$B(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function COe(t,e,n){return(e=NOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NOe(t){var e=IOe(t,"string");return typeof e=="symbol"?e:e+""}function IOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OOe(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:o}=e,{end:c}=e,d=function(g){var v=a[g],b,x=()=>(b===void 0&&(b=n(v,g)),b);if(g===s-1){var w=t*(v.coordinate+t*x()/2-c);a[g]=v=ei(ei({},v),{},{tickCoord:w>0?v.coordinate-w*t:v.coordinate})}else a[g]=v=ei(ei({},v),{},{tickCoord:v.coordinate});if(v.tickCoord!=null){var _=Pm(t,v.tickCoord,x,o,c);_&&(c=v.tickCoord-t*(x()/2+i),a[g]=ei(ei({},v),{},{isShow:!0}))}},f=s-1;f>=0;f--)d(f);return a}function POe(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,{start:c,end:d}=e;if(a){var f=r[o-1],h=n(f,o-1),g=t*(f.coordinate+t*h/2-d);if(s[o-1]=f=ei(ei({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate}),f.tickCoord!=null){var v=Pm(t,f.tickCoord,()=>h,c,d);v&&(d=f.tickCoord-t*(h/2+i),s[o-1]=ei(ei({},f),{},{isShow:!0}))}}for(var b=a?o-1:o,x=function(T){var N=s[T],D,P=()=>(D===void 0&&(D=n(N,T)),D);if(T===0){var O=t*(N.coordinate-t*P()/2-c);s[T]=N=ei(ei({},N),{},{tickCoord:O<0?N.coordinate-O*t:N.coordinate})}else s[T]=N=ei(ei({},N),{},{tickCoord:N.coordinate});if(N.tickCoord!=null){var C=Pm(t,N.tickCoord,P,c,d);C&&(c=N.tickCoord+t*(P()/2+i),s[T]=ei(ei({},N),{},{isShow:!0}))}},w=0;w<b;w++)x(w);return s}function TP(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:d,unit:f,angle:h}=t;if(!i||!i.length||!r)return[];if(qe(c)||Cw.isSsr){var g;return(g=TOe(i,qe(c)?c:0))!==null&&g!==void 0?g:[]}var v=[],b=o==="top"||o==="bottom"?"width":"height",x=f&&b==="width"?Wg(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},w=(N,D)=>{var P=typeof d=="function"?d(N.value,D):N.value;return b==="width"?_Oe(Wg(P,{fontSize:e,letterSpacing:n}),x,h):Wg(P,{fontSize:e,letterSpacing:n})[b]},_=i.length>=2?Ir(i[1].coordinate-i[0].coordinate):1,T=EOe(a,_,b);return c==="equidistantPreserveStart"?AOe(_,T,w,i,s):c==="equidistantPreserveEnd"?kOe(_,T,w,i,s):(c==="preserveStart"||c==="preserveStartEnd"?v=POe(_,T,w,i,s,c==="preserveStartEnd"):v=OOe(_,T,w,i,s),v.filter(N=>N.isShow))}var DOe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=n?n.getBoundingClientRect().width:0,c=i+a,d=s+c+o+(n?r:0);return Math.round(d)}return 0},ROe=["axisLine","width","height","className","hide","ticks","axisType"];function MOe(t,e){if(t==null)return{};var n,r,i=jOe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function gd(){return gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gd.apply(null,arguments)}function qB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qB(Object(n),!0).forEach(function(r){zOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zOe(t,e,n){return(e=LOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LOe(t){var e=VOe(t,"string");return typeof e=="symbol"?e:e+""}function VOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tl={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Or.axis};function BOe(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=t;if(!o)return null;var d=nr(nr(nr({},c),bs(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!s||a==="bottom"&&s);d=nr(nr({},d),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(a==="left"&&!s||a==="right"&&s);d=nr(nr({},d),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return A.createElement("line",gd({},d,{className:qt("recharts-cartesian-axis-line",cd(o,"className"))}))}function UOe(t,e,n,r,i,a,s,o,c){var d,f,h,g,v,b,x=o?-1:1,w=t.tickSize||s,_=qe(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":d=f=t.coordinate,g=n+ +!o*i,h=g-x*w,b=h-x*c,v=_;break;case"left":h=g=t.coordinate,f=e+ +!o*r,d=f-x*w,v=d-x*c,b=_;break;case"right":h=g=t.coordinate,f=e+ +o*r,d=f+x*w,v=d+x*c,b=_;break;default:d=f=t.coordinate,g=n+ +o*i,h=g+x*w,b=h+x*c,v=_;break}return{line:{x1:d,y1:h,x2:f,y2:g},tick:{x:v,y:b}}}function FOe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function $Oe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function qOe(t){var{option:e,tickProps:n,value:r}=t,i,a=qt(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))i=A.cloneElement(e,nr(nr({},n),{},{className:a}));else if(typeof e=="function")i=e(nr(nr({},n),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=qt(s,e?.className)),i=A.createElement(Yw,gd({},n,{className:s}),r)}return i}var GOe=A.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:d,orientation:f,mirror:h,x:g,y:v,width:b,height:x,tickSize:w,tickMargin:_,fontSize:T,letterSpacing:N,getTicksConfig:D,events:P,axisType:O}=t,C=TP(nr(nr({},D),{},{ticks:n}),T,N),I=FOe(f,h),R=$Oe(f,h),j=bs(D),L=vm(r),B={};typeof i=="object"&&(B=i);var z=nr(nr({},j),{},{fill:"none"},B),Y=C.map(K=>nr({entry:K},UOe(K,g,v,b,x,f,w,h,_))),Z=Y.map(K=>{var{entry:X,line:ee}=K;return A.createElement(li,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(X.value,"-").concat(X.coordinate,"-").concat(X.tickCoord)},i&&A.createElement("line",gd({},z,ee,{className:qt("recharts-cartesian-axis-tick-line",cd(i,"className"))})))}),G=Y.map((K,X)=>{var{entry:ee,tick:J}=K,F=nr(nr(nr(nr({textAnchor:I,verticalAnchor:R},j),{},{stroke:"none",fill:a},L),J),{},{index:X,payload:ee,visibleTicksCount:C.length,tickFormatter:s,padding:c},d);return A.createElement(li,gd({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ee.value,"-").concat(ee.coordinate,"-").concat(ee.tickCoord)},ow(P,ee,X)),r&&A.createElement(qOe,{option:r,tickProps:F,value:"".concat(typeof s=="function"?s(ee.value,X):ee.value).concat(o||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(O,"-ticks")},G.length>0&&A.createElement(Ga,{zIndex:Or.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(O,"-tick-labels"),ref:e},G)),Z.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(O,"-tick-lines")},Z))}),HOe=A.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:s,ticks:o,axisType:c}=t,d=MOe(t,ROe),[f,h]=A.useState(""),[g,v]=A.useState(""),b=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var w;return DOe({ticks:b.current,label:(w=t.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=A.useCallback(w=>{if(w){var _=w.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=_;var T=_[0];if(T){var N=window.getComputedStyle(T),D=N.fontSize,P=N.letterSpacing;(D!==f||P!==g)&&(h(D),v(P))}}},[f,g]);return s||r!=null&&r<=0||i!=null&&i<=0?null:A.createElement(Ga,{zIndex:t.zIndex},A.createElement(li,{className:qt("recharts-cartesian-axis",a)},A.createElement(BOe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:bs(t)}),A.createElement(GOe,{ref:x,axisType:c,events:d,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(pK,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(mK,{label:t.label,labelRef:t.labelRef}),t.children)))}),AP=A.forwardRef((t,e)=>{var n=Wr(t,tl);return A.createElement(HOe,gd({},n,{ref:e}))});AP.displayName="CartesianAxis";var WOe=["x1","y1","x2","y2","key"],YOe=["offset"],KOe=["xAxisId","yAxisId"],XOe=["xAxisId","yAxisId"];function GB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GB(Object(n),!0).forEach(function(r){QOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QOe(t,e,n){return(e=ZOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZOe(t){var e=JOe(t,"string");return typeof e=="symbol"?e:e+""}function JOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qu(){return qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qu.apply(null,arguments)}function a1(t,e){if(t==null)return{};var n,r,i=ePe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ePe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var tPe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:s,ry:o}=t;return A.createElement("rect",{x:r,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function VK(t){var{option:e,lineItemProps:n}=t,r;if(A.isValidElement(e))r=A.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:s,x2:o,y2:c,key:d}=n,f=a1(n,WOe),h=(i=bs(f))!==null&&i!==void 0?i:{},{offset:g}=h,v=a1(h,YOe);r=A.createElement("line",qu({},v,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:d}))}return r}function nPe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=a1(t,KOe),c=i.map((d,f)=>{var h=ri(ri({},o),{},{x1:e,y1:d,x2:e+n,y2:d,key:"line-".concat(f),index:f});return A.createElement(VK,{key:"line-".concat(f),option:r,lineItemProps:h})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function rPe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=a1(t,XOe),c=i.map((d,f)=>{var h=ri(ri({},o),{},{x1:d,y1:e,x2:d,y2:e+n,key:"line-".concat(f),index:f});return A.createElement(VK,{option:r,lineItemProps:h,key:"line-".concat(f)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function iPe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=t;if(!c||!e||!e.length||o==null)return null;var d=o.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==d[0]&&d.unshift(0);var f=d.map((h,g)=>{var v=!d[g+1],b=v?i+s-h:d[g+1]-h;if(b<=0)return null;var x=g%e.length;return A.createElement("rect",{key:"react-".concat(g),y:h,x:r,height:b,width:a,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function aPe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:s,height:o,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var d=c.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==d[0]&&d.unshift(0);var f=d.map((h,g)=>{var v=!d[g+1],b=v?i+s-h:d[g+1]-h;if(b<=0)return null;var x=g%n.length;return A.createElement("rect",{key:"react-".concat(g),x:h,y:a,width:b,height:o,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var sPe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return SH(TP(ri(ri(ri({},tl),n),{},{ticks:_H(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},oPe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return SH(TP(ri(ri(ri({},tl),n),{},{ticks:_H(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},lPe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Or.grid};function Jw(t){var e=PH(),n=DH(),r=OH(),i=ri(ri({},Wr(t,lPe)),{},{x:qe(t.x)?t.x:r.left,y:qe(t.y)?t.y:r.top,width:qe(t.width)?t.width:r.width,height:qe(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:d,height:f,syncWithTicks:h,horizontalValues:g,verticalValues:v}=i,b=_i(),x=Fe(R=>M6(R,"xAxis",a,b)),w=Fe(R=>M6(R,"yAxis",s,b));if(!fo(d)||!fo(f)||!qe(o)||!qe(c))return null;var _=i.verticalCoordinatesGenerator||sPe,T=i.horizontalCoordinatesGenerator||oPe,{horizontalPoints:N,verticalPoints:D}=i;if((!N||!N.length)&&typeof T=="function"){var P=g&&g.length,O=T({yAxis:w?ri(ri({},w),{},{ticks:P?g:w.ticks}):void 0,width:e??d,height:n??f,offset:r},P?!0:h);Dx(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(N=O)}if((!D||!D.length)&&typeof _=="function"){var C=v&&v.length,I=_({xAxis:x?ri(ri({},x),{},{ticks:C?v:x.ticks}):void 0,width:e??d,height:n??f,offset:r},C?!0:h);Dx(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(D=I)}return A.createElement(Ga,{zIndex:i.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(tPe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(iPe,qu({},i,{horizontalPoints:N})),A.createElement(aPe,qu({},i,{verticalPoints:D})),A.createElement(nPe,qu({},i,{offset:r,horizontalPoints:N,xAxis:x,yAxis:w})),A.createElement(rPe,qu({},i,{offset:r,verticalPoints:D,xAxis:x,yAxis:w}))))}Jw.displayName="CartesianGrid";var cPe={},BK=Fi({name:"errorBars",initialState:cPe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:OMe,replaceErrorBar:PMe,removeErrorBar:DMe}=BK.actions,uPe=BK.reducer,dPe=["children"];function fPe(t,e){if(t==null)return{};var n,r,i=hPe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hPe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var pPe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},gPe=A.createContext(pPe);function mPe(t){var{children:e}=t,n=fPe(t,dPe);return A.createElement(gPe.Provider,{value:n},e)}function UK(t,e){var n,r,i=Fe(d=>vo(d,t)),a=Fe(d=>yo(d,e)),s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Ar.allowDataOverflow,o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:kr.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function vPe(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=PK(),{needClipX:a,needClipY:s,needClip:o}=UK(e,n);if(!o||!i)return null;var{x:c,y:d,width:f,height:h}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:a?c:c-f/2,y:s?d:d-h/2,width:a?f:f*2,height:s?h:h*2}))}var RA={exports:{}},MA={};var HB;function yPe(){if(HB)return MA;HB=1;var t=Ih();function e(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return MA.useSyncExternalStoreWithSelector=function(c,d,f,h,g){var v=i(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=s(function(){function w(P){if(!_){if(_=!0,T=P,P=h(P),g!==void 0&&b.hasValue){var O=b.value;if(g(O,P))return N=O}return N=P}if(O=N,n(T,P))return O;var C=h(P);return g!==void 0&&g(O,C)?(T=P,O):(T=P,N=C)}var _=!1,T,N,D=f===void 0?null:f;return[function(){return w(d())},D===null?void 0:function(){return w(D())}]},[d,f,h,g]);var x=r(c,v[0],v[1]);return a(function(){b.hasValue=!0,b.value=x},[x]),o(x),x},MA}var WB;function bPe(){return WB||(WB=1,RA.exports=yPe()),RA.exports}bPe();function xPe(t){t()}function wPe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){xPe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var YB={notify(){},get:()=>[]};function SPe(t,e){let n,r=YB,i=0,a=!1;function s(x){f();const w=r.subscribe(x);let _=!1;return()=>{_||(_=!0,w(),h())}}function o(){r.notify()}function c(){b.onStateChange&&b.onStateChange()}function d(){return a}function f(){i++,n||(n=t.subscribe(c),r=wPe())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=YB)}function g(){a||(a=!0,f())}function v(){a&&(a=!1,h())}const b={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:d,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>r};return b}var _Pe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EPe=_Pe(),TPe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",APe=TPe(),kPe=()=>EPe||APe?A.useLayoutEffect:A.useEffect,CPe=kPe();function KB(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function NPe(t,e){if(KB(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!KB(t[n[i]],e[n[i]]))return!1;return!0}var IPe=Symbol.for("react-redux-context"),OPe=typeof globalThis<"u"?globalThis:{};function PPe(){if(!A.createContext)return{};const t=OPe[IPe]??=new Map;let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var DPe=PPe();function RPe(t){const{children:e,context:n,serverState:r,store:i}=t,a=A.useMemo(()=>{const c=SPe(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=A.useMemo(()=>i.getState(),[i]);CPe(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=n||DPe;return A.createElement(o.Provider,{value:a},e)}var MPe=RPe,jPe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function zPe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function kP(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(jPe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!NPe(t[r],e[r]))return!1}else if(!zPe(t[r],e[r]))return!1;return!0}function Cd(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:IK}function Nd(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:IK}var LPe="Invariant failed";function VPe(t,e){throw new Error(LPe)}function i2(){return i2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i2.apply(null,arguments)}function s1(t){return A.createElement(TK,i2({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var BPe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(qe(e))return e;var a=qe(r)||Pr(r);return a?e(r,i):(a||VPe(),n)}},UPe=(t,e,n)=>n,FPe=(t,e)=>e,jv=me([UO,FPe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),$Pe=me([jv],t=>t?.maxBarSize),qPe=(t,e,n,r)=>r,GPe=me([Pt,UO,Cd,Nd,UPe],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),HPe=(t,e,n)=>{var r=Pt(t),i=Cd(t,e),a=Nd(t,e);if(!(i==null||a==null))return r==="horizontal"?QC(t,"yAxis",a,n):QC(t,"xAxis",i,n)},WPe=(t,e)=>{var n=Pt(t),r=Cd(t,e),i=Nd(t,e);if(!(r==null||i==null))return n==="horizontal"?R6(t,"xAxis",r):R6(t,"yAxis",i)},YPe=me([GPe,BTe,WPe],qIe),KPe=(t,e,n)=>{var r,i,a=jv(t,e);if(a!=null){var s=Cd(t,e),o=Nd(t,e);if(!(s==null||o==null)){var c=Pt(t),d=XW(t),{maxBarSize:f}=a,h=Pr(f)?d:f,g,v;return c==="horizontal"?(g=Nh(t,"xAxis",s,n),v=Ch(t,"xAxis",s,n)):(g=Nh(t,"yAxis",o,n),v=Ch(t,"yAxis",o,n)),(r=(i=Px(g,v,!0))!==null&&i!==void 0?i:h)!==null&&r!==void 0?r:0}}},FK=(t,e,n)=>{var r=Pt(t),i=Cd(t,e),a=Nd(t,e);if(!(i==null||a==null)){var s,o;return r==="horizontal"?(s=Nh(t,"xAxis",i,n),o=Ch(t,"xAxis",i,n)):(s=Nh(t,"yAxis",a,n),o=Ch(t,"yAxis",a,n)),Px(s,o)}},XPe=me([YPe,XW,VTe,QW,KPe,FK,$Pe],KIe),QPe=(t,e,n)=>{var r=Cd(t,e);if(r!=null)return Nh(t,"xAxis",r,n)},ZPe=(t,e,n)=>{var r=Nd(t,e);if(r!=null)return Nh(t,"yAxis",r,n)},JPe=(t,e,n)=>{var r=Cd(t,e);if(r!=null)return Ch(t,"xAxis",r,n)},eDe=(t,e,n)=>{var r=Nd(t,e);if(r!=null)return Ch(t,"yAxis",r,n)},tDe=me([XPe,jv],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),nDe=me([HPe,jv],XIe),rDe=me([yr,nO,QPe,ZPe,JPe,eDe,tDe,Pt,kTe,FK,nDe,jv,qPe],(t,e,n,r,i,a,s,o,c,d,f,h,g)=>{var{chartData:v,dataStartIndex:b,dataEndIndex:x}=c;if(!(h==null||s==null||e==null||o!=="horizontal"&&o!=="vertical"||n==null||r==null||i==null||a==null||d==null)){var{data:w}=h,_;if(w!=null&&w.length>0?_=w:_=v?.slice(b,x+1),_!=null)return PDe({layout:o,barSettings:h,pos:s,parentViewBox:e,bandSize:d,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:f,displayedData:_,offset:t,cells:g,dataStartIndex:b})}}),iDe=["index"];function a2(){return a2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a2.apply(null,arguments)}function aDe(t,e){if(t==null)return{};var n,r,i=sDe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var $K=A.createContext(void 0),oDe=t=>{var e=A.useContext($K);if(e!=null)return e.stackId;if(t!=null)return j1e(t)},lDe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),cDe=t=>{var e=A.useContext($K);if(e!=null){var{stackId:n}=e;return"url(#".concat(lDe(n,t),")")}},uDe=t=>{var{index:e}=t,n=aDe(t,iDe),r=cDe(e);return A.createElement(li,a2({className:"recharts-bar-stack-layer",clipPath:r},n))},dDe=["onMouseEnter","onMouseLeave","onClick"],fDe=["value","background","tooltipPosition"],hDe=["id"],pDe=["onMouseEnter","onClick","onMouseLeave"];function yl(){return yl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yl.apply(null,arguments)}function XB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XB(Object(n),!0).forEach(function(r){gDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gDe(t,e,n){return(e=mDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mDe(t){var e=vDe(t,"string");return typeof e=="symbol"?e:e+""}function vDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o1(t,e){if(t==null)return{};var n,r,i=yDe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var bDe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:yw(n,e),payload:t}]},xDe=A.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:s,unit:o,tooltipType:c,id:d}=t,f={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:yw(a,e),hide:s,type:c,color:i,unit:o,graphicalItemId:d}};return A.createElement(AK,{tooltipEntrySettings:f})});function wDe(t){var e=Fe(pd),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:s,onMouseLeave:o,onClick:c}=a,d=o1(a,dDe),f=wP(s,r,a.id),h=SP(o),g=_P(c,r,a.id);if(!i||n==null)return null;var v=vm(i);return A.createElement(Ga,{zIndex:QIe(i,Or.barBackground)},n.map((b,x)=>{var{value:w,background:_,tooltipPosition:T}=b,N=o1(b,fDe);if(!_)return null;var D=f(b,x),P=h(b,x),O=g(b,x),C=gi(gi(gi(gi(gi({option:i,isActive:String(x)===e},N),{},{fill:"#eee"},_),v),ow(d,b,x)),{},{onMouseEnter:D,onMouseLeave:P,onClick:O,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return A.createElement(s1,yl({key:"background-bar-".concat(x)},C))}))}function SDe(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return gi(gi({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return A.createElement(rNe,{value:e?i:void 0},n)}function _De(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:s}=t,o=Fe(pd),c=Fe(fP),d=n&&String(a)===o&&(c==null||s===c),f=d?n:e;return d?A.createElement(Ga,{zIndex:Or.activeBar},A.createElement(s1,yl({},r,{name:String(r.name)},i,{isActive:d,option:f,index:a,dataKey:s}))):A.createElement(s1,yl({},r,{name:String(r.name)},i,{isActive:d,option:f,index:a,dataKey:s}))}function EDe(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return A.createElement(s1,yl({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function TDe(t){var e,{data:n,props:r}=t,i=(e=bs(r))!==null&&e!==void 0?e:{},{id:a}=i,s=o1(i,hDe),{shape:o,dataKey:c,activeBar:d}=r,{onMouseEnter:f,onClick:h,onMouseLeave:g}=r,v=o1(r,pDe),b=wP(f,c,a),x=SP(g),w=_P(h,c,a);return n?A.createElement(A.Fragment,null,n.map((_,T)=>A.createElement(uDe,yl({index:T,key:"rectangle-".concat(_?.x,"-").concat(_?.y,"-").concat(_?.value,"-").concat(T),className:"recharts-bar-rectangle"},ow(v,_,T),{onMouseEnter:b(_,T),onMouseLeave:x(_,T),onClick:w(_,T)}),d?A.createElement(_De,{shape:o,activeBar:d,baseProps:s,entry:_,index:T,dataKey:c}):A.createElement(EDe,{shape:o,baseProps:s,entry:_,index:T,dataKey:c})))):null}function ADe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:d,onAnimationStart:f}=e,h=n.current,g=Iw(e,"recharts-bar-"),[v,b]=A.useState(!1),x=!v,w=A.useCallback(()=>{typeof d=="function"&&d(),b(!1)},[d]),_=A.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return A.createElement(SDe,{showLabels:x,rects:r},A.createElement(Nw,{animationId:g,begin:s,duration:o,isActive:a,easing:c,onAnimationEnd:w,onAnimationStart:_,key:g},T=>{var N=T===1?r:r?.map((D,P)=>{var O=h&&h[P];if(O)return gi(gi({},D),{},{x:hr(O.x,D.x,T),y:hr(O.y,D.y,T),width:hr(O.width,D.width,T),height:hr(O.height,D.height,T)});if(i==="horizontal"){var C=hr(0,D.height,T),I=hr(D.stackedBarStart,D.y,T);return gi(gi({},D),{},{y:I,height:C})}var R=hr(0,D.width,T),j=hr(D.stackedBarStart,D.x,T);return gi(gi({},D),{},{width:R,x:j})});return T>0&&(n.current=N??null),N==null?null:A.createElement(li,null,A.createElement(TDe,{props:e,data:N}))}),A.createElement(bK,{label:e.label}),e.children)}function kDe(t){var e=A.useRef(null);return A.createElement(ADe,{previousRectanglesRef:e,props:t})}var qK=0,CDe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:pn(t,e)}};class NDe extends A.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:s,needClip:o,background:c,id:d}=this.props;if(e||n==null)return null;var f=qt("recharts-bar",i),h=d;return A.createElement(li,{className:f,id:d},o&&A.createElement("defs",null,A.createElement(vPe,{clipPathId:h,xAxisId:a,yAxisId:s})),A.createElement(li,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(h,")"):void 0},A.createElement(wDe,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),A.createElement(kDe,this.props)))}}var IDe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:qK,xAxisId:0,yAxisId:0,zIndex:Or.bar};function ODe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:f}=t,{needClip:h}=UK(e,n),g=xv(),v=_i(),b=xP(t.children,Mv),x=Fe(T=>rDe(T,t.id,v,b));if(g!=="vertical"&&g!=="horizontal")return null;var w,_=x?.[0];return _==null||_.height==null||_.width==null?w=0:w=g==="vertical"?_.height/2:_.width/2,A.createElement(mPe,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:CDe,errorBarOffset:w},A.createElement(NDe,yl({},t,{layout:g,needClip:h,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:f})))}function PDe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:d,stackedData:f,displayedData:h,offset:g,cells:v,parentViewBox:b,dataStartIndex:x}=t,w=e==="horizontal"?o:s,_=f?w.scale.domain():null,T=z1e({numericAxis:w}),N=w.scale(T);return h.map((D,P)=>{var O,C,I,R,j,L;if(f){var B=f[P+x];if(B==null)return null;O=O1e(B,_)}else O=pn(D,n),Array.isArray(O)||(O=[T,O]);var z=BPe(r,qK)(O[1],P);if(e==="horizontal"){var Y,[Z,G]=[o.scale(O[0]),o.scale(O[1])];C=B5({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:D,index:P}),I=(Y=G??Z)!==null&&Y!==void 0?Y:void 0,R=i.size;var K=Z-G;if(j=ua(K)?0:K,L={x:C,y:g.top,width:R,height:g.height},Math.abs(z)>0&&Math.abs(j)<Math.abs(z)){var X=Ir(j||z)*(Math.abs(z)-Math.abs(j));I-=X,j+=X}}else{var[ee,J]=[s.scale(O[0]),s.scale(O[1])];if(C=ee,I=B5({axis:o,ticks:d,bandSize:a,offset:i.offset,entry:D,index:P}),R=J-ee,j=i.size,L={x:g.left,y:I,width:g.width,height:j},Math.abs(z)>0&&Math.abs(R)<Math.abs(z)){var F=Ir(R||z)*(Math.abs(z)-Math.abs(R));R+=F}}if(C==null||I==null||R==null||j==null)return null;var Q=gi(gi({},D),{},{stackedBarStart:N,x:C,y:I,width:R,height:j,value:f?O:O[1],payload:D,background:L,tooltipPosition:{x:C+R/2,y:I+j/2},parentViewBox:b},v&&v[P]&&v[P].props);return Q}).filter(Boolean)}function DDe(t){var e=Wr(t,IDe),n=oDe(e.stackId),r=_i();return A.createElement(kK,{id:e.id,type:"bar"},i=>A.createElement(A.Fragment,null,A.createElement($Ne,{legendPayload:bDe(e)}),A.createElement(xDe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),A.createElement(rIe,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),A.createElement(Ga,{zIndex:e.zIndex},A.createElement(ODe,yl({},e,{id:i})))))}var Dm=A.memo(DDe,kP);Dm.displayName="Bar";var RDe=["domain","range"],MDe=["domain","range"];function QB(t,e){if(t==null)return{};var n,r,i=jDe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ZB(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function GK(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=QB(t,RDe),{domain:a,range:s}=e,o=QB(e,MDe);return!ZB(n,a)||!ZB(r,s)?!1:kP(i,o)}var zDe=["dangerouslySetInnerHTML","ticks","scale"],LDe=["id","scale"];function s2(){return s2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s2.apply(null,arguments)}function JB(t,e){if(t==null)return{};var n,r,i=VDe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function VDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function BDe(t){var e=gn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(RIe(t)):n.current!==t&&e(MIe({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(jIe(n.current)),n.current=null)},[e]),null}var UDe=t=>{var{xAxisId:e,className:n}=t,r=Fe(nO),i=_i(),a="xAxis",s=Fe(_=>NY(_,a,e,i)),o=Fe(_=>TY(_,e)),c=Fe(_=>zAe(_,e)),d=Fe(_=>sY(_,e));if(o==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:h,scale:g}=t,v=JB(t,zDe),{id:b,scale:x}=d,w=JB(d,LDe);return A.createElement(AP,s2({},v,w,{x:c.x,y:c.y,width:o.width,height:o.height,className:qt("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:s,axisType:a}))},FDe={allowDataOverflow:Ar.allowDataOverflow,allowDecimals:Ar.allowDecimals,allowDuplicatedCategory:Ar.allowDuplicatedCategory,angle:Ar.angle,axisLine:tl.axisLine,height:Ar.height,hide:!1,includeHidden:Ar.includeHidden,interval:Ar.interval,minTickGap:Ar.minTickGap,mirror:Ar.mirror,orientation:Ar.orientation,padding:Ar.padding,reversed:Ar.reversed,scale:Ar.scale,tick:Ar.tick,tickCount:Ar.tickCount,tickLine:tl.tickLine,tickSize:tl.tickSize,type:Ar.type,xAxisId:0},$De=t=>{var e=Wr(t,FDe);return A.createElement(A.Fragment,null,A.createElement(BDe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),A.createElement(UDe,e))},eS=A.memo($De,GK);eS.displayName="XAxis";var qDe=["dangerouslySetInnerHTML","ticks","scale"],GDe=["id","scale"];function o2(){return o2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o2.apply(null,arguments)}function eU(t,e){if(t==null)return{};var n,r,i=HDe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function HDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function WDe(t){var e=gn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(zIe(t)):n.current!==t&&e(LIe({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(VIe(n.current)),n.current=null)},[e]),null}var YDe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,a=A.useRef(null),s=A.useRef(null),o=Fe(nO),c=_i(),d=gn(),f="yAxis",h=Fe(O=>AY(O,e)),g=Fe(O=>VAe(O,e)),v=Fe(O=>NY(O,f,e,c)),b=Fe(O=>oY(O,e));if(A.useLayoutEffect(()=>{if(!(r!=="auto"||!h||vP(i)||A.isValidElement(i)||b==null)){var O=a.current;if(O){var C=O.getCalculatedWidth();Math.round(h.width)!==Math.round(C)&&d(BIe({id:e,width:C}))}}},[v,h,d,i,e,r,b]),h==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:x,ticks:w,scale:_}=t,T=eU(t,qDe),{id:N,scale:D}=b,P=eU(b,GDe);return A.createElement(AP,o2({},T,P,{ref:a,labelRef:s,x:g.x,y:g.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:qt("recharts-".concat(f," ").concat(f),n),viewBox:o,ticks:v,axisType:f}))},KDe={allowDataOverflow:kr.allowDataOverflow,allowDecimals:kr.allowDecimals,allowDuplicatedCategory:kr.allowDuplicatedCategory,angle:kr.angle,axisLine:tl.axisLine,hide:!1,includeHidden:kr.includeHidden,interval:kr.interval,minTickGap:kr.minTickGap,mirror:kr.mirror,orientation:kr.orientation,padding:kr.padding,reversed:kr.reversed,scale:kr.scale,tick:kr.tick,tickCount:kr.tickCount,tickLine:tl.tickLine,tickSize:tl.tickSize,type:kr.type,width:kr.width,yAxisId:0},XDe=t=>{var e=Wr(t,KDe);return A.createElement(A.Fragment,null,A.createElement(WDe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),A.createElement(YDe,e))},tS=A.memo(XDe,GK);tS.displayName="YAxis";var QDe=(t,e)=>e,CP=me([QDe,Pt,iY,xr,GY,Tl,eCe,yr],oCe),NP=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},HK=Va("mouseClick"),WK=vv();WK.startListening({actionCreator:HK,effect:(t,e)=>{var n=t.payload,r=CP(e.getState(),NP(n));r?.activeIndex!=null&&e.dispatch(JAe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var l2=Va("mouseMove"),YK=vv(),Jy=null;YK.startListening({actionCreator:l2,effect:(t,e)=>{var n=t.payload;Jy!==null&&cancelAnimationFrame(Jy);var r=NP(n);Jy=requestAnimationFrame(()=>{var i=e.getState(),a=sP(i,i.tooltip.settings.shared);if(a==="axis"){var s=CP(i,r);s?.activeIndex!=null?e.dispatch(zY({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(jY())}Jy=null})}});function ZDe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var tU={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},KK=Fi({name:"rootProps",initialState:tU,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:tU.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),JDe=KK.reducer,{updateOptions:eRe}=KK.actions,XK=Fi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:tRe}=XK.actions,nRe=XK.reducer,QK=Va("keyDown"),ZK=Va("focus"),IP=vv();IP.startListening({actionCreator:QK,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=oP(i,tp(n),Iv(n),Dv(n)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=Tl(n);if(a==="Enter"){var d=e1(n,"axis","hover",String(i.index));e.dispatch(JC({active:!i.active,activeIndex:i.index,activeCoordinate:d}));return}var f=$Ae(n),h=f==="left-to-right"?1:-1,g=a==="ArrowRight"?1:-1,v=o+g*h;if(!(c==null||v>=c.length||v<0)){var b=e1(n,"axis","hover",String(v));e.dispatch(JC({active:!0,activeIndex:v.toString(),activeCoordinate:b}))}}}}}});IP.startListening({actionCreator:ZK,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",s=e1(n,"axis","hover",String(a));e.dispatch(JC({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Ca=Va("externalEvent"),JK=vv(),jA=new Map;JK.startListening({actionCreator:Ca,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=jA.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),c={activeCoordinate:Vke(o),activeDataKey:fP(o),activeIndex:pd(o),activeLabel:YY(o),activeTooltipIndex:pd(o),isTooltipActive:Bke(o)};n(c,r)}finally{jA.delete(i)}});jA.set(i,s)}}});var rRe=me([Jh],t=>t.tooltipItemPayloads),iRe=me([rRe,Pv,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(o=>o.settings.graphicalItemId===r);if(i!=null){var{positions:a}=i;if(a!=null){var s=e(a,n);return s}}}),eX=Va("touchMove"),tX=vv();tX.startListening({actionCreator:eX,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=sP(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var s=CP(r,NP({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(zY({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var f=d.getAttribute(TH),h=(o=d.getAttribute(AH))!==null&&o!==void 0?o:void 0,g=ep(r).find(x=>x.id===h);if(f==null||g==null||h==null)return;var{dataKey:v}=g,b=iRe(r,f,h);e.dispatch(MY({activeDataKey:v,activeIndex:f,activeCoordinate:b,activeGraphicalItemId:h}))}}}});var aRe=WG({brush:ZIe,cartesianAxis:UIe,chartData:LCe,errorBars:uPe,graphicalItems:tIe,layout:T1e,legend:Owe,options:DCe,polarAxis:pNe,polarOptions:nRe,referenceElements:cOe,rootProps:JDe,tooltip:eke,zIndex:wCe}),sRe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Xxe({reducer:aRe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([WK.middleware,YK.middleware,IP.middleware,JK.middleware,tX.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(lH({type:"raf"}))},devTools:{serialize:{replacer:ZDe},name:"recharts-".concat(n)}})};function nX(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=_i(),a=A.useRef(null);if(i)return n;a.current==null&&(a.current=sRe(e,r));var s=KI;return A.createElement(MPe,{context:s,store:a.current},n)}function oRe(t){var{layout:e,margin:n}=t,r=gn(),i=_i();return A.useEffect(()=>{i||(r(S1e(e)),r(w1e(n)))},[r,i,e,n]),null}var rX=A.memo(oRe,kP);function iX(t){var e=gn();return A.useEffect(()=>{e(eRe(t))},[e,t]),null}function nU(t){var{zIndex:e,isPanorama:n}=t,r=A.useRef(null),i=gn();return A.useLayoutEffect(()=>(r.current&&i(bCe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(xCe({zIndex:e,isPanorama:n}))}),[i,e,n]),A.createElement("g",{tabIndex:-1,ref:r})}function rU(t){var{children:e,isPanorama:n}=t,r=Fe(cCe);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return A.createElement(A.Fragment,null,i.map(s=>A.createElement(nU,{key:s,zIndex:s,isPanorama:n})),e,a.map(s=>A.createElement(nU,{key:s,zIndex:s,isPanorama:n})))}var lRe=["children"];function cRe(t,e){if(t==null)return{};var n,r,i=uRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function uRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function l1(){return l1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l1.apply(null,arguments)}var dRe={width:"100%",height:"100%",display:"block"},fRe=A.forwardRef((t,e)=>{var n=PH(),r=DH(),i=qH();if(!fo(n)||!fo(r))return null;var{children:a,otherAttributes:s,title:o,desc:c}=t,d,f;return s!=null&&(typeof s.tabIndex=="number"?d=s.tabIndex:d=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0),A.createElement(dG,l1({},s,{title:o,desc:c,role:f,tabIndex:d,width:n,height:r,style:dRe,ref:e}),a)}),hRe=t=>{var{children:e}=t,n=Fe(Sw);if(!n)return null;var{width:r,height:i,y:a,x:s}=n;return A.createElement(dG,{width:r,height:i,x:s,y:a},e)},iU=A.forwardRef((t,e)=>{var{children:n}=t,r=cRe(t,lRe),i=_i();return i?A.createElement(hRe,null,A.createElement(rU,{isPanorama:!0},n)):A.createElement(fRe,l1({ref:e},r),A.createElement(rU,{isPanorama:!1},n))});function pRe(){var t=gn(),[e,n]=A.useState(null),r=Fe($1e);return A.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;en(a)&&a!==r&&t(E1e(a))}},[e,t,r]),n}function aU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gRe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aU(Object(n),!0).forEach(function(r){mRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mRe(t,e,n){return(e=vRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vRe(t){var e=yRe(t,"string");return typeof e=="symbol"?e:e+""}function yRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function md(){return md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},md.apply(null,arguments)}var bRe=()=>(WCe(),null);function c1(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var xRe=A.forwardRef((t,e)=>{var n,r,i=A.useRef(null),[a,s]=A.useState({containerWidth:c1((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:c1((r=t.style)===null||r===void 0?void 0:r.height)}),o=A.useCallback((d,f)=>{s(h=>{var g=Math.round(d),v=Math.round(f);return h.containerWidth===g&&h.containerHeight===v?h:{containerWidth:g,containerHeight:v}})},[]),c=A.useCallback(d=>{if(typeof e=="function"&&e(d),d!=null&&typeof ResizeObserver<"u"){var{width:f,height:h}=d.getBoundingClientRect();o(f,h);var g=b=>{var{width:x,height:w}=b[0].contentRect;o(x,w)},v=new ResizeObserver(g);v.observe(d),i.current=v}},[e,o]);return A.useEffect(()=>()=>{var d=i.current;d?.disconnect()},[o]),A.createElement(A.Fragment,null,A.createElement(Ew,{width:a.containerWidth,height:a.containerHeight}),A.createElement("div",md({ref:c},t)))}),wRe=A.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=A.useState({containerWidth:c1(n),containerHeight:c1(r)}),s=A.useCallback((c,d)=>{a(f=>{var h=Math.round(c),g=Math.round(d);return f.containerWidth===h&&f.containerHeight===g?f:{containerWidth:h,containerHeight:g}})},[]),o=A.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:d,height:f}=c.getBoundingClientRect();s(d,f)}},[e,s]);return A.createElement(A.Fragment,null,A.createElement(Ew,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",md({ref:o},t)))}),SRe=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return A.createElement(A.Fragment,null,A.createElement(Ew,{width:n,height:r}),A.createElement("div",md({ref:e},t)))}),_Re=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return fl(n)||fl(r)?A.createElement(wRe,md({},t,{ref:e})):A.createElement(SRe,md({},t,{ref:e}))});function ERe(t){return t===!0?xRe:_Re}var TRe=A.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:d,onMouseLeave:f,onMouseMove:h,onMouseUp:g,onTouchEnd:v,onTouchMove:b,onTouchStart:x,style:w,width:_,responsive:T,dispatchTouchEvents:N=!0}=t,D=A.useRef(null),P=gn(),[O,C]=A.useState(null),[I,R]=A.useState(null),j=pRe(),L=rO(),B=L?.width>0?L.width:_,z=L?.height>0?L.height:i,Y=A.useCallback(se=>{j(se),typeof e=="function"&&e(se),C(se),R(se),se!=null&&(D.current=se)},[j,e,C,R]),Z=A.useCallback(se=>{P(HK(se)),P(Ca({handler:a,reactEvent:se}))},[P,a]),G=A.useCallback(se=>{P(l2(se)),P(Ca({handler:d,reactEvent:se}))},[P,d]),K=A.useCallback(se=>{P(jY()),P(Ca({handler:f,reactEvent:se}))},[P,f]),X=A.useCallback(se=>{P(l2(se)),P(Ca({handler:h,reactEvent:se}))},[P,h]),ee=A.useCallback(()=>{P(ZK())},[P]),J=A.useCallback(se=>{P(QK(se.key))},[P]),F=A.useCallback(se=>{P(Ca({handler:s,reactEvent:se}))},[P,s]),Q=A.useCallback(se=>{P(Ca({handler:o,reactEvent:se}))},[P,o]),te=A.useCallback(se=>{P(Ca({handler:c,reactEvent:se}))},[P,c]),W=A.useCallback(se=>{P(Ca({handler:g,reactEvent:se}))},[P,g]),ue=A.useCallback(se=>{P(Ca({handler:x,reactEvent:se}))},[P,x]),re=A.useCallback(se=>{N&&P(eX(se)),P(Ca({handler:b,reactEvent:se}))},[P,N,b]),oe=A.useCallback(se=>{P(Ca({handler:v,reactEvent:se}))},[P,v]),we=ERe(T);return A.createElement(tK.Provider,{value:O},A.createElement(Cye.Provider,{value:I},A.createElement(we,{width:B??w?.width,height:z??w?.height,className:qt("recharts-wrapper",r),style:gRe({position:"relative",cursor:"default",width:B,height:z},w),onClick:Z,onContextMenu:F,onDoubleClick:Q,onFocus:ee,onKeyDown:J,onMouseDown:te,onMouseEnter:G,onMouseLeave:K,onMouseMove:X,onMouseUp:W,onTouchEnd:oe,onTouchMove:re,onTouchStart:ue,ref:Y},A.createElement(bRe,null),n)))}),ARe=["width","height","responsive","children","className","style","compact","title","desc"];function kRe(t,e){if(t==null)return{};var n,r,i=CRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function CRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var aX=A.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:s,style:o,compact:c,title:d,desc:f}=t,h=kRe(t,ARe),g=bs(h);return c?A.createElement(A.Fragment,null,A.createElement(Ew,{width:n,height:r}),A.createElement(iU,{otherAttributes:g,title:d,desc:f},a)):A.createElement(TRe,{className:s,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(iU,{otherAttributes:g,title:d,desc:f,ref:e},A.createElement(uOe,null,a)))});function c2(){return c2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c2.apply(null,arguments)}var NRe={top:5,right:5,bottom:5,left:5},IRe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:NRe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},ORe=A.forwardRef(function(e,n){var r,i=Wr(e.categoricalChartProps,IRe),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:d}=e,f={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return A.createElement(nX,{preloadedState:{options:f},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:a},A.createElement(DK,{chartData:d.data}),A.createElement(rX,{layout:i.layout,margin:i.margin}),A.createElement(iX,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(aX,c2({},i,{ref:n})))}),PRe=["axis","item"],OP=A.forwardRef((t,e)=>A.createElement(ORe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:PRe,tooltipPayloadSearcher:nK,categoricalChartProps:t,ref:e}));function DRe(t){var e=gn();return A.useEffect(()=>{e(tRe(t))},[e,t]),null}var RRe=["layout"];function u2(){return u2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u2.apply(null,arguments)}function MRe(t,e){if(t==null)return{};var n,r,i=jRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var zRe={top:5,right:5,bottom:5,left:5},sX={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:zRe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},LRe=A.forwardRef(function(e,n){var r,i=Wr(e.categoricalChartProps,sX),{layout:a}=i,s=MRe(i,RRe),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:f}=e,h={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return A.createElement(nX,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:o},A.createElement(DK,{chartData:i.data}),A.createElement(rX,{layout:a,margin:i.margin}),A.createElement(iX,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(DRe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(aX,u2({},s,{ref:n})))});function sU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sU(Object(n),!0).forEach(function(r){VRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VRe(t,e,n){return(e=BRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BRe(t){var e=URe(t,"string");return typeof e=="symbol"?e:e+""}function URe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FRe=["item"],$Re=oU(oU({},sX),{},{layout:"centric",startAngle:0,endAngle:360}),qRe=A.forwardRef((t,e)=>{var n=Wr(t,$Re);return A.createElement(LRe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:FRe,tooltipPayloadSearcher:nK,categoricalChartProps:n,ref:e})});const lU=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316","#14B8A6","#6366F1","#84CC16","#D946EF"],cU=["#10B981","#3B82F6","#F59E0B","#8B5CF6","#06B6D4","#F97316","#EC4899","#14B8A6"];function oX(t,e){const n=[];if(t.startsWith("year-")){const c=parseInt(t.split("-")[1],10);for(let d=1;d<=12;d++)n.push(`${c}-${String(d).padStart(2,"0")}`);return n}const i={"1m":1,"3m":3,"6m":6,"9m":9,"12m":12}[t]||1,[a,s]=e.split("-").map(Number),o=new Date(a,s-1,1);for(let c=i-1;c>=0;c--){const d=new Date(o.getFullYear(),o.getMonth()-c,1),f=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`;n.push(f)}return n}const GRe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function eb(t){const e=parseInt(t.split("-")[1],10);return GRe[e-1]||t}function HRe(t){const e={};return t.forEach((n,r)=>{e[n.id]=lU[r%lU.length]}),e}function WRe(t){const e={};return[...new Set(t)].forEach((r,i)=>{e[r]=cU[i%cU.length]}),e}function YRe(t){const{transactions:e,envelopes:n,categories:r,incomeSources:i,currentMonth:a}=pt(),s=A.useMemo(()=>oX(t,a),[t,a]),o=A.useMemo(()=>{const x={};return n.forEach(w=>{x[w.id]=w.categoryId||"uncategorized"}),x},[n]),c=A.useMemo(()=>HRe(r),[r]),d=A.useMemo(()=>{const x={};return r.forEach(w=>{x[w.id]=w.name}),x},[r]),f=A.useMemo(()=>{const x=new Set(s);return e.filter(w=>w.type==="Expense"&&w.month&&x.has(w.month))},[e,s]),h=A.useMemo(()=>{const x={};r.forEach(T=>{x[T.id]=0}),f.forEach(T=>{const N=o[T.envelopeId]||"uncategorized";x[N]=(x[N]||0)+Math.abs(T.amount)});const w=Object.entries(x).map(([T,N])=>({categoryId:T,categoryName:d[T]||"Uncategorized",color:c[T]||"#9CA3AF",amount:Math.round(N*100)/100})).sort((T,N)=>N.amount-T.amount),_=w.reduce((T,N)=>T+N.amount,0);return{items:w,total:Math.round(_*100)/100}},[f,o,d,c,r]),g=A.useMemo(()=>{const x=new Set(r.map(O=>O.id)),w={};s.forEach(O=>{w[O]={}}),f.forEach(O=>{const C=o[O.envelopeId]||"uncategorized",I=O.month;w[I]&&(w[I][C]=(w[I][C]||0)+Math.abs(O.amount),x.add(C))});const _=[...x],T={};_.forEach(O=>{T[O]=c[O]||"#9CA3AF"});const N=s.map(O=>{const C={month:O,monthLabel:eb(O)};return _.forEach(I=>{C[I]=Math.round((w[O][I]||0)*100)/100}),C}),D=N.map(O=>_.reduce((C,I)=>C+(O[I]||0),0)),P=D.length>0?Math.round(D.reduce((O,C)=>O+C,0)/D.length):0;return{data:N,categoryKeys:_,colorMap:T,average:P}},[s,f,o,c,r]),v=A.useMemo(()=>{const x=[],w={};s.forEach(O=>{w[O]={}}),s.forEach(O=>{(i[O]||[]).forEach(I=>{x.push(I.name),w[O][I.name]=(w[O][I.name]||0)+I.amount})});const _=[...new Set(x)],T=WRe(_),N=s.map(O=>{const C={month:O,monthLabel:eb(O)};return _.forEach(I=>{C[I]=Math.round((w[O][I]||0)*100)/100}),C}),D=N.map(O=>_.reduce((C,I)=>C+(O[I]||0),0)),P=D.length>0?Math.round(D.reduce((O,C)=>O+C,0)/D.length):0;return{data:N,sourceKeys:_,colorMap:T,average:P}},[s,i]),b=A.useMemo(()=>({data:s.map(w=>{const T=(i[w]||[]).reduce((I,R)=>I+R.amount,0),D=f.filter(I=>I.month===w).reduce((I,R)=>I+Math.abs(R.amount),0),P=Math.max(0,T-D);if(T<=0)return{month:w,monthLabel:eb(w),savingsPercent:0,spendingPercent:100};const O=Math.min(100,Math.round(P/T*1e3)/10),C=Math.round((100-O)*10)/10;return{month:w,monthLabel:eb(w),savingsPercent:O,spendingPercent:C}})}),[s,i,f]);return{months:s,spendingTotals:h,spendingBreakdown:g,monthlyIncome:v,savingsData:b,categoryNameMap:d,categoryColorMap:c}}const KRe=[{key:"totals",label:"Spending Totals"},{key:"breakdown",label:"Spending Breakdown"},{key:"income",label:"Monthly Income"},{key:"savings",label:"Savings"}],XRe=[{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"6m",label:"6 Months"},{value:"9m",label:"9 Months"},{value:"12m",label:"12 Months"}];function QRe(){const t=new Date().getFullYear(),e=[];for(let n=t;n>=2024;n--)e.push({value:`year-${n}`,label:`${n}`});return e}const PP=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),u1=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),lX=({active:t,payload:e,label:n,nameMap:r})=>{if(!t||!e?.length)return null;const i=e.reduce((a,s)=>a+(s.value||0),0);return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),e.map((a,s)=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:a.fill||a.color}}),m.jsxs("span",{className:"text-zinc-600 dark:text-zinc-300",children:[r?.[a.dataKey]||a.dataKey,":"]}),m.jsx("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:u1(a.value)})]},s)),m.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-700 mt-1.5 pt-1.5 flex justify-between font-semibold",children:[m.jsx("span",{className:"text-zinc-700 dark:text-zinc-200",children:"Total"}),m.jsx("span",{className:"text-zinc-900 dark:text-white",children:u1(i)})]})]})},ZRe=({active:t,payload:e,label:n})=>{if(!t||!e?.length)return null;const r=e.find(a=>a.dataKey==="savingsPercent"),i=e.find(a=>a.dataKey==="spendingPercent");return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),r&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#3B82F6"}}),m.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Savings & Investments:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[r.value.toFixed(1),"%"]})]}),i&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#4ADE80"}}),m.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Spending:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[i.value.toFixed(1),"%"]})]})]})},JRe=()=>{const t=$a(),[e,n]=A.useState("totals"),[r,i]=A.useState("12m"),{currentMonth:a}=pt(),s=pt(b=>b.fetchMonthData),o=A.useMemo(()=>QRe(),[]),c=A.useRef(new Set);A.useEffect(()=>{const b=oX(r,a),x=pt.getState(),w=b.filter(T=>{if(c.current.has(T)||x.areAllTransactionsLoaded)return!1;const N=x.incomeSources[T]!==void 0,D=x.loadedTransactionMonths.includes(T);return!N||!D});if(w.length===0)return;w.forEach(T=>c.current.add(T)),(async()=>{for(const T of w)try{await s(T)}catch(N){console.error(`Failed to fetch data for month ${T}:`,N),c.current.delete(T)}})()},[r,a,s]);const{spendingTotals:d,spendingBreakdown:f,monthlyIncome:h,savingsData:g,categoryNameMap:v}=YRe(r);return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-32",children:[m.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50 safe-area-top",children:[m.jsxs("div",{className:"flex items-center gap-3 px-4 pt-2 pb-2",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:m.jsx(al,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),m.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Analytics"})]}),m.jsx("div",{className:"px-4 pb-2",children:m.jsx("div",{className:"flex flex-wrap gap-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl p-1",children:KRe.map(({key:b,label:x})=>m.jsx("button",{onClick:()=>n(b),className:`
                  flex-1 min-w-0 px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200
                  ${e===b?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}
                `,children:x},b))})}),m.jsx("div",{className:"px-4 pb-3 overflow-x-auto scrollbar-hide",children:m.jsxs("div",{className:"inline-flex gap-1.5 min-w-max",children:[XRe.map(({value:b,label:x})=>m.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b)),o.map(({value:b,label:x})=>m.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b))]})})]}),m.jsxs("div",{className:"px-4 pt-4",children:[e==="totals"&&m.jsx(eMe,{items:d.items,total:d.total}),e==="breakdown"&&m.jsx(tMe,{data:f.data,categoryKeys:f.categoryKeys,colorMap:f.colorMap,nameMap:v,average:f.average}),e==="income"&&m.jsx(nMe,{data:h.data,sourceKeys:h.sourceKeys,colorMap:h.colorMap,average:h.average}),e==="savings"&&m.jsx(rMe,{data:g.data})]})]})},eMe=({items:t,total:e})=>t.length===0?m.jsx(nS,{message:"No spending data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:m.jsxs("div",{className:"relative no-select-chart",children:[m.jsx(_w,{width:"100%",height:280,children:m.jsxs(qRe,{children:[m.jsx(NK,{data:t,dataKey:"amount",nameKey:"categoryName",cx:"50%",cy:"50%",innerRadius:"55%",outerRadius:"80%",paddingAngle:2,strokeWidth:0,isAnimationActive:!1,children:t.map((n,r)=>m.jsx(Mv,{fill:n.color},r))}),m.jsx(Ww,{content:({active:n,payload:r})=>{if(!n||!r?.length)return null;const i=r[0].payload,a=e>0?(i.amount/e*100).toFixed(1):"0";return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:i.color}}),m.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:i.categoryName})]}),m.jsxs("div",{className:"text-zinc-600 dark:text-zinc-300",children:[u1(i.amount)," (",a,"%)"]})]})},contentStyle:{backgroundColor:"transparent",border:"none",padding:0,borderRadius:0,boxShadow:"none"}})]})}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none z-10",children:[m.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Total Spent"}),m.jsx("span",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:PP(e)})]})]})}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Categories"}),m.jsx("div",{className:"space-y-2",children:t.map(n=>{const r=e>0?(n.amount/e*100).toFixed(1):"0";return m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2.5",children:[m.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),m.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:n.categoryName})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:[r,"%"]}),m.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white w-20 text-right",children:u1(n.amount)})]})]},n.categoryId)})})]})]}),tMe=({data:t,categoryKeys:e,colorMap:n,nameMap:r,average:i})=>t.length===0||e.length===0?m.jsx(nS,{message:"No spending data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Spending by Category"}),m.jsx(_w,{width:"100%",height:300,children:m.jsxs(OP,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(Jw,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(eS,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(tS,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(Ww,{cursor:!1,content:a=>m.jsx(lX,{...a,colorMap:n,nameMap:r})}),m.jsx(EP,{y:i,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${PP(i)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>m.jsx(Dm,{dataKey:a,stackId:"spending",fill:n[a],radius:[0,0,0,0],name:r[a]||a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),m.jsx(cX,{keys:e,colorMap:n,nameMap:r})]}),nMe=({data:t,sourceKeys:e,colorMap:n,average:r})=>{const i=A.useMemo(()=>{const a={};return e.forEach(s=>{a[s]=s}),a},[e]);return t.length===0||e.length===0?m.jsx(nS,{message:"No income data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Income by Source"}),m.jsx(_w,{width:"100%",height:300,children:m.jsxs(OP,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(Jw,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(eS,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(tS,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(Ww,{cursor:!1,content:a=>m.jsx(lX,{...a,colorMap:n,nameMap:i})}),m.jsx(EP,{y:r,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${PP(r)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>m.jsx(Dm,{dataKey:a,stackId:"income",fill:n[a],radius:[0,0,0,0],name:a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),m.jsx(cX,{keys:e,colorMap:n,nameMap:i})]})},rMe=({data:t})=>{if(t.length===0)return m.jsx(nS,{message:"No data for this time period."});const e=t.length>0?Math.round(t.reduce((n,r)=>n+r.savingsPercent,0)/t.length*10)/10:0;return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300",children:"Income Allocation (Savings Base)"}),m.jsxs("span",{className:"text-xs font-medium text-blue-500",children:["Avg Savings: ",e,"%"]})]}),m.jsx(_w,{width:"100%",height:300,children:m.jsxs(OP,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(Jw,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(eS,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(tS,{domain:[0,100],tickFormatter:n=>`${n}%`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(Ww,{content:ZRe}),m.jsx(Dm,{dataKey:"savingsPercent",stackId:"allocation",fill:"#3B82F6",name:"Savings & Investments",radius:[0,0,0,0]}),m.jsx(Dm,{dataKey:"spendingPercent",stackId:"allocation",fill:"#4ADE80",name:"Spending",radius:[0,0,0,0]})]})})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Savings & Investments"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Spending"})]})]}),m.jsx("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-2",children:"Pay yourself first: savings grows from the bottom, reinforcing the goal of maximizing your savings rate."})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Savings Rate"}),m.jsx("div",{className:"space-y-2",children:t.map(n=>m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 w-10",children:n.monthLabel}),m.jsx("div",{className:"flex-1 mx-3 h-2 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${n.savingsPercent}%`}})}),m.jsxs("span",{className:`text-sm font-medium w-14 text-right ${n.savingsPercent>=20?"text-blue-500":n.savingsPercent>=10?"text-amber-500":"text-red-500"}`,children:[n.savingsPercent.toFixed(1),"%"]})]},n.month))})]})]})},cX=({keys:t,colorMap:e,nameMap:n})=>m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Legend"}),m.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:t.map(r=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e[r]}}),m.jsx("span",{className:"text-xs text-zinc-600 dark:text-zinc-300",children:n[r]||r})]},r))})]}),nS=({message:t})=>m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[m.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:m.jsx(jb,{className:"w-8 h-8 text-zinc-400"})}),m.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm",children:t})]}),Lo=({children:t})=>m.jsx(gt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:"easeInOut"},className:"w-full h-full bg-gray-50 dark:bg-black",children:t}),iMe=()=>{const t=Ss();return m.jsx(lr,{mode:"wait",children:m.jsxs(rre,{location:t,children:[m.jsx(Gs,{path:"/",element:m.jsx(Lo,{children:m.jsx(Zi,{children:m.jsx(D0e,{})})})}),m.jsx(Gs,{path:"/envelope/:id",element:m.jsx(Lo,{children:m.jsx(Zi,{children:m.jsx(V0e,{})})})}),m.jsx(Gs,{path:"/add-envelope",element:m.jsx(Lo,{children:m.jsx(Zi,{children:m.jsx(G0e,{})})})}),m.jsx(Gs,{path:"/add-transaction",element:m.jsx(Lo,{children:m.jsx(Zi,{children:m.jsx(oG,{})})})}),m.jsx(Gs,{path:"/transactions",element:m.jsx(Lo,{children:m.jsx(Zi,{children:m.jsx(yye,{})})})}),m.jsx(Gs,{path:"/settings",element:m.jsx(Lo,{children:m.jsx(Zi,{children:m.jsx(F0e,{})})})}),m.jsx(Gs,{path:"/settings/categories",element:m.jsx(Lo,{children:m.jsx(Zi,{children:m.jsx(q0e,{})})})}),m.jsx(Gs,{path:"/verify-email",element:m.jsx(Lo,{children:m.jsx(Zi,{children:m.jsx(m$,{})})})}),m.jsx(Gs,{path:"/analytics",element:m.jsx(Lo,{children:m.jsx(Zi,{children:m.jsx(JRe,{})})})})]},t.pathname)})},aMe=()=>{const t=$a(),{envelopes:e,appSettings:n}=pt(),r=A.useRef(!1);return A.useEffect(()=>{const i=n?.siriToken;if($.log(" Siri: Handler checking - siriToken:",i,"envelopes count:",e.length),!i||e.length===0){$.log(" Siri: Handler not ready - missing token or envelopes");return}const a=bt(Ze,"siriQueries",i);$.log(" Siri: Setting up Firestore listener for token:",i);const s=Dc(a,async o=>{if($.log(" Siri: Firestore snapshot received, exists:",o.exists()),!o.exists()||r.current)return;const c=o.data();if(!c?.query||c.consumed)return;if(Date.now()-(c.timestamp||0)>12e4){try{await na(a)}catch(f){$.error("Failed to cleanup stale Siri query",f)}return}$.log(" Siri: Found pending query in Firestore:",c.query),r.current=!0;try{await na(a);const f=await dC(c.query,e);$.log(" Siri: Parsed result:",f),sessionStorage.setItem("siriParsedData",JSON.stringify(f)),sessionStorage.setItem("siriQuery",c.query),t(`/add-transaction?siri=${Date.now()}`),window.dispatchEvent(new CustomEvent("siri-query-ready"))}catch(f){$.error(" Siri: Error processing query:",f)}finally{r.current=!1}},o=>{$.error(" Siri: Error listening for queries:",o)});return()=>s()},[e,n?.siriToken,t]),null},d2=[{id:"income",targetId:"tutorial-income-section",title:"Add Your Income",description:"Tap the + button to add your first income source (e.g., Salary, Freelance).",icon:yg,color:"green",encouragement:"Great start! Every budget begins with income."},{id:"envelope",targetId:"tutorial-add-envelope",title:"Create a Spending Envelope",description:"Tap the + on any category to create your first spending envelope.",icon:ih,color:"purple",encouragement:"Nice! Envelopes help you track where money goes."},{id:"allocate",targetId:"tutorial-allocation-area",title:"Assign Money to Envelopes",description:"Tap the budget amount on an envelope and enter how much to allocate.",icon:ju,color:"blue",encouragement:"Almost there! Give every dollar a job."},{id:"piggybank",targetId:"tutorial-add-envelope",title:"Create a Piggybank",description:'Create a savings goal envelope. Toggle "Piggybank" when adding a new envelope.',icon:bd,color:"pink",encouragement:"You did it! Your budget is set up!"}],tb=d2.length,uU={green:{bg:"bg-green-50 dark:bg-green-900/30",border:"border-green-300 dark:border-green-700",text:"text-green-700 dark:text-green-300",ring:"ring-green-400",progressBg:"bg-green-500"},purple:{bg:"bg-purple-50 dark:bg-purple-900/30",border:"border-purple-300 dark:border-purple-700",text:"text-purple-700 dark:text-purple-300",ring:"ring-purple-400",progressBg:"bg-purple-500"},blue:{bg:"bg-blue-50 dark:bg-blue-900/30",border:"border-blue-300 dark:border-blue-700",text:"text-blue-700 dark:text-blue-300",ring:"ring-blue-400",progressBg:"bg-blue-500"},pink:{bg:"bg-pink-50 dark:bg-pink-900/30",border:"border-pink-300 dark:border-pink-700",text:"text-pink-700 dark:text-pink-300",ring:"ring-pink-400",progressBg:"bg-pink-500"}};function sMe(){const[t,e]=A.useState(!1);return A.useEffect(()=>{const n=()=>{const i=document.querySelectorAll(".fixed.inset-0.z-50");e(i.length>0)};n();const r=new MutationObserver(n);return r.observe(document.body,{childList:!0,subtree:!0}),()=>r.disconnect()},[]),t}const oMe=({targetRect:t,visible:e})=>{if(!e||!t)return null;const n=8,r=16,i=t.left-n,a=t.top-n,s=t.width+n*2,o=t.height+n*2;return m.jsxs("div",{className:"fixed inset-0 z-[48] pointer-events-none",children:[m.jsxs("svg",{className:"w-full h-full pointer-events-none",children:[m.jsx("defs",{children:m.jsxs("mask",{id:"spotlight-mask",children:[m.jsx("rect",{width:"100%",height:"100%",fill:"white"}),m.jsx("rect",{x:i,y:a,width:s,height:o,rx:r,ry:r,fill:"black"})]})}),m.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0,0,0,0.6)",mask:"url(#spotlight-mask)"})]}),m.jsx("div",{className:"absolute left-0 right-0 top-0 pointer-events-auto",style:{height:Math.max(0,a)}}),m.jsx("div",{className:"absolute left-0 right-0 bottom-0 pointer-events-auto",style:{top:a+o}}),m.jsx("div",{className:"absolute left-0 pointer-events-auto",style:{top:a,height:o,width:Math.max(0,i)}}),m.jsx("div",{className:"absolute right-0 pointer-events-auto",style:{top:a,height:o,left:i+s}}),m.jsx(gt.div,{className:"absolute border-2 border-white/60 rounded-2xl pointer-events-none",style:{left:i,top:a,width:s,height:o},animate:{boxShadow:["0 0 0 0 rgba(255,255,255,0.4)","0 0 0 8px rgba(255,255,255,0)","0 0 0 0 rgba(255,255,255,0.4)"]},transition:{duration:2,repeat:1/0}})]})},lMe=()=>{const t=pt(I=>I.guidedTutorialStep),e=pt(I=>I.skipGuidedTutorial),n=pt(I=>I.advanceGuidedTutorial),r=pt(I=>I.incomeSources),i=pt(I=>I.currentMonth),a=pt(I=>I.envelopes),s=pt(I=>I.allocations),o=A.useMemo(()=>a.filter(I=>I.isPiggybank),[a]),c=sMe(),[d,f]=A.useState(null),[h,g]=A.useState(!1),[v,b]=A.useState(!1),x=A.useRef(null),w=t,_=w!==null&&w>=0&&w<tb,T=_?d2[w]:null,N=!c&&!h&&!v,D=A.useCallback(()=>{if(!T){f(null);return}const I=document.getElementById(T.targetId);f(I?I.getBoundingClientRect():null)},[T]);if(A.useEffect(()=>{D();const I=setInterval(D,500);return window.addEventListener("resize",D),window.addEventListener("scroll",D,!0),()=>{clearInterval(I),window.removeEventListener("resize",D),window.removeEventListener("scroll",D,!0)}},[D]),A.useEffect(()=>{if(w===null)return;if((()=>{switch(w){case 0:return(r[i]||[]).length>0;case 1:return a.filter(R=>!R.isPiggybank).length>0;case 2:return(s[i]||[]).filter(R=>R.budgetedAmount>0).length>0;case 3:return o.length>0;default:return!1}})())return b(!0),x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{b(!1),n(),x.current=null},1500),()=>{x.current&&(clearTimeout(x.current),x.current=null)}},[w,r,i,a,s,o,n]),!_||!T)return null;const P=uU[T.color]||uU.blue,O=T.icon,C=(w+1)/tb*100;return m.jsxs(m.Fragment,{children:[N&&m.jsx(oMe,{targetRect:d,visible:!0}),m.jsxs(lr,{mode:"wait",children:[!v&&!h&&!c&&m.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"fixed left-4 right-4 z-[49] max-w-md mx-auto pointer-events-auto",style:d?{bottom:d.top>window.innerHeight/2?window.innerHeight-d.top+20:void 0,top:d.top<=window.innerHeight/2?d.bottom+20:void 0}:{bottom:24},children:m.jsxs("div",{className:`${P.bg} border ${P.border} rounded-2xl p-4 shadow-2xl`,children:[m.jsxs("div",{className:"mb-3",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[m.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-zinc-400",children:"Setup Progress"}),m.jsxs("span",{className:"text-xs font-bold text-gray-700 dark:text-zinc-300",children:[Math.round(C),"%"]})]}),m.jsx("div",{className:"w-full h-2.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx(gt.div,{className:`h-full rounded-full ${P.progressBg}`,initial:{width:`${w/tb*100}%`},animate:{width:`${C}%`},transition:{duration:.5,ease:"easeOut"}})}),m.jsx("div",{className:"flex justify-between mt-1",children:d2.map((I,R)=>m.jsx("div",{className:"flex flex-col items-center",children:m.jsx("div",{className:`w-2 h-2 rounded-full mt-1 ${R<w?"bg-green-500":R===w?P.progressBg:"bg-gray-300 dark:bg-zinc-600"}`})},I.id))})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:`${P.bg} p-2 rounded-xl border ${P.border} flex-shrink-0`,children:m.jsx(O,{className:`w-6 h-6 ${P.text}`})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm mb-1",children:["Step ",w+1,": ",T.title]}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-zinc-400 leading-relaxed",children:T.description})]})]}),m.jsx("div",{className:"mt-3 flex justify-end",children:m.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 text-xs text-gray-400 dark:text-zinc-500 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors px-2 py-1 rounded-lg hover:bg-white/50 dark:hover:bg-zinc-800/50",children:[m.jsx(R9,{size:12}),"Skip Tutorial"]})})]})},`step-${w}`),v&&m.jsx(gt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed inset-0 z-[49] flex items-center justify-center pointer-events-none",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-2xl border border-green-200 dark:border-green-800 text-center max-w-xs",children:[m.jsx(gt.div,{animate:{rotate:[0,-10,10,-10,0]},transition:{duration:.5},children:m.jsx(Hs,{className:"w-12 h-12 text-green-500 mx-auto mb-2"})}),m.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-lg mb-1",children:w<tb-1?"Step Complete!":"All Done!"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:T.encouragement})]})},"celebration")]}),m.jsx(lr,{children:h&&m.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs(gt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-gray-200 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Skip Tutorial?"}),m.jsxs("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-1",children:["You're ",m.jsxs("strong",{children:[Math.round(C),"%"]})," through the setup!"]}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-4",children:"You can always restart from Settings if you change your mind."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Keep Going"}),m.jsx("button",{onClick:()=>{g(!1),e()},className:"flex-1 py-2.5 px-4 bg-gray-800 dark:bg-zinc-700 text-white rounded-xl font-medium hover:bg-gray-900 dark:hover:bg-zinc-600 transition-colors",children:"Skip"})]})]})})})]})};function cMe(){const[t,e]=A.useState(!0),[n,r]=A.useState(!1),[i,a]=A.useState(null),{appSettings:s,isOnboardingActive:o}=pt(),{isAuthenticated:c,isInitialized:d,initializeAuth:f,lastAuthTime:h,offlineGracePeriod:g,currentUser:v}=Zt(),{showToast:b}=Hc();if(A.useEffect(()=>{const _=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(_)},[]),A.useEffect(()=>f(),[f]),A.useEffect(()=>{(async()=>{const T=new URLSearchParams(window.location.search),N=T.get("mode"),D=T.get("oobCode");if(N==="resetPassword"&&D){$.log(" Processing password reset from URL"),a(D);return}if(N==="verifyEmail"&&D){$.log(" Processing email verification from URL");try{await Bee(fi,D),$.log(" Email verification successful");const P=window.location.pathname;if(window.history.replaceState({},document.title,P),fi.currentUser){await fi.currentUser.reload(),$.log(" User reloaded after verification");const O=await eh(()=>Promise.resolve().then(()=>Zq),void 0).then(C=>C.useBudgetStore.getState());$.log(" Triggering onboarding check after email verification..."),await O.checkAndStartOnboarding()}b("Email verified successfully! You can now sign in.","success"),setTimeout(async()=>{await fi.signOut()},2e3)}catch(P){$.error(" Email verification failed:",P),b("Email verification failed. The link may be expired or invalid.","error")}}})()},[]),A.useEffect(()=>{const _=document.documentElement,T=window.matchMedia("(prefers-color-scheme: dark)"),N=()=>{const D=s?.theme??"system",P=T.matches;D==="dark"||D==="system"&&P?_.classList.add("dark"):_.classList.remove("dark")};if(N(),s?.theme==="system")return T.addEventListener("change",N),()=>T.removeEventListener("change",N)},[s]),A.useEffect(()=>{const _=document.documentElement;switch(s?.fontSize??"medium"){case"extra-small":_.style.fontSize="75%";break;case"small":_.style.fontSize="87.5%";break;case"large":_.style.fontSize="112.5%";break;case"extra-large":_.style.fontSize="125%";break;default:_.style.fontSize="100%"}},[s?.fontSize]),t||!d)return m.jsxs(m.Fragment,{children:[m.jsx(v$,{message:"Initializing Personal Budget..."}),m.jsx(yy,{})]});if(i)return m.jsxs(Zi,{children:[m.jsx(Gle,{oobCode:i,onSuccess:()=>{a(null);const _=window.location.pathname;window.history.replaceState({},document.title,_)},onCancel:()=>{a(null);const _=window.location.pathname;window.history.replaceState({},document.title,_)}}),m.jsx(yy,{})]});if(!c)return v?m.jsxs(Zi,{children:[m.jsx(m$,{}),m.jsx(yy,{})]}):m.jsxs(Zi,{children:[m.jsx(qle,{}),m.jsx(yy,{})]});const w=typeof navigator<"u"&&!navigator.onLine&&c&&h&&Date.now()-h<g;return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed opacity-0 pointer-events-none -z-50",children:m.jsx("label",{id:"ios-haptic-trigger",htmlFor:"ios-haptic-checkbox",children:m.jsx("input",{type:"checkbox",id:"ios-haptic-checkbox",switch:"true"})})}),m.jsxs(Zi,{children:[w&&m.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((g-(Date.now()-h))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),m.jsxs(Cre,{children:[m.jsx(aMe,{}),m.jsx(iMe,{}),n&&m.jsxs("div",{className:"fixed inset-0 z-[60]",children:[m.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>r(!1)}),m.jsx("div",{className:"absolute inset-0",children:m.jsx(oG,{onClose:()=>r(!1),onSaved:()=>r(!1)})})]}),m.jsx(lMe,{}),!o&&m.jsx(Nhe,{onAddTransaction:()=>r(!0)})]})]})]})}JQ({onNeedRefresh(){},onOfflineReady(){$.log("App is ready for offline work")}});XQ.createRoot(document.getElementById("root")).render(m.jsx(A.StrictMode,{children:m.jsx(cMe,{})}));export{xt as T,Ze as a,Ble as b,iz as c,bt as d,Fr as e,Ji as f,xE as g,na as h,$ as l,Dc as o,Mi as q,ea as s,Cu as t,Ys as u,hb as w};
