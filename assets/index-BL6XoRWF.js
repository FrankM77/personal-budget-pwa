(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function Y5(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var o1={exports:{}},qf={};var ZC;function K5(){if(ZC)return qf;ZC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return qf.Fragment=e,qf.jsx=t,qf.jsxs=t,qf}var JC;function X5(){return JC||(JC=1,o1.exports=K5()),o1.exports}var y=X5(),l1={exports:{}},lt={};var e2;function W5(){if(e2)return lt;e2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),m=Symbol.iterator;function b(U){return U===null||typeof U!="object"?null:(U=m&&U[m]||U["@@iterator"],typeof U=="function"?U:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,S={};function T(U,Y,te){this.props=U,this.context=Y,this.refs=S,this.updater=te||_}T.prototype.isReactComponent={},T.prototype.setState=function(U,Y){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Y,"setState")},T.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function I(){}I.prototype=T.prototype;function D(U,Y,te){this.props=U,this.context=Y,this.refs=S,this.updater=te||_}var O=D.prototype=new I;O.constructor=D,E(O,T.prototype),O.isPureReactComponent=!0;var z=Array.isArray;function j(){}var C={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function k(U,Y,te){var se=te.ref;return{$$typeof:n,type:U,key:Y,ref:se!==void 0?se:null,props:te}}function P(U,Y){return k(U.type,Y,U.props)}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function B(U){var Y={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(te){return Y[te]})}var M=/\/+/g;function W(U,Y){return typeof U=="object"&&U!==null&&U.key!=null?B(""+U.key):Y.toString(36)}function Q(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(j,j):(U.status="pending",U.then(function(Y){U.status==="pending"&&(U.status="fulfilled",U.value=Y)},function(Y){U.status==="pending"&&(U.status="rejected",U.reason=Y)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function $(U,Y,te,se,pe){var ie=typeof U;(ie==="undefined"||ie==="boolean")&&(U=null);var ve=!1;if(U===null)ve=!0;else switch(ie){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(U.$$typeof){case n:case e:ve=!0;break;case h:return ve=U._init,$(ve(U._payload),Y,te,se,pe)}}if(ve)return pe=pe(U),ve=se===""?"."+W(U,0):se,z(pe)?(te="",ve!=null&&(te=ve.replace(M,"$&/")+"/"),$(pe,Y,te,"",function(ke){return ke})):pe!=null&&(L(pe)&&(pe=P(pe,te+(pe.key==null||U&&U.key===pe.key?"":(""+pe.key).replace(M,"$&/")+"/")+ve)),Y.push(pe)),1;ve=0;var Ae=se===""?".":se+":";if(z(U))for(var Ie=0;Ie<U.length;Ie++)se=U[Ie],ie=Ae+W(se,Ie),ve+=$(se,Y,te,ie,pe);else if(Ie=b(U),typeof Ie=="function")for(U=Ie.call(U),Ie=0;!(se=U.next()).done;)se=se.value,ie=Ae+W(se,Ie++),ve+=$(se,Y,te,ie,pe);else if(ie==="object"){if(typeof U.then=="function")return $(Q(U),Y,te,se,pe);throw Y=String(U),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ve}function H(U,Y,te){if(U==null)return U;var se=[],pe=0;return $(U,se,"","",function(ie){return Y.call(te,ie,pe++)}),se}function ee(U){if(U._status===-1){var Y=U._result;Y=Y(),Y.then(function(te){(U._status===0||U._status===-1)&&(U._status=1,U._result=te)},function(te){(U._status===0||U._status===-1)&&(U._status=2,U._result=te)}),U._status===-1&&(U._status=0,U._result=Y)}if(U._status===1)return U._result.default;throw U._result}var ne=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},de={map:H,forEach:function(U,Y,te){H(U,function(){Y.apply(this,arguments)},te)},count:function(U){var Y=0;return H(U,function(){Y++}),Y},toArray:function(U){return H(U,function(Y){return Y})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return lt.Activity=p,lt.Children=de,lt.Component=T,lt.Fragment=t,lt.Profiler=i,lt.PureComponent=D,lt.StrictMode=r,lt.Suspense=u,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,lt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return C.H.useMemoCache(U)}},lt.cache=function(U){return function(){return U.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(U,Y,te){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var se=E({},U.props),pe=U.key;if(Y!=null)for(ie in Y.key!==void 0&&(pe=""+Y.key),Y)!A.call(Y,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&Y.ref===void 0||(se[ie]=Y[ie]);var ie=arguments.length-2;if(ie===1)se.children=te;else if(1<ie){for(var ve=Array(ie),Ae=0;Ae<ie;Ae++)ve[Ae]=arguments[Ae+2];se.children=ve}return k(U.type,pe,se)},lt.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},lt.createElement=function(U,Y,te){var se,pe={},ie=null;if(Y!=null)for(se in Y.key!==void 0&&(ie=""+Y.key),Y)A.call(Y,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(pe[se]=Y[se]);var ve=arguments.length-2;if(ve===1)pe.children=te;else if(1<ve){for(var Ae=Array(ve),Ie=0;Ie<ve;Ie++)Ae[Ie]=arguments[Ie+2];pe.children=Ae}if(U&&U.defaultProps)for(se in ve=U.defaultProps,ve)pe[se]===void 0&&(pe[se]=ve[se]);return k(U,ie,pe)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(U){return{$$typeof:c,render:U}},lt.isValidElement=L,lt.lazy=function(U){return{$$typeof:h,_payload:{_status:-1,_result:U},_init:ee}},lt.memo=function(U,Y){return{$$typeof:d,type:U,compare:Y===void 0?null:Y}},lt.startTransition=function(U){var Y=C.T,te={};C.T=te;try{var se=U(),pe=C.S;pe!==null&&pe(te,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(j,ne)}catch(ie){ne(ie)}finally{Y!==null&&te.types!==null&&(Y.types=te.types),C.T=Y}},lt.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},lt.use=function(U){return C.H.use(U)},lt.useActionState=function(U,Y,te){return C.H.useActionState(U,Y,te)},lt.useCallback=function(U,Y){return C.H.useCallback(U,Y)},lt.useContext=function(U){return C.H.useContext(U)},lt.useDebugValue=function(){},lt.useDeferredValue=function(U,Y){return C.H.useDeferredValue(U,Y)},lt.useEffect=function(U,Y){return C.H.useEffect(U,Y)},lt.useEffectEvent=function(U){return C.H.useEffectEvent(U)},lt.useId=function(){return C.H.useId()},lt.useImperativeHandle=function(U,Y,te){return C.H.useImperativeHandle(U,Y,te)},lt.useInsertionEffect=function(U,Y){return C.H.useInsertionEffect(U,Y)},lt.useLayoutEffect=function(U,Y){return C.H.useLayoutEffect(U,Y)},lt.useMemo=function(U,Y){return C.H.useMemo(U,Y)},lt.useOptimistic=function(U,Y){return C.H.useOptimistic(U,Y)},lt.useReducer=function(U,Y,te){return C.H.useReducer(U,Y,te)},lt.useRef=function(U){return C.H.useRef(U)},lt.useState=function(U){return C.H.useState(U)},lt.useSyncExternalStore=function(U,Y,te){return C.H.useSyncExternalStore(U,Y,te)},lt.useTransition=function(){return C.H.useTransition()},lt.version="19.2.0",lt}var t2;function X_(){return t2||(t2=1,l1.exports=W5()),l1.exports}var G=X_();const ym=Y5(G);var c1={exports:{}},Hf={},u1={exports:{}},d1={};var n2;function Q5(){return n2||(n2=1,(function(n){function e($,H){var ee=$.length;$.push(H);e:for(;0<ee;){var ne=ee-1>>>1,de=$[ne];if(0<i(de,H))$[ne]=H,$[ee]=de,ee=ne;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var H=$[0],ee=$.pop();if(ee!==H){$[0]=ee;e:for(var ne=0,de=$.length,U=de>>>1;ne<U;){var Y=2*(ne+1)-1,te=$[Y],se=Y+1,pe=$[se];if(0>i(te,ee))se<de&&0>i(pe,te)?($[ne]=pe,$[se]=ee,ne=se):($[ne]=te,$[Y]=ee,ne=Y);else if(se<de&&0>i(pe,ee))$[ne]=pe,$[se]=ee,ne=se;else break e}}return H}function i($,H){var ee=$.sortIndex-H.sortIndex;return ee!==0?ee:$.id-H.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,p=null,m=3,b=!1,_=!1,E=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function O($){for(var H=t(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=$)r(d),H.sortIndex=H.expirationTime,e(u,H);else break;H=t(d)}}function z($){if(E=!1,O($),!_)if(t(u)!==null)_=!0,j||(j=!0,B());else{var H=t(d);H!==null&&Q(z,H.startTime-$)}}var j=!1,C=-1,A=5,k=-1;function P(){return S?!0:!(n.unstable_now()-k<A)}function L(){if(S=!1,j){var $=n.unstable_now();k=$;var H=!0;try{e:{_=!1,E&&(E=!1,I(C),C=-1),b=!0;var ee=m;try{t:{for(O($),p=t(u);p!==null&&!(p.expirationTime>$&&P());){var ne=p.callback;if(typeof ne=="function"){p.callback=null,m=p.priorityLevel;var de=ne(p.expirationTime<=$);if($=n.unstable_now(),typeof de=="function"){p.callback=de,O($),H=!0;break t}p===t(u)&&r(u),O($)}else r(u);p=t(u)}if(p!==null)H=!0;else{var U=t(d);U!==null&&Q(z,U.startTime-$),H=!1}}break e}finally{p=null,m=ee,b=!1}H=void 0}}finally{H?B():j=!1}}}var B;if(typeof D=="function")B=function(){D(L)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,W=M.port2;M.port1.onmessage=L,B=function(){W.postMessage(null)}}else B=function(){T(L,0)};function Q($,H){C=T(function(){$(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function($){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var ee=m;m=H;try{return $()}finally{m=ee}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function($,H){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ee=m;m=$;try{return H()}finally{m=ee}},n.unstable_scheduleCallback=function($,H,ee){var ne=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ne+ee:ne):ee=ne,$){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ee+de,$={id:h++,callback:H,priorityLevel:$,startTime:ee,expirationTime:de,sortIndex:-1},ee>ne?($.sortIndex=ee,e(d,$),t(u)===null&&$===t(d)&&(E?(I(C),C=-1):E=!0,Q(z,ee-ne))):($.sortIndex=de,e(u,$),_||b||(_=!0,j||(j=!0,B()))),$},n.unstable_shouldYield=P,n.unstable_wrapCallback=function($){var H=m;return function(){var ee=m;m=H;try{return $.apply(this,arguments)}finally{m=ee}}}})(d1)),d1}var r2;function Z5(){return r2||(r2=1,u1.exports=Q5()),u1.exports}var f1={exports:{}},xr={};var i2;function J5(){if(i2)return xr;i2=1;var n=X_();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return xr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,xr.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(u,d,null,h)},xr.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},xr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},xr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},xr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=c(h,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:b}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:m,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},xr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},xr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=c(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},xr.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},xr.requestFormReset=function(u){r.d.r(u)},xr.unstable_batchedUpdates=function(u,d){return u(d)},xr.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},xr.useFormStatus=function(){return o.H.useHostTransitionStatus()},xr.version="19.2.0",xr}var a2;function e6(){if(a2)return f1.exports;a2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),f1.exports=J5(),f1.exports}var s2;function t6(){if(s2)return Hf;s2=1;var n=Z5(),e=X_(),t=e6();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,g=l;;){var x=f.return;if(x===null)break;var w=x.alternate;if(w===null){if(g=x.return,g!==null){f=g;continue}break}if(x.child===w.child){for(w=x.child;w;){if(w===f)return u(x),s;if(w===g)return u(x),l;w=w.sibling}throw Error(r(188))}if(f.return!==g.return)f=x,g=w;else{for(var N=!1,F=x.child;F;){if(F===f){N=!0,f=x,g=w;break}if(F===g){N=!0,g=x,f=w;break}F=F.sibling}if(!N){for(F=w.child;F;){if(F===f){N=!0,f=w,g=x;break}if(F===g){N=!0,g=w,f=x;break}F=F.sibling}if(!N)throw Error(r(189))}}if(f.alternate!==g)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function h(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=h(s),l!==null)return l;s=s.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var M=Symbol.for("react.client.reference");function W(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===M?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case E:return"Fragment";case T:return"Profiler";case S:return"StrictMode";case z:return"Suspense";case j:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case D:return s.displayName||"Context";case I:return(s._context.displayName||"Context")+".Consumer";case O:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case C:return l=s.displayName||null,l!==null?l:W(s.type)||"Memo";case A:l=s._payload,s=s._init;try{return W(s(l))}catch{}}return null}var Q=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ne=[],de=-1;function U(s){return{current:s}}function Y(s){0>de||(s.current=ne[de],ne[de]=null,de--)}function te(s,l){de++,ne[de]=s.current,s.current=l}var se=U(null),pe=U(null),ie=U(null),ve=U(null);function Ae(s,l){switch(te(ie,l),te(pe,s),te(se,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?_C(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=_C(l),s=wC(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Y(se),te(se,s)}function Ie(){Y(se),Y(pe),Y(ie)}function ke(s){s.memoizedState!==null&&te(ve,s);var l=se.current,f=wC(l,s.type);l!==f&&(te(pe,s),te(se,f))}function xe(s){pe.current===s&&(Y(se),Y(pe)),ve.current===s&&(Y(ve),Bf._currentValue=ee)}var Ee,Xe;function je(s){if(Ee===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Ee=l&&l[1]||"",Xe=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+s+Xe}var Le=!1;function Pe(s,l){if(!s||Le)return"";Le=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(he){var ue=he}Reflect.construct(s,[],be)}else{try{be.call()}catch(he){ue=he}s.call(be.prototype)}}else{try{throw Error()}catch(he){ue=he}(be=s())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(he){if(he&&ue&&typeof he.stack=="string")return[he.stack,ue.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=g.DetermineComponentFrameRoot(),N=w[0],F=w[1];if(N&&F){var K=N.split(`
`),ce=F.split(`
`);for(x=g=0;g<K.length&&!K[g].includes("DetermineComponentFrameRoot");)g++;for(;x<ce.length&&!ce[x].includes("DetermineComponentFrameRoot");)x++;if(g===K.length||x===ce.length)for(g=K.length-1,x=ce.length-1;1<=g&&0<=x&&K[g]!==ce[x];)x--;for(;1<=g&&0<=x;g--,x--)if(K[g]!==ce[x]){if(g!==1||x!==1)do if(g--,x--,0>x||K[g]!==ce[x]){var me=`
`+K[g].replace(" at new "," at ");return s.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",s.displayName)),me}while(1<=g&&0<=x);break}}}finally{Le=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?je(f):""}function nt(s,l){switch(s.tag){case 26:case 27:case 5:return je(s.type);case 16:return je("Lazy");case 13:return s.child!==l&&l!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return Pe(s.type,!1);case 11:return Pe(s.type.render,!1);case 1:return Pe(s.type,!0);case 31:return je("Activity");default:return""}}function pt(s){try{var l="",f=null;do l+=nt(s,f),f=s,s=s.return;while(s);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Ve=Object.prototype.hasOwnProperty,Ye=n.unstable_scheduleCallback,Pt=n.unstable_cancelCallback,En=n.unstable_shouldYield,dn=n.unstable_requestPaint,mt=n.unstable_now,Vt=n.unstable_getCurrentPriorityLevel,yr=n.unstable_ImmediatePriority,br=n.unstable_UserBlockingPriority,ti=n.unstable_NormalPriority,qs=n.unstable_LowPriority,Be=n.unstable_IdlePriority,Ke=n.log,Gi=n.unstable_setDisableYieldValue,qt=null,Jt=null;function Sn(s){if(typeof Ke=="function"&&Gi(s),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(qt,s)}catch{}}var Dt=Math.clz32?Math.clz32:fn,Ct=Math.log,or=Math.LN2;function fn(s){return s>>>=0,s===0?32:31-(Ct(s)/or|0)|0}var Ze=256,Ot=262144,Tt=4194304;function jt(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Dn(s,l,f){var g=s.pendingLanes;if(g===0)return 0;var x=0,w=s.suspendedLanes,N=s.pingedLanes;s=s.warmLanes;var F=g&134217727;return F!==0?(g=F&~w,g!==0?x=jt(g):(N&=F,N!==0?x=jt(N):f||(f=F&~s,f!==0&&(x=jt(f))))):(F=g&~w,F!==0?x=jt(F):N!==0?x=jt(N):f||(f=g&~s,f!==0&&(x=jt(f)))),x===0?0:l!==0&&l!==x&&(l&w)===0&&(w=x&-x,f=l&-l,w>=f||w===32&&(f&4194048)!==0)?l:x}function vn(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Oc(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function es(){var s=Tt;return Tt<<=1,(Tt&62914560)===0&&(Tt=4194304),s}function Lr(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function mi(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function fy(s,l,f,g,x,w){var N=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var F=s.entanglements,K=s.expirationTimes,ce=s.hiddenUpdates;for(f=N&~f;0<f;){var me=31-Dt(f),be=1<<me;F[me]=0,K[me]=-1;var ue=ce[me];if(ue!==null)for(ce[me]=null,me=0;me<ue.length;me++){var he=ue[me];he!==null&&(he.lane&=-536870913)}f&=~be}g!==0&&ul(s,g,0),w!==0&&x===0&&s.tag!==0&&(s.suspendedLanes|=w&~(N&~l))}function ul(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var g=31-Dt(l);s.entangledLanes|=l,s.entanglements[g]=s.entanglements[g]|1073741824|f&261930}function qd(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var g=31-Dt(f),x=1<<g;x&l|s[g]&l&&(s[g]|=l),f&=~x}}function Hd(s,l){var f=l&-l;return f=(f&42)!==0?1:dl(f),(f&(s.suspendedLanes|l))!==0?0:f}function dl(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ts(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Wp(){var s=H.p;return s!==0?s:(s=window.event,s===void 0?32:HC(s.type))}function qi(s,l){var f=H.p;try{return H.p=s,l()}finally{H.p=f}}var Hi=Math.random().toString(36).slice(2),kn="__reactFiber$"+Hi,tr="__reactProps$"+Hi,ga="__reactContainer$"+Hi,Vc="__reactEvents$"+Hi,hy="__reactListeners$"+Hi,Qp="__reactHandles$"+Hi,Zp="__reactResources$"+Hi,ma="__reactMarker$"+Hi;function jc(s){delete s[kn],delete s[tr],delete s[Vc],delete s[hy],delete s[Qp]}function va(s){var l=s[kn];if(l)return l;for(var f=s.parentNode;f;){if(l=f[ga]||f[kn]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=RC(s);s!==null;){if(f=s[kn])return f;s=RC(s)}return l}s=f,f=s.parentNode}return null}function vi(s){if(s=s[kn]||s[ga]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function ni(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function ya(s){var l=s[Zp];return l||(l=s[Zp]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Nn(s){s[ma]=!0}var $d=new Set,Yd={};function ba(s,l){xa(s,l),xa(s+"Capture",l)}function xa(s,l){for(Yd[s]=l,s=0;s<l.length;s++)$d.add(l[s])}var Kd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xd={},Wd={};function Jp(s){return Ve.call(Wd,s)?!0:Ve.call(Xd,s)?!1:Kd.test(s)?Wd[s]=!0:(Xd[s]=!0,!1)}function zc(s,l,f){if(Jp(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function ri(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function Mn(s,l,f,g){if(g===null)s.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+g)}}function nr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Hs(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Qd(s,l,f){var g=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,w=g.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return x.call(this)},set:function(N){f=""+N,w.call(this,N)}}),Object.defineProperty(s,l,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(N){f=""+N},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function zt(s){if(!s._valueTracker){var l=Hs(s)?"checked":"value";s._valueTracker=Qd(s,l,""+s[l])}}function fl(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),g="";return s&&(g=Hs(s)?s.checked?"true":"false":s.value),s=g,s!==f?(l.setValue(s),!0):!1}function _a(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var hl=/[\n"\\]/g;function Br(s){return s.replace(hl,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Lc(s,l,f,g,x,w,N,F){s.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.type=N:s.removeAttribute("type"),l!=null?N==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+nr(l)):s.value!==""+nr(l)&&(s.value=""+nr(l)):N!=="submit"&&N!=="reset"||s.removeAttribute("value"),l!=null?Zd(s,N,nr(l)):f!=null?Zd(s,N,nr(f)):g!=null&&s.removeAttribute("value"),x==null&&w!=null&&(s.defaultChecked=!!w),x!=null&&(s.checked=x&&typeof x!="function"&&typeof x!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?s.name=""+nr(F):s.removeAttribute("name")}function eg(s,l,f,g,x,w,N,F){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),l!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){zt(s);return}f=f!=null?""+nr(f):"",l=l!=null?""+nr(l):f,F||l===s.value||(s.value=l),s.defaultValue=l}g=g??x,g=typeof g!="function"&&typeof g!="symbol"&&!!g,s.checked=F?s.checked:!!g,s.defaultChecked=!!g,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(s.name=N),zt(s)}function Zd(s,l,f){l==="number"&&_a(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function $s(s,l,f,g){if(s=s.options,l){l={};for(var x=0;x<f.length;x++)l["$"+f[x]]=!0;for(f=0;f<s.length;f++)x=l.hasOwnProperty("$"+s[f].value),s[f].selected!==x&&(s[f].selected=x),x&&g&&(s[f].defaultSelected=!0)}else{for(f=""+nr(f),l=null,x=0;x<s.length;x++){if(s[x].value===f){s[x].selected=!0,g&&(s[x].defaultSelected=!0);return}l!==null||s[x].disabled||(l=s[x])}l!==null&&(l.selected=!0)}}function tg(s,l,f){if(l!=null&&(l=""+nr(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+nr(f):""}function Ys(s,l,f,g){if(l==null){if(g!=null){if(f!=null)throw Error(r(92));if(Q(g)){if(1<g.length)throw Error(r(93));g=g[0]}f=g}f==null&&(f=""),l=f}f=nr(l),s.defaultValue=f,g=s.textContent,g===f&&g!==""&&g!==null&&(s.value=g),zt(s)}function Ur(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var ng=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jd(s,l,f){var g=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":g?s.setProperty(l,f):typeof f!="number"||f===0||ng.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function ef(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?s.setProperty(g,""):g==="float"?s.cssFloat="":s[g]="");for(var x in l)g=l[x],l.hasOwnProperty(x)&&f[x]!==g&&Jd(s,x,g)}else for(var w in l)l.hasOwnProperty(w)&&Jd(s,w,l[w])}function Bc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Uc(s){return Ks.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function $i(){}var tf=null;function yi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Xs=null,wa=null;function pl(s){var l=vi(s);if(l&&(s=l.stateNode)){var f=s[tr]||null;e:switch(s=l.stateNode,l.type){case"input":if(Lc(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Br(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var g=f[l];if(g!==s&&g.form===s.form){var x=g[tr]||null;if(!x)throw Error(r(90));Lc(g,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(l=0;l<f.length;l++)g=f[l],g.form===s.form&&fl(g)}break e;case"textarea":tg(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&$s(s,!!f.multiple,l,!1)}}}var Fc=!1;function Ws(s,l,f){if(Fc)return s(l,f);Fc=!0;try{var g=s(l);return g}finally{if(Fc=!1,(Xs!==null||wa!==null)&&(Wg(),Xs&&(l=Xs,s=wa,wa=Xs=null,pl(l),s)))for(l=0;l<s.length;l++)pl(s[l])}}function Yi(s,l){var f=s.stateNode;if(f===null)return null;var g=f[tr]||null;if(g===null)return null;f=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gl=!1;if(bi)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){gl=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch{gl=!1}var Ea=null,nf=null,ml=null;function rf(){if(ml)return ml;var s,l=nf,f=l.length,g,x="value"in Ea?Ea.value:Ea.textContent,w=x.length;for(s=0;s<f&&l[s]===x[s];s++);var N=f-s;for(g=1;g<=N&&l[f-g]===x[w-g];g++);return ml=x.slice(s,1<g?1-g:void 0)}function vl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function ns(){return!0}function Ki(){return!1}function lr(s){function l(f,g,x,w,N){this._reactName=f,this._targetInst=x,this.type=g,this.nativeEvent=w,this.target=N,this.currentTarget=null;for(var F in s)s.hasOwnProperty(F)&&(f=s[F],this[F]=f?f(w):w[F]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ns:Ki,this.isPropagationStopped=Ki,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=ns)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=ns)},persist:function(){},isPersistent:ns}),l}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sa=lr(rs),Qs=p({},rs,{view:0,detail:0}),af=lr(Qs),Zs,Gc,Ta,qc=p({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Js,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ta&&(Ta&&s.type==="mousemove"?(Zs=s.screenX-Ta.screenX,Gc=s.screenY-Ta.screenY):Gc=Zs=0,Ta=s),Zs)},movementY:function(s){return"movementY"in s?s.movementY:Gc}}),sf=lr(qc),yl=p({},qc,{dataTransfer:0}),ig=lr(yl),ag=p({},Qs,{relatedTarget:0}),bl=lr(ag),of=p({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),sg=lr(of),Hc=p({},rs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),og=lr(Hc),lg=p({},rs,{data:0}),Aa=lr(lg),cg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ug={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fg(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=dg[s])?!!l[s]:!1}function Js(){return fg}var Rr=p({},Qs,{key:function(s){if(s.key){var l=cg[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=vl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ug[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Js,charCode:function(s){return s.type==="keypress"?vl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?vl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),hg=lr(Rr),pg=p({},qc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),is=lr(pg),v=p({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Js}),R=lr(v),V=p({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),q=lr(V),oe=p({},qc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),fe=lr(oe),Re=p({},rs,{newState:0,oldState:0}),ct=lr(Re),Tn=[9,13,27,32],kt=bi&&"CompositionEvent"in window,an=null;bi&&"documentMode"in document&&(an=document.documentMode);var xi=bi&&"TextEvent"in window&&!an,Ca=bi&&(!kt||an&&8<an&&11>=an),Xi=" ",Wi=!1;function xl(s,l){switch(s){case"keyup":return Tn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $c(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Yc=!1;function vj(s,l){switch(s){case"compositionend":return $c(l);case"keypress":return l.which!==32?null:(Wi=!0,Xi);case"textInput":return s=l.data,s===Xi&&Wi?null:s;default:return null}}function yj(s,l){if(Yc)return s==="compositionend"||!kt&&xl(s,l)?(s=rf(),ml=nf=Ea=null,Yc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Ca&&l.locale!=="ko"?null:l.data;default:return null}}var bj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NS(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!bj[s.type]:l==="textarea"}function MS(s,l,f,g){Xs?wa?wa.push(g):wa=[g]:Xs=g,l=rm(l,"onChange"),0<l.length&&(f=new Sa("onChange","change",null,f,g),s.push({event:f,listeners:l}))}var lf=null,cf=null;function xj(s){gC(s,0)}function gg(s){var l=ni(s);if(fl(l))return s}function PS(s,l){if(s==="change")return l}var OS=!1;if(bi){var py;if(bi){var gy="oninput"in document;if(!gy){var VS=document.createElement("div");VS.setAttribute("oninput","return;"),gy=typeof VS.oninput=="function"}py=gy}else py=!1;OS=py&&(!document.documentMode||9<document.documentMode)}function jS(){lf&&(lf.detachEvent("onpropertychange",zS),cf=lf=null)}function zS(s){if(s.propertyName==="value"&&gg(cf)){var l=[];MS(l,cf,s,yi(s)),Ws(xj,l)}}function _j(s,l,f){s==="focusin"?(jS(),lf=l,cf=f,lf.attachEvent("onpropertychange",zS)):s==="focusout"&&jS()}function wj(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return gg(cf)}function Ej(s,l){if(s==="click")return gg(l)}function Sj(s,l){if(s==="input"||s==="change")return gg(l)}function Tj(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ii=typeof Object.is=="function"?Object.is:Tj;function uf(s,l){if(ii(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),g=Object.keys(l);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var x=f[g];if(!Ve.call(l,x)||!ii(s[x],l[x]))return!1}return!0}function LS(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function BS(s,l){var f=LS(s);s=0;for(var g;f;){if(f.nodeType===3){if(g=s+f.textContent.length,s<=l&&g>=l)return{node:f,offset:l-s};s=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=LS(f)}}function US(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?US(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function FS(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=_a(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=_a(s.document)}return l}function my(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var Aj=bi&&"documentMode"in document&&11>=document.documentMode,Kc=null,vy=null,df=null,yy=!1;function GS(s,l,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;yy||Kc==null||Kc!==_a(g)||(g=Kc,"selectionStart"in g&&my(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),df&&uf(df,g)||(df=g,g=rm(vy,"onSelect"),0<g.length&&(l=new Sa("onSelect","select",null,l,f),s.push({event:l,listeners:g}),l.target=Kc)))}function _l(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var Xc={animationend:_l("Animation","AnimationEnd"),animationiteration:_l("Animation","AnimationIteration"),animationstart:_l("Animation","AnimationStart"),transitionrun:_l("Transition","TransitionRun"),transitionstart:_l("Transition","TransitionStart"),transitioncancel:_l("Transition","TransitionCancel"),transitionend:_l("Transition","TransitionEnd")},by={},qS={};bi&&(qS=document.createElement("div").style,"AnimationEvent"in window||(delete Xc.animationend.animation,delete Xc.animationiteration.animation,delete Xc.animationstart.animation),"TransitionEvent"in window||delete Xc.transitionend.transition);function wl(s){if(by[s])return by[s];if(!Xc[s])return s;var l=Xc[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in qS)return by[s]=l[f];return s}var HS=wl("animationend"),$S=wl("animationiteration"),YS=wl("animationstart"),Cj=wl("transitionrun"),Ij=wl("transitionstart"),Rj=wl("transitioncancel"),KS=wl("transitionend"),XS=new Map,xy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xy.push("scrollEnd");function Qi(s,l){XS.set(s,l),ba(l,[s])}var mg=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},_i=[],Wc=0,_y=0;function vg(){for(var s=Wc,l=_y=Wc=0;l<s;){var f=_i[l];_i[l++]=null;var g=_i[l];_i[l++]=null;var x=_i[l];_i[l++]=null;var w=_i[l];if(_i[l++]=null,g!==null&&x!==null){var N=g.pending;N===null?x.next=x:(x.next=N.next,N.next=x),g.pending=x}w!==0&&WS(f,x,w)}}function yg(s,l,f,g){_i[Wc++]=s,_i[Wc++]=l,_i[Wc++]=f,_i[Wc++]=g,_y|=g,s.lanes|=g,s=s.alternate,s!==null&&(s.lanes|=g)}function wy(s,l,f,g){return yg(s,l,f,g),bg(s)}function El(s,l){return yg(s,null,null,l),bg(s)}function WS(s,l,f){s.lanes|=f;var g=s.alternate;g!==null&&(g.lanes|=f);for(var x=!1,w=s.return;w!==null;)w.childLanes|=f,g=w.alternate,g!==null&&(g.childLanes|=f),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(x=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,x&&l!==null&&(x=31-Dt(f),s=w.hiddenUpdates,g=s[x],g===null?s[x]=[l]:g.push(l),l.lane=f|536870912),w):null}function bg(s){if(50<Mf)throw Mf=0,kb=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Qc={};function Dj(s,l,f,g){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(s,l,f,g){return new Dj(s,l,f,g)}function Ey(s){return s=s.prototype,!(!s||!s.isReactComponent)}function as(s,l){var f=s.alternate;return f===null?(f=ai(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function QS(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function xg(s,l,f,g,x,w){var N=0;if(g=s,typeof s=="function")Ey(s)&&(N=1);else if(typeof s=="string")N=O5(s,f,se.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case k:return s=ai(31,f,l,x),s.elementType=k,s.lanes=w,s;case E:return Sl(f.children,x,w,l);case S:N=8,x|=24;break;case T:return s=ai(12,f,l,x|2),s.elementType=T,s.lanes=w,s;case z:return s=ai(13,f,l,x),s.elementType=z,s.lanes=w,s;case j:return s=ai(19,f,l,x),s.elementType=j,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case D:N=10;break e;case I:N=9;break e;case O:N=11;break e;case C:N=14;break e;case A:N=16,g=null;break e}N=29,f=Error(r(130,s===null?"null":typeof s,"")),g=null}return l=ai(N,f,l,x),l.elementType=s,l.type=g,l.lanes=w,l}function Sl(s,l,f,g){return s=ai(7,s,g,l),s.lanes=f,s}function Sy(s,l,f){return s=ai(6,s,null,l),s.lanes=f,s}function ZS(s){var l=ai(18,null,null,0);return l.stateNode=s,l}function Ty(s,l,f){return l=ai(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var JS=new WeakMap;function wi(s,l){if(typeof s=="object"&&s!==null){var f=JS.get(s);return f!==void 0?f:(l={value:s,source:l,stack:pt(l)},JS.set(s,l),l)}return{value:s,source:l,stack:pt(l)}}var Zc=[],Jc=0,_g=null,ff=0,Ei=[],Si=0,eo=null,Ia=1,Ra="";function ss(s,l){Zc[Jc++]=ff,Zc[Jc++]=_g,_g=s,ff=l}function eT(s,l,f){Ei[Si++]=Ia,Ei[Si++]=Ra,Ei[Si++]=eo,eo=s;var g=Ia;s=Ra;var x=32-Dt(g)-1;g&=~(1<<x),f+=1;var w=32-Dt(l)+x;if(30<w){var N=x-x%5;w=(g&(1<<N)-1).toString(32),g>>=N,x-=N,Ia=1<<32-Dt(l)+x|f<<x|g,Ra=w+s}else Ia=1<<w|f<<x|g,Ra=s}function Ay(s){s.return!==null&&(ss(s,1),eT(s,1,0))}function Cy(s){for(;s===_g;)_g=Zc[--Jc],Zc[Jc]=null,ff=Zc[--Jc],Zc[Jc]=null;for(;s===eo;)eo=Ei[--Si],Ei[Si]=null,Ra=Ei[--Si],Ei[Si]=null,Ia=Ei[--Si],Ei[Si]=null}function tT(s,l){Ei[Si++]=Ia,Ei[Si++]=Ra,Ei[Si++]=eo,Ia=l.id,Ra=l.overflow,eo=s}var cr=null,en=null,Et=!1,to=null,Ti=!1,Iy=Error(r(519));function no(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hf(wi(l,s)),Iy}function nT(s){var l=s.stateNode,f=s.type,g=s.memoizedProps;switch(l[kn]=s,l[tr]=g,f){case"dialog":yt("cancel",l),yt("close",l);break;case"iframe":case"object":case"embed":yt("load",l);break;case"video":case"audio":for(f=0;f<Of.length;f++)yt(Of[f],l);break;case"source":yt("error",l);break;case"img":case"image":case"link":yt("error",l),yt("load",l);break;case"details":yt("toggle",l);break;case"input":yt("invalid",l),eg(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":yt("invalid",l);break;case"textarea":yt("invalid",l),Ys(l,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||g.suppressHydrationWarning===!0||bC(l.textContent,f)?(g.popover!=null&&(yt("beforetoggle",l),yt("toggle",l)),g.onScroll!=null&&yt("scroll",l),g.onScrollEnd!=null&&yt("scrollend",l),g.onClick!=null&&(l.onclick=$i),l=!0):l=!1,l||no(s,!0)}function rT(s){for(cr=s.return;cr;)switch(cr.tag){case 5:case 31:case 13:Ti=!1;return;case 27:case 3:Ti=!0;return;default:cr=cr.return}}function eu(s){if(s!==cr)return!1;if(!Et)return rT(s),Et=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||$b(s.type,s.memoizedProps)),f=!f),f&&en&&no(s),rT(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));en=IC(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));en=IC(s)}else l===27?(l=en,vo(s.type)?(s=Qb,Qb=null,en=s):en=l):en=cr?Ci(s.stateNode.nextSibling):null;return!0}function Tl(){en=cr=null,Et=!1}function Ry(){var s=to;return s!==null&&(Hr===null?Hr=s:Hr.push.apply(Hr,s),to=null),s}function hf(s){to===null?to=[s]:to.push(s)}var Dy=U(null),Al=null,os=null;function ro(s,l,f){te(Dy,l._currentValue),l._currentValue=f}function ls(s){s._currentValue=Dy.current,Y(Dy)}function ky(s,l,f){for(;s!==null;){var g=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),s===f)break;s=s.return}}function Ny(s,l,f,g){var x=s.child;for(x!==null&&(x.return=s);x!==null;){var w=x.dependencies;if(w!==null){var N=x.child;w=w.firstContext;e:for(;w!==null;){var F=w;w=x;for(var K=0;K<l.length;K++)if(F.context===l[K]){w.lanes|=f,F=w.alternate,F!==null&&(F.lanes|=f),ky(w.return,f,s),g||(N=null);break e}w=F.next}}else if(x.tag===18){if(N=x.return,N===null)throw Error(r(341));N.lanes|=f,w=N.alternate,w!==null&&(w.lanes|=f),ky(N,f,s),N=null}else N=x.child;if(N!==null)N.return=x;else for(N=x;N!==null;){if(N===s){N=null;break}if(x=N.sibling,x!==null){x.return=N.return,N=x;break}N=N.return}x=N}}function tu(s,l,f,g){s=null;for(var x=l,w=!1;x!==null;){if(!w){if((x.flags&524288)!==0)w=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var N=x.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var F=x.type;ii(x.pendingProps.value,N.value)||(s!==null?s.push(F):s=[F])}}else if(x===ve.current){if(N=x.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(s!==null?s.push(Bf):s=[Bf])}x=x.return}s!==null&&Ny(l,s,f,g),l.flags|=262144}function wg(s){for(s=s.firstContext;s!==null;){if(!ii(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Cl(s){Al=s,os=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ur(s){return iT(Al,s)}function Eg(s,l){return Al===null&&Cl(s),iT(s,l)}function iT(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},os===null){if(s===null)throw Error(r(308));os=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else os=os.next=l;return f}var kj=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,g){s.push(g)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},Nj=n.unstable_scheduleCallback,Mj=n.unstable_NormalPriority,Pn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function My(){return{controller:new kj,data:new Map,refCount:0}}function pf(s){s.refCount--,s.refCount===0&&Nj(Mj,function(){s.controller.abort()})}var gf=null,Py=0,nu=0,ru=null;function Pj(s,l){if(gf===null){var f=gf=[];Py=0,nu=jb(),ru={status:"pending",value:void 0,then:function(g){f.push(g)}}}return Py++,l.then(aT,aT),l}function aT(){if(--Py===0&&gf!==null){ru!==null&&(ru.status="fulfilled");var s=gf;gf=null,nu=0,ru=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function Oj(s,l){var f=[],g={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return s.then(function(){g.status="fulfilled",g.value=l;for(var x=0;x<f.length;x++)(0,f[x])(l)},function(x){for(g.status="rejected",g.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),g}var sT=$.S;$.S=function(s,l){GA=mt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Pj(s,l),sT!==null&&sT(s,l)};var Il=U(null);function Oy(){var s=Il.current;return s!==null?s:Qt.pooledCache}function Sg(s,l){l===null?te(Il,Il.current):te(Il,l.pool)}function oT(){var s=Oy();return s===null?null:{parent:Pn._currentValue,pool:s}}var iu=Error(r(460)),Vy=Error(r(474)),Tg=Error(r(542)),Ag={then:function(){}};function lT(s){return s=s.status,s==="fulfilled"||s==="rejected"}function cT(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then($i,$i),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,dT(s),s;default:if(typeof l.status=="string")l.then($i,$i);else{if(s=Qt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(g){if(l.status==="pending"){var x=l;x.status="fulfilled",x.value=g}},function(g){if(l.status==="pending"){var x=l;x.status="rejected",x.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,dT(s),s}throw Dl=l,iu}}function Rl(s){try{var l=s._init;return l(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Dl=f,iu):f}}var Dl=null;function uT(){if(Dl===null)throw Error(r(459));var s=Dl;return Dl=null,s}function dT(s){if(s===iu||s===Tg)throw Error(r(483))}var au=null,mf=0;function Cg(s){var l=mf;return mf+=1,au===null&&(au=[]),cT(au,s,l)}function vf(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Ig(s,l){throw l.$$typeof===m?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function fT(s){function l(re,J){if(s){var le=re.deletions;le===null?(re.deletions=[J],re.flags|=16):le.push(J)}}function f(re,J){if(!s)return null;for(;J!==null;)l(re,J),J=J.sibling;return null}function g(re){for(var J=new Map;re!==null;)re.key!==null?J.set(re.key,re):J.set(re.index,re),re=re.sibling;return J}function x(re,J){return re=as(re,J),re.index=0,re.sibling=null,re}function w(re,J,le){return re.index=le,s?(le=re.alternate,le!==null?(le=le.index,le<J?(re.flags|=67108866,J):le):(re.flags|=67108866,J)):(re.flags|=1048576,J)}function N(re){return s&&re.alternate===null&&(re.flags|=67108866),re}function F(re,J,le,ye){return J===null||J.tag!==6?(J=Sy(le,re.mode,ye),J.return=re,J):(J=x(J,le),J.return=re,J)}function K(re,J,le,ye){var qe=le.type;return qe===E?me(re,J,le.props.children,ye,le.key):J!==null&&(J.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===A&&Rl(qe)===J.type)?(J=x(J,le.props),vf(J,le),J.return=re,J):(J=xg(le.type,le.key,le.props,null,re.mode,ye),vf(J,le),J.return=re,J)}function ce(re,J,le,ye){return J===null||J.tag!==4||J.stateNode.containerInfo!==le.containerInfo||J.stateNode.implementation!==le.implementation?(J=Ty(le,re.mode,ye),J.return=re,J):(J=x(J,le.children||[]),J.return=re,J)}function me(re,J,le,ye,qe){return J===null||J.tag!==7?(J=Sl(le,re.mode,ye,qe),J.return=re,J):(J=x(J,le),J.return=re,J)}function be(re,J,le){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Sy(""+J,re.mode,le),J.return=re,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return le=xg(J.type,J.key,J.props,null,re.mode,le),vf(le,J),le.return=re,le;case _:return J=Ty(J,re.mode,le),J.return=re,J;case A:return J=Rl(J),be(re,J,le)}if(Q(J)||B(J))return J=Sl(J,re.mode,le,null),J.return=re,J;if(typeof J.then=="function")return be(re,Cg(J),le);if(J.$$typeof===D)return be(re,Eg(re,J),le);Ig(re,J)}return null}function ue(re,J,le,ye){var qe=J!==null?J.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return qe!==null?null:F(re,J,""+le,ye);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case b:return le.key===qe?K(re,J,le,ye):null;case _:return le.key===qe?ce(re,J,le,ye):null;case A:return le=Rl(le),ue(re,J,le,ye)}if(Q(le)||B(le))return qe!==null?null:me(re,J,le,ye,null);if(typeof le.then=="function")return ue(re,J,Cg(le),ye);if(le.$$typeof===D)return ue(re,J,Eg(re,le),ye);Ig(re,le)}return null}function he(re,J,le,ye,qe){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return re=re.get(le)||null,F(J,re,""+ye,qe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return re=re.get(ye.key===null?le:ye.key)||null,K(J,re,ye,qe);case _:return re=re.get(ye.key===null?le:ye.key)||null,ce(J,re,ye,qe);case A:return ye=Rl(ye),he(re,J,le,ye,qe)}if(Q(ye)||B(ye))return re=re.get(le)||null,me(J,re,ye,qe,null);if(typeof ye.then=="function")return he(re,J,le,Cg(ye),qe);if(ye.$$typeof===D)return he(re,J,le,Eg(J,ye),qe);Ig(J,ye)}return null}function Me(re,J,le,ye){for(var qe=null,It=null,ze=J,ft=J=0,xt=null;ze!==null&&ft<le.length;ft++){ze.index>ft?(xt=ze,ze=null):xt=ze.sibling;var Rt=ue(re,ze,le[ft],ye);if(Rt===null){ze===null&&(ze=xt);break}s&&ze&&Rt.alternate===null&&l(re,ze),J=w(Rt,J,ft),It===null?qe=Rt:It.sibling=Rt,It=Rt,ze=xt}if(ft===le.length)return f(re,ze),Et&&ss(re,ft),qe;if(ze===null){for(;ft<le.length;ft++)ze=be(re,le[ft],ye),ze!==null&&(J=w(ze,J,ft),It===null?qe=ze:It.sibling=ze,It=ze);return Et&&ss(re,ft),qe}for(ze=g(ze);ft<le.length;ft++)xt=he(ze,re,ft,le[ft],ye),xt!==null&&(s&&xt.alternate!==null&&ze.delete(xt.key===null?ft:xt.key),J=w(xt,J,ft),It===null?qe=xt:It.sibling=xt,It=xt);return s&&ze.forEach(function(wo){return l(re,wo)}),Et&&ss(re,ft),qe}function We(re,J,le,ye){if(le==null)throw Error(r(151));for(var qe=null,It=null,ze=J,ft=J=0,xt=null,Rt=le.next();ze!==null&&!Rt.done;ft++,Rt=le.next()){ze.index>ft?(xt=ze,ze=null):xt=ze.sibling;var wo=ue(re,ze,Rt.value,ye);if(wo===null){ze===null&&(ze=xt);break}s&&ze&&wo.alternate===null&&l(re,ze),J=w(wo,J,ft),It===null?qe=wo:It.sibling=wo,It=wo,ze=xt}if(Rt.done)return f(re,ze),Et&&ss(re,ft),qe;if(ze===null){for(;!Rt.done;ft++,Rt=le.next())Rt=be(re,Rt.value,ye),Rt!==null&&(J=w(Rt,J,ft),It===null?qe=Rt:It.sibling=Rt,It=Rt);return Et&&ss(re,ft),qe}for(ze=g(ze);!Rt.done;ft++,Rt=le.next())Rt=he(ze,re,ft,Rt.value,ye),Rt!==null&&(s&&Rt.alternate!==null&&ze.delete(Rt.key===null?ft:Rt.key),J=w(Rt,J,ft),It===null?qe=Rt:It.sibling=Rt,It=Rt);return s&&ze.forEach(function($5){return l(re,$5)}),Et&&ss(re,ft),qe}function Kt(re,J,le,ye){if(typeof le=="object"&&le!==null&&le.type===E&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case b:e:{for(var qe=le.key;J!==null;){if(J.key===qe){if(qe=le.type,qe===E){if(J.tag===7){f(re,J.sibling),ye=x(J,le.props.children),ye.return=re,re=ye;break e}}else if(J.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===A&&Rl(qe)===J.type){f(re,J.sibling),ye=x(J,le.props),vf(ye,le),ye.return=re,re=ye;break e}f(re,J);break}else l(re,J);J=J.sibling}le.type===E?(ye=Sl(le.props.children,re.mode,ye,le.key),ye.return=re,re=ye):(ye=xg(le.type,le.key,le.props,null,re.mode,ye),vf(ye,le),ye.return=re,re=ye)}return N(re);case _:e:{for(qe=le.key;J!==null;){if(J.key===qe)if(J.tag===4&&J.stateNode.containerInfo===le.containerInfo&&J.stateNode.implementation===le.implementation){f(re,J.sibling),ye=x(J,le.children||[]),ye.return=re,re=ye;break e}else{f(re,J);break}else l(re,J);J=J.sibling}ye=Ty(le,re.mode,ye),ye.return=re,re=ye}return N(re);case A:return le=Rl(le),Kt(re,J,le,ye)}if(Q(le))return Me(re,J,le,ye);if(B(le)){if(qe=B(le),typeof qe!="function")throw Error(r(150));return le=qe.call(le),We(re,J,le,ye)}if(typeof le.then=="function")return Kt(re,J,Cg(le),ye);if(le.$$typeof===D)return Kt(re,J,Eg(re,le),ye);Ig(re,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,J!==null&&J.tag===6?(f(re,J.sibling),ye=x(J,le),ye.return=re,re=ye):(f(re,J),ye=Sy(le,re.mode,ye),ye.return=re,re=ye),N(re)):f(re,J)}return function(re,J,le,ye){try{mf=0;var qe=Kt(re,J,le,ye);return au=null,qe}catch(ze){if(ze===iu||ze===Tg)throw ze;var It=ai(29,ze,null,re.mode);return It.lanes=ye,It.return=re,It}finally{}}}var kl=fT(!0),hT=fT(!1),io=!1;function jy(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zy(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ao(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function so(s,l,f){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(Nt&2)!==0){var x=g.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),g.pending=l,l=bg(s),WS(s,null,f),l}return yg(s,g,l,f),bg(s)}function yf(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var g=l.lanes;g&=s.pendingLanes,f|=g,l.lanes=f,qd(s,f)}}function Ly(s,l){var f=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var x=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var N={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?x=w=N:w=w.next=N,f=f.next}while(f!==null);w===null?x=w=l:w=w.next=l}else x=w=l;f={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:w,shared:g.shared,callbacks:g.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var By=!1;function bf(){if(By){var s=ru;if(s!==null)throw s}}function xf(s,l,f,g){By=!1;var x=s.updateQueue;io=!1;var w=x.firstBaseUpdate,N=x.lastBaseUpdate,F=x.shared.pending;if(F!==null){x.shared.pending=null;var K=F,ce=K.next;K.next=null,N===null?w=ce:N.next=ce,N=K;var me=s.alternate;me!==null&&(me=me.updateQueue,F=me.lastBaseUpdate,F!==N&&(F===null?me.firstBaseUpdate=ce:F.next=ce,me.lastBaseUpdate=K))}if(w!==null){var be=x.baseState;N=0,me=ce=K=null,F=w;do{var ue=F.lane&-536870913,he=ue!==F.lane;if(he?(bt&ue)===ue:(g&ue)===ue){ue!==0&&ue===nu&&(By=!0),me!==null&&(me=me.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var Me=s,We=F;ue=l;var Kt=f;switch(We.tag){case 1:if(Me=We.payload,typeof Me=="function"){be=Me.call(Kt,be,ue);break e}be=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=We.payload,ue=typeof Me=="function"?Me.call(Kt,be,ue):Me,ue==null)break e;be=p({},be,ue);break e;case 2:io=!0}}ue=F.callback,ue!==null&&(s.flags|=64,he&&(s.flags|=8192),he=x.callbacks,he===null?x.callbacks=[ue]:he.push(ue))}else he={lane:ue,tag:F.tag,payload:F.payload,callback:F.callback,next:null},me===null?(ce=me=he,K=be):me=me.next=he,N|=ue;if(F=F.next,F===null){if(F=x.shared.pending,F===null)break;he=F,F=he.next,he.next=null,x.lastBaseUpdate=he,x.shared.pending=null}}while(!0);me===null&&(K=be),x.baseState=K,x.firstBaseUpdate=ce,x.lastBaseUpdate=me,w===null&&(x.shared.lanes=0),fo|=N,s.lanes=N,s.memoizedState=be}}function pT(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function gT(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)pT(f[s],l)}var su=U(null),Rg=U(0);function mT(s,l){s=vs,te(Rg,s),te(su,l),vs=s|l.baseLanes}function Uy(){te(Rg,vs),te(su,su.current)}function Fy(){vs=Rg.current,Y(su),Y(Rg)}var si=U(null),Ai=null;function oo(s){var l=s.alternate;te(An,An.current&1),te(si,s),Ai===null&&(l===null||su.current!==null||l.memoizedState!==null)&&(Ai=s)}function Gy(s){te(An,An.current),te(si,s),Ai===null&&(Ai=s)}function vT(s){s.tag===22?(te(An,An.current),te(si,s),Ai===null&&(Ai=s)):lo()}function lo(){te(An,An.current),te(si,si.current)}function oi(s){Y(si),Ai===s&&(Ai=null),Y(An)}var An=U(0);function Dg(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Xb(f)||Wb(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var cs=0,ut=null,$t=null,On=null,kg=!1,ou=!1,Nl=!1,Ng=0,_f=0,lu=null,Vj=0;function yn(){throw Error(r(321))}function qy(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!ii(s[f],l[f]))return!1;return!0}function Hy(s,l,f,g,x,w){return cs=w,ut=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,$.H=s===null||s.memoizedState===null?eA:sb,Nl=!1,w=f(g,x),Nl=!1,ou&&(w=bT(l,f,g,x)),yT(s),w}function yT(s){$.H=Sf;var l=$t!==null&&$t.next!==null;if(cs=0,On=$t=ut=null,kg=!1,_f=0,lu=null,l)throw Error(r(300));s===null||Vn||(s=s.dependencies,s!==null&&wg(s)&&(Vn=!0))}function bT(s,l,f,g){ut=s;var x=0;do{if(ou&&(lu=null),_f=0,ou=!1,25<=x)throw Error(r(301));if(x+=1,On=$t=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}$.H=tA,w=l(f,g)}while(ou);return w}function jj(){var s=$.H,l=s.useState()[0];return l=typeof l.then=="function"?wf(l):l,s=s.useState()[0],($t!==null?$t.memoizedState:null)!==s&&(ut.flags|=1024),l}function $y(){var s=Ng!==0;return Ng=0,s}function Yy(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function Ky(s){if(kg){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}kg=!1}cs=0,On=$t=ut=null,ou=!1,_f=Ng=0,lu=null}function Dr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?ut.memoizedState=On=s:On=On.next=s,On}function Cn(){if($t===null){var s=ut.alternate;s=s!==null?s.memoizedState:null}else s=$t.next;var l=On===null?ut.memoizedState:On.next;if(l!==null)On=l,$t=s;else{if(s===null)throw ut.alternate===null?Error(r(467)):Error(r(310));$t=s,s={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},On===null?ut.memoizedState=On=s:On=On.next=s}return On}function Mg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wf(s){var l=_f;return _f+=1,lu===null&&(lu=[]),s=cT(lu,s,l),l=ut,(On===null?l.memoizedState:On.next)===null&&(l=l.alternate,$.H=l===null||l.memoizedState===null?eA:sb),s}function Pg(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return wf(s);if(s.$$typeof===D)return ur(s)}throw Error(r(438,String(s)))}function Xy(s){var l=null,f=ut.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var g=ut.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(x){return x.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Mg(),ut.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),g=0;g<s;g++)f[g]=P;return l.index++,f}function us(s,l){return typeof l=="function"?l(s):l}function Og(s){var l=Cn();return Wy(l,$t,s)}function Wy(s,l,f){var g=s.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=f;var x=s.baseQueue,w=g.pending;if(w!==null){if(x!==null){var N=x.next;x.next=w.next,w.next=N}l.baseQueue=x=w,g.pending=null}if(w=s.baseState,x===null)s.memoizedState=w;else{l=x.next;var F=N=null,K=null,ce=l,me=!1;do{var be=ce.lane&-536870913;if(be!==ce.lane?(bt&be)===be:(cs&be)===be){var ue=ce.revertLane;if(ue===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),be===nu&&(me=!0);else if((cs&ue)===ue){ce=ce.next,ue===nu&&(me=!0);continue}else be={lane:0,revertLane:ce.revertLane,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},K===null?(F=K=be,N=w):K=K.next=be,ut.lanes|=ue,fo|=ue;be=ce.action,Nl&&f(w,be),w=ce.hasEagerState?ce.eagerState:f(w,be)}else ue={lane:be,revertLane:ce.revertLane,gesture:ce.gesture,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},K===null?(F=K=ue,N=w):K=K.next=ue,ut.lanes|=be,fo|=be;ce=ce.next}while(ce!==null&&ce!==l);if(K===null?N=w:K.next=F,!ii(w,s.memoizedState)&&(Vn=!0,me&&(f=ru,f!==null)))throw f;s.memoizedState=w,s.baseState=N,s.baseQueue=K,g.lastRenderedState=w}return x===null&&(g.lanes=0),[s.memoizedState,g.dispatch]}function Qy(s){var l=Cn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var g=f.dispatch,x=f.pending,w=l.memoizedState;if(x!==null){f.pending=null;var N=x=x.next;do w=s(w,N.action),N=N.next;while(N!==x);ii(w,l.memoizedState)||(Vn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),f.lastRenderedState=w}return[w,g]}function xT(s,l,f){var g=ut,x=Cn(),w=Et;if(w){if(f===void 0)throw Error(r(407));f=f()}else f=l();var N=!ii(($t||x).memoizedState,f);if(N&&(x.memoizedState=f,Vn=!0),x=x.queue,eb(ET.bind(null,g,x,s),[s]),x.getSnapshot!==l||N||On!==null&&On.memoizedState.tag&1){if(g.flags|=2048,cu(9,{destroy:void 0},wT.bind(null,g,x,f,l),null),Qt===null)throw Error(r(349));w||(cs&127)!==0||_T(g,l,f)}return f}function _T(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=ut.updateQueue,l===null?(l=Mg(),ut.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function wT(s,l,f,g){l.value=f,l.getSnapshot=g,ST(l)&&TT(s)}function ET(s,l,f){return f(function(){ST(l)&&TT(s)})}function ST(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!ii(s,f)}catch{return!0}}function TT(s){var l=El(s,2);l!==null&&$r(l,s,2)}function Zy(s){var l=Dr();if(typeof s=="function"){var f=s;if(s=f(),Nl){Sn(!0);try{f()}finally{Sn(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:s},l}function AT(s,l,f,g){return s.baseState=f,Wy(s,$t,typeof g=="function"?g:us)}function zj(s,l,f,g,x){if(zg(s))throw Error(r(485));if(s=l.action,s!==null){var w={payload:x,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){w.listeners.push(N)}};$.T!==null?f(!0):w.isTransition=!1,g(w),f=l.pending,f===null?(w.next=l.pending=w,CT(l,w)):(w.next=f.next,l.pending=f.next=w)}}function CT(s,l){var f=l.action,g=l.payload,x=s.state;if(l.isTransition){var w=$.T,N={};$.T=N;try{var F=f(x,g),K=$.S;K!==null&&K(N,F),IT(s,l,F)}catch(ce){Jy(s,l,ce)}finally{w!==null&&N.types!==null&&(w.types=N.types),$.T=w}}else try{w=f(x,g),IT(s,l,w)}catch(ce){Jy(s,l,ce)}}function IT(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){RT(s,l,g)},function(g){return Jy(s,l,g)}):RT(s,l,f)}function RT(s,l,f){l.status="fulfilled",l.value=f,DT(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,CT(s,f)))}function Jy(s,l,f){var g=s.pending;if(s.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=f,DT(l),l=l.next;while(l!==g)}s.action=null}function DT(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function kT(s,l){return l}function NT(s,l){if(Et){var f=Qt.formState;if(f!==null){e:{var g=ut;if(Et){if(en){t:{for(var x=en,w=Ti;x.nodeType!==8;){if(!w){x=null;break t}if(x=Ci(x.nextSibling),x===null){x=null;break t}}w=x.data,x=w==="F!"||w==="F"?x:null}if(x){en=Ci(x.nextSibling),g=x.data==="F!";break e}}no(g)}g=!1}g&&(l=f[0])}}return f=Dr(),f.memoizedState=f.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kT,lastRenderedState:l},f.queue=g,f=QT.bind(null,ut,g),g.dispatch=f,g=Zy(!1),w=ab.bind(null,ut,!1,g.queue),g=Dr(),x={state:l,dispatch:null,action:s,pending:null},g.queue=x,f=zj.bind(null,ut,x,w,f),x.dispatch=f,g.memoizedState=s,[l,f,!1]}function MT(s){var l=Cn();return PT(l,$t,s)}function PT(s,l,f){if(l=Wy(s,l,kT)[0],s=Og(us)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=wf(l)}catch(N){throw N===iu?Tg:N}else g=l;l=Cn();var x=l.queue,w=x.dispatch;return f!==l.memoizedState&&(ut.flags|=2048,cu(9,{destroy:void 0},Lj.bind(null,x,f),null)),[g,w,s]}function Lj(s,l){s.action=l}function OT(s){var l=Cn(),f=$t;if(f!==null)return PT(l,f,s);Cn(),l=l.memoizedState,f=Cn();var g=f.queue.dispatch;return f.memoizedState=s,[l,g,!1]}function cu(s,l,f,g){return s={tag:s,create:f,deps:g,inst:l,next:null},l=ut.updateQueue,l===null&&(l=Mg(),ut.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(g=f.next,f.next=s,s.next=g,l.lastEffect=s),s}function VT(){return Cn().memoizedState}function Vg(s,l,f,g){var x=Dr();ut.flags|=s,x.memoizedState=cu(1|l,{destroy:void 0},f,g===void 0?null:g)}function jg(s,l,f,g){var x=Cn();g=g===void 0?null:g;var w=x.memoizedState.inst;$t!==null&&g!==null&&qy(g,$t.memoizedState.deps)?x.memoizedState=cu(l,w,f,g):(ut.flags|=s,x.memoizedState=cu(1|l,w,f,g))}function jT(s,l){Vg(8390656,8,s,l)}function eb(s,l){jg(2048,8,s,l)}function Bj(s){ut.flags|=4;var l=ut.updateQueue;if(l===null)l=Mg(),ut.updateQueue=l,l.events=[s];else{var f=l.events;f===null?l.events=[s]:f.push(s)}}function zT(s){var l=Cn().memoizedState;return Bj({ref:l,nextImpl:s}),function(){if((Nt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function LT(s,l){return jg(4,2,s,l)}function BT(s,l){return jg(4,4,s,l)}function UT(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function FT(s,l,f){f=f!=null?f.concat([s]):null,jg(4,4,UT.bind(null,l,s),f)}function tb(){}function GT(s,l){var f=Cn();l=l===void 0?null:l;var g=f.memoizedState;return l!==null&&qy(l,g[1])?g[0]:(f.memoizedState=[s,l],s)}function qT(s,l){var f=Cn();l=l===void 0?null:l;var g=f.memoizedState;if(l!==null&&qy(l,g[1]))return g[0];if(g=s(),Nl){Sn(!0);try{s()}finally{Sn(!1)}}return f.memoizedState=[g,l],g}function nb(s,l,f){return f===void 0||(cs&1073741824)!==0&&(bt&261930)===0?s.memoizedState=l:(s.memoizedState=f,s=HA(),ut.lanes|=s,fo|=s,f)}function HT(s,l,f,g){return ii(f,l)?f:su.current!==null?(s=nb(s,f,g),ii(s,l)||(Vn=!0),s):(cs&42)===0||(cs&1073741824)!==0&&(bt&261930)===0?(Vn=!0,s.memoizedState=f):(s=HA(),ut.lanes|=s,fo|=s,l)}function $T(s,l,f,g,x){var w=H.p;H.p=w!==0&&8>w?w:8;var N=$.T,F={};$.T=F,ab(s,!1,l,f);try{var K=x(),ce=$.S;if(ce!==null&&ce(F,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var me=Oj(K,g);Ef(s,l,me,ui(s))}else Ef(s,l,g,ui(s))}catch(be){Ef(s,l,{then:function(){},status:"rejected",reason:be},ui())}finally{H.p=w,N!==null&&F.types!==null&&(N.types=F.types),$.T=N}}function Uj(){}function rb(s,l,f,g){if(s.tag!==5)throw Error(r(476));var x=YT(s).queue;$T(s,x,l,ee,f===null?Uj:function(){return KT(s),f(g)})}function YT(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:ee},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function KT(s){var l=YT(s);l.next===null&&(l=s.alternate.memoizedState),Ef(s,l.next.queue,{},ui())}function ib(){return ur(Bf)}function XT(){return Cn().memoizedState}function WT(){return Cn().memoizedState}function Fj(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=ui();s=ao(f);var g=so(l,s,f);g!==null&&($r(g,l,f),yf(g,l,f)),l={cache:My()},s.payload=l;return}l=l.return}}function Gj(s,l,f){var g=ui();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},zg(s)?ZT(l,f):(f=wy(s,l,f,g),f!==null&&($r(f,s,g),JT(f,l,g)))}function QT(s,l,f){var g=ui();Ef(s,l,f,g)}function Ef(s,l,f,g){var x={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(zg(s))ZT(l,x);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var N=l.lastRenderedState,F=w(N,f);if(x.hasEagerState=!0,x.eagerState=F,ii(F,N))return yg(s,l,x,0),Qt===null&&vg(),!1}catch{}finally{}if(f=wy(s,l,x,g),f!==null)return $r(f,s,g),JT(f,l,g),!0}return!1}function ab(s,l,f,g){if(g={lane:2,revertLane:jb(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},zg(s)){if(l)throw Error(r(479))}else l=wy(s,f,g,2),l!==null&&$r(l,s,2)}function zg(s){var l=s.alternate;return s===ut||l!==null&&l===ut}function ZT(s,l){ou=kg=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function JT(s,l,f){if((f&4194048)!==0){var g=l.lanes;g&=s.pendingLanes,f|=g,l.lanes=f,qd(s,f)}}var Sf={readContext:ur,use:Pg,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn,useHostTransitionStatus:yn,useFormState:yn,useActionState:yn,useOptimistic:yn,useMemoCache:yn,useCacheRefresh:yn};Sf.useEffectEvent=yn;var eA={readContext:ur,use:Pg,useCallback:function(s,l){return Dr().memoizedState=[s,l===void 0?null:l],s},useContext:ur,useEffect:jT,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Vg(4194308,4,UT.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Vg(4194308,4,s,l)},useInsertionEffect:function(s,l){Vg(4,2,s,l)},useMemo:function(s,l){var f=Dr();l=l===void 0?null:l;var g=s();if(Nl){Sn(!0);try{s()}finally{Sn(!1)}}return f.memoizedState=[g,l],g},useReducer:function(s,l,f){var g=Dr();if(f!==void 0){var x=f(l);if(Nl){Sn(!0);try{f(l)}finally{Sn(!1)}}}else x=l;return g.memoizedState=g.baseState=x,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:x},g.queue=s,s=s.dispatch=Gj.bind(null,ut,s),[g.memoizedState,s]},useRef:function(s){var l=Dr();return s={current:s},l.memoizedState=s},useState:function(s){s=Zy(s);var l=s.queue,f=QT.bind(null,ut,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:tb,useDeferredValue:function(s,l){var f=Dr();return nb(f,s,l)},useTransition:function(){var s=Zy(!1);return s=$T.bind(null,ut,s.queue,!0,!1),Dr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var g=ut,x=Dr();if(Et){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Qt===null)throw Error(r(349));(bt&127)!==0||_T(g,l,f)}x.memoizedState=f;var w={value:f,getSnapshot:l};return x.queue=w,jT(ET.bind(null,g,w,s),[s]),g.flags|=2048,cu(9,{destroy:void 0},wT.bind(null,g,w,f,l),null),f},useId:function(){var s=Dr(),l=Qt.identifierPrefix;if(Et){var f=Ra,g=Ia;f=(g&~(1<<32-Dt(g)-1)).toString(32)+f,l="_"+l+"R_"+f,f=Ng++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=Vj++,l="_"+l+"r_"+f.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:ib,useFormState:NT,useActionState:NT,useOptimistic:function(s){var l=Dr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=ab.bind(null,ut,!0,f),f.dispatch=l,[s,l]},useMemoCache:Xy,useCacheRefresh:function(){return Dr().memoizedState=Fj.bind(null,ut)},useEffectEvent:function(s){var l=Dr(),f={impl:s};return l.memoizedState=f,function(){if((Nt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},sb={readContext:ur,use:Pg,useCallback:GT,useContext:ur,useEffect:eb,useImperativeHandle:FT,useInsertionEffect:LT,useLayoutEffect:BT,useMemo:qT,useReducer:Og,useRef:VT,useState:function(){return Og(us)},useDebugValue:tb,useDeferredValue:function(s,l){var f=Cn();return HT(f,$t.memoizedState,s,l)},useTransition:function(){var s=Og(us)[0],l=Cn().memoizedState;return[typeof s=="boolean"?s:wf(s),l]},useSyncExternalStore:xT,useId:XT,useHostTransitionStatus:ib,useFormState:MT,useActionState:MT,useOptimistic:function(s,l){var f=Cn();return AT(f,$t,s,l)},useMemoCache:Xy,useCacheRefresh:WT};sb.useEffectEvent=zT;var tA={readContext:ur,use:Pg,useCallback:GT,useContext:ur,useEffect:eb,useImperativeHandle:FT,useInsertionEffect:LT,useLayoutEffect:BT,useMemo:qT,useReducer:Qy,useRef:VT,useState:function(){return Qy(us)},useDebugValue:tb,useDeferredValue:function(s,l){var f=Cn();return $t===null?nb(f,s,l):HT(f,$t.memoizedState,s,l)},useTransition:function(){var s=Qy(us)[0],l=Cn().memoizedState;return[typeof s=="boolean"?s:wf(s),l]},useSyncExternalStore:xT,useId:XT,useHostTransitionStatus:ib,useFormState:OT,useActionState:OT,useOptimistic:function(s,l){var f=Cn();return $t!==null?AT(f,$t,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:Xy,useCacheRefresh:WT};tA.useEffectEvent=zT;function ob(s,l,f,g){l=s.memoizedState,f=f(g,l),f=f==null?l:p({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var lb={enqueueSetState:function(s,l,f){s=s._reactInternals;var g=ui(),x=ao(g);x.payload=l,f!=null&&(x.callback=f),l=so(s,x,g),l!==null&&($r(l,s,g),yf(l,s,g))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var g=ui(),x=ao(g);x.tag=1,x.payload=l,f!=null&&(x.callback=f),l=so(s,x,g),l!==null&&($r(l,s,g),yf(l,s,g))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=ui(),g=ao(f);g.tag=2,l!=null&&(g.callback=l),l=so(s,g,f),l!==null&&($r(l,s,f),yf(l,s,f))}};function nA(s,l,f,g,x,w,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,w,N):l.prototype&&l.prototype.isPureReactComponent?!uf(f,g)||!uf(x,w):!0}function rA(s,l,f,g){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,g),l.state!==s&&lb.enqueueReplaceState(l,l.state,null)}function Ml(s,l){var f=l;if("ref"in l){f={};for(var g in l)g!=="ref"&&(f[g]=l[g])}if(s=s.defaultProps){f===l&&(f=p({},f));for(var x in s)f[x]===void 0&&(f[x]=s[x])}return f}function iA(s){mg(s)}function aA(s){console.error(s)}function sA(s){mg(s)}function Lg(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function oA(s,l,f){try{var g=s.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function cb(s,l,f){return f=ao(f),f.tag=3,f.payload={element:null},f.callback=function(){Lg(s,l)},f}function lA(s){return s=ao(s),s.tag=3,s}function cA(s,l,f,g){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var w=g.value;s.payload=function(){return x(w)},s.callback=function(){oA(l,f,g)}}var N=f.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(s.callback=function(){oA(l,f,g),typeof x!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var F=g.stack;this.componentDidCatch(g.value,{componentStack:F!==null?F:""})})}function qj(s,l,f,g,x){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=f.alternate,l!==null&&tu(l,f,x,!0),f=si.current,f!==null){switch(f.tag){case 31:case 13:return Ai===null?Qg():f.alternate===null&&bn===0&&(bn=3),f.flags&=-257,f.flags|=65536,f.lanes=x,g===Ag?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([g]):l.add(g),Pb(s,g,x)),!1;case 22:return f.flags|=65536,g===Ag?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([g]):f.add(g)),Pb(s,g,x)),!1}throw Error(r(435,f.tag))}return Pb(s,g,x),Qg(),!1}if(Et)return l=si.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=x,g!==Iy&&(s=Error(r(422),{cause:g}),hf(wi(s,f)))):(g!==Iy&&(l=Error(r(423),{cause:g}),hf(wi(l,f))),s=s.current.alternate,s.flags|=65536,x&=-x,s.lanes|=x,g=wi(g,f),x=cb(s.stateNode,g,x),Ly(s,x),bn!==4&&(bn=2)),!1;var w=Error(r(520),{cause:g});if(w=wi(w,f),Nf===null?Nf=[w]:Nf.push(w),bn!==4&&(bn=2),l===null)return!0;g=wi(g,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=x&-x,f.lanes|=s,s=cb(f.stateNode,g,s),Ly(f,s),!1;case 1:if(l=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ho===null||!ho.has(w))))return f.flags|=65536,x&=-x,f.lanes|=x,x=lA(x),cA(x,s,f,g),Ly(f,x),!1}f=f.return}while(f!==null);return!1}var ub=Error(r(461)),Vn=!1;function dr(s,l,f,g){l.child=s===null?hT(l,null,f,g):kl(l,s.child,f,g)}function uA(s,l,f,g,x){f=f.render;var w=l.ref;if("ref"in g){var N={};for(var F in g)F!=="ref"&&(N[F]=g[F])}else N=g;return Cl(l),g=Hy(s,l,f,N,w,x),F=$y(),s!==null&&!Vn?(Yy(s,l,x),ds(s,l,x)):(Et&&F&&Ay(l),l.flags|=1,dr(s,l,g,x),l.child)}function dA(s,l,f,g,x){if(s===null){var w=f.type;return typeof w=="function"&&!Ey(w)&&w.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=w,fA(s,l,w,g,x)):(s=xg(f.type,null,g,l,l.mode,x),s.ref=l.ref,s.return=l,l.child=s)}if(w=s.child,!yb(s,x)){var N=w.memoizedProps;if(f=f.compare,f=f!==null?f:uf,f(N,g)&&s.ref===l.ref)return ds(s,l,x)}return l.flags|=1,s=as(w,g),s.ref=l.ref,s.return=l,l.child=s}function fA(s,l,f,g,x){if(s!==null){var w=s.memoizedProps;if(uf(w,g)&&s.ref===l.ref)if(Vn=!1,l.pendingProps=g=w,yb(s,x))(s.flags&131072)!==0&&(Vn=!0);else return l.lanes=s.lanes,ds(s,l,x)}return db(s,l,f,g,x)}function hA(s,l,f,g){var x=g.children,w=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|f:f,s!==null){for(g=l.child=s.child,x=0;g!==null;)x=x|g.lanes|g.childLanes,g=g.sibling;g=x&~w}else g=0,l.child=null;return pA(s,l,w,f,g)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Sg(l,w!==null?w.cachePool:null),w!==null?mT(l,w):Uy(),vT(l);else return g=l.lanes=536870912,pA(s,l,w!==null?w.baseLanes|f:f,f,g)}else w!==null?(Sg(l,w.cachePool),mT(l,w),lo(),l.memoizedState=null):(s!==null&&Sg(l,null),Uy(),lo());return dr(s,l,x,f),l.child}function Tf(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function pA(s,l,f,g,x){var w=Oy();return w=w===null?null:{parent:Pn._currentValue,pool:w},l.memoizedState={baseLanes:f,cachePool:w},s!==null&&Sg(l,null),Uy(),vT(l),s!==null&&tu(s,l,g,!0),l.childLanes=x,null}function Bg(s,l){return l=Fg({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function gA(s,l,f){return kl(l,s.child,null,f),s=Bg(l,l.pendingProps),s.flags|=2,oi(l),l.memoizedState=null,s}function Hj(s,l,f){var g=l.pendingProps,x=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(Et){if(g.mode==="hidden")return s=Bg(l,g),l.lanes=536870912,Tf(null,s);if(Gy(l),(s=en)?(s=CC(s,Ti),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:eo!==null?{id:Ia,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},f=ZS(s),f.return=l,l.child=f,cr=l,en=null)):s=null,s===null)throw no(l);return l.lanes=536870912,null}return Bg(l,g)}var w=s.memoizedState;if(w!==null){var N=w.dehydrated;if(Gy(l),x)if(l.flags&256)l.flags&=-257,l=gA(s,l,f);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(Vn||tu(s,l,f,!1),x=(f&s.childLanes)!==0,Vn||x){if(g=Qt,g!==null&&(N=Hd(g,f),N!==0&&N!==w.retryLane))throw w.retryLane=N,El(s,N),$r(g,s,N),ub;Qg(),l=gA(s,l,f)}else s=w.treeContext,en=Ci(N.nextSibling),cr=l,Et=!0,to=null,Ti=!1,s!==null&&tT(l,s),l=Bg(l,g),l.flags|=4096;return l}return s=as(s.child,{mode:g.mode,children:g.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Ug(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function db(s,l,f,g,x){return Cl(l),f=Hy(s,l,f,g,void 0,x),g=$y(),s!==null&&!Vn?(Yy(s,l,x),ds(s,l,x)):(Et&&g&&Ay(l),l.flags|=1,dr(s,l,f,x),l.child)}function mA(s,l,f,g,x,w){return Cl(l),l.updateQueue=null,f=bT(l,g,f,x),yT(s),g=$y(),s!==null&&!Vn?(Yy(s,l,w),ds(s,l,w)):(Et&&g&&Ay(l),l.flags|=1,dr(s,l,f,w),l.child)}function vA(s,l,f,g,x){if(Cl(l),l.stateNode===null){var w=Qc,N=f.contextType;typeof N=="object"&&N!==null&&(w=ur(N)),w=new f(g,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=lb,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=g,w.state=l.memoizedState,w.refs={},jy(l),N=f.contextType,w.context=typeof N=="object"&&N!==null?ur(N):Qc,w.state=l.memoizedState,N=f.getDerivedStateFromProps,typeof N=="function"&&(ob(l,f,N,g),w.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(N=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),N!==w.state&&lb.enqueueReplaceState(w,w.state,null),xf(l,g,w,x),bf(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(s===null){w=l.stateNode;var F=l.memoizedProps,K=Ml(f,F);w.props=K;var ce=w.context,me=f.contextType;N=Qc,typeof me=="object"&&me!==null&&(N=ur(me));var be=f.getDerivedStateFromProps;me=typeof be=="function"||typeof w.getSnapshotBeforeUpdate=="function",F=l.pendingProps!==F,me||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(F||ce!==N)&&rA(l,w,g,N),io=!1;var ue=l.memoizedState;w.state=ue,xf(l,g,w,x),bf(),ce=l.memoizedState,F||ue!==ce||io?(typeof be=="function"&&(ob(l,f,be,g),ce=l.memoizedState),(K=io||nA(l,f,K,g,ue,ce,N))?(me||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=ce),w.props=g,w.state=ce,w.context=N,g=K):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{w=l.stateNode,zy(s,l),N=l.memoizedProps,me=Ml(f,N),w.props=me,be=l.pendingProps,ue=w.context,ce=f.contextType,K=Qc,typeof ce=="object"&&ce!==null&&(K=ur(ce)),F=f.getDerivedStateFromProps,(ce=typeof F=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==be||ue!==K)&&rA(l,w,g,K),io=!1,ue=l.memoizedState,w.state=ue,xf(l,g,w,x),bf();var he=l.memoizedState;N!==be||ue!==he||io||s!==null&&s.dependencies!==null&&wg(s.dependencies)?(typeof F=="function"&&(ob(l,f,F,g),he=l.memoizedState),(me=io||nA(l,f,me,g,ue,he,K)||s!==null&&s.dependencies!==null&&wg(s.dependencies))?(ce||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,he,K),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,he,K)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===s.memoizedProps&&ue===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&ue===s.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=he),w.props=g,w.state=he,w.context=K,g=me):(typeof w.componentDidUpdate!="function"||N===s.memoizedProps&&ue===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&ue===s.memoizedState||(l.flags|=1024),g=!1)}return w=g,Ug(s,l),g=(l.flags&128)!==0,w||g?(w=l.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,s!==null&&g?(l.child=kl(l,s.child,null,x),l.child=kl(l,null,f,x)):dr(s,l,f,x),l.memoizedState=w.state,s=l.child):s=ds(s,l,x),s}function yA(s,l,f,g){return Tl(),l.flags|=256,dr(s,l,f,g),l.child}var fb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hb(s){return{baseLanes:s,cachePool:oT()}}function pb(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=ci),s}function bA(s,l,f){var g=l.pendingProps,x=!1,w=(l.flags&128)!==0,N;if((N=w)||(N=s!==null&&s.memoizedState===null?!1:(An.current&2)!==0),N&&(x=!0,l.flags&=-129),N=(l.flags&32)!==0,l.flags&=-33,s===null){if(Et){if(x?oo(l):lo(),(s=en)?(s=CC(s,Ti),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:eo!==null?{id:Ia,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},f=ZS(s),f.return=l,l.child=f,cr=l,en=null)):s=null,s===null)throw no(l);return Wb(s)?l.lanes=32:l.lanes=536870912,null}var F=g.children;return g=g.fallback,x?(lo(),x=l.mode,F=Fg({mode:"hidden",children:F},x),g=Sl(g,x,f,null),F.return=l,g.return=l,F.sibling=g,l.child=F,g=l.child,g.memoizedState=hb(f),g.childLanes=pb(s,N,f),l.memoizedState=fb,Tf(null,g)):(oo(l),gb(l,F))}var K=s.memoizedState;if(K!==null&&(F=K.dehydrated,F!==null)){if(w)l.flags&256?(oo(l),l.flags&=-257,l=mb(s,l,f)):l.memoizedState!==null?(lo(),l.child=s.child,l.flags|=128,l=null):(lo(),F=g.fallback,x=l.mode,g=Fg({mode:"visible",children:g.children},x),F=Sl(F,x,f,null),F.flags|=2,g.return=l,F.return=l,g.sibling=F,l.child=g,kl(l,s.child,null,f),g=l.child,g.memoizedState=hb(f),g.childLanes=pb(s,N,f),l.memoizedState=fb,l=Tf(null,g));else if(oo(l),Wb(F)){if(N=F.nextSibling&&F.nextSibling.dataset,N)var ce=N.dgst;N=ce,g=Error(r(419)),g.stack="",g.digest=N,hf({value:g,source:null,stack:null}),l=mb(s,l,f)}else if(Vn||tu(s,l,f,!1),N=(f&s.childLanes)!==0,Vn||N){if(N=Qt,N!==null&&(g=Hd(N,f),g!==0&&g!==K.retryLane))throw K.retryLane=g,El(s,g),$r(N,s,g),ub;Xb(F)||Qg(),l=mb(s,l,f)}else Xb(F)?(l.flags|=192,l.child=s.child,l=null):(s=K.treeContext,en=Ci(F.nextSibling),cr=l,Et=!0,to=null,Ti=!1,s!==null&&tT(l,s),l=gb(l,g.children),l.flags|=4096);return l}return x?(lo(),F=g.fallback,x=l.mode,K=s.child,ce=K.sibling,g=as(K,{mode:"hidden",children:g.children}),g.subtreeFlags=K.subtreeFlags&65011712,ce!==null?F=as(ce,F):(F=Sl(F,x,f,null),F.flags|=2),F.return=l,g.return=l,g.sibling=F,l.child=g,Tf(null,g),g=l.child,F=s.child.memoizedState,F===null?F=hb(f):(x=F.cachePool,x!==null?(K=Pn._currentValue,x=x.parent!==K?{parent:K,pool:K}:x):x=oT(),F={baseLanes:F.baseLanes|f,cachePool:x}),g.memoizedState=F,g.childLanes=pb(s,N,f),l.memoizedState=fb,Tf(s.child,g)):(oo(l),f=s.child,s=f.sibling,f=as(f,{mode:"visible",children:g.children}),f.return=l,f.sibling=null,s!==null&&(N=l.deletions,N===null?(l.deletions=[s],l.flags|=16):N.push(s)),l.child=f,l.memoizedState=null,f)}function gb(s,l){return l=Fg({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Fg(s,l){return s=ai(22,s,null,l),s.lanes=0,s}function mb(s,l,f){return kl(l,s.child,null,f),s=gb(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function xA(s,l,f){s.lanes|=l;var g=s.alternate;g!==null&&(g.lanes|=l),ky(s.return,l,f)}function vb(s,l,f,g,x,w){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:x,treeForkCount:w}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=g,N.tail=f,N.tailMode=x,N.treeForkCount=w)}function _A(s,l,f){var g=l.pendingProps,x=g.revealOrder,w=g.tail;g=g.children;var N=An.current,F=(N&2)!==0;if(F?(N=N&1|2,l.flags|=128):N&=1,te(An,N),dr(s,l,g,f),g=Et?ff:0,!F&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&xA(s,f,l);else if(s.tag===19)xA(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(x){case"forwards":for(f=l.child,x=null;f!==null;)s=f.alternate,s!==null&&Dg(s)===null&&(x=f),f=f.sibling;f=x,f===null?(x=l.child,l.child=null):(x=f.sibling,f.sibling=null),vb(l,!1,x,f,w,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,x=l.child,l.child=null;x!==null;){if(s=x.alternate,s!==null&&Dg(s)===null){l.child=x;break}s=x.sibling,x.sibling=f,f=x,x=s}vb(l,!0,f,null,w,g);break;case"together":vb(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function ds(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),fo|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(tu(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=as(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=as(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function yb(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&wg(s)))}function $j(s,l,f){switch(l.tag){case 3:Ae(l,l.stateNode.containerInfo),ro(l,Pn,s.memoizedState.cache),Tl();break;case 27:case 5:ke(l);break;case 4:Ae(l,l.stateNode.containerInfo);break;case 10:ro(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Gy(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(oo(l),l.flags|=128,null):(f&l.child.childLanes)!==0?bA(s,l,f):(oo(l),s=ds(s,l,f),s!==null?s.sibling:null);oo(l);break;case 19:var x=(s.flags&128)!==0;if(g=(f&l.childLanes)!==0,g||(tu(s,l,f,!1),g=(f&l.childLanes)!==0),x){if(g)return _A(s,l,f);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),te(An,An.current),g)break;return null;case 22:return l.lanes=0,hA(s,l,f,l.pendingProps);case 24:ro(l,Pn,s.memoizedState.cache)}return ds(s,l,f)}function wA(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)Vn=!0;else{if(!yb(s,f)&&(l.flags&128)===0)return Vn=!1,$j(s,l,f);Vn=(s.flags&131072)!==0}else Vn=!1,Et&&(l.flags&1048576)!==0&&eT(l,ff,l.index);switch(l.lanes=0,l.tag){case 16:e:{var g=l.pendingProps;if(s=Rl(l.elementType),l.type=s,typeof s=="function")Ey(s)?(g=Ml(s,g),l.tag=1,l=vA(null,l,s,g,f)):(l.tag=0,l=db(null,l,s,g,f));else{if(s!=null){var x=s.$$typeof;if(x===O){l.tag=11,l=uA(null,l,s,g,f);break e}else if(x===C){l.tag=14,l=dA(null,l,s,g,f);break e}}throw l=W(s)||s,Error(r(306,l,""))}}return l;case 0:return db(s,l,l.type,l.pendingProps,f);case 1:return g=l.type,x=Ml(g,l.pendingProps),vA(s,l,g,x,f);case 3:e:{if(Ae(l,l.stateNode.containerInfo),s===null)throw Error(r(387));g=l.pendingProps;var w=l.memoizedState;x=w.element,zy(s,l),xf(l,g,null,f);var N=l.memoizedState;if(g=N.cache,ro(l,Pn,g),g!==w.cache&&Ny(l,[Pn],f,!0),bf(),g=N.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:N.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=yA(s,l,g,f);break e}else if(g!==x){x=wi(Error(r(424)),l),hf(x),l=yA(s,l,g,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(en=Ci(s.firstChild),cr=l,Et=!0,to=null,Ti=!0,f=hT(l,null,g,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Tl(),g===x){l=ds(s,l,f);break e}dr(s,l,g,f)}l=l.child}return l;case 26:return Ug(s,l),s===null?(f=MC(l.type,null,l.pendingProps,null))?l.memoizedState=f:Et||(f=l.type,s=l.pendingProps,g=im(ie.current).createElement(f),g[kn]=l,g[tr]=s,fr(g,f,s),Nn(g),l.stateNode=g):l.memoizedState=MC(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return ke(l),s===null&&Et&&(g=l.stateNode=DC(l.type,l.pendingProps,ie.current),cr=l,Ti=!0,x=en,vo(l.type)?(Qb=x,en=Ci(g.firstChild)):en=x),dr(s,l,l.pendingProps.children,f),Ug(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Et&&((x=g=en)&&(g=w5(g,l.type,l.pendingProps,Ti),g!==null?(l.stateNode=g,cr=l,en=Ci(g.firstChild),Ti=!1,x=!0):x=!1),x||no(l)),ke(l),x=l.type,w=l.pendingProps,N=s!==null?s.memoizedProps:null,g=w.children,$b(x,w)?g=null:N!==null&&$b(x,N)&&(l.flags|=32),l.memoizedState!==null&&(x=Hy(s,l,jj,null,null,f),Bf._currentValue=x),Ug(s,l),dr(s,l,g,f),l.child;case 6:return s===null&&Et&&((s=f=en)&&(f=E5(f,l.pendingProps,Ti),f!==null?(l.stateNode=f,cr=l,en=null,s=!0):s=!1),s||no(l)),null;case 13:return bA(s,l,f);case 4:return Ae(l,l.stateNode.containerInfo),g=l.pendingProps,s===null?l.child=kl(l,null,g,f):dr(s,l,g,f),l.child;case 11:return uA(s,l,l.type,l.pendingProps,f);case 7:return dr(s,l,l.pendingProps,f),l.child;case 8:return dr(s,l,l.pendingProps.children,f),l.child;case 12:return dr(s,l,l.pendingProps.children,f),l.child;case 10:return g=l.pendingProps,ro(l,l.type,g.value),dr(s,l,g.children,f),l.child;case 9:return x=l.type._context,g=l.pendingProps.children,Cl(l),x=ur(x),g=g(x),l.flags|=1,dr(s,l,g,f),l.child;case 14:return dA(s,l,l.type,l.pendingProps,f);case 15:return fA(s,l,l.type,l.pendingProps,f);case 19:return _A(s,l,f);case 31:return Hj(s,l,f);case 22:return hA(s,l,f,l.pendingProps);case 24:return Cl(l),g=ur(Pn),s===null?(x=Oy(),x===null&&(x=Qt,w=My(),x.pooledCache=w,w.refCount++,w!==null&&(x.pooledCacheLanes|=f),x=w),l.memoizedState={parent:g,cache:x},jy(l),ro(l,Pn,x)):((s.lanes&f)!==0&&(zy(s,l),xf(l,null,null,f),bf()),x=s.memoizedState,w=l.memoizedState,x.parent!==g?(x={parent:g,cache:g},l.memoizedState=x,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=x),ro(l,Pn,g)):(g=w.cache,ro(l,Pn,g),g!==x.cache&&Ny(l,[Pn],f,!0))),dr(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function fs(s){s.flags|=4}function bb(s,l,f,g,x){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(x&335544128)===x)if(s.stateNode.complete)s.flags|=8192;else if(XA())s.flags|=8192;else throw Dl=Ag,Vy}else s.flags&=-16777217}function EA(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!zC(l))if(XA())s.flags|=8192;else throw Dl=Ag,Vy}function Gg(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?es():536870912,s.lanes|=l,hu|=l)}function Af(s,l){if(!Et)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function tn(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,g=0;if(l)for(var x=s.child;x!==null;)f|=x.lanes|x.childLanes,g|=x.subtreeFlags&65011712,g|=x.flags&65011712,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)f|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=g,s.childLanes=f,l}function Yj(s,l,f){var g=l.pendingProps;switch(Cy(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(l),null;case 1:return tn(l),null;case 3:return f=l.stateNode,g=null,s!==null&&(g=s.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),ls(Pn),Ie(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(eu(l)?fs(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ry())),tn(l),null;case 26:var x=l.type,w=l.memoizedState;return s===null?(fs(l),w!==null?(tn(l),EA(l,w)):(tn(l),bb(l,x,null,g,f))):w?w!==s.memoizedState?(fs(l),tn(l),EA(l,w)):(tn(l),l.flags&=-16777217):(s=s.memoizedProps,s!==g&&fs(l),tn(l),bb(l,x,s,g,f)),null;case 27:if(xe(l),f=ie.current,x=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==g&&fs(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return tn(l),null}s=se.current,eu(l)?nT(l):(s=DC(x,g,f),l.stateNode=s,fs(l))}return tn(l),null;case 5:if(xe(l),x=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==g&&fs(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return tn(l),null}if(w=se.current,eu(l))nT(l);else{var N=im(ie.current);switch(w){case 1:w=N.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:w=N.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":w=N.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":w=N.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":w=N.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof g.is=="string"?N.createElement("select",{is:g.is}):N.createElement("select"),g.multiple?w.multiple=!0:g.size&&(w.size=g.size);break;default:w=typeof g.is=="string"?N.createElement(x,{is:g.is}):N.createElement(x)}}w[kn]=l,w[tr]=g;e:for(N=l.child;N!==null;){if(N.tag===5||N.tag===6)w.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===l)break e;for(;N.sibling===null;){if(N.return===null||N.return===l)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}l.stateNode=w;e:switch(fr(w,x,g),x){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&fs(l)}}return tn(l),bb(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,f),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==g&&fs(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(r(166));if(s=ie.current,eu(l)){if(s=l.stateNode,f=l.memoizedProps,g=null,x=cr,x!==null)switch(x.tag){case 27:case 5:g=x.memoizedProps}s[kn]=l,s=!!(s.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||bC(s.nodeValue,f)),s||no(l,!0)}else s=im(s).createTextNode(g),s[kn]=l,l.stateNode=s}return tn(l),null;case 31:if(f=l.memoizedState,s===null||s.memoizedState!==null){if(g=eu(l),f!==null){if(s===null){if(!g)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[kn]=l}else Tl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;tn(l),s=!1}else f=Ry(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return l.flags&256?(oi(l),l):(oi(l),null);if((l.flags&128)!==0)throw Error(r(558))}return tn(l),null;case 13:if(g=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(x=eu(l),g!==null&&g.dehydrated!==null){if(s===null){if(!x)throw Error(r(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[kn]=l}else Tl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;tn(l),x=!1}else x=Ry(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=x),x=!0;if(!x)return l.flags&256?(oi(l),l):(oi(l),null)}return oi(l),(l.flags&128)!==0?(l.lanes=f,l):(f=g!==null,s=s!==null&&s.memoizedState!==null,f&&(g=l.child,x=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(x=g.alternate.memoizedState.cachePool.pool),w=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(w=g.memoizedState.cachePool.pool),w!==x&&(g.flags|=2048)),f!==s&&f&&(l.child.flags|=8192),Gg(l,l.updateQueue),tn(l),null);case 4:return Ie(),s===null&&Ub(l.stateNode.containerInfo),tn(l),null;case 10:return ls(l.type),tn(l),null;case 19:if(Y(An),g=l.memoizedState,g===null)return tn(l),null;if(x=(l.flags&128)!==0,w=g.rendering,w===null)if(x)Af(g,!1);else{if(bn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(w=Dg(s),w!==null){for(l.flags|=128,Af(g,!1),s=w.updateQueue,l.updateQueue=s,Gg(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)QS(f,s),f=f.sibling;return te(An,An.current&1|2),Et&&ss(l,g.treeForkCount),l.child}s=s.sibling}g.tail!==null&&mt()>Kg&&(l.flags|=128,x=!0,Af(g,!1),l.lanes=4194304)}else{if(!x)if(s=Dg(w),s!==null){if(l.flags|=128,x=!0,s=s.updateQueue,l.updateQueue=s,Gg(l,s),Af(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Et)return tn(l),null}else 2*mt()-g.renderingStartTime>Kg&&f!==536870912&&(l.flags|=128,x=!0,Af(g,!1),l.lanes=4194304);g.isBackwards?(w.sibling=l.child,l.child=w):(s=g.last,s!==null?s.sibling=w:l.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=mt(),s.sibling=null,f=An.current,te(An,x?f&1|2:f&1),Et&&ss(l,g.treeForkCount),s):(tn(l),null);case 22:case 23:return oi(l),Fy(),g=l.memoizedState!==null,s!==null?s.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(f&536870912)!==0&&(l.flags&128)===0&&(tn(l),l.subtreeFlags&6&&(l.flags|=8192)):tn(l),f=l.updateQueue,f!==null&&Gg(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==f&&(l.flags|=2048),s!==null&&Y(Il),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),ls(Pn),tn(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function Kj(s,l){switch(Cy(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return ls(Pn),Ie(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return xe(l),null;case 31:if(l.memoizedState!==null){if(oi(l),l.alternate===null)throw Error(r(340));Tl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(oi(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Tl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Y(An),null;case 4:return Ie(),null;case 10:return ls(l.type),null;case 22:case 23:return oi(l),Fy(),s!==null&&Y(Il),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return ls(Pn),null;case 25:return null;default:return null}}function SA(s,l){switch(Cy(l),l.tag){case 3:ls(Pn),Ie();break;case 26:case 27:case 5:xe(l);break;case 4:Ie();break;case 31:l.memoizedState!==null&&oi(l);break;case 13:oi(l);break;case 19:Y(An);break;case 10:ls(l.type);break;case 22:case 23:oi(l),Fy(),s!==null&&Y(Il);break;case 24:ls(Pn)}}function Cf(s,l){try{var f=l.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var x=g.next;f=x;do{if((f.tag&s)===s){g=void 0;var w=f.create,N=f.inst;g=w(),N.destroy=g}f=f.next}while(f!==x)}}catch(F){Bt(l,l.return,F)}}function co(s,l,f){try{var g=l.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var w=x.next;g=w;do{if((g.tag&s)===s){var N=g.inst,F=N.destroy;if(F!==void 0){N.destroy=void 0,x=l;var K=f,ce=F;try{ce()}catch(me){Bt(x,K,me)}}}g=g.next}while(g!==w)}}catch(me){Bt(l,l.return,me)}}function TA(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{gT(l,f)}catch(g){Bt(s,s.return,g)}}}function AA(s,l,f){f.props=Ml(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(g){Bt(s,l,g)}}function If(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var g=s.stateNode;break;case 30:g=s.stateNode;break;default:g=s.stateNode}typeof f=="function"?s.refCleanup=f(g):f.current=g}}catch(x){Bt(s,l,x)}}function Da(s,l){var f=s.ref,g=s.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(x){Bt(s,l,x)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){Bt(s,l,x)}else f.current=null}function CA(s){var l=s.type,f=s.memoizedProps,g=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(x){Bt(s,s.return,x)}}function xb(s,l,f){try{var g=s.stateNode;m5(g,s.type,f,l),g[tr]=l}catch(x){Bt(s,s.return,x)}}function IA(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&vo(s.type)||s.tag===4}function _b(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||IA(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&vo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function wb(s,l,f){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=$i));else if(g!==4&&(g===27&&vo(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(wb(s,l,f),s=s.sibling;s!==null;)wb(s,l,f),s=s.sibling}function qg(s,l,f){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(g!==4&&(g===27&&vo(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(qg(s,l,f),s=s.sibling;s!==null;)qg(s,l,f),s=s.sibling}function RA(s){var l=s.stateNode,f=s.memoizedProps;try{for(var g=s.type,x=l.attributes;x.length;)l.removeAttributeNode(x[0]);fr(l,g,f),l[kn]=s,l[tr]=f}catch(w){Bt(s,s.return,w)}}var hs=!1,jn=!1,Eb=!1,DA=typeof WeakSet=="function"?WeakSet:Set,rr=null;function Xj(s,l){if(s=s.containerInfo,qb=dm,s=FS(s),my(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var x=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var N=0,F=-1,K=-1,ce=0,me=0,be=s,ue=null;t:for(;;){for(var he;be!==f||x!==0&&be.nodeType!==3||(F=N+x),be!==w||g!==0&&be.nodeType!==3||(K=N+g),be.nodeType===3&&(N+=be.nodeValue.length),(he=be.firstChild)!==null;)ue=be,be=he;for(;;){if(be===s)break t;if(ue===f&&++ce===x&&(F=N),ue===w&&++me===g&&(K=N),(he=be.nextSibling)!==null)break;be=ue,ue=be.parentNode}be=he}f=F===-1||K===-1?null:{start:F,end:K}}else f=null}f=f||{start:0,end:0}}else f=null;for(Hb={focusedElem:s,selectionRange:f},dm=!1,rr=l;rr!==null;)if(l=rr,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,rr=s;else for(;rr!==null;){switch(l=rr,w=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)x=s[f],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,f=l,x=w.memoizedProps,w=w.memoizedState,g=f.stateNode;try{var Me=Ml(f.type,x);s=g.getSnapshotBeforeUpdate(Me,w),g.__reactInternalSnapshotBeforeUpdate=s}catch(We){Bt(f,f.return,We)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)Kb(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Kb(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,rr=s;break}rr=l.return}}function kA(s,l,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:gs(s,f),g&4&&Cf(5,f);break;case 1:if(gs(s,f),g&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(N){Bt(f,f.return,N)}else{var x=Ml(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(x,l,s.__reactInternalSnapshotBeforeUpdate)}catch(N){Bt(f,f.return,N)}}g&64&&TA(f),g&512&&If(f,f.return);break;case 3:if(gs(s,f),g&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{gT(s,l)}catch(N){Bt(f,f.return,N)}}break;case 27:l===null&&g&4&&RA(f);case 26:case 5:gs(s,f),l===null&&g&4&&CA(f),g&512&&If(f,f.return);break;case 12:gs(s,f);break;case 31:gs(s,f),g&4&&PA(s,f);break;case 13:gs(s,f),g&4&&OA(s,f),g&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=i5.bind(null,f),S5(s,f))));break;case 22:if(g=f.memoizedState!==null||hs,!g){l=l!==null&&l.memoizedState!==null||jn,x=hs;var w=jn;hs=g,(jn=l)&&!w?ms(s,f,(f.subtreeFlags&8772)!==0):gs(s,f),hs=x,jn=w}break;case 30:break;default:gs(s,f)}}function NA(s){var l=s.alternate;l!==null&&(s.alternate=null,NA(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&jc(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var sn=null,Fr=!1;function ps(s,l,f){for(f=f.child;f!==null;)MA(s,l,f),f=f.sibling}function MA(s,l,f){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(qt,f)}catch{}switch(f.tag){case 26:jn||Da(f,l),ps(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:jn||Da(f,l);var g=sn,x=Fr;vo(f.type)&&(sn=f.stateNode,Fr=!1),ps(s,l,f),jf(f.stateNode),sn=g,Fr=x;break;case 5:jn||Da(f,l);case 6:if(g=sn,x=Fr,sn=null,ps(s,l,f),sn=g,Fr=x,sn!==null)if(Fr)try{(sn.nodeType===9?sn.body:sn.nodeName==="HTML"?sn.ownerDocument.body:sn).removeChild(f.stateNode)}catch(w){Bt(f,l,w)}else try{sn.removeChild(f.stateNode)}catch(w){Bt(f,l,w)}break;case 18:sn!==null&&(Fr?(s=sn,TC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),_u(s)):TC(sn,f.stateNode));break;case 4:g=sn,x=Fr,sn=f.stateNode.containerInfo,Fr=!0,ps(s,l,f),sn=g,Fr=x;break;case 0:case 11:case 14:case 15:co(2,f,l),jn||co(4,f,l),ps(s,l,f);break;case 1:jn||(Da(f,l),g=f.stateNode,typeof g.componentWillUnmount=="function"&&AA(f,l,g)),ps(s,l,f);break;case 21:ps(s,l,f);break;case 22:jn=(g=jn)||f.memoizedState!==null,ps(s,l,f),jn=g;break;default:ps(s,l,f)}}function PA(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{_u(s)}catch(f){Bt(l,l.return,f)}}}function OA(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{_u(s)}catch(f){Bt(l,l.return,f)}}function Wj(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new DA),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new DA),l;default:throw Error(r(435,s.tag))}}function Hg(s,l){var f=Wj(s);l.forEach(function(g){if(!f.has(g)){f.add(g);var x=a5.bind(null,s,g);g.then(x,x)}})}function Gr(s,l){var f=l.deletions;if(f!==null)for(var g=0;g<f.length;g++){var x=f[g],w=s,N=l,F=N;e:for(;F!==null;){switch(F.tag){case 27:if(vo(F.type)){sn=F.stateNode,Fr=!1;break e}break;case 5:sn=F.stateNode,Fr=!1;break e;case 3:case 4:sn=F.stateNode.containerInfo,Fr=!0;break e}F=F.return}if(sn===null)throw Error(r(160));MA(w,N,x),sn=null,Fr=!1,w=x.alternate,w!==null&&(w.return=null),x.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)VA(l,s),l=l.sibling}var Zi=null;function VA(s,l){var f=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Gr(l,s),qr(s),g&4&&(co(3,s,s.return),Cf(3,s),co(5,s,s.return));break;case 1:Gr(l,s),qr(s),g&512&&(jn||f===null||Da(f,f.return)),g&64&&hs&&(s=s.updateQueue,s!==null&&(g=s.callbacks,g!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var x=Zi;if(Gr(l,s),qr(s),g&512&&(jn||f===null||Da(f,f.return)),g&4){var w=f!==null?f.memoizedState:null;if(g=s.memoizedState,f===null)if(g===null)if(s.stateNode===null){e:{g=s.type,f=s.memoizedProps,x=x.ownerDocument||x;t:switch(g){case"title":w=x.getElementsByTagName("title")[0],(!w||w[ma]||w[kn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=x.createElement(g),x.head.insertBefore(w,x.querySelector("head > title"))),fr(w,g,f),w[kn]=s,Nn(w),g=w;break e;case"link":var N=VC("link","href",x).get(g+(f.href||""));if(N){for(var F=0;F<N.length;F++)if(w=N[F],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){N.splice(F,1);break t}}w=x.createElement(g),fr(w,g,f),x.head.appendChild(w);break;case"meta":if(N=VC("meta","content",x).get(g+(f.content||""))){for(F=0;F<N.length;F++)if(w=N[F],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){N.splice(F,1);break t}}w=x.createElement(g),fr(w,g,f),x.head.appendChild(w);break;default:throw Error(r(468,g))}w[kn]=s,Nn(w),g=w}s.stateNode=g}else jC(x,s.type,s.stateNode);else s.stateNode=OC(x,g,s.memoizedProps);else w!==g?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,g===null?jC(x,s.type,s.stateNode):OC(x,g,s.memoizedProps)):g===null&&s.stateNode!==null&&xb(s,s.memoizedProps,f.memoizedProps)}break;case 27:Gr(l,s),qr(s),g&512&&(jn||f===null||Da(f,f.return)),f!==null&&g&4&&xb(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Gr(l,s),qr(s),g&512&&(jn||f===null||Da(f,f.return)),s.flags&32){x=s.stateNode;try{Ur(x,"")}catch(Me){Bt(s,s.return,Me)}}g&4&&s.stateNode!=null&&(x=s.memoizedProps,xb(s,x,f!==null?f.memoizedProps:x)),g&1024&&(Eb=!0);break;case 6:if(Gr(l,s),qr(s),g&4){if(s.stateNode===null)throw Error(r(162));g=s.memoizedProps,f=s.stateNode;try{f.nodeValue=g}catch(Me){Bt(s,s.return,Me)}}break;case 3:if(om=null,x=Zi,Zi=am(l.containerInfo),Gr(l,s),Zi=x,qr(s),g&4&&f!==null&&f.memoizedState.isDehydrated)try{_u(l.containerInfo)}catch(Me){Bt(s,s.return,Me)}Eb&&(Eb=!1,jA(s));break;case 4:g=Zi,Zi=am(s.stateNode.containerInfo),Gr(l,s),qr(s),Zi=g;break;case 12:Gr(l,s),qr(s);break;case 31:Gr(l,s),qr(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Hg(s,g)));break;case 13:Gr(l,s),qr(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Yg=mt()),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Hg(s,g)));break;case 22:x=s.memoizedState!==null;var K=f!==null&&f.memoizedState!==null,ce=hs,me=jn;if(hs=ce||x,jn=me||K,Gr(l,s),jn=me,hs=ce,qr(s),g&8192)e:for(l=s.stateNode,l._visibility=x?l._visibility&-2:l._visibility|1,x&&(f===null||K||hs||jn||Pl(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){K=f=l;try{if(w=K.stateNode,x)N=w.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{F=K.stateNode;var be=K.memoizedProps.style,ue=be!=null&&be.hasOwnProperty("display")?be.display:null;F.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(Me){Bt(K,K.return,Me)}}}else if(l.tag===6){if(f===null){K=l;try{K.stateNode.nodeValue=x?"":K.memoizedProps}catch(Me){Bt(K,K.return,Me)}}}else if(l.tag===18){if(f===null){K=l;try{var he=K.stateNode;x?AC(he,!0):AC(K.stateNode,!1)}catch(Me){Bt(K,K.return,Me)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=s.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,Hg(s,f))));break;case 19:Gr(l,s),qr(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Hg(s,g)));break;case 30:break;case 21:break;default:Gr(l,s),qr(s)}}function qr(s){var l=s.flags;if(l&2){try{for(var f,g=s.return;g!==null;){if(IA(g)){f=g;break}g=g.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var x=f.stateNode,w=_b(s);qg(s,w,x);break;case 5:var N=f.stateNode;f.flags&32&&(Ur(N,""),f.flags&=-33);var F=_b(s);qg(s,F,N);break;case 3:case 4:var K=f.stateNode.containerInfo,ce=_b(s);wb(s,ce,K);break;default:throw Error(r(161))}}catch(me){Bt(s,s.return,me)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function jA(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;jA(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function gs(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)kA(s,l.alternate,l),l=l.sibling}function Pl(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:co(4,l,l.return),Pl(l);break;case 1:Da(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&AA(l,l.return,f),Pl(l);break;case 27:jf(l.stateNode);case 26:case 5:Da(l,l.return),Pl(l);break;case 22:l.memoizedState===null&&Pl(l);break;case 30:Pl(l);break;default:Pl(l)}s=s.sibling}}function ms(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,x=s,w=l,N=w.flags;switch(w.tag){case 0:case 11:case 15:ms(x,w,f),Cf(4,w);break;case 1:if(ms(x,w,f),g=w,x=g.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(ce){Bt(g,g.return,ce)}if(g=w,x=g.updateQueue,x!==null){var F=g.stateNode;try{var K=x.shared.hiddenCallbacks;if(K!==null)for(x.shared.hiddenCallbacks=null,x=0;x<K.length;x++)pT(K[x],F)}catch(ce){Bt(g,g.return,ce)}}f&&N&64&&TA(w),If(w,w.return);break;case 27:RA(w);case 26:case 5:ms(x,w,f),f&&g===null&&N&4&&CA(w),If(w,w.return);break;case 12:ms(x,w,f);break;case 31:ms(x,w,f),f&&N&4&&PA(x,w);break;case 13:ms(x,w,f),f&&N&4&&OA(x,w);break;case 22:w.memoizedState===null&&ms(x,w,f),If(w,w.return);break;case 30:break;default:ms(x,w,f)}l=l.sibling}}function Sb(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&pf(f))}function Tb(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&pf(s))}function Ji(s,l,f,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)zA(s,l,f,g),l=l.sibling}function zA(s,l,f,g){var x=l.flags;switch(l.tag){case 0:case 11:case 15:Ji(s,l,f,g),x&2048&&Cf(9,l);break;case 1:Ji(s,l,f,g);break;case 3:Ji(s,l,f,g),x&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&pf(s)));break;case 12:if(x&2048){Ji(s,l,f,g),s=l.stateNode;try{var w=l.memoizedProps,N=w.id,F=w.onPostCommit;typeof F=="function"&&F(N,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(K){Bt(l,l.return,K)}}else Ji(s,l,f,g);break;case 31:Ji(s,l,f,g);break;case 13:Ji(s,l,f,g);break;case 23:break;case 22:w=l.stateNode,N=l.alternate,l.memoizedState!==null?w._visibility&2?Ji(s,l,f,g):Rf(s,l):w._visibility&2?Ji(s,l,f,g):(w._visibility|=2,uu(s,l,f,g,(l.subtreeFlags&10256)!==0||!1)),x&2048&&Sb(N,l);break;case 24:Ji(s,l,f,g),x&2048&&Tb(l.alternate,l);break;default:Ji(s,l,f,g)}}function uu(s,l,f,g,x){for(x=x&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=s,N=l,F=f,K=g,ce=N.flags;switch(N.tag){case 0:case 11:case 15:uu(w,N,F,K,x),Cf(8,N);break;case 23:break;case 22:var me=N.stateNode;N.memoizedState!==null?me._visibility&2?uu(w,N,F,K,x):Rf(w,N):(me._visibility|=2,uu(w,N,F,K,x)),x&&ce&2048&&Sb(N.alternate,N);break;case 24:uu(w,N,F,K,x),x&&ce&2048&&Tb(N.alternate,N);break;default:uu(w,N,F,K,x)}l=l.sibling}}function Rf(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,g=l,x=g.flags;switch(g.tag){case 22:Rf(f,g),x&2048&&Sb(g.alternate,g);break;case 24:Rf(f,g),x&2048&&Tb(g.alternate,g);break;default:Rf(f,g)}l=l.sibling}}var Df=8192;function du(s,l,f){if(s.subtreeFlags&Df)for(s=s.child;s!==null;)LA(s,l,f),s=s.sibling}function LA(s,l,f){switch(s.tag){case 26:du(s,l,f),s.flags&Df&&s.memoizedState!==null&&V5(f,Zi,s.memoizedState,s.memoizedProps);break;case 5:du(s,l,f);break;case 3:case 4:var g=Zi;Zi=am(s.stateNode.containerInfo),du(s,l,f),Zi=g;break;case 22:s.memoizedState===null&&(g=s.alternate,g!==null&&g.memoizedState!==null?(g=Df,Df=16777216,du(s,l,f),Df=g):du(s,l,f));break;default:du(s,l,f)}}function BA(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function kf(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];rr=g,FA(g,s)}BA(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)UA(s),s=s.sibling}function UA(s){switch(s.tag){case 0:case 11:case 15:kf(s),s.flags&2048&&co(9,s,s.return);break;case 3:kf(s);break;case 12:kf(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,$g(s)):kf(s);break;default:kf(s)}}function $g(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];rr=g,FA(g,s)}BA(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:co(8,l,l.return),$g(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,$g(l));break;default:$g(l)}s=s.sibling}}function FA(s,l){for(;rr!==null;){var f=rr;switch(f.tag){case 0:case 11:case 15:co(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:pf(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,rr=g;else e:for(f=s;rr!==null;){g=rr;var x=g.sibling,w=g.return;if(NA(g),g===f){rr=null;break e}if(x!==null){x.return=w,rr=x;break e}rr=w}}}var Qj={getCacheForType:function(s){var l=ur(Pn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f},cacheSignal:function(){return ur(Pn).controller.signal}},Zj=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Qt=null,vt=null,bt=0,Lt=0,li=null,uo=!1,fu=!1,Ab=!1,vs=0,bn=0,fo=0,Ol=0,Cb=0,ci=0,hu=0,Nf=null,Hr=null,Ib=!1,Yg=0,GA=0,Kg=1/0,Xg=null,ho=null,Hn=0,po=null,pu=null,ys=0,Rb=0,Db=null,qA=null,Mf=0,kb=null;function ui(){return(Nt&2)!==0&&bt!==0?bt&-bt:$.T!==null?jb():Wp()}function HA(){if(ci===0)if((bt&536870912)===0||Et){var s=Ot;Ot<<=1,(Ot&3932160)===0&&(Ot=262144),ci=s}else ci=536870912;return s=si.current,s!==null&&(s.flags|=32),ci}function $r(s,l,f){(s===Qt&&(Lt===2||Lt===9)||s.cancelPendingCommit!==null)&&(gu(s,0),go(s,bt,ci,!1)),mi(s,f),((Nt&2)===0||s!==Qt)&&(s===Qt&&((Nt&2)===0&&(Ol|=f),bn===4&&go(s,bt,ci,!1)),ka(s))}function $A(s,l,f){if((Nt&6)!==0)throw Error(r(327));var g=!f&&(l&127)===0&&(l&s.expiredLanes)===0||vn(s,l),x=g?t5(s,l):Mb(s,l,!0),w=g;do{if(x===0){fu&&!g&&go(s,l,0,!1);break}else{if(f=s.current.alternate,w&&!Jj(f)){x=Mb(s,l,!1),w=!1;continue}if(x===2){if(w=l,s.errorRecoveryDisabledLanes&w)var N=0;else N=s.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){l=N;e:{var F=s;x=Nf;var K=F.current.memoizedState.isDehydrated;if(K&&(gu(F,N).flags|=256),N=Mb(F,N,!1),N!==2){if(Ab&&!K){F.errorRecoveryDisabledLanes|=w,Ol|=w,x=4;break e}w=Hr,Hr=x,w!==null&&(Hr===null?Hr=w:Hr.push.apply(Hr,w))}x=N}if(w=!1,x!==2)continue}}if(x===1){gu(s,0),go(s,l,0,!0);break}e:{switch(g=s,w=x,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:go(g,l,ci,!uo);break e;case 2:Hr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(x=Yg+300-mt(),10<x)){if(go(g,l,ci,!uo),Dn(g,0,!0)!==0)break e;ys=l,g.timeoutHandle=EC(YA.bind(null,g,f,Hr,Xg,Ib,l,ci,Ol,hu,uo,w,"Throttled",-0,0),x);break e}YA(g,f,Hr,Xg,Ib,l,ci,Ol,hu,uo,w,null,-0,0)}}break}while(!0);ka(s)}function YA(s,l,f,g,x,w,N,F,K,ce,me,be,ue,he){if(s.timeoutHandle=-1,be=l.subtreeFlags,be&8192||(be&16785408)===16785408){be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$i},LA(l,w,be);var Me=(w&62914560)===w?Yg-mt():(w&4194048)===w?GA-mt():0;if(Me=j5(be,Me),Me!==null){ys=w,s.cancelPendingCommit=Me(tC.bind(null,s,l,w,f,g,x,N,F,K,me,be,null,ue,he)),go(s,w,N,!ce);return}}tC(s,l,w,f,g,x,N,F,K)}function Jj(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var x=f[g],w=x.getSnapshot;x=x.value;try{if(!ii(w(),x))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function go(s,l,f,g){l&=~Cb,l&=~Ol,s.suspendedLanes|=l,s.pingedLanes&=~l,g&&(s.warmLanes|=l),g=s.expirationTimes;for(var x=l;0<x;){var w=31-Dt(x),N=1<<w;g[w]=-1,x&=~N}f!==0&&ul(s,f,l)}function Wg(){return(Nt&6)===0?(Pf(0),!1):!0}function Nb(){if(vt!==null){if(Lt===0)var s=vt.return;else s=vt,os=Al=null,Ky(s),au=null,mf=0,s=vt;for(;s!==null;)SA(s.alternate,s),s=s.return;vt=null}}function gu(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,b5(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),ys=0,Nb(),Qt=s,vt=f=as(s.current,null),bt=l,Lt=0,li=null,uo=!1,fu=vn(s,l),Ab=!1,hu=ci=Cb=Ol=fo=bn=0,Hr=Nf=null,Ib=!1,(l&8)!==0&&(l|=l&32);var g=s.entangledLanes;if(g!==0)for(s=s.entanglements,g&=l;0<g;){var x=31-Dt(g),w=1<<x;l|=s[x],g&=~w}return vs=l,vg(),f}function KA(s,l){ut=null,$.H=Sf,l===iu||l===Tg?(l=uT(),Lt=3):l===Vy?(l=uT(),Lt=4):Lt=l===ub?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,li=l,vt===null&&(bn=1,Lg(s,wi(l,s.current)))}function XA(){var s=si.current;return s===null?!0:(bt&4194048)===bt?Ai===null:(bt&62914560)===bt||(bt&536870912)!==0?s===Ai:!1}function WA(){var s=$.H;return $.H=Sf,s===null?Sf:s}function QA(){var s=$.A;return $.A=Qj,s}function Qg(){bn=4,uo||(bt&4194048)!==bt&&si.current!==null||(fu=!0),(fo&134217727)===0&&(Ol&134217727)===0||Qt===null||go(Qt,bt,ci,!1)}function Mb(s,l,f){var g=Nt;Nt|=2;var x=WA(),w=QA();(Qt!==s||bt!==l)&&(Xg=null,gu(s,l)),l=!1;var N=bn;e:do try{if(Lt!==0&&vt!==null){var F=vt,K=li;switch(Lt){case 8:Nb(),N=6;break e;case 3:case 2:case 9:case 6:si.current===null&&(l=!0);var ce=Lt;if(Lt=0,li=null,mu(s,F,K,ce),f&&fu){N=0;break e}break;default:ce=Lt,Lt=0,li=null,mu(s,F,K,ce)}}e5(),N=bn;break}catch(me){KA(s,me)}while(!0);return l&&s.shellSuspendCounter++,os=Al=null,Nt=g,$.H=x,$.A=w,vt===null&&(Qt=null,bt=0,vg()),N}function e5(){for(;vt!==null;)ZA(vt)}function t5(s,l){var f=Nt;Nt|=2;var g=WA(),x=QA();Qt!==s||bt!==l?(Xg=null,Kg=mt()+500,gu(s,l)):fu=vn(s,l);e:do try{if(Lt!==0&&vt!==null){l=vt;var w=li;t:switch(Lt){case 1:Lt=0,li=null,mu(s,l,w,1);break;case 2:case 9:if(lT(w)){Lt=0,li=null,JA(l);break}l=function(){Lt!==2&&Lt!==9||Qt!==s||(Lt=7),ka(s)},w.then(l,l);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:lT(w)?(Lt=0,li=null,JA(l)):(Lt=0,li=null,mu(s,l,w,7));break;case 5:var N=null;switch(vt.tag){case 26:N=vt.memoizedState;case 5:case 27:var F=vt;if(N?zC(N):F.stateNode.complete){Lt=0,li=null;var K=F.sibling;if(K!==null)vt=K;else{var ce=F.return;ce!==null?(vt=ce,Zg(ce)):vt=null}break t}}Lt=0,li=null,mu(s,l,w,5);break;case 6:Lt=0,li=null,mu(s,l,w,6);break;case 8:Nb(),bn=6;break e;default:throw Error(r(462))}}n5();break}catch(me){KA(s,me)}while(!0);return os=Al=null,$.H=g,$.A=x,Nt=f,vt!==null?0:(Qt=null,bt=0,vg(),bn)}function n5(){for(;vt!==null&&!En();)ZA(vt)}function ZA(s){var l=wA(s.alternate,s,vs);s.memoizedProps=s.pendingProps,l===null?Zg(s):vt=l}function JA(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=mA(f,l,l.pendingProps,l.type,void 0,bt);break;case 11:l=mA(f,l,l.pendingProps,l.type.render,l.ref,bt);break;case 5:Ky(l);default:SA(f,l),l=vt=QS(l,vs),l=wA(f,l,vs)}s.memoizedProps=s.pendingProps,l===null?Zg(s):vt=l}function mu(s,l,f,g){os=Al=null,Ky(l),au=null,mf=0;var x=l.return;try{if(qj(s,x,l,f,bt)){bn=1,Lg(s,wi(f,s.current)),vt=null;return}}catch(w){if(x!==null)throw vt=x,w;bn=1,Lg(s,wi(f,s.current)),vt=null;return}l.flags&32768?(Et||g===1?s=!0:fu||(bt&536870912)!==0?s=!1:(uo=s=!0,(g===2||g===9||g===3||g===6)&&(g=si.current,g!==null&&g.tag===13&&(g.flags|=16384))),eC(l,s)):Zg(l)}function Zg(s){var l=s;do{if((l.flags&32768)!==0){eC(l,uo);return}s=l.return;var f=Yj(l.alternate,l,vs);if(f!==null){vt=f;return}if(l=l.sibling,l!==null){vt=l;return}vt=l=s}while(l!==null);bn===0&&(bn=5)}function eC(s,l){do{var f=Kj(s.alternate,s);if(f!==null){f.flags&=32767,vt=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){vt=s;return}vt=s=f}while(s!==null);bn=6,vt=null}function tC(s,l,f,g,x,w,N,F,K){s.cancelPendingCommit=null;do Jg();while(Hn!==0);if((Nt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=_y,fy(s,f,w,N,F,K),s===Qt&&(vt=Qt=null,bt=0),pu=l,po=s,ys=f,Rb=w,Db=x,qA=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,s5(ti,function(){return sC(),null})):(s.callbackNode=null,s.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=$.T,$.T=null,x=H.p,H.p=2,N=Nt,Nt|=4;try{Xj(s,l,f)}finally{Nt=N,H.p=x,$.T=g}}Hn=1,nC(),rC(),iC()}}function nC(){if(Hn===1){Hn=0;var s=po,l=pu,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=$.T,$.T=null;var g=H.p;H.p=2;var x=Nt;Nt|=4;try{VA(l,s);var w=Hb,N=FS(s.containerInfo),F=w.focusedElem,K=w.selectionRange;if(N!==F&&F&&F.ownerDocument&&US(F.ownerDocument.documentElement,F)){if(K!==null&&my(F)){var ce=K.start,me=K.end;if(me===void 0&&(me=ce),"selectionStart"in F)F.selectionStart=ce,F.selectionEnd=Math.min(me,F.value.length);else{var be=F.ownerDocument||document,ue=be&&be.defaultView||window;if(ue.getSelection){var he=ue.getSelection(),Me=F.textContent.length,We=Math.min(K.start,Me),Kt=K.end===void 0?We:Math.min(K.end,Me);!he.extend&&We>Kt&&(N=Kt,Kt=We,We=N);var re=BS(F,We),J=BS(F,Kt);if(re&&J&&(he.rangeCount!==1||he.anchorNode!==re.node||he.anchorOffset!==re.offset||he.focusNode!==J.node||he.focusOffset!==J.offset)){var le=be.createRange();le.setStart(re.node,re.offset),he.removeAllRanges(),We>Kt?(he.addRange(le),he.extend(J.node,J.offset)):(le.setEnd(J.node,J.offset),he.addRange(le))}}}}for(be=[],he=F;he=he.parentNode;)he.nodeType===1&&be.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<be.length;F++){var ye=be[F];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}dm=!!qb,Hb=qb=null}finally{Nt=x,H.p=g,$.T=f}}s.current=l,Hn=2}}function rC(){if(Hn===2){Hn=0;var s=po,l=pu,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=$.T,$.T=null;var g=H.p;H.p=2;var x=Nt;Nt|=4;try{kA(s,l.alternate,l)}finally{Nt=x,H.p=g,$.T=f}}Hn=3}}function iC(){if(Hn===4||Hn===3){Hn=0,dn();var s=po,l=pu,f=ys,g=qA;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Hn=5:(Hn=0,pu=po=null,aC(s,s.pendingLanes));var x=s.pendingLanes;if(x===0&&(ho=null),ts(f),l=l.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(qt,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=$.T,x=H.p,H.p=2,$.T=null;try{for(var w=s.onRecoverableError,N=0;N<g.length;N++){var F=g[N];w(F.value,{componentStack:F.stack})}}finally{$.T=l,H.p=x}}(ys&3)!==0&&Jg(),ka(s),x=s.pendingLanes,(f&261930)!==0&&(x&42)!==0?s===kb?Mf++:(Mf=0,kb=s):Mf=0,Pf(0)}}function aC(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,pf(l)))}function Jg(){return nC(),rC(),iC(),sC()}function sC(){if(Hn!==5)return!1;var s=po,l=Rb;Rb=0;var f=ts(ys),g=$.T,x=H.p;try{H.p=32>f?32:f,$.T=null,f=Db,Db=null;var w=po,N=ys;if(Hn=0,pu=po=null,ys=0,(Nt&6)!==0)throw Error(r(331));var F=Nt;if(Nt|=4,UA(w.current),zA(w,w.current,N,f),Nt=F,Pf(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(qt,w)}catch{}return!0}finally{H.p=x,$.T=g,aC(s,l)}}function oC(s,l,f){l=wi(f,l),l=cb(s.stateNode,l,2),s=so(s,l,2),s!==null&&(mi(s,2),ka(s))}function Bt(s,l,f){if(s.tag===3)oC(s,s,f);else for(;l!==null;){if(l.tag===3){oC(l,s,f);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ho===null||!ho.has(g))){s=wi(f,s),f=lA(2),g=so(l,f,2),g!==null&&(cA(f,g,l,s),mi(g,2),ka(g));break}}l=l.return}}function Pb(s,l,f){var g=s.pingCache;if(g===null){g=s.pingCache=new Zj;var x=new Set;g.set(l,x)}else x=g.get(l),x===void 0&&(x=new Set,g.set(l,x));x.has(f)||(Ab=!0,x.add(f),s=r5.bind(null,s,l,f),l.then(s,s))}function r5(s,l,f){var g=s.pingCache;g!==null&&g.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Qt===s&&(bt&f)===f&&(bn===4||bn===3&&(bt&62914560)===bt&&300>mt()-Yg?(Nt&2)===0&&gu(s,0):Cb|=f,hu===bt&&(hu=0)),ka(s)}function lC(s,l){l===0&&(l=es()),s=El(s,l),s!==null&&(mi(s,l),ka(s))}function i5(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),lC(s,f)}function a5(s,l){var f=0;switch(s.tag){case 31:case 13:var g=s.stateNode,x=s.memoizedState;x!==null&&(f=x.retryLane);break;case 19:g=s.stateNode;break;case 22:g=s.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(l),lC(s,f)}function s5(s,l){return Ye(s,l)}var em=null,vu=null,Ob=!1,tm=!1,Vb=!1,mo=0;function ka(s){s!==vu&&s.next===null&&(vu===null?em=vu=s:vu=vu.next=s),tm=!0,Ob||(Ob=!0,l5())}function Pf(s,l){if(!Vb&&tm){Vb=!0;do for(var f=!1,g=em;g!==null;){if(s!==0){var x=g.pendingLanes;if(x===0)var w=0;else{var N=g.suspendedLanes,F=g.pingedLanes;w=(1<<31-Dt(42|s)+1)-1,w&=x&~(N&~F),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,fC(g,w))}else w=bt,w=Dn(g,g===Qt?w:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(w&3)===0||vn(g,w)||(f=!0,fC(g,w));g=g.next}while(f);Vb=!1}}function o5(){cC()}function cC(){tm=Ob=!1;var s=0;mo!==0&&y5()&&(s=mo);for(var l=mt(),f=null,g=em;g!==null;){var x=g.next,w=uC(g,l);w===0?(g.next=null,f===null?em=x:f.next=x,x===null&&(vu=f)):(f=g,(s!==0||(w&3)!==0)&&(tm=!0)),g=x}Hn!==0&&Hn!==5||Pf(s),mo!==0&&(mo=0)}function uC(s,l){for(var f=s.suspendedLanes,g=s.pingedLanes,x=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var N=31-Dt(w),F=1<<N,K=x[N];K===-1?((F&f)===0||(F&g)!==0)&&(x[N]=Oc(F,l)):K<=l&&(s.expiredLanes|=F),w&=~F}if(l=Qt,f=bt,f=Dn(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g=s.callbackNode,f===0||s===l&&(Lt===2||Lt===9)||s.cancelPendingCommit!==null)return g!==null&&g!==null&&Pt(g),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||vn(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(g!==null&&Pt(g),ts(f)){case 2:case 8:f=br;break;case 32:f=ti;break;case 268435456:f=Be;break;default:f=ti}return g=dC.bind(null,s),f=Ye(f,g),s.callbackPriority=l,s.callbackNode=f,l}return g!==null&&g!==null&&Pt(g),s.callbackPriority=2,s.callbackNode=null,2}function dC(s,l){if(Hn!==0&&Hn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(Jg()&&s.callbackNode!==f)return null;var g=bt;return g=Dn(s,s===Qt?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g===0?null:($A(s,g,l),uC(s,mt()),s.callbackNode!=null&&s.callbackNode===f?dC.bind(null,s):null)}function fC(s,l){if(Jg())return null;$A(s,l,!0)}function l5(){x5(function(){(Nt&6)!==0?Ye(yr,o5):cC()})}function jb(){if(mo===0){var s=nu;s===0&&(s=Ze,Ze<<=1,(Ze&261888)===0&&(Ze=256)),mo=s}return mo}function hC(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Uc(""+s)}function pC(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function c5(s,l,f,g,x){if(l==="submit"&&f&&f.stateNode===x){var w=hC((x[tr]||null).action),N=g.submitter;N&&(l=(l=N[tr]||null)?hC(l.formAction):N.getAttribute("formAction"),l!==null&&(w=l,N=null));var F=new Sa("action","action",null,g,x);s.push({event:F,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(mo!==0){var K=N?pC(x,N):new FormData(x);rb(f,{pending:!0,data:K,method:x.method,action:w},null,K)}}else typeof w=="function"&&(F.preventDefault(),K=N?pC(x,N):new FormData(x),rb(f,{pending:!0,data:K,method:x.method,action:w},w,K))},currentTarget:x}]})}}for(var zb=0;zb<xy.length;zb++){var Lb=xy[zb],u5=Lb.toLowerCase(),d5=Lb[0].toUpperCase()+Lb.slice(1);Qi(u5,"on"+d5)}Qi(HS,"onAnimationEnd"),Qi($S,"onAnimationIteration"),Qi(YS,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(Cj,"onTransitionRun"),Qi(Ij,"onTransitionStart"),Qi(Rj,"onTransitionCancel"),Qi(KS,"onTransitionEnd"),xa("onMouseEnter",["mouseout","mouseover"]),xa("onMouseLeave",["mouseout","mouseover"]),xa("onPointerEnter",["pointerout","pointerover"]),xa("onPointerLeave",["pointerout","pointerover"]),ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Of));function gC(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var g=s[f],x=g.event;g=g.listeners;e:{var w=void 0;if(l)for(var N=g.length-1;0<=N;N--){var F=g[N],K=F.instance,ce=F.currentTarget;if(F=F.listener,K!==w&&x.isPropagationStopped())break e;w=F,x.currentTarget=ce;try{w(x)}catch(me){mg(me)}x.currentTarget=null,w=K}else for(N=0;N<g.length;N++){if(F=g[N],K=F.instance,ce=F.currentTarget,F=F.listener,K!==w&&x.isPropagationStopped())break e;w=F,x.currentTarget=ce;try{w(x)}catch(me){mg(me)}x.currentTarget=null,w=K}}}}function yt(s,l){var f=l[Vc];f===void 0&&(f=l[Vc]=new Set);var g=s+"__bubble";f.has(g)||(mC(l,s,2,!1),f.add(g))}function Bb(s,l,f){var g=0;l&&(g|=4),mC(f,s,g,l)}var nm="_reactListening"+Math.random().toString(36).slice(2);function Ub(s){if(!s[nm]){s[nm]=!0,$d.forEach(function(f){f!=="selectionchange"&&(f5.has(f)||Bb(f,!1,s),Bb(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[nm]||(l[nm]=!0,Bb("selectionchange",!1,l))}}function mC(s,l,f,g){switch(HC(l)){case 2:var x=B5;break;case 8:x=U5;break;default:x=n1}f=x.bind(null,l,f,s),x=void 0,!gl||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),g?x!==void 0?s.addEventListener(l,f,{capture:!0,passive:x}):s.addEventListener(l,f,!0):x!==void 0?s.addEventListener(l,f,{passive:x}):s.addEventListener(l,f,!1)}function Fb(s,l,f,g,x){var w=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var N=g.tag;if(N===3||N===4){var F=g.stateNode.containerInfo;if(F===x)break;if(N===4)for(N=g.return;N!==null;){var K=N.tag;if((K===3||K===4)&&N.stateNode.containerInfo===x)return;N=N.return}for(;F!==null;){if(N=va(F),N===null)return;if(K=N.tag,K===5||K===6||K===26||K===27){g=w=N;continue e}F=F.parentNode}}g=g.return}Ws(function(){var ce=w,me=yi(f),be=[];e:{var ue=XS.get(s);if(ue!==void 0){var he=Sa,Me=s;switch(s){case"keypress":if(vl(f)===0)break e;case"keydown":case"keyup":he=hg;break;case"focusin":Me="focus",he=bl;break;case"focusout":Me="blur",he=bl;break;case"beforeblur":case"afterblur":he=bl;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=sf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=ig;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=R;break;case HS:case $S:case YS:he=sg;break;case KS:he=q;break;case"scroll":case"scrollend":he=af;break;case"wheel":he=fe;break;case"copy":case"cut":case"paste":he=og;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=is;break;case"toggle":case"beforetoggle":he=ct}var We=(l&4)!==0,Kt=!We&&(s==="scroll"||s==="scrollend"),re=We?ue!==null?ue+"Capture":null:ue;We=[];for(var J=ce,le;J!==null;){var ye=J;if(le=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||le===null||re===null||(ye=Yi(J,re),ye!=null&&We.push(Vf(J,ye,le))),Kt)break;J=J.return}0<We.length&&(ue=new he(ue,Me,null,f,me),be.push({event:ue,listeners:We}))}}if((l&7)===0){e:{if(ue=s==="mouseover"||s==="pointerover",he=s==="mouseout"||s==="pointerout",ue&&f!==tf&&(Me=f.relatedTarget||f.fromElement)&&(va(Me)||Me[ga]))break e;if((he||ue)&&(ue=me.window===me?me:(ue=me.ownerDocument)?ue.defaultView||ue.parentWindow:window,he?(Me=f.relatedTarget||f.toElement,he=ce,Me=Me?va(Me):null,Me!==null&&(Kt=a(Me),We=Me.tag,Me!==Kt||We!==5&&We!==27&&We!==6)&&(Me=null)):(he=null,Me=ce),he!==Me)){if(We=sf,ye="onMouseLeave",re="onMouseEnter",J="mouse",(s==="pointerout"||s==="pointerover")&&(We=is,ye="onPointerLeave",re="onPointerEnter",J="pointer"),Kt=he==null?ue:ni(he),le=Me==null?ue:ni(Me),ue=new We(ye,J+"leave",he,f,me),ue.target=Kt,ue.relatedTarget=le,ye=null,va(me)===ce&&(We=new We(re,J+"enter",Me,f,me),We.target=le,We.relatedTarget=Kt,ye=We),Kt=ye,he&&Me)t:{for(We=h5,re=he,J=Me,le=0,ye=re;ye;ye=We(ye))le++;ye=0;for(var qe=J;qe;qe=We(qe))ye++;for(;0<le-ye;)re=We(re),le--;for(;0<ye-le;)J=We(J),ye--;for(;le--;){if(re===J||J!==null&&re===J.alternate){We=re;break t}re=We(re),J=We(J)}We=null}else We=null;he!==null&&vC(be,ue,he,We,!1),Me!==null&&Kt!==null&&vC(be,Kt,Me,We,!0)}}e:{if(ue=ce?ni(ce):window,he=ue.nodeName&&ue.nodeName.toLowerCase(),he==="select"||he==="input"&&ue.type==="file")var It=PS;else if(NS(ue))if(OS)It=Sj;else{It=wj;var ze=_j}else he=ue.nodeName,!he||he.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?ce&&Bc(ce.elementType)&&(It=PS):It=Ej;if(It&&(It=It(s,ce))){MS(be,It,f,me);break e}ze&&ze(s,ue,ce),s==="focusout"&&ce&&ue.type==="number"&&ce.memoizedProps.value!=null&&Zd(ue,"number",ue.value)}switch(ze=ce?ni(ce):window,s){case"focusin":(NS(ze)||ze.contentEditable==="true")&&(Kc=ze,vy=ce,df=null);break;case"focusout":df=vy=Kc=null;break;case"mousedown":yy=!0;break;case"contextmenu":case"mouseup":case"dragend":yy=!1,GS(be,f,me);break;case"selectionchange":if(Aj)break;case"keydown":case"keyup":GS(be,f,me)}var ft;if(kt)e:{switch(s){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else Yc?xl(s,f)&&(xt="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(xt="onCompositionStart");xt&&(Ca&&f.locale!=="ko"&&(Yc||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Yc&&(ft=rf()):(Ea=me,nf="value"in Ea?Ea.value:Ea.textContent,Yc=!0)),ze=rm(ce,xt),0<ze.length&&(xt=new Aa(xt,s,null,f,me),be.push({event:xt,listeners:ze}),ft?xt.data=ft:(ft=$c(f),ft!==null&&(xt.data=ft)))),(ft=xi?vj(s,f):yj(s,f))&&(xt=rm(ce,"onBeforeInput"),0<xt.length&&(ze=new Aa("onBeforeInput","beforeinput",null,f,me),be.push({event:ze,listeners:xt}),ze.data=ft)),c5(be,s,ce,f,me)}gC(be,l)})}function Vf(s,l,f){return{instance:s,listener:l,currentTarget:f}}function rm(s,l){for(var f=l+"Capture",g=[];s!==null;){var x=s,w=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||w===null||(x=Yi(s,f),x!=null&&g.unshift(Vf(s,x,w)),x=Yi(s,l),x!=null&&g.push(Vf(s,x,w))),s.tag===3)return g;s=s.return}return[]}function h5(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function vC(s,l,f,g,x){for(var w=l._reactName,N=[];f!==null&&f!==g;){var F=f,K=F.alternate,ce=F.stateNode;if(F=F.tag,K!==null&&K===g)break;F!==5&&F!==26&&F!==27||ce===null||(K=ce,x?(ce=Yi(f,w),ce!=null&&N.unshift(Vf(f,ce,K))):x||(ce=Yi(f,w),ce!=null&&N.push(Vf(f,ce,K)))),f=f.return}N.length!==0&&s.push({event:l,listeners:N})}var p5=/\r\n?/g,g5=/\u0000|\uFFFD/g;function yC(s){return(typeof s=="string"?s:""+s).replace(p5,`
`).replace(g5,"")}function bC(s,l){return l=yC(l),yC(s)===l}function Yt(s,l,f,g,x,w){switch(f){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||Ur(s,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&Ur(s,""+g);break;case"className":ri(s,"class",g);break;case"tabIndex":ri(s,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ri(s,f,g);break;case"style":ef(s,g,w);break;case"data":if(l!=="object"){ri(s,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(f);break}g=Uc(""+g),s.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(l!=="input"&&Yt(s,l,"name",x.name,x,null),Yt(s,l,"formEncType",x.formEncType,x,null),Yt(s,l,"formMethod",x.formMethod,x,null),Yt(s,l,"formTarget",x.formTarget,x,null)):(Yt(s,l,"encType",x.encType,x,null),Yt(s,l,"method",x.method,x,null),Yt(s,l,"target",x.target,x,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(f);break}g=Uc(""+g),s.setAttribute(f,g);break;case"onClick":g!=null&&(s.onclick=$i);break;case"onScroll":g!=null&&yt("scroll",s);break;case"onScrollEnd":g!=null&&yt("scrollend",s);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(x.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":s.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){s.removeAttribute("xlink:href");break}f=Uc(""+g),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(f,""+g):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":g===!0?s.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(f,g):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?s.setAttribute(f,g):s.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?s.removeAttribute(f):s.setAttribute(f,g);break;case"popover":yt("beforetoggle",s),yt("toggle",s),zc(s,"popover",g);break;case"xlinkActuate":Mn(s,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Mn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Mn(s,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Mn(s,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Mn(s,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Mn(s,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Mn(s,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Mn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Mn(s,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":zc(s,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=rg.get(f)||f,zc(s,f,g))}}function Gb(s,l,f,g,x,w){switch(f){case"style":ef(s,g,w);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(x.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof g=="string"?Ur(s,g):(typeof g=="number"||typeof g=="bigint")&&Ur(s,""+g);break;case"onScroll":g!=null&&yt("scroll",s);break;case"onScrollEnd":g!=null&&yt("scrollend",s);break;case"onClick":g!=null&&(s.onclick=$i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yd.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),l=f.slice(2,x?f.length-7:void 0),w=s[tr]||null,w=w!=null?w[f]:null,typeof w=="function"&&s.removeEventListener(l,w,x),typeof g=="function")){typeof w!="function"&&w!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,g,x);break e}f in s?s[f]=g:g===!0?s.setAttribute(f,""):zc(s,f,g)}}}function fr(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",s),yt("load",s);var g=!1,x=!1,w;for(w in f)if(f.hasOwnProperty(w)){var N=f[w];if(N!=null)switch(w){case"src":g=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Yt(s,l,w,N,f,null)}}x&&Yt(s,l,"srcSet",f.srcSet,f,null),g&&Yt(s,l,"src",f.src,f,null);return;case"input":yt("invalid",s);var F=w=N=x=null,K=null,ce=null;for(g in f)if(f.hasOwnProperty(g)){var me=f[g];if(me!=null)switch(g){case"name":x=me;break;case"type":N=me;break;case"checked":K=me;break;case"defaultChecked":ce=me;break;case"value":w=me;break;case"defaultValue":F=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(137,l));break;default:Yt(s,l,g,me,f,null)}}eg(s,w,F,K,ce,N,x,!1);return;case"select":yt("invalid",s),g=N=w=null;for(x in f)if(f.hasOwnProperty(x)&&(F=f[x],F!=null))switch(x){case"value":w=F;break;case"defaultValue":N=F;break;case"multiple":g=F;default:Yt(s,l,x,F,f,null)}l=w,f=N,s.multiple=!!g,l!=null?$s(s,!!g,l,!1):f!=null&&$s(s,!!g,f,!0);return;case"textarea":yt("invalid",s),w=x=g=null;for(N in f)if(f.hasOwnProperty(N)&&(F=f[N],F!=null))switch(N){case"value":g=F;break;case"defaultValue":x=F;break;case"children":w=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:Yt(s,l,N,F,f,null)}Ys(s,g,x,w);return;case"option":for(K in f)if(f.hasOwnProperty(K)&&(g=f[K],g!=null))switch(K){case"selected":s.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Yt(s,l,K,g,f,null)}return;case"dialog":yt("beforetoggle",s),yt("toggle",s),yt("cancel",s),yt("close",s);break;case"iframe":case"object":yt("load",s);break;case"video":case"audio":for(g=0;g<Of.length;g++)yt(Of[g],s);break;case"image":yt("error",s),yt("load",s);break;case"details":yt("toggle",s);break;case"embed":case"source":case"link":yt("error",s),yt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in f)if(f.hasOwnProperty(ce)&&(g=f[ce],g!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Yt(s,l,ce,g,f,null)}return;default:if(Bc(l)){for(me in f)f.hasOwnProperty(me)&&(g=f[me],g!==void 0&&Gb(s,l,me,g,f,void 0));return}}for(F in f)f.hasOwnProperty(F)&&(g=f[F],g!=null&&Yt(s,l,F,g,f,null))}function m5(s,l,f,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,w=null,N=null,F=null,K=null,ce=null,me=null;for(he in f){var be=f[he];if(f.hasOwnProperty(he)&&be!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":K=be;default:g.hasOwnProperty(he)||Yt(s,l,he,null,g,be)}}for(var ue in g){var he=g[ue];if(be=f[ue],g.hasOwnProperty(ue)&&(he!=null||be!=null))switch(ue){case"type":w=he;break;case"name":x=he;break;case"checked":ce=he;break;case"defaultChecked":me=he;break;case"value":N=he;break;case"defaultValue":F=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,l));break;default:he!==be&&Yt(s,l,ue,he,g,be)}}Lc(s,N,F,K,ce,me,w,x);return;case"select":he=N=F=ue=null;for(w in f)if(K=f[w],f.hasOwnProperty(w)&&K!=null)switch(w){case"value":break;case"multiple":he=K;default:g.hasOwnProperty(w)||Yt(s,l,w,null,g,K)}for(x in g)if(w=g[x],K=f[x],g.hasOwnProperty(x)&&(w!=null||K!=null))switch(x){case"value":ue=w;break;case"defaultValue":F=w;break;case"multiple":N=w;default:w!==K&&Yt(s,l,x,w,g,K)}l=F,f=N,g=he,ue!=null?$s(s,!!f,ue,!1):!!g!=!!f&&(l!=null?$s(s,!!f,l,!0):$s(s,!!f,f?[]:"",!1));return;case"textarea":he=ue=null;for(F in f)if(x=f[F],f.hasOwnProperty(F)&&x!=null&&!g.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:Yt(s,l,F,null,g,x)}for(N in g)if(x=g[N],w=f[N],g.hasOwnProperty(N)&&(x!=null||w!=null))switch(N){case"value":ue=x;break;case"defaultValue":he=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==w&&Yt(s,l,N,x,g,w)}tg(s,ue,he);return;case"option":for(var Me in f)if(ue=f[Me],f.hasOwnProperty(Me)&&ue!=null&&!g.hasOwnProperty(Me))switch(Me){case"selected":s.selected=!1;break;default:Yt(s,l,Me,null,g,ue)}for(K in g)if(ue=g[K],he=f[K],g.hasOwnProperty(K)&&ue!==he&&(ue!=null||he!=null))switch(K){case"selected":s.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:Yt(s,l,K,ue,g,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var We in f)ue=f[We],f.hasOwnProperty(We)&&ue!=null&&!g.hasOwnProperty(We)&&Yt(s,l,We,null,g,ue);for(ce in g)if(ue=g[ce],he=f[ce],g.hasOwnProperty(ce)&&ue!==he&&(ue!=null||he!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,l));break;default:Yt(s,l,ce,ue,g,he)}return;default:if(Bc(l)){for(var Kt in f)ue=f[Kt],f.hasOwnProperty(Kt)&&ue!==void 0&&!g.hasOwnProperty(Kt)&&Gb(s,l,Kt,void 0,g,ue);for(me in g)ue=g[me],he=f[me],!g.hasOwnProperty(me)||ue===he||ue===void 0&&he===void 0||Gb(s,l,me,ue,g,he);return}}for(var re in f)ue=f[re],f.hasOwnProperty(re)&&ue!=null&&!g.hasOwnProperty(re)&&Yt(s,l,re,null,g,ue);for(be in g)ue=g[be],he=f[be],!g.hasOwnProperty(be)||ue===he||ue==null&&he==null||Yt(s,l,be,ue,g,he)}function xC(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function v5(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var x=f[g],w=x.transferSize,N=x.initiatorType,F=x.duration;if(w&&F&&xC(N)){for(N=0,F=x.responseEnd,g+=1;g<f.length;g++){var K=f[g],ce=K.startTime;if(ce>F)break;var me=K.transferSize,be=K.initiatorType;me&&xC(be)&&(K=K.responseEnd,N+=me*(K<F?1:(F-ce)/(K-ce)))}if(--g,l+=8*(w+N)/(x.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var qb=null,Hb=null;function im(s){return s.nodeType===9?s:s.ownerDocument}function _C(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wC(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function $b(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Yb=null;function y5(){var s=window.event;return s&&s.type==="popstate"?s===Yb?!1:(Yb=s,!0):(Yb=null,!1)}var EC=typeof setTimeout=="function"?setTimeout:void 0,b5=typeof clearTimeout=="function"?clearTimeout:void 0,SC=typeof Promise=="function"?Promise:void 0,x5=typeof queueMicrotask=="function"?queueMicrotask:typeof SC<"u"?function(s){return SC.resolve(null).then(s).catch(_5)}:EC;function _5(s){setTimeout(function(){throw s})}function vo(s){return s==="head"}function TC(s,l){var f=l,g=0;do{var x=f.nextSibling;if(s.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"||f==="/&"){if(g===0){s.removeChild(x),_u(l);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")jf(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,jf(f);for(var w=f.firstChild;w;){var N=w.nextSibling,F=w.nodeName;w[ma]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&w.rel.toLowerCase()==="stylesheet"||f.removeChild(w),w=N}}else f==="body"&&jf(s.ownerDocument.body);f=x}while(f);_u(l)}function AC(s,l){var f=s;s=0;do{var g=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=g}while(f)}function Kb(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Kb(f),jc(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function w5(s,l,f,g){for(;s.nodeType===1;){var x=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(g){if(!s[ma])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==x.rel||s.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||s.getAttribute("title")!==(x.title==null?null:x.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(x.src==null?null:x.src)||s.getAttribute("type")!==(x.type==null?null:x.type)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var w=x.name==null?null:""+x.name;if(x.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=Ci(s.nextSibling),s===null)break}return null}function E5(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=Ci(s.nextSibling),s===null))return null;return s}function CC(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Ci(s.nextSibling),s===null))return null;return s}function Xb(s){return s.data==="$?"||s.data==="$~"}function Wb(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function S5(s,l){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||f.readyState!=="loading")l();else{var g=function(){l(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),s._reactRetry=g}}function Ci(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var Qb=null;function IC(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(l===0)return Ci(s.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}s=s.nextSibling}return null}function RC(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return s;l--}else f!=="/$"&&f!=="/&"||l++}s=s.previousSibling}return null}function DC(s,l,f){switch(l=im(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function jf(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);jc(s)}var Ii=new Map,kC=new Set;function am(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var bs=H.d;H.d={f:T5,r:A5,D:C5,C:I5,L:R5,m:D5,X:N5,S:k5,M:M5};function T5(){var s=bs.f(),l=Wg();return s||l}function A5(s){var l=vi(s);l!==null&&l.tag===5&&l.type==="form"?KT(l):bs.r(s)}var yu=typeof document>"u"?null:document;function NC(s,l,f){var g=yu;if(g&&typeof l=="string"&&l){var x=Br(l);x='link[rel="'+s+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),kC.has(x)||(kC.add(x),s={rel:s,crossOrigin:f,href:l},g.querySelector(x)===null&&(l=g.createElement("link"),fr(l,"link",s),Nn(l),g.head.appendChild(l)))}}function C5(s){bs.D(s),NC("dns-prefetch",s,null)}function I5(s,l){bs.C(s,l),NC("preconnect",s,l)}function R5(s,l,f){bs.L(s,l,f);var g=yu;if(g&&s&&l){var x='link[rel="preload"][as="'+Br(l)+'"]';l==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+Br(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+Br(f.imageSizes)+'"]')):x+='[href="'+Br(s)+'"]';var w=x;switch(l){case"style":w=bu(s);break;case"script":w=xu(s)}Ii.has(w)||(s=p({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),Ii.set(w,s),g.querySelector(x)!==null||l==="style"&&g.querySelector(zf(w))||l==="script"&&g.querySelector(Lf(w))||(l=g.createElement("link"),fr(l,"link",s),Nn(l),g.head.appendChild(l)))}}function D5(s,l){bs.m(s,l);var f=yu;if(f&&s){var g=l&&typeof l.as=="string"?l.as:"script",x='link[rel="modulepreload"][as="'+Br(g)+'"][href="'+Br(s)+'"]',w=x;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=xu(s)}if(!Ii.has(w)&&(s=p({rel:"modulepreload",href:s},l),Ii.set(w,s),f.querySelector(x)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Lf(w)))return}g=f.createElement("link"),fr(g,"link",s),Nn(g),f.head.appendChild(g)}}}function k5(s,l,f){bs.S(s,l,f);var g=yu;if(g&&s){var x=ya(g).hoistableStyles,w=bu(s);l=l||"default";var N=x.get(w);if(!N){var F={loading:0,preload:null};if(N=g.querySelector(zf(w)))F.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":l},f),(f=Ii.get(w))&&Zb(s,f);var K=N=g.createElement("link");Nn(K),fr(K,"link",s),K._p=new Promise(function(ce,me){K.onload=ce,K.onerror=me}),K.addEventListener("load",function(){F.loading|=1}),K.addEventListener("error",function(){F.loading|=2}),F.loading|=4,sm(N,l,g)}N={type:"stylesheet",instance:N,count:1,state:F},x.set(w,N)}}}function N5(s,l){bs.X(s,l);var f=yu;if(f&&s){var g=ya(f).hoistableScripts,x=xu(s),w=g.get(x);w||(w=f.querySelector(Lf(x)),w||(s=p({src:s,async:!0},l),(l=Ii.get(x))&&Jb(s,l),w=f.createElement("script"),Nn(w),fr(w,"link",s),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(x,w))}}function M5(s,l){bs.M(s,l);var f=yu;if(f&&s){var g=ya(f).hoistableScripts,x=xu(s),w=g.get(x);w||(w=f.querySelector(Lf(x)),w||(s=p({src:s,async:!0,type:"module"},l),(l=Ii.get(x))&&Jb(s,l),w=f.createElement("script"),Nn(w),fr(w,"link",s),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(x,w))}}function MC(s,l,f,g){var x=(x=ie.current)?am(x):null;if(!x)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=bu(f.href),f=ya(x).hoistableStyles,g=f.get(l),g||(g={type:"style",instance:null,count:0,state:null},f.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=bu(f.href);var w=ya(x).hoistableStyles,N=w.get(s);if(N||(x=x.ownerDocument||x,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,N),(w=x.querySelector(zf(s)))&&!w._p&&(N.instance=w,N.state.loading=5),Ii.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Ii.set(s,f),w||P5(x,s,f,N.state))),l&&g===null)throw Error(r(528,""));return N}if(l&&g!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=xu(f),f=ya(x).hoistableScripts,g=f.get(l),g||(g={type:"script",instance:null,count:0,state:null},f.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function bu(s){return'href="'+Br(s)+'"'}function zf(s){return'link[rel="stylesheet"]['+s+"]"}function PC(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function P5(s,l,f,g){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=s.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),fr(l,"link",f),Nn(l),s.head.appendChild(l))}function xu(s){return'[src="'+Br(s)+'"]'}function Lf(s){return"script[async]"+s}function OC(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var g=s.querySelector('style[data-href~="'+Br(f.href)+'"]');if(g)return l.instance=g,Nn(g),g;var x=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(s.ownerDocument||s).createElement("style"),Nn(g),fr(g,"style",x),sm(g,f.precedence,s),l.instance=g;case"stylesheet":x=bu(f.href);var w=s.querySelector(zf(x));if(w)return l.state.loading|=4,l.instance=w,Nn(w),w;g=PC(f),(x=Ii.get(x))&&Zb(g,x),w=(s.ownerDocument||s).createElement("link"),Nn(w);var N=w;return N._p=new Promise(function(F,K){N.onload=F,N.onerror=K}),fr(w,"link",g),l.state.loading|=4,sm(w,f.precedence,s),l.instance=w;case"script":return w=xu(f.src),(x=s.querySelector(Lf(w)))?(l.instance=x,Nn(x),x):(g=f,(x=Ii.get(w))&&(g=p({},f),Jb(g,x)),s=s.ownerDocument||s,x=s.createElement("script"),Nn(x),fr(x,"link",g),s.head.appendChild(x),l.instance=x);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,sm(g,f.precedence,s));return l.instance}function sm(s,l,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=g.length?g[g.length-1]:null,w=x,N=0;N<g.length;N++){var F=g[N];if(F.dataset.precedence===l)w=F;else if(w!==x)break}w?w.parentNode.insertBefore(s,w.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function Zb(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Jb(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var om=null;function VC(s,l,f){if(om===null){var g=new Map,x=om=new Map;x.set(f,g)}else x=om,g=x.get(f),g||(g=new Map,x.set(f,g));if(g.has(s))return g;for(g.set(s,null),f=f.getElementsByTagName(s),x=0;x<f.length;x++){var w=f[x];if(!(w[ma]||w[kn]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var N=w.getAttribute(l)||"";N=s+N;var F=g.get(N);F?F.push(w):g.set(N,[w])}}return g}function jC(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function O5(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function zC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function V5(s,l,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var x=bu(g.href),w=l.querySelector(zf(x));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=lm.bind(s),l.then(s,s)),f.state.loading|=4,f.instance=w,Nn(w);return}w=l.ownerDocument||l,g=PC(g),(x=Ii.get(x))&&Zb(g,x),w=w.createElement("link"),Nn(w);var N=w;N._p=new Promise(function(F,K){N.onload=F,N.onerror=K}),fr(w,"link",g),f.instance=w}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=lm.bind(s),l.addEventListener("load",f),l.addEventListener("error",f))}}var e1=0;function j5(s,l){return s.stylesheets&&s.count===0&&um(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var g=setTimeout(function(){if(s.stylesheets&&um(s,s.stylesheets),s.unsuspend){var w=s.unsuspend;s.unsuspend=null,w()}},6e4+l);0<s.imgBytes&&e1===0&&(e1=62500*v5());var x=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&um(s,s.stylesheets),s.unsuspend)){var w=s.unsuspend;s.unsuspend=null,w()}},(s.imgBytes>e1?50:800)+l);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(g),clearTimeout(x)}}:null}function lm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)um(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var cm=null;function um(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,cm=new Map,l.forEach(z5,s),cm=null,lm.call(s))}function z5(s,l){if(!(l.state.loading&4)){var f=cm.get(s);if(f)var g=f.get(null);else{f=new Map,cm.set(s,f);for(var x=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<x.length;w++){var N=x[w];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(f.set(N.dataset.precedence,N),g=N)}g&&f.set(null,g)}x=l.instance,N=x.getAttribute("data-precedence"),w=f.get(N)||g,w===g&&f.set(null,x),f.set(N,x),this.count++,g=lm.bind(this),x.addEventListener("load",g),x.addEventListener("error",g),w?w.parentNode.insertBefore(x,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(x,s.firstChild)),l.state.loading|=4}}var Bf={$$typeof:D,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function L5(s,l,f,g,x,w,N,F,K){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lr(0),this.hiddenUpdates=Lr(null),this.identifierPrefix=g,this.onUncaughtError=x,this.onCaughtError=w,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function LC(s,l,f,g,x,w,N,F,K,ce,me,be){return s=new L5(s,l,f,N,K,ce,me,be,F),l=1,w===!0&&(l|=24),w=ai(3,null,null,l),s.current=w,w.stateNode=s,l=My(),l.refCount++,s.pooledCache=l,l.refCount++,w.memoizedState={element:g,isDehydrated:f,cache:l},jy(w),s}function BC(s){return s?(s=Qc,s):Qc}function UC(s,l,f,g,x,w){x=BC(x),g.context===null?g.context=x:g.pendingContext=x,g=ao(l),g.payload={element:f},w=w===void 0?null:w,w!==null&&(g.callback=w),f=so(s,g,l),f!==null&&($r(f,s,l),yf(f,s,l))}function FC(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function t1(s,l){FC(s,l),(s=s.alternate)&&FC(s,l)}function GC(s){if(s.tag===13||s.tag===31){var l=El(s,67108864);l!==null&&$r(l,s,67108864),t1(s,67108864)}}function qC(s){if(s.tag===13||s.tag===31){var l=ui();l=dl(l);var f=El(s,l);f!==null&&$r(f,s,l),t1(s,l)}}var dm=!0;function B5(s,l,f,g){var x=$.T;$.T=null;var w=H.p;try{H.p=2,n1(s,l,f,g)}finally{H.p=w,$.T=x}}function U5(s,l,f,g){var x=$.T;$.T=null;var w=H.p;try{H.p=8,n1(s,l,f,g)}finally{H.p=w,$.T=x}}function n1(s,l,f,g){if(dm){var x=r1(g);if(x===null)Fb(s,l,g,fm,f),$C(s,g);else if(G5(x,s,l,f,g))g.stopPropagation();else if($C(s,g),l&4&&-1<F5.indexOf(s)){for(;x!==null;){var w=vi(x);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var N=jt(w.pendingLanes);if(N!==0){var F=w;for(F.pendingLanes|=2,F.entangledLanes|=2;N;){var K=1<<31-Dt(N);F.entanglements[1]|=K,N&=~K}ka(w),(Nt&6)===0&&(Kg=mt()+500,Pf(0))}}break;case 31:case 13:F=El(w,2),F!==null&&$r(F,w,2),Wg(),t1(w,2)}if(w=r1(g),w===null&&Fb(s,l,g,fm,f),w===x)break;x=w}x!==null&&g.stopPropagation()}else Fb(s,l,g,null,f)}}function r1(s){return s=yi(s),i1(s)}var fm=null;function i1(s){if(fm=null,s=va(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===31){if(s=c(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return fm=s,null}function HC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vt()){case yr:return 2;case br:return 8;case ti:case qs:return 32;case Be:return 268435456;default:return 32}default:return 32}}var a1=!1,yo=null,bo=null,xo=null,Uf=new Map,Ff=new Map,_o=[],F5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $C(s,l){switch(s){case"focusin":case"focusout":yo=null;break;case"dragenter":case"dragleave":bo=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":Uf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ff.delete(l.pointerId)}}function Gf(s,l,f,g,x,w){return s===null||s.nativeEvent!==w?(s={blockedOn:l,domEventName:f,eventSystemFlags:g,nativeEvent:w,targetContainers:[x]},l!==null&&(l=vi(l),l!==null&&GC(l)),s):(s.eventSystemFlags|=g,l=s.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),s)}function G5(s,l,f,g,x){switch(l){case"focusin":return yo=Gf(yo,s,l,f,g,x),!0;case"dragenter":return bo=Gf(bo,s,l,f,g,x),!0;case"mouseover":return xo=Gf(xo,s,l,f,g,x),!0;case"pointerover":var w=x.pointerId;return Uf.set(w,Gf(Uf.get(w)||null,s,l,f,g,x)),!0;case"gotpointercapture":return w=x.pointerId,Ff.set(w,Gf(Ff.get(w)||null,s,l,f,g,x)),!0}return!1}function YC(s){var l=va(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,qi(s.priority,function(){qC(f)});return}}else if(l===31){if(l=c(f),l!==null){s.blockedOn=l,qi(s.priority,function(){qC(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function hm(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=r1(s.nativeEvent);if(f===null){f=s.nativeEvent;var g=new f.constructor(f.type,f);tf=g,f.target.dispatchEvent(g),tf=null}else return l=vi(f),l!==null&&GC(l),s.blockedOn=f,!1;l.shift()}return!0}function KC(s,l,f){hm(s)&&f.delete(l)}function q5(){a1=!1,yo!==null&&hm(yo)&&(yo=null),bo!==null&&hm(bo)&&(bo=null),xo!==null&&hm(xo)&&(xo=null),Uf.forEach(KC),Ff.forEach(KC)}function pm(s,l){s.blockedOn===l&&(s.blockedOn=null,a1||(a1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,q5)))}var gm=null;function XC(s){gm!==s&&(gm=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){gm===s&&(gm=null);for(var l=0;l<s.length;l+=3){var f=s[l],g=s[l+1],x=s[l+2];if(typeof g!="function"){if(i1(g||f)===null)continue;break}var w=vi(f);w!==null&&(s.splice(l,3),l-=3,rb(w,{pending:!0,data:x,method:f.method,action:g},g,x))}}))}function _u(s){function l(K){return pm(K,s)}yo!==null&&pm(yo,s),bo!==null&&pm(bo,s),xo!==null&&pm(xo,s),Uf.forEach(l),Ff.forEach(l);for(var f=0;f<_o.length;f++){var g=_o[f];g.blockedOn===s&&(g.blockedOn=null)}for(;0<_o.length&&(f=_o[0],f.blockedOn===null);)YC(f),f.blockedOn===null&&_o.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var x=f[g],w=f[g+1],N=x[tr]||null;if(typeof w=="function")N||XC(f);else if(N){var F=null;if(w&&w.hasAttribute("formAction")){if(x=w,N=w[tr]||null)F=N.formAction;else if(i1(x)!==null)continue}else F=N.action;typeof F=="function"?f[g+1]=F:(f.splice(g,3),g-=3),XC(f)}}}function WC(){function s(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(N){return x=N})},focusReset:"manual",scroll:"manual"})}function l(){x!==null&&(x(),x=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,x=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),x!==null&&(x(),x=null)}}}function s1(s){this._internalRoot=s}mm.prototype.render=s1.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,g=ui();UC(f,g,s,l,null,null)},mm.prototype.unmount=s1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;UC(s.current,2,null,s,null,null),Wg(),l[ga]=null}};function mm(s){this._internalRoot=s}mm.prototype.unstable_scheduleHydration=function(s){if(s){var l=Wp();s={blockedOn:null,target:s,priority:l};for(var f=0;f<_o.length&&l!==0&&l<_o[f].priority;f++);_o.splice(f,0,s),f===0&&YC(s)}};var QC=e.version;if(QC!=="19.2.0")throw Error(r(527,QC,"19.2.0"));H.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(l),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var H5={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vm.isDisabled&&vm.supportsFiber)try{qt=vm.inject(H5),Jt=vm}catch{}}return Hf.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,g="",x=iA,w=aA,N=sA;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=LC(s,1,!1,null,null,f,g,null,x,w,N,WC),s[ga]=l.current,Ub(s),new s1(l)},Hf.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var g=!1,x="",w=iA,N=aA,F=sA,K=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(N=f.onCaughtError),f.onRecoverableError!==void 0&&(F=f.onRecoverableError),f.formState!==void 0&&(K=f.formState)),l=LC(s,1,!0,l,f??null,g,x,K,w,N,F,WC),l.context=BC(null),f=l.current,g=ui(),g=dl(g),x=ao(g),x.callback=null,so(f,x,g),f=g,l.current.lanes=f,mi(l,f),ka(l),s[ga]=l.current,Ub(s),new mm(l)},Hf.version="19.2.0",Hf}var o2;function n6(){if(o2)return c1.exports;o2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),c1.exports=t6(),c1.exports}var r6=n6();const i6="modulepreload",a6=function(n){return"/personal-budget-pwa/"+n},l2={},on=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let d=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var o=d;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");i=d(t.map(h=>{if(h=a6(h),h in l2)return;l2[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":i6,p||(b.as="script"),b.crossOrigin="",b.href=h,u&&b.setAttribute("nonce",u),document.head.appendChild(b),p)return new Promise((_,E)=>{b.addEventListener("load",_),b.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function s6(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:o}=n;let c,u;const d=async(p=!0)=>{await u};async function h(){if("serviceWorker"in navigator){if(c=await on(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(p=>{o?.(p)}),!c)return;c.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),c.addEventListener("installed",p=>{p.isUpdate||r?.()}),c.register({immediate:e}).then(p=>{a?a("/personal-budget-pwa/sw.js",p):i?.(p)}).catch(p=>{o?.(p)})}}return u=h(),d}var c2="popstate";function o6(n={}){function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=Ic(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),dx("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof a=="string"?a:Nh(a))}function r(i,a){hi(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return c6(e,t,r,n)}function mn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function hi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function l6(){return Math.random().toString(36).substring(2,10)}function u2(n,e){return{usr:n.state,key:n.key,idx:e}}function dx(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ic(e):e,state:t,key:e&&e.key||r||l6()}}function Nh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ic(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function c6(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function p(){c="POP";let S=h(),T=S==null?null:S-d;d=S,u&&u({action:c,location:E.location,delta:T})}function m(S,T){c="PUSH";let I=dx(E.location,S,T);t&&t(I,S),d=h()+1;let D=u2(I,d),O=E.createHref(I);try{o.pushState(D,"",O)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(O)}a&&u&&u({action:c,location:E.location,delta:1})}function b(S,T){c="REPLACE";let I=dx(E.location,S,T);t&&t(I,S),d=h();let D=u2(I,d),O=E.createHref(I);o.replaceState(D,"",O),a&&u&&u({action:c,location:E.location,delta:0})}function _(S){return u6(S)}let E={get action(){return c},get location(){return n(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(c2,p),u=S,()=>{i.removeEventListener(c2,p),u=null}},createHref(S){return e(i,S)},createURL:_,encodeLocation(S){let T=_(S);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:m,replace:b,go(S){return o.go(S)}};return E}function u6(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),mn(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Nh(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function zk(n,e,t="/"){return d6(n,e,t,!1)}function d6(n,e,t,r){let i=typeof e=="string"?Ic(e):e,a=Ds(i.pathname||"/",t);if(a==null)return null;let o=Lk(n);f6(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=E6(a);c=_6(o[u],d,r)}return c}function Lk(n,e=[],t=[],r="",i=!1){let a=(o,c,u=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;mn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let p=Ts([r,h.relativePath]),m=t.concat(h);o.children&&o.children.length>0&&(mn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Lk(o.children,e,m,p,u)),!(o.path==null&&!o.index)&&e.push({path:p,score:b6(p,o.index),routesMeta:m})};return n.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of Bk(o.path))a(o,c,!0,u)}),e}function Bk(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=Bk(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function f6(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:x6(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var h6=/^:[\w-]+$/,p6=3,g6=2,m6=1,v6=10,y6=-2,d2=n=>n==="*";function b6(n,e){let t=n.split("/"),r=t.length;return t.some(d2)&&(r+=y6),e&&(r+=g6),t.filter(i=>!d2(i)).reduce((i,a)=>i+(h6.test(a)?p6:a===""?m6:v6),r)}function x6(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function _6(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",p=_0({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!p&&d&&t&&!r[r.length-1].route.index&&(p=_0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Ts([a,p.pathname]),pathnameBase:I6(Ts([a,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(a=Ts([a,p.pathnameBase]))}return o}function _0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=w6(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},m)=>{if(h==="*"){let _=c[m]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const b=c[m];return p&&!b?d[h]=void 0:d[h]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:n}}function w6(n,e=!1,t=!0){hi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function E6(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ds(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var S6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,T6=n=>S6.test(n);function A6(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ic(n):n,a;if(t)if(T6(t))a=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),hi(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${t}`)}t.startsWith("/")?a=f2(t.substring(1),"/"):a=f2(t,e)}else a=e;return{pathname:a,search:R6(r),hash:D6(i)}}function f2(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function h1(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function C6(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Uk(n){let e=C6(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Fk(n,e,t,r=!1){let i;typeof n=="string"?i=Ic(n):(i={...n},mn(!i.pathname||!i.pathname.includes("?"),h1("?","pathname","search",i)),mn(!i.pathname||!i.pathname.includes("#"),h1("#","pathname","hash",i)),mn(!i.search||!i.search.includes("#"),h1("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=t;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}c=p>=0?e[p]:"/"}let u=A6(i,c),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Ts=n=>n.join("/").replace(/\/\/+/g,"/"),I6=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),R6=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,D6=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function k6(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Gk=["POST","PUT","PATCH","DELETE"];new Set(Gk);var N6=["GET",...Gk];new Set(N6);var Rd=G.createContext(null);Rd.displayName="DataRouter";var mv=G.createContext(null);mv.displayName="DataRouterState";G.createContext(!1);var qk=G.createContext({isTransitioning:!1});qk.displayName="ViewTransition";var M6=G.createContext(new Map);M6.displayName="Fetchers";var P6=G.createContext(null);P6.displayName="Await";var Ka=G.createContext(null);Ka.displayName="Navigation";var dp=G.createContext(null);dp.displayName="Location";var Xa=G.createContext({outlet:null,matches:[],isDataRoute:!1});Xa.displayName="Route";var W_=G.createContext(null);W_.displayName="RouteError";function O6(n,{relative:e}={}){mn(fp(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=G.useContext(Ka),{hash:i,pathname:a,search:o}=hp(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:Ts([t,a])),r.createHref({pathname:c,search:o,hash:i})}function fp(){return G.useContext(dp)!=null}function Wa(){return mn(fp(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(dp).location}var Hk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $k(n){G.useContext(Ka).static||G.useLayoutEffect(n)}function Qa(){let{isDataRoute:n}=G.useContext(Xa);return n?X6():V6()}function V6(){mn(fp(),"useNavigate() may be used only in the context of a <Router> component.");let n=G.useContext(Rd),{basename:e,navigator:t}=G.useContext(Ka),{matches:r}=G.useContext(Xa),{pathname:i}=Wa(),a=JSON.stringify(Uk(r)),o=G.useRef(!1);return $k(()=>{o.current=!0}),G.useCallback((u,d={})=>{if(hi(o.current,Hk),!o.current)return;if(typeof u=="number"){t.go(u);return}let h=Fk(u,JSON.parse(a),i,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ts([e,h.pathname])),(d.replace?t.replace:t.push)(h,d.state,d)},[e,t,a,i,n])}G.createContext(null);function j6(){let{matches:n}=G.useContext(Xa),e=n[n.length-1];return e?e.params:{}}function hp(n,{relative:e}={}){let{matches:t}=G.useContext(Xa),{pathname:r}=Wa(),i=JSON.stringify(Uk(t));return G.useMemo(()=>Fk(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function z6(n,e){return Yk(n,e)}function Yk(n,e,t,r,i){mn(fp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=G.useContext(Ka),{matches:o}=G.useContext(Xa),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",p=c&&c.route;{let I=p&&p.path||"";Kk(d,!p||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let m=Wa(),b;if(e){let I=typeof e=="string"?Ic(e):e;mn(h==="/"||I.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${I.pathname}" was given in the \`location\` prop.`),b=I}else b=m;let _=b.pathname||"/",E=_;if(h!=="/"){let I=h.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(I.length).join("/")}let S=zk(n,{pathname:E});hi(p||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),hi(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=G6(S&&S.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:Ts([h,a.encodeLocation?a.encodeLocation(I.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?h:Ts([h,a.encodeLocation?a.encodeLocation(I.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathnameBase])})),o,t,r,i);return e&&T?G.createElement(dp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},T):T}function L6(){let n=K6(),e=k6(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=G.createElement(G.Fragment,null,G.createElement("p",null," Hey developer "),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:a},"ErrorBoundary")," or"," ",G.createElement("code",{style:a},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:i},t):null,o)}var B6=G.createElement(L6,null),U6=class extends G.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?G.createElement(Xa.Provider,{value:this.props.routeContext},G.createElement(W_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function F6({routeContext:n,match:e,children:t}){let r=G.useContext(Rd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),G.createElement(Xa.Provider,{value:n},t)}function G6(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t?.errors;if(o!=null){let h=a.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);mn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(t)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:m,errors:b}=t,_=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||_){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let d=t&&r?(h,p)=>{r(h,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:p})}:void 0;return a.reduceRight((h,p,m)=>{let b,_=!1,E=null,S=null;t&&(b=o&&p.route.id?o[p.route.id]:void 0,E=p.route.errorElement||B6,c&&(u<0&&m===0?(Kk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,S=null):u===m&&(_=!0,S=p.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,m+1)),I=()=>{let D;return b?D=E:_?D=S:p.route.Component?D=G.createElement(p.route.Component,null):p.route.element?D=p.route.element:D=h,G.createElement(F6,{match:p,routeContext:{outlet:h,matches:T,isDataRoute:t!=null},children:D})};return t&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?G.createElement(U6,{location:t.location,revalidation:t.revalidation,component:E,error:b,children:I(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:d}):I()},null)}function Q_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q6(n){let e=G.useContext(Rd);return mn(e,Q_(n)),e}function H6(n){let e=G.useContext(mv);return mn(e,Q_(n)),e}function $6(n){let e=G.useContext(Xa);return mn(e,Q_(n)),e}function Z_(n){let e=$6(n),t=e.matches[e.matches.length-1];return mn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Y6(){return Z_("useRouteId")}function K6(){let n=G.useContext(W_),e=H6("useRouteError"),t=Z_("useRouteError");return n!==void 0?n:e.errors?.[t]}function X6(){let{router:n}=q6("useNavigate"),e=Z_("useNavigate"),t=G.useRef(!1);return $k(()=>{t.current=!0}),G.useCallback(async(i,a={})=>{hi(t.current,Hk),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var h2={};function Kk(n,e,t){!e&&!h2[n]&&(h2[n]=!0,hi(!1,t))}G.memo(W6);function W6({routes:n,future:e,state:t,unstable_onError:r}){return Yk(n,void 0,t,r,e)}function xs(n){mn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Q6({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){mn(!fp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),c=G.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=Ic(t));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:m="default"}=t,b=G.useMemo(()=>{let _=Ds(u,o);return _==null?null:{location:{pathname:_,search:d,hash:h,state:p,key:m},navigationType:r}},[o,u,d,h,p,m,r]);return hi(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:G.createElement(Ka.Provider,{value:c},G.createElement(dp.Provider,{children:e,value:b}))}function Z6({children:n,location:e}){return z6(fx(n),e)}function fx(n,e=[]){let t=[];return G.Children.forEach(n,(r,i)=>{if(!G.isValidElement(r))return;let a=[...e,i];if(r.type===G.Fragment){t.push.apply(t,fx(r.props.children,a));return}mn(r.type===xs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=fx(r.props.children,a)),t.push(o)}),t}var Xm="get",Wm="application/x-www-form-urlencoded";function vv(n){return n!=null&&typeof n.tagName=="string"}function J6(n){return vv(n)&&n.tagName.toLowerCase()==="button"}function ez(n){return vv(n)&&n.tagName.toLowerCase()==="form"}function tz(n){return vv(n)&&n.tagName.toLowerCase()==="input"}function nz(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function rz(n,e){return n.button===0&&(!e||e==="_self")&&!nz(n)}function hx(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function iz(n,e){let t=hx(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}var bm=null;function az(){if(bm===null)try{new FormData(document.createElement("form"),0),bm=!1}catch{bm=!0}return bm}var sz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function p1(n){return n!=null&&!sz.has(n)?(hi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wm}"`),null):n}function oz(n,e){let t,r,i,a,o;if(ez(n)){let c=n.getAttribute("action");r=c?Ds(c,e):null,t=n.getAttribute("method")||Xm,i=p1(n.getAttribute("enctype"))||Wm,a=new FormData(n)}else if(J6(n)||tz(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||c.getAttribute("action");if(r=u?Ds(u,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Xm,i=p1(n.getAttribute("formenctype"))||p1(c.getAttribute("enctype"))||Wm,a=new FormData(c,n),!az()){let{name:d,type:h,value:p}=n;if(h==="image"){let m=d?`${d}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else d&&a.append(d,p)}}else{if(vv(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Xm,r=null,i=Wm,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function J_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function lz(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Ds(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function cz(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uz(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function dz(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await cz(a,t);return o.links?o.links():[]}return[]}));return gz(r.flat(1).filter(uz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function p2(n,e,t,r,i,a){let o=(u,d)=>t[d]?u.route.id!==t[d].route.id:!0,c=(u,d)=>t[d].pathname!==u.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):a==="data"?e.filter((u,d)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function fz(n,e,{includeHydrateFallback:t}={}){return hz(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function hz(n){return[...new Set(n)]}function pz(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function gz(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(pz(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function Xk(){let n=G.useContext(Rd);return J_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function mz(){let n=G.useContext(mv);return J_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ew=G.createContext(void 0);ew.displayName="FrameworkContext";function Wk(){let n=G.useContext(ew);return J_(n,"You must render this element inside a <HydratedRouter> element"),n}function vz(n,e){let t=G.useContext(ew),[r,i]=G.useState(!1),[a,o]=G.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,m=G.useRef(null);G.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let E=T=>{T.forEach(I=>{o(I.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return m.current&&S.observe(m.current),()=>{S.disconnect()}}},[n]),G.useEffect(()=>{if(r){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[r]);let b=()=>{i(!0)},_=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,m,{}]:[a,m,{onFocus:$f(c,b),onBlur:$f(u,_),onMouseEnter:$f(d,b),onMouseLeave:$f(h,_),onTouchStart:$f(p,b)}]:[!1,m,{}]}function $f(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function yz({page:n,...e}){let{router:t}=Xk(),r=G.useMemo(()=>zk(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?G.createElement(xz,{page:n,matches:r,...e}):null}function bz(n){let{manifest:e,routeModules:t}=Wk(),[r,i]=G.useState([]);return G.useEffect(()=>{let a=!1;return dz(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function xz({page:n,matches:e,...t}){let r=Wa(),{manifest:i,routeModules:a}=Wk(),{basename:o}=Xk(),{loaderData:c,matches:u}=mz(),d=G.useMemo(()=>p2(n,e,u,i,r,"data"),[n,e,u,i,r]),h=G.useMemo(()=>p2(n,e,u,i,r,"assets"),[n,e,u,i,r]),p=G.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let _=new Set,E=!1;if(e.forEach(T=>{let I=i.routes[T.route.id];!I||!I.hasLoader||(!d.some(D=>D.route.id===T.route.id)&&T.route.id in c&&a[T.route.id]?.shouldRevalidate||I.hasClientLoader?E=!0:_.add(T.route.id))}),_.size===0)return[];let S=lz(n,o,"data");return E&&_.size>0&&S.searchParams.set("_routes",e.filter(T=>_.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[o,c,r,i,d,e,n,a]),m=G.useMemo(()=>fz(h,i),[h,i]),b=bz(h);return G.createElement(G.Fragment,null,p.map(_=>G.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...t})),m.map(_=>G.createElement("link",{key:_,rel:"modulepreload",href:_,...t})),b.map(({key:_,link:E})=>G.createElement("link",{key:_,nonce:t.nonce,...E})))}function _z(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Qk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Qk&&(window.__reactRouterVersion="7.9.6")}catch{}function wz({basename:n,children:e,window:t}){let r=G.useRef();r.current==null&&(r.current=o6({window:t,v5Compat:!0}));let i=r.current,[a,o]=G.useState({action:i.action,location:i.location}),c=G.useCallback(u=>{G.startTransition(()=>o(u))},[o]);return G.useLayoutEffect(()=>i.listen(c),[i,c]),G.createElement(Q6,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var Zk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jk=G.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:p,...m},b){let{basename:_}=G.useContext(Ka),E=typeof d=="string"&&Zk.test(d),S,T=!1;if(typeof d=="string"&&E&&(S=d,Qk))try{let k=new URL(window.location.href),P=d.startsWith("//")?new URL(k.protocol+d):new URL(d),L=Ds(P.pathname,_);P.origin===k.origin&&L!=null?d=L+P.search+P.hash:T=!0}catch{hi(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=O6(d,{relative:i}),[D,O,z]=vz(r,m),j=Az(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:p});function C(k){e&&e(k),k.defaultPrevented||j(k)}let A=G.createElement("a",{...m,...z,href:S||I,onClick:T||a?e:C,ref:_z(b,O),target:u,"data-discover":!E&&t==="render"?"true":void 0});return D&&!E?G.createElement(G.Fragment,null,A,G.createElement(yz,{page:I})):A});Jk.displayName="Link";var Ez=G.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...d},h){let p=hp(o,{relative:d.relative}),m=Wa(),b=G.useContext(mv),{navigator:_,basename:E}=G.useContext(Ka),S=b!=null&&Nz(p)&&c===!0,T=_.encodeLocation?_.encodeLocation(p).pathname:p.pathname,I=m.pathname,D=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(I=I.toLowerCase(),D=D?D.toLowerCase():null,T=T.toLowerCase()),D&&E&&(D=Ds(D,E)||D);const O=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let z=I===T||!i&&I.startsWith(T)&&I.charAt(O)==="/",j=D!=null&&(D===T||!i&&D.startsWith(T)&&D.charAt(T.length)==="/"),C={isActive:z,isPending:j,isTransitioning:S},A=z?e:void 0,k;typeof r=="function"?k=r(C):k=[r,z?"active":null,j?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(C):a;return G.createElement(Jk,{...d,"aria-current":A,className:k,ref:h,style:P,to:o,viewTransition:c},typeof u=="function"?u(C):u)});Ez.displayName="NavLink";var Sz=G.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=Xm,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:p,...m},b)=>{let _=Dz(),E=kz(c,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",T=typeof c=="string"&&Zk.test(c),I=D=>{if(u&&u(D),D.defaultPrevented)return;D.preventDefault();let O=D.nativeEvent.submitter,z=O?.getAttribute("formmethod")||o;_(O||D.currentTarget,{fetcherKey:e,method:z,navigate:t,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:p})};return G.createElement("form",{ref:b,method:S,action:E,onSubmit:r?u:I,...m,"data-discover":!T&&n==="render"?"true":void 0})});Sz.displayName="Form";function Tz(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eN(n){let e=G.useContext(Rd);return mn(e,Tz(n)),e}function Az(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=Qa(),u=Wa(),d=hp(n,{relative:a});return G.useCallback(h=>{if(rz(h,e)){h.preventDefault();let p=t!==void 0?t:Nh(u)===Nh(d);c(n,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,d,t,r,e,n,i,a,o])}function Cz(n){hi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=G.useRef(hx(n)),t=G.useRef(!1),r=Wa(),i=G.useMemo(()=>iz(r.search,t.current?null:e.current),[r.search]),a=Qa(),o=G.useCallback((c,u)=>{const d=hx(typeof c=="function"?c(new URLSearchParams(i)):c);t.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var Iz=0,Rz=()=>`__${String(++Iz)}__`;function Dz(){let{router:n}=eN("useSubmit"),{basename:e}=G.useContext(Ka),t=Y6();return G.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:d}=oz(r,e);if(i.navigate===!1){let h=i.fetcherKey||Rz();await n.fetch(h,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function kz(n,{relative:e}={}){let{basename:t}=G.useContext(Ka),r=G.useContext(Xa);mn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...hp(n||".",{relative:e})},o=Wa();if(n==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let h=c.toString();a.search=h?`?${h}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Ts([t,a.pathname])),Nh(a)}function Nz(n,{relative:e}={}){let t=G.useContext(qk);mn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=eN("useViewTransitionState"),i=hp(n,{relative:e});if(!t.isTransitioning)return!1;let a=Ds(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Ds(t.nextLocation.pathname,r)||t.nextLocation.pathname;return _0(i.pathname,o)!=null||_0(i.pathname,a)!=null}const Mz=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pz=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),g2=n=>{const e=Pz(n);return e.charAt(0).toUpperCase()+e.slice(1)},tN=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Oz=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Vz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const jz=G.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>G.createElement("svg",{ref:u,...Vz,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:tN("lucide",i),...!a&&!Oz(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>G.createElement(d,h)),...Array.isArray(a)?a:[a]]));const tt=(n,e)=>{const t=G.forwardRef(({className:r,...i},a)=>G.createElement(jz,{ref:a,iconNode:e,className:tN(`lucide-${Mz(g2(n))}`,`lucide-${n}`,r),...i}));return t.displayName=g2(n),t};const zz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Mh=tt("arrow-left",zz);const Lz=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Bz=tt("arrow-right-left",Lz);const Uz=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Fz=tt("check",Uz);const Gz=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],nN=tt("chevron-down",Gz);const qz=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Hz=tt("chevron-left",qz);const $z=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],zl=tt("chevron-right",$z);const Yz=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Kz=tt("chevron-up",Yz);const Xz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],Wz=tt("circle-arrow-down",Xz);const Qz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],Zz=tt("circle-arrow-up",Qz);const Jz=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],w0=tt("circle-check-big",Jz);const eL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],m2=tt("circle-check",eL);const tL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],xm=tt("circle-plus",tL);const nL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],v2=tt("circle-question-mark",nL);const rL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],y2=tt("circle",rL);const iL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],aL=tt("copy",iL);const sL=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],b2=tt("download",sL);const oL=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],lL=tt("eye-off",oL);const cL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],uL=tt("eye",cL);const dL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],fL=tt("file-text",dL);const hL=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],pL=tt("folder-plus",hL);const gL=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],mL=tt("funnel",gL);const vL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],yL=tt("house",vL);const bL=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],xL=tt("list",bL);const _L=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wL=tt("loader-circle",_L);const EL=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],x2=tt("loader",EL);const SL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],TL=tt("lock-open",SL);const AL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],CL=tt("lock",AL);const IL=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],RL=tt("log-out",IL);const DL=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],px=tt("mail",DL);const kL=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],NL=tt("pause",kL);const ML=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Ph=tt("piggy-bank",ML);const PL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],nc=tt("refresh-cw",PL);const OL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],VL=tt("search",OL);const jL=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rN=tt("settings",jL);const zL=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],LL=tt("sparkles",zL);const BL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],UL=tt("target",BL);const FL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],gx=tt("trash-2",FL);const GL=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],iN=tt("trash",GL);const qL=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],HL=tt("trending-down",qL);const $L=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],YL=tt("trending-up",$L);const KL=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ku=tt("triangle-alert",KL);const XL=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],WL=tt("undo-2",XL);const QL=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ZL=tt("upload",QL);const JL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],e9=tt("user-plus",JL);const t9=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],tw=tt("wallet",t9);const n9=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],r9=tt("wifi-off",n9);const i9=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],a9=tt("wifi",i9);const s9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yv=tt("x",s9),nw=G.createContext({});function bv(n){const e=G.useRef(null);return e.current===null&&(e.current=n()),e.current}const rw=typeof window<"u",iw=rw?G.useLayoutEffect:G.useEffect,xv=G.createContext(null);function aw(n,e){n.indexOf(e)===-1&&n.push(e)}function sw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ks=(n,e,t)=>t>e?e:t<n?n:t;let ow=()=>{};const Ns={},aN=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function sN(n){return typeof n=="object"&&n!==null}const oN=n=>/^0[^.\s]+$/u.test(n);function lw(n){let e;return()=>(e===void 0&&(e=n()),e)}const ji=n=>n,o9=(n,e)=>t=>e(n(t)),pp=(...n)=>n.reduce(o9),Oh=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class cw{constructor(){this.subscriptions=[]}add(e){return aw(this.subscriptions,e),()=>sw(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ja=n=>n*1e3,Oi=n=>n/1e3;function lN(n,e){return e?n*(1e3/e):0}const cN=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,l9=1e-7,c9=12;function u9(n,e,t,r,i){let a,o,c=0;do o=e+(t-e)/2,a=cN(o,r,i)-n,a>0?t=o:e=o;while(Math.abs(a)>l9&&++c<c9);return o}function gp(n,e,t,r){if(n===e&&t===r)return ji;const i=a=>u9(a,0,1,n,t);return a=>a===0||a===1?a:cN(i(a),e,r)}const uN=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,dN=n=>e=>1-n(1-e),fN=gp(.33,1.53,.69,.99),uw=dN(fN),hN=uN(uw),pN=n=>(n*=2)<1?.5*uw(n):.5*(2-Math.pow(2,-10*(n-1))),dw=n=>1-Math.sin(Math.acos(n)),gN=dN(dw),mN=uN(dw),d9=gp(.42,0,1,1),f9=gp(0,0,.58,1),vN=gp(.42,0,.58,1),h9=n=>Array.isArray(n)&&typeof n[0]!="number",yN=n=>Array.isArray(n)&&typeof n[0]=="number",p9={linear:ji,easeIn:d9,easeInOut:vN,easeOut:f9,circIn:dw,circInOut:mN,circOut:gN,backIn:uw,backInOut:hN,backOut:fN,anticipate:pN},g9=n=>typeof n=="string",_2=n=>{if(yN(n)){ow(n.length===4);const[e,t,r,i]=n;return gp(e,t,r,i)}else if(g9(n))return p9[n];return n},_m=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function m9(n,e){let t=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),n()),h(c)}const d={schedule:(h,p=!1,m=!1)=>{const _=m&&i?t:r;return p&&o.add(h),_.has(h)||_.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(c=h,i){a=!0;return}i=!0,[t,r]=[r,t],t.forEach(u),t.clear(),i=!1,a&&(a=!1,d.process(h))}};return d}const v9=40;function bN(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,o=_m.reduce((D,O)=>(D[O]=m9(a),D),{}),{setup:c,read:u,resolveKeyframes:d,preUpdate:h,update:p,preRender:m,render:b,postRender:_}=o,E=()=>{const D=Ns.useManualTiming?i.timestamp:performance.now();t=!1,Ns.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(D-i.timestamp,v9),1)),i.timestamp=D,i.isProcessing=!0,c.process(i),u.process(i),d.process(i),h.process(i),p.process(i),m.process(i),b.process(i),_.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(E))},S=()=>{t=!0,r=!0,i.isProcessing||n(E)};return{schedule:_m.reduce((D,O)=>{const z=o[O];return D[O]=(j,C=!1,A=!1)=>(t||S(),z.schedule(j,C,A)),D},{}),cancel:D=>{for(let O=0;O<_m.length;O++)o[_m[O]].cancel(D)},state:i,steps:o}}const{schedule:cn,cancel:Yo,state:pr,steps:g1}=bN(typeof requestAnimationFrame<"u"?requestAnimationFrame:ji,!0);let Qm;function y9(){Qm=void 0}const Kr={now:()=>(Qm===void 0&&Kr.set(pr.isProcessing||Ns.useManualTiming?pr.timestamp:performance.now()),Qm),set:n=>{Qm=n,queueMicrotask(y9)}},xN=n=>e=>typeof e=="string"&&e.startsWith(n),fw=xN("--"),b9=xN("var(--"),hw=n=>b9(n)?x9.test(n.split("/*")[0].trim()):!1,x9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Dd={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Vh={...Dd,transform:n=>ks(0,1,n)},wm={...Dd,default:1},dh=n=>Math.round(n*1e5)/1e5,pw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function _9(n){return n==null}const w9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gw=(n,e)=>t=>!!(typeof t=="string"&&w9.test(t)&&t.startsWith(n)||e&&!_9(t)&&Object.prototype.hasOwnProperty.call(t,e)),_N=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match(pw);return{[n]:parseFloat(i),[e]:parseFloat(a),[t]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},E9=n=>ks(0,255,n),m1={...Dd,transform:n=>Math.round(E9(n))},Ql={test:gw("rgb","red"),parse:_N("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+m1.transform(n)+", "+m1.transform(e)+", "+m1.transform(t)+", "+dh(Vh.transform(r))+")"};function S9(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const mx={test:gw("#"),parse:S9,transform:Ql.transform},mp=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ro=mp("deg"),za=mp("%"),et=mp("px"),T9=mp("vh"),A9=mp("vw"),w2={...za,parse:n=>za.parse(n)/100,transform:n=>za.transform(n*100)},Ou={test:gw("hsl","hue"),parse:_N("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+za.transform(dh(e))+", "+za.transform(dh(t))+", "+dh(Vh.transform(r))+")"},Bn={test:n=>Ql.test(n)||mx.test(n)||Ou.test(n),parse:n=>Ql.test(n)?Ql.parse(n):Ou.test(n)?Ou.parse(n):mx.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Ql.transform(n):Ou.transform(n),getAnimatableNone:n=>{const e=Bn.parse(n);return e.alpha=0,Bn.transform(e)}},C9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function I9(n){return isNaN(n)&&typeof n=="string"&&(n.match(pw)?.length||0)+(n.match(C9)?.length||0)>0}const wN="number",EN="color",R9="var",D9="var(",E2="${}",k9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jh(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(k9,u=>(Bn.test(u)?(r.color.push(a),i.push(EN),t.push(Bn.parse(u))):u.startsWith(D9)?(r.var.push(a),i.push(R9),t.push(u)):(r.number.push(a),i.push(wN),t.push(parseFloat(u))),++a,E2)).split(E2);return{values:t,split:c,indexes:r,types:i}}function SN(n){return jh(n).values}function TN(n){const{split:e,types:t}=jh(n),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const c=t[o];c===wN?a+=dh(i[o]):c===EN?a+=Bn.transform(i[o]):a+=i[o]}return a}}const N9=n=>typeof n=="number"?0:Bn.test(n)?Bn.getAnimatableNone(n):n;function M9(n){const e=SN(n);return TN(n)(e.map(N9))}const Ko={test:I9,parse:SN,createTransformer:TN,getAnimatableNone:M9};function v1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function P9({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,a=0,o=0;if(!e)i=a=o=t;else{const c=t<.5?t*(1+e):t+e-t*e,u=2*t-c;i=v1(u,c,n+1/3),a=v1(u,c,n),o=v1(u,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function E0(n,e){return t=>t>0?e:n}const pn=(n,e,t)=>n+(e-n)*t,y1=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},O9=[mx,Ql,Ou],V9=n=>O9.find(e=>e.test(n));function S2(n){const e=V9(n);if(!e)return!1;let t=e.parse(n);return e===Ou&&(t=P9(t)),t}const T2=(n,e)=>{const t=S2(n),r=S2(e);if(!t||!r)return E0(n,e);const i={...t};return a=>(i.red=y1(t.red,r.red,a),i.green=y1(t.green,r.green,a),i.blue=y1(t.blue,r.blue,a),i.alpha=pn(t.alpha,r.alpha,a),Ql.transform(i))},vx=new Set(["none","hidden"]);function j9(n,e){return vx.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function z9(n,e){return t=>pn(n,e,t)}function mw(n){return typeof n=="number"?z9:typeof n=="string"?hw(n)?E0:Bn.test(n)?T2:U9:Array.isArray(n)?AN:typeof n=="object"?Bn.test(n)?T2:L9:E0}function AN(n,e){const t=[...n],r=t.length,i=n.map((a,o)=>mw(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)t[o]=i[o](a);return t}}function L9(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=mw(n[i])(n[i],e[i]));return i=>{for(const a in r)t[a]=r[a](i);return t}}function B9(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=n.indexes[a][r[a]],c=n.values[o]??0;t[i]=c,r[a]++}return t}const U9=(n,e)=>{const t=Ko.createTransformer(e),r=jh(n),i=jh(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?vx.has(n)&&!i.values.length||vx.has(e)&&!r.values.length?j9(n,e):pp(AN(B9(r,i),i.values),t):E0(n,e)};function CN(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?pn(n,e,t):mw(n)(n,e)}const F9=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>cn.update(e,t),stop:()=>Yo(e),now:()=>pr.isProcessing?pr.timestamp:Kr.now()}},IN=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let a=0;a<i;a++)r+=Math.round(n(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},S0=2e4;function vw(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<S0;)e+=t,r=n.next(e);return e>=S0?1/0:e}function G9(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(vw(r),S0);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Oi(i)}}const q9=5;function RN(n,e,t){const r=Math.max(e-q9,0);return lN(t-n(r),e-r)}const xn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},b1=.001;function H9({duration:n=xn.duration,bounce:e=xn.bounce,velocity:t=xn.velocity,mass:r=xn.mass}){let i,a,o=1-e;o=ks(xn.minDamping,xn.maxDamping,o),n=ks(xn.minDuration,xn.maxDuration,Oi(n)),o<1?(i=d=>{const h=d*o,p=h*n,m=h-t,b=yx(d,o),_=Math.exp(-p);return b1-m/b*_},a=d=>{const p=d*o*n,m=p*t+t,b=Math.pow(o,2)*Math.pow(d,2)*n,_=Math.exp(-p),E=yx(Math.pow(d,2),o);return(-i(d)+b1>0?-1:1)*((m-b)*_)/E}):(i=d=>{const h=Math.exp(-d*n),p=(d-t)*n+1;return-b1+h*p},a=d=>{const h=Math.exp(-d*n),p=(t-d)*(n*n);return h*p});const c=5/n,u=Y9(i,a,c);if(n=ja(n),isNaN(u))return{stiffness:xn.stiffness,damping:xn.damping,duration:n};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:n}}}const $9=12;function Y9(n,e,t){let r=t;for(let i=1;i<$9;i++)r=r-n(r)/e(r);return r}function yx(n,e){return n*Math.sqrt(1-e*e)}const K9=["duration","bounce"],X9=["stiffness","damping","mass"];function A2(n,e){return e.some(t=>n[t]!==void 0)}function W9(n){let e={velocity:xn.velocity,stiffness:xn.stiffness,damping:xn.damping,mass:xn.mass,isResolvedFromDuration:!1,...n};if(!A2(n,X9)&&A2(n,K9))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,a=2*ks(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:xn.mass,stiffness:i,damping:a}}else{const t=H9(n);e={...e,...t,mass:xn.mass},e.isResolvedFromDuration=!0}return e}function T0(n=xn.visualDuration,e=xn.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const a=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:d,mass:h,duration:p,velocity:m,isResolvedFromDuration:b}=W9({...t,velocity:-Oi(t.velocity||0)}),_=m||0,E=d/(2*Math.sqrt(u*h)),S=o-a,T=Oi(Math.sqrt(u/h)),I=Math.abs(S)<5;r||(r=I?xn.restSpeed.granular:xn.restSpeed.default),i||(i=I?xn.restDelta.granular:xn.restDelta.default);let D;if(E<1){const z=yx(T,E);D=j=>{const C=Math.exp(-E*T*j);return o-C*((_+E*T*S)/z*Math.sin(z*j)+S*Math.cos(z*j))}}else if(E===1)D=z=>o-Math.exp(-T*z)*(S+(_+T*S)*z);else{const z=T*Math.sqrt(E*E-1);D=j=>{const C=Math.exp(-E*T*j),A=Math.min(z*j,300);return o-C*((_+E*T*S)*Math.sinh(A)+z*S*Math.cosh(A))/z}}const O={calculatedDuration:b&&p||null,next:z=>{const j=D(z);if(b)c.done=z>=p;else{let C=z===0?_:0;E<1&&(C=z===0?ja(_):RN(D,z,j));const A=Math.abs(C)<=r,k=Math.abs(o-j)<=i;c.done=A&&k}return c.value=c.done?o:j,c},toString:()=>{const z=Math.min(vw(O),S0),j=IN(C=>O.next(z*C).value,z,30);return z+"ms "+j},toTransition:()=>{}};return O}T0.applyToOptions=n=>{const e=G9(n,100,T0);return n.ease=e.ease,n.duration=ja(e.duration),n.type="keyframes",n};function bx({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:d=.5,restSpeed:h}){const p=n[0],m={done:!1,value:p},b=A=>c!==void 0&&A<c||u!==void 0&&A>u,_=A=>c===void 0?u:u===void 0||Math.abs(c-A)<Math.abs(u-A)?c:u;let E=t*e;const S=p+E,T=o===void 0?S:o(S);T!==S&&(E=T-p);const I=A=>-E*Math.exp(-A/r),D=A=>T+I(A),O=A=>{const k=I(A),P=D(A);m.done=Math.abs(k)<=d,m.value=m.done?T:P};let z,j;const C=A=>{b(m.value)&&(z=A,j=T0({keyframes:[m.value,_(m.value)],velocity:RN(D,A,m.value),damping:i,stiffness:a,restDelta:d,restSpeed:h}))};return C(0),{calculatedDuration:null,next:A=>{let k=!1;return!j&&z===void 0&&(k=!0,O(A),C(A)),z!==void 0&&A>=z?j.next(A-z):(!k&&O(A),m)}}}function Q9(n,e,t){const r=[],i=t||Ns.mix||CN,a=n.length-1;for(let o=0;o<a;o++){let c=i(n[o],n[o+1]);if(e){const u=Array.isArray(e)?e[o]||ji:e;c=pp(u,c)}r.push(c)}return r}function Z9(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const a=n.length;if(ow(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=Q9(e,r,i),u=c.length,d=h=>{if(o&&h<n[0])return e[0];let p=0;if(u>1)for(;p<n.length-2&&!(h<n[p+1]);p++);const m=Oh(n[p],n[p+1],h);return c[p](m)};return t?h=>d(ks(n[0],n[a-1],h)):d}function J9(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Oh(0,e,r);n.push(pn(t,1,i))}}function eB(n){const e=[0];return J9(e,n.length-1),e}function tB(n,e){return n.map(t=>t*e)}function nB(n,e){return n.map(()=>e||vN).splice(0,n.length-1)}function fh({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=h9(r)?r.map(_2):_2(r),a={done:!1,value:e[0]},o=tB(t&&t.length===e.length?t:eB(e),n),c=Z9(o,e,{ease:Array.isArray(i)?i:nB(e,i)});return{calculatedDuration:n,next:u=>(a.value=c(u),a.done=u>=n,a)}}const rB=n=>n!==null;function yw(n,{repeat:e,repeatType:t="loop"},r,i=1){const a=n.filter(rB),c=i<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const iB={decay:bx,inertia:bx,tween:fh,keyframes:fh,spring:T0};function DN(n){typeof n.type=="string"&&(n.type=iB[n.type])}class bw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const aB=n=>n/100;class xw extends bw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Kr.now()&&this.tick(Kr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;DN(e);const{type:t=fh,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=e;let{keyframes:c}=e;const u=t||fh;u!==fh&&typeof c[0]!="number"&&(this.mixKeyframes=pp(aB,CN(c[0],c[1])),c=[0,100]);const d=u({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=vw(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:m,repeatDelay:b,type:_,onUpdate:E,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const T=this.currentTime-d*(this.playbackSpeed>=0?1:-1),I=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let D=this.currentTime,O=r;if(p){const A=Math.min(this.currentTime,i)/c;let k=Math.floor(A),P=A%1;!P&&A>=1&&(P=1),P===1&&k--,k=Math.min(k,p+1),!!(k%2)&&(m==="reverse"?(P=1-P,b&&(P-=b/c)):m==="mirror"&&(O=o)),D=ks(0,1,P)*c}const z=I?{done:!1,value:h[0]}:O.next(D);a&&(z.value=a(z.value));let{done:j}=z;!I&&u!==null&&(j=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return C&&_!==bx&&(z.value=yw(h,this.options,S,this.speed)),E&&E(z.value),C&&this.finish(),z}then(e,t){return this.finished.then(e,t)}get duration(){return Oi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Oi(e)}get time(){return Oi(this.currentTime)}set time(e){e=ja(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Kr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Oi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=F9,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Kr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function sB(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Zl=n=>n*180/Math.PI,xx=n=>{const e=Zl(Math.atan2(n[1],n[0]));return _x(e)},oB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:xx,rotateZ:xx,skewX:n=>Zl(Math.atan(n[1])),skewY:n=>Zl(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},_x=n=>(n=n%360,n<0&&(n+=360),n),C2=xx,I2=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),R2=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),lB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:I2,scaleY:R2,scale:n=>(I2(n)+R2(n))/2,rotateX:n=>_x(Zl(Math.atan2(n[6],n[5]))),rotateY:n=>_x(Zl(Math.atan2(-n[2],n[0]))),rotateZ:C2,rotate:C2,skewX:n=>Zl(Math.atan(n[4])),skewY:n=>Zl(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function wx(n){return n.includes("scale")?1:0}function Ex(n,e){if(!n||n==="none")return wx(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=lB,i=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=oB,i=c}if(!i)return wx(e);const a=r[e],o=i[1].split(",").map(uB);return typeof a=="function"?a(o):o[a]}const cB=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Ex(t,e)};function uB(n){return parseFloat(n.trim())}const kd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Nd=new Set(kd),D2=n=>n===Dd||n===et,dB=new Set(["x","y","z"]),fB=kd.filter(n=>!dB.has(n));function hB(n){const e=[];return fB.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const rc={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Ex(e,"x"),y:(n,{transform:e})=>Ex(e,"y")};rc.translateX=rc.x;rc.translateY=rc.y;const ic=new Set;let Sx=!1,Tx=!1,Ax=!1;function kN(){if(Tx){const n=Array.from(ic).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=hB(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([a,o])=>{r.getValue(a)?.set(o)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Tx=!1,Sx=!1,ic.forEach(n=>n.complete(Ax)),ic.clear()}function NN(){ic.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Tx=!0)})}function pB(){Ax=!0,NN(),kN(),Ax=!1}class _w{constructor(e,t,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ic.add(this),Sx||(Sx=!0,cn.read(NN),cn.resolveKeyframes(kN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const c=r.readValue(t,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}sB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ic.delete(this)}cancel(){this.state==="scheduled"&&(ic.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const gB=n=>n.startsWith("--");function mB(n,e,t){gB(e)?n.style.setProperty(e,t):n.style[e]=t}const vB=lw(()=>window.ScrollTimeline!==void 0),yB={};function bB(n,e){const t=lw(n);return()=>yB[e]??t()}const MN=bB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),eh=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,k2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:eh([0,.65,.55,1]),circOut:eh([.55,0,1,.45]),backIn:eh([.31,.01,.66,-.59]),backOut:eh([.33,1.53,.69,.99])};function PN(n,e){if(n)return typeof n=="function"?MN()?IN(n,e):"ease-out":yN(n)?eh(n):Array.isArray(n)?n.map(t=>PN(t,e)||k2.easeOut):k2[n]}function xB(n,e,t,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:u}={},d=void 0){const h={[e]:t};u&&(h.offset=u);const p=PN(c,i);Array.isArray(p)&&(h.easing=p);const m={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),n.animate(h,m)}function ON(n){return typeof n=="function"&&"applyToOptions"in n}function _B({type:n,...e}){return ON(n)&&MN()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class wB extends bw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,ow(typeof e.type!="string");const d=_B(e);this.animation=xB(t,r,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const h=yw(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(h):mB(t,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Oi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Oi(e)}get time(){return Oi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ja(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&vB()?(this.animation.timeline=e,ji):t(this)}}const VN={anticipate:pN,backInOut:hN,circInOut:mN};function EB(n){return n in VN}function SB(n){typeof n.ease=="string"&&EB(n.ease)&&(n.ease=VN[n.ease])}const N2=10;class TB extends wB{constructor(e){SB(e),DN(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new xw({...o,autoplay:!1}),u=ja(this.finishedTime??this.time);t.setWithVelocity(c.sample(u-N2).value,c.sample(u).value,N2),c.stop()}}const M2=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ko.test(n)||n==="0")&&!n.startsWith("url("));function AB(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function CB(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],o=M2(i,e),c=M2(a,e);return!o||!c?!1:AB(n)||(t==="spring"||ON(t))&&r}function Cx(n){n.duration=0,n.type="keyframes"}const IB=new Set(["opacity","clipPath","filter","transform"]),RB=lw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function DB(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:a,type:o}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return RB()&&t&&IB.has(t)&&(t!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const kB=40;class NB extends bw{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:u,motionValue:d,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Kr.now();const m={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:a,repeatType:o,name:u,motionValue:d,element:h,...p},b=h?.KeyframeResolver||_w;this.keyframeResolver=new b(c,(_,E,S)=>this.onKeyframesResolved(_,E,m,!S),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Kr.now(),CB(e,a,o,c)||((Ns.instantAnimations||!u)&&h?.(yw(e,r,t)),e[0]=e[e.length-1],Cx(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>kB?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},b=!d&&DB(m)?new TB({...m,element:m.motionValue.owner.current}):new xw(m);b.finished.then(()=>this.notifyFinished()).catch(ji),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),pB()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const MB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function PB(n){const e=MB.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function jN(n,e,t=1){const[r,i]=PB(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return aN(o)?parseFloat(o):o}return hw(i)?jN(i,e,t+1):i}function ww(n,e){return n?.[e]??n?.default??n}const zN=new Set(["width","height","top","left","right","bottom",...kd]),OB={test:n=>n==="auto",parse:n=>n},LN=n=>e=>e.test(n),BN=[Dd,et,za,Ro,A9,T9,OB],P2=n=>BN.find(LN(n));function VB(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||oN(n):!0}const jB=new Set(["brightness","contrast","saturate","opacity"]);function zB(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(pw)||[];if(!r)return n;const i=t.replace(r,"");let a=jB.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+i+")"}const LB=/\b([a-z-]*)\(.*?\)/gu,Ix={...Ko,getAnimatableNone:n=>{const e=n.match(LB);return e?e.map(zB).join(" "):n}},O2={...Dd,transform:Math.round},BB={rotate:Ro,rotateX:Ro,rotateY:Ro,rotateZ:Ro,scale:wm,scaleX:wm,scaleY:wm,scaleZ:wm,skew:Ro,skewX:Ro,skewY:Ro,distance:et,translateX:et,translateY:et,translateZ:et,x:et,y:et,z:et,perspective:et,transformPerspective:et,opacity:Vh,originX:w2,originY:w2,originZ:et},Ew={borderWidth:et,borderTopWidth:et,borderRightWidth:et,borderBottomWidth:et,borderLeftWidth:et,borderRadius:et,radius:et,borderTopLeftRadius:et,borderTopRightRadius:et,borderBottomRightRadius:et,borderBottomLeftRadius:et,width:et,maxWidth:et,height:et,maxHeight:et,top:et,right:et,bottom:et,left:et,padding:et,paddingTop:et,paddingRight:et,paddingBottom:et,paddingLeft:et,margin:et,marginTop:et,marginRight:et,marginBottom:et,marginLeft:et,backgroundPositionX:et,backgroundPositionY:et,...BB,zIndex:O2,fillOpacity:Vh,strokeOpacity:Vh,numOctaves:O2},UB={...Ew,color:Bn,backgroundColor:Bn,outlineColor:Bn,fill:Bn,stroke:Bn,borderColor:Bn,borderTopColor:Bn,borderRightColor:Bn,borderBottomColor:Bn,borderLeftColor:Bn,filter:Ix,WebkitFilter:Ix},UN=n=>UB[n];function FN(n,e){let t=UN(n);return t!==Ix&&(t=Ko),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const FB=new Set(["auto","none","0"]);function GB(n,e,t){let r=0,i;for(;r<n.length&&!i;){const a=n[r];typeof a=="string"&&!FB.has(a)&&jh(a).values.length&&(i=n[r]),r++}if(i&&t)for(const a of e)n[a]=FN(t,i)}class qB extends _w{constructor(e,t,r,i,a){super(e,t,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),hw(d))){const h=jN(d,t.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!zN.has(r)||e.length!==2)return;const[i,a]=e,o=P2(i),c=P2(a);if(o!==c)if(D2(o)&&D2(c))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else rc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||VB(e[i]))&&r.push(i);r.length&&GB(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=rc[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function HB(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=t?.[n]??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const GN=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function qN(n){return sN(n)&&"offsetHeight"in n}const V2=30,$B=n=>!isNaN(parseFloat(n));class YB{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Kr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Kr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=$B(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new cw);const r=this.events[e].add(t);return e==="change"?()=>{r(),cn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Kr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>V2)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,V2);return lN(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function td(n,e){return new YB(n,e)}const{schedule:Sw}=bN(queueMicrotask,!1),ta={x:!1,y:!1};function HN(){return ta.x||ta.y}function KB(n){return n==="x"||n==="y"?ta[n]?null:(ta[n]=!0,()=>{ta[n]=!1}):ta.x||ta.y?null:(ta.x=ta.y=!0,()=>{ta.x=ta.y=!1})}function $N(n,e){const t=HB(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function j2(n){return!(n.pointerType==="touch"||HN())}function XB(n,e,t={}){const[r,i,a]=$N(n,t),o=c=>{if(!j2(c))return;const{target:u}=c,d=e(u,c);if(typeof d!="function"||!u)return;const h=p=>{j2(p)&&(d(p),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const YN=(n,e)=>e?n===e?!0:YN(n,e.parentElement):!1,Tw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,WB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QB(n){return WB.has(n.tagName)||n.tabIndex!==-1}const Zm=new WeakSet;function z2(n){return e=>{e.key==="Enter"&&n(e)}}function x1(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ZB=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=z2(()=>{if(Zm.has(t))return;x1(t,"down");const i=z2(()=>{x1(t,"up")}),a=()=>x1(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function L2(n){return Tw(n)&&!HN()}function JB(n,e,t={}){const[r,i,a]=$N(n,t),o=c=>{const u=c.currentTarget;if(!L2(c))return;Zm.add(u);const d=e(u,c),h=(b,_)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),Zm.has(u)&&Zm.delete(u),L2(b)&&typeof d=="function"&&d(b,{success:_})},p=b=>{h(b,u===window||u===document||t.useGlobalTarget||YN(u,b.target))},m=b=>{h(b,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),qN(c)&&(c.addEventListener("focus",d=>ZB(d,i)),!QB(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function KN(n){return sN(n)&&"ownerSVGElement"in n}function eU(n){return KN(n)&&n.tagName==="svg"}const Sr=n=>!!(n&&n.getVelocity),tU=[...BN,Bn,Ko],nU=n=>tU.find(LN(n)),Aw=G.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function B2(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function rU(...n){return e=>{let t=!1;const r=n.map(i=>{const a=B2(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():B2(n[i],null)}}}}function iU(...n){return G.useCallback(rU(...n),n)}class aU extends G.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=qN(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function sU({children:n,isPresent:e,anchorX:t,root:r}){const i=G.useId(),a=G.useRef(null),o=G.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=G.useContext(Aw),u=iU(a,n?.ref);return G.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:m,right:b}=o.current;if(e||!a.current||!d||!h)return;const _=t==="left"?`left: ${m}`:`right: ${b}`;a.current.dataset.motionPopId=i;const E=document.createElement("style");c&&(E.nonce=c);const S=r??document.head;return S.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${_}px !important;
            top: ${p}px !important;
          }
        `),()=>{S.contains(E)&&S.removeChild(E)}},[e]),y.jsx(aU,{isPresent:e,childRef:a,sizeRef:o,children:G.cloneElement(n,{ref:u})})}const oU=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:c,root:u})=>{const d=bv(lU),h=G.useId();let p=!0,m=G.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:t,custom:i,onExitComplete:b=>{d.set(b,!0);for(const _ of d.values())if(!_)return;r&&r()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[t,d,r]);return a&&p&&(m={...m}),G.useMemo(()=>{d.forEach((b,_)=>d.set(_,!1))},[t]),G.useEffect(()=>{!t&&!d.size&&r&&r()},[t]),o==="popLayout"&&(n=y.jsx(sU,{isPresent:t,anchorX:c,root:u,children:n})),y.jsx(xv.Provider,{value:m,children:n})};function lU(){return new Map}function XN(n=!0){const e=G.useContext(xv);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,a=G.useId();G.useEffect(()=>{if(n)return i(a)},[n]);const o=G.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,o]:[!0]}const Em=n=>n.key||"";function U2(n){const e=[];return G.Children.forEach(n,t=>{G.isValidElement(t)&&e.push(t)}),e}const dc=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",root:u})=>{const[d,h]=XN(o),p=G.useMemo(()=>U2(n),[n]),m=o&&!d?[]:p.map(Em),b=G.useRef(!0),_=G.useRef(p),E=bv(()=>new Map),[S,T]=G.useState(p),[I,D]=G.useState(p);iw(()=>{b.current=!1,_.current=p;for(let j=0;j<I.length;j++){const C=Em(I[j]);m.includes(C)?E.delete(C):E.get(C)!==!0&&E.set(C,!1)}},[I,m.length,m.join("-")]);const O=[];if(p!==S){let j=[...p];for(let C=0;C<I.length;C++){const A=I[C],k=Em(A);m.includes(k)||(j.splice(C,0,A),O.push(A))}return a==="wait"&&O.length&&(j=O),D(U2(j)),T(p),null}const{forceRender:z}=G.useContext(nw);return y.jsx(y.Fragment,{children:I.map(j=>{const C=Em(j),A=o&&!d?!1:p===I||m.includes(C),k=()=>{if(E.has(C))E.set(C,!0);else return;let P=!0;E.forEach(L=>{L||(P=!1)}),P&&(z?.(),D(_.current),o&&h?.(),r&&r())};return y.jsx(oU,{isPresent:A,initial:!b.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:A?void 0:k,anchorX:c,children:j},C)})})},WN=G.createContext({strict:!1}),F2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},nd={};for(const n in F2)nd[n]={isEnabled:e=>F2[n].some(t=>!!e[t])};function cU(n){for(const e in n)nd[e]={...nd[e],...n[e]}}const uU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function A0(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||uU.has(n)}let QN=n=>!A0(n);function dU(n){typeof n=="function"&&(QN=e=>e.startsWith("on")?!A0(e):n(e))}try{dU(require("@emotion/is-prop-valid").default)}catch{}function fU(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(QN(i)||t===!0&&A0(i)||!e&&!A0(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const _v=G.createContext({});function wv(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function zh(n){return typeof n=="string"||Array.isArray(n)}const Cw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Iw=["initial",...Cw];function Ev(n){return wv(n.animate)||Iw.some(e=>zh(n[e]))}function ZN(n){return!!(Ev(n)||n.variants)}function hU(n,e){if(Ev(n)){const{initial:t,animate:r}=n;return{initial:t===!1||zh(t)?t:void 0,animate:zh(r)?r:void 0}}return n.inherit!==!1?e:{}}function pU(n){const{initial:e,animate:t}=hU(n,G.useContext(_v));return G.useMemo(()=>({initial:e,animate:t}),[G2(e),G2(t)])}function G2(n){return Array.isArray(n)?n.join(" "):n}const Lh={};function gU(n){for(const e in n)Lh[e]=n[e],fw(e)&&(Lh[e].isCSSVariable=!0)}function JN(n,{layout:e,layoutId:t}){return Nd.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Lh[n]||n==="opacity")}const mU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},vU=kd.length;function yU(n,e,t){let r="",i=!0;for(let a=0;a<vU;a++){const o=kd[a],c=n[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||t){const d=GN(c,Ew[o]);if(!u){i=!1;const h=mU[o]||o;r+=`${h}(${d}) `}t&&(e[o]=d)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function Rw(n,e,t){const{style:r,vars:i,transformOrigin:a}=n;let o=!1,c=!1;for(const u in e){const d=e[u];if(Nd.has(u)){o=!0;continue}else if(fw(u)){i[u]=d;continue}else{const h=GN(d,Ew[u]);u.startsWith("origin")?(c=!0,a[u]=h):r[u]=h}}if(e.transform||(o||t?r.transform=yU(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:h=0}=a;r.transformOrigin=`${u} ${d} ${h}`}}const Dw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function eM(n,e,t){for(const r in e)!Sr(e[r])&&!JN(r,t)&&(n[r]=e[r])}function bU({transformTemplate:n},e){return G.useMemo(()=>{const t=Dw();return Rw(t,e,n),Object.assign({},t.vars,t.style)},[e])}function xU(n,e){const t=n.style||{},r={};return eM(r,t,n),Object.assign(r,bU(n,e)),r}function _U(n,e){const t={},r=xU(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const wU={offset:"stroke-dashoffset",array:"stroke-dasharray"},EU={offset:"strokeDashoffset",array:"strokeDasharray"};function SU(n,e,t=1,r=0,i=!0){n.pathLength=1;const a=i?wU:EU;n[a.offset]=et.transform(-r);const o=et.transform(e),c=et.transform(t);n[a.array]=`${o} ${c}`}function tM(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...c},u,d,h){if(Rw(n,c,d),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:m}=n;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),r!==void 0&&(p.scale=r),i!==void 0&&SU(p,i,a,o,!1)}const nM=()=>({...Dw(),attrs:{}}),rM=n=>typeof n=="string"&&n.toLowerCase()==="svg";function TU(n,e,t,r){const i=G.useMemo(()=>{const a=nM();return tM(a,e,rM(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};eM(a,n.style,n),i.style={...a,...i.style}}return i}const AU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kw(n){return typeof n!="string"||n.includes("-")?!1:!!(AU.indexOf(n)>-1||/[A-Z]/u.test(n))}function CU(n,e,t,{latestValues:r},i,a=!1){const c=(kw(n)?TU:_U)(e,r,i,n),u=fU(e,typeof n=="string",a),d=n!==G.Fragment?{...u,...c,ref:t}:{},{children:h}=e,p=G.useMemo(()=>Sr(h)?h.get():h,[h]);return G.createElement(n,{...d,children:p})}function q2(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function Nw(n,e,t,r){if(typeof e=="function"){const[i,a]=q2(r);e=e(t!==void 0?t:n.custom,i,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,a]=q2(r);e=e(t!==void 0?t:n.custom,i,a)}return e}function Jm(n){return Sr(n)?n.get():n}function IU({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:RU(t,r,i,n),renderState:e()}}function RU(n,e,t,r){const i={},a=r(n,{});for(const m in a)i[m]=Jm(a[m]);let{initial:o,animate:c}=n;const u=Ev(n),d=ZN(n);e&&d&&!u&&n.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const p=h?c:o;if(p&&typeof p!="boolean"&&!wv(p)){const m=Array.isArray(p)?p:[p];for(let b=0;b<m.length;b++){const _=Nw(n,m[b]);if(_){const{transitionEnd:E,transition:S,...T}=_;for(const I in T){let D=T[I];if(Array.isArray(D)){const O=h?D.length-1:0;D=D[O]}D!==null&&(i[I]=D)}for(const I in E)i[I]=E[I]}}}return i}const iM=n=>(e,t)=>{const r=G.useContext(_v),i=G.useContext(xv),a=()=>IU(n,e,r,i);return t?a():bv(a)};function Mw(n,e,t){const{style:r}=n,i={};for(const a in r)(Sr(r[a])||e.style&&Sr(e.style[a])||JN(a,n)||t?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const DU=iM({scrapeMotionValuesFromProps:Mw,createRenderState:Dw});function aM(n,e,t){const r=Mw(n,e,t);for(const i in n)if(Sr(n[i])||Sr(e[i])){const a=kd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=n[i]}return r}const kU=iM({scrapeMotionValuesFromProps:aM,createRenderState:nM}),NU=Symbol.for("motionComponentSymbol");function Vu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function MU(n,e,t){return G.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Vu(t)&&(t.current=r))},[e])}const Pw=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),PU="framerAppearId",sM="data-"+Pw(PU),oM=G.createContext({});function OU(n,e,t,r,i){const{visualElement:a}=G.useContext(_v),o=G.useContext(WN),c=G.useContext(xv),u=G.useContext(Aw).reducedMotion,d=G.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=G.useContext(oM);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&VU(d.current,t,i,p);const m=G.useRef(!1);G.useInsertionEffect(()=>{h&&m.current&&h.update(t,c)});const b=t[sM],_=G.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return iw(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),_.current&&h.animationState&&h.animationState.animateChanges())}),G.useEffect(()=>{h&&(!_.current&&h.animationState&&h.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),_.current=!1),h.enteringChildren=void 0)}),h}function VU(n,e,t,r){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:lM(n.parent)),n.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&Vu(c),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function lM(n){if(n)return n.options.allowProjection!==!1?n.projection:lM(n.parent)}function _1(n,{forwardMotionProps:e=!1}={},t,r){t&&cU(t);const i=kw(n)?kU:DU;function a(c,u){let d;const h={...G.useContext(Aw),...c,layoutId:jU(c)},{isStatic:p}=h,m=pU(c),b=i(c,p);if(!p&&rw){zU();const _=LU(h);d=_.MeasureLayout,m.visualElement=OU(n,b,h,r,_.ProjectionNode)}return y.jsxs(_v.Provider,{value:m,children:[d&&m.visualElement?y.jsx(d,{visualElement:m.visualElement,...h}):null,CU(n,c,MU(b,m.visualElement,u),b,p,e)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=G.forwardRef(a);return o[NU]=n,o}function jU({layoutId:n}){const e=G.useContext(nw).id;return e&&n!==void 0?e+"-"+n:n}function zU(n,e){G.useContext(WN).strict}function LU(n){const{drag:e,layout:t}=nd;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function BU(n,e){if(typeof Proxy>"u")return _1;const t=new Map,r=(a,o)=>_1(a,o,n,e),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(t.has(o)||t.set(o,_1(o,void 0,n,e)),t.get(o))})}function cM({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function UU({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function FU(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function w1(n){return n===void 0||n===1}function Rx({scale:n,scaleX:e,scaleY:t}){return!w1(n)||!w1(e)||!w1(t)}function Ll(n){return Rx(n)||uM(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function uM(n){return H2(n.x)||H2(n.y)}function H2(n){return n&&n!=="0%"}function C0(n,e,t){const r=n-t,i=e*r;return t+i}function $2(n,e,t,r,i){return i!==void 0&&(n=C0(n,i,r)),C0(n,t,r)+e}function Dx(n,e=0,t=1,r,i){n.min=$2(n.min,e,t,r,i),n.max=$2(n.max,e,t,r,i)}function dM(n,{x:e,y:t}){Dx(n.x,e.translate,e.scale,e.originPoint),Dx(n.y,t.translate,t.scale,t.originPoint)}const Y2=.999999999999,K2=1.0000000000001;function GU(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let a,o;for(let c=0;c<i;c++){a=t[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&zu(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,dM(n,o)),r&&Ll(a.latestValues)&&zu(n,a.latestValues))}e.x<K2&&e.x>Y2&&(e.x=1),e.y<K2&&e.y>Y2&&(e.y=1)}function ju(n,e){n.min=n.min+e,n.max=n.max+e}function X2(n,e,t,r,i=.5){const a=pn(n.min,n.max,i);Dx(n,e,t,a,r)}function zu(n,e){X2(n.x,e.x,e.scaleX,e.scale,e.originX),X2(n.y,e.y,e.scaleY,e.scale,e.originY)}function fM(n,e){return cM(FU(n.getBoundingClientRect(),e))}function qU(n,e,t){const r=fM(n,t),{scroll:i}=e;return i&&(ju(r.x,i.offset.x),ju(r.y,i.offset.y)),r}const W2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Lu=()=>({x:W2(),y:W2()}),Q2=()=>({min:0,max:0}),In=()=>({x:Q2(),y:Q2()}),kx={current:null},hM={current:!1};function HU(){if(hM.current=!0,!!rw)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>kx.current=n.matches;n.addEventListener("change",e),e()}else kx.current=!1}const $U=new WeakMap;function YU(n,e,t){for(const r in e){const i=e[r],a=t[r];if(Sr(i))n.addValue(r,i);else if(Sr(a))n.addValue(r,td(i,{owner:n}));else if(a!==i)if(n.hasValue(r)){const o=n.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=n.getStaticValue(r);n.addValue(r,td(o!==void 0?o:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const Z2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class KU{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_w,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Kr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,cn.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Ev(t),this.isVariantNode=ZN(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const m in p){const b=p[m];u[m]!==void 0&&Sr(b)&&b.set(u[m])}}mount(e){this.current=e,$U.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),hM.current||HU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:kx.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Yo(this.notifyUpdate),Yo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Nd.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&cn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in nd){const t=nd[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):In()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Z2.length;r++){const i=Z2[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=YU(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=td(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(aN(r)||oN(r))?r=parseFloat(r):!nU(r)&&Ko.test(t)&&(r=FN(e,t)),this.setBaseTarget(e,Sr(r)?r.get():r)),Sr(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const a=Nw(this.props,t,this.presenceContext?.custom);a&&(r=a[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Sr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new cw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Sw.render(this.render)}}class pM extends KU{constructor(){super(...arguments),this.KeyframeResolver=qB}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Sr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function gM(n,{style:e,vars:t},r,i){const a=n.style;let o;for(o in e)a[o]=e[o];i?.applyProjectionStyles(a,r);for(o in t)a.setProperty(o,t[o])}function XU(n){return window.getComputedStyle(n)}class WU extends pM{constructor(){super(...arguments),this.type="html",this.renderInstance=gM}readValueFromInstance(e,t){if(Nd.has(t))return this.projection?.isProjecting?wx(t):cB(e,t);{const r=XU(e),i=(fw(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return fM(e,t)}build(e,t,r){Rw(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Mw(e,t,r)}}const mM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function QU(n,e,t,r){gM(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(mM.has(i)?i:Pw(i),e.attrs[i])}class ZU extends pM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=In}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Nd.has(t)){const r=UN(t);return r&&r.default||0}return t=mM.has(t)?t:Pw(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return aM(e,t,r)}build(e,t,r){tM(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){QU(e,t,r,i)}mount(e){this.isSVGTag=rM(e.tagName),super.mount(e)}}const JU=(n,e)=>kw(n)?new ZU(e):new WU(e,{allowProjection:n!==G.Fragment});function Xu(n,e,t){const r=n.getProps();return Nw(r,e,t!==void 0?t:r.custom,n)}const Nx=n=>Array.isArray(n);function e8(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,td(t))}function t8(n){return Nx(n)?n[n.length-1]||0:n}function Ow(n,e){const t=Xu(n,e);let{transitionEnd:r={},transition:i={},...a}=t||{};a={...a,...r};for(const o in a){const c=t8(a[o]);e8(n,o,c)}}function n8(n){return!!(Sr(n)&&n.add)}function Mx(n,e){const t=n.getValue("willChange");if(n8(t))return t.add(e);if(!t&&Ns.WillChange){const r=new Ns.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function vM(n){return n.props[sM]}const r8=n=>n!==null;function i8(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(r8),a=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[a]}const a8={type:"spring",stiffness:500,damping:25,restSpeed:10},s8=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),o8={type:"keyframes",duration:.8},l8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},c8=(n,{keyframes:e})=>e.length>2?o8:Nd.has(n)?n.startsWith("scale")?s8(e[1]):a8:l8;function u8({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const Vw=(n,e,t,r={},i,a)=>o=>{const c=ww(r,n)||{},u=c.delay||r.delay||0;let{elapsed:d=0}=r;d=d-ja(u);const h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:m=>{e.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:a?void 0:i};u8(c)||Object.assign(h,c8(n,h)),h.duration&&(h.duration=ja(h.duration)),h.repeatDelay&&(h.repeatDelay=ja(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Cx(h),h.delay===0&&(p=!0)),(Ns.instantAnimations||Ns.skipAnimations)&&(p=!0,Cx(h),h.delay=0),h.allowFlatten=!c.type&&!c.ease,p&&!a&&e.get()!==void 0){const m=i8(h.keyframes,c);if(m!==void 0){cn.update(()=>{h.onUpdate(m),h.onComplete()});return}}return c.isSync?new xw(h):new NB(h)};function d8({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function yM(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:o,...c}=e;r&&(a=r);const u=[],d=i&&n.animationState&&n.animationState.getState()[i];for(const h in c){const p=n.getValue(h,n.latestValues[h]??null),m=c[h];if(m===void 0||d&&d8(d,h))continue;const b={delay:t,...ww(a||{},h)},_=p.get();if(_!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===_&&!b.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const T=vM(n);if(T){const I=window.MotionHandoffAnimation(T,h,cn);I!==null&&(b.startTime=I,E=!0)}}Mx(n,h),p.start(Vw(h,p,m,n.shouldReduceMotion&&zN.has(h)?{type:!1}:b,n,E));const S=p.animation;S&&u.push(S)}return o&&Promise.all(u).then(()=>{cn.update(()=>{o&&Ow(n,o)})}),u}function bM(n,e,t,r=0,i=1){const a=Array.from(n).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=n.size,c=(o-1)*r;return typeof t=="function"?t(a,o):i===1?a*r:c-a*r}function Px(n,e,t={}){const r=Xu(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const a=r?()=>Promise.all(yM(n,r,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return f8(n,e,u,d,h,p,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,d]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(t.delay)])}function f8(n,e,t=0,r=0,i=0,a=1,o){const c=[];for(const u of n.variantChildren)u.notify("AnimationStart",e),c.push(Px(u,e,{...o,delay:t+(typeof r=="function"?0:r)+bM(n.variantChildren,u,r,i,a)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function xM(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Px(n,a,t));r=Promise.all(i)}else if(typeof e=="string")r=Px(n,e,t);else{const i=typeof e=="function"?Xu(n,e,t.custom):e;r=Promise.all(yM(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function _M(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const h8=Iw.length;function wM(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?wM(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<h8;t++){const r=Iw[t],i=n.props[r];(zh(i)||i===!1)&&(e[r]=i)}return e}const p8=[...Cw].reverse(),g8=Cw.length;function m8(n){return e=>Promise.all(e.map(({animation:t,options:r})=>xM(n,t,r)))}function v8(n){let e=m8(n),t=J2(),r=!0;const i=u=>(d,h)=>{const p=Xu(n,h,u==="exit"?n.presenceContext?.custom:void 0);if(p){const{transition:m,transitionEnd:b,..._}=p;d={...d,..._,...b}}return d};function a(u){e=u(n)}function o(u){const{props:d}=n,h=wM(n.parent)||{},p=[],m=new Set;let b={},_=1/0;for(let S=0;S<g8;S++){const T=p8[S],I=t[T],D=d[T]!==void 0?d[T]:h[T],O=zh(D),z=T===u?I.isActive:null;z===!1&&(_=S);let j=D===h[T]&&D!==d[T]&&O;if(j&&r&&n.manuallyAnimateOnMount&&(j=!1),I.protectedKeys={...b},!I.isActive&&z===null||!D&&!I.prevProp||wv(D)||typeof D=="boolean")continue;const C=y8(I.prevProp,D);let A=C||T===u&&I.isActive&&!j&&O||S>_&&O,k=!1;const P=Array.isArray(D)?D:[D];let L=P.reduce(i(T),{});z===!1&&(L={});const{prevResolvedValues:B={}}=I,M={...B,...L},W=H=>{A=!0,m.has(H)&&(k=!0,m.delete(H)),I.needsAnimating[H]=!0;const ee=n.getValue(H);ee&&(ee.liveStyle=!1)};for(const H in M){const ee=L[H],ne=B[H];if(b.hasOwnProperty(H))continue;let de=!1;Nx(ee)&&Nx(ne)?de=!_M(ee,ne):de=ee!==ne,de?ee!=null?W(H):m.add(H):ee!==void 0&&m.has(H)?W(H):I.protectedKeys[H]=!0}I.prevProp=D,I.prevResolvedValues=L,I.isActive&&(b={...b,...L}),r&&n.blockInitialAnimation&&(A=!1);const Q=j&&C;A&&(!Q||k)&&p.push(...P.map(H=>{const ee={type:T};if(typeof H=="string"&&r&&!Q&&n.manuallyAnimateOnMount&&n.parent){const{parent:ne}=n,de=Xu(ne,H);if(ne.enteringChildren&&de){const{delayChildren:U}=de.transition||{};ee.delay=bM(ne.enteringChildren,n,U)}}return{animation:H,options:ee}}))}if(m.size){const S={};if(typeof d.initial!="boolean"){const T=Xu(n,Array.isArray(d.initial)?d.initial[0]:d.initial);T&&T.transition&&(S.transition=T.transition)}m.forEach(T=>{const I=n.getBaseTarget(T),D=n.getValue(T);D&&(D.liveStyle=!0),S[T]=I??null}),p.push({animation:S})}let E=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(p):Promise.resolve()}function c(u,d){if(t[u].isActive===d)return Promise.resolve();n.variantChildren?.forEach(p=>p.animationState?.setActive(u,d)),t[u].isActive=d;const h=o(u);for(const p in t)t[p].protectedKeys={};return h}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>t,reset:()=>{t=J2()}}}function y8(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!_M(e,n):!1}function Vl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function J2(){return{animate:Vl(!0),whileInView:Vl(),whileHover:Vl(),whileTap:Vl(),whileDrag:Vl(),whileFocus:Vl(),exit:Vl()}}class rl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class b8 extends rl{constructor(e){super(e),e.animationState||(e.animationState=v8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();wv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let x8=0;class _8 extends rl{constructor(){super(...arguments),this.id=x8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const w8={animation:{Feature:b8},exit:{Feature:_8}};function Bh(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function vp(n){return{point:{x:n.pageX,y:n.pageY}}}const E8=n=>e=>Tw(e)&&n(e,vp(e));function hh(n,e,t,r){return Bh(n,e,E8(t),r)}const EM=1e-4,S8=1-EM,T8=1+EM,SM=.01,A8=0-SM,C8=0+SM;function Or(n){return n.max-n.min}function I8(n,e,t){return Math.abs(n-e)<=t}function eI(n,e,t,r=.5){n.origin=r,n.originPoint=pn(e.min,e.max,n.origin),n.scale=Or(t)/Or(e),n.translate=pn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=S8&&n.scale<=T8||isNaN(n.scale))&&(n.scale=1),(n.translate>=A8&&n.translate<=C8||isNaN(n.translate))&&(n.translate=0)}function ph(n,e,t,r){eI(n.x,e.x,t.x,r?r.originX:void 0),eI(n.y,e.y,t.y,r?r.originY:void 0)}function tI(n,e,t){n.min=t.min+e.min,n.max=n.min+Or(e)}function R8(n,e,t){tI(n.x,e.x,t.x),tI(n.y,e.y,t.y)}function nI(n,e,t){n.min=e.min-t.min,n.max=n.min+Or(e)}function gh(n,e,t){nI(n.x,e.x,t.x),nI(n.y,e.y,t.y)}function ki(n){return[n("x"),n("y")]}const TM=({current:n})=>n?n.ownerDocument.defaultView:null,rI=(n,e)=>Math.abs(n-e);function D8(n,e){const t=rI(n.x,e.x),r=rI(n.y,e.y);return Math.sqrt(t**2+r**2)}class AM{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=S1(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,_=D8(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!_)return;const{point:E}=m,{timestamp:S}=pr;this.history.push({...E,timestamp:S});const{onStart:T,onMove:I}=this.handlers;b||(T&&T(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,m)},this.handlePointerMove=(m,b)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=E1(b,this.transformPagePoint),cn.update(this.updatePoint,!0)},this.handlePointerUp=(m,b)=>{this.end();const{onEnd:_,onSessionEnd:E,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=S1(m.type==="pointercancel"?this.lastMoveEventInfo:E1(b,this.transformPagePoint),this.history);this.startEvent&&_&&_(m,T),E&&E(m,T)},!Tw(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const c=vp(e),u=E1(c,this.transformPagePoint),{point:d}=u,{timestamp:h}=pr;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=t;p&&p(e,S1(u,this.history)),this.removeListeners=pp(hh(this.contextWindow,"pointermove",this.handlePointerMove),hh(this.contextWindow,"pointerup",this.handlePointerUp),hh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Yo(this.updatePoint)}}function E1(n,e){return e?{point:e(n.point)}:n}function iI(n,e){return{x:n.x-e.x,y:n.y-e.y}}function S1({point:n},e){return{point:n,delta:iI(n,CM(e)),offset:iI(n,k8(e)),velocity:N8(e,.1)}}function k8(n){return n[0]}function CM(n){return n[n.length-1]}function N8(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=CM(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>ja(e)));)t--;if(!r)return{x:0,y:0};const a=Oi(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function M8(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?pn(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?pn(t,n,r.max):Math.min(n,t)),n}function aI(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function P8(n,{top:e,left:t,bottom:r,right:i}){return{x:aI(n.x,t,i),y:aI(n.y,e,r)}}function sI(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function O8(n,e){return{x:sI(n.x,e.x),y:sI(n.y,e.y)}}function V8(n,e){let t=.5;const r=Or(n),i=Or(e);return i>r?t=Oh(e.min,e.max-r,n.min):r>i&&(t=Oh(n.min,n.max-i,e.min)),ks(0,1,t)}function j8(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Ox=.35;function z8(n=Ox){return n===!1?n=0:n===!0&&(n=Ox),{x:oI(n,"left","right"),y:oI(n,"top","bottom")}}function oI(n,e,t){return{min:lI(n,e),max:lI(n,t)}}function lI(n,e){return typeof n=="number"?n:n[e]||0}const L8=new WeakMap;class B8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=In(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(vp(p).point)},o=(p,m)=>{const{drag:b,dragPropagation:_,onDragStart:E}=this.getProps();if(b&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=KB(b),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ki(T=>{let I=this.getAxisMotionValue(T).get()||0;if(za.test(I)){const{projection:D}=this.visualElement;if(D&&D.layout){const O=D.layout.layoutBox[T];O&&(I=Or(O)*(parseFloat(I)/100))}}this.originPoint[T]=I}),E&&cn.postRender(()=>E(p,m)),Mx(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},c=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:b,dragDirectionLock:_,onDirectionLock:E,onDrag:S}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:T}=m;if(_&&this.currentDirection===null){this.currentDirection=U8(T),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",m.point,T),this.updateAxis("y",m.point,T),this.visualElement.render(),S&&S(p,m)},u=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>ki(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new AM(e,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:TM(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&cn.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Sm(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=M8(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Vu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=P8(r.layoutBox,e):this.constraints=!1,this.elastic=z8(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ki(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=j8(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Vu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=qU(r,i.root,this.visualElement.getTransformPagePoint());let o=O8(i.layout.layoutBox,a);if(t){const c=t(UU(o));this.hasMutatedConstraints=!!c,c&&(o=cM(c))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=ki(h=>{if(!Sm(h,t,this.currentDirection))return;let p=u&&u[h]||{};o&&(p={min:0,max:0});const m=i?200:1e6,b=i?40:1e7,_={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...p};return this.startAxisValueAnimation(h,_)});return Promise.all(d).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Mx(this.visualElement,e),r.start(Vw(e,r,0,t,this.visualElement,!1))}stopAnimation(){ki(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ki(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ki(t=>{const{drag:r}=this.getProps();if(!Sm(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[t];a.set(e[t]-pn(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Vu(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ki(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=V8({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ki(o=>{if(!Sm(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];c.set(pn(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;L8.set(this.visualElement,this);const e=this.visualElement.current,t=hh(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Vu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),cn.read(r);const o=Bh(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(ki(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),t(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=Ox,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function Sm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function U8(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class F8 extends rl{constructor(e){super(e),this.removeGroupControls=ji,this.removeListeners=ji,this.controls=new B8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ji}unmount(){this.removeGroupControls(),this.removeListeners()}}const cI=n=>(e,t)=>{n&&cn.postRender(()=>n(e,t))};class G8 extends rl{constructor(){super(...arguments),this.removePointerDownListener=ji}onPointerDown(e){this.session=new AM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:TM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:cI(e),onStart:cI(t),onMove:r,onEnd:(a,o)=>{delete this.session,i&&cn.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=hh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const e0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function uI(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Yf={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(et.test(n))n=parseFloat(n);else return n;const t=uI(n,e.target.x),r=uI(n,e.target.y);return`${t}% ${r}%`}},q8={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Ko.parse(n);if(i.length>5)return r;const a=Ko.createTransformer(n),o=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,u=t.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const d=pn(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),a(i)}};let T1=!1;class H8 extends G.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;gU($8),a&&(t.group&&t.group.add(a),r&&r.register&&i&&r.register(a),T1&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),e0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,T1=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||cn.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Sw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;T1=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function IM(n){const[e,t]=XN(),r=G.useContext(nw);return y.jsx(H8,{...n,layoutGroup:r,switchLayoutGroup:G.useContext(oM),isPresent:e,safeToRemove:t})}const $8={borderRadius:{...Yf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yf,borderTopRightRadius:Yf,borderBottomLeftRadius:Yf,borderBottomRightRadius:Yf,boxShadow:q8};function Y8(n,e,t){const r=Sr(n)?n:td(n);return r.start(Vw("",r,e,t)),r.animation}const K8=(n,e)=>n.depth-e.depth;class X8{constructor(){this.children=[],this.isDirty=!1}add(e){aw(this.children,e),this.isDirty=!0}remove(e){sw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(K8),this.isDirty=!1,this.children.forEach(e)}}function W8(n,e){const t=Kr.now(),r=({timestamp:i})=>{const a=i-t;a>=e&&(Yo(r),n(a-e))};return cn.setup(r,!0),()=>Yo(r)}const RM=["TopLeft","TopRight","BottomLeft","BottomRight"],Q8=RM.length,dI=n=>typeof n=="string"?parseFloat(n):n,fI=n=>typeof n=="number"||et.test(n);function Z8(n,e,t,r,i,a){i?(n.opacity=pn(0,t.opacity??1,J8(r)),n.opacityExit=pn(e.opacity??1,0,eF(r))):a&&(n.opacity=pn(e.opacity??1,t.opacity??1,r));for(let o=0;o<Q8;o++){const c=`border${RM[o]}Radius`;let u=hI(e,c),d=hI(t,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||fI(u)===fI(d)?(n[c]=Math.max(pn(dI(u),dI(d),r),0),(za.test(d)||za.test(u))&&(n[c]+="%")):n[c]=d}(e.rotate||t.rotate)&&(n.rotate=pn(e.rotate||0,t.rotate||0,r))}function hI(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const J8=DM(0,.5,gN),eF=DM(.5,.95,ji);function DM(n,e,t){return r=>r<n?0:r>e?1:t(Oh(n,e,r))}function pI(n,e){n.min=e.min,n.max=e.max}function Ri(n,e){pI(n.x,e.x),pI(n.y,e.y)}function gI(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function mI(n,e,t,r,i){return n-=e,n=C0(n,1/t,r),i!==void 0&&(n=C0(n,1/i,r)),n}function tF(n,e=0,t=1,r=.5,i,a=n,o=n){if(za.test(e)&&(e=parseFloat(e),e=pn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=pn(a.min,a.max,r);n===a&&(c-=e),n.min=mI(n.min,e,t,c,i),n.max=mI(n.max,e,t,c,i)}function vI(n,e,[t,r,i],a,o){tF(n,e[t],e[r],e[i],e.scale,a,o)}const nF=["x","scaleX","originX"],rF=["y","scaleY","originY"];function yI(n,e,t,r){vI(n.x,e,nF,t?t.x:void 0,r?r.x:void 0),vI(n.y,e,rF,t?t.y:void 0,r?r.y:void 0)}function bI(n){return n.translate===0&&n.scale===1}function kM(n){return bI(n.x)&&bI(n.y)}function xI(n,e){return n.min===e.min&&n.max===e.max}function iF(n,e){return xI(n.x,e.x)&&xI(n.y,e.y)}function _I(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function NM(n,e){return _I(n.x,e.x)&&_I(n.y,e.y)}function wI(n){return Or(n.x)/Or(n.y)}function EI(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class aF{constructor(){this.members=[]}add(e){aw(this.members,e),e.scheduleRender()}remove(e){if(sw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function sF(n,e,t){let r="";const i=n.x.translate/e.x,a=n.y.translate/e.y,o=t?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:m,skewX:b,skewY:_}=t;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),b&&(r+=`skewX(${b}deg) `),_&&(r+=`skewY(${_}deg) `)}const c=n.x.scale*e.x,u=n.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const A1=["","X","Y","Z"],oF=1e3;let lF=0;function C1(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function MM(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=vM(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",cn,!(i||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&MM(r)}function PM({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},c=e?.()){this.id=lF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(dF),this.nodes.forEach(gF),this.nodes.forEach(mF),this.nodes.forEach(fF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new X8)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new cw),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=KN(o)&&!eU(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),n){let h,p=0;const m=()=>this.root.updateBlockedByResize=!1;cn.read(()=>{p=window.innerWidth}),n(o,()=>{const b=window.innerWidth;b!==p&&(p=b,this.root.updateBlockedByResize=!0,h&&h(),h=W8(m,250),e0.hasAnimatedSinceResize&&(e0.hasAnimatedSinceResize=!1,this.nodes.forEach(AI)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||d.getDefaultTransition()||_F,{onLayoutAnimationStart:E,onLayoutAnimationComplete:S}=d.getProps(),T=!this.targetLayout||!NM(this.targetLayout,b),I=!p&&m;if(this.options.layoutRoot||this.resumeFrom||I||p&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const D={...ww(_,"layout"),onPlay:E,onComplete:S};(d.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D),this.setAnimationOrigin(h,I)}else p||AI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Yo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&MM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(SI);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(TI);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(pF),this.nodes.forEach(cF),this.nodes.forEach(uF)):this.nodes.forEach(TI),this.clearAllSnapshots();const c=Kr.now();pr.delta=ks(0,1e3/60,c-pr.timestamp),pr.timestamp=c,pr.isProcessing=!0,g1.update.process(pr),g1.preRender.process(pr),g1.render.process(pr),pr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Sw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hF),this.sharedNodes.forEach(yF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,cn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){cn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Or(this.snapshot.measuredBox.x)&&!Or(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=In(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!kM(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(c||Ll(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),wF(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return In();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(EF))){const{scroll:d}=this.root;d&&(ju(c.x,d.offset.x),ju(c.y,d.offset.y))}return c}removeElementScroll(o){const c=In();if(Ri(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Ri(c,o),ju(c.x,h.offset.x),ju(c.y,h.offset.y))}return c}applyTransform(o,c=!1){const u=In();Ri(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!c&&h.options.layoutScroll&&h.scroll&&h!==h.root&&zu(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ll(h.latestValues)&&zu(u,h.latestValues)}return Ll(this.latestValues)&&zu(u,this.latestValues),u}removeTransform(o){const c=In();Ri(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Ll(d.latestValues))continue;Rx(d.latestValues)&&d.updateSnapshot();const h=In(),p=d.measurePageBox();Ri(h,p),yI(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Ll(this.latestValues)&&yI(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=pr.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=In(),this.relativeTargetOrigin=In(),gh(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ri(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=In(),this.targetWithTransforms=In()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),R8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ri(this.target,this.layout.layoutBox),dM(this.target,this.targetDelta)):Ri(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=In(),this.relativeTargetOrigin=In(),gh(this.relativeTargetOrigin,this.target,m.target),Ri(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Rx(this.parent.latestValues)||uM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===pr.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Ri(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;GU(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=In());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(gI(this.prevProjectionDelta.x,this.projectionDelta.x),gI(this.prevProjectionDelta.y,this.projectionDelta.y)),ph(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!EI(this.projectionDelta.x,this.prevProjectionDelta.x)||!EI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Lu(),this.projectionDelta=Lu(),this.projectionDeltaWithTransform=Lu()}setAnimationOrigin(o,c=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},p=Lu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=In(),b=u?u.source:void 0,_=this.layout?this.layout.source:void 0,E=b!==_,S=this.getStack(),T=!S||S.members.length<=1,I=!!(E&&!T&&this.options.crossfade===!0&&!this.path.some(xF));this.animationProgress=0;let D;this.mixTargetDelta=O=>{const z=O/1e3;CI(p.x,o.x,z),CI(p.y,o.y,z),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gh(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),bF(this.relativeTarget,this.relativeTargetOrigin,m,z),D&&iF(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=In()),Ri(D,this.relativeTarget)),E&&(this.animationValues=h,Z8(h,d,this.latestValues,z,I,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Yo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=cn.update(()=>{e0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=td(0)),this.currentAnimation=Y8(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(oF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:h}=o;if(!(!c||!u||!d)){if(this!==o&&this.layout&&d&&OM(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||In();const p=Or(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const m=Or(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}Ri(c,u),zu(c,h),ph(this.projectionDeltaWithTransform,this.layoutCorrected,c,h)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new aF),this.sharedNodes.get(o).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const d={};u.z&&C1("z",o,d,this.animationValues);for(let h=0;h<A1.length;h++)C1(`rotate${A1[h]}`,o,d,this.animationValues),C1(`skew${A1[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Jm(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Jm(c?.pointerEvents)||""),this.hasProjected&&!Ll(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=sF(this.projectionDeltaWithTransform,this.treeScale,h);u&&(p=u(h,p)),o.transform=p;const{x:m,y:b}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${b.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const _ in Lh){if(h[_]===void 0)continue;const{correct:E,applyTo:S,isCSSVariable:T}=Lh[_],I=p==="none"?h[_]:E(h[_],d);if(S){const D=S.length;for(let O=0;O<D;O++)o[S[O]]=I}else T?this.options.visualElement.renderState.vars[_]=I:o[_]=I}this.options.layoutId&&(o.pointerEvents=d===this?Jm(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(SI),this.root.sharedNodes.clear()}}}function cF(n){n.updateLayout()}function uF(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:i}=n.options,a=e.source!==n.layout.source;i==="size"?ki(h=>{const p=a?e.measuredBox[h]:e.layoutBox[h],m=Or(p);p.min=t[h].min,p.max=p.min+m}):OM(i,e.layoutBox,t)&&ki(h=>{const p=a?e.measuredBox[h]:e.layoutBox[h],m=Or(t[h]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+m)});const o=Lu();ph(o,t,e.layoutBox);const c=Lu();a?ph(c,n.applyTransform(r,!0),e.measuredBox):ph(c,t,e.layoutBox);const u=!kM(o);let d=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const b=In();gh(b,e.layoutBox,p.layoutBox);const _=In();gh(_,t,m.layoutBox),NM(b,_)||(d=!0),h.options.layoutRoot&&(n.relativeTarget=_,n.relativeTargetOrigin=b,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function dF(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function fF(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function hF(n){n.clearSnapshot()}function SI(n){n.clearMeasurements()}function TI(n){n.isLayoutDirty=!1}function pF(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function AI(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function gF(n){n.resolveTargetDelta()}function mF(n){n.calcProjection()}function vF(n){n.resetSkewAndRotation()}function yF(n){n.removeLeadSnapshot()}function CI(n,e,t){n.translate=pn(e.translate,0,t),n.scale=pn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function II(n,e,t,r){n.min=pn(e.min,t.min,r),n.max=pn(e.max,t.max,r)}function bF(n,e,t,r){II(n.x,e.x,t.x,r),II(n.y,e.y,t.y,r)}function xF(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const _F={duration:.45,ease:[.4,0,.1,1]},RI=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),DI=RI("applewebkit/")&&!RI("chrome/")?Math.round:ji;function kI(n){n.min=DI(n.min),n.max=DI(n.max)}function wF(n){kI(n.x),kI(n.y)}function OM(n,e,t){return n==="position"||n==="preserve-aspect"&&!I8(wI(e),wI(t),.2)}function EF(n){return n!==n.root&&n.scroll?.wasRoot}const SF=PM({attachResizeListener:(n,e)=>Bh(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),I1={current:void 0},VM=PM({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!I1.current){const n=new SF({});n.mount(window),n.setOptions({layoutScroll:!0}),I1.current=n}return I1.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),TF={pan:{Feature:G8},drag:{Feature:F8,ProjectionNode:VM,MeasureLayout:IM}};function NI(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,a=r[i];a&&cn.postRender(()=>a(e,vp(e)))}class AF extends rl{mount(){const{current:e}=this.node;e&&(this.unmount=XB(e,(t,r)=>(NI(this.node,r,"Start"),i=>NI(this.node,i,"End"))))}unmount(){}}class CF extends rl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pp(Bh(this.node.current,"focus",()=>this.onFocus()),Bh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function MI(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),a=r[i];a&&cn.postRender(()=>a(e,vp(e)))}class IF extends rl{mount(){const{current:e}=this.node;e&&(this.unmount=JB(e,(t,r)=>(MI(this.node,r,"Start"),(i,{success:a})=>MI(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Vx=new WeakMap,R1=new WeakMap,RF=n=>{const e=Vx.get(n.target);e&&e(n)},DF=n=>{n.forEach(RF)};function kF({root:n,...e}){const t=n||document;R1.has(t)||R1.set(t,{});const r=R1.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(DF,{root:n,...e})),r[i]}function NF(n,e,t){const r=kF(e);return Vx.set(n,t),r.observe(n),()=>{Vx.delete(n),r.unobserve(n)}}const MF={some:0,all:1};class PF extends rl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:a}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:MF[i]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=d?h:p;m&&m(u)};return NF(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(OF(e,t))&&this.startObserver()}unmount(){}}function OF({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const VF={inView:{Feature:PF},tap:{Feature:IF},focus:{Feature:CF},hover:{Feature:AF}},jF={layout:{ProjectionNode:VM,MeasureLayout:IM}},zF={...w8,...VF,...TF,...jF},il=BU(zF,JU);function LF(n){n.values.forEach(e=>e.stop())}function jx(n,e){[...e].reverse().forEach(r=>{const i=n.getVariant(r);i&&Ow(n,i),n.variantChildren&&n.variantChildren.forEach(a=>{jx(a,e)})})}function BF(n,e){if(Array.isArray(e))return jx(n,e);if(typeof e=="string")return jx(n,[e]);Ow(n,e)}function UF(){const n=new Set,e={subscribe(t){return n.add(t),()=>void n.delete(t)},start(t,r){const i=[];return n.forEach(a=>{i.push(xM(a,t,{transitionOverride:r}))}),Promise.all(i)},set(t){return n.forEach(r=>{BF(r,t)})},stop(){n.forEach(t=>{LF(t)})},mount(){return()=>{e.stop()}}};return e}function FF(){const n=bv(UF);return iw(n.mount,[]),n}const GF=FF;function qF(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.map(function(r){return r.split(" ").map(function(i){return i?""+n+i:""}).join(" ")}).join(" ")}function HF(n,e){return e.replace(/([^}{]*){/gm,function(t,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+n+"$1")+"{"})}function As(n,e){return function(t){t&&(n[e]=t)}}function jM(n,e,t){return function(r){r&&(n[e][t]=r)}}function PI(n,e){return function(t){var r=t.prototype;n.forEach(function(i){e(r,i)})}}function $F(n,e){return e===void 0&&(e={}),function(t,r){n.forEach(function(i){var a=e[i]||i;a in t||(t[a]=function(){for(var o,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var d=(o=this[r])[i].apply(o,c);return d===this[r]?this:d})})}}var YF="function",KF="object",XF="string",WF="number",jw="undefined",zM=typeof window!==jw,QF=typeof document!==jw&&document,ZF=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Un=1e-7,Tm={cm:function(n){return n*96/2.54},mm:function(n){return n*96/254},in:function(n){return n*96},pt:function(n){return n*96/72},pc:function(n){return n*96/6},"%":function(n,e){return n*e/100},vw:function(n,e){return e===void 0&&(e=window.innerWidth),n/100*e},vh:function(n,e){return e===void 0&&(e=window.innerHeight),n/100*e},vmax:function(n,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),n/100*e},vmin:function(n,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),n/100*e}};function JF(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function I0(n,e,t,r){return(n*r+e*t)/(t+r)}function Sv(n){return typeof n===jw}function da(n){return n&&typeof n===KF}function Gn(n){return Array.isArray(n)}function Qr(n){return typeof n===XF}function rd(n){return typeof n===WF}function zw(n){return typeof n===YF}function e7(n,e){var t=n===""||n==" ",r=e===""||e==" ";return r&&t||n===e}function LM(n,e,t,r,i){var a=Lw(n,e,t);return a?t:t7(n,e,t+1,r,i)}function Lw(n,e,t){if(!n.ignore)return null;var r=e.slice(Math.max(t-3,0),t+3).join("");return new RegExp(n.ignore).exec(r)}function t7(n,e,t,r,i){for(var a=function(d){var h=e[d].trim();if(h===n.close&&!Lw(n,e,d))return{value:d};var p=d,m=Zr(i,function(b){var _=b.open;return _===h});if(m&&(p=LM(m,e,d,r,i)),p===-1)return o=d,"break";d=p,o=d},o,c=t;c<r;++c){var u=a(c);if(c=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function Bw(n,e){var t=Qr(e)?{separator:e}:e,r=t.separator,i=r===void 0?",":r,a=t.isSeparateFirst,o=t.isSeparateOnlyOpenClose,c=t.isSeparateOpenClose,u=c===void 0?o:c,d=t.openCloseCharacters,h=d===void 0?ZF:d,p=h.map(function(C){var A=C.open,k=C.close;return A===k?A:A+"|"+k}).join("|"),m="(\\s*"+i+"\\s*|"+p+"|\\s+)",b=new RegExp(m,"g"),_=n.split(b).filter(function(C){return C&&C!=="undefined"}),E=_.length,S=[],T=[];function I(){return T.length?(S.push(T.join("")),T=[],!0):!1}for(var D=function(C){var A=_[C].trim(),k=C,P=Zr(h,function(M){var W=M.open;return W===A}),L=Zr(h,function(M){var W=M.close;return W===A});if(P){if(k=LM(P,_,C,E,h),k!==-1&&u)return I()&&a||(S.push(_.slice(C,k+1).join("")),C=k,a)?(O=C,"break"):(O=C,"continue")}else if(L&&!Lw(L,_,C)){var B=JF(h);return B.splice(h.indexOf(L),1),{value:Bw(n,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:B})}}else if(e7(A,i)&&!o)return I(),a?(O=C,"break"):(O=C,"continue");k===-1&&(k=E-1),T.push(_.slice(C,k+1).join("")),C=k,O=C},O,z=0;z<E;++z){var j=D(z);if(z=O,typeof j=="object")return j.value;if(j==="break")break}return T.length&&S.push(T.join("")),S}function Xo(n){return Bw(n,"")}function Jl(n){return Bw(n,",")}function BM(n){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(n);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function yp(n){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(n);if(!e)return{prefix:"",unit:"",value:NaN};var t=e[1],r=e[2],i=e[3];return{prefix:t,unit:i,value:parseFloat(r)}}function n7(n){return n.replace(/[\s-_]+([^\s-_])/g,function(e,t){return t.toUpperCase()})}function t0(n,e){return n.replace(/([a-z])([A-Z])/g,function(t,r,i){return""+r+e+i.toLowerCase()})}function Uh(){return Date.now?Date.now():new Date().getTime()}function Ms(n,e,t){t===void 0&&(t=-1);for(var r=n.length,i=0;i<r;++i)if(e(n[i],i,n))return i;return t}function Zr(n,e,t){var r=Ms(n,e);return r>-1?n[r]:t}var UM=(function(){var n=Uh(),e=zM&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(t){var r=Uh(),i=setTimeout(function(){t(r-n)},1e3/60);return i}})(),r7=(function(){var n=zM&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return n?n.bind(window):function(e){clearTimeout(e)}})();function Ps(n){return Object.keys(n)}function i7(n){var e=Ps(n);return e.map(function(t){return n[t]})}function Xt(n,e){var t=yp(n),r=t.value,i=t.unit;if(da(e)){var a=e[i];if(a){if(zw(a))return a(r);if(Tm[i])return Tm[i](r,a)}}else if(i==="%")return r*e/100;return Tm[i]?Tm[i](r):r}function zx(n,e,t){return Math.max(e,Math.min(n,t))}function OI(n,e,t,r){return r===void 0&&(r=n[0]/n[1]),[[st(e[0],Un),st(e[0]/r,Un)],[st(e[1]*r,Un),st(e[1],Un)]].filter(function(i){return i.every(function(a,o){var c=e[o],u=st(c,Un);return t?a<=c||a<=u:a>=c||a>=u})})[0]||n}function FM(n,e,t,r){if(!r)return n.map(function(b,_){return zx(b,e[_],t[_])});var i=n[0],a=n[1],o=r===!0?i/a:r,c=OI(n,e,!1,o),u=c[0],d=c[1],h=OI(n,t,!0,o),p=h[0],m=h[1];return i<u||a<d?(i=u,a=d):(i>p||a>m)&&(i=p,a=m),[i,a]}function a7(n){for(var e=n.length,t=0,r=e-1;r>=0;--r)t+=n[r];return t}function Lx(n){for(var e=n.length,t=0,r=e-1;r>=0;--r)t+=n[r];return e?t/e:0}function Rn(n,e){var t=e[0]-n[0],r=e[1]-n[1],i=Math.atan2(r,t);return i>=0?i:i+Math.PI*2}function s7(n){return[0,1].map(function(e){return Lx(n.map(function(t){return t[e]}))})}function VI(n){var e=s7(n),t=Rn(e,n[0]),r=Rn(e,n[1]);return t<r&&r-t<Math.PI||t>r&&r-t<-Math.PI?1:-1}function Cs(n,e){return Math.sqrt(Math.pow((e?e[0]:0)-n[0],2)+Math.pow((e?e[1]:0)-n[1],2))}function st(n,e){if(!e)return n;var t=1/e;return Math.round(n/e)/t}function jI(n,e){return n.forEach(function(t,r){n[r]=st(n[r],e)}),n}function o7(n){for(var e=[],t=0;t<n;++t)e.push(t);return e}function GM(n){return n.reduce(function(e,t){return e.concat(t)},[])}function qM(n,e){n.indexOf(e)===-1&&n.push(e)}function Wn(n,e){return n.classList?n.classList.contains(e):!!n.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function HM(n,e){n.classList?n.classList.add(e):n.className+=" "+e}function $M(n,e){if(n.classList)n.classList.remove(e);else{var t=new RegExp("(\\s|^)"+e+"(\\s|$)");n.className=n.className.replace(t," ")}}function hr(n,e,t,r){n.addEventListener(e,t,r)}function Yn(n,e,t,r){n.removeEventListener(e,t,r)}function Md(n){return n?.ownerDocument||QF}function Uw(n){return Md(n).documentElement}function al(n){return Md(n).body}function Bo(n){var e;return((e=n?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function YM(n){return n&&"postMessage"in n&&"blur"in n&&"self"in n}function Pd(n){return da(n)&&n.nodeName&&n.nodeType&&"ownerDocument"in n}var l7=(function(){function n(){this.keys=[],this.values=[]}var e=n.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,r){var i=this.keys,a=this.values,o=i.indexOf(t),c=o===-1?i.length:o;i[c]=t,a[c]=r},n})(),c7=(function(){function n(){this.object={}}var e=n.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,r){this.object[t]=r},n})(),u7=typeof Map=="function",d7=(function(){function n(){}var e=n.prototype;return e.connect=function(t,r){this.prev=t,this.next=r,t&&(t.next=this),r&&(r.prev=this)},e.disconnect=function(){var t=this.prev,r=this.next;t&&(t.next=r),r&&(r.prev=t)},e.getIndex=function(){for(var t=this,r=-1;t;)t=t.prev,++r;return r},n})();function f7(n,e){var t=[],r=[];return n.forEach(function(i){var a=i[0],o=i[1],c=new d7;t[a]=c,r[o]=c}),t.forEach(function(i,a){i.connect(t[a-1])}),n.filter(function(i,a){return!e[a]}).map(function(i,a){var o=i[0],c=i[1];if(o===c)return[0,0];var u=t[o],d=r[c-1],h=u.getIndex();u.disconnect(),d?u.connect(d,d.next):u.connect(void 0,t[0]);var p=u.getIndex();return[h,p]})}var h7=(function(){function n(t,r,i,a,o,c,u,d){this.prevList=t,this.list=r,this.added=i,this.removed=a,this.changed=o,this.maintained=c,this.changedBeforeAdded=u,this.fixed=d}var e=n.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=f7(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=t.filter(function(a,o){var c=a[0],u=a[1],d=r[o],h=d[0],p=d[1];if(c!==u)return i.push([h,p]),!0}),this.cachePureChanged=i},n})();function bp(n,e,t){var r=u7?Map:t?c7:l7,i=t||function(I){return I},a=[],o=[],c=[],u=n.map(i),d=e.map(i),h=new r,p=new r,m=[],b=[],_={},E=[],S=0,T=0;return u.forEach(function(I,D){h.set(I,D)}),d.forEach(function(I,D){p.set(I,D)}),u.forEach(function(I,D){var O=p.get(I);typeof O>"u"?(++T,o.push(D)):_[O]=T}),d.forEach(function(I,D){var O=h.get(I);typeof O>"u"?(a.push(D),++S):(c.push([O,D]),T=_[D]||0,m.push([O-T,D-S]),b.push(D===O),O!==D&&E.push([O,D]))}),o.reverse(),new h7(n,e,a,o,E,c,m,b)}var p7=(function(){function n(t,r){t===void 0&&(t=[]),this.findKeyCallback=r,this.list=[].slice.call(t)}var e=n.prototype;return e.update=function(t){var r=[].slice.call(t),i=bp(this.list,r,this.findKeyCallback);return this.list=r,i},n})(),Bx=function(n,e){return Bx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Bx(n,e)};function xp(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Bx(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ma=function(){return Ma=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ma.apply(this,arguments)};function KM(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function zI(n,e,t){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function LI(n){var e=0;return n.map(function(t){return t==null?"$compat".concat(++e):"".concat(t)})}function XM(n){var e=[];return n.forEach(function(t){e=e.concat(Gn(t)?XM(t):t)}),e}function D1(n,e){if(!e)return n;for(var t in e)Sv(n[t])&&(n[t]=e[t]);return n}function R0(n,e){if(n===e)return!1;for(var t in n)if(!(t in e))return!0;for(var t in e)if(n[t]!==e[t])return!0;return!1}function BI(n){var e=n.className,t=KM(n,["className"]);return e!=null&&(t.class=e),delete t.style,delete t.children,t}function UI(n){var e={},t={};for(var r in n)r.indexOf("on")===0?t[r]=n[r]:e[r]=n[r];return[e,t]}function Tv(n){if(!n)return null;var e=n.b;return Pd(e)?e:Tv(n.c)}function WM(n){var e=n.parentNode;e&&e.removeChild(n)}function QM(n){n.forEach(function(e){e()})}function g7(){return this.constructor(this.props,this.context)}var Fw=0,Av=(function(){function n(t,r,i,a,o,c,u){u===void 0&&(u={}),this.t=t,this.d=r,this.k=i,this.i=a,this.c=o,this.ref=c,this.ps=u,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=n.prototype;return e.s=function(){return!0},e.u=function(t,r,i,a,o){var c=this,u=c.d,d=i7(r).filter(function(_){return _.$_req}),h=XM(d.map(function(_){return _.$_subs})),p=Zr(h,function(_){return _.d===u});if(c.b&&!Qr(i)&&!o&&!c.s(i.props,a)&&!p){var m=h.reduce(function(_,E){var S=E.d;return _[0]?_[0].d===S&&_.push(E):S>u&&_.push(E),_},[]);return m.forEach(function(_){_p(_,_._ps,[_.o],t,r,!0)}),!1}c.o=i,c.ss(a);var b=c.ps;return Qr(i)||(c.ps=i.props,c.ref=i.ref),Gw(this),c.r(t,r,c.b?b:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var t=this,r=t.ref,i=t.fr;r&&r(i?i.current:t.b)},n})();function ZM(){return Object.__CROACT_CURRENT_INSTNACE__}function m7(){return Fw}function v7(n){Fw=n}function Gw(n){return Object.__CROACT_CURRENT_INSTNACE__=n,Fw=0,n}var qw=(function(){function n(t,r){t===void 0&&(t={}),this.props=t,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=n.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(t,r){return this.props!==t||this.state!==r},e.setState=function(t,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=Ma(Ma({},a.$_state),t),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,r){},e.componentWillUnmount=function(){},e.$_setState=function(t,r){var i=[],a=this.$_p,o=_p(a.c,[a],[a.o],i,a._cs,Ma(Ma({},this.state),this.$_state),r);o&&(t&&i.push(t),QM(i),Gw(null))},n})(),JM=(function(n){xp(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}var t=e.prototype;return t.shouldComponentUpdate=function(r,i){return R0(this.props,r)||R0(this.state,i)},e})(qw);function eP(n){var e=function(t){e.current=t};return e.current=n,e}function y7(n){return n._fr=!0,n}function b7(n,e,t,r){var i,a;return!((i=n?.prototype)===null||i===void 0)&&i.render?a=new n(e,t):(a=new qw(e,t),a.constructor=n,n._fr?(r.fr=eP(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=g7),a.$_p=r,a}var x7=(function(n){xp(e,n);function e(r,i,a,o,c,u,d){d===void 0&&(d={});var h=n.call(this,r,i,a,o,c,u,D1(d,r.defaultProps))||this;return h.typ="comp",h._usefs=[],h._uefs=[],h._defs=[],h}var t=e.prototype;return t.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(D1(r,this.t.defaultProps),i||a.state)!==!1},t.r=function(r,i,a){var o,c,u=this,d=u.t;u.ps=D1(u.ps,u.t.defaultProps);var h=u.ps,p=!u.b,m=d.contextType,b=u.b,_=m?.get(u);u._cs=i,p?(b=b7(d,h,_,u),u.b=b):(b.props=h,b.context=_);var E=b.state;u._usefs=[],u._uefs=[];var S=b.render();((c=(o=S?.props)===null||o===void 0?void 0:o.children)===null||c===void 0?void 0:c.length)===0&&(S.props.children=u.ps.children);var T=Ma(Ma({},i),b.$_cs);_p(u,u._ps,S?[S]:[],r,T),p?u._uefs.push(function(){m?.register(u),b.componentDidMount()}):u._uefs.push(function(){b.componentDidUpdate(a,E)}),r.push(function(){u._usefs.forEach(function(I){I()}),p?u.md():u.ud(),u._defs=u._uefs.map(function(I){return I()})})},t.ss=function(r){var i=this.b;!i||!r||(i.state=r)},t.un=function(){var r,i=this;i._ps.forEach(function(o){o.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(o){o&&o()}),i.b.componentWillUnmount()},e})(Av);function _7(n,e,t){var r=Hw(BI(n),BI(e)),i=r.added,a=r.removed,o=r.changed;for(var c in i)t.setAttribute(c,i[c]);for(var u in o)t.setAttribute(u,o[u][1]);for(var d in a)t.removeAttribute(d)}function w7(n,e,t){var r=Hw(n,e),i=r.added,a=r.removed;for(var o in a)t.e(o,!0);for(var c in i)t.e(c)}function Hw(n,e){var t=Ps(n),r=Ps(e),i=bp(t,r,function(u){return u}),a={},o={},c={};return i.added.forEach(function(u){var d=r[u];a[d]=e[d]}),i.removed.forEach(function(u){var d=t[u];o[d]=n[d]}),i.maintained.forEach(function(u){var d=u[0],h=t[d],p=[n[h],e[h]];n[h]!==e[h]&&(c[h]=p)}),{added:a,removed:o,changed:c}}function E7(n,e,t){var r=t.style,i=Hw(n,e),a=i.added,o=i.removed,c=i.changed;for(var u in a){var d=t0(u,"-");r.setProperty(d,a[u])}for(var u in c){var h=t0(u,"-");r.setProperty(h,c[u][1])}for(var u in o){var p=t0(u,"-");r.removeProperty(p)}}function S7(n){return n.replace(/^on/g,"").toLowerCase()}var T7=(function(n){xp(e,n);function e(){var r=n!==null&&n.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var t=e.prototype;return t.e=function(r,i){var a=this,o=a._es,c=a.b,u=S7(r);i?(Yn(c,u,o[r]),delete o[r]):(o[r]=function(d){var h,p;(p=(h=a.ps)[r])===null||p===void 0||p.call(h,d)},hr(c,u,o[r]))},t.s=function(r){return R0(this.ps,r)},t.r=function(r,i,a){var o,c=this,u=!c.b,d=c.ps;if(u){var h=Tv(c.c),p=!1;c._svg||c.t==="svg"?p=!0:p=h&&h.ownerSVGElement,c._svg=p;var m=(o=c._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],b=c.t;if(m)c._hyd=[].slice.call(m.children||[]);else{var _=Md(h);p?m=_.createElementNS("http://www.w3.org/2000/svg",b):m=_.createElement(b)}c.b=m}_p(c,c._ps,d.children,r,i);var E=c.b,S=UI(a),T=S[0],I=S[1],D=UI(d),O=D[0],z=D[1];return _7(T,O,E),w7(I,z,c),E7(a.style||{},d.style||{},E),r.push(function(){u?c.md():c.ud()}),!0},t.un=function(){var r=this,i=r._es,a=r.b;for(var o in i)Yn(a,o,i[o]);r._ps.forEach(function(c){c.un()}),r._es={},r._sel||WM(a)},e})(Av);function Fh(n){if(!n||Pd(n))return n;var e=n.$_p._ps;return e.length?Fh(e[0].b):null}function tP(n){if(n){if(n.b&&Pd(n.b))return n;var e=n._ps;return e.length?tP(e[0]):null}}function la(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=e||{},a=i.key,o=i.ref,c=KM(i,["key","ref"]);return{type:n,key:a,ref:o,props:Ma(Ma({},c),{children:GM(t).filter(function(u){return u!=null&&u!==!1})})}}var nP=(function(n){xp(e,n);function e(r,i){i===void 0&&(i=0);var a=n.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var t=e.prototype;return t.r=function(){return!0},t.un=function(){},e})(Av),A7=(function(n){xp(e,n);function e(){var r=n!==null&&n.apply(this,arguments)||this;return r.typ="text",r}var t=e.prototype;return t.r=function(r){var i,a=this,o=!a.b;if(o){var c=Tv(a.c),u=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=u||Md(c).createTextNode(a.t.replace("text_",""))}return r.push(function(){o?a.md():a.ud()}),!0},t.un=function(){WM(this.b)},e})(Av);function C7(n,e,t){var r=t.map(function(u){return Qr(u)?null:u.key}),i=LI(e.map(function(u){return u.k})),a=LI(r),o=bp(i,a,function(u){return u});o.removed.forEach(function(u){e.splice(u,1)[0].un()}),o.ordered.forEach(function(u){var d=u[0],h=u[1],p=e.splice(d,1)[0];e.splice(h,0,p);var m=Fh(p.b),b=Fh(e[h+1]&&e[h+1].b);m&&m.parentNode.insertBefore(m,b)}),o.added.forEach(function(u){e.splice(u,0,FI(t[u],r[u],u,n))});var c=o.maintained.filter(function(u){u[0];var d=u[1],h=t[d],p=e[d],m=Qr(h)?"text_".concat(h):h.type;return m!==p.t?(p.un(),e.splice(d,1,FI(h,r[d],d,n)),!0):(p.i=d,!1)});return zI(zI([],o.added,!0),c.map(function(u){u[0];var d=u[1];return d}))}function I7(n,e){for(var t=n._ps,r=t.length,i=e.i+1;i<r;++i){var a=Fh(t[i].b);if(a)return a}return null}function FI(n,e,t,r){var i=r.d+1;if(Qr(n)||rd(n))return new A7("text_".concat(n),i,e,t,r,null,{});var a=n.type,o=typeof a=="string"?T7:x7;return new o(a,i,e,t,r,n.ref,n.props)}function _p(n,e,t,r,i,a,o){var c=C7(n,e,t),u=n._hyd,d=e.filter(function(p,m){return p._hyd=u,p.u(r,i,t[m],a,o)});n.typ==="container"&&n._sel&&e.forEach(function(p){var m=tP(p);m&&(m._sel=!0)}),n._hyd=null;var h=Tv(n);return h&&c.reverse().forEach(function(p){var m=e[p],b=Fh(m.b);if(b&&h!==b&&!b.parentNode){var _=I7(n,m);h.insertBefore(b,_)}}),d.length>0}function R7(n,e,t,r){t===void 0&&(t=e.__CROACT__),r===void 0&&(r={});var i=!!t;t||(t=new nP(e));var a=[];return _p(t,t._ps,n?[n]:[],a,r,void 0,void 0),QM(a),Gw(null),i||(e.__CROACT__=t),t}function GI(n,e,t){return!t&&n&&(t=new nP(e.parentElement),t._hyd=[e],t._sel=!0),R7(n,e,t),t}function rP(n){var e=ZM(),t=e._hs||(e._hs=[]),r=m7(),i=t[r];if(v7(r+1),i){if(!R0(i.deps,n.deps))return i.updated=!1,i;t[r]=n}else t.push(n);return n.value=n.func(),n.updated=!0,n}function D7(n,e){var t=rP({func:n,deps:e});return t.value}function k7(n){return D7(function(){return eP(n)},[])}function iP(n,e,t){var r=ZM(),i=rP({func:function(){return n},deps:e}),a=t?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=n(),i.effect}):a.push(function(){return i.effect})}function N7(n,e,t){iP(function(){n?.(e())},t,!0)}function $w(n,e){for(var t=n.length,r=0;r<t;++r)if(e(n[r],r))return!0;return!1}function aP(n,e){for(var t=n.length,r=0;r<t;++r)if(e(n[r],r))return n[r];return null}function sP(n){var e=n;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function Yw(n,e){try{return new RegExp(n,"g").exec(e)}catch{return null}}function M7(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var n=navigator.userAgentData,e=n.brands||n.uaList;return!!(e&&e.length)}function P7(n,e){var t=Yw("("+n+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return t?t[3]:""}function Ux(n){return n.replace(/_/g,".")}function th(n,e){var t=null,r="-1";return $w(n,function(i){var a=Yw("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(t=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=P7(i.versionTest.toLowerCase(),e)||r),r=Ux(r),!0)}),{preset:t,version:r}}function Am(n,e){var t={brand:"",version:"-1"};return $w(n,function(r){var i=oP(e,r);return i?(t.brand=r.id,t.version=r.versionAlias||i.version,t.version!=="-1"):!1}),t}function oP(n,e){return aP(n,function(t){var r=t.brand;return Yw(""+e.test,r.toLowerCase())})}var lP=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],cP=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Fx=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],uP=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],dP=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function fP(n){return!!th(uP,n).preset}function O7(n){var e=sP(n),t=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:fP(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=th(lP,e),o=a.preset,c=a.version,u=th(dP,e),d=u.preset,h=u.version,p=th(cP,e);if(r.chromium=!!p.preset,r.chromiumVersion=p.version,!r.chromium){var m=th(Fx,e);r.webkit=!!m.preset,r.webkitVersion=m.version}return d&&(i.name=d.id,i.version=h,i.majorVersion=parseInt(h,10)),o&&(r.name=o.id,r.version=c,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:t,isHints:!1}}function V7(n){var e=navigator.userAgentData,t=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=t[0],a=(e.platform||navigator.platform).toLowerCase(),o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Am(uP,t).brand||fP(sP())},c={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&$w(Fx,function(m){return oP(t,m)});var u=Am(cP,t);if(o.chromium=!!u.brand,o.chromiumVersion=u.version||"-1",!o.chromium){var d=Am(Fx,t);o.webkit=!!d.brand,o.webkitVersion=d.version||"-1"}var h=aP(dP,function(m){return new RegExp(""+m.test,"g").exec(a)});c.name=h?h.id:"";{var p=Am(lP,t);o.name=p.brand||o.name,o.version=p.brand&&n?n.uaFullVersion:p.version}return o.webkit&&(c.name=r?"ios":"mac"),c.name==="ios"&&o.webview&&(o.version="-1"),c.version=Ux(c.version),o.version=Ux(o.version),c.majorVersion=parseInt(c.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:c,isMobile:r,isHints:!0}}function j7(n){return M7()?V7():O7(n)}function z7(n,e,t,r,i,a){for(var o=0;o<i;++o){var c=t+o*i,u=r+o*i;n[c]+=n[u]*a,e[c]+=e[u]*a}}function L7(n,e,t,r,i){for(var a=0;a<i;++a){var o=t+a*i,c=r+a*i,u=n[o],d=e[o];n[o]=n[c],n[c]=u,e[o]=e[c],e[c]=d}}function B7(n,e,t,r,i){for(var a=0;a<r;++a){var o=t+a*r;n[o]/=i,e[o]/=i}}function hP(n,e,t){for(var r=n.slice(),i=0;i<t;++i)r[i*t+e-1]=0,r[(e-1)*t+i]=0;return r[(e-1)*(t+1)]=1,r}function Ha(n,e){e===void 0&&(e=Math.sqrt(n.length));for(var t=n.slice(),r=nn(e),i=0;i<e;++i){var a=e*i+i;if(!st(t[a],Un)){for(var o=i+1;o<e;++o)if(t[e*i+o]){L7(t,r,i,o,e);break}}if(!st(t[a],Un))return[];B7(t,r,i,e,t[a]);for(var o=0;o<e;++o){var c=o,u=o+i*e,d=t[u];!st(d,Un)||i===o||z7(t,r,c,i,e,-d)}}return r}function U7(n,e){e===void 0&&(e=Math.sqrt(n.length));for(var t=[],r=0;r<e;++r)for(var i=0;i<e;++i)t[i*e+r]=n[e*r+i];return t}function pP(n,e){e===void 0&&(e=Math.sqrt(n.length));for(var t=[],r=n[e*e-1],i=0;i<e-1;++i)t[i]=n[e*(e-1)+i]/r;return t[e-1]=0,t}function F7(n,e){for(var t=nn(e),r=0;r<e-1;++r)t[e*(e-1)+r]=n[r]||0;return t}function fc(n,e){for(var t=n.slice(),r=n.length;r<e-1;++r)t[r]=0;return t[e-1]=1,t}function fa(n,e,t){if(e===void 0&&(e=Math.sqrt(n.length)),e===t)return n;for(var r=nn(t),i=Math.min(e,t),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)r[a*t+o]=n[a*e+o];r[(a+1)*t-1]=n[(a+1)*e-1],r[(t-1)*t+a]=n[(e-1)*e+a]}return r[t*t-1]=n[e*e-1],r}function D0(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=nn(n);return e.forEach(function(i){r=Wt(r,i,n)}),r}function Wt(n,e,t){t===void 0&&(t=Math.sqrt(n.length));var r=[],i=n.length/t,a=e.length/i;if(i){if(!a)return n}else return e;for(var o=0;o<t;++o)for(var c=0;c<a;++c){r[c*t+o]=0;for(var u=0;u<i;++u)r[c*t+o]+=n[u*t+o]*e[c*i+u]}return r}function At(n,e){for(var t=Math.min(n.length,e.length),r=n.slice(),i=0;i<t;++i)r[i]=r[i]+e[i];return r}function He(n,e){for(var t=Math.min(n.length,e.length),r=n.slice(),i=0;i<t;++i)r[i]=r[i]-e[i];return r}function G7(n,e){return e===void 0&&(e=n.length===6),e?[n[0],n[1],0,n[2],n[3],0,n[4],n[5],1]:n}function gP(n,e){return e===void 0&&(e=n.length===9),e?[n[0],n[1],n[3],n[4],n[6],n[7]]:n}function Cr(n,e,t){t===void 0&&(t=e.length);var r=Wt(n,e,t),i=r[t-1];return r.map(function(a){return a/i})}function q7(n,e){return Wt(n,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function H7(n,e){return Wt(n,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function $7(n,e){return Wt(n,Ep(e,4))}function Cm(n,e){var t=e[0],r=t===void 0?1:t,i=e[1],a=i===void 0?1:i,o=e[2],c=o===void 0?1:o;return Wt(n,[r,0,0,0,0,a,0,0,0,0,c,0,0,0,0,1],4)}function wp(n,e){return Cr(Ep(e,3),fc(n,3))}function k1(n,e){var t=e[0],r=t===void 0?0:t,i=e[1],a=i===void 0?0:i,o=e[2],c=o===void 0?0:o;return Wt(n,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,c,1],4)}function qI(n,e){return Wt(n,e,4)}function Ep(n,e){var t=Math.cos(n),r=Math.sin(n),i=nn(e);return i[0]=t,i[1]=r,i[e]=-r,i[e+1]=t,i}function nn(n){for(var e=n*n,t=[],r=0;r<e;++r)t[r]=r%(n+1)?0:1;return t}function Kw(n,e){for(var t=nn(e),r=Math.min(n.length,e-1),i=0;i<r;++i)t[(e+1)*i]=n[i];return t}function hc(n,e){for(var t=nn(e),r=Math.min(n.length,e-1),i=0;i<r;++i)t[e*(e-1)+i]=n[i];return t}function Xw(n,e,t,r,i,a,o,c){var u=n[0],d=n[1],h=e[0],p=e[1],m=t[0],b=t[1],_=r[0],E=r[1],S=i[0],T=i[1],I=a[0],D=a[1],O=o[0],z=o[1],j=c[0],C=c[1],A=[u,0,h,0,m,0,_,0,d,0,p,0,b,0,E,0,1,0,1,0,1,0,1,0,0,u,0,h,0,m,0,_,0,d,0,p,0,b,0,E,0,1,0,1,0,1,0,1,-S*u,-T*u,-I*h,-D*h,-O*m,-z*m,-j*_,-C*_,-S*d,-T*d,-I*p,-D*p,-O*b,-z*b,-j*E,-C*E],k=Ha(A,8);if(!k.length)return[];var P=Wt(k,[S,T,I,D,O,z,j,C],8);return P[8]=1,fa(U7(P),3,4)}var mh=function(){return mh=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},mh.apply(this,arguments)};function Y7(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Gh(n,e){return e===void 0&&(e=0),Ru(id(n,e))}function K7(n,e){var t=Cr(n,[e[0],e[1]||0,e[2]||0,1],4),r=t[3]||1;return[t[0]/r,t[1]/r,t[2]/r]}function Ru(n){var e=Y7();return n.forEach(function(t){var r=t.matrixFunction,i=t.functionValue;r&&(e=r(e,i))}),e}function id(n,e){e===void 0&&(e=0);var t=Gn(n)?n:Xo(n);return t.map(function(r){var i=BM(r),a=i.prefix,o=i.value,c=null,u=a,d="";if(a==="translate"||a==="translateX"||a==="translate3d"){var h=da(e)?mh(mh({},e),{"o%":e["%"]}):{"%":e,"o%":e},p=Jl(o).map(function(M,W){return W===0&&"x%"in h?h["%"]=e["x%"]:W===1&&"y%"in h?h["%"]=e["y%"]:h["%"]=e["o%"],Xt(M,h)}),m=p[0],b=p[1],_=b===void 0?0:b,E=p[2],S=E===void 0?0:E;c=k1,d=[m,_,S]}else if(a==="translateY"){var T=da(e)?mh({"%":e["y%"]},e):{"%":e},_=Xt(o,T);c=k1,d=[0,_,0]}else if(a==="translateZ"){var S=parseFloat(o);c=k1,d=[0,0,S]}else if(a==="scale"||a==="scale3d"){var I=Jl(o).map(function(M){return parseFloat(M)}),D=I[0],O=I[1],z=O===void 0?D:O,j=I[2],C=j===void 0?1:j;c=Cm,d=[D,z,C]}else if(a==="scaleX"){var D=parseFloat(o);c=Cm,d=[D,1,1]}else if(a==="scaleY"){var z=parseFloat(o);c=Cm,d=[1,z,1]}else if(a==="scaleZ"){var C=parseFloat(o);c=Cm,d=[1,1,C]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var A=yp(o),k=A.unit,P=A.value,L=k==="rad"?P:P*Math.PI/180;a==="rotate"||a==="rotateZ"?(u="rotateZ",c=$7):a==="rotateX"?c=q7:a==="rotateY"&&(c=H7),d=L}else if(a==="matrix3d")c=qI,d=Jl(o).map(function(M){return parseFloat(M)});else if(a==="matrix"){var B=Jl(o).map(function(M){return parseFloat(M)});c=qI,d=[B[0],B[1],0,0,B[2],B[3],0,0,0,0,1,0,B[4],B[5],0,1]}else u="";return{name:a,functionName:u,value:o,matrixFunction:c,functionValue:d}})}var Gx=function(n,e){return Gx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Gx(n,e)};function X7(n,e){Gx(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var mP=typeof Map=="function"?void 0:(function(){var n=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++n)}})(),vP=(function(n){X7(e,n);function e(t){return t===void 0&&(t=[]),n.call(this,t,mP)||this}return e})(p7);function W7(n,e){return bp(n,e,mP)}var qx=function(){return qx=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},qx.apply(this,arguments)};function Q7(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}var Cv=(function(){function n(){this._events={}}var e=n.prototype;return e.on=function(t,r){if(da(t))for(var i in t)this.on(i,t[i]);else this._addEvent(t,r,{});return this},e.off=function(t,r){if(!t)this._events={};else if(da(t))for(var i in t)this.off(i);else if(!r)this._events[t]=[];else{var a=this._events[t];if(a){var o=Ms(a,function(c){return c.listener===r});o>-1&&a.splice(o,1)}}return this},e.once=function(t,r){var i=this;return r&&this._addEvent(t,r,{once:!0}),new Promise(function(a){i._addEvent(t,a,{once:!0})})},e.emit=function(t,r){var i=this;r===void 0&&(r={});var a=this._events[t];if(!t||!a)return!0;var o=!1;return r.eventType=t,r.stop=function(){o=!0},r.currentTarget=this,Q7(a).forEach(function(c){c.listener(r),c.once&&i.off(t,c.listener)}),!o},e.trigger=function(t,r){return r===void 0&&(r={}),this.emit(t,r)},e._addEvent=function(t,r,i){var a=this._events;a[t]=a[t]||[];var o=a[t];o.push(qx({listener:r},i))},n})();var Hx=function(n,e){return Hx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Hx(n,e)};function Z7(n,e){Hx(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Bu=function(){return Bu=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Bu.apply(this,arguments)};function J7(n){var e=n.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function HI(n,e){return n.addEventListener("scroll",e),function(){n.removeEventListener("scroll",e)}}function Im(n){if(n){if(Qr(n))return document.querySelector(n)}else return null;if(zw(n))return n();if(n instanceof Element)return n;if("current"in n)return n.current;if("value"in n)return n.value}var eG=(function(n){Z7(e,n);function e(){var r=n!==null&&n.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var t=e.prototype;return t.dragStart=function(r,i){var a=Im(i.container);if(!a){this._flag=!1;return}var o=0,c=0,u=0,d=0;if(a===document.body)u=window.innerWidth,d=window.innerHeight;else{var h=a.getBoundingClientRect();o=h.top,c=h.left,u=h.width,d=h.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:o,left:c,width:u,height:d},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},t.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,o=r.clientY,c=i.threshold,u=c===void 0?0:c,d=this,h=d._startRect,p=d._startPos;this._currentOptions=i;var m=[0,0];return h.top>o-u?(p[1]>h.top||o<p[1])&&(m[1]=-1):h.top+h.height<o+u&&(p[1]<h.top+h.height||o>p[1])&&(m[1]=1),h.left>a-u?(p[0]>h.left||a<p[0])&&(m[0]=-1):h.left+h.width<a+u&&(p[0]<h.left+h.width||a>p[0])&&(m[0]=1),!m[0]&&!m[1]?!1:this._continueDrag(Bu(Bu({},i),{direction:m,inputEvent:r,isDrag:!0}))}},t.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,o=a===void 0?this._prevScrollPos:a,c=r.direction,u=r.throttleTime,d=u===void 0?0:u,h=r.inputEvent,p=r.isDrag,m=this._getScrollPosition(c||[0,0],r),b=m[0]-o[0],_=m[1]-o[1],E=c||[b?Math.abs(b)/b:0,_?Math.abs(_)/_:0];return this._prevScrollPos=m,this._lock=!1,!b&&!_?!1:(this.emit("move",{offsetX:E[0]?b:0,offsetY:E[1]?_:0,inputEvent:h}),d&&p&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},d)),!0)},t.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},t._getScrollPosition=function(r,i){var a=i.container,o=i.getScrollPosition,c=o===void 0?J7:o;return c({container:Im(a),direction:r})},t._continueDrag=function(r){var i=this,a,o=r.container,c=r.direction,u=r.throttleTime,d=r.useScroll,h=r.isDrag,p=r.inputEvent;if(!(!this._flag||h&&this._isWait)){var m=Uh(),b=Math.max(u+this._prevTime-m,0);if(b>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},b),!1;this._prevTime=m;var _=this._getScrollPosition(c,r);this._prevScrollPos=_,h&&(this._isWait=!0),d||(this._lock=!0);var E={container:Im(o),direction:c,inputEvent:p};return(a=r.requestScroll)===null||a===void 0||a.call(r,E),this.emit("scroll",E),this._isWait=!1,d||this.checkScroll(Bu(Bu({},r),{prevScrollPos:_,direction:c,inputEvent:p}))}},t._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?HI:i,o=Im(r.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=HI(window,this._onScroll):this._unregister=a(o,this._onScroll)}},t._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(Cv);function tG(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function Yr(n){return st(n,Un)}function nG(n,e){return n.every(function(t,r){return Yr(t-e[r])===0})}function rG(n,e){return!Yr(n[0]-e[0])&&!Yr(n[1]-e[1])}function yP(n){return n.length<3?0:Math.abs(a7(n.map(function(e,t){var r=n[t+1]||n[0];return e[0]*r[1]-r[0]*e[1]})))/2}function $I(n,e){var t=e.width,r=e.height,i=e.left,a=e.top,o=pc(n),c=o.minX,u=o.minY,d=o.maxX,h=o.maxY,p=t/(d-c),m=r/(h-u);return n.map(function(b){return[i+(b[0]-c)*p,a+(b[1]-u)*m]})}function pc(n){var e=n.map(function(r){return r[0]}),t=n.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,t),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,t)}}function $x(n,e,t){var r=n[0],i=n[1],a=pc(e),o=a.minX,c=a.maxX,u=[[o,i],[c,i]],d=k0(u[0],u[1]),h=Yx(e),p=[];if(h.forEach(function(_){var E=k0(_[0],_[1]),S=_[0];if(nG(d,E))p.push({pos:n,line:_,type:"line"});else{var T=bP(Ww(d,E),[u,_]);T.forEach(function(I){_.some(function(D){return rG(D,I)})?p.push({pos:I,line:_,type:"point"}):Yr(S[1]-i)!==0&&p.push({pos:I,line:_,type:"intersection"})})}}),Zr(p,function(_){return _[0]===r}))return!0;var m=0,b={};return p.forEach(function(_){var E=_.pos,S=_.type,T=_.line;if(!(E[0]>r))if(S==="intersection")++m;else{if(S==="line")return;if(S==="point"){var I=Zr(T,function(z){return z[1]!==i}),D=b[E[0]],O=I[1]>i?1:-1;D?D!==O&&++m:b[E[0]]=O}}}),m%2===1}function k0(n,e){var t=n[0],r=n[1],i=e[0],a=e[1],o=i-t,c=a-r;Math.abs(o)<Un&&(o=0),Math.abs(c)<Un&&(c=0);var u=0,d=0,h=0;return o?c?(u=-c/o,d=1,h=-u*t-r):(d=1,h=-r):c&&(u=-1,h=t),[u,d,h]}function Ww(n,e){var t=n[0],r=n[1],i=n[2],a=e[0],o=e[1],c=e[2],u=t===0&&a===0,d=r===0&&o===0,h=[];if(u&&d)return[];if(u){var p=-i/r,m=-c/o;return p!==m?[]:[[-1/0,p],[1/0,p]]}else if(d){var b=-i/t,_=-c/a;return b!==_?[]:[[b,-1/0],[b,1/0]]}else if(t===0){var E=-i/r,S=-(o*E+c)/a;h=[[S,E]]}else if(a===0){var E=-c/o,S=-(r*E+i)/t;h=[[S,E]]}else if(r===0){var S=-i/t,E=-(a*S+c)/o;h=[[S,E]]}else if(o===0){var S=-c/a,E=-(t*S+i)/r;h=[[S,E]]}else{var S=(r*c-o*i)/(o*t-r*a),E=-(t*S+i)/r;h=[[S,E]]}return h.map(function(T){return[T[0],T[1]]})}function bP(n,e){var t=e.map(function(p){return[0,1].map(function(m){return[Math.min(p[0][m],p[1][m]),Math.max(p[0][m],p[1][m])]})}),r=[];if(n.length===2){var i=n[0],a=i[0],o=i[1];if(Yr(a-n[1][0])){if(!Yr(o-n[1][1])){var d=Math.max.apply(Math,t.map(function(p){return p[0][0]})),h=Math.min.apply(Math,t.map(function(p){return p[0][1]}));if(Yr(d-h)>0)return[];r=[[d,o],[h,o]]}}else{var c=Math.max.apply(Math,t.map(function(p){return p[1][0]})),u=Math.min.apply(Math,t.map(function(p){return p[1][1]}));if(Yr(c-u)>0)return[];r=[[a,c],[a,u]]}}return r.length||(r=n.filter(function(p){var m=p[0],b=p[1];return t.every(function(_){return 0<=Yr(m-_[0][0])&&0<=Yr(_[0][1]-m)&&0<=Yr(b-_[1][0])&&0<=Yr(_[1][1]-b)})})),r.map(function(p){return[Yr(p[0]),Yr(p[1])]})}function Yx(n){return tG(n.slice(1),[n[0]]).map(function(e,t){return[n[t],e]})}function iG(n,e){var t=n.slice(),r=e.slice();VI(t)===-1&&t.reverse(),VI(r)===-1&&r.reverse();var i=Yx(t),a=Yx(r),o=i.map(function(h){return k0(h[0],h[1])}),c=a.map(function(h){return k0(h[0],h[1])}),u=[];o.forEach(function(h,p){var m=i[p],b=[];c.forEach(function(_,E){var S=Ww(h,_),T=bP(S,[m,a[E]]);b.push.apply(b,T.map(function(I){return{index1:p,index2:E,pos:I,type:"intersection"}}))}),b.sort(function(_,E){return Cs(m[0],_.pos)-Cs(m[0],E.pos)}),u.push.apply(u,b),$x(m[1],r)&&u.push({index1:p,index2:-1,pos:m[1],type:"inside"})}),a.forEach(function(h,p){if($x(h[1],t)){var m=!1,b=Ms(u,function(_){var E=_.index2;return E===p?(m=!0,!1):!!m});b===-1&&(m=!1,b=Ms(u,function(_){var E=_.index1,S=_.index2;return E===-1&&S+1===p?(m=!0,!1):!!m})),b===-1?u.push({index1:-1,index2:p,pos:h[1],type:"inside"}):u.splice(b,0,{index1:-1,index2:p,pos:h[1],type:"inside"})}});var d={};return u.filter(function(h){var p=h.pos,m=p[0]+"x"+p[1];return d[m]?!1:(d[m]=!0,!0)})}function aG(n,e){var t=iG(n,e);return t.map(function(r){var i=r.pos;return i})}function sG(n,e){var t=aG(n,e);return yP(t)}var Kx=function(n,e){return Kx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Kx(n,e)};function oG(n,e){Kx(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var zn=function(){return zn=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},zn.apply(this,arguments)};function lG(n,e){var t=e[0]-n[0],r=e[1]-n[1],i=Math.atan2(r,t);return i>=0?i:i+Math.PI*2}function N1(n){return lG([n[0].clientX,n[0].clientY],[n[1].clientX,n[1].clientY])/Math.PI*180}function cG(n){return n.touches&&n.touches.length>=2}function Rm(n){return n?n.touches?dG(n.touches):[xP(n)]:[]}function uG(n){return n&&(n.type.indexOf("mouse")>-1||"button"in n)}function YI(n,e,t){var r=t.length,i=vh(n,r),a=i.clientX,o=i.clientY,c=i.originalClientX,u=i.originalClientY,d=vh(e,r),h=d.clientX,p=d.clientY,m=vh(t,r),b=m.clientX,_=m.clientY,E=a-h,S=o-p,T=a-b,I=o-_;return{clientX:c,clientY:u,deltaX:E,deltaY:S,distX:T,distY:I}}function M1(n){return Math.sqrt(Math.pow(n[0].clientX-n[1].clientX,2)+Math.pow(n[0].clientY-n[1].clientY,2))}function dG(n){for(var e=Math.min(n.length,2),t=[],r=0;r<e;++r)t.push(xP(n[r]));return t}function xP(n){return{clientX:n.clientX,clientY:n.clientY}}function vh(n,e){e===void 0&&(e=n.length);for(var t={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(n.length,e),i=0;i<r;++i){var a=n[i];t.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,t.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,t.clientX+=a.clientX,t.clientY+=a.clientY}return e?{clientX:t.clientX/e,clientY:t.clientY/e,originalClientX:t.originalClientX/e,originalClientY:t.originalClientY/e}:t}var P1=(function(){function n(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return n.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),N1(e)},n.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),N1(e)-N1(this.startClients)},n.prototype.getPosition=function(e,t){e===void 0&&(e=this.prevClients);var r=YI(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},n.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var t=this.prevClients,r=this.startClients,i=Math.min(this.length,t.length),a=[],o=0;o<i;++o)a[o]=YI([e[o]],[t[o]],[r[o]]);return a},n.prototype.getMovement=function(e){var t=this.movement;if(!e)return t;var r=vh(e,this.length),i=vh(this.prevClients,this.length),a=r.clientX-i.clientX,o=r.clientY-i.clientY;return Math.sqrt(a*a+o*o)+t},n.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),M1(e)},n.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),M1(e)/M1(this.startClients)},n.prototype.move=function(e,t){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=t}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=t})},n})(),KI=["textarea","input"],fG=(function(n){oG(e,n);function e(t,r){r===void 0&&(r={});var i=n.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(m,b){if(b===void 0&&(b=!0),!(!i.flag&&m.cancelable===!1)){var _=m.type.indexOf("drag")>=-1;if(!(i.flag&&_)){i._isDragAPI=!0;var E=i.options,S=E.container,T=E.pinchOutside,I=E.preventWheelClick,D=E.preventRightClick,O=E.preventDefault,z=E.checkInput,j=E.dragFocusedInput,C=E.preventClickEventOnDragStart,A=E.preventClickEventOnDrag,k=E.preventClickEventByCondition,P=i._useTouch,L=!i.flag;if(i._isSecondaryButton=m.which===3||m.button===2,I&&(m.which===2||m.button===1)||D&&(m.which===3||m.button===2))return i.stop(),!1;if(L){var B=i._window.document.activeElement,M=m.target;if(M){var W=M.tagName.toLowerCase(),Q=KI.indexOf(W)>-1,$=M.isContentEditable;if(Q||$){if(z||!j&&B===M)return!1;if(B&&(B===M||$&&B.isContentEditable&&B.contains(M)))if(j)M.blur();else return!1}else if((O||m.type==="touchstart")&&B){var H=B.tagName.toLowerCase();(B.isContentEditable||KI.indexOf(H)>-1)&&B.blur()}(C||A||k)&&hr(i._window,"click",i._onClick,!0)}i.clientStores=[new P1(Rm(m))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=b,i._dragFlag=!0,i._prevInputEvent=m,i.data={},i.doubleFlag=Uh()-i.prevTime<200,i._isMouseEvent=uG(m),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var ee=i._preventMouseEvent||i.emit("dragStart",zn(zn({data:i.data,datas:i.data,inputEvent:m,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:b,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){m.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));ee===!1&&i.stop(),i._isMouseEvent&&i.flag&&O&&m.preventDefault()}if(!i.flag)return!1;var ne=0;if(L?(i._attchDragEvent(),P&&T&&(ne=setTimeout(function(){hr(S,"touchstart",i.onDragStart,{passive:!1})}))):P&&T&&Yn(S,"touchstart",i.onDragStart),i.flag&&cG(m)){if(clearTimeout(ne),L&&m.touches.length!==m.changedTouches.length)return;i.pinchFlag||i.onPinchStart(m)}}}},i.onDrag=function(m,b){if(i.flag){var _=i.options.preventDefault;!i._isMouseEvent&&_&&m.preventDefault(),i._prevInputEvent=m;var E=Rm(m),S=i.moveClients(E,m,!1);if(i._dragFlag){if(i.pinchFlag||S.deltaX||S.deltaY){var T=i._preventMouseEvent||i.emit("drag",zn(zn({},S),{isScroll:!!b,inputEvent:m}));if(T===!1){i.stop();return}}i.pinchFlag&&i.onPinch(m,E)}i.getCurrentStore().getPosition(E,!0)}},i.onDragEnd=function(m){if(i.flag){var b=i.options,_=b.pinchOutside,E=b.container,S=b.preventClickEventOnDrag,T=b.preventClickEventOnDragStart,I=b.preventClickEventByCondition,D=i.isDrag;(S||T||I)&&requestAnimationFrame(function(){i._allowClickEvent()}),!I&&!T&&S&&!D&&i._allowClickEvent(),i._useTouch&&_&&Yn(E,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(m);var O=m?.touches?Rm(m):[],z=O.length;z===0||!i.options.keepDragging?i.flag=!1:i._addStore(new P1(O));var j=i._getPosition(),C=Uh(),A=!D&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=D||A?0:C,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",zn({data:i.data,datas:i.data,isDouble:A,isDrag:D,isClick:!D,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:m,isTrusted:i._isTrusted},j)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Yn(i._window,"click",i._onClick,!0)},i._onClick=function(m){i._allowClickEvent(),i._allowMouseEvent();var b=i.options.preventClickEventByCondition;b?.(m)||(m.stopPropagation(),m.preventDefault())},i._onContextMenu=function(m){var b=i.options;b.preventRightClick?i.onDragEnd(m):m.preventDefault()},i._passCallback=function(){};var a=[].concat(t),o=a[0];i._window=YM(o)?o:Bo(o),i.options=zn({checkInput:!1,container:o&&!("document"in o)?Bo(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var c=i.options,u=c.container,d=c.events,h=c.checkWindowBlur;if(i._useDrag=d.indexOf("drag")>-1,i._useTouch=d.indexOf("touch")>-1,i._useMouse=d.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(m){hr(m,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(m){hr(m,"mousedown",i.onDragStart),hr(m,"mousemove",i._passCallback)}),hr(u,"contextmenu",i._onContextMenu)),h&&hr(Bo(),"blur",i.onBlur),i._useTouch){var p={passive:!1};a.forEach(function(m){hr(m,"touchstart",i.onDragStart,p),hr(m,"touchmove",i._passCallback,p)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(t,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(t,r),a&&this.onDrag(i,!0))},e.prototype.move=function(t,r){var i=t[0],a=t[1],o=this.getCurrentStore(),c=o.prevClients;return this.moveClients(c.map(function(u){var d=u.clientX,h=u.clientY;return{clientX:d+i,clientY:h+a,originalClientX:d,originalClientY:h}}),r,!0)},e.prototype.triggerDragStart=function(t){this.onDragStart(t,!1)},e.prototype.setEventData=function(t){var r=this.data;for(var i in t)r[i]=t[i];return this},e.prototype.setEventDatas=function(t){return this.setEventData(t)},e.prototype.getCurrentEvent=function(t){return t===void 0&&(t=this._prevInputEvent),zn(zn({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var t=this,r=this.targets,i=this.options.container;this.off(),Yn(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){Yn(a,"dragstart",t.onDragStart)}),this._useMouse&&(r.forEach(function(a){Yn(a,"mousedown",t.onDragStart)}),Yn(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){Yn(a,"touchstart",t.onDragStart)}),Yn(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(t){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new P1(Rm(t));this.pinchFlag=!0,this._addStore(a);var o=this.emit("pinchStart",zn(zn({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:t,isTrusted:this._isTrusted,preventDefault:function(){t.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(t,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",zn(zn({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:t,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(t){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",zn(zn({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:t}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(t,r,i){var a=this._getPosition(t,i),o=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var c=!1;return!o&&this.isDrag&&(c=!0),zn(zn({data:this.data,datas:this.data},a),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:c})},e.prototype._addStore=function(t){this.clientStores.splice(0,0,t)},e.prototype._getPosition=function(t,r){var i=this.getCurrentStore(),a=i.getPosition(t,r),o=this.clientStores.slice(1).reduce(function(d,h){var p=h.getPosition();return d.distX+=p.distX,d.distY+=p.distY,d},a),c=o.distX,u=o.distY;return zn(zn({},a),{distX:c,distY:u})},e.prototype._attchDragEvent=function(){var t=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(hr(r,"dragover",this.onDrag,i),hr(t,"dragend",this.onDragEnd)),this._useMouse&&(hr(r,"mousemove",this.onDrag),hr(t,"mouseup",this.onDragEnd)),this._useTouch&&(hr(r,"touchmove",this.onDrag,i),hr(t,"touchend",this.onDragEnd,i),hr(t,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var t=this._window,r=this.options.container;this._isDragAPI&&(Yn(r,"dragover",this.onDrag),Yn(t,"dragend",this.onDragEnd)),this._useMouse&&(Yn(r,"mousemove",this.onDrag),Yn(t,"mouseup",this.onDragEnd)),this._useTouch&&(Yn(r,"touchstart",this.onDragStart),Yn(r,"touchmove",this.onDrag),Yn(t,"touchend",this.onDragEnd),Yn(t,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(Cv);function hG(n){for(var e=5381,t=n.length;t;)e=e*33^n.charCodeAt(--t);return e>>>0}var pG=hG;function gG(n){return pG(n).toString(36)}function mG(n){if(n&&n.getRootNode){var e=n.getRootNode();if(e.nodeType===11)return e}}function vG(n,e,t){return t.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?Jl(a):[""]).map(function(o){var c=o.trim();return c.indexOf("@")===0?c:c.indexOf(":global")>-1?c.replace(/\:global/g,""):c.indexOf(":host")>-1?"".concat(c.replace(/\:host/g,".".concat(n))):c?".".concat(n," ").concat(c):".".concat(n)}).join(", ")+" {"})}function yG(n,e,t,r,i){var a=Md(r),o=a.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",n),o.setAttribute("data-styled-count","1"),t.nonce&&o.setAttribute("nonce",t.nonce),o.innerHTML=vG(n,e,t),(i||a.head||a.body).appendChild(o),o}function bG(n){var e="rCS"+gG(n);return{className:e,inject:function(t,r){r===void 0&&(r={});var i=mG(t),a=(i||t.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=yG(e,n,r,t,i);else{var o=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var c,u=parseFloat(a.getAttribute("data-styled-count"))||0;u<=1?(a.remove?a.remove():(c=a.parentNode)===null||c===void 0||c.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(u-1))}}}}}var Xx=function(){return Xx=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Xx.apply(this,arguments)};function xG(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function _P(n,e){var t=bG(e),r=t.className;return y7(function(i,a){var o=i.className,c=o===void 0?"":o;i.cspNonce;var u=xG(i,["className","cspNonce"]),d=k7();return N7(a,function(){return d.current},[]),iP(function(){var h=t.inject(d.current,{nonce:i.cspNonce});return function(){h.destroy()}},[]),la(n,Xx({ref:d,"data-styled-id":r,className:"".concat(c," ").concat(r)},u))})}var Wx=function(n,e){return Wx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Wx(n,e)};function Sp(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Wx(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var X=function(){return X=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},X.apply(this,arguments)};function _G(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function wG(n,e,t,r){var i=arguments.length,a=i<3?e:r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function EG(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a}function Te(n,e,t){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function Tp(n,e){return X({events:[],props:[],name:n},e)}var SG=["n","w","s","e"],Qw=["n","w","s","e","nw","ne","sw","se"];function TG(n,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*n,'px" height="').concat(32*n,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function AG(n){var e=TG(1,n),t=Math.round(n/45)*45%180,r="ns-resize";return t===135?r="nwse-resize":t===45?r="nesw-resize":t===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Od=j7(),wP=Od.browser.webkit,EP=wP&&(function(){var n=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(n.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),SP=Od.browser.name,TP=parseInt(Od.browser.version,10),CG=SP==="chrome",IG=Od.browser.chromium,RG=parseInt(Od.browser.chromiumVersion,10)||0,DG=CG&&TP>=109||IG&&RG>=109,kG=SP==="firefox",NG=parseInt(Od.browser.webkitVersion,10)>=612||TP>=15,Zw="moveable-",MG=Qw.map(function(n){var e="",t="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return n.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),n.indexOf("s")>-1&&(e="top: 0px;",i="top"),n.indexOf("w")>-1&&(t="left: ".concat(a,";"),r="right"),n.indexOf("e")>-1&&(t="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(n,`"] {
        `).concat(t).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),PG=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(MG,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(n){return`
.direction[data-rotation="`.concat(n,'"], :global .view-control-rotation').concat(n,` {
`).concat(AG(n),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(EP?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),OG=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Qx=1e-4,zr=1e-7,Dm=1e-9,Zx=Math.pow(10,10),XI=-Zx,VG={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Jw={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},AP={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},CP=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Ap(n,e,t,r,i,a){var o,c;a===void 0&&(a="draggable");var u=(c=(o=e.gestos[a])===null||o===void 0?void 0:o.move(t,n.inputEvent))!==null&&c!==void 0?c:{},d=u.originalDatas||u.datas,h=d[a]||(d[a]={});return X(X({},u),{isPinch:!!r,parentEvent:!0,datas:h,originalDatas:n.originalDatas})}var ad=(function(){function n(e){var t;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(t={},t[e]={},t)}return n.prototype.dragStart=function(e,t){this.isDrag=!1,this.isFlag=!1;var r=t.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),X(X({},this.move(e,t.inputEvent)),{type:"dragstart"})},n.prototype.drag=function(e,t){return this.move([e[0]-this.prevX,e[1]-this.prevY],t)},n.prototype.move=function(e,t){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var o=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!o&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:t,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},n})();function Wu(n,e,t,r){var i=n.length===16,a=i?4:3,o=Dc(n,t,r,a),c=Z(o,4),u=Z(c[0],2),d=u[0],h=u[1],p=Z(c[1],2),m=p[0],b=p[1],_=Z(c[2],2),E=_[0],S=_[1],T=Z(c[3],2),I=T[0],D=T[1],O=Z(hn(n,e,a),2),z=O[0],j=O[1],C=Math.min(d,m,E,I),A=Math.min(h,b,S,D),k=Math.max(d,m,E,I),P=Math.max(h,b,S,D);d=d-C||0,m=m-C||0,E=E-C||0,I=I-C||0,h=h-A||0,b=b-A||0,S=S-A||0,D=D-A||0,z=z-C||0,j=j-A||0;var L=n[0],B=n[a+1],M=Mr(L*B);return{left:C,top:A,right:k,bottom:P,origin:[z,j],pos1:[d,h],pos2:[m,b],pos3:[E,S],pos4:[I,D],direction:M}}function IP(n,e){var t=e.clientX,r=e.clientY,i=e.datas,a=n.state,o=a.moveableClientRect,c=a.rootMatrix,u=a.is3d,d=a.pos1,h=o.left,p=o.top,m=u?4:3,b=Z(He(ld(c,[t-h,r-p],m),d),2),_=b[0],E=b[1],S=Z(Za({datas:i,distX:_,distY:E}),2),T=S[0],I=S[1];return[T,I]}function Rc(n,e){var t=e.datas,r=n.state,i=r.allMatrix,a=r.beforeMatrix,o=r.is3d,c=r.left,u=r.top,d=r.origin,h=r.offsetMatrix,p=r.targetMatrix,m=r.transformOrigin,b=o?4:3;t.is3d=o,t.matrix=i,t.targetMatrix=p,t.beforeMatrix=a,t.offsetMatrix=h,t.transformOrigin=m,t.inverseMatrix=Ha(i,b),t.inverseBeforeMatrix=Ha(a,b),t.absoluteOrigin=fc(At([c,u],d),b),t.startDragBeforeDist=Cr(t.inverseBeforeMatrix,t.absoluteOrigin,b),t.startDragDist=Cr(t.inverseMatrix,t.absoluteOrigin,b)}function jG(n){return Wu(n.datas.beforeTransform,[50,50],100,100).direction}function Iv(n,e,t){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,o=i.nextTransforms,c=o.length,u=i.nextTransformAppendedIndexes,d=-1;a===-1?(t==="translate"?d=0:t==="rotate"&&(d=Ms(o,function(b){return b.match(/scale\(/g)})),d===-1&&(d=o.length),r.transformIndex=d):Zr(u,function(b){return b.index===a&&b.functionName===t})?d=a:d=a+u.filter(function(b){return b.index<a}).length;var h=cH(o,n.state,d),p=h.targetFunction,m=t==="rotate"?"rotateZ":t;r.beforeFunctionTexts=h.beforeFunctionTexts,r.afterFunctionTexts=h.afterFunctionTexts,r.beforeTransform=h.beforeFunctionMatrix,r.beforeTransform2=h.beforeFunctionMatrix2,r.targetTansform=h.targetFunctionMatrix,r.afterTransform=h.afterFunctionMatrix,r.afterTransform2=h.afterFunctionMatrix2,r.targetAllTransform=h.allFunctionMatrix,p.functionName===m?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):c>d&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Te(Te([],Z(u),!1),[{functionName:t,index:d,isAppend:!0}],!1))}function Rv(n,e,t){return"".concat(n.beforeFunctionTexts.join(" ")," ").concat(n.isAppendTransform?t:e," ").concat(n.afterFunctionTexts.join(" "))}function zG(n){var e=n.datas,t=n.distX,r=n.distY,i=Z(DP({datas:e,distX:t,distY:r}),2),a=i[0],o=i[1],c=RP(e,F7([a,o],4));return Cr(c,fc([0,0,0],4),4)}function RP(n,e,t){var r=n.beforeTransform,i=n.afterTransform,a=n.beforeTransform2,o=n.afterTransform2,c=n.targetAllTransform,u=t?Wt(c,e,4):Wt(e,c,4),d=Wt(Ha(t?a:r,4),u,4),h=Wt(d,Ha(t?o:i,4),4);return h}function DP(n){var e=n.datas,t=n.distX,r=n.distY,i=e.inverseBeforeMatrix,a=e.is3d,o=e.startDragBeforeDist,c=e.absoluteOrigin,u=a?4:3;return He(Cr(i,At(c,[t,r]),u),o)}function Za(n,e){var t=n.datas,r=n.distX,i=n.distY,a=t.inverseBeforeMatrix,o=t.inverseMatrix,c=t.is3d,u=t.startDragBeforeDist,d=t.startDragDist,h=t.absoluteOrigin,p=c?4:3;return He(Cr(e?a:o,At(h,[r,i]),p),e?u:d)}function LG(n,e){var t=n.datas,r=n.distX,i=n.distY;t.beforeMatrix;var a=t.matrix,o=t.is3d;t.startDragBeforeDist;var c=t.startDragDist,u=t.absoluteOrigin,d=o?4:3;return He(Cr(a,At(c,[r,i]),d),u)}function BG(n,e,t,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=t),a===void 0&&(a=[0,0]),n?n.map(function(o,c){var u=yp(o),d=u.value,h=u.unit,p=c?i:r,m=c?t:e;if(o==="%"||isNaN(d)){var b=p?a[c]/p:0;return m*b}else if(h!=="%")return d;return m*d/100}):a}function kP(n){var e=[];return n[1]>=0&&(n[0]>=0&&e.push(3),n[0]<=0&&e.push(2)),n[1]<=0&&(n[0]>=0&&e.push(1),n[0]<=0&&e.push(0)),e}function UG(n,e){return kP(e).map(function(t){return n[t]})}function O1(n,e){var t=(e+1)/2;return[I0(n[0][0],n[1][0],t,1-t),I0(n[0][1],n[1][1],t,1-t)]}function Qn(n,e){var t=O1([n[0],n[1]],e[0]),r=O1([n[2],n[3]],e[0]);return O1([t,r],e[1])}function FG(n,e,t,r,i,a){var o=Dc(e,t,r,i),c=Qn(o,a),u=n[0]-c[0],d=n[1]-c[1];return[u,d]}function Cp(n,e,t,r){return Wt(n,bh(e,r,t),r)}function GG(n,e,t,r){var i=n.transformOrigin,a=n.offsetMatrix,o=n.is3d,c=o?4:3,u;if(Qr(t)){var d=e.beforeTransform,h=e.afterTransform;r?u=fa(Gh(t),4,c):u=fa(Wt(Wt(d,Gh([t]),4),h,4),4,c)}else u=t;return Cp(a,u,i,c)}function qG(n,e){var t=n.transformOrigin,r=n.offsetMatrix,i=n.is3d,a=n.targetMatrix,o=n.targetAllTransform,c=i?4:3;return Cp(r,Wt(o||a,Kw(e,c),c),t,c)}function Dv(n,e){var t=Vd(e);return{setTransform:function(r,i){i===void 0&&(i=-1),t.startTransforms=Gn(r)?r:Xo(r),Jx(n,e,i)},setTransformIndex:function(r){Jx(n,e,r)}}}function kv(n,e,t){var r=Vd(e),i=r.startTransforms;Jx(n,e,Ms(i,function(a){return a.indexOf("".concat(t,"("))===0}))}function Jx(n,e,t){var r=Vd(e),i=e.datas;if(i.transformIndex=t,t!==-1){var a=r.startTransforms[t];if(a){var o=n.state,c=id([a],{"x%":function(u){return u/100*o.offsetWidth},"y%":function(u){return u/100*o.offsetHeight}});i.startValue=c[0].functionValue}}}function eE(n,e){var t=Vd(n);t.nextTransforms=Xo(e)}function Vd(n){return n.originalDatas.beforeRenderable}function N0(n){var e=n.originalDatas.beforeRenderable;return e.nextTransforms}function km(n){return(N0(n)||[]).join(" ")}function Nm(n){return Vd(n).nextStyle}function NP(n,e,t,r,i){eE(i,e);var a=Nr.drag(n,Ap(i,n.state,t,r)),o=a?a.transform:e;return X(X({transform:e,drag:a},Vr({transform:o},i)),{afterTransform:o})}function tE(n,e,t,r,i,a){var o=GG(n.state,i,e,a),c=YG(n,t,r,o);return c}function MP(n,e,t,r,i,a,o){var c=tE(n,e,t,i,a,o),u=n.state,d=u.left,h=u.top,p=n.props.groupable,m=p?d:0,b=p?h:0,_=He(r,c);return He(_,[m,b])}function HG(n,e,t,r,i,a,o){var c=MP(n,e,t,r,i,a,o);return c}function $G(n,e,t){return[e?-1+n[0]/(e/2):0,t?-1+n[1]/(t/2):0]}function YG(n,e,t,r){r===void 0&&(r=n.state.allMatrix);var i=n.state,a=i.width,o=i.height,c=i.is3d,u=c?4:3,d=[a/2*(1+e[0])+t[0],o/2*(1+e[1])+t[1]];return hn(r,d,u)}function KG(n,e,t){var r=t.fixedDirection,i=t.fixedPosition,a=t.fixedOffset;return MP(n,"rotate(".concat(e,"deg)"),r,i,a,t)}function XG(n,e,t,r,i,a){var o=n.props.groupable,c=n.state,u=c.transformOrigin,d=c.offsetMatrix,h=c.is3d,p=c.width,m=c.height,b=c.left,_=c.top,E=a.fixedDirection,S=a.nextTargetMatrix||c.targetMatrix,T=h?4:3,I=BG(i,e,t,p,m,u),D=o?b:0,O=o?_:0,z=Cp(d,S,I,T),j=FG(r,z,e,t,T,E);return He(j,[D,O])}function WG(n,e){return Qn(Fi(n.state),e)}function QG(n,e){var t=n.targetGesto,r=n.controlGesto,i;return t?.isFlag()&&(i=t.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function ZG(n){if(n&&n.getRootNode){var e=n.getRootNode();if(e.nodeType===11)return e}}function JG(n){var e=n("scale"),t=n("rotate"),r=n("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),t&&t!=="1"&&t!=="none"&&i.push("rotate(".concat(t,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function PP(n,e,t){for(var r=n,i=[],a=Uw(n)||al(n),o=!t&&n===e||n===a,c=o,u=!1,d=3,h,p,m,b=!1,_=Hh(e,e,!0).offsetParent,E=1;r&&!c;){c=o;var S=Jr(r),T=S("position"),I=iO(r),D=T==="fixed",O=JG(S),z=G7(Wq(I)),j=void 0,C=!1,A=!1,k=0,P=0,L=0,B=0,M={hasTransform:!1,fixedContainer:null};D&&(b=!0,M=tH(r),_=M.fixedContainer);var W=z.length;!u&&(W===16||O.length)&&(u=!0,d=4,a_(i),m&&(m=fa(m,3,4))),u&&W===9&&(z=fa(z,3,4));var Q=eH(r,n),$=Q.tagName,H=Q.hasOffset,ee=Q.isSVG,ne=Q.origin,de=Q.targetOrigin,U=Q.offset,Y=Z(U,2),te=Y[0],se=Y[1];$==="svg"&&!r.ownerSVGElement&&m&&(i.push({type:"target",target:r,matrix:nH(r,d)}),i.push({type:"offset",target:r,matrix:nn(d)}));var pe=parseFloat(S("zoom"))||1;if(D)j=M.fixedContainer,C=!0;else{var ie=Hh(r,e,!1,!0,S),ve=ie.offsetZoom;if(j=ie.offsetParent,C=ie.isEnd,A=ie.isStatic,E*=ve,(ie.isCustomElement||ve!==1)&&A)te-=j.offsetLeft,se-=j.offsetTop;else if(kG||DG){var Ae=ie.parentSlotElement;if(Ae){for(var Ie=j,ke=0,xe=0;Ie&&ZG(Ie);)ke+=Ie.offsetLeft,xe+=Ie.offsetTop,Ie=Ie.offsetParent;te-=ke,se-=xe}}}if(wP&&!NG&&H&&!ee&&A&&(T==="relative"||T==="static")&&(te-=j.offsetLeft,se-=j.offsetTop,o=o||C),D)H&&M.hasTransform&&(L=j.clientLeft,B=j.clientTop);else if(H&&_!==j&&(k=j.clientLeft,P=j.clientTop),H&&j===a){var Ee=aO(r,!1);te+=Ee[0],se+=Ee[1]}if(i.push({type:"target",target:r,matrix:bh(z,d,ne)}),O.length&&(i.push({type:"offset",target:r,matrix:nn(d)}),i.push({type:"target",target:r,matrix:bh(Gh(O),d,ne)})),H){var Xe=r===n,je=Xe?0:r.scrollLeft,Le=Xe?0:r.scrollTop;i.push({type:"offset",target:r,matrix:hc([te-je+k-L,se-Le+P-B],d)})}else i.push({type:"offset",target:r,origin:ne});if(pe!==1&&i.push({type:"zoom",target:r,matrix:bh(Kw([pe,pe],d),d,[0,0])}),m||(m=z),h||(h=ne),p||(p=de),c||D)break;r=j,o=C,(!t||r===a)&&(c=o)}return m||(m=nn(d)),h||(h=[0,0]),p||(p=[0,0]),{zoom:E,offsetContainer:_,matrixes:i,targetMatrix:m,transformOrigin:h,targetOrigin:p,is3d:u,hasFixed:b}}var Gl=null,ql=null,Uu=null;function sd(n){n?(window.Map&&(Gl=new Map,ql=new Map),Uu=[]):(Gl=null,Uu=null,ql=null)}function eq(n){var e=ql?.get(n);if(e)return e;var t=xh(n,!0);return ql&&ql.set(n,t),t}function tq(n,e){if(Uu){var t=Zr(Uu,function(i){return i[0][0]==n&&i[0][1]==e});if(t)return t[1]}var r=PP(n,e,!0);return Uu&&Uu.push([[n,e],r]),r}function Jr(n){var e=Gl?.get(n);if(!e){var t=Bo(n).getComputedStyle(n);if(!Gl)return function(a){return t[a]};e={style:t,cached:{}},Gl.set(n,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function ca(n,e,t){var r=t.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return n.moveables.map(function(o,c){return a[c]=a[c]||{},a[c][e]=a[c][e]||{},X(X({},t),{isRequestChild:!0,datas:a[c][e],originalDatas:a[c]})})}function V1(n,e,t,r,i,a,o){var c=!!t.match(/Start$/g),u=!!t.match(/End$/g),d=i.isPinch,h=i.datas,p=ca(n,e.name,i),m=n.moveables,b=[],_=p.map(function(E,S){var T=m[S],I=T.state,D=I.gestos,O=E;if(c)O=new ad(o).dragStart(r,E),b.push(O);else{if(D[o]||(D[o]=h.childGestos[S]),!D[o])return;O=Ap(E,I,r,d,a,o),b.push(O)}var z=e[t](T,X(X({},O),{parentFlag:!0}));return u&&(D[o]=null),z});return c&&(h.childGestos=m.map(function(E){return E.state.gestos[o]})),{eventParams:_,childEvents:b}}function Is(n,e,t,r,i,a){i===void 0&&(i=function(h,p){return p});var o=!!t.match(/End$/g),c=ca(n,e.name,r),u=n.moveables,d=c.map(function(h,p){var m=u[p],b=h;b=i(m,h);var _=e[t](m,X(X({},b),{parentFlag:!0}));return o&&(m.state.gestos={}),_});return d}function M0(n,e,t,r){var i=t.fixedDirection,a=t.fixedPosition,o=r.datas.startPositions||Fi(e.state),c=Qn(o,i),u=Z(Cr(Ep(-n.rotation/180*Math.PI,3),[c[0]-a[0],c[1]-a[1],1],3),2),d=u[0],h=u[1];return r.datas.originalX=d,r.datas.originalY=h,r}function OP(n,e,t,r){var i=n.getState(),a=i.renderPoses,o=i.rotation,c=i.direction,u=gc(n.props,e).zoom,d=yh(o/Math.PI*180),h={},p=n.renderState;p.renderDirectionMap||(p.renderDirectionMap={});var m=p.renderDirectionMap;t.forEach(function(_){var E=_.dir;h[E]=!0});var b=Mr(c);return t.map(function(_){var E=_.data,S=_.classNames,T=_.dir,I=Jw[T];if(!I||!h[T])return null;m[T]=!0;var D=(st(d,15)+b*AP[T]+720)%180,O={};return Ps(E).forEach(function(z){O["data-".concat(z)]=E[z]}),r.createElement("div",X({className:Fe.apply(void 0,Te(["control","direction",T,e],Z(S),!1)),"data-rotation":D,"data-direction":T},O,{key:"direction-".concat(T),style:j0.apply(void 0,Te([o,u],Z(I.map(function(z){return a[z]})),!1))}))})}function VP(n,e,t,r){var i=gc(n.props,t),a=i.renderDirections,o=a===void 0?e:a,c=i.displayAroundControls;if(!o)return[];var u=o===!0?Qw:o;return Te(Te([],Z(c?BP(n,r,t,u):[]),!1),Z(OP(n,t,u.map(function(d){return{data:{},classNames:[],dir:d}}),r)),!1)}function qh(n,e,t,r,i,a){for(var o=[],c=6;c<arguments.length;c++)o[c-6]=arguments[c];var u=Rn(t,r),d=e?st(u/Math.PI*180,15)%180:-1;return n.createElement("div",{key:"line-".concat(a),className:Fe.apply(void 0,Te(["line","direction",e?"edge":"",e],Z(o),!1)),"data-rotation":d,"data-line-key":a,"data-direction":e,style:rh(t,r,i,u)})}function jP(n,e,t,r,i){var a=t===!0?SG:t;return a.map(function(o,c){var u=Z(Jw[o],2),d=u[0],h=u[1];if(h!=null)return qh(n,o,r[d],r[h],i,"".concat(e,"Edge").concat(c),e)}).filter(Boolean)}function zP(n){return function(e,t){var r=gc(e.props,n).edge;return r&&(r===!0||r.length)?Te(Te([],Z(jP(t,n,r,e.getState().renderPoses,e.props.zoom)),!1),Z(nq(e,n,t)),!1):LP(e,n,t)}}function LP(n,e,t){return VP(n,Qw,e,t)}function nq(n,e,t){return VP(n,["nw","ne","sw","se"],e,t)}function BP(n,e,t,r){var i=n.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=n.getState(),o=a.renderPoses,c=a.rotation,u=a.direction,d=i.renderDirectionMap,h=n.props.zoom,p=Mr(u),m=c/Math.PI*180;return(r||Ps(d)).map(function(b){var _=Jw[b];if(!_)return null;var E=(st(m,15)+p*AP[b]+720)%180,S=["around-control"];return t&&S.push("direction",t),e.createElement("div",{className:Fe.apply(void 0,Te([],Z(S),!1)),"data-rotation":E,"data-direction":b,key:"direction-around-".concat(b),style:j0.apply(void 0,Te([c,h],Z(_.map(function(T){return o[T]})),!1))})})}function nE(n,e,t){var r=n||{},i=r.position,a=i===void 0?"client":i,o=r.left,c=o===void 0?-1/0:o,u=r.top,d=u===void 0?-1/0:u,h=r.right,p=h===void 0?1/0:h,m=r.bottom,b=m===void 0?1/0:m,_={position:a,left:c,top:d,right:p,bottom:b};return{vertical:WI(_,e,!0),horizontal:WI(_,t,!1)}}function Nv(n,e){var t=n.state,r=t.containerClientRect,i=r.clientHeight,a=r.clientWidth,o=r.clientLeft,c=r.clientTop,u=t.snapOffset,d=u.left,h=u.top,p=u.right,m=u.bottom,b=e||n.props.bounds||{},_=b.position||"client",E=_==="css",S=b.left,T=S===void 0?-1/0:S,I=b.top,D=I===void 0?-1/0:I,O=b.right,z=O===void 0?E?-1/0:1/0:O,j=b.bottom,C=j===void 0?E?-1/0:1/0:j;return E&&(z=a+p-d-z,C=i+m-h-C),{left:T+d-o,right:z+d-o,top:D+h-c,bottom:C+h-c}}function rq(n,e,t){var r=Nv(n),i=r.left,a=r.top,o=r.right,c=r.bottom,u=Z(t,2),d=u[0],h=u[1],p=Z(He(t,e),2),m=p[0],b=p[1];_e(m)<zr&&(m=0),_e(b)<zr&&(b=0);var _=b>0,E=m>0,S={isBound:!1,offset:0,pos:0},T={isBound:!1,offset:0,pos:0};if(m===0&&b===0)return{vertical:S,horizontal:T};if(m===0)_?c<h&&(T.pos=c,T.offset=h-c):a>h&&(T.pos=a,T.offset=h-a);else if(b===0)E?o<d&&(S.pos=o,S.offset=d-o):i>d&&(S.pos=i,S.offset=d-i);else{var I=b/m,D=t[1]-I*d,O=0,z=0,j=!1;E&&o<=d?(O=I*o+D,z=o,j=!0):!E&&d<=i&&(O=I*i+D,z=i,j=!0),j&&(O<a||O>c)&&(j=!1),j||(_&&c<=h?(O=c,z=(O-D)/I,j=!0):!_&&h<=a&&(O=a,z=(O-D)/I,j=!0)),j&&(S.isBound=!0,S.pos=z,S.offset=d-z,T.isBound=!0,T.pos=O,T.offset=h-O)}return{vertical:S,horizontal:T}}function WI(n,e,t){var r=n[t?"left":"top"],i=n[t?"right":"bottom"],a=Math.min.apply(Math,Te([],Z(e),!1)),o=Math.max.apply(Math,Te([],Z(e),!1)),c=[];return r+1>a&&c.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<o&&c.push({direction:"end",isBound:!0,offset:o-i,pos:i}),c.length||c.push({isBound:!1,offset:0,pos:0}),c.sort(function(u,d){return _e(d.offset)-_e(u.offset)})}function QI(n,e,t){var r=t?n.map(function(i){return wp(i,t)}):n;return r.some(function(i){return i[0]<e.left&&_e(i[0]-e.left)>.1||i[0]>e.right&&_e(i[0]-e.right)>.1||i[1]<e.top&&_e(i[1]-e.top)>.1||i[1]>e.bottom&&_e(i[1]-e.bottom)>.1})}function iq(n,e,t){var r=Ui(n),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,o){return _e(a-n[t?0:1])-_e(o-n[t?0:1])}).map(function(a){return Rn([0,0],t?[a,e]:[e,a])})}function aq(n,e,t,r,i){if(!n.props.bounds)return[];var a=i*Math.PI/180,o=Nv(n),c=o.left,u=o.top,d=o.right,h=o.bottom,p=c-r[0],m=d-r[0],b=u-r[1],_=h-r[1],E={left:p,top:b,right:m,bottom:_};if(!QI(t,E,0))return[];var S=[];return[[p,0],[m,0],[b,1],[_,1]].forEach(function(T){var I=Z(T,2),D=I[0],O=I[1];t.forEach(function(z){var j=Rn([0,0],z);S.push.apply(S,Te([],Z(iq(z,D,O).map(function(C){return a+C-j}).filter(function(C){return!QI(e,E,C)}).map(function(C){return st(C*180/Math.PI,zr)})),!1))})}),S}var sq=["left","right","center"],oq=["top","bottom","middle"],ZI={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Wo={start:"left",end:"right",center:"center"},Qo={start:"top",end:"bottom",center:"middle"};function Fu(){return{left:!1,top:!1,right:!1,bottom:!1}}function jd(n,e){var t=n.props,r=t.snappable,i=t.bounds,a=t.innerBounds,o=t.verticalGuidelines,c=t.horizontalGuidelines,u=t.snapGridWidth,d=t.snapGridHeight,h=n.state,p=h.guidelines,m=h.enableSnap;return!r||!m||e&&r!==!0&&r.indexOf(e)<0?!1:!!(u||d||i||a||p&&p.length||o&&o.length||c&&c.length)}function rE(n){return n===!1?{}:n===!0||!n?{left:!0,right:!0,top:!0,bottom:!0}:n}function lq(n,e){var t=rE(n),r={};for(var i in t)i in e&&t[i]&&(r[i]=e[i]);return r}function iE(n,e){var t=lq(n,e),r=oq.filter(function(a){return a in t}),i=sq.filter(function(a){return a in t});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return t[a]}),vertical:i.map(function(a){return t[a]})}}function cq(n,e,t){var r=hn(n,[e.clientLeft,e.clientTop],t);return[e.left+r[0],e.top+r[1]]}function uq(n){var e=Z(n,2),t=e[0],r=e[1],i=r[0]-t[0],a=r[1]-t[1];Math.abs(i)<Un&&(i=0),Math.abs(a)<Un&&(a=0);var o=0,c=0,u=0;return i?a?(o=-a/i,c=1,u=o*t[0]-t[1]):(c=1,u=-t[1]):(o=-1,u=t[0]),[o,c,u].map(function(d){return st(d,Un)})}var UP="snapRotationThreshold",FP="snapRotationDegrees",GP="snapHorizontalThreshold",qP="snapVerticalThreshold";function Mv(n,e,t,r,i,a,o){var c;r===void 0&&(r=[]),i===void 0&&(i=[]);var u=n.props,d=((c=n.state.snapThresholdInfo)===null||c===void 0?void 0:c.multiples)||[1,1],h=hR(o,u[GP],5),p=hR(a,u[qP],5);return HP(n.state.guidelines,e,t,r,i,h,p,d)}function HP(n,e,t,r,i,a,o,c){return{vertical:eR(n,"vertical",e,o*c[0],r),horizontal:eR(n,"horizontal",t,a*c[1],i)}}function dq(n,e,t){var r=Z(t,2),i=r[0],a=r[1],o=Z(e,2),c=o[0],u=o[1],d=Z(He(t,e),2),h=d[0],p=d[1],m=p>0,b=h>0;h=z0(h),p=z0(p);var _={isSnap:!1,offset:0,pos:0},E={isSnap:!1,offset:0,pos:0};if(h===0&&p===0)return{vertical:_,horizontal:E};var S=Mv(n,h?[i]:[],p?[a]:[],[],[],void 0,void 0),T=S.vertical,I=S.horizontal;T.posInfos.filter(function($){var H=$.pos;return b?H>=c:H<=c}),I.posInfos.filter(function($){var H=$.pos;return m?H>=u:H<=u}),T.isSnap=T.posInfos.length>0,I.isSnap=I.posInfos.length>0;var D=e_(T),O=D.isSnap,z=D.guideline,j=e_(I),C=j.isSnap,A=j.guideline,k=C?A.pos[1]:0,P=O?z.pos[0]:0;if(h===0)C&&(E.isSnap=!0,E.pos=A.pos[1],E.offset=a-E.pos);else if(p===0)O&&(_.isSnap=!0,_.pos=P,_.offset=i-P);else{var L=p/h,B=t[1]-L*i,M=0,W=0,Q=!1;O?(W=P,M=L*W+B,Q=!0):C&&(M=k,W=(M-B)/L,Q=!0),Q&&(_.isSnap=!0,_.pos=W,_.offset=i-W,E.isSnap=!0,E.pos=M,E.offset=a-M)}return{vertical:_,horizontal:E}}function Vo(n){var e="";return n===-1||n==="top"||n==="left"?e="start":n===0||n==="center"||n==="middle"?e="center":(n===1||n==="right"||n==="bottom")&&(e="end"),e}function JI(n,e,t,r){var i=iE(n.props.snapDirections,e),a=Mv(n,i.vertical,i.horizontal,i.verticalNames.map(function(u){return Vo(u)}),i.horizontalNames.map(function(u){return Vo(u)}),t,r),o=Vo(i.horizontalNames[a.horizontal.index]),c=Vo(i.verticalNames[a.vertical.index]);return{vertical:X(X({},a.vertical),{direction:c}),horizontal:X(X({},a.horizontal),{direction:o})}}function e_(n){var e=n.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var t=n.posInfos[0],r=t.guidelineInfos[0],i=r.offset,a=r.dist,o=r.guideline;return{isSnap:e,offset:i,dist:a,pos:t.pos,guideline:o}}function eR(n,e,t,r,i){var a,o;if(i===void 0&&(i=[]),!n||!n.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var c=e==="vertical",u=c?0:1,d=t.map(function(p,m){var b=i[m]||"",_=n.map(function(E){var S=E.pos,T=p-S[u];return{offset:T,dist:_e(T),guideline:E,direction:b}}).filter(function(E){var S=E.guideline,T=E.dist,I=S.type;return!(I!==e||T>r)}).sort(function(E,S){return E.dist-S.dist});return{pos:p,index:m,guidelineInfos:_,direction:b}}).filter(function(p){return p.guidelineInfos.length>0}).sort(function(p,m){return p.guidelineInfos[0].dist-m.guidelineInfos[0].dist}),h=d.length>0;return{isSnap:h,index:h?d[0].index:-1,direction:(o=(a=d[0])===null||a===void 0?void 0:a.direction)!==null&&o!==void 0?o:"",posInfos:d}}function fq(n,e,t,r,i){var a=[];t[0]&&t[1]?a=[t,[-t[0],t[1]],[t[0],-t[1]]]:!t[0]&&!t[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(m,b,_){var E=_[b+1]||_[0];a.push(m),a.push([(m[0]+E[0])/2,(m[1]+E[1])/2])}):n.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],t):(a.push.apply(a,Te([],Z(UG([[-1,-1],[1,-1],[-1,-1],[1,1]],t)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var o=a.map(function(m){return Qn(e,m)}),c=o.map(function(m){return m[0]}),u=o.map(function(m){return m[1]}),d=Mv(n,c,u,a.map(function(m){return Vo(m[0])}),a.map(function(m){return Vo(m[1])}),r,i),h=Vo(a.map(function(m){return m[0]})[d.vertical.index]),p=Vo(a.map(function(m){return m[1]})[d.horizontal.index]);return{vertical:X(X({},d.vertical),{direction:h}),horizontal:X(X({},d.horizontal),{direction:p})}}function $P(n,e){var t=_e(n.offset),r=_e(e.offset);return n.isBound&&e.isBound?r-t:n.isBound?-1:e.isBound?1:n.isSnap&&e.isSnap?r-t:n.isSnap?-1:e.isSnap||t<zr?1:r<zr?-1:t-r}function P0(n,e){return n.slice().sort(function(t,r){var i=t.sign[e],a=r.sign[e],o=t.offset[e],c=r.offset[e];if(i){if(!a)return-1}else return 1;return $P({isBound:t.isBound,isSnap:t.isSnap,offset:o},{isBound:r.isBound,isSnap:r.isSnap,offset:c})})[0]}function hq(n,e,t){var r=[];if(t)_e(e[0])!==1||_e(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[n[0],-n[1]]],[e,[-n[0],n[1]]]),r.push([e,n]);else if(n[0]&&n[1]||!n[0]&&!n[1]){var i=n[0]?n:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(c){var u=[o*i[0],c*i[1]];e[0]===u[0]&&e[1]===u[1]||r.push([e,u])})})}else if(n[0]){var a=_e(e[0])===1?[1]:[1,-1];a.forEach(function(o){r.push([[e[0],-1],[o*n[0],-1]],[[e[0],0],[o*n[0],0]],[[e[0],1],[o*n[0],1]])})}else if(n[1]){var a=_e(e[1])===1?[1]:[1,-1];a.forEach(function(c){r.push([[-1,e[1]],[-1,c*n[1]]],[[0,e[1]],[0,c*n[1]]],[[1,e[1]],[1,c*n[1]]])})}return r}function YP(n,e){var t=Lx([e[0][0],e[1][0]]),r=Lx([e[0][1],e[1][1]]);return{vertical:t<=n[0],horizontal:r<=n[1]}}function aE(n,e){var t=Z(e,2),r=t[0],i=t[1],a=i[0]-r[0],o=i[1]-r[1];_e(a)<zr&&(a=0),_e(o)<zr&&(o=0);var c,u;if(!a)c=r[0],u=n[0];else if(!o)c=r[1],u=n[1];else{var d=o/a;c=d*(n[0]-r[0])+r[1],u=n[1]}return c-u}function KP(n,e,t,r){return r===void 0&&(r=zr),n.every(function(i){var a=aE(i,e),o=a<=0;return o===t||_e(a)<=r})}function tR(n,e,t,r,i){return i===void 0&&(i=0),r&&e-i<=n||!r&&n<=t+i?{isBound:!0,offset:r?e-n:t-n}:{isBound:!1,offset:0}}function pq(n,e){var t=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,o=e.lineConstants,c=n.props.innerBounds;if(!c)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=c.left,d=c.top,h=c.width,p=c.height,m=[[u,d],[u,d+p]],b=[[u,d],[u+h,d]],_=[[u+h,d],[u+h,d+p]],E=[[u,d+p],[u+h,d+p]];if(KP([[u,d],[u+h,d],[u,d+p],[u+h,d+p]],t,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var S=jo(t,o,b,i),T=jo(t,o,E,i),I=jo(t,o,m,a),D=jo(t,o,_,a),O=S.isBound&&T.isBound,z=S.isBound||T.isBound,j=I.isBound&&D.isBound,C=I.isBound||D.isBound,A=od(S.offset,T.offset),k=od(I.offset,D.offset),P=[0,0],L=!1,B=!1;return _e(k)<_e(A)?(P=[A,0],L=z,B=O):(P=[0,k],L=C,B=j),{isAllBound:B,isVerticalBound:z,isHorizontalBound:C,isBound:L,offset:P}}function jo(n,e,t,r,i,a){var o=Z(e,2),c=o[0],u=o[1],d=n[0],h=t[0],p=t[1],m=z0(p[1]-h[1]),b=z0(p[0]-h[0]),_=u,E=c,S=-c/u;if(b){if(!m){if(a&&!_)return{isBound:!1,offset:0};if(E){var O=(h[1]-d[1])/S+d[0];return tR(O,h[0],p[0],r,i)}else{var I=h[1]-d[1],D=_e(I)<=(i||0);return{isBound:D,offset:D?I:0}}}}else{if(a&&!E)return{isBound:!1,offset:0};if(_){var T=S*(h[0]-d[0])+d[1];return tR(T,h[1],p[1],r,i)}else{var I=h[0]-d[0],D=_e(I)<=(i||0);return{isBound:D,offset:D?I:0}}}return{isBound:!1,offset:0}}function XP(n,e,t){return e.map(function(r){var i=pq(n,r),a=i.isBound,o=i.offset,c=i.isVerticalBound,u=i.isHorizontalBound,d=r.multiple,h=Za({datas:t,distX:o[0],distY:o[1]}).map(function(p,m){return p*(d[m]?2/d[m]:0)});return{sign:d,isBound:a,isVerticalBound:c,isHorizontalBound:u,isSnap:!1,offset:h}})}function gq(n,e,t){var r,i=sE(n,e,[0,0],!1).map(function(m){return X(X({},m),{multiple:m.multiple.map(function(b){return _e(b)*2})})}),a=XP(n,i,t),o=P0(a,0),c=P0(a,1),u=0,d=0,h=o.isVerticalBound||c.isVerticalBound,p=o.isHorizontalBound||c.isHorizontalBound;return(h||p)&&(r=Z(LG({datas:t,distX:-o.offset[0],distY:-c.offset[1]}),2),u=r[0],d=r[1]),{vertical:{isBound:h,offset:u},horizontal:{isBound:p,offset:d}}}function mq(n,e){var t=[],r=n[0],i=n[1];return r&&i?t.push([[0,i*2],n,[-r,i]],[[r*2,0],n,[r,-i]]):r?(t.push([[r*2,0],[r,1],[r,-1]]),e&&t.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(t.push([[0,i*2],[1,i],[-1,i]]),e&&t.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):t.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),t}function sE(n,e,t,r){var i=n.state,a=i.allMatrix,o=i.is3d,c=Dc(a,100,100,o?4:3),u=Qn(c,[0,0]);return mq(t,r).map(function(d){var h=Z(d,3),p=h[0],m=h[1],b=h[2],_=[Qn(c,m),Qn(c,b)],E=uq(_),S=YP(u,_),T=S.vertical,I=S.horizontal,D=aE(u,_)<=0;return{multiple:p,centerSign:D,verticalSign:T,horizontalSign:I,lineConstants:E,line:[Qn(e,m),Qn(e,b)]}})}function nR(n,e,t,r){var i=r?n.map(function(a){return wp(a,r)}):n;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var o=aE(t,a)<=0;return!KP(e,a,o)})}function vq(n){var e=Z(n,2),t=e[0],r=e[1],i=r[0]-t[0],a=r[1]-t[1];if(!i)return _e(t[0]);if(!a)return _e(t[1]);var o=a/i;return _e((-o*t[0]+t[1])/Math.sqrt(Math.pow(o,2)+1))}function yq(n){var e=Z(n,2),t=e[0],r=e[1],i=r[0]-t[0],a=r[1]-t[1];if(!i)return[t[0],0];if(!a)return[0,t[1]];var o=a/i,c=-o*t[0]+t[1];return[-c/(o+1/o),c/(o*o+1)]}function bq(n,e,t,r,i){var a=n.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var c=a.left,u=a.top,d=a.width,h=a.height,p=c-r[0],m=c+d-r[0],b=u-r[1],_=u+h-r[1],E=[[p,b],[m,b],[p,_],[m,_]],S=Qn(t,[0,0]);if(!nR(t,E,S,0))return[];var T=[],I=E.map(function(D){return[Ui(D),Rn([0,0],D)]});return[[t[0],t[1]],[t[1],t[3]],[t[3],t[2]],[t[2],t[0]]].forEach(function(D){var O=Rn([0,0],yq(D)),z=vq(D);T.push.apply(T,Te([],Z(I.filter(function(j){var C=Z(j,1),A=C[0];return A&&z<=A}).map(function(j){var C=Z(j,2),A=C[0],k=C[1],P=Math.acos(A?z/A:0),L=k+P,B=k-P;return[o+L-O,o+B-O]}).reduce(function(j,C){return j.push.apply(j,Te([],Z(C),!1)),j},[]).filter(function(j){return!nR(e,E,S,j)}).map(function(j){return st(j*180/Math.PI,zr)})),!1))}),T}function xq(n){var e=n.props.innerBounds,t=Fu();if(!e)return{boundMap:t,vertical:[],horizontal:[]};var r=n.getRect(),i=r.pos1,a=r.pos2,o=r.pos3,c=r.pos4,u=[i,a,o,c],d=Qn(u,[0,0]),h=e.left,p=e.top,m=e.width,b=e.height,_=[[h,p],[h,p+b]],E=[[h,p],[h+m,p]],S=[[h+m,p],[h+m,p+b]],T=[[h,p+b],[h+m,p+b]],I=sE(n,u,[0,0],!1),D=[],O=[];return I.forEach(function(z){var j=z.line,C=z.lineConstants,A=YP(d,j),k=A.horizontal,P=A.vertical,L=jo(j,C,E,P,1,!0),B=jo(j,C,T,P,1,!0),M=jo(j,C,_,k,1,!0),W=jo(j,C,S,k,1,!0);L.isBound&&!t.top&&(D.push(p),t.top=!0),B.isBound&&!t.bottom&&(D.push(p+b),t.bottom=!0),M.isBound&&!t.left&&(O.push(h),t.left=!0),W.isBound&&!t.right&&(O.push(h+m),t.right=!0)}),{boundMap:t,horizontal:D,vertical:O}}function _q(n,e,t,r){var i=e[0]-n[0],a=e[1]-n[1];if(_e(i)<Un&&(i=0),_e(a)<Un&&(a=0),!i)return r?[0,0]:[0,t];if(!a)return r?[t,0]:[0,0];var o=a/i,c=n[1]-o*n[0];if(r){var u=o*(e[0]+t)+c;return[t,u-e[1]]}else{var d=(e[1]+t-c)/o;return[d-e[0],t]}}function t_(n,e,t,r,i){var a=_q(n,e,t,r);if(!a)return{isOutside:!1,offset:[0,0]};var o=Cs(n,e),c=Cs(a,n),u=Cs(a,e),d=c>o||u>o,h=Z(Za({datas:i,distX:a[0],distY:a[1]}),2),p=h[0],m=h[1];return{offset:[p,m],isOutside:d}}function O0(n,e){return n.isBound?n.offset:e.isSnap?e_(e).offset:0}function wq(n,e,t,r,i){var a=Z(e,2),o=a[0],c=a[1],u=Z(t,2),d=u[0],h=u[1],p=Z(r,2),m=p[0],b=p[1],_=Z(i,2),E=_[0],S=_[1],T=-E,I=-S;if(n&&o&&c){T=0,I=0;var D=[];if(d&&h?D.push([0,S],[E,0]):d?D.push([E,0]):h?D.push([0,S]):m&&b?D.push([0,S],[E,0]):m?D.push([E,0]):b&&D.push([0,S]),D.length){D.sort(function(C,A){return Ui(He([o,c],C))-Ui(He([o,c],A))});var O=D[0];if(O[0]&&_e(o)>Un)T=-O[0],I=c*_e(o+T)/_e(o)-c;else if(O[1]&&_e(c)>Un){var z=c;I=-O[1],T=o*_e(c+I)/_e(z)-o}if(n&&h&&d)if(_e(T)>Un&&_e(T)<_e(E)){var j=_e(E)/_e(T);T*=j,I*=j}else if(_e(I)>Un&&_e(I)<_e(S)){var j=_e(S)/_e(I);T*=j,I*=j}else T=od(-E,T),I=od(-S,I)}}else T=o||d?-E:0,I=c||h?-S:0;return[T,I]}function Eq(n,e,t,r,i,a){if(!jd(n,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=cE(a.absolutePoses,[e,t]),c=zi(o),u=c.left,d=c.right,h=c.top,p=c.bottom,m={horizontal:o.map(function(W){return W[1]}),vertical:o.map(function(W){return W[0]})},b=rE(n.props.snapDirections),_=iE(b,{left:u,right:d,top:h,bottom:p,center:(u+d)/2,middle:(h+p)/2}),E=Pv(n,i,_,m),S=E.vertical,T=E.horizontal,I=gq(n,o,a),D=I.vertical,O=I.horizontal,z=S.isSnap,j=T.isSnap,C=S.isBound||D.isBound,A=T.isBound||O.isBound,k=od(S.offset,D.offset),P=od(T.offset,O.offset),L=Z(wq(r,[e,t],[C,A],[z,j],[k,P]),2),B=L[0],M=L[1];return[{isBound:C,isSnap:z,offset:B},{isBound:A,isSnap:j,offset:M}]}function Pv(n,e,t,r){r===void 0&&(r=t);var i=nE(Nv(n),r.vertical,r.horizontal),a=i.horizontal,o=i.vertical,c=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Mv(n,t.vertical,t.horizontal,void 0,void 0,void 0,void 0),u=c.horizontal,d=c.vertical,h=O0(a[0],u),p=O0(o[0],d),m=_e(h),b=_e(p);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:m,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:p,dist:b,bounds:o,snap:d}}}function rR(n,e,t,r,i,a,o){o===void 0&&(o=[1,1]);var c=nE(e,t,r),u=c.horizontal,d=c.vertical,h=HP(n,t,r,[],[],i,a,o),p=h.horizontal,m=h.vertical,b=O0(u[0],p),_=O0(d[0],m),E=_e(b),S=_e(_);return{horizontal:{isBound:u[0].isBound,isSnap:p.isSnap,snapIndex:p.index,offset:b,dist:E,bounds:u,snap:p},vertical:{isBound:d[0].isBound,isSnap:m.isSnap,snapIndex:m.index,offset:_,dist:S,bounds:d,snap:m}}}function Sq(n,e,t,r){var i=Rn(n,e)/Math.PI*180,a=t.vertical,o=a.isBound,c=a.isSnap,u=a.dist,d=t.horizontal,h=d.isBound,p=d.isSnap,m=d.dist,b=i%180,_=b<3||b>177,E=b>87&&b<93;return m<u&&(o||c&&!E&&(!r||!_))?"vertical":h||p&&!_&&(!r||!E)?"horizontal":""}function Tq(n,e,t,r,i,a){return t.map(function(o){var c=Z(o,2),u=c[0],d=c[1],h=Qn(e,u),p=Qn(e,d),m=r?Aq(n,h,p,i):Pv(n,i,{vertical:[p[0]],horizontal:[p[1]]}),b=m.horizontal,_=b.offset,E=b.isBound,S=b.isSnap,T=m.vertical,I=T.offset,D=T.isBound,O=T.isSnap,z=He(d,u);if(!I&&!_)return{isBound:D||E,isSnap:O||S,sign:z,offset:[0,0]};var j=Sq(h,p,m,r);if(!j)return{sign:z,isBound:!1,isSnap:!1,offset:[0,0]};var C=j==="vertical",A=[0,0];return!r&&_e(d[0])===1&&_e(d[1])===1&&u[0]!==d[0]&&u[1]!==d[1]?A=Za({datas:a,distX:-I,distY:-_}):A=t_(h,p,-(C?I:_),C,a).offset,A=A.map(function(k,P){return k*(z[P]?2/z[P]:0)}),{sign:z,isBound:C?D:E,isSnap:C?O:S,offset:A}})}function iR(n,e){return n.isBound?n.offset:e.isSnap?e.offset:0}function Aq(n,e,t,r){var i=rq(n,e,t),a=i.horizontal,o=i.vertical,c=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:dq(n,e,t),u=c.horizontal,d=c.vertical,h=iR(a,u),p=iR(o,d),m=_e(h),b=_e(p);return{horizontal:{isBound:a.isBound,isSnap:u.isSnap,offset:h,dist:m},vertical:{isBound:o.isBound,isSnap:d.isSnap,offset:p,dist:b}}}function Cq(n,e,t,r,i){var a=[-t[0],-t[1]],o=n.state,c=o.width,u=o.height,d=n.props.bounds,h=1/0,p=1/0;if(d){var m=[[t[0],-t[1]],[-t[0],t[1]]],b=d.left,_=b===void 0?-1/0:b,E=d.top,S=E===void 0?-1/0:E,T=d.right,I=T===void 0?1/0:T,D=d.bottom,O=D===void 0?1/0:D;m.forEach(function(z){var j=z[0]!==a[0],C=z[1]!==a[1],A=Qn(e,z),k=Rn(r,A)*360/Math.PI;if(C){var P=A.slice();(_e(k-360)<2||_e(k-180)<2)&&(P[1]=r[1]);var L=t_(r,P,(r[1]<A[1]?O:S)-A[1],!1,i),B=Z(L.offset,2),M=B[1],W=L.isOutside;isNaN(M)||(p=u+(W?1:-1)*_e(M))}if(j){var P=A.slice();(_e(k-90)<2||_e(k-270)<2)&&(P[0]=r[0]);var Q=t_(r,P,(r[0]<A[0]?I:_)-A[0],!0,i),$=Z(Q.offset,1),H=$[0],ee=Q.isOutside;isNaN(H)||(h=c+(ee?1:-1)*_e(H))}})}return{maxWidth:h,maxHeight:p}}var Nr={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(n,e){var t=n.props,r=t.hideThrottleDragRotateLine,i=t.throttleDragRotate,a=t.zoom,o=n.getState(),c=o.dragInfo,u=o.beforeOrigin;if(r||!i||!c)return[];var d=c.dist;if(!d[0]&&!d[1])return[];var h=Ui(d),p=Rn(d,[0,0]);return[e.createElement("div",{className:Fe("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(h,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(p,"rad) scaleY(").concat(a,")")}})]},dragStart:function(n,e){var t=e.datas,r=e.parentEvent,i=e.parentGesto,a=n.state,o=a.gestos,c=a.style;if(o.draggable)return!1;o.draggable=i||n.targetGesto,t.datas={},t.left=parseFloat(c.left||"")||0,t.top=parseFloat(c.top||"")||0,t.bottom=parseFloat(c.bottom||"")||0,t.right=parseFloat(c.right||"")||0,t.startValue=[0,0],Rc(n,e),kv(n,e,"translate"),$q(n,t),t.prevDist=[0,0],t.prevBeforeDist=[0,0],t.isDrag=!1,t.deltaOffset=[0,0];var u=dt(n,e,X({set:function(h){t.startValue=h}},Dv(n,e))),d=r||Ne(n,"onDragStart",u);return d!==!1?(t.isDrag=!0,n.state.dragInfo={startRect:n.getRect(),dist:[0,0]}):(o.draggable=null,t.isPinch=!1),t.isDrag?u:!1},drag:function(n,e){if(e){Iv(n,e,"translate");var t=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,o=e.deltaOffset,c=e.useSnap,u=e.isRequest,d=e.isGroup,h=e.parentThrottleDrag,p=e.distX,m=e.distY,b=t.isDrag,_=t.prevDist,E=t.prevBeforeDist,S=t.startValue;if(b){o&&(p+=o[0],m+=o[1]);var T=n.props,I=T.parentMoveable,D=d?0:T.throttleDrag||h||0,O=r?0:T.throttleDragRotate||0,z=0,j=!1,C=!1,A=!1,k=!1;if(!r&&O>0&&(p||m)){var P=T.startDragRotate||0,L=st(P+Rn([0,0],[p,m])*180/Math.PI,O)-P,B=m*Math.abs(Math.cos((L-90)/180*Math.PI)),M=p*Math.abs(Math.cos(L/180*Math.PI)),W=Ui([M,B]);z=L*Math.PI/180,p=W*Math.cos(z),m=W*Math.sin(z)}if(!a&&!r&&!i){var Q=Z(Eq(n,p,m,O,!c&&u||o,t),2),$=Q[0],H=Q[1];j=$.isSnap,C=$.isBound,A=H.isSnap,k=H.isBound;var ee=$.offset,ne=H.offset;p+=ee,m+=ne}var de=At(DP({datas:t,distX:p,distY:m}),S),U=At(zG({datas:t,distX:p,distY:m}),S);jI(U,zr),jI(de,zr),O||(!j&&!C&&(U[0]=st(U[0],D),de[0]=st(de[0],D)),!A&&!k&&(U[1]=st(U[1],D),de[1]=st(de[1],D)));var Y=He(de,S),te=He(U,S),se=He(te,_),pe=He(Y,E);t.prevDist=te,t.prevBeforeDist=Y,t.passDelta=se,t.passDist=te;var ie=t.left+Y[0],ve=t.top+Y[1],Ae=t.right-Y[0],Ie=t.bottom-Y[1],ke=Rv(t,"translate(".concat(U[0],"px, ").concat(U[1],"px)"),"translate(".concat(te[0],"px, ").concat(te[1],"px)"));if(eE(e,ke),n.state.dragInfo.dist=r?[0,0]:te,!(!r&&!I&&se.every(function(Le){return!Le})&&pe.some(function(Le){return!Le}))){var xe=n.state,Ee=xe.width,Xe=xe.height,je=dt(n,e,X({transform:ke,dist:te,delta:se,translate:U,beforeDist:Y,beforeDelta:pe,beforeTranslate:de,left:ie,top:ve,right:Ae,bottom:Ie,width:Ee,height:Xe,isPinch:a},Vr({transform:ke},e)));return!r&&Ne(n,"onDrag",je),je}}}},dragAfter:function(n,e){var t=e.datas,r=t.deltaOffset;return r[0]||r[1]?(t.deltaOffset=[0,0],this.drag(n,X(X({},e),{deltaOffset:r}))):!1},dragEnd:function(n,e){var t=e.parentEvent,r=e.datas;if(n.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=pi(n,e,{});return!t&&Ne(n,"onDragEnd",i),i}},dragGroupStart:function(n,e){var t,r,i=e.datas,a=e.clientX,o=e.clientY,c=this.dragStart(n,e);if(!c)return!1;var u=V1(n,this,"dragStart",[a||0,o||0],e,!1,"draggable"),d=u.childEvents,h=u.eventParams,p=X(X({},c),{targets:n.props.targets,events:h}),m=Ne(n,"onDragGroupStart",p);i.isDrag=m!==!1;var b=(r=(t=d[0])===null||t===void 0?void 0:t.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[b[0]%1,b[1]%1],i.isDrag?c:!1},dragGroup:function(n,e){var t=e.datas;if(t.isDrag){var r=this.drag(n,X(X({},e),{parentThrottleDrag:n.props.throttleDrag})),i=e.datas.passDelta,a=V1(n,this,"drag",i,e,!1,"draggable").eventParams;if(r){var o=X({targets:n.props.targets,events:a},r);return Ne(n,"onDragGroup",o),o}}},dragGroupEnd:function(n,e){var t=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(n,e);var i=V1(n,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Ne(n,"onDragGroupEnd",pi(n,e,{targets:n.props.targets,events:i})),t}},request:function(n){var e={},t=n.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(o){return a=o.useSnap,{datas:e,useSnap:a}},request:function(o){return"x"in o?r=o.x-t.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-t.top:"deltaY"in o&&(i+=o.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(n){n.state.gestos.draggable=null,n.state.dragInfo=null}};function WP(n,e){var t=Qn(n,e),r=[0,0];return{fixedPosition:t,fixedDirection:e,fixedOffset:r}}function Iq(n,e){var t=n.allMatrix,r=n.is3d,i=n.width,a=n.height,o=r?4:3,c=[i/2*(1+e[0]),a/2*(1+e[1])],u=hn(t,c,o),d=[0,0];return{fixedPosition:u,fixedDirection:e,fixedOffset:d}}function QP(n,e){var t=n.allMatrix,r=n.is3d,i=n.width,a=n.height,o=r?4:3,c=$G(e,i,a),u=hn(t,e,o),d=[i?0:e[0],a?0:e[1]];return{fixedPosition:u,fixedDirection:c,fixedOffset:d}}var aR=fE("resizable"),n_={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:zP("resizable"),dragControlCondition:aR,viewClassName:dE("resizable"),dragControlStart:function(n,e){var t,r=e.inputEvent,i=e.isPinch,a=e.isGroup,o=e.parentDirection,c=e.parentGesto,u=e.datas,d=e.parentFixedDirection,h=e.parentEvent,p=uO(o,i,r,u),m=n.state,b=m.target,_=m.width,E=m.height,S=m.gestos;if(!p||!b||S.resizable)return!1;S.resizable=c||n.controlGesto,!i&&Rc(n,e),u.datas={},u.direction=p,u.startOffsetWidth=_,u.startOffsetHeight=E,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=m.inlineCSSWidth||m.cssWidth,u.startHeight=m.inlineCSSHeight||m.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[m.minOffsetWidth,m.minOffsetHeight],u.maxSize=[m.maxOffsetWidth,m.maxOffsetHeight]);var T=n.props.transformOrigin||"% %";u.transformOrigin=Qr(T)?T.split(" "):T,u.startOffsetMatrix=m.offsetMatrix,u.startTransformOrigin=m.transformOrigin,u.isWidth=(t=e?.parentIsWidth)!==null&&t!==void 0?t:!p[0]&&!p[1]||p[0]||!p[1];function I(k){u.ratio=k&&isFinite(k)?k:0}u.startPositions=Fi(n.state);function D(k){var P=WP(u.startPositions,k);u.fixedDirection=P.fixedDirection,u.fixedPosition=P.fixedPosition,u.fixedOffset=P.fixedOffset}function O(k){var P=QP(n.state,k);u.fixedDirection=P.fixedDirection,u.fixedPosition=P.fixedPosition,u.fixedOffset=P.fixedOffset}function z(k){u.minSize=[Xt("".concat(k[0]),0)||0,Xt("".concat(k[1]),0)||0]}function j(k){var P=[k[0]||1/0,k[1]||1/0];(!rd(P[0])||isFinite(P[0]))&&(P[0]=Xt("".concat(P[0]),0)||1/0),(!rd(P[1])||isFinite(P[1]))&&(P[1]=Xt("".concat(P[1]),0)||1/0),u.maxSize=P}I(_/E),D(d||[-p[0],-p[1]]),u.setFixedDirection=D,u.setFixedPosition=O,u.setMin=z,u.setMax=j;var C=dt(n,e,{direction:p,startRatio:u.ratio,set:function(k){var P=Z(k,2),L=P[0],B=P[1];u.startWidth=L,u.startHeight=B},setMin:z,setMax:j,setRatio:I,setFixedDirection:D,setFixedPosition:O,setOrigin:function(k){u.transformOrigin=k},dragStart:Nr.dragStart(n,new ad().dragStart([0,0],e))}),A=h||Ne(n,"onResizeStart",C);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,A!==!1&&(u.isResize=!0,n.state.snapRenderInfo={request:e.isRequest,direction:p}),u.isResize?C:!1},dragControl:function(n,e){var t,r=e.datas,i=e.parentFlag,a=e.isPinch,o=e.parentKeepRatio,c=e.dragClient,u=e.parentDist,d=e.useSnap,h=e.isRequest,p=e.isGroup,m=e.parentEvent,b=e.resolveMatrix,_=r.isResize,E=r.transformOrigin,S=r.startWidth,T=r.startHeight,I=r.prevWidth,D=r.prevHeight,O=r.minSize,z=r.maxSize,j=r.ratio,C=r.startOffsetWidth,A=r.startOffsetHeight,k=r.isWidth;if(!_)return;if(b){var P=n.state.is3d,L=r.startOffsetMatrix,B=r.startTransformOrigin,M=P?4:3,W=Gh(N0(e)),Q=Math.sqrt(W.length);M!==Q&&(W=fa(W,Q,M));var $=Cp(L,W,B,M),H=Dc($,C,A,M);r.startPositions=H,r.nextTargetMatrix=W,r.nextAllMatrix=$}var ee=gc(n.props,"resizable"),ne=ee.resizeFormat,de=ee.throttleResize,U=de===void 0?i?0:1:de,Y=ee.parentMoveable,te=ee.keepRatioFinally,se=r.direction,pe=se,ie=0,ve=0;!se[0]&&!se[1]&&(pe=[1,1]);var Ae=j&&(o??ee.keepRatio)||!1;function Ie(){var mt=r.fixedDirection,Vt=mO(pe,Ae,r,e);ie=Vt.distWidth,ve=Vt.distHeight;var yr=pe[0]-mt[0]||Ae?Math.max(C+ie,zr):C,br=pe[1]-mt[1]||Ae?Math.max(A+ve,zr):A;return Ae&&C&&A&&(k?br=yr/j:yr=br*j),[yr,br]}var ke=Z(Ie(),2),xe=ke[0],Ee=ke[1];m||(r.setFixedDirection(r.fixedDirection),Ne(n,"onBeforeResize",dt(n,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(mt){var Vt;return r.setFixedDirection(mt),Vt=Z(Ie(),2),xe=Vt[0],Ee=Vt[1],[xe,Ee]},setFixedPosition:function(mt){var Vt;return r.setFixedPosition(mt),Vt=Z(Ie(),2),xe=Vt[0],Ee=Vt[1],[xe,Ee]},boundingWidth:xe,boundingHeight:Ee,setSize:function(mt){var Vt;Vt=Z(mt,2),xe=Vt[0],Ee=Vt[1]}},!0)));var Xe=c;c||(!i&&a?Xe=WG(n,[0,0]):Xe=r.fixedPosition);var je=[0,0];a||(je=qq(n,xe,Ee,se,Xe,!d&&h,r)),u&&(!u[0]&&(je[0]=0),!u[1]&&(je[1]=0));function Le(){var mt;ne&&(mt=Z(ne([xe,Ee]),2),xe=mt[0],Ee=mt[1]),xe=st(xe,U),Ee=st(Ee,U)}if(Ae){pe[0]&&pe[1]&&je[0]&&je[1]&&(_e(je[0])>_e(je[1])?je[1]=0:je[0]=0);var Pe=!je[0]&&!je[1];Pe&&Le(),pe[0]&&!pe[1]||je[0]&&!je[1]||Pe&&k?(xe+=je[0],Ee=xe/j):(!pe[0]&&pe[1]||!je[0]&&je[1]||Pe&&!k)&&(Ee+=je[1],xe=Ee*j)}else xe+=je[0],Ee+=je[1],xe=Math.max(0,xe),Ee=Math.max(0,Ee);t=Z(FM([xe,Ee],O,z,Ae?j:!1),2),xe=t[0],Ee=t[1],Le(),Ae&&(p||te)&&(k?Ee=xe/j:xe=Ee*j),ie=xe-C,ve=Ee-A;var nt=[ie-I,ve-D];r.prevWidth=ie,r.prevHeight=ve;var pt=XG(n,xe,Ee,Xe,E,r);if(!(!Y&&nt.every(function(mt){return!mt})&&pt.every(function(mt){return!mt}))){var Ve=Nr.drag(n,Ap(e,n.state,pt,!!a,!1,"draggable")),Ye=Ve.transform,Pt=S+ie,En=T+ve,dn=dt(n,e,X({width:Pt,height:En,offsetWidth:Math.round(xe),offsetHeight:Math.round(Ee),startRatio:j,boundingWidth:xe,boundingHeight:Ee,direction:se,dist:[ie,ve],delta:nt,isPinch:!!a,drag:Ve},fO({style:{width:"".concat(Pt,"px"),height:"".concat(En,"px")},transform:Ye},Ve,e)));return!m&&Ne(n,"onResize",dn),dn}},dragControlAfter:function(n,e){var t=e.datas,r=t.isResize,i=t.startOffsetWidth,a=t.startOffsetHeight,o=t.prevWidth,c=t.prevHeight;if(!(!r||n.props.checkResizableError===!1)){var u=n.state,d=u.width,h=u.height,p=d-(i+o),m=h-(a+c),b=_e(p)>3,_=_e(m)>3;if(b&&(t.startWidth+=p,t.startOffsetWidth+=p,t.prevWidth+=p),_&&(t.startHeight+=m,t.startOffsetHeight+=m,t.prevHeight+=m),b||_)return this.dragControl(n,e)}},dragControlEnd:function(n,e){var t=e.datas,r=e.parentEvent;if(t.isResize){t.isResize=!1;var i=pi(n,e,{});return!r&&Ne(n,"onResizeEnd",i),i}},dragGroupControlCondition:aR,dragGroupControlStart:function(n,e){var t=e.datas,r=this.dragControlStart(n,X(X({},e),{isGroup:!0}));if(!r)return!1;var i=ca(n,"resizable",e),a=t.startOffsetWidth,o=t.startOffsetHeight;function c(){var b=t.minSize;i.forEach(function(_){var E=_.datas,S=E.minSize,T=E.startOffsetWidth,I=E.startOffsetHeight,D=a*(T?S[0]/T:0),O=o*(I?S[1]/I:0);b[0]=Math.max(b[0],D),b[1]=Math.max(b[1],O)})}function u(){var b=t.maxSize;i.forEach(function(_){var E=_.datas,S=E.maxSize,T=E.startOffsetWidth,I=E.startOffsetHeight,D=a*(T?S[0]/T:0),O=o*(I?S[1]/I:0);b[0]=Math.min(b[0],D),b[1]=Math.min(b[1],O)})}var d=Is(n,this,"dragControlStart",e,function(b,_){return M0(n,b,t,_)});c(),u();var h=function(b){r.setFixedDirection(b),d.forEach(function(_,E){_.setFixedDirection(b),M0(n,_.moveable,t,i[E])})};t.setFixedDirection=h;var p=X(X({},r),{targets:n.props.targets,events:d.map(function(b){return X(X({},b),{setMin:function(_){b.setMin(_),c()},setMax:function(_){b.setMax(_),u()}})}),setFixedDirection:h,setMin:function(b){r.setMin(b),c()},setMax:function(b){r.setMax(b),u()}}),m=Ne(n,"onResizeGroupStart",p);return t.isResize=m!==!1,t.isResize?r:!1},dragGroupControl:function(n,e){var t=e.datas;if(t.isResize){var r=gc(n.props,"resizable");Vv(n,"onBeforeResize",function(b){Ne(n,"onBeforeResizeGroup",dt(n,e,X(X({},b),{targets:r.targets}),!0))});var i=this.dragControl(n,X(X({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,c=i.dist,u=r.keepRatio,d=[a/(a-c[0]),o/(o-c[1])],h=t.fixedPosition,p=Is(n,this,"dragControl",e,function(b,_){var E=Z(Cr(Ep(n.rotation/180*Math.PI,3),[_.datas.originalX*d[0],_.datas.originalY*d[1],1],3),2),S=E[0],T=E[1];return X(X({},_),{parentDist:null,parentScale:d,dragClient:At(h,[S,T]),parentKeepRatio:u})}),m=X({targets:r.targets,events:p},i);return Ne(n,"onResizeGroup",m),m}}},dragGroupControlEnd:function(n,e){var t=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(n,e);var i=Is(n,this,"dragControlEnd",e),a=pi(n,e,{targets:n.props.targets,events:i});return Ne(n,"onResizeGroupEnd",a),t}},request:function(n){var e={},t=0,r=0,i=!1,a=n.getRect();return{isControl:!0,requestStart:function(o){var c;return i=o.useSnap,{datas:e,parentDirection:o.direction||[1,1],parentIsWidth:(c=o?.horizontal)!==null&&c!==void 0?c:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?t=o.offsetWidth-a.offsetWidth:"deltaWidth"in o&&(t+=o.deltaWidth),"offsetHeight"in o?r=o.offsetHeight-a.offsetHeight:"deltaHeight"in o&&(r+=o.deltaHeight),{datas:e,parentDist:[t,r],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(n){n.state.gestos.resizable=null}};function j1(n,e,t,r,i){var a=n.props.groupable,o=n.state,c=o.is3d?4:3,u=e.origin,d=hn(n.state.rootMatrix,He([u[0],u[1]],a?[0,0]:[o.left,o.top]),c),h=At([i.left,i.top],d);e.startAbsoluteOrigin=h,e.prevDeg=Rn(h,[t,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Cs(h,[t,r])}function n0(n,e,t){var r=t.defaultDeg,i=t.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>n&&a>270&&n<90?++o:a<n&&a<90&&n>270&&--o;var c=e*(o*360+n-r);return t.prevDeg=r+c,c}function z1(n,e,t,r){return n0(Rn(r.startAbsoluteOrigin,[n,e])/Math.PI*180,t,r)}function L1(n,e,t,r,i,a){var o=n.props.throttleRotate,c=o===void 0?0:o,u=t.prevSnapDeg,d=0,h=!1;if(a){var p=Gq(n,e,r,i+r);h=p.isSnap,d=i+p.dist}h||(d=st(i+r,c));var m=d-i;return t.prevSnapDeg=m,[m-u,m,d]}function ZP(n,e,t){var r=Z(e,4),i=r[0],a=r[1],o=r[2],c=r[3];if(n==="none")return[];if(Gn(n))return n.map(function(S){return ZP(S,[i,a,o,c],t)[0]});var u=Z((n||"top").split("-"),2),d=u[0],h=u[1],p=[i,a];d==="left"?p=[o,i]:d==="right"?p=[a,c]:d==="bottom"&&(p=[c,o]);var m=[(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2],b=lO(p,t);if(h){var _=h==="top"||h==="left",E=d==="bottom"||d==="left";m=p[_&&!E||!_&&E?0:1]}return[[m,b]]}function r_(n,e){if(e.isRequest)return e.requestAble==="rotatable";var t=e.inputEvent.target;if(Wn(t,Fe("rotation-control"))||n.props.rotateAroundControls&&Wn(t,Fe("around-control"))||Wn(t,Fe("control"))&&Wn(t,Fe("rotatable")))return!0;var r=n.props.rotationTarget;return r?hE(r,!0).some(function(i){return i?t===i||t.contains(i):!1}):!1}var Rq=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Dq={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Rq],viewClassName:function(n){return n.isDragging("rotatable")?Fe("view-rotation-dragging"):""},render:function(n,e){var t=gc(n.props,"rotatable"),r=t.rotatable,i=t.rotationPosition,a=t.zoom,o=t.renderDirections,c=t.rotateAroundControls,u=t.resolveAblesWithRotatable,d=n.getState(),h=d.renderPoses,p=d.direction;if(!r)return null;var m=ZP(i,h,p),b=[];if(m.forEach(function(T,I){var D=Z(T,2),O=D[0],z=D[1];b.push(e.createElement("div",{key:"rotation".concat(I),className:Fe("rotation"),style:{transform:"translate(-50%) translate(".concat(O[0],"px, ").concat(O[1],"px) rotate(").concat(z,"rad)")}},e.createElement("div",{className:Fe("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Fe("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),o){var _=Ps(u||{}),E={};_.forEach(function(T){u[T].forEach(function(I){E[I]=T})});var S=[];Gn(o)&&(S=o.map(function(T){var I=E[T];return{data:I?{resolve:I}:{},classNames:I?["move"]:[],dir:T}})),b.push.apply(b,Te([],Z(OP(n,"rotatable",S,e)),!1))}return c&&b.push.apply(b,Te([],Z(BP(n,e)),!1)),b},dragControlCondition:r_,dragControlStart:function(n,e){var t,r,i=e.datas,a=e.clientX,o=e.clientY,c=e.parentRotate,u=e.parentFlag,d=e.isPinch,h=e.isRequest,p=n.state,m=p.target,b=p.left,_=p.top,E=p.direction,S=p.beforeDirection,T=p.targetTransform,I=p.moveableClientRect,D=p.offsetMatrix,O=p.targetMatrix,z=p.allMatrix,j=p.width,C=p.height;if(!h&&!m)return!1;var A=n.getRect();i.rect=A,i.transform=T,i.left=b,i.top=_;var k=function(pe){var ie=QP(n.state,pe);i.fixedDirection=ie.fixedDirection,i.fixedOffset=ie.fixedOffset,i.fixedPosition=ie.fixedPosition,U&&U.setFixedPosition(pe)},P=function(pe){var ie=Iq(n.state,pe);i.fixedDirection=ie.fixedDirection,i.fixedOffset=ie.fixedOffset,i.fixedPosition=ie.fixedPosition,U&&U.setFixedDirection(pe)},L=a,B=o;if(h||d||u){var M=c||0;i.beforeInfo={origin:A.beforeOrigin,prevDeg:M,defaultDeg:M,prevSnapDeg:0,startDist:0},i.afterInfo=X(X({},i.beforeInfo),{origin:A.origin}),i.absoluteInfo=X(X({},i.beforeInfo),{origin:A.origin,startValue:M})}else{var W=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(W){var Q=W.getAttribute("data-direction")||"",$=VG[Q];if($){i.isControl=!0,i.isAroundControl=Wn(W,Fe("around-control")),i.controlDirection=$;var H=W.getAttribute("data-resolve");H&&(i.resolveAble=H);var ee=aH(p.rootMatrix,p.renderPoses,I);t=Z(Qn(ee,$),2),L=t[0],B=t[1]}}i.beforeInfo={origin:A.beforeOrigin},i.afterInfo={origin:A.origin},i.absoluteInfo={origin:A.origin,startValue:A.rotation};var ne=k;k=function(pe){var ie=p.is3d?4:3,ve=Z(At(pP(O,ie),pe),2),Ae=ve[0],Ie=ve[1],ke=Cr(D,fc([Ae,Ie],ie)),xe=Cr(z,fc([pe[0],pe[1]],ie));ne(pe);var Ee=p.posDelta;i.beforeInfo.origin=He(ke,Ee),i.afterInfo.origin=He(xe,Ee),i.absoluteInfo.origin=He(xe,Ee),j1(n,i.beforeInfo,L,B,I),j1(n,i.afterInfo,L,B,I),j1(n,i.absoluteInfo,L,B,I)},P=function(pe){var ie=Qn([[0,0],[j,0],[0,C],[j,C]],pe);k(ie)}}i.startClientX=L,i.startClientY=B,i.direction=E,i.beforeDirection=S,i.startValue=0,i.datas={},kv(n,e,"rotate");var de=!1,U=!1;if(i.isControl&&i.resolveAble){var Y=i.resolveAble;Y==="resizable"&&(U=n_.dragControlStart(n,X(X({},new ad("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}U||(de=Nr.dragStart(n,new ad().dragStart([0,0],e))),k(sH(n));var te=dt(n,e,X(X({set:function(pe){i.startValue=pe*Math.PI/180},setFixedDirection:P,setFixedPosition:k},Dv(n,e)),{dragStart:de,resizeStart:U})),se=Ne(n,"onRotateStart",te);return i.isRotate=se!==!1,p.snapRenderInfo={request:e.isRequest},i.isRotate?te:!1},dragControl:function(n,e){var t,r,i,a=e.datas,o=e.clientDistX,c=e.clientDistY,u=e.parentRotate,d=e.parentFlag,h=e.isPinch,p=e.groupDelta,m=e.resolveMatrix,b=a.beforeDirection,_=a.beforeInfo,E=a.afterInfo,S=a.absoluteInfo,T=a.isRotate,I=a.startValue,D=a.rect,O=a.startClientX,z=a.startClientY;if(T){Iv(n,e,"rotate");var j=jG(e),C=b*j,A=n.props.parentMoveable,k=0,P,L,B=0,M,W,Q=0,$,H,ee=180/Math.PI*I,ne=S.startValue,de=!1,U=O+o,Y=z+c;if(!d&&"parentDist"in e){var te=e.parentDist;P=te,M=te,$=te}else h||d?(P=n0(u,b,_),M=n0(u,C,E),$=n0(u,C,S)):(P=z1(U,Y,b,_),M=z1(U,Y,C,E),$=z1(U,Y,C,S),de=!0);if(L=ee+P,W=ee+M,H=ne+$,Ne(n,"onBeforeRotate",dt(n,e,{beforeRotation:L,rotation:W,absoluteRotation:H,setRotation:function(Xe){M=Xe-ee,P=M,$=M}},!0)),t=Z(L1(n,D,_,P,ee,de),3),k=t[0],P=t[1],L=t[2],r=Z(L1(n,D,E,M,ee,de),3),B=r[0],M=r[1],W=r[2],i=Z(L1(n,D,S,$,ne,de),3),Q=i[0],$=i[1],H=i[2],!(!Q&&!B&&!k&&!A&&!m)){var se=Rv(a,"rotate(".concat(W,"deg)"),"rotate(".concat(M,"deg)"));m&&(a.fixedPosition=tE(n,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var pe=KG(n,M,a),ie=He(At(p||[0,0],pe),a.prevInverseDist||[0,0]);a.prevInverseDist=pe,a.requestValue=null;var ve=NP(n,se,ie,h,e),Ae=ve,Ie=Cs([U,Y],S.startAbsoluteOrigin)-S.startDist,ke=void 0;if(a.resolveAble==="resizable"){var xe=n_.dragControl(n,X(X({},Ap(e,n.state,[e.deltaX,e.deltaY],!!h,!1,"resizable")),{resolveMatrix:!0,parentDistance:Ie}));xe&&(ke=xe,Ae=fO(Ae,xe,e))}var Ee=dt(n,e,X(X({delta:B,dist:M,rotate:W,rotation:W,beforeDist:P,beforeDelta:k,beforeRotate:L,beforeRotation:L,absoluteDist:$,absoluteDelta:Q,absoluteRotate:H,absoluteRotation:H,isPinch:!!h,resize:ke},ve),Ae));return Ne(n,"onRotate",Ee),Ee}}},dragControlEnd:function(n,e){var t=e.datas;if(t.isRotate){t.isRotate=!1;var r=pi(n,e,{});return Ne(n,"onRotateEnd",r),r}},dragGroupControlCondition:r_,dragGroupControlStart:function(n,e){var t=e.datas,r=n.state,i=r.left,a=r.top,o=r.beforeOrigin,c=this.dragControlStart(n,e);if(!c)return!1;c.set(t.beforeDirection*n.rotation);var u=Is(n,this,"dragControlStart",e,function(p,m){var b=p.state,_=b.left,E=b.top,S=b.beforeOrigin,T=At(He([_,E],[i,a]),He(S,o));return m.datas.startGroupClient=T,m.datas.groupClient=T,X(X({},m),{parentRotate:0})}),d=X(X({},c),{targets:n.props.targets,events:u}),h=Ne(n,"onRotateGroupStart",d);return t.isRotate=h!==!1,t.isRotate?c:!1},dragGroupControl:function(n,e){var t=e.datas;if(t.isRotate){Vv(n,"onBeforeRotate",function(d){Ne(n,"onBeforeRotateGroup",dt(n,e,X(X({},d),{targets:n.props.targets}),!0))});var r=this.dragControl(n,e);if(r){var i=t.beforeDirection,a=r.beforeDist,o=a/180*Math.PI,c=Is(n,this,"dragControl",e,function(d,h){var p=h.datas.startGroupClient,m=Z(h.datas.groupClient,2),b=m[0],_=m[1],E=Z(wp(p,o*i),2),S=E[0],T=E[1],I=[S-b,T-_];return h.datas.groupClient=[S,T],X(X({},h),{parentRotate:a,groupDelta:I})});n.rotation=i*r.beforeRotation;var u=X({targets:n.props.targets,events:c,set:function(d){n.rotation=d},setGroupRotation:function(d){n.rotation=d}},r);return Ne(n,"onRotateGroup",u),u}}},dragGroupControlEnd:function(n,e){var t=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(n,e);var i=Is(n,this,"dragControlEnd",e),a=pi(n,e,{targets:n.props.targets,events:i});return Ne(n,"onRotateGroupEnd",a),t}},request:function(n){var e={},t=0,r=n.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?t+=i.deltaRotate:"rotate"in i&&(t=i.rotate-r),{datas:e,parentDist:t}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function kq(n,e){var t,r=n.direction,i=n.classNames,a=n.size,o=n.pos,c=n.zoom,u=n.key,d=r==="horizontal",h=d?"Y":"X";return e.createElement("div",{key:u,className:i.join(" "),style:(t={},t[d?"width":"height"]="".concat(a),t.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(h,"(-50%) scale").concat(h,"(").concat(c,")"),t)})}function oE(n,e){return kq(X(X({},n),{classNames:Te([Fe("line","guideline",n.direction)],Z(n.classNames),!1).filter(function(t){return t}),size:n.size||"".concat(n.sizeValue,"px"),pos:n.pos||n.posValue.map(function(t){return"".concat(st(t,.1),"px")})}),e)}function sR(n,e,t,r,i,a,o,c){var u=n.props.zoom;return t.map(function(d,h){var p=d.type,m=d.pos,b=[0,0];return b[o]=r,b[o?0:1]=-i+m,oE({key:"".concat(e,"TargetGuideline").concat(h),classNames:[Fe("target","bold",p)],posValue:b,sizeValue:a,zoom:u,direction:e},c)})}function oR(n,e,t,r,i,a){var o=n.props,c=o.zoom,u=o.isDisplayInnerSnapDigit,d=e==="horizontal"?Wo:Qo,h=i[d.start],p=i[d.end];return t.filter(function(m){var b=m.hide,_=m.elementRect;if(b)return!1;if(u&&_){var E=_.rect;if(E[d.start]<=h&&p<=E[d.end])return!1}return!0}).map(function(m,b){var _=m.pos,E=m.size,S=m.element,T=m.className,I=[-r[0]+_[0],-r[1]+_[1]];return oE({key:"".concat(e,"-default-guideline-").concat(b),classNames:S?[Fe("bold"),T]:[Fe("normal"),T],direction:e,posValue:I,sizeValue:E,zoom:c},a)})}function nh(n,e,t,r,i,a,o,c){var u,d=n.props,h=d.snapDigit,p=h===void 0?0:h,m=d.isDisplaySnapDigit,b=m===void 0?!0:m,_=d.snapDistFormat,E=_===void 0?function(z,j){return z}:_,S=d.zoom,T=e==="horizontal"?"X":"Y",I=e==="vertical"?"height":"width",D=Math.abs(i),O=b?parseFloat(D.toFixed(p)):0;return c.createElement("div",{key:"".concat(e,"-").concat(t,"-guideline-").concat(r),className:Fe("guideline-group",e),style:(u={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},u[I]="".concat(D,"px"),u)},oE({direction:e,classNames:[Fe(t),o],size:"100%",posValue:[0,0],sizeValue:D,zoom:S},c),c.createElement("div",{className:Fe("size-value","gap"),style:{transform:"translate".concat(T,"(-50%) scale(").concat(S,")")}},O>0?E(O,e):""))}function Nq(n,e,t,r){var i=n==="vertical"?0:1,a=n==="vertical"?1:0,o=i?Wo:Qo,c=t[o.start],u=t[o.end];return hO(e,function(d){return d.pos[i]}).map(function(d){var h=[],p=[],m=[];return d.forEach(function(b){var _,E,S=b.element,T=b.elementRect.rect;if(T[o.end]<c)h.push(b);else if(u<T[o.start])p.push(b);else if(T[o.start]<=c&&u<=T[o.end]&&r){var I=b.pos,D={element:S,rect:X(X({},T),(_={},_[o.end]=T[o.start],_))},O={element:S,rect:X(X({},T),(E={},E[o.start]=T[o.end],E))},z=[0,0],j=[0,0];z[i]=I[i],z[a]=I[a],j[i]=I[i],j[a]=I[a]+b.size,h.push({type:n,pos:z,size:0,elementRect:D,direction:"",elementDirection:"end"}),p.push({type:n,pos:j,size:0,elementRect:O,direction:"",elementDirection:"start"})}}),h.sort(function(b,_){return _.pos[a]-b.pos[a]}),p.sort(function(b,_){return b.pos[a]-_.pos[a]}),{total:d,start:h,end:p,inner:m}})}function Mq(n,e,t,r,i){var a=n.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(c){var u=e.filter(function(S){return S.type===c}),d=c==="vertical"?1:0,h=d?0:1,p=Nq(c,u,r,a),m=d?Qo:Wo,b=d?Wo:Qo,_=r[m.start],E=r[m.end];p.forEach(function(S){var T=S.total,I=S.start,D=S.end,O=S.inner,z=t[h]+T[0].pos[h]-r[b.start],j=r;I.forEach(function(C){var A=C.elementRect.rect,k=j[m.start]-A[m.end];if(k>0){var P=[0,0];P[d]=t[d]+j[m.start]-_-k,P[h]=z,o.push(nh(n,c,"dashed",o.length,k,P,C.className,i))}j=A}),j=r,D.forEach(function(C){var A=C.elementRect.rect,k=A[m.start]-j[m.end];if(k>0){var P=[0,0];P[d]=t[d]+j[m.end]-_,P[h]=z,o.push(nh(n,c,"dashed",o.length,k,P,C.className,i))}j=A}),O.forEach(function(C){var A=C.elementRect.rect,k=_-A[m.start],P=A[m.end]-E,L=[0,0],B=[0,0];L[d]=t[d]-k,L[h]=z,B[d]=t[d]+E-_,B[h]=z,o.push(nh(n,c,"dashed",o.length,k,L,C.className,i)),o.push(nh(n,c,"dashed",o.length,P,B,C.className,i))})})}),o}function Pq(n,e,t,r,i){var a=[];return["horizontal","vertical"].forEach(function(o){var c=e.filter(function(S){return S.type===o}).slice(0,1),u=o==="vertical"?0:1,d=u?0:1,h=u?Qo:Wo,p=u?Wo:Qo,m=r[h.start],b=r[h.end],_=r[p.start],E=r[p.end];c.forEach(function(S){var T=S.gap,I=S.gapRects,D=Math.max.apply(Math,Te([_],Z(I.map(function(j){var C=j.rect;return C[p.start]})),!1)),O=Math.min.apply(Math,Te([E],Z(I.map(function(j){var C=j.rect;return C[p.end]})),!1)),z=(D+O)/2;D===O||z===(_+E)/2||I.forEach(function(j){var C=j.rect,A=j.className,k=[t[0],t[1]];if(C[h.end]<m)k[u]+=C[h.end]-m;else if(b<C[h.start])k[u]+=C[h.start]-m-T;else return;k[d]+=z-_,a.push(nh(n,u?"vertical":"horizontal","gap",a.length,T,k,A,i))})})}),a}function i_(n){var e,t,r=n.state,i=r.containerClientRect,a=r.hasFixed,o=i.overflow,c=i.scrollHeight,u=i.scrollWidth,d=i.clientHeight,h=i.clientWidth,p=i.clientLeft,m=i.clientTop,b=n.props,_=b.snapGap,E=_===void 0?!0:_,S=b.verticalGuidelines,T=b.horizontalGuidelines,I=b.snapThreshold,D=I===void 0?5:I,O=b.maxSnapElementGuidelineDistance,z=O===void 0?1/0:O,j=b.isDisplayGridGuidelines,C=zi(Fi(n.state)),A=C.top,k=C.left,P=C.bottom,L=C.right,B={top:A,left:k,bottom:P,right:L,center:(k+L)/2,middle:(A+P)/2},M=zq(n),W=Te([],Z(M),!1),Q=((t=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&t!==void 0?t:[1,1]).map(function(ne){return ne*D});E&&W.push.apply(W,Te([],Z(Oq(n,B,Q)),!1));var $=X({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(W.push.apply(W,Te([],Z(jq(n,o?u:h,o?c:d,p,m,$,j)),!1)),a){var H=i.left,ee=i.top;$.left+=H,$.top+=ee,$.right+=H,$.bottom+=ee}return W.push.apply(W,Te([],Z(eO(T||!1,S||!1,o?u:h,o?c:d,p,m,$)),!1)),W=W.filter(function(ne){var de=ne.element,U=ne.elementRect,Y=ne.type;if(!de||!U)return!0;var te=U.rect;return JP(B,te,Y,z)}),W}function Oq(n,e,t){var r=n.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,o=r.maxSnapElementGapDistance,c=o===void 0?1/0:o,u=n.state.elementRects,d=[];return[["vertical",Wo,Qo],["horizontal",Qo,Wo]].forEach(function(h){var p=Z(h,3),m=p[0],b=p[1],_=p[2],E=e[b.start],S=e[b.end],T=e[b.center],I=e[_.start],D=e[_.end],O={left:t[0],top:t[1]};function z(A){var k=A.rect,P=O[b.start];return k[b.end]<E+P?E-k[b.end]:S-P<k[b.start]?k[b.start]-S:-1}var j=u.filter(function(A){var k=A.rect;return k[_.start]>D||k[_.end]<I?!1:z(A)>0}).sort(function(A,k){return z(A)-z(k)}),C=[];j.forEach(function(A){j.forEach(function(k){if(A!==k){var P=A.rect,L=k.rect,B=P[_.start],M=P[_.end],W=L[_.start],Q=L[_.end];B>Q||W>M||C.push([A,k])}})}),C.forEach(function(A){var k=Z(A,2),P=k[0],L=k[1],B=P.rect,M=L.rect,W=B[b.start],Q=B[b.end],$=M[b.start],H=M[b.end],ee=O[b.start],ne=0,de=0,U=!1,Y=!1,te=!1;if(Q<=E&&S<=$){if(Y=!0,ne=($-Q-(S-E))/2,de=Q+ne+(S-E)/2,_e(de-T)>ee)return}else if(Q<$&&H<E+ee){if(U=!0,ne=$-Q,de=H+ne,_e(de-E)>ee)return}else if(Q<$&&S-ee<W){if(te=!0,ne=$-Q,de=W-ne,_e(de-S)>ee)return}else return;ne&&JP(e,M,m,a)&&(ne>c||d.push({type:m,pos:m==="vertical"?[de,0]:[0,de],element:L.element,size:0,className:L.className,isStart:U,isCenter:Y,isEnd:te,gap:ne,hide:!0,gapRects:[P,L],direction:"",elementDirection:""}))})}),d}function Vq(n,e,t,r){var i,a,o=n.props,c=n.state,u=o.snapGridAll,d=o.snapGridWidth,h=d===void 0?0:d,p=o.snapGridHeight,m=p===void 0?0:p,b=c.snapRenderInfo,_=b&&(((i=b.direction)===null||i===void 0?void 0:i[0])||((a=b.direction)===null||a===void 0?void 0:a[1])),E=n.moveables;if(u&&E&&_&&(h||m)){if(c.snapThresholdInfo)return;c.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var S=n.getRect(),T=S.children,I=b.direction;if(T){var D=I.map(function(z,j){var C=j===0?{snapSize:h,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:m,posName:"top",sizeName:"height",clientOffset:r.top-t},A=C.snapSize,k=C.posName,P=C.sizeName,L=C.clientOffset;if(!A)return{dir:z,multiple:1,snapSize:A,snapOffset:0};var B=S[P],M=S[k],W=GM(T.map(function(U){return[U[k]-M,U[P],B-U[P]-U[k]+M]})).filter(function(U){return U}).sort(function(U,Y){return U-Y}),Q=W[0],$=W.map(function(U){return st(U/Q,.1)*A}),H=1,ee=st(B/Q,.1);for(H=1;H<=10&&!$.every(function(U){return U*H%1===0});++H);var ne=(-z+1)/2,de=I0(M-L,M-L+B,ne,1-ne);return{multiple:ee*H,dir:z,snapSize:A,snapOffset:Math.round(de/A)}}),O=D.map(function(z){return z.multiple||1});c.snapThresholdInfo.multiples=O,c.snapThresholdInfo.offset=D.map(function(z){return z.snapOffset}),D.forEach(function(z,j){z.snapSize})}}else c.snapThresholdInfo=null}function jq(n,e,t,r,i,a,o){r===void 0&&(r=0),i===void 0&&(i=0);var c=n.props,u=n.state,d=c.snapGridWidth,h=d===void 0?0:d,p=c.snapGridHeight,m=p===void 0?0:p,b=[],_=a.left,E=a.top,S=[0,0];Vq(n,r,i,a);var T=u.snapThresholdInfo,I=h,D=m;if(T&&(h*=T.multiples[0]||1,m*=T.multiples[1]||1,S=T.offset),m){for(var O=function(j){b.push({type:"horizontal",pos:[_,st(S[1]*D+j-i+E,.1)],className:Fe("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},z=0;z<=t*2;z+=m)O(z);for(var z=-m;z>=-t;z-=m)O(z)}if(h){for(var O=function(C){b.push({type:"vertical",pos:[st(S[0]*I+C-r+_,.1),E],className:Fe("grid-guideline"),size:t,hide:!o,direction:"",grid:!0})},z=0;z<=e*2;z+=h)O(z);for(var z=-h;z>=-e;z-=h)O(z)}return b}function JP(n,e,t,r){return t==="horizontal"?_e(n.right-e.left)<=r||_e(n.left-e.right)<=r||n.left<=e.right&&e.left<=n.right:t==="vertical"?_e(n.bottom-e.top)<=r||_e(n.top-e.bottom)<=r||n.top<=e.bottom&&e.top<=n.bottom:!0}function zq(n){var e=n.state,t=n.props.elementGuidelines,r=t===void 0?[]:t;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(m){return!m.refresh}),a=r.map(function(m){return da(m)&&"element"in m?X(X({},m),{element:La(m.element,!0)}):{element:La(m,!0)}}).filter(function(m){return m.element}),o=W7(i.map(function(m){return m.element}),a.map(function(m){return m.element})),c=o.maintained,u=o.added,d=[];c.forEach(function(m){var b=Z(m,2),_=b[0],E=b[1];d[E]=i[_]}),Lq(n,u.map(function(m){return a[m]})).map(function(m,b){d[u[b]]=m}),e.elementRects=d;var h=rE(n.props.elementSnapDirections),p=[];return d.forEach(function(m){var b=m.element,_=m.top,E=_===void 0?h.top:_,S=m.left,T=S===void 0?h.left:S,I=m.right,D=I===void 0?h.right:I,O=m.bottom,z=O===void 0?h.bottom:O,j=m.center,C=j===void 0?h.center:j,A=m.middle,k=A===void 0?h.middle:A,P=m.className,L=m.rect,B=iE({top:E,right:D,left:T,bottom:z,center:C,middle:k},L),M=B.horizontal,W=B.vertical,Q=B.horizontalNames,$=B.verticalNames,H=L.top,ee=L.left,ne=L.right-ee,de=L.bottom-H,U=[ne,de];W.forEach(function(Y,te){p.push({type:"vertical",element:b,pos:[st(Y,.1),H],size:de,sizes:U,className:P,elementRect:m,elementDirection:ZI[$[te]]||$[te],direction:""})}),M.forEach(function(Y,te){p.push({type:"horizontal",element:b,pos:[ee,st(Y,.1)],size:ne,sizes:U,className:P,elementRect:m,elementDirection:ZI[Q[te]]||Q[te],direction:""})})}),p}function lR(n,e){return n?n.map(function(t){var r=da(t)?t:{pos:t},i=r.pos;return rd(i)?r:X(X({},r),{pos:Xt(i,e)})}):[]}function eO(n,e,t,r,i,a,o){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var c=[],u=o.left,d=o.top,h=o.bottom,p=o.right,m=t+p-u,b=r+h-d;return lR(n,b).forEach(function(_){c.push({type:"horizontal",pos:[u,st(_.pos-a+d,.1)],size:m,className:_.className,direction:""})}),lR(e,m).forEach(function(_){c.push({type:"vertical",pos:[st(_.pos-i+u,.1),d],size:b,className:_.className,direction:""})}),c}function Lq(n,e){if(!e.length)return[];var t=n.props.groupable,r=n.state,i=r.containerClientRect,a=r.rootMatrix,o=r.is3d,c=r.offsetDelta,u=o?4:3,d=Z(cq(a,i,u),2),h=d[0],p=d[1],m=t?0:c[0],b=t?0:c[1];return e.map(function(_){var E=_.element.getBoundingClientRect(),S=E.left-h-m,T=E.top-p-b,I=T+E.height,D=S+E.width,O=Z(ld(a,[S,T],u),2),z=O[0],j=O[1],C=Z(ld(a,[D,I],u),2),A=C[0],k=C[1];return X(X({},_),{rect:{left:z,right:A,top:j,bottom:k,center:(z+A)/2,middle:(j+k)/2}})})}function Mm(n){var e=n.state,t=e.container,r=n.props.snapContainer||t;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(t!==r){var o=La(r,!0);if(o){var c=xh(o),u=pR(e,[c.left-i.left,c.top-i.top]),d=pR(e,[c.right-i.right,c.bottom-i.bottom]);a.left=st(u[0],1e-5),a.top=st(u[1],1e-5),a.right=st(d[0],1e-5),a.bottom=st(d[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=i_(n),e.enableSnap=!0,!0}function tO(n,e,t,r,i,a){var o=Dc(n,e,t,a?4:3),c=Qn(o,r);return cE(o,He(i,c))}function cR(n){return n?n/_e(n):0}function Bq(n,e,t,r,i,a){var o=a.fixedDirection,c=hq(t,o,r),u=sE(n,e,t,r),d=Te(Te([],Z(Tq(n,e,c,r,i,a)),!1),Z(XP(n,u,a)),!1),h=P0(d,0),p=P0(d,1);return{width:{isBound:h.isBound,offset:h.offset[0]},height:{isBound:p.isBound,offset:p.offset[1]}}}function Uq(n,e,t,r,i,a,o,c,u){var d=Qn(e,o),h=Pv(n,c,{vertical:[d[0]],horizontal:[d[1]]}),p=h.horizontal.offset,m=h.vertical.offset;if(st(m,Qx)||st(p,Qx)){var b=Z(Za({datas:u,distX:-m,distY:-p}),2),_=b[0],E=b[1],S=Math.min(i||1/0,t+o[0]*_),T=Math.min(a||1/0,r+o[1]*E);return[S-t,T-r]}return[0,0]}function nO(n,e,t,r,i,a,o,c){for(var u=Fi(n.state),d=n.props.keepRatio,h=0,p=0,m=0;m<2;++m){var b=e(h,p),_=Bq(n,b,i,d,o,c),E=_.width,S=_.height,T=E.isBound,I=S.isBound,D=E.offset,O=S.offset;if(m===1&&(T||(D=0),I||(O=0)),m===0&&o&&!T&&!I)return[0,0];if(d){var z=_e(D)*(t?1/t:1),j=_e(O)*(r?1/r:1),C=T&&I?z<j:I||!T&&z<j;C?D=t*O/r:O=r*D/t}h+=D,p+=O}if(!d&&i[0]&&i[1]){var A=Cq(n,u,i,a,c),k=A.maxWidth,P=A.maxHeight,L=Z(Uq(n,e(h,p).map(function(W){return W.map(function(Q){return st(Q,Qx)})}),t+h,r+p,k,P,i,o,c),2),D=L[0],O=L[1];h+=D,p+=O}return[h,p]}function yh(n){return n<0&&(n=n%360+360),n%=360,n}function Fq(n,e){e=yh(e);var t=Math.floor(n/360),r=t*360+360-e,i=t*360+e;return _e(n-r)<_e(n-i)?r:i}function B1(n,e){n=yh(n),e=yh(e);var t=yh(n-e);return Math.min(t,360-t)}function Gq(n,e,t,r){var i,a=n.props,o=(i=a[UP])!==null&&i!==void 0?i:5,c=a[FP];if(jd(n,"rotatable")){var u=e.pos1,d=e.pos2,h=e.pos3,p=e.pos4,m=e.origin,b=t*Math.PI/180,_=[u,d,h,p].map(function(O){return He(O,m)}),E=_.map(function(O){return wp(O,b)}),S=Te(Te([],Z(aq(n,_,E,m,t)),!1),Z(bq(n,_,E,m,t)),!1);S.sort(function(O,z){return _e(O-t)-_e(z-t)});var T=S.length>0;if(T)return{isSnap:T,dist:T?S[0]:t}}if(c?.length&&o){var I=c.slice().sort(function(O,z){return B1(O,r)-B1(z,r)}),D=I[0];if(B1(D,r)<=o)return{isSnap:!0,dist:t+Fq(r,D)-r}}return{isSnap:!1,dist:t}}function qq(n,e,t,r,i,a,o){if(!jd(n,"resizable"))return[0,0];var c=o.fixedDirection,u=o.nextAllMatrix,d=n.state,h=d.allMatrix,p=d.is3d;return nO(n,function(m,b){return tO(u||h,e+m,t+b,c,i,p)},e,t,r,i,a,o)}function Hq(n,e,t,r,i){if(!jd(n,"scalable"))return[0,0];var a=i.startOffsetWidth,o=i.startOffsetHeight,c=i.fixedPosition,u=i.fixedDirection,d=i.is3d,h=nO(n,function(p,m){return tO(qG(i,At(e,[p/a,m/o])),a,o,u,c,d)},a,o,t,c,r,i);return[h[0]/a,h[1]/o]}function $q(n,e){e.absolutePoses=Fi(n.state)}function uR(n){var e=[];return n.forEach(function(t){t.guidelineInfos.forEach(function(r){var i=r.guideline;Zr(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:t}))})}),e.map(function(t){var r=t.guideline,i=t.posInfo;return X(X({},r),{direction:i.direction})})}function dR(n,e,t,r,i,a){var o=nE(Nv(n,a),e,t),c=o.vertical,u=o.horizontal,d=Fu();c.forEach(function(_){_.isBound&&(_.direction==="start"&&(d.left=!0),_.direction==="end"&&(d.right=!0),r.push({type:"bounds",pos:_.pos}))}),u.forEach(function(_){_.isBound&&(_.direction==="start"&&(d.top=!0),_.direction==="end"&&(d.bottom=!0),i.push({type:"bounds",pos:_.pos}))});var h=xq(n),p=h.boundMap,m=h.vertical,b=h.horizontal;return m.forEach(function(_){Ms(r,function(E){var S=E.type,T=E.pos;return S==="bounds"&&T===_})>=0||r.push({type:"bounds",pos:_})}),b.forEach(function(_){Ms(i,function(E){var S=E.type,T=E.pos;return S==="bounds"&&T===_})>=0||i.push({type:"bounds",pos:_})}),{boundMap:d,innerBoundMap:p}}var Yq=fE("",["resizable","scalable"]),Kq={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",UP,FP,GP,qP,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(n,e){var t=n.state,r=t.top,i=t.left,a=t.pos1,o=t.pos2,c=t.pos3,u=t.pos4,d=t.snapRenderInfo,h=n.props.snapRenderThreshold,p=h===void 0?1:h;if(!d||!d.render||!jd(n,""))return qu(n,"boundMap",Fu(),function(se){return JSON.stringify(se)}),qu(n,"innerBoundMap",Fu(),function(se){return JSON.stringify(se)}),[];t.guidelines=i_(n);var m=Math.min(a[0],o[0],c[0],u[0]),b=Math.min(a[1],o[1],c[1],u[1]),_=d.externalPoses||[],E=Fi(n.state),S=[],T=[],I=[],D=[],O=[],z=zi(E),j=z.width,C=z.height,A=z.top,k=z.left,P=z.bottom,L=z.right,B={left:k,right:L,top:A,bottom:P,center:(k+L)/2,middle:(A+P)/2},M=_.length>0,W=M?zi(_):{};if(!d.request){if(d.direction&&O.push(fq(n,E,d.direction,p,p)),d.snap){var Q=zi(E);d.center&&(Q.middle=(Q.top+Q.bottom)/2,Q.center=(Q.left+Q.right)/2),O.push(JI(n,Q,p,p))}M&&(d.center&&(W.middle=(W.top+W.bottom)/2,W.center=(W.left+W.right)/2),O.push(JI(n,W,p,p))),O.forEach(function(se){var pe=se.vertical.posInfos,ie=se.horizontal.posInfos;S.push.apply(S,Te([],Z(pe.filter(function(ve){var Ae=ve.guidelineInfos;return Ae.some(function(Ie){var ke=Ie.guideline;return!ke.hide})}).map(function(ve){return{type:"snap",pos:ve.pos}})),!1)),T.push.apply(T,Te([],Z(ie.filter(function(ve){var Ae=ve.guidelineInfos;return Ae.some(function(Ie){var ke=Ie.guideline;return!ke.hide})}).map(function(ve){return{type:"snap",pos:ve.pos}})),!1)),I.push.apply(I,Te([],Z(uR(pe)),!1)),D.push.apply(D,Te([],Z(uR(ie)),!1))})}var $=dR(n,[k,L],[A,P],S,T),H=$.boundMap,ee=$.innerBoundMap;M&&dR(n,[W.left,W.right],[W.top,W.bottom],S,T,d.externalBounds);var ne=Te(Te([],Z(I),!1),Z(D),!1),de=ne.filter(function(se){return se.element&&!se.gapRects}),U=ne.filter(function(se){return se.gapRects}).sort(function(se,pe){return se.gap-pe.gap});Ne(n,"onSnap",{guidelines:ne.filter(function(se){var pe=se.element;return!pe}),elements:de,gaps:U},!0);var Y=qu(n,"boundMap",H,function(se){return JSON.stringify(se)},Fu()),te=qu(n,"innerBoundMap",ee,function(se){return JSON.stringify(se)},Fu());return(H===Y||ee===te)&&Ne(n,"onBound",{bounds:H,innerBounds:ee},!0),Te(Te(Te(Te(Te(Te([],Z(Mq(n,de,[m,b],B,e)),!1),Z(Pq(n,U,[m,b],B,e)),!1),Z(oR(n,"horizontal",D,[i,r],B,e)),!1),Z(oR(n,"vertical",I,[i,r],B,e)),!1),Z(sR(n,"horizontal",T,m,r,j,0,e)),!1),Z(sR(n,"vertical",S,b,i,C,1,e)),!1)},dragStart:function(n,e){n.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Mm(n)},drag:function(n){var e=n.state;Mm(n)||(e.guidelines=i_(n)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(n){this.unset(n)},dragEnd:function(n){this.unset(n)},dragControlCondition:function(n,e){if(Yq(n,e)||r_(n,e))return!0;if(!e.isRequest&&e.inputEvent)return Wn(e.inputEvent.target,Fe("snap-control"))},dragControlStart:function(n){n.state.snapRenderInfo=null,Mm(n)},dragControl:function(n){this.drag(n)},dragControlEnd:function(n){this.unset(n)},dragGroupStart:function(n,e){this.dragStart(n,e)},dragGroup:function(n){this.drag(n)},dragGroupEnd:function(n){this.unset(n)},dragGroupControlStart:function(n){n.state.snapRenderInfo=null,Mm(n)},dragGroupControl:function(n){this.drag(n)},dragGroupControlEnd:function(n){this.unset(n)},unset:function(n){var e=n.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function Xq(n,e){return[n[0]*e[0],n[1]*e[1]]}function Fe(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return qF.apply(void 0,Te([Zw],Z(n),!1))}function rO(n){n()}function Wq(n){return!n||n==="none"?[1,0,0,1,0,0]:da(n)?n:Gh(n)}function bh(n,e,t){return D0(e,hc(t,e),n,hc(t.map(function(r){return-r}),e))}function Qq(n,e,t){if(e==="%"){var r=lE(n.ownerSVGElement);return r[t?"width":"height"]/100}return 1}function Zq(n){var e=Jq(uE(n,":before"));return e.map(function(t,r){var i=yp(t),a=i.value,o=i.unit;return a*Qq(n,o,r===0)})}function V0(n){return n?n.split(" "):["0","0"]}function Jq(n){return V0(n.transformOrigin)}function iO(n){var e=Jr(n),t=e("transform");if(t&&t!=="none")return t;if("transform"in n){var r=n.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var o=[],c=function(d){var h=i[d].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(p){return h[p]}).join(", "),")"))},u=0;u<a;++u)c(u);return o.join(" ")}return""}function Hh(n,e,t,r,i){var a,o,c=Uw(n)||al(n),u=!1,d,h;if(!n||t)d=n;else{var p=(a=n?.assignedSlot)===null||a===void 0?void 0:a.parentElement,m=n.parentElement;p?(u=!0,h=m,d=p):d=m}for(var b=!1,_=n===e||d===e,E="relative",S=1,T=parseFloat(i?.("zoom"))||1,I=i?.("position");d&&d!==c;){e===d&&(_=!0);var D=Jr(d),O=d.tagName.toLowerCase(),z=iO(d),j=D("willChange"),C=parseFloat(D("zoom"))||1;if(E=D("position"),r&&C!==1){S=C;break}if(!t&&r&&T!==1&&I&&I!=="absolute"||O==="svg"||O==="foreignobject"||E!=="static"||z&&z!=="none"||j==="transform")break;var A=(o=n?.assignedSlot)===null||o===void 0?void 0:o.parentNode,k=d.parentNode;A&&(u=!0,h=k);var P=k;if(P&&P.nodeType===11){d=P.host,b=!0,E=Jr(d)("position");break}d=P,E="relative"}return{offsetZoom:S,hasSlot:u,parentSlotElement:h,isCustomElement:b,isStatic:E==="static",isEnd:_||!d||d===c,offsetParent:d||c}}function eH(n,e){var t,r=n.tagName.toLowerCase(),i=n.offsetLeft,a=n.offsetTop,o=Jr(n),c=Sv(i),u=!c,d,h;return!u&&(r!=="svg"||n.ownerSVGElement)?(d=EP?Zq(n):V0(o("transformOrigin")).map(function(p){return parseFloat(p)}),h=d.slice(),u=!0,r==="svg"?(i=0,a=0):(t=Z(rH(n,d,n===e&&e.tagName.toLowerCase()==="g"),4),i=t[0],a=t[1],d[0]=t[2],d[1]=t[3])):(d=V0(o("transformOrigin")).map(function(p){return parseFloat(p)}),h=d.slice()),{tagName:r,isSVG:c,hasOffset:u,offset:[i||0,a||0],origin:d,targetOrigin:h}}function aO(n,e){var t=Jr(n),r=Jr(al(n)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),o=parseInt(r("marginTop"),10);return t("position")==="absolute"&&((t("top")!=="auto"||t("bottom")!=="auto")&&(o=0),(t("left")!=="auto"||t("right")!=="auto")&&(a=0)),[a,o]}function a_(n){n.forEach(function(e){var t=e.matrix;t&&(e.matrix=fa(t,3,4))})}function tH(n){for(var e=n.parentElement,t=!1,r=al(n);e;){var i=uE(e).transform;if(i&&i!=="none"){t=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:t}}function Ov(n,e){return e===void 0&&(e=n.length>9),"".concat(e?"matrix3d":"matrix","(").concat(gP(n,!e).join(","),")")}function lE(n){var e=n.clientWidth,t=n.clientHeight;if(!n)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:t};var r=n.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||t,clientWidth:e,clientHeight:t}}function nH(n,e){var t,r=lE(n),i=r.width,a=r.height,o=r.clientWidth,c=r.clientHeight,u=o/i,d=c/a,h=n.preserveAspectRatio.baseVal,p=h.align,m=h.meetOrSlice,b=[0,0],_=[u,d],E=[0,0];if(p!==1){var S=(p-2)%3,T=Math.floor((p-2)/3);b[0]=i*S/2,b[1]=a*T/2;var I=m===2?Math.max(d,u):Math.min(u,d);_[0]=I,_[1]=I,E[0]=(o-i)/2*S,E[1]=(c-a)/2*T}var D=Kw(_,e);return t=Z(E,2),D[e*(e-1)]=t[0],D[e*(e-1)+1]=t[1],bh(D,e,b)}function rH(n,e,t){var r=n.tagName.toLowerCase();if(!n.getBBox||!t&&r==="g")return[0,0,0,0];var i=Jr(n),a=i("transform-box")==="fill-box",o=n.getBBox(),c=lE(n.ownerSVGElement),u=o.x,d=o.y;r==="foreignobject"&&!u&&!d&&(u=parseFloat(n.getAttribute("x"))||0,d=parseFloat(n.getAttribute("y"))||0);var h=u-c.x,p=d-c.y,m=a?e[0]:e[0]-h,b=a?e[1]:e[1]-p;return[h,p,m,b]}function hn(n,e,t){return Cr(n,fc(e,t),t)}function Dc(n,e,t,r){return[[0,0],[e,0],[0,t],[e,t]].map(function(i){return hn(n,i,r)})}function zi(n){var e=n.map(function(d){return d[0]}),t=n.map(function(d){return d[1]}),r=Math.min.apply(Math,Te([],Z(e),!1)),i=Math.min.apply(Math,Te([],Z(t),!1)),a=Math.max.apply(Math,Te([],Z(e),!1)),o=Math.max.apply(Math,Te([],Z(t),!1)),c=a-r,u=o-i;return{left:r,top:i,right:a,bottom:o,width:c,height:u}}function fR(n,e,t,r){var i=Dc(n,e,t,r);return zi(i)}function iH(n,e,t,r,i){var a,o=n.target,c=n.origin,u=e.matrix,d=oO(o),h=d.offsetWidth,p=d.offsetHeight,m=t.getBoundingClientRect(),b=[0,0];t===al(t)&&(b=aO(o,!0));for(var _=o.getBoundingClientRect(),E=_.left-m.left+t.scrollLeft-(t.clientLeft||0)+b[0],S=_.top-m.top+t.scrollTop-(t.clientTop||0)+b[1],T=_.width,I=_.height,D=D0(r,i,u),O=fR(D,h,p,r),z=O.left,j=O.top,C=O.width,A=O.height,k=hn(D,c,r),P=He(k,[z,j]),L=[E+P[0]*T/C,S+P[1]*I/A],B=[0,0],M=0;++M<10;){var W=Ha(i,r);a=Z(He(hn(W,L,r),hn(W,k,r)),2),B[0]=a[0],B[1]=a[1];var Q=D0(r,i,hc(B,r),u),$=fR(Q,h,p,r),H=$.left,ee=$.top,ne=H-E,de=ee-S;if(_e(ne)<2&&_e(de)<2)break;L[0]-=ne,L[1]-=de}return B.map(function(U){return Math.round(U)})}function aH(n,e,t){var r=n.length===16,i=r?4:3,a=e.map(function(u){return hn(n,u,i)}),o=t.left,c=t.top;return a.map(function(u){return[u[0]+o,u[1]+c]})}function Ui(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function sO(n,e){return Ui([e[0]-n[0],e[1]-n[1]])}function rh(n,e,t,r){t===void 0&&(t=1),r===void 0&&(r=Rn(n,e));var i=sO(n,e);return{transform:"translateY(-50%) translate(".concat(n[0],"px, ").concat(n[1],"px) rotate(").concat(r,"rad) scaleY(").concat(t,")"),width:"".concat(i,"px")}}function j0(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=t.length,a=t.reduce(function(c,u){return c+u[0]},0)/i,o=t.reduce(function(c,u){return c+u[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(n,"rad) scale(").concat(e,")")}}function gc(n,e){var t=n[e];return da(t)?X(X({},n),t):n}function oO(n){var e=n&&!Sv(n.offsetWidth),t=0,r=0,i=0,a=0,o=0,c=0,u=0,d=0,h=0,p=0,m=0,b=0,_=1/0,E=1/0,S=1/0,T=1/0,I=0,D=0,O=!1;if(n)if(!e&&n.ownerSVGElement){var z=n.getBBox();O=!0,t=z.width,r=z.height,o=t,c=r,u=t,d=r,i=t,a=r}else{var j=Jr(n),C=n.style,A=j("boxSizing")==="border-box",k=parseFloat(j("borderLeftWidth"))||0,P=parseFloat(j("borderRightWidth"))||0,L=parseFloat(j("borderTopWidth"))||0,B=parseFloat(j("borderBottomWidth"))||0,M=parseFloat(j("paddingLeft"))||0,W=parseFloat(j("paddingRight"))||0,Q=parseFloat(j("paddingTop"))||0,$=parseFloat(j("paddingBottom"))||0,H=M+W,ee=Q+$,ne=k+P,de=L+B,U=H+ne,Y=ee+de,te=j("position"),se=0,pe=0;if("clientLeft"in n){var ie=null;if(te==="absolute"){var ve=Hh(n,al(n));ie=ve.offsetParent}else ie=n.parentElement;if(ie){var Ae=Jr(ie);se=parseFloat(Ae("width")),pe=parseFloat(Ae("height"))}}h=Math.max(H,Xt(j("minWidth"),se)||0),p=Math.max(ee,Xt(j("minHeight"),pe)||0),_=Xt(j("maxWidth"),se),E=Xt(j("maxHeight"),pe),isNaN(_)&&(_=1/0),isNaN(E)&&(E=1/0),I=Xt(C.width,0)||0,D=Xt(C.height,0)||0,o=parseFloat(j("width"))||0,c=parseFloat(j("height"))||0,u=_e(o-I)<1?zx(h,I||o,_):o,d=_e(c-D)<1?zx(p,D||c,E):c,t=u,r=d,i=u,a=d,A?(S=_,T=E,m=h,b=p,u=t-U,d=r-Y):(S=_+U,T=E+Y,m=h+U,b=p+Y,t=u+U,r=d+Y),i=u+H,a=d+ee}return{svg:O,offsetWidth:t,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:u,contentHeight:d,inlineCSSWidth:I,inlineCSSHeight:D,cssWidth:o,cssHeight:c,minWidth:h,minHeight:p,maxWidth:_,maxHeight:E,minOffsetWidth:m,minOffsetHeight:b,maxOffsetWidth:S,maxOffsetHeight:T}}function lO(n,e){return Rn(e>0?n[0]:n[1],e>0?n[1]:n[0])}function Pm(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function cO(n,e){var t=n===al(n)||n===Uw(n),r={clientLeft:n.clientLeft,clientTop:n.clientTop,clientWidth:n.clientWidth,clientHeight:n.clientHeight,scrollWidth:n.scrollWidth,scrollHeight:n.scrollHeight,overflow:!1};return t&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Jr(n)("overflow")!=="visible",X(X({},e),r)}function U1(n,e,t,r){var i=n.left,a=n.right,o=n.top,c=n.bottom,u=e.top,d=e.left,h={left:d+i,top:u+o,right:d+a,bottom:u+c,width:a-i,height:c-o};return t&&r?cO(t,h):h}function xh(n,e){var t=0,r=0,i=0,a=0;if(n){var o=n.getBoundingClientRect();t=o.left,r=o.top,i=o.width,a=o.height}var c={left:t,top:r,width:i,height:a,right:t+i,bottom:r+a};return n&&e?cO(n,c):c}function sH(n){var e=n.props,t=e.groupable,r=e.svgOrigin,i=n.getState(),a=i.offsetWidth,o=i.offsetHeight,c=i.svg,u=i.transformOrigin;return!t&&c&&r?pE(r,a,o):u}function uO(n,e,t,r){var i;if(n)i=n;else if(e)i=[0,0];else{var a=t.target;i=dO(a,r)}return i}function dO(n,e){if(n){var t=n.getAttribute("data-rotation")||"",r=n.getAttribute("data-direction");if(e.deg=t,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function cE(n,e){return[At(e,n[0]),At(e,n[1]),At(e,n[2]),At(e,n[3])]}function Fi(n){var e=n.left,t=n.top,r=n.pos1,i=n.pos2,a=n.pos3,o=n.pos4;return cE([r,i,a,o],[e,t])}function s_(n,e){n[e?"controlAbles":"targetAbles"].forEach(function(t){t.unset&&t.unset(n)})}function Gu(n,e){var t=e?"controlGesto":"targetGesto",r=n[t];r?.isIdle()===!1&&s_(n,e),r?.unset(),n[t]=null}function Vr(n,e){if(e){var t=Vd(e);t.nextStyle=X(X({},t.nextStyle),n)}return{style:n,cssText:Ps(n).map(function(r){return"".concat(t0(r,"-"),": ").concat(n[r],";")}).join("")}}function fO(n,e,t){var r=e.afterTransform||e.transform;return X(X({},Vr(X(X(X({},n.style),e.style),{transform:r}),t)),{afterTransform:r,transform:n.transform})}function dt(n,e,t,r){var i=e.datas;i.datas||(i.datas={});var a=X(X({},t),{target:n.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:n,moveable:n,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=e.stop)===null||o===void 0||o.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function pi(n,e,t){var r=e.datas,i="isDrag"in t?t.isDrag:e.isDrag;return r.datas||(r.datas={}),X(X({isDrag:i},t),{moveable:n,target:n.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:n,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function Vv(n,e,t){n._emitter.on(e,t)}function Ne(n,e,t,r,i){return n.triggerEvent(e,t,r,i)}function uE(n,e){return Bo(n).getComputedStyle(n,e)}function Om(n,e,t){var r={},i={};return n.filter(function(a){var o=a.name;if(r[o]||!e.some(function(c){return a[c]}))return!1;if(!t&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[o]=!0,!0})}function o_(n,e){return n===e||n==null&&e==null}function hR(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=n.length-1,r=0;r<t;++r){var i=n[r];if(!Sv(i))return i}return n[t]}function hO(n,e){var t=[],r=[];return n.forEach(function(i,a){var o=e(i,a,n),c=r.indexOf(o),u=t[c]||[];c===-1&&(r.push(o),t.push(u)),u.push(i)}),t}function oH(n,e){var t=[],r={};return n.forEach(function(i,a){var o=e(i,a,n),c=r[o];c||(c=[],r[o]=c,t.push(c)),c.push(i)}),t}function pO(n){return n.reduce(function(e,t){return e.concat(t)},[])}function od(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.sort(function(t,r){return _e(r)-_e(t)}),n[0]}function ld(n,e,t){return Cr(Ha(n,t),fc(e,t),t)}function lH(n,e){var t,r=n.is3d,i=n.rootMatrix,a=r?4:3;return t=Z(ld(i,[e.distX,e.distY],a),2),e.distX=t[0],e.distY=t[1],e}function Di(n,e,t,r){if(!t[0]&&!t[1])return e;var i=hn(n,[cR(t[0]||1),0],r),a=hn(n,[0,cR(t[1]||1)],r),o=hn(n,[t[0]/Ui(i),t[1]/Ui(a)],r);return At(e,o)}function na(n,e,t){return t?"".concat(n/e*100,"%"):"".concat(n,"px")}function z0(n){return _e(n)<=zr?0:n}function dE(n){return function(e){if(!e.isDragging(n))return"";var t=QG(e,n),r=t.deg;return r?Fe("view-control-rotation".concat(r)):""}}function fE(n,e){return e===void 0&&(e=[n]),function(t,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return Wn(i,Fe("direction"))&&(!n||Wn(i,Fe(n)))}}function cH(n,e,t){var r,i=id(n,{"x%":function(z){return z/100*e.offsetWidth},"y%":function(z){return z/100*e.offsetHeight}}),a=n.slice(0,t<0?void 0:t),o=n.slice(0,t<0?void 0:t+1),c=n[t]||"",u=t<0?[]:n.slice(t),d=t<0?[]:n.slice(t+1),h=i.slice(0,t<0?void 0:t),p=i.slice(0,t<0?void 0:t+1),m=(r=i[t])!==null&&r!==void 0?r:id([""])[0],b=t<0?[]:i.slice(t),_=t<0?[]:i.slice(t+1),E=m?[m]:[],S=Ru(h),T=Ru(p),I=Ru(b),D=Ru(_),O=Wt(S,I,4);return{transforms:n,beforeFunctionMatrix:S,beforeFunctionMatrix2:T,targetFunctionMatrix:Ru(E),afterFunctionMatrix:I,afterFunctionMatrix2:D,allFunctionMatrix:O,beforeFunctions:h,beforeFunctions2:p,targetFunction:E[0],afterFunctions:b,afterFunctions2:_,beforeFunctionTexts:a,beforeFunctionTexts2:o,targetFunctionText:c,afterFunctionTexts:u,afterFunctionTexts2:d}}function uH(n){return!n||!da(n)||Pd(n)?!1:Gn(n)||"length"in n}function La(n,e){return n?Pd(n)?n:Qr(n)?e?document.querySelector(n):n:zw(n)?n():YM(n)?n:"current"in n?n.current:n:null}function hE(n,e){if(!n)return[];var t=uH(n)?[].slice.call(n):[n];return t.reduce(function(r,i){return Qr(i)&&e?Te(Te([],Z(r),!1),Z([].slice.call(document.querySelectorAll(i))),!1):(Gn(i)?r.push(hE(i,e)):r.push(La(i,e)),r)},[])}function dH(n,e,t){var r=Rn(n,e)/Math.PI*180;return r=t>=0?r:180-r,r=r>=0?r:360+r,r}function pR(n,e){var t=n.rootMatrix,r=n.is3d,i=r?4:3,a=Ha(t,i);return r||(a=fa(a,3,4)),a[12]=0,a[13]=0,a[14]=0,K7(a,e)}function gO(n,e,t,r,i){var a=Z(n,2),o=a[0],c=a[1],u=0,d=0;if(i&&o&&c){var h=Rn([0,0],e),p=Rn([0,0],r),m=Ui(e),b=Math.cos(h-p)*m;if(!r[0])d=b,u=d*t;else if(!r[1])u=b,d=u/t;else{var _=r[0]*o,E=r[1]*c,S=Math.atan2(_+e[0],E+e[1]),T=Math.atan2(_,E);S<0&&(S+=Math.PI*2),T<0&&(T+=Math.PI*2);var I=0;_e(S-T)<Math.PI/2||_e(S-T)>Math.PI/2*3||(T+=Math.PI),I=S-T,I>Math.PI*2?I-=Math.PI*2:I>Math.PI?I=2*Math.PI-I:I<-Math.PI&&(I=-2*Math.PI-I);var D=Ui([_+e[0],E+e[1]])*Math.cos(I);u=D*Math.sin(T)-_,d=D*Math.cos(T)-E,r[0]<0&&(u*=-1),r[1]<0&&(d*=-1)}}else u=r[0]*e[0],d=r[1]*e[1];return[u,d]}function mO(n,e,t,r){var i,a=t.ratio,o=t.startOffsetWidth,c=t.startOffsetHeight,u=0,d=0,h=r.distX,p=r.distY,m=r.pinchScale,b=r.parentDistance,_=r.parentDist,E=r.parentScale,S=t.fixedDirection,T=[0,1].map(function(C){return _e(n[C]-S[C])}),I=[0,1].map(function(C){var A=T[C];return A!==0&&(A=2/A),A});if(_)u=_[0],d=_[1],e&&(u?d||(d=u/a):u=d*a);else if(rd(m))u=(m-1)*o,d=(m-1)*c;else if(E)u=(E[0]-1)*o,d=(E[1]-1)*c;else if(b){var D=o*T[0],O=c*T[1],z=Ui([D,O]);u=b/z*D*I[0],d=b/z*O*I[1]}else{var j=Za({datas:t,distX:h,distY:p});j=I.map(function(C,A){return j[A]*C}),i=Z(gO([o,c],j,a,n,e),2),u=i[0],d=i[1]}return{distWidth:u,distHeight:d}}function l_(n,e){if(e){if(n==="left")return{x:"0%",y:"50%"};if(n==="top")return{x:"50%",y:"50%"};if(n==="center")return{x:"50%",y:"50%"};if(n==="right")return{x:"100%",y:"50%"};if(n==="bottom")return{x:"50%",y:"100%"};var t=Z(n.split(" "),2),r=t[0],i=t[1],a=l_(r||""),o=l_(i||""),c=X(X({},a),o),u={x:"50%",y:"50%"};return c.x&&(u.x=c.x),c.y&&(u.y=c.y),c.value&&(c.x&&!c.y&&(u.y=c.value),!c.x&&c.y&&(u.x=c.value)),u}return n==="left"?{x:"0%"}:n==="right"?{x:"100%"}:n==="top"?{y:"0%"}:n==="bottom"?{y:"100%"}:n?n==="center"?{value:"50%"}:{value:n}:{}}function pE(n,e,t){var r=l_(n,!0),i=r.x,a=r.y;return[Xt(i,e)||0,Xt(a,t)||0]}function fH(n,e,t){var r=n.map(function(a){return He(a,e)}),i=r.map(function(a){return wp(a,t)});return{prev:r,next:i,result:i.map(function(a){return At(a,e)})}}function vO(n,e){return n.length===e.length&&n.every(function(t,r){var i=e[r],a=Gn(t),o=Gn(i);return a&&o?vO(t,i):!a&&!o?t===i:!1})}function qu(n,e,t,r,i){var a=n._store,o=a[e];if(!(e in a))if(i!=null)a[e]=i,o=i;else return a[e]=t,t;return o===t||r(o)===r(t)?o:(a[e]=t,t)}function Mr(n){return n>=0?1:-1}function _e(n){return Math.abs(n)}function F1(n,e){return o7(n).map(function(t){return e(t)})}function yO(n){return rd(n)?{top:n,left:n,right:n,bottom:n}:{left:n.left||0,top:n.top||0,right:n.right||0,bottom:n.bottom||0}}var hH=Tp("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(n,e){var t=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,o=n.props,c=o.pinchable,u=o.ables;if(!c)return!1;var d="onPinch".concat(r?"Group":"","Start"),h="drag".concat(r?"Group":"","ControlStart"),p=(c===!0?n.controlAbles:u.filter(function(E){return c.indexOf(E.name)>-1})).filter(function(E){return E.canPinch&&E[h]}),m=dt(n,e,{});r&&(m.targets=r);var b=Ne(n,d,m);t.isPinch=b!==!1,t.ables=p;var _=t.isPinch;return _?(p.forEach(function(E){if(a[E.name]=a[E.name]||{},!!E[h]){var S=X(X({},e),{datas:a[E.name],parentRotate:i,isPinch:!0});E[h](n,S)}}),n.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},_):!1},pinch:function(n,e){var t=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,o=e.inputEvent,c=e.targets,u=e.angle;if(t.isPinch){var d=i*(1-1/r),h=dt(n,e,{});c&&(h.targets=c);var p="onPinch".concat(c?"Group":"");Ne(n,p,h);var m=t.ables,b="drag".concat(c?"Group":"","Control");return m.forEach(function(_){_[b]&&_[b](n,X(X({},e),{datas:a[_.name],inputEvent:o,resolveMatrix:!0,pinchScale:r,parentDistance:d,parentRotate:u,isPinch:!0}))}),h}},pinchEnd:function(n,e){var t=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,o=e.originalDatas;if(t.isPinch){var c="onPinch".concat(a?"Group":"","End"),u=pi(n,e,{isDrag:r});a&&(u.targets=a),Ne(n,c,u);var d=t.ables,h="drag".concat(a?"Group":"","ControlEnd");return d.forEach(function(p){p[h]&&p[h](n,X(X({},e),{isDrag:r,datas:o[p.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(n,e){return this.pinchStart(n,X(X({},e),{targets:n.props.targets}))},pinchGroup:function(n,e){return this.pinch(n,X(X({},e),{targets:n.props.targets}))},pinchGroupEnd:function(n,e){return this.pinchEnd(n,X(X({},e),{targets:n.props.targets}))}}),gR=fE("scalable"),pH={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:zP("scalable"),dragControlCondition:gR,viewClassName:dE("scalable"),dragControlStart:function(n,e){var t=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,o=uO(a,r,i,t),c=n.state,u=c.width,d=c.height,h=c.targetTransform,p=c.target,m=c.pos1,b=c.pos2,_=c.pos4;if(!o||!p)return!1;r||Rc(n,e),t.datas={},t.transform=h,t.prevDist=[1,1],t.direction=o,t.startOffsetWidth=u,t.startOffsetHeight=d,t.startValue=[1,1];var E=!o[0]&&!o[1]||o[0]||!o[1];kv(n,e,"scale"),t.isWidth=E;function S(j){t.ratio=j&&isFinite(j)?j:0}t.startPositions=Fi(n.state);function T(j){var C=WP(t.startPositions,j);t.fixedDirection=C.fixedDirection,t.fixedPosition=C.fixedPosition,t.fixedOffset=C.fixedOffset}t.setFixedDirection=T,S(Cs(m,b)/Cs(b,_)),T([-o[0],-o[1]]);var I=function(j){t.minScaleSize=j},D=function(j){t.maxScaleSize=j};I([-1/0,-1/0]),D([1/0,1/0]);var O=dt(n,e,X(X({direction:o,set:function(j){t.startValue=j},setRatio:S,setFixedDirection:T,setMinScaleSize:I,setMaxScaleSize:D},Dv(n,e)),{dragStart:Nr.dragStart(n,new ad().dragStart([0,0],e))})),z=Ne(n,"onScaleStart",O);return t.startFixedDirection=t.fixedDirection,z!==!1&&(t.isScale=!0,n.state.snapRenderInfo={request:e.isRequest,direction:o}),t.isScale?O:!1},dragControl:function(n,e){Iv(n,e,"scale");var t=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,o=e.dragClient,c=e.isRequest,u=e.useSnap,d=e.resolveMatrix,h=t.prevDist,p=t.direction,m=t.startOffsetWidth,b=t.startOffsetHeight,_=t.isScale,E=t.startValue,S=t.isWidth,T=t.ratio;if(!_)return!1;var I=n.props,D=I.throttleScale,O=I.parentMoveable,z=p;!p[0]&&!p[1]&&(z=[1,1]);var j=T&&(r??I.keepRatio)||!1,C=n.state,A=[E[0],E[1]];function k(){var xe=mO(z,j,t,e),Ee=xe.distWidth,Xe=xe.distHeight,je=m?(m+Ee)/m:1,Le=b?(b+Xe)/b:1;E[0]||(A[0]=Ee/m),E[1]||(A[1]=Xe/b);var Pe=(z[0]||j?je:1)*A[0],nt=(z[1]||j?Le:1)*A[1];return Pe===0&&(Pe=Mr(h[0])*Dm),nt===0&&(nt=Mr(h[1])*Dm),[Pe,nt]}var P=k();if(!a&&n.props.groupable){var L=C.snapRenderInfo||{},B=L.direction;Gn(B)&&(B[0]||B[1])&&(C.snapRenderInfo={direction:p,request:e.isRequest})}Ne(n,"onBeforeScale",dt(n,e,{scale:P,setFixedDirection:function(xe){return t.setFixedDirection(xe),P=k(),P},startFixedDirection:t.startFixedDirection,setScale:function(xe){P=xe}},!0));var M=[P[0]/A[0],P[1]/A[1]],W=o,Q=[0,0],$=Mr(M[0]*M[1]),H=!o&&!i&&a;if(H||d?W=tE(n,t.targetAllTransform,[0,0],[0,0],t):o||(W=t.fixedPosition),a||(Q=Hq(n,M,p,!u&&c,t)),j){z[0]&&z[1]&&Q[0]&&Q[1]&&(Math.abs(Q[0]*m)>Math.abs(Q[1]*b)?Q[1]=0:Q[0]=0);var ee=!Q[0]&&!Q[1];if(ee&&(S?M[0]=st(M[0]*A[0],D)/A[0]:M[1]=st(M[1]*A[1],D)/A[1]),z[0]&&!z[1]||Q[0]&&!Q[1]||ee&&S){M[0]+=Q[0];var ne=m*M[0]*A[0]/T;M[1]=Mr($*M[0])*_e(ne/b/A[1])}else if(!z[0]&&z[1]||!Q[0]&&Q[1]||ee&&!S){M[1]+=Q[1];var de=b*M[1]*A[1]*T;M[0]=Mr($*M[1])*_e(de/m/A[0])}}else M[0]+=Q[0],M[1]+=Q[1],Q[0]||(M[0]=st(M[0]*A[0],D)/A[0]),Q[1]||(M[1]=st(M[1]*A[1],D)/A[1]);M[0]===0&&(M[0]=Mr(h[0])*Dm),M[1]===0&&(M[1]=Mr(h[1])*Dm),P=Xq(M,[A[0],A[1]]);var U=[m,b],Y=[m*P[0],b*P[1]];Y=FM(Y,t.minScaleSize,t.maxScaleSize,j?T:!1),P=F1(2,function(xe){return U[xe]?Y[xe]/U[xe]:Y[xe]}),M=F1(2,function(xe){return P[xe]/A[xe]});var te=F1(2,function(xe){return h[xe]?M[xe]/h[xe]:M[xe]}),se="scale(".concat(M.join(", "),")"),pe="scale(".concat(P.join(", "),")"),ie=Rv(t,pe,se),ve=!E[0]||!E[1],Ae=HG(n,ve?pe:se,t.fixedDirection,W,t.fixedOffset,t,ve),Ie=H?Ae:He(Ae,t.prevInverseDist||[0,0]);if(t.prevDist=M,t.prevInverseDist=Ae,P[0]===h[0]&&P[1]===h[1]&&Ie.every(function(xe){return!xe})&&!O&&!H)return!1;var ke=dt(n,e,X({offsetWidth:m,offsetHeight:b,direction:p,scale:P,dist:M,delta:te,isPinch:!!a},NP(n,ie,Ie,a,e)));return Ne(n,"onScale",ke),ke},dragControlEnd:function(n,e){var t=e.datas;if(!t.isScale)return!1;t.isScale=!1;var r=pi(n,e,{});return Ne(n,"onScaleEnd",r),r},dragGroupControlCondition:gR,dragGroupControlStart:function(n,e){var t=e.datas,r=this.dragControlStart(n,e);if(!r)return!1;var i=ca(n,"resizable",e);t.moveableScale=n.scale;var a=Is(n,this,"dragControlStart",e,function(d,h){return M0(n,d,t,h)}),o=function(d){r.setFixedDirection(d),a.forEach(function(h,p){h.setFixedDirection(d),M0(n,h.moveable,t,i[p])})};t.setFixedDirection=o;var c=X(X({},r),{targets:n.props.targets,events:a,setFixedDirection:o}),u=Ne(n,"onScaleGroupStart",c);return t.isScale=u!==!1,t.isScale?c:!1},dragGroupControl:function(n,e){var t=e.datas;if(t.isScale){Vv(n,"onBeforeScale",function(h){Ne(n,"onBeforeScaleGroup",dt(n,e,X(X({},h),{targets:n.props.targets}),!0))});var r=this.dragControl(n,e);if(r){var i=r.dist,a=t.moveableScale;n.scale=[i[0]*a[0],i[1]*a[1]];var o=n.props.keepRatio,c=t.fixedPosition,u=Is(n,this,"dragControl",e,function(h,p){var m=Z(Cr(Ep(n.rotation/180*Math.PI,3),[p.datas.originalX*i[0],p.datas.originalY*i[1],1],3),2),b=m[0],_=m[1];return X(X({},p),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:At(c,[b,_])})}),d=X({targets:n.props.targets,events:u},r);return Ne(n,"onScaleGroup",d),d}}},dragGroupControlEnd:function(n,e){var t=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(n,e);var i=Is(n,this,"dragControlEnd",e),a=pi(n,e,{targets:n.props.targets,events:i});return Ne(n,"onScaleGroupEnd",a),t}},request:function(){var n={},e=0,t=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:n,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,t+=i.deltaHeight,{datas:n,parentDist:[e,t],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:n,isDrag:!0,useSnap:r}}}}};function Eo(n,e){return n.map(function(t,r){return I0(t,e[r],1,2)})}function mR(n,e,t){var r=Rn(n,e),i=Rn(n,t),a=i-r;return a>=0?a:a+2*Math.PI}function gH(n,e){var t=mR(n[0],n[1],n[2]),r=mR(e[0],e[1],e[2]),i=Math.PI;return!(t>=i&&r<=i||t<=i&&r>=i)}var mH={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:dE("warpable"),render:function(n,e){var t=n.props,r=t.resizable,i=t.scalable,a=t.warpable,o=t.zoom;if(r||i||!a)return[];var c=n.state,u=c.pos1,d=c.pos2,h=c.pos3,p=c.pos4,m=Eo(u,d),b=Eo(d,u),_=Eo(u,h),E=Eo(h,u),S=Eo(h,p),T=Eo(p,h),I=Eo(d,p),D=Eo(p,d);return Te([e.createElement("div",{className:Fe("line"),key:"middeLine1",style:rh(m,S,o)}),e.createElement("div",{className:Fe("line"),key:"middeLine2",style:rh(b,T,o)}),e.createElement("div",{className:Fe("line"),key:"middeLine3",style:rh(_,I,o)}),e.createElement("div",{className:Fe("line"),key:"middeLine4",style:rh(E,D,o)})],Z(LP(n,"warpable",e)),!1)},dragControlCondition:function(n,e){if(e.isRequest)return!1;var t=e.inputEvent.target;return Wn(t,Fe("direction"))&&Wn(t,Fe("warpable"))},dragControlStart:function(n,e){var t=e.datas,r=e.inputEvent,i=n.props.target,a=r.target,o=dO(a,t);if(!o||!i)return!1;var c=n.state,u=c.transformOrigin,d=c.is3d,h=c.targetTransform,p=c.targetMatrix,m=c.width,b=c.height,_=c.left,E=c.top;t.datas={},t.targetTransform=h,t.warpTargetMatrix=d?p:fa(p,3,4),t.targetInverseMatrix=hP(Ha(t.warpTargetMatrix,4),3,4),t.direction=o,t.left=_,t.top=E,t.poses=[[0,0],[m,0],[0,b],[m,b]].map(function(I){return He(I,u)}),t.nextPoses=t.poses.map(function(I){var D=Z(I,2),O=D[0],z=D[1];return Cr(t.warpTargetMatrix,[O,z,0,1],4)}),t.startValue=nn(4),t.prevMatrix=nn(4),t.absolutePoses=Fi(c),t.posIndexes=kP(o),Rc(n,e),kv(n,e,"matrix3d"),c.snapRenderInfo={request:e.isRequest,direction:o};var S=dt(n,e,X({set:function(I){t.startValue=I}},Dv(n,e))),T=Ne(n,"onWarpStart",S);return T!==!1&&(t.isWarp=!0),t.isWarp},dragControl:function(n,e){var t=e.datas,r=e.isRequest,i=e.distX,a=e.distY,o=t.targetInverseMatrix,c=t.prevMatrix,u=t.isWarp,d=t.startValue,h=t.poses,p=t.posIndexes,m=t.absolutePoses;if(!u)return!1;if(Iv(n,e,"matrix3d"),jd(n,"warpable")){var b=p.map(function(k){return m[k]});b.length>1&&b.push([(b[0][0]+b[1][0])/2,(b[0][1]+b[1][1])/2]);var _=Pv(n,r,{horizontal:b.map(function(k){return k[1]+a}),vertical:b.map(function(k){return k[0]+i})}),E=_.horizontal,S=_.vertical;a-=E.offset,i-=S.offset}var T=Za({datas:t,distX:i,distY:a},!0),I=t.nextPoses.slice();if(p.forEach(function(k){I[k]=At(I[k],T)}),!OG.every(function(k){return gH(k.map(function(P){return h[P]}),k.map(function(P){return I[P]}))}))return!1;var D=Xw(h[0],h[2],h[1],h[3],I[0],I[2],I[1],I[3]);if(!D.length)return!1;var O=Wt(o,D,4),z=RP(t,O,!0),j=Wt(Ha(c,4),z,4);t.prevMatrix=z;var C=Wt(d,z,4),A=Rv(t,"matrix3d(".concat(C.join(", "),")"),"matrix3d(".concat(z.join(", "),")"));return eE(e,A),Ne(n,"onWarp",dt(n,e,X({delta:j,matrix:C,dist:z,multiply:Wt,transform:A},Vr({transform:A},e)))),!0},dragControlEnd:function(n,e){var t=e.datas,r=e.isDrag;return t.isWarp?(t.isWarp=!1,Ne(n,"onWarpEnd",pi(n,e,{})),r):!1}},vH=Fe("area-pieces"),Vm=Fe("area-piece"),bO=Fe("avoid"),yH=Fe("view-dragging");function G1(n){var e=n.areaElement;if(e){var t=n.state,r=t.width,i=t.height;$M(e,bO),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function vR(n){return n.createElement("div",{key:"area_pieces",className:vH},n.createElement("div",{className:Vm}),n.createElement("div",{className:Vm}),n.createElement("div",{className:Vm}),n.createElement("div",{className:Vm}))}var xO={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(n,e){var t=n.props,r=t.target,i=t.dragArea,a=t.groupable,o=t.passDragArea,c=n.getState(),u=c.width,d=c.height,h=c.renderPoses,p=o?Fe("area","pass"):Fe("area");if(a)return[e.createElement("div",{key:"area",ref:As(n,"areaElement"),className:p}),vR(e)];if(!r||!i)return[];var m=Xw([0,0],[u,0],[0,d],[u,d],h[0],h[1],h[2],h[3]),b=m.length?Ov(m,!0):"none";return[e.createElement("div",{key:"area",ref:As(n,"areaElement"),className:p,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(d,"px"),transformOrigin:"0 0",transform:b}}),vR(e)]},dragStart:function(n,e){var t=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;t.isDragArea=!1;var o=n.areaElement,c=n.state,u=c.moveableClientRect,d=c.renderPoses,h=c.rootMatrix,p=c.is3d,m=u.left,b=u.top,_=zi(d),E=_.left,S=_.top,T=_.width,I=_.height,D=p?4:3,O=Z(ld(h,[r-m,i-b],D),2),z=O[0],j=O[1];z-=E,j-=S;var C=[{left:E,top:S,width:T,height:j-10},{left:E,top:S,width:z-10,height:I},{left:E,top:S+j+10,width:T,height:I-j-10},{left:E+z+10,top:S,width:T-z-10,height:I}],A=[].slice.call(o.nextElementSibling.children);C.forEach(function(k,P){A[P].style.cssText="left: ".concat(k.left,"px;top: ").concat(k.top,"px; width: ").concat(k.width,"px; height: ").concat(k.height,"px;")}),HM(o,bO),c.disableNativeEvent=!0},drag:function(n,e){var t=e.datas,r=e.inputEvent;if(this.enableNativeEvent(n),!r)return!1;t.isDragArea||(t.isDragArea=!0,G1(n))},dragEnd:function(n,e){this.enableNativeEvent(n);var t=e.inputEvent,r=e.datas;if(!t)return!1;r.isDragArea||G1(n)},dragGroupStart:function(n,e){return this.dragStart(n,e)},dragGroup:function(n,e){return this.drag(n,e)},dragGroupEnd:function(n,e){return this.dragEnd(n,e)},unset:function(n){G1(n),n.state.disableNativeEvent=!1},enableNativeEvent:function(n){var e=n.state;e.disableNativeEvent&&UM(function(){e.disableNativeEvent=!1})}},bH=Tp("origin",{props:["origin","svgOrigin"],render:function(n,e){var t=n.props,r=t.zoom,i=t.svgOrigin,a=t.groupable,o=n.getState(),c=o.beforeOrigin,u=o.rotation,d=o.svg,h=o.allMatrix,p=o.is3d,m=o.left,b=o.top,_=o.offsetWidth,E=o.offsetHeight,S;if(!a&&d&&i){var T=Z(pE(i,_,E),2),I=T[0],D=T[1],O=p?4:3,z=hn(h,[I,D],O);S=j0(u,r,He(z,[m,b]))}else S=j0(u,r,c);return[e.createElement("div",{className:Fe("control","origin"),style:S,key:"beforeOrigin"})]}});function xH(n){var e=n.scrollContainer;return[e.scrollLeft,e.scrollTop]}var _H={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(n,e){var t=n.props,r=t.scrollContainer,i=r===void 0?n.getContainer():r,a=t.scrollOptions,o=new eG,c=La(i,!0);e.datas.dragScroll=o,n.state.dragScroll=o;var u=e.isControl?"controlGesto":"targetGesto",d=e.targets;o.on("scroll",function(h){var p=h.container,m=h.direction,b=dt(n,e,{scrollContainer:p,direction:m}),_=d?"onScrollGroup":"onScroll";d&&(b.targets=d),Ne(n,_,b)}).on("move",function(h){var p=h.offsetX,m=h.offsetY,b=h.inputEvent;n[u].scrollBy(p,m,b.inputEvent,!1)}).on("scrollDrag",function(h){var p=h.next;p(n[u].getCurrentEvent())}),o.dragStart(e,X({container:c},a))},checkScroll:function(n,e){var t=e.datas.dragScroll;if(t){var r=n.props,i=r.scrollContainer,a=i===void 0?n.getContainer():i,o=r.scrollThreshold,c=o===void 0?0:o,u=r.scrollThrottleTime,d=u===void 0?0:u,h=r.getScrollPosition,p=h===void 0?xH:h,m=r.scrollOptions;return t.drag(e,X({container:a,threshold:c,throttleTime:d,getScrollPosition:function(b){return p({scrollContainer:b.container,direction:b.direction})}},m)),!0}},drag:function(n,e){return this.checkScroll(n,e)},dragEnd:function(n,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(n,e){return this.dragStart(n,X(X({},e),{isControl:!0}))},dragControl:function(n,e){return this.drag(n,e)},dragControlEnd:function(n,e){return this.dragEnd(n,e)},dragGroupStart:function(n,e){return this.dragStart(n,X(X({},e),{targets:n.props.targets}))},dragGroup:function(n,e){return this.drag(n,X(X({},e),{targets:n.props.targets}))},dragGroupEnd:function(n,e){return this.dragEnd(n,X(X({},e),{targets:n.props.targets}))},dragGroupControlStart:function(n,e){return this.dragStart(n,X(X({},e),{targets:n.props.targets,isControl:!0}))},dragGroupControl:function(n,e){return this.drag(n,X(X({},e),{targets:n.props.targets}))},dragGroupControEnd:function(n,e){return this.dragEnd(n,X(X({},e),{targets:n.props.targets}))},unset:function(n){var e,t=n.state;(e=t.dragScroll)===null||e===void 0||e.dragEnd(),t.dragScroll=null}},_O={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},wH=Tp("padding",{props:["padding"],render:function(n,e){var t=n.props;if(t.dragArea)return[];var r=yO(t.padding||{}),i=r.left,a=r.top,o=r.right,c=r.bottom,u=n.getState(),d=u.renderPoses,h=u.pos1,p=u.pos2,m=u.pos3,b=u.pos4,_=[h,p,m,b],E=[];return i>0&&E.push([0,2]),a>0&&E.push([0,1]),o>0&&E.push([1,3]),c>0&&E.push([2,3]),E.map(function(S,T){var I=Z(S,2),D=I[0],O=I[1],z=_[D],j=_[O],C=d[D],A=d[O],k=Xw([0,0],[100,0],[0,100],[100,100],z,j,C,A);if(k.length)return e.createElement("div",{key:"padding".concat(T),className:Fe("padding"),style:{transform:Ov(k,!0)}})})}}),yR=["nw","ne","se","sw"];function jm(n,e){var t=n[0]+n[1],r=t>e?e/t:1;return n[0]*=r,n[1]=e-n[1]*r,n}var EH=[1,2,5,6],SH=[0,3,4,7],Hl=[1,-1,-1,1],$l=[1,1,-1,-1];function gE(n,e,t,r,i,a,o,c){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=t),c===void 0&&(c=r);var u=[],d=!1,h=n.filter(function(m){return!m.virtual}),p=h.map(function(m){var b=m.horizontal,_=m.vertical,E=m.pos;if(_&&!d&&(d=!0,u.push("/")),d){var S=Math.max(0,_===1?E[1]-a:c-E[1]);return u.push(na(S,r,e)),S}else{var S=Math.max(0,b===1?E[0]-i:o-E[0]);return u.push(na(S,t,e)),S}});return{radiusPoses:h,styles:u,raws:p}}function wO(n){for(var e=[0,0],t=[0,0],r=n.length,i=0;i<r;++i){var a=n[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,t[0]=i+1),a.vertical&&(t[1]===0&&(t[0]=i),t[1]=i-t[0]+1))}return{horizontalRange:e,verticalRange:t}}function EO(n,e,t,r,i,a,o){var c,u,d,h;a===void 0&&(a=[0,0]),o===void 0&&(o=!1);var p=n.indexOf("/"),m=(p>-1?n.slice(0,p):n).length,b=n.slice(0,m),_=n.slice(m+1),E=b.length,S=_.length,T=S>0,I=Z(b,4),D=I[0],O=D===void 0?"0px":D,z=I[1],j=z===void 0?O:z,C=I[2],A=C===void 0?O:C,k=I[3],P=k===void 0?j:k,L=Z(_,4),B=L[0],M=B===void 0?O:B,W=L[1],Q=W===void 0?T?M:j:W,$=L[2],H=$===void 0?T?M:A:$,ee=L[3],ne=ee===void 0?T?Q:P:ee,de=[O,j,A,P].map(function(ie){return Xt(ie,e)}),U=[M,Q,H,ne].map(function(ie){return Xt(ie,t)}),Y=de.slice(),te=U.slice();c=Z(jm([Y[0],Y[1]],e),2),Y[0]=c[0],Y[1]=c[1],u=Z(jm([Y[3],Y[2]],e),2),Y[3]=u[0],Y[2]=u[1],d=Z(jm([te[0],te[3]],t),2),te[0]=d[0],te[3]=d[1],h=Z(jm([te[1],te[2]],t),2),te[1]=h[0],te[2]=h[1];var se=o?Y:Y.slice(0,Math.max(a[0],E)),pe=o?te:te.slice(0,Math.max(a[1],S));return Te(Te([],Z(se.map(function(ie,ve){var Ae=yR[ve];return{virtual:ve>=E,horizontal:Hl[ve],vertical:0,pos:[r+ie,i+($l[ve]===-1?t:0)],sub:!0,raw:de[ve],direction:Ae}})),!1),Z(pe.map(function(ie,ve){var Ae=yR[ve];return{virtual:ve>=S,horizontal:0,vertical:$l[ve],pos:[r+(Hl[ve]===-1?e:0),i+ie],sub:!0,raw:U[ve],direction:Ae}})),!1)}function TH(n,e,t,r,i){i===void 0&&(i=e.length);var a=wO(n.slice(r)),o=a.horizontalRange,c=a.verticalRange,u=t-r,d=0;if(u===0)d=i;else if(u>0&&u<o[1])d=o[1]-u;else if(u>=c[0])d=c[0]+c[1]-u;else return;n.splice(t,d),e.splice(t,d)}function AH(n,e,t,r,i,a,o,c,u,d,h){d===void 0&&(d=0),h===void 0&&(h=0);var p=wO(n.slice(t)),m=p.horizontalRange,b=p.verticalRange;if(r>-1)for(var _=Hl[r]===1?a-d:c-a,E=m[1];E<=r;++E){var S=$l[E]===1?h:u,T=0;if(r===E?T=a:E===0?T=d+_:Hl[E]===-1&&(T=c-(e[t][0]-d)),n.splice(t+E,0,{horizontal:Hl[E],vertical:0,pos:[T,S]}),e.splice(t+E,0,[T,S]),E===0)break}else if(i>-1){var I=$l[i]===1?o-h:u-o;if(m[1]===0&&b[1]===0){var D=[d+I,h];n.push({horizontal:Hl[0],vertical:0,pos:D}),e.push(D)}for(var O=b[0],E=b[1];E<=i;++E){var T=Hl[E]===1?d:c,S=0;if(i===E?S=o:E===0?S=h+I:$l[E]===1?S=e[t+O][1]:$l[E]===-1&&(S=u-(e[t+O][1]-h)),n.push({horizontal:0,vertical:$l[E],pos:[T,S]}),e.push([T,S]),E===0)break}}}function CH(n,e){e===void 0&&(e=n.map(function(i){return i.raw}));var t=n.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=n.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:t,verticals:r}}var IH=[[0,-1,"n"],[1,0,"e"]],RH=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function mE(n,e,t){var r=n.props.clipRelative,i=n.state,a=i.width,o=i.height,c=e,u=c.type,d=c.poses,h=u==="rect",p=u==="circle";if(u==="polygon")return t.map(function(j){return"".concat(na(j[0],a,r)," ").concat(na(j[1],o,r))});if(h||u==="inset"){var m=t[1][1],b=t[3][0],_=t[7][0],E=t[5][1];if(h)return[m,b,E,_].map(function(j){return"".concat(j,"px")});var S=[m,a-b,o-E,_].map(function(j,C){return na(j,C%2?a:o,r)});if(t.length>8){var T=Z(He(t[4],t[0]),2),I=T[0],D=T[1];S.push.apply(S,Te(["round"],Z(gE(d.slice(8).map(function(j,C){return X(X({},j),{pos:t[C]})}),r,I,D,_,m,b,E).styles),!1))}return S}else if(p||u==="ellipse"){var O=t[0],z=na(_e(t[1][1]-O[1]),p?Math.sqrt((a*a+o*o)/2):o,r),S=p?[z]:[na(_e(t[2][0]-O[0]),a,r),z];return S.push("at",na(O[0],a,r),na(O[1],o,r)),S}}function L0(n,e,t,r){var i=[r,(r+e)/2,e],a=[n,(n+t)/2,t];return RH.map(function(o){var c=Z(o,3),u=c[0],d=c[1],h=c[2],p=i[u+1],m=a[d+1];return{vertical:_e(d),horizontal:_e(u),direction:h,pos:[p,m]}})}function SO(n){var e=[1/0,-1/0],t=[1/0,-1/0];return n.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),t[0]=Math.min(t[0],i[1]),t[1]=Math.max(t[1],i[1])}),[_e(e[1]-e[0]),_e(t[1]-t[0])]}function bR(n,e,t,r,i){var a,o,c,u,d,h,p,m,b;if(n){var _=i;if(!_){var E=Jr(n),S=E("clipPath");_=S!=="none"?S:E("clip")}if(!((!_||_==="none"||_==="auto")&&(_=r,!_))){var T=BM(_),I=T.prefix,D=I===void 0?_:I,O=T.value,z=O===void 0?"":O,j=D==="circle",C=" ";if(D==="polygon"){var A=Jl(z||"0% 0%, 100% 0%, 100% 100%, 0% 100%");C=",";var k=A.map(function(Pt){var En=Z(Pt.split(" "),2),dn=En[0],mt=En[1];return{vertical:1,horizontal:1,pos:[Xt(dn,e),Xt(mt,t)]}}),P=pc(k.map(function(Pt){return Pt.pos}));return{type:D,clipText:_,poses:k,splitter:C,left:P.minX,right:P.maxX,top:P.minY,bottom:P.maxY}}else if(j||D==="ellipse"){var L="",B="",M=0,W=0,A=Xo(z);if(j){var Q="";a=Z(A,4),o=a[0],Q=o===void 0?"50%":o,c=a[2],L=c===void 0?"50%":c,u=a[3],B=u===void 0?"50%":u,M=Xt(Q,Math.sqrt((e*e+t*t)/2)),W=M}else{var $="",H="";d=Z(A,5),h=d[0],$=h===void 0?"50%":h,p=d[1],H=p===void 0?"50%":p,m=d[3],L=m===void 0?"50%":m,b=d[4],B=b===void 0?"50%":b,M=Xt($,e),W=Xt(H,t)}var ee=[Xt(L,e),Xt(B,t)],k=Te([{vertical:1,horizontal:1,pos:ee,direction:"nesw"}],Z(IH.slice(0,j?1:2).map(function(dn){return{vertical:_e(dn[1]),horizontal:dn[0],direction:dn[2],sub:!0,pos:[ee[0]+dn[0]*M,ee[1]+dn[1]*W]}})),!1);return{type:D,clipText:_,radiusX:M,radiusY:W,left:ee[0]-M,top:ee[1]-W,right:ee[0]+M,bottom:ee[1]+W,poses:k,splitter:C}}else if(D==="inset"){var A=Xo(z||"0 0 0 0"),ne=A.indexOf("round"),de=(ne>-1?A.slice(0,ne):A).length,U=A.slice(de+1),Y=Z(A.slice(0,de),4),te=Y[0],se=Y[1],pe=se===void 0?te:se,ie=Y[2],ve=ie===void 0?te:ie,Ae=Y[3],Ie=Ae===void 0?pe:Ae,ke=Z([te,ve].map(function(dn){return Xt(dn,t)}),2),xe=ke[0],Ee=ke[1],Xe=Z([Ie,pe].map(function(dn){return Xt(dn,e)}),2),je=Xe[0],Le=Xe[1],Pe=e-Le,nt=t-Ee,pt=EO(U,Pe-je,nt-xe,je,xe),k=Te(Te([],Z(L0(xe,Pe,nt,je)),!1),Z(pt),!1);return{type:"inset",clipText:_,poses:k,top:xe,left:je,right:Pe,bottom:nt,radius:U,splitter:C}}else if(D==="rect"){var A=Jl(z||"0px, ".concat(e,"px, ").concat(t,"px, 0px"));C=",";var Ve=Z(A.map(function(yr){var br=yp(yr).value;return br}),4),Ye=Ve[0],Le=Ve[1],Ee=Ve[2],je=Ve[3],k=L0(Ye,Le,Ee,je);return{type:"rect",clipText:_,poses:k,top:Ye,right:Le,bottom:Ee,left:je,values:A,splitter:C}}}}}function DH(n,e,t,r,i){var a=n[e],o=a.direction,c=a.sub,u=n.map(function(){return[0,0]}),d=o?o.split(""):[];if(r&&e<8){var h=d.filter(function(M){return M==="w"||M==="e"}),p=d.filter(function(M){return M==="n"||M==="s"}),m=h[0],b=p[0];u[e]=t;var _=Z(SO(n),2),E=_[0],S=_[1],T=E&&S?E/S:0;if(T&&i){var I=(e+4)%8,D=n[I].pos,O=[0,0];o.indexOf("w")>-1?O[0]=-1:o.indexOf("e")>-1&&(O[0]=1),o.indexOf("n")>-1?O[1]=-1:o.indexOf("s")>-1&&(O[1]=1);var z=gO([E,S],t,T,O,!0),j=E+z[0],C=S+z[1],A=D[1],k=D[1],P=D[0],L=D[0];O[0]===-1?P=L-j:O[0]===1?L=P+j:(P=P-j/2,L=L+j/2),O[1]===-1?A=k-C:(O[1]===1||(A=k-C/2),k=A+C);var B=L0(A,L,k,P);n.forEach(function(M,W){u[W][0]=B[W].pos[0]-M.pos[0],u[W][1]=B[W].pos[1]-M.pos[1]})}else n.forEach(function(M,W){var Q=M.direction;Q&&(Q.indexOf(m)>-1&&(u[W][0]=t[0]),Q.indexOf(b)>-1&&(u[W][1]=t[1]))}),m&&(u[1][0]=t[0]/2,u[5][0]=t[0]/2),b&&(u[3][1]=t[1]/2,u[7][1]=t[1]/2)}else o&&!c?d.forEach(function(M){var W=M==="n"||M==="s";n.forEach(function(Q,$){var H=Q.direction,ee=Q.horizontal,ne=Q.vertical;!H||H.indexOf(M)===-1||(u[$]=[W||!ee?0:t[0],!W||!ne?0:t[1]])})}):u[e]=t;return u}function kH(n,e){var t=Z(IP(n,e),2),r=t[0],i=t[1],a=e.datas,o=a.clipPath,c=a.clipIndex,u=o,d=u.type,h=u.poses,p=u.splitter,m=h.map(function(I){return I.pos});if(d==="polygon")m.splice(c,0,[r,i]);else if(d==="inset"){var b=EH.indexOf(c),_=SH.indexOf(c),E=h.length;if(AH(h,m,8,b,_,r,i,m[4][0],m[4][1],m[0][0],m[0][1]),E===h.length)return}else return;var S=mE(n,o,m),T="".concat(d,"(").concat(S.join(p),")");Ne(n,"onClip",dt(n,e,X({clipEventType:"added",clipType:d,poses:m,clipStyles:S,clipStyle:T,distX:0,distY:0},Vr({clipPath:T},e))))}function NH(n,e){var t=e.datas,r=t.clipPath,i=t.clipIndex,a=r,o=a.type,c=a.poses,u=a.splitter,d=c.map(function(b){return b.pos}),h=d.length;if(o==="polygon")c.splice(i,1),d.splice(i,1);else if(o==="inset"){if(i<8||(TH(c,d,i,8,h),h===c.length))return}else return;var p=mE(n,r,d),m="".concat(o,"(").concat(p.join(u),")");Ne(n,"onClip",dt(n,e,X({clipEventType:"removed",clipType:o,poses:d,clipStyles:p,clipStyle:m,distX:0,distY:0},Vr({clipPath:m},e))))}var MH={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(n,e){var t=n.props,r=t.customClipPath,i=t.defaultClipPath,a=t.clipArea,o=t.zoom,c=t.groupable,u=n.getState(),d=u.target,h=u.width,p=u.height,m=u.allMatrix,b=u.is3d,_=u.left,E=u.top,S=u.pos1,T=u.pos2,I=u.pos3,D=u.pos4,O=u.clipPathState,z=u.snapBoundInfos,j=u.rotation;if(!d||c)return[];var C=bR(d,h,p,i||"inset",O||r);if(!C)return[];var A=b?4:3,k=C.type,P=C.poses,L=P.map(function(Le){var Pe=hn(m,Le.pos,A);return[Pe[0]-_,Pe[1]-E]}),B=[],M=[],W=k==="rect",Q=k==="inset",$=k==="polygon";if(W||Q||$){var H=Q?L.slice(0,8):L;M=H.map(function(Le,Pe){var nt=Pe===0?H[H.length-1]:H[Pe-1],pt=Rn(nt,Le),Ve=sO(nt,Le);return e.createElement("div",{key:"clipLine".concat(Pe),className:Fe("line","clip-line","snap-control"),"data-clip-index":Pe,style:{width:"".concat(Ve,"px"),transform:"translate(".concat(nt[0],"px, ").concat(nt[1],"px) rotate(").concat(pt,"rad) scaleY(").concat(o,")")}})})}if(B=L.map(function(Le,Pe){return e.createElement("div",{key:"clipControl".concat(Pe),className:Fe("control","clip-control","snap-control"),"data-clip-index":Pe,style:{transform:"translate(".concat(Le[0],"px, ").concat(Le[1],"px) rotate(").concat(j,"rad) scale(").concat(o,")")}})}),Q&&B.push.apply(B,Te([],Z(L.slice(8).map(function(Le,Pe){return e.createElement("div",{key:"clipRadiusControl".concat(Pe),className:Fe("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Pe,style:{transform:"translate(".concat(Le[0],"px, ").concat(Le[1],"px) rotate(").concat(j,"rad) scale(").concat(o,")")}})})),!1)),k==="circle"||k==="ellipse"){var ee=C.left,ne=C.top,de=C.radiusX,U=C.radiusY,Y=Z(He(hn(m,[ee,ne],A),hn(m,[0,0],A)),2),te=Y[0],se=Y[1],pe="none";if(!a){for(var ie=Math.max(10,de/5,U/5),ve=[],Ae=0;Ae<=ie;++Ae){var Ie=Math.PI*2/ie*Ae;ve.push([de+(de-o)*Math.cos(Ie),U+(U-o)*Math.sin(Ie)])}ve.push([de,-2]),ve.push([-2,-2]),ve.push([-2,U*2+2]),ve.push([de*2+2,U*2+2]),ve.push([de*2+2,-2]),ve.push([de,-2]),pe="polygon(".concat(ve.map(function(Le){return"".concat(Le[0],"px ").concat(Le[1],"px")}).join(", "),")")}B.push(e.createElement("div",{key:"clipEllipse",className:Fe("clip-ellipse","snap-control"),style:{width:"".concat(de*2,"px"),height:"".concat(U*2,"px"),clipPath:pe,transform:"translate(".concat(-_+te,"px, ").concat(-E+se,"px) ").concat(Ov(m))}}))}if(a){var ke=zi(Te([S,T,I,D],Z(L),!1)),xe=ke.width,Ee=ke.height,Xe=ke.left,je=ke.top;if($||W||Q){var ve=Q?L.slice(0,8):L;B.push(e.createElement("div",{key:"clipArea",className:Fe("clip-area","snap-control"),style:{width:"".concat(xe,"px"),height:"".concat(Ee,"px"),transform:"translate(".concat(Xe,"px, ").concat(je,"px)"),clipPath:"polygon(".concat(ve.map(function(Pe){return"".concat(Pe[0]-Xe,"px ").concat(Pe[1]-je,"px")}).join(", "),")")}}))}}return z&&["vertical","horizontal"].forEach(function(Le){var Pe=z[Le],nt=Le==="horizontal";Pe.isSnap&&M.push.apply(M,Te([],Z(Pe.snap.posInfos.map(function(pt,Ve){var Ye=pt.pos,Pt=He(hn(m,nt?[0,Ye]:[Ye,0],A),[_,E]),En=He(hn(m,nt?[h,Ye]:[Ye,p],A),[_,E]);return qh(e,"",Pt,En,o,"clip".concat(Le,"snap").concat(Ve),"guideline")})),!1)),Pe.isBound&&M.push.apply(M,Te([],Z(Pe.bounds.map(function(pt,Ve){var Ye=pt.pos,Pt=He(hn(m,nt?[0,Ye]:[Ye,0],A),[_,E]),En=He(hn(m,nt?[h,Ye]:[Ye,p],A),[_,E]);return qh(e,"",Pt,En,o,"clip".concat(Le,"bounds").concat(Ve),"guideline","bounds","bold")})),!1))}),Te(Te([],Z(B),!1),Z(M),!1)},dragControlCondition:function(n,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(n,e){var t=n.props,r=t.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(n,e)},drag:function(n,e){return this.dragControl(n,X(X({},e),{isDragTarget:!0}))},dragEnd:function(n,e){return this.dragControlEnd(n,e)},dragControlStart:function(n,e){var t=n.state,r=n.props,i=r.defaultClipPath,a=r.customClipPath,o=t.target,c=t.width,u=t.height,d=e.inputEvent?e.inputEvent.target:null,h=d&&d.getAttribute("class")||"",p=e.datas,m=bR(o,c,u,i||"inset",a);if(!m)return!1;var b=m.clipText,_=m.type,E=m.poses,S=Ne(n,"onClipStart",dt(n,e,{clipType:_,clipStyle:b,poses:E.map(function(T){return T.pos})}));return S===!1?(p.isClipStart=!1,!1):(p.isControl=h&&h.indexOf("clip-control")>-1,p.isLine=h.indexOf("clip-line")>-1,p.isArea=h.indexOf("clip-area")>-1||h.indexOf("clip-ellipse")>-1,p.clipIndex=d?parseInt(d.getAttribute("data-clip-index"),10):-1,p.clipPath=m,p.isClipStart=!0,t.clipPathState=b,Rc(n,e),!0)},dragControl:function(n,e){var t,r,i,a=e.datas,o=e.originalDatas,c=e.isDragTarget;if(!a.isClipStart)return!1;var u=a,d=u.isControl,h=u.isLine,p=u.isArea,m=u.clipIndex,b=u.clipPath;if(!b)return!1;var _=gc(n.props,"clippable"),E=_.keepRatio,S=0,T=0,I=o.draggable,D=Za(e);c&&I?(t=Z(I.prevBeforeDist,2),S=t[0],T=t[1]):(r=Z(D,2),S=r[0],T=r[1]);var O=[S,T],z=n.state,j=z.width,C=z.height,A=!p&&!d&&!h,k=b.type,P=b.poses,L=b.splitter,B=P.map(function(Ze){return Ze.pos});A&&(S=-S,T=-T);var M=!d||P[m].direction==="nesw",W=k==="inset"||k==="rect",Q=P.map(function(){return[0,0]});if(d&&!M){var $=P[m],H=$.horizontal,ee=$.vertical,ne=[S*_e(H),T*_e(ee)];Q=DH(P,m,ne,W,E)}else M&&(Q=B.map(function(){return[S,T]}));var de=B.map(function(Ze,Ot){return At(Ze,Q[Ot])}),U=Te([],Z(de),!1);z.snapBoundInfos=null;var Y=b.type==="circle",te=b.type==="ellipse";if(Y||te){var se=zi(de),pe=_e(se.bottom-se.top),ie=_e(te?se.right-se.left:pe),ve=de[0][1]+pe,Ae=de[0][0]-ie,Ie=de[0][0]+ie;Y&&(U.push([Ie,se.bottom]),Q.push([1,0])),U.push([se.left,ve]),Q.push([0,1]),U.push([Ae,se.bottom]),Q.push([1,0])}var ke=eO((_.clipHorizontalGuidelines||[]).map(function(Ze){return Xt("".concat(Ze),C)}),(_.clipVerticalGuidelines||[]).map(function(Ze){return Xt("".concat(Ze),j)}),j,C),xe=[],Ee=[];if(Y||te)xe=[U[4][0],U[2][0]],Ee=[U[1][1],U[3][1]];else if(W){var Xe=[U[0],U[2],U[4],U[6]],je=[Q[0],Q[2],Q[4],Q[6]];xe=Xe.filter(function(Ze,Ot){return je[Ot][0]}).map(function(Ze){return Ze[0]}),Ee=Xe.filter(function(Ze,Ot){return je[Ot][1]}).map(function(Ze){return Ze[1]})}else xe=U.filter(function(Ze,Ot){return Q[Ot][0]}).map(function(Ze){return Ze[0]}),Ee=U.filter(function(Ze,Ot){return Q[Ot][1]}).map(function(Ze){return Ze[1]});var Le=[0,0],Pe=rR(ke,_.clipTargetBounds&&{left:0,top:0,right:j,bottom:C},xe,Ee,5,5),nt=Pe.horizontal,pt=Pe.vertical,Ve=nt.offset,Ye=pt.offset;if(nt.isBound&&(Le[1]+=Ve),pt.isBound&&(Le[0]+=Ye),(te||Y)&&Q[0][0]===0&&Q[0][1]===0){var se=zi(de),Pt=se.bottom-se.top,En=te?se.right-se.left:Pt,dn=pt.isBound?_e(Ye):pt.snapIndex===0?-Ye:Ye,mt=nt.isBound?_e(Ve):nt.snapIndex===0?-Ve:Ve;En-=dn,Pt-=mt,Y&&(Pt=$P(pt,nt)>0?Pt:En,En=Pt);var Vt=U[0];U[1][1]=Vt[1]-Pt,U[2][0]=Vt[0]+En,U[3][1]=Vt[1]+Pt,U[4][0]=Vt[0]-En}else if(W&&E&&d){var yr=Z(SO(P),2),br=yr[0],ti=yr[1],qs=br&&ti?br/ti:0,Be=P[m],Ke=Be.direction||"",Gi=U[1][1],ve=U[5][1],Ae=U[7][0],Ie=U[3][0];_e(Ve)<=_e(Ye)?Ve=Mr(Ve)*_e(Ye)/qs:Ye=Mr(Ye)*_e(Ve)*qs,Ke.indexOf("w")>-1?Ae-=Ye:Ke.indexOf("e")>-1?Ie-=Ye:(Ae+=Ye/2,Ie-=Ye/2),Ke.indexOf("n")>-1?Gi-=Ve:Ke.indexOf("s")>-1?ve-=Ve:(Gi+=Ve/2,ve-=Ve/2);var qt=L0(Gi,Ie,ve,Ae);U.forEach(function(jt,Dn){var vn;vn=Z(qt[Dn].pos,2),jt[0]=vn[0],jt[1]=vn[1]})}else U.forEach(function(Ze,Ot){var Tt=Q[Ot];Tt[0]&&(Ze[0]-=Ye),Tt[1]&&(Ze[1]-=Ve)});var Jt=mE(n,b,de),Sn="".concat(k,"(").concat(Jt.join(L),")");if(z.clipPathState=Sn,Y||te)xe=[U[4][0],U[2][0]],Ee=[U[1][1],U[3][1]];else if(W){var Xe=[U[0],U[2],U[4],U[6]];xe=Xe.map(function(Ot){return Ot[0]}),Ee=Xe.map(function(Ot){return Ot[1]})}else xe=U.map(function(Ze){return Ze[0]}),Ee=U.map(function(Ze){return Ze[1]});if(z.snapBoundInfos=rR(ke,_.clipTargetBounds&&{left:0,top:0,right:j,bottom:C},xe,Ee,1,1),I){var Dt=z.is3d,Ct=z.allMatrix,or=Dt?4:3,fn=Le;c&&(fn=[O[0]+Le[0]-D[0],O[1]+Le[1]-D[1]]),I.deltaOffset=Wt(Ct,[fn[0],fn[1],0,0],or)}return Ne(n,"onClip",dt(n,e,X({clipEventType:"changed",clipType:k,poses:de,clipStyle:Sn,clipStyles:Jt,distX:S,distY:T},Vr((i={},i[k==="rect"?"clip":"clipPath"]=Sn,i),e)))),!0},dragControlEnd:function(n,e){this.unset(n);var t=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,o=r.isClipStart,c=r.isControl;return o?(Ne(n,"onClipEnd",pi(n,e,{})),i&&(c?NH(n,e):a&&kH(n,e)),i||t):!1},unset:function(n){n.state.clipPathState="",n.state.snapBoundInfos=null}},PH={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(n,e){return e.isRequest?e.requestAble==="originDraggable":Wn(e.inputEvent.target,Fe("origin"))},dragControlStart:function(n,e){var t=e.datas;Rc(n,e);var r=dt(n,e,{dragStart:Nr.dragStart(n,new ad().dragStart([0,0],e))}),i=Ne(n,"onDragOriginStart",r);return t.startOrigin=n.state.transformOrigin,t.startTargetOrigin=n.state.targetOrigin,t.prevOrigin=[0,0],t.isDragOrigin=!0,i===!1?(t.isDragOrigin=!1,!1):r},dragControl:function(n,e){var t=e.datas,r=e.isPinch,i=e.isRequest;if(!t.isDragOrigin)return!1;var a=Z(Za(e),2),o=a[0],c=a[1],u=n.state,d=u.width,h=u.height,p=u.offsetMatrix,m=u.targetMatrix,b=u.is3d,_=n.props.originRelative,E=_===void 0?!0:_,S=b?4:3,T=[o,c];if(i){var I=e.distOrigin;(I[0]||I[1])&&(T=I)}var D=At(t.startOrigin,T),O=At(t.startTargetOrigin,T),z=He(T,t.prevOrigin),j=Cp(p,m,D,S),C=n.getRect(),A=zi(Dc(j,d,h,S)),k=[C.left-A.left,C.top-A.top];t.prevOrigin=T;var P=[na(O[0],d,E),na(O[1],h,E)].join(" "),L=Nr.drag(n,Ap(e,n.state,k,!!r)),B=dt(n,e,X(X({width:d,height:h,origin:D,dist:T,delta:z,transformOrigin:P,drag:L},Vr({transformOrigin:P,transform:L.transform},e)),{afterTransform:L.transform}));return Ne(n,"onDragOrigin",B),B},dragControlEnd:function(n,e){var t=e.datas;return t.isDragOrigin?(Ne(n,"onDragOriginEnd",pi(n,e,{})),!0):!1},dragGroupControlCondition:function(n,e){return this.dragControlCondition(n,e)},dragGroupControlStart:function(n,e){var t=this.dragControlStart(n,e);return!!t},dragGroupControl:function(n,e){var t=this.dragControl(n,e);return t?(n.transformOrigin=t.transformOrigin,!0):!1},request:function(n){var e={},t=n.getRect(),r=0,i=0,a=t.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(c){return"deltaOrigin"in c?(o[0]+=c.deltaOrigin[0],o[1]+=c.deltaOrigin[1]):"origin"in c?(o[0]=c.origin[0]-a[0],o[1]=c.origin[1]-a[1]):("x"in c?r=c.x-t.left:"deltaX"in c&&(r+=c.deltaX),"y"in c?i=c.y-t.top:"deltaY"in c&&(i+=c.deltaY)),{datas:e,distX:r,distY:i,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function OH(n,e,t,r){var i=n.filter(function(u){var d=u.virtual,h=u.horizontal;return h&&!d}).length,a=n.filter(function(u){var d=u.virtual,h=u.vertical;return h&&!d}).length,o=-1;if(e===0&&(i===0?o=0:i===1&&(o=1)),e===2&&(i<=2?o=2:i<=3&&(o=3)),e===3&&(a===0?o=4:a<4&&(o=7)),e===1&&(a<=1?o=5:a<=2&&(o=6)),!(o===-1||!n[o].virtual)){var c=n[o];VH(n,o),o<4?c.pos[0]=t:c.pos[1]=r}}function VH(n,e){e<4?n.slice(0,e+1).forEach(function(t){t.virtual=!1}):(n[0].virtual&&(n[0].virtual=!1),n.slice(4,e+1).forEach(function(t){t.virtual=!1}))}function jH(n,e){e<4?n.slice(e,4).forEach(function(t){t.virtual=!0}):n.slice(e).forEach(function(t){t.virtual=!0})}function xR(n,e,t,r,i){r===void 0&&(r=[0,0]);var a=[];return!n||n==="0px"?a=[]:a=Xo(n),EO(a,e,t,0,0,r,i)}function _R(n,e,t,r,i){var a=n.state,o=a.width,c=a.height,u=gE(i,n.props.roundRelative,o,c),d=u.raws,h=u.styles,p=u.radiusPoses,m=CH(p,d),b=m.horizontals,_=m.verticals,E=h.join(" ");a.borderRadiusState=E;var S=dt(n,e,X({horizontals:b,verticals:_,borderRadius:E,width:o,height:c,delta:r,dist:t},Vr({borderRadius:E},e)));return Ne(n,"onRound",S),S}function wR(n){var e,t,r=n.getState().style,i=r.borderRadius||"";if(!i&&n.props.groupable){var a=n.moveables[0],o=n.getTargets()[0];o&&(a?.props.target===o?(i=(t=(e=n.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&t!==void 0?t:"",r.borderRadius=i):(i=uE(o).borderRadius,r.borderRadius=i))}return i}var zH={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(n){var e=n.props.roundClickable;return e===!0||e==="line"?Fe("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(n,e){var t=n.getState(),r=t.target,i=t.width,a=t.height,o=t.allMatrix,c=t.is3d,u=t.left,d=t.top,h=t.borderRadiusState,p=n.props,m=p.minRoundControls,b=m===void 0?[0,0]:m,_=p.maxRoundControls,E=_===void 0?[4,4]:_,S=p.zoom,T=p.roundPadding,I=T===void 0?0:T,D=p.isDisplayShadowRoundControls,O=p.groupable;if(!r)return null;var z=h||wR(n),j=c?4:3,C=xR(z,i,a,b,!0);if(!C)return null;var A=0,k=0,P=O?[0,0]:[u,d];return C.map(function(L,B){var M=L.horizontal,W=L.vertical,Q=L.direction||"",$=Te([],Z(L.pos),!1);k+=Math.abs(M),A+=Math.abs(W),M&&Q.indexOf("n")>-1&&($[1]-=I),W&&Q.indexOf("w")>-1&&($[0]-=I),M&&Q.indexOf("s")>-1&&($[1]+=I),W&&Q.indexOf("e")>-1&&($[0]+=I);var H=He(hn(o,$,j),P),ee=D&&D!=="horizontal",ne=L.vertical?A<=E[1]&&(ee||!L.virtual):k<=E[0]&&(D||!L.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(B),className:Fe("control","border-radius",L.vertical?"vertical":"",L.virtual?"virtual":""),"data-radius-index":B,style:{display:ne?"block":"none",transform:"translate(".concat(H[0],"px, ").concat(H[1],"px) scale(").concat(S,")")}})})},dragControlCondition:function(n,e){if(!e.inputEvent||e.isRequest)return!1;var t=e.inputEvent.target.getAttribute("class")||"";return t.indexOf("border-radius")>-1||t.indexOf("moveable-line")>-1&&t.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(n,e){return this.dragControlCondition(n,e)},dragControlStart:function(n,e){var t=e.inputEvent,r=e.datas,i=t.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,c=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=o?parseInt(i.getAttribute("data-radius-index"),10):-1,d=-1;if(c){var h=i.getAttribute("data-line-key")||"";h&&(d=parseInt(h.replace(/render-line-/g,""),10),isNaN(d)&&(d=-1))}if(!o&&!c)return!1;var p=dt(n,e,{}),m=Ne(n,"onRoundStart",p);if(m===!1)return!1;r.lineIndex=d,r.controlIndex=u,r.isControl=o,r.isLine=c,Rc(n,e);var b=n.props,_=b.roundRelative,E=b.minRoundControls,S=E===void 0?[0,0]:E,T=n.state,I=T.width,D=T.height;r.isRound=!0,r.prevDist=[0,0];var O=wR(n),z=xR(O||"",I,D,S,!0)||[];return r.controlPoses=z,T.borderRadiusState=gE(z,_,I,D).styles.join(" "),p},dragControl:function(n,e){var t=e.datas,r=t.controlPoses;if(!t.isRound||!t.isControl||!r.length)return!1;var i=t.controlIndex,a=Z(Za(e),2),o=a[0],c=a[1],u=[o,c],d=He(u,t.prevDist),h=n.props.maxRoundControls,p=h===void 0?[4,4]:h,m=n.state,b=m.width,_=m.height,E=r[i],S=E.vertical,T=E.horizontal,I=r.map(function(O){var z=O.horizontal,j=O.vertical,C=[z*T*u[0],j*S*u[1]];if(z){if(p[0]===1)return C;if(p[0]<4&&z!==T)return C}else{if(p[1]===0)return C[1]=j*T*u[0]/b*_,C;if(S){if(p[1]===1)return C;if(p[1]<4&&j!==S)return C}}return[0,0]});I[i]=u;var D=r.map(function(O,z){return X(X({},O),{pos:At(O.pos,I[z])})});return i<4?D.slice(0,i+1).forEach(function(O){O.virtual=!1}):D.slice(4,i+1).forEach(function(O){O.virtual=!1}),t.prevDist=[o,c],_R(n,e,u,d,D)},dragControlEnd:function(n,e){var t=n.state;t.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,o=r.controlIndex,c=r.isLine,u=r.lineIndex,d=r.controlPoses,h=d.filter(function(T){var I=T.virtual;return I}).length,p=n.props.roundClickable,m=p===void 0?!0:p;if(i&&m){if(a&&(m===!0||m==="control"))jH(d,o);else if(c&&(m===!0||m==="line")){var b=Z(IP(n,e),2),_=b[0],E=b[1];OH(d,u,_,E)}h!==d.filter(function(T){var I=T.virtual;return I}).length&&_R(n,e,[0,0],[0,0],d)}var S=pi(n,e,{});return Ne(n,"onRoundEnd",S),t.borderRadiusState="",S},dragGroupControlStart:function(n,e){var t=this.dragControlStart(n,e);if(!t)return!1;var r=n.moveables,i=n.props.targets,a=ca(n,"roundable",e),o=X({targets:n.props.targets,events:a.map(function(c,u){return X(X({},c),{target:i[u],moveable:r[u],currentTarget:r[u]})})},t);return Ne(n,"onRoundGroupStart",o),t},dragGroupControl:function(n,e){var t=this.dragControl(n,e);if(!t)return!1;var r=n.moveables,i=n.props.targets,a=ca(n,"roundable",e),o=X({targets:n.props.targets,events:a.map(function(c,u){return X(X(X({},c),{target:i[u],moveable:r[u],currentTarget:r[u]}),Vr({borderRadius:t.borderRadius},c))})},t);return Ne(n,"onRoundGroup",o),o},dragGroupControlEnd:function(n,e){var t=n.moveables,r=n.props.targets,i=ca(n,"roundable",e);Vv(n,"onRound",function(c){var u=X({targets:n.props.targets,events:i.map(function(d,h){return X(X(X({},d),{target:r[h],moveable:t[h],currentTarget:t[h]}),Vr({borderRadius:c.borderRadius},d))})},c);Ne(n,"onRoundGroup",u)});var a=this.dragControlEnd(n,e);if(!a)return!1;var o=X({targets:n.props.targets,events:i.map(function(c,u){var d;return X(X({},c),{target:r[u],moveable:t[u],currentTarget:t[u],lastEvent:(d=c.datas)===null||d===void 0?void 0:d.lastEvent})})},a);return Ne(n,"onRoundGroupEnd",o),o},unset:function(n){n.state.borderRadiusState=""}};function LH(n,e){var t=e?4:3,r=nn(t),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return n===i||n==="matrix(1,0,0,1,0,0)"}var TO={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(n,e){var t=n.state,r=t.is3d,i=t.targetMatrix,a=t.inlineTransform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(gP(i,!0),")"),c=!a||a==="none"?o:a;e.datas.startTransforms=LH(c,r)?[]:Xo(c)},resetStyle:function(n){var e=n.datas;e.nextStyle={},e.nextTransforms=n.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(n,e){return dt(n,e,{setTransform:function(t){e.datas.startTransforms=Gn(t)?t:Xo(t)},isPinch:!!e.isPinch})},fillDragParams:function(n,e){return dt(n,e,{isPinch:!!e.isPinch})},dragStart:function(n,e){this.setTransform(n,e),this.resetStyle(e),Ne(n,"onBeforeRenderStart",this.fillDragStartParams(n,e))},drag:function(n,e){e.datas.startTransforms||this.setTransform(n,e),this.resetStyle(e),Ne(n,"onBeforeRender",dt(n,e,{isPinch:!!e.isPinch}))},dragEnd:function(n,e){e.datas.startTransforms||(this.setTransform(n,e),this.resetStyle(e)),Ne(n,"onBeforeRenderEnd",dt(n,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(n,e){var t=this;this.dragStart(n,e);var r=ca(n,"beforeRenderable",e),i=n.moveables,a=r.map(function(o,c){var u=i[c];return t.setTransform(u,o),t.resetStyle(o),t.fillDragStartParams(u,o)});Ne(n,"onBeforeRenderGroupStart",dt(n,e,{isPinch:!!e.isPinch,targets:n.props.targets,setTransform:function(){},events:a}))},dragGroup:function(n,e){var t=this;this.drag(n,e);var r=ca(n,"beforeRenderable",e),i=n.moveables,a=r.map(function(o,c){var u=i[c];return t.resetStyle(o),t.fillDragParams(u,o)});Ne(n,"onBeforeRenderGroup",dt(n,e,{isPinch:!!e.isPinch,targets:n.props.targets,events:a}))},dragGroupEnd:function(n,e){this.dragEnd(n,e),Ne(n,"onBeforeRenderGroupEnd",dt(n,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:n.props.targets}))},dragControlStart:function(n,e){return this.dragStart(n,e)},dragControl:function(n,e){return this.drag(n,e)},dragControlEnd:function(n,e){return this.dragEnd(n,e)},dragGroupControlStart:function(n,e){return this.dragGroupStart(n,e)},dragGroupControl:function(n,e){return this.dragGroup(n,e)},dragGroupControlEnd:function(n,e){return this.dragGroupEnd(n,e)}},AO={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(n,e){Ne(n,"onRenderStart",dt(n,e,{isPinch:!!e.isPinch}))},drag:function(n,e){Ne(n,"onRender",this.fillDragParams(n,e))},dragAfter:function(n,e){return this.drag(n,e)},dragEnd:function(n,e){Ne(n,"onRenderEnd",this.fillDragEndParams(n,e))},dragGroupStart:function(n,e){Ne(n,"onRenderGroupStart",dt(n,e,{isPinch:!!e.isPinch,targets:n.props.targets}))},dragGroup:function(n,e){var t=this,r=ca(n,"beforeRenderable",e),i=n.moveables,a=r.map(function(o,c){var u=i[c];return t.fillDragParams(u,o)});Ne(n,"onRenderGroup",dt(n,e,X(X({isPinch:!!e.isPinch,targets:n.props.targets,transform:km(e),transformObject:{}},Vr(Nm(e))),{events:a})))},dragGroupEnd:function(n,e){var t=this,r=ca(n,"beforeRenderable",e),i=n.moveables,a=r.map(function(o,c){var u=i[c];return t.fillDragEndParams(u,o)});Ne(n,"onRenderGroupEnd",dt(n,e,X({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:n.props.targets,events:a,transformObject:{},transform:km(e)},Vr(Nm(e)))))},dragControlStart:function(n,e){return this.dragStart(n,e)},dragControl:function(n,e){return this.drag(n,e)},dragControlAfter:function(n,e){return this.dragAfter(n,e)},dragControlEnd:function(n,e){return this.dragEnd(n,e)},dragGroupControlStart:function(n,e){return this.dragGroupStart(n,e)},dragGroupControl:function(n,e){return this.dragGroup(n,e)},dragGroupControlEnd:function(n,e){return this.dragGroupEnd(n,e)},fillDragParams:function(n,e){var t={};return id(N0(e)||[]).forEach(function(r){t[r.name]=r.functionValue}),dt(n,e,X({isPinch:!!e.isPinch,transformObject:t,transform:km(e)},Vr(Nm(e))))},fillDragEndParams:function(n,e){var t={};return id(N0(e)||[]).forEach(function(r){t[r.name]=r.functionValue}),dt(n,e,X({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:t,transform:km(e)},Vr(Nm(e))))}};function _h(n,e,t,r,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var c=i==="Start",u=i==="End",d=i==="After",h=n.state.target,p=a.isRequest,m=r.indexOf("Control")>-1;if(!h||c&&m&&!p&&n.areaElement===a.inputEvent.target)return!1;var b=Te([],Z(e),!1);if(p){var _=a.requestAble;b.some(function(B){return B.name===_})||b.push.apply(b,Te([],Z(n.props.ables.filter(function(B){return B.name===_})),!1))}if(!b.length||b.every(function(B){return B.dragRelation}))return!1;var E=a.inputEvent,S;u&&E&&(S=document.elementFromPoint(a.clientX,a.clientY)||E.target);var T=!1,I=function(){var B;T=!0,(B=a.stop)===null||B===void 0||B.call(a)},D=c&&(!n.targetGesto||!n.controlGesto||!n.targetGesto.isFlag()||!n.controlGesto.isFlag());D&&n.updateRect(i,!0,!1);var O=a.datas,z=m?"controlGesto":"targetGesto",j=n[z],C=function(B,M,W){if(!(M in B)||j!==n[z])return!1;var Q=B.name,$=O[Q]||(O[Q]={});if(c&&($.isEventStart=!W||!B[W]||B[W](n,a)),!$.isEventStart)return!1;var H=B[M](n,X(X({},a),{stop:I,datas:$,originalDatas:O,inputTarget:S}));return n._emitter.off(),c&&H===!1&&($.isEventStart=!1),H};D&&b.forEach(function(B){B.unset&&B.unset(n)}),C(TO,"drag".concat(r).concat(i));var A=0,k=0;t.forEach(function(B){if(T)return!1;var M="".concat(B).concat(r).concat(i),W="".concat(B).concat(r,"Condition");i===""&&!p&&lH(n.state,a);var Q=b.filter(function(ee){return ee[M]});Q=Q.filter(function(ee,ne){return ee.name&&Q.indexOf(ee)===ne});var $=Q.filter(function(ee){return C(ee,M,W)}),H=$.length;T&&++A,H&&++k,!T&&c&&Q.length&&!H&&(A+=Q.filter(function(ee){var ne=ee.name,de=O[ne];return de.isEventStart?ee.dragRelation!=="strong":!1}).length?1:0)}),(!d||k)&&C(AO,"drag".concat(r).concat(i));var P=j!==n[z]||A===t.length;if((u||T||P)&&(n.state.gestos={},n.moveables&&n.moveables.forEach(function(B){B.state.gestos={}}),b.forEach(function(B){B.unset&&B.unset(n)})),c&&!P&&!p&&k&&n.props.preventDefault&&a?.preventDefault(),n.isUnmounted||P)return!1;if(!c&&k&&!o||u){var L=n.props.flushSync||rO;L(function(){n.updateRect(u?i:"",!0,!1),n.forceUpdate()})}return!c&&!u&&!d&&k&&!o&&_h(n,e,t,r,i+"After",a),!0}function vE(n,e){return function(t,r){var i;r===void 0&&(r=t.inputEvent.target);var a=r,o=n.areaElement,c=n._dragTarget;return!c||!e&&(!((i=n.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===c||c.contains(a)||a===o||!n.isMoveableElement(a)&&!n.controlBox.contains(a)||Wn(a,"moveable-area")||Wn(a,"moveable-padding")||Wn(a,"moveable-edgeDraggable")}}function CO(n,e,t){var r=n.controlBox,i=[],a=n.props,o=a.dragArea,c=n.state.target,u=a.dragTarget;i.push(r),(!o||u)&&i.push(e),!o&&u&&c&&e!==c&&a.dragTargetSelf&&i.push(c);var d=vE(n);return RO(n,i,"targetAbles",t,{dragStart:d,pinchStart:d})}function IO(n,e){var t=n.controlBox,r=[];r.push(t);var i=vE(n,!0),a=function(o,c){if(c===void 0&&(c=o.inputEvent.target),c===t)return!0;var u=i(o,c);return!u};return RO(n,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function RO(n,e,t,r,i){i===void 0&&(i={});var a=t==="targetAbles",o=n.props,c=o.pinchOutside,u=o.pinchThreshold,d=o.preventClickEventOnDrag,h=o.preventClickDefault,p=o.checkInput,m=o.dragFocusedInput,b=o.preventDefault,_=b===void 0?!0:b,E=o.preventRightClick,S=E===void 0?!0:E,T=o.preventWheelClick,I=T===void 0?!0:T,D=o.dragContainer,O=La(D,!0),z={preventDefault:_,preventRightClick:S,preventWheelClick:I,container:O||Bo(n.getControlBoxElement()),pinchThreshold:u,pinchOutside:c,preventClickEventOnDrag:a?d:!1,preventClickEventOnDragStart:a?h:!1,preventClickEventByCondition:a?null:function(A){return n.controlBox.contains(A.target)},checkInput:a?p:!1,dragFocusedInput:m},j=new fG(e,z),C=r==="Control";return["drag","pinch"].forEach(function(A){["Start","","End"].forEach(function(k){j.on("".concat(A).concat(k),function(P){var L,B=P.eventType,M=A==="drag"&&P.isPinch;if(i[B]&&!i[B](P)){P.stop();return}if(!M){var W=A==="drag"?[A]:["drag",A],Q=Te([],Z(n[t]),!1),$=_h(n,Q,W,r,k,P);$?(n.props.stopPropagation||k==="Start"&&C)&&((L=P?.inputEvent)===null||L===void 0||L.stopPropagation()):P.stop()}})})}),j}var BH=(function(){function n(e,t,r){var i=this;this.target=e,this.moveable=t,this.eventName=r,this.ables=[],this._onEvent=function(a){var o=i.eventName,c=i.moveable;c.state.disableNativeEvent||i.ables.forEach(function(u){u[o](c,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return n.prototype.setAbles=function(e){this.ables=e},n.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},n})();function UH(n,e,t,r){var i;t===void 0&&(t=e);var a=PP(n,e),o=a.matrixes,c=a.is3d,u=a.targetMatrix,d=a.transformOrigin,h=a.targetOrigin,p=a.offsetContainer,m=a.hasFixed,b=a.zoom,_=tq(p,t),E=_.matrixes,S=_.is3d,T=_.offsetContainer,I=_.zoom,D=r,O=4,z=n.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in n,j=u,C=nn(O),A=nn(O),k=nn(O),P=nn(O),L=o.length,B=E.map(function(ne){return X(X({},ne),{matrix:ne.matrix?Te([],Z(ne.matrix),!1):void 0})}).reverse();o.reverse(),!c&&D&&(j=fa(j,3,4),a_(o)),!S&&D&&a_(B),B.forEach(function(ne){A=Wt(A,ne.matrix,O)});var M=t||al(n),W=((i=B[0])===null||i===void 0?void 0:i.target)||Hh(M,M,!0).offsetParent,Q=B.slice(1).reduce(function(ne,de){return Wt(ne,de.matrix,O)},nn(O));o.forEach(function(ne,de){if(L-2===de&&(k=C.slice()),L-1===de&&(P=C.slice()),!ne.matrix){var U=o[de+1],Y=iH(ne,U,W,O,Wt(Q,C,O));ne.matrix=hc(Y,O)}C=Wt(C,ne.matrix,O)});var $=!z&&c;j||(j=nn($?4:3));var H=Ov(z&&j.length===16?fa(j,4,3):j,$),ee=A;return A=hP(A,O,O),{hasZoom:b!==1||I!==1,hasFixed:m,matrixes:o,rootMatrix:A,originalRootMatrix:ee,beforeMatrix:k,offsetMatrix:P,allMatrix:C,targetMatrix:j,targetTransform:H,inlineTransform:n.style.transform,transformOrigin:d,targetOrigin:h,is3d:D,offsetContainer:p,offsetRootContainer:T}}function FH(n,e,t,r){t===void 0&&(t=e);var i=0,a=0,o=0,c={},u=oO(n);if(n&&(i=u.offsetWidth,a=u.offsetHeight),n){var d=UH(n,e,t,r),h=Wu(d.allMatrix,d.transformOrigin,i,a);c=X(X({},d),h);var p=Wu(d.allMatrix,[50,50],100,100);o=lO([p.pos1,p.pos2],p.direction)}var m=4;return X(X(X({hasZoom:!1,width:i,height:a,rotation:o},u),{originalRootMatrix:nn(m),rootMatrix:nn(m),beforeMatrix:nn(m),offsetMatrix:nn(m),allMatrix:nn(m),targetMatrix:nn(m),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),c)}function c_(n,e,t,r,i,a){a===void 0&&(a=[]);var o=1,c=[0,0],u=Pm(),d=Pm(),h=Pm(),p=Pm(),m=[0,0],b={},_=FH(e,t,i,!0);if(e){var E=Jr(e);a.forEach(function(B){b[B]=E(B)});var S=_.is3d?4:3,T=Wu(_.offsetMatrix,At(_.transformOrigin,pP(_.targetMatrix,S)),_.width,_.height);o=T.direction,c=At(T.origin,[T.left-_.left,T.top-_.top]),p=xh(_.offsetRootContainer);var I=Hh(r,r,!0).offsetParent||_.offsetRootContainer;if(_.hasZoom){var D=Wu(Wt(_.originalRootMatrix,_.allMatrix),_.transformOrigin,_.width,_.height),O=Wu(_.originalRootMatrix,V0(Jr(I)("transformOrigin")).map(function(B){return parseFloat(B)}),I.offsetWidth,I.offsetHeight);if(u=U1(D,p),h=U1(O,p,I,!0),n){var z=D.left,j=D.top;d=U1({left:z,top:j,bottom:j,right:j},p)}}else{u=xh(e),h=eq(I),n&&(d=xh(n));var C=h.left,A=h.top,k=h.clientLeft,P=h.clientTop,L=[u.left-C,u.top-A];m=He(ld(_.rootMatrix,L,4),[k+_.left,P+_.top])}}return X({targetClientRect:u,containerClientRect:h,moveableClientRect:d,rootContainerClientRect:p,beforeDirection:o,beforeOrigin:c,originalBeforeOrigin:c,target:e,style:b,offsetDelta:m},_)}function ER(n){var e=n.pos1,t=n.pos2,r=n.pos3,i=n.pos4;if(!e||!t||!r||!i)return null;var a=pc([e,t,r,i]),o=[a.minX,a.minY],c=He(n.origin,o);return e=He(e,o),t=He(t,o),r=He(r,o),i=He(i,o),X(X({},n),{left:n.left,top:n.top,posDelta:o,pos1:e,pos2:t,pos3:r,pos4:i,origin:c,beforeOrigin:c,isPersisted:!0})}var cd=(function(n){Sp(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.state=X({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},c_(null)),t.renderState={},t.enabledAbles=[],t.targetAbles=[],t.controlAbles=[],t.rotation=0,t.scale=[1,1],t.isMoveableMounted=!1,t.isUnmounted=!1,t.events={mouseEnter:null,mouseLeave:null},t._emitter=new Cv,t._prevOriginalDragTarget=null,t._originalDragTarget=null,t._prevDragTarget=null,t._dragTarget=null,t._prevPropTarget=null,t._propTarget=null,t._prevDragArea=!1,t._isPropTargetChanged=!1,t._hasFirstTarget=!1,t._reiszeObserver=null,t._observerId=0,t._mutationObserver=null,t._rootContainer=null,t._viewContainer=null,t._viewClassNames=[],t._store={},t.checkUpdateRect=function(){if(!t.isDragging()){var r=t.props.parentMoveable;if(r){r.checkUpdateRect();return}r7(t._observerId),t._observerId=UM(function(){t.isDragging()||t.updateRect()})}},t._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},t}return e.prototype.render=function(){var t=this.props,r=this.getState(),i=t.parentPosition,a=t.className,o=t.target,c=t.zoom,u=t.cspNonce,d=t.translateZ,h=t.cssStyled,p=t.groupable,m=t.linePadding,b=t.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var _=Z(i||[0,0],2),E=_[0],S=_[1],T=r.left,I=r.top,D=r.target,O=r.direction,z=r.hasFixed,j=r.offsetDelta,C=t.targets,A=this.isDragging(),k={};this.getEnabledAbles().forEach(function(Q){k["data-able-".concat(Q.name.toLowerCase())]=!0});var P=this._getAbleClassName(),L=C&&C.length&&(D||p)||o||!this._hasFirstTarget&&this.state.isPersisted,B=this.controlBox||this.props.firstRenderState||this.props.persistData,M=[T-E,I-S];!p&&t.useAccuratePosition&&(M[0]+=j[0],M[1]+=j[1]);var W={position:z?"fixed":"absolute",display:L?"block":"none",visibility:B?"visible":"hidden",transform:"translate3d(".concat(M[0],"px, ").concat(M[1],"px, ").concat(d,")"),"--zoom":c,"--zoompx":"".concat(c,"px")};return m&&(W["--moveable-line-padding"]=m),b&&(W["--moveable-control-padding"]=b),la(h,X({cspNonce:u,ref:As(this,"controlBox"),className:"".concat(Fe("control-box",O===-1?"reverse":"",A?"dragging":"")," ").concat(P," ").concat(a)},k,{onClick:this._onPreventClick,style:W}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var t=this.props,r=t.parentMoveable,i=t.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(t){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(t)},e.prototype.componentWillUnmount=function(){var t,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(t=this._reiszeObserver)===null||t===void 0||t.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),Gu(this,!1),Gu(this,!0);var a=this.events;for(var o in a){var c=a[o];c&&c.destroy()}},e.prototype.getTargets=function(){var t=this.props.target;return t?[t]:[]},e.prototype.getAble=function(t){var r=this.props.ables||[];return Zr(r,function(i){return i.name===t})},e.prototype.getContainer=function(){var t=this.props,r=t.parentMoveable,i=t.wrapperMoveable,a=t.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(t){var r;return t&&(((r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"class"))||"").indexOf(Zw)>-1},e.prototype.dragStart=function(t,r){r===void 0&&(r=t.target);var i=this.targetGesto,a=this.controlGesto;return i&&vE(this)({inputEvent:t},r)?i.isFlag()||i.triggerDragStart(t):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(t)),this},e.prototype.hitTest=function(t){var r=this.state,i=r.target,a=r.pos1,o=r.pos2,c=r.pos3,u=r.pos4,d=r.targetClientRect;if(!i)return 0;var h;if(Pd(t)){var p=t.getBoundingClientRect();h={left:p.left,top:p.top,width:p.width,height:p.height}}else h=X({width:0,height:0},t);var m=h.left,b=h.top,_=h.width,E=h.height,S=$I([a,o,u,c],d),T=sG(S,[[m,b],[m+_,b],[m+_,b+E],[m,b+E]]),I=yP(S);return!T||!I?0:Math.min(100,T/I*100)},e.prototype.isInside=function(t,r){var i=this.state,a=i.target,o=i.pos1,c=i.pos2,u=i.pos3,d=i.pos4,h=i.targetClientRect;return a?$x([t,r],$I([o,c,d,u],h)):!1},e.prototype.updateRect=function(t,r,i){i===void 0&&(i=!0);var a=this.props,o=!a.parentPosition&&!a.wrapperMoveable;o&&sd(!0);var c=a.parentMoveable,u=this.state,d=u.target||a.target,h=this.getContainer(),p=c?c._rootContainer:this._rootContainer,m=c_(this.controlBox,d,h,h,p||h,this._getRequestStyles());if(!d&&this._hasFirstTarget&&a.persistData){var b=ER(a.persistData);for(var _ in b)m[_]=b[_]}o&&sd(),this.updateState(m,c?!1:i)},e.prototype.isDragging=function(t){var r,i,a=this.targetGesto,o=this.controlGesto;if(a?.isFlag()){if(!t)return!0;var c=a.getEventData();return!!(!((r=c[t])===null||r===void 0)&&r.isEventStart)}if(o?.isFlag()){if(!t)return!0;var c=o.getEventData();return!!(!((i=c[t])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(t){this.updateRect(t,!0)},e.prototype.getRect=function(){var t=this.state,r=Fi(this.state),i=Z(r,4),a=i[0],o=i[1],c=i[2],u=i[3],d=zi(r),h=t.width,p=t.height,m=d.width,b=d.height,_=d.left,E=d.top,S=[t.left,t.top],T=At(S,t.origin),I=At(S,t.beforeOrigin),D=t.transformOrigin;return{width:m,height:b,left:_,top:E,pos1:a,pos2:o,pos3:c,pos4:u,offsetWidth:h,offsetHeight:p,beforeOrigin:I,origin:T,transformOrigin:D,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(t){if(!t||t==="target"){var r=this.targetGesto;r?.isIdle()===!1&&s_(this,!1),r?.stop()}if(!t||t==="control"){var r=this.controlGesto;r?.isIdle()===!1&&s_(this,!0),r?.stop()}},e.prototype.getRotation=function(){var t=this.state,r=t.pos1,i=t.pos2,a=t.direction;return dH(r,i,a)},e.prototype.request=function(t,r,i){r===void 0&&(r={});var a=this,o=a.props,c=o.parentMoveable||o.wrapperMoveable||a,u=c.props.ables,d=o.groupable,h=Zr(u,function(T){return T.name===t});if(this.isDragging()||!h||!h.request)return{request:function(){return this},requestEnd:function(){return this}};var p=h.request(a),m=i||r.isInstant,b=p.isControl?"controlAbles":"targetAbles",_="".concat(d?"Group":"").concat(p.isControl?"Control":""),E=Te([],Z(c[b]),!1),S={request:function(T){return _h(a,E,["drag"],_,"",X(X({},p.request(T)),{requestAble:t,isRequest:!0}),m),S},requestEnd:function(){return _h(a,E,["drag"],_,"End",X(X({},p.requestEnd()),{requestAble:t,isRequest:!0}),m),S}};return _h(a,E,["drag"],_,"Start",X(X({},p.requestStart(r)),{requestAble:t,isRequest:!0}),m),m?S.request(r).requestEnd():S},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var t=this.getState(),r=this.props,i=r.padding,a=t.originalBeforeOrigin,o=t.transformOrigin,c=t.allMatrix,u=t.is3d,d=t.pos1,h=t.pos2,p=t.pos3,m=t.pos4,b=t.left,_=t.top,E=t.isPersisted,S=r.zoom||1;if(!i&&S<=1){t.renderPoses=[d,h,p,m],t.renderLines=[[d,h],[h,m],[m,p],[p,d]];return}var T=yO(i||{}),I=T.left,D=T.top,O=T.bottom,z=T.right,j=u?4:3,C=[];E?C=o:this.controlBox&&r.groupable?C=a:C=At(a,[b,_]);var A=D0(j,hc(C.map(function(W){return-W}),j),c,hc(o,j)),k=Di(A,d,[-I,-D],j),P=Di(A,h,[z,-D],j),L=Di(A,p,[-I,O],j),B=Di(A,m,[z,O],j);t.renderPoses=[k,P,L,B],t.renderLines=[[k,P],[P,B],[B,L],[L,k]];{var M=S/2;t.renderLines=[[Di(A,d,[-I-M,-D],j),Di(A,h,[z+M,-D],j)],[Di(A,h,[z,-D-M],j),Di(A,m,[z,O+M],j)],[Di(A,m,[z+M,O],j),Di(A,p,[-I-M,O],j)],[Di(A,p,[-I,O+M],j),Di(A,d,[-I,-D-M],j)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var t=this.props,r=t.target,i=t.container,a=t.parentMoveable,o=this.state,c=o.target,u=o.container;if(!(!c&&!r)){this.updateAbles();var d=!o_(c,r),h=d||!o_(u,i);if(h){var p=i||this.controlBox;p&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&p&&this.updateRect("End",!1,!1),this._isPropTargetChanged=d}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(t,r){var i=this.props;if(this._emitter.trigger(t,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(t,r,!0);var a=i[t];return a&&a(r)},e.prototype.useCSS=function(t,r){var i=this.props.customStyledMap,a=t+r;return i[a]||(i[a]=_P(t,r)),i[a]},e.prototype.getState=function(){var t,r=this.props;(r.target||!((t=r.targets)===null||t===void 0)&&t.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,o=r.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&a){var c=ER(a);if(c)return this.updateState(c,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var t=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(t)})},e.prototype.updateAbles=function(t,r){t===void 0&&(t=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,o=this.getEnabledAbles(t),c="drag".concat(r,"Start"),u="pinch".concat(r,"Start"),d="drag".concat(r,"ControlStart"),h=Om(o,[c,u],a),p=Om(o,[d],a);this.enabledAbles=o,this.targetAbles=h,this.controlAbles=p},e.prototype.updateState=function(t,r){if(r){if(this.isUnmounted)return;this.setState(t)}else{var i=this.state;for(var a in t)i[a]=t[a]}},e.prototype.getEnabledAbles=function(t){t===void 0&&(t=this.props.ables);var r=this.props;return t.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var t=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:la};return this.renderState={},oH(pO(Om(this.getEnabledAbles(),["render"],i).map(function(o){var c=o.render;return c(t,a)||[]})).filter(function(o){return o}),function(o){var c=o.key;return c}).map(function(o){return o[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var t=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return Te(Te([],Z(r),!1),Z(c),!1)},Te([],Z(this.props.requestStyles||[]),!1));return t},e.prototype._updateObserver=function(t){this._updateResizeObserver(t),this._updateMutationObserver(t)},e.prototype._updateEvents=function(){var t=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!t&&this.targetGesto||this._isTargetChanged(!0);a&&(Gu(this,!1),this.updateState({gestos:{}})),r||Gu(this,!0),i&&t&&!this.targetGesto&&(this.targetGesto=CO(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=IO(this,"Control"))},e.prototype._updateTargets=function(){var t=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=t.dragArea,this._propTarget=t.target,this._originalDragTarget=t.dragTarget||t.target,this._dragTarget=La(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var t=this.props,r=t,i=r.zoom,a=r.hideDefaultLines,o=r.hideChildMoveableDefaultLines,c=r.parentMoveable;if(a||c&&o)return[];var u=this.getState(),d={createElement:la};return u.renderLines.map(function(h,p){return qh(d,"",h[0],h[1],i,"render-line-".concat(p))})},e.prototype._isTargetChanged=function(t){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,o=this._prevDragArea,c=r.dragArea,u=!c&&a!==i,d=(t||c)&&o!==c;return u||d||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var t=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,o=Ps(a);if(this._isTargetChanged())for(var c in a){var u=a[c];u&&u.destroy(),a[c]=null}if(i){var d=this.enabledAbles;o.forEach(function(h){var p=Om(d,[h]),m=p.length>0,b=a[h];if(!m){b&&(b.destroy(),a[h]=null);return}b||(b=new BH(i,t,h),a[h]=b),b.setAbles(p)})}},e.prototype._checkUpdateRootContainer=function(){var t=this.props.rootContainer;!this._rootContainer&&t&&(this._rootContainer=La(t,!0))},e.prototype._checkUpdateViewContainer=function(){var t=this.props.viewContainer;!this._viewContainer&&t&&(this._viewContainer=La(t,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Te(Te([],Z(this._getAbleViewClassNames()),!1),[this.isDragging()?yH:""],!1))},e.prototype._changeAbleViewClassNames=function(t){var r=this._viewContainer,i=hO(t.filter(Boolean),function(d){return d}).map(function(d){var h=Z(d,1),p=h[0];return p}),a=this._viewClassNames,o=bp(a,i),c=o.removed,u=o.added;c.forEach(function(d){$M(r,a[d])}),u.forEach(function(d){HM(r,i[d])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var t=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,t))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(t){var r=this;t===void 0&&(t="");var i=this.getEnabledAbles(),a=this.targetGesto,o=this.controlGesto,c=a?.isFlag()?a.getEventData():{},u=o?.isFlag()?o.getEventData():{};return i.map(function(d){var h,p,m,b=d.name,_=((h=d.className)===null||h===void 0?void 0:h.call(d,r))||"";return(!((p=c[b])===null||p===void 0)&&p.isEventStart||!((m=u[b])===null||m===void 0)&&m.isEventStart)&&(_+=" ".concat(Fe("".concat(b).concat(t,"-dragging")))),_.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(t){var r,i=this.props,a=i.target,o=Bo(this.getControlBoxElement());if(!o.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(t.target===a&&this._reiszeObserver)){var c=new o.ResizeObserver(this.checkUpdateRect);c.observe(a,{box:"border-box"}),this._reiszeObserver=c}},e.prototype._updateMutationObserver=function(t){var r=this,i,a=this.props,o=a.target,c=Bo(this.getControlBoxElement());if(!c.MutationObserver||!o||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(t.target===o&&this._mutationObserver)){var u=new c.MutationObserver(function(d){var h,p;try{for(var m=EG(d),b=m.next();!b.done;b=m.next()){var _=b.value;_.type==="attributes"&&_.attributeName==="style"&&r.checkUpdateRect()}}catch(E){h={error:E}}finally{try{b&&!b.done&&(p=m.return)&&p.call(m)}finally{if(h)throw h.error}}});u.observe(o,{attributes:!0}),this._mutationObserver=u}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:rO,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(JM),yE={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(n,e){var t,r=n.props,i=r.targets||[],a=n.getState(),o=a.left,c=a.top,u=a.isPersisted,d=r.zoom||1,h=n.renderGroupRects,p=((t=r.persistData)===null||t===void 0?void 0:t.children)||[];u?i=p.map(function(){return null}):p=[];var m=qu(n,"parentPosition",[o,c],function(_){return _.join(",")}),b=qu(n,"requestStyles",n.getRequestChildStyles(),function(_){return _.join(",")});return n.moveables=n.moveables.slice(0,i.length),Te(Te([],Z(i.map(function(_,E){return e.createElement(cd,{key:"moveable"+E,ref:jM(n,"moveables",E),target:_,origin:!1,requestStyles:b,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:n,parentPosition:[o,c],persistData:p[E],zoom:d})})),!1),Z(pO(h.map(function(_,E){var S=_.pos1,T=_.pos2,I=_.pos3,D=_.pos4,O=[S,T,I,D];return[[0,1],[1,3],[3,2],[2,0]].map(function(z,j){var C=Z(z,2),A=C[0],k=C[1];return qh(e,"",He(O[A],m),He(O[k],m),d,"group-rect-".concat(E,"-").concat(j))})}))),!1)}},GH=Tp("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(n,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(n,e){var t=n.props.target,r=e.inputEvent,i=e.inputTarget,a=n.isMoveableElement(i),o=!a&&n.controlBox.contains(i);if(!(!r||!i||e.isDrag||n.isMoveableElement(i)||o)){var c=t.contains(i);Ne(n,"onClick",dt(n,e,{isDouble:e.isDouble,inputTarget:i,isTarget:t===i,moveableTarget:n.props.target,containsTarget:c}))}},dragGroupEnd:function(n,e){var t=e.inputEvent,r=e.inputTarget;if(!(!t||!r||e.isDrag||n.isMoveableElement(r)||e.datas.inputTarget===r)){var i=n.props.targets,a=i.indexOf(r),o=a>-1,c=!1;a===-1&&(a=Ms(i,function(u){return u.contains(r)}),c=a>-1),Ne(n,"onClickGroup",dt(n,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:o,containsTarget:c,moveableTarget:i[a]}))}},dragControlEnd:function(n,e){this.dragEnd(n,e)},dragGroupControlEnd:function(n,e){this.dragEnd(n,e)}});function wu(n){var e=n.originalDatas.draggable;return e||(n.originalDatas.draggable={},e=n.originalDatas.draggable),X(X({},n),{datas:e})}var qH=Tp("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(n,e){var t=n.props,r=t.edgeDraggable;return r?jP(e,"edgeDraggable",r,n.getState().renderPoses,t.zoom):[]},dragCondition:function(n,e){var t,r=n.props,i=(t=e.inputEvent)===null||t===void 0?void 0:t.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Wn(i,Fe("direction"))&&Wn(i,Fe("edge"))&&Wn(i,Fe("edgeDraggable"))},dragStart:function(n,e){return Nr.dragStart(n,wu(e))},drag:function(n,e){return Nr.drag(n,wu(e))},dragEnd:function(n,e){return Nr.dragEnd(n,wu(e))},dragGroupCondition:function(n,e){var t,r=n.props,i=(t=e.inputEvent)===null||t===void 0?void 0:t.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Wn(i,Fe("direction"))&&Wn(i,Fe("line"))},dragGroupStart:function(n,e){return Nr.dragGroupStart(n,wu(e))},dragGroup:function(n,e){return Nr.dragGroup(n,wu(e))},dragGroupEnd:function(n,e){return Nr.dragGroupEnd(n,wu(e))},unset:function(n){return Nr.unset(n)}}),DO={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},bE=[TO,_O,Kq,hH,Nr,qH,n_,pH,mH,Dq,_H,wH,bH,PH,MH,zH,yE,DO,GH,xO,AO],HH=bE.reduce(function(n,e){return(e.events||[]).forEach(function(t){qM(n,t)}),n},[]),$H=bE.reduce(function(n,e){return(e.props||[]).forEach(function(t){qM(n,t)}),n},[]);function SR(n,e){var t=Z(n,3),r=t[0],i=t[1],a=t[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function zm(n,e){var t=Z(n,2),r=t[0],i=t[1];return-r*e[0]-i*e[1]}function TR(n,e){return Math.max.apply(Math,Te([],Z(n.map(function(t){var r=Z(t,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.max(i[e],a[e],o[e],c[e])})),!1))}function AR(n,e){return Math.min.apply(Math,Te([],Z(n.map(function(t){var r=Z(t,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.min(i[e],a[e],o[e],c[e])})),!1))}function YH(n,e){var t,r,i,a=[0,0],o=[0,0],c=[0,0],u=[0,0],d=0,h=0;if(!n.length)return{pos1:a,pos2:o,pos3:c,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:d,height:h,rotation:e};var p=st(e,zr);if(p%90){var m=p/180*Math.PI,b=Math.tan(m),_=-1/b,E=[Zx,XI],S=[[0,0],[0,0]],T=[Zx,XI],I=[[0,0],[0,0]];n.forEach(function(te){te.forEach(function(se){var pe=SR([-b,1,0],se),ie=SR([-_,1,0],se);E[0]>pe&&(S[0]=se,E[0]=pe),E[1]<pe&&(S[1]=se,E[1]=pe),T[0]>ie&&(I[0]=se,T[0]=ie),T[1]<ie&&(I[1]=se,T[1]=ie)})});var D=Z(S,2),O=D[0],z=D[1],j=Z(I,2),C=j[0],A=j[1],k=[-b,1,zm([-b,1],O)],P=[-b,1,zm([-b,1],z)],L=[-_,1,zm([-_,1],C)],B=[-_,1,zm([-_,1],A)];t=Z([[k,L],[k,B],[P,L],[P,B]].map(function(te){var se=Z(te,2),pe=se[0],ie=se[1];return Ww(pe,ie)[0]}),4),a=t[0],o=t[1],c=t[2],u=t[3],d=T[1]-T[0],h=E[1]-E[0]}else{var M=AR(n,0),W=AR(n,1),Q=TR(n,0),$=TR(n,1);if(a=[M,W],o=[Q,W],c=[M,$],u=[Q,$],d=Q-M,h=$-W,p%180){var H=[c,a,u,o];r=Z(H,4),a=r[0],o=r[1],c=r[2],u=r[3],d=$-W,h=Q-M}}if(p%360>180){var H=[u,c,o,a];i=Z(H,4),a=i[0],o=i[1],c=i[2],u=i[3]}var ee=pc([a,o,c,u]),ne=ee.minX,de=ee.minY,U=ee.maxX,Y=ee.maxY;return{pos1:a,pos2:o,pos3:c,pos4:u,width:d,height:h,minX:ne,minY:de,maxX:U,maxY:Y,rotation:e}}function kO(n,e){var t=e.map(function(r){if(Gn(r)){var i=kO(n,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var o=Zr(n,function(c){var u=c.manager;return u.props.target===r});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return t.length===1&&Gn(t[0])?t[0]:t}var KH=(function(n){Sp(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.differ=new vP,t.moveables=[],t.transformOrigin="50% 50%",t.renderGroupRects=[],t._targetGroups=[],t._hasFirstTargets=!1,t}return e.prototype.componentDidMount=function(){n.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,r,i){var a;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;sd(!0),this.moveables.forEach(function(Ae){Ae.updateRect(t,!1,!1)});var c=this.props,u=this.moveables,d=o.target||c.target,h=u.map(function(Ae){return{finded:!1,manager:Ae}}),p=this.props.targetGroups||[],m=kO(h,p),b=c.useDefaultGroupRotate;m.push.apply(m,Te([],Z(h.filter(function(Ae){var Ie=Ae.finded;return!Ie}).map(function(Ae){var Ie=Ae.manager;return Ie})),!1));var _=[],E=!r||t!==""&&c.updateGroup,S=c.defaultGroupRotate||0;if(!this._hasFirstTargets){var T=(a=c.persistData)===null||a===void 0?void 0:a.rotation;T!=null&&(S=T)}function I(Ae,Ie,ke){var xe=Ae.map(function(pt){if(Gn(pt)){var Ve=I(pt,Ie),Ye=[Ve.pos1,Ve.pos2,Ve.pos3,Ve.pos4];return _.push(Ve),{poses:Ye,rotation:Ve.rotation}}else return{poses:Fi(pt.state),rotation:pt.getRotation()}}),Ee=xe.map(function(pt){var Ve=pt.rotation;return Ve}),Xe=0,je=Ee[0],Le=Ee.every(function(pt){return Math.abs(je-pt)<.1});E?Xe=!b&&Le?je:S:Xe=!b&&!ke&&Le?je:Ie;var Pe=xe.map(function(pt){var Ve=pt.poses;return Ve}),nt=YH(Pe,Xe);return nt}var D=I(m,this.rotation,!0);E&&(this.rotation=D.rotation,this.transformOrigin=c.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=p,this.renderGroupRects=_;var O=this.transformOrigin,z=this.rotation,j=this.scale,C=D.width,A=D.height,k=D.minX,P=D.minY,L=fH([[0,0],[C,0],[0,A],[C,A]],pE(O,C,A),this.rotation/180*Math.PI),B=pc(L.result),M=B.minX,W=B.minY,Q=" rotate(".concat(z,"deg)")+" scale(".concat(Mr(j[0]),", ").concat(Mr(j[1]),")"),$="translate(".concat(-M,"px, ").concat(-W,"px)").concat(Q);this.controlBox.style.transform="translate3d(".concat(k,"px, ").concat(P,"px, ").concat(this.props.translateZ||0,")"),d.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(O,";")+"width:".concat(C,"px;height:").concat(A,"px;")+"transform: ".concat($),o.width=C,o.height=A;var H=this.getContainer(),ee=c_(this.controlBox,d,this.controlBox,this.getContainer(),this._rootContainer||H,[]),ne=[ee.left,ee.top],de=Z(Fi(ee),4),U=de[0],Y=de[1],te=de[2],se=de[3],pe=pc([U,Y,te,se]),ie=[pe.minX,pe.minY],ve=Mr(j[0]*j[1]);ee.pos1=He(U,ie),ee.pos2=He(Y,ie),ee.pos3=He(te,ie),ee.pos4=He(se,ie),ee.left=k-ee.left+ie[0],ee.top=P-ee.top+ie[1],ee.origin=He(At(ne,ee.origin),ie),ee.beforeOrigin=He(At(ne,ee.beforeOrigin),ie),ee.originalBeforeOrigin=At(ne,ee.originalBeforeOrigin),ee.transformOrigin=He(At(ne,ee.transformOrigin),ie),d.style.transform="translate(".concat(-M-ie[0],"px, ").concat(-W-ie[1],"px)")+Q,sd(),this.updateState(X(X({},ee),{posDelta:ie,direction:ve,beforeDirection:ve}),i)},e.prototype.getRect=function(){return X(X({},n.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.prototype.triggerEvent=function(t,r,i){if(i||t.indexOf("Group")>-1)return n.prototype.triggerEvent.call(this,t,r);this._emitter.trigger(t,r)},e.prototype.getRequestChildStyles=function(){var t=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return Te(Te([],Z(r),!1),Z(c),!1)},[]);return t},e.prototype.getMoveables=function(){return Te([],Z(this.moveables),!1)},e.prototype.updateAbles=function(){n.prototype.updateAbles.call(this,Te(Te([],Z(this.props.ables),!1),[yE],!1),"Group")},e.prototype._updateTargets=function(){n.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=La(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var t=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,o=r.targets,c=this.differ.update(o),u=c.added,d=c.changed,h=c.removed,p=u.length||h.length;(p||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Gu(this,!1),Gu(this,!0),this.updateState({gestos:{}})),i!==a&&(t.target=null),t.target||(t.target=this.areaElement,this.controlBox.style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=CO(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=IO(this,"GroupControl")));var m=!o_(t.container,r.container);m&&(t.container=r.container),(m||p||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||d.length||o.length&&!vO(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!p},e.prototype._updateObserver=function(){},e.defaultProps=X(X({},cd.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(cd),XH=(function(n){Sp(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.moveables=[],t}return e.prototype.render=function(){var t=this,r,i=this.props,a=i.cspNonce,o=i.cssStyled,c=i.persistData,u=i.targets||[],d=u.length,h=this.isUnmounted||!d,p=(r=c?.children)!==null&&r!==void 0?r:[];return h&&!d&&p.length?u=p.map(function(){return null}):h||(p=[]),la(o,{cspNonce:a,ref:As(this,"controlBox"),className:Fe("control-box")},u.map(function(m,b){var _,E,S=(E=(_=i.individualGroupableProps)===null||_===void 0?void 0:_.call(i,m,b))!==null&&E!==void 0?E:{};return la(cd,X({key:"moveable"+b,ref:jM(t,"moveables",b)},i,S,{target:m,wrapperMoveable:t,isWrapperMounted:t.isMoveableMounted,persistData:p[b]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,r,i){i===void 0&&(i=!0),sd(!0),this.moveables.forEach(function(a){a.updateRect(t,r,i)}),sd()},e.prototype.getRect=function(){return X(X({},n.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.prototype.request=function(t,r,i){r===void 0&&(r={});var a=this.moveables.map(function(u){return u.request(t,X(X({},r),{isInstant:!1}),!1)}),o=i||r.isInstant,c={request:function(u){return a.forEach(function(d){return d.request(u)}),this},requestEnd:function(){return a.forEach(function(u){return u.requestEnd()}),this}};return o?c.request(r).requestEnd():c},e.prototype.dragStart=function(t,r){r===void 0&&(r=t.target);var i=r,a=Zr(this.moveables,function(o){var c=o.getTargets()[0],u=o.getControlBoxElement(),d=o.getDragElement();return!c||!d?!1:d===i||d.contains(i)||d!==c&&c===i||c.contains(i)||u===i||u.contains(i)});return a&&a.dragStart(t,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Te([],Z(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(cd);function NO(n,e){var t=[];return n.forEach(function(r){if(r){if(Qr(r)){e[r]&&t.push.apply(t,Te([],Z(e[r]),!1));return}Gn(r)?t.push.apply(t,Te([],Z(NO(r,e)),!1)):t.push(r)}}),t}function MO(n,e){var t=[];return n.forEach(function(r){if(r){if(Qr(r)){e[r]&&t.push.apply(t,Te([],Z(e[r]),!1));return}Gn(r)?t.push(MO(r,e)):t.push(r)}}),t}function PO(n,e){return n.length!==e.length||n.some(function(t,r){var i=e[r];return!t&&!i?!1:t!=i?Gn(t)&&Gn(i)?PO(t,i):!0:!1})}var WH=(function(n){Sp(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.refTargets=[],t.selectorMap={},t._differ=new vP,t._elementTargets=[],t._tmpRefTargets=[],t._tmpSelectorMap={},t._onChangeTargets=null,t}return e.makeStyled=function(){var t={},r=this.getTotalAbles();r.forEach(function(a){var o=a.css;o&&o.forEach(function(c){t[c]=!0})});var i=Ps(t).join(`
`);this.defaultStyled=_P("div",HF(Zw,PG+i))},e.getTotalAbles=function(){return Te([_O,yE,DO,xO],Z(this.defaultAbles),!1)},e.prototype.render=function(){var t,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,o=i.props,c=_G(i,["ables","props"]),u=Z(this._updateRefs(!0),2),d=u[0],h=u[1],p=NO(d,h),m=p.length>1,b=r.getTotalAbles(),_=Te(Te([],Z(b),!1),Z(a||[]),!1),E=X(X(X({},c),o||{}),{ables:_,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=p;var S=null,T=this.moveable,I=c.persistData;if(I?.children&&(m=!0),c.individualGroupable)return la(XH,X({key:"individual-group",ref:As(this,"moveable")},E,{target:null,targets:p}));if(m){var D=MO(d,h);if(T&&!T.props.groupable&&!T.props.individualGroupable){var O=T.props.target;O&&p.indexOf(O)>-1&&(S=X({},T.state))}return la(KH,X({key:"group",ref:As(this,"moveable")},E,(t=c.groupableProps)!==null&&t!==void 0?t:{},{target:null,targets:p,targetGroups:D,firstRenderState:S}))}else{var z=p[0];if(T&&(T.props.groupable||T.props.individualGroupable)){var j=T.moveables||[],C=Zr(j,function(A){return A.props.target===z});C&&(S=X({},C.state))}return la(cd,X({key:"single",ref:As(this,"moveable")},E,{target:z,firstRenderState:S}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var t,r;return(r=(t=this.moveable)===null||t===void 0?void 0:t.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var t=this,r;return this._onChangeTargets=function(){t._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(t){var r=this.refTargets,i=hE(this.props.target||this.props.targets),a=typeof document<"u",o=PO(r,i),c=this.selectorMap,u={};return this.refTargets.forEach(function d(h){if(Qr(h)){var p=c[h];p?u[h]=c[h]:a&&(o=!0,u[h]=[].slice.call(document.querySelectorAll(h)))}else Gn(h)&&h.forEach(d)}),this._tmpRefTargets=i,this._tmpSelectorMap=u,[i,u,!t&&o]},e.prototype._checkChangeTargets=function(){var t,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),o=a.added,c=a.removed,u=o.length||c.length;u&&((r=(t=this.props).onChangeTargets)===null||r===void 0||r.call(t,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var d=Z(this._updateRefs(),3),h=d[0],p=d[1],m=d[2];this.refTargets=h,this.selectorMap=p,m&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,wG([$F(CP)],e.prototype,"moveable",void 0),e})(JM),QH=(function(n){Sp(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.defaultAbles=bE,e})(WH),u_=function(n,e){return u_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},u_(n,e)};function xE(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");u_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var $h=function(){return $h=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},$h.apply(this,arguments)};function ZH(n,e,t,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}var JH=(function(n){xE(e,n);function e(r){var i=n.call(this,r)||this;return i.state={},i.state=i.props,i}var t=e.prototype;return t.render=function(){return la(QH,$h({ref:As(this,"moveable")},this.state))},e})(qw),e$=$H,t$=CP,n$=HH,r$=(function(n){xE(e,n);function e(r,i){i===void 0&&(i={});var a=n.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var o=$h({},i),c={};n$.forEach(function(h){c[n7("on ".concat(h))]=function(p){return a.trigger(h,p)}});var u;i.warpSelf?(delete i.warpSelf,a._warp=!0,u=r):(u=Md(r).createElement("div"),r.appendChild(u)),a.containerProvider=GI(la(JH,$h({ref:As(a,"innerMoveable")},o,c)),u),a.selfElement=u;var d=o.target;return Gn(d)&&d.length>1&&a.updateRect(),a}var t=e.prototype;return t.setState=function(r,i){this.innerMoveable.setState(r,i)},t.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},t.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},t.destroy=function(){var r,i=this.selfElement;GI(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},t.getMoveable=function(){return this.innerMoveable.moveable},e=ZH([PI(t$,function(r,i){r[i]||(r[i]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var c=this.getMoveable();if(!(!c||!c[i]))return c[i].apply(c,a)})}),PI(e$,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var o;this.setState((o={},o[i]=a,o))},enumerable:!0,configurable:!0})})],e),e})(Cv),i$=(function(n){xE(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(r$);const CR=n=>{let e;const t=new Set,r=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const m=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(b=>b(e,m))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(t.add(d),()=>t.delete(d))},u=e=n(r,i,c);return c},a$=(n=>n?CR(n):CR),s$=n=>n;function o$(n,e=s$){const t=ym.useSyncExternalStore(n.subscribe,ym.useCallback(()=>e(n.getState()),[n,e]),ym.useCallback(()=>e(n.getInitialState()),[n,e]));return ym.useDebugValue(t),t}const IR=n=>{const e=a$(n),t=r=>o$(e,r);return Object.assign(t,e),t},_E=(n=>n?IR(n):IR),RR={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",VITE_FIREBASE_APP_ID:"1:137454342284:web:ab8b52955e6f0ffd42aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-BCLXBQHT9L",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app"},Yh=new Map,Lm=n=>{const e=Yh.get(n);return e?Object.fromEntries(Object.entries(e.stores).map(([t,r])=>[t,r.getState()])):{}},l$=(n,e,t)=>{if(n===void 0)return{type:"untracked",connection:e.connect(t)};const r=Yh.get(t.name);if(r)return{type:"tracked",store:n,...r};const i={connection:e.connect(t),stores:{}};return Yh.set(t.name,i),{type:"tracked",store:n,...i}},c$=(n,e)=>{if(e===void 0)return;const t=Yh.get(n);t&&(delete t.stores[e],Object.keys(t.stores).length===0&&Yh.delete(n))},u$=n=>{var e,t;if(!n)return;const r=n.split(`
`),i=r.findIndex(o=>o.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(t=/.+ (.+) .+/.exec(a))==null?void 0:t[1]},d$=(n,e={})=>(t,r,i)=>{const{enabled:a,anonymousActionType:o,store:c,...u}=e;let d;try{d=(a??(RR?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return n(t,r,i);const{connection:h,...p}=l$(c,d,u);let m=!0;i.setState=((E,S,T)=>{const I=t(E,S);if(!m)return I;const D=T===void 0?{type:o||u$(new Error().stack)||"anonymous"}:typeof T=="string"?{type:T}:T;return c===void 0?(h?.send(D,r()),I):(h?.send({...D,type:`${c}/${D.type}`},{...Lm(u.name),[c]:i.getState()}),I)}),i.devtools={cleanup:()=>{h&&typeof h.unsubscribe=="function"&&h.unsubscribe(),c$(u.name,c)}};const b=(...E)=>{const S=m;m=!1,t(...E),m=S},_=n(i.setState,r,i);if(p.type==="untracked"?h?.init(_):(p.stores[p.store]=i,h?.init(Object.fromEntries(Object.entries(p.stores).map(([E,S])=>[E,E===p.store?_:S.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let E=!1;const S=i.dispatch;i.dispatch=(...T)=>{(RR?"production":void 0)!=="production"&&T[0].type==="__setState"&&!E&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),E=!0),S(...T)}}return h.subscribe(E=>{var S;switch(E.type){case"ACTION":if(typeof E.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return q1(E.payload,T=>{if(T.type==="__setState"){if(c===void 0){b(T.state);return}Object.keys(T.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const I=T.state[c];if(I==null)return;JSON.stringify(i.getState())!==JSON.stringify(I)&&b(I);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(T)});case"DISPATCH":switch(E.payload.type){case"RESET":return b(_),c===void 0?h?.init(i.getState()):h?.init(Lm(u.name));case"COMMIT":if(c===void 0){h?.init(i.getState());return}return h?.init(Lm(u.name));case"ROLLBACK":return q1(E.state,T=>{if(c===void 0){b(T),h?.init(i.getState());return}b(T[c]),h?.init(Lm(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return q1(E.state,T=>{if(c===void 0){b(T);return}JSON.stringify(i.getState())!==JSON.stringify(T[c])&&b(T[c])});case"IMPORT_STATE":{const{nextLiftedState:T}=E.payload,I=(S=T.computedStates.slice(-1)[0])==null?void 0:S.state;if(!I)return;b(c===void 0?I:I[c]),h?.send(null,T);return}case"PAUSE_RECORDING":return m=!m}return}}),_},f$=d$,q1=(n,e)=>{let t;try{t=JSON.parse(n)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}t!==void 0&&e(t)};function h$(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=t.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>t.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>t.removeItem(i)}}const d_=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return d_(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return d_(r)(t)}}}},p$=(n,e)=>(t,r,i)=>{let a={storage:h$(()=>localStorage),partialize:E=>E,version:0,merge:(E,S)=>({...S,...E}),...e},o=!1;const c=new Set,u=new Set;let d=a.storage;if(!d)return n((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...E)},r,i);const h=()=>{const E=a.partialize({...r()});return d.setItem(a.name,{state:E,version:a.version})},p=i.setState;i.setState=(E,S)=>(p(E,S),h());const m=n((...E)=>(t(...E),h()),r,i);i.getInitialState=()=>m;let b;const _=()=>{var E,S;if(!d)return;o=!1,c.forEach(I=>{var D;return I((D=r())!=null?D:m)});const T=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(E=r())!=null?E:m))||void 0;return d_(d.getItem.bind(d))(a.name).then(I=>{if(I)if(typeof I.version=="number"&&I.version!==a.version){if(a.migrate){const D=a.migrate(I.state,I.version);return D instanceof Promise?D.then(O=>[!0,O]):[!0,D]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,I.state];return[!1,void 0]}).then(I=>{var D;const[O,z]=I;if(b=a.merge(z,(D=r())!=null?D:m),t(b,!0),O)return h()}).then(()=>{T?.(b,void 0),b=r(),o=!0,u.forEach(I=>I(b))}).catch(I=>{T?.(void 0,I)})};return i.persist={setOptions:E=>{a={...a,...E},E.storage&&(d=E.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:E=>(c.add(E),()=>{c.delete(E)}),onFinishHydration:E=>(u.add(E),()=>{u.delete(E)})},a.skipHydration||_(),b||m},OO=p$,g$=()=>{};var DR={};const VO=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},m$=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},jO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,h=a>>2,p=(a&3)<<4|c>>4;let m=(c&15)<<2|d>>6,b=d&63;u||(b=64,o||(m=64)),r.push(t[h],t[p],t[m],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(VO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):m$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||c==null||d==null||p==null)throw new v$;const m=a<<2|c>>4;if(r.push(m),d!==64){const b=c<<4&240|d>>2;if(r.push(b),p!==64){const _=d<<6&192|p;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class v$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y$=function(n){const e=VO(n);return jO.encodeByteArray(e,!0)},B0=function(n){return y$(n).replace(/\./g,"")},zO=function(n){try{return jO.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function LO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const b$=()=>LO().__FIREBASE_DEFAULTS__,x$=()=>{if(typeof process>"u"||typeof DR>"u")return;const n=DR.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&zO(n[1]);return e&&JSON.parse(e)},jv=()=>{try{return g$()||b$()||x$()||_$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},BO=n=>jv()?.emulatorHosts?.[n],w$=n=>{const e=BO(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},UO=()=>jv()?.config,FO=n=>jv()?.[`_${n}`];class E${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function zd(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function GO(n){return(await fetch(n,{credentials:"include"})).ok}function S$(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[B0(JSON.stringify(t)),B0(JSON.stringify(o)),""].join(".")}const wh={};function T$(){const n={prod:[],emulator:[]};for(const e of Object.keys(wh))wh[e]?n.emulator.push(e):n.prod.push(e);return n}function A$(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let kR=!1;function qO(n,e){if(typeof window>"u"||typeof document>"u"||!zd(window.location.host)||wh[n]===e||wh[n]||kR)return;wh[n]=e;function t(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=T$().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,b){m.setAttribute("width","24"),m.setAttribute("id",b),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{kR=!0,o()},m}function h(m,b){m.setAttribute("id",b),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=A$(r),b=t("text"),_=document.getElementById(b)||document.createElement("span"),E=t("learnmore"),S=document.getElementById(E)||document.createElement("a"),T=t("preprendIcon"),I=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const D=m.element;c(D),h(S,E);const O=d();u(I,T),D.append(I,_,S,O),document.body.appendChild(D)}a?(_.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())}function HO(){const n=jv()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function I$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function R$(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function D$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function k$(){const n=Jn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function $O(){return!HO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YO(){return!HO()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function KO(){try{return typeof indexedDB=="object"}catch{return!1}}function N$(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const M$="FirebaseError";class Ls extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=M$,Object.setPrototypeOf(this,Ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ip.prototype.create)}}class Ip{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?P$(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Ls(i,c,r)}}function P$(n,e){return n.replace(O$,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const O$=/\{\$([^}]+)}/g;function V$(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function mc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(NR(a)&&NR(o)){if(!mc(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function NR(n){return n!==null&&typeof n=="object"}function Rp(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ih(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function ah(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function j$(n,e){const t=new z$(n,e);return t.subscribe.bind(t)}class z${constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");L$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=H1),i.error===void 0&&(i.error=H1),i.complete===void 0&&(i.complete=H1);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L$(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function H1(){}function rn(n){return n&&n._delegate?n._delegate:n}class vc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Bl="[DEFAULT]";class B${constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new E$;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(F$(e))try{this.getOrInitializeService({instanceIdentifier:Bl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Bl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bl){return this.instances.has(e)}getOptions(e=Bl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:U$(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bl){return this.component?this.component.multipleInstances?e:Bl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U$(n){return n===Bl?void 0:n}function F$(n){return n.instantiationMode==="EAGER"}class G${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new B$(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var _t;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(_t||(_t={}));const q$={debug:_t.DEBUG,verbose:_t.VERBOSE,info:_t.INFO,warn:_t.WARN,error:_t.ERROR,silent:_t.SILENT},H$=_t.INFO,$$={[_t.DEBUG]:"log",[_t.VERBOSE]:"log",[_t.INFO]:"info",[_t.WARN]:"warn",[_t.ERROR]:"error"},Y$=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=$$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wE{constructor(e){this.name=e,this._logLevel=H$,this._logHandler=Y$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _t))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_t.DEBUG,...e),this._logHandler(this,_t.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_t.VERBOSE,...e),this._logHandler(this,_t.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_t.INFO,...e),this._logHandler(this,_t.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_t.WARN,...e),this._logHandler(this,_t.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_t.ERROR,...e),this._logHandler(this,_t.ERROR,...e)}}const K$=(n,e)=>e.some(t=>n instanceof t);let MR,PR;function X$(){return MR||(MR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W$(){return PR||(PR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XO=new WeakMap,f_=new WeakMap,WO=new WeakMap,$1=new WeakMap,EE=new WeakMap;function Q$(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(Uo(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&XO.set(t,n)}).catch(()=>{}),EE.set(e,n),e}function Z$(n){if(f_.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});f_.set(n,e)}let h_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return f_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||WO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Uo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function J$(n){h_=n(h_)}function eY(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Y1(this),e,...t);return WO.set(r,e.sort?e.sort():[e]),Uo(r)}:W$().includes(n)?function(...e){return n.apply(Y1(this),e),Uo(XO.get(this))}:function(...e){return Uo(n.apply(Y1(this),e))}}function tY(n){return typeof n=="function"?eY(n):(n instanceof IDBTransaction&&Z$(n),K$(n,X$())?new Proxy(n,h_):n)}function Uo(n){if(n instanceof IDBRequest)return Q$(n);if($1.has(n))return $1.get(n);const e=tY(n);return e!==n&&($1.set(n,e),EE.set(e,n)),e}const Y1=n=>EE.get(n);function nY(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),c=Uo(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Uo(o.result),u.oldVersion,u.newVersion,Uo(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const rY=["get","getKey","getAll","getAllKeys","count"],iY=["put","add","delete","clear"],K1=new Map;function OR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(K1.get(e))return K1.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=iY.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rY.includes(t)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&u.done]))[0]};return K1.set(e,a),a}J$(n=>({...n,get:(e,t,r)=>OR(e,t)||n.get(e,t,r),has:(e,t)=>!!OR(e,t)||n.has(e,t)}));class aY{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(sY(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function sY(n){return n.getComponent()?.type==="VERSION"}const p_="@firebase/app",VR="0.14.6";const Os=new wE("@firebase/app"),oY="@firebase/app-compat",lY="@firebase/analytics-compat",cY="@firebase/analytics",uY="@firebase/app-check-compat",dY="@firebase/app-check",fY="@firebase/auth",hY="@firebase/auth-compat",pY="@firebase/database",gY="@firebase/data-connect",mY="@firebase/database-compat",vY="@firebase/functions",yY="@firebase/functions-compat",bY="@firebase/installations",xY="@firebase/installations-compat",_Y="@firebase/messaging",wY="@firebase/messaging-compat",EY="@firebase/performance",SY="@firebase/performance-compat",TY="@firebase/remote-config",AY="@firebase/remote-config-compat",CY="@firebase/storage",IY="@firebase/storage-compat",RY="@firebase/firestore",DY="@firebase/ai",kY="@firebase/firestore-compat",NY="firebase",MY="12.6.0";const g_="[DEFAULT]",PY={[p_]:"fire-core",[oY]:"fire-core-compat",[cY]:"fire-analytics",[lY]:"fire-analytics-compat",[dY]:"fire-app-check",[uY]:"fire-app-check-compat",[fY]:"fire-auth",[hY]:"fire-auth-compat",[pY]:"fire-rtdb",[gY]:"fire-data-connect",[mY]:"fire-rtdb-compat",[vY]:"fire-fn",[yY]:"fire-fn-compat",[bY]:"fire-iid",[xY]:"fire-iid-compat",[_Y]:"fire-fcm",[wY]:"fire-fcm-compat",[EY]:"fire-perf",[SY]:"fire-perf-compat",[TY]:"fire-rc",[AY]:"fire-rc-compat",[CY]:"fire-gcs",[IY]:"fire-gcs-compat",[RY]:"fire-fst",[kY]:"fire-fst-compat",[DY]:"fire-vertex","fire-js":"fire-js",[NY]:"fire-js-all"};const U0=new Map,OY=new Map,m_=new Map;function jR(n,e){try{n.container.addComponent(e)}catch(t){Os.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ud(n){const e=n.name;if(m_.has(e))return Os.debug(`There were multiple attempts to register component ${e}.`),!1;m_.set(e,n);for(const t of U0.values())jR(t,n);for(const t of OY.values())jR(t,n);return!0}function SE(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Mi(n){return n==null?!1:n.settings!==void 0}const VY={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fo=new Ip("app","Firebase",VY);class jY{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fo.create("app-deleted",{appName:this._name})}}const Ld=MY;function QO(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:g_,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Fo.create("bad-app-name",{appName:String(i)});if(t||(t=UO()),!t)throw Fo.create("no-options");const a=U0.get(i);if(a){if(mc(t,a.options)&&mc(r,a.config))return a;throw Fo.create("duplicate-app",{appName:i})}const o=new G$(i);for(const u of m_.values())o.addComponent(u);const c=new jY(t,r,o);return U0.set(i,c),c}function ZO(n=g_){const e=U0.get(n);if(!e&&n===g_&&UO())return QO();if(!e)throw Fo.create("no-app",{appName:n});return e}function Go(n,e,t){let r=PY[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Os.warn(o.join(" "));return}ud(new vc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const zY="firebase-heartbeat-database",LY=1,Kh="firebase-heartbeat-store";let X1=null;function JO(){return X1||(X1=nY(zY,LY,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Kh)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fo.create("idb-open",{originalErrorMessage:n.message})})),X1}async function BY(n){try{const t=(await JO()).transaction(Kh),r=await t.objectStore(Kh).get(e4(n));return await t.done,r}catch(e){if(e instanceof Ls)Os.warn(e.message);else{const t=Fo.create("idb-get",{originalErrorMessage:e?.message});Os.warn(t.message)}}}async function zR(n,e){try{const r=(await JO()).transaction(Kh,"readwrite");await r.objectStore(Kh).put(e,e4(n)),await r.done}catch(t){if(t instanceof Ls)Os.warn(t.message);else{const r=Fo.create("idb-set",{originalErrorMessage:t?.message});Os.warn(r.message)}}}function e4(n){return`${n.name}!${n.options.appId}`}const UY=1024,FY=30;class GY{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HY(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=LR();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>FY){const i=$Y(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Os.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=LR(),{heartbeatsToSend:t,unsentEntries:r}=qY(this._heartbeatsCache.heartbeats),i=B0(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Os.warn(e),""}}}function LR(){return new Date().toISOString().substring(0,10)}function qY(n,e=UY){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),BR(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),BR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class HY{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KO()?N$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await BY(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function BR(n){return B0(JSON.stringify({version:2,heartbeats:n})).length}function $Y(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function YY(n){ud(new vc("platform-logger",e=>new aY(e),"PRIVATE")),ud(new vc("heartbeat",e=>new GY(e),"PRIVATE")),Go(p_,VR,n),Go(p_,VR,"esm2020"),Go("fire-js","")}YY("");var UR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var qo,t4;(function(){var n;function e(C,A){function k(){}k.prototype=A.prototype,C.F=A.prototype,C.prototype=new k,C.prototype.constructor=C,C.D=function(P,L,B){for(var M=Array(arguments.length-2),W=2;W<arguments.length;W++)M[W-2]=arguments[W];return A.prototype[L].apply(P,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,A,k){k||(k=0);const P=Array(16);if(typeof A=="string")for(var L=0;L<16;++L)P[L]=A.charCodeAt(k++)|A.charCodeAt(k++)<<8|A.charCodeAt(k++)<<16|A.charCodeAt(k++)<<24;else for(L=0;L<16;++L)P[L]=A[k++]|A[k++]<<8|A[k++]<<16|A[k++]<<24;A=C.g[0],k=C.g[1],L=C.g[2];let B=C.g[3],M;M=A+(B^k&(L^B))+P[0]+3614090360&4294967295,A=k+(M<<7&4294967295|M>>>25),M=B+(L^A&(k^L))+P[1]+3905402710&4294967295,B=A+(M<<12&4294967295|M>>>20),M=L+(k^B&(A^k))+P[2]+606105819&4294967295,L=B+(M<<17&4294967295|M>>>15),M=k+(A^L&(B^A))+P[3]+3250441966&4294967295,k=L+(M<<22&4294967295|M>>>10),M=A+(B^k&(L^B))+P[4]+4118548399&4294967295,A=k+(M<<7&4294967295|M>>>25),M=B+(L^A&(k^L))+P[5]+1200080426&4294967295,B=A+(M<<12&4294967295|M>>>20),M=L+(k^B&(A^k))+P[6]+2821735955&4294967295,L=B+(M<<17&4294967295|M>>>15),M=k+(A^L&(B^A))+P[7]+4249261313&4294967295,k=L+(M<<22&4294967295|M>>>10),M=A+(B^k&(L^B))+P[8]+1770035416&4294967295,A=k+(M<<7&4294967295|M>>>25),M=B+(L^A&(k^L))+P[9]+2336552879&4294967295,B=A+(M<<12&4294967295|M>>>20),M=L+(k^B&(A^k))+P[10]+4294925233&4294967295,L=B+(M<<17&4294967295|M>>>15),M=k+(A^L&(B^A))+P[11]+2304563134&4294967295,k=L+(M<<22&4294967295|M>>>10),M=A+(B^k&(L^B))+P[12]+1804603682&4294967295,A=k+(M<<7&4294967295|M>>>25),M=B+(L^A&(k^L))+P[13]+4254626195&4294967295,B=A+(M<<12&4294967295|M>>>20),M=L+(k^B&(A^k))+P[14]+2792965006&4294967295,L=B+(M<<17&4294967295|M>>>15),M=k+(A^L&(B^A))+P[15]+1236535329&4294967295,k=L+(M<<22&4294967295|M>>>10),M=A+(L^B&(k^L))+P[1]+4129170786&4294967295,A=k+(M<<5&4294967295|M>>>27),M=B+(k^L&(A^k))+P[6]+3225465664&4294967295,B=A+(M<<9&4294967295|M>>>23),M=L+(A^k&(B^A))+P[11]+643717713&4294967295,L=B+(M<<14&4294967295|M>>>18),M=k+(B^A&(L^B))+P[0]+3921069994&4294967295,k=L+(M<<20&4294967295|M>>>12),M=A+(L^B&(k^L))+P[5]+3593408605&4294967295,A=k+(M<<5&4294967295|M>>>27),M=B+(k^L&(A^k))+P[10]+38016083&4294967295,B=A+(M<<9&4294967295|M>>>23),M=L+(A^k&(B^A))+P[15]+3634488961&4294967295,L=B+(M<<14&4294967295|M>>>18),M=k+(B^A&(L^B))+P[4]+3889429448&4294967295,k=L+(M<<20&4294967295|M>>>12),M=A+(L^B&(k^L))+P[9]+568446438&4294967295,A=k+(M<<5&4294967295|M>>>27),M=B+(k^L&(A^k))+P[14]+3275163606&4294967295,B=A+(M<<9&4294967295|M>>>23),M=L+(A^k&(B^A))+P[3]+4107603335&4294967295,L=B+(M<<14&4294967295|M>>>18),M=k+(B^A&(L^B))+P[8]+1163531501&4294967295,k=L+(M<<20&4294967295|M>>>12),M=A+(L^B&(k^L))+P[13]+2850285829&4294967295,A=k+(M<<5&4294967295|M>>>27),M=B+(k^L&(A^k))+P[2]+4243563512&4294967295,B=A+(M<<9&4294967295|M>>>23),M=L+(A^k&(B^A))+P[7]+1735328473&4294967295,L=B+(M<<14&4294967295|M>>>18),M=k+(B^A&(L^B))+P[12]+2368359562&4294967295,k=L+(M<<20&4294967295|M>>>12),M=A+(k^L^B)+P[5]+4294588738&4294967295,A=k+(M<<4&4294967295|M>>>28),M=B+(A^k^L)+P[8]+2272392833&4294967295,B=A+(M<<11&4294967295|M>>>21),M=L+(B^A^k)+P[11]+1839030562&4294967295,L=B+(M<<16&4294967295|M>>>16),M=k+(L^B^A)+P[14]+4259657740&4294967295,k=L+(M<<23&4294967295|M>>>9),M=A+(k^L^B)+P[1]+2763975236&4294967295,A=k+(M<<4&4294967295|M>>>28),M=B+(A^k^L)+P[4]+1272893353&4294967295,B=A+(M<<11&4294967295|M>>>21),M=L+(B^A^k)+P[7]+4139469664&4294967295,L=B+(M<<16&4294967295|M>>>16),M=k+(L^B^A)+P[10]+3200236656&4294967295,k=L+(M<<23&4294967295|M>>>9),M=A+(k^L^B)+P[13]+681279174&4294967295,A=k+(M<<4&4294967295|M>>>28),M=B+(A^k^L)+P[0]+3936430074&4294967295,B=A+(M<<11&4294967295|M>>>21),M=L+(B^A^k)+P[3]+3572445317&4294967295,L=B+(M<<16&4294967295|M>>>16),M=k+(L^B^A)+P[6]+76029189&4294967295,k=L+(M<<23&4294967295|M>>>9),M=A+(k^L^B)+P[9]+3654602809&4294967295,A=k+(M<<4&4294967295|M>>>28),M=B+(A^k^L)+P[12]+3873151461&4294967295,B=A+(M<<11&4294967295|M>>>21),M=L+(B^A^k)+P[15]+530742520&4294967295,L=B+(M<<16&4294967295|M>>>16),M=k+(L^B^A)+P[2]+3299628645&4294967295,k=L+(M<<23&4294967295|M>>>9),M=A+(L^(k|~B))+P[0]+4096336452&4294967295,A=k+(M<<6&4294967295|M>>>26),M=B+(k^(A|~L))+P[7]+1126891415&4294967295,B=A+(M<<10&4294967295|M>>>22),M=L+(A^(B|~k))+P[14]+2878612391&4294967295,L=B+(M<<15&4294967295|M>>>17),M=k+(B^(L|~A))+P[5]+4237533241&4294967295,k=L+(M<<21&4294967295|M>>>11),M=A+(L^(k|~B))+P[12]+1700485571&4294967295,A=k+(M<<6&4294967295|M>>>26),M=B+(k^(A|~L))+P[3]+2399980690&4294967295,B=A+(M<<10&4294967295|M>>>22),M=L+(A^(B|~k))+P[10]+4293915773&4294967295,L=B+(M<<15&4294967295|M>>>17),M=k+(B^(L|~A))+P[1]+2240044497&4294967295,k=L+(M<<21&4294967295|M>>>11),M=A+(L^(k|~B))+P[8]+1873313359&4294967295,A=k+(M<<6&4294967295|M>>>26),M=B+(k^(A|~L))+P[15]+4264355552&4294967295,B=A+(M<<10&4294967295|M>>>22),M=L+(A^(B|~k))+P[6]+2734768916&4294967295,L=B+(M<<15&4294967295|M>>>17),M=k+(B^(L|~A))+P[13]+1309151649&4294967295,k=L+(M<<21&4294967295|M>>>11),M=A+(L^(k|~B))+P[4]+4149444226&4294967295,A=k+(M<<6&4294967295|M>>>26),M=B+(k^(A|~L))+P[11]+3174756917&4294967295,B=A+(M<<10&4294967295|M>>>22),M=L+(A^(B|~k))+P[2]+718787259&4294967295,L=B+(M<<15&4294967295|M>>>17),M=k+(B^(L|~A))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(L+(M<<21&4294967295|M>>>11))&4294967295,C.g[2]=C.g[2]+L&4294967295,C.g[3]=C.g[3]+B&4294967295}r.prototype.v=function(C,A){A===void 0&&(A=C.length);const k=A-this.blockSize,P=this.C;let L=this.h,B=0;for(;B<A;){if(L==0)for(;B<=k;)i(this,C,B),B+=this.blockSize;if(typeof C=="string"){for(;B<A;)if(P[L++]=C.charCodeAt(B++),L==this.blockSize){i(this,P),L=0;break}}else for(;B<A;)if(P[L++]=C[B++],L==this.blockSize){i(this,P),L=0;break}}this.h=L,this.o+=A},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var k=C.length-8;k<C.length;++k)C[k]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,k=0;k<4;++k)for(let P=0;P<32;P+=8)C[A++]=this.g[k]>>>P&255;return C};function a(C,A){var k=c;return Object.prototype.hasOwnProperty.call(k,C)?k[C]:k[C]=A(C)}function o(C,A){this.h=A;const k=[];let P=!0;for(let L=C.length-1;L>=0;L--){const B=C[L]|0;P&&B==A||(k[L]=B,P=!1)}this.g=k}var c={};function u(C){return-128<=C&&C<128?a(C,function(A){return new o([A|0],A<0?-1:0)}):new o([C|0],C<0?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return p;if(C<0)return S(d(-C));const A=[];let k=1;for(let P=0;C>=k;P++)A[P]=C/k|0,k*=4294967296;return new o(A,0)}function h(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return S(h(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=d(Math.pow(A,8));let P=p;for(let B=0;B<C.length;B+=8){var L=Math.min(8,C.length-B);const M=parseInt(C.substring(B,B+L),A);L<8?(L=d(Math.pow(A,L)),P=P.j(L).add(d(M))):(P=P.j(k),P=P.add(d(M)))}return P}var p=u(0),m=u(1),b=u(16777216);n=o.prototype,n.m=function(){if(E(this))return-S(this).m();let C=0,A=1;for(let k=0;k<this.g.length;k++){const P=this.i(k);C+=(P>=0?P:4294967296+P)*A,A*=4294967296}return C},n.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(_(this))return"0";if(E(this))return"-"+S(this).toString(C);const A=d(Math.pow(C,6));var k=this;let P="";for(;;){const L=O(k,A).g;k=T(k,L.j(A));let B=((k.g.length>0?k.g[0]:k.h)>>>0).toString(C);if(k=L,_(k))return B+P;for(;B.length<6;)B="0"+B;P=B+P}},n.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function _(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function E(C){return C.h==-1}n.l=function(C){return C=T(this,C),E(C)?-1:_(C)?0:1};function S(C){const A=C.g.length,k=[];for(let P=0;P<A;P++)k[P]=~C.g[P];return new o(k,~C.h).add(m)}n.abs=function(){return E(this)?S(this):this},n.add=function(C){const A=Math.max(this.g.length,C.g.length),k=[];let P=0;for(let L=0;L<=A;L++){let B=P+(this.i(L)&65535)+(C.i(L)&65535),M=(B>>>16)+(this.i(L)>>>16)+(C.i(L)>>>16);P=M>>>16,B&=65535,M&=65535,k[L]=M<<16|B}return new o(k,k[k.length-1]&-2147483648?-1:0)};function T(C,A){return C.add(S(A))}n.j=function(C){if(_(this)||_(C))return p;if(E(this))return E(C)?S(this).j(S(C)):S(S(this).j(C));if(E(C))return S(this.j(S(C)));if(this.l(b)<0&&C.l(b)<0)return d(this.m()*C.m());const A=this.g.length+C.g.length,k=[];for(var P=0;P<2*A;P++)k[P]=0;for(P=0;P<this.g.length;P++)for(let L=0;L<C.g.length;L++){const B=this.i(P)>>>16,M=this.i(P)&65535,W=C.i(L)>>>16,Q=C.i(L)&65535;k[2*P+2*L]+=M*Q,I(k,2*P+2*L),k[2*P+2*L+1]+=B*Q,I(k,2*P+2*L+1),k[2*P+2*L+1]+=M*W,I(k,2*P+2*L+1),k[2*P+2*L+2]+=B*W,I(k,2*P+2*L+2)}for(C=0;C<A;C++)k[C]=k[2*C+1]<<16|k[2*C];for(C=A;C<2*A;C++)k[C]=0;return new o(k,0)};function I(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function D(C,A){this.g=C,this.h=A}function O(C,A){if(_(A))throw Error("division by zero");if(_(C))return new D(p,p);if(E(C))return A=O(S(C),A),new D(S(A.g),S(A.h));if(E(A))return A=O(C,S(A)),new D(S(A.g),A.h);if(C.g.length>30){if(E(C)||E(A))throw Error("slowDivide_ only works with positive integers.");for(var k=m,P=A;P.l(C)<=0;)k=z(k),P=z(P);var L=j(k,1),B=j(P,1);for(P=j(P,2),k=j(k,2);!_(P);){var M=B.add(P);M.l(C)<=0&&(L=L.add(k),B=M),P=j(P,1),k=j(k,1)}return A=T(C,L.j(A)),new D(L,A)}for(L=p;C.l(A)>=0;){for(k=Math.max(1,Math.floor(C.m()/A.m())),P=Math.ceil(Math.log(k)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),B=d(k),M=B.j(A);E(M)||M.l(C)>0;)k-=P,B=d(k),M=B.j(A);_(B)&&(B=m),L=L.add(B),C=T(C,M)}return new D(L,C)}n.B=function(C){return O(this,C).h},n.and=function(C){const A=Math.max(this.g.length,C.g.length),k=[];for(let P=0;P<A;P++)k[P]=this.i(P)&C.i(P);return new o(k,this.h&C.h)},n.or=function(C){const A=Math.max(this.g.length,C.g.length),k=[];for(let P=0;P<A;P++)k[P]=this.i(P)|C.i(P);return new o(k,this.h|C.h)},n.xor=function(C){const A=Math.max(this.g.length,C.g.length),k=[];for(let P=0;P<A;P++)k[P]=this.i(P)^C.i(P);return new o(k,this.h^C.h)};function z(C){const A=C.g.length+1,k=[];for(let P=0;P<A;P++)k[P]=C.i(P)<<1|C.i(P-1)>>>31;return new o(k,C.h)}function j(C,A){const k=A>>5;A%=32;const P=C.g.length-k,L=[];for(let B=0;B<P;B++)L[B]=A>0?C.i(B+k)>>>A|C.i(B+k+1)<<32-A:C.i(B+k);return new o(L,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,t4=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,qo=o}).apply(typeof UR<"u"?UR:typeof self<"u"?self:typeof window<"u"?window:{});var Bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var n4,sh,r4,r0,v_,i4,a4,s4;(function(){var n,e=Object.defineProperty;function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bm=="object"&&Bm];for(var R=0;R<v.length;++R){var V=v[R];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=t(this);function i(v,R){if(R)e:{var V=r;v=v.split(".");for(var q=0;q<v.length-1;q++){var oe=v[q];if(!(oe in V))break e;V=V[oe]}v=v[v.length-1],q=V[v],R=R(q),R!=q&&R!=null&&e(V,v,{configurable:!0,writable:!0,value:R})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(R){var V=[],q;for(q in R)Object.prototype.hasOwnProperty.call(R,q)&&V.push([q,R[q]]);return V}});var a=a||{},o=this||self;function c(v){var R=typeof v;return R=="object"&&v!=null||R=="function"}function u(v,R,V){return v.call.apply(v.bind,arguments)}function d(v,R,V){return d=u,d.apply(null,arguments)}function h(v,R){var V=Array.prototype.slice.call(arguments,1);return function(){var q=V.slice();return q.push.apply(q,arguments),v.apply(this,q)}}function p(v,R){function V(){}V.prototype=R.prototype,v.Z=R.prototype,v.prototype=new V,v.prototype.constructor=v,v.Ob=function(q,oe,fe){for(var Re=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)Re[ct-2]=arguments[ct];return R.prototype[oe].apply(q,Re)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function b(v){const R=v.length;if(R>0){const V=Array(R);for(let q=0;q<R;q++)V[q]=v[q];return V}return[]}function _(v,R){for(let q=1;q<arguments.length;q++){const oe=arguments[q];var V=typeof oe;if(V=V!="object"?V:oe?Array.isArray(oe)?"array":V:"null",V=="array"||V=="object"&&typeof oe.length=="number"){V=v.length||0;const fe=oe.length||0;v.length=V+fe;for(let Re=0;Re<fe;Re++)v[V+Re]=oe[Re]}else v.push(oe)}}class E{constructor(R,V){this.i=R,this.j=V,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function S(v){o.setTimeout(()=>{throw v},0)}function T(){var v=C;let R=null;return v.g&&(R=v.g,v.g=v.g.next,v.g||(v.h=null),R.next=null),R}class I{constructor(){this.h=this.g=null}add(R,V){const q=D.get();q.set(R,V),this.h?this.h.next=q:this.g=q,this.h=q}}var D=new E(()=>new O,v=>v.reset());class O{constructor(){this.next=this.g=this.h=null}set(R,V){this.h=R,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let z,j=!1,C=new I,A=()=>{const v=Promise.resolve(void 0);z=()=>{v.then(k)}};function k(){for(var v;v=T();){try{v.h.call(v.g)}catch(V){S(V)}var R=D;R.j(v),R.h<100&&(R.h++,v.next=R.g,R.g=v)}j=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(v,R){this.type=v,this.g=this.target=R,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,R=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const V=()=>{};o.addEventListener("test",V,R),o.removeEventListener("test",V,R)}catch{}return v})();function M(v){return/^[\s\xa0]*$/.test(v)}function W(v,R){L.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,R)}p(W,L),W.prototype.init=function(v,R){const V=this.type=v.type,q=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=R,R=v.relatedTarget,R||(V=="mouseover"?R=v.fromElement:V=="mouseout"&&(R=v.toElement)),this.relatedTarget=R,q?(this.clientX=q.clientX!==void 0?q.clientX:q.pageX,this.clientY=q.clientY!==void 0?q.clientY:q.pageY,this.screenX=q.screenX||0,this.screenY=q.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),$=0;function H(v,R,V,q,oe){this.listener=v,this.proxy=null,this.src=R,this.type=V,this.capture=!!q,this.ha=oe,this.key=++$,this.da=this.fa=!1}function ee(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function ne(v,R,V){for(const q in v)R.call(V,v[q],q,v)}function de(v,R){for(const V in v)R.call(void 0,v[V],V,v)}function U(v){const R={};for(const V in v)R[V]=v[V];return R}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(v,R){let V,q;for(let oe=1;oe<arguments.length;oe++){q=arguments[oe];for(V in q)v[V]=q[V];for(let fe=0;fe<Y.length;fe++)V=Y[fe],Object.prototype.hasOwnProperty.call(q,V)&&(v[V]=q[V])}}function se(v){this.src=v,this.g={},this.h=0}se.prototype.add=function(v,R,V,q,oe){const fe=v.toString();v=this.g[fe],v||(v=this.g[fe]=[],this.h++);const Re=ie(v,R,q,oe);return Re>-1?(R=v[Re],V||(R.fa=!1)):(R=new H(R,this.src,fe,!!q,oe),R.fa=V,v.push(R)),R};function pe(v,R){const V=R.type;if(V in v.g){var q=v.g[V],oe=Array.prototype.indexOf.call(q,R,void 0),fe;(fe=oe>=0)&&Array.prototype.splice.call(q,oe,1),fe&&(ee(R),v.g[V].length==0&&(delete v.g[V],v.h--))}}function ie(v,R,V,q){for(let oe=0;oe<v.length;++oe){const fe=v[oe];if(!fe.da&&fe.listener==R&&fe.capture==!!V&&fe.ha==q)return oe}return-1}var ve="closure_lm_"+(Math.random()*1e6|0),Ae={};function Ie(v,R,V,q,oe){if(Array.isArray(R)){for(let fe=0;fe<R.length;fe++)Ie(v,R[fe],V,q,oe);return null}return V=pt(V),v&&v[Q]?v.J(R,V,c(q)?!!q.capture:!1,oe):ke(v,R,V,!1,q,oe)}function ke(v,R,V,q,oe,fe){if(!R)throw Error("Invalid event type");const Re=c(oe)?!!oe.capture:!!oe;let ct=Pe(v);if(ct||(v[ve]=ct=new se(v)),V=ct.add(R,V,q,Re,fe),V.proxy)return V;if(q=xe(),V.proxy=q,q.src=v,q.listener=V,v.addEventListener)B||(oe=Re),oe===void 0&&(oe=!1),v.addEventListener(R.toString(),q,oe);else if(v.attachEvent)v.attachEvent(je(R.toString()),q);else if(v.addListener&&v.removeListener)v.addListener(q);else throw Error("addEventListener and attachEvent are unavailable.");return V}function xe(){function v(V){return R.call(v.src,v.listener,V)}const R=Le;return v}function Ee(v,R,V,q,oe){if(Array.isArray(R))for(var fe=0;fe<R.length;fe++)Ee(v,R[fe],V,q,oe);else q=c(q)?!!q.capture:!!q,V=pt(V),v&&v[Q]?(v=v.i,fe=String(R).toString(),fe in v.g&&(R=v.g[fe],V=ie(R,V,q,oe),V>-1&&(ee(R[V]),Array.prototype.splice.call(R,V,1),R.length==0&&(delete v.g[fe],v.h--)))):v&&(v=Pe(v))&&(R=v.g[R.toString()],v=-1,R&&(v=ie(R,V,q,oe)),(V=v>-1?R[v]:null)&&Xe(V))}function Xe(v){if(typeof v!="number"&&v&&!v.da){var R=v.src;if(R&&R[Q])pe(R.i,v);else{var V=v.type,q=v.proxy;R.removeEventListener?R.removeEventListener(V,q,v.capture):R.detachEvent?R.detachEvent(je(V),q):R.addListener&&R.removeListener&&R.removeListener(q),(V=Pe(R))?(pe(V,v),V.h==0&&(V.src=null,R[ve]=null)):ee(v)}}}function je(v){return v in Ae?Ae[v]:Ae[v]="on"+v}function Le(v,R){if(v.da)v=!0;else{R=new W(R,this);const V=v.listener,q=v.ha||v.src;v.fa&&Xe(v),v=V.call(q,R)}return v}function Pe(v){return v=v[ve],v instanceof se?v:null}var nt="__closure_events_fn_"+(Math.random()*1e9>>>0);function pt(v){return typeof v=="function"?v:(v[nt]||(v[nt]=function(R){return v.handleEvent(R)}),v[nt])}function Ve(){P.call(this),this.i=new se(this),this.M=this,this.G=null}p(Ve,P),Ve.prototype[Q]=!0,Ve.prototype.removeEventListener=function(v,R,V,q){Ee(this,v,R,V,q)};function Ye(v,R){var V,q=v.G;if(q)for(V=[];q;q=q.G)V.push(q);if(v=v.M,q=R.type||R,typeof R=="string")R=new L(R,v);else if(R instanceof L)R.target=R.target||v;else{var oe=R;R=new L(q,v),te(R,oe)}oe=!0;let fe,Re;if(V)for(Re=V.length-1;Re>=0;Re--)fe=R.g=V[Re],oe=Pt(fe,q,!0,R)&&oe;if(fe=R.g=v,oe=Pt(fe,q,!0,R)&&oe,oe=Pt(fe,q,!1,R)&&oe,V)for(Re=0;Re<V.length;Re++)fe=R.g=V[Re],oe=Pt(fe,q,!1,R)&&oe}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var v=this.i;for(const R in v.g){const V=v.g[R];for(let q=0;q<V.length;q++)ee(V[q]);delete v.g[R],v.h--}}this.G=null},Ve.prototype.J=function(v,R,V,q){return this.i.add(String(v),R,!1,V,q)},Ve.prototype.K=function(v,R,V,q){return this.i.add(String(v),R,!0,V,q)};function Pt(v,R,V,q){if(R=v.i.g[String(R)],!R)return!0;R=R.concat();let oe=!0;for(let fe=0;fe<R.length;++fe){const Re=R[fe];if(Re&&!Re.da&&Re.capture==V){const ct=Re.listener,Tn=Re.ha||Re.src;Re.fa&&pe(v.i,Re),oe=ct.call(Tn,q)!==!1&&oe}}return oe&&!q.defaultPrevented}function En(v,R){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=d(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:o.setTimeout(v,R||0)}function dn(v){v.g=En(()=>{v.g=null,v.i&&(v.i=!1,dn(v))},v.l);const R=v.h;v.h=null,v.m.apply(null,R)}class mt extends P{constructor(R,V){super(),this.m=R,this.l=V,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:dn(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vt(v){P.call(this),this.h=v,this.g={}}p(Vt,P);var yr=[];function br(v){ne(v.g,function(R,V){this.g.hasOwnProperty(V)&&Xe(R)},v),v.g={}}Vt.prototype.N=function(){Vt.Z.N.call(this),br(this)},Vt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ti=o.JSON.stringify,qs=o.JSON.parse,Be=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function Ke(){}function Gi(){}var qt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){L.call(this,"d")}p(Jt,L);function Sn(){L.call(this,"c")}p(Sn,L);var Dt={},Ct=null;function or(){return Ct=Ct||new Ve}Dt.Ia="serverreachability";function fn(v){L.call(this,Dt.Ia,v)}p(fn,L);function Ze(v){const R=or();Ye(R,new fn(R))}Dt.STAT_EVENT="statevent";function Ot(v,R){L.call(this,Dt.STAT_EVENT,v),this.stat=R}p(Ot,L);function Tt(v){const R=or();Ye(R,new Ot(R,v))}Dt.Ja="timingevent";function jt(v,R){L.call(this,Dt.Ja,v),this.size=R}p(jt,L);function Dn(v,R){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},R)}function vn(){this.g=!0}vn.prototype.ua=function(){this.g=!1};function Oc(v,R,V,q,oe,fe){v.info(function(){if(v.g)if(fe){var Re="",ct=fe.split("&");for(let kt=0;kt<ct.length;kt++){var Tn=ct[kt].split("=");if(Tn.length>1){const an=Tn[0];Tn=Tn[1];const xi=an.split("_");Re=xi.length>=2&&xi[1]=="type"?Re+(an+"="+Tn+"&"):Re+(an+"=redacted&")}}}else Re=null;else Re=fe;return"XMLHTTP REQ ("+q+") [attempt "+oe+"]: "+R+`
`+V+`
`+Re})}function es(v,R,V,q,oe,fe,Re){v.info(function(){return"XMLHTTP RESP ("+q+") [ attempt "+oe+"]: "+R+`
`+V+`
`+fe+" "+Re})}function Lr(v,R,V,q){v.info(function(){return"XMLHTTP TEXT ("+R+"): "+fy(v,V)+(q?" "+q:"")})}function mi(v,R){v.info(function(){return"TIMEOUT: "+R})}vn.prototype.info=function(){};function fy(v,R){if(!v.g)return R;if(!R)return null;try{const fe=JSON.parse(R);if(fe){for(v=0;v<fe.length;v++)if(Array.isArray(fe[v])){var V=fe[v];if(!(V.length<2)){var q=V[1];if(Array.isArray(q)&&!(q.length<1)){var oe=q[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(let Re=1;Re<q.length;Re++)q[Re]=""}}}}return ti(fe)}catch{return R}}var ul={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Hd;function dl(){}p(dl,Ke),dl.prototype.g=function(){return new XMLHttpRequest},Hd=new dl;function ts(v){return encodeURIComponent(String(v))}function Wp(v){var R=1;v=v.split(":");const V=[];for(;R>0&&v.length;)V.push(v.shift()),R--;return v.length&&V.push(v.join(":")),V}function qi(v,R,V,q){this.j=v,this.i=R,this.l=V,this.S=q||1,this.V=new Vt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Hi}function Hi(){this.i=null,this.g="",this.h=!1}var kn={},tr={};function ga(v,R,V){v.M=1,v.A=fl(Mn(R)),v.u=V,v.R=!0,Vc(v,null)}function Vc(v,R){v.F=Date.now(),ma(v),v.B=Mn(v.A);var V=v.B,q=v.S;Array.isArray(q)||(q=[String(q)]),Bc(V.i,"t",q),v.C=0,V=v.j.L,v.h=new Hi,v.g=dg(v.j,V?R:null,!v.u),v.P>0&&(v.O=new mt(d(v.Y,v,v.g),v.P)),R=v.V,V=v.g,q=v.ba;var oe="readystatechange";Array.isArray(oe)||(oe&&(yr[0]=oe.toString()),oe=yr);for(let fe=0;fe<oe.length;fe++){const Re=Ie(V,oe[fe],q||R.handleEvent,!1,R.h||R);if(!Re)break;R.g[Re.key]=Re}R=v.J?U(v.J):{},v.u?(v.v||(v.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,R)):(v.v="GET",v.g.ea(v.B,v.v,null,R)),Ze(),Oc(v.i,v.v,v.B,v.l,v.S,v.u)}qi.prototype.ba=function(v){v=v.target;const R=this.O;R&&Ki(v)==3?R.j():this.Y(v)},qi.prototype.Y=function(v){try{if(v==this.g)e:{const ct=Ki(this.g),Tn=this.g.ya(),kt=this.g.ca();if(!(ct<3)&&(ct!=3||this.g&&(this.h.h||this.g.la()||lr(this.g)))){this.K||ct!=4||Tn==7||(Tn==8||kt<=0?Ze(3):Ze(2)),va(this);var R=this.g.ca();this.X=R;var V=hy(this);if(this.o=R==200,es(this.i,this.v,this.B,this.l,this.S,ct,R),this.o){if(this.U&&!this.L){t:{if(this.g){var q,oe=this.g;if((q=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(q)){var fe=q;break t}}fe=null}if(v=fe)Lr(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ya(this,v);else{this.o=!1,this.m=3,Tt(12),ni(this),vi(this);break e}}if(this.R){v=!0;let an;for(;!this.K&&this.C<V.length;)if(an=Zp(this,V),an==tr){ct==4&&(this.m=4,Tt(14),v=!1),Lr(this.i,this.l,null,"[Incomplete Response]");break}else if(an==kn){this.m=4,Tt(15),Lr(this.i,this.l,V,"[Invalid Chunk]"),v=!1;break}else Lr(this.i,this.l,an,null),ya(this,an);if(Qp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||V.length!=0||this.h.h||(this.m=1,Tt(16),v=!1),this.o=this.o&&v,!v)Lr(this.i,this.l,V,"[Invalid Chunked Response]"),ni(this),vi(this);else if(V.length>0&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.aa&&!Re.P&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),of(Re),Re.P=!0,Tt(11))}}else Lr(this.i,this.l,V,null),ya(this,V);ct==4&&ni(this),this.o&&!this.K&&(ct==4?og(this.j,this):(this.o=!1,ma(this)))}else rs(this.g),R==400&&V.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),ni(this),vi(this)}}}catch{}finally{}};function hy(v){if(!Qp(v))return v.g.la();const R=lr(v.g);if(R==="")return"";let V="";const q=R.length,oe=Ki(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return ni(v),vi(v),"";v.h.i=new o.TextDecoder}for(let fe=0;fe<q;fe++)v.h.h=!0,V+=v.h.i.decode(R[fe],{stream:!(oe&&fe==q-1)});return R.length=0,v.h.g+=V,v.C=0,v.h.g}function Qp(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function Zp(v,R){var V=v.C,q=R.indexOf(`
`,V);return q==-1?tr:(V=Number(R.substring(V,q)),isNaN(V)?kn:(q+=1,q+V>R.length?tr:(R=R.slice(q,q+V),v.C=q+V,R)))}qi.prototype.cancel=function(){this.K=!0,ni(this)};function ma(v){v.T=Date.now()+v.H,jc(v,v.H)}function jc(v,R){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Dn(d(v.aa,v),R)}function va(v){v.D&&(o.clearTimeout(v.D),v.D=null)}qi.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(mi(this.i,this.B),this.M!=2&&(Ze(),Tt(17)),ni(this),this.m=2,vi(this)):jc(this,this.T-v)};function vi(v){v.j.I==0||v.K||og(v.j,v)}function ni(v){va(v);var R=v.O;R&&typeof R.dispose=="function"&&R.dispose(),v.O=null,br(v.V),v.g&&(R=v.g,v.g=null,R.abort(),R.dispose())}function ya(v,R){try{var V=v.j;if(V.I!=0&&(V.g==v||xa(V.h,v))){if(!v.L&&xa(V.h,v)&&V.I==3){try{var q=V.Ba.g.parse(R)}catch{q=null}if(Array.isArray(q)&&q.length==3){var oe=q;if(oe[0]==0){e:if(!V.v){if(V.g)if(V.g.F+3e3<v.F)Hc(V),Zs(V);else break e;bl(V),Tt(18)}}else V.xa=oe[1],0<V.xa-V.K&&oe[2]<37500&&V.F&&V.A==0&&!V.C&&(V.C=Dn(d(V.Va,V),6e3));ba(V.h)<=1&&V.ta&&(V.ta=void 0)}else Aa(V,11)}else if((v.L||V.g==v)&&Hc(V),!M(R))for(oe=V.Ba.g.parse(R),R=0;R<oe.length;R++){let kt=oe[R];const an=kt[0];if(!(an<=V.K))if(V.K=an,kt=kt[1],V.I==2)if(kt[0]=="c"){V.M=kt[1],V.ba=kt[2];const xi=kt[3];xi!=null&&(V.ka=xi,V.j.info("VER="+V.ka));const Ca=kt[4];Ca!=null&&(V.za=Ca,V.j.info("SVER="+V.za));const Xi=kt[5];Xi!=null&&typeof Xi=="number"&&Xi>0&&(q=1.5*Xi,V.O=q,V.j.info("backChannelRequestTimeoutMs_="+q)),q=V;const Wi=v.g;if(Wi){const xl=Wi.g?Wi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xl){var fe=q.h;fe.g||xl.indexOf("spdy")==-1&&xl.indexOf("quic")==-1&&xl.indexOf("h2")==-1||(fe.j=fe.l,fe.g=new Set,fe.h&&(Kd(fe,fe.h),fe.h=null))}if(q.G){const $c=Wi.g?Wi.g.getResponseHeader("X-HTTP-Session-Id"):null;$c&&(q.wa=$c,zt(q.J,q.G,$c))}}V.I=3,V.l&&V.l.ra(),V.aa&&(V.T=Date.now()-v.F,V.j.info("Handshake RTT: "+V.T+"ms")),q=V;var Re=v;if(q.na=ug(q,q.L?q.ba:null,q.W),Re.L){Xd(q.h,Re);var ct=Re,Tn=q.O;Tn&&(ct.H=Tn),ct.D&&(va(ct),ma(ct)),q.g=Re}else ag(q);V.i.length>0&&Ta(V)}else kt[0]!="stop"&&kt[0]!="close"||Aa(V,7);else V.I==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?Aa(V,7):af(V):kt[0]!="noop"&&V.l&&V.l.qa(kt),V.A=0)}}Ze(4)}catch{}}var Nn=class{constructor(v,R){this.g=v,this.map=R}};function $d(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yd(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function ba(v){return v.h?1:v.g?v.g.size:0}function xa(v,R){return v.h?v.h==R:v.g?v.g.has(R):!1}function Kd(v,R){v.g?v.g.add(R):v.h=R}function Xd(v,R){v.h&&v.h==R?v.h=null:v.g&&v.g.has(R)&&v.g.delete(R)}$d.prototype.cancel=function(){if(this.i=Wd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Wd(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let R=v.i;for(const V of v.g.values())R=R.concat(V.G);return R}return b(v.i)}var Jp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zc(v,R){if(v){v=v.split("&");for(let V=0;V<v.length;V++){const q=v[V].indexOf("=");let oe,fe=null;q>=0?(oe=v[V].substring(0,q),fe=v[V].substring(q+1)):oe=v[V],R(oe,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function ri(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;v instanceof ri?(this.l=v.l,nr(this,v.j),this.o=v.o,this.g=v.g,Hs(this,v.u),this.h=v.h,Qd(this,rg(v.i)),this.m=v.m):v&&(R=String(v).match(Jp))?(this.l=!1,nr(this,R[1]||"",!0),this.o=_a(R[2]||""),this.g=_a(R[3]||"",!0),Hs(this,R[4]),this.h=_a(R[5]||"",!0),Qd(this,R[6]||"",!0),this.m=_a(R[7]||"")):(this.l=!1,this.i=new Ys(null,this.l))}ri.prototype.toString=function(){const v=[];var R=this.j;R&&v.push(hl(R,Lc,!0),":");var V=this.g;return(V||R=="file")&&(v.push("//"),(R=this.o)&&v.push(hl(R,Lc,!0),"@"),v.push(ts(V).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.u,V!=null&&v.push(":",String(V))),(V=this.h)&&(this.g&&V.charAt(0)!="/"&&v.push("/"),v.push(hl(V,V.charAt(0)=="/"?Zd:eg,!0))),(V=this.i.toString())&&v.push("?",V),(V=this.m)&&v.push("#",hl(V,tg)),v.join("")},ri.prototype.resolve=function(v){const R=Mn(this);let V=!!v.j;V?nr(R,v.j):V=!!v.o,V?R.o=v.o:V=!!v.g,V?R.g=v.g:V=v.u!=null;var q=v.h;if(V)Hs(R,v.u);else if(V=!!v.h){if(q.charAt(0)!="/")if(this.g&&!this.h)q="/"+q;else{var oe=R.h.lastIndexOf("/");oe!=-1&&(q=R.h.slice(0,oe+1)+q)}if(oe=q,oe==".."||oe==".")q="";else if(oe.indexOf("./")!=-1||oe.indexOf("/.")!=-1){q=oe.lastIndexOf("/",0)==0,oe=oe.split("/");const fe=[];for(let Re=0;Re<oe.length;){const ct=oe[Re++];ct=="."?q&&Re==oe.length&&fe.push(""):ct==".."?((fe.length>1||fe.length==1&&fe[0]!="")&&fe.pop(),q&&Re==oe.length&&fe.push("")):(fe.push(ct),q=!0)}q=fe.join("/")}else q=oe}return V?R.h=q:V=v.i.toString()!=="",V?Qd(R,rg(v.i)):V=!!v.m,V&&(R.m=v.m),R};function Mn(v){return new ri(v)}function nr(v,R,V){v.j=V?_a(R,!0):R,v.j&&(v.j=v.j.replace(/:$/,""))}function Hs(v,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);v.u=R}else v.u=null}function Qd(v,R,V){R instanceof Ys?(v.i=R,Uc(v.i,v.l)):(V||(R=hl(R,$s)),v.i=new Ys(R,v.l))}function zt(v,R,V){v.i.set(R,V)}function fl(v){return zt(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function _a(v,R){return v?R?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function hl(v,R,V){return typeof v=="string"?(v=encodeURI(v).replace(R,Br),V&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Br(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Lc=/[#\/\?@]/g,eg=/[#\?:]/g,Zd=/[#\?]/g,$s=/[#\?@]/g,tg=/#/g;function Ys(v,R){this.h=this.g=null,this.i=v||null,this.j=!!R}function Ur(v){v.g||(v.g=new Map,v.h=0,v.i&&zc(v.i,function(R,V){v.add(decodeURIComponent(R.replace(/\+/g," ")),V)}))}n=Ys.prototype,n.add=function(v,R){Ur(this),this.i=null,v=Ks(this,v);let V=this.g.get(v);return V||this.g.set(v,V=[]),V.push(R),this.h+=1,this};function ng(v,R){Ur(v),R=Ks(v,R),v.g.has(R)&&(v.i=null,v.h-=v.g.get(R).length,v.g.delete(R))}function Jd(v,R){return Ur(v),R=Ks(v,R),v.g.has(R)}n.forEach=function(v,R){Ur(this),this.g.forEach(function(V,q){V.forEach(function(oe){v.call(R,oe,q,this)},this)},this)};function ef(v,R){Ur(v);let V=[];if(typeof R=="string")Jd(v,R)&&(V=V.concat(v.g.get(Ks(v,R))));else for(v=Array.from(v.g.values()),R=0;R<v.length;R++)V=V.concat(v[R]);return V}n.set=function(v,R){return Ur(this),this.i=null,v=Ks(this,v),Jd(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[R]),this.h+=1,this},n.get=function(v,R){return v?(v=ef(this,v),v.length>0?String(v[0]):R):R};function Bc(v,R,V){ng(v,R),V.length>0&&(v.i=null,v.g.set(Ks(v,R),b(V)),v.h+=V.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],R=Array.from(this.g.keys());for(let q=0;q<R.length;q++){var V=R[q];const oe=ts(V);V=ef(this,V);for(let fe=0;fe<V.length;fe++){let Re=oe;V[fe]!==""&&(Re+="="+ts(V[fe])),v.push(Re)}}return this.i=v.join("&")};function rg(v){const R=new Ys;return R.i=v.i,v.g&&(R.g=new Map(v.g),R.h=v.h),R}function Ks(v,R){return R=String(R),v.j&&(R=R.toLowerCase()),R}function Uc(v,R){R&&!v.j&&(Ur(v),v.i=null,v.g.forEach(function(V,q){const oe=q.toLowerCase();q!=oe&&(ng(this,q),Bc(this,oe,V))},v)),v.j=R}function $i(v,R){const V=new vn;if(o.Image){const q=new Image;q.onload=h(yi,V,"TestLoadImage: loaded",!0,R,q),q.onerror=h(yi,V,"TestLoadImage: error",!1,R,q),q.onabort=h(yi,V,"TestLoadImage: abort",!1,R,q),q.ontimeout=h(yi,V,"TestLoadImage: timeout",!1,R,q),o.setTimeout(function(){q.ontimeout&&q.ontimeout()},1e4),q.src=v}else R(!1)}function tf(v,R){const V=new vn,q=new AbortController,oe=setTimeout(()=>{q.abort(),yi(V,"TestPingServer: timeout",!1,R)},1e4);fetch(v,{signal:q.signal}).then(fe=>{clearTimeout(oe),fe.ok?yi(V,"TestPingServer: ok",!0,R):yi(V,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(oe),yi(V,"TestPingServer: error",!1,R)})}function yi(v,R,V,q,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),q(V)}catch{}}function Xs(){this.g=new Be}function wa(v){this.i=v.Sb||null,this.h=v.ab||!1}p(wa,Ke),wa.prototype.g=function(){return new pl(this.i,this.h)};function pl(v,R){Ve.call(this),this.H=v,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(pl,Ve),n=pl.prototype,n.open=function(v,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=R,this.readyState=1,Yi(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(R.body=v),(this.H||o).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ws(this)),this.readyState=0},n.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fc(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fc(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}n.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var R=v.value?v.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!v.done}))&&(this.response=this.responseText+=R)}v.done?Ws(this):Yi(this),this.readyState==3&&Fc(this)}},n.Oa=function(v){this.g&&(this.response=this.responseText=v,Ws(this))},n.Na=function(v){this.g&&(this.response=v,Ws(this))},n.ga=function(){this.g&&Ws(this)};function Ws(v){v.readyState=4,v.l=null,v.j=null,v.B=null,Yi(v)}n.setRequestHeader=function(v,R){this.A.append(v,R)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],R=this.h.entries();for(var V=R.next();!V.done;)V=V.value,v.push(V[0]+": "+V[1]),V=R.next();return v.join(`\r
`)};function Yi(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function bi(v){let R="";return ne(v,function(V,q){R+=q,R+=":",R+=V,R+=`\r
`}),R}function gl(v,R,V){e:{for(q in V){var q=!1;break e}q=!0}q||(V=bi(V),typeof v=="string"?V!=null&&ts(V):zt(v,R,V))}function Ht(v){Ve.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ht,Ve);var Ea=/^https?$/i,nf=["POST","PUT"];n=Ht.prototype,n.Fa=function(v){this.H=v},n.ea=function(v,R,V,q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);R=R?R.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Hd.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(R,String(v),!0),this.B=!1}catch(fe){ml(this,fe);return}if(v=V||"",V=new Map(this.headers),q)if(Object.getPrototypeOf(q)===Object.prototype)for(var oe in q)V.set(oe,q[oe]);else if(typeof q.keys=="function"&&typeof q.get=="function")for(const fe of q.keys())V.set(fe,q.get(fe));else throw Error("Unknown input type for opt_headers: "+String(q));q=Array.from(V.keys()).find(fe=>fe.toLowerCase()=="content-type"),oe=o.FormData&&v instanceof o.FormData,!(Array.prototype.indexOf.call(nf,R,void 0)>=0)||q||oe||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[fe,Re]of V)this.g.setRequestHeader(fe,Re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(fe){ml(this,fe)}};function ml(v,R){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=R,v.o=5,rf(v),ns(v)}function rf(v){v.A||(v.A=!0,Ye(v,"complete"),Ye(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,Ye(this,"complete"),Ye(this,"abort"),ns(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ns(this,!0)),Ht.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?vl(this):this.Xa())},n.Xa=function(){vl(this)};function vl(v){if(v.h&&typeof a<"u"){if(v.v&&Ki(v)==4)setTimeout(v.Ca.bind(v),0);else if(Ye(v,"readystatechange"),Ki(v)==4){v.h=!1;try{const fe=v.ca();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var V;if(!(V=R)){var q;if(q=fe===0){let Re=String(v.D).match(Jp)[1]||null;!Re&&o.self&&o.self.location&&(Re=o.self.location.protocol.slice(0,-1)),q=!Ea.test(Re?Re.toLowerCase():"")}V=q}if(V)Ye(v,"complete"),Ye(v,"success");else{v.o=6;try{var oe=Ki(v)>2?v.g.statusText:""}catch{oe=""}v.l=oe+" ["+v.ca()+"]",rf(v)}}finally{ns(v)}}}}function ns(v,R){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const V=v.g;v.g=null,R||Ye(v,"ready");try{V.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ki(v){return v.g?v.g.readyState:0}n.ca=function(){try{return Ki(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(v){if(this.g){var R=this.g.responseText;return v&&R.indexOf(v)==0&&(R=R.substring(v.length)),qs(R)}};function lr(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function rs(v){const R={};v=(v.g&&Ki(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let q=0;q<v.length;q++){if(M(v[q]))continue;var V=Wp(v[q]);const oe=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const fe=R[oe]||[];R[oe]=fe,fe.push(V)}de(R,function(q){return q.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(v,R,V){return V&&V.internalChannelParams&&V.internalChannelParams[v]||R}function Qs(v){this.za=0,this.i=[],this.j=new vn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sa("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sa("baseRetryDelayMs",5e3,v),this.Za=Sa("retryDelaySeedMs",1e4,v),this.Ta=Sa("forwardChannelMaxRetries",2,v),this.va=Sa("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new $d(v&&v.concurrentRequestLimit),this.Ba=new Xs,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Qs.prototype,n.ka=8,n.I=1,n.connect=function(v,R,V,q){Tt(0),this.W=v,this.H=R||{},V&&q!==void 0&&(this.H.OSID=V,this.H.OAID=q),this.F=this.X,this.J=ug(this,null,this.W),Ta(this)};function af(v){if(Gc(v),v.I==3){var R=v.V++,V=Mn(v.J);if(zt(V,"SID",v.M),zt(V,"RID",R),zt(V,"TYPE","terminate"),yl(v,V),R=new qi(v,v.j,R),R.M=2,R.A=fl(Mn(V)),V=!1,o.navigator&&o.navigator.sendBeacon)try{V=o.navigator.sendBeacon(R.A.toString(),"")}catch{}!V&&o.Image&&(new Image().src=R.A,V=!0),V||(R.g=dg(R.j,null),R.g.ea(R.A)),R.F=Date.now(),ma(R)}cg(v)}function Zs(v){v.g&&(of(v),v.g.cancel(),v.g=null)}function Gc(v){Zs(v),v.v&&(o.clearTimeout(v.v),v.v=null),Hc(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&o.clearTimeout(v.m),v.m=null)}function Ta(v){if(!Yd(v.h)&&!v.m){v.m=!0;var R=v.Ea;z||A(),j||(z(),j=!0),C.add(R,v),v.D=0}}function qc(v,R){return ba(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=R.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Dn(d(v.Ea,v,R),lg(v,v.D)),v.D++,!0)}n.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const oe=new qi(this,this.j,v);let fe=this.o;if(this.U&&(fe?(fe=U(fe),te(fe,this.U)):fe=this.U),this.u!==null||this.R||(oe.J=fe,fe=null),this.S)e:{for(var R=0,V=0;V<this.i.length;V++){t:{var q=this.i[V];if("__data__"in q.map&&(q=q.map.__data__,typeof q=="string")){q=q.length;break t}q=void 0}if(q===void 0)break;if(R+=q,R>4096){R=V;break e}if(R===4096||V===this.i.length-1){R=V+1;break e}}R=1e3}else R=1e3;R=ig(this,oe,R),V=Mn(this.J),zt(V,"RID",v),zt(V,"CVER",22),this.G&&zt(V,"X-HTTP-Session-Id",this.G),yl(this,V),fe&&(this.R?R="headers="+ts(bi(fe))+"&"+R:this.u&&gl(V,this.u,fe)),Kd(this.h,oe),this.Ra&&zt(V,"TYPE","init"),this.S?(zt(V,"$req",R),zt(V,"SID","null"),oe.U=!0,ga(oe,V,null)):ga(oe,V,R),this.I=2}}else this.I==3&&(v?sf(this,v):this.i.length==0||Yd(this.h)||sf(this))};function sf(v,R){var V;R?V=R.l:V=v.V++;const q=Mn(v.J);zt(q,"SID",v.M),zt(q,"RID",V),zt(q,"AID",v.K),yl(v,q),v.u&&v.o&&gl(q,v.u,v.o),V=new qi(v,v.j,V,v.D+1),v.u===null&&(V.J=v.o),R&&(v.i=R.G.concat(v.i)),R=ig(v,V,1e3),V.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Kd(v.h,V),ga(V,q,R)}function yl(v,R){v.H&&ne(v.H,function(V,q){zt(R,q,V)}),v.l&&ne({},function(V,q){zt(R,q,V)})}function ig(v,R,V){V=Math.min(v.i.length,V);const q=v.l?d(v.l.Ka,v.l,v):null;e:{var oe=v.i;let ct=-1;for(;;){const Tn=["count="+V];ct==-1?V>0?(ct=oe[0].g,Tn.push("ofs="+ct)):ct=0:Tn.push("ofs="+ct);let kt=!0;for(let an=0;an<V;an++){var fe=oe[an].g;const xi=oe[an].map;if(fe-=ct,fe<0)ct=Math.max(0,oe[an].g-100),kt=!1;else try{fe="req"+fe+"_"||"";try{var Re=xi instanceof Map?xi:Object.entries(xi);for(const[Ca,Xi]of Re){let Wi=Xi;c(Xi)&&(Wi=ti(Xi)),Tn.push(fe+Ca+"="+encodeURIComponent(Wi))}}catch(Ca){throw Tn.push(fe+"type="+encodeURIComponent("_badmap")),Ca}}catch{q&&q(xi)}}if(kt){Re=Tn.join("&");break e}}Re=void 0}return v=v.i.splice(0,V),R.G=v,Re}function ag(v){if(!v.g&&!v.v){v.Y=1;var R=v.Da;z||A(),j||(z(),j=!0),C.add(R,v),v.A=0}}function bl(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Dn(d(v.Da,v),lg(v,v.A)),v.A++,!0)}n.Da=function(){if(this.v=null,sg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Dn(d(this.Wa,this),v)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Zs(this),sg(this))};function of(v){v.B!=null&&(o.clearTimeout(v.B),v.B=null)}function sg(v){v.g=new qi(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var R=Mn(v.na);zt(R,"RID","rpc"),zt(R,"SID",v.M),zt(R,"AID",v.K),zt(R,"CI",v.F?"0":"1"),!v.F&&v.ia&&zt(R,"TO",v.ia),zt(R,"TYPE","xmlhttp"),yl(v,R),v.u&&v.o&&gl(R,v.u,v.o),v.O&&(v.g.H=v.O);var V=v.g;v=v.ba,V.M=1,V.A=fl(Mn(R)),V.u=null,V.R=!0,Vc(V,v)}n.Va=function(){this.C!=null&&(this.C=null,Zs(this),bl(this),Tt(19))};function Hc(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function og(v,R){var V=null;if(v.g==R){Hc(v),of(v),v.g=null;var q=2}else if(xa(v.h,R))V=R.G,Xd(v.h,R),q=1;else return;if(v.I!=0){if(R.o)if(q==1){V=R.u?R.u.length:0,R=Date.now()-R.F;var oe=v.D;q=or(),Ye(q,new jt(q,V)),Ta(v)}else ag(v);else if(oe=R.m,oe==3||oe==0&&R.X>0||!(q==1&&qc(v,R)||q==2&&bl(v)))switch(V&&V.length>0&&(R=v.h,R.i=R.i.concat(V)),oe){case 1:Aa(v,5);break;case 4:Aa(v,10);break;case 3:Aa(v,6);break;default:Aa(v,2)}}}function lg(v,R){let V=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(V*=2),V*R}function Aa(v,R){if(v.j.info("Error code "+R),R==2){var V=d(v.bb,v),q=v.Ua;const oe=!q;q=new ri(q||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||nr(q,"https"),fl(q),oe?$i(q.toString(),V):tf(q.toString(),V)}else Tt(2);v.I=0,v.l&&v.l.pa(R),cg(v),Gc(v)}n.bb=function(v){v?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function cg(v){if(v.I=0,v.ja=[],v.l){const R=Wd(v.h);(R.length!=0||v.i.length!=0)&&(_(v.ja,R),_(v.ja,v.i),v.h.i.length=0,b(v.i),v.i.length=0),v.l.oa()}}function ug(v,R,V){var q=V instanceof ri?Mn(V):new ri(V);if(q.g!="")R&&(q.g=R+"."+q.g),Hs(q,q.u);else{var oe=o.location;q=oe.protocol,R=R?R+"."+oe.hostname:oe.hostname,oe=+oe.port;const fe=new ri(null);q&&nr(fe,q),R&&(fe.g=R),oe&&Hs(fe,oe),V&&(fe.h=V),q=fe}return V=v.G,R=v.wa,V&&R&&zt(q,V,R),zt(q,"VER",v.ka),yl(v,q),q}function dg(v,R,V){if(R&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=v.Aa&&!v.ma?new Ht(new wa({ab:V})):new Ht(v.ma),R.Fa(v.L),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fg(){}n=fg.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Js(){}Js.prototype.g=function(v,R){return new Rr(v,R)};function Rr(v,R){Ve.call(this),this.g=new Qs(R),this.l=v,this.h=R&&R.messageUrlParams||null,v=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(v?v["X-WebChannel-Content-Type"]=R.messageContentType:v={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(v?v["X-WebChannel-Client-Profile"]=R.sa:v={"X-WebChannel-Client-Profile":R.sa}),this.g.U=v,(v=R&&R.Qb)&&!M(v)&&(this.g.u=v),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!M(R)&&(this.g.G=R,v=this.h,v!==null&&R in v&&(v=this.h,R in v&&delete v[R])),this.j=new is(this)}p(Rr,Ve),Rr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rr.prototype.close=function(){af(this.g)},Rr.prototype.o=function(v){var R=this.g;if(typeof v=="string"){var V={};V.__data__=v,v=V}else this.v&&(V={},V.__data__=ti(v),v=V);R.i.push(new Nn(R.Ya++,v)),R.I==3&&Ta(R)},Rr.prototype.N=function(){this.g.l=null,delete this.j,af(this.g),delete this.g,Rr.Z.N.call(this)};function hg(v){Jt.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var R=v.__sm__;if(R){e:{for(const V in R){v=V;break e}v=void 0}(this.i=v)&&(v=this.i,R=R!==null&&v in R?R[v]:void 0),this.data=R}else this.data=v}p(hg,Jt);function pg(){Sn.call(this),this.status=1}p(pg,Sn);function is(v){this.g=v}p(is,fg),is.prototype.ra=function(){Ye(this.g,"a")},is.prototype.qa=function(v){Ye(this.g,new hg(v))},is.prototype.pa=function(v){Ye(this.g,new pg)},is.prototype.oa=function(){Ye(this.g,"b")},Js.prototype.createWebChannel=Js.prototype.g,Rr.prototype.send=Rr.prototype.o,Rr.prototype.open=Rr.prototype.m,Rr.prototype.close=Rr.prototype.close,s4=function(){return new Js},a4=function(){return or()},i4=Dt,v_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ul.NO_ERROR=0,ul.TIMEOUT=8,ul.HTTP_ERROR=6,r0=ul,qd.COMPLETE="complete",r4=qd,Gi.EventType=qt,qt.OPEN="a",qt.CLOSE="b",qt.ERROR="c",qt.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,sh=Gi,Ht.prototype.listenOnce=Ht.prototype.K,Ht.prototype.getLastError=Ht.prototype.Ha,Ht.prototype.getLastErrorCode=Ht.prototype.ya,Ht.prototype.getStatus=Ht.prototype.ca,Ht.prototype.getResponseJson=Ht.prototype.La,Ht.prototype.getResponseText=Ht.prototype.la,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Fa,n4=Ht}).apply(typeof Bm<"u"?Bm:typeof self<"u"?self:typeof window<"u"?window:{});const FR="@firebase/firestore",GR="4.9.2";class gr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gr.UNAUTHENTICATED=new gr(null),gr.GOOGLE_CREDENTIALS=new gr("google-credentials-uid"),gr.FIRST_PARTY=new gr("first-party-uid"),gr.MOCK_USER=new gr("mock-user");let Bd="12.3.0";const yc=new wE("@firebase/firestore");function Du(){return yc.logLevel}function Se(n,...e){if(yc.logLevel<=_t.DEBUG){const t=e.map(TE);yc.debug(`Firestore (${Bd}): ${n}`,...t)}}function Pr(n,...e){if(yc.logLevel<=_t.ERROR){const t=e.map(TE);yc.error(`Firestore (${Bd}): ${n}`,...t)}}function bc(n,...e){if(yc.logLevel<=_t.WARN){const t=e.map(TE);yc.warn(`Firestore (${Bd}): ${n}`,...t)}}function TE(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Oe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,o4(n,r,t)}function o4(n,e,t){let r=`FIRESTORE (${Bd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Pr(r),new Error(r)}function Ue(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||o4(e,i,r)}function ot(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Ls{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ba{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class l4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(gr.UNAUTHENTICATED)))}shutdown(){}}class XY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class WY{constructor(e){this.t=e,this.currentUser=gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ue(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let a=new Ba;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ba,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ba)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string",31837,{l:r}),new l4(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new gr(e)}}class QY{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=gr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZY{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new QY(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(gr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JY{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ue(this.o===void 0,3512);const r=a=>{a.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qR(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ue(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new qR(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function eK(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class AE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=eK(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function at(n,e){return n<e?-1:n>e?1:0}function y_(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return W1(i)===W1(a)?at(i,a):W1(i)?1:-1}return at(n.length,e.length)}const tK=55296,nK=57343;function W1(n){const e=n.charCodeAt(0);return e>=tK&&e<=nK}function dd(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function c4(n){return n+"\0"}const HR="__name__";class Na{constructor(e,t,r){t===void 0?t=0:t>e.length&&Oe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Oe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Na.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Na?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Na.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return at(e.length,t.length)}static compareSegments(e,t){const r=Na.isNumericId(e),i=Na.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Na.extractNumericId(e).compare(Na.extractNumericId(t)):y_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qo.fromString(e.substring(4,e.length-2))}}class Mt extends Na{construct(e,t,r){return new Mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Mt(t)}static emptyPath(){return new Mt([])}}const rK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends Na{construct(e,t,r){return new gn(e,t,r)}static isValidIdentifier(e){return rK.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===HR}static keyField(){return new gn([HR])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ce(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ce(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ce(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Ce(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(t)}static emptyPath(){return new gn([])}}class De{constructor(e){this.path=e}static fromPath(e){return new De(Mt.fromString(e))}static fromName(e){return new De(Mt.fromString(e).popFirst(5))}static empty(){return new De(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new Mt(e.slice()))}}function u4(n,e,t){if(!t)throw new Ce(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function iK(n,e,t,r){if(e===!0&&r===!0)throw new Ce(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $R(n){if(!De.isDocumentKey(n))throw new Ce(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function YR(n){if(De.isDocumentKey(n))throw new Ce(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function d4(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function zv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Oe(12329,{type:typeof n})}function Tr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zv(n);throw new Ce(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Fn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Dp(n,e){if(!d4(n))throw new Ce(ge.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Ce(ge.INVALID_ARGUMENT,t);return!0}const KR=-62135596800,XR=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*XR);return new ht(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<KR)throw new Ce(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/XR}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dp(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Fn("string",ht._jsonSchemaVersion),seconds:Fn("number"),nanoseconds:Fn("number")};class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new ht(0,0))}static max(){return new $e(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Xh=-1;class F0{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function b_(n){return n.fields.find((e=>e.kind===2))}function Ul(n){return n.fields.filter((e=>e.kind!==2))}F0.UNKNOWN_ID=-1;class i0{constructor(e,t){this.fieldPath=e,this.kind=t}}class Wh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Wh(0,gi.min())}}function aK(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=$e.fromTimestamp(r===1e9?new ht(t+1,0):new ht(t,r));return new gi(i,De.empty(),e)}function f4(n){return new gi(n.readTime,n.key,Xh)}class gi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new gi($e.min(),De.empty(),Xh)}static max(){return new gi($e.max(),De.empty(),Xh)}}function CE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=De.comparator(n.documentKey,e.documentKey),t!==0?t:at(n.largestBatchId,e.largestBatchId))}const h4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function kc(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==h4)throw n;Se("LocalStore","Unexpectedly lost primary lease")}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.reject(t)}static resolve(e){return new ae(((t,r)=>{t(e)}))}static reject(e){return new ae(((t,r)=>{r(e)}))}static waitFor(e){return new ae(((t,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&t()}),(u=>r(u)))})),o=!0,a===i&&t()}))}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next((i=>i?ae.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new ae(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;t(e[d]).next((h=>{o[d]=h,++c,c===a&&r(o)}),(h=>i(h)))}}))}static doWhile(e,t){return new ae(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}const di="SimpleDb";class Lv{static open(e,t,r,i){try{return new Lv(t,e.transaction(i,r))}catch(a){throw new Eh(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ba,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Eh(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=IE(r.target.error);this.S.reject(new Eh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Se(di,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new oK(t)}}class Ho{static delete(e){return Se(di,"Removing database:",e),Yl(LO().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!KO())return!1;if(Ho.F())return!0;const e=Jn(),t=Ho.M(e),r=0<t&&t<10,i=g4(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Ho.M(Jn())===12.2&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Se(di,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const o=a.target.result;t(o)},i.onblocked=()=>{r(new Eh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const o=a.target.error;o.name==="VersionError"?r(new Ce(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Ce(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Eh(e,o))},i.onupgradeneeded=a=>{Se(di,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const o=a.target.result;this.N.k(o,i.transaction,a.oldVersion,this.version).next((()=>{Se(di,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const a=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const c=Lv.open(this.db,e,a?"readonly":"readwrite",r),u=i(c).next((d=>(c.C(),d))).catch((d=>(c.abort(d),ae.reject(d)))).toPromise();return u.catch((()=>{})),await c.D,u}catch(c){const u=c,d=u.name!=="FirebaseError"&&o<3;if(Se(di,"Transaction failed with error:",u.message,"Retrying:",d),this.close(),!d)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function g4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class sK{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Yl(this.U.delete())}}class Eh extends Ce{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function sl(n){return n.name==="IndexedDbTransactionError"}class oK{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Se(di,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Se(di,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Yl(r)}add(e){return Se(di,"ADD",this.store.name,e,e),Yl(this.store.add(e))}get(e){return Yl(this.store.get(e)).next((t=>(t===void 0&&(t=null),Se(di,"GET",this.store.name,e,t),t)))}delete(e){return Se(di,"DELETE",this.store.name,e),Yl(this.store.delete(e))}count(){return Se(di,"COUNT",this.store.name),Yl(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new ae(((o,c)=>{a.onerror=u=>{c(u.target.error)},a.onsuccess=u=>{o(u.target.result)}}))}{const a=this.cursor(r),o=[];return this.H(a,((c,u)=>{o.push(u)})).next((()=>o))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new ae(((i,a)=>{r.onerror=o=>{a(o.target.error)},r.onsuccess=o=>{i(o.target.result)}}))}Z(e,t){Se(di,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((a,o,c)=>c.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new ae(((r,i)=>{t.onerror=a=>{const o=IE(a.target.error);i(o)},t.onsuccess=a=>{const o=a.target.result;o?e(o.primaryKey,o.value).next((c=>{c?o.continue():r()})):r()}}))}H(e,t){const r=[];return new ae(((i,a)=>{e.onerror=o=>{a(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void i();const u=new sK(c),d=t(c.primaryKey,c.value,u);if(d instanceof ae){const h=d.catch((p=>(u.done(),ae.reject(p))));r.push(h)}u.isDone?i():u.G===null?c.continue():c.continue(u.G)}})).next((()=>ae.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Yl(n){return new ae(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=IE(r.target.error);t(i)}}))}let WR=!1;function IE(n){const e=Ho.M(Jn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return WR||(WR=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Sh="IndexBackfiller";class lK{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Se(Sh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Se(Sh,`Documents written: ${t}`)}catch(t){sl(t)?Se(Sh,"Ignoring IndexedDB error during index backfill: ",t):await kc(t)}await this.re(6e4)}))}}class cK{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,a=!0;return ae.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return Se(Sh,`Processing collection: ${o}`),this.oe(e,o,i).next((c=>{i-=c,r.add(o)}));a=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((a=>{const o=a.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(i,a))).next((c=>(Se(Sh,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c)))).next((()=>o.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,a)=>{const o=f4(a);CE(o,r)>0&&(r=o)})),new gi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Vi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vi.ce=-1;const ac=-1;function Bv(n){return n==null}function Qh(n){return n===0&&1/n==-1/0}function uK(n){return typeof n=="number"&&Number.isInteger(n)&&!Qh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const G0="";function Ar(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=QR(e)),e=dK(n.get(t),e);return QR(e)}function dK(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case G0:t+="";break;default:t+=a}}return t}function QR(n){return n+G0+""}function Pa(n){const e=n.length;if(Ue(e>=2,64408,{path:n}),e===2)return Ue(n.charAt(0)===G0&&n.charAt(1)==="",56145,{path:n}),Mt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const o=n.indexOf(G0,a);switch((o<0||o>t)&&Oe(50515,{path:n}),n.charAt(o+1)){case"":const c=n.substring(a,o);let u;i.length===0?u=c:(i+=c,u=i,i=""),r.push(u);break;case"":i+=n.substring(a,o),i+="\0";break;case"":i+=n.substring(a,o+1);break;default:Oe(61167,{path:n})}a=o+2}return new Mt(r)}const Fl="remoteDocuments",kp="owner",Eu="owner",Zh="mutationQueues",fK="userId",ra="mutations",ZR="batchId",ec="userMutationsIndex",JR=["userId","batchId"];function a0(n,e){return[n,Ar(e)]}function m4(n,e,t){return[n,Ar(e),t]}const hK={},fd="documentMutations",q0="remoteDocumentsV14",pK=["prefixPath","collectionGroup","readTime","documentId"],s0="documentKeyIndex",gK=["prefixPath","collectionGroup","documentId"],v4="collectionGroupIndex",mK=["collectionGroup","readTime","prefixPath","documentId"],Jh="remoteDocumentGlobal",x_="remoteDocumentGlobalKey",hd="targets",y4="queryTargetsIndex",vK=["canonicalId","targetId"],pd="targetDocuments",yK=["targetId","path"],RE="documentTargetsIndex",bK=["path","targetId"],H0="targetGlobalKey",sc="targetGlobal",ep="collectionParents",xK=["collectionId","parent"],gd="clientMetadata",_K="clientId",Uv="bundles",wK="bundleId",Fv="namedQueries",EK="name",DE="indexConfiguration",SK="indexId",__="collectionGroupIndex",TK="collectionGroup",Th="indexState",AK=["indexId","uid"],b4="sequenceNumberIndex",CK=["uid","sequenceNumber"],Ah="indexEntries",IK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],x4="documentKeyIndex",RK=["indexId","uid","orderedDocumentKey"],Gv="documentOverlays",DK=["userId","collectionPath","documentId"],w_="collectionPathOverlayIndex",kK=["userId","collectionPath","largestBatchId"],_4="collectionGroupOverlayIndex",NK=["userId","collectionGroup","largestBatchId"],kE="globals",MK="name",w4=[Zh,ra,fd,Fl,hd,kp,sc,pd,gd,Jh,ep,Uv,Fv],PK=[...w4,Gv],E4=[Zh,ra,fd,q0,hd,kp,sc,pd,gd,Jh,ep,Uv,Fv,Gv],S4=E4,NE=[...S4,DE,Th,Ah],OK=NE,T4=[...NE,kE],VK=T4;class E_ extends p4{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function er(n,e){const t=ot(n);return Ho.O(t.le,e)}function eD(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ol(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function A4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class un{constructor(e,t){this.comparator=e,this.root=t||mr.EMPTY}insert(e,t){return new un(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mr.BLACK,null,null))}remove(e){return new un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Um(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Um(this.root,e,this.comparator,!1)}getReverseIterator(){return new Um(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Um(this.root,e,this.comparator,!0)}}class Um{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??mr.RED,this.left=i??mr.EMPTY,this.right=a??mr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new mr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return mr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}mr.EMPTY=null,mr.RED=!0,mr.BLACK=!1;mr.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new mr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gt{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tD(this.data.getIterator())}getIteratorFrom(e){return new tD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class tD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Su(n){return n.hasNext()?n.getNext():void 0}class Xr{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new Xr([])}unionWith(e){let t=new Gt(gn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Xr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dd(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class C4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new C4("Invalid base64 string: "+a):a}})(e);return new qn(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new qn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qn.EMPTY_BYTE_STRING=new qn("");const jK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(n){if(Ue(!!n,39018),typeof n=="string"){let e=0;const t=jK.exec(n);if(Ue(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ln(n.seconds),nanos:ln(n.nanos)}}function ln(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function js(n){return typeof n=="string"?qn.fromBase64String(n):qn.fromUint8Array(n)}const I4="server_timestamp",R4="__type__",D4="__previous_value__",k4="__local_write_time__";function ME(n){return(n?.mapValue?.fields||{})[R4]?.stringValue===I4}function qv(n){const e=n.mapValue.fields[D4];return ME(e)?qv(e):e}function tp(n){const e=Vs(n.mapValue.fields[k4].timestampValue);return new ht(e.seconds,e.nanos)}class zK{constructor(e,t,r,i,a,o,c,u,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const $0="(default)";class xc{constructor(e,t){this.projectId=e,this.database=t||$0}static empty(){return new xc("","")}get isDefaultDatabase(){return this.database===$0}isEqual(e){return e instanceof xc&&e.projectId===this.projectId&&e.database===this.database}}const PE="__type__",N4="__max__",zo={mapValue:{fields:{__type__:{stringValue:N4}}}},OE="__vector__",md="value",o0={nullValue:"NULL_VALUE"};function Zo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ME(n)?4:M4(n)?9007199254740991:Hv(n)?10:11:Oe(28295,{value:n})}function $a(n,e){if(n===e)return!0;const t=Zo(n);if(t!==Zo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tp(n).isEqual(tp(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Vs(i.timestampValue),c=Vs(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return js(i.bytesValue).isEqual(js(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return ln(i.geoPointValue.latitude)===ln(a.geoPointValue.latitude)&&ln(i.geoPointValue.longitude)===ln(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return ln(i.integerValue)===ln(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=ln(i.doubleValue),c=ln(a.doubleValue);return o===c?Qh(o)===Qh(c):isNaN(o)&&isNaN(c)}return!1})(n,e);case 9:return dd(n.arrayValue.values||[],e.arrayValue.values||[],$a);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(eD(o)!==eD(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!$a(o[u],c[u])))return!1;return!0})(n,e);default:return Oe(52216,{left:n})}}function np(n,e){return(n.values||[]).find((t=>$a(t,e)))!==void 0}function Jo(n,e){if(n===e)return 0;const t=Zo(n),r=Zo(e);if(t!==r)return at(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return at(n.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=ln(a.integerValue||a.doubleValue),u=ln(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return nD(n.timestampValue,e.timestampValue);case 4:return nD(tp(n),tp(e));case 5:return y_(n.stringValue,e.stringValue);case 6:return(function(a,o){const c=js(a),u=js(o);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=at(c[d],u[d]);if(h!==0)return h}return at(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=at(ln(a.latitude),ln(o.latitude));return c!==0?c:at(ln(a.longitude),ln(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return rD(n.arrayValue,e.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},d=c[md]?.arrayValue,h=u[md]?.arrayValue,p=at(d?.values?.length||0,h?.values?.length||0);return p!==0?p:rD(d,h)})(n.mapValue,e.mapValue);case 11:return(function(a,o){if(a===zo.mapValue&&o===zo.mapValue)return 0;if(a===zo.mapValue)return 1;if(o===zo.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const m=y_(u[p],h[p]);if(m!==0)return m;const b=Jo(c[u[p]],d[h[p]]);if(b!==0)return b}return at(u.length,h.length)})(n.mapValue,e.mapValue);default:throw Oe(23264,{he:t})}}function nD(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return at(n,e);const t=Vs(n),r=Vs(e),i=at(t.seconds,r.seconds);return i!==0?i:at(t.nanos,r.nanos)}function rD(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Jo(t[i],r[i]);if(a)return a}return at(t.length,r.length)}function vd(n){return S_(n)}function S_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Vs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return js(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return De.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=S_(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${S_(t.fields[o])}`;return i+"}"})(n.mapValue):Oe(61005,{value:n})}function l0(n){switch(Zo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qv(n);return e?16+l0(e):16;case 5:return 2*n.stringValue.length;case 6:return js(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+l0(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ol(r.fields,((a,o)=>{i+=a.length+l0(o)})),i})(n.mapValue);default:throw Oe(13486,{value:n})}}function rp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function T_(n){return!!n&&"integerValue"in n}function ip(n){return!!n&&"arrayValue"in n}function iD(n){return!!n&&"nullValue"in n}function aD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function c0(n){return!!n&&"mapValue"in n}function Hv(n){return(n?.mapValue?.fields||{})[PE]?.stringValue===OE}function Ch(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ol(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ch(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ch(n.arrayValue.values[t]);return e}return{...n}}function M4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===N4}const P4={mapValue:{fields:{[PE]:{stringValue:OE},[md]:{arrayValue:{}}}}};function LK(n){return"nullValue"in n?o0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?rp(xc.empty(),De.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Hv(n)?P4:{mapValue:{}}:Oe(35942,{value:n})}function BK(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?rp(xc.empty(),De.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?P4:"mapValue"in n?Hv(n)?{mapValue:{}}:zo:Oe(61959,{value:n})}function sD(n,e){const t=Jo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function oD(n,e){const t=Jo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Er{constructor(e){this.value=e}static empty(){return new Er({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!c0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ch(t)}setAll(e){let t=gn.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=Ch(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());c0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $a(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];c0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ol(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Er(Ch(this.value))}}function O4(n){const e=[];return ol(n.fields,((t,r)=>{const i=new gn([t]);if(c0(r)){const a=O4(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new Xr(e)}class _n{constructor(e,t,r,i,a,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new _n(e,0,$e.min(),$e.min(),$e.min(),Er.empty(),0)}static newFoundDocument(e,t,r,i){return new _n(e,1,t,$e.min(),r,i,0)}static newNoDocument(e,t){return new _n(e,2,t,$e.min(),$e.min(),Er.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,$e.min(),$e.min(),Er.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Er.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Er.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yd{constructor(e,t){this.position=e,this.inclusive=t}}function lD(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=De.comparator(De.fromName(o.referenceValue),t.key):r=Jo(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function cD(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$a(n.position[t],e.position[t]))return!1;return!0}class ap{constructor(e,t="asc"){this.field=e,this.dir=t}}function UK(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class V4{}class wt extends V4{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new FK(e,t,r):t==="array-contains"?new HK(e,r):t==="in"?new F4(e,r):t==="not-in"?new $K(e,r):t==="array-contains-any"?new YK(e,r):new wt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new GK(e,r):new qK(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Jo(t,this.value)):t!==null&&Zo(this.value)===Zo(t)&&this.matchesComparison(Jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ft extends V4{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ft(e,t)}matches(e){return bd(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bd(n){return n.op==="and"}function A_(n){return n.op==="or"}function VE(n){return j4(n)&&bd(n)}function j4(n){for(const e of n.filters)if(e instanceof Ft)return!1;return!0}function C_(n){if(n instanceof wt)return n.field.canonicalString()+n.op.toString()+vd(n.value);if(VE(n))return n.filters.map((e=>C_(e))).join(",");{const e=n.filters.map((t=>C_(t))).join(",");return`${n.op}(${e})`}}function z4(n,e){return n instanceof wt?(function(r,i){return i instanceof wt&&r.op===i.op&&r.field.isEqual(i.field)&&$a(r.value,i.value)})(n,e):n instanceof Ft?(function(r,i){return i instanceof Ft&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&z4(o,i.filters[c])),!0):!1})(n,e):void Oe(19439)}function L4(n,e){const t=n.filters.concat(e);return Ft.create(t,n.op)}function B4(n){return n instanceof wt?(function(t){return`${t.field.canonicalString()} ${t.op} ${vd(t.value)}`})(n):n instanceof Ft?(function(t){return t.op.toString()+" {"+t.getFilters().map(B4).join(" ,")+"}"})(n):"Filter"}class FK extends wt{constructor(e,t,r){super(e,t,r),this.key=De.fromName(r.referenceValue)}matches(e){const t=De.comparator(e.key,this.key);return this.matchesComparison(t)}}class GK extends wt{constructor(e,t){super(e,"in",t),this.keys=U4("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class qK extends wt{constructor(e,t){super(e,"not-in",t),this.keys=U4("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function U4(n,e){return(e.arrayValue?.values||[]).map((t=>De.fromName(t.referenceValue)))}class HK extends wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ip(t)&&np(t.arrayValue,this.value)}}class F4 extends wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&np(this.value.arrayValue,t)}}class $K extends wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(np(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!np(this.value.arrayValue,t)}}class YK extends wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ip(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>np(this.value.arrayValue,r)))}}class KK{constructor(e,t=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function I_(n,e=null,t=[],r=[],i=null,a=null,o=null){return new KK(n,e,t,r,i,a,o)}function _c(n){const e=ot(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>C_(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Bv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>vd(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>vd(r))).join(",")),e.Te=t}return e.Te}function Np(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!UK(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!z4(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!cD(n.startAt,e.startAt)&&cD(n.endAt,e.endAt)}function Y0(n){return De.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function K0(n,e){return n.filters.filter((t=>t instanceof wt&&t.field.isEqual(e)))}function uD(n,e,t){let r=o0,i=!0;for(const a of K0(n,e)){let o=o0,c=!0;switch(a.op){case"<":case"<=":o=LK(a.value);break;case"==":case"in":case">=":o=a.value;break;case">":o=a.value,c=!1;break;case"!=":case"not-in":o=o0}sD({value:r,inclusive:i},{value:o,inclusive:c})<0&&(r=o,i=c)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const o=t.position[a];sD({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function dD(n,e,t){let r=zo,i=!0;for(const a of K0(n,e)){let o=zo,c=!0;switch(a.op){case">=":case">":o=BK(a.value),c=!1;break;case"==":case"in":case"<=":o=a.value;break;case"<":o=a.value,c=!1;break;case"!=":case"not-in":o=zo}oD({value:r,inclusive:i},{value:o,inclusive:c})>0&&(r=o,i=c)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const o=t.position[a];oD({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}class Ud{constructor(e,t=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XK(n,e,t,r,i,a,o,c){return new Ud(n,e,t,r,i,a,o,c)}function Mp(n){return new Ud(n)}function fD(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function G4(n){return n.collectionGroup!==null}function Ih(n){const e=ot(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Gt(gn.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new ap(a,r))})),t.has(gn.keyField().canonicalString())||e.Ie.push(new ap(gn.keyField(),r))}return e.Ie}function Li(n){const e=ot(n);return e.Ee||(e.Ee=WK(e,Ih(n))),e.Ee}function WK(n,e){if(n.limitType==="F")return I_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new ap(i.field,a)}));const t=n.endAt?new yd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new yd(n.startAt.position,n.startAt.inclusive):null;return I_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function R_(n,e){const t=n.filters.concat([e]);return new Ud(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function X0(n,e,t){return new Ud(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $v(n,e){return Np(Li(n),Li(e))&&n.limitType===e.limitType}function q4(n){return`${_c(Li(n))}|lt:${n.limitType}`}function ku(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>B4(i))).join(", ")}]`),Bv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>vd(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>vd(i))).join(",")),`Target(${r})`})(Li(n))}; limitType=${n.limitType})`}function Pp(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):De.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of Ih(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const d=lD(o,c,u);return o.inclusive?d<=0:d<0})(r.startAt,Ih(r),i)||r.endAt&&!(function(o,c,u){const d=lD(o,c,u);return o.inclusive?d>=0:d>0})(r.endAt,Ih(r),i))})(n,e)}function QK(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function H4(n){return(e,t)=>{let r=!1;for(const i of Ih(n)){const a=ZK(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function ZK(n,e,t){const r=n.field.isKeyField()?De.comparator(e.key,t.key):(function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?Jo(u,d):Oe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Oe(19790,{direction:n.dir})}}class Bs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ol(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return A4(this.inner)}size(){return this.innerSize}}const JK=new un(De.comparator);function fi(){return JK}const $4=new un(De.comparator);function oh(...n){let e=$4;for(const t of n)e=e.insert(t.key,t);return e}function Y4(n){let e=$4;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Oa(){return Rh()}function K4(){return Rh()}function Rh(){return new Bs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const eX=new un(De.comparator),tX=new Gt(De.comparator);function gt(...n){let e=tX;for(const t of n)e=e.add(t);return e}const nX=new Gt(at);function rX(){return nX}function jE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(e)?"-0":e}}function X4(n){return{integerValue:""+n}}function iX(n,e){return uK(e)?X4(e):jE(n,e)}class Yv{constructor(){this._=void 0}}function aX(n,e,t){return n instanceof sp?(function(i,a){const o={fields:{[R4]:{stringValue:I4},[k4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&ME(a)&&(a=qv(a)),a&&(o.fields[D4]=a),{mapValue:o}})(t,e):n instanceof xd?Q4(n,e):n instanceof _d?Z4(n,e):(function(i,a){const o=W4(i,a),c=hD(o)+hD(i.Ae);return T_(o)&&T_(i.Ae)?X4(c):jE(i.serializer,c)})(n,e)}function sX(n,e,t){return n instanceof xd?Q4(n,e):n instanceof _d?Z4(n,e):t}function W4(n,e){return n instanceof op?(function(r){return T_(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class sp extends Yv{}class xd extends Yv{constructor(e){super(),this.elements=e}}function Q4(n,e){const t=J4(e);for(const r of n.elements)t.some((i=>$a(i,r)))||t.push(r);return{arrayValue:{values:t}}}class _d extends Yv{constructor(e){super(),this.elements=e}}function Z4(n,e){let t=J4(e);for(const r of n.elements)t=t.filter((i=>!$a(i,r)));return{arrayValue:{values:t}}}class op extends Yv{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function hD(n){return ln(n.integerValue||n.doubleValue)}function J4(n){return ip(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class oX{constructor(e,t){this.field=e,this.transform=t}}function lX(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof xd&&i instanceof xd||r instanceof _d&&i instanceof _d?dd(r.elements,i.elements,$a):r instanceof op&&i instanceof op?$a(r.Ae,i.Ae):r instanceof sp&&i instanceof sp})(n.transform,e.transform)}class cX{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function u0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Kv{}function e3(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Op(n.key,Zn.none()):new Fd(n.key,n.data,Zn.none());{const t=n.data,r=Er.empty();let i=new Gt(gn.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Us(n.key,r,new Xr(i.toArray()),Zn.none())}}function uX(n,e,t){n instanceof Fd?(function(i,a,o){const c=i.value.clone(),u=gD(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Us?(function(i,a,o){if(!u0(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=gD(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(t3(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(n,e,t):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Dh(n,e,t,r){return n instanceof Fd?(function(a,o,c,u){if(!u0(a.precondition,o))return c;const d=a.value.clone(),h=mD(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof Us?(function(a,o,c,u){if(!u0(a.precondition,o))return c;const d=mD(a.fieldTransforms,u,o),h=o.data;return h.setAll(t3(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((p=>p.field)))})(n,e,t,r):(function(a,o,c){return u0(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(n,e,t)}function dX(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=W4(r.transform,i||null);a!=null&&(t===null&&(t=Er.empty()),t.set(r.field,a))}return t||null}function pD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&dd(r,i,((a,o)=>lX(a,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Fd extends Kv{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Us extends Kv{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function t3(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function gD(n,e,t){const r=new Map;Ue(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,sX(o,c,t[i]))}return r}function mD(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,aX(a,o,e))}return r}class Op extends Kv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n3 extends Kv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zE{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&uX(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Dh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=K4();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=t.has(i.key)?null:c;const u=e3(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument($e.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),gt())}isEqual(e){return this.batchId===e.batchId&&dd(this.mutations,e.mutations,((t,r)=>pD(t,r)))&&dd(this.baseMutations,e.baseMutations,((t,r)=>pD(t,r)))}}class LE{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ue(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return eX})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new LE(e,t,r,i)}}class BE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class fX{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ln,St;function hX(n){switch(n){case ge.OK:return Oe(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return Oe(15467,{code:n})}}function r3(n){if(n===void 0)return Pr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Ln.OK:return ge.OK;case Ln.CANCELLED:return ge.CANCELLED;case Ln.UNKNOWN:return ge.UNKNOWN;case Ln.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Ln.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Ln.INTERNAL:return ge.INTERNAL;case Ln.UNAVAILABLE:return ge.UNAVAILABLE;case Ln.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Ln.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Ln.NOT_FOUND:return ge.NOT_FOUND;case Ln.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Ln.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Ln.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Ln.ABORTED:return ge.ABORTED;case Ln.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Ln.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Ln.DATA_LOSS:return ge.DATA_LOSS;default:return Oe(39323,{code:n})}}(St=Ln||(Ln={}))[St.OK=0]="OK",St[St.CANCELLED=1]="CANCELLED",St[St.UNKNOWN=2]="UNKNOWN",St[St.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",St[St.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",St[St.NOT_FOUND=5]="NOT_FOUND",St[St.ALREADY_EXISTS=6]="ALREADY_EXISTS",St[St.PERMISSION_DENIED=7]="PERMISSION_DENIED",St[St.UNAUTHENTICATED=16]="UNAUTHENTICATED",St[St.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",St[St.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",St[St.ABORTED=10]="ABORTED",St[St.OUT_OF_RANGE=11]="OUT_OF_RANGE",St[St.UNIMPLEMENTED=12]="UNIMPLEMENTED",St[St.INTERNAL=13]="INTERNAL",St[St.UNAVAILABLE=14]="UNAVAILABLE",St[St.DATA_LOSS=15]="DATA_LOSS";function pX(){return new TextEncoder}const gX=new qo([4294967295,4294967295],0);function vD(n){const e=pX().encode(n),t=new t4;return t.update(e),new Uint8Array(t.digest())}function yD(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new qo([t,r],0),new qo([i,a],0)]}class UE{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new lh(`Invalid padding: ${t}`);if(r<0)throw new lh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new lh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=qo.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(qo.fromNumber(r)));return i.compare(gX)===1&&(i=new qo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=vD(e),[r,i]=yD(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new UE(a,i,t);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const t=vD(e),[r,i]=yD(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class lh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xv{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Vp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Xv($e.min(),i,new un(at),fi(),gt())}}class Vp{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Vp(r,t,gt(),gt(),gt())}}class d0{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class i3{constructor(e,t){this.targetId=e,this.Ce=t}}class a3{constructor(e,t,r=qn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class bD{constructor(){this.ve=0,this.Fe=xD(),this.Me=qn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gt(),t=gt(),r=gt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Oe(38017,{changeType:a})}})),new Vp(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=xD()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mX{constructor(e){this.Ge=e,this.ze=new Map,this.je=fi(),this.Je=Fm(),this.He=Fm(),this.Ye=new un(at)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(Y0(a))if(r===0){const o=new De(a.path);this.et(t,o,_n.newNoDocument(o,$e.min()))}else Ue(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(t);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,c;try{o=js(r).toUint8Array()}catch(u){if(u instanceof C4)return bc("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new UE(o,i,a)}catch(u){return bc(u instanceof lh?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&Y0(c.target)){const u=new De(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,_n.newNoDocument(u,e))}a.Be&&(t.set(o,a.ke()),a.qe())}}));let r=gt();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new Xv(e,t,this.Ye,this.je,r);return this.je=fi(),this.Je=Fm(),this.He=Fm(),this.Ye=new un(at),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new bD,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Gt(at),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Gt(at),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bD),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Fm(){return new un(De.comparator)}function xD(){return new un(De.comparator)}const vX={asc:"ASCENDING",desc:"DESCENDING"},yX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bX={and:"AND",or:"OR"};class xX{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function D_(n,e){return n.useProto3Json||Bv(e)?e:{value:e}}function wd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function s3(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _X(n,e){return wd(n,e.toTimestamp())}function jr(n){return Ue(!!n,49232),$e.fromTimestamp((function(t){const r=Vs(t);return new ht(r.seconds,r.nanos)})(n))}function FE(n,e){return k_(n,e).canonicalString()}function k_(n,e){const t=(function(i){return new Mt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function o3(n){const e=Mt.fromString(n);return Ue(m3(e),10190,{key:e.toString()}),e}function W0(n,e){return FE(n.databaseId,e.path)}function oc(n,e){const t=o3(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new De(u3(t))}function l3(n,e){return FE(n.databaseId,e)}function c3(n){const e=o3(n);return e.length===4?Mt.emptyPath():u3(e)}function N_(n){return new Mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function u3(n){return Ue(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function _D(n,e,t){return{name:W0(n,e),fields:t.value.mapValue.fields}}function wX(n,e,t){const r=oc(n,e.name),i=jr(e.updateTime),a=e.createTime?jr(e.createTime):$e.min(),o=new Er({mapValue:{fields:e.fields}}),c=_n.newFoundDocument(r,i,a,o);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function EX(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Oe(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(d,h){return d.useProto3Json?(Ue(h===void 0||typeof h=="string",58123),qn.fromBase64String(h||"")):(Ue(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),qn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const h=d.code===void 0?ge.UNKNOWN:r3(d.code);return new Ce(h,d.message||"")})(o);t=new a3(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=oc(n,r.document.name),a=jr(r.document.updateTime),o=r.document.createTime?jr(r.document.createTime):$e.min(),c=new Er({mapValue:{fields:r.document.fields}}),u=_n.newFoundDocument(i,a,o,c),d=r.targetIds||[],h=r.removedTargetIds||[];t=new d0(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=oc(n,r.document),a=r.readTime?jr(r.readTime):$e.min(),o=_n.newNoDocument(i,a),c=r.removedTargetIds||[];t=new d0([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=oc(n,r.document),a=r.removedTargetIds||[];t=new d0([],a,i,null)}else{if(!("filter"in e))return Oe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new fX(i,a),c=r.targetId;t=new i3(c,o)}}return t}function Q0(n,e){let t;if(e instanceof Fd)t={update:_D(n,e.key,e.value)};else if(e instanceof Op)t={delete:W0(n,e.key)};else if(e instanceof Us)t={update:_D(n,e.key,e.data),updateMask:RX(e.fieldMask)};else{if(!(e instanceof n3))return Oe(16599,{Vt:e.type});t={verify:W0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof sp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof xd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _d)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof op)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Oe(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:_X(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Oe(27497)})(n,e.precondition)),t}function M_(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?Zn.updateTime(jr(a.updateTime)):a.exists!==void 0?Zn.exists(a.exists):Zn.none()})(e.currentDocument):Zn.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(o,c){let u=null;if("setToServerValue"in c)Ue(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),u=new sp;else if("appendMissingElements"in c){const h=c.appendMissingElements.values||[];u=new xd(h)}else if("removeAllFromArray"in c){const h=c.removeAllFromArray.values||[];u=new _d(h)}else"increment"in c?u=new op(o,c.increment):Oe(16584,{proto:c});const d=gn.fromServerFormat(c.fieldPath);return new oX(d,u)})(n,i))):[];if(e.update){e.update.name;const i=oc(n,e.update.name),a=new Er({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(u){const d=u.fieldPaths||[];return new Xr(d.map((h=>gn.fromServerFormat(h))))})(e.updateMask);return new Us(i,a,o,t,r)}return new Fd(i,a,t,r)}if(e.delete){const i=oc(n,e.delete);return new Op(i,t)}if(e.verify){const i=oc(n,e.verify);return new n3(i,t)}return Oe(1463,{proto:e})}function SX(n,e){return n&&n.length>0?(Ue(e!==void 0,14353),n.map((t=>(function(i,a){let o=i.updateTime?jr(i.updateTime):jr(a);return o.isEqual($e.min())&&(o=jr(a)),new cX(o,i.transformResults||[])})(t,e)))):[]}function d3(n,e){return{documents:[l3(n,e.path)]}}function f3(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=l3(n,i);const a=(function(d){if(d.length!==0)return g3(Ft.create(d,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const o=(function(d){if(d.length!==0)return d.map((h=>(function(m){return{field:Nu(m.field),direction:AX(m.dir)}})(h)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=D_(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function h3(n){let e=c3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ue(r===1,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];t.where&&(a=(function(p){const m=p3(p);return m instanceof Ft&&VE(m)?m.getFilters():[m]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map((m=>(function(_){return new ap(Mu(_.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(m)))})(t.orderBy));let c=null;t.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,Bv(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){const m=!!p.before,b=p.values||[];return new yd(b,m)})(t.startAt));let d=null;return t.endAt&&(d=(function(p){const m=!p.before,b=p.values||[];return new yd(b,m)})(t.endAt)),XK(e,i,o,a,c,"F",u,d)}function TX(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function p3(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Mu(t.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Mu(t.unaryFilter.field);return wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Mu(t.unaryFilter.field);return wt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Mu(t.unaryFilter.field);return wt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return wt.create(Mu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ft.create(t.compositeFilter.filters.map((r=>p3(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(t.compositeFilter.op))})(n):Oe(30097,{filter:n})}function AX(n){return vX[n]}function CX(n){return yX[n]}function IX(n){return bX[n]}function Nu(n){return{fieldPath:n.canonicalString()}}function Mu(n){return gn.fromServerFormat(n.fieldPath)}function g3(n){return n instanceof wt?(function(t){if(t.op==="=="){if(aD(t.value))return{unaryFilter:{field:Nu(t.field),op:"IS_NAN"}};if(iD(t.value))return{unaryFilter:{field:Nu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(aD(t.value))return{unaryFilter:{field:Nu(t.field),op:"IS_NOT_NAN"}};if(iD(t.value))return{unaryFilter:{field:Nu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nu(t.field),op:CX(t.op),value:t.value}}})(n):n instanceof Ft?(function(t){const r=t.getFilters().map((i=>g3(i)));return r.length===1?r[0]:{compositeFilter:{op:IX(t.op),filters:r}}})(n):Oe(54877,{filter:n})}function RX(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function m3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class _s{constructor(e,t,r,i,a=$e.min(),o=$e.min(),c=qn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class v3{constructor(e){this.yt=e}}function DX(n,e){let t;if(e.document)t=wX(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=De.fromSegments(e.noDocument.path),i=Ec(e.noDocument.readTime);t=_n.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Oe(56709);{const r=De.fromSegments(e.unknownDocument.path),i=Ec(e.unknownDocument.version);t=_n.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const a=new ht(i[0],i[1]);return $e.fromTimestamp(a)})(e.readTime)),t}function wD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Z0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,o){return{name:W0(a,o.key),fields:o.data.value.mapValue.fields,updateTime:wd(a,o.version.toTimestamp()),createTime:wd(a,o.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wc(e.version)};else{if(!e.isUnknownDocument())return Oe(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:wc(e.version)}}return r}function Z0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ec(n){const e=new ht(n.seconds,n.nanoseconds);return $e.fromTimestamp(e)}function Kl(n,e){const t=(e.baseMutations||[]).map((a=>M_(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const o=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>M_(n.yt,a))),i=ht.fromMillis(e.localWriteTimeMs);return new zE(e.batchId,i,t,r)}function ch(n){const e=Ec(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ec(n.lastLimboFreeSnapshotVersion):$e.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){const o=a.documents.length;return Ue(o===1,1966,{count:o}),Li(Mp(c3(a.documents[0])))})(n.query):(function(a){return Li(h3(a))})(n.query),new _s(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,qn.fromBase64String(n.resumeToken))}function y3(n,e){const t=wc(e.snapshotVersion),r=wc(e.lastLimboFreeSnapshotVersion);let i;i=Y0(e.target)?d3(n.yt,e.target):f3(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_c(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function b3(n){const e=h3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?X0(e,e.limit,"L"):e}function Q1(n,e){return new BE(e.largestBatchId,M_(n.yt,e.overlayMutation))}function ED(n,e){const t=e.path.lastSegment();return[n,Ar(e.path.popLast()),t]}function SD(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:wc(r.readTime),documentKey:Ar(r.documentKey.path),largestBatchId:r.largestBatchId}}class kX{getBundleMetadata(e,t){return TD(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Ec(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return TD(e).put((function(i){return{bundleId:i.id,createTime:wc(jr(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return AD(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:b3(a.bundledQuery),readTime:Ec(a.readTime)}})(r)}))}saveNamedQuery(e,t){return AD(e).put((function(i){return{name:i.name,readTime:wc(jr(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function TD(n){return er(n,Uv)}function AD(n){return er(n,Fv)}class Wv{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Wv(e,r)}getOverlay(e,t){return Kf(e).get(ED(this.userId,t)).next((r=>r?Q1(this.serializer,r):null))}getOverlays(e,t){const r=Oa();return ae.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((a,o)=>{const c=new BE(t,o);i.push(this.St(e,c))})),ae.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((o=>i.add(Ar(o.getCollectionPath()))));const a=[];return i.forEach((o=>{const c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);a.push(Kf(e).Z(w_,c))})),ae.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Oa(),a=Ar(t),o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Kf(e).J(w_,o).next((c=>{for(const u of c){const d=Q1(this.serializer,u);i.set(d.getKey(),d)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const a=Oa();let o;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kf(e).ee({index:_4,range:c},((u,d,h)=>{const p=Q1(this.serializer,d);a.size()<i||p.largestBatchId===o?(a.set(p.getKey(),p),o=p.largestBatchId):h.done()})).next((()=>a))}St(e,t){return Kf(e).put((function(i,a,o){const[c,u,d]=ED(a,o.mutation.key);return{userId:a,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Q0(i.yt,o.mutation)}})(this.serializer,this.userId,t))}}function Kf(n){return er(n,Gv)}class NX{bt(e){return er(e,kE)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?qn.fromUint8Array(r):qn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Xl{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ln(e.integerValue));else if("doubleValue"in e){const r=ln(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Qh(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Vs(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(js(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?M4(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Hv(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Oe(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=md,a=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ln(a)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),De.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Xl.Kt=new Xl;const Tu=255;function MX(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function CD(n){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const o=MX(255&r[a]);if(i+=o,o!==8)break}return i})(n);return Math.ceil(e/8)}class PX{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=CD(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=CD(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Tu),this.sn(255)}_n(){this.an(Tu),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,a,!1),new Uint8Array(o.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Tu?(this.sn(Tu),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Tu?(this.an(Tu),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class OX{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class VX{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Xf{constructor(){this.cn=new PX,this.ln=new OX(this.cn),this.hn=new VX(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Wl{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Wl(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:f0(this.En),directionalValue:f0(this.dn),orderedDocumentKey:f0(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function So(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=ID(n.En,e.En),t!==0?t:(t=ID(n.dn,e.dn),t!==0?t:De.comparator(n.In,e.In)))}function ID(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function f0(n){return YO()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function RD(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class DD{constructor(e){this.mn=new Gt(((t,r)=>gn.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ue(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=b_(e);if(t!==void 0&&!this.wn(t))return!1;const r=Ul(e);let i=new Set,a=0,o=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const u=r[a];if(!this.Sn(c,u)||!this.bn(this.fn[o++],u))return!1}++a}for(;a<r.length;++a){const c=r[a];if(o>=this.fn.length||!this.bn(this.fn[o++],c))return!1}return!0}Dn(){if(this.pn)return null;let e=new Gt(gn.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new i0(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new i0(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new i0(r.field,r.dir==="asc"?0:1)));return new F0(F0.UNKNOWN_ID,this.collectionId,t,Wh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function x3(n){if(Ue(n instanceof wt||n instanceof Ft,20012),n instanceof wt){if(n instanceof F4){const t=n.value.arrayValue?.values?.map((r=>wt.create(n.field,"==",r)))||[];return Ft.create(t,"or")}return n}const e=n.filters.map((t=>x3(t)));return Ft.create(e,n.op)}function jX(n){if(n.getFilters().length===0)return[];const e=V_(x3(n));return Ue(_3(e),7391),P_(e)||O_(e)?[e]:e.getFilters()}function P_(n){return n instanceof wt}function O_(n){return n instanceof Ft&&VE(n)}function _3(n){return P_(n)||O_(n)||(function(t){if(t instanceof Ft&&A_(t)){for(const r of t.getFilters())if(!P_(r)&&!O_(r))return!1;return!0}return!1})(n)}function V_(n){if(Ue(n instanceof wt||n instanceof Ft,34018),n instanceof wt)return n;if(n.filters.length===1)return V_(n.filters[0]);const e=n.filters.map((r=>V_(r)));let t=Ft.create(e,n.op);return t=J0(t),_3(t)?t:(Ue(t instanceof Ft,64498),Ue(bd(t),40251),Ue(t.filters.length>1,57927),t.filters.reduce(((r,i)=>GE(r,i))))}function GE(n,e){let t;return Ue(n instanceof wt||n instanceof Ft,38388),Ue(e instanceof wt||e instanceof Ft,25473),t=n instanceof wt?e instanceof wt?(function(i,a){return Ft.create([i,a],"and")})(n,e):kD(n,e):e instanceof wt?kD(e,n):(function(i,a){if(Ue(i.filters.length>0&&a.filters.length>0,48005),bd(i)&&bd(a))return L4(i,a.getFilters());const o=A_(i)?i:a,c=A_(i)?a:i,u=o.filters.map((d=>GE(d,c)));return Ft.create(u,"or")})(n,e),J0(t)}function kD(n,e){if(bd(e))return L4(e,n.getFilters());{const t=e.filters.map((r=>GE(n,r)));return Ft.create(t,"or")}}function J0(n){if(Ue(n instanceof wt||n instanceof Ft,11850),n instanceof wt)return n;const e=n.getFilters();if(e.length===1)return J0(e[0]);if(j4(n))return n;const t=e.map((i=>J0(i))),r=[];return t.forEach((i=>{i instanceof wt?r.push(i):i instanceof Ft&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Ft.create(r,n.op)}class zX{constructor(){this.Cn=new qE}addToCollectionParentIndex(e,t){return this.Cn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(gi.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class qE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Gt(Mt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gt(Mt.comparator)).toArray()}}const ND="IndexedDbIndexManager",Gm=new Uint8Array(0);class LX{constructor(e,t){this.databaseId=t,this.vn=new qE,this.Fn=new Bs((r=>_c(r)),((r,i)=>Np(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:r,parent:Ar(i)};return MD(e).put(a)}return ae.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[c4(t),""],!1,!0);return MD(e).J(i).next((a=>{for(const o of a){if(o.collectionId!==t)break;r.push(Pa(o.parent))}return r}))}addFieldIndex(e,t){const r=Wf(e),i=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((u=>[u.fieldPath.canonicalString(),u.kind]))}})(t);delete i.indexId;const a=r.add(i);if(t.indexState){const o=Cu(e);return a.next((c=>{o.put(SD(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=Wf(e),i=Cu(e),a=Au(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Wf(e),r=Au(e),i=Cu(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return ae.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new DD(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=Au(e);let i=!0;const a=new Map;return ae.forEach(this.Mn(t),(o=>this.xn(e,o).next((c=>{i&&(i=!!c),a.set(o,c)})))).next((()=>{if(i){let o=gt();const c=[];return ae.forEach(a,((u,d)=>{Se(ND,`Using index ${(function(D){return`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map((O=>`${O.fieldPath}:${O.kind}`)).join(",")}`})(u)} to execute ${_c(t)}`);const h=(function(D,O){const z=b_(O);if(z===void 0)return null;for(const j of K0(D,z.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null})(d,u),p=(function(D,O){const z=new Map;for(const j of Ul(O))for(const C of K0(D,j.fieldPath))switch(C.op){case"==":case"in":z.set(j.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return z.set(j.fieldPath.canonicalString(),C.value),Array.from(z.values())}return null})(d,u),m=(function(D,O){const z=[];let j=!0;for(const C of Ul(O)){const A=C.kind===0?uD(D,C.fieldPath,D.startAt):dD(D,C.fieldPath,D.startAt);z.push(A.value),j&&(j=A.inclusive)}return new yd(z,j)})(d,u),b=(function(D,O){const z=[];let j=!0;for(const C of Ul(O)){const A=C.kind===0?dD(D,C.fieldPath,D.endAt):uD(D,C.fieldPath,D.endAt);z.push(A.value),j&&(j=A.inclusive)}return new yd(z,j)})(d,u),_=this.On(u,d,m),E=this.On(u,d,b),S=this.Nn(u,d,p),T=this.Bn(u.indexId,h,_,m.inclusive,E,b.inclusive,S);return ae.forEach(T,(I=>r.Y(I,t.limit).next((D=>{D.forEach((O=>{const z=De.fromSegments(O.documentKey);o.has(z)||(o=o.add(z),c.push(z))}))}))))})).next((()=>c))}return ae.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=jX(Ft.create(e.filters,"and")).map((r=>I_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,a,o,c){const u=(t!=null?t.length:1)*Math.max(r.length,a.length),d=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){const m=t?this.Ln(t[p/d]):Gm,b=this.kn(e,m,r[p%d],i),_=this.qn(e,m,a[p%d],o),E=c.map((S=>this.kn(e,m,S,!0)));h.push(...this.createRange(b,_,E))}return h}kn(e,t,r,i){const a=new Wl(e,De.empty(),t,r);return i?a:a.An()}qn(e,t,r,i){const a=new Wl(e,De.empty(),t,r);return i?a.An():a}xn(e,t){const r=new DD(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let o=null;for(const c of a)r.yn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return ae.forEach(i,(a=>this.xn(e,a).next((o=>{o?r!==0&&o.fields.length<(function(u){let d=new Gt(gn.comparator),h=!1;for(const p of u.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:d=d.add(m.field));for(const p of u.orderBy)p.field.isKeyField()||(d=d.add(p.field));return d.size+(h?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Xf;for(const i of Ul(e)){const a=t.data.field(i.fieldPath);if(a==null)return null;const o=r.Pn(i.kind);Xl.Kt.Dt(a,o)}return r.un()}Ln(e){const t=new Xf;return Xl.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Xf;return Xl.Kt.Dt(rp(this.databaseId,t),r.Pn((function(a){const o=Ul(a);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Xf);let a=0;for(const o of Ul(e)){const c=r[a++];for(const u of i)if(this.Un(t,o.fieldPath)&&ip(c))i=this.Kn(i,o,c);else{const d=u.Pn(o.kind);Xl.Kt.Dt(c,d)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],a=[];for(const o of r.arrayValue.values||[])for(const c of i){const u=new Xf;u.seed(c.un()),Xl.Kt.Dt(o,u.Pn(t.kind)),a.push(u)}return a}Un(e,t){return!!e.filters.find((r=>r instanceof wt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Wf(e),i=Cu(e);return(t?r.J(__,IDBKeyRange.bound(t,t)):r.J()).next((a=>{const o=[];return ae.forEach(a,(c=>i.get([c.indexId,this.uid]).next((u=>{o.push((function(h,p){const m=p?new Wh(p.sequenceNumber,new gi(Ec(p.readTime),new De(Pa(p.documentKey)),p.largestBatchId)):Wh.empty(),b=h.fields.map((([_,E])=>new i0(gn.fromServerFormat(_),E)));return new F0(h.indexId,h.collectionGroup,b,m)})(c,u))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:at(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Wf(e),a=Cu(e);return this.Gn(e).next((o=>i.J(__,IDBKeyRange.bound(t,t)).next((c=>ae.forEach(c,(u=>a.put(SD(u.indexId,this.uid,o,r))))))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,((i,a)=>{const o=r.get(i.collectionGroup);return(o?ae.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next((c=>(r.set(i.collectionGroup,c),ae.forEach(c,(u=>this.zn(e,i,u).next((d=>{const h=this.jn(a,u);return d.isEqual(h)?ae.resolve():this.Jn(e,a,u,d,h)})))))))}))}Hn(e,t,r,i){return Au(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Au(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Au(e);let a=new Gt(So);return i.ee({index:x4,range:IDBKeyRange.only([r.indexId,this.uid,f0(this.$n(r,t))])},((o,c)=>{a=a.add(new Wl(r.indexId,t,RD(c.arrayValue),RD(c.directionalValue)))})).next((()=>a))}jn(e,t){let r=new Gt(So);const i=this.Qn(t,e);if(i==null)return r;const a=b_(t);if(a!=null){const o=e.data.field(a.fieldPath);if(ip(o))for(const c of o.arrayValue.values||[])r=r.add(new Wl(t.indexId,e.key,this.Ln(c),i))}else r=r.add(new Wl(t.indexId,e.key,Gm,i));return r}Jn(e,t,r,i,a){Se(ND,"Updating index entries for document '%s'",t.key);const o=[];return(function(u,d,h,p,m){const b=u.getIterator(),_=d.getIterator();let E=Su(b),S=Su(_);for(;E||S;){let T=!1,I=!1;if(E&&S){const D=h(E,S);D<0?I=!0:D>0&&(T=!0)}else E!=null?I=!0:T=!0;T?(p(S),S=Su(_)):I?(m(E),E=Su(b)):(E=Su(b),S=Su(_))}})(i,a,So,(c=>{o.push(this.Hn(e,t,r,c))}),(c=>{o.push(this.Yn(e,t,r,c))})),ae.waitFor(o)}Gn(e){let t=1;return Cu(e).ee({index:b4,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((o,c)=>So(o,c))).filter(((o,c,u)=>!c||So(o,u[c-1])!==0));const i=[];i.push(e);for(const o of r){const c=So(o,e),u=So(o,t);if(c===0)i[0]=e.An();else if(c>0&&u<0)i.push(o),i.push(o.An());else if(u>0)break}i.push(t);const a=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const c=i[o].Vn(this.uid,Gm,De.empty()),u=i[o+1].Vn(this.uid,Gm,De.empty());a.push(IDBKeyRange.bound(c,u))}return a}Zn(e,t){return So(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(PD)}getMinOffset(e,t){return ae.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||Oe(44426))))).next(PD)}}function MD(n){return er(n,ep)}function Au(n){return er(n,Ah)}function Wf(n){return er(n,DE)}function Cu(n){return er(n,Th)}function PD(n){Ue(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;CE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new gi(e.readTime,e.documentKey,t)}const OD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},w3=41943040;class wr{static withCacheSize(e){return new wr(e,wr.DEFAULT_COLLECTION_PERCENTILE,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function E3(n,e,t){const r=n.store(ra),i=n.store(fd),a=[],o=IDBKeyRange.only(t.batchId);let c=0;const u=r.ee({range:o},((h,p,m)=>(c++,m.delete())));a.push(u.next((()=>{Ue(c===1,47070,{batchId:t.batchId})})));const d=[];for(const h of t.mutations){const p=m4(e,h.key.path,t.batchId);a.push(i.delete(p)),d.push(h.key)}return ae.waitFor(a).next((()=>d))}function ev(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Oe(14731);e=n.noDocument}return JSON.stringify(e).length}wr.DEFAULT_COLLECTION_PERCENTILE=10,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wr.DEFAULT=new wr(w3,wr.DEFAULT_COLLECTION_PERCENTILE,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wr.DISABLED=new wr(-1,0,0);class Qv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){Ue(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new Qv(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return To(e).ee({index:ec,range:r},((i,a,o)=>{t=!1,o.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const a=Pu(e),o=To(e);return o.add({}).next((c=>{Ue(typeof c=="number",49019);const u=new zE(c,t,r,i),d=(function(b,_,E){const S=E.baseMutations.map((I=>Q0(b.yt,I))),T=E.mutations.map((I=>Q0(b.yt,I)));return{userId:_,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:S,mutations:T}})(this.serializer,this.userId,u),h=[];let p=new Gt(((m,b)=>at(m.canonicalString(),b.canonicalString())));for(const m of i){const b=m4(this.userId,m.key.path,c);p=p.add(m.key.path.popLast()),h.push(o.put(d)),h.push(a.put(b,hK))}return p.forEach((m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))})),e.addOnCommittedListener((()=>{this.Xn[c]=u.keys()})),ae.waitFor(h).next((()=>u))}))}lookupMutationBatch(e,t){return To(e).get(t).next((r=>r?(Ue(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Kl(this.serializer,r)):null))}er(e,t){return this.Xn[t]?ae.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return To(e).ee({index:ec,range:i},((o,c,u)=>{c.userId===this.userId&&(Ue(c.batchId>=r,47524,{tr:r}),a=Kl(this.serializer,c)),u.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ac;return To(e).ee({index:ec,range:t,reverse:!0},((i,a,o)=>{r=a.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ac],[this.userId,Number.POSITIVE_INFINITY]);return To(e).J(ec,t).next((r=>r.map((i=>Kl(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=a0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Pu(e).ee({range:i},((o,c,u)=>{const[d,h,p]=o,m=Pa(h);if(d===this.userId&&t.path.isEqual(m))return To(e).get(p).next((b=>{if(!b)throw Oe(61480,{nr:o,batchId:p});Ue(b.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:b.userId,batchId:p}),a.push(Kl(this.serializer,b))}));u.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(at);const i=[];return t.forEach((a=>{const o=a0(this.userId,a.path),c=IDBKeyRange.lowerBound(o),u=Pu(e).ee({range:c},((d,h,p)=>{const[m,b,_]=d,E=Pa(b);m===this.userId&&a.path.isEqual(E)?r=r.add(_):p.done()}));i.push(u)})),ae.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=a0(this.userId,r),o=IDBKeyRange.lowerBound(a);let c=new Gt(at);return Pu(e).ee({range:o},((u,d,h)=>{const[p,m,b]=u,_=Pa(m);p===this.userId&&r.isPrefixOf(_)?_.length===i&&(c=c.add(b)):h.done()})).next((()=>this.rr(e,c)))}rr(e,t){const r=[],i=[];return t.forEach((a=>{i.push(To(e).get(a).next((o=>{if(o===null)throw Oe(35274,{batchId:a});Ue(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:a}),r.push(Kl(this.serializer,o))})))})),ae.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return E3(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),ae.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),i=[];return Pu(e).ee({range:r},((a,o,c)=>{if(a[0]===this.userId){const u=Pa(a[1]);i.push(u)}else c.done()})).next((()=>{Ue(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return S3(e,this.userId,t)}_r(e){return T3(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ac,lastStreamToken:""}))}}function S3(n,e,t){const r=a0(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let o=!1;return Pu(n).ee({range:a,X:!0},((c,u,d)=>{const[h,p,m]=c;h===e&&p===i&&(o=!0),d.done()})).next((()=>o))}function To(n){return er(n,ra)}function Pu(n){return er(n,fd)}function T3(n){return er(n,Zh)}class Sc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Sc(0)}static cr(){return new Sc(-1)}}class BX{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Sc(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>$e.fromTimestamp(new ht(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Iu(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Ue(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const a=[];return Iu(e).ee(((o,c)=>{const u=ch(c);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,a.push(this.removeTargetData(e,u)))})).next((()=>ae.waitFor(a))).next((()=>i))}forEachTarget(e,t){return Iu(e).ee(((r,i)=>{const a=ch(i);t(a)}))}lr(e){return VD(e).get(H0).next((t=>(Ue(t!==null,2888),t)))}hr(e,t){return VD(e).put(H0,t)}Pr(e,t){return Iu(e).put(y3(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=_c(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Iu(e).ee({range:i,index:y4},((o,c,u)=>{const d=ch(c);Np(t,d.target)&&(a=d,u.done())})).next((()=>a))}addMatchingKeys(e,t,r){const i=[],a=ko(e);return t.forEach((o=>{const c=Ar(o.path);i.push(a.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,o))})),ae.waitFor(i)}removeMatchingKeys(e,t,r){const i=ko(e);return ae.forEach(t,(a=>{const o=Ar(a.path);return ae.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=ko(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ko(e);let a=gt();return i.ee({range:r,X:!0},((o,c,u)=>{const d=Pa(o[1]),h=new De(d);a=a.add(h)})).next((()=>a))}containsKey(e,t){const r=Ar(t.path),i=IDBKeyRange.bound([r],[c4(r)],!1,!0);let a=0;return ko(e).ee({index:RE,X:!0,range:i},(([o,c],u,d)=>{o!==0&&(a++,d.done())})).next((()=>a>0))}At(e,t){return Iu(e).get(t).next((r=>r?ch(r):null))}}function Iu(n){return er(n,hd)}function VD(n){return er(n,sc)}function ko(n){return er(n,pd)}const jD="LruGarbageCollector",UX=1048576;function zD([n,e],[t,r]){const i=at(n,t);return i===0?at(e,r):i}class FX{constructor(e){this.Ir=e,this.buffer=new Gt(zD),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();zD(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class A3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(jD,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){sl(t)?Se(jD,"Ignoring IndexedDB error during garbage collection: ",t):await kc(t)}await this.Vr(3e5)}))}}class GX{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(Vi.ce);const r=new FX(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(OD)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OD):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,o,c,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(r=p,c=Date.now(),this.removeTargets(e,r,t)))).next((p=>(a=p,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(d=Date.now(),Du()<=_t.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p}))))}}function C3(n,e){return new GX(n,e)}class qX{constructor(e,t){this.db=e,this.garbageCollector=C3(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return qm(e,r)}removeReference(e,t,r){return qm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qm(e,t)}br(e,t){return(function(i,a){let o=!1;return T3(i).te((c=>S3(i,c,a).next((u=>(u&&(o=!0),ae.resolve(!u)))))).next((()=>o))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((o,c)=>{if(c<=t){const u=this.br(e,o).next((d=>{if(!d)return a++,r.getEntry(e,o).next((()=>(r.removeEntry(o,$e.min()),ko(e).delete((function(p){return[0,Ar(p.path)]})(o)))))}));i.push(u)}})).next((()=>ae.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qm(e,t)}Sr(e,t){const r=ko(e);let i,a=Vi.ce;return r.ee({index:RE},(([o,c],{path:u,sequenceNumber:d})=>{o===0?(a!==Vi.ce&&t(new De(Pa(i)),a),a=d,i=u):a=Vi.ce})).next((()=>{a!==Vi.ce&&t(new De(Pa(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qm(n,e){return ko(n).put((function(r,i){return{targetId:0,path:Ar(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class I3{constructor(){this.changes=new Bs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class HX{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return jl(e).put(r)}removeEntry(e,t,r){return jl(e).delete((function(a,o){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Z0(o),c[c.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=_n.newInvalidDocument(t);return jl(e).ee({index:s0,range:IDBKeyRange.only(Qf(t))},((i,a)=>{r=this.Cr(t,a)})).next((()=>r))}vr(e,t){let r={size:0,document:_n.newInvalidDocument(t)};return jl(e).ee({index:s0,range:IDBKeyRange.only(Qf(t))},((i,a)=>{r={document:this.Cr(t,a),size:ev(a)}})).next((()=>r))}getEntries(e,t){let r=fi();return this.Fr(e,t,((i,a)=>{const o=this.Cr(i,a);r=r.insert(i,o)})).next((()=>r))}Mr(e,t){let r=fi(),i=new un(De.comparator);return this.Fr(e,t,((a,o)=>{const c=this.Cr(a,o);r=r.insert(a,c),i=i.insert(a,ev(o))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return ae.resolve();let i=new Gt(UD);t.forEach((u=>i=i.add(u)));const a=IDBKeyRange.bound(Qf(i.first()),Qf(i.last())),o=i.getIterator();let c=o.getNext();return jl(e).ee({index:s0,range:a},((u,d,h)=>{const p=De.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;c&&UD(c,p)<0;)r(c,null),c=o.getNext();c&&c.isEqual(p)&&(r(c,d),c=o.hasNext()?o.getNext():null),c?h.j(Qf(c)):h.done()})).next((()=>{for(;c;)r(c,null),c=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,a){const o=t.path,c=[o.popLast().toArray(),o.lastSegment(),Z0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jl(e).J(IDBKeyRange.bound(c,u,!0)).next((d=>{a?.incrementDocumentReadCount(d.length);let h=fi();for(const p of d){const m=this.Cr(De.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Pp(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h}))}getAllFromCollectionGroup(e,t,r,i){let a=fi();const o=BD(t,r),c=BD(t,gi.max());return jl(e).ee({index:v4,range:IDBKeyRange.bound(o,c,!0)},((u,d,h)=>{const p=this.Cr(De.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);a=a.insert(p.key,p),a.size===i&&h.done()})).next((()=>a))}newChangeBuffer(e){return new $X(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return LD(e).get(x_).next((t=>(Ue(!!t,20021),t)))}Dr(e,t){return LD(e).put(x_,t)}Cr(e,t){if(t){const r=DX(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual($e.min())))return r}return _n.newInvalidDocument(e)}}function R3(n){return new HX(n)}class $X extends I3{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Bs((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new Gt(((a,o)=>at(a.canonicalString(),o.canonicalString())));return this.changes.forEach(((a,o)=>{const c=this.Br.get(a);if(t.push(this.Nr.removeEntry(e,a,c.readTime)),o.isValidDocument()){const u=wD(this.Nr.serializer,o);i=i.add(a.path.popLast());const d=ev(u);r+=d-c.size,t.push(this.Nr.addEntry(e,a,u))}else if(r-=c.size,this.trackRemovals){const u=wD(this.Nr.serializer,o.convertToNoDocument($e.min()));t.push(this.Nr.addEntry(e,a,u))}})),i.forEach((a=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Nr.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((a,o)=>{this.Br.set(a,{size:o,readTime:r.get(a).readTime})})),r)))}}function LD(n){return er(n,Jh)}function jl(n){return er(n,q0)}function Qf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function BD(n,e){const t=e.documentKey.path.toArray();return[n,Z0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function UD(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=at(t[a],r[a]),i)return i;return i=at(t.length,r.length),i||(i=at(t[t.length-2],r[r.length-2]),i||at(t[t.length-1],r[r.length-1]))}class YX{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class D3{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Dh(r.mutation,i,Xr.empty(),ht.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,gt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=gt()){const i=Oa();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let o=oh();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const r=Oa();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,gt())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{t.set(o,c)}))}))}computeViews(e,t,r,i){let a=fi();const o=Rh(),c=(function(){return Rh()})();return t.forEach(((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Us)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Dh(h.mutation,d,h.mutation.getFieldMask(),ht.now())):o.set(d.key,Xr.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((d,h)=>o.set(d,h))),t.forEach(((d,h)=>c.set(d,new YX(h,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=Rh();let i=new un(((o,c)=>o-c)),a=gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const c of o)c.keys().forEach((u=>{const d=t.get(u);if(d===null)return;let h=r.get(u)||Xr.empty();h=c.applyToLocalView(d,h),r.set(u,h);const p=(i.get(c.batchId)||gt()).add(u);i=i.insert(c.batchId,p)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,p=K4();h.forEach((m=>{if(!a.has(m)){const b=e3(t.get(m),r.get(m));b!==null&&p.set(m,b),a=a.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return ae.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return De.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):G4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ae.resolve(Oa());let c=Xh,u=a;return o.next((d=>ae.forEach(d,((h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),a.get(h)?ae.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{u=u.insert(h,m)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,u,d,gt()))).next((h=>({batchId:c,changes:Y4(h)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new De(t)).next((r=>{let i=oh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=oh();return this.indexManager.getCollectionParents(e,a).next((c=>ae.forEach(c,(u=>{const d=(function(p,m){return new Ud(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((h=>{h.forEach(((p,m)=>{o=o.insert(p,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((o=>{a.forEach(((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,_n.newInvalidDocument(h)))}));let c=oh();return o.forEach(((u,d)=>{const h=a.get(u);h!==void 0&&Dh(h.mutation,d,Xr.empty(),ht.now()),Pp(t,d)&&(c=c.insert(u,d))})),c}))}}class KX{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:jr(i.createTime)}})(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:b3(i.bundledQuery),readTime:jr(i.readTime)}})(t)),ae.resolve()}}class XX{constructor(){this.overlays=new un(De.comparator),this.qr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Oa();return ae.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=Oa(),a=t.length+1,o=new De(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new un(((d,h)=>d-h));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=a.get(d.largestBatchId);h===null&&(h=Oa(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=Oa(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,h)=>c.set(d,h))),!(c.size()>=i)););return ae.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new BE(t,r));let a=this.qr.get(t);a===void 0&&(a=gt(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}class WX{constructor(){this.sessionToken=qn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}class HE{constructor(){this.Qr=new Gt(ir.$r),this.Ur=new Gt(ir.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new ir(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new ir(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new De(new Mt([])),r=new ir(t,e),i=new ir(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new De(new Mt([])),r=new ir(t,e),i=new ir(t,e+1);let a=gt();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const t=new ir(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ir{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return De.comparator(e.key,t.key)||at(e.Yr,t.Yr)}static Kr(e,t){return at(e.Yr,t.Yr)||De.comparator(e.key,t.key)}}class QX{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Gt(ir.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zE(a,t,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new ir(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ae.resolve(o)}lookupMutationBatch(e,t){return ae.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?ac:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ir(t,0),i=new ir(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(at);return t.forEach((i=>{const a=new ir(i,0),o=new ir(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),ae.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;De.isDocumentKey(a)||(a=a.child(""));const o=new ir(new De(a),0);let c=new Gt(at);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)}),o),ae.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Ue(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ae.forEach(t.mutations,(i=>{const a=new ir(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new ir(t,0),i=this.Zr.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ZX{constructor(e){this.ri=e,this.docs=(function(){return new un(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let r=fi();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():_n.newInvalidDocument(i))})),ae.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=fi();const o=t.path,c=new De(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||CE(f4(h),r)<=0||(i.has(h.key)||Pp(t,h))&&(a=a.insert(h.key,h.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Oe(9500)}ii(e,t){return ae.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new JX(this)}getSize(e){return ae.resolve(this.size)}}class JX extends I3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ae.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class eW{constructor(e){this.persistence=e,this.si=new Bs((t=>_c(t)),Np),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.oi=0,this._i=new HE,this.targetCount=0,this.ai=Sc.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ae.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Sc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Pr(t),ae.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),ae.waitFor(a).next((()=>i))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),ae.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this._i.containsKey(t))}}class $E{constructor(e,t){this.ui={},this.overlays={},this.ci=new Vi(0),this.li=!1,this.li=!0,this.hi=new WX,this.referenceDelegate=e(this),this.Pi=new eW(this),this.indexManager=new zX,this.remoteDocumentCache=(function(i){return new ZX(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new v3(t),this.Ii=new KX(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new XX,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new QX(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Se("MemoryPersistence","Starting transaction:",e);const i=new tW(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return ae.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class tW extends p4{constructor(e){super(),this.currentSequenceNumber=e}}class Zv{constructor(e){this.persistence=e,this.Ri=new HE,this.Vi=null}static mi(e){return new Zv(e)}get fi(){if(this.Vi)return this.Vi;throw Oe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(r=>{const i=De.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,$e.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ae.or([()=>ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class tv{constructor(e,t){this.persistence=e,this.pi=new Bs((r=>Ar(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=C3(this,t)}static mi(e,t){return new tv(e,t)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ae.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?ae.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,t).next((c=>{c||(r++,a.removeEntry(o,$e.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=l0(e.data.value)),t}br(e,t,r){return ae.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ae.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class nW{constructor(e){this.serializer=e}k(e,t,r,i){const a=new Lv("createOrUpgrade",t);r<1&&i>=1&&((function(u){u.createObjectStore(kp)})(e),(function(u){u.createObjectStore(Zh,{keyPath:fK}),u.createObjectStore(ra,{keyPath:ZR,autoIncrement:!0}).createIndex(ec,JR,{unique:!0}),u.createObjectStore(fd)})(e),FD(e),(function(u){u.createObjectStore(Fl)})(e));let o=ae.resolve();return r<3&&i>=3&&(r!==0&&((function(u){u.deleteObjectStore(pd),u.deleteObjectStore(hd),u.deleteObjectStore(sc)})(e),FD(e)),o=o.next((()=>(function(u){const d=u.store(sc),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$e.min().toTimestamp(),targetCount:0};return d.put(H0,h)})(a)))),r<4&&i>=4&&(r!==0&&(o=o.next((()=>(function(u,d){return d.store(ra).J().next((p=>{u.deleteObjectStore(ra),u.createObjectStore(ra,{keyPath:ZR,autoIncrement:!0}).createIndex(ec,JR,{unique:!0});const m=d.store(ra),b=p.map((_=>m.put(_)));return ae.waitFor(b)}))})(e,a)))),o=o.next((()=>{(function(u){u.createObjectStore(gd,{keyPath:_K})})(e)}))),r<5&&i>=5&&(o=o.next((()=>this.yi(a)))),r<6&&i>=6&&(o=o.next((()=>((function(u){u.createObjectStore(Jh)})(e),this.wi(a))))),r<7&&i>=7&&(o=o.next((()=>this.Si(a)))),r<8&&i>=8&&(o=o.next((()=>this.bi(e,a)))),r<9&&i>=9&&(o=o.next((()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(o=o.next((()=>this.Di(a)))),r<11&&i>=11&&(o=o.next((()=>{(function(u){u.createObjectStore(Uv,{keyPath:wK})})(e),(function(u){u.createObjectStore(Fv,{keyPath:EK})})(e)}))),r<12&&i>=12&&(o=o.next((()=>{(function(u){const d=u.createObjectStore(Gv,{keyPath:DK});d.createIndex(w_,kK,{unique:!1}),d.createIndex(_4,NK,{unique:!1})})(e)}))),r<13&&i>=13&&(o=o.next((()=>(function(u){const d=u.createObjectStore(q0,{keyPath:pK});d.createIndex(s0,gK),d.createIndex(v4,mK)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(Fl)))),r<14&&i>=14&&(o=o.next((()=>this.Fi(e,a)))),r<15&&i>=15&&(o=o.next((()=>(function(u){u.createObjectStore(DE,{keyPath:SK,autoIncrement:!0}).createIndex(__,TK,{unique:!1}),u.createObjectStore(Th,{keyPath:AK}).createIndex(b4,CK,{unique:!1}),u.createObjectStore(Ah,{keyPath:IK}).createIndex(x4,RK,{unique:!1})})(e)))),r<16&&i>=16&&(o=o.next((()=>{t.objectStore(Th).clear()})).next((()=>{t.objectStore(Ah).clear()}))),r<17&&i>=17&&(o=o.next((()=>{(function(u){u.createObjectStore(kE,{keyPath:MK})})(e)}))),r<18&&i>=18&&YO()&&(o=o.next((()=>{t.objectStore(Th).clear()})).next((()=>{t.objectStore(Ah).clear()}))),o}wi(e){let t=0;return e.store(Fl).ee(((r,i)=>{t+=ev(i)})).next((()=>{const r={byteSize:t};return e.store(Jh).put(x_,r)}))}yi(e){const t=e.store(Zh),r=e.store(ra);return t.J().next((i=>ae.forEach(i,(a=>{const o=IDBKeyRange.bound([a.userId,ac],[a.userId,a.lastAcknowledgedBatchId]);return r.J(ec,o).next((c=>ae.forEach(c,(u=>{Ue(u.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});const d=Kl(this.serializer,u);return E3(e,a.userId,d).next((()=>{}))}))))}))))}Si(e){const t=e.store(pd),r=e.store(Fl);return e.store(sc).get(H0).next((i=>{const a=[];return r.ee(((o,c)=>{const u=new Mt(o),d=(function(p){return[0,Ar(p)]})(u);a.push(t.get(d).next((h=>h?ae.resolve():(p=>t.put({targetId:0,path:Ar(p),sequenceNumber:i.highestListenSequenceNumber}))(u))))})).next((()=>ae.waitFor(a)))}))}bi(e,t){e.createObjectStore(ep,{keyPath:xK});const r=t.store(ep),i=new qE,a=o=>{if(i.add(o)){const c=o.lastSegment(),u=o.popLast();return r.put({collectionId:c,parent:Ar(u)})}};return t.store(Fl).ee({X:!0},((o,c)=>{const u=new Mt(o);return a(u.popLast())})).next((()=>t.store(fd).ee({X:!0},(([o,c,u],d)=>{const h=Pa(c);return a(h.popLast())}))))}Di(e){const t=e.store(hd);return t.ee(((r,i)=>{const a=ch(i),o=y3(this.serializer,a);return t.put(o)}))}Ci(e,t){const r=t.store(Fl),i=[];return r.ee(((a,o)=>{const c=t.store(q0),u=(function(p){return p.document?new De(Mt.fromString(p.document.name).popFirst(5)):p.noDocument?De.fromSegments(p.noDocument.path):p.unknownDocument?De.fromSegments(p.unknownDocument.path):Oe(36783)})(o).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(c.put(d))})).next((()=>ae.waitFor(i)))}Fi(e,t){const r=t.store(ra),i=R3(this.serializer),a=new $E(Zv.mi,this.serializer.yt);return r.J().next((o=>{const c=new Map;return o.forEach((u=>{let d=c.get(u.userId)??gt();Kl(this.serializer,u).keys().forEach((h=>d=d.add(h))),c.set(u.userId,d)})),ae.forEach(c,((u,d)=>{const h=new gr(d),p=Wv.wt(this.serializer,h),m=a.getIndexManager(h),b=Qv.wt(h,this.serializer,m,a.referenceDelegate);return new D3(i,b,p,m).recalculateAndSaveOverlaysForDocumentKeys(new E_(t,Vi.ce),u).next()}))}))}}function FD(n){n.createObjectStore(pd,{keyPath:yK}).createIndex(RE,bK,{unique:!0}),n.createObjectStore(hd,{keyPath:"targetId"}).createIndex(y4,vK,{unique:!0}),n.createObjectStore(sc)}const Ao="IndexedDbPersistence",Z1=18e5,J1=5e3,ex="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rW="main";class YE{constructor(e,t,r,i,a,o,c,u,d,h,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=a,this.window=o,this.document=c,this.xi=d,this.Oi=h,this.Ni=p,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!YE.v())throw new Ce(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qX(this,i),this.$i=t+rW,this.serializer=new v3(u),this.Ui=new Ho(this.$i,this.Ni,new nW(this.serializer)),this.hi=new NX,this.Pi=new BX(this.referenceDelegate,this.serializer),this.remoteDocumentCache=R3(this.serializer),this.Ii=new kX,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&Pr(Ao,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ce(ge.FAILED_PRECONDITION,ex);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Vi(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Hm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(sl(e))return Se(Ao,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Se(Ao,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Zf(e).get(Eu).next((t=>ae.resolve(this.es(t))))}ts(e){return Hm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Z1)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=er(t,gd);return r.J().next((i=>{const a=this.ss(i,Z1),o=i.filter((c=>a.indexOf(c)===-1));return ae.forEach(o,(c=>r.delete(c.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ae.resolve(!0):Zf(e).get(Eu).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,J1)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new Ce(ge.FAILED_PRECONDITION,ex);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hm(e).J().next((r=>this.ss(r,J1).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(a||o&&c)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Se(Ao,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[kp,gd],(e=>{const t=new E_(e,Vi.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Hm(e).J().next((t=>this.ss(t,Z1).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Qv.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new LX(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Wv.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Se(Ao,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",a=(function(u){return u===18?VK:u===17?T4:u===16?OK:u===15?NE:u===14?S4:u===13?E4:u===12?PK:u===11?w4:void Oe(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,i,a,(c=>(o=new E_(c,this.ci?this.ci.next():Vi.ce),t==="readwrite-primary"?this.Hi(o).next((u=>!!u||this.Yi(o))).next((u=>{if(!u)throw Pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Ce(ge.FAILED_PRECONDITION,h4);return r(o)})).next((u=>this.Xi(o).next((()=>u)))):this.Is(o).next((()=>r(o)))))).then((c=>(o.raiseOnCommittedEvent(),c)))}Is(e){return Zf(e).get(Eu).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,J1)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ce(ge.FAILED_PRECONDITION,ex)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zf(e).put(Eu,t)}static v(){return Ho.v()}Zi(e){const t=Zf(e);return t.get(Eu).next((r=>this.es(r)?(Se(Ao,"Releasing primary lease."),t.delete(Eu)):ae.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Pr(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;$O()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return Se(Ao,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Pr(Ao,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zf(n){return er(n,kp)}function Hm(n){return er(n,gd)}function iW(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class KE{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=gt(),i=gt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new KE(e,t.fromCache,r,i)}}class aW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class k3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return $O()?8:g4(Jn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new aW;return this.Ss(e,t,o).next((c=>{if(a.result=c,this.Vs)return this.bs(e,t,o,c.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Du()<=_t.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",ku(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(Du()<=_t.DEBUG&&Se("QueryEngine","Query:",ku(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Du()<=_t.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",ku(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(t))):ae.resolve())}ys(e,t){if(fD(t))return ae.resolve(null);let r=Li(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=X0(t,null,"F"),r=Li(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=gt(...a);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.Ds(t,c);return this.Cs(t,d,o,u.readTime)?this.ys(e,X0(t,null,"F")):this.vs(e,d,t,u)}))))})))))}ws(e,t,r,i){return fD(t)||i.isEqual($e.min())?ae.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(t,a);return this.Cs(t,o,r,i)?ae.resolve(null):(Du()<=_t.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ku(t)),this.vs(e,o,t,aK(i,Xh)).next((c=>c)))}))}Ds(e,t){let r=new Gt(H4(e));return t.forEach(((i,a)=>{Pp(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Du()<=_t.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",ku(t)),this.ps.getDocumentsMatchingQuery(e,t,gi.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((o=>{a=a.insert(o.key,o)})),a)))}}const XE="LocalStore",sW=3e8;class oW{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new un(at),this.xs=new Bs((a=>_c(a)),Np),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function N3(n,e,t,r){return new oW(n,e,t,r)}async function M3(n,e){const t=ot(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=gt();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function lW(n,e){const t=ot(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,h){const p=d.batch,m=p.keys();let b=ae.resolve();return m.forEach((_=>{b=b.next((()=>h.getEntry(u,_))).next((E=>{const S=d.docVersions.get(_);Ue(S!==null,48541),E.version.compareTo(S)<0&&(p.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),h.addEntry(E)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(u,p)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=gt();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function P3(n){const e=ot(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function cW(n,e){const t=ot(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach(((h,p)=>{const m=i.get(p);if(!m)return;c.push(t.Pi.removeMatchingKeys(a,h.removedDocuments,p).next((()=>t.Pi.addMatchingKeys(a,h.addedDocuments,p))));let b=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(qn.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,r)),i=i.insert(p,b),(function(E,S,T){return E.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=sW?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(m,b,h)&&c.push(t.Pi.updateTargetData(a,b))}));let u=fi(),d=gt();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,h))})),c.push(uW(a,o,e.documentUpdates).next((h=>{u=h.ks,d=h.qs}))),!r.isEqual($e.min())){const h=t.Pi.getLastRemoteSnapshotVersion(a).next((p=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(h)}return ae.waitFor(c).next((()=>o.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,u,d))).next((()=>u))})).then((a=>(t.Ms=i,a)))}function uW(n,e,t){let r=gt(),i=gt();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let o=fi();return t.forEach(((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual($e.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Se(XE,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function dW(n,e){const t=ot(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ac),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function fW(n,e){const t=ot(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,ae.resolve(i)):t.Pi.allocateTargetId(r).next((o=>(i=new _s(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function j_(n,e,t){const r=ot(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!sl(o))throw o;Se(XE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function GD(n,e,t){const r=ot(n);let i=$e.min(),a=gt();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,d,h){const p=ot(u),m=p.xs.get(h);return m!==void 0?ae.resolve(p.Ms.get(m)):p.Pi.getTargetData(d,h)})(r,o,Li(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:$e.min(),t?a:gt()))).next((c=>(hW(r,QK(e),c),{documents:c,Qs:a})))))}function hW(n,e,t){let r=n.Os.get(e)||$e.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class qD{constructor(){this.activeTargetIds=rX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class O3{constructor(){this.Mo=new qD,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qD,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pW{Oo(e){}shutdown(){}}const HD="ConnectivityMonitor";class $D{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(HD,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(HD,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let $m=null;function z_(){return $m===null?$m=(function(){return 268435456+Math.round(2147483648*Math.random())})():$m++,"0x"+$m.toString(16)}const tx="RestConnection",gW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===$0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const o=z_(),c=this.zo(e,t.toUriEncodedString());Se(tx,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:d}=new URL(c),h=zd(d);return this.Jo(e,c,u,r,h).then((p=>(Se(tx,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw bc(tx,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p}))}Ho(e,t,r,i,a,o){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=gW[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class vW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const _r="WebChannelConnection";class yW extends mW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=z_();return new Promise(((c,u)=>{const d=new n4;d.setWithCredentials(!0),d.listenOnce(r4.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case r0.NO_ERROR:const p=d.getResponseJson();Se(_r,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case r0.TIMEOUT:Se(_r,`RPC '${e}' ${o} timed out`),u(new Ce(ge.DEADLINE_EXCEEDED,"Request time out"));break;case r0.HTTP_ERROR:const m=d.getStatus();if(Se(_r,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const _=b?.error;if(_&&_.status&&_.message){const E=(function(T){const I=T.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(I)>=0?I:ge.UNKNOWN})(_.status);u(new Ce(E,_.message))}else u(new Ce(ge.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Ce(ge.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Se(_r,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(i);Se(_r,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)}))}T_(e,t,r){const i=z_(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=s4(),c=a4(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const h=a.join("");Se(_r,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=o.createWebChannel(h,u);this.I_(p);let m=!1,b=!1;const _=new vW({Yo:S=>{b?Se(_r,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(Se(_r,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),Se(_r,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},Zo:()=>p.close()}),E=(S,T,I)=>{S.listen(T,(D=>{try{I(D)}catch(O){setTimeout((()=>{throw O}),0)}}))};return E(p,sh.EventType.OPEN,(()=>{b||(Se(_r,`RPC '${e}' stream ${i} transport opened.`),_.o_())})),E(p,sh.EventType.CLOSE,(()=>{b||(b=!0,Se(_r,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(p))})),E(p,sh.EventType.ERROR,(S=>{b||(b=!0,bc(_r,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),_.a_(new Ce(ge.UNAVAILABLE,"The operation could not be completed")))})),E(p,sh.EventType.MESSAGE,(S=>{if(!b){const T=S.data[0];Ue(!!T,16349);const I=T,D=I?.error||I[0]?.error;if(D){Se(_r,`RPC '${e}' stream ${i} received error:`,D);const O=D.status;let z=(function(A){const k=Ln[A];if(k!==void 0)return r3(k)})(O),j=D.message;z===void 0&&(z=ge.INTERNAL,j="Unknown error status: "+O+" with message "+D.message),b=!0,_.a_(new Ce(z,j)),p.close()}else Se(_r,`RPC '${e}' stream ${i} received:`,T),_.u_(T)}})),E(c,i4.STAT_EVENT,(S=>{S.stat===v_.PROXY?Se(_r,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===v_.NOPROXY&&Se(_r,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function bW(){return typeof window<"u"?window:null}function h0(){return typeof document<"u"?document:null}function Jv(n){return new xX(n,!0)}class V3{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const YD="PersistentStream";class j3{constructor(e,t,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new V3(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ce(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(YD,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Se(YD,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xW extends j3{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=EX(this.serializer,e),r=(function(a){if(!("targetChange"in a))return $e.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?$e.min():o.readTime?jr(o.readTime):$e.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=N_(this.serializer),t.addTarget=(function(a,o){let c;const u=o.target;if(c=Y0(u)?{documents:d3(a,u)}:{query:f3(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=s3(a,o.resumeToken);const d=D_(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo($e.min())>0){c.readTime=wd(a,o.snapshotVersion.toTimestamp());const d=D_(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const r=TX(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=N_(this.serializer),t.removeTarget=e,this.q_(t)}}class _W extends j3{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=SX(e.writeResults,e.commitTime),r=jr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=N_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Q0(this.serializer,r)))};this.q_(t)}}class wW{}class EW extends wW{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ce(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,k_(t,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ce(ge.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,k_(t,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ce(ge.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class SW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pr(t),this.aa=!1):Se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Tc="RemoteStore";class TW{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Nc(this)&&(Se(Tc,"Restarting streams for network reachability change."),await(async function(u){const d=ot(u);d.Ea.add(4),await jp(d),d.Ra.set("Unknown"),d.Ea.delete(4),await ey(d)})(this))}))})),this.Ra=new SW(r,i)}}async function ey(n){if(Nc(n))for(const e of n.da)await e(!0)}async function jp(n){for(const e of n.da)await e(!1)}function z3(n,e){const t=ot(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),JE(t)?ZE(t):Gd(t).O_()&&QE(t,e))}function WE(n,e){const t=ot(n),r=Gd(t);t.Ia.delete(e),r.O_()&&L3(t,e),t.Ia.size===0&&(r.O_()?r.L_():Nc(t)&&t.Ra.set("Unknown"))}function QE(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gd(n).Y_(e)}function L3(n,e){n.Va.Ue(e),Gd(n).Z_(e)}function ZE(n){n.Va=new mX({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Gd(n).start(),n.Ra.ua()}function JE(n){return Nc(n)&&!Gd(n).x_()&&n.Ia.size>0}function Nc(n){return ot(n).Ea.size===0}function B3(n){n.Va=void 0}async function AW(n){n.Ra.set("Online")}async function CW(n){n.Ia.forEach(((e,t)=>{QE(n,e)}))}async function IW(n,e){B3(n),JE(n)?(n.Ra.ha(e),ZE(n)):n.Ra.set("Unknown")}async function RW(n,e,t){if(n.Ra.set("Online"),e instanceof a3&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){Se(Tc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nv(n,r)}else if(e instanceof d0?n.Va.Ze(e):e instanceof i3?n.Va.st(e):n.Va.tt(e),!t.isEqual($e.min()))try{const r=await P3(n.localStore);t.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.Ia.get(d);h&&a.Ia.set(d,h.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,d)=>{const h=a.Ia.get(u);if(!h)return;a.Ia.set(u,h.withResumeToken(qn.EMPTY_BYTE_STRING,h.snapshotVersion)),L3(a,u);const p=new _s(h.target,u,d,h.sequenceNumber);QE(a,p)})),a.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){Se(Tc,"Failed to raise snapshot:",r),await nv(n,r)}}async function nv(n,e,t){if(!sl(e))throw e;n.Ea.add(1),await jp(n),n.Ra.set("Offline"),t||(t=()=>P3(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Se(Tc,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ey(n)}))}function U3(n,e){return e().catch((t=>nv(n,t,e)))}async function zp(n){const e=ot(n),t=el(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ac;for(;DW(e);)try{const i=await dW(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,kW(e,i)}catch(i){await nv(e,i)}F3(e)&&G3(e)}function DW(n){return Nc(n)&&n.Ta.length<10}function kW(n,e){n.Ta.push(e);const t=el(n);t.O_()&&t.X_&&t.ea(e.mutations)}function F3(n){return Nc(n)&&!el(n).x_()&&n.Ta.length>0}function G3(n){el(n).start()}async function NW(n){el(n).ra()}async function MW(n){const e=el(n);for(const t of n.Ta)e.ea(t.mutations)}async function PW(n,e,t){const r=n.Ta.shift(),i=LE.from(r,e,t);await U3(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await zp(n)}async function OW(n,e){e&&el(n).X_&&await(async function(r,i){if((function(o){return hX(o)&&o!==ge.ABORTED})(i.code)){const a=r.Ta.shift();el(r).B_(),await U3(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await zp(r)}})(n,e),F3(n)&&G3(n)}async function KD(n,e){const t=ot(n);t.asyncQueue.verifyOperationInProgress(),Se(Tc,"RemoteStore received new credentials");const r=Nc(t);t.Ea.add(3),await jp(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ey(t)}async function VW(n,e){const t=ot(n);e?(t.Ea.delete(2),await ey(t)):e||(t.Ea.add(2),await jp(t),t.Ra.set("Unknown"))}function Gd(n){return n.ma||(n.ma=(function(t,r,i){const a=ot(t);return a.sa(),new xW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:AW.bind(null,n),t_:CW.bind(null,n),r_:IW.bind(null,n),H_:RW.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),JE(n)?ZE(n):n.Ra.set("Unknown")):(await n.ma.stop(),B3(n))}))),n.ma}function el(n){return n.fa||(n.fa=(function(t,r,i){const a=ot(t);return a.sa(),new _W(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:NW.bind(null,n),r_:OW.bind(null,n),ta:MW.bind(null,n),na:PW.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await zp(n)):(await n.fa.stop(),n.Ta.length>0&&(Se(Tc,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class eS{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,c=new eS(e,t,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tS(n,e){if(Pr("AsyncQueue",`${e}: ${n}`),sl(n))return new Ce(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Qu{static emptySet(e){return new Qu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||De.comparator(t.key,r.key):(t,r)=>De.comparator(t.key,r.key),this.keyedMap=oh(),this.sortedSet=new un(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Qu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class XD{constructor(){this.ga=new un(De.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ed{constructor(e,t,r,i,a,o,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach((c=>{o.push({type:0,doc:c})})),new Ed(e,t,Qu.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$v(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class jW{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class zW{constructor(){this.queries=WD(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=ot(t),a=i.queries;i.queries=WD(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new Ce(ge.ABORTED,"Firestore shutting down"))}}function WD(){return new Bs((n=>q4(n)),$v)}async function nS(n,e){const t=ot(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new jW,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const c=tS(o,`Initialization of query '${ku(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&iS(t)}async function rS(n,e){const t=ot(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function LW(n,e){const t=ot(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&iS(t)}function BW(n,e,t){const r=ot(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function iS(n){n.Ca.forEach((e=>{e.next()}))}var L_,QD;(QD=L_||(L_={})).Ma="default",QD.Cache="cache";class aS{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ed(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ed.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==L_.Cache}}class q3{constructor(e){this.key=e}}class H3{constructor(e){this.key=e}}class UW{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=gt(),this.mutatedKeys=gt(),this.eu=H4(e),this.tu=new Qu(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new XD,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,p)=>{const m=i.get(h),b=Pp(this.query,p)?p:null,_=!!m&&this.mutatedKeys.has(m.key),E=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let S=!1;m&&b?m.data.isEqual(b.data)?_!==E&&(r.track({type:3,doc:b}),S=!0):this.su(m,b)||(r.track({type:2,doc:b}),S=!0,(u&&this.eu(b,u)>0||d&&this.eu(b,d)<0)&&(c=!0)):!m&&b?(r.track({type:0,doc:b}),S=!0):m&&!b&&(r.track({type:1,doc:m}),S=!0,(u||d)&&(c=!0)),S&&(b?(o=o.add(b),a=E?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,p)=>(function(b,_){const E=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Rt:S})}};return E(b)-E(_)})(h.type,p.type)||this.eu(h.doc,p.doc))),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Ed(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new XD,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=gt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new H3(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new q3(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=gt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ed.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sS="SyncEngine";class FW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class GW{constructor(e){this.key=e,this.hu=!1}}class qW{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Bs((c=>q4(c)),$v),this.Iu=new Map,this.Eu=new Set,this.du=new un(De.comparator),this.Au=new Map,this.Ru=new HE,this.Vu={},this.mu=new Map,this.fu=Sc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HW(n,e,t=!0){const r=Q3(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await $3(r,e,t,!0),i}async function $W(n,e){const t=Q3(n);await $3(t,e,!0,!1)}async function $3(n,e,t,r){const i=await fW(n.localStore,Li(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let c;return r&&(c=await YW(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&z3(n.remoteStore,i),c}async function YW(n,e,t,r,i){n.pu=(p,m,b)=>(async function(E,S,T,I){let D=S.view.ru(T);D.Cs&&(D=await GD(E.localStore,S.query,!1).then((({documents:C})=>S.view.ru(C,D))));const O=I&&I.targetChanges.get(S.targetId),z=I&&I.targetMismatches.get(S.targetId)!=null,j=S.view.applyChanges(D,E.isPrimaryClient,O,z);return JD(E,S.targetId,j.au),j.snapshot})(n,p,m,b);const a=await GD(n.localStore,e,!0),o=new UW(e,a.Qs),c=o.ru(a.documents),u=Vp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,u);JD(n,t,d.au);const h=new FW(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function KW(n,e,t){const r=ot(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!$v(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await j_(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&WE(r.remoteStore,i.targetId),B_(r,i.targetId)})).catch(kc)):(B_(r,i.targetId),await j_(r.localStore,i.targetId,!0))}async function XW(n,e){const t=ot(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),WE(t.remoteStore,r.targetId))}async function WW(n,e,t){const r=Z3(n);try{const i=await(function(o,c){const u=ot(o),d=ht.now(),h=c.reduce(((b,_)=>b.add(_.key)),gt());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let _=fi(),E=gt();return u.Ns.getEntries(b,h).next((S=>{_=S,_.forEach(((T,I)=>{I.isValidDocument()||(E=E.add(T))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,_))).next((S=>{p=S;const T=[];for(const I of c){const D=dX(I,p.get(I.key).overlayedDocument);D!=null&&T.push(new Us(I.key,D,O4(D.value.mapValue),Zn.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,T,c)})).next((S=>{m=S;const T=S.applyToLocalDocumentSet(p,E);return u.documentOverlayCache.saveOverlays(b,S.batchId,T)}))})).then((()=>({batchId:m.batchId,changes:Y4(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new un(at)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d})(r,i.batchId,t),await Lp(r,i.changes),await zp(r.remoteStore)}catch(i){const a=tS(i,"Failed to persist write");t.reject(a)}}async function Y3(n,e){const t=ot(n);try{const r=await cW(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=t.Au.get(a);o&&(Ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ue(o.hu,14607):i.removedDocuments.size>0&&(Ue(o.hu,42227),o.hu=!1))})),await Lp(t,r,e)}catch(r){await kc(r)}}function ZD(n,e,t){const r=ot(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=ot(o);u.onlineState=c;let d=!1;u.queries.forEach(((h,p)=>{for(const m of p.Sa)m.va(c)&&(d=!0)})),d&&iS(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QW(n,e,t){const r=ot(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new un(De.comparator);o=o.insert(a,_n.newNoDocument(a,$e.min()));const c=gt().add(a),u=new Xv($e.min(),new Map,new un(at),o,c);await Y3(r,u),r.du=r.du.remove(a),r.Au.delete(e),oS(r)}else await j_(r.localStore,e,!1).then((()=>B_(r,e,t))).catch(kc)}async function ZW(n,e){const t=ot(n),r=e.batch.batchId;try{const i=await lW(t.localStore,e);X3(t,r,null),K3(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Lp(t,i)}catch(i){await kc(i)}}async function JW(n,e,t){const r=ot(n);try{const i=await(function(o,c){const u=ot(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next((p=>(Ue(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(d,p)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>u.localDocuments.getDocuments(d,h)))}))})(r.localStore,e);X3(r,e,t),K3(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Lp(r,i)}catch(i){await kc(i)}}function K3(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function X3(n,e,t){const r=ot(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function B_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||W3(n,r)}))}function W3(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(WE(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),oS(n))}function JD(n,e,t){for(const r of t)r instanceof q3?(n.Ru.addReference(r.key,e),eQ(n,r)):r instanceof H3?(Se(sS,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||W3(n,r.key)):Oe(19791,{wu:r})}function eQ(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Se(sS,"New document in limbo: "+t),n.Eu.add(r),oS(n))}function oS(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new De(Mt.fromString(e)),r=n.fu.next();n.Au.set(r,new GW(t)),n.du=n.du.insert(t,r),z3(n.remoteStore,new _s(Li(Mp(t.path)),r,"TargetPurposeLimboResolution",Vi.ce))}}async function Lp(n,e,t){const r=ot(n),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,t).then((d=>{if((d||t)&&r.isPrimaryClient){const h=d?!d.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(d){i.push(d);const h=KE.As(u.targetId,d);a.push(h)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,d){const h=ot(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>ae.forEach(d,(m=>ae.forEach(m.Es,(b=>h.persistence.referenceDelegate.addReference(p,m.targetId,b))).next((()=>ae.forEach(m.ds,(b=>h.persistence.referenceDelegate.removeReference(p,m.targetId,b)))))))))}catch(p){if(!sl(p))throw p;Se(XE,"Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const b=h.Ms.get(m),_=b.snapshotVersion,E=b.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(m,E)}}})(r.localStore,a))}async function tQ(n,e){const t=ot(n);if(!t.currentUser.isEqual(e)){Se(sS,"User change. New user:",e.toKey());const r=await M3(t.localStore,e);t.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new Ce(ge.CANCELLED,o))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lp(t,r.Ls)}}function nQ(n,e){const t=ot(n),r=t.Au.get(e);if(r&&r.hu)return gt().add(r.key);{let i=gt();const a=t.Iu.get(e);if(!a)return i;for(const o of a){const c=t.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function Q3(n){const e=ot(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QW.bind(null,e),e.Pu.H_=LW.bind(null,e.eventManager),e.Pu.yu=BW.bind(null,e.eventManager),e}function Z3(n){const e=ot(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JW.bind(null,e),e}class lp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jv(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return N3(this.persistence,new k3,e.initialUser,this.serializer)}Cu(e){return new $E(Zv.mi,this.serializer)}Du(e){return new O3}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lp.provider={build:()=>new lp};class rQ extends lp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ue(this.persistence.referenceDelegate instanceof tv,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new A3(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?wr.withCacheSize(this.cacheSizeBytes):wr.DEFAULT;return new $E((r=>tv.mi(r,t)),this.serializer)}}class iQ extends lp{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Z3(this.xu.syncEngine),await zp(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return N3(this.persistence,new k3,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new A3(r,e.asyncQueue,t)}Mu(e,t){const r=new cK(t,this.persistence);return new lK(e.asyncQueue,r)}Cu(e){const t=iW(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?wr.withCacheSize(this.cacheSizeBytes):wr.DEFAULT;return new YE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,bW(),h0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new O3}}class rv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ZD(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tQ.bind(null,this.syncEngine),await VW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new zW})()}createDatastore(e){const t=Jv(e.databaseInfo.databaseId),r=(function(a){return new yW(a)})(e.databaseInfo);return(function(a,o,c,u){return new EW(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,o,c){return new TW(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>ZD(this.syncEngine,t,0)),(function(){return $D.v()?new $D:new pW})())}createSyncEngine(e,t){return(function(i,a,o,c,u,d,h){const p=new qW(i,a,o,c,u,d);return h&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ot(t);Se(Tc,"RemoteStore shutting down."),r.Ea.add(5),await jp(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}rv.provider={build:()=>new rv};class lS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const tl="FirestoreClient";class aQ{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gr.UNAUTHENTICATED,this.clientId=AE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{Se(tl,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Se(tl,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=tS(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function nx(n,e){n.asyncQueue.verifyOperationInProgress(),Se(tl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await M3(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function ek(n,e){n.asyncQueue.verifyOperationInProgress();const t=await sQ(n);Se(tl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>KD(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>KD(e.remoteStore,i))),n._onlineComponents=e}async function sQ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Se(tl,"Using user provided OfflineComponentProvider");try{await nx(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ge.FAILED_PRECONDITION||i.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;bc("Error using user provided cache. Falling back to memory cache: "+t),await nx(n,new lp)}}else Se(tl,"Using default OfflineComponentProvider"),await nx(n,new rQ(void 0));return n._offlineComponents}async function J3(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Se(tl,"Using user provided OnlineComponentProvider"),await ek(n,n._uninitializedComponentsProvider._online)):(Se(tl,"Using default OnlineComponentProvider"),await ek(n,new rv))),n._onlineComponents}function oQ(n){return J3(n).then((e=>e.syncEngine))}async function iv(n){const e=await J3(n),t=e.eventManager;return t.onListen=HW.bind(null,e.syncEngine),t.onUnlisten=KW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$W.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XW.bind(null,e.syncEngine),t}function lQ(n,e,t={}){const r=new Ba;return n.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new lS({next:m=>{h.Nu(),o.enqueueAndForget((()=>rS(a,p)));const b=m.docs.has(c);!b&&m.fromCache?d.reject(new Ce(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&m.fromCache&&u&&u.source==="server"?d.reject(new Ce(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new aS(Mp(c.path),h,{includeMetadataChanges:!0,qa:!0});return nS(a,p)})(await iv(n),n.asyncQueue,e,t,r))),r.promise}function cQ(n,e,t={}){const r=new Ba;return n.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new lS({next:m=>{h.Nu(),o.enqueueAndForget((()=>rS(a,p))),m.fromCache&&u.source==="server"?d.reject(new Ce(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new aS(c,h,{includeMetadataChanges:!0,qa:!0});return nS(a,p)})(await iv(n),n.asyncQueue,e,t,r))),r.promise}function eV(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const tk=new Map;const tV="firestore.googleapis.com",nk=!0;class rk{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tV,this.ssl=nk}else this.host=e.host,this.ssl=e.ssl??nk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=w3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UX)throw new Ce(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eV(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ce(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ce(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ce(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ty{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new KY;switch(r.type){case"firstParty":return new ZY(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=tk.get(t);r&&(Se("ComponentProvider","Removing Datastore"),tk.delete(t),r.terminate())})(this),Promise.resolve()}}function uQ(n,e,t,r={}){n=Tr(n,ty);const i=zd(e),a=n._getSettings(),o={...a,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&(GO(`https://${c}`),qO("Firestore",!0)),a.host!==tV&&a.host!==c&&bc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!mc(u,o)&&(n._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=gr.MOCK_USER;else{d=S$(r.mockUserToken,n._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ce(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new gr(p)}n._authCredentials=new XY(new l4(d,h))}}class Fs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fs(this.firestore,e,this._query)}}class wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $o(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}toJSON(){return{type:wn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Dp(t,wn._jsonSchema))return new wn(e,r||null,new De(Mt.fromString(t.referencePath)))}}wn._jsonSchemaVersion="firestore/documentReference/1.0",wn._jsonSchema={type:Fn("string",wn._jsonSchemaVersion),referencePath:Fn("string")};class $o extends Fs{constructor(e,t,r){super(e,t,Mp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new De(e))}withConverter(e){return new $o(this.firestore,e,this._path)}}function ar(n,e,...t){if(n=rn(n),u4("collection","path",e),n instanceof ty){const r=Mt.fromString(e,...t);return YR(r),new $o(n,null,r)}{if(!(n instanceof wn||n instanceof $o))throw new Ce(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mt.fromString(e,...t));return YR(r),new $o(n.firestore,null,r)}}function Ut(n,e,...t){if(n=rn(n),arguments.length===1&&(e=AE.newId()),u4("doc","path",e),n instanceof ty){const r=Mt.fromString(e,...t);return $R(r),new wn(n,null,new De(r))}{if(!(n instanceof wn||n instanceof $o))throw new Ce(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mt.fromString(e,...t));return $R(r),new wn(n.firestore,n instanceof $o?n.converter:null,new De(r))}}const ik="AsyncQueue";class ak{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new V3(this,"async_queue_retry"),this._c=()=>{const r=h0();r&&Se(ik,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=h0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=h0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ba;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sl(e))throw e;Se(ik,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Pr("INTERNAL UNHANDLED ERROR: ",sk(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=eS.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Oe(47125,{Pc:sk(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sk(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function ok(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class ha extends ty{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ak,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ak(e),this._firestoreClient=void 0,await e}}}function dQ(n,e){const t=typeof n=="object"?n:ZO(),r=typeof n=="string"?n:$0,i=SE(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=w$("firestore");a&&uQ(i,...a)}return i}function Bp(n){if(n._terminated)throw new Ce(ge.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||nV(n),n._firestoreClient}function nV(n){const e=n._freezeSettings(),t=(function(i,a,o,c){return new zK(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,eV(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new aQ(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}function fQ(n,e){bc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return hQ(n,rv.provider,{build:r=>new iQ(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function hQ(n,e,t){if((n=Tr(n,ha))._firestoreClient||n._terminated)throw new Ce(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Ce(ge.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},nV(n)}class Pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pi(qn.fromBase64String(e))}catch(t){throw new Ce(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pi(qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dp(e,Pi._jsonSchema))return Pi.fromBase64String(e.bytes)}}Pi._jsonSchemaVersion="firestore/bytes/1.0",Pi._jsonSchema={type:Fn("string",Pi._jsonSchemaVersion),bytes:Fn("string")};class Up{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ce(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cS{constructor(e){this._methodName=e}}class Ua{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ua._jsonSchemaVersion}}static fromJSON(e){if(Dp(e,Ua._jsonSchema))return new Ua(e.latitude,e.longitude)}}Ua._jsonSchemaVersion="firestore/geoPoint/1.0",Ua._jsonSchema={type:Fn("string",Ua._jsonSchemaVersion),latitude:Fn("number"),longitude:Fn("number")};class Fa{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dp(e,Fa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fa(e.vectorValues);throw new Ce(ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fa._jsonSchemaVersion="firestore/vectorValue/1.0",Fa._jsonSchema={type:Fn("string",Fa._jsonSchemaVersion),vectorValues:Fn("object")};const pQ=/^__.*__$/;class gQ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Us(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fd(e,this.data,t,this.fieldTransforms)}}class rV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Us(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function iV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ac:n})}}class uS{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new uS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return av(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iV(this.Ac)&&pQ.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class mQ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Jv(e)}Cc(e,t,r,i=!1){return new uS({Ac:e,methodName:t,Dc:r,path:gn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fp(n){const e=n._freezeSettings(),t=Jv(n._databaseId);return new mQ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dS(n,e,t,r,i,a={}){const o=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);fS("Data must be an object, but it was:",o,r);const c=oV(r,o);let u,d;if(a.merge)u=new Xr(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const p of a.mergeFields){const m=U_(e,p,t);if(!o.contains(m))throw new Ce(ge.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);cV(h,m)||h.push(m)}u=new Xr(h),d=o.fieldTransforms.filter((p=>u.covers(p.field)))}else u=null,d=o.fieldTransforms;return new gQ(new Er(c),u,d)}class ny extends cS{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ny}}function aV(n,e,t,r){const i=n.Cc(1,e,t);fS("Data must be an object, but it was:",i,r);const a=[],o=Er.empty();ol(r,((u,d)=>{const h=hS(e,u,t);d=rn(d);const p=i.yc(h);if(d instanceof ny)a.push(h);else{const m=Gp(d,p);m!=null&&(a.push(h),o.set(h,m))}}));const c=new Xr(a);return new rV(o,c,i.fieldTransforms)}function sV(n,e,t,r,i,a){const o=n.Cc(1,e,t),c=[U_(e,r,t)],u=[i];if(a.length%2!=0)throw new Ce(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)c.push(U_(e,a[m])),u.push(a[m+1]);const d=[],h=Er.empty();for(let m=c.length-1;m>=0;--m)if(!cV(d,c[m])){const b=c[m];let _=u[m];_=rn(_);const E=o.yc(b);if(_ instanceof ny)d.push(b);else{const S=Gp(_,E);S!=null&&(d.push(b),h.set(b,S))}}const p=new Xr(d);return new rV(h,p,o.fieldTransforms)}function vQ(n,e,t,r=!1){return Gp(t,n.Cc(r?4:3,e))}function Gp(n,e){if(lV(n=rn(n)))return fS("Unsupported field value:",e,n),oV(n,e);if(n instanceof cS)return(function(r,i){if(!iV(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=Gp(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=rn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iX(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ht.fromDate(r);return{timestampValue:wd(i.serializer,a)}}if(r instanceof ht){const a=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wd(i.serializer,a)}}if(r instanceof Ua)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pi)return{bytesValue:s3(i.serializer,r._byteString)};if(r instanceof wn){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:FE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fa)return(function(o,c){return{mapValue:{fields:{[PE]:{stringValue:OE},[md]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return jE(c.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${zv(r)}`)})(n,e)}function oV(n,e){const t={};return A4(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ol(n,((r,i)=>{const a=Gp(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function lV(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ht||n instanceof Ua||n instanceof Pi||n instanceof wn||n instanceof cS||n instanceof Fa)}function fS(n,e,t){if(!lV(t)||!d4(t)){const r=zv(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function U_(n,e,t){if((e=rn(e))instanceof Up)return e._internalPath;if(typeof e=="string")return hS(n,e);throw av("Field path arguments must be of type string or ",n,!1,void 0,t)}const yQ=new RegExp("[~\\*/\\[\\]]");function hS(n,e,t){if(e.search(yQ)>=0)throw av(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Up(...e.split("."))._internalPath}catch{throw av(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function av(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ce(ge.INVALID_ARGUMENT,c+n+u)}function cV(n,e){return n.some((t=>t.isEqual(e)))}class uV{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ry("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class bQ extends uV{data(){return super.data()}}function ry(n,e){return typeof e=="string"?hS(n,e):e instanceof Up?e._internalPath:e._delegate._internalPath}function dV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ce(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pS{}class gS extends pS{}function Wr(n,e,...t){let r=[];e instanceof pS&&r.push(e),r=r.concat(t),(function(a){const o=a.filter((u=>u instanceof mS)).length,c=a.filter((u=>u instanceof iy)).length;if(o>1||o>0&&c>0)throw new Ce(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class iy extends gS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new iy(e,t,r)}_apply(e){const t=this._parse(e);return fV(e._query,t),new Fs(e.firestore,e.converter,R_(e._query,t))}_parse(e){const t=Fp(e.firestore);return(function(a,o,c,u,d,h,p){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Ce(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){uk(p,h);const _=[];for(const E of p)_.push(ck(u,a,E));m={arrayValue:{values:_}}}else m=ck(u,a,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||uk(p,h),m=vQ(c,o,p,h==="in"||h==="not-in");return wt.create(d,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Hu(n,e,t){const r=e,i=ry("where",n);return iy._create(i,r,t)}class mS extends pS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new mS(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Ft.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)fV(o,u),o=R_(o,u)})(e._query,t),new Fs(e.firestore,e.converter,R_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vS extends gS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new vS(e,t)}_apply(e){const t=(function(i,a,o){if(i.startAt!==null)throw new Ce(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ce(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ap(a,o)})(e._query,this._field,this._direction);return new Fs(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new Ud(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function Sd(n,e="asc"){const t=e,r=ry("orderBy",n);return vS._create(r,t)}class yS extends gS{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new yS(e,t,r)}_apply(e){return new Fs(e.firestore,e.converter,X0(e._query,this._limit,this._limitType))}}function lk(n){return yS._create("limit",n,"F")}function ck(n,e,t){if(typeof(t=rn(t))=="string"){if(t==="")throw new Ce(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!G4(e)&&t.indexOf("/")!==-1)throw new Ce(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Mt.fromString(t));if(!De.isDocumentKey(r))throw new Ce(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rp(n,new De(r))}if(t instanceof wn)return rp(n,t._key);throw new Ce(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zv(t)}.`)}function uk(n,e){if(!Array.isArray(n)||n.length===0)throw new Ce(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fV(n,e){const t=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ce(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ce(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class xQ{convertValue(e,t="none"){switch(Zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ol(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[md].arrayValue?.values?.map((r=>ln(r.doubleValue)));return new Fa(t)}convertGeoPoint(e){return new Ua(ln(e.latitude),ln(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=qv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(tp(e));default:return null}}convertTimestamp(e){const t=Vs(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Mt.fromString(e);Ue(m3(r),9688,{name:e});const i=new xc(r.get(1),r.get(3)),a=new De(r.popFirst(5));return i.isEqual(t)||Pr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function bS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class uh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lc extends uV{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new p0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ry("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=lc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}lc._jsonSchemaVersion="firestore/documentSnapshot/1.0",lc._jsonSchema={type:Fn("string",lc._jsonSchemaVersion),bundleSource:Fn("string","DocumentSnapshot"),bundleName:Fn("string"),bundle:Fn("string")};class p0 extends lc{data(e={}){return super.data(e)}}class cc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new uh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new p0(this._firestore,this._userDataWriter,r.key,r,new uh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new p0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new uh(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new p0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new uh(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:_Q(c.type),doc:u,oldIndex:d,newIndex:h}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=cc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=AE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _Q(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:n})}}function wQ(n){n=Tr(n,wn);const e=Tr(n.firestore,ha);return lQ(Bp(e),n._key).then((t=>hV(e,n,t)))}cc._jsonSchemaVersion="firestore/querySnapshot/1.0",cc._jsonSchema={type:Fn("string",cc._jsonSchemaVersion),bundleSource:Fn("string","QuerySnapshot"),bundleName:Fn("string"),bundle:Fn("string")};class xS extends xQ{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}}function Ni(n){n=Tr(n,Fs);const e=Tr(n.firestore,ha),t=Bp(e),r=new xS(e);return dV(n._query),cQ(t,n._query).then((i=>new cc(e,r,n,i)))}function ia(n,e,t){n=Tr(n,wn);const r=Tr(n.firestore,ha),i=bS(n.converter,e,t);return qp(r,[dS(Fp(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Zn.none())])}function ay(n,e,t,...r){n=Tr(n,wn);const i=Tr(n.firestore,ha),a=Fp(i);let o;return o=typeof(e=rn(e))=="string"||e instanceof Up?sV(a,"updateDoc",n._key,e,t,r):aV(a,"updateDoc",n._key,e),qp(i,[o.toMutation(n._key,Zn.exists(!0))])}function aa(n){return qp(Tr(n.firestore,ha),[new Op(n._key,Zn.none())])}function Td(n,e){const t=Tr(n.firestore,ha),r=Ut(n),i=bS(n.converter,e);return qp(t,[dS(Fp(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Zn.exists(!1))]).then((()=>r))}function uc(n,...e){n=rn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||ok(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(ok(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,o,c;if(n instanceof wn)o=Tr(n.firestore,ha),c=Mp(n._key.path),a={next:u=>{e[r]&&e[r](hV(o,n,u))},error:e[r+1],complete:e[r+2]};else{const u=Tr(n,Fs);o=Tr(u.firestore,ha),c=u._query;const d=new xS(o);a={next:h=>{e[r]&&e[r](new cc(o,d,u,h))},error:e[r+1],complete:e[r+2]},dV(n._query)}return(function(d,h,p,m){const b=new lS(m),_=new aS(h,b,p);return d.asyncQueue.enqueueAndForget((async()=>nS(await iv(d),_))),()=>{b.Nu(),d.asyncQueue.enqueueAndForget((async()=>rS(await iv(d),_)))}})(Bp(o),c,i,a)}function qp(n,e){return(function(r,i){const a=new Ba;return r.asyncQueue.enqueueAndForget((async()=>WW(await oQ(r),i,a))),a.promise})(Bp(n),e)}function hV(n,e,t){const r=t.docs.get(e._key),i=new xS(n);return new lc(n,i,e._key,r,new uh(t.hasPendingWrites,t.fromCache),e.converter)}class EQ{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fp(e)}set(e,t,r){this._verifyNotCommitted();const i=rx(e,this._firestore),a=bS(i.converter,t,r),o=dS(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Zn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=rx(e,this._firestore);let o;return o=typeof(t=rn(t))=="string"||t instanceof Up?sV(this._dataReader,"WriteBatch.update",a._key,t,r,i):aV(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,Zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rx(e,this._firestore);return this._mutations=this._mutations.concat(new Op(t._key,Zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rx(n,e){if((n=rn(n)).firestore!==e)throw new Ce(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function SQ(n){return Bp(n=Tr(n,ha)),new EQ(n,(e=>qp(n,e)))}(function(e,t=!0){(function(i){Bd=i})(Ld),ud(new vc("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new ha(new WY(r.getProvider("auth-internal")),new JY(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ce(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xc(d.options.projectId,h)})(o,i),o);return a={useFetchStreams:t,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Go(FR,GR,e),Go(FR,GR,"esm2020")})();var TQ="firebase",AQ="12.6.0";Go(TQ,AQ,"app");function pV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CQ=pV,gV=new Ip("auth","Firebase",pV());const sv=new wE("@firebase/auth");function IQ(n,...e){sv.logLevel<=_t.WARN&&sv.warn(`Auth (${Ld}): ${n}`,...e)}function g0(n,...e){sv.logLevel<=_t.ERROR&&sv.error(`Auth (${Ld}): ${n}`,...e)}function pa(n,...e){throw _S(n,...e)}function Ga(n,...e){return _S(n,...e)}function mV(n,e,t){const r={...CQ(),[e]:t};return new Ip("auth","Firebase",r).create(e,{appName:n.name})}function Rs(n){return mV(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _S(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return gV.create(n,...e)}function Je(n,e,...t){if(!n)throw _S(e,...t)}function ws(n){const e="INTERNAL ASSERTION FAILED: "+n;throw g0(e),new Error(e)}function zs(n,e){n||ws(e)}function F_(){return typeof self<"u"&&self.location?.href||""}function RQ(){return dk()==="http:"||dk()==="https:"}function dk(){return typeof self<"u"&&self.location?.protocol||null}function DQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RQ()||R$()||"connection"in navigator)?navigator.onLine:!0}function kQ(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Hp{constructor(e,t){this.shortDelay=e,this.longDelay=t,zs(t>e,"Short delay should be less than long delay!"),this.isMobile=C$()||D$()}get(){return DQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wS(n,e){zs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class vV{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const NQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const MQ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PQ=new Hp(3e4,6e4);function Gs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ja(n,e,t,r,i={}){return yV(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Rp({key:n.config.apiKey,...o}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const d={method:e,headers:u,...a};return I$()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&zd(n.emulatorConfig.host)&&(d.credentials="include"),vV.fetch()(await bV(n,n.config.apiHost,t,c),d)})}async function yV(n,e,t){n._canInitEmulator=!1;const r={...NQ,...e};try{const i=new VQ(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Ym(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ym(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ym(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ym(n,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw mV(n,h,d);pa(n,h)}}catch(i){if(i instanceof Ls)throw i;pa(n,"network-request-failed",{message:String(i)})}}async function $p(n,e,t,r,i={}){const a=await Ja(n,e,t,r,i);return"mfaPendingCredential"in a&&pa(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function bV(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?wS(n.config,i):`${n.config.apiScheme}://${i}`;return MQ.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function OQ(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VQ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ga(this.auth,"network-request-failed")),PQ.get())})}}function Ym(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ga(n,e,r);return i.customData._tokenResponse=t,i}function fk(n){return n!==void 0&&n.enterprise!==void 0}class jQ{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return OQ(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zQ(n,e){return Ja(n,"GET","/v2/recaptchaConfig",Gs(n,e))}async function LQ(n,e){return Ja(n,"POST","/v1/accounts:delete",e)}async function ov(n,e){return Ja(n,"POST","/v1/accounts:lookup",e)}function kh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BQ(n,e=!1){const t=rn(n),r=await t.getIdToken(e),i=ES(r);Je(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:kh(ix(i.auth_time)),issuedAtTime:kh(ix(i.iat)),expirationTime:kh(ix(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function ix(n){return Number(n)*1e3}function ES(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return g0("JWT malformed, contained fewer than 3 sections"),null;try{const i=zO(t);return i?JSON.parse(i):(g0("Failed to decode base64 JWT payload"),null)}catch(i){return g0("Caught error parsing JWT payload as JSON",i?.toString()),null}}function hk(n){const e=ES(n);return Je(e,"internal-error"),Je(typeof e.exp<"u","internal-error"),Je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ad(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ls&&UQ(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function UQ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class FQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class G_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kh(this.lastLoginAt),this.creationTime=kh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function lv(n){const e=n.auth,t=await n.getIdToken(),r=await Ad(n,ov(e,{idToken:t}));Je(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?xV(i.providerUserInfo):[],o=qQ(n.providerData,a),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!o?.length,d=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new G_(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)}async function GQ(n){const e=rn(n);await lv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xV(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function HQ(n,e){const t=await yV(n,{},async()=>{const r=Rp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await bV(n,i,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return n.emulatorConfig&&zd(n.emulatorConfig.host)&&(u.credentials="include"),vV.fetch()(o,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $Q(n,e){return Ja(n,"POST","/v2/accounts:revokeToken",Gs(n,e))}class Zu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken<"u","internal-error"),Je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Je(e.length!==0,"internal-error");const t=hk(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await HQ(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new Zu;return r&&(Je(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Je(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Je(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zu,this.toJSON())}_performRefresh(){return ws("not implemented")}}function Co(n,e){Je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class sa{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new FQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new G_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ad(this,this.stsTokenManager.getToken(this.auth,e));return Je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return BQ(this,e)}reload(){return GQ(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await lv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mi(this.auth.app))return Promise.reject(Rs(this.auth));const e=await this.getIdToken();return await Ad(this,LQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,o=t.photoURL??void 0,c=t.tenantId??void 0,u=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:b,providerData:_,stsTokenManager:E}=t;Je(p&&E,e,"internal-error");const S=Zu.fromJSON(this.name,E);Je(typeof p=="string",e,"internal-error"),Co(r,e.name),Co(i,e.name),Je(typeof m=="boolean",e,"internal-error"),Je(typeof b=="boolean",e,"internal-error"),Co(a,e.name),Co(o,e.name),Co(c,e.name),Co(u,e.name),Co(d,e.name),Co(h,e.name);const T=new sa({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:b,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:S,createdAt:d,lastLoginAt:h});return _&&Array.isArray(_)&&(T.providerData=_.map(I=>({...I}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new Zu;i.updateFromServerResponse(t);const a=new sa({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await lv(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Je(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?xV(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new Zu;c.updateFromIdToken(r);const u=new sa({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new G_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,d),u}}const pk=new Map;function Es(n){zs(n instanceof Function,"Expected a class definition");let e=pk.get(n);return e?(zs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pk.set(n,e),e)}class _V{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_V.type="NONE";const gk=_V;function m0(n,e,t){return`firebase:${n}:${e}:${t}`}class Ju{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=m0(this.userKey,i.apiKey,a),this.fullPersistenceKey=m0("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ov(this.auth,{idToken:e}).catch(()=>{});return t?sa._fromGetAccountInfoResponse(this.auth,t,e):null}return sa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ju(Es(gk),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||Es(gk);const o=m0(r,e.config.apiKey,e.name);let c=null;for(const d of t)try{const h=await d._get(o);if(h){let p;if(typeof h=="string"){const m=await ov(e,{idToken:h}).catch(()=>{});if(!m)break;p=await sa._fromGetAccountInfoResponse(e,m,h)}else p=sa._fromJSON(e,h);d!==a&&(c=p),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Ju(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Ju(a,e,r))}}function mk(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CV(e))return"Blackberry";if(IV(e))return"Webos";if(EV(e))return"Safari";if((e.includes("chrome/")||SV(e))&&!e.includes("edge/"))return"Chrome";if(AV(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function wV(n=Jn()){return/firefox\//i.test(n)}function EV(n=Jn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SV(n=Jn()){return/crios\//i.test(n)}function TV(n=Jn()){return/iemobile/i.test(n)}function AV(n=Jn()){return/android/i.test(n)}function CV(n=Jn()){return/blackberry/i.test(n)}function IV(n=Jn()){return/webos/i.test(n)}function SS(n=Jn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function YQ(n=Jn()){return SS(n)&&!!window.navigator?.standalone}function KQ(){return k$()&&document.documentMode===10}function RV(n=Jn()){return SS(n)||AV(n)||IV(n)||CV(n)||/windows phone/i.test(n)||TV(n)}function DV(n,e=[]){let t;switch(n){case"Browser":t=mk(Jn());break;case"Worker":t=`${mk(Jn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ld}/${r}`}class XQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function WQ(n,e={}){return Ja(n,"GET","/v2/passwordPolicy",Gs(n,e))}const QQ=6;class ZQ{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??QQ,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class JQ{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vk(this),this.idTokenSubscription=new vk(this),this.beforeStateQueue=new XQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Es(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ju.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ov(this,{idToken:e}),r=await sa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Mi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kQ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mi(this.app))return Promise.reject(Rs(this));const t=e?rn(e):null;return t&&Je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mi(this.app)?Promise.reject(Rs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mi(this.app)?Promise.reject(Rs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WQ(this),t=new ZQ(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ip("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await $Q(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Es(e)||this._popupRedirectResolver;Je(t,this,"argument-error"),this.redirectPersistenceManager=await Ju.create(this,[Es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Mi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&IQ(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ll(n){return rn(n)}class vk{constructor(e){this.auth=e,this.observer=null,this.addObserver=j$(t=>this.observer=t)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let sy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eZ(n){sy=n}function kV(n){return sy.loadJS(n)}function tZ(){return sy.recaptchaEnterpriseScript}function nZ(){return sy.gapiScript}function rZ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class iZ{constructor(){this.enterprise=new aZ}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class aZ{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const sZ="recaptcha-enterprise",NV="NO_RECAPTCHA";class oZ{constructor(e){this.type=sZ,this.auth=ll(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{zQ(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new jQ(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;fk(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(NV)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iZ().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!t&&fk(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=tZ();u.length!==0&&(u+=c),kV(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function yk(n,e,t,r=!1,i=!1){const a=new oZ(n);let o;if(i)o=NV;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function cv(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await yk(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await yk(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(a)})}function lZ(n,e){const t=SE(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(mc(a,e??{}))return i;pa(i,"already-initialized")}return t.initialize({options:e})}function cZ(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Es);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function uZ(n,e,t){const r=ll(n);Je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=MV(e),{host:o,port:c}=dZ(e),u=c===null?"":`:${c}`,d={url:`${a}//${o}${u}/`},h=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Je(mc(d,r.config.emulator)&&mc(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,zd(o)?(GO(`${a}//${o}${u}`),qO("Auth",!0)):fZ()}function MV(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function dZ(n){const e=MV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:bk(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:bk(o)}}}function bk(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function fZ(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class TS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,t){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}}async function hZ(n,e){return Ja(n,"POST","/v1/accounts:signUp",e)}async function pZ(n,e){return $p(n,"POST","/v1/accounts:signInWithPassword",Gs(n,e))}async function PV(n,e){return Ja(n,"POST","/v1/accounts:sendOobCode",Gs(n,e))}async function gZ(n,e){return PV(n,e)}async function mZ(n,e){return PV(n,e)}async function vZ(n,e){return $p(n,"POST","/v1/accounts:signInWithEmailLink",Gs(n,e))}async function yZ(n,e){return $p(n,"POST","/v1/accounts:signInWithEmailLink",Gs(n,e))}class cp extends TS{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new cp(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new cp(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cv(e,t,"signInWithPassword",pZ);case"emailLink":return vZ(e,{email:this._email,oobCode:this._password});default:pa(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cv(e,r,"signUpPassword",hZ);case"emailLink":return yZ(e,{idToken:t,email:this._email,oobCode:this._password});default:pa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ed(n,e){return $p(n,"POST","/v1/accounts:signInWithIdp",Gs(n,e))}const bZ="http://localhost";class Ac extends TS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ac(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pa("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const o=new Ac(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return ed(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ed(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ed(e,t)}buildRequest(){const e={requestUri:bZ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rp(t)}return e}}function xZ(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _Z(n){const e=ih(ah(n)).link,t=e?ih(ah(e)).deep_link_id:null,r=ih(ah(n)).deep_link_id;return(r?ih(ah(r)).link:null)||r||t||e||n}class AS{constructor(e){const t=ih(ah(e)),r=t.apiKey??null,i=t.oobCode??null,a=xZ(t.mode??null);Je(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=_Z(e);try{return new AS(t)}catch{return null}}}class Mc{constructor(){this.providerId=Mc.PROVIDER_ID}static credential(e,t){return cp._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=AS.parseLink(t);return Je(r,"argument-error"),cp._fromEmailAndCode(e,r.code,r.tenantId)}}Mc.PROVIDER_ID="password";Mc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class OV{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Yp extends OV{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class No extends Yp{constructor(){super("facebook.com")}static credential(e){return Ac._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return No.credential(e.oauthAccessToken)}catch{return null}}}No.FACEBOOK_SIGN_IN_METHOD="facebook.com";No.PROVIDER_ID="facebook.com";class Mo extends Yp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ac._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Mo.credential(t,r)}catch{return null}}}Mo.GOOGLE_SIGN_IN_METHOD="google.com";Mo.PROVIDER_ID="google.com";class Po extends Yp{constructor(){super("github.com")}static credential(e){return Ac._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Po.credential(e.oauthAccessToken)}catch{return null}}}Po.GITHUB_SIGN_IN_METHOD="github.com";Po.PROVIDER_ID="github.com";class Oo extends Yp{constructor(){super("twitter.com")}static credential(e,t){return Ac._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Oo.credential(t,r)}catch{return null}}}Oo.TWITTER_SIGN_IN_METHOD="twitter.com";Oo.PROVIDER_ID="twitter.com";async function wZ(n,e){return $p(n,"POST","/v1/accounts:signUp",Gs(n,e))}class Cc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await sa._fromIdTokenResponse(e,r,i),o=xk(r);return new Cc({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=xk(r);return new Cc({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function xk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class uv extends Ls{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,uv.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new uv(e,t,r,i)}}function VV(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?uv._fromErrorAndOperation(n,a,e,r):a})}async function EZ(n,e,t=!1){const r=await Ad(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Cc._forOperation(n,"link",r)}async function jV(n,e,t=!1){const{auth:r}=n;if(Mi(r.app))return Promise.reject(Rs(r));const i="reauthenticate";try{const a=await Ad(n,VV(r,i,e,n),t);Je(a.idToken,r,"internal-error");const o=ES(a.idToken);Je(o,r,"internal-error");const{sub:c}=o;return Je(n.uid===c,r,"user-mismatch"),Cc._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&pa(r,"user-mismatch"),a}}async function zV(n,e,t=!1){if(Mi(n.app))return Promise.reject(Rs(n));const r="signIn",i=await VV(n,r,e),a=await Cc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function SZ(n,e){return zV(ll(n),e)}async function TZ(n,e){return jV(rn(n),e)}async function LV(n){const e=ll(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function AZ(n,e,t){const r=ll(n);await cv(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",mZ)}async function CZ(n,e,t){if(Mi(n.app))return Promise.reject(Rs(n));const r=ll(n),o=await cv(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wZ).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&LV(n),u}),c=await Cc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function IZ(n,e,t){return Mi(n.app)?Promise.reject(Rs(n)):SZ(rn(n),Mc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LV(n),r})}async function _k(n,e){const t=rn(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:a}=await gZ(t.auth,i);a!==n.email&&await n.reload()}async function RZ(n,e){return Ja(n,"POST","/v1/accounts:update",e)}async function DZ(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=rn(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Ad(r,RZ(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function kZ(n,e,t,r){return rn(n).onIdTokenChanged(e,t,r)}function NZ(n,e,t){return rn(n).beforeAuthStateChanged(e,t)}function MZ(n,e,t,r){return rn(n).onAuthStateChanged(e,t,r)}function wk(n){return rn(n).signOut()}async function PZ(n){return rn(n).delete()}const dv="__sak";class BV{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dv,"1"),this.storage.removeItem(dv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const OZ=1e3,VZ=10;class UV extends BV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);KQ()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,VZ):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},OZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}UV.type="LOCAL";const jZ=UV;class FV extends BV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}FV.type="SESSION";const GV=FV;function zZ(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class oy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new oy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(t.origin,a)),u=await zZ(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}oy.receivers=[];function CS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class LZ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=CS("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(m.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function qa(){return window}function BZ(n){qa().location.href=n}function qV(){return typeof qa().WorkerGlobalScope<"u"&&typeof qa().importScripts=="function"}async function UZ(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FZ(){return navigator?.serviceWorker?.controller||null}function GZ(){return qV()?self:null}const HV="firebaseLocalStorageDb",qZ=1,fv="firebaseLocalStorage",$V="fbase_key";class Kp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ly(n,e){return n.transaction([fv],e?"readwrite":"readonly").objectStore(fv)}function HZ(){const n=indexedDB.deleteDatabase(HV);return new Kp(n).toPromise()}function q_(){const n=indexedDB.open(HV,qZ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(fv,{keyPath:$V})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(fv)?e(r):(r.close(),await HZ(),e(await q_()))})})}async function Ek(n,e,t){const r=ly(n,!0).put({[$V]:e,value:t});return new Kp(r).toPromise()}async function $Z(n,e){const t=ly(n,!1).get(e),r=await new Kp(t).toPromise();return r===void 0?null:r.value}function Sk(n,e){const t=ly(n,!0).delete(e);return new Kp(t).toPromise()}const YZ=800,KZ=3;class YV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await q_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>KZ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=oy._getInstance(GZ()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await UZ(),!this.activeServiceWorker)return;this.sender=new LZ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FZ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await q_();return await Ek(e,dv,"1"),await Sk(e,dv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ek(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>$Z(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Sk(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=ly(i,!1).getAll();return new Kp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YV.type="LOCAL";const XZ=YV;new Hp(3e4,6e4);function WZ(n,e){return e?Es(e):(Je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class IS extends TS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ed(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ed(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ed(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function QZ(n){return zV(n.auth,new IS(n),n.bypassAuthState)}function ZZ(n){const{auth:e,user:t}=n;return Je(t,e,"internal-error"),jV(t,new IS(n),n.bypassAuthState)}async function JZ(n){const{auth:e,user:t}=n;return Je(t,e,"internal-error"),EZ(t,new IS(n),n.bypassAuthState)}class KV{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QZ;case"linkViaPopup":case"linkViaRedirect":return JZ;case"reauthViaPopup":case"reauthViaRedirect":return ZZ;default:pa(this.auth,"internal-error")}}resolve(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const eJ=new Hp(2e3,1e4);class $u extends KV{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,$u.currentPopupAction&&$u.currentPopupAction.cancel(),$u.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Je(e,this.auth,"internal-error"),e}async onExecution(){zs(this.filter.length===1,"Popup operations only handle one event");const e=CS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ga(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ga(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$u.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ga(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eJ.get())};e()}}$u.currentPopupAction=null;const tJ="pendingRedirect",v0=new Map;class nJ extends KV{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=v0.get(this.auth._key());if(!e){try{const r=await rJ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}v0.set(this.auth._key(),e)}return this.bypassAuthState||v0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rJ(n,e){const t=sJ(e),r=aJ(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function iJ(n,e){v0.set(n._key(),e)}function aJ(n){return Es(n._redirectPersistence)}function sJ(n){return m0(tJ,n.config.apiKey,n.name)}async function oJ(n,e,t=!1){if(Mi(n.app))return Promise.reject(Rs(n));const r=ll(n),i=WZ(r,e),o=await new nJ(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const lJ=600*1e3;class cJ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uJ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!XV(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ga(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tk(e))}saveEventToCache(e){this.cachedEventUids.add(Tk(e)),this.lastProcessedEventTime=Date.now()}}function Tk(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function XV({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function uJ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XV(n);default:return!1}}async function dJ(n,e={}){return Ja(n,"GET","/v1/projects",e)}const fJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hJ=/^https?/;async function pJ(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dJ(n);for(const t of e)try{if(gJ(t))return}catch{}pa(n,"unauthorized-domain")}function gJ(n){const e=F_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!hJ.test(t))return!1;if(fJ.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const mJ=new Hp(3e4,6e4);function Ak(){const n=qa().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vJ(n){return new Promise((e,t)=>{function r(){Ak(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ak(),t(Ga(n,"network-request-failed"))},timeout:mJ.get()})}if(qa().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(qa().gapi?.load)r();else{const i=rZ("iframefcb");return qa()[i]=()=>{gapi.load?r():t(Ga(n,"network-request-failed"))},kV(`${nZ()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw y0=null,e})}let y0=null;function yJ(n){return y0=y0||vJ(n),y0}const bJ=new Hp(5e3,15e3),xJ="__/auth/iframe",_J="emulator/auth/iframe",wJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SJ(n){const e=n.config;Je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?wS(e,_J):`https://${n.config.authDomain}/${xJ}`,r={apiKey:e.apiKey,appName:n.name,v:Ld},i=EJ.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Rp(r).slice(1)}`}async function TJ(n){const e=await yJ(n),t=qa().gapi;return Je(t,n,"internal-error"),e.open({where:document.body,url:SJ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wJ,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Ga(n,"network-request-failed"),c=qa().setTimeout(()=>{a(o)},bJ.get());function u(){qa().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}const AJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CJ=500,IJ=600,RJ="_blank",DJ="http://localhost";class Ck{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kJ(n,e,t,r=CJ,i=IJ){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...AJ,width:r.toString(),height:i.toString(),top:a,left:o},d=Jn().toLowerCase();t&&(c=SV(d)?RJ:t),wV(d)&&(e=e||DJ,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[b,_])=>`${m}${b}=${_},`,"");if(YQ(d)&&c!=="_self")return NJ(e||"",c),new Ck(null);const p=window.open(e||"",c,h);Je(p,n,"popup-blocked");try{p.focus()}catch{}return new Ck(p)}function NJ(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const MJ="__/auth/handler",PJ="emulator/auth/handler",OJ=encodeURIComponent("fac");async function Ik(n,e,t,r,i,a){Je(n.config.authDomain,n,"auth-domain-config-required"),Je(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ld,eventId:i};if(e instanceof OV){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",V$(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof Yp){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await n._getAppCheckToken(),d=u?`#${OJ}=${encodeURIComponent(u)}`:"";return`${VJ(n)}?${Rp(c).slice(1)}${d}`}function VJ({config:n}){return n.emulator?wS(n,PJ):`https://${n.authDomain}/${MJ}`}const ax="webStorageSupport";class jJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GV,this._completeRedirectFn=oJ,this._overrideRedirectResult=iJ}async _openPopup(e,t,r,i){zs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await Ik(e,t,r,F_(),i);return kJ(e,a,CS())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await Ik(e,t,r,F_(),i);return BZ(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(zs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await TJ(e),r=new cJ(e);return t.register("authEvent",i=>(Je(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ax,{type:ax},i=>{const a=i?.[0]?.[ax];a!==void 0&&t(!!a),pa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pJ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return RV()||EV()||SS()}}const zJ=jJ;var Rk="@firebase/auth",Dk="1.11.1";class LJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function BJ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UJ(n){ud(new vc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Je(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DV(n)},d=new JQ(r,i,a,u);return cZ(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ud(new vc("auth-internal",e=>{const t=ll(e.getProvider("auth").getImmediate());return(r=>new LJ(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Go(Rk,Dk,BJ(n)),Go(Rk,Dk,"esm2020")}const FJ=300,GJ=FO("authIdTokenMaxAge")||FJ;let kk=null;const qJ=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>GJ)return;const i=t?.token;kk!==i&&(kk=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function HJ(n=ZO()){const e=SE(n,"auth");if(e.isInitialized())return e.getImmediate();const t=lZ(n,{popupRedirectResolver:zJ,persistence:[XZ,jZ,GV]}),r=FO("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=qJ(a.toString());NZ(t,o,()=>o(t.currentUser)),kZ(t,c=>o(c))}}const i=BO("auth");return i&&uZ(t,`http://${i}`),t}function $J(){return document.getElementsByTagName("head")?.[0]??document}eZ({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Ga("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",$J().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UJ("Browser");const YJ={apiKey:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:d7a8169fd53f437e42aba9"},WV=QO(YJ),Io=HJ(WV),rt=dQ(WV);fQ(rt).catch(n=>{n.code==="failed-precondition"?console.warn(" Offline persistence failed: Multiple tabs open"):n.code==="unimplemented"?console.warn(" Offline persistence not available in this browser"):console.error(" Failed to enable offline persistence:",n)});const QV=n=>n?n instanceof Date?n:typeof n=="string"?new Date(n):typeof n=="number"?new Date(n):n?.toDate&&typeof n.toDate=="function"?n.toDate():new Date:new Date,Kn=n=>QV(n).toISOString(),KJ=n=>{const e=QV(n);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},XJ=n=>{const e=n.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},RS=n=>{const e=n;let t=0;typeof e.amount=="number"?t=e.amount:typeof e.amount=="string"&&(t=parseFloat(e.amount)),isNaN(t)&&(t=0);const r=Kn(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:t,date:r,month:e.month||KJ(r),description:e.description||"",merchant:e.merchant||void 0,type:XJ(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}};class tc{static instance;static getInstance(){return tc.instance||(tc.instance=new tc),tc.instance}async restoreUserData(e,t){try{console.log(" BudgetService.restoreUserData: STARTING RESTORE for user:",e),await this.deleteAllUserData(e);const r=[{name:"envelopes",data:t.envelopes||[]},{name:"transactions",data:t.transactions||[]},{name:"incomeSources",data:t.incomeSources?Object.values(t.incomeSources).flat():[]},{name:"envelopeAllocations",data:t.allocations?Object.values(t.allocations).flat():[]},{name:"appSettings",data:t.appSettings?[t.appSettings]:[]}],i=[];for(const{name:o,data:c}of r)if(Array.isArray(c))for(const u of c){if(!u.id)continue;const d={...u,userId:e},h=u.id,p=Ut(rt,"users",e,o,h);i.push({ref:p,data:d})}console.log(` Prepared ${i.length} items for restoration.`);const a=450;for(let o=0;o<i.length;o+=a){const c=SQ(rt);i.slice(o,o+a).forEach(d=>{c.set(d.ref,d.data)}),console.log(` Committing batch ${Math.floor(o/a)+1}/${Math.ceil(i.length/a)}...`),await c.commit()}console.log(" Restore completed successfully.")}catch(r){throw console.error(" BudgetService.restoreUserData failed:",r),new Error(`Failed to restore user data: ${r instanceof Error?r.message:"Unknown error"}`)}}async getEnvelopes(e){try{console.log(" BudgetService.getEnvelopes called for user:",e);const t=ar(rt,"users",e,"envelopes"),a=(await Ni(t)).docs.map((o,c)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??c})).sort((o,c)=>{const u=o.orderIndex??0,d=c.orderIndex??0;return u-d});return console.log(" Fetched envelopes:",a.length),a}catch(t){throw console.error(" BudgetService.getEnvelopes failed:",t),new Error(`Failed to fetch envelopes: ${t instanceof Error?t.message:"Unknown error"}`)}}async getTransactions(e){try{console.log(" BudgetService.getTransactions: Fetching for user",e);const t=ar(rt,"users",e,"transactions"),r=Wr(t,Sd("date","desc")),a=(await Ni(r)).docs.map(o=>{const c={id:o.id,...o.data()};return RS(c)});return console.log(` Fetched ${a.length} transactions`),a}catch(t){throw console.error(" BudgetService.getTransactions failed:",t),new Error(`Failed to fetch transactions: ${t instanceof Error?t.message:"Unknown error"}`)}}async createEnvelope(e){try{console.log(" BudgetService.createEnvelope called for user:",e.userId);const t=ar(rt,"users",e.userId,"envelopes"),r=await Td(t,{...e,createdAt:ht.now(),lastUpdated:ht.now()}),i={...e,id:r.id,createdAt:Kn(ht.now()),lastUpdated:Kn(ht.now())};return console.log(" Created envelope:",i.id),i}catch(t){throw console.error(" BudgetService.createEnvelope failed:",t),new Error(`Failed to create envelope: ${t instanceof Error?t.message:"Unknown error"}`)}}async updateEnvelope(e,t){try{console.log(" BudgetService.updateEnvelope called for envelope:",t.id);const r=Ut(rt,"users",e,"envelopes",t.id);await ia(r,{...t,lastUpdated:ht.now()},{merge:!0}),console.log(" Updated envelope:",t.id)}catch(r){throw console.error(" BudgetService.updateEnvelope failed:",r),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,t){try{console.log(" BudgetService.deleteEnvelope called for envelope:",t);const r=Ut(rt,"users",e,"envelopes",t);await aa(r),console.log(" Deleted envelope:",t)}catch(r){throw console.error(" BudgetService.deleteEnvelope failed:",r),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,t){try{console.log(" BudgetService.reorderEnvelopes called for user:",e);const r=t.map(i=>{const a=Ut(rt,"users",e,"envelopes",i.id);return ia(a,{orderIndex:i.orderIndex,lastUpdated:ht.now()},{merge:!0})});await Promise.all(r),console.log(" Reordered envelopes")}catch(r){throw console.error(" BudgetService.reorderEnvelopes failed:",r),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{console.log(" BudgetService.createTransaction called for user:",e.userId);const t=ar(rt,"users",e.userId,"transactions"),r=await Td(t,{...e,createdAt:ht.now()}),i={...e,id:r.id};return console.log(" Created transaction:",i.id),i}catch(t){throw console.error(" BudgetService.createTransaction failed:",t),new Error(`Failed to create transaction: ${t instanceof Error?t.message:"Unknown error"}`)}}async updateTransaction(e,t){try{console.log(" BudgetService.updateTransaction called for transaction:",t.id);const r=Object.fromEntries(Object.entries(t).filter(([a,o])=>o!==void 0));console.log(" Clean transaction for Firestore:",r);const i=Ut(rt,"users",e,"transactions",t.id);await ia(i,r,{merge:!0}),console.log(" Updated transaction:",t.id)}catch(r){throw console.error(" BudgetService.updateTransaction failed:",r),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,t){try{console.log(" BudgetService.deleteTransaction called for transaction:",t);const r=Ut(rt,"users",e,"transactions",t);await aa(r),console.log(" Deleted transaction:",t)}catch(r){throw console.error(" BudgetService.deleteTransaction failed:",r),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async getMonthData(e,t){try{console.log(` BudgetService.getMonthData: Fetching for user ${e}, month ${t}`);const r=Wr(ar(rt,"users",e,"incomeSources"),Hu("month","==",t)),a=(await Ni(r)).docs.map(d=>{const h=d.data();return{id:d.id,userId:h.userId,month:h.month,name:h.name,amount:parseFloat(h.amount),frequency:h.frequency,category:h.category,createdAt:Kn(h.createdAt),updatedAt:Kn(h.updatedAt)}}).sort((d,h)=>new Date(d.createdAt).getTime()-new Date(h.createdAt).getTime()),o=Wr(ar(rt,"users",e,"envelopeAllocations"),Hu("month","==",t)),u=(await Ni(o)).docs.map(d=>{const h=d.data();return{id:d.id,userId:h.userId,envelopeId:h.envelopeId,month:h.month,budgetedAmount:parseFloat(h.budgetedAmount),createdAt:Kn(h.createdAt),updatedAt:Kn(h.updatedAt)}}).sort((d,h)=>new Date(d.createdAt).getTime()-new Date(h.createdAt).getTime());return console.log(` Fetched ${a.length} income sources and ${u.length} allocations for ${t}`),{incomeSources:a,allocations:u}}catch(r){throw console.error(" BudgetService.getMonthData failed:",r),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{console.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const t={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(p=>p.id));console.log(` Found ${r.length} existing envelopes`);const a=ar(rt,"users",e,"envelopeAllocations"),o=await Ni(a),c=[],u=new Set;for(const p of o.docs){const m=p.data();u.add(m.month),i.has(m.envelopeId)||(c.push(p.id),console.log(` Found orphaned allocation: ${p.id} for envelope ${m.envelopeId} in month ${m.month}`))}if(c.length>0){const p=c.map(m=>aa(Ut(rt,"users",e,"envelopeAllocations",m)));await Promise.all(p),t.orphanedAllocationsDeleted=c.length,t.details.deletedAllocationIds=c,console.log(` Deleted ${c.length} orphaned allocations`)}const d=await this.getTransactions(e),h=[];for(const p of d)i.has(p.envelopeId)||(h.push(p.id),console.log(` Found orphaned transaction: ${p.id} for envelope ${p.envelopeId}`));if(h.length>0){const p=h.map(m=>aa(Ut(rt,"users",e,"transactions",m)));await Promise.all(p),t.orphanedTransactionsDeleted=h.length,t.details.deletedTransactionIds=h,console.log(` Deleted ${h.length} orphaned transactions`)}return t.details.monthsProcessed=Array.from(u),console.log(" Cleanup completed:",{orphanedAllocationsDeleted:t.orphanedAllocationsDeleted,orphanedTransactionsDeleted:t.orphanedTransactionsDeleted,monthsProcessed:t.details.monthsProcessed.length}),t}catch(t){throw console.error(" BudgetService.cleanupOrphanedData failed:",t),new Error(`Failed to cleanup orphaned data: ${t instanceof Error?t.message:"Unknown error"}`)}}async deleteAllUserData(e){try{console.log(" BudgetService.deleteAllUserData: STARTING DELETION for user:",e);const t=["envelopes","transactions","incomeSources","envelopeAllocations","monthlyBudgets","appSettings"];for(const r of t){console.log(` Deleting collection: ${r}...`);const i=ar(rt,"users",e,r),a=await Ni(i);if(a.empty){console.log("   (Empty collection)");continue}const o=a.docs.map(c=>aa(c.ref));await Promise.all(o),console.log(`    Deleted ${a.size} documents from ${r}`)}console.log(" All user data deleted successfully.")}catch(t){throw console.error(" BudgetService.deleteAllUserData failed:",t),new Error(`Failed to delete all user data: ${t instanceof Error?t.message:"Unknown error"}`)}}}const WJ=tc.getInstance(),sx=n=>({id:n.uid,username:n.email||n.uid,displayName:n.displayName||n.email?.split("@")[0]||"User",email:n.email||void 0}),Bi=_E()(OO(n=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,t)=>{n({isLoading:!0,loginError:null});try{const i=(await IZ(Io,e,t)).user;if(!i.emailVerified)return await wk(Io),n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${i.email} not verified`),!1;const a=sx(i);return n({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${a.email}`),!0}catch(r){console.error("Login error:",r),console.error("Error code:",r.code),console.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,t,r)=>{n({isLoading:!0,loginError:null});try{const a=(await CZ(Io,e,t)).user;await DZ(a,{displayName:r}),await _k(a);const o=sx(a);return n({currentUser:o,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${o.email}, verification email sent`),!0}catch(i){console.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await wk(Io),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{n({loginError:null})},sendPasswordReset:async e=>{n({isLoading:!0,loginError:null});try{return await AZ(Io,e),n({isLoading:!1}),!0}catch(t){console.error("Password reset error:",t);let r="Failed to send password reset email. Please try again.";switch(t.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return n({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=Io.currentUser;if(!e)return n({loginError:"No user is currently signed in."}),!1;n({isLoading:!0,loginError:null});try{return await _k(e),n({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(t){console.error("Email verification error:",t);let r="Failed to send verification email. Please try again.";switch(t.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return n({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=Bi.getState();if(e.lastVerificationEmailSent){const t=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(t<r){const i=Math.ceil((r-t)/1e3);return n({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},deleteAccount:async e=>{const t=Io.currentUser;if(!t||!t.email)return n({loginError:"No user is currently signed in."}),!1;n({isLoading:!0,loginError:null});try{const r=Mc.credential(t.email,e);return await TZ(t,r),await PZ(t),n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${t.email}`),!0}catch(r){console.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return n({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>Bi.getState().isInitialized?()=>{}:(n({isInitialized:!1}),MZ(Io,r=>{const i=Date.now(),a=Bi.getState(),o=r?sx(r):null,c=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,d=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&c&&!o,h=r?r.emailVerified:!0,p=r&&h||!!d,m=r?o:d?a.currentUser:null;n({currentUser:m,isAuthenticated:p,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&h?i:a.lastAuthTime}),m?console.log(` Auth state: User is signed in (${m.email})`,d?"(offline grace period)":h?"(verified)":"(unverified)"):console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:n=>({isAuthenticated:n.isAuthenticated,currentUser:n.currentUser,lastAuthTime:n.lastAuthTime,offlineGracePeriod:n.offlineGracePeriod,lastVerificationEmailSent:n.lastVerificationEmailSent})})),$n=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:Bi},Symbol.toStringTag,{value:"Module"})),ox=n=>ar(rt,"users",n,"transactions"),QJ={subscribeToTransactions:(n,e)=>{const t=Wr(ox(n),Sd("date","desc"));return uc(t,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllTransactions:async n=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${n}`);const e=Wr(ox(n),Sd("date","desc")),r=(await Ni(e)).docs.map(i=>{const a={id:i.id,...i.data()};return RS(a)});return console.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async n=>{const{userId:e,id:t,...r}=n;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),console.log(` Original transaction had temp ID: ${t}`);try{console.log(" About to call addDoc with:",r);const i=await Td(ox(e),r);console.log(" addDoc succeeded, docRef:",i),console.log(` Document ID: ${i.id}`),console.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return console.log(" Final result object:",a),a}catch(i){throw console.error(" addDoc failed:",i),console.error("Error message:",i.message),i}},updateTransaction:async(n,e,t)=>{const r=Ut(rt,"users",n,"transactions",e);return await ay(r,t)},deleteTransaction:async(n,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${n}`);try{const t=Ut(rt,"users",n,"transactions",e);console.log(` Deleting document at path: ${t.path}`),await aa(t),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(t){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,t),console.error("Error message:",t.message),t}}},lx=n=>ar(rt,"users",n,"envelopes"),ZJ={subscribeToEnvelopes:(n,e)=>{const t=Wr(lx(n),Sd("orderIndex","asc"));return uc(t,i=>{const a=i.docs.map(o=>{const c=o.data();return{id:o.id,...c,createdAt:c.createdAt?.toDate?.()?c.createdAt.toDate().toISOString():c.createdAt,lastUpdated:c.lastUpdated?.toDate?.()?c.lastUpdated.toDate().toISOString():c.lastUpdated}});e(a)})},getAllEnvelopes:async n=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",n);const e=lx(n),i=(await Ni(e)).docs.map((a,o)=>{const c=a.data();return{id:a.id,...c,createdAt:c.createdAt?.toDate?.()?c.createdAt.toDate().toISOString():c.createdAt,lastUpdated:c.lastUpdated?.toDate?.()?c.lastUpdated.toDate().toISOString():c.lastUpdated,orderIndex:c.orderIndex??o}}).sort((a,o)=>{const c=a.orderIndex??0,u=o.orderIndex??0;return c-u});return console.log(" Fetched envelopes:",i.length),i}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async n=>{const{userId:e,id:t,...r}=n;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await Td(lx(e),r)).id,...r,userId:e}}catch(i){throw console.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(n,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const t=Ut(rt,"users",n,"envelopes",e.id);return await ia(t,e,{merge:!0})},updateBalance:async(n,e,t)=>{const r=Ut(rt,"users",n,"envelopes",e);return await ay(r,{currentBalance:t,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(n,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${n}`);const t=Ut(rt,"users",n,"envelopes",e);await aa(t),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},cx=n=>ar(rt,"users",n,"distributionTemplates"),JJ={subscribeToDistributionTemplates:(n,e)=>{const t=Wr(cx(n),Sd("lastUsed","desc"));return uc(t,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllDistributionTemplates:async n=>{const e=Wr(cx(n),Sd("lastUsed","desc"));return(await Ni(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async n=>{const{userId:e,id:t,...r}=n;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await Td(cx(e),r);console.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return console.log(" Final template result object:",a),a}catch(i){throw console.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(n,e)=>{const t=Ut(rt,"users",n,"distributionTemplates",e.id);return await ia(t,e,{merge:!0})},updateDistributionTemplate:async(n,e,t)=>{const r=Ut(rt,"users",n,"distributionTemplates",e);return await ay(r,t)},deleteDistributionTemplate:async(n,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${n}`);const t=Ut(rt,"users",n,"distributionTemplates",e);await aa(t),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},ux=n=>ar(rt,"users",n,"appSettings"),eee={subscribeToAppSettings:(n,e)=>{const t=Wr(ux(n),lk(1));return uc(t,i=>{if(i.empty){e(null);return}const a=i.docs.map(o=>({id:o.id,...o.data()}))[0];e(a)})},getAppSettings:async n=>{const e=Wr(ux(n),lk(1)),t=await Ni(e);if(t.empty)return null;const r=t.docs[0];return{id:r.id,...r.data()}},createAppSettings:async n=>{const{userId:e,...t}=n;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,t);try{const r=await Td(ux(e),t);console.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...t,userId:e};return console.log(" Final settings result object:",i),i}catch(r){throw console.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(n,e)=>{const t=Ut(rt,"users",n,"appSettings",e.id);return await ia(t,e,{merge:!0})},updateAppSettings:async(n,e,t)=>{const r=Ut(rt,"users",n,"appSettings",e);return await ay(r,t)},deleteAppSettings:async(n,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${n}`);const t=Ut(rt,"users",n,"appSettings",e);await aa(t),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}};class oa{static instance;static getInstance(){return oa.instance||(oa.instance=new oa),oa.instance}async getMonthlyBudget(e,t){try{const r=Ut(rt,"users",e,"monthlyBudgets",t),i=await wQ(r);if(i.exists()){const a=i.data();return{id:a.id,userId:a.userId,month:a.month,totalIncome:parseFloat(a.totalIncome),availableToBudget:parseFloat(a.availableToBudget),createdAt:Kn(a.createdAt),updatedAt:Kn(a.updatedAt)}}return null}catch(r){throw console.error("Error getting monthly budget:",r),r}}async createOrUpdateMonthlyBudget(e){try{const t=ht.now(),r=`${e.userId}_${e.month}`,i={id:r,userId:e.userId,month:e.month,totalIncome:e.totalIncome.toString(),availableToBudget:e.availableToBudget.toString(),createdAt:t,updatedAt:t};return await ia(Ut(rt,"users",e.userId,"monthlyBudgets",e.month),i),{...e,id:r,createdAt:Kn(t),updatedAt:Kn(t)}}catch(t){throw console.error("Error creating/updating monthly budget:",t),t}}async getIncomeSources(e,t){try{const r=Wr(ar(rt,"users",e,"incomeSources"),Hu("month","==",t));return(await Ni(r)).docs.map(a=>{const o=a.data();return{id:o.id,userId:o.userId,month:o.month,name:o.name,amount:parseFloat(o.amount),frequency:o.frequency,category:o.category,createdAt:Kn(o.createdAt),updatedAt:Kn(o.updatedAt)}}).sort((a,o)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(r){throw console.error("Error getting income sources:",r),r}}async createIncomeSource(e){try{const t=ht.now(),r=Ut(ar(rt,"users",e.userId,"incomeSources")),i={id:r.id,userId:e.userId,month:e.month,name:e.name,amount:e.amount.toString(),frequency:e.frequency||"monthly",...e.category&&{category:e.category},createdAt:t,updatedAt:t};return await ia(r,i),{...e,frequency:e.frequency||"monthly",id:r.id,createdAt:Kn(t),updatedAt:Kn(t)}}catch(t){throw console.error("Error creating income source:",t),t}}async getEnvelopeAllocations(e,t){try{const r=Wr(ar(rt,"users",e,"envelopeAllocations"),Hu("month","==",t));return(await Ni(r)).docs.map(a=>{const o=a.data();return{id:o.id,userId:o.userId,envelopeId:o.envelopeId,month:o.month,budgetedAmount:parseFloat(o.budgetedAmount),createdAt:Kn(o.createdAt),updatedAt:Kn(o.updatedAt)}}).sort((a,o)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(r){throw console.error("Error getting envelope allocations:",r),r}}async createEnvelopeAllocation(e){try{const t=ht.now(),r=Ut(ar(rt,"users",e.userId,"envelopeAllocations")),i={id:r.id,userId:e.userId,envelopeId:e.envelopeId,month:e.month,budgetedAmount:e.budgetedAmount.toString(),createdAt:t,updatedAt:t};return await ia(r,i),{...e,id:r.id,createdAt:Kn(t),updatedAt:Kn(t)}}catch(t){throw console.error("Error creating envelope allocation:",t),t}}async copyMonthData(e,t,r){try{const i=await this.getIncomeSources(e,t);for(const d of i)await this.createIncomeSource({...d,month:r});const a=await this.getEnvelopeAllocations(e,t);for(const d of a)await this.createEnvelopeAllocation({...d,month:r});const o=i.reduce((d,h)=>d+h.amount,0),c=a.reduce((d,h)=>d+h.budgetedAmount,0),u=o-c;await this.createOrUpdateMonthlyBudget({userId:e,month:r,totalIncome:o,availableToBudget:u})}catch(i){throw console.error("Error copying month data:",i),i}}async deleteIncomeSource(e,t){try{const r=Ut(rt,"users",e,"incomeSources",t);await aa(r)}catch(r){throw console.error("Error deleting income source:",r),r}}async updateIncomeSource(e,t,r){try{const i=Ut(rt,"users",e,"incomeSources",t),a={...r,updatedAt:ht.now()};await ia(i,a,{merge:!0})}catch(i){throw console.error("Error updating income source:",i),i}}async deleteEnvelopeAllocation(e,t){try{const r=Ut(rt,"users",e,"envelopeAllocations",t);await aa(r)}catch(r){throw console.error("Error deleting envelope allocation:",r),r}}async updateEnvelopeAllocation(e,t,r){try{const i=Ut(rt,"users",e,"envelopeAllocations",t),a={...r,updatedAt:ht.now()};await ia(i,a,{merge:!0})}catch(i){throw console.error("Error updating envelope allocation:",i),i}}async clearMonthData(e,t){try{const[r,i]=await Promise.all([this.getIncomeSources(e,t),this.getEnvelopeAllocations(e,t)]),a=r.map(c=>this.deleteIncomeSource(e,c.id)),o=i.map(c=>this.deleteEnvelopeAllocation(e,c.id));await Promise.all([...a,...o]),await this.createOrUpdateMonthlyBudget({userId:e,month:t,totalIncome:0,availableToBudget:0})}catch(r){throw console.error("Error clearing month data:",r),r}}async calculateAvailableToBudget(e,t){try{const r=await this.getIncomeSources(e,t),i=await this.getEnvelopeAllocations(e,t),a=r.reduce((c,u)=>c+u.amount,0),o=i.reduce((c,u)=>c+u.budgetedAmount,0);return a-o}catch(r){throw console.error("Error calculating available to budget:",r),r}}subscribeToMonthlyBudget(e,t,r){const i=Ut(rt,"monthlyBudgets",`${e}_${t}`);return uc(i,a=>{if(a.exists()){const o=a.data();r(o)}else r(null)})}subscribeToIncomeSources(e,t,r){const i=Wr(ar(rt,"users",e,"incomeSources"),Hu("month","==",t));return uc(i,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()})).sort((c,u)=>{const d=c.createdAt?.toDate?.()?.getTime()||0,h=u.createdAt?.toDate?.()?.getTime()||0;return d-h});r(o)})}subscribeToEnvelopeAllocations(e,t,r){const i=Wr(ar(rt,"users",e,"envelopeAllocations"),Hu("month","==",t));return uc(i,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));r(o)})}}const ZV=oa.getInstance(),Km=Object.freeze(Object.defineProperty({__proto__:null,MonthlyBudgetService:oa,monthlyBudgetService:ZV},Symbol.toStringTag,{value:"Module"})),JV=n=>({id:n.id,userId:n.userId,month:n.month,name:n.name,amount:typeof n.amount=="string"?parseFloat(n.amount):n.amount,frequency:n.frequency,category:n.category,createdAt:n.createdAt,updatedAt:n.updatedAt}),ej=n=>({id:n.id,userId:n.userId,month:n.month,envelopeId:n.envelopeId,budgetedAmount:typeof n.budgetedAmount=="string"?parseFloat(n.budgetedAmount):n.budgetedAmount,createdAt:n.createdAt,updatedAt:n.updatedAt}),tee=n=>RS(n),nee=n=>({id:n.id,name:n.name||"",currentBalance:n.currentBalance||0,lastUpdated:n.lastUpdated?.toDate?.()?n.lastUpdated.toDate().toISOString():n.lastUpdated,isActive:n.isActive??!0,orderIndex:n.orderIndex??0,userId:n.userId||void 0,createdAt:n.createdAt?.toDate?.()?n.createdAt.toDate().toISOString():n.createdAt,isPiggybank:n.isPiggybank,piggybankConfig:n.piggybankConfig}),ree=n=>({id:n.id,name:n.name||"",distributions:n.distributions||{},lastUsed:n.lastUsed?.toDate?.()?n.lastUsed.toDate().toISOString():n.lastUsed||new Date().toISOString(),note:n.note||"",userId:n.userId||void 0}),Nk=(n,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const t=n.getState().currentMonth;console.log(" Current month for subscriptions:",t);const r=ZJ.subscribeToEnvelopes(e,d=>{const h=n.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Envelopes updated",d.length);const p=d.map(nee);n.setState({envelopes:p})}else console.log(" Real-time sync: BLOCKED envelope update",{isOnline:h.isOnline,pendingSync:h.pendingSync,resetPending:h.resetPending,isImporting:h.isImporting})}),i=QJ.subscribeToTransactions(e,d=>{const h=n.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Transactions updated",d.length);const p=d.map(tee);n.setState({transactions:p})}else console.log(" Real-time sync: BLOCKED transaction update",{isOnline:h.isOnline,pendingSync:h.pendingSync,resetPending:h.resetPending,isImporting:h.isImporting,transactionCount:d.length})}),a=JJ.subscribeToDistributionTemplates(e,d=>{const h=n.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Templates updated from Firebase",d.length),console.log(" Firebase templates:",d.map(m=>({id:m.id,name:m.name})));const p=d.map(ree);console.log(" Setting store templates to:",p.map(m=>({id:m.id,name:m.name})))}else console.log(" Real-time sync: Skipping template update (offline or pending changes)")}),o=eee.subscribeToAppSettings(e,d=>{const h=n.getState();h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting&&(console.log(" Real-time sync: Settings updated",d?"found":"null"),n.setState({appSettings:d}))}),c=oa.getInstance().subscribeToIncomeSources(e,t,d=>{const h=n.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Income sources updated",d.length);const p=d.map(JV),m=n.getState().incomeSources;n.setState({incomeSources:{...m,[t]:p}})}else console.log(" Real-time sync: BLOCKED income sources update")}),u=oa.getInstance().subscribeToEnvelopeAllocations(e,t,d=>{const h=n.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Allocations updated",d.length);const p=d.map(ej),m=n.getState().allocations;n.setState({allocations:{...m,[t]:p}})}else console.log(" Real-time sync: BLOCKED allocations update")});window.__firebaseUnsubscribers={envelopes:r,transactions:i,templates:a,settings:o,incomeSources:c,allocations:u},console.log(" Real-time subscriptions active - cross-device sync enabled")},iee=n=>{const{useBudgetStore:e,useAuthStore:t,getCurrentUserId:r}=n;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const u=e.getState();u.isOnline&&(u.pendingSync||u.resetPending)&&(console.log(" Auto-syncing pending operations..."),u.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let i=null;const a=()=>{i&&clearInterval(i),i=setInterval(async()=>{const u=e.getState();if(!u.isOnline&&!u.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(u.pendingSync||u.resetPending)&&e.getState().syncData(),i&&(clearInterval(i),i=null)):e.setState({testingConnectivity:!1})}catch(d){console.log(" Periodic retry failed:",d),e.setState({testingConnectivity:!1})}}else u.isOnline&&i&&(clearInterval(i),i=null)},3e4)};a(),e.subscribe(u=>{!u.isOnline&&!i&&(console.log(" Starting periodic connectivity retry"),a())});const o=t.getState();o.isAuthenticated&&o.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),Nk(e,r())),t.subscribe(u=>{if(u.isAuthenticated&&u.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),Nk(e,r());else if(!u.isAuthenticated&&!u.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const d=window.__firebaseUnsubscribers;d.envelopes&&d.envelopes(),d.transactions&&d.transactions(),d.templates&&d.templates(),d.settings&&d.settings(),d.incomeSources&&d.incomeSources(),d.allocations&&d.allocations(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let c=e.getState().currentMonth;e.subscribe(u=>{if(u.currentMonth!==c&&u.isAuthenticated){console.log(" Month changed from",c,"to",u.currentMonth),c=u.currentMonth;const d=r();if(d&&window.__firebaseUnsubscribers){const h=window.__firebaseUnsubscribers;h.incomeSources&&(h.incomeSources(),console.log(" Unsubscribed from old month income sources")),h.allocations&&(h.allocations(),console.log(" Unsubscribed from old month allocations")),h.incomeSources=oa.getInstance().subscribeToIncomeSources(d,u.currentMonth,p=>{const m=e.getState();if(m.isOnline&&!m.pendingSync&&!m.resetPending&&!m.isImporting){console.log(" Real-time sync: Income sources updated for new month",p.length);const b=p.map(JV),_=e.getState().incomeSources;e.setState({incomeSources:{..._,[u.currentMonth]:b}})}}),h.allocations=oa.getInstance().subscribeToEnvelopeAllocations(d,u.currentMonth,p=>{const m=e.getState();if(m.isOnline&&!m.pendingSync&&!m.resetPending&&!m.isImporting){console.log(" Real-time sync: Allocations updated for new month",p.length);const b=p.map(ej),_=e.getState().allocations;e.setState({allocations:{..._,[u.currentMonth]:b}})}}),console.log(" Subscribed to income sources and allocations for new month:",u.currentMonth)}}})},aee=()=>Bi.getState().currentUser?.id||"",kr=tc.getInstance(),sr=_E()(f$(OO((n,e)=>({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isLoading:!1,error:null,pendingSync:!1,resetPending:!1,isImporting:!1,testingConnectivity:!1,fetchMonthData:async t=>{try{const i=(await on(()=>Promise.resolve().then(()=>$n),[]).then(u=>u.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping month data fetch");return}console.log(`Fetching month data for: ${t}`);const a=await kr.getMonthData(i.id,t),o=e();n({incomeSources:{...o.incomeSources,[t]:a.incomeSources},allocations:{...o.allocations,[t]:a.allocations}}),console.log(` Fetched month data for ${t}`),(async()=>{const u=e(),d=u.allocations[t]||[],h=u.transactions.filter(m=>m.month===t);let p=0;for(const m of d){const b=u.envelopes.find(E=>E.id===m.envelopeId);if(b?.isPiggybank)continue;const _=h.find(E=>E.envelopeId===m.envelopeId&&(E.description==="Monthly Budget Allocation"||E.description==="Monthly Allocation"));_?_.amount!==m.budgetedAmount&&(console.log(` Repairing mismatch for envelope ${b?.name||m.envelopeId}: Alloc ${m.budgetedAmount} vs Tx ${_.amount}`),await u.updateTransaction({..._,amount:m.budgetedAmount}),p++):m.budgetedAmount>0&&(console.log(` Repairing missing transaction for envelope ${b?.name||m.envelopeId}`),await u.addTransaction({description:"Monthly Budget Allocation",amount:m.budgetedAmount,envelopeId:m.envelopeId,type:"Income",month:t,date:`${t}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),p++)}p>0&&console.log(` Repaired ${p} allocation discrepancies for ${t}`)})().catch(u=>console.error("Verification failed:",u))}catch(r){console.error(` Failed to fetch month data for ${t}:`,r)}},removeEnvelopeFromMonth:async(t,r)=>{try{n({isLoading:!0,error:null}),console.log(` Removing envelope ${t} from month ${r}`);const i=e(),a=i.allocations[r]?.find(c=>c.envelopeId===t);a?await e().deleteEnvelopeAllocation(a.id):console.log(` No allocation found for envelope ${t} in ${r}`);const o=i.transactions.filter(c=>c.envelopeId===t&&(c.month===r||c.date.startsWith(r)));o.length>0&&(console.log(` Deleting ${o.length} transactions for envelope ${t} in ${r}`),await Promise.all(o.map(c=>e().deleteTransaction(c.id)))),n({isLoading:!1}),console.log(` Removed envelope ${t} from month ${r}`)}catch(i){throw console.error(" removeEnvelopeFromMonth failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to remove envelope from month"}),i}},setMonth:async t=>{n({currentMonth:t});const r=e();(r.incomeSources[t]===void 0||r.allocations[t]===void 0)&&(console.log(`Month ${t} data missing in store, fetching...`),n({isLoading:!0}),await e().fetchMonthData(t),n({isLoading:!1}))},init:async()=>{console.log("BudgetStore initializing...");const t=e();try{n({isLoading:!0,error:null});const i=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping data fetch"),n({isLoading:!1});return}console.log(`Fetching data for user: ${i.id}, month: ${t.currentMonth}`);const[a,o,c]=await Promise.all([kr.getEnvelopes(i.id),kr.getTransactions(i.id),kr.getMonthData(i.id,t.currentMonth)]);n({envelopes:a,transactions:o,incomeSources:{...t.incomeSources,[t.currentMonth]:c.incomeSources},allocations:{...t.allocations,[t.currentMonth]:c.allocations},isLoading:!1,error:null}),console.log(` BudgetStore initialized: ${a.length} envelopes, ${o.length} transactions, ${c.incomeSources.length} income sources, ${c.allocations.length} allocations`)}catch(r){console.error(" BudgetStore initialization failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},addEnvelope:async t=>{try{n({isLoading:!0,error:null});const i=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a={...t,userId:i.id},o=await kr.createEnvelope(a);return n(c=>c.envelopes.some(d=>d.id===o.id)?{isLoading:!1}:{envelopes:[...c.envelopes,o],isLoading:!1}),console.log(" Added envelope:",o.id),o.id}catch(r){throw console.error(" addEnvelope failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async t=>{try{n({isLoading:!0,error:null});const i=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await kr.updateEnvelope(i.id,t),n(a=>({envelopes:a.envelopes.map(o=>o.id===t.id?t:o),isLoading:!1})),console.log(" Updated envelope:",t.id)}catch(r){throw console.error(" updateEnvelope failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async t=>{try{n({isLoading:!0,error:null});const i=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await kr.deleteEnvelope(i.id,t),n(a=>({envelopes:a.envelopes.filter(o=>o.id!==t),transactions:a.transactions.filter(o=>o.envelopeId!==t),isLoading:!1})),console.log(" Deleted envelope:",t)}catch(r){throw console.error(" deleteEnvelope failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async t=>{try{n({isLoading:!0,error:null});const r=e(),i=new Map;t.forEach((d,h)=>{i.set(d,h)});const a=r.envelopes.map(d=>{if(!i.has(d.id))return d;const h=i.get(d.id);return d.orderIndex===h?d:{...d,orderIndex:h}}),o=a.filter((d,h)=>d!==r.envelopes[h]);if(!o.length){n({isLoading:!1});return}const u=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!u)throw new Error("No authenticated user found");await kr.reorderEnvelopes(u.id,o),n({envelopes:a,isLoading:!1}),console.log(" Reordered envelopes")}catch(r){throw console.error(" reorderEnvelopes failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},addTransaction:async t=>{try{n({isLoading:!0,error:null});const i=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(t.date),o=t.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,c={...t,userId:i.id,month:o},u=await kr.createTransaction(c);n(d=>d.transactions.some(p=>p.id===u.id)?{isLoading:!1}:{transactions:[...d.transactions,u],isLoading:!1}),console.log(" Added transaction:",u.id)}catch(r){throw console.error(" addTransaction failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async t=>{try{n({isLoading:!0,error:null});const i=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(t.date),o=t.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,c={...t,month:o};await kr.updateTransaction(i.id,c),n(u=>({transactions:u.transactions.map(d=>d.id===t.id?c:d),isLoading:!1})),console.log(" Updated transaction:",t.id)}catch(r){throw console.error(" updateTransaction failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async t=>{try{n({isLoading:!0,error:null});const i=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await kr.deleteTransaction(i.id,t),n(a=>({transactions:a.transactions.filter(o=>o.id!==t),isLoading:!1})),console.log(" Deleted transaction:",t)}catch(r){throw console.error(" deleteTransaction failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async t=>{await e().updateTransaction(t)},transferFunds:async(t,r,i,a,o)=>{try{const c=o?typeof o=="string"?o:o.toISOString():new Date().toISOString(),u=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(d=>d.id===r)?.name||"envelope"}`,amount:i,envelopeId:t,date:c,type:"Expense",transferId:u,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(d=>d.id===t)?.name||"envelope"}`,amount:i,envelopeId:r,date:c,type:"Income",transferId:u,reconciled:!1}),console.log(" Transfer completed")}catch(c){throw console.error(" transferFunds failed:",c),c}},fetchData:async()=>{await e().init()},renameEnvelope:async(t,r)=>{try{n({isLoading:!0,error:null});const a=e().envelopes.find(d=>d.id===t);if(!a)throw new Error("Envelope not found");n(d=>({envelopes:d.envelopes.map(h=>h.id===t?{...h,name:r}:h),isLoading:!0}));const c=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!c)throw new Error("No authenticated user found");const u={...a,name:r};await kr.updateEnvelope(c.id,u),n({isLoading:!1}),console.log(" Renamed envelope:",t)}catch(i){throw console.error(" renameEnvelope failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},getEnvelopeBalance:(t,r)=>{const i=e(),a=i.envelopes.find(o=>o.id===t);if(!a)return console.log(` getEnvelopeBalance: Envelope ${t} not found`),0;if(a.isPiggybank){const o=i.transactions.filter(p=>p.envelopeId===t),c=o.filter(p=>p.type==="Expense"),u=o.filter(p=>p.type==="Income"),d=c.reduce((p,m)=>p+(m.amount||0),0);return u.reduce((p,m)=>p+(m.amount||0),0)-d}if(r){const o=i.transactions.filter(p=>p.envelopeId===t&&p.month===r),c=o.filter(p=>p.type==="Expense"),u=o.filter(p=>p.type==="Income"),d=c.reduce((p,m)=>p+(m.amount||0),0);return u.reduce((p,m)=>p+(m.amount||0),0)-d}return console.warn(` getEnvelopeBalance: Month not provided for non-piggybank envelope ${t}. Returning 0.`),0},resetData:async()=>{console.log(" Resetting all data"),n({isLoading:!0});try{const r=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(i=>i.useAuthStore.getState())).currentUser;r?(console.log(" Deleting all data from Firestore for user:",r.id),await kr.deleteAllUserData(r.id)):console.warn(" No user logged in, only clearing local state"),n({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null}),console.log(" Reset data complete")}catch(t){throw console.error(" resetData failed:",t),n({isLoading:!1,error:t instanceof Error?t.message:"Failed to reset data"}),t}},importData:async t=>{try{if(n({isLoading:!0,error:null}),!t||typeof t!="object")throw new Error("Invalid data format");const i=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("You must be logged in to restore data.");return console.log(" Starting Time Machine Restore for user:",i.id),await kr.restoreUserData(i.id,t),console.log(" Reloading app state from cloud..."),await e().init(),n({isLoading:!1}),{success:!0,message:"Data restored successfully from backup."}}catch(r){return console.error(" importData failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},updateAppSettings:async t=>{try{n({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:t.theme??r.appSettings?.theme??"system",enableMoveableReorder:t.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,userId:t.userId??r.appSettings?.userId};n({appSettings:i,isLoading:!1}),console.log(" Updated app settings")}catch(r){throw console.error(" updateAppSettings failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;n({appSettings:{id:"default",theme:"system",enableMoveableReorder:!0}}),console.log(" Initialized app settings")}catch(t){throw console.error(" initializeAppSettings failed:",t),n({error:t instanceof Error?t.message:"Failed to initialize settings"}),t}},syncData:async()=>{await e().init()},testConnectivity:async()=>{console.log(" Testing connectivity");try{n({testingConnectivity:!0}),await e().init(),n({testingConnectivity:!1,isOnline:!0}),console.log(" Connectivity test passed")}catch(t){console.error(" Connectivity test failed:",t),n({testingConnectivity:!1,isOnline:!1,error:t instanceof Error?t.message:"Connectivity test failed"})}},updatePiggybankContribution:async(t,r)=>{try{n({isLoading:!0,error:null}),console.log(" Updating piggybank contribution:",{envelopeId:t,newAmount:r});const a=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const o=e().envelopes.find(u=>u.id===t&&u.isPiggybank);if(!o)throw new Error("Piggybank not found");const c={...o,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:o.piggybankConfig?.targetAmount,color:o.piggybankConfig?.color,icon:o.piggybankConfig?.icon,paused:o.piggybankConfig?.paused??!1}};if(console.log(" Updating envelope in Firestore:",c),await kr.updateEnvelope(a.id,c),console.log(" Envelope updated successfully"),n(u=>({envelopes:u.envelopes.map(d=>d.id===t?c:d),isLoading:!1})),!o.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(t,r),setTimeout(()=>{e().transactions.find(d=>d.envelopeId===t&&d.description==="Monthly Budget Allocation")||console.warn(" Monthly allocation transaction not found after update")},1e3)}catch(u){console.error(" Failed to update monthly budget allocation:",u)}console.log(" Piggybank contribution updated successfully")}catch(i){throw console.error(" updatePiggybankContribution failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}},addIncomeSource:async(t,r)=>{try{n({isLoading:!0,error:null});const a=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");console.log(" Adding income source:",{month:t,source:r});const{MonthlyBudgetService:o}=await on(async()=>{const{MonthlyBudgetService:d}=await Promise.resolve().then(()=>Km);return{MonthlyBudgetService:d}},void 0),u=await o.getInstance().createIncomeSource({...r,userId:a.id,month:t});n(d=>{const h=d.incomeSources[t]||[];return h.some(m=>m.id===u.id)?{isLoading:!1}:{incomeSources:{...d.incomeSources,[t]:[...h,u]},isLoading:!1}}),console.log(" Added income source:",u.id)}catch(i){throw console.error(" addIncomeSource failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(t,r)=>{try{n({isLoading:!0,error:null}),console.log(" Updating income source:",{month:t,sourceId:r.id}),n(i=>({incomeSources:{...i.incomeSources,[t]:i.incomeSources[t]?.map(a=>a.id===r.id?{...r,updatedAt:new Date().toISOString()}:a)||[]},isLoading:!1})),console.log(" Updated income source:",r.id)}catch(i){throw console.error(" updateIncomeSource failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(t,r)=>{try{n({isLoading:!0,error:null}),console.log(" Deleting income source:",{month:t,sourceId:r}),n(i=>({incomeSources:{...i.incomeSources,[t]:i.incomeSources[t]?.filter(a=>a.id!==r)||[]},isLoading:!1})),console.log(" Deleted income source:",r)}catch(i){throw console.error(" deleteIncomeSource failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async t=>{try{n({isLoading:!0,error:null});const i=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(_=>_.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");console.log(" Copying allocations from previous month:",t);const[a,o]=t.split("-").map(Number);let c=a,u=o-1;u<1&&(c=a-1,u=12);const d=`${c}-${String(u).padStart(2,"0")}`,h=e().incomeSources[d]||[];if(console.log(` Found ${h.length} income sources from ${d}`),h.length>0){for(const _ of h){const{id:E,...S}=_;await e().addIncomeSource(t,S)}console.log(` Copied ${h.length} income sources to ${t}`)}const p=e().allocations[d]||[];console.log(` Found ${p.length} allocations from ${d}`);const m=p.filter(_=>!e().envelopes.find(S=>S.id===_.envelopeId)?.isPiggybank);if(m.length>0){for(const _ of m)await e().createEnvelopeAllocation({envelopeId:_.envelopeId,budgetedAmount:_.budgetedAmount,userId:i.id,month:t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),_.budgetedAmount>0&&await e().addTransaction({description:"Monthly Budget Allocation",amount:_.budgetedAmount,envelopeId:_.envelopeId,type:"Income",month:t,date:`${t}-01T00:00:00`,reconciled:!1,isAutomatic:!0});console.log(` Copied ${m.length} regular allocations to ${t}`)}const b=e().envelopes.filter(_=>_.isPiggybank);console.log(` Processing ${b.length} piggybanks for ${t}`);for(const _ of b){const E=_.piggybankConfig?.monthlyContribution,S=_.piggybankConfig?.paused??!1;if(!S&&E&&E>0)try{console.log(` Setting piggybank allocation for ${_.name}: ${E}`),await e().setEnvelopeAllocation(_.id,E)}catch(T){console.error(` Failed to set allocation for piggybank ${_.name}:`,T)}else console.log(` Skipping piggybank ${_.name} (paused=${S}, contribution=${E})`)}n({isLoading:!1}),console.log(` Complete monthly setup copied to ${t}`)}catch(r){throw console.error(" copyPreviousMonthAllocations failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(t,r)=>{try{n({isLoading:!0,error:null});const a=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(h=>h.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const o=e().currentMonth,c=e().envelopes.find(h=>h.id===t),u=c?.isPiggybank;console.log(` setEnvelopeAllocation called: envelopeId=${t}, amount=${r}, currentMonth=${o}, isPiggybank=${u}`);const d=e().allocations[o]?.find(h=>h.envelopeId===t);if(d?await e().updateEnvelopeAllocation(d.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:t,budgetedAmount:r,userId:a.id,month:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),u&&r>0&&!c?.piggybankConfig?.paused&&!e().transactions.find(p=>p.envelopeId===t&&p.month===o&&p.description==="Monthly Allocation")){const p={description:"Monthly Allocation",amount:r,envelopeId:t,type:"Income",month:o,date:`${o}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(p)}if(!u&&r>0){const h=e().transactions.find(p=>p.envelopeId===t&&p.month===o&&p.description==="Monthly Budget Allocation");if(h)await e().updateTransaction({...h,amount:r});else{const p={description:"Monthly Budget Allocation",amount:r,envelopeId:t,type:"Income",month:o,date:`${o}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(p)}}console.log(" Envelope allocation set successfully")}catch(i){throw console.error(" setEnvelopeAllocation failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async t=>{try{const i=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=e().currentMonth,{MonthlyBudgetService:o}=await on(async()=>{const{MonthlyBudgetService:d}=await Promise.resolve().then(()=>Km);return{MonthlyBudgetService:d}},void 0),u=await o.getInstance().createEnvelopeAllocation({envelopeId:t.envelopeId,budgetedAmount:t.budgetedAmount,userId:i.id,month:a});n(d=>{const h=d.allocations[a]||[];return h.some(m=>m.id===u.id)?{isLoading:!1}:{allocations:{...d.allocations,[a]:[...h,u]},isLoading:!1}}),console.log(" Created envelope allocation:",u.id)}catch(r){throw console.error(" createEnvelopeAllocation failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(t,r)=>{try{console.log(" Updating envelope allocation:",{id:t,updates:r});const i=e().currentMonth,o=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(m=>m.useAuthStore.getState())).currentUser;if(!o)throw new Error("No authenticated user found");const c=e().allocations[i]?.find(m=>m.id===t);if(!c)throw new Error("Allocation not found");const u=e().envelopes.find(m=>m.id===c.envelopeId),d=u?.isPiggybank,{MonthlyBudgetService:h}=await on(async()=>{const{MonthlyBudgetService:m}=await Promise.resolve().then(()=>Km);return{MonthlyBudgetService:m}},void 0);if(await h.getInstance().updateEnvelopeAllocation(o.id,t,{budgetedAmount:r.budgetedAmount?.toString()}),n(m=>({allocations:{...m.allocations,[i]:m.allocations[i]?.map(b=>b.id===t?{...b,...r,updatedAt:new Date().toISOString()}:b)||[]},isLoading:!1})),d&&r.budgetedAmount!==void 0){const m=e().transactions.find(b=>b.envelopeId===c.envelopeId&&b.month===i&&b.description==="Monthly Allocation");m?r.budgetedAmount>0&&!u?.piggybankConfig?.paused?await e().updateTransaction({...m,amount:r.budgetedAmount}):(r.budgetedAmount===0||u?.piggybankConfig?.paused)&&await e().deleteTransaction(m.id):r.budgetedAmount>0&&!u?.piggybankConfig?.paused&&await e().addTransaction({description:"Monthly Allocation",amount:r.budgetedAmount,envelopeId:c.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!d&&r.budgetedAmount!==void 0){const m=e().transactions.find(b=>b.envelopeId===c.envelopeId&&b.month===i&&b.description==="Monthly Budget Allocation");m?r.budgetedAmount>0?await e().updateTransaction({...m,amount:r.budgetedAmount}):r.budgetedAmount===0&&await e().deleteTransaction(m.id):r.budgetedAmount>0&&await e().addTransaction({description:"Monthly Budget Allocation",amount:r.budgetedAmount,envelopeId:c.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}console.log(" Updated envelope allocation:",t)}catch(i){throw console.error(" updateEnvelopeAllocation failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async t=>{try{console.log(" Deleting envelope allocation:",t);const r=e().currentMonth,a=(await on(()=>Promise.resolve().then(()=>$n),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const{MonthlyBudgetService:o}=await on(async()=>{const{MonthlyBudgetService:u}=await Promise.resolve().then(()=>Km);return{MonthlyBudgetService:u}},void 0);await o.getInstance().deleteEnvelopeAllocation(a.id,t),n(u=>({allocations:{...u.allocations,[r]:u.allocations[r]?.filter(d=>d.id!==t)||[]},isLoading:!1})),console.log(" Deleted envelope allocation:",t)}catch(r){throw console.error(" deleteEnvelopeAllocation failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const t=e().currentMonth,r=e().allocations[t]||[],i=e().incomeSources[t]||[],a=r.reduce((u,d)=>u+d.budgetedAmount,0);return i.reduce((u,d)=>u+d.amount,0)-a}catch(t){throw console.error(" refreshAvailableToBudget failed:",t),n({error:t instanceof Error?t.message:"Failed to refresh available to budget"}),t}},updateOnlineStatus:async()=>{try{const t=typeof navigator<"u"?navigator.onLine:!0;n({isOnline:t}),console.log(" Online status updated:",t)}catch(t){console.error(" Failed to update online status:",t)}},handleUserLogout:()=>{console.log(" Clearing user data on logout"),n({envelopes:[],transactions:[],incomeSources:{},allocations:{},isLoading:!1,error:null})}}),{name:"budget-storage"})));iee({useBudgetStore:sr,useAuthStore:Bi,getCurrentUserId:aee});const Pc=_E((n,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(t,r="neutral",i)=>{n({message:t,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},6e3)},hideToast:()=>{n({isVisible:!1})}}));var Yu=9e15,cl=1e9,H_="0123456789abcdef",hv="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",pv="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",$_={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Yu,maxE:Yu,crypto:!1},tj,Ss,it=!0,cy="[DecimalError] ",nl=cy+"Invalid argument: ",nj=cy+"Precision limit exceeded",rj=cy+"crypto unavailable",ij="[object Decimal]",Ir=Math.floor,Xn=Math.pow,see=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,oee=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,lee=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,aj=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ua=1e7,Qe=7,cee=9007199254740991,uee=hv.length-1,Y_=pv.length-1,we={toStringTag:ij};we.absoluteValue=we.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),Ge(n)};we.ceil=function(){return Ge(new this.constructor(this),this.e+1,2)};we.clampedTo=we.clamp=function(n,e){var t,r=this,i=r.constructor;if(n=new i(n),e=new i(e),!n.s||!e.s)return new i(NaN);if(n.gt(e))throw Error(nl+e);return t=r.cmp(n),t<0?n:r.cmp(e)>0?e:new i(r)};we.comparedTo=we.cmp=function(n){var e,t,r,i,a=this,o=a.d,c=(n=new a.constructor(n)).d,u=a.s,d=n.s;if(!o||!c)return!u||!d?NaN:u!==d?u:o===c?0:!o^u<0?1:-1;if(!o[0]||!c[0])return o[0]?u:c[0]?-d:0;if(u!==d)return u;if(a.e!==n.e)return a.e>n.e^u<0?1:-1;for(r=o.length,i=c.length,e=0,t=r<i?r:i;e<t;++e)if(o[e]!==c[e])return o[e]>c[e]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};we.cosine=we.cos=function(){var n,e,t=this,r=t.constructor;return t.d?t.d[0]?(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+Qe,r.rounding=1,t=dee(r,uj(r,t)),r.precision=n,r.rounding=e,Ge(Ss==2||Ss==3?t.neg():t,n,e,!0)):new r(1):new r(NaN)};we.cubeRoot=we.cbrt=function(){var n,e,t,r,i,a,o,c,u,d,h=this,p=h.constructor;if(!h.isFinite()||h.isZero())return new p(h);for(it=!1,a=h.s*Xn(h.s*h,1/3),!a||Math.abs(a)==1/0?(t=vr(h.d),n=h.e,(a=(n-t.length+1)%3)&&(t+=a==1||a==-2?"0":"00"),a=Xn(t,1/3),n=Ir((n+1)/3)-(n%3==(n<0?-1:2)),a==1/0?t="5e"+n:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),r=new p(t),r.s=h.s):r=new p(a.toString()),o=(n=p.precision)+3;;)if(c=r,u=c.times(c).times(c),d=u.plus(h),r=Zt(d.plus(h).times(c),d.plus(u),o+2,1),vr(c.d).slice(0,o)===(t=vr(r.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!i&&t=="4999"){if(!i&&(Ge(c,n+1,0),c.times(c).times(c).eq(h))){r=c;break}o+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Ge(r,n+1,1),e=!r.times(r).times(r).eq(h));break}return it=!0,Ge(r,n,p.rounding,e)};we.decimalPlaces=we.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-Ir(this.e/Qe))*Qe,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};we.dividedBy=we.div=function(n){return Zt(this,new this.constructor(n))};we.dividedToIntegerBy=we.divToInt=function(n){var e=this,t=e.constructor;return Ge(Zt(e,new t(n),0,1,1),t.precision,t.rounding)};we.equals=we.eq=function(n){return this.cmp(n)===0};we.floor=function(){return Ge(new this.constructor(this),this.e+1,3)};we.greaterThan=we.gt=function(n){return this.cmp(n)>0};we.greaterThanOrEqualTo=we.gte=function(n){var e=this.cmp(n);return e==1||e===0};we.hyperbolicCosine=we.cosh=function(){var n,e,t,r,i,a=this,o=a.constructor,c=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return c;t=o.precision,r=o.rounding,o.precision=t+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(n=Math.ceil(i/3),e=(1/dy(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),a=Cd(o,1,a.times(e),new o(1),!0);for(var u,d=n,h=new o(8);d--;)u=a.times(a),a=c.minus(u.times(h.minus(u.times(h))));return Ge(a,o.precision=t,o.rounding=r,!0)};we.hyperbolicSine=we.sinh=function(){var n,e,t,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,t=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=Cd(a,2,i,i,!0);else{n=1.4*Math.sqrt(r),n=n>16?16:n|0,i=i.times(1/dy(5,n)),i=Cd(a,2,i,i,!0);for(var o,c=new a(5),u=new a(16),d=new a(20);n--;)o=i.times(i),i=i.times(c.plus(o.times(u.times(o).plus(d))))}return a.precision=e,a.rounding=t,Ge(i,e,t,!0)};we.hyperbolicTangent=we.tanh=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+7,r.rounding=1,Zt(t.sinh(),t.cosh(),r.precision=n,r.rounding=e)):new r(t.s)};we.inverseCosine=we.acos=function(){var n=this,e=n.constructor,t=n.abs().cmp(1),r=e.precision,i=e.rounding;return t!==-1?t===0?n.isNeg()?Va(e,r,i):new e(0):new e(NaN):n.isZero()?Va(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,n=new e(1).minus(n).div(n.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,n.times(2))};we.inverseHyperbolicCosine=we.acosh=function(){var n,e,t=this,r=t.constructor;return t.lte(1)?new r(t.eq(1)?0:NaN):t.isFinite()?(n=r.precision,e=r.rounding,r.precision=n+Math.max(Math.abs(t.e),t.sd())+4,r.rounding=1,it=!1,t=t.times(t).minus(1).sqrt().plus(t),it=!0,r.precision=n,r.rounding=e,t.ln()):new r(t)};we.inverseHyperbolicSine=we.asinh=function(){var n,e,t=this,r=t.constructor;return!t.isFinite()||t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,r.rounding=1,it=!1,t=t.times(t).plus(1).sqrt().plus(t),it=!0,r.precision=n,r.rounding=e,t.ln())};we.inverseHyperbolicTangent=we.atanh=function(){var n,e,t,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(n=a.precision,e=a.rounding,r=i.sd(),Math.max(r,n)<2*-i.e-1?Ge(new a(i),n,e,!0):(a.precision=t=r-i.e,i=Zt(i.plus(1),new a(1).minus(i),t+n,1),a.precision=n+4,a.rounding=1,i=i.ln(),a.precision=n,a.rounding=e,i.times(.5))):new a(NaN)};we.inverseSine=we.asin=function(){var n,e,t,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),t=a.precision,r=a.rounding,e!==-1?e===0?(n=Va(a,t+4,r).times(.5),n.s=i.s,n):new a(NaN):(a.precision=t+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=t,a.rounding=r,i.times(2)))};we.inverseTangent=we.atan=function(){var n,e,t,r,i,a,o,c,u,d=this,h=d.constructor,p=h.precision,m=h.rounding;if(d.isFinite()){if(d.isZero())return new h(d);if(d.abs().eq(1)&&p+4<=Y_)return o=Va(h,p+4,m).times(.25),o.s=d.s,o}else{if(!d.s)return new h(NaN);if(p+4<=Y_)return o=Va(h,p+4,m).times(.5),o.s=d.s,o}for(h.precision=c=p+10,h.rounding=1,t=Math.min(28,c/Qe+2|0),n=t;n;--n)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(it=!1,e=Math.ceil(c/Qe),r=1,u=d.times(d),o=new h(d),i=d;n!==-1;)if(i=i.times(u),a=o.minus(i.div(r+=2)),i=i.times(u),o=a.plus(i.div(r+=2)),o.d[e]!==void 0)for(n=e;o.d[n]===a.d[n]&&n--;);return t&&(o=o.times(2<<t-1)),it=!0,Ge(o,h.precision=p,h.rounding=m,!0)};we.isFinite=function(){return!!this.d};we.isInteger=we.isInt=function(){return!!this.d&&Ir(this.e/Qe)>this.d.length-2};we.isNaN=function(){return!this.s};we.isNegative=we.isNeg=function(){return this.s<0};we.isPositive=we.isPos=function(){return this.s>0};we.isZero=function(){return!!this.d&&this.d[0]===0};we.lessThan=we.lt=function(n){return this.cmp(n)<0};we.lessThanOrEqualTo=we.lte=function(n){return this.cmp(n)<1};we.logarithm=we.log=function(n){var e,t,r,i,a,o,c,u,d=this,h=d.constructor,p=h.precision,m=h.rounding,b=5;if(n==null)n=new h(10),e=!0;else{if(n=new h(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new h(NaN);e=n.eq(10)}if(t=d.d,d.s<0||!t||!t[0]||d.eq(1))return new h(t&&!t[0]?-1/0:d.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)a=!0;else{for(i=t[0];i%10===0;)i/=10;a=i!==1}if(it=!1,c=p+b,o=Lo(d,c),r=e?gv(h,c+10):Lo(n,c),u=Zt(o,r,c,1),up(u.d,i=p,m))do if(c+=10,o=Lo(d,c),r=e?gv(h,c+10):Lo(n,c),u=Zt(o,r,c,1),!a){+vr(u.d).slice(i+1,i+15)+1==1e14&&(u=Ge(u,p+1,0));break}while(up(u.d,i+=10,m));return it=!0,Ge(u,p,m)};we.minus=we.sub=function(n){var e,t,r,i,a,o,c,u,d,h,p,m,b=this,_=b.constructor;if(n=new _(n),!b.d||!n.d)return!b.s||!n.s?n=new _(NaN):b.d?n.s=-n.s:n=new _(n.d||b.s!==n.s?b:NaN),n;if(b.s!=n.s)return n.s=-n.s,b.plus(n);if(d=b.d,m=n.d,c=_.precision,u=_.rounding,!d[0]||!m[0]){if(m[0])n.s=-n.s;else if(d[0])n=new _(b);else return new _(u===3?-0:0);return it?Ge(n,c,u):n}if(t=Ir(n.e/Qe),h=Ir(b.e/Qe),d=d.slice(),a=h-t,a){for(p=a<0,p?(e=d,a=-a,o=m.length):(e=m,t=h,o=d.length),r=Math.max(Math.ceil(c/Qe),o)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=d.length,o=m.length,p=r<o,p&&(o=r),r=0;r<o;r++)if(d[r]!=m[r]){p=d[r]<m[r];break}a=0}for(p&&(e=d,d=m,m=e,n.s=-n.s),o=d.length,r=m.length-o;r>0;--r)d[o++]=0;for(r=m.length;r>a;){if(d[--r]<m[r]){for(i=r;i&&d[--i]===0;)d[i]=ua-1;--d[i],d[r]+=ua}d[r]-=m[r]}for(;d[--o]===0;)d.pop();for(;d[0]===0;d.shift())--t;return d[0]?(n.d=d,n.e=uy(d,t),it?Ge(n,c,u):n):new _(u===3?-0:0)};we.modulo=we.mod=function(n){var e,t=this,r=t.constructor;return n=new r(n),!t.d||!n.s||n.d&&!n.d[0]?new r(NaN):!n.d||t.d&&!t.d[0]?Ge(new r(t),r.precision,r.rounding):(it=!1,r.modulo==9?(e=Zt(t,n.abs(),0,3,1),e.s*=n.s):e=Zt(t,n,0,r.modulo,1),e=e.times(n),it=!0,t.minus(e))};we.naturalExponential=we.exp=function(){return K_(this)};we.naturalLogarithm=we.ln=function(){return Lo(this)};we.negated=we.neg=function(){var n=new this.constructor(this);return n.s=-n.s,Ge(n)};we.plus=we.add=function(n){var e,t,r,i,a,o,c,u,d,h,p=this,m=p.constructor;if(n=new m(n),!p.d||!n.d)return!p.s||!n.s?n=new m(NaN):p.d||(n=new m(n.d||p.s===n.s?p:NaN)),n;if(p.s!=n.s)return n.s=-n.s,p.minus(n);if(d=p.d,h=n.d,c=m.precision,u=m.rounding,!d[0]||!h[0])return h[0]||(n=new m(p)),it?Ge(n,c,u):n;if(a=Ir(p.e/Qe),r=Ir(n.e/Qe),d=d.slice(),i=a-r,i){for(i<0?(t=d,i=-i,o=h.length):(t=h,r=a,o=d.length),a=Math.ceil(c/Qe),o=a>o?a+1:o+1,i>o&&(i=o,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(o=d.length,i=h.length,o-i<0&&(i=o,t=h,h=d,d=t),e=0;i;)e=(d[--i]=d[i]+h[i]+e)/ua|0,d[i]%=ua;for(e&&(d.unshift(e),++r),o=d.length;d[--o]==0;)d.pop();return n.d=d,n.e=uy(d,r),it?Ge(n,c,u):n};we.precision=we.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(nl+n);return t.d?(e=sj(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};we.round=function(){var n=this,e=n.constructor;return Ge(new e(n),n.e+1,e.rounding)};we.sine=we.sin=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+Qe,r.rounding=1,t=hee(r,uj(r,t)),r.precision=n,r.rounding=e,Ge(Ss>2?t.neg():t,n,e,!0)):new r(NaN)};we.squareRoot=we.sqrt=function(){var n,e,t,r,i,a,o=this,c=o.d,u=o.e,d=o.s,h=o.constructor;if(d!==1||!c||!c[0])return new h(!d||d<0&&(!c||c[0])?NaN:c?o:1/0);for(it=!1,d=Math.sqrt(+o),d==0||d==1/0?(e=vr(c),(e.length+u)%2==0&&(e+="0"),d=Math.sqrt(e),u=Ir((u+1)/2)-(u<0||u%2),d==1/0?e="5e"+u:(e=d.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new h(e)):r=new h(d.toString()),t=(u=h.precision)+3;;)if(a=r,r=a.plus(Zt(o,a,t+2,1)).times(.5),vr(a.d).slice(0,t)===(e=vr(r.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ge(a,u+1,0),a.times(a).eq(o))){r=a;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ge(r,u+1,1),n=!r.times(r).eq(o));break}return it=!0,Ge(r,u,h.rounding,n)};we.tangent=we.tan=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+10,r.rounding=1,t=t.sin(),t.s=1,t=Zt(t,new r(1).minus(t.times(t)).sqrt(),n+10,0),r.precision=n,r.rounding=e,Ge(Ss==2||Ss==4?t.neg():t,n,e,!0)):new r(NaN)};we.times=we.mul=function(n){var e,t,r,i,a,o,c,u,d,h=this,p=h.constructor,m=h.d,b=(n=new p(n)).d;if(n.s*=h.s,!m||!m[0]||!b||!b[0])return new p(!n.s||m&&!m[0]&&!b||b&&!b[0]&&!m?NaN:!m||!b?n.s/0:n.s*0);for(t=Ir(h.e/Qe)+Ir(n.e/Qe),u=m.length,d=b.length,u<d&&(a=m,m=b,b=a,o=u,u=d,d=o),a=[],o=u+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(e=0,i=u+r;i>r;)c=a[i]+b[r]*m[i-r-1]+e,a[i--]=c%ua|0,e=c/ua|0;a[i]=(a[i]+e)%ua|0}for(;!a[--o];)a.pop();return e?++t:a.shift(),n.d=a,n.e=uy(a,t),it?Ge(n,p.precision,p.rounding):n};we.toBinary=function(n,e){return DS(this,2,n,e)};we.toDecimalPlaces=we.toDP=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(ei(n,0,cl),e===void 0?e=r.rounding:ei(e,0,8),Ge(t,n+t.e+1,e))};we.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Ya(r,!0):(ei(n,0,cl),e===void 0?e=i.rounding:ei(e,0,8),r=Ge(new i(r),n+1,e),t=Ya(r,!0,n+1)),r.isNeg()&&!r.isZero()?"-"+t:t};we.toFixed=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?t=Ya(i):(ei(n,0,cl),e===void 0?e=a.rounding:ei(e,0,8),r=Ge(new a(i),n+i.e+1,e),t=Ya(r,!1,n+r.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};we.toFraction=function(n){var e,t,r,i,a,o,c,u,d,h,p,m,b=this,_=b.d,E=b.constructor;if(!_)return new E(b);if(d=t=new E(1),r=u=new E(0),e=new E(r),a=e.e=sj(_)-b.e-1,o=a%Qe,e.d[0]=Xn(10,o<0?Qe+o:o),n==null)n=a>0?e:d;else{if(c=new E(n),!c.isInt()||c.lt(d))throw Error(nl+c);n=c.gt(e)?a>0?e:d:c}for(it=!1,c=new E(vr(_)),h=E.precision,E.precision=a=_.length*Qe*2;p=Zt(c,e,0,1,1),i=t.plus(p.times(r)),i.cmp(n)!=1;)t=r,r=i,i=d,d=u.plus(p.times(i)),u=i,i=e,e=c.minus(p.times(i)),c=i;return i=Zt(n.minus(t),r,0,1,1),u=u.plus(i.times(d)),t=t.plus(i.times(r)),u.s=d.s=b.s,m=Zt(d,r,a,1).minus(b).abs().cmp(Zt(u,t,a,1).minus(b).abs())<1?[d,r]:[u,t],E.precision=h,it=!0,m};we.toHexadecimal=we.toHex=function(n,e){return DS(this,16,n,e)};we.toNearest=function(n,e){var t=this,r=t.constructor;if(t=new r(t),n==null){if(!t.d)return t;n=new r(1),e=r.rounding}else{if(n=new r(n),e===void 0?e=r.rounding:ei(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(it=!1,t=Zt(t,n,0,e,1).times(n),it=!0,Ge(t)):(n.s=t.s,t=n),t};we.toNumber=function(){return+this};we.toOctal=function(n,e){return DS(this,8,n,e)};we.toPower=we.pow=function(n){var e,t,r,i,a,o,c=this,u=c.constructor,d=+(n=new u(n));if(!c.d||!n.d||!c.d[0]||!n.d[0])return new u(Xn(+c,d));if(c=new u(c),c.eq(1))return c;if(r=u.precision,a=u.rounding,n.eq(1))return Ge(c,r,a);if(e=Ir(n.e/Qe),e>=n.d.length-1&&(t=d<0?-d:d)<=cee)return i=oj(u,c,t,r),n.s<0?new u(1).div(i):Ge(i,r,a);if(o=c.s,o<0){if(e<n.d.length-1)return new u(NaN);if((n.d[e]&1)==0&&(o=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=o,c}return t=Xn(+c,d),e=t==0||!isFinite(t)?Ir(d*(Math.log("0."+vr(c.d))/Math.LN10+c.e+1)):new u(t+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(it=!1,u.rounding=c.s=1,t=Math.min(12,(e+"").length),i=K_(n.times(Lo(c,r+t)),r),i.d&&(i=Ge(i,r+5,1),up(i.d,r,a)&&(e=r+10,i=Ge(K_(n.times(Lo(c,e+t)),e),e+5,1),+vr(i.d).slice(r+1,r+15)+1==1e14&&(i=Ge(i,r+1,0)))),i.s=o,it=!0,u.rounding=a,Ge(i,r,a))};we.toPrecision=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Ya(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(ei(n,1,cl),e===void 0?e=i.rounding:ei(e,0,8),r=Ge(new i(r),n,e),t=Ya(r,n<=r.e||r.e<=i.toExpNeg,n)),r.isNeg()&&!r.isZero()?"-"+t:t};we.toSignificantDigits=we.toSD=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(ei(n,1,cl),e===void 0?e=r.rounding:ei(e,0,8)),Ge(new r(t),n,e)};we.toString=function(){var n=this,e=n.constructor,t=Ya(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};we.truncated=we.trunc=function(){return Ge(new this.constructor(this),this.e+1,1)};we.valueOf=we.toJSON=function(){var n=this,e=n.constructor,t=Ya(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function vr(n){var e,t,r,i=n.length-1,a="",o=n[0];if(i>0){for(a+=o,e=1;e<i;e++)r=n[e]+"",t=Qe-r.length,t&&(a+=Do(t)),a+=r;o=n[e],r=o+"",t=Qe-r.length,t&&(a+=Do(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function ei(n,e,t){if(n!==~~n||n<e||n>t)throw Error(nl+n)}function up(n,e,t,r){var i,a,o,c;for(a=n[0];a>=10;a/=10)--e;return--e<0?(e+=Qe,i=0):(i=Math.ceil((e+1)/Qe),e%=Qe),a=Xn(10,Qe-e),c=n[i]%a|0,r==null?e<3?(e==0?c=c/100|0:e==1&&(c=c/10|0),o=t<4&&c==99999||t>3&&c==49999||c==5e4||c==0):o=(t<4&&c+1==a||t>3&&c+1==a/2)&&(n[i+1]/a/100|0)==Xn(10,e-2)-1||(c==a/2||c==0)&&(n[i+1]/a/100|0)==0:e<4?(e==0?c=c/1e3|0:e==1?c=c/100|0:e==2&&(c=c/10|0),o=(r||t<4)&&c==9999||!r&&t>3&&c==4999):o=((r||t<4)&&c+1==a||!r&&t>3&&c+1==a/2)&&(n[i+1]/a/1e3|0)==Xn(10,e-3)-1,o}function b0(n,e,t){for(var r,i=[0],a,o=0,c=n.length;o<c;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=H_.indexOf(n.charAt(o++)),r=0;r<i.length;r++)i[r]>t-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/t|0,i[r]%=t)}return i.reverse()}function dee(n,e){var t,r,i;if(e.isZero())return e;r=e.d.length,r<32?(t=Math.ceil(r/3),i=(1/dy(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),n.precision+=t,e=Cd(n,1,e.times(i),new n(1));for(var a=t;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return n.precision-=t,e}var Zt=(function(){function n(r,i,a){var o,c=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+c,r[u]=o%a|0,c=o/a|0;return c&&r.unshift(c),r}function e(r,i,a,o){var c,u;if(a!=o)u=a>o?1:-1;else for(c=u=0;c<a;c++)if(r[c]!=i[c]){u=r[c]>i[c]?1:-1;break}return u}function t(r,i,a,o){for(var c=0;a--;)r[a]-=c,c=r[a]<i[a]?1:0,r[a]=c*o+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o,c,u){var d,h,p,m,b,_,E,S,T,I,D,O,z,j,C,A,k,P,L,B,M=r.constructor,W=r.s==i.s?1:-1,Q=r.d,$=i.d;if(!Q||!Q[0]||!$||!$[0])return new M(!r.s||!i.s||(Q?$&&Q[0]==$[0]:!$)?NaN:Q&&Q[0]==0||!$?W*0:W/0);for(u?(b=1,h=r.e-i.e):(u=ua,b=Qe,h=Ir(r.e/b)-Ir(i.e/b)),L=$.length,k=Q.length,T=new M(W),I=T.d=[],p=0;$[p]==(Q[p]||0);p++);if($[p]>(Q[p]||0)&&h--,a==null?(j=a=M.precision,o=M.rounding):c?j=a+(r.e-i.e)+1:j=a,j<0)I.push(1),_=!0;else{if(j=j/b+2|0,p=0,L==1){for(m=0,$=$[0],j++;(p<k||m)&&j--;p++)C=m*u+(Q[p]||0),I[p]=C/$|0,m=C%$|0;_=m||p<k}else{for(m=u/($[0]+1)|0,m>1&&($=n($,m,u),Q=n(Q,m,u),L=$.length,k=Q.length),A=L,D=Q.slice(0,L),O=D.length;O<L;)D[O++]=0;B=$.slice(),B.unshift(0),P=$[0],$[1]>=u/2&&++P;do m=0,d=e($,D,L,O),d<0?(z=D[0],L!=O&&(z=z*u+(D[1]||0)),m=z/P|0,m>1?(m>=u&&(m=u-1),E=n($,m,u),S=E.length,O=D.length,d=e(E,D,S,O),d==1&&(m--,t(E,L<S?B:$,S,u))):(m==0&&(d=m=1),E=$.slice()),S=E.length,S<O&&E.unshift(0),t(D,E,O,u),d==-1&&(O=D.length,d=e($,D,L,O),d<1&&(m++,t(D,L<O?B:$,O,u))),O=D.length):d===0&&(m++,D=[0]),I[p++]=m,d&&D[0]?D[O++]=Q[A]||0:(D=[Q[A]],O=1);while((A++<k||D[0]!==void 0)&&j--);_=D[0]!==void 0}I[0]||I.shift()}if(b==1)T.e=h,tj=_;else{for(p=1,m=I[0];m>=10;m/=10)p++;T.e=p+h*b-1,Ge(T,c?a+T.e+1:a,o,_)}return T}})();function Ge(n,e,t,r){var i,a,o,c,u,d,h,p,m,b=n.constructor;e:if(e!=null){if(p=n.d,!p)return n;for(i=1,c=p[0];c>=10;c/=10)i++;if(a=e-i,a<0)a+=Qe,o=e,h=p[m=0],u=h/Xn(10,i-o-1)%10|0;else if(m=Math.ceil((a+1)/Qe),c=p.length,m>=c)if(r){for(;c++<=m;)p.push(0);h=u=0,i=1,a%=Qe,o=a-Qe+1}else break e;else{for(h=c=p[m],i=1;c>=10;c/=10)i++;a%=Qe,o=a-Qe+i,u=o<0?0:h/Xn(10,i-o-1)%10|0}if(r=r||e<0||p[m+1]!==void 0||(o<0?h:h%Xn(10,i-o-1)),d=t<4?(u||r)&&(t==0||t==(n.s<0?3:2)):u>5||u==5&&(t==4||r||t==6&&(a>0?o>0?h/Xn(10,i-o):0:p[m-1])%10&1||t==(n.s<0?8:7)),e<1||!p[0])return p.length=0,d?(e-=n.e+1,p[0]=Xn(10,(Qe-e%Qe)%Qe),n.e=-e||0):p[0]=n.e=0,n;if(a==0?(p.length=m,c=1,m--):(p.length=m+1,c=Xn(10,Qe-a),p[m]=o>0?(h/Xn(10,i-o)%Xn(10,o)|0)*c:0),d)for(;;)if(m==0){for(a=1,o=p[0];o>=10;o/=10)a++;for(o=p[0]+=c,c=1;o>=10;o/=10)c++;a!=c&&(n.e++,p[0]==ua&&(p[0]=1));break}else{if(p[m]+=c,p[m]!=ua)break;p[m--]=0,c=1}for(a=p.length;p[--a]===0;)p.pop()}return it&&(n.e>b.maxE?(n.d=null,n.e=NaN):n.e<b.minE&&(n.e=0,n.d=[0])),n}function Ya(n,e,t){if(!n.isFinite())return cj(n);var r,i=n.e,a=vr(n.d),o=a.length;return e?(t&&(r=t-o)>0?a=a.charAt(0)+"."+a.slice(1)+Do(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(n.e<0?"e":"e+")+n.e):i<0?(a="0."+Do(-i-1)+a,t&&(r=t-o)>0&&(a+=Do(r))):i>=o?(a+=Do(i+1-o),t&&(r=t-i-1)>0&&(a=a+"."+Do(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),t&&(r=t-o)>0&&(i+1===o&&(a+="."),a+=Do(r))),a}function uy(n,e){var t=n[0];for(e*=Qe;t>=10;t/=10)e++;return e}function gv(n,e,t){if(e>uee)throw it=!0,t&&(n.precision=t),Error(nj);return Ge(new n(hv),e,1,!0)}function Va(n,e,t){if(e>Y_)throw Error(nj);return Ge(new n(pv),e,t,!0)}function sj(n){var e=n.length-1,t=e*Qe+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function Do(n){for(var e="";n--;)e+="0";return e}function oj(n,e,t,r){var i,a=new n(1),o=Math.ceil(r/Qe+4);for(it=!1;;){if(t%2&&(a=a.times(e),Pk(a.d,o)&&(i=!0)),t=Ir(t/2),t===0){t=a.d.length-1,i&&a.d[t]===0&&++a.d[t];break}e=e.times(e),Pk(e.d,o)}return it=!0,a}function Mk(n){return n.d[n.d.length-1]&1}function lj(n,e,t){for(var r,i,a=new n(e[0]),o=0;++o<e.length;){if(i=new n(e[o]),!i.s){a=i;break}r=a.cmp(i),(r===t||r===0&&a.s===t)&&(a=i)}return a}function K_(n,e){var t,r,i,a,o,c,u,d=0,h=0,p=0,m=n.constructor,b=m.rounding,_=m.precision;if(!n.d||!n.d[0]||n.e>17)return new m(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(it=!1,u=_):u=e,c=new m(.03125);n.e>-2;)n=n.times(c),p+=5;for(r=Math.log(Xn(2,p))/Math.LN10*2+5|0,u+=r,t=a=o=new m(1),m.precision=u;;){if(a=Ge(a.times(n),u,1),t=t.times(++h),c=o.plus(Zt(a,t,u,1)),vr(c.d).slice(0,u)===vr(o.d).slice(0,u)){for(i=p;i--;)o=Ge(o.times(o),u,1);if(e==null)if(d<3&&up(o.d,u-r,b,d))m.precision=u+=10,t=a=c=new m(1),h=0,d++;else return Ge(o,m.precision=_,b,it=!0);else return m.precision=_,o}o=c}}function Lo(n,e){var t,r,i,a,o,c,u,d,h,p,m,b=1,_=10,E=n,S=E.d,T=E.constructor,I=T.rounding,D=T.precision;if(E.s<0||!S||!S[0]||!E.e&&S[0]==1&&S.length==1)return new T(S&&!S[0]?-1/0:E.s!=1?NaN:S?0:E);if(e==null?(it=!1,h=D):h=e,T.precision=h+=_,t=vr(S),r=t.charAt(0),Math.abs(a=E.e)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)E=E.times(n),t=vr(E.d),r=t.charAt(0),b++;a=E.e,r>1?(E=new T("0."+t),a++):E=new T(r+"."+t.slice(1))}else return d=gv(T,h+2,D).times(a+""),E=Lo(new T(r+"."+t.slice(1)),h-_).plus(d),T.precision=D,e==null?Ge(E,D,I,it=!0):E;for(p=E,u=o=E=Zt(E.minus(1),E.plus(1),h,1),m=Ge(E.times(E),h,1),i=3;;){if(o=Ge(o.times(m),h,1),d=u.plus(Zt(o,new T(i),h,1)),vr(d.d).slice(0,h)===vr(u.d).slice(0,h))if(u=u.times(2),a!==0&&(u=u.plus(gv(T,h+2,D).times(a+""))),u=Zt(u,new T(b),h,1),e==null)if(up(u.d,h-_,I,c))T.precision=h+=_,d=o=E=Zt(p.minus(1),p.plus(1),h,1),m=Ge(E.times(E),h,1),i=c=1;else return Ge(u,T.precision=D,I,it=!0);else return T.precision=D,u;u=d,i+=2}}function cj(n){return String(n.s*n.s/0)}function x0(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,n.e=t=t-r-1,n.d=[],r=(t+1)%Qe,t<0&&(r+=Qe),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=Qe;r<i;)n.d.push(+e.slice(r,r+=Qe));e=e.slice(r),r=Qe-e.length}else r-=i;for(;r--;)e+="0";n.d.push(+e),it&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function fee(n,e){var t,r,i,a,o,c,u,d,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),aj.test(e))return x0(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(oee.test(e))t=16,e=e.toLowerCase();else if(see.test(e))t=2;else if(lee.test(e))t=8;else throw Error(nl+e);for(a=e.search(/p/i),a>0?(u=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,r=n.constructor,o&&(e=e.replace(".",""),c=e.length,a=c-a,i=oj(r,new r(t),a,a*2)),d=b0(e,t,ua),h=d.length-1,a=h;d[a]===0;--a)d.pop();return a<0?new r(n.s*0):(n.e=uy(d,h),n.d=d,it=!1,o&&(n=Zt(n,i,c*4)),u&&(n=n.times(Math.abs(u)<54?Xn(2,u):Id.pow(2,u))),it=!0,n)}function hee(n,e){var t,r=e.d.length;if(r<3)return e.isZero()?e:Cd(n,2,e,e);t=1.4*Math.sqrt(r),t=t>16?16:t|0,e=e.times(1/dy(5,t)),e=Cd(n,2,e,e);for(var i,a=new n(5),o=new n(16),c=new n(20);t--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(c))));return e}function Cd(n,e,t,r,i){var a,o,c,u,d=n.precision,h=Math.ceil(d/Qe);for(it=!1,u=t.times(t),c=new n(r);;){if(o=Zt(c.times(u),new n(e++*e++),d,1),c=i?r.plus(o):r.minus(o),r=Zt(o.times(u),new n(e++*e++),d,1),o=c.plus(r),o.d[h]!==void 0){for(a=h;o.d[a]===c.d[a]&&a--;);if(a==-1)break}a=c,c=r,r=o,o=a}return it=!0,o.d.length=h+1,o}function dy(n,e){for(var t=n;--e;)t*=n;return t}function uj(n,e){var t,r=e.s<0,i=Va(n,n.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return Ss=r?4:1,e;if(t=e.divToInt(i),t.isZero())Ss=r?3:2;else{if(e=e.minus(t.times(i)),e.lte(a))return Ss=Mk(t)?r?2:3:r?4:1,e;Ss=Mk(t)?r?1:4:r?3:2}return e.minus(i).abs()}function DS(n,e,t,r){var i,a,o,c,u,d,h,p,m,b=n.constructor,_=t!==void 0;if(_?(ei(t,1,cl),r===void 0?r=b.rounding:ei(r,0,8)):(t=b.precision,r=b.rounding),!n.isFinite())h=cj(n);else{for(h=Ya(n),o=h.indexOf("."),_?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,o>=0&&(h=h.replace(".",""),m=new b(1),m.e=h.length-o,m.d=b0(Ya(m),10,i),m.e=m.d.length),p=b0(h,10,i),a=u=p.length;p[--u]==0;)p.pop();if(!p[0])h=_?"0p+0":"0";else{if(o<0?a--:(n=new b(n),n.d=p,n.e=a,n=Zt(n,m,t,r,0,i),p=n.d,a=n.e,d=tj),o=p[t],c=i/2,d=d||p[t+1]!==void 0,d=r<4?(o!==void 0||d)&&(r===0||r===(n.s<0?3:2)):o>c||o===c&&(r===4||d||r===6&&p[t-1]&1||r===(n.s<0?8:7)),p.length=t,d)for(;++p[--t]>i-1;)p[t]=0,t||(++a,p.unshift(1));for(u=p.length;!p[u-1];--u);for(o=0,h="";o<u;o++)h+=H_.charAt(p[o]);if(_){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)h+="0";for(p=b0(h,i,e),u=p.length;!p[u-1];--u);for(o=1,h="1.";o<u;o++)h+=H_.charAt(p[o])}else h=h.charAt(0)+"."+h.slice(1);h=h+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)h="0"+h;h="0."+h}else if(++a>u)for(a-=u;a--;)h+="0";else a<u&&(h=h.slice(0,a)+"."+h.slice(a))}h=(e==16?"0x":e==2?"0b":e==8?"0o":"")+h}return n.s<0?"-"+h:h}function Pk(n,e){if(n.length>e)return n.length=e,!0}function pee(n){return new this(n).abs()}function gee(n){return new this(n).acos()}function mee(n){return new this(n).acosh()}function vee(n,e){return new this(n).plus(e)}function yee(n){return new this(n).asin()}function bee(n){return new this(n).asinh()}function xee(n){return new this(n).atan()}function _ee(n){return new this(n).atanh()}function wee(n,e){n=new this(n),e=new this(e);var t,r=this.precision,i=this.rounding,a=r+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=Va(this,a,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?Va(this,r,i):new this(0),t.s=n.s):!n.d||e.isZero()?(t=Va(this,a,1).times(.5),t.s=n.s):e.s<0?(this.precision=a,this.rounding=1,t=this.atan(Zt(n,e,a,1)),e=Va(this,a,1),this.precision=r,this.rounding=i,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(Zt(n,e,a,1)),t}function Eee(n){return new this(n).cbrt()}function See(n){return Ge(n=new this(n),n.e+1,2)}function Tee(n,e,t){return new this(n).clamp(e,t)}function Aee(n){if(!n||typeof n!="object")throw Error(cy+"Object expected");var e,t,r,i=n.defaults===!0,a=["precision",1,cl,"rounding",0,8,"toExpNeg",-Yu,0,"toExpPos",0,Yu,"maxE",0,Yu,"minE",-Yu,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(t=a[e],i&&(this[t]=$_[t]),(r=n[t])!==void 0)if(Ir(r)===r&&r>=a[e+1]&&r<=a[e+2])this[t]=r;else throw Error(nl+t+": "+r);if(t="crypto",i&&(this[t]=$_[t]),(r=n[t])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(rj);else this[t]=!1;else throw Error(nl+t+": "+r);return this}function Cee(n){return new this(n).cos()}function Iee(n){return new this(n).cosh()}function dj(n){var e,t,r;function i(a){var o,c,u,d=this;if(!(d instanceof i))return new i(a);if(d.constructor=i,Ok(a)){d.s=a.s,it?!a.d||a.e>i.maxE?(d.e=NaN,d.d=null):a.e<i.minE?(d.e=0,d.d=[0]):(d.e=a.e,d.d=a.d.slice()):(d.e=a.e,d.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){d.s=1/a<0?-1:1,d.e=0,d.d=[0];return}if(a<0?(a=-a,d.s=-1):d.s=1,a===~~a&&a<1e7){for(o=0,c=a;c>=10;c/=10)o++;it?o>i.maxE?(d.e=NaN,d.d=null):o<i.minE?(d.e=0,d.d=[0]):(d.e=o,d.d=[a]):(d.e=o,d.d=[a]);return}if(a*0!==0){a||(d.s=NaN),d.e=NaN,d.d=null;return}return x0(d,a.toString())}if(u==="string")return(c=a.charCodeAt(0))===45?(a=a.slice(1),d.s=-1):(c===43&&(a=a.slice(1)),d.s=1),aj.test(a)?x0(d,a):fee(d,a);if(u==="bigint")return a<0?(a=-a,d.s=-1):d.s=1,x0(d,a.toString());throw Error(nl+a)}if(i.prototype=we,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Aee,i.clone=dj,i.isDecimal=Ok,i.abs=pee,i.acos=gee,i.acosh=mee,i.add=vee,i.asin=yee,i.asinh=bee,i.atan=xee,i.atanh=_ee,i.atan2=wee,i.cbrt=Eee,i.ceil=See,i.clamp=Tee,i.cos=Cee,i.cosh=Iee,i.div=Ree,i.exp=Dee,i.floor=kee,i.hypot=Nee,i.ln=Mee,i.log=Pee,i.log10=Vee,i.log2=Oee,i.max=jee,i.min=zee,i.mod=Lee,i.mul=Bee,i.pow=Uee,i.random=Fee,i.round=Gee,i.sign=qee,i.sin=Hee,i.sinh=$ee,i.sqrt=Yee,i.sub=Kee,i.sum=Xee,i.tan=Wee,i.tanh=Qee,i.trunc=Zee,n===void 0&&(n={}),n&&n.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function Ree(n,e){return new this(n).div(e)}function Dee(n){return new this(n).exp()}function kee(n){return Ge(n=new this(n),n.e+1,3)}function Nee(){var n,e,t=new this(0);for(it=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return it=!0,new this(1/0);t=e}return it=!0,t.sqrt()}function Ok(n){return n instanceof Id||n&&n.toStringTag===ij||!1}function Mee(n){return new this(n).ln()}function Pee(n,e){return new this(n).log(e)}function Oee(n){return new this(n).log(2)}function Vee(n){return new this(n).log(10)}function jee(){return lj(this,arguments,-1)}function zee(){return lj(this,arguments,1)}function Lee(n,e){return new this(n).mod(e)}function Bee(n,e){return new this(n).mul(e)}function Uee(n,e){return new this(n).pow(e)}function Fee(n){var e,t,r,i,a=0,o=new this(1),c=[];if(n===void 0?n=this.precision:ei(n,1,cl),r=Math.ceil(n/Qe),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:c[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(c.push(i%1e7),a+=4);a=r/4}else throw Error(rj);else for(;a<r;)c[a++]=Math.random()*1e7|0;for(r=c[--a],n%=Qe,r&&n&&(i=Xn(10,Qe-n),c[a]=(r/i|0)*i);c[a]===0;a--)c.pop();if(a<0)t=0,c=[0];else{for(t=-1;c[0]===0;t-=Qe)c.shift();for(r=1,i=c[0];i>=10;i/=10)r++;r<Qe&&(t-=Qe-r)}return o.e=t,o.d=c,o}function Gee(n){return Ge(n=new this(n),n.e+1,this.rounding)}function qee(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function Hee(n){return new this(n).sin()}function $ee(n){return new this(n).sinh()}function Yee(n){return new this(n).sqrt()}function Kee(n,e){return new this(n).sub(e)}function Xee(){var n=0,e=arguments,t=new this(e[n]);for(it=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return it=!0,Ge(t,this.precision,this.rounding)}function Wee(n){return new this(n).tan()}function Qee(n){return new this(n).tanh()}function Zee(n){return Ge(n=new this(n),n.e+1,1)}we[Symbol.for("nodejs.util.inspect.custom")]=we.toString;we[Symbol.toStringTag]="Decimal";var Id=we.constructor=dj($_);hv=new Id(hv);pv=new Id(pv);const Jee=n=>{if(!n)return null;if(n instanceof Date)return n;if(typeof n=="object"&&typeof n.toDate=="function")return n.toDate();if(typeof n=="object"&&n.seconds!==void 0)return new Date(n.seconds*1e3);if(typeof n=="string"){const e=new Date(n);return isNaN(e.getTime())?null:e}if(typeof n=="number"){const e=new Date(n);return isNaN(e.getTime())?null:e}return null},ete=()=>{const{envelopes:n,transactions:e,fetchData:t,isLoading:r,isOnline:i,pendingSync:a,syncData:o,testingConnectivity:c,reorderEnvelopes:u}=sr(),{currentUser:d}=Bi(),{currentMonth:h,incomeSources:p,allocations:m,deleteIncomeSource:b,setEnvelopeAllocation:_,copyPreviousMonthAllocations:E,isLoading:S}=sr(),{showToast:T}=Pc(),[I,D]=G.useState(!1),O=G.useRef(null),[z,j]=G.useState(!1),C=!z||r||S,[A,k]=G.useState([]),P=G.useRef([]),L=G.useCallback(Y=>{if(n.find(pe=>pe.id===Y)?.isPiggybank){const pe=sr.getState().getEnvelopeBalance(Y);return new Id(pe)}const se=sr.getState().getEnvelopeBalance(Y,h);return new Id(se)},[n,h]),B=n.filter(Y=>{if(!Y.isPiggybank||!Y.isActive)return!1;if(Y.createdAt)try{const te=Jee(Y.createdAt);if(!te)return console.error(` Invalid creation date for piggybank ${Y.name}:`,Y.createdAt),!1;const se=`${te.getFullYear()}-${String(te.getMonth()+1).padStart(2,"0")}`;return h>=se}catch(te){return console.error(` Error processing piggybank ${Y.name}:`,te,{createdAt:Y.createdAt,typeofCreatedAt:typeof Y.createdAt}),!1}return!0}),M=A;G.useEffect(()=>(O.current=setTimeout(()=>{D(!0)},8e3),t(),j(!0),()=>{O.current&&clearTimeout(O.current)}),[]),G.useEffect(()=>{z&&!r&&!S&&(D(!1),O.current&&clearTimeout(O.current))},[z,r,S]),G.useEffect(()=>{const Y=n.filter(te=>{if(te.isPiggybank||te.isActive===!1)return!1;const pe=(m[h]||[]).some(ve=>ve.envelopeId===te.id),ie=e.some(ve=>ve.envelopeId===te.id&&(ve.month===h||ve.date.startsWith(h)));return pe||ie}).sort((te,se)=>{const pe=te.orderIndex??0,ie=se.orderIndex??0;return pe-ie});k(Y),P.current=Y},[n,m,h,e]);const W=(p[h]||[]).reduce((Y,te)=>Y+te.amount,0),Q=(m[h]||[]).filter(Y=>M.some(te=>te.id===Y.envelopeId)||B.some(te=>te.id===Y.envelopeId)).reduce((Y,te)=>Y+te.budgetedAmount,0),$=W-Q,H=G.useCallback(async Y=>{if(!Y.length)return;const te=Y.map(se=>se.id);try{await u(te)}catch(se){console.error("Failed to persist envelope order:",se),T("Failed to save envelope order","error")}},[u,T]),ee=G.useCallback(async Y=>{await H(Y)},[H]),ne=G.useCallback(Y=>{b(h,Y.id).catch(console.error),T(`Deleted "${Y.name}"`,"neutral")},[b,h,T]),de=G.useCallback(async Y=>{try{const te=Y||h;console.log(" Copying to month:",te),await E(te),T("Previous month budget copied","success")}catch(te){console.error("Error copying previous month:",te),T("Failed to copy previous month","error")}},[E,T,h]),U=G.useCallback(async()=>{if(!d||!h){T("Cannot clear data: not logged in or no month selected","error");return}try{await ZV.clearMonthData(d.id,h),await t(),T(`"${h}" budget cleared successfully`,"success")}catch(Y){console.error("Error clearing month data:",Y),T("Failed to clear month data","error")}},[d,h,t,T]);return{visibleEnvelopes:M,piggybanks:B,incomeSources:p,availableToBudget:$,currentMonth:h,allocations:m,transactions:e,isLoading:r,isInitialLoading:C,isOnline:i,showTimeoutMessage:I,pendingSync:a,getEnvelopeBalance:L,fetchData:t,syncData:o,reorderEnvelopes:ee,deleteIncomeSource:ne,clearMonthData:U,copyFromPreviousMonth:de,setEnvelopeAllocation:_,testingConnectivity:c,localOrderRef:P,setLocalEnvelopes:k}},tte=({currentMonth:n,onMonthChange:e})=>{const[t,r]=n.split("-").map(Number),a=["January","February","March","April","May","June","July","August","September","October","November","December"][r-1],o=()=>{let d=t,h=r-1;h<1&&(d=t-1,h=12);const p=`${d}-${h.toString().padStart(2,"0")}`;e(p)},c=()=>{let d=t,h=r+1;h>12&&(d=t+1,h=1);const p=`${d}-${h.toString().padStart(2,"0")}`;e(p)},u=()=>{const d=new Date,h=`${d.getFullYear()}-${(d.getMonth()+1).toString().padStart(2,"0")}`;e(h)};return y.jsx("div",{className:"py-1.5",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("button",{onClick:o,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:y.jsx(Hz,{size:20})}),y.jsx("div",{className:"flex-1 text-center",children:y.jsxs("button",{onClick:u,className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Click to go to current month",children:[a," ",t]})}),y.jsx("button",{onClick:c,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:y.jsx(zl,{size:20})})]})})},nte=({amount:n,totalIncome:e,totalAllocated:t,isLoading:r=!1,variant:i="default"})=>{const a=typeof t=="number"?t:parseFloat(t)||0,o=typeof e=="number"?e:parseFloat(e)||0,c=typeof n=="number"?n:parseFloat(n)||0,u=o>0?a/o*100:0,d=c>0,h=Math.abs(c)<.01,p=c<0,m=h?100:Math.min(u,100),b=p?"bg-red-500":"bg-green-500",_=h,E=p,S=d,I=_?{icon:w0,color:"text-green-600 dark:text-emerald-400",bgColor:"bg-green-50 dark:bg-emerald-900/20",borderColor:"border-green-200 dark:border-emerald-800",title:"Budget Balanced!",subtitle:"Every dollar has a job"}:E?{icon:HL,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",title:"Over Budget",subtitle:"Reduce allocations or add income"}:{icon:UL,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",title:"Available to Budget",subtitle:"Assign money to envelopes"};return r?y.jsxs("div",{className:i==="header"?"py-1.5 px-2":"bg-gray-50 dark:bg-zinc-900 rounded-2xl p-6 border border-gray-200 dark:border-zinc-800 animate-pulse",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-32"}),y.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20"})]}),y.jsx("div",{className:"h-2 bg-gray-200 dark:bg-zinc-700 rounded"})]}):y.jsxs("div",{className:i==="header"?"py-1.5 px-2":`rounded-2xl p-6 border ${I.bgColor} ${I.borderColor}`,children:[y.jsxs("div",{className:i==="header"?"flex items-center gap-3 mb-0.5":"flex items-center justify-between mb-4",children:[y.jsxs("div",{className:"flex-shrink-0 text-center",children:[y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Assigned:"}),y.jsxs("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["$",a.toFixed(2)]})]}),i==="header"&&y.jsx("div",{className:"flex-1 flex justify-center items-center",children:h?y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"text-xs text-green-600 dark:text-emerald-400 font-medium",children:"Perfect! Every dollar has a job "})}):p?y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:"You're not in Congress!"})}):y.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full",children:y.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${b}`,style:{width:`${m}%`}})})}),y.jsx("div",{className:"flex-shrink-0 text-center",children:d?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Left to Budget:"}),y.jsxs("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["$",c.toFixed(2)]})]}):h?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"text-xs text-green-600 dark:text-emerald-400",children:"All Budgeted!"}),y.jsx("div",{className:"text-base font-semibold text-green-600 dark:text-emerald-400",children:"$0.00"})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Over Budget:"}),y.jsxs("div",{className:"text-base font-semibold text-red-600 dark:text-red-400",children:["-$",Math.abs(c).toFixed(2)]})]})})]}),i!=="header"&&!_&&o>0&&y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-zinc-400",children:[y.jsx("span",{children:"Allocated"}),y.jsxs("span",{children:[u.toFixed(0),"% of income"]})]}),y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:y.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${E?"bg-red-500":S?"bg-blue-500":"bg-green-500"}`,style:{width:`${Math.min(u,100)}%`}})}),y.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-500",children:[y.jsxs("span",{children:["$",a.toFixed(2)," allocated"]}),y.jsxs("span",{children:["$",o.toFixed(2)," income"]})]})]}),i!=="header"&&y.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-zinc-700",children:y.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",o.toFixed(2)]}),y.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Total Income"})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",a.toFixed(2)]}),y.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Allocated"})]})]})})]})},rte=()=>{const[n,e]=G.useState(!1),t=G.useRef(null),{currentUser:r,logout:i}=Bi(),{handleUserLogout:a}=sr(),o=Qa();G.useEffect(()=>{const d=h=>{t.current&&!t.current.contains(h.target)&&e(!1)};if(n)return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[n]);const c=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{a(),i(),o("/"),e(!1)}catch(d){console.error("Logout failed:",d)}};if(!r)return null;const u=r.displayName?.charAt(0)?.toUpperCase()||r.email?.charAt(0)?.toUpperCase()||"U";return y.jsxs("div",{className:"relative",ref:t,children:[y.jsxs("button",{onClick:()=>e(!n),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[y.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:u}),y.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:r.displayName||r.email?.split("@")[0]||"User"}),y.jsx(nN,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${n?"rotate-180":""}`})]}),n&&y.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[y.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:u}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:r.displayName||r.email?.split("@")[0]||"User"}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:r.email})]})]})}),y.jsxs("div",{className:"py-1",children:[y.jsxs("button",{onClick:()=>{o("/settings"),e(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[y.jsx(rN,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),y.jsxs("button",{onClick:c,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[y.jsx(RL,{size:18}),"Log Out"]})]})]})]})},Xp=({children:n,onDelete:e,threshold:t=-100})=>{const r=GF(),[i,a]=G.useState(!1),o=G.useRef(0),c=()=>{a(!0),o.current=Date.now()},u=async(d,h)=>{const p=h.offset.x,m=h.velocity.x;if(setTimeout(()=>a(!1),100),p<t||p<-50&&m<-500){const b=e();b===!1?r.start({x:0}):b instanceof Promise&&b.then(_=>{_===!1&&r.start({x:0})})}else r.start({x:0})};return y.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[y.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:y.jsx(gx,{className:"text-white w-6 h-6"})}),y.jsx(il.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:r,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${i?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:i?"none":"auto"},children:n})]})},fj=({message:n="Loading your budget...",showTimeout:e=!1})=>y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[y.jsx("div",{className:"mb-8",children:y.jsxs("div",{className:"relative",children:[y.jsx(nc,{size:48,className:"text-blue-500 animate-spin"}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:y.jsx(tw,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),y.jsxs("div",{className:"text-center space-y-3",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),y.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),y.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),y.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),y.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&y.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:y.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),y.jsx("div",{className:"mt-8 w-full max-w-md",children:y.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),ite=({isVisible:n,onClose:e,mode:t,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:o}=sr(),{showToast:c}=Pc(),[u,d]=G.useState(""),[h,p]=G.useState(""),[m,b]=G.useState(!1);G.useEffect(()=>{if(!n)return;const E=window.setTimeout(()=>{t==="edit"&&r?(d(r.name),p(r.amount.toString())):(d(""),p(""))},0);return()=>window.clearTimeout(E)},[n,t,r]);const _=async E=>{if(E.preventDefault(),!u.trim()||!h||parseFloat(h)<=0){c("Please fill in all required fields with valid values","error");return}b(!0);try{if(t==="add")await i(o,{name:u.trim(),amount:parseFloat(h),month:o,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),c("Income source added successfully","success");else{if(!r){c("Error: No income source to edit","error");return}await a(o,{...r,name:u.trim(),amount:parseFloat(h),updatedAt:new Date().toISOString()}),c(`Updated "${u.trim()}" income source`,"success")}e()}catch(S){console.error("Error saving income source:",S),c("Failed to save income source. Please try again.","error")}finally{b(!1)}};return n?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t==="add"?"Add Income Source":"Edit Income Source"}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),y.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),y.jsx("input",{type:"text",value:u,onChange:E=>d(E.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),y.jsx("input",{type:"number",value:h,onChange:E=>p(E.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:m||!u.trim()||!h||parseFloat(h)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Saving...":t==="add"?"Add Income":"Save Changes"})]})]})]})}):null},ate=({isVisible:n,onClose:e,onConfirm:t,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:o,totalAllocated:c,isLoading:u=!1})=>{const[d,h]=G.useState(""),[p,m]=G.useState("confirm"),b=S=>{const[T,I]=S.split("-");return new Date(parseInt(T),parseInt(I)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},_=()=>{p==="confirm"?m("type"):p==="type"&&d==="START FRESH"&&t()},E=()=>{m("confirm"),h(""),e()};return n?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[y.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",b(r)]}),y.jsx("button",{onClick:E,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:u,children:""})]}),y.jsx("div",{className:"p-6 space-y-4",children:p==="confirm"?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),y.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:y.jsxs("ul",{className:"space-y-1",children:[y.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),y.jsxs("li",{children:[" ",o," envelope allocation",o!==1?"s":""," (totaling $",c.toFixed(2),")"]})]})})]})]})}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[y.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data."]})})]})}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"You can undo this action within 30 seconds if you change your mind."})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"text-center",children:[y.jsxs("p",{className:"text-sm text-gray-900 dark:text-white mb-4",children:["Type ",y.jsx("strong",{children:"START FRESH"})," to confirm:"]}),y.jsx("input",{type:"text",value:d,onChange:S=>h(S.target.value),placeholder:"START FRESH",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-zinc-800 dark:text-white text-center font-mono text-lg",autoFocus:!0})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center",children:"This action cannot be undone after 30 seconds"})]})}),y.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{type:"button",onClick:E,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:u,children:"Cancel"}),y.jsx("button",{type:"button",onClick:_,disabled:u||p==="type"&&d!=="START FRESH",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Clearing...":p==="confirm"?"Continue":"Start Fresh"})]})]})}):null},ste=({currentMonth:n,onCopy:e,onDismiss:t,isLoading:r=!1})=>{const i=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},a=o=>{const[c,u]=o.split("-").map(Number);let d=c,h=u-1;return h<1&&(d=c-1,h=12),i(`${d}-${h.toString().padStart(2,"0")}`)};return y.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6 mb-6",children:[y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex items-start space-x-3",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx(aL,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:"Copy Previous Month?"}),y.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:["Would you like to copy your budget setup from ",a(n)," to get started with ",i(n),"?"]}),y.jsx("p",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"This will copy your income sources and envelope allocations, but not transactions."})]})]}),y.jsx("button",{onClick:t,className:"flex-shrink-0 text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 transition-colors","aria-label":"Dismiss",children:y.jsx(yv,{className:"h-5 w-5"})})]}),y.jsxs("div",{className:"mt-4 flex space-x-3",children:[y.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 bg-white dark:bg-zinc-800 border border-blue-300 dark:border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-zinc-700 transition-colors",disabled:r,children:"Start Fresh"}),y.jsx("button",{onClick:e,disabled:r,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Copying...":"Copy Previous Month"})]})]})},ote=({piggybank:n,balance:e,onNavigate:t})=>{const r=sr(P=>P.updatePiggybankContribution),i=Pc(P=>P.showToast),a=n.piggybankConfig?.targetAmount,o=n.piggybankConfig?.monthlyContribution??0,c=n.piggybankConfig?.color||"#3B82F6",u=n.piggybankConfig?.paused||!1;console.log(" PiggybankListItem data:",{piggybankId:n.id,piggybankName:n.name,monthlyContribution:o,targetAmount:a,isPaused:u,piggybankConfig:n.piggybankConfig});const d=typeof e=="number"?e:e.toNumber(),h=(P,L=1)=>{const B=P.replace("#",""),M=parseInt(B,16),W=M>>16&255,Q=M>>8&255,$=M&255;return`rgba(${W}, ${Q}, ${$}, ${L})`},p=`linear-gradient(135deg, ${h(c,.14)} 0%, ${h(c,.05)} 100%)`,m=h(c,.4),[b,_]=G.useState(!1),[E,S]=G.useState(o?o.toFixed(2):"0.00"),[T,I]=G.useState(!1),D=G.useRef(null),O=a&&a>0?Math.min(d/a*100,100):0,z=a&&d>=a;G.useEffect(()=>{b||S(o?o.toFixed(2):"0.00")},[o,b]),G.useEffect(()=>{b&&D.current&&(D.current.focus(),D.current.select())},[b]);const j=P=>{P.stopPropagation(),("touches"in P||P.type.startsWith("touch"))&&P.preventDefault(),!T&&(S(o?o.toFixed(2):"0.00"),_(!0))},C=()=>{_(!1),S(o?o.toFixed(2):"0.00")},A=async()=>{if(!b||T)return;const P=parseFloat(E);if(Number.isNaN(P)||P<0){i("Enter a valid contribution amount","error");return}if(P===o){_(!1);return}I(!0);try{console.log(" Calling updatePiggybankContribution:",{piggybankId:n.id,oldContribution:o,newContribution:P}),await r(n.id,P),console.log(" updatePiggybankContribution completed successfully"),i("Monthly contribution updated","success"),S(P.toFixed(2)),_(!1)}catch(L){console.error("Failed to update piggybank contribution",L),i("Failed to update contribution","error")}finally{I(!1)}},k=P=>{P.key==="Enter"?(P.preventDefault(),A()):P.key==="Escape"&&(P.preventDefault(),C())};return y.jsxs("div",{onClick:()=>t(n.id),className:"rounded-xl p-4 border transition-all cursor-pointer shadow-sm hover:shadow-md",style:{background:p,borderColor:m},children:[y.jsxs("div",{className:"flex items-start justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${c}20`},children:y.jsx(Ph,{size:20,style:{color:c}})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:n.name}),z&&y.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:" Goal Reached!"})]})]}),y.jsxs("div",{className:"text-right",children:[y.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",d.toFixed(2)]}),a&&y.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["of $",a.toFixed(2)]})]})]}),a&&a>0&&y.jsxs("div",{className:"mb-3",children:[y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800 rounded-full h-2 overflow-hidden",children:y.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${O}%`,backgroundColor:c}})}),y.jsxs("div",{className:"flex justify-between items-center mt-1",children:[y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:[O.toFixed(0),"% complete"]}),y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["$",(a-d).toFixed(2)," to go"]}),y.jsx("span",{className:"ml-2 px-2 py-0.5 text-[11px] font-semibold rounded-full uppercase tracking-wide",style:{backgroundColor:h(c,.15),color:c},children:"Piggybank"})]})]}),y.jsx("div",{className:"mt-2",children:u?y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[y.jsx(NL,{size:14,className:"text-orange-500"}),y.jsx("span",{className:"text-orange-600 dark:text-orange-400",children:"Paused"})]}):y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[y.jsx(YL,{size:14,style:{color:c}}),b?y.jsxs("form",{onSubmit:P=>{P.preventDefault(),A()},className:"flex items-center gap-2",children:[y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{ref:D,type:"number",min:"0",step:"0.01",value:E,onChange:P=>S(P.target.value),onBlur:A,onKeyDown:k,disabled:T,autoFocus:!0,className:"w-28 pl-6 pr-3 py-1.5 rounded-lg border border-gray-300 dark:border-zinc-600 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),T&&y.jsx(wL,{size:16,className:"animate-spin text-gray-400"})]}):y.jsxs("div",{onClick:j,onTouchEnd:j,className:"font-medium text-gray-900 dark:text-white hover:underline cursor-pointer",children:["$",o.toFixed(2),"/month"]})]})})]})},Jf=(n,e=1)=>{const t=n.replace("#",""),r=parseInt(t,16),i=r>>16&255,a=r>>8&255,o=r&255;return`rgba(${i}, ${a}, ${o}, ${e})`},lte=12,cte=(n,e,t)=>Math.min(Math.max(n,e),t),ute=({env:n,budgetedAmount:e,remainingBalance:t,editingEnvelopeId:r,setEditingEnvelopeId:i,editingAmount:a,setEditingAmount:o,handleBudgetSave:c,navigate:u,inputRef:d,transactions:h,currentMonth:p,setMoveableRef:m,isReorderingActive:b,activelyDraggingId:_,onItemDragStart:E,onMoveUp:S,onMoveDown:T,isFirst:I,isLast:D,isReorderUnlocked:O})=>{const z=!!n.isPiggybank,j=n.piggybankConfig?.color||"#3B82F6",C=z?`linear-gradient(135deg, ${Jf(j,.18)} 0%, ${Jf(j,.08)} 100%)`:void 0,A=z?Jf(j,.5):void 0,k=G.useRef(null),[P,L]=G.useState(!1),B=h.filter(U=>U.envelopeId===n.id&&U.month===p),M=B.filter(U=>U.type==="Expense"),W=B.filter(U=>U.type==="Income"),Q=M.reduce((U,Y)=>U+(Y.amount||0),0),$=W.reduce((U,Y)=>U+(Y.amount||0),0),H=Math.max(0,Q/$*100),ee=U=>{if(P||b){U.preventDefault(),U.stopPropagation();return}if(r===n.id){U.preventDefault(),U.stopPropagation();return}u(`/envelope/${n.id}`)};G.useEffect(()=>{_&&_!==n.id&&L(!1)},[_,n.id]),G.useEffect(()=>{_===n.id&&(L(!0),E(n.id))},[_,n.id,E]),G.useEffect(()=>{if(!_&&P){const U=setTimeout(()=>{L(!1)},300);return()=>clearTimeout(U)}},[_,P]);const ne=y.jsxs("div",{className:"flex items-center gap-2 w-full",children:[O&&y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("button",{onClick:U=>{U.stopPropagation(),S()},disabled:I,className:`p-1 rounded transition-colors ${I?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move up","aria-label":"Move envelope up",children:y.jsx(Kz,{size:18})}),y.jsx("button",{onClick:U=>{U.stopPropagation(),T()},disabled:D,className:`p-1 rounded transition-colors ${D?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move down","aria-label":"Move envelope down",children:y.jsx(nN,{size:18})})]}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[z&&y.jsx("span",{className:"w-8 h-8 rounded-full flex items-center justify-center border",style:{borderColor:Jf(j,.4),backgroundColor:Jf(j,.15),color:j},children:y.jsx(Ph,{size:16})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:n.name}),z&&y.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:j},children:"Piggybank"})]})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"flex items-center space-x-4",onPointerDown:U=>U.stopPropagation(),children:r===n.id?y.jsxs("div",{className:"flex items-center space-x-1",children:[y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),y.jsx("form",{onSubmit:U=>{U.preventDefault(),c()},children:y.jsx("input",{ref:d,type:"number",value:a,onChange:U=>o(U.target.value),onBlur:c,className:"w-24 px-2 py-1 text-sm border rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white",step:"0.01",autoFocus:!0})})]}):y.jsxs("div",{onClick:U=>{U.preventDefault(),U.stopPropagation(),i(n.id),o(e.toString())},onTouchEnd:U=>{U.preventDefault(),U.stopPropagation(),i(n.id),o(e.toString())},className:"flex items-center space-x-1 hover:bg-gray-200 dark:hover:bg-zinc-700 px-3 py-2 rounded transition-colors cursor-pointer js-budget-target",children:[y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),y.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",e.toFixed(2)]})]})}),y.jsxs("div",{className:"text-right",children:[y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 block",children:"Remaining"}),y.jsxs("span",{className:`font-bold ${(typeof t=="number"?t:t.toNumber())<0||100-H<=5?"text-red-500":H>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof t=="number"?t:t.toNumber()).toFixed(2)]})]})]}),e>0&&y.jsx("div",{className:"mt-3",onClick:U=>U.stopPropagation(),children:y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-400 mb-1",children:[y.jsx("span",{children:"Budget Used"}),y.jsxs("span",{children:[H.toFixed(0),"%"]})]}),y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2 overflow-hidden",children:y.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof t=="number"?t:t.toNumber())<0||100-H<=5?"bg-red-500":H>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-H,2)}%`}})})]})})]})]}),de=_===n.id;return y.jsx(il.div,{layout:!de,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:U=>{m(n.id)(U),k.current=U},onClick:ee,style:{boxShadow:"0 1px 2px rgba(15,23,42,0.08)",background:C,borderColor:A,cursor:"pointer"},className:`p-4 rounded-xl active:scale-[0.99] transition-all select-none border ${z?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:ne})},dte=()=>{const{visibleEnvelopes:n,piggybanks:e,incomeSources:t,availableToBudget:r,currentMonth:i,allocations:a,transactions:o,isLoading:c,isInitialLoading:u,isOnline:d,showTimeoutMessage:h,pendingSync:p,getEnvelopeBalance:m,syncData:b,reorderEnvelopes:_,deleteIncomeSource:E,clearMonthData:S,copyFromPreviousMonth:T,setEnvelopeAllocation:I,testingConnectivity:D,localOrderRef:O,setLocalEnvelopes:z}=ete(),{setMonth:j}=sr(),C=Qa(),[A,k]=G.useState(!1),[P,L]=G.useState("add"),[B,M]=G.useState(null),[W,Q]=G.useState(!1),[$,H]=G.useState(!1),[ee,ne]=G.useState(!1),de=G.useRef(null),[U,Y]=G.useState(null),[te,se]=G.useState(""),pe=G.useRef(null),[ie,ve]=G.useState(()=>localStorage.getItem("envelopeReorderUnlocked")==="true");G.useEffect(()=>{localStorage.setItem("envelopeReorderUnlocked",ie.toString())},[ie]),G.useEffect(()=>{if(!u&&!c){const Be=setTimeout(()=>{const Ke=(t[i]||[]).length===0&&(a[i]||[]).length===0;console.log(" Copy prompt check:",{currentMonth:i,hasIncome:(t[i]||[]).length>0,hasAllocations:(a[i]||[]).length>0,showPrompt:Ke}),ne(Ke)},500);return()=>clearTimeout(Be)}},[u,c,t,a,i]),G.useEffect(()=>{U&&pe.current&&(pe.current.focus(),pe.current.select())},[U]);const Ae=G.useCallback(Be=>Ke=>{Ke?Ie.current[Be]=Ke:delete Ie.current[Be]},[]),Ie=G.useRef({}),ke=G.useRef({}),[xe,Ee]=G.useState(null),Xe=G.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0}),[je,Le]=G.useState(!1),Pe=G.useRef(null),nt=G.useRef(0),pt=G.useCallback(()=>Le(!0),[]),Ve=G.useCallback(()=>{Le(!1),O.current.length&&_(O.current)},[_]),Ye=G.useCallback(Be=>{},[]),Pt=G.useCallback(Be=>{U!==Be&&C(`/envelope/${Be}`)},[U,C]);G.useEffect(()=>{const Be=()=>{Object.values(ke.current).forEach(qt=>qt?.destroy()),ke.current={}};if(!n.length)return;const Ke=()=>{ie&&n.forEach(qt=>{const Jt=Ie.current[qt.id];if(!Jt)return;const Sn=ke.current[qt.id];if(Sn){Sn.target=Jt;return}const Dt=new i$(Pe.current,{target:Jt,draggable:ie,throttleDrag:0,edgeDraggable:!1,startDragRotate:0,throttleDragRotate:0,rotatable:!1,scalable:!1,resizable:!1,warpable:!1,pinchable:!1,snappable:!0,snapThreshold:5,isDisplaySnapDigit:!1,isDisplayInnerSnapDigit:!1,snapGap:!0,snapDirections:{top:!0,bottom:!0,left:!1,right:!1},elementSnapDirections:{top:!0,bottom:!0,left:!1,right:!1},clickable:!0,preventClickDefault:!1,preventClickEventOnDrag:!0,checkInput:!1,dragArea:!0,hideDefaultLines:!0,hideChildMoveableDefaultLines:!0,renderDirections:[]});Dt.on("dragStart",or=>{const fn=O.current.findIndex(jt=>jt.id===qt.id),Ze=or.target,Tt=Ze.getBoundingClientRect().height+lte;Ee(qt.id),Xe.current={activeId:qt.id,startIndex:fn,currentIndex:fn,itemHeight:Tt},Ze&&(Ze.style.transition="none",Ze.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",Ze.style.zIndex="20"),pt()});let Ct=null;Dt.on("drag",or=>{const fn=or.target;Ct!==null&&cancelAnimationFrame(Ct),Ct=requestAnimationFrame(()=>{const Ze=Xe.current;if(Ze.activeId!==qt.id)return;const Ot=or.beforeTranslate[1];fn.style.transform=`translateY(${Ot}px)`,fn.style.transition="none";const{itemHeight:Tt,startIndex:jt}=Ze;if(!Tt)return;const Dn=Math.round(Ot/Tt),vn=cte(jt+Dn,0,O.current.length-1);vn!==Ze.currentIndex&&(Ze.currentIndex=vn,O.current.forEach((Oc,es)=>{if(Oc.id===qt.id)return;const Lr=Ie.current[Oc.id];if(!Lr)return;let mi=0;jt<vn?es>jt&&es<=vn&&(mi=-Tt):jt>vn&&es>=vn&&es<jt&&(mi=Tt),Lr.style.transform=mi?`translateY(${mi}px)`:"",Lr.style.transition="transform 0.2s ease"})),Ct=null})}),Dt.on("dragEnd",or=>{Ct!==null&&(cancelAnimationFrame(Ct),Ct=null);const fn=or.target,Ze=Xe.current,{startIndex:Ot,currentIndex:Tt}=Ze;if(fn.style.transform="",fn.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",fn.style.boxShadow="",O.current.forEach(jt=>{if(jt.id===qt.id)return;const Dn=Ie.current[jt.id];Dn&&(Dn.style.transform="",Dn.style.transition="")}),Ot!==Tt){const jt=[...O.current],[Dn]=jt.splice(Ot,1);jt.splice(Tt,0,Dn),O.current=jt,z(jt)}setTimeout(()=>{fn.style.zIndex="",fn.style.transition="",Ee(null)},300),Xe.current={activeId:null,startIndex:0,currentIndex:0,itemHeight:0},nt.current=Date.now(),Ve()}),Dt.on("click",or=>{const fn=or.inputEvent.target;fn.closest(".js-budget-target")||fn.tagName==="INPUT"||Pt(qt.id)}),ke.current[qt.id]=Dt})},Gi=window.setTimeout(Ke,80);return()=>{clearTimeout(Gi),Be()}},[n,pt,Ve,Pt,ie]);const En=async()=>{if(U)try{const Be=parseFloat(te)||0;await I(U,Be)}catch(Be){console.error("Failed to save budget amount:",Be)}finally{Y(null),se("")}},dn=()=>{L("add"),M(null),k(!0)},mt=Be=>{de.current&&clearTimeout(de.current),!W&&(L("edit"),M(Be),k(!0))},Vt=Be=>{de.current&&clearTimeout(de.current),Q(!0),E(Be),setTimeout(()=>Q(!1),500)},yr=()=>{k(!1),M(null)},br=()=>{H(!0)},ti=async()=>{H(!1),await S()},qs=async()=>{ne(!1),await T(i)};return u?y.jsx(fj,{message:h?"Still loading... This is normal on slow connections":"Loading your budget...",showTimeout:h}):y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .moveable-control { display: none !important; }
        .moveable-origin { display: none !important; }
        .moveable-line { display: none !important; }
      `}}),y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[y.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"flex items-center gap-2",children:d?c?y.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[y.jsx(nc,{size:16,className:"animate-spin"}),y.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):p?y.jsxs("button",{onClick:b,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[y.jsx(nc,{size:16}),y.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):y.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[y.jsx(a9,{size:16}),y.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):y.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[y.jsx(r9,{size:16}),y.jsx("span",{className:"text-sm font-medium",children:D?"Testing...":c?"Saving...":"Offline"})]})}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:()=>ve(!ie),className:`transition-colors ${ie?"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300":"text-gray-500 hover:text-gray-600 dark:text-zinc-400 dark:hover:text-zinc-300"}`,title:ie?"Lock envelope order":"Unlock to reorder envelopes",children:ie?y.jsx(TL,{size:22}):y.jsx(CL,{size:22})}),y.jsx("button",{onClick:br,className:"text-orange-500 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",title:"Start Fresh - Clear current month budget",children:y.jsx(nc,{size:22})}),y.jsx(rte,{})]})]}),y.jsx(nte,{amount:r,totalIncome:(t[i]||[]).reduce((Be,Ke)=>Be+Ke.amount,0),totalAllocated:(a[i]||[]).filter(Be=>n.some(Ke=>Ke.id===Be.envelopeId)||e.some(Ke=>Ke.id===Be.envelopeId)).reduce((Be,Ke)=>Be+Ke.budgetedAmount,0),isLoading:c,variant:"header"}),y.jsx(tte,{currentMonth:i,onMonthChange:Be=>{ne(!1),j(Be)}})]}),y.jsxs("div",{className:"pt-[calc(10rem+env(safe-area-inset-top))] p-4 max-w-md mx-auto space-y-6",children:[ee&&y.jsx(ste,{currentMonth:i,onCopy:qs,onDismiss:()=>ne(!1)}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Income Sources"}),y.jsx("button",{onClick:dn,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:y.jsx(xm,{size:20})})]}),(t[i]||[]).length===0?y.jsx("div",{className:"text-center py-6",children:y.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm",children:"No income sources yet. Add your monthly income."})}):y.jsx("div",{className:"space-y-3",children:y.jsx(dc,{initial:!1,mode:"popLayout",children:(t[i]||[]).map(Be=>y.jsx(il.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Xp,{onDelete:()=>Vt(Be),children:y.jsxs("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>mt(Be),children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:Be.name}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly income"})]}),y.jsxs("p",{className:"font-semibold text-green-600 dark:text-emerald-400",children:["$",Be.amount.toFixed(2)]})]})})},Be.id))})})]}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Spending Envelopes"}),y.jsx("button",{onClick:()=>C("/add-envelope"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Envelope",children:y.jsx(xm,{size:20})})]}),n.length===0?y.jsxs("div",{className:"text-center py-6",children:[y.jsx(tw,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),y.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:n.length===0?"No envelopes added to this month. Copy from previous month or add new ones.":"No envelopes yet. Create one to get started."}),y.jsx("button",{onClick:()=>C("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]}):y.jsx("div",{ref:Pe,children:y.jsx(dc,{initial:!1,children:y.jsx("div",{className:"space-y-3",children:n.map((Be,Ke)=>{const qt=(a[i]||[]).find(Ct=>Ct.envelopeId===Be.id)?.budgetedAmount||0,Jt=m(Be.id),Sn=()=>{if(Ke===0)return;const Ct=[...O.current];[Ct[Ke-1],Ct[Ke]]=[Ct[Ke],Ct[Ke-1]],O.current=Ct,z(Ct),_(Ct)},Dt=()=>{if(Ke===n.length-1)return;const Ct=[...O.current];[Ct[Ke],Ct[Ke+1]]=[Ct[Ke+1],Ct[Ke]],O.current=Ct,z(Ct),_(Ct)};return y.jsx(ute,{env:Be,budgetedAmount:qt,remainingBalance:Jt,editingEnvelopeId:U,setEditingEnvelopeId:Y,editingAmount:te,setEditingAmount:se,handleBudgetSave:En,navigate:C,inputRef:pe,transactions:o,currentMonth:i,setMoveableRef:Ae,isReorderingActive:je,activelyDraggingId:xe,onItemDragStart:Ye,onMoveUp:Sn,onMoveDown:Dt,isFirst:Ke===0,isLast:Ke===n.length-1,isReorderUnlocked:ie},Be.id)})})})})]}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[y.jsx(Ph,{size:20,className:"text-blue-600 dark:text-blue-400"}),"Piggybanks"]}),y.jsx("button",{onClick:()=>C("/add-envelope?type=piggybank"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Piggybank",children:y.jsx(xm,{size:20})})]}),e.length>0?y.jsxs("div",{className:"space-y-3",children:[e.map(Be=>y.jsx(ote,{piggybank:Be,balance:m(Be.id),onNavigate:Ke=>C(`/envelope/${Ke}`)},Be.id)),"           "]}):y.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-zinc-400",children:[y.jsx(Ph,{size:48,className:"mx-auto mb-3 opacity-30"}),y.jsx("p",{className:"text-sm",children:"No piggybanks yet"}),y.jsx("p",{className:"text-xs mt-1",children:"Click the + button above to create your first piggybank"})]})]}),y.jsx("button",{onClick:()=>C("/add-transaction"),className:"fixed bottom-32 right-6 md:bottom-20 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform z-40 pointer-events-auto",children:y.jsx(xm,{size:28})}),y.jsx(ite,{isVisible:A,onClose:yr,mode:P,initialIncomeSource:B}),y.jsx(ate,{isVisible:$,onClose:()=>H(!1),onConfirm:ti,currentMonth:i,incomeCount:(t[i]||[]).length,totalIncome:(t[i]||[]).reduce((Be,Ke)=>Be+Ke.amount,0),allocationCount:(a[i]||[]).filter(Be=>n.some(Ke=>Ke.id===Be.envelopeId)||e.some(Ke=>Ke.id===Be.envelopeId)).length,totalAllocated:(a[i]||[]).filter(Be=>n.some(Ke=>Ke.id===Be.envelopeId)||e.some(Ke=>Ke.id===Be.envelopeId)).reduce((Be,Ke)=>Be+Ke.budgetedAmount,0)})]})]})]})},fte=[{id:"1",name:"Amazon Prime",network:"Visa",last4:"7474",color:"#232f3e"},{id:"2",name:"Apple Card",network:"Mastercard",last4:"0274",color:"#e3e3e3"},{id:"3",name:"AA Credit Union",network:"Visa",last4:"3386",color:"#5494DA"}],hj=({selectedCard:n,onCardSelect:e,initialCards:t=fte,disabled:r=!1,isUserSelected:i=!1})=>{const[a,o]=G.useState(t[0]),[c,u]=G.useState(!1),[d,h]=G.useState(!1),[p,m]=G.useState(t),[b,_]=G.useState(null),[E,S]=G.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),T=n||a;G.useEffect(()=>{!n&&e&&p.length>0&&e(p[0])},[n,e,p]);const I=k=>{r||(k.id==="add-new"?h(!0):(o(k),e?.(k),u(!1)))},D=()=>{r||u(!c)},O=k=>{r||_(k)},z=()=>{if(b&&!r){const k=p.filter(P=>P.id!==b.id);if(m(k),T.id===b.id&&k.length>0){const P=k[0];o(P),e?.(P)}_(null)}},j=()=>{_(null)},C=()=>{if(r)return;if(E.last4.length!==4||!/^\d{4}$/.test(E.last4)){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!E.name.trim()){alert("Please enter a card name");return}const k={id:`custom-${Date.now()}`,name:E.name.trim(),network:E.network,last4:E.last4,color:E.color},P=[...p,k];m(P),o(k),e?.(k),h(!1),u(!1),S({name:"",network:"Visa",last4:"",color:"#3b82f6"})},A=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&y.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),y.jsxs("div",{onClick:D,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[y.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:T.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:T.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",T.last4]})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:T.name}),y.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(...",T.last4,")"]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-gray-400",children:c?"":""}),!i&&y.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),c&&y.jsx("div",{className:"card-stack-dropdown",children:y.jsx("div",{className:"card-stack",children:y.jsx(dc,{initial:!1,mode:"popLayout",children:[...p,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((k,P)=>{const L=T.id===k.id,B=k.id==="add-new";return y.jsx(il.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Xp,{onDelete:()=>!B&&!r&&O(k),threshold:-80,children:y.jsxs("div",{className:`card-stack-item ${L?"selected":""} ${B?"add-new-card":""}`,onClick:()=>I(k),style:{backgroundColor:B?"#f3f4f6":k.color,color:B?"#374151":k.color==="#e3e3e3"?"#000":"#fff",zIndex:p.length-P},children:[y.jsxs("div",{className:"card-header",children:[y.jsx("span",{className:"card-network",children:B?"":k.network}),L&&!B&&y.jsx("span",{className:"selected-indicator",children:""})]}),y.jsxs("div",{className:"card-details",children:[y.jsx("div",{className:"card-name",children:k.name}),y.jsx("div",{className:"card-number",children:B?"":` ${k.last4}`})]}),B&&y.jsx("div",{className:"add-icon",children:y.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),y.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},k.id)})})})})]}),d&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Card"}),y.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Name"}),y.jsx("input",{type:"text",value:E.name,onChange:k=>S({...E,name:k.target.value}),placeholder:"e.g., My Chase Card",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Network"}),y.jsxs("select",{value:E.network,onChange:k=>S({...E,network:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[y.jsx("option",{value:"Visa",children:"Visa"}),y.jsx("option",{value:"Mastercard",children:"Mastercard"}),y.jsx("option",{value:"Amex",children:"Amex"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),y.jsx("input",{type:"text",value:E.last4,onChange:k=>S({...E,last4:k.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:A.map(k=>y.jsx("button",{onClick:()=>S({...E,color:k}),className:`w-full h-10 rounded-lg border-2 transition-all ${E.color===k?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:k}},k))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),y.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:E.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:E.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",E.last4||"0000"]})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add Card"})]})]})]})}),b&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",y.jsx("span",{className:"font-medium",children:b.name}),"?"]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:j,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:z,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},pj=({isVisible:n,onClose:e,mode:t,currentEnvelope:r,initialTransaction:i})=>{const{addTransaction:a,updateTransaction:o,deleteTransaction:c,currentMonth:u}=sr(),[d,h]=G.useState(""),[p,m]=G.useState(""),[b,_]=G.useState(""),[E,S]=G.useState(new Date().toISOString().split("T")[0]),[T,I]=G.useState(null);if(G.useEffect(()=>{if(!n)return;const C=window.setTimeout(()=>{if(t==="edit"&&i){h(i.amount.toString()),m(i.merchant||""),_(i.description),I(i.paymentMethod||null);try{const A=new Date(i.date);isNaN(A.getTime())?(console.warn("Invalid date in transaction:",i.date),S(new Date().toISOString().split("T")[0])):S(A.toISOString().split("T")[0])}catch(A){console.error("Error parsing transaction date:",A),S(new Date().toISOString().split("T")[0])}}else h(""),m(""),_(""),S(new Date().toISOString().split("T")[0]),I(null)},0);return()=>window.clearTimeout(C)},[n,t,i]),!n)return null;const D=async C=>{C.preventDefault();const A=parseFloat(d);if(isNaN(A)||A<=0){console.log(" Invalid amount:",d);return}console.log(" Saving transaction:",{mode:t,amount:A,note:b,date:E,envelopeId:r.id,paymentMethod:T});try{const k=new Date(E),P=`${k.getFullYear()}-${(k.getMonth()+1).toString().padStart(2,"0")}`;if(P!==u){const L=`This transaction date (${P}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(L))return}t==="add"?(console.log(" Adding income transaction"),await a({amount:A,description:b,merchant:p||void 0,date:new Date(E).toISOString(),envelopeId:r.id,type:"Income",reconciled:!1,paymentMethod:T||void 0})):t==="spend"?(console.log(" Adding expense transaction"),await a({amount:A,description:b,merchant:p||void 0,date:new Date(E).toISOString(),envelopeId:r.id,type:"Expense",reconciled:!1,paymentMethod:T||void 0})):t==="edit"&&i&&(console.log(" Updating transaction"),await o({...i,amount:A,description:b,merchant:p||void 0,date:new Date(E).toISOString(),paymentMethod:T||void 0})),console.log(" Transaction saved successfully"),e()}catch(k){console.error(" Error saving transaction:",k),alert("Failed to save transaction: "+(k instanceof Error?k.message:"Unknown error"))}},O=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},z=t==="add"?"Add Money":t==="spend"?"Spend Money":"Edit Transaction",j=t==="add"?"text-green-500":"text-red-500";return y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),y.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:z}),y.jsx("button",{onClick:D,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!d||parseFloat(d)<=0,children:"Save"})]}),y.jsxs("form",{onSubmit:D,className:"p-6 space-y-6",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${j}`,children:"$"}),y.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:d,onChange:C=>{const A=C.target.value;(A===""||!isNaN(parseFloat(A))&&parseFloat(A)>=0)&&h(A)},onKeyDown:C=>{(C.key==="e"||C.key==="E"||C.key==="+"||C.key==="-")&&C.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${j} placeholder-gray-700`})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),y.jsx("input",{type:"text",value:p,onChange:C=>m(C.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsx(hj,{selectedCard:T,onCardSelect:I}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),y.jsx("input",{type:"text",value:b,onChange:C=>_(C.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const C=new Date(E);return`${C.getFullYear()}-${(C.getMonth()+1).toString().padStart(2,"0")}`!==u?y.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[y.jsx(Ku,{size:14}),y.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),y.jsx("input",{type:"date",value:E,onChange:C=>{console.log("Date changed to:",C.target.value),S(C.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),t==="edit"&&y.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:y.jsxs("button",{type:"button",onClick:O,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[y.jsx(iN,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},hte=({isVisible:n,onClose:e,sourceEnvelope:t})=>{const{envelopes:r,transferFunds:i}=sr(),[a,o]=G.useState(""),[c,u]=G.useState(""),[d,h]=G.useState(""),[p,m]=G.useState(new Date().toISOString().split("T")[0]),b=r.filter(S=>S.id!==t.id);if(G.useEffect(()=>{if(!n)return;const S=window.setTimeout(()=>{o(""),u(""),h(""),m(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(S)},[n]),!n)return null;const _=S=>{S.preventDefault();const T=parseFloat(c);isNaN(T)||T<=0||!a||(i(t.id,a,T,d,new Date(p)),e())},E=r.find(S=>S.id===a);return y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),y.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),y.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!c||parseFloat(c)<=0||!a,children:"Transfer"})]}),y.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),y.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:t.name})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),y.jsxs("select",{value:a,onChange:S=>o(S.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[y.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),b.map(S=>y.jsx("option",{value:S.id,className:"bg-white dark:bg-zinc-900",children:S.name},S.id))]})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),y.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:c,onChange:S=>u(S.target.value),onKeyDown:S=>{(S.key==="e"||S.key==="E"||S.key==="+"||S.key==="-")&&S.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),y.jsx("input",{type:"text",value:d,onChange:S=>h(S.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),y.jsx("input",{type:"date",value:p,onChange:S=>m(S.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),E&&c&&parseFloat(c)>0&&y.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",y.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(c).toFixed(2)]})," from"," ",y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:t.name})," to"," ",y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:E.name})]})]})]})})},pte=n=>{if(!n)return"No Date";try{let e;return n&&typeof n=="object"&&n.toDate&&typeof n.toDate=="function"?e=n.toDate():typeof n=="number"?n<1e10?e=new Date((n+978307200)*1e3):e=new Date(n):e=new Date(n),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},gte=n=>{const e=typeof n=="string"?parseFloat(n):n;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},gj=({transaction:n,envelopeName:e,onReconcile:t,onEdit:r})=>{if(!n)return null;console.log(" Transaction payment method:",n.paymentMethod);const i=n.type==="Income",a=n.type==="Expense";let o="text-gray-900 dark:text-white";return i&&(o="text-green-600 dark:text-green-400"),a&&(o="text-red-600 dark:text-red-400"),y.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[y.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:n.merchant||n.description||"No Description"}),n.reconciled&&y.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),n.merchant&&n.description&&n.description!==n.merchant&&y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:n.description}),y.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[y.jsx("span",{children:pte(n.date)}),e&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),n.paymentMethod&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:n.paymentMethod.color}}),y.jsx("span",{className:"truncate max-w-[80px]",children:n.paymentMethod.name})]})]})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${o}`,children:[a?"-":i?"+":"",gte(n.amount)]}),t?y.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),t()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":n.reconciled?"Mark as unreconciled":"Mark as reconciled",children:n.reconciled?y.jsx(m2,{className:"text-green-500",size:20}):y.jsx(y2,{className:"text-gray-400",size:20})}):y.jsx("span",{children:n.reconciled?y.jsx(m2,{className:"text-green-500",size:20}):y.jsx(y2,{className:"text-gray-400",size:20})})]})]})},mte=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n),vte=()=>{const{id:n}=j6(),{envelopes:e,transactions:t,fetchData:r,isLoading:i,deleteEnvelope:a,removeEnvelopeFromMonth:o,renameEnvelope:c,updateTransaction:u,deleteTransaction:d,restoreTransaction:h,getEnvelopeBalance:p,currentMonth:m}=sr(),{showToast:b}=Pc(),_=Qa(),E=Wa(),[S,T]=G.useState(!1),[I,D]=G.useState(!1),[O,z]=G.useState(!1),[j,C]=G.useState(null);G.useEffect(()=>{e.length===0&&r()},[]);const A=e.find(M=>M.id===n);if(!A)return i?y.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:y.jsx("p",{children:"Loading envelope..."})}):y.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:y.jsx("p",{children:"Envelope not found."})});if(A.isPiggybank){const M=t.filter(W=>W.envelopeId===A.id);console.log(" Piggybank:",A.name),console.log(" Created at:",A.createdAt),console.log(" Transactions:",M.map(W=>({date:W.date,description:W.description,amount:W.amount})))}const k=t.filter(M=>M.envelopeId===A.id).filter(M=>{if(A.isPiggybank){if(M.description==="Monthly Allocation"&&M.isAutomatic||!A.createdAt)return!0;const W=new Date(A.createdAt);return new Date(M.date)>=W}return M.month===m||!M.month}).sort((M,W)=>new Date(W.date).getTime()-new Date(M.date).getTime()),P=()=>{E.state?.fromGlobalFAB?_("/"):_(-1)},L=()=>{n&&(A.isPiggybank?a(n):o(n,m),_(-1))},B=M=>{const W={...M,reconciled:!M.reconciled};u(W)};return y.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-28",children:[y.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[y.jsx("button",{onClick:()=>{const M=prompt("Rename envelope:",A.name);M&&M.trim()&&n&&c(n,M)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),y.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:A.name}),y.jsx("button",{onClick:P,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),y.jsx("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const M=A.isPiggybank?p(A.id):p(A.id,m);return console.log(`Debug: Envelope ${A.name} Balance:`,M),y.jsx("span",{className:`text-xl font-bold ${M<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:mte(M)})})()]})}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>T(!0),children:[y.jsx(Zz,{className:"w-5 h-5 mr-3"}),"Add Money"]}),y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>D(!0),children:[y.jsx(Wz,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>z(!0),children:[y.jsx(Bz,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),y.jsxs("section",{className:"mt-6",children:[y.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:k.length===0?y.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):y.jsx(dc,{initial:!1,mode:"popLayout",children:k.map(M=>y.jsx(il.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Xp,{onDelete:()=>{if(!M.id)return;const W={...M};d(M.id),b("Transaction deleted","neutral",()=>h(W))},children:y.jsx(gj,{transaction:M,onReconcile:()=>B(M),onEdit:()=>C(M)})})},M.id))})})]}),y.jsx("div",{className:"mt-8",children:y.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{const M=A.isPiggybank?`Are you sure you want to delete "${A.name}"? This will delete the piggybank and all its history.`:`Are you sure you want to remove "${A.name}" from ${m}? This will delete all transactions for this month only.`;confirm(M)&&L()},children:[y.jsx(iN,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(S||I||j)&&y.jsx(pj,{isVisible:S||I||!!j,onClose:()=>{T(!1),D(!1),C(null)},mode:S?"add":I?"spend":"edit",currentEnvelope:A,initialTransaction:j}),O&&y.jsx(hte,{isVisible:O,onClose:()=>z(!1),sourceEnvelope:A})]})},yte=()=>{const n=Qa(),e=G.useRef(null),{envelopes:t,transactions:r,resetData:i,importData:a,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:d,incomeSources:h,allocations:p,currentMonth:m}=sr(),{deleteAccount:b,currentUser:_}=Bi(),[E,S]=G.useState(null),[T,I]=G.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[D,O]=G.useState(!1),[z,j]=G.useState(""),[C,A]=G.useState(!1),[k,P]=G.useState(!1),[L,B]=G.useState(null),[M,W]=G.useState(!1);console.log(L);const Q=978307200,$=c?.theme??"system";G.useEffect(()=>{c||d().catch(ie=>{console.error("Failed to initialize app settings:",ie)})},[d,c]);const H=(ie,ve)=>{S({type:ie,text:ve}),setTimeout(()=>S(null),3500)},ee=G.useMemo(()=>{const ie=t.length,ve=r.length,Ae=m?p[m]||[]:[],Ie=Object.values(h).reduce((Le,Pe)=>Le+Pe.length,0),ke=Ae.length,xe=t.reduce((Le,Pe)=>{const nt=o(Pe.id);return Le+(typeof nt=="number"?nt:0)},0),Ee=0,Xe=r.reduce((Le,Pe)=>{let nt=0;if(typeof Pe.date=="string"){const pt=Date.parse(Pe.date);nt=Number.isNaN(pt)?0:pt}else typeof Pe.date=="number"&&(nt=Pe.date<2e9?(Pe.date+Q)*1e3:Pe.date);return Math.max(Le,nt)},0),je=Ee||Xe?new Date(Math.max(Ee,Xe)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:ie,transactionCount:ve,incomeSourceCount:Ie,allocationCount:ke,totalBalance:xe,lastUpdated:je}},[t,r,h,p,m]),ne=()=>{try{console.log(" Creating backup..."),console.log(" Envelopes in store:",t.map(xe=>({id:xe.id,name:xe.name,isPiggybank:xe.isPiggybank,hasPiggybankConfig:!!xe.piggybankConfig,piggybankConfig:xe.piggybankConfig})));const ie={appVersion:"2.1 (PWA)",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:t.map(xe=>({...xe,currentBalance:(()=>{const Ee=o(xe.id);return typeof Ee=="number"?Ee:0})(),lastUpdated:new Date().toISOString()})),transactions:r,allocations:p,incomeSources:h};console.log(" Backup data created:",{envelopeCount:ie.envelopes.length,piggybankEnvelopes:ie.envelopes.filter(xe=>xe.isPiggybank).length,sampleEnvelope:ie.envelopes.find(xe=>xe.isPiggybank)||ie.envelopes[0]});const ve=new Blob([JSON.stringify(ie,null,2)],{type:"application/json"}),Ae=URL.createObjectURL(ve),Ie=document.createElement("a");Ie.href=Ae,Ie.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ie),Ie.click(),document.body.removeChild(Ie),URL.revokeObjectURL(Ae);const ke=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",ke),I(ke),B({success:!0,message:"Backup downloaded successfully."})}catch(ie){console.error(ie),B({success:!1,message:"Failed to create backup file.",onRetry:ne})}},de=()=>{P(!0),B(null);try{const ie=["Date","Merchant","Notes","Amount","Type","Envelope","Reconciled"],ve=r.map(Ee=>{const Xe=t.find(nt=>nt.id===Ee.envelopeId)?.name||"Unknown",je=(Ee.merchant||"").replace(/"/g,'""'),Le=(Ee.description||"").replace(/"/g,'""');let Pe="Invalid Date";if(Ee.date){if(typeof Ee.date=="string")Pe=Ee.date.split("T")[0];else if(typeof Ee.date=="number"){const nt=Ee.date<2e9?(Ee.date+Q)*1e3:Ee.date;Pe=new Date(nt).toISOString().split("T")[0]}}return[Pe,`"${je}"`,`"${Le}"`,Ee.amount.toFixed(2),Ee.type,`"${Xe}"`,Ee.reconciled?"Yes":"No"].join(",")}),Ae=[ie.join(","),...ve].join(`
`),Ie=new Blob([Ae],{type:"text/csv;charset=utf-8;"}),ke=URL.createObjectURL(Ie),xe=document.createElement("a");xe.href=ke,xe.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),URL.revokeObjectURL(ke),B({success:!0,message:"Transactions CSV exported successfully."})}catch(ie){console.error(ie),B({success:!1,message:"Failed to export CSV. Please try again.",onRetry:de})}finally{P(!1)}},U=()=>{e.current?.click()},Y=ie=>{const ve=ie.target.files?.[0];if(!ve)return;const Ae=new FileReader;Ae.onload=async Ie=>{try{const ke=JSON.parse(Ie.target?.result),xe=await a(ke);if(!xe.success){H("error",xe.message);return}if(ke.appSettings?.theme)try{await u({theme:ke.appSettings.theme})}catch(Ee){console.error("Failed to update imported settings:",Ee)}else if(ke.appSettings?.isDarkMode!==void 0)try{const Ee=ke.appSettings.isDarkMode?"dark":"light";await u({theme:Ee})}catch(Ee){console.error("Failed to update imported settings:",Ee)}H("success",`Loaded ${ke.envelopes?.length??0} envelopes, ${ke.transactions?.length??0} transactions, ${ke.allocations?Object.keys(ke.allocations).reduce((Ee,Xe)=>Ee+(ke.allocations[Xe]?.length||0),0):0} allocations, and ${ke.incomeSources?Object.keys(ke.incomeSources).reduce((Ee,Xe)=>Ee+(ke.incomeSources[Xe]?.length||0),0):0} income sources.`)}catch(ke){console.error(ke),H("error","Invalid backup file. Please verify the JSON.")}},Ae.readAsText(ve),ie.target.value=""},te=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await i(),H("success","All data has been permanently deleted."),n("/")}catch(ie){console.error("Reset failed:",ie),H("error","Failed to delete all data. Some data may remain.")}},se=async()=>{if(!z.trim()){H("error","Please enter your password to confirm account deletion.");return}O(!0);try{await i(),await b(z)?H("success","Your account has been permanently deleted."):H("error","Failed to delete account. Please try again.")}catch(ie){console.error("Account deletion failed:",ie),H("error","Failed to delete account. Please try again.")}finally{O(!1),A(!1),j("")}},pe=async()=>{if(!_){H("error","You must be logged in to clean up data.");return}W(!0);try{const ie=await WJ.cleanupOrphanedData(_.id),ve=ie.orphanedAllocationsDeleted+ie.orphanedTransactionsDeleted;ve>0?H("success",`Cleaned ${ve} orphaned items: ${ie.orphanedAllocationsDeleted} allocations and ${ie.orphanedTransactionsDeleted} transactions from ${ie.details.monthsProcessed.length} months.`):H("success","No orphaned data found. Your database is already clean!")}catch(ie){console.error("Cleanup failed:",ie),H("error","Failed to clean up orphaned data. Please try again.")}finally{W(!1)}};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[y.jsx("button",{onClick:()=>n(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),y.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto pb-24",children:[E&&y.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${E.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[E.type==="success"?y.jsx(w0,{size:18}):y.jsx(gx,{size:18}),E.text]}),y.jsx("section",{children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(b2,{className:"text-blue-500",size:22}),y.jsxs("div",{children:[y.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),y.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ee.envelopeCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ee.transactionCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ee.incomeSourceCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ee.allocationCount})]})]})]})}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[$==="light"&&y.jsx("span",{className:"text-orange-500 text-lg",children:""}),$==="dark"&&y.jsx("span",{className:"text-purple-500 text-lg",children:""}),$==="system"&&y.jsx("span",{className:"text-gray-500 text-lg",children:""}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:$})]}),y.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),y.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(ie=>y.jsx("button",{onClick:async()=>{try{await u({theme:ie.value})}catch(ve){console.error("Failed to update theme setting:",ve)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${$===ie.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:ie.label},ie.value))})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[y.jsxs("button",{onClick:ne,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(b2,{className:"text-blue-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",T]})]})]}),y.jsx(zl,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:U,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(ZL,{className:"text-blue-500",size:20}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),y.jsx(zl,{className:"text-gray-400",size:18})]}),y.jsx("div",{className:"p-4",children:y.jsxs("button",{onClick:de,disabled:k,className:"w-full flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed rounded-xl border border-gray-100 dark:border-zinc-800 px-4 py-3 bg-white dark:bg-zinc-900",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[k?y.jsx(x2,{className:"text-blue-500 animate-spin",size:20}):y.jsx(fL,{className:"text-blue-500",size:20}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:k?"Preparing CSV":"Export Transactions (CSV)"})]}),y.jsx(zl,{className:"text-gray-400",size:18})]})}),y.jsx("input",{type:"file",ref:e,onChange:Y,accept:".json",className:"hidden"})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[y.jsx("p",{children:"Create regular backups before major changes."}),y.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),y.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),y.jsx("p",{children:"Restoring replaces all current envelopes, transactions, budget allocations, income sources, and settings."})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[y.jsxs("button",{onClick:te,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(gx,{className:"text-red-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete all envelopes, transactions, allocations, income sources, and settings"})]})]}),y.jsx(zl,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:pe,disabled:M,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800 disabled:opacity-60 disabled:cursor-not-allowed",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[M?y.jsx(x2,{className:"text-orange-500 animate-spin",size:20}):y.jsx(LL,{className:"text-orange-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:M?"Cleaning Data...":" Purge Orphaned Data"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Remove allocations and transactions pointing to deleted envelopes"})]})]}),y.jsx(zl,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:()=>A(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(Ku,{className:"text-red-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),y.jsx(zl,{className:"text-gray-400",size:18})]})]})]}),y.jsx("div",{className:"text-center py-4",children:y.jsx("p",{className:"text-xs text-gray-400 dark:text-zinc-500",children:"Version 1.2.0 (PWA)"})}),L&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[L.success?y.jsx(w0,{className:"text-green-500",size:24}):y.jsx(Ku,{className:"text-red-500",size:24}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:L.success?"Success":"Error"})]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:L.message}),y.jsxs("div",{className:"flex gap-2",children:[L.onRetry&&y.jsx("button",{onClick:()=>{B(null),L.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),y.jsx("button",{onClick:()=>B(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),C&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx(Ku,{className:"text-red-500",size:24}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),y.jsx("input",{type:"password",value:z,onChange:ie=>j(ie.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>{A(!1),j("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:se,disabled:D||!z.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:D?"Deleting...":"Delete Account"})]})]})})]})]})},bte=()=>{const{addEnvelope:n,setEnvelopeAllocation:e,currentMonth:t}=sr(),{showToast:r}=Pc(),i=Qa(),[a]=Cz(),[o,c]=G.useState(""),u=a.get("type")==="piggybank",[d,h]=G.useState(""),[p,m]=G.useState(""),[b,_]=G.useState("#3B82F6"),[E,S]=G.useState(!1),T=async I=>{if(I.preventDefault(),!o.trim()||E)return;S(!0);const D=sr.getState().envelopes,z=(D.length>0?Math.max(...D.map(k=>k.orderIndex??0)):-1)+1,j=u?new Date(`${t}-01T00:00:00`):new Date,C={name:o,currentBalance:0,lastUpdated:new Date().toISOString(),createdAt:j.toISOString(),isActive:!0,orderIndex:z};u&&(C.isPiggybank=!0,C.piggybankConfig={targetAmount:d?parseFloat(d):void 0,monthlyContribution:parseFloat(p||"0"),color:b,icon:"piggy-bank"}),n(C).then(k=>{if(k){const P=u?parseFloat(p||"0"):0;e(k,P).catch(L=>console.error("Failed to create allocation:",L)),setTimeout(()=>{i("/")},50)}}).catch(k=>{console.error("Failed to create envelope:",k),r(k.message||"Failed to create envelope","error"),S(!1)})};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-28",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[y.jsx("button",{onClick:()=>i("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:y.jsx(Mh,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:u?"New Piggybank":"New Envelope"})]}),y.jsx("div",{className:"p-4 max-w-md mx-auto",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[y.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:y.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:u?y.jsx(Ph,{size:40}):y.jsx(pL,{size:40})})}),y.jsxs("form",{onSubmit:T,className:"p-6 space-y-6 pb-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:u?"Piggybank Name":"Envelope Name"}),y.jsx("input",{type:"text",id:"name",value:o,onChange:I=>c(I.target.value),placeholder:u?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),u&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"monthly-contribution",value:p,onChange:I=>m(I.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:u})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"target-amount",value:d,onChange:I=>h(I.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(I=>y.jsx("button",{type:"button",onClick:()=>_(I.value),className:`w-full aspect-square rounded-lg transition-all ${b===I.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:I.value},title:I.label},I.value))})]})]}),y.jsxs("div",{className:"pt-4 flex gap-3",children:[y.jsx("button",{type:"button",onClick:()=>i("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:!o.trim()||u&&!p||E,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${o.trim()&&(!u||p)&&!E?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:E?"Creating...":u?"Create Piggybank":"Create Envelope"})]})]})]})})]})},xte=({envelopes:n,transactionAmount:e,onSplitChange:t})=>{const[r,i]=G.useState([]),[a,o]=G.useState({}),[c,u]=G.useState(e),d=_=>{i(E=>E.includes(_)?E.filter(S=>S!==_):[...E,_])},h=(_,E)=>{o(S=>({...S,[_]:E}))};G.useEffect(()=>{if(r.length===1){const _=r[0];o({[_]:e})}},[r.length,e]),G.useEffect(()=>{const _=Object.values(a).reduce((E,S)=>E+(S||0),0);u(e-_),t(a)},[a,e,t]),G.useEffect(()=>{const _={...a};Object.keys(_).forEach(E=>{r.includes(E)||delete _[E]}),Object.keys(_).length!==Object.keys(a).length&&o(_)},[r,a]);const p=()=>{i([]),o({})},m=Math.abs(c)<.01&&r.length>0,b=r.length>0&&Math.abs(c)>.01;return y.jsxs("div",{className:"space-y-3",children:[r.length>1&&y.jsxs("div",{className:`p-3 rounded-lg ${b?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":m?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),y.jsxs("span",{className:`font-bold text-lg ${b?"text-red-600 dark:text-red-400":m?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",c.toFixed(2)]})]}),b&&y.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:r.length>1?"Split Across Envelopes":"Select Envelope"}),r.length>0&&y.jsx("button",{type:"button",onClick:p,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),y.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-zinc-800 rounded-lg",children:n.map(_=>y.jsxs("div",{className:"flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsx("input",{type:"checkbox",checked:r.includes(_.id),onChange:()=>d(_.id),className:"mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),y.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:_.name}),r.includes(_.id)&&r.length>1&&y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400",children:"$"}),y.jsx("input",{type:"number",min:"0",step:"0.01",value:a[_.id]||"",onChange:E=>h(_.id,parseFloat(E.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},_.id))})]})},_te=()=>{const n=Qa(),{envelopes:e,addTransaction:t,currentMonth:r}=sr(),[i,a]=G.useState(""),[o,c]=G.useState(""),[u,d]=G.useState(""),[h,p]=G.useState(new Date().toISOString().split("T")[0]),[m,b]=G.useState("expense"),[_,E]=G.useState({}),[S,T]=G.useState(null),[I,D]=G.useState(!1),O=B=>{T(B),S&&D(!0)},z=Object.keys(_).length>0,j=Object.values(_).reduce((B,M)=>B+(M||0),0),C=Math.abs(j-parseFloat(i||"0"))<.01,A=i&&parseFloat(i)>0&&z&&C,k=async B=>{if(B.preventDefault(),!A)return;const[M,W,Q]=h.split("-").map(Number),$=new Date(M,W-1,Q,12,0,0);console.log(" Selected date:",h),console.log(" Parsed date:",$.toISOString());try{const[H,ee]=h.split("-").map(Number),ne=`${H}-${ee.toString().padStart(2,"0")}`;if(ne!==r){const U=`This transaction date (${ne}) does not match the current budget month (${r}). Are you sure you want to save it?`;if(!window.confirm(U))return}const de=Object.entries(_).filter(([U,Y])=>Y>0);Promise.all(de.map(([U,Y])=>t({amount:Y,description:u,merchant:o||void 0,date:$.toISOString(),envelopeId:U,type:m==="income"?"Income":"Expense",reconciled:!1,paymentMethod:S||void 0}).catch(te=>console.error("Failed to create transaction:",te)))).catch(U=>console.error("Failed to create transactions:",U)),n("/")}catch(H){console.error("Error saving transaction:",H),alert("Failed to save transaction: "+(H instanceof Error?H.message:"Unknown error"))}},P=[...e].sort((B,M)=>{const W=B.orderIndex??0,Q=M.orderIndex??0;return W!==Q?W-Q:B.name.localeCompare(M.name)}),L=m==="income"?"text-green-500":"text-red-500";return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-10 flex items-center justify-between",children:[y.jsx("button",{onClick:()=>n(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),y.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),y.jsx("button",{onClick:k,disabled:!A,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),y.jsx("div",{className:"p-4 max-w-md mx-auto pb-24",children:y.jsxs("form",{onSubmit:k,className:"space-y-6",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:y.jsxs("div",{className:"flex",children:[y.jsx("button",{type:"button",onClick:()=>b("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${m==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),y.jsx("button",{type:"button",onClick:()=>b("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${m==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${L}`,children:"$"}),y.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:i,onChange:B=>{const M=B.target.value;(M===""||!isNaN(parseFloat(M))&&parseFloat(M)>=0)&&a(M)},onKeyDown:B=>{(B.key==="e"||B.key==="E"||B.key==="+"||B.key==="-")&&B.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${L} placeholder-gray-700`})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),y.jsx("input",{type:"text",value:o,onChange:B=>c(B.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsx(hj,{selectedCard:S,onCardSelect:O,isUserSelected:I}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),y.jsx("input",{type:"text",value:u,onChange:B=>d(B.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[B,M]=h.split("-").map(Number);return`${B}-${M.toString().padStart(2,"0")}`!==r?y.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[y.jsx(Ku,{size:14}),y.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),y.jsx("input",{type:"date",value:h,onChange:B=>p(B.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:y.jsx(xte,{envelopes:P,transactionAmount:parseFloat(i)||0,onSplitChange:E})})]})})]})},wte=()=>{const n=Qa(),{transactions:e,envelopes:t,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:o}=sr(),{showToast:c}=Pc(),[u,d]=G.useState(!1),[h,p]=G.useState(""),[m,b]=G.useState("all"),[_,E]=G.useState("All"),[S,T]=G.useState(!1),[I,D]=G.useState("all"),[O,z]=G.useState(!1),[j,C]=G.useState("all"),[A,k]=G.useState(()=>{const H=new Date;return H.setMonth(H.getMonth()-1),H.toISOString().split("T")[0]}),[P,L]=G.useState(()=>new Date().toISOString().split("T")[0]),[B,M]=G.useState(null),W=G.useMemo(()=>{console.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:O,currentMonth:o,transactionMonths:e.map(ne=>({id:ne.id,month:ne.month,date:ne.date,description:ne.description}))});let H=e;return O||(H=e.filter(ne=>ne.month===o||!ne.month),console.log(" After month filter:",{remaining:H.length,currentMonth:o,filteredTransactions:H.map(ne=>({id:ne.id,description:ne.description,month:ne.month,matchesCurrentMonth:ne.month===o}))})),H.map(ne=>{if(!ne)return null;let de=ne.date;if(typeof ne.date=="number"){const Y=(ne.date+978307200)*1e3;de=new Date(Y).toISOString()}else if(!ne.date||typeof ne.date!="string")return null;return{...ne,date:de}}).filter(Boolean).filter(ne=>{if(h){const U=h.toLowerCase(),Y=t.find(pe=>pe.id===ne.envelopeId)?.name.toLowerCase()||"",te=ne.amount.toFixed(2);if(!(ne.description.toLowerCase().includes(U)||Y.includes(U)||te.includes(U)))return!1}if(m!=="all"&&ne.envelopeId!==m||_!=="All"&&ne.type!==_||j!=="all"&&(!ne.paymentMethod||ne.paymentMethod.id!==j)||!ne.date||typeof ne.date!="string")return!1;const de=ne.date.split("T")[0];return!(I!=="all"&&new Date(de).getMonth()!==parseInt(I)||S&&!ne.reconciled)}).sort((ne,de)=>new Date(de.date).getTime()-new Date(ne.date).getTime())},[e,t,h,m,_,j,A,P,S,O,o]);console.log(" Final filtered transactions:",{count:W.length,transactions:W.map(H=>({id:H.id,description:H.description,amount:H.amount,date:H.date,month:H.month,type:H.type}))});const Q=B?t.find(H=>H.id===B.envelopeId):null,$=H=>{const ee={...H,reconciled:!H.reconciled};r(ee)};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:y.jsx(Mh,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),y.jsx("button",{onClick:()=>d(!u),className:`p-2 rounded-full transition-colors ${u?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:y.jsx(mL,{size:20,className:u?"fill-current":""})})]}),y.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[y.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",o]}),y.jsx("button",{onClick:()=>z(!O),className:`text-sm px-3 py-1 rounded-md ${O?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"}`,children:O?"Current Month Only":"All Time"})]}),y.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),y.jsxs("select",{value:j,onChange:H=>C(H.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Payment Methods"}),[{id:"1",name:"Amazon Prime",network:"Visa",last4:"7474",color:"#232f3e"},{id:"2",name:"Apple Card",network:"Mastercard",last4:"0274",color:"#e3e3e3"},{id:"3",name:"AA Credit Union",network:"Visa",last4:"3386",color:"#5494DA"}].map(H=>y.jsx("option",{value:H.id,children:H.name},H.id))]})]})}),y.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${u?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsxs("div",{className:"relative",children:[y.jsx(VL,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),y.jsx("input",{type:"text",placeholder:"Search transactions...",value:h,onChange:H=>p(H.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),h&&y.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:y.jsx(yv,{size:16})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),y.jsxs("select",{value:m,onChange:H=>b(H.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Envelopes"}),t.sort((H,ee)=>H.name.localeCompare(ee.name)).map(H=>y.jsx("option",{value:H.id,children:H.name},H.id))]})]}),y.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(H=>y.jsx("button",{onClick:()=>E(H),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${_===H?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:H},H))}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),y.jsxs("select",{value:I,onChange:H=>D(H.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(H,ee)=>ee).map(H=>y.jsx("option",{value:H,children:new Date(2022,H).toLocaleString("default",{month:"long"})},H))]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),y.jsx("div",{className:"relative",children:y.jsx("input",{type:"date",value:A,onChange:H=>k(H.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),y.jsx("div",{className:"relative",children:y.jsx("input",{type:"date",value:P,onChange:H=>L(H.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),y.jsx("button",{onClick:()=>T(!S),className:`w-11 h-6 rounded-full transition-colors relative ${S?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${S?"translate-x-5":"translate-x-0"}`})})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),y.jsx("button",{onClick:()=>z(!O),className:`w-11 h-6 rounded-full transition-colors relative ${O?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${O?"translate-x-5":"translate-x-0"}`})})]})]})}),y.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:W.length===0?y.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):y.jsx(dc,{initial:!1,mode:"popLayout",children:W.map(H=>{const ee=t.find(ne=>ne.id===H.envelopeId);return y.jsx(il.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Xp,{onDelete:()=>{if(!H.id)return;const ne={...H};i(H.id),c("Transaction deleted","neutral",()=>a(ne))},children:y.jsx(gj,{transaction:H,envelopeName:ee?.name||"Unknown Envelope",onReconcile:()=>$(H),onEdit:()=>{ee?M(H):alert("Cannot edit: Envelope deleted.")}})})},H.id)})})})}),B&&Q&&y.jsx(pj,{isVisible:!!B,onClose:()=>M(null),mode:"edit",currentEnvelope:Q,initialTransaction:B})]})},mj=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],Ete=n=>{if(!n)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=mj.map(c=>({...c,met:c.regex.test(n)})).filter(c=>c.met).length;let i,a,o;return r<=1?(i="weak",a="text-red-500",o="Weak"):r<=3?(i="medium",a="text-yellow-500",o="Medium"):r===4?(i="strong",a="text-blue-500",o="Strong"):(i="very-strong",a="text-green-500",o="Very Strong"),{score:r,level:i,color:a,label:o}},kS=n=>{const e=mj.map(i=>({...i,met:i.regex.test(n)})),t=Ete(n),r=e.every(i=>i.met);return{requirements:e,strength:t,isValid:r,isEmpty:!n.trim()}},Ste=({password:n,className:e=""})=>{const{strength:t,isEmpty:r}=kS(n);return r?null:y.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[y.jsx("div",{className:"flex-1",children:y.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>y.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=t.score?t.score<=1?"bg-red-500":t.score<=3?"bg-yellow-500":t.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),y.jsx("span",{className:`text-sm font-medium ${t.color}`,children:t.label})]})},Tte=({password:n,className:e=""})=>{const{requirements:t,isEmpty:r}=kS(n);return r?null:y.jsx("div",{className:`space-y-1 ${e}`,children:t.map(i=>y.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?y.jsx(Fz,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):y.jsx(yv,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),y.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},Ate=()=>{const[n,e]=G.useState(""),[t,r]=G.useState(""),[i,a]=G.useState(""),[o,c]=G.useState(!1),[u,d]=G.useState(!1),[h,p]=G.useState(!1),[m,b]=G.useState(!1),{login:_,register:E,sendPasswordReset:S,isLoading:T,loginError:I,clearError:D}=Bi(),O=kS(t),z=async C=>{if(C.preventDefault(),D(),n.trim()&&t.trim())if(u){if(!i.trim()||!O.isValid)return;await E(n.trim(),t,i.trim())}else await _(n.trim(),t)},j=async C=>{C.preventDefault(),n.trim()&&await S(n.trim())&&b(!0)};return G.useEffect(()=>{e(""),r(""),a(""),b(!1)},[u,h]),y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:h?y.jsxs("form",{onSubmit:j,className:"space-y-6",children:[y.jsxs("div",{className:"text-center mb-2",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(px,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{id:"reset-email",type:"email",value:n,onChange:C=>e(C.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:T,autoComplete:"email"})]})]}),m?y.jsxs("div",{className:"text-center py-4",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:y.jsx(px,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),y.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),y.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",y.jsx("span",{className:"font-medium",children:n})]}),y.jsxs("button",{type:"button",onClick:()=>p(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[y.jsx(Mh,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"submit",disabled:T||!n.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:T?"Sending...":"Send Reset Link"}),y.jsx("div",{className:"mt-4 text-center",children:y.jsxs("button",{type:"button",onClick:()=>p(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:T,children:[y.jsx(Mh,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):y.jsxs("form",{onSubmit:z,className:"space-y-6",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u?"Create Account":"Sign In"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:u?"Create a new account to get started":"Sign in to your account"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),y.jsx("input",{id:"email",type:"email",value:n,onChange:C=>e(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:T,autoComplete:"username"})]}),u&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),y.jsx("input",{id:"displayName",type:"text",value:i,onChange:C=>a(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:T})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!u&&y.jsx("button",{type:"button",onClick:()=>p(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:T,children:"Forgot password?"})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{id:"password",type:o?"text":"password",value:t,onChange:C=>r(C.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${u&&t&&!O.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:T,autoComplete:u?"new-password":"current-password"}),y.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:T,children:o?y.jsx(lL,{className:"h-5 w-5"}):y.jsx(uL,{className:"h-5 w-5"})})]}),u&&t&&y.jsx("div",{className:"mt-2",children:y.jsx(Ste,{password:t})}),u&&t&&y.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:y.jsx(Tte,{password:t})})]}),I&&y.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[I,I.includes("verify your email")&&y.jsx("div",{className:"mt-3",children:y.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),y.jsx("button",{type:"submit",disabled:T||!n.trim()||!t.trim()||u&&!i.trim()||u&&!O.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:T?u?"Creating Account...":"Signing in...":u?"Create Account":"Sign In"}),y.jsx("div",{className:"mt-6 text-center",children:y.jsxs("button",{type:"button",onClick:()=>{d(!u),p(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:T,children:[y.jsx(e9,{className:"h-4 w-4"}),u?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},Vk=()=>{const[n,e]=G.useState(!1),[t,r]=G.useState(!1),{currentUser:i,resendEmailVerification:a,logout:o,loginError:c}=Bi();G.useEffect(()=>{i||console.warn("EmailVerificationView: No current user, this should not happen")},[i]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},d=async()=>{await o()};return i?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:y.jsx(px,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(w0,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),y.jsxs("div",{className:"text-left",children:[y.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),y.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[y.jsx("li",{children:"1. Open your email inbox"}),y.jsx("li",{children:"2. Find the email from House Budget"}),y.jsx("li",{children:'3. Click the "Verify Email" link'}),y.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&y.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),t&&y.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),y.jsx("button",{onClick:u,disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:n?y.jsxs(y.Fragment,{children:[y.jsx(nc,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):y.jsxs(y.Fragment,{children:[y.jsx(nc,{className:"h-4 w-4"}),"Resend verification email"]})}),y.jsxs("button",{onClick:d,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[y.jsx(Mh,{className:"h-4 w-4"}),"Back to sign in"]})]})}),y.jsx("div",{className:"text-center",children:y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},jk=[{id:"1",name:"Amazon Prime",network:"Visa",last4:"7474",color:"#232f3e"},{id:"2",name:"Apple Card",network:"Mastercard",last4:"0274",color:"#e3e3e3"},{id:"3",name:"AA Credit Union",network:"Visa",last4:"3386",color:"#5494DA"}],Cte=()=>{const[n,e]=G.useState(jk[0]),[t,r]=G.useState(!1),[i,a]=G.useState(!1),[o,c]=G.useState(jk),[u,d]=G.useState(null),[h,p]=G.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),m=D=>{D.id==="add-new"?a(!0):(e(D),r(!1))},b=()=>{r(!t)},_=D=>{d(D)},E=()=>{if(u){const D=o.filter(O=>O.id!==u.id);c(D),n.id===u.id&&D.length>0&&e(D[0]),d(null)}},S=()=>{d(null)},T=()=>{if(h.last4.length!==4||!/^\d{4}$/.test(h.last4)){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!h.name.trim()){alert("Please enter a card name");return}const D={id:`custom-${Date.now()}`,name:h.name.trim(),network:h.network,last4:h.last4,color:h.color};c([...o,D]),e(D),a(!1),r(!1),p({name:"",network:"Visa",last4:"",color:"#3b82f6"})},I=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black p-8",children:[y.jsxs("div",{className:"max-w-md mx-auto",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Apple Wallet-Style Card Stack"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-6 space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Method"}),y.jsxs("div",{onClick:b,className:"flex items-center gap-4 p-3 border border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[y.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:n.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:n.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",n.last4]})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:n.name}),y.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(...",n.last4,")"]})]}),y.jsx("div",{className:"text-gray-400",children:t?"":""})]})]}),t&&y.jsx("div",{className:"card-stack-dropdown",children:y.jsx("div",{className:"card-stack",children:y.jsx(dc,{initial:!1,mode:"popLayout",children:[...o,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((D,O)=>{const z=n.id===D.id,j=D.id==="add-new";return y.jsx(il.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Xp,{onDelete:()=>!j&&_(D),threshold:-80,children:y.jsxs("div",{className:`card-stack-item ${z?"selected":""} ${j?"add-new-card":""}`,onClick:()=>m(D),style:{backgroundColor:j?"#f3f4f6":D.color,color:j?"#374151":D.color==="#e3e3e3"?"#000":"#fff",zIndex:o.length-O},children:[y.jsxs("div",{className:"card-header",children:[y.jsx("span",{className:"card-network",children:j?"":D.network}),z&&!j&&y.jsx("span",{className:"selected-indicator",children:""})]}),y.jsxs("div",{className:"card-details",children:[y.jsx("div",{className:"card-name",children:D.name}),y.jsx("div",{className:"card-number",children:j?"":` ${D.last4}`})]}),j&&y.jsx("div",{className:"add-icon",children:y.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),y.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},D.id)})})})})]})]}),i&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Card"}),y.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Name"}),y.jsx("input",{type:"text",value:h.name,onChange:D=>p({...h,name:D.target.value}),placeholder:"e.g., My Chase Card",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Network"}),y.jsxs("select",{value:h.network,onChange:D=>p({...h,network:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[y.jsx("option",{value:"Visa",children:"Visa"}),y.jsx("option",{value:"Mastercard",children:"Mastercard"}),y.jsx("option",{value:"Amex",children:"Amex"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),y.jsx("input",{type:"text",value:h.last4,onChange:D=>p({...h,last4:D.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:I.map(D=>y.jsx("button",{onClick:()=>p({...h,color:D}),className:`w-full h-10 rounded-lg border-2 transition-all ${h.color===D?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:D}},D))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),y.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:h.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:h.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",h.last4||"0000"]})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:T,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add Card"})]})]})]})}),u&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",y.jsx("span",{className:"font-medium",children:u.name}),"?"]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:E,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},Ite=()=>{const{message:n,type:e,isVisible:t,undoAction:r,hideToast:i}=Pc(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return y.jsx(dc,{children:t&&y.jsx(il.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:y.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${a()}`,children:[y.jsx("div",{className:"flex items-center flex-1 min-w-0",children:y.jsx("span",{className:"text-sm font-medium truncate pr-2",children:n})}),y.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[r&&y.jsxs("button",{onClick:()=>{r(),i()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[y.jsx(WL,{size:14,className:"inline mr-1"}),"Undo"]}),y.jsx("button",{onClick:i,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:y.jsx(yv,{size:16})})]})]})})})};class ea extends G.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[y.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:y.jsx(Ku,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[y.jsx(nc,{className:"h-4 w-4"}),"Try Again"]}),y.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[y.jsx(yL,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const Rte=()=>{const n=Qa(),e=Wa(),t=[{path:"/",label:"Budget",icon:y.jsx(tw,{className:"w-6 h-6"}),enabled:!0},{path:"/transactions",label:"Transactions",icon:y.jsx(xL,{className:"w-6 h-6"}),enabled:!0},{path:"/settings",label:"Settings",icon:y.jsx(rN,{className:"w-6 h-6"}),enabled:!0},{path:"#",label:"Future",icon:y.jsx(v2,{className:"w-6 h-6"}),enabled:!1},{path:"#",label:"Future",icon:y.jsx(v2,{className:"w-6 h-6"}),enabled:!1}],r=(a,o)=>{o&&a!=="#"&&n(a)},i=a=>a==="/"?e.pathname==="/":e.pathname.startsWith(a);return y.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-zinc-900 border-t border-gray-200 dark:border-zinc-800 safe-area-inset-bottom z-50",children:y.jsx("div",{className:"flex justify-around items-center h-16 max-w-screen-xl mx-auto px-2",children:t.map((a,o)=>y.jsxs("button",{onClick:()=>r(a.path,a.enabled),disabled:!a.enabled,className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${a.enabled?i(a.path)?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white":"text-gray-300 dark:text-zinc-700 cursor-not-allowed"}`,children:[y.jsx("div",{className:`transition-transform ${i(a.path)&&a.enabled?"scale-110":""}`,children:a.icon}),y.jsx("span",{className:"text-xs mt-1 font-medium",children:a.label})]},o))})})};function Dte(){const[n,e]=G.useState(!0),{appSettings:t}=sr(),{isAuthenticated:r,isInitialized:i,initializeAuth:a,lastAuthTime:o,offlineGracePeriod:c,currentUser:u}=Bi();if(G.useEffect(()=>{const p=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(p)},[]),G.useEffect(()=>a(),[a]),G.useEffect(()=>{const p=document.documentElement,m=window.matchMedia("(prefers-color-scheme: dark)"),b=()=>{const _=t?.theme??"system",E=m.matches;_==="dark"||_==="system"&&E?p.classList.add("dark"):p.classList.remove("dark")};if(b(),t?.theme==="system")return m.addEventListener("change",b),()=>m.removeEventListener("change",b)},[t]),n||!i)return y.jsx(fj,{message:"Initializing Personal Budget..."});if(!r)return u?y.jsx(ea,{children:y.jsx(Vk,{})}):y.jsx(ea,{children:y.jsx(Ate,{})});const h=typeof navigator<"u"&&!navigator.onLine&&r&&o&&Date.now()-o<c;return y.jsxs(ea,{children:[h&&y.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm",children:[y.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((c-(Date.now()-o))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),y.jsxs(wz,{children:[y.jsxs(Z6,{children:[y.jsx(xs,{path:"/",element:y.jsx(ea,{children:y.jsx(dte,{})})}),y.jsx(xs,{path:"/envelope/:id",element:y.jsx(ea,{children:y.jsx(vte,{})})}),y.jsx(xs,{path:"/add-envelope",element:y.jsx(ea,{children:y.jsx(bte,{})})}),y.jsx(xs,{path:"/add-transaction",element:y.jsx(ea,{children:y.jsx(_te,{})})}),y.jsx(xs,{path:"/transactions",element:y.jsx(ea,{children:y.jsx(wte,{})})}),y.jsx(xs,{path:"/settings",element:y.jsx(ea,{children:y.jsx(yte,{})})}),y.jsx(xs,{path:"/verify-email",element:y.jsx(ea,{children:y.jsx(Vk,{})})}),y.jsx(xs,{path:"/card-stack",element:y.jsx(ea,{children:y.jsx(Cte,{})})})]}),y.jsx(Rte,{})]}),y.jsx(Ite,{})]})}s6({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});r6.createRoot(document.getElementById("root")).render(y.jsx(G.StrictMode,{children:y.jsx(Dte,{})}));
