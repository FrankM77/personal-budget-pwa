function qne(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Ol(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dA={exports:{}},vm={};var r3;function Gne(){if(r3)return vm;r3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return vm.Fragment=e,vm.jsx=n,vm.jsxs=n,vm}var i3;function Hne(){return i3||(i3=1,dA.exports=Gne()),dA.exports}var m=Hne(),fA={exports:{}},ut={};var a3;function Kne(){if(a3)return ut;a3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),g=Symbol.iterator;function v($){return $===null||typeof $!="object"?null:($=g&&$[g]||$["@@iterator"],typeof $=="function"?$:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function S($,Z,ee){this.props=$,this.context=Z,this.refs=w,this.updater=ee||b}S.prototype.isReactComponent={},S.prototype.setState=function($,Z){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,Z,"setState")},S.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function T(){}T.prototype=S.prototype;function I($,Z,ee){this.props=$,this.context=Z,this.refs=w,this.updater=ee||b}var P=I.prototype=new T;P.constructor=I,x(P,S.prototype),P.isPureReactComponent=!0;var O=Array.isArray;function D(){}var N={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function R($,Z,ee){var W=ee.ref;return{$$typeof:t,type:$,key:Z,ref:W!==void 0?W:null,props:ee}}function M($,Z){return R($.type,Z,$.props)}function V($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function L($){var Z={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(ee){return Z[ee]})}var z=/\/+/g;function K($,Z){return typeof $=="object"&&$!==null&&$.key!=null?L(""+$.key):Z.toString(36)}function Y($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(D,D):($.status="pending",$.then(function(Z){$.status==="pending"&&($.status="fulfilled",$.value=Z)},function(Z){$.status==="pending"&&($.status="rejected",$.reason=Z)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function G($,Z,ee,W,ue){var ie=typeof $;(ie==="undefined"||ie==="boolean")&&($=null);var oe=!1;if($===null)oe=!0;else switch(ie){case"bigint":case"string":case"number":oe=!0;break;case"object":switch($.$$typeof){case t:case e:oe=!0;break;case f:return oe=$._init,G(oe($._payload),Z,ee,W,ue)}}if(oe)return ue=ue($),oe=W===""?"."+K($,0):W,O(ue)?(ee="",oe!=null&&(ee=oe.replace(z,"$&/")+"/"),G(ue,Z,ee,"",function(Te){return Te})):ue!=null&&(V(ue)&&(ue=M(ue,ee+(ue.key==null||$&&$.key===ue.key?"":(""+ue.key).replace(z,"$&/")+"/")+oe)),Z.push(ue)),1;oe=0;var Se=W===""?".":W+":";if(O($))for(var ae=0;ae<$.length;ae++)W=$[ae],ie=Se+K(W,ae),oe+=G(W,Z,ee,ie,ue);else if(ae=v($),typeof ae=="function")for($=ae.call($),ae=0;!(W=$.next()).done;)W=W.value,ie=Se+K(W,ae++),oe+=G(W,Z,ee,ie,ue);else if(ie==="object"){if(typeof $.then=="function")return G(Y($),Z,ee,W,ue);throw Z=String($),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return oe}function X($,Z,ee){if($==null)return $;var W=[],ue=0;return G($,W,"","",function(ie){return Z.call(ee,ie,ue++)}),W}function J($){if($._status===-1){var Z=$._result;Z=Z(),Z.then(function(ee){($._status===0||$._status===-1)&&($._status=1,$._result=ee)},function(ee){($._status===0||$._status===-1)&&($._status=2,$._result=ee)}),$._status===-1&&($._status=0,$._result=Z)}if($._status===1)return $._result.default;throw $._result}var ne=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},Q={map:X,forEach:function($,Z,ee){X($,function(){Z.apply(this,arguments)},ee)},count:function($){var Z=0;return X($,function(){Z++}),Z},toArray:function($){return X($,function(Z){return Z})||[]},only:function($){if(!V($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return ut.Activity=h,ut.Children=Q,ut.Component=S,ut.Fragment=n,ut.Profiler=i,ut.PureComponent=I,ut.StrictMode=r,ut.Suspense=c,ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,ut.__COMPILER_RUNTIME={__proto__:null,c:function($){return N.H.useMemoCache($)}},ut.cache=function($){return function(){return $.apply(null,arguments)}},ut.cacheSignal=function(){return null},ut.cloneElement=function($,Z,ee){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var W=x({},$.props),ue=$.key;if(Z!=null)for(ie in Z.key!==void 0&&(ue=""+Z.key),Z)!C.call(Z,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&Z.ref===void 0||(W[ie]=Z[ie]);var ie=arguments.length-2;if(ie===1)W.children=ee;else if(1<ie){for(var oe=Array(ie),Se=0;Se<ie;Se++)oe[Se]=arguments[Se+2];W.children=oe}return R($.type,ue,W)},ut.createContext=function($){return $={$$typeof:s,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:a,_context:$},$},ut.createElement=function($,Z,ee){var W,ue={},ie=null;if(Z!=null)for(W in Z.key!==void 0&&(ie=""+Z.key),Z)C.call(Z,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ue[W]=Z[W]);var oe=arguments.length-2;if(oe===1)ue.children=ee;else if(1<oe){for(var Se=Array(oe),ae=0;ae<oe;ae++)Se[ae]=arguments[ae+2];ue.children=Se}if($&&$.defaultProps)for(W in oe=$.defaultProps,oe)ue[W]===void 0&&(ue[W]=oe[W]);return R($,ie,ue)},ut.createRef=function(){return{current:null}},ut.forwardRef=function($){return{$$typeof:o,render:$}},ut.isValidElement=V,ut.lazy=function($){return{$$typeof:f,_payload:{_status:-1,_result:$},_init:J}},ut.memo=function($,Z){return{$$typeof:u,type:$,compare:Z===void 0?null:Z}},ut.startTransition=function($){var Z=N.T,ee={};N.T=ee;try{var W=$(),ue=N.S;ue!==null&&ue(ee,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(D,ne)}catch(ie){ne(ie)}finally{Z!==null&&ee.types!==null&&(Z.types=ee.types),N.T=Z}},ut.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},ut.use=function($){return N.H.use($)},ut.useActionState=function($,Z,ee){return N.H.useActionState($,Z,ee)},ut.useCallback=function($,Z){return N.H.useCallback($,Z)},ut.useContext=function($){return N.H.useContext($)},ut.useDebugValue=function(){},ut.useDeferredValue=function($,Z){return N.H.useDeferredValue($,Z)},ut.useEffect=function($,Z){return N.H.useEffect($,Z)},ut.useEffectEvent=function($){return N.H.useEffectEvent($)},ut.useId=function(){return N.H.useId()},ut.useImperativeHandle=function($,Z,ee){return N.H.useImperativeHandle($,Z,ee)},ut.useInsertionEffect=function($,Z){return N.H.useInsertionEffect($,Z)},ut.useLayoutEffect=function($,Z){return N.H.useLayoutEffect($,Z)},ut.useMemo=function($,Z){return N.H.useMemo($,Z)},ut.useOptimistic=function($,Z){return N.H.useOptimistic($,Z)},ut.useReducer=function($,Z,ee){return N.H.useReducer($,Z,ee)},ut.useRef=function($){return N.H.useRef($)},ut.useState=function($){return N.H.useState($)},ut.useSyncExternalStore=function($,Z,ee){return N.H.useSyncExternalStore($,Z,ee)},ut.useTransition=function(){return N.H.useTransition()},ut.version="19.2.4",ut}var s3;function Bp(){return s3||(s3=1,fA.exports=Kne()),fA.exports}var A=Bp();const nl=Ol(A),Wne=qne({__proto__:null,default:nl},[A]);var hA={exports:{}},ym={},pA={exports:{}},gA={};var o3;function Yne(){return o3||(o3=1,(function(t){function e(G,X){var J=G.length;G.push(X);e:for(;0<J;){var ne=J-1>>>1,Q=G[ne];if(0<i(Q,X))G[ne]=X,G[J]=Q,J=ne;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var X=G[0],J=G.pop();if(J!==X){G[0]=J;e:for(var ne=0,Q=G.length,$=Q>>>1;ne<$;){var Z=2*(ne+1)-1,ee=G[Z],W=Z+1,ue=G[W];if(0>i(ee,J))W<Q&&0>i(ue,ee)?(G[ne]=ue,G[W]=J,ne=W):(G[ne]=ee,G[Z]=J,ne=Z);else if(W<Q&&0>i(ue,J))G[ne]=ue,G[W]=J,ne=W;else break e}}return X}function i(G,X){var J=G.sortIndex-X.sortIndex;return J!==0?J:G.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],f=1,h=null,g=3,v=!1,b=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function P(G){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=G)r(u),X.sortIndex=X.expirationTime,e(c,X);else break;X=n(u)}}function O(G){if(x=!1,P(G),!b)if(n(c)!==null)b=!0,D||(D=!0,L());else{var X=n(u);X!==null&&Y(O,X.startTime-G)}}var D=!1,N=-1,C=5,R=-1;function M(){return w?!0:!(t.unstable_now()-R<C)}function V(){if(w=!1,D){var G=t.unstable_now();R=G;var X=!0;try{e:{b=!1,x&&(x=!1,T(N),N=-1),v=!0;var J=g;try{t:{for(P(G),h=n(c);h!==null&&!(h.expirationTime>G&&M());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,g=h.priorityLevel;var Q=ne(h.expirationTime<=G);if(G=t.unstable_now(),typeof Q=="function"){h.callback=Q,P(G),X=!0;break t}h===n(c)&&r(c),P(G)}else r(c);h=n(c)}if(h!==null)X=!0;else{var $=n(u);$!==null&&Y(O,$.startTime-G),X=!1}}break e}finally{h=null,g=J,v=!1}X=void 0}}finally{X?L():D=!1}}}var L;if(typeof I=="function")L=function(){I(V)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,K=z.port2;z.port1.onmessage=V,L=function(){K.postMessage(null)}}else L=function(){S(V,0)};function Y(G,X){N=S(function(){G(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var J=g;g=X;try{return G()}finally{g=J}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(G,X){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=g;g=G;try{return X()}finally{g=J}},t.unstable_scheduleCallback=function(G,X,J){var ne=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ne+J:ne):J=ne,G){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=J+Q,G={id:f++,callback:X,priorityLevel:G,startTime:J,expirationTime:Q,sortIndex:-1},J>ne?(G.sortIndex=J,e(u,G),n(c)===null&&G===n(u)&&(x?(T(N),N=-1):x=!0,Y(O,J-ne))):(G.sortIndex=Q,e(c,G),b||v||(b=!0,D||(D=!0,L()))),G},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(G){var X=g;return function(){var J=g;g=X;try{return G.apply(this,arguments)}finally{g=J}}}})(gA)),gA}var l3;function Xne(){return l3||(l3=1,pA.exports=Yne()),pA.exports}var mA={exports:{}},Xr={};var c3;function Qne(){if(c3)return Xr;c3=1;var t=Bp();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:u,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Xr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Xr.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,f)},Xr.flushSync=function(c){var u=s.T,f=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=f,r.d.f()}},Xr.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},Xr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Xr.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:v}):f==="script"&&r.d.X(c,{crossOrigin:h,integrity:g,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Xr.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},Xr.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin);r.d.L(c,f,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Xr.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},Xr.requestFormReset=function(c){r.d.r(c)},Xr.unstable_batchedUpdates=function(c,u){return c(u)},Xr.useFormState=function(c,u,f){return s.H.useFormState(c,u,f)},Xr.useFormStatus=function(){return s.H.useHostTransitionStatus()},Xr.version="19.2.4",Xr}var u3;function n8(){if(u3)return mA.exports;u3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mA.exports=Qne(),mA.exports}var d3;function Zne(){if(d3)return ym;d3=1;var t=Xne(),e=Bp(),n=n8();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function s(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function o(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=a(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,y=d;;){var E=p.return;if(E===null)break;var k=E.alternate;if(k===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===k.child){for(k=E.child;k;){if(k===p)return c(E),l;if(k===y)return c(E),d;k=k.sibling}throw Error(r(188))}if(p.return!==y.return)p=E,y=k;else{for(var B=!1,q=E.child;q;){if(q===p){B=!0,p=E,y=k;break}if(q===y){B=!0,y=E,p=k;break}q=q.sibling}if(!B){for(q=k.child;q;){if(q===p){B=!0,p=k,y=E;break}if(q===y){B=!0,y=k,p=E;break}q=q.sibling}if(!B)throw Error(r(189))}}if(p.alternate!==y)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),I=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function L(l){return l===null||typeof l!="object"?null:(l=V&&l[V]||l["@@iterator"],typeof l=="function"?l:null)}var z=Symbol.for("react.client.reference");function K(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===z?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case O:return"Suspense";case D:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case I:return l.displayName||"Context";case T:return(l._context.displayName||"Context")+".Consumer";case P:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case N:return d=l.displayName||null,d!==null?d:K(l.type)||"Memo";case C:d=l._payload,l=l._init;try{return K(l(d))}catch{}}return null}var Y=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ne=[],Q=-1;function $(l){return{current:l}}function Z(l){0>Q||(l.current=ne[Q],ne[Q]=null,Q--)}function ee(l,d){Q++,ne[Q]=l.current,l.current=d}var W=$(null),ue=$(null),ie=$(null),oe=$(null);function Se(l,d){switch(ee(ie,d),ee(ue,l),ee(W,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?A4(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=A4(d),l=k4(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Z(W),ee(W,l)}function ae(){Z(W),Z(ue),Z(ie)}function Te(l){l.memoizedState!==null&&ee(oe,l);var d=W.current,p=k4(d,l.type);d!==p&&(ee(ue,l),ee(W,p))}function he(l){ue.current===l&&(Z(W),Z(ue)),oe.current===l&&(Z(oe),hm._currentValue=J)}var te,Pe;function be(l){if(te===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);te=d&&d[1]||"",Pe=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+te+l+Pe}var ke=!1;function Oe(l,d){if(!l||ke)return"";ke=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(d){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(we){var ye=we}Reflect.construct(l,[],Ce)}else{try{Ce.call()}catch(we){ye=we}l.call(Ce.prototype)}}else{try{throw Error()}catch(we){ye=we}(Ce=l())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(we){if(we&&ye&&typeof we.stack=="string")return[we.stack,ye.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=y.DetermineComponentFrameRoot(),B=k[0],q=k[1];if(B&&q){var re=B.split(`
`),me=q.split(`
`);for(E=y=0;y<re.length&&!re[y].includes("DetermineComponentFrameRoot");)y++;for(;E<me.length&&!me[E].includes("DetermineComponentFrameRoot");)E++;if(y===re.length||E===me.length)for(y=re.length-1,E=me.length-1;1<=y&&0<=E&&re[y]!==me[E];)E--;for(;1<=y&&0<=E;y--,E--)if(re[y]!==me[E]){if(y!==1||E!==1)do if(y--,E--,0>E||re[y]!==me[E]){var Ee=`
`+re[y].replace(" at new "," at ");return l.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",l.displayName)),Ee}while(1<=y&&0<=E);break}}}finally{ke=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?be(p):""}function De(l,d){switch(l.tag){case 26:case 27:case 5:return be(l.type);case 16:return be("Lazy");case 13:return l.child!==d&&d!==null?be("Suspense Fallback"):be("Suspense");case 19:return be("SuspenseList");case 0:case 15:return Oe(l.type,!1);case 11:return Oe(l.type.render,!1);case 1:return Oe(l.type,!0);case 31:return be("Activity");default:return""}}function Ye(l){try{var d="",p=null;do d+=De(l,p),p=l,l=l.return;while(l);return d}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var Ve=Object.prototype.hasOwnProperty,it=t.unstable_scheduleCallback,Ft=t.unstable_cancelCallback,Le=t.unstable_shouldYield,st=t.unstable_requestPaint,ct=t.unstable_now,xt=t.unstable_getCurrentPriorityLevel,nn=t.unstable_ImmediatePriority,gn=t.unstable_UserBlockingPriority,ur=t.unstable_NormalPriority,Do=t.unstable_LowPriority,Fl=t.unstable_IdlePriority,li=t.log,Bn=t.unstable_setDisableYieldValue,Kn=null,Sn=null;function Yr(l){if(typeof li=="function"&&Bn(l),Sn&&typeof Sn.setStrictMode=="function")try{Sn.setStrictMode(Kn,l)}catch{}}var _n=Math.clz32?Math.clz32:Ul,yf=Math.log,$l=Math.LN2;function Ul(l){return l>>>=0,l===0?32:31-(yf(l)/$l|0)|0}var wt=256,En=262144,Tn=4194304;function Ki(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function va(l,d,p){var y=l.pendingLanes;if(y===0)return 0;var E=0,k=l.suspendedLanes,B=l.pingedLanes;l=l.warmLanes;var q=y&134217727;return q!==0?(y=q&~k,y!==0?E=Ki(y):(B&=q,B!==0?E=Ki(B):p||(p=q&~l,p!==0&&(E=Ki(p))))):(q=y&~k,q!==0?E=Ki(q):B!==0?E=Ki(B):p||(p=y&~l,p!==0&&(E=Ki(p)))),E===0?0:d!==0&&d!==E&&(d&k)===0&&(k=E&-E,p=d&-d,k>=p||k===32&&(p&4194048)!==0)?d:E}function ci(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function gE(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _y(){var l=Tn;return Tn<<=1,(Tn&62914560)===0&&(Tn=4194304),l}function Ds(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function Su(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function mE(l,d,p,y,E,k){var B=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var q=l.entanglements,re=l.expirationTimes,me=l.hiddenUpdates;for(p=B&~p;0<p;){var Ee=31-_n(p),Ce=1<<Ee;q[Ee]=0,re[Ee]=-1;var ye=me[Ee];if(ye!==null)for(me[Ee]=null,Ee=0;Ee<ye.length;Ee++){var we=ye[Ee];we!==null&&(we.lane&=-536870913)}p&=~Ce}y!==0&&_u(l,y,0),k!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=k&~(B&~d))}function _u(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var y=31-_n(d);l.entangledLanes|=d,l.entanglements[y]=l.entanglements[y]|1073741824|p&261930}function yg(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var y=31-_n(p),E=1<<y;E&d|l[y]&d&&(l[y]|=d),p&=~E}}function bg(l,d){var p=d&-d;return p=(p&42)!==0?1:Eu(p),(p&(l.suspendedLanes|d))!==0?0:p}function Eu(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Ro(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Ey(){var l=X.p;return l!==0?l:(l=window.event,l===void 0?32:X4(l.type))}function Za(l,d){var p=X.p;try{return X.p=l,d()}finally{X.p=p}}var Ja=Math.random().toString(36).slice(2),Wn="__reactFiber$"+Ja,Ar="__reactProps$"+Ja,Rs="__reactContainer$"+Ja,bf="__reactEvents$"+Ja,vE="__reactListeners$"+Ja,Ty="__reactHandles$"+Ja,Ay="__reactResources$"+Ja,Ms="__reactMarker$"+Ja;function xf(l){delete l[Wn],delete l[Ar],delete l[bf],delete l[vE],delete l[Ty]}function js(l){var d=l[Wn];if(d)return d;for(var p=l.parentNode;p;){if(d=p[Rs]||p[Wn]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=R4(l);l!==null;){if(p=l[Wn])return p;l=R4(l)}return d}l=p,p=l.parentNode}return null}function ya(l){if(l=l[Wn]||l[Rs]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Wi(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function zs(l){var d=l[Ay];return d||(d=l[Ay]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Yn(l){l[Ms]=!0}var xg=new Set,wg={};function Ls(l,d){Vs(l,d),Vs(l+"Capture",d)}function Vs(l,d){for(wg[l]=d,l=0;l<d.length;l++)xg.add(d[l])}var Sg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_g={},Eg={};function ky(l){return Ve.call(Eg,l)?!0:Ve.call(_g,l)?!1:Sg.test(l)?Eg[l]=!0:(_g[l]=!0,!1)}function wf(l,d,p){if(ky(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var y=d.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Yi(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function Xn(l,d,p,y){if(y===null)l.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+y)}}function kr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function ql(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Tg(l,d,p){var y=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var E=y.get,k=y.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return E.call(this)},set:function(B){p=""+B,k.call(this,B)}}),Object.defineProperty(l,d,{enumerable:y.enumerable}),{getValue:function(){return p},setValue:function(B){p=""+B},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function $t(l){if(!l._valueTracker){var d=ql(l)?"checked":"value";l._valueTracker=Tg(l,d,""+l[d])}}function Tu(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),y="";return l&&(y=ql(l)?l.checked?"true":"false":l.value),l=y,l!==p?(d.setValue(l),!0):!1}function Bs(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Au=/[\n"\\]/g;function Ti(l){return l.replace(Au,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Sf(l,d,p,y,E,k,B,q){l.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?l.type=B:l.removeAttribute("type"),d!=null?B==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+kr(d)):l.value!==""+kr(d)&&(l.value=""+kr(d)):B!=="submit"&&B!=="reset"||l.removeAttribute("value"),d!=null?Ag(l,B,kr(d)):p!=null?Ag(l,B,kr(p)):y!=null&&l.removeAttribute("value"),E==null&&k!=null&&(l.defaultChecked=!!k),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?l.name=""+kr(q):l.removeAttribute("name")}function Cy(l,d,p,y,E,k,B,q){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(l.type=k),d!=null||p!=null){if(!(k!=="submit"&&k!=="reset"||d!=null)){$t(l);return}p=p!=null?""+kr(p):"",d=d!=null?""+kr(d):p,q||d===l.value||(l.value=d),l.defaultValue=d}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=q?l.checked:!!y,l.defaultChecked=!!y,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(l.name=B),$t(l)}function Ag(l,d,p){d==="number"&&Bs(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Gl(l,d,p,y){if(l=l.options,d){d={};for(var E=0;E<p.length;E++)d["$"+p[E]]=!0;for(p=0;p<l.length;p++)E=d.hasOwnProperty("$"+l[p].value),l[p].selected!==E&&(l[p].selected=E),E&&y&&(l[p].defaultSelected=!0)}else{for(p=""+kr(p),d=null,E=0;E<l.length;E++){if(l[E].value===p){l[E].selected=!0,y&&(l[E].defaultSelected=!0);return}d!==null||l[E].disabled||(d=l[E])}d!==null&&(d.selected=!0)}}function Iy(l,d,p){if(d!=null&&(d=""+kr(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+kr(p):""}function Hl(l,d,p,y){if(d==null){if(y!=null){if(p!=null)throw Error(r(92));if(Y(y)){if(1<y.length)throw Error(r(93));y=y[0]}p=y}p==null&&(p=""),d=p}p=kr(d),l.defaultValue=p,y=l.textContent,y===p&&y!==""&&y!==null&&(l.value=y),$t(l)}function Ai(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var Ny=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kg(l,d,p){var y=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":y?l.setProperty(d,p):typeof p!="number"||p===0||Ny.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function Cg(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||d!=null&&d.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var E in d)y=d[E],d.hasOwnProperty(E)&&p[E]!==y&&kg(l,E,y)}else for(var k in d)d.hasOwnProperty(k)&&kg(l,k,d[k])}function _f(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Py=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ef(l){return Kl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function es(){}var Ig=null;function ba(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Wl=null,Fs=null;function ku(l){var d=ya(l);if(d&&(l=d.stateNode)){var p=l[Ar]||null;e:switch(l=d.stateNode,d.type){case"input":if(Sf(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ti(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var y=p[d];if(y!==l&&y.form===l.form){var E=y[Ar]||null;if(!E)throw Error(r(90));Sf(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(d=0;d<p.length;d++)y=p[d],y.form===l.form&&Tu(y)}break e;case"textarea":Iy(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Gl(l,!!p.multiple,d,!1)}}}var Tf=!1;function Yl(l,d,p){if(Tf)return l(d,p);Tf=!0;try{var y=l(d);return y}finally{if(Tf=!1,(Wl!==null||Fs!==null)&&(Eb(),Wl&&(d=Wl,l=Fs,Fs=Wl=null,ku(d),l)))for(d=0;d<l.length;d++)ku(l[d])}}function ts(l,d){var p=l.stateNode;if(p===null)return null;var y=p[Ar]||null;if(y===null)return null;p=y[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cu=!1;if(xa)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Cu=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Cu=!1}var $s=null,Ng=null,Iu=null;function Pg(){if(Iu)return Iu;var l,d=Ng,p=d.length,y,E="value"in $s?$s.value:$s.textContent,k=E.length;for(l=0;l<p&&d[l]===E[l];l++);var B=p-l;for(y=1;y<=B&&d[p-y]===E[k-y];y++);return Iu=E.slice(l,1<y?1-y:void 0)}function Nu(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Mo(){return!0}function ns(){return!1}function Lr(l){function d(p,y,E,k,B){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=k,this.target=B,this.currentTarget=null;for(var q in l)l.hasOwnProperty(q)&&(p=l[q],this[q]=p?p(k):k[q]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Mo:ns,this.isPropagationStopped=ns,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Mo)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Mo)},persist:function(){},isPersistent:Mo}),d}var jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Us=Lr(jo),Xl=h({},jo,{view:0,detail:0}),Og=Lr(Xl),Ql,Af,qs,kf=h({},Xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zl,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==qs&&(qs&&l.type==="mousemove"?(Ql=l.screenX-qs.screenX,Af=l.screenY-qs.screenY):Af=Ql=0,qs=l),Ql)},movementY:function(l){return"movementY"in l?l.movementY:Af}}),Dg=Lr(kf),Pu=h({},kf,{dataTransfer:0}),Oy=Lr(Pu),Dy=h({},Xl,{relatedTarget:0}),Ou=Lr(Dy),Rg=h({},jo,{animationName:0,elapsedTime:0,pseudoElement:0}),Ry=Lr(Rg),Cf=h({},jo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),My=Lr(Cf),jy=h({},jo,{data:0}),Gs=Lr(jy),zy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ly={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function By(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=Vy[l])?!!d[l]:!1}function Zl(){return By}var ui=h({},Xl,{key:function(l){if(l.key){var d=zy[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Nu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Ly[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zl,charCode:function(l){return l.type==="keypress"?Nu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Nu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Fy=Lr(ui),$y=h({},kf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zo=Lr($y),_=h({},Xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zl}),j=Lr(_),F=h({},jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=Lr(F),pe=h({},kf,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=Lr(pe),je=h({},jo,{newState:0,oldState:0}),dt=Lr(je),Fn=[9,13,27,32],Mt=xa&&"CompositionEvent"in window,mn=null;xa&&"documentMode"in document&&(mn=document.documentMode);var wa=xa&&"TextEvent"in window&&!mn,Hs=xa&&(!Mt||mn&&8<mn&&11>=mn),rs=" ",is=!1;function Du(l,d){switch(l){case"keyup":return Fn.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function If(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Nf=!1;function pte(l,d){switch(l){case"compositionend":return If(d);case"keypress":return d.which!==32?null:(is=!0,rs);case"textInput":return l=d.data,l===rs&&is?null:l;default:return null}}function gte(l,d){if(Nf)return l==="compositionend"||!Mt&&Du(l,d)?(l=Pg(),Iu=Ng=$s=null,Nf=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Hs&&d.locale!=="ko"?null:d.data;default:return null}}var mte={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zM(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!mte[l.type]:d==="textarea"}function LM(l,d,p,y){Wl?Fs?Fs.push(y):Fs=[y]:Wl=y,d=Pb(d,"onChange"),0<d.length&&(p=new Us("onChange","change",null,p,y),l.push({event:p,listeners:d}))}var Mg=null,jg=null;function vte(l){x4(l,0)}function Uy(l){var d=Wi(l);if(Tu(d))return l}function VM(l,d){if(l==="change")return d}var BM=!1;if(xa){var yE;if(xa){var bE="oninput"in document;if(!bE){var FM=document.createElement("div");FM.setAttribute("oninput","return;"),bE=typeof FM.oninput=="function"}yE=bE}else yE=!1;BM=yE&&(!document.documentMode||9<document.documentMode)}function $M(){Mg&&(Mg.detachEvent("onpropertychange",UM),jg=Mg=null)}function UM(l){if(l.propertyName==="value"&&Uy(jg)){var d=[];LM(d,jg,l,ba(l)),Yl(vte,d)}}function yte(l,d,p){l==="focusin"?($M(),Mg=d,jg=p,Mg.attachEvent("onpropertychange",UM)):l==="focusout"&&$M()}function bte(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Uy(jg)}function xte(l,d){if(l==="click")return Uy(d)}function wte(l,d){if(l==="input"||l==="change")return Uy(d)}function Ste(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Xi=typeof Object.is=="function"?Object.is:Ste;function zg(l,d){if(Xi(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),y=Object.keys(d);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!Ve.call(d,E)||!Xi(l[E],d[E]))return!1}return!0}function qM(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function GM(l,d){var p=qM(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=d&&y>=d)return{node:p,offset:d-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=qM(p)}}function HM(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?HM(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function KM(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Bs(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=Bs(l.document)}return d}function xE(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var _te=xa&&"documentMode"in document&&11>=document.documentMode,Pf=null,wE=null,Lg=null,SE=!1;function WM(l,d,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;SE||Pf==null||Pf!==Bs(y)||(y=Pf,"selectionStart"in y&&xE(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Lg&&zg(Lg,y)||(Lg=y,y=Pb(wE,"onSelect"),0<y.length&&(d=new Us("onSelect","select",null,d,p),l.push({event:d,listeners:y}),d.target=Pf)))}function Ru(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Of={animationend:Ru("Animation","AnimationEnd"),animationiteration:Ru("Animation","AnimationIteration"),animationstart:Ru("Animation","AnimationStart"),transitionrun:Ru("Transition","TransitionRun"),transitionstart:Ru("Transition","TransitionStart"),transitioncancel:Ru("Transition","TransitionCancel"),transitionend:Ru("Transition","TransitionEnd")},_E={},YM={};xa&&(YM=document.createElement("div").style,"AnimationEvent"in window||(delete Of.animationend.animation,delete Of.animationiteration.animation,delete Of.animationstart.animation),"TransitionEvent"in window||delete Of.transitionend.transition);function Mu(l){if(_E[l])return _E[l];if(!Of[l])return l;var d=Of[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in YM)return _E[l]=d[p];return l}var XM=Mu("animationend"),QM=Mu("animationiteration"),ZM=Mu("animationstart"),Ete=Mu("transitionrun"),Tte=Mu("transitionstart"),Ate=Mu("transitioncancel"),JM=Mu("transitionend"),ej=new Map,EE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");EE.push("scrollEnd");function as(l,d){ej.set(l,d),Ls(d,[l])}var qy=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Sa=[],Df=0,TE=0;function Gy(){for(var l=Df,d=TE=Df=0;d<l;){var p=Sa[d];Sa[d++]=null;var y=Sa[d];Sa[d++]=null;var E=Sa[d];Sa[d++]=null;var k=Sa[d];if(Sa[d++]=null,y!==null&&E!==null){var B=y.pending;B===null?E.next=E:(E.next=B.next,B.next=E),y.pending=E}k!==0&&tj(p,E,k)}}function Hy(l,d,p,y){Sa[Df++]=l,Sa[Df++]=d,Sa[Df++]=p,Sa[Df++]=y,TE|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function AE(l,d,p,y){return Hy(l,d,p,y),Ky(l)}function ju(l,d){return Hy(l,null,null,d),Ky(l)}function tj(l,d,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var E=!1,k=l.return;k!==null;)k.childLanes|=p,y=k.alternate,y!==null&&(y.childLanes|=p),k.tag===22&&(l=k.stateNode,l===null||l._visibility&1||(E=!0)),l=k,k=k.return;return l.tag===3?(k=l.stateNode,E&&d!==null&&(E=31-_n(p),l=k.hiddenUpdates,y=l[E],y===null?l[E]=[d]:y.push(d),d.lane=p|536870912),k):null}function Ky(l){if(50<sm)throw sm=0,MT=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Rf={};function kte(l,d,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qi(l,d,p,y){return new kte(l,d,p,y)}function kE(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Lo(l,d){var p=l.alternate;return p===null?(p=Qi(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function nj(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Wy(l,d,p,y,E,k){var B=0;if(y=l,typeof l=="function")kE(l)&&(B=1);else if(typeof l=="string")B=One(l,p,W.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=Qi(31,p,d,E),l.elementType=R,l.lanes=k,l;case x:return zu(p.children,E,k,d);case w:B=8,E|=24;break;case S:return l=Qi(12,p,d,E|2),l.elementType=S,l.lanes=k,l;case O:return l=Qi(13,p,d,E),l.elementType=O,l.lanes=k,l;case D:return l=Qi(19,p,d,E),l.elementType=D,l.lanes=k,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case I:B=10;break e;case T:B=9;break e;case P:B=11;break e;case N:B=14;break e;case C:B=16,y=null;break e}B=29,p=Error(r(130,l===null?"null":typeof l,"")),y=null}return d=Qi(B,p,d,E),d.elementType=l,d.type=y,d.lanes=k,d}function zu(l,d,p,y){return l=Qi(7,l,y,d),l.lanes=p,l}function CE(l,d,p){return l=Qi(6,l,null,d),l.lanes=p,l}function rj(l){var d=Qi(18,null,null,0);return d.stateNode=l,d}function IE(l,d,p){return d=Qi(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var ij=new WeakMap;function _a(l,d){if(typeof l=="object"&&l!==null){var p=ij.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Ye(d)},ij.set(l,d),d)}return{value:l,source:d,stack:Ye(d)}}var Mf=[],jf=0,Yy=null,Vg=0,Ea=[],Ta=0,Jl=null,Ks=1,Ws="";function Vo(l,d){Mf[jf++]=Vg,Mf[jf++]=Yy,Yy=l,Vg=d}function aj(l,d,p){Ea[Ta++]=Ks,Ea[Ta++]=Ws,Ea[Ta++]=Jl,Jl=l;var y=Ks;l=Ws;var E=32-_n(y)-1;y&=~(1<<E),p+=1;var k=32-_n(d)+E;if(30<k){var B=E-E%5;k=(y&(1<<B)-1).toString(32),y>>=B,E-=B,Ks=1<<32-_n(d)+E|p<<E|y,Ws=k+l}else Ks=1<<k|p<<E|y,Ws=l}function NE(l){l.return!==null&&(Vo(l,1),aj(l,1,0))}function PE(l){for(;l===Yy;)Yy=Mf[--jf],Mf[jf]=null,Vg=Mf[--jf],Mf[jf]=null;for(;l===Jl;)Jl=Ea[--Ta],Ea[Ta]=null,Ws=Ea[--Ta],Ea[Ta]=null,Ks=Ea[--Ta],Ea[Ta]=null}function sj(l,d){Ea[Ta++]=Ks,Ea[Ta++]=Ws,Ea[Ta++]=Jl,Ks=d.id,Ws=d.overflow,Jl=l}var Vr=null,un=null,It=!1,ec=null,Aa=!1,OE=Error(r(519));function tc(l){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bg(_a(d,l)),OE}function oj(l){var d=l.stateNode,p=l.type,y=l.memoizedProps;switch(d[Wn]=l,d[Ar]=y,p){case"dialog":_t("cancel",d),_t("close",d);break;case"iframe":case"object":case"embed":_t("load",d);break;case"video":case"audio":for(p=0;p<lm.length;p++)_t(lm[p],d);break;case"source":_t("error",d);break;case"img":case"image":case"link":_t("error",d),_t("load",d);break;case"details":_t("toggle",d);break;case"input":_t("invalid",d),Cy(d,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":_t("invalid",d);break;case"textarea":_t("invalid",d),Hl(d,y.value,y.defaultValue,y.children)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||y.suppressHydrationWarning===!0||E4(d.textContent,p)?(y.popover!=null&&(_t("beforetoggle",d),_t("toggle",d)),y.onScroll!=null&&_t("scroll",d),y.onScrollEnd!=null&&_t("scrollend",d),y.onClick!=null&&(d.onclick=es),d=!0):d=!1,d||tc(l,!0)}function lj(l){for(Vr=l.return;Vr;)switch(Vr.tag){case 5:case 31:case 13:Aa=!1;return;case 27:case 3:Aa=!0;return;default:Vr=Vr.return}}function zf(l){if(l!==Vr)return!1;if(!It)return lj(l),It=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||XT(l.type,l.memoizedProps)),p=!p),p&&un&&tc(l),lj(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));un=D4(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));un=D4(l)}else d===27?(d=un,gc(l.type)?(l=tA,tA=null,un=l):un=d):un=Vr?Ca(l.stateNode.nextSibling):null;return!0}function Lu(){un=Vr=null,It=!1}function DE(){var l=ec;return l!==null&&(Ni===null?Ni=l:Ni.push.apply(Ni,l),ec=null),l}function Bg(l){ec===null?ec=[l]:ec.push(l)}var RE=$(null),Vu=null,Bo=null;function nc(l,d,p){ee(RE,d._currentValue),d._currentValue=p}function Fo(l){l._currentValue=RE.current,Z(RE)}function ME(l,d,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,y!==null&&(y.childLanes|=d)):y!==null&&(y.childLanes&d)!==d&&(y.childLanes|=d),l===p)break;l=l.return}}function jE(l,d,p,y){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var k=E.dependencies;if(k!==null){var B=E.child;k=k.firstContext;e:for(;k!==null;){var q=k;k=E;for(var re=0;re<d.length;re++)if(q.context===d[re]){k.lanes|=p,q=k.alternate,q!==null&&(q.lanes|=p),ME(k.return,p,l),y||(B=null);break e}k=q.next}}else if(E.tag===18){if(B=E.return,B===null)throw Error(r(341));B.lanes|=p,k=B.alternate,k!==null&&(k.lanes|=p),ME(B,p,l),B=null}else B=E.child;if(B!==null)B.return=E;else for(B=E;B!==null;){if(B===l){B=null;break}if(E=B.sibling,E!==null){E.return=B.return,B=E;break}B=B.return}E=B}}function Lf(l,d,p,y){l=null;for(var E=d,k=!1;E!==null;){if(!k){if((E.flags&524288)!==0)k=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var B=E.alternate;if(B===null)throw Error(r(387));if(B=B.memoizedProps,B!==null){var q=E.type;Xi(E.pendingProps.value,B.value)||(l!==null?l.push(q):l=[q])}}else if(E===oe.current){if(B=E.alternate,B===null)throw Error(r(387));B.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(hm):l=[hm])}E=E.return}l!==null&&jE(d,l,p,y),d.flags|=262144}function Xy(l){for(l=l.firstContext;l!==null;){if(!Xi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Bu(l){Vu=l,Bo=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Br(l){return cj(Vu,l)}function Qy(l,d){return Vu===null&&Bu(l),cj(l,d)}function cj(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},Bo===null){if(l===null)throw Error(r(308));Bo=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Bo=Bo.next=d;return p}var Cte=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},Ite=t.unstable_scheduleCallback,Nte=t.unstable_NormalPriority,Qn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zE(){return{controller:new Cte,data:new Map,refCount:0}}function Fg(l){l.refCount--,l.refCount===0&&Ite(Nte,function(){l.controller.abort()})}var $g=null,LE=0,Vf=0,Bf=null;function Pte(l,d){if($g===null){var p=$g=[];LE=0,Vf=FT(),Bf={status:"pending",value:void 0,then:function(y){p.push(y)}}}return LE++,d.then(uj,uj),d}function uj(){if(--LE===0&&$g!==null){Bf!==null&&(Bf.status="fulfilled");var l=$g;$g=null,Vf=0,Bf=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function Ote(l,d){var p=[],y={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return l.then(function(){y.status="fulfilled",y.value=d;for(var E=0;E<p.length;E++)(0,p[E])(d)},function(E){for(y.status="rejected",y.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),y}var dj=G.S;G.S=function(l,d){Wz=ct(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&Pte(l,d),dj!==null&&dj(l,d)};var Fu=$(null);function VE(){var l=Fu.current;return l!==null?l:rn.pooledCache}function Zy(l,d){d===null?ee(Fu,Fu.current):ee(Fu,d.pool)}function fj(){var l=VE();return l===null?null:{parent:Qn._currentValue,pool:l}}var Ff=Error(r(460)),BE=Error(r(474)),Jy=Error(r(542)),eb={then:function(){}};function hj(l){return l=l.status,l==="fulfilled"||l==="rejected"}function pj(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(es,es),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,mj(l),l;default:if(typeof d.status=="string")d.then(es,es);else{if(l=rn,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(y){if(d.status==="pending"){var E=d;E.status="fulfilled",E.value=y}},function(y){if(d.status==="pending"){var E=d;E.status="rejected",E.reason=y}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,mj(l),l}throw Uu=d,Ff}}function $u(l){try{var d=l._init;return d(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Uu=p,Ff):p}}var Uu=null;function gj(){if(Uu===null)throw Error(r(459));var l=Uu;return Uu=null,l}function mj(l){if(l===Ff||l===Jy)throw Error(r(483))}var $f=null,Ug=0;function tb(l){var d=Ug;return Ug+=1,$f===null&&($f=[]),pj($f,l,d)}function qg(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function nb(l,d){throw d.$$typeof===g?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function vj(l){function d(de,ce){if(l){var ge=de.deletions;ge===null?(de.deletions=[ce],de.flags|=16):ge.push(ce)}}function p(de,ce){if(!l)return null;for(;ce!==null;)d(de,ce),ce=ce.sibling;return null}function y(de){for(var ce=new Map;de!==null;)de.key!==null?ce.set(de.key,de):ce.set(de.index,de),de=de.sibling;return ce}function E(de,ce){return de=Lo(de,ce),de.index=0,de.sibling=null,de}function k(de,ce,ge){return de.index=ge,l?(ge=de.alternate,ge!==null?(ge=ge.index,ge<ce?(de.flags|=67108866,ce):ge):(de.flags|=67108866,ce)):(de.flags|=1048576,ce)}function B(de){return l&&de.alternate===null&&(de.flags|=67108866),de}function q(de,ce,ge,Ae){return ce===null||ce.tag!==6?(ce=CE(ge,de.mode,Ae),ce.return=de,ce):(ce=E(ce,ge),ce.return=de,ce)}function re(de,ce,ge,Ae){var Je=ge.type;return Je===x?Ee(de,ce,ge.props.children,Ae,ge.key):ce!==null&&(ce.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===C&&$u(Je)===ce.type)?(ce=E(ce,ge.props),qg(ce,ge),ce.return=de,ce):(ce=Wy(ge.type,ge.key,ge.props,null,de.mode,Ae),qg(ce,ge),ce.return=de,ce)}function me(de,ce,ge,Ae){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ge.containerInfo||ce.stateNode.implementation!==ge.implementation?(ce=IE(ge,de.mode,Ae),ce.return=de,ce):(ce=E(ce,ge.children||[]),ce.return=de,ce)}function Ee(de,ce,ge,Ae,Je){return ce===null||ce.tag!==7?(ce=zu(ge,de.mode,Ae,Je),ce.return=de,ce):(ce=E(ce,ge),ce.return=de,ce)}function Ce(de,ce,ge){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=CE(""+ce,de.mode,ge),ce.return=de,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case v:return ge=Wy(ce.type,ce.key,ce.props,null,de.mode,ge),qg(ge,ce),ge.return=de,ge;case b:return ce=IE(ce,de.mode,ge),ce.return=de,ce;case C:return ce=$u(ce),Ce(de,ce,ge)}if(Y(ce)||L(ce))return ce=zu(ce,de.mode,ge,null),ce.return=de,ce;if(typeof ce.then=="function")return Ce(de,tb(ce),ge);if(ce.$$typeof===I)return Ce(de,Qy(de,ce),ge);nb(de,ce)}return null}function ye(de,ce,ge,Ae){var Je=ce!==null?ce.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Je!==null?null:q(de,ce,""+ge,Ae);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case v:return ge.key===Je?re(de,ce,ge,Ae):null;case b:return ge.key===Je?me(de,ce,ge,Ae):null;case C:return ge=$u(ge),ye(de,ce,ge,Ae)}if(Y(ge)||L(ge))return Je!==null?null:Ee(de,ce,ge,Ae,null);if(typeof ge.then=="function")return ye(de,ce,tb(ge),Ae);if(ge.$$typeof===I)return ye(de,ce,Qy(de,ge),Ae);nb(de,ge)}return null}function we(de,ce,ge,Ae,Je){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return de=de.get(ge)||null,q(ce,de,""+Ae,Je);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case v:return de=de.get(Ae.key===null?ge:Ae.key)||null,re(ce,de,Ae,Je);case b:return de=de.get(Ae.key===null?ge:Ae.key)||null,me(ce,de,Ae,Je);case C:return Ae=$u(Ae),we(de,ce,ge,Ae,Je)}if(Y(Ae)||L(Ae))return de=de.get(ge)||null,Ee(ce,de,Ae,Je,null);if(typeof Ae.then=="function")return we(de,ce,ge,tb(Ae),Je);if(Ae.$$typeof===I)return we(de,ce,ge,Qy(ce,Ae),Je);nb(ce,Ae)}return null}function Ue(de,ce,ge,Ae){for(var Je=null,Ot=null,We=ce,pt=ce=0,At=null;We!==null&&pt<ge.length;pt++){We.index>pt?(At=We,We=null):At=We.sibling;var Dt=ye(de,We,ge[pt],Ae);if(Dt===null){We===null&&(We=At);break}l&&We&&Dt.alternate===null&&d(de,We),ce=k(Dt,ce,pt),Ot===null?Je=Dt:Ot.sibling=Dt,Ot=Dt,We=At}if(pt===ge.length)return p(de,We),It&&Vo(de,pt),Je;if(We===null){for(;pt<ge.length;pt++)We=Ce(de,ge[pt],Ae),We!==null&&(ce=k(We,ce,pt),Ot===null?Je=We:Ot.sibling=We,Ot=We);return It&&Vo(de,pt),Je}for(We=y(We);pt<ge.length;pt++)At=we(We,de,pt,ge[pt],Ae),At!==null&&(l&&At.alternate!==null&&We.delete(At.key===null?pt:At.key),ce=k(At,ce,pt),Ot===null?Je=At:Ot.sibling=At,Ot=At);return l&&We.forEach(function(xc){return d(de,xc)}),It&&Vo(de,pt),Je}function at(de,ce,ge,Ae){if(ge==null)throw Error(r(151));for(var Je=null,Ot=null,We=ce,pt=ce=0,At=null,Dt=ge.next();We!==null&&!Dt.done;pt++,Dt=ge.next()){We.index>pt?(At=We,We=null):At=We.sibling;var xc=ye(de,We,Dt.value,Ae);if(xc===null){We===null&&(We=At);break}l&&We&&xc.alternate===null&&d(de,We),ce=k(xc,ce,pt),Ot===null?Je=xc:Ot.sibling=xc,Ot=xc,We=At}if(Dt.done)return p(de,We),It&&Vo(de,pt),Je;if(We===null){for(;!Dt.done;pt++,Dt=ge.next())Dt=Ce(de,Dt.value,Ae),Dt!==null&&(ce=k(Dt,ce,pt),Ot===null?Je=Dt:Ot.sibling=Dt,Ot=Dt);return It&&Vo(de,pt),Je}for(We=y(We);!Dt.done;pt++,Dt=ge.next())Dt=we(We,de,pt,Dt.value,Ae),Dt!==null&&(l&&Dt.alternate!==null&&We.delete(Dt.key===null?pt:Dt.key),ce=k(Dt,ce,pt),Ot===null?Je=Dt:Ot.sibling=Dt,Ot=Dt);return l&&We.forEach(function(Une){return d(de,Une)}),It&&Vo(de,pt),Je}function Qt(de,ce,ge,Ae){if(typeof ge=="object"&&ge!==null&&ge.type===x&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case v:e:{for(var Je=ge.key;ce!==null;){if(ce.key===Je){if(Je=ge.type,Je===x){if(ce.tag===7){p(de,ce.sibling),Ae=E(ce,ge.props.children),Ae.return=de,de=Ae;break e}}else if(ce.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===C&&$u(Je)===ce.type){p(de,ce.sibling),Ae=E(ce,ge.props),qg(Ae,ge),Ae.return=de,de=Ae;break e}p(de,ce);break}else d(de,ce);ce=ce.sibling}ge.type===x?(Ae=zu(ge.props.children,de.mode,Ae,ge.key),Ae.return=de,de=Ae):(Ae=Wy(ge.type,ge.key,ge.props,null,de.mode,Ae),qg(Ae,ge),Ae.return=de,de=Ae)}return B(de);case b:e:{for(Je=ge.key;ce!==null;){if(ce.key===Je)if(ce.tag===4&&ce.stateNode.containerInfo===ge.containerInfo&&ce.stateNode.implementation===ge.implementation){p(de,ce.sibling),Ae=E(ce,ge.children||[]),Ae.return=de,de=Ae;break e}else{p(de,ce);break}else d(de,ce);ce=ce.sibling}Ae=IE(ge,de.mode,Ae),Ae.return=de,de=Ae}return B(de);case C:return ge=$u(ge),Qt(de,ce,ge,Ae)}if(Y(ge))return Ue(de,ce,ge,Ae);if(L(ge)){if(Je=L(ge),typeof Je!="function")throw Error(r(150));return ge=Je.call(ge),at(de,ce,ge,Ae)}if(typeof ge.then=="function")return Qt(de,ce,tb(ge),Ae);if(ge.$$typeof===I)return Qt(de,ce,Qy(de,ge),Ae);nb(de,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,ce!==null&&ce.tag===6?(p(de,ce.sibling),Ae=E(ce,ge),Ae.return=de,de=Ae):(p(de,ce),Ae=CE(ge,de.mode,Ae),Ae.return=de,de=Ae),B(de)):p(de,ce)}return function(de,ce,ge,Ae){try{Ug=0;var Je=Qt(de,ce,ge,Ae);return $f=null,Je}catch(We){if(We===Ff||We===Jy)throw We;var Ot=Qi(29,We,null,de.mode);return Ot.lanes=Ae,Ot.return=de,Ot}}}var qu=vj(!0),yj=vj(!1),rc=!1;function FE(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $E(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function ic(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function ac(l,d,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(jt&2)!==0){var E=y.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),y.pending=d,d=Ky(l),tj(l,null,p),d}return Hy(l,y,d,p),Ky(l)}function Gg(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,yg(l,p)}}function UE(l,d){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,k=null;if(p=p.firstBaseUpdate,p!==null){do{var B={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};k===null?E=k=B:k=k.next=B,p=p.next}while(p!==null);k===null?E=k=d:k=k.next=d}else E=k=d;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:k,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var qE=!1;function Hg(){if(qE){var l=Bf;if(l!==null)throw l}}function Kg(l,d,p,y){qE=!1;var E=l.updateQueue;rc=!1;var k=E.firstBaseUpdate,B=E.lastBaseUpdate,q=E.shared.pending;if(q!==null){E.shared.pending=null;var re=q,me=re.next;re.next=null,B===null?k=me:B.next=me,B=re;var Ee=l.alternate;Ee!==null&&(Ee=Ee.updateQueue,q=Ee.lastBaseUpdate,q!==B&&(q===null?Ee.firstBaseUpdate=me:q.next=me,Ee.lastBaseUpdate=re))}if(k!==null){var Ce=E.baseState;B=0,Ee=me=re=null,q=k;do{var ye=q.lane&-536870913,we=ye!==q.lane;if(we?(Tt&ye)===ye:(y&ye)===ye){ye!==0&&ye===Vf&&(qE=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var Ue=l,at=q;ye=d;var Qt=p;switch(at.tag){case 1:if(Ue=at.payload,typeof Ue=="function"){Ce=Ue.call(Qt,Ce,ye);break e}Ce=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=at.payload,ye=typeof Ue=="function"?Ue.call(Qt,Ce,ye):Ue,ye==null)break e;Ce=h({},Ce,ye);break e;case 2:rc=!0}}ye=q.callback,ye!==null&&(l.flags|=64,we&&(l.flags|=8192),we=E.callbacks,we===null?E.callbacks=[ye]:we.push(ye))}else we={lane:ye,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Ee===null?(me=Ee=we,re=Ce):Ee=Ee.next=we,B|=ye;if(q=q.next,q===null){if(q=E.shared.pending,q===null)break;we=q,q=we.next,we.next=null,E.lastBaseUpdate=we,E.shared.pending=null}}while(!0);Ee===null&&(re=Ce),E.baseState=re,E.firstBaseUpdate=me,E.lastBaseUpdate=Ee,k===null&&(E.shared.lanes=0),uc|=B,l.lanes=B,l.memoizedState=Ce}}function bj(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function xj(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)bj(p[l],d)}var Uf=$(null),rb=$(0);function wj(l,d){l=Xo,ee(rb,l),ee(Uf,d),Xo=l|d.baseLanes}function GE(){ee(rb,Xo),ee(Uf,Uf.current)}function HE(){Xo=rb.current,Z(Uf),Z(rb)}var Zi=$(null),ka=null;function sc(l){var d=l.alternate;ee($n,$n.current&1),ee(Zi,l),ka===null&&(d===null||Uf.current!==null||d.memoizedState!==null)&&(ka=l)}function KE(l){ee($n,$n.current),ee(Zi,l),ka===null&&(ka=l)}function Sj(l){l.tag===22?(ee($n,$n.current),ee(Zi,l),ka===null&&(ka=l)):oc()}function oc(){ee($n,$n.current),ee(Zi,Zi.current)}function Ji(l){Z(Zi),ka===l&&(ka=null),Z($n)}var $n=$(0);function ib(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||JT(p)||eA(p)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var $o=0,ft=null,Yt=null,Zn=null,ab=!1,qf=!1,Gu=!1,sb=0,Wg=0,Gf=null,Dte=0;function Pn(){throw Error(r(321))}function WE(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Xi(l[p],d[p]))return!1;return!0}function YE(l,d,p,y,E,k){return $o=k,ft=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,G.H=l===null||l.memoizedState===null?az:uT,Gu=!1,k=p(y,E),Gu=!1,qf&&(k=Ej(d,p,y,E)),_j(l),k}function _j(l){G.H=Qg;var d=Yt!==null&&Yt.next!==null;if($o=0,Zn=Yt=ft=null,ab=!1,Wg=0,Gf=null,d)throw Error(r(300));l===null||Jn||(l=l.dependencies,l!==null&&Xy(l)&&(Jn=!0))}function Ej(l,d,p,y){ft=l;var E=0;do{if(qf&&(Gf=null),Wg=0,qf=!1,25<=E)throw Error(r(301));if(E+=1,Zn=Yt=null,l.updateQueue!=null){var k=l.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}G.H=sz,k=d(p,y)}while(qf);return k}function Rte(){var l=G.H,d=l.useState()[0];return d=typeof d.then=="function"?Yg(d):d,l=l.useState()[0],(Yt!==null?Yt.memoizedState:null)!==l&&(ft.flags|=1024),d}function XE(){var l=sb!==0;return sb=0,l}function QE(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function ZE(l){if(ab){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}ab=!1}$o=0,Zn=Yt=ft=null,qf=!1,Wg=sb=0,Gf=null}function di(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?ft.memoizedState=Zn=l:Zn=Zn.next=l,Zn}function Un(){if(Yt===null){var l=ft.alternate;l=l!==null?l.memoizedState:null}else l=Yt.next;var d=Zn===null?ft.memoizedState:Zn.next;if(d!==null)Zn=d,Yt=l;else{if(l===null)throw ft.alternate===null?Error(r(467)):Error(r(310));Yt=l,l={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Zn===null?ft.memoizedState=Zn=l:Zn=Zn.next=l}return Zn}function ob(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yg(l){var d=Wg;return Wg+=1,Gf===null&&(Gf=[]),l=pj(Gf,l,d),d=ft,(Zn===null?d.memoizedState:Zn.next)===null&&(d=d.alternate,G.H=d===null||d.memoizedState===null?az:uT),l}function lb(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Yg(l);if(l.$$typeof===I)return Br(l)}throw Error(r(438,String(l)))}function JE(l){var d=null,p=ft.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var y=ft.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(d={data:y.data.map(function(E){return E.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=ob(),ft.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),y=0;y<l;y++)p[y]=M;return d.index++,p}function Uo(l,d){return typeof d=="function"?d(l):d}function cb(l){var d=Un();return eT(d,Yt,l)}function eT(l,d,p){var y=l.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=p;var E=l.baseQueue,k=y.pending;if(k!==null){if(E!==null){var B=E.next;E.next=k.next,k.next=B}d.baseQueue=E=k,y.pending=null}if(k=l.baseState,E===null)l.memoizedState=k;else{d=E.next;var q=B=null,re=null,me=d,Ee=!1;do{var Ce=me.lane&-536870913;if(Ce!==me.lane?(Tt&Ce)===Ce:($o&Ce)===Ce){var ye=me.revertLane;if(ye===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),Ce===Vf&&(Ee=!0);else if(($o&ye)===ye){me=me.next,ye===Vf&&(Ee=!0);continue}else Ce={lane:0,revertLane:me.revertLane,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},re===null?(q=re=Ce,B=k):re=re.next=Ce,ft.lanes|=ye,uc|=ye;Ce=me.action,Gu&&p(k,Ce),k=me.hasEagerState?me.eagerState:p(k,Ce)}else ye={lane:Ce,revertLane:me.revertLane,gesture:me.gesture,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},re===null?(q=re=ye,B=k):re=re.next=ye,ft.lanes|=Ce,uc|=Ce;me=me.next}while(me!==null&&me!==d);if(re===null?B=k:re.next=q,!Xi(k,l.memoizedState)&&(Jn=!0,Ee&&(p=Bf,p!==null)))throw p;l.memoizedState=k,l.baseState=B,l.baseQueue=re,y.lastRenderedState=k}return E===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function tT(l){var d=Un(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var y=p.dispatch,E=p.pending,k=d.memoizedState;if(E!==null){p.pending=null;var B=E=E.next;do k=l(k,B.action),B=B.next;while(B!==E);Xi(k,d.memoizedState)||(Jn=!0),d.memoizedState=k,d.baseQueue===null&&(d.baseState=k),p.lastRenderedState=k}return[k,y]}function Tj(l,d,p){var y=ft,E=Un(),k=It;if(k){if(p===void 0)throw Error(r(407));p=p()}else p=d();var B=!Xi((Yt||E).memoizedState,p);if(B&&(E.memoizedState=p,Jn=!0),E=E.queue,iT(Cj.bind(null,y,E,l),[l]),E.getSnapshot!==d||B||Zn!==null&&Zn.memoizedState.tag&1){if(y.flags|=2048,Hf(9,{destroy:void 0},kj.bind(null,y,E,p,d),null),rn===null)throw Error(r(349));k||($o&127)!==0||Aj(y,d,p)}return p}function Aj(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=ft.updateQueue,d===null?(d=ob(),ft.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function kj(l,d,p,y){d.value=p,d.getSnapshot=y,Ij(d)&&Nj(l)}function Cj(l,d,p){return p(function(){Ij(d)&&Nj(l)})}function Ij(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Xi(l,p)}catch{return!0}}function Nj(l){var d=ju(l,2);d!==null&&Pi(d,l,2)}function nT(l){var d=di();if(typeof l=="function"){var p=l;if(l=p(),Gu){Yr(!0);try{p()}finally{Yr(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:l},d}function Pj(l,d,p,y){return l.baseState=p,eT(l,Yt,typeof y=="function"?y:Uo)}function Mte(l,d,p,y,E){if(fb(l))throw Error(r(485));if(l=d.action,l!==null){var k={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){k.listeners.push(B)}};G.T!==null?p(!0):k.isTransition=!1,y(k),p=d.pending,p===null?(k.next=d.pending=k,Oj(d,k)):(k.next=p.next,d.pending=p.next=k)}}function Oj(l,d){var p=d.action,y=d.payload,E=l.state;if(d.isTransition){var k=G.T,B={};G.T=B;try{var q=p(E,y),re=G.S;re!==null&&re(B,q),Dj(l,d,q)}catch(me){rT(l,d,me)}finally{k!==null&&B.types!==null&&(k.types=B.types),G.T=k}}else try{k=p(E,y),Dj(l,d,k)}catch(me){rT(l,d,me)}}function Dj(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){Rj(l,d,y)},function(y){return rT(l,d,y)}):Rj(l,d,p)}function Rj(l,d,p){d.status="fulfilled",d.value=p,Mj(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,Oj(l,p)))}function rT(l,d,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do d.status="rejected",d.reason=p,Mj(d),d=d.next;while(d!==y)}l.action=null}function Mj(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function jj(l,d){return d}function zj(l,d){if(It){var p=rn.formState;if(p!==null){e:{var y=ft;if(It){if(un){t:{for(var E=un,k=Aa;E.nodeType!==8;){if(!k){E=null;break t}if(E=Ca(E.nextSibling),E===null){E=null;break t}}k=E.data,E=k==="F!"||k==="F"?E:null}if(E){un=Ca(E.nextSibling),y=E.data==="F!";break e}}tc(y)}y=!1}y&&(d=p[0])}}return p=di(),p.memoizedState=p.baseState=d,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jj,lastRenderedState:d},p.queue=y,p=nz.bind(null,ft,y),y.dispatch=p,y=nT(!1),k=cT.bind(null,ft,!1,y.queue),y=di(),E={state:d,dispatch:null,action:l,pending:null},y.queue=E,p=Mte.bind(null,ft,E,k,p),E.dispatch=p,y.memoizedState=l,[d,p,!1]}function Lj(l){var d=Un();return Vj(d,Yt,l)}function Vj(l,d,p){if(d=eT(l,d,jj)[0],l=cb(Uo)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var y=Yg(d)}catch(B){throw B===Ff?Jy:B}else y=d;d=Un();var E=d.queue,k=E.dispatch;return p!==d.memoizedState&&(ft.flags|=2048,Hf(9,{destroy:void 0},jte.bind(null,E,p),null)),[y,k,l]}function jte(l,d){l.action=d}function Bj(l){var d=Un(),p=Yt;if(p!==null)return Vj(d,p,l);Un(),d=d.memoizedState,p=Un();var y=p.queue.dispatch;return p.memoizedState=l,[d,y,!1]}function Hf(l,d,p,y){return l={tag:l,create:p,deps:y,inst:d,next:null},d=ft.updateQueue,d===null&&(d=ob(),ft.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,d.lastEffect=l),l}function Fj(){return Un().memoizedState}function ub(l,d,p,y){var E=di();ft.flags|=l,E.memoizedState=Hf(1|d,{destroy:void 0},p,y===void 0?null:y)}function db(l,d,p,y){var E=Un();y=y===void 0?null:y;var k=E.memoizedState.inst;Yt!==null&&y!==null&&WE(y,Yt.memoizedState.deps)?E.memoizedState=Hf(d,k,p,y):(ft.flags|=l,E.memoizedState=Hf(1|d,k,p,y))}function $j(l,d){ub(8390656,8,l,d)}function iT(l,d){db(2048,8,l,d)}function zte(l){ft.flags|=4;var d=ft.updateQueue;if(d===null)d=ob(),ft.updateQueue=d,d.events=[l];else{var p=d.events;p===null?d.events=[l]:p.push(l)}}function Uj(l){var d=Un().memoizedState;return zte({ref:d,nextImpl:l}),function(){if((jt&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function qj(l,d){return db(4,2,l,d)}function Gj(l,d){return db(4,4,l,d)}function Hj(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function Kj(l,d,p){p=p!=null?p.concat([l]):null,db(4,4,Hj.bind(null,d,l),p)}function aT(){}function Wj(l,d){var p=Un();d=d===void 0?null:d;var y=p.memoizedState;return d!==null&&WE(d,y[1])?y[0]:(p.memoizedState=[l,d],l)}function Yj(l,d){var p=Un();d=d===void 0?null:d;var y=p.memoizedState;if(d!==null&&WE(d,y[1]))return y[0];if(y=l(),Gu){Yr(!0);try{l()}finally{Yr(!1)}}return p.memoizedState=[y,d],y}function sT(l,d,p){return p===void 0||($o&1073741824)!==0&&(Tt&261930)===0?l.memoizedState=d:(l.memoizedState=p,l=Xz(),ft.lanes|=l,uc|=l,p)}function Xj(l,d,p,y){return Xi(p,d)?p:Uf.current!==null?(l=sT(l,p,y),Xi(l,d)||(Jn=!0),l):($o&42)===0||($o&1073741824)!==0&&(Tt&261930)===0?(Jn=!0,l.memoizedState=p):(l=Xz(),ft.lanes|=l,uc|=l,d)}function Qj(l,d,p,y,E){var k=X.p;X.p=k!==0&&8>k?k:8;var B=G.T,q={};G.T=q,cT(l,!1,d,p);try{var re=E(),me=G.S;if(me!==null&&me(q,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var Ee=Ote(re,y);Xg(l,d,Ee,na(l))}else Xg(l,d,y,na(l))}catch(Ce){Xg(l,d,{then:function(){},status:"rejected",reason:Ce},na())}finally{X.p=k,B!==null&&q.types!==null&&(B.types=q.types),G.T=B}}function Lte(){}function oT(l,d,p,y){if(l.tag!==5)throw Error(r(476));var E=Zj(l).queue;Qj(l,E,d,J,p===null?Lte:function(){return Jj(l),p(y)})}function Zj(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:J},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function Jj(l){var d=Zj(l);d.next===null&&(d=l.alternate.memoizedState),Xg(l,d.next.queue,{},na())}function lT(){return Br(hm)}function ez(){return Un().memoizedState}function tz(){return Un().memoizedState}function Vte(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=na();l=ic(p);var y=ac(d,l,p);y!==null&&(Pi(y,d,p),Gg(y,d,p)),d={cache:zE()},l.payload=d;return}d=d.return}}function Bte(l,d,p){var y=na();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},fb(l)?rz(d,p):(p=AE(l,d,p,y),p!==null&&(Pi(p,l,y),iz(p,d,y)))}function nz(l,d,p){var y=na();Xg(l,d,p,y)}function Xg(l,d,p,y){var E={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(fb(l))rz(d,E);else{var k=l.alternate;if(l.lanes===0&&(k===null||k.lanes===0)&&(k=d.lastRenderedReducer,k!==null))try{var B=d.lastRenderedState,q=k(B,p);if(E.hasEagerState=!0,E.eagerState=q,Xi(q,B))return Hy(l,d,E,0),rn===null&&Gy(),!1}catch{}if(p=AE(l,d,E,y),p!==null)return Pi(p,l,y),iz(p,d,y),!0}return!1}function cT(l,d,p,y){if(y={lane:2,revertLane:FT(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},fb(l)){if(d)throw Error(r(479))}else d=AE(l,p,y,2),d!==null&&Pi(d,l,2)}function fb(l){var d=l.alternate;return l===ft||d!==null&&d===ft}function rz(l,d){qf=ab=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function iz(l,d,p){if((p&4194048)!==0){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,yg(l,p)}}var Qg={readContext:Br,use:lb,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn};Qg.useEffectEvent=Pn;var az={readContext:Br,use:lb,useCallback:function(l,d){return di().memoizedState=[l,d===void 0?null:d],l},useContext:Br,useEffect:$j,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,ub(4194308,4,Hj.bind(null,d,l),p)},useLayoutEffect:function(l,d){return ub(4194308,4,l,d)},useInsertionEffect:function(l,d){ub(4,2,l,d)},useMemo:function(l,d){var p=di();d=d===void 0?null:d;var y=l();if(Gu){Yr(!0);try{l()}finally{Yr(!1)}}return p.memoizedState=[y,d],y},useReducer:function(l,d,p){var y=di();if(p!==void 0){var E=p(d);if(Gu){Yr(!0);try{p(d)}finally{Yr(!1)}}}else E=d;return y.memoizedState=y.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},y.queue=l,l=l.dispatch=Bte.bind(null,ft,l),[y.memoizedState,l]},useRef:function(l){var d=di();return l={current:l},d.memoizedState=l},useState:function(l){l=nT(l);var d=l.queue,p=nz.bind(null,ft,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:aT,useDeferredValue:function(l,d){var p=di();return sT(p,l,d)},useTransition:function(){var l=nT(!1);return l=Qj.bind(null,ft,l.queue,!0,!1),di().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var y=ft,E=di();if(It){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),rn===null)throw Error(r(349));(Tt&127)!==0||Aj(y,d,p)}E.memoizedState=p;var k={value:p,getSnapshot:d};return E.queue=k,$j(Cj.bind(null,y,k,l),[l]),y.flags|=2048,Hf(9,{destroy:void 0},kj.bind(null,y,k,p,d),null),p},useId:function(){var l=di(),d=rn.identifierPrefix;if(It){var p=Ws,y=Ks;p=(y&~(1<<32-_n(y)-1)).toString(32)+p,d="_"+d+"R_"+p,p=sb++,0<p&&(d+="H"+p.toString(32)),d+="_"}else p=Dte++,d="_"+d+"r_"+p.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:lT,useFormState:zj,useActionState:zj,useOptimistic:function(l){var d=di();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=cT.bind(null,ft,!0,p),p.dispatch=d,[l,d]},useMemoCache:JE,useCacheRefresh:function(){return di().memoizedState=Vte.bind(null,ft)},useEffectEvent:function(l){var d=di(),p={impl:l};return d.memoizedState=p,function(){if((jt&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},uT={readContext:Br,use:lb,useCallback:Wj,useContext:Br,useEffect:iT,useImperativeHandle:Kj,useInsertionEffect:qj,useLayoutEffect:Gj,useMemo:Yj,useReducer:cb,useRef:Fj,useState:function(){return cb(Uo)},useDebugValue:aT,useDeferredValue:function(l,d){var p=Un();return Xj(p,Yt.memoizedState,l,d)},useTransition:function(){var l=cb(Uo)[0],d=Un().memoizedState;return[typeof l=="boolean"?l:Yg(l),d]},useSyncExternalStore:Tj,useId:ez,useHostTransitionStatus:lT,useFormState:Lj,useActionState:Lj,useOptimistic:function(l,d){var p=Un();return Pj(p,Yt,l,d)},useMemoCache:JE,useCacheRefresh:tz};uT.useEffectEvent=Uj;var sz={readContext:Br,use:lb,useCallback:Wj,useContext:Br,useEffect:iT,useImperativeHandle:Kj,useInsertionEffect:qj,useLayoutEffect:Gj,useMemo:Yj,useReducer:tT,useRef:Fj,useState:function(){return tT(Uo)},useDebugValue:aT,useDeferredValue:function(l,d){var p=Un();return Yt===null?sT(p,l,d):Xj(p,Yt.memoizedState,l,d)},useTransition:function(){var l=tT(Uo)[0],d=Un().memoizedState;return[typeof l=="boolean"?l:Yg(l),d]},useSyncExternalStore:Tj,useId:ez,useHostTransitionStatus:lT,useFormState:Bj,useActionState:Bj,useOptimistic:function(l,d){var p=Un();return Yt!==null?Pj(p,Yt,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:JE,useCacheRefresh:tz};sz.useEffectEvent=Uj;function dT(l,d,p,y){d=l.memoizedState,p=p(y,d),p=p==null?d:h({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var fT={enqueueSetState:function(l,d,p){l=l._reactInternals;var y=na(),E=ic(y);E.payload=d,p!=null&&(E.callback=p),d=ac(l,E,y),d!==null&&(Pi(d,l,y),Gg(d,l,y))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var y=na(),E=ic(y);E.tag=1,E.payload=d,p!=null&&(E.callback=p),d=ac(l,E,y),d!==null&&(Pi(d,l,y),Gg(d,l,y))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=na(),y=ic(p);y.tag=2,d!=null&&(y.callback=d),d=ac(l,y,p),d!==null&&(Pi(d,l,p),Gg(d,l,p))}};function oz(l,d,p,y,E,k,B){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,k,B):d.prototype&&d.prototype.isPureReactComponent?!zg(p,y)||!zg(E,k):!0}function lz(l,d,p,y){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,y),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,y),d.state!==l&&fT.enqueueReplaceState(d,d.state,null)}function Hu(l,d){var p=d;if("ref"in d){p={};for(var y in d)y!=="ref"&&(p[y]=d[y])}if(l=l.defaultProps){p===d&&(p=h({},p));for(var E in l)p[E]===void 0&&(p[E]=l[E])}return p}function cz(l){qy(l)}function uz(l){console.error(l)}function dz(l){qy(l)}function hb(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(y){setTimeout(function(){throw y})}}function fz(l,d,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function hT(l,d,p){return p=ic(p),p.tag=3,p.payload={element:null},p.callback=function(){hb(l,d)},p}function hz(l){return l=ic(l),l.tag=3,l}function pz(l,d,p,y){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var k=y.value;l.payload=function(){return E(k)},l.callback=function(){fz(d,p,y)}}var B=p.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(l.callback=function(){fz(d,p,y),typeof E!="function"&&(dc===null?dc=new Set([this]):dc.add(this));var q=y.stack;this.componentDidCatch(y.value,{componentStack:q!==null?q:""})})}function Fte(l,d,p,y,E){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(d=p.alternate,d!==null&&Lf(d,p,E,!0),p=Zi.current,p!==null){switch(p.tag){case 31:case 13:return ka===null?Tb():p.alternate===null&&On===0&&(On=3),p.flags&=-257,p.flags|=65536,p.lanes=E,y===eb?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([y]):d.add(y),LT(l,y,E)),!1;case 22:return p.flags|=65536,y===eb?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([y]):p.add(y)),LT(l,y,E)),!1}throw Error(r(435,p.tag))}return LT(l,y,E),Tb(),!1}if(It)return d=Zi.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=E,y!==OE&&(l=Error(r(422),{cause:y}),Bg(_a(l,p)))):(y!==OE&&(d=Error(r(423),{cause:y}),Bg(_a(d,p))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,y=_a(y,p),E=hT(l.stateNode,y,E),UE(l,E),On!==4&&(On=2)),!1;var k=Error(r(520),{cause:y});if(k=_a(k,p),am===null?am=[k]:am.push(k),On!==4&&(On=2),d===null)return!0;y=_a(y,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=E&-E,p.lanes|=l,l=hT(p.stateNode,y,l),UE(p,l),!1;case 1:if(d=p.type,k=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(dc===null||!dc.has(k))))return p.flags|=65536,E&=-E,p.lanes|=E,E=hz(E),pz(E,l,p,y),UE(p,E),!1}p=p.return}while(p!==null);return!1}var pT=Error(r(461)),Jn=!1;function Fr(l,d,p,y){d.child=l===null?yj(d,null,p,y):qu(d,l.child,p,y)}function gz(l,d,p,y,E){p=p.render;var k=d.ref;if("ref"in y){var B={};for(var q in y)q!=="ref"&&(B[q]=y[q])}else B=y;return Bu(d),y=YE(l,d,p,B,k,E),q=XE(),l!==null&&!Jn?(QE(l,d,E),qo(l,d,E)):(It&&q&&NE(d),d.flags|=1,Fr(l,d,y,E),d.child)}function mz(l,d,p,y,E){if(l===null){var k=p.type;return typeof k=="function"&&!kE(k)&&k.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=k,vz(l,d,k,y,E)):(l=Wy(p.type,null,y,d,d.mode,E),l.ref=d.ref,l.return=d,d.child=l)}if(k=l.child,!ST(l,E)){var B=k.memoizedProps;if(p=p.compare,p=p!==null?p:zg,p(B,y)&&l.ref===d.ref)return qo(l,d,E)}return d.flags|=1,l=Lo(k,y),l.ref=d.ref,l.return=d,d.child=l}function vz(l,d,p,y,E){if(l!==null){var k=l.memoizedProps;if(zg(k,y)&&l.ref===d.ref)if(Jn=!1,d.pendingProps=y=k,ST(l,E))(l.flags&131072)!==0&&(Jn=!0);else return d.lanes=l.lanes,qo(l,d,E)}return gT(l,d,p,y,E)}function yz(l,d,p,y){var E=y.children,k=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((d.flags&128)!==0){if(k=k!==null?k.baseLanes|p:p,l!==null){for(y=d.child=l.child,E=0;y!==null;)E=E|y.lanes|y.childLanes,y=y.sibling;y=E&~k}else y=0,d.child=null;return bz(l,d,k,p,y)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Zy(d,k!==null?k.cachePool:null),k!==null?wj(d,k):GE(),Sj(d);else return y=d.lanes=536870912,bz(l,d,k!==null?k.baseLanes|p:p,p,y)}else k!==null?(Zy(d,k.cachePool),wj(d,k),oc(),d.memoizedState=null):(l!==null&&Zy(d,null),GE(),oc());return Fr(l,d,E,p),d.child}function Zg(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function bz(l,d,p,y,E){var k=VE();return k=k===null?null:{parent:Qn._currentValue,pool:k},d.memoizedState={baseLanes:p,cachePool:k},l!==null&&Zy(d,null),GE(),Sj(d),l!==null&&Lf(l,d,y,!0),d.childLanes=E,null}function pb(l,d){return d=mb({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function xz(l,d,p){return qu(d,l.child,null,p),l=pb(d,d.pendingProps),l.flags|=2,Ji(d),d.memoizedState=null,l}function $te(l,d,p){var y=d.pendingProps,E=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(It){if(y.mode==="hidden")return l=pb(d,y),d.lanes=536870912,Zg(null,l);if(KE(d),(l=un)?(l=O4(l,Aa),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Jl!==null?{id:Ks,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},p=rj(l),p.return=d,d.child=p,Vr=d,un=null)):l=null,l===null)throw tc(d);return d.lanes=536870912,null}return pb(d,y)}var k=l.memoizedState;if(k!==null){var B=k.dehydrated;if(KE(d),E)if(d.flags&256)d.flags&=-257,d=xz(l,d,p);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(r(558));else if(Jn||Lf(l,d,p,!1),E=(p&l.childLanes)!==0,Jn||E){if(y=rn,y!==null&&(B=bg(y,p),B!==0&&B!==k.retryLane))throw k.retryLane=B,ju(l,B),Pi(y,l,B),pT;Tb(),d=xz(l,d,p)}else l=k.treeContext,un=Ca(B.nextSibling),Vr=d,It=!0,ec=null,Aa=!1,l!==null&&sj(d,l),d=pb(d,y),d.flags|=4096;return d}return l=Lo(l.child,{mode:y.mode,children:y.children}),l.ref=d.ref,d.child=l,l.return=d,l}function gb(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function gT(l,d,p,y,E){return Bu(d),p=YE(l,d,p,y,void 0,E),y=XE(),l!==null&&!Jn?(QE(l,d,E),qo(l,d,E)):(It&&y&&NE(d),d.flags|=1,Fr(l,d,p,E),d.child)}function wz(l,d,p,y,E,k){return Bu(d),d.updateQueue=null,p=Ej(d,y,p,E),_j(l),y=XE(),l!==null&&!Jn?(QE(l,d,k),qo(l,d,k)):(It&&y&&NE(d),d.flags|=1,Fr(l,d,p,k),d.child)}function Sz(l,d,p,y,E){if(Bu(d),d.stateNode===null){var k=Rf,B=p.contextType;typeof B=="object"&&B!==null&&(k=Br(B)),k=new p(y,k),d.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=fT,d.stateNode=k,k._reactInternals=d,k=d.stateNode,k.props=y,k.state=d.memoizedState,k.refs={},FE(d),B=p.contextType,k.context=typeof B=="object"&&B!==null?Br(B):Rf,k.state=d.memoizedState,B=p.getDerivedStateFromProps,typeof B=="function"&&(dT(d,p,B,y),k.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(B=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),B!==k.state&&fT.enqueueReplaceState(k,k.state,null),Kg(d,y,k,E),Hg(),k.state=d.memoizedState),typeof k.componentDidMount=="function"&&(d.flags|=4194308),y=!0}else if(l===null){k=d.stateNode;var q=d.memoizedProps,re=Hu(p,q);k.props=re;var me=k.context,Ee=p.contextType;B=Rf,typeof Ee=="object"&&Ee!==null&&(B=Br(Ee));var Ce=p.getDerivedStateFromProps;Ee=typeof Ce=="function"||typeof k.getSnapshotBeforeUpdate=="function",q=d.pendingProps!==q,Ee||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(q||me!==B)&&lz(d,k,y,B),rc=!1;var ye=d.memoizedState;k.state=ye,Kg(d,y,k,E),Hg(),me=d.memoizedState,q||ye!==me||rc?(typeof Ce=="function"&&(dT(d,p,Ce,y),me=d.memoizedState),(re=rc||oz(d,p,re,y,ye,me,B))?(Ee||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(d.flags|=4194308)):(typeof k.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=y,d.memoizedState=me),k.props=y,k.state=me,k.context=B,y=re):(typeof k.componentDidMount=="function"&&(d.flags|=4194308),y=!1)}else{k=d.stateNode,$E(l,d),B=d.memoizedProps,Ee=Hu(p,B),k.props=Ee,Ce=d.pendingProps,ye=k.context,me=p.contextType,re=Rf,typeof me=="object"&&me!==null&&(re=Br(me)),q=p.getDerivedStateFromProps,(me=typeof q=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(B!==Ce||ye!==re)&&lz(d,k,y,re),rc=!1,ye=d.memoizedState,k.state=ye,Kg(d,y,k,E),Hg();var we=d.memoizedState;B!==Ce||ye!==we||rc||l!==null&&l.dependencies!==null&&Xy(l.dependencies)?(typeof q=="function"&&(dT(d,p,q,y),we=d.memoizedState),(Ee=rc||oz(d,p,Ee,y,ye,we,re)||l!==null&&l.dependencies!==null&&Xy(l.dependencies))?(me||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(y,we,re),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(y,we,re)),typeof k.componentDidUpdate=="function"&&(d.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof k.componentDidUpdate!="function"||B===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||B===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),d.memoizedProps=y,d.memoizedState=we),k.props=y,k.state=we,k.context=re,y=Ee):(typeof k.componentDidUpdate!="function"||B===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||B===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),y=!1)}return k=y,gb(l,d),y=(d.flags&128)!==0,k||y?(k=d.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:k.render(),d.flags|=1,l!==null&&y?(d.child=qu(d,l.child,null,E),d.child=qu(d,null,p,E)):Fr(l,d,p,E),d.memoizedState=k.state,l=d.child):l=qo(l,d,E),l}function _z(l,d,p,y){return Lu(),d.flags|=256,Fr(l,d,p,y),d.child}var mT={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vT(l){return{baseLanes:l,cachePool:fj()}}function yT(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=ta),l}function Ez(l,d,p){var y=d.pendingProps,E=!1,k=(d.flags&128)!==0,B;if((B=k)||(B=l!==null&&l.memoizedState===null?!1:($n.current&2)!==0),B&&(E=!0,d.flags&=-129),B=(d.flags&32)!==0,d.flags&=-33,l===null){if(It){if(E?sc(d):oc(),(l=un)?(l=O4(l,Aa),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Jl!==null?{id:Ks,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},p=rj(l),p.return=d,d.child=p,Vr=d,un=null)):l=null,l===null)throw tc(d);return eA(l)?d.lanes=32:d.lanes=536870912,null}var q=y.children;return y=y.fallback,E?(oc(),E=d.mode,q=mb({mode:"hidden",children:q},E),y=zu(y,E,p,null),q.return=d,y.return=d,q.sibling=y,d.child=q,y=d.child,y.memoizedState=vT(p),y.childLanes=yT(l,B,p),d.memoizedState=mT,Zg(null,y)):(sc(d),bT(d,q))}var re=l.memoizedState;if(re!==null&&(q=re.dehydrated,q!==null)){if(k)d.flags&256?(sc(d),d.flags&=-257,d=xT(l,d,p)):d.memoizedState!==null?(oc(),d.child=l.child,d.flags|=128,d=null):(oc(),q=y.fallback,E=d.mode,y=mb({mode:"visible",children:y.children},E),q=zu(q,E,p,null),q.flags|=2,y.return=d,q.return=d,y.sibling=q,d.child=y,qu(d,l.child,null,p),y=d.child,y.memoizedState=vT(p),y.childLanes=yT(l,B,p),d.memoizedState=mT,d=Zg(null,y));else if(sc(d),eA(q)){if(B=q.nextSibling&&q.nextSibling.dataset,B)var me=B.dgst;B=me,y=Error(r(419)),y.stack="",y.digest=B,Bg({value:y,source:null,stack:null}),d=xT(l,d,p)}else if(Jn||Lf(l,d,p,!1),B=(p&l.childLanes)!==0,Jn||B){if(B=rn,B!==null&&(y=bg(B,p),y!==0&&y!==re.retryLane))throw re.retryLane=y,ju(l,y),Pi(B,l,y),pT;JT(q)||Tb(),d=xT(l,d,p)}else JT(q)?(d.flags|=192,d.child=l.child,d=null):(l=re.treeContext,un=Ca(q.nextSibling),Vr=d,It=!0,ec=null,Aa=!1,l!==null&&sj(d,l),d=bT(d,y.children),d.flags|=4096);return d}return E?(oc(),q=y.fallback,E=d.mode,re=l.child,me=re.sibling,y=Lo(re,{mode:"hidden",children:y.children}),y.subtreeFlags=re.subtreeFlags&65011712,me!==null?q=Lo(me,q):(q=zu(q,E,p,null),q.flags|=2),q.return=d,y.return=d,y.sibling=q,d.child=y,Zg(null,y),y=d.child,q=l.child.memoizedState,q===null?q=vT(p):(E=q.cachePool,E!==null?(re=Qn._currentValue,E=E.parent!==re?{parent:re,pool:re}:E):E=fj(),q={baseLanes:q.baseLanes|p,cachePool:E}),y.memoizedState=q,y.childLanes=yT(l,B,p),d.memoizedState=mT,Zg(l.child,y)):(sc(d),p=l.child,l=p.sibling,p=Lo(p,{mode:"visible",children:y.children}),p.return=d,p.sibling=null,l!==null&&(B=d.deletions,B===null?(d.deletions=[l],d.flags|=16):B.push(l)),d.child=p,d.memoizedState=null,p)}function bT(l,d){return d=mb({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function mb(l,d){return l=Qi(22,l,null,d),l.lanes=0,l}function xT(l,d,p){return qu(d,l.child,null,p),l=bT(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function Tz(l,d,p){l.lanes|=d;var y=l.alternate;y!==null&&(y.lanes|=d),ME(l.return,d,p)}function wT(l,d,p,y,E,k){var B=l.memoizedState;B===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E,treeForkCount:k}:(B.isBackwards=d,B.rendering=null,B.renderingStartTime=0,B.last=y,B.tail=p,B.tailMode=E,B.treeForkCount=k)}function Az(l,d,p){var y=d.pendingProps,E=y.revealOrder,k=y.tail;y=y.children;var B=$n.current,q=(B&2)!==0;if(q?(B=B&1|2,d.flags|=128):B&=1,ee($n,B),Fr(l,d,y,p),y=It?Vg:0,!q&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Tz(l,p,d);else if(l.tag===19)Tz(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(E){case"forwards":for(p=d.child,E=null;p!==null;)l=p.alternate,l!==null&&ib(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=d.child,d.child=null):(E=p.sibling,p.sibling=null),wT(d,!1,E,p,k,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,E=d.child,d.child=null;E!==null;){if(l=E.alternate,l!==null&&ib(l)===null){d.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}wT(d,!0,p,null,k,y);break;case"together":wT(d,!1,null,null,void 0,y);break;default:d.memoizedState=null}return d.child}function qo(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),uc|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(Lf(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=Lo(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Lo(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function ST(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Xy(l)))}function Ute(l,d,p){switch(d.tag){case 3:Se(d,d.stateNode.containerInfo),nc(d,Qn,l.memoizedState.cache),Lu();break;case 27:case 5:Te(d);break;case 4:Se(d,d.stateNode.containerInfo);break;case 10:nc(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,KE(d),null;break;case 13:var y=d.memoizedState;if(y!==null)return y.dehydrated!==null?(sc(d),d.flags|=128,null):(p&d.child.childLanes)!==0?Ez(l,d,p):(sc(d),l=qo(l,d,p),l!==null?l.sibling:null);sc(d);break;case 19:var E=(l.flags&128)!==0;if(y=(p&d.childLanes)!==0,y||(Lf(l,d,p,!1),y=(p&d.childLanes)!==0),E){if(y)return Az(l,d,p);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),ee($n,$n.current),y)break;return null;case 22:return d.lanes=0,yz(l,d,p,d.pendingProps);case 24:nc(d,Qn,l.memoizedState.cache)}return qo(l,d,p)}function kz(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)Jn=!0;else{if(!ST(l,p)&&(d.flags&128)===0)return Jn=!1,Ute(l,d,p);Jn=(l.flags&131072)!==0}else Jn=!1,It&&(d.flags&1048576)!==0&&aj(d,Vg,d.index);switch(d.lanes=0,d.tag){case 16:e:{var y=d.pendingProps;if(l=$u(d.elementType),d.type=l,typeof l=="function")kE(l)?(y=Hu(l,y),d.tag=1,d=Sz(null,d,l,y,p)):(d.tag=0,d=gT(null,d,l,y,p));else{if(l!=null){var E=l.$$typeof;if(E===P){d.tag=11,d=gz(null,d,l,y,p);break e}else if(E===N){d.tag=14,d=mz(null,d,l,y,p);break e}}throw d=K(l)||l,Error(r(306,d,""))}}return d;case 0:return gT(l,d,d.type,d.pendingProps,p);case 1:return y=d.type,E=Hu(y,d.pendingProps),Sz(l,d,y,E,p);case 3:e:{if(Se(d,d.stateNode.containerInfo),l===null)throw Error(r(387));y=d.pendingProps;var k=d.memoizedState;E=k.element,$E(l,d),Kg(d,y,null,p);var B=d.memoizedState;if(y=B.cache,nc(d,Qn,y),y!==k.cache&&jE(d,[Qn],p,!0),Hg(),y=B.element,k.isDehydrated)if(k={element:y,isDehydrated:!1,cache:B.cache},d.updateQueue.baseState=k,d.memoizedState=k,d.flags&256){d=_z(l,d,y,p);break e}else if(y!==E){E=_a(Error(r(424)),d),Bg(E),d=_z(l,d,y,p);break e}else for(l=d.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,un=Ca(l.firstChild),Vr=d,It=!0,ec=null,Aa=!0,p=yj(d,null,y,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Lu(),y===E){d=qo(l,d,p);break e}Fr(l,d,y,p)}d=d.child}return d;case 26:return gb(l,d),l===null?(p=L4(d.type,null,d.pendingProps,null))?d.memoizedState=p:It||(p=d.type,l=d.pendingProps,y=Ob(ie.current).createElement(p),y[Wn]=d,y[Ar]=l,$r(y,p,l),Yn(y),d.stateNode=y):d.memoizedState=L4(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Te(d),l===null&&It&&(y=d.stateNode=M4(d.type,d.pendingProps,ie.current),Vr=d,Aa=!0,E=un,gc(d.type)?(tA=E,un=Ca(y.firstChild)):un=E),Fr(l,d,d.pendingProps.children,p),gb(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&It&&((E=y=un)&&(y=bne(y,d.type,d.pendingProps,Aa),y!==null?(d.stateNode=y,Vr=d,un=Ca(y.firstChild),Aa=!1,E=!0):E=!1),E||tc(d)),Te(d),E=d.type,k=d.pendingProps,B=l!==null?l.memoizedProps:null,y=k.children,XT(E,k)?y=null:B!==null&&XT(E,B)&&(d.flags|=32),d.memoizedState!==null&&(E=YE(l,d,Rte,null,null,p),hm._currentValue=E),gb(l,d),Fr(l,d,y,p),d.child;case 6:return l===null&&It&&((l=p=un)&&(p=xne(p,d.pendingProps,Aa),p!==null?(d.stateNode=p,Vr=d,un=null,l=!0):l=!1),l||tc(d)),null;case 13:return Ez(l,d,p);case 4:return Se(d,d.stateNode.containerInfo),y=d.pendingProps,l===null?d.child=qu(d,null,y,p):Fr(l,d,y,p),d.child;case 11:return gz(l,d,d.type,d.pendingProps,p);case 7:return Fr(l,d,d.pendingProps,p),d.child;case 8:return Fr(l,d,d.pendingProps.children,p),d.child;case 12:return Fr(l,d,d.pendingProps.children,p),d.child;case 10:return y=d.pendingProps,nc(d,d.type,y.value),Fr(l,d,y.children,p),d.child;case 9:return E=d.type._context,y=d.pendingProps.children,Bu(d),E=Br(E),y=y(E),d.flags|=1,Fr(l,d,y,p),d.child;case 14:return mz(l,d,d.type,d.pendingProps,p);case 15:return vz(l,d,d.type,d.pendingProps,p);case 19:return Az(l,d,p);case 31:return $te(l,d,p);case 22:return yz(l,d,p,d.pendingProps);case 24:return Bu(d),y=Br(Qn),l===null?(E=VE(),E===null&&(E=rn,k=zE(),E.pooledCache=k,k.refCount++,k!==null&&(E.pooledCacheLanes|=p),E=k),d.memoizedState={parent:y,cache:E},FE(d),nc(d,Qn,E)):((l.lanes&p)!==0&&($E(l,d),Kg(d,null,null,p),Hg()),E=l.memoizedState,k=d.memoizedState,E.parent!==y?(E={parent:y,cache:y},d.memoizedState=E,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=E),nc(d,Qn,y)):(y=k.cache,nc(d,Qn,y),y!==E.cache&&jE(d,[Qn],p,!0))),Fr(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function Go(l){l.flags|=4}function _T(l,d,p,y,E){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(E&335544128)===E)if(l.stateNode.complete)l.flags|=8192;else if(e4())l.flags|=8192;else throw Uu=eb,BE}else l.flags&=-16777217}function Cz(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!U4(d))if(e4())l.flags|=8192;else throw Uu=eb,BE}function vb(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?_y():536870912,l.lanes|=d,Xf|=d)}function Jg(l,d){if(!It)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function dn(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(d)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=y,l.childLanes=p,d}function qte(l,d,p){var y=d.pendingProps;switch(PE(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(d),null;case 1:return dn(d),null;case 3:return p=d.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),d.memoizedState.cache!==y&&(d.flags|=2048),Fo(Qn),ae(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(zf(d)?Go(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,DE())),dn(d),null;case 26:var E=d.type,k=d.memoizedState;return l===null?(Go(d),k!==null?(dn(d),Cz(d,k)):(dn(d),_T(d,E,null,y,p))):k?k!==l.memoizedState?(Go(d),dn(d),Cz(d,k)):(dn(d),d.flags&=-16777217):(l=l.memoizedProps,l!==y&&Go(d),dn(d),_T(d,E,l,y,p)),null;case 27:if(he(d),p=ie.current,E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&Go(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return dn(d),null}l=W.current,zf(d)?oj(d):(l=M4(E,y,p),d.stateNode=l,Go(d))}return dn(d),null;case 5:if(he(d),E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&Go(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return dn(d),null}if(k=W.current,zf(d))oj(d);else{var B=Ob(ie.current);switch(k){case 1:k=B.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:k=B.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":k=B.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":k=B.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":k=B.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof y.is=="string"?B.createElement("select",{is:y.is}):B.createElement("select"),y.multiple?k.multiple=!0:y.size&&(k.size=y.size);break;default:k=typeof y.is=="string"?B.createElement(E,{is:y.is}):B.createElement(E)}}k[Wn]=d,k[Ar]=y;e:for(B=d.child;B!==null;){if(B.tag===5||B.tag===6)k.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===d)break e;for(;B.sibling===null;){if(B.return===null||B.return===d)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}d.stateNode=k;e:switch($r(k,E,y),E){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&Go(d)}}return dn(d),_T(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,p),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==y&&Go(d);else{if(typeof y!="string"&&d.stateNode===null)throw Error(r(166));if(l=ie.current,zf(d)){if(l=d.stateNode,p=d.memoizedProps,y=null,E=Vr,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}l[Wn]=d,l=!!(l.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||E4(l.nodeValue,p)),l||tc(d,!0)}else l=Ob(l).createTextNode(y),l[Wn]=d,d.stateNode=l}return dn(d),null;case 31:if(p=d.memoizedState,l===null||l.memoizedState!==null){if(y=zf(d),p!==null){if(l===null){if(!y)throw Error(r(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[Wn]=d}else Lu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;dn(d),l=!1}else p=DE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return d.flags&256?(Ji(d),d):(Ji(d),null);if((d.flags&128)!==0)throw Error(r(558))}return dn(d),null;case 13:if(y=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=zf(d),y!==null&&y.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[Wn]=d}else Lu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;dn(d),E=!1}else E=DE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return d.flags&256?(Ji(d),d):(Ji(d),null)}return Ji(d),(d.flags&128)!==0?(d.lanes=p,d):(p=y!==null,l=l!==null&&l.memoizedState!==null,p&&(y=d.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool),k=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(k=y.memoizedState.cachePool.pool),k!==E&&(y.flags|=2048)),p!==l&&p&&(d.child.flags|=8192),vb(d,d.updateQueue),dn(d),null);case 4:return ae(),l===null&&GT(d.stateNode.containerInfo),dn(d),null;case 10:return Fo(d.type),dn(d),null;case 19:if(Z($n),y=d.memoizedState,y===null)return dn(d),null;if(E=(d.flags&128)!==0,k=y.rendering,k===null)if(E)Jg(y,!1);else{if(On!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(k=ib(l),k!==null){for(d.flags|=128,Jg(y,!1),l=k.updateQueue,d.updateQueue=l,vb(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)nj(p,l),p=p.sibling;return ee($n,$n.current&1|2),It&&Vo(d,y.treeForkCount),d.child}l=l.sibling}y.tail!==null&&ct()>Sb&&(d.flags|=128,E=!0,Jg(y,!1),d.lanes=4194304)}else{if(!E)if(l=ib(k),l!==null){if(d.flags|=128,E=!0,l=l.updateQueue,d.updateQueue=l,vb(d,l),Jg(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!It)return dn(d),null}else 2*ct()-y.renderingStartTime>Sb&&p!==536870912&&(d.flags|=128,E=!0,Jg(y,!1),d.lanes=4194304);y.isBackwards?(k.sibling=d.child,d.child=k):(l=y.last,l!==null?l.sibling=k:d.child=k,y.last=k)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=ct(),l.sibling=null,p=$n.current,ee($n,E?p&1|2:p&1),It&&Vo(d,y.treeForkCount),l):(dn(d),null);case 22:case 23:return Ji(d),HE(),y=d.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(d.flags|=8192):y&&(d.flags|=8192),y?(p&536870912)!==0&&(d.flags&128)===0&&(dn(d),d.subtreeFlags&6&&(d.flags|=8192)):dn(d),p=d.updateQueue,p!==null&&vb(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==p&&(d.flags|=2048),l!==null&&Z(Fu),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),Fo(Qn),dn(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function Gte(l,d){switch(PE(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Fo(Qn),ae(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return he(d),null;case 31:if(d.memoizedState!==null){if(Ji(d),d.alternate===null)throw Error(r(340));Lu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(Ji(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Lu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return Z($n),null;case 4:return ae(),null;case 10:return Fo(d.type),null;case 22:case 23:return Ji(d),HE(),l!==null&&Z(Fu),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Fo(Qn),null;case 25:return null;default:return null}}function Iz(l,d){switch(PE(d),d.tag){case 3:Fo(Qn),ae();break;case 26:case 27:case 5:he(d);break;case 4:ae();break;case 31:d.memoizedState!==null&&Ji(d);break;case 13:Ji(d);break;case 19:Z($n);break;case 10:Fo(d.type);break;case 22:case 23:Ji(d),HE(),l!==null&&Z(Fu);break;case 24:Fo(Qn)}}function em(l,d){try{var p=d.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var E=y.next;p=E;do{if((p.tag&l)===l){y=void 0;var k=p.create,B=p.inst;y=k(),B.destroy=y}p=p.next}while(p!==E)}}catch(q){qt(d,d.return,q)}}function lc(l,d,p){try{var y=d.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var k=E.next;y=k;do{if((y.tag&l)===l){var B=y.inst,q=B.destroy;if(q!==void 0){B.destroy=void 0,E=d;var re=p,me=q;try{me()}catch(Ee){qt(E,re,Ee)}}}y=y.next}while(y!==k)}}catch(Ee){qt(d,d.return,Ee)}}function Nz(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{xj(d,p)}catch(y){qt(l,l.return,y)}}}function Pz(l,d,p){p.props=Hu(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){qt(l,d,y)}}function tm(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(E){qt(l,d,E)}}function Ys(l,d){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(E){qt(l,d,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){qt(l,d,E)}else p.current=null}function Oz(l){var d=l.type,p=l.memoizedProps,y=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(E){qt(l,l.return,E)}}function ET(l,d,p){try{var y=l.stateNode;hne(y,l.type,p,d),y[Ar]=d}catch(E){qt(l,l.return,E)}}function Dz(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&gc(l.type)||l.tag===4}function TT(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Dz(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&gc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function AT(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=es));else if(y!==4&&(y===27&&gc(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(AT(l,d,p),l=l.sibling;l!==null;)AT(l,d,p),l=l.sibling}function yb(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(y!==4&&(y===27&&gc(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(yb(l,d,p),l=l.sibling;l!==null;)yb(l,d,p),l=l.sibling}function Rz(l){var d=l.stateNode,p=l.memoizedProps;try{for(var y=l.type,E=d.attributes;E.length;)d.removeAttributeNode(E[0]);$r(d,y,p),d[Wn]=l,d[Ar]=p}catch(k){qt(l,l.return,k)}}var Ho=!1,er=!1,kT=!1,Mz=typeof WeakSet=="function"?WeakSet:Set,Cr=null;function Hte(l,d){if(l=l.containerInfo,WT=Vb,l=KM(l),xE(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,k=y.focusNode;y=y.focusOffset;try{p.nodeType,k.nodeType}catch{p=null;break e}var B=0,q=-1,re=-1,me=0,Ee=0,Ce=l,ye=null;t:for(;;){for(var we;Ce!==p||E!==0&&Ce.nodeType!==3||(q=B+E),Ce!==k||y!==0&&Ce.nodeType!==3||(re=B+y),Ce.nodeType===3&&(B+=Ce.nodeValue.length),(we=Ce.firstChild)!==null;)ye=Ce,Ce=we;for(;;){if(Ce===l)break t;if(ye===p&&++me===E&&(q=B),ye===k&&++Ee===y&&(re=B),(we=Ce.nextSibling)!==null)break;Ce=ye,ye=Ce.parentNode}Ce=we}p=q===-1||re===-1?null:{start:q,end:re}}else p=null}p=p||{start:0,end:0}}else p=null;for(YT={focusedElem:l,selectionRange:p},Vb=!1,Cr=d;Cr!==null;)if(d=Cr,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,Cr=l;else for(;Cr!==null;){switch(d=Cr,k=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)E=l[p],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&k!==null){l=void 0,p=d,E=k.memoizedProps,k=k.memoizedState,y=p.stateNode;try{var Ue=Hu(p.type,E);l=y.getSnapshotBeforeUpdate(Ue,k),y.__reactInternalSnapshotBeforeUpdate=l}catch(at){qt(p,p.return,at)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)ZT(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":ZT(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,Cr=l;break}Cr=d.return}}function jz(l,d,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Wo(l,p),y&4&&em(5,p);break;case 1:if(Wo(l,p),y&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(B){qt(p,p.return,B)}else{var E=Hu(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(E,d,l.__reactInternalSnapshotBeforeUpdate)}catch(B){qt(p,p.return,B)}}y&64&&Nz(p),y&512&&tm(p,p.return);break;case 3:if(Wo(l,p),y&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{xj(l,d)}catch(B){qt(p,p.return,B)}}break;case 27:d===null&&y&4&&Rz(p);case 26:case 5:Wo(l,p),d===null&&y&4&&Oz(p),y&512&&tm(p,p.return);break;case 12:Wo(l,p);break;case 31:Wo(l,p),y&4&&Vz(l,p);break;case 13:Wo(l,p),y&4&&Bz(l,p),y&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=tne.bind(null,p),wne(l,p))));break;case 22:if(y=p.memoizedState!==null||Ho,!y){d=d!==null&&d.memoizedState!==null||er,E=Ho;var k=er;Ho=y,(er=d)&&!k?Yo(l,p,(p.subtreeFlags&8772)!==0):Wo(l,p),Ho=E,er=k}break;case 30:break;default:Wo(l,p)}}function zz(l){var d=l.alternate;d!==null&&(l.alternate=null,zz(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&xf(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var vn=null,ki=!1;function Ko(l,d,p){for(p=p.child;p!==null;)Lz(l,d,p),p=p.sibling}function Lz(l,d,p){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(Kn,p)}catch{}switch(p.tag){case 26:er||Ys(p,d),Ko(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:er||Ys(p,d);var y=vn,E=ki;gc(p.type)&&(vn=p.stateNode,ki=!1),Ko(l,d,p),um(p.stateNode),vn=y,ki=E;break;case 5:er||Ys(p,d);case 6:if(y=vn,E=ki,vn=null,Ko(l,d,p),vn=y,ki=E,vn!==null)if(ki)try{(vn.nodeType===9?vn.body:vn.nodeName==="HTML"?vn.ownerDocument.body:vn).removeChild(p.stateNode)}catch(k){qt(p,d,k)}else try{vn.removeChild(p.stateNode)}catch(k){qt(p,d,k)}break;case 18:vn!==null&&(ki?(l=vn,N4(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),ih(l)):N4(vn,p.stateNode));break;case 4:y=vn,E=ki,vn=p.stateNode.containerInfo,ki=!0,Ko(l,d,p),vn=y,ki=E;break;case 0:case 11:case 14:case 15:lc(2,p,d),er||lc(4,p,d),Ko(l,d,p);break;case 1:er||(Ys(p,d),y=p.stateNode,typeof y.componentWillUnmount=="function"&&Pz(p,d,y)),Ko(l,d,p);break;case 21:Ko(l,d,p);break;case 22:er=(y=er)||p.memoizedState!==null,Ko(l,d,p),er=y;break;default:Ko(l,d,p)}}function Vz(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{ih(l)}catch(p){qt(d,d.return,p)}}}function Bz(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{ih(l)}catch(p){qt(d,d.return,p)}}function Kte(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new Mz),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new Mz),d;default:throw Error(r(435,l.tag))}}function bb(l,d){var p=Kte(l);d.forEach(function(y){if(!p.has(y)){p.add(y);var E=nne.bind(null,l,y);y.then(E,E)}})}function Ci(l,d){var p=d.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y],k=l,B=d,q=B;e:for(;q!==null;){switch(q.tag){case 27:if(gc(q.type)){vn=q.stateNode,ki=!1;break e}break;case 5:vn=q.stateNode,ki=!1;break e;case 3:case 4:vn=q.stateNode.containerInfo,ki=!0;break e}q=q.return}if(vn===null)throw Error(r(160));Lz(k,B,E),vn=null,ki=!1,k=E.alternate,k!==null&&(k.return=null),E.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)Fz(d,l),d=d.sibling}var ss=null;function Fz(l,d){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ci(d,l),Ii(l),y&4&&(lc(3,l,l.return),em(3,l),lc(5,l,l.return));break;case 1:Ci(d,l),Ii(l),y&512&&(er||p===null||Ys(p,p.return)),y&64&&Ho&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var E=ss;if(Ci(d,l),Ii(l),y&512&&(er||p===null||Ys(p,p.return)),y&4){var k=p!==null?p.memoizedState:null;if(y=l.memoizedState,p===null)if(y===null)if(l.stateNode===null){e:{y=l.type,p=l.memoizedProps,E=E.ownerDocument||E;t:switch(y){case"title":k=E.getElementsByTagName("title")[0],(!k||k[Ms]||k[Wn]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=E.createElement(y),E.head.insertBefore(k,E.querySelector("head > title"))),$r(k,y,p),k[Wn]=l,Yn(k),y=k;break e;case"link":var B=F4("link","href",E).get(y+(p.href||""));if(B){for(var q=0;q<B.length;q++)if(k=B[q],k.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&k.getAttribute("rel")===(p.rel==null?null:p.rel)&&k.getAttribute("title")===(p.title==null?null:p.title)&&k.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){B.splice(q,1);break t}}k=E.createElement(y),$r(k,y,p),E.head.appendChild(k);break;case"meta":if(B=F4("meta","content",E).get(y+(p.content||""))){for(q=0;q<B.length;q++)if(k=B[q],k.getAttribute("content")===(p.content==null?null:""+p.content)&&k.getAttribute("name")===(p.name==null?null:p.name)&&k.getAttribute("property")===(p.property==null?null:p.property)&&k.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&k.getAttribute("charset")===(p.charSet==null?null:p.charSet)){B.splice(q,1);break t}}k=E.createElement(y),$r(k,y,p),E.head.appendChild(k);break;default:throw Error(r(468,y))}k[Wn]=l,Yn(k),y=k}l.stateNode=y}else $4(E,l.type,l.stateNode);else l.stateNode=B4(E,y,l.memoizedProps);else k!==y?(k===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):k.count--,y===null?$4(E,l.type,l.stateNode):B4(E,y,l.memoizedProps)):y===null&&l.stateNode!==null&&ET(l,l.memoizedProps,p.memoizedProps)}break;case 27:Ci(d,l),Ii(l),y&512&&(er||p===null||Ys(p,p.return)),p!==null&&y&4&&ET(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Ci(d,l),Ii(l),y&512&&(er||p===null||Ys(p,p.return)),l.flags&32){E=l.stateNode;try{Ai(E,"")}catch(Ue){qt(l,l.return,Ue)}}y&4&&l.stateNode!=null&&(E=l.memoizedProps,ET(l,E,p!==null?p.memoizedProps:E)),y&1024&&(kT=!0);break;case 6:if(Ci(d,l),Ii(l),y&4){if(l.stateNode===null)throw Error(r(162));y=l.memoizedProps,p=l.stateNode;try{p.nodeValue=y}catch(Ue){qt(l,l.return,Ue)}}break;case 3:if(Mb=null,E=ss,ss=Db(d.containerInfo),Ci(d,l),ss=E,Ii(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{ih(d.containerInfo)}catch(Ue){qt(l,l.return,Ue)}kT&&(kT=!1,$z(l));break;case 4:y=ss,ss=Db(l.stateNode.containerInfo),Ci(d,l),Ii(l),ss=y;break;case 12:Ci(d,l),Ii(l);break;case 31:Ci(d,l),Ii(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,bb(l,y)));break;case 13:Ci(d,l),Ii(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(wb=ct()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,bb(l,y)));break;case 22:E=l.memoizedState!==null;var re=p!==null&&p.memoizedState!==null,me=Ho,Ee=er;if(Ho=me||E,er=Ee||re,Ci(d,l),er=Ee,Ho=me,Ii(l),y&8192)e:for(d=l.stateNode,d._visibility=E?d._visibility&-2:d._visibility|1,E&&(p===null||re||Ho||er||Ku(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){re=p=d;try{if(k=re.stateNode,E)B=k.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{q=re.stateNode;var Ce=re.memoizedProps.style,ye=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;q.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(Ue){qt(re,re.return,Ue)}}}else if(d.tag===6){if(p===null){re=d;try{re.stateNode.nodeValue=E?"":re.memoizedProps}catch(Ue){qt(re,re.return,Ue)}}}else if(d.tag===18){if(p===null){re=d;try{var we=re.stateNode;E?P4(we,!0):P4(re.stateNode,!1)}catch(Ue){qt(re,re.return,Ue)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,bb(l,p))));break;case 19:Ci(d,l),Ii(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,bb(l,y)));break;case 30:break;case 21:break;default:Ci(d,l),Ii(l)}}function Ii(l){var d=l.flags;if(d&2){try{for(var p,y=l.return;y!==null;){if(Dz(y)){p=y;break}y=y.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var E=p.stateNode,k=TT(l);yb(l,k,E);break;case 5:var B=p.stateNode;p.flags&32&&(Ai(B,""),p.flags&=-33);var q=TT(l);yb(l,q,B);break;case 3:case 4:var re=p.stateNode.containerInfo,me=TT(l);AT(l,me,re);break;default:throw Error(r(161))}}catch(Ee){qt(l,l.return,Ee)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function $z(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;$z(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Wo(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)jz(l,d.alternate,d),d=d.sibling}function Ku(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:lc(4,d,d.return),Ku(d);break;case 1:Ys(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&Pz(d,d.return,p),Ku(d);break;case 27:um(d.stateNode);case 26:case 5:Ys(d,d.return),Ku(d);break;case 22:d.memoizedState===null&&Ku(d);break;case 30:Ku(d);break;default:Ku(d)}l=l.sibling}}function Yo(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var y=d.alternate,E=l,k=d,B=k.flags;switch(k.tag){case 0:case 11:case 15:Yo(E,k,p),em(4,k);break;case 1:if(Yo(E,k,p),y=k,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(me){qt(y,y.return,me)}if(y=k,E=y.updateQueue,E!==null){var q=y.stateNode;try{var re=E.shared.hiddenCallbacks;if(re!==null)for(E.shared.hiddenCallbacks=null,E=0;E<re.length;E++)bj(re[E],q)}catch(me){qt(y,y.return,me)}}p&&B&64&&Nz(k),tm(k,k.return);break;case 27:Rz(k);case 26:case 5:Yo(E,k,p),p&&y===null&&B&4&&Oz(k),tm(k,k.return);break;case 12:Yo(E,k,p);break;case 31:Yo(E,k,p),p&&B&4&&Vz(E,k);break;case 13:Yo(E,k,p),p&&B&4&&Bz(E,k);break;case 22:k.memoizedState===null&&Yo(E,k,p),tm(k,k.return);break;case 30:break;default:Yo(E,k,p)}d=d.sibling}}function CT(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Fg(p))}function IT(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Fg(l))}function os(l,d,p,y){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Uz(l,d,p,y),d=d.sibling}function Uz(l,d,p,y){var E=d.flags;switch(d.tag){case 0:case 11:case 15:os(l,d,p,y),E&2048&&em(9,d);break;case 1:os(l,d,p,y);break;case 3:os(l,d,p,y),E&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Fg(l)));break;case 12:if(E&2048){os(l,d,p,y),l=d.stateNode;try{var k=d.memoizedProps,B=k.id,q=k.onPostCommit;typeof q=="function"&&q(B,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(re){qt(d,d.return,re)}}else os(l,d,p,y);break;case 31:os(l,d,p,y);break;case 13:os(l,d,p,y);break;case 23:break;case 22:k=d.stateNode,B=d.alternate,d.memoizedState!==null?k._visibility&2?os(l,d,p,y):nm(l,d):k._visibility&2?os(l,d,p,y):(k._visibility|=2,Kf(l,d,p,y,(d.subtreeFlags&10256)!==0||!1)),E&2048&&CT(B,d);break;case 24:os(l,d,p,y),E&2048&&IT(d.alternate,d);break;default:os(l,d,p,y)}}function Kf(l,d,p,y,E){for(E=E&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var k=l,B=d,q=p,re=y,me=B.flags;switch(B.tag){case 0:case 11:case 15:Kf(k,B,q,re,E),em(8,B);break;case 23:break;case 22:var Ee=B.stateNode;B.memoizedState!==null?Ee._visibility&2?Kf(k,B,q,re,E):nm(k,B):(Ee._visibility|=2,Kf(k,B,q,re,E)),E&&me&2048&&CT(B.alternate,B);break;case 24:Kf(k,B,q,re,E),E&&me&2048&&IT(B.alternate,B);break;default:Kf(k,B,q,re,E)}d=d.sibling}}function nm(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,y=d,E=y.flags;switch(y.tag){case 22:nm(p,y),E&2048&&CT(y.alternate,y);break;case 24:nm(p,y),E&2048&&IT(y.alternate,y);break;default:nm(p,y)}d=d.sibling}}var rm=8192;function Wf(l,d,p){if(l.subtreeFlags&rm)for(l=l.child;l!==null;)qz(l,d,p),l=l.sibling}function qz(l,d,p){switch(l.tag){case 26:Wf(l,d,p),l.flags&rm&&l.memoizedState!==null&&Dne(p,ss,l.memoizedState,l.memoizedProps);break;case 5:Wf(l,d,p);break;case 3:case 4:var y=ss;ss=Db(l.stateNode.containerInfo),Wf(l,d,p),ss=y;break;case 22:l.memoizedState===null&&(y=l.alternate,y!==null&&y.memoizedState!==null?(y=rm,rm=16777216,Wf(l,d,p),rm=y):Wf(l,d,p));break;default:Wf(l,d,p)}}function Gz(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function im(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];Cr=y,Kz(y,l)}Gz(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Hz(l),l=l.sibling}function Hz(l){switch(l.tag){case 0:case 11:case 15:im(l),l.flags&2048&&lc(9,l,l.return);break;case 3:im(l);break;case 12:im(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,xb(l)):im(l);break;default:im(l)}}function xb(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];Cr=y,Kz(y,l)}Gz(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:lc(8,d,d.return),xb(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,xb(d));break;default:xb(d)}l=l.sibling}}function Kz(l,d){for(;Cr!==null;){var p=Cr;switch(p.tag){case 0:case 11:case 15:lc(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Fg(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Cr=y;else e:for(p=l;Cr!==null;){y=Cr;var E=y.sibling,k=y.return;if(zz(y),y===p){Cr=null;break e}if(E!==null){E.return=k,Cr=E;break e}Cr=k}}}var Wte={getCacheForType:function(l){var d=Br(Qn),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p},cacheSignal:function(){return Br(Qn).controller.signal}},Yte=typeof WeakMap=="function"?WeakMap:Map,jt=0,rn=null,St=null,Tt=0,Ut=0,ea=null,cc=!1,Yf=!1,NT=!1,Xo=0,On=0,uc=0,Wu=0,PT=0,ta=0,Xf=0,am=null,Ni=null,OT=!1,wb=0,Wz=0,Sb=1/0,_b=null,dc=null,dr=0,fc=null,Qf=null,Qo=0,DT=0,RT=null,Yz=null,sm=0,MT=null;function na(){return(jt&2)!==0&&Tt!==0?Tt&-Tt:G.T!==null?FT():Ey()}function Xz(){if(ta===0)if((Tt&536870912)===0||It){var l=En;En<<=1,(En&3932160)===0&&(En=262144),ta=l}else ta=536870912;return l=Zi.current,l!==null&&(l.flags|=32),ta}function Pi(l,d,p){(l===rn&&(Ut===2||Ut===9)||l.cancelPendingCommit!==null)&&(Zf(l,0),hc(l,Tt,ta,!1)),Su(l,p),((jt&2)===0||l!==rn)&&(l===rn&&((jt&2)===0&&(Wu|=p),On===4&&hc(l,Tt,ta,!1)),Xs(l))}function Qz(l,d,p){if((jt&6)!==0)throw Error(r(327));var y=!p&&(d&127)===0&&(d&l.expiredLanes)===0||ci(l,d),E=y?Zte(l,d):zT(l,d,!0),k=y;do{if(E===0){Yf&&!y&&hc(l,d,0,!1);break}else{if(p=l.current.alternate,k&&!Xte(p)){E=zT(l,d,!1),k=!1;continue}if(E===2){if(k=d,l.errorRecoveryDisabledLanes&k)var B=0;else B=l.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){d=B;e:{var q=l;E=am;var re=q.current.memoizedState.isDehydrated;if(re&&(Zf(q,B).flags|=256),B=zT(q,B,!1),B!==2){if(NT&&!re){q.errorRecoveryDisabledLanes|=k,Wu|=k,E=4;break e}k=Ni,Ni=E,k!==null&&(Ni===null?Ni=k:Ni.push.apply(Ni,k))}E=B}if(k=!1,E!==2)continue}}if(E===1){Zf(l,0),hc(l,d,0,!0);break}e:{switch(y=l,k=E,k){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:hc(y,d,ta,!cc);break e;case 2:Ni=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(E=wb+300-ct(),10<E)){if(hc(y,d,ta,!cc),va(y,0,!0)!==0)break e;Qo=d,y.timeoutHandle=C4(Zz.bind(null,y,p,Ni,_b,OT,d,ta,Wu,Xf,cc,k,"Throttled",-0,0),E);break e}Zz(y,p,Ni,_b,OT,d,ta,Wu,Xf,cc,k,null,-0,0)}}break}while(!0);Xs(l)}function Zz(l,d,p,y,E,k,B,q,re,me,Ee,Ce,ye,we){if(l.timeoutHandle=-1,Ce=d.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:es},qz(d,k,Ce);var Ue=(k&62914560)===k?wb-ct():(k&4194048)===k?Wz-ct():0;if(Ue=Rne(Ce,Ue),Ue!==null){Qo=k,l.cancelPendingCommit=Ue(s4.bind(null,l,d,k,p,y,E,B,q,re,Ee,Ce,null,ye,we)),hc(l,k,B,!me);return}}s4(l,d,k,p,y,E,B,q,re)}function Xte(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var E=p[y],k=E.getSnapshot;E=E.value;try{if(!Xi(k(),E))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function hc(l,d,p,y){d&=~PT,d&=~Wu,l.suspendedLanes|=d,l.pingedLanes&=~d,y&&(l.warmLanes|=d),y=l.expirationTimes;for(var E=d;0<E;){var k=31-_n(E),B=1<<k;y[k]=-1,E&=~B}p!==0&&_u(l,p,d)}function Eb(){return(jt&6)===0?(om(0),!1):!0}function jT(){if(St!==null){if(Ut===0)var l=St.return;else l=St,Bo=Vu=null,ZE(l),$f=null,Ug=0,l=St;for(;l!==null;)Iz(l.alternate,l),l=l.return;St=null}}function Zf(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,mne(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),Qo=0,jT(),rn=l,St=p=Lo(l.current,null),Tt=d,Ut=0,ea=null,cc=!1,Yf=ci(l,d),NT=!1,Xf=ta=PT=Wu=uc=On=0,Ni=am=null,OT=!1,(d&8)!==0&&(d|=d&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=d;0<y;){var E=31-_n(y),k=1<<E;d|=l[E],y&=~k}return Xo=d,Gy(),p}function Jz(l,d){ft=null,G.H=Qg,d===Ff||d===Jy?(d=gj(),Ut=3):d===BE?(d=gj(),Ut=4):Ut=d===pT?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,ea=d,St===null&&(On=1,hb(l,_a(d,l.current)))}function e4(){var l=Zi.current;return l===null?!0:(Tt&4194048)===Tt?ka===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?l===ka:!1}function t4(){var l=G.H;return G.H=Qg,l===null?Qg:l}function n4(){var l=G.A;return G.A=Wte,l}function Tb(){On=4,cc||(Tt&4194048)!==Tt&&Zi.current!==null||(Yf=!0),(uc&134217727)===0&&(Wu&134217727)===0||rn===null||hc(rn,Tt,ta,!1)}function zT(l,d,p){var y=jt;jt|=2;var E=t4(),k=n4();(rn!==l||Tt!==d)&&(_b=null,Zf(l,d)),d=!1;var B=On;e:do try{if(Ut!==0&&St!==null){var q=St,re=ea;switch(Ut){case 8:jT(),B=6;break e;case 3:case 2:case 9:case 6:Zi.current===null&&(d=!0);var me=Ut;if(Ut=0,ea=null,Jf(l,q,re,me),p&&Yf){B=0;break e}break;default:me=Ut,Ut=0,ea=null,Jf(l,q,re,me)}}Qte(),B=On;break}catch(Ee){Jz(l,Ee)}while(!0);return d&&l.shellSuspendCounter++,Bo=Vu=null,jt=y,G.H=E,G.A=k,St===null&&(rn=null,Tt=0,Gy()),B}function Qte(){for(;St!==null;)r4(St)}function Zte(l,d){var p=jt;jt|=2;var y=t4(),E=n4();rn!==l||Tt!==d?(_b=null,Sb=ct()+500,Zf(l,d)):Yf=ci(l,d);e:do try{if(Ut!==0&&St!==null){d=St;var k=ea;t:switch(Ut){case 1:Ut=0,ea=null,Jf(l,d,k,1);break;case 2:case 9:if(hj(k)){Ut=0,ea=null,i4(d);break}d=function(){Ut!==2&&Ut!==9||rn!==l||(Ut=7),Xs(l)},k.then(d,d);break e;case 3:Ut=7;break e;case 4:Ut=5;break e;case 7:hj(k)?(Ut=0,ea=null,i4(d)):(Ut=0,ea=null,Jf(l,d,k,7));break;case 5:var B=null;switch(St.tag){case 26:B=St.memoizedState;case 5:case 27:var q=St;if(B?U4(B):q.stateNode.complete){Ut=0,ea=null;var re=q.sibling;if(re!==null)St=re;else{var me=q.return;me!==null?(St=me,Ab(me)):St=null}break t}}Ut=0,ea=null,Jf(l,d,k,5);break;case 6:Ut=0,ea=null,Jf(l,d,k,6);break;case 8:jT(),On=6;break e;default:throw Error(r(462))}}Jte();break}catch(Ee){Jz(l,Ee)}while(!0);return Bo=Vu=null,G.H=y,G.A=E,jt=p,St!==null?0:(rn=null,Tt=0,Gy(),On)}function Jte(){for(;St!==null&&!Le();)r4(St)}function r4(l){var d=kz(l.alternate,l,Xo);l.memoizedProps=l.pendingProps,d===null?Ab(l):St=d}function i4(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=wz(p,d,d.pendingProps,d.type,void 0,Tt);break;case 11:d=wz(p,d,d.pendingProps,d.type.render,d.ref,Tt);break;case 5:ZE(d);default:Iz(p,d),d=St=nj(d,Xo),d=kz(p,d,Xo)}l.memoizedProps=l.pendingProps,d===null?Ab(l):St=d}function Jf(l,d,p,y){Bo=Vu=null,ZE(d),$f=null,Ug=0;var E=d.return;try{if(Fte(l,E,d,p,Tt)){On=1,hb(l,_a(p,l.current)),St=null;return}}catch(k){if(E!==null)throw St=E,k;On=1,hb(l,_a(p,l.current)),St=null;return}d.flags&32768?(It||y===1?l=!0:Yf||(Tt&536870912)!==0?l=!1:(cc=l=!0,(y===2||y===9||y===3||y===6)&&(y=Zi.current,y!==null&&y.tag===13&&(y.flags|=16384))),a4(d,l)):Ab(d)}function Ab(l){var d=l;do{if((d.flags&32768)!==0){a4(d,cc);return}l=d.return;var p=qte(d.alternate,d,Xo);if(p!==null){St=p;return}if(d=d.sibling,d!==null){St=d;return}St=d=l}while(d!==null);On===0&&(On=5)}function a4(l,d){do{var p=Gte(l.alternate,l);if(p!==null){p.flags&=32767,St=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){St=l;return}St=l=p}while(l!==null);On=6,St=null}function s4(l,d,p,y,E,k,B,q,re){l.cancelPendingCommit=null;do kb();while(dr!==0);if((jt&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(k=d.lanes|d.childLanes,k|=TE,mE(l,p,k,B,q,re),l===rn&&(St=rn=null,Tt=0),Qf=d,fc=l,Qo=p,DT=k,RT=E,Yz=y,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,rne(ur,function(){return d4(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||y){y=G.T,G.T=null,E=X.p,X.p=2,B=jt,jt|=4;try{Hte(l,d,p)}finally{jt=B,X.p=E,G.T=y}}dr=1,o4(),l4(),c4()}}function o4(){if(dr===1){dr=0;var l=fc,d=Qf,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=G.T,G.T=null;var y=X.p;X.p=2;var E=jt;jt|=4;try{Fz(d,l);var k=YT,B=KM(l.containerInfo),q=k.focusedElem,re=k.selectionRange;if(B!==q&&q&&q.ownerDocument&&HM(q.ownerDocument.documentElement,q)){if(re!==null&&xE(q)){var me=re.start,Ee=re.end;if(Ee===void 0&&(Ee=me),"selectionStart"in q)q.selectionStart=me,q.selectionEnd=Math.min(Ee,q.value.length);else{var Ce=q.ownerDocument||document,ye=Ce&&Ce.defaultView||window;if(ye.getSelection){var we=ye.getSelection(),Ue=q.textContent.length,at=Math.min(re.start,Ue),Qt=re.end===void 0?at:Math.min(re.end,Ue);!we.extend&&at>Qt&&(B=Qt,Qt=at,at=B);var de=GM(q,at),ce=GM(q,Qt);if(de&&ce&&(we.rangeCount!==1||we.anchorNode!==de.node||we.anchorOffset!==de.offset||we.focusNode!==ce.node||we.focusOffset!==ce.offset)){var ge=Ce.createRange();ge.setStart(de.node,de.offset),we.removeAllRanges(),at>Qt?(we.addRange(ge),we.extend(ce.node,ce.offset)):(ge.setEnd(ce.node,ce.offset),we.addRange(ge))}}}}for(Ce=[],we=q;we=we.parentNode;)we.nodeType===1&&Ce.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<Ce.length;q++){var Ae=Ce[q];Ae.element.scrollLeft=Ae.left,Ae.element.scrollTop=Ae.top}}Vb=!!WT,YT=WT=null}finally{jt=E,X.p=y,G.T=p}}l.current=d,dr=2}}function l4(){if(dr===2){dr=0;var l=fc,d=Qf,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=G.T,G.T=null;var y=X.p;X.p=2;var E=jt;jt|=4;try{jz(l,d.alternate,d)}finally{jt=E,X.p=y,G.T=p}}dr=3}}function c4(){if(dr===4||dr===3){dr=0,st();var l=fc,d=Qf,p=Qo,y=Yz;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?dr=5:(dr=0,Qf=fc=null,u4(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(dc=null),Ro(p),d=d.stateNode,Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(Kn,d,void 0,(d.current.flags&128)===128)}catch{}if(y!==null){d=G.T,E=X.p,X.p=2,G.T=null;try{for(var k=l.onRecoverableError,B=0;B<y.length;B++){var q=y[B];k(q.value,{componentStack:q.stack})}}finally{G.T=d,X.p=E}}(Qo&3)!==0&&kb(),Xs(l),E=l.pendingLanes,(p&261930)!==0&&(E&42)!==0?l===MT?sm++:(sm=0,MT=l):sm=0,om(0)}}function u4(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Fg(d)))}function kb(){return o4(),l4(),c4(),d4()}function d4(){if(dr!==5)return!1;var l=fc,d=DT;DT=0;var p=Ro(Qo),y=G.T,E=X.p;try{X.p=32>p?32:p,G.T=null,p=RT,RT=null;var k=fc,B=Qo;if(dr=0,Qf=fc=null,Qo=0,(jt&6)!==0)throw Error(r(331));var q=jt;if(jt|=4,Hz(k.current),Uz(k,k.current,B,p),jt=q,om(0,!1),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(Kn,k)}catch{}return!0}finally{X.p=E,G.T=y,u4(l,d)}}function f4(l,d,p){d=_a(p,d),d=hT(l.stateNode,d,2),l=ac(l,d,2),l!==null&&(Su(l,2),Xs(l))}function qt(l,d,p){if(l.tag===3)f4(l,l,p);else for(;d!==null;){if(d.tag===3){f4(d,l,p);break}else if(d.tag===1){var y=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(dc===null||!dc.has(y))){l=_a(p,l),p=hz(2),y=ac(d,p,2),y!==null&&(pz(p,y,d,l),Su(y,2),Xs(y));break}}d=d.return}}function LT(l,d,p){var y=l.pingCache;if(y===null){y=l.pingCache=new Yte;var E=new Set;y.set(d,E)}else E=y.get(d),E===void 0&&(E=new Set,y.set(d,E));E.has(p)||(NT=!0,E.add(p),l=ene.bind(null,l,d,p),d.then(l,l))}function ene(l,d,p){var y=l.pingCache;y!==null&&y.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,rn===l&&(Tt&p)===p&&(On===4||On===3&&(Tt&62914560)===Tt&&300>ct()-wb?(jt&2)===0&&Zf(l,0):PT|=p,Xf===Tt&&(Xf=0)),Xs(l)}function h4(l,d){d===0&&(d=_y()),l=ju(l,d),l!==null&&(Su(l,d),Xs(l))}function tne(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),h4(l,p)}function nne(l,d){var p=0;switch(l.tag){case 31:case 13:var y=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(d),h4(l,p)}function rne(l,d){return it(l,d)}var Cb=null,eh=null,VT=!1,Ib=!1,BT=!1,pc=0;function Xs(l){l!==eh&&l.next===null&&(eh===null?Cb=eh=l:eh=eh.next=l),Ib=!0,VT||(VT=!0,ane())}function om(l,d){if(!BT&&Ib){BT=!0;do for(var p=!1,y=Cb;y!==null;){if(l!==0){var E=y.pendingLanes;if(E===0)var k=0;else{var B=y.suspendedLanes,q=y.pingedLanes;k=(1<<31-_n(42|l)+1)-1,k&=E&~(B&~q),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(p=!0,v4(y,k))}else k=Tt,k=va(y,y===rn?k:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(k&3)===0||ci(y,k)||(p=!0,v4(y,k));y=y.next}while(p);BT=!1}}function ine(){p4()}function p4(){Ib=VT=!1;var l=0;pc!==0&&gne()&&(l=pc);for(var d=ct(),p=null,y=Cb;y!==null;){var E=y.next,k=g4(y,d);k===0?(y.next=null,p===null?Cb=E:p.next=E,E===null&&(eh=p)):(p=y,(l!==0||(k&3)!==0)&&(Ib=!0)),y=E}dr!==0&&dr!==5||om(l),pc!==0&&(pc=0)}function g4(l,d){for(var p=l.suspendedLanes,y=l.pingedLanes,E=l.expirationTimes,k=l.pendingLanes&-62914561;0<k;){var B=31-_n(k),q=1<<B,re=E[B];re===-1?((q&p)===0||(q&y)!==0)&&(E[B]=gE(q,d)):re<=d&&(l.expiredLanes|=q),k&=~q}if(d=rn,p=Tt,p=va(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,p===0||l===d&&(Ut===2||Ut===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&Ft(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||ci(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(y!==null&&Ft(y),Ro(p)){case 2:case 8:p=gn;break;case 32:p=ur;break;case 268435456:p=Fl;break;default:p=ur}return y=m4.bind(null,l),p=it(p,y),l.callbackPriority=d,l.callbackNode=p,d}return y!==null&&y!==null&&Ft(y),l.callbackPriority=2,l.callbackNode=null,2}function m4(l,d){if(dr!==0&&dr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(kb()&&l.callbackNode!==p)return null;var y=Tt;return y=va(l,l===rn?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(Qz(l,y,d),g4(l,ct()),l.callbackNode!=null&&l.callbackNode===p?m4.bind(null,l):null)}function v4(l,d){if(kb())return null;Qz(l,d,!0)}function ane(){vne(function(){(jt&6)!==0?it(nn,ine):p4()})}function FT(){if(pc===0){var l=Vf;l===0&&(l=wt,wt<<=1,(wt&261888)===0&&(wt=256)),pc=l}return pc}function y4(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Ef(""+l)}function b4(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function sne(l,d,p,y,E){if(d==="submit"&&p&&p.stateNode===E){var k=y4((E[Ar]||null).action),B=y.submitter;B&&(d=(d=B[Ar]||null)?y4(d.formAction):B.getAttribute("formAction"),d!==null&&(k=d,B=null));var q=new Us("action","action",null,y,E);l.push({event:q,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(pc!==0){var re=B?b4(E,B):new FormData(E);oT(p,{pending:!0,data:re,method:E.method,action:k},null,re)}}else typeof k=="function"&&(q.preventDefault(),re=B?b4(E,B):new FormData(E),oT(p,{pending:!0,data:re,method:E.method,action:k},k,re))},currentTarget:E}]})}}for(var $T=0;$T<EE.length;$T++){var UT=EE[$T],one=UT.toLowerCase(),lne=UT[0].toUpperCase()+UT.slice(1);as(one,"on"+lne)}as(XM,"onAnimationEnd"),as(QM,"onAnimationIteration"),as(ZM,"onAnimationStart"),as("dblclick","onDoubleClick"),as("focusin","onFocus"),as("focusout","onBlur"),as(Ete,"onTransitionRun"),as(Tte,"onTransitionStart"),as(Ate,"onTransitionCancel"),as(JM,"onTransitionEnd"),Vs("onMouseEnter",["mouseout","mouseover"]),Vs("onMouseLeave",["mouseout","mouseover"]),Vs("onPointerEnter",["pointerout","pointerover"]),Vs("onPointerLeave",["pointerout","pointerover"]),Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cne=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lm));function x4(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],E=y.event;y=y.listeners;e:{var k=void 0;if(d)for(var B=y.length-1;0<=B;B--){var q=y[B],re=q.instance,me=q.currentTarget;if(q=q.listener,re!==k&&E.isPropagationStopped())break e;k=q,E.currentTarget=me;try{k(E)}catch(Ee){qy(Ee)}E.currentTarget=null,k=re}else for(B=0;B<y.length;B++){if(q=y[B],re=q.instance,me=q.currentTarget,q=q.listener,re!==k&&E.isPropagationStopped())break e;k=q,E.currentTarget=me;try{k(E)}catch(Ee){qy(Ee)}E.currentTarget=null,k=re}}}}function _t(l,d){var p=d[bf];p===void 0&&(p=d[bf]=new Set);var y=l+"__bubble";p.has(y)||(w4(d,l,2,!1),p.add(y))}function qT(l,d,p){var y=0;d&&(y|=4),w4(p,l,y,d)}var Nb="_reactListening"+Math.random().toString(36).slice(2);function GT(l){if(!l[Nb]){l[Nb]=!0,xg.forEach(function(p){p!=="selectionchange"&&(cne.has(p)||qT(p,!1,l),qT(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[Nb]||(d[Nb]=!0,qT("selectionchange",!1,d))}}function w4(l,d,p,y){switch(X4(d)){case 2:var E=zne;break;case 8:E=Lne;break;default:E=sA}p=E.bind(null,d,p,l),E=void 0,!Cu||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),y?E!==void 0?l.addEventListener(d,p,{capture:!0,passive:E}):l.addEventListener(d,p,!0):E!==void 0?l.addEventListener(d,p,{passive:E}):l.addEventListener(d,p,!1)}function HT(l,d,p,y,E){var k=y;if((d&1)===0&&(d&2)===0&&y!==null)e:for(;;){if(y===null)return;var B=y.tag;if(B===3||B===4){var q=y.stateNode.containerInfo;if(q===E)break;if(B===4)for(B=y.return;B!==null;){var re=B.tag;if((re===3||re===4)&&B.stateNode.containerInfo===E)return;B=B.return}for(;q!==null;){if(B=js(q),B===null)return;if(re=B.tag,re===5||re===6||re===26||re===27){y=k=B;continue e}q=q.parentNode}}y=y.return}Yl(function(){var me=k,Ee=ba(p),Ce=[];e:{var ye=ej.get(l);if(ye!==void 0){var we=Us,Ue=l;switch(l){case"keypress":if(Nu(p)===0)break e;case"keydown":case"keyup":we=Fy;break;case"focusin":Ue="focus",we=Ou;break;case"focusout":Ue="blur",we=Ou;break;case"beforeblur":case"afterblur":we=Ou;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Dg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Oy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=j;break;case XM:case QM:case ZM:we=Ry;break;case JM:we=H;break;case"scroll":case"scrollend":we=Og;break;case"wheel":we=xe;break;case"copy":case"cut":case"paste":we=My;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=zo;break;case"toggle":case"beforetoggle":we=dt}var at=(d&4)!==0,Qt=!at&&(l==="scroll"||l==="scrollend"),de=at?ye!==null?ye+"Capture":null:ye;at=[];for(var ce=me,ge;ce!==null;){var Ae=ce;if(ge=Ae.stateNode,Ae=Ae.tag,Ae!==5&&Ae!==26&&Ae!==27||ge===null||de===null||(Ae=ts(ce,de),Ae!=null&&at.push(cm(ce,Ae,ge))),Qt)break;ce=ce.return}0<at.length&&(ye=new we(ye,Ue,null,p,Ee),Ce.push({event:ye,listeners:at}))}}if((d&7)===0){e:{if(ye=l==="mouseover"||l==="pointerover",we=l==="mouseout"||l==="pointerout",ye&&p!==Ig&&(Ue=p.relatedTarget||p.fromElement)&&(js(Ue)||Ue[Rs]))break e;if((we||ye)&&(ye=Ee.window===Ee?Ee:(ye=Ee.ownerDocument)?ye.defaultView||ye.parentWindow:window,we?(Ue=p.relatedTarget||p.toElement,we=me,Ue=Ue?js(Ue):null,Ue!==null&&(Qt=a(Ue),at=Ue.tag,Ue!==Qt||at!==5&&at!==27&&at!==6)&&(Ue=null)):(we=null,Ue=me),we!==Ue)){if(at=Dg,Ae="onMouseLeave",de="onMouseEnter",ce="mouse",(l==="pointerout"||l==="pointerover")&&(at=zo,Ae="onPointerLeave",de="onPointerEnter",ce="pointer"),Qt=we==null?ye:Wi(we),ge=Ue==null?ye:Wi(Ue),ye=new at(Ae,ce+"leave",we,p,Ee),ye.target=Qt,ye.relatedTarget=ge,Ae=null,js(Ee)===me&&(at=new at(de,ce+"enter",Ue,p,Ee),at.target=ge,at.relatedTarget=Qt,Ae=at),Qt=Ae,we&&Ue)t:{for(at=une,de=we,ce=Ue,ge=0,Ae=de;Ae;Ae=at(Ae))ge++;Ae=0;for(var Je=ce;Je;Je=at(Je))Ae++;for(;0<ge-Ae;)de=at(de),ge--;for(;0<Ae-ge;)ce=at(ce),Ae--;for(;ge--;){if(de===ce||ce!==null&&de===ce.alternate){at=de;break t}de=at(de),ce=at(ce)}at=null}else at=null;we!==null&&S4(Ce,ye,we,at,!1),Ue!==null&&Qt!==null&&S4(Ce,Qt,Ue,at,!0)}}e:{if(ye=me?Wi(me):window,we=ye.nodeName&&ye.nodeName.toLowerCase(),we==="select"||we==="input"&&ye.type==="file")var Ot=VM;else if(zM(ye))if(BM)Ot=wte;else{Ot=bte;var We=yte}else we=ye.nodeName,!we||we.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?me&&_f(me.elementType)&&(Ot=VM):Ot=xte;if(Ot&&(Ot=Ot(l,me))){LM(Ce,Ot,p,Ee);break e}We&&We(l,ye,me),l==="focusout"&&me&&ye.type==="number"&&me.memoizedProps.value!=null&&Ag(ye,"number",ye.value)}switch(We=me?Wi(me):window,l){case"focusin":(zM(We)||We.contentEditable==="true")&&(Pf=We,wE=me,Lg=null);break;case"focusout":Lg=wE=Pf=null;break;case"mousedown":SE=!0;break;case"contextmenu":case"mouseup":case"dragend":SE=!1,WM(Ce,p,Ee);break;case"selectionchange":if(_te)break;case"keydown":case"keyup":WM(Ce,p,Ee)}var pt;if(Mt)e:{switch(l){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else Nf?Du(l,p)&&(At="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(At="onCompositionStart");At&&(Hs&&p.locale!=="ko"&&(Nf||At!=="onCompositionStart"?At==="onCompositionEnd"&&Nf&&(pt=Pg()):($s=Ee,Ng="value"in $s?$s.value:$s.textContent,Nf=!0)),We=Pb(me,At),0<We.length&&(At=new Gs(At,l,null,p,Ee),Ce.push({event:At,listeners:We}),pt?At.data=pt:(pt=If(p),pt!==null&&(At.data=pt)))),(pt=wa?pte(l,p):gte(l,p))&&(At=Pb(me,"onBeforeInput"),0<At.length&&(We=new Gs("onBeforeInput","beforeinput",null,p,Ee),Ce.push({event:We,listeners:At}),We.data=pt)),sne(Ce,l,me,p,Ee)}x4(Ce,d)})}function cm(l,d,p){return{instance:l,listener:d,currentTarget:p}}function Pb(l,d){for(var p=d+"Capture",y=[];l!==null;){var E=l,k=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||k===null||(E=ts(l,p),E!=null&&y.unshift(cm(l,E,k)),E=ts(l,d),E!=null&&y.push(cm(l,E,k))),l.tag===3)return y;l=l.return}return[]}function une(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function S4(l,d,p,y,E){for(var k=d._reactName,B=[];p!==null&&p!==y;){var q=p,re=q.alternate,me=q.stateNode;if(q=q.tag,re!==null&&re===y)break;q!==5&&q!==26&&q!==27||me===null||(re=me,E?(me=ts(p,k),me!=null&&B.unshift(cm(p,me,re))):E||(me=ts(p,k),me!=null&&B.push(cm(p,me,re)))),p=p.return}B.length!==0&&l.push({event:d,listeners:B})}var dne=/\r\n?/g,fne=/\u0000|\uFFFD/g;function _4(l){return(typeof l=="string"?l:""+l).replace(dne,`
`).replace(fne,"")}function E4(l,d){return d=_4(d),_4(l)===d}function Xt(l,d,p,y,E,k){switch(p){case"children":typeof y=="string"?d==="body"||d==="textarea"&&y===""||Ai(l,y):(typeof y=="number"||typeof y=="bigint")&&d!=="body"&&Ai(l,""+y);break;case"className":Yi(l,"class",y);break;case"tabIndex":Yi(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Yi(l,p,y);break;case"style":Cg(l,y,k);break;case"data":if(d!=="object"){Yi(l,"data",y);break}case"src":case"href":if(y===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=Ef(""+y),l.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(p==="formAction"?(d!=="input"&&Xt(l,d,"name",E.name,E,null),Xt(l,d,"formEncType",E.formEncType,E,null),Xt(l,d,"formMethod",E.formMethod,E,null),Xt(l,d,"formTarget",E.formTarget,E,null)):(Xt(l,d,"encType",E.encType,E,null),Xt(l,d,"method",E.method,E,null),Xt(l,d,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=Ef(""+y),l.setAttribute(p,y);break;case"onClick":y!=null&&(l.onclick=es);break;case"onScroll":y!=null&&_t("scroll",l);break;case"onScrollEnd":y!=null&&_t("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}p=Ef(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""+y):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":y===!0?l.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,y):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(p,y):l.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(p):l.setAttribute(p,y);break;case"popover":_t("beforetoggle",l),_t("toggle",l),wf(l,"popover",y);break;case"xlinkActuate":Xn(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Xn(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Xn(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Xn(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Xn(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Xn(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Xn(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Xn(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Xn(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":wf(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Py.get(p)||p,wf(l,p,y))}}function KT(l,d,p,y,E,k){switch(p){case"style":Cg(l,y,k);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof y=="string"?Ai(l,y):(typeof y=="number"||typeof y=="bigint")&&Ai(l,""+y);break;case"onScroll":y!=null&&_t("scroll",l);break;case"onScrollEnd":y!=null&&_t("scrollend",l);break;case"onClick":y!=null&&(l.onclick=es);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wg.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),d=p.slice(2,E?p.length-7:void 0),k=l[Ar]||null,k=k!=null?k[p]:null,typeof k=="function"&&l.removeEventListener(d,k,E),typeof y=="function")){typeof k!="function"&&k!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,y,E);break e}p in l?l[p]=y:y===!0?l.setAttribute(p,""):wf(l,p,y)}}}function $r(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",l),_t("load",l);var y=!1,E=!1,k;for(k in p)if(p.hasOwnProperty(k)){var B=p[k];if(B!=null)switch(k){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Xt(l,d,k,B,p,null)}}E&&Xt(l,d,"srcSet",p.srcSet,p,null),y&&Xt(l,d,"src",p.src,p,null);return;case"input":_t("invalid",l);var q=k=B=E=null,re=null,me=null;for(y in p)if(p.hasOwnProperty(y)){var Ee=p[y];if(Ee!=null)switch(y){case"name":E=Ee;break;case"type":B=Ee;break;case"checked":re=Ee;break;case"defaultChecked":me=Ee;break;case"value":k=Ee;break;case"defaultValue":q=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(137,d));break;default:Xt(l,d,y,Ee,p,null)}}Cy(l,k,q,re,me,B,E,!1);return;case"select":_t("invalid",l),y=B=k=null;for(E in p)if(p.hasOwnProperty(E)&&(q=p[E],q!=null))switch(E){case"value":k=q;break;case"defaultValue":B=q;break;case"multiple":y=q;default:Xt(l,d,E,q,p,null)}d=k,p=B,l.multiple=!!y,d!=null?Gl(l,!!y,d,!1):p!=null&&Gl(l,!!y,p,!0);return;case"textarea":_t("invalid",l),k=E=y=null;for(B in p)if(p.hasOwnProperty(B)&&(q=p[B],q!=null))switch(B){case"value":y=q;break;case"defaultValue":E=q;break;case"children":k=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(91));break;default:Xt(l,d,B,q,p,null)}Hl(l,y,E,k);return;case"option":for(re in p)p.hasOwnProperty(re)&&(y=p[re],y!=null)&&(re==="selected"?l.selected=y&&typeof y!="function"&&typeof y!="symbol":Xt(l,d,re,y,p,null));return;case"dialog":_t("beforetoggle",l),_t("toggle",l),_t("cancel",l),_t("close",l);break;case"iframe":case"object":_t("load",l);break;case"video":case"audio":for(y=0;y<lm.length;y++)_t(lm[y],l);break;case"image":_t("error",l),_t("load",l);break;case"details":_t("toggle",l);break;case"embed":case"source":case"link":_t("error",l),_t("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in p)if(p.hasOwnProperty(me)&&(y=p[me],y!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Xt(l,d,me,y,p,null)}return;default:if(_f(d)){for(Ee in p)p.hasOwnProperty(Ee)&&(y=p[Ee],y!==void 0&&KT(l,d,Ee,y,p,void 0));return}}for(q in p)p.hasOwnProperty(q)&&(y=p[q],y!=null&&Xt(l,d,q,y,p,null))}function hne(l,d,p,y){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,k=null,B=null,q=null,re=null,me=null,Ee=null;for(we in p){var Ce=p[we];if(p.hasOwnProperty(we)&&Ce!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":re=Ce;default:y.hasOwnProperty(we)||Xt(l,d,we,null,y,Ce)}}for(var ye in y){var we=y[ye];if(Ce=p[ye],y.hasOwnProperty(ye)&&(we!=null||Ce!=null))switch(ye){case"type":k=we;break;case"name":E=we;break;case"checked":me=we;break;case"defaultChecked":Ee=we;break;case"value":B=we;break;case"defaultValue":q=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,d));break;default:we!==Ce&&Xt(l,d,ye,we,y,Ce)}}Sf(l,B,q,re,me,Ee,k,E);return;case"select":we=B=q=ye=null;for(k in p)if(re=p[k],p.hasOwnProperty(k)&&re!=null)switch(k){case"value":break;case"multiple":we=re;default:y.hasOwnProperty(k)||Xt(l,d,k,null,y,re)}for(E in y)if(k=y[E],re=p[E],y.hasOwnProperty(E)&&(k!=null||re!=null))switch(E){case"value":ye=k;break;case"defaultValue":q=k;break;case"multiple":B=k;default:k!==re&&Xt(l,d,E,k,y,re)}d=q,p=B,y=we,ye!=null?Gl(l,!!p,ye,!1):!!y!=!!p&&(d!=null?Gl(l,!!p,d,!0):Gl(l,!!p,p?[]:"",!1));return;case"textarea":we=ye=null;for(q in p)if(E=p[q],p.hasOwnProperty(q)&&E!=null&&!y.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Xt(l,d,q,null,y,E)}for(B in y)if(E=y[B],k=p[B],y.hasOwnProperty(B)&&(E!=null||k!=null))switch(B){case"value":ye=E;break;case"defaultValue":we=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==k&&Xt(l,d,B,E,y,k)}Iy(l,ye,we);return;case"option":for(var Ue in p)ye=p[Ue],p.hasOwnProperty(Ue)&&ye!=null&&!y.hasOwnProperty(Ue)&&(Ue==="selected"?l.selected=!1:Xt(l,d,Ue,null,y,ye));for(re in y)ye=y[re],we=p[re],y.hasOwnProperty(re)&&ye!==we&&(ye!=null||we!=null)&&(re==="selected"?l.selected=ye&&typeof ye!="function"&&typeof ye!="symbol":Xt(l,d,re,ye,y,we));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in p)ye=p[at],p.hasOwnProperty(at)&&ye!=null&&!y.hasOwnProperty(at)&&Xt(l,d,at,null,y,ye);for(me in y)if(ye=y[me],we=p[me],y.hasOwnProperty(me)&&ye!==we&&(ye!=null||we!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,d));break;default:Xt(l,d,me,ye,y,we)}return;default:if(_f(d)){for(var Qt in p)ye=p[Qt],p.hasOwnProperty(Qt)&&ye!==void 0&&!y.hasOwnProperty(Qt)&&KT(l,d,Qt,void 0,y,ye);for(Ee in y)ye=y[Ee],we=p[Ee],!y.hasOwnProperty(Ee)||ye===we||ye===void 0&&we===void 0||KT(l,d,Ee,ye,y,we);return}}for(var de in p)ye=p[de],p.hasOwnProperty(de)&&ye!=null&&!y.hasOwnProperty(de)&&Xt(l,d,de,null,y,ye);for(Ce in y)ye=y[Ce],we=p[Ce],!y.hasOwnProperty(Ce)||ye===we||ye==null&&we==null||Xt(l,d,Ce,ye,y,we)}function T4(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pne(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,p=performance.getEntriesByType("resource"),y=0;y<p.length;y++){var E=p[y],k=E.transferSize,B=E.initiatorType,q=E.duration;if(k&&q&&T4(B)){for(B=0,q=E.responseEnd,y+=1;y<p.length;y++){var re=p[y],me=re.startTime;if(me>q)break;var Ee=re.transferSize,Ce=re.initiatorType;Ee&&T4(Ce)&&(re=re.responseEnd,B+=Ee*(re<q?1:(q-me)/(re-me)))}if(--y,d+=8*(k+B)/(E.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var WT=null,YT=null;function Ob(l){return l.nodeType===9?l:l.ownerDocument}function A4(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function k4(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function XT(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var QT=null;function gne(){var l=window.event;return l&&l.type==="popstate"?l===QT?!1:(QT=l,!0):(QT=null,!1)}var C4=typeof setTimeout=="function"?setTimeout:void 0,mne=typeof clearTimeout=="function"?clearTimeout:void 0,I4=typeof Promise=="function"?Promise:void 0,vne=typeof queueMicrotask=="function"?queueMicrotask:typeof I4<"u"?function(l){return I4.resolve(null).then(l).catch(yne)}:C4;function yne(l){setTimeout(function(){throw l})}function gc(l){return l==="head"}function N4(l,d){var p=d,y=0;do{var E=p.nextSibling;if(l.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"||p==="/&"){if(y===0){l.removeChild(E),ih(d);return}y--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")y++;else if(p==="html")um(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,um(p);for(var k=p.firstChild;k;){var B=k.nextSibling,q=k.nodeName;k[Ms]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&k.rel.toLowerCase()==="stylesheet"||p.removeChild(k),k=B}}else p==="body"&&um(l.ownerDocument.body);p=E}while(p);ih(d)}function P4(l,d){var p=l;l=0;do{var y=p.nextSibling;if(p.nodeType===1?d?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(d?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),y&&y.nodeType===8)if(p=y.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=y}while(p)}function ZT(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":ZT(p),xf(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function bne(l,d,p,y){for(;l.nodeType===1;){var E=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[Ms])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(k=l.getAttribute("rel"),k==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(k!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(k=l.getAttribute("src"),(k!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&k&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var k=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===k)return l}else return l;if(l=Ca(l.nextSibling),l===null)break}return null}function xne(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Ca(l.nextSibling),l===null))return null;return l}function O4(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=Ca(l.nextSibling),l===null))return null;return l}function JT(l){return l.data==="$?"||l.data==="$~"}function eA(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function wne(l,d){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||p.readyState!=="loading")d();else{var y=function(){d(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Ca(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var tA=null;function D4(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(d===0)return Ca(l.nextSibling);d--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||d++}l=l.nextSibling}return null}function R4(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(d===0)return l;d--}else p!=="/$"&&p!=="/&"||d++}l=l.previousSibling}return null}function M4(l,d,p){switch(d=Ob(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function um(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);xf(l)}var Ia=new Map,j4=new Set;function Db(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Zo=X.d;X.d={f:Sne,r:_ne,D:Ene,C:Tne,L:Ane,m:kne,X:Ine,S:Cne,M:Nne};function Sne(){var l=Zo.f(),d=Eb();return l||d}function _ne(l){var d=ya(l);d!==null&&d.tag===5&&d.type==="form"?Jj(d):Zo.r(l)}var th=typeof document>"u"?null:document;function z4(l,d,p){var y=th;if(y&&typeof d=="string"&&d){var E=Ti(d);E='link[rel="'+l+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),j4.has(E)||(j4.add(E),l={rel:l,crossOrigin:p,href:d},y.querySelector(E)===null&&(d=y.createElement("link"),$r(d,"link",l),Yn(d),y.head.appendChild(d)))}}function Ene(l){Zo.D(l),z4("dns-prefetch",l,null)}function Tne(l,d){Zo.C(l,d),z4("preconnect",l,d)}function Ane(l,d,p){Zo.L(l,d,p);var y=th;if(y&&l&&d){var E='link[rel="preload"][as="'+Ti(d)+'"]';d==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+Ti(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+Ti(p.imageSizes)+'"]')):E+='[href="'+Ti(l)+'"]';var k=E;switch(d){case"style":k=nh(l);break;case"script":k=rh(l)}Ia.has(k)||(l=h({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),Ia.set(k,l),y.querySelector(E)!==null||d==="style"&&y.querySelector(dm(k))||d==="script"&&y.querySelector(fm(k))||(d=y.createElement("link"),$r(d,"link",l),Yn(d),y.head.appendChild(d)))}}function kne(l,d){Zo.m(l,d);var p=th;if(p&&l){var y=d&&typeof d.as=="string"?d.as:"script",E='link[rel="modulepreload"][as="'+Ti(y)+'"][href="'+Ti(l)+'"]',k=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=rh(l)}if(!Ia.has(k)&&(l=h({rel:"modulepreload",href:l},d),Ia.set(k,l),p.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(fm(k)))return}y=p.createElement("link"),$r(y,"link",l),Yn(y),p.head.appendChild(y)}}}function Cne(l,d,p){Zo.S(l,d,p);var y=th;if(y&&l){var E=zs(y).hoistableStyles,k=nh(l);d=d||"default";var B=E.get(k);if(!B){var q={loading:0,preload:null};if(B=y.querySelector(dm(k)))q.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":d},p),(p=Ia.get(k))&&nA(l,p);var re=B=y.createElement("link");Yn(re),$r(re,"link",l),re._p=new Promise(function(me,Ee){re.onload=me,re.onerror=Ee}),re.addEventListener("load",function(){q.loading|=1}),re.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Rb(B,d,y)}B={type:"stylesheet",instance:B,count:1,state:q},E.set(k,B)}}}function Ine(l,d){Zo.X(l,d);var p=th;if(p&&l){var y=zs(p).hoistableScripts,E=rh(l),k=y.get(E);k||(k=p.querySelector(fm(E)),k||(l=h({src:l,async:!0},d),(d=Ia.get(E))&&rA(l,d),k=p.createElement("script"),Yn(k),$r(k,"link",l),p.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(E,k))}}function Nne(l,d){Zo.M(l,d);var p=th;if(p&&l){var y=zs(p).hoistableScripts,E=rh(l),k=y.get(E);k||(k=p.querySelector(fm(E)),k||(l=h({src:l,async:!0,type:"module"},d),(d=Ia.get(E))&&rA(l,d),k=p.createElement("script"),Yn(k),$r(k,"link",l),p.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(E,k))}}function L4(l,d,p,y){var E=(E=ie.current)?Db(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=nh(p.href),p=zs(E).hoistableStyles,y=p.get(d),y||(y={type:"style",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=nh(p.href);var k=zs(E).hoistableStyles,B=k.get(l);if(B||(E=E.ownerDocument||E,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(l,B),(k=E.querySelector(dm(l)))&&!k._p&&(B.instance=k,B.state.loading=5),Ia.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Ia.set(l,p),k||Pne(E,l,p,B.state))),d&&y===null)throw Error(r(528,""));return B}if(d&&y!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=rh(p),p=zs(E).hoistableScripts,y=p.get(d),y||(y={type:"script",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function nh(l){return'href="'+Ti(l)+'"'}function dm(l){return'link[rel="stylesheet"]['+l+"]"}function V4(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function Pne(l,d,p,y){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?y.loading=1:(d=l.createElement("link"),y.preload=d,d.addEventListener("load",function(){return y.loading|=1}),d.addEventListener("error",function(){return y.loading|=2}),$r(d,"link",p),Yn(d),l.head.appendChild(d))}function rh(l){return'[src="'+Ti(l)+'"]'}function fm(l){return"script[async]"+l}function B4(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var y=l.querySelector('style[data-href~="'+Ti(p.href)+'"]');if(y)return d.instance=y,Yn(y),y;var E=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),Yn(y),$r(y,"style",E),Rb(y,p.precedence,l),d.instance=y;case"stylesheet":E=nh(p.href);var k=l.querySelector(dm(E));if(k)return d.state.loading|=4,d.instance=k,Yn(k),k;y=V4(p),(E=Ia.get(E))&&nA(y,E),k=(l.ownerDocument||l).createElement("link"),Yn(k);var B=k;return B._p=new Promise(function(q,re){B.onload=q,B.onerror=re}),$r(k,"link",y),d.state.loading|=4,Rb(k,p.precedence,l),d.instance=k;case"script":return k=rh(p.src),(E=l.querySelector(fm(k)))?(d.instance=E,Yn(E),E):(y=p,(E=Ia.get(k))&&(y=h({},p),rA(y,E)),l=l.ownerDocument||l,E=l.createElement("script"),Yn(E),$r(E,"link",y),l.head.appendChild(E),d.instance=E);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(y=d.instance,d.state.loading|=4,Rb(y,p.precedence,l));return d.instance}function Rb(l,d,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,k=E,B=0;B<y.length;B++){var q=y[B];if(q.dataset.precedence===d)k=q;else if(k!==E)break}k?k.parentNode.insertBefore(l,k.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function nA(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function rA(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var Mb=null;function F4(l,d,p){if(Mb===null){var y=new Map,E=Mb=new Map;E.set(p,y)}else E=Mb,y=E.get(p),y||(y=new Map,E.set(p,y));if(y.has(l))return y;for(y.set(l,null),p=p.getElementsByTagName(l),E=0;E<p.length;E++){var k=p[E];if(!(k[Ms]||k[Wn]||l==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var B=k.getAttribute(d)||"";B=l+B;var q=y.get(B);q?q.push(k):y.set(B,[k])}}return y}function $4(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function One(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;return d.rel==="stylesheet"?(l=d.disabled,typeof d.precedence=="string"&&l==null):!0;case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function U4(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function Dne(l,d,p,y){if(p.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var E=nh(y.href),k=d.querySelector(dm(E));if(k){d=k._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=jb.bind(l),d.then(l,l)),p.state.loading|=4,p.instance=k,Yn(k);return}k=d.ownerDocument||d,y=V4(y),(E=Ia.get(E))&&nA(y,E),k=k.createElement("link"),Yn(k);var B=k;B._p=new Promise(function(q,re){B.onload=q,B.onerror=re}),$r(k,"link",y),p.instance=k}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,d),(d=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=jb.bind(l),d.addEventListener("load",p),d.addEventListener("error",p))}}var iA=0;function Rne(l,d){return l.stylesheets&&l.count===0&&Lb(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var y=setTimeout(function(){if(l.stylesheets&&Lb(l,l.stylesheets),l.unsuspend){var k=l.unsuspend;l.unsuspend=null,k()}},6e4+d);0<l.imgBytes&&iA===0&&(iA=62500*pne());var E=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Lb(l,l.stylesheets),l.unsuspend)){var k=l.unsuspend;l.unsuspend=null,k()}},(l.imgBytes>iA?50:800)+d);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(y),clearTimeout(E)}}:null}function jb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lb(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var zb=null;function Lb(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,zb=new Map,d.forEach(Mne,l),zb=null,jb.call(l))}function Mne(l,d){if(!(d.state.loading&4)){var p=zb.get(l);if(p)var y=p.get(null);else{p=new Map,zb.set(l,p);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<E.length;k++){var B=E[k];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(p.set(B.dataset.precedence,B),y=B)}y&&p.set(null,y)}E=d.instance,B=E.getAttribute("data-precedence"),k=p.get(B)||y,k===y&&p.set(null,E),p.set(B,E),this.count++,y=jb.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),k?k.parentNode.insertBefore(E,k.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),d.state.loading|=4}}var hm={$$typeof:I,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function jne(l,d,p,y,E,k,B,q,re){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ds(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ds(0),this.hiddenUpdates=Ds(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=k,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function q4(l,d,p,y,E,k,B,q,re,me,Ee,Ce){return l=new jne(l,d,p,B,re,me,Ee,Ce,q),d=1,k===!0&&(d|=24),k=Qi(3,null,null,d),l.current=k,k.stateNode=l,d=zE(),d.refCount++,l.pooledCache=d,d.refCount++,k.memoizedState={element:y,isDehydrated:p,cache:d},FE(k),l}function G4(l){return l?(l=Rf,l):Rf}function H4(l,d,p,y,E,k){E=G4(E),y.context===null?y.context=E:y.pendingContext=E,y=ic(d),y.payload={element:p},k=k===void 0?null:k,k!==null&&(y.callback=k),p=ac(l,y,d),p!==null&&(Pi(p,l,d),Gg(p,l,d))}function K4(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function aA(l,d){K4(l,d),(l=l.alternate)&&K4(l,d)}function W4(l){if(l.tag===13||l.tag===31){var d=ju(l,67108864);d!==null&&Pi(d,l,67108864),aA(l,67108864)}}function Y4(l){if(l.tag===13||l.tag===31){var d=na();d=Eu(d);var p=ju(l,d);p!==null&&Pi(p,l,d),aA(l,d)}}var Vb=!0;function zne(l,d,p,y){var E=G.T;G.T=null;var k=X.p;try{X.p=2,sA(l,d,p,y)}finally{X.p=k,G.T=E}}function Lne(l,d,p,y){var E=G.T;G.T=null;var k=X.p;try{X.p=8,sA(l,d,p,y)}finally{X.p=k,G.T=E}}function sA(l,d,p,y){if(Vb){var E=oA(y);if(E===null)HT(l,d,y,Bb,p),Q4(l,y);else if(Bne(E,l,d,p,y))y.stopPropagation();else if(Q4(l,y),d&4&&-1<Vne.indexOf(l)){for(;E!==null;){var k=ya(E);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var B=Ki(k.pendingLanes);if(B!==0){var q=k;for(q.pendingLanes|=2,q.entangledLanes|=2;B;){var re=1<<31-_n(B);q.entanglements[1]|=re,B&=~re}Xs(k),(jt&6)===0&&(Sb=ct()+500,om(0))}}break;case 31:case 13:q=ju(k,2),q!==null&&Pi(q,k,2),Eb(),aA(k,2)}if(k=oA(y),k===null&&HT(l,d,y,Bb,p),k===E)break;E=k}E!==null&&y.stopPropagation()}else HT(l,d,y,null,p)}}function oA(l){return l=ba(l),lA(l)}var Bb=null;function lA(l){if(Bb=null,l=js(l),l!==null){var d=a(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=s(d),l!==null)return l;l=null}else if(p===31){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Bb=l,null}function X4(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xt()){case nn:return 2;case gn:return 8;case ur:case Do:return 32;case Fl:return 268435456;default:return 32}default:return 32}}var cA=!1,mc=null,vc=null,yc=null,pm=new Map,gm=new Map,bc=[],Vne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Q4(l,d){switch(l){case"focusin":case"focusout":mc=null;break;case"dragenter":case"dragleave":vc=null;break;case"mouseover":case"mouseout":yc=null;break;case"pointerover":case"pointerout":pm.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":gm.delete(d.pointerId)}}function mm(l,d,p,y,E,k){return l===null||l.nativeEvent!==k?(l={blockedOn:d,domEventName:p,eventSystemFlags:y,nativeEvent:k,targetContainers:[E]},d!==null&&(d=ya(d),d!==null&&W4(d)),l):(l.eventSystemFlags|=y,d=l.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),l)}function Bne(l,d,p,y,E){switch(d){case"focusin":return mc=mm(mc,l,d,p,y,E),!0;case"dragenter":return vc=mm(vc,l,d,p,y,E),!0;case"mouseover":return yc=mm(yc,l,d,p,y,E),!0;case"pointerover":var k=E.pointerId;return pm.set(k,mm(pm.get(k)||null,l,d,p,y,E)),!0;case"gotpointercapture":return k=E.pointerId,gm.set(k,mm(gm.get(k)||null,l,d,p,y,E)),!0}return!1}function Z4(l){var d=js(l.target);if(d!==null){var p=a(d);if(p!==null){if(d=p.tag,d===13){if(d=s(p),d!==null){l.blockedOn=d,Za(l.priority,function(){Y4(p)});return}}else if(d===31){if(d=o(p),d!==null){l.blockedOn=d,Za(l.priority,function(){Y4(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Fb(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=oA(l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);Ig=y,p.target.dispatchEvent(y),Ig=null}else return d=ya(p),d!==null&&W4(d),l.blockedOn=p,!1;d.shift()}return!0}function J4(l,d,p){Fb(l)&&p.delete(d)}function Fne(){cA=!1,mc!==null&&Fb(mc)&&(mc=null),vc!==null&&Fb(vc)&&(vc=null),yc!==null&&Fb(yc)&&(yc=null),pm.forEach(J4),gm.forEach(J4)}function $b(l,d){l.blockedOn===d&&(l.blockedOn=null,cA||(cA=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Fne)))}var Ub=null;function e3(l){Ub!==l&&(Ub=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ub===l&&(Ub=null);for(var d=0;d<l.length;d+=3){var p=l[d],y=l[d+1],E=l[d+2];if(typeof y!="function"){if(lA(y||p)===null)continue;break}var k=ya(p);k!==null&&(l.splice(d,3),d-=3,oT(k,{pending:!0,data:E,method:p.method,action:y},y,E))}}))}function ih(l){function d(re){return $b(re,l)}mc!==null&&$b(mc,l),vc!==null&&$b(vc,l),yc!==null&&$b(yc,l),pm.forEach(d),gm.forEach(d);for(var p=0;p<bc.length;p++){var y=bc[p];y.blockedOn===l&&(y.blockedOn=null)}for(;0<bc.length&&(p=bc[0],p.blockedOn===null);)Z4(p),p.blockedOn===null&&bc.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var E=p[y],k=p[y+1],B=E[Ar]||null;if(typeof k=="function")B||e3(p);else if(B){var q=null;if(k&&k.hasAttribute("formAction")){if(E=k,B=k[Ar]||null)q=B.formAction;else if(lA(E)!==null)continue}else q=B.action;typeof q=="function"?p[y+1]=q:(p.splice(y,3),y-=3),e3(p)}}}function t3(){function l(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(B){return E=B})},focusReset:"manual",scroll:"manual"})}function d(){E!==null&&(E(),E=null),y||setTimeout(p,20)}function p(){if(!y&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,E=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(p,100),function(){y=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),E!==null&&(E(),E=null)}}}function uA(l){this._internalRoot=l}qb.prototype.render=uA.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,y=na();H4(p,y,l,d,null,null)},qb.prototype.unmount=uA.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;H4(l.current,2,null,l,null,null),Eb(),d[Rs]=null}};function qb(l){this._internalRoot=l}qb.prototype.unstable_scheduleHydration=function(l){if(l){var d=Ey();l={blockedOn:null,target:l,priority:d};for(var p=0;p<bc.length&&d!==0&&d<bc[p].priority;p++);bc.splice(p,0,l),p===0&&Z4(l)}};var n3=e.version;if(n3!=="19.2.4")throw Error(r(527,n3,"19.2.4"));X.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var $ne={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gb.isDisabled&&Gb.supportsFiber)try{Kn=Gb.inject($ne),Sn=Gb}catch{}}return ym.createRoot=function(l,d){if(!i(l))throw Error(r(299));var p=!1,y="",E=cz,k=uz,B=dz;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(E=d.onUncaughtError),d.onCaughtError!==void 0&&(k=d.onCaughtError),d.onRecoverableError!==void 0&&(B=d.onRecoverableError)),d=q4(l,1,!1,null,null,p,y,null,E,k,B,t3),l[Rs]=d.current,GT(l),new uA(d)},ym.hydrateRoot=function(l,d,p){if(!i(l))throw Error(r(299));var y=!1,E="",k=cz,B=uz,q=dz,re=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(k=p.onUncaughtError),p.onCaughtError!==void 0&&(B=p.onCaughtError),p.onRecoverableError!==void 0&&(q=p.onRecoverableError),p.formState!==void 0&&(re=p.formState)),d=q4(l,1,!0,d,p??null,y,E,re,k,B,q,t3),d.context=G4(null),p=d.current,y=na(),y=Eu(y),E=ic(y),E.callback=null,ac(p,E,y),p=y,d.current.lanes=p,Su(d,p),Xs(d),l[Rs]=d.current,GT(l),new qb(d)},ym.version="19.2.4",ym}var f3;function Jne(){if(f3)return hA.exports;f3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),hA.exports=Zne(),hA.exports}var ere=Jne();const tre="modulepreload",nre=function(t){return"/personal-budget-pwa/"+t},h3={},Jh=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=c(n.map(u=>{if(u=nre(u),u in h3)return;h3[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":tre,f||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((v,b)=>{g.addEventListener("load",v),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function rre(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:s}=t;let o,c;const u=async(h=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(o=await Jh(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(h=>{s?.(h)}),!o)return;o.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),o.addEventListener("installed",h=>{h.isUpdate||r?.()}),o.register({immediate:e}).then(h=>{a?a("/personal-budget-pwa/sw.js",h):i?.(h)}).catch(h=>{s?.(h)})}}return c=f(),u}const ire=()=>{};var p3={};const r8=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},are=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},HP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,f=a>>2,h=(a&3)<<4|o>>4;let g=(o&15)<<2|u>>6,v=u&63;c||(v=64,s||(g=64)),r.push(n[f],n[h],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r8(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):are(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||h==null)throw new sre;const g=a<<2|o>>4;if(r.push(g),u!==64){const v=o<<4&240|u>>2;if(r.push(v),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sre extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ore=function(t){const e=r8(t);return HP.encodeByteArray(e,!0)},i8=function(t){return ore(t).replace(/\./g,"")},a8=function(t){try{return HP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function KP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const lre=()=>KP().__FIREBASE_DEFAULTS__,cre=()=>{if(typeof process>"u"||typeof p3>"u")return;const t=p3.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ure=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&a8(t[1]);return e&&JSON.parse(e)},_S=()=>{try{return ire()||lre()||cre()||ure()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},s8=t=>_S()?.emulatorHosts?.[t],dre=t=>{const e=s8(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},o8=()=>_S()?.config,l8=t=>_S()?.[`_${t}`];class Sv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function cu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function WP(t){return(await fetch(t,{credentials:"include"})).ok}const ev={};function fre(){const t={prod:[],emulator:[]};for(const e of Object.keys(ev))ev[e]?t.emulator.push(e):t.prod.push(e);return t}function hre(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let g3=!1;function c8(t,e){if(typeof window>"u"||typeof document>"u"||!cu(window.location.host)||ev[t]===e||ev[t]||g3)return;ev[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=fre().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{g3=!0,s()},g}function f(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function h(){const g=hre(r),v=n("text"),b=document.getElementById(v)||document.createElement("span"),x=n("learnmore"),w=document.getElementById(x)||document.createElement("a"),S=n("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;o(I),f(w,x);const P=u();c(T,S),I.append(T,b,w,P),document.body.appendChild(I)}a?(b.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function xr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pre(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xr())}function u8(){const t=_S()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gre(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mre(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vre(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yre(){const t=xr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function d8(){return!u8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function f8(){return!u8()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function ES(){try{return typeof indexedDB=="object"}catch{return!1}}function bre(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const xre="FirebaseError";class Co extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xre,Object.setPrototypeOf(this,Co.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fp.prototype.create)}}class Fp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?wre(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Co(i,o,r)}}function wre(t,e){return t.replace(Sre,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Sre=/\{\$([^}]+)}/g;function _re(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(m3(a)&&m3(s)){if(!Qc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function m3(t){return t!==null&&typeof t=="object"}function v0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vm(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Bm(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Ere(t,e){const n=new Tre(t,e);return n.subscribe.bind(n)}class Tre{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Are(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=vA),i.error===void 0&&(i.error=vA),i.complete===void 0&&(i.complete=vA);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Are(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vA(){}const kre=1e3,Cre=2,Ire=14400*1e3,Nre=.5;function Pre(t,e=kre,n=Cre){const r=e*Math.pow(n,t),i=Math.round(Nre*r*(Math.random()-.5)*2);return Math.min(Ire,r+i)}function Lt(t){return t&&t._delegate?t._delegate:t}let xo=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const ed="[DEFAULT]";let Ore=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Sv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Rre(e))try{this.getOrInitializeService({instanceIdentifier:ed})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=ed){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ed){return this.instances.has(e)}getOptions(e=ed){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Dre(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ed){return this.component?this.component.multipleInstances?e:ed:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Dre(t){return t===ed?void 0:t}function Rre(t){return t.instantiationMode==="EAGER"}class Mre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ore(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var kt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(kt||(kt={}));const jre={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},zre=kt.INFO,Lre={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},Vre=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Lre[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let TS=class{constructor(e){this.name=e,this._logLevel=zre,this._logHandler=Vre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jre[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...e),this._logHandler(this,kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...e),this._logHandler(this,kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...e),this._logHandler(this,kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...e),this._logHandler(this,kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...e),this._logHandler(this,kt.ERROR,...e)}};const Bre=(t,e)=>e.some(n=>t instanceof n);let v3,y3;function Fre(){return v3||(v3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $re(){return y3||(y3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h8=new WeakMap,iI=new WeakMap,p8=new WeakMap,yA=new WeakMap,YP=new WeakMap;function Ure(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(Uc(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&h8.set(n,t)}).catch(()=>{}),YP.set(e,t),e}function qre(t){if(iI.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});iI.set(t,e)}let aI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return iI.get(t);if(e==="objectStoreNames")return t.objectStoreNames||p8.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Uc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Gre(t){aI=t(aI)}function Hre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bA(this),e,...n);return p8.set(r,e.sort?e.sort():[e]),Uc(r)}:$re().includes(t)?function(...e){return t.apply(bA(this),e),Uc(h8.get(this))}:function(...e){return Uc(t.apply(bA(this),e))}}function Kre(t){return typeof t=="function"?Hre(t):(t instanceof IDBTransaction&&qre(t),Bre(t,Fre())?new Proxy(t,aI):t)}function Uc(t){if(t instanceof IDBRequest)return Ure(t);if(yA.has(t))return yA.get(t);const e=Kre(t);return e!==t&&(yA.set(t,e),YP.set(e,t)),e}const bA=t=>YP.get(t);function Wre(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=Uc(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Uc(s.result),c.oldVersion,c.newVersion,Uc(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Yre=["get","getKey","getAll","getAllKeys","count"],Xre=["put","add","delete","clear"],xA=new Map;function b3(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xA.get(e))return xA.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Xre.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Yre.includes(n)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&c.done]))[0]};return xA.set(e,a),a}Gre(t=>({...t,get:(e,n,r)=>b3(e,n)||t.get(e,n,r),has:(e,n)=>!!b3(e,n)||t.has(e,n)}));class Qre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Zre(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Zre(t){return t.getComponent()?.type==="VERSION"}const sI="@firebase/app",x3="0.14.8";const ml=new TS("@firebase/app"),Jre="@firebase/app-compat",eie="@firebase/analytics-compat",tie="@firebase/analytics",nie="@firebase/app-check-compat",rie="@firebase/app-check",iie="@firebase/auth",aie="@firebase/auth-compat",sie="@firebase/database",oie="@firebase/data-connect",lie="@firebase/database-compat",cie="@firebase/functions",uie="@firebase/functions-compat",die="@firebase/installations",fie="@firebase/installations-compat",hie="@firebase/messaging",pie="@firebase/messaging-compat",gie="@firebase/performance",mie="@firebase/performance-compat",vie="@firebase/remote-config",yie="@firebase/remote-config-compat",bie="@firebase/storage",xie="@firebase/storage-compat",wie="@firebase/firestore",Sie="@firebase/ai",_ie="@firebase/firestore-compat",Eie="firebase",Tie="12.9.0";const oI="[DEFAULT]",Aie={[sI]:"fire-core",[Jre]:"fire-core-compat",[tie]:"fire-analytics",[eie]:"fire-analytics-compat",[rie]:"fire-app-check",[nie]:"fire-app-check-compat",[iie]:"fire-auth",[aie]:"fire-auth-compat",[sie]:"fire-rtdb",[oie]:"fire-data-connect",[lie]:"fire-rtdb-compat",[cie]:"fire-fn",[uie]:"fire-fn-compat",[die]:"fire-iid",[fie]:"fire-iid-compat",[hie]:"fire-fcm",[pie]:"fire-fcm-compat",[gie]:"fire-perf",[mie]:"fire-perf-compat",[vie]:"fire-rc",[yie]:"fire-rc-compat",[bie]:"fire-gcs",[xie]:"fire-gcs-compat",[wie]:"fire-fst",[_ie]:"fire-fst-compat",[Sie]:"fire-vertex","fire-js":"fire-js",[Eie]:"fire-js-all"};const Aw=new Map,kie=new Map,lI=new Map;function w3(t,e){try{t.container.addComponent(e)}catch(n){ml.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vl(t){const e=t.name;if(lI.has(e))return ml.debug(`There were multiple attempts to register component ${e}.`),!1;lI.set(e,t);for(const n of Aw.values())w3(n,t);for(const n of kie.values())w3(n,t);return!0}function $p(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function oa(t){return t==null?!1:t.settings!==void 0}const Cie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qc=new Fp("app","Firebase",Cie);class Iie{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qc.create("app-deleted",{appName:this._name})}}const Up=Tie;function g8(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:oI,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw qc.create("bad-app-name",{appName:String(i)});if(n||(n=o8()),!n)throw qc.create("no-options");const a=Aw.get(i);if(a){if(Qc(n,a.options)&&Qc(r,a.config))return a;throw qc.create("duplicate-app",{appName:i})}const s=new Mre(i);for(const c of lI.values())s.addComponent(c);const o=new Iie(n,r,s);return Aw.set(i,o),o}function XP(t=oI){const e=Aw.get(t);if(!e&&t===oI&&o8())return g8();if(!e)throw qc.create("no-app",{appName:t});return e}function ys(t,e,n){let r=Aie[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ml.warn(s.join(" "));return}vl(new xo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Nie="firebase-heartbeat-database",Pie=1,_v="firebase-heartbeat-store";let wA=null;function m8(){return wA||(wA=Wre(Nie,Pie,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_v)}catch(n){console.warn(n)}}}}).catch(t=>{throw qc.create("idb-open",{originalErrorMessage:t.message})})),wA}async function Oie(t){try{const n=(await m8()).transaction(_v),r=await n.objectStore(_v).get(v8(t));return await n.done,r}catch(e){if(e instanceof Co)ml.warn(e.message);else{const n=qc.create("idb-get",{originalErrorMessage:e?.message});ml.warn(n.message)}}}async function S3(t,e){try{const r=(await m8()).transaction(_v,"readwrite");await r.objectStore(_v).put(e,v8(t)),await r.done}catch(n){if(n instanceof Co)ml.warn(n.message);else{const r=qc.create("idb-set",{originalErrorMessage:n?.message});ml.warn(r.message)}}}function v8(t){return`${t.name}!${t.options.appId}`}const Die=1024,Rie=30;class Mie{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zie(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_3();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Rie){const i=Lie(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ml.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_3(),{heartbeatsToSend:n,unsentEntries:r}=jie(this._heartbeatsCache.heartbeats),i=i8(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ml.warn(e),""}}}function _3(){return new Date().toISOString().substring(0,10)}function jie(t,e=Die){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),E3(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),E3(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ES()?bre().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Oie(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return S3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return S3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function E3(t){return i8(JSON.stringify({version:2,heartbeats:t})).length}function Lie(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Vie(t){vl(new xo("platform-logger",e=>new Qre(e),"PRIVATE")),vl(new xo("heartbeat",e=>new Mie(e),"PRIVATE")),ys(sI,x3,t),ys(sI,x3,"esm2020"),ys("fire-js","")}Vie("");function y8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Bie=y8,b8=new Fp("auth","Firebase",y8());const kw=new TS("@firebase/auth");function Fie(t,...e){kw.logLevel<=kt.WARN&&kw.warn(`Auth (${Up}): ${t}`,...e)}function Hx(t,...e){kw.logLevel<=kt.ERROR&&kw.error(`Auth (${Up}): ${t}`,...e)}function Ts(t,...e){throw QP(t,...e)}function ho(t,...e){return QP(t,...e)}function x8(t,e,n){const r={...Bie(),[e]:n};return new Fp("auth","Firebase",r).create(e,{appName:t.name})}function cl(t){return x8(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function QP(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return b8.create(t,...e)}function nt(t,e,...n){if(!t)throw QP(e,...n)}function rl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hx(e),new Error(e)}function yl(t,e){t||rl(e)}function cI(){return typeof self<"u"&&self.location?.href||""}function $ie(){return T3()==="http:"||T3()==="https:"}function T3(){return typeof self<"u"&&self.location?.protocol||null}function Uie(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($ie()||mre()||"connection"in navigator)?navigator.onLine:!0}function qie(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class y0{constructor(e,n){this.shortDelay=e,this.longDelay=n,yl(n>e,"Short delay should be less than long delay!"),this.isMobile=pre()||vre()}get(){return Uie()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ZP(t,e){yl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class w8{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Hie=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Kie=new y0(3e4,6e4);function Ns(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Wa(t,e,n,r,i={}){return S8(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=v0({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return gre()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&cu(t.emulatorConfig.host)&&(u.credentials="include"),w8.fetch()(await _8(t,t.config.apiHost,n,o),u)})}async function S8(t,e,n){t._canInitEmulator=!1;const r={...Gie,...e};try{const i=new Yie(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Hb(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hb(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Hb(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Hb(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw x8(t,f,u);Ts(t,f)}}catch(i){if(i instanceof Co)throw i;Ts(t,"network-request-failed",{message:String(i)})}}async function b0(t,e,n,r,i={}){const a=await Wa(t,e,n,r,i);return"mfaPendingCredential"in a&&Ts(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function _8(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?ZP(t.config,i):`${t.config.apiScheme}://${i}`;return Hie.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function Wie(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Yie{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ho(this.auth,"network-request-failed")),Kie.get())})}}function Hb(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ho(t,e,r);return i.customData._tokenResponse=n,i}function A3(t){return t!==void 0&&t.enterprise!==void 0}class Xie{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Wie(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Qie(t,e){return Wa(t,"GET","/v2/recaptchaConfig",Ns(t,e))}async function Zie(t,e){return Wa(t,"POST","/v1/accounts:delete",e)}async function Cw(t,e){return Wa(t,"POST","/v1/accounts:lookup",e)}function tv(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Jie(t,e=!1){const n=Lt(t),r=await n.getIdToken(e),i=JP(r);nt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a?.sign_in_provider;return{claims:i,token:r,authTime:tv(SA(i.auth_time)),issuedAtTime:tv(SA(i.iat)),expirationTime:tv(SA(i.exp)),signInProvider:s||null,signInSecondFactor:a?.sign_in_second_factor||null}}function SA(t){return Number(t)*1e3}function JP(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hx("JWT malformed, contained fewer than 3 sections"),null;try{const i=a8(n);return i?JSON.parse(i):(Hx("Failed to decode base64 JWT payload"),null)}catch(i){return Hx("Caught error parsing JWT payload as JSON",i?.toString()),null}}function k3(t){const e=JP(t);return nt(e,"internal-error"),nt(typeof e.exp<"u","internal-error"),nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ep(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Co&&eae(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function eae({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class tae{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class uI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tv(this.lastLoginAt),this.creationTime=tv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Iw(t){const e=t.auth,n=await t.getIdToken(),r=await ep(t,Cw(e,{idToken:n}));nt(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?E8(i.providerUserInfo):[],s=rae(t.providerData,a),o=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!s?.length,u=o?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new uI(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function nae(t){const e=Lt(t);await Iw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rae(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function E8(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function iae(t,e){const n=await S8(t,{},async()=>{const r=v0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await _8(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&cu(t.emulatorConfig.host)&&(c.credentials="include"),w8.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function aae(t,e){return Wa(t,"POST","/v2/accounts:revokeToken",Ns(t,e))}class Uh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nt(e.idToken,"internal-error"),nt(typeof e.idToken<"u","internal-error"),nt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):k3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){nt(e.length!==0,"internal-error");const n=k3(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await iae(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Uh;return r&&(nt(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(nt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(nt(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uh,this.toJSON())}_performRefresh(){return rl("not implemented")}}function wc(t,e){nt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ms{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new tae(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new uI(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ep(this,this.stsTokenManager.getToken(this.auth,e));return nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Jie(this,e)}reload(){return nae(this)}_assign(e){this!==e&&(nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ms({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Iw(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oa(this.auth.app))return Promise.reject(cl(this.auth));const e=await this.getIdToken();return await ep(this,Zie(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,s=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:h,emailVerified:g,isAnonymous:v,providerData:b,stsTokenManager:x}=n;nt(h&&x,e,"internal-error");const w=Uh.fromJSON(this.name,x);nt(typeof h=="string",e,"internal-error"),wc(r,e.name),wc(i,e.name),nt(typeof g=="boolean",e,"internal-error"),nt(typeof v=="boolean",e,"internal-error"),wc(a,e.name),wc(s,e.name),wc(o,e.name),wc(c,e.name),wc(u,e.name),wc(f,e.name);const S=new ms({uid:h,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:v,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:f});return b&&Array.isArray(b)&&(S.providerData=b.map(T=>({...T}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Uh;i.updateFromServerResponse(n);const a=new ms({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Iw(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];nt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?E8(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!a?.length,o=new Uh;o.updateFromIdToken(r);const c=new ms({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new uI(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,u),c}}const C3=new Map;function il(t){yl(t instanceof Function,"Expected a class definition");let e=C3.get(t);return e?(yl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,C3.set(t,e),e)}class T8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}T8.type="NONE";const I3=T8;function Kx(t,e,n){return`firebase:${t}:${e}:${n}`}class qh{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Kx(this.userKey,i.apiKey,a),this.fullPersistenceKey=Kx("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Cw(this.auth,{idToken:e}).catch(()=>{});return n?ms._fromGetAccountInfoResponse(this.auth,n,e):null}return ms._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new qh(il(I3),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||il(I3);const s=Kx(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const f=await u._get(s);if(f){let h;if(typeof f=="string"){const g=await Cw(e,{idToken:f}).catch(()=>{});if(!g)break;h=await ms._fromGetAccountInfoResponse(e,g,f)}else h=ms._fromJSON(e,f);u!==a&&(o=h),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new qh(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new qh(a,e,r))}}function N3(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(I8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(A8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(P8(e))return"Blackberry";if(O8(e))return"Webos";if(k8(e))return"Safari";if((e.includes("chrome/")||C8(e))&&!e.includes("edge/"))return"Chrome";if(N8(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function A8(t=xr()){return/firefox\//i.test(t)}function k8(t=xr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function C8(t=xr()){return/crios\//i.test(t)}function I8(t=xr()){return/iemobile/i.test(t)}function N8(t=xr()){return/android/i.test(t)}function P8(t=xr()){return/blackberry/i.test(t)}function O8(t=xr()){return/webos/i.test(t)}function e2(t=xr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sae(t=xr()){return e2(t)&&!!window.navigator?.standalone}function oae(){return yre()&&document.documentMode===10}function D8(t=xr()){return e2(t)||N8(t)||O8(t)||P8(t)||/windows phone/i.test(t)||I8(t)}function R8(t,e=[]){let n;switch(t){case"Browser":n=N3(xr());break;case"Worker":n=`${N3(xr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Up}/${r}`}class lae{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function cae(t,e={}){return Wa(t,"GET","/v2/passwordPolicy",Ns(t,e))}const uae=6;class dae{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??uae,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class fae{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P3(this),this.idTokenSubscription=new P3(this),this.beforeStateQueue=new lae(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=b8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=il(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await qh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cw(this,{idToken:e}),r=await ms._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(oa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,s=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!a||a===s)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Iw(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qie()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oa(this.app))return Promise.reject(cl(this));const n=e?Lt(e):null;return n&&nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oa(this.app)?Promise.reject(cl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oa(this.app)?Promise.reject(cl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(il(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cae(this),n=new dae(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await aae(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&il(e)||this._popupRedirectResolver;nt(n,this,"argument-error"),this.redirectPersistenceManager=await qh.create(this,[il(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=R8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(oa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Fie(`Error while retrieving App Check token: ${e.error}`),e?.token}}function uu(t){return Lt(t)}class P3{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ere(n=>this.observer=n)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let AS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hae(t){AS=t}function M8(t){return AS.loadJS(t)}function pae(){return AS.recaptchaEnterpriseScript}function gae(){return AS.gapiScript}function mae(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class vae{constructor(){this.enterprise=new yae}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class yae{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const bae="recaptcha-enterprise",j8="NO_RECAPTCHA";class xae{constructor(e){this.type=bae,this.auth=uu(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{Qie(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Xie(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;A3(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(j8)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vae().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&A3(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=pae();c.length!==0&&(c+=o),M8(c).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function O3(t,e,n,r=!1,i=!1){const a=new xae(t);let s;if(i)s=j8;else try{s=await a.verify(n)}catch{s=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Nw(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await O3(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await O3(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(a)})}function wae(t,e){const n=$p(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Qc(a,e??{}))return i;Ts(i,"already-initialized")}return n.initialize({options:e})}function Sae(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(il);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function _ae(t,e,n){const r=uu(t);nt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=z8(e),{host:s,port:o}=Eae(e),c=o===null?"":`:${o}`,u={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){nt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),nt(Qc(u,r.config.emulator)&&Qc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,cu(s)?(WP(`${a}//${s}${c}`),c8("Auth",!0)):Tae()}function z8(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Eae(t){const e=z8(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:D3(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:D3(s)}}}function D3(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Tae(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class t2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rl("not implemented")}_getIdTokenResponse(e){return rl("not implemented")}_linkToIdToken(e,n){return rl("not implemented")}_getReauthenticationResolver(e){return rl("not implemented")}}async function Aae(t,e){return Wa(t,"POST","/v1/accounts:resetPassword",Ns(t,e))}async function kae(t,e){return Wa(t,"POST","/v1/accounts:signUp",e)}async function Cae(t,e){return Wa(t,"POST","/v1/accounts:update",Ns(t,e))}async function Iae(t,e){return b0(t,"POST","/v1/accounts:signInWithPassword",Ns(t,e))}async function L8(t,e){return Wa(t,"POST","/v1/accounts:sendOobCode",Ns(t,e))}async function Nae(t,e){return L8(t,e)}async function Pae(t,e){return L8(t,e)}async function Oae(t,e){return b0(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}async function Dae(t,e){return b0(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}class Ev extends t2{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ev(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ev(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nw(e,n,"signInWithPassword",Iae);case"emailLink":return Oae(e,{email:this._email,oobCode:this._password});default:Ts(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nw(e,r,"signUpPassword",kae);case"emailLink":return Dae(e,{idToken:n,email:this._email,oobCode:this._password});default:Ts(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Gh(t,e){return b0(t,"POST","/v1/accounts:signInWithIdp",Ns(t,e))}const Rae="http://localhost";class Md extends t2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Md(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ts("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const s=new Md(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Gh(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gh(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gh(e,n)}buildRequest(){const e={requestUri:Rae,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=v0(n)}return e}}function Mae(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jae(t){const e=Vm(Bm(t)).link,n=e?Vm(Bm(e)).deep_link_id:null,r=Vm(Bm(t)).deep_link_id;return(r?Vm(Bm(r)).link:null)||r||n||e||t}class n2{constructor(e){const n=Vm(Bm(e)),r=n.apiKey??null,i=n.oobCode??null,a=Mae(n.mode??null);nt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=jae(e);try{return new n2(n)}catch{return null}}}class of{constructor(){this.providerId=of.PROVIDER_ID}static credential(e,n){return Ev._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=n2.parseLink(n);return nt(r,"argument-error"),Ev._fromEmailAndCode(e,r.code,r.tenantId)}}of.PROVIDER_ID="password";of.EMAIL_PASSWORD_SIGN_IN_METHOD="password";of.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class V8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class x0 extends V8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ic extends x0{constructor(){super("facebook.com")}static credential(e){return Md._fromParams({providerId:Ic.PROVIDER_ID,signInMethod:Ic.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ic.credentialFromTaggedObject(e)}static credentialFromError(e){return Ic.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ic.credential(e.oauthAccessToken)}catch{return null}}}Ic.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ic.PROVIDER_ID="facebook.com";class Nc extends x0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Md._fromParams({providerId:Nc.PROVIDER_ID,signInMethod:Nc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Nc.credentialFromTaggedObject(e)}static credentialFromError(e){return Nc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Nc.credential(n,r)}catch{return null}}}Nc.GOOGLE_SIGN_IN_METHOD="google.com";Nc.PROVIDER_ID="google.com";class Pc extends x0{constructor(){super("github.com")}static credential(e){return Md._fromParams({providerId:Pc.PROVIDER_ID,signInMethod:Pc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pc.credentialFromTaggedObject(e)}static credentialFromError(e){return Pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pc.credential(e.oauthAccessToken)}catch{return null}}}Pc.GITHUB_SIGN_IN_METHOD="github.com";Pc.PROVIDER_ID="github.com";class Oc extends x0{constructor(){super("twitter.com")}static credential(e,n){return Md._fromParams({providerId:Oc.PROVIDER_ID,signInMethod:Oc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Oc.credentialFromTaggedObject(e)}static credentialFromError(e){return Oc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Oc.credential(n,r)}catch{return null}}}Oc.TWITTER_SIGN_IN_METHOD="twitter.com";Oc.PROVIDER_ID="twitter.com";async function zae(t,e){return b0(t,"POST","/v1/accounts:signUp",Ns(t,e))}class jd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await ms._fromIdTokenResponse(e,r,i),s=R3(r);return new jd({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=R3(r);return new jd({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function R3(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Pw extends Co{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Pw.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Pw(e,n,r,i)}}function B8(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Pw._fromErrorAndOperation(t,a,e,r):a})}async function Lae(t,e,n=!1){const r=await ep(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return jd._forOperation(t,"link",r)}async function F8(t,e,n=!1){const{auth:r}=t;if(oa(r.app))return Promise.reject(cl(r));const i="reauthenticate";try{const a=await ep(t,B8(r,i,e,t),n);nt(a.idToken,r,"internal-error");const s=JP(a.idToken);nt(s,r,"internal-error");const{sub:o}=s;return nt(t.uid===o,r,"user-mismatch"),jd._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Ts(r,"user-mismatch"),a}}async function $8(t,e,n=!1){if(oa(t.app))return Promise.reject(cl(t));const r="signIn",i=await B8(t,r,e),a=await jd._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function Vae(t,e){return $8(uu(t),e)}async function Bae(t,e){return F8(Lt(t),e)}function Fae(t,e,n){nt(n.url?.length>0,t,"invalid-continue-uri"),nt(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),nt(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(nt(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(nt(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function r2(t){const e=uu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $ae(t,e,n){const r=uu(t);await Nw(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Pae)}async function Uae(t,e,n){await Aae(Lt(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&r2(t),r})}async function qae(t,e){await Cae(Lt(t),{oobCode:e})}async function Gae(t,e,n){if(oa(t.app))return Promise.reject(cl(t));const r=uu(t),s=await Nw(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zae).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&r2(t),c}),o=await jd._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function Hae(t,e,n){return oa(t.app)?Promise.reject(cl(t)):Vae(Lt(t),of.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&r2(t),r})}async function M3(t,e){const n=Lt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Fae(n.auth,i,e);const{email:a}=await Nae(n.auth,i);a!==t.email&&await t.reload()}async function Kae(t,e){return Wa(t,"POST","/v1/accounts:update",e)}async function Wae(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Lt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await ep(r,Kae(r.auth,a));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function Yae(t,e,n,r){return Lt(t).onIdTokenChanged(e,n,r)}function Xae(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function Qae(t,e,n,r){return Lt(t).onAuthStateChanged(e,n,r)}function j3(t){return Lt(t).signOut()}async function Zae(t){return Lt(t).delete()}const Ow="__sak";class U8{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ow,"1"),this.storage.removeItem(Ow),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jae=1e3,ese=10;class q8 extends U8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=D8(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);oae()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ese):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Jae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}q8.type="LOCAL";const tse=q8;class G8 extends U8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}G8.type="SESSION";const H8=G8;function nse(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class kS{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new kS(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!s?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async u=>u(n.origin,a)),c=await nse(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kS.receivers=[];function i2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class rse{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const u=i2("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const g=h;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function po(){return window}function ise(t){po().location.href=t}function K8(){return typeof po().WorkerGlobalScope<"u"&&typeof po().importScripts=="function"}async function ase(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sse(){return navigator?.serviceWorker?.controller||null}function ose(){return K8()?self:null}const W8="firebaseLocalStorageDb",lse=1,Dw="firebaseLocalStorage",Y8="fbase_key";class w0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function CS(t,e){return t.transaction([Dw],e?"readwrite":"readonly").objectStore(Dw)}function cse(){const t=indexedDB.deleteDatabase(W8);return new w0(t).toPromise()}function dI(){const t=indexedDB.open(W8,lse);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Dw,{keyPath:Y8})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Dw)?e(r):(r.close(),await cse(),e(await dI()))})})}async function z3(t,e,n){const r=CS(t,!0).put({[Y8]:e,value:n});return new w0(r).toPromise()}async function use(t,e){const n=CS(t,!1).get(e),r=await new w0(n).toPromise();return r===void 0?null:r.value}function L3(t,e){const n=CS(t,!0).delete(e);return new w0(n).toPromise()}const dse=800,fse=3;class X8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dI(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>fse)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return K8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kS._getInstance(ose()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ase(),!this.activeServiceWorker)return;this.sender=new rse(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sse()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dI();return await z3(e,Ow,"1"),await L3(e,Ow),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>z3(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>use(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>L3(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=CS(i,!1).getAll();return new w0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dse)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}X8.type="LOCAL";const hse=X8;new y0(3e4,6e4);function pse(t,e){return e?il(e):(nt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class a2 extends t2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function gse(t){return $8(t.auth,new a2(t),t.bypassAuthState)}function mse(t){const{auth:e,user:n}=t;return nt(n,e,"internal-error"),F8(n,new a2(t),t.bypassAuthState)}async function vse(t){const{auth:e,user:n}=t;return nt(n,e,"internal-error"),Lae(n,new a2(t),t.bypassAuthState)}class Q8{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gse;case"linkViaPopup":case"linkViaRedirect":return vse;case"reauthViaPopup":case"reauthViaRedirect":return mse;default:Ts(this.auth,"internal-error")}}resolve(e){yl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yse=new y0(2e3,1e4);class Ch extends Q8{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Ch.currentPopupAction&&Ch.currentPopupAction.cancel(),Ch.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nt(e,this.auth,"internal-error"),e}async onExecution(){yl(this.filter.length===1,"Popup operations only handle one event");const e=i2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ho(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ho(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ch.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ho(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yse.get())};e()}}Ch.currentPopupAction=null;const bse="pendingRedirect",Wx=new Map;class xse extends Q8{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Wx.get(this.auth._key());if(!e){try{const r=await wse(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Wx.set(this.auth._key(),e)}return this.bypassAuthState||Wx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wse(t,e){const n=Ese(e),r=_se(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Sse(t,e){Wx.set(t._key(),e)}function _se(t){return il(t._redirectPersistence)}function Ese(t){return Kx(bse,t.config.apiKey,t.name)}async function Tse(t,e,n=!1){if(oa(t.app))return Promise.reject(cl(t));const r=uu(t),i=pse(r,e),s=await new xse(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}const Ase=600*1e3;class kse{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Cse(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Z8(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ho(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ase&&this.cachedEventUids.clear(),this.cachedEventUids.has(V3(e))}saveEventToCache(e){this.cachedEventUids.add(V3(e)),this.lastProcessedEventTime=Date.now()}}function V3(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Z8({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Cse(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Z8(t);default:return!1}}async function Ise(t,e={}){return Wa(t,"GET","/v1/projects",e)}const Nse=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pse=/^https?/;async function Ose(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Ise(t);for(const n of e)try{if(Dse(n))return}catch{}Ts(t,"unauthorized-domain")}function Dse(t){const e=cI(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Pse.test(n))return!1;if(Nse.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Rse=new y0(3e4,6e4);function B3(){const t=po().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Mse(t){return new Promise((e,n)=>{function r(){B3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B3(),n(ho(t,"network-request-failed"))},timeout:Rse.get()})}if(po().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(po().gapi?.load)r();else{const i=mae("iframefcb");return po()[i]=()=>{gapi.load?r():n(ho(t,"network-request-failed"))},M8(`${gae()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Yx=null,e})}let Yx=null;function jse(t){return Yx=Yx||Mse(t),Yx}const zse=new y0(5e3,15e3),Lse="__/auth/iframe",Vse="emulator/auth/iframe",Bse={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fse=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $se(t){const e=t.config;nt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ZP(e,Vse):`https://${t.config.authDomain}/${Lse}`,r={apiKey:e.apiKey,appName:t.name,v:Up},i=Fse.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${v0(r).slice(1)}`}async function Use(t){const e=await jse(t),n=po().gapi;return nt(n,t,"internal-error"),e.open({where:document.body,url:$se(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Bse,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=ho(t,"network-request-failed"),o=po().setTimeout(()=>{a(s)},zse.get());function c(){po().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}const qse={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gse=500,Hse=600,Kse="_blank",Wse="http://localhost";class F3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Yse(t,e,n,r=Gse,i=Hse){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={...qse,width:r.toString(),height:i.toString(),top:a,left:s},u=xr().toLowerCase();n&&(o=C8(u)?Kse:n),A8(u)&&(e=e||Wse,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[v,b])=>`${g}${v}=${b},`,"");if(sae(u)&&o!=="_self")return Xse(e||"",o),new F3(null);const h=window.open(e||"",o,f);nt(h,t,"popup-blocked");try{h.focus()}catch{}return new F3(h)}function Xse(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const Qse="__/auth/handler",Zse="emulator/auth/handler",Jse=encodeURIComponent("fac");async function $3(t,e,n,r,i,a){nt(t.config.authDomain,t,"auth-domain-config-required"),nt(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Up,eventId:i};if(e instanceof V8){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",_re(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))s[f]=h}if(e instanceof x0){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),u=c?`#${Jse}=${encodeURIComponent(c)}`:"";return`${eoe(t)}?${v0(o).slice(1)}${u}`}function eoe({config:t}){return t.emulator?ZP(t,Zse):`https://${t.authDomain}/${Qse}`}const _A="webStorageSupport";class toe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H8,this._completeRedirectFn=Tse,this._overrideRedirectResult=Sse}async _openPopup(e,n,r,i){yl(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await $3(e,n,r,cI(),i);return Yse(e,a,i2())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await $3(e,n,r,cI(),i);return ise(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(yl(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Use(e),r=new kse(e);return n.register("authEvent",i=>(nt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_A,{type:_A},i=>{const a=i?.[0]?.[_A];a!==void 0&&n(!!a),Ts(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ose(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return D8()||k8()||e2()}}const noe=toe;var U3="@firebase/auth",q3="1.12.0";class roe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ioe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aoe(t){vl(new xo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;nt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:R8(t)},u=new fae(r,i,a,c);return Sae(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),vl(new xo("auth-internal",e=>{const n=uu(e.getProvider("auth").getImmediate());return(r=>new roe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(U3,q3,ioe(t)),ys(U3,q3,"esm2020")}const soe=300,ooe=l8("authIdTokenMaxAge")||soe;let G3=null;const loe=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ooe)return;const i=n?.token;G3!==i&&(G3=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function J8(t=XP()){const e=$p(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wae(t,{popupRedirectResolver:noe,persistence:[hse,tse,H8]}),r=l8("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=loe(a.toString());Xae(n,s,()=>s(n.currentUser)),Yae(n,o=>s(o))}}const i=s8("auth");return i&&_ae(n,`http://${i}`),n}function coe(){return document.getElementsByTagName("head")?.[0]??document}hae({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=ho("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",coe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aoe("Browser");var H3="popstate";function uoe(t={}){function e(i,a){let{pathname:s="/",search:o="",hash:c=""}=lf(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),fI("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof a=="string"?a:Tv(a))}function r(i,a){Fa(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return foe(e,n,r,t)}function In(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function doe(){return Math.random().toString(36).substring(2,10)}function K3(t,e){return{usr:t.state,key:t.key,idx:e}}function fI(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?lf(e):e,state:n,key:e&&e.key||r||doe()}}function Tv({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function lf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function foe(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,u=f();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function f(){return(s.state||{idx:null}).idx}function h(){o="POP";let w=f(),S=w==null?null:w-u;u=w,c&&c({action:o,location:x.location,delta:S})}function g(w,S){o="PUSH";let T=fI(x.location,w,S);n&&n(T,w),u=f()+1;let I=K3(T,u),P=x.createHref(T);try{s.pushState(I,"",P)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(P)}a&&c&&c({action:o,location:x.location,delta:1})}function v(w,S){o="REPLACE";let T=fI(x.location,w,S);n&&n(T,w),u=f();let I=K3(T,u),P=x.createHref(T);s.replaceState(I,"",P),a&&c&&c({action:o,location:x.location,delta:0})}function b(w){return hoe(w)}let x={get action(){return o},get location(){return t(i,s)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(H3,h),c=w,()=>{i.removeEventListener(H3,h),c=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let S=b(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:v,go(w){return s.go(w)}};return x}function hoe(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),In(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Tv(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function eq(t,e,n="/"){return poe(t,e,n,!1)}function poe(t,e,n,r){let i=typeof e=="string"?lf(e):e,a=bl(i.pathname||"/",n);if(a==null)return null;let s=tq(t);goe(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=Aoe(a);o=Eoe(s[c],u,r)}return o}function tq(t,e=[],n=[],r="",i=!1){let a=(s,o,c=i,u)=>{let f={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;In(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let h=ul([r,f.relativePath]),g=n.concat(f);s.children&&s.children.length>0&&(In(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),tq(s.children,e,g,h,c)),!(s.path==null&&!s.index)&&e.push({path:h,score:Soe(h,s.index),routesMeta:g})};return t.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let c of nq(s.path))a(s,o,!0,c)}),e}function nq(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=nq(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function goe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_oe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var moe=/^:[\w-]+$/,voe=3,yoe=2,boe=1,xoe=10,woe=-2,W3=t=>t==="*";function Soe(t,e){let n=t.split("/"),r=n.length;return n.some(W3)&&(r+=woe),e&&(r+=yoe),n.filter(i=>!W3(i)).reduce((i,a)=>i+(moe.test(a)?voe:a===""?boe:xoe),r)}function _oe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Eoe(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=Rw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),g=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=Rw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:ul([a,h.pathname]),pathnameBase:Noe(ul([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=ul([a,h.pathnameBase]))}return s}function Rw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Toe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:h},g)=>{if(f==="*"){let b=o[g]||"";s=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const v=o[g];return h&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function Toe(t,e=!1,n=!0){Fa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Aoe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fa(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function bl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var koe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Coe(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?lf(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=Y3(n.substring(1),"/"):a=Y3(n,e)):a=e,{pathname:a,search:Poe(r),hash:Ooe(i)}}function Y3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function EA(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ioe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rq(t){let e=Ioe(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function iq(t,e,n,r=!1){let i;typeof t=="string"?i=lf(t):(i={...t},In(!i.pathname||!i.pathname.includes("?"),EA("?","pathname","search",i)),In(!i.pathname||!i.pathname.includes("#"),EA("#","pathname","hash",i)),In(!i.search||!i.search.includes("#"),EA("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}o=h>=0?e[h]:"/"}let c=Coe(i,o),u=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var ul=t=>t.join("/").replace(/\/\/+/g,"/"),Noe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Poe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ooe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Doe=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Roe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Moe(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var aq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sq(t,e){let n=t;if(typeof n!="string"||!koe.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(aq)try{let a=new URL(window.location.href),s=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=bl(s.pathname,e);s.origin===a.origin&&o!=null?n=o+s.search+s.hash:i=!0}catch{Fa(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oq=["POST","PUT","PATCH","DELETE"];new Set(oq);var joe=["GET",...oq];new Set(joe);var qp=A.createContext(null);qp.displayName="DataRouter";var IS=A.createContext(null);IS.displayName="DataRouterState";var zoe=A.createContext(!1),lq=A.createContext({isTransitioning:!1});lq.displayName="ViewTransition";var Loe=A.createContext(new Map);Loe.displayName="Fetchers";var Voe=A.createContext(null);Voe.displayName="Await";var Ya=A.createContext(null);Ya.displayName="Navigation";var S0=A.createContext(null);S0.displayName="Location";var Io=A.createContext({outlet:null,matches:[],isDataRoute:!1});Io.displayName="Route";var s2=A.createContext(null);s2.displayName="RouteError";var cq="REACT_ROUTER_ERROR",Boe="REDIRECT",Foe="ROUTE_ERROR_RESPONSE";function $oe(t){if(t.startsWith(`${cq}:${Boe}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Uoe(t){if(t.startsWith(`${cq}:${Foe}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Doe(e.status,e.statusText,e.data)}catch{}}function qoe(t,{relative:e}={}){In(_0(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Ya),{hash:i,pathname:a,search:s}=E0(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:ul([n,a])),r.createHref({pathname:o,search:s,hash:i})}function _0(){return A.useContext(S0)!=null}function Ps(){return In(_0(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(S0).location}var uq="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dq(t){A.useContext(Ya).static||A.useLayoutEffect(t)}function Gi(){let{isDataRoute:t}=A.useContext(Io);return t?ile():Goe()}function Goe(){In(_0(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(qp),{basename:e,navigator:n}=A.useContext(Ya),{matches:r}=A.useContext(Io),{pathname:i}=Ps(),a=JSON.stringify(rq(r)),s=A.useRef(!1);return dq(()=>{s.current=!0}),A.useCallback((c,u={})=>{if(Fa(s.current,uq),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=iq(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ul([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,a,i,t])}A.createContext(null);function Hoe(){let{matches:t}=A.useContext(Io),e=t[t.length-1];return e?e.params:{}}function E0(t,{relative:e}={}){let{matches:n}=A.useContext(Io),{pathname:r}=Ps(),i=JSON.stringify(rq(n));return A.useMemo(()=>iq(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Koe(t,e){return fq(t,e)}function fq(t,e,n,r,i){In(_0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(Ya),{matches:s}=A.useContext(Io),o=s[s.length-1],c=o?o.params:{},u=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let T=h&&h.path||"";pq(u,!h||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let g=Ps(),v;if(e){let T=typeof e=="string"?lf(e):e;In(f==="/"||T.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${T.pathname}" was given in the \`location\` prop.`),v=T}else v=g;let b=v.pathname||"/",x=b;if(f!=="/"){let T=f.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let w=eq(t,{pathname:x});Fa(h||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Fa(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=Zoe(w&&w.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:ul([f,a.encodeLocation?a.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:ul([f,a.encodeLocation?a.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),s,n,r,i);return e&&S?A.createElement(S0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},S):S}function Woe(){let t=rle(),e=Roe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,s)}var Yoe=A.createElement(Woe,null),hq=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=Uoe(t.digest);n&&(t=n)}let e=t!==void 0?A.createElement(Io.Provider,{value:this.props.routeContext},A.createElement(s2.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?A.createElement(Xoe,{error:t},e):e}};hq.contextType=zoe;var TA=new WeakMap;function Xoe({children:t,error:e}){let{basename:n}=A.useContext(Ya);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=$oe(e.digest);if(r){let i=TA.get(e);if(i)throw i;let a=sq(r.location,n);if(aq&&!TA.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw TA.set(e,s),s}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function Qoe({routeContext:t,match:e,children:n}){let r=A.useContext(qp);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(Io.Provider,{value:t},n)}function Zoe(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n?.errors;if(s!=null){let f=a.findIndex(h=>h.route.id&&s?.[h.route.id]!==void 0);In(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,c=-1;if(n)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:v}=n,b=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||b){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let u=n&&r?(f,h)=>{r(f,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Moe(n.matches),errorInfo:h})}:void 0;return a.reduceRight((f,h,g)=>{let v,b=!1,x=null,w=null;n&&(v=s&&h.route.id?s[h.route.id]:void 0,x=h.route.errorElement||Yoe,o&&(c<0&&g===0?(pq("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):c===g&&(b=!0,w=h.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,g+1)),T=()=>{let I;return v?I=x:b?I=w:h.route.Component?I=A.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=f,A.createElement(Qoe,{match:h,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?A.createElement(hq,{location:n.location,revalidation:n.revalidation,component:x,error:v,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:u}):T()},null)}function o2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Joe(t){let e=A.useContext(qp);return In(e,o2(t)),e}function ele(t){let e=A.useContext(IS);return In(e,o2(t)),e}function tle(t){let e=A.useContext(Io);return In(e,o2(t)),e}function l2(t){let e=tle(t),n=e.matches[e.matches.length-1];return In(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function nle(){return l2("useRouteId")}function rle(){let t=A.useContext(s2),e=ele("useRouteError"),n=l2("useRouteError");return t!==void 0?t:e.errors?.[n]}function ile(){let{router:t}=Joe("useNavigate"),e=l2("useNavigate"),n=A.useRef(!1);return dq(()=>{n.current=!0}),A.useCallback(async(i,a={})=>{Fa(n.current,uq),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var X3={};function pq(t,e,n){!e&&!X3[t]&&(X3[t]=!0,Fa(!1,n))}A.memo(ale);function ale({routes:t,future:e,state:n,onError:r}){return fq(t,void 0,n,r,e)}function Da(t){In(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sle({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){In(!_0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof n=="string"&&(n=lf(n));let{pathname:u="/",search:f="",hash:h="",state:g=null,key:v="default"}=n,b=A.useMemo(()=>{let x=bl(u,o);return x==null?null:{location:{pathname:x,search:f,hash:h,state:g,key:v},navigationType:r}},[o,u,f,h,g,v,r]);return Fa(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(Ya.Provider,{value:c},A.createElement(S0.Provider,{children:e,value:b}))}function ole({children:t,location:e}){return Koe(hI(t),e)}function hI(t,e=[]){let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let a=[...e,i];if(r.type===A.Fragment){n.push.apply(n,hI(r.props.children,a));return}In(r.type===Da,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),In(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=hI(r.props.children,a)),n.push(s)}),n}var Xx="get",Qx="application/x-www-form-urlencoded";function NS(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function lle(t){return NS(t)&&t.tagName.toLowerCase()==="button"}function cle(t){return NS(t)&&t.tagName.toLowerCase()==="form"}function ule(t){return NS(t)&&t.tagName.toLowerCase()==="input"}function dle(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fle(t,e){return t.button===0&&(!e||e==="_self")&&!dle(t)}function pI(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function hle(t,e){let n=pI(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var Kb=null;function ple(){if(Kb===null)try{new FormData(document.createElement("form"),0),Kb=!1}catch{Kb=!0}return Kb}var gle=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function AA(t){return t!=null&&!gle.has(t)?(Fa(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qx}"`),null):t}function mle(t,e){let n,r,i,a,s;if(cle(t)){let o=t.getAttribute("action");r=o?bl(o,e):null,n=t.getAttribute("method")||Xx,i=AA(t.getAttribute("enctype"))||Qx,a=new FormData(t)}else if(lle(t)||ule(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?bl(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Xx,i=AA(t.getAttribute("formenctype"))||AA(o.getAttribute("enctype"))||Qx,a=new FormData(o,t),!ple()){let{name:u,type:f,value:h}=t;if(f==="image"){let g=u?`${u}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else u&&a.append(u,h)}}else{if(NS(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Xx,r=null,i=Qx,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function c2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vle(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&bl(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function yle(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ble(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function xle(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await yle(a,n);return s.links?s.links():[]}return[]}));return Ele(r.flat(1).filter(ble).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Q3(t,e,n,r,i,a){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>n[u].pathname!==c.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==c.params["*"];return a==="assets"?e.filter((c,u)=>s(c,u)||o(c,u)):a==="data"?e.filter((c,u)=>{let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function wle(t,e,{includeHydrateFallback:n}={}){return Sle(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Sle(t){return[...new Set(t)]}function _le(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Ele(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(_le(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function gq(){let t=A.useContext(qp);return c2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Tle(){let t=A.useContext(IS);return c2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var u2=A.createContext(void 0);u2.displayName="FrameworkContext";function mq(){let t=A.useContext(u2);return c2(t,"You must render this element inside a <HydratedRouter> element"),t}function Ale(t,e){let n=A.useContext(u2),[r,i]=A.useState(!1),[a,s]=A.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:h}=e,g=A.useRef(null);A.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=S=>{S.forEach(T=>{s(T.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[t]),A.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let v=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,g,{}]:[a,g,{onFocus:bm(o,v),onBlur:bm(c,b),onMouseEnter:bm(u,v),onMouseLeave:bm(f,b),onTouchStart:bm(h,v)}]:[!1,g,{}]}function bm(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function kle({page:t,...e}){let{router:n}=gq(),r=A.useMemo(()=>eq(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(Ile,{page:t,matches:r,...e}):null}function Cle(t){let{manifest:e,routeModules:n}=mq(),[r,i]=A.useState([]);return A.useEffect(()=>{let a=!1;return xle(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function Ile({page:t,matches:e,...n}){let r=Ps(),{future:i,manifest:a,routeModules:s}=mq(),{basename:o}=gq(),{loaderData:c,matches:u}=Tle(),f=A.useMemo(()=>Q3(t,e,u,a,r,"data"),[t,e,u,a,r]),h=A.useMemo(()=>Q3(t,e,u,a,r,"assets"),[t,e,u,a,r]),g=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(T=>{let I=a.routes[T.route.id];!I||!I.hasLoader||(!f.some(P=>P.route.id===T.route.id)&&T.route.id in c&&s[T.route.id]?.shouldRevalidate||I.hasClientLoader?w=!0:x.add(T.route.id))}),x.size===0)return[];let S=vle(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return w&&x.size>0&&S.searchParams.set("_routes",e.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[o,i.unstable_trailingSlashAwareDataRequests,c,r,a,f,e,t,s]),v=A.useMemo(()=>wle(h,a),[h,a]),b=Cle(h);return A.createElement(A.Fragment,null,g.map(x=>A.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),v.map(x=>A.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),b.map(({key:x,link:w})=>A.createElement("link",{key:x,nonce:n.nonce,...w,crossOrigin:w.crossOrigin??n.crossOrigin})))}function Nle(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Ple=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ple&&(window.__reactRouterVersion="7.13.0")}catch{}function Ole({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=A.useRef();i.current==null&&(i.current=uoe({window:r,v5Compat:!0}));let a=i.current,[s,o]=A.useState({action:a.action,location:a.location}),c=A.useCallback(u=>{n===!1?o(u):A.startTransition(()=>o(u))},[n]);return A.useLayoutEffect(()=>a.listen(c),[a,c]),A.createElement(sle,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}var vq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yq=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...v},b){let{basename:x,unstable_useTransitions:w}=A.useContext(Ya),S=typeof u=="string"&&vq.test(u),T=sq(u,x);u=T.to;let I=qoe(u,{relative:i}),[P,O,D]=Ale(r,v),N=jle(u,{replace:s,state:o,target:c,preventScrollReset:f,relative:i,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:w});function C(M){e&&e(M),M.defaultPrevented||N(M)}let R=A.createElement("a",{...v,...D,href:T.absoluteURL||I,onClick:T.isExternal||a?e:C,ref:Nle(b,O),target:c,"data-discover":!S&&n==="render"?"true":void 0});return P&&!S?A.createElement(A.Fragment,null,R,A.createElement(kle,{page:I})):R});yq.displayName="Link";var Dle=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...u},f){let h=E0(s,{relative:u.relative}),g=Ps(),v=A.useContext(IS),{navigator:b,basename:x}=A.useContext(Ya),w=v!=null&&Fle(h)&&o===!0,S=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,T=g.pathname,I=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(T=T.toLowerCase(),I=I?I.toLowerCase():null,S=S.toLowerCase()),I&&x&&(I=bl(I,x)||I);const P=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let O=T===S||!i&&T.startsWith(S)&&T.charAt(P)==="/",D=I!=null&&(I===S||!i&&I.startsWith(S)&&I.charAt(S.length)==="/"),N={isActive:O,isPending:D,isTransitioning:w},C=O?e:void 0,R;typeof r=="function"?R=r(N):R=[r,O?"active":null,D?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(N):a;return A.createElement(yq,{...u,"aria-current":C,className:R,ref:f,style:M,to:s,viewTransition:o},typeof c=="function"?c(N):c)});Dle.displayName="NavLink";var Rle=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=Xx,action:o,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...v},b)=>{let{unstable_useTransitions:x}=A.useContext(Ya),w=Vle(),S=Ble(o,{relative:u}),T=s.toLowerCase()==="get"?"get":"post",I=typeof o=="string"&&vq.test(o),P=O=>{if(c&&c(O),O.defaultPrevented)return;O.preventDefault();let D=O.nativeEvent.submitter,N=D?.getAttribute("formmethod")||s,C=()=>w(D||O.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:i,state:a,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g});x&&n!==!1?A.startTransition(()=>C()):C()};return A.createElement("form",{ref:b,method:T,action:S,onSubmit:r?c:P,...v,"data-discover":!I&&t==="render"?"true":void 0})});Rle.displayName="Form";function Mle(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bq(t){let e=A.useContext(qp);return In(e,Mle(t)),e}function jle(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=Gi(),f=Ps(),h=E0(t,{relative:a});return A.useCallback(g=>{if(fle(g,e)){g.preventDefault();let v=n!==void 0?n:Tv(f)===Tv(h),b=()=>u(t,{replace:v,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});c?A.startTransition(()=>b()):b()}},[f,u,h,n,r,e,t,i,a,s,o,c])}function xq(t){Fa(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(pI(t)),n=A.useRef(!1),r=Ps(),i=A.useMemo(()=>hle(r.search,n.current?null:e.current),[r.search]),a=Gi(),s=A.useCallback((o,c)=>{const u=pI(typeof o=="function"?o(new URLSearchParams(i)):o);n.current=!0,a("?"+u,c)},[a,i]);return[i,s]}var zle=0,Lle=()=>`__${String(++zle)}__`;function Vle(){let{router:t}=bq("useSubmit"),{basename:e}=A.useContext(Ya),n=nle(),r=t.fetch,i=t.navigate;return A.useCallback(async(a,s={})=>{let{action:o,method:c,encType:u,formData:f,body:h}=mle(a,e);if(s.navigate===!1){let g=s.fetcherKey||Lle();await r(g,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,n])}function Ble(t,{relative:e}={}){let{basename:n}=A.useContext(Ya),r=A.useContext(Io);In(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...E0(t||".",{relative:e})},s=Ps();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let f=o.toString();a.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:ul([n,a.pathname])),Tv(a)}function Fle(t,{relative:e}={}){let n=A.useContext(lq);In(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=bq("useViewTransitionState"),i=E0(t,{relative:e});if(!n.isTransitioning)return!1;let a=bl(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=bl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Rw(i.pathname,s)!=null||Rw(i.pathname,a)!=null}var d2=n8();const $le=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ule=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Z3=t=>{const e=Ule(t);return e.charAt(0).toUpperCase()+e.slice(1)},wq=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),qle=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Gle={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Hle=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>A.createElement("svg",{ref:c,...Gle,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:wq("lucide",i),...!a&&!qle(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,f])=>A.createElement(u,f)),...Array.isArray(a)?a:[a]]));const Qe=(t,e)=>{const n=A.forwardRef(({className:r,...i},a)=>A.createElement(Hle,{ref:a,iconNode:e,className:wq(`lucide-${$le(Z3(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Z3(t),n};const Kle=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],$a=Qe("arrow-left",Kle);const Wle=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Yle=Qe("arrow-right-left",Wle);const Xle=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Qle=Qe("arrow-right",Xle);const Zle=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],Jle=Qe("bug",Zle);const ece=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Sq=Qe("calendar",ece);const tce=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Mw=Qe("chart-column",tce);const nce=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],_q=Qe("chart-pie",nce);const rce=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],f2=Qe("check",rce);const ice=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ace=Qe("chevron-down",ice);const sce=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],oce=Qe("chevron-left",sce);const lce=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Jo=Qe("chevron-right",lce);const cce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],uce=Qe("circle-alert",cce);const dce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],fce=Qe("circle-arrow-down",dce);const hce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],pce=Qe("circle-arrow-up",hce);const gce=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jw=Qe("circle-check-big",gce);const mce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ro=Qe("circle-check",mce);const vce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],J3=Qe("circle",vce);const yce=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bce=Qe("clock",yce);const xce=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],wce=Qe("database",xce);const Sce=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ih=Qe("dollar-sign",Sce);const _ce=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],tp=Qe("download",_ce);const Ece=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Tce=Qe("ellipsis",Ece);const Ace=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Eq=Qe("eye-off",Ace);const kce=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Tq=Qe("eye",kce);const Cce=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ld=Qe("file-text",Cce);const Ice=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],h2=Qe("folder-open",Ice);const Nce=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Pce=Qe("folder",Nce);const Oce=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Aq=Qe("funnel",Oce);const Dce=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],np=Qe("grip-vertical",Dce);const Rce=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Mce=Qe("house",Rce);const jce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],eL=Qe("info",jce);const zce=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Lce=Qe("list",zce);const Vce=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],tL=Qe("lock",Vce);const Bce=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Fce=Qe("log-out",Bce);const $ce=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],gI=Qe("mail",$ce);const Uce=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],nL=Qe("mic",Uce);const qce=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Gce=Qe("pause",qce);const Hce=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Kce=Qe("pen",Hce);const Wce=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],cf=Qe("piggy-bank",Wce);const Yce=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],uf=Qe("plus",Yce);const Xce=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],rp=Qe("refresh-cw",Xce);const Qce=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Zce=Qe("rotate-ccw",Qce);const Jce=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],kq=Qe("search",Jce);const eue=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tue=Qe("settings",eue);const nue=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Cq=Qe("skip-forward",nue);const rue=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Av=Qe("sparkles",rue);const iue=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],aue=Qe("tags",iue);const sue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],oue=Qe("target",sue);const lue=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],kv=Qe("trash-2",lue);const cue=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Iq=Qe("trash",cue);const uue=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],due=Qe("trending-down",uue);const fue=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Mc=Qe("trending-up",fue);const hue=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Td=Qe("triangle-alert",hue);const pue=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],gue=Qe("undo-2",pue);const mue=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],vue=Qe("upload",mue);const yue=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],bue=Qe("user-plus",yue);const xue=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],wue=Qe("user",xue);const Sue=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],ip=Qe("wallet",Sue);const _ue=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Gp=Qe("x",_ue),rL=t=>{let e;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const g=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(v=>v(e,g))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,i,o);return o},Eue=(t=>t?rL(t):rL),Tue=t=>t;function Aue(t,e=Tue){const n=nl.useSyncExternalStore(t.subscribe,nl.useCallback(()=>e(t.getState()),[t,e]),nl.useCallback(()=>e(t.getInitialState()),[t,e]));return nl.useDebugValue(n),n}const iL=t=>{const e=Eue(t),n=r=>Aue(e,r);return Object.assign(n,e),n},p2=(t=>t?iL(t):iL),aL={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",VITE_FIREBASE_APP_ID:"1:137454342284:web:0ae73943f9058a4342aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-VMP5DF6273",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app",VITE_RECAPTCHA_ENTERPRISE_SITE_KEY:"6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"},sL=t=>!!t.dispatchFromDevtools&&typeof t.dispatch=="function",Cv=new Map,Wb=t=>{const e=Cv.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},kue=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=Cv.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return Cv.set(n.name,i),{type:"tracked",store:t,...i}},Cue=(t,e)=>{if(e===void 0)return;const n=Cv.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&Cv.delete(t))},Iue=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(s=>s.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},Nue=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:s,store:o,...c}=e;let u;try{u=(a??(aL?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return t(n,r,i);const{connection:f,...h}=kue(o,u,c);let g=!0;i.setState=((x,w,S)=>{const T=n(x,w);if(!g)return T;const I=S===void 0?{type:s||Iue(new Error().stack)||"anonymous"}:typeof S=="string"?{type:S}:S;return o===void 0?(f?.send(I,r()),T):(f?.send({...I,type:`${o}/${I.type}`},{...Wb(c.name),[o]:i.getState()}),T)}),i.devtools={cleanup:()=>{f&&typeof f.unsubscribe=="function"&&f.unsubscribe(),Cue(c.name,o)}};const v=(...x)=>{const w=g;g=!1,n(...x),g=w},b=t(i.setState,r,i);if(h.type==="untracked"?f?.init(b):(h.stores[h.store]=i,f?.init(Object.fromEntries(Object.entries(h.stores).map(([x,w])=>[x,x===h.store?b:w.getState()])))),sL(i)){let x=!1;const w=i.dispatch;i.dispatch=(...S)=>{(aL?"production":void 0)!=="production"&&S[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),w(...S)}}return f.subscribe(x=>{var w;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return kA(x.payload,S=>{if(S.type==="__setState"){if(o===void 0){v(S.state);return}Object.keys(S.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const T=S.state[o];if(T==null)return;JSON.stringify(i.getState())!==JSON.stringify(T)&&v(T);return}sL(i)&&i.dispatch(S)});case"DISPATCH":switch(x.payload.type){case"RESET":return v(b),o===void 0?f?.init(i.getState()):f?.init(Wb(c.name));case"COMMIT":if(o===void 0){f?.init(i.getState());return}return f?.init(Wb(c.name));case"ROLLBACK":return kA(x.state,S=>{if(o===void 0){v(S),f?.init(i.getState());return}v(S[o]),f?.init(Wb(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return kA(x.state,S=>{if(o===void 0){v(S);return}JSON.stringify(i.getState())!==JSON.stringify(S[o])&&v(S[o])});case"IMPORT_STATE":{const{nextLiftedState:S}=x.payload,T=(w=S.computedStates.slice(-1)[0])==null?void 0:w.state;if(!T)return;v(o===void 0?T:T[o]),f?.send(null,S);return}case"PAUSE_RECORDING":return g=!g}return}}),b},Pue=Nue,kA=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function Oue(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const s=c=>c===null?null:JSON.parse(c,void 0),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const mI=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return mI(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return mI(r)(n)}}}},Due=(t,e)=>(n,r,i)=>{let a={storage:Oue(()=>window.localStorage),partialize:w=>w,version:0,merge:(w,S)=>({...S,...w}),...e},s=!1,o=0;const c=new Set,u=new Set;let f=a.storage;if(!f)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...w)},r,i);const h=()=>{const w=a.partialize({...r()});return f.setItem(a.name,{state:w,version:a.version})},g=i.setState;i.setState=(w,S)=>(g(w,S),h());const v=t((...w)=>(n(...w),h()),r,i);i.getInitialState=()=>v;let b;const x=()=>{var w,S;if(!f)return;const T=++o;s=!1,c.forEach(P=>{var O;return P((O=r())!=null?O:v)});const I=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(w=r())!=null?w:v))||void 0;return mI(f.getItem.bind(f))(a.name).then(P=>{if(P)if(typeof P.version=="number"&&P.version!==a.version){if(a.migrate){const O=a.migrate(P.state,P.version);return O instanceof Promise?O.then(D=>[!0,D]):[!0,O]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,P.state];return[!1,void 0]}).then(P=>{var O;if(T!==o)return;const[D,N]=P;if(b=a.merge(N,(O=r())!=null?O:v),n(b,!0),D)return h()}).then(()=>{T===o&&(I?.(b,void 0),b=r(),s=!0,u.forEach(P=>P(b)))}).catch(P=>{T===o&&I?.(void 0,P)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(f=w.storage)},clearStorage:()=>{f?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>x(),hasHydrated:()=>s,onHydrate:w=>(c.add(w),()=>{c.delete(w)}),onFinishHydration:w=>(u.add(w),()=>{u.delete(w)})},a.skipHydration||x(),b||v},Nq=Due;var Rue="firebase",Mue="12.9.0";ys(Rue,Mue,"app");var oL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Gc,Pq;(function(){var t;function e(N,C){function R(){}R.prototype=C.prototype,N.F=C.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(M,V,L){for(var z=Array(arguments.length-2),K=2;K<arguments.length;K++)z[K-2]=arguments[K];return C.prototype[V].apply(M,z)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,C,R){R||(R=0);const M=Array(16);if(typeof C=="string")for(var V=0;V<16;++V)M[V]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(V=0;V<16;++V)M[V]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=N.g[0],R=N.g[1],V=N.g[2];let L=N.g[3],z;z=C+(L^R&(V^L))+M[0]+3614090360&4294967295,C=R+(z<<7&4294967295|z>>>25),z=L+(V^C&(R^V))+M[1]+3905402710&4294967295,L=C+(z<<12&4294967295|z>>>20),z=V+(R^L&(C^R))+M[2]+606105819&4294967295,V=L+(z<<17&4294967295|z>>>15),z=R+(C^V&(L^C))+M[3]+3250441966&4294967295,R=V+(z<<22&4294967295|z>>>10),z=C+(L^R&(V^L))+M[4]+4118548399&4294967295,C=R+(z<<7&4294967295|z>>>25),z=L+(V^C&(R^V))+M[5]+1200080426&4294967295,L=C+(z<<12&4294967295|z>>>20),z=V+(R^L&(C^R))+M[6]+2821735955&4294967295,V=L+(z<<17&4294967295|z>>>15),z=R+(C^V&(L^C))+M[7]+4249261313&4294967295,R=V+(z<<22&4294967295|z>>>10),z=C+(L^R&(V^L))+M[8]+1770035416&4294967295,C=R+(z<<7&4294967295|z>>>25),z=L+(V^C&(R^V))+M[9]+2336552879&4294967295,L=C+(z<<12&4294967295|z>>>20),z=V+(R^L&(C^R))+M[10]+4294925233&4294967295,V=L+(z<<17&4294967295|z>>>15),z=R+(C^V&(L^C))+M[11]+2304563134&4294967295,R=V+(z<<22&4294967295|z>>>10),z=C+(L^R&(V^L))+M[12]+1804603682&4294967295,C=R+(z<<7&4294967295|z>>>25),z=L+(V^C&(R^V))+M[13]+4254626195&4294967295,L=C+(z<<12&4294967295|z>>>20),z=V+(R^L&(C^R))+M[14]+2792965006&4294967295,V=L+(z<<17&4294967295|z>>>15),z=R+(C^V&(L^C))+M[15]+1236535329&4294967295,R=V+(z<<22&4294967295|z>>>10),z=C+(V^L&(R^V))+M[1]+4129170786&4294967295,C=R+(z<<5&4294967295|z>>>27),z=L+(R^V&(C^R))+M[6]+3225465664&4294967295,L=C+(z<<9&4294967295|z>>>23),z=V+(C^R&(L^C))+M[11]+643717713&4294967295,V=L+(z<<14&4294967295|z>>>18),z=R+(L^C&(V^L))+M[0]+3921069994&4294967295,R=V+(z<<20&4294967295|z>>>12),z=C+(V^L&(R^V))+M[5]+3593408605&4294967295,C=R+(z<<5&4294967295|z>>>27),z=L+(R^V&(C^R))+M[10]+38016083&4294967295,L=C+(z<<9&4294967295|z>>>23),z=V+(C^R&(L^C))+M[15]+3634488961&4294967295,V=L+(z<<14&4294967295|z>>>18),z=R+(L^C&(V^L))+M[4]+3889429448&4294967295,R=V+(z<<20&4294967295|z>>>12),z=C+(V^L&(R^V))+M[9]+568446438&4294967295,C=R+(z<<5&4294967295|z>>>27),z=L+(R^V&(C^R))+M[14]+3275163606&4294967295,L=C+(z<<9&4294967295|z>>>23),z=V+(C^R&(L^C))+M[3]+4107603335&4294967295,V=L+(z<<14&4294967295|z>>>18),z=R+(L^C&(V^L))+M[8]+1163531501&4294967295,R=V+(z<<20&4294967295|z>>>12),z=C+(V^L&(R^V))+M[13]+2850285829&4294967295,C=R+(z<<5&4294967295|z>>>27),z=L+(R^V&(C^R))+M[2]+4243563512&4294967295,L=C+(z<<9&4294967295|z>>>23),z=V+(C^R&(L^C))+M[7]+1735328473&4294967295,V=L+(z<<14&4294967295|z>>>18),z=R+(L^C&(V^L))+M[12]+2368359562&4294967295,R=V+(z<<20&4294967295|z>>>12),z=C+(R^V^L)+M[5]+4294588738&4294967295,C=R+(z<<4&4294967295|z>>>28),z=L+(C^R^V)+M[8]+2272392833&4294967295,L=C+(z<<11&4294967295|z>>>21),z=V+(L^C^R)+M[11]+1839030562&4294967295,V=L+(z<<16&4294967295|z>>>16),z=R+(V^L^C)+M[14]+4259657740&4294967295,R=V+(z<<23&4294967295|z>>>9),z=C+(R^V^L)+M[1]+2763975236&4294967295,C=R+(z<<4&4294967295|z>>>28),z=L+(C^R^V)+M[4]+1272893353&4294967295,L=C+(z<<11&4294967295|z>>>21),z=V+(L^C^R)+M[7]+4139469664&4294967295,V=L+(z<<16&4294967295|z>>>16),z=R+(V^L^C)+M[10]+3200236656&4294967295,R=V+(z<<23&4294967295|z>>>9),z=C+(R^V^L)+M[13]+681279174&4294967295,C=R+(z<<4&4294967295|z>>>28),z=L+(C^R^V)+M[0]+3936430074&4294967295,L=C+(z<<11&4294967295|z>>>21),z=V+(L^C^R)+M[3]+3572445317&4294967295,V=L+(z<<16&4294967295|z>>>16),z=R+(V^L^C)+M[6]+76029189&4294967295,R=V+(z<<23&4294967295|z>>>9),z=C+(R^V^L)+M[9]+3654602809&4294967295,C=R+(z<<4&4294967295|z>>>28),z=L+(C^R^V)+M[12]+3873151461&4294967295,L=C+(z<<11&4294967295|z>>>21),z=V+(L^C^R)+M[15]+530742520&4294967295,V=L+(z<<16&4294967295|z>>>16),z=R+(V^L^C)+M[2]+3299628645&4294967295,R=V+(z<<23&4294967295|z>>>9),z=C+(V^(R|~L))+M[0]+4096336452&4294967295,C=R+(z<<6&4294967295|z>>>26),z=L+(R^(C|~V))+M[7]+1126891415&4294967295,L=C+(z<<10&4294967295|z>>>22),z=V+(C^(L|~R))+M[14]+2878612391&4294967295,V=L+(z<<15&4294967295|z>>>17),z=R+(L^(V|~C))+M[5]+4237533241&4294967295,R=V+(z<<21&4294967295|z>>>11),z=C+(V^(R|~L))+M[12]+1700485571&4294967295,C=R+(z<<6&4294967295|z>>>26),z=L+(R^(C|~V))+M[3]+2399980690&4294967295,L=C+(z<<10&4294967295|z>>>22),z=V+(C^(L|~R))+M[10]+4293915773&4294967295,V=L+(z<<15&4294967295|z>>>17),z=R+(L^(V|~C))+M[1]+2240044497&4294967295,R=V+(z<<21&4294967295|z>>>11),z=C+(V^(R|~L))+M[8]+1873313359&4294967295,C=R+(z<<6&4294967295|z>>>26),z=L+(R^(C|~V))+M[15]+4264355552&4294967295,L=C+(z<<10&4294967295|z>>>22),z=V+(C^(L|~R))+M[6]+2734768916&4294967295,V=L+(z<<15&4294967295|z>>>17),z=R+(L^(V|~C))+M[13]+1309151649&4294967295,R=V+(z<<21&4294967295|z>>>11),z=C+(V^(R|~L))+M[4]+4149444226&4294967295,C=R+(z<<6&4294967295|z>>>26),z=L+(R^(C|~V))+M[11]+3174756917&4294967295,L=C+(z<<10&4294967295|z>>>22),z=V+(C^(L|~R))+M[2]+718787259&4294967295,V=L+(z<<15&4294967295|z>>>17),z=R+(L^(V|~C))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(V+(z<<21&4294967295|z>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+L&4294967295}r.prototype.v=function(N,C){C===void 0&&(C=N.length);const R=C-this.blockSize,M=this.C;let V=this.h,L=0;for(;L<C;){if(V==0)for(;L<=R;)i(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<C;)if(M[V++]=N.charCodeAt(L++),V==this.blockSize){i(this,M),V=0;break}}else for(;L<C;)if(M[V++]=N[L++],V==this.blockSize){i(this,M),V=0;break}}this.h=V,this.o+=C},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;C=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=C&255,C/=256;for(this.v(N),N=Array(16),C=0,R=0;R<4;++R)for(let M=0;M<32;M+=8)N[C++]=this.g[R]>>>M&255;return N};function a(N,C){var R=o;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=C(N)}function s(N,C){this.h=C;const R=[];let M=!0;for(let V=N.length-1;V>=0;V--){const L=N[V]|0;M&&L==C||(R[V]=L,M=!1)}this.g=R}var o={};function c(N){return-128<=N&&N<128?a(N,function(C){return new s([C|0],C<0?-1:0)}):new s([N|0],N<0?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return h;if(N<0)return w(u(-N));const C=[];let R=1;for(let M=0;N>=R;M++)C[M]=N/R|0,R*=4294967296;return new s(C,0)}function f(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return w(f(N.substring(1),C));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=u(Math.pow(C,8));let M=h;for(let L=0;L<N.length;L+=8){var V=Math.min(8,N.length-L);const z=parseInt(N.substring(L,L+V),C);V<8?(V=u(Math.pow(C,V)),M=M.j(V).add(u(z))):(M=M.j(R),M=M.add(u(z)))}return M}var h=c(0),g=c(1),v=c(16777216);t=s.prototype,t.m=function(){if(x(this))return-w(this).m();let N=0,C=1;for(let R=0;R<this.g.length;R++){const M=this.i(R);N+=(M>=0?M:4294967296+M)*C,C*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(b(this))return"0";if(x(this))return"-"+w(this).toString(N);const C=u(Math.pow(N,6));var R=this;let M="";for(;;){const V=P(R,C).g;R=S(R,V.j(C));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=V,b(R))return L+M;for(;L.length<6;)L="0"+L;M=L+M}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function b(N){if(N.h!=0)return!1;for(let C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function x(N){return N.h==-1}t.l=function(N){return N=S(this,N),x(N)?-1:b(N)?0:1};function w(N){const C=N.g.length,R=[];for(let M=0;M<C;M++)R[M]=~N.g[M];return new s(R,~N.h).add(g)}t.abs=function(){return x(this)?w(this):this},t.add=function(N){const C=Math.max(this.g.length,N.g.length),R=[];let M=0;for(let V=0;V<=C;V++){let L=M+(this.i(V)&65535)+(N.i(V)&65535),z=(L>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);M=z>>>16,L&=65535,z&=65535,R[V]=z<<16|L}return new s(R,R[R.length-1]&-2147483648?-1:0)};function S(N,C){return N.add(w(C))}t.j=function(N){if(b(this)||b(N))return h;if(x(this))return x(N)?w(this).j(w(N)):w(w(this).j(N));if(x(N))return w(this.j(w(N)));if(this.l(v)<0&&N.l(v)<0)return u(this.m()*N.m());const C=this.g.length+N.g.length,R=[];for(var M=0;M<2*C;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(let V=0;V<N.g.length;V++){const L=this.i(M)>>>16,z=this.i(M)&65535,K=N.i(V)>>>16,Y=N.i(V)&65535;R[2*M+2*V]+=z*Y,T(R,2*M+2*V),R[2*M+2*V+1]+=L*Y,T(R,2*M+2*V+1),R[2*M+2*V+1]+=z*K,T(R,2*M+2*V+1),R[2*M+2*V+2]+=L*K,T(R,2*M+2*V+2)}for(N=0;N<C;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=C;N<2*C;N++)R[N]=0;return new s(R,0)};function T(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function I(N,C){this.g=N,this.h=C}function P(N,C){if(b(C))throw Error("division by zero");if(b(N))return new I(h,h);if(x(N))return C=P(w(N),C),new I(w(C.g),w(C.h));if(x(C))return C=P(N,w(C)),new I(w(C.g),C.h);if(N.g.length>30){if(x(N)||x(C))throw Error("slowDivide_ only works with positive integers.");for(var R=g,M=C;M.l(N)<=0;)R=O(R),M=O(M);var V=D(R,1),L=D(M,1);for(M=D(M,2),R=D(R,2);!b(M);){var z=L.add(M);z.l(N)<=0&&(V=V.add(R),L=z),M=D(M,1),R=D(R,1)}return C=S(N,V.j(C)),new I(V,C)}for(V=h;N.l(C)>=0;){for(R=Math.max(1,Math.floor(N.m()/C.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),L=u(R),z=L.j(C);x(z)||z.l(N)>0;)R-=M,L=u(R),z=L.j(C);b(L)&&(L=g),V=V.add(L),N=S(N,z)}return new I(V,N)}t.B=function(N){return P(this,N).h},t.and=function(N){const C=Math.max(this.g.length,N.g.length),R=[];for(let M=0;M<C;M++)R[M]=this.i(M)&N.i(M);return new s(R,this.h&N.h)},t.or=function(N){const C=Math.max(this.g.length,N.g.length),R=[];for(let M=0;M<C;M++)R[M]=this.i(M)|N.i(M);return new s(R,this.h|N.h)},t.xor=function(N){const C=Math.max(this.g.length,N.g.length),R=[];for(let M=0;M<C;M++)R[M]=this.i(M)^N.i(M);return new s(R,this.h^N.h)};function O(N){const C=N.g.length+1,R=[];for(let M=0;M<C;M++)R[M]=N.i(M)<<1|N.i(M-1)>>>31;return new s(R,N.h)}function D(N,C){const R=C>>5;C%=32;const M=N.g.length-R,V=[];for(let L=0;L<M;L++)V[L]=C>0?N.i(L+R)>>>C|N.i(L+R+1)<<32-C:N.i(L+R);return new s(V,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Pq=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,Gc=s}).apply(typeof oL<"u"?oL:typeof self<"u"?self:typeof window<"u"?window:{});var Yb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Oq,Fm,Dq,Zx,vI,Rq,Mq,jq;(function(){var t,e=Object.defineProperty;function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yb=="object"&&Yb];for(var j=0;j<_.length;++j){var F=_[j];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function i(_,j){if(j)e:{var F=r;_=_.split(".");for(var H=0;H<_.length-1;H++){var pe=_[H];if(!(pe in F))break e;F=F[pe]}_=_[_.length-1],H=F[_],j=j(H),j!=H&&j!=null&&e(F,_,{configurable:!0,writable:!0,value:j})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(j){var F=[],H;for(H in j)Object.prototype.hasOwnProperty.call(j,H)&&F.push([H,j[H]]);return F}});var a=a||{},s=this||self;function o(_){var j=typeof _;return j=="object"&&_!=null||j=="function"}function c(_,j,F){return _.call.apply(_.bind,arguments)}function u(_,j,F){return u=c,u.apply(null,arguments)}function f(_,j){var F=Array.prototype.slice.call(arguments,1);return function(){var H=F.slice();return H.push.apply(H,arguments),_.apply(this,H)}}function h(_,j){function F(){}F.prototype=j.prototype,_.Z=j.prototype,_.prototype=new F,_.prototype.constructor=_,_.Ob=function(H,pe,xe){for(var je=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)je[dt-2]=arguments[dt];return j.prototype[pe].apply(H,je)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function v(_){const j=_.length;if(j>0){const F=Array(j);for(let H=0;H<j;H++)F[H]=_[H];return F}return[]}function b(_,j){for(let H=1;H<arguments.length;H++){const pe=arguments[H];var F=typeof pe;if(F=F!="object"?F:pe?Array.isArray(pe)?"array":F:"null",F=="array"||F=="object"&&typeof pe.length=="number"){F=_.length||0;const xe=pe.length||0;_.length=F+xe;for(let je=0;je<xe;je++)_[F+je]=pe[je]}else _.push(pe)}}class x{constructor(j,F){this.i=j,this.j=F,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function w(_){s.setTimeout(()=>{throw _},0)}function S(){var _=N;let j=null;return _.g&&(j=_.g,_.g=_.g.next,_.g||(_.h=null),j.next=null),j}class T{constructor(){this.h=this.g=null}add(j,F){const H=I.get();H.set(j,F),this.h?this.h.next=H:this.g=H,this.h=H}}var I=new x(()=>new P,_=>_.reset());class P{constructor(){this.next=this.g=this.h=null}set(j,F){this.h=j,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let O,D=!1,N=new T,C=()=>{const _=Promise.resolve(void 0);O=()=>{_.then(R)}};function R(){for(var _;_=S();){try{_.h.call(_.g)}catch(F){w(F)}var j=I;j.j(_),j.h<100&&(j.h++,_.next=j.g,j.g=_)}D=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(_,j){this.type=_,this.g=this.target=j,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var _=!1,j=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const F=()=>{};s.addEventListener("test",F,j),s.removeEventListener("test",F,j)}catch{}return _})();function z(_){return/^[\s\xa0]*$/.test(_)}function K(_,j){V.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,j)}h(K,V),K.prototype.init=function(_,j){const F=this.type=_.type,H=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=j,j=_.relatedTarget,j||(F=="mouseover"?j=_.fromElement:F=="mouseout"&&(j=_.toElement)),this.relatedTarget=j,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&K.Z.h.call(this)},K.prototype.h=function(){K.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Y="closure_listenable_"+(Math.random()*1e6|0),G=0;function X(_,j,F,H,pe){this.listener=_,this.proxy=null,this.src=j,this.type=F,this.capture=!!H,this.ha=pe,this.key=++G,this.da=this.fa=!1}function J(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function ne(_,j,F){for(const H in _)j.call(F,_[H],H,_)}function Q(_,j){for(const F in _)j.call(void 0,_[F],F,_)}function $(_){const j={};for(const F in _)j[F]=_[F];return j}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(_,j){let F,H;for(let pe=1;pe<arguments.length;pe++){H=arguments[pe];for(F in H)_[F]=H[F];for(let xe=0;xe<Z.length;xe++)F=Z[xe],Object.prototype.hasOwnProperty.call(H,F)&&(_[F]=H[F])}}function W(_){this.src=_,this.g={},this.h=0}W.prototype.add=function(_,j,F,H,pe){const xe=_.toString();_=this.g[xe],_||(_=this.g[xe]=[],this.h++);const je=ie(_,j,H,pe);return je>-1?(j=_[je],F||(j.fa=!1)):(j=new X(j,this.src,xe,!!H,pe),j.fa=F,_.push(j)),j};function ue(_,j){const F=j.type;if(F in _.g){var H=_.g[F],pe=Array.prototype.indexOf.call(H,j,void 0),xe;(xe=pe>=0)&&Array.prototype.splice.call(H,pe,1),xe&&(J(j),_.g[F].length==0&&(delete _.g[F],_.h--))}}function ie(_,j,F,H){for(let pe=0;pe<_.length;++pe){const xe=_[pe];if(!xe.da&&xe.listener==j&&xe.capture==!!F&&xe.ha==H)return pe}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),Se={};function ae(_,j,F,H,pe){if(Array.isArray(j)){for(let xe=0;xe<j.length;xe++)ae(_,j[xe],F,H,pe);return null}return F=Ye(F),_&&_[Y]?_.J(j,F,o(H)?!!H.capture:!1,pe):Te(_,j,F,!1,H,pe)}function Te(_,j,F,H,pe,xe){if(!j)throw Error("Invalid event type");const je=o(pe)?!!pe.capture:!!pe;let dt=Oe(_);if(dt||(_[oe]=dt=new W(_)),F=dt.add(j,F,H,je,xe),F.proxy)return F;if(H=he(),F.proxy=H,H.src=_,H.listener=F,_.addEventListener)L||(pe=je),pe===void 0&&(pe=!1),_.addEventListener(j.toString(),H,pe);else if(_.attachEvent)_.attachEvent(be(j.toString()),H);else if(_.addListener&&_.removeListener)_.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return F}function he(){function _(F){return j.call(_.src,_.listener,F)}const j=ke;return _}function te(_,j,F,H,pe){if(Array.isArray(j))for(var xe=0;xe<j.length;xe++)te(_,j[xe],F,H,pe);else H=o(H)?!!H.capture:!!H,F=Ye(F),_&&_[Y]?(_=_.i,xe=String(j).toString(),xe in _.g&&(j=_.g[xe],F=ie(j,F,H,pe),F>-1&&(J(j[F]),Array.prototype.splice.call(j,F,1),j.length==0&&(delete _.g[xe],_.h--)))):_&&(_=Oe(_))&&(j=_.g[j.toString()],_=-1,j&&(_=ie(j,F,H,pe)),(F=_>-1?j[_]:null)&&Pe(F))}function Pe(_){if(typeof _!="number"&&_&&!_.da){var j=_.src;if(j&&j[Y])ue(j.i,_);else{var F=_.type,H=_.proxy;j.removeEventListener?j.removeEventListener(F,H,_.capture):j.detachEvent?j.detachEvent(be(F),H):j.addListener&&j.removeListener&&j.removeListener(H),(F=Oe(j))?(ue(F,_),F.h==0&&(F.src=null,j[oe]=null)):J(_)}}}function be(_){return _ in Se?Se[_]:Se[_]="on"+_}function ke(_,j){if(_.da)_=!0;else{j=new K(j,this);const F=_.listener,H=_.ha||_.src;_.fa&&Pe(_),_=F.call(H,j)}return _}function Oe(_){return _=_[oe],_ instanceof W?_:null}var De="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ye(_){return typeof _=="function"?_:(_[De]||(_[De]=function(j){return _.handleEvent(j)}),_[De])}function Ve(){M.call(this),this.i=new W(this),this.M=this,this.G=null}h(Ve,M),Ve.prototype[Y]=!0,Ve.prototype.removeEventListener=function(_,j,F,H){te(this,_,j,F,H)};function it(_,j){var F,H=_.G;if(H)for(F=[];H;H=H.G)F.push(H);if(_=_.M,H=j.type||j,typeof j=="string")j=new V(j,_);else if(j instanceof V)j.target=j.target||_;else{var pe=j;j=new V(H,_),ee(j,pe)}pe=!0;let xe,je;if(F)for(je=F.length-1;je>=0;je--)xe=j.g=F[je],pe=Ft(xe,H,!0,j)&&pe;if(xe=j.g=_,pe=Ft(xe,H,!0,j)&&pe,pe=Ft(xe,H,!1,j)&&pe,F)for(je=0;je<F.length;je++)xe=j.g=F[je],pe=Ft(xe,H,!1,j)&&pe}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var _=this.i;for(const j in _.g){const F=_.g[j];for(let H=0;H<F.length;H++)J(F[H]);delete _.g[j],_.h--}}this.G=null},Ve.prototype.J=function(_,j,F,H){return this.i.add(String(_),j,!1,F,H)},Ve.prototype.K=function(_,j,F,H){return this.i.add(String(_),j,!0,F,H)};function Ft(_,j,F,H){if(j=_.i.g[String(j)],!j)return!0;j=j.concat();let pe=!0;for(let xe=0;xe<j.length;++xe){const je=j[xe];if(je&&!je.da&&je.capture==F){const dt=je.listener,Fn=je.ha||je.src;je.fa&&ue(_.i,je),pe=dt.call(Fn,H)!==!1&&pe}}return pe&&!H.defaultPrevented}function Le(_,j){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:s.setTimeout(_,j||0)}function st(_){_.g=Le(()=>{_.g=null,_.i&&(_.i=!1,st(_))},_.l);const j=_.h;_.h=null,_.m.apply(null,j)}class ct extends M{constructor(j,F){super(),this.m=j,this.l=F,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:st(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xt(_){M.call(this),this.h=_,this.g={}}h(xt,M);var nn=[];function gn(_){ne(_.g,function(j,F){this.g.hasOwnProperty(F)&&Pe(j)},_),_.g={}}xt.prototype.N=function(){xt.Z.N.call(this),gn(this)},xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ur=s.JSON.stringify,Do=s.JSON.parse,Fl=class{stringify(_){return s.JSON.stringify(_,void 0)}parse(_){return s.JSON.parse(_,void 0)}};function li(){}function Bn(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Sn(){V.call(this,"d")}h(Sn,V);function Yr(){V.call(this,"c")}h(Yr,V);var _n={},yf=null;function $l(){return yf=yf||new Ve}_n.Ia="serverreachability";function Ul(_){V.call(this,_n.Ia,_)}h(Ul,V);function wt(_){const j=$l();it(j,new Ul(j))}_n.STAT_EVENT="statevent";function En(_,j){V.call(this,_n.STAT_EVENT,_),this.stat=j}h(En,V);function Tn(_){const j=$l();it(j,new En(j,_))}_n.Ja="timingevent";function Ki(_,j){V.call(this,_n.Ja,_),this.size=j}h(Ki,V);function va(_,j){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){_()},j)}function ci(){this.g=!0}ci.prototype.ua=function(){this.g=!1};function gE(_,j,F,H,pe,xe){_.info(function(){if(_.g)if(xe){var je="",dt=xe.split("&");for(let Mt=0;Mt<dt.length;Mt++){var Fn=dt[Mt].split("=");if(Fn.length>1){const mn=Fn[0];Fn=Fn[1];const wa=mn.split("_");je=wa.length>=2&&wa[1]=="type"?je+(mn+"="+Fn+"&"):je+(mn+"=redacted&")}}}else je=null;else je=xe;return"XMLHTTP REQ ("+H+") [attempt "+pe+"]: "+j+`
`+F+`
`+je})}function _y(_,j,F,H,pe,xe,je){_.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+pe+"]: "+j+`
`+F+`
`+xe+" "+je})}function Ds(_,j,F,H){_.info(function(){return"XMLHTTP TEXT ("+j+"): "+mE(_,F)+(H?" "+H:"")})}function Su(_,j){_.info(function(){return"TIMEOUT: "+j})}ci.prototype.info=function(){};function mE(_,j){if(!_.g)return j;if(!j)return null;try{const xe=JSON.parse(j);if(xe){for(_=0;_<xe.length;_++)if(Array.isArray(xe[_])){var F=xe[_];if(!(F.length<2)){var H=F[1];if(Array.isArray(H)&&!(H.length<1)){var pe=H[0];if(pe!="noop"&&pe!="stop"&&pe!="close")for(let je=1;je<H.length;je++)H[je]=""}}}}return ur(xe)}catch{return j}}var _u={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bg;function Eu(){}h(Eu,li),Eu.prototype.g=function(){return new XMLHttpRequest},bg=new Eu;function Ro(_){return encodeURIComponent(String(_))}function Ey(_){var j=1;_=_.split(":");const F=[];for(;j>0&&_.length;)F.push(_.shift()),j--;return _.length&&F.push(_.join(":")),F}function Za(_,j,F,H){this.j=_,this.i=j,this.l=F,this.S=H||1,this.V=new xt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ja}function Ja(){this.i=null,this.g="",this.h=!1}var Wn={},Ar={};function Rs(_,j,F){_.M=1,_.A=Tu(Xn(j)),_.u=F,_.R=!0,bf(_,null)}function bf(_,j){_.F=Date.now(),Ms(_),_.B=Xn(_.A);var F=_.B,H=_.S;Array.isArray(H)||(H=[String(H)]),_f(F.i,"t",H),_.C=0,F=_.j.L,_.h=new Ja,_.g=Vy(_.j,F?j:null,!_.u),_.P>0&&(_.O=new ct(u(_.Y,_,_.g),_.P)),j=_.V,F=_.g,H=_.ba;var pe="readystatechange";Array.isArray(pe)||(pe&&(nn[0]=pe.toString()),pe=nn);for(let xe=0;xe<pe.length;xe++){const je=ae(F,pe[xe],H||j.handleEvent,!1,j.h||j);if(!je)break;j.g[je.key]=je}j=_.J?$(_.J):{},_.u?(_.v||(_.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,j)):(_.v="GET",_.g.ea(_.B,_.v,null,j)),wt(),gE(_.i,_.v,_.B,_.l,_.S,_.u)}Za.prototype.ba=function(_){_=_.target;const j=this.O;j&&ns(_)==3?j.j():this.Y(_)},Za.prototype.Y=function(_){try{if(_==this.g)e:{const dt=ns(this.g),Fn=this.g.ya(),Mt=this.g.ca();if(!(dt<3)&&(dt!=3||this.g&&(this.h.h||this.g.la()||Lr(this.g)))){this.K||dt!=4||Fn==7||(Fn==8||Mt<=0?wt(3):wt(2)),js(this);var j=this.g.ca();this.X=j;var F=vE(this);if(this.o=j==200,_y(this.i,this.v,this.B,this.l,this.S,dt,j),this.o){if(this.U&&!this.L){t:{if(this.g){var H,pe=this.g;if((H=pe.g?pe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(H)){var xe=H;break t}}xe=null}if(_=xe)Ds(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zs(this,_);else{this.o=!1,this.m=3,Tn(12),Wi(this),ya(this);break e}}if(this.R){_=!0;let mn;for(;!this.K&&this.C<F.length;)if(mn=Ay(this,F),mn==Ar){dt==4&&(this.m=4,Tn(14),_=!1),Ds(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Wn){this.m=4,Tn(15),Ds(this.i,this.l,F,"[Invalid Chunk]"),_=!1;break}else Ds(this.i,this.l,mn,null),zs(this,mn);if(Ty(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||F.length!=0||this.h.h||(this.m=1,Tn(16),_=!1),this.o=this.o&&_,!_)Ds(this.i,this.l,F,"[Invalid Chunked Response]"),Wi(this),ya(this);else if(F.length>0&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.aa&&!je.P&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),Rg(je),je.P=!0,Tn(11))}}else Ds(this.i,this.l,F,null),zs(this,F);dt==4&&Wi(this),this.o&&!this.K&&(dt==4?My(this.j,this):(this.o=!1,Ms(this)))}else jo(this.g),j==400&&F.indexOf("Unknown SID")>0?(this.m=3,Tn(12)):(this.m=0,Tn(13)),Wi(this),ya(this)}}}catch{}};function vE(_){if(!Ty(_))return _.g.la();const j=Lr(_.g);if(j==="")return"";let F="";const H=j.length,pe=ns(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Wi(_),ya(_),"";_.h.i=new s.TextDecoder}for(let xe=0;xe<H;xe++)_.h.h=!0,F+=_.h.i.decode(j[xe],{stream:!(pe&&xe==H-1)});return j.length=0,_.h.g+=F,_.C=0,_.h.g}function Ty(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function Ay(_,j){var F=_.C,H=j.indexOf(`
`,F);return H==-1?Ar:(F=Number(j.substring(F,H)),isNaN(F)?Wn:(H+=1,H+F>j.length?Ar:(j=j.slice(H,H+F),_.C=H+F,j)))}Za.prototype.cancel=function(){this.K=!0,Wi(this)};function Ms(_){_.T=Date.now()+_.H,xf(_,_.H)}function xf(_,j){if(_.D!=null)throw Error("WatchDog timer not null");_.D=va(u(_.aa,_),j)}function js(_){_.D&&(s.clearTimeout(_.D),_.D=null)}Za.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(Su(this.i,this.B),this.M!=2&&(wt(),Tn(17)),Wi(this),this.m=2,ya(this)):xf(this,this.T-_)};function ya(_){_.j.I==0||_.K||My(_.j,_)}function Wi(_){js(_);var j=_.O;j&&typeof j.dispose=="function"&&j.dispose(),_.O=null,gn(_.V),_.g&&(j=_.g,_.g=null,j.abort(),j.dispose())}function zs(_,j){try{var F=_.j;if(F.I!=0&&(F.g==_||Vs(F.h,_))){if(!_.L&&Vs(F.h,_)&&F.I==3){try{var H=F.Ba.g.parse(j)}catch{H=null}if(Array.isArray(H)&&H.length==3){var pe=H;if(pe[0]==0){e:if(!F.v){if(F.g)if(F.g.F+3e3<_.F)Cf(F),Ql(F);else break e;Ou(F),Tn(18)}}else F.xa=pe[1],0<F.xa-F.K&&pe[2]<37500&&F.F&&F.A==0&&!F.C&&(F.C=va(u(F.Va,F),6e3));Ls(F.h)<=1&&F.ta&&(F.ta=void 0)}else Gs(F,11)}else if((_.L||F.g==_)&&Cf(F),!z(j))for(pe=F.Ba.g.parse(j),j=0;j<pe.length;j++){let Mt=pe[j];const mn=Mt[0];if(!(mn<=F.K))if(F.K=mn,Mt=Mt[1],F.I==2)if(Mt[0]=="c"){F.M=Mt[1],F.ba=Mt[2];const wa=Mt[3];wa!=null&&(F.ka=wa,F.j.info("VER="+F.ka));const Hs=Mt[4];Hs!=null&&(F.za=Hs,F.j.info("SVER="+F.za));const rs=Mt[5];rs!=null&&typeof rs=="number"&&rs>0&&(H=1.5*rs,F.O=H,F.j.info("backChannelRequestTimeoutMs_="+H)),H=F;const is=_.g;if(is){const Du=is.g?is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Du){var xe=H.h;xe.g||Du.indexOf("spdy")==-1&&Du.indexOf("quic")==-1&&Du.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(Sg(xe,xe.h),xe.h=null))}if(H.G){const If=is.g?is.g.getResponseHeader("X-HTTP-Session-Id"):null;If&&(H.wa=If,$t(H.J,H.G,If))}}F.I=3,F.l&&F.l.ra(),F.aa&&(F.T=Date.now()-_.F,F.j.info("Handshake RTT: "+F.T+"ms")),H=F;var je=_;if(H.na=Ly(H,H.L?H.ba:null,H.W),je.L){_g(H.h,je);var dt=je,Fn=H.O;Fn&&(dt.H=Fn),dt.D&&(js(dt),Ms(dt)),H.g=je}else Dy(H);F.i.length>0&&qs(F)}else Mt[0]!="stop"&&Mt[0]!="close"||Gs(F,7);else F.I==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?Gs(F,7):Og(F):Mt[0]!="noop"&&F.l&&F.l.qa(Mt),F.A=0)}}wt(4)}catch{}}var Yn=class{constructor(_,j){this.g=_,this.map=j}};function xg(_){this.l=_||10,s.PerformanceNavigationTiming?(_=s.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wg(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Ls(_){return _.h?1:_.g?_.g.size:0}function Vs(_,j){return _.h?_.h==j:_.g?_.g.has(j):!1}function Sg(_,j){_.g?_.g.add(j):_.h=j}function _g(_,j){_.h&&_.h==j?_.h=null:_.g&&_.g.has(j)&&_.g.delete(j)}xg.prototype.cancel=function(){if(this.i=Eg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function Eg(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let j=_.i;for(const F of _.g.values())j=j.concat(F.G);return j}return v(_.i)}var ky=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wf(_,j){if(_){_=_.split("&");for(let F=0;F<_.length;F++){const H=_[F].indexOf("=");let pe,xe=null;H>=0?(pe=_[F].substring(0,H),xe=_[F].substring(H+1)):pe=_[F],j(pe,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function Yi(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;_ instanceof Yi?(this.l=_.l,kr(this,_.j),this.o=_.o,this.g=_.g,ql(this,_.u),this.h=_.h,Tg(this,Py(_.i)),this.m=_.m):_&&(j=String(_).match(ky))?(this.l=!1,kr(this,j[1]||"",!0),this.o=Bs(j[2]||""),this.g=Bs(j[3]||"",!0),ql(this,j[4]),this.h=Bs(j[5]||"",!0),Tg(this,j[6]||"",!0),this.m=Bs(j[7]||"")):(this.l=!1,this.i=new Hl(null,this.l))}Yi.prototype.toString=function(){const _=[];var j=this.j;j&&_.push(Au(j,Sf,!0),":");var F=this.g;return(F||j=="file")&&(_.push("//"),(j=this.o)&&_.push(Au(j,Sf,!0),"@"),_.push(Ro(F).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.u,F!=null&&_.push(":",String(F))),(F=this.h)&&(this.g&&F.charAt(0)!="/"&&_.push("/"),_.push(Au(F,F.charAt(0)=="/"?Ag:Cy,!0))),(F=this.i.toString())&&_.push("?",F),(F=this.m)&&_.push("#",Au(F,Iy)),_.join("")},Yi.prototype.resolve=function(_){const j=Xn(this);let F=!!_.j;F?kr(j,_.j):F=!!_.o,F?j.o=_.o:F=!!_.g,F?j.g=_.g:F=_.u!=null;var H=_.h;if(F)ql(j,_.u);else if(F=!!_.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var pe=j.h.lastIndexOf("/");pe!=-1&&(H=j.h.slice(0,pe+1)+H)}if(pe=H,pe==".."||pe==".")H="";else if(pe.indexOf("./")!=-1||pe.indexOf("/.")!=-1){H=pe.lastIndexOf("/",0)==0,pe=pe.split("/");const xe=[];for(let je=0;je<pe.length;){const dt=pe[je++];dt=="."?H&&je==pe.length&&xe.push(""):dt==".."?((xe.length>1||xe.length==1&&xe[0]!="")&&xe.pop(),H&&je==pe.length&&xe.push("")):(xe.push(dt),H=!0)}H=xe.join("/")}else H=pe}return F?j.h=H:F=_.i.toString()!=="",F?Tg(j,Py(_.i)):F=!!_.m,F&&(j.m=_.m),j};function Xn(_){return new Yi(_)}function kr(_,j,F){_.j=F?Bs(j,!0):j,_.j&&(_.j=_.j.replace(/:$/,""))}function ql(_,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);_.u=j}else _.u=null}function Tg(_,j,F){j instanceof Hl?(_.i=j,Ef(_.i,_.l)):(F||(j=Au(j,Gl)),_.i=new Hl(j,_.l))}function $t(_,j,F){_.i.set(j,F)}function Tu(_){return $t(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Bs(_,j){return _?j?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Au(_,j,F){return typeof _=="string"?(_=encodeURI(_).replace(j,Ti),F&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Ti(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var Sf=/[#\/\?@]/g,Cy=/[#\?:]/g,Ag=/[#\?]/g,Gl=/[#\?@]/g,Iy=/#/g;function Hl(_,j){this.h=this.g=null,this.i=_||null,this.j=!!j}function Ai(_){_.g||(_.g=new Map,_.h=0,_.i&&wf(_.i,function(j,F){_.add(decodeURIComponent(j.replace(/\+/g," ")),F)}))}t=Hl.prototype,t.add=function(_,j){Ai(this),this.i=null,_=Kl(this,_);let F=this.g.get(_);return F||this.g.set(_,F=[]),F.push(j),this.h+=1,this};function Ny(_,j){Ai(_),j=Kl(_,j),_.g.has(j)&&(_.i=null,_.h-=_.g.get(j).length,_.g.delete(j))}function kg(_,j){return Ai(_),j=Kl(_,j),_.g.has(j)}t.forEach=function(_,j){Ai(this),this.g.forEach(function(F,H){F.forEach(function(pe){_.call(j,pe,H,this)},this)},this)};function Cg(_,j){Ai(_);let F=[];if(typeof j=="string")kg(_,j)&&(F=F.concat(_.g.get(Kl(_,j))));else for(_=Array.from(_.g.values()),j=0;j<_.length;j++)F=F.concat(_[j]);return F}t.set=function(_,j){return Ai(this),this.i=null,_=Kl(this,_),kg(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[j]),this.h+=1,this},t.get=function(_,j){return _?(_=Cg(this,_),_.length>0?String(_[0]):j):j};function _f(_,j,F){Ny(_,j),F.length>0&&(_.i=null,_.g.set(Kl(_,j),v(F)),_.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],j=Array.from(this.g.keys());for(let H=0;H<j.length;H++){var F=j[H];const pe=Ro(F);F=Cg(this,F);for(let xe=0;xe<F.length;xe++){let je=pe;F[xe]!==""&&(je+="="+Ro(F[xe])),_.push(je)}}return this.i=_.join("&")};function Py(_){const j=new Hl;return j.i=_.i,_.g&&(j.g=new Map(_.g),j.h=_.h),j}function Kl(_,j){return j=String(j),_.j&&(j=j.toLowerCase()),j}function Ef(_,j){j&&!_.j&&(Ai(_),_.i=null,_.g.forEach(function(F,H){const pe=H.toLowerCase();H!=pe&&(Ny(this,H),_f(this,pe,F))},_)),_.j=j}function es(_,j){const F=new ci;if(s.Image){const H=new Image;H.onload=f(ba,F,"TestLoadImage: loaded",!0,j,H),H.onerror=f(ba,F,"TestLoadImage: error",!1,j,H),H.onabort=f(ba,F,"TestLoadImage: abort",!1,j,H),H.ontimeout=f(ba,F,"TestLoadImage: timeout",!1,j,H),s.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=_}else j(!1)}function Ig(_,j){const F=new ci,H=new AbortController,pe=setTimeout(()=>{H.abort(),ba(F,"TestPingServer: timeout",!1,j)},1e4);fetch(_,{signal:H.signal}).then(xe=>{clearTimeout(pe),xe.ok?ba(F,"TestPingServer: ok",!0,j):ba(F,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(pe),ba(F,"TestPingServer: error",!1,j)})}function ba(_,j,F,H,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),H(F)}catch{}}function Wl(){this.g=new Fl}function Fs(_){this.i=_.Sb||null,this.h=_.ab||!1}h(Fs,li),Fs.prototype.g=function(){return new ku(this.i,this.h)};function ku(_,j){Ve.call(this),this.H=_,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(ku,Ve),t=ku.prototype,t.open=function(_,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=j,this.readyState=1,ts(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(j.body=_),(this.H||s).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Yl(this)),this.readyState=0},t.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,ts(this)),this.g&&(this.readyState=3,ts(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tf(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function Tf(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}t.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var j=_.value?_.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!_.done}))&&(this.response=this.responseText+=j)}_.done?Yl(this):ts(this),this.readyState==3&&Tf(this)}},t.Oa=function(_){this.g&&(this.response=this.responseText=_,Yl(this))},t.Na=function(_){this.g&&(this.response=_,Yl(this))},t.ga=function(){this.g&&Yl(this)};function Yl(_){_.readyState=4,_.l=null,_.j=null,_.B=null,ts(_)}t.setRequestHeader=function(_,j){this.A.append(_,j)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],j=this.h.entries();for(var F=j.next();!F.done;)F=F.value,_.push(F[0]+": "+F[1]),F=j.next();return _.join(`\r
`)};function ts(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(ku.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function xa(_){let j="";return ne(_,function(F,H){j+=H,j+=":",j+=F,j+=`\r
`}),j}function Cu(_,j,F){e:{for(H in F){var H=!1;break e}H=!0}H||(F=xa(F),typeof _=="string"?F!=null&&Ro(F):$t(_,j,F))}function Wt(_){Ve.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Wt,Ve);var $s=/^https?$/i,Ng=["POST","PUT"];t=Wt.prototype,t.Fa=function(_){this.H=_},t.ea=function(_,j,F,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);j=j?j.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bg.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(j,String(_),!0),this.B=!1}catch(xe){Iu(this,xe);return}if(_=F||"",F=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var pe in H)F.set(pe,H[pe]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const xe of H.keys())F.set(xe,H.get(xe));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(F.keys()).find(xe=>xe.toLowerCase()=="content-type"),pe=s.FormData&&_ instanceof s.FormData,!(Array.prototype.indexOf.call(Ng,j,void 0)>=0)||H||pe||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,je]of F)this.g.setRequestHeader(xe,je);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(xe){Iu(this,xe)}};function Iu(_,j){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=j,_.o=5,Pg(_),Mo(_)}function Pg(_){_.A||(_.A=!0,it(_,"complete"),it(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,it(this,"complete"),it(this,"abort"),Mo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mo(this,!0)),Wt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Nu(this):this.Xa())},t.Xa=function(){Nu(this)};function Nu(_){if(_.h&&typeof a<"u"){if(_.v&&ns(_)==4)setTimeout(_.Ca.bind(_),0);else if(it(_,"readystatechange"),ns(_)==4){_.h=!1;try{const xe=_.ca();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var F;if(!(F=j)){var H;if(H=xe===0){let je=String(_.D).match(ky)[1]||null;!je&&s.self&&s.self.location&&(je=s.self.location.protocol.slice(0,-1)),H=!$s.test(je?je.toLowerCase():"")}F=H}if(F)it(_,"complete"),it(_,"success");else{_.o=6;try{var pe=ns(_)>2?_.g.statusText:""}catch{pe=""}_.l=pe+" ["+_.ca()+"]",Pg(_)}}finally{Mo(_)}}}}function Mo(_,j){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const F=_.g;_.g=null,j||it(_,"ready");try{F.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ns(_){return _.g?_.g.readyState:0}t.ca=function(){try{return ns(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(_){if(this.g){var j=this.g.responseText;return _&&j.indexOf(_)==0&&(j=j.substring(_.length)),Do(j)}};function Lr(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function jo(_){const j={};_=(_.g&&ns(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<_.length;H++){if(z(_[H]))continue;var F=Ey(_[H]);const pe=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const xe=j[pe]||[];j[pe]=xe,xe.push(F)}Q(j,function(H){return H.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Us(_,j,F){return F&&F.internalChannelParams&&F.internalChannelParams[_]||j}function Xl(_){this.za=0,this.i=[],this.j=new ci,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Us("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Us("baseRetryDelayMs",5e3,_),this.Za=Us("retryDelaySeedMs",1e4,_),this.Ta=Us("forwardChannelMaxRetries",2,_),this.va=Us("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new xg(_&&_.concurrentRequestLimit),this.Ba=new Wl,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Xl.prototype,t.ka=8,t.I=1,t.connect=function(_,j,F,H){Tn(0),this.W=_,this.H=j||{},F&&H!==void 0&&(this.H.OSID=F,this.H.OAID=H),this.F=this.X,this.J=Ly(this,null,this.W),qs(this)};function Og(_){if(Af(_),_.I==3){var j=_.V++,F=Xn(_.J);if($t(F,"SID",_.M),$t(F,"RID",j),$t(F,"TYPE","terminate"),Pu(_,F),j=new Za(_,_.j,j),j.M=2,j.A=Tu(Xn(F)),F=!1,s.navigator&&s.navigator.sendBeacon)try{F=s.navigator.sendBeacon(j.A.toString(),"")}catch{}!F&&s.Image&&(new Image().src=j.A,F=!0),F||(j.g=Vy(j.j,null),j.g.ea(j.A)),j.F=Date.now(),Ms(j)}zy(_)}function Ql(_){_.g&&(Rg(_),_.g.cancel(),_.g=null)}function Af(_){Ql(_),_.v&&(s.clearTimeout(_.v),_.v=null),Cf(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&s.clearTimeout(_.m),_.m=null)}function qs(_){if(!wg(_.h)&&!_.m){_.m=!0;var j=_.Ea;O||C(),D||(O(),D=!0),N.add(j,_),_.D=0}}function kf(_,j){return Ls(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=j.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=va(u(_.Ea,_,j),jy(_,_.D)),_.D++,!0)}t.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const pe=new Za(this,this.j,_);let xe=this.o;if(this.U&&(xe?(xe=$(xe),ee(xe,this.U)):xe=this.U),this.u!==null||this.R||(pe.J=xe,xe=null),this.S)e:{for(var j=0,F=0;F<this.i.length;F++){t:{var H=this.i[F];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(j+=H,j>4096){j=F;break e}if(j===4096||F===this.i.length-1){j=F+1;break e}}j=1e3}else j=1e3;j=Oy(this,pe,j),F=Xn(this.J),$t(F,"RID",_),$t(F,"CVER",22),this.G&&$t(F,"X-HTTP-Session-Id",this.G),Pu(this,F),xe&&(this.R?j="headers="+Ro(xa(xe))+"&"+j:this.u&&Cu(F,this.u,xe)),Sg(this.h,pe),this.Ra&&$t(F,"TYPE","init"),this.S?($t(F,"$req",j),$t(F,"SID","null"),pe.U=!0,Rs(pe,F,null)):Rs(pe,F,j),this.I=2}}else this.I==3&&(_?Dg(this,_):this.i.length==0||wg(this.h)||Dg(this))};function Dg(_,j){var F;j?F=j.l:F=_.V++;const H=Xn(_.J);$t(H,"SID",_.M),$t(H,"RID",F),$t(H,"AID",_.K),Pu(_,H),_.u&&_.o&&Cu(H,_.u,_.o),F=new Za(_,_.j,F,_.D+1),_.u===null&&(F.J=_.o),j&&(_.i=j.G.concat(_.i)),j=Oy(_,F,1e3),F.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),Sg(_.h,F),Rs(F,H,j)}function Pu(_,j){_.H&&ne(_.H,function(F,H){$t(j,H,F)}),_.l&&ne({},function(F,H){$t(j,H,F)})}function Oy(_,j,F){F=Math.min(_.i.length,F);const H=_.l?u(_.l.Ka,_.l,_):null;e:{var pe=_.i;let dt=-1;for(;;){const Fn=["count="+F];dt==-1?F>0?(dt=pe[0].g,Fn.push("ofs="+dt)):dt=0:Fn.push("ofs="+dt);let Mt=!0;for(let mn=0;mn<F;mn++){var xe=pe[mn].g;const wa=pe[mn].map;if(xe-=dt,xe<0)dt=Math.max(0,pe[mn].g-100),Mt=!1;else try{xe="req"+xe+"_"||"";try{var je=wa instanceof Map?wa:Object.entries(wa);for(const[Hs,rs]of je){let is=rs;o(rs)&&(is=ur(rs)),Fn.push(xe+Hs+"="+encodeURIComponent(is))}}catch(Hs){throw Fn.push(xe+"type="+encodeURIComponent("_badmap")),Hs}}catch{H&&H(wa)}}if(Mt){je=Fn.join("&");break e}}je=void 0}return _=_.i.splice(0,F),j.G=_,je}function Dy(_){if(!_.g&&!_.v){_.Y=1;var j=_.Da;O||C(),D||(O(),D=!0),N.add(j,_),_.A=0}}function Ou(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=va(u(_.Da,_),jy(_,_.A)),_.A++,!0)}t.Da=function(){if(this.v=null,Ry(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=va(u(this.Wa,this),_)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tn(10),Ql(this),Ry(this))};function Rg(_){_.B!=null&&(s.clearTimeout(_.B),_.B=null)}function Ry(_){_.g=new Za(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var j=Xn(_.na);$t(j,"RID","rpc"),$t(j,"SID",_.M),$t(j,"AID",_.K),$t(j,"CI",_.F?"0":"1"),!_.F&&_.ia&&$t(j,"TO",_.ia),$t(j,"TYPE","xmlhttp"),Pu(_,j),_.u&&_.o&&Cu(j,_.u,_.o),_.O&&(_.g.H=_.O);var F=_.g;_=_.ba,F.M=1,F.A=Tu(Xn(j)),F.u=null,F.R=!0,bf(F,_)}t.Va=function(){this.C!=null&&(this.C=null,Ql(this),Ou(this),Tn(19))};function Cf(_){_.C!=null&&(s.clearTimeout(_.C),_.C=null)}function My(_,j){var F=null;if(_.g==j){Cf(_),Rg(_),_.g=null;var H=2}else if(Vs(_.h,j))F=j.G,_g(_.h,j),H=1;else return;if(_.I!=0){if(j.o)if(H==1){F=j.u?j.u.length:0,j=Date.now()-j.F;var pe=_.D;H=$l(),it(H,new Ki(H,F)),qs(_)}else Dy(_);else if(pe=j.m,pe==3||pe==0&&j.X>0||!(H==1&&kf(_,j)||H==2&&Ou(_)))switch(F&&F.length>0&&(j=_.h,j.i=j.i.concat(F)),pe){case 1:Gs(_,5);break;case 4:Gs(_,10);break;case 3:Gs(_,6);break;default:Gs(_,2)}}}function jy(_,j){let F=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(F*=2),F*j}function Gs(_,j){if(_.j.info("Error code "+j),j==2){var F=u(_.bb,_),H=_.Ua;const pe=!H;H=new Yi(H||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||kr(H,"https"),Tu(H),pe?es(H.toString(),F):Ig(H.toString(),F)}else Tn(2);_.I=0,_.l&&_.l.pa(j),zy(_),Af(_)}t.bb=function(_){_?(this.j.info("Successfully pinged google.com"),Tn(2)):(this.j.info("Failed to ping google.com"),Tn(1))};function zy(_){if(_.I=0,_.ja=[],_.l){const j=Eg(_.h);(j.length!=0||_.i.length!=0)&&(b(_.ja,j),b(_.ja,_.i),_.h.i.length=0,v(_.i),_.i.length=0),_.l.oa()}}function Ly(_,j,F){var H=F instanceof Yi?Xn(F):new Yi(F);if(H.g!="")j&&(H.g=j+"."+H.g),ql(H,H.u);else{var pe=s.location;H=pe.protocol,j=j?j+"."+pe.hostname:pe.hostname,pe=+pe.port;const xe=new Yi(null);H&&kr(xe,H),j&&(xe.g=j),pe&&ql(xe,pe),F&&(xe.h=F),H=xe}return F=_.G,j=_.wa,F&&j&&$t(H,F,j),$t(H,"VER",_.ka),Pu(_,H),H}function Vy(_,j,F){if(j&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=_.Aa&&!_.ma?new Wt(new Fs({ab:F})):new Wt(_.ma),j.Fa(_.L),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function By(){}t=By.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Zl(){}Zl.prototype.g=function(_,j){return new ui(_,j)};function ui(_,j){Ve.call(this),this.g=new Xl(j),this.l=_,this.h=j&&j.messageUrlParams||null,_=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(_?_["X-WebChannel-Content-Type"]=j.messageContentType:_={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(_?_["X-WebChannel-Client-Profile"]=j.sa:_={"X-WebChannel-Client-Profile":j.sa}),this.g.U=_,(_=j&&j.Qb)&&!z(_)&&(this.g.u=_),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!z(j)&&(this.g.G=j,_=this.h,_!==null&&j in _&&(_=this.h,j in _&&delete _[j])),this.j=new zo(this)}h(ui,Ve),ui.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ui.prototype.close=function(){Og(this.g)},ui.prototype.o=function(_){var j=this.g;if(typeof _=="string"){var F={};F.__data__=_,_=F}else this.v&&(F={},F.__data__=ur(_),_=F);j.i.push(new Yn(j.Ya++,_)),j.I==3&&qs(j)},ui.prototype.N=function(){this.g.l=null,delete this.j,Og(this.g),delete this.g,ui.Z.N.call(this)};function Fy(_){Sn.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var j=_.__sm__;if(j){e:{for(const F in j){_=F;break e}_=void 0}(this.i=_)&&(_=this.i,j=j!==null&&_ in j?j[_]:void 0),this.data=j}else this.data=_}h(Fy,Sn);function $y(){Yr.call(this),this.status=1}h($y,Yr);function zo(_){this.g=_}h(zo,By),zo.prototype.ra=function(){it(this.g,"a")},zo.prototype.qa=function(_){it(this.g,new Fy(_))},zo.prototype.pa=function(_){it(this.g,new $y)},zo.prototype.oa=function(){it(this.g,"b")},Zl.prototype.createWebChannel=Zl.prototype.g,ui.prototype.send=ui.prototype.o,ui.prototype.open=ui.prototype.m,ui.prototype.close=ui.prototype.close,jq=function(){return new Zl},Mq=function(){return $l()},Rq=_n,vI={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_u.NO_ERROR=0,_u.TIMEOUT=8,_u.HTTP_ERROR=6,Zx=_u,yg.COMPLETE="complete",Dq=yg,Bn.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,Fm=Bn,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,Oq=Wt}).apply(typeof Yb<"u"?Yb:typeof self<"u"?self:typeof window<"u"?window:{});class Jr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jr.UNAUTHENTICATED=new Jr(null),Jr.GOOGLE_CREDENTIALS=new Jr("google-credentials-uid"),Jr.FIRST_PARTY=new Jr("first-party-uid"),Jr.MOCK_USER=new Jr("mock-user");let Hp="12.9.0";function jue(t){Hp=t}const zd=new TS("@firebase/firestore");function xh(){return zd.logLevel}function Ne(t,...e){if(zd.logLevel<=kt.DEBUG){const n=e.map(g2);zd.debug(`Firestore (${Hp}): ${t}`,...n)}}function qn(t,...e){if(zd.logLevel<=kt.ERROR){const n=e.map(g2);zd.error(`Firestore (${Hp}): ${t}`,...n)}}function ap(t,...e){if(zd.logLevel<=kt.WARN){const n=e.map(g2);zd.warn(`Firestore (${Hp}): ${t}`,...n)}}function g2(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,zq(t,r,n)}function zq(t,e,n){let r=`FIRESTORE (${Hp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw qn(r),new Error(r)}function Xe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||zq(e,i,r)}function Ke(t,e){return t}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Co{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class go{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class zue{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lue{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Jr.UNAUTHENTICATED)))}shutdown(){}}class Vue{constructor(e){this.t=e,this.currentUser=Jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new go;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new go,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},o=c=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new go)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new zue(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new Jr(e)}}class Bue{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Fue{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Bue(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Jr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $ue{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,oa(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0,3512);const r=a=>{a.error!=null&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Ne("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new lL(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new lL(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Uue(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class m2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Uue(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function ot(t,e){return t<e?-1:t>e?1:0}function yI(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return CA(i)===CA(a)?ot(i,a):CA(i)?1:-1}return ot(t.length,e.length)}const que=55296,Gue=57343;function CA(t){const e=t.charCodeAt(0);return e>=que&&e<=Gue}function sp(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function Lq(t){return t+"\0"}const cL="__name__";class io{constructor(e,n,r){n===void 0?n=0:n>e.length&&Fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return io.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof io?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=io.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return ot(e.length,n.length)}static compareSegments(e,n){const r=io.isNumericId(e),i=io.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?io.extractNumericId(e).compare(io.extractNumericId(n)):yI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gc.fromString(e.substring(4,e.length-2))}}class zt extends io{construct(e,n,r){return new zt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new zt(n)}static emptyPath(){return new zt([])}}const Hue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends io{construct(e,n,r){return new kn(e,n,r)}static isValidIdentifier(e){return Hue.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cL}static keyField(){return new kn([cL])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Me(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Me(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Me(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Me(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(n)}static emptyPath(){return new kn([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(zt.fromString(e))}static fromName(e){return new ze(zt.fromString(e).popFirst(5))}static empty(){return new ze(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return zt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new zt(e.slice()))}}function Vq(t,e,n){if(!n)throw new Me(_e.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Kue(t,e,n,r){if(e===!0&&r===!0)throw new Me(_e.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function uL(t){if(!ze.isDocumentKey(t))throw new Me(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dL(t){if(ze.isDocumentKey(t))throw new Me(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bq(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function PS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe(12329,{type:typeof t})}function Fi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Me(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=PS(t);throw new Me(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ar(t,e){const n={typeString:t};return e&&(n.value=e),n}function T0(t,e){if(!Bq(t))throw new Me(_e.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Me(_e.INVALID_ARGUMENT,n);return!0}const fL=-62135596800,hL=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hL);return new gt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Me(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Me(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<fL)throw new Me(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hL}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(T0(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:ar("string",gt._jsonSchemaVersion),seconds:ar("number"),nanoseconds:ar("number")};class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new gt(0,0))}static max(){return new et(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const op=-1;class zw{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function bI(t){return t.fields.find((e=>e.kind===2))}function td(t){return t.fields.filter((e=>e.kind!==2))}zw.UNKNOWN_ID=-1;class Jx{constructor(e,n){this.fieldPath=e,this.kind=n}}class Iv{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Iv(0,ha.min())}}function Fq(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=et.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new ha(i,ze.empty(),e)}function $q(t){return new ha(t.readTime,t.key,op)}class ha{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ha(et.min(),ze.empty(),op)}static max(){return new ha(et.max(),ze.empty(),op)}}function v2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ze.comparator(t.documentKey,e.documentKey),n!==0?n:ot(t.largestBatchId,e.largestBatchId))}const Uq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function du(t){if(t.code!==_e.FAILED_PRECONDITION||t.message!==Uq)throw t;Ne("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.reject(n)}static resolve(e){return new fe(((n,r)=>{n(e)}))}static reject(e){return new fe(((n,r)=>{r(e)}))}static waitFor(e){return new fe(((n,r)=>{let i=0,a=0,s=!1;e.forEach((o=>{++i,o.next((()=>{++a,s&&a===i&&n()}),(c=>r(c)))})),s=!0,a===i&&n()}))}static or(e){let n=fe.resolve(!1);for(const r of e)n=n.next((i=>i?fe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new fe(((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next((f=>{s[u]=f,++o,o===a&&r(s)}),(f=>i(f)))}}))}static doWhile(e,n){return new fe(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}const ia="SimpleDb";class OS{static open(e,n,r,i){try{return new OS(n,e.transaction(i,r))}catch(a){throw new nv(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new go,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new nv(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=y2(r.target.error);this.S.reject(new nv(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ne(ia,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Yue(n)}}class Hc{static delete(e){return Ne(ia,"Removing database:",e),cd(KP().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!ES())return!1;if(Hc.F())return!0;const e=xr(),n=Hc.M(e),r=0<n&&n<10,i=Gq(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Hc.M(xr())===12.2&&qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ne(ia,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;n(s)},i.onblocked=()=>{r(new nv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?r(new Me(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new Me(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new nv(e,s))},i.onupgradeneeded=a=>{Ne(ia,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.N.k(s,i.transaction,a.oldVersion,this.version).next((()=>{Ne(ia,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=n=>this.K(n)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const o=OS.open(this.db,e,a?"readonly":"readwrite",r),c=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),fe.reject(u)))).toPromise();return c.catch((()=>{})),await o.D,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&s<3;if(Ne(ia,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Gq(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Wue{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return cd(this.U.delete())}}class nv extends Me{constructor(e,n){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function fu(t){return t.name==="IndexedDbTransactionError"}class Yue{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Ne(ia,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Ne(ia,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cd(r)}add(e){return Ne(ia,"ADD",this.store.name,e,e),cd(this.store.add(e))}get(e){return cd(this.store.get(e)).next((n=>(n===void 0&&(n=null),Ne(ia,"GET",this.store.name,e,n),n)))}delete(e){return Ne(ia,"DELETE",this.store.name,e),cd(this.store.delete(e))}count(){return Ne(ia,"COUNT",this.store.name),cd(this.store.count())}H(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new fe(((s,o)=>{a.onerror=c=>{o(c.target.error)},a.onsuccess=c=>{s(c.target.result)}}))}{const a=this.cursor(r),s=[];return this.J(a,((o,c)=>{s.push(c)})).next((()=>s))}}Z(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new fe(((i,a)=>{r.onerror=s=>{a(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}X(e,n){Ne(ia,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.J(i,((a,s,o)=>o.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.J(i,n)}te(e){const n=this.cursor({});return new fe(((r,i)=>{n.onerror=a=>{const s=y2(a.target.error);i(s)},n.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((o=>{o?s.continue():r()})):r()}}))}J(e,n){const r=[];return new fe(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const o=s.target.result;if(!o)return void i();const c=new Wue(o),u=n(o.primaryKey,o.value,c);if(u instanceof fe){const f=u.catch((h=>(c.done(),fe.reject(h))));r.push(f)}c.isDone?i():c.G===null?o.continue():o.continue(c.G)}})).next((()=>fe.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function cd(t){return new fe(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=y2(r.target.error);n(i)}}))}let pL=!1;function y2(t){const e=Hc.M(xr());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pL||(pL=!0,setTimeout((()=>{throw r}),0)),r}}return t}const rv="IndexBackfiller";class Xue{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ne(rv,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();Ne(rv,`Documents written: ${n}`)}catch(n){fu(n)?Ne(rv,"Ignoring IndexedDB error during index backfill: ",n):await du(n)}await this.re(6e4)}))}}class Que{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return fe.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return Ne(rv,`Processing collection: ${s}`),this.oe(e,s,i).next((o=>{i-=o,r.add(s)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,a))).next((o=>(Ne(rv,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const s=$q(a);v2(s,r)>0&&(r=s)})),new ha(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class Ri{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ri.ce=-1;const Ad=-1;function DS(t){return t==null}function Nv(t){return t===0&&1/t==-1/0}function Hq(t){return typeof t=="number"&&Number.isInteger(t)&&!Nv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Lw="";function ii(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=gL(e)),e=Zue(t.get(n),e);return gL(e)}function Zue(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case Lw:n+="";break;default:n+=a}}return n}function gL(t){return t+Lw+""}function oo(t){const e=t.length;if(Xe(e>=2,64408,{path:t}),e===2)return Xe(t.charAt(0)===Lw&&t.charAt(1)==="",56145,{path:t}),zt.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const s=t.indexOf(Lw,a);switch((s<0||s>n)&&Fe(50515,{path:t}),t.charAt(s+1)){case"":const o=t.substring(a,s);let c;i.length===0?c=o:(i+=o,c=i,i=""),r.push(c);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:Fe(61167,{path:t})}a=s+2}return new zt(r)}const nd="remoteDocuments",A0="owner",ah="owner",Pv="mutationQueues",Jue="userId",ds="mutations",mL="batchId",vd="userMutationsIndex",vL=["userId","batchId"];function ew(t,e){return[t,ii(e)]}function Kq(t,e,n){return[t,ii(e),n]}const ede={},lp="documentMutations",Vw="remoteDocumentsV14",tde=["prefixPath","collectionGroup","readTime","documentId"],tw="documentKeyIndex",nde=["prefixPath","collectionGroup","documentId"],Wq="collectionGroupIndex",rde=["collectionGroup","readTime","prefixPath","documentId"],Ov="remoteDocumentGlobal",xI="remoteDocumentGlobalKey",cp="targets",Yq="queryTargetsIndex",ide=["canonicalId","targetId"],up="targetDocuments",ade=["targetId","path"],b2="documentTargetsIndex",sde=["path","targetId"],Bw="targetGlobalKey",kd="targetGlobal",Dv="collectionParents",ode=["collectionId","parent"],dp="clientMetadata",lde="clientId",RS="bundles",cde="bundleId",MS="namedQueries",ude="name",x2="indexConfiguration",dde="indexId",wI="collectionGroupIndex",fde="collectionGroup",iv="indexState",hde=["indexId","uid"],Xq="sequenceNumberIndex",pde=["uid","sequenceNumber"],av="indexEntries",gde=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Qq="documentKeyIndex",mde=["indexId","uid","orderedDocumentKey"],jS="documentOverlays",vde=["userId","collectionPath","documentId"],SI="collectionPathOverlayIndex",yde=["userId","collectionPath","largestBatchId"],Zq="collectionGroupOverlayIndex",bde=["userId","collectionGroup","largestBatchId"],w2="globals",xde="name",Jq=[Pv,ds,lp,nd,cp,A0,kd,up,dp,Ov,Dv,RS,MS],wde=[...Jq,jS],e7=[Pv,ds,lp,Vw,cp,A0,kd,up,dp,Ov,Dv,RS,MS,jS],t7=e7,S2=[...t7,x2,iv,av],Sde=S2,n7=[...S2,w2],_de=n7;class _I extends qq{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function wr(t,e){const n=Ke(t);return Hc.O(n.le,e)}function yL(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function r7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class cn{constructor(e,n){this.comparator=e,this.root=n||Wr.EMPTY}insert(e,n){return new cn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wr.BLACK,null,null))}remove(e){return new cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xb(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xb(this.root,e,this.comparator,!0)}}class Xb{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Wr.RED,this.left=i??Wr.EMPTY,this.right=a??Wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Wr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Wr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}Wr.EMPTY=null,Wr.RED=!0,Wr.BLACK=!1;Wr.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new Wr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kt{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bL(this.data.getIterator())}getIteratorFrom(e){return new bL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Kt(this.comparator);return n.data=e,n}}class bL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sh(t){return t.hasNext()?t.getNext():void 0}class Mi{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new Mi([])}unionWith(e){let n=new Kt(kn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Mi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return sp(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class i7 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new i7("Invalid base64 string: "+a):a}})(e);return new Gn(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new Gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gn.EMPTY_BYTE_STRING=new Gn("");const Ede=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xl(t){if(Xe(!!t,39018),typeof t=="string"){let e=0;const n=Ede.exec(t);if(Xe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xn(t.seconds),nanos:xn(t.nanos)}}function xn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wl(t){return typeof t=="string"?Gn.fromBase64String(t):Gn.fromUint8Array(t)}const a7="server_timestamp",s7="__type__",o7="__previous_value__",l7="__local_write_time__";function _2(t){return(t?.mapValue?.fields||{})[s7]?.stringValue===a7}function zS(t){const e=t.mapValue.fields[o7];return _2(e)?zS(e):e}function Rv(t){const e=xl(t.mapValue.fields[l7].timestampValue);return new gt(e.seconds,e.nanos)}class Tde{constructor(e,n,r,i,a,s,o,c,u,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f,this.apiKey=h}}const Fw="(default)";class Ld{constructor(e,n){this.projectId=e,this.database=n||Fw}static empty(){return new Ld("","")}get isDefaultDatabase(){return this.database===Fw}isEqual(e){return e instanceof Ld&&e.projectId===this.projectId&&e.database===this.database}}function Ade(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Me(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ld(t.options.projectId,e)}const E2="__type__",c7="__max__",jc={mapValue:{fields:{__type__:{stringValue:c7}}}},T2="__vector__",fp="value",nw={nullValue:"NULL_VALUE"};function Zc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_2(t)?4:u7(t)?9007199254740991:LS(t)?10:11:Fe(28295,{value:t})}function wo(t,e){if(t===e)return!0;const n=Zc(t);if(n!==Zc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rv(t).isEqual(Rv(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=xl(i.timestampValue),o=xl(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return wl(i.bytesValue).isEqual(wl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return xn(i.geoPointValue.latitude)===xn(a.geoPointValue.latitude)&&xn(i.geoPointValue.longitude)===xn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return xn(i.integerValue)===xn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=xn(i.doubleValue),o=xn(a.doubleValue);return s===o?Nv(s)===Nv(o):isNaN(s)&&isNaN(o)}return!1})(t,e);case 9:return sp(t.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(yL(s)!==yL(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!wo(s[c],o[c])))return!1;return!0})(t,e);default:return Fe(52216,{left:t})}}function Mv(t,e){return(t.values||[]).find((n=>wo(n,e)))!==void 0}function Jc(t,e){if(t===e)return 0;const n=Zc(t),r=Zc(e);if(n!==r)return ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const o=xn(a.integerValue||a.doubleValue),c=xn(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(t,e);case 3:return xL(t.timestampValue,e.timestampValue);case 4:return xL(Rv(t),Rv(e));case 5:return yI(t.stringValue,e.stringValue);case 6:return(function(a,s){const o=wl(a),c=wl(s);return o.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const o=a.split("/"),c=s.split("/");for(let u=0;u<o.length&&u<c.length;u++){const f=ot(o[u],c[u]);if(f!==0)return f}return ot(o.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const o=ot(xn(a.latitude),xn(s.latitude));return o!==0?o:ot(xn(a.longitude),xn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return wL(t.arrayValue,e.arrayValue);case 10:return(function(a,s){const o=a.fields||{},c=s.fields||{},u=o[fp]?.arrayValue,f=c[fp]?.arrayValue,h=ot(u?.values?.length||0,f?.values?.length||0);return h!==0?h:wL(u,f)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===jc.mapValue&&s===jc.mapValue)return 0;if(a===jc.mapValue)return 1;if(s===jc.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),u=s.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let h=0;h<c.length&&h<f.length;++h){const g=yI(c[h],f[h]);if(g!==0)return g;const v=Jc(o[c[h]],u[f[h]]);if(v!==0)return v}return ot(c.length,f.length)})(t.mapValue,e.mapValue);default:throw Fe(23264,{he:n})}}function xL(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ot(t,e);const n=xl(t),r=xl(e),i=ot(n.seconds,r.seconds);return i!==0?i:ot(n.nanos,r.nanos)}function wL(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Jc(n[i],r[i]);if(a)return a}return ot(n.length,r.length)}function hp(t){return EI(t)}function EI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=xl(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return wl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ze.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=EI(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${EI(n.fields[s])}`;return i+"}"})(t.mapValue):Fe(61005,{value:t})}function rw(t){switch(Zc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zS(t);return e?16+rw(e):16;case 5:return 2*t.stringValue.length;case 6:return wl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+rw(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return hu(r.fields,((a,s)=>{i+=a.length+rw(s)})),i})(t.mapValue);default:throw Fe(13486,{value:t})}}function jv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function TI(t){return!!t&&"integerValue"in t}function zv(t){return!!t&&"arrayValue"in t}function SL(t){return!!t&&"nullValue"in t}function _L(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function iw(t){return!!t&&"mapValue"in t}function LS(t){return(t?.mapValue?.fields||{})[E2]?.stringValue===T2}function sv(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return hu(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=sv(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sv(t.arrayValue.values[n]);return e}return{...t}}function u7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===c7}const d7={mapValue:{fields:{[E2]:{stringValue:T2},[fp]:{arrayValue:{}}}}};function kde(t){return"nullValue"in t?nw:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?jv(Ld.empty(),ze.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?LS(t)?d7:{mapValue:{}}:Fe(35942,{value:t})}function Cde(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?jv(Ld.empty(),ze.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?d7:"mapValue"in t?LS(t)?{mapValue:{}}:jc:Fe(61959,{value:t})}function EL(t,e){const n=Jc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function TL(t,e){const n=Jc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class ni{constructor(e){this.value=e}static empty(){return new ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!iw(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sv(n)}setAll(e){let n=kn.emptyPath(),r={},i=[];e.forEach(((s,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=sv(s):i.push(o.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());iw(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];iw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){hu(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new ni(sv(this.value))}}function f7(t){const e=[];return hu(t.fields,((n,r)=>{const i=new kn([n]);if(iw(r)){const a=f7(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new Mi(e)}class zn{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new zn(e,0,et.min(),et.min(),et.min(),ni.empty(),0)}static newFoundDocument(e,n,r,i){return new zn(e,1,n,et.min(),r,i,0)}static newNoDocument(e,n){return new zn(e,2,n,et.min(),et.min(),ni.empty(),0)}static newUnknownDocument(e,n){return new zn(e,3,n,et.min(),et.min(),ni.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pp{constructor(e,n){this.position=e,this.inclusive=n}}function AL(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=ze.comparator(ze.fromName(s.referenceValue),n.key):r=Jc(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function kL(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wo(t.position[n],e.position[n]))return!1;return!0}class Lv{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ide(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class h7{}class Ct extends h7{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Nde(e,n,r):n==="array-contains"?new Dde(e,r):n==="in"?new b7(e,r):n==="not-in"?new Rde(e,r):n==="array-contains-any"?new Mde(e,r):new Ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Pde(e,r):new Ode(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jc(n,this.value)):n!==null&&Zc(this.value)===Zc(n)&&this.matchesComparison(Jc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends h7{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ht(e,n)}matches(e){return gp(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gp(t){return t.op==="and"}function AI(t){return t.op==="or"}function A2(t){return p7(t)&&gp(t)}function p7(t){for(const e of t.filters)if(e instanceof Ht)return!1;return!0}function kI(t){if(t instanceof Ct)return t.field.canonicalString()+t.op.toString()+hp(t.value);if(A2(t))return t.filters.map((e=>kI(e))).join(",");{const e=t.filters.map((n=>kI(n))).join(",");return`${t.op}(${e})`}}function g7(t,e){return t instanceof Ct?(function(r,i){return i instanceof Ct&&r.op===i.op&&r.field.isEqual(i.field)&&wo(r.value,i.value)})(t,e):t instanceof Ht?(function(r,i){return i instanceof Ht&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,s,o)=>a&&g7(s,i.filters[o])),!0):!1})(t,e):void Fe(19439)}function m7(t,e){const n=t.filters.concat(e);return Ht.create(n,t.op)}function v7(t){return t instanceof Ct?(function(n){return`${n.field.canonicalString()} ${n.op} ${hp(n.value)}`})(t):t instanceof Ht?(function(n){return n.op.toString()+" {"+n.getFilters().map(v7).join(" ,")+"}"})(t):"Filter"}class Nde extends Ct{constructor(e,n,r){super(e,n,r),this.key=ze.fromName(r.referenceValue)}matches(e){const n=ze.comparator(e.key,this.key);return this.matchesComparison(n)}}class Pde extends Ct{constructor(e,n){super(e,"in",n),this.keys=y7("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Ode extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=y7("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function y7(t,e){return(e.arrayValue?.values||[]).map((n=>ze.fromName(n.referenceValue)))}class Dde extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zv(n)&&Mv(n.arrayValue,this.value)}}class b7 extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mv(this.value.arrayValue,n)}}class Rde extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Mv(this.value.arrayValue,n)}}class Mde extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Mv(this.value.arrayValue,r)))}}class jde{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function CI(t,e=null,n=[],r=[],i=null,a=null,s=null){return new jde(t,e,n,r,i,a,s)}function Vd(t){const e=Ke(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>kI(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),DS(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>hp(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>hp(r))).join(",")),e.Te=n}return e.Te}function k0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ide(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!g7(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kL(t.startAt,e.startAt)&&kL(t.endAt,e.endAt)}function $w(t){return ze.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Uw(t,e){return t.filters.filter((n=>n instanceof Ct&&n.field.isEqual(e)))}function CL(t,e,n){let r=nw,i=!0;for(const a of Uw(t,e)){let s=nw,o=!0;switch(a.op){case"<":case"<=":s=kde(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,o=!1;break;case"!=":case"not-in":s=nw}EL({value:r,inclusive:i},{value:s,inclusive:o})<0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];EL({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function IL(t,e,n){let r=jc,i=!0;for(const a of Uw(t,e)){let s=jc,o=!0;switch(a.op){case">=":case">":s=Cde(a.value),o=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,o=!1;break;case"!=":case"not-in":s=jc}TL({value:r,inclusive:i},{value:s,inclusive:o})>0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];TL({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}class Kp{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function x7(t,e,n,r,i,a,s,o){return new Kp(t,e,n,r,i,a,s,o)}function C0(t){return new Kp(t)}function NL(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zde(t){return ze.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function w7(t){return t.collectionGroup!==null}function ov(t){const e=Ke(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Kt(kn.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Lv(a,r))})),n.has(kn.keyField().canonicalString())||e.Ie.push(new Lv(kn.keyField(),r))}return e.Ie}function da(t){const e=Ke(t);return e.Ee||(e.Ee=Lde(e,ov(t))),e.Ee}function Lde(t,e){if(t.limitType==="F")return CI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Lv(i.field,a)}));const n=t.endAt?new pp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pp(t.startAt.position,t.startAt.inclusive):null;return CI(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function II(t,e){const n=t.filters.concat([e]);return new Kp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Vde(t,e){const n=t.explicitOrderBy.concat([e]);return new Kp(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function qw(t,e,n){return new Kp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function VS(t,e){return k0(da(t),da(e))&&t.limitType===e.limitType}function S7(t){return`${Vd(da(t))}|lt:${t.limitType}`}function wh(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>v7(i))).join(", ")}]`),DS(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>hp(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>hp(i))).join(",")),`Target(${r})`})(da(t))}; limitType=${t.limitType})`}function I0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ze.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of ov(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,o,c){const u=AL(s,o,c);return s.inclusive?u<=0:u<0})(r.startAt,ov(r),i)||r.endAt&&!(function(s,o,c){const u=AL(s,o,c);return s.inclusive?u>=0:u>0})(r.endAt,ov(r),i))})(t,e)}function _7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function E7(t){return(e,n)=>{let r=!1;for(const i of ov(t)){const a=Bde(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function Bde(t,e,n){const r=t.field.isKeyField()?ze.comparator(e.key,n.key):(function(a,s,o){const c=s.data.field(a),u=o.data.field(a);return c!==null&&u!==null?Jc(c,u):Fe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fe(19790,{direction:t.dir})}}class Dl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hu(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return r7(this.inner)}size(){return this.innerSize}}const Fde=new cn(ze.comparator);function ca(){return Fde}const T7=new cn(ze.comparator);function $m(...t){let e=T7;for(const n of t)e=e.insert(n.key,n);return e}function A7(t){let e=T7;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function lo(){return lv()}function k7(){return lv()}function lv(){return new Dl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const $de=new cn(ze.comparator),Ude=new Kt(ze.comparator);function yt(...t){let e=Ude;for(const n of t)e=e.add(n);return e}const qde=new Kt(ot);function k2(){return qde}function C2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nv(e)?"-0":e}}function C7(t){return{integerValue:""+t}}function Gde(t,e){return Hq(e)?C7(e):C2(t,e)}class BS{constructor(){this._=void 0}}function Hde(t,e,n){return t instanceof Vv?(function(i,a){const s={fields:{[s7]:{stringValue:a7},[l7]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&_2(a)&&(a=zS(a)),a&&(s.fields[o7]=a),{mapValue:s}})(n,e):t instanceof Bd?N7(t,e):t instanceof mp?P7(t,e):(function(i,a){const s=I7(i,a),o=PL(s)+PL(i.Ae);return TI(s)&&TI(i.Ae)?C7(o):C2(i.serializer,o)})(t,e)}function Kde(t,e,n){return t instanceof Bd?N7(t,e):t instanceof mp?P7(t,e):n}function I7(t,e){return t instanceof Bv?(function(r){return TI(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Vv extends BS{}class Bd extends BS{constructor(e){super(),this.elements=e}}function N7(t,e){const n=O7(e);for(const r of t.elements)n.some((i=>wo(i,r)))||n.push(r);return{arrayValue:{values:n}}}class mp extends BS{constructor(e){super(),this.elements=e}}function P7(t,e){let n=O7(e);for(const r of t.elements)n=n.filter((i=>!wo(i,r)));return{arrayValue:{values:n}}}class Bv extends BS{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function PL(t){return xn(t.integerValue||t.doubleValue)}function O7(t){return zv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class D7{constructor(e,n){this.field=e,this.transform=n}}function Wde(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Bd&&i instanceof Bd||r instanceof mp&&i instanceof mp?sp(r.elements,i.elements,wo):r instanceof Bv&&i instanceof Bv?wo(r.Ae,i.Ae):r instanceof Vv&&i instanceof Vv})(t.transform,e.transform)}class Yde{constructor(e,n){this.version=e,this.transformResults=n}}class yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function aw(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class FS{}function R7(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new N0(t.key,yr.none()):new Wp(t.key,t.data,yr.none());{const n=t.data,r=ni.empty();let i=new Kt(kn.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Rl(t.key,r,new Mi(i.toArray()),yr.none())}}function Xde(t,e,n){t instanceof Wp?(function(i,a,s){const o=i.value.clone(),c=DL(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()})(t,e,n):t instanceof Rl?(function(i,a,s){if(!aw(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=DL(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(M7(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function cv(t,e,n,r){return t instanceof Wp?(function(a,s,o,c){if(!aw(a.precondition,s))return o;const u=a.value.clone(),f=RL(a.fieldTransforms,c,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Rl?(function(a,s,o,c){if(!aw(a.precondition,s))return o;const u=RL(a.fieldTransforms,c,s),f=s.data;return f.setAll(M7(a)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(a,s,o){return aw(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o})(t,e,n)}function Qde(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=I7(r.transform,i||null);a!=null&&(n===null&&(n=ni.empty()),n.set(r.field,a))}return n||null}function OL(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&sp(r,i,((a,s)=>Wde(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wp extends FS{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Rl extends FS{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function M7(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function DL(t,e,n){const r=new Map;Xe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,Kde(s,o,n[i]))}return r}function RL(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,Hde(a,s,e))}return r}class N0 extends FS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class j7 extends FS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class I2{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Xde(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=cv(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=cv(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=k7();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const c=R7(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(et.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),yt())}isEqual(e){return this.batchId===e.batchId&&sp(this.mutations,e.mutations,((n,r)=>OL(n,r)))&&sp(this.baseMutations,e.baseMutations,((n,r)=>OL(n,r)))}}class N2{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return $de})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new N2(e,n,r,i)}}class P2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Zde{constructor(e,n){this.count=e,this.unchangedNames=n}}var nr,Nt;function Jde(t){switch(t){case _e.OK:return Fe(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return Fe(15467,{code:t})}}function z7(t){if(t===void 0)return qn("GRPC error has no .code"),_e.UNKNOWN;switch(t){case nr.OK:return _e.OK;case nr.CANCELLED:return _e.CANCELLED;case nr.UNKNOWN:return _e.UNKNOWN;case nr.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case nr.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case nr.INTERNAL:return _e.INTERNAL;case nr.UNAVAILABLE:return _e.UNAVAILABLE;case nr.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case nr.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case nr.NOT_FOUND:return _e.NOT_FOUND;case nr.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case nr.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case nr.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case nr.ABORTED:return _e.ABORTED;case nr.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case nr.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case nr.DATA_LOSS:return _e.DATA_LOSS;default:return Fe(39323,{code:t})}}(Nt=nr||(nr={}))[Nt.OK=0]="OK",Nt[Nt.CANCELLED=1]="CANCELLED",Nt[Nt.UNKNOWN=2]="UNKNOWN",Nt[Nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nt[Nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nt[Nt.NOT_FOUND=5]="NOT_FOUND",Nt[Nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nt[Nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nt[Nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nt[Nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nt[Nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nt[Nt.ABORTED=10]="ABORTED",Nt[Nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nt[Nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nt[Nt.INTERNAL=13]="INTERNAL",Nt[Nt.UNAVAILABLE=14]="UNAVAILABLE",Nt[Nt.DATA_LOSS=15]="DATA_LOSS";function efe(){return new TextEncoder}const tfe=new Gc([4294967295,4294967295],0);function ML(t){const e=efe().encode(t),n=new Pq;return n.update(e),new Uint8Array(n.digest())}function jL(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Gc([n,r],0),new Gc([i,a],0)]}class O2{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Um(`Invalid padding: ${n}`);if(r<0)throw new Um(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Um(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Um(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Gc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Gc.fromNumber(r)));return i.compare(tfe)===1&&(i=new Gc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ML(e),[r,i]=jL(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new O2(a,i,n);return r.forEach((o=>s.insert(o))),s}insert(e){if(this.ge===0)return;const n=ML(e),[r,i]=jL(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);this.be(s)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Um extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class P0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,O0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new P0(et.min(),i,new cn(ot),ca(),yt())}}class O0{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new O0(r,n,yt(),yt(),yt())}}class sw{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class L7{constructor(e,n){this.targetId=e,this.Ce=n}}class V7{constructor(e,n,r=Gn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class zL{constructor(){this.ve=0,this.Fe=LL(),this.Me=Gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=yt(),n=yt(),r=yt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Fe(38017,{changeType:a})}})),new O0(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=LL()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class nfe{constructor(e){this.Ge=e,this.ze=new Map,this.je=ca(),this.He=Qb(),this.Je=Qb(),this.Ze=new cn(ot)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if($w(a))if(r===0){const s=new ze(a.path);this.et(n,s,zn.newNoDocument(s,et.min()))}else Xe(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const o=this.ut(e),c=o?this.ct(o,e,s):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=wl(r).toUint8Array()}catch(c){if(c instanceof i7)return ap("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new O2(s,i,a)}catch(c){return ap(c instanceof Um?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,s)=>{const o=this.ot(s);if(o){if(a.current&&$w(o.target)){const c=new ze(o.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,zn.newNoDocument(c,e))}a.Be&&(n.set(s,a.ke()),a.Ke())}}));let r=yt();this.Je.forEach(((a,s)=>{let o=!0;s.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const i=new P0(e,n,this.Ze,this.je,r);return this.je=ca(),this.He=Qb(),this.Je=Qb(),this.Ze=new cn(ot),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new zL,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Kt(ot),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Kt(ot),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zL),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Qb(){return new cn(ze.comparator)}function LL(){return new cn(ze.comparator)}const rfe={asc:"ASCENDING",desc:"DESCENDING"},ife={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},afe={and:"AND",or:"OR"};class sfe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function NI(t,e){return t.useProto3Json||DS(e)?e:{value:e}}function vp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B7(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ofe(t,e){return vp(t,e.toTimestamp())}function wi(t){return Xe(!!t,49232),et.fromTimestamp((function(n){const r=xl(n);return new gt(r.seconds,r.nanos)})(t))}function D2(t,e){return PI(t,e).canonicalString()}function PI(t,e){const n=(function(i){return new zt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function F7(t){const e=zt.fromString(t);return Xe(X7(e),10190,{key:e.toString()}),e}function Gw(t,e){return D2(t.databaseId,e.path)}function Cd(t,e){const n=F7(e);if(n.get(1)!==t.databaseId.projectId)throw new Me(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Me(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ze(q7(n))}function $7(t,e){return D2(t.databaseId,e)}function U7(t){const e=F7(t);return e.length===4?zt.emptyPath():q7(e)}function OI(t){return new zt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function q7(t){return Xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function VL(t,e,n){return{name:Gw(t,e),fields:n.value.mapValue.fields}}function lfe(t,e,n){const r=Cd(t,e.name),i=wi(e.updateTime),a=e.createTime?wi(e.createTime):et.min(),s=new ni({mapValue:{fields:e.fields}}),o=zn.newFoundDocument(r,i,a,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function cfe(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Fe(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(u,f){return u.useProto3Json?(Xe(f===void 0||typeof f=="string",58123),Gn.fromBase64String(f||"")):(Xe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Gn.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&(function(u){const f=u.code===void 0?_e.UNKNOWN:z7(u.code);return new Me(f,u.message||"")})(s);n=new V7(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Cd(t,r.document.name),a=wi(r.document.updateTime),s=r.document.createTime?wi(r.document.createTime):et.min(),o=new ni({mapValue:{fields:r.document.fields}}),c=zn.newFoundDocument(i,a,s,o),u=r.targetIds||[],f=r.removedTargetIds||[];n=new sw(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Cd(t,r.document),a=r.readTime?wi(r.readTime):et.min(),s=zn.newNoDocument(i,a),o=r.removedTargetIds||[];n=new sw([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Cd(t,r.document),a=r.removedTargetIds||[];n=new sw([],a,i,null)}else{if(!("filter"in e))return Fe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new Zde(i,a),o=r.targetId;n=new L7(o,s)}}return n}function Hw(t,e){let n;if(e instanceof Wp)n={update:VL(t,e.key,e.value)};else if(e instanceof N0)n={delete:Gw(t,e.key)};else if(e instanceof Rl)n={update:VL(t,e.key,e.data),updateMask:gfe(e.fieldMask)};else{if(!(e instanceof j7))return Fe(16599,{dt:e.type});n={verify:Gw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,s){const o=s.transform;if(o instanceof Vv)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Bd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof mp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Bv)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw Fe(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:ofe(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Fe(27497)})(t,e.precondition)),n}function DI(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?yr.updateTime(wi(a.updateTime)):a.exists!==void 0?yr.exists(a.exists):yr.none()})(e.currentDocument):yr.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,o){let c=null;if("setToServerValue"in o)Xe(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),c=new Vv;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];c=new Bd(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];c=new mp(f)}else"increment"in o?c=new Bv(s,o.increment):Fe(16584,{proto:o});const u=kn.fromServerFormat(o.fieldPath);return new D7(u,c)})(t,i))):[];if(e.update){e.update.name;const i=Cd(t,e.update.name),a=new ni({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(c){const u=c.fieldPaths||[];return new Mi(u.map((f=>kn.fromServerFormat(f))))})(e.updateMask);return new Rl(i,a,s,n,r)}return new Wp(i,a,n,r)}if(e.delete){const i=Cd(t,e.delete);return new N0(i,n)}if(e.verify){const i=Cd(t,e.verify);return new j7(i,n)}return Fe(1463,{proto:e})}function ufe(t,e){return t&&t.length>0?(Xe(e!==void 0,14353),t.map((n=>(function(i,a){let s=i.updateTime?wi(i.updateTime):wi(a);return s.isEqual(et.min())&&(s=wi(a)),new Yde(s,i.transformResults||[])})(n,e)))):[]}function G7(t,e){return{documents:[$7(t,e.path)]}}function H7(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$7(t,i);const a=(function(u){if(u.length!==0)return Y7(Ht.create(u,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const s=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:Sh(g.field),direction:ffe(g.dir)}})(f)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=NI(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:i}}function K7(t){let e=U7(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Xe(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=(function(h){const g=W7(h);return g instanceof Ht&&A2(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(h){return h.map((g=>(function(b){return new Lv(_h(b.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g)))})(n.orderBy));let o=null;n.limit&&(o=(function(h){let g;return g=typeof h=="object"?h.value:h,DS(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(h){const g=!!h.before,v=h.values||[];return new pp(v,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(h){const g=!h.before,v=h.values||[];return new pp(v,g)})(n.endAt)),x7(e,i,s,a,o,"F",c,u)}function dfe(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function W7(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_h(n.unaryFilter.field);return Ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=_h(n.unaryFilter.field);return Ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=_h(n.unaryFilter.field);return Ct.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=_h(n.unaryFilter.field);return Ct.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ct.create(_h(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ht.create(n.compositeFilter.filters.map((r=>W7(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(n.compositeFilter.op))})(t):Fe(30097,{filter:t})}function ffe(t){return rfe[t]}function hfe(t){return ife[t]}function pfe(t){return afe[t]}function Sh(t){return{fieldPath:t.canonicalString()}}function _h(t){return kn.fromServerFormat(t.fieldPath)}function Y7(t){return t instanceof Ct?(function(n){if(n.op==="=="){if(_L(n.value))return{unaryFilter:{field:Sh(n.field),op:"IS_NAN"}};if(SL(n.value))return{unaryFilter:{field:Sh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_L(n.value))return{unaryFilter:{field:Sh(n.field),op:"IS_NOT_NAN"}};if(SL(n.value))return{unaryFilter:{field:Sh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sh(n.field),op:hfe(n.op),value:n.value}}})(t):t instanceof Ht?(function(n){const r=n.getFilters().map((i=>Y7(i)));return r.length===1?r[0]:{compositeFilter:{op:pfe(n.op),filters:r}}})(t):Fe(54877,{filter:t})}function gfe(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function X7(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Q7(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class al{constructor(e,n,r,i,a=et.min(),s=et.min(),o=Gn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new al(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new al(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Z7{constructor(e){this.yt=e}}function mfe(t,e){let n;if(e.document)n=lfe(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),i=$d(e.noDocument.readTime);n=zn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fe(56709);{const r=ze.fromSegments(e.unknownDocument.path),i=$d(e.unknownDocument.version);n=zn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new gt(i[0],i[1]);return et.fromTimestamp(a)})(e.readTime)),n}function BL(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Kw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,s){return{name:Gw(a,s.key),fields:s.data.value.mapValue.fields,updateTime:vp(a,s.version.toTimestamp()),createTime:vp(a,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fd(e.version)};else{if(!e.isUnknownDocument())return Fe(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Fd(e.version)}}return r}function Kw(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Fd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $d(t){const e=new gt(t.seconds,t.nanoseconds);return et.fromTimestamp(e)}function ud(t,e){const n=(e.baseMutations||[]).map((a=>DI(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const o=e.mutations[a+1];s.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>DI(t.yt,a))),i=gt.fromMillis(e.localWriteTimeMs);return new I2(e.batchId,i,n,r)}function qm(t){const e=$d(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?$d(t.lastLimboFreeSnapshotVersion):et.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const s=a.documents.length;return Xe(s===1,1966,{count:s}),da(C0(U7(a.documents[0])))})(t.query):(function(a){return da(K7(a))})(t.query),new al(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Gn.fromBase64String(t.resumeToken))}function J7(t,e){const n=Fd(e.snapshotVersion),r=Fd(e.lastLimboFreeSnapshotVersion);let i;i=$w(e.target)?G7(t.yt,e.target):H7(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vd(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function eG(t){const e=K7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qw(e,e.limit,"L"):e}function IA(t,e){return new P2(e.largestBatchId,DI(t.yt,e.overlayMutation))}function FL(t,e){const n=e.path.lastSegment();return[t,ii(e.path.popLast()),n]}function $L(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Fd(r.readTime),documentKey:ii(r.documentKey.path),largestBatchId:r.largestBatchId}}class vfe{getBundleMetadata(e,n){return UL(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:$d(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return UL(e).put((function(i){return{bundleId:i.id,createTime:Fd(wi(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return qL(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:eG(a.bundledQuery),readTime:$d(a.readTime)}})(r)}))}saveNamedQuery(e,n){return qL(e).put((function(i){return{name:i.name,readTime:Fd(wi(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function UL(t){return wr(t,RS)}function qL(t){return wr(t,MS)}class $S{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new $S(e,r)}getOverlay(e,n){return xm(e).get(FL(this.userId,n)).next((r=>r?IA(this.serializer,r):null))}getOverlays(e,n){const r=lo();return fe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,s)=>{const o=new P2(n,s);i.push(this.bt(e,o))})),fe.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(ii(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);a.push(xm(e).X(SI,o))})),fe.waitFor(a)}getOverlaysForCollection(e,n,r){const i=lo(),a=ii(n),s=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return xm(e).H(SI,s).next((o=>{for(const c of o){const u=IA(this.serializer,c);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=lo();let s;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return xm(e).ee({index:Zq,range:o},((c,u,f)=>{const h=IA(this.serializer,u);a.size()<i||h.largestBatchId===s?(a.set(h.getKey(),h),s=h.largestBatchId):f.done()})).next((()=>a))}bt(e,n){return xm(e).put((function(i,a,s){const[o,c,u]=FL(a,s.mutation.key);return{userId:a,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Hw(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function xm(t){return wr(t,jS)}class yfe{St(e){return wr(e,w2)}getSessionToken(e){return this.St(e).get("sessionToken").next((n=>{const r=n?.value;return r?Gn.fromUint8Array(r):Gn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}class dd{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(xn(e.integerValue));else if("doubleValue"in e){const r=xn(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Nv(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=xl(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(wl(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?u7(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):LS(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):Fe(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=fp,a=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(xn(a)),this.Ot(i,n),this.Ct(r[i],n)}qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),ze.fromName(e).path.forEach((r=>{this.Ft(n,60),this.$t(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}dd.Wt=new dd;const oh=255;function bfe(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function GL(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const s=bfe(255&r[a]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class xfe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ht(r.value),r=n.next();this.Jt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const i=n.codePointAt(0);this.Ht(240|i>>>18),this.Ht(128|63&i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i)}}this.Jt()}Yt(e){const n=this.en(e),r=GL(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=GL(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(oh),this.sn(255)}_n(){this.an(oh),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===oh?(this.sn(oh),this.sn(0)):this.sn(n)}Ht(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===oh?(this.an(oh),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class wfe{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class Sfe{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class wm{constructor(){this.cn=new xfe,this.ascending=new wfe(this.cn),this.descending=new Sfe(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class fd{constructor(e,n,r,i){this.hn=e,this.Pn=n,this.Tn=r,this.In=i}En(){const e=this.In.length,n=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.In,0),n!==e?r.set([0],this.In.length):++r[r.length-1],new fd(this.hn,this.Pn,this.Tn,r)}Rn(e,n,r){return{indexId:this.hn,uid:e,arrayValue:ow(this.Tn),directionalValue:ow(this.In),orderedDocumentKey:ow(n),documentKey:r.path.toArray()}}An(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Sc(t,e){let n=t.hn-e.hn;return n!==0?n:(n=HL(t.Tn,e.Tn),n!==0?n:(n=HL(t.In,e.In),n!==0?n:ze.comparator(t.Pn,e.Pn)))}function HL(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function ow(t){return f8()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function KL(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class WL{constructor(e){this.Vn=new Kt(((n,r)=>kn.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Xe(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const n=bI(e);if(n!==void 0&&!this.pn(n))return!1;const r=td(e);let i=new Set,a=0,s=0;for(;a<r.length&&this.pn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Vn.size>0){const o=this.Vn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=r[a];if(!this.yn(o,c)||!this.wn(this.dn[s++],c))return!1}++a}for(;a<r.length;++a){const o=r[a];if(s>=this.dn.length||!this.wn(this.dn[s++],o))return!1}return!0}bn(){if(this.fn)return null;let e=new Kt(kn.comparator);const n=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Jx(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Jx(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Jx(r.field,r.dir==="asc"?0:1)));return new zw(zw.UNKNOWN_ID,this.collectionId,n,Iv.empty())}pn(e){for(const n of this.mn)if(this.yn(n,e))return!0;return!1}yn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}wn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function tG(t){if(Xe(t instanceof Ct||t instanceof Ht,20012),t instanceof Ct){if(t instanceof b7){const n=t.value.arrayValue?.values?.map((r=>Ct.create(t.field,"==",r)))||[];return Ht.create(n,"or")}return t}const e=t.filters.map((n=>tG(n)));return Ht.create(e,t.op)}function _fe(t){if(t.getFilters().length===0)return[];const e=jI(tG(t));return Xe(nG(e),7391),RI(e)||MI(e)?[e]:e.getFilters()}function RI(t){return t instanceof Ct}function MI(t){return t instanceof Ht&&A2(t)}function nG(t){return RI(t)||MI(t)||(function(n){if(n instanceof Ht&&AI(n)){for(const r of n.getFilters())if(!RI(r)&&!MI(r))return!1;return!0}return!1})(t)}function jI(t){if(Xe(t instanceof Ct||t instanceof Ht,34018),t instanceof Ct)return t;if(t.filters.length===1)return jI(t.filters[0]);const e=t.filters.map((r=>jI(r)));let n=Ht.create(e,t.op);return n=Ww(n),nG(n)?n:(Xe(n instanceof Ht,64498),Xe(gp(n),40251),Xe(n.filters.length>1,57927),n.filters.reduce(((r,i)=>R2(r,i))))}function R2(t,e){let n;return Xe(t instanceof Ct||t instanceof Ht,38388),Xe(e instanceof Ct||e instanceof Ht,25473),n=t instanceof Ct?e instanceof Ct?(function(i,a){return Ht.create([i,a],"and")})(t,e):YL(t,e):e instanceof Ct?YL(e,t):(function(i,a){if(Xe(i.filters.length>0&&a.filters.length>0,48005),gp(i)&&gp(a))return m7(i,a.getFilters());const s=AI(i)?i:a,o=AI(i)?a:i,c=s.filters.map((u=>R2(u,o)));return Ht.create(c,"or")})(t,e),Ww(n)}function YL(t,e){if(gp(e))return m7(e,t.getFilters());{const n=e.filters.map((r=>R2(t,r)));return Ht.create(n,"or")}}function Ww(t){if(Xe(t instanceof Ct||t instanceof Ht,11850),t instanceof Ct)return t;const e=t.getFilters();if(e.length===1)return Ww(e[0]);if(p7(t))return t;const n=e.map((i=>Ww(i))),r=[];return n.forEach((i=>{i instanceof Ct?r.push(i):i instanceof Ht&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Ht.create(r,t.op)}class Efe{constructor(){this.Sn=new M2}addToCollectionParentIndex(e,n){return this.Sn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(ha.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(ha.min())}updateCollectionGroup(e,n,r){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class M2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Kt(zt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kt(zt.comparator)).toArray()}}const XL="IndexedDbIndexManager",Zb=new Uint8Array(0);class Tfe{constructor(e,n){this.databaseId=n,this.Dn=new M2,this.Cn=new Dl((r=>Vd(r)),((r,i)=>k0(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Dn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.Dn.add(n)}));const a={collectionId:r,parent:ii(i)};return QL(e).put(a)}return fe.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Lq(n),""],!1,!0);return QL(e).H(i).next((a=>{for(const s of a){if(s.collectionId!==n)break;r.push(oo(s.parent))}return r}))}addFieldIndex(e,n){const r=Sm(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const s=ch(e);return a.next((o=>{s.put($L(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=Sm(e),i=ch(e),a=lh(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=Sm(e),r=lh(e),i=ch(e);return n.X().next((()=>r.X())).next((()=>i.X()))}createTargetIndexes(e,n){return fe.forEach(this.vn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new WL(r).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=lh(e);let i=!0;const a=new Map;return fe.forEach(this.vn(n),(s=>this.Fn(e,s).next((o=>{i&&(i=!!o),a.set(s,o)})))).next((()=>{if(i){let s=yt();const o=[];return fe.forEach(a,((c,u)=>{Ne(XL,`Using index ${(function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map((P=>`${P.fieldPath}:${P.kind}`)).join(",")}`})(c)} to execute ${Vd(n)}`);const f=(function(I,P){const O=bI(P);if(O===void 0)return null;for(const D of Uw(I,O.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null})(u,c),h=(function(I,P){const O=new Map;for(const D of td(P))for(const N of Uw(I,D.fieldPath))switch(N.op){case"==":case"in":O.set(D.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return O.set(D.fieldPath.canonicalString(),N.value),Array.from(O.values())}return null})(u,c),g=(function(I,P){const O=[];let D=!0;for(const N of td(P)){const C=N.kind===0?CL(I,N.fieldPath,I.startAt):IL(I,N.fieldPath,I.startAt);O.push(C.value),D&&(D=C.inclusive)}return new pp(O,D)})(u,c),v=(function(I,P){const O=[];let D=!0;for(const N of td(P)){const C=N.kind===0?IL(I,N.fieldPath,I.endAt):CL(I,N.fieldPath,I.endAt);O.push(C.value),D&&(D=C.inclusive)}return new pp(O,D)})(u,c),b=this.Mn(c,u,g),x=this.Mn(c,u,v),w=this.xn(c,u,h),S=this.On(c.indexId,f,b,g.inclusive,x,v.inclusive,w);return fe.forEach(S,(T=>r.Z(T,n.limit).next((I=>{I.forEach((P=>{const O=ze.fromSegments(P.documentKey);s.has(O)||(s=s.add(O),o.push(O))}))}))))})).next((()=>o))}return fe.resolve(null)}))}vn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=_fe(Ht.create(e.filters,"and")).map((r=>CI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,n),n)}On(e,n,r,i,a,s,o){const c=(n!=null?n.length:1)*Math.max(r.length,a.length),u=c/(n!=null?n.length:1),f=[];for(let h=0;h<c;++h){const g=n?this.Nn(n[h/u]):Zb,v=this.Bn(e,g,r[h%u],i),b=this.Ln(e,g,a[h%u],s),x=o.map((w=>this.Bn(e,g,w,!0)));f.push(...this.createRange(v,b,x))}return f}Bn(e,n,r,i){const a=new fd(e,ze.empty(),n,r);return i?a:a.En()}Ln(e,n,r,i){const a=new fd(e,ze.empty(),n,r);return i?a.En():a}Fn(e,n){const r=new WL(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const o of a)r.gn(o)&&(!s||o.fields.length>s.fields.length)&&(s=o);return s}))}getIndexType(e,n){let r=2;const i=this.vn(n);return fe.forEach(i,(a=>this.Fn(e,a).next((s=>{s?r!==0&&s.fields.length<(function(c){let u=new Kt(kn.comparator),f=!1;for(const h of c.filters)for(const g of h.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:u=u.add(g.field));for(const h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(f?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}kn(e,n){const r=new wm;for(const i of td(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const s=r.ln(i.kind);dd.Wt.Dt(a,s)}return r.un()}Nn(e){const n=new wm;return dd.Wt.Dt(e,n.ln(0)),n.un()}Kn(e,n){const r=new wm;return dd.Wt.Dt(jv(this.databaseId,n),r.ln((function(a){const s=td(a);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}xn(e,n,r){if(r===null)return[];let i=[];i.push(new wm);let a=0;for(const s of td(e)){const o=r[a++];for(const c of i)if(this.qn(n,s.fieldPath)&&zv(o))i=this.Un(i,s,o);else{const u=c.ln(s.kind);dd.Wt.Dt(o,u)}}return this.$n(i)}Mn(e,n,r){return this.xn(e,n,r.position)}$n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Un(e,n,r){const i=[...e],a=[];for(const s of r.arrayValue.values||[])for(const o of i){const c=new wm;c.seed(o.un()),dd.Wt.Dt(s,c.ln(n.kind)),a.push(c)}return a}qn(e,n){return!!e.filters.find((r=>r instanceof Ct&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=Sm(e),i=ch(e);return(n?r.H(wI,IDBKeyRange.bound(n,n)):r.H()).next((a=>{const s=[];return fe.forEach(a,(o=>i.get([o.indexId,this.uid]).next((c=>{s.push((function(f,h){const g=h?new Iv(h.sequenceNumber,new ha($d(h.readTime),new ze(oo(h.documentKey)),h.largestBatchId)):Iv.empty(),v=f.fields.map((([b,x])=>new Jx(kn.fromServerFormat(b),x)));return new zw(f.indexId,f.collectionGroup,v,g)})(o,c))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:ot(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=Sm(e),a=ch(e);return this.Wn(e).next((s=>i.H(wI,IDBKeyRange.bound(n,n)).next((o=>fe.forEach(o,(c=>a.put($L(c.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return fe.forEach(n,((i,a)=>{const s=r.get(i.collectionGroup);return(s?fe.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),fe.forEach(o,(c=>this.Qn(e,i,c).next((u=>{const f=this.Gn(a,c);return u.isEqual(f)?fe.resolve():this.zn(e,a,c,u,f)})))))))}))}jn(e,n,r,i){return lh(e).put(i.Rn(this.uid,this.Kn(r,n.key),n.key))}Hn(e,n,r,i){return lh(e).delete(i.An(this.uid,this.Kn(r,n.key),n.key))}Qn(e,n,r){const i=lh(e);let a=new Kt(Sc);return i.ee({index:Qq,range:IDBKeyRange.only([r.indexId,this.uid,ow(this.Kn(r,n))])},((s,o)=>{a=a.add(new fd(r.indexId,n,KL(o.arrayValue),KL(o.directionalValue)))})).next((()=>a))}Gn(e,n){let r=new Kt(Sc);const i=this.kn(n,e);if(i==null)return r;const a=bI(n);if(a!=null){const s=e.data.field(a.fieldPath);if(zv(s))for(const o of s.arrayValue.values||[])r=r.add(new fd(n.indexId,e.key,this.Nn(o),i))}else r=r.add(new fd(n.indexId,e.key,Zb,i));return r}zn(e,n,r,i,a){Ne(XL,"Updating index entries for document '%s'",n.key);const s=[];return(function(c,u,f,h,g){const v=c.getIterator(),b=u.getIterator();let x=sh(v),w=sh(b);for(;x||w;){let S=!1,T=!1;if(x&&w){const I=f(x,w);I<0?T=!0:I>0&&(S=!0)}else x!=null?T=!0:S=!0;S?(h(w),w=sh(b)):T?(g(x),x=sh(v)):(x=sh(v),w=sh(b))}})(i,a,Sc,(o=>{s.push(this.jn(e,n,r,o))}),(o=>{s.push(this.Hn(e,n,r,o))})),fe.waitFor(s)}Wn(e){let n=1;return ch(e).ee({index:Xq,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,o)=>Sc(s,o))).filter(((s,o,c)=>!o||Sc(s,c[o-1])!==0));const i=[];i.push(e);for(const s of r){const o=Sc(s,e),c=Sc(s,n);if(o===0)i[0]=e.En();else if(o>0&&c<0)i.push(s),i.push(s.En());else if(c>0)break}i.push(n);const a=[];for(let s=0;s<i.length;s+=2){if(this.Jn(i[s],i[s+1]))return[];const o=i[s].An(this.uid,Zb,ze.empty()),c=i[s+1].An(this.uid,Zb,ze.empty());a.push(IDBKeyRange.bound(o,c))}return a}Jn(e,n){return Sc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(ZL)}getMinOffset(e,n){return fe.mapArray(this.vn(n),(r=>this.Fn(e,r).next((i=>i||Fe(44426))))).next(ZL)}}function QL(t){return wr(t,Dv)}function lh(t){return wr(t,av)}function Sm(t){return wr(t,x2)}function ch(t){return wr(t,iv)}function ZL(t){Xe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;v2(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ha(e.readTime,e.documentKey,n)}const JL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rG=41943040;class ei{static withCacheSize(e){return new ei(e,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function iG(t,e,n){const r=t.store(ds),i=t.store(lp),a=[],s=IDBKeyRange.only(n.batchId);let o=0;const c=r.ee({range:s},((f,h,g)=>(o++,g.delete())));a.push(c.next((()=>{Xe(o===1,47070,{batchId:n.batchId})})));const u=[];for(const f of n.mutations){const h=Kq(e,f.key.path,n.batchId);a.push(i.delete(h)),u.push(f.key)}return fe.waitFor(a).next((()=>u))}function Yw(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Fe(14731);e=t.noDocument}return JSON.stringify(e).length}ei.DEFAULT_COLLECTION_PERCENTILE=10,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ei.DEFAULT=new ei(rG,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ei.DISABLED=new ei(-1,0,0);class US{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static wt(e,n,r,i){Xe(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new US(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _c(e).ee({index:vd,range:r},((i,a,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=Eh(e),s=_c(e);return s.add({}).next((o=>{Xe(typeof o=="number",49019);const c=new I2(o,n,r,i),u=(function(v,b,x){const w=x.baseMutations.map((T=>Hw(v.yt,T))),S=x.mutations.map((T=>Hw(v.yt,T)));return{userId:b,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:w,mutations:S}})(this.serializer,this.userId,c),f=[];let h=new Kt(((g,v)=>ot(g.canonicalString(),v.canonicalString())));for(const g of i){const v=Kq(this.userId,g.key.path,o);h=h.add(g.key.path.popLast()),f.push(s.put(u)),f.push(a.put(v,ede))}return h.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Zn[o]=c.keys()})),fe.waitFor(f).next((()=>c))}))}lookupMutationBatch(e,n){return _c(e).get(n).next((r=>r?(Xe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),ud(this.serializer,r)):null))}Xn(e,n){return this.Zn[n]?fe.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Zn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return _c(e).ee({index:vd,range:i},((s,o,c)=>{o.userId===this.userId&&(Xe(o.batchId>=r,47524,{Yn:r}),a=ud(this.serializer,o)),c.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ad;return _c(e).ee({index:vd,range:n,reverse:!0},((i,a,s)=>{r=a.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ad],[this.userId,Number.POSITIVE_INFINITY]);return _c(e).H(vd,n).next((r=>r.map((i=>ud(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=ew(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return Eh(e).ee({range:i},((s,o,c)=>{const[u,f,h]=s,g=oo(f);if(u===this.userId&&n.path.isEqual(g))return _c(e).get(h).next((v=>{if(!v)throw Fe(61480,{er:s,batchId:h});Xe(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:h}),a.push(ud(this.serializer,v))}));c.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Kt(ot);const i=[];return n.forEach((a=>{const s=ew(this.userId,a.path),o=IDBKeyRange.lowerBound(s),c=Eh(e).ee({range:o},((u,f,h)=>{const[g,v,b]=u,x=oo(v);g===this.userId&&a.path.isEqual(x)?r=r.add(b):h.done()}));i.push(c)})),fe.waitFor(i).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=ew(this.userId,r),s=IDBKeyRange.lowerBound(a);let o=new Kt(ot);return Eh(e).ee({range:s},((c,u,f)=>{const[h,g,v]=c,b=oo(g);h===this.userId&&r.isPrefixOf(b)?b.length===i&&(o=o.add(v)):f.done()})).next((()=>this.tr(e,o)))}tr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(_c(e).get(a).next((s=>{if(s===null)throw Fe(35274,{batchId:a});Xe(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:a}),r.push(ud(this.serializer,s))})))})),fe.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return iG(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.nr(n.batchId)})),fe.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return fe.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return Eh(e).ee({range:r},((a,s,o)=>{if(a[0]===this.userId){const c=oo(a[1]);i.push(c)}else o.done()})).next((()=>{Xe(i.length===0,56720,{rr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return aG(e,this.userId,n)}ir(e){return sG(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ad,lastStreamToken:""}))}}function aG(t,e,n){const r=ew(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let s=!1;return Eh(t).ee({range:a,Y:!0},((o,c,u)=>{const[f,h,g]=o;f===e&&h===i&&(s=!0),u.done()})).next((()=>s))}function _c(t){return wr(t,ds)}function Eh(t){return wr(t,lp)}function sG(t){return wr(t,Pv)}class Ud{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ud(0)}static ar(){return new Ud(-1)}}class Afe{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.ur(e).next((n=>{const r=new Ud(n.highestTargetId);return n.highestTargetId=r.next(),this.cr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((n=>et.fromTimestamp(new gt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.ur(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.cr(e,i))))}addTargetData(e,n){return this.lr(e,n).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(n,r),this.cr(e,r))))))}updateTargetData(e,n){return this.lr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>uh(e).delete(n.targetId))).next((()=>this.ur(e))).next((r=>(Xe(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return uh(e).ee(((s,o)=>{const c=qm(o);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,a.push(this.removeTargetData(e,c)))})).next((()=>fe.waitFor(a))).next((()=>i))}forEachTarget(e,n){return uh(e).ee(((r,i)=>{const a=qm(i);n(a)}))}ur(e){return e5(e).get(Bw).next((n=>(Xe(n!==null,2888),n)))}cr(e,n){return e5(e).put(Bw,n)}lr(e,n){return uh(e).put(J7(this.serializer,n))}hr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Vd(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return uh(e).ee({range:i,index:Yq},((s,o,c)=>{const u=qm(o);k0(n,u.target)&&(a=u,c.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=Dc(e);return n.forEach((s=>{const o=ii(s.path);i.push(a.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,s))})),fe.waitFor(i)}removeMatchingKeys(e,n,r){const i=Dc(e);return fe.forEach(n,(a=>{const s=ii(a.path);return fe.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=Dc(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Dc(e);let a=yt();return i.ee({range:r,Y:!0},((s,o,c)=>{const u=oo(s[1]),f=new ze(u);a=a.add(f)})).next((()=>a))}containsKey(e,n){const r=ii(n.path),i=IDBKeyRange.bound([r],[Lq(r)],!1,!0);let a=0;return Dc(e).ee({index:b2,Y:!0,range:i},(([s,o],c,u)=>{s!==0&&(a++,u.done())})).next((()=>a>0))}At(e,n){return uh(e).get(n).next((r=>r?qm(r):null))}}function uh(t){return wr(t,cp)}function e5(t){return wr(t,kd)}function Dc(t){return wr(t,up)}const t5="LruGarbageCollector",oG=1048576;function n5([t,e],[n,r]){const i=ot(t,n);return i===0?ot(e,r):i}class kfe{constructor(e){this.Pr=e,this.buffer=new Kt(n5),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();n5(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lG{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ne(t5,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){fu(n)?Ne(t5,"Ignoring IndexedDB error during garbage collection: ",n):await du(n)}await this.Ar(3e5)}))}}class Cfe{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(Ri.ce);const r=new kfe(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(JL)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JL):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,a,s,o,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,o=Date.now(),this.removeTargets(e,r,n)))).next((h=>(a=h,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(u=Date.now(),xh()<=kt.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:h}))))}}function cG(t,e){return new Cfe(t,e)}class Ife{constructor(e,n){this.db=e,this.garbageCollector=cG(this,n)}dr(e){const n=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}mr(e,n){return this.yr(e,((r,i)=>n(i)))}addReference(e,n,r){return Jb(e,r)}removeReference(e,n,r){return Jb(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Jb(e,n)}wr(e,n){return(function(i,a){let s=!1;return sG(i).te((o=>aG(i,o,a).next((c=>(c&&(s=!0),fe.resolve(!c)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.yr(e,((s,o)=>{if(o<=n){const c=this.wr(e,s).next((u=>{if(!u)return a++,r.getEntry(e,s).next((()=>(r.removeEntry(s,et.min()),Dc(e).delete((function(h){return[0,ii(h.path)]})(s)))))}));i.push(c)}})).next((()=>fe.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Jb(e,n)}yr(e,n){const r=Dc(e);let i,a=Ri.ce;return r.ee({index:b2},(([s,o],{path:c,sequenceNumber:u})=>{s===0?(a!==Ri.ce&&n(new ze(oo(i)),a),a=u,i=c):a=Ri.ce})).next((()=>{a!==Ri.ce&&n(new ze(oo(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jb(t,e){return Dc(t).put((function(r,i){return{targetId:0,path:ii(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class uG{constructor(){this.changes=new Dl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?fe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Nfe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Yu(e).put(r)}removeEntry(e,n,r){return Yu(e).delete((function(a,s){const o=a.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Kw(s),o[o.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.br(e,r))))}getEntry(e,n){let r=zn.newInvalidDocument(n);return Yu(e).ee({index:tw,range:IDBKeyRange.only(_m(n))},((i,a)=>{r=this.Sr(n,a)})).next((()=>r))}Dr(e,n){let r={size:0,document:zn.newInvalidDocument(n)};return Yu(e).ee({index:tw,range:IDBKeyRange.only(_m(n))},((i,a)=>{r={document:this.Sr(n,a),size:Yw(a)}})).next((()=>r))}getEntries(e,n){let r=ca();return this.Cr(e,n,((i,a)=>{const s=this.Sr(i,a);r=r.insert(i,s)})).next((()=>r))}vr(e,n){let r=ca(),i=new cn(ze.comparator);return this.Cr(e,n,((a,s)=>{const o=this.Sr(a,s);r=r.insert(a,o),i=i.insert(a,Yw(s))})).next((()=>({documents:r,Fr:i})))}Cr(e,n,r){if(n.isEmpty())return fe.resolve();let i=new Kt(a5);n.forEach((c=>i=i.add(c)));const a=IDBKeyRange.bound(_m(i.first()),_m(i.last())),s=i.getIterator();let o=s.getNext();return Yu(e).ee({index:tw,range:a},((c,u,f)=>{const h=ze.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&a5(o,h)<0;)r(o,null),o=s.getNext();o&&o.isEqual(h)&&(r(o,u),o=s.hasNext()?s.getNext():null),o?f.j(_m(o)):f.done()})).next((()=>{for(;o;)r(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),Kw(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yu(e).H(IDBKeyRange.bound(o,c,!0)).next((u=>{a?.incrementDocumentReadCount(u.length);let f=ca();for(const h of u){const g=this.Sr(ze.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);g.isFoundDocument()&&(I0(n,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,n,r,i){let a=ca();const s=i5(n,r),o=i5(n,ha.max());return Yu(e).ee({index:Wq,range:IDBKeyRange.bound(s,o,!0)},((c,u,f)=>{const h=this.Sr(ze.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);a=a.insert(h.key,h),a.size===i&&f.done()})).next((()=>a))}newChangeBuffer(e){return new Pfe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return r5(e).get(xI).next((n=>(Xe(!!n,20021),n)))}br(e,n){return r5(e).put(xI,n)}Sr(e,n){if(n){const r=mfe(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(et.min())))return r}return zn.newInvalidDocument(e)}}function dG(t){return new Nfe(t)}class Pfe extends uG{constructor(e,n){super(),this.Mr=e,this.trackRemovals=n,this.Or=new Dl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Kt(((a,s)=>ot(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const o=this.Or.get(a);if(n.push(this.Mr.removeEntry(e,a,o.readTime)),s.isValidDocument()){const c=BL(this.Mr.serializer,s);i=i.add(a.path.popLast());const u=Yw(c);r+=u-o.size,n.push(this.Mr.addEntry(e,a,c))}else if(r-=o.size,this.trackRemovals){const c=BL(this.Mr.serializer,s.convertToNoDocument(et.min()));n.push(this.Mr.addEntry(e,a,c))}})),i.forEach((a=>{n.push(this.Mr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Mr.updateMetadata(e,r)),fe.waitFor(n)}getFromCache(e,n){return this.Mr.Dr(e,n).next((r=>(this.Or.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Mr.vr(e,n).next((({documents:r,Fr:i})=>(i.forEach(((a,s)=>{this.Or.set(a,{size:s,readTime:r.get(a).readTime})})),r)))}}function r5(t){return wr(t,Ov)}function Yu(t){return wr(t,Vw)}function _m(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function i5(t,e){const n=e.documentKey.path.toArray();return[t,Kw(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function a5(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=ot(n[a],r[a]),i)return i;return i=ot(n.length,r.length),i||(i=ot(n[n.length-2],r[r.length-2]),i||ot(n[n.length-1],r[r.length-1]))}class Ofe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class fG{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&cv(r.mutation,i,Mi.empty(),gt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,yt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=yt()){const i=lo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let s=$m();return a.forEach(((o,c)=>{s=s.insert(o,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=lo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,yt())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,o)=>{n.set(s,o)}))}))}computeViews(e,n,r,i){let a=ca();const s=lv(),o=(function(){return lv()})();return n.forEach(((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Rl)?a=a.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),cv(f.mutation,u,f.mutation.getFieldMask(),gt.now())):s.set(u.key,Mi.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((u,f)=>s.set(u,f))),n.forEach(((u,f)=>o.set(u,new Ofe(f,s.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,n){const r=lv();let i=new cn(((s,o)=>s-o)),a=yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const o of s)o.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let f=r.get(c)||Mi.empty();f=o.applyToLocalView(u,f),r.set(c,f);const h=(i.get(o.batchId)||yt()).add(c);i=i.insert(o.batchId,h)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,f=c.value,h=k7();f.forEach((g=>{if(!a.has(g)){const v=R7(n.get(g),r.get(g));v!==null&&h.set(g,v),a=a.add(g)}})),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return fe.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return zde(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):w7(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):fe.resolve(lo());let o=op,c=a;return s.next((u=>fe.forEach(u,((f,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(f)?fe.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{c=c.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,a))).next((()=>this.computeViews(e,c,u,yt()))).next((f=>({batchId:o,changes:A7(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ze(n)).next((r=>{let i=$m();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=$m();return this.indexManager.getCollectionParents(e,a).next((o=>fe.forEach(o,(c=>{const u=(function(h,g){return new Kp(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((f=>{f.forEach(((h,g)=>{s=s.insert(h,g)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((s=>{a.forEach(((c,u)=>{const f=u.getKey();s.get(f)===null&&(s=s.insert(f,zn.newInvalidDocument(f)))}));let o=$m();return s.forEach(((c,u)=>{const f=a.get(c);f!==void 0&&cv(f.mutation,u,Mi.empty(),gt.now()),I0(n,u)&&(o=o.insert(c,u))})),o}))}}class Dfe{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return fe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:wi(i.createTime)}})(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:eG(i.bundledQuery),readTime:wi(i.readTime)}})(n)),fe.resolve()}}class Rfe{constructor(){this.overlays=new cn(ze.comparator),this.Lr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=lo();return fe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.bt(e,n,a)})),fe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),fe.resolve()}getOverlaysForCollection(e,n,r){const i=lo(),a=n.length+1,s=new ze(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new cn(((u,f)=>u-f));const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=a.get(u.largestBatchId);f===null&&(f=lo(),a=a.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=lo(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,f)=>o.set(u,f))),!(o.size()>=i)););return fe.resolve(o)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new P2(n,r));let a=this.Lr.get(n);a===void 0&&(a=yt(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}class Mfe{constructor(){this.sessionToken=Gn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}class j2{constructor(){this.kr=new Kt(Pr.Kr),this.qr=new Kt(Pr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Pr(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Pr(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new ze(new zt([])),r=new Pr(n,e),i=new Pr(n,e+1),a=[];return this.qr.forEachInRange([r,i],(s=>{this.Wr(s),a.push(s.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ze(new zt([])),r=new Pr(n,e),i=new Pr(n,e+1);let a=yt();return this.qr.forEachInRange([r,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const n=new Pr(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pr{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ze.comparator(e.key,n.key)||ot(e.Hr,n.Hr)}static Ur(e,n){return ot(e.Hr,n.Hr)||ze.comparator(e.key,n.key)}}class jfe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Kt(Pr.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new I2(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Jr=this.Jr.add(new Pr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return fe.resolve(s)}lookupMutationBatch(e,n){return fe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return fe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?Ad:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pr(n,0),i=new Pr(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,i],(s=>{const o=this.Zr(s.Hr);a.push(o)})),fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Kt(ot);return n.forEach((i=>{const a=new Pr(i,0),s=new Pr(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,s],(o=>{r=r.add(o.Hr)}))})),fe.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;ze.isDocumentKey(a)||(a=a.child(""));const s=new Pr(new ze(a),0);let o=new Kt(ot);return this.Jr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.Hr)),!0)}),s),fe.resolve(this.Yr(o))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Xe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return fe.forEach(n.mutations,(i=>{const a=new Pr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Pr(n,0),i=this.Jr.firstAfterOrEqual(r);return fe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class zfe{constructor(e){this.ti=e,this.docs=(function(){return new cn(ze.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return fe.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(n))}getEntries(e,n){let r=ca();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():zn.newInvalidDocument(i))})),fe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ca();const s=n.path,o=new ze(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||v2($q(f),r)<=0||(i.has(f.key)||I0(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return fe.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Fe(9500)}ni(e,n){return fe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Lfe(this)}getSize(e){return fe.resolve(this.size)}}class Lfe extends uG{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),fe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class Vfe{constructor(e){this.persistence=e,this.ri=new Dl((n=>Vd(n)),k0),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.ii=0,this.si=new j2,this.targetCount=0,this.oi=Ud._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),fe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ud(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.lr(n),fe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ri.forEach(((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.ri.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),fe.waitFor(a).next((()=>i))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return fe.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),fe.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),fe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return fe.resolve(r)}containsKey(e,n){return fe.resolve(this.si.containsKey(n))}}class z2{constructor(e,n){this._i={},this.overlays={},this.ai=new Ri(0),this.ui=!1,this.ui=!0,this.ci=new Mfe,this.referenceDelegate=e(this),this.li=new Vfe(this),this.indexManager=new Efe,this.remoteDocumentCache=(function(i){return new zfe(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new Z7(n),this.Pi=new Dfe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Rfe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new jfe(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Ne("MemoryPersistence","Starting transaction:",e);const i=new Bfe(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((a=>this.referenceDelegate.Ii(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ei(e,n){return fe.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class Bfe extends qq{constructor(e){super(),this.currentSequenceNumber=e}}class qS{constructor(e){this.persistence=e,this.Ri=new j2,this.Ai=null}static Vi(e){return new qS(e)}get di(){if(this.Ai)return this.Ai;throw Fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),fe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(r=>{const i=ze.fromPath(r);return this.mi(e,i).next((a=>{a||n.removeEntry(i,et.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return fe.or([()=>fe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Xw{constructor(e,n){this.persistence=e,this.fi=new Dl((r=>ii(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=cG(this,n)}static Vi(e,n){return new Xw(e,n)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return fe.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((a=>a?fe.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ni(e,(s=>this.wr(e,s,n).next((o=>{o||(r++,a.removeEntry(s,et.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),fe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rw(e.data.value)),n}wr(e,n,r){return fe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return fe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ffe{constructor(e){this.serializer=e}k(e,n,r,i){const a=new OS("createOrUpgrade",n);r<1&&i>=1&&((function(c){c.createObjectStore(A0)})(e),(function(c){c.createObjectStore(Pv,{keyPath:Jue}),c.createObjectStore(ds,{keyPath:mL,autoIncrement:!0}).createIndex(vd,vL,{unique:!0}),c.createObjectStore(lp)})(e),s5(e),(function(c){c.createObjectStore(nd)})(e));let s=fe.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(up),c.deleteObjectStore(cp),c.deleteObjectStore(kd)})(e),s5(e)),s=s.next((()=>(function(c){const u=c.store(kd),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:et.min().toTimestamp(),targetCount:0};return u.put(Bw,f)})(a)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(c,u){return u.store(ds).H().next((h=>{c.deleteObjectStore(ds),c.createObjectStore(ds,{keyPath:mL,autoIncrement:!0}).createIndex(vd,vL,{unique:!0});const g=u.store(ds),v=h.map((b=>g.put(b)));return fe.waitFor(v)}))})(e,a)))),s=s.next((()=>{(function(c){c.createObjectStore(dp,{keyPath:lde})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.gi(a)))),r<6&&i>=6&&(s=s.next((()=>((function(c){c.createObjectStore(Ov)})(e),this.pi(a))))),r<7&&i>=7&&(s=s.next((()=>this.yi(a)))),r<8&&i>=8&&(s=s.next((()=>this.wi(e,a)))),r<9&&i>=9&&(s=s.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.bi(a)))),r<11&&i>=11&&(s=s.next((()=>{(function(c){c.createObjectStore(RS,{keyPath:cde})})(e),(function(c){c.createObjectStore(MS,{keyPath:ude})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(c){const u=c.createObjectStore(jS,{keyPath:vde});u.createIndex(SI,yde,{unique:!1}),u.createIndex(Zq,bde,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(c){const u=c.createObjectStore(Vw,{keyPath:tde});u.createIndex(tw,nde),u.createIndex(Wq,rde)})(e))).next((()=>this.Si(e,a))).next((()=>e.deleteObjectStore(nd)))),r<14&&i>=14&&(s=s.next((()=>this.Di(e,a)))),r<15&&i>=15&&(s=s.next((()=>(function(c){c.createObjectStore(x2,{keyPath:dde,autoIncrement:!0}).createIndex(wI,fde,{unique:!1}),c.createObjectStore(iv,{keyPath:hde}).createIndex(Xq,pde,{unique:!1}),c.createObjectStore(av,{keyPath:gde}).createIndex(Qq,mde,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(iv).clear()})).next((()=>{n.objectStore(av).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(c){c.createObjectStore(w2,{keyPath:xde})})(e)}))),r<18&&i>=18&&f8()&&(s=s.next((()=>{n.objectStore(iv).clear()})).next((()=>{n.objectStore(av).clear()}))),s}pi(e){let n=0;return e.store(nd).ee(((r,i)=>{n+=Yw(i)})).next((()=>{const r={byteSize:n};return e.store(Ov).put(xI,r)}))}gi(e){const n=e.store(Pv),r=e.store(ds);return n.H().next((i=>fe.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,Ad],[a.userId,a.lastAcknowledgedBatchId]);return r.H(vd,s).next((o=>fe.forEach(o,(c=>{Xe(c.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=ud(this.serializer,c);return iG(e,a.userId,u).next((()=>{}))}))))}))))}yi(e){const n=e.store(up),r=e.store(nd);return e.store(kd).get(Bw).next((i=>{const a=[];return r.ee(((s,o)=>{const c=new zt(s),u=(function(h){return[0,ii(h)]})(c);a.push(n.get(u).next((f=>f?fe.resolve():(h=>n.put({targetId:0,path:ii(h),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>fe.waitFor(a)))}))}wi(e,n){e.createObjectStore(Dv,{keyPath:ode});const r=n.store(Dv),i=new M2,a=s=>{if(i.add(s)){const o=s.lastSegment(),c=s.popLast();return r.put({collectionId:o,parent:ii(c)})}};return n.store(nd).ee({Y:!0},((s,o)=>{const c=new zt(s);return a(c.popLast())})).next((()=>n.store(lp).ee({Y:!0},(([s,o,c],u)=>{const f=oo(o);return a(f.popLast())}))))}bi(e){const n=e.store(cp);return n.ee(((r,i)=>{const a=qm(i),s=J7(this.serializer,a);return n.put(s)}))}Si(e,n){const r=n.store(nd),i=[];return r.ee(((a,s)=>{const o=n.store(Vw),c=(function(h){return h.document?new ze(zt.fromString(h.document.name).popFirst(5)):h.noDocument?ze.fromSegments(h.noDocument.path):h.unknownDocument?ze.fromSegments(h.unknownDocument.path):Fe(36783)})(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(o.put(u))})).next((()=>fe.waitFor(i)))}Di(e,n){const r=n.store(ds),i=dG(this.serializer),a=new z2(qS.Vi,this.serializer.yt);return r.H().next((s=>{const o=new Map;return s.forEach((c=>{let u=o.get(c.userId)??yt();ud(this.serializer,c).keys().forEach((f=>u=u.add(f))),o.set(c.userId,u)})),fe.forEach(o,((c,u)=>{const f=new Jr(u),h=$S.wt(this.serializer,f),g=a.getIndexManager(f),v=US.wt(f,this.serializer,g,a.referenceDelegate);return new fG(i,v,h,g).recalculateAndSaveOverlaysForDocumentKeys(new _I(n,Ri.ce),c).next()}))}))}}function s5(t){t.createObjectStore(up,{keyPath:ade}).createIndex(b2,sde,{unique:!0}),t.createObjectStore(cp,{keyPath:"targetId"}).createIndex(Yq,ide,{unique:!0}),t.createObjectStore(kd)}const Ec="IndexedDbPersistence",NA=18e5,PA=5e3,OA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$fe="main";class L2{constructor(e,n,r,i,a,s,o,c,u,f,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ci=a,this.window=s,this.document=o,this.Fi=u,this.Mi=f,this.xi=h,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=g=>Promise.resolve(),!L2.v())throw new Me(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ife(this,i),this.Ki=n+$fe,this.serializer=new Z7(c),this.qi=new Hc(this.Ki,this.xi,new Ffe(this.serializer)),this.ci=new yfe,this.li=new Afe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dG(this.serializer),this.Pi=new vfe,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,f===!1&&qn(Ec,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(_e.FAILED_PRECONDITION,OA);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Ri(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>ex(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((n=>{n||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((n=>this.isPrimary&&!n?this.Ji(e).next((()=>!1)):!!n&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(fu(e))return Ne(Ec,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne(Ec,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Em(e).get(ah).next((n=>fe.resolve(this.Xi(n))))}Yi(e){return ex(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,NA)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=wr(n,dp);return r.H().next((i=>{const a=this.ns(i,NA),s=i.filter((o=>a.indexOf(o)===-1));return fe.forEach(s,(o=>r.delete(o.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ui)for(const n of e)this.Ui.removeItem(this.rs(n.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?fe.resolve(!0):Em(e).get(ah).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,PA)&&!this.ss(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new Me(_e.FAILED_PRECONDITION,OA);return!1}}return!(!this.networkEnabled||!this.inForeground)||ex(e).H().next((r=>this.ns(r,PA).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(a||s&&o)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&Ne(Ec,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[A0,dp],(e=>{const n=new _I(e,Ri.ce);return this.Ji(n).next((()=>this.Yi(n)))})),this.qi.close(),this.ls()}ns(e,n){return e.filter((r=>this.ts(r.updateTimeMs,n)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>ex(e).H().next((n=>this.ns(n,NA).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,n){return US.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Tfe(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return $S.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,n,r){Ne(Ec,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(c){return c===18?_de:c===17?n7:c===16?Sde:c===15?S2:c===14?t7:c===13?e7:c===12?wde:c===11?Jq:void Fe(60245)})(this.xi);let s;return this.qi.runTransaction(e,i,a,(o=>(s=new _I(o,this.ai?this.ai.next():Ri.ce),n==="readwrite-primary"?this.ji(s).next((c=>!!c||this.Hi(s))).next((c=>{if(!c)throw qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new Me(_e.FAILED_PRECONDITION,Uq);return r(s)})).next((c=>this.Zi(s).next((()=>c)))):this.Ps(s).next((()=>r(s)))))).then((o=>(s.raiseOnCommittedEvent(),o)))}Ps(e){return Em(e).get(ah).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,PA)&&!this.ss(n.ownerId)&&!this.Xi(n)&&!(this.Mi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Me(_e.FAILED_PRECONDITION,OA)}))}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Em(e).put(ah,n)}static v(){return Hc.v()}Ji(e){const n=Em(e);return n.get(ah).next((r=>this.Xi(r)?(Ne(Ec,"Releasing primary lease."),n.delete(ah)):fe.resolve()))}ts(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(qn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;d8()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const n=this.Ui?.getItem(this.rs(e))!==null;return Ne(Ec,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return qn(Ec,"Failed to get zombied client id.",n),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){qn("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Em(t){return wr(t,A0)}function ex(t){return wr(t,dp)}function hG(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class V2{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=yt(),i=yt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new V2(e,n.fromCache,r,i)}}class Ufe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class pG{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return d8()?8:Gq(xr())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.gs(e,n).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ps(e,n,i,r).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new Ufe;return this.ys(e,n,s).next((o=>{if(a.result=o,this.As)return this.ws(e,n,s,o.size)}))})).next((()=>a.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(xh()<=kt.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",wh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(xh()<=kt.DEBUG&&Ne("QueryEngine","Query:",wh(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(xh()<=kt.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",wh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,da(n))):fe.resolve())}gs(e,n){if(NL(n))return fe.resolve(null);let r=da(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=qw(n,null,"F"),r=da(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const s=yt(...a);return this.fs.getDocuments(e,s).next((o=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.bs(n,o);return this.Ss(n,u,s,c.readTime)?this.gs(e,qw(n,null,"F")):this.Ds(e,u,n,c)}))))})))))}ps(e,n,r,i){return NL(n)||i.isEqual(et.min())?fe.resolve(null):this.fs.getDocuments(e,r).next((a=>{const s=this.bs(n,a);return this.Ss(n,s,r,i)?fe.resolve(null):(xh()<=kt.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wh(n)),this.Ds(e,s,n,Fq(i,op)).next((o=>o)))}))}bs(e,n){let r=new Kt(E7(e));return n.forEach(((i,a)=>{I0(e,a)&&(r=r.add(a))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ys(e,n,r){return xh()<=kt.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",wh(n)),this.fs.getDocumentsMatchingQuery(e,n,ha.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((s=>{a=a.insert(s.key,s)})),a)))}}const B2="LocalStore",qfe=3e8;class Gfe{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new cn(ot),this.Fs=new Dl((a=>Vd(a)),k0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fG(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function gG(t,e,n,r){return new Gfe(t,e,n,r)}async function mG(t,e){const n=Ke(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const s=[],o=[];let c=yt();for(const u of i){s.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of a){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Ns:u,removedBatchIds:s,addedBatchIds:o})))}))}))}function Hfe(t,e){const n=Ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return(function(o,c,u,f){const h=u.batch,g=h.keys();let v=fe.resolve();return g.forEach((b=>{v=v.next((()=>f.getEntry(c,b))).next((x=>{const w=u.docVersions.get(b);Xe(w!==null,48541),x.version.compareTo(w)<0&&(h.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),f.addEntry(x)))}))})),v.next((()=>o.mutationQueue.removeMutationBatch(c,h)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let c=yt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function vG(t){const e=Ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function Kfe(t,e){const n=Ke(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const o=[];e.targetChanges.forEach(((f,h)=>{const g=i.get(h);if(!g)return;o.push(n.li.removeMatchingKeys(a,f.removedDocuments,h).next((()=>n.li.addMatchingKeys(a,f.addedDocuments,h))));let v=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?v=v.withResumeToken(Gn.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),i=i.insert(h,v),(function(x,w,S){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=qfe?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(g,v,f)&&o.push(n.li.updateTargetData(a,v))}));let c=ca(),u=yt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))})),o.push(Wfe(a,s,e.documentUpdates).next((f=>{c=f.Bs,u=f.Ls}))),!r.isEqual(et.min())){const f=n.li.getLastRemoteSnapshotVersion(a).next((h=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));o.push(f)}return fe.waitFor(o).next((()=>s.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,c,u))).next((()=>c))})).then((a=>(n.vs=i,a)))}function Wfe(t,e,n){let r=yt(),i=yt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let s=ca();return n.forEach(((o,c)=>{const u=a.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(et.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):Ne(B2,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)})),{Bs:s,Ls:i}}))}function Yfe(t,e){const n=Ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ad),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Qw(t,e){const n=Ke(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((a=>a?(i=a,fe.resolve(i)):n.li.allocateTargetId(r).next((s=>(i=new al(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function yp(t,e,n){const r=Ke(t),i=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!fu(s))throw s;Ne(B2,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function zI(t,e,n){const r=Ke(t);let i=et.min(),a=yt();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,u,f){const h=Ke(c),g=h.Fs.get(f);return g!==void 0?fe.resolve(h.vs.get(g)):h.li.getTargetData(u,f)})(r,s,da(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,o.targetId).next((c=>{a=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:et.min(),n?a:yt()))).next((o=>(xG(r,_7(e),o),{documents:o,ks:a})))))}function yG(t,e){const n=Ke(t),r=Ke(n.li),i=n.vs.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((s=>s?s.target:null))))}function bG(t,e){const n=Ke(t),r=n.Ms.get(e)||et.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.xs.getAllFromCollectionGroup(i,e,Fq(r,op),Number.MAX_SAFE_INTEGER))).then((i=>(xG(n,e,i),i)))}function xG(t,e,n){let r=t.Ms.get(e)||et.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Ms.set(e,r)}const wG="firestore_clients";function o5(t,e){return`${wG}_${t}_${e}`}const SG="firestore_mutations";function l5(t,e,n){let r=`${SG}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const _G="firestore_targets";function DA(t,e){return`${_G}_${t}_${e}`}const so="SharedClientState";class Zw{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static $s(e,n,r){const i=JSON.parse(r);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new Me(i.error.code,i.error.message))),s?new Zw(e,n,i.state,a):(qn(so,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uv{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static $s(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new Me(r.error.code,r.error.message))),a?new uv(e,r.state,i):(qn(so,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jw{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static $s(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=k2();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Hq(r.activeTargetIds[s]),a=a.add(r.activeTargetIds[s]);return i?new Jw(e,a):(qn(so,`Failed to parse client data for instance '${e}': ${n}`),null)}}class F2{constructor(e,n){this.clientId=e,this.onlineState=n}static $s(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new F2(n.clientId,n.onlineState):(qn(so,`Failed to parse online state: ${e}`),null)}}class LI{constructor(){this.activeTargetIds=k2()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RA{constructor(e,n,r,i,a){this.window=e,this.Ci=n,this.persistenceKey=r,this.zs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new cn(ot),this.started=!1,this.Zs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Xs=o5(this.persistenceKey,this.zs),this.Ys=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new LI),this.eo=new RegExp(`^${wG}_${s}_([^_]*)$`),this.no=new RegExp(`^${SG}_${s}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${_G}_${s}_(\\d+)$`),this.io=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.so=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const i=this.getItem(o5(this.persistenceKey,r));if(i){const a=Jw.$s(r,i);a&&(this.Js=this.Js.insert(a.clientId,a))}}this.oo();const n=this.storage.getItem(this.io);if(n){const r=this._o(n);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let n=!1;return this.Js.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,n,r){this.co(e,n,r),this.lo(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(DA(this.persistenceKey,e));if(i){const a=uv.$s(e,i);a&&(r=a.state)}}return n&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(DA(this.persistenceKey,e))}updateQueryState(e,n,r){this.Po(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.lo(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ne(so,"READ",e,n),n}setItem(e,n){Ne(so,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ne(so,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(Ne(so,"EVENT",n.key,n.newValue),n.key===this.Xs)return void qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.eo.test(n.key)){if(n.newValue==null){const r=this.Eo(n.key);return this.Ro(r,null)}{const r=this.Ao(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(n.key)){if(n.newValue!==null){const r=this.Vo(n.key,n.newValue);if(r)return this.mo(r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(n.key===this.io){if(n.newValue!==null){const r=this._o(n.newValue);if(r)return this.ao(r)}}else if(n.key===this.Ys){const r=(function(a){let s=Ri.ce;if(a!=null)try{const o=JSON.parse(a);Xe(typeof o=="number",30636,{yo:a}),s=o}catch(o){qn(so,"Failed to read sequence number from WebStorage",o)}return s})(n.newValue);r!==Ri.ce&&this.sequenceNumberHandler(r)}else if(n.key===this.so){const r=this.wo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.bo(i))))}}}else this.Zs.push(n)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,n,r){const i=new Zw(this.currentUser,e,n,r),a=l5(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Ws())}lo(e){const n=l5(this.persistenceKey,this.currentUser,e);this.removeItem(n)}To(e){const n={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(n))}Po(e,n,r){const i=DA(this.persistenceKey,e),a=new uv(e,n,r);this.setItem(i,a.Ws())}Io(e){const n=JSON.stringify(Array.from(e));this.setItem(this.so,n)}Eo(e){const n=this.eo.exec(e);return n?n[1]:null}Ao(e,n){const r=this.Eo(e);return Jw.$s(r,n)}Vo(e,n){const r=this.no.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return Zw.$s(new Jr(a),i,n)}fo(e,n){const r=this.ro.exec(e),i=Number(r[1]);return uv.$s(i,n)}_o(e){return F2.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);Ne(so,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Js.insert(e,n):this.Js.remove(e),i=this.uo(this.Js),a=this.uo(r),s=[],o=[];return a.forEach((c=>{i.has(c)||s.push(c)})),i.forEach((c=>{a.has(c)||o.push(c)})),this.syncEngine.Co(s,o).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let n=k2();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class EG{constructor(){this.vo=new LI,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new LI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Xfe{Mo(e){}shutdown(){}}const c5="ConnectivityMonitor";class u5{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ne(c5,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ne(c5,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let tx=null;function VI(){return tx===null?tx=(function(){return 268435456+Math.round(2147483648*Math.random())})():tx++,"0x"+tx.toString(16)}const MA="RestConnection",Qfe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Zfe{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Fw?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const s=VI(),o=this.Qo(e,n.toUriEncodedString());Ne(MA,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,a);const{host:u}=new URL(o),f=cu(u);return this.zo(e,o,c,r,f).then((h=>(Ne(MA,`Received RPC '${e}' ${s}: `,h),h)),(h=>{throw ap(MA,`RPC '${e}' ${s} failed with error: `,h,"url: ",o,"request:",r),h}))}jo(e,n,r,i,a,s){return this.Wo(e,n,r,i,a)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hp})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}Qo(e,n){const r=Qfe[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class Jfe{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Qr="WebChannelConnection",Tm=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Hh extends Zfe{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Hh.c_){const e=Mq();Tm(e,Rq.STAT_EVENT,(n=>{n.stat===vI.PROXY?Ne(Qr,"STAT_EVENT: detected buffering proxy"):n.stat===vI.NOPROXY&&Ne(Qr,"STAT_EVENT: detected no buffering proxy")})),Hh.c_=!0}}zo(e,n,r,i,a){const s=VI();return new Promise(((o,c)=>{const u=new Oq;u.setWithCredentials(!0),u.listenOnce(Dq.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Zx.NO_ERROR:const h=u.getResponseJson();Ne(Qr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Zx.TIMEOUT:Ne(Qr,`RPC '${e}' ${s} timed out`),c(new Me(_e.DEADLINE_EXCEEDED,"Request time out"));break;case Zx.HTTP_ERROR:const g=u.getStatus();if(Ne(Qr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v?.error;if(b&&b.status&&b.message){const x=(function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(T)>=0?T:_e.UNKNOWN})(b.status);c(new Me(x,b.message))}else c(new Me(_e.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Me(_e.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ne(Qr,`RPC '${e}' ${s} completed.`)}}));const f=JSON.stringify(i);Ne(Qr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const i=VI(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(o.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Go(o.initMessageHeaders,n,r),o.encodeInitMessageHeaders=!0;const u=a.join("");Ne(Qr,`Creating RPC '${e}' stream ${i}: ${u}`,o);const f=s.createWebChannel(u,o);this.I_(f);let h=!1,g=!1;const v=new Jfe({Ho:b=>{g?Ne(Qr,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(h||(Ne(Qr,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),Ne(Qr,`RPC '${e}' stream ${i} sending:`,b),f.send(b))},Jo:()=>f.close()});return Tm(f,Fm.EventType.OPEN,(()=>{g||(Ne(Qr,`RPC '${e}' stream ${i} transport opened.`),v.i_())})),Tm(f,Fm.EventType.CLOSE,(()=>{g||(g=!0,Ne(Qr,`RPC '${e}' stream ${i} transport closed`),v.o_(),this.E_(f))})),Tm(f,Fm.EventType.ERROR,(b=>{g||(g=!0,ap(Qr,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),v.o_(new Me(_e.UNAVAILABLE,"The operation could not be completed")))})),Tm(f,Fm.EventType.MESSAGE,(b=>{if(!g){const x=b.data[0];Xe(!!x,16349);const w=x,S=w?.error||w[0]?.error;if(S){Ne(Qr,`RPC '${e}' stream ${i} received error:`,S);const T=S.status;let I=(function(D){const N=nr[D];if(N!==void 0)return z7(N)})(T),P=S.message;T==="NOT_FOUND"&&P.includes("database")&&P.includes("does not exist")&&P.includes(this.databaseId.database)&&ap(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),I===void 0&&(I=_e.INTERNAL,P="Unknown error status: "+T+" with message "+S.message),g=!0,v.o_(new Me(I,P)),f.close()}else Ne(Qr,`RPC '${e}' stream ${i} received:`,x),v.__(x)}})),Hh.u_(),setTimeout((()=>{v.s_()}),0),v}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return jq()}}function ehe(t){return new Hh(t)}function TG(){return typeof window<"u"?window:null}function lw(){return typeof document<"u"?document:null}function GS(t){return new sfe(t,!0)}Hh.c_=!1;class AG{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const d5="PersistentStream";class kG{constructor(e,n,r,i,a,s,o,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new AG(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===_e.RESOURCE_EXHAUSTED?(qn(n.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Me(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ne(d5,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Ne(d5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class the extends kG{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=cfe(this.serializer,e),r=(function(a){if(!("targetChange"in a))return et.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?et.min():s.readTime?wi(s.readTime):et.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=OI(this.serializer),n.addTarget=(function(a,s){let o;const c=s.target;if(o=$w(c)?{documents:G7(a,c)}:{query:H7(a,c).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=B7(a,s.resumeToken);const u=NI(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(et.min())>0){o.readTime=vp(a,s.snapshotVersion.toTimestamp());const u=NI(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=dfe(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=OI(this.serializer),n.removeTarget=e,this.K_(n)}}class nhe extends kG{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ufe(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=OI(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Hw(this.serializer,r)))};this.K_(n)}}class rhe{}class ihe extends rhe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Me(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Wo(e,PI(n,r),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Me(_e.UNKNOWN,a.toString())}))}jo(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.jo(e,PI(n,r),i,s,o,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Me(_e.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function ahe(t,e,n,r){return new ihe(t,e,n,r)}class she{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qn(n),this.aa=!1):Ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const qd="RemoteStore";class ohe{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((s=>{r.enqueueAndForget((async()=>{df(this)&&(Ne(qd,"Restarting streams for network reachability change."),await(async function(c){const u=Ke(c);u.Ea.add(4),await D0(u),u.Va.set("Unknown"),u.Ea.delete(4),await HS(u)})(this))}))})),this.Va=new she(r,i)}}async function HS(t){if(df(t))for(const e of t.Ra)await e(!0)}async function D0(t){for(const e of t.Ra)await e(!1)}function KS(t,e){const n=Ke(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),q2(n)?U2(n):Xp(n).O_()&&$2(n,e))}function bp(t,e){const n=Ke(t),r=Xp(n);n.Ia.delete(e),r.O_()&&CG(n,e),n.Ia.size===0&&(r.O_()?r.L_():df(n)&&n.Va.set("Unknown"))}function $2(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xp(t).Z_(e)}function CG(t,e){t.da.$e(e),Xp(t).X_(e)}function U2(t){t.da=new nfe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xp(t).start(),t.Va.ua()}function q2(t){return df(t)&&!Xp(t).x_()&&t.Ia.size>0}function df(t){return Ke(t).Ea.size===0}function IG(t){t.da=void 0}async function lhe(t){t.Va.set("Online")}async function che(t){t.Ia.forEach(((e,n)=>{$2(t,e)}))}async function uhe(t,e){IG(t),q2(t)?(t.Va.ha(e),U2(t)):t.Va.set("Unknown")}async function dhe(t,e,n){if(t.Va.set("Online"),e instanceof V7&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.da.removeTarget(o))})(t,e)}catch(r){Ne(qd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await e1(t,r)}else if(e instanceof sw?t.da.Xe(e):e instanceof L7?t.da.st(e):t.da.tt(e),!n.isEqual(et.min()))try{const r=await vG(t.localStore);n.compareTo(r)>=0&&await(function(a,s){const o=a.da.Tt(s);return o.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ia.get(u);f&&a.Ia.set(u,f.withResumeToken(c.resumeToken,s))}})),o.targetMismatches.forEach(((c,u)=>{const f=a.Ia.get(c);if(!f)return;a.Ia.set(c,f.withResumeToken(Gn.EMPTY_BYTE_STRING,f.snapshotVersion)),CG(a,c);const h=new al(f.target,c,u,f.sequenceNumber);$2(a,h)})),a.remoteSyncer.applyRemoteEvent(o)})(t,n)}catch(r){Ne(qd,"Failed to raise snapshot:",r),await e1(t,r)}}async function e1(t,e,n){if(!fu(e))throw e;t.Ea.add(1),await D0(t),t.Va.set("Offline"),n||(n=()=>vG(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ne(qd,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await HS(t)}))}function NG(t,e){return e().catch((n=>e1(t,n,e)))}async function Yp(t){const e=Ke(t),n=eu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ad;for(;fhe(e);)try{const i=await Yfe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,hhe(e,i)}catch(i){await e1(e,i)}PG(e)&&OG(e)}function fhe(t){return df(t)&&t.Ta.length<10}function hhe(t,e){t.Ta.push(e);const n=eu(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function PG(t){return df(t)&&!eu(t).x_()&&t.Ta.length>0}function OG(t){eu(t).start()}async function phe(t){eu(t).ra()}async function ghe(t){const e=eu(t);for(const n of t.Ta)e.ea(n.mutations)}async function mhe(t,e,n){const r=t.Ta.shift(),i=N2.from(r,e,n);await NG(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Yp(t)}async function vhe(t,e){e&&eu(t).Y_&&await(async function(r,i){if((function(s){return Jde(s)&&s!==_e.ABORTED})(i.code)){const a=r.Ta.shift();eu(r).B_(),await NG(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Yp(r)}})(t,e),PG(t)&&OG(t)}async function f5(t,e){const n=Ke(t);n.asyncQueue.verifyOperationInProgress(),Ne(qd,"RemoteStore received new credentials");const r=df(n);n.Ea.add(3),await D0(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await HS(n)}async function BI(t,e){const n=Ke(t);e?(n.Ea.delete(2),await HS(n)):e||(n.Ea.add(2),await D0(n),n.Va.set("Unknown"))}function Xp(t){return t.ma||(t.ma=(function(n,r,i){const a=Ke(n);return a.sa(),new the(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:lhe.bind(null,t),Yo:che.bind(null,t),t_:uhe.bind(null,t),J_:dhe.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),q2(t)?U2(t):t.Va.set("Unknown")):(await t.ma.stop(),IG(t))}))),t.ma}function eu(t){return t.fa||(t.fa=(function(n,r,i){const a=Ke(n);return a.sa(),new nhe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:phe.bind(null,t),t_:vhe.bind(null,t),ta:ghe.bind(null,t),na:mhe.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Yp(t)):(await t.fa.stop(),t.Ta.length>0&&(Ne(qd,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class G2{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new G2(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Me(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function H2(t,e){if(qn("AsyncQueue",`${e}: ${t}`),fu(t))return new Me(_e.UNAVAILABLE,`${e}: ${t}`);throw t}class Kh{static emptySet(e){return new Kh(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ze.comparator(n.key,r.key):(n,r)=>ze.comparator(n.key,r.key),this.keyedMap=$m(),this.sortedSet=new cn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Kh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Kh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class h5{constructor(){this.ga=new cn(ze.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Fe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class xp{constructor(e,n,r,i,a,s,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach((o=>{s.push({type:0,doc:o})})),new xp(e,n,Kh.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&VS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class yhe{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class bhe{constructor(){this.queries=p5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ke(n),a=i.queries;i.queries=p5(),a.forEach(((s,o)=>{for(const c of o.ba)c.onError(r)}))})(this,new Me(_e.ABORTED,"Firestore shutting down"))}}function p5(){return new Dl((t=>S7(t)),VS)}async function K2(t,e){const n=Ke(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.Da()&&(r=2):(a=new yhe,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=H2(s,`Initialization of query '${wh(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&Y2(n)}async function W2(t,e){const n=Ke(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.ba.indexOf(e);s>=0&&(a.ba.splice(s,1),a.ba.length===0?i=e.Da()?0:1:!a.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xhe(t,e){const n=Ke(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.ba)o.Fa(i)&&(r=!0);s.wa=i}}r&&Y2(n)}function whe(t,e,n){const r=Ke(t),i=r.queries.get(e);if(i)for(const a of i.ba)a.onError(n);r.queries.delete(e)}function Y2(t){t.Ca.forEach((e=>{e.next()}))}var FI,g5;(g5=FI||(FI={})).Ma="default",g5.Cache="cache";class X2{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new xp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=xp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==FI.Cache}}class DG{constructor(e){this.key=e}}class RG{constructor(e){this.key=e}}class She{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=yt(),this.mutatedKeys=yt(),this.eu=E7(e),this.tu=new Kh(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new h5,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,h)=>{const g=i.get(f),v=I0(this.query,h)?h:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let w=!1;g&&v?g.data.isEqual(v.data)?b!==x&&(r.track({type:3,doc:v}),w=!0):this.su(g,v)||(r.track({type:2,doc:v}),w=!0,(c&&this.eu(v,c)>0||u&&this.eu(v,u)<0)&&(o=!0)):!g&&v?(r.track({type:0,doc:v}),w=!0):g&&!v&&(r.track({type:1,doc:g}),w=!0,(c||u)&&(o=!0)),w&&(v?(s=s.add(v),a=x?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Ss:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((f,h)=>(function(v,b){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Vt:w})}};return x(v)-x(b)})(f.type,h.type)||this.eu(f.doc,h.doc))),this.ou(r),i=i??!1;const o=n&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,u=c!==this.Xa;return this.Xa=c,s.length!==0||u?{snapshot:new xp(this.query,e.tu,a,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new h5,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=yt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new RG(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new DG(r))})),n}cu(e){this.Za=e.ks,this.Ya=yt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return xp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Qp="SyncEngine";class _he{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Ehe{constructor(e){this.key=e,this.hu=!1}}class The{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Dl((o=>S7(o)),VS),this.Iu=new Map,this.Eu=new Set,this.Ru=new cn(ze.comparator),this.Au=new Map,this.Vu=new j2,this.du={},this.mu=new Map,this.fu=Ud.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ahe(t,e,n=!0){const r=WS(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await MG(r,e,n,!0),i}async function khe(t,e){const n=WS(t);await MG(n,e,!0,!1)}async function MG(t,e,n,r){const i=await Qw(t.localStore,da(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await Q2(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&KS(t.remoteStore,i),o}async function Q2(t,e,n,r,i){t.pu=(h,g,v)=>(async function(x,w,S,T){let I=w.view.ru(S);I.Ss&&(I=await zI(x.localStore,w.query,!1).then((({documents:N})=>w.view.ru(N,I))));const P=T&&T.targetChanges.get(w.targetId),O=T&&T.targetMismatches.get(w.targetId)!=null,D=w.view.applyChanges(I,x.isPrimaryClient,P,O);return $I(x,w.targetId,D.au),D.snapshot})(t,h,g,v);const a=await zI(t.localStore,e,!0),s=new She(e,a.ks),o=s.ru(a.documents),c=O0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,c);$I(t,n,u.au);const f=new _he(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function Che(t,e,n){const r=Ke(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((s=>!VS(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await yp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&bp(r.remoteStore,i.targetId),wp(r,i.targetId)})).catch(du)):(wp(r,i.targetId),await yp(r.localStore,i.targetId,!0))}async function Ihe(t,e){const n=Ke(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bp(n.remoteStore,r.targetId))}async function Nhe(t,e,n){const r=tO(t);try{const i=await(function(s,o){const c=Ke(s),u=gt.now(),f=o.reduce(((v,b)=>v.add(b.key)),yt());let h,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let b=ca(),x=yt();return c.xs.getEntries(v,f).next((w=>{b=w,b.forEach(((S,T)=>{T.isValidDocument()||(x=x.add(S))}))})).next((()=>c.localDocuments.getOverlayedDocuments(v,b))).next((w=>{h=w;const S=[];for(const T of o){const I=Qde(T,h.get(T.key).overlayedDocument);I!=null&&S.push(new Rl(T.key,I,f7(I.value.mapValue),yr.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,S,o)})).next((w=>{g=w;const S=w.applyToLocalDocumentSet(h,x);return c.documentOverlayCache.saveOverlays(v,w.batchId,S)}))})).then((()=>({batchId:g.batchId,changes:A7(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,o,c){let u=s.du[s.currentUser.toKey()];u||(u=new cn(ot)),u=u.insert(o,c),s.du[s.currentUser.toKey()]=u})(r,i.batchId,n),await pu(r,i.changes),await Yp(r.remoteStore)}catch(i){const a=H2(i,"Failed to persist write");n.reject(a)}}async function jG(t,e){const n=Ke(t);try{const r=await Kfe(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=n.Au.get(a);s&&(Xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Xe(s.hu,14607):i.removedDocuments.size>0&&(Xe(s.hu,42227),s.hu=!1))})),await pu(n,r,e)}catch(r){await du(r)}}function m5(t,e,n){const r=Ke(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(s,o){const c=Ke(s);c.onlineState=o;let u=!1;c.queries.forEach(((f,h)=>{for(const g of h.ba)g.va(o)&&(u=!0)})),u&&Y2(c)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Phe(t,e,n){const r=Ke(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let s=new cn(ze.comparator);s=s.insert(a,zn.newNoDocument(a,et.min()));const o=yt().add(a),c=new P0(et.min(),new Map,new cn(ot),s,o);await jG(r,c),r.Ru=r.Ru.remove(a),r.Au.delete(e),eO(r)}else await yp(r.localStore,e,!1).then((()=>wp(r,e,n))).catch(du)}async function Ohe(t,e){const n=Ke(t),r=e.batch.batchId;try{const i=await Hfe(n.localStore,e);J2(n,r,null),Z2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pu(n,i)}catch(i){await du(i)}}async function Dhe(t,e,n){const r=Ke(t);try{const i=await(function(s,o){const c=Ke(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return c.mutationQueue.lookupMutationBatch(u,o).next((h=>(Xe(h!==null,37113),f=h.keys(),c.mutationQueue.removeMutationBatch(u,h)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>c.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);J2(r,e,n),Z2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await pu(r,i)}catch(i){await du(i)}}function Z2(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function J2(t,e,n){const r=Ke(t);let i=r.du[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function wp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||zG(t,r)}))}function zG(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(bp(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),eO(t))}function $I(t,e,n){for(const r of n)r instanceof DG?(t.Vu.addReference(r.key,e),Rhe(t,r)):r instanceof RG?(Ne(Qp,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||zG(t,r.key)):Fe(19791,{wu:r})}function Rhe(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Ne(Qp,"New document in limbo: "+n),t.Eu.add(r),eO(t))}function eO(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ze(zt.fromString(e)),r=t.fu.next();t.Au.set(r,new Ehe(n)),t.Ru=t.Ru.insert(n,r),KS(t.remoteStore,new al(da(C0(n.path)),r,"TargetPurposeLimboResolution",Ri.ce))}}async function pu(t,e,n){const r=Ke(t),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,c)=>{s.push(r.pu(c,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=V2.Es(c.targetId,u);a.push(f)}})))})),await Promise.all(s),r.Pu.J_(i),await(async function(c,u){const f=Ke(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>fe.forEach(u,(g=>fe.forEach(g.Ts,(v=>f.persistence.referenceDelegate.addReference(h,g.targetId,v))).next((()=>fe.forEach(g.Is,(v=>f.persistence.referenceDelegate.removeReference(h,g.targetId,v)))))))))}catch(h){if(!fu(h))throw h;Ne(B2,"Failed to update sequence numbers: "+h)}for(const h of u){const g=h.targetId;if(!h.fromCache){const v=f.vs.get(g),b=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(b);f.vs=f.vs.insert(g,x)}}})(r.localStore,a))}async function Mhe(t,e){const n=Ke(t);if(!n.currentUser.isEqual(e)){Ne(Qp,"User change. New user:",e.toKey());const r=await mG(n.localStore,e);n.currentUser=e,(function(a,s){a.mu.forEach((o=>{o.forEach((c=>{c.reject(new Me(_e.CANCELLED,s))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pu(n,r.Ns)}}function jhe(t,e){const n=Ke(t),r=n.Au.get(e);if(r&&r.hu)return yt().add(r.key);{let i=yt();const a=n.Iu.get(e);if(!a)return i;for(const s of a){const o=n.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}async function zhe(t,e){const n=Ke(t),r=await zI(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&$I(n,e.targetId,i.au),i}async function Lhe(t,e){const n=Ke(t);return bG(n.localStore,e).then((r=>pu(n,r)))}async function Vhe(t,e,n,r){const i=Ke(t),a=await(function(o,c){const u=Ke(o),f=Ke(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(h=>f.Xn(h,c).next((g=>g?u.localDocuments.getDocuments(h,g):fe.resolve(null)))))})(i.localStore,e);a!==null?(n==="pending"?await Yp(i.remoteStore):n==="acknowledged"||n==="rejected"?(J2(i,e,r||null),Z2(i,e),(function(o,c){Ke(Ke(o).mutationQueue).nr(c)})(i.localStore,e)):Fe(6720,"Unknown batchState",{bu:n}),await pu(i,a)):Ne(Qp,"Cannot apply mutation batch with id: "+e)}async function Bhe(t,e){const n=Ke(t);if(WS(n),tO(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await v5(n,r.toArray());n.gu=!0,await BI(n.remoteStore,!0);for(const a of i)KS(n.remoteStore,a)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((a,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(wp(n,s),yp(n.localStore,s,!0)))),bp(n.remoteStore,s)})),await i,await v5(n,r),(function(s){const o=Ke(s);o.Au.forEach(((c,u)=>{bp(o.remoteStore,u)})),o.Vu.zr(),o.Au=new Map,o.Ru=new cn(ze.comparator)})(n),n.gu=!1,await BI(n.remoteStore,!1)}}async function v5(t,e,n){const r=Ke(t),i=[],a=[];for(const s of e){let o;const c=r.Iu.get(s);if(c&&c.length!==0){o=await Qw(r.localStore,da(c[0]));for(const u of c){const f=r.Tu.get(u),h=await zhe(r,f);h.snapshot&&a.push(h.snapshot)}}else{const u=await yG(r.localStore,s);o=await Qw(r.localStore,u),await Q2(r,LG(u),s,!1,o.resumeToken)}i.push(o)}return r.Pu.J_(a),i}function LG(t){return x7(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Fhe(t){return(function(n){return Ke(Ke(n).persistence).hs()})(Ke(t).localStore)}async function $he(t,e,n,r){const i=Ke(t);if(i.gu)return void Ne(Qp,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const s=await bG(i.localStore,_7(a[0])),o=P0.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Gn.EMPTY_BYTE_STRING);await pu(i,s,o);break}case"rejected":await yp(i.localStore,e,!0),wp(i,e,r);break;default:Fe(64155,n)}}async function Uhe(t,e,n){const r=WS(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ne(Qp,"Adding an already active target "+i);continue}const a=await yG(r.localStore,i),s=await Qw(r.localStore,a);await Q2(r,LG(a),s.targetId,!1,s.resumeToken),KS(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await yp(r.localStore,i,!1).then((()=>{bp(r.remoteStore,i),wp(r,i)})).catch(du)}}function WS(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jG.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jhe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Phe.bind(null,e),e.Pu.J_=xhe.bind(null,e.eventManager),e.Pu.yu=whe.bind(null,e.eventManager),e}function tO(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ohe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dhe.bind(null,e),e}class Fv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=GS(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return gG(this.persistence,new pG,e.initialUser,this.serializer)}Cu(e){return new z2(qS.Vi,this.serializer)}Du(e){return new EG}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fv.provider={build:()=>new Fv};class qhe extends Fv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Xe(this.persistence.referenceDelegate instanceof Xw,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lG(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ei.withCacheSize(this.cacheSizeBytes):ei.DEFAULT;return new z2((r=>Xw.Vi(r,n)),this.serializer)}}class VG extends Fv{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await tO(this.xu.syncEngine),await Yp(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return gG(this.persistence,new pG,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new lG(r,e.asyncQueue,n)}Mu(e,n){const r=new Que(n,this.persistence);return new Xue(e.asyncQueue,r)}Cu(e){const n=hG(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ei.withCacheSize(this.cacheSizeBytes):ei.DEFAULT;return new L2(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,TG(),lw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new EG}}class Ghe extends VG{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof RA&&(this.sharedClientState.syncEngine={So:Vhe.bind(null,n),Do:$he.bind(null,n),Co:Uhe.bind(null,n),hs:Fhe.bind(null,n),bo:Lhe.bind(null,n)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await Bhe(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=TG();if(!RA.v(n))throw new Me(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=hG(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new RA(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class $v{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>m5(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mhe.bind(null,this.syncEngine),await BI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bhe})()}createDatastore(e){const n=GS(e.databaseInfo.databaseId),r=ehe(e.databaseInfo);return ahe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,s,o){return new ohe(r,i,a,s,o)})(this.localStore,this.datastore,e.asyncQueue,(n=>m5(this.syncEngine,n,0)),(function(){return u5.v()?new u5:new Xfe})())}createSyncEngine(e,n){return(function(i,a,s,o,c,u,f){const h=new The(i,a,s,o,c,u);return f&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ke(n);Ne(qd,"RemoteStore shutting down."),r.Ea.add(5),await D0(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}$v.provider={build:()=>new $v};class nO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const tu="FirestoreClient";class Hhe{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=Jr.UNAUTHENTICATED,this.clientId=m2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async s=>{Ne(tu,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(Ne(tu,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=H2(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function jA(t,e){t.asyncQueue.verifyOperationInProgress(),Ne(tu,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await mG(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function y5(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Khe(t);Ne(tu,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>f5(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>f5(e.remoteStore,i))),t._onlineComponents=e}async function Khe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ne(tu,"Using user provided OfflineComponentProvider");try{await jA(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===_e.FAILED_PRECONDITION||i.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;ap("Error using user provided cache. Falling back to memory cache: "+n),await jA(t,new Fv)}}else Ne(tu,"Using default OfflineComponentProvider"),await jA(t,new qhe(void 0));return t._offlineComponents}async function BG(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ne(tu,"Using user provided OnlineComponentProvider"),await y5(t,t._uninitializedComponentsProvider._online)):(Ne(tu,"Using default OnlineComponentProvider"),await y5(t,new $v))),t._onlineComponents}function Whe(t){return BG(t).then((e=>e.syncEngine))}async function t1(t){const e=await BG(t),n=e.eventManager;return n.onListen=Ahe.bind(null,e.syncEngine),n.onUnlisten=Che.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=khe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Ihe.bind(null,e.syncEngine),n}function Yhe(t,e,n,r){const i=new nO(r),a=new X2(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>K2(await t1(t),a))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>W2(await t1(t),a)))}}function Xhe(t,e,n={}){const r=new go;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new nO({next:g=>{f.Nu(),s.enqueueAndForget((()=>W2(a,h)));const v=g.docs.has(o);!v&&g.fromCache?u.reject(new Me(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&c&&c.source==="server"?u.reject(new Me(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new X2(C0(o.path),f,{includeMetadataChanges:!0,Ka:!0});return K2(a,h)})(await t1(t),t.asyncQueue,e,n,r))),r.promise}function Qhe(t,e,n={}){const r=new go;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new nO({next:g=>{f.Nu(),s.enqueueAndForget((()=>W2(a,h))),g.fromCache&&c.source==="server"?u.reject(new Me(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new X2(o,f,{includeMetadataChanges:!0,Ka:!0});return K2(a,h)})(await t1(t),t.asyncQueue,e,n,r))),r.promise}function Zhe(t,e){const n=new go;return t.asyncQueue.enqueueAndForget((async()=>Nhe(await Whe(t),e,n))),n.promise}function FG(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Jhe="ComponentProvider",b5=new Map;function epe(t,e,n,r,i){return new Tde(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,FG(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const tpe="firestore.googleapis.com",x5=!0;class w5{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Me(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tpe,this.ssl=x5}else this.host=e.host,this.ssl=e.ssl??x5;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rG;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oG)throw new Me(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Kue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FG(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Me(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Me(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Me(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rO{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Me(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Me(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w5(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Lue;switch(r.type){case"firstParty":return new Fue(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Me(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=b5.get(n);r&&(Ne(Jhe,"Removing Datastore"),b5.delete(n),r.terminate())})(this),Promise.resolve()}}class Ml{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ml(this.firestore,e,this._query)}}class Ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}toJSON(){return{type:Ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(T0(n,Ln._jsonSchema))return new Ln(e,r||null,new ze(zt.fromString(n.referencePath)))}}Ln._jsonSchemaVersion="firestore/documentReference/1.0",Ln._jsonSchema={type:ar("string",Ln._jsonSchemaVersion),referencePath:ar("string")};class Kc extends Ml{constructor(e,n,r){super(e,n,C0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new ze(e))}withConverter(e){return new Kc(this.firestore,e,this._path)}}function Hr(t,e,...n){if(t=Lt(t),Vq("collection","path",e),t instanceof rO){const r=zt.fromString(e,...n);return dL(r),new Kc(t,null,r)}{if(!(t instanceof Ln||t instanceof Kc))throw new Me(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(zt.fromString(e,...n));return dL(r),new Kc(t.firestore,null,r)}}function Et(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=m2.newId()),Vq("doc","path",e),t instanceof rO){const r=zt.fromString(e,...n);return uL(r),new Ln(t,null,new ze(r))}{if(!(t instanceof Ln||t instanceof Kc))throw new Me(_e.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(zt.fromString(e,...n));return uL(r),new Ln(t.firestore,t instanceof Kc?t.converter:null,new ze(r))}}const S5="AsyncQueue";class _5{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new AG(this,"async_queue_retry"),this._c=()=>{const r=lw();r&&Ne(S5,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=lw();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=lw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new go;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!fu(e))throw e;Ne(S5,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,qn("INTERNAL UNHANDLED ERROR: ",E5(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=G2.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Fe(47125,{Pc:E5(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function E5(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class So extends rO{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new _5,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _5(e),this._firestoreClient=void 0,await e}}}function npe(t,e,n){n||(n=Fw);const r=$p(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(Qc(a,e))return i;throw new Me(_e.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Me(_e.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oG)throw new Me(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&cu(e.host)&&WP(e.host),r.initialize({options:e,instanceIdentifier:n})}function R0(t){if(t._terminated)throw new Me(_e.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rpe(t),t._firestoreClient}function rpe(t){const e=t._freezeSettings(),n=epe(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Hhe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class ja{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ja(Gn.fromBase64String(e))}catch(n){throw new Me(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ja(Gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ja._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(T0(e,ja._jsonSchema))return ja.fromBase64String(e.bytes)}}ja._jsonSchemaVersion="firestore/bytes/1.0",ja._jsonSchema={type:ar("string",ja._jsonSchemaVersion),bytes:ar("string")};class YS{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Me(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class XS{constructor(e){this._methodName=e}}class mo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Me(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Me(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mo._jsonSchemaVersion}}static fromJSON(e){if(T0(e,mo._jsonSchema))return new mo(e.latitude,e.longitude)}}mo._jsonSchemaVersion="firestore/geoPoint/1.0",mo._jsonSchema={type:ar("string",mo._jsonSchemaVersion),latitude:ar("number"),longitude:ar("number")};class bs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(T0(e,bs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new bs(e.vectorValues);throw new Me(_e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bs._jsonSchemaVersion="firestore/vectorValue/1.0",bs._jsonSchema={type:ar("string",bs._jsonSchemaVersion),vectorValues:ar("object")};const ipe=/^__.*__$/;class ape{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wp(e,this.data,n,this.fieldTransforms)}}class $G{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UG(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{dataSource:t})}}class QS{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new QS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return n1(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(UG(this.dataSource)&&ipe.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class spe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||GS(e)}createContext(e,n,r,i=!1){return new QS({dataSource:e,methodName:n,targetDoc:r,path:kn.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function M0(t){const e=t._freezeSettings(),n=GS(t._databaseId);return new spe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iO(t,e,n,r,i,a={}){const s=t.createContext(a.merge||a.mergeFields?2:0,e,n,i);sO("Data must be an object, but it was:",s,r);const o=HG(r,s);let c,u;if(a.merge)c=new Mi(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const h of a.mergeFields){const g=Gd(e,h,n);if(!s.contains(g))throw new Me(_e.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);YG(f,g)||f.push(g)}c=new Mi(f),u=s.fieldTransforms.filter((h=>c.covers(h.field)))}else c=null,u=s.fieldTransforms;return new ape(new ni(o),c,u)}class j0 extends XS{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof j0}}function ope(t,e,n){return new QS({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class aO extends XS{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=ope(this,e,!0),r=this.Ac.map((a=>Zp(a,n))),i=new Bd(r);return new D7(e.path,i)}isEqual(e){return e instanceof aO&&Qc(this.Ac,e.Ac)}}function qG(t,e,n,r){const i=t.createContext(1,e,n);sO("Data must be an object, but it was:",i,r);const a=[],s=ni.empty();hu(r,((c,u)=>{const f=WG(e,c,n);u=Lt(u);const h=i.childContextForFieldPath(f);if(u instanceof j0)a.push(f);else{const g=Zp(u,h);g!=null&&(a.push(f),s.set(f,g))}}));const o=new Mi(a);return new $G(s,o,i.fieldTransforms)}function GG(t,e,n,r,i,a){const s=t.createContext(1,e,n),o=[Gd(e,r,n)],c=[i];if(a.length%2!=0)throw new Me(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(Gd(e,a[g])),c.push(a[g+1]);const u=[],f=ni.empty();for(let g=o.length-1;g>=0;--g)if(!YG(u,o[g])){const v=o[g];let b=c[g];b=Lt(b);const x=s.childContextForFieldPath(v);if(b instanceof j0)u.push(v);else{const w=Zp(b,x);w!=null&&(u.push(v),f.set(v,w))}}const h=new Mi(u);return new $G(f,h,s.fieldTransforms)}function lpe(t,e,n,r=!1){return Zp(n,t.createContext(r?4:3,e))}function Zp(t,e){if(KG(t=Lt(t)))return sO("Unsupported field value:",e,t),HG(t,e);if(t instanceof XS)return(function(r,i){if(!UG(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const a=[];let s=0;for(const o of r){let c=Zp(o,i.childContextForArray(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gde(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=gt.fromDate(r);return{timestampValue:vp(i.serializer,a)}}if(r instanceof gt){const a=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vp(i.serializer,a)}}if(r instanceof mo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ja)return{bytesValue:B7(i.serializer,r._byteString)};if(r instanceof Ln){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:D2(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bs)return(function(s,o){const c=s instanceof bs?s.toArray():s;return{mapValue:{fields:{[E2]:{stringValue:T2},[fp]:{arrayValue:{values:c.map((f=>{if(typeof f!="number")throw o.createError("VectorValues must only contain numeric values.");return C2(o.serializer,f)}))}}}}}})(r,i);if(Q7(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${PS(r)}`)})(t,e)}function HG(t,e){const n={};return r7(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hu(t,((r,i)=>{const a=Zp(i,e.childContextForField(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function KG(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof mo||t instanceof ja||t instanceof Ln||t instanceof XS||t instanceof bs||Q7(t))}function sO(t,e,n){if(!KG(n)||!Bq(n)){const r=PS(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Gd(t,e,n){if((e=Lt(e))instanceof YS)return e._internalPath;if(typeof e=="string")return WG(t,e);throw n1("Field path arguments must be of type string or ",t,!1,void 0,n)}const cpe=new RegExp("[~\\*/\\[\\]]");function WG(t,e,n){if(e.search(cpe)>=0)throw n1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new YS(...e.split("."))._internalPath}catch{throw n1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function n1(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Me(_e.INVALID_ARGUMENT,o+t+c)}function YG(t,e){return t.some((n=>n.isEqual(e)))}class upe{convertValue(e,n="none"){switch(Zc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return hu(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[fp].arrayValue?.values?.map((r=>xn(r.doubleValue)));return new bs(n)}convertGeoPoint(e){return new mo(xn(e.latitude),xn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Rv(e));default:return null}}convertTimestamp(e){const n=xl(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=zt.fromString(e);Xe(X7(r),9688,{name:e});const i=new Ld(r.get(1),r.get(3)),a=new ze(r.popFirst(5));return i.isEqual(n)||qn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}class oO extends upe{constructor(e){super(),this.firestore=e}convertBytes(e){return new ja(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,n)}}function T5(){return new j0("deleteField")}function dpe(...t){return new aO("arrayUnion",t)}const A5="@firebase/firestore",k5="4.11.0";function C5(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class XG{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fpe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Gd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fpe extends XG{data(){return super.data()}}function QG(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Me(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lO{}class cO extends lO{}function ji(t,e,...n){let r=[];e instanceof lO&&r.push(e),r=r.concat(n),(function(a){const s=a.filter((c=>c instanceof uO)).length,o=a.filter((c=>c instanceof ZS)).length;if(s>1||s>0&&o>0)throw new Me(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class ZS extends cO{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ZS(e,n,r)}_apply(e){const n=this._parse(e);return ZG(e._query,n),new Ml(e.firestore,e.converter,II(e._query,n))}_parse(e){const n=M0(e.firestore);return(function(a,s,o,c,u,f,h){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Me(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){P5(h,f);const b=[];for(const x of h)b.push(N5(c,a,x));g={arrayValue:{values:b}}}else g=N5(c,a,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||P5(h,f),g=lpe(o,s,h,f==="in"||f==="not-in");return Ct.create(u,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cw(t,e,n){const r=e,i=Gd("where",t);return ZS._create(i,r,n)}class uO extends lO{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new uO(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ht.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)ZG(s,c),s=II(s,c)})(e._query,n),new Ml(e.firestore,e.converter,II(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dO extends cO{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dO(e,n)}_apply(e){const n=(function(i,a,s){if(i.startAt!==null)throw new Me(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Me(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lv(a,s)})(e._query,this._field,this._direction);return new Ml(e.firestore,e.converter,Vde(e._query,n))}}function xs(t,e="asc"){const n=e,r=Gd("orderBy",t);return dO._create(r,n)}class fO extends cO{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new fO(e,n,r)}_apply(e){return new Ml(e.firestore,e.converter,qw(e._query,this._limit,this._limitType))}}function I5(t){return fO._create("limit",t,"F")}function N5(t,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new Me(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w7(e)&&n.indexOf("/")!==-1)throw new Me(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(zt.fromString(n));if(!ze.isDocumentKey(r))throw new Me(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jv(t,new ze(r))}if(n instanceof Ln)return jv(t,n._key);throw new Me(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${PS(n)}.`)}function P5(t,e){if(!Array.isArray(t)||t.length===0)throw new Me(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZG(t,e){const n=(function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Me(_e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Me(_e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function hO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class hpe{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=vpe(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function ppe(t){return new hpe(t)}class gpe{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=$v.provider,this._offlineComponentProvider={build:n=>new VG(n,e?.cacheSizeBytes,this.forceOwnership)}}}class mpe{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=$v.provider,this._offlineComponentProvider={build:n=>new Ghe(n,e?.cacheSizeBytes)}}}function vpe(t){return new gpe(t?.forceOwnership)}function ype(){return new mpe}class Gm{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Id extends XG{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(_e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Id._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Id._jsonSchemaVersion="firestore/documentSnapshot/1.0",Id._jsonSchema={type:ar("string",Id._jsonSchemaVersion),bundleSource:ar("string","DocumentSnapshot"),bundleName:ar("string"),bundle:ar("string")};class uw extends Id{data(e={}){return super.data(e)}}class Nd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Gm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new uw(this._firestore,this._userDataWriter,r.key,r,new Gm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Me(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((o=>{const c=new uw(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Gm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>a||o.type!==3)).map((o=>{const c=new uw(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Gm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:bpe(o.type),doc:c,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(_e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Nd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=m2.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bpe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:t})}}Nd._jsonSchemaVersion="firestore/querySnapshot/1.0",Nd._jsonSchema={type:ar("string",Nd._jsonSchemaVersion),bundleSource:ar("string","QuerySnapshot"),bundleName:ar("string"),bundle:ar("string")};class xpe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=M0(e)}set(e,n,r){this._verifyNotCommitted();const i=zA(e,this._firestore),a=hO(i.converter,n,r),s=iO(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,yr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=zA(e,this._firestore);let s;return s=typeof(n=Lt(n))=="string"||n instanceof YS?GG(this._dataReader,"WriteBatch.update",a._key,n,r,i):qG(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=zA(e,this._firestore);return this._mutations=this._mutations.concat(new N0(n._key,yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zA(t,e){if((t=Lt(t)).firestore!==e)throw new Me(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function LA(t){t=Fi(t,Ln);const e=Fi(t.firestore,So),n=R0(e);return Xhe(n,t._key).then((r=>JG(e,t,r)))}function ra(t){t=Fi(t,Ml);const e=Fi(t.firestore,So),n=R0(e),r=new oO(e);return QG(t._query),Qhe(n,t._query).then((i=>new Nd(e,r,t,i)))}function aa(t,e,n){t=Fi(t,Ln);const r=Fi(t.firestore,So),i=hO(t.converter,e,n),a=M0(r);return z0(r,[iO(a,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,yr.none())])}function ao(t,e,n,...r){t=Fi(t,Ln);const i=Fi(t.firestore,So),a=M0(i);let s;return s=typeof(e=Lt(e))=="string"||e instanceof YS?GG(a,"updateDoc",t._key,e,n,r):qG(a,"updateDoc",t._key,e),z0(i,[s.toMutation(t._key,yr.exists(!0))])}function sa(t){return z0(Fi(t.firestore,So),[new N0(t._key,yr.none())])}function JS(t,e){const n=Fi(t.firestore,So),r=Et(t),i=hO(t.converter,e),a=M0(t.firestore);return z0(n,[iO(a,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,yr.exists(!1))]).then((()=>r))}function nu(t,...e){t=Lt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||C5(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(C5(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,s,o;if(t instanceof Ln)s=Fi(t.firestore,So),o=C0(t._key.path),a={next:u=>{e[r]&&e[r](JG(s,t,u))},error:e[r+1],complete:e[r+2]};else{const u=Fi(t,Ml);s=Fi(u.firestore,So),o=u._query;const f=new oO(s);a={next:h=>{e[r]&&e[r](new Nd(s,f,u,h))},error:e[r+1],complete:e[r+2]},QG(t._query)}const c=R0(s);return Yhe(c,o,i,a)}function z0(t,e){const n=R0(t);return Zhe(n,e)}function JG(t,e,n){const r=n.docs.get(e._key),i=new oO(t);return new Id(t,i,e._key,r,new Gm(n.hasPendingWrites,n.fromCache),e.converter)}function UI(t){return t=Fi(t,So),R0(t),new xpe(t,(e=>z0(t,e)))}(function(e,n=!0){jue(Up),vl(new xo("firestore",((r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new So(new Vue(r.getProvider("auth-internal")),new $ue(s,r.getProvider("app-check-internal")),Ade(s,i),s);return a={useFetchStreams:n,...a},o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),ys(A5,k5,e),ys(A5,k5,"esm2020")})();const qI=new Map,eH={activated:!1,tokenObservers:[]},wpe={initialized:!1,enabled:!1};function br(t){return qI.get(t)||{...eH}}function Spe(t,e){return qI.set(t,e),qI.get(t)}function e_(){return wpe}const tH="https://content-firebaseappcheck.googleapis.com/v1",_pe="exchangeRecaptchaEnterpriseToken",Epe="exchangeDebugToken",O5={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Tpe=1440*60*1e3;class Ape{constructor(e,n,r,i,a){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Sv,this.pending.promise.catch(n=>{}),await kpe(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Sv,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function kpe(t){return new Promise(e=>{setTimeout(e,t)})}const Cpe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},zi=new Fp("appCheck","AppCheck",Cpe);function D5(t=!1){return t?self.grecaptcha?.enterprise:self.grecaptcha}function pO(t){if(!br(t).activated)throw zi.create("use-before-activation",{appName:t.name})}function nH(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),a=e-n*3600*24-r*3600-i*60;let s="";return n&&(s+=nx(n)+"d:"),r&&(s+=nx(r)+"h:"),s+=nx(i)+"m:"+nx(a)+"s",s}function nx(t){return t===0?"00":t>=10?t.toString():"0"+t}async function gO({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const a={method:"POST",body:JSON.stringify(e),headers:r};let s;try{s=await fetch(t,a)}catch(h){throw zi.create("fetch-network-error",{originalErrorMessage:h?.message})}if(s.status!==200)throw zi.create("fetch-status-error",{httpStatus:s.status});let o;try{o=await s.json()}catch(h){throw zi.create("fetch-parse-error",{originalErrorMessage:h?.message})}const c=o.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw zi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${o.ttl}`});const u=Number(c[1])*1e3,f=Date.now();return{token:o.token,expireTimeMillis:f+u,issuedAtTimeMillis:f}}function Ipe(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${tH}/projects/${n}/apps/${r}:${_pe}?key=${i}`,body:{recaptcha_enterprise_token:e}}}function rH(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${tH}/projects/${n}/apps/${r}:${Epe}?key=${i}`,body:{debug_token:e}}}const Npe="firebase-app-check-database",Ppe=1,Uv="firebase-app-check-store",iH="debug-token";let rx=null;function aH(){return rx||(rx=new Promise((t,e)=>{try{const n=indexedDB.open(Npe,Ppe);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{e(zi.create("storage-open",{originalErrorMessage:r.target.error?.message}))},n.onupgradeneeded=r=>{const i=r.target.result;r.oldVersion===0&&i.createObjectStore(Uv,{keyPath:"compositeKey"})}}catch(n){e(zi.create("storage-open",{originalErrorMessage:n?.message}))}}),rx)}function Ope(t){return oH(lH(t))}function Dpe(t,e){return sH(lH(t),e)}function Rpe(t){return sH(iH,t)}function Mpe(){return oH(iH)}async function sH(t,e){const r=(await aH()).transaction(Uv,"readwrite"),a=r.objectStore(Uv).put({compositeKey:t,value:e});return new Promise((s,o)=>{a.onsuccess=c=>{s()},r.onerror=c=>{o(zi.create("storage-set",{originalErrorMessage:c.target.error?.message}))}})}async function oH(t){const n=(await aH()).transaction(Uv,"readonly"),i=n.objectStore(Uv).get(t);return new Promise((a,s)=>{i.onsuccess=o=>{const c=o.target.result;a(c?c.value:void 0)},n.onerror=o=>{s(zi.create("storage-get",{originalErrorMessage:o.target.error?.message}))}})}function lH(t){return`${t.options.appId}-${t.name}`}const zc=new TS("@firebase/app-check");async function jpe(t){if(ES()){let e;try{e=await Ope(t)}catch(n){zc.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function VA(t,e){return ES()?Dpe(t,e).catch(n=>{zc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function zpe(){let t;try{t=await Mpe()}catch{}if(t)return t;{const e=crypto.randomUUID();return Rpe(e).catch(n=>zc.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}function mO(){return e_().enabled}async function vO(){const t=e_();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Lpe(){const t=KP(),e=e_();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new Sv;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(zpe())}const Vpe={error:"UNKNOWN_ERROR"};function Bpe(t){return HP.encodeString(JSON.stringify(t),!1)}async function GI(t,e=!1,n=!1){const r=t.app;pO(r);const i=br(r);let a=i.token,s;if(a&&!Nh(a)&&(i.token=void 0,a=void 0),!a){const u=await i.cachedTokenPromise;u&&(Nh(u)?a=u:await VA(r,void 0))}if(!e&&a&&Nh(a))return{token:a.token};let o=!1;if(mO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=gO(rH(r,await vO()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const u=await i.exchangeTokenPromise;return await VA(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?zc.warn(u.message):n&&zc.error(u),BA(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),a=await br(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?zc.warn(u.message):n&&zc.error(u),s=u}let c;return a?s?Nh(a)?c={token:a.token,internalError:s}:c=BA(s):(c={token:a.token},i.token=a,await VA(r,a)):c=BA(s),o&&dH(r,c),c}async function Fpe(t){const e=t.app;pO(e);const{provider:n}=br(e);if(mO()){const r=await vO(),{token:i}=await gO(rH(e,r),t.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function cH(t,e,n,r){const{app:i}=t,a=br(i),s={next:n,error:r,type:e};if(a.tokenObservers=[...a.tokenObservers,s],a.token&&Nh(a.token)){const o=a.token;Promise.resolve().then(()=>{n({token:o.token}),R5(t)}).catch(()=>{})}a.cachedTokenPromise.then(()=>R5(t))}function uH(t,e){const n=br(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function R5(t){const{app:e}=t,n=br(e);let r=n.tokenRefresher;r||(r=$pe(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function $pe(t){const{app:e}=t;return new Ape(async()=>{const n=br(e);let r;if(n.token?r=await GI(t,!0):r=await GI(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=br(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},O5.RETRIAL_MIN_WAIT,O5.RETRIAL_MAX_WAIT)}function dH(t,e){const n=br(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Nh(t){return t.expireTimeMillis-Date.now()>0}function BA(t){return{token:Bpe(Vpe),error:t}}class Upe{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=br(this.app);for(const n of e)uH(this.app,n.next);return Promise.resolve()}}function qpe(t,e){return new Upe(t,e)}function Gpe(t){return{getToken:e=>GI(t,e),getLimitedUseToken:()=>Fpe(t),addTokenListener:e=>cH(t,"INTERNAL",e),removeTokenListener:e=>uH(t.app,e)}}const Hpe="@firebase/app-check",Kpe="0.11.0",Wpe="https://www.google.com/recaptcha/enterprise.js";function Ype(t,e){const n=new Sv,r=br(t);r.reCAPTCHAState={initialized:n};const i=Xpe(t),a=D5(!0);return a?M5(t,e,a,i,n):Jpe(()=>{const s=D5(!0);if(!s)throw new Error("no recaptcha");M5(t,e,s,i,n)}),n.promise}function M5(t,e,n,r,i){n.ready(()=>{Zpe(t,e,n,r),i.resolve(n)})}function Xpe(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function Qpe(t){pO(t);const n=await br(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const a=br(t).reCAPTCHAState;n.ready(()=>{r(n.execute(a.widgetId,{action:"fire_app_check"}))})})}function Zpe(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible",callback:()=>{br(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{br(t).reCAPTCHAState.succeeded=!1}}),a=br(t);a.reCAPTCHAState={...a.reCAPTCHAState,widgetId:i}}function Jpe(t){const e=document.createElement("script");e.src=Wpe,e.onload=t,document.head.appendChild(e)}class yO{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){tge(this._throttleData);const e=await Qpe(this._app).catch(r=>{throw zi.create("recaptcha-error")});if(!br(this._app).reCAPTCHAState?.succeeded)throw zi.create("recaptcha-error");let n;try{n=await gO(Ipe(this._app,e),this._heartbeatServiceProvider)}catch(r){throw r.code?.includes("fetch-status-error")?(this._throttleData=ege(Number(r.customData?.httpStatus),this._throttleData),zi.create("initial-throttle",{time:nH(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):r}return this._throttleData=null,n}initialize(e){this._app=e,this._heartbeatServiceProvider=$p(e,"heartbeat"),Ype(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof yO?this._siteKey===e._siteKey:!1}}function ege(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+Tpe,httpStatus:t};{const n=e?e.backoffCount:0,r=Pre(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function tge(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw zi.create("throttled",{time:nH(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}function nge(t=XP(),e){t=Lt(t);const n=$p(t,"app-check");if(e_().initialized||Lpe(),mO()&&vO().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(a.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&a.provider.isEqual(e.provider))return i;throw zi.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return rge(t,e.provider,e.isTokenAutoRefreshEnabled),br(t).isTokenAutoRefreshEnabled&&cH(r,"INTERNAL",()=>{}),r}function rge(t,e,n=!1){const r=Spe(t,{...eH});r.activated=!0,r.provider=e,r.cachedTokenPromise=jpe(t).then(i=>(i&&Nh(i)&&(r.token=i,dH(t,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n&&t.automaticDataCollectionEnabled,!t.automaticDataCollectionEnabled&&n&&zc.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),r.provider.initialize(t)}const ige="app-check",j5="app-check-internal";function age(){vl(new xo(ige,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return qpe(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(j5).initialize()})),vl(new xo(j5,t=>{const e=t.getProvider("app-check").getImmediate();return Gpe(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ys(Hpe,Kpe)}age();const sge={apiKey:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:0ae73943f9058a4342aba9",measurementId:"G-VMP5DF6273"},bO=g8(sge);nge(bO,{provider:new yO("6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"),isTokenAutoRefreshEnabled:!0});const fi=J8(bO),rt=npe(bO,{localCache:ppe({tabManager:ype()})}),Di={DEBUG:0,INFO:1,WARN:2,ERROR:3};class oge{logs=[];maxLogs=1e3;sessionId;subscribers=new Set;constructor(){this.sessionId=this.generateSessionId(),this.info("Logger","Session started",{sessionId:this.sessionId})}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}createEntry(e,n,r,i){return{id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),level:e,message:r,source:n,data:i,userId:this.getUserId(),sessionId:this.sessionId}}getUserId(){try{const e=localStorage.getItem("auth-storage");if(e)return JSON.parse(e).state?.user?.uid}catch{}}addLog(e){this.logs.push(e),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.notifySubscribers();const r=["DEBUG","INFO","WARN","ERROR"][e.level],i=e.level===Di.ERROR?"error":e.level===Di.WARN?"warn":"log";console[i](`[${r}] ${e.source}: ${e.message}`,e.data||"")}notifySubscribers(){const e=[...this.logs];this.subscribers.forEach(n=>n(e))}debug(e,n,r){this.addLog(this.createEntry(Di.DEBUG,e,n,r))}info(e,n,r){this.addLog(this.createEntry(Di.INFO,e,n,r))}warn(e,n,r){this.addLog(this.createEntry(Di.WARN,e,n,r))}error(e,n,r){this.addLog(this.createEntry(Di.ERROR,e,n,r))}getLogs(e){let n=[...this.logs];if(e?.level!==void 0&&(n=n.filter(r=>r.level>=e.level)),e?.source&&(n=n.filter(r=>r.source.toLowerCase().includes(e.source.toLowerCase()))),e?.search){const r=e.search.toLowerCase();n=n.filter(i=>i.message.toLowerCase().includes(r)||i.data&&JSON.stringify(i.data).toLowerCase().includes(r))}return e?.startTime&&(n=n.filter(r=>r.timestamp>=e.startTime)),e?.endTime&&(n=n.filter(r=>r.timestamp<=e.endTime)),n.reverse()}subscribe(e){return this.subscribers.add(e),e([...this.logs]),()=>{this.subscribers.delete(e)}}exportLogs(e){const n=this.getLogs(e),r={exportedAt:new Date().toISOString(),sessionId:this.sessionId,totalLogs:n.length,logs:n.map(i=>({...i,timestamp:new Date(i.timestamp).toISOString(),level:["DEBUG","INFO","WARN","ERROR"][i.level]}))};return JSON.stringify(r,null,2)}downloadLogs(e){const n=this.exportLogs(e),r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`budget-app-logs-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}clearLogs(){this.logs=[],this.notifySubscribers(),this.info("Logger","Logs cleared")}getStats(){const e={},n={},r=["DEBUG","INFO","WARN","ERROR"];this.logs.forEach(a=>{const s=r[a.level];e[s]=(e[s]||0)+1,n[a.source]=(n[a.source]||0)+1});const i=this.logs.length>0?Date.now()-this.logs[0].timestamp:0;return{total:this.logs.length,byLevel:e,bySource:n,sessionDuration:i}}}const yn=new oge;function FA(t){if(typeof t=="string"){const e=t.match(/^[^\w]*\s*([A-Za-z]+):\s*(.*)/);return e?{source:e[1],message:e[2]}:{source:"App",message:t}}return{source:"App",message:String(t)}}const U={log:(...t)=>{const{source:e,message:n}=FA(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;yn.info(e,n,r)},warn:(...t)=>{const{source:e,message:n}=FA(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;yn.warn(e,n,r)},error:(...t)=>{const{source:e,message:n}=FA(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;yn.error(e,n,r)}},z5=()=>({url:window.location.origin+"/personal-budget-pwa/",handleCodeInApp:!1}),ix=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),tn=p2()(Nq(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await Hae(fi,e,n)).user;if(U.log(` Checking email verification for: ${i.email}`),U.log(" emailVerified status:",i.emailVerified),U.log(" Firebase user object:",{uid:i.uid,email:i.email,emailVerified:i.emailVerified,metadata:i.metadata}),!i.emailVerified)return U.log(` BLOCKING LOGIN: Email not verified for ${i.email}`),await j3(fi),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),U.log(` Login blocked: ${i.email} not verified`),!1;U.log(` EMAIL VERIFIED: Allowing login for ${i.email}`);const a=ix(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),U.log(` User logged in: ${a.email}`),!0}catch(r){U.error("Login error:",r),U.error("Error code:",r.code),U.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:U.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else U.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await Gae(fi,e,n)).user;await Wae(a,{displayName:r}),await M3(a,z5());const s=ix(a);return t({currentUser:s,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),U.log(` User registered: ${s.email}, verification email sent`),!0}catch(i){U.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await j3(fi),U.log(" User logged out")}catch(e){U.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await $ae(fi,e),t({isLoading:!1}),!0}catch(n){U.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=fi.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await M3(e,z5()),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),U.log(` Verification email sent to: ${e.email}`),!0}catch(n){U.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";return n.code==="auth/too-many-requests"&&(r="Too many verification emails sent. Please wait before trying again."),t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=tn.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},checkVerificationStatus:async()=>{const e=fi.currentUser;if(!e)return!1;try{await e.reload();const n=fi.currentUser;if(n?.emailVerified){const r=ix(n);return t({currentUser:r,isAuthenticated:!0,lastAuthTime:Date.now()}),U.log(` Email verified for: ${n.email}`),!0}return!1}catch(n){return U.error("Error checking verification status:",n),!1}},deleteAccount:async e=>{const n=fi.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=of.credential(n.email,e);return await Bae(n,r),await Zae(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),U.log(` Account permanently deleted: ${n.email}`),!0}catch(r){U.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},confirmPasswordReset:async(e,n)=>{t({isLoading:!0,loginError:null});try{return await Uae(fi,e,n),t({isLoading:!1}),U.log(" Password reset successful"),!0}catch(r){U.error("Password reset confirmation error:",r);let i="Failed to reset password. The link may be expired or invalid.";switch(r.code){case"auth/expired-action-code":i="The password reset link has expired. Please request a new one.";break;case"auth/invalid-action-code":i="The password reset link is invalid. Please request a new one.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>tn.getState().isInitialized?()=>{}:(t({isInitialized:!1}),Qae(fi,async r=>{const i=Date.now(),a=tn.getState(),s=r?ix(r):null,o=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,u=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&o&&!s,f=r?r.emailVerified:!0,h=r&&f||!!u,g=r?s:u?a.currentUser:null;if(t({currentUser:g,isAuthenticated:h,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&f?i:a.lastAuthTime}),g)if(U.log(` Auth state: User is signed in (${g.email})`,u?"(offline grace period)":f?"(verified)":"(unverified)"),U.log(" Onboarding check:",{isVerified:f,shouldGrantOfflineAccess:u,willCheckOnboarding:f&&!u}),f&&!u){U.log(" Loading budgetStore to check onboarding...");const v=await Jh(()=>Promise.resolve().then(()=>iX),[]).then(b=>b.useBudgetStore.getState());U.log(" Calling budgetStore.checkAndStartOnboarding()..."),await v.checkAndStartOnboarding()}else U.log(" Skipping onboarding check (not verified or offline grace period)");else U.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),fH=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],lge=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=fH.map(o=>({...o,met:o.regex.test(t)})).filter(o=>o.met).length;let i,a,s;return r<=1?(i="weak",a="text-red-500",s="Weak"):r<=3?(i="medium",a="text-yellow-500",s="Medium"):r===4?(i="strong",a="text-blue-500",s="Strong"):(i="very-strong",a="text-green-500",s="Very Strong"),{score:r,level:i,color:a,label:s}},t_=t=>{const e=fH.map(i=>({...i,met:i.regex.test(t)})),n=lge(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},hH=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=t_(t);return r?null:m.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[m.jsx("div",{className:"flex-1",children:m.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>m.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),m.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},pH=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=t_(t);return r?null:m.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>m.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?m.jsx(f2,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):m.jsx(Gp,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},cge=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[i,a]=A.useState(""),[s,o]=A.useState(!1),[c,u]=A.useState(!1),[f,h]=A.useState(!1),[g,v]=A.useState(!1),{login:b,register:x,sendPasswordReset:w,isLoading:S,loginError:T,clearError:I}=tn(),P=t_(n),O=async N=>{if(N.preventDefault(),I(),t.trim()&&n.trim())if(c){if(!i.trim()||!P.isValid)return;await x(t.trim(),n,i.trim())}else await b(t.trim(),n)},D=async N=>{N.preventDefault(),t.trim()&&await w(t.trim())&&v(!0)};return A.useEffect(()=>{e(""),r(""),a(""),v(!1)},[c,f]),m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:f?m.jsxs("form",{onSubmit:D,className:"space-y-6",children:[m.jsxs("div",{className:"text-center mb-2",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(gI,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"reset-email",type:"email",value:t,onChange:N=>e(N.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"email"})]})]}),g?m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:m.jsx(gI,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),m.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),m.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",m.jsx("span",{className:"font-medium",children:t})]}),m.jsxs("button",{type:"button",onClick:()=>h(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[m.jsx($a,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"submit",disabled:S||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?"Sending...":"Send Reset Link"}),m.jsx("div",{className:"mt-4 text-center",children:m.jsxs("button",{type:"button",onClick:()=>h(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:[m.jsx($a,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):m.jsxs("form",{onSubmit:O,className:"space-y-6",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c?"Create Account":"Sign In"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:c?"Create a new account to get started":"Sign in to your account"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),m.jsx("input",{id:"email",type:"email",value:t,onChange:N=>e(N.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"username"})]}),c&&m.jsxs("div",{children:[m.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),m.jsx("input",{id:"displayName",type:"text",value:i,onChange:N=>a(N.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:S})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!c&&m.jsx("button",{type:"button",onClick:()=>h(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:"Forgot password?"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"password",type:s?"text":"password",value:n,onChange:N=>r(N.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${c&&n&&!P.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:S,autoComplete:c?"new-password":"current-password"}),m.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:S,children:s?m.jsx(Eq,{className:"h-5 w-5"}):m.jsx(Tq,{className:"h-5 w-5"})})]}),c&&n&&m.jsx("div",{className:"mt-2",children:m.jsx(hH,{password:n})}),c&&n&&m.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:m.jsx(pH,{password:n})})]}),T&&m.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[T,T.includes("verify your email")&&m.jsx("div",{className:"mt-3",children:m.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),m.jsx("button",{type:"submit",disabled:S||!t.trim()||!n.trim()||c&&!i.trim()||c&&!P.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?c?"Creating Account...":"Signing in...":c?"Create Account":"Sign In"}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("button",{type:"button",onClick:()=>{u(!c),h(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:S,children:[m.jsx(bue,{className:"h-4 w-4"}),c?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},uge=({oobCode:t,onSuccess:e,onCancel:n})=>{const[r,i]=A.useState(""),[a,s]=A.useState(""),[o,c]=A.useState(!1),[u,f]=A.useState(!1),{confirmPasswordReset:h,isLoading:g,loginError:v,clearError:b}=tn(),x=t_(r);A.useEffect(()=>{b()},[b]);const w=async S=>{if(S.preventDefault(),r!==a||!x.isValid)return;await h(t,r)&&f(!0)};return u?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-6",children:m.jsx(jw,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Password Reset Complete"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Your password has been successfully updated. You can now log in with your new password."}),m.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200",children:"Go to Login"})]})}):m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"Reset Password"})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create a new password for your account"})]})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:m.jsxs("form",{onSubmit:w,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(tL,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"new-password",type:o?"text":"password",value:r,onChange:S=>i(S.target.value),className:"w-full pl-10 pr-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Enter new password",required:!0}),m.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",onClick:()=>c(!o),children:o?m.jsx(Eq,{className:"h-5 w-5"}):m.jsx(Tq,{className:"h-5 w-5"})})]}),m.jsx("div",{className:"mt-2",children:m.jsx(hH,{password:r})})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(tL,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"confirm-password",type:o?"text":"password",value:a,onChange:S=>s(S.target.value),className:`w-full pl-10 px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors ${a&&r!==a?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Confirm new password",required:!0})]}),a&&r!==a&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Passwords do not match"})]}),m.jsx(pH,{password:r}),v&&m.jsx("div",{className:"p-3 rounded-md bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm",children:v}),m.jsx("button",{type:"submit",disabled:g||!r||!a||r!==a||!x.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:g?"Updating Password...":"Reset Password"}),m.jsx("div",{className:"text-center",children:m.jsxs("button",{type:"button",onClick:n,className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium inline-flex items-center",children:[m.jsx($a,{className:"h-4 w-4 mr-1"}),"Back to Login"]})})]})})]})})},gH=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(!1),{currentUser:i,resendEmailVerification:a,checkVerificationStatus:s,logout:o,loginError:c}=tn();A.useEffect(()=>{i||U.warn("EmailVerificationView: No current user, this should not happen")},[i]),A.useEffect(()=>{const h=()=>{U.log("Window focused, checking verification status..."),s()};return window.addEventListener("focus",h),()=>window.removeEventListener("focus",h)},[s]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},f=async()=>{await o()};return i?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:m.jsx(gI,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(jw,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),m.jsxs("div",{className:"text-left",children:[m.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),m.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[m.jsx("li",{children:"1. Open your email inbox"}),m.jsx("li",{children:"2. Find the email from House Budget"}),m.jsx("li",{children:'3. Click the "Verify Email" link'}),m.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&m.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&m.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),m.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?m.jsxs(m.Fragment,{children:[m.jsx(rp,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):m.jsxs(m.Fragment,{children:[m.jsx(rp,{className:"h-4 w-4"}),"Resend verification email"]})}),m.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[m.jsx($a,{className:"h-4 w-4"}),"Back to sign in"]})]})}),m.jsx("div",{className:"text-center",children:m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},mH=({message:t="Loading your budget...",showTimeout:e=!1})=>m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[m.jsx("div",{className:"mb-8",children:m.jsxs("div",{className:"relative",children:[m.jsx(rp,{size:48,className:"text-blue-500 animate-spin"}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx(ip,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),m.jsxs("div",{className:"text-center space-y-3",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),m.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),m.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),m.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),m.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&m.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:m.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),m.jsx("div",{className:"mt-8 w-full max-w-md",children:m.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),xO=A.createContext({});function n_(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const vH=typeof window<"u",wO=vH?A.useLayoutEffect:A.useEffect,r_=A.createContext(null);function SO(t,e){t.indexOf(e)===-1&&t.push(e)}function r1(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const _o=(t,e,n)=>n>e?e:n<t?t:n;let _O=()=>{};const Sl={},yH=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function bH(t){return typeof t=="object"&&t!==null}const xH=t=>/^0[^.\s]+$/u.test(t);function EO(t){let e;return()=>(e===void 0&&(e=t()),e)}const Va=t=>t,dge=(t,e)=>n=>e(t(n)),L0=(...t)=>t.reduce(dge),qv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class TO{constructor(){this.subscriptions=[]}add(e){return SO(this.subscriptions,e),()=>r1(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ws=t=>t*1e3,za=t=>t/1e3;function wH(t,e){return e?t*(1e3/e):0}const SH=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,fge=1e-7,hge=12;function pge(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=SH(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>fge&&++o<hge);return s}function V0(t,e,n,r){if(t===e&&n===r)return Va;const i=a=>pge(a,0,1,t,n);return a=>a===0||a===1?a:SH(i(a),e,r)}const _H=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,EH=t=>e=>1-t(1-e),TH=V0(.33,1.53,.69,.99),AO=EH(TH),AH=_H(AO),kH=t=>(t*=2)<1?.5*AO(t):.5*(2-Math.pow(2,-10*(t-1))),kO=t=>1-Math.sin(Math.acos(t)),CH=EH(kO),IH=_H(kO),gge=V0(.42,0,1,1),mge=V0(0,0,.58,1),NH=V0(.42,0,.58,1),vge=t=>Array.isArray(t)&&typeof t[0]!="number",PH=t=>Array.isArray(t)&&typeof t[0]=="number",yge={linear:Va,easeIn:gge,easeInOut:NH,easeOut:mge,circIn:kO,circInOut:IH,circOut:CH,backIn:AO,backInOut:AH,backOut:TH,anticipate:kH},bge=t=>typeof t=="string",L5=t=>{if(PH(t)){_O(t.length===4);const[e,n,r,i]=t;return V0(e,n,r,i)}else if(bge(t))return yge[t];return t},ax=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function xge(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(f){s.has(f)&&(u.schedule(f),t()),f(o)}const u={schedule:(f,h=!1,g=!1)=>{const b=g&&i?n:r;return h&&s.add(f),b.has(f)||b.add(f),f},cancel:f=>{r.delete(f),s.delete(f)},process:f=>{if(o=f,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,a&&(a=!1,u.process(f))}};return u}const wge=40;function OH(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=ax.reduce((I,P)=>(I[P]=xge(a),I),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:f,update:h,preRender:g,render:v,postRender:b}=s,x=()=>{const I=Sl.useManualTiming?i.timestamp:performance.now();n=!1,Sl.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(I-i.timestamp,wge),1)),i.timestamp=I,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),f.process(i),h.process(i),g.process(i),v.process(i),b.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},w=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:ax.reduce((I,P)=>{const O=s[P];return I[P]=(D,N=!1,C=!1)=>(n||w(),O.schedule(D,N,C)),I},{}),cancel:I=>{for(let P=0;P<ax.length;P++)s[ax[P]].cancel(I)},state:i,steps:s}}const{schedule:ln,cancel:ru,state:Gr,steps:$A}=OH(typeof requestAnimationFrame<"u"?requestAnimationFrame:Va,!0);let dw;function Sge(){dw=void 0}const vi={now:()=>(dw===void 0&&vi.set(Gr.isProcessing||Sl.useManualTiming?Gr.timestamp:performance.now()),dw),set:t=>{dw=t,queueMicrotask(Sge)}},DH=t=>e=>typeof e=="string"&&e.startsWith(t),RH=DH("--"),_ge=DH("var(--"),CO=t=>_ge(t)?Ege.test(t.split("/*")[0].trim()):!1,Ege=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function V5(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Jp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Gv={...Jp,transform:t=>_o(0,1,t)},sx={...Jp,default:1},dv=t=>Math.round(t*1e5)/1e5,IO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Tge(t){return t==null}const Age=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,NO=(t,e)=>n=>!!(typeof n=="string"&&Age.test(n)&&n.startsWith(t)||e&&!Tge(n)&&Object.prototype.hasOwnProperty.call(n,e)),MH=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(IO);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},kge=t=>_o(0,255,t),UA={...Jp,transform:t=>Math.round(kge(t))},yd={test:NO("rgb","red"),parse:MH("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+UA.transform(t)+", "+UA.transform(e)+", "+UA.transform(n)+", "+dv(Gv.transform(r))+")"};function Cge(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const HI={test:NO("#"),parse:Cge,transform:yd.transform},B0=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ac=B0("deg"),vo=B0("%"),Ge=B0("px"),Ige=B0("vh"),Nge=B0("vw"),B5={...vo,parse:t=>vo.parse(t)/100,transform:t=>vo.transform(t*100)},Ph={test:NO("hsl","hue"),parse:MH("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+vo.transform(dv(e))+", "+vo.transform(dv(n))+", "+dv(Gv.transform(r))+")"},rr={test:t=>yd.test(t)||HI.test(t)||Ph.test(t),parse:t=>yd.test(t)?yd.parse(t):Ph.test(t)?Ph.parse(t):HI.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?yd.transform(t):Ph.transform(t),getAnimatableNone:t=>{const e=rr.parse(t);return e.alpha=0,rr.transform(e)}},Pge=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Oge(t){return isNaN(t)&&typeof t=="string"&&(t.match(IO)?.length||0)+(t.match(Pge)?.length||0)>0}const jH="number",zH="color",Dge="var",Rge="var(",F5="${}",Mge=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Hv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(Mge,c=>(rr.test(c)?(r.color.push(a),i.push(zH),n.push(rr.parse(c))):c.startsWith(Rge)?(r.var.push(a),i.push(Dge),n.push(c)):(r.number.push(a),i.push(jH),n.push(parseFloat(c))),++a,F5)).split(F5);return{values:n,split:o,indexes:r,types:i}}function LH(t){return Hv(t).values}function VH(t){const{split:e,types:n}=Hv(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===jH?a+=dv(i[s]):o===zH?a+=rr.transform(i[s]):a+=i[s]}return a}}const jge=t=>typeof t=="number"?0:rr.test(t)?rr.getAnimatableNone(t):t;function zge(t){const e=LH(t);return VH(t)(e.map(jge))}const iu={test:Oge,parse:LH,createTransformer:VH,getAnimatableNone:zge};function qA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Lge({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=qA(c,o,t+1/3),a=qA(c,o,t),s=qA(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function i1(t,e){return n=>n>0?e:t}const Cn=(t,e,n)=>t+(e-t)*n,GA=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Vge=[HI,yd,Ph],Bge=t=>Vge.find(e=>e.test(t));function $5(t){const e=Bge(t);if(!e)return!1;let n=e.parse(t);return e===Ph&&(n=Lge(n)),n}const U5=(t,e)=>{const n=$5(t),r=$5(e);if(!n||!r)return i1(t,e);const i={...n};return a=>(i.red=GA(n.red,r.red,a),i.green=GA(n.green,r.green,a),i.blue=GA(n.blue,r.blue,a),i.alpha=Cn(n.alpha,r.alpha,a),yd.transform(i))},KI=new Set(["none","hidden"]);function Fge(t,e){return KI.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function $ge(t,e){return n=>Cn(t,e,n)}function PO(t){return typeof t=="number"?$ge:typeof t=="string"?CO(t)?i1:rr.test(t)?U5:Gge:Array.isArray(t)?BH:typeof t=="object"?rr.test(t)?U5:Uge:i1}function BH(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>PO(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function Uge(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=PO(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function qge(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const Gge=(t,e)=>{const n=iu.createTransformer(e),r=Hv(t),i=Hv(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?KI.has(t)&&!i.values.length||KI.has(e)&&!r.values.length?Fge(t,e):L0(BH(qge(r,i),i.values),n):i1(t,e)};function FH(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Cn(t,e,n):PO(t)(t,e)}const Hge=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ln.update(e,n),stop:()=>ru(e),now:()=>Gr.isProcessing?Gr.timestamp:vi.now()}},$H=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},a1=2e4;function OO(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<a1;)e+=n,r=t.next(e);return e>=a1?1/0:e}function Kge(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(OO(r),a1);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:za(i)}}const Wge=5;function UH(t,e,n){const r=Math.max(e-Wge,0);return wH(n-t(r),e-r)}const Rn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},HA=.001;function Yge({duration:t=Rn.duration,bounce:e=Rn.bounce,velocity:n=Rn.velocity,mass:r=Rn.mass}){let i,a,s=1-e;s=_o(Rn.minDamping,Rn.maxDamping,s),t=_o(Rn.minDuration,Rn.maxDuration,za(t)),s<1?(i=u=>{const f=u*s,h=f*t,g=f-n,v=WI(u,s),b=Math.exp(-h);return HA-g/v*b},a=u=>{const h=u*s*t,g=h*n+n,v=Math.pow(s,2)*Math.pow(u,2)*t,b=Math.exp(-h),x=WI(Math.pow(u,2),s);return(-i(u)+HA>0?-1:1)*((g-v)*b)/x}):(i=u=>{const f=Math.exp(-u*t),h=(u-n)*t+1;return-HA+f*h},a=u=>{const f=Math.exp(-u*t),h=(n-u)*(t*t);return f*h});const o=5/t,c=Qge(i,a,o);if(t=ws(t),isNaN(c))return{stiffness:Rn.stiffness,damping:Rn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const Xge=12;function Qge(t,e,n){let r=n;for(let i=1;i<Xge;i++)r=r-t(r)/e(r);return r}function WI(t,e){return t*Math.sqrt(1-e*e)}const Zge=["duration","bounce"],Jge=["stiffness","damping","mass"];function q5(t,e){return e.some(n=>t[n]!==void 0)}function eme(t){let e={velocity:Rn.velocity,stiffness:Rn.stiffness,damping:Rn.damping,mass:Rn.mass,isResolvedFromDuration:!1,...t};if(!q5(t,Jge)&&q5(t,Zge))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*_o(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Rn.mass,stiffness:i,damping:a}}else{const n=Yge(t);e={...e,...n,mass:Rn.mass},e.isResolvedFromDuration=!0}return e}function s1(t=Rn.visualDuration,e=Rn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:f,duration:h,velocity:g,isResolvedFromDuration:v}=eme({...n,velocity:-za(n.velocity||0)}),b=g||0,x=u/(2*Math.sqrt(c*f)),w=s-a,S=za(Math.sqrt(c/f)),T=Math.abs(w)<5;r||(r=T?Rn.restSpeed.granular:Rn.restSpeed.default),i||(i=T?Rn.restDelta.granular:Rn.restDelta.default);let I;if(x<1){const O=WI(S,x);I=D=>{const N=Math.exp(-x*S*D);return s-N*((b+x*S*w)/O*Math.sin(O*D)+w*Math.cos(O*D))}}else if(x===1)I=O=>s-Math.exp(-S*O)*(w+(b+S*w)*O);else{const O=S*Math.sqrt(x*x-1);I=D=>{const N=Math.exp(-x*S*D),C=Math.min(O*D,300);return s-N*((b+x*S*w)*Math.sinh(C)+O*w*Math.cosh(C))/O}}const P={calculatedDuration:v&&h||null,next:O=>{const D=I(O);if(v)o.done=O>=h;else{let N=O===0?b:0;x<1&&(N=O===0?ws(b):UH(I,O,D));const C=Math.abs(N)<=r,R=Math.abs(s-D)<=i;o.done=C&&R}return o.value=o.done?s:D,o},toString:()=>{const O=Math.min(OO(P),a1),D=$H(N=>P.next(O*N).value,O,30);return O+"ms "+D},toTransition:()=>{}};return P}s1.applyToOptions=t=>{const e=Kge(t,100,s1);return t.ease=e.ease,t.duration=ws(e.duration),t.type="keyframes",t};function YI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:u=.5,restSpeed:f}){const h=t[0],g={done:!1,value:h},v=C=>o!==void 0&&C<o||c!==void 0&&C>c,b=C=>o===void 0?c:c===void 0||Math.abs(o-C)<Math.abs(c-C)?o:c;let x=n*e;const w=h+x,S=s===void 0?w:s(w);S!==w&&(x=S-h);const T=C=>-x*Math.exp(-C/r),I=C=>S+T(C),P=C=>{const R=T(C),M=I(C);g.done=Math.abs(R)<=u,g.value=g.done?S:M};let O,D;const N=C=>{v(g.value)&&(O=C,D=s1({keyframes:[g.value,b(g.value)],velocity:UH(I,C,g.value),damping:i,stiffness:a,restDelta:u,restSpeed:f}))};return N(0),{calculatedDuration:null,next:C=>{let R=!1;return!D&&O===void 0&&(R=!0,P(C),N(C)),O!==void 0&&C>=O?D.next(C-O):(!R&&P(C),g)}}}function tme(t,e,n){const r=[],i=n||Sl.mix||FH,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Va:e;o=L0(c,o)}r.push(o)}return r}function nme(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(_O(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=tme(e,r,i),c=o.length,u=f=>{if(s&&f<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const g=qv(t[h],t[h+1],f);return o[h](g)};return n?f=>u(_o(t[0],t[a-1],f)):u}function rme(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=qv(0,e,r);t.push(Cn(n,1,i))}}function ime(t){const e=[0];return rme(e,t.length-1),e}function ame(t,e){return t.map(n=>n*e)}function sme(t,e){return t.map(()=>e||NH).splice(0,t.length-1)}function fv({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=vge(r)?r.map(L5):L5(r),a={done:!1,value:e[0]},s=ame(n&&n.length===e.length?n:ime(e),t),o=nme(s,e,{ease:Array.isArray(i)?i:sme(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const ome=t=>t!==null;function DO(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(ome),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const lme={decay:YI,inertia:YI,tween:fv,keyframes:fv,spring:s1};function qH(t){typeof t.type=="string"&&(t.type=lme[t.type])}class RO{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const cme=t=>t/100;class MO extends RO{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==vi.now()&&this.tick(vi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;qH(e);const{type:n=fv,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const c=n||fv;c!==fv&&typeof o[0]!="number"&&(this.mixKeyframes=L0(cme,FH(o[0],o[1])),o=[0,100]);const u=c({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=OO(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:f,repeat:h,repeatType:g,repeatDelay:v,type:b,onUpdate:x,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let I=this.currentTime,P=r;if(h){const C=Math.min(this.currentTime,i)/o;let R=Math.floor(C),M=C%1;!M&&C>=1&&(M=1),M===1&&R--,R=Math.min(R,h+1),R%2&&(g==="reverse"?(M=1-M,v&&(M-=v/o)):g==="mirror"&&(P=s)),I=_o(0,1,M)*o}const O=T?{done:!1,value:f[0]}:P.next(I);a&&(O.value=a(O.value));let{done:D}=O;!T&&c!==null&&(D=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return N&&b!==YI&&(O.value=DO(f,this.options,w,this.speed)),x&&x(O.value),N&&this.finish(),O}then(e,n){return this.finished.then(e,n)}get duration(){return za(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+za(e)}get time(){return za(this.currentTime)}set time(e){e=ws(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(vi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=za(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Hge,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(vi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function ume(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const bd=t=>t*180/Math.PI,XI=t=>{const e=bd(Math.atan2(t[1],t[0]));return QI(e)},dme={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:XI,rotateZ:XI,skewX:t=>bd(Math.atan(t[1])),skewY:t=>bd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},QI=t=>(t=t%360,t<0&&(t+=360),t),G5=XI,H5=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),K5=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),fme={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:H5,scaleY:K5,scale:t=>(H5(t)+K5(t))/2,rotateX:t=>QI(bd(Math.atan2(t[6],t[5]))),rotateY:t=>QI(bd(Math.atan2(-t[2],t[0]))),rotateZ:G5,rotate:G5,skewX:t=>bd(Math.atan(t[4])),skewY:t=>bd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function ZI(t){return t.includes("scale")?1:0}function JI(t,e){if(!t||t==="none")return ZI(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=fme,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=dme,i=o}if(!i)return ZI(e);const a=r[e],s=i[1].split(",").map(pme);return typeof a=="function"?a(s):s[a]}const hme=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return JI(n,e)};function pme(t){return parseFloat(t.trim())}const eg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],tg=new Set(eg),W5=t=>t===Jp||t===Ge,gme=new Set(["x","y","z"]),mme=eg.filter(t=>!gme.has(t));function vme(t){const e=[];return mme.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Lc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>JI(e,"x"),y:(t,{transform:e})=>JI(e,"y")};Lc.translateX=Lc.x;Lc.translateY=Lc.y;const Pd=new Set;let eN=!1,tN=!1,nN=!1;function GH(){if(tN){const t=Array.from(Pd).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=vme(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}tN=!1,eN=!1,Pd.forEach(t=>t.complete(nN)),Pd.clear()}function HH(){Pd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(tN=!0)})}function yme(){nN=!0,HH(),GH(),nN=!1}class jO{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Pd.add(this),eN||(eN=!0,ln.read(HH),ln.resolveKeyframes(GH))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}ume(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Pd.delete(this)}cancel(){this.state==="scheduled"&&(Pd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const bme=t=>t.startsWith("--");function xme(t,e,n){bme(e)?t.style.setProperty(e,n):t.style[e]=n}const wme=EO(()=>window.ScrollTimeline!==void 0),Sme={};function _me(t,e){const n=EO(t);return()=>Sme[e]??n()}const KH=_me(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Hm=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Y5={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hm([0,.65,.55,1]),circOut:Hm([.55,0,1,.45]),backIn:Hm([.31,.01,.66,-.59]),backOut:Hm([.33,1.53,.69,.99])};function WH(t,e){if(t)return typeof t=="function"?KH()?$H(t,e):"ease-out":PH(t)?Hm(t):Array.isArray(t)?t.map(n=>WH(n,e)||Y5.easeOut):Y5[t]}function Eme(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:c}={},u=void 0){const f={[e]:n};c&&(f.offset=c);const h=WH(o,i);Array.isArray(h)&&(f.easing=h);const g={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),t.animate(f,g)}function YH(t){return typeof t=="function"&&"applyToOptions"in t}function Tme({type:t,...e}){return YH(t)&&KH()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class XH extends RO{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,_O(typeof e.type!="string");const u=Tme(e);this.animation=Eme(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=DO(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):xme(n,r,f),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const e=this.options?.element;!this.isPseudoElement&&e?.isConnected&&this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return za(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+za(e)}get time(){return za(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ws(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&wme()?(this.animation.timeline=e,Va):n(this)}}const QH={anticipate:kH,backInOut:AH,circInOut:IH};function Ame(t){return t in QH}function kme(t){typeof t.ease=="string"&&Ame(t.ease)&&(t.ease=QH[t.ease])}const KA=10;class Cme extends XH{constructor(e){kme(e),qH(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new MO({...s,autoplay:!1}),c=Math.max(KA,vi.now()-this.startTime),u=_o(0,KA,c-KA);n.setWithVelocity(o.sample(Math.max(0,c-u)).value,o.sample(c).value,u),o.stop()}}const X5=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(iu.test(t)||t==="0")&&!t.startsWith("url("));function Ime(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Nme(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=X5(i,e),o=X5(a,e);return!s||!o?!1:Ime(t)||(n==="spring"||YH(n))&&r}function rN(t){t.duration=0,t.type="keyframes"}const Pme=new Set(["opacity","clipPath","filter","transform"]),Ome=EO(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Dme(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return Ome()&&n&&Pme.has(n)&&(n!=="transform"||!u)&&!c&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const Rme=40;class Mme extends RO{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:c,motionValue:u,element:f,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=vi.now();const g={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:u,element:f,...h},v=f?.KeyframeResolver||jO;this.keyframeResolver=new v(o,(b,x,w)=>this.onKeyframesResolved(b,x,g,!w),c,u,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:c,isHandoff:u,onUpdate:f}=r;this.resolvedAt=vi.now(),Nme(e,a,s,o)||((Sl.instantAnimations||!c)&&f?.(DO(e,r,n)),e[0]=e[e.length-1],rN(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Rme?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!u&&Dme(g),b=g.motionValue?.owner?.current,x=v?new Cme({...g,element:b}):new MO(g);x.finished.then(()=>{this.notifyFinished()}).catch(Va),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),yme()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function ZH(t,e,n,r=0,i=1){const a=Array.from(t).sort((u,f)=>u.sortNodePosition(f)).indexOf(e),s=t.size,o=(s-1)*r;return typeof n=="function"?n(a,s):i===1?a*r:o-a*r}const jme=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zme(t){const e=jme.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function JH(t,e,n=1){const[r,i]=zme(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return yH(s)?parseFloat(s):s}return CO(i)?JH(i,e,n+1):i}const Lme={type:"spring",stiffness:500,damping:25,restSpeed:10},Vme=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Bme={type:"keyframes",duration:.8},Fme={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$me=(t,{keyframes:e})=>e.length>2?Bme:tg.has(t)?t.startsWith("scale")?Vme(e[1]):Lme:Fme,Ume=t=>t!==null;function qme(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Ume),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}function eK(t,e){if(t?.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function zO(t,e){const n=t?.[e]??t?.default??t;return n!==t?eK(n,t):n}function Gme({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:u,...f}){return!!Object.keys(f).length}const LO=(t,e,n,r={},i,a)=>s=>{const o=zO(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-ws(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};Gme(o)||Object.assign(f,$me(t,f)),f.duration&&(f.duration=ws(f.duration)),f.repeatDelay&&(f.repeatDelay=ws(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(rN(f),f.delay===0&&(h=!0)),(Sl.instantAnimations||Sl.skipAnimations||i?.shouldSkipAnimations)&&(h=!0,rN(f),f.delay=0),f.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const g=qme(f.keyframes,o);if(g!==void 0){ln.update(()=>{f.onUpdate(g),f.onComplete()});return}}return o.isSync?new MO(f):new Mme(f)};function Q5(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function VO(t,e,n,r){if(typeof e=="function"){const[i,a]=Q5(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=Q5(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Wh(t,e,n){const r=t.getProps();return VO(r,e,n!==void 0?n:r.custom,t)}const tK=new Set(["width","height","top","left","right","bottom",...eg]),Z5=30,Hme=t=>!isNaN(parseFloat(t));class Kme{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=vi.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=vi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Hme(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new TO);const r=this.events[e].add(n);return e==="change"?()=>{r(),ln.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=vi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Z5)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Z5);return wH(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Sp(t,e){return new Kme(t,e)}const iN=t=>Array.isArray(t);function Wme(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Sp(n))}function Yme(t){return iN(t)?t[t.length-1]||0:t}function BO(t,e){const n=Wh(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=Yme(a[s]);Wme(t,s,o)}}const ri=t=>!!(t&&t.getVelocity);function Xme(t){return!!(ri(t)&&t.add)}function aN(t,e){const n=t.getValue("willChange");if(Xme(n))return n.add(e);if(!n&&Sl.WillChange){const r=new Sl.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function FO(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const Qme="framerAppearId",nK="data-"+FO(Qme);function rK(t){return t.props[nK]}function Zme({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function iK(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a,transitionEnd:s,...o}=e;const c=t.getDefaultTransition();a=a?eK(a,c):c;const u=a?.reduceMotion;r&&(a=r);const f=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const g in o){const v=t.getValue(g,t.latestValues[g]??null),b=o[g];if(b===void 0||h&&Zme(h,g))continue;const x={delay:n,...zO(a||{},g)},w=v.get();if(w!==void 0&&!v.isAnimating&&!Array.isArray(b)&&b===w&&!x.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const P=rK(t);if(P){const O=window.MotionHandoffAnimation(P,g,ln);O!==null&&(x.startTime=O,S=!0)}}aN(t,g);const T=u??t.shouldReduceMotion;v.start(LO(g,v,b,T&&tK.has(g)?{type:!1}:x,t,S));const I=v.animation;I&&f.push(I)}if(s){const g=()=>ln.update(()=>{s&&BO(t,s)});f.length?Promise.all(f).then(g):g()}return f}function sN(t,e,n={}){const r=Wh(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(iK(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=i;return Jme(t,e,c,u,f,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function Jme(t,e,n=0,r=0,i=0,a=1,s){const o=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),o.push(sN(c,e,{...s,delay:n+(typeof r=="function"?0:r)+ZH(t.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(o)}function aK(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>sN(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=sN(t,e,n);else{const i=typeof e=="function"?Wh(t,e,n.custom):e;r=Promise.all(iK(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const eve={test:t=>t==="auto",parse:t=>t},sK=t=>e=>e.test(t),oK=[Jp,Ge,vo,Ac,Nge,Ige,eve],J5=t=>oK.find(sK(t));function tve(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||xH(t):!0}const nve=new Set(["brightness","contrast","saturate","opacity"]);function rve(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(IO)||[];if(!r)return t;const i=n.replace(r,"");let a=nve.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const ive=/\b([a-z-]*)\(.*?\)/gu,oN={...iu,getAnimatableNone:t=>{const e=t.match(ive);return e?e.map(rve).join(" "):t}},eV={...Jp,transform:Math.round},ave={rotate:Ac,rotateX:Ac,rotateY:Ac,rotateZ:Ac,scale:sx,scaleX:sx,scaleY:sx,scaleZ:sx,skew:Ac,skewX:Ac,skewY:Ac,distance:Ge,translateX:Ge,translateY:Ge,translateZ:Ge,x:Ge,y:Ge,z:Ge,perspective:Ge,transformPerspective:Ge,opacity:Gv,originX:B5,originY:B5,originZ:Ge},$O={borderWidth:Ge,borderTopWidth:Ge,borderRightWidth:Ge,borderBottomWidth:Ge,borderLeftWidth:Ge,borderRadius:Ge,borderTopLeftRadius:Ge,borderTopRightRadius:Ge,borderBottomRightRadius:Ge,borderBottomLeftRadius:Ge,width:Ge,maxWidth:Ge,height:Ge,maxHeight:Ge,top:Ge,right:Ge,bottom:Ge,left:Ge,inset:Ge,insetBlock:Ge,insetBlockStart:Ge,insetBlockEnd:Ge,insetInline:Ge,insetInlineStart:Ge,insetInlineEnd:Ge,padding:Ge,paddingTop:Ge,paddingRight:Ge,paddingBottom:Ge,paddingLeft:Ge,paddingBlock:Ge,paddingBlockStart:Ge,paddingBlockEnd:Ge,paddingInline:Ge,paddingInlineStart:Ge,paddingInlineEnd:Ge,margin:Ge,marginTop:Ge,marginRight:Ge,marginBottom:Ge,marginLeft:Ge,marginBlock:Ge,marginBlockStart:Ge,marginBlockEnd:Ge,marginInline:Ge,marginInlineStart:Ge,marginInlineEnd:Ge,fontSize:Ge,backgroundPositionX:Ge,backgroundPositionY:Ge,...ave,zIndex:eV,fillOpacity:Gv,strokeOpacity:Gv,numOctaves:eV},sve={...$O,color:rr,backgroundColor:rr,outlineColor:rr,fill:rr,stroke:rr,borderColor:rr,borderTopColor:rr,borderRightColor:rr,borderBottomColor:rr,borderLeftColor:rr,filter:oN,WebkitFilter:oN},lK=t=>sve[t];function cK(t,e){let n=lK(t);return n!==oN&&(n=iu),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const ove=new Set(["auto","none","0"]);function lve(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!ove.has(a)&&Hv(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=cK(n,i)}class cve extends jO{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let h=e[f];if(typeof h=="string"&&(h=h.trim(),CO(h))){const g=JH(h,n.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!tK.has(r)||e.length!==2)return;const[i,a]=e,s=J5(i),o=J5(a),c=V5(i),u=V5(a);if(c!==u&&Lc[r]){this.needsMeasurement=!0;return}if(s!==o)if(W5(s)&&W5(o))for(let f=0;f<e.length;f++){const h=e[f];typeof h=="string"&&(e[f]=parseFloat(h))}else Lc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||tve(e[i]))&&r.push(i);r.length&&lve(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Lc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=Lc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{e.getValue(o).set(c)}),this.resolveNoneKeyframes()}}const uve=new Set(["opacity","clipPath","filter","transform"]);function uK(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(r=>r!=null)}const dK=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function lN(t){return bH(t)&&"offsetHeight"in t}const{schedule:UO}=OH(queueMicrotask,!1),us={x:!1,y:!1};function fK(){return us.x||us.y}function dve(t){return t==="x"||t==="y"?us[t]?null:(us[t]=!0,()=>{us[t]=!1}):us.x||us.y?null:(us.x=us.y=!0,()=>{us.x=us.y=!1})}function hK(t,e){const n=uK(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function fve(t){return!(t.pointerType==="touch"||fK())}function hve(t,e,n={}){const[r,i,a]=hK(t,n);return r.forEach(s=>{let o=!1,c=!1,u;const f=()=>{s.removeEventListener("pointerleave",b)},h=w=>{u&&(u(w),u=void 0),f()},g=w=>{o=!1,window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),c&&(c=!1,h(w))},v=()=>{o=!0,window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",g,i)},b=w=>{if(w.pointerType!=="touch"){if(o){c=!0;return}h(w)}},x=w=>{if(!fve(w))return;c=!1;const S=e(s,w);typeof S=="function"&&(u=S,s.addEventListener("pointerleave",b,i))};s.addEventListener("pointerenter",x,i),s.addEventListener("pointerdown",v,i)}),a}const pK=(t,e)=>e?t===e?!0:pK(t,e.parentElement):!1,qO=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,pve=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function gve(t){return pve.has(t.tagName)||t.isContentEditable===!0}const mve=new Set(["INPUT","SELECT","TEXTAREA"]);function vve(t){return mve.has(t.tagName)||t.isContentEditable===!0}const fw=new WeakSet;function tV(t){return e=>{e.key==="Enter"&&t(e)}}function WA(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const yve=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=tV(()=>{if(fw.has(n))return;WA(n,"down");const i=tV(()=>{WA(n,"up")}),a=()=>WA(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function nV(t){return qO(t)&&!fK()}const rV=new WeakSet;function bve(t,e,n={}){const[r,i,a]=hK(t,n),s=o=>{const c=o.currentTarget;if(!nV(o)||rV.has(o))return;fw.add(c),n.stopPropagation&&rV.add(o);const u=e(c,o),f=(v,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),fw.has(c)&&fw.delete(c),nV(v)&&typeof u=="function"&&u(v,{success:b})},h=v=>{f(v,c===window||c===document||n.useGlobalTarget||pK(c,v.target))},g=v=>{f(v,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),lN(o)&&(o.addEventListener("focus",u=>yve(u,i)),!gve(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function GO(t){return bH(t)&&"ownerSVGElement"in t}const hw=new WeakMap;let pw;const gK=(t,e,n)=>(r,i)=>i&&i[0]?i[0][t+"Size"]:GO(r)&&"getBBox"in r?r.getBBox()[e]:r[n],xve=gK("inline","width","offsetWidth"),wve=gK("block","height","offsetHeight");function Sve({target:t,borderBoxSize:e}){hw.get(t)?.forEach(n=>{n(t,{get width(){return xve(t,e)},get height(){return wve(t,e)}})})}function _ve(t){t.forEach(Sve)}function Eve(){typeof ResizeObserver>"u"||(pw=new ResizeObserver(_ve))}function Tve(t,e){pw||Eve();const n=uK(t);return n.forEach(r=>{let i=hw.get(r);i||(i=new Set,hw.set(r,i)),i.add(e),pw?.observe(r)}),()=>{n.forEach(r=>{const i=hw.get(r);i?.delete(e),i?.size||pw?.unobserve(r)})}}const gw=new Set;let Oh;function Ave(){Oh=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};gw.forEach(e=>e(t))},window.addEventListener("resize",Oh)}function kve(t){return gw.add(t),Oh||Ave(),()=>{gw.delete(t),!gw.size&&typeof Oh=="function"&&(window.removeEventListener("resize",Oh),Oh=void 0)}}function iV(t,e){return typeof t=="function"?kve(t):Tve(t,e)}function Cve(t){return GO(t)&&t.tagName==="svg"}const Ive=[...oK,rr,iu],Nve=t=>Ive.find(sK(t)),aV=()=>({translate:0,scale:1,origin:0,originPoint:0}),Dh=()=>({x:aV(),y:aV()}),sV=()=>({min:0,max:0}),hr=()=>({x:sV(),y:sV()}),Pve=new WeakMap;function i_(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Kv(t){return typeof t=="string"||Array.isArray(t)}const HO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],KO=["initial",...HO];function a_(t){return i_(t.animate)||KO.some(e=>Kv(t[e]))}function mK(t){return!!(a_(t)||t.variants)}function Ove(t,e,n){for(const r in e){const i=e[r],a=n[r];if(ri(i))t.addValue(r,i);else if(ri(a))t.addValue(r,Sp(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,Sp(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const cN={current:null},vK={current:!1},Dve=typeof window<"u";function Rve(){if(vK.current=!0,!!Dve)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>cN.current=t.matches;t.addEventListener("change",e),e()}else cN.current=!1}const oV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let o1={};function yK(t){o1=t}function Mve(){return o1}class jve{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,skipAnimations:a,blockInitialAnimation:s,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=jO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=vi.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,ln.render(this.render,!1,!0))};const{latestValues:u,renderState:f}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=a,this.options=c,this.blockInitialAnimation=!!s,this.isControllingVariants=a_(n),this.isVariantNode=mK(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in g){const b=g[v];u[v]!==void 0&&ri(b)&&b.set(u[v])}}mount(e){if(this.hasBeenMounted)for(const n in this.initialValues)this.values.get(n)?.jump(this.initialValues[n]),this.latestValues[n]=this.initialValues[n];this.current=e,Pve.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(vK.current||Rve(),this.shouldReduceMotion=cN.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),ru(this.notifyUpdate),ru(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&uve.has(e)&&this.current instanceof HTMLElement){const{factory:s,keyframes:o,times:c,ease:u,duration:f}=n.accelerate,h=new XH({element:this.current,name:e,keyframes:o,times:c,ease:u,duration:ws(f)}),g=s(h);this.valueSubscriptions.set(e,()=>{g(),h.cancel()});return}const r=tg.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&ln.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in o1){const n=o1[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<oV.length;r++){const i=oV[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Ove(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Sp(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(yH(r)||xH(r))?r=parseFloat(r):!Nve(r)&&iu.test(n)&&(r=cK(e,n)),this.setBaseTarget(e,ri(r)?r.get():r)),ri(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=VO(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ri(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new TO),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){UO.render(this.render)}}class bK extends jve{constructor(){super(...arguments),this.KeyframeResolver=cve}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ri(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class gu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function xK({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function zve({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Lve(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function YA(t){return t===void 0||t===1}function uN({scale:t,scaleX:e,scaleY:n}){return!YA(t)||!YA(e)||!YA(n)}function rd(t){return uN(t)||wK(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function wK(t){return lV(t.x)||lV(t.y)}function lV(t){return t&&t!=="0%"}function l1(t,e,n){const r=t-n,i=e*r;return n+i}function cV(t,e,n,r,i){return i!==void 0&&(t=l1(t,i,r)),l1(t,n,r)+e}function dN(t,e=0,n=1,r,i){t.min=cV(t.min,e,n,r,i),t.max=cV(t.max,e,n,r,i)}function SK(t,{x:e,y:n}){dN(t.x,e.translate,e.scale,e.originPoint),dN(t.y,n.translate,n.scale,n.originPoint)}const uV=.999999999999,dV=1.0000000000001;function Vve(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Mh(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,SK(t,s)),r&&rd(a.latestValues)&&Mh(t,a.latestValues))}e.x<dV&&e.x>uV&&(e.x=1),e.y<dV&&e.y>uV&&(e.y=1)}function Rh(t,e){t.min=t.min+e,t.max=t.max+e}function fV(t,e,n,r,i=.5){const a=Cn(t.min,t.max,i);dN(t,e,n,a,r)}function Mh(t,e){fV(t.x,e.x,e.scaleX,e.scale,e.originX),fV(t.y,e.y,e.scaleY,e.scale,e.originY)}function _K(t,e){return xK(Lve(t.getBoundingClientRect(),e))}function Bve(t,e,n){const r=_K(t,n),{scroll:i}=e;return i&&(Rh(r.x,i.offset.x),Rh(r.y,i.offset.y)),r}const Fve={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$ve=eg.length;function Uve(t,e,n){let r="",i=!0;for(let a=0;a<$ve;a++){const s=eg[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number")c=o===(s.startsWith("scale")?1:0);else{const u=parseFloat(o);c=s.startsWith("scale")?u===1:u===0}if(!c||n){const u=dK(o,$O[s]);if(!c){i=!1;const f=Fve[s]||s;r+=`${f}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function WO(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const u=e[c];if(tg.has(c)){s=!0;continue}else if(RH(c)){i[c]=u;continue}else{const f=dK(u,$O[c]);c.startsWith("origin")?(o=!0,a[c]=f):r[c]=f}}if(e.transform||(s||n?r.transform=Uve(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:f=0}=a;r.transformOrigin=`${c} ${u} ${f}`}}function EK(t,{style:e,vars:n},r,i){const a=t.style;let s;for(s in e)a[s]=e[s];i?.applyProjectionStyles(a,r);for(s in n)a.setProperty(s,n[s])}function hV(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Am={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ge.test(t))t=parseFloat(t);else return t;const n=hV(t,e.target.x),r=hV(t,e.target.y);return`${n}% ${r}%`}},qve={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=iu.parse(t);if(i.length>5)return r;const a=iu.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const u=Cn(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}},fN={borderRadius:{...Am,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Am,borderTopRightRadius:Am,borderBottomLeftRadius:Am,borderBottomRightRadius:Am,boxShadow:qve};function TK(t,{layout:e,layoutId:n}){return tg.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!fN[t]||t==="opacity")}function YO(t,e,n){const r=t.style,i=e?.style,a={};if(!r)return a;for(const s in r)(ri(r[s])||i&&ri(i[s])||TK(s,t)||n?.getValue(s)?.liveStyle!==void 0)&&(a[s]=r[s]);return a}function Gve(t){return window.getComputedStyle(t)}class Hve extends bK{constructor(){super(...arguments),this.type="html",this.renderInstance=EK}readValueFromInstance(e,n){if(tg.has(n))return this.projection?.isProjecting?ZI(n):hme(e,n);{const r=Gve(e),i=(RH(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return _K(e,n)}build(e,n,r){WO(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return YO(e,n,r)}}const Kve={offset:"stroke-dashoffset",array:"stroke-dasharray"},Wve={offset:"strokeDashoffset",array:"strokeDasharray"};function Yve(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?Kve:Wve;t[a.offset]=`${-r}`,t[a.array]=`${e} ${n}`}const Xve=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function AK(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},c,u,f){if(WO(t,o,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:g}=t;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=f?.transformBox??"fill-box",delete h.transformBox);for(const v of Xve)h[v]!==void 0&&(g[v]=h[v],delete h[v]);e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&Yve(h,i,a,s,!1)}const kK=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),CK=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Qve(t,e,n,r){EK(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(kK.has(i)?i:FO(i),e.attrs[i])}function IK(t,e,n){const r=YO(t,e,n);for(const i in t)if(ri(t[i])||ri(e[i])){const a=eg.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}class Zve extends bK{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(tg.has(n)){const r=lK(n);return r&&r.default||0}return n=kK.has(n)?n:FO(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return IK(e,n,r)}build(e,n,r){AK(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Qve(e,n,r,i)}mount(e){this.isSVGTag=CK(e.tagName),super.mount(e)}}const Jve=KO.length;function NK(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?NK(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Jve;n++){const r=KO[n],i=t.props[r];(Kv(i)||i===!1)&&(e[r]=i)}return e}function PK(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const e0e=[...HO].reverse(),t0e=HO.length;function n0e(t){return e=>Promise.all(e.map(({animation:n,options:r})=>aK(t,n,r)))}function r0e(t){let e=n0e(t),n=pV(),r=!0;const i=c=>(u,f)=>{const h=Wh(t,f,c==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:g,transitionEnd:v,...b}=h;u={...u,...b,...v}}return u};function a(c){e=c(t)}function s(c){const{props:u}=t,f=NK(t.parent)||{},h=[],g=new Set;let v={},b=1/0;for(let w=0;w<t0e;w++){const S=e0e[w],T=n[S],I=u[S]!==void 0?u[S]:f[S],P=Kv(I),O=S===c?T.isActive:null;O===!1&&(b=w);let D=I===f[S]&&I!==u[S]&&P;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),T.protectedKeys={...v},!T.isActive&&O===null||!I&&!T.prevProp||i_(I)||typeof I=="boolean")continue;if(S==="exit"&&T.isActive&&O!==!0){T.prevResolvedValues&&(v={...v,...T.prevResolvedValues});continue}const N=i0e(T.prevProp,I);let C=N||S===c&&T.isActive&&!D&&P||w>b&&P,R=!1;const M=Array.isArray(I)?I:[I];let V=M.reduce(i(S),{});O===!1&&(V={});const{prevResolvedValues:L={}}=T,z={...L,...V},K=X=>{C=!0,g.has(X)&&(R=!0,g.delete(X)),T.needsAnimating[X]=!0;const J=t.getValue(X);J&&(J.liveStyle=!1)};for(const X in z){const J=V[X],ne=L[X];if(v.hasOwnProperty(X))continue;let Q=!1;iN(J)&&iN(ne)?Q=!PK(J,ne):Q=J!==ne,Q?J!=null?K(X):g.add(X):J!==void 0&&g.has(X)?K(X):T.protectedKeys[X]=!0}T.prevProp=I,T.prevResolvedValues=V,T.isActive&&(v={...v,...V}),r&&t.blockInitialAnimation&&(C=!1);const Y=D&&N;C&&(!Y||R)&&h.push(...M.map(X=>{const J={type:S};if(typeof X=="string"&&r&&!Y&&t.manuallyAnimateOnMount&&t.parent){const{parent:ne}=t,Q=Wh(ne,X);if(ne.enteringChildren&&Q){const{delayChildren:$}=Q.transition||{};J.delay=ZH(ne.enteringChildren,t,$)}}return{animation:X,options:J}}))}if(g.size){const w={};if(typeof u.initial!="boolean"){const S=Wh(t,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(w.transition=S.transition)}g.forEach(S=>{const T=t.getBaseTarget(S),I=t.getValue(S);I&&(I.liveStyle=!0),w[S]=T??null}),h.push({animation:w})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function o(c,u){if(n[c].isActive===u)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(c,u)),n[c].isActive=u;const f=s(c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=pV()}}}function i0e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!PK(e,t):!1}function Xu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pV(){return{animate:Xu(!0),whileInView:Xu(),whileHover:Xu(),whileTap:Xu(),whileDrag:Xu(),whileFocus:Xu(),exit:Xu()}}function gV(t,e){t.min=e.min,t.max=e.max}function ls(t,e){gV(t.x,e.x),gV(t.y,e.y)}function mV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const OK=1e-4,a0e=1-OK,s0e=1+OK,DK=.01,o0e=0-DK,l0e=0+DK;function yi(t){return t.max-t.min}function c0e(t,e,n){return Math.abs(t-e)<=n}function vV(t,e,n,r=.5){t.origin=r,t.originPoint=Cn(e.min,e.max,t.origin),t.scale=yi(n)/yi(e),t.translate=Cn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=a0e&&t.scale<=s0e||isNaN(t.scale))&&(t.scale=1),(t.translate>=o0e&&t.translate<=l0e||isNaN(t.translate))&&(t.translate=0)}function hv(t,e,n,r){vV(t.x,e.x,n.x,r?r.originX:void 0),vV(t.y,e.y,n.y,r?r.originY:void 0)}function yV(t,e,n){t.min=n.min+e.min,t.max=t.min+yi(e)}function u0e(t,e,n){yV(t.x,e.x,n.x),yV(t.y,e.y,n.y)}function bV(t,e,n){t.min=e.min-n.min,t.max=t.min+yi(e)}function c1(t,e,n){bV(t.x,e.x,n.x),bV(t.y,e.y,n.y)}function xV(t,e,n,r,i){return t-=e,t=l1(t,1/n,r),i!==void 0&&(t=l1(t,1/i,r)),t}function d0e(t,e=0,n=1,r=.5,i,a=t,s=t){if(vo.test(e)&&(e=parseFloat(e),e=Cn(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Cn(a.min,a.max,r);t===a&&(o-=e),t.min=xV(t.min,e,n,o,i),t.max=xV(t.max,e,n,o,i)}function wV(t,e,[n,r,i],a,s){d0e(t,e[n],e[r],e[i],e.scale,a,s)}const f0e=["x","scaleX","originX"],h0e=["y","scaleY","originY"];function SV(t,e,n,r){wV(t.x,e,f0e,n?n.x:void 0,r?r.x:void 0),wV(t.y,e,h0e,n?n.y:void 0,r?r.y:void 0)}function _V(t){return t.translate===0&&t.scale===1}function RK(t){return _V(t.x)&&_V(t.y)}function EV(t,e){return t.min===e.min&&t.max===e.max}function p0e(t,e){return EV(t.x,e.x)&&EV(t.y,e.y)}function TV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function MK(t,e){return TV(t.x,e.x)&&TV(t.y,e.y)}function AV(t){return yi(t.x)/yi(t.y)}function kV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function no(t){return[t("x"),t("y")]}function g0e(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=n?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:f,rotateX:h,rotateY:g,skewX:v,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),g&&(r+=`rotateY(${g}deg) `),v&&(r+=`skewX(${v}deg) `),b&&(r+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const jK=["TopLeft","TopRight","BottomLeft","BottomRight"],m0e=jK.length,CV=t=>typeof t=="string"?parseFloat(t):t,IV=t=>typeof t=="number"||Ge.test(t);function v0e(t,e,n,r,i,a){i?(t.opacity=Cn(0,n.opacity??1,y0e(r)),t.opacityExit=Cn(e.opacity??1,0,b0e(r))):a&&(t.opacity=Cn(e.opacity??1,n.opacity??1,r));for(let s=0;s<m0e;s++){const o=`border${jK[s]}Radius`;let c=NV(e,o),u=NV(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||IV(c)===IV(u)?(t[o]=Math.max(Cn(CV(c),CV(u),r),0),(vo.test(u)||vo.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=Cn(e.rotate||0,n.rotate||0,r))}function NV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const y0e=zK(0,.5,CH),b0e=zK(.5,.95,Va);function zK(t,e,n){return r=>r<t?0:r>e?1:n(qv(t,e,r))}function x0e(t,e,n){const r=ri(t)?t:Sp(t);return r.start(LO("",r,e,n)),r.animation}function Wv(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const w0e=(t,e)=>t.depth-e.depth;class S0e{constructor(){this.children=[],this.isDirty=!1}add(e){SO(this.children,e),this.isDirty=!0}remove(e){r1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(w0e),this.isDirty=!1,this.children.forEach(e)}}function _0e(t,e){const n=vi.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(ru(r),t(a-e))};return ln.setup(r,!0),()=>ru(r)}function mw(t){return ri(t)?t.get():t}class E0e{constructor(){this.members=[]}add(e){SO(this.members,e);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===e||r===this.lead||r===this.prevLead)continue;const i=r.instance;i&&i.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&r1(this.members,r)}e.scheduleRender()}remove(e){if(r1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i],s=a.instance;if(a.isPresent!==!1&&(!s||s.isConnected!==!1)){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,a=e.options.layoutDependency;if(!(i!==void 0&&a!==void 0&&i===a)){const c=r.instance;c&&c.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const vw={hasAnimatedSinceResize:!0,hasEverUpdated:!1},XA=["","X","Y","Z"],T0e=1e3;let A0e=0;function QA(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function LK(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=rK(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ln,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&LK(r)}function VK({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e?.()){this.id=A0e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(I0e),this.nodes.forEach(D0e),this.nodes.forEach(R0e),this.nodes.forEach(N0e)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new S0e)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new TO),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=GO(s)&&!Cve(s),this.instance=s;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let f,h=0;const g=()=>this.root.updateBlockedByResize=!1;ln.read(()=>{h=window.innerWidth}),t(s,()=>{const v=window.innerWidth;v!==h&&(h=v,this.root.updateBlockedByResize=!0,f&&f(),f=_0e(g,250),vw.hasAnimatedSinceResize&&(vw.hasAnimatedSinceResize=!1,this.nodes.forEach(DV)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||V0e,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=u.getProps(),S=!this.targetLayout||!MK(this.targetLayout,v),T=!h&&g;if(this.options.layoutRoot||this.resumeFrom||T||h&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...zO(b,"layout"),onPlay:x,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(f,T)}else h||DV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ru(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(M0e),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&LK(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(PV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(OV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(O0e),this.nodes.forEach(k0e),this.nodes.forEach(C0e)):this.nodes.forEach(OV),this.clearAllSnapshots();const o=vi.now();Gr.delta=_o(0,1e3/60,o-Gr.timestamp),Gr.timestamp=o,Gr.isProcessing=!0,$A.update.process(Gr),$A.preRender.process(Gr),$A.render.process(Gr),Gr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,UO.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(P0e),this.sharedNodes.forEach(j0e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ln.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ln.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yi(this.snapshot.measuredBox.x)&&!yi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=hr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!RK(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||rd(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),B0e(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return hr();const o=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(F0e))){const{scroll:u}=this.root;u&&(Rh(o.x,u.offset.x),Rh(o.y,u.offset.y))}return o}removeElementScroll(s){const o=hr();if(ls(o,s),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&ls(o,s),Rh(o.x,f.offset.x),Rh(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const c=hr();ls(c,s);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Mh(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),rd(f.latestValues)&&Mh(c,f.latestValues)}return rd(this.latestValues)&&Mh(c,this.latestValues),c}removeTransform(s){const o=hr();ls(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!rd(u.latestValues))continue;uN(u.latestValues)&&u.updateSnapshot();const f=hr(),h=u.measurePageBox();ls(f,h),SV(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return rd(this.latestValues)&&SV(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!this.layout||!(f||h))return;this.resolvedRelativeTargetAt=Gr.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hr(),this.targetWithTransforms=hr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),u0e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ls(this.target,this.layout.layoutBox),SK(this.target,this.targetDelta)):ls(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||uN(this.parent.latestValues)||wK(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(s,o,c){this.relativeParent=s,this.linkedParentVersion=s.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hr(),this.relativeTargetOrigin=hr(),c1(this.relativeTargetOrigin,o,c),ls(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const s=this.getLead(),o=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Gr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;ls(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;Vve(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=hr());const{target:v}=s;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(mV(this.prevProjectionDelta.x,this.projectionDelta.x),mV(this.prevProjectionDelta.y,this.projectionDelta.y)),hv(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!kV(this.projectionDelta.x,this.prevProjectionDelta.x)||!kV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Dh(),this.projectionDelta=Dh(),this.projectionDeltaWithTransform=Dh()}setAnimationOrigin(s,o=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},h=Dh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=hr(),v=c?c.source:void 0,b=this.layout?this.layout.source:void 0,x=v!==b,w=this.getStack(),S=!w||w.members.length<=1,T=!!(x&&!S&&this.options.crossfade===!0&&!this.path.some(L0e));this.animationProgress=0;let I;this.mixTargetDelta=P=>{const O=P/1e3;RV(h.x,s.x,O),RV(h.y,s.y,O),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(c1(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),z0e(this.relativeTarget,this.relativeTargetOrigin,g,O),I&&p0e(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=hr()),ls(I,this.relativeTarget)),x&&(this.animationValues=f,v0e(f,u,this.latestValues,O,T,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ru(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ln.update(()=>{vw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Sp(0)),this.currentAnimation=x0e(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(T0e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:f}=s;if(!(!o||!c||!u)){if(this!==s&&this.layout&&u&&BK(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||hr();const h=yi(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const g=yi(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+g}ls(o,c),Mh(o,f),hv(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new E0e),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&QA("z",s,u,this.animationValues);for(let f=0;f<XA.length;f++)QA(`rotate${XA[f]}`,s,u,this.animationValues),QA(`skew${XA[f]}`,s,u,this.animationValues);s.render();for(const f in u)s.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=mw(o?.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=mw(o?.pointerEvents)||""),this.hasProjected&&!rd(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const f=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=g0e(this.projectionDeltaWithTransform,this.treeScale,f);c&&(h=c(f,h)),s.transform=h;const{x:g,y:v}=this.projectionDelta;s.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,u.animationValues?s.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in fN){if(f[b]===void 0)continue;const{correct:x,applyTo:w,isCSSVariable:S}=fN[b],T=h==="none"?f[b]:x(f[b],u);if(w){const I=w.length;for(let P=0;P<I;P++)s[w[P]]=T}else S?this.options.visualElement.renderState.vars[b]=T:s[b]=T}this.options.layoutId&&(s.pointerEvents=u===this?mw(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(PV),this.root.sharedNodes.clear()}}}function k0e(t){t.updateLayout()}function C0e(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?no(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=yi(h);h.min=n[f].min,h.max=h.min+g}):BK(i,e.layoutBox,n)&&no(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=yi(n[f]);h.max=h.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const s=Dh();hv(s,n,e.layoutBox);const o=Dh();a?hv(o,t.applyTransform(r,!0),e.measuredBox):hv(o,n,e.layoutBox);const c=!RK(s);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:g}=f;if(h&&g){const v=hr();c1(v,e.layoutBox,h.layoutBox);const b=hr();c1(b,n,g.layoutBox),MK(v,b)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:o,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function I0e(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function N0e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function P0e(t){t.clearSnapshot()}function PV(t){t.clearMeasurements()}function OV(t){t.isLayoutDirty=!1}function O0e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function DV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function D0e(t){t.resolveTargetDelta()}function R0e(t){t.calcProjection()}function M0e(t){t.resetSkewAndRotation()}function j0e(t){t.removeLeadSnapshot()}function RV(t,e,n){t.translate=Cn(e.translate,0,n),t.scale=Cn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function MV(t,e,n,r){t.min=Cn(e.min,n.min,r),t.max=Cn(e.max,n.max,r)}function z0e(t,e,n,r){MV(t.x,e.x,n.x,r),MV(t.y,e.y,n.y,r)}function L0e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const V0e={duration:.45,ease:[.4,0,.1,1]},jV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),zV=jV("applewebkit/")&&!jV("chrome/")?Math.round:Va;function LV(t){t.min=zV(t.min),t.max=zV(t.max)}function B0e(t){LV(t.x),LV(t.y)}function BK(t,e,n){return t==="position"||t==="preserve-aspect"&&!c0e(AV(e),AV(n),.2)}function F0e(t){return t!==t.root&&t.scroll?.wasRoot}const $0e=VK({attachResizeListener:(t,e)=>Wv(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),ZA={current:void 0},FK=VK({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ZA.current){const t=new $0e({});t.mount(window),t.setOptions({layoutScroll:!0}),ZA.current=t}return ZA.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),XO=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function VV(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function U0e(...t){return e=>{let n=!1;const r=t.map(i=>{const a=VV(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():VV(t[i],null)}}}}function q0e(...t){return A.useCallback(U0e(...t),t)}class G0e extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,i=lN(r)&&r.offsetWidth||0,a=lN(r)&&r.offsetHeight||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left,s.bottom=a-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function H0e({children:t,isPresent:e,anchorX:n,anchorY:r,root:i,pop:a}){const s=A.useId(),o=A.useRef(null),c=A.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=A.useContext(XO),f=t.props?.ref??t?.ref,h=q0e(o,f);return A.useInsertionEffect(()=>{const{width:g,height:v,top:b,left:x,right:w,bottom:S}=c.current;if(e||a===!1||!o.current||!g||!v)return;const T=n==="left"?`left: ${x}`:`right: ${w}`,I=r==="bottom"?`bottom: ${S}`:`top: ${b}`;o.current.dataset.motionPopId=s;const P=document.createElement("style");u&&(P.nonce=u);const O=i??document.head;return O.appendChild(P),P.sheet&&P.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${v}px !important;
            ${T}px !important;
            ${I}px !important;
          }
        `),()=>{O.contains(P)&&O.removeChild(P)}},[e]),m.jsx(G0e,{isPresent:e,childRef:o,sizeRef:c,pop:a,children:a===!1?t:A.cloneElement(t,{ref:h})})}const K0e=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,anchorY:c,root:u})=>{const f=n_(W0e),h=A.useId();let g=!0,v=A.useMemo(()=>(g=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:b=>{f.set(b,!0);for(const x of f.values())if(!x)return;r&&r()},register:b=>(f.set(b,!1),()=>f.delete(b))}),[n,f,r]);return a&&g&&(v={...v}),A.useMemo(()=>{f.forEach((b,x)=>f.set(x,!1))},[n]),A.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),t=m.jsx(H0e,{pop:s==="popLayout",isPresent:n,anchorX:o,anchorY:c,root:u,children:t}),m.jsx(r_.Provider,{value:v,children:t})};function W0e(){return new Map}function $K(t=!0){const e=A.useContext(r_);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=A.useId();A.useEffect(()=>{if(t)return i(a)},[t]);const s=A.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const ox=t=>t.key||"";function BV(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const lr=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",anchorY:c="top",root:u})=>{const[f,h]=$K(s),g=A.useMemo(()=>BV(t),[t]),v=s&&!f?[]:g.map(ox),b=A.useRef(!0),x=A.useRef(g),w=n_(()=>new Map),S=A.useRef(new Set),[T,I]=A.useState(g),[P,O]=A.useState(g);wO(()=>{b.current=!1,x.current=g;for(let C=0;C<P.length;C++){const R=ox(P[C]);v.includes(R)?(w.delete(R),S.current.delete(R)):w.get(R)!==!0&&w.set(R,!1)}},[P,v.length,v.join("-")]);const D=[];if(g!==T){let C=[...g];for(let R=0;R<P.length;R++){const M=P[R],V=ox(M);v.includes(V)||(C.splice(R,0,M),D.push(M))}return a==="wait"&&D.length&&(C=D),O(BV(C)),I(g),null}const{forceRender:N}=A.useContext(xO);return m.jsx(m.Fragment,{children:P.map(C=>{const R=ox(C),M=s&&!f?!1:g===P||v.includes(R),V=()=>{if(S.current.has(R))return;if(S.current.add(R),w.has(R))w.set(R,!0);else return;let L=!0;w.forEach(z=>{z||(L=!1)}),L&&(N?.(),O(x.current),s&&h?.(),r&&r())};return m.jsx(K0e,{isPresent:M,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:M?void 0:V,anchorX:o,anchorY:c,children:C},R)})})},UK=A.createContext({strict:!1}),FV={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let $V=!1;function Y0e(){if($V)return;const t={};for(const e in FV)t[e]={isEnabled:n=>FV[e].some(r=>!!n[r])};yK(t),$V=!0}function qK(){return Y0e(),Mve()}function X0e(t){const e=qK();for(const n in t)e[n]={...e[n],...t[n]};yK(e)}const Q0e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function u1(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Q0e.has(t)}let GK=t=>!u1(t);function Z0e(t){typeof t=="function"&&(GK=e=>e.startsWith("on")?!u1(e):t(e))}try{Z0e(require("@emotion/is-prop-valid").default)}catch{}function J0e(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(GK(i)||n===!0&&u1(i)||!e&&!u1(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const s_=A.createContext({});function eye(t,e){if(a_(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Kv(n)?n:void 0,animate:Kv(r)?r:void 0}}return t.inherit!==!1?e:{}}function tye(t){const{initial:e,animate:n}=eye(t,A.useContext(s_));return A.useMemo(()=>({initial:e,animate:n}),[UV(e),UV(n)])}function UV(t){return Array.isArray(t)?t.join(" "):t}const QO=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function HK(t,e,n){for(const r in e)!ri(e[r])&&!TK(r,n)&&(t[r]=e[r])}function nye({transformTemplate:t},e){return A.useMemo(()=>{const n=QO();return WO(n,e,t),Object.assign({},n.vars,n.style)},[e])}function rye(t,e){const n=t.style||{},r={};return HK(r,n,t),Object.assign(r,nye(t,e)),r}function iye(t,e){const n={},r=rye(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const KK=()=>({...QO(),attrs:{}});function aye(t,e,n,r){const i=A.useMemo(()=>{const a=KK();return AK(a,e,CK(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};HK(a,t.style,t),i.style={...a,...i.style}}return i}const sye=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ZO(t){return typeof t!="string"||t.includes("-")?!1:!!(sye.indexOf(t)>-1||/[A-Z]/u.test(t))}function oye(t,e,n,{latestValues:r},i,a=!1,s){const c=(s??ZO(t)?aye:iye)(e,r,i,t),u=J0e(e,typeof t=="string",a),f=t!==A.Fragment?{...u,...c,ref:n}:{},{children:h}=e,g=A.useMemo(()=>ri(h)?h.get():h,[h]);return A.createElement(t,{...f,children:g})}function lye({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:cye(n,r,i,t),renderState:e()}}function cye(t,e,n,r){const i={},a=r(t,{});for(const g in a)i[g]=mw(a[g]);let{initial:s,animate:o}=t;const c=a_(t),u=mK(t);e&&u&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||s===!1;const h=f?o:s;if(h&&typeof h!="boolean"&&!i_(h)){const g=Array.isArray(h)?h:[h];for(let v=0;v<g.length;v++){const b=VO(t,g[v]);if(b){const{transitionEnd:x,transition:w,...S}=b;for(const T in S){let I=S[T];if(Array.isArray(I)){const P=f?I.length-1:0;I=I[P]}I!==null&&(i[T]=I)}for(const T in x)i[T]=x[T]}}}return i}const WK=t=>(e,n)=>{const r=A.useContext(s_),i=A.useContext(r_),a=()=>lye(t,e,r,i);return n?a():n_(a)},uye=WK({scrapeMotionValuesFromProps:YO,createRenderState:QO}),dye=WK({scrapeMotionValuesFromProps:IK,createRenderState:KK}),fye=Symbol.for("motionComponentSymbol");function hye(t,e,n){const r=A.useRef(n);A.useInsertionEffect(()=>{r.current=n});const i=A.useRef(null);return A.useCallback(a=>{a&&t.onMount?.(a),e&&(a?e.mount(a):e.unmount());const s=r.current;if(typeof s=="function")if(a){const o=s(a);typeof o=="function"&&(i.current=o)}else i.current?(i.current(),i.current=null):s(a);else s&&(s.current=a)},[e])}const YK=A.createContext({});function Th(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function pye(t,e,n,r,i,a){const{visualElement:s}=A.useContext(s_),o=A.useContext(UK),c=A.useContext(r_),u=A.useContext(XO),f=u.reducedMotion,h=u.skipAnimations,g=A.useRef(null),v=A.useRef(!1);r=r||o.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:s,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f,skipAnimations:h,isSVG:a}),v.current&&g.current&&(g.current.manuallyAnimateOnMount=!0));const b=g.current,x=A.useContext(YK);b&&!b.projection&&i&&(b.type==="html"||b.type==="svg")&&gye(g.current,n,i,x);const w=A.useRef(!1);A.useInsertionEffect(()=>{b&&w.current&&b.update(n,c)});const S=n[nK],T=A.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return wO(()=>{v.current=!0,b&&(w.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),T.current&&b.animationState&&b.animationState.animateChanges())}),A.useEffect(()=>{b&&(!T.current&&b.animationState&&b.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),T.current=!1),b.enteringChildren=void 0)}),b}function gye(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:XK(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Th(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:u})}function XK(t){if(t)return t.options.allowProjection!==!1?t.projection:XK(t.parent)}function JA(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&X0e(r);const a=n?n==="svg":ZO(t),s=a?dye:uye;function o(u,f){let h;const g={...A.useContext(XO),...u,layoutId:mye(u)},{isStatic:v}=g,b=tye(u),x=s(u,v);if(!v&&vH){vye();const w=yye(g);h=w.MeasureLayout,b.visualElement=pye(t,x,g,i,w.ProjectionNode,a)}return m.jsxs(s_.Provider,{value:b,children:[h&&b.visualElement?m.jsx(h,{visualElement:b.visualElement,...g}):null,oye(t,u,hye(x,b.visualElement,f),x,v,e,a)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=A.forwardRef(o);return c[fye]=t,c}function mye({layoutId:t}){const e=A.useContext(xO).id;return e&&t!==void 0?e+"-"+t:t}function vye(t,e){A.useContext(UK).strict}function yye(t){const e=qK(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n?.isEnabled(t)||r?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function bye(t,e){if(typeof Proxy>"u")return JA;const n=new Map,r=(a,s)=>JA(a,s,t,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(n.has(s)||n.set(s,JA(s,void 0,t,e)),n.get(s))})}const xye=(t,e)=>e.isSVG??ZO(t)?new Zve(e):new Hve(e,{allowProjection:t!==A.Fragment});class wye extends gu{constructor(e){super(e),e.animationState||(e.animationState=r0e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();i_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Sye=0;class _ye extends gu{constructor(){super(...arguments),this.id=Sye++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Eye={animation:{Feature:wye},exit:{Feature:_ye}};function F0(t){return{point:{x:t.pageX,y:t.pageY}}}const Tye=t=>e=>qO(e)&&t(e,F0(e));function pv(t,e,n,r){return Wv(t,e,Tye(n),r)}const QK=({current:t})=>t?t.ownerDocument.defaultView:null,qV=(t,e)=>Math.abs(t-e);function Aye(t,e){const n=qV(t.x,e.x),r=qV(t.y,e.y);return Math.sqrt(n**2+r**2)}const GV=new Set(["auto","scroll"]);class ZK{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=v=>{this.handleScroll(v.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=tk(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,x=Aye(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!x)return;const{point:w}=v,{timestamp:S}=Gr;this.history.push({...w,timestamp:S});const{onStart:T,onMove:I}=this.handlers;b||(T&&T(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,v)},this.handlePointerMove=(v,b)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=ek(b,this.transformPagePoint),ln.update(this.updatePoint,!0)},this.handlePointerUp=(v,b)=>{this.end();const{onEnd:x,onSessionEnd:w,resumeAnimation:S}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=tk(v.type==="pointercancel"?this.lastMoveEventInfo:ek(b,this.transformPagePoint),this.history);this.startEvent&&x&&x(v,T),w&&w(v,T)},!qO(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const c=F0(e),u=ek(c,this.transformPagePoint),{point:f}=u,{timestamp:h}=Gr;this.history=[{...f,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,tk(u,this.history)),this.removeListeners=L0(pv(this.contextWindow,"pointermove",this.handlePointerMove),pv(this.contextWindow,"pointerup",this.handlePointerUp),pv(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(GV.has(r.overflowX)||GV.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:i.x-n.x,y:i.y-n.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,i),ln.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),ru(this.updatePoint)}}function ek(t,e){return e?{point:e(t.point)}:t}function HV(t,e){return{x:t.x-e.x,y:t.y-e.y}}function tk({point:t},e){return{point:t,delta:HV(t,JK(e)),offset:HV(t,kye(e)),velocity:Cye(e,.1)}}function kye(t){return t[0]}function JK(t){return t[t.length-1]}function Cye(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=JK(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ws(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&i.timestamp-r.timestamp>ws(e)*2&&(r=t[1]);const a=za(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Iye(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Cn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Cn(n,t,r.max):Math.min(t,n)),t}function KV(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Nye(t,{top:e,left:n,bottom:r,right:i}){return{x:KV(t.x,n,i),y:KV(t.y,e,r)}}function WV(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Pye(t,e){return{x:WV(t.x,e.x),y:WV(t.y,e.y)}}function Oye(t,e){let n=.5;const r=yi(t),i=yi(e);return i>r?n=qv(e.min,e.max-r,t.min):r>i&&(n=qv(t.min,t.max-i,e.min)),_o(0,1,n)}function Dye(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const hN=.35;function Rye(t=hN){return t===!1?t=0:t===!0&&(t=hN),{x:YV(t,"left","right"),y:YV(t,"top","bottom")}}function YV(t,e,n){return{min:XV(t,e),max:XV(t,n)}}function XV(t,e){return typeof t=="number"?t:t[e]||0}const Mye=new WeakMap;class jye{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{n&&this.snapToCursor(F0(h).point),this.stopAnimation()},s=(h,g)=>{const{drag:v,dragPropagation:b,onDragStart:x}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=dve(v),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),no(S=>{let T=this.getAxisMotionValue(S).get()||0;if(vo.test(T)){const{projection:I}=this.visualElement;if(I&&I.layout){const P=I.layout.layoutBox[S];P&&(T=yi(P)*(parseFloat(T)/100))}}this.originPoint[S]=T}),x&&ln.update(()=>x(h,g),!1,!0),aN(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:x,onDrag:w}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:S}=g;if(b&&this.currentDirection===null){this.currentDirection=Lye(S),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,S),this.updateAxis("y",g.point,S),this.visualElement.render(),w&&ln.update(()=>w(h,g),!1,!0)},c=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>{const{dragSnapToOrigin:h}=this.getProps();(h||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:f}=this.getProps();this.panSession=new ZK(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:QK(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&ln.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!lx(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=Iye(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Th(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Nye(r.layoutBox,e):this.constraints=!1,this.elastic=Rye(n),i!==this.constraints&&!Th(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&no(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Dye(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Th(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=Bve(r,i.root,this.visualElement.getTransformPagePoint());let s=Pye(i.layout.layoutBox,a);if(n){const o=n(zve(s));this.hasMutatedConstraints=!!o,o&&(s=xK(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=no(f=>{if(!lx(f,n,this.currentDirection))return;let h=c&&c[f]||{};s&&(h={min:0,max:0});const g=i?200:1e6,v=i?40:1e7,b={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(f,b)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return aN(this.visualElement,e),r.start(LO(e,r,0,n,this.visualElement,!1))}stopAnimation(){no(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){no(n=>{const{drag:r}=this.getProps();if(!lx(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n],c=a.get()||0;a.set(e[n]-Cn(s,o,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Th(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};no(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=Oye({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),no(s=>{if(!lx(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];o.set(Cn(c,u,i[s]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;Mye.set(this.visualElement,this);const e=this.visualElement.current,n=pv(e,"pointerdown",u=>{const{drag:f,dragListener:h=!0}=this.getProps(),g=u.target,v=g!==e&&vve(g);f&&h&&!v&&this.start(u)});let r;const i=()=>{const{dragConstraints:u}=this.getProps();Th(u)&&u.current&&(this.constraints=this.resolveRefConstraints(),r||(r=zye(e,u.current,()=>this.scalePositionWithinConstraints())))},{projection:a}=this.visualElement,s=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ln.read(i);const o=Wv(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:f})=>{this.isDragging&&f&&(no(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=u[h].translate,g.set(g.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),c&&c(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=hN,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function QV(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function zye(t,e,n){const r=iV(t,QV(n)),i=iV(e,QV(n));return()=>{r(),i()}}function lx(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Lye(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Vye extends gu{constructor(e){super(e),this.removeGroupControls=Va,this.removeListeners=Va,this.controls=new jye(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Va}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const nk=t=>(e,n)=>{t&&ln.update(()=>t(e,n),!1,!0)};class Bye extends gu{constructor(){super(...arguments),this.removePointerDownListener=Va}onPointerDown(e){this.session=new ZK(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:QK(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:nk(e),onStart:nk(n),onMove:nk(r),onEnd:(a,s)=>{delete this.session,i&&ln.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=pv(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let rk=!1;class Fye extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),rk&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),vw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,e.layoutDependency!==n&&s.setOptions({...s.options,layoutDependency:n}),rk=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||ln.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),UO.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;rk=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function eW(t){const[e,n]=$K(),r=A.useContext(xO);return m.jsx(Fye,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(YK),isPresent:e,safeToRemove:n})}const $ye={pan:{Feature:Bye},drag:{Feature:Vye,ProjectionNode:FK,MeasureLayout:eW}};function ZV(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&ln.postRender(()=>a(e,F0(e)))}class Uye extends gu{mount(){const{current:e}=this.node;e&&(this.unmount=hve(e,(n,r)=>(ZV(this.node,r,"Start"),i=>ZV(this.node,i,"End"))))}unmount(){}}class qye extends gu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=L0(Wv(this.node.current,"focus",()=>this.onFocus()),Wv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function JV(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&ln.postRender(()=>a(e,F0(e)))}class Gye extends gu{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=bve(e,(i,a)=>(JV(this.node,a,"Start"),(s,{success:o})=>JV(this.node,s,o?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:r?.tap===!1})}unmount(){}}const pN=new WeakMap,ik=new WeakMap,Hye=t=>{const e=pN.get(t.target);e&&e(t)},Kye=t=>{t.forEach(Hye)};function Wye({root:t,...e}){const n=t||document;ik.has(n)||ik.set(n,{});const r=ik.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Kye,{root:t,...e})),r[i]}function Yye(t,e,n){const r=Wye(e);return pN.set(t,n),r.observe(t),()=>{pN.delete(t),r.unobserve(t)}}const Xye={some:0,all:1};class Qye extends gu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Xye[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),g=u?f:h;g&&g(c)};return Yye(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Zye(e,n))&&this.startObserver()}unmount(){}}function Zye({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Jye={inView:{Feature:Qye},tap:{Feature:Gye},focus:{Feature:qye},hover:{Feature:Uye}},ebe={layout:{ProjectionNode:FK,MeasureLayout:eW}},tbe={...Eye,...Jye,...$ye,...ebe},bt=bye(tbe,xye);function nbe(t){t.values.forEach(e=>e.stop())}function gN(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&BO(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{gN(a,e)})})}function rbe(t,e){if(Array.isArray(e))return gN(t,e);if(typeof e=="string")return gN(t,[e]);BO(t,e)}function ibe(){const t=new Set,e={subscribe(n){return t.add(n),()=>{t.delete(n)}},start(n,r){const i=[];return t.forEach(a=>{i.push(aK(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{rbe(r,n)})},stop(){t.forEach(n=>{nbe(n)})},mount(){return()=>{e.stop()}}};return e}function abe(){const t=n_(ibe);return wO(t.mount,[]),t}const sbe=abe,mu=p2((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},2e3)},hideToast:()=>{t({isVisible:!1})}})),cx=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=mu(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return m.jsx(lr,{children:n&&m.jsx(bt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-24 right-6 z-[110] max-w-xs",children:m.jsxs("div",{className:`rounded-lg shadow-lg p-3 flex items-center justify-between ${a()}`,children:[m.jsx("div",{className:"flex items-center flex-1 min-w-0",children:m.jsx("span",{className:"text-xs font-medium whitespace-pre-line pr-2",children:t})}),m.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r&&m.jsxs("button",{onClick:()=>{r(),i()},className:"px-2 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-bold transition-colors",children:[m.jsx(gue,{size:12,className:"inline mr-1"}),"Undo"]}),m.jsx("button",{onClick:i,className:"p-0.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:m.jsx(Gp,{size:14})})]})]})})})};class hi extends A.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){U.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[m.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:m.jsx(Td,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[m.jsx(rp,{className:"h-4 w-4"}),"Try Again"]}),m.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[m.jsx(Mce,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const obe=({onAddTransaction:t})=>{const e=Gi(),n=Ps(),[r,i]=A.useState(!1),a=A.useRef(null),s=u=>n.pathname===u;A.useEffect(()=>{const u=f=>{a.current&&!a.current.contains(f.target)&&i(!1)};if(r)return document.addEventListener("mousedown",u),document.addEventListener("touchstart",u),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("touchstart",u)}},[r]);const o=[{path:"/reports",icon:m.jsx(Mw,{className:"w-5 h-5"}),label:"Reports"},{path:"/analytics",icon:m.jsx(Mc,{className:"w-5 h-5"}),label:"Charts"},{path:"/budget-breakdown",icon:m.jsx(_q,{className:"w-5 h-5"}),label:"Budget Breakdown"}],c=({path:u,icon:f,label:h})=>{const g=s(u);return m.jsxs("button",{onClick:v=>{v.stopPropagation(),e(u)},className:`
          relative group flex flex-col items-center justify-center
          w-12 h-12 rounded-2xl transition-all duration-300
          ${g?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
        `,children:[m.jsx("div",{className:`transition-transform duration-300 ${g?"scale-110":"group-hover:scale-105"}`,children:f}),m.jsx("span",{className:"sr-only",children:h}),g&&m.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]})};return m.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center z-[100] pointer-events-none safe-area-inset-bottom",children:m.jsxs("nav",{className:`
          pointer-events-auto
          flex items-center gap-1 p-2 pl-4 pr-4
          bg-white/60 dark:bg-zinc-900/60 backdrop-blur-xl
          border border-zinc-200/30 dark:border-zinc-800/30
          rounded-full shadow-2xl shadow-zinc-900/10
          transform transition-all duration-500 ease-out
        `,onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:[m.jsx(c,{path:"/",label:"Budget",icon:m.jsx(ip,{className:"w-6 h-6"})}),m.jsx(c,{path:"/transactions",label:"Transactions",icon:m.jsx(Lce,{className:"w-6 h-6"})}),m.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),m.jsx("button",{onClick:u=>{if(u.stopPropagation(),i(!1),t){t();return}e("/add-transaction")},className:`
            -mt-8 mb-2 mx-1
            group relative flex items-center justify-center
            w-16 h-16 rounded-full
            bg-blue-600 text-white
            shadow-xl shadow-blue-600/30
            hover:shadow-blue-600/50 hover:scale-105 hover:-translate-y-1
            active:scale-95 active:translate-y-0
            transition-all duration-300 cubic-bezier(0.175, 0.885, 0.32, 1.275)
          `,children:m.jsx(uf,{className:"w-8 h-8 transition-transform duration-300 group-hover:rotate-90"})}),m.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),m.jsxs("div",{className:"relative",ref:a,children:[m.jsxs("button",{onClick:u=>{u.stopPropagation(),i(!r)},className:`
              relative group flex flex-col items-center justify-center
              w-12 h-12 rounded-2xl transition-all duration-300
              ${r?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
            `,children:[m.jsx("div",{className:`transition-transform duration-300 ${r?"scale-110":"group-hover:scale-105"}`,children:m.jsx(Tce,{className:"w-6 h-6"})}),m.jsx("span",{className:"sr-only",children:"More"}),r&&m.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]}),r&&m.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-56 bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-200/50 dark:border-zinc-800/50 backdrop-blur-xl z-50 overflow-hidden",onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:m.jsx("div",{className:"p-2 space-y-1",children:o.map((u,f)=>m.jsxs("button",{onClick:h=>{h.stopPropagation(),e(u.path),i(!1)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[m.jsx("div",{className:"text-zinc-600 dark:text-zinc-400",children:u.icon}),m.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:u.label})]},f))})})]}),m.jsx(c,{path:"/settings",label:"Settings",icon:m.jsx(tue,{className:"w-6 h-6"})})]})})};function lbe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function cbe(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function dl(t,e){return function(n){n&&(t[e]=n)}}function tW(t,e,n){return function(r){r&&(t[e][n]=r)}}function eB(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function ube(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var s,o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];var u=(s=this[r])[i].apply(s,o);return u===this[r]?this:u})})}}var dbe="function",fbe="object",hbe="string",pbe="number",JO="undefined",nW=typeof window!==JO,gbe=typeof document!==JO&&document,mbe=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],ir=1e-7,ux={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function vbe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function d1(t,e,n,r){return(t*r+e*n)/(n+r)}function o_(t){return typeof t===JO}function As(t){return t&&typeof t===fbe}function cr(t){return Array.isArray(t)}function $i(t){return typeof t===hbe}function _p(t){return typeof t===pbe}function eD(t){return typeof t===dbe}function ybe(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function rW(t,e,n,r,i){var a=tD(t,e,n);return a?n:bbe(t,e,n+1,r,i)}function tD(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function bbe(t,e,n,r,i){for(var a=function(u){var f=e[u].trim();if(f===t.close&&!tD(t,e,u))return{value:u};var h=u,g=Ui(i,function(v){var b=v.open;return b===f});if(g&&(h=rW(g,e,u,r,i)),h===-1)return s=u,"break";u=h,s=u},s,o=n;o<r;++o){var c=a(o);if(o=s,typeof c=="object")return c.value;if(c==="break")break}return-1}function nD(t,e){var n=$i(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,c=o===void 0?s:o,u=n.openCloseCharacters,f=u===void 0?mbe:u,h=f.map(function(N){var C=N.open,R=N.close;return C===R?C:C+"|"+R}).join("|"),g="(\\s*"+i+"\\s*|"+h+"|\\s+)",v=new RegExp(g,"g"),b=t.split(v).filter(function(N){return N&&N!=="undefined"}),x=b.length,w=[],S=[];function T(){return S.length?(w.push(S.join("")),S=[],!0):!1}for(var I=function(N){var C=b[N].trim(),R=N,M=Ui(f,function(z){var K=z.open;return K===C}),V=Ui(f,function(z){var K=z.close;return K===C});if(M){if(R=rW(M,b,N,x,f),R!==-1&&c)return T()&&a||(w.push(b.slice(N,R+1).join("")),N=R,a)?(P=N,"break"):(P=N,"continue")}else if(V&&!tD(V,b,N)){var L=vbe(f);return L.splice(f.indexOf(V),1),{value:nD(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:c,openCloseCharacters:L})}}else if(ybe(C,i)&&!s)return T(),a?(P=N,"break"):(P=N,"continue");R===-1&&(R=x-1),S.push(b.slice(N,R+1).join("")),N=R,P=N},P,O=0;O<x;++O){var D=I(O);if(O=P,typeof D=="object")return D.value;if(D==="break")break}return S.length&&w.push(S.join("")),w}function au(t){return nD(t,"")}function xd(t){return nD(t,",")}function iW(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function $0(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function xbe(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function yw(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function Yv(){return Date.now?Date.now():new Date().getTime()}function _l(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Ui(t,e,n){var r=_l(t,e);return r>-1?t[r]:n}var aW=(function(){var t=Yv(),e=nW&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=Yv(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),wbe=(function(){var t=nW&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function El(t){return Object.keys(t)}function Sbe(t){var e=El(t);return e.map(function(n){return t[n]})}function Jt(t,e){var n=$0(t),r=n.value,i=n.unit;if(As(e)){var a=e[i];if(a){if(eD(a))return a(r);if(ux[i])return ux[i](r,a)}}else if(i==="%")return r*e/100;return ux[i]?ux[i](r):r}function mN(t,e,n){return Math.max(e,Math.min(t,n))}function tB(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[lt(e[0],ir),lt(e[0]/r,ir)],[lt(e[1]*r,ir),lt(e[1],ir)]].filter(function(i){return i.every(function(a,s){var o=e[s],c=lt(o,ir);return n?a<=o||a<=c:a>=o||a>=c})})[0]||t}function sW(t,e,n,r){if(!r)return t.map(function(v,b){return mN(v,e[b],n[b])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=tB(t,e,!1,s),c=o[0],u=o[1],f=tB(t,n,!0,s),h=f[0],g=f[1];return i<c||a<u?(i=c,a=u):(i>h||a>g)&&(i=h,a=g),[i,a]}function _be(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function vN(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Hn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Ebe(t){return[0,1].map(function(e){return vN(t.map(function(n){return n[e]}))})}function nB(t){var e=Ebe(t),n=Hn(e,t[0]),r=Hn(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function fl(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function lt(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function rB(t,e){return t.forEach(function(n,r){t[r]=lt(t[r],e)}),t}function Tbe(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function oW(t){return t.reduce(function(e,n){return e.concat(n)},[])}function lW(t,e){t.indexOf(e)===-1&&t.push(e)}function mr(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function cW(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function uW(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Ur(t,e,n,r){t.addEventListener(e,n,r)}function fr(t,e,n,r){t.removeEventListener(e,n,r)}function ng(t){return t?.ownerDocument||gbe}function rD(t){return ng(t).documentElement}function vu(t){return ng(t).body}function Wc(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function dW(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function rg(t){return As(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var Abe=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,s=i.indexOf(n),o=s===-1?i.length:s;i[o]=n,a[o]=r},t})(),kbe=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),Cbe=typeof Map=="function",Ibe=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function Nbe(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],s=i[1],o=new Ibe;n[a]=o,r[s]=o}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var s=i[0],o=i[1];if(s===o)return[0,0];var c=n[s],u=r[o-1],f=c.getIndex();c.disconnect(),u?c.connect(u,u.next):c.connect(void 0,n[0]);var h=c.getIndex();return[f,h]})}var Pbe=(function(){function t(n,r,i,a,s,o,c,u){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=c,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=Nbe(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,s){var o=a[0],c=a[1],u=r[s],f=u[0],h=u[1];if(o!==c)return i.push([f,h]),!0}),this.cachePureChanged=i},t})();function U0(t,e,n){var r=Cbe?Map:n?kbe:Abe,i=n||function(T){return T},a=[],s=[],o=[],c=t.map(i),u=e.map(i),f=new r,h=new r,g=[],v=[],b={},x=[],w=0,S=0;return c.forEach(function(T,I){f.set(T,I)}),u.forEach(function(T,I){h.set(T,I)}),c.forEach(function(T,I){var P=h.get(T);typeof P>"u"?(++S,s.push(I)):b[P]=S}),u.forEach(function(T,I){var P=f.get(T);typeof P>"u"?(a.push(I),++w):(o.push([P,I]),S=b[I]||0,g.push([P-S,I-w]),v.push(I===P),P!==I&&x.push([P,I]))}),s.reverse(),new Pbe(t,e,a,s,x,o,g,v)}var Obe=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=U0(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),yN=function(t,e){return yN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},yN(t,e)};function q0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");yN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var co=function(){return co=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},co.apply(this,arguments)};function fW(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function iB(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function aB(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function hW(t){var e=[];return t.forEach(function(n){e=e.concat(cr(n)?hW(n):n)}),e}function ak(t,e){if(!e)return t;for(var n in e)o_(t[n])&&(t[n]=e[n]);return t}function f1(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function sB(t){var e=t.className,n=fW(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function oB(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function l_(t){if(!t)return null;var e=t.b;return rg(e)?e:l_(t.c)}function pW(t){var e=t.parentNode;e&&e.removeChild(t)}function gW(t){t.forEach(function(e){e()})}function Dbe(){return this.constructor(this.props,this.context)}var iD=0,c_=(function(){function t(n,r,i,a,s,o,c){c===void 0&&(c={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=s,this.ref=o,this.ps=c,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,s){var o=this,c=o.d,u=Sbe(r).filter(function(b){return b.$_req}),f=hW(u.map(function(b){return b.$_subs})),h=Ui(f,function(b){return b.d===c});if(o.b&&!$i(i)&&!s&&!o.s(i.props,a)&&!h){var g=f.reduce(function(b,x){var w=x.d;return b[0]?b[0].d===w&&b.push(x):w>c&&b.push(x),b},[]);return g.forEach(function(b){G0(b,b._ps,[b.o],n,r,!0)}),!1}o.o=i,o.ss(a);var v=o.ps;return $i(i)||(o.ps=i.props,o.ref=i.ref),aD(this),o.r(n,r,o.b?v:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function mW(){return Object.__CROACT_CURRENT_INSTNACE__}function Rbe(){return iD}function Mbe(t){iD=t}function aD(t){return Object.__CROACT_CURRENT_INSTNACE__=t,iD=0,t}var sD=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=co(co({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,s=G0(a.c,[a],[a.o],i,a._cs,co(co({},this.state),this.$_state),r);s&&(n&&i.push(n),gW(i),aD(null))},t})(),vW=(function(t){q0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return f1(this.props,r)||f1(this.state,i)},e})(sD);function yW(t){var e=function(n){e.current=n};return e.current=t,e}function jbe(t){return t._fr=!0,t}function zbe(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new sD(e,n),a.constructor=t,t._fr?(r.fr=yW(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=Dbe),a.$_p=r,a}var Lbe=(function(t){q0(e,t);function e(r,i,a,s,o,c,u){u===void 0&&(u={});var f=t.call(this,r,i,a,s,o,c,ak(u,r.defaultProps))||this;return f.typ="comp",f._usefs=[],f._uefs=[],f._defs=[],f}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(ak(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var s,o,c=this,u=c.t;c.ps=ak(c.ps,c.t.defaultProps);var f=c.ps,h=!c.b,g=u.contextType,v=c.b,b=g?.get(c);c._cs=i,h?(v=zbe(u,f,b,c),c.b=v):(v.props=f,v.context=b);var x=v.state;c._usefs=[],c._uefs=[];var w=v.render();((o=(s=w?.props)===null||s===void 0?void 0:s.children)===null||o===void 0?void 0:o.length)===0&&(w.props.children=c.ps.children);var S=co(co({},i),v.$_cs);G0(c,c._ps,w?[w]:[],r,S),h?c._uefs.push(function(){g?.register(c),v.componentDidMount()}):c._uefs.push(function(){v.componentDidUpdate(a,x)}),r.push(function(){c._usefs.forEach(function(T){T()}),h?c.md():c.ud(),c._defs=c._uefs.map(function(T){return T()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(s){s.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(s){s&&s()}),i.b.componentWillUnmount()},e})(c_);function Vbe(t,e,n){var r=oD(sB(t),sB(e)),i=r.added,a=r.removed,s=r.changed;for(var o in i)n.setAttribute(o,i[o]);for(var c in s)n.setAttribute(c,s[c][1]);for(var u in a)n.removeAttribute(u)}function Bbe(t,e,n){var r=oD(t,e),i=r.added,a=r.removed;for(var s in a)n.e(s,!0);for(var o in i)n.e(o)}function oD(t,e){var n=El(t),r=El(e),i=U0(n,r,function(c){return c}),a={},s={},o={};return i.added.forEach(function(c){var u=r[c];a[u]=e[u]}),i.removed.forEach(function(c){var u=n[c];s[u]=t[u]}),i.maintained.forEach(function(c){var u=c[0],f=n[u],h=[t[f],e[f]];t[f]!==e[f]&&(o[f]=h)}),{added:a,removed:s,changed:o}}function Fbe(t,e,n){var r=n.style,i=oD(t,e),a=i.added,s=i.removed,o=i.changed;for(var c in a){var u=yw(c,"-");r.setProperty(u,a[c])}for(var c in o){var f=yw(c,"-");r.setProperty(f,o[c][1])}for(var c in s){var h=yw(c,"-");r.removeProperty(h)}}function $be(t){return t.replace(/^on/g,"").toLowerCase()}var Ube=(function(t){q0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,s=a._es,o=a.b,c=$be(r);i?(fr(o,c,s[r]),delete s[r]):(s[r]=function(u){var f,h;(h=(f=a.ps)[r])===null||h===void 0||h.call(f,u)},Ur(o,c,s[r]))},n.s=function(r){return f1(this.ps,r)},n.r=function(r,i,a){var s,o=this,c=!o.b,u=o.ps;if(c){var f=l_(o.c),h=!1;o._svg||o.t==="svg"?h=!0:h=f&&f.ownerSVGElement,o._svg=h;var g=(s=o._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],v=o.t;if(g)o._hyd=[].slice.call(g.children||[]);else{var b=ng(f);h?g=b.createElementNS("http://www.w3.org/2000/svg",v):g=b.createElement(v)}o.b=g}G0(o,o._ps,u.children,r,i);var x=o.b,w=oB(a),S=w[0],T=w[1],I=oB(u),P=I[0],O=I[1];return Vbe(S,P,x),Bbe(T,O,o),Fbe(a.style||{},u.style||{},x),r.push(function(){c?o.md():o.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var s in i)fr(a,s,i[s]);r._ps.forEach(function(o){o.un()}),r._es={},r._sel||pW(a)},e})(c_);function Xv(t){if(!t||rg(t))return t;var e=t.$_p._ps;return e.length?Xv(e[0].b):null}function bW(t){if(t){if(t.b&&rg(t.b))return t;var e=t._ps;return e.length?bW(e[0]):null}}function Ss(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,s=i.ref,o=fW(i,["key","ref"]);return{type:t,key:a,ref:s,props:co(co({},o),{children:oW(n).filter(function(c){return c!=null&&c!==!1})})}}var xW=(function(t){q0(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(c_),qbe=(function(t){q0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,s=!a.b;if(s){var o=l_(a.c),c=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=c||ng(o).createTextNode(a.t.replace("text_",""))}return r.push(function(){s?a.md():a.ud()}),!0},n.un=function(){pW(this.b)},e})(c_);function Gbe(t,e,n){var r=n.map(function(c){return $i(c)?null:c.key}),i=aB(e.map(function(c){return c.k})),a=aB(r),s=U0(i,a,function(c){return c});s.removed.forEach(function(c){e.splice(c,1)[0].un()}),s.ordered.forEach(function(c){var u=c[0],f=c[1],h=e.splice(u,1)[0];e.splice(f,0,h);var g=Xv(h.b),v=Xv(e[f+1]&&e[f+1].b);g&&g.parentNode.insertBefore(g,v)}),s.added.forEach(function(c){e.splice(c,0,lB(n[c],r[c],c,t))});var o=s.maintained.filter(function(c){c[0];var u=c[1],f=n[u],h=e[u],g=$i(f)?"text_".concat(f):f.type;return g!==h.t?(h.un(),e.splice(u,1,lB(f,r[u],u,t)),!0):(h.i=u,!1)});return iB(iB([],s.added,!0),o.map(function(c){c[0];var u=c[1];return u}))}function Hbe(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=Xv(n[i].b);if(a)return a}return null}function lB(t,e,n,r){var i=r.d+1;if($i(t)||_p(t))return new qbe("text_".concat(t),i,e,n,r,null,{});var a=t.type,s=typeof a=="string"?Ube:Lbe;return new s(a,i,e,n,r,t.ref,t.props)}function G0(t,e,n,r,i,a,s){var o=Gbe(t,e,n),c=t._hyd,u=e.filter(function(h,g){return h._hyd=c,h.u(r,i,n[g],a,s)});t.typ==="container"&&t._sel&&e.forEach(function(h){var g=bW(h);g&&(g._sel=!0)}),t._hyd=null;var f=l_(t);return f&&o.reverse().forEach(function(h){var g=e[h],v=Xv(g.b);if(v&&f!==v&&!v.parentNode){var b=Hbe(t,g);f.insertBefore(v,b)}}),u.length>0}function Kbe(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new xW(e));var a=[];return G0(n,n._ps,t?[t]:[],a,r,void 0,void 0),gW(a),aD(null),i||(e.__CROACT__=n),n}function cB(t,e,n){return!n&&t&&(n=new xW(e.parentElement),n._hyd=[e],n._sel=!0),Kbe(t,e,n),n}function wW(t){var e=mW(),n=e._hs||(e._hs=[]),r=Rbe(),i=n[r];if(Mbe(r+1),i){if(!f1(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function Wbe(t,e){var n=wW({func:t,deps:e});return n.value}function Ybe(t){return Wbe(function(){return yW(t)},[])}function SW(t,e,n){var r=mW(),i=wW({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function Xbe(t,e,n){SW(function(){t?.(e())},n,!0)}function lD(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function _W(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function EW(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function cD(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Qbe(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function Zbe(t,e){var n=cD("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function bN(t){return t.replace(/_/g,".")}function Km(t,e){var n=null,r="-1";return lD(t,function(i){var a=cD("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=Zbe(i.versionTest.toLowerCase(),e)||r),r=bN(r),!0)}),{preset:n,version:r}}function dx(t,e){var n={brand:"",version:"-1"};return lD(t,function(r){var i=TW(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function TW(t,e){return _W(t,function(n){var r=n.brand;return cD(""+e.test,r.toLowerCase())})}var AW=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],kW=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],xN=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],CW=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],IW=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function NW(t){return!!Km(CW,t).preset}function Jbe(t){var e=EW(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:NW(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=Km(AW,e),s=a.preset,o=a.version,c=Km(IW,e),u=c.preset,f=c.version,h=Km(kW,e);if(r.chromium=!!h.preset,r.chromiumVersion=h.version,!r.chromium){var g=Km(xN,e);r.webkit=!!g.preset,r.webkitVersion=g.version}return u&&(i.name=u.id,i.version=f,i.majorVersion=parseInt(f,10)),s&&(r.name=s.id,r.version=o,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function exe(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!dx(CW,n).brand||NW(EW())},o={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&lD(xN,function(g){return TW(n,g)});var c=dx(kW,n);if(s.chromium=!!c.brand,s.chromiumVersion=c.version||"-1",!s.chromium){var u=dx(xN,n);s.webkit=!!u.brand,s.webkitVersion=u.version||"-1"}var f=_W(IW,function(g){return new RegExp(""+g.test,"g").exec(a)});o.name=f?f.id:"";{var h=dx(AW,n);s.name=h.brand||s.name,s.version=h.brand&&t?t.uaFullVersion:h.version}return s.webkit&&(o.name=r?"ios":"mac"),o.name==="ios"&&s.webview&&(s.version="-1"),o.version=bN(o.version),s.version=bN(s.version),o.majorVersion=parseInt(o.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:o,isMobile:r,isHints:!0}}function txe(t){return Qbe()?exe():Jbe(t)}function nxe(t,e,n,r,i,a){for(var s=0;s<i;++s){var o=n+s*i,c=r+s*i;t[o]+=t[c]*a,e[o]+=e[c]*a}}function rxe(t,e,n,r,i){for(var a=0;a<i;++a){var s=n+a*i,o=r+a*i,c=t[s],u=e[s];t[s]=t[o],t[o]=c,e[s]=e[o],e[o]=u}}function ixe(t,e,n,r,i){for(var a=0;a<r;++a){var s=n+a*r;t[s]/=i,e[s]/=i}}function PW(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function Eo(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=hn(e),i=0;i<e;++i){var a=e*i+i;if(!lt(n[a],ir)){for(var s=i+1;s<e;++s)if(n[e*i+s]){rxe(n,r,i,s,e);break}}if(!lt(n[a],ir))return[];ixe(n,r,i,e,n[a]);for(var s=0;s<e;++s){var o=s,c=s+i*e,u=n[c];!lt(u,ir)||i===s||nxe(n,r,o,i,e,-u)}}return r}function axe(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function OW(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function sxe(t,e){for(var n=hn(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Hd(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function ks(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=hn(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var s=0;s<i-1;++s)r[a*n+s]=t[a*e+s];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function h1(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=hn(t);return e.forEach(function(i){r=en(r,i,t)}),r}function en(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<a;++o){r[o*n+s]=0;for(var c=0;c<i;++c)r[o*n+s]+=t[c*n+s]*e[o*i+c]}return r}function Pt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function tt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function oxe(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function DW(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function si(t,e,n){n===void 0&&(n=e.length);var r=en(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function lxe(t,e){return en(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function cxe(t,e){return en(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function uxe(t,e){return en(t,K0(e,4))}function fx(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,s=e[2],o=s===void 0?1:s;return en(t,[r,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function H0(t,e){return si(K0(e,3),Hd(t,3))}function sk(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,s=e[2],o=s===void 0?0:s;return en(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,o,1],4)}function uB(t,e){return en(t,e,4)}function K0(t,e){var n=Math.cos(t),r=Math.sin(t),i=hn(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function hn(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function uD(t,e){for(var n=hn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Kd(t,e){for(var n=hn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function dD(t,e,n,r,i,a,s,o){var c=t[0],u=t[1],f=e[0],h=e[1],g=n[0],v=n[1],b=r[0],x=r[1],w=i[0],S=i[1],T=a[0],I=a[1],P=s[0],O=s[1],D=o[0],N=o[1],C=[c,0,f,0,g,0,b,0,u,0,h,0,v,0,x,0,1,0,1,0,1,0,1,0,0,c,0,f,0,g,0,b,0,u,0,h,0,v,0,x,0,1,0,1,0,1,0,1,-w*c,-S*c,-T*f,-I*f,-P*g,-O*g,-D*b,-N*b,-w*u,-S*u,-T*h,-I*h,-P*v,-O*v,-D*x,-N*x],R=Eo(C,8);if(!R.length)return[];var M=en(R,[w,S,T,I,P,O,D,N],8);return M[8]=1,ks(axe(M),3,4)}var gv=function(){return gv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gv.apply(this,arguments)};function dxe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Qv(t,e){return e===void 0&&(e=0),Ah(Ep(t,e))}function fxe(t,e){var n=si(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Ah(t){var e=dxe();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function Ep(t,e){e===void 0&&(e=0);var n=cr(t)?t:au(t);return n.map(function(r){var i=iW(r),a=i.prefix,s=i.value,o=null,c=a,u="";if(a==="translate"||a==="translateX"||a==="translate3d"){var f=As(e)?gv(gv({},e),{"o%":e["%"]}):{"%":e,"o%":e},h=xd(s).map(function(z,K){return K===0&&"x%"in f?f["%"]=e["x%"]:K===1&&"y%"in f?f["%"]=e["y%"]:f["%"]=e["o%"],Jt(z,f)}),g=h[0],v=h[1],b=v===void 0?0:v,x=h[2],w=x===void 0?0:x;o=sk,u=[g,b,w]}else if(a==="translateY"){var S=As(e)?gv({"%":e["y%"]},e):{"%":e},b=Jt(s,S);o=sk,u=[0,b,0]}else if(a==="translateZ"){var w=parseFloat(s);o=sk,u=[0,0,w]}else if(a==="scale"||a==="scale3d"){var T=xd(s).map(function(z){return parseFloat(z)}),I=T[0],P=T[1],O=P===void 0?I:P,D=T[2],N=D===void 0?1:D;o=fx,u=[I,O,N]}else if(a==="scaleX"){var I=parseFloat(s);o=fx,u=[I,1,1]}else if(a==="scaleY"){var O=parseFloat(s);o=fx,u=[1,O,1]}else if(a==="scaleZ"){var N=parseFloat(s);o=fx,u=[1,1,N]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var C=$0(s),R=C.unit,M=C.value,V=R==="rad"?M:M*Math.PI/180;a==="rotate"||a==="rotateZ"?(c="rotateZ",o=uxe):a==="rotateX"?o=lxe:a==="rotateY"&&(o=cxe),u=V}else if(a==="matrix3d")o=uB,u=xd(s).map(function(z){return parseFloat(z)});else if(a==="matrix"){var L=xd(s).map(function(z){return parseFloat(z)});o=uB,u=[L[0],L[1],0,0,L[2],L[3],0,0,0,0,1,0,L[4],L[5],0,1]}else c="";return{name:a,functionName:c,value:s,matrixFunction:o,functionValue:u}})}var wN=function(t,e){return wN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},wN(t,e)};function hxe(t,e){wN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var RW=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),MW=(function(t){hxe(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,RW)||this}return e})(Obe);function pxe(t,e){return U0(t,e,RW)}var SN=function(){return SN=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},SN.apply(this,arguments)};function gxe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var u_=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(As(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(As(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var s=_l(a,function(o){return o.listener===r});s>-1&&a.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,gxe(a).forEach(function(o){o.listener(r),o.once&&i.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push(SN({listener:r},i))},t})();var _N=function(t,e){return _N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},_N(t,e)};function mxe(t,e){_N(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var jh=function(){return jh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jh.apply(this,arguments)};function vxe(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function dB(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function hx(t){if(t){if($i(t))return document.querySelector(t)}else return null;if(eD(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var yxe=(function(t){mxe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=hx(i.container);if(!a){this._flag=!1;return}var s=0,o=0,c=0,u=0;if(a===document.body)c=window.innerWidth,u=window.innerHeight;else{var f=a.getBoundingClientRect();s=f.top,o=f.left,c=f.width,u=f.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:c,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,s=r.clientY,o=i.threshold,c=o===void 0?0:o,u=this,f=u._startRect,h=u._startPos;this._currentOptions=i;var g=[0,0];return f.top>s-c?(h[1]>f.top||s<h[1])&&(g[1]=-1):f.top+f.height<s+c&&(h[1]<f.top+f.height||s>h[1])&&(g[1]=1),f.left>a-c?(h[0]>f.left||a<h[0])&&(g[0]=-1):f.left+f.width<a+c&&(h[0]<f.left+f.width||a>h[0])&&(g[0]=1),!g[0]&&!g[1]?!1:this._continueDrag(jh(jh({},i),{direction:g,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=r.direction,c=r.throttleTime,u=c===void 0?0:c,f=r.inputEvent,h=r.isDrag,g=this._getScrollPosition(o||[0,0],r),v=g[0]-s[0],b=g[1]-s[1],x=o||[v?Math.abs(v)/v:0,b?Math.abs(b)/b:0];return this._prevScrollPos=g,this._lock=!1,!v&&!b?!1:(this.emit("move",{offsetX:x[0]?v:0,offsetY:x[1]?b:0,inputEvent:f}),u&&h&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},u)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,s=i.getScrollPosition,o=s===void 0?vxe:s;return o({container:hx(a),direction:r})},n._continueDrag=function(r){var i=this,a,s=r.container,o=r.direction,c=r.throttleTime,u=r.useScroll,f=r.isDrag,h=r.inputEvent;if(!(!this._flag||f&&this._isWait)){var g=Yv(),v=Math.max(c+this._prevTime-g,0);if(v>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},v),!1;this._prevTime=g;var b=this._getScrollPosition(o,r);this._prevScrollPos=b,f&&(this._isWait=!0),u||(this._lock=!0);var x={container:hx(s),direction:o,inputEvent:h};return(a=r.requestScroll)===null||a===void 0||a.call(r,x),this.emit("scroll",x),this._isWait=!1,u||this.checkScroll(jh(jh({},r),{prevScrollPos:b,direction:o,inputEvent:h}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?dB:i,s=hx(r.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=dB(window,this._onScroll):this._unregister=a(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(u_);function bxe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function Oi(t){return lt(t,ir)}function xxe(t,e){return t.every(function(n,r){return Oi(n-e[r])===0})}function wxe(t,e){return!Oi(t[0]-e[0])&&!Oi(t[1]-e[1])}function jW(t){return t.length<3?0:Math.abs(_be(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function fB(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,s=Wd(t),o=s.minX,c=s.minY,u=s.maxX,f=s.maxY,h=n/(u-o),g=r/(f-c);return t.map(function(v){return[i+(v[0]-o)*h,a+(v[1]-c)*g]})}function Wd(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function EN(t,e,n){var r=t[0],i=t[1],a=Wd(e),s=a.minX,o=a.maxX,c=[[s,i],[o,i]],u=p1(c[0],c[1]),f=TN(e),h=[];if(f.forEach(function(b){var x=p1(b[0],b[1]),w=b[0];if(xxe(u,x))h.push({pos:t,line:b,type:"line"});else{var S=zW(fD(u,x),[c,b]);S.forEach(function(T){b.some(function(I){return wxe(I,T)})?h.push({pos:T,line:b,type:"point"}):Oi(w[1]-i)!==0&&h.push({pos:T,line:b,type:"intersection"})})}}),Ui(h,function(b){return b[0]===r}))return!0;var g=0,v={};return h.forEach(function(b){var x=b.pos,w=b.type,S=b.line;if(!(x[0]>r))if(w==="intersection")++g;else{if(w==="line")return;if(w==="point"){var T=Ui(S,function(O){return O[1]!==i}),I=v[x[0]],P=T[1]>i?1:-1;I?I!==P&&++g:v[x[0]]=P}}}),g%2===1}function p1(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],s=i-n,o=a-r;Math.abs(s)<ir&&(s=0),Math.abs(o)<ir&&(o=0);var c=0,u=0,f=0;return s?o?(c=-o/s,u=1,f=-c*n-r):(u=1,f=-r):o&&(c=-1,f=n),[c,u,f]}function fD(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],o=e[2],c=n===0&&a===0,u=r===0&&s===0,f=[];if(c&&u)return[];if(c){var h=-i/r,g=-o/s;return h!==g?[]:[[-1/0,h],[1/0,h]]}else if(u){var v=-i/n,b=-o/a;return v!==b?[]:[[v,-1/0],[v,1/0]]}else if(n===0){var x=-i/r,w=-(s*x+o)/a;f=[[w,x]]}else if(a===0){var x=-o/s,w=-(r*x+i)/n;f=[[w,x]]}else if(r===0){var w=-i/n,x=-(a*w+o)/s;f=[[w,x]]}else if(s===0){var w=-o/a,x=-(n*w+i)/r;f=[[w,x]]}else{var w=(r*o-s*i)/(s*n-r*a),x=-(n*w+i)/r;f=[[w,x]]}return f.map(function(S){return[S[0],S[1]]})}function zW(t,e){var n=e.map(function(h){return[0,1].map(function(g){return[Math.min(h[0][g],h[1][g]),Math.max(h[0][g],h[1][g])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],s=i[1];if(Oi(a-t[1][0])){if(!Oi(s-t[1][1])){var u=Math.max.apply(Math,n.map(function(h){return h[0][0]})),f=Math.min.apply(Math,n.map(function(h){return h[0][1]}));if(Oi(u-f)>0)return[];r=[[u,s],[f,s]]}}else{var o=Math.max.apply(Math,n.map(function(h){return h[1][0]})),c=Math.min.apply(Math,n.map(function(h){return h[1][1]}));if(Oi(o-c)>0)return[];r=[[a,o],[a,c]]}}return r.length||(r=t.filter(function(h){var g=h[0],v=h[1];return n.every(function(b){return 0<=Oi(g-b[0][0])&&0<=Oi(b[0][1]-g)&&0<=Oi(v-b[1][0])&&0<=Oi(b[1][1]-v)})})),r.map(function(h){return[Oi(h[0]),Oi(h[1])]})}function TN(t){return bxe(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function Sxe(t,e){var n=t.slice(),r=e.slice();nB(n)===-1&&n.reverse(),nB(r)===-1&&r.reverse();var i=TN(n),a=TN(r),s=i.map(function(f){return p1(f[0],f[1])}),o=a.map(function(f){return p1(f[0],f[1])}),c=[];s.forEach(function(f,h){var g=i[h],v=[];o.forEach(function(b,x){var w=fD(f,b),S=zW(w,[g,a[x]]);v.push.apply(v,S.map(function(T){return{index1:h,index2:x,pos:T,type:"intersection"}}))}),v.sort(function(b,x){return fl(g[0],b.pos)-fl(g[0],x.pos)}),c.push.apply(c,v),EN(g[1],r)&&c.push({index1:h,index2:-1,pos:g[1],type:"inside"})}),a.forEach(function(f,h){if(EN(f[1],n)){var g=!1,v=_l(c,function(b){var x=b.index2;return x===h?(g=!0,!1):!!g});v===-1&&(g=!1,v=_l(c,function(b){var x=b.index1,w=b.index2;return x===-1&&w+1===h?(g=!0,!1):!!g})),v===-1?c.push({index1:-1,index2:h,pos:f[1],type:"inside"}):c.splice(v,0,{index1:-1,index2:h,pos:f[1],type:"inside"})}});var u={};return c.filter(function(f){var h=f.pos,g=h[0]+"x"+h[1];return u[g]?!1:(u[g]=!0,!0)})}function _xe(t,e){var n=Sxe(t,e);return n.map(function(r){var i=r.pos;return i})}function Exe(t,e){var n=_xe(t,e);return jW(n)}var AN=function(t,e){return AN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},AN(t,e)};function Txe(t,e){AN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var tr=function(){return tr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tr.apply(this,arguments)};function Axe(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function ok(t){return Axe([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function kxe(t){return t.touches&&t.touches.length>=2}function px(t){return t?t.touches?Ixe(t.touches):[LW(t)]:[]}function Cxe(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function hB(t,e,n){var r=n.length,i=mv(t,r),a=i.clientX,s=i.clientY,o=i.originalClientX,c=i.originalClientY,u=mv(e,r),f=u.clientX,h=u.clientY,g=mv(n,r),v=g.clientX,b=g.clientY,x=a-f,w=s-h,S=a-v,T=s-b;return{clientX:o,clientY:c,deltaX:x,deltaY:w,distX:S,distY:T}}function lk(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Ixe(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(LW(t[r]));return n}function LW(t){return{clientX:t.clientX,clientY:t.clientY}}function mv(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var ck=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),ok(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),ok(e)-ok(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=hB(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],s=0;s<i;++s)a[s]=hB([e[s]],[n[s]],[r[s]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=mv(e,this.length),i=mv(this.prevClients,this.length),a=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(a*a+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),lk(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),lk(e)/lk(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),pB=["textarea","input"],Nxe=(function(t){Txe(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(g,v){if(v===void 0&&(v=!0),!(!i.flag&&g.cancelable===!1)){var b=g.type.indexOf("drag")>=-1;if(!(i.flag&&b)){i._isDragAPI=!0;var x=i.options,w=x.container,S=x.pinchOutside,T=x.preventWheelClick,I=x.preventRightClick,P=x.preventDefault,O=x.checkInput,D=x.dragFocusedInput,N=x.preventClickEventOnDragStart,C=x.preventClickEventOnDrag,R=x.preventClickEventByCondition,M=i._useTouch,V=!i.flag;if(i._isSecondaryButton=g.which===3||g.button===2,T&&(g.which===2||g.button===1)||I&&(g.which===3||g.button===2))return i.stop(),!1;if(V){var L=i._window.document.activeElement,z=g.target;if(z){var K=z.tagName.toLowerCase(),Y=pB.indexOf(K)>-1,G=z.isContentEditable;if(Y||G){if(O||!D&&L===z)return!1;if(L&&(L===z||G&&L.isContentEditable&&L.contains(z)))if(D)z.blur();else return!1}else if((P||g.type==="touchstart")&&L){var X=L.tagName.toLowerCase();(L.isContentEditable||pB.indexOf(X)>-1)&&L.blur()}(N||C||R)&&Ur(i._window,"click",i._onClick,!0)}i.clientStores=[new ck(px(g))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=v,i._dragFlag=!0,i._prevInputEvent=g,i.data={},i.doubleFlag=Yv()-i.prevTime<200,i._isMouseEvent=Cxe(g),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var J=i._preventMouseEvent||i.emit("dragStart",tr(tr({data:i.data,datas:i.data,inputEvent:g,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:v,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){g.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));J===!1&&i.stop(),i._isMouseEvent&&i.flag&&P&&g.preventDefault()}if(!i.flag)return!1;var ne=0;if(V?(i._attchDragEvent(),M&&S&&(ne=setTimeout(function(){Ur(w,"touchstart",i.onDragStart,{passive:!1})}))):M&&S&&fr(w,"touchstart",i.onDragStart),i.flag&&kxe(g)){if(clearTimeout(ne),V&&g.touches.length!==g.changedTouches.length)return;i.pinchFlag||i.onPinchStart(g)}}}},i.onDrag=function(g,v){if(i.flag){var b=i.options.preventDefault;!i._isMouseEvent&&b&&g.preventDefault(),i._prevInputEvent=g;var x=px(g),w=i.moveClients(x,g,!1);if(i._dragFlag){if(i.pinchFlag||w.deltaX||w.deltaY){var S=i._preventMouseEvent||i.emit("drag",tr(tr({},w),{isScroll:!!v,inputEvent:g}));if(S===!1){i.stop();return}}i.pinchFlag&&i.onPinch(g,x)}i.getCurrentStore().getPosition(x,!0)}},i.onDragEnd=function(g){if(i.flag){var v=i.options,b=v.pinchOutside,x=v.container,w=v.preventClickEventOnDrag,S=v.preventClickEventOnDragStart,T=v.preventClickEventByCondition,I=i.isDrag;(w||S||T)&&requestAnimationFrame(function(){i._allowClickEvent()}),!T&&!S&&w&&!I&&i._allowClickEvent(),i._useTouch&&b&&fr(x,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(g);var P=g?.touches?px(g):[],O=P.length;O===0||!i.options.keepDragging?i.flag=!1:i._addStore(new ck(P));var D=i._getPosition(),N=Yv(),C=!I&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=I||C?0:N,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",tr({data:i.data,datas:i.data,isDouble:C,isDrag:I,isClick:!I,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:g,isTrusted:i._isTrusted},D)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){fr(i._window,"click",i._onClick,!0)},i._onClick=function(g){i._allowClickEvent(),i._allowMouseEvent();var v=i.options.preventClickEventByCondition;v?.(g)||(g.stopPropagation(),g.preventDefault())},i._onContextMenu=function(g){var v=i.options;v.preventRightClick?i.onDragEnd(g):g.preventDefault()},i._passCallback=function(){};var a=[].concat(n),s=a[0];i._window=dW(s)?s:Wc(s),i.options=tr({checkInput:!1,container:s&&!("document"in s)?Wc(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=i.options,c=o.container,u=o.events,f=o.checkWindowBlur;if(i._useDrag=u.indexOf("drag")>-1,i._useTouch=u.indexOf("touch")>-1,i._useMouse=u.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(g){Ur(g,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(g){Ur(g,"mousedown",i.onDragStart),Ur(g,"mousemove",i._passCallback)}),Ur(c,"contextmenu",i._onContextMenu)),f&&Ur(Wc(),"blur",i.onBlur),i._useTouch){var h={passive:!1};a.forEach(function(g){Ur(g,"touchstart",i.onDragStart,h),Ur(g,"touchmove",i._passCallback,h)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(c){var u=c.clientX,f=c.clientY;return{clientX:u+i,clientY:f+a,originalClientX:u,originalClientY:f}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),tr(tr({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),fr(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){fr(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){fr(a,"mousedown",n.onDragStart)}),fr(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){fr(a,"touchstart",n.onDragStart)}),fr(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new ck(px(n));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",tr(tr({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",tr(tr({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",tr(tr({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),tr(tr({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(u,f){var h=f.getPosition();return u.distX+=h.distX,u.distY+=h.distY,u},a),o=s.distX,c=s.distY;return tr(tr({},a),{distX:o,distY:c})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(Ur(r,"dragover",this.onDrag,i),Ur(n,"dragend",this.onDragEnd)),this._useMouse&&(Ur(r,"mousemove",this.onDrag),Ur(n,"mouseup",this.onDragEnd)),this._useTouch&&(Ur(r,"touchmove",this.onDrag,i),Ur(n,"touchend",this.onDragEnd,i),Ur(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(fr(r,"dragover",this.onDrag),fr(n,"dragend",this.onDragEnd)),this._useMouse&&(fr(r,"mousemove",this.onDrag),fr(n,"mouseup",this.onDragEnd)),this._useTouch&&(fr(r,"touchstart",this.onDragStart),fr(r,"touchmove",this.onDrag),fr(n,"touchend",this.onDragEnd),fr(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(u_);function Pxe(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var Oxe=Pxe;function Dxe(t){return Oxe(t).toString(36)}function Rxe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Mxe(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?xd(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function jxe(t,e,n,r,i){var a=ng(r),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=Mxe(t,e,n),(i||a.head||a.body).appendChild(s),s}function zxe(t){var e="rCS"+Dxe(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=Rxe(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=jxe(e,t,r,n,i);else{var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,c=parseFloat(a.getAttribute("data-styled-count"))||0;c<=1?(a.remove?a.remove():(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(c-1))}}}}}var kN=function(){return kN=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kN.apply(this,arguments)};function Lxe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function VW(t,e){var n=zxe(e),r=n.className;return jbe(function(i,a){var s=i.className,o=s===void 0?"":s;i.cspNonce;var c=Lxe(i,["className","cspNonce"]),u=Ybe();return Xbe(a,function(){return u.current},[]),SW(function(){var f=n.inject(u.current,{nonce:i.cspNonce});return function(){f.destroy()}},[]),Ss(t,kN({ref:u,"data-styled-id":r,className:"".concat(o," ").concat(r)},c))})}var CN=function(t,e){return CN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},CN(t,e)};function W0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");CN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var se=function(){return se=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},se.apply(this,arguments)};function Vxe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Bxe(t,e,n,r){var i=arguments.length,a=i<3?e:r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function Fxe(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function Re(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Y0(t,e){return se({events:[],props:[],name:t},e)}var $xe=["n","w","s","e"],hD=["n","w","s","e","nw","ne","sw","se"];function Uxe(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function qxe(t){var e=Uxe(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var ig=txe(),BW=ig.browser.webkit,FW=BW&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),$W=ig.browser.name,UW=parseInt(ig.browser.version,10),Gxe=$W==="chrome",Hxe=ig.browser.chromium,Kxe=parseInt(ig.browser.chromiumVersion,10)||0,Wxe=Gxe&&UW>=109||Hxe&&Kxe>=109,Yxe=$W==="firefox",Xxe=parseInt(ig.browser.webkitVersion,10)>=612||UW>=15,pD="moveable-",Qxe=hD.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),Zxe=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Qxe,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(qxe(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(FW?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),Jxe=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],IN=1e-4,Si=1e-7,gx=1e-9,NN=Math.pow(10,10),gB=-NN,ewe={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},gD={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},qW={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},GW=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function X0(t,e,n,r,i,a){var s,o;a===void 0&&(a="draggable");var c=(o=(s=e.gestos[a])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},u=c.originalDatas||c.datas,f=u[a]||(u[a]={});return se(se({},c),{isPinch:!!r,parentEvent:!0,datas:f,originalDatas:t.originalDatas})}var Tp=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),se(se({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var s=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function Yh(t,e,n,r){var i=t.length===16,a=i?4:3,s=hf(t,n,r,a),o=le(s,4),c=le(o[0],2),u=c[0],f=c[1],h=le(o[1],2),g=h[0],v=h[1],b=le(o[2],2),x=b[0],w=b[1],S=le(o[3],2),T=S[0],I=S[1],P=le(An(t,e,a),2),O=P[0],D=P[1],N=Math.min(u,g,x,T),C=Math.min(f,v,w,I),R=Math.max(u,g,x,T),M=Math.max(f,v,w,I);u=u-N||0,g=g-N||0,x=x-N||0,T=T-N||0,f=f-C||0,v=v-C||0,w=w-C||0,I=I-C||0,O=O-N||0,D=D-C||0;var V=t[0],L=t[a+1],z=gi(V*L);return{left:N,top:C,right:R,bottom:M,origin:[O,D],pos1:[u,f],pos2:[g,v],pos3:[x,w],pos4:[T,I],direction:z}}function HW(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,s=a.moveableClientRect,o=a.rootMatrix,c=a.is3d,u=a.pos1,f=s.left,h=s.top,g=c?4:3,v=le(tt(Cp(o,[n-f,r-h],g),u),2),b=v[0],x=v[1],w=le(No({datas:i,distX:b,distY:x}),2),S=w[0],T=w[1];return[S,T]}function ff(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,s=r.is3d,o=r.left,c=r.top,u=r.origin,f=r.offsetMatrix,h=r.targetMatrix,g=r.transformOrigin,v=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=h,n.beforeMatrix=a,n.offsetMatrix=f,n.transformOrigin=g,n.inverseMatrix=Eo(i,v),n.inverseBeforeMatrix=Eo(a,v),n.absoluteOrigin=Hd(Pt([o,c],u),v),n.startDragBeforeDist=si(n.inverseBeforeMatrix,n.absoluteOrigin,v),n.startDragDist=si(n.inverseMatrix,n.absoluteOrigin,v)}function twe(t){return Yh(t.datas.beforeTransform,[50,50],100,100).direction}function d_(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,s=i.nextTransforms,o=s.length,c=i.nextTransformAppendedIndexes,u=-1;a===-1?(n==="translate"?u=0:n==="rotate"&&(u=_l(s,function(v){return v.match(/scale\(/g)})),u===-1&&(u=s.length),r.transformIndex=u):Ui(c,function(v){return v.index===a&&v.functionName===n})?u=a:u=a+c.filter(function(v){return v.index<a}).length;var f=k1e(s,t.state,u),h=f.targetFunction,g=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=f.beforeFunctionTexts,r.afterFunctionTexts=f.afterFunctionTexts,r.beforeTransform=f.beforeFunctionMatrix,r.beforeTransform2=f.beforeFunctionMatrix2,r.targetTansform=f.targetFunctionMatrix,r.afterTransform=f.afterFunctionMatrix,r.afterTransform2=f.afterFunctionMatrix2,r.targetAllTransform=f.allFunctionMatrix,h.functionName===g?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):o>u&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Re(Re([],le(c),!1),[{functionName:n,index:u,isAppend:!0}],!1))}function f_(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function nwe(t){var e=t.datas,n=t.distX,r=t.distY,i=le(WW({datas:e,distX:n,distY:r}),2),a=i[0],s=i[1],o=KW(e,sxe([a,s],4));return si(o,Hd([0,0,0],4),4)}function KW(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,c=n?en(o,e,4):en(e,o,4),u=en(Eo(n?a:r,4),c,4),f=en(u,Eo(n?s:i,4),4);return f}function WW(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,c=a?4:3;return tt(si(i,Pt(o,[n,r]),c),s)}function No(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,c=n.startDragBeforeDist,u=n.startDragDist,f=n.absoluteOrigin,h=o?4:3;return tt(si(e?a:s,Pt(f,[r,i]),h),e?c:u)}function rwe(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,s=n.is3d;n.startDragBeforeDist;var o=n.startDragDist,c=n.absoluteOrigin,u=s?4:3;return tt(si(a,Pt(o,[r,i]),u),c)}function iwe(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(s,o){var c=$0(s),u=c.value,f=c.unit,h=o?i:r,g=o?n:e;if(s==="%"||isNaN(u)){var v=h?a[o]/h:0;return g*v}else if(f!=="%")return u;return g*u/100}):a}function YW(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function awe(t,e){return YW(e).map(function(n){return t[n]})}function uk(t,e){var n=(e+1)/2;return[d1(t[0][0],t[1][0],n,1-n),d1(t[0][1],t[1][1],n,1-n)]}function vr(t,e){var n=uk([t[0],t[1]],e[0]),r=uk([t[2],t[3]],e[0]);return uk([n,r],e[1])}function swe(t,e,n,r,i,a){var s=hf(e,n,r,i),o=vr(s,a),c=t[0]-o[0],u=t[1]-o[1];return[c,u]}function Q0(t,e,n,r){return en(t,yv(e,r,n),r)}function owe(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,s=t.is3d,o=s?4:3,c;if($i(n)){var u=e.beforeTransform,f=e.afterTransform;r?c=ks(Qv(n),4,o):c=ks(en(en(u,Qv([n]),4),f,4),4,o)}else c=n;return Q0(a,c,i,o)}function lwe(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,s=t.targetAllTransform,o=i?4:3;return Q0(r,en(s||a,uD(e,o),o),n,o)}function h_(t,e){var n=ag(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=cr(r)?r:au(r),PN(t,e,i)},setTransformIndex:function(r){PN(t,e,r)}}}function p_(t,e,n){var r=ag(e),i=r.startTransforms;PN(t,e,_l(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function PN(t,e,n){var r=ag(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var s=t.state,o=Ep([a],{"x%":function(c){return c/100*s.offsetWidth},"y%":function(c){return c/100*s.offsetHeight}});i.startValue=o[0].functionValue}}}function mD(t,e){var n=ag(t);n.nextTransforms=au(e)}function ag(t){return t.originalDatas.beforeRenderable}function g1(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function mx(t){return(g1(t)||[]).join(" ")}function vx(t){return ag(t).nextStyle}function XW(t,e,n,r,i){mD(i,e);var a=pi.drag(t,X0(i,t.state,n,r)),s=a?a.transform:e;return se(se({transform:e,drag:a},bi({transform:s},i)),{afterTransform:s})}function vD(t,e,n,r,i,a){var s=owe(t.state,i,e,a),o=dwe(t,n,r,s);return o}function QW(t,e,n,r,i,a,s){var o=vD(t,e,n,i,a,s),c=t.state,u=c.left,f=c.top,h=t.props.groupable,g=h?u:0,v=h?f:0,b=tt(r,o);return tt(b,[g,v])}function cwe(t,e,n,r,i,a,s){var o=QW(t,e,n,r,i,a,s);return o}function uwe(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function dwe(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,s=i.height,o=i.is3d,c=o?4:3,u=[a/2*(1+e[0])+n[0],s/2*(1+e[1])+n[1]];return An(r,u,c)}function fwe(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return QW(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function hwe(t,e,n,r,i,a){var s=t.props.groupable,o=t.state,c=o.transformOrigin,u=o.offsetMatrix,f=o.is3d,h=o.width,g=o.height,v=o.left,b=o.top,x=a.fixedDirection,w=a.nextTargetMatrix||o.targetMatrix,S=f?4:3,T=iwe(i,e,n,h,g,c),I=s?v:0,P=s?b:0,O=Q0(u,w,T,S),D=swe(r,O,e,n,S,x);return tt(D,[I,P])}function pwe(t,e){return vr(qa(t.state),e)}function gwe(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function mwe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function vwe(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function ZW(t,e,n){for(var r=t,i=[],a=rD(t)||vu(t),s=!n&&t===e||t===a,o=s,c=!1,u=3,f,h,g,v=!1,b=Jv(e,e,!0).offsetParent,x=1;r&&!o;){o=s;var w=qi(r),S=w("position"),T=SY(r),I=S==="fixed",P=vwe(w),O=oxe(p1e(T)),D=void 0,N=!1,C=!1,R=0,M=0,V=0,L=0,z={hasTransform:!1,fixedContainer:null};I&&(v=!0,z=b1e(r),b=z.fixedContainer);var K=O.length;!c&&(K===16||P.length)&&(c=!0,u=4,zN(i),g&&(g=ks(g,3,4))),c&&K===9&&(O=ks(O,3,4));var Y=y1e(r,t),G=Y.tagName,X=Y.hasOffset,J=Y.isSVG,ne=Y.origin,Q=Y.targetOrigin,$=Y.offset,Z=le($,2),ee=Z[0],W=Z[1];G==="svg"&&!r.ownerSVGElement&&g&&(i.push({type:"target",target:r,matrix:x1e(r,u)}),i.push({type:"offset",target:r,matrix:hn(u)}));var ue=parseFloat(w("zoom"))||1;if(I)D=z.fixedContainer,N=!0;else{var ie=Jv(r,e,!1,!0,w),oe=ie.offsetZoom;if(D=ie.offsetParent,N=ie.isEnd,C=ie.isStatic,x*=oe,(ie.isCustomElement||oe!==1)&&C)ee-=D.offsetLeft,W-=D.offsetTop;else if(Yxe||Wxe){var Se=ie.parentSlotElement;if(Se){for(var ae=D,Te=0,he=0;ae&&mwe(ae);)Te+=ae.offsetLeft,he+=ae.offsetTop,ae=ae.offsetParent;ee-=Te,W-=he}}}if(BW&&!Xxe&&X&&!J&&C&&(S==="relative"||S==="static")&&(ee-=D.offsetLeft,W-=D.offsetTop,s=s||N),I)X&&z.hasTransform&&(V=D.clientLeft,L=D.clientTop);else if(X&&b!==D&&(R=D.clientLeft,M=D.clientTop),X&&D===a){var te=_Y(r,!1);ee+=te[0],W+=te[1]}if(i.push({type:"target",target:r,matrix:yv(O,u,ne)}),P.length&&(i.push({type:"offset",target:r,matrix:hn(u)}),i.push({type:"target",target:r,matrix:yv(Qv(P),u,ne)})),X){var Pe=r===t,be=Pe?0:r.scrollLeft,ke=Pe?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Kd([ee-be+R-V,W-ke+M-L],u)})}else i.push({type:"offset",target:r,origin:ne});if(ue!==1&&i.push({type:"zoom",target:r,matrix:yv(uD([ue,ue],u),u,[0,0])}),g||(g=O),f||(f=ne),h||(h=Q),o||I)break;r=D,s=N,(!n||r===a)&&(o=s)}return g||(g=hn(u)),f||(f=[0,0]),h||(h=[0,0]),{zoom:x,offsetContainer:b,matrixes:i,targetMatrix:g,transformOrigin:f,targetOrigin:h,is3d:c,hasFixed:v}}var hd=null,pd=null,zh=null;function Ap(t){t?(window.Map&&(hd=new Map,pd=new Map),zh=[]):(hd=null,zh=null,pd=null)}function ywe(t){var e=pd?.get(t);if(e)return e;var n=bv(t,!0);return pd&&pd.set(t,n),n}function bwe(t,e){if(zh){var n=Ui(zh,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=ZW(t,e,!0);return zh&&zh.push([[t,e],r]),r}function qi(t){var e=hd?.get(t);if(!e){var n=Wc(t).getComputedStyle(t);if(!hd)return function(a){return n[a]};e={style:n,cached:{}},hd.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function _s(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(s,o){return a[o]=a[o]||{},a[o][e]=a[o][e]||{},se(se({},n),{isRequestChild:!0,datas:a[o][e],originalDatas:a[o]})})}function dk(t,e,n,r,i,a,s){var o=!!n.match(/Start$/g),c=!!n.match(/End$/g),u=i.isPinch,f=i.datas,h=_s(t,e.name,i),g=t.moveables,v=[],b=h.map(function(x,w){var S=g[w],T=S.state,I=T.gestos,P=x;if(o)P=new Tp(s).dragStart(r,x),v.push(P);else{if(I[s]||(I[s]=f.childGestos[w]),!I[s])return;P=X0(x,T,r,u,a,s),v.push(P)}var O=e[n](S,se(se({},P),{parentFlag:!0}));return c&&(I[s]=null),O});return o&&(f.childGestos=g.map(function(x){return x.state.gestos[s]})),{eventParams:b,childEvents:v}}function hl(t,e,n,r,i,a){i===void 0&&(i=function(f,h){return h});var s=!!n.match(/End$/g),o=_s(t,e.name,r),c=t.moveables,u=o.map(function(f,h){var g=c[h],v=f;v=i(g,f);var b=e[n](g,se(se({},v),{parentFlag:!0}));return s&&(g.state.gestos={}),b});return u}function m1(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,s=r.datas.startPositions||qa(e.state),o=vr(s,i),c=le(si(K0(-t.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),2),u=c[0],f=c[1];return r.datas.originalX=u,r.datas.originalY=f,r}function JW(t,e,n,r){var i=t.getState(),a=i.renderPoses,s=i.rotation,o=i.direction,c=Yd(t.props,e).zoom,u=vv(s/Math.PI*180),f={},h=t.renderState;h.renderDirectionMap||(h.renderDirectionMap={});var g=h.renderDirectionMap;n.forEach(function(b){var x=b.dir;f[x]=!0});var v=gi(o);return n.map(function(b){var x=b.data,w=b.classNames,S=b.dir,T=gD[S];if(!T||!f[S])return null;g[S]=!0;var I=(lt(u,15)+v*qW[S]+720)%180,P={};return El(x).forEach(function(O){P["data-".concat(O)]=x[O]}),r.createElement("div",se({className:Ze.apply(void 0,Re(["control","direction",S,e],le(w),!1)),"data-rotation":I,"data-direction":S},P,{key:"direction-".concat(S),style:x1.apply(void 0,Re([s,c],le(T.map(function(O){return a[O]})),!1))}))})}function eY(t,e,n,r){var i=Yd(t.props,n),a=i.renderDirections,s=a===void 0?e:a,o=i.displayAroundControls;if(!s)return[];var c=s===!0?hD:s;return Re(Re([],le(o?iY(t,r,n,c):[]),!1),le(JW(t,n,c.map(function(u){return{data:{},classNames:[],dir:u}}),r)),!1)}function Zv(t,e,n,r,i,a){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var c=Hn(n,r),u=e?lt(c/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Ze.apply(void 0,Re(["line","direction",e?"edge":"",e],le(s),!1)),"data-rotation":u,"data-line-key":a,"data-direction":e,style:Ym(n,r,i,c)})}function tY(t,e,n,r,i){var a=n===!0?$xe:n;return a.map(function(s,o){var c=le(gD[s],2),u=c[0],f=c[1];if(f!=null)return Zv(t,s,r[u],r[f],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function nY(t){return function(e,n){var r=Yd(e.props,t).edge;return r&&(r===!0||r.length)?Re(Re([],le(tY(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),le(xwe(e,t,n)),!1):rY(e,t,n)}}function rY(t,e,n){return eY(t,hD,e,n)}function xwe(t,e,n){return eY(t,["nw","ne","sw","se"],e,n)}function iY(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,o=a.rotation,c=a.direction,u=i.renderDirectionMap,f=t.props.zoom,h=gi(c),g=o/Math.PI*180;return(r||El(u)).map(function(v){var b=gD[v];if(!b)return null;var x=(lt(g,15)+h*qW[v]+720)%180,w=["around-control"];return n&&w.push("direction",n),e.createElement("div",{className:Ze.apply(void 0,Re([],le(w),!1)),"data-rotation":x,"data-direction":v,key:"direction-around-".concat(v),style:x1.apply(void 0,Re([o,f],le(b.map(function(S){return s[S]})),!1))})})}function yD(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,s=r.left,o=s===void 0?-1/0:s,c=r.top,u=c===void 0?-1/0:c,f=r.right,h=f===void 0?1/0:f,g=r.bottom,v=g===void 0?1/0:g,b={position:a,left:o,top:u,right:h,bottom:v};return{vertical:mB(b,e,!0),horizontal:mB(b,n,!1)}}function g_(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,s=r.clientLeft,o=r.clientTop,c=n.snapOffset,u=c.left,f=c.top,h=c.right,g=c.bottom,v=e||t.props.bounds||{},b=v.position||"client",x=b==="css",w=v.left,S=w===void 0?-1/0:w,T=v.top,I=T===void 0?-1/0:T,P=v.right,O=P===void 0?x?-1/0:1/0:P,D=v.bottom,N=D===void 0?x?-1/0:1/0:D;return x&&(O=a+h-u-O,N=i+g-f-N),{left:S+u-s,right:O+u-s,top:I+f-o,bottom:N+f-o}}function wwe(t,e,n){var r=g_(t),i=r.left,a=r.top,s=r.right,o=r.bottom,c=le(n,2),u=c[0],f=c[1],h=le(tt(n,e),2),g=h[0],v=h[1];Ie(g)<Si&&(g=0),Ie(v)<Si&&(v=0);var b=v>0,x=g>0,w={isBound:!1,offset:0,pos:0},S={isBound:!1,offset:0,pos:0};if(g===0&&v===0)return{vertical:w,horizontal:S};if(g===0)b?o<f&&(S.pos=o,S.offset=f-o):a>f&&(S.pos=a,S.offset=f-a);else if(v===0)x?s<u&&(w.pos=s,w.offset=u-s):i>u&&(w.pos=i,w.offset=u-i);else{var T=v/g,I=n[1]-T*u,P=0,O=0,D=!1;x&&s<=u?(P=T*s+I,O=s,D=!0):!x&&u<=i&&(P=T*i+I,O=i,D=!0),D&&(P<a||P>o)&&(D=!1),D||(b&&o<=f?(P=o,O=(P-I)/T,D=!0):!b&&f<=a&&(P=a,O=(P-I)/T,D=!0)),D&&(w.isBound=!0,w.pos=O,w.offset=u-O,S.isBound=!0,S.pos=P,S.offset=f-P)}return{vertical:w,horizontal:S}}function mB(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,Re([],le(e),!1)),s=Math.max.apply(Math,Re([],le(e),!1)),o=[];return r+1>a&&o.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<s&&o.push({direction:"end",isBound:!0,offset:s-i,pos:i}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(c,u){return Ie(u.offset)-Ie(c.offset)})}function vB(t,e,n){var r=n?t.map(function(i){return H0(i,n)}):t;return r.some(function(i){return i[0]<e.left&&Ie(i[0]-e.left)>.1||i[0]>e.right&&Ie(i[0]-e.right)>.1||i[1]<e.top&&Ie(i[1]-e.top)>.1||i[1]>e.bottom&&Ie(i[1]-e.bottom)>.1})}function Swe(t,e,n){var r=Ua(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,s){return Ie(a-t[n?0:1])-Ie(s-t[n?0:1])}).map(function(a){return Hn([0,0],n?[a,e]:[e,a])})}function _we(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=g_(t),o=s.left,c=s.top,u=s.right,f=s.bottom,h=o-r[0],g=u-r[0],v=c-r[1],b=f-r[1],x={left:h,top:v,right:g,bottom:b};if(!vB(n,x,0))return[];var w=[];return[[h,0],[g,0],[v,1],[b,1]].forEach(function(S){var T=le(S,2),I=T[0],P=T[1];n.forEach(function(O){var D=Hn([0,0],O);w.push.apply(w,Re([],le(Swe(O,I,P).map(function(N){return a+N-D}).filter(function(N){return!vB(e,x,N)}).map(function(N){return lt(N*180/Math.PI,Si)})),!1))})}),w}var Ewe=["left","right","center"],Twe=["top","bottom","middle"],yB={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},su={start:"left",end:"right",center:"center"},ou={start:"top",end:"bottom",center:"middle"};function Lh(){return{left:!1,top:!1,right:!1,bottom:!1}}function sg(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,c=n.snapGridWidth,u=n.snapGridHeight,f=t.state,h=f.guidelines,g=f.enableSnap;return!r||!g||e&&r!==!0&&r.indexOf(e)<0?!1:!!(c||u||i||a||h&&h.length||s&&s.length||o&&o.length)}function bD(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function Awe(t,e){var n=bD(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function xD(t,e){var n=Awe(t,e),r=Twe.filter(function(a){return a in n}),i=Ewe.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function kwe(t,e,n){var r=An(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function Cwe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<ir&&(i=0),Math.abs(a)<ir&&(a=0);var s=0,o=0,c=0;return i?a?(s=-a/i,o=1,c=s*n[0]-n[1]):(o=1,c=-n[1]):(s=-1,c=n[0]),[s,o,c].map(function(u){return lt(u,ir)})}var aY="snapRotationThreshold",sY="snapRotationDegrees",oY="snapHorizontalThreshold",lY="snapVerticalThreshold";function m_(t,e,n,r,i,a,s){var o;r===void 0&&(r=[]),i===void 0&&(i=[]);var c=t.props,u=((o=t.state.snapThresholdInfo)===null||o===void 0?void 0:o.multiples)||[1,1],f=DB(s,c[oY],5),h=DB(a,c[lY],5);return cY(t.state.guidelines,e,n,r,i,f,h,u)}function cY(t,e,n,r,i,a,s,o){return{vertical:xB(t,"vertical",e,s*o[0],r),horizontal:xB(t,"horizontal",n,a*o[1],i)}}function Iwe(t,e,n){var r=le(n,2),i=r[0],a=r[1],s=le(e,2),o=s[0],c=s[1],u=le(tt(n,e),2),f=u[0],h=u[1],g=h>0,v=f>0;f=w1(f),h=w1(h);var b={isSnap:!1,offset:0,pos:0},x={isSnap:!1,offset:0,pos:0};if(f===0&&h===0)return{vertical:b,horizontal:x};var w=m_(t,f?[i]:[],h?[a]:[],[],[],void 0,void 0),S=w.vertical,T=w.horizontal;S.posInfos.filter(function(G){var X=G.pos;return v?X>=o:X<=o}),T.posInfos.filter(function(G){var X=G.pos;return g?X>=c:X<=c}),S.isSnap=S.posInfos.length>0,T.isSnap=T.posInfos.length>0;var I=ON(S),P=I.isSnap,O=I.guideline,D=ON(T),N=D.isSnap,C=D.guideline,R=N?C.pos[1]:0,M=P?O.pos[0]:0;if(f===0)N&&(x.isSnap=!0,x.pos=C.pos[1],x.offset=a-x.pos);else if(h===0)P&&(b.isSnap=!0,b.pos=M,b.offset=i-M);else{var V=h/f,L=n[1]-V*i,z=0,K=0,Y=!1;P?(K=M,z=V*K+L,Y=!0):N&&(z=R,K=(z-L)/V,Y=!0),Y&&(b.isSnap=!0,b.pos=K,b.offset=i-K,x.isSnap=!0,x.pos=z,x.offset=a-z)}return{vertical:b,horizontal:x}}function Vc(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function bB(t,e,n,r){var i=xD(t.props.snapDirections,e),a=m_(t,i.vertical,i.horizontal,i.verticalNames.map(function(c){return Vc(c)}),i.horizontalNames.map(function(c){return Vc(c)}),n,r),s=Vc(i.horizontalNames[a.horizontal.index]),o=Vc(i.verticalNames[a.vertical.index]);return{vertical:se(se({},a.vertical),{direction:o}),horizontal:se(se({},a.horizontal),{direction:s})}}function ON(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:s}}function xB(t,e,n,r,i){var a,s;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o=e==="vertical",c=o?0:1,u=n.map(function(h,g){var v=i[g]||"",b=t.map(function(x){var w=x.pos,S=h-w[c];return{offset:S,dist:Ie(S),guideline:x,direction:v}}).filter(function(x){var w=x.guideline,S=x.dist,T=w.type;return!(T!==e||S>r)}).sort(function(x,w){return x.dist-w.dist});return{pos:h,index:g,guidelineInfos:b,direction:v}}).filter(function(h){return h.guidelineInfos.length>0}).sort(function(h,g){return h.guidelineInfos[0].dist-g.guidelineInfos[0].dist}),f=u.length>0;return{isSnap:f,index:f?u[0].index:-1,direction:(s=(a=u[0])===null||a===void 0?void 0:a.direction)!==null&&s!==void 0?s:"",posInfos:u}}function Nwe(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(g,v,b){var x=b[v+1]||b[0];a.push(g),a.push([(g[0]+x[0])/2,(g[1]+x[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,Re([],le(awe([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var s=a.map(function(g){return vr(e,g)}),o=s.map(function(g){return g[0]}),c=s.map(function(g){return g[1]}),u=m_(t,o,c,a.map(function(g){return Vc(g[0])}),a.map(function(g){return Vc(g[1])}),r,i),f=Vc(a.map(function(g){return g[0]})[u.vertical.index]),h=Vc(a.map(function(g){return g[1]})[u.horizontal.index]);return{vertical:se(se({},u.vertical),{direction:f}),horizontal:se(se({},u.horizontal),{direction:h})}}function uY(t,e){var n=Ie(t.offset),r=Ie(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Si?1:r<Si?-1:n-r}function v1(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],s=n.offset[e],o=r.offset[e];if(i){if(!a)return-1}else return 1;return uY({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function Pwe(t,e,n){var r=[];if(n)Ie(e[0])!==1||Ie(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var c=[s*i[0],o*i[1]];e[0]===c[0]&&e[1]===c[1]||r.push([e,c])})})}else if(t[0]){var a=Ie(e[0])===1?[1]:[1,-1];a.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var a=Ie(e[1])===1?[1]:[1,-1];a.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function dY(t,e){var n=vN([e[0][0],e[1][0]]),r=vN([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function wD(t,e){var n=le(e,2),r=n[0],i=n[1],a=i[0]-r[0],s=i[1]-r[1];Ie(a)<Si&&(a=0),Ie(s)<Si&&(s=0);var o,c;if(!a)o=r[0],c=t[0];else if(!s)o=r[1],c=t[1];else{var u=s/a;o=u*(t[0]-r[0])+r[1],c=t[1]}return o-c}function fY(t,e,n,r){return r===void 0&&(r=Si),t.every(function(i){var a=wD(i,e),s=a<=0;return s===n||Ie(a)<=r})}function wB(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function Owe(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var c=o.left,u=o.top,f=o.width,h=o.height,g=[[c,u],[c,u+h]],v=[[c,u],[c+f,u]],b=[[c+f,u],[c+f,u+h]],x=[[c,u+h],[c+f,u+h]];if(fY([[c,u],[c+f,u],[c,u+h],[c+f,u+h]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var w=Bc(n,s,v,i),S=Bc(n,s,x,i),T=Bc(n,s,g,a),I=Bc(n,s,b,a),P=w.isBound&&S.isBound,O=w.isBound||S.isBound,D=T.isBound&&I.isBound,N=T.isBound||I.isBound,C=kp(w.offset,S.offset),R=kp(T.offset,I.offset),M=[0,0],V=!1,L=!1;return Ie(R)<Ie(C)?(M=[C,0],V=O,L=P):(M=[0,R],V=N,L=D),{isAllBound:L,isVerticalBound:O,isHorizontalBound:N,isBound:V,offset:M}}function Bc(t,e,n,r,i,a){var s=le(e,2),o=s[0],c=s[1],u=t[0],f=n[0],h=n[1],g=w1(h[1]-f[1]),v=w1(h[0]-f[0]),b=c,x=o,w=-o/c;if(v){if(!g){if(a&&!b)return{isBound:!1,offset:0};if(x){var P=(f[1]-u[1])/w+u[0];return wB(P,f[0],h[0],r,i)}else{var T=f[1]-u[1],I=Ie(T)<=(i||0);return{isBound:I,offset:I?T:0}}}}else{if(a&&!x)return{isBound:!1,offset:0};if(b){var S=w*(f[0]-u[0])+u[1];return wB(S,f[1],h[1],r,i)}else{var T=f[0]-u[0],I=Ie(T)<=(i||0);return{isBound:I,offset:I?T:0}}}return{isBound:!1,offset:0}}function hY(t,e,n){return e.map(function(r){var i=Owe(t,r),a=i.isBound,s=i.offset,o=i.isVerticalBound,c=i.isHorizontalBound,u=r.multiple,f=No({datas:n,distX:s[0],distY:s[1]}).map(function(h,g){return h*(u[g]?2/u[g]:0)});return{sign:u,isBound:a,isVerticalBound:o,isHorizontalBound:c,isSnap:!1,offset:f}})}function Dwe(t,e,n){var r,i=SD(t,e,[0,0],!1).map(function(g){return se(se({},g),{multiple:g.multiple.map(function(v){return Ie(v)*2})})}),a=hY(t,i,n),s=v1(a,0),o=v1(a,1),c=0,u=0,f=s.isVerticalBound||o.isVerticalBound,h=s.isHorizontalBound||o.isHorizontalBound;return(f||h)&&(r=le(rwe({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),2),c=r[0],u=r[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:h,offset:u}}}function Rwe(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function SD(t,e,n,r){var i=t.state,a=i.allMatrix,s=i.is3d,o=hf(a,100,100,s?4:3),c=vr(o,[0,0]);return Rwe(n,r).map(function(u){var f=le(u,3),h=f[0],g=f[1],v=f[2],b=[vr(o,g),vr(o,v)],x=Cwe(b),w=dY(c,b),S=w.vertical,T=w.horizontal,I=wD(c,b)<=0;return{multiple:h,centerSign:I,verticalSign:S,horizontalSign:T,lineConstants:x,line:[vr(e,g),vr(e,v)]}})}function SB(t,e,n,r){var i=r?t.map(function(a){return H0(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var s=wD(n,a)<=0;return!fY(e,a,s)})}function Mwe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return Ie(n[0]);if(!a)return Ie(n[1]);var s=a/i;return Ie((-s*n[0]+n[1])/Math.sqrt(Math.pow(s,2)+1))}function jwe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var s=a/i,o=-s*n[0]+n[1];return[-o/(s+1/s),o/(s*s+1)]}function zwe(t,e,n,r,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var o=a.left,c=a.top,u=a.width,f=a.height,h=o-r[0],g=o+u-r[0],v=c-r[1],b=c+f-r[1],x=[[h,v],[g,v],[h,b],[g,b]],w=vr(n,[0,0]);if(!SB(n,x,w,0))return[];var S=[],T=x.map(function(I){return[Ua(I),Hn([0,0],I)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(I){var P=Hn([0,0],jwe(I)),O=Mwe(I);S.push.apply(S,Re([],le(T.filter(function(D){var N=le(D,1),C=N[0];return C&&O<=C}).map(function(D){var N=le(D,2),C=N[0],R=N[1],M=Math.acos(C?O/C:0),V=R+M,L=R-M;return[s+V-P,s+L-P]}).reduce(function(D,N){return D.push.apply(D,Re([],le(N),!1)),D},[]).filter(function(D){return!SB(e,x,w,D)}).map(function(D){return lt(D*180/Math.PI,Si)})),!1))}),S}function Lwe(t){var e=t.props.innerBounds,n=Lh();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,s=r.pos3,o=r.pos4,c=[i,a,s,o],u=vr(c,[0,0]),f=e.left,h=e.top,g=e.width,v=e.height,b=[[f,h],[f,h+v]],x=[[f,h],[f+g,h]],w=[[f+g,h],[f+g,h+v]],S=[[f,h+v],[f+g,h+v]],T=SD(t,c,[0,0],!1),I=[],P=[];return T.forEach(function(O){var D=O.line,N=O.lineConstants,C=dY(u,D),R=C.horizontal,M=C.vertical,V=Bc(D,N,x,M,1,!0),L=Bc(D,N,S,M,1,!0),z=Bc(D,N,b,R,1,!0),K=Bc(D,N,w,R,1,!0);V.isBound&&!n.top&&(I.push(h),n.top=!0),L.isBound&&!n.bottom&&(I.push(h+v),n.bottom=!0),z.isBound&&!n.left&&(P.push(f),n.left=!0),K.isBound&&!n.right&&(P.push(f+g),n.right=!0)}),{boundMap:n,horizontal:I,vertical:P}}function Vwe(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(Ie(i)<ir&&(i=0),Ie(a)<ir&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var s=a/i,o=t[1]-s*t[0];if(r){var c=s*(e[0]+n)+o;return[n,c-e[1]]}else{var u=(e[1]+n-o)/s;return[u-e[0],n]}}function DN(t,e,n,r,i){var a=Vwe(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var s=fl(t,e),o=fl(a,t),c=fl(a,e),u=o>s||c>s,f=le(No({datas:i,distX:a[0],distY:a[1]}),2),h=f[0],g=f[1];return{offset:[h,g],isOutside:u}}function y1(t,e){return t.isBound?t.offset:e.isSnap?ON(e).offset:0}function Bwe(t,e,n,r,i){var a=le(e,2),s=a[0],o=a[1],c=le(n,2),u=c[0],f=c[1],h=le(r,2),g=h[0],v=h[1],b=le(i,2),x=b[0],w=b[1],S=-x,T=-w;if(t&&s&&o){S=0,T=0;var I=[];if(u&&f?I.push([0,w],[x,0]):u?I.push([x,0]):f?I.push([0,w]):g&&v?I.push([0,w],[x,0]):g?I.push([x,0]):v&&I.push([0,w]),I.length){I.sort(function(N,C){return Ua(tt([s,o],N))-Ua(tt([s,o],C))});var P=I[0];if(P[0]&&Ie(s)>ir)S=-P[0],T=o*Ie(s+S)/Ie(s)-o;else if(P[1]&&Ie(o)>ir){var O=o;T=-P[1],S=s*Ie(o+T)/Ie(O)-s}if(t&&f&&u)if(Ie(S)>ir&&Ie(S)<Ie(x)){var D=Ie(x)/Ie(S);S*=D,T*=D}else if(Ie(T)>ir&&Ie(T)<Ie(w)){var D=Ie(w)/Ie(T);S*=D,T*=D}else S=kp(-x,S),T=kp(-w,T)}}else S=s||u?-x:0,T=o||f?-w:0;return[S,T]}function Fwe(t,e,n,r,i,a){if(!sg(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=TD(a.absolutePoses,[e,n]),o=Ba(s),c=o.left,u=o.right,f=o.top,h=o.bottom,g={horizontal:s.map(function(K){return K[1]}),vertical:s.map(function(K){return K[0]})},v=bD(t.props.snapDirections),b=xD(v,{left:c,right:u,top:f,bottom:h,center:(c+u)/2,middle:(f+h)/2}),x=v_(t,i,b,g),w=x.vertical,S=x.horizontal,T=Dwe(t,s,a),I=T.vertical,P=T.horizontal,O=w.isSnap,D=S.isSnap,N=w.isBound||I.isBound,C=S.isBound||P.isBound,R=kp(w.offset,I.offset),M=kp(S.offset,P.offset),V=le(Bwe(r,[e,n],[N,C],[O,D],[R,M]),2),L=V[0],z=V[1];return[{isBound:N,isSnap:O,offset:L},{isBound:C,isSnap:D,offset:z}]}function v_(t,e,n,r){r===void 0&&(r=n);var i=yD(g_(t),r.vertical,r.horizontal),a=i.horizontal,s=i.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:m_(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),c=o.horizontal,u=o.vertical,f=y1(a[0],c),h=y1(s[0],u),g=Ie(f),v=Ie(h);return{horizontal:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:g,bounds:a,snap:c},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:v,bounds:s,snap:u}}}function _B(t,e,n,r,i,a,s){s===void 0&&(s=[1,1]);var o=yD(e,n,r),c=o.horizontal,u=o.vertical,f=cY(t,n,r,[],[],i,a,s),h=f.horizontal,g=f.vertical,v=y1(c[0],h),b=y1(u[0],g),x=Ie(v),w=Ie(b);return{horizontal:{isBound:c[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:v,dist:x,bounds:c,snap:h},vertical:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:b,dist:w,bounds:u,snap:g}}}function $we(t,e,n,r){var i=Hn(t,e)/Math.PI*180,a=n.vertical,s=a.isBound,o=a.isSnap,c=a.dist,u=n.horizontal,f=u.isBound,h=u.isSnap,g=u.dist,v=i%180,b=v<3||v>177,x=v>87&&v<93;return g<c&&(s||o&&!x&&(!r||!b))?"vertical":f||h&&!b&&(!r||!x)?"horizontal":""}function Uwe(t,e,n,r,i,a){return n.map(function(s){var o=le(s,2),c=o[0],u=o[1],f=vr(e,c),h=vr(e,u),g=r?qwe(t,f,h,i):v_(t,i,{vertical:[h[0]],horizontal:[h[1]]}),v=g.horizontal,b=v.offset,x=v.isBound,w=v.isSnap,S=g.vertical,T=S.offset,I=S.isBound,P=S.isSnap,O=tt(u,c);if(!T&&!b)return{isBound:I||x,isSnap:P||w,sign:O,offset:[0,0]};var D=$we(f,h,g,r);if(!D)return{sign:O,isBound:!1,isSnap:!1,offset:[0,0]};var N=D==="vertical",C=[0,0];return!r&&Ie(u[0])===1&&Ie(u[1])===1&&c[0]!==u[0]&&c[1]!==u[1]?C=No({datas:a,distX:-T,distY:-b}):C=DN(f,h,-(N?T:b),N,a).offset,C=C.map(function(R,M){return R*(O[M]?2/O[M]:0)}),{sign:O,isBound:N?I:x,isSnap:N?P:w,offset:C}})}function EB(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function qwe(t,e,n,r){var i=wwe(t,e,n),a=i.horizontal,s=i.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Iwe(t,e,n),c=o.horizontal,u=o.vertical,f=EB(a,c),h=EB(s,u),g=Ie(f),v=Ie(h);return{horizontal:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:g},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:h,dist:v}}}function Gwe(t,e,n,r,i){var a=[-n[0],-n[1]],s=t.state,o=s.width,c=s.height,u=t.props.bounds,f=1/0,h=1/0;if(u){var g=[[n[0],-n[1]],[-n[0],n[1]]],v=u.left,b=v===void 0?-1/0:v,x=u.top,w=x===void 0?-1/0:x,S=u.right,T=S===void 0?1/0:S,I=u.bottom,P=I===void 0?1/0:I;g.forEach(function(O){var D=O[0]!==a[0],N=O[1]!==a[1],C=vr(e,O),R=Hn(r,C)*360/Math.PI;if(N){var M=C.slice();(Ie(R-360)<2||Ie(R-180)<2)&&(M[1]=r[1]);var V=DN(r,M,(r[1]<C[1]?P:w)-C[1],!1,i),L=le(V.offset,2),z=L[1],K=V.isOutside;isNaN(z)||(h=c+(K?1:-1)*Ie(z))}if(D){var M=C.slice();(Ie(R-90)<2||Ie(R-270)<2)&&(M[0]=r[0]);var Y=DN(r,M,(r[0]<C[0]?T:b)-C[0],!0,i),G=le(Y.offset,1),X=G[0],J=Y.isOutside;isNaN(X)||(f=o+(J?1:-1)*Ie(X))}})}return{maxWidth:f,maxHeight:h}}var pi={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,s=t.getState(),o=s.dragInfo,c=s.beforeOrigin;if(r||!i||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var f=Ua(u),h=Hn(u,[0,0]);return[e.createElement("div",{className:Ze("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(h,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,s=a.gestos,o=a.style;if(s.draggable)return!1;s.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],ff(t,e),p_(t,e,"translate"),u1e(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var c=ht(t,e,se({set:function(f){n.startValue=f}},h_(t,e))),u=r||Be(t,"onDragStart",c);return u!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?c:!1},drag:function(t,e){if(e){d_(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,s=e.deltaOffset,o=e.useSnap,c=e.isRequest,u=e.isGroup,f=e.parentThrottleDrag,h=e.distX,g=e.distY,v=n.isDrag,b=n.prevDist,x=n.prevBeforeDist,w=n.startValue;if(v){s&&(h+=s[0],g+=s[1]);var S=t.props,T=S.parentMoveable,I=u?0:S.throttleDrag||f||0,P=r?0:S.throttleDragRotate||0,O=0,D=!1,N=!1,C=!1,R=!1;if(!r&&P>0&&(h||g)){var M=S.startDragRotate||0,V=lt(M+Hn([0,0],[h,g])*180/Math.PI,P)-M,L=g*Math.abs(Math.cos((V-90)/180*Math.PI)),z=h*Math.abs(Math.cos(V/180*Math.PI)),K=Ua([z,L]);O=V*Math.PI/180,h=K*Math.cos(O),g=K*Math.sin(O)}if(!a&&!r&&!i){var Y=le(Fwe(t,h,g,P,!o&&c||s,n),2),G=Y[0],X=Y[1];D=G.isSnap,N=G.isBound,C=X.isSnap,R=X.isBound;var J=G.offset,ne=X.offset;h+=J,g+=ne}var Q=Pt(WW({datas:n,distX:h,distY:g}),w),$=Pt(nwe({datas:n,distX:h,distY:g}),w);rB($,Si),rB(Q,Si),P||(!D&&!N&&($[0]=lt($[0],I),Q[0]=lt(Q[0],I)),!C&&!R&&($[1]=lt($[1],I),Q[1]=lt(Q[1],I)));var Z=tt(Q,w),ee=tt($,w),W=tt(ee,b),ue=tt(Z,x);n.prevDist=ee,n.prevBeforeDist=Z,n.passDelta=W,n.passDist=ee;var ie=n.left+Z[0],oe=n.top+Z[1],Se=n.right-Z[0],ae=n.bottom-Z[1],Te=f_(n,"translate(".concat($[0],"px, ").concat($[1],"px)"),"translate(".concat(ee[0],"px, ").concat(ee[1],"px)"));if(mD(e,Te),t.state.dragInfo.dist=r?[0,0]:ee,!(!r&&!T&&W.every(function(ke){return!ke})&&ue.some(function(ke){return!ke}))){var he=t.state,te=he.width,Pe=he.height,be=ht(t,e,se({transform:Te,dist:ee,delta:W,translate:$,beforeDist:Z,beforeDelta:ue,beforeTranslate:Q,left:ie,top:oe,right:Se,bottom:ae,width:te,height:Pe,isPinch:a},bi({transform:Te},e)));return!r&&Be(t,"onDrag",be),be}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,se(se({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=pa(t,e,{});return!n&&Be(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var c=dk(t,this,"dragStart",[a||0,s||0],e,!1,"draggable"),u=c.childEvents,f=c.eventParams,h=se(se({},o),{targets:t.props.targets,events:f}),g=Be(t,"onDragGroupStart",h);i.isDrag=g!==!1;var v=(r=(n=u[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[v[0]%1,v[1]%1],i.isDrag?o:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,se(se({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=dk(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var s=se({targets:t.props.targets,events:a},r);return Be(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=dk(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Be(t,"onDragGroupEnd",pa(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(s){return a=s.useSnap,{datas:e,useSnap:a}},request:function(s){return"x"in s?r=s.x-n.left:"deltaX"in s&&(r+=s.deltaX),"y"in s?i=s.y-n.top:"deltaY"in s&&(i+=s.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function pY(t,e){var n=vr(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function Hwe(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=[i/2*(1+e[0]),a/2*(1+e[1])],c=An(n,o,s),u=[0,0];return{fixedPosition:c,fixedDirection:e,fixedOffset:u}}function gY(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=uwe(e,i,a),c=An(n,e,s),u=[i?0:e[0],a?0:e[1]];return{fixedPosition:c,fixedDirection:o,fixedOffset:u}}var TB=CD("resizable"),RN={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:nY("resizable"),dragControlCondition:TB,viewClassName:kD("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,s=e.parentDirection,o=e.parentGesto,c=e.datas,u=e.parentFixedDirection,f=e.parentEvent,h=CY(s,i,r,c),g=t.state,v=g.target,b=g.width,x=g.height,w=g.gestos;if(!h||!v||w.resizable)return!1;w.resizable=o||t.controlGesto,!i&&ff(t,e),c.datas={},c.direction=h,c.startOffsetWidth=b,c.startOffsetHeight=x,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=g.inlineCSSWidth||g.cssWidth,c.startHeight=g.inlineCSSHeight||g.cssHeight,c.maxSize=[1/0,1/0],a||(c.minSize=[g.minOffsetWidth,g.minOffsetHeight],c.maxSize=[g.maxOffsetWidth,g.maxOffsetHeight]);var S=t.props.transformOrigin||"% %";c.transformOrigin=$i(S)?S.split(" "):S,c.startOffsetMatrix=g.offsetMatrix,c.startTransformOrigin=g.transformOrigin,c.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!h[0]&&!h[1]||h[0]||!h[1];function T(R){c.ratio=R&&isFinite(R)?R:0}c.startPositions=qa(t.state);function I(R){var M=pY(c.startPositions,R);c.fixedDirection=M.fixedDirection,c.fixedPosition=M.fixedPosition,c.fixedOffset=M.fixedOffset}function P(R){var M=gY(t.state,R);c.fixedDirection=M.fixedDirection,c.fixedPosition=M.fixedPosition,c.fixedOffset=M.fixedOffset}function O(R){c.minSize=[Jt("".concat(R[0]),0)||0,Jt("".concat(R[1]),0)||0]}function D(R){var M=[R[0]||1/0,R[1]||1/0];(!_p(M[0])||isFinite(M[0]))&&(M[0]=Jt("".concat(M[0]),0)||1/0),(!_p(M[1])||isFinite(M[1]))&&(M[1]=Jt("".concat(M[1]),0)||1/0),c.maxSize=M}T(b/x),I(u||[-h[0],-h[1]]),c.setFixedDirection=I,c.setFixedPosition=P,c.setMin=O,c.setMax=D;var N=ht(t,e,{direction:h,startRatio:c.ratio,set:function(R){var M=le(R,2),V=M[0],L=M[1];c.startWidth=V,c.startHeight=L},setMin:O,setMax:D,setRatio:T,setFixedDirection:I,setFixedPosition:P,setOrigin:function(R){c.transformOrigin=R},dragStart:pi.dragStart(t,new Tp().dragStart([0,0],e))}),C=f||Be(t,"onResizeStart",N);return c.startFixedDirection=c.fixedDirection,c.startFixedPosition=c.fixedPosition,C!==!1&&(c.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:h}),c.isResize?N:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,c=e.parentDist,u=e.useSnap,f=e.isRequest,h=e.isGroup,g=e.parentEvent,v=e.resolveMatrix,b=r.isResize,x=r.transformOrigin,w=r.startWidth,S=r.startHeight,T=r.prevWidth,I=r.prevHeight,P=r.minSize,O=r.maxSize,D=r.ratio,N=r.startOffsetWidth,C=r.startOffsetHeight,R=r.isWidth;if(!b)return;if(v){var M=t.state.is3d,V=r.startOffsetMatrix,L=r.startTransformOrigin,z=M?4:3,K=Qv(g1(e)),Y=Math.sqrt(K.length);z!==Y&&(K=ks(K,Y,z));var G=Q0(V,K,L,z),X=hf(G,N,C,z);r.startPositions=X,r.nextTargetMatrix=K,r.nextAllMatrix=G}var J=Yd(t.props,"resizable"),ne=J.resizeFormat,Q=J.throttleResize,$=Q===void 0?i?0:1:Q,Z=J.parentMoveable,ee=J.keepRatioFinally,W=r.direction,ue=W,ie=0,oe=0;!W[0]&&!W[1]&&(ue=[1,1]);var Se=D&&(s??J.keepRatio)||!1;function ae(){var ct=r.fixedDirection,xt=RY(ue,Se,r,e);ie=xt.distWidth,oe=xt.distHeight;var nn=ue[0]-ct[0]||Se?Math.max(N+ie,Si):N,gn=ue[1]-ct[1]||Se?Math.max(C+oe,Si):C;return Se&&N&&C&&(R?gn=nn/D:nn=gn*D),[nn,gn]}var Te=le(ae(),2),he=Te[0],te=Te[1];g||(r.setFixedDirection(r.fixedDirection),Be(t,"onBeforeResize",ht(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(ct){var xt;return r.setFixedDirection(ct),xt=le(ae(),2),he=xt[0],te=xt[1],[he,te]},setFixedPosition:function(ct){var xt;return r.setFixedPosition(ct),xt=le(ae(),2),he=xt[0],te=xt[1],[he,te]},boundingWidth:he,boundingHeight:te,setSize:function(ct){var xt;xt=le(ct,2),he=xt[0],te=xt[1]}},!0)));var Pe=o;o||(!i&&a?Pe=pwe(t,[0,0]):Pe=r.fixedPosition);var be=[0,0];a||(be=l1e(t,he,te,W,Pe,!u&&f,r)),c&&(!c[0]&&(be[0]=0),!c[1]&&(be[1]=0));function ke(){var ct;ne&&(ct=le(ne([he,te]),2),he=ct[0],te=ct[1]),he=lt(he,$),te=lt(te,$)}if(Se){ue[0]&&ue[1]&&be[0]&&be[1]&&(Ie(be[0])>Ie(be[1])?be[1]=0:be[0]=0);var Oe=!be[0]&&!be[1];Oe&&ke(),ue[0]&&!ue[1]||be[0]&&!be[1]||Oe&&R?(he+=be[0],te=he/D):(!ue[0]&&ue[1]||!be[0]&&be[1]||Oe&&!R)&&(te+=be[1],he=te*D)}else he+=be[0],te+=be[1],he=Math.max(0,he),te=Math.max(0,te);n=le(sW([he,te],P,O,Se?D:!1),2),he=n[0],te=n[1],ke(),Se&&(h||ee)&&(R?te=he/D:he=te*D),ie=he-N,oe=te-C;var De=[ie-T,oe-I];r.prevWidth=ie,r.prevHeight=oe;var Ye=hwe(t,he,te,Pe,x,r);if(!(!Z&&De.every(function(ct){return!ct})&&Ye.every(function(ct){return!ct}))){var Ve=pi.drag(t,X0(e,t.state,Ye,!!a,!1,"draggable")),it=Ve.transform,Ft=w+ie,Le=S+oe,st=ht(t,e,se({width:Ft,height:Le,offsetWidth:Math.round(he),offsetHeight:Math.round(te),startRatio:D,boundingWidth:he,boundingHeight:te,direction:W,dist:[ie,oe],delta:De,isPinch:!!a,drag:Ve},NY({style:{width:"".concat(Ft,"px"),height:"".concat(Le,"px")},transform:it},Ve,e)));return!g&&Be(t,"onResize",st),st}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var c=t.state,u=c.width,f=c.height,h=u-(i+s),g=f-(a+o),v=Ie(h)>3,b=Ie(g)>3;if(v&&(n.startWidth+=h,n.startOffsetWidth+=h,n.prevWidth+=h),b&&(n.startHeight+=g,n.startOffsetHeight+=g,n.prevHeight+=g),v||b)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=pa(t,e,{});return!r&&Be(t,"onResizeEnd",i),i}},dragGroupControlCondition:TB,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,se(se({},e),{isGroup:!0}));if(!r)return!1;var i=_s(t,"resizable",e),a=n.startOffsetWidth,s=n.startOffsetHeight;function o(){var v=n.minSize;i.forEach(function(b){var x=b.datas,w=x.minSize,S=x.startOffsetWidth,T=x.startOffsetHeight,I=a*(S?w[0]/S:0),P=s*(T?w[1]/T:0);v[0]=Math.max(v[0],I),v[1]=Math.max(v[1],P)})}function c(){var v=n.maxSize;i.forEach(function(b){var x=b.datas,w=x.maxSize,S=x.startOffsetWidth,T=x.startOffsetHeight,I=a*(S?w[0]/S:0),P=s*(T?w[1]/T:0);v[0]=Math.min(v[0],I),v[1]=Math.min(v[1],P)})}var u=hl(t,this,"dragControlStart",e,function(v,b){return m1(t,v,n,b)});o(),c();var f=function(v){r.setFixedDirection(v),u.forEach(function(b,x){b.setFixedDirection(v),m1(t,b.moveable,n,i[x])})};n.setFixedDirection=f;var h=se(se({},r),{targets:t.props.targets,events:u.map(function(v){return se(se({},v),{setMin:function(b){v.setMin(b),o()},setMax:function(b){v.setMax(b),c()}})}),setFixedDirection:f,setMin:function(v){r.setMin(v),o()},setMax:function(v){r.setMax(v),c()}}),g=Be(t,"onResizeGroupStart",h);return n.isResize=g!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Yd(t.props,"resizable");b_(t,"onBeforeResize",function(v){Be(t,"onBeforeResizeGroup",ht(t,e,se(se({},v),{targets:r.targets}),!0))});var i=this.dragControl(t,se(se({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,s=i.boundingHeight,o=i.dist,c=r.keepRatio,u=[a/(a-o[0]),s/(s-o[1])],f=n.fixedPosition,h=hl(t,this,"dragControl",e,function(v,b){var x=le(si(K0(t.rotation/180*Math.PI,3),[b.datas.originalX*u[0],b.datas.originalY*u[1],1],3),2),w=x[0],S=x[1];return se(se({},b),{parentDist:null,parentScale:u,dragClient:Pt(f,[w,S]),parentKeepRatio:c})}),g=se({targets:r.targets,events:h},i);return Be(t,"onResizeGroup",g),g}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=hl(t,this,"dragControlEnd",e),a=pa(t,e,{targets:t.props.targets,events:i});return Be(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(s){var o;return i=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(o=s?.horizontal)!==null&&o!==void 0?o:!0,useSnap:i}},request:function(s){return"offsetWidth"in s?n=s.offsetWidth-a.offsetWidth:"deltaWidth"in s&&(n+=s.deltaWidth),"offsetHeight"in s?r=s.offsetHeight-a.offsetHeight:"deltaHeight"in s&&(r+=s.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:s.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function fk(t,e,n,r,i){var a=t.props.groupable,s=t.state,o=s.is3d?4:3,c=e.origin,u=An(t.state.rootMatrix,tt([c[0],c[1]],a?[0,0]:[s.left,s.top]),o),f=Pt([i.left,i.top],u);e.startAbsoluteOrigin=f,e.prevDeg=Hn(f,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=fl(f,[n,r])}function bw(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,s=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++s:a<t&&a<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function hk(t,e,n,r){return bw(Hn(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function pk(t,e,n,r,i,a){var s=t.props.throttleRotate,o=s===void 0?0:s,c=n.prevSnapDeg,u=0,f=!1;if(a){var h=o1e(t,e,r,i+r);f=h.isSnap,u=i+h.dist}f||(u=lt(i+r,o));var g=u-i;return n.prevSnapDeg=g,[g-c,g,u]}function mY(t,e,n){var r=le(e,4),i=r[0],a=r[1],s=r[2],o=r[3];if(t==="none")return[];if(cr(t))return t.map(function(w){return mY(w,[i,a,s,o],n)[0]});var c=le((t||"top").split("-"),2),u=c[0],f=c[1],h=[i,a];u==="left"?h=[s,i]:u==="right"?h=[a,o]:u==="bottom"&&(h=[o,s]);var g=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2],v=AY(h,n);if(f){var b=f==="top"||f==="left",x=u==="bottom"||u==="left";g=h[b&&!x||!b&&x?0:1]}return[[g,v]]}function MN(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(mr(n,Ze("rotation-control"))||t.props.rotateAroundControls&&mr(n,Ze("around-control"))||mr(n,Ze("control"))&&mr(n,Ze("rotatable")))return!0;var r=t.props.rotationTarget;return r?ID(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var Kwe=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Wwe={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Kwe],viewClassName:function(t){return t.isDragging("rotatable")?Ze("view-rotation-dragging"):""},render:function(t,e){var n=Yd(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,c=n.resolveAblesWithRotatable,u=t.getState(),f=u.renderPoses,h=u.direction;if(!r)return null;var g=mY(i,f,h),v=[];if(g.forEach(function(S,T){var I=le(S,2),P=I[0],O=I[1];v.push(e.createElement("div",{key:"rotation".concat(T),className:Ze("rotation"),style:{transform:"translate(-50%) translate(".concat(P[0],"px, ").concat(P[1],"px) rotate(").concat(O,"rad)")}},e.createElement("div",{className:Ze("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Ze("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var b=El(c||{}),x={};b.forEach(function(S){c[S].forEach(function(T){x[T]=S})});var w=[];cr(s)&&(w=s.map(function(S){var T=x[S];return{data:T?{resolve:T}:{},classNames:T?["move"]:[],dir:S}})),v.push.apply(v,Re([],le(JW(t,"rotatable",w,e)),!1))}return o&&v.push.apply(v,Re([],le(iY(t,e)),!1)),v},dragControlCondition:MN,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=e.parentRotate,c=e.parentFlag,u=e.isPinch,f=e.isRequest,h=t.state,g=h.target,v=h.left,b=h.top,x=h.direction,w=h.beforeDirection,S=h.targetTransform,T=h.moveableClientRect,I=h.offsetMatrix,P=h.targetMatrix,O=h.allMatrix,D=h.width,N=h.height;if(!f&&!g)return!1;var C=t.getRect();i.rect=C,i.transform=S,i.left=v,i.top=b;var R=function(ue){var ie=gY(t.state,ue);i.fixedDirection=ie.fixedDirection,i.fixedOffset=ie.fixedOffset,i.fixedPosition=ie.fixedPosition,$&&$.setFixedPosition(ue)},M=function(ue){var ie=Hwe(t.state,ue);i.fixedDirection=ie.fixedDirection,i.fixedOffset=ie.fixedOffset,i.fixedPosition=ie.fixedPosition,$&&$.setFixedDirection(ue)},V=a,L=s;if(f||u||c){var z=o||0;i.beforeInfo={origin:C.beforeOrigin,prevDeg:z,defaultDeg:z,prevSnapDeg:0,startDist:0},i.afterInfo=se(se({},i.beforeInfo),{origin:C.origin}),i.absoluteInfo=se(se({},i.beforeInfo),{origin:C.origin,startValue:z})}else{var K=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(K){var Y=K.getAttribute("data-direction")||"",G=ewe[Y];if(G){i.isControl=!0,i.isAroundControl=mr(K,Ze("around-control")),i.controlDirection=G;var X=K.getAttribute("data-resolve");X&&(i.resolveAble=X);var J=_1e(h.rootMatrix,h.renderPoses,T);n=le(vr(J,G),2),V=n[0],L=n[1]}}i.beforeInfo={origin:C.beforeOrigin},i.afterInfo={origin:C.origin},i.absoluteInfo={origin:C.origin,startValue:C.rotation};var ne=R;R=function(ue){var ie=h.is3d?4:3,oe=le(Pt(OW(P,ie),ue),2),Se=oe[0],ae=oe[1],Te=si(I,Hd([Se,ae],ie)),he=si(O,Hd([ue[0],ue[1]],ie));ne(ue);var te=h.posDelta;i.beforeInfo.origin=tt(Te,te),i.afterInfo.origin=tt(he,te),i.absoluteInfo.origin=tt(he,te),fk(t,i.beforeInfo,V,L,T),fk(t,i.afterInfo,V,L,T),fk(t,i.absoluteInfo,V,L,T)},M=function(ue){var ie=vr([[0,0],[D,0],[0,N],[D,N]],ue);R(ie)}}i.startClientX=V,i.startClientY=L,i.direction=x,i.beforeDirection=w,i.startValue=0,i.datas={},p_(t,e,"rotate");var Q=!1,$=!1;if(i.isControl&&i.resolveAble){var Z=i.resolveAble;Z==="resizable"&&($=RN.dragControlStart(t,se(se({},new Tp("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}$||(Q=pi.dragStart(t,new Tp().dragStart([0,0],e))),R(E1e(t));var ee=ht(t,e,se(se({set:function(ue){i.startValue=ue*Math.PI/180},setFixedDirection:M,setFixedPosition:R},h_(t,e)),{dragStart:Q,resizeStart:$})),W=Be(t,"onRotateStart",ee);return i.isRotate=W!==!1,h.snapRenderInfo={request:e.isRequest},i.isRotate?ee:!1},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.clientDistX,o=e.clientDistY,c=e.parentRotate,u=e.parentFlag,f=e.isPinch,h=e.groupDelta,g=e.resolveMatrix,v=a.beforeDirection,b=a.beforeInfo,x=a.afterInfo,w=a.absoluteInfo,S=a.isRotate,T=a.startValue,I=a.rect,P=a.startClientX,O=a.startClientY;if(S){d_(t,e,"rotate");var D=twe(e),N=v*D,C=t.props.parentMoveable,R=0,M,V,L=0,z,K,Y=0,G,X,J=180/Math.PI*T,ne=w.startValue,Q=!1,$=P+s,Z=O+o;if(!u&&"parentDist"in e){var ee=e.parentDist;M=ee,z=ee,G=ee}else f||u?(M=bw(c,v,b),z=bw(c,N,x),G=bw(c,N,w)):(M=hk($,Z,v,b),z=hk($,Z,N,x),G=hk($,Z,N,w),Q=!0);if(V=J+M,K=J+z,X=ne+G,Be(t,"onBeforeRotate",ht(t,e,{beforeRotation:V,rotation:K,absoluteRotation:X,setRotation:function(Pe){z=Pe-J,M=z,G=z}},!0)),n=le(pk(t,I,b,M,J,Q),3),R=n[0],M=n[1],V=n[2],r=le(pk(t,I,x,z,J,Q),3),L=r[0],z=r[1],K=r[2],i=le(pk(t,I,w,G,ne,Q),3),Y=i[0],G=i[1],X=i[2],!(!Y&&!L&&!R&&!C&&!g)){var W=f_(a,"rotate(".concat(K,"deg)"),"rotate(".concat(z,"deg)"));g&&(a.fixedPosition=vD(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var ue=fwe(t,z,a),ie=tt(Pt(h||[0,0],ue),a.prevInverseDist||[0,0]);a.prevInverseDist=ue,a.requestValue=null;var oe=XW(t,W,ie,f,e),Se=oe,ae=fl([$,Z],w.startAbsoluteOrigin)-w.startDist,Te=void 0;if(a.resolveAble==="resizable"){var he=RN.dragControl(t,se(se({},X0(e,t.state,[e.deltaX,e.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:ae}));he&&(Te=he,Se=NY(Se,he,e))}var te=ht(t,e,se(se({delta:L,dist:z,rotate:K,rotation:K,beforeDist:M,beforeDelta:R,beforeRotate:V,beforeRotation:V,absoluteDist:G,absoluteDelta:Y,absoluteRotate:X,absoluteRotation:X,isPinch:!!f,resize:Te},oe),Se));return Be(t,"onRotate",te),te}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=pa(t,e,{});return Be(t,"onRotateEnd",r),r}},dragGroupControlCondition:MN,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var c=hl(t,this,"dragControlStart",e,function(h,g){var v=h.state,b=v.left,x=v.top,w=v.beforeOrigin,S=Pt(tt([b,x],[i,a]),tt(w,s));return g.datas.startGroupClient=S,g.datas.groupClient=S,se(se({},g),{parentRotate:0})}),u=se(se({},o),{targets:t.props.targets,events:c}),f=Be(t,"onRotateGroupStart",u);return n.isRotate=f!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){b_(t,"onBeforeRotate",function(u){Be(t,"onBeforeRotateGroup",ht(t,e,se(se({},u),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,s=a/180*Math.PI,o=hl(t,this,"dragControl",e,function(u,f){var h=f.datas.startGroupClient,g=le(f.datas.groupClient,2),v=g[0],b=g[1],x=le(H0(h,s*i),2),w=x[0],S=x[1],T=[w-v,S-b];return f.datas.groupClient=[w,S],se(se({},f),{parentRotate:a,groupDelta:T})});t.rotation=i*r.beforeRotation;var c=se({targets:t.props.targets,events:o,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},r);return Be(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=hl(t,this,"dragControlEnd",e),a=pa(t,e,{targets:t.props.targets,events:i});return Be(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Ywe(t,e){var n,r=t.direction,i=t.classNames,a=t.size,s=t.pos,o=t.zoom,c=t.key,u=r==="horizontal",f=u?"Y":"X";return e.createElement("div",{key:c,className:i.join(" "),style:(n={},n[u?"width":"height"]="".concat(a),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(o,")"),n)})}function _D(t,e){return Ywe(se(se({},t),{classNames:Re([Ze("line","guideline",t.direction)],le(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(lt(n,.1),"px")})}),e)}function AB(t,e,n,r,i,a,s,o){var c=t.props.zoom;return n.map(function(u,f){var h=u.type,g=u.pos,v=[0,0];return v[s]=r,v[s?0:1]=-i+g,_D({key:"".concat(e,"TargetGuideline").concat(f),classNames:[Ze("target","bold",h)],posValue:v,sizeValue:a,zoom:c,direction:e},o)})}function kB(t,e,n,r,i,a){var s=t.props,o=s.zoom,c=s.isDisplayInnerSnapDigit,u=e==="horizontal"?su:ou,f=i[u.start],h=i[u.end];return n.filter(function(g){var v=g.hide,b=g.elementRect;if(v)return!1;if(c&&b){var x=b.rect;if(x[u.start]<=f&&h<=x[u.end])return!1}return!0}).map(function(g,v){var b=g.pos,x=g.size,w=g.element,S=g.className,T=[-r[0]+b[0],-r[1]+b[1]];return _D({key:"".concat(e,"-default-guideline-").concat(v),classNames:w?[Ze("bold"),S]:[Ze("normal"),S],direction:e,posValue:T,sizeValue:x,zoom:o},a)})}function Wm(t,e,n,r,i,a,s,o){var c,u=t.props,f=u.snapDigit,h=f===void 0?0:f,g=u.isDisplaySnapDigit,v=g===void 0?!0:g,b=u.snapDistFormat,x=b===void 0?function(O,D){return O}:b,w=u.zoom,S=e==="horizontal"?"X":"Y",T=e==="vertical"?"height":"width",I=Math.abs(i),P=v?parseFloat(I.toFixed(h)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Ze("guideline-group",e),style:(c={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},c[T]="".concat(I,"px"),c)},_D({direction:e,classNames:[Ze(n),s],size:"100%",posValue:[0,0],sizeValue:I,zoom:w},o),o.createElement("div",{className:Ze("size-value","gap"),style:{transform:"translate".concat(S,"(-50%) scale(").concat(w,")")}},P>0?x(P,e):""))}function Xwe(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,s=i?su:ou,o=n[s.start],c=n[s.end];return PY(e,function(u){return u.pos[i]}).map(function(u){var f=[],h=[],g=[];return u.forEach(function(v){var b,x,w=v.element,S=v.elementRect.rect;if(S[s.end]<o)f.push(v);else if(c<S[s.start])h.push(v);else if(S[s.start]<=o&&c<=S[s.end]&&r){var T=v.pos,I={element:w,rect:se(se({},S),(b={},b[s.end]=S[s.start],b))},P={element:w,rect:se(se({},S),(x={},x[s.start]=S[s.end],x))},O=[0,0],D=[0,0];O[i]=T[i],O[a]=T[a],D[i]=T[i],D[a]=T[a]+v.size,f.push({type:t,pos:O,size:0,elementRect:I,direction:"",elementDirection:"end"}),h.push({type:t,pos:D,size:0,elementRect:P,direction:"",elementDirection:"start"})}}),f.sort(function(v,b){return b.pos[a]-v.pos[a]}),h.sort(function(v,b){return v.pos[a]-b.pos[a]}),{total:u,start:f,end:h,inner:g}})}function Qwe(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var c=e.filter(function(w){return w.type===o}),u=o==="vertical"?1:0,f=u?0:1,h=Xwe(o,c,r,a),g=u?ou:su,v=u?su:ou,b=r[g.start],x=r[g.end];h.forEach(function(w){var S=w.total,T=w.start,I=w.end,P=w.inner,O=n[f]+S[0].pos[f]-r[v.start],D=r;T.forEach(function(N){var C=N.elementRect.rect,R=D[g.start]-C[g.end];if(R>0){var M=[0,0];M[u]=n[u]+D[g.start]-b-R,M[f]=O,s.push(Wm(t,o,"dashed",s.length,R,M,N.className,i))}D=C}),D=r,I.forEach(function(N){var C=N.elementRect.rect,R=C[g.start]-D[g.end];if(R>0){var M=[0,0];M[u]=n[u]+D[g.end]-b,M[f]=O,s.push(Wm(t,o,"dashed",s.length,R,M,N.className,i))}D=C}),P.forEach(function(N){var C=N.elementRect.rect,R=b-C[g.start],M=C[g.end]-x,V=[0,0],L=[0,0];V[u]=n[u]-R,V[f]=O,L[u]=n[u]+x-b,L[f]=O,s.push(Wm(t,o,"dashed",s.length,R,V,N.className,i)),s.push(Wm(t,o,"dashed",s.length,M,L,N.className,i))})})}),s}function Zwe(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(w){return w.type===s}).slice(0,1),c=s==="vertical"?0:1,u=c?0:1,f=c?ou:su,h=c?su:ou,g=r[f.start],v=r[f.end],b=r[h.start],x=r[h.end];o.forEach(function(w){var S=w.gap,T=w.gapRects,I=Math.max.apply(Math,Re([b],le(T.map(function(D){var N=D.rect;return N[h.start]})),!1)),P=Math.min.apply(Math,Re([x],le(T.map(function(D){var N=D.rect;return N[h.end]})),!1)),O=(I+P)/2;I===P||O===(b+x)/2||T.forEach(function(D){var N=D.rect,C=D.className,R=[n[0],n[1]];if(N[f.end]<g)R[c]+=N[f.end]-g;else if(v<N[f.start])R[c]+=N[f.start]-g-S;else return;R[u]+=O-b,a.push(Wm(t,c?"vertical":"horizontal","gap",a.length,S,R,C,i))})})}),a}function jN(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,s=i.overflow,o=i.scrollHeight,c=i.scrollWidth,u=i.clientHeight,f=i.clientWidth,h=i.clientLeft,g=i.clientTop,v=t.props,b=v.snapGap,x=b===void 0?!0:b,w=v.verticalGuidelines,S=v.horizontalGuidelines,T=v.snapThreshold,I=T===void 0?5:T,P=v.maxSnapElementGuidelineDistance,O=P===void 0?1/0:P,D=v.isDisplayGridGuidelines,N=Ba(qa(t.state)),C=N.top,R=N.left,M=N.bottom,V=N.right,L={top:C,left:R,bottom:M,right:V,center:(R+V)/2,middle:(C+M)/2},z=n1e(t),K=Re([],le(z),!1),Y=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(ne){return ne*I});x&&K.push.apply(K,Re([],le(Jwe(t,L,Y)),!1));var G=se({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(K.push.apply(K,Re([],le(t1e(t,s?c:f,s?o:u,h,g,G,D)),!1)),a){var X=i.left,J=i.top;G.left+=X,G.top+=J,G.right+=X,G.bottom+=J}return K.push.apply(K,Re([],le(yY(S||!1,w||!1,s?c:f,s?o:u,h,g,G)),!1)),K=K.filter(function(ne){var Q=ne.element,$=ne.elementRect,Z=ne.type;if(!Q||!$)return!0;var ee=$.rect;return vY(L,ee,Z,O)}),K}function Jwe(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,c=t.state.elementRects,u=[];return[["vertical",su,ou],["horizontal",ou,su]].forEach(function(f){var h=le(f,3),g=h[0],v=h[1],b=h[2],x=e[v.start],w=e[v.end],S=e[v.center],T=e[b.start],I=e[b.end],P={left:n[0],top:n[1]};function O(C){var R=C.rect,M=P[v.start];return R[v.end]<x+M?x-R[v.end]:w-M<R[v.start]?R[v.start]-w:-1}var D=c.filter(function(C){var R=C.rect;return R[b.start]>I||R[b.end]<T?!1:O(C)>0}).sort(function(C,R){return O(C)-O(R)}),N=[];D.forEach(function(C){D.forEach(function(R){if(C!==R){var M=C.rect,V=R.rect,L=M[b.start],z=M[b.end],K=V[b.start],Y=V[b.end];L>Y||K>z||N.push([C,R])}})}),N.forEach(function(C){var R=le(C,2),M=R[0],V=R[1],L=M.rect,z=V.rect,K=L[v.start],Y=L[v.end],G=z[v.start],X=z[v.end],J=P[v.start],ne=0,Q=0,$=!1,Z=!1,ee=!1;if(Y<=x&&w<=G){if(Z=!0,ne=(G-Y-(w-x))/2,Q=Y+ne+(w-x)/2,Ie(Q-S)>J)return}else if(Y<G&&X<x+J){if($=!0,ne=G-Y,Q=X+ne,Ie(Q-x)>J)return}else if(Y<G&&w-J<K){if(ee=!0,ne=G-Y,Q=K-ne,Ie(Q-w)>J)return}else return;ne&&vY(e,z,g,a)&&(ne>o||u.push({type:g,pos:g==="vertical"?[Q,0]:[0,Q],element:V.element,size:0,className:V.className,isStart:$,isCenter:Z,isEnd:ee,gap:ne,hide:!0,gapRects:[M,V],direction:"",elementDirection:""}))})}),u}function e1e(t,e,n,r){var i,a,s=t.props,o=t.state,c=s.snapGridAll,u=s.snapGridWidth,f=u===void 0?0:u,h=s.snapGridHeight,g=h===void 0?0:h,v=o.snapRenderInfo,b=v&&(((i=v.direction)===null||i===void 0?void 0:i[0])||((a=v.direction)===null||a===void 0?void 0:a[1])),x=t.moveables;if(c&&x&&b&&(f||g)){if(o.snapThresholdInfo)return;o.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var w=t.getRect(),S=w.children,T=v.direction;if(S){var I=T.map(function(O,D){var N=D===0?{snapSize:f,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:g,posName:"top",sizeName:"height",clientOffset:r.top-n},C=N.snapSize,R=N.posName,M=N.sizeName,V=N.clientOffset;if(!C)return{dir:O,multiple:1,snapSize:C,snapOffset:0};var L=w[M],z=w[R],K=oW(S.map(function($){return[$[R]-z,$[M],L-$[M]-$[R]+z]})).filter(function($){return $}).sort(function($,Z){return $-Z}),Y=K[0],G=K.map(function($){return lt($/Y,.1)*C}),X=1,J=lt(L/Y,.1);for(X=1;X<=10&&!G.every(function($){return $*X%1===0});++X);var ne=(-O+1)/2,Q=d1(z-V,z-V+L,ne,1-ne);return{multiple:J*X,dir:O,snapSize:C,snapOffset:Math.round(Q/C)}}),P=I.map(function(O){return O.multiple||1});o.snapThresholdInfo.multiples=P,o.snapThresholdInfo.offset=I.map(function(O){return O.snapOffset}),I.forEach(function(O,D){O.snapSize})}}else o.snapThresholdInfo=null}function t1e(t,e,n,r,i,a,s){r===void 0&&(r=0),i===void 0&&(i=0);var o=t.props,c=t.state,u=o.snapGridWidth,f=u===void 0?0:u,h=o.snapGridHeight,g=h===void 0?0:h,v=[],b=a.left,x=a.top,w=[0,0];e1e(t,r,i,a);var S=c.snapThresholdInfo,T=f,I=g;if(S&&(f*=S.multiples[0]||1,g*=S.multiples[1]||1,w=S.offset),g){for(var P=function(D){v.push({type:"horizontal",pos:[b,lt(w[1]*I+D-i+x,.1)],className:Ze("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},O=0;O<=n*2;O+=g)P(O);for(var O=-g;O>=-n;O-=g)P(O)}if(f){for(var P=function(N){v.push({type:"vertical",pos:[lt(w[0]*T+N-r+b,.1),x],className:Ze("grid-guideline"),size:n,hide:!s,direction:"",grid:!0})},O=0;O<=e*2;O+=f)P(O);for(var O=-f;O>=-e;O-=f)P(O)}return v}function vY(t,e,n,r){return n==="horizontal"?Ie(t.right-e.left)<=r||Ie(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Ie(t.bottom-e.top)<=r||Ie(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function n1e(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(g){return!g.refresh}),a=r.map(function(g){return As(g)&&"element"in g?se(se({},g),{element:yo(g.element,!0)}):{element:yo(g,!0)}}).filter(function(g){return g.element}),s=pxe(i.map(function(g){return g.element}),a.map(function(g){return g.element})),o=s.maintained,c=s.added,u=[];o.forEach(function(g){var v=le(g,2),b=v[0],x=v[1];u[x]=i[b]}),r1e(t,c.map(function(g){return a[g]})).map(function(g,v){u[c[v]]=g}),e.elementRects=u;var f=bD(t.props.elementSnapDirections),h=[];return u.forEach(function(g){var v=g.element,b=g.top,x=b===void 0?f.top:b,w=g.left,S=w===void 0?f.left:w,T=g.right,I=T===void 0?f.right:T,P=g.bottom,O=P===void 0?f.bottom:P,D=g.center,N=D===void 0?f.center:D,C=g.middle,R=C===void 0?f.middle:C,M=g.className,V=g.rect,L=xD({top:x,right:I,left:S,bottom:O,center:N,middle:R},V),z=L.horizontal,K=L.vertical,Y=L.horizontalNames,G=L.verticalNames,X=V.top,J=V.left,ne=V.right-J,Q=V.bottom-X,$=[ne,Q];K.forEach(function(Z,ee){h.push({type:"vertical",element:v,pos:[lt(Z,.1),X],size:Q,sizes:$,className:M,elementRect:g,elementDirection:yB[G[ee]]||G[ee],direction:""})}),z.forEach(function(Z,ee){h.push({type:"horizontal",element:v,pos:[J,lt(Z,.1)],size:ne,sizes:$,className:M,elementRect:g,elementDirection:yB[Y[ee]]||Y[ee],direction:""})})}),h}function CB(t,e){return t?t.map(function(n){var r=As(n)?n:{pos:n},i=r.pos;return _p(i)?r:se(se({},r),{pos:Jt(i,e)})}):[]}function yY(t,e,n,r,i,a,s){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],c=s.left,u=s.top,f=s.bottom,h=s.right,g=n+h-c,v=r+f-u;return CB(t,v).forEach(function(b){o.push({type:"horizontal",pos:[c,lt(b.pos-a+u,.1)],size:g,className:b.className,direction:""})}),CB(e,g).forEach(function(b){o.push({type:"vertical",pos:[lt(b.pos-i+c,.1),u],size:v,className:b.className,direction:""})}),o}function r1e(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,s=r.is3d,o=r.offsetDelta,c=s?4:3,u=le(kwe(a,i,c),2),f=u[0],h=u[1],g=n?0:o[0],v=n?0:o[1];return e.map(function(b){var x=b.element.getBoundingClientRect(),w=x.left-f-g,S=x.top-h-v,T=S+x.height,I=w+x.width,P=le(Cp(a,[w,S],c),2),O=P[0],D=P[1],N=le(Cp(a,[I,T],c),2),C=N[0],R=N[1];return se(se({},b),{rect:{left:O,right:C,top:D,bottom:R,center:(O+C)/2,middle:(D+R)/2}})})}function yx(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var s=yo(r,!0);if(s){var o=bv(s),c=RB(e,[o.left-i.left,o.top-i.top]),u=RB(e,[o.right-i.right,o.bottom-i.bottom]);a.left=lt(c[0],1e-5),a.top=lt(c[1],1e-5),a.right=lt(u[0],1e-5),a.bottom=lt(u[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=jN(t),e.enableSnap=!0,!0}function bY(t,e,n,r,i,a){var s=hf(t,e,n,a?4:3),o=vr(s,r);return TD(s,tt(i,o))}function IB(t){return t?t/Ie(t):0}function i1e(t,e,n,r,i,a){var s=a.fixedDirection,o=Pwe(n,s,r),c=SD(t,e,n,r),u=Re(Re([],le(Uwe(t,e,o,r,i,a)),!1),le(hY(t,c,a)),!1),f=v1(u,0),h=v1(u,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function a1e(t,e,n,r,i,a,s,o,c){var u=vr(e,s),f=v_(t,o,{vertical:[u[0]],horizontal:[u[1]]}),h=f.horizontal.offset,g=f.vertical.offset;if(lt(g,IN)||lt(h,IN)){var v=le(No({datas:c,distX:-g,distY:-h}),2),b=v[0],x=v[1],w=Math.min(i||1/0,n+s[0]*b),S=Math.min(a||1/0,r+s[1]*x);return[w-n,S-r]}return[0,0]}function xY(t,e,n,r,i,a,s,o){for(var c=qa(t.state),u=t.props.keepRatio,f=0,h=0,g=0;g<2;++g){var v=e(f,h),b=i1e(t,v,i,u,s,o),x=b.width,w=b.height,S=x.isBound,T=w.isBound,I=x.offset,P=w.offset;if(g===1&&(S||(I=0),T||(P=0)),g===0&&s&&!S&&!T)return[0,0];if(u){var O=Ie(I)*(n?1/n:1),D=Ie(P)*(r?1/r:1),N=S&&T?O<D:T||!S&&O<D;N?I=n*P/r:P=r*I/n}f+=I,h+=P}if(!u&&i[0]&&i[1]){var C=Gwe(t,c,i,a,o),R=C.maxWidth,M=C.maxHeight,V=le(a1e(t,e(f,h).map(function(K){return K.map(function(Y){return lt(Y,IN)})}),n+f,r+h,R,M,i,s,o),2),I=V[0],P=V[1];f+=I,h+=P}return[f,h]}function vv(t){return t<0&&(t=t%360+360),t%=360,t}function s1e(t,e){e=vv(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return Ie(t-r)<Ie(t-i)?r:i}function gk(t,e){t=vv(t),e=vv(e);var n=vv(t-e);return Math.min(n,360-n)}function o1e(t,e,n,r){var i,a=t.props,s=(i=a[aY])!==null&&i!==void 0?i:5,o=a[sY];if(sg(t,"rotatable")){var c=e.pos1,u=e.pos2,f=e.pos3,h=e.pos4,g=e.origin,v=n*Math.PI/180,b=[c,u,f,h].map(function(P){return tt(P,g)}),x=b.map(function(P){return H0(P,v)}),w=Re(Re([],le(_we(t,b,x,g,n)),!1),le(zwe(t,b,x,g,n)),!1);w.sort(function(P,O){return Ie(P-n)-Ie(O-n)});var S=w.length>0;if(S)return{isSnap:S,dist:S?w[0]:n}}if(o?.length&&s){var T=o.slice().sort(function(P,O){return gk(P,r)-gk(O,r)}),I=T[0];if(gk(I,r)<=s)return{isSnap:!0,dist:n+s1e(r,I)-r}}return{isSnap:!1,dist:n}}function l1e(t,e,n,r,i,a,s){if(!sg(t,"resizable"))return[0,0];var o=s.fixedDirection,c=s.nextAllMatrix,u=t.state,f=u.allMatrix,h=u.is3d;return xY(t,function(g,v){return bY(c||f,e+g,n+v,o,i,h)},e,n,r,i,a,s)}function c1e(t,e,n,r,i){if(!sg(t,"scalable"))return[0,0];var a=i.startOffsetWidth,s=i.startOffsetHeight,o=i.fixedPosition,c=i.fixedDirection,u=i.is3d,f=xY(t,function(h,g){return bY(lwe(i,Pt(e,[h/a,g/s])),a,s,c,o,u)},a,s,n,o,r,i);return[f[0]/a,f[1]/s]}function u1e(t,e){e.absolutePoses=qa(t.state)}function NB(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Ui(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return se(se({},r),{direction:i.direction})})}function PB(t,e,n,r,i,a){var s=yD(g_(t,a),e,n),o=s.vertical,c=s.horizontal,u=Lh();o.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.left=!0),b.direction==="end"&&(u.right=!0),r.push({type:"bounds",pos:b.pos}))}),c.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.top=!0),b.direction==="end"&&(u.bottom=!0),i.push({type:"bounds",pos:b.pos}))});var f=Lwe(t),h=f.boundMap,g=f.vertical,v=f.horizontal;return g.forEach(function(b){_l(r,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||r.push({type:"bounds",pos:b})}),v.forEach(function(b){_l(i,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||i.push({type:"bounds",pos:b})}),{boundMap:u,innerBoundMap:h}}var d1e=CD("",["resizable","scalable"]),f1e={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",aY,sY,oY,lY,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,s=n.pos2,o=n.pos3,c=n.pos4,u=n.snapRenderInfo,f=t.props.snapRenderThreshold,h=f===void 0?1:f;if(!u||!u.render||!sg(t,""))return Bh(t,"boundMap",Lh(),function(W){return JSON.stringify(W)}),Bh(t,"innerBoundMap",Lh(),function(W){return JSON.stringify(W)}),[];n.guidelines=jN(t);var g=Math.min(a[0],s[0],o[0],c[0]),v=Math.min(a[1],s[1],o[1],c[1]),b=u.externalPoses||[],x=qa(t.state),w=[],S=[],T=[],I=[],P=[],O=Ba(x),D=O.width,N=O.height,C=O.top,R=O.left,M=O.bottom,V=O.right,L={left:R,right:V,top:C,bottom:M,center:(R+V)/2,middle:(C+M)/2},z=b.length>0,K=z?Ba(b):{};if(!u.request){if(u.direction&&P.push(Nwe(t,x,u.direction,h,h)),u.snap){var Y=Ba(x);u.center&&(Y.middle=(Y.top+Y.bottom)/2,Y.center=(Y.left+Y.right)/2),P.push(bB(t,Y,h,h))}z&&(u.center&&(K.middle=(K.top+K.bottom)/2,K.center=(K.left+K.right)/2),P.push(bB(t,K,h,h))),P.forEach(function(W){var ue=W.vertical.posInfos,ie=W.horizontal.posInfos;w.push.apply(w,Re([],le(ue.filter(function(oe){var Se=oe.guidelineInfos;return Se.some(function(ae){var Te=ae.guideline;return!Te.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),S.push.apply(S,Re([],le(ie.filter(function(oe){var Se=oe.guidelineInfos;return Se.some(function(ae){var Te=ae.guideline;return!Te.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),T.push.apply(T,Re([],le(NB(ue)),!1)),I.push.apply(I,Re([],le(NB(ie)),!1))})}var G=PB(t,[R,V],[C,M],w,S),X=G.boundMap,J=G.innerBoundMap;z&&PB(t,[K.left,K.right],[K.top,K.bottom],w,S,u.externalBounds);var ne=Re(Re([],le(T),!1),le(I),!1),Q=ne.filter(function(W){return W.element&&!W.gapRects}),$=ne.filter(function(W){return W.gapRects}).sort(function(W,ue){return W.gap-ue.gap});Be(t,"onSnap",{guidelines:ne.filter(function(W){var ue=W.element;return!ue}),elements:Q,gaps:$},!0);var Z=Bh(t,"boundMap",X,function(W){return JSON.stringify(W)},Lh()),ee=Bh(t,"innerBoundMap",J,function(W){return JSON.stringify(W)},Lh());return(X===Z||J===ee)&&Be(t,"onBound",{bounds:X,innerBounds:J},!0),Re(Re(Re(Re(Re(Re([],le(Qwe(t,Q,[g,v],L,e)),!1),le(Zwe(t,$,[g,v],L,e)),!1),le(kB(t,"horizontal",I,[i,r],L,e)),!1),le(kB(t,"vertical",T,[i,r],L,e)),!1),le(AB(t,"horizontal",S,g,r,D,0,e)),!1),le(AB(t,"vertical",w,v,i,N,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},yx(t)},drag:function(t){var e=t.state;yx(t)||(e.guidelines=jN(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(d1e(t,e)||MN(t,e))return!0;if(!e.isRequest&&e.inputEvent)return mr(e.inputEvent.target,Ze("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,yx(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,yx(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function h1e(t,e){return[t[0]*e[0],t[1]*e[1]]}function Ze(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return lbe.apply(void 0,Re([pD],le(t),!1))}function wY(t){t()}function p1e(t){return!t||t==="none"?[1,0,0,1,0,0]:As(t)?t:Qv(t)}function yv(t,e,n){return h1(e,Kd(n,e),t,Kd(n.map(function(r){return-r}),e))}function g1e(t,e,n){if(e==="%"){var r=ED(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function m1e(t){var e=v1e(AD(t,":before"));return e.map(function(n,r){var i=$0(n),a=i.value,s=i.unit;return a*g1e(t,s,r===0)})}function b1(t){return t?t.split(" "):["0","0"]}function v1e(t){return b1(t.transformOrigin)}function SY(t){var e=qi(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var s=[],o=function(u){var f=i[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(h){return f[h]}).join(", "),")"))},c=0;c<a;++c)o(c);return s.join(" ")}return""}function Jv(t,e,n,r,i){var a,s,o=rD(t)||vu(t),c=!1,u,f;if(!t||n)u=t;else{var h=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,g=t.parentElement;h?(c=!0,f=g,u=h):u=g}for(var v=!1,b=t===e||u===e,x="relative",w=1,S=parseFloat(i?.("zoom"))||1,T=i?.("position");u&&u!==o;){e===u&&(b=!0);var I=qi(u),P=u.tagName.toLowerCase(),O=SY(u),D=I("willChange"),N=parseFloat(I("zoom"))||1;if(x=I("position"),r&&N!==1){w=N;break}if(!n&&r&&S!==1&&T&&T!=="absolute"||P==="svg"||P==="foreignobject"||x!=="static"||O&&O!=="none"||D==="transform")break;var C=(s=t?.assignedSlot)===null||s===void 0?void 0:s.parentNode,R=u.parentNode;C&&(c=!0,f=R);var M=R;if(M&&M.nodeType===11){u=M.host,v=!0,x=qi(u)("position");break}u=M,x="relative"}return{offsetZoom:w,hasSlot:c,parentSlotElement:f,isCustomElement:v,isStatic:x==="static",isEnd:b||!u||u===o,offsetParent:u||o}}function y1e(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,s=qi(t),o=o_(i),c=!o,u,f;return!c&&(r!=="svg"||t.ownerSVGElement)?(u=FW?m1e(t):b1(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice(),c=!0,r==="svg"?(i=0,a=0):(n=le(w1e(t,u,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],u[0]=n[2],u[1]=n[3])):(u=b1(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice()),{tagName:r,isSVG:o,hasOffset:c,offset:[i||0,a||0],origin:u,targetOrigin:f}}function _Y(t,e){var n=qi(t),r=qi(vu(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),s=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(s=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,s]}function zN(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=ks(n,3,4))})}function b1e(t){for(var e=t.parentElement,n=!1,r=vu(t);e;){var i=AD(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function y_(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(DW(t,!e).join(","),")")}function ED(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function x1e(t,e){var n,r=ED(t),i=r.width,a=r.height,s=r.clientWidth,o=r.clientHeight,c=s/i,u=o/a,f=t.preserveAspectRatio.baseVal,h=f.align,g=f.meetOrSlice,v=[0,0],b=[c,u],x=[0,0];if(h!==1){var w=(h-2)%3,S=Math.floor((h-2)/3);v[0]=i*w/2,v[1]=a*S/2;var T=g===2?Math.max(u,c):Math.min(c,u);b[0]=T,b[1]=T,x[0]=(s-i)/2*w,x[1]=(o-a)/2*S}var I=uD(b,e);return n=le(x,2),I[e*(e-1)]=n[0],I[e*(e-1)+1]=n[1],yv(I,e,v)}function w1e(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=qi(t),a=i("transform-box")==="fill-box",s=t.getBBox(),o=ED(t.ownerSVGElement),c=s.x,u=s.y;r==="foreignobject"&&!c&&!u&&(c=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var f=c-o.x,h=u-o.y,g=a?e[0]:e[0]-f,v=a?e[1]:e[1]-h;return[f,h,g,v]}function An(t,e,n){return si(t,Hd(e,n),n)}function hf(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return An(t,i,r)})}function Ba(t){var e=t.map(function(u){return u[0]}),n=t.map(function(u){return u[1]}),r=Math.min.apply(Math,Re([],le(e),!1)),i=Math.min.apply(Math,Re([],le(n),!1)),a=Math.max.apply(Math,Re([],le(e),!1)),s=Math.max.apply(Math,Re([],le(n),!1)),o=a-r,c=s-i;return{left:r,top:i,right:a,bottom:s,width:o,height:c}}function OB(t,e,n,r){var i=hf(t,e,n,r);return Ba(i)}function S1e(t,e,n,r,i){var a,s=t.target,o=t.origin,c=e.matrix,u=TY(s),f=u.offsetWidth,h=u.offsetHeight,g=n.getBoundingClientRect(),v=[0,0];n===vu(n)&&(v=_Y(s,!0));for(var b=s.getBoundingClientRect(),x=b.left-g.left+n.scrollLeft-(n.clientLeft||0)+v[0],w=b.top-g.top+n.scrollTop-(n.clientTop||0)+v[1],S=b.width,T=b.height,I=h1(r,i,c),P=OB(I,f,h,r),O=P.left,D=P.top,N=P.width,C=P.height,R=An(I,o,r),M=tt(R,[O,D]),V=[x+M[0]*S/N,w+M[1]*T/C],L=[0,0],z=0;++z<10;){var K=Eo(i,r);a=le(tt(An(K,V,r),An(K,R,r)),2),L[0]=a[0],L[1]=a[1];var Y=h1(r,i,Kd(L,r),c),G=OB(Y,f,h,r),X=G.left,J=G.top,ne=X-x,Q=J-w;if(Ie(ne)<2&&Ie(Q)<2)break;V[0]-=ne,V[1]-=Q}return L.map(function($){return Math.round($)})}function _1e(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(c){return An(t,c,i)}),s=n.left,o=n.top;return a.map(function(c){return[c[0]+s,c[1]+o]})}function Ua(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function EY(t,e){return Ua([e[0]-t[0],e[1]-t[1]])}function Ym(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Hn(t,e));var i=EY(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function x1(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(o,c){return o+c[0]},0)/i,s=n.reduce(function(o,c){return o+c[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Yd(t,e){var n=t[e];return As(n)?se(se({},t),n):t}function TY(t){var e=t&&!o_(t.offsetWidth),n=0,r=0,i=0,a=0,s=0,o=0,c=0,u=0,f=0,h=0,g=0,v=0,b=1/0,x=1/0,w=1/0,S=1/0,T=0,I=0,P=!1;if(t)if(!e&&t.ownerSVGElement){var O=t.getBBox();P=!0,n=O.width,r=O.height,s=n,o=r,c=n,u=r,i=n,a=r}else{var D=qi(t),N=t.style,C=D("boxSizing")==="border-box",R=parseFloat(D("borderLeftWidth"))||0,M=parseFloat(D("borderRightWidth"))||0,V=parseFloat(D("borderTopWidth"))||0,L=parseFloat(D("borderBottomWidth"))||0,z=parseFloat(D("paddingLeft"))||0,K=parseFloat(D("paddingRight"))||0,Y=parseFloat(D("paddingTop"))||0,G=parseFloat(D("paddingBottom"))||0,X=z+K,J=Y+G,ne=R+M,Q=V+L,$=X+ne,Z=J+Q,ee=D("position"),W=0,ue=0;if("clientLeft"in t){var ie=null;if(ee==="absolute"){var oe=Jv(t,vu(t));ie=oe.offsetParent}else ie=t.parentElement;if(ie){var Se=qi(ie);W=parseFloat(Se("width")),ue=parseFloat(Se("height"))}}f=Math.max(X,Jt(D("minWidth"),W)||0),h=Math.max(J,Jt(D("minHeight"),ue)||0),b=Jt(D("maxWidth"),W),x=Jt(D("maxHeight"),ue),isNaN(b)&&(b=1/0),isNaN(x)&&(x=1/0),T=Jt(N.width,0)||0,I=Jt(N.height,0)||0,s=parseFloat(D("width"))||0,o=parseFloat(D("height"))||0,c=Ie(s-T)<1?mN(f,T||s,b):s,u=Ie(o-I)<1?mN(h,I||o,x):o,n=c,r=u,i=c,a=u,C?(w=b,S=x,g=f,v=h,c=n-$,u=r-Z):(w=b+$,S=x+Z,g=f+$,v=h+Z,n=c+$,r=u+Z),i=c+X,a=u+J}return{svg:P,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:c,contentHeight:u,inlineCSSWidth:T,inlineCSSHeight:I,cssWidth:s,cssHeight:o,minWidth:f,minHeight:h,maxWidth:b,maxHeight:x,minOffsetWidth:g,minOffsetHeight:v,maxOffsetWidth:w,maxOffsetHeight:S}}function AY(t,e){return Hn(e>0?t[0]:t[1],e>0?t[1]:t[0])}function bx(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function kY(t,e){var n=t===vu(t)||t===rD(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=qi(t)("overflow")!=="visible",se(se({},e),r)}function mk(t,e,n,r){var i=t.left,a=t.right,s=t.top,o=t.bottom,c=e.top,u=e.left,f={left:u+i,top:c+s,right:u+a,bottom:c+o,width:a-i,height:o-s};return n&&r?kY(n,f):f}function bv(t,e){var n=0,r=0,i=0,a=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,i=s.width,a=s.height}var o={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?kY(t,o):o}function E1e(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,s=i.offsetHeight,o=i.svg,c=i.transformOrigin;return!n&&o&&r?ND(r,a,s):c}function CY(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=IY(a,r)}return i}function IY(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function TD(t,e){return[Pt(e,t[0]),Pt(e,t[1]),Pt(e,t[2]),Pt(e,t[3])]}function qa(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,s=t.pos4;return TD([r,i,a,s],[e,n])}function LN(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function Vh(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&LN(t,e),r?.unset(),t[n]=null}function bi(t,e){if(e){var n=ag(e);n.nextStyle=se(se({},n.nextStyle),t)}return{style:t,cssText:El(t).map(function(r){return"".concat(yw(r,"-"),": ").concat(t[r],";")}).join("")}}function NY(t,e,n){var r=e.afterTransform||e.transform;return se(se({},bi(se(se(se({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function ht(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=se(se({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function pa(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),se(se({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function b_(t,e,n){t._emitter.on(e,n)}function Be(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function AD(t,e){return Wc(t).getComputedStyle(t,e)}function xx(t,e,n){var r={},i={};return t.filter(function(a){var s=a.name;if(r[s]||!e.some(function(o){return a[o]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[s]=!0,!0})}function VN(t,e){return t===e||t==null&&e==null}function DB(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!o_(i))return i}return t[n]}function PY(t,e){var n=[],r=[];return t.forEach(function(i,a){var s=e(i,a,t),o=r.indexOf(s),c=n[o]||[];o===-1&&(r.push(s),n.push(c)),c.push(i)}),n}function T1e(t,e){var n=[],r={};return t.forEach(function(i,a){var s=e(i,a,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(i)}),n}function OY(t){return t.reduce(function(e,n){return e.concat(n)},[])}function kp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Ie(r)-Ie(n)}),t[0]}function Cp(t,e,n){return si(Eo(t,n),Hd(e,n),n)}function A1e(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=le(Cp(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function Na(t,e,n,r){if(!n[0]&&!n[1])return e;var i=An(t,[IB(n[0]||1),0],r),a=An(t,[0,IB(n[1]||1)],r),s=An(t,[n[0]/Ua(i),n[1]/Ua(a)],r);return Pt(e,s)}function fs(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function w1(t){return Ie(t)<=Si?0:t}function kD(t){return function(e){if(!e.isDragging(t))return"";var n=gwe(e,t),r=n.deg;return r?Ze("view-control-rotation".concat(r)):""}}function CD(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return mr(i,Ze("direction"))&&(!t||mr(i,Ze(t)))}}function k1e(t,e,n){var r,i=Ep(t,{"x%":function(O){return O/100*e.offsetWidth},"y%":function(O){return O/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),s=t.slice(0,n<0?void 0:n+1),o=t[n]||"",c=n<0?[]:t.slice(n),u=n<0?[]:t.slice(n+1),f=i.slice(0,n<0?void 0:n),h=i.slice(0,n<0?void 0:n+1),g=(r=i[n])!==null&&r!==void 0?r:Ep([""])[0],v=n<0?[]:i.slice(n),b=n<0?[]:i.slice(n+1),x=g?[g]:[],w=Ah(f),S=Ah(h),T=Ah(v),I=Ah(b),P=en(w,T,4);return{transforms:t,beforeFunctionMatrix:w,beforeFunctionMatrix2:S,targetFunctionMatrix:Ah(x),afterFunctionMatrix:T,afterFunctionMatrix2:I,allFunctionMatrix:P,beforeFunctions:f,beforeFunctions2:h,targetFunction:x[0],afterFunctions:v,afterFunctions2:b,beforeFunctionTexts:a,beforeFunctionTexts2:s,targetFunctionText:o,afterFunctionTexts:c,afterFunctionTexts2:u}}function C1e(t){return!t||!As(t)||rg(t)?!1:cr(t)||"length"in t}function yo(t,e){return t?rg(t)?t:$i(t)?e?document.querySelector(t):t:eD(t)?t():dW(t)?t:"current"in t?t.current:t:null}function ID(t,e){if(!t)return[];var n=C1e(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return $i(i)&&e?Re(Re([],le(r),!1),le([].slice.call(document.querySelectorAll(i))),!1):(cr(i)?r.push(ID(i,e)):r.push(yo(i,e)),r)},[])}function I1e(t,e,n){var r=Hn(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function RB(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=Eo(n,i);return r||(a=ks(a,3,4)),a[12]=0,a[13]=0,a[14]=0,fxe(a,e)}function DY(t,e,n,r,i){var a=le(t,2),s=a[0],o=a[1],c=0,u=0;if(i&&s&&o){var f=Hn([0,0],e),h=Hn([0,0],r),g=Ua(e),v=Math.cos(f-h)*g;if(!r[0])u=v,c=u*n;else if(!r[1])c=v,u=c/n;else{var b=r[0]*s,x=r[1]*o,w=Math.atan2(b+e[0],x+e[1]),S=Math.atan2(b,x);w<0&&(w+=Math.PI*2),S<0&&(S+=Math.PI*2);var T=0;Ie(w-S)<Math.PI/2||Ie(w-S)>Math.PI/2*3||(S+=Math.PI),T=w-S,T>Math.PI*2?T-=Math.PI*2:T>Math.PI?T=2*Math.PI-T:T<-Math.PI&&(T=-2*Math.PI-T);var I=Ua([b+e[0],x+e[1]])*Math.cos(T);c=I*Math.sin(S)-b,u=I*Math.cos(S)-x,r[0]<0&&(c*=-1),r[1]<0&&(u*=-1)}}else c=r[0]*e[0],u=r[1]*e[1];return[c,u]}function RY(t,e,n,r){var i,a=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,c=0,u=0,f=r.distX,h=r.distY,g=r.pinchScale,v=r.parentDistance,b=r.parentDist,x=r.parentScale,w=n.fixedDirection,S=[0,1].map(function(N){return Ie(t[N]-w[N])}),T=[0,1].map(function(N){var C=S[N];return C!==0&&(C=2/C),C});if(b)c=b[0],u=b[1],e&&(c?u||(u=c/a):c=u*a);else if(_p(g))c=(g-1)*s,u=(g-1)*o;else if(x)c=(x[0]-1)*s,u=(x[1]-1)*o;else if(v){var I=s*S[0],P=o*S[1],O=Ua([I,P]);c=v/O*I*T[0],u=v/O*P*T[1]}else{var D=No({datas:n,distX:f,distY:h});D=T.map(function(N,C){return D[C]*N}),i=le(DY([s,o],D,a,t,e),2),c=i[0],u=i[1]}return{distWidth:c,distHeight:u}}function BN(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=le(t.split(" "),2),r=n[0],i=n[1],a=BN(r||""),s=BN(i||""),o=se(se({},a),s),c={x:"50%",y:"50%"};return o.x&&(c.x=o.x),o.y&&(c.y=o.y),o.value&&(o.x&&!o.y&&(c.y=o.value),!o.x&&o.y&&(c.x=o.value)),c}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function ND(t,e,n){var r=BN(t,!0),i=r.x,a=r.y;return[Jt(i,e)||0,Jt(a,n)||0]}function N1e(t,e,n){var r=t.map(function(a){return tt(a,e)}),i=r.map(function(a){return H0(a,n)});return{prev:r,next:i,result:i.map(function(a){return Pt(a,e)})}}function MY(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=cr(n),s=cr(i);return a&&s?MY(n,i):!a&&!s?n===i:!1})}function Bh(t,e,n,r,i){var a=t._store,s=a[e];if(!(e in a))if(i!=null)a[e]=i,s=i;else return a[e]=n,n;return s===n||r(s)===r(n)?s:(a[e]=n,n)}function gi(t){return t>=0?1:-1}function Ie(t){return Math.abs(t)}function vk(t,e){return Tbe(t).map(function(n){return e(n)})}function jY(t){return _p(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var P1e=Y0("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,s=t.props,o=s.pinchable,c=s.ables;if(!o)return!1;var u="onPinch".concat(r?"Group":"","Start"),f="drag".concat(r?"Group":"","ControlStart"),h=(o===!0?t.controlAbles:c.filter(function(x){return o.indexOf(x.name)>-1})).filter(function(x){return x.canPinch&&x[f]}),g=ht(t,e,{});r&&(g.targets=r);var v=Be(t,u,g);n.isPinch=v!==!1,n.ables=h;var b=n.isPinch;return b?(h.forEach(function(x){if(a[x.name]=a[x.name]||{},!!x[f]){var w=se(se({},e),{datas:a[x.name],parentRotate:i,isPinch:!0});x[f](t,w)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},b):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,s=e.inputEvent,o=e.targets,c=e.angle;if(n.isPinch){var u=i*(1-1/r),f=ht(t,e,{});o&&(f.targets=o);var h="onPinch".concat(o?"Group":"");Be(t,h,f);var g=n.ables,v="drag".concat(o?"Group":"","Control");return g.forEach(function(b){b[v]&&b[v](t,se(se({},e),{datas:a[b.name],inputEvent:s,resolveMatrix:!0,pinchScale:r,parentDistance:u,parentRotate:c,isPinch:!0}))}),f}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(a?"Group":"","End"),c=pa(t,e,{isDrag:r});a&&(c.targets=a),Be(t,o,c);var u=n.ables,f="drag".concat(a?"Group":"","ControlEnd");return u.forEach(function(h){h[f]&&h[f](t,se(se({},e),{isDrag:r,datas:s[h.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,se(se({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,se(se({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,se(se({},e),{targets:t.props.targets}))}}),MB=CD("scalable"),O1e={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:nY("scalable"),dragControlCondition:MB,viewClassName:kD("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,s=CY(a,r,i,n),o=t.state,c=o.width,u=o.height,f=o.targetTransform,h=o.target,g=o.pos1,v=o.pos2,b=o.pos4;if(!s||!h)return!1;r||ff(t,e),n.datas={},n.transform=f,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=c,n.startOffsetHeight=u,n.startValue=[1,1];var x=!s[0]&&!s[1]||s[0]||!s[1];p_(t,e,"scale"),n.isWidth=x;function w(D){n.ratio=D&&isFinite(D)?D:0}n.startPositions=qa(t.state);function S(D){var N=pY(n.startPositions,D);n.fixedDirection=N.fixedDirection,n.fixedPosition=N.fixedPosition,n.fixedOffset=N.fixedOffset}n.setFixedDirection=S,w(fl(g,v)/fl(v,b)),S([-s[0],-s[1]]);var T=function(D){n.minScaleSize=D},I=function(D){n.maxScaleSize=D};T([-1/0,-1/0]),I([1/0,1/0]);var P=ht(t,e,se(se({direction:s,set:function(D){n.startValue=D},setRatio:w,setFixedDirection:S,setMinScaleSize:T,setMaxScaleSize:I},h_(t,e)),{dragStart:pi.dragStart(t,new Tp().dragStart([0,0],e))})),O=Be(t,"onScaleStart",P);return n.startFixedDirection=n.fixedDirection,O!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?P:!1},dragControl:function(t,e){d_(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,s=e.dragClient,o=e.isRequest,c=e.useSnap,u=e.resolveMatrix,f=n.prevDist,h=n.direction,g=n.startOffsetWidth,v=n.startOffsetHeight,b=n.isScale,x=n.startValue,w=n.isWidth,S=n.ratio;if(!b)return!1;var T=t.props,I=T.throttleScale,P=T.parentMoveable,O=h;!h[0]&&!h[1]&&(O=[1,1]);var D=S&&(r??T.keepRatio)||!1,N=t.state,C=[x[0],x[1]];function R(){var he=RY(O,D,n,e),te=he.distWidth,Pe=he.distHeight,be=g?(g+te)/g:1,ke=v?(v+Pe)/v:1;x[0]||(C[0]=te/g),x[1]||(C[1]=Pe/v);var Oe=(O[0]||D?be:1)*C[0],De=(O[1]||D?ke:1)*C[1];return Oe===0&&(Oe=gi(f[0])*gx),De===0&&(De=gi(f[1])*gx),[Oe,De]}var M=R();if(!a&&t.props.groupable){var V=N.snapRenderInfo||{},L=V.direction;cr(L)&&(L[0]||L[1])&&(N.snapRenderInfo={direction:h,request:e.isRequest})}Be(t,"onBeforeScale",ht(t,e,{scale:M,setFixedDirection:function(he){return n.setFixedDirection(he),M=R(),M},startFixedDirection:n.startFixedDirection,setScale:function(he){M=he}},!0));var z=[M[0]/C[0],M[1]/C[1]],K=s,Y=[0,0],G=gi(z[0]*z[1]),X=!s&&!i&&a;if(X||u?K=vD(t,n.targetAllTransform,[0,0],[0,0],n):s||(K=n.fixedPosition),a||(Y=c1e(t,z,h,!c&&o,n)),D){O[0]&&O[1]&&Y[0]&&Y[1]&&(Math.abs(Y[0]*g)>Math.abs(Y[1]*v)?Y[1]=0:Y[0]=0);var J=!Y[0]&&!Y[1];if(J&&(w?z[0]=lt(z[0]*C[0],I)/C[0]:z[1]=lt(z[1]*C[1],I)/C[1]),O[0]&&!O[1]||Y[0]&&!Y[1]||J&&w){z[0]+=Y[0];var ne=g*z[0]*C[0]/S;z[1]=gi(G*z[0])*Ie(ne/v/C[1])}else if(!O[0]&&O[1]||!Y[0]&&Y[1]||J&&!w){z[1]+=Y[1];var Q=v*z[1]*C[1]*S;z[0]=gi(G*z[1])*Ie(Q/g/C[0])}}else z[0]+=Y[0],z[1]+=Y[1],Y[0]||(z[0]=lt(z[0]*C[0],I)/C[0]),Y[1]||(z[1]=lt(z[1]*C[1],I)/C[1]);z[0]===0&&(z[0]=gi(f[0])*gx),z[1]===0&&(z[1]=gi(f[1])*gx),M=h1e(z,[C[0],C[1]]);var $=[g,v],Z=[g*M[0],v*M[1]];Z=sW(Z,n.minScaleSize,n.maxScaleSize,D?S:!1),M=vk(2,function(he){return $[he]?Z[he]/$[he]:Z[he]}),z=vk(2,function(he){return M[he]/C[he]});var ee=vk(2,function(he){return f[he]?z[he]/f[he]:z[he]}),W="scale(".concat(z.join(", "),")"),ue="scale(".concat(M.join(", "),")"),ie=f_(n,ue,W),oe=!x[0]||!x[1],Se=cwe(t,oe?ue:W,n.fixedDirection,K,n.fixedOffset,n,oe),ae=X?Se:tt(Se,n.prevInverseDist||[0,0]);if(n.prevDist=z,n.prevInverseDist=Se,M[0]===f[0]&&M[1]===f[1]&&ae.every(function(he){return!he})&&!P&&!X)return!1;var Te=ht(t,e,se({offsetWidth:g,offsetHeight:v,direction:h,scale:M,dist:z,delta:ee,isPinch:!!a},XW(t,ie,ae,a,e)));return Be(t,"onScale",Te),Te},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=pa(t,e,{});return Be(t,"onScaleEnd",r),r},dragGroupControlCondition:MB,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=_s(t,"resizable",e);n.moveableScale=t.scale;var a=hl(t,this,"dragControlStart",e,function(u,f){return m1(t,u,n,f)}),s=function(u){r.setFixedDirection(u),a.forEach(function(f,h){f.setFixedDirection(u),m1(t,f.moveable,n,i[h])})};n.setFixedDirection=s;var o=se(se({},r),{targets:t.props.targets,events:a,setFixedDirection:s}),c=Be(t,"onScaleGroupStart",o);return n.isScale=c!==!1,n.isScale?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){b_(t,"onBeforeScale",function(f){Be(t,"onBeforeScaleGroup",ht(t,e,se(se({},f),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var s=t.props.keepRatio,o=n.fixedPosition,c=hl(t,this,"dragControl",e,function(f,h){var g=le(si(K0(t.rotation/180*Math.PI,3),[h.datas.originalX*i[0],h.datas.originalY*i[1],1],3),2),v=g[0],b=g[1];return se(se({},h),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:Pt(o,[v,b])})}),u=se({targets:t.props.targets,events:c},r);return Be(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=hl(t,this,"dragControlEnd",e),a=pa(t,e,{targets:t.props.targets,events:i});return Be(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function Tc(t,e){return t.map(function(n,r){return d1(n,e[r],1,2)})}function jB(t,e,n){var r=Hn(t,e),i=Hn(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function D1e(t,e){var n=jB(t[0],t[1],t[2]),r=jB(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var R1e={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:kD("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,s=n.zoom;if(r||i||!a)return[];var o=t.state,c=o.pos1,u=o.pos2,f=o.pos3,h=o.pos4,g=Tc(c,u),v=Tc(u,c),b=Tc(c,f),x=Tc(f,c),w=Tc(f,h),S=Tc(h,f),T=Tc(u,h),I=Tc(h,u);return Re([e.createElement("div",{className:Ze("line"),key:"middeLine1",style:Ym(g,w,s)}),e.createElement("div",{className:Ze("line"),key:"middeLine2",style:Ym(v,S,s)}),e.createElement("div",{className:Ze("line"),key:"middeLine3",style:Ym(b,T,s)}),e.createElement("div",{className:Ze("line"),key:"middeLine4",style:Ym(x,I,s)})],le(rY(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return mr(n,Ze("direction"))&&mr(n,Ze("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,s=IY(a,n);if(!s||!i)return!1;var o=t.state,c=o.transformOrigin,u=o.is3d,f=o.targetTransform,h=o.targetMatrix,g=o.width,v=o.height,b=o.left,x=o.top;n.datas={},n.targetTransform=f,n.warpTargetMatrix=u?h:ks(h,3,4),n.targetInverseMatrix=PW(Eo(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=b,n.top=x,n.poses=[[0,0],[g,0],[0,v],[g,v]].map(function(T){return tt(T,c)}),n.nextPoses=n.poses.map(function(T){var I=le(T,2),P=I[0],O=I[1];return si(n.warpTargetMatrix,[P,O,0,1],4)}),n.startValue=hn(4),n.prevMatrix=hn(4),n.absolutePoses=qa(o),n.posIndexes=YW(s),ff(t,e),p_(t,e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var w=ht(t,e,se({set:function(T){n.startValue=T}},h_(t,e))),S=Be(t,"onWarpStart",w);return S!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,c=n.isWarp,u=n.startValue,f=n.poses,h=n.posIndexes,g=n.absolutePoses;if(!c)return!1;if(d_(t,e,"matrix3d"),sg(t,"warpable")){var v=h.map(function(R){return g[R]});v.length>1&&v.push([(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2]);var b=v_(t,r,{horizontal:v.map(function(R){return R[1]+a}),vertical:v.map(function(R){return R[0]+i})}),x=b.horizontal,w=b.vertical;a-=x.offset,i-=w.offset}var S=No({datas:n,distX:i,distY:a},!0),T=n.nextPoses.slice();if(h.forEach(function(R){T[R]=Pt(T[R],S)}),!Jxe.every(function(R){return D1e(R.map(function(M){return f[M]}),R.map(function(M){return T[M]}))}))return!1;var I=dD(f[0],f[2],f[1],f[3],T[0],T[2],T[1],T[3]);if(!I.length)return!1;var P=en(s,I,4),O=KW(n,P,!0),D=en(Eo(o,4),O,4);n.prevMatrix=O;var N=en(u,O,4),C=f_(n,"matrix3d(".concat(N.join(", "),")"),"matrix3d(".concat(O.join(", "),")"));return mD(e,C),Be(t,"onWarp",ht(t,e,se({delta:D,matrix:N,dist:O,multiply:en,transform:C},bi({transform:C},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Be(t,"onWarpEnd",pa(t,e,{})),r):!1}},M1e=Ze("area-pieces"),wx=Ze("area-piece"),zY=Ze("avoid"),j1e=Ze("view-dragging");function yk(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;uW(e,zY),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function zB(t){return t.createElement("div",{key:"area_pieces",className:M1e},t.createElement("div",{className:wx}),t.createElement("div",{className:wx}),t.createElement("div",{className:wx}),t.createElement("div",{className:wx}))}var LY={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,s=n.passDragArea,o=t.getState(),c=o.width,u=o.height,f=o.renderPoses,h=s?Ze("area","pass"):Ze("area");if(a)return[e.createElement("div",{key:"area",ref:dl(t,"areaElement"),className:h}),zB(e)];if(!r||!i)return[];var g=dD([0,0],[c,0],[0,u],[c,u],f[0],f[1],f[2],f[3]),v=g.length?y_(g,!0):"none";return[e.createElement("div",{key:"area",ref:dl(t,"areaElement"),className:h,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:v}}),zB(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,c=o.moveableClientRect,u=o.renderPoses,f=o.rootMatrix,h=o.is3d,g=c.left,v=c.top,b=Ba(u),x=b.left,w=b.top,S=b.width,T=b.height,I=h?4:3,P=le(Cp(f,[r-g,i-v],I),2),O=P[0],D=P[1];O-=x,D-=w;var N=[{left:x,top:w,width:S,height:D-10},{left:x,top:w,width:O-10,height:T},{left:x,top:w+D+10,width:S,height:T-D-10},{left:x+O+10,top:w,width:S-O-10,height:T}],C=[].slice.call(s.nextElementSibling.children);N.forEach(function(R,M){C[M].style.cssText="left: ".concat(R.left,"px;top: ").concat(R.top,"px; width: ").concat(R.width,"px; height: ").concat(R.height,"px;")}),cW(s,zY),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,yk(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||yk(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){yk(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&aW(function(){e.disableNativeEvent=!1})}},z1e=Y0("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,s=t.getState(),o=s.beforeOrigin,c=s.rotation,u=s.svg,f=s.allMatrix,h=s.is3d,g=s.left,v=s.top,b=s.offsetWidth,x=s.offsetHeight,w;if(!a&&u&&i){var S=le(ND(i,b,x),2),T=S[0],I=S[1],P=h?4:3,O=An(f,[T,I],P);w=x1(c,r,tt(O,[g,v]))}else w=x1(c,r,o);return[e.createElement("div",{className:Ze("control","origin"),style:w,key:"beforeOrigin"})]}});function L1e(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var V1e={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,s=new yxe,o=yo(i,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var c=e.isControl?"controlGesto":"targetGesto",u=e.targets;s.on("scroll",function(f){var h=f.container,g=f.direction,v=ht(t,e,{scrollContainer:h,direction:g}),b=u?"onScrollGroup":"onScroll";u&&(v.targets=u),Be(t,b,v)}).on("move",function(f){var h=f.offsetX,g=f.offsetY,v=f.inputEvent;t[c].scrollBy(h,g,v.inputEvent,!1)}).on("scrollDrag",function(f){var h=f.next;h(t[c].getCurrentEvent())}),s.dragStart(e,se({container:o},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,s=r.scrollThreshold,o=s===void 0?0:s,c=r.scrollThrottleTime,u=c===void 0?0:c,f=r.getScrollPosition,h=f===void 0?L1e:f,g=r.scrollOptions;return n.drag(e,se({container:a,threshold:o,throttleTime:u,getScrollPosition:function(v){return h({scrollContainer:v.container,direction:v.direction})}},g)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,se(se({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,se(se({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,se(se({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,se(se({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,se(se({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,se(se({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,se(se({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},VY={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},B1e=Y0("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=jY(n.padding||{}),i=r.left,a=r.top,s=r.right,o=r.bottom,c=t.getState(),u=c.renderPoses,f=c.pos1,h=c.pos2,g=c.pos3,v=c.pos4,b=[f,h,g,v],x=[];return i>0&&x.push([0,2]),a>0&&x.push([0,1]),s>0&&x.push([1,3]),o>0&&x.push([2,3]),x.map(function(w,S){var T=le(w,2),I=T[0],P=T[1],O=b[I],D=b[P],N=u[I],C=u[P],R=dD([0,0],[100,0],[0,100],[100,100],O,D,N,C);if(R.length)return e.createElement("div",{key:"padding".concat(S),className:Ze("padding"),style:{transform:y_(R,!0)}})})}}),LB=["nw","ne","se","sw"];function Sx(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var F1e=[1,2,5,6],$1e=[0,3,4,7],gd=[1,-1,-1,1],md=[1,1,-1,-1];function PD(t,e,n,r,i,a,s,o){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=n),o===void 0&&(o=r);var c=[],u=!1,f=t.filter(function(g){return!g.virtual}),h=f.map(function(g){var v=g.horizontal,b=g.vertical,x=g.pos;if(b&&!u&&(u=!0,c.push("/")),u){var w=Math.max(0,b===1?x[1]-a:o-x[1]);return c.push(fs(w,r,e)),w}else{var w=Math.max(0,v===1?x[0]-i:s-x[0]);return c.push(fs(w,n,e)),w}});return{radiusPoses:f,styles:c,raws:h}}function BY(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function FY(t,e,n,r,i,a,s){var o,c,u,f;a===void 0&&(a=[0,0]),s===void 0&&(s=!1);var h=t.indexOf("/"),g=(h>-1?t.slice(0,h):t).length,v=t.slice(0,g),b=t.slice(g+1),x=v.length,w=b.length,S=w>0,T=le(v,4),I=T[0],P=I===void 0?"0px":I,O=T[1],D=O===void 0?P:O,N=T[2],C=N===void 0?P:N,R=T[3],M=R===void 0?D:R,V=le(b,4),L=V[0],z=L===void 0?P:L,K=V[1],Y=K===void 0?S?z:D:K,G=V[2],X=G===void 0?S?z:C:G,J=V[3],ne=J===void 0?S?Y:M:J,Q=[P,D,C,M].map(function(ie){return Jt(ie,e)}),$=[z,Y,X,ne].map(function(ie){return Jt(ie,n)}),Z=Q.slice(),ee=$.slice();o=le(Sx([Z[0],Z[1]],e),2),Z[0]=o[0],Z[1]=o[1],c=le(Sx([Z[3],Z[2]],e),2),Z[3]=c[0],Z[2]=c[1],u=le(Sx([ee[0],ee[3]],n),2),ee[0]=u[0],ee[3]=u[1],f=le(Sx([ee[1],ee[2]],n),2),ee[1]=f[0],ee[2]=f[1];var W=s?Z:Z.slice(0,Math.max(a[0],x)),ue=s?ee:ee.slice(0,Math.max(a[1],w));return Re(Re([],le(W.map(function(ie,oe){var Se=LB[oe];return{virtual:oe>=x,horizontal:gd[oe],vertical:0,pos:[r+ie,i+(md[oe]===-1?n:0)],sub:!0,raw:Q[oe],direction:Se}})),!1),le(ue.map(function(ie,oe){var Se=LB[oe];return{virtual:oe>=w,horizontal:0,vertical:md[oe],pos:[r+(gd[oe]===-1?e:0),i+ie],sub:!0,raw:$[oe],direction:Se}})),!1)}function U1e(t,e,n,r,i){i===void 0&&(i=e.length);var a=BY(t.slice(r)),s=a.horizontalRange,o=a.verticalRange,c=n-r,u=0;if(c===0)u=i;else if(c>0&&c<s[1])u=s[1]-c;else if(c>=o[0])u=o[0]+o[1]-c;else return;t.splice(n,u),e.splice(n,u)}function q1e(t,e,n,r,i,a,s,o,c,u,f){u===void 0&&(u=0),f===void 0&&(f=0);var h=BY(t.slice(n)),g=h.horizontalRange,v=h.verticalRange;if(r>-1)for(var b=gd[r]===1?a-u:o-a,x=g[1];x<=r;++x){var w=md[x]===1?f:c,S=0;if(r===x?S=a:x===0?S=u+b:gd[x]===-1&&(S=o-(e[n][0]-u)),t.splice(n+x,0,{horizontal:gd[x],vertical:0,pos:[S,w]}),e.splice(n+x,0,[S,w]),x===0)break}else if(i>-1){var T=md[i]===1?s-f:c-s;if(g[1]===0&&v[1]===0){var I=[u+T,f];t.push({horizontal:gd[0],vertical:0,pos:I}),e.push(I)}for(var P=v[0],x=v[1];x<=i;++x){var S=gd[x]===1?u:o,w=0;if(i===x?w=s:x===0?w=f+T:md[x]===1?w=e[n+P][1]:md[x]===-1&&(w=c-(e[n+P][1]-f)),t.push({horizontal:0,vertical:md[x],pos:[S,w]}),e.push([S,w]),x===0)break}}}function G1e(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var H1e=[[0,-1,"n"],[1,0,"e"]],K1e=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function OD(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,s=i.height,o=e,c=o.type,u=o.poses,f=c==="rect",h=c==="circle";if(c==="polygon")return n.map(function(D){return"".concat(fs(D[0],a,r)," ").concat(fs(D[1],s,r))});if(f||c==="inset"){var g=n[1][1],v=n[3][0],b=n[7][0],x=n[5][1];if(f)return[g,v,x,b].map(function(D){return"".concat(D,"px")});var w=[g,a-v,s-x,b].map(function(D,N){return fs(D,N%2?a:s,r)});if(n.length>8){var S=le(tt(n[4],n[0]),2),T=S[0],I=S[1];w.push.apply(w,Re(["round"],le(PD(u.slice(8).map(function(D,N){return se(se({},D),{pos:n[N]})}),r,T,I,b,g,v,x).styles),!1))}return w}else if(h||c==="ellipse"){var P=n[0],O=fs(Ie(n[1][1]-P[1]),h?Math.sqrt((a*a+s*s)/2):s,r),w=h?[O]:[fs(Ie(n[2][0]-P[0]),a,r),O];return w.push("at",fs(P[0],a,r),fs(P[1],s,r)),w}}function S1(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return K1e.map(function(s){var o=le(s,3),c=o[0],u=o[1],f=o[2],h=i[c+1],g=a[u+1];return{vertical:Ie(u),horizontal:Ie(c),direction:f,pos:[h,g]}})}function $Y(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[Ie(e[1]-e[0]),Ie(n[1]-n[0])]}function VB(t,e,n,r,i){var a,s,o,c,u,f,h,g,v;if(t){var b=i;if(!b){var x=qi(t),w=x("clipPath");b=w!=="none"?w:x("clip")}if(!((!b||b==="none"||b==="auto")&&(b=r,!b))){var S=iW(b),T=S.prefix,I=T===void 0?b:T,P=S.value,O=P===void 0?"":P,D=I==="circle",N=" ";if(I==="polygon"){var C=xd(O||"0% 0%, 100% 0%, 100% 100%, 0% 100%");N=",";var R=C.map(function(Ft){var Le=le(Ft.split(" "),2),st=Le[0],ct=Le[1];return{vertical:1,horizontal:1,pos:[Jt(st,e),Jt(ct,n)]}}),M=Wd(R.map(function(Ft){return Ft.pos}));return{type:I,clipText:b,poses:R,splitter:N,left:M.minX,right:M.maxX,top:M.minY,bottom:M.maxY}}else if(D||I==="ellipse"){var V="",L="",z=0,K=0,C=au(O);if(D){var Y="";a=le(C,4),s=a[0],Y=s===void 0?"50%":s,o=a[2],V=o===void 0?"50%":o,c=a[3],L=c===void 0?"50%":c,z=Jt(Y,Math.sqrt((e*e+n*n)/2)),K=z}else{var G="",X="";u=le(C,5),f=u[0],G=f===void 0?"50%":f,h=u[1],X=h===void 0?"50%":h,g=u[3],V=g===void 0?"50%":g,v=u[4],L=v===void 0?"50%":v,z=Jt(G,e),K=Jt(X,n)}var J=[Jt(V,e),Jt(L,n)],R=Re([{vertical:1,horizontal:1,pos:J,direction:"nesw"}],le(H1e.slice(0,D?1:2).map(function(st){return{vertical:Ie(st[1]),horizontal:st[0],direction:st[2],sub:!0,pos:[J[0]+st[0]*z,J[1]+st[1]*K]}})),!1);return{type:I,clipText:b,radiusX:z,radiusY:K,left:J[0]-z,top:J[1]-K,right:J[0]+z,bottom:J[1]+K,poses:R,splitter:N}}else if(I==="inset"){var C=au(O||"0 0 0 0"),ne=C.indexOf("round"),Q=(ne>-1?C.slice(0,ne):C).length,$=C.slice(Q+1),Z=le(C.slice(0,Q),4),ee=Z[0],W=Z[1],ue=W===void 0?ee:W,ie=Z[2],oe=ie===void 0?ee:ie,Se=Z[3],ae=Se===void 0?ue:Se,Te=le([ee,oe].map(function(st){return Jt(st,n)}),2),he=Te[0],te=Te[1],Pe=le([ae,ue].map(function(st){return Jt(st,e)}),2),be=Pe[0],ke=Pe[1],Oe=e-ke,De=n-te,Ye=FY($,Oe-be,De-he,be,he),R=Re(Re([],le(S1(he,Oe,De,be)),!1),le(Ye),!1);return{type:"inset",clipText:b,poses:R,top:he,left:be,right:Oe,bottom:De,radius:$,splitter:N}}else if(I==="rect"){var C=xd(O||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));N=",";var Ve=le(C.map(function(nn){var gn=$0(nn).value;return gn}),4),it=Ve[0],ke=Ve[1],te=Ve[2],be=Ve[3],R=S1(it,ke,te,be);return{type:"rect",clipText:b,poses:R,top:it,right:ke,bottom:te,left:be,values:C,splitter:N}}}}}function W1e(t,e,n,r,i){var a=t[e],s=a.direction,o=a.sub,c=t.map(function(){return[0,0]}),u=s?s.split(""):[];if(r&&e<8){var f=u.filter(function(z){return z==="w"||z==="e"}),h=u.filter(function(z){return z==="n"||z==="s"}),g=f[0],v=h[0];c[e]=n;var b=le($Y(t),2),x=b[0],w=b[1],S=x&&w?x/w:0;if(S&&i){var T=(e+4)%8,I=t[T].pos,P=[0,0];s.indexOf("w")>-1?P[0]=-1:s.indexOf("e")>-1&&(P[0]=1),s.indexOf("n")>-1?P[1]=-1:s.indexOf("s")>-1&&(P[1]=1);var O=DY([x,w],n,S,P,!0),D=x+O[0],N=w+O[1],C=I[1],R=I[1],M=I[0],V=I[0];P[0]===-1?M=V-D:P[0]===1?V=M+D:(M=M-D/2,V=V+D/2),P[1]===-1?C=R-N:(P[1]===1||(C=R-N/2),R=C+N);var L=S1(C,V,R,M);t.forEach(function(z,K){c[K][0]=L[K].pos[0]-z.pos[0],c[K][1]=L[K].pos[1]-z.pos[1]})}else t.forEach(function(z,K){var Y=z.direction;Y&&(Y.indexOf(g)>-1&&(c[K][0]=n[0]),Y.indexOf(v)>-1&&(c[K][1]=n[1]))}),g&&(c[1][0]=n[0]/2,c[5][0]=n[0]/2),v&&(c[3][1]=n[1]/2,c[7][1]=n[1]/2)}else s&&!o?u.forEach(function(z){var K=z==="n"||z==="s";t.forEach(function(Y,G){var X=Y.direction,J=Y.horizontal,ne=Y.vertical;!X||X.indexOf(z)===-1||(c[G]=[K||!J?0:n[0],!K||!ne?0:n[1]])})}):c[e]=n;return c}function Y1e(t,e){var n=le(HW(t,e),2),r=n[0],i=n[1],a=e.datas,s=a.clipPath,o=a.clipIndex,c=s,u=c.type,f=c.poses,h=c.splitter,g=f.map(function(T){return T.pos});if(u==="polygon")g.splice(o,0,[r,i]);else if(u==="inset"){var v=F1e.indexOf(o),b=$1e.indexOf(o),x=f.length;if(q1e(f,g,8,v,b,r,i,g[4][0],g[4][1],g[0][0],g[0][1]),x===f.length)return}else return;var w=OD(t,s,g),S="".concat(u,"(").concat(w.join(h),")");Be(t,"onClip",ht(t,e,se({clipEventType:"added",clipType:u,poses:g,clipStyles:w,clipStyle:S,distX:0,distY:0},bi({clipPath:S},e))))}function X1e(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,s=a.type,o=a.poses,c=a.splitter,u=o.map(function(v){return v.pos}),f=u.length;if(s==="polygon")o.splice(i,1),u.splice(i,1);else if(s==="inset"){if(i<8||(U1e(o,u,i,8,f),f===o.length))return}else return;var h=OD(t,r,u),g="".concat(s,"(").concat(h.join(c),")");Be(t,"onClip",ht(t,e,se({clipEventType:"removed",clipType:s,poses:u,clipStyles:h,clipStyle:g,distX:0,distY:0},bi({clipPath:g},e))))}var Q1e={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,s=n.zoom,o=n.groupable,c=t.getState(),u=c.target,f=c.width,h=c.height,g=c.allMatrix,v=c.is3d,b=c.left,x=c.top,w=c.pos1,S=c.pos2,T=c.pos3,I=c.pos4,P=c.clipPathState,O=c.snapBoundInfos,D=c.rotation;if(!u||o)return[];var N=VB(u,f,h,i||"inset",P||r);if(!N)return[];var C=v?4:3,R=N.type,M=N.poses,V=M.map(function(ke){var Oe=An(g,ke.pos,C);return[Oe[0]-b,Oe[1]-x]}),L=[],z=[],K=R==="rect",Y=R==="inset",G=R==="polygon";if(K||Y||G){var X=Y?V.slice(0,8):V;z=X.map(function(ke,Oe){var De=Oe===0?X[X.length-1]:X[Oe-1],Ye=Hn(De,ke),Ve=EY(De,ke);return e.createElement("div",{key:"clipLine".concat(Oe),className:Ze("line","clip-line","snap-control"),"data-clip-index":Oe,style:{width:"".concat(Ve,"px"),transform:"translate(".concat(De[0],"px, ").concat(De[1],"px) rotate(").concat(Ye,"rad) scaleY(").concat(s,")")}})})}if(L=V.map(function(ke,Oe){return e.createElement("div",{key:"clipControl".concat(Oe),className:Ze("control","clip-control","snap-control"),"data-clip-index":Oe,style:{transform:"translate(".concat(ke[0],"px, ").concat(ke[1],"px) rotate(").concat(D,"rad) scale(").concat(s,")")}})}),Y&&L.push.apply(L,Re([],le(V.slice(8).map(function(ke,Oe){return e.createElement("div",{key:"clipRadiusControl".concat(Oe),className:Ze("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Oe,style:{transform:"translate(".concat(ke[0],"px, ").concat(ke[1],"px) rotate(").concat(D,"rad) scale(").concat(s,")")}})})),!1)),R==="circle"||R==="ellipse"){var J=N.left,ne=N.top,Q=N.radiusX,$=N.radiusY,Z=le(tt(An(g,[J,ne],C),An(g,[0,0],C)),2),ee=Z[0],W=Z[1],ue="none";if(!a){for(var ie=Math.max(10,Q/5,$/5),oe=[],Se=0;Se<=ie;++Se){var ae=Math.PI*2/ie*Se;oe.push([Q+(Q-s)*Math.cos(ae),$+($-s)*Math.sin(ae)])}oe.push([Q,-2]),oe.push([-2,-2]),oe.push([-2,$*2+2]),oe.push([Q*2+2,$*2+2]),oe.push([Q*2+2,-2]),oe.push([Q,-2]),ue="polygon(".concat(oe.map(function(ke){return"".concat(ke[0],"px ").concat(ke[1],"px")}).join(", "),")")}L.push(e.createElement("div",{key:"clipEllipse",className:Ze("clip-ellipse","snap-control"),style:{width:"".concat(Q*2,"px"),height:"".concat($*2,"px"),clipPath:ue,transform:"translate(".concat(-b+ee,"px, ").concat(-x+W,"px) ").concat(y_(g))}}))}if(a){var Te=Ba(Re([w,S,T,I],le(V),!1)),he=Te.width,te=Te.height,Pe=Te.left,be=Te.top;if(G||K||Y){var oe=Y?V.slice(0,8):V;L.push(e.createElement("div",{key:"clipArea",className:Ze("clip-area","snap-control"),style:{width:"".concat(he,"px"),height:"".concat(te,"px"),transform:"translate(".concat(Pe,"px, ").concat(be,"px)"),clipPath:"polygon(".concat(oe.map(function(Oe){return"".concat(Oe[0]-Pe,"px ").concat(Oe[1]-be,"px")}).join(", "),")")}}))}}return O&&["vertical","horizontal"].forEach(function(ke){var Oe=O[ke],De=ke==="horizontal";Oe.isSnap&&z.push.apply(z,Re([],le(Oe.snap.posInfos.map(function(Ye,Ve){var it=Ye.pos,Ft=tt(An(g,De?[0,it]:[it,0],C),[b,x]),Le=tt(An(g,De?[f,it]:[it,h],C),[b,x]);return Zv(e,"",Ft,Le,s,"clip".concat(ke,"snap").concat(Ve),"guideline")})),!1)),Oe.isBound&&z.push.apply(z,Re([],le(Oe.bounds.map(function(Ye,Ve){var it=Ye.pos,Ft=tt(An(g,De?[0,it]:[it,0],C),[b,x]),Le=tt(An(g,De?[f,it]:[it,h],C),[b,x]);return Zv(e,"",Ft,Le,s,"clip".concat(ke,"bounds").concat(Ve),"guideline","bounds","bold")})),!1))}),Re(Re([],le(L),!1),le(z),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,se(se({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,s=n.target,o=n.width,c=n.height,u=e.inputEvent?e.inputEvent.target:null,f=u&&u.getAttribute("class")||"",h=e.datas,g=VB(s,o,c,i||"inset",a);if(!g)return!1;var v=g.clipText,b=g.type,x=g.poses,w=Be(t,"onClipStart",ht(t,e,{clipType:b,clipStyle:v,poses:x.map(function(S){return S.pos})}));return w===!1?(h.isClipStart=!1,!1):(h.isControl=f&&f.indexOf("clip-control")>-1,h.isLine=f.indexOf("clip-line")>-1,h.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,h.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,h.clipPath=g,h.isClipStart=!0,n.clipPathState=v,ff(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.originalDatas,o=e.isDragTarget;if(!a.isClipStart)return!1;var c=a,u=c.isControl,f=c.isLine,h=c.isArea,g=c.clipIndex,v=c.clipPath;if(!v)return!1;var b=Yd(t.props,"clippable"),x=b.keepRatio,w=0,S=0,T=s.draggable,I=No(e);o&&T?(n=le(T.prevBeforeDist,2),w=n[0],S=n[1]):(r=le(I,2),w=r[0],S=r[1]);var P=[w,S],O=t.state,D=O.width,N=O.height,C=!h&&!u&&!f,R=v.type,M=v.poses,V=v.splitter,L=M.map(function(wt){return wt.pos});C&&(w=-w,S=-S);var z=!u||M[g].direction==="nesw",K=R==="inset"||R==="rect",Y=M.map(function(){return[0,0]});if(u&&!z){var G=M[g],X=G.horizontal,J=G.vertical,ne=[w*Ie(X),S*Ie(J)];Y=W1e(M,g,ne,K,x)}else z&&(Y=L.map(function(){return[w,S]}));var Q=L.map(function(wt,En){return Pt(wt,Y[En])}),$=Re([],le(Q),!1);O.snapBoundInfos=null;var Z=v.type==="circle",ee=v.type==="ellipse";if(Z||ee){var W=Ba(Q),ue=Ie(W.bottom-W.top),ie=Ie(ee?W.right-W.left:ue),oe=Q[0][1]+ue,Se=Q[0][0]-ie,ae=Q[0][0]+ie;Z&&($.push([ae,W.bottom]),Y.push([1,0])),$.push([W.left,oe]),Y.push([0,1]),$.push([Se,W.bottom]),Y.push([1,0])}var Te=yY((b.clipHorizontalGuidelines||[]).map(function(wt){return Jt("".concat(wt),N)}),(b.clipVerticalGuidelines||[]).map(function(wt){return Jt("".concat(wt),D)}),D,N),he=[],te=[];if(Z||ee)he=[$[4][0],$[2][0]],te=[$[1][1],$[3][1]];else if(K){var Pe=[$[0],$[2],$[4],$[6]],be=[Y[0],Y[2],Y[4],Y[6]];he=Pe.filter(function(wt,En){return be[En][0]}).map(function(wt){return wt[0]}),te=Pe.filter(function(wt,En){return be[En][1]}).map(function(wt){return wt[1]})}else he=$.filter(function(wt,En){return Y[En][0]}).map(function(wt){return wt[0]}),te=$.filter(function(wt,En){return Y[En][1]}).map(function(wt){return wt[1]});var ke=[0,0],Oe=_B(Te,b.clipTargetBounds&&{left:0,top:0,right:D,bottom:N},he,te,5,5),De=Oe.horizontal,Ye=Oe.vertical,Ve=De.offset,it=Ye.offset;if(De.isBound&&(ke[1]+=Ve),Ye.isBound&&(ke[0]+=it),(ee||Z)&&Y[0][0]===0&&Y[0][1]===0){var W=Ba(Q),Ft=W.bottom-W.top,Le=ee?W.right-W.left:Ft,st=Ye.isBound?Ie(it):Ye.snapIndex===0?-it:it,ct=De.isBound?Ie(Ve):De.snapIndex===0?-Ve:Ve;Le-=st,Ft-=ct,Z&&(Ft=uY(Ye,De)>0?Ft:Le,Le=Ft);var xt=$[0];$[1][1]=xt[1]-Ft,$[2][0]=xt[0]+Le,$[3][1]=xt[1]+Ft,$[4][0]=xt[0]-Le}else if(K&&x&&u){var nn=le($Y(M),2),gn=nn[0],ur=nn[1],Do=gn&&ur?gn/ur:0,Fl=M[g],li=Fl.direction||"",Bn=$[1][1],oe=$[5][1],Se=$[7][0],ae=$[3][0];Ie(Ve)<=Ie(it)?Ve=gi(Ve)*Ie(it)/Do:it=gi(it)*Ie(Ve)*Do,li.indexOf("w")>-1?Se-=it:li.indexOf("e")>-1?ae-=it:(Se+=it/2,ae-=it/2),li.indexOf("n")>-1?Bn-=Ve:li.indexOf("s")>-1?oe-=Ve:(Bn+=Ve/2,oe-=Ve/2);var Kn=S1(Bn,ae,oe,Se);$.forEach(function(Ki,va){var ci;ci=le(Kn[va].pos,2),Ki[0]=ci[0],Ki[1]=ci[1]})}else $.forEach(function(wt,En){var Tn=Y[En];Tn[0]&&(wt[0]-=it),Tn[1]&&(wt[1]-=Ve)});var Sn=OD(t,v,Q),Yr="".concat(R,"(").concat(Sn.join(V),")");if(O.clipPathState=Yr,Z||ee)he=[$[4][0],$[2][0]],te=[$[1][1],$[3][1]];else if(K){var Pe=[$[0],$[2],$[4],$[6]];he=Pe.map(function(En){return En[0]}),te=Pe.map(function(En){return En[1]})}else he=$.map(function(wt){return wt[0]}),te=$.map(function(wt){return wt[1]});if(O.snapBoundInfos=_B(Te,b.clipTargetBounds&&{left:0,top:0,right:D,bottom:N},he,te,1,1),T){var _n=O.is3d,yf=O.allMatrix,$l=_n?4:3,Ul=ke;o&&(Ul=[P[0]+ke[0]-I[0],P[1]+ke[1]-I[1]]),T.deltaOffset=en(yf,[Ul[0],Ul[1],0,0],$l)}return Be(t,"onClip",ht(t,e,se({clipEventType:"changed",clipType:R,poses:Q,clipStyle:Yr,clipStyles:Sn,distX:w,distY:S},bi((i={},i[R==="rect"?"clip":"clipPath"]=Yr,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,s=r.isClipStart,o=r.isControl;return s?(Be(t,"onClipEnd",pa(t,e,{})),i&&(o?X1e(t,e):a&&Y1e(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Z1e={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":mr(e.inputEvent.target,Ze("origin"))},dragControlStart:function(t,e){var n=e.datas;ff(t,e);var r=ht(t,e,{dragStart:pi.dragStart(t,new Tp().dragStart([0,0],e))}),i=Be(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=le(No(e),2),s=a[0],o=a[1],c=t.state,u=c.width,f=c.height,h=c.offsetMatrix,g=c.targetMatrix,v=c.is3d,b=t.props.originRelative,x=b===void 0?!0:b,w=v?4:3,S=[s,o];if(i){var T=e.distOrigin;(T[0]||T[1])&&(S=T)}var I=Pt(n.startOrigin,S),P=Pt(n.startTargetOrigin,S),O=tt(S,n.prevOrigin),D=Q0(h,g,I,w),N=t.getRect(),C=Ba(hf(D,u,f,w)),R=[N.left-C.left,N.top-C.top];n.prevOrigin=S;var M=[fs(P[0],u,x),fs(P[1],f,x)].join(" "),V=pi.drag(t,X0(e,t.state,R,!!r)),L=ht(t,e,se(se({width:u,height:f,origin:I,dist:S,delta:O,transformOrigin:M,drag:V},bi({transformOrigin:M,transform:V.transform},e)),{afterTransform:V.transform}));return Be(t,"onDragOrigin",L),L},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Be(t,"onDragOriginEnd",pa(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-a[0],s[1]=o.origin[1]-a[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function J1e(t,e,n,r){var i=t.filter(function(c){var u=c.virtual,f=c.horizontal;return f&&!u}).length,a=t.filter(function(c){var u=c.virtual,f=c.vertical;return f&&!u}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(a===0?s=4:a<4&&(s=7)),e===1&&(a<=1?s=5:a<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];eSe(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function eSe(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function tSe(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function BB(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=au(t),FY(a,e,n,0,0,r,i)}function FB(t,e,n,r,i){var a=t.state,s=a.width,o=a.height,c=PD(i,t.props.roundRelative,s,o),u=c.raws,f=c.styles,h=c.radiusPoses,g=G1e(h,u),v=g.horizontals,b=g.verticals,x=f.join(" ");a.borderRadiusState=x;var w=ht(t,e,se({horizontals:v,verticals:b,borderRadius:x,width:s,height:o,delta:r,dist:n},bi({borderRadius:x},e)));return Be(t,"onRound",w),w}function $B(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],s=t.getTargets()[0];s&&(a?.props.target===s?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=AD(s).borderRadius,r.borderRadius=i))}return i}var nSe={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Ze("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,s=n.allMatrix,o=n.is3d,c=n.left,u=n.top,f=n.borderRadiusState,h=t.props,g=h.minRoundControls,v=g===void 0?[0,0]:g,b=h.maxRoundControls,x=b===void 0?[4,4]:b,w=h.zoom,S=h.roundPadding,T=S===void 0?0:S,I=h.isDisplayShadowRoundControls,P=h.groupable;if(!r)return null;var O=f||$B(t),D=o?4:3,N=BB(O,i,a,v,!0);if(!N)return null;var C=0,R=0,M=P?[0,0]:[c,u];return N.map(function(V,L){var z=V.horizontal,K=V.vertical,Y=V.direction||"",G=Re([],le(V.pos),!1);R+=Math.abs(z),C+=Math.abs(K),z&&Y.indexOf("n")>-1&&(G[1]-=T),K&&Y.indexOf("w")>-1&&(G[0]-=T),z&&Y.indexOf("s")>-1&&(G[1]+=T),K&&Y.indexOf("e")>-1&&(G[0]+=T);var X=tt(An(s,G,D),M),J=I&&I!=="horizontal",ne=V.vertical?C<=x[1]&&(J||!V.virtual):R<=x[0]&&(I||!V.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(L),className:Ze("control","border-radius",V.vertical?"vertical":"",V.virtual?"virtual":""),"data-radius-index":L,style:{display:ne?"block":"none",transform:"translate(".concat(X[0],"px, ").concat(X[1],"px) scale(").concat(w,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,o=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,c=s?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(o){var f=i.getAttribute("data-line-key")||"";f&&(u=parseInt(f.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!o)return!1;var h=ht(t,e,{}),g=Be(t,"onRoundStart",h);if(g===!1)return!1;r.lineIndex=u,r.controlIndex=c,r.isControl=s,r.isLine=o,ff(t,e);var v=t.props,b=v.roundRelative,x=v.minRoundControls,w=x===void 0?[0,0]:x,S=t.state,T=S.width,I=S.height;r.isRound=!0,r.prevDist=[0,0];var P=$B(t),O=BB(P||"",T,I,w,!0)||[];return r.controlPoses=O,S.borderRadiusState=PD(O,b,T,I).styles.join(" "),h},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=le(No(e),2),s=a[0],o=a[1],c=[s,o],u=tt(c,n.prevDist),f=t.props.maxRoundControls,h=f===void 0?[4,4]:f,g=t.state,v=g.width,b=g.height,x=r[i],w=x.vertical,S=x.horizontal,T=r.map(function(P){var O=P.horizontal,D=P.vertical,N=[O*S*c[0],D*w*c[1]];if(O){if(h[0]===1)return N;if(h[0]<4&&O!==S)return N}else{if(h[1]===0)return N[1]=D*S*c[0]/v*b,N;if(w){if(h[1]===1)return N;if(h[1]<4&&D!==w)return N}}return[0,0]});T[i]=c;var I=r.map(function(P,O){return se(se({},P),{pos:Pt(P.pos,T[O])})});return i<4?I.slice(0,i+1).forEach(function(P){P.virtual=!1}):I.slice(4,i+1).forEach(function(P){P.virtual=!1}),n.prevDist=[s,o],FB(t,e,c,u,I)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,s=r.controlIndex,o=r.isLine,c=r.lineIndex,u=r.controlPoses,f=u.filter(function(S){var T=S.virtual;return T}).length,h=t.props.roundClickable,g=h===void 0?!0:h;if(i&&g){if(a&&(g===!0||g==="control"))tSe(u,s);else if(o&&(g===!0||g==="line")){var v=le(HW(t,e),2),b=v[0],x=v[1];J1e(u,c,b,x)}f!==u.filter(function(S){var T=S.virtual;return T}).length&&FB(t,e,[0,0],[0,0],u)}var w=pa(t,e,{});return Be(t,"onRoundEnd",w),n.borderRadiusState="",w},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=_s(t,"roundable",e),s=se({targets:t.props.targets,events:a.map(function(o,c){return se(se({},o),{target:i[c],moveable:r[c],currentTarget:r[c]})})},n);return Be(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=_s(t,"roundable",e),s=se({targets:t.props.targets,events:a.map(function(o,c){return se(se(se({},o),{target:i[c],moveable:r[c],currentTarget:r[c]}),bi({borderRadius:n.borderRadius},o))})},n);return Be(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=_s(t,"roundable",e);b_(t,"onRound",function(o){var c=se({targets:t.props.targets,events:i.map(function(u,f){return se(se(se({},u),{target:r[f],moveable:n[f],currentTarget:n[f]}),bi({borderRadius:o.borderRadius},u))})},o);Be(t,"onRoundGroup",c)});var a=this.dragControlEnd(t,e);if(!a)return!1;var s=se({targets:t.props.targets,events:i.map(function(o,c){var u;return se(se({},o),{target:r[c],moveable:n[c],currentTarget:n[c],lastEvent:(u=o.datas)===null||u===void 0?void 0:u.lastEvent})})},a);return Be(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function rSe(t,e){var n=e?4:3,r=hn(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var UY={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,s=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(DW(i,!0),")"),o=!a||a==="none"?s:a;e.datas.startTransforms=rSe(o,r)?[]:au(o)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ht(t,e,{setTransform:function(n){e.datas.startTransforms=cr(n)?n:au(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ht(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Be(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Be(t,"onBeforeRender",ht(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Be(t,"onBeforeRenderEnd",ht(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=_s(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.setTransform(c,s),n.resetStyle(s),n.fillDragStartParams(c,s)});Be(t,"onBeforeRenderGroupStart",ht(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=_s(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.resetStyle(s),n.fillDragParams(c,s)});Be(t,"onBeforeRenderGroup",ht(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Be(t,"onBeforeRenderGroupEnd",ht(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},qY={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Be(t,"onRenderStart",ht(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Be(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Be(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Be(t,"onRenderGroupStart",ht(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=_s(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragParams(c,s)});Be(t,"onRenderGroup",ht(t,e,se(se({isPinch:!!e.isPinch,targets:t.props.targets,transform:mx(e),transformObject:{}},bi(vx(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=_s(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragEndParams(c,s)});Be(t,"onRenderGroupEnd",ht(t,e,se({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:mx(e)},bi(vx(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return Ep(g1(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ht(t,e,se({isPinch:!!e.isPinch,transformObject:n,transform:mx(e)},bi(vx(e))))},fillDragEndParams:function(t,e){var n={};return Ep(g1(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ht(t,e,se({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:mx(e)},bi(vx(e))))}};function xv(t,e,n,r,i,a,s){a.clientDistX=a.distX,a.clientDistY=a.distY;var o=i==="Start",c=i==="End",u=i==="After",f=t.state.target,h=a.isRequest,g=r.indexOf("Control")>-1;if(!f||o&&g&&!h&&t.areaElement===a.inputEvent.target)return!1;var v=Re([],le(e),!1);if(h){var b=a.requestAble;v.some(function(L){return L.name===b})||v.push.apply(v,Re([],le(t.props.ables.filter(function(L){return L.name===b})),!1))}if(!v.length||v.every(function(L){return L.dragRelation}))return!1;var x=a.inputEvent,w;c&&x&&(w=document.elementFromPoint(a.clientX,a.clientY)||x.target);var S=!1,T=function(){var L;S=!0,(L=a.stop)===null||L===void 0||L.call(a)},I=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());I&&t.updateRect(i,!0,!1);var P=a.datas,O=g?"controlGesto":"targetGesto",D=t[O],N=function(L,z,K){if(!(z in L)||D!==t[O])return!1;var Y=L.name,G=P[Y]||(P[Y]={});if(o&&(G.isEventStart=!K||!L[K]||L[K](t,a)),!G.isEventStart)return!1;var X=L[z](t,se(se({},a),{stop:T,datas:G,originalDatas:P,inputTarget:w}));return t._emitter.off(),o&&X===!1&&(G.isEventStart=!1),X};I&&v.forEach(function(L){L.unset&&L.unset(t)}),N(UY,"drag".concat(r).concat(i));var C=0,R=0;n.forEach(function(L){if(S)return!1;var z="".concat(L).concat(r).concat(i),K="".concat(L).concat(r,"Condition");i===""&&!h&&A1e(t.state,a);var Y=v.filter(function(J){return J[z]});Y=Y.filter(function(J,ne){return J.name&&Y.indexOf(J)===ne});var G=Y.filter(function(J){return N(J,z,K)}),X=G.length;S&&++C,X&&++R,!S&&o&&Y.length&&!X&&(C+=Y.filter(function(J){var ne=J.name,Q=P[ne];return Q.isEventStart?J.dragRelation!=="strong":!1}).length?1:0)}),(!u||R)&&N(qY,"drag".concat(r).concat(i));var M=D!==t[O]||C===n.length;if((c||S||M)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(L){L.state.gestos={}}),v.forEach(function(L){L.unset&&L.unset(t)})),o&&!M&&!h&&R&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||M)return!1;if(!o&&R&&!s||c){var V=t.props.flushSync||wY;V(function(){t.updateRect(c?i:"",!0,!1),t.forceUpdate()})}return!o&&!c&&!u&&R&&!s&&xv(t,e,n,r,i+"After",a),!0}function DD(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,s=t.areaElement,o=t._dragTarget;return!o||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===o||o.contains(a)||a===s||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||mr(a,"moveable-area")||mr(a,"moveable-padding")||mr(a,"moveable-edgeDraggable")}}function GY(t,e,n){var r=t.controlBox,i=[],a=t.props,s=a.dragArea,o=t.state.target,c=a.dragTarget;i.push(r),(!s||c)&&i.push(e),!s&&c&&o&&e!==o&&a.dragTargetSelf&&i.push(o);var u=DD(t);return KY(t,i,"targetAbles",n,{dragStart:u,pinchStart:u})}function HY(t,e){var n=t.controlBox,r=[];r.push(n);var i=DD(t,!0),a=function(s,o){if(o===void 0&&(o=s.inputEvent.target),o===n)return!0;var c=i(s,o);return!c};return KY(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function KY(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",s=t.props,o=s.pinchOutside,c=s.pinchThreshold,u=s.preventClickEventOnDrag,f=s.preventClickDefault,h=s.checkInput,g=s.dragFocusedInput,v=s.preventDefault,b=v===void 0?!0:v,x=s.preventRightClick,w=x===void 0?!0:x,S=s.preventWheelClick,T=S===void 0?!0:S,I=s.dragContainer,P=yo(I,!0),O={preventDefault:b,preventRightClick:w,preventWheelClick:T,container:P||Wc(t.getControlBoxElement()),pinchThreshold:c,pinchOutside:o,preventClickEventOnDrag:a?u:!1,preventClickEventOnDragStart:a?f:!1,preventClickEventByCondition:a?null:function(C){return t.controlBox.contains(C.target)},checkInput:a?h:!1,dragFocusedInput:g},D=new Nxe(e,O),N=r==="Control";return["drag","pinch"].forEach(function(C){["Start","","End"].forEach(function(R){D.on("".concat(C).concat(R),function(M){var V,L=M.eventType,z=C==="drag"&&M.isPinch;if(i[L]&&!i[L](M)){M.stop();return}if(!z){var K=C==="drag"?[C]:["drag",C],Y=Re([],le(t[n]),!1),G=xv(t,Y,K,r,R,M);G?(t.props.stopPropagation||R==="Start"&&N)&&((V=M?.inputEvent)===null||V===void 0||V.stopPropagation()):M.stop()}})})}),D}var iSe=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var s=i.eventName,o=i.moveable;o.state.disableNativeEvent||i.ables.forEach(function(c){c[s](o,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function aSe(t,e,n,r){var i;n===void 0&&(n=e);var a=ZW(t,e),s=a.matrixes,o=a.is3d,c=a.targetMatrix,u=a.transformOrigin,f=a.targetOrigin,h=a.offsetContainer,g=a.hasFixed,v=a.zoom,b=bwe(h,n),x=b.matrixes,w=b.is3d,S=b.offsetContainer,T=b.zoom,I=r,P=4,O=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,D=c,N=hn(P),C=hn(P),R=hn(P),M=hn(P),V=s.length,L=x.map(function(ne){return se(se({},ne),{matrix:ne.matrix?Re([],le(ne.matrix),!1):void 0})}).reverse();s.reverse(),!o&&I&&(D=ks(D,3,4),zN(s)),!w&&I&&zN(L),L.forEach(function(ne){C=en(C,ne.matrix,P)});var z=n||vu(t),K=((i=L[0])===null||i===void 0?void 0:i.target)||Jv(z,z,!0).offsetParent,Y=L.slice(1).reduce(function(ne,Q){return en(ne,Q.matrix,P)},hn(P));s.forEach(function(ne,Q){if(V-2===Q&&(R=N.slice()),V-1===Q&&(M=N.slice()),!ne.matrix){var $=s[Q+1],Z=S1e(ne,$,K,P,en(Y,N,P));ne.matrix=Kd(Z,P)}N=en(N,ne.matrix,P)});var G=!O&&o;D||(D=hn(G?4:3));var X=y_(O&&D.length===16?ks(D,4,3):D,G),J=C;return C=PW(C,P,P),{hasZoom:v!==1||T!==1,hasFixed:g,matrixes:s,rootMatrix:C,originalRootMatrix:J,beforeMatrix:R,offsetMatrix:M,allMatrix:N,targetMatrix:D,targetTransform:X,inlineTransform:t.style.transform,transformOrigin:u,targetOrigin:f,is3d:I,offsetContainer:h,offsetRootContainer:S}}function sSe(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,s=0,o={},c=TY(t);if(t&&(i=c.offsetWidth,a=c.offsetHeight),t){var u=aSe(t,e,n,r),f=Yh(u.allMatrix,u.transformOrigin,i,a);o=se(se({},u),f);var h=Yh(u.allMatrix,[50,50],100,100);s=AY([h.pos1,h.pos2],h.direction)}var g=4;return se(se(se({hasZoom:!1,width:i,height:a,rotation:s},c),{originalRootMatrix:hn(g),rootMatrix:hn(g),beforeMatrix:hn(g),offsetMatrix:hn(g),allMatrix:hn(g),targetMatrix:hn(g),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),o)}function FN(t,e,n,r,i,a){a===void 0&&(a=[]);var s=1,o=[0,0],c=bx(),u=bx(),f=bx(),h=bx(),g=[0,0],v={},b=sSe(e,n,i,!0);if(e){var x=qi(e);a.forEach(function(L){v[L]=x(L)});var w=b.is3d?4:3,S=Yh(b.offsetMatrix,Pt(b.transformOrigin,OW(b.targetMatrix,w)),b.width,b.height);s=S.direction,o=Pt(S.origin,[S.left-b.left,S.top-b.top]),h=bv(b.offsetRootContainer);var T=Jv(r,r,!0).offsetParent||b.offsetRootContainer;if(b.hasZoom){var I=Yh(en(b.originalRootMatrix,b.allMatrix),b.transformOrigin,b.width,b.height),P=Yh(b.originalRootMatrix,b1(qi(T)("transformOrigin")).map(function(L){return parseFloat(L)}),T.offsetWidth,T.offsetHeight);if(c=mk(I,h),f=mk(P,h,T,!0),t){var O=I.left,D=I.top;u=mk({left:O,top:D,bottom:D,right:D},h)}}else{c=bv(e),f=ywe(T),t&&(u=bv(t));var N=f.left,C=f.top,R=f.clientLeft,M=f.clientTop,V=[c.left-N,c.top-C];g=tt(Cp(b.rootMatrix,V,4),[R+b.left,M+b.top])}}return se({targetClientRect:c,containerClientRect:f,moveableClientRect:u,rootContainerClientRect:h,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:v,offsetDelta:g},b)}function UB(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Wd([e,n,r,i]),s=[a.minX,a.minY],o=tt(t.origin,s);return e=tt(e,s),n=tt(n,s),r=tt(r,s),i=tt(i,s),se(se({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:i,origin:o,beforeOrigin:o,isPersisted:!0})}var Ip=(function(t){W0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=se({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},FN(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new u_,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}wbe(n._observerId),n._observerId=aW(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,s=n.target,o=n.zoom,c=n.cspNonce,u=n.translateZ,f=n.cssStyled,h=n.groupable,g=n.linePadding,v=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var b=le(i||[0,0],2),x=b[0],w=b[1],S=r.left,T=r.top,I=r.target,P=r.direction,O=r.hasFixed,D=r.offsetDelta,N=n.targets,C=this.isDragging(),R={};this.getEnabledAbles().forEach(function(Y){R["data-able-".concat(Y.name.toLowerCase())]=!0});var M=this._getAbleClassName(),V=N&&N.length&&(I||h)||s||!this._hasFirstTarget&&this.state.isPersisted,L=this.controlBox||this.props.firstRenderState||this.props.persistData,z=[S-x,T-w];!h&&n.useAccuratePosition&&(z[0]+=D[0],z[1]+=D[1]);var K={position:O?"fixed":"absolute",display:V?"block":"none",visibility:L?"visible":"hidden",transform:"translate3d(".concat(z[0],"px, ").concat(z[1],"px, ").concat(u,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return g&&(K["--moveable-line-padding"]=g),v&&(K["--moveable-control-padding"]=v),Ss(f,se({cspNonce:c,ref:dl(this,"controlBox"),className:"".concat(Ze("control-box",P===-1?"reverse":"",C?"dragging":"")," ").concat(M," ").concat(a)},R,{onClick:this._onPreventClick,style:K}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),Vh(this,!1),Vh(this,!0);var a=this.events;for(var s in a){var o=a[s];o&&o.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Ui(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(pD)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&DD(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,s=r.pos2,o=r.pos3,c=r.pos4,u=r.targetClientRect;if(!i)return 0;var f;if(rg(n)){var h=n.getBoundingClientRect();f={left:h.left,top:h.top,width:h.width,height:h.height}}else f=se({width:0,height:0},n);var g=f.left,v=f.top,b=f.width,x=f.height,w=fB([a,s,c,o],u),S=Exe(w,[[g,v],[g+b,v],[g+b,v+x],[g,v+x]]),T=jW(w);return!S||!T?0:Math.min(100,S/T*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,s=i.pos1,o=i.pos2,c=i.pos3,u=i.pos4,f=i.targetClientRect;return a?EN([n,r],fB([s,o,u,c],f)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,s=!a.parentPosition&&!a.wrapperMoveable;s&&Ap(!0);var o=a.parentMoveable,c=this.state,u=c.target||a.target,f=this.getContainer(),h=o?o._rootContainer:this._rootContainer,g=FN(this.controlBox,u,f,f,h||f,this._getRequestStyles());if(!u&&this._hasFirstTarget&&a.persistData){var v=UB(a.persistData);for(var b in v)g[b]=v[b]}s&&Ap(),this.updateState(g,o?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,s=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var o=a.getEventData();return!!(!((r=o[n])===null||r===void 0)&&r.isEventStart)}if(s?.isFlag()){if(!n)return!0;var o=s.getEventData();return!!(!((i=o[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=qa(this.state),i=le(r,4),a=i[0],s=i[1],o=i[2],c=i[3],u=Ba(r),f=n.width,h=n.height,g=u.width,v=u.height,b=u.left,x=u.top,w=[n.left,n.top],S=Pt(w,n.origin),T=Pt(w,n.beforeOrigin),I=n.transformOrigin;return{width:g,height:v,left:b,top:x,pos1:a,pos2:s,pos3:o,pos4:c,offsetWidth:f,offsetHeight:h,beforeOrigin:T,origin:S,transformOrigin:I,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&LN(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&LN(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return I1e(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,s=a.props,o=s.parentMoveable||s.wrapperMoveable||a,c=o.props.ables,u=s.groupable,f=Ui(c,function(S){return S.name===n});if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var h=f.request(a),g=i||r.isInstant,v=h.isControl?"controlAbles":"targetAbles",b="".concat(u?"Group":"").concat(h.isControl?"Control":""),x=Re([],le(o[v]),!1),w={request:function(S){return xv(a,x,["drag"],b,"",se(se({},h.request(S)),{requestAble:n,isRequest:!0}),g),w},requestEnd:function(){return xv(a,x,["drag"],b,"End",se(se({},h.requestEnd()),{requestAble:n,isRequest:!0}),g),w}};return xv(a,x,["drag"],b,"Start",se(se({},h.requestStart(r)),{requestAble:n,isRequest:!0}),g),g?w.request(r).requestEnd():w},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,s=n.transformOrigin,o=n.allMatrix,c=n.is3d,u=n.pos1,f=n.pos2,h=n.pos3,g=n.pos4,v=n.left,b=n.top,x=n.isPersisted,w=r.zoom||1;if(!i&&w<=1){n.renderPoses=[u,f,h,g],n.renderLines=[[u,f],[f,g],[g,h],[h,u]];return}var S=jY(i||{}),T=S.left,I=S.top,P=S.bottom,O=S.right,D=c?4:3,N=[];x?N=s:this.controlBox&&r.groupable?N=a:N=Pt(a,[v,b]);var C=h1(D,Kd(N.map(function(K){return-K}),D),o,Kd(s,D)),R=Na(C,u,[-T,-I],D),M=Na(C,f,[O,-I],D),V=Na(C,h,[-T,P],D),L=Na(C,g,[O,P],D);n.renderPoses=[R,M,V,L],n.renderLines=[[R,M],[M,L],[L,V],[V,R]];{var z=w/2;n.renderLines=[[Na(C,u,[-T-z,-I],D),Na(C,f,[O+z,-I],D)],[Na(C,f,[O,-I-z],D),Na(C,g,[O,P+z],D)],[Na(C,g,[O+z,P],D),Na(C,h,[-T-z,P],D)],[Na(C,h,[-T,P+z],D),Na(C,u,[-T,-I-z],D)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,s=this.state,o=s.target,c=s.container;if(!(!o&&!r)){this.updateAbles();var u=!VN(o,r),f=u||!VN(c,i);if(f){var h=i||this.controlBox;h&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&h&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=VW(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,s=r.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&a){var o=UB(a);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,s=this.getEnabledAbles(n),o="drag".concat(r,"Start"),c="pinch".concat(r,"Start"),u="drag".concat(r,"ControlStart"),f=xx(s,[o,c],a),h=xx(s,[u],a);this.enabledAbles=s,this.targetAbles=f,this.controlAbles=h},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:Ss};return this.renderState={},T1e(OY(xx(this.getEnabledAbles(),["render"],i).map(function(s){var o=s.render;return o(n,a)||[]})).filter(function(s){return s}),function(s){var o=s.key;return o}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Re(Re([],le(r),!1),le(o),!1)},Re([],le(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(Vh(this,!1),this.updateState({gestos:{}})),r||Vh(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=GY(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=HY(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=yo(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,s=r.hideChildMoveableDefaultLines,o=r.parentMoveable;if(a||o&&s)return[];var c=this.getState(),u={createElement:Ss};return c.renderLines.map(function(f,h){return Zv(u,"",f[0],f[1],i,"render-line-".concat(h))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,s=this._prevDragArea,o=r.dragArea,c=!o&&a!==i,u=(n||o)&&s!==o;return c||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,s=El(a);if(this._isTargetChanged())for(var o in a){var c=a[o];c&&c.destroy(),a[o]=null}if(i){var u=this.enabledAbles;s.forEach(function(f){var h=xx(u,[f]),g=h.length>0,v=a[f];if(!g){v&&(v.destroy(),a[f]=null);return}v||(v=new iSe(i,n,f),a[f]=v),v.setAbles(h)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=yo(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=yo(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Re(Re([],le(this._getAbleViewClassNames()),!1),[this.isDragging()?j1e:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=PY(n.filter(Boolean),function(u){return u}).map(function(u){var f=le(u,1),h=f[0];return h}),a=this._viewClassNames,s=U0(a,i),o=s.removed,c=s.added;o.forEach(function(u){uW(r,a[u])}),c.forEach(function(u){cW(r,i[u])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,s=this.controlGesto,o=a?.isFlag()?a.getEventData():{},c=s?.isFlag()?s.getEventData():{};return i.map(function(u){var f,h,g,v=u.name,b=((f=u.className)===null||f===void 0?void 0:f.call(u,r))||"";return(!((h=o[v])===null||h===void 0)&&h.isEventStart||!((g=c[v])===null||g===void 0)&&g.isEventStart)&&(b+=" ".concat(Ze("".concat(v).concat(n,"-dragging")))),b.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,s=Wc(this.getControlBoxElement());if(!s.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var o=new s.ResizeObserver(this.checkUpdateRect);o.observe(a,{box:"border-box"}),this._reiszeObserver=o}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,s=a.target,o=Wc(this.getControlBoxElement());if(!o.MutationObserver||!s||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===s&&this._mutationObserver)){var c=new o.MutationObserver(function(u){var f,h;try{for(var g=Fxe(u),v=g.next();!v.done;v=g.next()){var b=v.value;b.type==="attributes"&&b.attributeName==="style"&&r.checkUpdateRect()}}catch(x){f={error:x}}finally{try{v&&!v.done&&(h=g.return)&&h.call(g)}finally{if(f)throw f.error}}});c.observe(s,{attributes:!0}),this._mutationObserver=c}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:wY,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(vW),RD={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),s=a.left,o=a.top,c=a.isPersisted,u=r.zoom||1,f=t.renderGroupRects,h=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];c?i=h.map(function(){return null}):h=[];var g=Bh(t,"parentPosition",[s,o],function(b){return b.join(",")}),v=Bh(t,"requestStyles",t.getRequestChildStyles(),function(b){return b.join(",")});return t.moveables=t.moveables.slice(0,i.length),Re(Re([],le(i.map(function(b,x){return e.createElement(Ip,{key:"moveable"+x,ref:tW(t,"moveables",x),target:b,origin:!1,requestStyles:v,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,o],persistData:h[x],zoom:u})})),!1),le(OY(f.map(function(b,x){var w=b.pos1,S=b.pos2,T=b.pos3,I=b.pos4,P=[w,S,T,I];return[[0,1],[1,3],[3,2],[2,0]].map(function(O,D){var N=le(O,2),C=N[0],R=N[1];return Zv(e,"",tt(P[C],g),tt(P[R],g),u,"group-rect-".concat(x,"-").concat(D))})}))),!1)}},oSe=Y0("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),s=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||s)){var o=n.contains(i);Be(t,"onClick",ht(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),s=a>-1,o=!1;a===-1&&(a=_l(i,function(c){return c.contains(r)}),o=a>-1),Be(t,"onClickGroup",ht(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:s,containsTarget:o,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function dh(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),se(se({},t),{datas:e})}var lSe=Y0("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?tY(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&mr(i,Ze("direction"))&&mr(i,Ze("edge"))&&mr(i,Ze("edgeDraggable"))},dragStart:function(t,e){return pi.dragStart(t,dh(e))},drag:function(t,e){return pi.drag(t,dh(e))},dragEnd:function(t,e){return pi.dragEnd(t,dh(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&mr(i,Ze("direction"))&&mr(i,Ze("line"))},dragGroupStart:function(t,e){return pi.dragGroupStart(t,dh(e))},dragGroup:function(t,e){return pi.dragGroup(t,dh(e))},dragGroupEnd:function(t,e){return pi.dragGroupEnd(t,dh(e))},unset:function(t){return pi.unset(t)}}),WY={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},MD=[UY,VY,f1e,P1e,pi,lSe,RN,O1e,R1e,Wwe,V1e,B1e,z1e,Z1e,Q1e,nSe,RD,WY,oSe,LY,qY],cSe=MD.reduce(function(t,e){return(e.events||[]).forEach(function(n){lW(t,n)}),t},[]),uSe=MD.reduce(function(t,e){return(e.props||[]).forEach(function(n){lW(t,n)}),t},[]);function qB(t,e){var n=le(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function _x(t,e){var n=le(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function GB(t,e){return Math.max.apply(Math,Re([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.max(i[e],a[e],s[e],o[e])})),!1))}function HB(t,e){return Math.min.apply(Math,Re([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.min(i[e],a[e],s[e],o[e])})),!1))}function dSe(t,e){var n,r,i,a=[0,0],s=[0,0],o=[0,0],c=[0,0],u=0,f=0;if(!t.length)return{pos1:a,pos2:s,pos3:o,pos4:c,minX:0,minY:0,maxX:0,maxY:0,width:u,height:f,rotation:e};var h=lt(e,Si);if(h%90){var g=h/180*Math.PI,v=Math.tan(g),b=-1/v,x=[NN,gB],w=[[0,0],[0,0]],S=[NN,gB],T=[[0,0],[0,0]];t.forEach(function(ee){ee.forEach(function(W){var ue=qB([-v,1,0],W),ie=qB([-b,1,0],W);x[0]>ue&&(w[0]=W,x[0]=ue),x[1]<ue&&(w[1]=W,x[1]=ue),S[0]>ie&&(T[0]=W,S[0]=ie),S[1]<ie&&(T[1]=W,S[1]=ie)})});var I=le(w,2),P=I[0],O=I[1],D=le(T,2),N=D[0],C=D[1],R=[-v,1,_x([-v,1],P)],M=[-v,1,_x([-v,1],O)],V=[-b,1,_x([-b,1],N)],L=[-b,1,_x([-b,1],C)];n=le([[R,V],[R,L],[M,V],[M,L]].map(function(ee){var W=le(ee,2),ue=W[0],ie=W[1];return fD(ue,ie)[0]}),4),a=n[0],s=n[1],o=n[2],c=n[3],u=S[1]-S[0],f=x[1]-x[0]}else{var z=HB(t,0),K=HB(t,1),Y=GB(t,0),G=GB(t,1);if(a=[z,K],s=[Y,K],o=[z,G],c=[Y,G],u=Y-z,f=G-K,h%180){var X=[o,a,c,s];r=le(X,4),a=r[0],s=r[1],o=r[2],c=r[3],u=G-K,f=Y-z}}if(h%360>180){var X=[c,o,s,a];i=le(X,4),a=i[0],s=i[1],o=i[2],c=i[3]}var J=Wd([a,s,o,c]),ne=J.minX,Q=J.minY,$=J.maxX,Z=J.maxY;return{pos1:a,pos2:s,pos3:o,pos4:c,width:u,height:f,minX:ne,minY:Q,maxX:$,maxY:Z,rotation:e}}function YY(t,e){var n=e.map(function(r){if(cr(r)){var i=YY(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var s=Ui(t,function(o){var c=o.manager;return c.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&cr(n[0])?n[0]:n}var fSe=(function(t){W0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new MW,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;Ap(!0),this.moveables.forEach(function(Se){Se.updateRect(n,!1,!1)});var o=this.props,c=this.moveables,u=s.target||o.target,f=c.map(function(Se){return{finded:!1,manager:Se}}),h=this.props.targetGroups||[],g=YY(f,h),v=o.useDefaultGroupRotate;g.push.apply(g,Re([],le(f.filter(function(Se){var ae=Se.finded;return!ae}).map(function(Se){var ae=Se.manager;return ae})),!1));var b=[],x=!r||n!==""&&o.updateGroup,w=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var S=(a=o.persistData)===null||a===void 0?void 0:a.rotation;S!=null&&(w=S)}function T(Se,ae,Te){var he=Se.map(function(Ye){if(cr(Ye)){var Ve=T(Ye,ae),it=[Ve.pos1,Ve.pos2,Ve.pos3,Ve.pos4];return b.push(Ve),{poses:it,rotation:Ve.rotation}}else return{poses:qa(Ye.state),rotation:Ye.getRotation()}}),te=he.map(function(Ye){var Ve=Ye.rotation;return Ve}),Pe=0,be=te[0],ke=te.every(function(Ye){return Math.abs(be-Ye)<.1});x?Pe=!v&&ke?be:w:Pe=!v&&!Te&&ke?be:ae;var Oe=he.map(function(Ye){var Ve=Ye.poses;return Ve}),De=dSe(Oe,Pe);return De}var I=T(g,this.rotation,!0);x&&(this.rotation=I.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=h,this.renderGroupRects=b;var P=this.transformOrigin,O=this.rotation,D=this.scale,N=I.width,C=I.height,R=I.minX,M=I.minY,V=N1e([[0,0],[N,0],[0,C],[N,C]],ND(P,N,C),this.rotation/180*Math.PI),L=Wd(V.result),z=L.minX,K=L.minY,Y=" rotate(".concat(O,"deg)")+" scale(".concat(gi(D[0]),", ").concat(gi(D[1]),")"),G="translate(".concat(-z,"px, ").concat(-K,"px)").concat(Y);this.controlBox.style.transform="translate3d(".concat(R,"px, ").concat(M,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(P,";")+"width:".concat(N,"px;height:").concat(C,"px;")+"transform: ".concat(G),s.width=N,s.height=C;var X=this.getContainer(),J=FN(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||X,[]),ne=[J.left,J.top],Q=le(qa(J),4),$=Q[0],Z=Q[1],ee=Q[2],W=Q[3],ue=Wd([$,Z,ee,W]),ie=[ue.minX,ue.minY],oe=gi(D[0]*D[1]);J.pos1=tt($,ie),J.pos2=tt(Z,ie),J.pos3=tt(ee,ie),J.pos4=tt(W,ie),J.left=R-J.left+ie[0],J.top=M-J.top+ie[1],J.origin=tt(Pt(ne,J.origin),ie),J.beforeOrigin=tt(Pt(ne,J.beforeOrigin),ie),J.originalBeforeOrigin=Pt(ne,J.originalBeforeOrigin),J.transformOrigin=tt(Pt(ne,J.transformOrigin),ie),u.style.transform="translate(".concat(-z-ie[0],"px, ").concat(-K-ie[1],"px)")+Y,Ap(),this.updateState(se(se({},J),{posDelta:ie,direction:oe,beforeDirection:oe}),i)},e.prototype.getRect=function(){return se(se({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Re(Re([],le(r),!1),le(o),!1)},[]);return n},e.prototype.getMoveables=function(){return Re([],le(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Re(Re([],le(this.props.ables),!1),[RD],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=yo(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,s=r.targets,o=this.differ.update(s),c=o.added,u=o.changed,f=o.removed,h=c.length||f.length;(h||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Vh(this,!1),Vh(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=GY(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=HY(this,"GroupControl")));var g=!VN(n.container,r.container);g&&(n.container=r.container),(g||h||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||u.length||s.length&&!MY(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!h},e.prototype._updateObserver=function(){},e.defaultProps=se(se({},Ip.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(Ip),hSe=(function(t){W0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,s=i.cssStyled,o=i.persistData,c=i.targets||[],u=c.length,f=this.isUnmounted||!u,h=(r=o?.children)!==null&&r!==void 0?r:[];return f&&!u&&h.length?c=h.map(function(){return null}):f||(h=[]),Ss(s,{cspNonce:a,ref:dl(this,"controlBox"),className:Ze("control-box")},c.map(function(g,v){var b,x,w=(x=(b=i.individualGroupableProps)===null||b===void 0?void 0:b.call(i,g,v))!==null&&x!==void 0?x:{};return Ss(Ip,se({key:"moveable"+v,ref:tW(n,"moveables",v)},i,w,{target:g,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:h[v]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),Ap(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),Ap()},e.prototype.getRect=function(){return se(se({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(c){return c.request(n,se(se({},r),{isInstant:!1}),!1)}),s=i||r.isInstant,o={request:function(c){return a.forEach(function(u){return u.request(c)}),this},requestEnd:function(){return a.forEach(function(c){return c.requestEnd()}),this}};return s?o.request(r).requestEnd():o},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Ui(this.moveables,function(s){var o=s.getTargets()[0],c=s.getControlBoxElement(),u=s.getDragElement();return!o||!u?!1:u===i||u.contains(i)||u!==o&&o===i||o.contains(i)||c===i||c.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Re([],le(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(Ip);function XY(t,e){var n=[];return t.forEach(function(r){if(r){if($i(r)){e[r]&&n.push.apply(n,Re([],le(e[r]),!1));return}cr(r)?n.push.apply(n,Re([],le(XY(r,e)),!1)):n.push(r)}}),n}function QY(t,e){var n=[];return t.forEach(function(r){if(r){if($i(r)){e[r]&&n.push.apply(n,Re([],le(e[r]),!1));return}cr(r)?n.push(QY(r,e)):n.push(r)}}),n}function ZY(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?cr(n)&&cr(i)?ZY(n,i):!0:!1})}var pSe=(function(t){W0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new MW,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var s=a.css;s&&s.forEach(function(o){n[o]=!0})});var i=El(n).join(`
`);this.defaultStyled=VW("div",cbe(pD,Zxe+i))},e.getTotalAbles=function(){return Re([VY,RD,WY,LY],le(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,s=i.props,o=Vxe(i,["ables","props"]),c=le(this._updateRefs(!0),2),u=c[0],f=c[1],h=XY(u,f),g=h.length>1,v=r.getTotalAbles(),b=Re(Re([],le(v),!1),le(a||[]),!1),x=se(se(se({},o),s||{}),{ables:b,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=h;var w=null,S=this.moveable,T=o.persistData;if(T?.children&&(g=!0),o.individualGroupable)return Ss(hSe,se({key:"individual-group",ref:dl(this,"moveable")},x,{target:null,targets:h}));if(g){var I=QY(u,f);if(S&&!S.props.groupable&&!S.props.individualGroupable){var P=S.props.target;P&&h.indexOf(P)>-1&&(w=se({},S.state))}return Ss(fSe,se({key:"group",ref:dl(this,"moveable")},x,(n=o.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:h,targetGroups:I,firstRenderState:w}))}else{var O=h[0];if(S&&(S.props.groupable||S.props.individualGroupable)){var D=S.moveables||[],N=Ui(D,function(C){return C.props.target===O});N&&(w=se({},N.state))}return Ss(Ip,se({key:"single",ref:dl(this,"moveable")},x,{target:O,firstRenderState:w}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=ID(this.props.target||this.props.targets),a=typeof document<"u",s=ZY(r,i),o=this.selectorMap,c={};return this.refTargets.forEach(function u(f){if($i(f)){var h=o[f];h?c[f]=o[f]:a&&(s=!0,c[f]=[].slice.call(document.querySelectorAll(f)))}else cr(f)&&f.forEach(u)}),this._tmpRefTargets=i,this._tmpSelectorMap=c,[i,c,!n&&s]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),s=a.added,o=a.removed,c=s.length||o.length;c&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var u=le(this._updateRefs(),3),f=u[0],h=u[1],g=u[2];this.refTargets=f,this.selectorMap=h,g&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,Bxe([ube(GW)],e.prototype,"moveable",void 0),e})(vW),gSe=(function(t){W0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=MD,e})(pSe),$N=function(t,e){return $N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},$N(t,e)};function jD(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");$N(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var e0=function(){return e0=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},e0.apply(this,arguments)};function mSe(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var vSe=(function(t){jD(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return Ss(gSe,e0({ref:dl(this,"moveable")},this.state))},e})(sD),ySe=uSe,bSe=GW,xSe=cSe,wSe=(function(t){jD(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var s=e0({},i),o={};xSe.forEach(function(f){o[xbe("on ".concat(f))]=function(h){return a.trigger(f,h)}});var c;i.warpSelf?(delete i.warpSelf,a._warp=!0,c=r):(c=ng(r).createElement("div"),r.appendChild(c)),a.containerProvider=cB(Ss(vSe,e0({ref:dl(a,"innerMoveable")},s,o)),c),a.selfElement=c;var u=s.target;return cr(u)&&u.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;cB(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=mSe([eB(bSe,function(r,i){r[i]||(r[i]=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[i]))return o[i].apply(o,a)})}),eB(ySe,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var s;this.setState((s={},s[i]=a,s))},enumerable:!0,configurable:!0})})],e),e})(u_),JY=(function(t){jD(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(wSe),Fc=(t=>(t.Mouse="mouse",t.Touch="touch",t.Pointer="pointer",t))(Fc||{}),Xm=(t=>(t.CancelledByMovement="cancelled-by-movement",t.CancelledByRelease="cancelled-by-release",t.CancelledOutsideElement="cancelled-outside-element",t))(Xm||{});const SSe=["mousedown","mousemove","mouseup","mouseleave","mouseout"],_Se=["touchstart","touchmove","touchend","touchcancel"],ESe=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function TSe(t){return typeof t=="object"&&t!==null&&"pageX"in t&&typeof t.pageX=="number"&&"pageY"in t&&typeof t.pageY=="number"}function ASe(t){var e;return SSe.includes((e=t?.nativeEvent)==null?void 0:e.type)}function eX(t){var e;return _Se.includes((e=t?.nativeEvent)==null?void 0:e.type)||"touches"in t}function kSe(t){const{nativeEvent:e}=t;return e?ESe.includes(e?.type)||"pointerId"in e:!1}function bk(t){return ASe(t)||eX(t)||kSe(t)}function KB(t){var e;const n=eX(t)?(e=t?.touches)==null?void 0:e[0]:t;return TSe(n)?{x:n.pageX,y:n.pageY}:null}function CSe(t){return{target:t.target,currentTarget:t.currentTarget,nativeEvent:t,persist:()=>{}}}function zD(t,{threshold:e=400,captureEvent:n=!1,detect:r=Fc.Pointer,cancelOnMovement:i=!1,cancelOutsideElement:a=!0,filterEvents:s,onStart:o,onMove:c,onFinish:u,onCancel:f}={}){const h=A.useRef(!1),g=A.useRef(!1),v=A.useRef(),b=A.useRef(),x=A.useRef(t),w=A.useRef(null),S=A.useCallback(O=>D=>{g.current||bk(D)&&(s!==void 0&&!s(D)||(n&&D.persist(),o?.(D,{context:O}),w.current=KB(D),g.current=!0,v.current=D.currentTarget,b.current=setTimeout(()=>{x.current&&(x.current(D,{context:O}),h.current=!0)},e)))},[n,s,o,e]),T=A.useCallback(O=>(D,N)=>{bk(D)&&g.current&&(w.current=null,n&&D.persist(),h.current?u?.(D,{context:O}):g.current&&f?.(D,{context:O,reason:N??Xm.CancelledByRelease}),h.current=!1,g.current=!1,b.current!==void 0&&clearTimeout(b.current))},[n,u,f]),I=A.useCallback(O=>D=>{if(bk(D)&&(c?.(D,{context:O}),i!==!1&&w.current)){const N=KB(D);if(N){const C=i===!0?25:i,R={x:Math.abs(N.x-w.current.x),y:Math.abs(N.y-w.current.y)};(R.x>C||R.y>C)&&T(O)(D,Xm.CancelledByMovement)}}},[T,i,c]),P=A.useCallback(O=>{if(t===null)return{};switch(r){case Fc.Mouse:{const D={onMouseDown:S(O),onMouseMove:I(O),onMouseUp:T(O)};return a&&(D.onMouseLeave=N=>{T(O)(N,Xm.CancelledOutsideElement)}),D}case Fc.Touch:return{onTouchStart:S(O),onTouchMove:I(O),onTouchEnd:T(O)};case Fc.Pointer:{const D={onPointerDown:S(O),onPointerMove:I(O),onPointerUp:T(O)};return a&&(D.onPointerLeave=N=>T(O)(N,Xm.CancelledOutsideElement)),D}}},[t,T,a,r,I,S]);return A.useEffect(()=>{function O(D){const N=CSe(D);T()(N)}return window.addEventListener("mouseup",O),window.addEventListener("touchend",O),window.addEventListener("pointerup",O),()=>{window.removeEventListener("mouseup",O),window.removeEventListener("touchend",O),window.removeEventListener("pointerup",O)}},[T]),A.useEffect(()=>()=>{b.current!==void 0&&clearTimeout(b.current)},[]),A.useEffect(()=>{x.current=t},[t]),P}const tX=()=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){const e=document.getElementById("ios-haptic-trigger");e&&e.click()}else typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50)},_1=t=>t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="number"?new Date(t):t?.toDate&&typeof t.toDate=="function"?t.toDate():new Date:new Date,id=t=>_1(t).toISOString(),ISe=t=>{const e=_1(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},NSe=t=>{const e=t.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},Xh=t=>{const e=t;let n=0;typeof e.amount=="number"?n=e.amount:typeof e.amount=="string"&&(n=parseFloat(e.amount)),isNaN(n)&&(n=0);const r=id(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:n,date:r,month:e.month||ISe(r),description:e.description||"",merchant:e.merchant||void 0,type:NSe(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,splitGroupId:e.splitGroupId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}},Ex=t=>Hr(rt,"users",t,"transactions"),PSe={subscribeToTransactions:(t,e)=>{const n=ji(Ex(t),xs("date","desc"));return nu(n,i=>{const a=i.docs.map(s=>Xh({id:s.id,...s.data()}));e(a)})},subscribeToTransactionsByMonth:(t,e,n)=>{U.log(` TransactionService: Subscribing to transactions for ${e}`);const r=ji(Ex(t),cw("month","==",e),xs("date","desc"));return nu(r,i=>{const a=i.docs.map(s=>Xh({id:s.id,...s.data()}));n(a)},i=>{U.error(` TransactionService: Subscription failed for ${e}:`,i)})},getAllTransactions:async t=>{U.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=ji(Ex(t),xs("date","desc")),r=(await ra(e)).docs.map(i=>Xh({id:i.id,...i.data()}));return U.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");U.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),U.log(` Original transaction had temp ID: ${n}`);try{U.log(" About to call addDoc with:",r);const i=await JS(Ex(e),r);U.log(" addDoc succeeded, docRef:",i),U.log(` Document ID: ${i.id}`),U.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return U.log(" Final result object:",a),a}catch(i){U.error(" addDoc failed:",i);const a=i;throw U.error("Error message:",a.message),i}},updateTransaction:async(t,e,n)=>{const r=Et(rt,"users",t,"transactions",e);return await ao(r,n)},deleteTransaction:async(t,e)=>{U.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=Et(rt,"users",t,"transactions",e);U.log(` Deleting document at path: ${n.path}`),await sa(n),U.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){U.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n);const r=n;throw U.error("Error message:",r.message),n}}},xk=t=>Hr(rt,"users",t,"envelopes"),OSe={subscribeToEnvelopes:(t,e)=>{const n=ji(xk(t),xs("orderIndex","asc"));return nu(n,i=>{const a=i.docs.map(s=>{const o=s.data();return{id:s.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated}});e(a)})},getAllEnvelopes:async t=>{try{U.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=xk(t),i=(await ra(e)).docs.map((a,s)=>{const o=a.data();return{id:a.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated,orderIndex:o.orderIndex??s}}).sort((a,s)=>{const o=a.orderIndex??0,c=s.orderIndex??0;return o-c});return U.log(" Fetched envelopes:",i.length),i}catch(e){return U.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await JS(xk(e),r)).id,...r,userId:e}}catch(i){throw U.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=Et(rt,"users",t,"envelopes",e.id);return await aa(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=Et(rt,"users",t,"envelopes",e);return await ao(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{U.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=Et(rt,"users",t,"envelopes",e);await sa(n),U.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},wk=t=>Hr(rt,"users",t,"distributionTemplates"),DSe={subscribeToDistributionTemplates:(t,e)=>{const n=ji(wk(t),xs("lastUsed","desc"));return nu(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=ji(wk(t),xs("lastUsed","desc"));return(await ra(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");U.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await JS(wk(e),r);U.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return U.log(" Final template result object:",a),a}catch(i){throw U.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=Et(rt,"users",t,"distributionTemplates",e.id);return await aa(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=Et(rt,"users",t,"distributionTemplates",e);return await ao(r,n)},deleteDistributionTemplate:async(t,e)=>{U.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=Et(rt,"users",t,"distributionTemplates",e);await sa(n),U.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},Sk=t=>Hr(rt,"users",t,"appSettings"),nX={subscribeToAppSettings:(t,e)=>{const n=ji(Sk(t),I5(1));return nu(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(s=>({id:s.id,...s.data()}))[0];e(a)})},getAppSettings:async t=>{const e=ji(Sk(t),I5(1)),n=await ra(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");U.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await JS(Sk(e),n);U.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return U.log(" Final settings result object:",i),i}catch(r){throw U.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=Et(rt,"users",t,"appSettings",e.id);return await aa(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=Et(rt,"users",t,"appSettings",e);return await aa(r,n,{merge:!0})},deleteAppSettings:async(t,e)=>{U.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=Et(rt,"users",t,"appSettings",e);await sa(n),U.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},WB=Object.freeze(Object.defineProperty({__proto__:null,AppSettingsService:nX},Symbol.toStringTag,{value:"Module"}));class sl{static instance;constructor(){}static getInstance(){return sl.instance||(sl.instance=new sl),sl.instance}createId(){return Et(Hr(rt,"temp")).id}async createCategory(e){const n=Et(rt,`users/${e.userId}/categories`,e.id);return await aa(n,e),e}async getCategories(e){const n=ji(Hr(rt,`users/${e}/categories`),xs("orderIndex","asc"));return(await ra(n)).docs.map(i=>i.data())}async updateCategory(e,n){const r=Et(rt,`users/${e}/categories`,n.id);await aa(r,n,{merge:!0})}async deleteCategory(e,n){const r=Et(rt,`users/${e}/categories`,n);await sa(r)}async reorderCategories(e,n){const r=UI(rt);n.forEach((i,a)=>{const s=Et(rt,`users/${e}/categories`,i.id);r.update(s,{orderIndex:a})}),await r.commit()}async deduplicateCategories(e){const n=await this.getCategories(e),r=new Map,i=[];for(const s of n){const o=s.name.toLowerCase().trim();r.has(o)?i.push(s.id):r.set(o,s)}if(i.length===0)return U.log(" No duplicate categories found"),0;U.log(` Found ${i.length} duplicate categories to remove`);const a=450;for(let s=0;s<i.length;s+=a){const o=UI(rt);i.slice(s,s+a).forEach(u=>{const f=Et(rt,`users/${e}/categories`,u);o.delete(f)}),await o.commit(),U.log(` Deleted batch ${Math.floor(s/a)+1}`)}return U.log(` Removed ${i.length} duplicate categories`),i.length}subscribeToCategories(e,n){const r=ji(Hr(rt,`users/${e}/categories`),xs("orderIndex","asc"));return nu(r,i=>{const a=i.docs.map(s=>s.data());n(a)},i=>{U.error(" Category subscription error:",i)})}}sl.getInstance();class vs{static instance;static getInstance(){return vs.instance||(vs.instance=new vs),vs.instance}async restoreUserData(e,n){try{U.log(" BudgetService.restoreUserData: STARTING RESTORE for user:",e),await this.deleteAllUserData(e);const r=[{name:"envelopes",data:n.envelopes||[]},{name:"transactions",data:n.transactions||[]},{name:"categories",data:n.categories||[]},{name:"envelopeAllocations",data:n.allocations?Object.values(n.allocations).flat():[]},{name:"monthlyBudgets",data:this.prepareMonthlyBudgetsData(n.allocations,n.incomeSources)},{name:"appSettings",data:n.appSettings?[n.appSettings]:[]}],i=[];for(const{name:s,data:o}of r)if(Array.isArray(o))for(const c of o){if(!c.id&&s!=="monthlyBudgets")continue;const u={...c,userId:e};let f=c.id;s==="monthlyBudgets"&&c.month&&(f=c.month);const h=Et(rt,"users",e,s,f);i.push({ref:h,data:u})}U.log(` Prepared ${i.length} items for restoration.`);const a=450;for(let s=0;s<i.length;s+=a){const o=UI(rt);i.slice(s,s+a).forEach(u=>{o.set(u.ref,u.data)}),U.log(` Committing batch ${Math.floor(s/a)+1}/${Math.ceil(i.length/a)}...`),await o.commit()}U.log(" Restore completed successfully.")}catch(r){throw U.warn(` BudgetService.restoreUserData failed: ${r}`),new Error(`Failed to restore user data: ${r instanceof Error?r.message:"Unknown error"}`)}}async getEnvelopes(e){try{U.log(" BudgetService.getEnvelopes called for user:",e);const n=Hr(rt,"users",e,"envelopes"),a=(await ra(n)).docs.map((s,o)=>({id:s.id,...s.data(),orderIndex:s.data().orderIndex??o})).sort((s,o)=>{const c=s.orderIndex??0,u=o.orderIndex??0;return c-u});return U.log(" Fetched envelopes:",a.length),a}catch(n){throw U.warn(` BudgetService.getEnvelopes failed: ${n}`),new Error(`Failed to fetch envelopes: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactions(e){try{U.log(" BudgetService.getTransactions: Fetching for user",e);const n=Hr(rt,"users",e,"transactions"),r=ji(n,xs("date","desc")),a=(await ra(r)).docs.map(s=>{const o={id:s.id,...s.data()};return Xh(o)});return U.log(` Fetched ${a.length} transactions`),a}catch(n){throw U.warn(` BudgetService.getTransactions failed: ${n}`),new Error(`Failed to fetch transactions: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactionsByMonth(e,n){try{U.log(` BudgetService.getTransactionsByMonth: Fetching for user ${e}, month ${n}`);const r=Hr(rt,"users",e,"transactions"),i=ji(r,cw("month","==",n),xs("date","desc")),s=(await ra(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Xh(c)});return U.log(` Fetched ${s.length} transactions for ${n}`),s}catch(r){throw U.warn(` BudgetService.getTransactionsByMonth failed: ${r}`),new Error(`Failed to fetch transactions for month ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async getTransactionsByEnvelope(e,n){try{U.log(` BudgetService.getTransactionsByEnvelope: Fetching for user ${e}, envelope ${n}`);const r=Hr(rt,"users",e,"transactions"),i=ji(r,cw("envelopeId","==",n),xs("date","desc")),s=(await ra(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Xh(c)});return U.log(` Fetched ${s.length} transactions for envelope ${n}`),s}catch(r){throw U.warn(` BudgetService.getTransactionsByEnvelope failed: ${r}`),new Error(`Failed to fetch transactions for envelope ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async createEnvelope(e){try{U.log(" BudgetService.createEnvelope called for user:",e.userId);const n=Hr(rt,"users",e.userId,"envelopes"),r=Et(n),i=gt.now(),a={...e,createdAt:i,lastUpdated:i};aa(r,a).catch(o=>U.warn(`Create env failed: ${o}`));const s={...e,id:r.id,createdAt:id(i),lastUpdated:id(i)};return U.log(" Created envelope (optimistic):",s.id),s}catch(n){throw U.warn(` BudgetService.createEnvelope failed: ${n}`),new Error(`Failed to create envelope: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelope(e,n){try{U.log(" BudgetService.updateEnvelope called for envelope:",n.id);const r=Et(rt,"users",e,"envelopes",n.id);aa(r,{...n,lastUpdated:gt.now()},{merge:!0}).catch(i=>U.warn(`Update env failed: ${i}`)),U.log(" Updated envelope (optimistic):",n.id)}catch(r){throw U.warn(` BudgetService.updateEnvelope failed: ${r}`),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,n){try{const r=Et(rt,"users",e,"envelopes",n),i=ji(Hr(rt,"users",e,"transactions"),cw("envelopeId","==",n)),s=(await ra(i)).docs.map(o=>sa(o.ref));await Promise.all([sa(r),...s]),U.log(" Deleted envelope and associated transactions from Firestore:",n)}catch(r){throw U.warn(` BudgetService.deleteEnvelope failed: ${r}`),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,n){try{U.log(" BudgetService.reorderEnvelopes called for user:",e);const r=n.map(i=>{const a=Et(rt,"users",e,"envelopes",i.id);return aa(a,{orderIndex:i.orderIndex,lastUpdated:gt.now()},{merge:!0})});Promise.all(r).catch(i=>U.warn(`Reorder env failed: ${i}`)),U.log(" Reordered envelopes (optimistic)")}catch(r){throw U.warn(` BudgetService.reorderEnvelopes failed: ${r}`),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{U.log(" BudgetService.createTransaction called for user:",e.userId);const n=Hr(rt,"users",e.userId,"transactions"),r=Et(n),i=gt.now();if(e.paymentMethod){const c={...e.paymentMethod};c.last4===void 0&&delete c.last4,e.paymentMethod=c}const s={...Object.fromEntries(Object.entries(e).filter(([c,u])=>u!==void 0)),createdAt:i};aa(r,s).catch(c=>U.warn(`Create tx failed: ${c}`));const o={...e,id:r.id};return U.log(" Created transaction (optimistic):",o.id),o}catch(n){throw U.warn(` BudgetService.createTransaction failed: ${n}`),new Error(`Failed to create transaction: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateTransaction(e,n){try{if(U.log(" BudgetService.updateTransaction called for transaction:",n.id),n.paymentMethod){const a={...n.paymentMethod};a.last4===void 0&&delete a.last4,n.paymentMethod=a}const r=Object.fromEntries(Object.entries(n).filter(([a,s])=>s!==void 0)),i=Et(rt,"users",e,"transactions",n.id);aa(i,r,{merge:!0}).catch(a=>U.warn(`Update tx failed: ${a}`)),U.log(" Updated transaction (optimistic):",n.id)}catch(r){throw U.warn(` BudgetService.updateTransaction failed: ${r}`),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,n){try{U.log(" BudgetService.deleteTransaction called for transaction:",n);const r=Et(rt,"users",e,"transactions",n);sa(r).catch(i=>U.warn(`Delete tx failed: ${i}`)),U.log(" Deleted transaction (optimistic):",n)}catch(r){throw U.warn(` BudgetService.deleteTransaction failed: ${r}`),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async createIncomeSource(e){try{U.log(" BudgetService.createIncomeSource (Embedded) called for user:",e.userId);const n=Et(rt,"users",e.userId,"monthlyBudgets",e.month),r=gt.now(),i=`inc_${r.toMillis()}_${Math.random().toString(36).substring(2,9)}`,a={...e,id:i,amount:Number(e.amount),createdAt:r,updatedAt:r};ao(n,{incomeSources:dpe(a),updatedAt:r}).catch(o=>{o.code==="not-found"?aa(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[a],allocations:{},totalIncome:0,availableToBudget:0}).catch(c=>U.warn(`Failed to create monthly budget doc: ${c}`)):U.warn(`Create income failed: ${o}`)});const s={...e,id:i,amount:Number(e.amount),createdAt:id(r),updatedAt:id(r)};return U.log(" Created income source (optimistic/embedded):",s.id),s}catch(n){throw U.warn(` BudgetService.createIncomeSource failed: ${n}`),new Error(`Failed to create income source: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateIncomeSource(e,n,r,i){try{U.log(" BudgetService.updateIncomeSource (Embedded) called for source:",n);const a=Et(rt,"users",e,"monthlyBudgets",r);LA(a).then(s=>{if(!s.exists())return;const u=(s.data().incomeSources||[]).map(f=>{if(f.id===n){const h={...f,...i,updatedAt:gt.now()};return i.amount!==void 0&&(h.amount=Number(i.amount)),h}return f});ao(a,{incomeSources:u,updatedAt:gt.now()})}).catch(s=>U.warn(`Update income failed: ${s}`)),U.log(" Updated income source (optimistic/embedded):",n)}catch(a){throw U.warn(` BudgetService.updateIncomeSource failed: ${a}`),a}}async deleteIncomeSource(e,n,r){try{U.log(" BudgetService.deleteIncomeSource (Embedded) called for source:",n);const i=Et(rt,"users",e,"monthlyBudgets",r);LA(i).then(a=>{if(!a.exists())return;const c=(a.data().incomeSources||[]).filter(u=>u.id!==n);ao(i,{incomeSources:c,updatedAt:gt.now()})}).catch(a=>U.warn(`Delete income failed: ${a}`)),U.log(" Deleted income source (optimistic/embedded):",n)}catch(i){throw U.warn(` BudgetService.deleteIncomeSource failed: ${i}`),new Error(`Failed to delete income source: ${i instanceof Error?i.message:"Unknown error"}`)}}async createEnvelopeAllocation(e){try{U.log(" BudgetService.createEnvelopeAllocation (Embedded) called for user:",e.userId);const n=Et(rt,"users",e.userId,"monthlyBudgets",e.month),r=gt.now(),i={[`allocations.${e.envelopeId}`]:Number(e.budgetedAmount),updatedAt:r};ao(n,i).catch(s=>{s.code==="not-found"?aa(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[],allocations:{[e.envelopeId]:Number(e.budgetedAmount)},totalIncome:0,availableToBudget:0}).catch(o=>U.warn(`Failed to create monthly budget doc: ${o}`)):U.warn(`Create allocation failed: ${s}`)});const a={...e,id:e.envelopeId,createdAt:id(r),updatedAt:id(r)};return U.log(" Created allocation (optimistic/embedded):",a.id),a}catch(n){throw U.warn(` BudgetService.createEnvelopeAllocation failed: ${n}`),new Error(`Failed to create envelope allocation: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelopeAllocation(e,n,r,i){try{U.log(" BudgetService.updateEnvelopeAllocation (Embedded) called for envelope:",n);const a=Et(rt,"users",e,"monthlyBudgets",r),s={updatedAt:gt.now()};i.budgetedAmount!==void 0&&(s[`allocations.${n}`]=Number(i.budgetedAmount)),ao(a,s).catch(o=>U.warn(`Update allocation failed: ${o}`)),U.log(" Updated allocation (optimistic/embedded):",n)}catch(a){throw U.warn(` BudgetService.updateEnvelopeAllocation failed: ${a}`),new Error(`Failed to update envelope allocation: ${a instanceof Error?a.message:"Unknown error"}`)}}async deleteEnvelopeAllocation(e,n,r){try{U.log(" BudgetService.deleteEnvelopeAllocation (Embedded) called for envelope:",n);const i=Et(rt,"users",e,"monthlyBudgets",r);ao(i,{[`allocations.${n}`]:T5(),updatedAt:gt.now()}).catch(a=>U.warn(`Delete allocation failed: ${a}`)),U.log(" Deleted allocation (optimistic/embedded):",n)}catch(i){throw U.warn(` BudgetService.deleteEnvelopeAllocation failed: ${i}`),new Error(`Failed to delete envelope allocation: ${i instanceof Error?i.message:"Unknown error"}`)}}async getMonthData(e,n){try{U.log(` BudgetService.getMonthData (Embedded): Fetching for user ${e}, month ${n}`);const r=Et(rt,"users",e,"monthlyBudgets",n),i=await LA(r);if(!i.exists())return U.log(` No budget data found for ${n}, returning empty defaults.`),{incomeSources:[],allocations:[]};const a=i.data(),s=(a.incomeSources||[]).map(u=>({...u,amount:Number(u.amount),createdAt:u.createdAt?.toDate?u.createdAt.toDate().toISOString():u.createdAt||new Date().toISOString(),updatedAt:u.updatedAt?.toDate?u.updatedAt.toDate().toISOString():u.updatedAt||new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime()),o=a.allocations||{},c=Object.entries(o).map(([u,f])=>({id:u,userId:e,envelopeId:u,month:n,budgetedAmount:Number(f),createdAt:a.createdAt?.toDate?a.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime());return U.log(` Fetched ${s.length} income sources and ${c.length} allocations for ${n}`),{incomeSources:s,allocations:c}}catch(r){throw U.warn(` BudgetService.getMonthData failed: ${r}`),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{U.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const n={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(v=>v.id));U.log(` Found ${r.length} existing envelopes`);const a=Hr(rt,"users",e,"envelopeAllocations"),s=await ra(a),o=[],c=new Set;for(const v of s.docs){const b=v.data();c.add(b.month),i.has(b.envelopeId)||(o.push(v.id),U.log(` Found orphaned allocation: ${v.id} for envelope ${b.envelopeId} in month ${b.month}`))}if(o.length>0){const v=o.map(b=>sa(Et(rt,"users",e,"envelopeAllocations",b)));await Promise.all(v),n.orphanedAllocationsDeleted+=o.length,n.details.deletedAllocationIds.push(...o),U.log(` Deleted ${o.length} orphaned allocations (legacy)`)}const u=Hr(rt,"users",e,"monthlyBudgets"),f=await ra(u);for(const v of f.docs){const x=v.data().allocations||{},w={};let S=!1;Object.keys(x).forEach(T=>{i.has(T)||(w[`allocations.${T}`]=T5(),S=!0,U.log(` Found orphaned embedded allocation in ${v.id} for envelope ${T}`),n.orphanedAllocationsDeleted++,n.details.deletedAllocationIds.push(`${v.id}_${T}`))}),S&&(w.updatedAt=gt.now(),await ao(v.ref,w),c.add(v.id))}const h=await this.getTransactions(e),g=[];for(const v of h)i.has(v.envelopeId)||(g.push(v.id),U.log(` Found orphaned transaction: ${v.id} for envelope ${v.envelopeId}`));if(g.length>0){const v=g.map(b=>sa(Et(rt,"users",e,"transactions",b)));await Promise.all(v),n.orphanedTransactionsDeleted=g.length,n.details.deletedTransactionIds=g,U.log(` Deleted ${g.length} orphaned transactions`)}return n.details.monthsProcessed=Array.from(c),U.log(" Cleanup completed:",{orphanedAllocationsDeleted:n.orphanedAllocationsDeleted,orphanedTransactionsDeleted:n.orphanedTransactionsDeleted,monthsProcessed:n.details.monthsProcessed.length}),n}catch(n){throw U.warn(` BudgetService.cleanupOrphanedData failed: ${n}`),new Error(`Failed to cleanup orphaned data: ${n instanceof Error?n.message:"Unknown error"}`)}}subscribeToMonthlyBudget(e,n,r){const i=Et(rt,"users",e,"monthlyBudgets",n);return nu(i,a=>{if(!a.exists()){r({incomeSources:[],allocations:[]});return}const s=a.data(),o=(s.incomeSources||[]).map(f=>({...f,amount:Number(f.amount),createdAt:f.createdAt?.toDate?f.createdAt.toDate().toISOString():f.createdAt||new Date().toISOString(),updatedAt:f.updatedAt?.toDate?f.updatedAt.toDate().toISOString():f.updatedAt||new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime()),c=s.allocations||{},u=Object.entries(c).map(([f,h])=>({id:f,userId:e,envelopeId:f,month:n,budgetedAmount:Number(h),createdAt:s.createdAt?.toDate?s.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:s.updatedAt?.toDate?s.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime());r({incomeSources:o,allocations:u})})}prepareMonthlyBudgetsData(e,n){const r=[],i=new Set;return e&&Object.keys(e).forEach(a=>i.add(a)),n&&Object.keys(n).forEach(a=>i.add(a)),i.forEach(a=>{const s=e?.[a]||[],o=n?.[a]||[],c={};s.forEach(f=>{c[f.envelopeId]=f.budgetedAmount});const u={month:a,userId:"",incomeSources:o,allocations:c,totalIncome:o.reduce((f,h)=>f+Number(h.amount||0),0),availableToBudget:o.reduce((f,h)=>f+Number(h.amount||0),0)-s.reduce((f,h)=>f+Number(h.budgetedAmount||0),0),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r.push(u)}),r}async deleteAllUserData(e){try{U.log(" BudgetService.deleteAllUserData: STARTING DELETION for user:",e);const n=["envelopes","transactions","categories","incomeSources","envelopeAllocations","monthlyBudgets","appSettings"];for(const r of n){U.log(` Deleting collection: ${r}...`);const i=Hr(rt,"users",e,r),a=await ra(i);if(a.empty){U.log("   (Empty collection)");continue}const s=a.docs.map(o=>sa(o.ref));await Promise.all(s),U.log(`    Deleted ${a.size} documents from ${r}`)}U.log(" All user data deleted successfully.")}catch(n){throw U.warn(` BudgetService.deleteAllUserData failed: ${n}`),new Error(`Failed to delete all user data: ${n instanceof Error?n.message:"Unknown error"}`)}}}const rX=vs.getInstance(),RSe=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated?.toDate?.()?t.lastUpdated.toDate().toISOString():t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig,categoryId:t.categoryId}),MSe=t=>({id:t.id,userId:t.userId,name:t.name,orderIndex:t.orderIndex,isArchived:t.isArchived,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt}),YB=(t,e)=>{if(window.__firebaseUnsubscribers){U.log(" Real-time subscriptions already active, skipping setup");return}U.log(" Setting up real-time Firebase subscriptions...");const n=t.getState().currentMonth;U.log(" Current month for subscriptions:",n);const r=OSe.subscribeToEnvelopes(e,g=>{U.log(" Real-time sync: Envelopes updated",g.length);const v=g.map(RSe),b=t.getState(),x=new Set(b.envelopes.map(T=>T.id)),w=new Set(v.map(T=>T.id)),S=[...v.filter(T=>x.has(T.id)),...b.envelopes.filter(T=>!w.has(T.id))];t.setState({envelopes:S})}),i={},a=g=>{i[g]||(i[g]=PSe.subscribeToTransactionsByMonth(e,g,v=>{U.log(` Real-time sync: Transactions updated for ${g}`,v.length);const w=[...t.getState().transactions.filter(S=>S.month!==g),...v];t.setState({transactions:w})}))},s=[t.getState().currentMonth,...t.getState().loadedTransactionMonths||[]];Array.from(new Set(s)).forEach(g=>{g&&a(g)});const c=sl.getInstance().subscribeToCategories(e,g=>{U.log(" Real-time sync: Categories updated",g.length);const v=g.map(MSe),b=Array.from(new Map(v.map(x=>[x.id,x])).values());b.length!==v.length&&U.warn(" Duplicate categories detected in real-time update, deduplicating..."),t.setState({categories:b})}),u=DSe.subscribeToDistributionTemplates(e,g=>{U.log(" Real-time sync: Templates updated from Firebase",g.length)}),f=nX.subscribeToAppSettings(e,g=>{U.log(" Real-time sync: Settings updated",g?"found":"null");const v=t.getState();if(g){const b={...v.appSettings,...g,paymentSources:g.paymentSources??v.appSettings?.paymentSources??[]};t.setState({appSettings:b})}else U.log(" Firebase settings null, preserving local state")}),h=rX.subscribeToMonthlyBudget(e,n,g=>{U.log(` Real-time sync: Monthly budget updated (${g.incomeSources.length} sources, ${g.allocations.length} allocations)`);const v=t.getState();t.setState({incomeSources:{...v.incomeSources,[n]:g.incomeSources},allocations:{...v.allocations,[n]:g.allocations}})});window.__firebaseUnsubscribers={envelopes:r,transactionMonths:i,categories:c,templates:u,settings:f,monthlyBudget:h,setupTransactionSubscription:a},U.log(" Real-time subscriptions active - cross-device sync enabled")},jSe=t=>{const{useBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{U.log(" Browser online event detected"),e.setState({isOnline:!0})}),window.addEventListener("offline",()=>{U.log(" Browser offline event detected"),e.setState({isOnline:!1})}),e.setState({isOnline:navigator.onLine});const i=n.getState();i.isAuthenticated&&i.currentUser&&(U.log(" User already authenticated on app load, setting up real-time subscriptions"),YB(e,r())),n.subscribe(s=>{if(s.isAuthenticated&&s.currentUser)U.log(" User authenticated, setting up real-time subscriptions"),YB(e,r());else if(!s.isAuthenticated&&!s.isLoading){if(U.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const o=window.__firebaseUnsubscribers;o.envelopes&&o.envelopes(),o.transactionMonths&&Object.values(o.transactionMonths).forEach(c=>c()),o.categories&&o.categories(),o.templates&&o.templates(),o.settings&&o.settings(),o.monthlyBudget&&o.monthlyBudget(),delete window.__firebaseUnsubscribers,U.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let a=[];e.subscribe(s=>{if(!n.getState().isAuthenticated)return;const c=Array.from(new Set([s.currentMonth,...s.loadedTransactionMonths||[]])).filter(Boolean).sort();if(c.some(f=>!a.includes(f))&&window.__firebaseUnsubscribers){const f=window.__firebaseUnsubscribers,h=f.setupTransactionSubscription;h&&c.forEach(v=>{a.includes(v)||h(v)});const g=a.find(v=>v===s.currentMonth)?s.currentMonth:null;if(s.currentMonth&&g!==s.currentMonth){const v=r();v&&f.monthlyBudget&&(f.monthlyBudget(),f.monthlyBudget=rX.subscribeToMonthlyBudget(v,s.currentMonth,b=>{U.log(` Real-time sync: Monthly budget updated for ${s.currentMonth}`);const x=e.getState();e.setState({incomeSources:{...x.incomeSources,[s.currentMonth]:b.incomeSources},allocations:{...x.allocations,[s.currentMonth]:b.allocations}})}))}a=c}})},Qu=vs.getInstance(),Tx=()=>{const{currentUser:t}=tn.getState();if(!t)throw new Error("No authenticated user found");return t},zSe=({set:t,get:e})=>({addTransaction:async n=>{try{t({isLoading:!0,error:null});const r=Tx(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,userId:r.id,month:a},o=await Qu.createTransaction(s);t(c=>c.transactions.some(f=>f.id===o.id)?{isLoading:!1}:{transactions:[...c.transactions,o],isLoading:!1}),U.log(" Added transaction:",o.id)}catch(r){throw U.error(" addTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async n=>{try{t({isLoading:!0,error:null});const r=Tx(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await Qu.updateTransaction(r.id,s),t(o=>({transactions:o.transactions.map(c=>c.id===n.id?s:c),isLoading:!1})),U.log(" Updated transaction:",n.id)}catch(r){throw U.error(" updateTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async n=>{try{t({isLoading:!0,error:null});const r=Tx();await Qu.deleteTransaction(r.id,n),t(i=>({transactions:i.transactions.filter(a=>a.id!==n),isLoading:!1})),U.log(" Deleted transaction:",n)}catch(r){throw U.error(" deleteTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async n=>{try{t({isLoading:!0,error:null});const r=Tx(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await Qu.updateTransaction(r.id,s),t(o=>{const c=o.transactions.findIndex(f=>f.id===n.id);let u;return c>=0?u=o.transactions.map(f=>f.id===n.id?s:f):u=[...o.transactions,s],{transactions:u,isLoading:!1}}),U.log(" Restored transaction:",n.id)}catch(r){throw U.error(" restoreTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to restore transaction"}),r}},transferFunds:async(n,r,i,a,s)=>{try{const o=s?typeof s=="string"?s:s.toISOString():new Date().toISOString(),c=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(u=>u.id===r)?.name||"envelope"}`,amount:i,envelopeId:n,date:o,type:"Expense",transferId:c,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(u=>u.id===n)?.name||"envelope"}`,amount:i,envelopeId:r,date:o,type:"Income",transferId:c,reconciled:!1}),U.log(" Transfer completed")}catch(o){throw U.error(" transferFunds failed:",o),o}},fetchTransactionsForMonth:async n=>{const r=e();if(!(r.areAllTransactionsLoaded||r.loadedTransactionMonths.includes(n)))try{const{currentUser:i}=tn.getState();if(!i)return;t(s=>({loadedTransactionMonths:[...s.loadedTransactionMonths,n]})),U.log(` Fetching transactions for month: ${n}`);const a=await Qu.getTransactionsByMonth(i.id,n);t(s=>({transactions:[...s.transactions.filter(o=>o.month!==n),...a]})),U.log(` Loaded ${a.length} transactions for ${n}`)}catch(i){U.error(` Failed to fetch transactions for ${n}:`,i),t(a=>({loadedTransactionMonths:a.loadedTransactionMonths.filter(s=>s!==n)}))}},fetchTransactionsForEnvelope:async n=>{if(!e().areAllTransactionsLoaded)try{const{currentUser:i}=tn.getState();if(!i)return;U.log(` Fetching transactions for envelope: ${n}`);const a=await Qu.getTransactionsByEnvelope(i.id,n);t(s=>{const o=new Map(s.transactions.map(c=>[c.id,c]));return a.forEach(c=>{o.set(c.id,c)}),{transactions:Array.from(o.values())}}),U.log(` Loaded ${a.length} transactions for envelope ${n}`)}catch(i){U.error(` Failed to fetch transactions for envelope ${n}:`,i)}},fetchAllTransactions:async()=>{if(!e().areAllTransactionsLoaded)try{t({isLoading:!0});const{currentUser:r}=tn.getState();if(!r){t({isLoading:!1});return}U.log(" Fetching ALL transactions history...");const i=await Qu.getTransactions(r.id);t({transactions:i,areAllTransactionsLoaded:!0,isLoading:!1}),U.log(` Loaded complete history: ${i.length} transactions`)}catch(r){U.error(" Failed to fetch all transactions:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to fetch transaction history"})}},getEnvelopeBalance:(n,r)=>{const i=e(),a=i.envelopes.find(s=>s.id===n);if(!a)return U.log(` getEnvelopeBalance: Envelope ${n} not found`),0;if(a.isPiggybank){const s=i.transactions.filter(h=>h.envelopeId===n),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}if(r){const s=i.transactions.filter(h=>h.envelopeId===n&&h.month===r),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}return U.warn(` getEnvelopeBalance: Month not provided for non-piggybank envelope ${n}. Returning 0.`),0}}),fh=vs.getInstance(),hh=()=>{const{currentUser:t}=tn.getState();if(!t)throw new Error("No authenticated user found");return t},LSe=({set:t,get:e})=>({addEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=hh(),i={...n,userId:r.id},a=await fh.createEnvelope(i);return t(s=>s.envelopes.some(c=>c.id===a.id)?{isLoading:!1}:{envelopes:[...s.envelopes,a],isLoading:!1}),U.log(" Added envelope:",a.id),a.id}catch(r){throw U.error(" addEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=hh();await fh.updateEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.map(a=>a.id===n.id?n:a),isLoading:!1})),U.log(" Updated envelope:",n.id)}catch(r){throw U.error(" updateEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=hh();await fh.deleteEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.filter(a=>a.id!==n),transactions:i.transactions.filter(a=>a.envelopeId!==n),isLoading:!1})),U.log(" Deleted envelope:",n)}catch(r){throw U.error(" deleteEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async n=>{try{t({isLoading:!0,error:null});const r=e(),i=new Map;n.forEach((c,u)=>{i.set(c,u)});const a=r.envelopes.map(c=>{if(!i.has(c.id))return c;const u=i.get(c.id);return c.orderIndex===u?c:{...c,orderIndex:u}}),s=a.filter((c,u)=>c!==r.envelopes[u]);if(!s.length){t({isLoading:!1});return}const o=hh();await fh.reorderEnvelopes(o.id,s),t({envelopes:a,isLoading:!1}),U.log(" Reordered envelopes")}catch(r){throw U.error(" reorderEnvelopes failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},renameEnvelope:async(n,r)=>{try{t({isLoading:!0,error:null});const a=e().envelopes.find(c=>c.id===n);if(!a)throw new Error("Envelope not found");t(c=>({envelopes:c.envelopes.map(u=>u.id===n?{...u,name:r}:u),isLoading:!0}));const s=hh(),o={...a,name:r};await fh.updateEnvelope(s.id,o),t({isLoading:!1}),U.log(" Renamed envelope:",n)}catch(i){throw U.error(" renameEnvelope failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},removeEnvelopeFromMonth:async(n,r)=>{try{t({isLoading:!0,error:null}),U.log(` Removing envelope ${n} from month ${r}`);const i=e(),a=i.allocations[r]?.find(o=>o.envelopeId===n);a?await e().deleteEnvelopeAllocation(a.id):U.log(` No allocation found for envelope ${n} in ${r}`);const s=i.transactions.filter(o=>o.envelopeId===n&&(o.month===r||o.date.startsWith(r)));s.length>0&&(U.log(` Deleting ${s.length} transactions for envelope ${n} in ${r}`),await Promise.all(s.map(o=>e().deleteTransaction(o.id)))),t({isLoading:!1}),U.log(` Removed envelope ${n} from month ${r}`)}catch(i){throw U.error(" removeEnvelopeFromMonth failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to remove envelope from month"}),i}},updatePiggybankContribution:async(n,r)=>{try{t({isLoading:!0,error:null}),U.log(" Updating piggybank contribution:",{envelopeId:n,newAmount:r});const i=hh(),a=e().envelopes.find(o=>o.id===n&&o.isPiggybank);if(!a)throw new Error("Piggybank not found");const s={...a,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:a.piggybankConfig?.targetAmount,color:a.piggybankConfig?.color,icon:a.piggybankConfig?.icon,paused:a.piggybankConfig?.paused??!1}};if(U.log(" Updating envelope in Firestore:",s),await fh.updateEnvelope(i.id,s),U.log(" Envelope updated successfully"),t(o=>({envelopes:o.envelopes.map(c=>c.id===n?s:c),isLoading:!1})),!a.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(n,r),setTimeout(()=>{e().transactions.find(c=>c.envelopeId===n&&(c.description==="Monthly Allocation"||c.description==="Piggybank Contribution"))||U.warn(" Piggybank contribution transaction not found after update")},1e3)}catch(o){U.error(" Failed to update piggybank contribution:",o)}U.log(" Piggybank contribution updated successfully")}catch(i){throw U.error(" updatePiggybankContribution failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}}}),ph=vs.getInstance(),gh=()=>{const{currentUser:t}=tn.getState();if(!t)throw new Error("No authenticated user found");return t},VSe=({set:t,get:e})=>({addIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null});const i=gh();U.log(" Adding income source:",{month:n,source:r});const a=await ph.createIncomeSource({...r,userId:i.id,month:n});t(s=>{const o=s.incomeSources[n]||[];return o.some(u=>u.id===a.id)?{isLoading:!1}:{incomeSources:{...s.incomeSources,[n]:[...o,a]},isLoading:!1}}),U.log(" Added income source:",a.id)}catch(i){throw U.error(" addIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),U.log(" Updating income source:",{month:n,sourceId:r.id}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.map(s=>s.id===r.id?{...r,updatedAt:new Date().toISOString()}:s)||[]},isLoading:!1}));const{currentUser:i}=tn.getState();if(!i)return;await ph.updateIncomeSource(i.id,r.id,n,r),U.log(" Updated income source:",r.id)}catch(i){throw U.error(" updateIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),U.log(" Deleting income source:",{month:n,sourceId:r}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.filter(s=>s.id!==r)||[]},isLoading:!1}));const{currentUser:i}=tn.getState();if(!i)return;await ph.deleteIncomeSource(i.id,r,n),U.log(" Deleted income source:",r)}catch(i){throw U.error(" deleteIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async n=>{try{t({isLoading:!0,error:null});const r=gh();U.log(" Copying allocations from previous month:",n);const[i,a]=n.split("-").map(Number);let s=i,o=a-1;o<1&&(s=i-1,o=12);const c=`${s}-${String(o).padStart(2,"0")}`;(!e().incomeSources[c]||!e().allocations[c])&&(U.log(` Previous month ${c} data missing, fetching...`),await e().fetchMonthData(c));const u=e().incomeSources[c]||[];if(U.log(` Found ${u.length} income sources from ${c}`),u.length>0){for(const v of u){const{id:b,...x}=v;await e().addIncomeSource(n,x)}U.log(` Copied ${u.length} income sources to ${n}`)}const f=e().allocations[c]||[];U.log(` Found ${f.length} allocations from ${c}`);const h=f.filter(v=>{const b=e().envelopes.find(x=>x.id===v.envelopeId);return!!b&&!b.isPiggybank});if(h.length>0){for(const v of h)await e().createEnvelopeAllocation({envelopeId:v.envelopeId,budgetedAmount:v.budgetedAmount,userId:r.id,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),v.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:v.budgetedAmount,envelopeId:v.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0});U.log(` Copied ${h.length} regular allocations to ${n}`)}const g=e().envelopes.filter(v=>v.isPiggybank);U.log(` Processing ${g.length} piggybanks for ${n}`);for(const v of g){const b=v.piggybankConfig?.monthlyContribution,x=v.piggybankConfig?.paused??!1;if(!x&&b&&b>0)try{U.log(` Setting piggybank allocation for ${v.name}: ${b}`),await e().setEnvelopeAllocation(v.id,b)}catch(w){U.error(` Failed to set allocation for piggybank ${v.name}:`,w)}else U.log(` Skipping piggybank ${v.name} (paused=${x}, contribution=${b})`)}t({isLoading:!1}),U.log(` Complete monthly setup copied to ${n}`)}catch(r){throw U.error(" copyPreviousMonthAllocations failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(n,r)=>{try{t({isLoading:!0,error:null});const i=gh(),a=e().currentMonth,s=e().envelopes.find(u=>u.id===n);if(!s){U.error(` setEnvelopeAllocation: Envelope ${n} not found in store! Aborting.`),t({isLoading:!1});return}const o=!!s.isPiggybank;U.log(` setEnvelopeAllocation called: envelopeId=${n}, amount=${r}, currentMonth=${a}, isPiggybank=${o}`);const c=e().allocations[a]?.find(u=>u.envelopeId===n);if(c?await e().updateEnvelopeAllocation(c.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r,userId:i.id,month:a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o&&r>0&&!s?.piggybankConfig?.paused){const u=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));if(u){const f={...u,amount:r,description:"Piggybank Contribution"};await e().updateTransaction(f)}else{const f={description:"Piggybank Contribution",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}if(!o&&r>0){const u=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));if(u){const f={...u,amount:r,description:"Budgeted"};await e().updateTransaction(f)}else{const f={description:"Budgeted",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}U.log(" Envelope allocation set successfully")}catch(i){throw U.error(" setEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async n=>{try{const r=gh(),i=e().currentMonth,a=await ph.createEnvelopeAllocation({envelopeId:n.envelopeId,budgetedAmount:n.budgetedAmount,userId:r.id,month:i});t(s=>{const o=s.allocations[i]||[];return o.some(u=>u.id===a.id)?{isLoading:!1}:{allocations:{...s.allocations,[i]:[...o,a]},isLoading:!1}}),U.log(" Created envelope allocation:",a.id)}catch(r){throw U.error(" createEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(n,r)=>{try{U.log(" Updating envelope allocation:",{id:n,updates:r});const i=e().currentMonth,a=gh(),s=e().allocations[i]?.find(u=>u.id===n);if(!s)throw new Error("Allocation not found");const o=e().envelopes.find(u=>u.id===s.envelopeId),c=o?.isPiggybank;if(await ph.updateEnvelopeAllocation(a.id,s.envelopeId,i,{budgetedAmount:r.budgetedAmount}),t(u=>({allocations:{...u.allocations,[i]:u.allocations[i]?.map(f=>f.id===n?{...f,...r,updatedAt:new Date().toISOString()}:f)||[]},isLoading:!1})),c&&r.budgetedAmount!==void 0){const u=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));u?r.budgetedAmount>0&&!o?.piggybankConfig?.paused?await e().updateTransaction({...u,amount:r.budgetedAmount,description:"Piggybank Contribution"}):(r.budgetedAmount===0||o?.piggybankConfig?.paused)&&await e().deleteTransaction(u.id):r.budgetedAmount>0&&!o?.piggybankConfig?.paused&&await e().addTransaction({description:"Piggybank Contribution",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!c&&r.budgetedAmount!==void 0){const u=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));u?r.budgetedAmount>0?await e().updateTransaction({...u,amount:r.budgetedAmount,description:"Budgeted"}):r.budgetedAmount===0&&await e().deleteTransaction(u.id):r.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}U.log(" Updated envelope allocation:",n)}catch(i){throw U.error(" updateEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async n=>{try{U.log(" Deleting envelope allocation:",n);const r=e().currentMonth,i=e().allocations[r]?.find(s=>s.id===n);if(!i){U.warn("Allocation not found in store, skipping delete");return}const a=gh();await ph.deleteEnvelopeAllocation(a.id,i.envelopeId,r),t(s=>({allocations:{...s.allocations,[r]:s.allocations[r]?.filter(o=>o.id!==n)||[]},isLoading:!1})),U.log(" Deleted envelope allocation:",n)}catch(r){throw U.error(" deleteEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const n=e().currentMonth,r=e().allocations[n]||[],i=e().incomeSources[n]||[],a=r.reduce((c,u)=>c+u.budgetedAmount,0);return i.reduce((c,u)=>c+u.amount,0)-a}catch(n){throw U.error(" refreshAvailableToBudget failed:",n),t({error:n instanceof Error?n.message:"Failed to refresh available to budget"}),n}}}),Qs=sl.getInstance(),km=()=>{const{currentUser:t}=tn.getState();if(!t)throw new Error("No authenticated user found");return t},BSe=({set:t,get:e})=>({fetchCategories:async()=>{try{t({isLoading:!0,error:null});const{currentUser:n}=tn.getState();if(!n)return;const r=await Qs.getCategories(n.id),i=Array.from(new Map(r.map(a=>[a.id,a])).values());t({categories:i,isLoading:!1})}catch(n){U.error("Failed to fetch categories:",n),t({isLoading:!1})}},addCategory:async n=>{try{t({isLoading:!0,error:null});const r=km(),i=e().categories.find(o=>o.name.toLowerCase().trim()===(n.name||"").toLowerCase().trim());if(i)return U.log(` Category "${n.name}" already exists, skipping creation`),t({isLoading:!1}),i.id;const a=Qs.createId(),s={...n,id:a,userId:r.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),orderIndex:e().categories.length};return await Qs.createCategory(s),t(o=>o.categories.some(u=>u.id===a)?{isLoading:!1}:{categories:[...o.categories,s],isLoading:!1}),a}catch(r){throw U.error("Failed to add category:",r),t({isLoading:!1}),r}},updateCategory:async n=>{try{t({isLoading:!0,error:null});const r=km(),i={...n,updatedAt:new Date().toISOString()};await Qs.updateCategory(r.id,i),t(a=>({categories:a.categories.map(s=>s.id===n.id?i:s),isLoading:!1}))}catch(r){throw U.error("Failed to update category:",r),t({isLoading:!1}),r}},deleteCategory:async n=>{try{t({isLoading:!0,error:null});const r=km(),i=e().envelopes.filter(a=>a.categoryId===n);if(i.length>0){let a=e().categories.find(s=>s.name.toLowerCase().trim()==="uncategorized"&&s.id!==n);if(!a){const s=Qs.createId(),o=new Date().toISOString();a={id:s,userId:r.id,name:"Uncategorized",orderIndex:e().categories.length,isDefault:!0,createdAt:o,updatedAt:o},await Qs.createCategory(a),t(c=>c.categories.some(f=>f.id===s)?{}:{categories:[...c.categories,a]}),U.log(' Created new "Uncategorized" category for orphaned envelopes:',s)}for(const s of i){const o={...s,categoryId:a.id};await e().updateEnvelope(o)}U.log(` Reassigned ${i.length} envelopes to "Uncategorized"`)}await Qs.deleteCategory(r.id,n),t(a=>({categories:a.categories.filter(s=>s.id!==n),isLoading:!1}))}catch(r){throw U.error("Failed to delete category:",r),t({isLoading:!1}),r}},ensureDefaultCategory:async()=>{const n=e().categories.find(o=>o.isDefault);if(n)return n.id;const r=km(),i=Qs.createId(),a=new Date().toISOString(),s={id:i,userId:r.id,name:"Uncategorized",orderIndex:e().categories.length,isDefault:!0,createdAt:a,updatedAt:a};return await Qs.createCategory(s),t(o=>o.categories.some(u=>u.id===i)?{}:{categories:[...o.categories,s]}),U.log(' Created default "Uncategorized" category:',i),i},reorderCategories:async n=>{try{t({isLoading:!0,error:null});const r=km(),i=e(),a=new Map;n.forEach((o,c)=>a.set(o,c));const s=i.categories.map(o=>{if(!a.has(o.id))return o;const c=a.get(o.id);return o.orderIndex===c?o:{...o,orderIndex:c}});t({categories:s.sort((o,c)=>o.orderIndex-c.orderIndex)}),await Qs.reorderCategories(r.id,s),t({isLoading:!1})}catch(r){throw U.error("Failed to reorder categories:",r),t({isLoading:!1}),r}}}),FSe=vs.getInstance(),Zu=()=>tn.getState().currentUser?.id||"",$Se=({set:t,get:e})=>({setIsOnboardingActive:n=>{t({isOnboardingActive:n})},checkAndStartOnboarding:async()=>{const n=Zu();if(!n){U.log(" No user ID, skipping onboarding check");return}const r=`onboardingCompleted_${n}`,i=typeof localStorage<"u"?localStorage.getItem(r)==="true":!1;U.log(" checkAndStartOnboarding called:",{userId:n,isOnboardingCompleted:i,isOnboardingActive:e().isOnboardingActive,localStorage_key:r,localStorage_value:localStorage.getItem(r)});const a=`guidedTutorialCompleted_${n}`,s=typeof localStorage<"u"?localStorage.getItem(a)==="true":!1;if(i){t({isOnboardingCompleted:!0,guidedTutorialCompleted:s}),U.log(" Skipping onboarding: already completed (localStorage)",{isTutorialCompleted:s});return}try{if((await FSe.getEnvelopes(n)).length>0){U.log(" Existing user detected on new device  skipping onboarding, setting localStorage"),localStorage.setItem(r,"true"),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}}catch(o){U.error(" Failed to check existing envelopes for onboarding:",o),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}e().isOnboardingActive||(U.log(" Starting onboarding for new user - setting isOnboardingActive to TRUE"),t({isOnboardingCompleted:!1,isOnboardingActive:!0}),U.log(" isOnboardingActive set to:",e().isOnboardingActive))},completeOnboarding:()=>{const n=Zu();if(n){const r=`onboardingCompleted_${n}`;localStorage.setItem(r,"true"),U.log(" Onboarding completed for user:",n)}t({isOnboardingCompleted:!0,isOnboardingActive:!1})},resetOnboarding:()=>{const n=Zu();if(n){const r=`onboardingCompleted_${n}`;localStorage.removeItem(r),U.log(" Onboarding reset for user:",n)}t({isOnboardingCompleted:!1,isOnboardingActive:!0})},startGuidedTutorial:()=>{U.log(" Starting guided tutorial"),t({guidedTutorialStep:0,guidedTutorialCompleted:!1})},advanceGuidedTutorial:()=>{const n=e().guidedTutorialStep;if(n===null)return;const r=n+1;if(r>=4){const a=Zu();a&&localStorage.setItem(`guidedTutorialCompleted_${a}`,"true"),U.log(" Guided tutorial completed!"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})}else U.log(" Advancing guided tutorial to step:",r),t({guidedTutorialStep:r})},skipGuidedTutorial:()=>{const n=Zu();n&&localStorage.setItem(`guidedTutorialCompleted_${n}`,"true"),U.log(" Guided tutorial skipped"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})},completeGuidedTutorial:()=>{const n=Zu();n&&localStorage.setItem(`guidedTutorialCompleted_${n}`,"true"),U.log(" Guided tutorial completed!"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})},resetGuidedTutorial:()=>{const n=Zu();n&&localStorage.removeItem(`guidedTutorialCompleted_${n}`),U.log(" Guided tutorial reset  starting at step 0"),t({guidedTutorialStep:0,guidedTutorialCompleted:!1})}}),USe=({set:t,get:e})=>({updateAppSettings:async n=>{try{t({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:n.theme??r.appSettings?.theme??"system",fontSize:n.fontSize??r.appSettings?.fontSize??"medium",enableMoveableReorder:n.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,paymentSources:n.paymentSources??r.appSettings?.paymentSources??[],siriToken:n.siriToken??r.appSettings?.siriToken};(n.userId||r.appSettings?.userId)&&(i.userId=n.userId??r.appSettings?.userId),i.paymentSources&&(i.paymentSources=i.paymentSources.map(s=>{const o={...s};return o.last4===void 0&&delete o.last4,o}));const{currentUser:a}=tn.getState();if(a){const{AppSettingsService:s}=await Jh(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>WB);return{AppSettingsService:o}},void 0);await s.updateAppSettings(a.id,i.id,i)}t({appSettings:i,isLoading:!1}),U.log(" Updated app settings")}catch(r){throw U.error(" updateAppSettings failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;const{currentUser:r}=tn.getState();if(r){const{AppSettingsService:a}=await Jh(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>WB);return{AppSettingsService:o}},void 0),s=await a.getAppSettings(r.id);if(s){t({appSettings:s}),U.log(" Loaded app settings from Firestore");return}}const i={id:"default",theme:"system",fontSize:"medium",enableMoveableReorder:!0,paymentSources:[]};r&&(i.userId=r.id),t({appSettings:i}),U.log(" Initialized default app settings")}catch(n){U.error(" initializeAppSettings failed:",n),t({error:n instanceof Error?n.message:"Failed to initialize settings"})}},updateOnlineStatus:async()=>{try{const n=typeof navigator<"u"?navigator.onLine:!0;t({isOnline:n}),U.log(" Online status updated:",n)}catch(n){U.error(" Failed to update online status:",n)}}}),Cm=vs.getInstance(),_k=sl.getInstance(),XB=()=>{const{currentUser:t}=tn.getState();if(!t)throw new Error("No authenticated user found");return t},qSe=({set:t,get:e})=>({setMonth:async n=>{t({currentMonth:n});const r=e();r.loadedTransactionMonths.includes(n)||t(a=>({loadedTransactionMonths:[...a.loadedTransactionMonths,n]})),(r.incomeSources[n]===void 0||r.allocations[n]===void 0)&&(U.log(`Month ${n} budget data missing in store, fetching...`),t({isLoading:!0}),await e().fetchMonthData(n),t({isLoading:!1}))},init:async()=>{U.log("BudgetStore initializing...");const n=e();try{t({isLoading:!0,error:null});const{currentUser:r}=tn.getState();if(!r){U.log("No user logged in, skipping data fetch"),t({isLoading:!1});return}U.log(`Fetching data for user: ${r.id}, month: ${n.currentMonth}`);const[i,a,s]=await Promise.all([Cm.getEnvelopes(r.id),_k.getCategories(r.id).catch(b=>(U.error(" Failed to load categories:",b),[])),Cm.getMonthData(r.id,n.currentMonth)]),o=[n.currentMonth];let c=Array.from(new Map(a.map(b=>[b.id,b])).values());const u=new Set;let f=!1;for(const b of c){const x=b.name.toLowerCase().trim();if(u.has(x)){f=!0;break}u.add(x)}f&&r&&(U.log(" Duplicate category names detected, running Firestore cleanup..."),await _k.deduplicateCategories(r.id)>0&&(c=await _k.getCategories(r.id))),t({envelopes:i,loadedTransactionMonths:o,areAllTransactionsLoaded:!1,categories:c,incomeSources:{...n.incomeSources,[n.currentMonth]:s.incomeSources},allocations:{...n.allocations,[n.currentMonth]:s.allocations},isLoading:!1,error:null}),U.log(` BudgetStore initialized: ${i.length} envelopes, current month: ${n.currentMonth}`);const h=e(),g=new Set(h.transactions.map(b=>b.month)),v=Array.from(g).filter(b=>b!==void 0&&b!==h.currentMonth&&(!h.incomeSources[b]||!h.allocations[b]));if(v.length>0){U.log(` Auto-fixing ${v.length} lazy loading gaps: ${v.join(", ")}`);for(const b of v)try{await e().fetchMonthData(b);const x=e();(!x.incomeSources[b]||!x.allocations[b])&&(U.log(` Creating empty month data for ${b} (no budget data found in Firestore)`),t(w=>({incomeSources:{...w.incomeSources,[b]:[]},allocations:{...w.allocations,[b]:[]}}))),U.log(` Fixed lazy loading gap for ${b}`)}catch(x){U.error(` Failed to fix lazy loading gap for ${b}:`,x)}}else U.log(" No lazy loading gaps detected for current month transactions")}catch(r){U.error(" BudgetStore initialization failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},fetchData:async()=>{await e().init()},fetchMonthData:async n=>{try{const{currentUser:r}=tn.getState();if(!r){U.log("No user logged in, skipping month data fetch");return}U.log(`Fetching month data for: ${n}`),e().loadedTransactionMonths.includes(n)||t(s=>({loadedTransactionMonths:[...s.loadedTransactionMonths,n]}));const i=await Cm.getMonthData(r.id,n),a=e();if(t({incomeSources:{...a.incomeSources,[n]:i.incomeSources},allocations:{...a.allocations,[n]:i.allocations}}),U.log(` Fetched budget data for ${n}`),n===e().currentMonth){const s=async()=>{try{const o=e(),c=o.allocations[n]||[],u=o.transactions.filter(h=>h.month===n);let f=0;for(const h of c){const g=o.envelopes.find(b=>b.id===h.envelopeId);if(g?.isPiggybank)continue;const v=u.find(b=>b.envelopeId===h.envelopeId&&(b.description==="Monthly Budget Allocation"||b.description==="Monthly Allocation"||b.description==="Budgeted"||b.description==="Piggybank Contribution"));v?v.amount!==h.budgetedAmount&&(U.log(` Repairing mismatch for envelope ${g?.name||h.envelopeId}: Alloc ${h.budgetedAmount} vs Tx ${v.amount}`),await o.updateTransaction({...v,amount:h.budgetedAmount}),f++):h.budgetedAmount>0&&(U.log(` Repairing missing transaction for envelope ${g?.name||h.envelopeId}`),await o.addTransaction({description:"Budgeted",amount:h.budgetedAmount,envelopeId:h.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),f++)}f>0&&U.log(` Repaired ${f} allocation discrepancies for ${n}`)}catch(o){U.error(` Verification failed for ${n}:`,o)}};setTimeout(()=>{s().catch(o=>U.error("Verification failed:",o))},1e3)}}catch(r){U.error(` Failed to fetch month data for ${n}:`,r)}},clearMonthData:async n=>{try{t({isLoading:!0,error:null}),U.log(` Clearing all data for month: ${n}`);const r=XB(),{monthlyBudgetService:i}=await Jh(async()=>{const{monthlyBudgetService:a}=await import("./MonthlyBudgetService-DpUJzEG0.js");return{monthlyBudgetService:a}},[]);await i.clearMonthData(r.id,n),await e().init(),U.log(` Cleared month data for ${n}`),t({isLoading:!1})}catch(r){throw U.error(" clearMonthData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to clear month data"}),r}},resetData:async()=>{U.log(" Resetting all data"),t({isLoading:!0});try{const{currentUser:n}=tn.getState();n?(U.log(" Deleting all data from Firestore for user:",n.id),await Cm.deleteAllUserData(n.id)):U.warn(" No user logged in, only clearing local state"),t({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null}),U.log(" Reset data complete")}catch(n){throw U.error(" resetData failed:",n),t({isLoading:!1,error:n instanceof Error?n.message:"Failed to reset data"}),n}},importData:async n=>{try{if(t({isLoading:!0,error:null}),!n||typeof n!="object")throw new Error("Invalid data format");const r=XB();return U.log(" Starting Time Machine Restore for user:",r.id),await Cm.restoreUserData(r.id,n),U.log(" Reloading app state from cloud..."),await e().init(),t({isLoading:!1}),{success:!0,message:"Data restored successfully from backup."}}catch(r){return U.error(" importData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},handleUserLogout:()=>{U.log(" Clearing user data on logout"),t({envelopes:[],transactions:[],categories:[],incomeSources:{},allocations:{},isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null})}}),GSe=()=>tn.getState().currentUser?.id||"",mt=p2()(Pue(Nq((t,e)=>({envelopes:[],transactions:[],categories:[],appSettings:null,incomeSources:{},allocations:{},loadedTransactionMonths:[],areAllTransactionsLoaded:!1,currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isOnboardingActive:!1,isOnboardingCompleted:!1,guidedTutorialStep:null,guidedTutorialCompleted:!1,isLoading:!1,error:null,...zSe({set:t,get:e}),...LSe({set:t,get:e}),...VSe({set:t,get:e}),...BSe({set:t,get:e}),...$Se({set:t,get:e}),...USe({set:t,get:e}),...qSe({set:t,get:e})}),{name:"budget-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,categories:t.categories,appSettings:t.appSettings,incomeSources:t.incomeSources,allocations:t.allocations,currentMonth:t.currentMonth,isOnline:t.isOnline})})));jSe({useBudgetStore:mt,useAuthStore:tn,getCurrentUserId:GSe});const iX=Object.freeze(Object.defineProperty({__proto__:null,useBudgetStore:mt},Symbol.toStringTag,{value:"Module"})),QB=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&t.seconds!==void 0)return new Date(t.seconds*1e3);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}if(typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?null:e}return null},HSe=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,reorderEnvelopes:a}=mt(),{currentUser:s}=tn(),{currentMonth:o,incomeSources:c,allocations:u,deleteIncomeSource:f,setEnvelopeAllocation:h,copyPreviousMonthAllocations:g,isLoading:v}=mt(),{showToast:b}=mu(),[x,w]=A.useState(!1),S=A.useRef(null),[T,I]=A.useState(!1),P=!T||r||v,[O,D]=A.useState([]),N=A.useRef([]),[C,R]=A.useState([]),M=A.useRef([]),V=A.useCallback(ee=>t.find(ie=>ie.id===ee)?.isPiggybank?mt.getState().getEnvelopeBalance(ee):mt.getState().getEnvelopeBalance(ee,o),[t,o]);A.useEffect(()=>{const ee=t.filter(W=>{if(!W.isPiggybank||!W.isActive)return!1;if(W.createdAt)try{const ue=QB(W.createdAt);if(!ue)return U.error(` Invalid creation date for piggybank ${W.name}:`,W.createdAt),!1;const ie=`${ue.getFullYear()}-${String(ue.getMonth()+1).padStart(2,"0")}`;return o>=ie}catch(ue){return U.error(` Error processing piggybank ${W.name}:`,ue,{createdAt:W.createdAt,typeofCreatedAt:typeof W.createdAt}),!1}return!0}).sort((W,ue)=>{const ie=W.orderIndex??0,oe=ue.orderIndex??0;return ie-oe});R(ee),M.current=ee},[t,o]);const L=C,z=O;A.useEffect(()=>(S.current=setTimeout(()=>{w(!0)},8e3),n(),I(!0),()=>{S.current&&clearTimeout(S.current)}),[]),A.useEffect(()=>{T&&!r&&!v&&(w(!1),S.current&&clearTimeout(S.current))},[T,r,v]),A.useEffect(()=>{const ee=t.filter(W=>{if(W.isPiggybank||W.isActive===!1)return!1;const ie=(u[o]||[]).some(Se=>Se.envelopeId===W.id),oe=e.some(Se=>Se.envelopeId===W.id&&(Se.month===o||Se.date.startsWith(o)));return ie||oe}).sort((W,ue)=>{const ie=W.orderIndex??0,oe=ue.orderIndex??0;return ie-oe});D(ee),N.current=ee},[t,u,o,e]);const K=(c[o]||[]).reduce((ee,W)=>ee+W.amount,0),Y=(u[o]||[]).filter(ee=>z.some(W=>W.id===ee.envelopeId)||L.some(W=>W.id===ee.envelopeId)).reduce((ee,W)=>ee+W.budgetedAmount,0),G=K-Y,X=A.useCallback(async ee=>{if(!ee.length)return;const W=ee.map(ue=>ue.id);try{await a(W)}catch(ue){U.error("Failed to persist envelope order:",ue),b("Failed to save envelope order","error")}},[a,b]),J=A.useCallback(async ee=>{await X(ee)},[X]),ne=A.useCallback(ee=>{f(o,ee.id).catch(U.error),b(`Deleted "${ee.name}"`,"neutral")},[f,o,b]),Q=A.useCallback(async ee=>{try{const W=ee||o;U.log(" Copying to month:",W),await g(W),b("Previous month budget copied","success")}catch(W){U.error("Error copying previous month:",W),b("Failed to copy previous month","error")}},[g,b,o]),$=A.useCallback(async()=>{if(!s||!o){b("Cannot clear data: not logged in or no month selected","error");return}try{await mt.getState().clearMonthData(o),b(`"${o}" budget and transactions cleared successfully`,"success")}catch(ee){U.error("Error clearing month data:",ee),b("Failed to clear month data","error")}},[s,o,b]),Z=A.useCallback(async(ee,W)=>{try{await h(ee,W),setTimeout(()=>{const ue=mt.getState(),ie=ue.currentMonth,oe=ue.incomeSources[ie]||[],Se=ue.allocations[ie]||[],ae=new Set(ue.envelopes.filter(Pe=>{if(Pe.isPiggybank){if(!Pe.isActive)return!1;if(Pe.createdAt){const be=QB(Pe.createdAt);if(!be)return!1;const ke=`${be.getFullYear()}-${String(be.getMonth()+1).padStart(2,"0")}`;return ie>=ke}return!0}return Pe.isActive!==!1}).map(Pe=>Pe.id)),Te=Se.filter(Pe=>ae.has(Pe.envelopeId)),he=oe.reduce((Pe,be)=>Pe+be.amount,0),te=Te.reduce((Pe,be)=>Pe+be.budgetedAmount,0);he-te<-.005?b(`You can't spend more than you make.
You're not in Congress!`,"error"):Math.abs(he-te)<.005&&he>0&&b("Every dollar has a job ","success")},100)}catch(ue){U.error("Failed to set allocation:",ue),b("Failed to update budget","error")}},[h,b]);return{visibleEnvelopes:z,piggybanks:L,incomeSources:c,availableToBudget:G,currentMonth:o,allocations:u,transactions:e,isLoading:r,isInitialLoading:P,isOnline:i,showTimeoutMessage:x,getEnvelopeBalance:V,fetchData:n,reorderEnvelopes:J,deleteIncomeSource:ne,clearMonthData:$,copyFromPreviousMonth:Q,setEnvelopeAllocation:Z,localOrderRef:N,setLocalEnvelopes:D,localPiggybankOrderRef:M,setLocalPiggybanks:R}},KSe=({currentMonth:t,onMonthChange:e,budgetStatus:n})=>{const[r,i]=t.split("-").map(Number),s=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],o=()=>{let h=r,g=i-1;g<1&&(h=r-1,g=12);const v=`${h}-${g.toString().padStart(2,"0")}`;e(v)},c=()=>{let h=r,g=i+1;g>12&&(h=r+1,g=1);const v=`${h}-${g.toString().padStart(2,"0")}`;e(v)},u=()=>{const h=new Date,g=`${h.getFullYear()}-${(h.getMonth()+1).toString().padStart(2,"0")}`;e(g)},f=()=>{if(!n)return null;const{amount:h,totalIncome:g,totalAllocated:v}=n,b=typeof h=="number"?h:0,x=typeof g=="number"?g:0,w=typeof v=="number"?v:0,S=Math.abs(b)<.005,T=b<-.005,I=x>0?w/x*100:0;let P="text-gray-900 dark:text-white",O="bg-green-500",D="Left to Budget",N=x>0?Math.min(I,100):0,C=!0;return x===0?(D="Add income to start budgeting",N=0,C=!1,P="text-gray-500 dark:text-zinc-500"):S?(P="text-green-600 dark:text-emerald-400",O="bg-green-500",D="Perfect! Every dollar has a job ",N=100,C=!1):T&&(P="text-red-600 dark:text-red-400",O="bg-red-500",D="You're not in Congress! Try again.",N=100),m.jsxs("div",{className:"flex flex-col justify-center min-w-0 w-full",children:[m.jsxs("div",{className:"flex items-baseline justify-start mb-1",children:[m.jsx("span",{className:`text-xs font-medium truncate mr-1.5 ${P}`,children:D}),C&&m.jsxs("span",{className:`text-sm font-bold truncate ${P}`,children:[T?"-":"","$",Math.abs(b).toFixed(2)]})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${O}`,style:{width:`${N}%`}})})]})};return m.jsxs("div",{className:"py-2 space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-center gap-4",children:[m.jsx("button",{onClick:o,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:m.jsx(oce,{size:20})}),m.jsx("div",{className:"text-center",children:m.jsxs("button",{onClick:u,className:"text-base font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors whitespace-nowrap",title:"Click to go to current month",children:[s," ",r]})}),m.jsx("button",{onClick:c,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:m.jsx(Jo,{size:20})})]}),n&&m.jsx("div",{className:"px-1",children:f()})]})},x_=({children:t,onDelete:e,threshold:n=-100,disabled:r=!1})=>{const i=sbe(),[a,s]=A.useState(!1),o=A.useRef(0),c=()=>{r||(s(!0),o.current=Date.now())},u=async(f,h)=>{if(r)return;const g=h.offset.x,v=h.velocity.x;if(setTimeout(()=>s(!1),100),g<n||g<-50&&v<-500){const b=e();b===!1?i.start({x:0}):b instanceof Promise&&b.then(x=>{x===!1&&i.start({x:0})})}else i.start({x:0})};return m.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[m.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:m.jsx(kv,{className:"text-white w-6 h-6"})}),m.jsx(bt.div,{drag:r?!1:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${a?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:a?"none":"auto"},children:t})]})},WSe=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:s}=mt(),{showToast:o}=mu(),[c,u]=A.useState(""),[f,h]=A.useState(""),[g,v]=A.useState(!1);A.useEffect(()=>{if(!t)return;const x=window.setTimeout(()=>{n==="edit"&&r?(u(r.name),h(r.amount.toString())):(u(""),h(""))},0);return()=>window.clearTimeout(x)},[t,n,r]);const b=async x=>{if(x.preventDefault(),!c.trim()||!f||parseFloat(f)<=0){o("Please fill in all required fields with valid values","error");return}v(!0);try{if(n==="add")await i(s,{name:c.trim(),amount:parseFloat(f),month:s,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o("Income source added successfully","success");else{if(!r){o("Error: No income source to edit","error");return}await a(s,{...r,name:c.trim(),amount:parseFloat(f),updatedAt:new Date().toISOString()}),o(`Updated "${c.trim()}" income source`,"success")}e()}catch(w){U.error("Error saving income source:",w),o("Failed to save income source. Please try again.","error")}finally{v(!1)}};return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),m.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),m.jsx("input",{type:"text",value:c,onChange:x=>u(x.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:x=>{const w=x.target.value.replace(/\D/g,"");if(!w){h("");return}const T=(parseInt(w,10)/100).toFixed(2);h(T)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:g||!c.trim()||!f||parseFloat(f)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})]})})},YSe=({isVisible:t,onClose:e,categories:n,currentCategoryId:r,envelopeName:i,onSelect:a})=>(A.useEffect(()=>{if(t){const s=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${s}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,s)}}},[t]),m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(bt.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-t-2xl sm:rounded-2xl w-full sm:max-w-sm max-h-[70vh] overflow-hidden relative z-10 pb-[calc(env(safe-area-inset-bottom)+5rem)]",children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(h2,{size:18,className:"text-blue-600 dark:text-blue-400"}),m.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Move Envelope"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors text-lg",children:""})]}),m.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-zinc-800/50",children:m.jsxs("p",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Moving ",m.jsx("span",{className:"font-medium text-gray-700 dark:text-zinc-300",children:i})," to:"]})}),m.jsx("div",{className:"overflow-y-auto max-h-[50vh]",children:n.map(s=>{const o=s.id===r;return m.jsxs("button",{onClick:()=>{o||a(s.id)},disabled:o,className:`w-full flex items-center justify-between px-4 py-3 transition-colors ${o?"bg-blue-50 dark:bg-blue-900/20 cursor-default":"hover:bg-gray-50 dark:hover:bg-zinc-800 active:bg-gray-100 dark:active:bg-zinc-700"}`,children:[m.jsx("span",{className:`text-sm ${o?"font-semibold text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-white"}`,children:s.name}),o&&m.jsx(f2,{size:16,className:"text-blue-600 dark:text-blue-400"})]},s.id)})})]})]})})),XSe=({currentMonth:t,onCopy:e,isLoading:n=!1})=>{const r=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},i=o=>{const[c,u]=o.split("-").map(Number);let f=c,h=u-1;return h<1&&(f=c-1,h=12),r(`${f}-${h.toString().padStart(2,"0")}`)},a=r(t),s=i(t);return m.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 py-12 space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-blue-100 dark:bg-blue-900/30 blur-2xl rounded-full opacity-50"}),m.jsxs("div",{className:"relative bg-white dark:bg-zinc-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-700",children:[m.jsx(Sq,{className:"w-12 h-12 text-blue-500"}),m.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-white p-1.5 rounded-full border-2 border-white dark:border-zinc-900",children:m.jsx(Av,{size:14})})]})]}),m.jsxs("div",{className:"max-w-xs mx-auto space-y-2",children:[m.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["It looks like you need a budget for ",a]}),m.jsxs("p",{className:"text-gray-500 dark:text-zinc-400",children:["We can copy your budget from ",s," to get you started right away."]})]}),m.jsx("div",{className:"w-full max-w-xs space-y-3 pt-2",children:m.jsx("button",{onClick:e,disabled:n,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-sm transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?"Creating...":m.jsx(m.Fragment,{children:m.jsxs("span",{children:["Create ",a," Budget"]})})})})]})},QSe="/personal-budget-pwa/icon-512.png",Ek="/personal-budget-pwa/images/budget-balanced.png",Ax=["Giving","Savings","Housing","Transportation","Food","Personal","Health","Insurance","Debt"],ZSe=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-green-400 dark:border-green-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Income Sources"}),m.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:m.jsx(uf,{size:12,className:"text-white"})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsx("span",{className:"text-[10px] text-gray-700 dark:text-zinc-300",children:"Salary"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-emerald-400",children:"$3,500.00"})]}),m.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsx("span",{className:"text-[10px] text-gray-700 dark:text-zinc-300",children:"Freelance"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-emerald-400",children:"$800.00"})]})]})]}),JSe=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-purple-400 dark:border-purple-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-purple-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Food"}),m.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:m.jsx(uf,{size:12,className:"text-white"})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Groceries"}),m.jsx("div",{className:"w-16 h-1 bg-gray-200 dark:bg-zinc-600 rounded-full mt-0.5",children:m.jsx("div",{className:"w-10 h-1 bg-purple-500 rounded-full"})})]}),m.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-zinc-300",children:"$350 / $500"})]}),m.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Dining Out"}),m.jsx("div",{className:"w-16 h-1 bg-gray-200 dark:bg-zinc-600 rounded-full mt-0.5",children:m.jsx("div",{className:"w-6 h-1 bg-purple-500 rounded-full"})})]}),m.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-zinc-300",children:"$75 / $200"})]})]})]}),e_e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-blue-400 dark:border-blue-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between text-[10px] font-medium mb-1",children:[m.jsx("span",{className:"text-gray-700 dark:text-zinc-300",children:"Left to Budget"}),m.jsx("span",{className:"font-bold text-green-600",children:"$0.00"})]}),m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:m.jsx("div",{className:"w-full h-2 bg-green-500 rounded-full"})}),m.jsx("div",{className:"text-[9px] text-green-600 dark:text-emerald-400 text-center mt-1 font-medium",children:"Every dollar has a job!"})]}),t_e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-pink-400 dark:border-pink-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-pink-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsx("div",{className:"flex justify-between items-center mb-2",children:m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(cf,{size:12,className:"text-pink-500"}),m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Piggybanks"})]})}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Vacation Fund"}),m.jsx("span",{className:"text-[10px] font-bold text-pink-600",children:"$1,200 / $3,000"})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-600 rounded-full mt-1",children:m.jsx("div",{className:"w-2/5 h-1.5 bg-pink-500 rounded-full"})})]}),m.jsxs("div",{className:"py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Emergency Fund"}),m.jsx("span",{className:"text-[10px] font-bold text-pink-600",children:"$4,500 / $10,000"})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-600 rounded-full mt-1",children:m.jsx("div",{className:"w-[45%] h-1.5 bg-pink-500 rounded-full"})})]})]})]}),n_e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-cyan-400 dark:border-cyan-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-cyan-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"ANALYTICS"}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"relative w-16 h-16 flex-shrink-0",children:[m.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full -rotate-90",children:[m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-gray-200 dark:text-zinc-700"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#8B5CF6",strokeWidth:"3",strokeDasharray:"35 65",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#3B82F6",strokeWidth:"3",strokeDasharray:"25 75",strokeDashoffset:"-35",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#10B981",strokeWidth:"3",strokeDasharray:"20 80",strokeDashoffset:"-60",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#F59E0B",strokeWidth:"3",strokeDasharray:"15 85",strokeDashoffset:"-80",strokeLinecap:"round"})]}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[m.jsx("span",{className:"text-[8px] text-gray-500 dark:text-zinc-500",children:"Total"}),m.jsx("span",{className:"text-[10px] font-bold text-gray-900 dark:text-white",children:"$4,300"})]})]}),m.jsxs("div",{className:"space-y-1 flex-1",children:[m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Housing 35%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Food 25%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Transport 20%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Personal 15%"})]})]})]})]}),r_e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-teal-400 dark:border-teal-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-teal-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"TRENDS"}),m.jsx("div",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300 mb-2",children:"Monthly Spending"}),m.jsx("div",{className:"flex items-end gap-1 h-12",children:[65,45,80,55,70,40].map((t,e)=>m.jsxs("div",{className:"flex-1 flex flex-col items-center gap-0.5",children:[m.jsx("div",{className:"w-full rounded-t",style:{height:`${t}%`,background:`hsl(${200+e*20}, 70%, 55%)`}}),m.jsx("span",{className:"text-[7px] text-gray-400",children:["Jan","Feb","Mar","Apr","May","Jun"][e]})]},e))})]}),Zs=[{id:"housing",label:"Housing",sub:"Rent, Utilities"},{id:"food",label:"Food",sub:"Groceries, Dining"},{id:"transport",label:"Transportation",sub:"Gas, Insurance"},{id:"savings",label:"Savings",sub:"Emergency, Goals"}],i_e=()=>{const[t,e]=A.useState(Zs),n=nl.useRef(0);return A.useEffect(()=>{const r=[()=>e([Zs[1],Zs[0],Zs[2],Zs[3]]),()=>e([Zs[3],Zs[1],Zs[0],Zs[2]]),()=>e(Zs)],i=setInterval(()=>{n.current=(n.current+1)%r.length,r[n.current]()},2e3);return()=>clearInterval(i)},[]),m.jsxs("div",{className:"bg-white dark:bg-indigo-950/30 rounded-lg p-2 border border-indigo-300 dark:border-indigo-700 space-y-1",children:[m.jsx(lr,{mode:"popLayout",children:t.map(r=>m.jsxs(bt.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:"flex items-center gap-2 py-1.5 px-2 bg-indigo-50 dark:bg-indigo-900/40 rounded-lg",children:[m.jsx(np,{size:14,className:"text-indigo-400 dark:text-indigo-500 flex-shrink-0"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"text-[11px] font-medium text-indigo-900 dark:text-indigo-200",children:r.label}),m.jsx("div",{className:"text-[9px] text-indigo-600 dark:text-indigo-400",children:r.sub})]})]},r.id))}),m.jsx("p",{className:"text-[9px] text-indigo-500 dark:text-indigo-400 text-center italic mt-1",children:"Categories reordering automatically..."})]})},a_e=({currentMonth:t,onComplete:e,onSkip:n})=>{const[r,i]=A.useState(0),[a,s]=A.useState(0),[o,c]=A.useState(2500),[u,f]=A.useState(Ax),[h,g]=A.useState(!1),{addCategory:v}=mt(),b=M=>{f(V=>V.includes(M)?V.filter(L=>L!==M):[...V,M])},x=async()=>{for(let M=0;M<u.length;M++)await v({name:u[M],orderIndex:M,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});e()},w=async()=>{for(let M=0;M<Ax.length;M++)await v({name:Ax[M],orderIndex:M,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});n()};A.useEffect(()=>{if(r===5){c(2500);const M=2e3,V=20,L=M/V,z=2500/V;let K=0;const Y=setInterval(()=>{K++;const G=Math.max(0,2500-z*K);c(G),K>=V&&(clearInterval(Y),setTimeout(()=>{let X=0;const J=10,ne=200,Q=500/J,$=setInterval(()=>{X++;const Z=-(Q*X);c(Z),X>=J&&clearInterval($)},ne)},1e3))},L);return()=>clearInterval(Y)}},[a,r]);const T=(M=>{const[V,L]=M.split("-");return new Date(parseInt(V),parseInt(L)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})})(t),I=[{icon:Av,title:"Welcome to Dollars At Work!",description:`Let's set up your budget for ${T}`,content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Dollars At Work helps you take control of your money using the ",m.jsx("strong",{children:"zero-based budgeting"})," method."]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Every dollar gets a job, and you'll know exactly where your money is going."}),m.jsxs("div",{className:"bg-gray-100 dark:bg-zinc-800/50 rounded-xl p-3 space-y-2",children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 text-center mb-1",children:"Your budget will look like this:"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-2 flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-bold text-gray-900 dark:text-white",children:"February 2026"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600",children:"$0.00 left"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-1.5 text-center",children:[m.jsx(Ih,{size:14,className:"text-green-500 mx-auto"}),m.jsx("span",{className:"text-[8px] text-gray-600 dark:text-zinc-400",children:"Income"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-1.5 text-center",children:[m.jsx(ip,{size:14,className:"text-purple-500 mx-auto"}),m.jsx("span",{className:"text-[8px] text-gray-600 dark:text-zinc-400",children:"Envelopes"})]})]})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:m.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium",children:"This quick guide will show you how to get started in just a few steps!"})})]}),color:"blue"},{icon:aue,title:"Step 1: Choose Categories",description:"Select categories to organize your spending",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Categories help group your envelopes. Select the ones you need:"}),m.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto pr-1",children:Ax.map(M=>m.jsxs("button",{onClick:()=>b(M),className:`p-3 rounded-xl border text-sm font-medium transition-all flex items-center gap-2 ${u.includes(M)?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300":"bg-white border-gray-200 text-gray-600 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-400"}`,children:[m.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${u.includes(M)?"border-blue-500 bg-blue-500":"border-gray-400"}`,children:u.includes(M)&&m.jsx(ro,{size:12,className:"text-white"})}),M]},M))}),u.length===0&&m.jsx("p",{className:"text-red-500 text-xs",children:"Please select at least one category."})]}),color:"blue"},{icon:Ih,title:"Step 2: Add Your Income",description:"Tell us how much money you have to work with",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Add your income sources for the month. This could be:"}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(ro,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Salary"})," - Your regular paycheck"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(ro,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Freelance"})," - Side gig income"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(ro,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Other Income"})," - Any other money coming in"]})]})]}),m.jsx(ZSe,{}),m.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-green-900 dark:text-green-200",children:[m.jsxs("strong",{children:["Tap the ",m.jsx(uf,{className:"w-4 h-4 inline"})," button"]}),' next to "Income Sources" to add your income.']})})]}),color:"green"},{icon:ip,title:"Step 3: Create Spending Envelopes",description:"Organize your spending into categories",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Spending envelopes are where you track expenses. You'll assign each envelope to a category."}),m.jsx(JSe,{}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(ro,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Groceries"})," (Food)"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(ro,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Rent/Mortgage"})," (Housing)"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(ro,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Gas"})," (Transportation)"]})]})]}),m.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-purple-900 dark:text-purple-200",children:[m.jsx("strong",{children:'Tap "+" on a category section'})," to add an envelope to it."]})})]}),color:"purple"},{icon:np,title:"Step 4: Organize Your Budget",description:"Reorder categories and envelopes to match your preferences",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Your budget should work the way ",m.jsx("strong",{children:"you"})," think about money. Customize the order to match your priorities!"]}),m.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4",children:[m.jsxs("h4",{className:"font-medium text-indigo-900 dark:text-indigo-200 mb-3 flex items-center gap-2",children:[m.jsx(np,{className:"w-4 h-4"}),"Drag to Reorder"]}),m.jsxs("div",{className:"space-y-2 mb-3",children:[m.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[m.jsx("strong",{children:"Mobile:"})," Long-press and drag"]}),m.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[m.jsx("strong",{children:"PC:"})," Click and hold on the ",m.jsx("strong",{children:"dots"}),", then drag"]})]}),m.jsx(i_e,{}),m.jsxs("ul",{className:"space-y-1 text-sm text-indigo-700 dark:text-indigo-400 mt-3",children:[m.jsx("li",{children:"- Reorder categories: Settings  Manage Categories"}),m.jsx("li",{children:"- Reorder envelopes: On the main budget screen"})]})]}),m.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[m.jsx("strong",{children:"Pro tip:"})," Try organizing: Income  Fixed Expenses  Variable Expenses  Savings Goals"]})})]}),color:"indigo"},{icon:Mc,title:"Step 5: Allocate Your Budget",description:"Assign money to each envelope",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Now comes the fun part - giving every dollar a job!"}),m.jsx(e_e,{}),m.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 rounded-r-xl p-4 relative",children:[m.jsx("button",{onClick:()=>s(M=>M+1),className:"absolute top-2 right-2 p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-lg transition-colors",title:"Replay animation",children:m.jsx(Zce,{className:"w-4 h-4"})}),m.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium mb-2",children:'The "Left to Budget" amount shows unassigned money'}),m.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 mb-3",children:["Your goal is to get this to ",m.jsx("strong",{children:"$0.00"})," by allocating all your income to envelopes."]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 font-medium",children:[m.jsx("span",{children:"Left to Budget"}),m.jsxs("span",{className:`font-bold ${o<0?"text-red-600 dark:text-red-400":""}`,children:["$",o.toFixed(2)]})]}),m.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2 overflow-hidden",children:m.jsx(bt.div,{className:`h-full rounded-full ${o<0?"bg-red-500":"bg-green-500"}`,initial:{width:"0%"},animate:{width:o<0?"100%":`${(2500-o)/2500*100}%`},transition:{duration:.3,ease:"easeInOut"}})}),m.jsxs(bt.div,{className:`text-xs font-medium text-center mt-1 ${o===0?"text-green-600 dark:text-emerald-400":o<0?"text-red-600 dark:text-red-400":"text-blue-700 dark:text-blue-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.5},children:[o===0&&"Perfect! Every dollar has a job!",o<0&&"You're not in Congress! Try again.",o>0&&"Keep allocating until you reach $0"]})]},a)]}),m.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[m.jsx("strong",{children:"Pro tip:"})," Start with essential expenses (rent, utilities, groceries) first, then allocate what's left."]})})]}),color:"blue"},{icon:cf,title:"Bonus: Piggybanks (Savings Goals)",description:"Save for future goals",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Piggybanks are special envelopes for ",m.jsx("strong",{children:"savings goals"})," that carry over month-to-month."]}),m.jsx(t_e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(oue,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Set a Goal"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Vacation, emergency fund, new car - whatever you're saving for"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Ih,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Contributions"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Set a monthly amount to save"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Mc,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Track Progress"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Watch your savings grow toward your goal"})]})]})]})]}),color:"pink"},{icon:Mw,title:"Charts: Spending Insights",description:"Visualize where your money goes",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["The ",m.jsx("strong",{children:"Charts"})," screen gives you powerful insights into your spending habits over time."]}),m.jsx(n_e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(_q,{className:"w-5 h-5 text-cyan-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Spending Totals"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"See a donut chart of spending by category"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Mw,{className:"w-5 h-5 text-cyan-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Spending Breakdown"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly stacked bar chart by category"})]})]})]}),m.jsx("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 border border-cyan-200 dark:border-cyan-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-cyan-900 dark:text-cyan-200",children:[m.jsx("strong",{children:"Access Charts"}),' from the bottom navigation bar under the "More" menu.']})})]}),color:"blue"},{icon:Mc,title:"Charts: Income & Savings",description:"Track your financial health over time",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Monitor your ",m.jsx("strong",{children:"income trends"})," and ",m.jsx("strong",{children:"savings rate"})," to stay on track."]}),m.jsx(r_e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Ih,{className:"w-5 h-5 text-teal-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Income"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Track income by source over time with stacked bars"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Mc,{className:"w-5 h-5 text-teal-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Savings Rate"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"See what percentage of income you're saving each month"})]})]})]}),m.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-teal-900 dark:text-teal-200",children:[m.jsx("strong",{children:"Time frames:"})," View 1, 3, 6, 9, or 12 months of data, or filter by year."]})})]}),color:"blue"},{icon:Ek,title:"You're Ready to Budget!",description:"Start taking control of your money",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"That's it! You now know the basics of Dollars At Work:"}),m.jsx("div",{className:"space-y-2",children:["Choose your categories","Add your income sources","Create envelopes in categories","Organize your budget order","Allocate until Left to Budget = $0","Set up Piggybanks for savings goals","Track trends in Charts"].map((M,V)=>m.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[m.jsx("div",{className:"w-7 h-7 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:m.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold text-xs",children:V+1})}),m.jsx("span",{className:"text-sm",children:M})]},V))}),m.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mt-4",children:m.jsx("p",{className:"text-sm text-center text-blue-900 dark:text-blue-200 font-medium",children:`Click "Start Budgeting" below and we'll guide you through your first setup!`})})]}),color:"green",useCustomIcon:!0}],P=I[r],O=P.useCustomIcon?Ek:P.icon,D=r===I.length-1,N=r===0,C={blue:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700"},green:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",button:"bg-green-600 hover:bg-green-700"},purple:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-600 dark:text-purple-400",button:"bg-purple-600 hover:bg-purple-700"},indigo:{bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-600 dark:text-indigo-400",button:"bg-indigo-600 hover:bg-indigo-700"},pink:{bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-600 dark:text-pink-400",button:"bg-pink-600 hover:bg-pink-700"}},R=C[P.color]||C.blue;return m.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex items-center justify-center p-4",children:m.jsxs("div",{className:"w-full max-w-2xl",children:[m.jsx(lr,{children:h&&m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs(bt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-gray-200 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Skip Onboarding?"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-4",children:"We'll set up default categories for you. You can always restart this guide from Settings."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Continue Guide"}),m.jsx("button",{onClick:w,className:"flex-1 py-2.5 px-4 bg-gray-800 dark:bg-zinc-700 text-white rounded-xl font-medium hover:bg-gray-900 dark:hover:bg-zinc-600 transition-colors",children:"Skip"})]})]})})}),m.jsx(lr,{mode:"wait",children:m.jsxs(bt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[m.jsx("div",{className:"flex justify-end px-4 pt-3",children:m.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 text-xs text-gray-400 dark:text-zinc-500 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors px-2 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800",children:[m.jsx(Cq,{size:14}),"Skip"]})}),m.jsx("div",{className:"px-6 pb-2",children:m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:P.title}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:P.description})]}),m.jsx("div",{className:"flex flex-col items-center mx-4",children:r===0?m.jsx("img",{src:QSe,alt:"Dollars At Work",className:`w-20 h-20 ${R.text}`}):P.useCustomIcon?m.jsx("img",{src:Ek,alt:"Budget Balanced",className:`w-32 h-32 ${R.text}`}):m.jsx("div",{className:`${R.bg} p-3 rounded-xl`,children:typeof O=="string"?null:m.jsx(O,{className:`w-8 h-8 ${R.text}`})})})]})}),m.jsx("div",{className:"px-6 pb-6 pt-2 max-h-[55vh] overflow-y-auto",children:P.content}),m.jsx("div",{className:"px-6 pb-2 flex justify-center gap-1.5",children:I.map((M,V)=>m.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${V===r?`w-8 ${R.button}`:V<r?"w-2 bg-gray-400 dark:bg-zinc-600":"w-2 bg-gray-200 dark:bg-zinc-700"}`},V))}),m.jsx("div",{className:"text-center pb-2",children:m.jsxs("span",{className:"text-xs text-gray-400 dark:text-zinc-500",children:[r+1," of ",I.length]})}),m.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[!N&&m.jsxs("button",{onClick:()=>i(M=>M-1),className:"flex-1 py-3 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors flex items-center justify-center gap-2",children:[m.jsx($a,{className:"w-5 h-5"}),"Back"]}),m.jsx("button",{onClick:()=>{if(D)x();else{if(P.title.includes("Choose Categories")&&u.length===0)return;i(M=>M+1)}},disabled:P.title.includes("Choose Categories")&&u.length===0,className:`${N?"flex-1":"flex-[2]"} py-3 px-4 ${R.button} text-white rounded-xl font-semibold transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:D?m.jsxs(m.Fragment,{children:[m.jsx(Av,{className:"w-5 h-5"}),"Start Budgeting"]}):m.jsxs(m.Fragment,{children:["Next",m.jsx(Qle,{className:"w-5 h-5"})]})})]})]},r)})]})})},s_e=({piggybank:t,balance:e,onNavigate:n,setMoveableRef:r,isReorderingActive:i,activelyDraggingId:a,onItemDragStart:s,onLongPressTrigger:o,onMoveCategory:c})=>{const u=A.useRef(null),[f,h]=A.useState(!1),g=zD(M=>{tX(),o(M,t.id)},{threshold:500,cancelOnMovement:25,detect:Fc.Touch}),v=t.piggybankConfig?.targetAmount,b=t.piggybankConfig?.monthlyContribution??0,x=t.piggybankConfig?.color||"#3B82F6",w=t.piggybankConfig?.paused||!1,S=e,T=(M,V=1)=>{const L=M.replace("#",""),z=parseInt(L,16),K=z>>16&255,Y=z>>8&255,G=z&255;return`rgba(${K}, ${Y}, ${G}, ${V})`},I=`linear-gradient(135deg, ${T(x,.14)} 0%, ${T(x,.05)} 100%)`,P=T(x,.4),O=v&&v>0?Math.min(S/v*100,100):0,D=v&&S>=v;A.useEffect(()=>{a&&a!==t.id&&h(!1)},[a,t.id]),A.useEffect(()=>{a===t.id&&(h(!0),s&&s(t.id))},[a,t.id,s]),A.useEffect(()=>{if(!a&&f){const M=setTimeout(()=>{h(!1)},300);return()=>clearTimeout(M)}},[a,f]);const N=M=>{if(f||i){M.preventDefault(),M.stopPropagation();return}n(t.id)},C=a===t.id,R=m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:M=>o(M,t.id),children:m.jsx(np,{size:20})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3 mb-1",children:[m.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[m.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center",style:{backgroundColor:`${x}20`},children:m.jsx(cf,{size:12,style:{color:x}})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate leading-tight",children:t.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[m.jsx(Mc,{size:10,style:{color:x}}),m.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400 font-medium",children:["$",b.toFixed(2),"/mo"]}),w&&m.jsxs("span",{className:"text-[9px] text-orange-600 dark:text-orange-400 font-bold ml-1 flex items-center gap-0.5",children:[m.jsx(Gce,{size:8})," PAUSED"]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c&&m.jsx("button",{onClick:M=>{M.stopPropagation(),c(t)},className:"p-1 text-gray-300 dark:text-zinc-600 hover:text-blue-500 dark:hover:text-blue-400 transition-colors rounded-md",title:"Move to category",children:m.jsx(h2,{size:14})}),m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:["$",S.toFixed(2)]}),m.jsxs("div",{className:"text-[9px] text-gray-400 dark:text-zinc-500 mt-1",children:["of $",v?.toFixed(0)||"0"]})]})]})]}),v&&v>0&&m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800/50 rounded-full h-0.5 overflow-hidden",children:m.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${O}%`,backgroundColor:x}})}),D&&!v&&m.jsx("div",{className:"text-[9px] text-green-600 dark:text-green-400 font-bold mt-0.5",children:" GOAL REACHED"})]})]});return m.jsx(bt.div,{...g(),layout:!C,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:M=>{r&&r(M),u.current=M},onClick:N,style:{background:I,borderColor:P,boxShadow:C?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",zIndex:C?50:1,scale:C?1.02:1},className:"rounded-xl py-1.5 px-3 border transition-all cursor-pointer shadow-sm hover:shadow-md select-none active:scale-[0.99] group",children:R})},Im=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,s=r&255;return`rgba(${i}, ${a}, ${s}, ${e})`},o_e=12,l_e=(t,e,n)=>Math.min(Math.max(t,e),n),c_e=({env:t,budgetedAmount:e,remainingBalance:n,navigate:r,transactions:i,currentMonth:a,setMoveableRef:s,isReorderingActive:o,activelyDraggingId:c,onItemDragStart:u,onLongPressTrigger:f,onMoveCategory:h})=>{const g=!!t.isPiggybank,v=t.piggybankConfig?.color||"#3B82F6",b=g?`linear-gradient(135deg, ${Im(v,.18)} 0%, ${Im(v,.08)} 100%)`:void 0,x=g?Im(v,.5):void 0,[w,S]=A.useState(!1),T=zD(L=>{tX(),f(L,t.id)},{threshold:500,cancelOnMovement:25,detect:Fc.Touch}),I=i.filter(L=>L.envelopeId===t.id&&L.month===a),P=I.filter(L=>L.type==="Expense"),O=I.filter(L=>L.type==="Income"),D=P.reduce((L,z)=>L+(z.amount||0),0),N=O.reduce((L,z)=>L+(z.amount||0),0),C=N>0?Math.max(0,D/N*100):0,R=L=>{if(w||o){L.preventDefault(),L.stopPropagation();return}r(`/envelope/${t.id}`)};A.useEffect(()=>{c&&c!==t.id&&S(!1)},[c,t.id]),A.useEffect(()=>{c===t.id&&(S(!0),u(t.id))},[c,t.id,u]),A.useEffect(()=>{if(!c&&w){const L=setTimeout(()=>{S(!1)},300);return()=>clearTimeout(L)}},[c,w]);const M=m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:L=>f(L,t.id),children:m.jsx(np,{size:20})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[g&&m.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center border",style:{borderColor:Im(v,.4),backgroundColor:Im(v,.15),color:v},children:m.jsx(cf,{size:10})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-tight",children:t.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[m.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),m.jsxs("span",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300",children:["$",e.toFixed(2)]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:L=>{L.stopPropagation(),h(t)},className:"p-1 text-gray-300 dark:text-zinc-600 hover:text-blue-500 dark:hover:text-blue-400 transition-colors rounded-md",title:"Move to category",children:m.jsx(h2,{size:14})}),m.jsxs("div",{className:"text-right",children:[m.jsxs("span",{className:`text-sm font-bold leading-none ${(typeof n=="number"?n:n.toNumber())<0||100-C<=5?"text-red-500":C>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof n=="number"?n:n.toNumber()).toFixed(2)]}),m.jsx("span",{className:"text-[9px] text-gray-400 dark:text-zinc-500 block uppercase tracking-wider mt-0.5",children:"Remaining"})]})]})]}),e>0&&m.jsx("div",{className:"mt-1",children:m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700/50 rounded-full h-0.5 overflow-hidden",children:m.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof n=="number"?n:n.toNumber())<0||100-C<=5?"bg-red-500":C>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-C,2)}%`}})})})]})]}),V=c===t.id;return m.jsx(bt.div,{...T(),layout:!V,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},"data-envelope-id":t.id,ref:s(t.id),onClick:R,style:{boxShadow:V?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",background:b,borderColor:x,cursor:V?"grabbing":"pointer",zIndex:V?50:1,scale:V?1.02:1},className:`py-1.5 px-3 rounded-xl active:scale-[0.99] transition-all select-none border group ${g?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:M})},u_e=({category:t,envelopes:e,allocations:n,currentMonth:r,transactions:i,navigate:a,getEnvelopeBalance:s,onReorderGlobal:o,isFirstCategory:c=!1,onMoveCategory:u})=>{const[f,h]=A.useState(e),g=A.useRef(e),[v,b]=A.useState(!1),[x,w]=A.useState(null),S=A.useRef(!1),T=A.useRef(null),I=A.useRef({}),P=A.useRef({}),O=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{v||(h(e),g.current=e)},[e,v]);const D=A.useCallback((C,R)=>{const M=P.current[R];if(M){S.current=!0;const V=C.nativeEvent||C;M.dragStart(V)}},[]),N=A.useCallback(C=>R=>{R?I.current[C]=R:delete I.current[C]},[]);return A.useEffect(()=>{const C=()=>{Object.values(P.current).forEach(V=>V?.destroy()),P.current={}};if(!f.length)return;const R=()=>{f.forEach(V=>{const L=I.current[V.id];if(!L||!T.current)return;const z=new JY(T.current,{target:L,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[]});z.on("dragStart",Y=>{if(!S.current){Y.stop();return}const G=Y.inputEvent.target;if(G.closest(".js-budget-target")||G.tagName==="INPUT"){Y.stop();return}const X=g.current.findIndex(Q=>Q.id===V.id),J=Y.target,ne=J.getBoundingClientRect();w(V.id),O.current={activeId:V.id,startIndex:X,currentIndex:X,itemHeight:ne.height+o_e},J.style.transition="none",J.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",J.style.zIndex="20",b(!0)});let K=null;z.on("drag",Y=>{const G=Y.target;K!==null&&cancelAnimationFrame(K),K=requestAnimationFrame(()=>{const X=O.current;if(X.activeId!==V.id)return;const J=Y.beforeTranslate[1];G.style.transform=`translateY(${J}px)`,G.style.transition="none";const{itemHeight:ne,startIndex:Q}=X,$=Math.round(J/ne),Z=l_e(Q+$,0,g.current.length-1);Z!==X.currentIndex&&(X.currentIndex=Z,g.current.forEach((ee,W)=>{if(ee.id===V.id)return;const ue=I.current[ee.id];if(!ue)return;let ie=0;Q<Z&&W>Q&&W<=Z?ie=-ne:Q>Z&&W>=Z&&W<Q&&(ie=ne),ue.style.transform=ie?`translateY(${ie}px)`:"",ue.style.transition="transform 0.2s ease"})),K=null})}),z.on("dragEnd",Y=>{K!==null&&(cancelAnimationFrame(K),K=null);const G=Y.target,{startIndex:X,currentIndex:J}=O.current;if(G.style.transform="",G.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",G.style.boxShadow="",g.current.forEach(ne=>{const Q=I.current[ne.id];Q&&(Q.style.transform="",Q.style.transition="")}),X!==J){const ne=[...g.current],[Q]=ne.splice(X,1);ne.splice(J,0,Q),g.current=ne,h(ne),o(ne.map($=>$.id))}setTimeout(()=>{G.style.zIndex="",w(null),b(!1),S.current=!1},300)}),z.on("click",()=>{const Y=window.event?.target;Y&&(Y.closest(".js-budget-target")||Y.tagName==="INPUT")||a(`/envelope/${V.id}`)}),P.current[V.id]=z})},M=window.setTimeout(R,80);return()=>{clearTimeout(M),C()}},[f,a,o]),e.length===0&&t.id==="uncategorized"?null:m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[m.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2",children:t.name}),m.jsx("button",{id:c?"tutorial-add-envelope":void 0,onClick:()=>a(t.id==="uncategorized"?"/add-envelope":`/add-envelope?categoryId=${t.id}`),className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",title:`Add to ${t.name}`,children:m.jsx(uf,{size:20})})]}),m.jsx("div",{id:c?"tutorial-allocation-area":void 0,ref:T,className:"space-y-2 relative",children:f.length===0?m.jsx("div",{className:"py-2 text-center border border-dashed border-gray-100 dark:border-zinc-800 rounded-xl",children:m.jsx("p",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:"Empty category"})}):m.jsx(lr,{initial:!1,children:f.map(C=>{const M=(n[r]||[]).find(L=>L.envelopeId===C.id)?.budgetedAmount||0,V=s(C.id);return C.isPiggybank?m.jsx(s_e,{piggybank:C,balance:V,onNavigate:L=>a(`/envelope/${L}`),setMoveableRef:N(C.id),isReorderingActive:v,activelyDraggingId:x,onItemDragStart:()=>{},onLongPressTrigger:D,onMoveCategory:u},C.id):m.jsx(c_e,{env:C,budgetedAmount:M,remainingBalance:V,navigate:a,transactions:i,currentMonth:r,setMoveableRef:N,isReorderingActive:v,activelyDraggingId:x,onItemDragStart:()=>{},onLongPressTrigger:D,onMoveCategory:u},C.id)})})})]})},d_e=()=>{const{visibleEnvelopes:t,piggybanks:e,incomeSources:n,availableToBudget:r,currentMonth:i,allocations:a,transactions:s,isLoading:o,isInitialLoading:c,showTimeoutMessage:u,getEnvelopeBalance:f,deleteIncomeSource:h}=HSe(),{setMonth:g,setIsOnboardingActive:v,isOnboardingActive:b,isOnboardingCompleted:x,completeOnboarding:w,categories:S,fetchCategories:T,ensureDefaultCategory:I,envelopes:P,reorderEnvelopes:O,startGuidedTutorial:D,updateEnvelope:N}=mt(),C=Gi(),[R,M]=A.useState(!1),[V,L]=A.useState("add"),[z,K]=A.useState(null),[Y,G]=A.useState(!1),[X,J]=A.useState(!1),[ne,Q]=A.useState(null),$=A.useRef(null),Z=A.useRef(null),[ee,W]=A.useState(0);A.useEffect(()=>{S.length===0&&T()},[S.length,T]),A.useEffect(()=>{const be=[...t,...e],ke=new Set(S.map(De=>De.id)),Oe=be.filter(De=>!De.categoryId||!ke.has(De.categoryId));Oe.length>0&&S.length>0&&I().then(De=>{Oe.forEach(Ye=>{N({...Ye,categoryId:De})})})},[t,e,S,I,N]);const ue=A.useMemo(()=>{const be={};return S.forEach(Oe=>be[Oe.id]=[]),[...t,...e].sort((Oe,De)=>(Oe.orderIndex??0)-(De.orderIndex??0)).forEach(Oe=>{if(Oe.categoryId&&be[Oe.categoryId])be[Oe.categoryId].push(Oe);else{const De=S.find(Ye=>Ye.isDefault);De&&be[De.id]?.push(Oe)}}),{groups:be}},[S,t,e]),ie=A.useCallback(async be=>{const ke=[...P.map(Ve=>Ve.id)],Oe=new Set(be),De=[];let Ye=0;ke.forEach(Ve=>{Oe.has(Ve)?De.push(be[Ye++]):De.push(Ve)}),await O(De)},[P,O]);A.useLayoutEffect(()=>{if(b)return;const be=Z.current;if(!be)return;const ke=()=>W(be.getBoundingClientRect().height);ke();const Oe=new ResizeObserver(()=>ke());return Oe.observe(be),window.addEventListener("resize",ke),()=>{window.removeEventListener("resize",ke),Oe.disconnect()}},[b,i,n,a,t,e,r]),A.useEffect(()=>{if(!c&&!o){const be=setTimeout(()=>{if(b)return;if(x){v(!1);const De=(n[i]||[]).length===0&&(a[i]||[]).length===0,Ye=Object.keys(n).some(Ve=>(n[Ve]||[]).length>0)||Object.keys(a).some(Ve=>(a[Ve]||[]).length>0);J(!!(De&&Ye));return}const ke=(n[i]||[]).length===0&&(a[i]||[]).length===0,Oe=Object.keys(n).some(De=>(n[De]||[]).length>0)||Object.keys(a).some(De=>(a[De]||[]).length>0);ke?Oe?(J(!0),v(!1)):(v(!0),J(!1)):(J(!1),v(!1))},500);return()=>clearTimeout(be)}},[c,o,i,n,a,x]);const oe=()=>{L("add"),K(null),M(!0)},Se=be=>{$.current&&clearTimeout($.current),!Y&&(L("edit"),K(be),M(!0))},ae=be=>{$.current&&clearTimeout($.current),G(!0),h(be),setTimeout(()=>G(!1),500)},Te=()=>{M(!1),K(null)},he=async()=>{J(!1);const{copyPreviousMonthAllocations:be}=mt.getState();await be(i)},te=()=>{w(),v(!1),D()},Pe=()=>{w(),v(!1),D()};return c?m.jsx(mH,{message:u?"Still loading...":"Loading your budget...",showTimeout:u}):m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:".moveable-control, .moveable-origin, .moveable-line { display: none !important; }"}}),m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[!b&&m.jsx("header",{ref:Z,className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:m.jsx(KSe,{currentMonth:i,onMonthChange:be=>{J(!1),g(be)},budgetStatus:{amount:r,totalIncome:(n[i]||[]).reduce((be,ke)=>be+ke.amount,0),totalAllocated:(a[i]||[]).filter(be=>t.some(ke=>ke.id===be.envelopeId)||e.some(ke=>ke.id===be.envelopeId)).reduce((be,ke)=>be+ke.budgetedAmount,0)}})}),m.jsxs("div",{className:"pb-[calc(8rem+env(safe-area-inset-bottom))] px-4 max-w-4xl mx-auto space-y-4",style:b?void 0:{paddingTop:Math.max(0,ee+16)},children:[b?m.jsx(a_e,{currentMonth:i,onComplete:te,onSkip:Pe}):X?m.jsx(XSe,{currentMonth:i,onCopy:he}):m.jsxs(m.Fragment,{children:[m.jsxs("section",{id:"tutorial-income-section",className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[m.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Income Sources"}),m.jsx("button",{onClick:oe,className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",children:m.jsx(uf,{size:20})})]}),(n[i]||[]).length===0?m.jsx("div",{className:"text-center py-4",children:m.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-[10px]",children:"No income sources yet."})}):m.jsx("div",{className:"space-y-2",children:m.jsx(lr,{initial:!1,mode:"popLayout",children:(n[i]||[]).map(be=>m.jsx(bt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(x_,{onDelete:()=>ae(be),children:m.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>Se(be),children:[m.jsx("div",{className:"flex-1",children:m.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:be.name})}),m.jsxs("p",{className:"text-xs font-bold text-green-600 dark:text-emerald-400",children:["$",be.amount.toFixed(2)]})]})})},be.id))})})]}),S.map((be,ke)=>m.jsx(u_e,{category:be,envelopes:ue.groups[be.id]||[],allocations:a,currentMonth:i,transactions:s,navigate:C,getEnvelopeBalance:f,onReorderGlobal:ie,isFirstCategory:ke===0,onMoveCategory:Q},be.id)),S.length===0&&m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 text-center py-12",children:[m.jsx(ip,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),m.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:"No envelopes yet."}),m.jsx("button",{onClick:()=>C("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]})]}),m.jsx(WSe,{isVisible:R,onClose:Te,mode:V,initialIncomeSource:z}),m.jsx(YSe,{isVisible:!!ne,onClose:()=>Q(null),categories:S,currentCategoryId:ne?.categoryId||"",envelopeName:ne?.name||"",onSelect:async be=>{if(ne)try{const ke=P.find(De=>De.id===ne.id);if(!ke)return;const Oe={id:ke.id,name:ke.name,currentBalance:ke.currentBalance,lastUpdated:ke.lastUpdated,isActive:ke.isActive,orderIndex:ke.orderIndex,categoryId:be};ke.userId&&(Oe.userId=ke.userId),ke.createdAt&&(Oe.createdAt=ke.createdAt),ke.isPiggybank!==void 0&&(Oe.isPiggybank=ke.isPiggybank),ke.piggybankConfig&&(Oe.piggybankConfig=ke.piggybankConfig),await N(Oe),Q(null)}catch(ke){console.error("Move category failed:",ke)}}})]})]})]})},f_e=[],aX=({selectedCard:t,onCardSelect:e,initialCards:n=f_e,disabled:r=!1,isUserSelected:i=!1})=>{const a=mt(Q=>Q.appSettings),s=mt(Q=>Q.updateAppSettings),[o,c]=A.useState(n.length>0?n[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}),[u,f]=A.useState(!1),[h,g]=A.useState(!1),[v,b]=A.useState(n),[x,w]=A.useState(null),[S,T]=A.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),[I,P]=A.useState(null),[O,D]=A.useState(null);A.useEffect(()=>{a?.paymentSources&&(b(a.paymentSources),a.paymentSources.length>0&&!t&&c(a.paymentSources[0]))},[a,t]);const N=t||o;A.useEffect(()=>{!t&&e&&v.length>0&&e(v[0])},[t,e,v]);const C=Q=>{r||(Q.id==="add-new"?g(!0):(c(Q),e?.(Q),f(!1)))},R=()=>{r||f(!u)},M=Q=>{r||w(Q)},V=async()=>{if(x&&!r){const Q=v.filter($=>$.id!==x.id);if(b(Q),N?.id===x.id){const $=Q.length>0?Q[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"};c($),e?.($)}w(null),f(!1);try{await s({paymentSources:Q})}catch($){U.error("Failed to delete card from app settings:",$),b(v),alert("Failed to delete card. Please try again.");return}}},L=()=>{w(null)},z=async()=>{if(r)return;const Q=!["Cash","Venmo"].includes(S.network);if(Q&&(S.last4.length!==4||!/^\d{4}$/.test(S.last4))){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!S.name.trim()){alert("Please enter a name");return}const $={id:`custom-${Date.now()}`,name:S.name.trim(),network:S.network,last4:Q?S.last4:void 0,color:S.color},Z=[...v,$];b(Z),c($),e?.($),g(!1),f(!1);try{await s({paymentSources:Z})}catch(ee){U.error("Failed to save card to app settings:",ee),b(v),c(N),alert("Failed to save card. Please try again.");return}T({name:"",network:"Visa",last4:"",color:"#3b82f6"})},K=(Q,$)=>{r||(P($),Q.dataTransfer.effectAllowed="move")},Y=(Q,$)=>{r||!I||(Q.preventDefault(),Q.dataTransfer.dropEffect="move",D($))},G=()=>{D(null)},X=async(Q,$)=>{if(r||!I)return;Q.preventDefault(),D(null);const Z=v.findIndex(W=>W.id===I.id);if(Z===-1||Z===$)return;const ee=[...v];ee.splice(Z,1),ee.splice($,0,I),b(ee),P(null);try{await s({paymentSources:ee})}catch(W){U.error("Failed to reorder cards:",W),b(v),alert("Failed to reorder cards. Please try again.")}},J=()=>{P(null),D(null)},ne=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&m.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),m.jsxs("div",{onClick:R,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[m.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:N.color},children:[m.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:N.network}),m.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(N.network)?N.network==="Cash"?"$$$":"@":` ${N.last4||""}`})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:N.name}),m.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cash","Venmo"].includes(N.network)?N.network:`(...${N.last4})`})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-400",children:u?"":""}),!i&&m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),u&&m.jsxs("div",{className:"card-stack-dropdown",children:[v.length>1&&m.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 text-center",children:" Drag and drop cards to reorder"}),m.jsx("div",{className:"card-stack",children:m.jsx(lr,{initial:!1,mode:"popLayout",children:[...v,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((Q,$)=>{const Z=N.id===Q.id,ee=Q.id==="add-new",W=["Cash","Venmo"].includes(Q.network);return m.jsx(bt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(x_,{onDelete:()=>!ee&&!r&&M(Q),threshold:-80,children:m.jsxs("div",{className:`card-stack-item ${Z?"selected":""} ${ee?"add-new-card":""} ${I?.id===Q.id?"dragging":""} ${O===$?"drag-over":""}`,onClick:()=>C(Q),draggable:!ee&&!r,onDragStart:ee?void 0:ue=>K(ue,Q),onDragOver:ee?void 0:ue=>Y(ue,$),onDragLeave:ee?void 0:G,onDrop:ee?void 0:ue=>X(ue,$),onDragEnd:ee?void 0:J,style:{backgroundColor:ee?"#f3f4f6":Q.color,color:ee?"#374151":Q.color==="#e3e3e3"?"#000":"#fff",zIndex:v.length-$,opacity:I?.id===Q.id?.5:1,transform:O===$?"scale(1.02)":"scale(1)"},children:[m.jsxs("div",{className:"card-header",children:[m.jsx("span",{className:"card-network",children:ee?"":Q.network}),Z&&!ee&&m.jsx("span",{className:"selected-indicator",children:""})]}),m.jsxs("div",{className:"card-details",children:[m.jsx("div",{className:"card-name",children:Q.name}),m.jsx("div",{className:"card-number",children:ee?"":W?Q.network==="Cash"?"$$$":"@":` ${Q.last4}`})]}),ee&&m.jsx("div",{className:"add-icon",children:m.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[m.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},Q.id)})})})]})]}),h&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Payment Method"}),m.jsx("button",{type:"button",onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),m.jsx("input",{type:"text",value:S.name,onChange:Q=>T({...S,name:Q.target.value}),placeholder:"e.g., Wallet Cash, My Venmo",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),m.jsxs("select",{value:S.network,onChange:Q=>T({...S,network:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[m.jsx("option",{value:"Visa",children:"Visa"}),m.jsx("option",{value:"Mastercard",children:"Mastercard"}),m.jsx("option",{value:"Amex",children:"Amex"}),m.jsx("option",{value:"Cash",children:"Cash"}),m.jsx("option",{value:"Venmo",children:"Venmo"})]})]}),!["Cash","Venmo"].includes(S.network)&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),m.jsx("input",{type:"text",value:S.last4,onChange:Q=>T({...S,last4:Q.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:ne.map(Q=>m.jsx("button",{type:"button",onClick:()=>T({...S,color:Q}),className:`w-full h-10 rounded-lg border-2 transition-all ${S.color===Q?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:Q}},Q))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),m.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:S.color},children:[m.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:S.network}),m.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(S.network)?S.network==="Cash"?"$$$":"@":` ${S.last4||"0000"}`})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"button",onClick:z,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add"})]})]})]})}),x&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",m.jsx("span",{className:"font-medium",children:x.name}),"?"]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"button",onClick:L,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"button",onClick:V,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},sX=({envelopes:t,transactionAmount:e,onSplitChange:n,initialSelectedEnvelopeId:r})=>{const{categories:i}=mt(),[a,s]=A.useState([]),[o,c]=A.useState(!1),u=A.useRef(null);A.useEffect(()=>{r&&!o&&t.some(D=>D.id===r)&&(s([r]),c(!0))},[r,t,o]);const[f,h]=A.useState({}),[g,v]=A.useState(e),b=A.useMemo(()=>{const O=[],D=[],N={};return i.forEach(C=>{N[C.id]=[]}),t.forEach(C=>{C.categoryId&&N[C.categoryId]?N[C.categoryId].push(C):D.push(C)}),i.sort((C,R)=>(C.orderIndex??0)-(R.orderIndex??0)).forEach(C=>{N[C.id].length>0&&O.push({name:C.name,id:C.id,envelopes:N[C.id]})}),D.length>0&&O.push({name:"Other",id:"uncategorized",envelopes:D}),O},[t,i]),x=O=>{s(D=>D.includes(O)?D.filter(N=>N!==O):[...D,O])},w=(O,D)=>{h(N=>({...N,[O]:D}))},S=nl.useRef(a.length);A.useEffect(()=>{if(a.length===1){const O=a[0];h({[O]:e})}else if(a.length>1&&S.current<=1){const O={};a.forEach(D=>{O[D]=0}),h(O)}S.current=a.length},[a.length,a,e]),A.useEffect(()=>{const O=Object.values(f).reduce((D,N)=>D+(N||0),0);v(e-O),n(f)},[f,e,n]),A.useEffect(()=>{const O={...f};Object.keys(O).forEach(D=>{a.includes(D)||delete O[D]}),Object.keys(O).length!==Object.keys(f).length&&h(O)},[a,f]),A.useEffect(()=>{const O=u.current;if(!O)return;const D=()=>{const{scrollTop:N,scrollHeight:C,clientHeight:R}=O;N===0?O.scrollTop=1:N+R>=C&&(O.scrollTop=C-R-1)};return O.addEventListener("touchstart",D,{passive:!0}),()=>O.removeEventListener("touchstart",D)},[]);const T=()=>{s([]),h({})},I=Math.abs(g)<.01&&a.length>0,P=a.length>0&&Math.abs(g)>.01;return m.jsxs("div",{className:"space-y-3",children:[a.length>1&&m.jsxs("div",{className:`p-3 rounded-lg ${P?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":I?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),m.jsxs("span",{className:`font-bold text-lg ${P?"text-red-600 dark:text-red-400":I?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",g.toFixed(2)]})]}),P&&m.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:a.length>1?"Split Across Envelopes":"Select Envelope"}),a.length>0&&m.jsx("button",{type:"button",onClick:T,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),m.jsx("div",{ref:u,className:"max-h-72 overflow-y-auto rounded-lg border border-gray-200 dark:border-zinc-800 overscroll-contain",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:b.map(O=>m.jsxs("div",{children:[m.jsx("div",{className:"sticky top-0 z-10 px-3 py-1.5 bg-gray-100 dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700",children:m.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider",children:O.name})}),O.envelopes.map(D=>{const N=a.includes(D.id);return m.jsxs("div",{onClick:()=>x(D.id),className:`flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 transition-colors cursor-pointer active:bg-gray-100 dark:active:bg-zinc-700 ${N?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[m.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center mr-3 transition-colors ${N?"bg-blue-600 border-blue-600":"border-gray-300 dark:border-zinc-600"}`,children:N&&m.jsx(f2,{size:14,className:"text-white",strokeWidth:3})}),m.jsx("span",{className:`flex-1 text-sm ${N?"text-blue-900 dark:text-blue-100 font-medium":"text-gray-900 dark:text-white"}`,children:D.name}),N&&a.length>1&&m.jsxs("div",{className:"flex items-center",onClick:C=>C.stopPropagation(),children:[m.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400 text-sm",children:"$"}),m.jsx("input",{type:"number",min:"0",step:"0.01",value:f[D.id]||"",onChange:C=>w(D.id,parseFloat(C.target.value)||0),className:"w-24 px-2 py-1 text-sm border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},D.id)})]},O.id))})]})},oX=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i,envelopes:a})=>{const{addTransaction:s,updateTransaction:o,deleteTransaction:c,currentMonth:u}=mt(),[f,h]=A.useState(""),[g,v]=A.useState(""),[b,x]=A.useState(""),[w,S]=A.useState(new Date().toISOString().split("T")[0]),[T,I]=A.useState(null),[P,O]=A.useState(null),[D,N]=A.useState({}),C=a?[...a].filter(z=>z.isActive!==!1).sort((z,K)=>{const Y=z.orderIndex??0,G=K.orderIndex??0;return Y!==G?Y-G:z.name.localeCompare(K.name)}):[];A.useEffect(()=>{if(t)if(n==="edit"&&i){if(h(i.amount.toString()),v(i.merchant||""),x(i.description),I(i.paymentMethod||null),a){const z=a.find(K=>K.id===i.envelopeId);O(z||r),N({[i.envelopeId]:i.amount})}try{const z=new Date(i.date);isNaN(z.getTime())?(U.warn("Invalid date in transaction:",i.date),S(new Date().toISOString().split("T")[0])):S(z.toISOString().split("T")[0])}catch(z){U.error("Error parsing transaction date:",z),S(new Date().toISOString().split("T")[0])}}else h(""),v(""),x(""),S(new Date().toISOString().split("T")[0]),O(r),N({})},[t,n,i,r,a]);const R=async z=>{z.preventDefault();const K=parseFloat(f);if(isNaN(K)||K<=0){U.log(" Invalid amount:",f);return}const Y=n==="edit"&&Object.keys(D).length>0;U.log(" Saving transaction:",{mode:n,amount:K,note:b,date:w,splitAmounts:D,paymentMethod:T});try{const G=new Date(w),X=`${G.getFullYear()}-${(G.getMonth()+1).toString().padStart(2,"0")}`;if(X!==u){const J=`This transaction date (${X}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(J))return}n==="add"?(U.log(" Adding income transaction"),await s({amount:K,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(P||r).id,type:"Income",reconciled:!1,paymentMethod:T||void 0})):n==="spend"?(U.log(" Adding expense transaction"),await s({amount:K,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(P||r).id,type:"Expense",reconciled:!1,paymentMethod:T||void 0})):n==="edit"&&i&&(U.log(" Updating transaction"),Y?await o({...i,amount:K,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:Object.keys(D)[0]||i.envelopeId,paymentMethod:T||void 0}):await o({...i,amount:K,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(P||r).id,paymentMethod:T||void 0})),U.log(" Transaction saved successfully"),e()}catch(G){U.error(" Error saving transaction:",G),alert("Failed to save transaction: "+(G instanceof Error?G.message:"Unknown error"))}},M=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},V=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",L=n==="add"?"text-green-500":"text-red-500";return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10 flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),m.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:V}),m.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0||i?.isAutomatic,children:i?.isAutomatic?"":"Save"})]}),m.jsxs("form",{onSubmit:R,className:"p-6 space-y-6 flex-1 overflow-y-auto",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${L}`,children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:z=>{const K=z.target.value.replace(/\D/g,"");if(!K){h("");return}const G=(parseInt(K,10)/100).toFixed(2);h(G)},onKeyDown:z=>{(z.key==="e"||z.key==="E"||z.key==="+"||z.key==="-")&&z.preventDefault()},placeholder:"0.00",autoFocus:!0,disabled:i?.isAutomatic,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${L} placeholder-gray-700 ${i?.isAutomatic?"cursor-not-allowed opacity-80":""}`})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),m.jsx("input",{type:"text",value:g,onChange:z=>v(z.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),!i?.isAutomatic&&m.jsx(aX,{selectedCard:T,onCardSelect:I}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),m.jsx("input",{type:"text",value:b,onChange:z=>x(z.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const z=new Date(w);return`${z.getFullYear()}-${(z.getMonth()+1).toString().padStart(2,"0")}`!==u?m.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[m.jsx(Td,{size:14}),m.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),m.jsx("input",{type:"date",value:w,onChange:z=>{U.log("Date changed to:",z.target.value),S(z.target.value)},required:!0,disabled:i?.isAutomatic,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark] disabled:opacity-80"})]}),n==="edit"&&a&&m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:m.jsx(sX,{envelopes:C,transactionAmount:parseFloat(f)||0,onSplitChange:N,initialSelectedEnvelopeId:i?.envelopeId})}),n==="edit"&&!i?.isAutomatic&&m.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:m.jsxs("button",{type:"button",onClick:M,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[m.jsx(Iq,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})]})})},h_e=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=mt(),[a,s]=A.useState(""),[o,c]=A.useState(""),[u,f]=A.useState(""),[h,g]=A.useState(new Date().toISOString().split("T")[0]),v=r.filter(w=>w.id!==n.id);A.useEffect(()=>{if(!t)return;const w=window.setTimeout(()=>{s(""),c(""),f(""),g(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(w)},[t]);const b=w=>{w.preventDefault();const S=parseFloat(o);isNaN(S)||S<=0||!a||(i(n.id,a,S,u,new Date(h)),e())},x=r.find(w=>w.id===a);return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),m.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),m.jsx("button",{onClick:b,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!o||parseFloat(o)<=0||!a,children:"Transfer"})]}),m.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),m.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),m.jsxs("select",{value:a,onChange:w=>s(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[m.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),v.map(w=>m.jsx("option",{value:w.id,className:"bg-white dark:bg-zinc-900",children:w.name},w.id))]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:w=>{const S=w.target.value.replace(/\D/g,"");if(!S){c("");return}const I=(parseInt(S,10)/100).toFixed(2);c(I)},onKeyDown:w=>{(w.key==="e"||w.key==="E"||w.key==="+"||w.key==="-")&&w.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),m.jsx("input",{type:"text",value:u,onChange:w=>f(w.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),m.jsx("input",{type:"date",value:h,onChange:w=>g(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),x&&o&&parseFloat(o)>0&&m.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",m.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(o).toFixed(2)]})," from"," ",m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:x.name})]})]})]})]})})},p_e=({isOpen:t,onClose:e,onSave:n,existingPiggybank:r})=>{const[i,a]=A.useState(""),[s,o]=A.useState(""),[c,u]=A.useState(""),[f,h]=A.useState("#3B82F6"),[g,v]=A.useState("piggy-bank"),[b,x]=A.useState(!1),[w,S]=A.useState(!1);A.useEffect(()=>{r?(a(r.name),o(r.piggybankConfig?.targetAmount?.toString()||""),u(r.piggybankConfig?.monthlyContribution.toString()||"0"),h(r.piggybankConfig?.color||"#3B82F6"),v(r.piggybankConfig?.icon||"piggy-bank"),x(r.piggybankConfig?.paused||!1)):(a(""),o(""),u(""),h("#3B82F6"),v("piggy-bank"),x(!1))},[r,t]);const T=async P=>{if(P.preventDefault(),!(!i.trim()||!c)){S(!0);try{const O={name:i.trim(),isPiggybank:!0,piggybankConfig:{monthlyContribution:parseFloat(c),color:f,icon:g,paused:b}};s&&parseFloat(s)>0&&(O.piggybankConfig.targetAmount=parseFloat(s)),r&&(O.id=r.id,O.currentBalance=r.currentBalance,O.lastUpdated=new Date().toISOString(),O.isActive=r.isActive,O.orderIndex=r.orderIndex,O.userId=r.userId),await n(O),e()}catch(O){U.error("Error saving piggybank:",O),alert("Failed to save piggybank")}finally{S(!1)}}},I=[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}];return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-800 px-6 py-4 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:m.jsx(cf,{size:20,className:"text-blue-600 dark:text-blue-400"})}),m.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r?"Edit Piggybank":"New Piggybank"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:m.jsx(Gp,{size:24})})]}),m.jsxs("form",{onSubmit:T,className:"p-6 space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"piggybank-name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Piggybank Name *"}),m.jsx("input",{type:"text",id:"piggybank-name",value:i,onChange:P=>a(P.target.value),placeholder:"e.g. Vacation Fund, Emergency Savings",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",id:"monthly-contribution",value:c,onChange:P=>{const O=P.target.value.replace(/\D/g,"");if(!O){u("");return}const N=(parseInt(O,10)/100).toFixed(2);u(N)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",id:"target-amount",value:s,onChange:P=>{const O=P.target.value.replace(/\D/g,"");if(!O){o("");return}const N=(parseInt(O,10)/100).toFixed(2);o(N)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),m.jsx("div",{className:"space-y-2",children:m.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:b,onChange:P=>x(P.target.checked),className:"w-5 h-5 rounded border-gray-300 dark:border-zinc-700 text-blue-600 focus:ring-2 focus:ring-blue-500"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Pause auto-contributions"}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Monthly contributions will be skipped while paused"})]})]})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:I.map(P=>m.jsx("button",{type:"button",onClick:()=>h(P.value),className:`w-full aspect-square rounded-lg transition-all ${f===P.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:P.value},title:P.label},P.value))})]}),m.jsxs("div",{className:"pt-4 flex gap-3",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",disabled:w,children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!i.trim()||!c||w,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&c&&!w?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:w?"Saving...":r?"Update":"Create"})]})]})]})]})})},g_e=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return U.error("Date error:",e),"Error"}},m_e=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},lX=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;U.log(" Transaction payment method:",t.paymentMethod);const i=t.type==="Income",a=t.type==="Expense";let s="text-gray-900 dark:text-white";return i&&(s="text-green-600 dark:text-green-400"),a&&(s="text-red-600 dark:text-red-400"),m.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 active:scale-[0.99] transition-all cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[m.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&m.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&m.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),m.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[m.jsx("span",{children:g_e(t.date)}),e&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),t.paymentMethod&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:t.paymentMethod.color}}),m.jsx("span",{className:"truncate max-w-[80px]",children:t.paymentMethod.name})]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${s}`,children:[a?"-":i?"+":"",m_e(t.amount)]}),n?m.jsx("button",{type:"button",onClick:o=>{o.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?m.jsx(ro,{className:"text-green-500",size:20}):m.jsx(J3,{className:"text-gray-400",size:20})}):m.jsx("span",{children:t.reconciled?m.jsx(ro,{className:"text-green-500",size:20}):m.jsx(J3,{className:"text-gray-400",size:20})})]})]})},Tk=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),v_e=()=>{const{id:t}=Hoe(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:s,updateTransaction:o,deleteTransaction:c,restoreTransaction:u,getEnvelopeBalance:f,currentMonth:h,allocations:g,incomeSources:v,setEnvelopeAllocation:b,updatePiggybankContribution:x,updateEnvelope:w,fetchTransactionsForEnvelope:S}=mt(),{showToast:T}=mu(),I=Gi(),P=Ps(),[O,D]=A.useState(!1),[N,C]=A.useState(!1),[R,M]=A.useState(!1),[V,L]=A.useState(null),[z,K]=A.useState(!1),[Y,G]=A.useState(!1),[X,J]=A.useState(""),ne=A.useRef(null),Q=A.useRef(!1);A.useEffect(()=>{e.length===0&&r()},[]);const $=e.find(te=>te.id===t);A.useEffect(()=>{$?.isPiggybank&&$.id&&S($.id)},[$?.isPiggybank,$?.id,S]);const Z=async te=>{if($)try{const Pe={...$,...te,id:$.id,userId:$.userId,currentBalance:$.currentBalance,lastUpdated:new Date().toISOString(),isActive:$.isActive,orderIndex:$.orderIndex};await w(Pe),T("Piggybank updated successfully","success"),K(!1)}catch(Pe){U.error("Failed to update piggybank:",Pe),T("Failed to update piggybank","error")}},ee=$?.isPiggybank?$.piggybankConfig?.monthlyContribution||0:g[h]?.find(te=>te.envelopeId===t)?.budgetedAmount||0;A.useEffect(()=>{Y&&(J(ee.toString()),setTimeout(()=>{ne.current?.focus(),ne.current?.select()},50))},[Y,ee]);const W=te=>{const Pe=(v[h]||[]).reduce((De,Ye)=>De+Ye.amount,0),be=g[h]||[];let Oe=be.map(De=>$&&De.envelopeId===$.id&&te!==void 0?{...De,budgetedAmount:te}:De).filter(De=>{const Ye=e.find(Ve=>Ve.id===De.envelopeId);return Ye?Ye.isActive!==!1:!1}).reduce((De,Ye)=>De+Ye.budgetedAmount,0);return te!==void 0&&$&&(be.some(Ye=>Ye.envelopeId===$.id)||(Oe+=te)),Pe-Oe},ie=Y?W(parseFloat(X)||0):W(),oe=async()=>{if(!$||Q.current)return;const te=parseFloat(X);if(isNaN(te)||te<0){T("Please enter a valid positive number","error");return}Q.current=!0;try{$.isPiggybank?await x($.id,te):await b($.id,te),G(!1)}catch(Pe){U.error("Failed to save budget:",Pe),T("Failed to update budget","error")}finally{Q.current=!1}};if(!$)return i?m.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:m.jsx("p",{children:"Loading envelope..."})}):m.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:m.jsx("p",{children:"Envelope not found."})});const Se=n.filter(te=>te.envelopeId===$.id).filter(te=>{if(te.description==="Budgeted"||te.description==="Piggybank Contribution")return!1;if($.isPiggybank){if(!$.createdAt)return!0;const Pe=_1($.createdAt).toISOString().split("T")[0];return _1(te.date).toISOString().split("T")[0]>=Pe}return te.month===h||!te.month}).sort((te,Pe)=>new Date(Pe.date).getTime()-new Date(te.date).getTime()),ae=()=>{P.state?.fromGlobalFAB?I("/"):I(-1)},Te=()=>{t&&(a(t),I(-1))},he=te=>{const Pe={...te,reconciled:!te.reconciled};o(Pe)};return m.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-[calc(8rem+env(safe-area-inset-bottom))] max-w-4xl mx-auto",children:[m.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[m.jsx("button",{onClick:()=>{if($.isPiggybank)K(!0);else{const te=prompt("Rename envelope:",$.name);te&&te.trim()&&t&&s(t,te)}},className:"text-blue-600 dark:text-blue-400 font-medium",children:$.isPiggybank?"Edit":"Rename"}),m.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:$.name}),m.jsx("button",{onClick:ae,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),m.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const te=$.isPiggybank?f($.id):f($.id,h);return m.jsx("span",{className:`text-xl font-bold ${te<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:Tk(te)})})()]}),m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-zinc-400",children:$.isPiggybank?"Monthly Contribution":"Budgeted This Month"}),Y?m.jsx("form",{onSubmit:te=>{te.preventDefault(),oe()},className:"flex items-center gap-2",children:m.jsx("input",{ref:ne,type:"number",step:"0.01",value:X,onChange:te=>J(te.target.value),onBlur:oe,className:"w-24 px-2 py-1 text-right font-semibold bg-gray-100 dark:bg-zinc-800 rounded border border-blue-500 focus:outline-none"})}):m.jsx("div",{onClick:()=>G(!0),className:"px-2 py-1 -mr-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 cursor-pointer transition-colors",children:m.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Tk(ee)})})]}),m.jsxs("div",{className:`mt-3 py-1.5 px-3 rounded-md flex justify-between items-center text-xs font-medium transition-colors ${ie<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":ie===0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:[m.jsx("span",{children:"Left to Budget:"}),m.jsx("span",{children:Tk(ie)})]})]})]}),m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>D(!0),children:[m.jsx(pce,{className:"w-5 h-5 mr-3"}),"Add Money"]}),m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>C(!0),children:[m.jsx(fce,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>M(!0),children:[m.jsx(Yle,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),m.jsxs("section",{className:"mt-6",children:[m.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:Se.length===0?m.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):m.jsx(lr,{initial:!1,mode:"popLayout",children:Se.map(te=>m.jsx(bt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(x_,{disabled:te.isAutomatic,onDelete:()=>{if(!te.id)return;const Pe={...te};c(te.id),T("Transaction deleted","neutral",()=>u(Pe))},children:m.jsx(lX,{transaction:te,onReconcile:()=>he(te),onEdit:()=>{te.isAutomatic||L(te)}})})},te.id))})})]}),m.jsx("div",{className:"mt-8",children:m.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{const te=$.isPiggybank?`Are you sure you want to delete "${$.name}"? This will delete the piggybank and all its history.`:`Are you sure you want to remove "${$.name}" from ${h}? This will delete all transactions for this month only.`;confirm(te)&&Te()},children:[m.jsx(Iq,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),m.jsx(oX,{isVisible:O||N||!!V,onClose:()=>{D(!1),C(!1),L(null)},mode:O?"add":N?"spend":"edit",currentEnvelope:$,initialTransaction:V}),m.jsx(h_e,{isVisible:R,onClose:()=>M(!1),sourceEnvelope:$}),m.jsx(p_e,{isOpen:z,onClose:()=>K(!1),onSave:Z,existingPiggybank:$})]})},y_e=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:s,totalAllocated:o,transactionCount:c,totalTransactionAmount:u,isLoading:f=!1})=>{const[h,g]=A.useState("confirm"),v=w=>{const[S,T]=w.split("-");return new Date(parseInt(S),parseInt(T)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},b=()=>{h==="confirm"?g("final_confirm"):h==="final_confirm"&&n()},x=()=>{g("confirm"),e()};return m.jsx(lr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(bt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",v(r)]}),m.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:f,children:""})]}),m.jsx("div",{className:"p-6 space-y-4",children:h==="confirm"?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),m.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:m.jsxs("ul",{className:"space-y-1",children:[m.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),m.jsxs("li",{children:[" ",s," envelope allocation",s!==1?"s":""," (totaling $",o.toFixed(2),")"]}),m.jsxs("li",{children:[" ",c," transaction",c!==1?"s":""," (totaling $",u.toFixed(2),")"]})]})})]})]})}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[m.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data, income sources, allocations, and all transactions."]})})]})})]}):m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:m.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-2",children:"Are you absolutely sure?"}),m.jsxs("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["This action cannot be undone. All budget data and transactions for ",m.jsx("strong",{children:v(r)})," will be permanently removed."]})]})}),m.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:f,children:"Cancel"}),m.jsx("button",{type:"button",onClick:b,disabled:f,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Clearing...":h==="confirm"?"Continue":"Yes, Start Fresh"})]})]})]})})},b_e=({isOpen:t,onClose:e})=>{const[n,r]=A.useState([]),[i,a]=A.useState({level:void 0,source:"",search:""}),[s,o]=A.useState(!1),[c,u]=A.useState(!0);A.useEffect(()=>{if(t)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[t]),A.useEffect(()=>yn.subscribe(T=>{r(T),c&&setTimeout(()=>{const I=document.getElementById("log-container");I&&(I.scrollTop=I.scrollHeight)},100)}),[c]);const f=A.useMemo(()=>yn.getLogs({level:i.level,source:i.source||void 0,search:i.search||void 0}),[n,i]),h=A.useMemo(()=>{const S=new Set;return n.forEach(T=>S.add(T.source)),Array.from(S).sort()},[n]),g=A.useMemo(()=>yn.getStats(),[n]),v=S=>new Date(S).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),b=S=>{switch(S){case Di.DEBUG:return{icon:Jle,color:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-800"};case Di.INFO:return{icon:eL,color:"text-blue-500",bgColor:"bg-blue-100 dark:bg-blue-900"};case Di.WARN:return{icon:Td,color:"text-yellow-500",bgColor:"bg-yellow-100 dark:bg-yellow-900"};case Di.ERROR:return{icon:uce,color:"text-red-500",bgColor:"bg-red-100 dark:bg-red-900"};default:return{icon:eL,color:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-800"}}},x=()=>{yn.downloadLogs({level:i.level,source:i.source||void 0,search:i.search||void 0})},w=()=>{yn.clearLogs()};return t?m.jsx(lr,{children:m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:e,children:m.jsxs(bt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col border border-gray-200 dark:border-zinc-800 overscroll-contain",onClick:S=>S.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Real-time Logs"}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-zinc-400",children:[m.jsx(bce,{className:"w-4 h-4"}),m.jsxs("span",{children:[g.total," entries"]}),m.jsx("span",{children:""}),m.jsxs("span",{children:["Session: ",Math.floor(g.sessionDuration/1e3),"s"]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>u(!c),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${c?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-zinc-800 dark:text-zinc-300"}`,children:"Auto-scroll"}),m.jsx("button",{onClick:x,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",title:"Export logs",children:m.jsx(tp,{className:"w-4 h-4"})}),m.jsx("button",{onClick:w,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",title:"Clear logs",children:m.jsx(kv,{className:"w-4 h-4"})}),m.jsx("button",{onClick:e,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",children:m.jsx(Gp,{className:"w-5 h-5"})})]})]}),m.jsxs("div",{className:"border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("button",{onClick:()=>o(!s),className:"w-full px-4 py-3 flex items-center justify-between text-sm text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Aq,{className:"w-4 h-4"}),m.jsx("span",{children:"Filters"}),(i.level!==void 0||i.source||i.search)&&m.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 rounded-full text-xs",children:"Active"})]}),m.jsx(ace,{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`})]}),m.jsx(lr,{children:s&&m.jsxs(bt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-4 space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Level"}),m.jsxs("select",{value:i.level??"",onChange:S=>a(T=>({...T,level:S.target.value?Number(S.target.value):void 0})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white",children:[m.jsx("option",{value:"",children:"All Levels"}),m.jsx("option",{value:Di.DEBUG,children:"Debug"}),m.jsx("option",{value:Di.INFO,children:"Info"}),m.jsx("option",{value:Di.WARN,children:"Warning"}),m.jsx("option",{value:Di.ERROR,children:"Error"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Source"}),m.jsxs("select",{value:i.source,onChange:S=>a(T=>({...T,source:S.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white",children:[m.jsx("option",{value:"",children:"All Sources"}),h.map(S=>m.jsx("option",{value:S,children:S},S))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Search"}),m.jsxs("div",{className:"relative",children:[m.jsx(kq,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),m.jsx("input",{type:"text",value:i.search,onChange:S=>a(T=>({...T,search:S.target.value})),placeholder:"Search messages...",className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-400"})]})]})]}),m.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600 dark:text-zinc-400",children:[m.jsxs("span",{children:["Debug: ",g.byLevel.DEBUG||0]}),m.jsxs("span",{children:["Info: ",g.byLevel.INFO||0]}),m.jsxs("span",{children:["Warn: ",g.byLevel.WARN||0]}),m.jsxs("span",{children:["Error: ",g.byLevel.ERROR||0]})]})]})})]}),m.jsx("div",{id:"log-container",className:"flex-1 overflow-y-auto p-4 space-y-1 font-mono text-sm overscroll-contain touch-pan-y",style:{maxHeight:"calc(90vh - 280px)"},children:f.length===0?m.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-zinc-400",children:n.length===0?"No logs yet":"No logs match current filters"}):f.map(S=>{const T=b(S.level),I=T.icon;return m.jsxs(bt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`flex items-start gap-3 p-2 rounded-lg ${T.bgColor} hover:opacity-80 transition-opacity`,children:[m.jsx(I,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${T.color}`}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:v(S.timestamp)}),m.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-zinc-400",children:S.source}),S.userId&&m.jsx("div",{className:"w-3 h-3 text-gray-400 flex items-center justify-center",title:`User: ${S.userId}`,children:m.jsx(wue,{className:"w-3 h-3"})})]}),m.jsx("div",{className:"text-gray-900 dark:text-white break-words",children:S.message}),S.data&&m.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-zinc-400 bg-black/5 dark:bg-white/5 p-2 rounded overflow-x-auto",children:m.jsx("pre",{children:JSON.stringify(S.data,null,2)})})]})]},S.id)})})]})})}):null},x_e=()=>{const t=Gi(),e=A.useRef(null),{envelopes:n,transactions:r,categories:i,resetData:a,importData:s,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:f,incomeSources:h,allocations:g,currentMonth:v,clearMonthData:b,handleUserLogout:x,resetOnboarding:w,resetGuidedTutorial:S}=mt(),{deleteAccount:T,currentUser:I,logout:P}=tn(),[O,D]=A.useState(null),[N,C]=A.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[R,M]=A.useState(!1),[V,L]=A.useState(""),[z,K]=A.useState(!1),[Y,G]=A.useState(null),[X,J]=A.useState(!1),[ne,Q]=A.useState(!1),[$,Z]=A.useState(null),ee=()=>{const Le=window.setTimeout(()=>{Q(!0),yn.info("Settings","Log viewer opened via long press")},500);Z(Le)},W=()=>{$&&(clearTimeout($),Z(null))},ue=Le=>{Le.preventDefault();const st=window.setTimeout(()=>{Q(!0),yn.info("Settings","Log viewer opened via long press (mobile)")},500);Z(st)},ie=Le=>{Le.preventDefault(),$&&(clearTimeout($),Z(null))},oe=()=>{Q(!0),yn.info("Settings","Log viewer opened via double click")},Se=978307200,ae=c?.theme??"system",Te=c?.fontSize??"medium";A.useEffect(()=>{c||f().catch(Le=>{yn.error("Settings","Failed to initialize app settings",{error:Le})})},[f,c]);const he=(Le,st)=>{D({type:Le,text:st}),setTimeout(()=>D(null),3500)},te=A.useMemo(()=>{const Le=n.length,st=r.length,ct=v?g[v]||[]:[],xt=Object.values(h).reduce((li,Bn)=>li+Bn.length,0),nn=ct.length,gn=n.reduce((li,Bn)=>{const Kn=Bn.isPiggybank?o(Bn.id):o(Bn.id,v);return li+(typeof Kn=="number"?Kn:0)},0),ur=0,Do=r.reduce((li,Bn)=>{let Kn=0;if(typeof Bn.date=="string"){const Sn=Date.parse(Bn.date);Kn=Number.isNaN(Sn)?0:Sn}else typeof Bn.date=="number"&&(Kn=Bn.date<2e9?(Bn.date+Se)*1e3:Bn.date);return Math.max(li,Kn)},0),Fl=ur||Do?new Date(Math.max(ur,Do)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:Le,transactionCount:st,incomeSourceCount:xt,allocationCount:nn,totalBalance:gn,lastUpdated:Fl}},[n,r,h,g,v]),Pe=()=>{try{yn.info("Settings","Creating backup...");const Le={appVersion:"1.11.3",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:n.map(gn=>({...gn,currentBalance:(()=>{const ur=gn.isPiggybank?o(gn.id):o(gn.id,v);return typeof ur=="number"?ur:0})(),lastUpdated:new Date().toISOString()})),transactions:r,categories:i,allocations:g,incomeSources:h},st=new Blob([JSON.stringify(Le,null,2)],{type:"application/json"}),ct=URL.createObjectURL(st),xt=document.createElement("a");xt.href=ct,xt.download=`budgetBackup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(xt),xt.click(),document.body.removeChild(xt),URL.revokeObjectURL(ct);const nn=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",nn),C(nn),G({success:!0,message:"Backup downloaded successfully."})}catch(Le){yn.error("Settings","Backup creation failed",{error:Le}),G({success:!1,message:"Failed to create backup file.",onRetry:Pe})}},be=()=>{e.current?.click()},ke=Le=>{const st=Le.target.files?.[0];if(!st)return;const ct=new FileReader;ct.onload=async xt=>{try{const nn=JSON.parse(xt.target?.result),gn=await s(nn);if(!gn.success){he("error",gn.message);return}if(nn.appSettings?.theme)try{await u({theme:nn.appSettings.theme})}catch(ur){yn.error("Settings","Failed to update imported settings",{error:ur})}he("success",`Loaded ${nn.envelopes?.length??0} envelopes, ${nn.transactions?.length??0} transactions.`)}catch(nn){yn.error("Settings","Import failed",{error:nn}),he("error","Invalid backup file. Please verify the JSON.")}},ct.readAsText(st),Le.target.value=""},Oe=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await a(),he("success","All data has been permanently deleted."),t("/")}catch(Le){yn.error("Settings","Reset failed",{error:Le}),he("error","Failed to delete all data. Some data may remain.")}},De=async()=>{if(!V.trim()){he("error","Please enter your password to confirm account deletion.");return}M(!0);try{await a(),await T(V)?he("success","Your account has been permanently deleted."):he("error","Failed to delete account. Please try again.")}catch(Le){yn.error("Settings","Account deletion failed",{error:Le}),he("error","Failed to delete account. Please try again.")}finally{M(!1),K(!1),L("")}},Ye=()=>{J(!0)},Ve=async()=>{J(!1),await b(v),he("success","Month data has been reset.")},it=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{x(),P(),t("/")}catch(Le){yn.error("Settings","Logout failed",{error:Le})}},Ft=I?.displayName?.charAt(0)?.toUpperCase()||I?.email?.charAt(0)?.toUpperCase()||"U";return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[m.jsx("button",{onClick:()=>t(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),m.jsxs("div",{className:"p-4 space-y-6 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[O&&m.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${O.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[O.type==="success"?m.jsx(jw,{size:18}):m.jsx(kv,{size:18}),O.text]}),m.jsx("section",{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 flex items-center gap-4",children:[m.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-semibold shadow-md",children:Ft}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:I?.displayName||I?.email?.split("@")[0]||"User"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate",children:I?.email}),m.jsxs("button",{onClick:it,className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium flex items-center gap-1 hover:underline",children:[m.jsx(Fce,{size:14})," Log Out"]})]})]})}),m.jsx("section",{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(tp,{className:"text-blue-500",size:22}),m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.envelopeCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.transactionCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.incomeSourceCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.allocationCount})]})]})]})}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Categories"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:m.jsxs("button",{onClick:()=>t("/settings/categories"),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-xl",children:""}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Manage Categories"})]}),m.jsx(Jo,{className:"text-gray-400",size:18})]})})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[ae==="light"&&m.jsx("span",{className:"text-orange-500 text-lg",children:""}),ae==="dark"&&m.jsx("span",{className:"text-purple-500 text-lg",children:""}),ae==="system"&&m.jsx("span",{className:"text-gray-500 text-lg",children:""}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:ae})]}),m.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(Le=>m.jsx("button",{onClick:async()=>{try{await u({theme:Le.value})}catch(st){yn.error("Settings","Failed to update theme setting",{error:st})}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${ae===Le.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:Le.label},Le.value))})]}),m.jsx("div",{className:"h-px bg-gray-100 dark:bg-zinc-800"}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-gray-500 text-lg",children:"Aa"}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Font Size"})]}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:Te})]}),m.jsx("div",{className:"flex gap-2",children:[{label:"A",value:"extra-small",sizeClass:"text-[10px]"},{label:"A",value:"small",sizeClass:"text-xs"},{label:"A",value:"medium",sizeClass:"text-base"},{label:"A",value:"large",sizeClass:"text-xl"},{label:"A",value:"extra-large",sizeClass:"text-2xl"}].map(Le=>m.jsx("button",{onClick:async()=>{try{await u({fontSize:Le.value})}catch(st){yn.error("Settings","Failed to update font size setting",{error:st})}},className:`flex-1 py-2 rounded-lg font-medium border transition-colors flex items-center justify-center ${Te===Le.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:m.jsx("span",{className:Le.sizeClass,children:Le.label})},Le.value))})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Help & Guide"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[m.jsxs("button",{onClick:()=>{w(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Av,{className:"text-purple-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Onboarding Guide"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"View the welcome tutorial again"})]})]}),m.jsx(Jo,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>{S(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Av,{className:"text-blue-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Guided Tutorial"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Walk through the hands-on setup again"})]})]}),m.jsx(Jo,{className:"text-gray-400",size:18})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Data Management"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[m.jsxs("button",{onClick:Pe,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(tp,{className:"text-blue-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),m.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",N]})]})]}),m.jsx(Jo,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:be,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(vue,{className:"text-blue-500",size:20}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),m.jsx(Jo,{className:"text-gray-400",size:18})]}),m.jsx("input",{type:"file",ref:e,onChange:ke,accept:".json",className:"hidden"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[m.jsxs("button",{onClick:Ye,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(rp,{className:"text-orange-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Start Fresh (This Month)"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Clear all allocations and data for the current month only"})]})]}),m.jsx(Jo,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Oe,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(kv,{className:"text-red-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete everything"})]})]}),m.jsx(Jo,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>K(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Td,{className:"text-red-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),m.jsx(Jo,{className:"text-gray-400",size:18})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider px-4 mb-2",children:"Siri Integration"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-200 dark:border-zinc-800",children:m.jsxs("div",{className:"p-4",children:[m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-3",children:"Use this token in your Siri Shortcut to add transactions by voice."}),c?.siriToken?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("code",{className:"flex-1 bg-gray-100 dark:bg-zinc-800 px-3 py-2 rounded-lg text-sm font-mono text-gray-900 dark:text-white select-all",children:c.siriToken}),m.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c.siriToken),he("success","Token copied to clipboard")},className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",title:"Copy token",children:m.jsx("div",{className:"flex items-center gap-1",children:m.jsx("span",{className:"text-sm font-medium",children:"Copy"})})}),m.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to regenerate your Siri token? You will need to update your Shortcut.")){const Le=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:Le}),he("success","Siri token regenerated")}},className:"p-2 bg-gray-200 dark:bg-zinc-700 text-gray-700 dark:text-zinc-300 rounded-lg hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",title:"Regenerate token",children:m.jsx(rp,{size:20})})]}):m.jsx("button",{onClick:async()=>{const Le=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:Le}),he("success","Siri token generated")},className:"w-full py-2 px-4 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors",children:"Generate Siri Token"})]})})]}),m.jsx("div",{className:"text-center py-4",children:m.jsxs("p",{className:"text-xs text-gray-400 dark:text-zinc-500 cursor-pointer select-none hover:text-gray-300 dark:hover:text-zinc-400 transition-colors",onMouseDown:ee,onMouseUp:W,onMouseLeave:W,onTouchStart:ue,onTouchEnd:ie,onTouchCancel:ie,onDoubleClick:oe,title:"Long press or double-click to view logs",children:["Version ","1.11.3"," (PWA)"]})}),Y&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Y.success?m.jsx(jw,{className:"text-green-500",size:24}):m.jsx(Td,{className:"text-red-500",size:24}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Y.success?"Success":"Error"})]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:Y.message}),m.jsxs("div",{className:"flex gap-2",children:[Y.onRetry&&m.jsx("button",{onClick:()=>{G(null),Y.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),m.jsx("button",{onClick:()=>G(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),m.jsx(y_e,{isVisible:X,onClose:()=>J(!1),onConfirm:Ve,currentMonth:v,incomeCount:(h[v]||[]).length,totalIncome:(h[v]||[]).reduce((Le,st)=>Le+st.amount,0),allocationCount:(g[v]||[]).filter(Le=>n.some(st=>st.id===Le.envelopeId)).length,totalAllocated:(g[v]||[]).filter(Le=>n.some(st=>st.id===Le.envelopeId)).reduce((Le,st)=>Le+st.budgetedAmount,0),transactionCount:r.filter(Le=>Le.month===v).length,totalTransactionAmount:r.filter(Le=>Le.month===v).reduce((Le,st)=>Le+st.amount,0)}),z&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx(Td,{className:"text-red-500",size:24}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),m.jsx("input",{type:"password",value:V,onChange:Le=>L(Le.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>{K(!1),L("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),m.jsx("button",{onClick:De,disabled:R||!V.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Deleting...":"Delete Account"})]})]})}),m.jsx(b_e,{isOpen:ne,onClose:()=>Q(!1)})]})]})},w_e=({category:t,isBeingDragged:e,isEditing:n,editName:r,setEditName:i,handleUpdate:a,setEditingId:s,handleDelete:o,handleLongPressTrigger:c,setMoveableRef:u})=>{const f=zD(h=>{c(h,t.id)},{threshold:500,cancelOnMovement:25,detect:Fc.Touch});return m.jsx("div",{...f(),ref:u(t.id),style:{cursor:e?"grabbing":"pointer"},className:"bg-white dark:bg-zinc-900 rounded-xl p-4 border border-gray-100 dark:border-zinc-800 flex items-center justify-between group select-none",children:n?m.jsxs("div",{className:"flex-1 flex gap-2",children:[m.jsx("input",{type:"text",value:r,onChange:h=>i(h.target.value),className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),m.jsx("button",{onClick:()=>a(t.id),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm",children:"Save"}),m.jsx("button",{onClick:()=>s(null),className:"text-gray-500 px-2 text-sm",children:"Cancel"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"text-gray-400 dark:text-zinc-600 cursor-grab active:cursor-grabbing",onMouseDown:h=>c(h,t.id),children:m.jsx(np,{size:20})}),m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.name})]}),m.jsxs("div",{className:"flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{onClick:()=>{s(t.id),i(t.name)},className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400",children:m.jsx(Kce,{size:18})}),m.jsx("button",{onClick:()=>o(t.id),className:"p-2 text-gray-500 hover:text-red-600 dark:hover:text-red-400",children:m.jsx(kv,{size:18})})]})]})})},S_e=()=>{const t=Gi(),{categories:e,addCategory:n,updateCategory:r,deleteCategory:i,reorderCategories:a}=mt(),{showToast:s}=mu(),[o,c]=A.useState(!1),[u,f]=A.useState(""),[h,g]=A.useState(null),[v,b]=A.useState(""),[x,w]=A.useState(e),S=A.useRef(e),[T,I]=A.useState(!1),[P,O]=A.useState(null),D=A.useRef(!1),N=A.useRef(null),C=A.useRef({}),R=A.useRef({}),M=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{T||(w(e),S.current=e)},[e,T]),A.useEffect(()=>(T?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[T]);const V=A.useCallback((ne,Q)=>{U.log(" Long press triggered for category:",Q);const $=R.current[Q];if($){U.log(" Moveable instance found, starting drag"),D.current=!0;const Z=ne.nativeEvent||ne;$.dragStart(Z)}else U.log(" No moveable instance found for:",Q)},[]),L=A.useCallback(ne=>Q=>{Q?C.current[ne]=Q:delete C.current[ne]},[]),z=async ne=>{if(ne.preventDefault(),!!u.trim())try{await n({name:u.trim(),orderIndex:e.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),f(""),c(!1),s("Category added","success")}catch(Q){U.error(Q),s("Failed to add category","error")}},K=async ne=>{if(!v.trim())return;const Q=e.find($=>$.id===ne);if(Q)try{await r({...Q,name:v.trim()}),g(null),s("Category updated","success")}catch($){U.error($),s("Failed to update category","error")}},Y=async ne=>{if(e.length<=1){s("Cannot delete the last category","error");return}if(confirm('Are you sure? Envelopes in this category will be moved to "Uncategorized".'))try{await i(ne),s("Category deleted","success")}catch(Q){U.error(Q),s("Failed to delete category","error")}},G=8,X=(ne,Q,$)=>Math.max(Q,Math.min($,ne)),J=A.useCallback(async ne=>{if(!ne.length)return;const Q=ne.map($=>$.id);try{await a(Q)}catch($){U.error("Failed to persist category order:",$),s("Failed to save category order","error")}},[a,s]);return A.useEffect(()=>{const ne=()=>{Object.values(R.current).forEach(Z=>Z?.destroy()),R.current={}};if(!x.length)return;const Q=()=>{x.forEach(Z=>{const ee=C.current[Z.id];if(!ee||!N.current)return;const W=new JY(N.current,{target:ee,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[],edge:!1,origin:!1});W.on("dragStart",ie=>{if(U.log(" Moveable dragStart event",{isManualDrag:D.current,categoryId:Z.id}),!D.current){U.log(" Stopping drag - not manual"),ie.stop();return}const oe=ie.inputEvent.target;if(oe.tagName==="INPUT"||oe.tagName==="BUTTON"||oe.closest("button")){U.log(" Stopping drag - clicked on button/input"),ie.stop();return}U.log(" Drag starting for category:",Z.id);const Se=S.current.findIndex(he=>he.id===Z.id),ae=ie.target,Te=ae.getBoundingClientRect();O(Z.id),M.current={activeId:Z.id,startIndex:Se,currentIndex:Se,itemHeight:Te.height+G},ae.style.transition="none",ae.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",ae.style.zIndex="20",I(!0)});let ue=null;W.on("drag",ie=>{const oe=ie.target;ue!==null&&cancelAnimationFrame(ue),ue=requestAnimationFrame(()=>{const Se=M.current;if(Se.activeId!==Z.id)return;const ae=ie.beforeTranslate[1];oe.style.transform=`translateY(${ae}px)`,oe.style.transition="none";const{itemHeight:Te,startIndex:he}=Se,te=Math.round(ae/Te),Pe=X(he+te,0,S.current.length-1);Pe!==Se.currentIndex&&(Se.currentIndex=Pe,S.current.forEach((be,ke)=>{if(be.id===Z.id)return;const Oe=C.current[be.id];if(!Oe)return;let De=0;he<Pe&&ke>he&&ke<=Pe?De=-Te:he>Pe&&ke>=Pe&&ke<he&&(De=Te),Oe.style.transform=De?`translateY(${De}px)`:"",Oe.style.transition="transform 0.2s ease"})),ue=null})}),W.on("dragEnd",ie=>{ue!==null&&(cancelAnimationFrame(ue),ue=null);const oe=ie.target,{startIndex:Se,currentIndex:ae}=M.current;if(oe.style.transform="",oe.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",oe.style.boxShadow="",S.current.forEach(Te=>{const he=C.current[Te.id];he&&(he.style.transform="",he.style.transition="")}),Se!==ae){const Te=[...S.current],[he]=Te.splice(Se,1);Te.splice(ae,0,he),S.current=Te,w(Te),J(Te)}setTimeout(()=>{oe.style.zIndex="",O(null),I(!1),D.current=!1},300)}),R.current[Z.id]=W})},$=window.setTimeout(Q,80);return()=>{clearTimeout($),ne()}},[x,J]),m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[m.jsx("style",{children:`
        .moveable-control-box,
        .moveable-line,
        .moveable-direction {
          display: none !important;
        }
      `}),m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[m.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:m.jsx($a,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Manage Categories"})]}),m.jsxs("div",{className:"p-4 max-w-2xl mx-auto space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:o?m.jsxs("form",{onSubmit:z,className:"flex gap-2",children:[m.jsx("input",{type:"text",value:u,onChange:ne=>f(ne.target.value),placeholder:"Category Name",className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),m.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium",children:"Save"}),m.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-500 px-2",children:"Cancel"})]}):m.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 font-medium py-2",children:[m.jsx(uf,{size:20}),"Add Category"]})}),m.jsxs("div",{ref:N,className:"space-y-2",style:{touchAction:T?"none":"auto"},children:[x.map(ne=>m.jsx(w_e,{category:ne,isBeingDragged:P===ne.id,isEditing:h===ne.id,editName:v,setEditName:b,handleUpdate:K,setEditingId:g,handleDelete:Y,handleLongPressTrigger:V,setMoveableRef:L},ne.id)),x.length===0&&!o&&m.jsx("div",{className:"text-center text-gray-500 dark:text-zinc-500 py-8",children:"No categories yet. Add one to get started."})]})]})]})},__e=()=>{const{addEnvelope:t,setEnvelopeAllocation:e,currentMonth:n,categories:r,fetchCategories:i}=mt(),{showToast:a}=mu(),s=Gi(),[o]=xq();nl.useEffect(()=>{r.length===0&&i()},[r.length,i]);const[c,u]=A.useState(""),[f,h]=A.useState(o.get("type")==="piggybank"),[g,v]=A.useState(o.get("categoryId")||"");nl.useEffect(()=>{if(!o.get("categoryId")&&r.length>0&&!g){const N=r.find(C=>C.isDefault);N&&v(N.id)}},[r,o,g]);const[b,x]=A.useState(""),[w,S]=A.useState(""),[T,I]=A.useState("#3B82F6"),[P,O]=A.useState(!1),D=async N=>{if(N.preventDefault(),!c.trim()||P)return;O(!0);const C=mt.getState().envelopes,M=(C.length>0?Math.max(...C.map(K=>K.orderIndex??0)):-1)+1,V=f?new Date(`${n}-01T00:00:00`):new Date,L={name:c,currentBalance:0,lastUpdated:new Date().toISOString(),createdAt:V.toISOString(),isActive:!0,orderIndex:M,categoryId:g||void 0};if(f){L.isPiggybank=!0;const K={monthlyContribution:parseFloat(w||"0"),color:T,icon:"piggy-bank"};b&&parseFloat(b)>0&&(K.targetAmount=parseFloat(b)),L.piggybankConfig=K}t(L).then(K=>{if(K){const Y=f?parseFloat(w||"0"):0;e(K,Y).catch(G=>U.error("Failed to create allocation:",G)),setTimeout(()=>{s("/")},50)}}).catch(K=>{U.error("Failed to create envelope:",K),a(K.message||"Failed to create envelope","error"),O(!1)})};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[m.jsx("button",{onClick:()=>s("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:m.jsx($a,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f?"New Piggybank":"New Envelope"})]}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[m.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:m.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:f?m.jsx(cf,{size:40}):m.jsx(Pce,{size:40})})}),m.jsxs("form",{onSubmit:D,className:"p-6 space-y-6 pb-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Type"}),m.jsxs("div",{className:"flex bg-gray-100 dark:bg-zinc-800 p-1 rounded-xl",children:[m.jsx("button",{type:"button",onClick:()=>h(!1),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300":"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm"}`,children:"Spending"}),m.jsx("button",{type:"button",onClick:()=>h(!0),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300"}`,children:"Piggybank"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Category"}),m.jsx("select",{id:"category",value:g,onChange:N=>v(N.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all appearance-none",children:r.map(N=>m.jsx("option",{value:N.id,children:N.name},N.id))})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:f?"Piggybank Name":"Envelope Name"}),m.jsx("input",{type:"text",id:"name",value:c,onChange:N=>u(N.target.value),placeholder:f?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),f&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"number",id:"monthly-contribution",value:w,onChange:N=>S(N.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:f})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"number",id:"target-amount",value:b,onChange:N=>x(N.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(N=>m.jsx("button",{type:"button",onClick:()=>I(N.value),className:`w-full aspect-square rounded-lg transition-all ${T===N.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:N.value},title:N.label},N.value))})]})]}),m.jsxs("div",{className:"pt-4 flex gap-3",children:[m.jsx("button",{type:"button",onClick:()=>s("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!c.trim()||f&&!w||P,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${c.trim()&&(!f||w)&&!P?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:P?"Creating...":f?"Create Piggybank":"Create Envelope"})]})]})]})})]})};const E_e="type.googleapis.com/google.protobuf.Int64Value",T_e="type.googleapis.com/google.protobuf.UInt64Value";function cX(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function E1(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>E1(e));if(typeof t=="function"||typeof t=="object")return cX(t,e=>E1(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Np(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case E_e:case T_e:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Np(e)):typeof t=="function"||typeof t=="object"?cX(t,e=>Np(e)):t}const LD="functions";const ZB={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Li extends Co{constructor(e,n,r){super(`${LD}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Li.prototype)}}function A_e(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function T1(t,e){let n=A_e(t),r=n,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!ZB[s])return new Li("internal","internal");n=ZB[s],r=s}const o=a.message;typeof o=="string"&&(r=o),i=a.details,i!==void 0&&(i=Np(i))}}catch{}return n==="ok"?null:new Li(n,r,i)}class k_e{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,oa(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}const UN="us-central1",C_e=/^data: (.*?)(?:\n|$)/;function I_e(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Li("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class N_e{constructor(e,n,r,i,a=UN,s=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new k_e(e,n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=UN}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function P_e(t,e,n){const r=cu(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(WP(t.emulatorOrigin+"/backends"),c8("Functions",!0))}function O_e(t,e,n){const r=i=>R_e(t,e,i,{});return r.stream=(i,a)=>j_e(t,e,i,a),r}function uX(t){return t.emulatorOrigin&&cu(t.emulatorOrigin)?"include":void 0}async function D_e(t,e,n,r,i){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:uX(i)})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function dX(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function R_e(t,e,n,r){const i=t._url(e);return M_e(t,i,n,r)}async function M_e(t,e,n,r){n=E1(n);const i={data:n},a=await dX(t,r),s=r.timeout||7e4,o=I_e(s),c=await Promise.race([D_e(e,i,a,t.fetchImpl,t),o.promise,t.cancelAllRequests]);if(o.cancel(),!c)throw new Li("cancelled","Firebase Functions instance was deleted.");const u=T1(c.status,c.json);if(u)throw u;if(!c.json)throw new Li("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new Li("internal","Response is missing data field.");return{data:Np(f)}}function j_e(t,e,n,r){const i=t._url(e);return z_e(t,i,n,r||{})}async function z_e(t,e,n,r){n=E1(n);const i={data:n},a=await dX(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let s;try{s=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r?.signal,credentials:uX(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const b=new Li("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const v=T1(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let o,c;const u=new Promise((g,v)=>{o=g,c=v});r?.signal?.addEventListener("abort",()=>{const g=new Li("cancelled","Request was cancelled.");c(g)});const f=s.body.getReader(),h=L_e(f,o,c,r?.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:v,done:b}=await g.read();return{value:v,done:b}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:u}}function L_e(t,e,n,r){const i=(s,o)=>{const c=s.match(C_e);if(!c)return;const u=c[1];try{const f=JSON.parse(u);if("result"in f){e(Np(f.result));return}if("message"in f){o.enqueue(Np(f.message));return}if("error"in f){const h=T1(0,f);o.error(h),n(h);return}}catch(f){if(f instanceof Li){o.error(f),n(f);return}}},a=new TextDecoder;return new ReadableStream({start(s){let o="";return c();async function c(){if(r?.aborted){const u=new Li("cancelled","Request was cancelled");return s.error(u),n(u),Promise.resolve()}try{const{value:u,done:f}=await t.read();if(f){o.trim()&&i(o.trim(),s),s.close();return}if(r?.aborted){const g=new Li("cancelled","Request was cancelled");s.error(g),n(g),await t.cancel();return}o+=a.decode(u,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const g of h)g.trim()&&i(g.trim(),s);return c()}catch(u){const f=u instanceof Li?u:T1(0,null);s.error(f),n(f)}}},cancel(){return t.cancel()}})}const JB="@firebase/functions",e6="0.13.1";const V_e="auth-internal",B_e="app-check-internal",F_e="messaging-internal";function $_e(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(V_e),s=n.getProvider(F_e),o=n.getProvider(B_e);return new N_e(i,a,s,o,r)};vl(new xo(LD,e,"PUBLIC").setMultipleInstances(!0)),ys(JB,e6,t),ys(JB,e6,"esm2020")}function U_e(t=XP(),e=UN){const r=$p(Lt(t),LD).getImmediate({identifier:e}),i=dre("functions");return i&&q_e(r,...i),r}function q_e(t,e,n){P_e(Lt(t),e,n)}function G_e(t,e,n){return O_e(Lt(t),e)}$_e();function fX(t,e){const n={amount:null,merchant:null,envelope:null,envelopeId:null,description:null,paymentMethodName:null,type:"Expense",confidence:0};if(!t||t.trim().length===0)return n;const r=t.trim();let i=r,a=0;const s=r.match(/\b(?:with|using)\s+(.+)$/i);if(s&&s[1]){const v=s[1].trim();v.length>0&&v.length<60&&(n.paymentMethodName=v,i=i.replace(s[0]," ").trim(),a++)}/\b(income|earned|received|got paid|paycheck|salary|deposit|refund)\b/i.test(r)&&(n.type="Income",a++);const c=[/\$\s?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/,/(\d{1,}(?:,\d{3})*\.\d{1,2})\s*(?:dollars?)?/,/\b(\d{1,}(?:,\d{3})*)\s*(?:dollars?|bucks?)\b/i,/(?:for|of|spent|paid|cost|was)\s+\$?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/i];for(const v of c){const b=r.match(v);if(b){const x=b[1].replace(/,/g,""),w=parseFloat(x);if(!isNaN(w)&&w>0){n.amount=w,i=i.replace(b[0]," ").trim(),a++;break}}}if(n.amount===null){const v=r.match(/\b(\d{1,}(?:\.\d{1,2})?)\b/);if(v){const b=parseFloat(v[1]);!isNaN(b)&&b>0&&b<1e6&&(n.amount=b,i=i.replace(v[0]," ").trim(),a++)}}const u=e.filter(v=>v.isActive!==!1);let f=null;for(const v of u){const b=v.name.toLowerCase(),x=r.toLowerCase();if(x.includes(b)){const T=b.length/x.length;(!f||T>f.score)&&(f={envelope:v,score:Math.max(T,.8)});continue}const w=x.split(/\s+/),S=b.split(/\s+/);for(const T of S)if(!(T.length<3)){for(const I of w)if(!(I.length<3)&&(I.startsWith(T.slice(0,-1))||T.startsWith(I.slice(0,-1)))){const P=Math.min(I.length,T.length)/Math.max(I.length,T.length);P>=.6&&(!f||P>f.score)&&(f={envelope:v,score:P})}}}if(f){n.envelope=f.envelope.name,n.envelopeId=f.envelope.id,a++;const v=new RegExp(f.envelope.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");i=i.replace(v," ").trim()}const h=/\b(at|for|from|to|the|a|an|on|in|my|spent|paid|bought|got|transaction|purchase|payment|income|earned|received)\b/gi;let g=i.replace(h," ").replace(/\s+/g," ").trim();return g=g.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9]+$/g,"").trim(),g.length>0&&g.length<100&&(n.merchant=g,a++),n.description=r,n.confidence=0,n.amount!==null&&(n.confidence+=.35),n.envelopeId!==null&&(n.confidence+=.3),n.merchant!==null&&(n.confidence+=.2),n.paymentMethodName!==null&&(n.confidence+=.1),a>0&&(n.confidence+=.05),n.confidence=Math.min(n.confidence,1),n}async function H_e(t,e){const n=e.filter(i=>i.isActive!==!1),r=n.map(i=>i.name);try{const a=J8().currentUser;U.log(" Siri: AI parsing request starting...",{user:a?a.email:"NOT_LOGGED_IN",isEmailVerified:a?.emailVerified}),U.log(" Siri: Calling Cloud Function to parse:",t);const s=U_e(),u=(await G_e(s,"parseTransaction")({text:t,userEnvelopes:r})).data;U.log(" Siri: Cloud Function response:",u);let f=null,h=u.envelope;if(u.envelope){const g=n.find(v=>v.name.toLowerCase()===u.envelope.toLowerCase());g&&(f=g.id,h=g.name)}return{amount:u.amount,merchant:u.merchant,envelope:h,envelopeId:f,description:u.description||t,paymentMethodName:u.paymentMethodName||null,type:u.type||"Expense",confidence:.9}}catch(i){return U.warn(" Siri: Cloud Function failed, falling back to regex parser:",i.message),fX(t,e)}}function K_e(t,e){return U.log(" Siri: Parsing locally with regex:",t),fX(t,e)}function W_e(t){const e=[/ignore\s+previous\s+instructions/gi,/system\s*:/gi,/human\s*:/gi,/assistant\s*:/gi,/\[INST\]/gi,/\[/g,/\]/g,/\{/g,/\}/g];let n=t;return e.forEach(r=>{n=n.replace(r,"")}),n.length>500&&(n=n.substring(0,500)),n=n.trim(),n}async function qN(t,e){const n=W_e(t);return U.log(" Siri: parseSiriQuery called with text:",n),typeof navigator<"u"&&!navigator.onLine?(U.log(" Siri: Offline  using local parser"),K_e(n,e)):(U.log(" Siri: Online  attempting AI parsing"),H_e(n,e))}function Y_e(){const[t,e]=xq(),{envelopes:n}=mt(),[r,i]=A.useState(null),[a,s]=A.useState(!1),[o,c]=A.useState(null);A.useEffect(()=>{const f=t.get("query");if(U.log(" Siri: Hook checking URL params - query:",f),!f||f.trim().length===0){U.log(" Siri: No query parameter found"),c(null);return}U.log(" Siri: Found query parameter, parsing:",f),c(f),s(!0),qN(f,n).then(g=>{U.log(" Siri: Parsed result:",g),i(g)}).catch(g=>{U.error(" Siri: Parse failed:",g),i(null)}).finally(()=>{s(!1)});const h=new URLSearchParams(t);h.delete("query"),e(h,{replace:!0})},[t,n,qN]);const u=A.useCallback(()=>{i(null),c(null)},[]);return{parsedData:r,isParsing:a,siriQuery:o,clearParsedData:u}}const hX=({onClose:t,onSaved:e})=>{const n=Gi(),{envelopes:r,addTransaction:i,currentMonth:a,appSettings:s}=mt(),{parsedData:o,isParsing:c,siriQuery:u,clearParsedData:f}=Y_e(),h=()=>{const oe=sessionStorage.getItem("siriParsedData"),Se=sessionStorage.getItem("siriQuery");if(oe&&Se)try{const ae=JSON.parse(oe);if(U.log(" Siri: Loaded stored data from sessionStorage:",ae),ae.amount!==null&&v(ae.amount.toFixed(2)),ae.merchant&&x(ae.merchant),ae.description&&S(ae.description),ae.type&&R(ae.type==="Income"?"income":"expense"),ae.envelopeId&&X(ae.envelopeId),ae.paymentMethodName&&s?.paymentSources?.length){const Te=ae.paymentMethodName.toLowerCase(),he=s.paymentSources.find(te=>{const Pe=te.name.toLowerCase();return Pe===Te||Pe.includes(Te)||Te.includes(Pe)});he&&(z(he),Y(!1))}I(!0),O(Se),U.log(" Siri: Pre-filled form from sessionStorage"),sessionStorage.removeItem("siriParsedData"),sessionStorage.removeItem("siriQuery")}catch(ae){U.error(" Siri: Failed to parse stored data:",ae)}};A.useEffect(()=>{!o&&!u&&h()},[o,u,s?.paymentSources]),A.useEffect(()=>{const oe=()=>{U.log(" Siri: Received siri-query-ready event"),h()};return window.addEventListener("siri-query-ready",oe),()=>window.removeEventListener("siri-query-ready",oe)},[s?.paymentSources]);const[g,v]=A.useState(""),[b,x]=A.useState(""),[w,S]=A.useState(""),[T,I]=A.useState(!1),[P,O]=A.useState(null),[D,N]=A.useState(()=>{const oe=new Date;return new Date(oe.getTime()-oe.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[C,R]=A.useState("expense"),[M,V]=A.useState({}),[L,z]=A.useState(null),[K,Y]=A.useState(!1),[G,X]=A.useState(null);A.useEffect(()=>{if(!(!o||T)){if(o.amount!==null&&v(o.amount.toFixed(2)),o.merchant&&x(o.merchant),o.description&&S(o.description),o.type&&R(o.type==="Income"?"income":"expense"),o.envelopeId&&X(o.envelopeId),o.paymentMethodName&&s?.paymentSources?.length){const oe=o.paymentMethodName.toLowerCase(),Se=s.paymentSources.find(ae=>{const Te=ae.name.toLowerCase();return Te===oe||Te.includes(oe)||oe.includes(Te)});Se&&(z(Se),Y(!1))}I(!0),U.log(" Siri: Pre-filled form with parsed data:",o)}},[o,T,s?.paymentSources]);const J=()=>{if(t){t();return}n("/")},ne=oe=>{z(oe),L&&Y(!0)},Q=Object.keys(M).length>0,$=Object.values(M).reduce((oe,Se)=>oe+(Se||0),0),Z=Math.abs($-parseFloat(g||"0"))<.01,ee=g&&parseFloat(g)>0&&Q&&Z,W=async oe=>{if(oe.preventDefault(),!ee)return;const[Se,ae,Te]=D.split("-").map(Number),he=new Date(Se,ae-1,Te,12,0,0);U.log(" Selected date:",D),U.log(" Parsed date:",he.toISOString());try{const[te,Pe]=D.split("-").map(Number),be=`${te}-${Pe.toString().padStart(2,"0")}`;if(be!==a){const De=`This transaction date (${be}) does not match the current budget month (${a}). Are you sure you want to save it?`;if(!window.confirm(De))return}const ke=Object.entries(M).filter(([De,Ye])=>Ye>0),Oe=ke.length>1?crypto.randomUUID():void 0;Promise.all(ke.map(([De,Ye])=>i({amount:Ye,description:w,merchant:b||void 0,date:he.toISOString(),envelopeId:De,type:C==="income"?"Income":"Expense",reconciled:!1,paymentMethod:L||void 0,splitGroupId:Oe}).catch(Ve=>U.error("Failed to create transaction:",Ve)))).catch(De=>U.error("Failed to create transactions:",De)),e&&e(),t?t():n("/")}catch(te){U.error("Error saving transaction:",te),alert("Failed to save transaction: "+(te instanceof Error?te.message:"Unknown error"))}},ue=[...r].filter(oe=>oe.isActive!==!1).sort((oe,Se)=>{const ae=oe.orderIndex??0,Te=Se.orderIndex??0;return ae!==Te?ae-Te:oe.name.localeCompare(Se.name)}),ie=C==="income"?"text-green-500":"text-red-500";return m.jsxs("div",{className:"h-screen overflow-y-auto bg-gray-50 dark:bg-black overscroll-contain",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-20 flex items-center justify-between",children:[m.jsx("button",{onClick:J,className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),m.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),m.jsx("button",{onClick:W,disabled:!ee,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),c&&m.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl flex items-center gap-3",children:[m.jsx(nL,{size:18,className:"text-purple-500 animate-pulse"}),m.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Parsing voice input..."})]}),T&&!c&&(u||P)&&m.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx(nL,{size:14,className:"text-purple-500"}),m.jsx("span",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300",children:"Siri Shortcut"}),o&&m.jsxs("span",{className:"ml-auto text-[10px] text-purple-500 dark:text-purple-400",children:[Math.round(o.confidence*100),"% confidence"]})]}),m.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 italic truncate",children:['"',u||P,'"']}),m.jsx("button",{type:"button",onClick:()=>{f(),I(!1),O(null)},className:"text-[10px] text-purple-500 dark:text-purple-400 underline mt-1",children:"Clear pre-filled data"})]}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:m.jsxs("form",{onSubmit:W,className:"space-y-6",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:m.jsxs("div",{className:"flex",children:[m.jsx("button",{type:"button",onClick:()=>R("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${C==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),m.jsx("button",{type:"button",onClick:()=>R("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${C==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${ie}`,children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:g,onChange:oe=>{const Se=oe.target.value.replace(/\D/g,"");if(!Se){v("");return}const Te=(parseInt(Se,10)/100).toFixed(2);v(Te)},onKeyDown:oe=>{(oe.key==="e"||oe.key==="E"||oe.key==="+"||oe.key==="-")&&oe.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${ie} placeholder-gray-700`})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),m.jsx("input",{type:"text",value:b,onChange:oe=>x(oe.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsx(aX,{selectedCard:L,onCardSelect:ne,isUserSelected:K}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),m.jsx("input",{type:"text",value:w,onChange:oe=>S(oe.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[oe,Se]=D.split("-").map(Number);return`${oe}-${Se.toString().padStart(2,"0")}`!==a?m.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[m.jsx(Td,{size:14}),m.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),m.jsx("input",{type:"date",value:D,onChange:oe=>N(oe.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:m.jsx(sX,{envelopes:ue,transactionAmount:parseFloat(g)||0,onSplitChange:V,initialSelectedEnvelopeId:G})})]})})]})},X_e=()=>{const t=Gi(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:s,appSettings:o,fetchAllTransactions:c,areAllTransactionsLoaded:u,isLoading:f}=mt(),{showToast:h}=mu(),[g,v]=A.useState(!1),[b,x]=A.useState(""),[w,S]=A.useState("all"),[T,I]=A.useState("All"),[P,O]=A.useState(!1),[D,N]=A.useState("all"),[C,R]=A.useState(!1),[M,V]=A.useState("all"),[L,z]=A.useState(!1),[K,Y]=A.useState(()=>{const W=new Date;return W.setMonth(W.getMonth()-1),W.toISOString().split("T")[0]}),[G,X]=A.useState(()=>new Date().toISOString().split("T")[0]),[J,ne]=A.useState(null),Q=A.useMemo(()=>{U.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:C,currentMonth:s,transactionMonths:e.map(ie=>({id:ie.id,month:ie.month,date:ie.date,description:ie.description}))});let W=e;return C||(W=e.filter(ie=>ie.month===s||!ie.month),U.log(" After month filter:",{remaining:W.length,currentMonth:s,filteredTransactions:W.map(ie=>({id:ie.id,description:ie.description,month:ie.month,matchesCurrentMonth:ie.month===s}))})),W.map(ie=>{if(!ie)return null;let oe=ie.date;if(typeof ie.date=="number"){const ae=(ie.date+978307200)*1e3;oe=new Date(ae).toISOString()}else if(!ie.date||typeof ie.date!="string")return null;return{...ie,date:oe}}).filter(Boolean).filter(ie=>{if(ie.description==="Budgeted"||ie.description==="Piggybank Contribution")return!1;if(b){const Se=b.toLowerCase(),ae=n.find(te=>te.id===ie.envelopeId)?.name.toLowerCase()||"",Te=ie.amount.toFixed(2);if(!(ie.description.toLowerCase().includes(Se)||ae.includes(Se)||Te.includes(Se)))return!1}if(w!=="all"&&ie.envelopeId!==w||T!=="All"&&ie.type!==T||M!=="all"&&(!ie.paymentMethod||ie.paymentMethod.id!==M)||!ie.date||typeof ie.date!="string")return!1;const oe=ie.date.split("T")[0];return!(L&&(oe<K||oe>G)||D!=="all"&&new Date(oe).getMonth()!==parseInt(D)||P&&!ie.reconciled)}).sort((ie,oe)=>new Date(oe.date).getTime()-new Date(ie.date).getTime())},[e,n,b,w,T,M,K,G,P,C,s,L]);U.log(" Final filtered transactions:",{count:Q.length,transactions:Q.map(W=>({id:W.id,description:W.description,amount:W.amount,date:W.date,month:W.month,type:W.type}))});const $=A.useMemo(()=>{const W=[],ue=new Set;for(const ie of Q)if(ie.splitGroupId&&!ue.has(ie.splitGroupId)){ue.add(ie.splitGroupId);const oe=Q.filter(Te=>Te.splitGroupId===ie.splitGroupId),Se=oe.reduce((Te,he)=>Te+he.amount,0),ae=oe.map(Te=>n.find(he=>he.id===Te.envelopeId)?.name||"Unknown").join(", ");W.push({key:`split-${ie.splitGroupId}`,transaction:ie,totalAmount:Se,envelopeNames:ae,splitTransactions:oe,isSplitGroup:!0})}else{if(ie.splitGroupId&&ue.has(ie.splitGroupId))continue;{const oe=n.find(Se=>Se.id===ie.envelopeId)?.name||"Unknown Envelope";W.push({key:ie.id,transaction:ie,totalAmount:ie.amount,envelopeNames:oe,splitTransactions:[ie],isSplitGroup:!1})}}return W},[Q,n]),Z=J?n.find(W=>W.id===J.envelopeId):null,ee=W=>{const ue={...W,reconciled:!W.reconciled};r(ue)};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))] transition-colors duration-200",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:m.jsx($a,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),m.jsx("button",{onClick:()=>v(!g),className:`p-2 rounded-full transition-colors ${g?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:m.jsx(Aq,{size:20,className:g?"fill-current":""})})]}),m.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[m.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",s]}),m.jsx("button",{onClick:()=>{const W=!C;R(W),W&&!u&&c()},disabled:f,className:`text-sm px-3 py-1 rounded-md transition-colors ${C?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"} ${f?"opacity-50 cursor-not-allowed":""}`,children:f?"Loading...":C?"Current Month Only":"All Time"})]}),m.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:m.jsxs("div",{className:"relative",children:[m.jsx(kq,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),m.jsx("input",{type:"text",placeholder:"Search transactions...",value:b,onChange:W=>x(W.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),b&&m.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:m.jsx(Gp,{size:16})})]})}),m.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${g?"max-h-[600px] opacity-100":"max-h-0 opacity-0"}`,children:m.jsxs("div",{className:"p-4 space-y-4",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),m.jsxs("select",{value:M,onChange:W=>V(W.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Payment Methods"}),o?.paymentSources?.map(W=>m.jsx("option",{value:W.id,children:W.name},W.id))]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),m.jsxs("select",{value:w,onChange:W=>S(W.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((W,ue)=>W.name.localeCompare(ue.name)).map(W=>m.jsx("option",{value:W.id,children:W.name},W.id))]})]}),m.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(W=>m.jsx("button",{onClick:()=>I(W),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${T===W?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:W},W))}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),m.jsxs("select",{value:D,onChange:W=>N(W.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(W,ue)=>ue).map(W=>m.jsx("option",{value:W,children:new Date(2022,W).toLocaleString("default",{month:"long"})},W))]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Date Range"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Enable"}),m.jsx("button",{onClick:()=>z(!L),className:`w-9 h-5 rounded-full transition-colors relative ${L?"bg-blue-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${L?"translate-x-4":"translate-x-0"}`})})]})]}),m.jsxs("div",{className:`grid grid-cols-2 gap-4 transition-opacity ${L?"opacity-100":"opacity-50 pointer-events-none"}`,children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"From"}),m.jsx("div",{className:"relative",children:m.jsx("input",{type:"date",value:K,onChange:W=>Y(W.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"To"}),m.jsx("div",{className:"relative",children:m.jsx("input",{type:"date",value:G,onChange:W=>X(W.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),m.jsx("button",{onClick:()=>O(!P),className:`w-11 h-6 rounded-full transition-colors relative ${P?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${P?"translate-x-5":"translate-x-0"}`})})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),m.jsx("button",{onClick:()=>R(!C),className:`w-11 h-6 rounded-full transition-colors relative ${C?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${C?"translate-x-5":"translate-x-0"}`})})]})]})}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:$.length===0?m.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):m.jsx(lr,{initial:!1,mode:"popLayout",children:$.map(W=>{const ue=W.transaction;return m.jsx(bt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(x_,{disabled:ue.isAutomatic,onDelete:()=>{const ie=W.splitTransactions.map(oe=>({...oe}));for(const oe of W.splitTransactions)oe.id&&i(oe.id);h(W.isSplitGroup?"Split transaction deleted":"Transaction deleted","neutral",()=>{for(const oe of ie)a(oe)})},children:m.jsx(lX,{transaction:{...ue,amount:W.totalAmount},envelopeName:W.envelopeNames,onReconcile:()=>{for(const ie of W.splitTransactions)ee(ie)},onEdit:()=>{if(ue.isAutomatic)return;n.find(oe=>oe.id===ue.envelopeId)?ne(ue):alert("Cannot edit: Envelope deleted.")}})})},W.key)})})})}),m.jsx(oX,{isVisible:!!J&&!!Z,onClose:()=>ne(null),mode:"edit",currentEnvelope:Z||{},initialTransaction:J,envelopes:n})]})};function pX(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=pX(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Vt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=pX(t))&&(r&&(r+=" "),r+=e);return r}var Q_e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function VD(t){if(typeof t!="string")return!1;var e=Q_e;return e.includes(t)}var Z_e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],J_e=new Set(Z_e);function gX(t){return typeof t!="string"?!1:J_e.has(t)}function mX(t){return typeof t=="string"&&t.startsWith("data-")}function Cs(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(gX(n)||mX(n))&&(e[n]=t[n]);return e}function t0(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Cs(e)}return typeof t=="object"&&!Array.isArray(t)?Cs(t):null}function ga(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(gX(n)||mX(n)||VD(n))&&(e[n]=t[n]);return e}var eEe=["children","width","height","viewBox","className","style","title","desc"];function GN(){return GN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GN.apply(null,arguments)}function tEe(t,e){if(t==null)return{};var n,r,i=nEe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function nEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var BD=A.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:s,style:o,title:c,desc:u}=t,f=tEe(t,eEe),h=a||{width:r,height:i,x:0,y:0},g=Vt("recharts-surface",s);return A.createElement("svg",GN({},ga(f),{className:g,width:r,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),A.createElement("title",null,c),A.createElement("desc",null,u),n)}),rEe=["children","className"];function HN(){return HN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HN.apply(null,arguments)}function iEe(t,e){if(t==null)return{};var n,r,i=aEe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function aEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var oi=A.forwardRef((t,e)=>{var{children:n,className:r}=t,i=iEe(t,rEe),a=Vt("recharts-layer",r);return A.createElement("g",HN({className:a},ga(i),{ref:e}),n)}),vX=A.createContext(null),sEe=()=>A.useContext(vX);function on(t){return function(){return t}}const yX=Math.cos,A1=Math.sin,Os=Math.sqrt,k1=Math.PI,w_=2*k1,KN=Math.PI,WN=2*KN,ad=1e-6,oEe=WN-ad;function bX(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function lEe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return bX;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class cEe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?bX:lEe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,f=s-e,h=o-n,g=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>ad)if(!(Math.abs(h*c-u*f)>ad)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-s,b=i-o,x=c*c+u*u,w=v*v+b*b,S=Math.sqrt(x),T=Math.sqrt(g),I=a*Math.tan((KN-Math.acos((x+g-w)/(2*S*T)))/2),P=I/T,O=I/S;Math.abs(P-1)>ad&&this._append`L${e+P*f},${n+P*h}`,this._append`A${a},${a},0,0,${+(h*v>f*b)},${this._x1=e+O*c},${this._y1=n+O*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,f=n+c,h=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>ad||Math.abs(this._y1-f)>ad)&&this._append`L${u},${f}`,r&&(g<0&&(g=g%WN+WN),g>oEe?this._append`A${r},${r},0,1,${h},${e-o},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:g>ad&&this._append`A${r},${r},0,${+(g>=KN)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function FD(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new cEe(e)}function $D(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function xX(t){this._context=t}xX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function S_(t){return new xX(t)}function wX(t){return t[0]}function SX(t){return t[1]}function _X(t,e){var n=on(!0),r=null,i=S_,a=null,s=FD(o);t=typeof t=="function"?t:t===void 0?wX:on(t),e=typeof e=="function"?e:e===void 0?SX:on(e);function o(c){var u,f=(c=$D(c)).length,h,g=!1,v;for(r==null&&(a=i(v=s())),u=0;u<=f;++u)!(u<f&&n(h=c[u],u,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(h,u,c),+e(h,u,c));if(v)return a=null,v+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:on(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:on(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:on(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function kx(t,e,n){var r=null,i=on(!0),a=null,s=S_,o=null,c=FD(u);t=typeof t=="function"?t:t===void 0?wX:on(+t),e=typeof e=="function"?e:on(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?SX:on(+n);function u(h){var g,v,b,x=(h=$D(h)).length,w,S=!1,T,I=new Array(x),P=new Array(x);for(a==null&&(o=s(T=c())),g=0;g<=x;++g){if(!(g<x&&i(w=h[g],g,h))===S)if(S=!S)v=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=g-1;b>=v;--b)o.point(I[b],P[b]);o.lineEnd(),o.areaEnd()}S&&(I[g]=+t(w,g,h),P[g]=+e(w,g,h),o.point(r?+r(w,g,h):I[g],n?+n(w,g,h):P[g]))}if(T)return o=null,T+""||null}function f(){return _X().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:on(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:on(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:on(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:on(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:on(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:on(+h),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:on(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class EX{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function uEe(t){return new EX(t,!0)}function dEe(t){return new EX(t,!1)}const UD={draw(t,e){const n=Os(e/k1);t.moveTo(n,0),t.arc(0,0,n,0,w_)}},fEe={draw(t,e){const n=Os(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},TX=Os(1/3),hEe=TX*2,pEe={draw(t,e){const n=Os(e/hEe),r=n*TX;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},gEe={draw(t,e){const n=Os(e),r=-n/2;t.rect(r,r,n,n)}},mEe=.8908130915292852,AX=A1(k1/10)/A1(7*k1/10),vEe=A1(w_/10)*AX,yEe=-yX(w_/10)*AX,bEe={draw(t,e){const n=Os(e*mEe),r=vEe*n,i=yEe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=w_*a/5,o=yX(s),c=A1(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},Ak=Os(3),xEe={draw(t,e){const n=-Os(e/(Ak*3));t.moveTo(0,n*2),t.lineTo(-Ak*n,-n),t.lineTo(Ak*n,-n),t.closePath()}},Pa=-.5,Oa=Os(3)/2,YN=1/Os(12),wEe=(YN/2+1)*3,SEe={draw(t,e){const n=Os(e/wEe),r=n/2,i=n*YN,a=r,s=n*YN+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(Pa*r-Oa*i,Oa*r+Pa*i),t.lineTo(Pa*a-Oa*s,Oa*a+Pa*s),t.lineTo(Pa*o-Oa*c,Oa*o+Pa*c),t.lineTo(Pa*r+Oa*i,Pa*i-Oa*r),t.lineTo(Pa*a+Oa*s,Pa*s-Oa*a),t.lineTo(Pa*o+Oa*c,Pa*c-Oa*o),t.closePath()}};function _Ee(t,e){let n=null,r=FD(i);t=typeof t=="function"?t:on(t||UD),e=typeof e=="function"?e:on(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:on(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:on(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function C1(){}function I1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function kX(t){this._context=t}kX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:I1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:I1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function EEe(t){return new kX(t)}function CX(t){this._context=t}CX.prototype={areaStart:C1,areaEnd:C1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:I1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function TEe(t){return new CX(t)}function IX(t){this._context=t}IX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:I1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function AEe(t){return new IX(t)}function NX(t){this._context=t}NX.prototype={areaStart:C1,areaEnd:C1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function kEe(t){return new NX(t)}function t6(t){return t<0?-1:1}function n6(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(t6(a)+t6(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function r6(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function kk(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function N1(t){this._context=t}N1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kk(this,this._t0,r6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,kk(this,r6(this,n=n6(this,t,e)),n);break;default:kk(this,this._t0,n=n6(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function PX(t){this._context=new OX(t)}(PX.prototype=Object.create(N1.prototype)).point=function(t,e){N1.prototype.point.call(this,e,t)};function OX(t){this._context=t}OX.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function CEe(t){return new N1(t)}function IEe(t){return new PX(t)}function DX(t){this._context=t}DX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=i6(t),i=i6(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function i6(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function NEe(t){return new DX(t)}function __(t,e){this._context=t,this._t=e}__.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function PEe(t){return new __(t,.5)}function OEe(t){return new __(t,0)}function DEe(t){return new __(t,1)}function Xd(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function XN(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function REe(t,e){return t[e]}function MEe(t){const e=[];return e.key=t,e}function jEe(){var t=on([]),e=XN,n=Xd,r=REe;function i(a){var s=Array.from(t.apply(this,arguments),MEe),o,c=s.length,u=-1,f;for(const h of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,f=$D(e(s));o<c;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:on(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:on(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?XN:typeof a=="function"?a:on(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Xd,i):n},i}function zEe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Xd(t,e)}}function LEe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}Xd(t,e)}}function VEe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var f=t[e[o]],h=f[r][1]||0,g=f[r-1][1]||0,v=(h-g)/2,b=0;b<o;++b){var x=t[e[b]],w=x[r][1]||0,S=x[r-1][1]||0;v+=w-S}c+=h,u+=v*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,Xd(t,e)}}var Ck={},Ik={},a6;function BEe(){return a6||(a6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(Ik)),Ik}var Nk={},s6;function RX(){return s6||(s6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(Nk)),Nk}var Pk={},o6;function qD(){return o6||(o6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(Pk)),Pk}var Ok={},Dk={},l6;function FEe(){return l6||(l6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(Dk)),Dk}var c6;function GD(){return c6||(c6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FEe(),n=qD();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,c="",u="",f=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const h=i[o];u?h==="\\"&&o+1<s?(o++,c+=i[o]):h===u?u="":c+=h:f?h==='"'||h==="'"?u=h:h==="]"?(f=!1,a.push(c),c=""):c+=h:h==="["?(f=!0,c&&(a.push(c),c="")):h==="."?c&&(a.push(c),c=""):c+=h,o++}return c&&a.push(c),a}t.toPath=r})(Ok)),Ok}var u6;function HD(){return u6||(u6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BEe(),n=RX(),r=qD(),i=GD();function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?n.isDeepKey(c)?a(o,i.toPath(c),u):u:f}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const f=o[c];return f===void 0?u:f}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?u:f}}}function s(o,c,u){if(c.length===0)return u;let f=o;for(let h=0;h<c.length;h++){if(f==null||e.isUnsafeProperty(c[h]))return u;f=f[c[h]]}return f===void 0?u:f}t.get=a})(Ck)),Ck}var Rk,d6;function $Ee(){return d6||(d6=1,Rk=HD().get),Rk}var UEe=$Ee();const Qd=Ol(UEe);var qEe=4;function $c(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qEe,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Mn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,s)=>{var o=n[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+$c(o)+a:i+a},"")}var Dr=t=>t===0?0:t>0?1:-1,To=t=>typeof t=="number"&&t!=+t,Zd=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,He=t=>(typeof t=="number"||t instanceof Number)&&!To(t),Ga=t=>He(t)||typeof t=="string",GEe=0,n0=t=>{var e=++GEe;return"".concat(t||"").concat(e)},ai=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!He(e)&&typeof e!="string")return r;var a;if(Zd(e)){if(n==null)return r;var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return To(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},MX=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function pr(t,e,n){return He(t)&&He(e)?$c(t+n*(e-t)):e}function HEe(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Qd(r,e))===n)}var Mr=t=>t===null||typeof t>"u",Z0=t=>Mr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Vi(t){return t!=null}function og(){}var KEe=["type","size","sizeType"];function QN(){return QN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QN.apply(null,arguments)}function f6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f6(Object(n),!0).forEach(function(r){WEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WEe(t,e,n){return(e=YEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YEe(t){var e=XEe(t,"string");return typeof e=="symbol"?e:e+""}function XEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QEe(t,e){if(t==null)return{};var n,r,i=ZEe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ZEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var jX={symbolCircle:UD,symbolCross:fEe,symbolDiamond:pEe,symbolSquare:gEe,symbolStar:bEe,symbolTriangle:xEe,symbolWye:SEe},JEe=Math.PI/180,eTe=t=>{var e="symbol".concat(Z0(t));return jX[e]||UD},tTe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*JEe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},nTe=(t,e)=>{jX["symbol".concat(Z0(t))]=e},KD=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=QEe(t,KEe),a=h6(h6({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var g=eTe(s),v=_Ee().type(g).size(tTe(n,r,s)),b=v();if(b!==null)return b},{className:c,cx:u,cy:f}=a,h=ga(a);return He(u)&&He(f)&&He(n)?A.createElement("path",QN({},h,{className:Vt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(f,")"),d:o()})):null};KD.registerSymbol=nTe;var zX=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,rTe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{VD(i)&&(r[i]=(a=>n[i](n,a)))}),r},iTe=(t,e,n)=>r=>(t(e,n,r),null),J0=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];VD(i)&&typeof a=="function"&&(r||(r={}),r[i]=iTe(a,e,n))}),r};function p6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aTe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p6(Object(n),!0).forEach(function(r){sTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sTe(t,e,n){return(e=oTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oTe(t){var e=lTe(t,"string");return typeof e=="symbol"?e:e+""}function lTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sr(t,e){var n=aTe({},t),r=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&r[o]!==void 0&&(s[o]=r[o]),s),n);return a}function P1(){return P1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P1.apply(null,arguments)}function g6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cTe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g6(Object(n),!0).forEach(function(r){uTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uTe(t,e,n){return(e=dTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dTe(t){var e=fTe(t,"string");return typeof e=="symbol"?e:e+""}function fTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ma=32,hTe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function pTe(t){var{data:e,iconType:n,inactiveColor:r}=t,i=Ma/2,a=Ma/6,s=Ma/3,o=e.inactive?r:e.color,c=n??e.type;if(c==="none")return null;if(c==="plainline"){var u;return A.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:i,x2:Ma,y2:i,className:"recharts-legend-icon"})}if(c==="line")return A.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(Ma,"M").concat(2*s,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return A.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(Ma/8,"h").concat(Ma,"v").concat(Ma*3/4,"h").concat(-Ma,"z"),className:"recharts-legend-icon"});if(A.isValidElement(e.legendIcon)){var f=cTe({},e);return delete f.legendIcon,A.cloneElement(e.legendIcon,f)}return A.createElement(KD,{fill:o,cx:i,cy:i,size:Ma,sizeType:"diameter",type:c})}function gTe(t){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:a,iconType:s}=t,o={x:0,y:0,width:Ma,height:Ma},c={display:r==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((f,h)=>{var g=f.formatter||i,v=Vt({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:f.inactive});if(f.type==="none")return null;var b=f.inactive?a:f.color,x=g?g(f.value,f,h):f.value;return A.createElement("li",P1({className:v,style:c,key:"legend-item-".concat(h)},J0(t,f,h)),A.createElement(BD,{width:n,height:n,viewBox:o,style:u,"aria-label":"".concat(x," legend icon")},A.createElement(pTe,{data:f,iconType:s,inactiveColor:a})),A.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},x))})}var mTe=t=>{var e=Sr(t,hTe),{payload:n,layout:r,align:i}=e;if(!n||!n.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return A.createElement("ul",{className:"recharts-default-legend",style:a},A.createElement(gTe,P1({},e,{payload:n})))},Mk={},jk={},m6;function vTe(){return m6||(m6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const s=n[a],o=r(s,a,n);i.has(o)||i.set(o,s)}return Array.from(i.values())}t.uniqBy=e})(jk)),jk}var zk={},v6;function yTe(){return v6||(v6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}t.ary=e})(zk)),zk}var Lk={},y6;function LX(){return y6||(y6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(Lk)),Lk}var Vk={},Bk={},Fk={},b6;function bTe(){return b6||(b6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(Fk)),Fk}var x6;function WD(){return x6||(x6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bTe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(Bk)),Bk}var $k={},w6;function xTe(){return w6||(w6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})($k)),$k}var S6;function wTe(){return S6||(S6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WD(),n=xTe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(Vk)),Vk}var Uk={},qk={},_6;function STe(){return _6||(_6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HD();function n(r){return function(i){return e.get(i,r)}}t.property=n})(qk)),qk}var Gk={},Hk={},Kk={},Wk={},E6;function VX(){return E6||(E6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Wk)),Wk}var Yk={},T6;function BX(){return T6||(T6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Yk)),Yk}var Xk={},A6;function FX(){return A6||(A6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(Xk)),Xk}var k6;function _Te(){return k6||(k6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VX(),n=BX(),r=FX();function i(f,h,g){return typeof g!="function"?i(f,h,()=>{}):a(f,h,function v(b,x,w,S,T,I){const P=g(b,x,w,S,T,I);return P!==void 0?!!P:a(b,x,v,I)},new Map)}function a(f,h,g,v){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,g,v);case"function":return Object.keys(h).length>0?a(f,{...h},g,v):r.isEqualsSameValueZero(f,h);default:return e.isObject(f)?typeof h=="string"?h==="":!0:r.isEqualsSameValueZero(f,h)}}function s(f,h,g,v){if(h==null)return!0;if(Array.isArray(h))return c(f,h,g,v);if(h instanceof Map)return o(f,h,g,v);if(h instanceof Set)return u(f,h,g,v);const b=Object.keys(h);if(f==null||n.isPrimitive(f))return b.length===0;if(b.length===0)return!0;if(v?.has(h))return v.get(h)===f;v?.set(h,f);try{for(let x=0;x<b.length;x++){const w=b[x];if(!n.isPrimitive(f)&&!(w in f)||h[w]===void 0&&f[w]!==void 0||h[w]===null&&f[w]!==null||!g(f[w],h[w],w,f,h,v))return!1}return!0}finally{v?.delete(h)}}function o(f,h,g,v){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,x]of h.entries()){const w=f.get(b);if(g(w,x,b,f,h,v)===!1)return!1}return!0}function c(f,h,g,v){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let x=0;x<h.length;x++){const w=h[x];let S=!1;for(let T=0;T<f.length;T++){if(b.has(T))continue;const I=f[T];let P=!1;if(g(I,w,x,f,h,v)&&(P=!0),P){b.add(T),S=!0;break}}if(!S)return!1}return!0}function u(f,h,g,v){return h.size===0?!0:f instanceof Set?c([...f],[...h],g,v):!1}t.isMatchWith=i,t.isSetMatch=u})(Kk)),Kk}var C6;function $X(){return C6||(C6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_Te();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(Hk)),Hk}var Qk={},Zk={},Jk={},I6;function ETe(){return I6||(I6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Jk)),Jk}var eC={},N6;function YD(){return N6||(N6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(eC)),eC}var tC={},P6;function UX(){return P6||(P6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",f="[object Array]",h="[object Function]",g="[object ArrayBuffer]",v="[object Object]",b="[object Error]",x="[object DataView]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",T="[object Uint16Array]",I="[object Uint32Array]",P="[object BigUint64Array]",O="[object Int8Array]",D="[object Int16Array]",N="[object Int32Array]",C="[object BigInt64Array]",R="[object Float32Array]",M="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=f,t.bigInt64ArrayTag=C,t.bigUint64ArrayTag=P,t.booleanTag=i,t.dataViewTag=x,t.dateTag=o,t.errorTag=b,t.float32ArrayTag=R,t.float64ArrayTag=M,t.functionTag=h,t.int16ArrayTag=D,t.int32ArrayTag=N,t.int8ArrayTag=O,t.mapTag=c,t.numberTag=r,t.objectTag=v,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=T,t.uint32ArrayTag=I,t.uint8ArrayTag=w,t.uint8ClampedArrayTag=S})(tC)),tC}var nC={},O6;function TTe(){return O6||(O6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(nC)),nC}var D6;function qX(){return D6||(D6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ETe(),n=YD(),r=UX(),i=BX(),a=TTe();function s(f,h){return o(f,void 0,f,new Map,h)}function o(f,h,g,v=new Map,b=void 0){const x=b?.(f,h,g,v);if(x!==void 0)return x;if(i.isPrimitive(f))return f;if(v.has(f))return v.get(f);if(Array.isArray(f)){const w=new Array(f.length);v.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,v,b);return Object.hasOwn(f,"index")&&(w.index=f.index),Object.hasOwn(f,"input")&&(w.input=f.input),w}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const w=new RegExp(f.source,f.flags);return w.lastIndex=f.lastIndex,w}if(f instanceof Map){const w=new Map;v.set(f,w);for(const[S,T]of f)w.set(S,o(T,S,g,v,b));return w}if(f instanceof Set){const w=new Set;v.set(f,w);for(const S of f)w.add(o(S,void 0,g,v,b));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const w=new(Object.getPrototypeOf(f)).constructor(f.length);v.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,v,b);return w}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const w=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return v.set(f,w),c(w,f,g,v,b),w}if(typeof File<"u"&&f instanceof File){const w=new File([f],f.name,{type:f.type});return v.set(f,w),c(w,f,g,v,b),w}if(typeof Blob<"u"&&f instanceof Blob){const w=new Blob([f],{type:f.type});return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof Error){const w=new f.constructor;return v.set(f,w),w.message=f.message,w.name=f.name,w.stack=f.stack,w.cause=f.cause,c(w,f,g,v,b),w}if(f instanceof Boolean){const w=new Boolean(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof Number){const w=new Number(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof String){const w=new String(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(typeof f=="object"&&u(f)){const w=Object.create(Object.getPrototypeOf(f));return v.set(f,w),c(w,f,g,v,b),w}return f}function c(f,h,g=f,v,b){const x=[...Object.keys(h),...e.getSymbols(h)];for(let w=0;w<x.length;w++){const S=x[w],T=Object.getOwnPropertyDescriptor(f,S);(T==null||T.writable)&&(f[S]=o(h[S],S,g,v,b))}}function u(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=c})(Zk)),Zk}var R6;function ATe(){return R6||(R6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qX();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(Qk)),Qk}var M6;function kTe(){return M6||(M6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$X(),n=ATe();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(Gk)),Gk}var rC={},iC={},aC={},j6;function CTe(){return j6||(j6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qX(),n=YD(),r=UX();function i(a,s){return e.cloneDeepWith(a,(o,c,u,f)=>{const h=s?.(o,c,u,f);if(h!==void 0)return h;if(typeof a=="object"){if(n.getTag(a)===r.objectTag&&typeof a.constructor!="function"){const g={};return f.set(a,g),e.copyProperties(g,a,u,f),g}switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const g=new a.constructor(a?.valueOf());return e.copyProperties(g,a),g}case r.argumentsTag:{const g={};return e.copyProperties(g,a),g.length=a.length,g[Symbol.iterator]=a[Symbol.iterator],g}default:return}}})}t.cloneDeepWith=i})(aC)),aC}var z6;function ITe(){return z6||(z6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CTe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(iC)),iC}var sC={},oC={},L6;function GX(){return L6||(L6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(oC)),oC}var lC={},V6;function NTe(){return V6||(V6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YD();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(lC)),lC}var B6;function PTe(){return B6||(B6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RX(),n=GX(),r=NTe(),i=GD();function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&s?.[o]==null?c=i.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let f=0;f<c.length;f++){const h=c[f];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}t.has=a})(sC)),sC}var F6;function OTe(){return F6||(F6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$X(),n=qD(),r=ITe(),i=HD(),a=PTe();function s(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return c=r.cloneDeep(c),function(u){const f=i.get(u,o);return f===void 0?a.has(u,o):c===void 0?f===void 0:e.isMatch(f,c)}}t.matchesProperty=s})(rC)),rC}var $6;function DTe(){return $6||($6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LX(),n=STe(),r=kTe(),i=OTe();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=a})(Uk)),Uk}var U6;function RTe(){return U6||(U6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vTe(),n=yTe(),r=LX(),i=wTe(),a=DTe();function s(o,c=r.identity){return i.isArrayLikeObject(o)?e.uniqBy(Array.from(o),n.ary(a.iteratee(c),1)):[]}t.uniqBy=s})(Mk)),Mk}var cC,q6;function MTe(){return q6||(q6=1,cC=RTe().uniqBy),cC}var jTe=MTe();const G6=Ol(jTe);function HX(t,e,n){return e===!0?G6(t,n):typeof e=="function"?G6(t,e):t}var uC={exports:{}},dC={},fC={exports:{}},hC={};var H6;function zTe(){if(H6)return hC;H6=1;var t=Bp();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(h,g){var v=g(),b=r({inst:{value:v,getSnapshot:g}}),x=b[0].inst,w=b[1];return a(function(){x.value=v,x.getSnapshot=g,c(x)&&w({inst:x})},[h,v,g]),i(function(){return c(x)&&w({inst:x}),h(function(){c(x)&&w({inst:x})})},[h]),s(v),v}function c(h){var g=h.getSnapshot;h=h.value;try{var v=g();return!n(h,v)}catch{return!0}}function u(h,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return hC.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,hC}var K6;function LTe(){return K6||(K6=1,fC.exports=zTe()),fC.exports}var W6;function VTe(){if(W6)return dC;W6=1;var t=Bp(),e=LTe();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return dC.useSyncExternalStoreWithSelector=function(u,f,h,g,v){var b=a(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=o(function(){function S(D){if(!T){if(T=!0,I=D,D=g(D),v!==void 0&&x.hasValue){var N=x.value;if(v(N,D))return P=N}return P=D}if(N=P,r(I,D))return N;var C=g(D);return v!==void 0&&v(N,C)?(I=D,N):(I=D,P=C)}var T=!1,I,P,O=h===void 0?null:h;return[function(){return S(f())},O===null?void 0:function(){return S(O())}]},[f,h,g,v]);var w=i(u,b[0],b[1]);return s(function(){x.hasValue=!0,x.value=w},[w]),c(w),w},dC}var Y6;function BTe(){return Y6||(Y6=1,uC.exports=VTe()),uC.exports}var FTe=BTe(),XD=A.createContext(null),$Te=t=>t,sn=()=>{var t=A.useContext(XD);return t?t.store.dispatch:$Te},xw=()=>{},UTe=()=>xw,qTe=(t,e)=>t===e;function qe(t){var e=A.useContext(XD),n=A.useMemo(()=>e?r=>{if(r!=null)return t(r)}:xw,[e,t]);return FTe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:UTe,e?e.store.getState:xw,e?e.store.getState:xw,n,qTe)}function GTe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function HTe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function KTe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var X6=t=>Array.isArray(t)?t:[t];function WTe(t){const e=Array.isArray(t[0])?t[0]:t;return KTe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function YTe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var XTe=class{constructor(t){this.value=t}deref(){return this.value}},QTe=typeof WeakRef<"u"?WeakRef:XTe,ZTe=0,Q6=1;function Cx(){return{s:ZTe,v:void 0,o:null,p:null}}function KX(t,e={}){let n=Cx();const{resultEqualityCheck:r}=e;let i,a=0;function s(){let o=n;const{length:c}=arguments;for(let h=0,g=c;h<g;h++){const v=arguments[h];if(typeof v=="function"||typeof v=="object"&&v!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const x=b.get(v);x===void 0?(o=Cx(),b.set(v,o)):o=x}else{let b=o.p;b===null&&(o.p=b=new Map);const x=b.get(v);x===void 0?(o=Cx(),b.set(v,o)):o=x}}const u=o;let f;if(o.s===Q6)f=o.v;else if(f=t.apply(null,arguments),a++,r){const h=i?.deref?.()??i;h!=null&&r(h,f)&&(f=h,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new QTe(f):f}return u.s=Q6,u.v=f,f}return s.clearCache=()=>{n=Cx(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function JTe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,o,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),GTe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...n,...c},{memoize:h,memoizeOptions:g=[],argsMemoize:v=KX,argsMemoizeOptions:b=[]}=f,x=X6(g),w=X6(b),S=WTe(i),T=h(function(){return a++,u.apply(null,arguments)},...x),I=v(function(){s++;const O=YTe(S,arguments);return o=T.apply(null,O),o},...w);return Object.assign(I,{resultFunc:u,memoizedResultFunc:T,dependencies:S,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var ve=JTe(KX),eAe=Object.assign((t,e=ve)=>{HTe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[n[c]]=o,s),{}))},{withTypes:()=>eAe}),pC={},gC={},mC={},Z6;function tAe(){return Z6||(Z6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const s=e(r),o=e(i);if(s===o&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};t.compareValues=n})(mC)),mC}var vC={},yC={},J6;function WX(){return J6||(J6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(yC)),yC}var eF;function nAe(){return eF||(eF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WX(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(vC)),vC}var tF;function rAe(){return tF||(tF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tAe(),n=nAe(),r=GD();function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(v=>String(v));const u=(v,b)=>{let x=v;for(let w=0;w<b.length&&x!=null;++w)x=x[b[w]];return x},f=(v,b)=>b==null||v==null?b:typeof v=="object"&&"key"in v?Object.hasOwn(b,v.key)?b[v.key]:u(b,v.path):typeof v=="function"?v(b):Array.isArray(v)?u(b,v):typeof b=="object"?b[v]:b,h=s.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:r.toPath(v)}));return a.map(v=>({original:v,criteria:h.map(b=>f(b,v))})).slice().sort((v,b)=>{for(let x=0;x<h.length;x++){const w=e.compareValues(v.criteria[x],b.criteria[x],o[x]);if(w!==0)return w}return 0}).map(v=>v.original)}t.orderBy=i})(gC)),gC}var bC={},nF;function iAe(){return nF||(nF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),s=(o,c)=>{for(let u=0;u<o.length;u++){const f=o[u];Array.isArray(f)&&c<a?s(f,c+1):i.push(f)}};return s(n,0),i}t.flatten=e})(bC)),bC}var xC={},rF;function YX(){return rF||(rF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GX(),n=WD(),r=VX(),i=FX();function a(s,o,c){return r.isObject(c)&&(typeof o=="number"&&n.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.isEqualsSameValueZero(c[o],s):!1}t.isIterateeCall=a})(xC)),xC}var iF;function aAe(){return iF||(iF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rAe(),n=iAe(),r=YX();function i(a,...s){const o=s.length;return o>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,n.flatten(s),["asc"])}t.sortBy=i})(pC)),pC}var wC,aF;function sAe(){return aF||(aF=1,wC=aAe().sortBy),wC}var oAe=sAe();const E_=Ol(oAe);var XX=t=>t.legend.settings,lAe=t=>t.legend.size,cAe=t=>t.legend.payload,uAe=ve([cAe,XX],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?E_(r,n):r});function dAe(){return qe(uAe)}var Ix=1;function QX(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>Ix||Math.abs(s.left-e.left)>Ix||Math.abs(s.top-e.top)>Ix||Math.abs(s.width-e.width)>Ix)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function qr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var fAe=typeof Symbol=="function"&&Symbol.observable||"@@observable",sF=fAe,SC=()=>Math.random().toString(36).substring(7).split("").join("."),hAe={INIT:`@@redux/INIT${SC()}`,REPLACE:`@@redux/REPLACE${SC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${SC()}`},O1=hAe;function QD(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function ZX(t,e,n){if(typeof t!="function")throw new Error(qr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(qr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(qr(1));return n(ZX)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((w,S)=>{s.set(S,w)}))}function f(){if(c)throw new Error(qr(3));return i}function h(w){if(typeof w!="function")throw new Error(qr(4));if(c)throw new Error(qr(5));let S=!0;u();const T=o++;return s.set(T,w),function(){if(S){if(c)throw new Error(qr(6));S=!1,u(),s.delete(T),a=null}}}function g(w){if(!QD(w))throw new Error(qr(7));if(typeof w.type>"u")throw new Error(qr(8));if(typeof w.type!="string")throw new Error(qr(17));if(c)throw new Error(qr(9));try{c=!0,i=r(i,w)}finally{c=!1}return(a=s).forEach(T=>{T()}),w}function v(w){if(typeof w!="function")throw new Error(qr(10));r=w,g({type:O1.REPLACE})}function b(){const w=h;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(qr(11));function T(){const P=S;P.next&&P.next(f())}return T(),{unsubscribe:w(T)}},[sF](){return this}}}return g({type:O1.INIT}),{dispatch:g,subscribe:h,getState:f,replaceReducer:v,[sF]:b}}function pAe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:O1.INIT})>"u")throw new Error(qr(12));if(typeof n(void 0,{type:O1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(qr(13))})}function JX(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{pAe(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let f=0;f<r.length;f++){const h=r[f],g=n[h],v=s[h],b=g(v,o);if(typeof b>"u")throw o&&o.type,new Error(qr(14));u[h]=b,c=c||b!==v}return c=c||r.length!==Object.keys(s).length,c?u:s}}function D1(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function gAe(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(qr(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=t.map(c=>c(s));return a=D1(...o)(i.dispatch),{...i,dispatch:a}}}function eQ(t){return QD(t)&&"type"in t&&typeof t.type=="string"}var tQ=Symbol.for("immer-nothing"),oF=Symbol.for("immer-draftable"),_i=Symbol.for("immer-state");function hs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ua=Object,Pp=ua.getPrototypeOf,R1="constructor",T_="prototype",ZN="configurable",M1="enumerable",ww="writable",r0="value",Tl=t=>!!t&&!!t[_i];function Is(t){return t?nQ(t)||k_(t)||!!t[oF]||!!t[R1]?.[oF]||C_(t)||I_(t):!1}var mAe=ua[T_][R1].toString(),lF=new WeakMap;function nQ(t){if(!t||!ZD(t))return!1;const e=Pp(t);if(e===null||e===ua[T_])return!0;const n=ua.hasOwnProperty.call(e,R1)&&e[R1];if(n===Object)return!0;if(!kh(n))return!1;let r=lF.get(n);return r===void 0&&(r=Function.toString.call(n),lF.set(n,r)),r===mAe}function A_(t,e,n=!0){ey(t)===0?(n?Reflect.ownKeys(t):ua.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function ey(t){const e=t[_i];return e?e.type_:k_(t)?1:C_(t)?2:I_(t)?3:0}var cF=(t,e,n=ey(t))=>n===2?t.has(e):ua[T_].hasOwnProperty.call(t,e),JN=(t,e,n=ey(t))=>n===2?t.get(e):t[e],j1=(t,e,n,r=ey(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function vAe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var k_=Array.isArray,C_=t=>t instanceof Map,I_=t=>t instanceof Set,ZD=t=>typeof t=="object",kh=t=>typeof t=="function",_C=t=>typeof t=="boolean";function yAe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var el=t=>t.copy_||t.base_,JD=t=>t.modified_?t.copy_:t.base_;function eP(t,e){if(C_(t))return new Map(t);if(I_(t))return new Set(t);if(k_(t))return Array[T_].slice.call(t);const n=nQ(t);if(e===!0||e==="class_only"&&!n){const r=ua.getOwnPropertyDescriptors(t);delete r[_i];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o[ww]===!1&&(o[ww]=!0,o[ZN]=!0),(o.get||o.set)&&(r[s]={[ZN]:!0,[ww]:!0,[M1]:o[M1],[r0]:t[s]})}return ua.create(Pp(t),r)}else{const r=Pp(t);if(r!==null&&n)return{...t};const i=ua.create(r);return ua.assign(i,t)}}function eR(t,e=!1){return N_(t)||Tl(t)||!Is(t)||(ey(t)>1&&ua.defineProperties(t,{set:Nx,add:Nx,clear:Nx,delete:Nx}),ua.freeze(t),e&&A_(t,(n,r)=>{eR(r,!0)},!1)),t}function bAe(){hs(2)}var Nx={[r0]:bAe};function N_(t){return t===null||!ZD(t)?!0:ua.isFrozen(t)}var z1="MapSet",tP="Patches",uF="ArrayMethods",rQ={};function Jd(t){const e=rQ[t];return e||hs(0,t),e}var dF=t=>!!rQ[t],i0,iQ=()=>i0,xAe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:dF(z1)?Jd(z1):void 0,arrayMethodsPlugin_:dF(uF)?Jd(uF):void 0});function fF(t,e){e&&(t.patchPlugin_=Jd(tP),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function nP(t){rP(t),t.drafts_.forEach(wAe),t.drafts_=null}function rP(t){t===i0&&(i0=t.parent_)}var hF=t=>i0=xAe(i0,t);function wAe(t){const e=t[_i];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function pF(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[_i].modified_&&(nP(e),hs(4)),Is(t)&&(t=gF(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[_i].base_,t,e)}else t=gF(e,n);return SAe(e,t,!0),nP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==tQ?t:void 0}function gF(t,e){if(N_(e))return e;const n=e[_i];if(!n)return L1(e,t.handledSet_,t);if(!P_(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);oQ(n,t)}return n.copy_}function SAe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&eR(e,n)}function aQ(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var P_=(t,e)=>t.scope_===e,_Ae=[];function sQ(t,e,n,r){const i=el(t),a=t.type_;if(r!==void 0&&JN(i,r,a)===e){j1(i,r,n,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;A_(i,(c,u)=>{if(Tl(u)){const f=o.get(u)||[];f.push(c),o.set(u,f)}})}const s=t.draftLocations_.get(e)??_Ae;for(const o of s)j1(i,o,n,a)}function EAe(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!P_(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const s=JD(a);sQ(t,a.draft_??a,s,n),oQ(a,i)})}function oQ(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}aQ(t)}}function TAe(t,e,n){const{scope_:r}=t;if(Tl(n)){const i=n[_i];P_(i,r)&&i.callbacks_.push(function(){Sw(t);const s=JD(i);sQ(t,n,s,e)})}else Is(n)&&t.callbacks_.push(function(){const a=el(t);t.type_===3?a.has(n)&&L1(n,r.handledSet_,r):JN(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&L1(JN(t.copy_,e,t.type_),r.handledSet_,r)})}function L1(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Tl(t)||e.has(t)||!Is(t)||N_(t)||(e.add(t),A_(t,(r,i)=>{if(Tl(i)){const a=i[_i];if(P_(a,n)){const s=JD(a);j1(t,r,s,t.type_),aQ(a)}}else Is(i)&&L1(i,e,n)})),t}function AAe(t,e){const n=k_(t),r={type_:n?1:0,scope_:e?e.scope_:iQ(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=V1;n&&(i=[r],a=a0);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,[o,r]}var V1={get(t,e){if(e===_i)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=el(t);if(!cF(i,e,t.type_))return kAe(t,i,e);const a=i[e];if(t.finalized_||!Is(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&yAe(e))return a;if(a===EC(t.base_,e)){Sw(t);const s=t.type_===1?+e:e,o=aP(t.scope_,a,t,s);return t.copy_[s]=o}return a},has(t,e){return e in el(t)},ownKeys(t){return Reflect.ownKeys(el(t))},set(t,e,n){const r=lQ(el(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=EC(el(t),e),a=i?.[_i];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(vAe(n,i)&&(n!==void 0||cF(t.base_,e,t.type_)))return!0;Sw(t),iP(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),TAe(t,e,n)),!0},deleteProperty(t,e){return Sw(t),EC(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),iP(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=el(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[ww]:!0,[ZN]:t.type_!==1||e!=="length",[M1]:r[M1],[r0]:n[e]}},defineProperty(){hs(11)},getPrototypeOf(t){return Pp(t.base_)},setPrototypeOf(){hs(12)}},a0={};for(let t in V1){let e=V1[t];a0[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}a0.deleteProperty=function(t,e){return a0.set.call(this,t,e,void 0)};a0.set=function(t,e,n){return V1.set.call(this,t[0],e,n,t[0])};function EC(t,e){const n=t[_i];return(n?el(n):t)[e]}function kAe(t,e,n){const r=lQ(e,n);return r?r0 in r?r[r0]:r.get?.call(t.draft_):void 0}function lQ(t,e){if(!(e in t))return;let n=Pp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Pp(n)}}function iP(t){t.modified_||(t.modified_=!0,t.parent_&&iP(t.parent_))}function Sw(t){t.copy_||(t.assigned_=new Map,t.copy_=eP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var CAe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(kh(n)&&!kh(r)){const s=r;r=n;const o=this;return function(u=s,...f){return o.produce(u,h=>r.call(this,h,...f))}}kh(r)||hs(6),i!==void 0&&!kh(i)&&hs(7);let a;if(Is(n)){const s=hF(this),o=aP(s,n,void 0);let c=!0;try{a=r(o),c=!1}finally{c?nP(s):rP(s)}return fF(s,i),pF(a,s)}else if(!n||!ZD(n)){if(a=r(n),a===void 0&&(a=n),a===tQ&&(a=void 0),this.autoFreeze_&&eR(a,!0),i){const s=[],o=[];Jd(tP).generateReplacementPatches_(n,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else hs(1,n)},this.produceWithPatches=(n,r)=>{if(kh(n))return(o,...c)=>this.produceWithPatches(o,u=>n(u,...c));let i,a;return[this.produce(n,r,(o,c)=>{i=o,a=c}),i,a]},_C(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),_C(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),_C(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Is(e)||hs(8),Tl(e)&&(e=Es(e));const n=hF(this),r=aP(n,e,void 0);return r[_i].isManual_=!0,rP(n),r}finishDraft(e,n){const r=e&&e[_i];(!r||!r.isManual_)&&hs(9);const{scope_:i}=r;return fF(i,n),pF(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=Jd(tP).applyPatches_;return Tl(e)?i(e,n):this.produce(e,a=>i(a,n))}};function aP(t,e,n,r){const[i,a]=C_(e)?Jd(z1).proxyMap_(e,n):I_(e)?Jd(z1).proxySet_(e,n):AAe(e,n);return(n?.scope_??iQ()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?EAe(n,a,r):a.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:u}=c;a.modified_&&u&&u.generatePatches_(a,[],c)}),i}function Es(t){return Tl(t)||hs(10,t),cQ(t)}function cQ(t){if(!Is(t)||N_(t))return t;const e=t[_i];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=eP(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=eP(t,!0);return A_(n,(i,a)=>{j1(n,i,cQ(a))},r),e&&(e.finalized_=!1),n}var IAe=new CAe,uQ=IAe.produce;function dQ(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var NAe=dQ(),PAe=dQ,OAe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?D1:D1.apply(null,arguments)};function Ha(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(fa(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>eQ(r)&&r.type===t,n}var fQ=class Qm extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Qm.prototype)}static get[Symbol.species](){return Qm}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Qm(...e[0].concat(this)):new Qm(...e.concat(this))}};function mF(t){return Is(t)?uQ(t,()=>{}):t}function Px(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function DAe(t){return typeof t=="boolean"}var RAe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new fQ;return n&&(DAe(n)?s.push(NAe):s.push(PAe(n.extraArgument))),s},hQ="RTK_autoBatch",bn=()=>t=>({payload:t,meta:{[hQ]:!0}}),vF=t=>e=>{setTimeout(e,t)},pQ=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:vF(10):t.type==="callback"?t.queueNotification:vF(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const h=()=>i&&f(),g=r.subscribe(h);return o.add(f),()=>{g(),o.delete(f)}},dispatch(f){try{return i=!f?.meta?.[hQ],a=!i,a&&(s||(s=!0,c(u))),r.dispatch(f)}finally{i=!0}}})},MAe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new fQ(t);return r&&i.push(pQ(typeof r=="object"?r:void 0)),i};function jAe(t){const e=RAe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(QD(n))o=JX(n);else throw new Error(fa(1));let c;typeof r=="function"?c=r(e):c=e();let u=D1;i&&(u=OAe({trace:!1,...typeof i=="object"&&i}));const f=gAe(...c),h=MAe(f);let g=typeof s=="function"?s(h):h();const v=u(...g);return ZX(o,a,v)}function gQ(t){const e={},n=[];let r;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(fa(28));if(o in e)throw new Error(fa(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return n.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function zAe(t){return typeof t=="function"}function LAe(t,e){let[n,r,i]=gQ(e),a;if(zAe(t))a=()=>mF(t());else{const o=mF(t);a=()=>o}function s(o=a(),c){let u=[n[c.type],...r.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,h)=>{if(h)if(Tl(f)){const v=h(f,c);return v===void 0?f:v}else{if(Is(f))return uQ(f,g=>h(g,c));{const g=h(f,c);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},o)}return s.getInitialState=a,s}var VAe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",BAe=(t=21)=>{let e="",n=t;for(;n--;)e+=VAe[Math.random()*64|0];return e},FAe=Symbol.for("rtk-slice-createasyncthunk");function $Ae(t,e){return`${t}/${e}`}function UAe({creators:t}={}){const e=t?.asyncThunk?.[FAe];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(fa(11));const s=(typeof r.reducers=="function"?r.reducers(GAe()):r.reducers)||{},o=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(I,P){const O=typeof I=="string"?I:I.type;if(!O)throw new Error(fa(12));if(O in c.sliceCaseReducersByType)throw new Error(fa(13));return c.sliceCaseReducersByType[O]=P,u},addMatcher(I,P){return c.sliceMatchers.push({matcher:I,reducer:P}),u},exposeAction(I,P){return c.actionCreators[I]=P,u},exposeCaseReducer(I,P){return c.sliceCaseReducersByName[I]=P,u}};o.forEach(I=>{const P=s[I],O={reducerName:I,type:$Ae(i,I),createNotation:typeof r.reducers=="function"};KAe(P)?YAe(O,P,u,e):HAe(O,P,u)});function f(){const[I={},P=[],O=void 0]=typeof r.extraReducers=="function"?gQ(r.extraReducers):[r.extraReducers],D={...I,...c.sliceCaseReducersByType};return LAe(r.initialState,N=>{for(let C in D)N.addCase(C,D[C]);for(let C of c.sliceMatchers)N.addMatcher(C.matcher,C.reducer);for(let C of P)N.addMatcher(C.matcher,C.reducer);O&&N.addDefaultCase(O)})}const h=I=>I,g=new Map,v=new WeakMap;let b;function x(I,P){return b||(b=f()),b(I,P)}function w(){return b||(b=f()),b.getInitialState()}function S(I,P=!1){function O(N){let C=N[I];return typeof C>"u"&&P&&(C=Px(v,O,w)),C}function D(N=h){const C=Px(g,P,()=>new WeakMap);return Px(C,N,()=>{const R={};for(const[M,V]of Object.entries(r.selectors??{}))R[M]=qAe(V,N,()=>Px(v,N,w),P);return R})}return{reducerPath:I,getSelectors:D,get selectors(){return D(O)},selectSlice:O}}const T={name:i,reducer:x,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...S(a),injectInto(I,{reducerPath:P,...O}={}){const D=P??a;return I.inject({reducerPath:D,reducer:x},O),{...T,...S(D,!0)}}};return T}}function qAe(t,e,n,r){function i(a,...s){let o=e(a);return typeof o>"u"&&r&&(o=n()),t(o,...s)}return i.unwrapped=t,i}var Hi=UAe();function GAe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function HAe({type:t,reducerName:e,createNotation:n},r,i){let a,s;if("reducer"in r){if(n&&!WAe(r))throw new Error(fa(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?Ha(t,s):Ha(t))}function KAe(t){return t._reducerDefinitionType==="asyncThunk"}function WAe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function YAe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(fa(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:u,options:f}=n,h=i(t,a,f);r.exposeAction(e,h),s&&r.addCase(h.fulfilled,s),o&&r.addCase(h.pending,o),c&&r.addCase(h.rejected,c),u&&r.addMatcher(h.settled,u),r.exposeCaseReducer(e,{fulfilled:s||Ox,pending:o||Ox,rejected:c||Ox,settled:u||Ox})}function Ox(){}var XAe="task",mQ="listener",vQ="completed",tR="cancelled",QAe=`task-${tR}`,ZAe=`task-${vQ}`,sP=`${mQ}-${tR}`,JAe=`${mQ}-${vQ}`,O_=class{constructor(t){this.code=t,this.message=`${XAe} ${tR} (reason: ${t})`}name="TaskAbortError";message},nR=(t,e)=>{if(typeof t!="function")throw new TypeError(fa(32))},B1=()=>{},yQ=(t,e=B1)=>(t.catch(e),t),bQ=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Od=t=>{if(t.aborted)throw new O_(t.reason)};function xQ(t,e){let n=B1;return new Promise((r,i)=>{const a=()=>i(new O_(t.reason));if(t.aborted){a();return}n=bQ(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=B1})}var eke=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof O_?"cancelled":"rejected",error:n}}finally{e?.()}},F1=t=>e=>yQ(xQ(t,e).then(n=>(Od(t),n))),wQ=t=>{const e=F1(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Qh}=Object,yF={},D_="listenerMiddleware",tke=(t,e)=>{const n=r=>bQ(t,()=>r.abort(t.reason));return(r,i)=>{nR(r);const a=new AbortController;n(a);const s=eke(async()=>{Od(t),Od(a.signal);const o=await r({pause:F1(a.signal),delay:wQ(a.signal),signal:a.signal});return Od(a.signal),o},()=>a.abort(ZAe));return i?.autoJoin&&e.push(s.catch(B1)),{result:F1(t)(s),cancel(){a.abort(QAe)}}}},nke=(t,e)=>{const n=async(r,i)=>{Od(e);let a=()=>{};const o=[new Promise((c,u)=>{let f=t({predicate:r,effect:(h,g)=>{g.unsubscribe(),c([h,g.getState(),g.getOriginalState()])}});a=()=>{f(),u()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await xQ(e,Promise.race(o));return Od(e),c}finally{a()}};return(r,i)=>yQ(n(r,i))},SQ=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Ha(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(fa(21));return nR(a),{predicate:i,type:e,effect:a}},_Q=Qh(t=>{const{type:e,predicate:n,effect:r}=SQ(t);return{id:BAe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(fa(22))}}},{withTypes:()=>_Q}),bF=(t,e)=>{const{type:n,effect:r,predicate:i}=SQ(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},oP=t=>{t.pending.forEach(e=>{e.abort(sP)})},rke=(t,e)=>()=>{for(const n of e.keys())oP(n);t.clear()},xF=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},EQ=Qh(Ha(`${D_}/add`),{withTypes:()=>EQ}),ike=Ha(`${D_}/removeAll`),TQ=Qh(Ha(`${D_}/remove`),{withTypes:()=>TQ}),ake=(...t)=>{console.error(`${D_}/error`,...t)},ty=(t={})=>{const e=new Map,n=new Map,r=v=>{const b=n.get(v)??0;n.set(v,b+1)},i=v=>{const b=n.get(v)??1;b===1?n.delete(v):n.set(v,b-1)},{extra:a,onError:s=ake}=t;nR(s);const o=v=>(v.unsubscribe=()=>e.delete(v.id),e.set(v.id,v),b=>{v.unsubscribe(),b?.cancelActive&&oP(v)}),c=v=>{const b=bF(e,v)??_Q(v);return o(b)};Qh(c,{withTypes:()=>c});const u=v=>{const b=bF(e,v);return b&&(b.unsubscribe(),v.cancelActive&&oP(b)),!!b};Qh(u,{withTypes:()=>u});const f=async(v,b,x,w)=>{const S=new AbortController,T=nke(c,S.signal),I=[];try{v.pending.add(S),r(v),await Promise.resolve(v.effect(b,Qh({},x,{getOriginalState:w,condition:(P,O)=>T(P,O).then(Boolean),take:T,delay:wQ(S.signal),pause:F1(S.signal),extra:a,signal:S.signal,fork:tke(S.signal,I),unsubscribe:v.unsubscribe,subscribe:()=>{e.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((P,O,D)=>{P!==S&&(P.abort(sP),D.delete(P))})},cancel:()=>{S.abort(sP),v.pending.delete(S)},throwIfCancelled:()=>{Od(S.signal)}})))}catch(P){P instanceof O_||xF(s,P,{raisedBy:"effect"})}finally{await Promise.all(I),S.abort(JAe),i(v),v.pending.delete(S)}},h=rke(e,n);return{middleware:v=>b=>x=>{if(!eQ(x))return b(x);if(EQ.match(x))return c(x.payload);if(ike.match(x)){h();return}if(TQ.match(x))return u(x.payload);let w=v.getState();const S=()=>{if(w===yF)throw new Error(fa(23));return w};let T;try{if(T=b(x),e.size>0){const I=v.getState(),P=Array.from(e.values());for(const O of P){let D=!1;try{D=O.predicate(x,I,w)}catch(N){D=!1,xF(s,N,{raisedBy:"predicate"})}D&&f(O,x,v,S)}}}finally{w=yF}return T},startListening:c,stopListening:u,clearListeners:h}};function fa(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var ske={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},AQ=Hi({name:"chartLayout",initialState:ske,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:oke,setLayout:lke,setChartSize:cke,setScale:uke}=AQ.actions,dke=AQ.reducer;function kQ(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function vt(t){return Number.isFinite(t)}function Ao(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function wF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wF(Object(n),!0).forEach(function(r){fke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fke(t,e,n){return(e=hke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hke(t){var e=pke(t,"string");return typeof e=="symbol"?e:e+""}function pke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pn(t,e,n){return Mr(t)||Mr(e)?n:Ga(e)?Qd(t,e,n):typeof e=="function"?e(t):n}var gke=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&He(t[a]))return Fh(Fh({},t),{},{[a]:t[a]+(r||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&He(t[s]))return Fh(Fh({},t),{},{[s]:t[s]+(i||0)})}return t},yu=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",CQ=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,a,s=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(n),s},IQ=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:f,ticks:h,niceTicks:g,axisType:v}=t;if(!s)return null;var b=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,x=i==="category"&&s.bandwidth?s.bandwidth()/b:0;if(x=v==="angleAxis"&&a&&a.length>=2?Dr(a[0]-a[1])*2*x:x,h||g){var w=(h||g||[]).map((S,T)=>{var I=r?r.indexOf(S):S,P=s.map(I);return vt(P)?{coordinate:P+x,value:S,offset:x,index:T}:null}).filter(Vi);return w}return c&&u?u.map((S,T)=>{var I=s.map(S);return vt(I)?{coordinate:I+x,value:S,index:T,offset:x}:null}).filter(Vi):s.ticks&&f!=null?s.ticks(f).map((S,T)=>{var I=s.map(S);return vt(I)?{coordinate:I+x,value:S,index:T,offset:x}:null}).filter(Vi):s.domain().map((S,T)=>{var I=s.map(S);return vt(I)?{coordinate:I+x,value:r?r[S]:S,index:T,offset:x}:null}).filter(Vi)},mke=(t,e)=>{if(!e||e.length!==2||!He(e[0])||!He(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!He(t[0])||t[0]<n)&&(i[0]=n),(!He(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},vke=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0,o=0;o<n;++o){var c=t[o],u=c?.[i];if(u!=null){var f=u[1],h=u[0],g=To(f)?h:f;g>=0?(u[0]=a,a+=g,u[1]=a):(u[0]=s,s+=g,u[1]=s)}}}},yke=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0;s<n;++s){var o=t[s],c=o?.[i];if(c!=null){var u=To(c[1])?c[0]:c[1];u>=0?(c[0]=a,a+=u,c[1]=a):(c[0]=0,c[1]=0)}}}},bke={sign:vke,expand:zEe,none:Xd,silhouette:LEe,wiggle:VEe,positive:yke},xke=(t,e,n)=>{var r,i=(r=bke[n])!==null&&r!==void 0?r:Xd,a=jEe().keys(e).value((o,c)=>Number(pn(o,c,0))).order(XN).offset(i),s=a(t);return s.forEach((o,c)=>{o.forEach((u,f)=>{var h=pn(t[f],e[c],0);Array.isArray(h)&&h.length===2&&He(h[0])&&He(h[1])&&(u[0]=h[0],u[1]=h[1])})}),s};function wke(t){return t==null?void 0:String(t)}var SF=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var o=pn(a,e.dataKey,e.scale.domain()[s]);if(Mr(o))return null;var c=e.scale.map(o);return He(c)?c-i/2+r:null},Ske=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},_ke=t=>{var e=t.flat(2).filter(He);return[Math.min(...e),Math.max(...e)]},Eke=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Tke=(t,e,n)=>{if(t!=null)return Eke(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:s}=a,o=s.reduce((c,u)=>{var f=kQ(u,e,n),h=_ke(f);return!vt(h[0])||!vt(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},_F=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,EF=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$1=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=E_(e,f=>f.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],u=i[s-1];a=Math.min((c?.coordinate||0)-(u?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function TF(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Fh(Fh({},e),{},{dataKey:n,payload:r,value:i,name:a})}function R_(t,e){if(t)return String(t);if(typeof e=="string")return e}var Ake=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},kke=(t,e)=>e==="centric"?t.angle:t.radius,jl=t=>t.layout.width,zl=t=>t.layout.height,Cke=t=>t.layout.scale,NQ=t=>t.layout.margin,M_=ve(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),j_=ve(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),PQ="data-recharts-item-index",OQ="data-recharts-item-id",ny=60;function AF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AF(Object(n),!0).forEach(function(r){Ike(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ike(t,e,n){return(e=Nke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nke(t){var e=Pke(t,"string");return typeof e=="symbol"?e:e+""}function Pke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Oke=t=>t.brush.height;function Dke(t){var e=j_(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ny;return n+i}return n},0)}function Rke(t){var e=j_(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ny;return n+i}return n},0)}function Mke(t){var e=M_(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function jke(t){var e=M_(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var _r=ve([jl,zl,NQ,Oke,Dke,Rke,Mke,jke,XX,lAe],(t,e,n,r,i,a,s,o,c,u)=>{var f={left:(n.left||0)+i,right:(n.right||0)+a},h={top:(n.top||0)+s,bottom:(n.bottom||0)+o},g=Dx(Dx({},h),f),v=g.bottom;g.bottom+=r,g=gke(g,c,u);var b=t-g.left-g.right,x=e-g.top-g.bottom;return Dx(Dx({brushBottom:v},g),{},{width:Math.max(b,0),height:Math.max(x,0)})}),zke=ve(_r,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),rR=ve(jl,zl,(t,e)=>({x:0,y:0,width:t,height:e})),Lke=A.createContext(null),Ei=()=>A.useContext(Lke)!=null,z_=t=>t.brush,L_=ve([z_,_r,NQ],(t,e,n)=>({height:t.height,x:He(t.x)?t.x:e.left,y:He(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:He(t.width)?t.width:e.width})),TC={},AC={},kC={},kF;function Vke(){return kF||(kF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),f=()=>{o!==null&&(n.apply(s,o),s=void 0,o=null)},h=()=>{u&&f(),x()};let g=null;const v=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,h()},r)},b=()=>{g!==null&&(clearTimeout(g),g=null)},x=()=>{b(),s=void 0,o=null},w=()=>{f()},S=function(...T){if(i?.aborted)return;s=this,o=T;const I=g==null;v(),c&&I&&f()};return S.schedule=v,S.cancel=x,S.flush=w,i?.addEventListener("abort",x,{once:!0}),S}t.debounce=e})(kC)),kC}var CF;function Bke(){return CF||(CF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vke();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let f,h=null;const g=e.debounce(function(...x){f=r.apply(this,x),h=null},i,{edges:u}),v=function(...x){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(f=r.apply(this,x),h=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,x),f)},b=()=>(g.flush(),f);return v.cancel=g.cancel,v.flush=b,v}t.debounce=n})(AC)),AC}var IF;function Fke(){return IF||(IF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Bke();function n(r,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:o})}t.throttle=n})(TC)),TC}var CC,NF;function $ke(){return NF||(NF=1,CC=Fke().throttle),CC}var Uke=$ke();const qke=Ol(Uke);var U1=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>i[s++]))}},uo={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},DQ=(t,e,n)=>{var{width:r=uo.width,height:i=uo.height,aspect:a,maxHeight:s}=n,o=Zd(r)?t:Number(r),c=Zd(i)?e:Number(i);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},Gke={width:0,height:0,overflow:"visible"},Hke={width:0,overflowX:"visible"},Kke={height:0,overflowY:"visible"},Wke={},Yke=t=>{var{width:e,height:n}=t,r=Zd(e),i=Zd(n);return r&&i?Gke:r?Hke:i?Kke:Wke};function Xke(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i=uo.width,a=uo.height):i===void 0?i=r&&r>0?void 0:uo.width:a===void 0&&(a=r&&r>0?void 0:uo.height),{width:i,height:a}}function lP(){return lP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lP.apply(null,arguments)}function PF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PF(Object(n),!0).forEach(function(r){Qke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qke(t,e,n){return(e=Zke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zke(t){var e=Jke(t,"string");return typeof e=="symbol"?e:e+""}function Jke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RQ=A.createContext(uo.initialDimension);function eCe(t){return Ao(t.width)&&Ao(t.height)}function MQ(t){var{children:e,width:n,height:r}=t,i=A.useMemo(()=>({width:n,height:r}),[n,r]);return eCe(i)?A.createElement(RQ.Provider,{value:i},e):null}var iR=()=>A.useContext(RQ),tCe=A.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=uo.initialDimension,width:i,height:a,minWidth:s=uo.minWidth,minHeight:o,maxHeight:c,children:u,debounce:f=uo.debounce,id:h,className:g,onResize:v,style:b={}}=t,x=A.useRef(null),w=A.useRef();w.current=v,A.useImperativeHandle(e,()=>x.current);var[S,T]=A.useState({containerWidth:r.width,containerHeight:r.height}),I=A.useCallback((C,R)=>{T(M=>{var V=Math.round(C),L=Math.round(R);return M.containerWidth===V&&M.containerHeight===L?M:{containerWidth:V,containerHeight:L}})},[]);A.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return og;var C=L=>{var z,K=L[0];if(K!=null){var{width:Y,height:G}=K.contentRect;I(Y,G),(z=w.current)===null||z===void 0||z.call(w,Y,G)}};f>0&&(C=qke(C,f,{trailing:!0,leading:!1}));var R=new ResizeObserver(C),{width:M,height:V}=x.current.getBoundingClientRect();return I(M,V),R.observe(x.current),()=>{R.disconnect()}},[I,f]);var{containerWidth:P,containerHeight:O}=S;U1(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:D,calculatedHeight:N}=DQ(P,O,{width:i,height:a,aspect:n,maxHeight:c});return U1(D!=null&&D>0||N!=null&&N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,N,i,a,s,o,n),A.createElement("div",{id:h?"".concat(h):void 0,className:Vt("recharts-responsive-container",g),style:OF(OF({},b),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:x},A.createElement("div",{style:Yke({width:i,height:a})},A.createElement(MQ,{width:D,height:N},u)))}),ry=A.forwardRef((t,e)=>{var n=iR();if(Ao(n.width)&&Ao(n.height))return t.children;var{width:r,height:i}=Xke({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=DQ(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return He(a)&&He(s)?A.createElement(MQ,{width:a,height:s},t.children):A.createElement(tCe,lP({},t,{width:r,height:i,ref:e}))});function aR(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var iy=()=>{var t,e=Ei(),n=qe(zke),r=qe(L_),i=(t=qe(z_))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},nCe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},jQ=()=>{var t;return(t=qe(_r))!==null&&t!==void 0?t:nCe},sR=()=>qe(jl),oR=()=>qe(zl),rCe=()=>qe(t=>t.layout.margin),Bt=t=>t.layout.layoutType,lg=()=>qe(Bt),zQ=()=>{var t=lg();if(t==="horizontal"||t==="vertical")return t},LQ=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},iCe=()=>{var t=lg();return t!==void 0},ay=t=>{var e=sn(),n=Ei(),{width:r,height:i}=t,a=iR(),s=r,o=i;return a&&(s=a.width>0?a.width:r,o=a.height>0?a.height:i),A.useEffect(()=>{!n&&Ao(s)&&Ao(o)&&e(cke({width:s,height:o}))},[e,n,s,o]),null},VQ=Symbol.for("immer-nothing"),DF=Symbol.for("immer-draftable"),ma=Symbol.for("immer-state");function ps(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var s0=Object.getPrototypeOf;function Op(t){return!!t&&!!t[ma]}function ef(t){return t?BQ(t)||Array.isArray(t)||!!t[DF]||!!t.constructor?.[DF]||sy(t)||B_(t):!1}var aCe=Object.prototype.constructor.toString(),RF=new WeakMap;function BQ(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=RF.get(n);return r===void 0&&(r=Function.toString.call(n),RF.set(n,r)),r===aCe}function q1(t,e,n=!0){V_(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function V_(t){const e=t[ma];return e?e.type_:Array.isArray(t)?1:sy(t)?2:B_(t)?3:0}function cP(t,e){return V_(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function FQ(t,e,n){const r=V_(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function sCe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function sy(t){return t instanceof Map}function B_(t){return t instanceof Set}function sd(t){return t.copy_||t.base_}function uP(t,e){if(sy(t))return new Map(t);if(B_(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=BQ(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[ma];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(s0(t),r)}else{const r=s0(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function lR(t,e=!1){return F_(t)||Op(t)||!ef(t)||(V_(t)>1&&Object.defineProperties(t,{set:Rx,add:Rx,clear:Rx,delete:Rx}),Object.freeze(t),e&&Object.values(t).forEach(n=>lR(n,!0))),t}function oCe(){ps(2)}var Rx={value:oCe};function F_(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var lCe={};function tf(t){const e=lCe[t];return e||ps(0,t),e}var o0;function $Q(){return o0}function cCe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function MF(t,e){e&&(tf("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function dP(t){fP(t),t.drafts_.forEach(uCe),t.drafts_=null}function fP(t){t===o0&&(o0=t.parent_)}function jF(t){return o0=cCe(o0,t)}function uCe(t){const e=t[ma];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function zF(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ma].modified_&&(dP(e),ps(4)),ef(t)&&(t=G1(e,t),e.parent_||H1(e,t)),e.patches_&&tf("Patches").generateReplacementPatches_(n[ma].base_,t,e.patches_,e.inversePatches_)):t=G1(e,n,[]),dP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==VQ?t:void 0}function G1(t,e,n){if(F_(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[ma];if(!i)return q1(e,(a,s)=>LF(t,i,e,a,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return H1(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),q1(s,(c,u)=>LF(t,i,a,c,u,n,o),r),H1(t,a,!1),n&&t.patches_&&tf("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function LF(t,e,n,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=F_(i);if(!(o&&!s)){if(Op(i)){const c=a&&e&&e.type_!==3&&!cP(e.assigned_,r)?a.concat(r):void 0,u=G1(t,i,c);if(FQ(n,r,u),Op(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(ef(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;G1(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(sy(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&H1(t,i)}}}function H1(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&lR(e,n)}function dCe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:$Q(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=cR;n&&(i=[r],a=l0);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var cR={get(t,e){if(e===ma)return t;const n=sd(t);if(!cP(n,e))return fCe(t,n,e);const r=n[e];return t.finalized_||!ef(r)?r:r===IC(t.base_,e)?(NC(t),t.copy_[e]=pP(r,t)):r},has(t,e){return e in sd(t)},ownKeys(t){return Reflect.ownKeys(sd(t))},set(t,e,n){const r=UQ(sd(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=IC(sd(t),e),a=i?.[ma];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(sCe(n,i)&&(n!==void 0||cP(t.base_,e)))return!0;NC(t),hP(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return IC(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,NC(t),hP(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=sd(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ps(11)},getPrototypeOf(t){return s0(t.base_)},setPrototypeOf(){ps(12)}},l0={};q1(cR,(t,e)=>{l0[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});l0.deleteProperty=function(t,e){return l0.set.call(this,t,e,void 0)};l0.set=function(t,e,n){return cR.set.call(this,t[0],e,n,t[0])};function IC(t,e){const n=t[ma];return(n?sd(n):t)[e]}function fCe(t,e,n){const r=UQ(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function UQ(t,e){if(!(e in t))return;let n=s0(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=s0(n)}}function hP(t){t.modified_||(t.modified_=!0,t.parent_&&hP(t.parent_))}function NC(t){t.copy_||(t.copy_=uP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var hCe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(c=a,...u){return s.produce(c,f=>n.call(this,f,...u))}}typeof n!="function"&&ps(6),r!==void 0&&typeof r!="function"&&ps(7);let i;if(ef(e)){const a=jF(this),s=pP(e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?dP(a):fP(a)}return MF(a,r),zF(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===VQ&&(i=void 0),this.autoFreeze_&&lR(i,!0),r){const a=[],s=[];tf("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else ps(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ef(t)||ps(8),Op(t)&&(t=pCe(t));const e=jF(this),n=pP(t,void 0);return n[ma].isManual_=!0,fP(e),n}finishDraft(t,e){const n=t&&t[ma];(!n||!n.isManual_)&&ps(9);const{scope_:r}=n;return MF(r,e),zF(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=tf("Patches").applyPatches_;return Op(t)?r(t,e):this.produce(t,i=>r(i,e))}};function pP(t,e){const n=sy(t)?tf("MapSet").proxyMap_(t,e):B_(t)?tf("MapSet").proxySet_(t,e):dCe(t,e);return(e?e.scope_:$Q()).drafts_.push(n),n}function pCe(t){return Op(t)||ps(10,t),qQ(t)}function qQ(t){if(!ef(t)||F_(t))return t;const e=t[ma];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=uP(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=uP(t,!0);return q1(n,(i,a)=>{FQ(n,i,qQ(a))},r),e&&(e.finalized_=!1),n}var gCe=new hCe;gCe.produce;var mCe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},GQ=Hi({name:"legend",initialState:mCe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:bn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Es(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:bn()},removeLegendPayload:{reducer(t,e){var n=Es(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:bn()}}}),{setLegendSize:VF,setLegendSettings:vCe,addLegendPayload:HQ,replaceLegendPayload:KQ,removeLegendPayload:WQ}=GQ.actions,yCe=GQ.reducer,bCe=["contextPayload"];function gP(){return gP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gP.apply(null,arguments)}function BF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BF(Object(n),!0).forEach(function(r){xCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xCe(t,e,n){return(e=wCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wCe(t){var e=SCe(t,"string");return typeof e=="symbol"?e:e+""}function SCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Ce(t,e){if(t==null)return{};var n,r,i=ECe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ECe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function TCe(t){return t.value}function ACe(t){var{contextPayload:e}=t,n=_Ce(t,bCe),r=HX(e,t.payloadUniqBy,TCe),i=Dp(Dp({},n),{},{payload:r});return A.isValidElement(t.content)?A.cloneElement(t.content,i):typeof t.content=="function"?A.createElement(t.content,i):A.createElement(mTe,i)}function kCe(t,e,n,r,i,a){var{layout:s,align:o,verticalAlign:c}=e,u,f;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(o==="center"&&s==="vertical"?u={left:((r||0)-a.width)/2}:u=o==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?f={top:((i||0)-a.height)/2}:f=c==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Dp(Dp({},u),f)}function CCe(t){var e=sn();return A.useEffect(()=>{e(vCe(t))},[e,t]),null}function ICe(t){var e=sn();return A.useEffect(()=>(e(VF(t)),()=>{e(VF({width:0,height:0}))}),[e,t]),null}function NCe(t,e,n,r){return t==="vertical"&&e!=null?{height:e}:t==="horizontal"?{width:n||r}:null}var PCe={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function YQ(t){var e=Sr(t,PCe),n=dAe(),r=sEe(),i=rCe(),{width:a,height:s,wrapperStyle:o,portal:c}=e,[u,f]=QX([n]),h=sR(),g=oR();if(h==null||g==null)return null;var v=h-(i?.left||0)-(i?.right||0),b=NCe(e.layout,s,a,v),x=c?o:Dp(Dp({position:"absolute",width:b?.width||a||"auto",height:b?.height||s||"auto"},kCe(o,e,i,h,g,u)),o),w=c??r;if(w==null||n==null)return null;var S=A.createElement("div",{className:"recharts-legend-wrapper",style:x,ref:f},A.createElement(CCe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&A.createElement(ICe,{width:u.width,height:u.height}),A.createElement(ACe,gP({},e,b,{margin:i,chartWidth:h,chartHeight:g,contextPayload:n})));return d2.createPortal(S,w)}YQ.displayName="Legend";function mP(){return mP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mP.apply(null,arguments)}function FF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FF(Object(n),!0).forEach(function(r){OCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OCe(t,e,n){return(e=DCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DCe(t){var e=RCe(t,"string");return typeof e=="symbol"?e:e+""}function RCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MCe(t){return Array.isArray(t)&&Ga(t[0])&&Ga(t[1])?t.join(" ~ "):t}var mh={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},jCe=t=>{var{separator:e=mh.separator,contentStyle:n,itemStyle:r,labelStyle:i=mh.labelStyle,payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:f,labelFormatter:h,accessibilityLayer:g=mh.accessibilityLayer}=t,v=()=>{if(a&&a.length){var O={padding:0,margin:0},D=(o?E_(a,o):a).map((N,C)=>{if(N.type==="none")return null;var R=N.formatter||s||MCe,{value:M,name:V}=N,L=M,z=V;if(R){var K=R(M,V,N,C,a);if(Array.isArray(K))[L,z]=K;else if(K!=null)L=K;else return null}var Y=Nm(Nm({},mh.itemStyle),{},{color:N.color||mh.itemStyle.color},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:Y},Ga(z)?A.createElement("span",{className:"recharts-tooltip-item-name"},z):null,Ga(z)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},L),A.createElement("span",{className:"recharts-tooltip-item-unit"},N.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:O},D)}return null},b=Nm(Nm({},mh.contentStyle),n),x=Nm({margin:0},i),w=!Mr(f),S=w?f:"",T=Vt("recharts-default-tooltip",c),I=Vt("recharts-tooltip-label",u);w&&h&&a!==void 0&&a!==null&&(S=h(f,a));var P=g?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",mP({className:T,style:b},P),A.createElement("p",{className:I,style:x},A.isValidElement(S)?S:"".concat(S)),v())},Pm="recharts-tooltip-wrapper",zCe={visibility:"hidden"};function LCe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Vt(Pm,{["".concat(Pm,"-right")]:He(n)&&e&&He(e.x)&&n>=e.x,["".concat(Pm,"-left")]:He(n)&&e&&He(e.x)&&n<e.x,["".concat(Pm,"-bottom")]:He(r)&&e&&He(e.y)&&r>=e.y,["".concat(Pm,"-top")]:He(r)&&e&&He(e.y)&&r<e.y})}function $F(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=t;if(a&&He(a[r]))return a[r];var f=n[r]-o-(i>0?i:0),h=n[r]+i;if(e[r])return s[r]?f:h;var g=c[r];if(g==null)return 0;if(s[r]){var v=f,b=g;return v<b?Math.max(h,g):Math.max(f,g)}if(u==null)return 0;var x=h+o,w=g+u;return x>w?Math.max(f,g):Math.max(h,g)}function VCe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function BCe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:i,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:c,viewBox:u}=t,f,h,g;return o.height>0&&o.width>0&&n?(h=$F({allowEscapeViewBox:e,coordinate:n,key:"x",offset:i,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),g=$F({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),f=VCe({translateX:h,translateY:g,useTranslate3d:c})):f=zCe,{cssProperties:f,cssClasses:LCe({translateX:h,translateY:g,coordinate:n})}}function UF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UF(Object(n),!0).forEach(function(r){vP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vP(t,e,n){return(e=FCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FCe(t){var e=$Ce(t,"string");return typeof e=="symbol"?e:e+""}function $Ce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class UCe extends A.PureComponent{constructor(){super(...arguments),vP(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),vP(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:v,wrapperStyle:b,lastBoundingBox:x,innerRef:w,hasPortalFromProps:S}=this.props,T=typeof u=="number"?u:u.x,I=typeof u=="number"?u:u.y,{cssClasses:P,cssProperties:O}=BCe({allowEscapeViewBox:n,coordinate:s,offsetLeft:T,offsetTop:I,position:f,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:g,viewBox:v}),D=S?{}:Mx(Mx({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),N=Mx(Mx({},D),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},b);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:P,style:N,ref:w},a)}}var XQ=()=>{var t;return(t=qe(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function yP(){return yP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yP.apply(null,arguments)}function qF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qF(Object(n),!0).forEach(function(r){qCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qCe(t,e,n){return(e=GCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GCe(t){var e=HCe(t,"string");return typeof e=="symbol"?e:e+""}function HCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HF={curveBasisClosed:TEe,curveBasisOpen:AEe,curveBasis:EEe,curveBumpX:uEe,curveBumpY:dEe,curveLinearClosed:kEe,curveLinear:S_,curveMonotoneX:CEe,curveMonotoneY:IEe,curveNatural:NEe,curveStep:PEe,curveStepAfter:DEe,curveStepBefore:OEe},K1=t=>vt(t.x)&&vt(t.y),KF=t=>t.base!=null&&K1(t.base)&&K1(t),Om=t=>t.x,Dm=t=>t.y,KCe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Z0(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=HF["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return HF[n]||S_},WF={connectNulls:!1,type:"linear"},WCe=t=>{var{type:e=WF.type,points:n=[],baseLine:r,layout:i,connectNulls:a=WF.connectNulls}=t,s=KCe(e,i),o=a?n.filter(K1):n;if(Array.isArray(r)){var c,u=n.map((b,x)=>GF(GF({},b),{},{base:r[x]}));i==="vertical"?c=kx().y(Dm).x1(Om).x0(b=>b.base.x):c=kx().x(Om).y1(Dm).y0(b=>b.base.y);var f=c.defined(KF).curve(s),h=a?u.filter(KF):u;return f(h)}var g;i==="vertical"&&He(r)?g=kx().y(Dm).x1(Om).x0(r):He(r)?g=kx().x(Om).y1(Dm).y0(r):g=_X().x(Om).y(Dm);var v=g.defined(K1).curve(s);return v(o)},uR=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=lg();if((!n||!n.length)&&!r)return null;var s={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},o=n&&n.length?WCe(s):r;return A.createElement("path",yP({},Cs(t),rTe(t),{className:Vt("recharts-curve",e),d:o===null?void 0:o,ref:i}))},YCe=["x","y","top","left","width","height","className"];function bP(){return bP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bP.apply(null,arguments)}function YF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XCe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YF(Object(n),!0).forEach(function(r){QCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QCe(t,e,n){return(e=ZCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZCe(t){var e=JCe(t,"string");return typeof e=="symbol"?e:e+""}function JCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eIe(t,e){if(t==null)return{};var n,r,i=tIe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tIe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var nIe=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),rIe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:s=0,className:o}=t,c=eIe(t,YCe),u=XCe({x:e,y:n,top:r,left:i,width:a,height:s},c);return!He(e)||!He(n)||!He(a)||!He(s)||!He(r)||!He(i)?null:A.createElement("path",bP({},ga(u),{className:Vt("recharts-cross",o),d:nIe(e,n,a,s,r,i)}))};function iIe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function XF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XF(Object(n),!0).forEach(function(r){aIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aIe(t,e,n){return(e=sIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sIe(t){var e=oIe(t,"string");return typeof e=="symbol"?e:e+""}function oIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lIe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),QQ=(t,e,n)=>t.map(r=>"".concat(lIe(r)," ").concat(e,"ms ").concat(n)).join(","),cIe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),c0=(t,e)=>Object.keys(e).reduce((n,r)=>QF(QF({},n),{},{[r]:t(r,e[r])}),{});function ZF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZF(Object(n),!0).forEach(function(r){uIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uIe(t,e,n){return(e=dIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dIe(t){var e=fIe(t,"string");return typeof e=="symbol"?e:e+""}function fIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W1=(t,e,n)=>t+(e-t)*n,xP=t=>{var{from:e,to:n}=t;return e!==n},ZQ=(t,e,n)=>{var r=c0((i,a)=>{if(xP(a)){var[s,o]=t(a.from,a.to,a.velocity);return gr(gr({},a),{},{from:s,velocity:o})}return a},e);return n<1?c0((i,a)=>xP(a)&&r[i]!=null?gr(gr({},a),{},{velocity:W1(a.velocity,r[i].velocity,n),from:W1(a.from,r[i].from,n)}):a,e):ZQ(t,r,n-1)};function hIe(t,e,n,r,i,a){var s,o=r.reduce((g,v)=>gr(gr({},g),{},{[v]:{from:t[v],velocity:0,to:e[v]}}),{}),c=()=>c0((g,v)=>v.from,o),u=()=>!Object.values(o).filter(xP).length,f=null,h=g=>{s||(s=g);var v=g-s,b=v/n.dt;o=ZQ(n,o,b),i(gr(gr(gr({},t),e),c())),s=g,u()||(f=a.setTimeout(h))};return()=>(f=a.setTimeout(h),()=>{var g;(g=f)===null||g===void 0||g()})}function pIe(t,e,n,r,i,a,s){var o=null,c=i.reduce((h,g)=>{var v=t[g],b=e[g];return v==null||b==null?h:gr(gr({},h),{},{[g]:[v,b]})},{}),u,f=h=>{u||(u=h);var g=(h-u)/r,v=c0((x,w)=>W1(...w,n(g)),c);if(a(gr(gr(gr({},t),e),v)),g<1)o=s.setTimeout(f);else{var b=c0((x,w)=>W1(...w,n(1)),c);a(gr(gr(gr({},t),e),b))}};return()=>(o=s.setTimeout(f),()=>{var h;(h=o)===null||h===void 0||h()})}const gIe=(t,e,n,r,i,a)=>{var s=cIe(t,e);return n==null?()=>(i(gr(gr({},t),e)),()=>{}):n.isStepper===!0?hIe(t,e,n,s,i,a):pIe(t,e,n,r,s,i,a)};var Y1=1e-4,JQ=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],eZ=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),JF=(t,e)=>n=>{var r=JQ(t,e);return eZ(r,n)},mIe=(t,e)=>n=>{var r=JQ(t,e),i=[...r.map((a,s)=>a*s).slice(1),0];return eZ(i,n)},vIe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},yIe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=vIe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},bIe=(t,e,n,r)=>{var i=JF(t,n),a=JF(e,r),s=mIe(t,n),o=u=>u>1?1:u<0?0:u,c=u=>{for(var f=u>1?1:u,h=f,g=0;g<8;++g){var v=i(h)-f,b=s(h);if(Math.abs(v-f)<Y1||b<Y1)return a(h);h=o(h-v/b)}return a(h)};return c.isStepper=!1,c},e$=function(){return bIe(...yIe(...arguments))},xIe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(s,o,c)=>{var u=-(s-o)*n,f=c*r,h=c+(u-f)*i/1e3,g=c*i/1e3+s;return Math.abs(g-o)<Y1&&Math.abs(h)<Y1?[o,0]:[g,h]};return a.isStepper=!0,a.dt=i,a},wIe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return e$(t);case"spring":return xIe();default:if(t.split("(")[0]==="cubic-bezier")return e$(t)}return typeof t=="function"?t:null};function SIe(t){var e,n=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){i=t.setTimeout(a.bind(null,u),c);return}a(c),i=t.setTimeout(a.bind(null,u));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class _Ie{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function EIe(){return SIe(new _Ie)}var TIe=A.createContext(EIe);function AIe(t,e){var n=A.useContext(TIe);return A.useMemo(()=>e??n(t),[t,e,n])}var kIe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),$_={isSsr:kIe()},CIe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},t$={t:0},PC={t:1};function U_(t){var e=Sr(t,CIe),{isActive:n,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=e,f=n==="auto"?!$_.isSsr:n,h=AIe(e.animationId,e.animationManager),[g,v]=A.useState(f?t$:PC),b=A.useRef(null);return A.useEffect(()=>{f||v(PC)},[f]),A.useEffect(()=>{if(!f||!r)return og;var x=gIe(t$,PC,wIe(a),i,v,h.getTimeoutController()),w=()=>{b.current=x()};return h.start([c,s,w,i,o]),()=>{h.stop(),b.current&&b.current(),o()}},[f,r,i,a,s,c,o,h]),u(g.t)}function q_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(n0(e)),r=A.useRef(t);return r.current!==t&&(n.current=n0(e),r.current=t),n.current}var IIe=["radius"],NIe=["radius"],n$,r$,i$,a$,s$,o$,l$,c$,u$,d$;function f$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f$(Object(n),!0).forEach(function(r){PIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PIe(t,e,n){return(e=OIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OIe(t){var e=DIe(t,"string");return typeof e=="symbol"?e:e+""}function DIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X1(){return X1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X1.apply(null,arguments)}function p$(t,e){if(t==null)return{};var n,r,i=RIe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function RIe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Js(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var g$=(t,e,n,r,i)=>{var a=$c(n),s=$c(r),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,u=a>=0?1:-1,f=s>=0&&a>=0||s<0&&a<0?1:0,h;if(o>0&&Array.isArray(i)){for(var g=[0,0,0,0],v=0,b=4;v<b;v++){var x,w=(x=i[v])!==null&&x!==void 0?x:0;g[v]=w>o?o:w}h=Mn(n$||(n$=Js(["M",",",""])),t,e+c*g[0]),g[0]>0&&(h+=Mn(r$||(r$=Js(["A ",",",",0,0,",",",",",""])),g[0],g[0],f,t+u*g[0],e)),h+=Mn(i$||(i$=Js(["L ",",",""])),t+n-u*g[1],e),g[1]>0&&(h+=Mn(a$||(a$=Js(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],f,t+n,e+c*g[1])),h+=Mn(s$||(s$=Js(["L ",",",""])),t+n,e+r-c*g[2]),g[2]>0&&(h+=Mn(o$||(o$=Js(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],f,t+n-u*g[2],e+r)),h+=Mn(l$||(l$=Js(["L ",",",""])),t+u*g[3],e+r),g[3]>0&&(h+=Mn(c$||(c$=Js(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],f,t,e+r-c*g[3])),h+="Z"}else if(o>0&&i===+i&&i>0){var S=Math.min(o,i);h=Mn(u$||(u$=Js(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*S,S,S,f,t+u*S,e,t+n-u*S,e,S,S,f,t+n,e+c*S,t+n,e+r-c*S,S,S,f,t+n-u*S,e+r,t+u*S,e+r,S,S,f,t,e+r-c*S)}else h=Mn(d$||(d$=Js(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},m$={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tZ=t=>{var e=Sr(t,m$),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var X=n.current.getTotalLength();X&&i(X)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:u,className:f}=e,{animationEasing:h,animationDuration:g,animationBegin:v,isAnimationActive:b,isUpdateAnimationActive:x}=e,w=A.useRef(o),S=A.useRef(c),T=A.useRef(a),I=A.useRef(s),P=A.useMemo(()=>({x:a,y:s,width:o,height:c,radius:u}),[a,s,o,c,u]),O=q_(P,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var D=Vt("recharts-rectangle",f);if(!x){var N=ga(e),{radius:C}=N,R=p$(N,IIe);return A.createElement("path",X1({},R,{x:$c(a),y:$c(s),width:$c(o),height:$c(c),radius:typeof u=="number"?u:void 0,className:D,d:g$(a,s,o,c,u)}))}var M=w.current,V=S.current,L=T.current,z=I.current,K="0px ".concat(r===-1?1:r,"px"),Y="".concat(r,"px 0px"),G=QQ(["strokeDasharray"],g,typeof h=="string"?h:m$.animationEasing);return A.createElement(U_,{animationId:O,key:O,canBegin:r>0,duration:g,easing:h,isActive:x,begin:v},X=>{var J=pr(M,o,X),ne=pr(V,c,X),Q=pr(L,a,X),$=pr(z,s,X);n.current&&(w.current=J,S.current=ne,T.current=Q,I.current=$);var Z;b?X>0?Z={transition:G,strokeDasharray:Y}:Z={strokeDasharray:K}:Z={strokeDasharray:Y};var ee=ga(e),{radius:W}=ee,ue=p$(ee,NIe);return A.createElement("path",X1({},ue,{radius:typeof u=="number"?u:void 0,className:D,d:g$(Q,$,J,ne,u),ref:n,style:h$(h$({},Z),e.style)}))})};function v$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function y$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v$(Object(n),!0).forEach(function(r){MIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MIe(t,e,n){return(e=jIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jIe(t){var e=zIe(t,"string");return typeof e=="symbol"?e:e+""}function zIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Q1=Math.PI/180,LIe=t=>t*180/Math.PI,sr=(t,e,n,r)=>({x:t+Math.cos(-Q1*r)*n,y:e+Math.sin(-Q1*r)*n}),nZ=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},VIe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},BIe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,s=VIe({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(n-i)/s,c=Math.acos(o);return r>a&&(c=2*Math.PI-c),{radius:s,angle:LIe(c),angleInRadian:c}},FIe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},$Ie=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return t+s*360},UIe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=BIe({x:n,y:r},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:u}=FIe(e),f=a,h;if(c<=u){for(;f>u;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=u}else{for(;f>c;)f-=360;for(;f<u;)f+=360;h=f>=u&&f<=c}return h?y$(y$({},e),{},{radius:i,angle:$Ie(f,e)}):null};function rZ(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,s=sr(e,n,r,i),o=sr(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var b$,x$,w$,S$,_$,E$,T$;function wP(){return wP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wP.apply(null,arguments)}function wd(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var qIe=(t,e)=>{var n=Dr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},jx=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=t,u=o*(s?1:-1)+r,f=Math.asin(o/u)/Q1,h=c?i:i+a*f,g=sr(e,n,u,h),v=sr(e,n,r,h),b=c?i-a*f:i,x=sr(e,n,u*Math.cos(f*Q1),b);return{center:g,circleTangency:v,lineTangency:x,theta:f}},iZ=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=t,o=qIe(a,s),c=a+o,u=sr(e,n,i,a),f=sr(e,n,i,c),h=Mn(b$||(b$=wd(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(o)>180),+(a>c),f.x,f.y);if(r>0){var g=sr(e,n,r,a),v=sr(e,n,r,c);h+=Mn(x$||(x$=wd(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,r,r,+(Math.abs(o)>180),+(a<=c),g.x,g.y)}else h+=Mn(w$||(w$=wd(["L ",","," Z"])),e,n);return h},GIe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=t,f=Dr(u-c),{circleTangency:h,lineTangency:g,theta:v}=jx({cx:e,cy:n,radius:i,angle:c,sign:f,cornerRadius:a,cornerIsExternal:o}),{circleTangency:b,lineTangency:x,theta:w}=jx({cx:e,cy:n,radius:i,angle:u,sign:-f,cornerRadius:a,cornerIsExternal:o}),S=o?Math.abs(c-u):Math.abs(c-u)-v-w;if(S<0)return s?Mn(S$||(S$=wd(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,a,a,a*2,a,a,-a*2):iZ({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:u});var T=Mn(_$||(_$=wd(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,a,a,+(f<0),h.x,h.y,i,i,+(S>180),+(f<0),b.x,b.y,a,a,+(f<0),x.x,x.y);if(r>0){var{circleTangency:I,lineTangency:P,theta:O}=jx({cx:e,cy:n,radius:r,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:D,lineTangency:N,theta:C}=jx({cx:e,cy:n,radius:r,angle:u,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),R=o?Math.abs(c-u):Math.abs(c-u)-O-C;if(R<0&&a===0)return"".concat(T,"L").concat(e,",").concat(n,"Z");T+=Mn(E$||(E$=wd(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),N.x,N.y,a,a,+(f<0),D.x,D.y,r,r,+(R>180),+(f>0),I.x,I.y,a,a,+(f<0),P.x,P.y)}else T+=Mn(T$||(T$=wd(["L",",","Z"])),e,n);return T},HIe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},aZ=t=>{var e=Sr(t,HIe),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f,className:h}=e;if(a<i||u===f)return null;var g=Vt("recharts-sector",h),v=a-i,b=ai(s,v,0,!0),x;return b>0&&Math.abs(u-f)<360?x=GIe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(b,v/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f}):x=iZ({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f}),A.createElement("path",wP({},ga(e),{className:g,d:x}))};function KIe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(zX(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,c=sr(r,i,a,o),u=sr(r,i,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return rZ(e)}}var OC={},DC={},RC={},A$;function WIe(){return A$||(A$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WX();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(RC)),RC}var k$;function YIe(){return k$||(k$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WIe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(DC)),DC}var C$;function XIe(){return C$||(C$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YX(),n=YIe();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),s=s===void 0?i<a?1:-1:n.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=i,i+=s;return c}t.range=r})(OC)),OC}var MC,I$;function QIe(){return I$||(I$=1,MC=XIe().range),MC}var ZIe=QIe();const sZ=Ol(ZIe);function Yc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function JIe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function dR(t){let e,n,r;t.length!==2?(e=Yc,n=(o,c)=>Yc(t(o),c),r=(o,c)=>t(o)-c):(e=t===Yc||t===JIe?t:eNe,n=t,r=t);function i(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<0?u=h+1:f=h}while(u<f)}return u}function a(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<=0?u=h+1:f=h}while(u<f)}return u}function s(o,c,u=0,f=o.length){const h=i(o,c,u,f-1);return h>u&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function eNe(){return 0}function oZ(t){return t===null?NaN:+t}function*tNe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const nNe=dR(Yc),oy=nNe.right;dR(oZ).center;class N$ extends Map{constructor(e,n=aNe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(P$(this,e))}has(e){return super.has(P$(this,e))}set(e,n){return super.set(rNe(this,e),n)}delete(e){return super.delete(iNe(this,e))}}function P$({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function rNe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function iNe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function aNe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function sNe(t=Yc){if(t===Yc)return lZ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function lZ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const oNe=Math.sqrt(50),lNe=Math.sqrt(10),cNe=Math.sqrt(2);function Z1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=oNe?10:a>=lNe?5:a>=cNe?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?Z1(t,e,n*2):[o,c,u]}function SP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Z1(e,t,n):Z1(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function _P(t,e,n){return e=+e,t=+t,n=+n,Z1(t,e,n)[2]}function EP(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?_P(e,t,n):_P(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function O$(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function D$(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function cZ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?lZ:sNe(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,f=Math.log(c),h=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*h*(c-h)/c)*(u-c/2<0?-1:1),v=Math.max(n,Math.floor(e-u*h/c+g)),b=Math.min(r,Math.floor(e+(c-u)*h/c+g));cZ(t,e,v,b,i)}const a=t[e];let s=n,o=r;for(Rm(t,n,e),i(t[r],a)>0&&Rm(t,n,r);s<o;){for(Rm(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?Rm(t,n,o):(++o,Rm(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Rm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function uNe(t,e,n){if(t=Float64Array.from(tNe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return D$(t);if(e>=1)return O$(t);var r,i=(r-1)*e,a=Math.floor(i),s=O$(cZ(t,a).subarray(0,a+1)),o=D$(t.subarray(a+1));return s+(o-s)*(i-a)}}function dNe(t,e,n=oZ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function fNe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Xa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ll(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const TP=Symbol("implicit");function fR(){var t=new N$,e=[],n=[],r=TP;function i(a){let s=t.get(a);if(s===void 0){if(r!==TP)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new N$;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return fR(e,n).unknown(r)},Xa.apply(i,arguments),i}function hR(){var t=fR().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,f=.5;delete t.unknown;function h(){var g=e().length,v=i<r,b=v?i:r,x=v?r:i;a=(x-b)/Math.max(1,g-c+u*2),o&&(a=Math.floor(a)),b+=(x-b-a*(g-c))*f,s=a*(1-c),o&&(b=Math.round(b),s=Math.round(s));var w=fNe(g).map(function(S){return b+a*S});return n(v?w.reverse():w)}return t.domain=function(g){return arguments.length?(e(g),h()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(g){return arguments.length?(o=!!g,h()):o},t.padding=function(g){return arguments.length?(c=Math.min(1,u=+g),h()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),h()):c},t.paddingOuter=function(g){return arguments.length?(u=+g,h()):u},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),h()):f},t.copy=function(){return hR(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(f)},Xa.apply(h(),arguments)}function uZ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return uZ(e())},t}function hNe(){return uZ(hR.apply(null,arguments).paddingInner(1))}function pR(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function dZ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ly(){}var u0=.7,J1=1/u0,Zh="\\s*([+-]?\\d+)\\s*",d0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pNe=/^#([0-9a-f]{3,8})$/,gNe=new RegExp(`^rgb\\(${Zh},${Zh},${Zh}\\)$`),mNe=new RegExp(`^rgb\\(${bo},${bo},${bo}\\)$`),vNe=new RegExp(`^rgba\\(${Zh},${Zh},${Zh},${d0}\\)$`),yNe=new RegExp(`^rgba\\(${bo},${bo},${bo},${d0}\\)$`),bNe=new RegExp(`^hsl\\(${d0},${bo},${bo}\\)$`),xNe=new RegExp(`^hsla\\(${d0},${bo},${bo},${d0}\\)$`),R$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pR(ly,f0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:M$,formatHex:M$,formatHex8:wNe,formatHsl:SNe,formatRgb:j$,toString:j$});function M$(){return this.rgb().formatHex()}function wNe(){return this.rgb().formatHex8()}function SNe(){return fZ(this).formatHsl()}function j$(){return this.rgb().formatRgb()}function f0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=pNe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?z$(e):n===3?new Bi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?zx(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?zx(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gNe.exec(t))?new Bi(e[1],e[2],e[3],1):(e=mNe.exec(t))?new Bi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vNe.exec(t))?zx(e[1],e[2],e[3],e[4]):(e=yNe.exec(t))?zx(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bNe.exec(t))?B$(e[1],e[2]/100,e[3]/100,1):(e=xNe.exec(t))?B$(e[1],e[2]/100,e[3]/100,e[4]):R$.hasOwnProperty(t)?z$(R$[t]):t==="transparent"?new Bi(NaN,NaN,NaN,0):null}function z$(t){return new Bi(t>>16&255,t>>8&255,t&255,1)}function zx(t,e,n,r){return r<=0&&(t=e=n=NaN),new Bi(t,e,n,r)}function _Ne(t){return t instanceof ly||(t=f0(t)),t?(t=t.rgb(),new Bi(t.r,t.g,t.b,t.opacity)):new Bi}function AP(t,e,n,r){return arguments.length===1?_Ne(t):new Bi(t,e,n,r??1)}function Bi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}pR(Bi,AP,dZ(ly,{brighter(t){return t=t==null?J1:Math.pow(J1,t),new Bi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?u0:Math.pow(u0,t),new Bi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bi(Dd(this.r),Dd(this.g),Dd(this.b),eS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:L$,formatHex:L$,formatHex8:ENe,formatRgb:V$,toString:V$}));function L$(){return`#${Sd(this.r)}${Sd(this.g)}${Sd(this.b)}`}function ENe(){return`#${Sd(this.r)}${Sd(this.g)}${Sd(this.b)}${Sd((isNaN(this.opacity)?1:this.opacity)*255)}`}function V$(){const t=eS(this.opacity);return`${t===1?"rgb(":"rgba("}${Dd(this.r)}, ${Dd(this.g)}, ${Dd(this.b)}${t===1?")":`, ${t})`}`}function eS(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Dd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Sd(t){return t=Dd(t),(t<16?"0":"")+t.toString(16)}function B$(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new gs(t,e,n,r)}function fZ(t){if(t instanceof gs)return new gs(t.h,t.s,t.l,t.opacity);if(t instanceof ly||(t=f0(t)),!t)return new gs;if(t instanceof gs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new gs(s,o,c,t.opacity)}function TNe(t,e,n,r){return arguments.length===1?fZ(t):new gs(t,e,n,r??1)}function gs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}pR(gs,TNe,dZ(ly,{brighter(t){return t=t==null?J1:Math.pow(J1,t),new gs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?u0:Math.pow(u0,t),new gs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Bi(jC(t>=240?t-240:t+120,i,r),jC(t,i,r),jC(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new gs(F$(this.h),Lx(this.s),Lx(this.l),eS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=eS(this.opacity);return`${t===1?"hsl(":"hsla("}${F$(this.h)}, ${Lx(this.s)*100}%, ${Lx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function F$(t){return t=(t||0)%360,t<0?t+360:t}function Lx(t){return Math.max(0,Math.min(1,t||0))}function jC(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const gR=t=>()=>t;function ANe(t,e){return function(n){return t+n*e}}function kNe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function CNe(t){return(t=+t)==1?hZ:function(e,n){return n-e?kNe(e,n,t):gR(isNaN(e)?n:e)}}function hZ(t,e){var n=e-t;return n?ANe(t,n):gR(isNaN(t)?e:t)}const $$=(function t(e){var n=CNe(e);function r(i,a){var s=n((i=AP(i)).r,(a=AP(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=hZ(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function INe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function NNe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function PNe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=cg(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function ONe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function tS(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function DNe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=cg(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var kP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zC=new RegExp(kP.source,"g");function RNe(t){return function(){return t}}function MNe(t){return function(e){return t(e)+""}}function jNe(t,e){var n=kP.lastIndex=zC.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=kP.exec(t))&&(i=zC.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:tS(r,i)})),n=zC.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?MNe(c[0].x):RNe(e):(e=c.length,function(u){for(var f=0,h;f<e;++f)o[(h=c[f]).i]=h.x(u);return o.join("")})}function cg(t,e){var n=typeof e,r;return e==null||n==="boolean"?gR(e):(n==="number"?tS:n==="string"?(r=f0(e))?(e=r,$$):jNe:e instanceof f0?$$:e instanceof Date?ONe:NNe(e)?INe:Array.isArray(e)?PNe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?DNe:tS)(t,e)}function mR(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function zNe(t,e){e===void 0&&(e=t,t=cg);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function LNe(t){return function(){return t}}function nS(t){return+t}var U$=[0,1];function xi(t){return t}function CP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:LNe(isNaN(e)?NaN:.5)}function VNe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function BNe(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=CP(i,r),a=n(s,a)):(r=CP(r,i),a=n(a,s)),function(o){return a(r(o))}}function FNe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=CP(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=oy(t,o,1,r)-1;return a[c](i[c](o))}}function cy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function G_(){var t=U$,e=U$,n=cg,r,i,a,s=xi,o,c,u;function f(){var g=Math.min(t.length,e.length);return s!==xi&&(s=VNe(t[0],t[g-1])),o=g>2?FNe:BNe,c=u=null,h}function h(g){return g==null||isNaN(g=+g)?a:(c||(c=o(t.map(r),e,n)))(r(s(g)))}return h.invert=function(g){return s(i((u||(u=o(e,t.map(r),tS)))(g)))},h.domain=function(g){return arguments.length?(t=Array.from(g,nS),f()):t.slice()},h.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},h.rangeRound=function(g){return e=Array.from(g),n=mR,f()},h.clamp=function(g){return arguments.length?(s=g?!0:xi,f()):s!==xi},h.interpolate=function(g){return arguments.length?(n=g,f()):n},h.unknown=function(g){return arguments.length?(a=g,h):a},function(g,v){return r=g,i=v,f()}}function vR(){return G_()(xi,xi)}function $Ne(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function rS(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Rp(t){return t=rS(Math.abs(t)),t?t[1]:NaN}function UNe(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function qNe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var GNe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function h0(t){if(!(e=GNe.exec(t)))throw new Error("invalid format: "+t);var e;return new yR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}h0.prototype=yR.prototype;function yR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}yR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function HNe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var iS;function KNe(t,e){var n=rS(t,e);if(!n)return iS=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-(iS=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+rS(t,Math.max(0,e+a-1))[0]}function q$(t,e){var n=rS(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const G$={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:$Ne,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>q$(t*100,e),r:q$,s:KNe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function H$(t){return t}var K$=Array.prototype.map,W$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function WNe(t){var e=t.grouping===void 0||t.thousands===void 0?H$:UNe(K$.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?H$:qNe(K$.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h,g){h=h0(h);var v=h.fill,b=h.align,x=h.sign,w=h.symbol,S=h.zero,T=h.width,I=h.comma,P=h.precision,O=h.trim,D=h.type;D==="n"?(I=!0,D="g"):G$[D]||(P===void 0&&(P=12),O=!0,D="g"),(S||v==="0"&&b==="=")&&(S=!0,v="0",b="=");var N=(g&&g.prefix!==void 0?g.prefix:"")+(w==="$"?n:w==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():""),C=(w==="$"?r:/[%p]/.test(D)?s:"")+(g&&g.suffix!==void 0?g.suffix:""),R=G$[D],M=/[defgprs%]/.test(D);P=P===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function V(L){var z=N,K=C,Y,G,X;if(D==="c")K=R(L)+K,L="";else{L=+L;var J=L<0||1/L<0;if(L=isNaN(L)?c:R(Math.abs(L),P),O&&(L=HNe(L)),J&&+L==0&&x!=="+"&&(J=!1),z=(J?x==="("?x:o:x==="-"||x==="("?"":x)+z,K=(D==="s"&&!isNaN(L)&&iS!==void 0?W$[8+iS/3]:"")+K+(J&&x==="("?")":""),M){for(Y=-1,G=L.length;++Y<G;)if(X=L.charCodeAt(Y),48>X||X>57){K=(X===46?i+L.slice(Y+1):L.slice(Y))+K,L=L.slice(0,Y);break}}}I&&!S&&(L=e(L,1/0));var ne=z.length+L.length+K.length,Q=ne<T?new Array(T-ne+1).join(v):"";switch(I&&S&&(L=e(Q+L,Q.length?T-K.length:1/0),Q=""),b){case"<":L=z+L+K+Q;break;case"=":L=z+Q+L+K;break;case"^":L=Q.slice(0,ne=Q.length>>1)+z+L+K+Q.slice(ne);break;default:L=Q+z+L+K;break}return a(L)}return V.toString=function(){return h+""},V}function f(h,g){var v=Math.max(-8,Math.min(8,Math.floor(Rp(g)/3)))*3,b=Math.pow(10,-v),x=u((h=h0(h),h.type="f",h),{suffix:W$[8+v/3]});return function(w){return x(b*w)}}return{format:u,formatPrefix:f}}var Vx,bR,pZ;YNe({thousands:",",grouping:[3],currency:["$",""]});function YNe(t){return Vx=WNe(t),bR=Vx.format,pZ=Vx.formatPrefix,Vx}function XNe(t){return Math.max(0,-Rp(Math.abs(t)))}function QNe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rp(e)/3)))*3-Rp(Math.abs(t)))}function ZNe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Rp(e)-Rp(t))+1}function gZ(t,e,n,r){var i=EP(t,e,n),a;switch(r=h0(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=QNe(i,s))&&(r.precision=a),pZ(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=ZNe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=XNe(i))&&(r.precision=a-(r.type==="%")*2);break}}return bR(r)}function bu(t){var e=t.domain;return t.ticks=function(n){var r=e();return SP(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return gZ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,f=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=_P(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function mZ(){var t=vR();return t.copy=function(){return cy(t,mZ())},Xa.apply(t,arguments),bu(t)}function vZ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,nS),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return vZ(t).unknown(e)},t=arguments.length?Array.from(t,nS):[0,1],bu(n)}function yZ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function Y$(t){return Math.log(t)}function X$(t){return Math.exp(t)}function JNe(t){return-Math.log(-t)}function ePe(t){return-Math.exp(-t)}function tPe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function nPe(t){return t===10?tPe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function rPe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Q$(t){return(e,n)=>-t(-e,n)}function xR(t){const e=t(Y$,X$),n=e.domain;let r=10,i,a;function s(){return i=rPe(r),a=nPe(r),n()[0]<0?(i=Q$(i),a=Q$(a),t(JNe,ePe)):t(Y$,X$),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],f=c[c.length-1];const h=f<u;h&&([u,f]=[f,u]);let g=i(u),v=i(f),b,x;const w=o==null?10:+o;let S=[];if(!(r%1)&&v-g<w){if(g=Math.floor(g),v=Math.ceil(v),u>0){for(;g<=v;++g)for(b=1;b<r;++b)if(x=g<0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}}else for(;g<=v;++g)for(b=r-1;b>=1;--b)if(x=g>0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}S.length*2<w&&(S=SP(u,f,w))}else S=SP(g,v,Math.min(v-g,w)).map(a);return h?S.reverse():S},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=h0(c)).precision==null&&(c.trim=!0),c=bR(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?c(f):""}},e.nice=()=>n(yZ(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function bZ(){const t=xR(G_()).domain([1,10]);return t.copy=()=>cy(t,bZ()).base(t.base()),Xa.apply(t,arguments),t}function Z$(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function J$(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function wR(t){var e=1,n=t(Z$(e),J$(e));return n.constant=function(r){return arguments.length?t(Z$(e=+r),J$(e)):e},bu(n)}function xZ(){var t=wR(G_());return t.copy=function(){return cy(t,xZ()).constant(t.constant())},Xa.apply(t,arguments)}function eU(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function iPe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function aPe(t){return t<0?-t*t:t*t}function SR(t){var e=t(xi,xi),n=1;function r(){return n===1?t(xi,xi):n===.5?t(iPe,aPe):t(eU(n),eU(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},bu(e)}function _R(){var t=SR(G_());return t.copy=function(){return cy(t,_R()).exponent(t.exponent())},Xa.apply(t,arguments),t}function sPe(){return _R.apply(null,arguments).exponent(.5)}function tU(t){return Math.sign(t)*t*t}function oPe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function wZ(){var t=vR(),e=[0,1],n=!1,r;function i(a){var s=oPe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(tU(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,nS)).map(tU)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return wZ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Xa.apply(i,arguments),bu(i)}function SZ(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=dNe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[oy(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Yc),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return SZ().domain(t).range(e).unknown(r)},Xa.apply(a,arguments)}function _Z(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[oy(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return _Z().domain([t,e]).range(i).unknown(a)},Xa.apply(bu(s),arguments)}function EZ(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[oy(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return EZ().domain(t).range(e).unknown(n)},Xa.apply(i,arguments)}const LC=new Date,VC=new Date;function Er(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>Er(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(LC.setTime(+a),VC.setTime(+s),t(LC),t(VC),Math.floor(n(LC,VC))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const aS=Er(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);aS.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Er(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):aS);aS.range;const ol=1e3,La=ol*60,ll=La*60,Al=ll*24,ER=Al*7,nU=Al*30,BC=Al*365,_d=Er(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ol)},(t,e)=>(e-t)/ol,t=>t.getUTCSeconds());_d.range;const TR=Er(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ol)},(t,e)=>{t.setTime(+t+e*La)},(t,e)=>(e-t)/La,t=>t.getMinutes());TR.range;const AR=Er(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*La)},(t,e)=>(e-t)/La,t=>t.getUTCMinutes());AR.range;const kR=Er(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ol-t.getMinutes()*La)},(t,e)=>{t.setTime(+t+e*ll)},(t,e)=>(e-t)/ll,t=>t.getHours());kR.range;const CR=Er(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ll)},(t,e)=>(e-t)/ll,t=>t.getUTCHours());CR.range;const uy=Er(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*La)/Al,t=>t.getDate()-1);uy.range;const H_=Er(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Al,t=>t.getUTCDate()-1);H_.range;const TZ=Er(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Al,t=>Math.floor(t/Al));TZ.range;function pf(t){return Er(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*La)/ER)}const K_=pf(0),sS=pf(1),lPe=pf(2),cPe=pf(3),Mp=pf(4),uPe=pf(5),dPe=pf(6);K_.range;sS.range;lPe.range;cPe.range;Mp.range;uPe.range;dPe.range;function gf(t){return Er(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/ER)}const W_=gf(0),oS=gf(1),fPe=gf(2),hPe=gf(3),jp=gf(4),pPe=gf(5),gPe=gf(6);W_.range;oS.range;fPe.range;hPe.range;jp.range;pPe.range;gPe.range;const IR=Er(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());IR.range;const NR=Er(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());NR.range;const kl=Er(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());kl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Er(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});kl.range;const Cl=Er(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Cl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Er(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Cl.range;function AZ(t,e,n,r,i,a){const s=[[_d,1,ol],[_d,5,5*ol],[_d,15,15*ol],[_d,30,30*ol],[a,1,La],[a,5,5*La],[a,15,15*La],[a,30,30*La],[i,1,ll],[i,3,3*ll],[i,6,6*ll],[i,12,12*ll],[r,1,Al],[r,2,2*Al],[n,1,ER],[e,1,nU],[e,3,3*nU],[t,1,BC]];function o(u,f,h){const g=f<u;g&&([u,f]=[f,u]);const v=h&&typeof h.range=="function"?h:c(u,f,h),b=v?v.range(u,+f+1):[];return g?b.reverse():b}function c(u,f,h){const g=Math.abs(f-u)/h,v=dR(([,,w])=>w).right(s,g);if(v===s.length)return t.every(EP(u/BC,f/BC,h));if(v===0)return aS.every(Math.max(EP(u,f,h),1));const[b,x]=s[g/s[v-1][2]<s[v][2]/g?v-1:v];return b.every(x)}return[o,c]}const[mPe,vPe]=AZ(Cl,NR,W_,TZ,CR,AR),[yPe,bPe]=AZ(kl,IR,K_,uy,kR,TR);function FC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function $C(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Mm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function xPe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=jm(i),f=zm(i),h=jm(a),g=zm(a),v=jm(s),b=zm(s),x=jm(o),w=zm(o),S=jm(c),T=zm(c),I={a:X,A:J,b:ne,B:Q,c:null,d:lU,e:lU,f:UPe,g:JPe,G:t2e,H:BPe,I:FPe,j:$Pe,L:kZ,m:qPe,M:GPe,p:$,q:Z,Q:dU,s:fU,S:HPe,u:KPe,U:WPe,V:YPe,w:XPe,W:QPe,x:null,X:null,y:ZPe,Y:e2e,Z:n2e,"%":uU},P={a:ee,A:W,b:ue,B:ie,c:null,d:cU,e:cU,f:s2e,g:m2e,G:y2e,H:r2e,I:i2e,j:a2e,L:IZ,m:o2e,M:l2e,p:oe,q:Se,Q:dU,s:fU,S:c2e,u:u2e,U:d2e,V:f2e,w:h2e,W:p2e,x:null,X:null,y:g2e,Y:v2e,Z:b2e,"%":uU},O={a:M,A:V,b:L,B:z,c:K,d:sU,e:sU,f:jPe,g:aU,G:iU,H:oU,I:oU,j:OPe,L:MPe,m:PPe,M:DPe,p:R,q:NPe,Q:LPe,s:VPe,S:RPe,u:TPe,U:APe,V:kPe,w:EPe,W:CPe,x:Y,X:G,y:aU,Y:iU,Z:IPe,"%":zPe};I.x=D(n,I),I.X=D(r,I),I.c=D(e,I),P.x=D(n,P),P.X=D(r,P),P.c=D(e,P);function D(ae,Te){return function(he){var te=[],Pe=-1,be=0,ke=ae.length,Oe,De,Ye;for(he instanceof Date||(he=new Date(+he));++Pe<ke;)ae.charCodeAt(Pe)===37&&(te.push(ae.slice(be,Pe)),(De=rU[Oe=ae.charAt(++Pe)])!=null?Oe=ae.charAt(++Pe):De=Oe==="e"?" ":"0",(Ye=Te[Oe])&&(Oe=Ye(he,De)),te.push(Oe),be=Pe+1);return te.push(ae.slice(be,Pe)),te.join("")}}function N(ae,Te){return function(he){var te=Mm(1900,void 0,1),Pe=C(te,ae,he+="",0),be,ke;if(Pe!=he.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(Te&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(be=$C(Mm(te.y,0,1)),ke=be.getUTCDay(),be=ke>4||ke===0?oS.ceil(be):oS(be),be=H_.offset(be,(te.V-1)*7),te.y=be.getUTCFullYear(),te.m=be.getUTCMonth(),te.d=be.getUTCDate()+(te.w+6)%7):(be=FC(Mm(te.y,0,1)),ke=be.getDay(),be=ke>4||ke===0?sS.ceil(be):sS(be),be=uy.offset(be,(te.V-1)*7),te.y=be.getFullYear(),te.m=be.getMonth(),te.d=be.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),ke="Z"in te?$C(Mm(te.y,0,1)).getUTCDay():FC(Mm(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(ke+5)%7:te.w+te.U*7-(ke+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,$C(te)):FC(te)}}function C(ae,Te,he,te){for(var Pe=0,be=Te.length,ke=he.length,Oe,De;Pe<be;){if(te>=ke)return-1;if(Oe=Te.charCodeAt(Pe++),Oe===37){if(Oe=Te.charAt(Pe++),De=O[Oe in rU?Te.charAt(Pe++):Oe],!De||(te=De(ae,he,te))<0)return-1}else if(Oe!=he.charCodeAt(te++))return-1}return te}function R(ae,Te,he){var te=u.exec(Te.slice(he));return te?(ae.p=f.get(te[0].toLowerCase()),he+te[0].length):-1}function M(ae,Te,he){var te=v.exec(Te.slice(he));return te?(ae.w=b.get(te[0].toLowerCase()),he+te[0].length):-1}function V(ae,Te,he){var te=h.exec(Te.slice(he));return te?(ae.w=g.get(te[0].toLowerCase()),he+te[0].length):-1}function L(ae,Te,he){var te=S.exec(Te.slice(he));return te?(ae.m=T.get(te[0].toLowerCase()),he+te[0].length):-1}function z(ae,Te,he){var te=x.exec(Te.slice(he));return te?(ae.m=w.get(te[0].toLowerCase()),he+te[0].length):-1}function K(ae,Te,he){return C(ae,e,Te,he)}function Y(ae,Te,he){return C(ae,n,Te,he)}function G(ae,Te,he){return C(ae,r,Te,he)}function X(ae){return s[ae.getDay()]}function J(ae){return a[ae.getDay()]}function ne(ae){return c[ae.getMonth()]}function Q(ae){return o[ae.getMonth()]}function $(ae){return i[+(ae.getHours()>=12)]}function Z(ae){return 1+~~(ae.getMonth()/3)}function ee(ae){return s[ae.getUTCDay()]}function W(ae){return a[ae.getUTCDay()]}function ue(ae){return c[ae.getUTCMonth()]}function ie(ae){return o[ae.getUTCMonth()]}function oe(ae){return i[+(ae.getUTCHours()>=12)]}function Se(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var Te=D(ae+="",I);return Te.toString=function(){return ae},Te},parse:function(ae){var Te=N(ae+="",!1);return Te.toString=function(){return ae},Te},utcFormat:function(ae){var Te=D(ae+="",P);return Te.toString=function(){return ae},Te},utcParse:function(ae){var Te=N(ae+="",!0);return Te.toString=function(){return ae},Te}}}var rU={"-":"",_:" ",0:"0"},jr=/^\s*\d+/,wPe=/^%/,SPe=/[\\^$*+?|[\]().{}]/g;function Rt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function _Pe(t){return t.replace(SPe,"\\$&")}function jm(t){return new RegExp("^(?:"+t.map(_Pe).join("|")+")","i")}function zm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function EPe(t,e,n){var r=jr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function TPe(t,e,n){var r=jr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function APe(t,e,n){var r=jr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function kPe(t,e,n){var r=jr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function CPe(t,e,n){var r=jr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function iU(t,e,n){var r=jr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function aU(t,e,n){var r=jr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function IPe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function NPe(t,e,n){var r=jr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function PPe(t,e,n){var r=jr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function sU(t,e,n){var r=jr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function OPe(t,e,n){var r=jr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function oU(t,e,n){var r=jr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function DPe(t,e,n){var r=jr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function RPe(t,e,n){var r=jr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function MPe(t,e,n){var r=jr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function jPe(t,e,n){var r=jr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function zPe(t,e,n){var r=wPe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function LPe(t,e,n){var r=jr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function VPe(t,e,n){var r=jr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function lU(t,e){return Rt(t.getDate(),e,2)}function BPe(t,e){return Rt(t.getHours(),e,2)}function FPe(t,e){return Rt(t.getHours()%12||12,e,2)}function $Pe(t,e){return Rt(1+uy.count(kl(t),t),e,3)}function kZ(t,e){return Rt(t.getMilliseconds(),e,3)}function UPe(t,e){return kZ(t,e)+"000"}function qPe(t,e){return Rt(t.getMonth()+1,e,2)}function GPe(t,e){return Rt(t.getMinutes(),e,2)}function HPe(t,e){return Rt(t.getSeconds(),e,2)}function KPe(t){var e=t.getDay();return e===0?7:e}function WPe(t,e){return Rt(K_.count(kl(t)-1,t),e,2)}function CZ(t){var e=t.getDay();return e>=4||e===0?Mp(t):Mp.ceil(t)}function YPe(t,e){return t=CZ(t),Rt(Mp.count(kl(t),t)+(kl(t).getDay()===4),e,2)}function XPe(t){return t.getDay()}function QPe(t,e){return Rt(sS.count(kl(t)-1,t),e,2)}function ZPe(t,e){return Rt(t.getFullYear()%100,e,2)}function JPe(t,e){return t=CZ(t),Rt(t.getFullYear()%100,e,2)}function e2e(t,e){return Rt(t.getFullYear()%1e4,e,4)}function t2e(t,e){var n=t.getDay();return t=n>=4||n===0?Mp(t):Mp.ceil(t),Rt(t.getFullYear()%1e4,e,4)}function n2e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Rt(e/60|0,"0",2)+Rt(e%60,"0",2)}function cU(t,e){return Rt(t.getUTCDate(),e,2)}function r2e(t,e){return Rt(t.getUTCHours(),e,2)}function i2e(t,e){return Rt(t.getUTCHours()%12||12,e,2)}function a2e(t,e){return Rt(1+H_.count(Cl(t),t),e,3)}function IZ(t,e){return Rt(t.getUTCMilliseconds(),e,3)}function s2e(t,e){return IZ(t,e)+"000"}function o2e(t,e){return Rt(t.getUTCMonth()+1,e,2)}function l2e(t,e){return Rt(t.getUTCMinutes(),e,2)}function c2e(t,e){return Rt(t.getUTCSeconds(),e,2)}function u2e(t){var e=t.getUTCDay();return e===0?7:e}function d2e(t,e){return Rt(W_.count(Cl(t)-1,t),e,2)}function NZ(t){var e=t.getUTCDay();return e>=4||e===0?jp(t):jp.ceil(t)}function f2e(t,e){return t=NZ(t),Rt(jp.count(Cl(t),t)+(Cl(t).getUTCDay()===4),e,2)}function h2e(t){return t.getUTCDay()}function p2e(t,e){return Rt(oS.count(Cl(t)-1,t),e,2)}function g2e(t,e){return Rt(t.getUTCFullYear()%100,e,2)}function m2e(t,e){return t=NZ(t),Rt(t.getUTCFullYear()%100,e,2)}function v2e(t,e){return Rt(t.getUTCFullYear()%1e4,e,4)}function y2e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?jp(t):jp.ceil(t),Rt(t.getUTCFullYear()%1e4,e,4)}function b2e(){return"+0000"}function uU(){return"%"}function dU(t){return+t}function fU(t){return Math.floor(+t/1e3)}var vh,PZ,OZ;x2e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function x2e(t){return vh=xPe(t),PZ=vh.format,vh.parse,OZ=vh.utcFormat,vh.utcParse,vh}function w2e(t){return new Date(t)}function S2e(t){return t instanceof Date?+t:+new Date(+t)}function PR(t,e,n,r,i,a,s,o,c,u){var f=vR(),h=f.invert,g=f.domain,v=u(".%L"),b=u(":%S"),x=u("%I:%M"),w=u("%I %p"),S=u("%a %d"),T=u("%b %d"),I=u("%B"),P=u("%Y");function O(D){return(c(D)<D?v:o(D)<D?b:s(D)<D?x:a(D)<D?w:r(D)<D?i(D)<D?S:T:n(D)<D?I:P)(D)}return f.invert=function(D){return new Date(h(D))},f.domain=function(D){return arguments.length?g(Array.from(D,S2e)):g().map(w2e)},f.ticks=function(D){var N=g();return t(N[0],N[N.length-1],D??10)},f.tickFormat=function(D,N){return N==null?O:u(N)},f.nice=function(D){var N=g();return(!D||typeof D.range!="function")&&(D=e(N[0],N[N.length-1],D??10)),D?g(yZ(N,D)):f},f.copy=function(){return cy(f,PR(t,e,n,r,i,a,s,o,c,u))},f}function _2e(){return Xa.apply(PR(yPe,bPe,kl,IR,K_,uy,kR,TR,_d,PZ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function E2e(){return Xa.apply(PR(mPe,vPe,Cl,NR,W_,H_,CR,AR,_d,OZ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Y_(){var t=0,e=1,n,r,i,a,s=xi,o=!1,c;function u(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function f(h){return function(g){var v,b;return arguments.length?([v,b]=g,s=h(v,b),u):[s(0),s(1)]}}return u.range=f(cg),u.rangeRound=f(mR),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function xu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function DZ(){var t=bu(Y_()(xi));return t.copy=function(){return xu(t,DZ())},Ll.apply(t,arguments)}function RZ(){var t=xR(Y_()).domain([1,10]);return t.copy=function(){return xu(t,RZ()).base(t.base())},Ll.apply(t,arguments)}function MZ(){var t=wR(Y_());return t.copy=function(){return xu(t,MZ()).constant(t.constant())},Ll.apply(t,arguments)}function OR(){var t=SR(Y_());return t.copy=function(){return xu(t,OR()).exponent(t.exponent())},Ll.apply(t,arguments)}function T2e(){return OR.apply(null,arguments).exponent(.5)}function jZ(){var t=[],e=xi;function n(r){if(r!=null&&!isNaN(r=+r))return e((oy(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Yc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>uNe(t,a/r))},n.copy=function(){return jZ(e).domain(t)},Ll.apply(n,arguments)}function X_(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=xi,f,h=!1,g;function v(x){return isNaN(x=+x)?g:(x=.5+((x=+f(x))-a)*(r*x<r*a?o:c),u(h?Math.max(0,Math.min(1,x)):x))}v.domain=function(x){return arguments.length?([t,e,n]=x,i=f(t=+t),a=f(e=+e),s=f(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,v):[t,e,n]},v.clamp=function(x){return arguments.length?(h=!!x,v):h},v.interpolator=function(x){return arguments.length?(u=x,v):u};function b(x){return function(w){var S,T,I;return arguments.length?([S,T,I]=w,u=zNe(x,[S,T,I]),v):[u(0),u(.5),u(1)]}}return v.range=b(cg),v.rangeRound=b(mR),v.unknown=function(x){return arguments.length?(g=x,v):g},function(x){return f=x,i=x(t),a=x(e),s=x(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,v}}function zZ(){var t=bu(X_()(xi));return t.copy=function(){return xu(t,zZ())},Ll.apply(t,arguments)}function LZ(){var t=xR(X_()).domain([.1,1,10]);return t.copy=function(){return xu(t,LZ()).base(t.base())},Ll.apply(t,arguments)}function VZ(){var t=wR(X_());return t.copy=function(){return xu(t,VZ()).constant(t.constant())},Ll.apply(t,arguments)}function DR(){var t=SR(X_());return t.copy=function(){return xu(t,DR()).exponent(t.exponent())},Ll.apply(t,arguments)}function A2e(){return DR.apply(null,arguments).exponent(.5)}const Zm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:hR,scaleDiverging:zZ,scaleDivergingLog:LZ,scaleDivergingPow:DR,scaleDivergingSqrt:A2e,scaleDivergingSymlog:VZ,scaleIdentity:vZ,scaleImplicit:TP,scaleLinear:mZ,scaleLog:bZ,scaleOrdinal:fR,scalePoint:hNe,scalePow:_R,scaleQuantile:SZ,scaleQuantize:_Z,scaleRadial:wZ,scaleSequential:DZ,scaleSequentialLog:RZ,scaleSequentialPow:OR,scaleSequentialQuantile:jZ,scaleSequentialSqrt:T2e,scaleSequentialSymlog:MZ,scaleSqrt:sPe,scaleSymlog:xZ,scaleThreshold:EZ,scaleTime:_2e,scaleUtc:E2e,tickFormat:gZ},Symbol.toStringTag,{value:"Module"}));var Vl=t=>t.chartData,Q_=ve([Vl],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),BZ=(t,e,n,r)=>r?Q_(t):Vl(t),k2e=(t,e,n)=>n?Q_(t):Vl(t);function Il(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(vt(e)&&vt(n))return!0}return!1}function hU(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function FZ(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(vt(n))i=n;else if(typeof n=="function")return;if(vt(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(Il(s))return s}}function C2e(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Il(r))return hU(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(He(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&_F.test(i)){var c=_F.exec(i);if(c==null||c[1]==null||e==null)s=void 0;else{var u=+c[1];s=e[0]-u}}else s=e?.[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(He(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e?.[1]))}catch{}else if(typeof a=="string"&&EF.test(a)){var f=EF.exec(a);if(f==null||f[1]==null||e==null)o=void 0;else{var h=+f[1];o=e[1]+h}}else o=e?.[1];var g=[s,o];if(Il(g))return e==null?g:hU(g,e,n)}}}var ug=1e9,I2e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},MR,wn=!0,Ka="[DecimalError] ",Rd=Ka+"Invalid argument: ",RR=Ka+"Exponent out of range: ",dg=Math.floor,od=Math.pow,N2e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,la,Or=1e7,fn=7,$Z=9007199254740991,lS=dg($Z/fn),$e={};$e.absoluteValue=$e.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};$e.comparedTo=$e.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};$e.decimalPlaces=$e.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*fn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};$e.dividedBy=$e.div=function(t){return pl(this,new this.constructor(t))};$e.dividedToIntegerBy=$e.idiv=function(t){var e=this,n=e.constructor;return an(pl(e,new n(t),0,1),n.precision)};$e.equals=$e.eq=function(t){return!this.cmp(t)};$e.exponent=function(){return or(this)};$e.greaterThan=$e.gt=function(t){return this.cmp(t)>0};$e.greaterThanOrEqualTo=$e.gte=function(t){return this.cmp(t)>=0};$e.isInteger=$e.isint=function(){return this.e>this.d.length-2};$e.isNegative=$e.isneg=function(){return this.s<0};$e.isPositive=$e.ispos=function(){return this.s>0};$e.isZero=function(){return this.s===0};$e.lessThan=$e.lt=function(t){return this.cmp(t)<0};$e.lessThanOrEqualTo=$e.lte=function(t){return this.cmp(t)<1};$e.logarithm=$e.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(la))throw Error(Ka+"NaN");if(n.s<1)throw Error(Ka+(n.s?"NaN":"-Infinity"));return n.eq(la)?new r(0):(wn=!1,e=pl(p0(n,a),p0(t,a),a),wn=!0,an(e,i))};$e.minus=$e.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?GZ(e,t):UZ(e,(t.s=-t.s,t))};$e.modulo=$e.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ka+"NaN");return n.s?(wn=!1,e=pl(n,t,0,1).times(t),wn=!0,n.minus(e)):an(new r(n),i)};$e.naturalExponential=$e.exp=function(){return qZ(this)};$e.naturalLogarithm=$e.ln=function(){return p0(this)};$e.negated=$e.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};$e.plus=$e.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?UZ(e,t):GZ(e,(t.s=-t.s,t))};$e.precision=$e.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Rd+t);if(e=or(i)+1,r=i.d.length-1,n=r*fn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};$e.squareRoot=$e.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Ka+"NaN")}for(t=or(o),wn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=fo(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=dg((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(pl(o,a,s+2)).times(.5),fo(a.d).slice(0,s)===(e=fo(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(an(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return wn=!0,an(r,n)};$e.times=$e.mul=function(t){var e,n,r,i,a,s,o,c,u,f=this,h=f.constructor,g=f.d,v=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,u=v.length,c<u&&(a=g,g=v,v=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+v[r]*g[i-r-1]+e,a[i--]=o%Or|0,e=o/Or|0;a[i]=(a[i]+e)%Or|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,wn?an(t,h.precision):t};$e.toDecimalPlaces=$e.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ko(t,0,ug),e===void 0?e=r.rounding:ko(e,0,8),an(n,t+or(n)+1,e))};$e.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=nf(r,!0):(ko(t,0,ug),e===void 0?e=i.rounding:ko(e,0,8),r=an(new i(r),t+1,e),n=nf(r,!0,t+1)),n};$e.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?nf(i):(ko(t,0,ug),e===void 0?e=a.rounding:ko(e,0,8),r=an(new a(i),t+or(i)+1,e),n=nf(r.abs(),!1,t+or(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};$e.toInteger=$e.toint=function(){var t=this,e=t.constructor;return an(new e(t),or(t)+1,e.rounding)};$e.toNumber=function(){return+this};$e.toPower=$e.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,f=+(t=new c(t));if(!t.s)return new c(la);if(o=new c(o),!o.s){if(t.s<1)throw Error(Ka+"Infinity");return o}if(o.eq(la))return o;if(r=c.precision,t.eq(la))return an(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=f<0?-f:f)<=$Z){for(i=new c(la),e=Math.ceil(r/fn+4),wn=!1;n%2&&(i=i.times(o),gU(i.d,e)),n=dg(n/2),n!==0;)o=o.times(o),gU(o.d,e);return wn=!0,t.s<0?new c(la).div(i):an(i,r)}}else if(a<0)throw Error(Ka+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,wn=!1,i=t.times(p0(o,r+u)),wn=!0,i=qZ(i),i.s=a,i};$e.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=or(i),r=nf(i,n<=a.toExpNeg||n>=a.toExpPos)):(ko(t,1,ug),e===void 0?e=a.rounding:ko(e,0,8),i=an(new a(i),t,e),n=or(i),r=nf(i,t<=n||n<=a.toExpNeg,t)),r};$e.toSignificantDigits=$e.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ko(t,1,ug),e===void 0?e=r.rounding:ko(e,0,8)),an(new r(n),t,e)};$e.toString=$e.valueOf=$e.val=$e.toJSON=$e[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=or(t),n=t.constructor;return nf(t,e<=n.toExpNeg||e>=n.toExpPos)};function UZ(t,e){var n,r,i,a,s,o,c,u,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),wn?an(e,h):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(h/fn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/Or|0,c[a]%=Or;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,wn?an(e,h):e}function ko(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Rd+t)}function fo(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=fn-r.length,n&&(a+=kc(n)),a+=r;s=t[e],r=s+"",n=fn-r.length,n&&(a+=kc(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var pl=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Or|0,s=a/Or|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Or+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,f,h,g,v,b,x,w,S,T,I,P,O,D,N,C,R=r.constructor,M=r.s==i.s?1:-1,V=r.d,L=i.d;if(!r.s)return new R(r);if(!i.s)throw Error(Ka+"Division by zero");for(c=r.e-i.e,N=L.length,O=V.length,v=new R(M),b=v.d=[],u=0;L[u]==(V[u]||0);)++u;if(L[u]>(V[u]||0)&&--c,a==null?T=a=R.precision:s?T=a+(or(r)-or(i))+1:T=a,T<0)return new R(0);if(T=T/fn+2|0,u=0,N==1)for(f=0,L=L[0],T++;(u<O||f)&&T--;u++)I=f*Or+(V[u]||0),b[u]=I/L|0,f=I%L|0;else{for(f=Or/(L[0]+1)|0,f>1&&(L=t(L,f),V=t(V,f),N=L.length,O=V.length),P=N,x=V.slice(0,N),w=x.length;w<N;)x[w++]=0;C=L.slice(),C.unshift(0),D=L[0],L[1]>=Or/2&&++D;do f=0,o=e(L,x,N,w),o<0?(S=x[0],N!=w&&(S=S*Or+(x[1]||0)),f=S/D|0,f>1?(f>=Or&&(f=Or-1),h=t(L,f),g=h.length,w=x.length,o=e(h,x,g,w),o==1&&(f--,n(h,N<g?C:L,g))):(f==0&&(o=f=1),h=L.slice()),g=h.length,g<w&&h.unshift(0),n(x,h,w),o==-1&&(w=x.length,o=e(L,x,N,w),o<1&&(f++,n(x,N<w?C:L,w))),w=x.length):o===0&&(f++,x=[0]),b[u++]=f,o&&x[0]?x[w++]=V[P]||0:(x=[V[P]],w=1);while((P++<O||x[0]!==void 0)&&T--)}return b[0]||b.shift(),v.e=c,an(v,s?a+or(v)+1:a)}})();function qZ(t,e){var n,r,i,a,s,o,c=0,u=0,f=t.constructor,h=f.precision;if(or(t)>16)throw Error(RR+or(t));if(!t.s)return new f(la);for(wn=!1,o=h,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(od(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new f(la),f.precision=o;;){if(i=an(i.times(t),o),n=n.times(++c),s=a.plus(pl(i,n,o)),fo(s.d).slice(0,o)===fo(a.d).slice(0,o)){for(;u--;)a=an(a.times(a),o);return f.precision=h,e==null?(wn=!0,an(a,h)):a}a=s}}function or(t){for(var e=t.e*fn,n=t.d[0];n>=10;n/=10)e++;return e}function UC(t,e,n){if(e>t.LN10.sd())throw wn=!0,n&&(t.precision=n),Error(Ka+"LN10 precision limit exceeded");return an(new t(t.LN10),e)}function kc(t){for(var e="";t--;)e+="0";return e}function p0(t,e){var n,r,i,a,s,o,c,u,f,h=1,g=10,v=t,b=v.d,x=v.constructor,w=x.precision;if(v.s<1)throw Error(Ka+(v.s?"NaN":"-Infinity"));if(v.eq(la))return new x(0);if(e==null?(wn=!1,u=w):u=e,v.eq(10))return e==null&&(wn=!0),UC(x,u);if(u+=g,x.precision=u,n=fo(b),r=n.charAt(0),a=or(v),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=fo(v.d),r=n.charAt(0),h++;a=or(v),r>1?(v=new x("0."+n),a++):v=new x(r+"."+n.slice(1))}else return c=UC(x,u+2,w).times(a+""),v=p0(new x(r+"."+n.slice(1)),u-g).plus(c),x.precision=w,e==null?(wn=!0,an(v,w)):v;for(o=s=v=pl(v.minus(la),v.plus(la),u),f=an(v.times(v),u),i=3;;){if(s=an(s.times(f),u),c=o.plus(pl(s,new x(i),u)),fo(c.d).slice(0,u)===fo(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(UC(x,u+2,w).times(a+""))),o=pl(o,new x(h),u),x.precision=w,e==null?(wn=!0,an(o,w)):o;o=c,i+=2}}function pU(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=dg(n/fn),t.d=[],r=(n+1)%fn,n<0&&(r+=fn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=fn;r<i;)t.d.push(+e.slice(r,r+=fn));e=e.slice(r),r=fn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),wn&&(t.e>lS||t.e<-lS))throw Error(RR+n)}else t.s=0,t.e=0,t.d=[0];return t}function an(t,e,n){var r,i,a,s,o,c,u,f,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=fn,i=e,u=h[f=0];else{if(f=Math.ceil((r+1)/fn),a=h.length,f>=a)return t;for(u=a=h[f],s=1;a>=10;a/=10)s++;r%=fn,i=r-fn+s}if(n!==void 0&&(a=od(10,s-i-1),o=u/a%10|0,c=e<0||h[f+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/od(10,s-i):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=or(t),h.length=1,e=e-a-1,h[0]=od(10,(fn-e%fn)%fn),t.e=dg(-e/fn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,a=1,f--):(h.length=f+1,a=od(10,fn-r),h[f]=i>0?(u/od(10,s-i)%od(10,i)|0)*a:0),c)for(;;)if(f==0){(h[0]+=a)==Or&&(h[0]=1,++t.e);break}else{if(h[f]+=a,h[f]!=Or)break;h[f--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(wn&&(t.e>lS||t.e<-lS))throw Error(RR+or(t));return t}function GZ(t,e){var n,r,i,a,s,o,c,u,f,h,g=t.constructor,v=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),wn?an(e,v):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(f=s<0,f?(n=c,s=-s,o=h.length):(n=h,r=u,o=c.length),i=Math.max(Math.ceil(v/fn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){f=c[i]<h[i];break}s=0}for(f&&(n=c,c=h,h=n,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=Or-1;--c[a],c[i]+=Or}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,wn?an(e,v):e):new g(0)}function nf(t,e,n){var r,i=or(t),a=fo(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+kc(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+kc(-i-1)+a,n&&(r=n-s)>0&&(a+=kc(r))):i>=s?(a+=kc(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+kc(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=kc(r))),t.s<0?"-"+a:a}function gU(t,e){if(t.length>e)return t.length=e,!0}function HZ(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Rd+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return pU(s,a.toString())}else if(typeof a!="string")throw Error(Rd+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,N2e.test(a))pU(s,a);else throw Error(Rd+a)}if(i.prototype=$e,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=HZ,i.config=i.set=P2e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function P2e(t){if(!t||typeof t!="object")throw Error(Ka+"Object expected");var e,n,r,i=["precision",1,ug,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(dg(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Rd+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Rd+n+": "+r);return this}var MR=HZ(I2e);la=new MR(1);const Gt=MR;function KZ(t){var e;return t===0?e=1:e=Math.floor(new Gt(t).abs().log(10).toNumber())+1,e}function WZ(t,e,n){for(var r=new Gt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var YZ=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},XZ=(t,e,n)=>{if(t.lte(0))return new Gt(0);var r=KZ(t.toNumber()),i=new Gt(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new Gt(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?new Gt(c.toNumber()):new Gt(Math.ceil(c.toNumber()))},O2e=(t,e,n)=>{var r=new Gt(1),i=new Gt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Gt(10).pow(KZ(t)-1),i=new Gt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Gt(Math.floor(t)))}else t===0?i=new Gt(Math.floor((e-1)/2)):n||(i=new Gt(Math.floor(t)));for(var s=Math.floor((e-1)/2),o=[],c=0;c<e;c++)o.push(i.add(new Gt(c-s).mul(r)).toNumber());return o},QZ=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Gt(0),tickMin:new Gt(0),tickMax:new Gt(0)};var s=XZ(new Gt(n).sub(e).div(r-1),i,a),o;e<=0&&n>=0?o=new Gt(0):(o=new Gt(e).add(n).div(2),o=o.sub(new Gt(o).mod(s)));var c=Math.ceil(o.sub(e).div(s).toNumber()),u=Math.ceil(new Gt(n).sub(o).div(s).toNumber()),f=c+u+1;return f>r?QZ(e,n,r,i,a+1):(f<r&&(u=n>0?u+(r-f):u,c=n>0?c:c+(r-f)),{step:s,tickMin:o.sub(new Gt(c).mul(s)),tickMax:o.add(new Gt(u).mul(s))})},D2e=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,c]=YZ([n,r]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),c];return n>r?u.reverse():u}if(o===c)return O2e(o,i,a);var{step:f,tickMin:h,tickMax:g}=QZ(o,c,s,a,0),v=WZ(h,g.add(new Gt(.1).mul(f)),f);return n>r?v.reverse():v},R2e=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=YZ([r,i]);if(s===-1/0||o===1/0)return[r,i];if(s===o)return[s];var c=Math.max(n,2),u=XZ(new Gt(o).sub(s).div(c-1),a,0),f=[...WZ(new Gt(s),new Gt(o),u),o];return a===!1&&(f=f.map(h=>Math.round(h))),r>i?f.reverse():f},ZZ=t=>t.rootProps.maxBarSize,M2e=t=>t.rootProps.barGap,JZ=t=>t.rootProps.barCategoryGap,j2e=t=>t.rootProps.barSize,dy=t=>t.rootProps.stackOffset,eJ=t=>t.rootProps.reverseStackOrder,jR=t=>t.options.chartName,zR=t=>t.rootProps.syncId,tJ=t=>t.rootProps.syncMethod,LR=t=>t.options.eventEmitter,Rr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ju={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},eo={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Z_=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function J_(t,e,n){if(n!=="auto")return n;if(t!=null)return yu(t,e)?"category":"number"}function mU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mU(Object(n),!0).forEach(function(r){z2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function z2e(t,e,n){return(e=L2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L2e(t){var e=V2e(t,"string");return typeof e=="symbol"?e:e+""}function V2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vU={allowDataOverflow:Ju.allowDataOverflow,allowDecimals:Ju.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ju.angleAxisId,includeHidden:!1,name:void 0,reversed:Ju.reversed,scale:Ju.scale,tick:Ju.tick,tickCount:void 0,ticks:void 0,type:Ju.type,unit:void 0},yU={allowDataOverflow:eo.allowDataOverflow,allowDecimals:eo.allowDecimals,allowDuplicatedCategory:eo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:eo.radiusAxisId,includeHidden:eo.includeHidden,name:void 0,reversed:eo.reversed,scale:eo.scale,tick:eo.tick,tickCount:eo.tickCount,ticks:void 0,type:eo.type,unit:void 0},B2e=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},VR=ve([B2e,LQ],(t,e)=>{var n;if(t!=null)return t;var r=(n=J_(e,"angleAxis",vU.type))!==null&&n!==void 0?n:"category";return cS(cS({},vU),{},{type:r})}),F2e=(t,e)=>t.polarAxis.radiusAxis[e],BR=ve([F2e,LQ],(t,e)=>{var n;if(t!=null)return t;var r=(n=J_(e,"radiusAxis",yU.type))!==null&&n!==void 0?n:"category";return cS(cS({},yU),{},{type:r})}),eE=t=>t.polarOptions,FR=ve([jl,zl,_r],nZ),nJ=ve([eE,FR],(t,e)=>{if(t!=null)return ai(t.innerRadius,e,0)}),rJ=ve([eE,FR],(t,e)=>{if(t!=null)return ai(t.outerRadius,e,e*.8)}),$2e=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},iJ=ve([eE],$2e);ve([VR,iJ],Z_);var aJ=ve([FR,nJ,rJ],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ve([BR,aJ],Z_);var sJ=ve([Bt,eE,nJ,rJ,jl,zl],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=e;return{cx:ai(s,i,i/2),cy:ai(o,a,a/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:u,clockWise:!1}}}),Nn=(t,e)=>e,fy=(t,e,n)=>n;function $R(t){return t?.id}function oJ(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,s=new Map;return t.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:r;if(!(u==null||u.length===0)){var f=$R(o);u.forEach((h,g)=>{var v=a==null||i?g:String(pn(h,a,null)),b=pn(h,o.dataKey,0),x;s.has(v)?x=s.get(v):x={},Object.assign(x,{[f]:b}),s.set(v,x)})}}),Array.from(s.values())}function tE(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var nE=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function rE(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function U2e(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var zr=t=>{var e=Bt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},fg=t=>t.tooltip.settings.axisId;function q2e(t){if(t in Zm)return Zm[t]();var e="scale".concat(Z0(t));if(e in Zm)return Zm[e]()}function bU(t){var e=t.ticks,n=t.bandwidth,r=t.range(),i=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:(function(a){function s(){return a.apply(this,arguments)}return s.toString=function(){return a.toString()},s})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(a){var s=i[0],o=i[1];return s<=o?a>=s&&a<=o:a>=o&&a<=s},bandwidth:n?()=>n.call(t):void 0,ticks:e?a=>e.call(t,a):void 0,map:(a,s)=>{var o=t(a);if(o!=null){if(t.bandwidth&&s!==null&&s!==void 0&&s.position){var c=t.bandwidth();switch(s.position){case"middle":o+=c/2;break;case"end":o+=c;break}}return o}}}}function xU(t,e,n){if(typeof t=="function")return bU(t.copy().domain(e).range(n));if(t!=null){var r=q2e(t);if(r!=null)return r.domain(e).range(n),bU(r)}}var lJ=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!Il(e)){for(var n,r,i=0;i<e.length;i++){var a=e[i];vt(a)&&((n===void 0||a<n)&&(n=a),(r===void 0||a>r)&&(r=a))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function wU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(n),!0).forEach(function(r){G2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G2e(t,e,n){return(e=H2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H2e(t){var e=K2e(t,"string");return typeof e=="symbol"?e:e+""}function K2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IP=[0,"auto"],Ir={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},cJ=(t,e)=>t.cartesianAxis.xAxis[e],Po=(t,e)=>{var n=cJ(t,e);return n??Ir},Nr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:IP,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ny},uJ=(t,e)=>t.cartesianAxis.yAxis[e],Oo=(t,e)=>{var n=uJ(t,e);return n??Nr},W2e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},UR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??W2e},Vn=(t,e,n)=>{switch(e){case"xAxis":return Po(t,n);case"yAxis":return Oo(t,n);case"zAxis":return UR(t,n);case"angleAxis":return VR(t,n);case"radiusAxis":return BR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Y2e=(t,e,n)=>{switch(e){case"xAxis":return Po(t,n);case"yAxis":return Oo(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},hg=(t,e,n)=>{switch(e){case"xAxis":return Po(t,n);case"yAxis":return Oo(t,n);case"angleAxis":return VR(t,n);case"radiusAxis":return BR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},dJ=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function qR(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var GR=t=>t.graphicalItems.cartesianItems,X2e=ve([Nn,fy],qR),HR=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),hy=ve([GR,Vn,X2e],HR,{memoizeOptions:{resultEqualityCheck:rE}}),fJ=ve([hy],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(tE)),hJ=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),Q2e=ve([hy],hJ),KR=t=>t.map(e=>e.data).filter(Boolean).flat(1),Z2e=ve([hy],KR,{memoizeOptions:{resultEqualityCheck:rE}}),WR=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},YR=ve([Z2e,BZ],WR),XR=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:pn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:pn(i,r)}))):t.map(r=>({value:r})),iE=ve([YR,Vn,hy],XR);function pJ(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function _w(t){if(Ga(t)||t instanceof Date){var e=Number(t);if(vt(e))return e}}function SU(t){if(Array.isArray(t)){var e=[_w(t[0]),_w(t[1])];return Il(e)?e:void 0}var n=_w(t);if(n!=null)return[n,n]}function Nl(t){return t.map(_w).filter(Vi)}function J2e(t,e,n){return!n||typeof e!="number"||To(e)?[]:n.length?Nl(n.flatMap(r=>{var i=pn(t,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!vt(a)||!vt(s)))return[e-a,e+s]})):[]}var Tr=t=>{var e=zr(t),n=fg(t);return hg(t,e,n)},py=ve([Tr],t=>t?.dataKey),eOe=ve([fJ,BZ,Tr],oJ),gJ=(t,e,n,r)=>{var i={},a=e.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,u=r?[...c].reverse():c,f=u.map($R);return[o,{stackedData:xke(t,f,n),graphicalItems:u}]}))},NP=ve([eOe,fJ,dy,eJ],gJ),mJ=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var s=Tke(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},tOe=ve([Vn],t=>t.allowDataOverflow),QR=t=>{var e;if(t==null||!("domain"in t))return IP;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Nl(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:IP},ZR=ve([Vn],QR),JR=ve([ZR,tOe],FZ),nOe=ve([NP,Vl,Nn,JR],mJ,{memoizeOptions:{resultEqualityCheck:nE}}),aE=t=>t.errorBars,rOe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>pJ(n,r)),dS=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},eM=(t,e,n,r,i)=>{var a,s;if(n.length>0&&t.forEach(o=>{n.forEach(c=>{var u,f,h=(u=r[c.id])===null||u===void 0?void 0:u.filter(S=>pJ(i,S)),g=pn(o,(f=e.dataKey)!==null&&f!==void 0?f:c.dataKey),v=J2e(o,g,h);if(v.length>=2){var b=Math.min(...v),x=Math.max(...v);(a==null||b<a)&&(a=b),(s==null||x>s)&&(s=x)}var w=SU(g);w!=null&&(a=a==null?w[0]:Math.min(a,w[0]),s=s==null?w[1]:Math.max(s,w[1]))})}),e?.dataKey!=null&&t.forEach(o=>{var c=SU(pn(o,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),vt(a)&&vt(s))return[a,s]},iOe=ve([YR,Vn,Q2e,aE,Nn],eM,{memoizeOptions:{resultEqualityCheck:nE}});function aOe(t){var{value:e}=t;if(Ga(e)||e instanceof Date)return e}var sOe=(t,e,n)=>{var r=t.map(aOe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&MX(r))?sZ(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},vJ=t=>t.referenceElements.dots,pg=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),oOe=ve([vJ,Nn,fy],pg),yJ=t=>t.referenceElements.areas,lOe=ve([yJ,Nn,fy],pg),bJ=t=>t.referenceElements.lines,cOe=ve([bJ,Nn,fy],pg),xJ=(t,e)=>{if(t!=null){var n=Nl(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},uOe=ve(oOe,Nn,xJ),wJ=(t,e)=>{if(t!=null){var n=Nl(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},dOe=ve([lOe,Nn],wJ);function fOe(t){var e;if(t.x!=null)return Nl([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Nl(n)}function hOe(t){var e;if(t.y!=null)return Nl([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Nl(n)}var SJ=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?fOe(r):hOe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},pOe=ve([cOe,Nn],SJ),gOe=ve(uOe,pOe,dOe,(t,e,n)=>dS(t,n,e)),tM=(t,e,n,r,i,a,s,o)=>{if(n!=null)return n;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?dS(r,a,i):dS(a,i);return C2e(e,u,t.allowDataOverflow)},mOe=ve([Vn,ZR,JR,nOe,iOe,gOe,Bt,Nn],tM,{memoizeOptions:{resultEqualityCheck:nE}}),vOe=[0,1],nM=(t,e,n,r,i,a,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:o,type:c}=t,u=yu(e,a);if(u&&o==null){var f;return sZ(0,(f=n?.length)!==null&&f!==void 0?f:0)}return c==="category"?sOe(r,t,u):i==="expand"?vOe:s}},rM=ve([Vn,Bt,YR,iE,dy,Nn,mOe],nM);function yOe(t){return t in Zm}var _J=(t,e,n)=>{if(t!=null){var{scale:r,type:i}=t;if(r==="auto")return i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof r=="string"){var a="scale".concat(Z0(r));return yOe(a)?a:"point"}}},wu=ve([Vn,dJ,jR],_J);function iM(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?xU(t.scale,n,r):xU(e,n,r)}var aM=(t,e,n)=>{var r=QR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Il(t))return D2e(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Il(t))return R2e(t,e.tickCount,e.allowDecimals)}},sM=ve([rM,hg,wu],aM),oM=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Il(e)&&Array.isArray(n)&&n.length>0){var i,a,s=e[0],o=(i=n[0])!==null&&i!==void 0?i:0,c=e[1],u=(a=n[n.length-1])!==null&&a!==void 0?a:0;return[Math.min(s,o),Math.max(c,u)]}return e},bOe=ve([Vn,rM,sM,Nn],oM),xOe=ve(iE,Vn,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Nl(t.map(h=>h.value))).sort((h,g)=>h-g),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<r.length-1;o++){var c=r[o],u=r[o+1];if(!(c==null||u==null)){var f=u-c;n=Math.min(n,f)}}return n/s}}),EJ=ve(xOe,Bt,JZ,_r,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!vt(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=ai(n,t*a),o=t*a/2;return o-s-(o-s)/a*s}return 0}),wOe=(t,e,n)=>{var r=Po(t,e);return r==null||typeof r.padding!="string"?0:EJ(t,"xAxis",e,n,r.padding)},SOe=(t,e,n)=>{var r=Oo(t,e);return r==null||typeof r.padding!="string"?0:EJ(t,"yAxis",e,n,r.padding)},_Oe=ve(Po,wOe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),EOe=ve(Oo,SOe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),TOe=ve([_r,_Oe,L_,z_,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),AOe=ve([_r,Bt,EOe,L_,z_,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),gy=(t,e,n,r)=>{var i;switch(e){case"xAxis":return TOe(t,n,r);case"yAxis":return AOe(t,n,r);case"zAxis":return(i=UR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return iJ(t);case"radiusAxis":return aJ(t,n);default:return}},TJ=ve([Vn,gy],Z_),kOe=ve([wu,bOe],lJ),zp=ve([Vn,wu,kOe,TJ],iM);ve([hy,aE,Nn],rOe);function AJ(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var sE=(t,e)=>e,oE=(t,e,n)=>n,COe=ve(M_,sE,oE,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(AJ)),IOe=ve(j_,sE,oE,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(AJ)),kJ=(t,e)=>({width:t.width,height:e.height}),NOe=(t,e)=>{var n=typeof e.width=="number"?e.width:ny;return{width:n,height:t.height}},CJ=ve(_r,Po,kJ),POe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},OOe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},DOe=ve(zl,_r,COe,sE,oE,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=kJ(e,o);s==null&&(s=POe(e,r,t));var u=r==="top"&&!i||r==="bottom"&&i;a[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),a}),ROe=ve(jl,_r,IOe,sE,oE,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=NOe(e,o);s==null&&(s=OOe(e,r,t));var u=r==="left"&&!i||r==="right"&&i;a[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),a}),MOe=(t,e)=>{var n=Po(t,e);if(n!=null)return DOe(t,n.orientation,n.mirror)},jOe=ve([_r,Po,MOe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),zOe=(t,e)=>{var n=Oo(t,e);if(n!=null)return ROe(t,n.orientation,n.mirror)},LOe=ve([_r,Oo,zOe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),IJ=ve(_r,Oo,(t,e)=>{var n=typeof e.width=="number"?e.width:ny;return{width:n,height:t.height}}),_U=(t,e,n)=>{switch(e){case"xAxis":return CJ(t,n).width;case"yAxis":return IJ(t,n).height;default:return}},NJ=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,o=yu(t,r),c=e.map(u=>u.value);if(s&&o&&a==="category"&&i&&MX(c))return c}},lM=ve([Bt,iE,Vn,Nn],NJ),PJ=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,s=yu(t,r);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},cM=ve([Bt,iE,hg,Nn],PJ),EU=ve([Bt,Y2e,wu,zp,lM,cM,gy,sM,Nn],(t,e,n,r,i,a,s,o,c)=>{if(e!=null){var u=yu(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:n,scale:r}}}),VOe=(t,e,n,r,i,a,s,o,c)=>{if(!(e==null||r==null)){var u=yu(t,c),{type:f,ticks:h,tickCount:g}=e,v=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=f==="category"&&r.bandwidth?r.bandwidth()/v:0;b=c==="angleAxis"&&a!=null&&a.length>=2?Dr(a[0]-a[1])*2*b:b;var x=h||i;return x?x.map((w,S)=>{var T=s?s.indexOf(w):w,I=r.map(T);return vt(I)?{index:S,coordinate:I+b,value:w,offset:b}:null}).filter(Vi):u&&o?o.map((w,S)=>{var T=r.map(w);return vt(T)?{coordinate:T+b,value:w,index:S,offset:b}:null}).filter(Vi):r.ticks?r.ticks(g).map((w,S)=>{var T=r.map(w);return vt(T)?{coordinate:T+b,value:w,index:S,offset:b}:null}).filter(Vi):r.domain().map((w,S)=>{var T=r.map(w);return vt(T)?{coordinate:T+b,value:s?s[w]:w,index:S,offset:b}:null}).filter(Vi)}},OJ=ve([Bt,hg,wu,zp,sM,gy,lM,cM,Nn],VOe),BOe=(t,e,n,r,i,a,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=yu(t,s),{tickCount:c}=e,u=0;return u=s==="angleAxis"&&r?.length>=2?Dr(r[0]-r[1])*2*u:u,o&&a?a.map((f,h)=>{var g=n.map(f);return vt(g)?{coordinate:g+u,value:f,index:h,offset:u}:null}).filter(Vi):n.ticks?n.ticks(c).map((f,h)=>{var g=n.map(f);return vt(g)?{coordinate:g+u,value:f,index:h,offset:u}:null}).filter(Vi):n.domain().map((f,h)=>{var g=n.map(f);return vt(g)?{coordinate:g+u,value:i?i[f]:f,index:h,offset:u}:null}).filter(Vi)}},Lp=ve([Bt,hg,zp,gy,lM,cM,Nn],BOe),Vp=ve(Vn,zp,(t,e)=>{if(!(t==null||e==null))return uS(uS({},t),{},{scale:e})}),FOe=ve([Vn,wu,rM,TJ],iM);ve((t,e,n)=>UR(t,n),FOe,(t,e)=>{if(!(t==null||e==null))return uS(uS({},t),{},{scale:e})});var $Oe=ve([Bt,M_,j_],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),DJ=t=>t.options.defaultTooltipEventType,RJ=t=>t.options.validateTooltipEventTypes;function MJ(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function uM(t,e){var n=DJ(t),r=RJ(t);return MJ(e,n,r)}function UOe(t){return qe(e=>uM(e,t))}var jJ=(t,e)=>{var n,r=Number(e);if(!(To(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},qOe=t=>t.tooltip.settings,Rc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},GOe={itemInteraction:{click:Rc,hover:Rc},axisInteraction:{click:Rc,hover:Rc},keyboardInteraction:Rc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},zJ=Hi({name:"tooltip",initialState:GOe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:bn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Es(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:bn()},removeTooltipEntrySettings:{reducer(t,e){var n=Es(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:bn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:HOe,replaceTooltipEntrySettings:KOe,removeTooltipEntrySettings:WOe,setTooltipSettingsState:YOe,setActiveMouseOverItemIndex:LJ,mouseLeaveItem:XOe,mouseLeaveChart:VJ,setActiveClickItemIndex:QOe,setMouseOverAxisIndex:BJ,setMouseClickAxisIndex:ZOe,setSyncInteraction:PP,setKeyboardInteraction:OP}=zJ.actions,JOe=zJ.reducer;function TU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TU(Object(n),!0).forEach(function(r){eDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eDe(t,e,n){return(e=tDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tDe(t){var e=nDe(t,"string");return typeof e=="symbol"?e:e+""}function nDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rDe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function iDe(t){return t.index!=null}var FJ=(t,e,n,r)=>{if(e==null)return Rc;var i=rDe(t,e,n);if(i==null)return Rc;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(iDe(i)){if(a)return Bx(Bx({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Bx(Bx({},Rc),{},{coordinate:i.coordinate})};function aDe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function sDe(t,e){var n=aDe(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),s=Math.max(r,i);return n>=a&&n<=s}function oDe(t,e,n){if(n==null||e==null)return!0;var r=pn(t,e);return r==null||!Il(n)?!0:sDe(r,n)}var dM=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!vt(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var c=Math.max(s,Math.min(a,o)),u=e[c];return u==null||oDe(u,n,r)?String(c):null},$J=(t,e,n,r,i,a,s)=>{if(a!=null){var o=s[0],c=o?.getPosition(a);if(c!=null)return c;var u=i?.[Number(a)];if(u)return n==="horizontal"?{x:u.coordinate,y:(r.top+e)/2}:{x:(r.left+t)/2,y:u.coordinate}}},UJ=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},qJ=t=>t.options.tooltipPayloadSearcher,gg=t=>t.tooltip;function AU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AU(Object(n),!0).forEach(function(r){lDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lDe(t,e,n){return(e=cDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cDe(t){var e=uDe(t,"string");return typeof e=="symbol"?e:e+""}function uDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dDe(t,e){return t??e}var GJ=(t,e,n,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:f}=n,h=[];return t.reduce((g,v)=>{var b,{dataDefinedOnItem:x,settings:w}=v,S=dDe(x,o),T=Array.isArray(S)?kQ(S,u,f):S,I=(b=w?.dataKey)!==null&&b!==void 0?b:r,P=w?.nameKey,O;if(r&&Array.isArray(T)&&!Array.isArray(T[0])&&s==="axis"?O=HEe(T,r,i):O=a(T,e,c,P),Array.isArray(O))O.forEach(N=>{var C=kU(kU({},w),{},{name:N.name,unit:N.unit,color:void 0,fill:void 0});g.push(TF({tooltipEntrySettings:C,dataKey:N.dataKey,payload:N.payload,value:pn(N.payload,N.dataKey),name:N.name}))});else{var D;g.push(TF({tooltipEntrySettings:w,dataKey:I,payload:O,value:pn(O,I),name:(D=pn(O,P))!==null&&D!==void 0?D:w?.name}))}return g},h)}},fM=ve([Tr,dJ,jR],_J),fDe=ve([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),hDe=ve([zr,fg],qR),mg=ve([fDe,Tr,hDe],HR,{memoizeOptions:{resultEqualityCheck:rE}}),pDe=ve([mg],t=>t.filter(tE)),gDe=ve([mg],KR,{memoizeOptions:{resultEqualityCheck:rE}}),vg=ve([gDe,Vl],WR),mDe=ve([pDe,Vl,Tr],oJ),hM=ve([vg,Tr,mg],XR),HJ=ve([Tr],QR),vDe=ve([Tr],t=>t.allowDataOverflow),KJ=ve([HJ,vDe],FZ),yDe=ve([mg],t=>t.filter(tE)),bDe=ve([mDe,yDe,dy,eJ],gJ),xDe=ve([bDe,Vl,zr,KJ],mJ),wDe=ve([mg],hJ),SDe=ve([vg,Tr,wDe,aE,zr],eM,{memoizeOptions:{resultEqualityCheck:nE}}),_De=ve([vJ,zr,fg],pg),EDe=ve([_De,zr],xJ),TDe=ve([yJ,zr,fg],pg),ADe=ve([TDe,zr],wJ),kDe=ve([bJ,zr,fg],pg),CDe=ve([kDe,zr],SJ),IDe=ve([EDe,CDe,ADe],dS),NDe=ve([Tr,HJ,KJ,xDe,SDe,IDe,Bt,zr],tM),my=ve([Tr,Bt,vg,hM,dy,zr,NDe],nM),PDe=ve([my,Tr,fM],aM),ODe=ve([Tr,my,PDe,zr],oM),WJ=t=>{var e=zr(t),n=fg(t),r=!1;return gy(t,e,n,r)},YJ=ve([Tr,WJ],Z_),XJ=ve([Tr,fM,ODe,YJ],iM),DDe=ve([Bt,hM,Tr,zr],NJ),RDe=ve([Bt,hM,Tr,zr],PJ),MDe=(t,e,n,r,i,a,s,o)=>{if(e){var{type:c}=e,u=yu(t,o);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=c==="category"&&r.bandwidth?r.bandwidth()/f:0;return h=o==="angleAxis"&&i!=null&&i?.length>=2?Dr(i[0]-i[1])*2*h:h,u&&s?s.map((g,v)=>{var b=r.map(g);return vt(b)?{coordinate:b+h,value:g,index:v,offset:h}:null}).filter(Vi):r.domain().map((g,v)=>{var b=r.map(g);return vt(b)?{coordinate:b+h,value:a?a[g]:g,index:v,offset:h}:null}).filter(Vi)}}},Bl=ve([Bt,Tr,fM,XJ,WJ,DDe,RDe,zr],MDe),pM=ve([DJ,RJ,qOe],(t,e,n)=>MJ(n.shared,t,e)),QJ=t=>t.tooltip.settings.trigger,gM=t=>t.tooltip.settings.defaultIndex,vy=ve([gg,pM,QJ,gM],FJ),rf=ve([vy,vg,py,my],dM),ZJ=ve([Bl,rf],jJ),mM=ve([vy],t=>{if(t)return t.dataKey}),jDe=ve([vy],t=>{if(t)return t.graphicalItemId}),JJ=ve([gg,pM,QJ,gM],UJ),zDe=ve([jl,zl,Bt,_r,Bl,gM,JJ],$J),LDe=ve([vy,zDe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),VDe=ve([vy],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),BDe=ve([JJ,rf,Vl,py,ZJ,qJ,pM],GJ);ve([BDe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function CU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CU(Object(n),!0).forEach(function(r){FDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FDe(t,e,n){return(e=$De(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $De(t){var e=UDe(t,"string");return typeof e=="symbol"?e:e+""}function UDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qDe=()=>qe(Tr),GDe=()=>{var t=qDe(),e=qe(Bl),n=qe(XJ);return $1(!t||!n?void 0:IU(IU({},t),{},{scale:n}),e)};function NU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(n),!0).forEach(function(r){HDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HDe(t,e,n){return(e=KDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KDe(t){var e=WDe(t,"string");return typeof e=="symbol"?e:e+""}function WDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YDe=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},XDe=(t,e,n,r)=>{var i=e.find(u=>u&&u.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=r;return yh(yh(yh({},r),sr(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=r;return yh(yh(yh({},r),sr(r.cx,r.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function QDe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var eee=(t,e,n,r,i)=>{var a,s=(a=e?.length)!==null&&a!==void 0?a:0;if(s<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,u,f,h,g,v=o>0?(c=n[o-1])===null||c===void 0?void 0:c.coordinate:(u=n[s-1])===null||u===void 0?void 0:u.coordinate,b=(f=n[o])===null||f===void 0?void 0:f.coordinate,x=o>=s-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(g=n[o+1])===null||g===void 0?void 0:g.coordinate,w=void 0;if(!(v==null||b==null||x==null))if(Dr(b-v)!==Dr(x-b)){var S=[];if(Dr(x-b)===Dr(i[1]-i[0])){w=x;var T=b+i[1]-i[0];S[0]=Math.min(T,(T+v)/2),S[1]=Math.max(T,(T+v)/2)}else{w=v;var I=x+i[1]-i[0];S[0]=Math.min(b,(I+b)/2),S[1]=Math.max(b,(I+b)/2)}var P=[Math.min(b,(w+b)/2),Math.max(b,(w+b)/2)];if(t>P[0]&&t<=P[1]||t>=S[0]&&t<=S[1]){var O;return(O=n[o])===null||O===void 0?void 0:O.index}}else{var D=Math.min(v,x),N=Math.max(v,x);if(t>(D+b)/2&&t<=(N+b)/2){var C;return(C=n[o])===null||C===void 0?void 0:C.index}}}else if(e)for(var R=0;R<s;R++){var M=e[R];if(M!=null){var V=e[R+1],L=e[R-1];if(R===0&&V!=null&&t<=(M.coordinate+V.coordinate)/2||R===s-1&&L!=null&&t>(M.coordinate+L.coordinate)/2||R>0&&R<s-1&&L!=null&&V!=null&&t>(M.coordinate+L.coordinate)/2&&t<=(M.coordinate+V.coordinate)/2)return M.index}}return-1},ZDe=()=>qe(jR),vM=(t,e)=>e,tee=(t,e,n)=>n,yM=(t,e,n,r)=>r,JDe=ve(Bl,t=>E_(t,e=>e.coordinate)),bM=ve([gg,vM,tee,yM],FJ),xM=ve([bM,vg,py,my],dM),eRe=(t,e,n)=>{if(e!=null){var r=gg(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},nee=ve([gg,vM,tee,yM],UJ),fS=ve([jl,zl,Bt,_r,Bl,yM,nee],$J),tRe=ve([bM,fS],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),ree=ve([Bl,xM],jJ),nRe=ve([nee,xM,Vl,py,ree,qJ,vM],GJ),rRe=ve([bM,xM],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),iRe=(t,e,n,r,i,a,s)=>{if(!(!t||!n||!r||!i)&&QDe(t,s)){var o=Ake(t,e),c=eee(o,a,i,n,r),u=YDe(e,i,c,t);return{activeIndex:String(c),activeCoordinate:u}}},aRe=(t,e,n,r,i,a,s)=>{if(!(!t||!r||!i||!a||!n)){var o=UIe(t,n);if(o){var c=kke(o,e),u=eee(c,s,a,r,i),f=XDe(e,a,u,o);return{activeIndex:String(u),activeCoordinate:f}}}},sRe=(t,e,n,r,i,a,s,o)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?iRe(t,e,r,i,a,s,o):aRe(t,e,n,r,i,a,s)},oRe=ve(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),lRe=ve(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Rr)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:U2e}});function PU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PU(Object(n),!0).forEach(function(r){cRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cRe(t,e,n){return(e=uRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uRe(t){var e=dRe(t,"string");return typeof e=="symbol"?e:e+""}function dRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fRe={},hRe={zIndexMap:Object.values(Rr).reduce((t,e)=>OU(OU({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),fRe)},pRe=new Set(Object.values(Rr));function gRe(t){return pRe.has(t)}var iee=Hi({name:"zIndex",initialState:hRe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:bn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!gRe(n)&&delete t.zIndexMap[n])},prepare:bn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:bn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:bn()}}}),{registerZIndexPortal:mRe,unregisterZIndexPortal:vRe,registerZIndexPortalElement:yRe,unregisterZIndexPortalElement:bRe}=iee.actions,xRe=iee.reducer;function Qa(t){var{zIndex:e,children:n}=t,r=iCe(),i=r&&e!==void 0&&e!==0,a=Ei(),s=sn();A.useLayoutEffect(()=>i?(s(mRe({zIndex:e})),()=>{s(vRe({zIndex:e}))}):og,[s,e,i]);var o=qe(c=>oRe(c,e,a));return i?o?d2.createPortal(n,o):null:n}function DP(){return DP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DP.apply(null,arguments)}function DU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DU(Object(n),!0).forEach(function(r){wRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wRe(t,e,n){return(e=SRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SRe(t){var e=_Re(t,"string");return typeof e=="symbol"?e:e+""}function _Re(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ERe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return A.isValidElement(e)?A.cloneElement(e,r):A.createElement(n,r)}function TRe(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:f}=t,h=n,g=r,v=i;if(!c||!h||f!=="ScatterChart"&&u!=="axis")return null;var b,x,w;if(f==="ScatterChart")b=h,x=rIe,w=Rr.cursorLine;else if(f==="BarChart")b=iIe(o,h,a,s),x=tZ,w=Rr.cursorRectangle;else if(o==="radial"&&zX(h)){var{cx:S,cy:T,radius:I,startAngle:P,endAngle:O}=rZ(h);b={cx:S,cy:T,startAngle:P,endAngle:O,innerRadius:I,outerRadius:I},x=aZ,w=Rr.cursorLine}else b={points:KIe(o,h,a)},x=uR,w=Rr.cursorLine;var D=typeof c=="object"&&"className"in c?c.className:void 0,N=Fx(Fx(Fx(Fx({stroke:"#ccc",pointerEvents:"none"},a),b),t0(c)),{},{payload:g,payloadIndex:v,className:Vt("recharts-tooltip-cursor",D)});return A.createElement(Qa,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:w},A.createElement(ERe,{cursor:c,cursorComp:x,cursorProps:N}))}function ARe(t){var e=GDe(),n=jQ(),r=lg(),i=ZDe();return e==null||n==null||r==null||i==null?null:A.createElement(TRe,DP({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var aee=A.createContext(null),kRe=()=>A.useContext(aee),qC={exports:{}},RU;function CRe(){return RU||(RU=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function a(c,u,f,h,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new i(f,h||c,g),b=n?n+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],v]:c._events[b].push(v):(c._events[b]=v,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,h;if(this._eventsCount===0)return u;for(h in f=this._events)e.call(f,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=n?n+u:u,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,v=h.length,b=new Array(v);g<v;g++)b[g]=h[g].fn;return b},o.prototype.listenerCount=function(u){var f=n?n+u:u,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,f,h,g,v,b){var x=n?n+u:u;if(!this._events[x])return!1;var w=this._events[x],S=arguments.length,T,I;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),S){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,h),!0;case 4:return w.fn.call(w.context,f,h,g),!0;case 5:return w.fn.call(w.context,f,h,g,v),!0;case 6:return w.fn.call(w.context,f,h,g,v,b),!0}for(I=1,T=new Array(S-1);I<S;I++)T[I-1]=arguments[I];w.fn.apply(w.context,T)}else{var P=w.length,O;for(I=0;I<P;I++)switch(w[I].once&&this.removeListener(u,w[I].fn,void 0,!0),S){case 1:w[I].fn.call(w[I].context);break;case 2:w[I].fn.call(w[I].context,f);break;case 3:w[I].fn.call(w[I].context,f,h);break;case 4:w[I].fn.call(w[I].context,f,h,g);break;default:if(!T)for(O=1,T=new Array(S-1);O<S;O++)T[O-1]=arguments[O];w[I].fn.apply(w[I].context,T)}}return!0},o.prototype.on=function(u,f,h){return a(this,u,f,h,!1)},o.prototype.once=function(u,f,h){return a(this,u,f,h,!0)},o.prototype.removeListener=function(u,f,h,g){var v=n?n+u:u;if(!this._events[v])return this;if(!f)return s(this,v),this;var b=this._events[v];if(b.fn)b.fn===f&&(!g||b.once)&&(!h||b.context===h)&&s(this,v);else{for(var x=0,w=[],S=b.length;x<S;x++)(b[x].fn!==f||g&&!b[x].once||h&&b[x].context!==h)&&w.push(b[x]);w.length?this._events[v]=w.length===1?w[0]:w:s(this,v)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(qC)),qC.exports}var IRe=CRe();const NRe=Ol(IRe);var g0=new NRe,RP="recharts.syncEvent.tooltip",MU="recharts.syncEvent.brush",see=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!To(n))return t[n]}},PRe={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},oee=Hi({name:"options",initialState:PRe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),ORe=oee.reducer,{createEventEmitter:DRe}=oee.actions;function RRe(t){return t.tooltip.syncInteraction}var MRe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},lee=Hi({name:"chartData",initialState:MRe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:jU,setDataStartEndIndexes:jRe,setComputedData:NVe}=lee.actions,zRe=lee.reducer,LRe=["x","y"];function zU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zU(Object(n),!0).forEach(function(r){VRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VRe(t,e,n){return(e=BRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BRe(t){var e=FRe(t,"string");return typeof e=="symbol"?e:e+""}function FRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Re(t,e){if(t==null)return{};var n,r,i=URe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function URe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function qRe(){var t=qe(zR),e=qe(LR),n=sn(),r=qe(tJ),i=qe(Bl),a=lg(),s=iy(),o=qe(c=>c.rootProps.className);A.useEffect(()=>{if(t==null)return og;var c=(u,f,h)=>{if(e!==h&&t===u){if(r==="index"){var g;if(s&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate&&f.payload.sourceViewBox){var v=f.payload.coordinate,{x:b,y:x}=v,w=$Re(v,LRe),{x:S,y:T,width:I,height:P}=f.payload.sourceViewBox,O=bh(bh({},w),{},{x:s.x+(I?(b-S)/I:0)*s.width,y:s.y+(P?(x-T)/P:0)*s.height});n(bh(bh({},f),{},{payload:bh(bh({},f.payload),{},{coordinate:O})}))}else n(f);return}if(i!=null){var D;if(typeof r=="function"){var N={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},C=r(i,N);D=i[C]}else r==="value"&&(D=i.find(G=>String(G.value)===f.payload.label));var{coordinate:R}=f.payload;if(D==null||f.payload.active===!1||R==null||s==null){n(PP({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:M,y:V}=R,L=Math.min(M,s.x+s.width),z=Math.min(V,s.y+s.height),K={x:a==="horizontal"?D.coordinate:L,y:a==="horizontal"?z:D.coordinate},Y=PP({active:f.payload.active,coordinate:K,dataKey:f.payload.dataKey,index:String(D.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(Y)}}};return g0.on(RP,c),()=>{g0.off(RP,c)}},[o,n,e,t,r,i,a,s])}function GRe(){var t=qe(zR),e=qe(LR),n=sn();A.useEffect(()=>{if(t==null)return og;var r=(i,a,s)=>{e!==s&&t===i&&n(jRe(a))};return g0.on(MU,r),()=>{g0.off(MU,r)}},[n,e,t])}function HRe(){var t=sn();A.useEffect(()=>{t(DRe())},[t]),qRe(),GRe()}function KRe(t,e,n,r,i,a){var s=qe(v=>eRe(v,t,e)),o=qe(LR),c=qe(zR),u=qe(tJ),f=qe(RRe),h=f?.active,g=iy();A.useEffect(()=>{if(!h&&c!=null&&o!=null){var v=PP({active:a,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:g,graphicalItemId:void 0});g0.emit(RP,c,v,o)}},[h,n,s,i,r,o,c,u,a,g])}function LU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LU(Object(n),!0).forEach(function(r){WRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WRe(t,e,n){return(e=YRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YRe(t){var e=XRe(t,"string");return typeof e=="symbol"?e:e+""}function XRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QRe(t){return t.dataKey}function ZRe(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(jCe,e)}var BU=[],JRe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function lE(t){var e,n,r=Sr(t,JRe),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:f,offset:h,payloadUniqBy:g,position:v,reverseDirection:b,useTranslate3d:x,wrapperStyle:w,cursor:S,shared:T,trigger:I,defaultIndex:P,portal:O,axisId:D}=r,N=sn(),C=typeof P=="number"?String(P):P;A.useEffect(()=>{N(YOe({shared:T,trigger:I,axisId:D,active:i,defaultIndex:C}))},[N,T,I,D,i,C]);var R=iy(),M=XQ(),V=UOe(T),{activeIndex:L,isActive:z}=(e=qe(oe=>rRe(oe,V,I,C)))!==null&&e!==void 0?e:{},K=qe(oe=>nRe(oe,V,I,C)),Y=qe(oe=>ree(oe,V,I,C)),G=qe(oe=>tRe(oe,V,I,C)),X=K,J=kRe(),ne=(n=i??z)!==null&&n!==void 0?n:!1,[Q,$]=QX([X,ne]),Z=V==="axis"?Y:void 0;KRe(V,I,G,Z,L,ne);var ee=O??J;if(ee==null||R==null||V==null)return null;var W=X??BU;ne||(W=BU),u&&W.length&&(W=HX(W.filter(oe=>oe.value!=null&&(oe.hide!==!0||r.includeHidden)),g,QRe));var ue=W.length>0,ie=A.createElement(UCe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:f,active:ne,coordinate:G,hasPayload:ue,offset:h,position:v,reverseDirection:b,useTranslate3d:x,viewBox:R,wrapperStyle:w,lastBoundingBox:Q,innerRef:$,hasPortalFromProps:!!O},ZRe(c,VU(VU({},r),{},{payload:W,label:Z,active:ne,activeIndex:L,coordinate:G,accessibilityLayer:M})));return A.createElement(A.Fragment,null,d2.createPortal(ie,ee),ne&&A.createElement(ARe,{cursor:S,tooltipEventType:V,coordinate:G,payload:W,index:L}))}var yy=t=>null;yy.displayName="Cell";function eMe(t,e,n){return(e=tMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tMe(t){var e=nMe(t,"string");return typeof e=="symbol"?e:e+""}function nMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class rMe{constructor(e){eMe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function FU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iMe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FU(Object(n),!0).forEach(function(r){aMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aMe(t,e,n){return(e=sMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sMe(t){var e=oMe(t,"string");return typeof e=="symbol"?e:e+""}function oMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lMe={cacheSize:2e3,enableCache:!0},cee=iMe({},lMe),$U=new rMe(cee.cacheSize),cMe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},UU="recharts_measurement_span";function uMe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var qU=(t,e)=>{try{var n=document.getElementById(UU);n||(n=document.createElement("span"),n.setAttribute("id",UU),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,cMe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},wv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||$_.isSsr)return{width:0,height:0};if(!cee.enableCache)return qU(e,n);var r=uMe(e,n),i=$U.get(r);if(i)return i;var a=qU(e,n);return $U.set(r,a),a},uee;function dMe(t,e,n){return(e=fMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fMe(t){var e=hMe(t,"string");return typeof e=="symbol"?e:e+""}function hMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,HU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pMe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,gMe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,mMe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vMe=["cm","mm","pt","pc","in","Q","px"];function yMe(t){return vMe.includes(t)}var $h="NaN";function bMe(t,e){return t*mMe[e]}class Kr{static parse(e){var n,[,r,i]=(n=gMe.exec(e))!==null&&n!==void 0?n:[];return r==null?Kr.NaN:new Kr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,To(e)&&(this.unit=""),n!==""&&!pMe.test(n)&&(this.num=NaN,this.unit=""),yMe(n)&&(this.num=bMe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Kr(NaN,""):new Kr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Kr(NaN,""):new Kr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Kr(NaN,""):new Kr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Kr(NaN,""):new Kr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return To(this.num)}}uee=Kr;dMe(Kr,"NaN",new uee(NaN,""));function dee(t){if(t==null||t.includes($h))return $h;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=GU.exec(e))!==null&&n!==void 0?n:[],s=Kr.parse(r??""),o=Kr.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return $h;e=e.replace(GU,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,f,h,g]=(u=HU.exec(e))!==null&&u!==void 0?u:[],v=Kr.parse(f??""),b=Kr.parse(g??""),x=h==="+"?v.add(b):v.subtract(b);if(x.isNaN())return $h;e=e.replace(HU,x.toString())}return e}var KU=/\(([^()]*)\)/;function xMe(t){for(var e=t,n;(n=KU.exec(e))!=null;){var[,r]=n;e=e.replace(KU,dee(r))}return e}function wMe(t){var e=t.replace(/\s+/g,"");return e=xMe(e),e=dee(e),e}function SMe(t){try{return wMe(t)}catch{return $h}}function GC(t){var e=SMe(t.slice(5,-1));return e===$h?"":e}var _Me=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],EMe=["dx","dy","angle","className","breakAll"];function MP(){return MP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MP.apply(null,arguments)}function WU(t,e){if(t==null)return{};var n,r,i=TMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function TMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var fee=/[ \f\n\r\t\v\u2028\u2029]+/,hee=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Mr(e)||(n?i=e.toString().split(""):i=e.toString().split(fee));var a=i.map(o=>({word:o,width:wv(o,r).width})),s=n?0:wv("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function AMe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var pee=(t,e,n,r)=>t.reduce((i,a)=>{var{word:s,width:o}=a,c=i[i.length-1];if(c&&o!=null&&(e==null||r||c.width+o+n<Number(e)))c.words.push(s),c.width+=o+n;else{var u={words:[s],width:o};i.push(u)}return i},[]),gee=t=>t.reduce((e,n)=>e.width>n.width?e:n),kMe="",YU=(t,e,n,r,i,a,s,o)=>{var c=t.slice(0,e),u=hee({breakAll:n,style:r,children:c+kMe});if(!u)return[!1,[]];var f=pee(u.wordsWithComputedWidth,a,s,o),h=f.length>i||gee(f).width>Number(a);return[h,f]},CMe=(t,e,n,r,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=t,u=He(a),f=String(s),h=pee(e,r,n,i);if(!u||i)return h;var g=h.length>a||gee(h).width>Number(r);if(!g)return h;for(var v=0,b=f.length-1,x=0,w;v<=b&&x<=f.length-1;){var S=Math.floor((v+b)/2),T=S-1,[I,P]=YU(f,T,c,o,a,r,n,i),[O]=YU(f,S,c,o,a,r,n,i);if(!I&&!O&&(v=S+1),I&&O&&(b=S-1),!I&&O){w=P;break}x++}return w||h},XU=t=>{var e=Mr(t)?[]:t.toString().split(fee);return[{words:e,width:void 0}]},IMe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=t;if((e||n)&&!$_.isSsr){var o,c,u=hee({breakAll:a,children:r,style:i});if(u){var{wordsWithComputedWidth:f,spaceWidth:h}=u;o=f,c=h}else return XU(r);return CMe({breakAll:a,children:r,maxLines:s,style:i},o,c,e,!!n)}return XU(r)},mee="#808080",NMe={angle:0,breakAll:!1,capHeight:"0.71em",fill:mee,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},cE=A.forwardRef((t,e)=>{var n=Sr(t,NMe),{x:r,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:f}=n,h=WU(n,_Me),g=A.useMemo(()=>IMe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:v,dy:b,angle:x,className:w,breakAll:S}=h,T=WU(h,EMe);if(!Ga(r)||!Ga(i)||g.length===0)return null;var I=Number(r)+(He(v)?v:0),P=Number(i)+(He(b)?b:0);if(!vt(I)||!vt(P))return null;var O;switch(f){case"start":O=GC("calc(".concat(s,")"));break;case"middle":O=GC("calc(".concat((g.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:O=GC("calc(".concat(g.length-1," * -").concat(a,")"));break}var D=[],N=g[0];if(c&&N!=null){var C=N.width,{width:R}=h;D.push("scale(".concat(He(R)&&He(C)?R/C:1,")"))}return x&&D.push("rotate(".concat(x,", ").concat(I,", ").concat(P,")")),D.length&&(T.transform=D.join(" ")),A.createElement("text",MP({},ga(T),{ref:e,x:I,y:P,className:Vt("recharts-text",w),textAnchor:u,fill:o.includes("url")?mee:o}),g.map((M,V)=>{var L=M.words.join(S?"":" ");return A.createElement("tspan",{x:I,dy:V===0?O:a,key:"".concat(L,"-").concat(V)},L)}))});cE.displayName="Text";function QU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function to(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QU(Object(n),!0).forEach(function(r){PMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PMe(t,e,n){return(e=OMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OMe(t){var e=DMe(t,"string");return typeof e=="symbol"?e:e+""}function DMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RMe=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:i}=t,{x:a,y:s,height:o,upperWidth:c,lowerWidth:u}=aR(e),f=a,h=a+(c-u)/2,g=(f+h)/2,v=(c+u)/2,b=f+c/2,x=o>=0?1:-1,w=x*r,S=x>0?"end":"start",T=x>0?"start":"end",I=c>=0?1:-1,P=I*r,O=I>0?"end":"start",D=I>0?"start":"end",N=i;if(n==="top"){var C={x:f+c/2,y:s-w,horizontalAnchor:"middle",verticalAnchor:S};return N&&(C.height=Math.max(s-N.y,0),C.width=c),C}if(n==="bottom"){var R={x:h+u/2,y:s+o+w,horizontalAnchor:"middle",verticalAnchor:T};return N&&(R.height=Math.max(N.y+N.height-(s+o),0),R.width=u),R}if(n==="left"){var M={x:g-P,y:s+o/2,horizontalAnchor:O,verticalAnchor:"middle"};return N&&(M.width=Math.max(M.x-N.x,0),M.height=o),M}if(n==="right"){var V={x:g+v+P,y:s+o/2,horizontalAnchor:D,verticalAnchor:"middle"};return N&&(V.width=Math.max(N.x+N.width-V.x,0),V.height=o),V}var L=N?{width:v,height:o}:{};return n==="insideLeft"?to({x:g+P,y:s+o/2,horizontalAnchor:D,verticalAnchor:"middle"},L):n==="insideRight"?to({x:g+v-P,y:s+o/2,horizontalAnchor:O,verticalAnchor:"middle"},L):n==="insideTop"?to({x:f+c/2,y:s+w,horizontalAnchor:"middle",verticalAnchor:T},L):n==="insideBottom"?to({x:h+u/2,y:s+o-w,horizontalAnchor:"middle",verticalAnchor:S},L):n==="insideTopLeft"?to({x:f+P,y:s+w,horizontalAnchor:D,verticalAnchor:T},L):n==="insideTopRight"?to({x:f+c-P,y:s+w,horizontalAnchor:O,verticalAnchor:T},L):n==="insideBottomLeft"?to({x:h+P,y:s+o-w,horizontalAnchor:D,verticalAnchor:S},L):n==="insideBottomRight"?to({x:h+u-P,y:s+o-w,horizontalAnchor:O,verticalAnchor:S},L):n&&typeof n=="object"&&(He(n.x)||Zd(n.x))&&(He(n.y)||Zd(n.y))?to({x:a+ai(n.x,v),y:s+ai(n.y,o),horizontalAnchor:"end",verticalAnchor:"end"},L):to({x:b,y:s+o/2,horizontalAnchor:"middle",verticalAnchor:"middle"},L)},MMe=["labelRef"],jMe=["content"];function ZU(t,e){if(t==null)return{};var n,r,i=zMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function JU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JU(Object(n),!0).forEach(function(r){LMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LMe(t,e,n){return(e=VMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VMe(t){var e=BMe(t,"string");return typeof e=="symbol"?e:e+""}function BMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tl(){return tl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tl.apply(null,arguments)}var vee=A.createContext(null),yee=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s,children:o}=t,c=A.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,n,r,i,a,s]);return A.createElement(vee.Provider,{value:c},o)},bee=()=>{var t=A.useContext(vee),e=iy();return t||(e?aR(e):void 0)},FMe=A.createContext(null),$Me=()=>{var t=A.useContext(FMe),e=qe(sJ);return t||e},UMe=t=>{var{value:e,formatter:n}=t,r=Mr(t.children)?e:t.children;return typeof n=="function"?n(r):r},wM=t=>t!=null&&typeof t=="function",qMe=(t,e)=>{var n=Dr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},GMe=(t,e,n,r,i)=>{var{offset:a,className:s}=t,{cx:o,cy:c,innerRadius:u,outerRadius:f,startAngle:h,endAngle:g,clockWise:v}=i,b=(u+f)/2,x=qMe(h,g),w=x>=0?1:-1,S,T;switch(e){case"insideStart":S=h+w*a,T=v;break;case"insideEnd":S=g-w*a,T=!v;break;case"end":S=g+w*a,T=v;break;default:throw new Error("Unsupported position ".concat(e))}T=x<=0?T:!T;var I=sr(o,c,b,S),P=sr(o,c,b,S+(T?1:-1)*359),O="M".concat(I.x,",").concat(I.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(P.x,",").concat(P.y),D=Mr(t.id)?n0("recharts-radial-line-"):t.id;return A.createElement("text",tl({},r,{dominantBaseline:"central",className:Vt("recharts-radial-bar-label",s)}),A.createElement("defs",null,A.createElement("path",{id:D,d:O})),A.createElement("textPath",{xlinkHref:"#".concat(D)},n))},HMe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=t,u=(o+c)/2;if(n==="outside"){var{x:f,y:h}=sr(r,i,s+e,u);return{x:f,y:h,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+s)/2,{x:v,y:b}=sr(r,i,g,u);return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},Ew=t=>t!=null&&"cx"in t&&He(t.cx),KMe={angle:0,offset:5,zIndex:Rr.label,position:"middle",textBreakAll:!1};function WMe(t){if(!Ew(t))return t;var{cx:e,cy:n,outerRadius:r}=t,i=r*2;return{x:e-r,y:n-r,width:i,upperWidth:i,lowerWidth:i,height:i}}function Cc(t){var e=Sr(t,KMe),{viewBox:n,parentViewBox:r,position:i,value:a,children:s,content:o,className:c="",textBreakAll:u,labelRef:f}=e,h=$Me(),g=bee(),v=i==="center"?g:h??g,b,x,w;n==null?b=v:Ew(n)?b=n:b=aR(n);var S=WMe(b);if(!b||Mr(a)&&Mr(s)&&!A.isValidElement(o)&&typeof o!="function")return null;var T=Jm(Jm({},e),{},{viewBox:b});if(A.isValidElement(o)){var{labelRef:I}=T,P=ZU(T,MMe);return A.cloneElement(o,P)}if(typeof o=="function"){var{content:O}=T,D=ZU(T,jMe);if(x=A.createElement(o,D),A.isValidElement(x))return x}else x=UMe(e);var N=ga(e);if(Ew(b)){if(i==="insideStart"||i==="insideEnd"||i==="end")return GMe(e,i,x,N,b);w=HMe(b,e.offset,e.position)}else{if(!S)return null;var C=RMe({viewBox:S,position:i,offset:e.offset,parentViewBox:Ew(r)?void 0:r});w=Jm(Jm({x:C.x,y:C.y,textAnchor:C.horizontalAnchor,verticalAnchor:C.verticalAnchor},C.width!==void 0?{width:C.width}:{}),C.height!==void 0?{height:C.height}:{})}return A.createElement(Qa,{zIndex:e.zIndex},A.createElement(cE,tl({ref:f,className:Vt("recharts-label",c)},N,w,{textAnchor:AMe(N.textAnchor)?N.textAnchor:w.textAnchor,breakAll:u}),x))}Cc.displayName="Label";var YMe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?A.createElement(Cc,tl({key:"label-implicit"},r)):Ga(t)?A.createElement(Cc,tl({key:"label-implicit",value:t},r)):A.isValidElement(t)?t.type===Cc?A.cloneElement(t,Jm({key:"label-implicit"},r)):A.createElement(Cc,tl({key:"label-implicit",content:t},r)):wM(t)?A.createElement(Cc,tl({key:"label-implicit",content:t},r)):t&&typeof t=="object"?A.createElement(Cc,tl({},t,{key:"label-implicit"},r)):null};function xee(t){var{label:e,labelRef:n}=t,r=bee();return YMe(e,r,n)||null}var HC={},KC={},e9;function XMe(){return e9||(e9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(KC)),KC}var WC={},t9;function QMe(){return t9||(t9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(WC)),WC}var n9;function ZMe(){return n9||(n9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XMe(),n=QMe(),r=WD();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(HC)),HC}var YC,r9;function JMe(){return r9||(r9=1,YC=ZMe().last),YC}var eje=JMe();const tje=Ol(eje);var nje=["valueAccessor"],rje=["dataKey","clockWise","id","textBreakAll","zIndex"];function hS(){return hS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hS.apply(null,arguments)}function i9(t,e){if(t==null)return{};var n,r,i=ije(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ije(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var aje=t=>Array.isArray(t.value)?tje(t.value):t.value,wee=A.createContext(void 0),sje=wee.Provider,See=A.createContext(void 0),oje=See.Provider;function lje(){return A.useContext(wee)}function cje(){return A.useContext(See)}function Tw(t){var{valueAccessor:e=aje}=t,n=i9(t,nje),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:o}=n,c=i9(n,rje),u=lje(),f=cje(),h=u||f;return!h||!h.length?null:A.createElement(Qa,{zIndex:o??Rr.label},A.createElement(oi,{className:"recharts-label-list"},h.map((g,v)=>{var b,x=Mr(r)?e(g,v):pn(g.payload,r),w=Mr(a)?{}:{id:"".concat(a,"-").concat(v)};return A.createElement(Cc,hS({key:"label-".concat(v)},ga(g),c,w,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:x,textBreakAll:s,viewBox:g.viewBox,index:v,zIndex:0}))})))}Tw.displayName="LabelList";function _ee(t){var{label:e}=t;return e?e===!0?A.createElement(Tw,{key:"labelList-implicit"}):A.isValidElement(e)||wM(e)?A.createElement(Tw,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(Tw,hS({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var Eee=t=>t.graphicalItems.polarItems,uje=ve([Nn,fy],qR),uE=ve([Eee,Vn,uje],HR),dje=ve([uE],KR),dE=ve([dje,Q_],WR),fje=ve([dE,Vn,uE],XR);ve([dE,Vn,uE],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,s=pn(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:pn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var a9=()=>{},hje=ve([dE,Vn,uE,aE,Nn],eM),pje=ve([Vn,ZR,JR,a9,hje,a9,Bt,Nn],tM),Tee=ve([Vn,Bt,dE,fje,dy,Nn,pje],nM),gje=ve([Tee,hg,wu],aM),mje=ve([Vn,Tee,gje,Nn],oM);ve([wu,mje],lJ);var vje={radiusAxis:{},angleAxis:{}},Aee=Hi({name:"polarAxis",initialState:vje,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:PVe,removeRadiusAxis:OVe,addAngleAxis:DVe,removeAngleAxis:RVe}=Aee.actions,yje=Aee.reducer;function kee(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}function s9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function o9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s9(Object(n),!0).forEach(function(r){bje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bje(t,e,n){return(e=xje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xje(t){var e=wje(t,"string");return typeof e=="symbol"?e:e+""}function wje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sje=(t,e)=>e,SM=ve([Eee,Sje],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),_je=[],_M=(t,e,n)=>n?.length===0?_je:n,Cee=ve([Q_,SM,_M],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>o9(o9({},e.presentationProps),a.props))),i!=null)return i}}),Eje=ve([Cee,SM,_M],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,s=pn(r,e.nameKey,e.name),o;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?o=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:R_(s,e.dataKey),color:o,payload:r,type:e.legendType}})}),Tje=ve([Cee,SM,_M,_r],(t,e,n,r)=>{if(!(e==null||t==null))return Cze({offset:r,pieSettings:e,displayedData:t,cells:n})}),XC={exports:{}},Zt={};var l9;function Aje(){if(l9)return Zt;l9=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function b(x){if(typeof x=="object"&&x!==null){var w=x.$$typeof;switch(w){case t:switch(x=x.type,x){case n:case i:case r:case c:case u:case g:return x;default:switch(x=x&&x.$$typeof,x){case s:case o:case h:case f:return x;case a:return x;default:return w}}case e:return w}}}return Zt.ContextConsumer=a,Zt.ContextProvider=s,Zt.Element=t,Zt.ForwardRef=o,Zt.Fragment=n,Zt.Lazy=h,Zt.Memo=f,Zt.Portal=e,Zt.Profiler=i,Zt.StrictMode=r,Zt.Suspense=c,Zt.SuspenseList=u,Zt.isContextConsumer=function(x){return b(x)===a},Zt.isContextProvider=function(x){return b(x)===s},Zt.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},Zt.isForwardRef=function(x){return b(x)===o},Zt.isFragment=function(x){return b(x)===n},Zt.isLazy=function(x){return b(x)===h},Zt.isMemo=function(x){return b(x)===f},Zt.isPortal=function(x){return b(x)===e},Zt.isProfiler=function(x){return b(x)===i},Zt.isStrictMode=function(x){return b(x)===r},Zt.isSuspense=function(x){return b(x)===c},Zt.isSuspenseList=function(x){return b(x)===u},Zt.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===c||x===u||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===f||x.$$typeof===s||x.$$typeof===a||x.$$typeof===o||x.$$typeof===v||x.getModuleId!==void 0)},Zt.typeOf=b,Zt}var c9;function kje(){return c9||(c9=1,XC.exports=Aje()),XC.exports}var Cje=kje(),u9=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",d9=null,QC=null,Iee=t=>{if(t===d9&&Array.isArray(QC))return QC;var e=[];return A.Children.forEach(t,n=>{Mr(n)||(Cje.isFragment(n)?e=e.concat(Iee(n.props.children)):e.push(n))}),QC=e,d9=t,e};function EM(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>u9(i)):r=[u9(e)],Iee(t).forEach(i=>{var a=Qd(i,"type.displayName")||Qd(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var ZC={},f9;function Ije(){return f9||(f9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(ZC)),ZC}var JC,h9;function Nje(){return h9||(h9=1,JC=Ije().isPlainObject),JC}var Pje=Nje();const Oje=Ol(Pje);var p9,g9,m9,v9,y9;function b9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function x9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b9(Object(n),!0).forEach(function(r){Dje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dje(t,e,n){return(e=Rje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rje(t){var e=Mje(t,"string");return typeof e=="symbol"?e:e+""}function Mje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pS(){return pS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pS.apply(null,arguments)}function Lm(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var w9=(t,e,n,r,i)=>{var a=n-r,s;return s=Mn(p9||(p9=Lm(["M ",",",""])),t,e),s+=Mn(g9||(g9=Lm(["L ",",",""])),t+n,e),s+=Mn(m9||(m9=Lm(["L ",",",""])),t+n-a/2,e+i),s+=Mn(v9||(v9=Lm(["L ",",",""])),t+n-a/2-r,e+i),s+=Mn(y9||(y9=Lm(["L ",","," Z"])),t,e),s},jje={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zje=t=>{var e=Sr(t,jje),{x:n,y:r,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:c,animationDuration:u,animationBegin:f,isUpdateAnimationActive:h}=e,g=A.useRef(null),[v,b]=A.useState(-1),x=A.useRef(i),w=A.useRef(a),S=A.useRef(s),T=A.useRef(n),I=A.useRef(r),P=q_(t,"trapezoid-");if(A.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var K=g.current.getTotalLength();K&&b(K)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var O=Vt("recharts-trapezoid",o);if(!h)return A.createElement("g",null,A.createElement("path",pS({},ga(e),{className:O,d:w9(n,r,i,a,s)})));var D=x.current,N=w.current,C=S.current,R=T.current,M=I.current,V="0px ".concat(v===-1?1:v,"px"),L="".concat(v,"px 0px"),z=QQ(["strokeDasharray"],u,c);return A.createElement(U_,{animationId:P,key:P,canBegin:v>0,duration:u,easing:c,isActive:h,begin:f},K=>{var Y=pr(D,i,K),G=pr(N,a,K),X=pr(C,s,K),J=pr(R,n,K),ne=pr(M,r,K);g.current&&(x.current=Y,w.current=G,S.current=X,T.current=J,I.current=ne);var Q=K>0?{transition:z,strokeDasharray:L}:{strokeDasharray:V};return A.createElement("path",pS({},ga(e),{className:O,d:w9(J,ne,Y,G,X),ref:g,style:x9(x9({},Q),e.style)}))})},Lje=["option","shapeType","activeClassName"];function Vje(t,e){if(t==null)return{};var n,r,i=Bje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Bje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function S9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S9(Object(n),!0).forEach(function(r){Fje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fje(t,e,n){return(e=$je(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $je(t){var e=Uje(t,"string");return typeof e=="symbol"?e:e+""}function Uje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qje(t,e){return gS(gS({},e),t)}function Gje(t,e){return t==="symbols"}function _9(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return A.createElement(tZ,n);case"trapezoid":return A.createElement(zje,n);case"sector":return A.createElement(aZ,n);case"symbols":if(Gje(e))return A.createElement(KD,n);break;case"curve":return A.createElement(uR,n);default:return null}}function Hje(t){return A.isValidElement(t)?t.props:t}function Nee(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=Vje(t,Lje),a;if(A.isValidElement(e))a=A.cloneElement(e,gS(gS({},i),Hje(e)));else if(typeof e=="function")a=e(i,i.index);else if(Oje(e)&&typeof e!="boolean"){var s=qje(e,i);a=A.createElement(_9,{shapeType:n,elementProps:s})}else{var o=i;a=A.createElement(_9,{shapeType:n,elementProps:o})}return i.isActive?A.createElement(oi,{className:r},a):a}var TM=(t,e,n)=>{var r=sn();return(i,a)=>s=>{t?.(i,a,s),r(LJ({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},AM=t=>{var e=sn();return(n,r)=>i=>{t?.(n,r,i),e(XOe())}},kM=(t,e,n)=>{var r=sn();return(i,a)=>s=>{t?.(i,a,s),r(QOe({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function Pee(t){var{tooltipEntrySettings:e}=t,n=sn(),r=Ei(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(HOe(e)):i.current!==e&&n(KOe({prev:i.current,next:e})),i.current=e)},[e,n,r]),A.useLayoutEffect(()=>()=>{i.current&&(n(WOe(i.current)),i.current=null)},[n]),null}function Kje(t){var{legendPayload:e}=t,n=sn(),r=Ei(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(HQ(e)):i.current!==e&&n(KQ({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(WQ(i.current)),i.current=null)},[n]),null}function Wje(t){var{legendPayload:e}=t,n=sn(),r=qe(Bt),i=A.useRef(null);return A.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(HQ(e)):i.current!==e&&n(KQ({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(WQ(i.current)),i.current=null)},[n]),null}var eI,Yje=()=>{var[t]=A.useState(()=>n0("uid-"));return t},Xje=(eI=Wne.useId)!==null&&eI!==void 0?eI:Yje;function Qje(t,e){var n=Xje();return e||(t?"".concat(t,"-").concat(n):n)}var Zje=A.createContext(void 0),Oee=t=>{var{id:e,type:n,children:r}=t,i=Qje("recharts-".concat(n),e);return A.createElement(Zje.Provider,{value:i},r(i))},Jje={cartesianItems:[],polarItems:[]},Dee=Hi({name:"graphicalItems",initialState:Jje,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:bn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Es(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:bn()},removeCartesianGraphicalItem:{reducer(t,e){var n=Es(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:bn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:bn()},removePolarGraphicalItem:{reducer(t,e){var n=Es(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:bn()}}}),{addCartesianGraphicalItem:eze,replaceCartesianGraphicalItem:tze,removeCartesianGraphicalItem:nze,addPolarGraphicalItem:rze,removePolarGraphicalItem:ize}=Dee.actions,aze=Dee.reducer,sze=t=>{var e=sn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(eze(t)):n.current!==t&&e(tze({prev:n.current,next:t})),n.current=t},[e,t]),A.useLayoutEffect(()=>()=>{n.current&&(e(nze(n.current)),n.current=null)},[e]),null},oze=A.memo(sze);function lze(t){var e=sn();return A.useLayoutEffect(()=>(e(rze(t)),()=>{e(ize(t))}),[e,t]),null}var cze=["key"],uze=["onMouseEnter","onClick","onMouseLeave"],dze=["id"],fze=["id"];function E9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E9(Object(n),!0).forEach(function(r){hze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hze(t,e,n){return(e=pze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pze(t){var e=gze(t,"string");return typeof e=="symbol"?e:e+""}function gze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lu(){return lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lu.apply(null,arguments)}function fE(t,e){if(t==null)return{};var n,r,i=mze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function vze(t){var e=A.useMemo(()=>EM(t.children,yy),[t.children]),n=qe(r=>Eje(r,t.id,e));return n==null?null:A.createElement(Wje,{legendPayload:n})}var yze=A.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:s,name:o,hide:c,tooltipType:u,id:f}=t,h={dataDefinedOnItem:r.map(g=>g.tooltipPayload),getPosition:g=>{var v;return(v=r[Number(g)])===null||v===void 0?void 0:v.tooltipPosition},settings:{stroke:i,strokeWidth:a,fill:s,dataKey:e,nameKey:n,name:R_(o,e),hide:c,type:u,color:s,unit:"",graphicalItemId:f}};return A.createElement(Pee,{tooltipEntrySettings:h})}),bze=(t,e)=>t>e?"start":t<e?"end":"middle",xze=(t,e,n)=>ai(typeof e=="function"?e(t):e,n,n*.8),wze=(t,e,n)=>{var{top:r,left:i,width:a,height:s}=e,o=nZ(a,s),c=i+ai(t.cx,a,a/2),u=r+ai(t.cy,s,s/2),f=ai(t.innerRadius,o,0),h=xze(n,t.outerRadius,o),g=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:u,innerRadius:f,outerRadius:h,maxRadius:g}},Sze=(t,e)=>{var n=Dr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},_ze=(t,e)=>{if(A.isValidElement(t))return A.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Vt("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=fE(e,cze);return A.createElement(uR,lu({},i,{type:"linear",className:n}))},Eze=(t,e,n)=>{if(A.isValidElement(t))return A.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),A.isValidElement(r)))return r;var i=Vt("recharts-pie-label-text",kee(t));return A.createElement(cE,lu({},e,{alignmentBaseline:"middle",className:i}),r)};function Tze(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:s}=n;if(!r||!i||!e)return null;var o=Cs(n),c=t0(i),u=t0(a),f=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=e.map((g,v)=>{var b=(g.startAngle+g.endAngle)/2,x=sr(g.cx,g.cy,g.outerRadius+f,b),w=jn(jn(jn(jn({},o),g),{},{stroke:"none"},c),{},{index:v,textAnchor:bze(x.x,g.cx)},x),S=jn(jn(jn(jn({},o),g),{},{fill:"none",stroke:g.fill},u),{},{index:v,points:[sr(g.cx,g.cy,g.outerRadius,b),x],key:"line"});return A.createElement(Qa,{zIndex:Rr.label,key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},A.createElement(oi,null,a&&_ze(a,S),Eze(i,w,pn(g,s))))});return A.createElement(oi,{className:"recharts-pie-labels"},h)}function Aze(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?A.createElement(_ee,{label:i}):A.createElement(Tze,{sectors:e,props:n,showLabels:r})}function kze(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:s}=t,o=qe(rf),c=qe(mM),u=qe(jDe),{onMouseEnter:f,onClick:h,onMouseLeave:g}=i,v=fE(i,uze),b=TM(f,i.dataKey,s),x=AM(g),w=kM(h,i.dataKey,s);return e==null||e.length===0?null:A.createElement(A.Fragment,null,e.map((S,T)=>{if(S?.startAngle===0&&S?.endAngle===0&&e.length!==1)return null;var I=u==null||u===s,P=String(T)===o&&(c==null||i.dataKey===c)&&I,O=o?r:null,D=n&&P?n:O,N=jn(jn({},S),{},{stroke:S.stroke,tabIndex:-1,[PQ]:T,[OQ]:s});return A.createElement(oi,lu({key:"sector-".concat(S?.startAngle,"-").concat(S?.endAngle,"-").concat(S.midAngle,"-").concat(T),tabIndex:-1,className:"recharts-pie-sector"},J0(v,S,T),{onMouseEnter:b(S,T),onMouseLeave:x(S,T),onClick:w(S,T)}),A.createElement(Nee,lu({option:a??D,index:T,shapeType:"sector",isActive:P},N)))}))}function Cze(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:s,startAngle:o,endAngle:c,dataKey:u,nameKey:f,tooltipType:h}=n,g=Math.abs(n.minAngle),v=Sze(o,c),b=Math.abs(v),x=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,w=r.filter(D=>pn(D,u,0)!==0).length,S=(b>=360?w:w-1)*x,T=b-w*g-S,I=r.reduce((D,N)=>{var C=pn(N,u,0);return D+(He(C)?C:0)},0),P;if(I>0){var O;P=r.map((D,N)=>{var C=pn(D,u,0),R=pn(D,f,N),M=wze(n,a,D),V=(He(C)?C:0)/I,L,z=jn(jn({},D),i&&i[N]&&i[N].props);N?L=O.endAngle+Dr(v)*x*(C!==0?1:0):L=o;var K=L+Dr(v)*((C!==0?g:0)+V*T),Y=(L+K)/2,G=(M.innerRadius+M.outerRadius)/2,X=[{name:R,value:C,payload:z,dataKey:u,type:h,graphicalItemId:n.id}],J=sr(M.cx,M.cy,G,Y);return O=jn(jn(jn(jn({},n.presentationProps),{},{percent:V,cornerRadius:typeof s=="string"?parseFloat(s):s,name:R,tooltipPayload:X,midAngle:Y,middleRadius:G,tooltipPosition:J},z),M),{},{value:C,dataKey:u,startAngle:L,endAngle:K,payload:z,paddingAngle:Dr(v)*x}),O})}return P}function Ize(t){var{showLabels:e,sectors:n,children:r}=t,i=A.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return A.createElement(oje,{value:e?i:void 0},r)}function Nze(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:f,onAnimationStart:h,onAnimationEnd:g}=e,v=q_(e,"recharts-pie-"),b=n.current,[x,w]=A.useState(!1),S=A.useCallback(()=>{typeof g=="function"&&g(),w(!1)},[g]),T=A.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return A.createElement(Ize,{showLabels:!x,sectors:i},A.createElement(U_,{animationId:v,begin:s,duration:o,isActive:a,easing:c,onAnimationStart:T,onAnimationEnd:S,key:v},I=>{var P,O=[],D=i&&i[0],N=(P=D?.startAngle)!==null&&P!==void 0?P:0;return i?.forEach((C,R)=>{var M=b&&b[R],V=R>0?Qd(C,"paddingAngle",0):0;if(M){var L=pr(M.endAngle-M.startAngle,C.endAngle-C.startAngle,I),z=jn(jn({},C),{},{startAngle:N+V,endAngle:N+L+V});O.push(z),N=z.endAngle}else{var{endAngle:K,startAngle:Y}=C,G=pr(0,K-Y,I),X=jn(jn({},C),{},{startAngle:N+V,endAngle:N+G+V});O.push(X),N=X.endAngle}}),n.current=O,A.createElement(oi,null,A.createElement(kze,{sectors:O,activeShape:u,inactiveShape:f,allOtherPieProps:e,shape:e.shape,id:r}))}),A.createElement(Aze,{showLabels:!x,sectors:i,props:e}),e.children)}var Pze={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Rr.area};function Oze(t){var{id:e}=t,n=fE(t,dze),{hide:r,className:i,rootTabIndex:a}=t,s=A.useMemo(()=>EM(t.children,yy),[t.children]),o=qe(f=>Tje(f,e,s)),c=A.useRef(null),u=Vt("recharts-pie",i);return r||o==null?(c.current=null,A.createElement(oi,{tabIndex:a,className:u})):A.createElement(Qa,{zIndex:t.zIndex},A.createElement(yze,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:o,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),A.createElement(oi,{tabIndex:a,className:u},A.createElement(Nze,{props:jn(jn({},n),{},{sectors:o}),previousSectorsRef:c,id:e})))}function Ree(t){var e=Sr(t,Pze),{id:n}=e,r=fE(e,fze),i=Cs(r);return A.createElement(Oee,{id:n,type:"pie"},a=>A.createElement(A.Fragment,null,A.createElement(lze,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),A.createElement(vze,lu({},r,{id:a})),A.createElement(Oze,lu({},r,{id:a}))))}Ree.displayName="Pie";function T9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function A9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T9(Object(n),!0).forEach(function(r){Dze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dze(t,e,n){return(e=Rze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rze(t){var e=Mze(t,"string");return typeof e=="symbol"?e:e+""}function Mze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mee=0,jze={xAxis:{},yAxis:{},zAxis:{}},jee=Hi({name:"cartesianAxis",initialState:jze,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:bn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:bn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:bn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:bn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:bn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:bn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:bn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:bn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:bn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a,s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-((a=s[0])!==null&&a!==void 0?a:0))<=1)return;var o=[...s,r].slice(-3);t.yAxis[n]=A9(A9({},i),{},{width:r,widthHistory:o})}}}}),{addXAxis:zze,replaceXAxis:Lze,removeXAxis:Vze,addYAxis:Bze,replaceYAxis:Fze,removeYAxis:$ze,addZAxis:MVe,replaceZAxis:jVe,removeZAxis:zVe,updateYAxisWidth:Uze}=jee.actions,qze=jee.reducer,Gze=ve([_r],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Hze=ve([Gze,jl,zl],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),zee=()=>qe(Hze),k9=(t,e,n)=>{var r=n??t;if(!Mr(r))return ai(r,e,0)},Kze=(t,e,n)=>{var r={},i=t.filter(tE),a=t.filter(u=>u.stackId==null),s=i.reduce((u,f)=>{var h=u[f.stackId];return h==null&&(h=[]),h.push(f),u[f.stackId]=h,u},r),o=Object.entries(s).map(u=>{var f,[h,g]=u,v=g.map(x=>x.dataKey),b=k9(e,n,(f=g[0])===null||f===void 0?void 0:f.barSize);return{stackId:h,dataKeys:v,barSize:b}}),c=a.map(u=>{var f=[u.dataKey].filter(g=>g!=null),h=k9(e,n,u.barSize);return{stackId:void 0,dataKeys:f,barSize:h}});return[...o,...c]};function C9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $x(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C9(Object(n),!0).forEach(function(r){Wze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wze(t,e,n){return(e=Yze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yze(t){var e=Xze(t,"string");return typeof e=="symbol"?e:e+""}function Xze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qze(t,e,n,r,i){var a,s=r.length;if(!(s<1)){var o=ai(t,n,0,!0),c,u=[];if(vt((a=r[0])===null||a===void 0?void 0:a.barSize)){var f=!1,h=n/s,g=r.reduce((T,I)=>T+(I.barSize||0),0);g+=(s-1)*o,g>=n&&(g-=(s-1)*o,o=0),g>=n&&h>0&&(f=!0,h*=.9,g=s*h);var v=(n-g)/2>>0,b={offset:v-o,size:0};c=r.reduce((T,I)=>{var P,O={stackId:I.stackId,dataKeys:I.dataKeys,position:{offset:b.offset+b.size+o,size:f?h:(P=I.barSize)!==null&&P!==void 0?P:0}},D=[...T,O];return b=O.position,D},u)}else{var x=ai(e,n,0,!0);n-2*x-(s-1)*o<=0&&(o=0);var w=(n-2*x-(s-1)*o)/s;w>1&&(w>>=0);var S=vt(i)?Math.min(w,i):w;c=r.reduce((T,I,P)=>[...T,{stackId:I.stackId,dataKeys:I.dataKeys,position:{offset:x+(w+o)*P+(w-S)/2,size:S}}],u)}return c}}var Zze=(t,e,n,r,i,a,s)=>{var o=Mr(s)?e:s,c=Qze(n,r,i!==a?i:a,t,o);return i!==a&&c!=null&&(c=c.map(u=>$x($x({},u),{},{position:$x($x({},u.position),{},{offset:u.position.offset-i/2})}))),c},Jze=(t,e)=>{var n=$R(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===n)}}}},e4e=(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}};function t4e(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&vt(t.zIndex)?t.zIndex:e}var Lee=t=>{var{chartData:e}=t,n=sn(),r=Ei();return A.useEffect(()=>r?()=>{}:(n(jU(e)),()=>{n(jU(void 0))}),[e,n,r]),null},I9={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Vee=Hi({name:"brush",initialState:I9,reducers:{setBrushSettings(t,e){return e.payload==null?I9:e.payload}}}),{setBrushSettings:LVe}=Vee.actions,n4e=Vee.reducer,r4e=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},i4e=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return r4e({x:e,y:n},{x:r,y:i})};function a4e(t){return(t%180+180)%180}var s4e=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=a4e(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},o4e={dots:[],areas:[],lines:[]},Bee=Hi({name:"referenceElements",initialState:o4e,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Es(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Es(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Es(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:VVe,removeDot:BVe,addArea:FVe,removeArea:$Ve,addLine:l4e,removeLine:c4e}=Bee.actions,u4e=Bee.reducer,Fee=A.createContext(void 0),d4e=t=>{var{children:e}=t,[n]=A.useState("".concat(n0("recharts"),"-clip")),r=zee();if(r==null)return null;var{x:i,y:a,width:s,height:o}=r;return A.createElement(Fee.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:a,height:o,width:s}))),e)},f4e=()=>A.useContext(Fee);class h4e{constructor(e){var{x:n,y:r}=e;this.xAxisScale=n,this.yAxisScale=r}map(e,n){var r,i,{position:a}=n;return{x:(r=this.xAxisScale.map(e.x,{position:a}))!==null&&r!==void 0?r:0,y:(i=this.yAxisScale.map(e.y,{position:a}))!==null&&i!==void 0?i:0}}mapWithFallback(e,n){var r,i,{position:a,fallback:s}=n,o,c;return s==="rangeMin"?o=this.yAxisScale.rangeMin():s==="rangeMax"?o=this.yAxisScale.rangeMax():o=0,s==="rangeMin"?c=this.xAxisScale.rangeMin():s==="rangeMax"?c=this.xAxisScale.rangeMax():c=0,{x:(r=this.xAxisScale.map(e.x,{position:a}))!==null&&r!==void 0?r:c,y:(i=this.yAxisScale.map(e.y,{position:a}))!==null&&i!==void 0?i:o}}isInRange(e){var{x:n,y:r}=e,i=n==null||this.xAxisScale.isInRange(n),a=r==null||this.yAxisScale.isInRange(r);return i&&a}}function N9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function P9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N9(Object(n),!0).forEach(function(r){p4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p4e(t,e,n){return(e=g4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g4e(t){var e=m4e(t,"string");return typeof e=="symbol"?e:e+""}function m4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mS(){return mS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mS.apply(null,arguments)}var v4e=(t,e)=>{var n;if(A.isValidElement(t))n=A.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!vt(e.x1)||!vt(e.y1)||!vt(e.x2)||!vt(e.y2))return null;n=A.createElement("line",mS({},e,{className:"recharts-reference-line-line"}))}return n},y4e=(t,e,n,r,i,a)=>{var{x:s,width:o}=a,c=i.map(t,{position:n});if(!vt(c)||e==="discard"&&!i.isInRange(c))return null;var u=[{x:s+o,y:c},{x:s,y:c}];return r==="left"?u.reverse():u},b4e=(t,e,n,r,i,a)=>{var{y:s,height:o}=a,c=i.map(t,{position:n});if(!vt(c)||e==="discard"&&!i.isInRange(c))return null;var u=[{x:c,y:s+o},{x:c,y:s}];return r==="top"?u.reverse():u},x4e=(t,e,n,r)=>{var i=[r.mapWithFallback(t[0],{position:n,fallback:"rangeMin"}),r.mapWithFallback(t[1],{position:n,fallback:"rangeMax"})];return e==="discard"&&i.some(a=>!r.isInRange(a))?null:i},w4e=(t,e,n,r,i,a,s)=>{var{x:o,y:c,segment:u,ifOverflow:f}=s,h=Ga(o),g=Ga(c);return g?y4e(c,f,r,a,e,n):h?b4e(o,f,r,i,t,n):u!=null&&u.length===2?x4e(u,f,r,new h4e({x:t,y:e})):null};function S4e(t){var e=sn();return A.useEffect(()=>(e(l4e(t)),()=>{e(c4e(t))})),null}function _4e(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:a}=t,s=Ei(),o=f4e(),c=qe(N=>Po(N,e)),u=qe(N=>Oo(N,n)),f=qe(N=>zp(N,"xAxis",e,s)),h=qe(N=>zp(N,"yAxis",n,s)),g=iy();if(!o||!g||c==null||u==null||f==null||h==null)return null;var v=w4e(f,h,g,t.position,c.orientation,u.orientation,t);if(!v)return null;var b=v[0],x=v[1];if(b==null||x==null)return null;var{x:w,y:S}=b,{x:T,y:I}=x,P=a==="hidden"?"url(#".concat(o,")"):void 0,O=P9(P9({clipPath:P},ga(t)),{},{x1:w,y1:S,x2:T,y2:I}),D=i4e({x1:w,y1:S,x2:T,y2:I});return A.createElement(Qa,{zIndex:t.zIndex},A.createElement(oi,{className:Vt("recharts-reference-line",i)},v4e(r,O),A.createElement(yee,mS({},D,{lowerWidth:D.width,upperWidth:D.width}),A.createElement(xee,{label:t.label}),t.children)))}var E4e={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",label:!1,stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Rr.line};function CM(t){var e=Sr(t,E4e);return A.createElement(A.Fragment,null,A.createElement(S4e,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),A.createElement(_4e,e))}CM.displayName="ReferenceLine";function $ee(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function T4e(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return s4e(r,n)}function A4e(t,e,n){var r=n==="width",{x:i,y:a,width:s,height:o}=t;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function m0(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function k4e(t,e){return $ee(t,e+1)}function C4e(t,e,n,r,i){for(var a=(r||[]).slice(),{start:s,end:o}=e,c=0,u=1,f=s,h=function(){var b=r?.[c];if(b===void 0)return{v:$ee(r,u)};var x=c,w,S=()=>(w===void 0&&(w=n(b,x)),w),T=b.coordinate,I=c===0||m0(t,T,S,f,o);I||(c=0,f=s,u+=1),I&&(f=T+t*(S()/2+i),c+=u)},g;u<=a.length;)if(g=h(),g)return g.v;return[]}function I4e(t,e,n,r,i){var a=(r||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=e,u=1;u<=s;u++){for(var f=(s-1)%u,h=o,g=!0,v=function(){var P=r[x];if(P==null)return 0;var O=x,D,N=()=>(D===void 0&&(D=n(P,O)),D),C=P.coordinate,R=x===f||m0(t,C,N,h,c);if(!R)return g=!1,1;R&&(h=C+t*(N()/2+i))},b,x=f;x<s&&(b=v(),!(b!==0&&b===1));x+=u);if(g){for(var w=[],S=f;S<s;S+=u){var T=r[S];T!=null&&w.push(T)}return w}}return[]}function O9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O9(Object(n),!0).forEach(function(r){N4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N4e(t,e,n){return(e=P4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P4e(t){var e=O4e(t,"string");return typeof e=="symbol"?e:e+""}function O4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D4e(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:o}=e,{end:c}=e,u=function(g){var v=a[g];if(v==null)return 1;var b=v,x,w=()=>(x===void 0&&(x=n(v,g)),x);if(g===s-1){var S=t*(b.coordinate+t*w()/2-c);a[g]=b=Zr(Zr({},b),{},{tickCoord:S>0?b.coordinate-S*t:b.coordinate})}else a[g]=b=Zr(Zr({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var T=m0(t,b.tickCoord,w,o,c);T&&(c=b.tickCoord-t*(w()/2+i),a[g]=Zr(Zr({},b),{},{isShow:!0}))}},f=s-1;f>=0;f--)u(f);return a}function R4e(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,{start:c,end:u}=e;if(a){var f=r[o-1];if(f!=null){var h=n(f,o-1),g=t*(f.coordinate+t*h/2-u);if(s[o-1]=f=Zr(Zr({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate}),f.tickCoord!=null){var v=m0(t,f.tickCoord,()=>h,c,u);v&&(u=f.tickCoord-t*(h/2+i),s[o-1]=Zr(Zr({},f),{},{isShow:!0}))}}}for(var b=a?o-1:o,x=function(T){var I=s[T];if(I==null)return 1;var P=I,O,D=()=>(O===void 0&&(O=n(I,T)),O);if(T===0){var N=t*(P.coordinate-t*D()/2-c);s[T]=P=Zr(Zr({},P),{},{tickCoord:N<0?P.coordinate-N*t:P.coordinate})}else s[T]=P=Zr(Zr({},P),{},{tickCoord:P.coordinate});if(P.tickCoord!=null){var C=m0(t,P.tickCoord,D,c,u);C&&(c=P.tickCoord+t*(D()/2+i),s[T]=Zr(Zr({},P),{},{isShow:!0}))}},w=0;w<b;w++)x(w);return s}function IM(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:f,angle:h}=t;if(!i||!i.length||!r)return[];if(He(c)||$_.isSsr){var g;return(g=k4e(i,He(c)?c:0))!==null&&g!==void 0?g:[]}var v=[],b=o==="top"||o==="bottom"?"width":"height",x=f&&b==="width"?wv(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},w=(O,D)=>{var N=typeof u=="function"?u(O.value,D):O.value;return b==="width"?T4e(wv(N,{fontSize:e,letterSpacing:n}),x,h):wv(N,{fontSize:e,letterSpacing:n})[b]},S=i[0],T=i[1],I=i.length>=2&&S!=null&&T!=null?Dr(T.coordinate-S.coordinate):1,P=A4e(a,I,b);return c==="equidistantPreserveStart"?C4e(I,P,w,i,s):c==="equidistantPreserveEnd"?I4e(I,P,w,i,s):(c==="preserveStart"||c==="preserveStartEnd"?v=R4e(I,P,w,i,s,c==="preserveStartEnd"):v=D4e(I,P,w,i,s),v.filter(O=>O.isShow))}var M4e=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=n?n.getBoundingClientRect().width:0,c=i+a,u=s+c+o+(n?r:0);return Math.round(u)}return 0},j4e=["axisLine","width","height","className","hide","ticks","axisType"];function z4e(t,e){if(t==null)return{};var n,r,i=L4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function L4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function af(){return af=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},af.apply(null,arguments)}function D9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D9(Object(n),!0).forEach(function(r){V4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V4e(t,e,n){return(e=B4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B4e(t){var e=F4e(t,"string");return typeof e=="symbol"?e:e+""}function F4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gl={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Rr.axis};function $4e(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=t;if(!o)return null;var u=Dn(Dn(Dn({},c),Cs(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!s||a==="bottom"&&s);u=Dn(Dn({},u),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(a==="left"&&!s||a==="right"&&s);u=Dn(Dn({},u),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return A.createElement("line",af({},u,{className:Vt("recharts-cartesian-axis-line",Qd(o,"className"))}))}function U4e(t,e,n,r,i,a,s,o,c){var u,f,h,g,v,b,x=o?-1:1,w=t.tickSize||s,S=He(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":u=f=t.coordinate,g=n+ +!o*i,h=g-x*w,b=h-x*c,v=S;break;case"left":h=g=t.coordinate,f=e+ +!o*r,u=f-x*w,v=u-x*c,b=S;break;case"right":h=g=t.coordinate,f=e+ +o*r,u=f+x*w,v=u+x*c,b=S;break;default:u=f=t.coordinate,g=n+ +o*i,h=g+x*w,b=h+x*c,v=S;break}return{line:{x1:u,y1:h,x2:f,y2:g},tick:{x:v,y:b}}}function q4e(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function G4e(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function H4e(t){var{option:e,tickProps:n,value:r}=t,i,a=Vt(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))i=A.cloneElement(e,Dn(Dn({},n),{},{className:a}));else if(typeof e=="function")i=e(Dn(Dn({},n),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Vt(s,kee(e))),i=A.createElement(cE,af({},n,{className:s}),r)}return i}var K4e=A.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:f,mirror:h,x:g,y:v,width:b,height:x,tickSize:w,tickMargin:S,fontSize:T,letterSpacing:I,getTicksConfig:P,events:O,axisType:D}=t,N=IM(Dn(Dn({},P),{},{ticks:n}),T,I),C=q4e(f,h),R=G4e(f,h),M=Cs(P),V=t0(r),L={};typeof i=="object"&&(L=i);var z=Dn(Dn({},M),{},{fill:"none"},L),K=N.map(X=>Dn({entry:X},U4e(X,g,v,b,x,f,w,h,S))),Y=K.map(X=>{var{entry:J,line:ne}=X;return A.createElement(oi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},i&&A.createElement("line",af({},z,ne,{className:Vt("recharts-cartesian-axis-tick-line",Qd(i,"className"))})))}),G=K.map((X,J)=>{var ne,Q,{entry:$,tick:Z}=X,ee=Dn(Dn(Dn(Dn({verticalAnchor:R},M),{},{textAnchor:C,stroke:"none",fill:a},Z),{},{index:J,payload:$,visibleTicksCount:N.length,tickFormatter:s,padding:c},u),{},{angle:(ne=(Q=u?.angle)!==null&&Q!==void 0?Q:M.angle)!==null&&ne!==void 0?ne:0}),W=Dn(Dn({},ee),V);return A.createElement(oi,af({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat($.value,"-").concat($.coordinate,"-").concat($.tickCoord)},J0(O,$,J)),r&&A.createElement(H4e,{option:r,tickProps:W,value:"".concat(typeof s=="function"?s($.value,J):$.value).concat(o||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(D,"-ticks")},G.length>0&&A.createElement(Qa,{zIndex:Rr.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(D,"-tick-labels"),ref:e},G)),Y.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(D,"-tick-lines")},Y))}),W4e=A.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:s,ticks:o,axisType:c}=t,u=z4e(t,j4e),[f,h]=A.useState(""),[g,v]=A.useState(""),b=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var w;return M4e({ticks:b.current,label:(w=t.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=A.useCallback(w=>{if(w){var S=w.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=S;var T=S[0];if(T){var I=window.getComputedStyle(T),P=I.fontSize,O=I.letterSpacing;(P!==f||O!==g)&&(h(P),v(O))}}},[f,g]);return s||r!=null&&r<=0||i!=null&&i<=0?null:A.createElement(Qa,{zIndex:t.zIndex},A.createElement(oi,{className:Vt("recharts-cartesian-axis",a)},A.createElement($4e,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Cs(t)}),A.createElement(K4e,{ref:x,axisType:c,events:u,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(yee,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(xee,{label:t.label,labelRef:t.labelRef}),t.children)))}),NM=A.forwardRef((t,e)=>{var n=Sr(t,gl);return A.createElement(W4e,af({},n,{ref:e}))});NM.displayName="CartesianAxis";var Y4e=["x1","y1","x2","y2","key"],X4e=["offset"],Q4e=["xAxisId","yAxisId"],Z4e=["xAxisId","yAxisId"];function R9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ti(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R9(Object(n),!0).forEach(function(r){J4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J4e(t,e,n){return(e=e3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e3e(t){var e=t3e(t,"string");return typeof e=="symbol"?e:e+""}function t3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ed.apply(null,arguments)}function vS(t,e){if(t==null)return{};var n,r,i=n3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function n3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var r3e=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:s,ry:o}=t;return A.createElement("rect",{x:r,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Uee(t){var{option:e,lineItemProps:n}=t,r;if(A.isValidElement(e))r=A.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:s,x2:o,y2:c,key:u}=n,f=vS(n,Y4e),h=(i=Cs(f))!==null&&i!==void 0?i:{},{offset:g}=h,v=vS(h,X4e);r=A.createElement("line",Ed({},v,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:u}))}return r}function i3e(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=vS(t,Q4e),c=i.map((u,f)=>{var h=ti(ti({},o),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(f),index:f});return A.createElement(Uee,{key:"line-".concat(f),option:r,lineItemProps:h})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function a3e(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=vS(t,Z4e),c=i.map((u,f)=>{var h=ti(ti({},o),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(f),index:f});return A.createElement(Uee,{option:r,lineItemProps:h,key:"line-".concat(f)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function s3e(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=t;if(!c||!e||!e.length||o==null)return null;var u=o.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var v=u[g+1],b=v==null,x=b?i+s-h:v-h;if(x<=0)return null;var w=g%e.length;return A.createElement("rect",{key:"react-".concat(g),y:h,x:r,height:x,width:a,stroke:"none",fill:e[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function o3e(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:s,height:o,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var u=c.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var v=u[g+1],b=v==null,x=b?i+s-h:v-h;if(x<=0)return null;var w=g%n.length;return A.createElement("rect",{key:"react-".concat(g),x:h,y:a,width:x,height:o,stroke:"none",fill:n[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var l3e=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return CQ(IM(ti(ti(ti({},gl),n),{},{ticks:IQ(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},c3e=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return CQ(IM(ti(ti(ti({},gl),n),{},{ticks:IQ(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},u3e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Rr.grid};function by(t){var e=sR(),n=oR(),r=jQ(),i=ti(ti({},Sr(t,u3e)),{},{x:He(t.x)?t.x:r.left,y:He(t.y)?t.y:r.top,width:He(t.width)?t.width:r.width,height:He(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:u,height:f,syncWithTicks:h,horizontalValues:g,verticalValues:v}=i,b=Ei(),x=qe(R=>EU(R,"xAxis",a,b)),w=qe(R=>EU(R,"yAxis",s,b));if(!Ao(u)||!Ao(f)||!He(o)||!He(c))return null;var S=i.verticalCoordinatesGenerator||l3e,T=i.horizontalCoordinatesGenerator||c3e,{horizontalPoints:I,verticalPoints:P}=i;if((!I||!I.length)&&typeof T=="function"){var O=g&&g.length,D=T({yAxis:w?ti(ti({},w),{},{ticks:O?g:w.ticks}):void 0,width:e??u,height:n??f,offset:r},O?!0:h);U1(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(I=D)}if((!P||!P.length)&&typeof S=="function"){var N=v&&v.length,C=S({xAxis:x?ti(ti({},x),{},{ticks:N?v:x.ticks}):void 0,width:e??u,height:n??f,offset:r},N?!0:h);U1(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(P=C)}return A.createElement(Qa,{zIndex:i.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(r3e,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(s3e,Ed({},i,{horizontalPoints:I})),A.createElement(o3e,Ed({},i,{verticalPoints:P})),A.createElement(i3e,Ed({},i,{offset:r,horizontalPoints:I,xAxis:x,yAxis:w})),A.createElement(a3e,Ed({},i,{offset:r,verticalPoints:P,xAxis:x,yAxis:w}))))}by.displayName="CartesianGrid";var d3e={},qee=Hi({name:"errorBars",initialState:d3e,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:UVe,replaceErrorBar:qVe,removeErrorBar:GVe}=qee.actions,f3e=qee.reducer,h3e=["children"];function p3e(t,e){if(t==null)return{};var n,r,i=g3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function g3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var m3e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},v3e=A.createContext(m3e);function y3e(t){var{children:e}=t,n=p3e(t,h3e);return A.createElement(v3e.Provider,{value:n},e)}function Gee(t,e){var n,r,i=qe(u=>Po(u,t)),a=qe(u=>Oo(u,e)),s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Ir.allowDataOverflow,o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:Nr.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function b3e(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=zee(),{needClipX:a,needClipY:s,needClip:o}=Gee(e,n);if(!o||!i)return null;var{x:c,y:u,width:f,height:h}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:a?c:c-f/2,y:s?u:u-h/2,width:a?f:f*2,height:s?h:h*2}))}var tI={exports:{}},nI={};var M9;function x3e(){if(M9)return nI;M9=1;var t=Bp();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return nI.useSyncExternalStoreWithSelector=function(c,u,f,h,g){var v=i(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=s(function(){function w(O){if(!S){if(S=!0,T=O,O=h(O),g!==void 0&&b.hasValue){var D=b.value;if(g(D,O))return I=D}return I=O}if(D=I,n(T,O))return D;var N=h(O);return g!==void 0&&g(D,N)?(T=O,D):(T=O,I=N)}var S=!1,T,I,P=f===void 0?null:f;return[function(){return w(u())},P===null?void 0:function(){return w(P())}]},[u,f,h,g]);var x=r(c,v[0],v[1]);return a(function(){b.hasValue=!0,b.value=x},[x]),o(x),x},nI}var j9;function w3e(){return j9||(j9=1,tI.exports=x3e()),tI.exports}w3e();function S3e(t){t()}function _3e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){S3e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var z9={notify(){},get:()=>[]};function E3e(t,e){let n,r=z9,i=0,a=!1;function s(x){f();const w=r.subscribe(x);let S=!1;return()=>{S||(S=!0,w(),h())}}function o(){r.notify()}function c(){b.onStateChange&&b.onStateChange()}function u(){return a}function f(){i++,n||(n=t.subscribe(c),r=_3e())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=z9)}function g(){a||(a=!0,f())}function v(){a&&(a=!1,h())}const b={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>r};return b}var T3e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",A3e=T3e(),k3e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",C3e=k3e(),I3e=()=>A3e||C3e?A.useLayoutEffect:A.useEffect,N3e=I3e();function L9(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function P3e(t,e){if(L9(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!L9(t[n[i]],e[n[i]]))return!1;return!0}var O3e=Symbol.for("react-redux-context"),D3e=typeof globalThis<"u"?globalThis:{};function R3e(){if(!A.createContext)return{};const t=D3e[O3e]??=new Map;let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var M3e=R3e();function j3e(t){const{children:e,context:n,serverState:r,store:i}=t,a=A.useMemo(()=>{const c=E3e(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=A.useMemo(()=>i.getState(),[i]);N3e(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=n||M3e;return A.createElement(o.Provider,{value:a},e)}var z3e=j3e,L3e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function V3e(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function PM(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(L3e.has(r)){if(t[r]==null&&e[r]==null)continue;if(!P3e(t[r],e[r]))return!1}else if(!V3e(t[r],e[r]))return!1;return!0}function mf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:Mee}function vf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:Mee}var B3e="Invariant failed";function F3e(t,e){throw new Error(B3e)}function jP(){return jP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jP.apply(null,arguments)}function yS(t){return A.createElement(Nee,jP({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var $3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(He(e))return e;var a=He(r)||Mr(r);return a?e(r,i):(a||F3e(),n)}},U3e=(t,e,n)=>n,q3e=(t,e)=>e,xy=ve([GR,q3e],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),G3e=ve([xy],t=>t?.maxBarSize),H3e=(t,e,n,r)=>r,K3e=ve([Bt,GR,mf,vf,U3e],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),W3e=(t,e,n)=>{var r=Bt(t),i=mf(t,e),a=vf(t,e);if(!(i==null||a==null))return r==="horizontal"?NP(t,"yAxis",a,n):NP(t,"xAxis",i,n)},Y3e=(t,e)=>{var n=Bt(t),r=mf(t,e),i=vf(t,e);if(!(r==null||i==null))return n==="horizontal"?_U(t,"xAxis",r):_U(t,"yAxis",i)},X3e=ve([K3e,j2e,Y3e],Kze),Q3e=(t,e,n)=>{var r,i,a=xy(t,e);if(a==null)return 0;var s=mf(t,e),o=vf(t,e);if(s==null||o==null)return 0;var c=Bt(t),u=ZZ(t),{maxBarSize:f}=a,h=Mr(f)?u:f,g,v;return c==="horizontal"?(g=Vp(t,"xAxis",s,n),v=Lp(t,"xAxis",s,n)):(g=Vp(t,"yAxis",o,n),v=Lp(t,"yAxis",o,n)),(r=(i=$1(g,v,!0))!==null&&i!==void 0?i:h)!==null&&r!==void 0?r:0},Hee=(t,e,n)=>{var r=Bt(t),i=mf(t,e),a=vf(t,e);if(!(i==null||a==null)){var s,o;return r==="horizontal"?(s=Vp(t,"xAxis",i,n),o=Lp(t,"xAxis",i,n)):(s=Vp(t,"yAxis",a,n),o=Lp(t,"yAxis",a,n)),$1(s,o)}},Z3e=ve([X3e,ZZ,M2e,JZ,Q3e,Hee,G3e],Zze),J3e=(t,e,n)=>{var r=mf(t,e);if(r!=null)return Vp(t,"xAxis",r,n)},eLe=(t,e,n)=>{var r=vf(t,e);if(r!=null)return Vp(t,"yAxis",r,n)},tLe=(t,e,n)=>{var r=mf(t,e);if(r!=null)return Lp(t,"xAxis",r,n)},nLe=(t,e,n)=>{var r=vf(t,e);if(r!=null)return Lp(t,"yAxis",r,n)},rLe=ve([Z3e,xy],e4e),iLe=ve([W3e,xy],Jze),aLe=ve([_r,rR,J3e,eLe,tLe,nLe,rLe,Bt,k2e,Hee,iLe,xy,H3e],(t,e,n,r,i,a,s,o,c,u,f,h,g)=>{var{chartData:v,dataStartIndex:b,dataEndIndex:x}=c;if(!(h==null||s==null||e==null||o!=="horizontal"&&o!=="vertical"||n==null||r==null||i==null||a==null||u==null)){var{data:w}=h,S;if(w!=null&&w.length>0?S=w:S=v?.slice(b,x+1),S!=null)return DLe({layout:o,barSettings:h,pos:s,parentViewBox:e,bandSize:u,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:f,displayedData:S,offset:t,cells:g,dataStartIndex:b})}}),sLe=["index"];function zP(){return zP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zP.apply(null,arguments)}function oLe(t,e){if(t==null)return{};var n,r,i=lLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function lLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Kee=A.createContext(void 0),cLe=t=>{var e=A.useContext(Kee);if(e!=null)return e.stackId;if(t!=null)return wke(t)},uLe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),dLe=t=>{var e=A.useContext(Kee);if(e!=null){var{stackId:n}=e;return"url(#".concat(uLe(n,t),")")}},Wee=t=>{var{index:e}=t,n=oLe(t,sLe),r=dLe(e);return A.createElement(oi,zP({className:"recharts-bar-stack-layer",clipPath:r},n))},fLe=["onMouseEnter","onMouseLeave","onClick"],hLe=["value","background","tooltipPosition"],pLe=["id"],gLe=["onMouseEnter","onClick","onMouseLeave"];function Pl(){return Pl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pl.apply(null,arguments)}function V9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V9(Object(n),!0).forEach(function(r){mLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mLe(t,e,n){return(e=vLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vLe(t){var e=yLe(t,"string");return typeof e=="symbol"?e:e+""}function yLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bS(t,e){if(t==null)return{};var n,r,i=bLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var xLe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:R_(n,e),payload:t}]},wLe=A.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:s,unit:o,tooltipType:c,id:u}=t,f={dataDefinedOnItem:void 0,getPosition:og,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:R_(a,e),hide:s,type:c,color:i,unit:o,graphicalItemId:u}};return A.createElement(Pee,{tooltipEntrySettings:f})});function SLe(t){var e=qe(rf),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:s,onMouseLeave:o,onClick:c}=a,u=bS(a,fLe),f=TM(s,r,a.id),h=AM(o),g=kM(c,r,a.id);if(!i||n==null)return null;var v=t0(i);return A.createElement(Qa,{zIndex:t4e(i,Rr.barBackground)},n.map((b,x)=>{var{value:w,background:S,tooltipPosition:T}=b,I=bS(b,hLe);if(!S)return null;var P=f(b,x),O=h(b,x),D=g(b,x),N=mi(mi(mi(mi(mi({option:i,isActive:String(x)===e},I),{},{fill:"#eee"},S),v),J0(u,b,x)),{},{onMouseEnter:P,onMouseLeave:O,onClick:D,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return A.createElement(yS,Pl({key:"background-bar-".concat(x)},N))}))}function _Le(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return mi(mi({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return A.createElement(sje,{value:e?i:void 0},n)}function ELe(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:s}=t,o=qe(rf),c=qe(mM),u=n&&String(a)===o&&(c==null||s===c),f=u?n:e;return u?A.createElement(Qa,{zIndex:Rr.activeBar},A.createElement(Wee,{index:a},A.createElement(yS,Pl({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s})))):A.createElement(yS,Pl({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s}))}function TLe(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return A.createElement(yS,Pl({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function ALe(t){var e,{data:n,props:r}=t,i=(e=Cs(r))!==null&&e!==void 0?e:{},{id:a}=i,s=bS(i,pLe),{shape:o,dataKey:c,activeBar:u}=r,{onMouseEnter:f,onClick:h,onMouseLeave:g}=r,v=bS(r,gLe),b=TM(f,c,a),x=AM(g),w=kM(h,c,a);return n?A.createElement(A.Fragment,null,n.map((S,T)=>A.createElement(Wee,Pl({index:T,key:"rectangle-".concat(S?.x,"-").concat(S?.y,"-").concat(S?.value,"-").concat(T),className:"recharts-bar-rectangle"},J0(v,S,T),{onMouseEnter:b(S,T),onMouseLeave:x(S,T),onClick:w(S,T)}),u?A.createElement(ELe,{shape:o,activeBar:u,baseProps:s,entry:S,index:T,dataKey:c}):A.createElement(TLe,{shape:o,baseProps:s,entry:S,index:T,dataKey:c})))):null}function kLe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:f}=e,h=n.current,g=q_(e,"recharts-bar-"),[v,b]=A.useState(!1),x=!v,w=A.useCallback(()=>{typeof u=="function"&&u(),b(!1)},[u]),S=A.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return A.createElement(_Le,{showLabels:x,rects:r},A.createElement(U_,{animationId:g,begin:s,duration:o,isActive:a,easing:c,onAnimationEnd:w,onAnimationStart:S,key:g},T=>{var I=T===1?r:r?.map((P,O)=>{var D=h&&h[O];if(D)return mi(mi({},P),{},{x:pr(D.x,P.x,T),y:pr(D.y,P.y,T),width:pr(D.width,P.width,T),height:pr(D.height,P.height,T)});if(i==="horizontal"){var N=pr(0,P.height,T),C=pr(P.stackedBarStart,P.y,T);return mi(mi({},P),{},{y:C,height:N})}var R=pr(0,P.width,T),M=pr(P.stackedBarStart,P.x,T);return mi(mi({},P),{},{width:R,x:M})});return T>0&&(n.current=I??null),I==null?null:A.createElement(oi,null,A.createElement(ALe,{props:e,data:I}))}),A.createElement(_ee,{label:e.label}),e.children)}function CLe(t){var e=A.useRef(null);return A.createElement(kLe,{previousRectanglesRef:e,props:t})}var Yee=0,ILe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:pn(t,e)}};class NLe extends A.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:s,needClip:o,background:c,id:u}=this.props;if(e||n==null)return null;var f=Vt("recharts-bar",i),h=u;return A.createElement(oi,{className:f,id:u},o&&A.createElement("defs",null,A.createElement(b3e,{clipPathId:h,xAxisId:a,yAxisId:s})),A.createElement(oi,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(h,")"):void 0},A.createElement(SLe,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),A.createElement(CLe,this.props)))}}var PLe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Yee,xAxisId:0,yAxisId:0,zIndex:Rr.bar};function OLe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f}=t,{needClip:h}=Gee(e,n),g=lg(),v=Ei(),b=EM(t.children,yy),x=qe(T=>aLe(T,t.id,v,b));if(g!=="vertical"&&g!=="horizontal")return null;var w,S=x?.[0];return S==null||S.height==null||S.width==null?w=0:w=g==="vertical"?S.height/2:S.width/2,A.createElement(y3e,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:ILe,errorBarOffset:w},A.createElement(NLe,Pl({},t,{layout:g,needClip:h,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f})))}function DLe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:f,displayedData:h,offset:g,cells:v,parentViewBox:b,dataStartIndex:x}=t,w=e==="horizontal"?o:s,S=f?w.scale.domain():null,T=Ske({numericAxis:w}),I=w.scale.map(T);return h.map((P,O)=>{var D,N,C,R,M,V;if(f){var L=f[O+x];if(L==null)return null;D=mke(L,S)}else D=pn(P,n),Array.isArray(D)||(D=[T,D]);var z=$3e(r,Yee)(D[1],O);if(e==="horizontal"){var K,Y=o.scale.map(D[0]),G=o.scale.map(D[1]);if(Y==null||G==null)return null;N=SF({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:P,index:O}),C=(K=G??Y)!==null&&K!==void 0?K:void 0,R=i.size;var X=Y-G;if(M=To(X)?0:X,V={x:N,y:g.top,width:R,height:g.height},Math.abs(z)>0&&Math.abs(M)<Math.abs(z)){var J=Dr(M||z)*(Math.abs(z)-Math.abs(M));C-=J,M+=J}}else{var ne=s.scale.map(D[0]),Q=s.scale.map(D[1]);if(ne==null||Q==null)return null;if(N=ne,C=SF({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:P,index:O}),R=Q-ne,M=i.size,V={x:g.left,y:C,width:g.width,height:M},Math.abs(z)>0&&Math.abs(R)<Math.abs(z)){var $=Dr(R||z)*(Math.abs(z)-Math.abs(R));R+=$}}if(N==null||C==null||R==null||M==null)return null;var Z=mi(mi({},P),{},{stackedBarStart:I,x:N,y:C,width:R,height:M,value:f?D:D[1],payload:P,background:V,tooltipPosition:{x:N+R/2,y:C+M/2},parentViewBox:b},v&&v[O]&&v[O].props);return Z}).filter(Boolean)}function RLe(t){var e=Sr(t,PLe),n=cLe(e.stackId),r=Ei();return A.createElement(Oee,{id:e.id,type:"bar"},i=>A.createElement(A.Fragment,null,A.createElement(Kje,{legendPayload:xLe(e)}),A.createElement(wLe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),A.createElement(oze,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),A.createElement(Qa,{zIndex:e.zIndex},A.createElement(OLe,Pl({},e,{id:i})))))}var sf=A.memo(RLe,PM);sf.displayName="Bar";var MLe=["domain","range"],jLe=["domain","range"];function B9(t,e){if(t==null)return{};var n,r,i=zLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function F9(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Xee(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=B9(t,MLe),{domain:a,range:s}=e,o=B9(e,jLe);return!F9(n,a)||!F9(r,s)?!1:PM(i,o)}var LLe=["type"],VLe=["dangerouslySetInnerHTML","ticks","scale"],BLe=["id","scale"];function LP(){return LP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LP.apply(null,arguments)}function $9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$9(Object(n),!0).forEach(function(r){FLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FLe(t,e,n){return(e=$Le(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Le(t){var e=ULe(t,"string");return typeof e=="symbol"?e:e+""}function ULe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VP(t,e){if(t==null)return{};var n,r,i=qLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function GLe(t){var e=sn(),n=A.useRef(null),r=zQ(),{type:i}=t,a=VP(t,LLe),s=J_(r,"xAxis",i),o=A.useMemo(()=>{if(s!=null)return U9(U9({},a),{},{type:s})},[a,s]);return A.useLayoutEffect(()=>{o!=null&&(n.current===null?e(zze(o)):n.current!==o&&e(Lze({prev:n.current,next:o})),n.current=o)},[o,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(Vze(n.current)),n.current=null)},[e]),null}var HLe=t=>{var{xAxisId:e,className:n}=t,r=qe(rR),i=Ei(),a="xAxis",s=qe(S=>OJ(S,a,e,i)),o=qe(S=>CJ(S,e)),c=qe(S=>jOe(S,e)),u=qe(S=>cJ(S,e));if(o==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:f,ticks:h,scale:g}=t,v=VP(t,VLe),{id:b,scale:x}=u,w=VP(u,BLe);return A.createElement(NM,LP({},v,w,{x:c.x,y:c.y,width:o.width,height:o.height,className:Vt("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:s,axisType:a}))},KLe={allowDataOverflow:Ir.allowDataOverflow,allowDecimals:Ir.allowDecimals,allowDuplicatedCategory:Ir.allowDuplicatedCategory,angle:Ir.angle,axisLine:gl.axisLine,height:Ir.height,hide:!1,includeHidden:Ir.includeHidden,interval:Ir.interval,label:!1,minTickGap:Ir.minTickGap,mirror:Ir.mirror,orientation:Ir.orientation,padding:Ir.padding,reversed:Ir.reversed,scale:Ir.scale,tick:Ir.tick,tickCount:Ir.tickCount,tickLine:gl.tickLine,tickSize:gl.tickSize,type:Ir.type,xAxisId:0},WLe=t=>{var e=Sr(t,KLe);return A.createElement(A.Fragment,null,A.createElement(GLe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),A.createElement(HLe,e))},wy=A.memo(WLe,Xee);wy.displayName="XAxis";var YLe=["type"],XLe=["dangerouslySetInnerHTML","ticks","scale"],QLe=["id","scale"];function BP(){return BP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BP.apply(null,arguments)}function q9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q9(Object(n),!0).forEach(function(r){ZLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZLe(t,e,n){return(e=JLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JLe(t){var e=e5e(t,"string");return typeof e=="symbol"?e:e+""}function e5e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FP(t,e){if(t==null)return{};var n,r,i=t5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function t5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function n5e(t){var e=sn(),n=A.useRef(null),r=zQ(),{type:i}=t,a=FP(t,YLe),s=J_(r,"yAxis",i),o=A.useMemo(()=>{if(s!=null)return G9(G9({},a),{},{type:s})},[s,a]);return A.useLayoutEffect(()=>{o!=null&&(n.current===null?e(Bze(o)):n.current!==o&&e(Fze({prev:n.current,next:o})),n.current=o)},[o,e]),A.useLayoutEffect(()=>()=>{n.current&&(e($ze(n.current)),n.current=null)},[e]),null}function r5e(t){var{yAxisId:e,className:n,width:r,label:i}=t,a=A.useRef(null),s=A.useRef(null),o=qe(rR),c=Ei(),u=sn(),f="yAxis",h=qe(D=>IJ(D,e)),g=qe(D=>LOe(D,e)),v=qe(D=>OJ(D,f,e,c)),b=qe(D=>uJ(D,e));if(A.useLayoutEffect(()=>{if(!(r!=="auto"||!h||wM(i)||A.isValidElement(i)||b==null)){var D=a.current;if(D){var N=D.getCalculatedWidth();Math.round(h.width)!==Math.round(N)&&u(Uze({id:e,width:N}))}}},[v,h,u,i,e,r,b]),h==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:x,ticks:w,scale:S}=t,T=FP(t,XLe),{id:I,scale:P}=b,O=FP(b,QLe);return A.createElement(NM,BP({},T,O,{ref:a,labelRef:s,x:g.x,y:g.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Vt("recharts-".concat(f," ").concat(f),n),viewBox:o,ticks:v,axisType:f}))}var i5e={allowDataOverflow:Nr.allowDataOverflow,allowDecimals:Nr.allowDecimals,allowDuplicatedCategory:Nr.allowDuplicatedCategory,angle:Nr.angle,axisLine:gl.axisLine,hide:!1,includeHidden:Nr.includeHidden,interval:Nr.interval,label:!1,minTickGap:Nr.minTickGap,mirror:Nr.mirror,orientation:Nr.orientation,padding:Nr.padding,reversed:Nr.reversed,scale:Nr.scale,tick:Nr.tick,tickCount:Nr.tickCount,tickLine:gl.tickLine,tickSize:gl.tickSize,type:Nr.type,width:Nr.width,yAxisId:0},a5e=t=>{var e=Sr(t,i5e);return A.createElement(A.Fragment,null,A.createElement(n5e,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),A.createElement(r5e,e))},Sy=A.memo(a5e,Xee);Sy.displayName="YAxis";var s5e=(t,e)=>e,OM=ve([s5e,Bt,sJ,zr,YJ,Bl,JDe,_r],sRe),DM=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},Qee=Ha("mouseClick"),Zee=ty();Zee.startListening({actionCreator:Qee,effect:(t,e)=>{var n=t.payload,r=OM(e.getState(),DM(n));r?.activeIndex!=null&&e.dispatch(ZOe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var $P=Ha("mouseMove"),Jee=ty(),Ux=null;Jee.startListening({actionCreator:$P,effect:(t,e)=>{var n=t.payload;Ux!==null&&cancelAnimationFrame(Ux);var r=DM(n);Ux=requestAnimationFrame(()=>{var i=e.getState(),a=uM(i,i.tooltip.settings.shared);if(a==="axis"){var s=OM(i,r);s?.activeIndex!=null?e.dispatch(BJ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(VJ())}Ux=null})}});function o5e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var H9={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},ete=Hi({name:"rootProps",initialState:H9,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:H9.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),l5e=ete.reducer,{updateOptions:c5e}=ete.actions,u5e=null,d5e={updatePolarOptions:(t,e)=>e.payload},tte=Hi({name:"polarOptions",initialState:u5e,reducers:d5e}),{updatePolarOptions:f5e}=tte.actions,h5e=tte.reducer,nte=Ha("keyDown"),rte=Ha("focus"),RM=ty();RM.startListening({actionCreator:nte,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=dM(i,vg(n),py(n),my(n)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=Bl(n);if(a==="Enter"){var u=fS(n,"axis","hover",String(i.index));e.dispatch(OP({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var f=$Oe(n),h=f==="left-to-right"?1:-1,g=a==="ArrowRight"?1:-1,v=o+g*h;if(!(c==null||v>=c.length||v<0)){var b=fS(n,"axis","hover",String(v));e.dispatch(OP({active:!0,activeIndex:v.toString(),activeCoordinate:b}))}}}}}});RM.startListening({actionCreator:rte,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",s=fS(n,"axis","hover",String(a));e.dispatch(OP({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Ra=Ha("externalEvent"),ite=ty(),rI=new Map;ite.startListening({actionCreator:Ra,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=rI.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),c={activeCoordinate:LDe(o),activeDataKey:mM(o),activeIndex:rf(o),activeLabel:ZJ(o),activeTooltipIndex:rf(o),isTooltipActive:VDe(o)};n(c,r)}finally{rI.delete(i)}});rI.set(i,s)}}});var p5e=ve([gg],t=>t.tooltipItemPayloads),g5e=ve([p5e,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(a=>a.settings.graphicalItemId===n);if(r!=null){var{getPosition:i}=r;if(i!=null)return i(e)}}}),ate=Ha("touchMove"),ste=ty();ste.startListening({actionCreator:ate,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=uM(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var s=OM(r,DM({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(BJ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var f=u.getAttribute(PQ),h=(o=u.getAttribute(OQ))!==null&&o!==void 0?o:void 0,g=mg(r).find(x=>x.id===h);if(f==null||g==null||h==null)return;var{dataKey:v}=g,b=g5e(r,f,h);e.dispatch(LJ({activeDataKey:v,activeIndex:f,activeCoordinate:b,activeGraphicalItemId:h}))}}}});var m5e=JX({brush:n4e,cartesianAxis:qze,chartData:zRe,errorBars:f3e,graphicalItems:aze,layout:dke,legend:yCe,options:ORe,polarAxis:yje,polarOptions:h5e,referenceElements:u4e,rootProps:l5e,tooltip:JOe,zIndex:xRe}),v5e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return jAe({reducer:m5e,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([Zee.middleware,Jee.middleware,RM.middleware,ite.middleware,ste.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(pQ({type:"raf"}))},devTools:{serialize:{replacer:o5e},name:"recharts-".concat(n)}})};function ote(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Ei(),a=A.useRef(null);if(i)return n;a.current==null&&(a.current=v5e(e,r));var s=XD;return A.createElement(z3e,{context:s,store:a.current},n)}function y5e(t){var{layout:e,margin:n}=t,r=sn(),i=Ei();return A.useEffect(()=>{i||(r(lke(e)),r(oke(n)))},[r,i,e,n]),null}var lte=A.memo(y5e,PM);function cte(t){var e=sn();return A.useEffect(()=>{e(c5e(t))},[e,t]),null}function K9(t){var{zIndex:e,isPanorama:n}=t,r=A.useRef(null),i=sn();return A.useLayoutEffect(()=>(r.current&&i(yRe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(bRe({zIndex:e,isPanorama:n}))}),[i,e,n]),A.createElement("g",{tabIndex:-1,ref:r})}function W9(t){var{children:e,isPanorama:n}=t,r=qe(lRe);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return A.createElement(A.Fragment,null,i.map(s=>A.createElement(K9,{key:s,zIndex:s,isPanorama:n})),e,a.map(s=>A.createElement(K9,{key:s,zIndex:s,isPanorama:n})))}var b5e=["children"];function x5e(t,e){if(t==null)return{};var n,r,i=w5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function w5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function xS(){return xS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xS.apply(null,arguments)}var S5e={width:"100%",height:"100%",display:"block"},_5e=A.forwardRef((t,e)=>{var n=sR(),r=oR(),i=XQ();if(!Ao(n)||!Ao(r))return null;var{children:a,otherAttributes:s,title:o,desc:c}=t,u,f;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0),A.createElement(BD,xS({},s,{title:o,desc:c,role:f,tabIndex:u,width:n,height:r,style:S5e,ref:e}),a)}),E5e=t=>{var{children:e}=t,n=qe(L_);if(!n)return null;var{width:r,height:i,y:a,x:s}=n;return A.createElement(BD,{width:r,height:i,x:s,y:a},e)},Y9=A.forwardRef((t,e)=>{var{children:n}=t,r=x5e(t,b5e),i=Ei();return i?A.createElement(E5e,null,A.createElement(W9,{isPanorama:!0},n)):A.createElement(_5e,xS({ref:e},r),A.createElement(W9,{isPanorama:!1},n))});function T5e(){var t=sn(),[e,n]=A.useState(null),r=qe(Cke);return A.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;vt(a)&&a!==r&&t(uke(a))}},[e,t,r]),n}function X9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function A5e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X9(Object(n),!0).forEach(function(r){k5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k5e(t,e,n){return(e=C5e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C5e(t){var e=I5e(t,"string");return typeof e=="symbol"?e:e+""}function I5e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xc(){return Xc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xc.apply(null,arguments)}var N5e=()=>(HRe(),null);function wS(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var P5e=A.forwardRef((t,e)=>{var n,r,i=A.useRef(null),[a,s]=A.useState({containerWidth:wS((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:wS((r=t.style)===null||r===void 0?void 0:r.height)}),o=A.useCallback((u,f)=>{s(h=>{var g=Math.round(u),v=Math.round(f);return h.containerWidth===g&&h.containerHeight===v?h:{containerWidth:g,containerHeight:v}})},[]),c=A.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:f,height:h}=u.getBoundingClientRect();o(f,h);var g=b=>{var x=b[0];if(x!=null){var{width:w,height:S}=x.contentRect;o(w,S)}},v=new ResizeObserver(g);v.observe(u),i.current=v}},[e,o]);return A.useEffect(()=>()=>{var u=i.current;u?.disconnect()},[o]),A.createElement(A.Fragment,null,A.createElement(ay,{width:a.containerWidth,height:a.containerHeight}),A.createElement("div",Xc({ref:c},t)))}),O5e=A.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=A.useState({containerWidth:wS(n),containerHeight:wS(r)}),s=A.useCallback((c,u)=>{a(f=>{var h=Math.round(c),g=Math.round(u);return f.containerWidth===h&&f.containerHeight===g?f:{containerWidth:h,containerHeight:g}})},[]),o=A.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:f}=c.getBoundingClientRect();s(u,f)}},[e,s]);return A.createElement(A.Fragment,null,A.createElement(ay,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",Xc({ref:o},t)))}),D5e=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return A.createElement(A.Fragment,null,A.createElement(ay,{width:n,height:r}),A.createElement("div",Xc({ref:e},t)))}),R5e=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?A.createElement(O5e,Xc({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?A.createElement(D5e,Xc({},t,{width:n,height:r,ref:e})):A.createElement(A.Fragment,null,A.createElement(ay,{width:n,height:r}),A.createElement("div",Xc({ref:e},t)))});function M5e(t){return t?P5e:R5e}var j5e=A.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:f,onMouseMove:h,onMouseUp:g,onTouchEnd:v,onTouchMove:b,onTouchStart:x,style:w,width:S,responsive:T,dispatchTouchEvents:I=!0}=t,P=A.useRef(null),O=sn(),[D,N]=A.useState(null),[C,R]=A.useState(null),M=T5e(),V=iR(),L=V?.width>0?V.width:S,z=V?.height>0?V.height:i,K=A.useCallback(ae=>{M(ae),typeof e=="function"&&e(ae),N(ae),R(ae),ae!=null&&(P.current=ae)},[M,e,N,R]),Y=A.useCallback(ae=>{O(Qee(ae)),O(Ra({handler:a,reactEvent:ae}))},[O,a]),G=A.useCallback(ae=>{O($P(ae)),O(Ra({handler:u,reactEvent:ae}))},[O,u]),X=A.useCallback(ae=>{O(VJ()),O(Ra({handler:f,reactEvent:ae}))},[O,f]),J=A.useCallback(ae=>{O($P(ae)),O(Ra({handler:h,reactEvent:ae}))},[O,h]),ne=A.useCallback(()=>{O(rte())},[O]),Q=A.useCallback(ae=>{O(nte(ae.key))},[O]),$=A.useCallback(ae=>{O(Ra({handler:s,reactEvent:ae}))},[O,s]),Z=A.useCallback(ae=>{O(Ra({handler:o,reactEvent:ae}))},[O,o]),ee=A.useCallback(ae=>{O(Ra({handler:c,reactEvent:ae}))},[O,c]),W=A.useCallback(ae=>{O(Ra({handler:g,reactEvent:ae}))},[O,g]),ue=A.useCallback(ae=>{O(Ra({handler:x,reactEvent:ae}))},[O,x]),ie=A.useCallback(ae=>{I&&O(ate(ae)),O(Ra({handler:b,reactEvent:ae}))},[O,I,b]),oe=A.useCallback(ae=>{O(Ra({handler:v,reactEvent:ae}))},[O,v]),Se=M5e(T);return A.createElement(aee.Provider,{value:D},A.createElement(vX.Provider,{value:C},A.createElement(Se,{width:L??w?.width,height:z??w?.height,className:Vt("recharts-wrapper",r),style:A5e({position:"relative",cursor:"default",width:L,height:z},w),onClick:Y,onContextMenu:$,onDoubleClick:Z,onFocus:ne,onKeyDown:Q,onMouseDown:ee,onMouseEnter:G,onMouseLeave:X,onMouseMove:J,onMouseUp:W,onTouchEnd:oe,onTouchMove:ie,onTouchStart:ue,ref:K},A.createElement(N5e,null),n)))}),z5e=["width","height","responsive","children","className","style","compact","title","desc"];function L5e(t,e){if(t==null)return{};var n,r,i=V5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function V5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ute=A.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:s,style:o,compact:c,title:u,desc:f}=t,h=L5e(t,z5e),g=Cs(h);return c?A.createElement(A.Fragment,null,A.createElement(ay,{width:n,height:r}),A.createElement(Y9,{otherAttributes:g,title:u,desc:f},a)):A.createElement(j5e,{className:s,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(Y9,{otherAttributes:g,title:u,desc:f,ref:e},A.createElement(d4e,null,a)))});function UP(){return UP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UP.apply(null,arguments)}var B5e={top:5,right:5,bottom:5,left:5},F5e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:B5e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},$5e=A.forwardRef(function(e,n){var r,i=Sr(e.categoricalChartProps,F5e),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,f={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return A.createElement(ote,{preloadedState:{options:f},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:a},A.createElement(Lee,{chartData:u.data}),A.createElement(lte,{layout:i.layout,margin:i.margin}),A.createElement(cte,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(ute,UP({},i,{ref:n})))}),U5e=["axis","item"],hE=A.forwardRef((t,e)=>A.createElement($5e,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:U5e,tooltipPayloadSearcher:see,categoricalChartProps:t,ref:e}));function q5e(t){var e=sn();return A.useEffect(()=>{e(f5e(t))},[e,t]),null}var G5e=["layout"];function qP(){return qP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qP.apply(null,arguments)}function H5e(t,e){if(t==null)return{};var n,r,i=K5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function K5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var W5e={top:5,right:5,bottom:5,left:5},dte={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:W5e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Y5e=A.forwardRef(function(e,n){var r,i=Sr(e.categoricalChartProps,dte),{layout:a}=i,s=H5e(i,G5e),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f}=e,h={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return A.createElement(ote,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:o},A.createElement(Lee,{chartData:i.data}),A.createElement(lte,{layout:a,margin:i.margin}),A.createElement(cte,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(q5e,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(ute,qP({},s,{ref:n})))});function Q9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Z9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q9(Object(n),!0).forEach(function(r){X5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X5e(t,e,n){return(e=Q5e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q5e(t){var e=Z5e(t,"string");return typeof e=="symbol"?e:e+""}function Z5e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var J5e=["item"],eVe=Z9(Z9({},dte),{},{layout:"centric",startAngle:0,endAngle:360}),tVe=A.forwardRef((t,e)=>{var n=Sr(t,eVe);return A.createElement(Y5e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:J5e,tooltipPayloadSearcher:see,categoricalChartProps:n,ref:e})});const J9=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316","#14B8A6","#6366F1","#84CC16","#D946EF"],e8=["#10B981","#3B82F6","#F59E0B","#8B5CF6","#06B6D4","#F97316","#EC4899","#14B8A6"];function MM(t,e){const n=[];if(t.startsWith("year-")){const c=parseInt(t.split("-")[1],10);for(let u=1;u<=12;u++)n.push(`${c}-${String(u).padStart(2,"0")}`);return n}const i={"1m":1,"3m":3,"6m":6,"9m":9,"12m":12}[t]||1,[a,s]=e.split("-").map(Number),o=new Date(a,s-1,1);for(let c=i-1;c>=0;c--){const u=new Date(o.getFullYear(),o.getMonth()-c,1),f=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`;n.push(f)}return n}const nVe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function qx(t){const e=parseInt(t.split("-")[1],10);return nVe[e-1]||t}function rVe(t){const e={};return t.forEach((n,r)=>{e[n.id]=J9[r%J9.length]}),e}function iVe(t){const e={};return[...new Set(t)].forEach((r,i)=>{e[r]=e8[i%e8.length]}),e}function aVe(t){const{transactions:e,envelopes:n,categories:r,incomeSources:i,currentMonth:a}=mt(),s=A.useMemo(()=>MM(t,a),[t,a]),o=A.useMemo(()=>{const S={};return n.forEach(T=>{S[T.id]=T.categoryId||"uncategorized"}),S},[n]),c=A.useMemo(()=>rVe(r),[r]),u=A.useMemo(()=>{const S={};return r.forEach(T=>{S[T.id]=T.name}),S},[r]),f=A.useMemo(()=>new Set(n.filter(S=>!!S.isPiggybank).map(S=>S.id)),[n]),h=A.useMemo(()=>{const S=new Set;return r.forEach(T=>{T.name.toLowerCase()==="savings"&&S.add(T.id)}),S},[r]),g=A.useMemo(()=>{const S=new Set(s);return e.filter(T=>T.type==="Expense"&&T.month&&S.has(T.month))},[e,s]),v=A.useMemo(()=>{const S={};r.forEach(P=>{S[P.id]=0}),g.forEach(P=>{const O=o[P.envelopeId]||"uncategorized";S[O]=(S[O]||0)+Math.abs(P.amount)});const T=Object.entries(S).map(([P,O])=>({categoryId:P,categoryName:u[P]||"Uncategorized",color:c[P]||"#9CA3AF",amount:Math.round(O*100)/100})).sort((P,O)=>O.amount-P.amount),I=T.reduce((P,O)=>P+O.amount,0);return{items:T,total:Math.round(I*100)/100}},[g,o,u,c,r]),b=A.useMemo(()=>{const S=new Set(r.map(C=>C.id)),T={};s.forEach(C=>{T[C]={}}),g.forEach(C=>{const R=o[C.envelopeId]||"uncategorized",M=C.month;T[M]&&(T[M][R]=(T[M][R]||0)+Math.abs(C.amount),S.add(R))});const I=[...S],P={};I.forEach(C=>{P[C]=c[C]||"#9CA3AF"});const O=s.map(C=>{const R={month:C,monthLabel:qx(C)};return I.forEach(M=>{R[M]=Math.round((T[C][M]||0)*100)/100}),R}),D=O.map(C=>I.reduce((R,M)=>R+(C[M]||0),0)),N=D.length>0?Math.round(D.reduce((C,R)=>C+R,0)/D.length):0;return{data:O,categoryKeys:I,colorMap:P,average:N}},[s,g,o,c,r]),x=A.useMemo(()=>{const S=[],T={};s.forEach(C=>{T[C]={}}),s.forEach(C=>{(i[C]||[]).forEach(M=>{S.push(M.name),T[C][M.name]=(T[C][M.name]||0)+M.amount})});const I=[...new Set(S)],P=iVe(I),O=s.map(C=>{const R={month:C,monthLabel:qx(C)};return I.forEach(M=>{R[M]=Math.round((T[C][M]||0)*100)/100}),R}),D=O.map(C=>I.reduce((R,M)=>R+(C[M]||0),0)),N=D.length>0?Math.round(D.reduce((C,R)=>C+R,0)/D.length):0;return{data:O,sourceKeys:I,colorMap:P,average:N}},[s,i]),w=A.useMemo(()=>({data:s.map(T=>{const P=(i[T]||[]).reduce((Y,G)=>Y+G.amount,0),O=e.filter(Y=>Y.month===T),D=O.filter(Y=>{if(Y.type!=="Expense")return!1;const G=o[Y.envelopeId]||"uncategorized";return h.has(G)}),N=D.reduce((Y,G)=>Y+Math.abs(G.amount),0),C={};D.forEach(Y=>{const G=Y.envelopeId;C[G]=(C[G]||0)+Math.abs(Y.amount)});const R=O.filter(Y=>Y.type!=="Income"||!f.has(Y.envelopeId)?!1:Y.description==="Piggybank Contribution"||Y.description==="Monthly Allocation"||!!Y.isAutomatic),M=R.reduce((Y,G)=>Y+Math.abs(G.amount),0),V={};R.forEach(Y=>{const G=Y.envelopeId;V[G]=(V[G]||0)+Math.abs(Y.amount)});const L=N+M;if(yn.info("Analytics",`Savings calculation for ${T}`,{totalIncome:P,savingsCategorySpending:N,piggybankContributions:M,savingsAmount:L,savingsCategoryIds:Array.from(h),piggybankEnvelopeIds:Array.from(f),savingsByEnvelope:C,piggybankByEnvelope:V}),P<=0)return yn.info("Analytics",`No income for ${T}, setting savings to 0%`),{month:T,monthLabel:qx(T),savingsPercent:0,spendingPercent:100};const z=Math.min(100,Math.round(L/P*1e3)/10),K=Math.round((100-z)*10)/10;return yn.info("Analytics",`Savings rate for ${T}`,{savingsPercent:z,spendingPercent:K,calculation:`(${N} + ${M})  ${P}  100 = ${z}%`}),{month:T,monthLabel:qx(T),savingsPercent:z,spendingPercent:K}})}),[s,i,e,o,h,f]);return{months:s,spendingTotals:v,spendingBreakdown:b,monthlyIncome:x,savingsData:w,categoryNameMap:u,categoryColorMap:c}}const sVe=[{key:"totals",label:"Spending Totals"},{key:"breakdown",label:"Spending Breakdown"},{key:"income",label:"Monthly Income"},{key:"savings",label:"Savings"}],oVe=[{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"6m",label:"6 Months"},{value:"9m",label:"9 Months"},{value:"12m",label:"12 Months"}];function lVe(){const t=new Date().getFullYear(),e=[];for(let n=t;n>=2024;n--)e.push({value:`year-${n}`,label:`${n}`});return e}const jM=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),SS=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),fte=({active:t,payload:e,label:n,nameMap:r})=>{if(!t||!e?.length)return null;const i=e.reduce((a,s)=>a+(s.value||0),0);return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),e.map((a,s)=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:a.fill||a.color}}),m.jsxs("span",{className:"text-zinc-600 dark:text-zinc-300",children:[r?.[a.dataKey]||a.dataKey,":"]}),m.jsx("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:SS(a.value)})]},s)),m.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-700 mt-1.5 pt-1.5 flex justify-between font-semibold",children:[m.jsx("span",{className:"text-zinc-700 dark:text-zinc-200",children:"Total"}),m.jsx("span",{className:"text-zinc-900 dark:text-white",children:SS(i)})]})]})},cVe=({active:t,payload:e,label:n})=>{if(!t||!e?.length)return null;const r=e.find(a=>a.dataKey==="savingsPercent"),i=e.find(a=>a.dataKey==="spendingPercent");return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),r&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#3B82F6"}}),m.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Savings & Investments:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[r.value.toFixed(1),"%"]})]}),i&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#4ADE80"}}),m.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Spending:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[i.value.toFixed(1),"%"]})]})]})},uVe=()=>{const t=Gi(),[e,n]=A.useState("totals"),[r,i]=A.useState("12m"),{currentMonth:a}=mt(),s=mt(b=>b.fetchMonthData),o=A.useMemo(()=>lVe(),[]),c=A.useRef(new Set);A.useEffect(()=>{const b=MM(r,a),x=mt.getState(),w=b.filter(T=>{if(c.current.has(T)||x.areAllTransactionsLoaded)return!1;const I=x.incomeSources[T]!==void 0,P=x.loadedTransactionMonths.includes(T);return!I||!P});if(w.length===0)return;w.forEach(T=>c.current.add(T)),(async()=>{for(const T of w)try{await s(T)}catch(I){console.error(`Failed to fetch data for month ${T}:`,I),c.current.delete(T)}})()},[r,a,s]);const{spendingTotals:u,spendingBreakdown:f,monthlyIncome:h,savingsData:g,categoryNameMap:v}=aVe(r);return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-32",children:[m.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50 safe-area-top",children:[m.jsxs("div",{className:"flex items-center gap-3 px-4 pt-2 pb-2",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:m.jsx($a,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),m.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Charts"})]}),m.jsx("div",{className:"px-4 pb-2",children:m.jsx("div",{className:"flex flex-wrap gap-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl p-1",children:sVe.map(({key:b,label:x})=>m.jsx("button",{onClick:()=>n(b),className:`
                  flex-1 min-w-0 px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200
                  ${e===b?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}
                `,children:x},b))})}),m.jsx("div",{className:"px-4 pb-3 overflow-x-auto scrollbar-hide",children:m.jsxs("div",{className:"inline-flex gap-1.5 min-w-max",children:[oVe.map(({value:b,label:x})=>m.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b)),o.map(({value:b,label:x})=>m.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b))]})})]}),m.jsxs("div",{className:"px-4 pt-4",children:[e==="totals"&&m.jsx(dVe,{items:u.items,total:u.total}),e==="breakdown"&&m.jsx(fVe,{data:f.data,categoryKeys:f.categoryKeys,colorMap:f.colorMap,nameMap:v,average:f.average}),e==="income"&&m.jsx(hVe,{data:h.data,sourceKeys:h.sourceKeys,colorMap:h.colorMap,average:h.average}),e==="savings"&&m.jsx(pVe,{data:g.data})]})]})},dVe=({items:t,total:e})=>{const[n,r]=A.useState(null);if(t.length===0)return m.jsx(pE,{message:"No spending data for this time period."});const i=n!==null?t[n]:null,a=i&&e>0?(i.amount/e*100).toFixed(1):"0";return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"relative no-select-chart",children:[m.jsx(ry,{width:"100%",height:280,children:m.jsx(tVe,{children:m.jsx(Ree,{data:t,dataKey:"amount",nameKey:"categoryName",cx:"50%",cy:"50%",innerRadius:"55%",outerRadius:"80%",paddingAngle:2,strokeWidth:0,isAnimationActive:!1,onMouseEnter:(s,o)=>r(o),onMouseLeave:()=>r(null),onClick:(s,o)=>r(n===o?null:o),children:t.map((s,o)=>m.jsx(yy,{fill:s.color,opacity:n===null||n===o?1:.5,style:{cursor:"pointer"}},o))})})}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none z-0",children:[m.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Total Spent"}),m.jsx("span",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:jM(e)})]})]}),m.jsx("div",{className:"min-h-[48px] flex items-center justify-center mt-1",children:i?m.jsxs("div",{className:"flex items-center gap-2.5 bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl px-4 py-2 shadow-sm text-sm",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:i.color}}),m.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:i.categoryName}),m.jsx("span",{className:"text-zinc-500 dark:text-zinc-400",children:""}),m.jsx("span",{className:"text-zinc-700 dark:text-zinc-300",children:SS(i.amount)}),m.jsxs("span",{className:"text-zinc-500 dark:text-zinc-400",children:["(",a,"%)"]})]}):m.jsx("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"Tap a slice to see details"})})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Categories"}),m.jsx("div",{className:"space-y-2",children:t.map(s=>{const o=e>0?(s.amount/e*100).toFixed(1):"0";return m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2.5",children:[m.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:s.color}}),m.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:s.categoryName})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:[o,"%"]}),m.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white w-20 text-right",children:SS(s.amount)})]})]},s.categoryId)})})]})]})},fVe=({data:t,categoryKeys:e,colorMap:n,nameMap:r,average:i})=>t.length===0||e.length===0?m.jsx(pE,{message:"No spending data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Spending by Category"}),m.jsx(ry,{width:"100%",height:300,children:m.jsxs(hE,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(by,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(wy,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(Sy,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(lE,{cursor:!1,content:a=>m.jsx(fte,{...a,colorMap:n,nameMap:r})}),m.jsx(CM,{y:i,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${jM(i)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>m.jsx(sf,{dataKey:a,stackId:"spending",fill:n[a],radius:[0,0,0,0],name:r[a]||a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),m.jsx(hte,{keys:e,colorMap:n,nameMap:r})]}),hVe=({data:t,sourceKeys:e,colorMap:n,average:r})=>{const i=A.useMemo(()=>{const a={};return e.forEach(s=>{a[s]=s}),a},[e]);return t.length===0||e.length===0?m.jsx(pE,{message:"No income data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Income by Source"}),m.jsx(ry,{width:"100%",height:300,children:m.jsxs(hE,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(by,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(wy,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(Sy,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(lE,{cursor:!1,content:a=>m.jsx(fte,{...a,colorMap:n,nameMap:i})}),m.jsx(CM,{y:r,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${jM(r)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>m.jsx(sf,{dataKey:a,stackId:"income",fill:n[a],radius:[0,0,0,0],name:a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),m.jsx(hte,{keys:e,colorMap:n,nameMap:i})]})},pVe=({data:t})=>{if(t.length===0)return m.jsx(pE,{message:"No data for this time period."});const e=t.length>0?Math.round(t.reduce((n,r)=>n+r.savingsPercent,0)/t.length*10)/10:0;return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300",children:"Income Allocation (Savings Base)"}),m.jsxs("span",{className:"text-xs font-medium text-blue-500",children:["Avg Savings: ",e,"%"]})]}),m.jsx(ry,{width:"100%",height:300,children:m.jsxs(hE,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(by,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(wy,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(Sy,{domain:[0,100],tickFormatter:n=>`${n}%`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(lE,{content:cVe,cursor:!1}),m.jsx(sf,{dataKey:"savingsPercent",stackId:"allocation",fill:"#3B82F6",name:"Savings & Investments",radius:[0,0,0,0]}),m.jsx(sf,{dataKey:"spendingPercent",stackId:"allocation",fill:"#4ADE80",name:"Spending",radius:[0,0,0,0]})]})})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Savings & Investments"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Spending"})]})]}),m.jsx("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-2",children:"Pay yourself first: savings grows from the bottom, reinforcing the goal of maximizing your savings rate."})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Savings Rate"}),m.jsx("div",{className:"space-y-2",children:t.map(n=>m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 w-10",children:n.monthLabel}),m.jsx("div",{className:"flex-1 mx-3 h-2 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${n.savingsPercent}%`}})}),m.jsxs("span",{className:`text-sm font-medium w-14 text-right ${n.savingsPercent>=20?"text-blue-500":n.savingsPercent>=10?"text-amber-500":"text-red-500"}`,children:[n.savingsPercent.toFixed(1),"%"]})]},n.month))})]})]})},hte=({keys:t,colorMap:e,nameMap:n})=>m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Legend"}),m.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:t.map(r=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e[r]}}),m.jsx("span",{className:"text-xs text-zinc-600 dark:text-zinc-300",children:n[r]||r})]},r))})]}),pE=({message:t})=>m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[m.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:m.jsx(Mw,{className:"w-8 h-8 text-zinc-400"})}),m.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm",children:t})]}),gVe=()=>{const t=Gi(),{envelopes:e,categories:n,currentMonth:r,incomeSources:i,allocations:a,transactions:s}=mt(),o=A.useMemo(()=>{const w={};return e.forEach(S=>{S.categoryId&&(w[S.id]=S.categoryId)}),w},[e]),[c,u]=A.useState("overview"),f=i[r]||[],h=a[r]||[],g={incomeSources:f,envelopeAllocations:h.reduce((w,S)=>(w[S.envelopeId]=S,w),{})},v=A.useMemo(()=>{if(!g)return[];const w=s.filter(S=>S.month===r&&S.type==="Expense");return n.map(S=>{const T=e.filter(N=>N.categoryId===S.id),I=T.reduce((N,C)=>{const R=g.envelopeAllocations[C.id];return N+(R?.budgetedAmount||0)},0),P=w.filter(N=>{const C=e.find(R=>R.id===N.envelopeId);return C?.categoryId===S.id&&!C.isPiggybank}).reduce((N,C)=>N+Math.abs(C.amount),0),O=I-P,D=I>0?P/I*100:0;return{categoryId:S.id,categoryName:S.name,budgeted:I,spent:P,remaining:O,percentUsed:D,status:O>=0?"under":"over",envelopeCount:T.length}}).filter(S=>S.budgeted>0||S.spent>0)},[n,e,g,r,s,o]),b=A.useMemo(()=>{const w=v.reduce((I,P)=>({totalBudgeted:I.totalBudgeted+P.budgeted,totalSpent:I.totalSpent+P.spent,totalRemaining:I.totalRemaining+P.remaining}),{totalBudgeted:0,totalSpent:0,totalRemaining:0}),S=f.reduce((I,P)=>I+P.amount,0),T=s.filter(I=>I.month===r&&I.type==="Expense").reduce((I,P)=>I+Math.abs(P.amount),0);return{...w,totalIncome:S,totalBudgeted:w.totalBudgeted,totalSpent:w.totalSpent,totalAllSpending:T,totalRemaining:S-T}},[v,f,s,r]),x=({active:w,payload:S,label:T})=>{if(w&&S&&S.length){const I=S[0].payload;return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 p-3 rounded-lg border border-zinc-200 dark:border-zinc-700 shadow-lg",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white",children:T}),m.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Budgeted: $",I.budgeted.toFixed(2)]}),m.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Spent: $",I.spent.toFixed(2)]}),m.jsxs("p",{className:`text-sm font-medium ${I.remaining>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[I.remaining>=0?"Under":"Over"," by $",Math.abs(I.remaining).toFixed(2)]})]})}return null};return g?m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-32",children:[m.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50 safe-area-top",children:[m.jsxs("div",{className:"flex items-center gap-3 px-4 pt-2 pb-2",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:m.jsx($a,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),m.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Budget Breakdown"})]}),m.jsx("div",{className:"px-4 pb-2",children:m.jsxs("div",{className:"flex bg-zinc-100 dark:bg-zinc-800 rounded-xl p-1",children:[m.jsx("button",{onClick:()=>u("overview"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${c==="overview"?"bg-white dark:bg-zinc-900 text-zinc-900 dark:text-white shadow-sm":"text-zinc-600 dark:text-zinc-400"}`,children:"Overview"}),m.jsx("button",{onClick:()=>u("details"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${c==="details"?"bg-white dark:bg-zinc-900 text-zinc-900 dark:text-white shadow-sm":"text-zinc-600 dark:text-zinc-400"}`,children:"Details"})]})})]}),m.jsxs("div",{className:"p-4 space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl p-3 text-center",children:[m.jsx(Ih,{className:"w-5 h-5 text-blue-500 mx-auto mb-1"}),m.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Income"}),m.jsxs("p",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:["$",(b.totalIncome||0).toFixed(0)]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl p-3 text-center",children:[m.jsx(Mc,{className:"w-5 h-5 text-orange-500 mx-auto mb-1"}),m.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Spent"}),m.jsxs("p",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:["$",b.totalAllSpending.toFixed(0)]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl p-3 text-center",children:[m.jsx(due,{className:`w-5 h-5 mx-auto mb-1 ${b.totalRemaining>=0?"text-green-500":"text-red-500"}`}),m.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Remaining"}),m.jsxs("p",{className:`text-lg font-bold ${b.totalRemaining>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",b.totalRemaining.toFixed(0)]})]})]}),c==="overview"?m.jsx(m.Fragment,{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl p-4 shadow-sm",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Budget vs Actual"}),m.jsx(ry,{width:"100%",height:300,children:m.jsxs(hE,{data:v,children:[m.jsx(by,{strokeDasharray:"3 3",className:"opacity-30"}),m.jsx(wy,{dataKey:"categoryName",tick:{fontSize:12,fontWeight:600},angle:0,textAnchor:"middle",height:40,interval:0}),m.jsx(Sy,{tick:{fontSize:10}}),m.jsx(lE,{content:m.jsx(x,{}),cursor:!1}),m.jsx(YQ,{}),m.jsx(sf,{dataKey:"budgeted",fill:"#3b82f6",name:"Budgeted"}),m.jsx(sf,{dataKey:"spent",fill:"#f59e0b",name:"Spent"})]})})]})}):m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl shadow-sm",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 p-4 pb-2",children:"Category Details"}),m.jsx("div",{className:"divide-y divide-zinc-200 dark:divide-zinc-700",children:v.map(w=>m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("h4",{className:"font-medium text-zinc-900 dark:text-white",children:w.categoryName}),m.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.status==="under"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:w.status==="under"?"Under Budget":"Over Budget"})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Budgeted:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white",children:["$",w.budgeted.toFixed(2)]})]}),m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Spent:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white",children:["$",w.spent.toFixed(2)]})]}),m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Remaining:"}),m.jsxs("span",{className:`font-medium ${w.remaining>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[w.remaining>=0?"+":"","$",w.remaining.toFixed(2)]})]})]}),m.jsxs("div",{className:"mt-3",children:[m.jsx("div",{className:"w-full bg-zinc-200 dark:bg-zinc-700 rounded-full h-2",children:m.jsx("div",{className:`h-2 rounded-full transition-all ${w.percentUsed>100?"bg-red-500":w.percentUsed>80?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(w.percentUsed,100)}%`}})}),m.jsxs("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:[w.percentUsed.toFixed(1),"% of budget used"]})]})]},w.categoryId))})]})]})]}):m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-32",children:[m.jsx("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50 safe-area-top",children:m.jsxs("div",{className:"flex items-center gap-3 px-4 pt-2 pb-2",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:m.jsx($a,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),m.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Budget Breakdown"})]})}),m.jsx("div",{className:"p-4",children:m.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-4",children:m.jsxs("p",{className:"text-yellow-800 dark:text-yellow-200",children:["No budget data found for ",r,". Create a budget to see your breakdown."]})})})]})},mVe=({isOpen:t,onClose:e,transactions:n,envelopes:r})=>{const{currentMonth:i}=mt(),[a,s]=A.useState("3m"),[o,c]=A.useState("csv"),[u,f]=A.useState(!1),h=[{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"6m",label:"6 Months"},{value:"12m",label:"12 Months"}];function g(){const S=new Date().getFullYear(),T=[];for(let I=S;I>=2024;I--)T.push({value:`year-${I}`,label:`${I}`});return T}const v=g(),b=()=>MM(a,i),x=()=>{const S=b();if(S.length===0)return"";const T=S[0],I=S[S.length-1],P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],O=`${P[parseInt(T.split("-")[1])-1]}${T.split("-")[0]}`,D=`${P[parseInt(I.split("-")[1])-1]}${I.split("-")[0]}`;return O===D?O:`${O}-${D}`},w=async()=>{f(!0);try{const S=b(),T=n.filter(I=>I.description!=="Budgeted"&&I.description!=="Piggybank Contribution"&&S.includes(I.month||""));if(o==="csv"){const I=["Date","Merchant","Payment Method","Notes","Amount","Type","Envelope","Reconciled"],P=[];for(const M of T){const L=r.find(ne=>ne.id===M.envelopeId)?.name||"Unknown",z=M.reconciled||!1;let K=(M.merchant||"").replace(/"/g,'""'),Y=(M.notes||"").replace(/"/g,'""'),G="";M.paymentMethod&&(G=`${M.paymentMethod.name} (...${M.paymentMethod.last4})`);const X=G.replace(/"/g,'""');let J="Invalid Date";if(M.date){if(typeof M.date=="string")J=M.date.split("T")[0];else if(typeof M.date=="number"){const Q=M.date<2e9?(M.date+9783072e5)*1e3:M.date;J=new Date(Q).toISOString().split("T")[0]}}P.push([J,`"${K}"`,`"${X}"`,`"${Y}"`,M.amount.toFixed(2),M.type,`"${L}"`,z?"Yes":"No"].join(","))}const O=[I.join(","),...P].join(`
`),D=new Blob([O],{type:"text/csv;charset=utf-8;"}),N=URL.createObjectURL(D),C=document.createElement("a");C.href=N;const R=x();C.download=`budgetTransactions_${R}.csv`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(N)}else if(o==="pdf"){let P=`
          <html>
            <head>
              <style>
                body { font-family: Arial, sans-serif; margin: 20px; }
                h1 { color: #333; }
                table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                th { background-color: #f2f2f2; font-weight: bold; }
                .expense { color: #dc3545; }
                .income { color: #28a745; }
                .summary { margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px; }
              </style>
            </head>
            <body>
              <h1>Budget Transactions Report</h1>
              <p><strong>Period:</strong> ${x()}</p>
              <p><strong>Generated:</strong> ${new Date().toLocaleDateString()}</p>
        `;const O=T.filter(R=>R.type==="Income").reduce((R,M)=>R+Math.abs(M.amount),0),D=T.filter(R=>R.type==="Expense").reduce((R,M)=>R+Math.abs(M.amount),0),N=O-D;P+=`
          <div class="summary">
            <h2>Summary</h2>
            <p><strong>Total Income:</strong> <span class="income">$${O.toFixed(2)}</span></p>
            <p><strong>Total Expenses:</strong> <span class="expense">$${D.toFixed(2)}</span></p>
            <p><strong>Net Amount:</strong> <span class="${N>=0?"income":"expense"}">$${N.toFixed(2)}</span></p>
            <p><strong>Transaction Count:</strong> ${T.length}</p>
          </div>
        `,P+=`
          <h2>Transactions</h2>
          <table>
            <thead>
              <tr>
                <th>Date</th>
                <th>Merchant</th>
                <th>Envelope</th>
                <th>Type</th>
                <th>Amount</th>
                <th>Reconciled</th>
              </tr>
            </thead>
            <tbody>
        `;for(const R of T){const V=r.find(Y=>Y.id===R.envelopeId)?.name||"Unknown",L=R.reconciled||!1,z=R.type==="Income"?"income":"expense";let K="Invalid Date";if(R.date){if(typeof R.date=="string")K=R.date.split("T")[0];else if(typeof R.date=="number"){const G=R.date<2e9?(R.date+9783072e5)*1e3:R.date;K=new Date(G).toISOString().split("T")[0]}}P+=`
            <tr>
              <td>${K}</td>
              <td>${R.merchant||""}</td>
              <td>${V}</td>
              <td>${R.type}</td>
              <td class="${z}">$${Math.abs(R.amount).toFixed(2)}</td>
              <td>${L?"Yes":"No"}</td>
            </tr>
          `}P+=`
            </tbody>
          </table>
        </body>
      </html>
        `;const C=window.open("","_blank");C&&(C.document.write(P),C.document.close(),C.onload=()=>{C.print(),C.close()})}e()}catch(S){console.error("Export failed:",S)}finally{f(!1)}};return t?m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-xl max-w-md w-full",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Sq,{className:"w-5 h-5 text-blue-500"}),m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Export Transactions"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:m.jsx(Gp,{className:"w-5 h-5"})})]}),m.jsxs("div",{className:"p-6 space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-3",children:"Export Format"}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("button",{onClick:()=>c("csv"),className:`
                  px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2
                  ${o==="csv"?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:[m.jsx(tp,{className:"w-4 h-4"}),"CSV"]}),m.jsxs("button",{onClick:()=>c("pdf"),className:`
                  px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2
                  ${o==="pdf"?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:[m.jsx(ld,{className:"w-4 h-4"}),"PDF"]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-3",children:"Select Time Range"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-zinc-400 uppercase tracking-wide mb-2",children:"Presets"}),m.jsx("div",{className:"grid grid-cols-2 gap-2",children:h.map(({value:S,label:T})=>m.jsx("button",{onClick:()=>s(S),className:`
                      px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200
                      ${a===S?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                    `,children:T},S))})]}),m.jsxs("div",{className:"space-y-2 mt-4",children:[m.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-zinc-400 uppercase tracking-wide mb-2",children:"By Year"}),m.jsx("div",{className:"grid grid-cols-3 gap-2",children:v.map(({value:S,label:T})=>m.jsx("button",{onClick:()=>s(S),className:`
                      px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200
                      ${a===S?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                    `,children:T},S))})]})]}),m.jsx("div",{className:"bg-zinc-50 dark:bg-zinc-800 rounded-lg p-4",children:m.jsxs("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:[m.jsx("div",{className:"font-medium mb-1",children:"Export Range:"}),m.jsxs("div",{className:"text-gray-900 dark:text-white",children:[b().length," months selected"]}),m.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mt-1",children:x()})]})})]}),m.jsxs("div",{className:"flex gap-3 p-6 border-t dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 bg-gray-100 dark:bg-zinc-800 hover:bg-gray-200 dark:hover:bg-zinc-700 rounded-lg font-medium transition-colors",children:"Cancel"}),m.jsx("button",{onClick:w,disabled:u,className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:u?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Exporting..."]}):m.jsx(m.Fragment,{children:o==="csv"?m.jsxs(m.Fragment,{children:[m.jsx(tp,{className:"w-4 h-4"}),"Export CSV"]}):m.jsxs(m.Fragment,{children:[m.jsx(ld,{className:"w-4 h-4"}),"Export PDF"]})})})]})]})}):null},vVe=()=>{const t=Gi(),{transactions:e,envelopes:n}=mt(),[r,i]=A.useState(!1),a=()=>{t(-1)};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-800",children:m.jsxs("div",{className:"flex items-center gap-4 p-4",children:[m.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",children:m.jsx($a,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Reports"})]})}),m.jsxs("div",{className:"p-4 space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl shadow-sm",children:[m.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-zinc-700",children:[m.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[m.jsx(wce,{className:"w-5 h-5 text-blue-500"}),"Export Transactions"]}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Export your transaction data for external analysis or record keeping"})]}),m.jsxs("div",{className:"p-4 space-y-3",children:[m.jsxs("button",{onClick:()=>i(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-700/50 transition-colors border border-gray-200 dark:border-zinc-600 rounded-lg",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(tp,{className:"w-5 h-5 text-blue-500"}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transaction Data"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Export transactions as CSV or PDF with customizable date ranges"})]})]}),m.jsx("div",{className:"text-gray-400",children:m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:m.jsxs("div",{className:"flex items-start gap-2",children:[m.jsx(ld,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5"}),m.jsxs("div",{className:"text-sm",children:[m.jsx("p",{className:"text-blue-800 dark:text-blue-200 font-medium",children:"Export Features:"}),m.jsxs("ul",{className:"text-blue-700 dark:text-blue-300 text-xs mt-1 space-y-1",children:[m.jsx("li",{children:" Custom date range selection"}),m.jsx("li",{children:" CSV format for spreadsheet compatibility"}),m.jsx("li",{children:" PDF format for professional reports and sharing"}),m.jsx("li",{children:" Includes transaction details, categories, and envelope information"}),m.jsx("li",{children:" Filter by specific envelopes or categories"}),m.jsx("li",{children:" Summary statistics in PDF reports"})]})]})]})})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl shadow-sm",children:[m.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-zinc-700",children:[m.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[m.jsx(ld,{className:"w-5 h-5 text-gray-500"}),"Coming Soon"]}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Advanced reporting features planned for future releases"})]}),m.jsxs("div",{className:"p-4 space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-zinc-700/30 rounded-lg opacity-60",children:[m.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-zinc-600 rounded-full flex items-center justify-center",children:m.jsx(ld,{className:"w-4 h-4 text-gray-500"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Monthly Summary Reports"}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Comprehensive monthly financial summaries"})]})]}),m.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-zinc-700/30 rounded-lg opacity-60",children:[m.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-zinc-600 rounded-full flex items-center justify-center",children:m.jsx(ld,{className:"w-4 h-4 text-gray-500"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"PDF Reports"}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Generate formatted PDF reports for sharing"})]})]}),m.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-zinc-700/30 rounded-lg opacity-60",children:[m.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-zinc-600 rounded-full flex items-center justify-center",children:m.jsx(ld,{className:"w-4 h-4 text-gray-500"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Tax Reports"}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Categorized reports for tax preparation"})]})]})]})]})]}),m.jsx(mVe,{isOpen:r,onClose:()=>i(!1),transactions:e,envelopes:n})]})},cs=({children:t})=>m.jsx(bt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:"easeInOut"},className:"w-full h-full bg-gray-50 dark:bg-black",children:t}),yVe=()=>{const t=Ps();return m.jsx(lr,{mode:"wait",children:m.jsxs(ole,{location:t,children:[m.jsx(Da,{path:"/",element:m.jsx(cs,{children:m.jsx(hi,{children:m.jsx(d_e,{})})})}),m.jsx(Da,{path:"/envelope/:id",element:m.jsx(cs,{children:m.jsx(hi,{children:m.jsx(v_e,{})})})}),m.jsx(Da,{path:"/add-envelope",element:m.jsx(cs,{children:m.jsx(hi,{children:m.jsx(__e,{})})})}),m.jsx(Da,{path:"/add-transaction",element:m.jsx(cs,{children:m.jsx(hi,{children:m.jsx(hX,{})})})}),m.jsx(Da,{path:"/transactions",element:m.jsx(cs,{children:m.jsx(hi,{children:m.jsx(X_e,{})})})}),m.jsx(Da,{path:"/settings",element:m.jsx(cs,{children:m.jsx(hi,{children:m.jsx(x_e,{})})})}),m.jsx(Da,{path:"/settings/categories",element:m.jsx(cs,{children:m.jsx(hi,{children:m.jsx(S_e,{})})})}),m.jsx(Da,{path:"/verify-email",element:m.jsx(cs,{children:m.jsx(hi,{children:m.jsx(gH,{})})})}),m.jsx(Da,{path:"/analytics",element:m.jsx(cs,{children:m.jsx(hi,{children:m.jsx(uVe,{})})})}),m.jsx(Da,{path:"/budget-breakdown",element:m.jsx(cs,{children:m.jsx(hi,{children:m.jsx(gVe,{})})})}),m.jsx(Da,{path:"/reports",element:m.jsx(cs,{children:m.jsx(hi,{children:m.jsx(vVe,{})})})})]},t.pathname)})},bVe=()=>{const t=Gi(),{envelopes:e,appSettings:n}=mt(),r=A.useRef(!1);return A.useEffect(()=>{const i=n?.siriToken;if(U.log(" Siri: Handler checking - siriToken:",i,"envelopes count:",e.length),!i||e.length===0){U.log(" Siri: Handler not ready - missing token or envelopes");return}const a=Et(rt,"siriQueries",i);U.log(" Siri: Setting up Firestore listener for token:",i);const s=nu(a,async o=>{if(U.log(" Siri: Firestore snapshot received, exists:",o.exists()),!o.exists()||r.current)return;const c=o.data();if(!c?.query||c.consumed)return;if(Date.now()-(c.timestamp||0)>12e4){try{await sa(a)}catch(f){U.error("Failed to cleanup stale Siri query",f)}return}U.log(" Siri: Found pending query in Firestore:",c.query),r.current=!0;try{await sa(a);const f=await qN(c.query,e);U.log(" Siri: Parsed result:",f),sessionStorage.setItem("siriParsedData",JSON.stringify(f)),sessionStorage.setItem("siriQuery",c.query),t(`/add-transaction?siri=${Date.now()}`),window.dispatchEvent(new CustomEvent("siri-query-ready"))}catch(f){U.error(" Siri: Error processing query:",f)}finally{r.current=!1}},o=>{U.error(" Siri: Error listening for queries:",o)});return()=>s()},[e,n?.siriToken,t]),null},GP=[{id:"income",targetId:"tutorial-income-section",title:"Add Your Income",description:"Tap the + button to add your first income source (e.g., Salary, Freelance).",icon:Ih,color:"green",encouragement:"Great start! Every budget begins with income."},{id:"envelope",targetId:"tutorial-add-envelope",title:"Create a Spending Envelope",description:"Tap the + on any category to create your first spending envelope.",icon:ip,color:"purple",encouragement:"Nice! Envelopes help you track where money goes."},{id:"allocate",targetId:"tutorial-allocation-area",title:"Assign Money to Envelopes",description:"Tap the budget amount on an envelope and enter how much to allocate.",icon:Mc,color:"blue",encouragement:"Almost there! Give every dollar a job."},{id:"piggybank",targetId:"tutorial-add-envelope",title:"Create a Piggybank",description:'Create a savings goal envelope. Toggle "Piggybank" when adding a new envelope.',icon:cf,color:"pink",encouragement:"You did it! Your budget is set up!"}],Gx=GP.length,t8={green:{bg:"bg-green-50 dark:bg-green-900/30",border:"border-green-300 dark:border-green-700",text:"text-green-700 dark:text-green-300",ring:"ring-green-400",progressBg:"bg-green-500"},purple:{bg:"bg-purple-50 dark:bg-purple-900/30",border:"border-purple-300 dark:border-purple-700",text:"text-purple-700 dark:text-purple-300",ring:"ring-purple-400",progressBg:"bg-purple-500"},blue:{bg:"bg-blue-50 dark:bg-blue-900/30",border:"border-blue-300 dark:border-blue-700",text:"text-blue-700 dark:text-blue-300",ring:"ring-blue-400",progressBg:"bg-blue-500"},pink:{bg:"bg-pink-50 dark:bg-pink-900/30",border:"border-pink-300 dark:border-pink-700",text:"text-pink-700 dark:text-pink-300",ring:"ring-pink-400",progressBg:"bg-pink-500"}};function xVe(){const[t,e]=A.useState(!1);return A.useEffect(()=>{const n=()=>{const i=document.querySelectorAll(".fixed.inset-0.z-50");e(i.length>0)};n();const r=new MutationObserver(n);return r.observe(document.body,{childList:!0,subtree:!0}),()=>r.disconnect()},[]),t}const wVe=({targetRect:t,visible:e})=>{if(!e||!t)return null;const n=8,r=16,i=t.left-n,a=t.top-n,s=t.width+n*2,o=t.height+n*2;return m.jsxs("div",{className:"fixed inset-0 z-[48] pointer-events-none",children:[m.jsxs("svg",{className:"w-full h-full pointer-events-none",children:[m.jsx("defs",{children:m.jsxs("mask",{id:"spotlight-mask",children:[m.jsx("rect",{width:"100%",height:"100%",fill:"white"}),m.jsx("rect",{x:i,y:a,width:s,height:o,rx:r,ry:r,fill:"black"})]})}),m.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0,0,0,0.6)",mask:"url(#spotlight-mask)"})]}),m.jsx("div",{className:"absolute left-0 right-0 top-0 pointer-events-auto",style:{height:Math.max(0,a)}}),m.jsx("div",{className:"absolute left-0 right-0 bottom-0 pointer-events-auto",style:{top:a+o}}),m.jsx("div",{className:"absolute left-0 pointer-events-auto",style:{top:a,height:o,width:Math.max(0,i)}}),m.jsx("div",{className:"absolute right-0 pointer-events-auto",style:{top:a,height:o,left:i+s}}),m.jsx(bt.div,{className:"absolute border-2 border-white/60 rounded-2xl pointer-events-none",style:{left:i,top:a,width:s,height:o},animate:{boxShadow:["0 0 0 0 rgba(255,255,255,0.4)","0 0 0 8px rgba(255,255,255,0)","0 0 0 0 rgba(255,255,255,0.4)"]},transition:{duration:2,repeat:1/0}})]})},SVe=()=>{const t=mt(C=>C.guidedTutorialStep),e=mt(C=>C.skipGuidedTutorial),n=mt(C=>C.advanceGuidedTutorial),r=mt(C=>C.incomeSources),i=mt(C=>C.currentMonth),a=mt(C=>C.envelopes),s=mt(C=>C.allocations),o=A.useMemo(()=>a.filter(C=>C.isPiggybank),[a]),c=xVe(),[u,f]=A.useState(null),[h,g]=A.useState(!1),[v,b]=A.useState(!1),x=A.useRef(null),w=t,S=w!==null&&w>=0&&w<Gx,T=S?GP[w]:null,I=!c&&!h&&!v,P=A.useCallback(()=>{if(!T){f(null);return}const C=document.getElementById(T.targetId);f(C?C.getBoundingClientRect():null)},[T]);if(A.useEffect(()=>{P();const C=setInterval(P,500);return window.addEventListener("resize",P),window.addEventListener("scroll",P,!0),()=>{clearInterval(C),window.removeEventListener("resize",P),window.removeEventListener("scroll",P,!0)}},[P]),A.useEffect(()=>{if(w===null)return;if((()=>{switch(w){case 0:return(r[i]||[]).length>0;case 1:return a.filter(R=>!R.isPiggybank).length>0;case 2:return(s[i]||[]).filter(R=>R.budgetedAmount>0).length>0;case 3:return o.length>0;default:return!1}})())return b(!0),x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{b(!1),n(),x.current=null},1500),()=>{x.current&&(clearTimeout(x.current),x.current=null)}},[w,r,i,a,s,o,n]),!S||!T)return null;const O=t8[T.color]||t8.blue,D=T.icon,N=(w+1)/Gx*100;return m.jsxs(m.Fragment,{children:[I&&m.jsx(wVe,{targetRect:u,visible:!0}),m.jsxs(lr,{mode:"wait",children:[!v&&!h&&!c&&m.jsx(bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"fixed left-4 right-4 z-[49] max-w-md mx-auto pointer-events-auto",style:u?{bottom:u.top>window.innerHeight/2?window.innerHeight-u.top+20:void 0,top:u.top<=window.innerHeight/2?u.bottom+20:void 0}:{bottom:24},children:m.jsxs("div",{className:`${O.bg} border ${O.border} rounded-2xl p-4 shadow-2xl`,children:[m.jsxs("div",{className:"mb-3",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[m.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-zinc-400",children:"Setup Progress"}),m.jsxs("span",{className:"text-xs font-bold text-gray-700 dark:text-zinc-300",children:[Math.round(N),"%"]})]}),m.jsx("div",{className:"w-full h-2.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx(bt.div,{className:`h-full rounded-full ${O.progressBg}`,initial:{width:`${w/Gx*100}%`},animate:{width:`${N}%`},transition:{duration:.5,ease:"easeOut"}})}),m.jsx("div",{className:"flex justify-between mt-1",children:GP.map((C,R)=>m.jsx("div",{className:"flex flex-col items-center",children:m.jsx("div",{className:`w-2 h-2 rounded-full mt-1 ${R<w?"bg-green-500":R===w?O.progressBg:"bg-gray-300 dark:bg-zinc-600"}`})},C.id))})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:`${O.bg} p-2 rounded-xl border ${O.border} flex-shrink-0`,children:m.jsx(D,{className:`w-6 h-6 ${O.text}`})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm mb-1",children:["Step ",w+1,": ",T.title]}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-zinc-400 leading-relaxed",children:T.description})]})]}),m.jsx("div",{className:"mt-3 flex justify-end",children:m.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 text-xs text-gray-400 dark:text-zinc-500 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors px-2 py-1 rounded-lg hover:bg-white/50 dark:hover:bg-zinc-800/50",children:[m.jsx(Cq,{size:12}),"Skip Tutorial"]})})]})},`step-${w}`),v&&m.jsx(bt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed inset-0 z-[49] flex items-center justify-center pointer-events-none",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-2xl border border-green-200 dark:border-green-800 text-center max-w-xs",children:[m.jsx(bt.div,{animate:{rotate:[0,-10,10,-10,0]},transition:{duration:.5},children:m.jsx(ro,{className:"w-12 h-12 text-green-500 mx-auto mb-2"})}),m.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-lg mb-1",children:w<Gx-1?"Step Complete!":"All Done!"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:T.encouragement})]})},"celebration")]}),m.jsx(lr,{children:h&&m.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs(bt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-gray-200 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Skip Tutorial?"}),m.jsxs("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-1",children:["You're ",m.jsxs("strong",{children:[Math.round(N),"%"]})," through the setup!"]}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-4",children:"You can always restart from Settings if you change your mind."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Keep Going"}),m.jsx("button",{onClick:()=>{g(!1),e()},className:"flex-1 py-2.5 px-4 bg-gray-800 dark:bg-zinc-700 text-white rounded-xl font-medium hover:bg-gray-900 dark:hover:bg-zinc-600 transition-colors",children:"Skip"})]})]})})})]})};function _Ve(){const[t,e]=A.useState(!0),[n,r]=A.useState(!1),[i,a]=A.useState(null),{appSettings:s,isOnboardingActive:o}=mt(),{isAuthenticated:c,isInitialized:u,initializeAuth:f,lastAuthTime:h,offlineGracePeriod:g,currentUser:v}=tn(),{showToast:b}=mu();if(A.useEffect(()=>{const S=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(S)},[]),A.useEffect(()=>f(),[f]),A.useEffect(()=>{(async()=>{const T=new URLSearchParams(window.location.search),I=T.get("mode"),P=T.get("oobCode");if(I==="resetPassword"&&P){U.log(" Processing password reset from URL"),a(P);return}if(I==="verifyEmail"&&P){U.log(" Processing email verification from URL");try{await qae(fi,P),U.log(" Email verification successful");const O=window.location.pathname;if(window.history.replaceState({},document.title,O),fi.currentUser){await fi.currentUser.reload(),U.log(" User reloaded after verification");const D=await Jh(()=>Promise.resolve().then(()=>iX),void 0).then(N=>N.useBudgetStore.getState());U.log(" Triggering onboarding check after email verification..."),await D.checkAndStartOnboarding()}b("Email verified successfully! You can now sign in.","success"),setTimeout(async()=>{await fi.signOut()},2e3)}catch(O){U.error(" Email verification failed:",O),b("Email verification failed. The link may be expired or invalid.","error")}}})()},[]),A.useEffect(()=>{const S=document.documentElement,T=window.matchMedia("(prefers-color-scheme: dark)"),I=()=>{const P=s?.theme??"system",O=T.matches;P==="dark"||P==="system"&&O?S.classList.add("dark"):S.classList.remove("dark")};if(I(),s?.theme==="system")return T.addEventListener("change",I),()=>T.removeEventListener("change",I)},[s]),A.useEffect(()=>{const S=document.documentElement;switch(s?.fontSize??"medium"){case"extra-small":S.style.fontSize="75%";break;case"small":S.style.fontSize="87.5%";break;case"large":S.style.fontSize="112.5%";break;case"extra-large":S.style.fontSize="125%";break;default:S.style.fontSize="100%"}},[s?.fontSize]),t||!u)return m.jsxs(m.Fragment,{children:[m.jsx(mH,{message:"Initializing Personal Budget..."}),m.jsx(cx,{})]});if(i)return m.jsxs(hi,{children:[m.jsx(uge,{oobCode:i,onSuccess:()=>{a(null);const S=window.location.pathname;window.history.replaceState({},document.title,S)},onCancel:()=>{a(null);const S=window.location.pathname;window.history.replaceState({},document.title,S)}}),m.jsx(cx,{})]});if(!c)return v?m.jsxs(hi,{children:[m.jsx(gH,{}),m.jsx(cx,{})]}):m.jsxs(hi,{children:[m.jsx(cge,{}),m.jsx(cx,{})]});const w=typeof navigator<"u"&&!navigator.onLine&&c&&h&&Date.now()-h<g;return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed opacity-0 pointer-events-none -z-50",children:m.jsx("label",{id:"ios-haptic-trigger",htmlFor:"ios-haptic-checkbox",children:m.jsx("input",{type:"checkbox",id:"ios-haptic-checkbox",switch:"true"})})}),m.jsxs(hi,{children:[w&&m.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((g-(Date.now()-h))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),m.jsxs(Ole,{children:[m.jsx(bVe,{}),m.jsx(yVe,{}),n&&m.jsxs("div",{className:"fixed inset-0 z-[60]",children:[m.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>r(!1)}),m.jsx("div",{className:"absolute inset-0",children:m.jsx(hX,{onClose:()=>r(!1),onSaved:()=>r(!1)})})]}),m.jsx(SVe,{}),!o&&m.jsx(obe,{onAddTransaction:()=>r(!0)})]})]})]})}rre({onNeedRefresh(){},onOfflineReady(){U.log("App is ready for offline work")}});ere.createRoot(document.getElementById("root")).render(m.jsx(A.StrictMode,{children:m.jsx(_Ve,{})}));export{gt as T,rt as a,dpe as b,T5 as c,Et as d,Hr as e,ra as f,LA as g,sa as h,U as l,nu as o,ji as q,aa as s,id as t,ao as u,cw as w};
