(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function J5(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var c1={exports:{}},Yf={};var t2;function e6(){if(t2)return Yf;t2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return Yf.Fragment=e,Yf.jsx=t,Yf.jsxs=t,Yf}var n2;function t6(){return n2||(n2=1,c1.exports=e6()),c1.exports}var y=t6(),u1={exports:{}},ft={};var r2;function n6(){if(r2)return ft;r2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),m=Symbol.iterator;function x(U){return U===null||typeof U!="object"?null:(U=m&&U[m]||U["@@iterator"],typeof U=="function"?U:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,S={};function T(U,Y,te){this.props=U,this.context=Y,this.refs=S,this.updater=te||_}T.prototype.isReactComponent={},T.prototype.setState=function(U,Y){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Y,"setState")},T.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function C(){}C.prototype=T.prototype;function R(U,Y,te){this.props=U,this.context=Y,this.refs=S,this.updater=te||_}var j=R.prototype=new C;j.constructor=R,E(j,T.prototype),j.isPureReactComponent=!0;var z=Array.isArray;function V(){}var I={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function k(U,Y,te){var ae=te.ref;return{$$typeof:n,type:U,key:Y,ref:ae!==void 0?ae:null,props:te}}function O(U,Y){return k(U.type,Y,U.props)}function B(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function L(U){var Y={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(te){return Y[te]})}var M=/\/+/g;function X(U,Y){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):Y.toString(36)}function Q(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(V,V):(U.status="pending",U.then(function(Y){U.status==="pending"&&(U.status="fulfilled",U.value=Y)},function(Y){U.status==="pending"&&(U.status="rejected",U.reason=Y)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function $(U,Y,te,ae,ne){var se=typeof U;(se==="undefined"||se==="boolean")&&(U=null);var me=!1;if(U===null)me=!0;else switch(se){case"bigint":case"string":case"number":me=!0;break;case"object":switch(U.$$typeof){case n:case e:me=!0;break;case h:return me=U._init,$(me(U._payload),Y,te,ae,ne)}}if(me)return ne=ne(U),me=ae===""?"."+X(U,0):ae,z(ne)?(te="",me!=null&&(te=me.replace(M,"$&/")+"/"),$(ne,Y,te,"",function(Ne){return Ne})):ne!=null&&(B(ne)&&(ne=O(ne,te+(ne.key==null||U&&U.key===ne.key?"":(""+ne.key).replace(M,"$&/")+"/")+me)),Y.push(ne)),1;me=0;var Te=ae===""?".":ae+":";if(z(U))for(var Ce=0;Ce<U.length;Ce++)ae=U[Ce],se=Te+X(ae,Ce),me+=$(ae,Y,te,se,ne);else if(Ce=x(U),typeof Ce=="function")for(U=Ce.call(U),Ce=0;!(ae=U.next()).done;)ae=ae.value,se=Te+X(ae,Ce++),me+=$(ae,Y,te,se,ne);else if(se==="object"){if(typeof U.then=="function")return $(Q(U),Y,te,ae,ne);throw Y=String(U),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return me}function H(U,Y,te){if(U==null)return U;var ae=[],ne=0;return $(U,ae,"","",function(se){return Y.call(te,se,ne++)}),ae}function J(U){if(U._status===-1){var Y=U._result;Y=Y(),Y.then(function(te){(U._status===0||U._status===-1)&&(U._status=1,U._result=te)},function(te){(U._status===0||U._status===-1)&&(U._status=2,U._result=te)}),U._status===-1&&(U._status=0,U._result=Y)}if(U._status===1)return U._result.default;throw U._result}var re=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},fe={map:H,forEach:function(U,Y,te){H(U,function(){Y.apply(this,arguments)},te)},count:function(U){var Y=0;return H(U,function(){Y++}),Y},toArray:function(U){return H(U,function(Y){return Y})||[]},only:function(U){if(!B(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return ft.Activity=p,ft.Children=fe,ft.Component=T,ft.Fragment=t,ft.Profiler=i,ft.PureComponent=R,ft.StrictMode=r,ft.Suspense=u,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,ft.__COMPILER_RUNTIME={__proto__:null,c:function(U){return I.H.useMemoCache(U)}},ft.cache=function(U){return function(){return U.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function(U,Y,te){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ae=E({},U.props),ne=U.key;if(Y!=null)for(se in Y.key!==void 0&&(ne=""+Y.key),Y)!A.call(Y,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&Y.ref===void 0||(ae[se]=Y[se]);var se=arguments.length-2;if(se===1)ae.children=te;else if(1<se){for(var me=Array(se),Te=0;Te<se;Te++)me[Te]=arguments[Te+2];ae.children=me}return k(U.type,ne,ae)},ft.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},ft.createElement=function(U,Y,te){var ae,ne={},se=null;if(Y!=null)for(ae in Y.key!==void 0&&(se=""+Y.key),Y)A.call(Y,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ne[ae]=Y[ae]);var me=arguments.length-2;if(me===1)ne.children=te;else if(1<me){for(var Te=Array(me),Ce=0;Ce<me;Ce++)Te[Ce]=arguments[Ce+2];ne.children=Te}if(U&&U.defaultProps)for(ae in me=U.defaultProps,me)ne[ae]===void 0&&(ne[ae]=me[ae]);return k(U,se,ne)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(U){return{$$typeof:c,render:U}},ft.isValidElement=B,ft.lazy=function(U){return{$$typeof:h,_payload:{_status:-1,_result:U},_init:J}},ft.memo=function(U,Y){return{$$typeof:d,type:U,compare:Y===void 0?null:Y}},ft.startTransition=function(U){var Y=I.T,te={};I.T=te;try{var ae=U(),ne=I.S;ne!==null&&ne(te,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(V,re)}catch(se){re(se)}finally{Y!==null&&te.types!==null&&(Y.types=te.types),I.T=Y}},ft.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},ft.use=function(U){return I.H.use(U)},ft.useActionState=function(U,Y,te){return I.H.useActionState(U,Y,te)},ft.useCallback=function(U,Y){return I.H.useCallback(U,Y)},ft.useContext=function(U){return I.H.useContext(U)},ft.useDebugValue=function(){},ft.useDeferredValue=function(U,Y){return I.H.useDeferredValue(U,Y)},ft.useEffect=function(U,Y){return I.H.useEffect(U,Y)},ft.useEffectEvent=function(U){return I.H.useEffectEvent(U)},ft.useId=function(){return I.H.useId()},ft.useImperativeHandle=function(U,Y,te){return I.H.useImperativeHandle(U,Y,te)},ft.useInsertionEffect=function(U,Y){return I.H.useInsertionEffect(U,Y)},ft.useLayoutEffect=function(U,Y){return I.H.useLayoutEffect(U,Y)},ft.useMemo=function(U,Y){return I.H.useMemo(U,Y)},ft.useOptimistic=function(U,Y){return I.H.useOptimistic(U,Y)},ft.useReducer=function(U,Y,te){return I.H.useReducer(U,Y,te)},ft.useRef=function(U){return I.H.useRef(U)},ft.useState=function(U){return I.H.useState(U)},ft.useSyncExternalStore=function(U,Y,te){return I.H.useSyncExternalStore(U,Y,te)},ft.useTransition=function(){return I.H.useTransition()},ft.version="19.2.0",ft}var i2;function Z_(){return i2||(i2=1,u1.exports=n6()),u1.exports}var F=Z_();const _m=J5(F);var d1={exports:{}},Kf={},f1={exports:{}},h1={};var a2;function r6(){return a2||(a2=1,(function(n){function e($,H){var J=$.length;$.push(H);e:for(;0<J;){var re=J-1>>>1,fe=$[re];if(0<i(fe,H))$[re]=H,$[J]=fe,J=re;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var H=$[0],J=$.pop();if(J!==H){$[0]=J;e:for(var re=0,fe=$.length,U=fe>>>1;re<U;){var Y=2*(re+1)-1,te=$[Y],ae=Y+1,ne=$[ae];if(0>i(te,J))ae<fe&&0>i(ne,te)?($[re]=ne,$[ae]=J,re=ae):($[re]=te,$[Y]=J,re=Y);else if(ae<fe&&0>i(ne,J))$[re]=ne,$[ae]=J,re=ae;else break e}}return H}function i($,H){var J=$.sortIndex-H.sortIndex;return J!==0?J:$.id-H.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,p=null,m=3,x=!1,_=!1,E=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function j($){for(var H=t(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=$)r(d),H.sortIndex=H.expirationTime,e(u,H);else break;H=t(d)}}function z($){if(E=!1,j($),!_)if(t(u)!==null)_=!0,V||(V=!0,L());else{var H=t(d);H!==null&&Q(z,H.startTime-$)}}var V=!1,I=-1,A=5,k=-1;function O(){return S?!0:!(n.unstable_now()-k<A)}function B(){if(S=!1,V){var $=n.unstable_now();k=$;var H=!0;try{e:{_=!1,E&&(E=!1,C(I),I=-1),x=!0;var J=m;try{t:{for(j($),p=t(u);p!==null&&!(p.expirationTime>$&&O());){var re=p.callback;if(typeof re=="function"){p.callback=null,m=p.priorityLevel;var fe=re(p.expirationTime<=$);if($=n.unstable_now(),typeof fe=="function"){p.callback=fe,j($),H=!0;break t}p===t(u)&&r(u),j($)}else r(u);p=t(u)}if(p!==null)H=!0;else{var U=t(d);U!==null&&Q(z,U.startTime-$),H=!1}}break e}finally{p=null,m=J,x=!1}H=void 0}}finally{H?L():V=!1}}}var L;if(typeof R=="function")L=function(){R(B)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,X=M.port2;M.port1.onmessage=B,L=function(){X.postMessage(null)}}else L=function(){T(B,0)};function Q($,H){I=T(function(){$(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function($){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var J=m;m=H;try{return $()}finally{m=J}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function($,H){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var J=m;m=$;try{return H()}finally{m=J}},n.unstable_scheduleCallback=function($,H,J){var re=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?re+J:re):J=re,$){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=J+fe,$={id:h++,callback:H,priorityLevel:$,startTime:J,expirationTime:fe,sortIndex:-1},J>re?($.sortIndex=J,e(d,$),t(u)===null&&$===t(d)&&(E?(C(I),I=-1):E=!0,Q(z,J-re))):($.sortIndex=fe,e(u,$),_||x||(_=!0,V||(V=!0,L()))),$},n.unstable_shouldYield=O,n.unstable_wrapCallback=function($){var H=m;return function(){var J=m;m=H;try{return $.apply(this,arguments)}finally{m=J}}}})(h1)),h1}var s2;function i6(){return s2||(s2=1,f1.exports=r6()),f1.exports}var p1={exports:{}},Cr={};var o2;function a6(){if(o2)return Cr;o2=1;var n=Z_();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Cr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Cr.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(u,d,null,h)},Cr.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},Cr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},Cr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Cr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=c(h,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:x}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:m,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Cr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},Cr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=c(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Cr.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},Cr.requestFormReset=function(u){r.d.r(u)},Cr.unstable_batchedUpdates=function(u,d){return u(d)},Cr.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},Cr.useFormStatus=function(){return o.H.useHostTransitionStatus()},Cr.version="19.2.0",Cr}var l2;function s6(){if(l2)return p1.exports;l2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),p1.exports=a6(),p1.exports}var c2;function o6(){if(c2)return Kf;c2=1;var n=i6(),e=Z_(),t=s6();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,g=l;;){var b=f.return;if(b===null)break;var w=b.alternate;if(w===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===f)return u(b),s;if(w===g)return u(b),l;w=w.sibling}throw Error(r(188))}if(f.return!==g.return)f=b,g=w;else{for(var N=!1,G=b.child;G;){if(G===f){N=!0,f=b,g=w;break}if(G===g){N=!0,g=b,f=w;break}G=G.sibling}if(!N){for(G=w.child;G;){if(G===f){N=!0,f=w,g=b;break}if(G===g){N=!0,g=w,f=b;break}G=G.sibling}if(!N)throw Error(r(189))}}if(f.alternate!==g)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function h(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=h(s),l!==null)return l;s=s.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),R=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=B&&s[B]||s["@@iterator"],typeof s=="function"?s:null)}var M=Symbol.for("react.client.reference");function X(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===M?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case E:return"Fragment";case T:return"Profiler";case S:return"StrictMode";case z:return"Suspense";case V:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case R:return s.displayName||"Context";case C:return(s._context.displayName||"Context")+".Consumer";case j:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case I:return l=s.displayName||null,l!==null?l:X(s.type)||"Memo";case A:l=s._payload,s=s._init;try{return X(s(l))}catch{}}return null}var Q=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},re=[],fe=-1;function U(s){return{current:s}}function Y(s){0>fe||(s.current=re[fe],re[fe]=null,fe--)}function te(s,l){fe++,re[fe]=s.current,s.current=l}var ae=U(null),ne=U(null),se=U(null),me=U(null);function Te(s,l){switch(te(se,l),te(ne,s),te(ae,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?SC(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=SC(l),s=TC(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Y(ae),te(ae,s)}function Ce(){Y(ae),Y(ne),Y(se)}function Ne(s){s.memoizedState!==null&&te(me,s);var l=ae.current,f=TC(l,s.type);l!==f&&(te(ne,s),te(ae,f))}function xe(s){ne.current===s&&(Y(ae),Y(ne)),me.current===s&&(Y(me),Gf._currentValue=J)}var Ee,Qe;function Oe(s){if(Ee===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Ee=l&&l[1]||"",Qe=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+s+Qe}var Be=!1;function ze(s,l){if(!s||Be)return"";Be=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(pe){var de=pe}Reflect.construct(s,[],be)}else{try{be.call()}catch(pe){de=pe}s.call(be.prototype)}}else{try{throw Error()}catch(pe){de=pe}(be=s())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(pe){if(pe&&de&&typeof pe.stack=="string")return[pe.stack,de.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=g.DetermineComponentFrameRoot(),N=w[0],G=w[1];if(N&&G){var K=N.split(`
`),ue=G.split(`
`);for(b=g=0;g<K.length&&!K[g].includes("DetermineComponentFrameRoot");)g++;for(;b<ue.length&&!ue[b].includes("DetermineComponentFrameRoot");)b++;if(g===K.length||b===ue.length)for(g=K.length-1,b=ue.length-1;1<=g&&0<=b&&K[g]!==ue[b];)b--;for(;1<=g&&0<=b;g--,b--)if(K[g]!==ue[b]){if(g!==1||b!==1)do if(g--,b--,0>b||K[g]!==ue[b]){var ve=`
`+K[g].replace(" at new "," at ");return s.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",s.displayName)),ve}while(1<=g&&0<=b);break}}}finally{Be=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?Oe(f):""}function st(s,l){switch(s.tag){case 26:case 27:case 5:return Oe(s.type);case 16:return Oe("Lazy");case 13:return s.child!==l&&l!==null?Oe("Suspense Fallback"):Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return ze(s.type,!1);case 11:return ze(s.type.render,!1);case 1:return ze(s.type,!0);case 31:return Oe("Activity");default:return""}}function yt(s){try{var l="",f=null;do l+=st(s,f),f=s,s=s.return;while(s);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Ve=Object.prototype.hasOwnProperty,Ke=n.unstable_scheduleCallback,Mt=n.unstable_cancelCallback,yn=n.unstable_shouldYield,dn=n.unstable_requestPaint,bt=n.unstable_now,Lt=n.unstable_getCurrentPriorityLevel,Ar=n.unstable_ImmediatePriority,Zn=n.unstable_UserBlockingPriority,$r=n.unstable_NormalPriority,ss=n.unstable_LowPriority,Qs=n.unstable_IdlePriority,Wi=n.log,ba=n.unstable_setDisableYieldValue,Vr=null,bn=null;function cr(s){if(typeof Wi=="function"&&ba(s),bn&&typeof bn.setStrictMode=="function")try{bn.setStrictMode(Vr,s)}catch{}}var en=Math.clz32?Math.clz32:Me,Zs=Math.log,ke=Math.LN2;function Me(s){return s>>>=0,s===0?32:31-(Zs(s)/ke|0)|0}var dt=256,Xe=262144,Ze=4194304;function An(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Jt(s,l,f){var g=s.pendingLanes;if(g===0)return 0;var b=0,w=s.suspendedLanes,N=s.pingedLanes;s=s.warmLanes;var G=g&134217727;return G!==0?(g=G&~w,g!==0?b=An(g):(N&=G,N!==0?b=An(N):f||(f=G&~s,f!==0&&(b=An(f))))):(G=g&~w,G!==0?b=An(G):N!==0?b=An(N):f||(f=g&~s,f!==0&&(b=An(f)))),b===0?0:l!==0&&l!==b&&(l&w)===0&&(w=b&-b,f=l&-l,w>=f||w===32&&(f&4194048)!==0)?l:b}function nt(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Cn(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rt(){var s=Ze;return Ze<<=1,(Ze&62914560)===0&&(Ze=4194304),s}function St(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function In(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function fn(s,l,f,g,b,w){var N=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var G=s.entanglements,K=s.expirationTimes,ue=s.hiddenUpdates;for(f=N&~f;0<f;){var ve=31-en(f),be=1<<ve;G[ve]=0,K[ve]=-1;var de=ue[ve];if(de!==null)for(ue[ve]=null,ve=0;ve<de.length;ve++){var pe=de[ve];pe!==null&&(pe.lane&=-536870913)}f&=~be}g!==0&&xt(s,g,0),w!==0&&b===0&&s.tag!==0&&(s.suspendedLanes|=w&~(N&~l))}function xt(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var g=31-en(l);s.entangledLanes|=l,s.entanglements[g]=s.entanglements[g]|1073741824|f&261930}function Rn(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var g=31-en(f),b=1<<g;b&l|s[g]&l&&(s[g]|=l),f&=~b}}function Jn(s,l){var f=l&-l;return f=(f&42)!==0?1:oi(f),(f&(s.suspendedLanes|l))!==0?0:f}function oi(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function er(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ei(){var s=H.p;return s!==0?s:(s=window.event,s===void 0?32:KC(s.type))}function Dn(s,l){var f=H.p;try{return H.p=s,l()}finally{H.p=f}}var Qi=Math.random().toString(36).slice(2),zn="__reactFiber$"+Qi,ur="__reactProps$"+Qi,xa="__reactContainer$"+Qi,Uc="__reactEvents$"+Qi,gy="__reactListeners$"+Qi,eg="__reactHandles$"+Qi,tg="__reactResources$"+Qi,_a="__reactMarker$"+Qi;function Fc(s){delete s[zn],delete s[ur],delete s[Uc],delete s[gy],delete s[eg]}function wa(s){var l=s[zn];if(l)return l;for(var f=s.parentNode;f;){if(l=f[xa]||f[zn]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=NC(s);s!==null;){if(f=s[zn])return f;s=NC(s)}return l}s=f,f=s.parentNode}return null}function Si(s){if(s=s[zn]||s[xa]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function li(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function Ea(s){var l=s[tg];return l||(l=s[tg]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ln(s){s[_a]=!0}var Xd=new Set,Wd={};function Sa(s,l){Ta(s,l),Ta(s+"Capture",l)}function Ta(s,l){for(Wd[s]=l,s=0;s<l.length;s++)Xd.add(l[s])}var Qd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zd={},Jd={};function ng(s){return Ve.call(Jd,s)?!0:Ve.call(Zd,s)?!1:Qd.test(s)?Jd[s]=!0:(Zd[s]=!0,!1)}function Gc(s,l,f){if(ng(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function ci(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function Bn(s,l,f,g){if(g===null)s.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+g)}}function dr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Js(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ef(s,l,f){var g=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,w=g.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return b.call(this)},set:function(N){f=""+N,w.call(this,N)}}),Object.defineProperty(s,l,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(N){f=""+N},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Bt(s){if(!s._valueTracker){var l=Js(s)?"checked":"value";s._valueTracker=ef(s,l,""+s[l])}}function bl(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),g="";return s&&(g=Js(s)?s.checked?"true":"false":s.value),s=g,s!==f?(l.setValue(s),!0):!1}function Aa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var xl=/[\n"\\]/g;function Yr(s){return s.replace(xl,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function qc(s,l,f,g,b,w,N,G){s.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.type=N:s.removeAttribute("type"),l!=null?N==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+dr(l)):s.value!==""+dr(l)&&(s.value=""+dr(l)):N!=="submit"&&N!=="reset"||s.removeAttribute("value"),l!=null?tf(s,N,dr(l)):f!=null?tf(s,N,dr(f)):g!=null&&s.removeAttribute("value"),b==null&&w!=null&&(s.defaultChecked=!!w),b!=null&&(s.checked=b&&typeof b!="function"&&typeof b!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?s.name=""+dr(G):s.removeAttribute("name")}function rg(s,l,f,g,b,w,N,G){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),l!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){Bt(s);return}f=f!=null?""+dr(f):"",l=l!=null?""+dr(l):f,G||l===s.value||(s.value=l),s.defaultValue=l}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,s.checked=G?s.checked:!!g,s.defaultChecked=!!g,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(s.name=N),Bt(s)}function tf(s,l,f){l==="number"&&Aa(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function eo(s,l,f,g){if(s=s.options,l){l={};for(var b=0;b<f.length;b++)l["$"+f[b]]=!0;for(f=0;f<s.length;f++)b=l.hasOwnProperty("$"+s[f].value),s[f].selected!==b&&(s[f].selected=b),b&&g&&(s[f].defaultSelected=!0)}else{for(f=""+dr(f),l=null,b=0;b<s.length;b++){if(s[b].value===f){s[b].selected=!0,g&&(s[b].defaultSelected=!0);return}l!==null||s[b].disabled||(l=s[b])}l!==null&&(l.selected=!0)}}function ig(s,l,f){if(l!=null&&(l=""+dr(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+dr(f):""}function to(s,l,f,g){if(l==null){if(g!=null){if(f!=null)throw Error(r(92));if(Q(g)){if(1<g.length)throw Error(r(93));g=g[0]}f=g}f==null&&(f=""),l=f}f=dr(l),s.defaultValue=f,g=s.textContent,g===f&&g!==""&&g!==null&&(s.value=g),Bt(s)}function Kr(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var ag=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nf(s,l,f){var g=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":g?s.setProperty(l,f):typeof f!="number"||f===0||ag.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function rf(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?s.setProperty(g,""):g==="float"?s.cssFloat="":s[g]="");for(var b in l)g=l[b],l.hasOwnProperty(b)&&f[b]!==g&&nf(s,b,g)}else for(var w in l)l.hasOwnProperty(w)&&nf(s,w,l[w])}function Hc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),no=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $c(s){return no.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Zi(){}var af=null;function Ti(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ro=null,Ca=null;function _l(s){var l=Si(s);if(l&&(s=l.stateNode)){var f=s[ur]||null;e:switch(s=l.stateNode,l.type){case"input":if(qc(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Yr(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var g=f[l];if(g!==s&&g.form===s.form){var b=g[ur]||null;if(!b)throw Error(r(90));qc(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<f.length;l++)g=f[l],g.form===s.form&&bl(g)}break e;case"textarea":ig(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&eo(s,!!f.multiple,l,!1)}}}var Yc=!1;function io(s,l,f){if(Yc)return s(l,f);Yc=!0;try{var g=s(l);return g}finally{if(Yc=!1,(ro!==null||Ca!==null)&&(Jg(),ro&&(l=ro,s=Ca,Ca=ro=null,_l(l),s)))for(l=0;l<s.length;l++)_l(s[l])}}function Ji(s,l){var f=s.stateNode;if(f===null)return null;var g=f[ur]||null;if(g===null)return null;f=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wl=!1;if(Ai)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){wl=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch{wl=!1}var Ia=null,sf=null,El=null;function of(){if(El)return El;var s,l=sf,f=l.length,g,b="value"in Ia?Ia.value:Ia.textContent,w=b.length;for(s=0;s<f&&l[s]===b[s];s++);var N=f-s;for(g=1;g<=N&&l[f-g]===b[w-g];g++);return El=b.slice(s,1<g?1-g:void 0)}function Sl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function os(){return!0}function ea(){return!1}function gr(s){function l(f,g,b,w,N){this._reactName=f,this._targetInst=b,this.type=g,this.nativeEvent=w,this.target=N,this.currentTarget=null;for(var G in s)s.hasOwnProperty(G)&&(f=s[G],this[G]=f?f(w):w[G]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?os:ea,this.isPropagationStopped=ea,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),l}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ra=gr(ls),ao=p({},ls,{view:0,detail:0}),lf=gr(ao),so,Kc,Da,Xc=p({},ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Da&&(Da&&s.type==="mousemove"?(so=s.screenX-Da.screenX,Kc=s.screenY-Da.screenY):Kc=so=0,Da=s),so)},movementY:function(s){return"movementY"in s?s.movementY:Kc}}),cf=gr(Xc),Tl=p({},Xc,{dataTransfer:0}),og=gr(Tl),lg=p({},ao,{relatedTarget:0}),Al=gr(lg),uf=p({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),cg=gr(uf),Wc=p({},ls,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ug=gr(Wc),dg=p({},ls,{data:0}),ka=gr(dg),fg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gg(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=pg[s])?!!l[s]:!1}function oo(){return gg}var jr=p({},ao,{key:function(s){if(s.key){var l=fg[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Sl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?hg[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oo,charCode:function(s){return s.type==="keypress"?Sl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Sl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),mg=gr(jr),vg=p({},Xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cs=gr(vg),v=p({},ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oo}),D=gr(v),P=p({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),q=gr(P),le=p({},Xc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),he=gr(le),Re=p({},ls,{newState:0,oldState:0}),ht=gr(Re),kn=[9,13,27,32],Vt=Ai&&"CompositionEvent"in window,sn=null;Ai&&"documentMode"in document&&(sn=document.documentMode);var Ci=Ai&&"TextEvent"in window&&!sn,Na=Ai&&(!Vt||sn&&8<sn&&11>=sn),ta=" ",na=!1;function Cl(s,l){switch(s){case"keyup":return kn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Zc=!1;function Ej(s,l){switch(s){case"compositionend":return Qc(l);case"keypress":return l.which!==32?null:(na=!0,ta);case"textInput":return s=l.data,s===ta&&na?null:s;default:return null}}function Sj(s,l){if(Zc)return s==="compositionend"||!Vt&&Cl(s,l)?(s=of(),El=sf=Ia=null,Zc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Na&&l.locale!=="ko"?null:l.data;default:return null}}var Tj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OS(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!Tj[s.type]:l==="textarea"}function VS(s,l,f,g){ro?Ca?Ca.push(g):Ca=[g]:ro=g,l=sm(l,"onChange"),0<l.length&&(f=new Ra("onChange","change",null,f,g),s.push({event:f,listeners:l}))}var df=null,ff=null;function Aj(s){yC(s,0)}function yg(s){var l=li(s);if(bl(l))return s}function jS(s,l){if(s==="change")return l}var zS=!1;if(Ai){var my;if(Ai){var vy="oninput"in document;if(!vy){var LS=document.createElement("div");LS.setAttribute("oninput","return;"),vy=typeof LS.oninput=="function"}my=vy}else my=!1;zS=my&&(!document.documentMode||9<document.documentMode)}function BS(){df&&(df.detachEvent("onpropertychange",US),ff=df=null)}function US(s){if(s.propertyName==="value"&&yg(ff)){var l=[];VS(l,ff,s,Ti(s)),io(Aj,l)}}function Cj(s,l,f){s==="focusin"?(BS(),df=l,ff=f,df.attachEvent("onpropertychange",US)):s==="focusout"&&BS()}function Ij(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return yg(ff)}function Rj(s,l){if(s==="click")return yg(l)}function Dj(s,l){if(s==="input"||s==="change")return yg(l)}function kj(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ui=typeof Object.is=="function"?Object.is:kj;function hf(s,l){if(ui(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),g=Object.keys(l);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!Ve.call(l,b)||!ui(s[b],l[b]))return!1}return!0}function FS(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function GS(s,l){var f=FS(s);s=0;for(var g;f;){if(f.nodeType===3){if(g=s+f.textContent.length,s<=l&&g>=l)return{node:f,offset:l-s};s=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=FS(f)}}function qS(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?qS(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function HS(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Aa(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=Aa(s.document)}return l}function yy(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var Nj=Ai&&"documentMode"in document&&11>=document.documentMode,Jc=null,by=null,pf=null,xy=!1;function $S(s,l,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;xy||Jc==null||Jc!==Aa(g)||(g=Jc,"selectionStart"in g&&yy(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),pf&&hf(pf,g)||(pf=g,g=sm(by,"onSelect"),0<g.length&&(l=new Ra("onSelect","select",null,l,f),s.push({event:l,listeners:g}),l.target=Jc)))}function Il(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var eu={animationend:Il("Animation","AnimationEnd"),animationiteration:Il("Animation","AnimationIteration"),animationstart:Il("Animation","AnimationStart"),transitionrun:Il("Transition","TransitionRun"),transitionstart:Il("Transition","TransitionStart"),transitioncancel:Il("Transition","TransitionCancel"),transitionend:Il("Transition","TransitionEnd")},_y={},YS={};Ai&&(YS=document.createElement("div").style,"AnimationEvent"in window||(delete eu.animationend.animation,delete eu.animationiteration.animation,delete eu.animationstart.animation),"TransitionEvent"in window||delete eu.transitionend.transition);function Rl(s){if(_y[s])return _y[s];if(!eu[s])return s;var l=eu[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in YS)return _y[s]=l[f];return s}var KS=Rl("animationend"),XS=Rl("animationiteration"),WS=Rl("animationstart"),Mj=Rl("transitionrun"),Pj=Rl("transitionstart"),Oj=Rl("transitioncancel"),QS=Rl("transitionend"),ZS=new Map,wy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wy.push("scrollEnd");function ra(s,l){ZS.set(s,l),Sa(l,[s])}var bg=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Ii=[],tu=0,Ey=0;function xg(){for(var s=tu,l=Ey=tu=0;l<s;){var f=Ii[l];Ii[l++]=null;var g=Ii[l];Ii[l++]=null;var b=Ii[l];Ii[l++]=null;var w=Ii[l];if(Ii[l++]=null,g!==null&&b!==null){var N=g.pending;N===null?b.next=b:(b.next=N.next,N.next=b),g.pending=b}w!==0&&JS(f,b,w)}}function _g(s,l,f,g){Ii[tu++]=s,Ii[tu++]=l,Ii[tu++]=f,Ii[tu++]=g,Ey|=g,s.lanes|=g,s=s.alternate,s!==null&&(s.lanes|=g)}function Sy(s,l,f,g){return _g(s,l,f,g),wg(s)}function Dl(s,l){return _g(s,null,null,l),wg(s)}function JS(s,l,f){s.lanes|=f;var g=s.alternate;g!==null&&(g.lanes|=f);for(var b=!1,w=s.return;w!==null;)w.childLanes|=f,g=w.alternate,g!==null&&(g.childLanes|=f),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(b=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,b&&l!==null&&(b=31-en(f),s=w.hiddenUpdates,g=s[b],g===null?s[b]=[l]:g.push(l),l.lane=f|536870912),w):null}function wg(s){if(50<Vf)throw Vf=0,Mb=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var nu={};function Vj(s,l,f,g){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(s,l,f,g){return new Vj(s,l,f,g)}function Ty(s){return s=s.prototype,!(!s||!s.isReactComponent)}function us(s,l){var f=s.alternate;return f===null?(f=di(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function eT(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Eg(s,l,f,g,b,w){var N=0;if(g=s,typeof s=="function")Ty(s)&&(N=1);else if(typeof s=="string")N=U5(s,f,ae.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case k:return s=di(31,f,l,b),s.elementType=k,s.lanes=w,s;case E:return kl(f.children,b,w,l);case S:N=8,b|=24;break;case T:return s=di(12,f,l,b|2),s.elementType=T,s.lanes=w,s;case z:return s=di(13,f,l,b),s.elementType=z,s.lanes=w,s;case V:return s=di(19,f,l,b),s.elementType=V,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:N=10;break e;case C:N=9;break e;case j:N=11;break e;case I:N=14;break e;case A:N=16,g=null;break e}N=29,f=Error(r(130,s===null?"null":typeof s,"")),g=null}return l=di(N,f,l,b),l.elementType=s,l.type=g,l.lanes=w,l}function kl(s,l,f,g){return s=di(7,s,g,l),s.lanes=f,s}function Ay(s,l,f){return s=di(6,s,null,l),s.lanes=f,s}function tT(s){var l=di(18,null,null,0);return l.stateNode=s,l}function Cy(s,l,f){return l=di(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var nT=new WeakMap;function Ri(s,l){if(typeof s=="object"&&s!==null){var f=nT.get(s);return f!==void 0?f:(l={value:s,source:l,stack:yt(l)},nT.set(s,l),l)}return{value:s,source:l,stack:yt(l)}}var ru=[],iu=0,Sg=null,gf=0,Di=[],ki=0,lo=null,Ma=1,Pa="";function ds(s,l){ru[iu++]=gf,ru[iu++]=Sg,Sg=s,gf=l}function rT(s,l,f){Di[ki++]=Ma,Di[ki++]=Pa,Di[ki++]=lo,lo=s;var g=Ma;s=Pa;var b=32-en(g)-1;g&=~(1<<b),f+=1;var w=32-en(l)+b;if(30<w){var N=b-b%5;w=(g&(1<<N)-1).toString(32),g>>=N,b-=N,Ma=1<<32-en(l)+b|f<<b|g,Pa=w+s}else Ma=1<<w|f<<b|g,Pa=s}function Iy(s){s.return!==null&&(ds(s,1),rT(s,1,0))}function Ry(s){for(;s===Sg;)Sg=ru[--iu],ru[iu]=null,gf=ru[--iu],ru[iu]=null;for(;s===lo;)lo=Di[--ki],Di[ki]=null,Pa=Di[--ki],Di[ki]=null,Ma=Di[--ki],Di[ki]=null}function iT(s,l){Di[ki++]=Ma,Di[ki++]=Pa,Di[ki++]=lo,Ma=l.id,Pa=l.overflow,lo=s}var mr=null,tn=null,Dt=!1,co=null,Ni=!1,Dy=Error(r(519));function uo(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mf(Ri(l,s)),Dy}function aT(s){var l=s.stateNode,f=s.type,g=s.memoizedProps;switch(l[zn]=s,l[ur]=g,f){case"dialog":Et("cancel",l),Et("close",l);break;case"iframe":case"object":case"embed":Et("load",l);break;case"video":case"audio":for(f=0;f<zf.length;f++)Et(zf[f],l);break;case"source":Et("error",l);break;case"img":case"image":case"link":Et("error",l),Et("load",l);break;case"details":Et("toggle",l);break;case"input":Et("invalid",l),rg(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Et("invalid",l);break;case"textarea":Et("invalid",l),to(l,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||g.suppressHydrationWarning===!0||wC(l.textContent,f)?(g.popover!=null&&(Et("beforetoggle",l),Et("toggle",l)),g.onScroll!=null&&Et("scroll",l),g.onScrollEnd!=null&&Et("scrollend",l),g.onClick!=null&&(l.onclick=Zi),l=!0):l=!1,l||uo(s,!0)}function sT(s){for(mr=s.return;mr;)switch(mr.tag){case 5:case 31:case 13:Ni=!1;return;case 27:case 3:Ni=!0;return;default:mr=mr.return}}function au(s){if(s!==mr)return!1;if(!Dt)return sT(s),Dt=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||Kb(s.type,s.memoizedProps)),f=!f),f&&tn&&uo(s),sT(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));tn=kC(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));tn=kC(s)}else l===27?(l=tn,To(s.type)?(s=Jb,Jb=null,tn=s):tn=l):tn=mr?Pi(s.stateNode.nextSibling):null;return!0}function Nl(){tn=mr=null,Dt=!1}function ky(){var s=co;return s!==null&&(Zr===null?Zr=s:Zr.push.apply(Zr,s),co=null),s}function mf(s){co===null?co=[s]:co.push(s)}var Ny=U(null),Ml=null,fs=null;function fo(s,l,f){te(Ny,l._currentValue),l._currentValue=f}function hs(s){s._currentValue=Ny.current,Y(Ny)}function My(s,l,f){for(;s!==null;){var g=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),s===f)break;s=s.return}}function Py(s,l,f,g){var b=s.child;for(b!==null&&(b.return=s);b!==null;){var w=b.dependencies;if(w!==null){var N=b.child;w=w.firstContext;e:for(;w!==null;){var G=w;w=b;for(var K=0;K<l.length;K++)if(G.context===l[K]){w.lanes|=f,G=w.alternate,G!==null&&(G.lanes|=f),My(w.return,f,s),g||(N=null);break e}w=G.next}}else if(b.tag===18){if(N=b.return,N===null)throw Error(r(341));N.lanes|=f,w=N.alternate,w!==null&&(w.lanes|=f),My(N,f,s),N=null}else N=b.child;if(N!==null)N.return=b;else for(N=b;N!==null;){if(N===s){N=null;break}if(b=N.sibling,b!==null){b.return=N.return,N=b;break}N=N.return}b=N}}function su(s,l,f,g){s=null;for(var b=l,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var N=b.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var G=b.type;ui(b.pendingProps.value,N.value)||(s!==null?s.push(G):s=[G])}}else if(b===me.current){if(N=b.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(s!==null?s.push(Gf):s=[Gf])}b=b.return}s!==null&&Py(l,s,f,g),l.flags|=262144}function Tg(s){for(s=s.firstContext;s!==null;){if(!ui(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Pl(s){Ml=s,fs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function vr(s){return oT(Ml,s)}function Ag(s,l){return Ml===null&&Pl(s),oT(s,l)}function oT(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},fs===null){if(s===null)throw Error(r(308));fs=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else fs=fs.next=l;return f}var jj=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,g){s.push(g)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},zj=n.unstable_scheduleCallback,Lj=n.unstable_NormalPriority,Un={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oy(){return{controller:new jj,data:new Map,refCount:0}}function vf(s){s.refCount--,s.refCount===0&&zj(Lj,function(){s.controller.abort()})}var yf=null,Vy=0,ou=0,lu=null;function Bj(s,l){if(yf===null){var f=yf=[];Vy=0,ou=Lb(),lu={status:"pending",value:void 0,then:function(g){f.push(g)}}}return Vy++,l.then(lT,lT),l}function lT(){if(--Vy===0&&yf!==null){lu!==null&&(lu.status="fulfilled");var s=yf;yf=null,ou=0,lu=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function Uj(s,l){var f=[],g={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return s.then(function(){g.status="fulfilled",g.value=l;for(var b=0;b<f.length;b++)(0,f[b])(l)},function(b){for(g.status="rejected",g.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),g}var cT=$.S;$.S=function(s,l){$A=bt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Bj(s,l),cT!==null&&cT(s,l)};var Ol=U(null);function jy(){var s=Ol.current;return s!==null?s:Qt.pooledCache}function Cg(s,l){l===null?te(Ol,Ol.current):te(Ol,l.pool)}function uT(){var s=jy();return s===null?null:{parent:Un._currentValue,pool:s}}var cu=Error(r(460)),zy=Error(r(474)),Ig=Error(r(542)),Rg={then:function(){}};function dT(s){return s=s.status,s==="fulfilled"||s==="rejected"}function fT(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(Zi,Zi),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,pT(s),s;default:if(typeof l.status=="string")l.then(Zi,Zi);else{if(s=Qt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(g){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=g}},function(g){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,pT(s),s}throw jl=l,cu}}function Vl(s){try{var l=s._init;return l(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(jl=f,cu):f}}var jl=null;function hT(){if(jl===null)throw Error(r(459));var s=jl;return jl=null,s}function pT(s){if(s===cu||s===Ig)throw Error(r(483))}var uu=null,bf=0;function Dg(s){var l=bf;return bf+=1,uu===null&&(uu=[]),fT(uu,s,l)}function xf(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function kg(s,l){throw l.$$typeof===m?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function gT(s){function l(ie,ee){if(s){var ce=ie.deletions;ce===null?(ie.deletions=[ee],ie.flags|=16):ce.push(ee)}}function f(ie,ee){if(!s)return null;for(;ee!==null;)l(ie,ee),ee=ee.sibling;return null}function g(ie){for(var ee=new Map;ie!==null;)ie.key!==null?ee.set(ie.key,ie):ee.set(ie.index,ie),ie=ie.sibling;return ee}function b(ie,ee){return ie=us(ie,ee),ie.index=0,ie.sibling=null,ie}function w(ie,ee,ce){return ie.index=ce,s?(ce=ie.alternate,ce!==null?(ce=ce.index,ce<ee?(ie.flags|=67108866,ee):ce):(ie.flags|=67108866,ee)):(ie.flags|=1048576,ee)}function N(ie){return s&&ie.alternate===null&&(ie.flags|=67108866),ie}function G(ie,ee,ce,ye){return ee===null||ee.tag!==6?(ee=Ay(ce,ie.mode,ye),ee.return=ie,ee):(ee=b(ee,ce),ee.return=ie,ee)}function K(ie,ee,ce,ye){var He=ce.type;return He===E?ve(ie,ee,ce.props.children,ye,ce.key):ee!==null&&(ee.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===A&&Vl(He)===ee.type)?(ee=b(ee,ce.props),xf(ee,ce),ee.return=ie,ee):(ee=Eg(ce.type,ce.key,ce.props,null,ie.mode,ye),xf(ee,ce),ee.return=ie,ee)}function ue(ie,ee,ce,ye){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ce.containerInfo||ee.stateNode.implementation!==ce.implementation?(ee=Cy(ce,ie.mode,ye),ee.return=ie,ee):(ee=b(ee,ce.children||[]),ee.return=ie,ee)}function ve(ie,ee,ce,ye,He){return ee===null||ee.tag!==7?(ee=kl(ce,ie.mode,ye,He),ee.return=ie,ee):(ee=b(ee,ce),ee.return=ie,ee)}function be(ie,ee,ce){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=Ay(""+ee,ie.mode,ce),ee.return=ie,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case x:return ce=Eg(ee.type,ee.key,ee.props,null,ie.mode,ce),xf(ce,ee),ce.return=ie,ce;case _:return ee=Cy(ee,ie.mode,ce),ee.return=ie,ee;case A:return ee=Vl(ee),be(ie,ee,ce)}if(Q(ee)||L(ee))return ee=kl(ee,ie.mode,ce,null),ee.return=ie,ee;if(typeof ee.then=="function")return be(ie,Dg(ee),ce);if(ee.$$typeof===R)return be(ie,Ag(ie,ee),ce);kg(ie,ee)}return null}function de(ie,ee,ce,ye){var He=ee!==null?ee.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return He!==null?null:G(ie,ee,""+ce,ye);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case x:return ce.key===He?K(ie,ee,ce,ye):null;case _:return ce.key===He?ue(ie,ee,ce,ye):null;case A:return ce=Vl(ce),de(ie,ee,ce,ye)}if(Q(ce)||L(ce))return He!==null?null:ve(ie,ee,ce,ye,null);if(typeof ce.then=="function")return de(ie,ee,Dg(ce),ye);if(ce.$$typeof===R)return de(ie,ee,Ag(ie,ce),ye);kg(ie,ce)}return null}function pe(ie,ee,ce,ye,He){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ie=ie.get(ce)||null,G(ee,ie,""+ye,He);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case x:return ie=ie.get(ye.key===null?ce:ye.key)||null,K(ee,ie,ye,He);case _:return ie=ie.get(ye.key===null?ce:ye.key)||null,ue(ee,ie,ye,He);case A:return ye=Vl(ye),pe(ie,ee,ce,ye,He)}if(Q(ye)||L(ye))return ie=ie.get(ce)||null,ve(ee,ie,ye,He,null);if(typeof ye.then=="function")return pe(ie,ee,ce,Dg(ye),He);if(ye.$$typeof===R)return pe(ie,ee,ce,Ag(ee,ye),He);kg(ee,ye)}return null}function je(ie,ee,ce,ye){for(var He=null,Pt=null,Ue=ee,mt=ee=0,At=null;Ue!==null&&mt<ce.length;mt++){Ue.index>mt?(At=Ue,Ue=null):At=Ue.sibling;var Ot=de(ie,Ue,ce[mt],ye);if(Ot===null){Ue===null&&(Ue=At);break}s&&Ue&&Ot.alternate===null&&l(ie,Ue),ee=w(Ot,ee,mt),Pt===null?He=Ot:Pt.sibling=Ot,Pt=Ot,Ue=At}if(mt===ce.length)return f(ie,Ue),Dt&&ds(ie,mt),He;if(Ue===null){for(;mt<ce.length;mt++)Ue=be(ie,ce[mt],ye),Ue!==null&&(ee=w(Ue,ee,mt),Pt===null?He=Ue:Pt.sibling=Ue,Pt=Ue);return Dt&&ds(ie,mt),He}for(Ue=g(Ue);mt<ce.length;mt++)At=pe(Ue,ie,mt,ce[mt],ye),At!==null&&(s&&At.alternate!==null&&Ue.delete(At.key===null?mt:At.key),ee=w(At,ee,mt),Pt===null?He=At:Pt.sibling=At,Pt=At);return s&&Ue.forEach(function(Do){return l(ie,Do)}),Dt&&ds(ie,mt),He}function Je(ie,ee,ce,ye){if(ce==null)throw Error(r(151));for(var He=null,Pt=null,Ue=ee,mt=ee=0,At=null,Ot=ce.next();Ue!==null&&!Ot.done;mt++,Ot=ce.next()){Ue.index>mt?(At=Ue,Ue=null):At=Ue.sibling;var Do=de(ie,Ue,Ot.value,ye);if(Do===null){Ue===null&&(Ue=At);break}s&&Ue&&Do.alternate===null&&l(ie,Ue),ee=w(Do,ee,mt),Pt===null?He=Do:Pt.sibling=Do,Pt=Do,Ue=At}if(Ot.done)return f(ie,Ue),Dt&&ds(ie,mt),He;if(Ue===null){for(;!Ot.done;mt++,Ot=ce.next())Ot=be(ie,Ot.value,ye),Ot!==null&&(ee=w(Ot,ee,mt),Pt===null?He=Ot:Pt.sibling=Ot,Pt=Ot);return Dt&&ds(ie,mt),He}for(Ue=g(Ue);!Ot.done;mt++,Ot=ce.next())Ot=pe(Ue,ie,mt,Ot.value,ye),Ot!==null&&(s&&Ot.alternate!==null&&Ue.delete(Ot.key===null?mt:Ot.key),ee=w(Ot,ee,mt),Pt===null?He=Ot:Pt.sibling=Ot,Pt=Ot);return s&&Ue.forEach(function(Z5){return l(ie,Z5)}),Dt&&ds(ie,mt),He}function Kt(ie,ee,ce,ye){if(typeof ce=="object"&&ce!==null&&ce.type===E&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case x:e:{for(var He=ce.key;ee!==null;){if(ee.key===He){if(He=ce.type,He===E){if(ee.tag===7){f(ie,ee.sibling),ye=b(ee,ce.props.children),ye.return=ie,ie=ye;break e}}else if(ee.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===A&&Vl(He)===ee.type){f(ie,ee.sibling),ye=b(ee,ce.props),xf(ye,ce),ye.return=ie,ie=ye;break e}f(ie,ee);break}else l(ie,ee);ee=ee.sibling}ce.type===E?(ye=kl(ce.props.children,ie.mode,ye,ce.key),ye.return=ie,ie=ye):(ye=Eg(ce.type,ce.key,ce.props,null,ie.mode,ye),xf(ye,ce),ye.return=ie,ie=ye)}return N(ie);case _:e:{for(He=ce.key;ee!==null;){if(ee.key===He)if(ee.tag===4&&ee.stateNode.containerInfo===ce.containerInfo&&ee.stateNode.implementation===ce.implementation){f(ie,ee.sibling),ye=b(ee,ce.children||[]),ye.return=ie,ie=ye;break e}else{f(ie,ee);break}else l(ie,ee);ee=ee.sibling}ye=Cy(ce,ie.mode,ye),ye.return=ie,ie=ye}return N(ie);case A:return ce=Vl(ce),Kt(ie,ee,ce,ye)}if(Q(ce))return je(ie,ee,ce,ye);if(L(ce)){if(He=L(ce),typeof He!="function")throw Error(r(150));return ce=He.call(ce),Je(ie,ee,ce,ye)}if(typeof ce.then=="function")return Kt(ie,ee,Dg(ce),ye);if(ce.$$typeof===R)return Kt(ie,ee,Ag(ie,ce),ye);kg(ie,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,ee!==null&&ee.tag===6?(f(ie,ee.sibling),ye=b(ee,ce),ye.return=ie,ie=ye):(f(ie,ee),ye=Ay(ce,ie.mode,ye),ye.return=ie,ie=ye),N(ie)):f(ie,ee)}return function(ie,ee,ce,ye){try{bf=0;var He=Kt(ie,ee,ce,ye);return uu=null,He}catch(Ue){if(Ue===cu||Ue===Ig)throw Ue;var Pt=di(29,Ue,null,ie.mode);return Pt.lanes=ye,Pt.return=ie,Pt}finally{}}}var zl=gT(!0),mT=gT(!1),ho=!1;function Ly(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function By(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function po(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function go(s,l,f){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(jt&2)!==0){var b=g.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),g.pending=l,l=wg(s),JS(s,null,f),l}return _g(s,g,l,f),wg(s)}function _f(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var g=l.lanes;g&=s.pendingLanes,f|=g,l.lanes=f,Rn(s,f)}}function Uy(s,l){var f=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var N={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?b=w=N:w=w.next=N,f=f.next}while(f!==null);w===null?b=w=l:w=w.next=l}else b=w=l;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:g.shared,callbacks:g.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var Fy=!1;function wf(){if(Fy){var s=lu;if(s!==null)throw s}}function Ef(s,l,f,g){Fy=!1;var b=s.updateQueue;ho=!1;var w=b.firstBaseUpdate,N=b.lastBaseUpdate,G=b.shared.pending;if(G!==null){b.shared.pending=null;var K=G,ue=K.next;K.next=null,N===null?w=ue:N.next=ue,N=K;var ve=s.alternate;ve!==null&&(ve=ve.updateQueue,G=ve.lastBaseUpdate,G!==N&&(G===null?ve.firstBaseUpdate=ue:G.next=ue,ve.lastBaseUpdate=K))}if(w!==null){var be=b.baseState;N=0,ve=ue=K=null,G=w;do{var de=G.lane&-536870913,pe=de!==G.lane;if(pe?(Tt&de)===de:(g&de)===de){de!==0&&de===ou&&(Fy=!0),ve!==null&&(ve=ve.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});e:{var je=s,Je=G;de=l;var Kt=f;switch(Je.tag){case 1:if(je=Je.payload,typeof je=="function"){be=je.call(Kt,be,de);break e}be=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Je.payload,de=typeof je=="function"?je.call(Kt,be,de):je,de==null)break e;be=p({},be,de);break e;case 2:ho=!0}}de=G.callback,de!==null&&(s.flags|=64,pe&&(s.flags|=8192),pe=b.callbacks,pe===null?b.callbacks=[de]:pe.push(de))}else pe={lane:de,tag:G.tag,payload:G.payload,callback:G.callback,next:null},ve===null?(ue=ve=pe,K=be):ve=ve.next=pe,N|=de;if(G=G.next,G===null){if(G=b.shared.pending,G===null)break;pe=G,G=pe.next,pe.next=null,b.lastBaseUpdate=pe,b.shared.pending=null}}while(!0);ve===null&&(K=be),b.baseState=K,b.firstBaseUpdate=ue,b.lastBaseUpdate=ve,w===null&&(b.shared.lanes=0),xo|=N,s.lanes=N,s.memoizedState=be}}function vT(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function yT(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)vT(f[s],l)}var du=U(null),Ng=U(0);function bT(s,l){s=ws,te(Ng,s),te(du,l),ws=s|l.baseLanes}function Gy(){te(Ng,ws),te(du,du.current)}function qy(){ws=Ng.current,Y(du),Y(Ng)}var fi=U(null),Mi=null;function mo(s){var l=s.alternate;te(Nn,Nn.current&1),te(fi,s),Mi===null&&(l===null||du.current!==null||l.memoizedState!==null)&&(Mi=s)}function Hy(s){te(Nn,Nn.current),te(fi,s),Mi===null&&(Mi=s)}function xT(s){s.tag===22?(te(Nn,Nn.current),te(fi,s),Mi===null&&(Mi=s)):vo()}function vo(){te(Nn,Nn.current),te(fi,fi.current)}function hi(s){Y(fi),Mi===s&&(Mi=null),Y(Nn)}var Nn=U(0);function Mg(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Qb(f)||Zb(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ps=0,pt=null,$t=null,Fn=null,Pg=!1,fu=!1,Ll=!1,Og=0,Sf=0,hu=null,Fj=0;function xn(){throw Error(r(321))}function $y(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!ui(s[f],l[f]))return!1;return!0}function Yy(s,l,f,g,b,w){return ps=w,pt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,$.H=s===null||s.memoizedState===null?rA:lb,Ll=!1,w=f(g,b),Ll=!1,fu&&(w=wT(l,f,g,b)),_T(s),w}function _T(s){$.H=Cf;var l=$t!==null&&$t.next!==null;if(ps=0,Fn=$t=pt=null,Pg=!1,Sf=0,hu=null,l)throw Error(r(300));s===null||Gn||(s=s.dependencies,s!==null&&Tg(s)&&(Gn=!0))}function wT(s,l,f,g){pt=s;var b=0;do{if(fu&&(hu=null),Sf=0,fu=!1,25<=b)throw Error(r(301));if(b+=1,Fn=$t=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}$.H=iA,w=l(f,g)}while(fu);return w}function Gj(){var s=$.H,l=s.useState()[0];return l=typeof l.then=="function"?Tf(l):l,s=s.useState()[0],($t!==null?$t.memoizedState:null)!==s&&(pt.flags|=1024),l}function Ky(){var s=Og!==0;return Og=0,s}function Xy(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function Wy(s){if(Pg){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Pg=!1}ps=0,Fn=$t=pt=null,fu=!1,Sf=Og=0,hu=null}function zr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?pt.memoizedState=Fn=s:Fn=Fn.next=s,Fn}function Mn(){if($t===null){var s=pt.alternate;s=s!==null?s.memoizedState:null}else s=$t.next;var l=Fn===null?pt.memoizedState:Fn.next;if(l!==null)Fn=l,$t=s;else{if(s===null)throw pt.alternate===null?Error(r(467)):Error(r(310));$t=s,s={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Fn===null?pt.memoizedState=Fn=s:Fn=Fn.next=s}return Fn}function Vg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tf(s){var l=Sf;return Sf+=1,hu===null&&(hu=[]),s=fT(hu,s,l),l=pt,(Fn===null?l.memoizedState:Fn.next)===null&&(l=l.alternate,$.H=l===null||l.memoizedState===null?rA:lb),s}function jg(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Tf(s);if(s.$$typeof===R)return vr(s)}throw Error(r(438,String(s)))}function Qy(s){var l=null,f=pt.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var g=pt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Vg(),pt.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),g=0;g<s;g++)f[g]=O;return l.index++,f}function gs(s,l){return typeof l=="function"?l(s):l}function zg(s){var l=Mn();return Zy(l,$t,s)}function Zy(s,l,f){var g=s.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=f;var b=s.baseQueue,w=g.pending;if(w!==null){if(b!==null){var N=b.next;b.next=w.next,w.next=N}l.baseQueue=b=w,g.pending=null}if(w=s.baseState,b===null)s.memoizedState=w;else{l=b.next;var G=N=null,K=null,ue=l,ve=!1;do{var be=ue.lane&-536870913;if(be!==ue.lane?(Tt&be)===be:(ps&be)===be){var de=ue.revertLane;if(de===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),be===ou&&(ve=!0);else if((ps&de)===de){ue=ue.next,de===ou&&(ve=!0);continue}else be={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},K===null?(G=K=be,N=w):K=K.next=be,pt.lanes|=de,xo|=de;be=ue.action,Ll&&f(w,be),w=ue.hasEagerState?ue.eagerState:f(w,be)}else de={lane:be,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},K===null?(G=K=de,N=w):K=K.next=de,pt.lanes|=be,xo|=be;ue=ue.next}while(ue!==null&&ue!==l);if(K===null?N=w:K.next=G,!ui(w,s.memoizedState)&&(Gn=!0,ve&&(f=lu,f!==null)))throw f;s.memoizedState=w,s.baseState=N,s.baseQueue=K,g.lastRenderedState=w}return b===null&&(g.lanes=0),[s.memoizedState,g.dispatch]}function Jy(s){var l=Mn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var g=f.dispatch,b=f.pending,w=l.memoizedState;if(b!==null){f.pending=null;var N=b=b.next;do w=s(w,N.action),N=N.next;while(N!==b);ui(w,l.memoizedState)||(Gn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),f.lastRenderedState=w}return[w,g]}function ET(s,l,f){var g=pt,b=Mn(),w=Dt;if(w){if(f===void 0)throw Error(r(407));f=f()}else f=l();var N=!ui(($t||b).memoizedState,f);if(N&&(b.memoizedState=f,Gn=!0),b=b.queue,nb(AT.bind(null,g,b,s),[s]),b.getSnapshot!==l||N||Fn!==null&&Fn.memoizedState.tag&1){if(g.flags|=2048,pu(9,{destroy:void 0},TT.bind(null,g,b,f,l),null),Qt===null)throw Error(r(349));w||(ps&127)!==0||ST(g,l,f)}return f}function ST(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=pt.updateQueue,l===null?(l=Vg(),pt.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function TT(s,l,f,g){l.value=f,l.getSnapshot=g,CT(l)&&IT(s)}function AT(s,l,f){return f(function(){CT(l)&&IT(s)})}function CT(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!ui(s,f)}catch{return!0}}function IT(s){var l=Dl(s,2);l!==null&&Jr(l,s,2)}function eb(s){var l=zr();if(typeof s=="function"){var f=s;if(s=f(),Ll){cr(!0);try{f()}finally{cr(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:s},l}function RT(s,l,f,g){return s.baseState=f,Zy(s,$t,typeof g=="function"?g:gs)}function qj(s,l,f,g,b){if(Ug(s))throw Error(r(485));if(s=l.action,s!==null){var w={payload:b,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){w.listeners.push(N)}};$.T!==null?f(!0):w.isTransition=!1,g(w),f=l.pending,f===null?(w.next=l.pending=w,DT(l,w)):(w.next=f.next,l.pending=f.next=w)}}function DT(s,l){var f=l.action,g=l.payload,b=s.state;if(l.isTransition){var w=$.T,N={};$.T=N;try{var G=f(b,g),K=$.S;K!==null&&K(N,G),kT(s,l,G)}catch(ue){tb(s,l,ue)}finally{w!==null&&N.types!==null&&(w.types=N.types),$.T=w}}else try{w=f(b,g),kT(s,l,w)}catch(ue){tb(s,l,ue)}}function kT(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){NT(s,l,g)},function(g){return tb(s,l,g)}):NT(s,l,f)}function NT(s,l,f){l.status="fulfilled",l.value=f,MT(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,DT(s,f)))}function tb(s,l,f){var g=s.pending;if(s.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=f,MT(l),l=l.next;while(l!==g)}s.action=null}function MT(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function PT(s,l){return l}function OT(s,l){if(Dt){var f=Qt.formState;if(f!==null){e:{var g=pt;if(Dt){if(tn){t:{for(var b=tn,w=Ni;b.nodeType!==8;){if(!w){b=null;break t}if(b=Pi(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){tn=Pi(b.nextSibling),g=b.data==="F!";break e}}uo(g)}g=!1}g&&(l=f[0])}}return f=zr(),f.memoizedState=f.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:PT,lastRenderedState:l},f.queue=g,f=eA.bind(null,pt,g),g.dispatch=f,g=eb(!1),w=ob.bind(null,pt,!1,g.queue),g=zr(),b={state:l,dispatch:null,action:s,pending:null},g.queue=b,f=qj.bind(null,pt,b,w,f),b.dispatch=f,g.memoizedState=s,[l,f,!1]}function VT(s){var l=Mn();return jT(l,$t,s)}function jT(s,l,f){if(l=Zy(s,l,PT)[0],s=zg(gs)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=Tf(l)}catch(N){throw N===cu?Ig:N}else g=l;l=Mn();var b=l.queue,w=b.dispatch;return f!==l.memoizedState&&(pt.flags|=2048,pu(9,{destroy:void 0},Hj.bind(null,b,f),null)),[g,w,s]}function Hj(s,l){s.action=l}function zT(s){var l=Mn(),f=$t;if(f!==null)return jT(l,f,s);Mn(),l=l.memoizedState,f=Mn();var g=f.queue.dispatch;return f.memoizedState=s,[l,g,!1]}function pu(s,l,f,g){return s={tag:s,create:f,deps:g,inst:l,next:null},l=pt.updateQueue,l===null&&(l=Vg(),pt.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(g=f.next,f.next=s,s.next=g,l.lastEffect=s),s}function LT(){return Mn().memoizedState}function Lg(s,l,f,g){var b=zr();pt.flags|=s,b.memoizedState=pu(1|l,{destroy:void 0},f,g===void 0?null:g)}function Bg(s,l,f,g){var b=Mn();g=g===void 0?null:g;var w=b.memoizedState.inst;$t!==null&&g!==null&&$y(g,$t.memoizedState.deps)?b.memoizedState=pu(l,w,f,g):(pt.flags|=s,b.memoizedState=pu(1|l,w,f,g))}function BT(s,l){Lg(8390656,8,s,l)}function nb(s,l){Bg(2048,8,s,l)}function $j(s){pt.flags|=4;var l=pt.updateQueue;if(l===null)l=Vg(),pt.updateQueue=l,l.events=[s];else{var f=l.events;f===null?l.events=[s]:f.push(s)}}function UT(s){var l=Mn().memoizedState;return $j({ref:l,nextImpl:s}),function(){if((jt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function FT(s,l){return Bg(4,2,s,l)}function GT(s,l){return Bg(4,4,s,l)}function qT(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function HT(s,l,f){f=f!=null?f.concat([s]):null,Bg(4,4,qT.bind(null,l,s),f)}function rb(){}function $T(s,l){var f=Mn();l=l===void 0?null:l;var g=f.memoizedState;return l!==null&&$y(l,g[1])?g[0]:(f.memoizedState=[s,l],s)}function YT(s,l){var f=Mn();l=l===void 0?null:l;var g=f.memoizedState;if(l!==null&&$y(l,g[1]))return g[0];if(g=s(),Ll){cr(!0);try{s()}finally{cr(!1)}}return f.memoizedState=[g,l],g}function ib(s,l,f){return f===void 0||(ps&1073741824)!==0&&(Tt&261930)===0?s.memoizedState=l:(s.memoizedState=f,s=KA(),pt.lanes|=s,xo|=s,f)}function KT(s,l,f,g){return ui(f,l)?f:du.current!==null?(s=ib(s,f,g),ui(s,l)||(Gn=!0),s):(ps&42)===0||(ps&1073741824)!==0&&(Tt&261930)===0?(Gn=!0,s.memoizedState=f):(s=KA(),pt.lanes|=s,xo|=s,l)}function XT(s,l,f,g,b){var w=H.p;H.p=w!==0&&8>w?w:8;var N=$.T,G={};$.T=G,ob(s,!1,l,f);try{var K=b(),ue=$.S;if(ue!==null&&ue(G,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var ve=Uj(K,g);Af(s,l,ve,mi(s))}else Af(s,l,g,mi(s))}catch(be){Af(s,l,{then:function(){},status:"rejected",reason:be},mi())}finally{H.p=w,N!==null&&G.types!==null&&(N.types=G.types),$.T=N}}function Yj(){}function ab(s,l,f,g){if(s.tag!==5)throw Error(r(476));var b=WT(s).queue;XT(s,b,l,J,f===null?Yj:function(){return QT(s),f(g)})}function WT(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:J},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function QT(s){var l=WT(s);l.next===null&&(l=s.alternate.memoizedState),Af(s,l.next.queue,{},mi())}function sb(){return vr(Gf)}function ZT(){return Mn().memoizedState}function JT(){return Mn().memoizedState}function Kj(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=mi();s=po(f);var g=go(l,s,f);g!==null&&(Jr(g,l,f),_f(g,l,f)),l={cache:Oy()},s.payload=l;return}l=l.return}}function Xj(s,l,f){var g=mi();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Ug(s)?tA(l,f):(f=Sy(s,l,f,g),f!==null&&(Jr(f,s,g),nA(f,l,g)))}function eA(s,l,f){var g=mi();Af(s,l,f,g)}function Af(s,l,f,g){var b={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Ug(s))tA(l,b);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var N=l.lastRenderedState,G=w(N,f);if(b.hasEagerState=!0,b.eagerState=G,ui(G,N))return _g(s,l,b,0),Qt===null&&xg(),!1}catch{}finally{}if(f=Sy(s,l,b,g),f!==null)return Jr(f,s,g),nA(f,l,g),!0}return!1}function ob(s,l,f,g){if(g={lane:2,revertLane:Lb(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Ug(s)){if(l)throw Error(r(479))}else l=Sy(s,f,g,2),l!==null&&Jr(l,s,2)}function Ug(s){var l=s.alternate;return s===pt||l!==null&&l===pt}function tA(s,l){fu=Pg=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function nA(s,l,f){if((f&4194048)!==0){var g=l.lanes;g&=s.pendingLanes,f|=g,l.lanes=f,Rn(s,f)}}var Cf={readContext:vr,use:jg,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useLayoutEffect:xn,useInsertionEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useSyncExternalStore:xn,useId:xn,useHostTransitionStatus:xn,useFormState:xn,useActionState:xn,useOptimistic:xn,useMemoCache:xn,useCacheRefresh:xn};Cf.useEffectEvent=xn;var rA={readContext:vr,use:jg,useCallback:function(s,l){return zr().memoizedState=[s,l===void 0?null:l],s},useContext:vr,useEffect:BT,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Lg(4194308,4,qT.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Lg(4194308,4,s,l)},useInsertionEffect:function(s,l){Lg(4,2,s,l)},useMemo:function(s,l){var f=zr();l=l===void 0?null:l;var g=s();if(Ll){cr(!0);try{s()}finally{cr(!1)}}return f.memoizedState=[g,l],g},useReducer:function(s,l,f){var g=zr();if(f!==void 0){var b=f(l);if(Ll){cr(!0);try{f(l)}finally{cr(!1)}}}else b=l;return g.memoizedState=g.baseState=b,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:b},g.queue=s,s=s.dispatch=Xj.bind(null,pt,s),[g.memoizedState,s]},useRef:function(s){var l=zr();return s={current:s},l.memoizedState=s},useState:function(s){s=eb(s);var l=s.queue,f=eA.bind(null,pt,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:rb,useDeferredValue:function(s,l){var f=zr();return ib(f,s,l)},useTransition:function(){var s=eb(!1);return s=XT.bind(null,pt,s.queue,!0,!1),zr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var g=pt,b=zr();if(Dt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Qt===null)throw Error(r(349));(Tt&127)!==0||ST(g,l,f)}b.memoizedState=f;var w={value:f,getSnapshot:l};return b.queue=w,BT(AT.bind(null,g,w,s),[s]),g.flags|=2048,pu(9,{destroy:void 0},TT.bind(null,g,w,f,l),null),f},useId:function(){var s=zr(),l=Qt.identifierPrefix;if(Dt){var f=Pa,g=Ma;f=(g&~(1<<32-en(g)-1)).toString(32)+f,l="_"+l+"R_"+f,f=Og++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=Fj++,l="_"+l+"r_"+f.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:sb,useFormState:OT,useActionState:OT,useOptimistic:function(s){var l=zr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=ob.bind(null,pt,!0,f),f.dispatch=l,[s,l]},useMemoCache:Qy,useCacheRefresh:function(){return zr().memoizedState=Kj.bind(null,pt)},useEffectEvent:function(s){var l=zr(),f={impl:s};return l.memoizedState=f,function(){if((jt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},lb={readContext:vr,use:jg,useCallback:$T,useContext:vr,useEffect:nb,useImperativeHandle:HT,useInsertionEffect:FT,useLayoutEffect:GT,useMemo:YT,useReducer:zg,useRef:LT,useState:function(){return zg(gs)},useDebugValue:rb,useDeferredValue:function(s,l){var f=Mn();return KT(f,$t.memoizedState,s,l)},useTransition:function(){var s=zg(gs)[0],l=Mn().memoizedState;return[typeof s=="boolean"?s:Tf(s),l]},useSyncExternalStore:ET,useId:ZT,useHostTransitionStatus:sb,useFormState:VT,useActionState:VT,useOptimistic:function(s,l){var f=Mn();return RT(f,$t,s,l)},useMemoCache:Qy,useCacheRefresh:JT};lb.useEffectEvent=UT;var iA={readContext:vr,use:jg,useCallback:$T,useContext:vr,useEffect:nb,useImperativeHandle:HT,useInsertionEffect:FT,useLayoutEffect:GT,useMemo:YT,useReducer:Jy,useRef:LT,useState:function(){return Jy(gs)},useDebugValue:rb,useDeferredValue:function(s,l){var f=Mn();return $t===null?ib(f,s,l):KT(f,$t.memoizedState,s,l)},useTransition:function(){var s=Jy(gs)[0],l=Mn().memoizedState;return[typeof s=="boolean"?s:Tf(s),l]},useSyncExternalStore:ET,useId:ZT,useHostTransitionStatus:sb,useFormState:zT,useActionState:zT,useOptimistic:function(s,l){var f=Mn();return $t!==null?RT(f,$t,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:Qy,useCacheRefresh:JT};iA.useEffectEvent=UT;function cb(s,l,f,g){l=s.memoizedState,f=f(g,l),f=f==null?l:p({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var ub={enqueueSetState:function(s,l,f){s=s._reactInternals;var g=mi(),b=po(g);b.payload=l,f!=null&&(b.callback=f),l=go(s,b,g),l!==null&&(Jr(l,s,g),_f(l,s,g))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var g=mi(),b=po(g);b.tag=1,b.payload=l,f!=null&&(b.callback=f),l=go(s,b,g),l!==null&&(Jr(l,s,g),_f(l,s,g))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=mi(),g=po(f);g.tag=2,l!=null&&(g.callback=l),l=go(s,g,f),l!==null&&(Jr(l,s,f),_f(l,s,f))}};function aA(s,l,f,g,b,w,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,w,N):l.prototype&&l.prototype.isPureReactComponent?!hf(f,g)||!hf(b,w):!0}function sA(s,l,f,g){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,g),l.state!==s&&ub.enqueueReplaceState(l,l.state,null)}function Bl(s,l){var f=l;if("ref"in l){f={};for(var g in l)g!=="ref"&&(f[g]=l[g])}if(s=s.defaultProps){f===l&&(f=p({},f));for(var b in s)f[b]===void 0&&(f[b]=s[b])}return f}function oA(s){bg(s)}function lA(s){console.error(s)}function cA(s){bg(s)}function Fg(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function uA(s,l,f){try{var g=s.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function db(s,l,f){return f=po(f),f.tag=3,f.payload={element:null},f.callback=function(){Fg(s,l)},f}function dA(s){return s=po(s),s.tag=3,s}function fA(s,l,f,g){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var w=g.value;s.payload=function(){return b(w)},s.callback=function(){uA(l,f,g)}}var N=f.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(s.callback=function(){uA(l,f,g),typeof b!="function"&&(_o===null?_o=new Set([this]):_o.add(this));var G=g.stack;this.componentDidCatch(g.value,{componentStack:G!==null?G:""})})}function Wj(s,l,f,g,b){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=f.alternate,l!==null&&su(l,f,b,!0),f=fi.current,f!==null){switch(f.tag){case 31:case 13:return Mi===null?em():f.alternate===null&&_n===0&&(_n=3),f.flags&=-257,f.flags|=65536,f.lanes=b,g===Rg?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([g]):l.add(g),Vb(s,g,b)),!1;case 22:return f.flags|=65536,g===Rg?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([g]):f.add(g)),Vb(s,g,b)),!1}throw Error(r(435,f.tag))}return Vb(s,g,b),em(),!1}if(Dt)return l=fi.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,g!==Dy&&(s=Error(r(422),{cause:g}),mf(Ri(s,f)))):(g!==Dy&&(l=Error(r(423),{cause:g}),mf(Ri(l,f))),s=s.current.alternate,s.flags|=65536,b&=-b,s.lanes|=b,g=Ri(g,f),b=db(s.stateNode,g,b),Uy(s,b),_n!==4&&(_n=2)),!1;var w=Error(r(520),{cause:g});if(w=Ri(w,f),Of===null?Of=[w]:Of.push(w),_n!==4&&(_n=2),l===null)return!0;g=Ri(g,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=b&-b,f.lanes|=s,s=db(f.stateNode,g,s),Uy(f,s),!1;case 1:if(l=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(_o===null||!_o.has(w))))return f.flags|=65536,b&=-b,f.lanes|=b,b=dA(b),fA(b,s,f,g),Uy(f,b),!1}f=f.return}while(f!==null);return!1}var fb=Error(r(461)),Gn=!1;function yr(s,l,f,g){l.child=s===null?mT(l,null,f,g):zl(l,s.child,f,g)}function hA(s,l,f,g,b){f=f.render;var w=l.ref;if("ref"in g){var N={};for(var G in g)G!=="ref"&&(N[G]=g[G])}else N=g;return Pl(l),g=Yy(s,l,f,N,w,b),G=Ky(),s!==null&&!Gn?(Xy(s,l,b),ms(s,l,b)):(Dt&&G&&Iy(l),l.flags|=1,yr(s,l,g,b),l.child)}function pA(s,l,f,g,b){if(s===null){var w=f.type;return typeof w=="function"&&!Ty(w)&&w.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=w,gA(s,l,w,g,b)):(s=Eg(f.type,null,g,l,l.mode,b),s.ref=l.ref,s.return=l,l.child=s)}if(w=s.child,!xb(s,b)){var N=w.memoizedProps;if(f=f.compare,f=f!==null?f:hf,f(N,g)&&s.ref===l.ref)return ms(s,l,b)}return l.flags|=1,s=us(w,g),s.ref=l.ref,s.return=l,l.child=s}function gA(s,l,f,g,b){if(s!==null){var w=s.memoizedProps;if(hf(w,g)&&s.ref===l.ref)if(Gn=!1,l.pendingProps=g=w,xb(s,b))(s.flags&131072)!==0&&(Gn=!0);else return l.lanes=s.lanes,ms(s,l,b)}return hb(s,l,f,g,b)}function mA(s,l,f,g){var b=g.children,w=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|f:f,s!==null){for(g=l.child=s.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~w}else g=0,l.child=null;return vA(s,l,w,f,g)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Cg(l,w!==null?w.cachePool:null),w!==null?bT(l,w):Gy(),xT(l);else return g=l.lanes=536870912,vA(s,l,w!==null?w.baseLanes|f:f,f,g)}else w!==null?(Cg(l,w.cachePool),bT(l,w),vo(),l.memoizedState=null):(s!==null&&Cg(l,null),Gy(),vo());return yr(s,l,b,f),l.child}function If(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function vA(s,l,f,g,b){var w=jy();return w=w===null?null:{parent:Un._currentValue,pool:w},l.memoizedState={baseLanes:f,cachePool:w},s!==null&&Cg(l,null),Gy(),xT(l),s!==null&&su(s,l,g,!0),l.childLanes=b,null}function Gg(s,l){return l=Hg({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function yA(s,l,f){return zl(l,s.child,null,f),s=Gg(l,l.pendingProps),s.flags|=2,hi(l),l.memoizedState=null,s}function Qj(s,l,f){var g=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(Dt){if(g.mode==="hidden")return s=Gg(l,g),l.lanes=536870912,If(null,s);if(Hy(l),(s=tn)?(s=DC(s,Ni),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:lo!==null?{id:Ma,overflow:Pa}:null,retryLane:536870912,hydrationErrors:null},f=tT(s),f.return=l,l.child=f,mr=l,tn=null)):s=null,s===null)throw uo(l);return l.lanes=536870912,null}return Gg(l,g)}var w=s.memoizedState;if(w!==null){var N=w.dehydrated;if(Hy(l),b)if(l.flags&256)l.flags&=-257,l=yA(s,l,f);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(Gn||su(s,l,f,!1),b=(f&s.childLanes)!==0,Gn||b){if(g=Qt,g!==null&&(N=Jn(g,f),N!==0&&N!==w.retryLane))throw w.retryLane=N,Dl(s,N),Jr(g,s,N),fb;em(),l=yA(s,l,f)}else s=w.treeContext,tn=Pi(N.nextSibling),mr=l,Dt=!0,co=null,Ni=!1,s!==null&&iT(l,s),l=Gg(l,g),l.flags|=4096;return l}return s=us(s.child,{mode:g.mode,children:g.children}),s.ref=l.ref,l.child=s,s.return=l,s}function qg(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function hb(s,l,f,g,b){return Pl(l),f=Yy(s,l,f,g,void 0,b),g=Ky(),s!==null&&!Gn?(Xy(s,l,b),ms(s,l,b)):(Dt&&g&&Iy(l),l.flags|=1,yr(s,l,f,b),l.child)}function bA(s,l,f,g,b,w){return Pl(l),l.updateQueue=null,f=wT(l,g,f,b),_T(s),g=Ky(),s!==null&&!Gn?(Xy(s,l,w),ms(s,l,w)):(Dt&&g&&Iy(l),l.flags|=1,yr(s,l,f,w),l.child)}function xA(s,l,f,g,b){if(Pl(l),l.stateNode===null){var w=nu,N=f.contextType;typeof N=="object"&&N!==null&&(w=vr(N)),w=new f(g,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=ub,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=g,w.state=l.memoizedState,w.refs={},Ly(l),N=f.contextType,w.context=typeof N=="object"&&N!==null?vr(N):nu,w.state=l.memoizedState,N=f.getDerivedStateFromProps,typeof N=="function"&&(cb(l,f,N,g),w.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(N=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),N!==w.state&&ub.enqueueReplaceState(w,w.state,null),Ef(l,g,w,b),wf(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(s===null){w=l.stateNode;var G=l.memoizedProps,K=Bl(f,G);w.props=K;var ue=w.context,ve=f.contextType;N=nu,typeof ve=="object"&&ve!==null&&(N=vr(ve));var be=f.getDerivedStateFromProps;ve=typeof be=="function"||typeof w.getSnapshotBeforeUpdate=="function",G=l.pendingProps!==G,ve||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(G||ue!==N)&&sA(l,w,g,N),ho=!1;var de=l.memoizedState;w.state=de,Ef(l,g,w,b),wf(),ue=l.memoizedState,G||de!==ue||ho?(typeof be=="function"&&(cb(l,f,be,g),ue=l.memoizedState),(K=ho||aA(l,f,K,g,de,ue,N))?(ve||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=ue),w.props=g,w.state=ue,w.context=N,g=K):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{w=l.stateNode,By(s,l),N=l.memoizedProps,ve=Bl(f,N),w.props=ve,be=l.pendingProps,de=w.context,ue=f.contextType,K=nu,typeof ue=="object"&&ue!==null&&(K=vr(ue)),G=f.getDerivedStateFromProps,(ue=typeof G=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==be||de!==K)&&sA(l,w,g,K),ho=!1,de=l.memoizedState,w.state=de,Ef(l,g,w,b),wf();var pe=l.memoizedState;N!==be||de!==pe||ho||s!==null&&s.dependencies!==null&&Tg(s.dependencies)?(typeof G=="function"&&(cb(l,f,G,g),pe=l.memoizedState),(ve=ho||aA(l,f,ve,g,de,pe,K)||s!==null&&s.dependencies!==null&&Tg(s.dependencies))?(ue||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,pe,K),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,pe,K)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===s.memoizedProps&&de===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&de===s.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=pe),w.props=g,w.state=pe,w.context=K,g=ve):(typeof w.componentDidUpdate!="function"||N===s.memoizedProps&&de===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&de===s.memoizedState||(l.flags|=1024),g=!1)}return w=g,qg(s,l),g=(l.flags&128)!==0,w||g?(w=l.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,s!==null&&g?(l.child=zl(l,s.child,null,b),l.child=zl(l,null,f,b)):yr(s,l,f,b),l.memoizedState=w.state,s=l.child):s=ms(s,l,b),s}function _A(s,l,f,g){return Nl(),l.flags|=256,yr(s,l,f,g),l.child}var pb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gb(s){return{baseLanes:s,cachePool:uT()}}function mb(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=gi),s}function wA(s,l,f){var g=l.pendingProps,b=!1,w=(l.flags&128)!==0,N;if((N=w)||(N=s!==null&&s.memoizedState===null?!1:(Nn.current&2)!==0),N&&(b=!0,l.flags&=-129),N=(l.flags&32)!==0,l.flags&=-33,s===null){if(Dt){if(b?mo(l):vo(),(s=tn)?(s=DC(s,Ni),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:lo!==null?{id:Ma,overflow:Pa}:null,retryLane:536870912,hydrationErrors:null},f=tT(s),f.return=l,l.child=f,mr=l,tn=null)):s=null,s===null)throw uo(l);return Zb(s)?l.lanes=32:l.lanes=536870912,null}var G=g.children;return g=g.fallback,b?(vo(),b=l.mode,G=Hg({mode:"hidden",children:G},b),g=kl(g,b,f,null),G.return=l,g.return=l,G.sibling=g,l.child=G,g=l.child,g.memoizedState=gb(f),g.childLanes=mb(s,N,f),l.memoizedState=pb,If(null,g)):(mo(l),vb(l,G))}var K=s.memoizedState;if(K!==null&&(G=K.dehydrated,G!==null)){if(w)l.flags&256?(mo(l),l.flags&=-257,l=yb(s,l,f)):l.memoizedState!==null?(vo(),l.child=s.child,l.flags|=128,l=null):(vo(),G=g.fallback,b=l.mode,g=Hg({mode:"visible",children:g.children},b),G=kl(G,b,f,null),G.flags|=2,g.return=l,G.return=l,g.sibling=G,l.child=g,zl(l,s.child,null,f),g=l.child,g.memoizedState=gb(f),g.childLanes=mb(s,N,f),l.memoizedState=pb,l=If(null,g));else if(mo(l),Zb(G)){if(N=G.nextSibling&&G.nextSibling.dataset,N)var ue=N.dgst;N=ue,g=Error(r(419)),g.stack="",g.digest=N,mf({value:g,source:null,stack:null}),l=yb(s,l,f)}else if(Gn||su(s,l,f,!1),N=(f&s.childLanes)!==0,Gn||N){if(N=Qt,N!==null&&(g=Jn(N,f),g!==0&&g!==K.retryLane))throw K.retryLane=g,Dl(s,g),Jr(N,s,g),fb;Qb(G)||em(),l=yb(s,l,f)}else Qb(G)?(l.flags|=192,l.child=s.child,l=null):(s=K.treeContext,tn=Pi(G.nextSibling),mr=l,Dt=!0,co=null,Ni=!1,s!==null&&iT(l,s),l=vb(l,g.children),l.flags|=4096);return l}return b?(vo(),G=g.fallback,b=l.mode,K=s.child,ue=K.sibling,g=us(K,{mode:"hidden",children:g.children}),g.subtreeFlags=K.subtreeFlags&65011712,ue!==null?G=us(ue,G):(G=kl(G,b,f,null),G.flags|=2),G.return=l,g.return=l,g.sibling=G,l.child=g,If(null,g),g=l.child,G=s.child.memoizedState,G===null?G=gb(f):(b=G.cachePool,b!==null?(K=Un._currentValue,b=b.parent!==K?{parent:K,pool:K}:b):b=uT(),G={baseLanes:G.baseLanes|f,cachePool:b}),g.memoizedState=G,g.childLanes=mb(s,N,f),l.memoizedState=pb,If(s.child,g)):(mo(l),f=s.child,s=f.sibling,f=us(f,{mode:"visible",children:g.children}),f.return=l,f.sibling=null,s!==null&&(N=l.deletions,N===null?(l.deletions=[s],l.flags|=16):N.push(s)),l.child=f,l.memoizedState=null,f)}function vb(s,l){return l=Hg({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Hg(s,l){return s=di(22,s,null,l),s.lanes=0,s}function yb(s,l,f){return zl(l,s.child,null,f),s=vb(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function EA(s,l,f){s.lanes|=l;var g=s.alternate;g!==null&&(g.lanes|=l),My(s.return,l,f)}function bb(s,l,f,g,b,w){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b,treeForkCount:w}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=g,N.tail=f,N.tailMode=b,N.treeForkCount=w)}function SA(s,l,f){var g=l.pendingProps,b=g.revealOrder,w=g.tail;g=g.children;var N=Nn.current,G=(N&2)!==0;if(G?(N=N&1|2,l.flags|=128):N&=1,te(Nn,N),yr(s,l,g,f),g=Dt?gf:0,!G&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&EA(s,f,l);else if(s.tag===19)EA(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(b){case"forwards":for(f=l.child,b=null;f!==null;)s=f.alternate,s!==null&&Mg(s)===null&&(b=f),f=f.sibling;f=b,f===null?(b=l.child,l.child=null):(b=f.sibling,f.sibling=null),bb(l,!1,b,f,w,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=l.child,l.child=null;b!==null;){if(s=b.alternate,s!==null&&Mg(s)===null){l.child=b;break}s=b.sibling,b.sibling=f,f=b,b=s}bb(l,!0,f,null,w,g);break;case"together":bb(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function ms(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),xo|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(su(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=us(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=us(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function xb(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Tg(s)))}function Zj(s,l,f){switch(l.tag){case 3:Te(l,l.stateNode.containerInfo),fo(l,Un,s.memoizedState.cache),Nl();break;case 27:case 5:Ne(l);break;case 4:Te(l,l.stateNode.containerInfo);break;case 10:fo(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Hy(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(mo(l),l.flags|=128,null):(f&l.child.childLanes)!==0?wA(s,l,f):(mo(l),s=ms(s,l,f),s!==null?s.sibling:null);mo(l);break;case 19:var b=(s.flags&128)!==0;if(g=(f&l.childLanes)!==0,g||(su(s,l,f,!1),g=(f&l.childLanes)!==0),b){if(g)return SA(s,l,f);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),te(Nn,Nn.current),g)break;return null;case 22:return l.lanes=0,mA(s,l,f,l.pendingProps);case 24:fo(l,Un,s.memoizedState.cache)}return ms(s,l,f)}function TA(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)Gn=!0;else{if(!xb(s,f)&&(l.flags&128)===0)return Gn=!1,Zj(s,l,f);Gn=(s.flags&131072)!==0}else Gn=!1,Dt&&(l.flags&1048576)!==0&&rT(l,gf,l.index);switch(l.lanes=0,l.tag){case 16:e:{var g=l.pendingProps;if(s=Vl(l.elementType),l.type=s,typeof s=="function")Ty(s)?(g=Bl(s,g),l.tag=1,l=xA(null,l,s,g,f)):(l.tag=0,l=hb(null,l,s,g,f));else{if(s!=null){var b=s.$$typeof;if(b===j){l.tag=11,l=hA(null,l,s,g,f);break e}else if(b===I){l.tag=14,l=pA(null,l,s,g,f);break e}}throw l=X(s)||s,Error(r(306,l,""))}}return l;case 0:return hb(s,l,l.type,l.pendingProps,f);case 1:return g=l.type,b=Bl(g,l.pendingProps),xA(s,l,g,b,f);case 3:e:{if(Te(l,l.stateNode.containerInfo),s===null)throw Error(r(387));g=l.pendingProps;var w=l.memoizedState;b=w.element,By(s,l),Ef(l,g,null,f);var N=l.memoizedState;if(g=N.cache,fo(l,Un,g),g!==w.cache&&Py(l,[Un],f,!0),wf(),g=N.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:N.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=_A(s,l,g,f);break e}else if(g!==b){b=Ri(Error(r(424)),l),mf(b),l=_A(s,l,g,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(tn=Pi(s.firstChild),mr=l,Dt=!0,co=null,Ni=!0,f=mT(l,null,g,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Nl(),g===b){l=ms(s,l,f);break e}yr(s,l,g,f)}l=l.child}return l;case 26:return qg(s,l),s===null?(f=VC(l.type,null,l.pendingProps,null))?l.memoizedState=f:Dt||(f=l.type,s=l.pendingProps,g=om(se.current).createElement(f),g[zn]=l,g[ur]=s,br(g,f,s),Ln(g),l.stateNode=g):l.memoizedState=VC(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Ne(l),s===null&&Dt&&(g=l.stateNode=MC(l.type,l.pendingProps,se.current),mr=l,Ni=!0,b=tn,To(l.type)?(Jb=b,tn=Pi(g.firstChild)):tn=b),yr(s,l,l.pendingProps.children,f),qg(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Dt&&((b=g=tn)&&(g=I5(g,l.type,l.pendingProps,Ni),g!==null?(l.stateNode=g,mr=l,tn=Pi(g.firstChild),Ni=!1,b=!0):b=!1),b||uo(l)),Ne(l),b=l.type,w=l.pendingProps,N=s!==null?s.memoizedProps:null,g=w.children,Kb(b,w)?g=null:N!==null&&Kb(b,N)&&(l.flags|=32),l.memoizedState!==null&&(b=Yy(s,l,Gj,null,null,f),Gf._currentValue=b),qg(s,l),yr(s,l,g,f),l.child;case 6:return s===null&&Dt&&((s=f=tn)&&(f=R5(f,l.pendingProps,Ni),f!==null?(l.stateNode=f,mr=l,tn=null,s=!0):s=!1),s||uo(l)),null;case 13:return wA(s,l,f);case 4:return Te(l,l.stateNode.containerInfo),g=l.pendingProps,s===null?l.child=zl(l,null,g,f):yr(s,l,g,f),l.child;case 11:return hA(s,l,l.type,l.pendingProps,f);case 7:return yr(s,l,l.pendingProps,f),l.child;case 8:return yr(s,l,l.pendingProps.children,f),l.child;case 12:return yr(s,l,l.pendingProps.children,f),l.child;case 10:return g=l.pendingProps,fo(l,l.type,g.value),yr(s,l,g.children,f),l.child;case 9:return b=l.type._context,g=l.pendingProps.children,Pl(l),b=vr(b),g=g(b),l.flags|=1,yr(s,l,g,f),l.child;case 14:return pA(s,l,l.type,l.pendingProps,f);case 15:return gA(s,l,l.type,l.pendingProps,f);case 19:return SA(s,l,f);case 31:return Qj(s,l,f);case 22:return mA(s,l,f,l.pendingProps);case 24:return Pl(l),g=vr(Un),s===null?(b=jy(),b===null&&(b=Qt,w=Oy(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=f),b=w),l.memoizedState={parent:g,cache:b},Ly(l),fo(l,Un,b)):((s.lanes&f)!==0&&(By(s,l),Ef(l,null,null,f),wf()),b=s.memoizedState,w=l.memoizedState,b.parent!==g?(b={parent:g,cache:g},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),fo(l,Un,g)):(g=w.cache,fo(l,Un,g),g!==b.cache&&Py(l,[Un],f,!0))),yr(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function vs(s){s.flags|=4}function _b(s,l,f,g,b){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(b&335544128)===b)if(s.stateNode.complete)s.flags|=8192;else if(ZA())s.flags|=8192;else throw jl=Rg,zy}else s.flags&=-16777217}function AA(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!UC(l))if(ZA())s.flags|=8192;else throw jl=Rg,zy}function $g(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Rt():536870912,s.lanes|=l,yu|=l)}function Rf(s,l){if(!Dt)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function nn(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,g=0;if(l)for(var b=s.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=s,b=b.sibling;else for(b=s.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=s,b=b.sibling;return s.subtreeFlags|=g,s.childLanes=f,l}function Jj(s,l,f){var g=l.pendingProps;switch(Ry(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(l),null;case 1:return nn(l),null;case 3:return f=l.stateNode,g=null,s!==null&&(g=s.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),hs(Un),Ce(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(au(l)?vs(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ky())),nn(l),null;case 26:var b=l.type,w=l.memoizedState;return s===null?(vs(l),w!==null?(nn(l),AA(l,w)):(nn(l),_b(l,b,null,g,f))):w?w!==s.memoizedState?(vs(l),nn(l),AA(l,w)):(nn(l),l.flags&=-16777217):(s=s.memoizedProps,s!==g&&vs(l),nn(l),_b(l,b,s,g,f)),null;case 27:if(xe(l),f=se.current,b=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==g&&vs(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return nn(l),null}s=ae.current,au(l)?aT(l):(s=MC(b,g,f),l.stateNode=s,vs(l))}return nn(l),null;case 5:if(xe(l),b=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==g&&vs(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return nn(l),null}if(w=ae.current,au(l))aT(l);else{var N=om(se.current);switch(w){case 1:w=N.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:w=N.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":w=N.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":w=N.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":w=N.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof g.is=="string"?N.createElement("select",{is:g.is}):N.createElement("select"),g.multiple?w.multiple=!0:g.size&&(w.size=g.size);break;default:w=typeof g.is=="string"?N.createElement(b,{is:g.is}):N.createElement(b)}}w[zn]=l,w[ur]=g;e:for(N=l.child;N!==null;){if(N.tag===5||N.tag===6)w.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===l)break e;for(;N.sibling===null;){if(N.return===null||N.return===l)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}l.stateNode=w;e:switch(br(w,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&vs(l)}}return nn(l),_b(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,f),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==g&&vs(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(r(166));if(s=se.current,au(l)){if(s=l.stateNode,f=l.memoizedProps,g=null,b=mr,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}s[zn]=l,s=!!(s.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||wC(s.nodeValue,f)),s||uo(l,!0)}else s=om(s).createTextNode(g),s[zn]=l,l.stateNode=s}return nn(l),null;case 31:if(f=l.memoizedState,s===null||s.memoizedState!==null){if(g=au(l),f!==null){if(s===null){if(!g)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[zn]=l}else Nl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;nn(l),s=!1}else f=ky(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return l.flags&256?(hi(l),l):(hi(l),null);if((l.flags&128)!==0)throw Error(r(558))}return nn(l),null;case 13:if(g=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(b=au(l),g!==null&&g.dehydrated!==null){if(s===null){if(!b)throw Error(r(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[zn]=l}else Nl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;nn(l),b=!1}else b=ky(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(hi(l),l):(hi(l),null)}return hi(l),(l.flags&128)!==0?(l.lanes=f,l):(f=g!==null,s=s!==null&&s.memoizedState!==null,f&&(g=l.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),w=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(w=g.memoizedState.cachePool.pool),w!==b&&(g.flags|=2048)),f!==s&&f&&(l.child.flags|=8192),$g(l,l.updateQueue),nn(l),null);case 4:return Ce(),s===null&&Gb(l.stateNode.containerInfo),nn(l),null;case 10:return hs(l.type),nn(l),null;case 19:if(Y(Nn),g=l.memoizedState,g===null)return nn(l),null;if(b=(l.flags&128)!==0,w=g.rendering,w===null)if(b)Rf(g,!1);else{if(_n!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(w=Mg(s),w!==null){for(l.flags|=128,Rf(g,!1),s=w.updateQueue,l.updateQueue=s,$g(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)eT(f,s),f=f.sibling;return te(Nn,Nn.current&1|2),Dt&&ds(l,g.treeForkCount),l.child}s=s.sibling}g.tail!==null&&bt()>Qg&&(l.flags|=128,b=!0,Rf(g,!1),l.lanes=4194304)}else{if(!b)if(s=Mg(w),s!==null){if(l.flags|=128,b=!0,s=s.updateQueue,l.updateQueue=s,$g(l,s),Rf(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Dt)return nn(l),null}else 2*bt()-g.renderingStartTime>Qg&&f!==536870912&&(l.flags|=128,b=!0,Rf(g,!1),l.lanes=4194304);g.isBackwards?(w.sibling=l.child,l.child=w):(s=g.last,s!==null?s.sibling=w:l.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=bt(),s.sibling=null,f=Nn.current,te(Nn,b?f&1|2:f&1),Dt&&ds(l,g.treeForkCount),s):(nn(l),null);case 22:case 23:return hi(l),qy(),g=l.memoizedState!==null,s!==null?s.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(f&536870912)!==0&&(l.flags&128)===0&&(nn(l),l.subtreeFlags&6&&(l.flags|=8192)):nn(l),f=l.updateQueue,f!==null&&$g(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==f&&(l.flags|=2048),s!==null&&Y(Ol),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),hs(Un),nn(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function e5(s,l){switch(Ry(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return hs(Un),Ce(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return xe(l),null;case 31:if(l.memoizedState!==null){if(hi(l),l.alternate===null)throw Error(r(340));Nl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(hi(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Nl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Y(Nn),null;case 4:return Ce(),null;case 10:return hs(l.type),null;case 22:case 23:return hi(l),qy(),s!==null&&Y(Ol),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return hs(Un),null;case 25:return null;default:return null}}function CA(s,l){switch(Ry(l),l.tag){case 3:hs(Un),Ce();break;case 26:case 27:case 5:xe(l);break;case 4:Ce();break;case 31:l.memoizedState!==null&&hi(l);break;case 13:hi(l);break;case 19:Y(Nn);break;case 10:hs(l.type);break;case 22:case 23:hi(l),qy(),s!==null&&Y(Ol);break;case 24:hs(Un)}}function Df(s,l){try{var f=l.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&s)===s){g=void 0;var w=f.create,N=f.inst;g=w(),N.destroy=g}f=f.next}while(f!==b)}}catch(G){Ft(l,l.return,G)}}function yo(s,l,f){try{var g=l.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var w=b.next;g=w;do{if((g.tag&s)===s){var N=g.inst,G=N.destroy;if(G!==void 0){N.destroy=void 0,b=l;var K=f,ue=G;try{ue()}catch(ve){Ft(b,K,ve)}}}g=g.next}while(g!==w)}}catch(ve){Ft(l,l.return,ve)}}function IA(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{yT(l,f)}catch(g){Ft(s,s.return,g)}}}function RA(s,l,f){f.props=Bl(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(g){Ft(s,l,g)}}function kf(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var g=s.stateNode;break;case 30:g=s.stateNode;break;default:g=s.stateNode}typeof f=="function"?s.refCleanup=f(g):f.current=g}}catch(b){Ft(s,l,b)}}function Oa(s,l){var f=s.ref,g=s.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(b){Ft(s,l,b)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){Ft(s,l,b)}else f.current=null}function DA(s){var l=s.type,f=s.memoizedProps,g=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(b){Ft(s,s.return,b)}}function wb(s,l,f){try{var g=s.stateNode;w5(g,s.type,f,l),g[ur]=l}catch(b){Ft(s,s.return,b)}}function kA(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&To(s.type)||s.tag===4}function Eb(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||kA(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&To(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Sb(s,l,f){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Zi));else if(g!==4&&(g===27&&To(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(Sb(s,l,f),s=s.sibling;s!==null;)Sb(s,l,f),s=s.sibling}function Yg(s,l,f){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(g!==4&&(g===27&&To(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(Yg(s,l,f),s=s.sibling;s!==null;)Yg(s,l,f),s=s.sibling}function NA(s){var l=s.stateNode,f=s.memoizedProps;try{for(var g=s.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);br(l,g,f),l[zn]=s,l[ur]=f}catch(w){Ft(s,s.return,w)}}var ys=!1,qn=!1,Tb=!1,MA=typeof WeakSet=="function"?WeakSet:Set,fr=null;function t5(s,l){if(s=s.containerInfo,$b=pm,s=HS(s),yy(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var b=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var N=0,G=-1,K=-1,ue=0,ve=0,be=s,de=null;t:for(;;){for(var pe;be!==f||b!==0&&be.nodeType!==3||(G=N+b),be!==w||g!==0&&be.nodeType!==3||(K=N+g),be.nodeType===3&&(N+=be.nodeValue.length),(pe=be.firstChild)!==null;)de=be,be=pe;for(;;){if(be===s)break t;if(de===f&&++ue===b&&(G=N),de===w&&++ve===g&&(K=N),(pe=be.nextSibling)!==null)break;be=de,de=be.parentNode}be=pe}f=G===-1||K===-1?null:{start:G,end:K}}else f=null}f=f||{start:0,end:0}}else f=null;for(Yb={focusedElem:s,selectionRange:f},pm=!1,fr=l;fr!==null;)if(l=fr,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,fr=s;else for(;fr!==null;){switch(l=fr,w=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)b=s[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,f=l,b=w.memoizedProps,w=w.memoizedState,g=f.stateNode;try{var je=Bl(f.type,b);s=g.getSnapshotBeforeUpdate(je,w),g.__reactInternalSnapshotBeforeUpdate=s}catch(Je){Ft(f,f.return,Je)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)Wb(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Wb(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,fr=s;break}fr=l.return}}function PA(s,l,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:xs(s,f),g&4&&Df(5,f);break;case 1:if(xs(s,f),g&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(N){Ft(f,f.return,N)}else{var b=Bl(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(b,l,s.__reactInternalSnapshotBeforeUpdate)}catch(N){Ft(f,f.return,N)}}g&64&&IA(f),g&512&&kf(f,f.return);break;case 3:if(xs(s,f),g&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{yT(s,l)}catch(N){Ft(f,f.return,N)}}break;case 27:l===null&&g&4&&NA(f);case 26:case 5:xs(s,f),l===null&&g&4&&DA(f),g&512&&kf(f,f.return);break;case 12:xs(s,f);break;case 31:xs(s,f),g&4&&jA(s,f);break;case 13:xs(s,f),g&4&&zA(s,f),g&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=u5.bind(null,f),D5(s,f))));break;case 22:if(g=f.memoizedState!==null||ys,!g){l=l!==null&&l.memoizedState!==null||qn,b=ys;var w=qn;ys=g,(qn=l)&&!w?_s(s,f,(f.subtreeFlags&8772)!==0):xs(s,f),ys=b,qn=w}break;case 30:break;default:xs(s,f)}}function OA(s){var l=s.alternate;l!==null&&(s.alternate=null,OA(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Fc(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var on=null,Xr=!1;function bs(s,l,f){for(f=f.child;f!==null;)VA(s,l,f),f=f.sibling}function VA(s,l,f){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Vr,f)}catch{}switch(f.tag){case 26:qn||Oa(f,l),bs(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:qn||Oa(f,l);var g=on,b=Xr;To(f.type)&&(on=f.stateNode,Xr=!1),bs(s,l,f),Bf(f.stateNode),on=g,Xr=b;break;case 5:qn||Oa(f,l);case 6:if(g=on,b=Xr,on=null,bs(s,l,f),on=g,Xr=b,on!==null)if(Xr)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(f.stateNode)}catch(w){Ft(f,l,w)}else try{on.removeChild(f.stateNode)}catch(w){Ft(f,l,w)}break;case 18:on!==null&&(Xr?(s=on,IC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),Au(s)):IC(on,f.stateNode));break;case 4:g=on,b=Xr,on=f.stateNode.containerInfo,Xr=!0,bs(s,l,f),on=g,Xr=b;break;case 0:case 11:case 14:case 15:yo(2,f,l),qn||yo(4,f,l),bs(s,l,f);break;case 1:qn||(Oa(f,l),g=f.stateNode,typeof g.componentWillUnmount=="function"&&RA(f,l,g)),bs(s,l,f);break;case 21:bs(s,l,f);break;case 22:qn=(g=qn)||f.memoizedState!==null,bs(s,l,f),qn=g;break;default:bs(s,l,f)}}function jA(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Au(s)}catch(f){Ft(l,l.return,f)}}}function zA(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Au(s)}catch(f){Ft(l,l.return,f)}}function n5(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new MA),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new MA),l;default:throw Error(r(435,s.tag))}}function Kg(s,l){var f=n5(s);l.forEach(function(g){if(!f.has(g)){f.add(g);var b=d5.bind(null,s,g);g.then(b,b)}})}function Wr(s,l){var f=l.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g],w=s,N=l,G=N;e:for(;G!==null;){switch(G.tag){case 27:if(To(G.type)){on=G.stateNode,Xr=!1;break e}break;case 5:on=G.stateNode,Xr=!1;break e;case 3:case 4:on=G.stateNode.containerInfo,Xr=!0;break e}G=G.return}if(on===null)throw Error(r(160));VA(w,N,b),on=null,Xr=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)LA(l,s),l=l.sibling}var ia=null;function LA(s,l){var f=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Wr(l,s),Qr(s),g&4&&(yo(3,s,s.return),Df(3,s),yo(5,s,s.return));break;case 1:Wr(l,s),Qr(s),g&512&&(qn||f===null||Oa(f,f.return)),g&64&&ys&&(s=s.updateQueue,s!==null&&(g=s.callbacks,g!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var b=ia;if(Wr(l,s),Qr(s),g&512&&(qn||f===null||Oa(f,f.return)),g&4){var w=f!==null?f.memoizedState:null;if(g=s.memoizedState,f===null)if(g===null)if(s.stateNode===null){e:{g=s.type,f=s.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":w=b.getElementsByTagName("title")[0],(!w||w[_a]||w[zn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(g),b.head.insertBefore(w,b.querySelector("head > title"))),br(w,g,f),w[zn]=s,Ln(w),g=w;break e;case"link":var N=LC("link","href",b).get(g+(f.href||""));if(N){for(var G=0;G<N.length;G++)if(w=N[G],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){N.splice(G,1);break t}}w=b.createElement(g),br(w,g,f),b.head.appendChild(w);break;case"meta":if(N=LC("meta","content",b).get(g+(f.content||""))){for(G=0;G<N.length;G++)if(w=N[G],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){N.splice(G,1);break t}}w=b.createElement(g),br(w,g,f),b.head.appendChild(w);break;default:throw Error(r(468,g))}w[zn]=s,Ln(w),g=w}s.stateNode=g}else BC(b,s.type,s.stateNode);else s.stateNode=zC(b,g,s.memoizedProps);else w!==g?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,g===null?BC(b,s.type,s.stateNode):zC(b,g,s.memoizedProps)):g===null&&s.stateNode!==null&&wb(s,s.memoizedProps,f.memoizedProps)}break;case 27:Wr(l,s),Qr(s),g&512&&(qn||f===null||Oa(f,f.return)),f!==null&&g&4&&wb(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Wr(l,s),Qr(s),g&512&&(qn||f===null||Oa(f,f.return)),s.flags&32){b=s.stateNode;try{Kr(b,"")}catch(je){Ft(s,s.return,je)}}g&4&&s.stateNode!=null&&(b=s.memoizedProps,wb(s,b,f!==null?f.memoizedProps:b)),g&1024&&(Tb=!0);break;case 6:if(Wr(l,s),Qr(s),g&4){if(s.stateNode===null)throw Error(r(162));g=s.memoizedProps,f=s.stateNode;try{f.nodeValue=g}catch(je){Ft(s,s.return,je)}}break;case 3:if(um=null,b=ia,ia=lm(l.containerInfo),Wr(l,s),ia=b,Qr(s),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Au(l.containerInfo)}catch(je){Ft(s,s.return,je)}Tb&&(Tb=!1,BA(s));break;case 4:g=ia,ia=lm(s.stateNode.containerInfo),Wr(l,s),Qr(s),ia=g;break;case 12:Wr(l,s),Qr(s);break;case 31:Wr(l,s),Qr(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Kg(s,g)));break;case 13:Wr(l,s),Qr(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Wg=bt()),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Kg(s,g)));break;case 22:b=s.memoizedState!==null;var K=f!==null&&f.memoizedState!==null,ue=ys,ve=qn;if(ys=ue||b,qn=ve||K,Wr(l,s),qn=ve,ys=ue,Qr(s),g&8192)e:for(l=s.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(f===null||K||ys||qn||Ul(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){K=f=l;try{if(w=K.stateNode,b)N=w.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{G=K.stateNode;var be=K.memoizedProps.style,de=be!=null&&be.hasOwnProperty("display")?be.display:null;G.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(je){Ft(K,K.return,je)}}}else if(l.tag===6){if(f===null){K=l;try{K.stateNode.nodeValue=b?"":K.memoizedProps}catch(je){Ft(K,K.return,je)}}}else if(l.tag===18){if(f===null){K=l;try{var pe=K.stateNode;b?RC(pe,!0):RC(K.stateNode,!1)}catch(je){Ft(K,K.return,je)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=s.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,Kg(s,f))));break;case 19:Wr(l,s),Qr(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Kg(s,g)));break;case 30:break;case 21:break;default:Wr(l,s),Qr(s)}}function Qr(s){var l=s.flags;if(l&2){try{for(var f,g=s.return;g!==null;){if(kA(g)){f=g;break}g=g.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var b=f.stateNode,w=Eb(s);Yg(s,w,b);break;case 5:var N=f.stateNode;f.flags&32&&(Kr(N,""),f.flags&=-33);var G=Eb(s);Yg(s,G,N);break;case 3:case 4:var K=f.stateNode.containerInfo,ue=Eb(s);Sb(s,ue,K);break;default:throw Error(r(161))}}catch(ve){Ft(s,s.return,ve)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function BA(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;BA(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function xs(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)PA(s,l.alternate,l),l=l.sibling}function Ul(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:yo(4,l,l.return),Ul(l);break;case 1:Oa(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&RA(l,l.return,f),Ul(l);break;case 27:Bf(l.stateNode);case 26:case 5:Oa(l,l.return),Ul(l);break;case 22:l.memoizedState===null&&Ul(l);break;case 30:Ul(l);break;default:Ul(l)}s=s.sibling}}function _s(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,b=s,w=l,N=w.flags;switch(w.tag){case 0:case 11:case 15:_s(b,w,f),Df(4,w);break;case 1:if(_s(b,w,f),g=w,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ue){Ft(g,g.return,ue)}if(g=w,b=g.updateQueue,b!==null){var G=g.stateNode;try{var K=b.shared.hiddenCallbacks;if(K!==null)for(b.shared.hiddenCallbacks=null,b=0;b<K.length;b++)vT(K[b],G)}catch(ue){Ft(g,g.return,ue)}}f&&N&64&&IA(w),kf(w,w.return);break;case 27:NA(w);case 26:case 5:_s(b,w,f),f&&g===null&&N&4&&DA(w),kf(w,w.return);break;case 12:_s(b,w,f);break;case 31:_s(b,w,f),f&&N&4&&jA(b,w);break;case 13:_s(b,w,f),f&&N&4&&zA(b,w);break;case 22:w.memoizedState===null&&_s(b,w,f),kf(w,w.return);break;case 30:break;default:_s(b,w,f)}l=l.sibling}}function Ab(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&vf(f))}function Cb(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&vf(s))}function aa(s,l,f,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)UA(s,l,f,g),l=l.sibling}function UA(s,l,f,g){var b=l.flags;switch(l.tag){case 0:case 11:case 15:aa(s,l,f,g),b&2048&&Df(9,l);break;case 1:aa(s,l,f,g);break;case 3:aa(s,l,f,g),b&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&vf(s)));break;case 12:if(b&2048){aa(s,l,f,g),s=l.stateNode;try{var w=l.memoizedProps,N=w.id,G=w.onPostCommit;typeof G=="function"&&G(N,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(K){Ft(l,l.return,K)}}else aa(s,l,f,g);break;case 31:aa(s,l,f,g);break;case 13:aa(s,l,f,g);break;case 23:break;case 22:w=l.stateNode,N=l.alternate,l.memoizedState!==null?w._visibility&2?aa(s,l,f,g):Nf(s,l):w._visibility&2?aa(s,l,f,g):(w._visibility|=2,gu(s,l,f,g,(l.subtreeFlags&10256)!==0||!1)),b&2048&&Ab(N,l);break;case 24:aa(s,l,f,g),b&2048&&Cb(l.alternate,l);break;default:aa(s,l,f,g)}}function gu(s,l,f,g,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=s,N=l,G=f,K=g,ue=N.flags;switch(N.tag){case 0:case 11:case 15:gu(w,N,G,K,b),Df(8,N);break;case 23:break;case 22:var ve=N.stateNode;N.memoizedState!==null?ve._visibility&2?gu(w,N,G,K,b):Nf(w,N):(ve._visibility|=2,gu(w,N,G,K,b)),b&&ue&2048&&Ab(N.alternate,N);break;case 24:gu(w,N,G,K,b),b&&ue&2048&&Cb(N.alternate,N);break;default:gu(w,N,G,K,b)}l=l.sibling}}function Nf(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,g=l,b=g.flags;switch(g.tag){case 22:Nf(f,g),b&2048&&Ab(g.alternate,g);break;case 24:Nf(f,g),b&2048&&Cb(g.alternate,g);break;default:Nf(f,g)}l=l.sibling}}var Mf=8192;function mu(s,l,f){if(s.subtreeFlags&Mf)for(s=s.child;s!==null;)FA(s,l,f),s=s.sibling}function FA(s,l,f){switch(s.tag){case 26:mu(s,l,f),s.flags&Mf&&s.memoizedState!==null&&F5(f,ia,s.memoizedState,s.memoizedProps);break;case 5:mu(s,l,f);break;case 3:case 4:var g=ia;ia=lm(s.stateNode.containerInfo),mu(s,l,f),ia=g;break;case 22:s.memoizedState===null&&(g=s.alternate,g!==null&&g.memoizedState!==null?(g=Mf,Mf=16777216,mu(s,l,f),Mf=g):mu(s,l,f));break;default:mu(s,l,f)}}function GA(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Pf(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];fr=g,HA(g,s)}GA(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)qA(s),s=s.sibling}function qA(s){switch(s.tag){case 0:case 11:case 15:Pf(s),s.flags&2048&&yo(9,s,s.return);break;case 3:Pf(s);break;case 12:Pf(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Xg(s)):Pf(s);break;default:Pf(s)}}function Xg(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];fr=g,HA(g,s)}GA(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:yo(8,l,l.return),Xg(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Xg(l));break;default:Xg(l)}s=s.sibling}}function HA(s,l){for(;fr!==null;){var f=fr;switch(f.tag){case 0:case 11:case 15:yo(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:vf(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,fr=g;else e:for(f=s;fr!==null;){g=fr;var b=g.sibling,w=g.return;if(OA(g),g===f){fr=null;break e}if(b!==null){b.return=w,fr=b;break e}fr=w}}}var r5={getCacheForType:function(s){var l=vr(Un),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f},cacheSignal:function(){return vr(Un).controller.signal}},i5=typeof WeakMap=="function"?WeakMap:Map,jt=0,Qt=null,wt=null,Tt=0,Ut=0,pi=null,bo=!1,vu=!1,Ib=!1,ws=0,_n=0,xo=0,Fl=0,Rb=0,gi=0,yu=0,Of=null,Zr=null,Db=!1,Wg=0,$A=0,Qg=1/0,Zg=null,_o=null,tr=0,wo=null,bu=null,Es=0,kb=0,Nb=null,YA=null,Vf=0,Mb=null;function mi(){return(jt&2)!==0&&Tt!==0?Tt&-Tt:$.T!==null?Lb():Ei()}function KA(){if(gi===0)if((Tt&536870912)===0||Dt){var s=Xe;Xe<<=1,(Xe&3932160)===0&&(Xe=262144),gi=s}else gi=536870912;return s=fi.current,s!==null&&(s.flags|=32),gi}function Jr(s,l,f){(s===Qt&&(Ut===2||Ut===9)||s.cancelPendingCommit!==null)&&(xu(s,0),Eo(s,Tt,gi,!1)),In(s,f),((jt&2)===0||s!==Qt)&&(s===Qt&&((jt&2)===0&&(Fl|=f),_n===4&&Eo(s,Tt,gi,!1)),Va(s))}function XA(s,l,f){if((jt&6)!==0)throw Error(r(327));var g=!f&&(l&127)===0&&(l&s.expiredLanes)===0||nt(s,l),b=g?o5(s,l):Ob(s,l,!0),w=g;do{if(b===0){vu&&!g&&Eo(s,l,0,!1);break}else{if(f=s.current.alternate,w&&!a5(f)){b=Ob(s,l,!1),w=!1;continue}if(b===2){if(w=l,s.errorRecoveryDisabledLanes&w)var N=0;else N=s.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){l=N;e:{var G=s;b=Of;var K=G.current.memoizedState.isDehydrated;if(K&&(xu(G,N).flags|=256),N=Ob(G,N,!1),N!==2){if(Ib&&!K){G.errorRecoveryDisabledLanes|=w,Fl|=w,b=4;break e}w=Zr,Zr=b,w!==null&&(Zr===null?Zr=w:Zr.push.apply(Zr,w))}b=N}if(w=!1,b!==2)continue}}if(b===1){xu(s,0),Eo(s,l,0,!0);break}e:{switch(g=s,w=b,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Eo(g,l,gi,!bo);break e;case 2:Zr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(b=Wg+300-bt(),10<b)){if(Eo(g,l,gi,!bo),Jt(g,0,!0)!==0)break e;Es=l,g.timeoutHandle=AC(WA.bind(null,g,f,Zr,Zg,Db,l,gi,Fl,yu,bo,w,"Throttled",-0,0),b);break e}WA(g,f,Zr,Zg,Db,l,gi,Fl,yu,bo,w,null,-0,0)}}break}while(!0);Va(s)}function WA(s,l,f,g,b,w,N,G,K,ue,ve,be,de,pe){if(s.timeoutHandle=-1,be=l.subtreeFlags,be&8192||(be&16785408)===16785408){be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zi},FA(l,w,be);var je=(w&62914560)===w?Wg-bt():(w&4194048)===w?$A-bt():0;if(je=G5(be,je),je!==null){Es=w,s.cancelPendingCommit=je(iC.bind(null,s,l,w,f,g,b,N,G,K,ve,be,null,de,pe)),Eo(s,w,N,!ue);return}}iC(s,l,w,f,g,b,N,G,K)}function a5(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var b=f[g],w=b.getSnapshot;b=b.value;try{if(!ui(w(),b))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Eo(s,l,f,g){l&=~Rb,l&=~Fl,s.suspendedLanes|=l,s.pingedLanes&=~l,g&&(s.warmLanes|=l),g=s.expirationTimes;for(var b=l;0<b;){var w=31-en(b),N=1<<w;g[w]=-1,b&=~N}f!==0&&xt(s,f,l)}function Jg(){return(jt&6)===0?(jf(0),!1):!0}function Pb(){if(wt!==null){if(Ut===0)var s=wt.return;else s=wt,fs=Ml=null,Wy(s),uu=null,bf=0,s=wt;for(;s!==null;)CA(s.alternate,s),s=s.return;wt=null}}function xu(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,T5(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),Es=0,Pb(),Qt=s,wt=f=us(s.current,null),Tt=l,Ut=0,pi=null,bo=!1,vu=nt(s,l),Ib=!1,yu=gi=Rb=Fl=xo=_n=0,Zr=Of=null,Db=!1,(l&8)!==0&&(l|=l&32);var g=s.entangledLanes;if(g!==0)for(s=s.entanglements,g&=l;0<g;){var b=31-en(g),w=1<<b;l|=s[b],g&=~w}return ws=l,xg(),f}function QA(s,l){pt=null,$.H=Cf,l===cu||l===Ig?(l=hT(),Ut=3):l===zy?(l=hT(),Ut=4):Ut=l===fb?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,pi=l,wt===null&&(_n=1,Fg(s,Ri(l,s.current)))}function ZA(){var s=fi.current;return s===null?!0:(Tt&4194048)===Tt?Mi===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?s===Mi:!1}function JA(){var s=$.H;return $.H=Cf,s===null?Cf:s}function eC(){var s=$.A;return $.A=r5,s}function em(){_n=4,bo||(Tt&4194048)!==Tt&&fi.current!==null||(vu=!0),(xo&134217727)===0&&(Fl&134217727)===0||Qt===null||Eo(Qt,Tt,gi,!1)}function Ob(s,l,f){var g=jt;jt|=2;var b=JA(),w=eC();(Qt!==s||Tt!==l)&&(Zg=null,xu(s,l)),l=!1;var N=_n;e:do try{if(Ut!==0&&wt!==null){var G=wt,K=pi;switch(Ut){case 8:Pb(),N=6;break e;case 3:case 2:case 9:case 6:fi.current===null&&(l=!0);var ue=Ut;if(Ut=0,pi=null,_u(s,G,K,ue),f&&vu){N=0;break e}break;default:ue=Ut,Ut=0,pi=null,_u(s,G,K,ue)}}s5(),N=_n;break}catch(ve){QA(s,ve)}while(!0);return l&&s.shellSuspendCounter++,fs=Ml=null,jt=g,$.H=b,$.A=w,wt===null&&(Qt=null,Tt=0,xg()),N}function s5(){for(;wt!==null;)tC(wt)}function o5(s,l){var f=jt;jt|=2;var g=JA(),b=eC();Qt!==s||Tt!==l?(Zg=null,Qg=bt()+500,xu(s,l)):vu=nt(s,l);e:do try{if(Ut!==0&&wt!==null){l=wt;var w=pi;t:switch(Ut){case 1:Ut=0,pi=null,_u(s,l,w,1);break;case 2:case 9:if(dT(w)){Ut=0,pi=null,nC(l);break}l=function(){Ut!==2&&Ut!==9||Qt!==s||(Ut=7),Va(s)},w.then(l,l);break e;case 3:Ut=7;break e;case 4:Ut=5;break e;case 7:dT(w)?(Ut=0,pi=null,nC(l)):(Ut=0,pi=null,_u(s,l,w,7));break;case 5:var N=null;switch(wt.tag){case 26:N=wt.memoizedState;case 5:case 27:var G=wt;if(N?UC(N):G.stateNode.complete){Ut=0,pi=null;var K=G.sibling;if(K!==null)wt=K;else{var ue=G.return;ue!==null?(wt=ue,tm(ue)):wt=null}break t}}Ut=0,pi=null,_u(s,l,w,5);break;case 6:Ut=0,pi=null,_u(s,l,w,6);break;case 8:Pb(),_n=6;break e;default:throw Error(r(462))}}l5();break}catch(ve){QA(s,ve)}while(!0);return fs=Ml=null,$.H=g,$.A=b,jt=f,wt!==null?0:(Qt=null,Tt=0,xg(),_n)}function l5(){for(;wt!==null&&!yn();)tC(wt)}function tC(s){var l=TA(s.alternate,s,ws);s.memoizedProps=s.pendingProps,l===null?tm(s):wt=l}function nC(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=bA(f,l,l.pendingProps,l.type,void 0,Tt);break;case 11:l=bA(f,l,l.pendingProps,l.type.render,l.ref,Tt);break;case 5:Wy(l);default:CA(f,l),l=wt=eT(l,ws),l=TA(f,l,ws)}s.memoizedProps=s.pendingProps,l===null?tm(s):wt=l}function _u(s,l,f,g){fs=Ml=null,Wy(l),uu=null,bf=0;var b=l.return;try{if(Wj(s,b,l,f,Tt)){_n=1,Fg(s,Ri(f,s.current)),wt=null;return}}catch(w){if(b!==null)throw wt=b,w;_n=1,Fg(s,Ri(f,s.current)),wt=null;return}l.flags&32768?(Dt||g===1?s=!0:vu||(Tt&536870912)!==0?s=!1:(bo=s=!0,(g===2||g===9||g===3||g===6)&&(g=fi.current,g!==null&&g.tag===13&&(g.flags|=16384))),rC(l,s)):tm(l)}function tm(s){var l=s;do{if((l.flags&32768)!==0){rC(l,bo);return}s=l.return;var f=Jj(l.alternate,l,ws);if(f!==null){wt=f;return}if(l=l.sibling,l!==null){wt=l;return}wt=l=s}while(l!==null);_n===0&&(_n=5)}function rC(s,l){do{var f=e5(s.alternate,s);if(f!==null){f.flags&=32767,wt=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){wt=s;return}wt=s=f}while(s!==null);_n=6,wt=null}function iC(s,l,f,g,b,w,N,G,K){s.cancelPendingCommit=null;do nm();while(tr!==0);if((jt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=Ey,fn(s,f,w,N,G,K),s===Qt&&(wt=Qt=null,Tt=0),bu=l,wo=s,Es=f,kb=w,Nb=b,YA=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,f5($r,function(){return cC(),null})):(s.callbackNode=null,s.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=$.T,$.T=null,b=H.p,H.p=2,N=jt,jt|=4;try{t5(s,l,f)}finally{jt=N,H.p=b,$.T=g}}tr=1,aC(),sC(),oC()}}function aC(){if(tr===1){tr=0;var s=wo,l=bu,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=$.T,$.T=null;var g=H.p;H.p=2;var b=jt;jt|=4;try{LA(l,s);var w=Yb,N=HS(s.containerInfo),G=w.focusedElem,K=w.selectionRange;if(N!==G&&G&&G.ownerDocument&&qS(G.ownerDocument.documentElement,G)){if(K!==null&&yy(G)){var ue=K.start,ve=K.end;if(ve===void 0&&(ve=ue),"selectionStart"in G)G.selectionStart=ue,G.selectionEnd=Math.min(ve,G.value.length);else{var be=G.ownerDocument||document,de=be&&be.defaultView||window;if(de.getSelection){var pe=de.getSelection(),je=G.textContent.length,Je=Math.min(K.start,je),Kt=K.end===void 0?Je:Math.min(K.end,je);!pe.extend&&Je>Kt&&(N=Kt,Kt=Je,Je=N);var ie=GS(G,Je),ee=GS(G,Kt);if(ie&&ee&&(pe.rangeCount!==1||pe.anchorNode!==ie.node||pe.anchorOffset!==ie.offset||pe.focusNode!==ee.node||pe.focusOffset!==ee.offset)){var ce=be.createRange();ce.setStart(ie.node,ie.offset),pe.removeAllRanges(),Je>Kt?(pe.addRange(ce),pe.extend(ee.node,ee.offset)):(ce.setEnd(ee.node,ee.offset),pe.addRange(ce))}}}}for(be=[],pe=G;pe=pe.parentNode;)pe.nodeType===1&&be.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<be.length;G++){var ye=be[G];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}pm=!!$b,Yb=$b=null}finally{jt=b,H.p=g,$.T=f}}s.current=l,tr=2}}function sC(){if(tr===2){tr=0;var s=wo,l=bu,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=$.T,$.T=null;var g=H.p;H.p=2;var b=jt;jt|=4;try{PA(s,l.alternate,l)}finally{jt=b,H.p=g,$.T=f}}tr=3}}function oC(){if(tr===4||tr===3){tr=0,dn();var s=wo,l=bu,f=Es,g=YA;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?tr=5:(tr=0,bu=wo=null,lC(s,s.pendingLanes));var b=s.pendingLanes;if(b===0&&(_o=null),er(f),l=l.stateNode,bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Vr,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=$.T,b=H.p,H.p=2,$.T=null;try{for(var w=s.onRecoverableError,N=0;N<g.length;N++){var G=g[N];w(G.value,{componentStack:G.stack})}}finally{$.T=l,H.p=b}}(Es&3)!==0&&nm(),Va(s),b=s.pendingLanes,(f&261930)!==0&&(b&42)!==0?s===Mb?Vf++:(Vf=0,Mb=s):Vf=0,jf(0)}}function lC(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,vf(l)))}function nm(){return aC(),sC(),oC(),cC()}function cC(){if(tr!==5)return!1;var s=wo,l=kb;kb=0;var f=er(Es),g=$.T,b=H.p;try{H.p=32>f?32:f,$.T=null,f=Nb,Nb=null;var w=wo,N=Es;if(tr=0,bu=wo=null,Es=0,(jt&6)!==0)throw Error(r(331));var G=jt;if(jt|=4,qA(w.current),UA(w,w.current,N,f),jt=G,jf(0,!1),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Vr,w)}catch{}return!0}finally{H.p=b,$.T=g,lC(s,l)}}function uC(s,l,f){l=Ri(f,l),l=db(s.stateNode,l,2),s=go(s,l,2),s!==null&&(In(s,2),Va(s))}function Ft(s,l,f){if(s.tag===3)uC(s,s,f);else for(;l!==null;){if(l.tag===3){uC(l,s,f);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(_o===null||!_o.has(g))){s=Ri(f,s),f=dA(2),g=go(l,f,2),g!==null&&(fA(f,g,l,s),In(g,2),Va(g));break}}l=l.return}}function Vb(s,l,f){var g=s.pingCache;if(g===null){g=s.pingCache=new i5;var b=new Set;g.set(l,b)}else b=g.get(l),b===void 0&&(b=new Set,g.set(l,b));b.has(f)||(Ib=!0,b.add(f),s=c5.bind(null,s,l,f),l.then(s,s))}function c5(s,l,f){var g=s.pingCache;g!==null&&g.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Qt===s&&(Tt&f)===f&&(_n===4||_n===3&&(Tt&62914560)===Tt&&300>bt()-Wg?(jt&2)===0&&xu(s,0):Rb|=f,yu===Tt&&(yu=0)),Va(s)}function dC(s,l){l===0&&(l=Rt()),s=Dl(s,l),s!==null&&(In(s,l),Va(s))}function u5(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),dC(s,f)}function d5(s,l){var f=0;switch(s.tag){case 31:case 13:var g=s.stateNode,b=s.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=s.stateNode;break;case 22:g=s.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(l),dC(s,f)}function f5(s,l){return Ke(s,l)}var rm=null,wu=null,jb=!1,im=!1,zb=!1,So=0;function Va(s){s!==wu&&s.next===null&&(wu===null?rm=wu=s:wu=wu.next=s),im=!0,jb||(jb=!0,p5())}function jf(s,l){if(!zb&&im){zb=!0;do for(var f=!1,g=rm;g!==null;){if(s!==0){var b=g.pendingLanes;if(b===0)var w=0;else{var N=g.suspendedLanes,G=g.pingedLanes;w=(1<<31-en(42|s)+1)-1,w&=b&~(N&~G),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,gC(g,w))}else w=Tt,w=Jt(g,g===Qt?w:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(w&3)===0||nt(g,w)||(f=!0,gC(g,w));g=g.next}while(f);zb=!1}}function h5(){fC()}function fC(){im=jb=!1;var s=0;So!==0&&S5()&&(s=So);for(var l=bt(),f=null,g=rm;g!==null;){var b=g.next,w=hC(g,l);w===0?(g.next=null,f===null?rm=b:f.next=b,b===null&&(wu=f)):(f=g,(s!==0||(w&3)!==0)&&(im=!0)),g=b}tr!==0&&tr!==5||jf(s),So!==0&&(So=0)}function hC(s,l){for(var f=s.suspendedLanes,g=s.pingedLanes,b=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var N=31-en(w),G=1<<N,K=b[N];K===-1?((G&f)===0||(G&g)!==0)&&(b[N]=Cn(G,l)):K<=l&&(s.expiredLanes|=G),w&=~G}if(l=Qt,f=Tt,f=Jt(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g=s.callbackNode,f===0||s===l&&(Ut===2||Ut===9)||s.cancelPendingCommit!==null)return g!==null&&g!==null&&Mt(g),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||nt(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(g!==null&&Mt(g),er(f)){case 2:case 8:f=Zn;break;case 32:f=$r;break;case 268435456:f=Qs;break;default:f=$r}return g=pC.bind(null,s),f=Ke(f,g),s.callbackPriority=l,s.callbackNode=f,l}return g!==null&&g!==null&&Mt(g),s.callbackPriority=2,s.callbackNode=null,2}function pC(s,l){if(tr!==0&&tr!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(nm()&&s.callbackNode!==f)return null;var g=Tt;return g=Jt(s,s===Qt?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g===0?null:(XA(s,g,l),hC(s,bt()),s.callbackNode!=null&&s.callbackNode===f?pC.bind(null,s):null)}function gC(s,l){if(nm())return null;XA(s,l,!0)}function p5(){A5(function(){(jt&6)!==0?Ke(Ar,h5):fC()})}function Lb(){if(So===0){var s=ou;s===0&&(s=dt,dt<<=1,(dt&261888)===0&&(dt=256)),So=s}return So}function mC(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:$c(""+s)}function vC(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function g5(s,l,f,g,b){if(l==="submit"&&f&&f.stateNode===b){var w=mC((b[ur]||null).action),N=g.submitter;N&&(l=(l=N[ur]||null)?mC(l.formAction):N.getAttribute("formAction"),l!==null&&(w=l,N=null));var G=new Ra("action","action",null,g,b);s.push({event:G,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(So!==0){var K=N?vC(b,N):new FormData(b);ab(f,{pending:!0,data:K,method:b.method,action:w},null,K)}}else typeof w=="function"&&(G.preventDefault(),K=N?vC(b,N):new FormData(b),ab(f,{pending:!0,data:K,method:b.method,action:w},w,K))},currentTarget:b}]})}}for(var Bb=0;Bb<wy.length;Bb++){var Ub=wy[Bb],m5=Ub.toLowerCase(),v5=Ub[0].toUpperCase()+Ub.slice(1);ra(m5,"on"+v5)}ra(KS,"onAnimationEnd"),ra(XS,"onAnimationIteration"),ra(WS,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(Mj,"onTransitionRun"),ra(Pj,"onTransitionStart"),ra(Oj,"onTransitionCancel"),ra(QS,"onTransitionEnd"),Ta("onMouseEnter",["mouseout","mouseover"]),Ta("onMouseLeave",["mouseout","mouseover"]),Ta("onPointerEnter",["pointerout","pointerover"]),Ta("onPointerLeave",["pointerout","pointerover"]),Sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zf));function yC(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var g=s[f],b=g.event;g=g.listeners;e:{var w=void 0;if(l)for(var N=g.length-1;0<=N;N--){var G=g[N],K=G.instance,ue=G.currentTarget;if(G=G.listener,K!==w&&b.isPropagationStopped())break e;w=G,b.currentTarget=ue;try{w(b)}catch(ve){bg(ve)}b.currentTarget=null,w=K}else for(N=0;N<g.length;N++){if(G=g[N],K=G.instance,ue=G.currentTarget,G=G.listener,K!==w&&b.isPropagationStopped())break e;w=G,b.currentTarget=ue;try{w(b)}catch(ve){bg(ve)}b.currentTarget=null,w=K}}}}function Et(s,l){var f=l[Uc];f===void 0&&(f=l[Uc]=new Set);var g=s+"__bubble";f.has(g)||(bC(l,s,2,!1),f.add(g))}function Fb(s,l,f){var g=0;l&&(g|=4),bC(f,s,g,l)}var am="_reactListening"+Math.random().toString(36).slice(2);function Gb(s){if(!s[am]){s[am]=!0,Xd.forEach(function(f){f!=="selectionchange"&&(y5.has(f)||Fb(f,!1,s),Fb(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[am]||(l[am]=!0,Fb("selectionchange",!1,l))}}function bC(s,l,f,g){switch(KC(l)){case 2:var b=$5;break;case 8:b=Y5;break;default:b=i1}f=b.bind(null,l,f,s),b=void 0,!wl||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),g?b!==void 0?s.addEventListener(l,f,{capture:!0,passive:b}):s.addEventListener(l,f,!0):b!==void 0?s.addEventListener(l,f,{passive:b}):s.addEventListener(l,f,!1)}function qb(s,l,f,g,b){var w=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var N=g.tag;if(N===3||N===4){var G=g.stateNode.containerInfo;if(G===b)break;if(N===4)for(N=g.return;N!==null;){var K=N.tag;if((K===3||K===4)&&N.stateNode.containerInfo===b)return;N=N.return}for(;G!==null;){if(N=wa(G),N===null)return;if(K=N.tag,K===5||K===6||K===26||K===27){g=w=N;continue e}G=G.parentNode}}g=g.return}io(function(){var ue=w,ve=Ti(f),be=[];e:{var de=ZS.get(s);if(de!==void 0){var pe=Ra,je=s;switch(s){case"keypress":if(Sl(f)===0)break e;case"keydown":case"keyup":pe=mg;break;case"focusin":je="focus",pe=Al;break;case"focusout":je="blur",pe=Al;break;case"beforeblur":case"afterblur":pe=Al;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=og;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=D;break;case KS:case XS:case WS:pe=cg;break;case QS:pe=q;break;case"scroll":case"scrollend":pe=lf;break;case"wheel":pe=he;break;case"copy":case"cut":case"paste":pe=ug;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=cs;break;case"toggle":case"beforetoggle":pe=ht}var Je=(l&4)!==0,Kt=!Je&&(s==="scroll"||s==="scrollend"),ie=Je?de!==null?de+"Capture":null:de;Je=[];for(var ee=ue,ce;ee!==null;){var ye=ee;if(ce=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||ce===null||ie===null||(ye=Ji(ee,ie),ye!=null&&Je.push(Lf(ee,ye,ce))),Kt)break;ee=ee.return}0<Je.length&&(de=new pe(de,je,null,f,ve),be.push({event:de,listeners:Je}))}}if((l&7)===0){e:{if(de=s==="mouseover"||s==="pointerover",pe=s==="mouseout"||s==="pointerout",de&&f!==af&&(je=f.relatedTarget||f.fromElement)&&(wa(je)||je[xa]))break e;if((pe||de)&&(de=ve.window===ve?ve:(de=ve.ownerDocument)?de.defaultView||de.parentWindow:window,pe?(je=f.relatedTarget||f.toElement,pe=ue,je=je?wa(je):null,je!==null&&(Kt=a(je),Je=je.tag,je!==Kt||Je!==5&&Je!==27&&Je!==6)&&(je=null)):(pe=null,je=ue),pe!==je)){if(Je=cf,ye="onMouseLeave",ie="onMouseEnter",ee="mouse",(s==="pointerout"||s==="pointerover")&&(Je=cs,ye="onPointerLeave",ie="onPointerEnter",ee="pointer"),Kt=pe==null?de:li(pe),ce=je==null?de:li(je),de=new Je(ye,ee+"leave",pe,f,ve),de.target=Kt,de.relatedTarget=ce,ye=null,wa(ve)===ue&&(Je=new Je(ie,ee+"enter",je,f,ve),Je.target=ce,Je.relatedTarget=Kt,ye=Je),Kt=ye,pe&&je)t:{for(Je=b5,ie=pe,ee=je,ce=0,ye=ie;ye;ye=Je(ye))ce++;ye=0;for(var He=ee;He;He=Je(He))ye++;for(;0<ce-ye;)ie=Je(ie),ce--;for(;0<ye-ce;)ee=Je(ee),ye--;for(;ce--;){if(ie===ee||ee!==null&&ie===ee.alternate){Je=ie;break t}ie=Je(ie),ee=Je(ee)}Je=null}else Je=null;pe!==null&&xC(be,de,pe,Je,!1),je!==null&&Kt!==null&&xC(be,Kt,je,Je,!0)}}e:{if(de=ue?li(ue):window,pe=de.nodeName&&de.nodeName.toLowerCase(),pe==="select"||pe==="input"&&de.type==="file")var Pt=jS;else if(OS(de))if(zS)Pt=Dj;else{Pt=Ij;var Ue=Cj}else pe=de.nodeName,!pe||pe.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?ue&&Hc(ue.elementType)&&(Pt=jS):Pt=Rj;if(Pt&&(Pt=Pt(s,ue))){VS(be,Pt,f,ve);break e}Ue&&Ue(s,de,ue),s==="focusout"&&ue&&de.type==="number"&&ue.memoizedProps.value!=null&&tf(de,"number",de.value)}switch(Ue=ue?li(ue):window,s){case"focusin":(OS(Ue)||Ue.contentEditable==="true")&&(Jc=Ue,by=ue,pf=null);break;case"focusout":pf=by=Jc=null;break;case"mousedown":xy=!0;break;case"contextmenu":case"mouseup":case"dragend":xy=!1,$S(be,f,ve);break;case"selectionchange":if(Nj)break;case"keydown":case"keyup":$S(be,f,ve)}var mt;if(Vt)e:{switch(s){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else Zc?Cl(s,f)&&(At="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(At="onCompositionStart");At&&(Na&&f.locale!=="ko"&&(Zc||At!=="onCompositionStart"?At==="onCompositionEnd"&&Zc&&(mt=of()):(Ia=ve,sf="value"in Ia?Ia.value:Ia.textContent,Zc=!0)),Ue=sm(ue,At),0<Ue.length&&(At=new ka(At,s,null,f,ve),be.push({event:At,listeners:Ue}),mt?At.data=mt:(mt=Qc(f),mt!==null&&(At.data=mt)))),(mt=Ci?Ej(s,f):Sj(s,f))&&(At=sm(ue,"onBeforeInput"),0<At.length&&(Ue=new ka("onBeforeInput","beforeinput",null,f,ve),be.push({event:Ue,listeners:At}),Ue.data=mt)),g5(be,s,ue,f,ve)}yC(be,l)})}function Lf(s,l,f){return{instance:s,listener:l,currentTarget:f}}function sm(s,l){for(var f=l+"Capture",g=[];s!==null;){var b=s,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=Ji(s,f),b!=null&&g.unshift(Lf(s,b,w)),b=Ji(s,l),b!=null&&g.push(Lf(s,b,w))),s.tag===3)return g;s=s.return}return[]}function b5(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function xC(s,l,f,g,b){for(var w=l._reactName,N=[];f!==null&&f!==g;){var G=f,K=G.alternate,ue=G.stateNode;if(G=G.tag,K!==null&&K===g)break;G!==5&&G!==26&&G!==27||ue===null||(K=ue,b?(ue=Ji(f,w),ue!=null&&N.unshift(Lf(f,ue,K))):b||(ue=Ji(f,w),ue!=null&&N.push(Lf(f,ue,K)))),f=f.return}N.length!==0&&s.push({event:l,listeners:N})}var x5=/\r\n?/g,_5=/\u0000|\uFFFD/g;function _C(s){return(typeof s=="string"?s:""+s).replace(x5,`
`).replace(_5,"")}function wC(s,l){return l=_C(l),_C(s)===l}function Yt(s,l,f,g,b,w){switch(f){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||Kr(s,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&Kr(s,""+g);break;case"className":ci(s,"class",g);break;case"tabIndex":ci(s,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ci(s,f,g);break;case"style":rf(s,g,w);break;case"data":if(l!=="object"){ci(s,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(f);break}g=$c(""+g),s.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(l!=="input"&&Yt(s,l,"name",b.name,b,null),Yt(s,l,"formEncType",b.formEncType,b,null),Yt(s,l,"formMethod",b.formMethod,b,null),Yt(s,l,"formTarget",b.formTarget,b,null)):(Yt(s,l,"encType",b.encType,b,null),Yt(s,l,"method",b.method,b,null),Yt(s,l,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(f);break}g=$c(""+g),s.setAttribute(f,g);break;case"onClick":g!=null&&(s.onclick=Zi);break;case"onScroll":g!=null&&Et("scroll",s);break;case"onScrollEnd":g!=null&&Et("scrollend",s);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":s.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){s.removeAttribute("xlink:href");break}f=$c(""+g),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(f,""+g):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":g===!0?s.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(f,g):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?s.setAttribute(f,g):s.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?s.removeAttribute(f):s.setAttribute(f,g);break;case"popover":Et("beforetoggle",s),Et("toggle",s),Gc(s,"popover",g);break;case"xlinkActuate":Bn(s,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Bn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Bn(s,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Bn(s,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Bn(s,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Bn(s,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Bn(s,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Bn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Bn(s,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Gc(s,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=sg.get(f)||f,Gc(s,f,g))}}function Hb(s,l,f,g,b,w){switch(f){case"style":rf(s,g,w);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof g=="string"?Kr(s,g):(typeof g=="number"||typeof g=="bigint")&&Kr(s,""+g);break;case"onScroll":g!=null&&Et("scroll",s);break;case"onScrollEnd":g!=null&&Et("scrollend",s);break;case"onClick":g!=null&&(s.onclick=Zi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wd.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),l=f.slice(2,b?f.length-7:void 0),w=s[ur]||null,w=w!=null?w[f]:null,typeof w=="function"&&s.removeEventListener(l,w,b),typeof g=="function")){typeof w!="function"&&w!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,g,b);break e}f in s?s[f]=g:g===!0?s.setAttribute(f,""):Gc(s,f,g)}}}function br(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",s),Et("load",s);var g=!1,b=!1,w;for(w in f)if(f.hasOwnProperty(w)){var N=f[w];if(N!=null)switch(w){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Yt(s,l,w,N,f,null)}}b&&Yt(s,l,"srcSet",f.srcSet,f,null),g&&Yt(s,l,"src",f.src,f,null);return;case"input":Et("invalid",s);var G=w=N=b=null,K=null,ue=null;for(g in f)if(f.hasOwnProperty(g)){var ve=f[g];if(ve!=null)switch(g){case"name":b=ve;break;case"type":N=ve;break;case"checked":K=ve;break;case"defaultChecked":ue=ve;break;case"value":w=ve;break;case"defaultValue":G=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,l));break;default:Yt(s,l,g,ve,f,null)}}rg(s,w,G,K,ue,N,b,!1);return;case"select":Et("invalid",s),g=N=w=null;for(b in f)if(f.hasOwnProperty(b)&&(G=f[b],G!=null))switch(b){case"value":w=G;break;case"defaultValue":N=G;break;case"multiple":g=G;default:Yt(s,l,b,G,f,null)}l=w,f=N,s.multiple=!!g,l!=null?eo(s,!!g,l,!1):f!=null&&eo(s,!!g,f,!0);return;case"textarea":Et("invalid",s),w=b=g=null;for(N in f)if(f.hasOwnProperty(N)&&(G=f[N],G!=null))switch(N){case"value":g=G;break;case"defaultValue":b=G;break;case"children":w=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(91));break;default:Yt(s,l,N,G,f,null)}to(s,g,b,w);return;case"option":for(K in f)if(f.hasOwnProperty(K)&&(g=f[K],g!=null))switch(K){case"selected":s.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Yt(s,l,K,g,f,null)}return;case"dialog":Et("beforetoggle",s),Et("toggle",s),Et("cancel",s),Et("close",s);break;case"iframe":case"object":Et("load",s);break;case"video":case"audio":for(g=0;g<zf.length;g++)Et(zf[g],s);break;case"image":Et("error",s),Et("load",s);break;case"details":Et("toggle",s);break;case"embed":case"source":case"link":Et("error",s),Et("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in f)if(f.hasOwnProperty(ue)&&(g=f[ue],g!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Yt(s,l,ue,g,f,null)}return;default:if(Hc(l)){for(ve in f)f.hasOwnProperty(ve)&&(g=f[ve],g!==void 0&&Hb(s,l,ve,g,f,void 0));return}}for(G in f)f.hasOwnProperty(G)&&(g=f[G],g!=null&&Yt(s,l,G,g,f,null))}function w5(s,l,f,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,N=null,G=null,K=null,ue=null,ve=null;for(pe in f){var be=f[pe];if(f.hasOwnProperty(pe)&&be!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":K=be;default:g.hasOwnProperty(pe)||Yt(s,l,pe,null,g,be)}}for(var de in g){var pe=g[de];if(be=f[de],g.hasOwnProperty(de)&&(pe!=null||be!=null))switch(de){case"type":w=pe;break;case"name":b=pe;break;case"checked":ue=pe;break;case"defaultChecked":ve=pe;break;case"value":N=pe;break;case"defaultValue":G=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,l));break;default:pe!==be&&Yt(s,l,de,pe,g,be)}}qc(s,N,G,K,ue,ve,w,b);return;case"select":pe=N=G=de=null;for(w in f)if(K=f[w],f.hasOwnProperty(w)&&K!=null)switch(w){case"value":break;case"multiple":pe=K;default:g.hasOwnProperty(w)||Yt(s,l,w,null,g,K)}for(b in g)if(w=g[b],K=f[b],g.hasOwnProperty(b)&&(w!=null||K!=null))switch(b){case"value":de=w;break;case"defaultValue":G=w;break;case"multiple":N=w;default:w!==K&&Yt(s,l,b,w,g,K)}l=G,f=N,g=pe,de!=null?eo(s,!!f,de,!1):!!g!=!!f&&(l!=null?eo(s,!!f,l,!0):eo(s,!!f,f?[]:"",!1));return;case"textarea":pe=de=null;for(G in f)if(b=f[G],f.hasOwnProperty(G)&&b!=null&&!g.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:Yt(s,l,G,null,g,b)}for(N in g)if(b=g[N],w=f[N],g.hasOwnProperty(N)&&(b!=null||w!=null))switch(N){case"value":de=b;break;case"defaultValue":pe=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==w&&Yt(s,l,N,b,g,w)}ig(s,de,pe);return;case"option":for(var je in f)if(de=f[je],f.hasOwnProperty(je)&&de!=null&&!g.hasOwnProperty(je))switch(je){case"selected":s.selected=!1;break;default:Yt(s,l,je,null,g,de)}for(K in g)if(de=g[K],pe=f[K],g.hasOwnProperty(K)&&de!==pe&&(de!=null||pe!=null))switch(K){case"selected":s.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:Yt(s,l,K,de,g,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in f)de=f[Je],f.hasOwnProperty(Je)&&de!=null&&!g.hasOwnProperty(Je)&&Yt(s,l,Je,null,g,de);for(ue in g)if(de=g[ue],pe=f[ue],g.hasOwnProperty(ue)&&de!==pe&&(de!=null||pe!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,l));break;default:Yt(s,l,ue,de,g,pe)}return;default:if(Hc(l)){for(var Kt in f)de=f[Kt],f.hasOwnProperty(Kt)&&de!==void 0&&!g.hasOwnProperty(Kt)&&Hb(s,l,Kt,void 0,g,de);for(ve in g)de=g[ve],pe=f[ve],!g.hasOwnProperty(ve)||de===pe||de===void 0&&pe===void 0||Hb(s,l,ve,de,g,pe);return}}for(var ie in f)de=f[ie],f.hasOwnProperty(ie)&&de!=null&&!g.hasOwnProperty(ie)&&Yt(s,l,ie,null,g,de);for(be in g)de=g[be],pe=f[be],!g.hasOwnProperty(be)||de===pe||de==null&&pe==null||Yt(s,l,be,de,g,pe)}function EC(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function E5(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var b=f[g],w=b.transferSize,N=b.initiatorType,G=b.duration;if(w&&G&&EC(N)){for(N=0,G=b.responseEnd,g+=1;g<f.length;g++){var K=f[g],ue=K.startTime;if(ue>G)break;var ve=K.transferSize,be=K.initiatorType;ve&&EC(be)&&(K=K.responseEnd,N+=ve*(K<G?1:(G-ue)/(K-ue)))}if(--g,l+=8*(w+N)/(b.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var $b=null,Yb=null;function om(s){return s.nodeType===9?s:s.ownerDocument}function SC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function TC(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Kb(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Xb=null;function S5(){var s=window.event;return s&&s.type==="popstate"?s===Xb?!1:(Xb=s,!0):(Xb=null,!1)}var AC=typeof setTimeout=="function"?setTimeout:void 0,T5=typeof clearTimeout=="function"?clearTimeout:void 0,CC=typeof Promise=="function"?Promise:void 0,A5=typeof queueMicrotask=="function"?queueMicrotask:typeof CC<"u"?function(s){return CC.resolve(null).then(s).catch(C5)}:AC;function C5(s){setTimeout(function(){throw s})}function To(s){return s==="head"}function IC(s,l){var f=l,g=0;do{var b=f.nextSibling;if(s.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(g===0){s.removeChild(b),Au(l);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")Bf(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,Bf(f);for(var w=f.firstChild;w;){var N=w.nextSibling,G=w.nodeName;w[_a]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&w.rel.toLowerCase()==="stylesheet"||f.removeChild(w),w=N}}else f==="body"&&Bf(s.ownerDocument.body);f=b}while(f);Au(l)}function RC(s,l){var f=s;s=0;do{var g=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=g}while(f)}function Wb(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Wb(f),Fc(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function I5(s,l,f,g){for(;s.nodeType===1;){var b=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(g){if(!s[_a])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==b.rel||s.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||s.getAttribute("title")!==(b.title==null?null:b.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(b.src==null?null:b.src)||s.getAttribute("type")!==(b.type==null?null:b.type)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=Pi(s.nextSibling),s===null)break}return null}function R5(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=Pi(s.nextSibling),s===null))return null;return s}function DC(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Pi(s.nextSibling),s===null))return null;return s}function Qb(s){return s.data==="$?"||s.data==="$~"}function Zb(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function D5(s,l){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||f.readyState!=="loading")l();else{var g=function(){l(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),s._reactRetry=g}}function Pi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var Jb=null;function kC(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(l===0)return Pi(s.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}s=s.nextSibling}return null}function NC(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return s;l--}else f!=="/$"&&f!=="/&"||l++}s=s.previousSibling}return null}function MC(s,l,f){switch(l=om(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Bf(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);Fc(s)}var Oi=new Map,PC=new Set;function lm(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ss=H.d;H.d={f:k5,r:N5,D:M5,C:P5,L:O5,m:V5,X:z5,S:j5,M:L5};function k5(){var s=Ss.f(),l=Jg();return s||l}function N5(s){var l=Si(s);l!==null&&l.tag===5&&l.type==="form"?QT(l):Ss.r(s)}var Eu=typeof document>"u"?null:document;function OC(s,l,f){var g=Eu;if(g&&typeof l=="string"&&l){var b=Yr(l);b='link[rel="'+s+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),PC.has(b)||(PC.add(b),s={rel:s,crossOrigin:f,href:l},g.querySelector(b)===null&&(l=g.createElement("link"),br(l,"link",s),Ln(l),g.head.appendChild(l)))}}function M5(s){Ss.D(s),OC("dns-prefetch",s,null)}function P5(s,l){Ss.C(s,l),OC("preconnect",s,l)}function O5(s,l,f){Ss.L(s,l,f);var g=Eu;if(g&&s&&l){var b='link[rel="preload"][as="'+Yr(l)+'"]';l==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+Yr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+Yr(f.imageSizes)+'"]')):b+='[href="'+Yr(s)+'"]';var w=b;switch(l){case"style":w=Su(s);break;case"script":w=Tu(s)}Oi.has(w)||(s=p({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),Oi.set(w,s),g.querySelector(b)!==null||l==="style"&&g.querySelector(Uf(w))||l==="script"&&g.querySelector(Ff(w))||(l=g.createElement("link"),br(l,"link",s),Ln(l),g.head.appendChild(l)))}}function V5(s,l){Ss.m(s,l);var f=Eu;if(f&&s){var g=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+Yr(g)+'"][href="'+Yr(s)+'"]',w=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Tu(s)}if(!Oi.has(w)&&(s=p({rel:"modulepreload",href:s},l),Oi.set(w,s),f.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Ff(w)))return}g=f.createElement("link"),br(g,"link",s),Ln(g),f.head.appendChild(g)}}}function j5(s,l,f){Ss.S(s,l,f);var g=Eu;if(g&&s){var b=Ea(g).hoistableStyles,w=Su(s);l=l||"default";var N=b.get(w);if(!N){var G={loading:0,preload:null};if(N=g.querySelector(Uf(w)))G.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":l},f),(f=Oi.get(w))&&e1(s,f);var K=N=g.createElement("link");Ln(K),br(K,"link",s),K._p=new Promise(function(ue,ve){K.onload=ue,K.onerror=ve}),K.addEventListener("load",function(){G.loading|=1}),K.addEventListener("error",function(){G.loading|=2}),G.loading|=4,cm(N,l,g)}N={type:"stylesheet",instance:N,count:1,state:G},b.set(w,N)}}}function z5(s,l){Ss.X(s,l);var f=Eu;if(f&&s){var g=Ea(f).hoistableScripts,b=Tu(s),w=g.get(b);w||(w=f.querySelector(Ff(b)),w||(s=p({src:s,async:!0},l),(l=Oi.get(b))&&t1(s,l),w=f.createElement("script"),Ln(w),br(w,"link",s),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(b,w))}}function L5(s,l){Ss.M(s,l);var f=Eu;if(f&&s){var g=Ea(f).hoistableScripts,b=Tu(s),w=g.get(b);w||(w=f.querySelector(Ff(b)),w||(s=p({src:s,async:!0,type:"module"},l),(l=Oi.get(b))&&t1(s,l),w=f.createElement("script"),Ln(w),br(w,"link",s),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(b,w))}}function VC(s,l,f,g){var b=(b=se.current)?lm(b):null;if(!b)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Su(f.href),f=Ea(b).hoistableStyles,g=f.get(l),g||(g={type:"style",instance:null,count:0,state:null},f.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Su(f.href);var w=Ea(b).hoistableStyles,N=w.get(s);if(N||(b=b.ownerDocument||b,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,N),(w=b.querySelector(Uf(s)))&&!w._p&&(N.instance=w,N.state.loading=5),Oi.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Oi.set(s,f),w||B5(b,s,f,N.state))),l&&g===null)throw Error(r(528,""));return N}if(l&&g!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Tu(f),f=Ea(b).hoistableScripts,g=f.get(l),g||(g={type:"script",instance:null,count:0,state:null},f.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Su(s){return'href="'+Yr(s)+'"'}function Uf(s){return'link[rel="stylesheet"]['+s+"]"}function jC(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function B5(s,l,f,g){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=s.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),br(l,"link",f),Ln(l),s.head.appendChild(l))}function Tu(s){return'[src="'+Yr(s)+'"]'}function Ff(s){return"script[async]"+s}function zC(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var g=s.querySelector('style[data-href~="'+Yr(f.href)+'"]');if(g)return l.instance=g,Ln(g),g;var b=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(s.ownerDocument||s).createElement("style"),Ln(g),br(g,"style",b),cm(g,f.precedence,s),l.instance=g;case"stylesheet":b=Su(f.href);var w=s.querySelector(Uf(b));if(w)return l.state.loading|=4,l.instance=w,Ln(w),w;g=jC(f),(b=Oi.get(b))&&e1(g,b),w=(s.ownerDocument||s).createElement("link"),Ln(w);var N=w;return N._p=new Promise(function(G,K){N.onload=G,N.onerror=K}),br(w,"link",g),l.state.loading|=4,cm(w,f.precedence,s),l.instance=w;case"script":return w=Tu(f.src),(b=s.querySelector(Ff(w)))?(l.instance=b,Ln(b),b):(g=f,(b=Oi.get(w))&&(g=p({},f),t1(g,b)),s=s.ownerDocument||s,b=s.createElement("script"),Ln(b),br(b,"link",g),s.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,cm(g,f.precedence,s));return l.instance}function cm(s,l,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,w=b,N=0;N<g.length;N++){var G=g[N];if(G.dataset.precedence===l)w=G;else if(w!==b)break}w?w.parentNode.insertBefore(s,w.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function e1(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function t1(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var um=null;function LC(s,l,f){if(um===null){var g=new Map,b=um=new Map;b.set(f,g)}else b=um,g=b.get(f),g||(g=new Map,b.set(f,g));if(g.has(s))return g;for(g.set(s,null),f=f.getElementsByTagName(s),b=0;b<f.length;b++){var w=f[b];if(!(w[_a]||w[zn]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var N=w.getAttribute(l)||"";N=s+N;var G=g.get(N);G?G.push(w):g.set(N,[w])}}return g}function BC(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function U5(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function UC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function F5(s,l,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=Su(g.href),w=l.querySelector(Uf(b));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=dm.bind(s),l.then(s,s)),f.state.loading|=4,f.instance=w,Ln(w);return}w=l.ownerDocument||l,g=jC(g),(b=Oi.get(b))&&e1(g,b),w=w.createElement("link"),Ln(w);var N=w;N._p=new Promise(function(G,K){N.onload=G,N.onerror=K}),br(w,"link",g),f.instance=w}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=dm.bind(s),l.addEventListener("load",f),l.addEventListener("error",f))}}var n1=0;function G5(s,l){return s.stylesheets&&s.count===0&&hm(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var g=setTimeout(function(){if(s.stylesheets&&hm(s,s.stylesheets),s.unsuspend){var w=s.unsuspend;s.unsuspend=null,w()}},6e4+l);0<s.imgBytes&&n1===0&&(n1=62500*E5());var b=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&hm(s,s.stylesheets),s.unsuspend)){var w=s.unsuspend;s.unsuspend=null,w()}},(s.imgBytes>n1?50:800)+l);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function dm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var fm=null;function hm(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,fm=new Map,l.forEach(q5,s),fm=null,dm.call(s))}function q5(s,l){if(!(l.state.loading&4)){var f=fm.get(s);if(f)var g=f.get(null);else{f=new Map,fm.set(s,f);for(var b=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var N=b[w];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(f.set(N.dataset.precedence,N),g=N)}g&&f.set(null,g)}b=l.instance,N=b.getAttribute("data-precedence"),w=f.get(N)||g,w===g&&f.set(null,b),f.set(N,b),this.count++,g=dm.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),w?w.parentNode.insertBefore(b,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(b,s.firstChild)),l.state.loading|=4}}var Gf={$$typeof:R,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function H5(s,l,f,g,b,w,N,G,K){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=St(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=St(0),this.hiddenUpdates=St(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function FC(s,l,f,g,b,w,N,G,K,ue,ve,be){return s=new H5(s,l,f,N,K,ue,ve,be,G),l=1,w===!0&&(l|=24),w=di(3,null,null,l),s.current=w,w.stateNode=s,l=Oy(),l.refCount++,s.pooledCache=l,l.refCount++,w.memoizedState={element:g,isDehydrated:f,cache:l},Ly(w),s}function GC(s){return s?(s=nu,s):nu}function qC(s,l,f,g,b,w){b=GC(b),g.context===null?g.context=b:g.pendingContext=b,g=po(l),g.payload={element:f},w=w===void 0?null:w,w!==null&&(g.callback=w),f=go(s,g,l),f!==null&&(Jr(f,s,l),_f(f,s,l))}function HC(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function r1(s,l){HC(s,l),(s=s.alternate)&&HC(s,l)}function $C(s){if(s.tag===13||s.tag===31){var l=Dl(s,67108864);l!==null&&Jr(l,s,67108864),r1(s,67108864)}}function YC(s){if(s.tag===13||s.tag===31){var l=mi();l=oi(l);var f=Dl(s,l);f!==null&&Jr(f,s,l),r1(s,l)}}var pm=!0;function $5(s,l,f,g){var b=$.T;$.T=null;var w=H.p;try{H.p=2,i1(s,l,f,g)}finally{H.p=w,$.T=b}}function Y5(s,l,f,g){var b=$.T;$.T=null;var w=H.p;try{H.p=8,i1(s,l,f,g)}finally{H.p=w,$.T=b}}function i1(s,l,f,g){if(pm){var b=a1(g);if(b===null)qb(s,l,g,gm,f),XC(s,g);else if(X5(b,s,l,f,g))g.stopPropagation();else if(XC(s,g),l&4&&-1<K5.indexOf(s)){for(;b!==null;){var w=Si(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var N=An(w.pendingLanes);if(N!==0){var G=w;for(G.pendingLanes|=2,G.entangledLanes|=2;N;){var K=1<<31-en(N);G.entanglements[1]|=K,N&=~K}Va(w),(jt&6)===0&&(Qg=bt()+500,jf(0))}}break;case 31:case 13:G=Dl(w,2),G!==null&&Jr(G,w,2),Jg(),r1(w,2)}if(w=a1(g),w===null&&qb(s,l,g,gm,f),w===b)break;b=w}b!==null&&g.stopPropagation()}else qb(s,l,g,null,f)}}function a1(s){return s=Ti(s),s1(s)}var gm=null;function s1(s){if(gm=null,s=wa(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===31){if(s=c(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return gm=s,null}function KC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lt()){case Ar:return 2;case Zn:return 8;case $r:case ss:return 32;case Qs:return 268435456;default:return 32}default:return 32}}var o1=!1,Ao=null,Co=null,Io=null,qf=new Map,Hf=new Map,Ro=[],K5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function XC(s,l){switch(s){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":Co=null;break;case"mouseover":case"mouseout":Io=null;break;case"pointerover":case"pointerout":qf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hf.delete(l.pointerId)}}function $f(s,l,f,g,b,w){return s===null||s.nativeEvent!==w?(s={blockedOn:l,domEventName:f,eventSystemFlags:g,nativeEvent:w,targetContainers:[b]},l!==null&&(l=Si(l),l!==null&&$C(l)),s):(s.eventSystemFlags|=g,l=s.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),s)}function X5(s,l,f,g,b){switch(l){case"focusin":return Ao=$f(Ao,s,l,f,g,b),!0;case"dragenter":return Co=$f(Co,s,l,f,g,b),!0;case"mouseover":return Io=$f(Io,s,l,f,g,b),!0;case"pointerover":var w=b.pointerId;return qf.set(w,$f(qf.get(w)||null,s,l,f,g,b)),!0;case"gotpointercapture":return w=b.pointerId,Hf.set(w,$f(Hf.get(w)||null,s,l,f,g,b)),!0}return!1}function WC(s){var l=wa(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,Dn(s.priority,function(){YC(f)});return}}else if(l===31){if(l=c(f),l!==null){s.blockedOn=l,Dn(s.priority,function(){YC(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function mm(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=a1(s.nativeEvent);if(f===null){f=s.nativeEvent;var g=new f.constructor(f.type,f);af=g,f.target.dispatchEvent(g),af=null}else return l=Si(f),l!==null&&$C(l),s.blockedOn=f,!1;l.shift()}return!0}function QC(s,l,f){mm(s)&&f.delete(l)}function W5(){o1=!1,Ao!==null&&mm(Ao)&&(Ao=null),Co!==null&&mm(Co)&&(Co=null),Io!==null&&mm(Io)&&(Io=null),qf.forEach(QC),Hf.forEach(QC)}function vm(s,l){s.blockedOn===l&&(s.blockedOn=null,o1||(o1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,W5)))}var ym=null;function ZC(s){ym!==s&&(ym=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ym===s&&(ym=null);for(var l=0;l<s.length;l+=3){var f=s[l],g=s[l+1],b=s[l+2];if(typeof g!="function"){if(s1(g||f)===null)continue;break}var w=Si(f);w!==null&&(s.splice(l,3),l-=3,ab(w,{pending:!0,data:b,method:f.method,action:g},g,b))}}))}function Au(s){function l(K){return vm(K,s)}Ao!==null&&vm(Ao,s),Co!==null&&vm(Co,s),Io!==null&&vm(Io,s),qf.forEach(l),Hf.forEach(l);for(var f=0;f<Ro.length;f++){var g=Ro[f];g.blockedOn===s&&(g.blockedOn=null)}for(;0<Ro.length&&(f=Ro[0],f.blockedOn===null);)WC(f),f.blockedOn===null&&Ro.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var b=f[g],w=f[g+1],N=b[ur]||null;if(typeof w=="function")N||ZC(f);else if(N){var G=null;if(w&&w.hasAttribute("formAction")){if(b=w,N=w[ur]||null)G=N.formAction;else if(s1(b)!==null)continue}else G=N.action;typeof G=="function"?f[g+1]=G:(f.splice(g,3),g-=3),ZC(f)}}}function JC(){function s(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(N){return b=N})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function l1(s){this._internalRoot=s}bm.prototype.render=l1.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,g=mi();qC(f,g,s,l,null,null)},bm.prototype.unmount=l1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;qC(s.current,2,null,s,null,null),Jg(),l[xa]=null}};function bm(s){this._internalRoot=s}bm.prototype.unstable_scheduleHydration=function(s){if(s){var l=Ei();s={blockedOn:null,target:s,priority:l};for(var f=0;f<Ro.length&&l!==0&&l<Ro[f].priority;f++);Ro.splice(f,0,s),f===0&&WC(s)}};var e2=e.version;if(e2!=="19.2.0")throw Error(r(527,e2,"19.2.0"));H.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(l),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var Q5={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xm.isDisabled&&xm.supportsFiber)try{Vr=xm.inject(Q5),bn=xm}catch{}}return Kf.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,g="",b=oA,w=lA,N=cA;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=FC(s,1,!1,null,null,f,g,null,b,w,N,JC),s[xa]=l.current,Gb(s),new l1(l)},Kf.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var g=!1,b="",w=oA,N=lA,G=cA,K=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(N=f.onCaughtError),f.onRecoverableError!==void 0&&(G=f.onRecoverableError),f.formState!==void 0&&(K=f.formState)),l=FC(s,1,!0,l,f??null,g,b,K,w,N,G,JC),l.context=GC(null),f=l.current,g=mi(),g=oi(g),b=po(g),b.callback=null,go(f,b,g),f=g,l.current.lanes=f,In(l,f),Va(l),s[xa]=l.current,Gb(s),new bm(l)},Kf.version="19.2.0",Kf}var u2;function l6(){if(u2)return d1.exports;u2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),d1.exports=o6(),d1.exports}var c6=l6();const u6="modulepreload",d6=function(n){return"/personal-budget-pwa/"+n},d2={},wn=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let d=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var o=d;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");i=d(t.map(h=>{if(h=d6(h),h in d2)return;d2[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":u6,p||(x.as="script"),x.crossOrigin="",x.href=h,u&&x.setAttribute("nonce",u),document.head.appendChild(x),p)return new Promise((_,E)=>{x.addEventListener("load",_),x.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function f6(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:o}=n;let c,u;const d=async(p=!0)=>{await u};async function h(){if("serviceWorker"in navigator){if(c=await wn(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(p=>{o?.(p)}),!c)return;c.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),c.addEventListener("installed",p=>{p.isUpdate||r?.()}),c.register({immediate:e}).then(p=>{a?a("/personal-budget-pwa/sw.js",p):i?.(p)}).catch(p=>{o?.(p)})}}return u=h(),d}var f2="popstate";function h6(n={}){function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=Pc(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),hx("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof a=="string"?a:Oh(a))}function r(i,a){xi(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return g6(e,t,r,n)}function vn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function p6(){return Math.random().toString(36).substring(2,10)}function h2(n,e){return{usr:n.state,key:n.key,idx:e}}function hx(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Pc(e):e,state:t,key:e&&e.key||r||p6()}}function Oh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Pc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function g6(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function p(){c="POP";let S=h(),T=S==null?null:S-d;d=S,u&&u({action:c,location:E.location,delta:T})}function m(S,T){c="PUSH";let C=hx(E.location,S,T);t&&t(C,S),d=h()+1;let R=h2(C,d),j=E.createHref(C);try{o.pushState(R,"",j)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(j)}a&&u&&u({action:c,location:E.location,delta:1})}function x(S,T){c="REPLACE";let C=hx(E.location,S,T);t&&t(C,S),d=h();let R=h2(C,d),j=E.createHref(C);o.replaceState(R,"",j),a&&u&&u({action:c,location:E.location,delta:0})}function _(S){return m6(S)}let E={get action(){return c},get location(){return n(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(f2,p),u=S,()=>{i.removeEventListener(f2,p),u=null}},createHref(S){return e(i,S)},createURL:_,encodeLocation(S){let T=_(S);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:m,replace:x,go(S){return o.go(S)}};return E}function m6(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),vn(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Oh(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function qk(n,e,t="/"){return v6(n,e,t,!1)}function v6(n,e,t,r){let i=typeof e=="string"?Pc(e):e,a=Vs(i.pathname||"/",t);if(a==null)return null;let o=Hk(n);y6(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=R6(a);c=C6(o[u],d,r)}return c}function Hk(n,e=[],t=[],r="",i=!1){let a=(o,c,u=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;vn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let p=ks([r,h.relativePath]),m=t.concat(h);o.children&&o.children.length>0&&(vn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Hk(o.children,e,m,p,u)),!(o.path==null&&!o.index)&&e.push({path:p,score:T6(p,o.index),routesMeta:m})};return n.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of $k(o.path))a(o,c,!0,u)}),e}function $k(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=$k(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function y6(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:A6(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var b6=/^:[\w-]+$/,x6=3,_6=2,w6=1,E6=10,S6=-2,p2=n=>n==="*";function T6(n,e){let t=n.split("/"),r=t.length;return t.some(p2)&&(r+=S6),e&&(r+=_6),t.filter(i=>!p2(i)).reduce((i,a)=>i+(b6.test(a)?x6:a===""?w6:E6),r)}function A6(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function C6(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",p=E0({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!p&&d&&t&&!r[r.length-1].route.index&&(p=E0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:ks([a,p.pathname]),pathnameBase:P6(ks([a,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(a=ks([a,p.pathnameBase]))}return o}function E0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=I6(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},m)=>{if(h==="*"){let _=c[m]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const x=c[m];return p&&!x?d[h]=void 0:d[h]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:n}}function I6(n,e=!1,t=!0){xi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function R6(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Vs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var D6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k6=n=>D6.test(n);function N6(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Pc(n):n,a;if(t)if(k6(t))a=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),xi(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${t}`)}t.startsWith("/")?a=g2(t.substring(1),"/"):a=g2(t,e)}else a=e;return{pathname:a,search:O6(r),hash:V6(i)}}function g2(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function g1(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function M6(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Yk(n){let e=M6(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Kk(n,e,t,r=!1){let i;typeof n=="string"?i=Pc(n):(i={...n},vn(!i.pathname||!i.pathname.includes("?"),g1("?","pathname","search",i)),vn(!i.pathname||!i.pathname.includes("#"),g1("#","pathname","hash",i)),vn(!i.search||!i.search.includes("#"),g1("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=t;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}c=p>=0?e[p]:"/"}let u=N6(i,c),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var ks=n=>n.join("/").replace(/\/\/+/g,"/"),P6=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),O6=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,V6=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function j6(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Xk=["POST","PUT","PATCH","DELETE"];new Set(Xk);var z6=["GET",...Xk];new Set(z6);var Md=F.createContext(null);Md.displayName="DataRouter";var yv=F.createContext(null);yv.displayName="DataRouterState";F.createContext(!1);var Wk=F.createContext({isTransitioning:!1});Wk.displayName="ViewTransition";var L6=F.createContext(new Map);L6.displayName="Fetchers";var B6=F.createContext(null);B6.displayName="Await";var es=F.createContext(null);es.displayName="Navigation";var gp=F.createContext(null);gp.displayName="Location";var ts=F.createContext({outlet:null,matches:[],isDataRoute:!1});ts.displayName="Route";var J_=F.createContext(null);J_.displayName="RouteError";function U6(n,{relative:e}={}){vn(mp(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=F.useContext(es),{hash:i,pathname:a,search:o}=vp(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:ks([t,a])),r.createHref({pathname:c,search:o,hash:i})}function mp(){return F.useContext(gp)!=null}function ns(){return vn(mp(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(gp).location}var Qk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Zk(n){F.useContext(es).static||F.useLayoutEffect(n)}function rs(){let{isDataRoute:n}=F.useContext(ts);return n?tz():F6()}function F6(){vn(mp(),"useNavigate() may be used only in the context of a <Router> component.");let n=F.useContext(Md),{basename:e,navigator:t}=F.useContext(es),{matches:r}=F.useContext(ts),{pathname:i}=ns(),a=JSON.stringify(Yk(r)),o=F.useRef(!1);return Zk(()=>{o.current=!0}),F.useCallback((u,d={})=>{if(xi(o.current,Qk),!o.current)return;if(typeof u=="number"){t.go(u);return}let h=Kk(u,JSON.parse(a),i,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ks([e,h.pathname])),(d.replace?t.replace:t.push)(h,d.state,d)},[e,t,a,i,n])}F.createContext(null);function G6(){let{matches:n}=F.useContext(ts),e=n[n.length-1];return e?e.params:{}}function vp(n,{relative:e}={}){let{matches:t}=F.useContext(ts),{pathname:r}=ns(),i=JSON.stringify(Yk(t));return F.useMemo(()=>Kk(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function q6(n,e){return Jk(n,e)}function Jk(n,e,t,r,i){vn(mp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=F.useContext(es),{matches:o}=F.useContext(ts),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",p=c&&c.route;{let C=p&&p.path||"";eN(d,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let m=ns(),x;if(e){let C=typeof e=="string"?Pc(e):e;vn(h==="/"||C.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=m;let _=x.pathname||"/",E=_;if(h!=="/"){let C=h.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=qk(n,{pathname:E});xi(p||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),xi(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=X6(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:ks([h,a.encodeLocation?a.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:ks([h,a.encodeLocation?a.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),o,t,r,i);return e&&T?F.createElement(gp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},T):T}function H6(){let n=ez(),e=j6(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:a},"ErrorBoundary")," or"," ",F.createElement("code",{style:a},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:i},t):null,o)}var $6=F.createElement(H6,null),Y6=class extends F.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?F.createElement(ts.Provider,{value:this.props.routeContext},F.createElement(J_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function K6({routeContext:n,match:e,children:t}){let r=F.useContext(Md);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(ts.Provider,{value:n},t)}function X6(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t?.errors;if(o!=null){let h=a.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);vn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(t)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:m,errors:x}=t,_=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||_){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let d=t&&r?(h,p)=>{r(h,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:p})}:void 0;return a.reduceRight((h,p,m)=>{let x,_=!1,E=null,S=null;t&&(x=o&&p.route.id?o[p.route.id]:void 0,E=p.route.errorElement||$6,c&&(u<0&&m===0?(eN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,S=null):u===m&&(_=!0,S=p.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,m+1)),C=()=>{let R;return x?R=E:_?R=S:p.route.Component?R=F.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=h,F.createElement(K6,{match:p,routeContext:{outlet:h,matches:T,isDataRoute:t!=null},children:R})};return t&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?F.createElement(Y6,{location:t.location,revalidation:t.revalidation,component:E,error:x,children:C(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:d}):C()},null)}function ew(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W6(n){let e=F.useContext(Md);return vn(e,ew(n)),e}function Q6(n){let e=F.useContext(yv);return vn(e,ew(n)),e}function Z6(n){let e=F.useContext(ts);return vn(e,ew(n)),e}function tw(n){let e=Z6(n),t=e.matches[e.matches.length-1];return vn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function J6(){return tw("useRouteId")}function ez(){let n=F.useContext(J_),e=Q6("useRouteError"),t=tw("useRouteError");return n!==void 0?n:e.errors?.[t]}function tz(){let{router:n}=W6("useNavigate"),e=tw("useNavigate"),t=F.useRef(!1);return Zk(()=>{t.current=!0}),F.useCallback(async(i,a={})=>{xi(t.current,Qk),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var m2={};function eN(n,e,t){!e&&!m2[n]&&(m2[n]=!0,xi(!1,t))}F.memo(nz);function nz({routes:n,future:e,state:t,unstable_onError:r}){return Jk(n,void 0,t,r,e)}function Ts(n){vn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rz({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){vn(!mp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=Pc(t));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:m="default"}=t,x=F.useMemo(()=>{let _=Vs(u,o);return _==null?null:{location:{pathname:_,search:d,hash:h,state:p,key:m},navigationType:r}},[o,u,d,h,p,m,r]);return xi(x!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:F.createElement(es.Provider,{value:c},F.createElement(gp.Provider,{children:e,value:x}))}function iz({children:n,location:e}){return q6(px(n),e)}function px(n,e=[]){let t=[];return F.Children.forEach(n,(r,i)=>{if(!F.isValidElement(r))return;let a=[...e,i];if(r.type===F.Fragment){t.push.apply(t,px(r.props.children,a));return}vn(r.type===Ts,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=px(r.props.children,a)),t.push(o)}),t}var Qm="get",Zm="application/x-www-form-urlencoded";function bv(n){return n!=null&&typeof n.tagName=="string"}function az(n){return bv(n)&&n.tagName.toLowerCase()==="button"}function sz(n){return bv(n)&&n.tagName.toLowerCase()==="form"}function oz(n){return bv(n)&&n.tagName.toLowerCase()==="input"}function lz(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function cz(n,e){return n.button===0&&(!e||e==="_self")&&!lz(n)}function gx(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function uz(n,e){let t=gx(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}var wm=null;function dz(){if(wm===null)try{new FormData(document.createElement("form"),0),wm=!1}catch{wm=!0}return wm}var fz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function m1(n){return n!=null&&!fz.has(n)?(xi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zm}"`),null):n}function hz(n,e){let t,r,i,a,o;if(sz(n)){let c=n.getAttribute("action");r=c?Vs(c,e):null,t=n.getAttribute("method")||Qm,i=m1(n.getAttribute("enctype"))||Zm,a=new FormData(n)}else if(az(n)||oz(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||c.getAttribute("action");if(r=u?Vs(u,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Qm,i=m1(n.getAttribute("formenctype"))||m1(c.getAttribute("enctype"))||Zm,a=new FormData(c,n),!dz()){let{name:d,type:h,value:p}=n;if(h==="image"){let m=d?`${d}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else d&&a.append(d,p)}}else{if(bv(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Qm,r=null,i=Zm,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function nw(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function pz(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Vs(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function gz(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mz(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function vz(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await gz(a,t);return o.links?o.links():[]}return[]}));return _z(r.flat(1).filter(mz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function v2(n,e,t,r,i,a){let o=(u,d)=>t[d]?u.route.id!==t[d].route.id:!0,c=(u,d)=>t[d].pathname!==u.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):a==="data"?e.filter((u,d)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function yz(n,e,{includeHydrateFallback:t}={}){return bz(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function bz(n){return[...new Set(n)]}function xz(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function _z(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(xz(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function tN(){let n=F.useContext(Md);return nw(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function wz(){let n=F.useContext(yv);return nw(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var rw=F.createContext(void 0);rw.displayName="FrameworkContext";function nN(){let n=F.useContext(rw);return nw(n,"You must render this element inside a <HydratedRouter> element"),n}function Ez(n,e){let t=F.useContext(rw),[r,i]=F.useState(!1),[a,o]=F.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,m=F.useRef(null);F.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let E=T=>{T.forEach(C=>{o(C.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return m.current&&S.observe(m.current),()=>{S.disconnect()}}},[n]),F.useEffect(()=>{if(r){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[r]);let x=()=>{i(!0)},_=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,m,{}]:[a,m,{onFocus:Xf(c,x),onBlur:Xf(u,_),onMouseEnter:Xf(d,x),onMouseLeave:Xf(h,_),onTouchStart:Xf(p,x)}]:[!1,m,{}]}function Xf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Sz({page:n,...e}){let{router:t}=tN(),r=F.useMemo(()=>qk(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?F.createElement(Az,{page:n,matches:r,...e}):null}function Tz(n){let{manifest:e,routeModules:t}=nN(),[r,i]=F.useState([]);return F.useEffect(()=>{let a=!1;return vz(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function Az({page:n,matches:e,...t}){let r=ns(),{manifest:i,routeModules:a}=nN(),{basename:o}=tN(),{loaderData:c,matches:u}=wz(),d=F.useMemo(()=>v2(n,e,u,i,r,"data"),[n,e,u,i,r]),h=F.useMemo(()=>v2(n,e,u,i,r,"assets"),[n,e,u,i,r]),p=F.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let _=new Set,E=!1;if(e.forEach(T=>{let C=i.routes[T.route.id];!C||!C.hasLoader||(!d.some(R=>R.route.id===T.route.id)&&T.route.id in c&&a[T.route.id]?.shouldRevalidate||C.hasClientLoader?E=!0:_.add(T.route.id))}),_.size===0)return[];let S=pz(n,o,"data");return E&&_.size>0&&S.searchParams.set("_routes",e.filter(T=>_.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[o,c,r,i,d,e,n,a]),m=F.useMemo(()=>yz(h,i),[h,i]),x=Tz(h);return F.createElement(F.Fragment,null,p.map(_=>F.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...t})),m.map(_=>F.createElement("link",{key:_,rel:"modulepreload",href:_,...t})),x.map(({key:_,link:E})=>F.createElement("link",{key:_,nonce:t.nonce,...E})))}function Cz(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var rN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rN&&(window.__reactRouterVersion="7.9.6")}catch{}function Iz({basename:n,children:e,window:t}){let r=F.useRef();r.current==null&&(r.current=h6({window:t,v5Compat:!0}));let i=r.current,[a,o]=F.useState({action:i.action,location:i.location}),c=F.useCallback(u=>{F.startTransition(()=>o(u))},[o]);return F.useLayoutEffect(()=>i.listen(c),[i,c]),F.createElement(rz,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var iN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aN=F.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:p,...m},x){let{basename:_}=F.useContext(es),E=typeof d=="string"&&iN.test(d),S,T=!1;if(typeof d=="string"&&E&&(S=d,rN))try{let k=new URL(window.location.href),O=d.startsWith("//")?new URL(k.protocol+d):new URL(d),B=Vs(O.pathname,_);O.origin===k.origin&&B!=null?d=B+O.search+O.hash:T=!0}catch{xi(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=U6(d,{relative:i}),[R,j,z]=Ez(r,m),V=Nz(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:p});function I(k){e&&e(k),k.defaultPrevented||V(k)}let A=F.createElement("a",{...m,...z,href:S||C,onClick:T||a?e:I,ref:Cz(x,j),target:u,"data-discover":!E&&t==="render"?"true":void 0});return R&&!E?F.createElement(F.Fragment,null,A,F.createElement(Sz,{page:C})):A});aN.displayName="Link";var Rz=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...d},h){let p=vp(o,{relative:d.relative}),m=ns(),x=F.useContext(yv),{navigator:_,basename:E}=F.useContext(es),S=x!=null&&zz(p)&&c===!0,T=_.encodeLocation?_.encodeLocation(p).pathname:p.pathname,C=m.pathname,R=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(C=C.toLowerCase(),R=R?R.toLowerCase():null,T=T.toLowerCase()),R&&E&&(R=Vs(R,E)||R);const j=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let z=C===T||!i&&C.startsWith(T)&&C.charAt(j)==="/",V=R!=null&&(R===T||!i&&R.startsWith(T)&&R.charAt(T.length)==="/"),I={isActive:z,isPending:V,isTransitioning:S},A=z?e:void 0,k;typeof r=="function"?k=r(I):k=[r,z?"active":null,V?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(I):a;return F.createElement(aN,{...d,"aria-current":A,className:k,ref:h,style:O,to:o,viewTransition:c},typeof u=="function"?u(I):u)});Rz.displayName="NavLink";var Dz=F.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=Qm,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:p,...m},x)=>{let _=Vz(),E=jz(c,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",T=typeof c=="string"&&iN.test(c),C=R=>{if(u&&u(R),R.defaultPrevented)return;R.preventDefault();let j=R.nativeEvent.submitter,z=j?.getAttribute("formmethod")||o;_(j||R.currentTarget,{fetcherKey:e,method:z,navigate:t,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:p})};return F.createElement("form",{ref:x,method:S,action:E,onSubmit:r?u:C,...m,"data-discover":!T&&n==="render"?"true":void 0})});Dz.displayName="Form";function kz(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sN(n){let e=F.useContext(Md);return vn(e,kz(n)),e}function Nz(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=rs(),u=ns(),d=vp(n,{relative:a});return F.useCallback(h=>{if(cz(h,e)){h.preventDefault();let p=t!==void 0?t:Oh(u)===Oh(d);c(n,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,d,t,r,e,n,i,a,o])}function Mz(n){xi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=F.useRef(gx(n)),t=F.useRef(!1),r=ns(),i=F.useMemo(()=>uz(r.search,t.current?null:e.current),[r.search]),a=rs(),o=F.useCallback((c,u)=>{const d=gx(typeof c=="function"?c(new URLSearchParams(i)):c);t.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var Pz=0,Oz=()=>`__${String(++Pz)}__`;function Vz(){let{router:n}=sN("useSubmit"),{basename:e}=F.useContext(es),t=J6();return F.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:d}=hz(r,e);if(i.navigate===!1){let h=i.fetcherKey||Oz();await n.fetch(h,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function jz(n,{relative:e}={}){let{basename:t}=F.useContext(es),r=F.useContext(ts);vn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...vp(n||".",{relative:e})},o=ns();if(n==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let h=c.toString();a.search=h?`?${h}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ks([t,a.pathname])),Oh(a)}function zz(n,{relative:e}={}){let t=F.useContext(Wk);vn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=sN("useViewTransitionState"),i=vp(n,{relative:e});if(!t.isTransitioning)return!1;let a=Vs(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Vs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return E0(i.pathname,o)!=null||E0(i.pathname,a)!=null}const Lz=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bz=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),y2=n=>{const e=Bz(n);return e.charAt(0).toUpperCase()+e.slice(1)},oN=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Uz=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Fz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Gz=F.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>F.createElement("svg",{ref:u,...Fz,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:oN("lucide",i),...!a&&!Uz(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>F.createElement(d,h)),...Array.isArray(a)?a:[a]]));const at=(n,e)=>{const t=F.forwardRef(({className:r,...i},a)=>F.createElement(Gz,{ref:a,iconNode:e,className:oN(`lucide-${Lz(y2(n))}`,`lucide-${n}`,r),...i}));return t.displayName=y2(n),t};const qz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Vh=at("arrow-left",qz);const Hz=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],$z=at("arrow-right-left",Hz);const Yz=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Kz=at("check",Yz);const Xz=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],iw=at("chevron-down",Xz);const Wz=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Qz=at("chevron-left",Wz);const Zz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Hl=at("chevron-right",Zz);const Jz=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],lN=at("chevron-up",Jz);const eL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],tL=at("circle-arrow-down",eL);const nL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],rL=at("circle-arrow-up",nL);const iL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],S0=at("circle-check-big",iL);const aL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],b2=at("circle-check",aL);const sL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Em=at("circle-plus",sL);const oL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],x2=at("circle-question-mark",oL);const lL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_2=at("circle",lL);const cL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],uL=at("copy",cL);const dL=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],w2=at("download",dL);const fL=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],hL=at("eye-off",fL);const pL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gL=at("eye",pL);const mL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vL=at("file-text",mL);const yL=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],bL=at("folder-plus",yL);const xL=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],_L=at("funnel",xL);const wL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],EL=at("house",wL);const SL=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],TL=at("list",SL);const AL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],CL=at("loader-circle",AL);const IL=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],E2=at("loader",IL);const RL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],DL=at("lock-open",RL);const kL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],NL=at("lock",kL);const ML=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],PL=at("log-out",ML);const OL=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],mx=at("mail",OL);const VL=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],jL=at("pause",VL);const zL=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],jh=at("piggy-bank",zL);const LL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],sd=at("refresh-cw",LL);const BL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],UL=at("search",BL);const FL=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cN=at("settings",FL);const GL=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],qL=at("sparkles",GL);const HL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],$L=at("target",HL);const YL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vx=at("trash-2",YL);const KL=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],uN=at("trash",KL);const XL=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],WL=at("trending-down",XL);const QL=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ZL=at("trending-up",QL);const JL=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ju=at("triangle-alert",JL);const e9=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],t9=at("undo-2",e9);const n9=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],r9=at("upload",n9);const i9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],a9=at("user-plus",i9);const s9=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],aw=at("wallet",s9);const o9=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],l9=at("wifi-off",o9);const c9=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],u9=at("wifi",c9);const d9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xv=at("x",d9),sw=F.createContext({});function _v(n){const e=F.useRef(null);return e.current===null&&(e.current=n()),e.current}const ow=typeof window<"u",lw=ow?F.useLayoutEffect:F.useEffect,wv=F.createContext(null);function cw(n,e){n.indexOf(e)===-1&&n.push(e)}function uw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const js=(n,e,t)=>t>e?e:t<n?n:t;let dw=()=>{};const zs={},dN=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function fN(n){return typeof n=="object"&&n!==null}const hN=n=>/^0[^.\s]+$/u.test(n);function fw(n){let e;return()=>(e===void 0&&(e=n()),e)}const qi=n=>n,f9=(n,e)=>t=>e(n(t)),yp=(...n)=>n.reduce(f9),zh=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class hw{constructor(){this.subscriptions=[]}add(e){return cw(this.subscriptions,e),()=>uw(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ga=n=>n*1e3,Fi=n=>n/1e3;function pN(n,e){return e?n*(1e3/e):0}const gN=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,h9=1e-7,p9=12;function g9(n,e,t,r,i){let a,o,c=0;do o=e+(t-e)/2,a=gN(o,r,i)-n,a>0?t=o:e=o;while(Math.abs(a)>h9&&++c<p9);return o}function bp(n,e,t,r){if(n===e&&t===r)return qi;const i=a=>g9(a,0,1,n,t);return a=>a===0||a===1?a:gN(i(a),e,r)}const mN=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,vN=n=>e=>1-n(1-e),yN=bp(.33,1.53,.69,.99),pw=vN(yN),bN=mN(pw),xN=n=>(n*=2)<1?.5*pw(n):.5*(2-Math.pow(2,-10*(n-1))),gw=n=>1-Math.sin(Math.acos(n)),_N=vN(gw),wN=mN(gw),m9=bp(.42,0,1,1),v9=bp(0,0,.58,1),EN=bp(.42,0,.58,1),y9=n=>Array.isArray(n)&&typeof n[0]!="number",SN=n=>Array.isArray(n)&&typeof n[0]=="number",b9={linear:qi,easeIn:m9,easeInOut:EN,easeOut:v9,circIn:gw,circInOut:wN,circOut:_N,backIn:pw,backInOut:bN,backOut:yN,anticipate:xN},x9=n=>typeof n=="string",S2=n=>{if(SN(n)){dw(n.length===4);const[e,t,r,i]=n;return bp(e,t,r,i)}else if(x9(n))return b9[n];return n},Sm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function _9(n,e){let t=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),n()),h(c)}const d={schedule:(h,p=!1,m=!1)=>{const _=m&&i?t:r;return p&&o.add(h),_.has(h)||_.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(c=h,i){a=!0;return}i=!0,[t,r]=[r,t],t.forEach(u),t.clear(),i=!1,a&&(a=!1,d.process(h))}};return d}const w9=40;function TN(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,o=Sm.reduce((R,j)=>(R[j]=_9(a),R),{}),{setup:c,read:u,resolveKeyframes:d,preUpdate:h,update:p,preRender:m,render:x,postRender:_}=o,E=()=>{const R=zs.useManualTiming?i.timestamp:performance.now();t=!1,zs.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(R-i.timestamp,w9),1)),i.timestamp=R,i.isProcessing=!0,c.process(i),u.process(i),d.process(i),h.process(i),p.process(i),m.process(i),x.process(i),_.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(E))},S=()=>{t=!0,r=!0,i.isProcessing||n(E)};return{schedule:Sm.reduce((R,j)=>{const z=o[j];return R[j]=(V,I=!1,A=!1)=>(t||S(),z.schedule(V,I,A)),R},{}),cancel:R=>{for(let j=0;j<Sm.length;j++)o[Sm[j]].cancel(R)},state:i,steps:o}}const{schedule:cn,cancel:nl,state:_r,steps:v1}=TN(typeof requestAnimationFrame<"u"?requestAnimationFrame:qi,!0);let Jm;function E9(){Jm=void 0}const ti={now:()=>(Jm===void 0&&ti.set(_r.isProcessing||zs.useManualTiming?_r.timestamp:performance.now()),Jm),set:n=>{Jm=n,queueMicrotask(E9)}},AN=n=>e=>typeof e=="string"&&e.startsWith(n),mw=AN("--"),S9=AN("var(--"),vw=n=>S9(n)?T9.test(n.split("/*")[0].trim()):!1,T9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Pd={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Lh={...Pd,transform:n=>js(0,1,n)},Tm={...Pd,default:1},ph=n=>Math.round(n*1e5)/1e5,yw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function A9(n){return n==null}const C9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,bw=(n,e)=>t=>!!(typeof t=="string"&&C9.test(t)&&t.startsWith(n)||e&&!A9(t)&&Object.prototype.hasOwnProperty.call(t,e)),CN=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match(yw);return{[n]:parseFloat(i),[e]:parseFloat(a),[t]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},I9=n=>js(0,255,n),y1={...Pd,transform:n=>Math.round(I9(n))},ic={test:bw("rgb","red"),parse:CN("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+y1.transform(n)+", "+y1.transform(e)+", "+y1.transform(t)+", "+ph(Lh.transform(r))+")"};function R9(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const yx={test:bw("#"),parse:R9,transform:ic.transform},xp=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),jo=xp("deg"),qa=xp("%"),it=xp("px"),D9=xp("vh"),k9=xp("vw"),T2={...qa,parse:n=>qa.parse(n)/100,transform:n=>qa.transform(n*100)},Bu={test:bw("hsl","hue"),parse:CN("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+qa.transform(ph(e))+", "+qa.transform(ph(t))+", "+ph(Lh.transform(r))+")"},Yn={test:n=>ic.test(n)||yx.test(n)||Bu.test(n),parse:n=>ic.test(n)?ic.parse(n):Bu.test(n)?Bu.parse(n):yx.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ic.transform(n):Bu.transform(n),getAnimatableNone:n=>{const e=Yn.parse(n);return e.alpha=0,Yn.transform(e)}},N9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function M9(n){return isNaN(n)&&typeof n=="string"&&(n.match(yw)?.length||0)+(n.match(N9)?.length||0)>0}const IN="number",RN="color",P9="var",O9="var(",A2="${}",V9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Bh(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(V9,u=>(Yn.test(u)?(r.color.push(a),i.push(RN),t.push(Yn.parse(u))):u.startsWith(O9)?(r.var.push(a),i.push(P9),t.push(u)):(r.number.push(a),i.push(IN),t.push(parseFloat(u))),++a,A2)).split(A2);return{values:t,split:c,indexes:r,types:i}}function DN(n){return Bh(n).values}function kN(n){const{split:e,types:t}=Bh(n),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const c=t[o];c===IN?a+=ph(i[o]):c===RN?a+=Yn.transform(i[o]):a+=i[o]}return a}}const j9=n=>typeof n=="number"?0:Yn.test(n)?Yn.getAnimatableNone(n):n;function z9(n){const e=DN(n);return kN(n)(e.map(j9))}const rl={test:M9,parse:DN,createTransformer:kN,getAnimatableNone:z9};function b1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function L9({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,a=0,o=0;if(!e)i=a=o=t;else{const c=t<.5?t*(1+e):t+e-t*e,u=2*t-c;i=b1(u,c,n+1/3),a=b1(u,c,n),o=b1(u,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function T0(n,e){return t=>t>0?e:n}const gn=(n,e,t)=>n+(e-n)*t,x1=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},B9=[yx,ic,Bu],U9=n=>B9.find(e=>e.test(n));function C2(n){const e=U9(n);if(!e)return!1;let t=e.parse(n);return e===Bu&&(t=L9(t)),t}const I2=(n,e)=>{const t=C2(n),r=C2(e);if(!t||!r)return T0(n,e);const i={...t};return a=>(i.red=x1(t.red,r.red,a),i.green=x1(t.green,r.green,a),i.blue=x1(t.blue,r.blue,a),i.alpha=gn(t.alpha,r.alpha,a),ic.transform(i))},bx=new Set(["none","hidden"]);function F9(n,e){return bx.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function G9(n,e){return t=>gn(n,e,t)}function xw(n){return typeof n=="number"?G9:typeof n=="string"?vw(n)?T0:Yn.test(n)?I2:$9:Array.isArray(n)?NN:typeof n=="object"?Yn.test(n)?I2:q9:T0}function NN(n,e){const t=[...n],r=t.length,i=n.map((a,o)=>xw(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)t[o]=i[o](a);return t}}function q9(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=xw(n[i])(n[i],e[i]));return i=>{for(const a in r)t[a]=r[a](i);return t}}function H9(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=n.indexes[a][r[a]],c=n.values[o]??0;t[i]=c,r[a]++}return t}const $9=(n,e)=>{const t=rl.createTransformer(e),r=Bh(n),i=Bh(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?bx.has(n)&&!i.values.length||bx.has(e)&&!r.values.length?F9(n,e):yp(NN(H9(r,i),i.values),t):T0(n,e)};function MN(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?gn(n,e,t):xw(n)(n,e)}const Y9=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>cn.update(e,t),stop:()=>nl(e),now:()=>_r.isProcessing?_r.timestamp:ti.now()}},PN=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let a=0;a<i;a++)r+=Math.round(n(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},A0=2e4;function _w(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<A0;)e+=t,r=n.next(e);return e>=A0?1/0:e}function K9(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(_w(r),A0);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Fi(i)}}const X9=5;function ON(n,e,t){const r=Math.max(e-X9,0);return pN(t-n(r),e-r)}const En={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_1=.001;function W9({duration:n=En.duration,bounce:e=En.bounce,velocity:t=En.velocity,mass:r=En.mass}){let i,a,o=1-e;o=js(En.minDamping,En.maxDamping,o),n=js(En.minDuration,En.maxDuration,Fi(n)),o<1?(i=d=>{const h=d*o,p=h*n,m=h-t,x=xx(d,o),_=Math.exp(-p);return _1-m/x*_},a=d=>{const p=d*o*n,m=p*t+t,x=Math.pow(o,2)*Math.pow(d,2)*n,_=Math.exp(-p),E=xx(Math.pow(d,2),o);return(-i(d)+_1>0?-1:1)*((m-x)*_)/E}):(i=d=>{const h=Math.exp(-d*n),p=(d-t)*n+1;return-_1+h*p},a=d=>{const h=Math.exp(-d*n),p=(t-d)*(n*n);return h*p});const c=5/n,u=Z9(i,a,c);if(n=Ga(n),isNaN(u))return{stiffness:En.stiffness,damping:En.damping,duration:n};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:n}}}const Q9=12;function Z9(n,e,t){let r=t;for(let i=1;i<Q9;i++)r=r-n(r)/e(r);return r}function xx(n,e){return n*Math.sqrt(1-e*e)}const J9=["duration","bounce"],eB=["stiffness","damping","mass"];function R2(n,e){return e.some(t=>n[t]!==void 0)}function tB(n){let e={velocity:En.velocity,stiffness:En.stiffness,damping:En.damping,mass:En.mass,isResolvedFromDuration:!1,...n};if(!R2(n,eB)&&R2(n,J9))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,a=2*js(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:En.mass,stiffness:i,damping:a}}else{const t=W9(n);e={...e,...t,mass:En.mass},e.isResolvedFromDuration=!0}return e}function C0(n=En.visualDuration,e=En.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const a=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:d,mass:h,duration:p,velocity:m,isResolvedFromDuration:x}=tB({...t,velocity:-Fi(t.velocity||0)}),_=m||0,E=d/(2*Math.sqrt(u*h)),S=o-a,T=Fi(Math.sqrt(u/h)),C=Math.abs(S)<5;r||(r=C?En.restSpeed.granular:En.restSpeed.default),i||(i=C?En.restDelta.granular:En.restDelta.default);let R;if(E<1){const z=xx(T,E);R=V=>{const I=Math.exp(-E*T*V);return o-I*((_+E*T*S)/z*Math.sin(z*V)+S*Math.cos(z*V))}}else if(E===1)R=z=>o-Math.exp(-T*z)*(S+(_+T*S)*z);else{const z=T*Math.sqrt(E*E-1);R=V=>{const I=Math.exp(-E*T*V),A=Math.min(z*V,300);return o-I*((_+E*T*S)*Math.sinh(A)+z*S*Math.cosh(A))/z}}const j={calculatedDuration:x&&p||null,next:z=>{const V=R(z);if(x)c.done=z>=p;else{let I=z===0?_:0;E<1&&(I=z===0?Ga(_):ON(R,z,V));const A=Math.abs(I)<=r,k=Math.abs(o-V)<=i;c.done=A&&k}return c.value=c.done?o:V,c},toString:()=>{const z=Math.min(_w(j),A0),V=PN(I=>j.next(z*I).value,z,30);return z+"ms "+V},toTransition:()=>{}};return j}C0.applyToOptions=n=>{const e=K9(n,100,C0);return n.ease=e.ease,n.duration=Ga(e.duration),n.type="keyframes",n};function _x({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:d=.5,restSpeed:h}){const p=n[0],m={done:!1,value:p},x=A=>c!==void 0&&A<c||u!==void 0&&A>u,_=A=>c===void 0?u:u===void 0||Math.abs(c-A)<Math.abs(u-A)?c:u;let E=t*e;const S=p+E,T=o===void 0?S:o(S);T!==S&&(E=T-p);const C=A=>-E*Math.exp(-A/r),R=A=>T+C(A),j=A=>{const k=C(A),O=R(A);m.done=Math.abs(k)<=d,m.value=m.done?T:O};let z,V;const I=A=>{x(m.value)&&(z=A,V=C0({keyframes:[m.value,_(m.value)],velocity:ON(R,A,m.value),damping:i,stiffness:a,restDelta:d,restSpeed:h}))};return I(0),{calculatedDuration:null,next:A=>{let k=!1;return!V&&z===void 0&&(k=!0,j(A),I(A)),z!==void 0&&A>=z?V.next(A-z):(!k&&j(A),m)}}}function nB(n,e,t){const r=[],i=t||zs.mix||MN,a=n.length-1;for(let o=0;o<a;o++){let c=i(n[o],n[o+1]);if(e){const u=Array.isArray(e)?e[o]||qi:e;c=yp(u,c)}r.push(c)}return r}function rB(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const a=n.length;if(dw(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=nB(e,r,i),u=c.length,d=h=>{if(o&&h<n[0])return e[0];let p=0;if(u>1)for(;p<n.length-2&&!(h<n[p+1]);p++);const m=zh(n[p],n[p+1],h);return c[p](m)};return t?h=>d(js(n[0],n[a-1],h)):d}function iB(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=zh(0,e,r);n.push(gn(t,1,i))}}function aB(n){const e=[0];return iB(e,n.length-1),e}function sB(n,e){return n.map(t=>t*e)}function oB(n,e){return n.map(()=>e||EN).splice(0,n.length-1)}function gh({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=y9(r)?r.map(S2):S2(r),a={done:!1,value:e[0]},o=sB(t&&t.length===e.length?t:aB(e),n),c=rB(o,e,{ease:Array.isArray(i)?i:oB(e,i)});return{calculatedDuration:n,next:u=>(a.value=c(u),a.done=u>=n,a)}}const lB=n=>n!==null;function ww(n,{repeat:e,repeatType:t="loop"},r,i=1){const a=n.filter(lB),c=i<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const cB={decay:_x,inertia:_x,tween:gh,keyframes:gh,spring:C0};function VN(n){typeof n.type=="string"&&(n.type=cB[n.type])}class Ew{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const uB=n=>n/100;class Sw extends Ew{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==ti.now()&&this.tick(ti.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;VN(e);const{type:t=gh,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=e;let{keyframes:c}=e;const u=t||gh;u!==gh&&typeof c[0]!="number"&&(this.mixKeyframes=yp(uB,MN(c[0],c[1])),c=[0,100]);const d=u({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=_w(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:m,repeatDelay:x,type:_,onUpdate:E,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const T=this.currentTime-d*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let R=this.currentTime,j=r;if(p){const A=Math.min(this.currentTime,i)/c;let k=Math.floor(A),O=A%1;!O&&A>=1&&(O=1),O===1&&k--,k=Math.min(k,p+1),!!(k%2)&&(m==="reverse"?(O=1-O,x&&(O-=x/c)):m==="mirror"&&(j=o)),R=js(0,1,O)*c}const z=C?{done:!1,value:h[0]}:j.next(R);a&&(z.value=a(z.value));let{done:V}=z;!C&&u!==null&&(V=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return I&&_!==_x&&(z.value=ww(h,this.options,S,this.speed)),E&&E(z.value),I&&this.finish(),z}then(e,t){return this.finished.then(e,t)}get duration(){return Fi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Fi(e)}get time(){return Fi(this.currentTime)}set time(e){e=Ga(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ti.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Fi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Y9,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ti.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function dB(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const ac=n=>n*180/Math.PI,wx=n=>{const e=ac(Math.atan2(n[1],n[0]));return Ex(e)},fB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:wx,rotateZ:wx,skewX:n=>ac(Math.atan(n[1])),skewY:n=>ac(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Ex=n=>(n=n%360,n<0&&(n+=360),n),D2=wx,k2=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),N2=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),hB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:k2,scaleY:N2,scale:n=>(k2(n)+N2(n))/2,rotateX:n=>Ex(ac(Math.atan2(n[6],n[5]))),rotateY:n=>Ex(ac(Math.atan2(-n[2],n[0]))),rotateZ:D2,rotate:D2,skewX:n=>ac(Math.atan(n[4])),skewY:n=>ac(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Sx(n){return n.includes("scale")?1:0}function Tx(n,e){if(!n||n==="none")return Sx(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=hB,i=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=fB,i=c}if(!i)return Sx(e);const a=r[e],o=i[1].split(",").map(gB);return typeof a=="function"?a(o):o[a]}const pB=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Tx(t,e)};function gB(n){return parseFloat(n.trim())}const Od=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vd=new Set(Od),M2=n=>n===Pd||n===it,mB=new Set(["x","y","z"]),vB=Od.filter(n=>!mB.has(n));function yB(n){const e=[];return vB.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const uc={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Tx(e,"x"),y:(n,{transform:e})=>Tx(e,"y")};uc.translateX=uc.x;uc.translateY=uc.y;const dc=new Set;let Ax=!1,Cx=!1,Ix=!1;function jN(){if(Cx){const n=Array.from(dc).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=yB(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([a,o])=>{r.getValue(a)?.set(o)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Cx=!1,Ax=!1,dc.forEach(n=>n.complete(Ix)),dc.clear()}function zN(){dc.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Cx=!0)})}function bB(){Ix=!0,zN(),jN(),Ix=!1}class Tw{constructor(e,t,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(dc.add(this),Ax||(Ax=!0,cn.read(zN),cn.resolveKeyframes(jN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const c=r.readValue(t,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}dB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),dc.delete(this)}cancel(){this.state==="scheduled"&&(dc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const xB=n=>n.startsWith("--");function _B(n,e,t){xB(e)?n.style.setProperty(e,t):n.style[e]=t}const wB=fw(()=>window.ScrollTimeline!==void 0),EB={};function SB(n,e){const t=fw(n);return()=>EB[e]??t()}const LN=SB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),rh=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,P2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rh([0,.65,.55,1]),circOut:rh([.55,0,1,.45]),backIn:rh([.31,.01,.66,-.59]),backOut:rh([.33,1.53,.69,.99])};function BN(n,e){if(n)return typeof n=="function"?LN()?PN(n,e):"ease-out":SN(n)?rh(n):Array.isArray(n)?n.map(t=>BN(t,e)||P2.easeOut):P2[n]}function TB(n,e,t,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:u}={},d=void 0){const h={[e]:t};u&&(h.offset=u);const p=BN(c,i);Array.isArray(p)&&(h.easing=p);const m={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),n.animate(h,m)}function UN(n){return typeof n=="function"&&"applyToOptions"in n}function AB({type:n,...e}){return UN(n)&&LN()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class CB extends Ew{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,dw(typeof e.type!="string");const d=AB(e);this.animation=TB(t,r,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const h=ww(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(h):_B(t,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Fi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Fi(e)}get time(){return Fi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ga(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&wB()?(this.animation.timeline=e,qi):t(this)}}const FN={anticipate:xN,backInOut:bN,circInOut:wN};function IB(n){return n in FN}function RB(n){typeof n.ease=="string"&&IB(n.ease)&&(n.ease=FN[n.ease])}const O2=10;class DB extends CB{constructor(e){RB(e),VN(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new Sw({...o,autoplay:!1}),u=Ga(this.finishedTime??this.time);t.setWithVelocity(c.sample(u-O2).value,c.sample(u).value,O2),c.stop()}}const V2=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(rl.test(n)||n==="0")&&!n.startsWith("url("));function kB(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function NB(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],o=V2(i,e),c=V2(a,e);return!o||!c?!1:kB(n)||(t==="spring"||UN(t))&&r}function Rx(n){n.duration=0,n.type="keyframes"}const MB=new Set(["opacity","clipPath","filter","transform"]),PB=fw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function OB(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:a,type:o}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return PB()&&t&&MB.has(t)&&(t!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const VB=40;class jB extends Ew{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:u,motionValue:d,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ti.now();const m={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:a,repeatType:o,name:u,motionValue:d,element:h,...p},x=h?.KeyframeResolver||Tw;this.keyframeResolver=new x(c,(_,E,S)=>this.onKeyframesResolved(_,E,m,!S),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=ti.now(),NB(e,a,o,c)||((zs.instantAnimations||!u)&&h?.(ww(e,r,t)),e[0]=e[e.length-1],Rx(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>VB?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},x=!d&&OB(m)?new DB({...m,element:m.motionValue.owner.current}):new Sw(m);x.finished.then(()=>this.notifyFinished()).catch(qi),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),bB()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const zB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function LB(n){const e=zB.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function GN(n,e,t=1){const[r,i]=LB(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return dN(o)?parseFloat(o):o}return vw(i)?GN(i,e,t+1):i}function Aw(n,e){return n?.[e]??n?.default??n}const qN=new Set(["width","height","top","left","right","bottom",...Od]),BB={test:n=>n==="auto",parse:n=>n},HN=n=>e=>e.test(n),$N=[Pd,it,qa,jo,k9,D9,BB],j2=n=>$N.find(HN(n));function UB(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||hN(n):!0}const FB=new Set(["brightness","contrast","saturate","opacity"]);function GB(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(yw)||[];if(!r)return n;const i=t.replace(r,"");let a=FB.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+i+")"}const qB=/\b([a-z-]*)\(.*?\)/gu,Dx={...rl,getAnimatableNone:n=>{const e=n.match(qB);return e?e.map(GB).join(" "):n}},z2={...Pd,transform:Math.round},HB={rotate:jo,rotateX:jo,rotateY:jo,rotateZ:jo,scale:Tm,scaleX:Tm,scaleY:Tm,scaleZ:Tm,skew:jo,skewX:jo,skewY:jo,distance:it,translateX:it,translateY:it,translateZ:it,x:it,y:it,z:it,perspective:it,transformPerspective:it,opacity:Lh,originX:T2,originY:T2,originZ:it},Cw={borderWidth:it,borderTopWidth:it,borderRightWidth:it,borderBottomWidth:it,borderLeftWidth:it,borderRadius:it,radius:it,borderTopLeftRadius:it,borderTopRightRadius:it,borderBottomRightRadius:it,borderBottomLeftRadius:it,width:it,maxWidth:it,height:it,maxHeight:it,top:it,right:it,bottom:it,left:it,padding:it,paddingTop:it,paddingRight:it,paddingBottom:it,paddingLeft:it,margin:it,marginTop:it,marginRight:it,marginBottom:it,marginLeft:it,backgroundPositionX:it,backgroundPositionY:it,...HB,zIndex:z2,fillOpacity:Lh,strokeOpacity:Lh,numOctaves:z2},$B={...Cw,color:Yn,backgroundColor:Yn,outlineColor:Yn,fill:Yn,stroke:Yn,borderColor:Yn,borderTopColor:Yn,borderRightColor:Yn,borderBottomColor:Yn,borderLeftColor:Yn,filter:Dx,WebkitFilter:Dx},YN=n=>$B[n];function KN(n,e){let t=YN(n);return t!==Dx&&(t=rl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const YB=new Set(["auto","none","0"]);function KB(n,e,t){let r=0,i;for(;r<n.length&&!i;){const a=n[r];typeof a=="string"&&!YB.has(a)&&Bh(a).values.length&&(i=n[r]),r++}if(i&&t)for(const a of e)n[a]=KN(t,i)}class XB extends Tw{constructor(e,t,r,i,a){super(e,t,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),vw(d))){const h=GN(d,t.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!qN.has(r)||e.length!==2)return;const[i,a]=e,o=j2(i),c=j2(a);if(o!==c)if(M2(o)&&M2(c))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else uc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||UB(e[i]))&&r.push(i);r.length&&KB(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=uc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=uc[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function WB(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=t?.[n]??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const XN=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function WN(n){return fN(n)&&"offsetHeight"in n}const L2=30,QB=n=>!isNaN(parseFloat(n));class ZB{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=ti.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ti.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=QB(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new hw);const r=this.events[e].add(t);return e==="change"?()=>{r(),cn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ti.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>L2)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,L2);return pN(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function od(n,e){return new ZB(n,e)}const{schedule:Iw}=TN(queueMicrotask,!1),oa={x:!1,y:!1};function QN(){return oa.x||oa.y}function JB(n){return n==="x"||n==="y"?oa[n]?null:(oa[n]=!0,()=>{oa[n]=!1}):oa.x||oa.y?null:(oa.x=oa.y=!0,()=>{oa.x=oa.y=!1})}function ZN(n,e){const t=WB(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function B2(n){return!(n.pointerType==="touch"||QN())}function eU(n,e,t={}){const[r,i,a]=ZN(n,t),o=c=>{if(!B2(c))return;const{target:u}=c,d=e(u,c);if(typeof d!="function"||!u)return;const h=p=>{B2(p)&&(d(p),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const JN=(n,e)=>e?n===e?!0:JN(n,e.parentElement):!1,Rw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,tU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nU(n){return tU.has(n.tagName)||n.tabIndex!==-1}const e0=new WeakSet;function U2(n){return e=>{e.key==="Enter"&&n(e)}}function w1(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const rU=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=U2(()=>{if(e0.has(t))return;w1(t,"down");const i=U2(()=>{w1(t,"up")}),a=()=>w1(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function F2(n){return Rw(n)&&!QN()}function iU(n,e,t={}){const[r,i,a]=ZN(n,t),o=c=>{const u=c.currentTarget;if(!F2(c))return;e0.add(u);const d=e(u,c),h=(x,_)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),e0.has(u)&&e0.delete(u),F2(x)&&typeof d=="function"&&d(x,{success:_})},p=x=>{h(x,u===window||u===document||t.useGlobalTarget||JN(u,x.target))},m=x=>{h(x,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),WN(c)&&(c.addEventListener("focus",d=>rU(d,i)),!nU(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function eM(n){return fN(n)&&"ownerSVGElement"in n}function aU(n){return eM(n)&&n.tagName==="svg"}const kr=n=>!!(n&&n.getVelocity),sU=[...$N,Yn,rl],oU=n=>sU.find(HN(n)),Dw=F.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function G2(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function lU(...n){return e=>{let t=!1;const r=n.map(i=>{const a=G2(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():G2(n[i],null)}}}}function cU(...n){return F.useCallback(lU(...n),n)}class uU extends F.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=WN(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function dU({children:n,isPresent:e,anchorX:t,root:r}){const i=F.useId(),a=F.useRef(null),o=F.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=F.useContext(Dw),u=cU(a,n?.ref);return F.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:m,right:x}=o.current;if(e||!a.current||!d||!h)return;const _=t==="left"?`left: ${m}`:`right: ${x}`;a.current.dataset.motionPopId=i;const E=document.createElement("style");c&&(E.nonce=c);const S=r??document.head;return S.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${_}px !important;
            top: ${p}px !important;
          }
        `),()=>{S.contains(E)&&S.removeChild(E)}},[e]),y.jsx(uU,{isPresent:e,childRef:a,sizeRef:o,children:F.cloneElement(n,{ref:u})})}const fU=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:c,root:u})=>{const d=_v(hU),h=F.useId();let p=!0,m=F.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:t,custom:i,onExitComplete:x=>{d.set(x,!0);for(const _ of d.values())if(!_)return;r&&r()},register:x=>(d.set(x,!1),()=>d.delete(x))}),[t,d,r]);return a&&p&&(m={...m}),F.useMemo(()=>{d.forEach((x,_)=>d.set(_,!1))},[t]),F.useEffect(()=>{!t&&!d.size&&r&&r()},[t]),o==="popLayout"&&(n=y.jsx(dU,{isPresent:t,anchorX:c,root:u,children:n})),y.jsx(wv.Provider,{value:m,children:n})};function hU(){return new Map}function tM(n=!0){const e=F.useContext(wv);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,a=F.useId();F.useEffect(()=>{if(n)return i(a)},[n]);const o=F.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,o]:[!0]}const Am=n=>n.key||"";function q2(n){const e=[];return F.Children.forEach(n,t=>{F.isValidElement(t)&&e.push(t)}),e}const Ko=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",root:u})=>{const[d,h]=tM(o),p=F.useMemo(()=>q2(n),[n]),m=o&&!d?[]:p.map(Am),x=F.useRef(!0),_=F.useRef(p),E=_v(()=>new Map),[S,T]=F.useState(p),[C,R]=F.useState(p);lw(()=>{x.current=!1,_.current=p;for(let V=0;V<C.length;V++){const I=Am(C[V]);m.includes(I)?E.delete(I):E.get(I)!==!0&&E.set(I,!1)}},[C,m.length,m.join("-")]);const j=[];if(p!==S){let V=[...p];for(let I=0;I<C.length;I++){const A=C[I],k=Am(A);m.includes(k)||(V.splice(I,0,A),j.push(A))}return a==="wait"&&j.length&&(V=j),R(q2(V)),T(p),null}const{forceRender:z}=F.useContext(sw);return y.jsx(y.Fragment,{children:C.map(V=>{const I=Am(V),A=o&&!d?!1:p===C||m.includes(I),k=()=>{if(E.has(I))E.set(I,!0);else return;let O=!0;E.forEach(B=>{B||(O=!1)}),O&&(z?.(),R(_.current),o&&h?.(),r&&r())};return y.jsx(fU,{isPresent:A,initial:!x.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:A?void 0:k,anchorX:c,children:V},I)})})},nM=F.createContext({strict:!1}),H2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ld={};for(const n in H2)ld[n]={isEnabled:e=>H2[n].some(t=>!!e[t])};function pU(n){for(const e in n)ld[e]={...ld[e],...n[e]}}const gU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function I0(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||gU.has(n)}let rM=n=>!I0(n);function mU(n){typeof n=="function"&&(rM=e=>e.startsWith("on")?!I0(e):n(e))}try{mU(require("@emotion/is-prop-valid").default)}catch{}function vU(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(rM(i)||t===!0&&I0(i)||!e&&!I0(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const Ev=F.createContext({});function Sv(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Uh(n){return typeof n=="string"||Array.isArray(n)}const kw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Nw=["initial",...kw];function Tv(n){return Sv(n.animate)||Nw.some(e=>Uh(n[e]))}function iM(n){return!!(Tv(n)||n.variants)}function yU(n,e){if(Tv(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Uh(t)?t:void 0,animate:Uh(r)?r:void 0}}return n.inherit!==!1?e:{}}function bU(n){const{initial:e,animate:t}=yU(n,F.useContext(Ev));return F.useMemo(()=>({initial:e,animate:t}),[$2(e),$2(t)])}function $2(n){return Array.isArray(n)?n.join(" "):n}const Fh={};function xU(n){for(const e in n)Fh[e]=n[e],mw(e)&&(Fh[e].isCSSVariable=!0)}function aM(n,{layout:e,layoutId:t}){return Vd.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Fh[n]||n==="opacity")}const _U={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wU=Od.length;function EU(n,e,t){let r="",i=!0;for(let a=0;a<wU;a++){const o=Od[a],c=n[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||t){const d=XN(c,Cw[o]);if(!u){i=!1;const h=_U[o]||o;r+=`${h}(${d}) `}t&&(e[o]=d)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function Mw(n,e,t){const{style:r,vars:i,transformOrigin:a}=n;let o=!1,c=!1;for(const u in e){const d=e[u];if(Vd.has(u)){o=!0;continue}else if(mw(u)){i[u]=d;continue}else{const h=XN(d,Cw[u]);u.startsWith("origin")?(c=!0,a[u]=h):r[u]=h}}if(e.transform||(o||t?r.transform=EU(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:h=0}=a;r.transformOrigin=`${u} ${d} ${h}`}}const Pw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function sM(n,e,t){for(const r in e)!kr(e[r])&&!aM(r,t)&&(n[r]=e[r])}function SU({transformTemplate:n},e){return F.useMemo(()=>{const t=Pw();return Mw(t,e,n),Object.assign({},t.vars,t.style)},[e])}function TU(n,e){const t=n.style||{},r={};return sM(r,t,n),Object.assign(r,SU(n,e)),r}function AU(n,e){const t={},r=TU(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const CU={offset:"stroke-dashoffset",array:"stroke-dasharray"},IU={offset:"strokeDashoffset",array:"strokeDasharray"};function RU(n,e,t=1,r=0,i=!0){n.pathLength=1;const a=i?CU:IU;n[a.offset]=it.transform(-r);const o=it.transform(e),c=it.transform(t);n[a.array]=`${o} ${c}`}function oM(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...c},u,d,h){if(Mw(n,c,d),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:m}=n;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),r!==void 0&&(p.scale=r),i!==void 0&&RU(p,i,a,o,!1)}const lM=()=>({...Pw(),attrs:{}}),cM=n=>typeof n=="string"&&n.toLowerCase()==="svg";function DU(n,e,t,r){const i=F.useMemo(()=>{const a=lM();return oM(a,e,cM(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};sM(a,n.style,n),i.style={...a,...i.style}}return i}const kU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ow(n){return typeof n!="string"||n.includes("-")?!1:!!(kU.indexOf(n)>-1||/[A-Z]/u.test(n))}function NU(n,e,t,{latestValues:r},i,a=!1){const c=(Ow(n)?DU:AU)(e,r,i,n),u=vU(e,typeof n=="string",a),d=n!==F.Fragment?{...u,...c,ref:t}:{},{children:h}=e,p=F.useMemo(()=>kr(h)?h.get():h,[h]);return F.createElement(n,{...d,children:p})}function Y2(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function Vw(n,e,t,r){if(typeof e=="function"){const[i,a]=Y2(r);e=e(t!==void 0?t:n.custom,i,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,a]=Y2(r);e=e(t!==void 0?t:n.custom,i,a)}return e}function t0(n){return kr(n)?n.get():n}function MU({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:PU(t,r,i,n),renderState:e()}}function PU(n,e,t,r){const i={},a=r(n,{});for(const m in a)i[m]=t0(a[m]);let{initial:o,animate:c}=n;const u=Tv(n),d=iM(n);e&&d&&!u&&n.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const p=h?c:o;if(p&&typeof p!="boolean"&&!Sv(p)){const m=Array.isArray(p)?p:[p];for(let x=0;x<m.length;x++){const _=Vw(n,m[x]);if(_){const{transitionEnd:E,transition:S,...T}=_;for(const C in T){let R=T[C];if(Array.isArray(R)){const j=h?R.length-1:0;R=R[j]}R!==null&&(i[C]=R)}for(const C in E)i[C]=E[C]}}}return i}const uM=n=>(e,t)=>{const r=F.useContext(Ev),i=F.useContext(wv),a=()=>MU(n,e,r,i);return t?a():_v(a)};function jw(n,e,t){const{style:r}=n,i={};for(const a in r)(kr(r[a])||e.style&&kr(e.style[a])||aM(a,n)||t?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const OU=uM({scrapeMotionValuesFromProps:jw,createRenderState:Pw});function dM(n,e,t){const r=jw(n,e,t);for(const i in n)if(kr(n[i])||kr(e[i])){const a=Od.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=n[i]}return r}const VU=uM({scrapeMotionValuesFromProps:dM,createRenderState:lM}),jU=Symbol.for("motionComponentSymbol");function Uu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function zU(n,e,t){return F.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Uu(t)&&(t.current=r))},[e])}const zw=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),LU="framerAppearId",fM="data-"+zw(LU),hM=F.createContext({});function BU(n,e,t,r,i){const{visualElement:a}=F.useContext(Ev),o=F.useContext(nM),c=F.useContext(wv),u=F.useContext(Dw).reducedMotion,d=F.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=F.useContext(hM);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&UU(d.current,t,i,p);const m=F.useRef(!1);F.useInsertionEffect(()=>{h&&m.current&&h.update(t,c)});const x=t[fM],_=F.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return lw(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),_.current&&h.animationState&&h.animationState.animateChanges())}),F.useEffect(()=>{h&&(!_.current&&h.animationState&&h.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),_.current=!1),h.enteringChildren=void 0)}),h}function UU(n,e,t,r){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:pM(n.parent)),n.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&Uu(c),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function pM(n){if(n)return n.options.allowProjection!==!1?n.projection:pM(n.parent)}function E1(n,{forwardMotionProps:e=!1}={},t,r){t&&pU(t);const i=Ow(n)?VU:OU;function a(c,u){let d;const h={...F.useContext(Dw),...c,layoutId:FU(c)},{isStatic:p}=h,m=bU(c),x=i(c,p);if(!p&&ow){GU();const _=qU(h);d=_.MeasureLayout,m.visualElement=BU(n,x,h,r,_.ProjectionNode)}return y.jsxs(Ev.Provider,{value:m,children:[d&&m.visualElement?y.jsx(d,{visualElement:m.visualElement,...h}):null,NU(n,c,zU(x,m.visualElement,u),x,p,e)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=F.forwardRef(a);return o[jU]=n,o}function FU({layoutId:n}){const e=F.useContext(sw).id;return e&&n!==void 0?e+"-"+n:n}function GU(n,e){F.useContext(nM).strict}function qU(n){const{drag:e,layout:t}=ld;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function HU(n,e){if(typeof Proxy>"u")return E1;const t=new Map,r=(a,o)=>E1(a,o,n,e),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(t.has(o)||t.set(o,E1(o,void 0,n,e)),t.get(o))})}function gM({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function $U({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function YU(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function S1(n){return n===void 0||n===1}function kx({scale:n,scaleX:e,scaleY:t}){return!S1(n)||!S1(e)||!S1(t)}function $l(n){return kx(n)||mM(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function mM(n){return K2(n.x)||K2(n.y)}function K2(n){return n&&n!=="0%"}function R0(n,e,t){const r=n-t,i=e*r;return t+i}function X2(n,e,t,r,i){return i!==void 0&&(n=R0(n,i,r)),R0(n,t,r)+e}function Nx(n,e=0,t=1,r,i){n.min=X2(n.min,e,t,r,i),n.max=X2(n.max,e,t,r,i)}function vM(n,{x:e,y:t}){Nx(n.x,e.translate,e.scale,e.originPoint),Nx(n.y,t.translate,t.scale,t.originPoint)}const W2=.999999999999,Q2=1.0000000000001;function KU(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let a,o;for(let c=0;c<i;c++){a=t[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Gu(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,vM(n,o)),r&&$l(a.latestValues)&&Gu(n,a.latestValues))}e.x<Q2&&e.x>W2&&(e.x=1),e.y<Q2&&e.y>W2&&(e.y=1)}function Fu(n,e){n.min=n.min+e,n.max=n.max+e}function Z2(n,e,t,r,i=.5){const a=gn(n.min,n.max,i);Nx(n,e,t,a,r)}function Gu(n,e){Z2(n.x,e.x,e.scaleX,e.scale,e.originX),Z2(n.y,e.y,e.scaleY,e.scale,e.originY)}function yM(n,e){return gM(YU(n.getBoundingClientRect(),e))}function XU(n,e,t){const r=yM(n,t),{scroll:i}=e;return i&&(Fu(r.x,i.offset.x),Fu(r.y,i.offset.y)),r}const J2=()=>({translate:0,scale:1,origin:0,originPoint:0}),qu=()=>({x:J2(),y:J2()}),eI=()=>({min:0,max:0}),Vn=()=>({x:eI(),y:eI()}),Mx={current:null},bM={current:!1};function WU(){if(bM.current=!0,!!ow)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Mx.current=n.matches;n.addEventListener("change",e),e()}else Mx.current=!1}const QU=new WeakMap;function ZU(n,e,t){for(const r in e){const i=e[r],a=t[r];if(kr(i))n.addValue(r,i);else if(kr(a))n.addValue(r,od(i,{owner:n}));else if(a!==i)if(n.hasValue(r)){const o=n.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=n.getStaticValue(r);n.addValue(r,od(o!==void 0?o:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const tI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class JU{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Tw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=ti.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,cn.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Tv(t),this.isVariantNode=iM(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const m in p){const x=p[m];u[m]!==void 0&&kr(x)&&x.set(u[m])}}mount(e){this.current=e,QU.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),bM.current||WU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Mx.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),nl(this.notifyUpdate),nl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Vd.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&cn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ld){const t=ld[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Vn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<tI.length;r++){const i=tI[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=ZU(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=od(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(dN(r)||hN(r))?r=parseFloat(r):!oU(r)&&rl.test(t)&&(r=KN(e,t)),this.setBaseTarget(e,kr(r)?r.get():r)),kr(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const a=Vw(this.props,t,this.presenceContext?.custom);a&&(r=a[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!kr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new hw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Iw.render(this.render)}}class xM extends JU{constructor(){super(...arguments),this.KeyframeResolver=XB}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;kr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function _M(n,{style:e,vars:t},r,i){const a=n.style;let o;for(o in e)a[o]=e[o];i?.applyProjectionStyles(a,r);for(o in t)a.setProperty(o,t[o])}function e8(n){return window.getComputedStyle(n)}class t8 extends xM{constructor(){super(...arguments),this.type="html",this.renderInstance=_M}readValueFromInstance(e,t){if(Vd.has(t))return this.projection?.isProjecting?Sx(t):pB(e,t);{const r=e8(e),i=(mw(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return yM(e,t)}build(e,t,r){Mw(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return jw(e,t,r)}}const wM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function n8(n,e,t,r){_M(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(wM.has(i)?i:zw(i),e.attrs[i])}class r8 extends xM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Vn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Vd.has(t)){const r=YN(t);return r&&r.default||0}return t=wM.has(t)?t:zw(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return dM(e,t,r)}build(e,t,r){oM(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){n8(e,t,r,i)}mount(e){this.isSVGTag=cM(e.tagName),super.mount(e)}}const i8=(n,e)=>Ow(n)?new r8(e):new t8(e,{allowProjection:n!==F.Fragment});function ed(n,e,t){const r=n.getProps();return Vw(r,e,t!==void 0?t:r.custom,n)}const Px=n=>Array.isArray(n);function a8(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,od(t))}function s8(n){return Px(n)?n[n.length-1]||0:n}function Lw(n,e){const t=ed(n,e);let{transitionEnd:r={},transition:i={},...a}=t||{};a={...a,...r};for(const o in a){const c=s8(a[o]);a8(n,o,c)}}function o8(n){return!!(kr(n)&&n.add)}function Ox(n,e){const t=n.getValue("willChange");if(o8(t))return t.add(e);if(!t&&zs.WillChange){const r=new zs.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function EM(n){return n.props[fM]}const l8=n=>n!==null;function c8(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(l8),a=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[a]}const u8={type:"spring",stiffness:500,damping:25,restSpeed:10},d8=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),f8={type:"keyframes",duration:.8},h8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},p8=(n,{keyframes:e})=>e.length>2?f8:Vd.has(n)?n.startsWith("scale")?d8(e[1]):u8:h8;function g8({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const Bw=(n,e,t,r={},i,a)=>o=>{const c=Aw(r,n)||{},u=c.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Ga(u);const h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:m=>{e.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:a?void 0:i};g8(c)||Object.assign(h,p8(n,h)),h.duration&&(h.duration=Ga(h.duration)),h.repeatDelay&&(h.repeatDelay=Ga(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Rx(h),h.delay===0&&(p=!0)),(zs.instantAnimations||zs.skipAnimations)&&(p=!0,Rx(h),h.delay=0),h.allowFlatten=!c.type&&!c.ease,p&&!a&&e.get()!==void 0){const m=c8(h.keyframes,c);if(m!==void 0){cn.update(()=>{h.onUpdate(m),h.onComplete()});return}}return c.isSync?new Sw(h):new jB(h)};function m8({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function SM(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:o,...c}=e;r&&(a=r);const u=[],d=i&&n.animationState&&n.animationState.getState()[i];for(const h in c){const p=n.getValue(h,n.latestValues[h]??null),m=c[h];if(m===void 0||d&&m8(d,h))continue;const x={delay:t,...Aw(a||{},h)},_=p.get();if(_!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===_&&!x.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const T=EM(n);if(T){const C=window.MotionHandoffAnimation(T,h,cn);C!==null&&(x.startTime=C,E=!0)}}Ox(n,h),p.start(Bw(h,p,m,n.shouldReduceMotion&&qN.has(h)?{type:!1}:x,n,E));const S=p.animation;S&&u.push(S)}return o&&Promise.all(u).then(()=>{cn.update(()=>{o&&Lw(n,o)})}),u}function TM(n,e,t,r=0,i=1){const a=Array.from(n).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=n.size,c=(o-1)*r;return typeof t=="function"?t(a,o):i===1?a*r:c-a*r}function Vx(n,e,t={}){const r=ed(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const a=r?()=>Promise.all(SM(n,r,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return v8(n,e,u,d,h,p,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,d]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(t.delay)])}function v8(n,e,t=0,r=0,i=0,a=1,o){const c=[];for(const u of n.variantChildren)u.notify("AnimationStart",e),c.push(Vx(u,e,{...o,delay:t+(typeof r=="function"?0:r)+TM(n.variantChildren,u,r,i,a)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function AM(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Vx(n,a,t));r=Promise.all(i)}else if(typeof e=="string")r=Vx(n,e,t);else{const i=typeof e=="function"?ed(n,e,t.custom):e;r=Promise.all(SM(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function CM(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const y8=Nw.length;function IM(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?IM(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<y8;t++){const r=Nw[t],i=n.props[r];(Uh(i)||i===!1)&&(e[r]=i)}return e}const b8=[...kw].reverse(),x8=kw.length;function _8(n){return e=>Promise.all(e.map(({animation:t,options:r})=>AM(n,t,r)))}function w8(n){let e=_8(n),t=nI(),r=!0;const i=u=>(d,h)=>{const p=ed(n,h,u==="exit"?n.presenceContext?.custom:void 0);if(p){const{transition:m,transitionEnd:x,..._}=p;d={...d,..._,...x}}return d};function a(u){e=u(n)}function o(u){const{props:d}=n,h=IM(n.parent)||{},p=[],m=new Set;let x={},_=1/0;for(let S=0;S<x8;S++){const T=b8[S],C=t[T],R=d[T]!==void 0?d[T]:h[T],j=Uh(R),z=T===u?C.isActive:null;z===!1&&(_=S);let V=R===h[T]&&R!==d[T]&&j;if(V&&r&&n.manuallyAnimateOnMount&&(V=!1),C.protectedKeys={...x},!C.isActive&&z===null||!R&&!C.prevProp||Sv(R)||typeof R=="boolean")continue;const I=E8(C.prevProp,R);let A=I||T===u&&C.isActive&&!V&&j||S>_&&j,k=!1;const O=Array.isArray(R)?R:[R];let B=O.reduce(i(T),{});z===!1&&(B={});const{prevResolvedValues:L={}}=C,M={...L,...B},X=H=>{A=!0,m.has(H)&&(k=!0,m.delete(H)),C.needsAnimating[H]=!0;const J=n.getValue(H);J&&(J.liveStyle=!1)};for(const H in M){const J=B[H],re=L[H];if(x.hasOwnProperty(H))continue;let fe=!1;Px(J)&&Px(re)?fe=!CM(J,re):fe=J!==re,fe?J!=null?X(H):m.add(H):J!==void 0&&m.has(H)?X(H):C.protectedKeys[H]=!0}C.prevProp=R,C.prevResolvedValues=B,C.isActive&&(x={...x,...B}),r&&n.blockInitialAnimation&&(A=!1);const Q=V&&I;A&&(!Q||k)&&p.push(...O.map(H=>{const J={type:T};if(typeof H=="string"&&r&&!Q&&n.manuallyAnimateOnMount&&n.parent){const{parent:re}=n,fe=ed(re,H);if(re.enteringChildren&&fe){const{delayChildren:U}=fe.transition||{};J.delay=TM(re.enteringChildren,n,U)}}return{animation:H,options:J}}))}if(m.size){const S={};if(typeof d.initial!="boolean"){const T=ed(n,Array.isArray(d.initial)?d.initial[0]:d.initial);T&&T.transition&&(S.transition=T.transition)}m.forEach(T=>{const C=n.getBaseTarget(T),R=n.getValue(T);R&&(R.liveStyle=!0),S[T]=C??null}),p.push({animation:S})}let E=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(p):Promise.resolve()}function c(u,d){if(t[u].isActive===d)return Promise.resolve();n.variantChildren?.forEach(p=>p.animationState?.setActive(u,d)),t[u].isActive=d;const h=o(u);for(const p in t)t[p].protectedKeys={};return h}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>t,reset:()=>{t=nI()}}}function E8(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!CM(e,n):!1}function Gl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nI(){return{animate:Gl(!0),whileInView:Gl(),whileHover:Gl(),whileTap:Gl(),whileDrag:Gl(),whileFocus:Gl(),exit:Gl()}}class hl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class S8 extends hl{constructor(e){super(e),e.animationState||(e.animationState=w8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Sv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let T8=0;class A8 extends hl{constructor(){super(...arguments),this.id=T8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const C8={animation:{Feature:S8},exit:{Feature:A8}};function Gh(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function _p(n){return{point:{x:n.pageX,y:n.pageY}}}const I8=n=>e=>Rw(e)&&n(e,_p(e));function mh(n,e,t,r){return Gh(n,e,I8(t),r)}const RM=1e-4,R8=1-RM,D8=1+RM,DM=.01,k8=0-DM,N8=0+DM;function Fr(n){return n.max-n.min}function M8(n,e,t){return Math.abs(n-e)<=t}function rI(n,e,t,r=.5){n.origin=r,n.originPoint=gn(e.min,e.max,n.origin),n.scale=Fr(t)/Fr(e),n.translate=gn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=R8&&n.scale<=D8||isNaN(n.scale))&&(n.scale=1),(n.translate>=k8&&n.translate<=N8||isNaN(n.translate))&&(n.translate=0)}function vh(n,e,t,r){rI(n.x,e.x,t.x,r?r.originX:void 0),rI(n.y,e.y,t.y,r?r.originY:void 0)}function iI(n,e,t){n.min=t.min+e.min,n.max=n.min+Fr(e)}function P8(n,e,t){iI(n.x,e.x,t.x),iI(n.y,e.y,t.y)}function aI(n,e,t){n.min=e.min-t.min,n.max=n.min+Fr(e)}function yh(n,e,t){aI(n.x,e.x,t.x),aI(n.y,e.y,t.y)}function zi(n){return[n("x"),n("y")]}const kM=({current:n})=>n?n.ownerDocument.defaultView:null,sI=(n,e)=>Math.abs(n-e);function O8(n,e){const t=sI(n.x,e.x),r=sI(n.y,e.y);return Math.sqrt(t**2+r**2)}class NM{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=A1(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,_=O8(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!_)return;const{point:E}=m,{timestamp:S}=_r;this.history.push({...E,timestamp:S});const{onStart:T,onMove:C}=this.handlers;x||(T&&T(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,m)},this.handlePointerMove=(m,x)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=T1(x,this.transformPagePoint),cn.update(this.updatePoint,!0)},this.handlePointerUp=(m,x)=>{this.end();const{onEnd:_,onSessionEnd:E,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=A1(m.type==="pointercancel"?this.lastMoveEventInfo:T1(x,this.transformPagePoint),this.history);this.startEvent&&_&&_(m,T),E&&E(m,T)},!Rw(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const c=_p(e),u=T1(c,this.transformPagePoint),{point:d}=u,{timestamp:h}=_r;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=t;p&&p(e,A1(u,this.history)),this.removeListeners=yp(mh(this.contextWindow,"pointermove",this.handlePointerMove),mh(this.contextWindow,"pointerup",this.handlePointerUp),mh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),nl(this.updatePoint)}}function T1(n,e){return e?{point:e(n.point)}:n}function oI(n,e){return{x:n.x-e.x,y:n.y-e.y}}function A1({point:n},e){return{point:n,delta:oI(n,MM(e)),offset:oI(n,V8(e)),velocity:j8(e,.1)}}function V8(n){return n[0]}function MM(n){return n[n.length-1]}function j8(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=MM(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Ga(e)));)t--;if(!r)return{x:0,y:0};const a=Fi(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function z8(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?gn(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?gn(t,n,r.max):Math.min(n,t)),n}function lI(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function L8(n,{top:e,left:t,bottom:r,right:i}){return{x:lI(n.x,t,i),y:lI(n.y,e,r)}}function cI(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function B8(n,e){return{x:cI(n.x,e.x),y:cI(n.y,e.y)}}function U8(n,e){let t=.5;const r=Fr(n),i=Fr(e);return i>r?t=zh(e.min,e.max-r,n.min):r>i&&(t=zh(n.min,n.max-i,e.min)),js(0,1,t)}function F8(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const jx=.35;function G8(n=jx){return n===!1?n=0:n===!0&&(n=jx),{x:uI(n,"left","right"),y:uI(n,"top","bottom")}}function uI(n,e,t){return{min:dI(n,e),max:dI(n,t)}}function dI(n,e){return typeof n=="number"?n:n[e]||0}const q8=new WeakMap;class H8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Vn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(_p(p).point)},o=(p,m)=>{const{drag:x,dragPropagation:_,onDragStart:E}=this.getProps();if(x&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=JB(x),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zi(T=>{let C=this.getAxisMotionValue(T).get()||0;if(qa.test(C)){const{projection:R}=this.visualElement;if(R&&R.layout){const j=R.layout.layoutBox[T];j&&(C=Fr(j)*(parseFloat(C)/100))}}this.originPoint[T]=C}),E&&cn.postRender(()=>E(p,m)),Ox(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},c=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:x,dragDirectionLock:_,onDirectionLock:E,onDrag:S}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:T}=m;if(_&&this.currentDirection===null){this.currentDirection=$8(T),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",m.point,T),this.updateAxis("y",m.point,T),this.visualElement.render(),S&&S(p,m)},u=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>zi(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new NM(e,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:kM(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&cn.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Cm(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=z8(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Uu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=L8(r.layoutBox,e):this.constraints=!1,this.elastic=G8(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&zi(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=F8(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Uu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=XU(r,i.root,this.visualElement.getTransformPagePoint());let o=B8(i.layout.layoutBox,a);if(t){const c=t($U(o));this.hasMutatedConstraints=!!c,c&&(o=gM(c))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=zi(h=>{if(!Cm(h,t,this.currentDirection))return;let p=u&&u[h]||{};o&&(p={min:0,max:0});const m=i?200:1e6,x=i?40:1e7,_={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...p};return this.startAxisValueAnimation(h,_)});return Promise.all(d).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Ox(this.visualElement,e),r.start(Bw(e,r,0,t,this.visualElement,!1))}stopAnimation(){zi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){zi(t=>{const{drag:r}=this.getProps();if(!Cm(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[t];a.set(e[t]-gn(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Uu(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};zi(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=U8({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),zi(o=>{if(!Cm(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];c.set(gn(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;q8.set(this.visualElement,this);const e=this.visualElement.current,t=mh(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Uu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),cn.read(r);const o=Gh(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(zi(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),t(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=jx,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function Cm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function $8(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Y8 extends hl{constructor(e){super(e),this.removeGroupControls=qi,this.removeListeners=qi,this.controls=new H8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qi}unmount(){this.removeGroupControls(),this.removeListeners()}}const fI=n=>(e,t)=>{n&&cn.postRender(()=>n(e,t))};class K8 extends hl{constructor(){super(...arguments),this.removePointerDownListener=qi}onPointerDown(e){this.session=new NM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:fI(e),onStart:fI(t),onMove:r,onEnd:(a,o)=>{delete this.session,i&&cn.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=mh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const n0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hI(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Wf={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(it.test(n))n=parseFloat(n);else return n;const t=hI(n,e.target.x),r=hI(n,e.target.y);return`${t}% ${r}%`}},X8={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=rl.parse(n);if(i.length>5)return r;const a=rl.createTransformer(n),o=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,u=t.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const d=gn(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),a(i)}};let C1=!1;class W8 extends F.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;xU(Q8),a&&(t.group&&t.group.add(a),r&&r.register&&i&&r.register(a),C1&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),n0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,C1=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||cn.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Iw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;C1=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function PM(n){const[e,t]=tM(),r=F.useContext(sw);return y.jsx(W8,{...n,layoutGroup:r,switchLayoutGroup:F.useContext(hM),isPresent:e,safeToRemove:t})}const Q8={borderRadius:{...Wf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wf,borderTopRightRadius:Wf,borderBottomLeftRadius:Wf,borderBottomRightRadius:Wf,boxShadow:X8};function Z8(n,e,t){const r=kr(n)?n:od(n);return r.start(Bw("",r,e,t)),r.animation}const J8=(n,e)=>n.depth-e.depth;class eF{constructor(){this.children=[],this.isDirty=!1}add(e){cw(this.children,e),this.isDirty=!0}remove(e){uw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(J8),this.isDirty=!1,this.children.forEach(e)}}function tF(n,e){const t=ti.now(),r=({timestamp:i})=>{const a=i-t;a>=e&&(nl(r),n(a-e))};return cn.setup(r,!0),()=>nl(r)}const OM=["TopLeft","TopRight","BottomLeft","BottomRight"],nF=OM.length,pI=n=>typeof n=="string"?parseFloat(n):n,gI=n=>typeof n=="number"||it.test(n);function rF(n,e,t,r,i,a){i?(n.opacity=gn(0,t.opacity??1,iF(r)),n.opacityExit=gn(e.opacity??1,0,aF(r))):a&&(n.opacity=gn(e.opacity??1,t.opacity??1,r));for(let o=0;o<nF;o++){const c=`border${OM[o]}Radius`;let u=mI(e,c),d=mI(t,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||gI(u)===gI(d)?(n[c]=Math.max(gn(pI(u),pI(d),r),0),(qa.test(d)||qa.test(u))&&(n[c]+="%")):n[c]=d}(e.rotate||t.rotate)&&(n.rotate=gn(e.rotate||0,t.rotate||0,r))}function mI(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const iF=VM(0,.5,_N),aF=VM(.5,.95,qi);function VM(n,e,t){return r=>r<n?0:r>e?1:t(zh(n,e,r))}function vI(n,e){n.min=e.min,n.max=e.max}function Vi(n,e){vI(n.x,e.x),vI(n.y,e.y)}function yI(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function bI(n,e,t,r,i){return n-=e,n=R0(n,1/t,r),i!==void 0&&(n=R0(n,1/i,r)),n}function sF(n,e=0,t=1,r=.5,i,a=n,o=n){if(qa.test(e)&&(e=parseFloat(e),e=gn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=gn(a.min,a.max,r);n===a&&(c-=e),n.min=bI(n.min,e,t,c,i),n.max=bI(n.max,e,t,c,i)}function xI(n,e,[t,r,i],a,o){sF(n,e[t],e[r],e[i],e.scale,a,o)}const oF=["x","scaleX","originX"],lF=["y","scaleY","originY"];function _I(n,e,t,r){xI(n.x,e,oF,t?t.x:void 0,r?r.x:void 0),xI(n.y,e,lF,t?t.y:void 0,r?r.y:void 0)}function wI(n){return n.translate===0&&n.scale===1}function jM(n){return wI(n.x)&&wI(n.y)}function EI(n,e){return n.min===e.min&&n.max===e.max}function cF(n,e){return EI(n.x,e.x)&&EI(n.y,e.y)}function SI(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function zM(n,e){return SI(n.x,e.x)&&SI(n.y,e.y)}function TI(n){return Fr(n.x)/Fr(n.y)}function AI(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class uF{constructor(){this.members=[]}add(e){cw(this.members,e),e.scheduleRender()}remove(e){if(uw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function dF(n,e,t){let r="";const i=n.x.translate/e.x,a=n.y.translate/e.y,o=t?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:m,skewX:x,skewY:_}=t;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),x&&(r+=`skewX(${x}deg) `),_&&(r+=`skewY(${_}deg) `)}const c=n.x.scale*e.x,u=n.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const I1=["","X","Y","Z"],fF=1e3;let hF=0;function R1(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function LM(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=EM(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",cn,!(i||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&LM(r)}function BM({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},c=e?.()){this.id=hF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(mF),this.nodes.forEach(xF),this.nodes.forEach(_F),this.nodes.forEach(vF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new eF)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new hw),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=eM(o)&&!aU(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),n){let h,p=0;const m=()=>this.root.updateBlockedByResize=!1;cn.read(()=>{p=window.innerWidth}),n(o,()=>{const x=window.innerWidth;x!==p&&(p=x,this.root.updateBlockedByResize=!0,h&&h(),h=tF(m,250),n0.hasAnimatedSinceResize&&(n0.hasAnimatedSinceResize=!1,this.nodes.forEach(RI)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||d.getDefaultTransition()||AF,{onLayoutAnimationStart:E,onLayoutAnimationComplete:S}=d.getProps(),T=!this.targetLayout||!zM(this.targetLayout,x),C=!p&&m;if(this.options.layoutRoot||this.resumeFrom||C||p&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...Aw(_,"layout"),onPlay:E,onComplete:S};(d.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(h,C)}else p||RI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),nl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(wF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&LM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(CI);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(II);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(bF),this.nodes.forEach(pF),this.nodes.forEach(gF)):this.nodes.forEach(II),this.clearAllSnapshots();const c=ti.now();_r.delta=js(0,1e3/60,c-_r.timestamp),_r.timestamp=c,_r.isProcessing=!0,v1.update.process(_r),v1.preRender.process(_r),v1.render.process(_r),_r.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Iw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yF),this.sharedNodes.forEach(EF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,cn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){cn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Fr(this.snapshot.measuredBox.x)&&!Fr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Vn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!jM(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(c||$l(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),CF(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Vn();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(IF))){const{scroll:d}=this.root;d&&(Fu(c.x,d.offset.x),Fu(c.y,d.offset.y))}return c}removeElementScroll(o){const c=Vn();if(Vi(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Vi(c,o),Fu(c.x,h.offset.x),Fu(c.y,h.offset.y))}return c}applyTransform(o,c=!1){const u=Vn();Vi(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!c&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Gu(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),$l(h.latestValues)&&Gu(u,h.latestValues)}return $l(this.latestValues)&&Gu(u,this.latestValues),u}removeTransform(o){const c=Vn();Vi(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!$l(d.latestValues))continue;kx(d.latestValues)&&d.updateSnapshot();const h=Vn(),p=d.measurePageBox();Vi(h,p),_I(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return $l(this.latestValues)&&_I(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_r.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=_r.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vn(),this.relativeTargetOrigin=Vn(),yh(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Vn(),this.targetWithTransforms=Vn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),P8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vi(this.target,this.layout.layoutBox),vM(this.target,this.targetDelta)):Vi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vn(),this.relativeTargetOrigin=Vn(),yh(this.relativeTargetOrigin,this.target,m.target),Vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||kx(this.parent.latestValues)||mM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===_r.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Vi(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;KU(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Vn());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(yI(this.prevProjectionDelta.x,this.projectionDelta.x),yI(this.prevProjectionDelta.y,this.projectionDelta.y)),vh(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!AI(this.projectionDelta.x,this.prevProjectionDelta.x)||!AI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qu(),this.projectionDelta=qu(),this.projectionDeltaWithTransform=qu()}setAnimationOrigin(o,c=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},p=qu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=Vn(),x=u?u.source:void 0,_=this.layout?this.layout.source:void 0,E=x!==_,S=this.getStack(),T=!S||S.members.length<=1,C=!!(E&&!T&&this.options.crossfade===!0&&!this.path.some(TF));this.animationProgress=0;let R;this.mixTargetDelta=j=>{const z=j/1e3;DI(p.x,o.x,z),DI(p.y,o.y,z),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yh(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SF(this.relativeTarget,this.relativeTargetOrigin,m,z),R&&cF(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Vn()),Vi(R,this.relativeTarget)),E&&(this.animationValues=h,rF(h,d,this.latestValues,z,C,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(nl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=cn.update(()=>{n0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=od(0)),this.currentAnimation=Z8(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(fF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:h}=o;if(!(!c||!u||!d)){if(this!==o&&this.layout&&d&&UM(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||Vn();const p=Fr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const m=Fr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}Vi(c,u),Gu(c,h),vh(this.projectionDeltaWithTransform,this.layoutCorrected,c,h)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new uF),this.sharedNodes.get(o).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const d={};u.z&&R1("z",o,d,this.animationValues);for(let h=0;h<I1.length;h++)R1(`rotate${I1[h]}`,o,d,this.animationValues),R1(`skew${I1[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=t0(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=t0(c?.pointerEvents)||""),this.hasProjected&&!$l(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=dF(this.projectionDeltaWithTransform,this.treeScale,h);u&&(p=u(h,p)),o.transform=p;const{x:m,y:x}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${x.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const _ in Fh){if(h[_]===void 0)continue;const{correct:E,applyTo:S,isCSSVariable:T}=Fh[_],C=p==="none"?h[_]:E(h[_],d);if(S){const R=S.length;for(let j=0;j<R;j++)o[S[j]]=C}else T?this.options.visualElement.renderState.vars[_]=C:o[_]=C}this.options.layoutId&&(o.pointerEvents=d===this?t0(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(CI),this.root.sharedNodes.clear()}}}function pF(n){n.updateLayout()}function gF(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:i}=n.options,a=e.source!==n.layout.source;i==="size"?zi(h=>{const p=a?e.measuredBox[h]:e.layoutBox[h],m=Fr(p);p.min=t[h].min,p.max=p.min+m}):UM(i,e.layoutBox,t)&&zi(h=>{const p=a?e.measuredBox[h]:e.layoutBox[h],m=Fr(t[h]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+m)});const o=qu();vh(o,t,e.layoutBox);const c=qu();a?vh(c,n.applyTransform(r,!0),e.measuredBox):vh(c,t,e.layoutBox);const u=!jM(o);let d=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const x=Vn();yh(x,e.layoutBox,p.layoutBox);const _=Vn();yh(_,t,m.layoutBox),zM(x,_)||(d=!0),h.options.layoutRoot&&(n.relativeTarget=_,n.relativeTargetOrigin=x,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function mF(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function vF(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function yF(n){n.clearSnapshot()}function CI(n){n.clearMeasurements()}function II(n){n.isLayoutDirty=!1}function bF(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function RI(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function xF(n){n.resolveTargetDelta()}function _F(n){n.calcProjection()}function wF(n){n.resetSkewAndRotation()}function EF(n){n.removeLeadSnapshot()}function DI(n,e,t){n.translate=gn(e.translate,0,t),n.scale=gn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function kI(n,e,t,r){n.min=gn(e.min,t.min,r),n.max=gn(e.max,t.max,r)}function SF(n,e,t,r){kI(n.x,e.x,t.x,r),kI(n.y,e.y,t.y,r)}function TF(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const AF={duration:.45,ease:[.4,0,.1,1]},NI=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),MI=NI("applewebkit/")&&!NI("chrome/")?Math.round:qi;function PI(n){n.min=MI(n.min),n.max=MI(n.max)}function CF(n){PI(n.x),PI(n.y)}function UM(n,e,t){return n==="position"||n==="preserve-aspect"&&!M8(TI(e),TI(t),.2)}function IF(n){return n!==n.root&&n.scroll?.wasRoot}const RF=BM({attachResizeListener:(n,e)=>Gh(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),D1={current:void 0},FM=BM({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!D1.current){const n=new RF({});n.mount(window),n.setOptions({layoutScroll:!0}),D1.current=n}return D1.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),DF={pan:{Feature:K8},drag:{Feature:Y8,ProjectionNode:FM,MeasureLayout:PM}};function OI(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,a=r[i];a&&cn.postRender(()=>a(e,_p(e)))}class kF extends hl{mount(){const{current:e}=this.node;e&&(this.unmount=eU(e,(t,r)=>(OI(this.node,r,"Start"),i=>OI(this.node,i,"End"))))}unmount(){}}class NF extends hl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yp(Gh(this.node.current,"focus",()=>this.onFocus()),Gh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function VI(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),a=r[i];a&&cn.postRender(()=>a(e,_p(e)))}class MF extends hl{mount(){const{current:e}=this.node;e&&(this.unmount=iU(e,(t,r)=>(VI(this.node,r,"Start"),(i,{success:a})=>VI(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const zx=new WeakMap,k1=new WeakMap,PF=n=>{const e=zx.get(n.target);e&&e(n)},OF=n=>{n.forEach(PF)};function VF({root:n,...e}){const t=n||document;k1.has(t)||k1.set(t,{});const r=k1.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(OF,{root:n,...e})),r[i]}function jF(n,e,t){const r=VF(e);return zx.set(n,t),r.observe(n),()=>{zx.delete(n),r.unobserve(n)}}const zF={some:0,all:1};class LF extends hl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:a}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:zF[i]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=d?h:p;m&&m(u)};return jF(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(BF(e,t))&&this.startObserver()}unmount(){}}function BF({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const UF={inView:{Feature:LF},tap:{Feature:MF},focus:{Feature:NF},hover:{Feature:kF}},FF={layout:{ProjectionNode:FM,MeasureLayout:PM}},GF={...C8,...UF,...DF,...FF},Hs=HU(GF,i8);function qF(n){n.values.forEach(e=>e.stop())}function Lx(n,e){[...e].reverse().forEach(r=>{const i=n.getVariant(r);i&&Lw(n,i),n.variantChildren&&n.variantChildren.forEach(a=>{Lx(a,e)})})}function HF(n,e){if(Array.isArray(e))return Lx(n,e);if(typeof e=="string")return Lx(n,[e]);Lw(n,e)}function $F(){const n=new Set,e={subscribe(t){return n.add(t),()=>void n.delete(t)},start(t,r){const i=[];return n.forEach(a=>{i.push(AM(a,t,{transitionOverride:r}))}),Promise.all(i)},set(t){return n.forEach(r=>{HF(r,t)})},stop(){n.forEach(t=>{qF(t)})},mount(){return()=>{e.stop()}}};return e}function YF(){const n=_v($F);return lw(n.mount,[]),n}const KF=YF;function XF(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.map(function(r){return r.split(" ").map(function(i){return i?""+n+i:""}).join(" ")}).join(" ")}function WF(n,e){return e.replace(/([^}{]*){/gm,function(t,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+n+"$1")+"{"})}function Ns(n,e){return function(t){t&&(n[e]=t)}}function GM(n,e,t){return function(r){r&&(n[e][t]=r)}}function jI(n,e){return function(t){var r=t.prototype;n.forEach(function(i){e(r,i)})}}function QF(n,e){return e===void 0&&(e={}),function(t,r){n.forEach(function(i){var a=e[i]||i;a in t||(t[a]=function(){for(var o,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var d=(o=this[r])[i].apply(o,c);return d===this[r]?this:d})})}}var ZF="function",JF="object",e7="string",t7="number",Uw="undefined",qM=typeof window!==Uw,n7=typeof document!==Uw&&document,r7=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Kn=1e-7,Im={cm:function(n){return n*96/2.54},mm:function(n){return n*96/254},in:function(n){return n*96},pt:function(n){return n*96/72},pc:function(n){return n*96/6},"%":function(n,e){return n*e/100},vw:function(n,e){return e===void 0&&(e=window.innerWidth),n/100*e},vh:function(n,e){return e===void 0&&(e=window.innerHeight),n/100*e},vmax:function(n,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),n/100*e},vmin:function(n,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),n/100*e}};function i7(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function D0(n,e,t,r){return(n*r+e*t)/(t+r)}function Av(n){return typeof n===Uw}function ga(n){return n&&typeof n===JF}function Wn(n){return Array.isArray(n)}function ri(n){return typeof n===e7}function cd(n){return typeof n===t7}function Fw(n){return typeof n===ZF}function a7(n,e){var t=n===""||n==" ",r=e===""||e==" ";return r&&t||n===e}function HM(n,e,t,r,i){var a=Gw(n,e,t);return a?t:s7(n,e,t+1,r,i)}function Gw(n,e,t){if(!n.ignore)return null;var r=e.slice(Math.max(t-3,0),t+3).join("");return new RegExp(n.ignore).exec(r)}function s7(n,e,t,r,i){for(var a=function(d){var h=e[d].trim();if(h===n.close&&!Gw(n,e,d))return{value:d};var p=d,m=ii(i,function(x){var _=x.open;return _===h});if(m&&(p=HM(m,e,d,r,i)),p===-1)return o=d,"break";d=p,o=d},o,c=t;c<r;++c){var u=a(c);if(c=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function qw(n,e){var t=ri(e)?{separator:e}:e,r=t.separator,i=r===void 0?",":r,a=t.isSeparateFirst,o=t.isSeparateOnlyOpenClose,c=t.isSeparateOpenClose,u=c===void 0?o:c,d=t.openCloseCharacters,h=d===void 0?r7:d,p=h.map(function(I){var A=I.open,k=I.close;return A===k?A:A+"|"+k}).join("|"),m="(\\s*"+i+"\\s*|"+p+"|\\s+)",x=new RegExp(m,"g"),_=n.split(x).filter(function(I){return I&&I!=="undefined"}),E=_.length,S=[],T=[];function C(){return T.length?(S.push(T.join("")),T=[],!0):!1}for(var R=function(I){var A=_[I].trim(),k=I,O=ii(h,function(M){var X=M.open;return X===A}),B=ii(h,function(M){var X=M.close;return X===A});if(O){if(k=HM(O,_,I,E,h),k!==-1&&u)return C()&&a||(S.push(_.slice(I,k+1).join("")),I=k,a)?(j=I,"break"):(j=I,"continue")}else if(B&&!Gw(B,_,I)){var L=i7(h);return L.splice(h.indexOf(B),1),{value:qw(n,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:L})}}else if(a7(A,i)&&!o)return C(),a?(j=I,"break"):(j=I,"continue");k===-1&&(k=E-1),T.push(_.slice(I,k+1).join("")),I=k,j=I},j,z=0;z<E;++z){var V=R(z);if(z=j,typeof V=="object")return V.value;if(V==="break")break}return T.length&&S.push(T.join("")),S}function il(n){return qw(n,"")}function sc(n){return qw(n,",")}function $M(n){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(n);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function wp(n){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(n);if(!e)return{prefix:"",unit:"",value:NaN};var t=e[1],r=e[2],i=e[3];return{prefix:t,unit:i,value:parseFloat(r)}}function o7(n){return n.replace(/[\s-_]+([^\s-_])/g,function(e,t){return t.toUpperCase()})}function r0(n,e){return n.replace(/([a-z])([A-Z])/g,function(t,r,i){return""+r+e+i.toLowerCase()})}function qh(){return Date.now?Date.now():new Date().getTime()}function Ls(n,e,t){t===void 0&&(t=-1);for(var r=n.length,i=0;i<r;++i)if(e(n[i],i,n))return i;return t}function ii(n,e,t){var r=Ls(n,e);return r>-1?n[r]:t}var YM=(function(){var n=qh(),e=qM&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(t){var r=qh(),i=setTimeout(function(){t(r-n)},1e3/60);return i}})(),l7=(function(){var n=qM&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return n?n.bind(window):function(e){clearTimeout(e)}})();function Bs(n){return Object.keys(n)}function c7(n){var e=Bs(n);return e.map(function(t){return n[t]})}function Xt(n,e){var t=wp(n),r=t.value,i=t.unit;if(ga(e)){var a=e[i];if(a){if(Fw(a))return a(r);if(Im[i])return Im[i](r,a)}}else if(i==="%")return r*e/100;return Im[i]?Im[i](r):r}function Bx(n,e,t){return Math.max(e,Math.min(n,t))}function zI(n,e,t,r){return r===void 0&&(r=n[0]/n[1]),[[ct(e[0],Kn),ct(e[0]/r,Kn)],[ct(e[1]*r,Kn),ct(e[1],Kn)]].filter(function(i){return i.every(function(a,o){var c=e[o],u=ct(c,Kn);return t?a<=c||a<=u:a>=c||a>=u})})[0]||n}function KM(n,e,t,r){if(!r)return n.map(function(x,_){return Bx(x,e[_],t[_])});var i=n[0],a=n[1],o=r===!0?i/a:r,c=zI(n,e,!1,o),u=c[0],d=c[1],h=zI(n,t,!0,o),p=h[0],m=h[1];return i<u||a<d?(i=u,a=d):(i>p||a>m)&&(i=p,a=m),[i,a]}function u7(n){for(var e=n.length,t=0,r=e-1;r>=0;--r)t+=n[r];return t}function Ux(n){for(var e=n.length,t=0,r=e-1;r>=0;--r)t+=n[r];return e?t/e:0}function jn(n,e){var t=e[0]-n[0],r=e[1]-n[1],i=Math.atan2(r,t);return i>=0?i:i+Math.PI*2}function d7(n){return[0,1].map(function(e){return Ux(n.map(function(t){return t[e]}))})}function LI(n){var e=d7(n),t=jn(e,n[0]),r=jn(e,n[1]);return t<r&&r-t<Math.PI||t>r&&r-t<-Math.PI?1:-1}function Ms(n,e){return Math.sqrt(Math.pow((e?e[0]:0)-n[0],2)+Math.pow((e?e[1]:0)-n[1],2))}function ct(n,e){if(!e)return n;var t=1/e;return Math.round(n/e)/t}function BI(n,e){return n.forEach(function(t,r){n[r]=ct(n[r],e)}),n}function f7(n){for(var e=[],t=0;t<n;++t)e.push(t);return e}function XM(n){return n.reduce(function(e,t){return e.concat(t)},[])}function WM(n,e){n.indexOf(e)===-1&&n.push(e)}function ir(n,e){return n.classList?n.classList.contains(e):!!n.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function QM(n,e){n.classList?n.classList.add(e):n.className+=" "+e}function ZM(n,e){if(n.classList)n.classList.remove(e);else{var t=new RegExp("(\\s|^)"+e+"(\\s|$)");n.className=n.className.replace(t," ")}}function xr(n,e,t,r){n.addEventListener(e,t,r)}function nr(n,e,t,r){n.removeEventListener(e,t,r)}function jd(n){return n?.ownerDocument||n7}function Hw(n){return jd(n).documentElement}function pl(n){return jd(n).body}function Xo(n){var e;return((e=n?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function JM(n){return n&&"postMessage"in n&&"blur"in n&&"self"in n}function zd(n){return ga(n)&&n.nodeName&&n.nodeType&&"ownerDocument"in n}var h7=(function(){function n(){this.keys=[],this.values=[]}var e=n.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,r){var i=this.keys,a=this.values,o=i.indexOf(t),c=o===-1?i.length:o;i[c]=t,a[c]=r},n})(),p7=(function(){function n(){this.object={}}var e=n.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,r){this.object[t]=r},n})(),g7=typeof Map=="function",m7=(function(){function n(){}var e=n.prototype;return e.connect=function(t,r){this.prev=t,this.next=r,t&&(t.next=this),r&&(r.prev=this)},e.disconnect=function(){var t=this.prev,r=this.next;t&&(t.next=r),r&&(r.prev=t)},e.getIndex=function(){for(var t=this,r=-1;t;)t=t.prev,++r;return r},n})();function v7(n,e){var t=[],r=[];return n.forEach(function(i){var a=i[0],o=i[1],c=new m7;t[a]=c,r[o]=c}),t.forEach(function(i,a){i.connect(t[a-1])}),n.filter(function(i,a){return!e[a]}).map(function(i,a){var o=i[0],c=i[1];if(o===c)return[0,0];var u=t[o],d=r[c-1],h=u.getIndex();u.disconnect(),d?u.connect(d,d.next):u.connect(void 0,t[0]);var p=u.getIndex();return[h,p]})}var y7=(function(){function n(t,r,i,a,o,c,u,d){this.prevList=t,this.list=r,this.added=i,this.removed=a,this.changed=o,this.maintained=c,this.changedBeforeAdded=u,this.fixed=d}var e=n.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=v7(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=t.filter(function(a,o){var c=a[0],u=a[1],d=r[o],h=d[0],p=d[1];if(c!==u)return i.push([h,p]),!0}),this.cachePureChanged=i},n})();function Ep(n,e,t){var r=g7?Map:t?p7:h7,i=t||function(C){return C},a=[],o=[],c=[],u=n.map(i),d=e.map(i),h=new r,p=new r,m=[],x=[],_={},E=[],S=0,T=0;return u.forEach(function(C,R){h.set(C,R)}),d.forEach(function(C,R){p.set(C,R)}),u.forEach(function(C,R){var j=p.get(C);typeof j>"u"?(++T,o.push(R)):_[j]=T}),d.forEach(function(C,R){var j=h.get(C);typeof j>"u"?(a.push(R),++S):(c.push([j,R]),T=_[R]||0,m.push([j-T,R-S]),x.push(R===j),j!==R&&E.push([j,R]))}),o.reverse(),new y7(n,e,a,o,E,c,m,x)}var b7=(function(){function n(t,r){t===void 0&&(t=[]),this.findKeyCallback=r,this.list=[].slice.call(t)}var e=n.prototype;return e.update=function(t){var r=[].slice.call(t),i=Ep(this.list,r,this.findKeyCallback);return this.list=r,i},n})(),Fx=function(n,e){return Fx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Fx(n,e)};function Sp(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Fx(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var La=function(){return La=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},La.apply(this,arguments)};function eP(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function UI(n,e,t){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function FI(n){var e=0;return n.map(function(t){return t==null?"$compat".concat(++e):"".concat(t)})}function tP(n){var e=[];return n.forEach(function(t){e=e.concat(Wn(t)?tP(t):t)}),e}function N1(n,e){if(!e)return n;for(var t in e)Av(n[t])&&(n[t]=e[t]);return n}function k0(n,e){if(n===e)return!1;for(var t in n)if(!(t in e))return!0;for(var t in e)if(n[t]!==e[t])return!0;return!1}function GI(n){var e=n.className,t=eP(n,["className"]);return e!=null&&(t.class=e),delete t.style,delete t.children,t}function qI(n){var e={},t={};for(var r in n)r.indexOf("on")===0?t[r]=n[r]:e[r]=n[r];return[e,t]}function Cv(n){if(!n)return null;var e=n.b;return zd(e)?e:Cv(n.c)}function nP(n){var e=n.parentNode;e&&e.removeChild(n)}function rP(n){n.forEach(function(e){e()})}function x7(){return this.constructor(this.props,this.context)}var $w=0,Iv=(function(){function n(t,r,i,a,o,c,u){u===void 0&&(u={}),this.t=t,this.d=r,this.k=i,this.i=a,this.c=o,this.ref=c,this.ps=u,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=n.prototype;return e.s=function(){return!0},e.u=function(t,r,i,a,o){var c=this,u=c.d,d=c7(r).filter(function(_){return _.$_req}),h=tP(d.map(function(_){return _.$_subs})),p=ii(h,function(_){return _.d===u});if(c.b&&!ri(i)&&!o&&!c.s(i.props,a)&&!p){var m=h.reduce(function(_,E){var S=E.d;return _[0]?_[0].d===S&&_.push(E):S>u&&_.push(E),_},[]);return m.forEach(function(_){Tp(_,_._ps,[_.o],t,r,!0)}),!1}c.o=i,c.ss(a);var x=c.ps;return ri(i)||(c.ps=i.props,c.ref=i.ref),Yw(this),c.r(t,r,c.b?x:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var t=this,r=t.ref,i=t.fr;r&&r(i?i.current:t.b)},n})();function iP(){return Object.__CROACT_CURRENT_INSTNACE__}function _7(){return $w}function w7(n){$w=n}function Yw(n){return Object.__CROACT_CURRENT_INSTNACE__=n,$w=0,n}var Kw=(function(){function n(t,r){t===void 0&&(t={}),this.props=t,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=n.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(t,r){return this.props!==t||this.state!==r},e.setState=function(t,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=La(La({},a.$_state),t),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,r){},e.componentWillUnmount=function(){},e.$_setState=function(t,r){var i=[],a=this.$_p,o=Tp(a.c,[a],[a.o],i,a._cs,La(La({},this.state),this.$_state),r);o&&(t&&i.push(t),rP(i),Yw(null))},n})(),aP=(function(n){Sp(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}var t=e.prototype;return t.shouldComponentUpdate=function(r,i){return k0(this.props,r)||k0(this.state,i)},e})(Kw);function sP(n){var e=function(t){e.current=t};return e.current=n,e}function E7(n){return n._fr=!0,n}function S7(n,e,t,r){var i,a;return!((i=n?.prototype)===null||i===void 0)&&i.render?a=new n(e,t):(a=new Kw(e,t),a.constructor=n,n._fr?(r.fr=sP(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=x7),a.$_p=r,a}var T7=(function(n){Sp(e,n);function e(r,i,a,o,c,u,d){d===void 0&&(d={});var h=n.call(this,r,i,a,o,c,u,N1(d,r.defaultProps))||this;return h.typ="comp",h._usefs=[],h._uefs=[],h._defs=[],h}var t=e.prototype;return t.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(N1(r,this.t.defaultProps),i||a.state)!==!1},t.r=function(r,i,a){var o,c,u=this,d=u.t;u.ps=N1(u.ps,u.t.defaultProps);var h=u.ps,p=!u.b,m=d.contextType,x=u.b,_=m?.get(u);u._cs=i,p?(x=S7(d,h,_,u),u.b=x):(x.props=h,x.context=_);var E=x.state;u._usefs=[],u._uefs=[];var S=x.render();((c=(o=S?.props)===null||o===void 0?void 0:o.children)===null||c===void 0?void 0:c.length)===0&&(S.props.children=u.ps.children);var T=La(La({},i),x.$_cs);Tp(u,u._ps,S?[S]:[],r,T),p?u._uefs.push(function(){m?.register(u),x.componentDidMount()}):u._uefs.push(function(){x.componentDidUpdate(a,E)}),r.push(function(){u._usefs.forEach(function(C){C()}),p?u.md():u.ud(),u._defs=u._uefs.map(function(C){return C()})})},t.ss=function(r){var i=this.b;!i||!r||(i.state=r)},t.un=function(){var r,i=this;i._ps.forEach(function(o){o.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(o){o&&o()}),i.b.componentWillUnmount()},e})(Iv);function A7(n,e,t){var r=Xw(GI(n),GI(e)),i=r.added,a=r.removed,o=r.changed;for(var c in i)t.setAttribute(c,i[c]);for(var u in o)t.setAttribute(u,o[u][1]);for(var d in a)t.removeAttribute(d)}function C7(n,e,t){var r=Xw(n,e),i=r.added,a=r.removed;for(var o in a)t.e(o,!0);for(var c in i)t.e(c)}function Xw(n,e){var t=Bs(n),r=Bs(e),i=Ep(t,r,function(u){return u}),a={},o={},c={};return i.added.forEach(function(u){var d=r[u];a[d]=e[d]}),i.removed.forEach(function(u){var d=t[u];o[d]=n[d]}),i.maintained.forEach(function(u){var d=u[0],h=t[d],p=[n[h],e[h]];n[h]!==e[h]&&(c[h]=p)}),{added:a,removed:o,changed:c}}function I7(n,e,t){var r=t.style,i=Xw(n,e),a=i.added,o=i.removed,c=i.changed;for(var u in a){var d=r0(u,"-");r.setProperty(d,a[u])}for(var u in c){var h=r0(u,"-");r.setProperty(h,c[u][1])}for(var u in o){var p=r0(u,"-");r.removeProperty(p)}}function R7(n){return n.replace(/^on/g,"").toLowerCase()}var D7=(function(n){Sp(e,n);function e(){var r=n!==null&&n.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var t=e.prototype;return t.e=function(r,i){var a=this,o=a._es,c=a.b,u=R7(r);i?(nr(c,u,o[r]),delete o[r]):(o[r]=function(d){var h,p;(p=(h=a.ps)[r])===null||p===void 0||p.call(h,d)},xr(c,u,o[r]))},t.s=function(r){return k0(this.ps,r)},t.r=function(r,i,a){var o,c=this,u=!c.b,d=c.ps;if(u){var h=Cv(c.c),p=!1;c._svg||c.t==="svg"?p=!0:p=h&&h.ownerSVGElement,c._svg=p;var m=(o=c._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],x=c.t;if(m)c._hyd=[].slice.call(m.children||[]);else{var _=jd(h);p?m=_.createElementNS("http://www.w3.org/2000/svg",x):m=_.createElement(x)}c.b=m}Tp(c,c._ps,d.children,r,i);var E=c.b,S=qI(a),T=S[0],C=S[1],R=qI(d),j=R[0],z=R[1];return A7(T,j,E),C7(C,z,c),I7(a.style||{},d.style||{},E),r.push(function(){u?c.md():c.ud()}),!0},t.un=function(){var r=this,i=r._es,a=r.b;for(var o in i)nr(a,o,i[o]);r._ps.forEach(function(c){c.un()}),r._es={},r._sel||nP(a)},e})(Iv);function Hh(n){if(!n||zd(n))return n;var e=n.$_p._ps;return e.length?Hh(e[0].b):null}function oP(n){if(n){if(n.b&&zd(n.b))return n;var e=n._ps;return e.length?oP(e[0]):null}}function da(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=e||{},a=i.key,o=i.ref,c=eP(i,["key","ref"]);return{type:n,key:a,ref:o,props:La(La({},c),{children:XM(t).filter(function(u){return u!=null&&u!==!1})})}}var lP=(function(n){Sp(e,n);function e(r,i){i===void 0&&(i=0);var a=n.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var t=e.prototype;return t.r=function(){return!0},t.un=function(){},e})(Iv),k7=(function(n){Sp(e,n);function e(){var r=n!==null&&n.apply(this,arguments)||this;return r.typ="text",r}var t=e.prototype;return t.r=function(r){var i,a=this,o=!a.b;if(o){var c=Cv(a.c),u=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=u||jd(c).createTextNode(a.t.replace("text_",""))}return r.push(function(){o?a.md():a.ud()}),!0},t.un=function(){nP(this.b)},e})(Iv);function N7(n,e,t){var r=t.map(function(u){return ri(u)?null:u.key}),i=FI(e.map(function(u){return u.k})),a=FI(r),o=Ep(i,a,function(u){return u});o.removed.forEach(function(u){e.splice(u,1)[0].un()}),o.ordered.forEach(function(u){var d=u[0],h=u[1],p=e.splice(d,1)[0];e.splice(h,0,p);var m=Hh(p.b),x=Hh(e[h+1]&&e[h+1].b);m&&m.parentNode.insertBefore(m,x)}),o.added.forEach(function(u){e.splice(u,0,HI(t[u],r[u],u,n))});var c=o.maintained.filter(function(u){u[0];var d=u[1],h=t[d],p=e[d],m=ri(h)?"text_".concat(h):h.type;return m!==p.t?(p.un(),e.splice(d,1,HI(h,r[d],d,n)),!0):(p.i=d,!1)});return UI(UI([],o.added,!0),c.map(function(u){u[0];var d=u[1];return d}))}function M7(n,e){for(var t=n._ps,r=t.length,i=e.i+1;i<r;++i){var a=Hh(t[i].b);if(a)return a}return null}function HI(n,e,t,r){var i=r.d+1;if(ri(n)||cd(n))return new k7("text_".concat(n),i,e,t,r,null,{});var a=n.type,o=typeof a=="string"?D7:T7;return new o(a,i,e,t,r,n.ref,n.props)}function Tp(n,e,t,r,i,a,o){var c=N7(n,e,t),u=n._hyd,d=e.filter(function(p,m){return p._hyd=u,p.u(r,i,t[m],a,o)});n.typ==="container"&&n._sel&&e.forEach(function(p){var m=oP(p);m&&(m._sel=!0)}),n._hyd=null;var h=Cv(n);return h&&c.reverse().forEach(function(p){var m=e[p],x=Hh(m.b);if(x&&h!==x&&!x.parentNode){var _=M7(n,m);h.insertBefore(x,_)}}),d.length>0}function P7(n,e,t,r){t===void 0&&(t=e.__CROACT__),r===void 0&&(r={});var i=!!t;t||(t=new lP(e));var a=[];return Tp(t,t._ps,n?[n]:[],a,r,void 0,void 0),rP(a),Yw(null),i||(e.__CROACT__=t),t}function $I(n,e,t){return!t&&n&&(t=new lP(e.parentElement),t._hyd=[e],t._sel=!0),P7(n,e,t),t}function cP(n){var e=iP(),t=e._hs||(e._hs=[]),r=_7(),i=t[r];if(w7(r+1),i){if(!k0(i.deps,n.deps))return i.updated=!1,i;t[r]=n}else t.push(n);return n.value=n.func(),n.updated=!0,n}function O7(n,e){var t=cP({func:n,deps:e});return t.value}function V7(n){return O7(function(){return sP(n)},[])}function uP(n,e,t){var r=iP(),i=cP({func:function(){return n},deps:e}),a=t?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=n(),i.effect}):a.push(function(){return i.effect})}function j7(n,e,t){uP(function(){n?.(e())},t,!0)}function Ww(n,e){for(var t=n.length,r=0;r<t;++r)if(e(n[r],r))return!0;return!1}function dP(n,e){for(var t=n.length,r=0;r<t;++r)if(e(n[r],r))return n[r];return null}function fP(n){var e=n;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function Qw(n,e){try{return new RegExp(n,"g").exec(e)}catch{return null}}function z7(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var n=navigator.userAgentData,e=n.brands||n.uaList;return!!(e&&e.length)}function L7(n,e){var t=Qw("("+n+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return t?t[3]:""}function Gx(n){return n.replace(/_/g,".")}function ih(n,e){var t=null,r="-1";return Ww(n,function(i){var a=Qw("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(t=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=L7(i.versionTest.toLowerCase(),e)||r),r=Gx(r),!0)}),{preset:t,version:r}}function Rm(n,e){var t={brand:"",version:"-1"};return Ww(n,function(r){var i=hP(e,r);return i?(t.brand=r.id,t.version=r.versionAlias||i.version,t.version!=="-1"):!1}),t}function hP(n,e){return dP(n,function(t){var r=t.brand;return Qw(""+e.test,r.toLowerCase())})}var pP=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],gP=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],qx=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],mP=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],vP=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function yP(n){return!!ih(mP,n).preset}function B7(n){var e=fP(n),t=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:yP(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=ih(pP,e),o=a.preset,c=a.version,u=ih(vP,e),d=u.preset,h=u.version,p=ih(gP,e);if(r.chromium=!!p.preset,r.chromiumVersion=p.version,!r.chromium){var m=ih(qx,e);r.webkit=!!m.preset,r.webkitVersion=m.version}return d&&(i.name=d.id,i.version=h,i.majorVersion=parseInt(h,10)),o&&(r.name=o.id,r.version=c,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:t,isHints:!1}}function U7(n){var e=navigator.userAgentData,t=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=t[0],a=(e.platform||navigator.platform).toLowerCase(),o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Rm(mP,t).brand||yP(fP())},c={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&Ww(qx,function(m){return hP(t,m)});var u=Rm(gP,t);if(o.chromium=!!u.brand,o.chromiumVersion=u.version||"-1",!o.chromium){var d=Rm(qx,t);o.webkit=!!d.brand,o.webkitVersion=d.version||"-1"}var h=dP(vP,function(m){return new RegExp(""+m.test,"g").exec(a)});c.name=h?h.id:"";{var p=Rm(pP,t);o.name=p.brand||o.name,o.version=p.brand&&n?n.uaFullVersion:p.version}return o.webkit&&(c.name=r?"ios":"mac"),c.name==="ios"&&o.webview&&(o.version="-1"),c.version=Gx(c.version),o.version=Gx(o.version),c.majorVersion=parseInt(c.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:c,isMobile:r,isHints:!0}}function F7(n){return z7()?U7():B7(n)}function G7(n,e,t,r,i,a){for(var o=0;o<i;++o){var c=t+o*i,u=r+o*i;n[c]+=n[u]*a,e[c]+=e[u]*a}}function q7(n,e,t,r,i){for(var a=0;a<i;++a){var o=t+a*i,c=r+a*i,u=n[o],d=e[o];n[o]=n[c],n[c]=u,e[o]=e[c],e[c]=d}}function H7(n,e,t,r,i){for(var a=0;a<r;++a){var o=t+a*r;n[o]/=i,e[o]/=i}}function bP(n,e,t){for(var r=n.slice(),i=0;i<t;++i)r[i*t+e-1]=0,r[(e-1)*t+i]=0;return r[(e-1)*(t+1)]=1,r}function Qa(n,e){e===void 0&&(e=Math.sqrt(n.length));for(var t=n.slice(),r=rn(e),i=0;i<e;++i){var a=e*i+i;if(!ct(t[a],Kn)){for(var o=i+1;o<e;++o)if(t[e*i+o]){q7(t,r,i,o,e);break}}if(!ct(t[a],Kn))return[];H7(t,r,i,e,t[a]);for(var o=0;o<e;++o){var c=o,u=o+i*e,d=t[u];!ct(d,Kn)||i===o||G7(t,r,c,i,e,-d)}}return r}function $7(n,e){e===void 0&&(e=Math.sqrt(n.length));for(var t=[],r=0;r<e;++r)for(var i=0;i<e;++i)t[i*e+r]=n[e*r+i];return t}function xP(n,e){e===void 0&&(e=Math.sqrt(n.length));for(var t=[],r=n[e*e-1],i=0;i<e-1;++i)t[i]=n[e*(e-1)+i]/r;return t[e-1]=0,t}function Y7(n,e){for(var t=rn(e),r=0;r<e-1;++r)t[e*(e-1)+r]=n[r]||0;return t}function vc(n,e){for(var t=n.slice(),r=n.length;r<e-1;++r)t[r]=0;return t[e-1]=1,t}function ma(n,e,t){if(e===void 0&&(e=Math.sqrt(n.length)),e===t)return n;for(var r=rn(t),i=Math.min(e,t),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)r[a*t+o]=n[a*e+o];r[(a+1)*t-1]=n[(a+1)*e-1],r[(t-1)*t+a]=n[(e-1)*e+a]}return r[t*t-1]=n[e*e-1],r}function N0(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=rn(n);return e.forEach(function(i){r=Wt(r,i,n)}),r}function Wt(n,e,t){t===void 0&&(t=Math.sqrt(n.length));var r=[],i=n.length/t,a=e.length/i;if(i){if(!a)return n}else return e;for(var o=0;o<t;++o)for(var c=0;c<a;++c){r[c*t+o]=0;for(var u=0;u<i;++u)r[c*t+o]+=n[u*t+o]*e[c*i+u]}return r}function Nt(n,e){for(var t=Math.min(n.length,e.length),r=n.slice(),i=0;i<t;++i)r[i]=r[i]+e[i];return r}function $e(n,e){for(var t=Math.min(n.length,e.length),r=n.slice(),i=0;i<t;++i)r[i]=r[i]-e[i];return r}function K7(n,e){return e===void 0&&(e=n.length===6),e?[n[0],n[1],0,n[2],n[3],0,n[4],n[5],1]:n}function _P(n,e){return e===void 0&&(e=n.length===9),e?[n[0],n[1],n[3],n[4],n[6],n[7]]:n}function Pr(n,e,t){t===void 0&&(t=e.length);var r=Wt(n,e,t),i=r[t-1];return r.map(function(a){return a/i})}function X7(n,e){return Wt(n,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function W7(n,e){return Wt(n,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Q7(n,e){return Wt(n,Cp(e,4))}function Dm(n,e){var t=e[0],r=t===void 0?1:t,i=e[1],a=i===void 0?1:i,o=e[2],c=o===void 0?1:o;return Wt(n,[r,0,0,0,0,a,0,0,0,0,c,0,0,0,0,1],4)}function Ap(n,e){return Pr(Cp(e,3),vc(n,3))}function M1(n,e){var t=e[0],r=t===void 0?0:t,i=e[1],a=i===void 0?0:i,o=e[2],c=o===void 0?0:o;return Wt(n,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,c,1],4)}function YI(n,e){return Wt(n,e,4)}function Cp(n,e){var t=Math.cos(n),r=Math.sin(n),i=rn(e);return i[0]=t,i[1]=r,i[e]=-r,i[e+1]=t,i}function rn(n){for(var e=n*n,t=[],r=0;r<e;++r)t[r]=r%(n+1)?0:1;return t}function Zw(n,e){for(var t=rn(e),r=Math.min(n.length,e-1),i=0;i<r;++i)t[(e+1)*i]=n[i];return t}function yc(n,e){for(var t=rn(e),r=Math.min(n.length,e-1),i=0;i<r;++i)t[e*(e-1)+i]=n[i];return t}function Jw(n,e,t,r,i,a,o,c){var u=n[0],d=n[1],h=e[0],p=e[1],m=t[0],x=t[1],_=r[0],E=r[1],S=i[0],T=i[1],C=a[0],R=a[1],j=o[0],z=o[1],V=c[0],I=c[1],A=[u,0,h,0,m,0,_,0,d,0,p,0,x,0,E,0,1,0,1,0,1,0,1,0,0,u,0,h,0,m,0,_,0,d,0,p,0,x,0,E,0,1,0,1,0,1,0,1,-S*u,-T*u,-C*h,-R*h,-j*m,-z*m,-V*_,-I*_,-S*d,-T*d,-C*p,-R*p,-j*x,-z*x,-V*E,-I*E],k=Qa(A,8);if(!k.length)return[];var O=Wt(k,[S,T,C,R,j,z,V,I],8);return O[8]=1,ma($7(O),3,4)}var bh=function(){return bh=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},bh.apply(this,arguments)};function Z7(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function $h(n,e){return e===void 0&&(e=0),Pu(ud(n,e))}function J7(n,e){var t=Pr(n,[e[0],e[1]||0,e[2]||0,1],4),r=t[3]||1;return[t[0]/r,t[1]/r,t[2]/r]}function Pu(n){var e=Z7();return n.forEach(function(t){var r=t.matrixFunction,i=t.functionValue;r&&(e=r(e,i))}),e}function ud(n,e){e===void 0&&(e=0);var t=Wn(n)?n:il(n);return t.map(function(r){var i=$M(r),a=i.prefix,o=i.value,c=null,u=a,d="";if(a==="translate"||a==="translateX"||a==="translate3d"){var h=ga(e)?bh(bh({},e),{"o%":e["%"]}):{"%":e,"o%":e},p=sc(o).map(function(M,X){return X===0&&"x%"in h?h["%"]=e["x%"]:X===1&&"y%"in h?h["%"]=e["y%"]:h["%"]=e["o%"],Xt(M,h)}),m=p[0],x=p[1],_=x===void 0?0:x,E=p[2],S=E===void 0?0:E;c=M1,d=[m,_,S]}else if(a==="translateY"){var T=ga(e)?bh({"%":e["y%"]},e):{"%":e},_=Xt(o,T);c=M1,d=[0,_,0]}else if(a==="translateZ"){var S=parseFloat(o);c=M1,d=[0,0,S]}else if(a==="scale"||a==="scale3d"){var C=sc(o).map(function(M){return parseFloat(M)}),R=C[0],j=C[1],z=j===void 0?R:j,V=C[2],I=V===void 0?1:V;c=Dm,d=[R,z,I]}else if(a==="scaleX"){var R=parseFloat(o);c=Dm,d=[R,1,1]}else if(a==="scaleY"){var z=parseFloat(o);c=Dm,d=[1,z,1]}else if(a==="scaleZ"){var I=parseFloat(o);c=Dm,d=[1,1,I]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var A=wp(o),k=A.unit,O=A.value,B=k==="rad"?O:O*Math.PI/180;a==="rotate"||a==="rotateZ"?(u="rotateZ",c=Q7):a==="rotateX"?c=X7:a==="rotateY"&&(c=W7),d=B}else if(a==="matrix3d")c=YI,d=sc(o).map(function(M){return parseFloat(M)});else if(a==="matrix"){var L=sc(o).map(function(M){return parseFloat(M)});c=YI,d=[L[0],L[1],0,0,L[2],L[3],0,0,0,0,1,0,L[4],L[5],0,1]}else u="";return{name:a,functionName:u,value:o,matrixFunction:c,functionValue:d}})}var Hx=function(n,e){return Hx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Hx(n,e)};function eG(n,e){Hx(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var wP=typeof Map=="function"?void 0:(function(){var n=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++n)}})(),EP=(function(n){eG(e,n);function e(t){return t===void 0&&(t=[]),n.call(this,t,wP)||this}return e})(b7);function tG(n,e){return Ep(n,e,wP)}var $x=function(){return $x=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},$x.apply(this,arguments)};function nG(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}var Rv=(function(){function n(){this._events={}}var e=n.prototype;return e.on=function(t,r){if(ga(t))for(var i in t)this.on(i,t[i]);else this._addEvent(t,r,{});return this},e.off=function(t,r){if(!t)this._events={};else if(ga(t))for(var i in t)this.off(i);else if(!r)this._events[t]=[];else{var a=this._events[t];if(a){var o=Ls(a,function(c){return c.listener===r});o>-1&&a.splice(o,1)}}return this},e.once=function(t,r){var i=this;return r&&this._addEvent(t,r,{once:!0}),new Promise(function(a){i._addEvent(t,a,{once:!0})})},e.emit=function(t,r){var i=this;r===void 0&&(r={});var a=this._events[t];if(!t||!a)return!0;var o=!1;return r.eventType=t,r.stop=function(){o=!0},r.currentTarget=this,nG(a).forEach(function(c){c.listener(r),c.once&&i.off(t,c.listener)}),!o},e.trigger=function(t,r){return r===void 0&&(r={}),this.emit(t,r)},e._addEvent=function(t,r,i){var a=this._events;a[t]=a[t]||[];var o=a[t];o.push($x({listener:r},i))},n})();var Yx=function(n,e){return Yx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Yx(n,e)};function rG(n,e){Yx(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Hu=function(){return Hu=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Hu.apply(this,arguments)};function iG(n){var e=n.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function KI(n,e){return n.addEventListener("scroll",e),function(){n.removeEventListener("scroll",e)}}function km(n){if(n){if(ri(n))return document.querySelector(n)}else return null;if(Fw(n))return n();if(n instanceof Element)return n;if("current"in n)return n.current;if("value"in n)return n.value}var aG=(function(n){rG(e,n);function e(){var r=n!==null&&n.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var t=e.prototype;return t.dragStart=function(r,i){var a=km(i.container);if(!a){this._flag=!1;return}var o=0,c=0,u=0,d=0;if(a===document.body)u=window.innerWidth,d=window.innerHeight;else{var h=a.getBoundingClientRect();o=h.top,c=h.left,u=h.width,d=h.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:o,left:c,width:u,height:d},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},t.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,o=r.clientY,c=i.threshold,u=c===void 0?0:c,d=this,h=d._startRect,p=d._startPos;this._currentOptions=i;var m=[0,0];return h.top>o-u?(p[1]>h.top||o<p[1])&&(m[1]=-1):h.top+h.height<o+u&&(p[1]<h.top+h.height||o>p[1])&&(m[1]=1),h.left>a-u?(p[0]>h.left||a<p[0])&&(m[0]=-1):h.left+h.width<a+u&&(p[0]<h.left+h.width||a>p[0])&&(m[0]=1),!m[0]&&!m[1]?!1:this._continueDrag(Hu(Hu({},i),{direction:m,inputEvent:r,isDrag:!0}))}},t.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,o=a===void 0?this._prevScrollPos:a,c=r.direction,u=r.throttleTime,d=u===void 0?0:u,h=r.inputEvent,p=r.isDrag,m=this._getScrollPosition(c||[0,0],r),x=m[0]-o[0],_=m[1]-o[1],E=c||[x?Math.abs(x)/x:0,_?Math.abs(_)/_:0];return this._prevScrollPos=m,this._lock=!1,!x&&!_?!1:(this.emit("move",{offsetX:E[0]?x:0,offsetY:E[1]?_:0,inputEvent:h}),d&&p&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},d)),!0)},t.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},t._getScrollPosition=function(r,i){var a=i.container,o=i.getScrollPosition,c=o===void 0?iG:o;return c({container:km(a),direction:r})},t._continueDrag=function(r){var i=this,a,o=r.container,c=r.direction,u=r.throttleTime,d=r.useScroll,h=r.isDrag,p=r.inputEvent;if(!(!this._flag||h&&this._isWait)){var m=qh(),x=Math.max(u+this._prevTime-m,0);if(x>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},x),!1;this._prevTime=m;var _=this._getScrollPosition(c,r);this._prevScrollPos=_,h&&(this._isWait=!0),d||(this._lock=!0);var E={container:km(o),direction:c,inputEvent:p};return(a=r.requestScroll)===null||a===void 0||a.call(r,E),this.emit("scroll",E),this._isWait=!1,d||this.checkScroll(Hu(Hu({},r),{prevScrollPos:_,direction:c,inputEvent:p}))}},t._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?KI:i,o=km(r.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=KI(window,this._onScroll):this._unregister=a(o,this._onScroll)}},t._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(Rv);function sG(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function ei(n){return ct(n,Kn)}function oG(n,e){return n.every(function(t,r){return ei(t-e[r])===0})}function lG(n,e){return!ei(n[0]-e[0])&&!ei(n[1]-e[1])}function SP(n){return n.length<3?0:Math.abs(u7(n.map(function(e,t){var r=n[t+1]||n[0];return e[0]*r[1]-r[0]*e[1]})))/2}function XI(n,e){var t=e.width,r=e.height,i=e.left,a=e.top,o=bc(n),c=o.minX,u=o.minY,d=o.maxX,h=o.maxY,p=t/(d-c),m=r/(h-u);return n.map(function(x){return[i+(x[0]-c)*p,a+(x[1]-u)*m]})}function bc(n){var e=n.map(function(r){return r[0]}),t=n.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,t),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,t)}}function Kx(n,e,t){var r=n[0],i=n[1],a=bc(e),o=a.minX,c=a.maxX,u=[[o,i],[c,i]],d=M0(u[0],u[1]),h=Xx(e),p=[];if(h.forEach(function(_){var E=M0(_[0],_[1]),S=_[0];if(oG(d,E))p.push({pos:n,line:_,type:"line"});else{var T=TP(eE(d,E),[u,_]);T.forEach(function(C){_.some(function(R){return lG(R,C)})?p.push({pos:C,line:_,type:"point"}):ei(S[1]-i)!==0&&p.push({pos:C,line:_,type:"intersection"})})}}),ii(p,function(_){return _[0]===r}))return!0;var m=0,x={};return p.forEach(function(_){var E=_.pos,S=_.type,T=_.line;if(!(E[0]>r))if(S==="intersection")++m;else{if(S==="line")return;if(S==="point"){var C=ii(T,function(z){return z[1]!==i}),R=x[E[0]],j=C[1]>i?1:-1;R?R!==j&&++m:x[E[0]]=j}}}),m%2===1}function M0(n,e){var t=n[0],r=n[1],i=e[0],a=e[1],o=i-t,c=a-r;Math.abs(o)<Kn&&(o=0),Math.abs(c)<Kn&&(c=0);var u=0,d=0,h=0;return o?c?(u=-c/o,d=1,h=-u*t-r):(d=1,h=-r):c&&(u=-1,h=t),[u,d,h]}function eE(n,e){var t=n[0],r=n[1],i=n[2],a=e[0],o=e[1],c=e[2],u=t===0&&a===0,d=r===0&&o===0,h=[];if(u&&d)return[];if(u){var p=-i/r,m=-c/o;return p!==m?[]:[[-1/0,p],[1/0,p]]}else if(d){var x=-i/t,_=-c/a;return x!==_?[]:[[x,-1/0],[x,1/0]]}else if(t===0){var E=-i/r,S=-(o*E+c)/a;h=[[S,E]]}else if(a===0){var E=-c/o,S=-(r*E+i)/t;h=[[S,E]]}else if(r===0){var S=-i/t,E=-(a*S+c)/o;h=[[S,E]]}else if(o===0){var S=-c/a,E=-(t*S+i)/r;h=[[S,E]]}else{var S=(r*c-o*i)/(o*t-r*a),E=-(t*S+i)/r;h=[[S,E]]}return h.map(function(T){return[T[0],T[1]]})}function TP(n,e){var t=e.map(function(p){return[0,1].map(function(m){return[Math.min(p[0][m],p[1][m]),Math.max(p[0][m],p[1][m])]})}),r=[];if(n.length===2){var i=n[0],a=i[0],o=i[1];if(ei(a-n[1][0])){if(!ei(o-n[1][1])){var d=Math.max.apply(Math,t.map(function(p){return p[0][0]})),h=Math.min.apply(Math,t.map(function(p){return p[0][1]}));if(ei(d-h)>0)return[];r=[[d,o],[h,o]]}}else{var c=Math.max.apply(Math,t.map(function(p){return p[1][0]})),u=Math.min.apply(Math,t.map(function(p){return p[1][1]}));if(ei(c-u)>0)return[];r=[[a,c],[a,u]]}}return r.length||(r=n.filter(function(p){var m=p[0],x=p[1];return t.every(function(_){return 0<=ei(m-_[0][0])&&0<=ei(_[0][1]-m)&&0<=ei(x-_[1][0])&&0<=ei(_[1][1]-x)})})),r.map(function(p){return[ei(p[0]),ei(p[1])]})}function Xx(n){return sG(n.slice(1),[n[0]]).map(function(e,t){return[n[t],e]})}function cG(n,e){var t=n.slice(),r=e.slice();LI(t)===-1&&t.reverse(),LI(r)===-1&&r.reverse();var i=Xx(t),a=Xx(r),o=i.map(function(h){return M0(h[0],h[1])}),c=a.map(function(h){return M0(h[0],h[1])}),u=[];o.forEach(function(h,p){var m=i[p],x=[];c.forEach(function(_,E){var S=eE(h,_),T=TP(S,[m,a[E]]);x.push.apply(x,T.map(function(C){return{index1:p,index2:E,pos:C,type:"intersection"}}))}),x.sort(function(_,E){return Ms(m[0],_.pos)-Ms(m[0],E.pos)}),u.push.apply(u,x),Kx(m[1],r)&&u.push({index1:p,index2:-1,pos:m[1],type:"inside"})}),a.forEach(function(h,p){if(Kx(h[1],t)){var m=!1,x=Ls(u,function(_){var E=_.index2;return E===p?(m=!0,!1):!!m});x===-1&&(m=!1,x=Ls(u,function(_){var E=_.index1,S=_.index2;return E===-1&&S+1===p?(m=!0,!1):!!m})),x===-1?u.push({index1:-1,index2:p,pos:h[1],type:"inside"}):u.splice(x,0,{index1:-1,index2:p,pos:h[1],type:"inside"})}});var d={};return u.filter(function(h){var p=h.pos,m=p[0]+"x"+p[1];return d[m]?!1:(d[m]=!0,!0)})}function uG(n,e){var t=cG(n,e);return t.map(function(r){var i=r.pos;return i})}function dG(n,e){var t=uG(n,e);return SP(t)}var Wx=function(n,e){return Wx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Wx(n,e)};function fG(n,e){Wx(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Hn=function(){return Hn=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Hn.apply(this,arguments)};function hG(n,e){var t=e[0]-n[0],r=e[1]-n[1],i=Math.atan2(r,t);return i>=0?i:i+Math.PI*2}function P1(n){return hG([n[0].clientX,n[0].clientY],[n[1].clientX,n[1].clientY])/Math.PI*180}function pG(n){return n.touches&&n.touches.length>=2}function Nm(n){return n?n.touches?mG(n.touches):[AP(n)]:[]}function gG(n){return n&&(n.type.indexOf("mouse")>-1||"button"in n)}function WI(n,e,t){var r=t.length,i=xh(n,r),a=i.clientX,o=i.clientY,c=i.originalClientX,u=i.originalClientY,d=xh(e,r),h=d.clientX,p=d.clientY,m=xh(t,r),x=m.clientX,_=m.clientY,E=a-h,S=o-p,T=a-x,C=o-_;return{clientX:c,clientY:u,deltaX:E,deltaY:S,distX:T,distY:C}}function O1(n){return Math.sqrt(Math.pow(n[0].clientX-n[1].clientX,2)+Math.pow(n[0].clientY-n[1].clientY,2))}function mG(n){for(var e=Math.min(n.length,2),t=[],r=0;r<e;++r)t.push(AP(n[r]));return t}function AP(n){return{clientX:n.clientX,clientY:n.clientY}}function xh(n,e){e===void 0&&(e=n.length);for(var t={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(n.length,e),i=0;i<r;++i){var a=n[i];t.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,t.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,t.clientX+=a.clientX,t.clientY+=a.clientY}return e?{clientX:t.clientX/e,clientY:t.clientY/e,originalClientX:t.originalClientX/e,originalClientY:t.originalClientY/e}:t}var V1=(function(){function n(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return n.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),P1(e)},n.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),P1(e)-P1(this.startClients)},n.prototype.getPosition=function(e,t){e===void 0&&(e=this.prevClients);var r=WI(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},n.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var t=this.prevClients,r=this.startClients,i=Math.min(this.length,t.length),a=[],o=0;o<i;++o)a[o]=WI([e[o]],[t[o]],[r[o]]);return a},n.prototype.getMovement=function(e){var t=this.movement;if(!e)return t;var r=xh(e,this.length),i=xh(this.prevClients,this.length),a=r.clientX-i.clientX,o=r.clientY-i.clientY;return Math.sqrt(a*a+o*o)+t},n.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),O1(e)},n.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),O1(e)/O1(this.startClients)},n.prototype.move=function(e,t){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=t}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=t})},n})(),QI=["textarea","input"],vG=(function(n){fG(e,n);function e(t,r){r===void 0&&(r={});var i=n.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(m,x){if(x===void 0&&(x=!0),!(!i.flag&&m.cancelable===!1)){var _=m.type.indexOf("drag")>=-1;if(!(i.flag&&_)){i._isDragAPI=!0;var E=i.options,S=E.container,T=E.pinchOutside,C=E.preventWheelClick,R=E.preventRightClick,j=E.preventDefault,z=E.checkInput,V=E.dragFocusedInput,I=E.preventClickEventOnDragStart,A=E.preventClickEventOnDrag,k=E.preventClickEventByCondition,O=i._useTouch,B=!i.flag;if(i._isSecondaryButton=m.which===3||m.button===2,C&&(m.which===2||m.button===1)||R&&(m.which===3||m.button===2))return i.stop(),!1;if(B){var L=i._window.document.activeElement,M=m.target;if(M){var X=M.tagName.toLowerCase(),Q=QI.indexOf(X)>-1,$=M.isContentEditable;if(Q||$){if(z||!V&&L===M)return!1;if(L&&(L===M||$&&L.isContentEditable&&L.contains(M)))if(V)M.blur();else return!1}else if((j||m.type==="touchstart")&&L){var H=L.tagName.toLowerCase();(L.isContentEditable||QI.indexOf(H)>-1)&&L.blur()}(I||A||k)&&xr(i._window,"click",i._onClick,!0)}i.clientStores=[new V1(Nm(m))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=x,i._dragFlag=!0,i._prevInputEvent=m,i.data={},i.doubleFlag=qh()-i.prevTime<200,i._isMouseEvent=gG(m),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var J=i._preventMouseEvent||i.emit("dragStart",Hn(Hn({data:i.data,datas:i.data,inputEvent:m,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:x,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){m.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));J===!1&&i.stop(),i._isMouseEvent&&i.flag&&j&&m.preventDefault()}if(!i.flag)return!1;var re=0;if(B?(i._attchDragEvent(),O&&T&&(re=setTimeout(function(){xr(S,"touchstart",i.onDragStart,{passive:!1})}))):O&&T&&nr(S,"touchstart",i.onDragStart),i.flag&&pG(m)){if(clearTimeout(re),B&&m.touches.length!==m.changedTouches.length)return;i.pinchFlag||i.onPinchStart(m)}}}},i.onDrag=function(m,x){if(i.flag){var _=i.options.preventDefault;!i._isMouseEvent&&_&&m.preventDefault(),i._prevInputEvent=m;var E=Nm(m),S=i.moveClients(E,m,!1);if(i._dragFlag){if(i.pinchFlag||S.deltaX||S.deltaY){var T=i._preventMouseEvent||i.emit("drag",Hn(Hn({},S),{isScroll:!!x,inputEvent:m}));if(T===!1){i.stop();return}}i.pinchFlag&&i.onPinch(m,E)}i.getCurrentStore().getPosition(E,!0)}},i.onDragEnd=function(m){if(i.flag){var x=i.options,_=x.pinchOutside,E=x.container,S=x.preventClickEventOnDrag,T=x.preventClickEventOnDragStart,C=x.preventClickEventByCondition,R=i.isDrag;(S||T||C)&&requestAnimationFrame(function(){i._allowClickEvent()}),!C&&!T&&S&&!R&&i._allowClickEvent(),i._useTouch&&_&&nr(E,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(m);var j=m?.touches?Nm(m):[],z=j.length;z===0||!i.options.keepDragging?i.flag=!1:i._addStore(new V1(j));var V=i._getPosition(),I=qh(),A=!R&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=R||A?0:I,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Hn({data:i.data,datas:i.data,isDouble:A,isDrag:R,isClick:!R,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:m,isTrusted:i._isTrusted},V)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){nr(i._window,"click",i._onClick,!0)},i._onClick=function(m){i._allowClickEvent(),i._allowMouseEvent();var x=i.options.preventClickEventByCondition;x?.(m)||(m.stopPropagation(),m.preventDefault())},i._onContextMenu=function(m){var x=i.options;x.preventRightClick?i.onDragEnd(m):m.preventDefault()},i._passCallback=function(){};var a=[].concat(t),o=a[0];i._window=JM(o)?o:Xo(o),i.options=Hn({checkInput:!1,container:o&&!("document"in o)?Xo(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var c=i.options,u=c.container,d=c.events,h=c.checkWindowBlur;if(i._useDrag=d.indexOf("drag")>-1,i._useTouch=d.indexOf("touch")>-1,i._useMouse=d.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(m){xr(m,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(m){xr(m,"mousedown",i.onDragStart),xr(m,"mousemove",i._passCallback)}),xr(u,"contextmenu",i._onContextMenu)),h&&xr(Xo(),"blur",i.onBlur),i._useTouch){var p={passive:!1};a.forEach(function(m){xr(m,"touchstart",i.onDragStart,p),xr(m,"touchmove",i._passCallback,p)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(t,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(t,r),a&&this.onDrag(i,!0))},e.prototype.move=function(t,r){var i=t[0],a=t[1],o=this.getCurrentStore(),c=o.prevClients;return this.moveClients(c.map(function(u){var d=u.clientX,h=u.clientY;return{clientX:d+i,clientY:h+a,originalClientX:d,originalClientY:h}}),r,!0)},e.prototype.triggerDragStart=function(t){this.onDragStart(t,!1)},e.prototype.setEventData=function(t){var r=this.data;for(var i in t)r[i]=t[i];return this},e.prototype.setEventDatas=function(t){return this.setEventData(t)},e.prototype.getCurrentEvent=function(t){return t===void 0&&(t=this._prevInputEvent),Hn(Hn({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var t=this,r=this.targets,i=this.options.container;this.off(),nr(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){nr(a,"dragstart",t.onDragStart)}),this._useMouse&&(r.forEach(function(a){nr(a,"mousedown",t.onDragStart)}),nr(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){nr(a,"touchstart",t.onDragStart)}),nr(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(t){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new V1(Nm(t));this.pinchFlag=!0,this._addStore(a);var o=this.emit("pinchStart",Hn(Hn({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:t,isTrusted:this._isTrusted,preventDefault:function(){t.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(t,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Hn(Hn({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:t,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(t){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Hn(Hn({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:t}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(t,r,i){var a=this._getPosition(t,i),o=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var c=!1;return!o&&this.isDrag&&(c=!0),Hn(Hn({data:this.data,datas:this.data},a),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:c})},e.prototype._addStore=function(t){this.clientStores.splice(0,0,t)},e.prototype._getPosition=function(t,r){var i=this.getCurrentStore(),a=i.getPosition(t,r),o=this.clientStores.slice(1).reduce(function(d,h){var p=h.getPosition();return d.distX+=p.distX,d.distY+=p.distY,d},a),c=o.distX,u=o.distY;return Hn(Hn({},a),{distX:c,distY:u})},e.prototype._attchDragEvent=function(){var t=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(xr(r,"dragover",this.onDrag,i),xr(t,"dragend",this.onDragEnd)),this._useMouse&&(xr(r,"mousemove",this.onDrag),xr(t,"mouseup",this.onDragEnd)),this._useTouch&&(xr(r,"touchmove",this.onDrag,i),xr(t,"touchend",this.onDragEnd,i),xr(t,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var t=this._window,r=this.options.container;this._isDragAPI&&(nr(r,"dragover",this.onDrag),nr(t,"dragend",this.onDragEnd)),this._useMouse&&(nr(r,"mousemove",this.onDrag),nr(t,"mouseup",this.onDragEnd)),this._useTouch&&(nr(r,"touchstart",this.onDragStart),nr(r,"touchmove",this.onDrag),nr(t,"touchend",this.onDragEnd),nr(t,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(Rv);function yG(n){for(var e=5381,t=n.length;t;)e=e*33^n.charCodeAt(--t);return e>>>0}var bG=yG;function xG(n){return bG(n).toString(36)}function _G(n){if(n&&n.getRootNode){var e=n.getRootNode();if(e.nodeType===11)return e}}function wG(n,e,t){return t.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?sc(a):[""]).map(function(o){var c=o.trim();return c.indexOf("@")===0?c:c.indexOf(":global")>-1?c.replace(/\:global/g,""):c.indexOf(":host")>-1?"".concat(c.replace(/\:host/g,".".concat(n))):c?".".concat(n," ").concat(c):".".concat(n)}).join(", ")+" {"})}function EG(n,e,t,r,i){var a=jd(r),o=a.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",n),o.setAttribute("data-styled-count","1"),t.nonce&&o.setAttribute("nonce",t.nonce),o.innerHTML=wG(n,e,t),(i||a.head||a.body).appendChild(o),o}function SG(n){var e="rCS"+xG(n);return{className:e,inject:function(t,r){r===void 0&&(r={});var i=_G(t),a=(i||t.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=EG(e,n,r,t,i);else{var o=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var c,u=parseFloat(a.getAttribute("data-styled-count"))||0;u<=1?(a.remove?a.remove():(c=a.parentNode)===null||c===void 0||c.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(u-1))}}}}}var Qx=function(){return Qx=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Qx.apply(this,arguments)};function TG(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function CP(n,e){var t=SG(e),r=t.className;return E7(function(i,a){var o=i.className,c=o===void 0?"":o;i.cspNonce;var u=TG(i,["className","cspNonce"]),d=V7();return j7(a,function(){return d.current},[]),uP(function(){var h=t.inject(d.current,{nonce:i.cspNonce});return function(){h.destroy()}},[]),da(n,Qx({ref:d,"data-styled-id":r,className:"".concat(c," ").concat(r)},u))})}var Zx=function(n,e){return Zx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Zx(n,e)};function Ip(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Zx(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var W=function(){return W=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},W.apply(this,arguments)};function AG(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function CG(n,e,t,r){var i=arguments.length,a=i<3?e:r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function IG(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a}function Ae(n,e,t){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function Rp(n,e){return W({events:[],props:[],name:n},e)}var RG=["n","w","s","e"],tE=["n","w","s","e","nw","ne","sw","se"];function DG(n,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*n,'px" height="').concat(32*n,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function kG(n){var e=DG(1,n),t=Math.round(n/45)*45%180,r="ns-resize";return t===135?r="nwse-resize":t===45?r="nesw-resize":t===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Ld=F7(),IP=Ld.browser.webkit,RP=IP&&(function(){var n=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(n.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),DP=Ld.browser.name,kP=parseInt(Ld.browser.version,10),NG=DP==="chrome",MG=Ld.browser.chromium,PG=parseInt(Ld.browser.chromiumVersion,10)||0,OG=NG&&kP>=109||MG&&PG>=109,VG=DP==="firefox",jG=parseInt(Ld.browser.webkitVersion,10)>=612||kP>=15,nE="moveable-",zG=tE.map(function(n){var e="",t="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return n.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),n.indexOf("s")>-1&&(e="top: 0px;",i="top"),n.indexOf("w")>-1&&(t="left: ".concat(a,";"),r="right"),n.indexOf("e")>-1&&(t="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(n,`"] {
        `).concat(t).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),LG=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(zG,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(n){return`
.direction[data-rotation="`.concat(n,'"], :global .view-control-rotation').concat(n,` {
`).concat(kG(n),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(RP?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),BG=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Jx=1e-4,Hr=1e-7,Mm=1e-9,e_=Math.pow(10,10),ZI=-e_,UG={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},rE={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},NP={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},MP=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Dp(n,e,t,r,i,a){var o,c;a===void 0&&(a="draggable");var u=(c=(o=e.gestos[a])===null||o===void 0?void 0:o.move(t,n.inputEvent))!==null&&c!==void 0?c:{},d=u.originalDatas||u.datas,h=d[a]||(d[a]={});return W(W({},u),{isPinch:!!r,parentEvent:!0,datas:h,originalDatas:n.originalDatas})}var dd=(function(){function n(e){var t;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(t={},t[e]={},t)}return n.prototype.dragStart=function(e,t){this.isDrag=!1,this.isFlag=!1;var r=t.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),W(W({},this.move(e,t.inputEvent)),{type:"dragstart"})},n.prototype.drag=function(e,t){return this.move([e[0]-this.prevX,e[1]-this.prevY],t)},n.prototype.move=function(e,t){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var o=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!o&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:t,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},n})();function td(n,e,t,r){var i=n.length===16,a=i?4:3,o=Vc(n,t,r,a),c=Z(o,4),u=Z(c[0],2),d=u[0],h=u[1],p=Z(c[1],2),m=p[0],x=p[1],_=Z(c[2],2),E=_[0],S=_[1],T=Z(c[3],2),C=T[0],R=T[1],j=Z(pn(n,e,a),2),z=j[0],V=j[1],I=Math.min(d,m,E,C),A=Math.min(h,x,S,R),k=Math.max(d,m,E,C),O=Math.max(h,x,S,R);d=d-I||0,m=m-I||0,E=E-I||0,C=C-I||0,h=h-A||0,x=x-A||0,S=S-A||0,R=R-A||0,z=z-I||0,V=V-A||0;var B=n[0],L=n[a+1],M=Br(B*L);return{left:I,top:A,right:k,bottom:O,origin:[z,V],pos1:[d,h],pos2:[m,x],pos3:[E,S],pos4:[C,R],direction:M}}function PP(n,e){var t=e.clientX,r=e.clientY,i=e.datas,a=n.state,o=a.moveableClientRect,c=a.rootMatrix,u=a.is3d,d=a.pos1,h=o.left,p=o.top,m=u?4:3,x=Z($e(pd(c,[t-h,r-p],m),d),2),_=x[0],E=x[1],S=Z(is({datas:i,distX:_,distY:E}),2),T=S[0],C=S[1];return[T,C]}function Oc(n,e){var t=e.datas,r=n.state,i=r.allMatrix,a=r.beforeMatrix,o=r.is3d,c=r.left,u=r.top,d=r.origin,h=r.offsetMatrix,p=r.targetMatrix,m=r.transformOrigin,x=o?4:3;t.is3d=o,t.matrix=i,t.targetMatrix=p,t.beforeMatrix=a,t.offsetMatrix=h,t.transformOrigin=m,t.inverseMatrix=Qa(i,x),t.inverseBeforeMatrix=Qa(a,x),t.absoluteOrigin=vc(Nt([c,u],d),x),t.startDragBeforeDist=Pr(t.inverseBeforeMatrix,t.absoluteOrigin,x),t.startDragDist=Pr(t.inverseMatrix,t.absoluteOrigin,x)}function FG(n){return td(n.datas.beforeTransform,[50,50],100,100).direction}function Dv(n,e,t){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,o=i.nextTransforms,c=o.length,u=i.nextTransformAppendedIndexes,d=-1;a===-1?(t==="translate"?d=0:t==="rotate"&&(d=Ls(o,function(x){return x.match(/scale\(/g)})),d===-1&&(d=o.length),r.transformIndex=d):ii(u,function(x){return x.index===a&&x.functionName===t})?d=a:d=a+u.filter(function(x){return x.index<a}).length;var h=pH(o,n.state,d),p=h.targetFunction,m=t==="rotate"?"rotateZ":t;r.beforeFunctionTexts=h.beforeFunctionTexts,r.afterFunctionTexts=h.afterFunctionTexts,r.beforeTransform=h.beforeFunctionMatrix,r.beforeTransform2=h.beforeFunctionMatrix2,r.targetTansform=h.targetFunctionMatrix,r.afterTransform=h.afterFunctionMatrix,r.afterTransform2=h.afterFunctionMatrix2,r.targetAllTransform=h.allFunctionMatrix,p.functionName===m?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):c>d&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Ae(Ae([],Z(u),!1),[{functionName:t,index:d,isAppend:!0}],!1))}function kv(n,e,t){return"".concat(n.beforeFunctionTexts.join(" ")," ").concat(n.isAppendTransform?t:e," ").concat(n.afterFunctionTexts.join(" "))}function GG(n){var e=n.datas,t=n.distX,r=n.distY,i=Z(VP({datas:e,distX:t,distY:r}),2),a=i[0],o=i[1],c=OP(e,Y7([a,o],4));return Pr(c,vc([0,0,0],4),4)}function OP(n,e,t){var r=n.beforeTransform,i=n.afterTransform,a=n.beforeTransform2,o=n.afterTransform2,c=n.targetAllTransform,u=t?Wt(c,e,4):Wt(e,c,4),d=Wt(Qa(t?a:r,4),u,4),h=Wt(d,Qa(t?o:i,4),4);return h}function VP(n){var e=n.datas,t=n.distX,r=n.distY,i=e.inverseBeforeMatrix,a=e.is3d,o=e.startDragBeforeDist,c=e.absoluteOrigin,u=a?4:3;return $e(Pr(i,Nt(c,[t,r]),u),o)}function is(n,e){var t=n.datas,r=n.distX,i=n.distY,a=t.inverseBeforeMatrix,o=t.inverseMatrix,c=t.is3d,u=t.startDragBeforeDist,d=t.startDragDist,h=t.absoluteOrigin,p=c?4:3;return $e(Pr(e?a:o,Nt(h,[r,i]),p),e?u:d)}function qG(n,e){var t=n.datas,r=n.distX,i=n.distY;t.beforeMatrix;var a=t.matrix,o=t.is3d;t.startDragBeforeDist;var c=t.startDragDist,u=t.absoluteOrigin,d=o?4:3;return $e(Pr(a,Nt(c,[r,i]),d),u)}function HG(n,e,t,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=t),a===void 0&&(a=[0,0]),n?n.map(function(o,c){var u=wp(o),d=u.value,h=u.unit,p=c?i:r,m=c?t:e;if(o==="%"||isNaN(d)){var x=p?a[c]/p:0;return m*x}else if(h!=="%")return d;return m*d/100}):a}function jP(n){var e=[];return n[1]>=0&&(n[0]>=0&&e.push(3),n[0]<=0&&e.push(2)),n[1]<=0&&(n[0]>=0&&e.push(1),n[0]<=0&&e.push(0)),e}function $G(n,e){return jP(e).map(function(t){return n[t]})}function j1(n,e){var t=(e+1)/2;return[D0(n[0][0],n[1][0],t,1-t),D0(n[0][1],n[1][1],t,1-t)]}function ar(n,e){var t=j1([n[0],n[1]],e[0]),r=j1([n[2],n[3]],e[0]);return j1([t,r],e[1])}function YG(n,e,t,r,i,a){var o=Vc(e,t,r,i),c=ar(o,a),u=n[0]-c[0],d=n[1]-c[1];return[u,d]}function kp(n,e,t,r){return Wt(n,wh(e,r,t),r)}function KG(n,e,t,r){var i=n.transformOrigin,a=n.offsetMatrix,o=n.is3d,c=o?4:3,u;if(ri(t)){var d=e.beforeTransform,h=e.afterTransform;r?u=ma($h(t),4,c):u=ma(Wt(Wt(d,$h([t]),4),h,4),4,c)}else u=t;return kp(a,u,i,c)}function XG(n,e){var t=n.transformOrigin,r=n.offsetMatrix,i=n.is3d,a=n.targetMatrix,o=n.targetAllTransform,c=i?4:3;return kp(r,Wt(o||a,Zw(e,c),c),t,c)}function Nv(n,e){var t=Bd(e);return{setTransform:function(r,i){i===void 0&&(i=-1),t.startTransforms=Wn(r)?r:il(r),t_(n,e,i)},setTransformIndex:function(r){t_(n,e,r)}}}function Mv(n,e,t){var r=Bd(e),i=r.startTransforms;t_(n,e,Ls(i,function(a){return a.indexOf("".concat(t,"("))===0}))}function t_(n,e,t){var r=Bd(e),i=e.datas;if(i.transformIndex=t,t!==-1){var a=r.startTransforms[t];if(a){var o=n.state,c=ud([a],{"x%":function(u){return u/100*o.offsetWidth},"y%":function(u){return u/100*o.offsetHeight}});i.startValue=c[0].functionValue}}}function iE(n,e){var t=Bd(n);t.nextTransforms=il(e)}function Bd(n){return n.originalDatas.beforeRenderable}function P0(n){var e=n.originalDatas.beforeRenderable;return e.nextTransforms}function Pm(n){return(P0(n)||[]).join(" ")}function Om(n){return Bd(n).nextStyle}function zP(n,e,t,r,i){iE(i,e);var a=Lr.drag(n,Dp(i,n.state,t,r)),o=a?a.transform:e;return W(W({transform:e,drag:a},Gr({transform:o},i)),{afterTransform:o})}function aE(n,e,t,r,i,a){var o=KG(n.state,i,e,a),c=ZG(n,t,r,o);return c}function LP(n,e,t,r,i,a,o){var c=aE(n,e,t,i,a,o),u=n.state,d=u.left,h=u.top,p=n.props.groupable,m=p?d:0,x=p?h:0,_=$e(r,c);return $e(_,[m,x])}function WG(n,e,t,r,i,a,o){var c=LP(n,e,t,r,i,a,o);return c}function QG(n,e,t){return[e?-1+n[0]/(e/2):0,t?-1+n[1]/(t/2):0]}function ZG(n,e,t,r){r===void 0&&(r=n.state.allMatrix);var i=n.state,a=i.width,o=i.height,c=i.is3d,u=c?4:3,d=[a/2*(1+e[0])+t[0],o/2*(1+e[1])+t[1]];return pn(r,d,u)}function JG(n,e,t){var r=t.fixedDirection,i=t.fixedPosition,a=t.fixedOffset;return LP(n,"rotate(".concat(e,"deg)"),r,i,a,t)}function eq(n,e,t,r,i,a){var o=n.props.groupable,c=n.state,u=c.transformOrigin,d=c.offsetMatrix,h=c.is3d,p=c.width,m=c.height,x=c.left,_=c.top,E=a.fixedDirection,S=a.nextTargetMatrix||c.targetMatrix,T=h?4:3,C=HG(i,e,t,p,m,u),R=o?x:0,j=o?_:0,z=kp(d,S,C,T),V=YG(r,z,e,t,T,E);return $e(V,[R,j])}function tq(n,e){return ar(Xi(n.state),e)}function nq(n,e){var t=n.targetGesto,r=n.controlGesto,i;return t?.isFlag()&&(i=t.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function rq(n){if(n&&n.getRootNode){var e=n.getRootNode();if(e.nodeType===11)return e}}function iq(n){var e=n("scale"),t=n("rotate"),r=n("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),t&&t!=="1"&&t!=="none"&&i.push("rotate(".concat(t,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function BP(n,e,t){for(var r=n,i=[],a=Hw(n)||pl(n),o=!t&&n===e||n===a,c=o,u=!1,d=3,h,p,m,x=!1,_=Kh(e,e,!0).offsetParent,E=1;r&&!c;){c=o;var S=ai(r),T=S("position"),C=u4(r),R=T==="fixed",j=iq(S),z=K7(tH(C)),V=void 0,I=!1,A=!1,k=0,O=0,B=0,L=0,M={hasTransform:!1,fixedContainer:null};R&&(x=!0,M=sH(r),_=M.fixedContainer);var X=z.length;!u&&(X===16||j.length)&&(u=!0,d=4,o_(i),m&&(m=ma(m,3,4))),u&&X===9&&(z=ma(z,3,4));var Q=aH(r,n),$=Q.tagName,H=Q.hasOffset,J=Q.isSVG,re=Q.origin,fe=Q.targetOrigin,U=Q.offset,Y=Z(U,2),te=Y[0],ae=Y[1];$==="svg"&&!r.ownerSVGElement&&m&&(i.push({type:"target",target:r,matrix:oH(r,d)}),i.push({type:"offset",target:r,matrix:rn(d)}));var ne=parseFloat(S("zoom"))||1;if(R)V=M.fixedContainer,I=!0;else{var se=Kh(r,e,!1,!0,S),me=se.offsetZoom;if(V=se.offsetParent,I=se.isEnd,A=se.isStatic,E*=me,(se.isCustomElement||me!==1)&&A)te-=V.offsetLeft,ae-=V.offsetTop;else if(VG||OG){var Te=se.parentSlotElement;if(Te){for(var Ce=V,Ne=0,xe=0;Ce&&rq(Ce);)Ne+=Ce.offsetLeft,xe+=Ce.offsetTop,Ce=Ce.offsetParent;te-=Ne,ae-=xe}}}if(IP&&!jG&&H&&!J&&A&&(T==="relative"||T==="static")&&(te-=V.offsetLeft,ae-=V.offsetTop,o=o||I),R)H&&M.hasTransform&&(B=V.clientLeft,L=V.clientTop);else if(H&&_!==V&&(k=V.clientLeft,O=V.clientTop),H&&V===a){var Ee=d4(r,!1);te+=Ee[0],ae+=Ee[1]}if(i.push({type:"target",target:r,matrix:wh(z,d,re)}),j.length&&(i.push({type:"offset",target:r,matrix:rn(d)}),i.push({type:"target",target:r,matrix:wh($h(j),d,re)})),H){var Qe=r===n,Oe=Qe?0:r.scrollLeft,Be=Qe?0:r.scrollTop;i.push({type:"offset",target:r,matrix:yc([te-Oe+k-B,ae-Be+O-L],d)})}else i.push({type:"offset",target:r,origin:re});if(ne!==1&&i.push({type:"zoom",target:r,matrix:wh(Zw([ne,ne],d),d,[0,0])}),m||(m=z),h||(h=re),p||(p=fe),c||R)break;r=V,o=I,(!t||r===a)&&(c=o)}return m||(m=rn(d)),h||(h=[0,0]),p||(p=[0,0]),{zoom:E,offsetContainer:_,matrixes:i,targetMatrix:m,transformOrigin:h,targetOrigin:p,is3d:u,hasFixed:x}}var Wl=null,Ql=null,$u=null;function fd(n){n?(window.Map&&(Wl=new Map,Ql=new Map),$u=[]):(Wl=null,$u=null,Ql=null)}function aq(n){var e=Ql?.get(n);if(e)return e;var t=Eh(n,!0);return Ql&&Ql.set(n,t),t}function sq(n,e){if($u){var t=ii($u,function(i){return i[0][0]==n&&i[0][1]==e});if(t)return t[1]}var r=BP(n,e,!0);return $u&&$u.push([[n,e],r]),r}function ai(n){var e=Wl?.get(n);if(!e){var t=Xo(n).getComputedStyle(n);if(!Wl)return function(a){return t[a]};e={style:t,cached:{}},Wl.set(n,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function fa(n,e,t){var r=t.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return n.moveables.map(function(o,c){return a[c]=a[c]||{},a[c][e]=a[c][e]||{},W(W({},t),{isRequestChild:!0,datas:a[c][e],originalDatas:a[c]})})}function z1(n,e,t,r,i,a,o){var c=!!t.match(/Start$/g),u=!!t.match(/End$/g),d=i.isPinch,h=i.datas,p=fa(n,e.name,i),m=n.moveables,x=[],_=p.map(function(E,S){var T=m[S],C=T.state,R=C.gestos,j=E;if(c)j=new dd(o).dragStart(r,E),x.push(j);else{if(R[o]||(R[o]=h.childGestos[S]),!R[o])return;j=Dp(E,C,r,d,a,o),x.push(j)}var z=e[t](T,W(W({},j),{parentFlag:!0}));return u&&(R[o]=null),z});return c&&(h.childGestos=m.map(function(E){return E.state.gestos[o]})),{eventParams:_,childEvents:x}}function Ps(n,e,t,r,i,a){i===void 0&&(i=function(h,p){return p});var o=!!t.match(/End$/g),c=fa(n,e.name,r),u=n.moveables,d=c.map(function(h,p){var m=u[p],x=h;x=i(m,h);var _=e[t](m,W(W({},x),{parentFlag:!0}));return o&&(m.state.gestos={}),_});return d}function O0(n,e,t,r){var i=t.fixedDirection,a=t.fixedPosition,o=r.datas.startPositions||Xi(e.state),c=ar(o,i),u=Z(Pr(Cp(-n.rotation/180*Math.PI,3),[c[0]-a[0],c[1]-a[1],1],3),2),d=u[0],h=u[1];return r.datas.originalX=d,r.datas.originalY=h,r}function UP(n,e,t,r){var i=n.getState(),a=i.renderPoses,o=i.rotation,c=i.direction,u=xc(n.props,e).zoom,d=_h(o/Math.PI*180),h={},p=n.renderState;p.renderDirectionMap||(p.renderDirectionMap={});var m=p.renderDirectionMap;t.forEach(function(_){var E=_.dir;h[E]=!0});var x=Br(c);return t.map(function(_){var E=_.data,S=_.classNames,T=_.dir,C=rE[T];if(!C||!h[T])return null;m[T]=!0;var R=(ct(d,15)+x*NP[T]+720)%180,j={};return Bs(E).forEach(function(z){j["data-".concat(z)]=E[z]}),r.createElement("div",W({className:Ge.apply(void 0,Ae(["control","direction",T,e],Z(S),!1)),"data-rotation":R,"data-direction":T},j,{key:"direction-".concat(T),style:L0.apply(void 0,Ae([o,u],Z(C.map(function(z){return a[z]})),!1))}))})}function FP(n,e,t,r){var i=xc(n.props,t),a=i.renderDirections,o=a===void 0?e:a,c=i.displayAroundControls;if(!o)return[];var u=o===!0?tE:o;return Ae(Ae([],Z(c?$P(n,r,t,u):[]),!1),Z(UP(n,t,u.map(function(d){return{data:{},classNames:[],dir:d}}),r)),!1)}function Yh(n,e,t,r,i,a){for(var o=[],c=6;c<arguments.length;c++)o[c-6]=arguments[c];var u=jn(t,r),d=e?ct(u/Math.PI*180,15)%180:-1;return n.createElement("div",{key:"line-".concat(a),className:Ge.apply(void 0,Ae(["line","direction",e?"edge":"",e],Z(o),!1)),"data-rotation":d,"data-line-key":a,"data-direction":e,style:sh(t,r,i,u)})}function GP(n,e,t,r,i){var a=t===!0?RG:t;return a.map(function(o,c){var u=Z(rE[o],2),d=u[0],h=u[1];if(h!=null)return Yh(n,o,r[d],r[h],i,"".concat(e,"Edge").concat(c),e)}).filter(Boolean)}function qP(n){return function(e,t){var r=xc(e.props,n).edge;return r&&(r===!0||r.length)?Ae(Ae([],Z(GP(t,n,r,e.getState().renderPoses,e.props.zoom)),!1),Z(oq(e,n,t)),!1):HP(e,n,t)}}function HP(n,e,t){return FP(n,tE,e,t)}function oq(n,e,t){return FP(n,["nw","ne","sw","se"],e,t)}function $P(n,e,t,r){var i=n.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=n.getState(),o=a.renderPoses,c=a.rotation,u=a.direction,d=i.renderDirectionMap,h=n.props.zoom,p=Br(u),m=c/Math.PI*180;return(r||Bs(d)).map(function(x){var _=rE[x];if(!_)return null;var E=(ct(m,15)+p*NP[x]+720)%180,S=["around-control"];return t&&S.push("direction",t),e.createElement("div",{className:Ge.apply(void 0,Ae([],Z(S),!1)),"data-rotation":E,"data-direction":x,key:"direction-around-".concat(x),style:L0.apply(void 0,Ae([c,h],Z(_.map(function(T){return o[T]})),!1))})})}function sE(n,e,t){var r=n||{},i=r.position,a=i===void 0?"client":i,o=r.left,c=o===void 0?-1/0:o,u=r.top,d=u===void 0?-1/0:u,h=r.right,p=h===void 0?1/0:h,m=r.bottom,x=m===void 0?1/0:m,_={position:a,left:c,top:d,right:p,bottom:x};return{vertical:JI(_,e,!0),horizontal:JI(_,t,!1)}}function Pv(n,e){var t=n.state,r=t.containerClientRect,i=r.clientHeight,a=r.clientWidth,o=r.clientLeft,c=r.clientTop,u=t.snapOffset,d=u.left,h=u.top,p=u.right,m=u.bottom,x=e||n.props.bounds||{},_=x.position||"client",E=_==="css",S=x.left,T=S===void 0?-1/0:S,C=x.top,R=C===void 0?-1/0:C,j=x.right,z=j===void 0?E?-1/0:1/0:j,V=x.bottom,I=V===void 0?E?-1/0:1/0:V;return E&&(z=a+p-d-z,I=i+m-h-I),{left:T+d-o,right:z+d-o,top:R+h-c,bottom:I+h-c}}function lq(n,e,t){var r=Pv(n),i=r.left,a=r.top,o=r.right,c=r.bottom,u=Z(t,2),d=u[0],h=u[1],p=Z($e(t,e),2),m=p[0],x=p[1];_e(m)<Hr&&(m=0),_e(x)<Hr&&(x=0);var _=x>0,E=m>0,S={isBound:!1,offset:0,pos:0},T={isBound:!1,offset:0,pos:0};if(m===0&&x===0)return{vertical:S,horizontal:T};if(m===0)_?c<h&&(T.pos=c,T.offset=h-c):a>h&&(T.pos=a,T.offset=h-a);else if(x===0)E?o<d&&(S.pos=o,S.offset=d-o):i>d&&(S.pos=i,S.offset=d-i);else{var C=x/m,R=t[1]-C*d,j=0,z=0,V=!1;E&&o<=d?(j=C*o+R,z=o,V=!0):!E&&d<=i&&(j=C*i+R,z=i,V=!0),V&&(j<a||j>c)&&(V=!1),V||(_&&c<=h?(j=c,z=(j-R)/C,V=!0):!_&&h<=a&&(j=a,z=(j-R)/C,V=!0)),V&&(S.isBound=!0,S.pos=z,S.offset=d-z,T.isBound=!0,T.pos=j,T.offset=h-j)}return{vertical:S,horizontal:T}}function JI(n,e,t){var r=n[t?"left":"top"],i=n[t?"right":"bottom"],a=Math.min.apply(Math,Ae([],Z(e),!1)),o=Math.max.apply(Math,Ae([],Z(e),!1)),c=[];return r+1>a&&c.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<o&&c.push({direction:"end",isBound:!0,offset:o-i,pos:i}),c.length||c.push({isBound:!1,offset:0,pos:0}),c.sort(function(u,d){return _e(d.offset)-_e(u.offset)})}function eR(n,e,t){var r=t?n.map(function(i){return Ap(i,t)}):n;return r.some(function(i){return i[0]<e.left&&_e(i[0]-e.left)>.1||i[0]>e.right&&_e(i[0]-e.right)>.1||i[1]<e.top&&_e(i[1]-e.top)>.1||i[1]>e.bottom&&_e(i[1]-e.bottom)>.1})}function cq(n,e,t){var r=Ki(n),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,o){return _e(a-n[t?0:1])-_e(o-n[t?0:1])}).map(function(a){return jn([0,0],t?[a,e]:[e,a])})}function uq(n,e,t,r,i){if(!n.props.bounds)return[];var a=i*Math.PI/180,o=Pv(n),c=o.left,u=o.top,d=o.right,h=o.bottom,p=c-r[0],m=d-r[0],x=u-r[1],_=h-r[1],E={left:p,top:x,right:m,bottom:_};if(!eR(t,E,0))return[];var S=[];return[[p,0],[m,0],[x,1],[_,1]].forEach(function(T){var C=Z(T,2),R=C[0],j=C[1];t.forEach(function(z){var V=jn([0,0],z);S.push.apply(S,Ae([],Z(cq(z,R,j).map(function(I){return a+I-V}).filter(function(I){return!eR(e,E,I)}).map(function(I){return ct(I*180/Math.PI,Hr)})),!1))})}),S}var dq=["left","right","center"],fq=["top","bottom","middle"],tR={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},al={start:"left",end:"right",center:"center"},sl={start:"top",end:"bottom",center:"middle"};function Yu(){return{left:!1,top:!1,right:!1,bottom:!1}}function Ud(n,e){var t=n.props,r=t.snappable,i=t.bounds,a=t.innerBounds,o=t.verticalGuidelines,c=t.horizontalGuidelines,u=t.snapGridWidth,d=t.snapGridHeight,h=n.state,p=h.guidelines,m=h.enableSnap;return!r||!m||e&&r!==!0&&r.indexOf(e)<0?!1:!!(u||d||i||a||p&&p.length||o&&o.length||c&&c.length)}function oE(n){return n===!1?{}:n===!0||!n?{left:!0,right:!0,top:!0,bottom:!0}:n}function hq(n,e){var t=oE(n),r={};for(var i in t)i in e&&t[i]&&(r[i]=e[i]);return r}function lE(n,e){var t=hq(n,e),r=fq.filter(function(a){return a in t}),i=dq.filter(function(a){return a in t});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return t[a]}),vertical:i.map(function(a){return t[a]})}}function pq(n,e,t){var r=pn(n,[e.clientLeft,e.clientTop],t);return[e.left+r[0],e.top+r[1]]}function gq(n){var e=Z(n,2),t=e[0],r=e[1],i=r[0]-t[0],a=r[1]-t[1];Math.abs(i)<Kn&&(i=0),Math.abs(a)<Kn&&(a=0);var o=0,c=0,u=0;return i?a?(o=-a/i,c=1,u=o*t[0]-t[1]):(c=1,u=-t[1]):(o=-1,u=t[0]),[o,c,u].map(function(d){return ct(d,Kn)})}var YP="snapRotationThreshold",KP="snapRotationDegrees",XP="snapHorizontalThreshold",WP="snapVerticalThreshold";function Ov(n,e,t,r,i,a,o){var c;r===void 0&&(r=[]),i===void 0&&(i=[]);var u=n.props,d=((c=n.state.snapThresholdInfo)===null||c===void 0?void 0:c.multiples)||[1,1],h=mR(o,u[XP],5),p=mR(a,u[WP],5);return QP(n.state.guidelines,e,t,r,i,h,p,d)}function QP(n,e,t,r,i,a,o,c){return{vertical:rR(n,"vertical",e,o*c[0],r),horizontal:rR(n,"horizontal",t,a*c[1],i)}}function mq(n,e,t){var r=Z(t,2),i=r[0],a=r[1],o=Z(e,2),c=o[0],u=o[1],d=Z($e(t,e),2),h=d[0],p=d[1],m=p>0,x=h>0;h=B0(h),p=B0(p);var _={isSnap:!1,offset:0,pos:0},E={isSnap:!1,offset:0,pos:0};if(h===0&&p===0)return{vertical:_,horizontal:E};var S=Ov(n,h?[i]:[],p?[a]:[],[],[],void 0,void 0),T=S.vertical,C=S.horizontal;T.posInfos.filter(function($){var H=$.pos;return x?H>=c:H<=c}),C.posInfos.filter(function($){var H=$.pos;return m?H>=u:H<=u}),T.isSnap=T.posInfos.length>0,C.isSnap=C.posInfos.length>0;var R=n_(T),j=R.isSnap,z=R.guideline,V=n_(C),I=V.isSnap,A=V.guideline,k=I?A.pos[1]:0,O=j?z.pos[0]:0;if(h===0)I&&(E.isSnap=!0,E.pos=A.pos[1],E.offset=a-E.pos);else if(p===0)j&&(_.isSnap=!0,_.pos=O,_.offset=i-O);else{var B=p/h,L=t[1]-B*i,M=0,X=0,Q=!1;j?(X=O,M=B*X+L,Q=!0):I&&(M=k,X=(M-L)/B,Q=!0),Q&&(_.isSnap=!0,_.pos=X,_.offset=i-X,E.isSnap=!0,E.pos=M,E.offset=a-M)}return{vertical:_,horizontal:E}}function qo(n){var e="";return n===-1||n==="top"||n==="left"?e="start":n===0||n==="center"||n==="middle"?e="center":(n===1||n==="right"||n==="bottom")&&(e="end"),e}function nR(n,e,t,r){var i=lE(n.props.snapDirections,e),a=Ov(n,i.vertical,i.horizontal,i.verticalNames.map(function(u){return qo(u)}),i.horizontalNames.map(function(u){return qo(u)}),t,r),o=qo(i.horizontalNames[a.horizontal.index]),c=qo(i.verticalNames[a.vertical.index]);return{vertical:W(W({},a.vertical),{direction:c}),horizontal:W(W({},a.horizontal),{direction:o})}}function n_(n){var e=n.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var t=n.posInfos[0],r=t.guidelineInfos[0],i=r.offset,a=r.dist,o=r.guideline;return{isSnap:e,offset:i,dist:a,pos:t.pos,guideline:o}}function rR(n,e,t,r,i){var a,o;if(i===void 0&&(i=[]),!n||!n.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var c=e==="vertical",u=c?0:1,d=t.map(function(p,m){var x=i[m]||"",_=n.map(function(E){var S=E.pos,T=p-S[u];return{offset:T,dist:_e(T),guideline:E,direction:x}}).filter(function(E){var S=E.guideline,T=E.dist,C=S.type;return!(C!==e||T>r)}).sort(function(E,S){return E.dist-S.dist});return{pos:p,index:m,guidelineInfos:_,direction:x}}).filter(function(p){return p.guidelineInfos.length>0}).sort(function(p,m){return p.guidelineInfos[0].dist-m.guidelineInfos[0].dist}),h=d.length>0;return{isSnap:h,index:h?d[0].index:-1,direction:(o=(a=d[0])===null||a===void 0?void 0:a.direction)!==null&&o!==void 0?o:"",posInfos:d}}function vq(n,e,t,r,i){var a=[];t[0]&&t[1]?a=[t,[-t[0],t[1]],[t[0],-t[1]]]:!t[0]&&!t[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(m,x,_){var E=_[x+1]||_[0];a.push(m),a.push([(m[0]+E[0])/2,(m[1]+E[1])/2])}):n.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],t):(a.push.apply(a,Ae([],Z($G([[-1,-1],[1,-1],[-1,-1],[1,1]],t)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var o=a.map(function(m){return ar(e,m)}),c=o.map(function(m){return m[0]}),u=o.map(function(m){return m[1]}),d=Ov(n,c,u,a.map(function(m){return qo(m[0])}),a.map(function(m){return qo(m[1])}),r,i),h=qo(a.map(function(m){return m[0]})[d.vertical.index]),p=qo(a.map(function(m){return m[1]})[d.horizontal.index]);return{vertical:W(W({},d.vertical),{direction:h}),horizontal:W(W({},d.horizontal),{direction:p})}}function ZP(n,e){var t=_e(n.offset),r=_e(e.offset);return n.isBound&&e.isBound?r-t:n.isBound?-1:e.isBound?1:n.isSnap&&e.isSnap?r-t:n.isSnap?-1:e.isSnap||t<Hr?1:r<Hr?-1:t-r}function V0(n,e){return n.slice().sort(function(t,r){var i=t.sign[e],a=r.sign[e],o=t.offset[e],c=r.offset[e];if(i){if(!a)return-1}else return 1;return ZP({isBound:t.isBound,isSnap:t.isSnap,offset:o},{isBound:r.isBound,isSnap:r.isSnap,offset:c})})[0]}function yq(n,e,t){var r=[];if(t)_e(e[0])!==1||_e(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[n[0],-n[1]]],[e,[-n[0],n[1]]]),r.push([e,n]);else if(n[0]&&n[1]||!n[0]&&!n[1]){var i=n[0]?n:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(c){var u=[o*i[0],c*i[1]];e[0]===u[0]&&e[1]===u[1]||r.push([e,u])})})}else if(n[0]){var a=_e(e[0])===1?[1]:[1,-1];a.forEach(function(o){r.push([[e[0],-1],[o*n[0],-1]],[[e[0],0],[o*n[0],0]],[[e[0],1],[o*n[0],1]])})}else if(n[1]){var a=_e(e[1])===1?[1]:[1,-1];a.forEach(function(c){r.push([[-1,e[1]],[-1,c*n[1]]],[[0,e[1]],[0,c*n[1]]],[[1,e[1]],[1,c*n[1]]])})}return r}function JP(n,e){var t=Ux([e[0][0],e[1][0]]),r=Ux([e[0][1],e[1][1]]);return{vertical:t<=n[0],horizontal:r<=n[1]}}function cE(n,e){var t=Z(e,2),r=t[0],i=t[1],a=i[0]-r[0],o=i[1]-r[1];_e(a)<Hr&&(a=0),_e(o)<Hr&&(o=0);var c,u;if(!a)c=r[0],u=n[0];else if(!o)c=r[1],u=n[1];else{var d=o/a;c=d*(n[0]-r[0])+r[1],u=n[1]}return c-u}function e4(n,e,t,r){return r===void 0&&(r=Hr),n.every(function(i){var a=cE(i,e),o=a<=0;return o===t||_e(a)<=r})}function iR(n,e,t,r,i){return i===void 0&&(i=0),r&&e-i<=n||!r&&n<=t+i?{isBound:!0,offset:r?e-n:t-n}:{isBound:!1,offset:0}}function bq(n,e){var t=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,o=e.lineConstants,c=n.props.innerBounds;if(!c)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=c.left,d=c.top,h=c.width,p=c.height,m=[[u,d],[u,d+p]],x=[[u,d],[u+h,d]],_=[[u+h,d],[u+h,d+p]],E=[[u,d+p],[u+h,d+p]];if(e4([[u,d],[u+h,d],[u,d+p],[u+h,d+p]],t,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var S=Ho(t,o,x,i),T=Ho(t,o,E,i),C=Ho(t,o,m,a),R=Ho(t,o,_,a),j=S.isBound&&T.isBound,z=S.isBound||T.isBound,V=C.isBound&&R.isBound,I=C.isBound||R.isBound,A=hd(S.offset,T.offset),k=hd(C.offset,R.offset),O=[0,0],B=!1,L=!1;return _e(k)<_e(A)?(O=[A,0],B=z,L=j):(O=[0,k],B=I,L=V),{isAllBound:L,isVerticalBound:z,isHorizontalBound:I,isBound:B,offset:O}}function Ho(n,e,t,r,i,a){var o=Z(e,2),c=o[0],u=o[1],d=n[0],h=t[0],p=t[1],m=B0(p[1]-h[1]),x=B0(p[0]-h[0]),_=u,E=c,S=-c/u;if(x){if(!m){if(a&&!_)return{isBound:!1,offset:0};if(E){var j=(h[1]-d[1])/S+d[0];return iR(j,h[0],p[0],r,i)}else{var C=h[1]-d[1],R=_e(C)<=(i||0);return{isBound:R,offset:R?C:0}}}}else{if(a&&!E)return{isBound:!1,offset:0};if(_){var T=S*(h[0]-d[0])+d[1];return iR(T,h[1],p[1],r,i)}else{var C=h[0]-d[0],R=_e(C)<=(i||0);return{isBound:R,offset:R?C:0}}}return{isBound:!1,offset:0}}function t4(n,e,t){return e.map(function(r){var i=bq(n,r),a=i.isBound,o=i.offset,c=i.isVerticalBound,u=i.isHorizontalBound,d=r.multiple,h=is({datas:t,distX:o[0],distY:o[1]}).map(function(p,m){return p*(d[m]?2/d[m]:0)});return{sign:d,isBound:a,isVerticalBound:c,isHorizontalBound:u,isSnap:!1,offset:h}})}function xq(n,e,t){var r,i=uE(n,e,[0,0],!1).map(function(m){return W(W({},m),{multiple:m.multiple.map(function(x){return _e(x)*2})})}),a=t4(n,i,t),o=V0(a,0),c=V0(a,1),u=0,d=0,h=o.isVerticalBound||c.isVerticalBound,p=o.isHorizontalBound||c.isHorizontalBound;return(h||p)&&(r=Z(qG({datas:t,distX:-o.offset[0],distY:-c.offset[1]}),2),u=r[0],d=r[1]),{vertical:{isBound:h,offset:u},horizontal:{isBound:p,offset:d}}}function _q(n,e){var t=[],r=n[0],i=n[1];return r&&i?t.push([[0,i*2],n,[-r,i]],[[r*2,0],n,[r,-i]]):r?(t.push([[r*2,0],[r,1],[r,-1]]),e&&t.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(t.push([[0,i*2],[1,i],[-1,i]]),e&&t.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):t.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),t}function uE(n,e,t,r){var i=n.state,a=i.allMatrix,o=i.is3d,c=Vc(a,100,100,o?4:3),u=ar(c,[0,0]);return _q(t,r).map(function(d){var h=Z(d,3),p=h[0],m=h[1],x=h[2],_=[ar(c,m),ar(c,x)],E=gq(_),S=JP(u,_),T=S.vertical,C=S.horizontal,R=cE(u,_)<=0;return{multiple:p,centerSign:R,verticalSign:T,horizontalSign:C,lineConstants:E,line:[ar(e,m),ar(e,x)]}})}function aR(n,e,t,r){var i=r?n.map(function(a){return Ap(a,r)}):n;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var o=cE(t,a)<=0;return!e4(e,a,o)})}function wq(n){var e=Z(n,2),t=e[0],r=e[1],i=r[0]-t[0],a=r[1]-t[1];if(!i)return _e(t[0]);if(!a)return _e(t[1]);var o=a/i;return _e((-o*t[0]+t[1])/Math.sqrt(Math.pow(o,2)+1))}function Eq(n){var e=Z(n,2),t=e[0],r=e[1],i=r[0]-t[0],a=r[1]-t[1];if(!i)return[t[0],0];if(!a)return[0,t[1]];var o=a/i,c=-o*t[0]+t[1];return[-c/(o+1/o),c/(o*o+1)]}function Sq(n,e,t,r,i){var a=n.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var c=a.left,u=a.top,d=a.width,h=a.height,p=c-r[0],m=c+d-r[0],x=u-r[1],_=u+h-r[1],E=[[p,x],[m,x],[p,_],[m,_]],S=ar(t,[0,0]);if(!aR(t,E,S,0))return[];var T=[],C=E.map(function(R){return[Ki(R),jn([0,0],R)]});return[[t[0],t[1]],[t[1],t[3]],[t[3],t[2]],[t[2],t[0]]].forEach(function(R){var j=jn([0,0],Eq(R)),z=wq(R);T.push.apply(T,Ae([],Z(C.filter(function(V){var I=Z(V,1),A=I[0];return A&&z<=A}).map(function(V){var I=Z(V,2),A=I[0],k=I[1],O=Math.acos(A?z/A:0),B=k+O,L=k-O;return[o+B-j,o+L-j]}).reduce(function(V,I){return V.push.apply(V,Ae([],Z(I),!1)),V},[]).filter(function(V){return!aR(e,E,S,V)}).map(function(V){return ct(V*180/Math.PI,Hr)})),!1))}),T}function Tq(n){var e=n.props.innerBounds,t=Yu();if(!e)return{boundMap:t,vertical:[],horizontal:[]};var r=n.getRect(),i=r.pos1,a=r.pos2,o=r.pos3,c=r.pos4,u=[i,a,o,c],d=ar(u,[0,0]),h=e.left,p=e.top,m=e.width,x=e.height,_=[[h,p],[h,p+x]],E=[[h,p],[h+m,p]],S=[[h+m,p],[h+m,p+x]],T=[[h,p+x],[h+m,p+x]],C=uE(n,u,[0,0],!1),R=[],j=[];return C.forEach(function(z){var V=z.line,I=z.lineConstants,A=JP(d,V),k=A.horizontal,O=A.vertical,B=Ho(V,I,E,O,1,!0),L=Ho(V,I,T,O,1,!0),M=Ho(V,I,_,k,1,!0),X=Ho(V,I,S,k,1,!0);B.isBound&&!t.top&&(R.push(p),t.top=!0),L.isBound&&!t.bottom&&(R.push(p+x),t.bottom=!0),M.isBound&&!t.left&&(j.push(h),t.left=!0),X.isBound&&!t.right&&(j.push(h+m),t.right=!0)}),{boundMap:t,horizontal:R,vertical:j}}function Aq(n,e,t,r){var i=e[0]-n[0],a=e[1]-n[1];if(_e(i)<Kn&&(i=0),_e(a)<Kn&&(a=0),!i)return r?[0,0]:[0,t];if(!a)return r?[t,0]:[0,0];var o=a/i,c=n[1]-o*n[0];if(r){var u=o*(e[0]+t)+c;return[t,u-e[1]]}else{var d=(e[1]+t-c)/o;return[d-e[0],t]}}function r_(n,e,t,r,i){var a=Aq(n,e,t,r);if(!a)return{isOutside:!1,offset:[0,0]};var o=Ms(n,e),c=Ms(a,n),u=Ms(a,e),d=c>o||u>o,h=Z(is({datas:i,distX:a[0],distY:a[1]}),2),p=h[0],m=h[1];return{offset:[p,m],isOutside:d}}function j0(n,e){return n.isBound?n.offset:e.isSnap?n_(e).offset:0}function Cq(n,e,t,r,i){var a=Z(e,2),o=a[0],c=a[1],u=Z(t,2),d=u[0],h=u[1],p=Z(r,2),m=p[0],x=p[1],_=Z(i,2),E=_[0],S=_[1],T=-E,C=-S;if(n&&o&&c){T=0,C=0;var R=[];if(d&&h?R.push([0,S],[E,0]):d?R.push([E,0]):h?R.push([0,S]):m&&x?R.push([0,S],[E,0]):m?R.push([E,0]):x&&R.push([0,S]),R.length){R.sort(function(I,A){return Ki($e([o,c],I))-Ki($e([o,c],A))});var j=R[0];if(j[0]&&_e(o)>Kn)T=-j[0],C=c*_e(o+T)/_e(o)-c;else if(j[1]&&_e(c)>Kn){var z=c;C=-j[1],T=o*_e(c+C)/_e(z)-o}if(n&&h&&d)if(_e(T)>Kn&&_e(T)<_e(E)){var V=_e(E)/_e(T);T*=V,C*=V}else if(_e(C)>Kn&&_e(C)<_e(S)){var V=_e(S)/_e(C);T*=V,C*=V}else T=hd(-E,T),C=hd(-S,C)}}else T=o||d?-E:0,C=c||h?-S:0;return[T,C]}function Iq(n,e,t,r,i,a){if(!Ud(n,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=hE(a.absolutePoses,[e,t]),c=Hi(o),u=c.left,d=c.right,h=c.top,p=c.bottom,m={horizontal:o.map(function(X){return X[1]}),vertical:o.map(function(X){return X[0]})},x=oE(n.props.snapDirections),_=lE(x,{left:u,right:d,top:h,bottom:p,center:(u+d)/2,middle:(h+p)/2}),E=Vv(n,i,_,m),S=E.vertical,T=E.horizontal,C=xq(n,o,a),R=C.vertical,j=C.horizontal,z=S.isSnap,V=T.isSnap,I=S.isBound||R.isBound,A=T.isBound||j.isBound,k=hd(S.offset,R.offset),O=hd(T.offset,j.offset),B=Z(Cq(r,[e,t],[I,A],[z,V],[k,O]),2),L=B[0],M=B[1];return[{isBound:I,isSnap:z,offset:L},{isBound:A,isSnap:V,offset:M}]}function Vv(n,e,t,r){r===void 0&&(r=t);var i=sE(Pv(n),r.vertical,r.horizontal),a=i.horizontal,o=i.vertical,c=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Ov(n,t.vertical,t.horizontal,void 0,void 0,void 0,void 0),u=c.horizontal,d=c.vertical,h=j0(a[0],u),p=j0(o[0],d),m=_e(h),x=_e(p);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:m,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:p,dist:x,bounds:o,snap:d}}}function sR(n,e,t,r,i,a,o){o===void 0&&(o=[1,1]);var c=sE(e,t,r),u=c.horizontal,d=c.vertical,h=QP(n,t,r,[],[],i,a,o),p=h.horizontal,m=h.vertical,x=j0(u[0],p),_=j0(d[0],m),E=_e(x),S=_e(_);return{horizontal:{isBound:u[0].isBound,isSnap:p.isSnap,snapIndex:p.index,offset:x,dist:E,bounds:u,snap:p},vertical:{isBound:d[0].isBound,isSnap:m.isSnap,snapIndex:m.index,offset:_,dist:S,bounds:d,snap:m}}}function Rq(n,e,t,r){var i=jn(n,e)/Math.PI*180,a=t.vertical,o=a.isBound,c=a.isSnap,u=a.dist,d=t.horizontal,h=d.isBound,p=d.isSnap,m=d.dist,x=i%180,_=x<3||x>177,E=x>87&&x<93;return m<u&&(o||c&&!E&&(!r||!_))?"vertical":h||p&&!_&&(!r||!E)?"horizontal":""}function Dq(n,e,t,r,i,a){return t.map(function(o){var c=Z(o,2),u=c[0],d=c[1],h=ar(e,u),p=ar(e,d),m=r?kq(n,h,p,i):Vv(n,i,{vertical:[p[0]],horizontal:[p[1]]}),x=m.horizontal,_=x.offset,E=x.isBound,S=x.isSnap,T=m.vertical,C=T.offset,R=T.isBound,j=T.isSnap,z=$e(d,u);if(!C&&!_)return{isBound:R||E,isSnap:j||S,sign:z,offset:[0,0]};var V=Rq(h,p,m,r);if(!V)return{sign:z,isBound:!1,isSnap:!1,offset:[0,0]};var I=V==="vertical",A=[0,0];return!r&&_e(d[0])===1&&_e(d[1])===1&&u[0]!==d[0]&&u[1]!==d[1]?A=is({datas:a,distX:-C,distY:-_}):A=r_(h,p,-(I?C:_),I,a).offset,A=A.map(function(k,O){return k*(z[O]?2/z[O]:0)}),{sign:z,isBound:I?R:E,isSnap:I?j:S,offset:A}})}function oR(n,e){return n.isBound?n.offset:e.isSnap?e.offset:0}function kq(n,e,t,r){var i=lq(n,e,t),a=i.horizontal,o=i.vertical,c=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:mq(n,e,t),u=c.horizontal,d=c.vertical,h=oR(a,u),p=oR(o,d),m=_e(h),x=_e(p);return{horizontal:{isBound:a.isBound,isSnap:u.isSnap,offset:h,dist:m},vertical:{isBound:o.isBound,isSnap:d.isSnap,offset:p,dist:x}}}function Nq(n,e,t,r,i){var a=[-t[0],-t[1]],o=n.state,c=o.width,u=o.height,d=n.props.bounds,h=1/0,p=1/0;if(d){var m=[[t[0],-t[1]],[-t[0],t[1]]],x=d.left,_=x===void 0?-1/0:x,E=d.top,S=E===void 0?-1/0:E,T=d.right,C=T===void 0?1/0:T,R=d.bottom,j=R===void 0?1/0:R;m.forEach(function(z){var V=z[0]!==a[0],I=z[1]!==a[1],A=ar(e,z),k=jn(r,A)*360/Math.PI;if(I){var O=A.slice();(_e(k-360)<2||_e(k-180)<2)&&(O[1]=r[1]);var B=r_(r,O,(r[1]<A[1]?j:S)-A[1],!1,i),L=Z(B.offset,2),M=L[1],X=B.isOutside;isNaN(M)||(p=u+(X?1:-1)*_e(M))}if(V){var O=A.slice();(_e(k-90)<2||_e(k-270)<2)&&(O[0]=r[0]);var Q=r_(r,O,(r[0]<A[0]?C:_)-A[0],!0,i),$=Z(Q.offset,1),H=$[0],J=Q.isOutside;isNaN(H)||(h=c+(J?1:-1)*_e(H))}})}return{maxWidth:h,maxHeight:p}}var Lr={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(n,e){var t=n.props,r=t.hideThrottleDragRotateLine,i=t.throttleDragRotate,a=t.zoom,o=n.getState(),c=o.dragInfo,u=o.beforeOrigin;if(r||!i||!c)return[];var d=c.dist;if(!d[0]&&!d[1])return[];var h=Ki(d),p=jn(d,[0,0]);return[e.createElement("div",{className:Ge("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(h,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(p,"rad) scaleY(").concat(a,")")}})]},dragStart:function(n,e){var t=e.datas,r=e.parentEvent,i=e.parentGesto,a=n.state,o=a.gestos,c=a.style;if(o.draggable)return!1;o.draggable=i||n.targetGesto,t.datas={},t.left=parseFloat(c.left||"")||0,t.top=parseFloat(c.top||"")||0,t.bottom=parseFloat(c.bottom||"")||0,t.right=parseFloat(c.right||"")||0,t.startValue=[0,0],Oc(n,e),Mv(n,e,"translate"),Qq(n,t),t.prevDist=[0,0],t.prevBeforeDist=[0,0],t.isDrag=!1,t.deltaOffset=[0,0];var u=gt(n,e,W({set:function(h){t.startValue=h}},Nv(n,e))),d=r||Pe(n,"onDragStart",u);return d!==!1?(t.isDrag=!0,n.state.dragInfo={startRect:n.getRect(),dist:[0,0]}):(o.draggable=null,t.isPinch=!1),t.isDrag?u:!1},drag:function(n,e){if(e){Dv(n,e,"translate");var t=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,o=e.deltaOffset,c=e.useSnap,u=e.isRequest,d=e.isGroup,h=e.parentThrottleDrag,p=e.distX,m=e.distY,x=t.isDrag,_=t.prevDist,E=t.prevBeforeDist,S=t.startValue;if(x){o&&(p+=o[0],m+=o[1]);var T=n.props,C=T.parentMoveable,R=d?0:T.throttleDrag||h||0,j=r?0:T.throttleDragRotate||0,z=0,V=!1,I=!1,A=!1,k=!1;if(!r&&j>0&&(p||m)){var O=T.startDragRotate||0,B=ct(O+jn([0,0],[p,m])*180/Math.PI,j)-O,L=m*Math.abs(Math.cos((B-90)/180*Math.PI)),M=p*Math.abs(Math.cos(B/180*Math.PI)),X=Ki([M,L]);z=B*Math.PI/180,p=X*Math.cos(z),m=X*Math.sin(z)}if(!a&&!r&&!i){var Q=Z(Iq(n,p,m,j,!c&&u||o,t),2),$=Q[0],H=Q[1];V=$.isSnap,I=$.isBound,A=H.isSnap,k=H.isBound;var J=$.offset,re=H.offset;p+=J,m+=re}var fe=Nt(VP({datas:t,distX:p,distY:m}),S),U=Nt(GG({datas:t,distX:p,distY:m}),S);BI(U,Hr),BI(fe,Hr),j||(!V&&!I&&(U[0]=ct(U[0],R),fe[0]=ct(fe[0],R)),!A&&!k&&(U[1]=ct(U[1],R),fe[1]=ct(fe[1],R)));var Y=$e(fe,S),te=$e(U,S),ae=$e(te,_),ne=$e(Y,E);t.prevDist=te,t.prevBeforeDist=Y,t.passDelta=ae,t.passDist=te;var se=t.left+Y[0],me=t.top+Y[1],Te=t.right-Y[0],Ce=t.bottom-Y[1],Ne=kv(t,"translate(".concat(U[0],"px, ").concat(U[1],"px)"),"translate(".concat(te[0],"px, ").concat(te[1],"px)"));if(iE(e,Ne),n.state.dragInfo.dist=r?[0,0]:te,!(!r&&!C&&ae.every(function(Be){return!Be})&&ne.some(function(Be){return!Be}))){var xe=n.state,Ee=xe.width,Qe=xe.height,Oe=gt(n,e,W({transform:Ne,dist:te,delta:ae,translate:U,beforeDist:Y,beforeDelta:ne,beforeTranslate:fe,left:se,top:me,right:Te,bottom:Ce,width:Ee,height:Qe,isPinch:a},Gr({transform:Ne},e)));return!r&&Pe(n,"onDrag",Oe),Oe}}}},dragAfter:function(n,e){var t=e.datas,r=t.deltaOffset;return r[0]||r[1]?(t.deltaOffset=[0,0],this.drag(n,W(W({},e),{deltaOffset:r}))):!1},dragEnd:function(n,e){var t=e.parentEvent,r=e.datas;if(n.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=_i(n,e,{});return!t&&Pe(n,"onDragEnd",i),i}},dragGroupStart:function(n,e){var t,r,i=e.datas,a=e.clientX,o=e.clientY,c=this.dragStart(n,e);if(!c)return!1;var u=z1(n,this,"dragStart",[a||0,o||0],e,!1,"draggable"),d=u.childEvents,h=u.eventParams,p=W(W({},c),{targets:n.props.targets,events:h}),m=Pe(n,"onDragGroupStart",p);i.isDrag=m!==!1;var x=(r=(t=d[0])===null||t===void 0?void 0:t.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[x[0]%1,x[1]%1],i.isDrag?c:!1},dragGroup:function(n,e){var t=e.datas;if(t.isDrag){var r=this.drag(n,W(W({},e),{parentThrottleDrag:n.props.throttleDrag})),i=e.datas.passDelta,a=z1(n,this,"drag",i,e,!1,"draggable").eventParams;if(r){var o=W({targets:n.props.targets,events:a},r);return Pe(n,"onDragGroup",o),o}}},dragGroupEnd:function(n,e){var t=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(n,e);var i=z1(n,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Pe(n,"onDragGroupEnd",_i(n,e,{targets:n.props.targets,events:i})),t}},request:function(n){var e={},t=n.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(o){return a=o.useSnap,{datas:e,useSnap:a}},request:function(o){return"x"in o?r=o.x-t.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-t.top:"deltaY"in o&&(i+=o.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(n){n.state.gestos.draggable=null,n.state.dragInfo=null}};function n4(n,e){var t=ar(n,e),r=[0,0];return{fixedPosition:t,fixedDirection:e,fixedOffset:r}}function Mq(n,e){var t=n.allMatrix,r=n.is3d,i=n.width,a=n.height,o=r?4:3,c=[i/2*(1+e[0]),a/2*(1+e[1])],u=pn(t,c,o),d=[0,0];return{fixedPosition:u,fixedDirection:e,fixedOffset:d}}function r4(n,e){var t=n.allMatrix,r=n.is3d,i=n.width,a=n.height,o=r?4:3,c=QG(e,i,a),u=pn(t,e,o),d=[i?0:e[0],a?0:e[1]];return{fixedPosition:u,fixedDirection:c,fixedOffset:d}}var lR=mE("resizable"),i_={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:qP("resizable"),dragControlCondition:lR,viewClassName:gE("resizable"),dragControlStart:function(n,e){var t,r=e.inputEvent,i=e.isPinch,a=e.isGroup,o=e.parentDirection,c=e.parentGesto,u=e.datas,d=e.parentFixedDirection,h=e.parentEvent,p=m4(o,i,r,u),m=n.state,x=m.target,_=m.width,E=m.height,S=m.gestos;if(!p||!x||S.resizable)return!1;S.resizable=c||n.controlGesto,!i&&Oc(n,e),u.datas={},u.direction=p,u.startOffsetWidth=_,u.startOffsetHeight=E,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=m.inlineCSSWidth||m.cssWidth,u.startHeight=m.inlineCSSHeight||m.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[m.minOffsetWidth,m.minOffsetHeight],u.maxSize=[m.maxOffsetWidth,m.maxOffsetHeight]);var T=n.props.transformOrigin||"% %";u.transformOrigin=ri(T)?T.split(" "):T,u.startOffsetMatrix=m.offsetMatrix,u.startTransformOrigin=m.transformOrigin,u.isWidth=(t=e?.parentIsWidth)!==null&&t!==void 0?t:!p[0]&&!p[1]||p[0]||!p[1];function C(k){u.ratio=k&&isFinite(k)?k:0}u.startPositions=Xi(n.state);function R(k){var O=n4(u.startPositions,k);u.fixedDirection=O.fixedDirection,u.fixedPosition=O.fixedPosition,u.fixedOffset=O.fixedOffset}function j(k){var O=r4(n.state,k);u.fixedDirection=O.fixedDirection,u.fixedPosition=O.fixedPosition,u.fixedOffset=O.fixedOffset}function z(k){u.minSize=[Xt("".concat(k[0]),0)||0,Xt("".concat(k[1]),0)||0]}function V(k){var O=[k[0]||1/0,k[1]||1/0];(!cd(O[0])||isFinite(O[0]))&&(O[0]=Xt("".concat(O[0]),0)||1/0),(!cd(O[1])||isFinite(O[1]))&&(O[1]=Xt("".concat(O[1]),0)||1/0),u.maxSize=O}C(_/E),R(d||[-p[0],-p[1]]),u.setFixedDirection=R,u.setFixedPosition=j,u.setMin=z,u.setMax=V;var I=gt(n,e,{direction:p,startRatio:u.ratio,set:function(k){var O=Z(k,2),B=O[0],L=O[1];u.startWidth=B,u.startHeight=L},setMin:z,setMax:V,setRatio:C,setFixedDirection:R,setFixedPosition:j,setOrigin:function(k){u.transformOrigin=k},dragStart:Lr.dragStart(n,new dd().dragStart([0,0],e))}),A=h||Pe(n,"onResizeStart",I);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,A!==!1&&(u.isResize=!0,n.state.snapRenderInfo={request:e.isRequest,direction:p}),u.isResize?I:!1},dragControl:function(n,e){var t,r=e.datas,i=e.parentFlag,a=e.isPinch,o=e.parentKeepRatio,c=e.dragClient,u=e.parentDist,d=e.useSnap,h=e.isRequest,p=e.isGroup,m=e.parentEvent,x=e.resolveMatrix,_=r.isResize,E=r.transformOrigin,S=r.startWidth,T=r.startHeight,C=r.prevWidth,R=r.prevHeight,j=r.minSize,z=r.maxSize,V=r.ratio,I=r.startOffsetWidth,A=r.startOffsetHeight,k=r.isWidth;if(!_)return;if(x){var O=n.state.is3d,B=r.startOffsetMatrix,L=r.startTransformOrigin,M=O?4:3,X=$h(P0(e)),Q=Math.sqrt(X.length);M!==Q&&(X=ma(X,Q,M));var $=kp(B,X,L,M),H=Vc($,I,A,M);r.startPositions=H,r.nextTargetMatrix=X,r.nextAllMatrix=$}var J=xc(n.props,"resizable"),re=J.resizeFormat,fe=J.throttleResize,U=fe===void 0?i?0:1:fe,Y=J.parentMoveable,te=J.keepRatioFinally,ae=r.direction,ne=ae,se=0,me=0;!ae[0]&&!ae[1]&&(ne=[1,1]);var Te=V&&(o??J.keepRatio)||!1;function Ce(){var bt=r.fixedDirection,Lt=w4(ne,Te,r,e);se=Lt.distWidth,me=Lt.distHeight;var Ar=ne[0]-bt[0]||Te?Math.max(I+se,Hr):I,Zn=ne[1]-bt[1]||Te?Math.max(A+me,Hr):A;return Te&&I&&A&&(k?Zn=Ar/V:Ar=Zn*V),[Ar,Zn]}var Ne=Z(Ce(),2),xe=Ne[0],Ee=Ne[1];m||(r.setFixedDirection(r.fixedDirection),Pe(n,"onBeforeResize",gt(n,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(bt){var Lt;return r.setFixedDirection(bt),Lt=Z(Ce(),2),xe=Lt[0],Ee=Lt[1],[xe,Ee]},setFixedPosition:function(bt){var Lt;return r.setFixedPosition(bt),Lt=Z(Ce(),2),xe=Lt[0],Ee=Lt[1],[xe,Ee]},boundingWidth:xe,boundingHeight:Ee,setSize:function(bt){var Lt;Lt=Z(bt,2),xe=Lt[0],Ee=Lt[1]}},!0)));var Qe=c;c||(!i&&a?Qe=tq(n,[0,0]):Qe=r.fixedPosition);var Oe=[0,0];a||(Oe=Xq(n,xe,Ee,ae,Qe,!d&&h,r)),u&&(!u[0]&&(Oe[0]=0),!u[1]&&(Oe[1]=0));function Be(){var bt;re&&(bt=Z(re([xe,Ee]),2),xe=bt[0],Ee=bt[1]),xe=ct(xe,U),Ee=ct(Ee,U)}if(Te){ne[0]&&ne[1]&&Oe[0]&&Oe[1]&&(_e(Oe[0])>_e(Oe[1])?Oe[1]=0:Oe[0]=0);var ze=!Oe[0]&&!Oe[1];ze&&Be(),ne[0]&&!ne[1]||Oe[0]&&!Oe[1]||ze&&k?(xe+=Oe[0],Ee=xe/V):(!ne[0]&&ne[1]||!Oe[0]&&Oe[1]||ze&&!k)&&(Ee+=Oe[1],xe=Ee*V)}else xe+=Oe[0],Ee+=Oe[1],xe=Math.max(0,xe),Ee=Math.max(0,Ee);t=Z(KM([xe,Ee],j,z,Te?V:!1),2),xe=t[0],Ee=t[1],Be(),Te&&(p||te)&&(k?Ee=xe/V:xe=Ee*V),se=xe-I,me=Ee-A;var st=[se-C,me-R];r.prevWidth=se,r.prevHeight=me;var yt=eq(n,xe,Ee,Qe,E,r);if(!(!Y&&st.every(function(bt){return!bt})&&yt.every(function(bt){return!bt}))){var Ve=Lr.drag(n,Dp(e,n.state,yt,!!a,!1,"draggable")),Ke=Ve.transform,Mt=S+se,yn=T+me,dn=gt(n,e,W({width:Mt,height:yn,offsetWidth:Math.round(xe),offsetHeight:Math.round(Ee),startRatio:V,boundingWidth:xe,boundingHeight:Ee,direction:ae,dist:[se,me],delta:st,isPinch:!!a,drag:Ve},y4({style:{width:"".concat(Mt,"px"),height:"".concat(yn,"px")},transform:Ke},Ve,e)));return!m&&Pe(n,"onResize",dn),dn}},dragControlAfter:function(n,e){var t=e.datas,r=t.isResize,i=t.startOffsetWidth,a=t.startOffsetHeight,o=t.prevWidth,c=t.prevHeight;if(!(!r||n.props.checkResizableError===!1)){var u=n.state,d=u.width,h=u.height,p=d-(i+o),m=h-(a+c),x=_e(p)>3,_=_e(m)>3;if(x&&(t.startWidth+=p,t.startOffsetWidth+=p,t.prevWidth+=p),_&&(t.startHeight+=m,t.startOffsetHeight+=m,t.prevHeight+=m),x||_)return this.dragControl(n,e)}},dragControlEnd:function(n,e){var t=e.datas,r=e.parentEvent;if(t.isResize){t.isResize=!1;var i=_i(n,e,{});return!r&&Pe(n,"onResizeEnd",i),i}},dragGroupControlCondition:lR,dragGroupControlStart:function(n,e){var t=e.datas,r=this.dragControlStart(n,W(W({},e),{isGroup:!0}));if(!r)return!1;var i=fa(n,"resizable",e),a=t.startOffsetWidth,o=t.startOffsetHeight;function c(){var x=t.minSize;i.forEach(function(_){var E=_.datas,S=E.minSize,T=E.startOffsetWidth,C=E.startOffsetHeight,R=a*(T?S[0]/T:0),j=o*(C?S[1]/C:0);x[0]=Math.max(x[0],R),x[1]=Math.max(x[1],j)})}function u(){var x=t.maxSize;i.forEach(function(_){var E=_.datas,S=E.maxSize,T=E.startOffsetWidth,C=E.startOffsetHeight,R=a*(T?S[0]/T:0),j=o*(C?S[1]/C:0);x[0]=Math.min(x[0],R),x[1]=Math.min(x[1],j)})}var d=Ps(n,this,"dragControlStart",e,function(x,_){return O0(n,x,t,_)});c(),u();var h=function(x){r.setFixedDirection(x),d.forEach(function(_,E){_.setFixedDirection(x),O0(n,_.moveable,t,i[E])})};t.setFixedDirection=h;var p=W(W({},r),{targets:n.props.targets,events:d.map(function(x){return W(W({},x),{setMin:function(_){x.setMin(_),c()},setMax:function(_){x.setMax(_),u()}})}),setFixedDirection:h,setMin:function(x){r.setMin(x),c()},setMax:function(x){r.setMax(x),u()}}),m=Pe(n,"onResizeGroupStart",p);return t.isResize=m!==!1,t.isResize?r:!1},dragGroupControl:function(n,e){var t=e.datas;if(t.isResize){var r=xc(n.props,"resizable");zv(n,"onBeforeResize",function(x){Pe(n,"onBeforeResizeGroup",gt(n,e,W(W({},x),{targets:r.targets}),!0))});var i=this.dragControl(n,W(W({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,c=i.dist,u=r.keepRatio,d=[a/(a-c[0]),o/(o-c[1])],h=t.fixedPosition,p=Ps(n,this,"dragControl",e,function(x,_){var E=Z(Pr(Cp(n.rotation/180*Math.PI,3),[_.datas.originalX*d[0],_.datas.originalY*d[1],1],3),2),S=E[0],T=E[1];return W(W({},_),{parentDist:null,parentScale:d,dragClient:Nt(h,[S,T]),parentKeepRatio:u})}),m=W({targets:r.targets,events:p},i);return Pe(n,"onResizeGroup",m),m}}},dragGroupControlEnd:function(n,e){var t=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(n,e);var i=Ps(n,this,"dragControlEnd",e),a=_i(n,e,{targets:n.props.targets,events:i});return Pe(n,"onResizeGroupEnd",a),t}},request:function(n){var e={},t=0,r=0,i=!1,a=n.getRect();return{isControl:!0,requestStart:function(o){var c;return i=o.useSnap,{datas:e,parentDirection:o.direction||[1,1],parentIsWidth:(c=o?.horizontal)!==null&&c!==void 0?c:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?t=o.offsetWidth-a.offsetWidth:"deltaWidth"in o&&(t+=o.deltaWidth),"offsetHeight"in o?r=o.offsetHeight-a.offsetHeight:"deltaHeight"in o&&(r+=o.deltaHeight),{datas:e,parentDist:[t,r],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(n){n.state.gestos.resizable=null}};function L1(n,e,t,r,i){var a=n.props.groupable,o=n.state,c=o.is3d?4:3,u=e.origin,d=pn(n.state.rootMatrix,$e([u[0],u[1]],a?[0,0]:[o.left,o.top]),c),h=Nt([i.left,i.top],d);e.startAbsoluteOrigin=h,e.prevDeg=jn(h,[t,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Ms(h,[t,r])}function i0(n,e,t){var r=t.defaultDeg,i=t.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>n&&a>270&&n<90?++o:a<n&&a<90&&n>270&&--o;var c=e*(o*360+n-r);return t.prevDeg=r+c,c}function B1(n,e,t,r){return i0(jn(r.startAbsoluteOrigin,[n,e])/Math.PI*180,t,r)}function U1(n,e,t,r,i,a){var o=n.props.throttleRotate,c=o===void 0?0:o,u=t.prevSnapDeg,d=0,h=!1;if(a){var p=Kq(n,e,r,i+r);h=p.isSnap,d=i+p.dist}h||(d=ct(i+r,c));var m=d-i;return t.prevSnapDeg=m,[m-u,m,d]}function i4(n,e,t){var r=Z(e,4),i=r[0],a=r[1],o=r[2],c=r[3];if(n==="none")return[];if(Wn(n))return n.map(function(S){return i4(S,[i,a,o,c],t)[0]});var u=Z((n||"top").split("-"),2),d=u[0],h=u[1],p=[i,a];d==="left"?p=[o,i]:d==="right"?p=[a,c]:d==="bottom"&&(p=[c,o]);var m=[(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2],x=p4(p,t);if(h){var _=h==="top"||h==="left",E=d==="bottom"||d==="left";m=p[_&&!E||!_&&E?0:1]}return[[m,x]]}function a_(n,e){if(e.isRequest)return e.requestAble==="rotatable";var t=e.inputEvent.target;if(ir(t,Ge("rotation-control"))||n.props.rotateAroundControls&&ir(t,Ge("around-control"))||ir(t,Ge("control"))&&ir(t,Ge("rotatable")))return!0;var r=n.props.rotationTarget;return r?vE(r,!0).some(function(i){return i?t===i||t.contains(i):!1}):!1}var Pq=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Oq={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Pq],viewClassName:function(n){return n.isDragging("rotatable")?Ge("view-rotation-dragging"):""},render:function(n,e){var t=xc(n.props,"rotatable"),r=t.rotatable,i=t.rotationPosition,a=t.zoom,o=t.renderDirections,c=t.rotateAroundControls,u=t.resolveAblesWithRotatable,d=n.getState(),h=d.renderPoses,p=d.direction;if(!r)return null;var m=i4(i,h,p),x=[];if(m.forEach(function(T,C){var R=Z(T,2),j=R[0],z=R[1];x.push(e.createElement("div",{key:"rotation".concat(C),className:Ge("rotation"),style:{transform:"translate(-50%) translate(".concat(j[0],"px, ").concat(j[1],"px) rotate(").concat(z,"rad)")}},e.createElement("div",{className:Ge("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Ge("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),o){var _=Bs(u||{}),E={};_.forEach(function(T){u[T].forEach(function(C){E[C]=T})});var S=[];Wn(o)&&(S=o.map(function(T){var C=E[T];return{data:C?{resolve:C}:{},classNames:C?["move"]:[],dir:T}})),x.push.apply(x,Ae([],Z(UP(n,"rotatable",S,e)),!1))}return c&&x.push.apply(x,Ae([],Z($P(n,e)),!1)),x},dragControlCondition:a_,dragControlStart:function(n,e){var t,r,i=e.datas,a=e.clientX,o=e.clientY,c=e.parentRotate,u=e.parentFlag,d=e.isPinch,h=e.isRequest,p=n.state,m=p.target,x=p.left,_=p.top,E=p.direction,S=p.beforeDirection,T=p.targetTransform,C=p.moveableClientRect,R=p.offsetMatrix,j=p.targetMatrix,z=p.allMatrix,V=p.width,I=p.height;if(!h&&!m)return!1;var A=n.getRect();i.rect=A,i.transform=T,i.left=x,i.top=_;var k=function(ne){var se=r4(n.state,ne);i.fixedDirection=se.fixedDirection,i.fixedOffset=se.fixedOffset,i.fixedPosition=se.fixedPosition,U&&U.setFixedPosition(ne)},O=function(ne){var se=Mq(n.state,ne);i.fixedDirection=se.fixedDirection,i.fixedOffset=se.fixedOffset,i.fixedPosition=se.fixedPosition,U&&U.setFixedDirection(ne)},B=a,L=o;if(h||d||u){var M=c||0;i.beforeInfo={origin:A.beforeOrigin,prevDeg:M,defaultDeg:M,prevSnapDeg:0,startDist:0},i.afterInfo=W(W({},i.beforeInfo),{origin:A.origin}),i.absoluteInfo=W(W({},i.beforeInfo),{origin:A.origin,startValue:M})}else{var X=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(X){var Q=X.getAttribute("data-direction")||"",$=UG[Q];if($){i.isControl=!0,i.isAroundControl=ir(X,Ge("around-control")),i.controlDirection=$;var H=X.getAttribute("data-resolve");H&&(i.resolveAble=H);var J=uH(p.rootMatrix,p.renderPoses,C);t=Z(ar(J,$),2),B=t[0],L=t[1]}}i.beforeInfo={origin:A.beforeOrigin},i.afterInfo={origin:A.origin},i.absoluteInfo={origin:A.origin,startValue:A.rotation};var re=k;k=function(ne){var se=p.is3d?4:3,me=Z(Nt(xP(j,se),ne),2),Te=me[0],Ce=me[1],Ne=Pr(R,vc([Te,Ce],se)),xe=Pr(z,vc([ne[0],ne[1]],se));re(ne);var Ee=p.posDelta;i.beforeInfo.origin=$e(Ne,Ee),i.afterInfo.origin=$e(xe,Ee),i.absoluteInfo.origin=$e(xe,Ee),L1(n,i.beforeInfo,B,L,C),L1(n,i.afterInfo,B,L,C),L1(n,i.absoluteInfo,B,L,C)},O=function(ne){var se=ar([[0,0],[V,0],[0,I],[V,I]],ne);k(se)}}i.startClientX=B,i.startClientY=L,i.direction=E,i.beforeDirection=S,i.startValue=0,i.datas={},Mv(n,e,"rotate");var fe=!1,U=!1;if(i.isControl&&i.resolveAble){var Y=i.resolveAble;Y==="resizable"&&(U=i_.dragControlStart(n,W(W({},new dd("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}U||(fe=Lr.dragStart(n,new dd().dragStart([0,0],e))),k(dH(n));var te=gt(n,e,W(W({set:function(ne){i.startValue=ne*Math.PI/180},setFixedDirection:O,setFixedPosition:k},Nv(n,e)),{dragStart:fe,resizeStart:U})),ae=Pe(n,"onRotateStart",te);return i.isRotate=ae!==!1,p.snapRenderInfo={request:e.isRequest},i.isRotate?te:!1},dragControl:function(n,e){var t,r,i,a=e.datas,o=e.clientDistX,c=e.clientDistY,u=e.parentRotate,d=e.parentFlag,h=e.isPinch,p=e.groupDelta,m=e.resolveMatrix,x=a.beforeDirection,_=a.beforeInfo,E=a.afterInfo,S=a.absoluteInfo,T=a.isRotate,C=a.startValue,R=a.rect,j=a.startClientX,z=a.startClientY;if(T){Dv(n,e,"rotate");var V=FG(e),I=x*V,A=n.props.parentMoveable,k=0,O,B,L=0,M,X,Q=0,$,H,J=180/Math.PI*C,re=S.startValue,fe=!1,U=j+o,Y=z+c;if(!d&&"parentDist"in e){var te=e.parentDist;O=te,M=te,$=te}else h||d?(O=i0(u,x,_),M=i0(u,I,E),$=i0(u,I,S)):(O=B1(U,Y,x,_),M=B1(U,Y,I,E),$=B1(U,Y,I,S),fe=!0);if(B=J+O,X=J+M,H=re+$,Pe(n,"onBeforeRotate",gt(n,e,{beforeRotation:B,rotation:X,absoluteRotation:H,setRotation:function(Qe){M=Qe-J,O=M,$=M}},!0)),t=Z(U1(n,R,_,O,J,fe),3),k=t[0],O=t[1],B=t[2],r=Z(U1(n,R,E,M,J,fe),3),L=r[0],M=r[1],X=r[2],i=Z(U1(n,R,S,$,re,fe),3),Q=i[0],$=i[1],H=i[2],!(!Q&&!L&&!k&&!A&&!m)){var ae=kv(a,"rotate(".concat(X,"deg)"),"rotate(".concat(M,"deg)"));m&&(a.fixedPosition=aE(n,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var ne=JG(n,M,a),se=$e(Nt(p||[0,0],ne),a.prevInverseDist||[0,0]);a.prevInverseDist=ne,a.requestValue=null;var me=zP(n,ae,se,h,e),Te=me,Ce=Ms([U,Y],S.startAbsoluteOrigin)-S.startDist,Ne=void 0;if(a.resolveAble==="resizable"){var xe=i_.dragControl(n,W(W({},Dp(e,n.state,[e.deltaX,e.deltaY],!!h,!1,"resizable")),{resolveMatrix:!0,parentDistance:Ce}));xe&&(Ne=xe,Te=y4(Te,xe,e))}var Ee=gt(n,e,W(W({delta:L,dist:M,rotate:X,rotation:X,beforeDist:O,beforeDelta:k,beforeRotate:B,beforeRotation:B,absoluteDist:$,absoluteDelta:Q,absoluteRotate:H,absoluteRotation:H,isPinch:!!h,resize:Ne},me),Te));return Pe(n,"onRotate",Ee),Ee}}},dragControlEnd:function(n,e){var t=e.datas;if(t.isRotate){t.isRotate=!1;var r=_i(n,e,{});return Pe(n,"onRotateEnd",r),r}},dragGroupControlCondition:a_,dragGroupControlStart:function(n,e){var t=e.datas,r=n.state,i=r.left,a=r.top,o=r.beforeOrigin,c=this.dragControlStart(n,e);if(!c)return!1;c.set(t.beforeDirection*n.rotation);var u=Ps(n,this,"dragControlStart",e,function(p,m){var x=p.state,_=x.left,E=x.top,S=x.beforeOrigin,T=Nt($e([_,E],[i,a]),$e(S,o));return m.datas.startGroupClient=T,m.datas.groupClient=T,W(W({},m),{parentRotate:0})}),d=W(W({},c),{targets:n.props.targets,events:u}),h=Pe(n,"onRotateGroupStart",d);return t.isRotate=h!==!1,t.isRotate?c:!1},dragGroupControl:function(n,e){var t=e.datas;if(t.isRotate){zv(n,"onBeforeRotate",function(d){Pe(n,"onBeforeRotateGroup",gt(n,e,W(W({},d),{targets:n.props.targets}),!0))});var r=this.dragControl(n,e);if(r){var i=t.beforeDirection,a=r.beforeDist,o=a/180*Math.PI,c=Ps(n,this,"dragControl",e,function(d,h){var p=h.datas.startGroupClient,m=Z(h.datas.groupClient,2),x=m[0],_=m[1],E=Z(Ap(p,o*i),2),S=E[0],T=E[1],C=[S-x,T-_];return h.datas.groupClient=[S,T],W(W({},h),{parentRotate:a,groupDelta:C})});n.rotation=i*r.beforeRotation;var u=W({targets:n.props.targets,events:c,set:function(d){n.rotation=d},setGroupRotation:function(d){n.rotation=d}},r);return Pe(n,"onRotateGroup",u),u}}},dragGroupControlEnd:function(n,e){var t=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(n,e);var i=Ps(n,this,"dragControlEnd",e),a=_i(n,e,{targets:n.props.targets,events:i});return Pe(n,"onRotateGroupEnd",a),t}},request:function(n){var e={},t=0,r=n.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?t+=i.deltaRotate:"rotate"in i&&(t=i.rotate-r),{datas:e,parentDist:t}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Vq(n,e){var t,r=n.direction,i=n.classNames,a=n.size,o=n.pos,c=n.zoom,u=n.key,d=r==="horizontal",h=d?"Y":"X";return e.createElement("div",{key:u,className:i.join(" "),style:(t={},t[d?"width":"height"]="".concat(a),t.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(h,"(-50%) scale").concat(h,"(").concat(c,")"),t)})}function dE(n,e){return Vq(W(W({},n),{classNames:Ae([Ge("line","guideline",n.direction)],Z(n.classNames),!1).filter(function(t){return t}),size:n.size||"".concat(n.sizeValue,"px"),pos:n.pos||n.posValue.map(function(t){return"".concat(ct(t,.1),"px")})}),e)}function cR(n,e,t,r,i,a,o,c){var u=n.props.zoom;return t.map(function(d,h){var p=d.type,m=d.pos,x=[0,0];return x[o]=r,x[o?0:1]=-i+m,dE({key:"".concat(e,"TargetGuideline").concat(h),classNames:[Ge("target","bold",p)],posValue:x,sizeValue:a,zoom:u,direction:e},c)})}function uR(n,e,t,r,i,a){var o=n.props,c=o.zoom,u=o.isDisplayInnerSnapDigit,d=e==="horizontal"?al:sl,h=i[d.start],p=i[d.end];return t.filter(function(m){var x=m.hide,_=m.elementRect;if(x)return!1;if(u&&_){var E=_.rect;if(E[d.start]<=h&&p<=E[d.end])return!1}return!0}).map(function(m,x){var _=m.pos,E=m.size,S=m.element,T=m.className,C=[-r[0]+_[0],-r[1]+_[1]];return dE({key:"".concat(e,"-default-guideline-").concat(x),classNames:S?[Ge("bold"),T]:[Ge("normal"),T],direction:e,posValue:C,sizeValue:E,zoom:c},a)})}function ah(n,e,t,r,i,a,o,c){var u,d=n.props,h=d.snapDigit,p=h===void 0?0:h,m=d.isDisplaySnapDigit,x=m===void 0?!0:m,_=d.snapDistFormat,E=_===void 0?function(z,V){return z}:_,S=d.zoom,T=e==="horizontal"?"X":"Y",C=e==="vertical"?"height":"width",R=Math.abs(i),j=x?parseFloat(R.toFixed(p)):0;return c.createElement("div",{key:"".concat(e,"-").concat(t,"-guideline-").concat(r),className:Ge("guideline-group",e),style:(u={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},u[C]="".concat(R,"px"),u)},dE({direction:e,classNames:[Ge(t),o],size:"100%",posValue:[0,0],sizeValue:R,zoom:S},c),c.createElement("div",{className:Ge("size-value","gap"),style:{transform:"translate".concat(T,"(-50%) scale(").concat(S,")")}},j>0?E(j,e):""))}function jq(n,e,t,r){var i=n==="vertical"?0:1,a=n==="vertical"?1:0,o=i?al:sl,c=t[o.start],u=t[o.end];return b4(e,function(d){return d.pos[i]}).map(function(d){var h=[],p=[],m=[];return d.forEach(function(x){var _,E,S=x.element,T=x.elementRect.rect;if(T[o.end]<c)h.push(x);else if(u<T[o.start])p.push(x);else if(T[o.start]<=c&&u<=T[o.end]&&r){var C=x.pos,R={element:S,rect:W(W({},T),(_={},_[o.end]=T[o.start],_))},j={element:S,rect:W(W({},T),(E={},E[o.start]=T[o.end],E))},z=[0,0],V=[0,0];z[i]=C[i],z[a]=C[a],V[i]=C[i],V[a]=C[a]+x.size,h.push({type:n,pos:z,size:0,elementRect:R,direction:"",elementDirection:"end"}),p.push({type:n,pos:V,size:0,elementRect:j,direction:"",elementDirection:"start"})}}),h.sort(function(x,_){return _.pos[a]-x.pos[a]}),p.sort(function(x,_){return x.pos[a]-_.pos[a]}),{total:d,start:h,end:p,inner:m}})}function zq(n,e,t,r,i){var a=n.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(c){var u=e.filter(function(S){return S.type===c}),d=c==="vertical"?1:0,h=d?0:1,p=jq(c,u,r,a),m=d?sl:al,x=d?al:sl,_=r[m.start],E=r[m.end];p.forEach(function(S){var T=S.total,C=S.start,R=S.end,j=S.inner,z=t[h]+T[0].pos[h]-r[x.start],V=r;C.forEach(function(I){var A=I.elementRect.rect,k=V[m.start]-A[m.end];if(k>0){var O=[0,0];O[d]=t[d]+V[m.start]-_-k,O[h]=z,o.push(ah(n,c,"dashed",o.length,k,O,I.className,i))}V=A}),V=r,R.forEach(function(I){var A=I.elementRect.rect,k=A[m.start]-V[m.end];if(k>0){var O=[0,0];O[d]=t[d]+V[m.end]-_,O[h]=z,o.push(ah(n,c,"dashed",o.length,k,O,I.className,i))}V=A}),j.forEach(function(I){var A=I.elementRect.rect,k=_-A[m.start],O=A[m.end]-E,B=[0,0],L=[0,0];B[d]=t[d]-k,B[h]=z,L[d]=t[d]+E-_,L[h]=z,o.push(ah(n,c,"dashed",o.length,k,B,I.className,i)),o.push(ah(n,c,"dashed",o.length,O,L,I.className,i))})})}),o}function Lq(n,e,t,r,i){var a=[];return["horizontal","vertical"].forEach(function(o){var c=e.filter(function(S){return S.type===o}).slice(0,1),u=o==="vertical"?0:1,d=u?0:1,h=u?sl:al,p=u?al:sl,m=r[h.start],x=r[h.end],_=r[p.start],E=r[p.end];c.forEach(function(S){var T=S.gap,C=S.gapRects,R=Math.max.apply(Math,Ae([_],Z(C.map(function(V){var I=V.rect;return I[p.start]})),!1)),j=Math.min.apply(Math,Ae([E],Z(C.map(function(V){var I=V.rect;return I[p.end]})),!1)),z=(R+j)/2;R===j||z===(_+E)/2||C.forEach(function(V){var I=V.rect,A=V.className,k=[t[0],t[1]];if(I[h.end]<m)k[u]+=I[h.end]-m;else if(x<I[h.start])k[u]+=I[h.start]-m-T;else return;k[d]+=z-_,a.push(ah(n,u?"vertical":"horizontal","gap",a.length,T,k,A,i))})})}),a}function s_(n){var e,t,r=n.state,i=r.containerClientRect,a=r.hasFixed,o=i.overflow,c=i.scrollHeight,u=i.scrollWidth,d=i.clientHeight,h=i.clientWidth,p=i.clientLeft,m=i.clientTop,x=n.props,_=x.snapGap,E=_===void 0?!0:_,S=x.verticalGuidelines,T=x.horizontalGuidelines,C=x.snapThreshold,R=C===void 0?5:C,j=x.maxSnapElementGuidelineDistance,z=j===void 0?1/0:j,V=x.isDisplayGridGuidelines,I=Hi(Xi(n.state)),A=I.top,k=I.left,O=I.bottom,B=I.right,L={top:A,left:k,bottom:O,right:B,center:(k+B)/2,middle:(A+O)/2},M=Gq(n),X=Ae([],Z(M),!1),Q=((t=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&t!==void 0?t:[1,1]).map(function(re){return re*R});E&&X.push.apply(X,Ae([],Z(Bq(n,L,Q)),!1));var $=W({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(X.push.apply(X,Ae([],Z(Fq(n,o?u:h,o?c:d,p,m,$,V)),!1)),a){var H=i.left,J=i.top;$.left+=H,$.top+=J,$.right+=H,$.bottom+=J}return X.push.apply(X,Ae([],Z(s4(T||!1,S||!1,o?u:h,o?c:d,p,m,$)),!1)),X=X.filter(function(re){var fe=re.element,U=re.elementRect,Y=re.type;if(!fe||!U)return!0;var te=U.rect;return a4(L,te,Y,z)}),X}function Bq(n,e,t){var r=n.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,o=r.maxSnapElementGapDistance,c=o===void 0?1/0:o,u=n.state.elementRects,d=[];return[["vertical",al,sl],["horizontal",sl,al]].forEach(function(h){var p=Z(h,3),m=p[0],x=p[1],_=p[2],E=e[x.start],S=e[x.end],T=e[x.center],C=e[_.start],R=e[_.end],j={left:t[0],top:t[1]};function z(A){var k=A.rect,O=j[x.start];return k[x.end]<E+O?E-k[x.end]:S-O<k[x.start]?k[x.start]-S:-1}var V=u.filter(function(A){var k=A.rect;return k[_.start]>R||k[_.end]<C?!1:z(A)>0}).sort(function(A,k){return z(A)-z(k)}),I=[];V.forEach(function(A){V.forEach(function(k){if(A!==k){var O=A.rect,B=k.rect,L=O[_.start],M=O[_.end],X=B[_.start],Q=B[_.end];L>Q||X>M||I.push([A,k])}})}),I.forEach(function(A){var k=Z(A,2),O=k[0],B=k[1],L=O.rect,M=B.rect,X=L[x.start],Q=L[x.end],$=M[x.start],H=M[x.end],J=j[x.start],re=0,fe=0,U=!1,Y=!1,te=!1;if(Q<=E&&S<=$){if(Y=!0,re=($-Q-(S-E))/2,fe=Q+re+(S-E)/2,_e(fe-T)>J)return}else if(Q<$&&H<E+J){if(U=!0,re=$-Q,fe=H+re,_e(fe-E)>J)return}else if(Q<$&&S-J<X){if(te=!0,re=$-Q,fe=X-re,_e(fe-S)>J)return}else return;re&&a4(e,M,m,a)&&(re>c||d.push({type:m,pos:m==="vertical"?[fe,0]:[0,fe],element:B.element,size:0,className:B.className,isStart:U,isCenter:Y,isEnd:te,gap:re,hide:!0,gapRects:[O,B],direction:"",elementDirection:""}))})}),d}function Uq(n,e,t,r){var i,a,o=n.props,c=n.state,u=o.snapGridAll,d=o.snapGridWidth,h=d===void 0?0:d,p=o.snapGridHeight,m=p===void 0?0:p,x=c.snapRenderInfo,_=x&&(((i=x.direction)===null||i===void 0?void 0:i[0])||((a=x.direction)===null||a===void 0?void 0:a[1])),E=n.moveables;if(u&&E&&_&&(h||m)){if(c.snapThresholdInfo)return;c.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var S=n.getRect(),T=S.children,C=x.direction;if(T){var R=C.map(function(z,V){var I=V===0?{snapSize:h,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:m,posName:"top",sizeName:"height",clientOffset:r.top-t},A=I.snapSize,k=I.posName,O=I.sizeName,B=I.clientOffset;if(!A)return{dir:z,multiple:1,snapSize:A,snapOffset:0};var L=S[O],M=S[k],X=XM(T.map(function(U){return[U[k]-M,U[O],L-U[O]-U[k]+M]})).filter(function(U){return U}).sort(function(U,Y){return U-Y}),Q=X[0],$=X.map(function(U){return ct(U/Q,.1)*A}),H=1,J=ct(L/Q,.1);for(H=1;H<=10&&!$.every(function(U){return U*H%1===0});++H);var re=(-z+1)/2,fe=D0(M-B,M-B+L,re,1-re);return{multiple:J*H,dir:z,snapSize:A,snapOffset:Math.round(fe/A)}}),j=R.map(function(z){return z.multiple||1});c.snapThresholdInfo.multiples=j,c.snapThresholdInfo.offset=R.map(function(z){return z.snapOffset}),R.forEach(function(z,V){z.snapSize})}}else c.snapThresholdInfo=null}function Fq(n,e,t,r,i,a,o){r===void 0&&(r=0),i===void 0&&(i=0);var c=n.props,u=n.state,d=c.snapGridWidth,h=d===void 0?0:d,p=c.snapGridHeight,m=p===void 0?0:p,x=[],_=a.left,E=a.top,S=[0,0];Uq(n,r,i,a);var T=u.snapThresholdInfo,C=h,R=m;if(T&&(h*=T.multiples[0]||1,m*=T.multiples[1]||1,S=T.offset),m){for(var j=function(V){x.push({type:"horizontal",pos:[_,ct(S[1]*R+V-i+E,.1)],className:Ge("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},z=0;z<=t*2;z+=m)j(z);for(var z=-m;z>=-t;z-=m)j(z)}if(h){for(var j=function(I){x.push({type:"vertical",pos:[ct(S[0]*C+I-r+_,.1),E],className:Ge("grid-guideline"),size:t,hide:!o,direction:"",grid:!0})},z=0;z<=e*2;z+=h)j(z);for(var z=-h;z>=-e;z-=h)j(z)}return x}function a4(n,e,t,r){return t==="horizontal"?_e(n.right-e.left)<=r||_e(n.left-e.right)<=r||n.left<=e.right&&e.left<=n.right:t==="vertical"?_e(n.bottom-e.top)<=r||_e(n.top-e.bottom)<=r||n.top<=e.bottom&&e.top<=n.bottom:!0}function Gq(n){var e=n.state,t=n.props.elementGuidelines,r=t===void 0?[]:t;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(m){return!m.refresh}),a=r.map(function(m){return ga(m)&&"element"in m?W(W({},m),{element:Ha(m.element,!0)}):{element:Ha(m,!0)}}).filter(function(m){return m.element}),o=tG(i.map(function(m){return m.element}),a.map(function(m){return m.element})),c=o.maintained,u=o.added,d=[];c.forEach(function(m){var x=Z(m,2),_=x[0],E=x[1];d[E]=i[_]}),qq(n,u.map(function(m){return a[m]})).map(function(m,x){d[u[x]]=m}),e.elementRects=d;var h=oE(n.props.elementSnapDirections),p=[];return d.forEach(function(m){var x=m.element,_=m.top,E=_===void 0?h.top:_,S=m.left,T=S===void 0?h.left:S,C=m.right,R=C===void 0?h.right:C,j=m.bottom,z=j===void 0?h.bottom:j,V=m.center,I=V===void 0?h.center:V,A=m.middle,k=A===void 0?h.middle:A,O=m.className,B=m.rect,L=lE({top:E,right:R,left:T,bottom:z,center:I,middle:k},B),M=L.horizontal,X=L.vertical,Q=L.horizontalNames,$=L.verticalNames,H=B.top,J=B.left,re=B.right-J,fe=B.bottom-H,U=[re,fe];X.forEach(function(Y,te){p.push({type:"vertical",element:x,pos:[ct(Y,.1),H],size:fe,sizes:U,className:O,elementRect:m,elementDirection:tR[$[te]]||$[te],direction:""})}),M.forEach(function(Y,te){p.push({type:"horizontal",element:x,pos:[J,ct(Y,.1)],size:re,sizes:U,className:O,elementRect:m,elementDirection:tR[Q[te]]||Q[te],direction:""})})}),p}function dR(n,e){return n?n.map(function(t){var r=ga(t)?t:{pos:t},i=r.pos;return cd(i)?r:W(W({},r),{pos:Xt(i,e)})}):[]}function s4(n,e,t,r,i,a,o){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var c=[],u=o.left,d=o.top,h=o.bottom,p=o.right,m=t+p-u,x=r+h-d;return dR(n,x).forEach(function(_){c.push({type:"horizontal",pos:[u,ct(_.pos-a+d,.1)],size:m,className:_.className,direction:""})}),dR(e,m).forEach(function(_){c.push({type:"vertical",pos:[ct(_.pos-i+u,.1),d],size:x,className:_.className,direction:""})}),c}function qq(n,e){if(!e.length)return[];var t=n.props.groupable,r=n.state,i=r.containerClientRect,a=r.rootMatrix,o=r.is3d,c=r.offsetDelta,u=o?4:3,d=Z(pq(a,i,u),2),h=d[0],p=d[1],m=t?0:c[0],x=t?0:c[1];return e.map(function(_){var E=_.element.getBoundingClientRect(),S=E.left-h-m,T=E.top-p-x,C=T+E.height,R=S+E.width,j=Z(pd(a,[S,T],u),2),z=j[0],V=j[1],I=Z(pd(a,[R,C],u),2),A=I[0],k=I[1];return W(W({},_),{rect:{left:z,right:A,top:V,bottom:k,center:(z+A)/2,middle:(V+k)/2}})})}function Vm(n){var e=n.state,t=e.container,r=n.props.snapContainer||t;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(t!==r){var o=Ha(r,!0);if(o){var c=Eh(o),u=vR(e,[c.left-i.left,c.top-i.top]),d=vR(e,[c.right-i.right,c.bottom-i.bottom]);a.left=ct(u[0],1e-5),a.top=ct(u[1],1e-5),a.right=ct(d[0],1e-5),a.bottom=ct(d[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=s_(n),e.enableSnap=!0,!0}function o4(n,e,t,r,i,a){var o=Vc(n,e,t,a?4:3),c=ar(o,r);return hE(o,$e(i,c))}function fR(n){return n?n/_e(n):0}function Hq(n,e,t,r,i,a){var o=a.fixedDirection,c=yq(t,o,r),u=uE(n,e,t,r),d=Ae(Ae([],Z(Dq(n,e,c,r,i,a)),!1),Z(t4(n,u,a)),!1),h=V0(d,0),p=V0(d,1);return{width:{isBound:h.isBound,offset:h.offset[0]},height:{isBound:p.isBound,offset:p.offset[1]}}}function $q(n,e,t,r,i,a,o,c,u){var d=ar(e,o),h=Vv(n,c,{vertical:[d[0]],horizontal:[d[1]]}),p=h.horizontal.offset,m=h.vertical.offset;if(ct(m,Jx)||ct(p,Jx)){var x=Z(is({datas:u,distX:-m,distY:-p}),2),_=x[0],E=x[1],S=Math.min(i||1/0,t+o[0]*_),T=Math.min(a||1/0,r+o[1]*E);return[S-t,T-r]}return[0,0]}function l4(n,e,t,r,i,a,o,c){for(var u=Xi(n.state),d=n.props.keepRatio,h=0,p=0,m=0;m<2;++m){var x=e(h,p),_=Hq(n,x,i,d,o,c),E=_.width,S=_.height,T=E.isBound,C=S.isBound,R=E.offset,j=S.offset;if(m===1&&(T||(R=0),C||(j=0)),m===0&&o&&!T&&!C)return[0,0];if(d){var z=_e(R)*(t?1/t:1),V=_e(j)*(r?1/r:1),I=T&&C?z<V:C||!T&&z<V;I?R=t*j/r:j=r*R/t}h+=R,p+=j}if(!d&&i[0]&&i[1]){var A=Nq(n,u,i,a,c),k=A.maxWidth,O=A.maxHeight,B=Z($q(n,e(h,p).map(function(X){return X.map(function(Q){return ct(Q,Jx)})}),t+h,r+p,k,O,i,o,c),2),R=B[0],j=B[1];h+=R,p+=j}return[h,p]}function _h(n){return n<0&&(n=n%360+360),n%=360,n}function Yq(n,e){e=_h(e);var t=Math.floor(n/360),r=t*360+360-e,i=t*360+e;return _e(n-r)<_e(n-i)?r:i}function F1(n,e){n=_h(n),e=_h(e);var t=_h(n-e);return Math.min(t,360-t)}function Kq(n,e,t,r){var i,a=n.props,o=(i=a[YP])!==null&&i!==void 0?i:5,c=a[KP];if(Ud(n,"rotatable")){var u=e.pos1,d=e.pos2,h=e.pos3,p=e.pos4,m=e.origin,x=t*Math.PI/180,_=[u,d,h,p].map(function(j){return $e(j,m)}),E=_.map(function(j){return Ap(j,x)}),S=Ae(Ae([],Z(uq(n,_,E,m,t)),!1),Z(Sq(n,_,E,m,t)),!1);S.sort(function(j,z){return _e(j-t)-_e(z-t)});var T=S.length>0;if(T)return{isSnap:T,dist:T?S[0]:t}}if(c?.length&&o){var C=c.slice().sort(function(j,z){return F1(j,r)-F1(z,r)}),R=C[0];if(F1(R,r)<=o)return{isSnap:!0,dist:t+Yq(r,R)-r}}return{isSnap:!1,dist:t}}function Xq(n,e,t,r,i,a,o){if(!Ud(n,"resizable"))return[0,0];var c=o.fixedDirection,u=o.nextAllMatrix,d=n.state,h=d.allMatrix,p=d.is3d;return l4(n,function(m,x){return o4(u||h,e+m,t+x,c,i,p)},e,t,r,i,a,o)}function Wq(n,e,t,r,i){if(!Ud(n,"scalable"))return[0,0];var a=i.startOffsetWidth,o=i.startOffsetHeight,c=i.fixedPosition,u=i.fixedDirection,d=i.is3d,h=l4(n,function(p,m){return o4(XG(i,Nt(e,[p/a,m/o])),a,o,u,c,d)},a,o,t,c,r,i);return[h[0]/a,h[1]/o]}function Qq(n,e){e.absolutePoses=Xi(n.state)}function hR(n){var e=[];return n.forEach(function(t){t.guidelineInfos.forEach(function(r){var i=r.guideline;ii(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:t}))})}),e.map(function(t){var r=t.guideline,i=t.posInfo;return W(W({},r),{direction:i.direction})})}function pR(n,e,t,r,i,a){var o=sE(Pv(n,a),e,t),c=o.vertical,u=o.horizontal,d=Yu();c.forEach(function(_){_.isBound&&(_.direction==="start"&&(d.left=!0),_.direction==="end"&&(d.right=!0),r.push({type:"bounds",pos:_.pos}))}),u.forEach(function(_){_.isBound&&(_.direction==="start"&&(d.top=!0),_.direction==="end"&&(d.bottom=!0),i.push({type:"bounds",pos:_.pos}))});var h=Tq(n),p=h.boundMap,m=h.vertical,x=h.horizontal;return m.forEach(function(_){Ls(r,function(E){var S=E.type,T=E.pos;return S==="bounds"&&T===_})>=0||r.push({type:"bounds",pos:_})}),x.forEach(function(_){Ls(i,function(E){var S=E.type,T=E.pos;return S==="bounds"&&T===_})>=0||i.push({type:"bounds",pos:_})}),{boundMap:d,innerBoundMap:p}}var Zq=mE("",["resizable","scalable"]),Jq={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",YP,KP,XP,WP,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(n,e){var t=n.state,r=t.top,i=t.left,a=t.pos1,o=t.pos2,c=t.pos3,u=t.pos4,d=t.snapRenderInfo,h=n.props.snapRenderThreshold,p=h===void 0?1:h;if(!d||!d.render||!Ud(n,""))return Xu(n,"boundMap",Yu(),function(ae){return JSON.stringify(ae)}),Xu(n,"innerBoundMap",Yu(),function(ae){return JSON.stringify(ae)}),[];t.guidelines=s_(n);var m=Math.min(a[0],o[0],c[0],u[0]),x=Math.min(a[1],o[1],c[1],u[1]),_=d.externalPoses||[],E=Xi(n.state),S=[],T=[],C=[],R=[],j=[],z=Hi(E),V=z.width,I=z.height,A=z.top,k=z.left,O=z.bottom,B=z.right,L={left:k,right:B,top:A,bottom:O,center:(k+B)/2,middle:(A+O)/2},M=_.length>0,X=M?Hi(_):{};if(!d.request){if(d.direction&&j.push(vq(n,E,d.direction,p,p)),d.snap){var Q=Hi(E);d.center&&(Q.middle=(Q.top+Q.bottom)/2,Q.center=(Q.left+Q.right)/2),j.push(nR(n,Q,p,p))}M&&(d.center&&(X.middle=(X.top+X.bottom)/2,X.center=(X.left+X.right)/2),j.push(nR(n,X,p,p))),j.forEach(function(ae){var ne=ae.vertical.posInfos,se=ae.horizontal.posInfos;S.push.apply(S,Ae([],Z(ne.filter(function(me){var Te=me.guidelineInfos;return Te.some(function(Ce){var Ne=Ce.guideline;return!Ne.hide})}).map(function(me){return{type:"snap",pos:me.pos}})),!1)),T.push.apply(T,Ae([],Z(se.filter(function(me){var Te=me.guidelineInfos;return Te.some(function(Ce){var Ne=Ce.guideline;return!Ne.hide})}).map(function(me){return{type:"snap",pos:me.pos}})),!1)),C.push.apply(C,Ae([],Z(hR(ne)),!1)),R.push.apply(R,Ae([],Z(hR(se)),!1))})}var $=pR(n,[k,B],[A,O],S,T),H=$.boundMap,J=$.innerBoundMap;M&&pR(n,[X.left,X.right],[X.top,X.bottom],S,T,d.externalBounds);var re=Ae(Ae([],Z(C),!1),Z(R),!1),fe=re.filter(function(ae){return ae.element&&!ae.gapRects}),U=re.filter(function(ae){return ae.gapRects}).sort(function(ae,ne){return ae.gap-ne.gap});Pe(n,"onSnap",{guidelines:re.filter(function(ae){var ne=ae.element;return!ne}),elements:fe,gaps:U},!0);var Y=Xu(n,"boundMap",H,function(ae){return JSON.stringify(ae)},Yu()),te=Xu(n,"innerBoundMap",J,function(ae){return JSON.stringify(ae)},Yu());return(H===Y||J===te)&&Pe(n,"onBound",{bounds:H,innerBounds:J},!0),Ae(Ae(Ae(Ae(Ae(Ae([],Z(zq(n,fe,[m,x],L,e)),!1),Z(Lq(n,U,[m,x],L,e)),!1),Z(uR(n,"horizontal",R,[i,r],L,e)),!1),Z(uR(n,"vertical",C,[i,r],L,e)),!1),Z(cR(n,"horizontal",T,m,r,V,0,e)),!1),Z(cR(n,"vertical",S,x,i,I,1,e)),!1)},dragStart:function(n,e){n.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Vm(n)},drag:function(n){var e=n.state;Vm(n)||(e.guidelines=s_(n)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(n){this.unset(n)},dragEnd:function(n){this.unset(n)},dragControlCondition:function(n,e){if(Zq(n,e)||a_(n,e))return!0;if(!e.isRequest&&e.inputEvent)return ir(e.inputEvent.target,Ge("snap-control"))},dragControlStart:function(n){n.state.snapRenderInfo=null,Vm(n)},dragControl:function(n){this.drag(n)},dragControlEnd:function(n){this.unset(n)},dragGroupStart:function(n,e){this.dragStart(n,e)},dragGroup:function(n){this.drag(n)},dragGroupEnd:function(n){this.unset(n)},dragGroupControlStart:function(n){n.state.snapRenderInfo=null,Vm(n)},dragGroupControl:function(n){this.drag(n)},dragGroupControlEnd:function(n){this.unset(n)},unset:function(n){var e=n.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function eH(n,e){return[n[0]*e[0],n[1]*e[1]]}function Ge(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return XF.apply(void 0,Ae([nE],Z(n),!1))}function c4(n){n()}function tH(n){return!n||n==="none"?[1,0,0,1,0,0]:ga(n)?n:$h(n)}function wh(n,e,t){return N0(e,yc(t,e),n,yc(t.map(function(r){return-r}),e))}function nH(n,e,t){if(e==="%"){var r=fE(n.ownerSVGElement);return r[t?"width":"height"]/100}return 1}function rH(n){var e=iH(pE(n,":before"));return e.map(function(t,r){var i=wp(t),a=i.value,o=i.unit;return a*nH(n,o,r===0)})}function z0(n){return n?n.split(" "):["0","0"]}function iH(n){return z0(n.transformOrigin)}function u4(n){var e=ai(n),t=e("transform");if(t&&t!=="none")return t;if("transform"in n){var r=n.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var o=[],c=function(d){var h=i[d].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(p){return h[p]}).join(", "),")"))},u=0;u<a;++u)c(u);return o.join(" ")}return""}function Kh(n,e,t,r,i){var a,o,c=Hw(n)||pl(n),u=!1,d,h;if(!n||t)d=n;else{var p=(a=n?.assignedSlot)===null||a===void 0?void 0:a.parentElement,m=n.parentElement;p?(u=!0,h=m,d=p):d=m}for(var x=!1,_=n===e||d===e,E="relative",S=1,T=parseFloat(i?.("zoom"))||1,C=i?.("position");d&&d!==c;){e===d&&(_=!0);var R=ai(d),j=d.tagName.toLowerCase(),z=u4(d),V=R("willChange"),I=parseFloat(R("zoom"))||1;if(E=R("position"),r&&I!==1){S=I;break}if(!t&&r&&T!==1&&C&&C!=="absolute"||j==="svg"||j==="foreignobject"||E!=="static"||z&&z!=="none"||V==="transform")break;var A=(o=n?.assignedSlot)===null||o===void 0?void 0:o.parentNode,k=d.parentNode;A&&(u=!0,h=k);var O=k;if(O&&O.nodeType===11){d=O.host,x=!0,E=ai(d)("position");break}d=O,E="relative"}return{offsetZoom:S,hasSlot:u,parentSlotElement:h,isCustomElement:x,isStatic:E==="static",isEnd:_||!d||d===c,offsetParent:d||c}}function aH(n,e){var t,r=n.tagName.toLowerCase(),i=n.offsetLeft,a=n.offsetTop,o=ai(n),c=Av(i),u=!c,d,h;return!u&&(r!=="svg"||n.ownerSVGElement)?(d=RP?rH(n):z0(o("transformOrigin")).map(function(p){return parseFloat(p)}),h=d.slice(),u=!0,r==="svg"?(i=0,a=0):(t=Z(lH(n,d,n===e&&e.tagName.toLowerCase()==="g"),4),i=t[0],a=t[1],d[0]=t[2],d[1]=t[3])):(d=z0(o("transformOrigin")).map(function(p){return parseFloat(p)}),h=d.slice()),{tagName:r,isSVG:c,hasOffset:u,offset:[i||0,a||0],origin:d,targetOrigin:h}}function d4(n,e){var t=ai(n),r=ai(pl(n)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),o=parseInt(r("marginTop"),10);return t("position")==="absolute"&&((t("top")!=="auto"||t("bottom")!=="auto")&&(o=0),(t("left")!=="auto"||t("right")!=="auto")&&(a=0)),[a,o]}function o_(n){n.forEach(function(e){var t=e.matrix;t&&(e.matrix=ma(t,3,4))})}function sH(n){for(var e=n.parentElement,t=!1,r=pl(n);e;){var i=pE(e).transform;if(i&&i!=="none"){t=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:t}}function jv(n,e){return e===void 0&&(e=n.length>9),"".concat(e?"matrix3d":"matrix","(").concat(_P(n,!e).join(","),")")}function fE(n){var e=n.clientWidth,t=n.clientHeight;if(!n)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:t};var r=n.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||t,clientWidth:e,clientHeight:t}}function oH(n,e){var t,r=fE(n),i=r.width,a=r.height,o=r.clientWidth,c=r.clientHeight,u=o/i,d=c/a,h=n.preserveAspectRatio.baseVal,p=h.align,m=h.meetOrSlice,x=[0,0],_=[u,d],E=[0,0];if(p!==1){var S=(p-2)%3,T=Math.floor((p-2)/3);x[0]=i*S/2,x[1]=a*T/2;var C=m===2?Math.max(d,u):Math.min(u,d);_[0]=C,_[1]=C,E[0]=(o-i)/2*S,E[1]=(c-a)/2*T}var R=Zw(_,e);return t=Z(E,2),R[e*(e-1)]=t[0],R[e*(e-1)+1]=t[1],wh(R,e,x)}function lH(n,e,t){var r=n.tagName.toLowerCase();if(!n.getBBox||!t&&r==="g")return[0,0,0,0];var i=ai(n),a=i("transform-box")==="fill-box",o=n.getBBox(),c=fE(n.ownerSVGElement),u=o.x,d=o.y;r==="foreignobject"&&!u&&!d&&(u=parseFloat(n.getAttribute("x"))||0,d=parseFloat(n.getAttribute("y"))||0);var h=u-c.x,p=d-c.y,m=a?e[0]:e[0]-h,x=a?e[1]:e[1]-p;return[h,p,m,x]}function pn(n,e,t){return Pr(n,vc(e,t),t)}function Vc(n,e,t,r){return[[0,0],[e,0],[0,t],[e,t]].map(function(i){return pn(n,i,r)})}function Hi(n){var e=n.map(function(d){return d[0]}),t=n.map(function(d){return d[1]}),r=Math.min.apply(Math,Ae([],Z(e),!1)),i=Math.min.apply(Math,Ae([],Z(t),!1)),a=Math.max.apply(Math,Ae([],Z(e),!1)),o=Math.max.apply(Math,Ae([],Z(t),!1)),c=a-r,u=o-i;return{left:r,top:i,right:a,bottom:o,width:c,height:u}}function gR(n,e,t,r){var i=Vc(n,e,t,r);return Hi(i)}function cH(n,e,t,r,i){var a,o=n.target,c=n.origin,u=e.matrix,d=h4(o),h=d.offsetWidth,p=d.offsetHeight,m=t.getBoundingClientRect(),x=[0,0];t===pl(t)&&(x=d4(o,!0));for(var _=o.getBoundingClientRect(),E=_.left-m.left+t.scrollLeft-(t.clientLeft||0)+x[0],S=_.top-m.top+t.scrollTop-(t.clientTop||0)+x[1],T=_.width,C=_.height,R=N0(r,i,u),j=gR(R,h,p,r),z=j.left,V=j.top,I=j.width,A=j.height,k=pn(R,c,r),O=$e(k,[z,V]),B=[E+O[0]*T/I,S+O[1]*C/A],L=[0,0],M=0;++M<10;){var X=Qa(i,r);a=Z($e(pn(X,B,r),pn(X,k,r)),2),L[0]=a[0],L[1]=a[1];var Q=N0(r,i,yc(L,r),u),$=gR(Q,h,p,r),H=$.left,J=$.top,re=H-E,fe=J-S;if(_e(re)<2&&_e(fe)<2)break;B[0]-=re,B[1]-=fe}return L.map(function(U){return Math.round(U)})}function uH(n,e,t){var r=n.length===16,i=r?4:3,a=e.map(function(u){return pn(n,u,i)}),o=t.left,c=t.top;return a.map(function(u){return[u[0]+o,u[1]+c]})}function Ki(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function f4(n,e){return Ki([e[0]-n[0],e[1]-n[1]])}function sh(n,e,t,r){t===void 0&&(t=1),r===void 0&&(r=jn(n,e));var i=f4(n,e);return{transform:"translateY(-50%) translate(".concat(n[0],"px, ").concat(n[1],"px) rotate(").concat(r,"rad) scaleY(").concat(t,")"),width:"".concat(i,"px")}}function L0(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=t.length,a=t.reduce(function(c,u){return c+u[0]},0)/i,o=t.reduce(function(c,u){return c+u[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(n,"rad) scale(").concat(e,")")}}function xc(n,e){var t=n[e];return ga(t)?W(W({},n),t):n}function h4(n){var e=n&&!Av(n.offsetWidth),t=0,r=0,i=0,a=0,o=0,c=0,u=0,d=0,h=0,p=0,m=0,x=0,_=1/0,E=1/0,S=1/0,T=1/0,C=0,R=0,j=!1;if(n)if(!e&&n.ownerSVGElement){var z=n.getBBox();j=!0,t=z.width,r=z.height,o=t,c=r,u=t,d=r,i=t,a=r}else{var V=ai(n),I=n.style,A=V("boxSizing")==="border-box",k=parseFloat(V("borderLeftWidth"))||0,O=parseFloat(V("borderRightWidth"))||0,B=parseFloat(V("borderTopWidth"))||0,L=parseFloat(V("borderBottomWidth"))||0,M=parseFloat(V("paddingLeft"))||0,X=parseFloat(V("paddingRight"))||0,Q=parseFloat(V("paddingTop"))||0,$=parseFloat(V("paddingBottom"))||0,H=M+X,J=Q+$,re=k+O,fe=B+L,U=H+re,Y=J+fe,te=V("position"),ae=0,ne=0;if("clientLeft"in n){var se=null;if(te==="absolute"){var me=Kh(n,pl(n));se=me.offsetParent}else se=n.parentElement;if(se){var Te=ai(se);ae=parseFloat(Te("width")),ne=parseFloat(Te("height"))}}h=Math.max(H,Xt(V("minWidth"),ae)||0),p=Math.max(J,Xt(V("minHeight"),ne)||0),_=Xt(V("maxWidth"),ae),E=Xt(V("maxHeight"),ne),isNaN(_)&&(_=1/0),isNaN(E)&&(E=1/0),C=Xt(I.width,0)||0,R=Xt(I.height,0)||0,o=parseFloat(V("width"))||0,c=parseFloat(V("height"))||0,u=_e(o-C)<1?Bx(h,C||o,_):o,d=_e(c-R)<1?Bx(p,R||c,E):c,t=u,r=d,i=u,a=d,A?(S=_,T=E,m=h,x=p,u=t-U,d=r-Y):(S=_+U,T=E+Y,m=h+U,x=p+Y,t=u+U,r=d+Y),i=u+H,a=d+J}return{svg:j,offsetWidth:t,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:u,contentHeight:d,inlineCSSWidth:C,inlineCSSHeight:R,cssWidth:o,cssHeight:c,minWidth:h,minHeight:p,maxWidth:_,maxHeight:E,minOffsetWidth:m,minOffsetHeight:x,maxOffsetWidth:S,maxOffsetHeight:T}}function p4(n,e){return jn(e>0?n[0]:n[1],e>0?n[1]:n[0])}function jm(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function g4(n,e){var t=n===pl(n)||n===Hw(n),r={clientLeft:n.clientLeft,clientTop:n.clientTop,clientWidth:n.clientWidth,clientHeight:n.clientHeight,scrollWidth:n.scrollWidth,scrollHeight:n.scrollHeight,overflow:!1};return t&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=ai(n)("overflow")!=="visible",W(W({},e),r)}function G1(n,e,t,r){var i=n.left,a=n.right,o=n.top,c=n.bottom,u=e.top,d=e.left,h={left:d+i,top:u+o,right:d+a,bottom:u+c,width:a-i,height:c-o};return t&&r?g4(t,h):h}function Eh(n,e){var t=0,r=0,i=0,a=0;if(n){var o=n.getBoundingClientRect();t=o.left,r=o.top,i=o.width,a=o.height}var c={left:t,top:r,width:i,height:a,right:t+i,bottom:r+a};return n&&e?g4(n,c):c}function dH(n){var e=n.props,t=e.groupable,r=e.svgOrigin,i=n.getState(),a=i.offsetWidth,o=i.offsetHeight,c=i.svg,u=i.transformOrigin;return!t&&c&&r?yE(r,a,o):u}function m4(n,e,t,r){var i;if(n)i=n;else if(e)i=[0,0];else{var a=t.target;i=v4(a,r)}return i}function v4(n,e){if(n){var t=n.getAttribute("data-rotation")||"",r=n.getAttribute("data-direction");if(e.deg=t,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function hE(n,e){return[Nt(e,n[0]),Nt(e,n[1]),Nt(e,n[2]),Nt(e,n[3])]}function Xi(n){var e=n.left,t=n.top,r=n.pos1,i=n.pos2,a=n.pos3,o=n.pos4;return hE([r,i,a,o],[e,t])}function l_(n,e){n[e?"controlAbles":"targetAbles"].forEach(function(t){t.unset&&t.unset(n)})}function Ku(n,e){var t=e?"controlGesto":"targetGesto",r=n[t];r?.isIdle()===!1&&l_(n,e),r?.unset(),n[t]=null}function Gr(n,e){if(e){var t=Bd(e);t.nextStyle=W(W({},t.nextStyle),n)}return{style:n,cssText:Bs(n).map(function(r){return"".concat(r0(r,"-"),": ").concat(n[r],";")}).join("")}}function y4(n,e,t){var r=e.afterTransform||e.transform;return W(W({},Gr(W(W(W({},n.style),e.style),{transform:r}),t)),{afterTransform:r,transform:n.transform})}function gt(n,e,t,r){var i=e.datas;i.datas||(i.datas={});var a=W(W({},t),{target:n.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:n,moveable:n,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=e.stop)===null||o===void 0||o.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function _i(n,e,t){var r=e.datas,i="isDrag"in t?t.isDrag:e.isDrag;return r.datas||(r.datas={}),W(W({isDrag:i},t),{moveable:n,target:n.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:n,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function zv(n,e,t){n._emitter.on(e,t)}function Pe(n,e,t,r,i){return n.triggerEvent(e,t,r,i)}function pE(n,e){return Xo(n).getComputedStyle(n,e)}function zm(n,e,t){var r={},i={};return n.filter(function(a){var o=a.name;if(r[o]||!e.some(function(c){return a[c]}))return!1;if(!t&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[o]=!0,!0})}function c_(n,e){return n===e||n==null&&e==null}function mR(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=n.length-1,r=0;r<t;++r){var i=n[r];if(!Av(i))return i}return n[t]}function b4(n,e){var t=[],r=[];return n.forEach(function(i,a){var o=e(i,a,n),c=r.indexOf(o),u=t[c]||[];c===-1&&(r.push(o),t.push(u)),u.push(i)}),t}function fH(n,e){var t=[],r={};return n.forEach(function(i,a){var o=e(i,a,n),c=r[o];c||(c=[],r[o]=c,t.push(c)),c.push(i)}),t}function x4(n){return n.reduce(function(e,t){return e.concat(t)},[])}function hd(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.sort(function(t,r){return _e(r)-_e(t)}),n[0]}function pd(n,e,t){return Pr(Qa(n,t),vc(e,t),t)}function hH(n,e){var t,r=n.is3d,i=n.rootMatrix,a=r?4:3;return t=Z(pd(i,[e.distX,e.distY],a),2),e.distX=t[0],e.distY=t[1],e}function ji(n,e,t,r){if(!t[0]&&!t[1])return e;var i=pn(n,[fR(t[0]||1),0],r),a=pn(n,[0,fR(t[1]||1)],r),o=pn(n,[t[0]/Ki(i),t[1]/Ki(a)],r);return Nt(e,o)}function la(n,e,t){return t?"".concat(n/e*100,"%"):"".concat(n,"px")}function B0(n){return _e(n)<=Hr?0:n}function gE(n){return function(e){if(!e.isDragging(n))return"";var t=nq(e,n),r=t.deg;return r?Ge("view-control-rotation".concat(r)):""}}function mE(n,e){return e===void 0&&(e=[n]),function(t,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return ir(i,Ge("direction"))&&(!n||ir(i,Ge(n)))}}function pH(n,e,t){var r,i=ud(n,{"x%":function(z){return z/100*e.offsetWidth},"y%":function(z){return z/100*e.offsetHeight}}),a=n.slice(0,t<0?void 0:t),o=n.slice(0,t<0?void 0:t+1),c=n[t]||"",u=t<0?[]:n.slice(t),d=t<0?[]:n.slice(t+1),h=i.slice(0,t<0?void 0:t),p=i.slice(0,t<0?void 0:t+1),m=(r=i[t])!==null&&r!==void 0?r:ud([""])[0],x=t<0?[]:i.slice(t),_=t<0?[]:i.slice(t+1),E=m?[m]:[],S=Pu(h),T=Pu(p),C=Pu(x),R=Pu(_),j=Wt(S,C,4);return{transforms:n,beforeFunctionMatrix:S,beforeFunctionMatrix2:T,targetFunctionMatrix:Pu(E),afterFunctionMatrix:C,afterFunctionMatrix2:R,allFunctionMatrix:j,beforeFunctions:h,beforeFunctions2:p,targetFunction:E[0],afterFunctions:x,afterFunctions2:_,beforeFunctionTexts:a,beforeFunctionTexts2:o,targetFunctionText:c,afterFunctionTexts:u,afterFunctionTexts2:d}}function gH(n){return!n||!ga(n)||zd(n)?!1:Wn(n)||"length"in n}function Ha(n,e){return n?zd(n)?n:ri(n)?e?document.querySelector(n):n:Fw(n)?n():JM(n)?n:"current"in n?n.current:n:null}function vE(n,e){if(!n)return[];var t=gH(n)?[].slice.call(n):[n];return t.reduce(function(r,i){return ri(i)&&e?Ae(Ae([],Z(r),!1),Z([].slice.call(document.querySelectorAll(i))),!1):(Wn(i)?r.push(vE(i,e)):r.push(Ha(i,e)),r)},[])}function mH(n,e,t){var r=jn(n,e)/Math.PI*180;return r=t>=0?r:180-r,r=r>=0?r:360+r,r}function vR(n,e){var t=n.rootMatrix,r=n.is3d,i=r?4:3,a=Qa(t,i);return r||(a=ma(a,3,4)),a[12]=0,a[13]=0,a[14]=0,J7(a,e)}function _4(n,e,t,r,i){var a=Z(n,2),o=a[0],c=a[1],u=0,d=0;if(i&&o&&c){var h=jn([0,0],e),p=jn([0,0],r),m=Ki(e),x=Math.cos(h-p)*m;if(!r[0])d=x,u=d*t;else if(!r[1])u=x,d=u/t;else{var _=r[0]*o,E=r[1]*c,S=Math.atan2(_+e[0],E+e[1]),T=Math.atan2(_,E);S<0&&(S+=Math.PI*2),T<0&&(T+=Math.PI*2);var C=0;_e(S-T)<Math.PI/2||_e(S-T)>Math.PI/2*3||(T+=Math.PI),C=S-T,C>Math.PI*2?C-=Math.PI*2:C>Math.PI?C=2*Math.PI-C:C<-Math.PI&&(C=-2*Math.PI-C);var R=Ki([_+e[0],E+e[1]])*Math.cos(C);u=R*Math.sin(T)-_,d=R*Math.cos(T)-E,r[0]<0&&(u*=-1),r[1]<0&&(d*=-1)}}else u=r[0]*e[0],d=r[1]*e[1];return[u,d]}function w4(n,e,t,r){var i,a=t.ratio,o=t.startOffsetWidth,c=t.startOffsetHeight,u=0,d=0,h=r.distX,p=r.distY,m=r.pinchScale,x=r.parentDistance,_=r.parentDist,E=r.parentScale,S=t.fixedDirection,T=[0,1].map(function(I){return _e(n[I]-S[I])}),C=[0,1].map(function(I){var A=T[I];return A!==0&&(A=2/A),A});if(_)u=_[0],d=_[1],e&&(u?d||(d=u/a):u=d*a);else if(cd(m))u=(m-1)*o,d=(m-1)*c;else if(E)u=(E[0]-1)*o,d=(E[1]-1)*c;else if(x){var R=o*T[0],j=c*T[1],z=Ki([R,j]);u=x/z*R*C[0],d=x/z*j*C[1]}else{var V=is({datas:t,distX:h,distY:p});V=C.map(function(I,A){return V[A]*I}),i=Z(_4([o,c],V,a,n,e),2),u=i[0],d=i[1]}return{distWidth:u,distHeight:d}}function u_(n,e){if(e){if(n==="left")return{x:"0%",y:"50%"};if(n==="top")return{x:"50%",y:"50%"};if(n==="center")return{x:"50%",y:"50%"};if(n==="right")return{x:"100%",y:"50%"};if(n==="bottom")return{x:"50%",y:"100%"};var t=Z(n.split(" "),2),r=t[0],i=t[1],a=u_(r||""),o=u_(i||""),c=W(W({},a),o),u={x:"50%",y:"50%"};return c.x&&(u.x=c.x),c.y&&(u.y=c.y),c.value&&(c.x&&!c.y&&(u.y=c.value),!c.x&&c.y&&(u.x=c.value)),u}return n==="left"?{x:"0%"}:n==="right"?{x:"100%"}:n==="top"?{y:"0%"}:n==="bottom"?{y:"100%"}:n?n==="center"?{value:"50%"}:{value:n}:{}}function yE(n,e,t){var r=u_(n,!0),i=r.x,a=r.y;return[Xt(i,e)||0,Xt(a,t)||0]}function vH(n,e,t){var r=n.map(function(a){return $e(a,e)}),i=r.map(function(a){return Ap(a,t)});return{prev:r,next:i,result:i.map(function(a){return Nt(a,e)})}}function E4(n,e){return n.length===e.length&&n.every(function(t,r){var i=e[r],a=Wn(t),o=Wn(i);return a&&o?E4(t,i):!a&&!o?t===i:!1})}function Xu(n,e,t,r,i){var a=n._store,o=a[e];if(!(e in a))if(i!=null)a[e]=i,o=i;else return a[e]=t,t;return o===t||r(o)===r(t)?o:(a[e]=t,t)}function Br(n){return n>=0?1:-1}function _e(n){return Math.abs(n)}function q1(n,e){return f7(n).map(function(t){return e(t)})}function S4(n){return cd(n)?{top:n,left:n,right:n,bottom:n}:{left:n.left||0,top:n.top||0,right:n.right||0,bottom:n.bottom||0}}var yH=Rp("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(n,e){var t=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,o=n.props,c=o.pinchable,u=o.ables;if(!c)return!1;var d="onPinch".concat(r?"Group":"","Start"),h="drag".concat(r?"Group":"","ControlStart"),p=(c===!0?n.controlAbles:u.filter(function(E){return c.indexOf(E.name)>-1})).filter(function(E){return E.canPinch&&E[h]}),m=gt(n,e,{});r&&(m.targets=r);var x=Pe(n,d,m);t.isPinch=x!==!1,t.ables=p;var _=t.isPinch;return _?(p.forEach(function(E){if(a[E.name]=a[E.name]||{},!!E[h]){var S=W(W({},e),{datas:a[E.name],parentRotate:i,isPinch:!0});E[h](n,S)}}),n.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},_):!1},pinch:function(n,e){var t=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,o=e.inputEvent,c=e.targets,u=e.angle;if(t.isPinch){var d=i*(1-1/r),h=gt(n,e,{});c&&(h.targets=c);var p="onPinch".concat(c?"Group":"");Pe(n,p,h);var m=t.ables,x="drag".concat(c?"Group":"","Control");return m.forEach(function(_){_[x]&&_[x](n,W(W({},e),{datas:a[_.name],inputEvent:o,resolveMatrix:!0,pinchScale:r,parentDistance:d,parentRotate:u,isPinch:!0}))}),h}},pinchEnd:function(n,e){var t=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,o=e.originalDatas;if(t.isPinch){var c="onPinch".concat(a?"Group":"","End"),u=_i(n,e,{isDrag:r});a&&(u.targets=a),Pe(n,c,u);var d=t.ables,h="drag".concat(a?"Group":"","ControlEnd");return d.forEach(function(p){p[h]&&p[h](n,W(W({},e),{isDrag:r,datas:o[p.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(n,e){return this.pinchStart(n,W(W({},e),{targets:n.props.targets}))},pinchGroup:function(n,e){return this.pinch(n,W(W({},e),{targets:n.props.targets}))},pinchGroupEnd:function(n,e){return this.pinchEnd(n,W(W({},e),{targets:n.props.targets}))}}),yR=mE("scalable"),bH={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:qP("scalable"),dragControlCondition:yR,viewClassName:gE("scalable"),dragControlStart:function(n,e){var t=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,o=m4(a,r,i,t),c=n.state,u=c.width,d=c.height,h=c.targetTransform,p=c.target,m=c.pos1,x=c.pos2,_=c.pos4;if(!o||!p)return!1;r||Oc(n,e),t.datas={},t.transform=h,t.prevDist=[1,1],t.direction=o,t.startOffsetWidth=u,t.startOffsetHeight=d,t.startValue=[1,1];var E=!o[0]&&!o[1]||o[0]||!o[1];Mv(n,e,"scale"),t.isWidth=E;function S(V){t.ratio=V&&isFinite(V)?V:0}t.startPositions=Xi(n.state);function T(V){var I=n4(t.startPositions,V);t.fixedDirection=I.fixedDirection,t.fixedPosition=I.fixedPosition,t.fixedOffset=I.fixedOffset}t.setFixedDirection=T,S(Ms(m,x)/Ms(x,_)),T([-o[0],-o[1]]);var C=function(V){t.minScaleSize=V},R=function(V){t.maxScaleSize=V};C([-1/0,-1/0]),R([1/0,1/0]);var j=gt(n,e,W(W({direction:o,set:function(V){t.startValue=V},setRatio:S,setFixedDirection:T,setMinScaleSize:C,setMaxScaleSize:R},Nv(n,e)),{dragStart:Lr.dragStart(n,new dd().dragStart([0,0],e))})),z=Pe(n,"onScaleStart",j);return t.startFixedDirection=t.fixedDirection,z!==!1&&(t.isScale=!0,n.state.snapRenderInfo={request:e.isRequest,direction:o}),t.isScale?j:!1},dragControl:function(n,e){Dv(n,e,"scale");var t=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,o=e.dragClient,c=e.isRequest,u=e.useSnap,d=e.resolveMatrix,h=t.prevDist,p=t.direction,m=t.startOffsetWidth,x=t.startOffsetHeight,_=t.isScale,E=t.startValue,S=t.isWidth,T=t.ratio;if(!_)return!1;var C=n.props,R=C.throttleScale,j=C.parentMoveable,z=p;!p[0]&&!p[1]&&(z=[1,1]);var V=T&&(r??C.keepRatio)||!1,I=n.state,A=[E[0],E[1]];function k(){var xe=w4(z,V,t,e),Ee=xe.distWidth,Qe=xe.distHeight,Oe=m?(m+Ee)/m:1,Be=x?(x+Qe)/x:1;E[0]||(A[0]=Ee/m),E[1]||(A[1]=Qe/x);var ze=(z[0]||V?Oe:1)*A[0],st=(z[1]||V?Be:1)*A[1];return ze===0&&(ze=Br(h[0])*Mm),st===0&&(st=Br(h[1])*Mm),[ze,st]}var O=k();if(!a&&n.props.groupable){var B=I.snapRenderInfo||{},L=B.direction;Wn(L)&&(L[0]||L[1])&&(I.snapRenderInfo={direction:p,request:e.isRequest})}Pe(n,"onBeforeScale",gt(n,e,{scale:O,setFixedDirection:function(xe){return t.setFixedDirection(xe),O=k(),O},startFixedDirection:t.startFixedDirection,setScale:function(xe){O=xe}},!0));var M=[O[0]/A[0],O[1]/A[1]],X=o,Q=[0,0],$=Br(M[0]*M[1]),H=!o&&!i&&a;if(H||d?X=aE(n,t.targetAllTransform,[0,0],[0,0],t):o||(X=t.fixedPosition),a||(Q=Wq(n,M,p,!u&&c,t)),V){z[0]&&z[1]&&Q[0]&&Q[1]&&(Math.abs(Q[0]*m)>Math.abs(Q[1]*x)?Q[1]=0:Q[0]=0);var J=!Q[0]&&!Q[1];if(J&&(S?M[0]=ct(M[0]*A[0],R)/A[0]:M[1]=ct(M[1]*A[1],R)/A[1]),z[0]&&!z[1]||Q[0]&&!Q[1]||J&&S){M[0]+=Q[0];var re=m*M[0]*A[0]/T;M[1]=Br($*M[0])*_e(re/x/A[1])}else if(!z[0]&&z[1]||!Q[0]&&Q[1]||J&&!S){M[1]+=Q[1];var fe=x*M[1]*A[1]*T;M[0]=Br($*M[1])*_e(fe/m/A[0])}}else M[0]+=Q[0],M[1]+=Q[1],Q[0]||(M[0]=ct(M[0]*A[0],R)/A[0]),Q[1]||(M[1]=ct(M[1]*A[1],R)/A[1]);M[0]===0&&(M[0]=Br(h[0])*Mm),M[1]===0&&(M[1]=Br(h[1])*Mm),O=eH(M,[A[0],A[1]]);var U=[m,x],Y=[m*O[0],x*O[1]];Y=KM(Y,t.minScaleSize,t.maxScaleSize,V?T:!1),O=q1(2,function(xe){return U[xe]?Y[xe]/U[xe]:Y[xe]}),M=q1(2,function(xe){return O[xe]/A[xe]});var te=q1(2,function(xe){return h[xe]?M[xe]/h[xe]:M[xe]}),ae="scale(".concat(M.join(", "),")"),ne="scale(".concat(O.join(", "),")"),se=kv(t,ne,ae),me=!E[0]||!E[1],Te=WG(n,me?ne:ae,t.fixedDirection,X,t.fixedOffset,t,me),Ce=H?Te:$e(Te,t.prevInverseDist||[0,0]);if(t.prevDist=M,t.prevInverseDist=Te,O[0]===h[0]&&O[1]===h[1]&&Ce.every(function(xe){return!xe})&&!j&&!H)return!1;var Ne=gt(n,e,W({offsetWidth:m,offsetHeight:x,direction:p,scale:O,dist:M,delta:te,isPinch:!!a},zP(n,se,Ce,a,e)));return Pe(n,"onScale",Ne),Ne},dragControlEnd:function(n,e){var t=e.datas;if(!t.isScale)return!1;t.isScale=!1;var r=_i(n,e,{});return Pe(n,"onScaleEnd",r),r},dragGroupControlCondition:yR,dragGroupControlStart:function(n,e){var t=e.datas,r=this.dragControlStart(n,e);if(!r)return!1;var i=fa(n,"resizable",e);t.moveableScale=n.scale;var a=Ps(n,this,"dragControlStart",e,function(d,h){return O0(n,d,t,h)}),o=function(d){r.setFixedDirection(d),a.forEach(function(h,p){h.setFixedDirection(d),O0(n,h.moveable,t,i[p])})};t.setFixedDirection=o;var c=W(W({},r),{targets:n.props.targets,events:a,setFixedDirection:o}),u=Pe(n,"onScaleGroupStart",c);return t.isScale=u!==!1,t.isScale?c:!1},dragGroupControl:function(n,e){var t=e.datas;if(t.isScale){zv(n,"onBeforeScale",function(h){Pe(n,"onBeforeScaleGroup",gt(n,e,W(W({},h),{targets:n.props.targets}),!0))});var r=this.dragControl(n,e);if(r){var i=r.dist,a=t.moveableScale;n.scale=[i[0]*a[0],i[1]*a[1]];var o=n.props.keepRatio,c=t.fixedPosition,u=Ps(n,this,"dragControl",e,function(h,p){var m=Z(Pr(Cp(n.rotation/180*Math.PI,3),[p.datas.originalX*i[0],p.datas.originalY*i[1],1],3),2),x=m[0],_=m[1];return W(W({},p),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:Nt(c,[x,_])})}),d=W({targets:n.props.targets,events:u},r);return Pe(n,"onScaleGroup",d),d}}},dragGroupControlEnd:function(n,e){var t=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(n,e);var i=Ps(n,this,"dragControlEnd",e),a=_i(n,e,{targets:n.props.targets,events:i});return Pe(n,"onScaleGroupEnd",a),t}},request:function(){var n={},e=0,t=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:n,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,t+=i.deltaHeight,{datas:n,parentDist:[e,t],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:n,isDrag:!0,useSnap:r}}}}};function ko(n,e){return n.map(function(t,r){return D0(t,e[r],1,2)})}function bR(n,e,t){var r=jn(n,e),i=jn(n,t),a=i-r;return a>=0?a:a+2*Math.PI}function xH(n,e){var t=bR(n[0],n[1],n[2]),r=bR(e[0],e[1],e[2]),i=Math.PI;return!(t>=i&&r<=i||t<=i&&r>=i)}var _H={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:gE("warpable"),render:function(n,e){var t=n.props,r=t.resizable,i=t.scalable,a=t.warpable,o=t.zoom;if(r||i||!a)return[];var c=n.state,u=c.pos1,d=c.pos2,h=c.pos3,p=c.pos4,m=ko(u,d),x=ko(d,u),_=ko(u,h),E=ko(h,u),S=ko(h,p),T=ko(p,h),C=ko(d,p),R=ko(p,d);return Ae([e.createElement("div",{className:Ge("line"),key:"middeLine1",style:sh(m,S,o)}),e.createElement("div",{className:Ge("line"),key:"middeLine2",style:sh(x,T,o)}),e.createElement("div",{className:Ge("line"),key:"middeLine3",style:sh(_,C,o)}),e.createElement("div",{className:Ge("line"),key:"middeLine4",style:sh(E,R,o)})],Z(HP(n,"warpable",e)),!1)},dragControlCondition:function(n,e){if(e.isRequest)return!1;var t=e.inputEvent.target;return ir(t,Ge("direction"))&&ir(t,Ge("warpable"))},dragControlStart:function(n,e){var t=e.datas,r=e.inputEvent,i=n.props.target,a=r.target,o=v4(a,t);if(!o||!i)return!1;var c=n.state,u=c.transformOrigin,d=c.is3d,h=c.targetTransform,p=c.targetMatrix,m=c.width,x=c.height,_=c.left,E=c.top;t.datas={},t.targetTransform=h,t.warpTargetMatrix=d?p:ma(p,3,4),t.targetInverseMatrix=bP(Qa(t.warpTargetMatrix,4),3,4),t.direction=o,t.left=_,t.top=E,t.poses=[[0,0],[m,0],[0,x],[m,x]].map(function(C){return $e(C,u)}),t.nextPoses=t.poses.map(function(C){var R=Z(C,2),j=R[0],z=R[1];return Pr(t.warpTargetMatrix,[j,z,0,1],4)}),t.startValue=rn(4),t.prevMatrix=rn(4),t.absolutePoses=Xi(c),t.posIndexes=jP(o),Oc(n,e),Mv(n,e,"matrix3d"),c.snapRenderInfo={request:e.isRequest,direction:o};var S=gt(n,e,W({set:function(C){t.startValue=C}},Nv(n,e))),T=Pe(n,"onWarpStart",S);return T!==!1&&(t.isWarp=!0),t.isWarp},dragControl:function(n,e){var t=e.datas,r=e.isRequest,i=e.distX,a=e.distY,o=t.targetInverseMatrix,c=t.prevMatrix,u=t.isWarp,d=t.startValue,h=t.poses,p=t.posIndexes,m=t.absolutePoses;if(!u)return!1;if(Dv(n,e,"matrix3d"),Ud(n,"warpable")){var x=p.map(function(k){return m[k]});x.length>1&&x.push([(x[0][0]+x[1][0])/2,(x[0][1]+x[1][1])/2]);var _=Vv(n,r,{horizontal:x.map(function(k){return k[1]+a}),vertical:x.map(function(k){return k[0]+i})}),E=_.horizontal,S=_.vertical;a-=E.offset,i-=S.offset}var T=is({datas:t,distX:i,distY:a},!0),C=t.nextPoses.slice();if(p.forEach(function(k){C[k]=Nt(C[k],T)}),!BG.every(function(k){return xH(k.map(function(O){return h[O]}),k.map(function(O){return C[O]}))}))return!1;var R=Jw(h[0],h[2],h[1],h[3],C[0],C[2],C[1],C[3]);if(!R.length)return!1;var j=Wt(o,R,4),z=OP(t,j,!0),V=Wt(Qa(c,4),z,4);t.prevMatrix=z;var I=Wt(d,z,4),A=kv(t,"matrix3d(".concat(I.join(", "),")"),"matrix3d(".concat(z.join(", "),")"));return iE(e,A),Pe(n,"onWarp",gt(n,e,W({delta:V,matrix:I,dist:z,multiply:Wt,transform:A},Gr({transform:A},e)))),!0},dragControlEnd:function(n,e){var t=e.datas,r=e.isDrag;return t.isWarp?(t.isWarp=!1,Pe(n,"onWarpEnd",_i(n,e,{})),r):!1}},wH=Ge("area-pieces"),Lm=Ge("area-piece"),T4=Ge("avoid"),EH=Ge("view-dragging");function H1(n){var e=n.areaElement;if(e){var t=n.state,r=t.width,i=t.height;ZM(e,T4),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function xR(n){return n.createElement("div",{key:"area_pieces",className:wH},n.createElement("div",{className:Lm}),n.createElement("div",{className:Lm}),n.createElement("div",{className:Lm}),n.createElement("div",{className:Lm}))}var A4={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(n,e){var t=n.props,r=t.target,i=t.dragArea,a=t.groupable,o=t.passDragArea,c=n.getState(),u=c.width,d=c.height,h=c.renderPoses,p=o?Ge("area","pass"):Ge("area");if(a)return[e.createElement("div",{key:"area",ref:Ns(n,"areaElement"),className:p}),xR(e)];if(!r||!i)return[];var m=Jw([0,0],[u,0],[0,d],[u,d],h[0],h[1],h[2],h[3]),x=m.length?jv(m,!0):"none";return[e.createElement("div",{key:"area",ref:Ns(n,"areaElement"),className:p,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(d,"px"),transformOrigin:"0 0",transform:x}}),xR(e)]},dragStart:function(n,e){var t=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;t.isDragArea=!1;var o=n.areaElement,c=n.state,u=c.moveableClientRect,d=c.renderPoses,h=c.rootMatrix,p=c.is3d,m=u.left,x=u.top,_=Hi(d),E=_.left,S=_.top,T=_.width,C=_.height,R=p?4:3,j=Z(pd(h,[r-m,i-x],R),2),z=j[0],V=j[1];z-=E,V-=S;var I=[{left:E,top:S,width:T,height:V-10},{left:E,top:S,width:z-10,height:C},{left:E,top:S+V+10,width:T,height:C-V-10},{left:E+z+10,top:S,width:T-z-10,height:C}],A=[].slice.call(o.nextElementSibling.children);I.forEach(function(k,O){A[O].style.cssText="left: ".concat(k.left,"px;top: ").concat(k.top,"px; width: ").concat(k.width,"px; height: ").concat(k.height,"px;")}),QM(o,T4),c.disableNativeEvent=!0},drag:function(n,e){var t=e.datas,r=e.inputEvent;if(this.enableNativeEvent(n),!r)return!1;t.isDragArea||(t.isDragArea=!0,H1(n))},dragEnd:function(n,e){this.enableNativeEvent(n);var t=e.inputEvent,r=e.datas;if(!t)return!1;r.isDragArea||H1(n)},dragGroupStart:function(n,e){return this.dragStart(n,e)},dragGroup:function(n,e){return this.drag(n,e)},dragGroupEnd:function(n,e){return this.dragEnd(n,e)},unset:function(n){H1(n),n.state.disableNativeEvent=!1},enableNativeEvent:function(n){var e=n.state;e.disableNativeEvent&&YM(function(){e.disableNativeEvent=!1})}},SH=Rp("origin",{props:["origin","svgOrigin"],render:function(n,e){var t=n.props,r=t.zoom,i=t.svgOrigin,a=t.groupable,o=n.getState(),c=o.beforeOrigin,u=o.rotation,d=o.svg,h=o.allMatrix,p=o.is3d,m=o.left,x=o.top,_=o.offsetWidth,E=o.offsetHeight,S;if(!a&&d&&i){var T=Z(yE(i,_,E),2),C=T[0],R=T[1],j=p?4:3,z=pn(h,[C,R],j);S=L0(u,r,$e(z,[m,x]))}else S=L0(u,r,c);return[e.createElement("div",{className:Ge("control","origin"),style:S,key:"beforeOrigin"})]}});function TH(n){var e=n.scrollContainer;return[e.scrollLeft,e.scrollTop]}var AH={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(n,e){var t=n.props,r=t.scrollContainer,i=r===void 0?n.getContainer():r,a=t.scrollOptions,o=new aG,c=Ha(i,!0);e.datas.dragScroll=o,n.state.dragScroll=o;var u=e.isControl?"controlGesto":"targetGesto",d=e.targets;o.on("scroll",function(h){var p=h.container,m=h.direction,x=gt(n,e,{scrollContainer:p,direction:m}),_=d?"onScrollGroup":"onScroll";d&&(x.targets=d),Pe(n,_,x)}).on("move",function(h){var p=h.offsetX,m=h.offsetY,x=h.inputEvent;n[u].scrollBy(p,m,x.inputEvent,!1)}).on("scrollDrag",function(h){var p=h.next;p(n[u].getCurrentEvent())}),o.dragStart(e,W({container:c},a))},checkScroll:function(n,e){var t=e.datas.dragScroll;if(t){var r=n.props,i=r.scrollContainer,a=i===void 0?n.getContainer():i,o=r.scrollThreshold,c=o===void 0?0:o,u=r.scrollThrottleTime,d=u===void 0?0:u,h=r.getScrollPosition,p=h===void 0?TH:h,m=r.scrollOptions;return t.drag(e,W({container:a,threshold:c,throttleTime:d,getScrollPosition:function(x){return p({scrollContainer:x.container,direction:x.direction})}},m)),!0}},drag:function(n,e){return this.checkScroll(n,e)},dragEnd:function(n,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(n,e){return this.dragStart(n,W(W({},e),{isControl:!0}))},dragControl:function(n,e){return this.drag(n,e)},dragControlEnd:function(n,e){return this.dragEnd(n,e)},dragGroupStart:function(n,e){return this.dragStart(n,W(W({},e),{targets:n.props.targets}))},dragGroup:function(n,e){return this.drag(n,W(W({},e),{targets:n.props.targets}))},dragGroupEnd:function(n,e){return this.dragEnd(n,W(W({},e),{targets:n.props.targets}))},dragGroupControlStart:function(n,e){return this.dragStart(n,W(W({},e),{targets:n.props.targets,isControl:!0}))},dragGroupControl:function(n,e){return this.drag(n,W(W({},e),{targets:n.props.targets}))},dragGroupControEnd:function(n,e){return this.dragEnd(n,W(W({},e),{targets:n.props.targets}))},unset:function(n){var e,t=n.state;(e=t.dragScroll)===null||e===void 0||e.dragEnd(),t.dragScroll=null}},C4={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},CH=Rp("padding",{props:["padding"],render:function(n,e){var t=n.props;if(t.dragArea)return[];var r=S4(t.padding||{}),i=r.left,a=r.top,o=r.right,c=r.bottom,u=n.getState(),d=u.renderPoses,h=u.pos1,p=u.pos2,m=u.pos3,x=u.pos4,_=[h,p,m,x],E=[];return i>0&&E.push([0,2]),a>0&&E.push([0,1]),o>0&&E.push([1,3]),c>0&&E.push([2,3]),E.map(function(S,T){var C=Z(S,2),R=C[0],j=C[1],z=_[R],V=_[j],I=d[R],A=d[j],k=Jw([0,0],[100,0],[0,100],[100,100],z,V,I,A);if(k.length)return e.createElement("div",{key:"padding".concat(T),className:Ge("padding"),style:{transform:jv(k,!0)}})})}}),_R=["nw","ne","se","sw"];function Bm(n,e){var t=n[0]+n[1],r=t>e?e/t:1;return n[0]*=r,n[1]=e-n[1]*r,n}var IH=[1,2,5,6],RH=[0,3,4,7],Zl=[1,-1,-1,1],Jl=[1,1,-1,-1];function bE(n,e,t,r,i,a,o,c){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=t),c===void 0&&(c=r);var u=[],d=!1,h=n.filter(function(m){return!m.virtual}),p=h.map(function(m){var x=m.horizontal,_=m.vertical,E=m.pos;if(_&&!d&&(d=!0,u.push("/")),d){var S=Math.max(0,_===1?E[1]-a:c-E[1]);return u.push(la(S,r,e)),S}else{var S=Math.max(0,x===1?E[0]-i:o-E[0]);return u.push(la(S,t,e)),S}});return{radiusPoses:h,styles:u,raws:p}}function I4(n){for(var e=[0,0],t=[0,0],r=n.length,i=0;i<r;++i){var a=n[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,t[0]=i+1),a.vertical&&(t[1]===0&&(t[0]=i),t[1]=i-t[0]+1))}return{horizontalRange:e,verticalRange:t}}function R4(n,e,t,r,i,a,o){var c,u,d,h;a===void 0&&(a=[0,0]),o===void 0&&(o=!1);var p=n.indexOf("/"),m=(p>-1?n.slice(0,p):n).length,x=n.slice(0,m),_=n.slice(m+1),E=x.length,S=_.length,T=S>0,C=Z(x,4),R=C[0],j=R===void 0?"0px":R,z=C[1],V=z===void 0?j:z,I=C[2],A=I===void 0?j:I,k=C[3],O=k===void 0?V:k,B=Z(_,4),L=B[0],M=L===void 0?j:L,X=B[1],Q=X===void 0?T?M:V:X,$=B[2],H=$===void 0?T?M:A:$,J=B[3],re=J===void 0?T?Q:O:J,fe=[j,V,A,O].map(function(se){return Xt(se,e)}),U=[M,Q,H,re].map(function(se){return Xt(se,t)}),Y=fe.slice(),te=U.slice();c=Z(Bm([Y[0],Y[1]],e),2),Y[0]=c[0],Y[1]=c[1],u=Z(Bm([Y[3],Y[2]],e),2),Y[3]=u[0],Y[2]=u[1],d=Z(Bm([te[0],te[3]],t),2),te[0]=d[0],te[3]=d[1],h=Z(Bm([te[1],te[2]],t),2),te[1]=h[0],te[2]=h[1];var ae=o?Y:Y.slice(0,Math.max(a[0],E)),ne=o?te:te.slice(0,Math.max(a[1],S));return Ae(Ae([],Z(ae.map(function(se,me){var Te=_R[me];return{virtual:me>=E,horizontal:Zl[me],vertical:0,pos:[r+se,i+(Jl[me]===-1?t:0)],sub:!0,raw:fe[me],direction:Te}})),!1),Z(ne.map(function(se,me){var Te=_R[me];return{virtual:me>=S,horizontal:0,vertical:Jl[me],pos:[r+(Zl[me]===-1?e:0),i+se],sub:!0,raw:U[me],direction:Te}})),!1)}function DH(n,e,t,r,i){i===void 0&&(i=e.length);var a=I4(n.slice(r)),o=a.horizontalRange,c=a.verticalRange,u=t-r,d=0;if(u===0)d=i;else if(u>0&&u<o[1])d=o[1]-u;else if(u>=c[0])d=c[0]+c[1]-u;else return;n.splice(t,d),e.splice(t,d)}function kH(n,e,t,r,i,a,o,c,u,d,h){d===void 0&&(d=0),h===void 0&&(h=0);var p=I4(n.slice(t)),m=p.horizontalRange,x=p.verticalRange;if(r>-1)for(var _=Zl[r]===1?a-d:c-a,E=m[1];E<=r;++E){var S=Jl[E]===1?h:u,T=0;if(r===E?T=a:E===0?T=d+_:Zl[E]===-1&&(T=c-(e[t][0]-d)),n.splice(t+E,0,{horizontal:Zl[E],vertical:0,pos:[T,S]}),e.splice(t+E,0,[T,S]),E===0)break}else if(i>-1){var C=Jl[i]===1?o-h:u-o;if(m[1]===0&&x[1]===0){var R=[d+C,h];n.push({horizontal:Zl[0],vertical:0,pos:R}),e.push(R)}for(var j=x[0],E=x[1];E<=i;++E){var T=Zl[E]===1?d:c,S=0;if(i===E?S=o:E===0?S=h+C:Jl[E]===1?S=e[t+j][1]:Jl[E]===-1&&(S=u-(e[t+j][1]-h)),n.push({horizontal:0,vertical:Jl[E],pos:[T,S]}),e.push([T,S]),E===0)break}}}function NH(n,e){e===void 0&&(e=n.map(function(i){return i.raw}));var t=n.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=n.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:t,verticals:r}}var MH=[[0,-1,"n"],[1,0,"e"]],PH=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function xE(n,e,t){var r=n.props.clipRelative,i=n.state,a=i.width,o=i.height,c=e,u=c.type,d=c.poses,h=u==="rect",p=u==="circle";if(u==="polygon")return t.map(function(V){return"".concat(la(V[0],a,r)," ").concat(la(V[1],o,r))});if(h||u==="inset"){var m=t[1][1],x=t[3][0],_=t[7][0],E=t[5][1];if(h)return[m,x,E,_].map(function(V){return"".concat(V,"px")});var S=[m,a-x,o-E,_].map(function(V,I){return la(V,I%2?a:o,r)});if(t.length>8){var T=Z($e(t[4],t[0]),2),C=T[0],R=T[1];S.push.apply(S,Ae(["round"],Z(bE(d.slice(8).map(function(V,I){return W(W({},V),{pos:t[I]})}),r,C,R,_,m,x,E).styles),!1))}return S}else if(p||u==="ellipse"){var j=t[0],z=la(_e(t[1][1]-j[1]),p?Math.sqrt((a*a+o*o)/2):o,r),S=p?[z]:[la(_e(t[2][0]-j[0]),a,r),z];return S.push("at",la(j[0],a,r),la(j[1],o,r)),S}}function U0(n,e,t,r){var i=[r,(r+e)/2,e],a=[n,(n+t)/2,t];return PH.map(function(o){var c=Z(o,3),u=c[0],d=c[1],h=c[2],p=i[u+1],m=a[d+1];return{vertical:_e(d),horizontal:_e(u),direction:h,pos:[p,m]}})}function D4(n){var e=[1/0,-1/0],t=[1/0,-1/0];return n.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),t[0]=Math.min(t[0],i[1]),t[1]=Math.max(t[1],i[1])}),[_e(e[1]-e[0]),_e(t[1]-t[0])]}function wR(n,e,t,r,i){var a,o,c,u,d,h,p,m,x;if(n){var _=i;if(!_){var E=ai(n),S=E("clipPath");_=S!=="none"?S:E("clip")}if(!((!_||_==="none"||_==="auto")&&(_=r,!_))){var T=$M(_),C=T.prefix,R=C===void 0?_:C,j=T.value,z=j===void 0?"":j,V=R==="circle",I=" ";if(R==="polygon"){var A=sc(z||"0% 0%, 100% 0%, 100% 100%, 0% 100%");I=",";var k=A.map(function(Mt){var yn=Z(Mt.split(" "),2),dn=yn[0],bt=yn[1];return{vertical:1,horizontal:1,pos:[Xt(dn,e),Xt(bt,t)]}}),O=bc(k.map(function(Mt){return Mt.pos}));return{type:R,clipText:_,poses:k,splitter:I,left:O.minX,right:O.maxX,top:O.minY,bottom:O.maxY}}else if(V||R==="ellipse"){var B="",L="",M=0,X=0,A=il(z);if(V){var Q="";a=Z(A,4),o=a[0],Q=o===void 0?"50%":o,c=a[2],B=c===void 0?"50%":c,u=a[3],L=u===void 0?"50%":u,M=Xt(Q,Math.sqrt((e*e+t*t)/2)),X=M}else{var $="",H="";d=Z(A,5),h=d[0],$=h===void 0?"50%":h,p=d[1],H=p===void 0?"50%":p,m=d[3],B=m===void 0?"50%":m,x=d[4],L=x===void 0?"50%":x,M=Xt($,e),X=Xt(H,t)}var J=[Xt(B,e),Xt(L,t)],k=Ae([{vertical:1,horizontal:1,pos:J,direction:"nesw"}],Z(MH.slice(0,V?1:2).map(function(dn){return{vertical:_e(dn[1]),horizontal:dn[0],direction:dn[2],sub:!0,pos:[J[0]+dn[0]*M,J[1]+dn[1]*X]}})),!1);return{type:R,clipText:_,radiusX:M,radiusY:X,left:J[0]-M,top:J[1]-X,right:J[0]+M,bottom:J[1]+X,poses:k,splitter:I}}else if(R==="inset"){var A=il(z||"0 0 0 0"),re=A.indexOf("round"),fe=(re>-1?A.slice(0,re):A).length,U=A.slice(fe+1),Y=Z(A.slice(0,fe),4),te=Y[0],ae=Y[1],ne=ae===void 0?te:ae,se=Y[2],me=se===void 0?te:se,Te=Y[3],Ce=Te===void 0?ne:Te,Ne=Z([te,me].map(function(dn){return Xt(dn,t)}),2),xe=Ne[0],Ee=Ne[1],Qe=Z([Ce,ne].map(function(dn){return Xt(dn,e)}),2),Oe=Qe[0],Be=Qe[1],ze=e-Be,st=t-Ee,yt=R4(U,ze-Oe,st-xe,Oe,xe),k=Ae(Ae([],Z(U0(xe,ze,st,Oe)),!1),Z(yt),!1);return{type:"inset",clipText:_,poses:k,top:xe,left:Oe,right:ze,bottom:st,radius:U,splitter:I}}else if(R==="rect"){var A=sc(z||"0px, ".concat(e,"px, ").concat(t,"px, 0px"));I=",";var Ve=Z(A.map(function(Ar){var Zn=wp(Ar).value;return Zn}),4),Ke=Ve[0],Be=Ve[1],Ee=Ve[2],Oe=Ve[3],k=U0(Ke,Be,Ee,Oe);return{type:"rect",clipText:_,poses:k,top:Ke,right:Be,bottom:Ee,left:Oe,values:A,splitter:I}}}}}function OH(n,e,t,r,i){var a=n[e],o=a.direction,c=a.sub,u=n.map(function(){return[0,0]}),d=o?o.split(""):[];if(r&&e<8){var h=d.filter(function(M){return M==="w"||M==="e"}),p=d.filter(function(M){return M==="n"||M==="s"}),m=h[0],x=p[0];u[e]=t;var _=Z(D4(n),2),E=_[0],S=_[1],T=E&&S?E/S:0;if(T&&i){var C=(e+4)%8,R=n[C].pos,j=[0,0];o.indexOf("w")>-1?j[0]=-1:o.indexOf("e")>-1&&(j[0]=1),o.indexOf("n")>-1?j[1]=-1:o.indexOf("s")>-1&&(j[1]=1);var z=_4([E,S],t,T,j,!0),V=E+z[0],I=S+z[1],A=R[1],k=R[1],O=R[0],B=R[0];j[0]===-1?O=B-V:j[0]===1?B=O+V:(O=O-V/2,B=B+V/2),j[1]===-1?A=k-I:(j[1]===1||(A=k-I/2),k=A+I);var L=U0(A,B,k,O);n.forEach(function(M,X){u[X][0]=L[X].pos[0]-M.pos[0],u[X][1]=L[X].pos[1]-M.pos[1]})}else n.forEach(function(M,X){var Q=M.direction;Q&&(Q.indexOf(m)>-1&&(u[X][0]=t[0]),Q.indexOf(x)>-1&&(u[X][1]=t[1]))}),m&&(u[1][0]=t[0]/2,u[5][0]=t[0]/2),x&&(u[3][1]=t[1]/2,u[7][1]=t[1]/2)}else o&&!c?d.forEach(function(M){var X=M==="n"||M==="s";n.forEach(function(Q,$){var H=Q.direction,J=Q.horizontal,re=Q.vertical;!H||H.indexOf(M)===-1||(u[$]=[X||!J?0:t[0],!X||!re?0:t[1]])})}):u[e]=t;return u}function VH(n,e){var t=Z(PP(n,e),2),r=t[0],i=t[1],a=e.datas,o=a.clipPath,c=a.clipIndex,u=o,d=u.type,h=u.poses,p=u.splitter,m=h.map(function(C){return C.pos});if(d==="polygon")m.splice(c,0,[r,i]);else if(d==="inset"){var x=IH.indexOf(c),_=RH.indexOf(c),E=h.length;if(kH(h,m,8,x,_,r,i,m[4][0],m[4][1],m[0][0],m[0][1]),E===h.length)return}else return;var S=xE(n,o,m),T="".concat(d,"(").concat(S.join(p),")");Pe(n,"onClip",gt(n,e,W({clipEventType:"added",clipType:d,poses:m,clipStyles:S,clipStyle:T,distX:0,distY:0},Gr({clipPath:T},e))))}function jH(n,e){var t=e.datas,r=t.clipPath,i=t.clipIndex,a=r,o=a.type,c=a.poses,u=a.splitter,d=c.map(function(x){return x.pos}),h=d.length;if(o==="polygon")c.splice(i,1),d.splice(i,1);else if(o==="inset"){if(i<8||(DH(c,d,i,8,h),h===c.length))return}else return;var p=xE(n,r,d),m="".concat(o,"(").concat(p.join(u),")");Pe(n,"onClip",gt(n,e,W({clipEventType:"removed",clipType:o,poses:d,clipStyles:p,clipStyle:m,distX:0,distY:0},Gr({clipPath:m},e))))}var zH={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(n,e){var t=n.props,r=t.customClipPath,i=t.defaultClipPath,a=t.clipArea,o=t.zoom,c=t.groupable,u=n.getState(),d=u.target,h=u.width,p=u.height,m=u.allMatrix,x=u.is3d,_=u.left,E=u.top,S=u.pos1,T=u.pos2,C=u.pos3,R=u.pos4,j=u.clipPathState,z=u.snapBoundInfos,V=u.rotation;if(!d||c)return[];var I=wR(d,h,p,i||"inset",j||r);if(!I)return[];var A=x?4:3,k=I.type,O=I.poses,B=O.map(function(Be){var ze=pn(m,Be.pos,A);return[ze[0]-_,ze[1]-E]}),L=[],M=[],X=k==="rect",Q=k==="inset",$=k==="polygon";if(X||Q||$){var H=Q?B.slice(0,8):B;M=H.map(function(Be,ze){var st=ze===0?H[H.length-1]:H[ze-1],yt=jn(st,Be),Ve=f4(st,Be);return e.createElement("div",{key:"clipLine".concat(ze),className:Ge("line","clip-line","snap-control"),"data-clip-index":ze,style:{width:"".concat(Ve,"px"),transform:"translate(".concat(st[0],"px, ").concat(st[1],"px) rotate(").concat(yt,"rad) scaleY(").concat(o,")")}})})}if(L=B.map(function(Be,ze){return e.createElement("div",{key:"clipControl".concat(ze),className:Ge("control","clip-control","snap-control"),"data-clip-index":ze,style:{transform:"translate(".concat(Be[0],"px, ").concat(Be[1],"px) rotate(").concat(V,"rad) scale(").concat(o,")")}})}),Q&&L.push.apply(L,Ae([],Z(B.slice(8).map(function(Be,ze){return e.createElement("div",{key:"clipRadiusControl".concat(ze),className:Ge("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+ze,style:{transform:"translate(".concat(Be[0],"px, ").concat(Be[1],"px) rotate(").concat(V,"rad) scale(").concat(o,")")}})})),!1)),k==="circle"||k==="ellipse"){var J=I.left,re=I.top,fe=I.radiusX,U=I.radiusY,Y=Z($e(pn(m,[J,re],A),pn(m,[0,0],A)),2),te=Y[0],ae=Y[1],ne="none";if(!a){for(var se=Math.max(10,fe/5,U/5),me=[],Te=0;Te<=se;++Te){var Ce=Math.PI*2/se*Te;me.push([fe+(fe-o)*Math.cos(Ce),U+(U-o)*Math.sin(Ce)])}me.push([fe,-2]),me.push([-2,-2]),me.push([-2,U*2+2]),me.push([fe*2+2,U*2+2]),me.push([fe*2+2,-2]),me.push([fe,-2]),ne="polygon(".concat(me.map(function(Be){return"".concat(Be[0],"px ").concat(Be[1],"px")}).join(", "),")")}L.push(e.createElement("div",{key:"clipEllipse",className:Ge("clip-ellipse","snap-control"),style:{width:"".concat(fe*2,"px"),height:"".concat(U*2,"px"),clipPath:ne,transform:"translate(".concat(-_+te,"px, ").concat(-E+ae,"px) ").concat(jv(m))}}))}if(a){var Ne=Hi(Ae([S,T,C,R],Z(B),!1)),xe=Ne.width,Ee=Ne.height,Qe=Ne.left,Oe=Ne.top;if($||X||Q){var me=Q?B.slice(0,8):B;L.push(e.createElement("div",{key:"clipArea",className:Ge("clip-area","snap-control"),style:{width:"".concat(xe,"px"),height:"".concat(Ee,"px"),transform:"translate(".concat(Qe,"px, ").concat(Oe,"px)"),clipPath:"polygon(".concat(me.map(function(ze){return"".concat(ze[0]-Qe,"px ").concat(ze[1]-Oe,"px")}).join(", "),")")}}))}}return z&&["vertical","horizontal"].forEach(function(Be){var ze=z[Be],st=Be==="horizontal";ze.isSnap&&M.push.apply(M,Ae([],Z(ze.snap.posInfos.map(function(yt,Ve){var Ke=yt.pos,Mt=$e(pn(m,st?[0,Ke]:[Ke,0],A),[_,E]),yn=$e(pn(m,st?[h,Ke]:[Ke,p],A),[_,E]);return Yh(e,"",Mt,yn,o,"clip".concat(Be,"snap").concat(Ve),"guideline")})),!1)),ze.isBound&&M.push.apply(M,Ae([],Z(ze.bounds.map(function(yt,Ve){var Ke=yt.pos,Mt=$e(pn(m,st?[0,Ke]:[Ke,0],A),[_,E]),yn=$e(pn(m,st?[h,Ke]:[Ke,p],A),[_,E]);return Yh(e,"",Mt,yn,o,"clip".concat(Be,"bounds").concat(Ve),"guideline","bounds","bold")})),!1))}),Ae(Ae([],Z(L),!1),Z(M),!1)},dragControlCondition:function(n,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(n,e){var t=n.props,r=t.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(n,e)},drag:function(n,e){return this.dragControl(n,W(W({},e),{isDragTarget:!0}))},dragEnd:function(n,e){return this.dragControlEnd(n,e)},dragControlStart:function(n,e){var t=n.state,r=n.props,i=r.defaultClipPath,a=r.customClipPath,o=t.target,c=t.width,u=t.height,d=e.inputEvent?e.inputEvent.target:null,h=d&&d.getAttribute("class")||"",p=e.datas,m=wR(o,c,u,i||"inset",a);if(!m)return!1;var x=m.clipText,_=m.type,E=m.poses,S=Pe(n,"onClipStart",gt(n,e,{clipType:_,clipStyle:x,poses:E.map(function(T){return T.pos})}));return S===!1?(p.isClipStart=!1,!1):(p.isControl=h&&h.indexOf("clip-control")>-1,p.isLine=h.indexOf("clip-line")>-1,p.isArea=h.indexOf("clip-area")>-1||h.indexOf("clip-ellipse")>-1,p.clipIndex=d?parseInt(d.getAttribute("data-clip-index"),10):-1,p.clipPath=m,p.isClipStart=!0,t.clipPathState=x,Oc(n,e),!0)},dragControl:function(n,e){var t,r,i,a=e.datas,o=e.originalDatas,c=e.isDragTarget;if(!a.isClipStart)return!1;var u=a,d=u.isControl,h=u.isLine,p=u.isArea,m=u.clipIndex,x=u.clipPath;if(!x)return!1;var _=xc(n.props,"clippable"),E=_.keepRatio,S=0,T=0,C=o.draggable,R=is(e);c&&C?(t=Z(C.prevBeforeDist,2),S=t[0],T=t[1]):(r=Z(R,2),S=r[0],T=r[1]);var j=[S,T],z=n.state,V=z.width,I=z.height,A=!p&&!d&&!h,k=x.type,O=x.poses,B=x.splitter,L=O.map(function(dt){return dt.pos});A&&(S=-S,T=-T);var M=!d||O[m].direction==="nesw",X=k==="inset"||k==="rect",Q=O.map(function(){return[0,0]});if(d&&!M){var $=O[m],H=$.horizontal,J=$.vertical,re=[S*_e(H),T*_e(J)];Q=OH(O,m,re,X,E)}else M&&(Q=L.map(function(){return[S,T]}));var fe=L.map(function(dt,Xe){return Nt(dt,Q[Xe])}),U=Ae([],Z(fe),!1);z.snapBoundInfos=null;var Y=x.type==="circle",te=x.type==="ellipse";if(Y||te){var ae=Hi(fe),ne=_e(ae.bottom-ae.top),se=_e(te?ae.right-ae.left:ne),me=fe[0][1]+ne,Te=fe[0][0]-se,Ce=fe[0][0]+se;Y&&(U.push([Ce,ae.bottom]),Q.push([1,0])),U.push([ae.left,me]),Q.push([0,1]),U.push([Te,ae.bottom]),Q.push([1,0])}var Ne=s4((_.clipHorizontalGuidelines||[]).map(function(dt){return Xt("".concat(dt),I)}),(_.clipVerticalGuidelines||[]).map(function(dt){return Xt("".concat(dt),V)}),V,I),xe=[],Ee=[];if(Y||te)xe=[U[4][0],U[2][0]],Ee=[U[1][1],U[3][1]];else if(X){var Qe=[U[0],U[2],U[4],U[6]],Oe=[Q[0],Q[2],Q[4],Q[6]];xe=Qe.filter(function(dt,Xe){return Oe[Xe][0]}).map(function(dt){return dt[0]}),Ee=Qe.filter(function(dt,Xe){return Oe[Xe][1]}).map(function(dt){return dt[1]})}else xe=U.filter(function(dt,Xe){return Q[Xe][0]}).map(function(dt){return dt[0]}),Ee=U.filter(function(dt,Xe){return Q[Xe][1]}).map(function(dt){return dt[1]});var Be=[0,0],ze=sR(Ne,_.clipTargetBounds&&{left:0,top:0,right:V,bottom:I},xe,Ee,5,5),st=ze.horizontal,yt=ze.vertical,Ve=st.offset,Ke=yt.offset;if(st.isBound&&(Be[1]+=Ve),yt.isBound&&(Be[0]+=Ke),(te||Y)&&Q[0][0]===0&&Q[0][1]===0){var ae=Hi(fe),Mt=ae.bottom-ae.top,yn=te?ae.right-ae.left:Mt,dn=yt.isBound?_e(Ke):yt.snapIndex===0?-Ke:Ke,bt=st.isBound?_e(Ve):st.snapIndex===0?-Ve:Ve;yn-=dn,Mt-=bt,Y&&(Mt=ZP(yt,st)>0?Mt:yn,yn=Mt);var Lt=U[0];U[1][1]=Lt[1]-Mt,U[2][0]=Lt[0]+yn,U[3][1]=Lt[1]+Mt,U[4][0]=Lt[0]-yn}else if(X&&E&&d){var Ar=Z(D4(O),2),Zn=Ar[0],$r=Ar[1],ss=Zn&&$r?Zn/$r:0,Qs=O[m],Wi=Qs.direction||"",ba=U[1][1],me=U[5][1],Te=U[7][0],Ce=U[3][0];_e(Ve)<=_e(Ke)?Ve=Br(Ve)*_e(Ke)/ss:Ke=Br(Ke)*_e(Ve)*ss,Wi.indexOf("w")>-1?Te-=Ke:Wi.indexOf("e")>-1?Ce-=Ke:(Te+=Ke/2,Ce-=Ke/2),Wi.indexOf("n")>-1?ba-=Ve:Wi.indexOf("s")>-1?me-=Ve:(ba+=Ve/2,me-=Ve/2);var Vr=U0(ba,Ce,me,Te);U.forEach(function(An,Jt){var nt;nt=Z(Vr[Jt].pos,2),An[0]=nt[0],An[1]=nt[1]})}else U.forEach(function(dt,Xe){var Ze=Q[Xe];Ze[0]&&(dt[0]-=Ke),Ze[1]&&(dt[1]-=Ve)});var bn=xE(n,x,fe),cr="".concat(k,"(").concat(bn.join(B),")");if(z.clipPathState=cr,Y||te)xe=[U[4][0],U[2][0]],Ee=[U[1][1],U[3][1]];else if(X){var Qe=[U[0],U[2],U[4],U[6]];xe=Qe.map(function(Xe){return Xe[0]}),Ee=Qe.map(function(Xe){return Xe[1]})}else xe=U.map(function(dt){return dt[0]}),Ee=U.map(function(dt){return dt[1]});if(z.snapBoundInfos=sR(Ne,_.clipTargetBounds&&{left:0,top:0,right:V,bottom:I},xe,Ee,1,1),C){var en=z.is3d,Zs=z.allMatrix,ke=en?4:3,Me=Be;c&&(Me=[j[0]+Be[0]-R[0],j[1]+Be[1]-R[1]]),C.deltaOffset=Wt(Zs,[Me[0],Me[1],0,0],ke)}return Pe(n,"onClip",gt(n,e,W({clipEventType:"changed",clipType:k,poses:fe,clipStyle:cr,clipStyles:bn,distX:S,distY:T},Gr((i={},i[k==="rect"?"clip":"clipPath"]=cr,i),e)))),!0},dragControlEnd:function(n,e){this.unset(n);var t=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,o=r.isClipStart,c=r.isControl;return o?(Pe(n,"onClipEnd",_i(n,e,{})),i&&(c?jH(n,e):a&&VH(n,e)),i||t):!1},unset:function(n){n.state.clipPathState="",n.state.snapBoundInfos=null}},LH={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(n,e){return e.isRequest?e.requestAble==="originDraggable":ir(e.inputEvent.target,Ge("origin"))},dragControlStart:function(n,e){var t=e.datas;Oc(n,e);var r=gt(n,e,{dragStart:Lr.dragStart(n,new dd().dragStart([0,0],e))}),i=Pe(n,"onDragOriginStart",r);return t.startOrigin=n.state.transformOrigin,t.startTargetOrigin=n.state.targetOrigin,t.prevOrigin=[0,0],t.isDragOrigin=!0,i===!1?(t.isDragOrigin=!1,!1):r},dragControl:function(n,e){var t=e.datas,r=e.isPinch,i=e.isRequest;if(!t.isDragOrigin)return!1;var a=Z(is(e),2),o=a[0],c=a[1],u=n.state,d=u.width,h=u.height,p=u.offsetMatrix,m=u.targetMatrix,x=u.is3d,_=n.props.originRelative,E=_===void 0?!0:_,S=x?4:3,T=[o,c];if(i){var C=e.distOrigin;(C[0]||C[1])&&(T=C)}var R=Nt(t.startOrigin,T),j=Nt(t.startTargetOrigin,T),z=$e(T,t.prevOrigin),V=kp(p,m,R,S),I=n.getRect(),A=Hi(Vc(V,d,h,S)),k=[I.left-A.left,I.top-A.top];t.prevOrigin=T;var O=[la(j[0],d,E),la(j[1],h,E)].join(" "),B=Lr.drag(n,Dp(e,n.state,k,!!r)),L=gt(n,e,W(W({width:d,height:h,origin:R,dist:T,delta:z,transformOrigin:O,drag:B},Gr({transformOrigin:O,transform:B.transform},e)),{afterTransform:B.transform}));return Pe(n,"onDragOrigin",L),L},dragControlEnd:function(n,e){var t=e.datas;return t.isDragOrigin?(Pe(n,"onDragOriginEnd",_i(n,e,{})),!0):!1},dragGroupControlCondition:function(n,e){return this.dragControlCondition(n,e)},dragGroupControlStart:function(n,e){var t=this.dragControlStart(n,e);return!!t},dragGroupControl:function(n,e){var t=this.dragControl(n,e);return t?(n.transformOrigin=t.transformOrigin,!0):!1},request:function(n){var e={},t=n.getRect(),r=0,i=0,a=t.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(c){return"deltaOrigin"in c?(o[0]+=c.deltaOrigin[0],o[1]+=c.deltaOrigin[1]):"origin"in c?(o[0]=c.origin[0]-a[0],o[1]=c.origin[1]-a[1]):("x"in c?r=c.x-t.left:"deltaX"in c&&(r+=c.deltaX),"y"in c?i=c.y-t.top:"deltaY"in c&&(i+=c.deltaY)),{datas:e,distX:r,distY:i,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function BH(n,e,t,r){var i=n.filter(function(u){var d=u.virtual,h=u.horizontal;return h&&!d}).length,a=n.filter(function(u){var d=u.virtual,h=u.vertical;return h&&!d}).length,o=-1;if(e===0&&(i===0?o=0:i===1&&(o=1)),e===2&&(i<=2?o=2:i<=3&&(o=3)),e===3&&(a===0?o=4:a<4&&(o=7)),e===1&&(a<=1?o=5:a<=2&&(o=6)),!(o===-1||!n[o].virtual)){var c=n[o];UH(n,o),o<4?c.pos[0]=t:c.pos[1]=r}}function UH(n,e){e<4?n.slice(0,e+1).forEach(function(t){t.virtual=!1}):(n[0].virtual&&(n[0].virtual=!1),n.slice(4,e+1).forEach(function(t){t.virtual=!1}))}function FH(n,e){e<4?n.slice(e,4).forEach(function(t){t.virtual=!0}):n.slice(e).forEach(function(t){t.virtual=!0})}function ER(n,e,t,r,i){r===void 0&&(r=[0,0]);var a=[];return!n||n==="0px"?a=[]:a=il(n),R4(a,e,t,0,0,r,i)}function SR(n,e,t,r,i){var a=n.state,o=a.width,c=a.height,u=bE(i,n.props.roundRelative,o,c),d=u.raws,h=u.styles,p=u.radiusPoses,m=NH(p,d),x=m.horizontals,_=m.verticals,E=h.join(" ");a.borderRadiusState=E;var S=gt(n,e,W({horizontals:x,verticals:_,borderRadius:E,width:o,height:c,delta:r,dist:t},Gr({borderRadius:E},e)));return Pe(n,"onRound",S),S}function TR(n){var e,t,r=n.getState().style,i=r.borderRadius||"";if(!i&&n.props.groupable){var a=n.moveables[0],o=n.getTargets()[0];o&&(a?.props.target===o?(i=(t=(e=n.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&t!==void 0?t:"",r.borderRadius=i):(i=pE(o).borderRadius,r.borderRadius=i))}return i}var GH={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(n){var e=n.props.roundClickable;return e===!0||e==="line"?Ge("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(n,e){var t=n.getState(),r=t.target,i=t.width,a=t.height,o=t.allMatrix,c=t.is3d,u=t.left,d=t.top,h=t.borderRadiusState,p=n.props,m=p.minRoundControls,x=m===void 0?[0,0]:m,_=p.maxRoundControls,E=_===void 0?[4,4]:_,S=p.zoom,T=p.roundPadding,C=T===void 0?0:T,R=p.isDisplayShadowRoundControls,j=p.groupable;if(!r)return null;var z=h||TR(n),V=c?4:3,I=ER(z,i,a,x,!0);if(!I)return null;var A=0,k=0,O=j?[0,0]:[u,d];return I.map(function(B,L){var M=B.horizontal,X=B.vertical,Q=B.direction||"",$=Ae([],Z(B.pos),!1);k+=Math.abs(M),A+=Math.abs(X),M&&Q.indexOf("n")>-1&&($[1]-=C),X&&Q.indexOf("w")>-1&&($[0]-=C),M&&Q.indexOf("s")>-1&&($[1]+=C),X&&Q.indexOf("e")>-1&&($[0]+=C);var H=$e(pn(o,$,V),O),J=R&&R!=="horizontal",re=B.vertical?A<=E[1]&&(J||!B.virtual):k<=E[0]&&(R||!B.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(L),className:Ge("control","border-radius",B.vertical?"vertical":"",B.virtual?"virtual":""),"data-radius-index":L,style:{display:re?"block":"none",transform:"translate(".concat(H[0],"px, ").concat(H[1],"px) scale(").concat(S,")")}})})},dragControlCondition:function(n,e){if(!e.inputEvent||e.isRequest)return!1;var t=e.inputEvent.target.getAttribute("class")||"";return t.indexOf("border-radius")>-1||t.indexOf("moveable-line")>-1&&t.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(n,e){return this.dragControlCondition(n,e)},dragControlStart:function(n,e){var t=e.inputEvent,r=e.datas,i=t.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,c=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=o?parseInt(i.getAttribute("data-radius-index"),10):-1,d=-1;if(c){var h=i.getAttribute("data-line-key")||"";h&&(d=parseInt(h.replace(/render-line-/g,""),10),isNaN(d)&&(d=-1))}if(!o&&!c)return!1;var p=gt(n,e,{}),m=Pe(n,"onRoundStart",p);if(m===!1)return!1;r.lineIndex=d,r.controlIndex=u,r.isControl=o,r.isLine=c,Oc(n,e);var x=n.props,_=x.roundRelative,E=x.minRoundControls,S=E===void 0?[0,0]:E,T=n.state,C=T.width,R=T.height;r.isRound=!0,r.prevDist=[0,0];var j=TR(n),z=ER(j||"",C,R,S,!0)||[];return r.controlPoses=z,T.borderRadiusState=bE(z,_,C,R).styles.join(" "),p},dragControl:function(n,e){var t=e.datas,r=t.controlPoses;if(!t.isRound||!t.isControl||!r.length)return!1;var i=t.controlIndex,a=Z(is(e),2),o=a[0],c=a[1],u=[o,c],d=$e(u,t.prevDist),h=n.props.maxRoundControls,p=h===void 0?[4,4]:h,m=n.state,x=m.width,_=m.height,E=r[i],S=E.vertical,T=E.horizontal,C=r.map(function(j){var z=j.horizontal,V=j.vertical,I=[z*T*u[0],V*S*u[1]];if(z){if(p[0]===1)return I;if(p[0]<4&&z!==T)return I}else{if(p[1]===0)return I[1]=V*T*u[0]/x*_,I;if(S){if(p[1]===1)return I;if(p[1]<4&&V!==S)return I}}return[0,0]});C[i]=u;var R=r.map(function(j,z){return W(W({},j),{pos:Nt(j.pos,C[z])})});return i<4?R.slice(0,i+1).forEach(function(j){j.virtual=!1}):R.slice(4,i+1).forEach(function(j){j.virtual=!1}),t.prevDist=[o,c],SR(n,e,u,d,R)},dragControlEnd:function(n,e){var t=n.state;t.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,o=r.controlIndex,c=r.isLine,u=r.lineIndex,d=r.controlPoses,h=d.filter(function(T){var C=T.virtual;return C}).length,p=n.props.roundClickable,m=p===void 0?!0:p;if(i&&m){if(a&&(m===!0||m==="control"))FH(d,o);else if(c&&(m===!0||m==="line")){var x=Z(PP(n,e),2),_=x[0],E=x[1];BH(d,u,_,E)}h!==d.filter(function(T){var C=T.virtual;return C}).length&&SR(n,e,[0,0],[0,0],d)}var S=_i(n,e,{});return Pe(n,"onRoundEnd",S),t.borderRadiusState="",S},dragGroupControlStart:function(n,e){var t=this.dragControlStart(n,e);if(!t)return!1;var r=n.moveables,i=n.props.targets,a=fa(n,"roundable",e),o=W({targets:n.props.targets,events:a.map(function(c,u){return W(W({},c),{target:i[u],moveable:r[u],currentTarget:r[u]})})},t);return Pe(n,"onRoundGroupStart",o),t},dragGroupControl:function(n,e){var t=this.dragControl(n,e);if(!t)return!1;var r=n.moveables,i=n.props.targets,a=fa(n,"roundable",e),o=W({targets:n.props.targets,events:a.map(function(c,u){return W(W(W({},c),{target:i[u],moveable:r[u],currentTarget:r[u]}),Gr({borderRadius:t.borderRadius},c))})},t);return Pe(n,"onRoundGroup",o),o},dragGroupControlEnd:function(n,e){var t=n.moveables,r=n.props.targets,i=fa(n,"roundable",e);zv(n,"onRound",function(c){var u=W({targets:n.props.targets,events:i.map(function(d,h){return W(W(W({},d),{target:r[h],moveable:t[h],currentTarget:t[h]}),Gr({borderRadius:c.borderRadius},d))})},c);Pe(n,"onRoundGroup",u)});var a=this.dragControlEnd(n,e);if(!a)return!1;var o=W({targets:n.props.targets,events:i.map(function(c,u){var d;return W(W({},c),{target:r[u],moveable:t[u],currentTarget:t[u],lastEvent:(d=c.datas)===null||d===void 0?void 0:d.lastEvent})})},a);return Pe(n,"onRoundGroupEnd",o),o},unset:function(n){n.state.borderRadiusState=""}};function qH(n,e){var t=e?4:3,r=rn(t),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return n===i||n==="matrix(1,0,0,1,0,0)"}var k4={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(n,e){var t=n.state,r=t.is3d,i=t.targetMatrix,a=t.inlineTransform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(_P(i,!0),")"),c=!a||a==="none"?o:a;e.datas.startTransforms=qH(c,r)?[]:il(c)},resetStyle:function(n){var e=n.datas;e.nextStyle={},e.nextTransforms=n.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(n,e){return gt(n,e,{setTransform:function(t){e.datas.startTransforms=Wn(t)?t:il(t)},isPinch:!!e.isPinch})},fillDragParams:function(n,e){return gt(n,e,{isPinch:!!e.isPinch})},dragStart:function(n,e){this.setTransform(n,e),this.resetStyle(e),Pe(n,"onBeforeRenderStart",this.fillDragStartParams(n,e))},drag:function(n,e){e.datas.startTransforms||this.setTransform(n,e),this.resetStyle(e),Pe(n,"onBeforeRender",gt(n,e,{isPinch:!!e.isPinch}))},dragEnd:function(n,e){e.datas.startTransforms||(this.setTransform(n,e),this.resetStyle(e)),Pe(n,"onBeforeRenderEnd",gt(n,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(n,e){var t=this;this.dragStart(n,e);var r=fa(n,"beforeRenderable",e),i=n.moveables,a=r.map(function(o,c){var u=i[c];return t.setTransform(u,o),t.resetStyle(o),t.fillDragStartParams(u,o)});Pe(n,"onBeforeRenderGroupStart",gt(n,e,{isPinch:!!e.isPinch,targets:n.props.targets,setTransform:function(){},events:a}))},dragGroup:function(n,e){var t=this;this.drag(n,e);var r=fa(n,"beforeRenderable",e),i=n.moveables,a=r.map(function(o,c){var u=i[c];return t.resetStyle(o),t.fillDragParams(u,o)});Pe(n,"onBeforeRenderGroup",gt(n,e,{isPinch:!!e.isPinch,targets:n.props.targets,events:a}))},dragGroupEnd:function(n,e){this.dragEnd(n,e),Pe(n,"onBeforeRenderGroupEnd",gt(n,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:n.props.targets}))},dragControlStart:function(n,e){return this.dragStart(n,e)},dragControl:function(n,e){return this.drag(n,e)},dragControlEnd:function(n,e){return this.dragEnd(n,e)},dragGroupControlStart:function(n,e){return this.dragGroupStart(n,e)},dragGroupControl:function(n,e){return this.dragGroup(n,e)},dragGroupControlEnd:function(n,e){return this.dragGroupEnd(n,e)}},N4={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(n,e){Pe(n,"onRenderStart",gt(n,e,{isPinch:!!e.isPinch}))},drag:function(n,e){Pe(n,"onRender",this.fillDragParams(n,e))},dragAfter:function(n,e){return this.drag(n,e)},dragEnd:function(n,e){Pe(n,"onRenderEnd",this.fillDragEndParams(n,e))},dragGroupStart:function(n,e){Pe(n,"onRenderGroupStart",gt(n,e,{isPinch:!!e.isPinch,targets:n.props.targets}))},dragGroup:function(n,e){var t=this,r=fa(n,"beforeRenderable",e),i=n.moveables,a=r.map(function(o,c){var u=i[c];return t.fillDragParams(u,o)});Pe(n,"onRenderGroup",gt(n,e,W(W({isPinch:!!e.isPinch,targets:n.props.targets,transform:Pm(e),transformObject:{}},Gr(Om(e))),{events:a})))},dragGroupEnd:function(n,e){var t=this,r=fa(n,"beforeRenderable",e),i=n.moveables,a=r.map(function(o,c){var u=i[c];return t.fillDragEndParams(u,o)});Pe(n,"onRenderGroupEnd",gt(n,e,W({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:n.props.targets,events:a,transformObject:{},transform:Pm(e)},Gr(Om(e)))))},dragControlStart:function(n,e){return this.dragStart(n,e)},dragControl:function(n,e){return this.drag(n,e)},dragControlAfter:function(n,e){return this.dragAfter(n,e)},dragControlEnd:function(n,e){return this.dragEnd(n,e)},dragGroupControlStart:function(n,e){return this.dragGroupStart(n,e)},dragGroupControl:function(n,e){return this.dragGroup(n,e)},dragGroupControlEnd:function(n,e){return this.dragGroupEnd(n,e)},fillDragParams:function(n,e){var t={};return ud(P0(e)||[]).forEach(function(r){t[r.name]=r.functionValue}),gt(n,e,W({isPinch:!!e.isPinch,transformObject:t,transform:Pm(e)},Gr(Om(e))))},fillDragEndParams:function(n,e){var t={};return ud(P0(e)||[]).forEach(function(r){t[r.name]=r.functionValue}),gt(n,e,W({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:t,transform:Pm(e)},Gr(Om(e))))}};function Sh(n,e,t,r,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var c=i==="Start",u=i==="End",d=i==="After",h=n.state.target,p=a.isRequest,m=r.indexOf("Control")>-1;if(!h||c&&m&&!p&&n.areaElement===a.inputEvent.target)return!1;var x=Ae([],Z(e),!1);if(p){var _=a.requestAble;x.some(function(L){return L.name===_})||x.push.apply(x,Ae([],Z(n.props.ables.filter(function(L){return L.name===_})),!1))}if(!x.length||x.every(function(L){return L.dragRelation}))return!1;var E=a.inputEvent,S;u&&E&&(S=document.elementFromPoint(a.clientX,a.clientY)||E.target);var T=!1,C=function(){var L;T=!0,(L=a.stop)===null||L===void 0||L.call(a)},R=c&&(!n.targetGesto||!n.controlGesto||!n.targetGesto.isFlag()||!n.controlGesto.isFlag());R&&n.updateRect(i,!0,!1);var j=a.datas,z=m?"controlGesto":"targetGesto",V=n[z],I=function(L,M,X){if(!(M in L)||V!==n[z])return!1;var Q=L.name,$=j[Q]||(j[Q]={});if(c&&($.isEventStart=!X||!L[X]||L[X](n,a)),!$.isEventStart)return!1;var H=L[M](n,W(W({},a),{stop:C,datas:$,originalDatas:j,inputTarget:S}));return n._emitter.off(),c&&H===!1&&($.isEventStart=!1),H};R&&x.forEach(function(L){L.unset&&L.unset(n)}),I(k4,"drag".concat(r).concat(i));var A=0,k=0;t.forEach(function(L){if(T)return!1;var M="".concat(L).concat(r).concat(i),X="".concat(L).concat(r,"Condition");i===""&&!p&&hH(n.state,a);var Q=x.filter(function(J){return J[M]});Q=Q.filter(function(J,re){return J.name&&Q.indexOf(J)===re});var $=Q.filter(function(J){return I(J,M,X)}),H=$.length;T&&++A,H&&++k,!T&&c&&Q.length&&!H&&(A+=Q.filter(function(J){var re=J.name,fe=j[re];return fe.isEventStart?J.dragRelation!=="strong":!1}).length?1:0)}),(!d||k)&&I(N4,"drag".concat(r).concat(i));var O=V!==n[z]||A===t.length;if((u||T||O)&&(n.state.gestos={},n.moveables&&n.moveables.forEach(function(L){L.state.gestos={}}),x.forEach(function(L){L.unset&&L.unset(n)})),c&&!O&&!p&&k&&n.props.preventDefault&&a?.preventDefault(),n.isUnmounted||O)return!1;if(!c&&k&&!o||u){var B=n.props.flushSync||c4;B(function(){n.updateRect(u?i:"",!0,!1),n.forceUpdate()})}return!c&&!u&&!d&&k&&!o&&Sh(n,e,t,r,i+"After",a),!0}function _E(n,e){return function(t,r){var i;r===void 0&&(r=t.inputEvent.target);var a=r,o=n.areaElement,c=n._dragTarget;return!c||!e&&(!((i=n.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===c||c.contains(a)||a===o||!n.isMoveableElement(a)&&!n.controlBox.contains(a)||ir(a,"moveable-area")||ir(a,"moveable-padding")||ir(a,"moveable-edgeDraggable")}}function M4(n,e,t){var r=n.controlBox,i=[],a=n.props,o=a.dragArea,c=n.state.target,u=a.dragTarget;i.push(r),(!o||u)&&i.push(e),!o&&u&&c&&e!==c&&a.dragTargetSelf&&i.push(c);var d=_E(n);return O4(n,i,"targetAbles",t,{dragStart:d,pinchStart:d})}function P4(n,e){var t=n.controlBox,r=[];r.push(t);var i=_E(n,!0),a=function(o,c){if(c===void 0&&(c=o.inputEvent.target),c===t)return!0;var u=i(o,c);return!u};return O4(n,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function O4(n,e,t,r,i){i===void 0&&(i={});var a=t==="targetAbles",o=n.props,c=o.pinchOutside,u=o.pinchThreshold,d=o.preventClickEventOnDrag,h=o.preventClickDefault,p=o.checkInput,m=o.dragFocusedInput,x=o.preventDefault,_=x===void 0?!0:x,E=o.preventRightClick,S=E===void 0?!0:E,T=o.preventWheelClick,C=T===void 0?!0:T,R=o.dragContainer,j=Ha(R,!0),z={preventDefault:_,preventRightClick:S,preventWheelClick:C,container:j||Xo(n.getControlBoxElement()),pinchThreshold:u,pinchOutside:c,preventClickEventOnDrag:a?d:!1,preventClickEventOnDragStart:a?h:!1,preventClickEventByCondition:a?null:function(A){return n.controlBox.contains(A.target)},checkInput:a?p:!1,dragFocusedInput:m},V=new vG(e,z),I=r==="Control";return["drag","pinch"].forEach(function(A){["Start","","End"].forEach(function(k){V.on("".concat(A).concat(k),function(O){var B,L=O.eventType,M=A==="drag"&&O.isPinch;if(i[L]&&!i[L](O)){O.stop();return}if(!M){var X=A==="drag"?[A]:["drag",A],Q=Ae([],Z(n[t]),!1),$=Sh(n,Q,X,r,k,O);$?(n.props.stopPropagation||k==="Start"&&I)&&((B=O?.inputEvent)===null||B===void 0||B.stopPropagation()):O.stop()}})})}),V}var HH=(function(){function n(e,t,r){var i=this;this.target=e,this.moveable=t,this.eventName=r,this.ables=[],this._onEvent=function(a){var o=i.eventName,c=i.moveable;c.state.disableNativeEvent||i.ables.forEach(function(u){u[o](c,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return n.prototype.setAbles=function(e){this.ables=e},n.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},n})();function $H(n,e,t,r){var i;t===void 0&&(t=e);var a=BP(n,e),o=a.matrixes,c=a.is3d,u=a.targetMatrix,d=a.transformOrigin,h=a.targetOrigin,p=a.offsetContainer,m=a.hasFixed,x=a.zoom,_=sq(p,t),E=_.matrixes,S=_.is3d,T=_.offsetContainer,C=_.zoom,R=r,j=4,z=n.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in n,V=u,I=rn(j),A=rn(j),k=rn(j),O=rn(j),B=o.length,L=E.map(function(re){return W(W({},re),{matrix:re.matrix?Ae([],Z(re.matrix),!1):void 0})}).reverse();o.reverse(),!c&&R&&(V=ma(V,3,4),o_(o)),!S&&R&&o_(L),L.forEach(function(re){A=Wt(A,re.matrix,j)});var M=t||pl(n),X=((i=L[0])===null||i===void 0?void 0:i.target)||Kh(M,M,!0).offsetParent,Q=L.slice(1).reduce(function(re,fe){return Wt(re,fe.matrix,j)},rn(j));o.forEach(function(re,fe){if(B-2===fe&&(k=I.slice()),B-1===fe&&(O=I.slice()),!re.matrix){var U=o[fe+1],Y=cH(re,U,X,j,Wt(Q,I,j));re.matrix=yc(Y,j)}I=Wt(I,re.matrix,j)});var $=!z&&c;V||(V=rn($?4:3));var H=jv(z&&V.length===16?ma(V,4,3):V,$),J=A;return A=bP(A,j,j),{hasZoom:x!==1||C!==1,hasFixed:m,matrixes:o,rootMatrix:A,originalRootMatrix:J,beforeMatrix:k,offsetMatrix:O,allMatrix:I,targetMatrix:V,targetTransform:H,inlineTransform:n.style.transform,transformOrigin:d,targetOrigin:h,is3d:R,offsetContainer:p,offsetRootContainer:T}}function YH(n,e,t,r){t===void 0&&(t=e);var i=0,a=0,o=0,c={},u=h4(n);if(n&&(i=u.offsetWidth,a=u.offsetHeight),n){var d=$H(n,e,t,r),h=td(d.allMatrix,d.transformOrigin,i,a);c=W(W({},d),h);var p=td(d.allMatrix,[50,50],100,100);o=p4([p.pos1,p.pos2],p.direction)}var m=4;return W(W(W({hasZoom:!1,width:i,height:a,rotation:o},u),{originalRootMatrix:rn(m),rootMatrix:rn(m),beforeMatrix:rn(m),offsetMatrix:rn(m),allMatrix:rn(m),targetMatrix:rn(m),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),c)}function d_(n,e,t,r,i,a){a===void 0&&(a=[]);var o=1,c=[0,0],u=jm(),d=jm(),h=jm(),p=jm(),m=[0,0],x={},_=YH(e,t,i,!0);if(e){var E=ai(e);a.forEach(function(L){x[L]=E(L)});var S=_.is3d?4:3,T=td(_.offsetMatrix,Nt(_.transformOrigin,xP(_.targetMatrix,S)),_.width,_.height);o=T.direction,c=Nt(T.origin,[T.left-_.left,T.top-_.top]),p=Eh(_.offsetRootContainer);var C=Kh(r,r,!0).offsetParent||_.offsetRootContainer;if(_.hasZoom){var R=td(Wt(_.originalRootMatrix,_.allMatrix),_.transformOrigin,_.width,_.height),j=td(_.originalRootMatrix,z0(ai(C)("transformOrigin")).map(function(L){return parseFloat(L)}),C.offsetWidth,C.offsetHeight);if(u=G1(R,p),h=G1(j,p,C,!0),n){var z=R.left,V=R.top;d=G1({left:z,top:V,bottom:V,right:V},p)}}else{u=Eh(e),h=aq(C),n&&(d=Eh(n));var I=h.left,A=h.top,k=h.clientLeft,O=h.clientTop,B=[u.left-I,u.top-A];m=$e(pd(_.rootMatrix,B,4),[k+_.left,O+_.top])}}return W({targetClientRect:u,containerClientRect:h,moveableClientRect:d,rootContainerClientRect:p,beforeDirection:o,beforeOrigin:c,originalBeforeOrigin:c,target:e,style:x,offsetDelta:m},_)}function AR(n){var e=n.pos1,t=n.pos2,r=n.pos3,i=n.pos4;if(!e||!t||!r||!i)return null;var a=bc([e,t,r,i]),o=[a.minX,a.minY],c=$e(n.origin,o);return e=$e(e,o),t=$e(t,o),r=$e(r,o),i=$e(i,o),W(W({},n),{left:n.left,top:n.top,posDelta:o,pos1:e,pos2:t,pos3:r,pos4:i,origin:c,beforeOrigin:c,isPersisted:!0})}var gd=(function(n){Ip(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.state=W({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},d_(null)),t.renderState={},t.enabledAbles=[],t.targetAbles=[],t.controlAbles=[],t.rotation=0,t.scale=[1,1],t.isMoveableMounted=!1,t.isUnmounted=!1,t.events={mouseEnter:null,mouseLeave:null},t._emitter=new Rv,t._prevOriginalDragTarget=null,t._originalDragTarget=null,t._prevDragTarget=null,t._dragTarget=null,t._prevPropTarget=null,t._propTarget=null,t._prevDragArea=!1,t._isPropTargetChanged=!1,t._hasFirstTarget=!1,t._reiszeObserver=null,t._observerId=0,t._mutationObserver=null,t._rootContainer=null,t._viewContainer=null,t._viewClassNames=[],t._store={},t.checkUpdateRect=function(){if(!t.isDragging()){var r=t.props.parentMoveable;if(r){r.checkUpdateRect();return}l7(t._observerId),t._observerId=YM(function(){t.isDragging()||t.updateRect()})}},t._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},t}return e.prototype.render=function(){var t=this.props,r=this.getState(),i=t.parentPosition,a=t.className,o=t.target,c=t.zoom,u=t.cspNonce,d=t.translateZ,h=t.cssStyled,p=t.groupable,m=t.linePadding,x=t.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var _=Z(i||[0,0],2),E=_[0],S=_[1],T=r.left,C=r.top,R=r.target,j=r.direction,z=r.hasFixed,V=r.offsetDelta,I=t.targets,A=this.isDragging(),k={};this.getEnabledAbles().forEach(function(Q){k["data-able-".concat(Q.name.toLowerCase())]=!0});var O=this._getAbleClassName(),B=I&&I.length&&(R||p)||o||!this._hasFirstTarget&&this.state.isPersisted,L=this.controlBox||this.props.firstRenderState||this.props.persistData,M=[T-E,C-S];!p&&t.useAccuratePosition&&(M[0]+=V[0],M[1]+=V[1]);var X={position:z?"fixed":"absolute",display:B?"block":"none",visibility:L?"visible":"hidden",transform:"translate3d(".concat(M[0],"px, ").concat(M[1],"px, ").concat(d,")"),"--zoom":c,"--zoompx":"".concat(c,"px")};return m&&(X["--moveable-line-padding"]=m),x&&(X["--moveable-control-padding"]=x),da(h,W({cspNonce:u,ref:Ns(this,"controlBox"),className:"".concat(Ge("control-box",j===-1?"reverse":"",A?"dragging":"")," ").concat(O," ").concat(a)},k,{onClick:this._onPreventClick,style:X}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var t=this.props,r=t.parentMoveable,i=t.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(t){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(t)},e.prototype.componentWillUnmount=function(){var t,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(t=this._reiszeObserver)===null||t===void 0||t.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),Ku(this,!1),Ku(this,!0);var a=this.events;for(var o in a){var c=a[o];c&&c.destroy()}},e.prototype.getTargets=function(){var t=this.props.target;return t?[t]:[]},e.prototype.getAble=function(t){var r=this.props.ables||[];return ii(r,function(i){return i.name===t})},e.prototype.getContainer=function(){var t=this.props,r=t.parentMoveable,i=t.wrapperMoveable,a=t.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(t){var r;return t&&(((r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"class"))||"").indexOf(nE)>-1},e.prototype.dragStart=function(t,r){r===void 0&&(r=t.target);var i=this.targetGesto,a=this.controlGesto;return i&&_E(this)({inputEvent:t},r)?i.isFlag()||i.triggerDragStart(t):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(t)),this},e.prototype.hitTest=function(t){var r=this.state,i=r.target,a=r.pos1,o=r.pos2,c=r.pos3,u=r.pos4,d=r.targetClientRect;if(!i)return 0;var h;if(zd(t)){var p=t.getBoundingClientRect();h={left:p.left,top:p.top,width:p.width,height:p.height}}else h=W({width:0,height:0},t);var m=h.left,x=h.top,_=h.width,E=h.height,S=XI([a,o,u,c],d),T=dG(S,[[m,x],[m+_,x],[m+_,x+E],[m,x+E]]),C=SP(S);return!T||!C?0:Math.min(100,T/C*100)},e.prototype.isInside=function(t,r){var i=this.state,a=i.target,o=i.pos1,c=i.pos2,u=i.pos3,d=i.pos4,h=i.targetClientRect;return a?Kx([t,r],XI([o,c,d,u],h)):!1},e.prototype.updateRect=function(t,r,i){i===void 0&&(i=!0);var a=this.props,o=!a.parentPosition&&!a.wrapperMoveable;o&&fd(!0);var c=a.parentMoveable,u=this.state,d=u.target||a.target,h=this.getContainer(),p=c?c._rootContainer:this._rootContainer,m=d_(this.controlBox,d,h,h,p||h,this._getRequestStyles());if(!d&&this._hasFirstTarget&&a.persistData){var x=AR(a.persistData);for(var _ in x)m[_]=x[_]}o&&fd(),this.updateState(m,c?!1:i)},e.prototype.isDragging=function(t){var r,i,a=this.targetGesto,o=this.controlGesto;if(a?.isFlag()){if(!t)return!0;var c=a.getEventData();return!!(!((r=c[t])===null||r===void 0)&&r.isEventStart)}if(o?.isFlag()){if(!t)return!0;var c=o.getEventData();return!!(!((i=c[t])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(t){this.updateRect(t,!0)},e.prototype.getRect=function(){var t=this.state,r=Xi(this.state),i=Z(r,4),a=i[0],o=i[1],c=i[2],u=i[3],d=Hi(r),h=t.width,p=t.height,m=d.width,x=d.height,_=d.left,E=d.top,S=[t.left,t.top],T=Nt(S,t.origin),C=Nt(S,t.beforeOrigin),R=t.transformOrigin;return{width:m,height:x,left:_,top:E,pos1:a,pos2:o,pos3:c,pos4:u,offsetWidth:h,offsetHeight:p,beforeOrigin:C,origin:T,transformOrigin:R,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(t){if(!t||t==="target"){var r=this.targetGesto;r?.isIdle()===!1&&l_(this,!1),r?.stop()}if(!t||t==="control"){var r=this.controlGesto;r?.isIdle()===!1&&l_(this,!0),r?.stop()}},e.prototype.getRotation=function(){var t=this.state,r=t.pos1,i=t.pos2,a=t.direction;return mH(r,i,a)},e.prototype.request=function(t,r,i){r===void 0&&(r={});var a=this,o=a.props,c=o.parentMoveable||o.wrapperMoveable||a,u=c.props.ables,d=o.groupable,h=ii(u,function(T){return T.name===t});if(this.isDragging()||!h||!h.request)return{request:function(){return this},requestEnd:function(){return this}};var p=h.request(a),m=i||r.isInstant,x=p.isControl?"controlAbles":"targetAbles",_="".concat(d?"Group":"").concat(p.isControl?"Control":""),E=Ae([],Z(c[x]),!1),S={request:function(T){return Sh(a,E,["drag"],_,"",W(W({},p.request(T)),{requestAble:t,isRequest:!0}),m),S},requestEnd:function(){return Sh(a,E,["drag"],_,"End",W(W({},p.requestEnd()),{requestAble:t,isRequest:!0}),m),S}};return Sh(a,E,["drag"],_,"Start",W(W({},p.requestStart(r)),{requestAble:t,isRequest:!0}),m),m?S.request(r).requestEnd():S},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var t=this.getState(),r=this.props,i=r.padding,a=t.originalBeforeOrigin,o=t.transformOrigin,c=t.allMatrix,u=t.is3d,d=t.pos1,h=t.pos2,p=t.pos3,m=t.pos4,x=t.left,_=t.top,E=t.isPersisted,S=r.zoom||1;if(!i&&S<=1){t.renderPoses=[d,h,p,m],t.renderLines=[[d,h],[h,m],[m,p],[p,d]];return}var T=S4(i||{}),C=T.left,R=T.top,j=T.bottom,z=T.right,V=u?4:3,I=[];E?I=o:this.controlBox&&r.groupable?I=a:I=Nt(a,[x,_]);var A=N0(V,yc(I.map(function(X){return-X}),V),c,yc(o,V)),k=ji(A,d,[-C,-R],V),O=ji(A,h,[z,-R],V),B=ji(A,p,[-C,j],V),L=ji(A,m,[z,j],V);t.renderPoses=[k,O,B,L],t.renderLines=[[k,O],[O,L],[L,B],[B,k]];{var M=S/2;t.renderLines=[[ji(A,d,[-C-M,-R],V),ji(A,h,[z+M,-R],V)],[ji(A,h,[z,-R-M],V),ji(A,m,[z,j+M],V)],[ji(A,m,[z+M,j],V),ji(A,p,[-C-M,j],V)],[ji(A,p,[-C,j+M],V),ji(A,d,[-C,-R-M],V)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var t=this.props,r=t.target,i=t.container,a=t.parentMoveable,o=this.state,c=o.target,u=o.container;if(!(!c&&!r)){this.updateAbles();var d=!c_(c,r),h=d||!c_(u,i);if(h){var p=i||this.controlBox;p&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&p&&this.updateRect("End",!1,!1),this._isPropTargetChanged=d}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(t,r){var i=this.props;if(this._emitter.trigger(t,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(t,r,!0);var a=i[t];return a&&a(r)},e.prototype.useCSS=function(t,r){var i=this.props.customStyledMap,a=t+r;return i[a]||(i[a]=CP(t,r)),i[a]},e.prototype.getState=function(){var t,r=this.props;(r.target||!((t=r.targets)===null||t===void 0)&&t.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,o=r.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&a){var c=AR(a);if(c)return this.updateState(c,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var t=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(t)})},e.prototype.updateAbles=function(t,r){t===void 0&&(t=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,o=this.getEnabledAbles(t),c="drag".concat(r,"Start"),u="pinch".concat(r,"Start"),d="drag".concat(r,"ControlStart"),h=zm(o,[c,u],a),p=zm(o,[d],a);this.enabledAbles=o,this.targetAbles=h,this.controlAbles=p},e.prototype.updateState=function(t,r){if(r){if(this.isUnmounted)return;this.setState(t)}else{var i=this.state;for(var a in t)i[a]=t[a]}},e.prototype.getEnabledAbles=function(t){t===void 0&&(t=this.props.ables);var r=this.props;return t.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var t=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:da};return this.renderState={},fH(x4(zm(this.getEnabledAbles(),["render"],i).map(function(o){var c=o.render;return c(t,a)||[]})).filter(function(o){return o}),function(o){var c=o.key;return c}).map(function(o){return o[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var t=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return Ae(Ae([],Z(r),!1),Z(c),!1)},Ae([],Z(this.props.requestStyles||[]),!1));return t},e.prototype._updateObserver=function(t){this._updateResizeObserver(t),this._updateMutationObserver(t)},e.prototype._updateEvents=function(){var t=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!t&&this.targetGesto||this._isTargetChanged(!0);a&&(Ku(this,!1),this.updateState({gestos:{}})),r||Ku(this,!0),i&&t&&!this.targetGesto&&(this.targetGesto=M4(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=P4(this,"Control"))},e.prototype._updateTargets=function(){var t=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=t.dragArea,this._propTarget=t.target,this._originalDragTarget=t.dragTarget||t.target,this._dragTarget=Ha(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var t=this.props,r=t,i=r.zoom,a=r.hideDefaultLines,o=r.hideChildMoveableDefaultLines,c=r.parentMoveable;if(a||c&&o)return[];var u=this.getState(),d={createElement:da};return u.renderLines.map(function(h,p){return Yh(d,"",h[0],h[1],i,"render-line-".concat(p))})},e.prototype._isTargetChanged=function(t){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,o=this._prevDragArea,c=r.dragArea,u=!c&&a!==i,d=(t||c)&&o!==c;return u||d||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var t=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,o=Bs(a);if(this._isTargetChanged())for(var c in a){var u=a[c];u&&u.destroy(),a[c]=null}if(i){var d=this.enabledAbles;o.forEach(function(h){var p=zm(d,[h]),m=p.length>0,x=a[h];if(!m){x&&(x.destroy(),a[h]=null);return}x||(x=new HH(i,t,h),a[h]=x),x.setAbles(p)})}},e.prototype._checkUpdateRootContainer=function(){var t=this.props.rootContainer;!this._rootContainer&&t&&(this._rootContainer=Ha(t,!0))},e.prototype._checkUpdateViewContainer=function(){var t=this.props.viewContainer;!this._viewContainer&&t&&(this._viewContainer=Ha(t,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Ae(Ae([],Z(this._getAbleViewClassNames()),!1),[this.isDragging()?EH:""],!1))},e.prototype._changeAbleViewClassNames=function(t){var r=this._viewContainer,i=b4(t.filter(Boolean),function(d){return d}).map(function(d){var h=Z(d,1),p=h[0];return p}),a=this._viewClassNames,o=Ep(a,i),c=o.removed,u=o.added;c.forEach(function(d){ZM(r,a[d])}),u.forEach(function(d){QM(r,i[d])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var t=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,t))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(t){var r=this;t===void 0&&(t="");var i=this.getEnabledAbles(),a=this.targetGesto,o=this.controlGesto,c=a?.isFlag()?a.getEventData():{},u=o?.isFlag()?o.getEventData():{};return i.map(function(d){var h,p,m,x=d.name,_=((h=d.className)===null||h===void 0?void 0:h.call(d,r))||"";return(!((p=c[x])===null||p===void 0)&&p.isEventStart||!((m=u[x])===null||m===void 0)&&m.isEventStart)&&(_+=" ".concat(Ge("".concat(x).concat(t,"-dragging")))),_.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(t){var r,i=this.props,a=i.target,o=Xo(this.getControlBoxElement());if(!o.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(t.target===a&&this._reiszeObserver)){var c=new o.ResizeObserver(this.checkUpdateRect);c.observe(a,{box:"border-box"}),this._reiszeObserver=c}},e.prototype._updateMutationObserver=function(t){var r=this,i,a=this.props,o=a.target,c=Xo(this.getControlBoxElement());if(!c.MutationObserver||!o||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(t.target===o&&this._mutationObserver)){var u=new c.MutationObserver(function(d){var h,p;try{for(var m=IG(d),x=m.next();!x.done;x=m.next()){var _=x.value;_.type==="attributes"&&_.attributeName==="style"&&r.checkUpdateRect()}}catch(E){h={error:E}}finally{try{x&&!x.done&&(p=m.return)&&p.call(m)}finally{if(h)throw h.error}}});u.observe(o,{attributes:!0}),this._mutationObserver=u}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:c4,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(aP),wE={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(n,e){var t,r=n.props,i=r.targets||[],a=n.getState(),o=a.left,c=a.top,u=a.isPersisted,d=r.zoom||1,h=n.renderGroupRects,p=((t=r.persistData)===null||t===void 0?void 0:t.children)||[];u?i=p.map(function(){return null}):p=[];var m=Xu(n,"parentPosition",[o,c],function(_){return _.join(",")}),x=Xu(n,"requestStyles",n.getRequestChildStyles(),function(_){return _.join(",")});return n.moveables=n.moveables.slice(0,i.length),Ae(Ae([],Z(i.map(function(_,E){return e.createElement(gd,{key:"moveable"+E,ref:GM(n,"moveables",E),target:_,origin:!1,requestStyles:x,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:n,parentPosition:[o,c],persistData:p[E],zoom:d})})),!1),Z(x4(h.map(function(_,E){var S=_.pos1,T=_.pos2,C=_.pos3,R=_.pos4,j=[S,T,C,R];return[[0,1],[1,3],[3,2],[2,0]].map(function(z,V){var I=Z(z,2),A=I[0],k=I[1];return Yh(e,"",$e(j[A],m),$e(j[k],m),d,"group-rect-".concat(E,"-").concat(V))})}))),!1)}},KH=Rp("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(n,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(n,e){var t=n.props.target,r=e.inputEvent,i=e.inputTarget,a=n.isMoveableElement(i),o=!a&&n.controlBox.contains(i);if(!(!r||!i||e.isDrag||n.isMoveableElement(i)||o)){var c=t.contains(i);Pe(n,"onClick",gt(n,e,{isDouble:e.isDouble,inputTarget:i,isTarget:t===i,moveableTarget:n.props.target,containsTarget:c}))}},dragGroupEnd:function(n,e){var t=e.inputEvent,r=e.inputTarget;if(!(!t||!r||e.isDrag||n.isMoveableElement(r)||e.datas.inputTarget===r)){var i=n.props.targets,a=i.indexOf(r),o=a>-1,c=!1;a===-1&&(a=Ls(i,function(u){return u.contains(r)}),c=a>-1),Pe(n,"onClickGroup",gt(n,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:o,containsTarget:c,moveableTarget:i[a]}))}},dragControlEnd:function(n,e){this.dragEnd(n,e)},dragGroupControlEnd:function(n,e){this.dragEnd(n,e)}});function Cu(n){var e=n.originalDatas.draggable;return e||(n.originalDatas.draggable={},e=n.originalDatas.draggable),W(W({},n),{datas:e})}var XH=Rp("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(n,e){var t=n.props,r=t.edgeDraggable;return r?GP(e,"edgeDraggable",r,n.getState().renderPoses,t.zoom):[]},dragCondition:function(n,e){var t,r=n.props,i=(t=e.inputEvent)===null||t===void 0?void 0:t.target;return!r.edgeDraggable||!i?!1:!r.draggable&&ir(i,Ge("direction"))&&ir(i,Ge("edge"))&&ir(i,Ge("edgeDraggable"))},dragStart:function(n,e){return Lr.dragStart(n,Cu(e))},drag:function(n,e){return Lr.drag(n,Cu(e))},dragEnd:function(n,e){return Lr.dragEnd(n,Cu(e))},dragGroupCondition:function(n,e){var t,r=n.props,i=(t=e.inputEvent)===null||t===void 0?void 0:t.target;return!r.edgeDraggable||!i?!1:!r.draggable&&ir(i,Ge("direction"))&&ir(i,Ge("line"))},dragGroupStart:function(n,e){return Lr.dragGroupStart(n,Cu(e))},dragGroup:function(n,e){return Lr.dragGroup(n,Cu(e))},dragGroupEnd:function(n,e){return Lr.dragGroupEnd(n,Cu(e))},unset:function(n){return Lr.unset(n)}}),V4={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},EE=[k4,C4,Jq,yH,Lr,XH,i_,bH,_H,Oq,AH,CH,SH,LH,zH,GH,wE,V4,KH,A4,N4],WH=EE.reduce(function(n,e){return(e.events||[]).forEach(function(t){WM(n,t)}),n},[]),QH=EE.reduce(function(n,e){return(e.props||[]).forEach(function(t){WM(n,t)}),n},[]);function CR(n,e){var t=Z(n,3),r=t[0],i=t[1],a=t[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function Um(n,e){var t=Z(n,2),r=t[0],i=t[1];return-r*e[0]-i*e[1]}function IR(n,e){return Math.max.apply(Math,Ae([],Z(n.map(function(t){var r=Z(t,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.max(i[e],a[e],o[e],c[e])})),!1))}function RR(n,e){return Math.min.apply(Math,Ae([],Z(n.map(function(t){var r=Z(t,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.min(i[e],a[e],o[e],c[e])})),!1))}function ZH(n,e){var t,r,i,a=[0,0],o=[0,0],c=[0,0],u=[0,0],d=0,h=0;if(!n.length)return{pos1:a,pos2:o,pos3:c,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:d,height:h,rotation:e};var p=ct(e,Hr);if(p%90){var m=p/180*Math.PI,x=Math.tan(m),_=-1/x,E=[e_,ZI],S=[[0,0],[0,0]],T=[e_,ZI],C=[[0,0],[0,0]];n.forEach(function(te){te.forEach(function(ae){var ne=CR([-x,1,0],ae),se=CR([-_,1,0],ae);E[0]>ne&&(S[0]=ae,E[0]=ne),E[1]<ne&&(S[1]=ae,E[1]=ne),T[0]>se&&(C[0]=ae,T[0]=se),T[1]<se&&(C[1]=ae,T[1]=se)})});var R=Z(S,2),j=R[0],z=R[1],V=Z(C,2),I=V[0],A=V[1],k=[-x,1,Um([-x,1],j)],O=[-x,1,Um([-x,1],z)],B=[-_,1,Um([-_,1],I)],L=[-_,1,Um([-_,1],A)];t=Z([[k,B],[k,L],[O,B],[O,L]].map(function(te){var ae=Z(te,2),ne=ae[0],se=ae[1];return eE(ne,se)[0]}),4),a=t[0],o=t[1],c=t[2],u=t[3],d=T[1]-T[0],h=E[1]-E[0]}else{var M=RR(n,0),X=RR(n,1),Q=IR(n,0),$=IR(n,1);if(a=[M,X],o=[Q,X],c=[M,$],u=[Q,$],d=Q-M,h=$-X,p%180){var H=[c,a,u,o];r=Z(H,4),a=r[0],o=r[1],c=r[2],u=r[3],d=$-X,h=Q-M}}if(p%360>180){var H=[u,c,o,a];i=Z(H,4),a=i[0],o=i[1],c=i[2],u=i[3]}var J=bc([a,o,c,u]),re=J.minX,fe=J.minY,U=J.maxX,Y=J.maxY;return{pos1:a,pos2:o,pos3:c,pos4:u,width:d,height:h,minX:re,minY:fe,maxX:U,maxY:Y,rotation:e}}function j4(n,e){var t=e.map(function(r){if(Wn(r)){var i=j4(n,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var o=ii(n,function(c){var u=c.manager;return u.props.target===r});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return t.length===1&&Wn(t[0])?t[0]:t}var JH=(function(n){Ip(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.differ=new EP,t.moveables=[],t.transformOrigin="50% 50%",t.renderGroupRects=[],t._targetGroups=[],t._hasFirstTargets=!1,t}return e.prototype.componentDidMount=function(){n.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,r,i){var a;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;fd(!0),this.moveables.forEach(function(Te){Te.updateRect(t,!1,!1)});var c=this.props,u=this.moveables,d=o.target||c.target,h=u.map(function(Te){return{finded:!1,manager:Te}}),p=this.props.targetGroups||[],m=j4(h,p),x=c.useDefaultGroupRotate;m.push.apply(m,Ae([],Z(h.filter(function(Te){var Ce=Te.finded;return!Ce}).map(function(Te){var Ce=Te.manager;return Ce})),!1));var _=[],E=!r||t!==""&&c.updateGroup,S=c.defaultGroupRotate||0;if(!this._hasFirstTargets){var T=(a=c.persistData)===null||a===void 0?void 0:a.rotation;T!=null&&(S=T)}function C(Te,Ce,Ne){var xe=Te.map(function(yt){if(Wn(yt)){var Ve=C(yt,Ce),Ke=[Ve.pos1,Ve.pos2,Ve.pos3,Ve.pos4];return _.push(Ve),{poses:Ke,rotation:Ve.rotation}}else return{poses:Xi(yt.state),rotation:yt.getRotation()}}),Ee=xe.map(function(yt){var Ve=yt.rotation;return Ve}),Qe=0,Oe=Ee[0],Be=Ee.every(function(yt){return Math.abs(Oe-yt)<.1});E?Qe=!x&&Be?Oe:S:Qe=!x&&!Ne&&Be?Oe:Ce;var ze=xe.map(function(yt){var Ve=yt.poses;return Ve}),st=ZH(ze,Qe);return st}var R=C(m,this.rotation,!0);E&&(this.rotation=R.rotation,this.transformOrigin=c.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=p,this.renderGroupRects=_;var j=this.transformOrigin,z=this.rotation,V=this.scale,I=R.width,A=R.height,k=R.minX,O=R.minY,B=vH([[0,0],[I,0],[0,A],[I,A]],yE(j,I,A),this.rotation/180*Math.PI),L=bc(B.result),M=L.minX,X=L.minY,Q=" rotate(".concat(z,"deg)")+" scale(".concat(Br(V[0]),", ").concat(Br(V[1]),")"),$="translate(".concat(-M,"px, ").concat(-X,"px)").concat(Q);this.controlBox.style.transform="translate3d(".concat(k,"px, ").concat(O,"px, ").concat(this.props.translateZ||0,")"),d.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(j,";")+"width:".concat(I,"px;height:").concat(A,"px;")+"transform: ".concat($),o.width=I,o.height=A;var H=this.getContainer(),J=d_(this.controlBox,d,this.controlBox,this.getContainer(),this._rootContainer||H,[]),re=[J.left,J.top],fe=Z(Xi(J),4),U=fe[0],Y=fe[1],te=fe[2],ae=fe[3],ne=bc([U,Y,te,ae]),se=[ne.minX,ne.minY],me=Br(V[0]*V[1]);J.pos1=$e(U,se),J.pos2=$e(Y,se),J.pos3=$e(te,se),J.pos4=$e(ae,se),J.left=k-J.left+se[0],J.top=O-J.top+se[1],J.origin=$e(Nt(re,J.origin),se),J.beforeOrigin=$e(Nt(re,J.beforeOrigin),se),J.originalBeforeOrigin=Nt(re,J.originalBeforeOrigin),J.transformOrigin=$e(Nt(re,J.transformOrigin),se),d.style.transform="translate(".concat(-M-se[0],"px, ").concat(-X-se[1],"px)")+Q,fd(),this.updateState(W(W({},J),{posDelta:se,direction:me,beforeDirection:me}),i)},e.prototype.getRect=function(){return W(W({},n.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.prototype.triggerEvent=function(t,r,i){if(i||t.indexOf("Group")>-1)return n.prototype.triggerEvent.call(this,t,r);this._emitter.trigger(t,r)},e.prototype.getRequestChildStyles=function(){var t=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return Ae(Ae([],Z(r),!1),Z(c),!1)},[]);return t},e.prototype.getMoveables=function(){return Ae([],Z(this.moveables),!1)},e.prototype.updateAbles=function(){n.prototype.updateAbles.call(this,Ae(Ae([],Z(this.props.ables),!1),[wE],!1),"Group")},e.prototype._updateTargets=function(){n.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Ha(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var t=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,o=r.targets,c=this.differ.update(o),u=c.added,d=c.changed,h=c.removed,p=u.length||h.length;(p||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Ku(this,!1),Ku(this,!0),this.updateState({gestos:{}})),i!==a&&(t.target=null),t.target||(t.target=this.areaElement,this.controlBox.style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=M4(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=P4(this,"GroupControl")));var m=!c_(t.container,r.container);m&&(t.container=r.container),(m||p||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||d.length||o.length&&!E4(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!p},e.prototype._updateObserver=function(){},e.defaultProps=W(W({},gd.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(gd),e$=(function(n){Ip(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.moveables=[],t}return e.prototype.render=function(){var t=this,r,i=this.props,a=i.cspNonce,o=i.cssStyled,c=i.persistData,u=i.targets||[],d=u.length,h=this.isUnmounted||!d,p=(r=c?.children)!==null&&r!==void 0?r:[];return h&&!d&&p.length?u=p.map(function(){return null}):h||(p=[]),da(o,{cspNonce:a,ref:Ns(this,"controlBox"),className:Ge("control-box")},u.map(function(m,x){var _,E,S=(E=(_=i.individualGroupableProps)===null||_===void 0?void 0:_.call(i,m,x))!==null&&E!==void 0?E:{};return da(gd,W({key:"moveable"+x,ref:GM(t,"moveables",x)},i,S,{target:m,wrapperMoveable:t,isWrapperMounted:t.isMoveableMounted,persistData:p[x]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,r,i){i===void 0&&(i=!0),fd(!0),this.moveables.forEach(function(a){a.updateRect(t,r,i)}),fd()},e.prototype.getRect=function(){return W(W({},n.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.prototype.request=function(t,r,i){r===void 0&&(r={});var a=this.moveables.map(function(u){return u.request(t,W(W({},r),{isInstant:!1}),!1)}),o=i||r.isInstant,c={request:function(u){return a.forEach(function(d){return d.request(u)}),this},requestEnd:function(){return a.forEach(function(u){return u.requestEnd()}),this}};return o?c.request(r).requestEnd():c},e.prototype.dragStart=function(t,r){r===void 0&&(r=t.target);var i=r,a=ii(this.moveables,function(o){var c=o.getTargets()[0],u=o.getControlBoxElement(),d=o.getDragElement();return!c||!d?!1:d===i||d.contains(i)||d!==c&&c===i||c.contains(i)||u===i||u.contains(i)});return a&&a.dragStart(t,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Ae([],Z(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(gd);function z4(n,e){var t=[];return n.forEach(function(r){if(r){if(ri(r)){e[r]&&t.push.apply(t,Ae([],Z(e[r]),!1));return}Wn(r)?t.push.apply(t,Ae([],Z(z4(r,e)),!1)):t.push(r)}}),t}function L4(n,e){var t=[];return n.forEach(function(r){if(r){if(ri(r)){e[r]&&t.push.apply(t,Ae([],Z(e[r]),!1));return}Wn(r)?t.push(L4(r,e)):t.push(r)}}),t}function B4(n,e){return n.length!==e.length||n.some(function(t,r){var i=e[r];return!t&&!i?!1:t!=i?Wn(t)&&Wn(i)?B4(t,i):!0:!1})}var t$=(function(n){Ip(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.refTargets=[],t.selectorMap={},t._differ=new EP,t._elementTargets=[],t._tmpRefTargets=[],t._tmpSelectorMap={},t._onChangeTargets=null,t}return e.makeStyled=function(){var t={},r=this.getTotalAbles();r.forEach(function(a){var o=a.css;o&&o.forEach(function(c){t[c]=!0})});var i=Bs(t).join(`
`);this.defaultStyled=CP("div",WF(nE,LG+i))},e.getTotalAbles=function(){return Ae([C4,wE,V4,A4],Z(this.defaultAbles),!1)},e.prototype.render=function(){var t,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,o=i.props,c=AG(i,["ables","props"]),u=Z(this._updateRefs(!0),2),d=u[0],h=u[1],p=z4(d,h),m=p.length>1,x=r.getTotalAbles(),_=Ae(Ae([],Z(x),!1),Z(a||[]),!1),E=W(W(W({},c),o||{}),{ables:_,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=p;var S=null,T=this.moveable,C=c.persistData;if(C?.children&&(m=!0),c.individualGroupable)return da(e$,W({key:"individual-group",ref:Ns(this,"moveable")},E,{target:null,targets:p}));if(m){var R=L4(d,h);if(T&&!T.props.groupable&&!T.props.individualGroupable){var j=T.props.target;j&&p.indexOf(j)>-1&&(S=W({},T.state))}return da(JH,W({key:"group",ref:Ns(this,"moveable")},E,(t=c.groupableProps)!==null&&t!==void 0?t:{},{target:null,targets:p,targetGroups:R,firstRenderState:S}))}else{var z=p[0];if(T&&(T.props.groupable||T.props.individualGroupable)){var V=T.moveables||[],I=ii(V,function(A){return A.props.target===z});I&&(S=W({},I.state))}return da(gd,W({key:"single",ref:Ns(this,"moveable")},E,{target:z,firstRenderState:S}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var t,r;return(r=(t=this.moveable)===null||t===void 0?void 0:t.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var t=this,r;return this._onChangeTargets=function(){t._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(t){var r=this.refTargets,i=vE(this.props.target||this.props.targets),a=typeof document<"u",o=B4(r,i),c=this.selectorMap,u={};return this.refTargets.forEach(function d(h){if(ri(h)){var p=c[h];p?u[h]=c[h]:a&&(o=!0,u[h]=[].slice.call(document.querySelectorAll(h)))}else Wn(h)&&h.forEach(d)}),this._tmpRefTargets=i,this._tmpSelectorMap=u,[i,u,!t&&o]},e.prototype._checkChangeTargets=function(){var t,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),o=a.added,c=a.removed,u=o.length||c.length;u&&((r=(t=this.props).onChangeTargets)===null||r===void 0||r.call(t,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var d=Z(this._updateRefs(),3),h=d[0],p=d[1],m=d[2];this.refTargets=h,this.selectorMap=p,m&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,CG([QF(MP)],e.prototype,"moveable",void 0),e})(aP),n$=(function(n){Ip(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.defaultAbles=EE,e})(t$),f_=function(n,e){return f_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},f_(n,e)};function SE(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Xh=function(){return Xh=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Xh.apply(this,arguments)};function r$(n,e,t,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}var i$=(function(n){SE(e,n);function e(r){var i=n.call(this,r)||this;return i.state={},i.state=i.props,i}var t=e.prototype;return t.render=function(){return da(n$,Xh({ref:Ns(this,"moveable")},this.state))},e})(Kw),a$=QH,s$=MP,o$=WH,l$=(function(n){SE(e,n);function e(r,i){i===void 0&&(i={});var a=n.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var o=Xh({},i),c={};o$.forEach(function(h){c[o7("on ".concat(h))]=function(p){return a.trigger(h,p)}});var u;i.warpSelf?(delete i.warpSelf,a._warp=!0,u=r):(u=jd(r).createElement("div"),r.appendChild(u)),a.containerProvider=$I(da(i$,Xh({ref:Ns(a,"innerMoveable")},o,c)),u),a.selfElement=u;var d=o.target;return Wn(d)&&d.length>1&&a.updateRect(),a}var t=e.prototype;return t.setState=function(r,i){this.innerMoveable.setState(r,i)},t.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},t.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},t.destroy=function(){var r,i=this.selfElement;$I(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},t.getMoveable=function(){return this.innerMoveable.moveable},e=r$([jI(s$,function(r,i){r[i]||(r[i]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var c=this.getMoveable();if(!(!c||!c[i]))return c[i].apply(c,a)})}),jI(a$,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var o;this.setState((o={},o[i]=a,o))},enumerable:!0,configurable:!0})})],e),e})(Rv),DR=(function(n){SE(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(l$);const kR=n=>{let e;const t=new Set,r=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const m=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(x=>x(e,m))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(t.add(d),()=>t.delete(d))},u=e=n(r,i,c);return c},c$=(n=>n?kR(n):kR),u$=n=>n;function d$(n,e=u$){const t=_m.useSyncExternalStore(n.subscribe,_m.useCallback(()=>e(n.getState()),[n,e]),_m.useCallback(()=>e(n.getInitialState()),[n,e]));return _m.useDebugValue(t),t}const NR=n=>{const e=c$(n),t=r=>d$(e,r);return Object.assign(t,e),t},TE=(n=>n?NR(n):NR),MR={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",VITE_FIREBASE_APP_ID:"1:137454342284:web:ab8b52955e6f0ffd42aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-BCLXBQHT9L",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app"},Wh=new Map,Fm=n=>{const e=Wh.get(n);return e?Object.fromEntries(Object.entries(e.stores).map(([t,r])=>[t,r.getState()])):{}},f$=(n,e,t)=>{if(n===void 0)return{type:"untracked",connection:e.connect(t)};const r=Wh.get(t.name);if(r)return{type:"tracked",store:n,...r};const i={connection:e.connect(t),stores:{}};return Wh.set(t.name,i),{type:"tracked",store:n,...i}},h$=(n,e)=>{if(e===void 0)return;const t=Wh.get(n);t&&(delete t.stores[e],Object.keys(t.stores).length===0&&Wh.delete(n))},p$=n=>{var e,t;if(!n)return;const r=n.split(`
`),i=r.findIndex(o=>o.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(t=/.+ (.+) .+/.exec(a))==null?void 0:t[1]},g$=(n,e={})=>(t,r,i)=>{const{enabled:a,anonymousActionType:o,store:c,...u}=e;let d;try{d=(a??(MR?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return n(t,r,i);const{connection:h,...p}=f$(c,d,u);let m=!0;i.setState=((E,S,T)=>{const C=t(E,S);if(!m)return C;const R=T===void 0?{type:o||p$(new Error().stack)||"anonymous"}:typeof T=="string"?{type:T}:T;return c===void 0?(h?.send(R,r()),C):(h?.send({...R,type:`${c}/${R.type}`},{...Fm(u.name),[c]:i.getState()}),C)}),i.devtools={cleanup:()=>{h&&typeof h.unsubscribe=="function"&&h.unsubscribe(),h$(u.name,c)}};const x=(...E)=>{const S=m;m=!1,t(...E),m=S},_=n(i.setState,r,i);if(p.type==="untracked"?h?.init(_):(p.stores[p.store]=i,h?.init(Object.fromEntries(Object.entries(p.stores).map(([E,S])=>[E,E===p.store?_:S.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let E=!1;const S=i.dispatch;i.dispatch=(...T)=>{(MR?"production":void 0)!=="production"&&T[0].type==="__setState"&&!E&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),E=!0),S(...T)}}return h.subscribe(E=>{var S;switch(E.type){case"ACTION":if(typeof E.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return $1(E.payload,T=>{if(T.type==="__setState"){if(c===void 0){x(T.state);return}Object.keys(T.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const C=T.state[c];if(C==null)return;JSON.stringify(i.getState())!==JSON.stringify(C)&&x(C);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(T)});case"DISPATCH":switch(E.payload.type){case"RESET":return x(_),c===void 0?h?.init(i.getState()):h?.init(Fm(u.name));case"COMMIT":if(c===void 0){h?.init(i.getState());return}return h?.init(Fm(u.name));case"ROLLBACK":return $1(E.state,T=>{if(c===void 0){x(T),h?.init(i.getState());return}x(T[c]),h?.init(Fm(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return $1(E.state,T=>{if(c===void 0){x(T);return}JSON.stringify(i.getState())!==JSON.stringify(T[c])&&x(T[c])});case"IMPORT_STATE":{const{nextLiftedState:T}=E.payload,C=(S=T.computedStates.slice(-1)[0])==null?void 0:S.state;if(!C)return;x(c===void 0?C:C[c]),h?.send(null,T);return}case"PAUSE_RECORDING":return m=!m}return}}),_},m$=g$,$1=(n,e)=>{let t;try{t=JSON.parse(n)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}t!==void 0&&e(t)};function v$(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=t.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>t.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>t.removeItem(i)}}const h_=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return h_(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return h_(r)(t)}}}},y$=(n,e)=>(t,r,i)=>{let a={storage:v$(()=>localStorage),partialize:E=>E,version:0,merge:(E,S)=>({...S,...E}),...e},o=!1;const c=new Set,u=new Set;let d=a.storage;if(!d)return n((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...E)},r,i);const h=()=>{const E=a.partialize({...r()});return d.setItem(a.name,{state:E,version:a.version})},p=i.setState;i.setState=(E,S)=>(p(E,S),h());const m=n((...E)=>(t(...E),h()),r,i);i.getInitialState=()=>m;let x;const _=()=>{var E,S;if(!d)return;o=!1,c.forEach(C=>{var R;return C((R=r())!=null?R:m)});const T=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(E=r())!=null?E:m))||void 0;return h_(d.getItem.bind(d))(a.name).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==a.version){if(a.migrate){const R=a.migrate(C.state,C.version);return R instanceof Promise?R.then(j=>[!0,j]):[!0,R]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,C.state];return[!1,void 0]}).then(C=>{var R;const[j,z]=C;if(x=a.merge(z,(R=r())!=null?R:m),t(x,!0),j)return h()}).then(()=>{T?.(x,void 0),x=r(),o=!0,u.forEach(C=>C(x))}).catch(C=>{T?.(void 0,C)})};return i.persist={setOptions:E=>{a={...a,...E},E.storage&&(d=E.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:E=>(c.add(E),()=>{c.delete(E)}),onFinishHydration:E=>(u.add(E),()=>{u.delete(E)})},a.skipHydration||_(),x||m},U4=y$,b$=()=>{};var PR={};const F4=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},x$=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},G4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,h=a>>2,p=(a&3)<<4|c>>4;let m=(c&15)<<2|d>>6,x=d&63;u||(x=64,o||(m=64)),r.push(t[h],t[p],t[m],t[x])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(F4(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):x$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||c==null||d==null||p==null)throw new _$;const m=a<<2|c>>4;if(r.push(m),d!==64){const x=c<<4&240|d>>2;if(r.push(x),p!==64){const _=d<<6&192|p;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class _$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w$=function(n){const e=F4(n);return G4.encodeByteArray(e,!0)},F0=function(n){return w$(n).replace(/\./g,"")},q4=function(n){try{return G4.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function H4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const E$=()=>H4().__FIREBASE_DEFAULTS__,S$=()=>{if(typeof process>"u"||typeof PR>"u")return;const n=PR.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},T$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&q4(n[1]);return e&&JSON.parse(e)},Lv=()=>{try{return b$()||E$()||S$()||T$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$4=n=>Lv()?.emulatorHosts?.[n],A$=n=>{const e=$4(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Y4=()=>Lv()?.config,K4=n=>Lv()?.[`_${n}`];class C${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Fd(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function X4(n){return(await fetch(n,{credentials:"include"})).ok}function I$(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[F0(JSON.stringify(t)),F0(JSON.stringify(o)),""].join(".")}const Th={};function R$(){const n={prod:[],emulator:[]};for(const e of Object.keys(Th))Th[e]?n.emulator.push(e):n.prod.push(e);return n}function D$(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let OR=!1;function W4(n,e){if(typeof window>"u"||typeof document>"u"||!Fd(window.location.host)||Th[n]===e||Th[n]||OR)return;Th[n]=e;function t(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=R$().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,x){m.setAttribute("width","24"),m.setAttribute("id",x),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{OR=!0,o()},m}function h(m,x){m.setAttribute("id",x),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=D$(r),x=t("text"),_=document.getElementById(x)||document.createElement("span"),E=t("learnmore"),S=document.getElementById(E)||document.createElement("a"),T=t("preprendIcon"),C=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;c(R),h(S,E);const j=d();u(C,T),R.append(C,_,S,j),document.body.appendChild(R)}a?(_.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function or(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(or())}function Q4(){const n=Lv()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function N$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function M$(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function P$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function O$(){const n=or();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Z4(){return!Q4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J4(){return!Q4()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function eO(){try{return typeof indexedDB=="object"}catch{return!1}}function V$(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const j$="FirebaseError";class $s extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=j$,Object.setPrototypeOf(this,$s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Np.prototype.create)}}class Np{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?z$(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new $s(i,c,r)}}function z$(n,e){return n.replace(L$,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const L$=/\{\$([^}]+)}/g;function B$(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ol(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(VR(a)&&VR(o)){if(!ol(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function VR(n){return n!==null&&typeof n=="object"}function Mp(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function lh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function U$(n,e){const t=new F$(n,e);return t.subscribe.bind(t)}class F${constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");G$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Y1),i.error===void 0&&(i.error=Y1),i.complete===void 0&&(i.complete=Y1);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function G$(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Y1(){}function an(n){return n&&n._delegate?n._delegate:n}class _c{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Yl="[DEFAULT]";class q${constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new C$;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($$(e))try{this.getOrInitializeService({instanceIdentifier:Yl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Yl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yl){return this.instances.has(e)}getOptions(e=Yl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:H$(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yl){return this.component?this.component.multipleInstances?e:Yl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function H$(n){return n===Yl?void 0:n}function $$(n){return n.instantiationMode==="EAGER"}class Y${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new q$(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ct;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ct||(Ct={}));const K$={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},X$=Ct.INFO,W$={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},Q$=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=W$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class AE{constructor(e){this.name=e,this._logLevel=X$,this._logHandler=Q$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?K$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...e),this._logHandler(this,Ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...e),this._logHandler(this,Ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...e),this._logHandler(this,Ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...e),this._logHandler(this,Ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...e),this._logHandler(this,Ct.ERROR,...e)}}const Z$=(n,e)=>e.some(t=>n instanceof t);let jR,zR;function J$(){return jR||(jR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eY(){return zR||(zR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tO=new WeakMap,p_=new WeakMap,nO=new WeakMap,K1=new WeakMap,CE=new WeakMap;function tY(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(Wo(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&tO.set(t,n)}).catch(()=>{}),CE.set(e,n),e}function nY(n){if(p_.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});p_.set(n,e)}let g_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return p_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function rY(n){g_=n(g_)}function iY(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(X1(this),e,...t);return nO.set(r,e.sort?e.sort():[e]),Wo(r)}:eY().includes(n)?function(...e){return n.apply(X1(this),e),Wo(tO.get(this))}:function(...e){return Wo(n.apply(X1(this),e))}}function aY(n){return typeof n=="function"?iY(n):(n instanceof IDBTransaction&&nY(n),Z$(n,J$())?new Proxy(n,g_):n)}function Wo(n){if(n instanceof IDBRequest)return tY(n);if(K1.has(n))return K1.get(n);const e=aY(n);return e!==n&&(K1.set(n,e),CE.set(e,n)),e}const X1=n=>CE.get(n);function sY(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),c=Wo(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Wo(o.result),u.oldVersion,u.newVersion,Wo(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const oY=["get","getKey","getAll","getAllKeys","count"],lY=["put","add","delete","clear"],W1=new Map;function LR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(W1.get(e))return W1.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=lY.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||oY.includes(t)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&u.done]))[0]};return W1.set(e,a),a}rY(n=>({...n,get:(e,t,r)=>LR(e,t)||n.get(e,t,r),has:(e,t)=>!!LR(e,t)||n.has(e,t)}));class cY{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uY(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function uY(n){return n.getComponent()?.type==="VERSION"}const m_="@firebase/app",BR="0.14.6";const Us=new AE("@firebase/app"),dY="@firebase/app-compat",fY="@firebase/analytics-compat",hY="@firebase/analytics",pY="@firebase/app-check-compat",gY="@firebase/app-check",mY="@firebase/auth",vY="@firebase/auth-compat",yY="@firebase/database",bY="@firebase/data-connect",xY="@firebase/database-compat",_Y="@firebase/functions",wY="@firebase/functions-compat",EY="@firebase/installations",SY="@firebase/installations-compat",TY="@firebase/messaging",AY="@firebase/messaging-compat",CY="@firebase/performance",IY="@firebase/performance-compat",RY="@firebase/remote-config",DY="@firebase/remote-config-compat",kY="@firebase/storage",NY="@firebase/storage-compat",MY="@firebase/firestore",PY="@firebase/ai",OY="@firebase/firestore-compat",VY="firebase",jY="12.6.0";const v_="[DEFAULT]",zY={[m_]:"fire-core",[dY]:"fire-core-compat",[hY]:"fire-analytics",[fY]:"fire-analytics-compat",[gY]:"fire-app-check",[pY]:"fire-app-check-compat",[mY]:"fire-auth",[vY]:"fire-auth-compat",[yY]:"fire-rtdb",[bY]:"fire-data-connect",[xY]:"fire-rtdb-compat",[_Y]:"fire-fn",[wY]:"fire-fn-compat",[EY]:"fire-iid",[SY]:"fire-iid-compat",[TY]:"fire-fcm",[AY]:"fire-fcm-compat",[CY]:"fire-perf",[IY]:"fire-perf-compat",[RY]:"fire-rc",[DY]:"fire-rc-compat",[kY]:"fire-gcs",[NY]:"fire-gcs-compat",[MY]:"fire-fst",[OY]:"fire-fst-compat",[PY]:"fire-vertex","fire-js":"fire-js",[VY]:"fire-js-all"};const G0=new Map,LY=new Map,y_=new Map;function UR(n,e){try{n.container.addComponent(e)}catch(t){Us.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function md(n){const e=n.name;if(y_.has(e))return Us.debug(`There were multiple attempts to register component ${e}.`),!1;y_.set(e,n);for(const t of G0.values())UR(t,n);for(const t of LY.values())UR(t,n);return!0}function IE(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Bi(n){return n==null?!1:n.settings!==void 0}const BY={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qo=new Np("app","Firebase",BY);class UY{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _c("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qo.create("app-deleted",{appName:this._name})}}const Gd=jY;function rO(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:v_,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Qo.create("bad-app-name",{appName:String(i)});if(t||(t=Y4()),!t)throw Qo.create("no-options");const a=G0.get(i);if(a){if(ol(t,a.options)&&ol(r,a.config))return a;throw Qo.create("duplicate-app",{appName:i})}const o=new Y$(i);for(const u of y_.values())o.addComponent(u);const c=new UY(t,r,o);return G0.set(i,c),c}function iO(n=v_){const e=G0.get(n);if(!e&&n===v_&&Y4())return rO();if(!e)throw Qo.create("no-app",{appName:n});return e}function Zo(n,e,t){let r=zY[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Us.warn(o.join(" "));return}md(new _c(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const FY="firebase-heartbeat-database",GY=1,Qh="firebase-heartbeat-store";let Q1=null;function aO(){return Q1||(Q1=sY(FY,GY,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Qh)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qo.create("idb-open",{originalErrorMessage:n.message})})),Q1}async function qY(n){try{const t=(await aO()).transaction(Qh),r=await t.objectStore(Qh).get(sO(n));return await t.done,r}catch(e){if(e instanceof $s)Us.warn(e.message);else{const t=Qo.create("idb-get",{originalErrorMessage:e?.message});Us.warn(t.message)}}}async function FR(n,e){try{const r=(await aO()).transaction(Qh,"readwrite");await r.objectStore(Qh).put(e,sO(n)),await r.done}catch(t){if(t instanceof $s)Us.warn(t.message);else{const r=Qo.create("idb-set",{originalErrorMessage:t?.message});Us.warn(r.message)}}}function sO(n){return`${n.name}!${n.options.appId}`}const HY=1024,$Y=30;class YY{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XY(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=GR();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>$Y){const i=WY(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Us.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=GR(),{heartbeatsToSend:t,unsentEntries:r}=KY(this._heartbeatsCache.heartbeats),i=F0(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Us.warn(e),""}}}function GR(){return new Date().toISOString().substring(0,10)}function KY(n,e=HY){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),qR(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),qR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class XY{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eO()?V$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await qY(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return FR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return FR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function qR(n){return F0(JSON.stringify({version:2,heartbeats:n})).length}function WY(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function QY(n){md(new _c("platform-logger",e=>new cY(e),"PRIVATE")),md(new _c("heartbeat",e=>new YY(e),"PRIVATE")),Zo(m_,BR,n),Zo(m_,BR,"esm2020"),Zo("fire-js","")}QY("");var HR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Jo,oO;(function(){var n;function e(I,A){function k(){}k.prototype=A.prototype,I.F=A.prototype,I.prototype=new k,I.prototype.constructor=I,I.D=function(O,B,L){for(var M=Array(arguments.length-2),X=2;X<arguments.length;X++)M[X-2]=arguments[X];return A.prototype[B].apply(O,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,A,k){k||(k=0);const O=Array(16);if(typeof A=="string")for(var B=0;B<16;++B)O[B]=A.charCodeAt(k++)|A.charCodeAt(k++)<<8|A.charCodeAt(k++)<<16|A.charCodeAt(k++)<<24;else for(B=0;B<16;++B)O[B]=A[k++]|A[k++]<<8|A[k++]<<16|A[k++]<<24;A=I.g[0],k=I.g[1],B=I.g[2];let L=I.g[3],M;M=A+(L^k&(B^L))+O[0]+3614090360&4294967295,A=k+(M<<7&4294967295|M>>>25),M=L+(B^A&(k^B))+O[1]+3905402710&4294967295,L=A+(M<<12&4294967295|M>>>20),M=B+(k^L&(A^k))+O[2]+606105819&4294967295,B=L+(M<<17&4294967295|M>>>15),M=k+(A^B&(L^A))+O[3]+3250441966&4294967295,k=B+(M<<22&4294967295|M>>>10),M=A+(L^k&(B^L))+O[4]+4118548399&4294967295,A=k+(M<<7&4294967295|M>>>25),M=L+(B^A&(k^B))+O[5]+1200080426&4294967295,L=A+(M<<12&4294967295|M>>>20),M=B+(k^L&(A^k))+O[6]+2821735955&4294967295,B=L+(M<<17&4294967295|M>>>15),M=k+(A^B&(L^A))+O[7]+4249261313&4294967295,k=B+(M<<22&4294967295|M>>>10),M=A+(L^k&(B^L))+O[8]+1770035416&4294967295,A=k+(M<<7&4294967295|M>>>25),M=L+(B^A&(k^B))+O[9]+2336552879&4294967295,L=A+(M<<12&4294967295|M>>>20),M=B+(k^L&(A^k))+O[10]+4294925233&4294967295,B=L+(M<<17&4294967295|M>>>15),M=k+(A^B&(L^A))+O[11]+2304563134&4294967295,k=B+(M<<22&4294967295|M>>>10),M=A+(L^k&(B^L))+O[12]+1804603682&4294967295,A=k+(M<<7&4294967295|M>>>25),M=L+(B^A&(k^B))+O[13]+4254626195&4294967295,L=A+(M<<12&4294967295|M>>>20),M=B+(k^L&(A^k))+O[14]+2792965006&4294967295,B=L+(M<<17&4294967295|M>>>15),M=k+(A^B&(L^A))+O[15]+1236535329&4294967295,k=B+(M<<22&4294967295|M>>>10),M=A+(B^L&(k^B))+O[1]+4129170786&4294967295,A=k+(M<<5&4294967295|M>>>27),M=L+(k^B&(A^k))+O[6]+3225465664&4294967295,L=A+(M<<9&4294967295|M>>>23),M=B+(A^k&(L^A))+O[11]+643717713&4294967295,B=L+(M<<14&4294967295|M>>>18),M=k+(L^A&(B^L))+O[0]+3921069994&4294967295,k=B+(M<<20&4294967295|M>>>12),M=A+(B^L&(k^B))+O[5]+3593408605&4294967295,A=k+(M<<5&4294967295|M>>>27),M=L+(k^B&(A^k))+O[10]+38016083&4294967295,L=A+(M<<9&4294967295|M>>>23),M=B+(A^k&(L^A))+O[15]+3634488961&4294967295,B=L+(M<<14&4294967295|M>>>18),M=k+(L^A&(B^L))+O[4]+3889429448&4294967295,k=B+(M<<20&4294967295|M>>>12),M=A+(B^L&(k^B))+O[9]+568446438&4294967295,A=k+(M<<5&4294967295|M>>>27),M=L+(k^B&(A^k))+O[14]+3275163606&4294967295,L=A+(M<<9&4294967295|M>>>23),M=B+(A^k&(L^A))+O[3]+4107603335&4294967295,B=L+(M<<14&4294967295|M>>>18),M=k+(L^A&(B^L))+O[8]+1163531501&4294967295,k=B+(M<<20&4294967295|M>>>12),M=A+(B^L&(k^B))+O[13]+2850285829&4294967295,A=k+(M<<5&4294967295|M>>>27),M=L+(k^B&(A^k))+O[2]+4243563512&4294967295,L=A+(M<<9&4294967295|M>>>23),M=B+(A^k&(L^A))+O[7]+1735328473&4294967295,B=L+(M<<14&4294967295|M>>>18),M=k+(L^A&(B^L))+O[12]+2368359562&4294967295,k=B+(M<<20&4294967295|M>>>12),M=A+(k^B^L)+O[5]+4294588738&4294967295,A=k+(M<<4&4294967295|M>>>28),M=L+(A^k^B)+O[8]+2272392833&4294967295,L=A+(M<<11&4294967295|M>>>21),M=B+(L^A^k)+O[11]+1839030562&4294967295,B=L+(M<<16&4294967295|M>>>16),M=k+(B^L^A)+O[14]+4259657740&4294967295,k=B+(M<<23&4294967295|M>>>9),M=A+(k^B^L)+O[1]+2763975236&4294967295,A=k+(M<<4&4294967295|M>>>28),M=L+(A^k^B)+O[4]+1272893353&4294967295,L=A+(M<<11&4294967295|M>>>21),M=B+(L^A^k)+O[7]+4139469664&4294967295,B=L+(M<<16&4294967295|M>>>16),M=k+(B^L^A)+O[10]+3200236656&4294967295,k=B+(M<<23&4294967295|M>>>9),M=A+(k^B^L)+O[13]+681279174&4294967295,A=k+(M<<4&4294967295|M>>>28),M=L+(A^k^B)+O[0]+3936430074&4294967295,L=A+(M<<11&4294967295|M>>>21),M=B+(L^A^k)+O[3]+3572445317&4294967295,B=L+(M<<16&4294967295|M>>>16),M=k+(B^L^A)+O[6]+76029189&4294967295,k=B+(M<<23&4294967295|M>>>9),M=A+(k^B^L)+O[9]+3654602809&4294967295,A=k+(M<<4&4294967295|M>>>28),M=L+(A^k^B)+O[12]+3873151461&4294967295,L=A+(M<<11&4294967295|M>>>21),M=B+(L^A^k)+O[15]+530742520&4294967295,B=L+(M<<16&4294967295|M>>>16),M=k+(B^L^A)+O[2]+3299628645&4294967295,k=B+(M<<23&4294967295|M>>>9),M=A+(B^(k|~L))+O[0]+4096336452&4294967295,A=k+(M<<6&4294967295|M>>>26),M=L+(k^(A|~B))+O[7]+1126891415&4294967295,L=A+(M<<10&4294967295|M>>>22),M=B+(A^(L|~k))+O[14]+2878612391&4294967295,B=L+(M<<15&4294967295|M>>>17),M=k+(L^(B|~A))+O[5]+4237533241&4294967295,k=B+(M<<21&4294967295|M>>>11),M=A+(B^(k|~L))+O[12]+1700485571&4294967295,A=k+(M<<6&4294967295|M>>>26),M=L+(k^(A|~B))+O[3]+2399980690&4294967295,L=A+(M<<10&4294967295|M>>>22),M=B+(A^(L|~k))+O[10]+4293915773&4294967295,B=L+(M<<15&4294967295|M>>>17),M=k+(L^(B|~A))+O[1]+2240044497&4294967295,k=B+(M<<21&4294967295|M>>>11),M=A+(B^(k|~L))+O[8]+1873313359&4294967295,A=k+(M<<6&4294967295|M>>>26),M=L+(k^(A|~B))+O[15]+4264355552&4294967295,L=A+(M<<10&4294967295|M>>>22),M=B+(A^(L|~k))+O[6]+2734768916&4294967295,B=L+(M<<15&4294967295|M>>>17),M=k+(L^(B|~A))+O[13]+1309151649&4294967295,k=B+(M<<21&4294967295|M>>>11),M=A+(B^(k|~L))+O[4]+4149444226&4294967295,A=k+(M<<6&4294967295|M>>>26),M=L+(k^(A|~B))+O[11]+3174756917&4294967295,L=A+(M<<10&4294967295|M>>>22),M=B+(A^(L|~k))+O[2]+718787259&4294967295,B=L+(M<<15&4294967295|M>>>17),M=k+(L^(B|~A))+O[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(B+(M<<21&4294967295|M>>>11))&4294967295,I.g[2]=I.g[2]+B&4294967295,I.g[3]=I.g[3]+L&4294967295}r.prototype.v=function(I,A){A===void 0&&(A=I.length);const k=A-this.blockSize,O=this.C;let B=this.h,L=0;for(;L<A;){if(B==0)for(;L<=k;)i(this,I,L),L+=this.blockSize;if(typeof I=="string"){for(;L<A;)if(O[B++]=I.charCodeAt(L++),B==this.blockSize){i(this,O),B=0;break}}else for(;L<A;)if(O[B++]=I[L++],B==this.blockSize){i(this,O),B=0;break}}this.h=B,this.o+=A},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;A=this.o*8;for(var k=I.length-8;k<I.length;++k)I[k]=A&255,A/=256;for(this.v(I),I=Array(16),A=0,k=0;k<4;++k)for(let O=0;O<32;O+=8)I[A++]=this.g[k]>>>O&255;return I};function a(I,A){var k=c;return Object.prototype.hasOwnProperty.call(k,I)?k[I]:k[I]=A(I)}function o(I,A){this.h=A;const k=[];let O=!0;for(let B=I.length-1;B>=0;B--){const L=I[B]|0;O&&L==A||(k[B]=L,O=!1)}this.g=k}var c={};function u(I){return-128<=I&&I<128?a(I,function(A){return new o([A|0],A<0?-1:0)}):new o([I|0],I<0?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return S(d(-I));const A=[];let k=1;for(let O=0;I>=k;O++)A[O]=I/k|0,k*=4294967296;return new o(A,0)}function h(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return S(h(I.substring(1),A));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=d(Math.pow(A,8));let O=p;for(let L=0;L<I.length;L+=8){var B=Math.min(8,I.length-L);const M=parseInt(I.substring(L,L+B),A);B<8?(B=d(Math.pow(A,B)),O=O.j(B).add(d(M))):(O=O.j(k),O=O.add(d(M)))}return O}var p=u(0),m=u(1),x=u(16777216);n=o.prototype,n.m=function(){if(E(this))return-S(this).m();let I=0,A=1;for(let k=0;k<this.g.length;k++){const O=this.i(k);I+=(O>=0?O:4294967296+O)*A,A*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(E(this))return"-"+S(this).toString(I);const A=d(Math.pow(I,6));var k=this;let O="";for(;;){const B=j(k,A).g;k=T(k,B.j(A));let L=((k.g.length>0?k.g[0]:k.h)>>>0).toString(I);if(k=B,_(k))return L+O;for(;L.length<6;)L="0"+L;O=L+O}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(let A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function E(I){return I.h==-1}n.l=function(I){return I=T(this,I),E(I)?-1:_(I)?0:1};function S(I){const A=I.g.length,k=[];for(let O=0;O<A;O++)k[O]=~I.g[O];return new o(k,~I.h).add(m)}n.abs=function(){return E(this)?S(this):this},n.add=function(I){const A=Math.max(this.g.length,I.g.length),k=[];let O=0;for(let B=0;B<=A;B++){let L=O+(this.i(B)&65535)+(I.i(B)&65535),M=(L>>>16)+(this.i(B)>>>16)+(I.i(B)>>>16);O=M>>>16,L&=65535,M&=65535,k[B]=M<<16|L}return new o(k,k[k.length-1]&-2147483648?-1:0)};function T(I,A){return I.add(S(A))}n.j=function(I){if(_(this)||_(I))return p;if(E(this))return E(I)?S(this).j(S(I)):S(S(this).j(I));if(E(I))return S(this.j(S(I)));if(this.l(x)<0&&I.l(x)<0)return d(this.m()*I.m());const A=this.g.length+I.g.length,k=[];for(var O=0;O<2*A;O++)k[O]=0;for(O=0;O<this.g.length;O++)for(let B=0;B<I.g.length;B++){const L=this.i(O)>>>16,M=this.i(O)&65535,X=I.i(B)>>>16,Q=I.i(B)&65535;k[2*O+2*B]+=M*Q,C(k,2*O+2*B),k[2*O+2*B+1]+=L*Q,C(k,2*O+2*B+1),k[2*O+2*B+1]+=M*X,C(k,2*O+2*B+1),k[2*O+2*B+2]+=L*X,C(k,2*O+2*B+2)}for(I=0;I<A;I++)k[I]=k[2*I+1]<<16|k[2*I];for(I=A;I<2*A;I++)k[I]=0;return new o(k,0)};function C(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function R(I,A){this.g=I,this.h=A}function j(I,A){if(_(A))throw Error("division by zero");if(_(I))return new R(p,p);if(E(I))return A=j(S(I),A),new R(S(A.g),S(A.h));if(E(A))return A=j(I,S(A)),new R(S(A.g),A.h);if(I.g.length>30){if(E(I)||E(A))throw Error("slowDivide_ only works with positive integers.");for(var k=m,O=A;O.l(I)<=0;)k=z(k),O=z(O);var B=V(k,1),L=V(O,1);for(O=V(O,2),k=V(k,2);!_(O);){var M=L.add(O);M.l(I)<=0&&(B=B.add(k),L=M),O=V(O,1),k=V(k,1)}return A=T(I,B.j(A)),new R(B,A)}for(B=p;I.l(A)>=0;){for(k=Math.max(1,Math.floor(I.m()/A.m())),O=Math.ceil(Math.log(k)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),L=d(k),M=L.j(A);E(M)||M.l(I)>0;)k-=O,L=d(k),M=L.j(A);_(L)&&(L=m),B=B.add(L),I=T(I,M)}return new R(B,I)}n.B=function(I){return j(this,I).h},n.and=function(I){const A=Math.max(this.g.length,I.g.length),k=[];for(let O=0;O<A;O++)k[O]=this.i(O)&I.i(O);return new o(k,this.h&I.h)},n.or=function(I){const A=Math.max(this.g.length,I.g.length),k=[];for(let O=0;O<A;O++)k[O]=this.i(O)|I.i(O);return new o(k,this.h|I.h)},n.xor=function(I){const A=Math.max(this.g.length,I.g.length),k=[];for(let O=0;O<A;O++)k[O]=this.i(O)^I.i(O);return new o(k,this.h^I.h)};function z(I){const A=I.g.length+1,k=[];for(let O=0;O<A;O++)k[O]=I.i(O)<<1|I.i(O-1)>>>31;return new o(k,I.h)}function V(I,A){const k=A>>5;A%=32;const O=I.g.length-k,B=[];for(let L=0;L<O;L++)B[L]=A>0?I.i(L+k)>>>A|I.i(L+k+1)<<32-A:I.i(L+k);return new o(B,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,oO=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Jo=o}).apply(typeof HR<"u"?HR:typeof self<"u"?self:typeof window<"u"?window:{});var Gm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var lO,ch,cO,a0,b_,uO,dO,fO;(function(){var n,e=Object.defineProperty;function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gm=="object"&&Gm];for(var D=0;D<v.length;++D){var P=v[D];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=t(this);function i(v,D){if(D)e:{var P=r;v=v.split(".");for(var q=0;q<v.length-1;q++){var le=v[q];if(!(le in P))break e;P=P[le]}v=v[v.length-1],q=P[v],D=D(q),D!=q&&D!=null&&e(P,v,{configurable:!0,writable:!0,value:D})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(D){var P=[],q;for(q in D)Object.prototype.hasOwnProperty.call(D,q)&&P.push([q,D[q]]);return P}});var a=a||{},o=this||self;function c(v){var D=typeof v;return D=="object"&&v!=null||D=="function"}function u(v,D,P){return v.call.apply(v.bind,arguments)}function d(v,D,P){return d=u,d.apply(null,arguments)}function h(v,D){var P=Array.prototype.slice.call(arguments,1);return function(){var q=P.slice();return q.push.apply(q,arguments),v.apply(this,q)}}function p(v,D){function P(){}P.prototype=D.prototype,v.Z=D.prototype,v.prototype=new P,v.prototype.constructor=v,v.Ob=function(q,le,he){for(var Re=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)Re[ht-2]=arguments[ht];return D.prototype[le].apply(q,Re)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function x(v){const D=v.length;if(D>0){const P=Array(D);for(let q=0;q<D;q++)P[q]=v[q];return P}return[]}function _(v,D){for(let q=1;q<arguments.length;q++){const le=arguments[q];var P=typeof le;if(P=P!="object"?P:le?Array.isArray(le)?"array":P:"null",P=="array"||P=="object"&&typeof le.length=="number"){P=v.length||0;const he=le.length||0;v.length=P+he;for(let Re=0;Re<he;Re++)v[P+Re]=le[Re]}else v.push(le)}}class E{constructor(D,P){this.i=D,this.j=P,this.h=0,this.g=null}get(){let D;return this.h>0?(this.h--,D=this.g,this.g=D.next,D.next=null):D=this.i(),D}}function S(v){o.setTimeout(()=>{throw v},0)}function T(){var v=I;let D=null;return v.g&&(D=v.g,v.g=v.g.next,v.g||(v.h=null),D.next=null),D}class C{constructor(){this.h=this.g=null}add(D,P){const q=R.get();q.set(D,P),this.h?this.h.next=q:this.g=q,this.h=q}}var R=new E(()=>new j,v=>v.reset());class j{constructor(){this.next=this.g=this.h=null}set(D,P){this.h=D,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let z,V=!1,I=new C,A=()=>{const v=Promise.resolve(void 0);z=()=>{v.then(k)}};function k(){for(var v;v=T();){try{v.h.call(v.g)}catch(P){S(P)}var D=R;D.j(v),D.h<100&&(D.h++,v.next=D.g,D.g=v)}V=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(v,D){this.type=v,this.g=this.target=D,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,D=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const P=()=>{};o.addEventListener("test",P,D),o.removeEventListener("test",P,D)}catch{}return v})();function M(v){return/^[\s\xa0]*$/.test(v)}function X(v,D){B.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,D)}p(X,B),X.prototype.init=function(v,D){const P=this.type=v.type,q=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=D,D=v.relatedTarget,D||(P=="mouseover"?D=v.fromElement:P=="mouseout"&&(D=v.toElement)),this.relatedTarget=D,q?(this.clientX=q.clientX!==void 0?q.clientX:q.pageX,this.clientY=q.clientY!==void 0?q.clientY:q.pageY,this.screenX=q.screenX||0,this.screenY=q.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&X.Z.h.call(this)},X.prototype.h=function(){X.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),$=0;function H(v,D,P,q,le){this.listener=v,this.proxy=null,this.src=D,this.type=P,this.capture=!!q,this.ha=le,this.key=++$,this.da=this.fa=!1}function J(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function re(v,D,P){for(const q in v)D.call(P,v[q],q,v)}function fe(v,D){for(const P in v)D.call(void 0,v[P],P,v)}function U(v){const D={};for(const P in v)D[P]=v[P];return D}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(v,D){let P,q;for(let le=1;le<arguments.length;le++){q=arguments[le];for(P in q)v[P]=q[P];for(let he=0;he<Y.length;he++)P=Y[he],Object.prototype.hasOwnProperty.call(q,P)&&(v[P]=q[P])}}function ae(v){this.src=v,this.g={},this.h=0}ae.prototype.add=function(v,D,P,q,le){const he=v.toString();v=this.g[he],v||(v=this.g[he]=[],this.h++);const Re=se(v,D,q,le);return Re>-1?(D=v[Re],P||(D.fa=!1)):(D=new H(D,this.src,he,!!q,le),D.fa=P,v.push(D)),D};function ne(v,D){const P=D.type;if(P in v.g){var q=v.g[P],le=Array.prototype.indexOf.call(q,D,void 0),he;(he=le>=0)&&Array.prototype.splice.call(q,le,1),he&&(J(D),v.g[P].length==0&&(delete v.g[P],v.h--))}}function se(v,D,P,q){for(let le=0;le<v.length;++le){const he=v[le];if(!he.da&&he.listener==D&&he.capture==!!P&&he.ha==q)return le}return-1}var me="closure_lm_"+(Math.random()*1e6|0),Te={};function Ce(v,D,P,q,le){if(Array.isArray(D)){for(let he=0;he<D.length;he++)Ce(v,D[he],P,q,le);return null}return P=yt(P),v&&v[Q]?v.J(D,P,c(q)?!!q.capture:!1,le):Ne(v,D,P,!1,q,le)}function Ne(v,D,P,q,le,he){if(!D)throw Error("Invalid event type");const Re=c(le)?!!le.capture:!!le;let ht=ze(v);if(ht||(v[me]=ht=new ae(v)),P=ht.add(D,P,q,Re,he),P.proxy)return P;if(q=xe(),P.proxy=q,q.src=v,q.listener=P,v.addEventListener)L||(le=Re),le===void 0&&(le=!1),v.addEventListener(D.toString(),q,le);else if(v.attachEvent)v.attachEvent(Oe(D.toString()),q);else if(v.addListener&&v.removeListener)v.addListener(q);else throw Error("addEventListener and attachEvent are unavailable.");return P}function xe(){function v(P){return D.call(v.src,v.listener,P)}const D=Be;return v}function Ee(v,D,P,q,le){if(Array.isArray(D))for(var he=0;he<D.length;he++)Ee(v,D[he],P,q,le);else q=c(q)?!!q.capture:!!q,P=yt(P),v&&v[Q]?(v=v.i,he=String(D).toString(),he in v.g&&(D=v.g[he],P=se(D,P,q,le),P>-1&&(J(D[P]),Array.prototype.splice.call(D,P,1),D.length==0&&(delete v.g[he],v.h--)))):v&&(v=ze(v))&&(D=v.g[D.toString()],v=-1,D&&(v=se(D,P,q,le)),(P=v>-1?D[v]:null)&&Qe(P))}function Qe(v){if(typeof v!="number"&&v&&!v.da){var D=v.src;if(D&&D[Q])ne(D.i,v);else{var P=v.type,q=v.proxy;D.removeEventListener?D.removeEventListener(P,q,v.capture):D.detachEvent?D.detachEvent(Oe(P),q):D.addListener&&D.removeListener&&D.removeListener(q),(P=ze(D))?(ne(P,v),P.h==0&&(P.src=null,D[me]=null)):J(v)}}}function Oe(v){return v in Te?Te[v]:Te[v]="on"+v}function Be(v,D){if(v.da)v=!0;else{D=new X(D,this);const P=v.listener,q=v.ha||v.src;v.fa&&Qe(v),v=P.call(q,D)}return v}function ze(v){return v=v[me],v instanceof ae?v:null}var st="__closure_events_fn_"+(Math.random()*1e9>>>0);function yt(v){return typeof v=="function"?v:(v[st]||(v[st]=function(D){return v.handleEvent(D)}),v[st])}function Ve(){O.call(this),this.i=new ae(this),this.M=this,this.G=null}p(Ve,O),Ve.prototype[Q]=!0,Ve.prototype.removeEventListener=function(v,D,P,q){Ee(this,v,D,P,q)};function Ke(v,D){var P,q=v.G;if(q)for(P=[];q;q=q.G)P.push(q);if(v=v.M,q=D.type||D,typeof D=="string")D=new B(D,v);else if(D instanceof B)D.target=D.target||v;else{var le=D;D=new B(q,v),te(D,le)}le=!0;let he,Re;if(P)for(Re=P.length-1;Re>=0;Re--)he=D.g=P[Re],le=Mt(he,q,!0,D)&&le;if(he=D.g=v,le=Mt(he,q,!0,D)&&le,le=Mt(he,q,!1,D)&&le,P)for(Re=0;Re<P.length;Re++)he=D.g=P[Re],le=Mt(he,q,!1,D)&&le}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var v=this.i;for(const D in v.g){const P=v.g[D];for(let q=0;q<P.length;q++)J(P[q]);delete v.g[D],v.h--}}this.G=null},Ve.prototype.J=function(v,D,P,q){return this.i.add(String(v),D,!1,P,q)},Ve.prototype.K=function(v,D,P,q){return this.i.add(String(v),D,!0,P,q)};function Mt(v,D,P,q){if(D=v.i.g[String(D)],!D)return!0;D=D.concat();let le=!0;for(let he=0;he<D.length;++he){const Re=D[he];if(Re&&!Re.da&&Re.capture==P){const ht=Re.listener,kn=Re.ha||Re.src;Re.fa&&ne(v.i,Re),le=ht.call(kn,q)!==!1&&le}}return le&&!q.defaultPrevented}function yn(v,D){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=d(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(D)>2147483647?-1:o.setTimeout(v,D||0)}function dn(v){v.g=yn(()=>{v.g=null,v.i&&(v.i=!1,dn(v))},v.l);const D=v.h;v.h=null,v.m.apply(null,D)}class bt extends O{constructor(D,P){super(),this.m=D,this.l=P,this.h=null,this.i=!1,this.g=null}j(D){this.h=arguments,this.g?this.i=!0:dn(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lt(v){O.call(this),this.h=v,this.g={}}p(Lt,O);var Ar=[];function Zn(v){re(v.g,function(D,P){this.g.hasOwnProperty(P)&&Qe(D)},v),v.g={}}Lt.prototype.N=function(){Lt.Z.N.call(this),Zn(this)},Lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $r=o.JSON.stringify,ss=o.JSON.parse,Qs=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function Wi(){}function ba(){}var Vr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bn(){B.call(this,"d")}p(bn,B);function cr(){B.call(this,"c")}p(cr,B);var en={},Zs=null;function ke(){return Zs=Zs||new Ve}en.Ia="serverreachability";function Me(v){B.call(this,en.Ia,v)}p(Me,B);function dt(v){const D=ke();Ke(D,new Me(D))}en.STAT_EVENT="statevent";function Xe(v,D){B.call(this,en.STAT_EVENT,v),this.stat=D}p(Xe,B);function Ze(v){const D=ke();Ke(D,new Xe(D,v))}en.Ja="timingevent";function An(v,D){B.call(this,en.Ja,v),this.size=D}p(An,B);function Jt(v,D){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},D)}function nt(){this.g=!0}nt.prototype.ua=function(){this.g=!1};function Cn(v,D,P,q,le,he){v.info(function(){if(v.g)if(he){var Re="",ht=he.split("&");for(let Vt=0;Vt<ht.length;Vt++){var kn=ht[Vt].split("=");if(kn.length>1){const sn=kn[0];kn=kn[1];const Ci=sn.split("_");Re=Ci.length>=2&&Ci[1]=="type"?Re+(sn+"="+kn+"&"):Re+(sn+"=redacted&")}}}else Re=null;else Re=he;return"XMLHTTP REQ ("+q+") [attempt "+le+"]: "+D+`
`+P+`
`+Re})}function Rt(v,D,P,q,le,he,Re){v.info(function(){return"XMLHTTP RESP ("+q+") [ attempt "+le+"]: "+D+`
`+P+`
`+he+" "+Re})}function St(v,D,P,q){v.info(function(){return"XMLHTTP TEXT ("+D+"): "+fn(v,P)+(q?" "+q:"")})}function In(v,D){v.info(function(){return"TIMEOUT: "+D})}nt.prototype.info=function(){};function fn(v,D){if(!v.g)return D;if(!D)return null;try{const he=JSON.parse(D);if(he){for(v=0;v<he.length;v++)if(Array.isArray(he[v])){var P=he[v];if(!(P.length<2)){var q=P[1];if(Array.isArray(q)&&!(q.length<1)){var le=q[0];if(le!="noop"&&le!="stop"&&le!="close")for(let Re=1;Re<q.length;Re++)q[Re]=""}}}}return $r(he)}catch{return D}}var xt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Jn;function oi(){}p(oi,Wi),oi.prototype.g=function(){return new XMLHttpRequest},Jn=new oi;function er(v){return encodeURIComponent(String(v))}function Ei(v){var D=1;v=v.split(":");const P=[];for(;D>0&&v.length;)P.push(v.shift()),D--;return v.length&&P.push(v.join(":")),P}function Dn(v,D,P,q){this.j=v,this.i=D,this.l=P,this.S=q||1,this.V=new Lt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qi}function Qi(){this.i=null,this.g="",this.h=!1}var zn={},ur={};function xa(v,D,P){v.M=1,v.A=bl(Bn(D)),v.u=P,v.R=!0,Uc(v,null)}function Uc(v,D){v.F=Date.now(),_a(v),v.B=Bn(v.A);var P=v.B,q=v.S;Array.isArray(q)||(q=[String(q)]),Hc(P.i,"t",q),v.C=0,P=v.j.L,v.h=new Qi,v.g=pg(v.j,P?D:null,!v.u),v.P>0&&(v.O=new bt(d(v.Y,v,v.g),v.P)),D=v.V,P=v.g,q=v.ba;var le="readystatechange";Array.isArray(le)||(le&&(Ar[0]=le.toString()),le=Ar);for(let he=0;he<le.length;he++){const Re=Ce(P,le[he],q||D.handleEvent,!1,D.h||D);if(!Re)break;D.g[Re.key]=Re}D=v.J?U(v.J):{},v.u?(v.v||(v.v="POST"),D["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,D)):(v.v="GET",v.g.ea(v.B,v.v,null,D)),dt(),Cn(v.i,v.v,v.B,v.l,v.S,v.u)}Dn.prototype.ba=function(v){v=v.target;const D=this.O;D&&ea(v)==3?D.j():this.Y(v)},Dn.prototype.Y=function(v){try{if(v==this.g)e:{const ht=ea(this.g),kn=this.g.ya(),Vt=this.g.ca();if(!(ht<3)&&(ht!=3||this.g&&(this.h.h||this.g.la()||gr(this.g)))){this.K||ht!=4||kn==7||(kn==8||Vt<=0?dt(3):dt(2)),wa(this);var D=this.g.ca();this.X=D;var P=gy(this);if(this.o=D==200,Rt(this.i,this.v,this.B,this.l,this.S,ht,D),this.o){if(this.U&&!this.L){t:{if(this.g){var q,le=this.g;if((q=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(q)){var he=q;break t}}he=null}if(v=he)St(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ea(this,v);else{this.o=!1,this.m=3,Ze(12),li(this),Si(this);break e}}if(this.R){v=!0;let sn;for(;!this.K&&this.C<P.length;)if(sn=tg(this,P),sn==ur){ht==4&&(this.m=4,Ze(14),v=!1),St(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==zn){this.m=4,Ze(15),St(this.i,this.l,P,"[Invalid Chunk]"),v=!1;break}else St(this.i,this.l,sn,null),Ea(this,sn);if(eg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||P.length!=0||this.h.h||(this.m=1,Ze(16),v=!1),this.o=this.o&&v,!v)St(this.i,this.l,P,"[Invalid Chunked Response]"),li(this),Si(this);else if(P.length>0&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.aa&&!Re.P&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),uf(Re),Re.P=!0,Ze(11))}}else St(this.i,this.l,P,null),Ea(this,P);ht==4&&li(this),this.o&&!this.K&&(ht==4?ug(this.j,this):(this.o=!1,_a(this)))}else ls(this.g),D==400&&P.indexOf("Unknown SID")>0?(this.m=3,Ze(12)):(this.m=0,Ze(13)),li(this),Si(this)}}}catch{}finally{}};function gy(v){if(!eg(v))return v.g.la();const D=gr(v.g);if(D==="")return"";let P="";const q=D.length,le=ea(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return li(v),Si(v),"";v.h.i=new o.TextDecoder}for(let he=0;he<q;he++)v.h.h=!0,P+=v.h.i.decode(D[he],{stream:!(le&&he==q-1)});return D.length=0,v.h.g+=P,v.C=0,v.h.g}function eg(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function tg(v,D){var P=v.C,q=D.indexOf(`
`,P);return q==-1?ur:(P=Number(D.substring(P,q)),isNaN(P)?zn:(q+=1,q+P>D.length?ur:(D=D.slice(q,q+P),v.C=q+P,D)))}Dn.prototype.cancel=function(){this.K=!0,li(this)};function _a(v){v.T=Date.now()+v.H,Fc(v,v.H)}function Fc(v,D){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Jt(d(v.aa,v),D)}function wa(v){v.D&&(o.clearTimeout(v.D),v.D=null)}Dn.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(In(this.i,this.B),this.M!=2&&(dt(),Ze(17)),li(this),this.m=2,Si(this)):Fc(this,this.T-v)};function Si(v){v.j.I==0||v.K||ug(v.j,v)}function li(v){wa(v);var D=v.O;D&&typeof D.dispose=="function"&&D.dispose(),v.O=null,Zn(v.V),v.g&&(D=v.g,v.g=null,D.abort(),D.dispose())}function Ea(v,D){try{var P=v.j;if(P.I!=0&&(P.g==v||Ta(P.h,v))){if(!v.L&&Ta(P.h,v)&&P.I==3){try{var q=P.Ba.g.parse(D)}catch{q=null}if(Array.isArray(q)&&q.length==3){var le=q;if(le[0]==0){e:if(!P.v){if(P.g)if(P.g.F+3e3<v.F)Wc(P),so(P);else break e;Al(P),Ze(18)}}else P.xa=le[1],0<P.xa-P.K&&le[2]<37500&&P.F&&P.A==0&&!P.C&&(P.C=Jt(d(P.Va,P),6e3));Sa(P.h)<=1&&P.ta&&(P.ta=void 0)}else ka(P,11)}else if((v.L||P.g==v)&&Wc(P),!M(D))for(le=P.Ba.g.parse(D),D=0;D<le.length;D++){let Vt=le[D];const sn=Vt[0];if(!(sn<=P.K))if(P.K=sn,Vt=Vt[1],P.I==2)if(Vt[0]=="c"){P.M=Vt[1],P.ba=Vt[2];const Ci=Vt[3];Ci!=null&&(P.ka=Ci,P.j.info("VER="+P.ka));const Na=Vt[4];Na!=null&&(P.za=Na,P.j.info("SVER="+P.za));const ta=Vt[5];ta!=null&&typeof ta=="number"&&ta>0&&(q=1.5*ta,P.O=q,P.j.info("backChannelRequestTimeoutMs_="+q)),q=P;const na=v.g;if(na){const Cl=na.g?na.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cl){var he=q.h;he.g||Cl.indexOf("spdy")==-1&&Cl.indexOf("quic")==-1&&Cl.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(Qd(he,he.h),he.h=null))}if(q.G){const Qc=na.g?na.g.getResponseHeader("X-HTTP-Session-Id"):null;Qc&&(q.wa=Qc,Bt(q.J,q.G,Qc))}}P.I=3,P.l&&P.l.ra(),P.aa&&(P.T=Date.now()-v.F,P.j.info("Handshake RTT: "+P.T+"ms")),q=P;var Re=v;if(q.na=hg(q,q.L?q.ba:null,q.W),Re.L){Zd(q.h,Re);var ht=Re,kn=q.O;kn&&(ht.H=kn),ht.D&&(wa(ht),_a(ht)),q.g=Re}else lg(q);P.i.length>0&&Da(P)}else Vt[0]!="stop"&&Vt[0]!="close"||ka(P,7);else P.I==3&&(Vt[0]=="stop"||Vt[0]=="close"?Vt[0]=="stop"?ka(P,7):lf(P):Vt[0]!="noop"&&P.l&&P.l.qa(Vt),P.A=0)}}dt(4)}catch{}}var Ln=class{constructor(v,D){this.g=v,this.map=D}};function Xd(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wd(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function Sa(v){return v.h?1:v.g?v.g.size:0}function Ta(v,D){return v.h?v.h==D:v.g?v.g.has(D):!1}function Qd(v,D){v.g?v.g.add(D):v.h=D}function Zd(v,D){v.h&&v.h==D?v.h=null:v.g&&v.g.has(D)&&v.g.delete(D)}Xd.prototype.cancel=function(){if(this.i=Jd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Jd(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let D=v.i;for(const P of v.g.values())D=D.concat(P.G);return D}return x(v.i)}var ng=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gc(v,D){if(v){v=v.split("&");for(let P=0;P<v.length;P++){const q=v[P].indexOf("=");let le,he=null;q>=0?(le=v[P].substring(0,q),he=v[P].substring(q+1)):le=v[P],D(le,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}}function ci(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let D;v instanceof ci?(this.l=v.l,dr(this,v.j),this.o=v.o,this.g=v.g,Js(this,v.u),this.h=v.h,ef(this,sg(v.i)),this.m=v.m):v&&(D=String(v).match(ng))?(this.l=!1,dr(this,D[1]||"",!0),this.o=Aa(D[2]||""),this.g=Aa(D[3]||"",!0),Js(this,D[4]),this.h=Aa(D[5]||"",!0),ef(this,D[6]||"",!0),this.m=Aa(D[7]||"")):(this.l=!1,this.i=new to(null,this.l))}ci.prototype.toString=function(){const v=[];var D=this.j;D&&v.push(xl(D,qc,!0),":");var P=this.g;return(P||D=="file")&&(v.push("//"),(D=this.o)&&v.push(xl(D,qc,!0),"@"),v.push(er(P).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.u,P!=null&&v.push(":",String(P))),(P=this.h)&&(this.g&&P.charAt(0)!="/"&&v.push("/"),v.push(xl(P,P.charAt(0)=="/"?tf:rg,!0))),(P=this.i.toString())&&v.push("?",P),(P=this.m)&&v.push("#",xl(P,ig)),v.join("")},ci.prototype.resolve=function(v){const D=Bn(this);let P=!!v.j;P?dr(D,v.j):P=!!v.o,P?D.o=v.o:P=!!v.g,P?D.g=v.g:P=v.u!=null;var q=v.h;if(P)Js(D,v.u);else if(P=!!v.h){if(q.charAt(0)!="/")if(this.g&&!this.h)q="/"+q;else{var le=D.h.lastIndexOf("/");le!=-1&&(q=D.h.slice(0,le+1)+q)}if(le=q,le==".."||le==".")q="";else if(le.indexOf("./")!=-1||le.indexOf("/.")!=-1){q=le.lastIndexOf("/",0)==0,le=le.split("/");const he=[];for(let Re=0;Re<le.length;){const ht=le[Re++];ht=="."?q&&Re==le.length&&he.push(""):ht==".."?((he.length>1||he.length==1&&he[0]!="")&&he.pop(),q&&Re==le.length&&he.push("")):(he.push(ht),q=!0)}q=he.join("/")}else q=le}return P?D.h=q:P=v.i.toString()!=="",P?ef(D,sg(v.i)):P=!!v.m,P&&(D.m=v.m),D};function Bn(v){return new ci(v)}function dr(v,D,P){v.j=P?Aa(D,!0):D,v.j&&(v.j=v.j.replace(/:$/,""))}function Js(v,D){if(D){if(D=Number(D),isNaN(D)||D<0)throw Error("Bad port number "+D);v.u=D}else v.u=null}function ef(v,D,P){D instanceof to?(v.i=D,$c(v.i,v.l)):(P||(D=xl(D,eo)),v.i=new to(D,v.l))}function Bt(v,D,P){v.i.set(D,P)}function bl(v){return Bt(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function Aa(v,D){return v?D?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function xl(v,D,P){return typeof v=="string"?(v=encodeURI(v).replace(D,Yr),P&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Yr(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var qc=/[#\/\?@]/g,rg=/[#\?:]/g,tf=/[#\?]/g,eo=/[#\?@]/g,ig=/#/g;function to(v,D){this.h=this.g=null,this.i=v||null,this.j=!!D}function Kr(v){v.g||(v.g=new Map,v.h=0,v.i&&Gc(v.i,function(D,P){v.add(decodeURIComponent(D.replace(/\+/g," ")),P)}))}n=to.prototype,n.add=function(v,D){Kr(this),this.i=null,v=no(this,v);let P=this.g.get(v);return P||this.g.set(v,P=[]),P.push(D),this.h+=1,this};function ag(v,D){Kr(v),D=no(v,D),v.g.has(D)&&(v.i=null,v.h-=v.g.get(D).length,v.g.delete(D))}function nf(v,D){return Kr(v),D=no(v,D),v.g.has(D)}n.forEach=function(v,D){Kr(this),this.g.forEach(function(P,q){P.forEach(function(le){v.call(D,le,q,this)},this)},this)};function rf(v,D){Kr(v);let P=[];if(typeof D=="string")nf(v,D)&&(P=P.concat(v.g.get(no(v,D))));else for(v=Array.from(v.g.values()),D=0;D<v.length;D++)P=P.concat(v[D]);return P}n.set=function(v,D){return Kr(this),this.i=null,v=no(this,v),nf(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[D]),this.h+=1,this},n.get=function(v,D){return v?(v=rf(this,v),v.length>0?String(v[0]):D):D};function Hc(v,D,P){ag(v,D),P.length>0&&(v.i=null,v.g.set(no(v,D),x(P)),v.h+=P.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],D=Array.from(this.g.keys());for(let q=0;q<D.length;q++){var P=D[q];const le=er(P);P=rf(this,P);for(let he=0;he<P.length;he++){let Re=le;P[he]!==""&&(Re+="="+er(P[he])),v.push(Re)}}return this.i=v.join("&")};function sg(v){const D=new to;return D.i=v.i,v.g&&(D.g=new Map(v.g),D.h=v.h),D}function no(v,D){return D=String(D),v.j&&(D=D.toLowerCase()),D}function $c(v,D){D&&!v.j&&(Kr(v),v.i=null,v.g.forEach(function(P,q){const le=q.toLowerCase();q!=le&&(ag(this,q),Hc(this,le,P))},v)),v.j=D}function Zi(v,D){const P=new nt;if(o.Image){const q=new Image;q.onload=h(Ti,P,"TestLoadImage: loaded",!0,D,q),q.onerror=h(Ti,P,"TestLoadImage: error",!1,D,q),q.onabort=h(Ti,P,"TestLoadImage: abort",!1,D,q),q.ontimeout=h(Ti,P,"TestLoadImage: timeout",!1,D,q),o.setTimeout(function(){q.ontimeout&&q.ontimeout()},1e4),q.src=v}else D(!1)}function af(v,D){const P=new nt,q=new AbortController,le=setTimeout(()=>{q.abort(),Ti(P,"TestPingServer: timeout",!1,D)},1e4);fetch(v,{signal:q.signal}).then(he=>{clearTimeout(le),he.ok?Ti(P,"TestPingServer: ok",!0,D):Ti(P,"TestPingServer: server error",!1,D)}).catch(()=>{clearTimeout(le),Ti(P,"TestPingServer: error",!1,D)})}function Ti(v,D,P,q,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),q(P)}catch{}}function ro(){this.g=new Qs}function Ca(v){this.i=v.Sb||null,this.h=v.ab||!1}p(Ca,Wi),Ca.prototype.g=function(){return new _l(this.i,this.h)};function _l(v,D){Ve.call(this),this.H=v,this.o=D,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(_l,Ve),n=_l.prototype,n.open=function(v,D){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=D,this.readyState=1,Ji(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const D={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(D.body=v),(this.H||o).fetch(new Request(this.D,D)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,io(this)),this.readyState=0},n.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Ji(this)),this.g&&(this.readyState=3,Ji(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yc(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yc(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}n.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var D=v.value?v.value:new Uint8Array(0);(D=this.B.decode(D,{stream:!v.done}))&&(this.response=this.responseText+=D)}v.done?io(this):Ji(this),this.readyState==3&&Yc(this)}},n.Oa=function(v){this.g&&(this.response=this.responseText=v,io(this))},n.Na=function(v){this.g&&(this.response=v,io(this))},n.ga=function(){this.g&&io(this)};function io(v){v.readyState=4,v.l=null,v.j=null,v.B=null,Ji(v)}n.setRequestHeader=function(v,D){this.A.append(v,D)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],D=this.h.entries();for(var P=D.next();!P.done;)P=P.value,v.push(P[0]+": "+P[1]),P=D.next();return v.join(`\r
`)};function Ji(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(_l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Ai(v){let D="";return re(v,function(P,q){D+=q,D+=":",D+=P,D+=`\r
`}),D}function wl(v,D,P){e:{for(q in P){var q=!1;break e}q=!0}q||(P=Ai(P),typeof v=="string"?P!=null&&er(P):Bt(v,D,P))}function Ht(v){Ve.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ht,Ve);var Ia=/^https?$/i,sf=["POST","PUT"];n=Ht.prototype,n.Fa=function(v){this.H=v},n.ea=function(v,D,P,q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);D=D?D.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Jn.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(D,String(v),!0),this.B=!1}catch(he){El(this,he);return}if(v=P||"",P=new Map(this.headers),q)if(Object.getPrototypeOf(q)===Object.prototype)for(var le in q)P.set(le,q[le]);else if(typeof q.keys=="function"&&typeof q.get=="function")for(const he of q.keys())P.set(he,q.get(he));else throw Error("Unknown input type for opt_headers: "+String(q));q=Array.from(P.keys()).find(he=>he.toLowerCase()=="content-type"),le=o.FormData&&v instanceof o.FormData,!(Array.prototype.indexOf.call(sf,D,void 0)>=0)||q||le||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Re]of P)this.g.setRequestHeader(he,Re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(he){El(this,he)}};function El(v,D){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=D,v.o=5,of(v),os(v)}function of(v){v.A||(v.A=!0,Ke(v,"complete"),Ke(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,Ke(this,"complete"),Ke(this,"abort"),os(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),os(this,!0)),Ht.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Sl(this):this.Xa())},n.Xa=function(){Sl(this)};function Sl(v){if(v.h&&typeof a<"u"){if(v.v&&ea(v)==4)setTimeout(v.Ca.bind(v),0);else if(Ke(v,"readystatechange"),ea(v)==4){v.h=!1;try{const he=v.ca();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var D=!0;break e;default:D=!1}var P;if(!(P=D)){var q;if(q=he===0){let Re=String(v.D).match(ng)[1]||null;!Re&&o.self&&o.self.location&&(Re=o.self.location.protocol.slice(0,-1)),q=!Ia.test(Re?Re.toLowerCase():"")}P=q}if(P)Ke(v,"complete"),Ke(v,"success");else{v.o=6;try{var le=ea(v)>2?v.g.statusText:""}catch{le=""}v.l=le+" ["+v.ca()+"]",of(v)}}finally{os(v)}}}}function os(v,D){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const P=v.g;v.g=null,D||Ke(v,"ready");try{P.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ea(v){return v.g?v.g.readyState:0}n.ca=function(){try{return ea(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(v){if(this.g){var D=this.g.responseText;return v&&D.indexOf(v)==0&&(D=D.substring(v.length)),ss(D)}};function gr(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function ls(v){const D={};v=(v.g&&ea(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let q=0;q<v.length;q++){if(M(v[q]))continue;var P=Ei(v[q]);const le=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const he=D[le]||[];D[le]=he,he.push(P)}fe(D,function(q){return q.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ra(v,D,P){return P&&P.internalChannelParams&&P.internalChannelParams[v]||D}function ao(v){this.za=0,this.i=[],this.j=new nt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ra("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ra("baseRetryDelayMs",5e3,v),this.Za=Ra("retryDelaySeedMs",1e4,v),this.Ta=Ra("forwardChannelMaxRetries",2,v),this.va=Ra("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new Xd(v&&v.concurrentRequestLimit),this.Ba=new ro,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ao.prototype,n.ka=8,n.I=1,n.connect=function(v,D,P,q){Ze(0),this.W=v,this.H=D||{},P&&q!==void 0&&(this.H.OSID=P,this.H.OAID=q),this.F=this.X,this.J=hg(this,null,this.W),Da(this)};function lf(v){if(Kc(v),v.I==3){var D=v.V++,P=Bn(v.J);if(Bt(P,"SID",v.M),Bt(P,"RID",D),Bt(P,"TYPE","terminate"),Tl(v,P),D=new Dn(v,v.j,D),D.M=2,D.A=bl(Bn(P)),P=!1,o.navigator&&o.navigator.sendBeacon)try{P=o.navigator.sendBeacon(D.A.toString(),"")}catch{}!P&&o.Image&&(new Image().src=D.A,P=!0),P||(D.g=pg(D.j,null),D.g.ea(D.A)),D.F=Date.now(),_a(D)}fg(v)}function so(v){v.g&&(uf(v),v.g.cancel(),v.g=null)}function Kc(v){so(v),v.v&&(o.clearTimeout(v.v),v.v=null),Wc(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&o.clearTimeout(v.m),v.m=null)}function Da(v){if(!Wd(v.h)&&!v.m){v.m=!0;var D=v.Ea;z||A(),V||(z(),V=!0),I.add(D,v),v.D=0}}function Xc(v,D){return Sa(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=D.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Jt(d(v.Ea,v,D),dg(v,v.D)),v.D++,!0)}n.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const le=new Dn(this,this.j,v);let he=this.o;if(this.U&&(he?(he=U(he),te(he,this.U)):he=this.U),this.u!==null||this.R||(le.J=he,he=null),this.S)e:{for(var D=0,P=0;P<this.i.length;P++){t:{var q=this.i[P];if("__data__"in q.map&&(q=q.map.__data__,typeof q=="string")){q=q.length;break t}q=void 0}if(q===void 0)break;if(D+=q,D>4096){D=P;break e}if(D===4096||P===this.i.length-1){D=P+1;break e}}D=1e3}else D=1e3;D=og(this,le,D),P=Bn(this.J),Bt(P,"RID",v),Bt(P,"CVER",22),this.G&&Bt(P,"X-HTTP-Session-Id",this.G),Tl(this,P),he&&(this.R?D="headers="+er(Ai(he))+"&"+D:this.u&&wl(P,this.u,he)),Qd(this.h,le),this.Ra&&Bt(P,"TYPE","init"),this.S?(Bt(P,"$req",D),Bt(P,"SID","null"),le.U=!0,xa(le,P,null)):xa(le,P,D),this.I=2}}else this.I==3&&(v?cf(this,v):this.i.length==0||Wd(this.h)||cf(this))};function cf(v,D){var P;D?P=D.l:P=v.V++;const q=Bn(v.J);Bt(q,"SID",v.M),Bt(q,"RID",P),Bt(q,"AID",v.K),Tl(v,q),v.u&&v.o&&wl(q,v.u,v.o),P=new Dn(v,v.j,P,v.D+1),v.u===null&&(P.J=v.o),D&&(v.i=D.G.concat(v.i)),D=og(v,P,1e3),P.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Qd(v.h,P),xa(P,q,D)}function Tl(v,D){v.H&&re(v.H,function(P,q){Bt(D,q,P)}),v.l&&re({},function(P,q){Bt(D,q,P)})}function og(v,D,P){P=Math.min(v.i.length,P);const q=v.l?d(v.l.Ka,v.l,v):null;e:{var le=v.i;let ht=-1;for(;;){const kn=["count="+P];ht==-1?P>0?(ht=le[0].g,kn.push("ofs="+ht)):ht=0:kn.push("ofs="+ht);let Vt=!0;for(let sn=0;sn<P;sn++){var he=le[sn].g;const Ci=le[sn].map;if(he-=ht,he<0)ht=Math.max(0,le[sn].g-100),Vt=!1;else try{he="req"+he+"_"||"";try{var Re=Ci instanceof Map?Ci:Object.entries(Ci);for(const[Na,ta]of Re){let na=ta;c(ta)&&(na=$r(ta)),kn.push(he+Na+"="+encodeURIComponent(na))}}catch(Na){throw kn.push(he+"type="+encodeURIComponent("_badmap")),Na}}catch{q&&q(Ci)}}if(Vt){Re=kn.join("&");break e}}Re=void 0}return v=v.i.splice(0,P),D.G=v,Re}function lg(v){if(!v.g&&!v.v){v.Y=1;var D=v.Da;z||A(),V||(z(),V=!0),I.add(D,v),v.A=0}}function Al(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Jt(d(v.Da,v),dg(v,v.A)),v.A++,!0)}n.Da=function(){if(this.v=null,cg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Jt(d(this.Wa,this),v)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ze(10),so(this),cg(this))};function uf(v){v.B!=null&&(o.clearTimeout(v.B),v.B=null)}function cg(v){v.g=new Dn(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var D=Bn(v.na);Bt(D,"RID","rpc"),Bt(D,"SID",v.M),Bt(D,"AID",v.K),Bt(D,"CI",v.F?"0":"1"),!v.F&&v.ia&&Bt(D,"TO",v.ia),Bt(D,"TYPE","xmlhttp"),Tl(v,D),v.u&&v.o&&wl(D,v.u,v.o),v.O&&(v.g.H=v.O);var P=v.g;v=v.ba,P.M=1,P.A=bl(Bn(D)),P.u=null,P.R=!0,Uc(P,v)}n.Va=function(){this.C!=null&&(this.C=null,so(this),Al(this),Ze(19))};function Wc(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function ug(v,D){var P=null;if(v.g==D){Wc(v),uf(v),v.g=null;var q=2}else if(Ta(v.h,D))P=D.G,Zd(v.h,D),q=1;else return;if(v.I!=0){if(D.o)if(q==1){P=D.u?D.u.length:0,D=Date.now()-D.F;var le=v.D;q=ke(),Ke(q,new An(q,P)),Da(v)}else lg(v);else if(le=D.m,le==3||le==0&&D.X>0||!(q==1&&Xc(v,D)||q==2&&Al(v)))switch(P&&P.length>0&&(D=v.h,D.i=D.i.concat(P)),le){case 1:ka(v,5);break;case 4:ka(v,10);break;case 3:ka(v,6);break;default:ka(v,2)}}}function dg(v,D){let P=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(P*=2),P*D}function ka(v,D){if(v.j.info("Error code "+D),D==2){var P=d(v.bb,v),q=v.Ua;const le=!q;q=new ci(q||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||dr(q,"https"),bl(q),le?Zi(q.toString(),P):af(q.toString(),P)}else Ze(2);v.I=0,v.l&&v.l.pa(D),fg(v),Kc(v)}n.bb=function(v){v?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function fg(v){if(v.I=0,v.ja=[],v.l){const D=Jd(v.h);(D.length!=0||v.i.length!=0)&&(_(v.ja,D),_(v.ja,v.i),v.h.i.length=0,x(v.i),v.i.length=0),v.l.oa()}}function hg(v,D,P){var q=P instanceof ci?Bn(P):new ci(P);if(q.g!="")D&&(q.g=D+"."+q.g),Js(q,q.u);else{var le=o.location;q=le.protocol,D=D?D+"."+le.hostname:le.hostname,le=+le.port;const he=new ci(null);q&&dr(he,q),D&&(he.g=D),le&&Js(he,le),P&&(he.h=P),q=he}return P=v.G,D=v.wa,P&&D&&Bt(q,P,D),Bt(q,"VER",v.ka),Tl(v,q),q}function pg(v,D,P){if(D&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return D=v.Aa&&!v.ma?new Ht(new Ca({ab:P})):new Ht(v.ma),D.Fa(v.L),D}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function gg(){}n=gg.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function oo(){}oo.prototype.g=function(v,D){return new jr(v,D)};function jr(v,D){Ve.call(this),this.g=new ao(D),this.l=v,this.h=D&&D.messageUrlParams||null,v=D&&D.messageHeaders||null,D&&D.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=D&&D.initMessageHeaders||null,D&&D.messageContentType&&(v?v["X-WebChannel-Content-Type"]=D.messageContentType:v={"X-WebChannel-Content-Type":D.messageContentType}),D&&D.sa&&(v?v["X-WebChannel-Client-Profile"]=D.sa:v={"X-WebChannel-Client-Profile":D.sa}),this.g.U=v,(v=D&&D.Qb)&&!M(v)&&(this.g.u=v),this.A=D&&D.supportsCrossDomainXhr||!1,this.v=D&&D.sendRawJson||!1,(D=D&&D.httpSessionIdParam)&&!M(D)&&(this.g.G=D,v=this.h,v!==null&&D in v&&(v=this.h,D in v&&delete v[D])),this.j=new cs(this)}p(jr,Ve),jr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jr.prototype.close=function(){lf(this.g)},jr.prototype.o=function(v){var D=this.g;if(typeof v=="string"){var P={};P.__data__=v,v=P}else this.v&&(P={},P.__data__=$r(v),v=P);D.i.push(new Ln(D.Ya++,v)),D.I==3&&Da(D)},jr.prototype.N=function(){this.g.l=null,delete this.j,lf(this.g),delete this.g,jr.Z.N.call(this)};function mg(v){bn.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var D=v.__sm__;if(D){e:{for(const P in D){v=P;break e}v=void 0}(this.i=v)&&(v=this.i,D=D!==null&&v in D?D[v]:void 0),this.data=D}else this.data=v}p(mg,bn);function vg(){cr.call(this),this.status=1}p(vg,cr);function cs(v){this.g=v}p(cs,gg),cs.prototype.ra=function(){Ke(this.g,"a")},cs.prototype.qa=function(v){Ke(this.g,new mg(v))},cs.prototype.pa=function(v){Ke(this.g,new vg)},cs.prototype.oa=function(){Ke(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,jr.prototype.send=jr.prototype.o,jr.prototype.open=jr.prototype.m,jr.prototype.close=jr.prototype.close,fO=function(){return new oo},dO=function(){return ke()},uO=en,b_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xt.NO_ERROR=0,xt.TIMEOUT=8,xt.HTTP_ERROR=6,a0=xt,Rn.COMPLETE="complete",cO=Rn,ba.EventType=Vr,Vr.OPEN="a",Vr.CLOSE="b",Vr.ERROR="c",Vr.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,ch=ba,Ht.prototype.listenOnce=Ht.prototype.K,Ht.prototype.getLastError=Ht.prototype.Ha,Ht.prototype.getLastErrorCode=Ht.prototype.ya,Ht.prototype.getStatus=Ht.prototype.ca,Ht.prototype.getResponseJson=Ht.prototype.La,Ht.prototype.getResponseText=Ht.prototype.la,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Fa,lO=Ht}).apply(typeof Gm<"u"?Gm:typeof self<"u"?self:typeof window<"u"?window:{});const $R="@firebase/firestore",YR="4.9.2";class wr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wr.UNAUTHENTICATED=new wr(null),wr.GOOGLE_CREDENTIALS=new wr("google-credentials-uid"),wr.FIRST_PARTY=new wr("first-party-uid"),wr.MOCK_USER=new wr("mock-user");let qd="12.3.0";const wc=new AE("@firebase/firestore");function Ou(){return wc.logLevel}function Se(n,...e){if(wc.logLevel<=Ct.DEBUG){const t=e.map(RE);wc.debug(`Firestore (${qd}): ${n}`,...t)}}function Ur(n,...e){if(wc.logLevel<=Ct.ERROR){const t=e.map(RE);wc.error(`Firestore (${qd}): ${n}`,...t)}}function Ec(n,...e){if(wc.logLevel<=Ct.WARN){const t=e.map(RE);wc.warn(`Firestore (${qd}): ${n}`,...t)}}function RE(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Le(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,hO(n,r,t)}function hO(n,e,t){let r=`FIRESTORE (${qd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ur(r),new Error(r)}function Fe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||hO(e,i,r)}function ut(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends $s{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $a{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class pO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(wr.UNAUTHENTICATED)))}shutdown(){}}class JY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class eK{constructor(e){this.t=e,this.currentUser=wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fe(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let a=new $a;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new $a,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new $a)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string",31837,{l:r}),new pO(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new wr(e)}}class tK{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=wr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nK{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new tK(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(wr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class KR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rK{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Fe(this.o===void 0,3512);const r=a=>{a.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new KR(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Fe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new KR(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function iK(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class DE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=iK(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function x_(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Z1(i)===Z1(a)?lt(i,a):Z1(i)?1:-1}return lt(n.length,e.length)}const aK=55296,sK=57343;function Z1(n){const e=n.charCodeAt(0);return e>=aK&&e<=sK}function vd(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function gO(n){return n+"\0"}const XR="__name__";class ja{constructor(e,t,r){t===void 0?t=0:t>e.length&&Le(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Le(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ja.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ja?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=ja.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return lt(e.length,t.length)}static compareSegments(e,t){const r=ja.isNumericId(e),i=ja.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ja.extractNumericId(e).compare(ja.extractNumericId(t)):x_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jo.fromString(e.substring(4,e.length-2))}}class zt extends ja{construct(e,t,r){return new zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new zt(t)}static emptyPath(){return new zt([])}}const oK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends ja{construct(e,t,r){return new mn(e,t,r)}static isValidIdentifier(e){return oK.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===XR}static keyField(){return new mn([XR])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ie(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ie(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ie(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Ie(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(t)}static emptyPath(){return new mn([])}}class De{constructor(e){this.path=e}static fromPath(e){return new De(zt.fromString(e))}static fromName(e){return new De(zt.fromString(e).popFirst(5))}static empty(){return new De(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new zt(e.slice()))}}function mO(n,e,t){if(!t)throw new Ie(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lK(n,e,t,r){if(e===!0&&r===!0)throw new Ie(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function WR(n){if(!De.isDocumentKey(n))throw new Ie(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function QR(n){if(De.isDocumentKey(n))throw new Ie(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vO(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Bv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Le(12329,{type:typeof n})}function Nr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bv(n);throw new Ie(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Xn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Pp(n,e){if(!vO(n))throw new Ie(ge.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Ie(ge.INVALID_ARGUMENT,t);return!0}const ZR=-62135596800,JR=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*JR);return new tt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ZR)throw new Ie(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/JR}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pp(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ZR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:Xn("string",tt._jsonSchemaVersion),seconds:Xn("number"),nanoseconds:Xn("number")};class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new tt(0,0))}static max(){return new Ye(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Zh=-1;class q0{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function __(n){return n.fields.find((e=>e.kind===2))}function Kl(n){return n.fields.filter((e=>e.kind!==2))}q0.UNKNOWN_ID=-1;class s0{constructor(e,t){this.fieldPath=e,this.kind=t}}class Jh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Jh(0,wi.min())}}function cK(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ye.fromTimestamp(r===1e9?new tt(t+1,0):new tt(t,r));return new wi(i,De.empty(),e)}function yO(n){return new wi(n.readTime,n.key,Zh)}class wi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new wi(Ye.min(),De.empty(),Zh)}static max(){return new wi(Ye.max(),De.empty(),Zh)}}function kE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=De.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}const bO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function jc(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==bO)throw n;Se("LocalStore","Unexpectedly lost primary lease")}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,r)=>{t(e)}))}static reject(e){return new oe(((t,r)=>{r(e)}))}static waitFor(e){return new oe(((t,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&t()}),(u=>r(u)))})),o=!0,a===i&&t()}))}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next((i=>i?oe.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new oe(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;t(e[d]).next((h=>{o[d]=h,++c,c===a&&r(o)}),(h=>i(h)))}}))}static doWhile(e,t){return new oe(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}const yi="SimpleDb";class Uv{static open(e,t,r,i){try{return new Uv(t,e.transaction(i,r))}catch(a){throw new Ah(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new $a,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ah(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=NE(r.target.error);this.S.reject(new Ah(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Se(yi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new dK(t)}}class el{static delete(e){return Se(yi,"Removing database:",e),ec(H4().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!eO())return!1;if(el.F())return!0;const e=or(),t=el.M(e),r=0<t&&t<10,i=_O(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,el.M(or())===12.2&&Ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Se(yi,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const o=a.target.result;t(o)},i.onblocked=()=>{r(new Ah(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const o=a.target.error;o.name==="VersionError"?r(new Ie(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Ie(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ah(e,o))},i.onupgradeneeded=a=>{Se(yi,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const o=a.target.result;this.N.k(o,i.transaction,a.oldVersion,this.version).next((()=>{Se(yi,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const a=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const c=Uv.open(this.db,e,a?"readonly":"readwrite",r),u=i(c).next((d=>(c.C(),d))).catch((d=>(c.abort(d),oe.reject(d)))).toPromise();return u.catch((()=>{})),await c.D,u}catch(c){const u=c,d=u.name!=="FirebaseError"&&o<3;if(Se(yi,"Transaction failed with error:",u.message,"Retrying:",d),this.close(),!d)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _O(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class uK{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ec(this.U.delete())}}class Ah extends Ie{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function gl(n){return n.name==="IndexedDbTransactionError"}class dK{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Se(yi,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Se(yi,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ec(r)}add(e){return Se(yi,"ADD",this.store.name,e,e),ec(this.store.add(e))}get(e){return ec(this.store.get(e)).next((t=>(t===void 0&&(t=null),Se(yi,"GET",this.store.name,e,t),t)))}delete(e){return Se(yi,"DELETE",this.store.name,e),ec(this.store.delete(e))}count(){return Se(yi,"COUNT",this.store.name),ec(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new oe(((o,c)=>{a.onerror=u=>{c(u.target.error)},a.onsuccess=u=>{o(u.target.result)}}))}{const a=this.cursor(r),o=[];return this.H(a,((c,u)=>{o.push(u)})).next((()=>o))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new oe(((i,a)=>{r.onerror=o=>{a(o.target.error)},r.onsuccess=o=>{i(o.target.result)}}))}Z(e,t){Se(yi,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((a,o,c)=>c.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new oe(((r,i)=>{t.onerror=a=>{const o=NE(a.target.error);i(o)},t.onsuccess=a=>{const o=a.target.result;o?e(o.primaryKey,o.value).next((c=>{c?o.continue():r()})):r()}}))}H(e,t){const r=[];return new oe(((i,a)=>{e.onerror=o=>{a(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void i();const u=new uK(c),d=t(c.primaryKey,c.value,u);if(d instanceof oe){const h=d.catch((p=>(u.done(),oe.reject(p))));r.push(h)}u.isDone?i():u.G===null?c.continue():c.continue(u.G)}})).next((()=>oe.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ec(n){return new oe(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=NE(r.target.error);t(i)}}))}let eD=!1;function NE(n){const e=el.M(or());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eD||(eD=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Ch="IndexBackfiller";class fK{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Se(Ch,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Se(Ch,`Documents written: ${t}`)}catch(t){gl(t)?Se(Ch,"Ignoring IndexedDB error during index backfill: ",t):await jc(t)}await this.re(6e4)}))}}class hK{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,a=!0;return oe.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return Se(Ch,`Processing collection: ${o}`),this.oe(e,o,i).next((c=>{i-=c,r.add(o)}));a=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((a=>{const o=a.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(i,a))).next((c=>(Se(Ch,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c)))).next((()=>o.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,a)=>{const o=yO(a);kE(o,r)>0&&(r=o)})),new wi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Gi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gi.ce=-1;const fc=-1;function Fv(n){return n==null}function ep(n){return n===0&&1/n==-1/0}function pK(n){return typeof n=="number"&&Number.isInteger(n)&&!ep(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const H0="";function Mr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tD(e)),e=gK(n.get(t),e);return tD(e)}function gK(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case H0:t+="";break;default:t+=a}}return t}function tD(n){return n+H0+""}function Ba(n){const e=n.length;if(Fe(e>=2,64408,{path:n}),e===2)return Fe(n.charAt(0)===H0&&n.charAt(1)==="",56145,{path:n}),zt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const o=n.indexOf(H0,a);switch((o<0||o>t)&&Le(50515,{path:n}),n.charAt(o+1)){case"":const c=n.substring(a,o);let u;i.length===0?u=c:(i+=c,u=i,i=""),r.push(u);break;case"":i+=n.substring(a,o),i+="\0";break;case"":i+=n.substring(a,o+1);break;default:Le(61167,{path:n})}a=o+2}return new zt(r)}const Xl="remoteDocuments",Op="owner",Iu="owner",tp="mutationQueues",mK="userId",ca="mutations",nD="batchId",oc="userMutationsIndex",rD=["userId","batchId"];function o0(n,e){return[n,Mr(e)]}function wO(n,e,t){return[n,Mr(e),t]}const vK={},yd="documentMutations",$0="remoteDocumentsV14",yK=["prefixPath","collectionGroup","readTime","documentId"],l0="documentKeyIndex",bK=["prefixPath","collectionGroup","documentId"],EO="collectionGroupIndex",xK=["collectionGroup","readTime","prefixPath","documentId"],np="remoteDocumentGlobal",w_="remoteDocumentGlobalKey",bd="targets",SO="queryTargetsIndex",_K=["canonicalId","targetId"],xd="targetDocuments",wK=["targetId","path"],ME="documentTargetsIndex",EK=["path","targetId"],Y0="targetGlobalKey",hc="targetGlobal",rp="collectionParents",SK=["collectionId","parent"],_d="clientMetadata",TK="clientId",Gv="bundles",AK="bundleId",qv="namedQueries",CK="name",PE="indexConfiguration",IK="indexId",E_="collectionGroupIndex",RK="collectionGroup",Ih="indexState",DK=["indexId","uid"],TO="sequenceNumberIndex",kK=["uid","sequenceNumber"],Rh="indexEntries",NK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],AO="documentKeyIndex",MK=["indexId","uid","orderedDocumentKey"],Hv="documentOverlays",PK=["userId","collectionPath","documentId"],S_="collectionPathOverlayIndex",OK=["userId","collectionPath","largestBatchId"],CO="collectionGroupOverlayIndex",VK=["userId","collectionGroup","largestBatchId"],OE="globals",jK="name",IO=[tp,ca,yd,Xl,bd,Op,hc,xd,_d,np,rp,Gv,qv],zK=[...IO,Hv],RO=[tp,ca,yd,$0,bd,Op,hc,xd,_d,np,rp,Gv,qv,Hv],DO=RO,VE=[...DO,PE,Ih,Rh],LK=VE,kO=[...VE,OE],BK=kO;class T_ extends xO{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function lr(n,e){const t=ut(n);return el.O(t.le,e)}function iD(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ml(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class un{constructor(e,t){this.comparator=e,this.root=t||Er.EMPTY}insert(e,t){return new un(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Er.BLACK,null,null))}remove(e){return new un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Er.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qm(this.root,e,this.comparator,!1)}getReverseIterator(){return new qm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qm(this.root,e,this.comparator,!0)}}class qm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Er{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Er.RED,this.left=i??Er.EMPTY,this.right=a??Er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Er(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Er.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}Er.EMPTY=null,Er.RED=!0,Er.BLACK=!1;Er.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Er(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qt{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new aD(this.data.getIterator())}getIteratorFrom(e){return new aD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new qt(this.comparator);return t.data=e,t}}class aD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ru(n){return n.hasNext()?n.getNext():void 0}class ni{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new ni([])}unionWith(e){let t=new qt(mn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ni(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vd(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class MO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new MO("Invalid base64 string: "+a):a}})(e);return new Qn(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new Qn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qn.EMPTY_BYTE_STRING=new Qn("");const UK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(n){if(Fe(!!n,39018),typeof n=="string"){let e=0;const t=UK.exec(n);if(Fe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ln(n.seconds),nanos:ln(n.nanos)}}function ln(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Gs(n){return typeof n=="string"?Qn.fromBase64String(n):Qn.fromUint8Array(n)}const PO="server_timestamp",OO="__type__",VO="__previous_value__",jO="__local_write_time__";function jE(n){return(n?.mapValue?.fields||{})[OO]?.stringValue===PO}function $v(n){const e=n.mapValue.fields[VO];return jE(e)?$v(e):e}function ip(n){const e=Fs(n.mapValue.fields[jO].timestampValue);return new tt(e.seconds,e.nanos)}class FK{constructor(e,t,r,i,a,o,c,u,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const K0="(default)";class Sc{constructor(e,t){this.projectId=e,this.database=t||K0}static empty(){return new Sc("","")}get isDefaultDatabase(){return this.database===K0}isEqual(e){return e instanceof Sc&&e.projectId===this.projectId&&e.database===this.database}}const zE="__type__",zO="__max__",$o={mapValue:{fields:{__type__:{stringValue:zO}}}},LE="__vector__",wd="value",c0={nullValue:"NULL_VALUE"};function ll(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jE(n)?4:LO(n)?9007199254740991:Yv(n)?10:11:Le(28295,{value:n})}function Za(n,e){if(n===e)return!0;const t=ll(n);if(t!==ll(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ip(n).isEqual(ip(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Fs(i.timestampValue),c=Fs(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return Gs(i.bytesValue).isEqual(Gs(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return ln(i.geoPointValue.latitude)===ln(a.geoPointValue.latitude)&&ln(i.geoPointValue.longitude)===ln(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return ln(i.integerValue)===ln(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=ln(i.doubleValue),c=ln(a.doubleValue);return o===c?ep(o)===ep(c):isNaN(o)&&isNaN(c)}return!1})(n,e);case 9:return vd(n.arrayValue.values||[],e.arrayValue.values||[],Za);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(iD(o)!==iD(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Za(o[u],c[u])))return!1;return!0})(n,e);default:return Le(52216,{left:n})}}function ap(n,e){return(n.values||[]).find((t=>Za(t,e)))!==void 0}function cl(n,e){if(n===e)return 0;const t=ll(n),r=ll(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=ln(a.integerValue||a.doubleValue),u=ln(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return sD(n.timestampValue,e.timestampValue);case 4:return sD(ip(n),ip(e));case 5:return x_(n.stringValue,e.stringValue);case 6:return(function(a,o){const c=Gs(a),u=Gs(o);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=lt(c[d],u[d]);if(h!==0)return h}return lt(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=lt(ln(a.latitude),ln(o.latitude));return c!==0?c:lt(ln(a.longitude),ln(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return oD(n.arrayValue,e.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},d=c[wd]?.arrayValue,h=u[wd]?.arrayValue,p=lt(d?.values?.length||0,h?.values?.length||0);return p!==0?p:oD(d,h)})(n.mapValue,e.mapValue);case 11:return(function(a,o){if(a===$o.mapValue&&o===$o.mapValue)return 0;if(a===$o.mapValue)return 1;if(o===$o.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const m=x_(u[p],h[p]);if(m!==0)return m;const x=cl(c[u[p]],d[h[p]]);if(x!==0)return x}return lt(u.length,h.length)})(n.mapValue,e.mapValue);default:throw Le(23264,{he:t})}}function sD(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=Fs(n),r=Fs(e),i=lt(t.seconds,r.seconds);return i!==0?i:lt(t.nanos,r.nanos)}function oD(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=cl(t[i],r[i]);if(a)return a}return lt(t.length,r.length)}function Ed(n){return A_(n)}function A_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Fs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Gs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return De.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=A_(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${A_(t.fields[o])}`;return i+"}"})(n.mapValue):Le(61005,{value:n})}function u0(n){switch(ll(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$v(n);return e?16+u0(e):16;case 5:return 2*n.stringValue.length;case 6:return Gs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+u0(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ml(r.fields,((a,o)=>{i+=a.length+u0(o)})),i})(n.mapValue);default:throw Le(13486,{value:n})}}function sp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function C_(n){return!!n&&"integerValue"in n}function op(n){return!!n&&"arrayValue"in n}function lD(n){return!!n&&"nullValue"in n}function cD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function d0(n){return!!n&&"mapValue"in n}function Yv(n){return(n?.mapValue?.fields||{})[zE]?.stringValue===LE}function Dh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ml(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Dh(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dh(n.arrayValue.values[t]);return e}return{...n}}function LO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===zO}const BO={mapValue:{fields:{[zE]:{stringValue:LE},[wd]:{arrayValue:{}}}}};function GK(n){return"nullValue"in n?c0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sp(Sc.empty(),De.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Yv(n)?BO:{mapValue:{}}:Le(35942,{value:n})}function qK(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sp(Sc.empty(),De.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?BO:"mapValue"in n?Yv(n)?{mapValue:{}}:$o:Le(61959,{value:n})}function uD(n,e){const t=cl(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function dD(n,e){const t=cl(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Dr{constructor(e){this.value=e}static empty(){return new Dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!d0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dh(t)}setAll(e){let t=mn.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=Dh(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());d0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Za(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];d0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ml(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Dr(Dh(this.value))}}function UO(n){const e=[];return ml(n.fields,((t,r)=>{const i=new mn([t]);if(d0(r)){const a=UO(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new ni(e)}class Sn{constructor(e,t,r,i,a,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Sn(e,0,Ye.min(),Ye.min(),Ye.min(),Dr.empty(),0)}static newFoundDocument(e,t,r,i){return new Sn(e,1,t,Ye.min(),r,i,0)}static newNoDocument(e,t){return new Sn(e,2,t,Ye.min(),Ye.min(),Dr.empty(),0)}static newUnknownDocument(e,t){return new Sn(e,3,t,Ye.min(),Ye.min(),Dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sd{constructor(e,t){this.position=e,this.inclusive=t}}function fD(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=De.comparator(De.fromName(o.referenceValue),t.key):r=cl(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function hD(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Za(n.position[t],e.position[t]))return!1;return!0}class lp{constructor(e,t="asc"){this.field=e,this.dir=t}}function HK(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class FO{}class It extends FO{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new $K(e,t,r):t==="array-contains"?new XK(e,r):t==="in"?new KO(e,r):t==="not-in"?new WK(e,r):t==="array-contains-any"?new QK(e,r):new It(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new YK(e,r):new KK(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(cl(t,this.value)):t!==null&&ll(this.value)===ll(t)&&this.matchesComparison(cl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gt extends FO{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Gt(e,t)}matches(e){return Td(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Td(n){return n.op==="and"}function I_(n){return n.op==="or"}function BE(n){return GO(n)&&Td(n)}function GO(n){for(const e of n.filters)if(e instanceof Gt)return!1;return!0}function R_(n){if(n instanceof It)return n.field.canonicalString()+n.op.toString()+Ed(n.value);if(BE(n))return n.filters.map((e=>R_(e))).join(",");{const e=n.filters.map((t=>R_(t))).join(",");return`${n.op}(${e})`}}function qO(n,e){return n instanceof It?(function(r,i){return i instanceof It&&r.op===i.op&&r.field.isEqual(i.field)&&Za(r.value,i.value)})(n,e):n instanceof Gt?(function(r,i){return i instanceof Gt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&qO(o,i.filters[c])),!0):!1})(n,e):void Le(19439)}function HO(n,e){const t=n.filters.concat(e);return Gt.create(t,n.op)}function $O(n){return n instanceof It?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ed(t.value)}`})(n):n instanceof Gt?(function(t){return t.op.toString()+" {"+t.getFilters().map($O).join(" ,")+"}"})(n):"Filter"}class $K extends It{constructor(e,t,r){super(e,t,r),this.key=De.fromName(r.referenceValue)}matches(e){const t=De.comparator(e.key,this.key);return this.matchesComparison(t)}}class YK extends It{constructor(e,t){super(e,"in",t),this.keys=YO("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class KK extends It{constructor(e,t){super(e,"not-in",t),this.keys=YO("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function YO(n,e){return(e.arrayValue?.values||[]).map((t=>De.fromName(t.referenceValue)))}class XK extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return op(t)&&ap(t.arrayValue,this.value)}}class KO extends It{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ap(this.value.arrayValue,t)}}class WK extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(ap(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ap(this.value.arrayValue,t)}}class QK extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!op(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ap(this.value.arrayValue,r)))}}class ZK{constructor(e,t=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function D_(n,e=null,t=[],r=[],i=null,a=null,o=null){return new ZK(n,e,t,r,i,a,o)}function Tc(n){const e=ut(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>R_(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Fv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ed(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ed(r))).join(",")),e.Te=t}return e.Te}function Vp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HK(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!qO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hD(n.startAt,e.startAt)&&hD(n.endAt,e.endAt)}function X0(n){return De.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function W0(n,e){return n.filters.filter((t=>t instanceof It&&t.field.isEqual(e)))}function pD(n,e,t){let r=c0,i=!0;for(const a of W0(n,e)){let o=c0,c=!0;switch(a.op){case"<":case"<=":o=GK(a.value);break;case"==":case"in":case">=":o=a.value;break;case">":o=a.value,c=!1;break;case"!=":case"not-in":o=c0}uD({value:r,inclusive:i},{value:o,inclusive:c})<0&&(r=o,i=c)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const o=t.position[a];uD({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function gD(n,e,t){let r=$o,i=!0;for(const a of W0(n,e)){let o=$o,c=!0;switch(a.op){case">=":case">":o=qK(a.value),c=!1;break;case"==":case"in":case"<=":o=a.value;break;case"<":o=a.value,c=!1;break;case"!=":case"not-in":o=$o}dD({value:r,inclusive:i},{value:o,inclusive:c})>0&&(r=o,i=c)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const o=t.position[a];dD({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}class Hd{constructor(e,t=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JK(n,e,t,r,i,a,o,c){return new Hd(n,e,t,r,i,a,o,c)}function jp(n){return new Hd(n)}function mD(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function XO(n){return n.collectionGroup!==null}function kh(n){const e=ut(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new qt(mn.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new lp(a,r))})),t.has(mn.keyField().canonicalString())||e.Ie.push(new lp(mn.keyField(),r))}return e.Ie}function $i(n){const e=ut(n);return e.Ee||(e.Ee=eX(e,kh(n))),e.Ee}function eX(n,e){if(n.limitType==="F")return D_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new lp(i.field,a)}));const t=n.endAt?new Sd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Sd(n.startAt.position,n.startAt.inclusive):null;return D_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function k_(n,e){const t=n.filters.concat([e]);return new Hd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Q0(n,e,t){return new Hd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kv(n,e){return Vp($i(n),$i(e))&&n.limitType===e.limitType}function WO(n){return`${Tc($i(n))}|lt:${n.limitType}`}function Vu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>$O(i))).join(", ")}]`),Fv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Ed(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Ed(i))).join(",")),`Target(${r})`})($i(n))}; limitType=${n.limitType})`}function zp(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):De.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of kh(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const d=fD(o,c,u);return o.inclusive?d<=0:d<0})(r.startAt,kh(r),i)||r.endAt&&!(function(o,c,u){const d=fD(o,c,u);return o.inclusive?d>=0:d>0})(r.endAt,kh(r),i))})(n,e)}function tX(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QO(n){return(e,t)=>{let r=!1;for(const i of kh(n)){const a=nX(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function nX(n,e,t){const r=n.field.isKeyField()?De.comparator(e.key,t.key):(function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?cl(u,d):Le(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Le(19790,{direction:n.dir})}}class Ys{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ml(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return NO(this.inner)}size(){return this.innerSize}}const rX=new un(De.comparator);function bi(){return rX}const ZO=new un(De.comparator);function uh(...n){let e=ZO;for(const t of n)e=e.insert(t.key,t);return e}function JO(n){let e=ZO;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ua(){return Nh()}function e3(){return Nh()}function Nh(){return new Ys((n=>n.toString()),((n,e)=>n.isEqual(e)))}const iX=new un(De.comparator),aX=new qt(De.comparator);function _t(...n){let e=aX;for(const t of n)e=e.add(t);return e}const sX=new qt(lt);function oX(){return sX}function UE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ep(e)?"-0":e}}function t3(n){return{integerValue:""+n}}function lX(n,e){return pK(e)?t3(e):UE(n,e)}class Xv{constructor(){this._=void 0}}function cX(n,e,t){return n instanceof cp?(function(i,a){const o={fields:{[OO]:{stringValue:PO},[jO]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&jE(a)&&(a=$v(a)),a&&(o.fields[VO]=a),{mapValue:o}})(t,e):n instanceof Ac?r3(n,e):n instanceof Ad?i3(n,e):(function(i,a){const o=n3(i,a),c=vD(o)+vD(i.Ae);return C_(o)&&C_(i.Ae)?t3(c):UE(i.serializer,c)})(n,e)}function uX(n,e,t){return n instanceof Ac?r3(n,e):n instanceof Ad?i3(n,e):t}function n3(n,e){return n instanceof up?(function(r){return C_(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class cp extends Xv{}class Ac extends Xv{constructor(e){super(),this.elements=e}}function r3(n,e){const t=a3(e);for(const r of n.elements)t.some((i=>Za(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Ad extends Xv{constructor(e){super(),this.elements=e}}function i3(n,e){let t=a3(e);for(const r of n.elements)t=t.filter((i=>!Za(i,r)));return{arrayValue:{values:t}}}class up extends Xv{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function vD(n){return ln(n.integerValue||n.doubleValue)}function a3(n){return op(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class s3{constructor(e,t){this.field=e,this.transform=t}}function dX(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ac&&i instanceof Ac||r instanceof Ad&&i instanceof Ad?vd(r.elements,i.elements,Za):r instanceof up&&i instanceof up?Za(r.Ae,i.Ae):r instanceof cp&&i instanceof cp})(n.transform,e.transform)}class fX{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function f0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Wv{}function o3(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Lp(n.key,sr.none()):new $d(n.key,n.data,sr.none());{const t=n.data,r=Dr.empty();let i=new qt(mn.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Ks(n.key,r,new ni(i.toArray()),sr.none())}}function hX(n,e,t){n instanceof $d?(function(i,a,o){const c=i.value.clone(),u=bD(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Ks?(function(i,a,o){if(!f0(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=bD(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(l3(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(n,e,t):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Mh(n,e,t,r){return n instanceof $d?(function(a,o,c,u){if(!f0(a.precondition,o))return c;const d=a.value.clone(),h=xD(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ks?(function(a,o,c,u){if(!f0(a.precondition,o))return c;const d=xD(a.fieldTransforms,u,o),h=o.data;return h.setAll(l3(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((p=>p.field)))})(n,e,t,r):(function(a,o,c){return f0(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(n,e,t)}function pX(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=n3(r.transform,i||null);a!=null&&(t===null&&(t=Dr.empty()),t.set(r.field,a))}return t||null}function yD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vd(r,i,((a,o)=>dX(a,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class $d extends Wv{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ks extends Wv{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function l3(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function bD(n,e,t){const r=new Map;Fe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,uX(o,c,t[i]))}return r}function xD(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,cX(a,o,e))}return r}class Lp extends Wv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c3 extends Wv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class FE{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&hX(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Mh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Mh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=e3();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=t.has(i.key)?null:c;const u=o3(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Ye.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),_t())}isEqual(e){return this.batchId===e.batchId&&vd(this.mutations,e.mutations,((t,r)=>yD(t,r)))&&vd(this.baseMutations,e.baseMutations,((t,r)=>yD(t,r)))}}class GE{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return iX})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new GE(e,t,r,i)}}class qE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class gX{constructor(e,t){this.count=e,this.unchangedNames=t}}var $n,kt;function mX(n){switch(n){case ge.OK:return Le(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return Le(15467,{code:n})}}function u3(n){if(n===void 0)return Ur("GRPC error has no .code"),ge.UNKNOWN;switch(n){case $n.OK:return ge.OK;case $n.CANCELLED:return ge.CANCELLED;case $n.UNKNOWN:return ge.UNKNOWN;case $n.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case $n.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case $n.INTERNAL:return ge.INTERNAL;case $n.UNAVAILABLE:return ge.UNAVAILABLE;case $n.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case $n.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case $n.NOT_FOUND:return ge.NOT_FOUND;case $n.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case $n.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case $n.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case $n.ABORTED:return ge.ABORTED;case $n.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case $n.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case $n.DATA_LOSS:return ge.DATA_LOSS;default:return Le(39323,{code:n})}}(kt=$n||($n={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";function vX(){return new TextEncoder}const yX=new Jo([4294967295,4294967295],0);function _D(n){const e=vX().encode(n),t=new oO;return t.update(e),new Uint8Array(t.digest())}function wD(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Jo([t,r],0),new Jo([i,a],0)]}class HE{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new dh(`Invalid padding: ${t}`);if(r<0)throw new dh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new dh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new dh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Jo.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Jo.fromNumber(r)));return i.compare(yX)===1&&(i=new Jo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=_D(e),[r,i]=wD(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new HE(a,i,t);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const t=_D(e),[r,i]=wD(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class dh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qv{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Bp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qv(Ye.min(),i,new un(lt),bi(),_t())}}class Bp{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Bp(r,t,_t(),_t(),_t())}}class h0{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class d3{constructor(e,t){this.targetId=e,this.Ce=t}}class f3{constructor(e,t,r=Qn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class ED{constructor(){this.ve=0,this.Fe=SD(),this.Me=Qn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_t(),t=_t(),r=_t();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Le(38017,{changeType:a})}})),new Bp(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=SD()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bX{constructor(e){this.Ge=e,this.ze=new Map,this.je=bi(),this.Je=Hm(),this.He=Hm(),this.Ye=new un(lt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(X0(a))if(r===0){const o=new De(a.path);this.et(t,o,Sn.newNoDocument(o,Ye.min()))}else Fe(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(t);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,c;try{o=Gs(r).toUint8Array()}catch(u){if(u instanceof MO)return Ec("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new HE(o,i,a)}catch(u){return Ec(u instanceof dh?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&X0(c.target)){const u=new De(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Sn.newNoDocument(u,e))}a.Be&&(t.set(o,a.ke()),a.qe())}}));let r=_t();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new Qv(e,t,this.Ye,this.je,r);return this.je=bi(),this.Je=Hm(),this.He=Hm(),this.Ye=new un(lt),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ED,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new qt(lt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new qt(lt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ED),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Hm(){return new un(De.comparator)}function SD(){return new un(De.comparator)}const xX={asc:"ASCENDING",desc:"DESCENDING"},_X={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wX={and:"AND",or:"OR"};class EX{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function N_(n,e){return n.useProto3Json||Fv(e)?e:{value:e}}function Cd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function h3(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function SX(n,e){return Cd(n,e.toTimestamp())}function qr(n){return Fe(!!n,49232),Ye.fromTimestamp((function(t){const r=Fs(t);return new tt(r.seconds,r.nanos)})(n))}function $E(n,e){return M_(n,e).canonicalString()}function M_(n,e){const t=(function(i){return new zt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function p3(n){const e=zt.fromString(n);return Fe(E3(e),10190,{key:e.toString()}),e}function Z0(n,e){return $E(n.databaseId,e.path)}function pc(n,e){const t=p3(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new De(v3(t))}function g3(n,e){return $E(n.databaseId,e)}function m3(n){const e=p3(n);return e.length===4?zt.emptyPath():v3(e)}function P_(n){return new zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function v3(n){return Fe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function TD(n,e,t){return{name:Z0(n,e),fields:t.value.mapValue.fields}}function TX(n,e,t){const r=pc(n,e.name),i=qr(e.updateTime),a=e.createTime?qr(e.createTime):Ye.min(),o=new Dr({mapValue:{fields:e.fields}}),c=Sn.newFoundDocument(r,i,a,o);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function AX(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Le(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(d,h){return d.useProto3Json?(Fe(h===void 0||typeof h=="string",58123),Qn.fromBase64String(h||"")):(Fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Qn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const h=d.code===void 0?ge.UNKNOWN:u3(d.code);return new Ie(h,d.message||"")})(o);t=new f3(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=pc(n,r.document.name),a=qr(r.document.updateTime),o=r.document.createTime?qr(r.document.createTime):Ye.min(),c=new Dr({mapValue:{fields:r.document.fields}}),u=Sn.newFoundDocument(i,a,o,c),d=r.targetIds||[],h=r.removedTargetIds||[];t=new h0(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=pc(n,r.document),a=r.readTime?qr(r.readTime):Ye.min(),o=Sn.newNoDocument(i,a),c=r.removedTargetIds||[];t=new h0([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=pc(n,r.document),a=r.removedTargetIds||[];t=new h0([],a,i,null)}else{if(!("filter"in e))return Le(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new gX(i,a),c=r.targetId;t=new d3(c,o)}}return t}function J0(n,e){let t;if(e instanceof $d)t={update:TD(n,e.key,e.value)};else if(e instanceof Lp)t={delete:Z0(n,e.key)};else if(e instanceof Ks)t={update:TD(n,e.key,e.data),updateMask:NX(e.fieldMask)};else{if(!(e instanceof c3))return Le(16599,{Vt:e.type});t={verify:Z0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof cp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ac)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ad)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof up)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Le(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:SX(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Le(27497)})(n,e.precondition)),t}function O_(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?sr.updateTime(qr(a.updateTime)):a.exists!==void 0?sr.exists(a.exists):sr.none()})(e.currentDocument):sr.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(o,c){let u=null;if("setToServerValue"in c)Fe(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),u=new cp;else if("appendMissingElements"in c){const h=c.appendMissingElements.values||[];u=new Ac(h)}else if("removeAllFromArray"in c){const h=c.removeAllFromArray.values||[];u=new Ad(h)}else"increment"in c?u=new up(o,c.increment):Le(16584,{proto:c});const d=mn.fromServerFormat(c.fieldPath);return new s3(d,u)})(n,i))):[];if(e.update){e.update.name;const i=pc(n,e.update.name),a=new Dr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(u){const d=u.fieldPaths||[];return new ni(d.map((h=>mn.fromServerFormat(h))))})(e.updateMask);return new Ks(i,a,o,t,r)}return new $d(i,a,t,r)}if(e.delete){const i=pc(n,e.delete);return new Lp(i,t)}if(e.verify){const i=pc(n,e.verify);return new c3(i,t)}return Le(1463,{proto:e})}function CX(n,e){return n&&n.length>0?(Fe(e!==void 0,14353),n.map((t=>(function(i,a){let o=i.updateTime?qr(i.updateTime):qr(a);return o.isEqual(Ye.min())&&(o=qr(a)),new fX(o,i.transformResults||[])})(t,e)))):[]}function y3(n,e){return{documents:[g3(n,e.path)]}}function b3(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=g3(n,i);const a=(function(d){if(d.length!==0)return w3(Gt.create(d,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const o=(function(d){if(d.length!==0)return d.map((h=>(function(m){return{field:ju(m.field),direction:RX(m.dir)}})(h)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=N_(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function x3(n){let e=m3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Fe(r===1,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];t.where&&(a=(function(p){const m=_3(p);return m instanceof Gt&&BE(m)?m.getFilters():[m]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map((m=>(function(_){return new lp(zu(_.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(m)))})(t.orderBy));let c=null;t.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,Fv(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){const m=!!p.before,x=p.values||[];return new Sd(x,m)})(t.startAt));let d=null;return t.endAt&&(d=(function(p){const m=!p.before,x=p.values||[];return new Sd(x,m)})(t.endAt)),JK(e,i,o,a,c,"F",u,d)}function IX(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _3(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=zu(t.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zu(t.unaryFilter.field);return It.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=zu(t.unaryFilter.field);return It.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zu(t.unaryFilter.field);return It.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(n):n.fieldFilter!==void 0?(function(t){return It.create(zu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Gt.create(t.compositeFilter.filters.map((r=>_3(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(t.compositeFilter.op))})(n):Le(30097,{filter:n})}function RX(n){return xX[n]}function DX(n){return _X[n]}function kX(n){return wX[n]}function ju(n){return{fieldPath:n.canonicalString()}}function zu(n){return mn.fromServerFormat(n.fieldPath)}function w3(n){return n instanceof It?(function(t){if(t.op==="=="){if(cD(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NAN"}};if(lD(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cD(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NOT_NAN"}};if(lD(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ju(t.field),op:DX(t.op),value:t.value}}})(n):n instanceof Gt?(function(t){const r=t.getFilters().map((i=>w3(i)));return r.length===1?r[0]:{compositeFilter:{op:kX(t.op),filters:r}}})(n):Le(54877,{filter:n})}function NX(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function E3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class As{constructor(e,t,r,i,a=Ye.min(),o=Ye.min(),c=Qn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class S3{constructor(e){this.yt=e}}function MX(n,e){let t;if(e.document)t=TX(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=De.fromSegments(e.noDocument.path),i=Ic(e.noDocument.readTime);t=Sn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Le(56709);{const r=De.fromSegments(e.unknownDocument.path),i=Ic(e.unknownDocument.version);t=Sn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const a=new tt(i[0],i[1]);return Ye.fromTimestamp(a)})(e.readTime)),t}function AD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ev(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,o){return{name:Z0(a,o.key),fields:o.data.value.mapValue.fields,updateTime:Cd(a,o.version.toTimestamp()),createTime:Cd(a,o.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Cc(e.version)};else{if(!e.isUnknownDocument())return Le(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Cc(e.version)}}return r}function ev(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Cc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ic(n){const e=new tt(n.seconds,n.nanoseconds);return Ye.fromTimestamp(e)}function tc(n,e){const t=(e.baseMutations||[]).map((a=>O_(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const o=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>O_(n.yt,a))),i=tt.fromMillis(e.localWriteTimeMs);return new FE(e.batchId,i,t,r)}function fh(n){const e=Ic(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ic(n.lastLimboFreeSnapshotVersion):Ye.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){const o=a.documents.length;return Fe(o===1,1966,{count:o}),$i(jp(m3(a.documents[0])))})(n.query):(function(a){return $i(x3(a))})(n.query),new As(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Qn.fromBase64String(n.resumeToken))}function T3(n,e){const t=Cc(e.snapshotVersion),r=Cc(e.lastLimboFreeSnapshotVersion);let i;i=X0(e.target)?y3(n.yt,e.target):b3(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Tc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function A3(n){const e=x3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Q0(e,e.limit,"L"):e}function J1(n,e){return new qE(e.largestBatchId,O_(n.yt,e.overlayMutation))}function CD(n,e){const t=e.path.lastSegment();return[n,Mr(e.path.popLast()),t]}function ID(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Cc(r.readTime),documentKey:Mr(r.documentKey.path),largestBatchId:r.largestBatchId}}class PX{getBundleMetadata(e,t){return RD(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Ic(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return RD(e).put((function(i){return{bundleId:i.id,createTime:Cc(qr(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return DD(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:A3(a.bundledQuery),readTime:Ic(a.readTime)}})(r)}))}saveNamedQuery(e,t){return DD(e).put((function(i){return{name:i.name,readTime:Cc(qr(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function RD(n){return lr(n,Gv)}function DD(n){return lr(n,qv)}class Zv{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Zv(e,r)}getOverlay(e,t){return Qf(e).get(CD(this.userId,t)).next((r=>r?J1(this.serializer,r):null))}getOverlays(e,t){const r=Ua();return oe.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((a,o)=>{const c=new qE(t,o);i.push(this.St(e,c))})),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((o=>i.add(Mr(o.getCollectionPath()))));const a=[];return i.forEach((o=>{const c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);a.push(Qf(e).Z(S_,c))})),oe.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Ua(),a=Mr(t),o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Qf(e).J(S_,o).next((c=>{for(const u of c){const d=J1(this.serializer,u);i.set(d.getKey(),d)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const a=Ua();let o;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qf(e).ee({index:CO,range:c},((u,d,h)=>{const p=J1(this.serializer,d);a.size()<i||p.largestBatchId===o?(a.set(p.getKey(),p),o=p.largestBatchId):h.done()})).next((()=>a))}St(e,t){return Qf(e).put((function(i,a,o){const[c,u,d]=CD(a,o.mutation.key);return{userId:a,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:J0(i.yt,o.mutation)}})(this.serializer,this.userId,t))}}function Qf(n){return lr(n,Hv)}class OX{bt(e){return lr(e,OE)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Qn.fromUint8Array(r):Qn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class nc{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ln(e.integerValue));else if("doubleValue"in e){const r=ln(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),ep(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Fs(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Gs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?LO(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Yv(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Le(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=wd,a=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ln(a)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),De.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}nc.Kt=new nc;const Du=255;function VX(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function kD(n){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const o=VX(255&r[a]);if(i+=o,o!==8)break}return i})(n);return Math.ceil(e/8)}class jX{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=kD(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=kD(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Du),this.sn(255)}_n(){this.an(Du),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,a,!1),new Uint8Array(o.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Du?(this.sn(Du),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Du?(this.an(Du),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class zX{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class LX{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Zf{constructor(){this.cn=new jX,this.ln=new zX(this.cn),this.hn=new LX(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class rc{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new rc(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:p0(this.En),directionalValue:p0(this.dn),orderedDocumentKey:p0(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function No(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=ND(n.En,e.En),t!==0?t:(t=ND(n.dn,e.dn),t!==0?t:De.comparator(n.In,e.In)))}function ND(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function p0(n){return J4()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function MD(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class PD{constructor(e){this.mn=new qt(((t,r)=>mn.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Fe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=__(e);if(t!==void 0&&!this.wn(t))return!1;const r=Kl(e);let i=new Set,a=0,o=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const u=r[a];if(!this.Sn(c,u)||!this.bn(this.fn[o++],u))return!1}++a}for(;a<r.length;++a){const c=r[a];if(o>=this.fn.length||!this.bn(this.fn[o++],c))return!1}return!0}Dn(){if(this.pn)return null;let e=new qt(mn.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new s0(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new s0(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new s0(r.field,r.dir==="asc"?0:1)));return new q0(q0.UNKNOWN_ID,this.collectionId,t,Jh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function C3(n){if(Fe(n instanceof It||n instanceof Gt,20012),n instanceof It){if(n instanceof KO){const t=n.value.arrayValue?.values?.map((r=>It.create(n.field,"==",r)))||[];return Gt.create(t,"or")}return n}const e=n.filters.map((t=>C3(t)));return Gt.create(e,n.op)}function BX(n){if(n.getFilters().length===0)return[];const e=z_(C3(n));return Fe(I3(e),7391),V_(e)||j_(e)?[e]:e.getFilters()}function V_(n){return n instanceof It}function j_(n){return n instanceof Gt&&BE(n)}function I3(n){return V_(n)||j_(n)||(function(t){if(t instanceof Gt&&I_(t)){for(const r of t.getFilters())if(!V_(r)&&!j_(r))return!1;return!0}return!1})(n)}function z_(n){if(Fe(n instanceof It||n instanceof Gt,34018),n instanceof It)return n;if(n.filters.length===1)return z_(n.filters[0]);const e=n.filters.map((r=>z_(r)));let t=Gt.create(e,n.op);return t=tv(t),I3(t)?t:(Fe(t instanceof Gt,64498),Fe(Td(t),40251),Fe(t.filters.length>1,57927),t.filters.reduce(((r,i)=>YE(r,i))))}function YE(n,e){let t;return Fe(n instanceof It||n instanceof Gt,38388),Fe(e instanceof It||e instanceof Gt,25473),t=n instanceof It?e instanceof It?(function(i,a){return Gt.create([i,a],"and")})(n,e):OD(n,e):e instanceof It?OD(e,n):(function(i,a){if(Fe(i.filters.length>0&&a.filters.length>0,48005),Td(i)&&Td(a))return HO(i,a.getFilters());const o=I_(i)?i:a,c=I_(i)?a:i,u=o.filters.map((d=>YE(d,c)));return Gt.create(u,"or")})(n,e),tv(t)}function OD(n,e){if(Td(e))return HO(e,n.getFilters());{const t=e.filters.map((r=>YE(n,r)));return Gt.create(t,"or")}}function tv(n){if(Fe(n instanceof It||n instanceof Gt,11850),n instanceof It)return n;const e=n.getFilters();if(e.length===1)return tv(e[0]);if(GO(n))return n;const t=e.map((i=>tv(i))),r=[];return t.forEach((i=>{i instanceof It?r.push(i):i instanceof Gt&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Gt.create(r,n.op)}class UX{constructor(){this.Cn=new KE}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(wi.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(wi.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class KE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new qt(zt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qt(zt.comparator)).toArray()}}const VD="IndexedDbIndexManager",$m=new Uint8Array(0);class FX{constructor(e,t){this.databaseId=t,this.vn=new KE,this.Fn=new Ys((r=>Tc(r)),((r,i)=>Vp(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:r,parent:Mr(i)};return jD(e).put(a)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[gO(t),""],!1,!0);return jD(e).J(i).next((a=>{for(const o of a){if(o.collectionId!==t)break;r.push(Ba(o.parent))}return r}))}addFieldIndex(e,t){const r=Jf(e),i=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((u=>[u.fieldPath.canonicalString(),u.kind]))}})(t);delete i.indexId;const a=r.add(i);if(t.indexState){const o=Nu(e);return a.next((c=>{o.put(ID(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=Jf(e),i=Nu(e),a=ku(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Jf(e),r=ku(e),i=Nu(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return oe.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new PD(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=ku(e);let i=!0;const a=new Map;return oe.forEach(this.Mn(t),(o=>this.xn(e,o).next((c=>{i&&(i=!!c),a.set(o,c)})))).next((()=>{if(i){let o=_t();const c=[];return oe.forEach(a,((u,d)=>{Se(VD,`Using index ${(function(R){return`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map((j=>`${j.fieldPath}:${j.kind}`)).join(",")}`})(u)} to execute ${Tc(t)}`);const h=(function(R,j){const z=__(j);if(z===void 0)return null;for(const V of W0(R,z.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null})(d,u),p=(function(R,j){const z=new Map;for(const V of Kl(j))for(const I of W0(R,V.fieldPath))switch(I.op){case"==":case"in":z.set(V.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return z.set(V.fieldPath.canonicalString(),I.value),Array.from(z.values())}return null})(d,u),m=(function(R,j){const z=[];let V=!0;for(const I of Kl(j)){const A=I.kind===0?pD(R,I.fieldPath,R.startAt):gD(R,I.fieldPath,R.startAt);z.push(A.value),V&&(V=A.inclusive)}return new Sd(z,V)})(d,u),x=(function(R,j){const z=[];let V=!0;for(const I of Kl(j)){const A=I.kind===0?gD(R,I.fieldPath,R.endAt):pD(R,I.fieldPath,R.endAt);z.push(A.value),V&&(V=A.inclusive)}return new Sd(z,V)})(d,u),_=this.On(u,d,m),E=this.On(u,d,x),S=this.Nn(u,d,p),T=this.Bn(u.indexId,h,_,m.inclusive,E,x.inclusive,S);return oe.forEach(T,(C=>r.Y(C,t.limit).next((R=>{R.forEach((j=>{const z=De.fromSegments(j.documentKey);o.has(z)||(o=o.add(z),c.push(z))}))}))))})).next((()=>c))}return oe.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=BX(Gt.create(e.filters,"and")).map((r=>D_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,a,o,c){const u=(t!=null?t.length:1)*Math.max(r.length,a.length),d=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){const m=t?this.Ln(t[p/d]):$m,x=this.kn(e,m,r[p%d],i),_=this.qn(e,m,a[p%d],o),E=c.map((S=>this.kn(e,m,S,!0)));h.push(...this.createRange(x,_,E))}return h}kn(e,t,r,i){const a=new rc(e,De.empty(),t,r);return i?a:a.An()}qn(e,t,r,i){const a=new rc(e,De.empty(),t,r);return i?a.An():a}xn(e,t){const r=new PD(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let o=null;for(const c of a)r.yn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return oe.forEach(i,(a=>this.xn(e,a).next((o=>{o?r!==0&&o.fields.length<(function(u){let d=new qt(mn.comparator),h=!1;for(const p of u.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:d=d.add(m.field));for(const p of u.orderBy)p.field.isKeyField()||(d=d.add(p.field));return d.size+(h?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Zf;for(const i of Kl(e)){const a=t.data.field(i.fieldPath);if(a==null)return null;const o=r.Pn(i.kind);nc.Kt.Dt(a,o)}return r.un()}Ln(e){const t=new Zf;return nc.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Zf;return nc.Kt.Dt(sp(this.databaseId,t),r.Pn((function(a){const o=Kl(a);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Zf);let a=0;for(const o of Kl(e)){const c=r[a++];for(const u of i)if(this.Un(t,o.fieldPath)&&op(c))i=this.Kn(i,o,c);else{const d=u.Pn(o.kind);nc.Kt.Dt(c,d)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],a=[];for(const o of r.arrayValue.values||[])for(const c of i){const u=new Zf;u.seed(c.un()),nc.Kt.Dt(o,u.Pn(t.kind)),a.push(u)}return a}Un(e,t){return!!e.filters.find((r=>r instanceof It&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Jf(e),i=Nu(e);return(t?r.J(E_,IDBKeyRange.bound(t,t)):r.J()).next((a=>{const o=[];return oe.forEach(a,(c=>i.get([c.indexId,this.uid]).next((u=>{o.push((function(h,p){const m=p?new Jh(p.sequenceNumber,new wi(Ic(p.readTime),new De(Ba(p.documentKey)),p.largestBatchId)):Jh.empty(),x=h.fields.map((([_,E])=>new s0(mn.fromServerFormat(_),E)));return new q0(h.indexId,h.collectionGroup,x,m)})(c,u))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:lt(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Jf(e),a=Nu(e);return this.Gn(e).next((o=>i.J(E_,IDBKeyRange.bound(t,t)).next((c=>oe.forEach(c,(u=>a.put(ID(u.indexId,this.uid,o,r))))))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,((i,a)=>{const o=r.get(i.collectionGroup);return(o?oe.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next((c=>(r.set(i.collectionGroup,c),oe.forEach(c,(u=>this.zn(e,i,u).next((d=>{const h=this.jn(a,u);return d.isEqual(h)?oe.resolve():this.Jn(e,a,u,d,h)})))))))}))}Hn(e,t,r,i){return ku(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return ku(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=ku(e);let a=new qt(No);return i.ee({index:AO,range:IDBKeyRange.only([r.indexId,this.uid,p0(this.$n(r,t))])},((o,c)=>{a=a.add(new rc(r.indexId,t,MD(c.arrayValue),MD(c.directionalValue)))})).next((()=>a))}jn(e,t){let r=new qt(No);const i=this.Qn(t,e);if(i==null)return r;const a=__(t);if(a!=null){const o=e.data.field(a.fieldPath);if(op(o))for(const c of o.arrayValue.values||[])r=r.add(new rc(t.indexId,e.key,this.Ln(c),i))}else r=r.add(new rc(t.indexId,e.key,$m,i));return r}Jn(e,t,r,i,a){Se(VD,"Updating index entries for document '%s'",t.key);const o=[];return(function(u,d,h,p,m){const x=u.getIterator(),_=d.getIterator();let E=Ru(x),S=Ru(_);for(;E||S;){let T=!1,C=!1;if(E&&S){const R=h(E,S);R<0?C=!0:R>0&&(T=!0)}else E!=null?C=!0:T=!0;T?(p(S),S=Ru(_)):C?(m(E),E=Ru(x)):(E=Ru(x),S=Ru(_))}})(i,a,No,(c=>{o.push(this.Hn(e,t,r,c))}),(c=>{o.push(this.Yn(e,t,r,c))})),oe.waitFor(o)}Gn(e){let t=1;return Nu(e).ee({index:TO,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((o,c)=>No(o,c))).filter(((o,c,u)=>!c||No(o,u[c-1])!==0));const i=[];i.push(e);for(const o of r){const c=No(o,e),u=No(o,t);if(c===0)i[0]=e.An();else if(c>0&&u<0)i.push(o),i.push(o.An());else if(u>0)break}i.push(t);const a=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const c=i[o].Vn(this.uid,$m,De.empty()),u=i[o+1].Vn(this.uid,$m,De.empty());a.push(IDBKeyRange.bound(c,u))}return a}Zn(e,t){return No(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zD)}getMinOffset(e,t){return oe.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||Le(44426))))).next(zD)}}function jD(n){return lr(n,rp)}function ku(n){return lr(n,Rh)}function Jf(n){return lr(n,PE)}function Nu(n){return lr(n,Ih)}function zD(n){Fe(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;kE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new wi(e.readTime,e.documentKey,t)}const LD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R3=41943040;class Rr{static withCacheSize(e){return new Rr(e,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function D3(n,e,t){const r=n.store(ca),i=n.store(yd),a=[],o=IDBKeyRange.only(t.batchId);let c=0;const u=r.ee({range:o},((h,p,m)=>(c++,m.delete())));a.push(u.next((()=>{Fe(c===1,47070,{batchId:t.batchId})})));const d=[];for(const h of t.mutations){const p=wO(e,h.key.path,t.batchId);a.push(i.delete(p)),d.push(h.key)}return oe.waitFor(a).next((()=>d))}function nv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Le(14731);e=n.noDocument}return JSON.stringify(e).length}Rr.DEFAULT_COLLECTION_PERCENTILE=10,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rr.DEFAULT=new Rr(R3,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rr.DISABLED=new Rr(-1,0,0);class Jv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){Fe(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new Jv(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mo(e).ee({index:oc,range:r},((i,a,o)=>{t=!1,o.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const a=Lu(e),o=Mo(e);return o.add({}).next((c=>{Fe(typeof c=="number",49019);const u=new FE(c,t,r,i),d=(function(x,_,E){const S=E.baseMutations.map((C=>J0(x.yt,C))),T=E.mutations.map((C=>J0(x.yt,C)));return{userId:_,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:S,mutations:T}})(this.serializer,this.userId,u),h=[];let p=new qt(((m,x)=>lt(m.canonicalString(),x.canonicalString())));for(const m of i){const x=wO(this.userId,m.key.path,c);p=p.add(m.key.path.popLast()),h.push(o.put(d)),h.push(a.put(x,vK))}return p.forEach((m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))})),e.addOnCommittedListener((()=>{this.Xn[c]=u.keys()})),oe.waitFor(h).next((()=>u))}))}lookupMutationBatch(e,t){return Mo(e).get(t).next((r=>r?(Fe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),tc(this.serializer,r)):null))}er(e,t){return this.Xn[t]?oe.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Mo(e).ee({index:oc,range:i},((o,c,u)=>{c.userId===this.userId&&(Fe(c.batchId>=r,47524,{tr:r}),a=tc(this.serializer,c)),u.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=fc;return Mo(e).ee({index:oc,range:t,reverse:!0},((i,a,o)=>{r=a.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,fc],[this.userId,Number.POSITIVE_INFINITY]);return Mo(e).J(oc,t).next((r=>r.map((i=>tc(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=o0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Lu(e).ee({range:i},((o,c,u)=>{const[d,h,p]=o,m=Ba(h);if(d===this.userId&&t.path.isEqual(m))return Mo(e).get(p).next((x=>{if(!x)throw Le(61480,{nr:o,batchId:p});Fe(x.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:x.userId,batchId:p}),a.push(tc(this.serializer,x))}));u.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qt(lt);const i=[];return t.forEach((a=>{const o=o0(this.userId,a.path),c=IDBKeyRange.lowerBound(o),u=Lu(e).ee({range:c},((d,h,p)=>{const[m,x,_]=d,E=Ba(x);m===this.userId&&a.path.isEqual(E)?r=r.add(_):p.done()}));i.push(u)})),oe.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=o0(this.userId,r),o=IDBKeyRange.lowerBound(a);let c=new qt(lt);return Lu(e).ee({range:o},((u,d,h)=>{const[p,m,x]=u,_=Ba(m);p===this.userId&&r.isPrefixOf(_)?_.length===i&&(c=c.add(x)):h.done()})).next((()=>this.rr(e,c)))}rr(e,t){const r=[],i=[];return t.forEach((a=>{i.push(Mo(e).get(a).next((o=>{if(o===null)throw Le(35274,{batchId:a});Fe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:a}),r.push(tc(this.serializer,o))})))})),oe.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return D3(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),oe.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),i=[];return Lu(e).ee({range:r},((a,o,c)=>{if(a[0]===this.userId){const u=Ba(a[1]);i.push(u)}else c.done()})).next((()=>{Fe(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return k3(e,this.userId,t)}_r(e){return N3(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:fc,lastStreamToken:""}))}}function k3(n,e,t){const r=o0(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let o=!1;return Lu(n).ee({range:a,X:!0},((c,u,d)=>{const[h,p,m]=c;h===e&&p===i&&(o=!0),d.done()})).next((()=>o))}function Mo(n){return lr(n,ca)}function Lu(n){return lr(n,yd)}function N3(n){return lr(n,tp)}class Rc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Rc(0)}static cr(){return new Rc(-1)}}class GX{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Rc(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ye.fromTimestamp(new tt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Mu(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Fe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const a=[];return Mu(e).ee(((o,c)=>{const u=fh(c);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,a.push(this.removeTargetData(e,u)))})).next((()=>oe.waitFor(a))).next((()=>i))}forEachTarget(e,t){return Mu(e).ee(((r,i)=>{const a=fh(i);t(a)}))}lr(e){return BD(e).get(Y0).next((t=>(Fe(t!==null,2888),t)))}hr(e,t){return BD(e).put(Y0,t)}Pr(e,t){return Mu(e).put(T3(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Tc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Mu(e).ee({range:i,index:SO},((o,c,u)=>{const d=fh(c);Vp(t,d.target)&&(a=d,u.done())})).next((()=>a))}addMatchingKeys(e,t,r){const i=[],a=Lo(e);return t.forEach((o=>{const c=Mr(o.path);i.push(a.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,o))})),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Lo(e);return oe.forEach(t,(a=>{const o=Mr(a.path);return oe.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=Lo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Lo(e);let a=_t();return i.ee({range:r,X:!0},((o,c,u)=>{const d=Ba(o[1]),h=new De(d);a=a.add(h)})).next((()=>a))}containsKey(e,t){const r=Mr(t.path),i=IDBKeyRange.bound([r],[gO(r)],!1,!0);let a=0;return Lo(e).ee({index:ME,X:!0,range:i},(([o,c],u,d)=>{o!==0&&(a++,d.done())})).next((()=>a>0))}At(e,t){return Mu(e).get(t).next((r=>r?fh(r):null))}}function Mu(n){return lr(n,bd)}function BD(n){return lr(n,hc)}function Lo(n){return lr(n,xd)}const UD="LruGarbageCollector",qX=1048576;function FD([n,e],[t,r]){const i=lt(n,t);return i===0?lt(e,r):i}class HX{constructor(e){this.Ir=e,this.buffer=new qt(FD),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();FD(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class M3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(UD,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){gl(t)?Se(UD,"Ignoring IndexedDB error during garbage collection: ",t):await jc(t)}await this.Vr(3e5)}))}}class $X{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Gi.ce);const r=new HX(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(LD)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LD):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,o,c,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(r=p,c=Date.now(),this.removeTargets(e,r,t)))).next((p=>(a=p,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(d=Date.now(),Ou()<=Ct.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p}))))}}function P3(n,e){return new $X(n,e)}class YX{constructor(e,t){this.db=e,this.garbageCollector=P3(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return Ym(e,r)}removeReference(e,t,r){return Ym(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ym(e,t)}br(e,t){return(function(i,a){let o=!1;return N3(i).te((c=>k3(i,c,a).next((u=>(u&&(o=!0),oe.resolve(!u)))))).next((()=>o))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((o,c)=>{if(c<=t){const u=this.br(e,o).next((d=>{if(!d)return a++,r.getEntry(e,o).next((()=>(r.removeEntry(o,Ye.min()),Lo(e).delete((function(p){return[0,Mr(p.path)]})(o)))))}));i.push(u)}})).next((()=>oe.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ym(e,t)}Sr(e,t){const r=Lo(e);let i,a=Gi.ce;return r.ee({index:ME},(([o,c],{path:u,sequenceNumber:d})=>{o===0?(a!==Gi.ce&&t(new De(Ba(i)),a),a=d,i=u):a=Gi.ce})).next((()=>{a!==Gi.ce&&t(new De(Ba(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ym(n,e){return Lo(n).put((function(r,i){return{targetId:0,path:Mr(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class O3{constructor(){this.changes=new Ys((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class KX{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ql(e).put(r)}removeEntry(e,t,r){return ql(e).delete((function(a,o){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ev(o),c[c.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Sn.newInvalidDocument(t);return ql(e).ee({index:l0,range:IDBKeyRange.only(eh(t))},((i,a)=>{r=this.Cr(t,a)})).next((()=>r))}vr(e,t){let r={size:0,document:Sn.newInvalidDocument(t)};return ql(e).ee({index:l0,range:IDBKeyRange.only(eh(t))},((i,a)=>{r={document:this.Cr(t,a),size:nv(a)}})).next((()=>r))}getEntries(e,t){let r=bi();return this.Fr(e,t,((i,a)=>{const o=this.Cr(i,a);r=r.insert(i,o)})).next((()=>r))}Mr(e,t){let r=bi(),i=new un(De.comparator);return this.Fr(e,t,((a,o)=>{const c=this.Cr(a,o);r=r.insert(a,c),i=i.insert(a,nv(o))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return oe.resolve();let i=new qt(HD);t.forEach((u=>i=i.add(u)));const a=IDBKeyRange.bound(eh(i.first()),eh(i.last())),o=i.getIterator();let c=o.getNext();return ql(e).ee({index:l0,range:a},((u,d,h)=>{const p=De.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;c&&HD(c,p)<0;)r(c,null),c=o.getNext();c&&c.isEqual(p)&&(r(c,d),c=o.hasNext()?o.getNext():null),c?h.j(eh(c)):h.done()})).next((()=>{for(;c;)r(c,null),c=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,a){const o=t.path,c=[o.popLast().toArray(),o.lastSegment(),ev(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ql(e).J(IDBKeyRange.bound(c,u,!0)).next((d=>{a?.incrementDocumentReadCount(d.length);let h=bi();for(const p of d){const m=this.Cr(De.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(zp(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h}))}getAllFromCollectionGroup(e,t,r,i){let a=bi();const o=qD(t,r),c=qD(t,wi.max());return ql(e).ee({index:EO,range:IDBKeyRange.bound(o,c,!0)},((u,d,h)=>{const p=this.Cr(De.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);a=a.insert(p.key,p),a.size===i&&h.done()})).next((()=>a))}newChangeBuffer(e){return new XX(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return GD(e).get(w_).next((t=>(Fe(!!t,20021),t)))}Dr(e,t){return GD(e).put(w_,t)}Cr(e,t){if(t){const r=MX(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ye.min())))return r}return Sn.newInvalidDocument(e)}}function V3(n){return new KX(n)}class XX extends O3{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ys((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new qt(((a,o)=>lt(a.canonicalString(),o.canonicalString())));return this.changes.forEach(((a,o)=>{const c=this.Br.get(a);if(t.push(this.Nr.removeEntry(e,a,c.readTime)),o.isValidDocument()){const u=AD(this.Nr.serializer,o);i=i.add(a.path.popLast());const d=nv(u);r+=d-c.size,t.push(this.Nr.addEntry(e,a,u))}else if(r-=c.size,this.trackRemovals){const u=AD(this.Nr.serializer,o.convertToNoDocument(Ye.min()));t.push(this.Nr.addEntry(e,a,u))}})),i.forEach((a=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Nr.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((a,o)=>{this.Br.set(a,{size:o,readTime:r.get(a).readTime})})),r)))}}function GD(n){return lr(n,np)}function ql(n){return lr(n,$0)}function eh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qD(n,e){const t=e.documentKey.path.toArray();return[n,ev(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function HD(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=lt(t[a],r[a]),i)return i;return i=lt(t.length,r.length),i||(i=lt(t[t.length-2],r[r.length-2]),i||lt(t[t.length-1],r[r.length-1]))}class WX{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class j3{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Mh(r.mutation,i,ni.empty(),tt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,_t()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=_t()){const i=Ua();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let o=uh();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const r=Ua();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,_t())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{t.set(o,c)}))}))}computeViews(e,t,r,i){let a=bi();const o=Nh(),c=(function(){return Nh()})();return t.forEach(((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Ks)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Mh(h.mutation,d,h.mutation.getFieldMask(),tt.now())):o.set(d.key,ni.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((d,h)=>o.set(d,h))),t.forEach(((d,h)=>c.set(d,new WX(h,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=Nh();let i=new un(((o,c)=>o-c)),a=_t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const c of o)c.keys().forEach((u=>{const d=t.get(u);if(d===null)return;let h=r.get(u)||ni.empty();h=c.applyToLocalView(d,h),r.set(u,h);const p=(i.get(c.batchId)||_t()).add(u);i=i.insert(c.batchId,p)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,p=e3();h.forEach((m=>{if(!a.has(m)){const x=o3(t.get(m),r.get(m));x!==null&&p.set(m,x),a=a.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return oe.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return De.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):XO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):oe.resolve(Ua());let c=Zh,u=a;return o.next((d=>oe.forEach(d,((h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),a.get(h)?oe.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{u=u.insert(h,m)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,u,d,_t()))).next((h=>({batchId:c,changes:JO(h)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new De(t)).next((r=>{let i=uh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=uh();return this.indexManager.getCollectionParents(e,a).next((c=>oe.forEach(c,(u=>{const d=(function(p,m){return new Hd(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((h=>{h.forEach(((p,m)=>{o=o.insert(p,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((o=>{a.forEach(((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Sn.newInvalidDocument(h)))}));let c=uh();return o.forEach(((u,d)=>{const h=a.get(u);h!==void 0&&Mh(h.mutation,d,ni.empty(),tt.now()),zp(t,d)&&(c=c.insert(u,d))})),c}))}}class QX{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:qr(i.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:A3(i.bundledQuery),readTime:qr(i.readTime)}})(t)),oe.resolve()}}class ZX{constructor(){this.overlays=new un(De.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ua();return oe.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=Ua(),a=t.length+1,o=new De(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new un(((d,h)=>d-h));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=a.get(d.largestBatchId);h===null&&(h=Ua(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=Ua(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,h)=>c.set(d,h))),!(c.size()>=i)););return oe.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qE(t,r));let a=this.qr.get(t);a===void 0&&(a=_t(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}class JX{constructor(){this.sessionToken=Qn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}class XE{constructor(){this.Qr=new qt(hr.$r),this.Ur=new qt(hr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new hr(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new hr(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new De(new zt([])),r=new hr(t,e),i=new hr(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new De(new zt([])),r=new hr(t,e),i=new hr(t,e+1);let a=_t();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const t=new hr(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class hr{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return De.comparator(e.key,t.key)||lt(e.Yr,t.Yr)}static Kr(e,t){return lt(e.Yr,t.Yr)||De.comparator(e.key,t.key)}}class eW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new qt(hr.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new FE(a,t,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new hr(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return oe.resolve(o)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?fc:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hr(t,0),i=new hr(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qt(lt);return t.forEach((i=>{const a=new hr(i,0),o=new hr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),oe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;De.isDocumentKey(a)||(a=a.child(""));const o=new hr(new De(a),0);let c=new qt(lt);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)}),o),oe.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Fe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return oe.forEach(t.mutations,(i=>{const a=new hr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new hr(t,0),i=this.Zr.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class tW{constructor(e){this.ri=e,this.docs=(function(){return new un(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(t))}getEntries(e,t){let r=bi();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Sn.newInvalidDocument(i))})),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=bi();const o=t.path,c=new De(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||kE(yO(h),r)<=0||(i.has(h.key)||zp(t,h))&&(a=a.insert(h.key,h.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Le(9500)}ii(e,t){return oe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new nW(this)}getSize(e){return oe.resolve(this.size)}}class nW extends O3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class rW{constructor(e){this.persistence=e,this.si=new Ys((t=>Tc(t)),Vp),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.oi=0,this._i=new XE,this.targetCount=0,this.ai=Rc.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Rc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),oe.waitFor(a).next((()=>i))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),oe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}class WE{constructor(e,t){this.ui={},this.overlays={},this.ci=new Gi(0),this.li=!1,this.li=!0,this.hi=new JX,this.referenceDelegate=e(this),this.Pi=new rW(this),this.indexManager=new UX,this.remoteDocumentCache=(function(i){return new tW(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new S3(t),this.Ii=new QX(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ZX,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new eW(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Se("MemoryPersistence","Starting transaction:",e);const i=new iW(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return oe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class iW extends xO{constructor(e){super(),this.currentSequenceNumber=e}}class ey{constructor(e){this.persistence=e,this.Ri=new XE,this.Vi=null}static mi(e){return new ey(e)}get fi(){if(this.Vi)return this.Vi;throw Le(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(r=>{const i=De.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,Ye.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class rv{constructor(e,t){this.persistence=e,this.pi=new Ys((r=>Mr(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=P3(this,t)}static mi(e,t){return new rv(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?oe.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,t).next((c=>{c||(r++,a.removeEntry(o,Ye.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=u0(e.data.value)),t}br(e,t,r){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return oe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class aW{constructor(e){this.serializer=e}k(e,t,r,i){const a=new Uv("createOrUpgrade",t);r<1&&i>=1&&((function(u){u.createObjectStore(Op)})(e),(function(u){u.createObjectStore(tp,{keyPath:mK}),u.createObjectStore(ca,{keyPath:nD,autoIncrement:!0}).createIndex(oc,rD,{unique:!0}),u.createObjectStore(yd)})(e),$D(e),(function(u){u.createObjectStore(Xl)})(e));let o=oe.resolve();return r<3&&i>=3&&(r!==0&&((function(u){u.deleteObjectStore(xd),u.deleteObjectStore(bd),u.deleteObjectStore(hc)})(e),$D(e)),o=o.next((()=>(function(u){const d=u.store(hc),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ye.min().toTimestamp(),targetCount:0};return d.put(Y0,h)})(a)))),r<4&&i>=4&&(r!==0&&(o=o.next((()=>(function(u,d){return d.store(ca).J().next((p=>{u.deleteObjectStore(ca),u.createObjectStore(ca,{keyPath:nD,autoIncrement:!0}).createIndex(oc,rD,{unique:!0});const m=d.store(ca),x=p.map((_=>m.put(_)));return oe.waitFor(x)}))})(e,a)))),o=o.next((()=>{(function(u){u.createObjectStore(_d,{keyPath:TK})})(e)}))),r<5&&i>=5&&(o=o.next((()=>this.yi(a)))),r<6&&i>=6&&(o=o.next((()=>((function(u){u.createObjectStore(np)})(e),this.wi(a))))),r<7&&i>=7&&(o=o.next((()=>this.Si(a)))),r<8&&i>=8&&(o=o.next((()=>this.bi(e,a)))),r<9&&i>=9&&(o=o.next((()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(o=o.next((()=>this.Di(a)))),r<11&&i>=11&&(o=o.next((()=>{(function(u){u.createObjectStore(Gv,{keyPath:AK})})(e),(function(u){u.createObjectStore(qv,{keyPath:CK})})(e)}))),r<12&&i>=12&&(o=o.next((()=>{(function(u){const d=u.createObjectStore(Hv,{keyPath:PK});d.createIndex(S_,OK,{unique:!1}),d.createIndex(CO,VK,{unique:!1})})(e)}))),r<13&&i>=13&&(o=o.next((()=>(function(u){const d=u.createObjectStore($0,{keyPath:yK});d.createIndex(l0,bK),d.createIndex(EO,xK)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(Xl)))),r<14&&i>=14&&(o=o.next((()=>this.Fi(e,a)))),r<15&&i>=15&&(o=o.next((()=>(function(u){u.createObjectStore(PE,{keyPath:IK,autoIncrement:!0}).createIndex(E_,RK,{unique:!1}),u.createObjectStore(Ih,{keyPath:DK}).createIndex(TO,kK,{unique:!1}),u.createObjectStore(Rh,{keyPath:NK}).createIndex(AO,MK,{unique:!1})})(e)))),r<16&&i>=16&&(o=o.next((()=>{t.objectStore(Ih).clear()})).next((()=>{t.objectStore(Rh).clear()}))),r<17&&i>=17&&(o=o.next((()=>{(function(u){u.createObjectStore(OE,{keyPath:jK})})(e)}))),r<18&&i>=18&&J4()&&(o=o.next((()=>{t.objectStore(Ih).clear()})).next((()=>{t.objectStore(Rh).clear()}))),o}wi(e){let t=0;return e.store(Xl).ee(((r,i)=>{t+=nv(i)})).next((()=>{const r={byteSize:t};return e.store(np).put(w_,r)}))}yi(e){const t=e.store(tp),r=e.store(ca);return t.J().next((i=>oe.forEach(i,(a=>{const o=IDBKeyRange.bound([a.userId,fc],[a.userId,a.lastAcknowledgedBatchId]);return r.J(oc,o).next((c=>oe.forEach(c,(u=>{Fe(u.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});const d=tc(this.serializer,u);return D3(e,a.userId,d).next((()=>{}))}))))}))))}Si(e){const t=e.store(xd),r=e.store(Xl);return e.store(hc).get(Y0).next((i=>{const a=[];return r.ee(((o,c)=>{const u=new zt(o),d=(function(p){return[0,Mr(p)]})(u);a.push(t.get(d).next((h=>h?oe.resolve():(p=>t.put({targetId:0,path:Mr(p),sequenceNumber:i.highestListenSequenceNumber}))(u))))})).next((()=>oe.waitFor(a)))}))}bi(e,t){e.createObjectStore(rp,{keyPath:SK});const r=t.store(rp),i=new KE,a=o=>{if(i.add(o)){const c=o.lastSegment(),u=o.popLast();return r.put({collectionId:c,parent:Mr(u)})}};return t.store(Xl).ee({X:!0},((o,c)=>{const u=new zt(o);return a(u.popLast())})).next((()=>t.store(yd).ee({X:!0},(([o,c,u],d)=>{const h=Ba(c);return a(h.popLast())}))))}Di(e){const t=e.store(bd);return t.ee(((r,i)=>{const a=fh(i),o=T3(this.serializer,a);return t.put(o)}))}Ci(e,t){const r=t.store(Xl),i=[];return r.ee(((a,o)=>{const c=t.store($0),u=(function(p){return p.document?new De(zt.fromString(p.document.name).popFirst(5)):p.noDocument?De.fromSegments(p.noDocument.path):p.unknownDocument?De.fromSegments(p.unknownDocument.path):Le(36783)})(o).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(c.put(d))})).next((()=>oe.waitFor(i)))}Fi(e,t){const r=t.store(ca),i=V3(this.serializer),a=new WE(ey.mi,this.serializer.yt);return r.J().next((o=>{const c=new Map;return o.forEach((u=>{let d=c.get(u.userId)??_t();tc(this.serializer,u).keys().forEach((h=>d=d.add(h))),c.set(u.userId,d)})),oe.forEach(c,((u,d)=>{const h=new wr(d),p=Zv.wt(this.serializer,h),m=a.getIndexManager(h),x=Jv.wt(h,this.serializer,m,a.referenceDelegate);return new j3(i,x,p,m).recalculateAndSaveOverlaysForDocumentKeys(new T_(t,Gi.ce),u).next()}))}))}}function $D(n){n.createObjectStore(xd,{keyPath:wK}).createIndex(ME,EK,{unique:!0}),n.createObjectStore(bd,{keyPath:"targetId"}).createIndex(SO,_K,{unique:!0}),n.createObjectStore(hc)}const Po="IndexedDbPersistence",ex=18e5,tx=5e3,nx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sW="main";class QE{constructor(e,t,r,i,a,o,c,u,d,h,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=a,this.window=o,this.document=c,this.xi=d,this.Oi=h,this.Ni=p,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!QE.v())throw new Ie(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new YX(this,i),this.$i=t+sW,this.serializer=new S3(u),this.Ui=new el(this.$i,this.Ni,new aW(this.serializer)),this.hi=new OX,this.Pi=new GX(this.referenceDelegate,this.serializer),this.remoteDocumentCache=V3(this.serializer),this.Ii=new PX,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&Ur(Po,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ie(ge.FAILED_PRECONDITION,nx);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Gi(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Km(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(gl(e))return Se(Po,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Se(Po,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return th(e).get(Iu).next((t=>oe.resolve(this.es(t))))}ts(e){return Km(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,ex)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=lr(t,_d);return r.J().next((i=>{const a=this.ss(i,ex),o=i.filter((c=>a.indexOf(c)===-1));return oe.forEach(o,(c=>r.delete(c.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?oe.resolve(!0):th(e).get(Iu).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,tx)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new Ie(ge.FAILED_PRECONDITION,nx);return!1}}return!(!this.networkEnabled||!this.inForeground)||Km(e).J().next((r=>this.ss(r,tx).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(a||o&&c)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Se(Po,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Op,_d],(e=>{const t=new T_(e,Gi.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Km(e).J().next((t=>this.ss(t,ex).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Jv.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new FX(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Zv.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Se(Po,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",a=(function(u){return u===18?BK:u===17?kO:u===16?LK:u===15?VE:u===14?DO:u===13?RO:u===12?zK:u===11?IO:void Le(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,i,a,(c=>(o=new T_(c,this.ci?this.ci.next():Gi.ce),t==="readwrite-primary"?this.Hi(o).next((u=>!!u||this.Yi(o))).next((u=>{if(!u)throw Ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Ie(ge.FAILED_PRECONDITION,bO);return r(o)})).next((u=>this.Xi(o).next((()=>u)))):this.Is(o).next((()=>r(o)))))).then((c=>(o.raiseOnCommittedEvent(),c)))}Is(e){return th(e).get(Iu).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,tx)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ie(ge.FAILED_PRECONDITION,nx)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return th(e).put(Iu,t)}static v(){return el.v()}Zi(e){const t=th(e);return t.get(Iu).next((r=>this.es(r)?(Se(Po,"Releasing primary lease."),t.delete(Iu)):oe.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ur(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;Z4()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return Se(Po,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Ur(Po,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ur("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function th(n){return lr(n,Op)}function Km(n){return lr(n,_d)}function oW(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ZE{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=_t(),i=_t();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new ZE(e,t.fromCache,r,i)}}class lW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class z3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Z4()?8:_O(or())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new lW;return this.Ss(e,t,o).next((c=>{if(a.result=c,this.Vs)return this.bs(e,t,o,c.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ou()<=Ct.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",Vu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(Ou()<=Ct.DEBUG&&Se("QueryEngine","Query:",Vu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ou()<=Ct.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",Vu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$i(t))):oe.resolve())}ys(e,t){if(mD(t))return oe.resolve(null);let r=$i(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Q0(t,null,"F"),r=$i(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=_t(...a);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.Ds(t,c);return this.Cs(t,d,o,u.readTime)?this.ys(e,Q0(t,null,"F")):this.vs(e,d,t,u)}))))})))))}ws(e,t,r,i){return mD(t)||i.isEqual(Ye.min())?oe.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(t,a);return this.Cs(t,o,r,i)?oe.resolve(null):(Ou()<=Ct.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vu(t)),this.vs(e,o,t,cK(i,Zh)).next((c=>c)))}))}Ds(e,t){let r=new qt(QO(e));return t.forEach(((i,a)=>{zp(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Ou()<=Ct.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",Vu(t)),this.ps.getDocumentsMatchingQuery(e,t,wi.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((o=>{a=a.insert(o.key,o)})),a)))}}const JE="LocalStore",cW=3e8;class uW{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new un(lt),this.xs=new Ys((a=>Tc(a)),Vp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function L3(n,e,t,r){return new uW(n,e,t,r)}async function B3(n,e){const t=ut(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=_t();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function dW(n,e){const t=ut(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,h){const p=d.batch,m=p.keys();let x=oe.resolve();return m.forEach((_=>{x=x.next((()=>h.getEntry(u,_))).next((E=>{const S=d.docVersions.get(_);Fe(S!==null,48541),E.version.compareTo(S)<0&&(p.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),h.addEntry(E)))}))})),x.next((()=>c.mutationQueue.removeMutationBatch(u,p)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=_t();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function U3(n){const e=ut(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function fW(n,e){const t=ut(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach(((h,p)=>{const m=i.get(p);if(!m)return;c.push(t.Pi.removeMatchingKeys(a,h.removedDocuments,p).next((()=>t.Pi.addMatchingKeys(a,h.addedDocuments,p))));let x=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?x=x.withResumeToken(Qn.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,r)),i=i.insert(p,x),(function(E,S,T){return E.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=cW?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(m,x,h)&&c.push(t.Pi.updateTargetData(a,x))}));let u=bi(),d=_t();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,h))})),c.push(hW(a,o,e.documentUpdates).next((h=>{u=h.ks,d=h.qs}))),!r.isEqual(Ye.min())){const h=t.Pi.getLastRemoteSnapshotVersion(a).next((p=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(h)}return oe.waitFor(c).next((()=>o.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,u,d))).next((()=>u))})).then((a=>(t.Ms=i,a)))}function hW(n,e,t){let r=_t(),i=_t();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let o=bi();return t.forEach(((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Ye.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Se(JE,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function pW(n,e){const t=ut(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=fc),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function gW(n,e){const t=ut(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,oe.resolve(i)):t.Pi.allocateTargetId(r).next((o=>(i=new As(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function L_(n,e,t){const r=ut(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!gl(o))throw o;Se(JE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function YD(n,e,t){const r=ut(n);let i=Ye.min(),a=_t();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,d,h){const p=ut(u),m=p.xs.get(h);return m!==void 0?oe.resolve(p.Ms.get(m)):p.Pi.getTargetData(d,h)})(r,o,$i(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:Ye.min(),t?a:_t()))).next((c=>(mW(r,tX(e),c),{documents:c,Qs:a})))))}function mW(n,e,t){let r=n.Os.get(e)||Ye.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class KD{constructor(){this.activeTargetIds=oX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class F3{constructor(){this.Mo=new KD,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new KD,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vW{Oo(e){}shutdown(){}}const XD="ConnectivityMonitor";class WD{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(XD,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(XD,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Xm=null;function B_(){return Xm===null?Xm=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xm++,"0x"+Xm.toString(16)}const rx="RestConnection",yW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===K0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const o=B_(),c=this.zo(e,t.toUriEncodedString());Se(rx,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:d}=new URL(c),h=Fd(d);return this.Jo(e,c,u,r,h).then((p=>(Se(rx,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw Ec(rx,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p}))}Ho(e,t,r,i,a,o){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+qd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=yW[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class xW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ir="WebChannelConnection";class _W extends bW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=B_();return new Promise(((c,u)=>{const d=new lO;d.setWithCredentials(!0),d.listenOnce(cO.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case a0.NO_ERROR:const p=d.getResponseJson();Se(Ir,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case a0.TIMEOUT:Se(Ir,`RPC '${e}' ${o} timed out`),u(new Ie(ge.DEADLINE_EXCEEDED,"Request time out"));break;case a0.HTTP_ERROR:const m=d.getStatus();if(Se(Ir,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const _=x?.error;if(_&&_.status&&_.message){const E=(function(T){const C=T.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(C)>=0?C:ge.UNKNOWN})(_.status);u(new Ie(E,_.message))}else u(new Ie(ge.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Ie(ge.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Se(Ir,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(i);Se(Ir,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)}))}T_(e,t,r){const i=B_(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fO(),c=dO(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const h=a.join("");Se(Ir,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=o.createWebChannel(h,u);this.I_(p);let m=!1,x=!1;const _=new xW({Yo:S=>{x?Se(Ir,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(Se(Ir,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),Se(Ir,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},Zo:()=>p.close()}),E=(S,T,C)=>{S.listen(T,(R=>{try{C(R)}catch(j){setTimeout((()=>{throw j}),0)}}))};return E(p,ch.EventType.OPEN,(()=>{x||(Se(Ir,`RPC '${e}' stream ${i} transport opened.`),_.o_())})),E(p,ch.EventType.CLOSE,(()=>{x||(x=!0,Se(Ir,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(p))})),E(p,ch.EventType.ERROR,(S=>{x||(x=!0,Ec(Ir,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),_.a_(new Ie(ge.UNAVAILABLE,"The operation could not be completed")))})),E(p,ch.EventType.MESSAGE,(S=>{if(!x){const T=S.data[0];Fe(!!T,16349);const C=T,R=C?.error||C[0]?.error;if(R){Se(Ir,`RPC '${e}' stream ${i} received error:`,R);const j=R.status;let z=(function(A){const k=$n[A];if(k!==void 0)return u3(k)})(j),V=R.message;z===void 0&&(z=ge.INTERNAL,V="Unknown error status: "+j+" with message "+R.message),x=!0,_.a_(new Ie(z,V)),p.close()}else Se(Ir,`RPC '${e}' stream ${i} received:`,T),_.u_(T)}})),E(c,uO.STAT_EVENT,(S=>{S.stat===b_.PROXY?Se(Ir,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===b_.NOPROXY&&Se(Ir,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function wW(){return typeof window<"u"?window:null}function g0(){return typeof document<"u"?document:null}function ty(n){return new EX(n,!0)}class G3{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const QD="PersistentStream";class q3{constructor(e,t,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new G3(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Ur(t.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ie(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(QD,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Se(QD,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EW extends q3{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=AX(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ye.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Ye.min():o.readTime?qr(o.readTime):Ye.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=P_(this.serializer),t.addTarget=(function(a,o){let c;const u=o.target;if(c=X0(u)?{documents:y3(a,u)}:{query:b3(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=h3(a,o.resumeToken);const d=N_(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ye.min())>0){c.readTime=Cd(a,o.snapshotVersion.toTimestamp());const d=N_(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const r=IX(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=P_(this.serializer),t.removeTarget=e,this.q_(t)}}class SW extends q3{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=CX(e.writeResults,e.commitTime),r=qr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=P_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>J0(this.serializer,r)))};this.q_(t)}}class TW{}class AW extends TW{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ie(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,M_(t,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ie(ge.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,M_(t,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ie(ge.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class CW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ur(t),this.aa=!1):Se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Dc="RemoteStore";class IW{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{zc(this)&&(Se(Dc,"Restarting streams for network reachability change."),await(async function(u){const d=ut(u);d.Ea.add(4),await Up(d),d.Ra.set("Unknown"),d.Ea.delete(4),await ny(d)})(this))}))})),this.Ra=new CW(r,i)}}async function ny(n){if(zc(n))for(const e of n.da)await e(!0)}async function Up(n){for(const e of n.da)await e(!1)}function H3(n,e){const t=ut(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),rS(t)?nS(t):Yd(t).O_()&&tS(t,e))}function eS(n,e){const t=ut(n),r=Yd(t);t.Ia.delete(e),r.O_()&&$3(t,e),t.Ia.size===0&&(r.O_()?r.L_():zc(t)&&t.Ra.set("Unknown"))}function tS(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yd(n).Y_(e)}function $3(n,e){n.Va.Ue(e),Yd(n).Z_(e)}function nS(n){n.Va=new bX({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Yd(n).start(),n.Ra.ua()}function rS(n){return zc(n)&&!Yd(n).x_()&&n.Ia.size>0}function zc(n){return ut(n).Ea.size===0}function Y3(n){n.Va=void 0}async function RW(n){n.Ra.set("Online")}async function DW(n){n.Ia.forEach(((e,t)=>{tS(n,e)}))}async function kW(n,e){Y3(n),rS(n)?(n.Ra.ha(e),nS(n)):n.Ra.set("Unknown")}async function NW(n,e,t){if(n.Ra.set("Online"),e instanceof f3&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){Se(Dc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await iv(n,r)}else if(e instanceof h0?n.Va.Ze(e):e instanceof d3?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ye.min()))try{const r=await U3(n.localStore);t.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.Ia.get(d);h&&a.Ia.set(d,h.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,d)=>{const h=a.Ia.get(u);if(!h)return;a.Ia.set(u,h.withResumeToken(Qn.EMPTY_BYTE_STRING,h.snapshotVersion)),$3(a,u);const p=new As(h.target,u,d,h.sequenceNumber);tS(a,p)})),a.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){Se(Dc,"Failed to raise snapshot:",r),await iv(n,r)}}async function iv(n,e,t){if(!gl(e))throw e;n.Ea.add(1),await Up(n),n.Ra.set("Offline"),t||(t=()=>U3(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Se(Dc,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ny(n)}))}function K3(n,e){return e().catch((t=>iv(n,t,e)))}async function Fp(n){const e=ut(n),t=ul(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fc;for(;MW(e);)try{const i=await pW(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,PW(e,i)}catch(i){await iv(e,i)}X3(e)&&W3(e)}function MW(n){return zc(n)&&n.Ta.length<10}function PW(n,e){n.Ta.push(e);const t=ul(n);t.O_()&&t.X_&&t.ea(e.mutations)}function X3(n){return zc(n)&&!ul(n).x_()&&n.Ta.length>0}function W3(n){ul(n).start()}async function OW(n){ul(n).ra()}async function VW(n){const e=ul(n);for(const t of n.Ta)e.ea(t.mutations)}async function jW(n,e,t){const r=n.Ta.shift(),i=GE.from(r,e,t);await K3(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Fp(n)}async function zW(n,e){e&&ul(n).X_&&await(async function(r,i){if((function(o){return mX(o)&&o!==ge.ABORTED})(i.code)){const a=r.Ta.shift();ul(r).B_(),await K3(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Fp(r)}})(n,e),X3(n)&&W3(n)}async function ZD(n,e){const t=ut(n);t.asyncQueue.verifyOperationInProgress(),Se(Dc,"RemoteStore received new credentials");const r=zc(t);t.Ea.add(3),await Up(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ny(t)}async function LW(n,e){const t=ut(n);e?(t.Ea.delete(2),await ny(t)):e||(t.Ea.add(2),await Up(t),t.Ra.set("Unknown"))}function Yd(n){return n.ma||(n.ma=(function(t,r,i){const a=ut(t);return a.sa(),new EW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:RW.bind(null,n),t_:DW.bind(null,n),r_:kW.bind(null,n),H_:NW.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),rS(n)?nS(n):n.Ra.set("Unknown")):(await n.ma.stop(),Y3(n))}))),n.ma}function ul(n){return n.fa||(n.fa=(function(t,r,i){const a=ut(t);return a.sa(),new SW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:OW.bind(null,n),r_:zW.bind(null,n),ta:VW.bind(null,n),na:jW.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Fp(n)):(await n.fa.stop(),n.Ta.length>0&&(Se(Dc,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class iS{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new $a,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,c=new iS(e,t,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function aS(n,e){if(Ur("AsyncQueue",`${e}: ${n}`),gl(n))return new Ie(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class nd{static emptySet(e){return new nd(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||De.comparator(t.key,r.key):(t,r)=>De.comparator(t.key,r.key),this.keyedMap=uh(),this.sortedSet=new un(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new nd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class JD{constructor(){this.ga=new un(De.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Le(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Id{constructor(e,t,r,i,a,o,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach((c=>{o.push({type:0,doc:c})})),new Id(e,t,nd.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class BW{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UW{constructor(){this.queries=ek(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=ut(t),a=i.queries;i.queries=ek(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new Ie(ge.ABORTED,"Firestore shutting down"))}}function ek(){return new Ys((n=>WO(n)),Kv)}async function sS(n,e){const t=ut(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new BW,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const c=aS(o,`Initialization of query '${Vu(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&lS(t)}async function oS(n,e){const t=ut(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function FW(n,e){const t=ut(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&lS(t)}function GW(n,e,t){const r=ut(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function lS(n){n.Ca.forEach((e=>{e.next()}))}var U_,tk;(tk=U_||(U_={})).Ma="default",tk.Cache="cache";class cS{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Id(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Id.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==U_.Cache}}class Q3{constructor(e){this.key=e}}class Z3{constructor(e){this.key=e}}class qW{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_t(),this.mutatedKeys=_t(),this.eu=QO(e),this.tu=new nd(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new JD,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,p)=>{const m=i.get(h),x=zp(this.query,p)?p:null,_=!!m&&this.mutatedKeys.has(m.key),E=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let S=!1;m&&x?m.data.isEqual(x.data)?_!==E&&(r.track({type:3,doc:x}),S=!0):this.su(m,x)||(r.track({type:2,doc:x}),S=!0,(u&&this.eu(x,u)>0||d&&this.eu(x,d)<0)&&(c=!0)):!m&&x?(r.track({type:0,doc:x}),S=!0):m&&!x&&(r.track({type:1,doc:m}),S=!0,(u||d)&&(c=!0)),S&&(x?(o=o.add(x),a=E?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,p)=>(function(x,_){const E=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Rt:S})}};return E(x)-E(_)})(h.type,p.type)||this.eu(h.doc,p.doc))),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Id(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new JD,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_t(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new Z3(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new Q3(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=_t();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Id.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const uS="SyncEngine";class HW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class $W{constructor(e){this.key=e,this.hu=!1}}class YW{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ys((c=>WO(c)),Kv),this.Iu=new Map,this.Eu=new Set,this.du=new un(De.comparator),this.Au=new Map,this.Ru=new XE,this.Vu={},this.mu=new Map,this.fu=Rc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function KW(n,e,t=!0){const r=iV(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await J3(r,e,t,!0),i}async function XW(n,e){const t=iV(n);await J3(t,e,!0,!1)}async function J3(n,e,t,r){const i=await gW(n.localStore,$i(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let c;return r&&(c=await WW(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&H3(n.remoteStore,i),c}async function WW(n,e,t,r,i){n.pu=(p,m,x)=>(async function(E,S,T,C){let R=S.view.ru(T);R.Cs&&(R=await YD(E.localStore,S.query,!1).then((({documents:I})=>S.view.ru(I,R))));const j=C&&C.targetChanges.get(S.targetId),z=C&&C.targetMismatches.get(S.targetId)!=null,V=S.view.applyChanges(R,E.isPrimaryClient,j,z);return rk(E,S.targetId,V.au),V.snapshot})(n,p,m,x);const a=await YD(n.localStore,e,!0),o=new qW(e,a.Qs),c=o.ru(a.documents),u=Bp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,u);rk(n,t,d.au);const h=new HW(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function QW(n,e,t){const r=ut(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!Kv(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await L_(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&eS(r.remoteStore,i.targetId),F_(r,i.targetId)})).catch(jc)):(F_(r,i.targetId),await L_(r.localStore,i.targetId,!0))}async function ZW(n,e){const t=ut(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),eS(t.remoteStore,r.targetId))}async function JW(n,e,t){const r=aV(n);try{const i=await(function(o,c){const u=ut(o),d=tt.now(),h=c.reduce(((x,_)=>x.add(_.key)),_t());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let _=bi(),E=_t();return u.Ns.getEntries(x,h).next((S=>{_=S,_.forEach(((T,C)=>{C.isValidDocument()||(E=E.add(T))}))})).next((()=>u.localDocuments.getOverlayedDocuments(x,_))).next((S=>{p=S;const T=[];for(const C of c){const R=pX(C,p.get(C.key).overlayedDocument);R!=null&&T.push(new Ks(C.key,R,UO(R.value.mapValue),sr.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,T,c)})).next((S=>{m=S;const T=S.applyToLocalDocumentSet(p,E);return u.documentOverlayCache.saveOverlays(x,S.batchId,T)}))})).then((()=>({batchId:m.batchId,changes:JO(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new un(lt)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d})(r,i.batchId,t),await Gp(r,i.changes),await Fp(r.remoteStore)}catch(i){const a=aS(i,"Failed to persist write");t.reject(a)}}async function eV(n,e){const t=ut(n);try{const r=await fW(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=t.Au.get(a);o&&(Fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Fe(o.hu,14607):i.removedDocuments.size>0&&(Fe(o.hu,42227),o.hu=!1))})),await Gp(t,r,e)}catch(r){await jc(r)}}function nk(n,e,t){const r=ut(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=ut(o);u.onlineState=c;let d=!1;u.queries.forEach(((h,p)=>{for(const m of p.Sa)m.va(c)&&(d=!0)})),d&&lS(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function eQ(n,e,t){const r=ut(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new un(De.comparator);o=o.insert(a,Sn.newNoDocument(a,Ye.min()));const c=_t().add(a),u=new Qv(Ye.min(),new Map,new un(lt),o,c);await eV(r,u),r.du=r.du.remove(a),r.Au.delete(e),dS(r)}else await L_(r.localStore,e,!1).then((()=>F_(r,e,t))).catch(jc)}async function tQ(n,e){const t=ut(n),r=e.batch.batchId;try{const i=await dW(t.localStore,e);nV(t,r,null),tV(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Gp(t,i)}catch(i){await jc(i)}}async function nQ(n,e,t){const r=ut(n);try{const i=await(function(o,c){const u=ut(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next((p=>(Fe(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(d,p)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>u.localDocuments.getDocuments(d,h)))}))})(r.localStore,e);nV(r,e,t),tV(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Gp(r,i)}catch(i){await jc(i)}}function tV(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function nV(n,e,t){const r=ut(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function F_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||rV(n,r)}))}function rV(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(eS(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),dS(n))}function rk(n,e,t){for(const r of t)r instanceof Q3?(n.Ru.addReference(r.key,e),rQ(n,r)):r instanceof Z3?(Se(uS,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||rV(n,r.key)):Le(19791,{wu:r})}function rQ(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Se(uS,"New document in limbo: "+t),n.Eu.add(r),dS(n))}function dS(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new De(zt.fromString(e)),r=n.fu.next();n.Au.set(r,new $W(t)),n.du=n.du.insert(t,r),H3(n.remoteStore,new As($i(jp(t.path)),r,"TargetPurposeLimboResolution",Gi.ce))}}async function Gp(n,e,t){const r=ut(n),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,t).then((d=>{if((d||t)&&r.isPrimaryClient){const h=d?!d.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(d){i.push(d);const h=ZE.As(u.targetId,d);a.push(h)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,d){const h=ut(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>oe.forEach(d,(m=>oe.forEach(m.Es,(x=>h.persistence.referenceDelegate.addReference(p,m.targetId,x))).next((()=>oe.forEach(m.ds,(x=>h.persistence.referenceDelegate.removeReference(p,m.targetId,x)))))))))}catch(p){if(!gl(p))throw p;Se(JE,"Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const x=h.Ms.get(m),_=x.snapshotVersion,E=x.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(m,E)}}})(r.localStore,a))}async function iQ(n,e){const t=ut(n);if(!t.currentUser.isEqual(e)){Se(uS,"User change. New user:",e.toKey());const r=await B3(t.localStore,e);t.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new Ie(ge.CANCELLED,o))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gp(t,r.Ls)}}function aQ(n,e){const t=ut(n),r=t.Au.get(e);if(r&&r.hu)return _t().add(r.key);{let i=_t();const a=t.Iu.get(e);if(!a)return i;for(const o of a){const c=t.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function iV(n){const e=ut(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=eV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eQ.bind(null,e),e.Pu.H_=FW.bind(null,e.eventManager),e.Pu.yu=GW.bind(null,e.eventManager),e}function aV(n){const e=ut(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nQ.bind(null,e),e}class dp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ty(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return L3(this.persistence,new z3,e.initialUser,this.serializer)}Cu(e){return new WE(ey.mi,this.serializer)}Du(e){return new F3}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dp.provider={build:()=>new dp};class sQ extends dp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Fe(this.persistence.referenceDelegate instanceof rv,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new M3(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Rr.withCacheSize(this.cacheSizeBytes):Rr.DEFAULT;return new WE((r=>rv.mi(r,t)),this.serializer)}}class oQ extends dp{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await aV(this.xu.syncEngine),await Fp(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return L3(this.persistence,new z3,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new M3(r,e.asyncQueue,t)}Mu(e,t){const r=new hK(t,this.persistence);return new fK(e.asyncQueue,r)}Cu(e){const t=oW(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Rr.withCacheSize(this.cacheSizeBytes):Rr.DEFAULT;return new QE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,wW(),g0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new F3}}class av{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=iQ.bind(null,this.syncEngine),await LW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UW})()}createDatastore(e){const t=ty(e.databaseInfo.databaseId),r=(function(a){return new _W(a)})(e.databaseInfo);return(function(a,o,c,u){return new AW(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,o,c){return new IW(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>nk(this.syncEngine,t,0)),(function(){return WD.v()?new WD:new vW})())}createSyncEngine(e,t){return(function(i,a,o,c,u,d,h){const p=new YW(i,a,o,c,u,d);return h&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ut(t);Se(Dc,"RemoteStore shutting down."),r.Ea.add(5),await Up(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}av.provider={build:()=>new av};class fS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ur("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const dl="FirestoreClient";class lQ{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=wr.UNAUTHENTICATED,this.clientId=DE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{Se(dl,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Se(dl,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $a;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=aS(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function ix(n,e){n.asyncQueue.verifyOperationInProgress(),Se(dl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await B3(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function ik(n,e){n.asyncQueue.verifyOperationInProgress();const t=await cQ(n);Se(dl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>ZD(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>ZD(e.remoteStore,i))),n._onlineComponents=e}async function cQ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Se(dl,"Using user provided OfflineComponentProvider");try{await ix(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ge.FAILED_PRECONDITION||i.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ec("Error using user provided cache. Falling back to memory cache: "+t),await ix(n,new dp)}}else Se(dl,"Using default OfflineComponentProvider"),await ix(n,new sQ(void 0));return n._offlineComponents}async function sV(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Se(dl,"Using user provided OnlineComponentProvider"),await ik(n,n._uninitializedComponentsProvider._online)):(Se(dl,"Using default OnlineComponentProvider"),await ik(n,new av))),n._onlineComponents}function uQ(n){return sV(n).then((e=>e.syncEngine))}async function sv(n){const e=await sV(n),t=e.eventManager;return t.onListen=KW.bind(null,e.syncEngine),t.onUnlisten=QW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ZW.bind(null,e.syncEngine),t}function dQ(n,e,t={}){const r=new $a;return n.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new fS({next:m=>{h.Nu(),o.enqueueAndForget((()=>oS(a,p)));const x=m.docs.has(c);!x&&m.fromCache?d.reject(new Ie(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&m.fromCache&&u&&u.source==="server"?d.reject(new Ie(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new cS(jp(c.path),h,{includeMetadataChanges:!0,qa:!0});return sS(a,p)})(await sv(n),n.asyncQueue,e,t,r))),r.promise}function fQ(n,e,t={}){const r=new $a;return n.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new fS({next:m=>{h.Nu(),o.enqueueAndForget((()=>oS(a,p))),m.fromCache&&u.source==="server"?d.reject(new Ie(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new cS(c,h,{includeMetadataChanges:!0,qa:!0});return sS(a,p)})(await sv(n),n.asyncQueue,e,t,r))),r.promise}function oV(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const ak=new Map;const lV="firestore.googleapis.com",sk=!0;class ok{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lV,this.ssl=sk}else this.host=e.host,this.ssl=e.ssl??sk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=R3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qX)throw new Ie(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oV(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ie(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ie(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ie(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ry{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ok({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ok(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ZY;switch(r.type){case"firstParty":return new nK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=ak.get(t);r&&(Se("ComponentProvider","Removing Datastore"),ak.delete(t),r.terminate())})(this),Promise.resolve()}}function hQ(n,e,t,r={}){n=Nr(n,ry);const i=Fd(e),a=n._getSettings(),o={...a,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&(X4(`https://${c}`),W4("Firestore",!0)),a.host!==lV&&a.host!==c&&Ec("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!ol(u,o)&&(n._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=wr.MOCK_USER;else{d=I$(r.mockUserToken,n._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ie(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new wr(p)}n._authCredentials=new JY(new pO(d,h))}}class Xs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xs(this.firestore,e,this._query)}}class Tn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}toJSON(){return{type:Tn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Pp(t,Tn._jsonSchema))return new Tn(e,r||null,new De(zt.fromString(t.referencePath)))}}Tn._jsonSchemaVersion="firestore/documentReference/1.0",Tn._jsonSchema={type:Xn("string",Tn._jsonSchemaVersion),referencePath:Xn("string")};class tl extends Xs{constructor(e,t,r){super(e,t,jp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new De(e))}withConverter(e){return new tl(this.firestore,e,this._path)}}function vi(n,e,...t){if(n=an(n),mO("collection","path",e),n instanceof ry){const r=zt.fromString(e,...t);return QR(r),new tl(n,null,r)}{if(!(n instanceof Tn||n instanceof tl))throw new Ie(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return QR(r),new tl(n.firestore,null,r)}}function vt(n,e,...t){if(n=an(n),arguments.length===1&&(e=DE.newId()),mO("doc","path",e),n instanceof ry){const r=zt.fromString(e,...t);return WR(r),new Tn(n,null,new De(r))}{if(!(n instanceof Tn||n instanceof tl))throw new Ie(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return WR(r),new Tn(n.firestore,n instanceof tl?n.converter:null,new De(r))}}const lk="AsyncQueue";class ck{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new G3(this,"async_queue_retry"),this._c=()=>{const r=g0();r&&Se(lk,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=g0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=g0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new $a;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!gl(e))throw e;Se(lk,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ur("INTERNAL UNHANDLED ERROR: ",uk(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=iS.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Le(47125,{Pc:uk(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function uk(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function dk(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class va extends ry{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ck,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ck(e),this._firestoreClient=void 0,await e}}}function pQ(n,e){const t=typeof n=="object"?n:iO(),r=typeof n=="string"?n:K0,i=IE(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=A$("firestore");a&&hQ(i,...a)}return i}function qp(n){if(n._terminated)throw new Ie(ge.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||cV(n),n._firestoreClient}function cV(n){const e=n._freezeSettings(),t=(function(i,a,o,c){return new FK(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,oV(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new lQ(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}function gQ(n,e){Ec("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return mQ(n,av.provider,{build:r=>new oQ(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function mQ(n,e,t){if((n=Nr(n,va))._firestoreClient||n._terminated)throw new Ie(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Ie(ge.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},cV(n)}class Ui{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ui(Qn.fromBase64String(e))}catch(t){throw new Ie(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ui(Qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ui._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pp(e,Ui._jsonSchema))return Ui.fromBase64String(e.bytes)}}Ui._jsonSchemaVersion="firestore/bytes/1.0",Ui._jsonSchema={type:Xn("string",Ui._jsonSchemaVersion),bytes:Xn("string")};class Hp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ie(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class iy{constructor(e){this._methodName=e}}class Ya{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ya._jsonSchemaVersion}}static fromJSON(e){if(Pp(e,Ya._jsonSchema))return new Ya(e.latitude,e.longitude)}}Ya._jsonSchemaVersion="firestore/geoPoint/1.0",Ya._jsonSchema={type:Xn("string",Ya._jsonSchemaVersion),latitude:Xn("number"),longitude:Xn("number")};class Ka{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ka._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pp(e,Ka._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ka(e.vectorValues);throw new Ie(ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ka._jsonSchemaVersion="firestore/vectorValue/1.0",Ka._jsonSchema={type:Xn("string",Ka._jsonSchemaVersion),vectorValues:Xn("object")};const vQ=/^__.*__$/;class yQ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ks(e,this.data,this.fieldMask,t,this.fieldTransforms):new $d(e,this.data,t,this.fieldTransforms)}}class uV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ks(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ac:n})}}class ay{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ay({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ov(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dV(this.Ac)&&vQ.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class bQ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ty(e)}Cc(e,t,r,i=!1){return new ay({Ac:e,methodName:t,Dc:r,path:mn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $p(n){const e=n._freezeSettings(),t=ty(n._databaseId);return new bQ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hS(n,e,t,r,i,a={}){const o=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);gS("Data must be an object, but it was:",o,r);const c=pV(r,o);let u,d;if(a.merge)u=new ni(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const p of a.mergeFields){const m=G_(e,p,t);if(!o.contains(m))throw new Ie(ge.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);mV(h,m)||h.push(m)}u=new ni(h),d=o.fieldTransforms.filter((p=>u.covers(p.field)))}else u=null,d=o.fieldTransforms;return new yQ(new Dr(c),u,d)}class Yp extends iy{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yp}}function xQ(n,e,t){return new ay({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class pS extends iy{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=xQ(this,e,!0),r=this.vc.map((a=>Kd(a,t))),i=new Ac(r);return new s3(e.path,i)}isEqual(e){return e instanceof pS&&ol(this.vc,e.vc)}}function fV(n,e,t,r){const i=n.Cc(1,e,t);gS("Data must be an object, but it was:",i,r);const a=[],o=Dr.empty();ml(r,((u,d)=>{const h=mS(e,u,t);d=an(d);const p=i.yc(h);if(d instanceof Yp)a.push(h);else{const m=Kd(d,p);m!=null&&(a.push(h),o.set(h,m))}}));const c=new ni(a);return new uV(o,c,i.fieldTransforms)}function hV(n,e,t,r,i,a){const o=n.Cc(1,e,t),c=[G_(e,r,t)],u=[i];if(a.length%2!=0)throw new Ie(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)c.push(G_(e,a[m])),u.push(a[m+1]);const d=[],h=Dr.empty();for(let m=c.length-1;m>=0;--m)if(!mV(d,c[m])){const x=c[m];let _=u[m];_=an(_);const E=o.yc(x);if(_ instanceof Yp)d.push(x);else{const S=Kd(_,E);S!=null&&(d.push(x),h.set(x,S))}}const p=new ni(d);return new uV(h,p,o.fieldTransforms)}function _Q(n,e,t,r=!1){return Kd(t,n.Cc(r?4:3,e))}function Kd(n,e){if(gV(n=an(n)))return gS("Unsupported field value:",e,n),pV(n,e);if(n instanceof iy)return(function(r,i){if(!dV(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=Kd(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lX(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=tt.fromDate(r);return{timestampValue:Cd(i.serializer,a)}}if(r instanceof tt){const a=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cd(i.serializer,a)}}if(r instanceof Ya)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ui)return{bytesValue:h3(i.serializer,r._byteString)};if(r instanceof Tn){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:$E(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ka)return(function(o,c){return{mapValue:{fields:{[zE]:{stringValue:LE},[wd]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return UE(c.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Bv(r)}`)})(n,e)}function pV(n,e){const t={};return NO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ml(n,((r,i)=>{const a=Kd(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function gV(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof tt||n instanceof Ya||n instanceof Ui||n instanceof Tn||n instanceof iy||n instanceof Ka)}function gS(n,e,t){if(!gV(t)||!vO(t)){const r=Bv(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function G_(n,e,t){if((e=an(e))instanceof Hp)return e._internalPath;if(typeof e=="string")return mS(n,e);throw ov("Field path arguments must be of type string or ",n,!1,void 0,t)}const wQ=new RegExp("[~\\*/\\[\\]]");function mS(n,e,t){if(e.search(wQ)>=0)throw ov(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hp(...e.split("."))._internalPath}catch{throw ov(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ov(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ie(ge.INVALID_ARGUMENT,c+n+u)}function mV(n,e){return n.some((t=>t.isEqual(e)))}class vV{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class EQ extends vV{data(){return super.data()}}function sy(n,e){return typeof e=="string"?mS(n,e):e instanceof Hp?e._internalPath:e._delegate._internalPath}function yV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ie(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vS{}class yS extends vS{}function ha(n,e,...t){let r=[];e instanceof vS&&r.push(e),r=r.concat(t),(function(a){const o=a.filter((u=>u instanceof bS)).length,c=a.filter((u=>u instanceof oy)).length;if(o>1||o>0&&c>0)throw new Ie(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class oy extends yS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new oy(e,t,r)}_apply(e){const t=this._parse(e);return bV(e._query,t),new Xs(e.firestore,e.converter,k_(e._query,t))}_parse(e){const t=$p(e.firestore);return(function(a,o,c,u,d,h,p){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Ie(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){pk(p,h);const _=[];for(const E of p)_.push(hk(u,a,E));m={arrayValue:{values:_}}}else m=hk(u,a,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||pk(p,h),m=_Q(c,o,p,h==="in"||h==="not-in");return It.create(d,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function q_(n,e,t){const r=e,i=sy("where",n);return oy._create(i,r,t)}class bS extends vS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bS(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Gt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)bV(o,u),o=k_(o,u)})(e._query,t),new Xs(e.firestore,e.converter,k_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xS extends yS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xS(e,t)}_apply(e){const t=(function(i,a,o){if(i.startAt!==null)throw new Ie(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ie(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lp(a,o)})(e._query,this._field,this._direction);return new Xs(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new Hd(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function Rd(n,e="asc"){const t=e,r=sy("orderBy",n);return xS._create(r,t)}class _S extends yS{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new _S(e,t,r)}_apply(e){return new Xs(e.firestore,e.converter,Q0(e._query,this._limit,this._limitType))}}function fk(n){return _S._create("limit",n,"F")}function hk(n,e,t){if(typeof(t=an(t))=="string"){if(t==="")throw new Ie(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XO(e)&&t.indexOf("/")!==-1)throw new Ie(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(zt.fromString(t));if(!De.isDocumentKey(r))throw new Ie(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sp(n,new De(r))}if(t instanceof Tn)return sp(n,t._key);throw new Ie(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bv(t)}.`)}function pk(n,e){if(!Array.isArray(n)||n.length===0)throw new Ie(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bV(n,e){const t=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ie(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ie(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class SQ{convertValue(e,t="none"){switch(ll(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ml(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[wd].arrayValue?.values?.map((r=>ln(r.doubleValue)));return new Ka(t)}convertGeoPoint(e){return new Ya(ln(e.latitude),ln(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$v(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ip(e));default:return null}}convertTimestamp(e){const t=Fs(e);return new tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=zt.fromString(e);Fe(E3(r),9688,{name:e});const i=new Sc(r.get(1),r.get(3)),a=new De(r.popFirst(5));return i.isEqual(t)||Ur(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function wS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class hh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gc extends vV{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new m0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=gc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}gc._jsonSchemaVersion="firestore/documentSnapshot/1.0",gc._jsonSchema={type:Xn("string",gc._jsonSchemaVersion),bundleSource:Xn("string","DocumentSnapshot"),bundleName:Xn("string"),bundle:Xn("string")};class m0 extends gc{data(e={}){return super.data(e)}}class mc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new hh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new m0(this._firestore,this._userDataWriter,r.key,r,new hh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new m0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new hh(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new m0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new hh(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:TQ(c.type),doc:u,oldIndex:d,newIndex:h}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=mc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=DE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function TQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:n})}}function lc(n){n=Nr(n,Tn);const e=Nr(n.firestore,va);return dQ(qp(e),n._key).then((t=>xV(e,n,t)))}mc._jsonSchemaVersion="firestore/querySnapshot/1.0",mc._jsonSchema={type:Xn("string",mc._jsonSchemaVersion),bundleSource:Xn("string","QuerySnapshot"),bundleName:Xn("string"),bundle:Xn("string")};class ES extends SQ{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ui(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}}function Cs(n){n=Nr(n,Xs);const e=Nr(n.firestore,va),t=qp(e),r=new ES(e);return yV(n._query),fQ(t,n._query).then((i=>new mc(e,r,n,i)))}function Li(n,e,t){n=Nr(n,Tn);const r=Nr(n.firestore,va),i=wS(n.converter,e,t);return Kp(r,[hS($p(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,sr.none())])}function Sr(n,e,t,...r){n=Nr(n,Tn);const i=Nr(n.firestore,va),a=$p(i);let o;return o=typeof(e=an(e))=="string"||e instanceof Hp?hV(a,"updateDoc",n._key,e,t,r):fV(a,"updateDoc",n._key,e),Kp(i,[o.toMutation(n._key,sr.exists(!0))])}function za(n){return Kp(Nr(n.firestore,va),[new Lp(n._key,sr.none())])}function ly(n,e){const t=Nr(n.firestore,va),r=vt(n),i=wS(n.converter,e);return Kp(t,[hS($p(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,sr.exists(!1))]).then((()=>r))}function kc(n,...e){n=an(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||dk(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(dk(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,o,c;if(n instanceof Tn)o=Nr(n.firestore,va),c=jp(n._key.path),a={next:u=>{e[r]&&e[r](xV(o,n,u))},error:e[r+1],complete:e[r+2]};else{const u=Nr(n,Xs);o=Nr(u.firestore,va),c=u._query;const d=new ES(o);a={next:h=>{e[r]&&e[r](new mc(o,d,u,h))},error:e[r+1],complete:e[r+2]},yV(n._query)}return(function(d,h,p,m){const x=new fS(m),_=new cS(h,x,p);return d.asyncQueue.enqueueAndForget((async()=>sS(await sv(d),_))),()=>{x.Nu(),d.asyncQueue.enqueueAndForget((async()=>oS(await sv(d),_)))}})(qp(o),c,i,a)}function Kp(n,e){return(function(r,i){const a=new $a;return r.asyncQueue.enqueueAndForget((async()=>JW(await uQ(r),i,a))),a.promise})(qp(n),e)}function xV(n,e,t){const r=t.docs.get(e._key),i=new ES(n);return new gc(n,i,e._key,r,new hh(t.hasPendingWrites,t.fromCache),e.converter)}class AQ{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$p(e)}set(e,t,r){this._verifyNotCommitted();const i=ax(e,this._firestore),a=wS(i.converter,t,r),o=hS(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,sr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=ax(e,this._firestore);let o;return o=typeof(t=an(t))=="string"||t instanceof Hp?hV(this._dataReader,"WriteBatch.update",a._key,t,r,i):fV(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ax(e,this._firestore);return this._mutations=this._mutations.concat(new Lp(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ax(n,e){if((n=an(n)).firestore!==e)throw new Ie(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function _V(){return new Yp("deleteField")}function wV(...n){return new pS("arrayUnion",n)}function CQ(n){return qp(n=Nr(n,va)),new AQ(n,(e=>Kp(n,e)))}(function(e,t=!0){(function(i){qd=i})(Gd),md(new _c("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new va(new eK(r.getProvider("auth-internal")),new rK(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ie(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sc(d.options.projectId,h)})(o,i),o);return a={useFetchStreams:t,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Zo($R,YR,e),Zo($R,YR,"esm2020")})();var IQ="firebase",RQ="12.6.0";Zo(IQ,RQ,"app");function EV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DQ=EV,SV=new Np("auth","Firebase",EV());const lv=new AE("@firebase/auth");function kQ(n,...e){lv.logLevel<=Ct.WARN&&lv.warn(`Auth (${Gd}): ${n}`,...e)}function v0(n,...e){lv.logLevel<=Ct.ERROR&&lv.error(`Auth (${Gd}): ${n}`,...e)}function ya(n,...e){throw SS(n,...e)}function Xa(n,...e){return SS(n,...e)}function TV(n,e,t){const r={...DQ(),[e]:t};return new Np("auth","Firebase",r).create(e,{appName:n.name})}function Os(n){return TV(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SS(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return SV.create(n,...e)}function rt(n,e,...t){if(!n)throw SS(e,...t)}function Is(n){const e="INTERNAL ASSERTION FAILED: "+n;throw v0(e),new Error(e)}function qs(n,e){n||Is(e)}function H_(){return typeof self<"u"&&self.location?.href||""}function NQ(){return gk()==="http:"||gk()==="https:"}function gk(){return typeof self<"u"&&self.location?.protocol||null}function MQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NQ()||M$()||"connection"in navigator)?navigator.onLine:!0}function PQ(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Xp{constructor(e,t){this.shortDelay=e,this.longDelay=t,qs(t>e,"Short delay should be less than long delay!"),this.isMobile=k$()||P$()}get(){return MQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function TS(n,e){qs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class AV{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const OQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const VQ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jQ=new Xp(3e4,6e4);function Ws(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function as(n,e,t,r,i={}){return CV(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Mp({key:n.config.apiKey,...o}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const d={method:e,headers:u,...a};return N$()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Fd(n.emulatorConfig.host)&&(d.credentials="include"),AV.fetch()(await IV(n,n.config.apiHost,t,c),d)})}async function CV(n,e,t){n._canInitEmulator=!1;const r={...OQ,...e};try{const i=new LQ(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Wm(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wm(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Wm(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Wm(n,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw TV(n,h,d);ya(n,h)}}catch(i){if(i instanceof $s)throw i;ya(n,"network-request-failed",{message:String(i)})}}async function Wp(n,e,t,r,i={}){const a=await as(n,e,t,r,i);return"mfaPendingCredential"in a&&ya(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function IV(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?TS(n.config,i):`${n.config.apiScheme}://${i}`;return VQ.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function zQ(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LQ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Xa(this.auth,"network-request-failed")),jQ.get())})}}function Wm(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Xa(n,e,r);return i.customData._tokenResponse=t,i}function mk(n){return n!==void 0&&n.enterprise!==void 0}class BQ{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zQ(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function UQ(n,e){return as(n,"GET","/v2/recaptchaConfig",Ws(n,e))}async function FQ(n,e){return as(n,"POST","/v1/accounts:delete",e)}async function cv(n,e){return as(n,"POST","/v1/accounts:lookup",e)}function Ph(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GQ(n,e=!1){const t=an(n),r=await t.getIdToken(e),i=AS(r);rt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:Ph(sx(i.auth_time)),issuedAtTime:Ph(sx(i.iat)),expirationTime:Ph(sx(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function sx(n){return Number(n)*1e3}function AS(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return v0("JWT malformed, contained fewer than 3 sections"),null;try{const i=q4(t);return i?JSON.parse(i):(v0("Failed to decode base64 JWT payload"),null)}catch(i){return v0("Caught error parsing JWT payload as JSON",i?.toString()),null}}function vk(n){const e=AS(n);return rt(e,"internal-error"),rt(typeof e.exp<"u","internal-error"),rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Dd(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof $s&&qQ(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function qQ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class HQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class $_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ph(this.lastLoginAt),this.creationTime=Ph(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function uv(n){const e=n.auth,t=await n.getIdToken(),r=await Dd(n,cv(e,{idToken:t}));rt(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?RV(i.providerUserInfo):[],o=YQ(n.providerData,a),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!o?.length,d=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new $_(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)}async function $Q(n){const e=an(n);await uv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function RV(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function KQ(n,e){const t=await CV(n,{},async()=>{const r=Mp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await IV(n,i,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return n.emulatorConfig&&Fd(n.emulatorConfig.host)&&(u.credentials="include"),AV.fetch()(o,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function XQ(n,e){return as(n,"POST","/v2/accounts:revokeToken",Ws(n,e))}class rd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rt(e.idToken,"internal-error"),rt(typeof e.idToken<"u","internal-error"),rt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){rt(e.length!==0,"internal-error");const t=vk(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(rt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await KQ(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new rd;return r&&(rt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(rt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(rt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rd,this.toJSON())}_performRefresh(){return Is("not implemented")}}function Oo(n,e){rt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ua{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new HQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Dd(this,this.stsTokenManager.getToken(this.auth,e));return rt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return GQ(this,e)}reload(){return $Q(this)}_assign(e){this!==e&&(rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ua({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await uv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bi(this.auth.app))return Promise.reject(Os(this.auth));const e=await this.getIdToken();return await Dd(this,FQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,o=t.photoURL??void 0,c=t.tenantId??void 0,u=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:x,providerData:_,stsTokenManager:E}=t;rt(p&&E,e,"internal-error");const S=rd.fromJSON(this.name,E);rt(typeof p=="string",e,"internal-error"),Oo(r,e.name),Oo(i,e.name),rt(typeof m=="boolean",e,"internal-error"),rt(typeof x=="boolean",e,"internal-error"),Oo(a,e.name),Oo(o,e.name),Oo(c,e.name),Oo(u,e.name),Oo(d,e.name),Oo(h,e.name);const T=new ua({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:S,createdAt:d,lastLoginAt:h});return _&&Array.isArray(_)&&(T.providerData=_.map(C=>({...C}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new rd;i.updateFromServerResponse(t);const a=new ua({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await uv(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];rt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?RV(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new rd;c.updateFromIdToken(r);const u=new ua({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new $_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,d),u}}const yk=new Map;function Rs(n){qs(n instanceof Function,"Expected a class definition");let e=yk.get(n);return e?(qs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,yk.set(n,e),e)}class DV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}DV.type="NONE";const bk=DV;function y0(n,e,t){return`firebase:${n}:${e}:${t}`}class id{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=y0(this.userKey,i.apiKey,a),this.fullPersistenceKey=y0("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cv(this.auth,{idToken:e}).catch(()=>{});return t?ua._fromGetAccountInfoResponse(this.auth,t,e):null}return ua._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new id(Rs(bk),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||Rs(bk);const o=y0(r,e.config.apiKey,e.name);let c=null;for(const d of t)try{const h=await d._get(o);if(h){let p;if(typeof h=="string"){const m=await cv(e,{idToken:h}).catch(()=>{});if(!m)break;p=await ua._fromGetAccountInfoResponse(e,m,h)}else p=ua._fromJSON(e,h);d!==a&&(c=p),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new id(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new id(a,e,r))}}function xk(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VV(e))return"Blackberry";if(jV(e))return"Webos";if(NV(e))return"Safari";if((e.includes("chrome/")||MV(e))&&!e.includes("edge/"))return"Chrome";if(OV(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function kV(n=or()){return/firefox\//i.test(n)}function NV(n=or()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MV(n=or()){return/crios\//i.test(n)}function PV(n=or()){return/iemobile/i.test(n)}function OV(n=or()){return/android/i.test(n)}function VV(n=or()){return/blackberry/i.test(n)}function jV(n=or()){return/webos/i.test(n)}function CS(n=or()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function WQ(n=or()){return CS(n)&&!!window.navigator?.standalone}function QQ(){return O$()&&document.documentMode===10}function zV(n=or()){return CS(n)||OV(n)||jV(n)||VV(n)||/windows phone/i.test(n)||PV(n)}function LV(n,e=[]){let t;switch(n){case"Browser":t=xk(or());break;case"Worker":t=`${xk(or())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Gd}/${r}`}class ZQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function JQ(n,e={}){return as(n,"GET","/v2/passwordPolicy",Ws(n,e))}const eZ=6;class tZ{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??eZ,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class nZ{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _k(this),this.idTokenSubscription=new _k(this),this.beforeStateQueue=new ZQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Rs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await id.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cv(this,{idToken:e}),r=await ua._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Bi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PQ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bi(this.app))return Promise.reject(Os(this));const t=e?an(e):null;return t&&rt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&rt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bi(this.app)?Promise.reject(Os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bi(this.app)?Promise.reject(Os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JQ(this),t=new tZ(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Np("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await XQ(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Rs(e)||this._popupRedirectResolver;rt(t,this,"argument-error"),this.redirectPersistenceManager=await id.create(this,[Rs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(rt(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&kQ(`Error while retrieving App Check token: ${e.error}`),e?.token}}function vl(n){return an(n)}class _k{constructor(e){this.auth=e,this.observer=null,this.addObserver=U$(t=>this.observer=t)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let cy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rZ(n){cy=n}function BV(n){return cy.loadJS(n)}function iZ(){return cy.recaptchaEnterpriseScript}function aZ(){return cy.gapiScript}function sZ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class oZ{constructor(){this.enterprise=new lZ}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class lZ{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const cZ="recaptcha-enterprise",UV="NO_RECAPTCHA";class uZ{constructor(e){this.type=cZ,this.auth=vl(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{UQ(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new BQ(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;mk(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(UV)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oZ().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!t&&mk(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=iZ();u.length!==0&&(u+=c),BV(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function wk(n,e,t,r=!1,i=!1){const a=new uZ(n);let o;if(i)o=UV;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function dv(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await wk(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await wk(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(a)})}function dZ(n,e){const t=IE(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(ol(a,e??{}))return i;ya(i,"already-initialized")}return t.initialize({options:e})}function fZ(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Rs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function hZ(n,e,t){const r=vl(n);rt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=FV(e),{host:o,port:c}=pZ(e),u=c===null?"":`:${c}`,d={url:`${a}//${o}${u}/`},h=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){rt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),rt(ol(d,r.config.emulator)&&ol(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Fd(o)?(X4(`${a}//${o}${u}`),W4("Auth",!0)):gZ()}function FV(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function pZ(n){const e=FV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Ek(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:Ek(o)}}}function Ek(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function gZ(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class IS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Is("not implemented")}_getIdTokenResponse(e){return Is("not implemented")}_linkToIdToken(e,t){return Is("not implemented")}_getReauthenticationResolver(e){return Is("not implemented")}}async function mZ(n,e){return as(n,"POST","/v1/accounts:signUp",e)}async function vZ(n,e){return Wp(n,"POST","/v1/accounts:signInWithPassword",Ws(n,e))}async function GV(n,e){return as(n,"POST","/v1/accounts:sendOobCode",Ws(n,e))}async function yZ(n,e){return GV(n,e)}async function bZ(n,e){return GV(n,e)}async function xZ(n,e){return Wp(n,"POST","/v1/accounts:signInWithEmailLink",Ws(n,e))}async function _Z(n,e){return Wp(n,"POST","/v1/accounts:signInWithEmailLink",Ws(n,e))}class fp extends IS{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new fp(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new fp(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dv(e,t,"signInWithPassword",vZ);case"emailLink":return xZ(e,{email:this._email,oobCode:this._password});default:ya(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dv(e,r,"signUpPassword",mZ);case"emailLink":return _Z(e,{idToken:t,email:this._email,oobCode:this._password});default:ya(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ad(n,e){return Wp(n,"POST","/v1/accounts:signInWithIdp",Ws(n,e))}const wZ="http://localhost";class Nc extends IS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Nc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ya("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const o=new Nc(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return ad(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ad(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ad(e,t)}buildRequest(){const e={requestUri:wZ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mp(t)}return e}}function EZ(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SZ(n){const e=oh(lh(n)).link,t=e?oh(lh(e)).deep_link_id:null,r=oh(lh(n)).deep_link_id;return(r?oh(lh(r)).link:null)||r||t||e||n}class RS{constructor(e){const t=oh(lh(e)),r=t.apiKey??null,i=t.oobCode??null,a=EZ(t.mode??null);rt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=SZ(e);try{return new RS(t)}catch{return null}}}class Lc{constructor(){this.providerId=Lc.PROVIDER_ID}static credential(e,t){return fp._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=RS.parseLink(t);return rt(r,"argument-error"),fp._fromEmailAndCode(e,r.code,r.tenantId)}}Lc.PROVIDER_ID="password";Lc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class qV{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Qp extends qV{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Bo extends Qp{constructor(){super("facebook.com")}static credential(e){return Nc._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bo.credentialFromTaggedObject(e)}static credentialFromError(e){return Bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bo.credential(e.oauthAccessToken)}catch{return null}}}Bo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bo.PROVIDER_ID="facebook.com";class Uo extends Qp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Nc._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Uo.credentialFromTaggedObject(e)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Uo.credential(t,r)}catch{return null}}}Uo.GOOGLE_SIGN_IN_METHOD="google.com";Uo.PROVIDER_ID="google.com";class Fo extends Qp{constructor(){super("github.com")}static credential(e){return Nc._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fo.credential(e.oauthAccessToken)}catch{return null}}}Fo.GITHUB_SIGN_IN_METHOD="github.com";Fo.PROVIDER_ID="github.com";class Go extends Qp{constructor(){super("twitter.com")}static credential(e,t){return Nc._fromParams({providerId:Go.PROVIDER_ID,signInMethod:Go.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Go.credentialFromTaggedObject(e)}static credentialFromError(e){return Go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Go.credential(t,r)}catch{return null}}}Go.TWITTER_SIGN_IN_METHOD="twitter.com";Go.PROVIDER_ID="twitter.com";async function TZ(n,e){return Wp(n,"POST","/v1/accounts:signUp",Ws(n,e))}class Mc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await ua._fromIdTokenResponse(e,r,i),o=Sk(r);return new Mc({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Sk(r);return new Mc({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Sk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class fv extends $s{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,fv.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new fv(e,t,r,i)}}function HV(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?fv._fromErrorAndOperation(n,a,e,r):a})}async function AZ(n,e,t=!1){const r=await Dd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Mc._forOperation(n,"link",r)}async function $V(n,e,t=!1){const{auth:r}=n;if(Bi(r.app))return Promise.reject(Os(r));const i="reauthenticate";try{const a=await Dd(n,HV(r,i,e,n),t);rt(a.idToken,r,"internal-error");const o=AS(a.idToken);rt(o,r,"internal-error");const{sub:c}=o;return rt(n.uid===c,r,"user-mismatch"),Mc._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&ya(r,"user-mismatch"),a}}async function YV(n,e,t=!1){if(Bi(n.app))return Promise.reject(Os(n));const r="signIn",i=await HV(n,r,e),a=await Mc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function CZ(n,e){return YV(vl(n),e)}async function IZ(n,e){return $V(an(n),e)}async function KV(n){const e=vl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function RZ(n,e,t){const r=vl(n);await dv(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",bZ)}async function DZ(n,e,t){if(Bi(n.app))return Promise.reject(Os(n));const r=vl(n),o=await dv(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",TZ).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&KV(n),u}),c=await Mc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function kZ(n,e,t){return Bi(n.app)?Promise.reject(Os(n)):CZ(an(n),Lc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&KV(n),r})}async function Tk(n,e){const t=an(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:a}=await yZ(t.auth,i);a!==n.email&&await n.reload()}async function NZ(n,e){return as(n,"POST","/v1/accounts:update",e)}async function MZ(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=an(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Dd(r,NZ(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function PZ(n,e,t,r){return an(n).onIdTokenChanged(e,t,r)}function OZ(n,e,t){return an(n).beforeAuthStateChanged(e,t)}function VZ(n,e,t,r){return an(n).onAuthStateChanged(e,t,r)}function Ak(n){return an(n).signOut()}async function jZ(n){return an(n).delete()}const hv="__sak";class XV{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hv,"1"),this.storage.removeItem(hv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const zZ=1e3,LZ=10;class WV extends XV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);QQ()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,LZ):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},zZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}WV.type="LOCAL";const BZ=WV;class QV extends XV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}QV.type="SESSION";const ZV=QV;function UZ(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class uy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new uy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(t.origin,a)),u=await UZ(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uy.receivers=[];function DS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class FZ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=DS("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(m.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Wa(){return window}function GZ(n){Wa().location.href=n}function JV(){return typeof Wa().WorkerGlobalScope<"u"&&typeof Wa().importScripts=="function"}async function qZ(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HZ(){return navigator?.serviceWorker?.controller||null}function $Z(){return JV()?self:null}const ej="firebaseLocalStorageDb",YZ=1,pv="firebaseLocalStorage",tj="fbase_key";class Zp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function dy(n,e){return n.transaction([pv],e?"readwrite":"readonly").objectStore(pv)}function KZ(){const n=indexedDB.deleteDatabase(ej);return new Zp(n).toPromise()}function Y_(){const n=indexedDB.open(ej,YZ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(pv,{keyPath:tj})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(pv)?e(r):(r.close(),await KZ(),e(await Y_()))})})}async function Ck(n,e,t){const r=dy(n,!0).put({[tj]:e,value:t});return new Zp(r).toPromise()}async function XZ(n,e){const t=dy(n,!1).get(e),r=await new Zp(t).toPromise();return r===void 0?null:r.value}function Ik(n,e){const t=dy(n,!0).delete(e);return new Zp(t).toPromise()}const WZ=800,QZ=3;class nj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Y_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>QZ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uy._getInstance($Z()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await qZ(),!this.activeServiceWorker)return;this.sender=new FZ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HZ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Y_();return await Ck(e,hv,"1"),await Ik(e,hv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ck(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>XZ(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ik(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=dy(i,!1).getAll();return new Zp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nj.type="LOCAL";const ZZ=nj;new Xp(3e4,6e4);function JZ(n,e){return e?Rs(e):(rt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class kS extends IS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ad(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ad(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ad(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eJ(n){return YV(n.auth,new kS(n),n.bypassAuthState)}function tJ(n){const{auth:e,user:t}=n;return rt(t,e,"internal-error"),$V(t,new kS(n),n.bypassAuthState)}async function nJ(n){const{auth:e,user:t}=n;return rt(t,e,"internal-error"),AZ(t,new kS(n),n.bypassAuthState)}class rj{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eJ;case"linkViaPopup":case"linkViaRedirect":return nJ;case"reauthViaPopup":case"reauthViaRedirect":return tJ;default:ya(this.auth,"internal-error")}}resolve(e){qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rJ=new Xp(2e3,1e4);class Wu extends rj{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Wu.currentPopupAction&&Wu.currentPopupAction.cancel(),Wu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return rt(e,this.auth,"internal-error"),e}async onExecution(){qs(this.filter.length===1,"Popup operations only handle one event");const e=DS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Xa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rJ.get())};e()}}Wu.currentPopupAction=null;const iJ="pendingRedirect",b0=new Map;class aJ extends rj{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=b0.get(this.auth._key());if(!e){try{const r=await sJ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}b0.set(this.auth._key(),e)}return this.bypassAuthState||b0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sJ(n,e){const t=cJ(e),r=lJ(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function oJ(n,e){b0.set(n._key(),e)}function lJ(n){return Rs(n._redirectPersistence)}function cJ(n){return y0(iJ,n.config.apiKey,n.name)}async function uJ(n,e,t=!1){if(Bi(n.app))return Promise.reject(Os(n));const r=vl(n),i=JZ(r,e),o=await new aJ(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const dJ=600*1e3;class fJ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hJ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ij(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Xa(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rk(e))}saveEventToCache(e){this.cachedEventUids.add(Rk(e)),this.lastProcessedEventTime=Date.now()}}function Rk(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ij({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function hJ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ij(n);default:return!1}}async function pJ(n,e={}){return as(n,"GET","/v1/projects",e)}const gJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mJ=/^https?/;async function vJ(n){if(n.config.emulator)return;const{authorizedDomains:e}=await pJ(n);for(const t of e)try{if(yJ(t))return}catch{}ya(n,"unauthorized-domain")}function yJ(n){const e=H_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!mJ.test(t))return!1;if(gJ.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const bJ=new Xp(3e4,6e4);function Dk(){const n=Wa().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function xJ(n){return new Promise((e,t)=>{function r(){Dk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dk(),t(Xa(n,"network-request-failed"))},timeout:bJ.get()})}if(Wa().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Wa().gapi?.load)r();else{const i=sZ("iframefcb");return Wa()[i]=()=>{gapi.load?r():t(Xa(n,"network-request-failed"))},BV(`${aZ()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw x0=null,e})}let x0=null;function _J(n){return x0=x0||xJ(n),x0}const wJ=new Xp(5e3,15e3),EJ="__/auth/iframe",SJ="emulator/auth/iframe",TJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CJ(n){const e=n.config;rt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?TS(e,SJ):`https://${n.config.authDomain}/${EJ}`,r={apiKey:e.apiKey,appName:n.name,v:Gd},i=AJ.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Mp(r).slice(1)}`}async function IJ(n){const e=await _J(n),t=Wa().gapi;return rt(t,n,"internal-error"),e.open({where:document.body,url:CJ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TJ,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Xa(n,"network-request-failed"),c=Wa().setTimeout(()=>{a(o)},wJ.get());function u(){Wa().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}const RJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DJ=500,kJ=600,NJ="_blank",MJ="http://localhost";class kk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PJ(n,e,t,r=DJ,i=kJ){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...RJ,width:r.toString(),height:i.toString(),top:a,left:o},d=or().toLowerCase();t&&(c=MV(d)?NJ:t),kV(d)&&(e=e||MJ,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[x,_])=>`${m}${x}=${_},`,"");if(WQ(d)&&c!=="_self")return OJ(e||"",c),new kk(null);const p=window.open(e||"",c,h);rt(p,n,"popup-blocked");try{p.focus()}catch{}return new kk(p)}function OJ(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const VJ="__/auth/handler",jJ="emulator/auth/handler",zJ=encodeURIComponent("fac");async function Nk(n,e,t,r,i,a){rt(n.config.authDomain,n,"auth-domain-config-required"),rt(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Gd,eventId:i};if(e instanceof qV){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",B$(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof Qp){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await n._getAppCheckToken(),d=u?`#${zJ}=${encodeURIComponent(u)}`:"";return`${LJ(n)}?${Mp(c).slice(1)}${d}`}function LJ({config:n}){return n.emulator?TS(n,jJ):`https://${n.authDomain}/${VJ}`}const ox="webStorageSupport";class BJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZV,this._completeRedirectFn=uJ,this._overrideRedirectResult=oJ}async _openPopup(e,t,r,i){qs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await Nk(e,t,r,H_(),i);return PJ(e,a,DS())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await Nk(e,t,r,H_(),i);return GZ(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(qs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await IJ(e),r=new fJ(e);return t.register("authEvent",i=>(rt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ox,{type:ox},i=>{const a=i?.[0]?.[ox];a!==void 0&&t(!!a),ya(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vJ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zV()||NV()||CS()}}const UJ=BJ;var Mk="@firebase/auth",Pk="1.11.1";class FJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function GJ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qJ(n){md(new _c("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;rt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LV(n)},d=new nZ(r,i,a,u);return fZ(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),md(new _c("auth-internal",e=>{const t=vl(e.getProvider("auth").getImmediate());return(r=>new FJ(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zo(Mk,Pk,GJ(n)),Zo(Mk,Pk,"esm2020")}const HJ=300,$J=K4("authIdTokenMaxAge")||HJ;let Ok=null;const YJ=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>$J)return;const i=t?.token;Ok!==i&&(Ok=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function KJ(n=iO()){const e=IE(n,"auth");if(e.isInitialized())return e.getImmediate();const t=dZ(n,{popupRedirectResolver:UJ,persistence:[ZZ,BZ,ZV]}),r=K4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=YJ(a.toString());OZ(t,o,()=>o(t.currentUser)),PZ(t,c=>o(c))}}const i=$4("auth");return i&&hZ(t,`http://${i}`),t}function XJ(){return document.getElementsByTagName("head")?.[0]??document}rZ({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Xa("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",XJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qJ("Browser");const WJ={apiKey:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:d7a8169fd53f437e42aba9"},aj=rO(WJ),Vo=KJ(aj),We=pQ(aj);gQ(We).catch(n=>{n.code==="failed-precondition"?console.warn(" Offline persistence failed: Multiple tabs open"):n.code==="unimplemented"?console.warn(" Offline persistence not available in this browser"):console.error(" Failed to enable offline persistence:",n)});const sj=n=>n?n instanceof Date?n:typeof n=="string"?new Date(n):typeof n=="number"?new Date(n):n?.toDate&&typeof n.toDate=="function"?n.toDate():new Date:new Date,hn=n=>sj(n).toISOString(),QJ=n=>{const e=sj(n);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},ZJ=n=>{const e=n.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},NS=n=>{const e=n;let t=0;typeof e.amount=="number"?t=e.amount:typeof e.amount=="string"&&(t=parseFloat(e.amount)),isNaN(t)&&(t=0);const r=hn(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:t,date:r,month:e.month||QJ(r),description:e.description||"",merchant:e.merchant||void 0,type:ZJ(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}};class cc{static instance;static getInstance(){return cc.instance||(cc.instance=new cc),cc.instance}async restoreUserData(e,t){try{console.log(" BudgetService.restoreUserData: STARTING RESTORE for user:",e),await this.deleteAllUserData(e);const r=[{name:"envelopes",data:t.envelopes||[]},{name:"transactions",data:t.transactions||[]},{name:"incomeSources",data:t.incomeSources?Object.values(t.incomeSources).flat():[]},{name:"envelopeAllocations",data:t.allocations?Object.values(t.allocations).flat():[]},{name:"appSettings",data:t.appSettings?[t.appSettings]:[]}],i=[];for(const{name:o,data:c}of r)if(Array.isArray(c))for(const u of c){if(!u.id)continue;const d={...u,userId:e},h=u.id,p=vt(We,"users",e,o,h);i.push({ref:p,data:d})}console.log(` Prepared ${i.length} items for restoration.`);const a=450;for(let o=0;o<i.length;o+=a){const c=CQ(We);i.slice(o,o+a).forEach(d=>{c.set(d.ref,d.data)}),console.log(` Committing batch ${Math.floor(o/a)+1}/${Math.ceil(i.length/a)}...`),await c.commit()}console.log(" Restore completed successfully.")}catch(r){throw console.error(" BudgetService.restoreUserData failed:",r),new Error(`Failed to restore user data: ${r instanceof Error?r.message:"Unknown error"}`)}}async getEnvelopes(e){try{console.log(" BudgetService.getEnvelopes called for user:",e);const t=vi(We,"users",e,"envelopes"),a=(await Cs(t)).docs.map((o,c)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??c})).sort((o,c)=>{const u=o.orderIndex??0,d=c.orderIndex??0;return u-d});return console.log(" Fetched envelopes:",a.length),a}catch(t){throw console.error(" BudgetService.getEnvelopes failed:",t),new Error(`Failed to fetch envelopes: ${t instanceof Error?t.message:"Unknown error"}`)}}async getTransactions(e){try{console.log(" BudgetService.getTransactions: Fetching for user",e);const t=vi(We,"users",e,"transactions"),r=ha(t,Rd("date","desc")),a=(await Cs(r)).docs.map(o=>{const c={id:o.id,...o.data()};return NS(c)});return console.log(` Fetched ${a.length} transactions`),a}catch(t){throw console.error(" BudgetService.getTransactions failed:",t),new Error(`Failed to fetch transactions: ${t instanceof Error?t.message:"Unknown error"}`)}}async createEnvelope(e){try{console.log(" BudgetService.createEnvelope called for user:",e.userId);const t=vi(We,"users",e.userId,"envelopes"),r=vt(t),i=tt.now(),a={...e,createdAt:i,lastUpdated:i};Li(r,a).catch(c=>console.error("Create env failed",c));const o={...e,id:r.id,createdAt:hn(i),lastUpdated:hn(i)};return console.log(" Created envelope (optimistic):",o.id),o}catch(t){throw console.error(" BudgetService.createEnvelope failed:",t),new Error(`Failed to create envelope: ${t instanceof Error?t.message:"Unknown error"}`)}}async updateEnvelope(e,t){try{console.log(" BudgetService.updateEnvelope called for envelope:",t.id);const r=vt(We,"users",e,"envelopes",t.id);Li(r,{...t,lastUpdated:tt.now()},{merge:!0}).catch(i=>console.error("Update env failed",i)),console.log(" Updated envelope (optimistic):",t.id)}catch(r){throw console.error(" BudgetService.updateEnvelope failed:",r),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,t){try{console.log(" BudgetService.deleteEnvelope called for envelope:",t);const r=vt(We,"users",e,"envelopes",t);za(r).catch(i=>console.error("Delete env failed",i)),console.log(" Deleted envelope (optimistic):",t)}catch(r){throw console.error(" BudgetService.deleteEnvelope failed:",r),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,t){try{console.log(" BudgetService.reorderEnvelopes called for user:",e);const r=t.map(i=>{const a=vt(We,"users",e,"envelopes",i.id);return Li(a,{orderIndex:i.orderIndex,lastUpdated:tt.now()},{merge:!0})});Promise.all(r).catch(i=>console.error("Reorder env failed",i)),console.log(" Reordered envelopes (optimistic)")}catch(r){throw console.error(" BudgetService.reorderEnvelopes failed:",r),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{console.log(" BudgetService.createTransaction called for user:",e.userId);const t=vi(We,"users",e.userId,"transactions"),r=vt(t),i=tt.now(),a={...e,createdAt:i};Li(r,a).catch(c=>console.error("Create tx failed",c));const o={...e,id:r.id};return console.log(" Created transaction (optimistic):",o.id),o}catch(t){throw console.error(" BudgetService.createTransaction failed:",t),new Error(`Failed to create transaction: ${t instanceof Error?t.message:"Unknown error"}`)}}async updateTransaction(e,t){try{console.log(" BudgetService.updateTransaction called for transaction:",t.id);const r=Object.fromEntries(Object.entries(t).filter(([a,o])=>o!==void 0)),i=vt(We,"users",e,"transactions",t.id);Li(i,r,{merge:!0}).catch(a=>console.error("Update tx failed",a)),console.log(" Updated transaction (optimistic):",t.id)}catch(r){throw console.error(" BudgetService.updateTransaction failed:",r),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,t){try{console.log(" BudgetService.deleteTransaction called for transaction:",t);const r=vt(We,"users",e,"transactions",t);za(r).catch(i=>console.error("Delete tx failed",i)),console.log(" Deleted transaction (optimistic):",t)}catch(r){throw console.error(" BudgetService.deleteTransaction failed:",r),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async createIncomeSource(e){try{console.log(" BudgetService.createIncomeSource (Embedded) called for user:",e.userId);const t=vt(We,"users",e.userId,"monthlyBudgets",e.month),r=tt.now(),i=`inc_${r.toMillis()}_${Math.random().toString(36).substring(2,9)}`,a={...e,id:i,amount:Number(e.amount),createdAt:r,updatedAt:r};Sr(t,{incomeSources:wV(a),updatedAt:r}).catch(c=>{c.code==="not-found"?Li(t,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[a],allocations:{},totalIncome:0,availableToBudget:0}).catch(u=>console.error("Failed to create monthly budget doc",u)):console.error("Create income failed",c)});const o={...e,id:i,amount:Number(e.amount),createdAt:hn(r),updatedAt:hn(r)};return console.log(" Created income source (optimistic/embedded):",o.id),o}catch(t){throw console.error(" BudgetService.createIncomeSource failed:",t),new Error(`Failed to create income source: ${t instanceof Error?t.message:"Unknown error"}`)}}async updateIncomeSource(e,t,r,i){try{console.log(" BudgetService.updateIncomeSource (Embedded) called for source:",t);const a=vt(We,"users",e,"monthlyBudgets",r);lc(a).then(o=>{if(!o.exists())return;const d=(o.data().incomeSources||[]).map(h=>{if(h.id===t){const p={...h,...i,updatedAt:tt.now()};return i.amount!==void 0&&(p.amount=Number(i.amount)),p}return h});Sr(a,{incomeSources:d,updatedAt:tt.now()})}).catch(o=>console.error("Update income failed",o)),console.log(" Updated income source (optimistic/embedded):",t)}catch(a){throw console.error(" BudgetService.updateIncomeSource failed:",a),a}}async deleteIncomeSource(e,t,r){try{console.log(" BudgetService.deleteIncomeSource (Embedded) called for source:",t);const i=vt(We,"users",e,"monthlyBudgets",r);lc(i).then(a=>{if(!a.exists())return;const u=(a.data().incomeSources||[]).filter(d=>d.id!==t);Sr(i,{incomeSources:u,updatedAt:tt.now()})}).catch(a=>console.error("Delete income failed",a)),console.log(" Deleted income source (optimistic/embedded):",t)}catch(i){throw console.error(" BudgetService.deleteIncomeSource failed:",i),new Error(`Failed to delete income source: ${i instanceof Error?i.message:"Unknown error"}`)}}async createEnvelopeAllocation(e){try{console.log(" BudgetService.createEnvelopeAllocation (Embedded) called for user:",e.userId);const t=vt(We,"users",e.userId,"monthlyBudgets",e.month),r=tt.now(),i={[`allocations.${e.envelopeId}`]:Number(e.budgetedAmount),updatedAt:r};Sr(t,i).catch(o=>{o.code==="not-found"?Li(t,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[],allocations:{[e.envelopeId]:Number(e.budgetedAmount)},totalIncome:0,availableToBudget:0}).catch(c=>console.error("Failed to create monthly budget doc",c)):console.error("Create allocation failed",o)});const a={...e,id:e.envelopeId,createdAt:hn(r),updatedAt:hn(r)};return console.log(" Created allocation (optimistic/embedded):",a.id),a}catch(t){throw console.error(" BudgetService.createEnvelopeAllocation failed:",t),new Error(`Failed to create envelope allocation: ${t instanceof Error?t.message:"Unknown error"}`)}}async updateEnvelopeAllocation(e,t,r,i){try{console.log(" BudgetService.updateEnvelopeAllocation (Embedded) called for envelope:",t);const a=vt(We,"users",e,"monthlyBudgets",r),o={updatedAt:tt.now()};i.budgetedAmount!==void 0&&(o[`allocations.${t}`]=Number(i.budgetedAmount)),Sr(a,o).catch(c=>console.error("Update allocation failed",c)),console.log(" Updated allocation (optimistic/embedded):",t)}catch(a){throw console.error(" BudgetService.updateEnvelopeAllocation failed:",a),new Error(`Failed to update envelope allocation: ${a instanceof Error?a.message:"Unknown error"}`)}}async deleteEnvelopeAllocation(e,t,r){try{console.log(" BudgetService.deleteEnvelopeAllocation (Embedded) called for envelope:",t);const i=vt(We,"users",e,"monthlyBudgets",r);Sr(i,{[`allocations.${t}`]:_V(),updatedAt:tt.now()}).catch(a=>console.error("Delete allocation failed",a)),console.log(" Deleted allocation (optimistic/embedded):",t)}catch(i){throw console.error(" BudgetService.deleteEnvelopeAllocation failed:",i),new Error(`Failed to delete envelope allocation: ${i instanceof Error?i.message:"Unknown error"}`)}}async getMonthData(e,t){try{console.log(` BudgetService.getMonthData (Embedded): Fetching for user ${e}, month ${t}`);const r=vt(We,"users",e,"monthlyBudgets",t),i=await lc(r);if(!i.exists())return console.log(` No budget data found for ${t}, returning empty defaults.`),{incomeSources:[],allocations:[]};const a=i.data(),o=(a.incomeSources||[]).map(d=>({...d,amount:Number(d.amount),createdAt:d.createdAt?.toDate?d.createdAt.toDate().toISOString():d.createdAt||new Date().toISOString(),updatedAt:d.updatedAt?.toDate?d.updatedAt.toDate().toISOString():d.updatedAt||new Date().toISOString()})).sort((d,h)=>new Date(d.createdAt).getTime()-new Date(h.createdAt).getTime()),c=a.allocations||{},u=Object.entries(c).map(([d,h])=>({id:d,userId:e,envelopeId:d,month:t,budgetedAmount:Number(h),createdAt:a.createdAt?.toDate?a.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((d,h)=>new Date(d.createdAt).getTime()-new Date(h.createdAt).getTime());return console.log(` Fetched ${o.length} income sources and ${u.length} allocations for ${t}`),{incomeSources:o,allocations:u}}catch(r){throw console.error(" BudgetService.getMonthData failed:",r),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{console.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const t={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(p=>p.id));console.log(` Found ${r.length} existing envelopes`);const a=vi(We,"users",e,"envelopeAllocations"),o=await Cs(a),c=[],u=new Set;for(const p of o.docs){const m=p.data();u.add(m.month),i.has(m.envelopeId)||(c.push(p.id),console.log(` Found orphaned allocation: ${p.id} for envelope ${m.envelopeId} in month ${m.month}`))}if(c.length>0){const p=c.map(m=>za(vt(We,"users",e,"envelopeAllocations",m)));await Promise.all(p),t.orphanedAllocationsDeleted=c.length,t.details.deletedAllocationIds=c,console.log(` Deleted ${c.length} orphaned allocations`)}const d=await this.getTransactions(e),h=[];for(const p of d)i.has(p.envelopeId)||(h.push(p.id),console.log(` Found orphaned transaction: ${p.id} for envelope ${p.envelopeId}`));if(h.length>0){const p=h.map(m=>za(vt(We,"users",e,"transactions",m)));await Promise.all(p),t.orphanedTransactionsDeleted=h.length,t.details.deletedTransactionIds=h,console.log(` Deleted ${h.length} orphaned transactions`)}return t.details.monthsProcessed=Array.from(u),console.log(" Cleanup completed:",{orphanedAllocationsDeleted:t.orphanedAllocationsDeleted,orphanedTransactionsDeleted:t.orphanedTransactionsDeleted,monthsProcessed:t.details.monthsProcessed.length}),t}catch(t){throw console.error(" BudgetService.cleanupOrphanedData failed:",t),new Error(`Failed to cleanup orphaned data: ${t instanceof Error?t.message:"Unknown error"}`)}}subscribeToIncomeSources(e,t,r){const i=ha(vi(We,"users",e,"incomeSources"),q_("month","==",t));return kc(i,a=>{const o=a.docs.map(c=>({id:c.id,...c.data(),createdAt:hn(c.data().createdAt),updatedAt:hn(c.data().updatedAt)}));r(o)})}subscribeToEnvelopeAllocations(e,t,r){const i=ha(vi(We,"users",e,"envelopeAllocations"),q_("month","==",t));return kc(i,a=>{const o=a.docs.map(c=>({id:c.id,...c.data(),createdAt:hn(c.data().createdAt),updatedAt:hn(c.data().updatedAt)}));r(o)})}async deleteAllUserData(e){try{console.log(" BudgetService.deleteAllUserData: STARTING DELETION for user:",e);const t=["envelopes","transactions","incomeSources","envelopeAllocations","monthlyBudgets","appSettings"];for(const r of t){console.log(` Deleting collection: ${r}...`);const i=vi(We,"users",e,r),a=await Cs(i);if(a.empty){console.log("   (Empty collection)");continue}const o=a.docs.map(c=>za(c.ref));await Promise.all(o),console.log(`    Deleted ${a.size} documents from ${r}`)}console.log(" All user data deleted successfully.")}catch(t){throw console.error(" BudgetService.deleteAllUserData failed:",t),new Error(`Failed to delete all user data: ${t instanceof Error?t.message:"Unknown error"}`)}}}const hp=cc.getInstance(),lx=n=>({id:n.uid,username:n.email||n.uid,displayName:n.displayName||n.email?.split("@")[0]||"User",email:n.email||void 0}),Yi=TE()(U4(n=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,t)=>{n({isLoading:!0,loginError:null});try{const i=(await kZ(Vo,e,t)).user;if(!i.emailVerified)return await Ak(Vo),n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${i.email} not verified`),!1;const a=lx(i);return n({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${a.email}`),!0}catch(r){console.error("Login error:",r),console.error("Error code:",r.code),console.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,t,r)=>{n({isLoading:!0,loginError:null});try{const a=(await DZ(Vo,e,t)).user;await MZ(a,{displayName:r}),await Tk(a);const o=lx(a);return n({currentUser:o,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${o.email}, verification email sent`),!0}catch(i){console.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await Ak(Vo),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{n({loginError:null})},sendPasswordReset:async e=>{n({isLoading:!0,loginError:null});try{return await RZ(Vo,e),n({isLoading:!1}),!0}catch(t){console.error("Password reset error:",t);let r="Failed to send password reset email. Please try again.";switch(t.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return n({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=Vo.currentUser;if(!e)return n({loginError:"No user is currently signed in."}),!1;n({isLoading:!0,loginError:null});try{return await Tk(e),n({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(t){console.error("Email verification error:",t);let r="Failed to send verification email. Please try again.";switch(t.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return n({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=Yi.getState();if(e.lastVerificationEmailSent){const t=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(t<r){const i=Math.ceil((r-t)/1e3);return n({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},deleteAccount:async e=>{const t=Vo.currentUser;if(!t||!t.email)return n({loginError:"No user is currently signed in."}),!1;n({isLoading:!0,loginError:null});try{const r=Lc.credential(t.email,e);return await IZ(t,r),await jZ(t),n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${t.email}`),!0}catch(r){console.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return n({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>Yi.getState().isInitialized?()=>{}:(n({isInitialized:!1}),VZ(Vo,r=>{const i=Date.now(),a=Yi.getState(),o=r?lx(r):null,c=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,d=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&c&&!o,h=r?r.emailVerified:!0,p=r&&h||!!d,m=r?o:d?a.currentUser:null;n({currentUser:m,isAuthenticated:p,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&h?i:a.lastAuthTime}),m?console.log(` Auth state: User is signed in (${m.email})`,d?"(offline grace period)":h?"(verified)":"(unverified)"):console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:n=>({isAuthenticated:n.isAuthenticated,currentUser:n.currentUser,lastAuthTime:n.lastAuthTime,offlineGracePeriod:n.offlineGracePeriod,lastVerificationEmailSent:n.lastVerificationEmailSent})})),Pn=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:Yi},Symbol.toStringTag,{value:"Module"})),cx=n=>vi(We,"users",n,"transactions"),JJ={subscribeToTransactions:(n,e)=>{const t=ha(cx(n),Rd("date","desc"));return kc(t,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllTransactions:async n=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${n}`);const e=ha(cx(n),Rd("date","desc")),r=(await Cs(e)).docs.map(i=>{const a={id:i.id,...i.data()};return NS(a)});return console.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async n=>{const{userId:e,id:t,...r}=n;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),console.log(` Original transaction had temp ID: ${t}`);try{console.log(" About to call addDoc with:",r);const i=await ly(cx(e),r);console.log(" addDoc succeeded, docRef:",i),console.log(` Document ID: ${i.id}`),console.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return console.log(" Final result object:",a),a}catch(i){throw console.error(" addDoc failed:",i),console.error("Error message:",i.message),i}},updateTransaction:async(n,e,t)=>{const r=vt(We,"users",n,"transactions",e);return await Sr(r,t)},deleteTransaction:async(n,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${n}`);try{const t=vt(We,"users",n,"transactions",e);console.log(` Deleting document at path: ${t.path}`),await za(t),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(t){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,t),console.error("Error message:",t.message),t}}},ux=n=>vi(We,"users",n,"envelopes"),eee={subscribeToEnvelopes:(n,e)=>{const t=ha(ux(n),Rd("orderIndex","asc"));return kc(t,i=>{const a=i.docs.map(o=>{const c=o.data();return{id:o.id,...c,createdAt:c.createdAt?.toDate?.()?c.createdAt.toDate().toISOString():c.createdAt,lastUpdated:c.lastUpdated?.toDate?.()?c.lastUpdated.toDate().toISOString():c.lastUpdated}});e(a)})},getAllEnvelopes:async n=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",n);const e=ux(n),i=(await Cs(e)).docs.map((a,o)=>{const c=a.data();return{id:a.id,...c,createdAt:c.createdAt?.toDate?.()?c.createdAt.toDate().toISOString():c.createdAt,lastUpdated:c.lastUpdated?.toDate?.()?c.lastUpdated.toDate().toISOString():c.lastUpdated,orderIndex:c.orderIndex??o}}).sort((a,o)=>{const c=a.orderIndex??0,u=o.orderIndex??0;return c-u});return console.log(" Fetched envelopes:",i.length),i}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async n=>{const{userId:e,id:t,...r}=n;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await ly(ux(e),r)).id,...r,userId:e}}catch(i){throw console.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(n,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const t=vt(We,"users",n,"envelopes",e.id);return await Li(t,e,{merge:!0})},updateBalance:async(n,e,t)=>{const r=vt(We,"users",n,"envelopes",e);return await Sr(r,{currentBalance:t,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(n,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${n}`);const t=vt(We,"users",n,"envelopes",e);await za(t),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},dx=n=>vi(We,"users",n,"distributionTemplates"),tee={subscribeToDistributionTemplates:(n,e)=>{const t=ha(dx(n),Rd("lastUsed","desc"));return kc(t,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllDistributionTemplates:async n=>{const e=ha(dx(n),Rd("lastUsed","desc"));return(await Cs(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async n=>{const{userId:e,id:t,...r}=n;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await ly(dx(e),r);console.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return console.log(" Final template result object:",a),a}catch(i){throw console.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(n,e)=>{const t=vt(We,"users",n,"distributionTemplates",e.id);return await Li(t,e,{merge:!0})},updateDistributionTemplate:async(n,e,t)=>{const r=vt(We,"users",n,"distributionTemplates",e);return await Sr(r,t)},deleteDistributionTemplate:async(n,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${n}`);const t=vt(We,"users",n,"distributionTemplates",e);await za(t),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},fx=n=>vi(We,"users",n,"appSettings"),nee={subscribeToAppSettings:(n,e)=>{const t=ha(fx(n),fk(1));return kc(t,i=>{if(i.empty){e(null);return}const a=i.docs.map(o=>({id:o.id,...o.data()}))[0];e(a)})},getAppSettings:async n=>{const e=ha(fx(n),fk(1)),t=await Cs(e);if(t.empty)return null;const r=t.docs[0];return{id:r.id,...r.data()}},createAppSettings:async n=>{const{userId:e,...t}=n;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,t);try{const r=await ly(fx(e),t);console.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...t,userId:e};return console.log(" Final settings result object:",i),i}catch(r){throw console.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(n,e)=>{const t=vt(We,"users",n,"appSettings",e.id);return await Li(t,e,{merge:!0})},updateAppSettings:async(n,e,t)=>{const r=vt(We,"users",n,"appSettings",e);return await Sr(r,t)},deleteAppSettings:async(n,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${n}`);const t=vt(We,"users",n,"appSettings",e);await za(t),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},ree=n=>NS(n),iee=n=>({id:n.id,name:n.name||"",currentBalance:n.currentBalance||0,lastUpdated:n.lastUpdated?.toDate?.()?n.lastUpdated.toDate().toISOString():n.lastUpdated,isActive:n.isActive??!0,orderIndex:n.orderIndex??0,userId:n.userId||void 0,createdAt:n.createdAt?.toDate?.()?n.createdAt.toDate().toISOString():n.createdAt,isPiggybank:n.isPiggybank,piggybankConfig:n.piggybankConfig}),Vk=(n,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const t=n.getState().currentMonth;console.log(" Current month for subscriptions:",t);const r=eee.subscribeToEnvelopes(e,d=>{console.log(" Real-time sync: Envelopes updated",d.length);const h=d.map(iee);n.setState({envelopes:h})}),i=JJ.subscribeToTransactions(e,d=>{console.log(" Real-time sync: Transactions updated",d.length);const h=d.map(ree);n.setState({transactions:h})}),a=tee.subscribeToDistributionTemplates(e,d=>{console.log(" Real-time sync: Templates updated from Firebase",d.length)}),o=nee.subscribeToAppSettings(e,d=>{console.log(" Real-time sync: Settings updated",d?"found":"null"),n.setState({appSettings:d})}),c=hp.subscribeToIncomeSources(e,t,d=>{console.log(" Real-time sync: Income sources updated",d.length);const h=n.getState();n.setState({incomeSources:{...h.incomeSources,[t]:d}})}),u=hp.subscribeToEnvelopeAllocations(e,t,d=>{console.log(" Real-time sync: Allocations updated",d.length);const h=n.getState();n.setState({allocations:{...h.allocations,[t]:d}})});window.__firebaseUnsubscribers={envelopes:r,transactions:i,templates:a,settings:o,incomeSources:c,allocations:u},console.log(" Real-time subscriptions active - cross-device sync enabled")},aee=n=>{const{useBudgetStore:e,useAuthStore:t,getCurrentUserId:r}=n;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),e.setState({isOnline:!0})}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),e.setState({isOnline:navigator.onLine});const i=t.getState();i.isAuthenticated&&i.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),Vk(e,r())),t.subscribe(o=>{if(o.isAuthenticated&&o.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),Vk(e,r());else if(!o.isAuthenticated&&!o.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const c=window.__firebaseUnsubscribers;c.envelopes&&c.envelopes(),c.transactions&&c.transactions(),c.templates&&c.templates(),c.settings&&c.settings(),c.incomeSources&&c.incomeSources(),c.allocations&&c.allocations(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let a=e.getState().currentMonth;e.subscribe(o=>{if(o.currentMonth!==a&&o.isAuthenticated){console.log(" Month changed from",a,"to",o.currentMonth),a=o.currentMonth;const c=r();if(c&&window.__firebaseUnsubscribers){const u=window.__firebaseUnsubscribers;u.incomeSources&&u.incomeSources(),u.allocations&&u.allocations(),console.log(" Unsubscribed from old month data"),u.incomeSources=hp.subscribeToIncomeSources(c,o.currentMonth,d=>{console.log(" Real-time sync: Income sources updated for new month");const h=e.getState();e.setState({incomeSources:{...h.incomeSources,[o.currentMonth]:d}})}),u.allocations=hp.subscribeToEnvelopeAllocations(c,o.currentMonth,d=>{console.log(" Real-time sync: Allocations updated for new month");const h=e.getState();e.setState({allocations:{...h.allocations,[o.currentMonth]:d}})}),console.log(" Subscribed to monthly data for new month:",o.currentMonth)}}})},see=()=>Yi.getState().currentUser?.id||"",On=cc.getInstance(),pr=TE()(m$(U4((n,e)=>({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isLoading:!1,error:null,fetchMonthData:async t=>{try{const i=(await wn(()=>Promise.resolve().then(()=>Pn),[]).then(u=>u.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping month data fetch");return}console.log(`Fetching month data for: ${t}`);const a=await On.getMonthData(i.id,t),o=e();n({incomeSources:{...o.incomeSources,[t]:a.incomeSources},allocations:{...o.allocations,[t]:a.allocations}}),console.log(` Fetched month data for ${t}`),(async()=>{const u=e(),d=u.allocations[t]||[],h=u.transactions.filter(m=>m.month===t);let p=0;for(const m of d){const x=u.envelopes.find(E=>E.id===m.envelopeId);if(x?.isPiggybank)continue;const _=h.find(E=>E.envelopeId===m.envelopeId&&(E.description==="Monthly Budget Allocation"||E.description==="Monthly Allocation"));_?_.amount!==m.budgetedAmount&&(console.log(` Repairing mismatch for envelope ${x?.name||m.envelopeId}: Alloc ${m.budgetedAmount} vs Tx ${_.amount}`),await u.updateTransaction({..._,amount:m.budgetedAmount}),p++):m.budgetedAmount>0&&(console.log(` Repairing missing transaction for envelope ${x?.name||m.envelopeId}`),await u.addTransaction({description:"Monthly Budget Allocation",amount:m.budgetedAmount,envelopeId:m.envelopeId,type:"Income",month:t,date:`${t}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),p++)}p>0&&console.log(` Repaired ${p} allocation discrepancies for ${t}`)})().catch(u=>console.error("Verification failed:",u))}catch(r){console.error(` Failed to fetch month data for ${t}:`,r)}},removeEnvelopeFromMonth:async(t,r)=>{try{n({isLoading:!0,error:null}),console.log(` Removing envelope ${t} from month ${r}`);const i=e(),a=i.allocations[r]?.find(c=>c.envelopeId===t);a?await e().deleteEnvelopeAllocation(a.id):console.log(` No allocation found for envelope ${t} in ${r}`);const o=i.transactions.filter(c=>c.envelopeId===t&&(c.month===r||c.date.startsWith(r)));o.length>0&&(console.log(` Deleting ${o.length} transactions for envelope ${t} in ${r}`),await Promise.all(o.map(c=>e().deleteTransaction(c.id)))),n({isLoading:!1}),console.log(` Removed envelope ${t} from month ${r}`)}catch(i){throw console.error(" removeEnvelopeFromMonth failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to remove envelope from month"}),i}},setMonth:async t=>{n({currentMonth:t});const r=e();(r.incomeSources[t]===void 0||r.allocations[t]===void 0)&&(console.log(`Month ${t} data missing in store, fetching...`),n({isLoading:!0}),await e().fetchMonthData(t),n({isLoading:!1}))},init:async()=>{console.log("BudgetStore initializing...");const t=e();try{n({isLoading:!0,error:null});const i=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping data fetch"),n({isLoading:!1});return}console.log(`Fetching data for user: ${i.id}, month: ${t.currentMonth}`);const[a,o,c]=await Promise.all([On.getEnvelopes(i.id),On.getTransactions(i.id),On.getMonthData(i.id,t.currentMonth)]);n({envelopes:a,transactions:o,incomeSources:{...t.incomeSources,[t.currentMonth]:c.incomeSources},allocations:{...t.allocations,[t.currentMonth]:c.allocations},isLoading:!1,error:null}),console.log(` BudgetStore initialized: ${a.length} envelopes, ${o.length} transactions, ${c.incomeSources.length} income sources, ${c.allocations.length} allocations`)}catch(r){console.error(" BudgetStore initialization failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},addEnvelope:async t=>{try{n({isLoading:!0,error:null});const i=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a={...t,userId:i.id},o=await On.createEnvelope(a);return n(c=>c.envelopes.some(d=>d.id===o.id)?{isLoading:!1}:{envelopes:[...c.envelopes,o],isLoading:!1}),console.log(" Added envelope:",o.id),o.id}catch(r){throw console.error(" addEnvelope failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async t=>{try{n({isLoading:!0,error:null});const i=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await On.updateEnvelope(i.id,t),n(a=>({envelopes:a.envelopes.map(o=>o.id===t.id?t:o),isLoading:!1})),console.log(" Updated envelope:",t.id)}catch(r){throw console.error(" updateEnvelope failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async t=>{try{n({isLoading:!0,error:null});const i=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await On.deleteEnvelope(i.id,t),n(a=>({envelopes:a.envelopes.filter(o=>o.id!==t),transactions:a.transactions.filter(o=>o.envelopeId!==t),isLoading:!1})),console.log(" Deleted envelope:",t)}catch(r){throw console.error(" deleteEnvelope failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async t=>{try{n({isLoading:!0,error:null});const r=e(),i=new Map;t.forEach((d,h)=>{i.set(d,h)});const a=r.envelopes.map(d=>{if(!i.has(d.id))return d;const h=i.get(d.id);return d.orderIndex===h?d:{...d,orderIndex:h}}),o=a.filter((d,h)=>d!==r.envelopes[h]);if(!o.length){n({isLoading:!1});return}const u=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!u)throw new Error("No authenticated user found");await On.reorderEnvelopes(u.id,o),n({envelopes:a,isLoading:!1}),console.log(" Reordered envelopes")}catch(r){throw console.error(" reorderEnvelopes failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},addTransaction:async t=>{try{n({isLoading:!0,error:null});const i=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(t.date),o=t.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,c={...t,userId:i.id,month:o},u=await On.createTransaction(c);n(d=>d.transactions.some(p=>p.id===u.id)?{isLoading:!1}:{transactions:[...d.transactions,u],isLoading:!1}),console.log(" Added transaction:",u.id)}catch(r){throw console.error(" addTransaction failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async t=>{try{n({isLoading:!0,error:null});const i=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(t.date),o=t.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,c={...t,month:o};await On.updateTransaction(i.id,c),n(u=>({transactions:u.transactions.map(d=>d.id===t.id?c:d),isLoading:!1})),console.log(" Updated transaction:",t.id)}catch(r){throw console.error(" updateTransaction failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async t=>{try{n({isLoading:!0,error:null});const i=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await On.deleteTransaction(i.id,t),n(a=>({transactions:a.transactions.filter(o=>o.id!==t),isLoading:!1})),console.log(" Deleted transaction:",t)}catch(r){throw console.error(" deleteTransaction failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async t=>{await e().updateTransaction(t)},transferFunds:async(t,r,i,a,o)=>{try{const c=o?typeof o=="string"?o:o.toISOString():new Date().toISOString(),u=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(d=>d.id===r)?.name||"envelope"}`,amount:i,envelopeId:t,date:c,type:"Expense",transferId:u,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(d=>d.id===t)?.name||"envelope"}`,amount:i,envelopeId:r,date:c,type:"Income",transferId:u,reconciled:!1}),console.log(" Transfer completed")}catch(c){throw console.error(" transferFunds failed:",c),c}},fetchData:async()=>{await e().init()},renameEnvelope:async(t,r)=>{try{n({isLoading:!0,error:null});const a=e().envelopes.find(d=>d.id===t);if(!a)throw new Error("Envelope not found");n(d=>({envelopes:d.envelopes.map(h=>h.id===t?{...h,name:r}:h),isLoading:!0}));const c=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!c)throw new Error("No authenticated user found");const u={...a,name:r};await On.updateEnvelope(c.id,u),n({isLoading:!1}),console.log(" Renamed envelope:",t)}catch(i){throw console.error(" renameEnvelope failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},getEnvelopeBalance:(t,r)=>{const i=e(),a=i.envelopes.find(o=>o.id===t);if(!a)return console.log(` getEnvelopeBalance: Envelope ${t} not found`),0;if(a.isPiggybank){const o=i.transactions.filter(p=>p.envelopeId===t),c=o.filter(p=>p.type==="Expense"),u=o.filter(p=>p.type==="Income"),d=c.reduce((p,m)=>p+(m.amount||0),0);return u.reduce((p,m)=>p+(m.amount||0),0)-d}if(r){const o=i.transactions.filter(p=>p.envelopeId===t&&p.month===r),c=o.filter(p=>p.type==="Expense"),u=o.filter(p=>p.type==="Income"),d=c.reduce((p,m)=>p+(m.amount||0),0);return u.reduce((p,m)=>p+(m.amount||0),0)-d}return console.warn(` getEnvelopeBalance: Month not provided for non-piggybank envelope ${t}. Returning 0.`),0},resetData:async()=>{console.log(" Resetting all data"),n({isLoading:!0});try{const r=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(i=>i.useAuthStore.getState())).currentUser;r?(console.log(" Deleting all data from Firestore for user:",r.id),await On.deleteAllUserData(r.id)):console.warn(" No user logged in, only clearing local state"),n({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null}),console.log(" Reset data complete")}catch(t){throw console.error(" resetData failed:",t),n({isLoading:!1,error:t instanceof Error?t.message:"Failed to reset data"}),t}},importData:async t=>{try{if(n({isLoading:!0,error:null}),!t||typeof t!="object")throw new Error("Invalid data format");const i=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("You must be logged in to restore data.");return console.log(" Starting Time Machine Restore for user:",i.id),await On.restoreUserData(i.id,t),console.log(" Reloading app state from cloud..."),await e().init(),n({isLoading:!1}),{success:!0,message:"Data restored successfully from backup."}}catch(r){return console.error(" importData failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},updateAppSettings:async t=>{try{n({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:t.theme??r.appSettings?.theme??"system",enableMoveableReorder:t.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,userId:t.userId??r.appSettings?.userId};n({appSettings:i,isLoading:!1}),console.log(" Updated app settings")}catch(r){throw console.error(" updateAppSettings failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;n({appSettings:{id:"default",theme:"system",enableMoveableReorder:!0}}),console.log(" Initialized app settings")}catch(t){throw console.error(" initializeAppSettings failed:",t),n({error:t instanceof Error?t.message:"Failed to initialize settings"}),t}},updatePiggybankContribution:async(t,r)=>{try{n({isLoading:!0,error:null}),console.log(" Updating piggybank contribution:",{envelopeId:t,newAmount:r});const a=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const o=e().envelopes.find(u=>u.id===t&&u.isPiggybank);if(!o)throw new Error("Piggybank not found");const c={...o,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:o.piggybankConfig?.targetAmount,color:o.piggybankConfig?.color,icon:o.piggybankConfig?.icon,paused:o.piggybankConfig?.paused??!1}};if(console.log(" Updating envelope in Firestore:",c),await On.updateEnvelope(a.id,c),console.log(" Envelope updated successfully"),n(u=>({envelopes:u.envelopes.map(d=>d.id===t?c:d),isLoading:!1})),!o.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(t,r),setTimeout(()=>{e().transactions.find(d=>d.envelopeId===t&&d.description==="Monthly Budget Allocation")||console.warn(" Monthly allocation transaction not found after update")},1e3)}catch(u){console.error(" Failed to update monthly budget allocation:",u)}console.log(" Piggybank contribution updated successfully")}catch(i){throw console.error(" updatePiggybankContribution failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}},addIncomeSource:async(t,r)=>{try{n({isLoading:!0,error:null});const a=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");console.log(" Adding income source:",{month:t,source:r});const o=await On.createIncomeSource({...r,userId:a.id,month:t});n(c=>{const u=c.incomeSources[t]||[];return u.some(h=>h.id===o.id)?{isLoading:!1}:{incomeSources:{...c.incomeSources,[t]:[...u,o]},isLoading:!1}}),console.log(" Added income source:",o.id)}catch(i){throw console.error(" addIncomeSource failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(t,r)=>{try{n({isLoading:!0,error:null}),console.log(" Updating income source:",{month:t,sourceId:r.id}),n(o=>({incomeSources:{...o.incomeSources,[t]:o.incomeSources[t]?.map(c=>c.id===r.id?{...r,updatedAt:new Date().toISOString()}:c)||[]},isLoading:!1}));const a=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!a)return;await On.updateIncomeSource(a.id,r.id,t,r),console.log(" Updated income source:",r.id)}catch(i){throw console.error(" updateIncomeSource failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(t,r)=>{try{n({isLoading:!0,error:null}),console.log(" Deleting income source:",{month:t,sourceId:r}),n(o=>({incomeSources:{...o.incomeSources,[t]:o.incomeSources[t]?.filter(c=>c.id!==r)||[]},isLoading:!1}));const a=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!a)return;await On.deleteIncomeSource(a.id,r,t),console.log(" Deleted income source:",r)}catch(i){throw console.error(" deleteIncomeSource failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async t=>{try{n({isLoading:!0,error:null});const i=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(_=>_.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");console.log(" Copying allocations from previous month:",t);const[a,o]=t.split("-").map(Number);let c=a,u=o-1;u<1&&(c=a-1,u=12);const d=`${c}-${String(u).padStart(2,"0")}`,h=e().incomeSources[d]||[];if(console.log(` Found ${h.length} income sources from ${d}`),h.length>0){for(const _ of h){const{id:E,...S}=_;await e().addIncomeSource(t,S)}console.log(` Copied ${h.length} income sources to ${t}`)}const p=e().allocations[d]||[];console.log(` Found ${p.length} allocations from ${d}`);const m=p.filter(_=>!e().envelopes.find(S=>S.id===_.envelopeId)?.isPiggybank);if(m.length>0){for(const _ of m)await e().createEnvelopeAllocation({envelopeId:_.envelopeId,budgetedAmount:_.budgetedAmount,userId:i.id,month:t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),_.budgetedAmount>0&&await e().addTransaction({description:"Monthly Budget Allocation",amount:_.budgetedAmount,envelopeId:_.envelopeId,type:"Income",month:t,date:`${t}-01T00:00:00`,reconciled:!1,isAutomatic:!0});console.log(` Copied ${m.length} regular allocations to ${t}`)}const x=e().envelopes.filter(_=>_.isPiggybank);console.log(` Processing ${x.length} piggybanks for ${t}`);for(const _ of x){const E=_.piggybankConfig?.monthlyContribution,S=_.piggybankConfig?.paused??!1;if(!S&&E&&E>0)try{console.log(` Setting piggybank allocation for ${_.name}: ${E}`),await e().setEnvelopeAllocation(_.id,E)}catch(T){console.error(` Failed to set allocation for piggybank ${_.name}:`,T)}else console.log(` Skipping piggybank ${_.name} (paused=${S}, contribution=${E})`)}n({isLoading:!1}),console.log(` Complete monthly setup copied to ${t}`)}catch(r){throw console.error(" copyPreviousMonthAllocations failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(t,r)=>{try{n({isLoading:!0,error:null});const a=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(h=>h.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const o=e().currentMonth,c=e().envelopes.find(h=>h.id===t),u=c?.isPiggybank;console.log(` setEnvelopeAllocation called: envelopeId=${t}, amount=${r}, currentMonth=${o}, isPiggybank=${u}`);const d=e().allocations[o]?.find(h=>h.envelopeId===t);if(d?await e().updateEnvelopeAllocation(d.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:t,budgetedAmount:r,userId:a.id,month:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),u&&r>0&&!c?.piggybankConfig?.paused&&!e().transactions.find(p=>p.envelopeId===t&&p.month===o&&p.description==="Monthly Allocation")){const p={description:"Monthly Allocation",amount:r,envelopeId:t,type:"Income",month:o,date:`${o}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(p)}if(!u&&r>0){const h=e().transactions.find(p=>p.envelopeId===t&&p.month===o&&p.description==="Monthly Budget Allocation");if(h)await e().updateTransaction({...h,amount:r});else{const p={description:"Monthly Budget Allocation",amount:r,envelopeId:t,type:"Income",month:o,date:`${o}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(p)}}console.log(" Envelope allocation set successfully")}catch(i){throw console.error(" setEnvelopeAllocation failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async t=>{try{const i=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=e().currentMonth,o=await On.createEnvelopeAllocation({envelopeId:t.envelopeId,budgetedAmount:t.budgetedAmount,userId:i.id,month:a});n(c=>{const u=c.allocations[a]||[];return u.some(h=>h.id===o.id)?{isLoading:!1}:{allocations:{...c.allocations,[a]:[...u,o]},isLoading:!1}}),console.log(" Created envelope allocation:",o.id)}catch(r){throw console.error(" createEnvelopeAllocation failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(t,r)=>{try{console.log(" Updating envelope allocation:",{id:t,updates:r});const i=e().currentMonth,o=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(h=>h.useAuthStore.getState())).currentUser;if(!o)throw new Error("No authenticated user found");const c=e().allocations[i]?.find(h=>h.id===t);if(!c)throw new Error("Allocation not found");const u=e().envelopes.find(h=>h.id===c.envelopeId),d=u?.isPiggybank;if(await On.updateEnvelopeAllocation(o.id,c.envelopeId,i,{budgetedAmount:r.budgetedAmount}),n(h=>({allocations:{...h.allocations,[i]:h.allocations[i]?.map(p=>p.id===t?{...p,...r,updatedAt:new Date().toISOString()}:p)||[]},isLoading:!1})),d&&r.budgetedAmount!==void 0){const h=e().transactions.find(p=>p.envelopeId===c.envelopeId&&p.month===i&&p.description==="Monthly Allocation");h?r.budgetedAmount>0&&!u?.piggybankConfig?.paused?await e().updateTransaction({...h,amount:r.budgetedAmount}):(r.budgetedAmount===0||u?.piggybankConfig?.paused)&&await e().deleteTransaction(h.id):r.budgetedAmount>0&&!u?.piggybankConfig?.paused&&await e().addTransaction({description:"Monthly Allocation",amount:r.budgetedAmount,envelopeId:c.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!d&&r.budgetedAmount!==void 0){const h=e().transactions.find(p=>p.envelopeId===c.envelopeId&&p.month===i&&p.description==="Monthly Budget Allocation");h?r.budgetedAmount>0?await e().updateTransaction({...h,amount:r.budgetedAmount}):r.budgetedAmount===0&&await e().deleteTransaction(h.id):r.budgetedAmount>0&&await e().addTransaction({description:"Monthly Budget Allocation",amount:r.budgetedAmount,envelopeId:c.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}console.log(" Updated envelope allocation:",t)}catch(i){throw console.error(" updateEnvelopeAllocation failed:",i),n({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async t=>{try{console.log(" Deleting envelope allocation:",t);const r=e().currentMonth,i=e().allocations[r]?.find(c=>c.id===t);if(!i){console.warn("Allocation not found in store, skipping delete");return}const o=(await wn(()=>Promise.resolve().then(()=>Pn),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!o)throw new Error("No authenticated user found");await On.deleteEnvelopeAllocation(o.id,i.envelopeId,r),n(c=>({allocations:{...c.allocations,[r]:c.allocations[r]?.filter(u=>u.id!==t)||[]},isLoading:!1})),console.log(" Deleted envelope allocation:",t)}catch(r){throw console.error(" deleteEnvelopeAllocation failed:",r),n({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const t=e().currentMonth,r=e().allocations[t]||[],i=e().incomeSources[t]||[],a=r.reduce((u,d)=>u+d.budgetedAmount,0);return i.reduce((u,d)=>u+d.amount,0)-a}catch(t){throw console.error(" refreshAvailableToBudget failed:",t),n({error:t instanceof Error?t.message:"Failed to refresh available to budget"}),t}},updateOnlineStatus:async()=>{try{const t=typeof navigator<"u"?navigator.onLine:!0;n({isOnline:t}),console.log(" Online status updated:",t)}catch(t){console.error(" Failed to update online status:",t)}},handleUserLogout:()=>{console.log(" Clearing user data on logout"),n({envelopes:[],transactions:[],incomeSources:{},allocations:{},isLoading:!1,error:null})}}),{name:"budget-storage"})));aee({useBudgetStore:pr,useAuthStore:Yi,getCurrentUserId:see});const Bc=TE((n,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(t,r="neutral",i)=>{n({message:t,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},6e3)},hideToast:()=>{n({isVisible:!1})}}));class Qu{static instance;static getInstance(){return Qu.instance||(Qu.instance=new Qu),Qu.instance}async getMonthlyBudget(e,t){try{const r=vt(We,"users",e,"monthlyBudgets",t),i=await lc(r);if(i.exists()){const a=i.data();return{id:a.id,userId:a.userId,month:a.month,totalIncome:a.totalIncome,availableToBudget:a.availableToBudget,createdAt:hn(a.createdAt),updatedAt:hn(a.updatedAt)}}return null}catch(r){throw console.error("Error getting monthly budget:",r),r}}async createOrUpdateMonthlyBudget(e){try{const t=tt.now(),r=`${e.userId}_${e.month}`,i={id:r,userId:e.userId,month:e.month,totalIncome:e.totalIncome,availableToBudget:e.availableToBudget,createdAt:t,updatedAt:t};return await Li(vt(We,"users",e.userId,"monthlyBudgets",e.month),i),{...e,id:r,createdAt:hn(t),updatedAt:hn(t)}}catch(t){throw console.error("Error creating/updating monthly budget:",t),t}}async getMonthData(e,t){try{if(!await this.getMonthlyBudget(e,t))return{incomeSources:[],allocations:[]};const i=vt(We,"users",e,"monthlyBudgets",t),a=await lc(i);if(!a.exists())return{incomeSources:[],allocations:[]};const o=a.data(),c=(o.incomeSources||[]).map(d=>({id:d.id,userId:d.userId,month:d.month,name:d.name,amount:d.amount,frequency:d.frequency||"monthly",category:d.category,createdAt:hn(d.createdAt),updatedAt:hn(d.updatedAt)})),u=Object.entries(o.allocations||{}).map(([d,h])=>({id:d,userId:e,envelopeId:d,month:t,budgetedAmount:h,createdAt:hn(o.createdAt),updatedAt:hn(o.updatedAt)}));return{incomeSources:c,allocations:u}}catch(r){throw console.error("Error getting month data:",r),r}}async getIncomeSources(e,t){return(await this.getMonthData(e,t)).incomeSources}async createIncomeSource(e){try{const t=tt.now(),r=`inc_${t.toMillis()}_${Math.random().toString(36).substr(2,9)}`,i={id:r,userId:e.userId,month:e.month,name:e.name,amount:e.amount,frequency:e.frequency||"monthly",category:e.category,createdAt:t,updatedAt:t},a=vt(We,"users",e.userId,"monthlyBudgets",e.month);return await Sr(a,{incomeSources:wV(i)}),{...e,id:r,frequency:e.frequency||"monthly",createdAt:hn(t),updatedAt:hn(t)}}catch(t){throw console.error("Error creating income source:",t),t}}async getEnvelopeAllocations(e,t){return(await this.getMonthData(e,t)).allocations}async createEnvelopeAllocation(e){try{const t=tt.now(),r=vt(We,"users",e.userId,"monthlyBudgets",e.month);return await Sr(r,{[`allocations.${e.envelopeId}`]:e.budgetedAmount,updatedAt:t}),{...e,id:e.envelopeId,createdAt:hn(t),updatedAt:hn(t)}}catch(t){throw console.error("Error creating envelope allocation:",t),t}}async copyMonthData(e,t,r){try{const i=await this.getMonthData(e,t),a=tt.now(),o=i.incomeSources.map(m=>({id:`inc_${a.toMillis()}_${Math.random().toString(36).substr(2,9)}`,userId:e,month:r,name:m.name,amount:m.amount,frequency:m.frequency||"monthly",category:m.category,createdAt:a,updatedAt:a})),c={};i.allocations.forEach(m=>{c[m.envelopeId]=m.budgetedAmount});const u=o.reduce((m,x)=>m+x.amount,0),d=Object.values(c).reduce((m,x)=>m+x,0),p={id:`${e}_${r}`,userId:e,month:r,totalIncome:u,availableToBudget:u-d,createdAt:a,updatedAt:a,allocations:c,incomeSources:o};await Li(vt(We,"users",e,"monthlyBudgets",r),p)}catch(i){throw console.error("Error copying month data:",i),i}}async deleteIncomeSource(e,t,r){try{const i=vt(We,"users",e,"monthlyBudgets",r),a=await lc(i);if(!a.exists())return;const u=(a.data().incomeSources||[]).filter(d=>d.id!==t);await Sr(i,{incomeSources:u,updatedAt:tt.now()})}catch(i){throw console.error("Error deleting income source:",i),i}}async updateIncomeSource(e,t,r,i){try{const a=vt(We,"users",e,"monthlyBudgets",r),o=await lc(a);if(!o.exists())return;const d=(o.data().incomeSources||[]).map(h=>h.id===t?{...h,...i,updatedAt:tt.now()}:h);await Sr(a,{incomeSources:d,updatedAt:tt.now()})}catch(a){throw console.error("Error updating income source:",a),a}}async deleteEnvelopeAllocation(e,t,r){try{const i=vt(We,"users",e,"monthlyBudgets",r);await Sr(i,{[`allocations.${t}`]:_V(),updatedAt:tt.now()})}catch(i){throw console.error("Error deleting envelope allocation:",i),i}}async updateEnvelopeAllocation(e,t,r,i){try{const a=vt(We,"users",e,"monthlyBudgets",r);i.budgetedAmount!==void 0&&await Sr(a,{[`allocations.${t}`]:i.budgetedAmount,updatedAt:tt.now()})}catch(a){throw console.error("Error updating envelope allocation:",a),a}}async clearMonthData(e,t){try{const r=vt(We,"users",e,"monthlyBudgets",t);await Sr(r,{totalIncome:0,availableToBudget:0,incomeSources:[],allocations:{},updatedAt:tt.now()});const i=ha(vi(We,"users",e,"transactions"),q_("month","==",t)),a=await Cs(i);if(a.size>0){const o=a.docs.map(c=>za(c.ref));await Promise.all(o),console.log(` Deleted ${a.size} transactions for month ${t}`)}else console.log(` No transactions found for month ${t}`)}catch(r){throw console.error("Error clearing month data:",r),r}}async calculateAvailableToBudget(e,t){try{const r=await this.getMonthData(e,t),i=r.incomeSources.reduce((o,c)=>o+c.amount,0),a=r.allocations.reduce((o,c)=>o+c.budgetedAmount,0);return i-a}catch(r){throw console.error("Error calculating available to budget:",r),r}}subscribeToMonthlyBudget(e,t,r){const i=vt(We,"users",e,"monthlyBudgets",t);return kc(i,a=>{a.exists()?r(a.data()):r(null)})}}const oee=Qu.getInstance();var Zu=9e15,yl=1e9,K_="0123456789abcdef",gv="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",mv="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",X_={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Zu,maxE:Zu,crypto:!1},oj,Ds,ot=!0,fy="[DecimalError] ",fl=fy+"Invalid argument: ",lj=fy+"Precision limit exceeded",cj=fy+"crypto unavailable",uj="[object Decimal]",Or=Math.floor,rr=Math.pow,lee=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,cee=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,uee=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,dj=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pa=1e7,et=7,dee=9007199254740991,fee=gv.length-1,W_=mv.length-1,we={toStringTag:uj};we.absoluteValue=we.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),qe(n)};we.ceil=function(){return qe(new this.constructor(this),this.e+1,2)};we.clampedTo=we.clamp=function(n,e){var t,r=this,i=r.constructor;if(n=new i(n),e=new i(e),!n.s||!e.s)return new i(NaN);if(n.gt(e))throw Error(fl+e);return t=r.cmp(n),t<0?n:r.cmp(e)>0?e:new i(r)};we.comparedTo=we.cmp=function(n){var e,t,r,i,a=this,o=a.d,c=(n=new a.constructor(n)).d,u=a.s,d=n.s;if(!o||!c)return!u||!d?NaN:u!==d?u:o===c?0:!o^u<0?1:-1;if(!o[0]||!c[0])return o[0]?u:c[0]?-d:0;if(u!==d)return u;if(a.e!==n.e)return a.e>n.e^u<0?1:-1;for(r=o.length,i=c.length,e=0,t=r<i?r:i;e<t;++e)if(o[e]!==c[e])return o[e]>c[e]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};we.cosine=we.cos=function(){var n,e,t=this,r=t.constructor;return t.d?t.d[0]?(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+et,r.rounding=1,t=hee(r,mj(r,t)),r.precision=n,r.rounding=e,qe(Ds==2||Ds==3?t.neg():t,n,e,!0)):new r(1):new r(NaN)};we.cubeRoot=we.cbrt=function(){var n,e,t,r,i,a,o,c,u,d,h=this,p=h.constructor;if(!h.isFinite()||h.isZero())return new p(h);for(ot=!1,a=h.s*rr(h.s*h,1/3),!a||Math.abs(a)==1/0?(t=Tr(h.d),n=h.e,(a=(n-t.length+1)%3)&&(t+=a==1||a==-2?"0":"00"),a=rr(t,1/3),n=Or((n+1)/3)-(n%3==(n<0?-1:2)),a==1/0?t="5e"+n:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),r=new p(t),r.s=h.s):r=new p(a.toString()),o=(n=p.precision)+3;;)if(c=r,u=c.times(c).times(c),d=u.plus(h),r=Zt(d.plus(h).times(c),d.plus(u),o+2,1),Tr(c.d).slice(0,o)===(t=Tr(r.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!i&&t=="4999"){if(!i&&(qe(c,n+1,0),c.times(c).times(c).eq(h))){r=c;break}o+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(qe(r,n+1,1),e=!r.times(r).times(r).eq(h));break}return ot=!0,qe(r,n,p.rounding,e)};we.decimalPlaces=we.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-Or(this.e/et))*et,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};we.dividedBy=we.div=function(n){return Zt(this,new this.constructor(n))};we.dividedToIntegerBy=we.divToInt=function(n){var e=this,t=e.constructor;return qe(Zt(e,new t(n),0,1,1),t.precision,t.rounding)};we.equals=we.eq=function(n){return this.cmp(n)===0};we.floor=function(){return qe(new this.constructor(this),this.e+1,3)};we.greaterThan=we.gt=function(n){return this.cmp(n)>0};we.greaterThanOrEqualTo=we.gte=function(n){var e=this.cmp(n);return e==1||e===0};we.hyperbolicCosine=we.cosh=function(){var n,e,t,r,i,a=this,o=a.constructor,c=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return c;t=o.precision,r=o.rounding,o.precision=t+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(n=Math.ceil(i/3),e=(1/py(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),a=kd(o,1,a.times(e),new o(1),!0);for(var u,d=n,h=new o(8);d--;)u=a.times(a),a=c.minus(u.times(h.minus(u.times(h))));return qe(a,o.precision=t,o.rounding=r,!0)};we.hyperbolicSine=we.sinh=function(){var n,e,t,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,t=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=kd(a,2,i,i,!0);else{n=1.4*Math.sqrt(r),n=n>16?16:n|0,i=i.times(1/py(5,n)),i=kd(a,2,i,i,!0);for(var o,c=new a(5),u=new a(16),d=new a(20);n--;)o=i.times(i),i=i.times(c.plus(o.times(u.times(o).plus(d))))}return a.precision=e,a.rounding=t,qe(i,e,t,!0)};we.hyperbolicTangent=we.tanh=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+7,r.rounding=1,Zt(t.sinh(),t.cosh(),r.precision=n,r.rounding=e)):new r(t.s)};we.inverseCosine=we.acos=function(){var n=this,e=n.constructor,t=n.abs().cmp(1),r=e.precision,i=e.rounding;return t!==-1?t===0?n.isNeg()?Fa(e,r,i):new e(0):new e(NaN):n.isZero()?Fa(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,n=new e(1).minus(n).div(n.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,n.times(2))};we.inverseHyperbolicCosine=we.acosh=function(){var n,e,t=this,r=t.constructor;return t.lte(1)?new r(t.eq(1)?0:NaN):t.isFinite()?(n=r.precision,e=r.rounding,r.precision=n+Math.max(Math.abs(t.e),t.sd())+4,r.rounding=1,ot=!1,t=t.times(t).minus(1).sqrt().plus(t),ot=!0,r.precision=n,r.rounding=e,t.ln()):new r(t)};we.inverseHyperbolicSine=we.asinh=function(){var n,e,t=this,r=t.constructor;return!t.isFinite()||t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,r.rounding=1,ot=!1,t=t.times(t).plus(1).sqrt().plus(t),ot=!0,r.precision=n,r.rounding=e,t.ln())};we.inverseHyperbolicTangent=we.atanh=function(){var n,e,t,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(n=a.precision,e=a.rounding,r=i.sd(),Math.max(r,n)<2*-i.e-1?qe(new a(i),n,e,!0):(a.precision=t=r-i.e,i=Zt(i.plus(1),new a(1).minus(i),t+n,1),a.precision=n+4,a.rounding=1,i=i.ln(),a.precision=n,a.rounding=e,i.times(.5))):new a(NaN)};we.inverseSine=we.asin=function(){var n,e,t,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),t=a.precision,r=a.rounding,e!==-1?e===0?(n=Fa(a,t+4,r).times(.5),n.s=i.s,n):new a(NaN):(a.precision=t+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=t,a.rounding=r,i.times(2)))};we.inverseTangent=we.atan=function(){var n,e,t,r,i,a,o,c,u,d=this,h=d.constructor,p=h.precision,m=h.rounding;if(d.isFinite()){if(d.isZero())return new h(d);if(d.abs().eq(1)&&p+4<=W_)return o=Fa(h,p+4,m).times(.25),o.s=d.s,o}else{if(!d.s)return new h(NaN);if(p+4<=W_)return o=Fa(h,p+4,m).times(.5),o.s=d.s,o}for(h.precision=c=p+10,h.rounding=1,t=Math.min(28,c/et+2|0),n=t;n;--n)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(ot=!1,e=Math.ceil(c/et),r=1,u=d.times(d),o=new h(d),i=d;n!==-1;)if(i=i.times(u),a=o.minus(i.div(r+=2)),i=i.times(u),o=a.plus(i.div(r+=2)),o.d[e]!==void 0)for(n=e;o.d[n]===a.d[n]&&n--;);return t&&(o=o.times(2<<t-1)),ot=!0,qe(o,h.precision=p,h.rounding=m,!0)};we.isFinite=function(){return!!this.d};we.isInteger=we.isInt=function(){return!!this.d&&Or(this.e/et)>this.d.length-2};we.isNaN=function(){return!this.s};we.isNegative=we.isNeg=function(){return this.s<0};we.isPositive=we.isPos=function(){return this.s>0};we.isZero=function(){return!!this.d&&this.d[0]===0};we.lessThan=we.lt=function(n){return this.cmp(n)<0};we.lessThanOrEqualTo=we.lte=function(n){return this.cmp(n)<1};we.logarithm=we.log=function(n){var e,t,r,i,a,o,c,u,d=this,h=d.constructor,p=h.precision,m=h.rounding,x=5;if(n==null)n=new h(10),e=!0;else{if(n=new h(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new h(NaN);e=n.eq(10)}if(t=d.d,d.s<0||!t||!t[0]||d.eq(1))return new h(t&&!t[0]?-1/0:d.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)a=!0;else{for(i=t[0];i%10===0;)i/=10;a=i!==1}if(ot=!1,c=p+x,o=Yo(d,c),r=e?vv(h,c+10):Yo(n,c),u=Zt(o,r,c,1),pp(u.d,i=p,m))do if(c+=10,o=Yo(d,c),r=e?vv(h,c+10):Yo(n,c),u=Zt(o,r,c,1),!a){+Tr(u.d).slice(i+1,i+15)+1==1e14&&(u=qe(u,p+1,0));break}while(pp(u.d,i+=10,m));return ot=!0,qe(u,p,m)};we.minus=we.sub=function(n){var e,t,r,i,a,o,c,u,d,h,p,m,x=this,_=x.constructor;if(n=new _(n),!x.d||!n.d)return!x.s||!n.s?n=new _(NaN):x.d?n.s=-n.s:n=new _(n.d||x.s!==n.s?x:NaN),n;if(x.s!=n.s)return n.s=-n.s,x.plus(n);if(d=x.d,m=n.d,c=_.precision,u=_.rounding,!d[0]||!m[0]){if(m[0])n.s=-n.s;else if(d[0])n=new _(x);else return new _(u===3?-0:0);return ot?qe(n,c,u):n}if(t=Or(n.e/et),h=Or(x.e/et),d=d.slice(),a=h-t,a){for(p=a<0,p?(e=d,a=-a,o=m.length):(e=m,t=h,o=d.length),r=Math.max(Math.ceil(c/et),o)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=d.length,o=m.length,p=r<o,p&&(o=r),r=0;r<o;r++)if(d[r]!=m[r]){p=d[r]<m[r];break}a=0}for(p&&(e=d,d=m,m=e,n.s=-n.s),o=d.length,r=m.length-o;r>0;--r)d[o++]=0;for(r=m.length;r>a;){if(d[--r]<m[r]){for(i=r;i&&d[--i]===0;)d[i]=pa-1;--d[i],d[r]+=pa}d[r]-=m[r]}for(;d[--o]===0;)d.pop();for(;d[0]===0;d.shift())--t;return d[0]?(n.d=d,n.e=hy(d,t),ot?qe(n,c,u):n):new _(u===3?-0:0)};we.modulo=we.mod=function(n){var e,t=this,r=t.constructor;return n=new r(n),!t.d||!n.s||n.d&&!n.d[0]?new r(NaN):!n.d||t.d&&!t.d[0]?qe(new r(t),r.precision,r.rounding):(ot=!1,r.modulo==9?(e=Zt(t,n.abs(),0,3,1),e.s*=n.s):e=Zt(t,n,0,r.modulo,1),e=e.times(n),ot=!0,t.minus(e))};we.naturalExponential=we.exp=function(){return Q_(this)};we.naturalLogarithm=we.ln=function(){return Yo(this)};we.negated=we.neg=function(){var n=new this.constructor(this);return n.s=-n.s,qe(n)};we.plus=we.add=function(n){var e,t,r,i,a,o,c,u,d,h,p=this,m=p.constructor;if(n=new m(n),!p.d||!n.d)return!p.s||!n.s?n=new m(NaN):p.d||(n=new m(n.d||p.s===n.s?p:NaN)),n;if(p.s!=n.s)return n.s=-n.s,p.minus(n);if(d=p.d,h=n.d,c=m.precision,u=m.rounding,!d[0]||!h[0])return h[0]||(n=new m(p)),ot?qe(n,c,u):n;if(a=Or(p.e/et),r=Or(n.e/et),d=d.slice(),i=a-r,i){for(i<0?(t=d,i=-i,o=h.length):(t=h,r=a,o=d.length),a=Math.ceil(c/et),o=a>o?a+1:o+1,i>o&&(i=o,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(o=d.length,i=h.length,o-i<0&&(i=o,t=h,h=d,d=t),e=0;i;)e=(d[--i]=d[i]+h[i]+e)/pa|0,d[i]%=pa;for(e&&(d.unshift(e),++r),o=d.length;d[--o]==0;)d.pop();return n.d=d,n.e=hy(d,r),ot?qe(n,c,u):n};we.precision=we.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(fl+n);return t.d?(e=fj(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};we.round=function(){var n=this,e=n.constructor;return qe(new e(n),n.e+1,e.rounding)};we.sine=we.sin=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+et,r.rounding=1,t=gee(r,mj(r,t)),r.precision=n,r.rounding=e,qe(Ds>2?t.neg():t,n,e,!0)):new r(NaN)};we.squareRoot=we.sqrt=function(){var n,e,t,r,i,a,o=this,c=o.d,u=o.e,d=o.s,h=o.constructor;if(d!==1||!c||!c[0])return new h(!d||d<0&&(!c||c[0])?NaN:c?o:1/0);for(ot=!1,d=Math.sqrt(+o),d==0||d==1/0?(e=Tr(c),(e.length+u)%2==0&&(e+="0"),d=Math.sqrt(e),u=Or((u+1)/2)-(u<0||u%2),d==1/0?e="5e"+u:(e=d.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new h(e)):r=new h(d.toString()),t=(u=h.precision)+3;;)if(a=r,r=a.plus(Zt(o,a,t+2,1)).times(.5),Tr(a.d).slice(0,t)===(e=Tr(r.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(qe(a,u+1,0),a.times(a).eq(o))){r=a;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(qe(r,u+1,1),n=!r.times(r).eq(o));break}return ot=!0,qe(r,u,h.rounding,n)};we.tangent=we.tan=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+10,r.rounding=1,t=t.sin(),t.s=1,t=Zt(t,new r(1).minus(t.times(t)).sqrt(),n+10,0),r.precision=n,r.rounding=e,qe(Ds==2||Ds==4?t.neg():t,n,e,!0)):new r(NaN)};we.times=we.mul=function(n){var e,t,r,i,a,o,c,u,d,h=this,p=h.constructor,m=h.d,x=(n=new p(n)).d;if(n.s*=h.s,!m||!m[0]||!x||!x[0])return new p(!n.s||m&&!m[0]&&!x||x&&!x[0]&&!m?NaN:!m||!x?n.s/0:n.s*0);for(t=Or(h.e/et)+Or(n.e/et),u=m.length,d=x.length,u<d&&(a=m,m=x,x=a,o=u,u=d,d=o),a=[],o=u+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(e=0,i=u+r;i>r;)c=a[i]+x[r]*m[i-r-1]+e,a[i--]=c%pa|0,e=c/pa|0;a[i]=(a[i]+e)%pa|0}for(;!a[--o];)a.pop();return e?++t:a.shift(),n.d=a,n.e=hy(a,t),ot?qe(n,p.precision,p.rounding):n};we.toBinary=function(n,e){return MS(this,2,n,e)};we.toDecimalPlaces=we.toDP=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(si(n,0,yl),e===void 0?e=r.rounding:si(e,0,8),qe(t,n+t.e+1,e))};we.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Ja(r,!0):(si(n,0,yl),e===void 0?e=i.rounding:si(e,0,8),r=qe(new i(r),n+1,e),t=Ja(r,!0,n+1)),r.isNeg()&&!r.isZero()?"-"+t:t};we.toFixed=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?t=Ja(i):(si(n,0,yl),e===void 0?e=a.rounding:si(e,0,8),r=qe(new a(i),n+i.e+1,e),t=Ja(r,!1,n+r.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};we.toFraction=function(n){var e,t,r,i,a,o,c,u,d,h,p,m,x=this,_=x.d,E=x.constructor;if(!_)return new E(x);if(d=t=new E(1),r=u=new E(0),e=new E(r),a=e.e=fj(_)-x.e-1,o=a%et,e.d[0]=rr(10,o<0?et+o:o),n==null)n=a>0?e:d;else{if(c=new E(n),!c.isInt()||c.lt(d))throw Error(fl+c);n=c.gt(e)?a>0?e:d:c}for(ot=!1,c=new E(Tr(_)),h=E.precision,E.precision=a=_.length*et*2;p=Zt(c,e,0,1,1),i=t.plus(p.times(r)),i.cmp(n)!=1;)t=r,r=i,i=d,d=u.plus(p.times(i)),u=i,i=e,e=c.minus(p.times(i)),c=i;return i=Zt(n.minus(t),r,0,1,1),u=u.plus(i.times(d)),t=t.plus(i.times(r)),u.s=d.s=x.s,m=Zt(d,r,a,1).minus(x).abs().cmp(Zt(u,t,a,1).minus(x).abs())<1?[d,r]:[u,t],E.precision=h,ot=!0,m};we.toHexadecimal=we.toHex=function(n,e){return MS(this,16,n,e)};we.toNearest=function(n,e){var t=this,r=t.constructor;if(t=new r(t),n==null){if(!t.d)return t;n=new r(1),e=r.rounding}else{if(n=new r(n),e===void 0?e=r.rounding:si(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(ot=!1,t=Zt(t,n,0,e,1).times(n),ot=!0,qe(t)):(n.s=t.s,t=n),t};we.toNumber=function(){return+this};we.toOctal=function(n,e){return MS(this,8,n,e)};we.toPower=we.pow=function(n){var e,t,r,i,a,o,c=this,u=c.constructor,d=+(n=new u(n));if(!c.d||!n.d||!c.d[0]||!n.d[0])return new u(rr(+c,d));if(c=new u(c),c.eq(1))return c;if(r=u.precision,a=u.rounding,n.eq(1))return qe(c,r,a);if(e=Or(n.e/et),e>=n.d.length-1&&(t=d<0?-d:d)<=dee)return i=hj(u,c,t,r),n.s<0?new u(1).div(i):qe(i,r,a);if(o=c.s,o<0){if(e<n.d.length-1)return new u(NaN);if((n.d[e]&1)==0&&(o=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=o,c}return t=rr(+c,d),e=t==0||!isFinite(t)?Or(d*(Math.log("0."+Tr(c.d))/Math.LN10+c.e+1)):new u(t+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(ot=!1,u.rounding=c.s=1,t=Math.min(12,(e+"").length),i=Q_(n.times(Yo(c,r+t)),r),i.d&&(i=qe(i,r+5,1),pp(i.d,r,a)&&(e=r+10,i=qe(Q_(n.times(Yo(c,e+t)),e),e+5,1),+Tr(i.d).slice(r+1,r+15)+1==1e14&&(i=qe(i,r+1,0)))),i.s=o,ot=!0,u.rounding=a,qe(i,r,a))};we.toPrecision=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Ja(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(si(n,1,yl),e===void 0?e=i.rounding:si(e,0,8),r=qe(new i(r),n,e),t=Ja(r,n<=r.e||r.e<=i.toExpNeg,n)),r.isNeg()&&!r.isZero()?"-"+t:t};we.toSignificantDigits=we.toSD=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(si(n,1,yl),e===void 0?e=r.rounding:si(e,0,8)),qe(new r(t),n,e)};we.toString=function(){var n=this,e=n.constructor,t=Ja(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};we.truncated=we.trunc=function(){return qe(new this.constructor(this),this.e+1,1)};we.valueOf=we.toJSON=function(){var n=this,e=n.constructor,t=Ja(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function Tr(n){var e,t,r,i=n.length-1,a="",o=n[0];if(i>0){for(a+=o,e=1;e<i;e++)r=n[e]+"",t=et-r.length,t&&(a+=zo(t)),a+=r;o=n[e],r=o+"",t=et-r.length,t&&(a+=zo(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function si(n,e,t){if(n!==~~n||n<e||n>t)throw Error(fl+n)}function pp(n,e,t,r){var i,a,o,c;for(a=n[0];a>=10;a/=10)--e;return--e<0?(e+=et,i=0):(i=Math.ceil((e+1)/et),e%=et),a=rr(10,et-e),c=n[i]%a|0,r==null?e<3?(e==0?c=c/100|0:e==1&&(c=c/10|0),o=t<4&&c==99999||t>3&&c==49999||c==5e4||c==0):o=(t<4&&c+1==a||t>3&&c+1==a/2)&&(n[i+1]/a/100|0)==rr(10,e-2)-1||(c==a/2||c==0)&&(n[i+1]/a/100|0)==0:e<4?(e==0?c=c/1e3|0:e==1?c=c/100|0:e==2&&(c=c/10|0),o=(r||t<4)&&c==9999||!r&&t>3&&c==4999):o=((r||t<4)&&c+1==a||!r&&t>3&&c+1==a/2)&&(n[i+1]/a/1e3|0)==rr(10,e-3)-1,o}function _0(n,e,t){for(var r,i=[0],a,o=0,c=n.length;o<c;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=K_.indexOf(n.charAt(o++)),r=0;r<i.length;r++)i[r]>t-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/t|0,i[r]%=t)}return i.reverse()}function hee(n,e){var t,r,i;if(e.isZero())return e;r=e.d.length,r<32?(t=Math.ceil(r/3),i=(1/py(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),n.precision+=t,e=kd(n,1,e.times(i),new n(1));for(var a=t;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return n.precision-=t,e}var Zt=(function(){function n(r,i,a){var o,c=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+c,r[u]=o%a|0,c=o/a|0;return c&&r.unshift(c),r}function e(r,i,a,o){var c,u;if(a!=o)u=a>o?1:-1;else for(c=u=0;c<a;c++)if(r[c]!=i[c]){u=r[c]>i[c]?1:-1;break}return u}function t(r,i,a,o){for(var c=0;a--;)r[a]-=c,c=r[a]<i[a]?1:0,r[a]=c*o+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o,c,u){var d,h,p,m,x,_,E,S,T,C,R,j,z,V,I,A,k,O,B,L,M=r.constructor,X=r.s==i.s?1:-1,Q=r.d,$=i.d;if(!Q||!Q[0]||!$||!$[0])return new M(!r.s||!i.s||(Q?$&&Q[0]==$[0]:!$)?NaN:Q&&Q[0]==0||!$?X*0:X/0);for(u?(x=1,h=r.e-i.e):(u=pa,x=et,h=Or(r.e/x)-Or(i.e/x)),B=$.length,k=Q.length,T=new M(X),C=T.d=[],p=0;$[p]==(Q[p]||0);p++);if($[p]>(Q[p]||0)&&h--,a==null?(V=a=M.precision,o=M.rounding):c?V=a+(r.e-i.e)+1:V=a,V<0)C.push(1),_=!0;else{if(V=V/x+2|0,p=0,B==1){for(m=0,$=$[0],V++;(p<k||m)&&V--;p++)I=m*u+(Q[p]||0),C[p]=I/$|0,m=I%$|0;_=m||p<k}else{for(m=u/($[0]+1)|0,m>1&&($=n($,m,u),Q=n(Q,m,u),B=$.length,k=Q.length),A=B,R=Q.slice(0,B),j=R.length;j<B;)R[j++]=0;L=$.slice(),L.unshift(0),O=$[0],$[1]>=u/2&&++O;do m=0,d=e($,R,B,j),d<0?(z=R[0],B!=j&&(z=z*u+(R[1]||0)),m=z/O|0,m>1?(m>=u&&(m=u-1),E=n($,m,u),S=E.length,j=R.length,d=e(E,R,S,j),d==1&&(m--,t(E,B<S?L:$,S,u))):(m==0&&(d=m=1),E=$.slice()),S=E.length,S<j&&E.unshift(0),t(R,E,j,u),d==-1&&(j=R.length,d=e($,R,B,j),d<1&&(m++,t(R,B<j?L:$,j,u))),j=R.length):d===0&&(m++,R=[0]),C[p++]=m,d&&R[0]?R[j++]=Q[A]||0:(R=[Q[A]],j=1);while((A++<k||R[0]!==void 0)&&V--);_=R[0]!==void 0}C[0]||C.shift()}if(x==1)T.e=h,oj=_;else{for(p=1,m=C[0];m>=10;m/=10)p++;T.e=p+h*x-1,qe(T,c?a+T.e+1:a,o,_)}return T}})();function qe(n,e,t,r){var i,a,o,c,u,d,h,p,m,x=n.constructor;e:if(e!=null){if(p=n.d,!p)return n;for(i=1,c=p[0];c>=10;c/=10)i++;if(a=e-i,a<0)a+=et,o=e,h=p[m=0],u=h/rr(10,i-o-1)%10|0;else if(m=Math.ceil((a+1)/et),c=p.length,m>=c)if(r){for(;c++<=m;)p.push(0);h=u=0,i=1,a%=et,o=a-et+1}else break e;else{for(h=c=p[m],i=1;c>=10;c/=10)i++;a%=et,o=a-et+i,u=o<0?0:h/rr(10,i-o-1)%10|0}if(r=r||e<0||p[m+1]!==void 0||(o<0?h:h%rr(10,i-o-1)),d=t<4?(u||r)&&(t==0||t==(n.s<0?3:2)):u>5||u==5&&(t==4||r||t==6&&(a>0?o>0?h/rr(10,i-o):0:p[m-1])%10&1||t==(n.s<0?8:7)),e<1||!p[0])return p.length=0,d?(e-=n.e+1,p[0]=rr(10,(et-e%et)%et),n.e=-e||0):p[0]=n.e=0,n;if(a==0?(p.length=m,c=1,m--):(p.length=m+1,c=rr(10,et-a),p[m]=o>0?(h/rr(10,i-o)%rr(10,o)|0)*c:0),d)for(;;)if(m==0){for(a=1,o=p[0];o>=10;o/=10)a++;for(o=p[0]+=c,c=1;o>=10;o/=10)c++;a!=c&&(n.e++,p[0]==pa&&(p[0]=1));break}else{if(p[m]+=c,p[m]!=pa)break;p[m--]=0,c=1}for(a=p.length;p[--a]===0;)p.pop()}return ot&&(n.e>x.maxE?(n.d=null,n.e=NaN):n.e<x.minE&&(n.e=0,n.d=[0])),n}function Ja(n,e,t){if(!n.isFinite())return gj(n);var r,i=n.e,a=Tr(n.d),o=a.length;return e?(t&&(r=t-o)>0?a=a.charAt(0)+"."+a.slice(1)+zo(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(n.e<0?"e":"e+")+n.e):i<0?(a="0."+zo(-i-1)+a,t&&(r=t-o)>0&&(a+=zo(r))):i>=o?(a+=zo(i+1-o),t&&(r=t-i-1)>0&&(a=a+"."+zo(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),t&&(r=t-o)>0&&(i+1===o&&(a+="."),a+=zo(r))),a}function hy(n,e){var t=n[0];for(e*=et;t>=10;t/=10)e++;return e}function vv(n,e,t){if(e>fee)throw ot=!0,t&&(n.precision=t),Error(lj);return qe(new n(gv),e,1,!0)}function Fa(n,e,t){if(e>W_)throw Error(lj);return qe(new n(mv),e,t,!0)}function fj(n){var e=n.length-1,t=e*et+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function zo(n){for(var e="";n--;)e+="0";return e}function hj(n,e,t,r){var i,a=new n(1),o=Math.ceil(r/et+4);for(ot=!1;;){if(t%2&&(a=a.times(e),zk(a.d,o)&&(i=!0)),t=Or(t/2),t===0){t=a.d.length-1,i&&a.d[t]===0&&++a.d[t];break}e=e.times(e),zk(e.d,o)}return ot=!0,a}function jk(n){return n.d[n.d.length-1]&1}function pj(n,e,t){for(var r,i,a=new n(e[0]),o=0;++o<e.length;){if(i=new n(e[o]),!i.s){a=i;break}r=a.cmp(i),(r===t||r===0&&a.s===t)&&(a=i)}return a}function Q_(n,e){var t,r,i,a,o,c,u,d=0,h=0,p=0,m=n.constructor,x=m.rounding,_=m.precision;if(!n.d||!n.d[0]||n.e>17)return new m(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(ot=!1,u=_):u=e,c=new m(.03125);n.e>-2;)n=n.times(c),p+=5;for(r=Math.log(rr(2,p))/Math.LN10*2+5|0,u+=r,t=a=o=new m(1),m.precision=u;;){if(a=qe(a.times(n),u,1),t=t.times(++h),c=o.plus(Zt(a,t,u,1)),Tr(c.d).slice(0,u)===Tr(o.d).slice(0,u)){for(i=p;i--;)o=qe(o.times(o),u,1);if(e==null)if(d<3&&pp(o.d,u-r,x,d))m.precision=u+=10,t=a=c=new m(1),h=0,d++;else return qe(o,m.precision=_,x,ot=!0);else return m.precision=_,o}o=c}}function Yo(n,e){var t,r,i,a,o,c,u,d,h,p,m,x=1,_=10,E=n,S=E.d,T=E.constructor,C=T.rounding,R=T.precision;if(E.s<0||!S||!S[0]||!E.e&&S[0]==1&&S.length==1)return new T(S&&!S[0]?-1/0:E.s!=1?NaN:S?0:E);if(e==null?(ot=!1,h=R):h=e,T.precision=h+=_,t=Tr(S),r=t.charAt(0),Math.abs(a=E.e)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)E=E.times(n),t=Tr(E.d),r=t.charAt(0),x++;a=E.e,r>1?(E=new T("0."+t),a++):E=new T(r+"."+t.slice(1))}else return d=vv(T,h+2,R).times(a+""),E=Yo(new T(r+"."+t.slice(1)),h-_).plus(d),T.precision=R,e==null?qe(E,R,C,ot=!0):E;for(p=E,u=o=E=Zt(E.minus(1),E.plus(1),h,1),m=qe(E.times(E),h,1),i=3;;){if(o=qe(o.times(m),h,1),d=u.plus(Zt(o,new T(i),h,1)),Tr(d.d).slice(0,h)===Tr(u.d).slice(0,h))if(u=u.times(2),a!==0&&(u=u.plus(vv(T,h+2,R).times(a+""))),u=Zt(u,new T(x),h,1),e==null)if(pp(u.d,h-_,C,c))T.precision=h+=_,d=o=E=Zt(p.minus(1),p.plus(1),h,1),m=qe(E.times(E),h,1),i=c=1;else return qe(u,T.precision=R,C,ot=!0);else return T.precision=R,u;u=d,i+=2}}function gj(n){return String(n.s*n.s/0)}function w0(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,n.e=t=t-r-1,n.d=[],r=(t+1)%et,t<0&&(r+=et),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=et;r<i;)n.d.push(+e.slice(r,r+=et));e=e.slice(r),r=et-e.length}else r-=i;for(;r--;)e+="0";n.d.push(+e),ot&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function pee(n,e){var t,r,i,a,o,c,u,d,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),dj.test(e))return w0(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(cee.test(e))t=16,e=e.toLowerCase();else if(lee.test(e))t=2;else if(uee.test(e))t=8;else throw Error(fl+e);for(a=e.search(/p/i),a>0?(u=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,r=n.constructor,o&&(e=e.replace(".",""),c=e.length,a=c-a,i=hj(r,new r(t),a,a*2)),d=_0(e,t,pa),h=d.length-1,a=h;d[a]===0;--a)d.pop();return a<0?new r(n.s*0):(n.e=hy(d,h),n.d=d,ot=!1,o&&(n=Zt(n,i,c*4)),u&&(n=n.times(Math.abs(u)<54?rr(2,u):Nd.pow(2,u))),ot=!0,n)}function gee(n,e){var t,r=e.d.length;if(r<3)return e.isZero()?e:kd(n,2,e,e);t=1.4*Math.sqrt(r),t=t>16?16:t|0,e=e.times(1/py(5,t)),e=kd(n,2,e,e);for(var i,a=new n(5),o=new n(16),c=new n(20);t--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(c))));return e}function kd(n,e,t,r,i){var a,o,c,u,d=n.precision,h=Math.ceil(d/et);for(ot=!1,u=t.times(t),c=new n(r);;){if(o=Zt(c.times(u),new n(e++*e++),d,1),c=i?r.plus(o):r.minus(o),r=Zt(o.times(u),new n(e++*e++),d,1),o=c.plus(r),o.d[h]!==void 0){for(a=h;o.d[a]===c.d[a]&&a--;);if(a==-1)break}a=c,c=r,r=o,o=a}return ot=!0,o.d.length=h+1,o}function py(n,e){for(var t=n;--e;)t*=n;return t}function mj(n,e){var t,r=e.s<0,i=Fa(n,n.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return Ds=r?4:1,e;if(t=e.divToInt(i),t.isZero())Ds=r?3:2;else{if(e=e.minus(t.times(i)),e.lte(a))return Ds=jk(t)?r?2:3:r?4:1,e;Ds=jk(t)?r?1:4:r?3:2}return e.minus(i).abs()}function MS(n,e,t,r){var i,a,o,c,u,d,h,p,m,x=n.constructor,_=t!==void 0;if(_?(si(t,1,yl),r===void 0?r=x.rounding:si(r,0,8)):(t=x.precision,r=x.rounding),!n.isFinite())h=gj(n);else{for(h=Ja(n),o=h.indexOf("."),_?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,o>=0&&(h=h.replace(".",""),m=new x(1),m.e=h.length-o,m.d=_0(Ja(m),10,i),m.e=m.d.length),p=_0(h,10,i),a=u=p.length;p[--u]==0;)p.pop();if(!p[0])h=_?"0p+0":"0";else{if(o<0?a--:(n=new x(n),n.d=p,n.e=a,n=Zt(n,m,t,r,0,i),p=n.d,a=n.e,d=oj),o=p[t],c=i/2,d=d||p[t+1]!==void 0,d=r<4?(o!==void 0||d)&&(r===0||r===(n.s<0?3:2)):o>c||o===c&&(r===4||d||r===6&&p[t-1]&1||r===(n.s<0?8:7)),p.length=t,d)for(;++p[--t]>i-1;)p[t]=0,t||(++a,p.unshift(1));for(u=p.length;!p[u-1];--u);for(o=0,h="";o<u;o++)h+=K_.charAt(p[o]);if(_){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)h+="0";for(p=_0(h,i,e),u=p.length;!p[u-1];--u);for(o=1,h="1.";o<u;o++)h+=K_.charAt(p[o])}else h=h.charAt(0)+"."+h.slice(1);h=h+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)h="0"+h;h="0."+h}else if(++a>u)for(a-=u;a--;)h+="0";else a<u&&(h=h.slice(0,a)+"."+h.slice(a))}h=(e==16?"0x":e==2?"0b":e==8?"0o":"")+h}return n.s<0?"-"+h:h}function zk(n,e){if(n.length>e)return n.length=e,!0}function mee(n){return new this(n).abs()}function vee(n){return new this(n).acos()}function yee(n){return new this(n).acosh()}function bee(n,e){return new this(n).plus(e)}function xee(n){return new this(n).asin()}function _ee(n){return new this(n).asinh()}function wee(n){return new this(n).atan()}function Eee(n){return new this(n).atanh()}function See(n,e){n=new this(n),e=new this(e);var t,r=this.precision,i=this.rounding,a=r+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=Fa(this,a,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?Fa(this,r,i):new this(0),t.s=n.s):!n.d||e.isZero()?(t=Fa(this,a,1).times(.5),t.s=n.s):e.s<0?(this.precision=a,this.rounding=1,t=this.atan(Zt(n,e,a,1)),e=Fa(this,a,1),this.precision=r,this.rounding=i,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(Zt(n,e,a,1)),t}function Tee(n){return new this(n).cbrt()}function Aee(n){return qe(n=new this(n),n.e+1,2)}function Cee(n,e,t){return new this(n).clamp(e,t)}function Iee(n){if(!n||typeof n!="object")throw Error(fy+"Object expected");var e,t,r,i=n.defaults===!0,a=["precision",1,yl,"rounding",0,8,"toExpNeg",-Zu,0,"toExpPos",0,Zu,"maxE",0,Zu,"minE",-Zu,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(t=a[e],i&&(this[t]=X_[t]),(r=n[t])!==void 0)if(Or(r)===r&&r>=a[e+1]&&r<=a[e+2])this[t]=r;else throw Error(fl+t+": "+r);if(t="crypto",i&&(this[t]=X_[t]),(r=n[t])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(cj);else this[t]=!1;else throw Error(fl+t+": "+r);return this}function Ree(n){return new this(n).cos()}function Dee(n){return new this(n).cosh()}function vj(n){var e,t,r;function i(a){var o,c,u,d=this;if(!(d instanceof i))return new i(a);if(d.constructor=i,Lk(a)){d.s=a.s,ot?!a.d||a.e>i.maxE?(d.e=NaN,d.d=null):a.e<i.minE?(d.e=0,d.d=[0]):(d.e=a.e,d.d=a.d.slice()):(d.e=a.e,d.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){d.s=1/a<0?-1:1,d.e=0,d.d=[0];return}if(a<0?(a=-a,d.s=-1):d.s=1,a===~~a&&a<1e7){for(o=0,c=a;c>=10;c/=10)o++;ot?o>i.maxE?(d.e=NaN,d.d=null):o<i.minE?(d.e=0,d.d=[0]):(d.e=o,d.d=[a]):(d.e=o,d.d=[a]);return}if(a*0!==0){a||(d.s=NaN),d.e=NaN,d.d=null;return}return w0(d,a.toString())}if(u==="string")return(c=a.charCodeAt(0))===45?(a=a.slice(1),d.s=-1):(c===43&&(a=a.slice(1)),d.s=1),dj.test(a)?w0(d,a):pee(d,a);if(u==="bigint")return a<0?(a=-a,d.s=-1):d.s=1,w0(d,a.toString());throw Error(fl+a)}if(i.prototype=we,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Iee,i.clone=vj,i.isDecimal=Lk,i.abs=mee,i.acos=vee,i.acosh=yee,i.add=bee,i.asin=xee,i.asinh=_ee,i.atan=wee,i.atanh=Eee,i.atan2=See,i.cbrt=Tee,i.ceil=Aee,i.clamp=Cee,i.cos=Ree,i.cosh=Dee,i.div=kee,i.exp=Nee,i.floor=Mee,i.hypot=Pee,i.ln=Oee,i.log=Vee,i.log10=zee,i.log2=jee,i.max=Lee,i.min=Bee,i.mod=Uee,i.mul=Fee,i.pow=Gee,i.random=qee,i.round=Hee,i.sign=$ee,i.sin=Yee,i.sinh=Kee,i.sqrt=Xee,i.sub=Wee,i.sum=Qee,i.tan=Zee,i.tanh=Jee,i.trunc=ete,n===void 0&&(n={}),n&&n.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function kee(n,e){return new this(n).div(e)}function Nee(n){return new this(n).exp()}function Mee(n){return qe(n=new this(n),n.e+1,3)}function Pee(){var n,e,t=new this(0);for(ot=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return ot=!0,new this(1/0);t=e}return ot=!0,t.sqrt()}function Lk(n){return n instanceof Nd||n&&n.toStringTag===uj||!1}function Oee(n){return new this(n).ln()}function Vee(n,e){return new this(n).log(e)}function jee(n){return new this(n).log(2)}function zee(n){return new this(n).log(10)}function Lee(){return pj(this,arguments,-1)}function Bee(){return pj(this,arguments,1)}function Uee(n,e){return new this(n).mod(e)}function Fee(n,e){return new this(n).mul(e)}function Gee(n,e){return new this(n).pow(e)}function qee(n){var e,t,r,i,a=0,o=new this(1),c=[];if(n===void 0?n=this.precision:si(n,1,yl),r=Math.ceil(n/et),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:c[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(c.push(i%1e7),a+=4);a=r/4}else throw Error(cj);else for(;a<r;)c[a++]=Math.random()*1e7|0;for(r=c[--a],n%=et,r&&n&&(i=rr(10,et-n),c[a]=(r/i|0)*i);c[a]===0;a--)c.pop();if(a<0)t=0,c=[0];else{for(t=-1;c[0]===0;t-=et)c.shift();for(r=1,i=c[0];i>=10;i/=10)r++;r<et&&(t-=et-r)}return o.e=t,o.d=c,o}function Hee(n){return qe(n=new this(n),n.e+1,this.rounding)}function $ee(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function Yee(n){return new this(n).sin()}function Kee(n){return new this(n).sinh()}function Xee(n){return new this(n).sqrt()}function Wee(n,e){return new this(n).sub(e)}function Qee(){var n=0,e=arguments,t=new this(e[n]);for(ot=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return ot=!0,qe(t,this.precision,this.rounding)}function Zee(n){return new this(n).tan()}function Jee(n){return new this(n).tanh()}function ete(n){return qe(n=new this(n),n.e+1,1)}we[Symbol.for("nodejs.util.inspect.custom")]=we.toString;we[Symbol.toStringTag]="Decimal";var Nd=we.constructor=vj(X_);gv=new Nd(gv);mv=new Nd(mv);const tte=n=>{if(!n)return null;if(n instanceof Date)return n;if(typeof n=="object"&&typeof n.toDate=="function")return n.toDate();if(typeof n=="object"&&n.seconds!==void 0)return new Date(n.seconds*1e3);if(typeof n=="string"){const e=new Date(n);return isNaN(e.getTime())?null:e}if(typeof n=="number"){const e=new Date(n);return isNaN(e.getTime())?null:e}return null},nte=()=>{const{envelopes:n,transactions:e,fetchData:t,isLoading:r,isOnline:i,reorderEnvelopes:a}=pr(),{currentUser:o}=Yi(),{currentMonth:c,incomeSources:u,allocations:d,deleteIncomeSource:h,setEnvelopeAllocation:p,copyPreviousMonthAllocations:m,isLoading:x}=pr(),{showToast:_}=Bc(),[E,S]=F.useState(!1),T=F.useRef(null),[C,R]=F.useState(!1),j=!C||r||x,[z,V]=F.useState([]),I=F.useRef([]),[A,k]=F.useState([]),O=F.useRef([]),B=F.useCallback(Y=>{if(n.find(ne=>ne.id===Y)?.isPiggybank){const ne=pr.getState().getEnvelopeBalance(Y);return new Nd(ne)}const ae=pr.getState().getEnvelopeBalance(Y,c);return new Nd(ae)},[n,c]);F.useEffect(()=>{const Y=n.filter(te=>{if(!te.isPiggybank||!te.isActive)return!1;if(te.createdAt)try{const ae=tte(te.createdAt);if(!ae)return console.error(` Invalid creation date for piggybank ${te.name}:`,te.createdAt),!1;const ne=`${ae.getFullYear()}-${String(ae.getMonth()+1).padStart(2,"0")}`;return c>=ne}catch(ae){return console.error(` Error processing piggybank ${te.name}:`,ae,{createdAt:te.createdAt,typeofCreatedAt:typeof te.createdAt}),!1}return!0}).sort((te,ae)=>{const ne=te.orderIndex??0,se=ae.orderIndex??0;return ne-se});k(Y),O.current=Y},[n,c]);const L=A,M=z;F.useEffect(()=>(T.current=setTimeout(()=>{S(!0)},8e3),t(),R(!0),()=>{T.current&&clearTimeout(T.current)}),[]),F.useEffect(()=>{C&&!r&&!x&&(S(!1),T.current&&clearTimeout(T.current))},[C,r,x]),F.useEffect(()=>{const Y=n.filter(te=>{if(te.isPiggybank||te.isActive===!1)return!1;const ne=(d[c]||[]).some(me=>me.envelopeId===te.id),se=e.some(me=>me.envelopeId===te.id&&(me.month===c||me.date.startsWith(c)));return ne||se}).sort((te,ae)=>{const ne=te.orderIndex??0,se=ae.orderIndex??0;return ne-se});V(Y),I.current=Y},[n,d,c,e]);const X=(u[c]||[]).reduce((Y,te)=>Y+te.amount,0),Q=(d[c]||[]).filter(Y=>M.some(te=>te.id===Y.envelopeId)||L.some(te=>te.id===Y.envelopeId)).reduce((Y,te)=>Y+te.budgetedAmount,0),$=X-Q,H=F.useCallback(async Y=>{if(!Y.length)return;const te=Y.map(ae=>ae.id);try{await a(te)}catch(ae){console.error("Failed to persist envelope order:",ae),_("Failed to save envelope order","error")}},[a,_]),J=F.useCallback(async Y=>{await H(Y)},[H]),re=F.useCallback(Y=>{h(c,Y.id).catch(console.error),_(`Deleted "${Y.name}"`,"neutral")},[h,c,_]),fe=F.useCallback(async Y=>{try{const te=Y||c;console.log(" Copying to month:",te),await m(te),_("Previous month budget copied","success")}catch(te){console.error("Error copying previous month:",te),_("Failed to copy previous month","error")}},[m,_,c]),U=F.useCallback(async()=>{if(!o||!c){_("Cannot clear data: not logged in or no month selected","error");return}try{await oee.clearMonthData(o.id,c),await t(),_(`"${c}" budget and transactions cleared successfully`,"success")}catch(Y){console.error("Error clearing month data:",Y),_("Failed to clear month data","error")}},[o,c,t,_]);return{visibleEnvelopes:M,piggybanks:L,incomeSources:u,availableToBudget:$,currentMonth:c,allocations:d,transactions:e,isLoading:r,isInitialLoading:j,isOnline:i,showTimeoutMessage:E,getEnvelopeBalance:B,fetchData:t,reorderEnvelopes:J,deleteIncomeSource:re,clearMonthData:U,copyFromPreviousMonth:fe,setEnvelopeAllocation:p,localOrderRef:I,setLocalEnvelopes:V,localPiggybankOrderRef:O,setLocalPiggybanks:k}},rte=({currentMonth:n,onMonthChange:e})=>{const[t,r]=n.split("-").map(Number),a=["January","February","March","April","May","June","July","August","September","October","November","December"][r-1],o=()=>{let d=t,h=r-1;h<1&&(d=t-1,h=12);const p=`${d}-${h.toString().padStart(2,"0")}`;e(p)},c=()=>{let d=t,h=r+1;h>12&&(d=t+1,h=1);const p=`${d}-${h.toString().padStart(2,"0")}`;e(p)},u=()=>{const d=new Date,h=`${d.getFullYear()}-${(d.getMonth()+1).toString().padStart(2,"0")}`;e(h)};return y.jsx("div",{className:"py-1.5",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("button",{onClick:o,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:y.jsx(Qz,{size:20})}),y.jsx("div",{className:"flex-1 text-center",children:y.jsxs("button",{onClick:u,className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Click to go to current month",children:[a," ",t]})}),y.jsx("button",{onClick:c,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:y.jsx(Hl,{size:20})})]})})},ite=({amount:n,totalIncome:e,totalAllocated:t,isLoading:r=!1,variant:i="default"})=>{const a=typeof t=="number"?t:parseFloat(t)||0,o=typeof e=="number"?e:parseFloat(e)||0,c=typeof n=="number"?n:parseFloat(n)||0,u=o>0?a/o*100:0,d=c>0,h=Math.abs(c)<.01,p=c<0,m=h?100:Math.min(u,100),x=p?"bg-red-500":"bg-green-500",_=h,E=p,S=d,C=_?{icon:S0,color:"text-green-600 dark:text-emerald-400",bgColor:"bg-green-50 dark:bg-emerald-900/20",borderColor:"border-green-200 dark:border-emerald-800",title:"Budget Balanced!",subtitle:"Every dollar has a job"}:E?{icon:WL,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",title:"Over Budget",subtitle:"Reduce allocations or add income"}:{icon:$L,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",title:"Available to Budget",subtitle:"Assign money to envelopes"};return r?y.jsxs("div",{className:i==="header"?"py-1.5 px-2":"bg-gray-50 dark:bg-zinc-900 rounded-2xl p-6 border border-gray-200 dark:border-zinc-800 animate-pulse",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-32"}),y.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20"})]}),y.jsx("div",{className:"h-2 bg-gray-200 dark:bg-zinc-700 rounded"})]}):y.jsxs("div",{className:i==="header"?"py-1.5 px-2":`rounded-2xl p-6 border ${C.bgColor} ${C.borderColor}`,children:[y.jsxs("div",{className:i==="header"?"flex items-center gap-3 mb-0.5":"flex items-center justify-between mb-4",children:[y.jsxs("div",{className:"flex-shrink-0 text-center",children:[y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Assigned:"}),y.jsxs("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["$",a.toFixed(2)]})]}),i==="header"&&y.jsx("div",{className:"flex-1 flex justify-center items-center",children:h?y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"text-xs text-green-600 dark:text-emerald-400 font-medium",children:"Perfect! Every dollar has a job "})}):p?y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:"You're not in Congress!"})}):y.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full",children:y.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${x}`,style:{width:`${m}%`}})})}),y.jsx("div",{className:"flex-shrink-0 text-center",children:d?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Left to Budget:"}),y.jsxs("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["$",c.toFixed(2)]})]}):h?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"text-xs text-green-600 dark:text-emerald-400",children:"All Budgeted!"}),y.jsx("div",{className:"text-base font-semibold text-green-600 dark:text-emerald-400",children:"$0.00"})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Over Budget:"}),y.jsxs("div",{className:"text-base font-semibold text-red-600 dark:text-red-400",children:["-$",Math.abs(c).toFixed(2)]})]})})]}),i!=="header"&&!_&&o>0&&y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-zinc-400",children:[y.jsx("span",{children:"Allocated"}),y.jsxs("span",{children:[u.toFixed(0),"% of income"]})]}),y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:y.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${E?"bg-red-500":S?"bg-blue-500":"bg-green-500"}`,style:{width:`${Math.min(u,100)}%`}})}),y.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-500",children:[y.jsxs("span",{children:["$",a.toFixed(2)," allocated"]}),y.jsxs("span",{children:["$",o.toFixed(2)," income"]})]})]}),i!=="header"&&y.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-zinc-700",children:y.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",o.toFixed(2)]}),y.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Total Income"})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",a.toFixed(2)]}),y.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Allocated"})]})]})})]})},ate=()=>{const[n,e]=F.useState(!1),t=F.useRef(null),{currentUser:r,logout:i}=Yi(),{handleUserLogout:a}=pr(),o=rs();F.useEffect(()=>{const d=h=>{t.current&&!t.current.contains(h.target)&&e(!1)};if(n)return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[n]);const c=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{a(),i(),o("/"),e(!1)}catch(d){console.error("Logout failed:",d)}};if(!r)return null;const u=r.displayName?.charAt(0)?.toUpperCase()||r.email?.charAt(0)?.toUpperCase()||"U";return y.jsxs("div",{className:"relative",ref:t,children:[y.jsxs("button",{onClick:()=>e(!n),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[y.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:u}),y.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:r.displayName||r.email?.split("@")[0]||"User"}),y.jsx(iw,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${n?"rotate-180":""}`})]}),n&&y.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[y.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:u}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:r.displayName||r.email?.split("@")[0]||"User"}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:r.email})]})]})}),y.jsxs("div",{className:"py-1",children:[y.jsxs("button",{onClick:()=>{o("/settings"),e(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[y.jsx(cN,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),y.jsxs("button",{onClick:c,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[y.jsx(PL,{size:18}),"Log Out"]})]})]})]})},Jp=({children:n,onDelete:e,threshold:t=-100})=>{const r=KF(),[i,a]=F.useState(!1),o=F.useRef(0),c=()=>{a(!0),o.current=Date.now()},u=async(d,h)=>{const p=h.offset.x,m=h.velocity.x;if(setTimeout(()=>a(!1),100),p<t||p<-50&&m<-500){const x=e();x===!1?r.start({x:0}):x instanceof Promise&&x.then(_=>{_===!1&&r.start({x:0})})}else r.start({x:0})};return y.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[y.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:y.jsx(vx,{className:"text-white w-6 h-6"})}),y.jsx(Hs.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:r,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${i?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:i?"none":"auto"},children:n})]})},yj=({message:n="Loading your budget...",showTimeout:e=!1})=>y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[y.jsx("div",{className:"mb-8",children:y.jsxs("div",{className:"relative",children:[y.jsx(sd,{size:48,className:"text-blue-500 animate-spin"}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:y.jsx(aw,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),y.jsxs("div",{className:"text-center space-y-3",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),y.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),y.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),y.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),y.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&y.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:y.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),y.jsx("div",{className:"mt-8 w-full max-w-md",children:y.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),ste=({isVisible:n,onClose:e,mode:t,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:o}=pr(),{showToast:c}=Bc(),[u,d]=F.useState(""),[h,p]=F.useState(""),[m,x]=F.useState(!1);F.useEffect(()=>{if(!n)return;const E=window.setTimeout(()=>{t==="edit"&&r?(d(r.name),p(r.amount.toString())):(d(""),p(""))},0);return()=>window.clearTimeout(E)},[n,t,r]);const _=async E=>{if(E.preventDefault(),!u.trim()||!h||parseFloat(h)<=0){c("Please fill in all required fields with valid values","error");return}x(!0);try{if(t==="add")await i(o,{name:u.trim(),amount:parseFloat(h),month:o,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),c("Income source added successfully","success");else{if(!r){c("Error: No income source to edit","error");return}await a(o,{...r,name:u.trim(),amount:parseFloat(h),updatedAt:new Date().toISOString()}),c(`Updated "${u.trim()}" income source`,"success")}e()}catch(S){console.error("Error saving income source:",S),c("Failed to save income source. Please try again.","error")}finally{x(!1)}};return n?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t==="add"?"Add Income Source":"Edit Income Source"}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),y.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),y.jsx("input",{type:"text",value:u,onChange:E=>d(E.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),y.jsx("input",{type:"number",value:h,onChange:E=>p(E.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:m||!u.trim()||!h||parseFloat(h)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Saving...":t==="add"?"Add Income":"Save Changes"})]})]})]})}):null},ote=({isVisible:n,onClose:e,onConfirm:t,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:o,totalAllocated:c,transactionCount:u,totalTransactionAmount:d,isLoading:h=!1})=>{const[p,m]=F.useState(""),[x,_]=F.useState("confirm"),E=C=>{const[R,j]=C.split("-");return new Date(parseInt(R),parseInt(j)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},S=()=>{x==="confirm"?_("type"):x==="type"&&p==="START FRESH"&&t()},T=()=>{_("confirm"),m(""),e()};return n?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[y.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",E(r)]}),y.jsx("button",{onClick:T,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:h,children:""})]}),y.jsx("div",{className:"p-6 space-y-4",children:x==="confirm"?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),y.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:y.jsxs("ul",{className:"space-y-1",children:[y.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),y.jsxs("li",{children:[" ",o," envelope allocation",o!==1?"s":""," (totaling $",c.toFixed(2),")"]}),y.jsxs("li",{children:[" ",u," transaction",u!==1?"s":""," (totaling $",d.toFixed(2),")"]})]})})]})]})}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[y.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data, income sources, allocations, and all transactions."]})})]})}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"You can undo this action within 30 seconds if you change your mind."})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"text-center",children:[y.jsxs("p",{className:"text-sm text-gray-900 dark:text-white mb-4",children:["Type ",y.jsx("strong",{children:"START FRESH"})," to confirm:"]}),y.jsx("input",{type:"text",value:p,onChange:C=>m(C.target.value),placeholder:"START FRESH",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-zinc-800 dark:text-white text-center font-mono text-lg",autoFocus:!0})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center",children:"This action cannot be undone after 30 seconds"})]})}),y.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{type:"button",onClick:T,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:h,children:"Cancel"}),y.jsx("button",{type:"button",onClick:S,disabled:h||x==="type"&&p!=="START FRESH",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Clearing...":x==="confirm"?"Continue":"Start Fresh"})]})]})}):null},lte=({currentMonth:n,onCopy:e,onDismiss:t,isLoading:r=!1})=>{const i=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},a=o=>{const[c,u]=o.split("-").map(Number);let d=c,h=u-1;return h<1&&(d=c-1,h=12),i(`${d}-${h.toString().padStart(2,"0")}`)};return y.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6 mb-6",children:[y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex items-start space-x-3",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx(uL,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:"Copy Previous Month?"}),y.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:["Would you like to copy your budget setup from ",a(n)," to get started with ",i(n),"?"]}),y.jsx("p",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"This will copy your income sources and envelope allocations, but not transactions."})]})]}),y.jsx("button",{onClick:t,className:"flex-shrink-0 text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 transition-colors","aria-label":"Dismiss",children:y.jsx(xv,{className:"h-5 w-5"})})]}),y.jsxs("div",{className:"mt-4 flex space-x-3",children:[y.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 bg-white dark:bg-zinc-800 border border-blue-300 dark:border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-zinc-700 transition-colors",disabled:r,children:"Start Fresh"}),y.jsx("button",{onClick:e,disabled:r,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Copying...":"Copy Previous Month"})]})]})},cte=({piggybank:n,balance:e,onNavigate:t,setMoveableRef:r,isReorderingActive:i,activelyDraggingId:a,onItemDragStart:o,onMoveUp:c,onMoveDown:u,isFirst:d,isLast:h,isReorderUnlocked:p})=>{const m=pr(ne=>ne.updatePiggybankContribution),x=Bc(ne=>ne.showToast),_=n.piggybankConfig?.targetAmount,E=n.piggybankConfig?.monthlyContribution??0,S=n.piggybankConfig?.color||"#3B82F6",T=n.piggybankConfig?.paused||!1,C=typeof e=="number"?e:e.toNumber(),R=(ne,se=1)=>{const me=ne.replace("#",""),Te=parseInt(me,16),Ce=Te>>16&255,Ne=Te>>8&255,xe=Te&255;return`rgba(${Ce}, ${Ne}, ${xe}, ${se})`},j=`linear-gradient(135deg, ${R(S,.14)} 0%, ${R(S,.05)} 100%)`,z=R(S,.4),[V,I]=F.useState(!1),[A,k]=F.useState(E?E.toFixed(2):"0.00"),[O,B]=F.useState(!1),L=F.useRef(null),M=F.useRef(null),[X,Q]=F.useState(!1),$=_&&_>0?Math.min(C/_*100,100):0,H=_&&C>=_;F.useEffect(()=>{a&&a!==n.id&&Q(!1)},[a,n.id]),F.useEffect(()=>{a===n.id&&(Q(!0),o&&o(n.id))},[a,n.id,o]),F.useEffect(()=>{if(!a&&X){const ne=setTimeout(()=>{Q(!1)},300);return()=>clearTimeout(ne)}},[a,X]),F.useEffect(()=>{V||k(E?E.toFixed(2):"0.00")},[E,V]),F.useEffect(()=>{V&&L.current&&(L.current.focus(),L.current.select())},[V]);const J=ne=>{ne.stopPropagation(),("touches"in ne||ne.type.startsWith("touch"))&&ne.preventDefault(),!O&&(k(E?E.toFixed(2):"0.00"),I(!0))},re=()=>{I(!1),k(E?E.toFixed(2):"0.00")},fe=async()=>{if(!V||O)return;const ne=parseFloat(A);if(Number.isNaN(ne)||ne<0){x("Enter a valid contribution amount","error");return}if(ne===E){I(!1);return}B(!0);try{await m(n.id,ne),x("Monthly contribution updated","success"),k(ne.toFixed(2)),I(!1)}catch(se){console.error("Failed to update piggybank contribution",se),x("Failed to update contribution","error")}finally{B(!1)}},U=ne=>{ne.key==="Enter"?(ne.preventDefault(),fe()):ne.key==="Escape"&&(ne.preventDefault(),re())},Y=ne=>{if(X||i){ne.preventDefault(),ne.stopPropagation();return}if(V){ne.preventDefault(),ne.stopPropagation();return}t(n.id)},te=a===n.id,ae=y.jsxs("div",{className:"flex items-center gap-2 w-full",children:[p&&c&&u&&y.jsxs("div",{className:"flex flex-col gap-1 mr-1",children:[y.jsx("button",{onClick:ne=>{ne.stopPropagation(),c()},disabled:d,className:`p-1 rounded transition-colors ${d?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move up","aria-label":"Move piggybank up",children:y.jsx(lN,{size:18})}),y.jsx("button",{onClick:ne=>{ne.stopPropagation(),u()},disabled:h,className:`p-1 rounded transition-colors ${h?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move down","aria-label":"Move piggybank down",children:y.jsx(iw,{size:18})})]}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-start justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${S}20`},children:y.jsx(jh,{size:20,style:{color:S}})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:n.name}),H&&y.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:" Goal Reached!"})]})]}),y.jsxs("div",{className:"text-right",children:[y.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",C.toFixed(2)]}),_&&y.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["of $",_.toFixed(2)]})]})]}),_&&_>0&&y.jsxs("div",{className:"mb-3",children:[y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800 rounded-full h-2 overflow-hidden",children:y.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${$}%`,backgroundColor:S}})}),y.jsxs("div",{className:"flex justify-between items-center mt-1",children:[y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:[$.toFixed(0),"% complete"]}),y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["$",(_-C).toFixed(2)," to go"]}),y.jsx("span",{className:"ml-2 px-2 py-0.5 text-[11px] font-semibold rounded-full uppercase tracking-wide",style:{backgroundColor:R(S,.15),color:S},children:"Piggybank"})]})]}),y.jsx("div",{className:"mt-2",children:T?y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[y.jsx(jL,{size:14,className:"text-orange-500"}),y.jsx("span",{className:"text-orange-600 dark:text-orange-400",children:"Paused"})]}):y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[y.jsx(ZL,{size:14,style:{color:S}}),V?y.jsxs("form",{onSubmit:ne=>{ne.preventDefault(),fe()},className:"flex items-center gap-2",onClick:ne=>ne.stopPropagation(),children:[y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{ref:L,type:"number",min:"0",step:"0.01",value:A,onChange:ne=>k(ne.target.value),onBlur:fe,onKeyDown:U,disabled:O,autoFocus:!0,className:"w-28 pl-6 pr-3 py-1.5 rounded-lg border border-gray-300 dark:border-zinc-600 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),O&&y.jsx(CL,{size:16,className:"animate-spin text-gray-400"})]}):y.jsxs("div",{onClick:J,onTouchEnd:J,className:"font-medium text-gray-900 dark:text-white hover:underline cursor-pointer",children:["$",E.toFixed(2),"/month"]})]})})]})]});return y.jsx(Hs.div,{layout:!te,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:ne=>{r&&r(ne),M.current=ne},onClick:Y,style:{background:j,borderColor:z},className:"rounded-xl p-4 border transition-all cursor-pointer shadow-sm hover:shadow-md select-none",children:ae})},nh=(n,e=1)=>{const t=n.replace("#",""),r=parseInt(t,16),i=r>>16&255,a=r>>8&255,o=r&255;return`rgba(${i}, ${a}, ${o}, ${e})`},Bk=12,Uk=(n,e,t)=>Math.min(Math.max(n,e),t),ute=({env:n,budgetedAmount:e,remainingBalance:t,editingEnvelopeId:r,setEditingEnvelopeId:i,editingAmount:a,setEditingAmount:o,handleBudgetSave:c,navigate:u,inputRef:d,transactions:h,currentMonth:p,setMoveableRef:m,isReorderingActive:x,activelyDraggingId:_,onItemDragStart:E,onMoveUp:S,onMoveDown:T,isFirst:C,isLast:R,isReorderUnlocked:j})=>{const z=!!n.isPiggybank,V=n.piggybankConfig?.color||"#3B82F6",I=z?`linear-gradient(135deg, ${nh(V,.18)} 0%, ${nh(V,.08)} 100%)`:void 0,A=z?nh(V,.5):void 0,k=F.useRef(null),[O,B]=F.useState(!1),L=h.filter(U=>U.envelopeId===n.id&&U.month===p),M=L.filter(U=>U.type==="Expense"),X=L.filter(U=>U.type==="Income"),Q=M.reduce((U,Y)=>U+(Y.amount||0),0),$=X.reduce((U,Y)=>U+(Y.amount||0),0),H=Math.max(0,Q/$*100),J=U=>{if(O||x){U.preventDefault(),U.stopPropagation();return}if(r===n.id){U.preventDefault(),U.stopPropagation();return}u(`/envelope/${n.id}`)};F.useEffect(()=>{_&&_!==n.id&&B(!1)},[_,n.id]),F.useEffect(()=>{_===n.id&&(B(!0),E(n.id))},[_,n.id,E]),F.useEffect(()=>{if(!_&&O){const U=setTimeout(()=>{B(!1)},300);return()=>clearTimeout(U)}},[_,O]);const re=y.jsxs("div",{className:"flex items-center gap-2 w-full",children:[j&&y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("button",{onClick:U=>{U.stopPropagation(),S()},disabled:C,className:`p-1 rounded transition-colors ${C?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move up","aria-label":"Move envelope up",children:y.jsx(lN,{size:18})}),y.jsx("button",{onClick:U=>{U.stopPropagation(),T()},disabled:R,className:`p-1 rounded transition-colors ${R?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move down","aria-label":"Move envelope down",children:y.jsx(iw,{size:18})})]}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[z&&y.jsx("span",{className:"w-8 h-8 rounded-full flex items-center justify-center border",style:{borderColor:nh(V,.4),backgroundColor:nh(V,.15),color:V},children:y.jsx(jh,{size:16})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:n.name}),z&&y.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:V},children:"Piggybank"})]})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"flex items-center space-x-4",onPointerDown:U=>U.stopPropagation(),children:r===n.id?y.jsxs("div",{className:"flex items-center space-x-1",children:[y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),y.jsx("form",{onSubmit:U=>{U.preventDefault(),c()},children:y.jsx("input",{ref:d,type:"number",value:a,onChange:U=>o(U.target.value),onBlur:c,className:"w-24 px-2 py-1 text-sm border rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white",step:"0.01",autoFocus:!0})})]}):y.jsxs("div",{onClick:U=>{U.preventDefault(),U.stopPropagation(),i(n.id),o(e.toString())},onTouchEnd:U=>{U.preventDefault(),U.stopPropagation(),i(n.id),o(e.toString())},className:"flex items-center space-x-1 hover:bg-gray-200 dark:hover:bg-zinc-700 px-3 py-2 rounded transition-colors cursor-pointer js-budget-target",children:[y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),y.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",e.toFixed(2)]})]})}),y.jsxs("div",{className:"text-right",children:[y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 block",children:"Remaining"}),y.jsxs("span",{className:`font-bold ${(typeof t=="number"?t:t.toNumber())<0||100-H<=5?"text-red-500":H>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof t=="number"?t:t.toNumber()).toFixed(2)]})]})]}),e>0&&y.jsx("div",{className:"mt-3",onClick:U=>U.stopPropagation(),children:y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-400 mb-1",children:[y.jsx("span",{children:"Budget Used"}),y.jsxs("span",{children:[H.toFixed(0),"%"]})]}),y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2 overflow-hidden",children:y.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof t=="number"?t:t.toNumber())<0||100-H<=5?"bg-red-500":H>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-H,2)}%`}})})]})})]})]}),fe=_===n.id;return y.jsx(Hs.div,{layout:!fe,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:U=>{m(n.id)(U),k.current=U},onClick:J,style:{boxShadow:"0 1px 2px rgba(15,23,42,0.08)",background:I,borderColor:A,cursor:"pointer"},className:`p-4 rounded-xl active:scale-[0.99] transition-all select-none border ${z?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:re})},dte=()=>{const{visibleEnvelopes:n,piggybanks:e,incomeSources:t,availableToBudget:r,currentMonth:i,allocations:a,transactions:o,isLoading:c,isInitialLoading:u,isOnline:d,showTimeoutMessage:h,getEnvelopeBalance:p,reorderEnvelopes:m,deleteIncomeSource:x,clearMonthData:_,copyFromPreviousMonth:E,setEnvelopeAllocation:S,localOrderRef:T,setLocalEnvelopes:C,localPiggybankOrderRef:R,setLocalPiggybanks:j}=nte(),{setMonth:z}=pr(),V=rs(),[I,A]=F.useState(!1),[k,O]=F.useState("add"),[B,L]=F.useState(null),[M,X]=F.useState(!1),[Q,$]=F.useState(!1),[H,J]=F.useState(!1),re=F.useRef(null),[fe,U]=F.useState(null),[Y,te]=F.useState(""),ae=F.useRef(null),[ne,se]=F.useState(()=>localStorage.getItem("envelopeReorderUnlocked")==="true");F.useEffect(()=>{localStorage.setItem("envelopeReorderUnlocked",ne.toString())},[ne]),F.useEffect(()=>{if(!u&&!c){const ke=setTimeout(()=>{const Me=(t[i]||[]).length===0&&(a[i]||[]).length===0;console.log(" Copy prompt check:",{currentMonth:i,hasIncome:(t[i]||[]).length>0,hasAllocations:(a[i]||[]).length>0,showPrompt:Me}),J(Me)},500);return()=>clearTimeout(ke)}},[u,c,t,a,i]),F.useEffect(()=>{fe&&ae.current&&(ae.current.focus(),ae.current.select())},[fe]);const me=F.useCallback(ke=>Me=>{Me?Ce.current[ke]=Me:delete Ce.current[ke]},[]),Te=F.useCallback(ke=>Me=>{Me?Oe.current[ke]=Me:delete Oe.current[ke]},[]),Ce=F.useRef({}),Ne=F.useRef({}),[xe,Ee]=F.useState(null),Qe=F.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0}),Oe=F.useRef({}),Be=F.useRef({}),ze=F.useRef(null),[st,yt]=F.useState(null),Ve=F.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0}),[Ke,Mt]=F.useState(!1),yn=F.useRef(null),dn=F.useRef(0),bt=F.useCallback(()=>Mt(!0),[]),Lt=F.useCallback(()=>{Mt(!1),T.current.length&&m(T.current)},[m]),Ar=F.useCallback(ke=>{},[]),Zn=F.useCallback(ke=>{fe!==ke&&V(`/envelope/${ke}`)},[fe,V]),$r=F.useCallback(()=>Mt(!0),[]),ss=F.useCallback(()=>{Mt(!1),R.current.length&&m(R.current)},[m]);F.useEffect(()=>{const ke=()=>{Object.values(Be.current).forEach(Xe=>Xe?.destroy()),Be.current={}};if(!e.length)return;const Me=()=>{ne&&e.forEach(Xe=>{const Ze=Oe.current[Xe.id];if(!Ze)return;const An=Be.current[Xe.id];if(An){An.target=Ze;return}const Jt=new DR(ze.current,{target:Ze,draggable:ne,throttleDrag:0,edgeDraggable:!1,startDragRotate:0,throttleDragRotate:0,rotatable:!1,scalable:!1,resizable:!1,warpable:!1,pinchable:!1,snappable:!0,snapThreshold:5,isDisplaySnapDigit:!1,isDisplayInnerSnapDigit:!1,snapGap:!0,snapDirections:{top:!0,bottom:!0,left:!1,right:!1},elementSnapDirections:{top:!0,bottom:!0,left:!1,right:!1},clickable:!0,preventClickDefault:!1,preventClickEventOnDrag:!0,checkInput:!1,dragArea:!0,hideDefaultLines:!0,hideChildMoveableDefaultLines:!0,renderDirections:[]});Jt.on("dragStart",Cn=>{const Rt=R.current.findIndex(xt=>xt.id===Xe.id),St=Cn.target,fn=St.getBoundingClientRect().height+Bk;yt(Xe.id),Ve.current={activeId:Xe.id,startIndex:Rt,currentIndex:Rt,itemHeight:fn},St&&(St.style.transition="none",St.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",St.style.zIndex="20"),$r()});let nt=null;Jt.on("drag",Cn=>{const Rt=Cn.target;nt!==null&&cancelAnimationFrame(nt),nt=requestAnimationFrame(()=>{const St=Ve.current;if(St.activeId!==Xe.id)return;const In=Cn.beforeTranslate[1];Rt.style.transform=`translateY(${In}px)`,Rt.style.transition="none";const{itemHeight:fn,startIndex:xt}=St;if(!fn)return;const Rn=Math.round(In/fn),Jn=Uk(xt+Rn,0,R.current.length-1);Jn!==St.currentIndex&&(St.currentIndex=Jn,R.current.forEach((oi,er)=>{if(oi.id===Xe.id)return;const Ei=Oe.current[oi.id];if(!Ei)return;let Dn=0;xt<Jn?er>xt&&er<=Jn&&(Dn=-fn):xt>Jn&&er>=Jn&&er<xt&&(Dn=fn),Ei.style.transform=Dn?`translateY(${Dn}px)`:"",Ei.style.transition="transform 0.2s ease"})),nt=null})}),Jt.on("dragEnd",Cn=>{nt!==null&&(cancelAnimationFrame(nt),nt=null);const Rt=Cn.target,St=Ve.current,{startIndex:In,currentIndex:fn}=St;if(Rt.style.transform="",Rt.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",Rt.style.boxShadow="",R.current.forEach(xt=>{if(xt.id===Xe.id)return;const Rn=Oe.current[xt.id];Rn&&(Rn.style.transform="",Rn.style.transition="")}),In!==fn){const xt=[...R.current],[Rn]=xt.splice(In,1);xt.splice(fn,0,Rn),R.current=xt,j(xt)}setTimeout(()=>{Rt.style.zIndex="",Rt.style.transition="",yt(null)},300),Ve.current={activeId:null,startIndex:0,currentIndex:0,itemHeight:0},ss()}),Jt.on("click",Cn=>{const Rt=Cn.inputEvent.target;Rt.closest(".js-budget-target")||Rt.tagName==="INPUT"||Rt.tagName==="BUTTON"||Zn(Xe.id)}),Be.current[Xe.id]=Jt})},dt=window.setTimeout(Me,80);return()=>{clearTimeout(dt),ke()}},[e,$r,ss,Zn,ne]),F.useEffect(()=>{const ke=()=>{Object.values(Ne.current).forEach(Xe=>Xe?.destroy()),Ne.current={}};if(!n.length)return;const Me=()=>{ne&&n.forEach(Xe=>{const Ze=Ce.current[Xe.id];if(!Ze)return;const An=Ne.current[Xe.id];if(An){An.target=Ze;return}const Jt=new DR(yn.current,{target:Ze,draggable:ne,throttleDrag:0,edgeDraggable:!1,startDragRotate:0,throttleDragRotate:0,rotatable:!1,scalable:!1,resizable:!1,warpable:!1,pinchable:!1,snappable:!0,snapThreshold:5,isDisplaySnapDigit:!1,isDisplayInnerSnapDigit:!1,snapGap:!0,snapDirections:{top:!0,bottom:!0,left:!1,right:!1},elementSnapDirections:{top:!0,bottom:!0,left:!1,right:!1},clickable:!0,preventClickDefault:!1,preventClickEventOnDrag:!0,checkInput:!1,dragArea:!0,hideDefaultLines:!0,hideChildMoveableDefaultLines:!0,renderDirections:[]});Jt.on("dragStart",Cn=>{const Rt=T.current.findIndex(xt=>xt.id===Xe.id),St=Cn.target,fn=St.getBoundingClientRect().height+Bk;Ee(Xe.id),Qe.current={activeId:Xe.id,startIndex:Rt,currentIndex:Rt,itemHeight:fn},St&&(St.style.transition="none",St.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",St.style.zIndex="20"),bt()});let nt=null;Jt.on("drag",Cn=>{const Rt=Cn.target;nt!==null&&cancelAnimationFrame(nt),nt=requestAnimationFrame(()=>{const St=Qe.current;if(St.activeId!==Xe.id)return;const In=Cn.beforeTranslate[1];Rt.style.transform=`translateY(${In}px)`,Rt.style.transition="none";const{itemHeight:fn,startIndex:xt}=St;if(!fn)return;const Rn=Math.round(In/fn),Jn=Uk(xt+Rn,0,T.current.length-1);Jn!==St.currentIndex&&(St.currentIndex=Jn,T.current.forEach((oi,er)=>{if(oi.id===Xe.id)return;const Ei=Ce.current[oi.id];if(!Ei)return;let Dn=0;xt<Jn?er>xt&&er<=Jn&&(Dn=-fn):xt>Jn&&er>=Jn&&er<xt&&(Dn=fn),Ei.style.transform=Dn?`translateY(${Dn}px)`:"",Ei.style.transition="transform 0.2s ease"})),nt=null})}),Jt.on("dragEnd",Cn=>{nt!==null&&(cancelAnimationFrame(nt),nt=null);const Rt=Cn.target,St=Qe.current,{startIndex:In,currentIndex:fn}=St;if(Rt.style.transform="",Rt.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",Rt.style.boxShadow="",T.current.forEach(xt=>{if(xt.id===Xe.id)return;const Rn=Ce.current[xt.id];Rn&&(Rn.style.transform="",Rn.style.transition="")}),In!==fn){const xt=[...T.current],[Rn]=xt.splice(In,1);xt.splice(fn,0,Rn),T.current=xt,C(xt)}setTimeout(()=>{Rt.style.zIndex="",Rt.style.transition="",Ee(null)},300),Qe.current={activeId:null,startIndex:0,currentIndex:0,itemHeight:0},dn.current=Date.now(),Lt()}),Jt.on("click",Cn=>{const Rt=Cn.inputEvent.target;Rt.closest(".js-budget-target")||Rt.tagName==="INPUT"||Zn(Xe.id)}),Ne.current[Xe.id]=Jt})},dt=window.setTimeout(Me,80);return()=>{clearTimeout(dt),ke()}},[n,bt,Lt,Zn,ne]);const Qs=async()=>{if(fe)try{const ke=parseFloat(Y)||0;await S(fe,ke)}catch(ke){console.error("Failed to save budget amount:",ke)}finally{U(null),te("")}},Wi=()=>{O("add"),L(null),A(!0)},ba=ke=>{re.current&&clearTimeout(re.current),!M&&(O("edit"),L(ke),A(!0))},Vr=ke=>{re.current&&clearTimeout(re.current),X(!0),x(ke),setTimeout(()=>X(!1),500)},bn=()=>{A(!1),L(null)},cr=()=>{$(!0)},en=async()=>{$(!1),await _()},Zs=async()=>{J(!1),await E(i)};return u?y.jsx(yj,{message:h?"Still loading... This is normal on slow connections":"Loading your budget...",showTimeout:h}):y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .moveable-control { display: none !important; }
        .moveable-origin { display: none !important; }
        .moveable-line { display: none !important; }
      `}}),y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[y.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"flex items-center gap-2",children:d?c?y.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[y.jsx(sd,{size:16,className:"animate-spin"}),y.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):y.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[y.jsx(u9,{size:16}),y.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):y.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[y.jsx(l9,{size:16}),y.jsx("span",{className:"text-sm font-medium",children:c?"Saving...":"Offline"})]})}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:()=>se(!ne),className:`transition-colors ${ne?"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300":"text-gray-500 hover:text-gray-600 dark:text-zinc-400 dark:hover:text-zinc-300"}`,title:ne?"Lock envelope order":"Unlock to reorder envelopes",children:ne?y.jsx(DL,{size:22}):y.jsx(NL,{size:22})}),y.jsx("button",{onClick:cr,className:"text-orange-500 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",title:"Start Fresh - Clear current month budget",children:y.jsx(sd,{size:22})}),y.jsx(ate,{})]})]}),y.jsx(ite,{amount:r,totalIncome:(t[i]||[]).reduce((ke,Me)=>ke+Me.amount,0),totalAllocated:(a[i]||[]).filter(ke=>n.some(Me=>Me.id===ke.envelopeId)||e.some(Me=>Me.id===ke.envelopeId)).reduce((ke,Me)=>ke+Me.budgetedAmount,0),isLoading:c,variant:"header"}),y.jsx(rte,{currentMonth:i,onMonthChange:ke=>{J(!1),z(ke)}})]}),y.jsxs("div",{className:"pt-[calc(10rem+env(safe-area-inset-top))] p-4 max-w-md mx-auto space-y-6",children:[H&&y.jsx(lte,{currentMonth:i,onCopy:Zs,onDismiss:()=>J(!1)}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Income Sources"}),y.jsx("button",{onClick:Wi,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:y.jsx(Em,{size:20})})]}),(t[i]||[]).length===0?y.jsx("div",{className:"text-center py-6",children:y.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm",children:"No income sources yet. Add your monthly income."})}):y.jsx("div",{className:"space-y-3",children:y.jsx(Ko,{initial:!1,mode:"popLayout",children:(t[i]||[]).map(ke=>y.jsx(Hs.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Jp,{onDelete:()=>Vr(ke),children:y.jsxs("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>ba(ke),children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:ke.name}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly income"})]}),y.jsxs("p",{className:"font-semibold text-green-600 dark:text-emerald-400",children:["$",ke.amount.toFixed(2)]})]})})},ke.id))})})]}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Spending Envelopes"}),y.jsx("button",{onClick:()=>V("/add-envelope"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Envelope",children:y.jsx(Em,{size:20})})]}),n.length===0?y.jsxs("div",{className:"text-center py-6",children:[y.jsx(aw,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),y.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:n.length===0?"No envelopes added to this month. Copy from previous month or add new ones.":"No envelopes yet. Create one to get started."}),y.jsx("button",{onClick:()=>V("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]}):y.jsx("div",{ref:yn,children:y.jsx(Ko,{initial:!1,children:y.jsx("div",{className:"space-y-3",children:n.map((ke,Me)=>{const Xe=(a[i]||[]).find(nt=>nt.envelopeId===ke.id)?.budgetedAmount||0,Ze=p(ke.id),An=()=>{if(Me===0)return;const nt=[...T.current];[nt[Me-1],nt[Me]]=[nt[Me],nt[Me-1]],T.current=nt,C(nt),m(nt)},Jt=()=>{if(Me===n.length-1)return;const nt=[...T.current];[nt[Me],nt[Me+1]]=[nt[Me+1],nt[Me]],T.current=nt,C(nt),m(nt)};return y.jsx(ute,{env:ke,budgetedAmount:Xe,remainingBalance:Ze,editingEnvelopeId:fe,setEditingEnvelopeId:U,editingAmount:Y,setEditingAmount:te,handleBudgetSave:Qs,navigate:V,inputRef:ae,transactions:o,currentMonth:i,setMoveableRef:me,isReorderingActive:Ke,activelyDraggingId:xe,onItemDragStart:Ar,onMoveUp:An,onMoveDown:Jt,isFirst:Me===0,isLast:Me===n.length-1,isReorderUnlocked:ne},ke.id)})})})})]}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[y.jsx(jh,{size:20,className:"text-blue-600 dark:text-blue-400"}),"Piggybanks"]}),y.jsx("button",{onClick:()=>V("/add-envelope?type=piggybank"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Piggybank",children:y.jsx(Em,{size:20})})]}),e.length>0?y.jsx("div",{ref:ze,className:"relative",children:y.jsx(Ko,{initial:!1,children:y.jsx("div",{className:"space-y-3",children:e.map((ke,Me)=>{const dt=()=>{if(Me===0)return;const Ze=[...R.current];[Ze[Me-1],Ze[Me]]=[Ze[Me],Ze[Me-1]],R.current=Ze,j(Ze),m(Ze)},Xe=()=>{if(Me===e.length-1)return;const Ze=[...R.current];[Ze[Me],Ze[Me+1]]=[Ze[Me+1],Ze[Me]],R.current=Ze,j(Ze),m(Ze)};return y.jsx(cte,{piggybank:ke,balance:p(ke.id),onNavigate:Ze=>V(`/envelope/${Ze}`),setMoveableRef:Te(ke.id),isReorderingActive:Ke,activelyDraggingId:st,onItemDragStart:()=>{},onMoveUp:dt,onMoveDown:Xe,isFirst:Me===0,isLast:Me===e.length-1,isReorderUnlocked:ne},ke.id)})})})}):y.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-zinc-400",children:[y.jsx(jh,{size:48,className:"mx-auto mb-3 opacity-30"}),y.jsx("p",{className:"text-sm",children:"No piggybanks yet"}),y.jsx("p",{className:"text-xs mt-1",children:"Click the + button above to create your first piggybank"})]})]}),y.jsx("button",{onClick:()=>V("/add-transaction"),className:"fixed bottom-32 right-6 md:bottom-20 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform z-40 pointer-events-auto",children:y.jsx(Em,{size:28})}),y.jsx(ste,{isVisible:I,onClose:bn,mode:k,initialIncomeSource:B}),y.jsx(ote,{isVisible:Q,onClose:()=>$(!1),onConfirm:en,currentMonth:i,incomeCount:(t[i]||[]).length,totalIncome:(t[i]||[]).reduce((ke,Me)=>ke+Me.amount,0),allocationCount:(a[i]||[]).filter(ke=>n.some(Me=>Me.id===ke.envelopeId)||e.some(Me=>Me.id===ke.envelopeId)).length,totalAllocated:(a[i]||[]).filter(ke=>n.some(Me=>Me.id===ke.envelopeId)||e.some(Me=>Me.id===ke.envelopeId)).reduce((ke,Me)=>ke+Me.budgetedAmount,0),transactionCount:o.filter(ke=>ke.month===i).length,totalTransactionAmount:o.filter(ke=>ke.month===i).reduce((ke,Me)=>ke+Me.amount,0)})]})]})]})},fte=[{id:"1",name:"Amazon Prime",network:"Visa",last4:"7474",color:"#232f3e"},{id:"2",name:"Apple Card",network:"Mastercard",last4:"0274",color:"#e3e3e3"},{id:"3",name:"AA Credit Union",network:"Visa",last4:"3386",color:"#5494DA"}],bj=({selectedCard:n,onCardSelect:e,initialCards:t=fte,disabled:r=!1,isUserSelected:i=!1})=>{const[a,o]=F.useState(t[0]),[c,u]=F.useState(!1),[d,h]=F.useState(!1),[p,m]=F.useState(t),[x,_]=F.useState(null),[E,S]=F.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),T=n||a;F.useEffect(()=>{!n&&e&&p.length>0&&e(p[0])},[n,e,p]);const C=k=>{r||(k.id==="add-new"?h(!0):(o(k),e?.(k),u(!1)))},R=()=>{r||u(!c)},j=k=>{r||_(k)},z=()=>{if(x&&!r){const k=p.filter(O=>O.id!==x.id);if(m(k),T.id===x.id&&k.length>0){const O=k[0];o(O),e?.(O)}_(null)}},V=()=>{_(null)},I=()=>{if(r)return;if(E.last4.length!==4||!/^\d{4}$/.test(E.last4)){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!E.name.trim()){alert("Please enter a card name");return}const k={id:`custom-${Date.now()}`,name:E.name.trim(),network:E.network,last4:E.last4,color:E.color},O=[...p,k];m(O),o(k),e?.(k),h(!1),u(!1),S({name:"",network:"Visa",last4:"",color:"#3b82f6"})},A=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&y.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),y.jsxs("div",{onClick:R,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[y.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:T.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:T.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",T.last4]})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:T.name}),y.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(...",T.last4,")"]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-gray-400",children:c?"":""}),!i&&y.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),c&&y.jsx("div",{className:"card-stack-dropdown",children:y.jsx("div",{className:"card-stack",children:y.jsx(Ko,{initial:!1,mode:"popLayout",children:[...p,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((k,O)=>{const B=T.id===k.id,L=k.id==="add-new";return y.jsx(Hs.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Jp,{onDelete:()=>!L&&!r&&j(k),threshold:-80,children:y.jsxs("div",{className:`card-stack-item ${B?"selected":""} ${L?"add-new-card":""}`,onClick:()=>C(k),style:{backgroundColor:L?"#f3f4f6":k.color,color:L?"#374151":k.color==="#e3e3e3"?"#000":"#fff",zIndex:p.length-O},children:[y.jsxs("div",{className:"card-header",children:[y.jsx("span",{className:"card-network",children:L?"":k.network}),B&&!L&&y.jsx("span",{className:"selected-indicator",children:""})]}),y.jsxs("div",{className:"card-details",children:[y.jsx("div",{className:"card-name",children:k.name}),y.jsx("div",{className:"card-number",children:L?"":` ${k.last4}`})]}),L&&y.jsx("div",{className:"add-icon",children:y.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),y.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},k.id)})})})})]}),d&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Card"}),y.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Name"}),y.jsx("input",{type:"text",value:E.name,onChange:k=>S({...E,name:k.target.value}),placeholder:"e.g., My Chase Card",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Network"}),y.jsxs("select",{value:E.network,onChange:k=>S({...E,network:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[y.jsx("option",{value:"Visa",children:"Visa"}),y.jsx("option",{value:"Mastercard",children:"Mastercard"}),y.jsx("option",{value:"Amex",children:"Amex"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),y.jsx("input",{type:"text",value:E.last4,onChange:k=>S({...E,last4:k.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:A.map(k=>y.jsx("button",{onClick:()=>S({...E,color:k}),className:`w-full h-10 rounded-lg border-2 transition-all ${E.color===k?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:k}},k))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),y.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:E.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:E.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",E.last4||"0000"]})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:I,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add Card"})]})]})]})}),x&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",y.jsx("span",{className:"font-medium",children:x.name}),"?"]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:V,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:z,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},xj=({isVisible:n,onClose:e,mode:t,currentEnvelope:r,initialTransaction:i})=>{const{addTransaction:a,updateTransaction:o,deleteTransaction:c,currentMonth:u}=pr(),[d,h]=F.useState(""),[p,m]=F.useState(""),[x,_]=F.useState(""),[E,S]=F.useState(new Date().toISOString().split("T")[0]),[T,C]=F.useState(null);if(F.useEffect(()=>{if(!n)return;const I=window.setTimeout(()=>{if(t==="edit"&&i){h(i.amount.toString()),m(i.merchant||""),_(i.description),C(i.paymentMethod||null);try{const A=new Date(i.date);isNaN(A.getTime())?(console.warn("Invalid date in transaction:",i.date),S(new Date().toISOString().split("T")[0])):S(A.toISOString().split("T")[0])}catch(A){console.error("Error parsing transaction date:",A),S(new Date().toISOString().split("T")[0])}}else h(""),m(""),_(""),S(new Date().toISOString().split("T")[0]),C(null)},0);return()=>window.clearTimeout(I)},[n,t,i]),!n)return null;const R=async I=>{I.preventDefault();const A=parseFloat(d);if(isNaN(A)||A<=0){console.log(" Invalid amount:",d);return}console.log(" Saving transaction:",{mode:t,amount:A,note:x,date:E,envelopeId:r.id,paymentMethod:T});try{const k=new Date(E),O=`${k.getFullYear()}-${(k.getMonth()+1).toString().padStart(2,"0")}`;if(O!==u){const B=`This transaction date (${O}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(B))return}t==="add"?(console.log(" Adding income transaction"),await a({amount:A,description:x,merchant:p||void 0,date:new Date(E).toISOString(),envelopeId:r.id,type:"Income",reconciled:!1,paymentMethod:T||void 0})):t==="spend"?(console.log(" Adding expense transaction"),await a({amount:A,description:x,merchant:p||void 0,date:new Date(E).toISOString(),envelopeId:r.id,type:"Expense",reconciled:!1,paymentMethod:T||void 0})):t==="edit"&&i&&(console.log(" Updating transaction"),await o({...i,amount:A,description:x,merchant:p||void 0,date:new Date(E).toISOString(),paymentMethod:T||void 0})),console.log(" Transaction saved successfully"),e()}catch(k){console.error(" Error saving transaction:",k),alert("Failed to save transaction: "+(k instanceof Error?k.message:"Unknown error"))}},j=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},z=t==="add"?"Add Money":t==="spend"?"Spend Money":"Edit Transaction",V=t==="add"?"text-green-500":"text-red-500";return y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),y.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:z}),y.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!d||parseFloat(d)<=0,children:"Save"})]}),y.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${V}`,children:"$"}),y.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:d,onChange:I=>{const A=I.target.value;(A===""||!isNaN(parseFloat(A))&&parseFloat(A)>=0)&&h(A)},onKeyDown:I=>{(I.key==="e"||I.key==="E"||I.key==="+"||I.key==="-")&&I.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${V} placeholder-gray-700`})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),y.jsx("input",{type:"text",value:p,onChange:I=>m(I.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsx(bj,{selectedCard:T,onCardSelect:C}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),y.jsx("input",{type:"text",value:x,onChange:I=>_(I.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const I=new Date(E);return`${I.getFullYear()}-${(I.getMonth()+1).toString().padStart(2,"0")}`!==u?y.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[y.jsx(Ju,{size:14}),y.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),y.jsx("input",{type:"date",value:E,onChange:I=>{console.log("Date changed to:",I.target.value),S(I.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),t==="edit"&&y.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:y.jsxs("button",{type:"button",onClick:j,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[y.jsx(uN,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},hte=({isVisible:n,onClose:e,sourceEnvelope:t})=>{const{envelopes:r,transferFunds:i}=pr(),[a,o]=F.useState(""),[c,u]=F.useState(""),[d,h]=F.useState(""),[p,m]=F.useState(new Date().toISOString().split("T")[0]),x=r.filter(S=>S.id!==t.id);if(F.useEffect(()=>{if(!n)return;const S=window.setTimeout(()=>{o(""),u(""),h(""),m(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(S)},[n]),!n)return null;const _=S=>{S.preventDefault();const T=parseFloat(c);isNaN(T)||T<=0||!a||(i(t.id,a,T,d,new Date(p)),e())},E=r.find(S=>S.id===a);return y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),y.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),y.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!c||parseFloat(c)<=0||!a,children:"Transfer"})]}),y.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),y.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:t.name})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),y.jsxs("select",{value:a,onChange:S=>o(S.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[y.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),x.map(S=>y.jsx("option",{value:S.id,className:"bg-white dark:bg-zinc-900",children:S.name},S.id))]})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),y.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:c,onChange:S=>u(S.target.value),onKeyDown:S=>{(S.key==="e"||S.key==="E"||S.key==="+"||S.key==="-")&&S.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),y.jsx("input",{type:"text",value:d,onChange:S=>h(S.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),y.jsx("input",{type:"date",value:p,onChange:S=>m(S.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),E&&c&&parseFloat(c)>0&&y.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",y.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(c).toFixed(2)]})," from"," ",y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:t.name})," to"," ",y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:E.name})]})]})]})})},pte=n=>{if(!n)return"No Date";try{let e;return n&&typeof n=="object"&&n.toDate&&typeof n.toDate=="function"?e=n.toDate():typeof n=="number"?n<1e10?e=new Date((n+978307200)*1e3):e=new Date(n):e=new Date(n),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},gte=n=>{const e=typeof n=="string"?parseFloat(n):n;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},_j=({transaction:n,envelopeName:e,onReconcile:t,onEdit:r})=>{if(!n)return null;console.log(" Transaction payment method:",n.paymentMethod);const i=n.type==="Income",a=n.type==="Expense";let o="text-gray-900 dark:text-white";return i&&(o="text-green-600 dark:text-green-400"),a&&(o="text-red-600 dark:text-red-400"),y.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[y.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:n.merchant||n.description||"No Description"}),n.reconciled&&y.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),n.merchant&&n.description&&n.description!==n.merchant&&y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:n.description}),y.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[y.jsx("span",{children:pte(n.date)}),e&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),n.paymentMethod&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:n.paymentMethod.color}}),y.jsx("span",{className:"truncate max-w-[80px]",children:n.paymentMethod.name})]})]})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${o}`,children:[a?"-":i?"+":"",gte(n.amount)]}),t?y.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),t()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":n.reconciled?"Mark as unreconciled":"Mark as reconciled",children:n.reconciled?y.jsx(b2,{className:"text-green-500",size:20}):y.jsx(_2,{className:"text-gray-400",size:20})}):y.jsx("span",{children:n.reconciled?y.jsx(b2,{className:"text-green-500",size:20}):y.jsx(_2,{className:"text-gray-400",size:20})})]})]})},mte=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n),vte=()=>{const{id:n}=G6(),{envelopes:e,transactions:t,fetchData:r,isLoading:i,deleteEnvelope:a,removeEnvelopeFromMonth:o,renameEnvelope:c,updateTransaction:u,deleteTransaction:d,restoreTransaction:h,getEnvelopeBalance:p,currentMonth:m}=pr(),{showToast:x}=Bc(),_=rs(),E=ns(),[S,T]=F.useState(!1),[C,R]=F.useState(!1),[j,z]=F.useState(!1),[V,I]=F.useState(null);F.useEffect(()=>{e.length===0&&r()},[]);const A=e.find(M=>M.id===n);if(!A)return i?y.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:y.jsx("p",{children:"Loading envelope..."})}):y.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:y.jsx("p",{children:"Envelope not found."})});if(A.isPiggybank){const M=t.filter(X=>X.envelopeId===A.id);console.log(" Piggybank:",A.name),console.log(" Created at:",A.createdAt),console.log(" Transactions:",M.map(X=>({date:X.date,description:X.description,amount:X.amount})))}const k=t.filter(M=>M.envelopeId===A.id).filter(M=>{if(A.isPiggybank){if(M.description==="Monthly Allocation"&&M.isAutomatic||!A.createdAt)return!0;const X=new Date(A.createdAt);return new Date(M.date)>=X}return M.month===m||!M.month}).sort((M,X)=>new Date(X.date).getTime()-new Date(M.date).getTime()),O=()=>{E.state?.fromGlobalFAB?_("/"):_(-1)},B=()=>{n&&(A.isPiggybank?a(n):o(n,m),_(-1))},L=M=>{const X={...M,reconciled:!M.reconciled};u(X)};return y.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-28",children:[y.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[y.jsx("button",{onClick:()=>{const M=prompt("Rename envelope:",A.name);M&&M.trim()&&n&&c(n,M)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),y.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:A.name}),y.jsx("button",{onClick:O,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),y.jsx("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const M=A.isPiggybank?p(A.id):p(A.id,m);return console.log(`Debug: Envelope ${A.name} Balance:`,M),y.jsx("span",{className:`text-xl font-bold ${M<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:mte(M)})})()]})}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>T(!0),children:[y.jsx(rL,{className:"w-5 h-5 mr-3"}),"Add Money"]}),y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>R(!0),children:[y.jsx(tL,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>z(!0),children:[y.jsx($z,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),y.jsxs("section",{className:"mt-6",children:[y.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:k.length===0?y.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):y.jsx(Ko,{initial:!1,mode:"popLayout",children:k.map(M=>y.jsx(Hs.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Jp,{onDelete:()=>{if(!M.id)return;const X={...M};d(M.id),x("Transaction deleted","neutral",()=>h(X))},children:y.jsx(_j,{transaction:M,onReconcile:()=>L(M),onEdit:()=>I(M)})})},M.id))})})]}),y.jsx("div",{className:"mt-8",children:y.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{const M=A.isPiggybank?`Are you sure you want to delete "${A.name}"? This will delete the piggybank and all its history.`:`Are you sure you want to remove "${A.name}" from ${m}? This will delete all transactions for this month only.`;confirm(M)&&B()},children:[y.jsx(uN,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(S||C||V)&&y.jsx(xj,{isVisible:S||C||!!V,onClose:()=>{T(!1),R(!1),I(null)},mode:S?"add":C?"spend":"edit",currentEnvelope:A,initialTransaction:V}),j&&y.jsx(hte,{isVisible:j,onClose:()=>z(!1),sourceEnvelope:A})]})},yte=()=>{const n=rs(),e=F.useRef(null),{envelopes:t,transactions:r,resetData:i,importData:a,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:d,incomeSources:h,allocations:p,currentMonth:m}=pr(),{deleteAccount:x,currentUser:_}=Yi(),[E,S]=F.useState(null),[T,C]=F.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[R,j]=F.useState(!1),[z,V]=F.useState(""),[I,A]=F.useState(!1),[k,O]=F.useState(!1),[B,L]=F.useState(null),[M,X]=F.useState(!1),Q=978307200,$=c?.theme??"system";F.useEffect(()=>{c||d().catch(se=>{console.error("Failed to initialize app settings:",se)})},[d,c]);const H=(se,me)=>{S({type:se,text:me}),setTimeout(()=>S(null),3500)},J=F.useMemo(()=>{const se=t.length,me=r.length,Te=m?p[m]||[]:[],Ce=Object.values(h).reduce((Be,ze)=>Be+ze.length,0),Ne=Te.length,xe=t.reduce((Be,ze)=>{const st=o(ze.id);return Be+(typeof st=="number"?st:0)},0),Ee=0,Qe=r.reduce((Be,ze)=>{let st=0;if(typeof ze.date=="string"){const yt=Date.parse(ze.date);st=Number.isNaN(yt)?0:yt}else typeof ze.date=="number"&&(st=ze.date<2e9?(ze.date+Q)*1e3:ze.date);return Math.max(Be,st)},0),Oe=Ee||Qe?new Date(Math.max(Ee,Qe)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:se,transactionCount:me,incomeSourceCount:Ce,allocationCount:Ne,totalBalance:xe,lastUpdated:Oe}},[t,r,h,p,m]),re=()=>{try{console.log(" Creating backup..."),console.log(" Envelopes in store:",t.map(xe=>({id:xe.id,name:xe.name,isPiggybank:xe.isPiggybank,hasPiggybankConfig:!!xe.piggybankConfig,piggybankConfig:xe.piggybankConfig})));const se={appVersion:"2.1 (PWA)",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:t.map(xe=>({...xe,currentBalance:(()=>{const Ee=o(xe.id);return typeof Ee=="number"?Ee:0})(),lastUpdated:new Date().toISOString()})),transactions:r,allocations:p,incomeSources:h};console.log(" Backup data created:",{envelopeCount:se.envelopes.length,piggybankEnvelopes:se.envelopes.filter(xe=>xe.isPiggybank).length,sampleEnvelope:se.envelopes.find(xe=>xe.isPiggybank)||se.envelopes[0]});const me=new Blob([JSON.stringify(se,null,2)],{type:"application/json"}),Te=URL.createObjectURL(me),Ce=document.createElement("a");Ce.href=Te,Ce.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ce),Ce.click(),document.body.removeChild(Ce),URL.revokeObjectURL(Te);const Ne=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",Ne),C(Ne),L({success:!0,message:"Backup downloaded successfully."})}catch(se){console.error(se),L({success:!1,message:"Failed to create backup file.",onRetry:re})}},fe=()=>{O(!0),L(null);try{const se=["Date","Merchant","Notes","Amount","Type","Envelope","Reconciled"],me=r.map(Ee=>{const Qe=t.find(st=>st.id===Ee.envelopeId)?.name||"Unknown",Oe=(Ee.merchant||"").replace(/"/g,'""'),Be=(Ee.description||"").replace(/"/g,'""');let ze="Invalid Date";if(Ee.date){if(typeof Ee.date=="string")ze=Ee.date.split("T")[0];else if(typeof Ee.date=="number"){const st=Ee.date<2e9?(Ee.date+Q)*1e3:Ee.date;ze=new Date(st).toISOString().split("T")[0]}}return[ze,`"${Oe}"`,`"${Be}"`,Ee.amount.toFixed(2),Ee.type,`"${Qe}"`,Ee.reconciled?"Yes":"No"].join(",")}),Te=[se.join(","),...me].join(`
`),Ce=new Blob([Te],{type:"text/csv;charset=utf-8;"}),Ne=URL.createObjectURL(Ce),xe=document.createElement("a");xe.href=Ne,xe.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),URL.revokeObjectURL(Ne),L({success:!0,message:"Transactions CSV exported successfully."})}catch(se){console.error(se),L({success:!1,message:"Failed to export CSV. Please try again.",onRetry:fe})}finally{O(!1)}},U=()=>{e.current?.click()},Y=se=>{const me=se.target.files?.[0];if(!me)return;const Te=new FileReader;Te.onload=async Ce=>{try{const Ne=JSON.parse(Ce.target?.result),xe=await a(Ne);if(!xe.success){H("error",xe.message);return}if(Ne.appSettings?.theme)try{await u({theme:Ne.appSettings.theme})}catch(Ee){console.error("Failed to update imported settings:",Ee)}else if(Ne.appSettings?.isDarkMode!==void 0)try{const Ee=Ne.appSettings.isDarkMode?"dark":"light";await u({theme:Ee})}catch(Ee){console.error("Failed to update imported settings:",Ee)}H("success",`Loaded ${Ne.envelopes?.length??0} envelopes, ${Ne.transactions?.length??0} transactions, ${Ne.allocations?Object.keys(Ne.allocations).reduce((Ee,Qe)=>Ee+(Ne.allocations[Qe]?.length||0),0):0} allocations, and ${Ne.incomeSources?Object.keys(Ne.incomeSources).reduce((Ee,Qe)=>Ee+(Ne.incomeSources[Qe]?.length||0),0):0} income sources.`)}catch(Ne){console.error(Ne),H("error","Invalid backup file. Please verify the JSON.")}},Te.readAsText(me),se.target.value=""},te=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await i(),H("success","All data has been permanently deleted."),n("/")}catch(se){console.error("Reset failed:",se),H("error","Failed to delete all data. Some data may remain.")}},ae=async()=>{if(!z.trim()){H("error","Please enter your password to confirm account deletion.");return}j(!0);try{await i(),await x(z)?H("success","Your account has been permanently deleted."):H("error","Failed to delete account. Please try again.")}catch(se){console.error("Account deletion failed:",se),H("error","Failed to delete account. Please try again.")}finally{j(!1),A(!1),V("")}},ne=async()=>{if(!_){H("error","You must be logged in to clean up data.");return}X(!0);try{const se=await hp.cleanupOrphanedData(_.id),me=se.orphanedAllocationsDeleted+se.orphanedTransactionsDeleted;me>0?H("success",`Cleaned ${me} orphaned items: ${se.orphanedAllocationsDeleted} allocations and ${se.orphanedTransactionsDeleted} transactions from ${se.details.monthsProcessed.length} months.`):H("success","No orphaned data found. Your database is already clean!")}catch(se){console.error("Cleanup failed:",se),H("error","Failed to clean up orphaned data. Please try again.")}finally{X(!1)}};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[y.jsx("button",{onClick:()=>n(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),y.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto pb-24",children:[E&&y.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${E.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[E.type==="success"?y.jsx(S0,{size:18}):y.jsx(vx,{size:18}),E.text]}),y.jsx("section",{children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(w2,{className:"text-blue-500",size:22}),y.jsxs("div",{children:[y.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),y.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:J.envelopeCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:J.transactionCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:J.incomeSourceCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:J.allocationCount})]})]})]})}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[$==="light"&&y.jsx("span",{className:"text-orange-500 text-lg",children:""}),$==="dark"&&y.jsx("span",{className:"text-purple-500 text-lg",children:""}),$==="system"&&y.jsx("span",{className:"text-gray-500 text-lg",children:""}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:$})]}),y.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),y.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(se=>y.jsx("button",{onClick:async()=>{try{await u({theme:se.value})}catch(me){console.error("Failed to update theme setting:",me)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${$===se.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:se.label},se.value))})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[y.jsxs("button",{onClick:re,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(w2,{className:"text-blue-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",T]})]})]}),y.jsx(Hl,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:U,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(r9,{className:"text-blue-500",size:20}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),y.jsx(Hl,{className:"text-gray-400",size:18})]}),y.jsx("div",{className:"p-4",children:y.jsxs("button",{onClick:fe,disabled:k,className:"w-full flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed rounded-xl border border-gray-100 dark:border-zinc-800 px-4 py-3 bg-white dark:bg-zinc-900",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[k?y.jsx(E2,{className:"text-blue-500 animate-spin",size:20}):y.jsx(vL,{className:"text-blue-500",size:20}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:k?"Preparing CSV":"Export Transactions (CSV)"})]}),y.jsx(Hl,{className:"text-gray-400",size:18})]})}),y.jsx("input",{type:"file",ref:e,onChange:Y,accept:".json",className:"hidden"})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[y.jsx("p",{children:"Create regular backups before major changes."}),y.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),y.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),y.jsx("p",{children:"Restoring replaces all current envelopes, transactions, budget allocations, income sources, and settings."})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[y.jsxs("button",{onClick:te,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(vx,{className:"text-red-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete all envelopes, transactions, allocations, income sources, and settings"})]})]}),y.jsx(Hl,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:ne,disabled:M,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800 disabled:opacity-60 disabled:cursor-not-allowed",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[M?y.jsx(E2,{className:"text-orange-500 animate-spin",size:20}):y.jsx(qL,{className:"text-orange-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:M?"Cleaning Data...":" Purge Orphaned Data"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Remove allocations and transactions pointing to deleted envelopes"})]})]}),y.jsx(Hl,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:()=>A(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(Ju,{className:"text-red-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),y.jsx(Hl,{className:"text-gray-400",size:18})]})]})]}),y.jsx("div",{className:"text-center py-4",children:y.jsx("p",{className:"text-xs text-gray-400 dark:text-zinc-500",children:"Version 1.2.0 (PWA)"})}),B&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[B.success?y.jsx(S0,{className:"text-green-500",size:24}):y.jsx(Ju,{className:"text-red-500",size:24}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:B.success?"Success":"Error"})]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:B.message}),y.jsxs("div",{className:"flex gap-2",children:[B.onRetry&&y.jsx("button",{onClick:()=>{L(null),B.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),y.jsx("button",{onClick:()=>L(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),I&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx(Ju,{className:"text-red-500",size:24}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),y.jsx("input",{type:"password",value:z,onChange:se=>V(se.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>{A(!1),V("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:ae,disabled:R||!z.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Deleting...":"Delete Account"})]})]})})]})]})},bte=()=>{const{addEnvelope:n,setEnvelopeAllocation:e,currentMonth:t}=pr(),{showToast:r}=Bc(),i=rs(),[a]=Mz(),[o,c]=F.useState(""),u=a.get("type")==="piggybank",[d,h]=F.useState(""),[p,m]=F.useState(""),[x,_]=F.useState("#3B82F6"),[E,S]=F.useState(!1),T=async C=>{if(C.preventDefault(),!o.trim()||E)return;S(!0);const R=pr.getState().envelopes,z=(R.length>0?Math.max(...R.map(k=>k.orderIndex??0)):-1)+1,V=u?new Date(`${t}-01T00:00:00`):new Date,I={name:o,currentBalance:0,lastUpdated:new Date().toISOString(),createdAt:V.toISOString(),isActive:!0,orderIndex:z};u&&(I.isPiggybank=!0,I.piggybankConfig={targetAmount:d?parseFloat(d):void 0,monthlyContribution:parseFloat(p||"0"),color:x,icon:"piggy-bank"}),n(I).then(k=>{if(k){const O=u?parseFloat(p||"0"):0;e(k,O).catch(B=>console.error("Failed to create allocation:",B)),setTimeout(()=>{i("/")},50)}}).catch(k=>{console.error("Failed to create envelope:",k),r(k.message||"Failed to create envelope","error"),S(!1)})};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-28",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[y.jsx("button",{onClick:()=>i("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:y.jsx(Vh,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:u?"New Piggybank":"New Envelope"})]}),y.jsx("div",{className:"p-4 max-w-md mx-auto",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[y.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:y.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:u?y.jsx(jh,{size:40}):y.jsx(bL,{size:40})})}),y.jsxs("form",{onSubmit:T,className:"p-6 space-y-6 pb-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:u?"Piggybank Name":"Envelope Name"}),y.jsx("input",{type:"text",id:"name",value:o,onChange:C=>c(C.target.value),placeholder:u?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),u&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"monthly-contribution",value:p,onChange:C=>m(C.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:u})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"target-amount",value:d,onChange:C=>h(C.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(C=>y.jsx("button",{type:"button",onClick:()=>_(C.value),className:`w-full aspect-square rounded-lg transition-all ${x===C.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:C.value},title:C.label},C.value))})]})]}),y.jsxs("div",{className:"pt-4 flex gap-3",children:[y.jsx("button",{type:"button",onClick:()=>i("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:!o.trim()||u&&!p||E,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${o.trim()&&(!u||p)&&!E?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:E?"Creating...":u?"Create Piggybank":"Create Envelope"})]})]})]})})]})},xte=({envelopes:n,transactionAmount:e,onSplitChange:t})=>{const[r,i]=F.useState([]),[a,o]=F.useState({}),[c,u]=F.useState(e),d=_=>{i(E=>E.includes(_)?E.filter(S=>S!==_):[...E,_])},h=(_,E)=>{o(S=>({...S,[_]:E}))};F.useEffect(()=>{if(r.length===1){const _=r[0];o({[_]:e})}},[r.length,e]),F.useEffect(()=>{const _=Object.values(a).reduce((E,S)=>E+(S||0),0);u(e-_),t(a)},[a,e,t]),F.useEffect(()=>{const _={...a};Object.keys(_).forEach(E=>{r.includes(E)||delete _[E]}),Object.keys(_).length!==Object.keys(a).length&&o(_)},[r,a]);const p=()=>{i([]),o({})},m=Math.abs(c)<.01&&r.length>0,x=r.length>0&&Math.abs(c)>.01;return y.jsxs("div",{className:"space-y-3",children:[r.length>1&&y.jsxs("div",{className:`p-3 rounded-lg ${x?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":m?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),y.jsxs("span",{className:`font-bold text-lg ${x?"text-red-600 dark:text-red-400":m?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",c.toFixed(2)]})]}),x&&y.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:r.length>1?"Split Across Envelopes":"Select Envelope"}),r.length>0&&y.jsx("button",{type:"button",onClick:p,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),y.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-zinc-800 rounded-lg",children:n.map(_=>y.jsxs("div",{className:"flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsx("input",{type:"checkbox",checked:r.includes(_.id),onChange:()=>d(_.id),className:"mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),y.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:_.name}),r.includes(_.id)&&r.length>1&&y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400",children:"$"}),y.jsx("input",{type:"number",min:"0",step:"0.01",value:a[_.id]||"",onChange:E=>h(_.id,parseFloat(E.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},_.id))})]})},_te=()=>{const n=rs(),{envelopes:e,addTransaction:t,currentMonth:r}=pr(),[i,a]=F.useState(""),[o,c]=F.useState(""),[u,d]=F.useState(""),[h,p]=F.useState(new Date().toISOString().split("T")[0]),[m,x]=F.useState("expense"),[_,E]=F.useState({}),[S,T]=F.useState(null),[C,R]=F.useState(!1),j=L=>{T(L),S&&R(!0)},z=Object.keys(_).length>0,V=Object.values(_).reduce((L,M)=>L+(M||0),0),I=Math.abs(V-parseFloat(i||"0"))<.01,A=i&&parseFloat(i)>0&&z&&I,k=async L=>{if(L.preventDefault(),!A)return;const[M,X,Q]=h.split("-").map(Number),$=new Date(M,X-1,Q,12,0,0);console.log(" Selected date:",h),console.log(" Parsed date:",$.toISOString());try{const[H,J]=h.split("-").map(Number),re=`${H}-${J.toString().padStart(2,"0")}`;if(re!==r){const U=`This transaction date (${re}) does not match the current budget month (${r}). Are you sure you want to save it?`;if(!window.confirm(U))return}const fe=Object.entries(_).filter(([U,Y])=>Y>0);Promise.all(fe.map(([U,Y])=>t({amount:Y,description:u,merchant:o||void 0,date:$.toISOString(),envelopeId:U,type:m==="income"?"Income":"Expense",reconciled:!1,paymentMethod:S||void 0}).catch(te=>console.error("Failed to create transaction:",te)))).catch(U=>console.error("Failed to create transactions:",U)),n("/")}catch(H){console.error("Error saving transaction:",H),alert("Failed to save transaction: "+(H instanceof Error?H.message:"Unknown error"))}},O=[...e].sort((L,M)=>{const X=L.orderIndex??0,Q=M.orderIndex??0;return X!==Q?X-Q:L.name.localeCompare(M.name)}),B=m==="income"?"text-green-500":"text-red-500";return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-10 flex items-center justify-between",children:[y.jsx("button",{onClick:()=>n(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),y.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),y.jsx("button",{onClick:k,disabled:!A,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),y.jsx("div",{className:"p-4 max-w-md mx-auto pb-24",children:y.jsxs("form",{onSubmit:k,className:"space-y-6",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:y.jsxs("div",{className:"flex",children:[y.jsx("button",{type:"button",onClick:()=>x("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${m==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),y.jsx("button",{type:"button",onClick:()=>x("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${m==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${B}`,children:"$"}),y.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:i,onChange:L=>{const M=L.target.value;(M===""||!isNaN(parseFloat(M))&&parseFloat(M)>=0)&&a(M)},onKeyDown:L=>{(L.key==="e"||L.key==="E"||L.key==="+"||L.key==="-")&&L.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${B} placeholder-gray-700`})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),y.jsx("input",{type:"text",value:o,onChange:L=>c(L.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsx(bj,{selectedCard:S,onCardSelect:j,isUserSelected:C}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),y.jsx("input",{type:"text",value:u,onChange:L=>d(L.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[L,M]=h.split("-").map(Number);return`${L}-${M.toString().padStart(2,"0")}`!==r?y.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[y.jsx(Ju,{size:14}),y.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),y.jsx("input",{type:"date",value:h,onChange:L=>p(L.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:y.jsx(xte,{envelopes:O,transactionAmount:parseFloat(i)||0,onSplitChange:E})})]})})]})},wte=()=>{const n=rs(),{transactions:e,envelopes:t,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:o}=pr(),{showToast:c}=Bc(),[u,d]=F.useState(!1),[h,p]=F.useState(""),[m,x]=F.useState("all"),[_,E]=F.useState("All"),[S,T]=F.useState(!1),[C,R]=F.useState("all"),[j,z]=F.useState(!1),[V,I]=F.useState("all"),[A,k]=F.useState(()=>{const H=new Date;return H.setMonth(H.getMonth()-1),H.toISOString().split("T")[0]}),[O,B]=F.useState(()=>new Date().toISOString().split("T")[0]),[L,M]=F.useState(null),X=F.useMemo(()=>{console.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:j,currentMonth:o,transactionMonths:e.map(re=>({id:re.id,month:re.month,date:re.date,description:re.description}))});let H=e;return j||(H=e.filter(re=>re.month===o||!re.month),console.log(" After month filter:",{remaining:H.length,currentMonth:o,filteredTransactions:H.map(re=>({id:re.id,description:re.description,month:re.month,matchesCurrentMonth:re.month===o}))})),H.map(re=>{if(!re)return null;let fe=re.date;if(typeof re.date=="number"){const Y=(re.date+978307200)*1e3;fe=new Date(Y).toISOString()}else if(!re.date||typeof re.date!="string")return null;return{...re,date:fe}}).filter(Boolean).filter(re=>{if(h){const U=h.toLowerCase(),Y=t.find(ne=>ne.id===re.envelopeId)?.name.toLowerCase()||"",te=re.amount.toFixed(2);if(!(re.description.toLowerCase().includes(U)||Y.includes(U)||te.includes(U)))return!1}if(m!=="all"&&re.envelopeId!==m||_!=="All"&&re.type!==_||V!=="all"&&(!re.paymentMethod||re.paymentMethod.id!==V)||!re.date||typeof re.date!="string")return!1;const fe=re.date.split("T")[0];return!(C!=="all"&&new Date(fe).getMonth()!==parseInt(C)||S&&!re.reconciled)}).sort((re,fe)=>new Date(fe.date).getTime()-new Date(re.date).getTime())},[e,t,h,m,_,V,A,O,S,j,o]);console.log(" Final filtered transactions:",{count:X.length,transactions:X.map(H=>({id:H.id,description:H.description,amount:H.amount,date:H.date,month:H.month,type:H.type}))});const Q=L?t.find(H=>H.id===L.envelopeId):null,$=H=>{const J={...H,reconciled:!H.reconciled};r(J)};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:y.jsx(Vh,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),y.jsx("button",{onClick:()=>d(!u),className:`p-2 rounded-full transition-colors ${u?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:y.jsx(_L,{size:20,className:u?"fill-current":""})})]}),y.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[y.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",o]}),y.jsx("button",{onClick:()=>z(!j),className:`text-sm px-3 py-1 rounded-md ${j?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"}`,children:j?"Current Month Only":"All Time"})]}),y.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),y.jsxs("select",{value:V,onChange:H=>I(H.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Payment Methods"}),[{id:"1",name:"Amazon Prime",network:"Visa",last4:"7474",color:"#232f3e"},{id:"2",name:"Apple Card",network:"Mastercard",last4:"0274",color:"#e3e3e3"},{id:"3",name:"AA Credit Union",network:"Visa",last4:"3386",color:"#5494DA"}].map(H=>y.jsx("option",{value:H.id,children:H.name},H.id))]})]})}),y.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${u?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsxs("div",{className:"relative",children:[y.jsx(UL,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),y.jsx("input",{type:"text",placeholder:"Search transactions...",value:h,onChange:H=>p(H.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),h&&y.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:y.jsx(xv,{size:16})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),y.jsxs("select",{value:m,onChange:H=>x(H.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Envelopes"}),t.sort((H,J)=>H.name.localeCompare(J.name)).map(H=>y.jsx("option",{value:H.id,children:H.name},H.id))]})]}),y.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(H=>y.jsx("button",{onClick:()=>E(H),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${_===H?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:H},H))}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),y.jsxs("select",{value:C,onChange:H=>R(H.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(H,J)=>J).map(H=>y.jsx("option",{value:H,children:new Date(2022,H).toLocaleString("default",{month:"long"})},H))]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),y.jsx("div",{className:"relative",children:y.jsx("input",{type:"date",value:A,onChange:H=>k(H.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),y.jsx("div",{className:"relative",children:y.jsx("input",{type:"date",value:O,onChange:H=>B(H.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),y.jsx("button",{onClick:()=>T(!S),className:`w-11 h-6 rounded-full transition-colors relative ${S?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${S?"translate-x-5":"translate-x-0"}`})})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),y.jsx("button",{onClick:()=>z(!j),className:`w-11 h-6 rounded-full transition-colors relative ${j?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${j?"translate-x-5":"translate-x-0"}`})})]})]})}),y.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:X.length===0?y.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):y.jsx(Ko,{initial:!1,mode:"popLayout",children:X.map(H=>{const J=t.find(re=>re.id===H.envelopeId);return y.jsx(Hs.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Jp,{onDelete:()=>{if(!H.id)return;const re={...H};i(H.id),c("Transaction deleted","neutral",()=>a(re))},children:y.jsx(_j,{transaction:H,envelopeName:J?.name||"Unknown Envelope",onReconcile:()=>$(H),onEdit:()=>{J?M(H):alert("Cannot edit: Envelope deleted.")}})})},H.id)})})})}),L&&Q&&y.jsx(xj,{isVisible:!!L,onClose:()=>M(null),mode:"edit",currentEnvelope:Q,initialTransaction:L})]})},wj=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],Ete=n=>{if(!n)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=wj.map(c=>({...c,met:c.regex.test(n)})).filter(c=>c.met).length;let i,a,o;return r<=1?(i="weak",a="text-red-500",o="Weak"):r<=3?(i="medium",a="text-yellow-500",o="Medium"):r===4?(i="strong",a="text-blue-500",o="Strong"):(i="very-strong",a="text-green-500",o="Very Strong"),{score:r,level:i,color:a,label:o}},PS=n=>{const e=wj.map(i=>({...i,met:i.regex.test(n)})),t=Ete(n),r=e.every(i=>i.met);return{requirements:e,strength:t,isValid:r,isEmpty:!n.trim()}},Ste=({password:n,className:e=""})=>{const{strength:t,isEmpty:r}=PS(n);return r?null:y.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[y.jsx("div",{className:"flex-1",children:y.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>y.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=t.score?t.score<=1?"bg-red-500":t.score<=3?"bg-yellow-500":t.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),y.jsx("span",{className:`text-sm font-medium ${t.color}`,children:t.label})]})},Tte=({password:n,className:e=""})=>{const{requirements:t,isEmpty:r}=PS(n);return r?null:y.jsx("div",{className:`space-y-1 ${e}`,children:t.map(i=>y.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?y.jsx(Kz,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):y.jsx(xv,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),y.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},Ate=()=>{const[n,e]=F.useState(""),[t,r]=F.useState(""),[i,a]=F.useState(""),[o,c]=F.useState(!1),[u,d]=F.useState(!1),[h,p]=F.useState(!1),[m,x]=F.useState(!1),{login:_,register:E,sendPasswordReset:S,isLoading:T,loginError:C,clearError:R}=Yi(),j=PS(t),z=async I=>{if(I.preventDefault(),R(),n.trim()&&t.trim())if(u){if(!i.trim()||!j.isValid)return;await E(n.trim(),t,i.trim())}else await _(n.trim(),t)},V=async I=>{I.preventDefault(),n.trim()&&await S(n.trim())&&x(!0)};return F.useEffect(()=>{e(""),r(""),a(""),x(!1)},[u,h]),y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:h?y.jsxs("form",{onSubmit:V,className:"space-y-6",children:[y.jsxs("div",{className:"text-center mb-2",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(mx,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{id:"reset-email",type:"email",value:n,onChange:I=>e(I.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:T,autoComplete:"email"})]})]}),m?y.jsxs("div",{className:"text-center py-4",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:y.jsx(mx,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),y.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),y.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",y.jsx("span",{className:"font-medium",children:n})]}),y.jsxs("button",{type:"button",onClick:()=>p(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[y.jsx(Vh,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"submit",disabled:T||!n.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:T?"Sending...":"Send Reset Link"}),y.jsx("div",{className:"mt-4 text-center",children:y.jsxs("button",{type:"button",onClick:()=>p(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:T,children:[y.jsx(Vh,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):y.jsxs("form",{onSubmit:z,className:"space-y-6",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u?"Create Account":"Sign In"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:u?"Create a new account to get started":"Sign in to your account"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),y.jsx("input",{id:"email",type:"email",value:n,onChange:I=>e(I.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:T,autoComplete:"username"})]}),u&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),y.jsx("input",{id:"displayName",type:"text",value:i,onChange:I=>a(I.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:T})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!u&&y.jsx("button",{type:"button",onClick:()=>p(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:T,children:"Forgot password?"})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{id:"password",type:o?"text":"password",value:t,onChange:I=>r(I.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${u&&t&&!j.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:T,autoComplete:u?"new-password":"current-password"}),y.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:T,children:o?y.jsx(hL,{className:"h-5 w-5"}):y.jsx(gL,{className:"h-5 w-5"})})]}),u&&t&&y.jsx("div",{className:"mt-2",children:y.jsx(Ste,{password:t})}),u&&t&&y.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:y.jsx(Tte,{password:t})})]}),C&&y.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[C,C.includes("verify your email")&&y.jsx("div",{className:"mt-3",children:y.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),y.jsx("button",{type:"submit",disabled:T||!n.trim()||!t.trim()||u&&!i.trim()||u&&!j.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:T?u?"Creating Account...":"Signing in...":u?"Create Account":"Sign In"}),y.jsx("div",{className:"mt-6 text-center",children:y.jsxs("button",{type:"button",onClick:()=>{d(!u),p(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:T,children:[y.jsx(a9,{className:"h-4 w-4"}),u?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},Fk=()=>{const[n,e]=F.useState(!1),[t,r]=F.useState(!1),{currentUser:i,resendEmailVerification:a,logout:o,loginError:c}=Yi();F.useEffect(()=>{i||console.warn("EmailVerificationView: No current user, this should not happen")},[i]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},d=async()=>{await o()};return i?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:y.jsx(mx,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(S0,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),y.jsxs("div",{className:"text-left",children:[y.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),y.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[y.jsx("li",{children:"1. Open your email inbox"}),y.jsx("li",{children:"2. Find the email from House Budget"}),y.jsx("li",{children:'3. Click the "Verify Email" link'}),y.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&y.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),t&&y.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),y.jsx("button",{onClick:u,disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:n?y.jsxs(y.Fragment,{children:[y.jsx(sd,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):y.jsxs(y.Fragment,{children:[y.jsx(sd,{className:"h-4 w-4"}),"Resend verification email"]})}),y.jsxs("button",{onClick:d,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[y.jsx(Vh,{className:"h-4 w-4"}),"Back to sign in"]})]})}),y.jsx("div",{className:"text-center",children:y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},Gk=[{id:"1",name:"Amazon Prime",network:"Visa",last4:"7474",color:"#232f3e"},{id:"2",name:"Apple Card",network:"Mastercard",last4:"0274",color:"#e3e3e3"},{id:"3",name:"AA Credit Union",network:"Visa",last4:"3386",color:"#5494DA"}],Cte=()=>{const[n,e]=F.useState(Gk[0]),[t,r]=F.useState(!1),[i,a]=F.useState(!1),[o,c]=F.useState(Gk),[u,d]=F.useState(null),[h,p]=F.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),m=R=>{R.id==="add-new"?a(!0):(e(R),r(!1))},x=()=>{r(!t)},_=R=>{d(R)},E=()=>{if(u){const R=o.filter(j=>j.id!==u.id);c(R),n.id===u.id&&R.length>0&&e(R[0]),d(null)}},S=()=>{d(null)},T=()=>{if(h.last4.length!==4||!/^\d{4}$/.test(h.last4)){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!h.name.trim()){alert("Please enter a card name");return}const R={id:`custom-${Date.now()}`,name:h.name.trim(),network:h.network,last4:h.last4,color:h.color};c([...o,R]),e(R),a(!1),r(!1),p({name:"",network:"Visa",last4:"",color:"#3b82f6"})},C=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black p-8",children:[y.jsxs("div",{className:"max-w-md mx-auto",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Apple Wallet-Style Card Stack"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-6 space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Method"}),y.jsxs("div",{onClick:x,className:"flex items-center gap-4 p-3 border border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[y.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:n.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:n.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",n.last4]})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:n.name}),y.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(...",n.last4,")"]})]}),y.jsx("div",{className:"text-gray-400",children:t?"":""})]})]}),t&&y.jsx("div",{className:"card-stack-dropdown",children:y.jsx("div",{className:"card-stack",children:y.jsx(Ko,{initial:!1,mode:"popLayout",children:[...o,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((R,j)=>{const z=n.id===R.id,V=R.id==="add-new";return y.jsx(Hs.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Jp,{onDelete:()=>!V&&_(R),threshold:-80,children:y.jsxs("div",{className:`card-stack-item ${z?"selected":""} ${V?"add-new-card":""}`,onClick:()=>m(R),style:{backgroundColor:V?"#f3f4f6":R.color,color:V?"#374151":R.color==="#e3e3e3"?"#000":"#fff",zIndex:o.length-j},children:[y.jsxs("div",{className:"card-header",children:[y.jsx("span",{className:"card-network",children:V?"":R.network}),z&&!V&&y.jsx("span",{className:"selected-indicator",children:""})]}),y.jsxs("div",{className:"card-details",children:[y.jsx("div",{className:"card-name",children:R.name}),y.jsx("div",{className:"card-number",children:V?"":` ${R.last4}`})]}),V&&y.jsx("div",{className:"add-icon",children:y.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),y.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},R.id)})})})})]})]}),i&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Card"}),y.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Name"}),y.jsx("input",{type:"text",value:h.name,onChange:R=>p({...h,name:R.target.value}),placeholder:"e.g., My Chase Card",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Network"}),y.jsxs("select",{value:h.network,onChange:R=>p({...h,network:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[y.jsx("option",{value:"Visa",children:"Visa"}),y.jsx("option",{value:"Mastercard",children:"Mastercard"}),y.jsx("option",{value:"Amex",children:"Amex"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),y.jsx("input",{type:"text",value:h.last4,onChange:R=>p({...h,last4:R.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:C.map(R=>y.jsx("button",{onClick:()=>p({...h,color:R}),className:`w-full h-10 rounded-lg border-2 transition-all ${h.color===R?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:R}},R))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),y.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:h.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:h.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",h.last4||"0000"]})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:T,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add Card"})]})]})]})}),u&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",y.jsx("span",{className:"font-medium",children:u.name}),"?"]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:E,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},Ite=()=>{const{message:n,type:e,isVisible:t,undoAction:r,hideToast:i}=Bc(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return y.jsx(Ko,{children:t&&y.jsx(Hs.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:y.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${a()}`,children:[y.jsx("div",{className:"flex items-center flex-1 min-w-0",children:y.jsx("span",{className:"text-sm font-medium truncate pr-2",children:n})}),y.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[r&&y.jsxs("button",{onClick:()=>{r(),i()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[y.jsx(t9,{size:14,className:"inline mr-1"}),"Undo"]}),y.jsx("button",{onClick:i,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:y.jsx(xv,{size:16})})]})]})})})};class sa extends F.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[y.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:y.jsx(Ju,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[y.jsx(sd,{className:"h-4 w-4"}),"Try Again"]}),y.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[y.jsx(EL,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const Rte=()=>{const n=rs(),e=ns(),t=[{path:"/",label:"Budget",icon:y.jsx(aw,{className:"w-6 h-6"}),enabled:!0},{path:"/transactions",label:"Transactions",icon:y.jsx(TL,{className:"w-6 h-6"}),enabled:!0},{path:"/settings",label:"Settings",icon:y.jsx(cN,{className:"w-6 h-6"}),enabled:!0},{path:"#",label:"Future",icon:y.jsx(x2,{className:"w-6 h-6"}),enabled:!1},{path:"#",label:"Future",icon:y.jsx(x2,{className:"w-6 h-6"}),enabled:!1}],r=(a,o)=>{o&&a!=="#"&&n(a)},i=a=>a==="/"?e.pathname==="/":e.pathname.startsWith(a);return y.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-zinc-900 border-t border-gray-200 dark:border-zinc-800 safe-area-inset-bottom z-50",children:y.jsx("div",{className:"flex justify-around items-center h-16 max-w-screen-xl mx-auto px-2",children:t.map((a,o)=>y.jsxs("button",{onClick:()=>r(a.path,a.enabled),disabled:!a.enabled,className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${a.enabled?i(a.path)?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white":"text-gray-300 dark:text-zinc-700 cursor-not-allowed"}`,children:[y.jsx("div",{className:`transition-transform ${i(a.path)&&a.enabled?"scale-110":""}`,children:a.icon}),y.jsx("span",{className:"text-xs mt-1 font-medium",children:a.label})]},o))})})};function Dte(){const[n,e]=F.useState(!0),{appSettings:t}=pr(),{isAuthenticated:r,isInitialized:i,initializeAuth:a,lastAuthTime:o,offlineGracePeriod:c,currentUser:u}=Yi();if(F.useEffect(()=>{const p=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(p)},[]),F.useEffect(()=>a(),[a]),F.useEffect(()=>{const p=document.documentElement,m=window.matchMedia("(prefers-color-scheme: dark)"),x=()=>{const _=t?.theme??"system",E=m.matches;_==="dark"||_==="system"&&E?p.classList.add("dark"):p.classList.remove("dark")};if(x(),t?.theme==="system")return m.addEventListener("change",x),()=>m.removeEventListener("change",x)},[t]),n||!i)return y.jsx(yj,{message:"Initializing Personal Budget..."});if(!r)return u?y.jsx(sa,{children:y.jsx(Fk,{})}):y.jsx(sa,{children:y.jsx(Ate,{})});const h=typeof navigator<"u"&&!navigator.onLine&&r&&o&&Date.now()-o<c;return y.jsxs(sa,{children:[h&&y.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm",children:[y.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((c-(Date.now()-o))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),y.jsxs(Iz,{children:[y.jsxs(iz,{children:[y.jsx(Ts,{path:"/",element:y.jsx(sa,{children:y.jsx(dte,{})})}),y.jsx(Ts,{path:"/envelope/:id",element:y.jsx(sa,{children:y.jsx(vte,{})})}),y.jsx(Ts,{path:"/add-envelope",element:y.jsx(sa,{children:y.jsx(bte,{})})}),y.jsx(Ts,{path:"/add-transaction",element:y.jsx(sa,{children:y.jsx(_te,{})})}),y.jsx(Ts,{path:"/transactions",element:y.jsx(sa,{children:y.jsx(wte,{})})}),y.jsx(Ts,{path:"/settings",element:y.jsx(sa,{children:y.jsx(yte,{})})}),y.jsx(Ts,{path:"/verify-email",element:y.jsx(sa,{children:y.jsx(Fk,{})})}),y.jsx(Ts,{path:"/card-stack",element:y.jsx(sa,{children:y.jsx(Cte,{})})})]}),y.jsx(Rte,{})]}),y.jsx(Ite,{})]})}f6({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});c6.createRoot(document.getElementById("root")).render(y.jsx(F.StrictMode,{children:y.jsx(Dte,{})}));
