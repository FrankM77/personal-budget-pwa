(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function gj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qy={exports:{}},tf={};var _A;function mj(){if(_A)return tf;_A=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:a}}return tf.Fragment=e,tf.jsx=n,tf.jsxs=n,tf}var wA;function vj(){return wA||(wA=1,qy.exports=mj()),qy.exports}var v=vj(),Yy={exports:{}},it={};var SA;function yj(){if(SA)return it;SA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),m=Symbol.iterator;function b(F){return F===null||typeof F!="object"?null:(F=m&&F[m]||F["@@iterator"],typeof F=="function"?F:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function T(F,Y,J){this.props=F,this.context=Y,this.refs=E,this.updater=J||_}T.prototype.isReactComponent={},T.prototype.setState=function(F,Y){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Y,"setState")},T.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function C(){}C.prototype=T.prototype;function N(F,Y,J){this.props=F,this.context=Y,this.refs=E,this.updater=J||_}var V=N.prototype=new C;V.constructor=N,w(V,T.prototype),V.isPureReactComponent=!0;var P=Array.isArray;function M(){}var A={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function D(F,Y,J){var K=J.ref;return{$$typeof:t,type:F,key:Y,ref:K!==void 0?K:null,props:J}}function j(F,Y){return D(F.type,Y,F.props)}function L(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function U(F){var Y={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(J){return Y[J]})}var O=/\/+/g;function Z(F,Y){return typeof F=="object"&&F!==null&&F.key!=null?U(""+F.key):Y.toString(36)}function X(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(M,M):(F.status="pending",F.then(function(Y){F.status==="pending"&&(F.status="fulfilled",F.value=Y)},function(Y){F.status==="pending"&&(F.status="rejected",F.reason=Y)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function q(F,Y,J,K,oe){var ce=typeof F;(ce==="undefined"||ce==="boolean")&&(F=null);var me=!1;if(F===null)me=!0;else switch(ce){case"bigint":case"string":case"number":me=!0;break;case"object":switch(F.$$typeof){case t:case e:me=!0;break;case h:return me=F._init,q(me(F._payload),Y,J,K,oe)}}if(me)return oe=oe(F),me=K===""?"."+Z(F,0):K,P(oe)?(J="",me!=null&&(J=me.replace(O,"$&/")+"/"),q(oe,Y,J,"",function(Ne){return Ne})):oe!=null&&(L(oe)&&(oe=j(oe,J+(oe.key==null||F&&F.key===oe.key?"":(""+oe.key).replace(O,"$&/")+"/")+me)),Y.push(oe)),1;me=0;var ge=K===""?".":K+":";if(P(F))for(var Te=0;Te<F.length;Te++)K=F[Te],ce=ge+Z(K,Te),me+=q(K,Y,J,ce,oe);else if(Te=b(F),typeof Te=="function")for(F=Te.call(F),Te=0;!(K=F.next()).done;)K=K.value,ce=ge+Z(K,Te++),me+=q(K,Y,J,ce,oe);else if(ce==="object"){if(typeof F.then=="function")return q(X(F),Y,J,K,oe);throw Y=String(F),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return me}function W(F,Y,J){if(F==null)return F;var K=[],oe=0;return q(F,K,"","",function(ce){return Y.call(J,ce,oe++)}),K}function ee(F){if(F._status===-1){var Y=F._result;Y=Y(),Y.then(function(J){(F._status===0||F._status===-1)&&(F._status=1,F._result=J)},function(J){(F._status===0||F._status===-1)&&(F._status=2,F._result=J)}),F._status===-1&&(F._status=0,F._result=Y)}if(F._status===1)return F._result.default;throw F._result}var ie=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},$={map:W,forEach:function(F,Y,J){W(F,function(){Y.apply(this,arguments)},J)},count:function(F){var Y=0;return W(F,function(){Y++}),Y},toArray:function(F){return W(F,function(Y){return Y})||[]},only:function(F){if(!L(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return it.Activity=g,it.Children=$,it.Component=T,it.Fragment=n,it.Profiler=i,it.PureComponent=N,it.StrictMode=r,it.Suspense=u,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,it.__COMPILER_RUNTIME={__proto__:null,c:function(F){return A.H.useMemoCache(F)}},it.cache=function(F){return function(){return F.apply(null,arguments)}},it.cacheSignal=function(){return null},it.cloneElement=function(F,Y,J){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var K=w({},F.props),oe=F.key;if(Y!=null)for(ce in Y.key!==void 0&&(oe=""+Y.key),Y)!k.call(Y,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&Y.ref===void 0||(K[ce]=Y[ce]);var ce=arguments.length-2;if(ce===1)K.children=J;else if(1<ce){for(var me=Array(ce),ge=0;ge<ce;ge++)me[ge]=arguments[ge+2];K.children=me}return D(F.type,oe,K)},it.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},it.createElement=function(F,Y,J){var K,oe={},ce=null;if(Y!=null)for(K in Y.key!==void 0&&(ce=""+Y.key),Y)k.call(Y,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(oe[K]=Y[K]);var me=arguments.length-2;if(me===1)oe.children=J;else if(1<me){for(var ge=Array(me),Te=0;Te<me;Te++)ge[Te]=arguments[Te+2];oe.children=ge}if(F&&F.defaultProps)for(K in me=F.defaultProps,me)oe[K]===void 0&&(oe[K]=me[K]);return D(F,ce,oe)},it.createRef=function(){return{current:null}},it.forwardRef=function(F){return{$$typeof:c,render:F}},it.isValidElement=L,it.lazy=function(F){return{$$typeof:h,_payload:{_status:-1,_result:F},_init:ee}},it.memo=function(F,Y){return{$$typeof:d,type:F,compare:Y===void 0?null:Y}},it.startTransition=function(F){var Y=A.T,J={};A.T=J;try{var K=F(),oe=A.S;oe!==null&&oe(J,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(M,ie)}catch(ce){ie(ce)}finally{Y!==null&&J.types!==null&&(Y.types=J.types),A.T=Y}},it.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},it.use=function(F){return A.H.use(F)},it.useActionState=function(F,Y,J){return A.H.useActionState(F,Y,J)},it.useCallback=function(F,Y){return A.H.useCallback(F,Y)},it.useContext=function(F){return A.H.useContext(F)},it.useDebugValue=function(){},it.useDeferredValue=function(F,Y){return A.H.useDeferredValue(F,Y)},it.useEffect=function(F,Y){return A.H.useEffect(F,Y)},it.useEffectEvent=function(F){return A.H.useEffectEvent(F)},it.useId=function(){return A.H.useId()},it.useImperativeHandle=function(F,Y,J){return A.H.useImperativeHandle(F,Y,J)},it.useInsertionEffect=function(F,Y){return A.H.useInsertionEffect(F,Y)},it.useLayoutEffect=function(F,Y){return A.H.useLayoutEffect(F,Y)},it.useMemo=function(F,Y){return A.H.useMemo(F,Y)},it.useOptimistic=function(F,Y){return A.H.useOptimistic(F,Y)},it.useReducer=function(F,Y,J){return A.H.useReducer(F,Y,J)},it.useRef=function(F){return A.H.useRef(F)},it.useState=function(F){return A.H.useState(F)},it.useSyncExternalStore=function(F,Y,J){return A.H.useSyncExternalStore(F,Y,J)},it.useTransition=function(){return A.H.useTransition()},it.version="19.2.0",it}var EA;function k1(){return EA||(EA=1,Yy.exports=yj()),Yy.exports}var B=k1();const of=gj(B);var Xy={exports:{}},nf={},Wy={exports:{}},Ky={};var TA;function bj(){return TA||(TA=1,(function(t){function e(q,W){var ee=q.length;q.push(W);e:for(;0<ee;){var ie=ee-1>>>1,$=q[ie];if(0<i($,W))q[ie]=W,q[ee]=$,ee=ie;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var W=q[0],ee=q.pop();if(ee!==W){q[0]=ee;e:for(var ie=0,$=q.length,F=$>>>1;ie<F;){var Y=2*(ie+1)-1,J=q[Y],K=Y+1,oe=q[K];if(0>i(J,ee))K<$&&0>i(oe,J)?(q[ie]=oe,q[K]=ee,ie=K):(q[ie]=J,q[Y]=ee,ie=Y);else if(K<$&&0>i(oe,ee))q[ie]=oe,q[K]=ee,ie=K;else break e}}return W}function i(q,W){var ee=q.sortIndex-W.sortIndex;return ee!==0?ee:q.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,g=null,m=3,b=!1,_=!1,w=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function V(q){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=q)r(d),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(d)}}function P(q){if(w=!1,V(q),!_)if(n(u)!==null)_=!0,M||(M=!0,U());else{var W=n(d);W!==null&&X(P,W.startTime-q)}}var M=!1,A=-1,k=5,D=-1;function j(){return E?!0:!(t.unstable_now()-D<k)}function L(){if(E=!1,M){var q=t.unstable_now();D=q;var W=!0;try{e:{_=!1,w&&(w=!1,C(A),A=-1),b=!0;var ee=m;try{t:{for(V(q),g=n(u);g!==null&&!(g.expirationTime>q&&j());){var ie=g.callback;if(typeof ie=="function"){g.callback=null,m=g.priorityLevel;var $=ie(g.expirationTime<=q);if(q=t.unstable_now(),typeof $=="function"){g.callback=$,V(q),W=!0;break t}g===n(u)&&r(u),V(q)}else r(u);g=n(u)}if(g!==null)W=!0;else{var F=n(d);F!==null&&X(P,F.startTime-q),W=!1}}break e}finally{g=null,m=ee,b=!1}W=void 0}}finally{W?U():M=!1}}}var U;if(typeof N=="function")U=function(){N(L)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Z=O.port2;O.port1.onmessage=L,U=function(){Z.postMessage(null)}}else U=function(){T(L,0)};function X(q,W){A=T(function(){q(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(q){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var ee=m;m=W;try{return q()}finally{m=ee}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(q,W){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ee=m;m=q;try{return W()}finally{m=ee}},t.unstable_scheduleCallback=function(q,W,ee){var ie=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ie+ee:ie):ee=ie,q){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ee+$,q={id:h++,callback:W,priorityLevel:q,startTime:ee,expirationTime:$,sortIndex:-1},ee>ie?(q.sortIndex=ee,e(d,q),n(u)===null&&q===n(d)&&(w?(C(A),A=-1):w=!0,X(P,ee-ie))):(q.sortIndex=$,e(u,q),_||b||(_=!0,M||(M=!0,U()))),q},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(q){var W=m;return function(){var ee=m;m=W;try{return q.apply(this,arguments)}finally{m=ee}}}})(Ky)),Ky}var AA;function xj(){return AA||(AA=1,Wy.exports=bj()),Wy.exports}var Qy={exports:{}},sr={};var CA;function _j(){if(CA)return sr;CA=1;var t=k1();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:d,implementation:h}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return sr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sr.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(u,d,null,h)},sr.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},sr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},sr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},sr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,g=c(h,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:m,fetchPriority:b}):h==="script"&&r.d.X(u,{crossOrigin:g,integrity:m,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},sr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},sr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,g=c(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},sr.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},sr.requestFormReset=function(u){r.d.r(u)},sr.unstable_batchedUpdates=function(u,d){return u(d)},sr.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},sr.useFormStatus=function(){return o.H.useHostTransitionStatus()},sr.version="19.2.0",sr}var kA;function wj(){if(kA)return Qy.exports;kA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Qy.exports=_j(),Qy.exports}var RA;function Sj(){if(RA)return nf;RA=1;var t=xj(),e=k1(),n=wj();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,p=l;;){var x=f.return;if(x===null)break;var S=x.alternate;if(S===null){if(p=x.return,p!==null){f=p;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===f)return u(x),s;if(S===p)return u(x),l;S=S.sibling}throw Error(r(188))}if(f.return!==p.return)f=x,p=S;else{for(var I=!1,G=x.child;G;){if(G===f){I=!0,f=x,p=S;break}if(G===p){I=!0,p=x,f=S;break}G=G.sibling}if(!I){for(G=S.child;G;){if(G===f){I=!0,f=S,p=x;break}if(G===p){I=!0,p=S,f=x;break}G=G.sibling}if(!I)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function h(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=h(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),N=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function U(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var O=Symbol.for("react.client.reference");function Z(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===O?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case M:return"SuspenseList";case D:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case N:return s.displayName||"Context";case C:return(s._context.displayName||"Context")+".Consumer";case V:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case A:return l=s.displayName||null,l!==null?l:Z(s.type)||"Memo";case k:l=s._payload,s=s._init;try{return Z(s(l))}catch{}}return null}var X=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ie=[],$=-1;function F(s){return{current:s}}function Y(s){0>$||(s.current=ie[$],ie[$]=null,$--)}function J(s,l){$++,ie[$]=s.current,s.current=l}var K=F(null),oe=F(null),ce=F(null),me=F(null);function ge(s,l){switch(J(ce,l),J(oe,s),J(K,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?$T(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=$T(l),s=HT(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Y(K),J(K,s)}function Te(){Y(K),Y(oe),Y(ce)}function Ne(s){s.memoizedState!==null&&J(me,s);var l=K.current,f=HT(l,s.type);l!==f&&(J(oe,s),J(K,f))}function ae(s){oe.current===s&&(Y(K),Y(oe)),me.current===s&&(Y(me),Qd._currentValue=ee)}var Ae,De;function Me(s){if(Ae===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Ae=l&&l[1]||"",De=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ae+s+De}var Be=!1;function Ve(s,l){if(!s||Be)return"";Be=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(pe){var fe=pe}Reflect.construct(s,[],xe)}else{try{xe.call()}catch(pe){fe=pe}s.call(xe.prototype)}}else{try{throw Error()}catch(pe){fe=pe}(xe=s())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(pe){if(pe&&fe&&typeof pe.stack=="string")return[pe.stack,fe.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=p.DetermineComponentFrameRoot(),I=S[0],G=S[1];if(I&&G){var Q=I.split(`
`),de=G.split(`
`);for(x=p=0;p<Q.length&&!Q[p].includes("DetermineComponentFrameRoot");)p++;for(;x<de.length&&!de[x].includes("DetermineComponentFrameRoot");)x++;if(p===Q.length||x===de.length)for(p=Q.length-1,x=de.length-1;1<=p&&0<=x&&Q[p]!==de[x];)x--;for(;1<=p&&0<=x;p--,x--)if(Q[p]!==de[x]){if(p!==1||x!==1)do if(p--,x--,0>x||Q[p]!==de[x]){var ve=`
`+Q[p].replace(" at new "," at ");return s.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",s.displayName)),ve}while(1<=p&&0<=x);break}}}finally{Be=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?Me(f):""}function Se(s,l){switch(s.tag){case 26:case 27:case 5:return Me(s.type);case 16:return Me("Lazy");case 13:return s.child!==l&&l!==null?Me("Suspense Fallback"):Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return Ve(s.type,!1);case 11:return Ve(s.type.render,!1);case 1:return Ve(s.type,!0);case 31:return Me("Activity");default:return""}}function ze(s){try{var l="",f=null;do l+=Se(s,f),f=s,s=s.return;while(s);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Ie=Object.prototype.hasOwnProperty,Le=t.unstable_scheduleCallback,st=t.unstable_cancelCallback,wt=t.unstable_shouldYield,Qe=t.unstable_requestPaint,ut=t.unstable_now,Rt=t.unstable_getCurrentPriorityLevel,cn=t.unstable_ImmediatePriority,It=t.unstable_UserBlockingPriority,wn=t.unstable_NormalPriority,Br=t.unstable_LowPriority,na=t.unstable_IdlePriority,Fa=t.log,Ns=t.unstable_setDisableYieldValue,Ur=null,Sn=null;function ar(s){if(typeof Fa=="function"&&Ns(s),Sn&&typeof Sn.setStrictMode=="function")try{Sn.setStrictMode(Ur,s)}catch{}}var tn=Math.clz32?Math.clz32:Ms,sc=Math.log,Is=Math.LN2;function Ms(s){return s>>>=0,s===0?32:31-(sc(s)/Is|0)|0}var ft=256,nn=262144,rn=4194304;function Fr(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ni(s,l,f){var p=s.pendingLanes;if(p===0)return 0;var x=0,S=s.suspendedLanes,I=s.pingedLanes;s=s.warmLanes;var G=p&134217727;return G!==0?(p=G&~S,p!==0?x=Fr(p):(I&=G,I!==0?x=Fr(I):f||(f=G&~s,f!==0&&(x=Fr(f))))):(G=p&~S,G!==0?x=Fr(G):I!==0?x=Fr(I):f||(f=p&~s,f!==0&&(x=Fr(f)))),x===0?0:l!==0&&l!==x&&(l&S)===0&&(S=x&-x,f=l&-l,S>=f||S===32&&(f&4194048)!==0)?l:x}function pr(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function K0(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gh(){var s=rn;return rn<<=1,(rn&62914560)===0&&(rn=4194304),s}function ra(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function el(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Q0(s,l,f,p,x,S){var I=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var G=s.entanglements,Q=s.expirationTimes,de=s.hiddenUpdates;for(f=I&~f;0<f;){var ve=31-tn(f),xe=1<<ve;G[ve]=0,Q[ve]=-1;var fe=de[ve];if(fe!==null)for(de[ve]=null,ve=0;ve<fe.length;ve++){var pe=fe[ve];pe!==null&&(pe.lane&=-536870913)}f&=~xe}p!==0&&tl(s,p,0),S!==0&&x===0&&s.tag!==0&&(s.suspendedLanes|=S&~(I&~l))}function tl(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var p=31-tn(l);s.entangledLanes|=l,s.entanglements[p]=s.entanglements[p]|1073741824|f&261930}function nd(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var p=31-tn(f),x=1<<p;x&l|s[p]&l&&(s[p]|=l),f&=~x}}function rd(s,l){var f=l&-l;return f=(f&42)!==0?1:nl(f),(f&(s.suspendedLanes|l))!==0?0:f}function nl(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ga(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function $h(){var s=W.p;return s!==0?s:(s=window.event,s===void 0?32:pA(s.type))}function Ni(s,l){var f=W.p;try{return W.p=s,l()}finally{W.p=f}}var Ii=Math.random().toString(36).slice(2),En="__reactFiber$"+Ii,$n="__reactProps$"+Ii,ia="__reactContainer$"+Ii,oc="__reactEvents$"+Ii,Z0="__reactListeners$"+Ii,Hh="__reactHandles$"+Ii,qh="__reactResources$"+Ii,aa="__reactMarker$"+Ii;function lc(s){delete s[En],delete s[$n],delete s[oc],delete s[Z0],delete s[Hh]}function sa(s){var l=s[En];if(l)return l;for(var f=s.parentNode;f;){if(l=f[ia]||f[En]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=ZT(s);s!==null;){if(f=s[En])return f;s=ZT(s)}return l}s=f,f=s.parentNode}return null}function ri(s){if(s=s[En]||s[ia]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function Gr(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function oa(s){var l=s[qh];return l||(l=s[qh]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Tn(s){s[aa]=!0}var id=new Set,ad={};function la(s,l){ca(s,l),ca(s+"Capture",l)}function ca(s,l){for(ad[s]=l,s=0;s<l.length;s++)id.add(l[s])}var sd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),od={},ld={};function Yh(s){return Ie.call(ld,s)?!0:Ie.call(od,s)?!1:sd.test(s)?ld[s]=!0:(od[s]=!0,!1)}function cc(s,l,f){if(Yh(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function $r(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function An(s,l,f,p){if(p===null)s.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+p)}}function Hn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Os(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function cd(s,l,f){var p=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var x=p.get,S=p.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return x.call(this)},set:function(I){f=""+I,S.call(this,I)}}),Object.defineProperty(s,l,{enumerable:p.enumerable}),{getValue:function(){return f},setValue:function(I){f=""+I},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Ot(s){if(!s._valueTracker){var l=Os(s)?"checked":"value";s._valueTracker=cd(s,l,""+s[l])}}function rl(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),p="";return s&&(p=Os(s)?s.checked?"true":"false":s.value),s=p,s!==f?(l.setValue(s),!0):!1}function ua(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var il=/[\n"\\]/g;function Tr(s){return s.replace(il,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function uc(s,l,f,p,x,S,I,G){s.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.type=I:s.removeAttribute("type"),l!=null?I==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Hn(l)):s.value!==""+Hn(l)&&(s.value=""+Hn(l)):I!=="submit"&&I!=="reset"||s.removeAttribute("value"),l!=null?ud(s,I,Hn(l)):f!=null?ud(s,I,Hn(f)):p!=null&&s.removeAttribute("value"),x==null&&S!=null&&(s.defaultChecked=!!S),x!=null&&(s.checked=x&&typeof x!="function"&&typeof x!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?s.name=""+Hn(G):s.removeAttribute("name")}function Xh(s,l,f,p,x,S,I,G){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.type=S),l!=null||f!=null){if(!(S!=="submit"&&S!=="reset"||l!=null)){Ot(s);return}f=f!=null?""+Hn(f):"",l=l!=null?""+Hn(l):f,G||l===s.value||(s.value=l),s.defaultValue=l}p=p??x,p=typeof p!="function"&&typeof p!="symbol"&&!!p,s.checked=G?s.checked:!!p,s.defaultChecked=!!p,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(s.name=I),Ot(s)}function ud(s,l,f){l==="number"&&ua(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function Ps(s,l,f,p){if(s=s.options,l){l={};for(var x=0;x<f.length;x++)l["$"+f[x]]=!0;for(f=0;f<s.length;f++)x=l.hasOwnProperty("$"+s[f].value),s[f].selected!==x&&(s[f].selected=x),x&&p&&(s[f].defaultSelected=!0)}else{for(f=""+Hn(f),l=null,x=0;x<s.length;x++){if(s[x].value===f){s[x].selected=!0,p&&(s[x].defaultSelected=!0);return}l!==null||s[x].disabled||(l=s[x])}l!==null&&(l.selected=!0)}}function Wh(s,l,f){if(l!=null&&(l=""+Hn(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+Hn(f):""}function js(s,l,f,p){if(l==null){if(p!=null){if(f!=null)throw Error(r(92));if(X(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),l=f}f=Hn(l),s.defaultValue=f,p=s.textContent,p===f&&p!==""&&p!==null&&(s.value=p),Ot(s)}function Ar(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var Kh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dd(s,l,f){var p=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":p?s.setProperty(l,f):typeof f!="number"||f===0||Kh.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function fd(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?s.setProperty(p,""):p==="float"?s.cssFloat="":s[p]="");for(var x in l)p=l[x],l.hasOwnProperty(x)&&f[x]!==p&&dd(s,x,p)}else for(var S in l)l.hasOwnProperty(S)&&dd(s,S,l[S])}function dc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fc(s){return Vs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Mi(){}var hd=null;function ii(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var zs=null,da=null;function al(s){var l=ri(s);if(l&&(s=l.stateNode)){var f=s[$n]||null;e:switch(s=l.stateNode,l.type){case"input":if(uc(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Tr(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var p=f[l];if(p!==s&&p.form===s.form){var x=p[$n]||null;if(!x)throw Error(r(90));uc(p,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(l=0;l<f.length;l++)p=f[l],p.form===s.form&&rl(p)}break e;case"textarea":Wh(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&Ps(s,!!f.multiple,l,!1)}}}var hc=!1;function Ls(s,l,f){if(hc)return s(l,f);hc=!0;try{var p=s(l);return p}finally{if(hc=!1,(zs!==null||da!==null)&&($p(),zs&&(l=zs,s=da,da=zs=null,al(l),s)))for(l=0;l<s.length;l++)al(s[l])}}function Oi(s,l){var f=s.stateNode;if(f===null)return null;var p=f[$n]||null;if(p===null)return null;f=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sl=!1;if(ai)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){sl=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch{sl=!1}var fa=null,pd=null,ol=null;function gd(){if(ol)return ol;var s,l=pd,f=l.length,p,x="value"in fa?fa.value:fa.textContent,S=x.length;for(s=0;s<f&&l[s]===x[s];s++);var I=f-s;for(p=1;p<=I&&l[f-p]===x[S-p];p++);return ol=x.slice(s,1<p?1-p:void 0)}function ll(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function $a(){return!0}function Pi(){return!1}function Xn(s){function l(f,p,x,S,I){this._reactName=f,this._targetInst=x,this.type=p,this.nativeEvent=S,this.target=I,this.currentTarget=null;for(var G in s)s.hasOwnProperty(G)&&(f=s[G],this[G]=f?f(S):S[G]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?$a:Pi,this.isPropagationStopped=Pi,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),l}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=Xn(Ha),Bs=g({},Ha,{view:0,detail:0}),md=Xn(Bs),Us,pc,pa,gc=g({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==pa&&(pa&&s.type==="mousemove"?(Us=s.screenX-pa.screenX,pc=s.screenY-pa.screenY):pc=Us=0,pa=s),Us)},movementY:function(s){return"movementY"in s?s.movementY:pc}}),vd=Xn(gc),cl=g({},gc,{dataTransfer:0}),Zh=Xn(cl),Jh=g({},Bs,{relatedTarget:0}),ul=Xn(Jh),yd=g({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),ep=Xn(yd),mc=g({},Ha,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),tp=Xn(mc),np=g({},Ha,{data:0}),ga=Xn(np),rp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ip={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ap={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sp(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=ap[s])?!!l[s]:!1}function Fs(){return sp}var gr=g({},Bs,{key:function(s){if(s.key){var l=rp[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=ll(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ip[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fs,charCode:function(s){return s.type==="keypress"?ll(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ll(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),op=Xn(gr),lp=g({},gc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qa=Xn(lp),y=g({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fs}),R=Xn(y),z=g({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=Xn(z),le=g({},gc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),he=Xn(le),ke=g({},Ha,{newState:0,oldState:0}),ot=Xn(ke),mn=[9,13,27,32],Dt=ai&&"CompositionEvent"in window,Qt=null;ai&&"documentMode"in document&&(Qt=document.documentMode);var si=ai&&"TextEvent"in window&&!Qt,ma=ai&&(!Dt||Qt&&8<Qt&&11>=Qt),ji=" ",Vi=!1;function dl(s,l){switch(s){case"keyup":return mn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var yc=!1;function LP(s,l){switch(s){case"compositionend":return vc(l);case"keypress":return l.which!==32?null:(Vi=!0,ji);case"textInput":return s=l.data,s===ji&&Vi?null:s;default:return null}}function BP(s,l){if(yc)return s==="compositionend"||!Dt&&dl(s,l)?(s=gd(),ol=pd=fa=null,yc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ma&&l.locale!=="ko"?null:l.data;default:return null}}var UP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tS(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!UP[s.type]:l==="textarea"}function nS(s,l,f,p){zs?da?da.push(p):da=[p]:zs=p,l=Qp(l,"onChange"),0<l.length&&(f=new ha("onChange","change",null,f,p),s.push({event:f,listeners:l}))}var bd=null,xd=null;function FP(s){zT(s,0)}function cp(s){var l=Gr(s);if(rl(l))return s}function rS(s,l){if(s==="change")return l}var iS=!1;if(ai){var J0;if(ai){var ev="oninput"in document;if(!ev){var aS=document.createElement("div");aS.setAttribute("oninput","return;"),ev=typeof aS.oninput=="function"}J0=ev}else J0=!1;iS=J0&&(!document.documentMode||9<document.documentMode)}function sS(){bd&&(bd.detachEvent("onpropertychange",oS),xd=bd=null)}function oS(s){if(s.propertyName==="value"&&cp(xd)){var l=[];nS(l,xd,s,ii(s)),Ls(FP,l)}}function GP(s,l,f){s==="focusin"?(sS(),bd=l,xd=f,bd.attachEvent("onpropertychange",oS)):s==="focusout"&&sS()}function $P(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return cp(xd)}function HP(s,l){if(s==="click")return cp(l)}function qP(s,l){if(s==="input"||s==="change")return cp(l)}function YP(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Hr=typeof Object.is=="function"?Object.is:YP;function _d(s,l){if(Hr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),p=Object.keys(l);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var x=f[p];if(!Ie.call(l,x)||!Hr(s[x],l[x]))return!1}return!0}function lS(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function cS(s,l){var f=lS(s);s=0;for(var p;f;){if(f.nodeType===3){if(p=s+f.textContent.length,s<=l&&p>=l)return{node:f,offset:l-s};s=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=lS(f)}}function uS(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?uS(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function dS(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=ua(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=ua(s.document)}return l}function tv(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var XP=ai&&"documentMode"in document&&11>=document.documentMode,bc=null,nv=null,wd=null,rv=!1;function fS(s,l,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;rv||bc==null||bc!==ua(p)||(p=bc,"selectionStart"in p&&tv(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),wd&&_d(wd,p)||(wd=p,p=Qp(nv,"onSelect"),0<p.length&&(l=new ha("onSelect","select",null,l,f),s.push({event:l,listeners:p}),l.target=bc)))}function fl(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var xc={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionrun:fl("Transition","TransitionRun"),transitionstart:fl("Transition","TransitionStart"),transitioncancel:fl("Transition","TransitionCancel"),transitionend:fl("Transition","TransitionEnd")},iv={},hS={};ai&&(hS=document.createElement("div").style,"AnimationEvent"in window||(delete xc.animationend.animation,delete xc.animationiteration.animation,delete xc.animationstart.animation),"TransitionEvent"in window||delete xc.transitionend.transition);function hl(s){if(iv[s])return iv[s];if(!xc[s])return s;var l=xc[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in hS)return iv[s]=l[f];return s}var pS=hl("animationend"),gS=hl("animationiteration"),mS=hl("animationstart"),WP=hl("transitionrun"),KP=hl("transitionstart"),QP=hl("transitioncancel"),vS=hl("transitionend"),yS=new Map,av="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");av.push("scrollEnd");function zi(s,l){yS.set(s,l),la(l,[s])}var up=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},oi=[],_c=0,sv=0;function dp(){for(var s=_c,l=sv=_c=0;l<s;){var f=oi[l];oi[l++]=null;var p=oi[l];oi[l++]=null;var x=oi[l];oi[l++]=null;var S=oi[l];if(oi[l++]=null,p!==null&&x!==null){var I=p.pending;I===null?x.next=x:(x.next=I.next,I.next=x),p.pending=x}S!==0&&bS(f,x,S)}}function fp(s,l,f,p){oi[_c++]=s,oi[_c++]=l,oi[_c++]=f,oi[_c++]=p,sv|=p,s.lanes|=p,s=s.alternate,s!==null&&(s.lanes|=p)}function ov(s,l,f,p){return fp(s,l,f,p),hp(s)}function pl(s,l){return fp(s,null,null,l),hp(s)}function bS(s,l,f){s.lanes|=f;var p=s.alternate;p!==null&&(p.lanes|=f);for(var x=!1,S=s.return;S!==null;)S.childLanes|=f,p=S.alternate,p!==null&&(p.childLanes|=f),S.tag===22&&(s=S.stateNode,s===null||s._visibility&1||(x=!0)),s=S,S=S.return;return s.tag===3?(S=s.stateNode,x&&l!==null&&(x=31-tn(f),s=S.hiddenUpdates,p=s[x],p===null?s[x]=[l]:p.push(l),l.lane=f|536870912),S):null}function hp(s){if(50<$d)throw $d=0,my=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var wc={};function ZP(s,l,f,p){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(s,l,f,p){return new ZP(s,l,f,p)}function lv(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ya(s,l){var f=s.alternate;return f===null?(f=qr(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function xS(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function pp(s,l,f,p,x,S){var I=0;if(p=s,typeof s=="function")lv(s)&&(I=1);else if(typeof s=="string")I=rj(s,f,K.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case D:return s=qr(31,f,l,x),s.elementType=D,s.lanes=S,s;case w:return gl(f.children,x,S,l);case E:I=8,x|=24;break;case T:return s=qr(12,f,l,x|2),s.elementType=T,s.lanes=S,s;case P:return s=qr(13,f,l,x),s.elementType=P,s.lanes=S,s;case M:return s=qr(19,f,l,x),s.elementType=M,s.lanes=S,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case N:I=10;break e;case C:I=9;break e;case V:I=11;break e;case A:I=14;break e;case k:I=16,p=null;break e}I=29,f=Error(r(130,s===null?"null":typeof s,"")),p=null}return l=qr(I,f,l,x),l.elementType=s,l.type=p,l.lanes=S,l}function gl(s,l,f,p){return s=qr(7,s,p,l),s.lanes=f,s}function cv(s,l,f){return s=qr(6,s,null,l),s.lanes=f,s}function _S(s){var l=qr(18,null,null,0);return l.stateNode=s,l}function uv(s,l,f){return l=qr(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var wS=new WeakMap;function li(s,l){if(typeof s=="object"&&s!==null){var f=wS.get(s);return f!==void 0?f:(l={value:s,source:l,stack:ze(l)},wS.set(s,l),l)}return{value:s,source:l,stack:ze(l)}}var Sc=[],Ec=0,gp=null,Sd=0,ci=[],ui=0,Gs=null,va=1,ya="";function Xa(s,l){Sc[Ec++]=Sd,Sc[Ec++]=gp,gp=s,Sd=l}function SS(s,l,f){ci[ui++]=va,ci[ui++]=ya,ci[ui++]=Gs,Gs=s;var p=va;s=ya;var x=32-tn(p)-1;p&=~(1<<x),f+=1;var S=32-tn(l)+x;if(30<S){var I=x-x%5;S=(p&(1<<I)-1).toString(32),p>>=I,x-=I,va=1<<32-tn(l)+x|f<<x|p,ya=S+s}else va=1<<S|f<<x|p,ya=s}function dv(s){s.return!==null&&(Xa(s,1),SS(s,1,0))}function fv(s){for(;s===gp;)gp=Sc[--Ec],Sc[Ec]=null,Sd=Sc[--Ec],Sc[Ec]=null;for(;s===Gs;)Gs=ci[--ui],ci[ui]=null,ya=ci[--ui],ci[ui]=null,va=ci[--ui],ci[ui]=null}function ES(s,l){ci[ui++]=va,ci[ui++]=ya,ci[ui++]=Gs,va=l.id,ya=l.overflow,Gs=s}var Wn=null,Xt=null,St=!1,$s=null,di=!1,hv=Error(r(519));function Hs(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ed(li(l,s)),hv}function TS(s){var l=s.stateNode,f=s.type,p=s.memoizedProps;switch(l[En]=s,l[$n]=p,f){case"dialog":pt("cancel",l),pt("close",l);break;case"iframe":case"object":case"embed":pt("load",l);break;case"video":case"audio":for(f=0;f<qd.length;f++)pt(qd[f],l);break;case"source":pt("error",l);break;case"img":case"image":case"link":pt("error",l),pt("load",l);break;case"details":pt("toggle",l);break;case"input":pt("invalid",l),Xh(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":pt("invalid",l);break;case"textarea":pt("invalid",l),js(l,p.value,p.defaultValue,p.children)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||p.suppressHydrationWarning===!0||FT(l.textContent,f)?(p.popover!=null&&(pt("beforetoggle",l),pt("toggle",l)),p.onScroll!=null&&pt("scroll",l),p.onScrollEnd!=null&&pt("scrollend",l),p.onClick!=null&&(l.onclick=Mi),l=!0):l=!1,l||Hs(s,!0)}function AS(s){for(Wn=s.return;Wn;)switch(Wn.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:Wn=Wn.return}}function Tc(s){if(s!==Wn)return!1;if(!St)return AS(s),St=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||Ny(s.type,s.memoizedProps)),f=!f),f&&Xt&&Hs(s),AS(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Xt=QT(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Xt=QT(s)}else l===27?(l=Xt,ao(s.type)?(s=jy,jy=null,Xt=s):Xt=l):Xt=Wn?hi(s.stateNode.nextSibling):null;return!0}function ml(){Xt=Wn=null,St=!1}function pv(){var s=$s;return s!==null&&(Dr===null?Dr=s:Dr.push.apply(Dr,s),$s=null),s}function Ed(s){$s===null?$s=[s]:$s.push(s)}var gv=F(null),vl=null,Wa=null;function qs(s,l,f){J(gv,l._currentValue),l._currentValue=f}function Ka(s){s._currentValue=gv.current,Y(gv)}function mv(s,l,f){for(;s!==null;){var p=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),s===f)break;s=s.return}}function vv(s,l,f,p){var x=s.child;for(x!==null&&(x.return=s);x!==null;){var S=x.dependencies;if(S!==null){var I=x.child;S=S.firstContext;e:for(;S!==null;){var G=S;S=x;for(var Q=0;Q<l.length;Q++)if(G.context===l[Q]){S.lanes|=f,G=S.alternate,G!==null&&(G.lanes|=f),mv(S.return,f,s),p||(I=null);break e}S=G.next}}else if(x.tag===18){if(I=x.return,I===null)throw Error(r(341));I.lanes|=f,S=I.alternate,S!==null&&(S.lanes|=f),mv(I,f,s),I=null}else I=x.child;if(I!==null)I.return=x;else for(I=x;I!==null;){if(I===s){I=null;break}if(x=I.sibling,x!==null){x.return=I.return,I=x;break}I=I.return}x=I}}function Ac(s,l,f,p){s=null;for(var x=l,S=!1;x!==null;){if(!S){if((x.flags&524288)!==0)S=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var I=x.alternate;if(I===null)throw Error(r(387));if(I=I.memoizedProps,I!==null){var G=x.type;Hr(x.pendingProps.value,I.value)||(s!==null?s.push(G):s=[G])}}else if(x===me.current){if(I=x.alternate,I===null)throw Error(r(387));I.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(s!==null?s.push(Qd):s=[Qd])}x=x.return}s!==null&&vv(l,s,f,p),l.flags|=262144}function mp(s){for(s=s.firstContext;s!==null;){if(!Hr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function yl(s){vl=s,Wa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Kn(s){return CS(vl,s)}function vp(s,l){return vl===null&&yl(s),CS(s,l)}function CS(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},Wa===null){if(s===null)throw Error(r(308));Wa=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Wa=Wa.next=l;return f}var JP=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,p){s.push(p)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},e3=t.unstable_scheduleCallback,t3=t.unstable_NormalPriority,Cn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yv(){return{controller:new JP,data:new Map,refCount:0}}function Td(s){s.refCount--,s.refCount===0&&e3(t3,function(){s.controller.abort()})}var Ad=null,bv=0,Cc=0,kc=null;function n3(s,l){if(Ad===null){var f=Ad=[];bv=0,Cc=wy(),kc={status:"pending",value:void 0,then:function(p){f.push(p)}}}return bv++,l.then(kS,kS),l}function kS(){if(--bv===0&&Ad!==null){kc!==null&&(kc.status="fulfilled");var s=Ad;Ad=null,Cc=0,kc=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function r3(s,l){var f=[],p={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return s.then(function(){p.status="fulfilled",p.value=l;for(var x=0;x<f.length;x++)(0,f[x])(l)},function(x){for(p.status="rejected",p.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),p}var RS=q.S;q.S=function(s,l){fT=ut(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&n3(s,l),RS!==null&&RS(s,l)};var bl=F(null);function xv(){var s=bl.current;return s!==null?s:$t.pooledCache}function yp(s,l){l===null?J(bl,bl.current):J(bl,l.pool)}function DS(){var s=xv();return s===null?null:{parent:Cn._currentValue,pool:s}}var Rc=Error(r(460)),_v=Error(r(474)),bp=Error(r(542)),xp={then:function(){}};function NS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function IS(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(Mi,Mi),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,OS(s),s;default:if(typeof l.status=="string")l.then(Mi,Mi);else{if(s=$t,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(p){if(l.status==="pending"){var x=l;x.status="fulfilled",x.value=p}},function(p){if(l.status==="pending"){var x=l;x.status="rejected",x.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,OS(s),s}throw _l=l,Rc}}function xl(s){try{var l=s._init;return l(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(_l=f,Rc):f}}var _l=null;function MS(){if(_l===null)throw Error(r(459));var s=_l;return _l=null,s}function OS(s){if(s===Rc||s===bp)throw Error(r(483))}var Dc=null,Cd=0;function _p(s){var l=Cd;return Cd+=1,Dc===null&&(Dc=[]),IS(Dc,s,l)}function kd(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function wp(s,l){throw l.$$typeof===m?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function PS(s){function l(se,re){if(s){var ue=se.deletions;ue===null?(se.deletions=[re],se.flags|=16):ue.push(re)}}function f(se,re){if(!s)return null;for(;re!==null;)l(se,re),re=re.sibling;return null}function p(se){for(var re=new Map;se!==null;)se.key!==null?re.set(se.key,se):re.set(se.index,se),se=se.sibling;return re}function x(se,re){return se=Ya(se,re),se.index=0,se.sibling=null,se}function S(se,re,ue){return se.index=ue,s?(ue=se.alternate,ue!==null?(ue=ue.index,ue<re?(se.flags|=67108866,re):ue):(se.flags|=67108866,re)):(se.flags|=1048576,re)}function I(se){return s&&se.alternate===null&&(se.flags|=67108866),se}function G(se,re,ue,ye){return re===null||re.tag!==6?(re=cv(ue,se.mode,ye),re.return=se,re):(re=x(re,ue),re.return=se,re)}function Q(se,re,ue,ye){var $e=ue.type;return $e===w?ve(se,re,ue.props.children,ye,ue.key):re!==null&&(re.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===k&&xl($e)===re.type)?(re=x(re,ue.props),kd(re,ue),re.return=se,re):(re=pp(ue.type,ue.key,ue.props,null,se.mode,ye),kd(re,ue),re.return=se,re)}function de(se,re,ue,ye){return re===null||re.tag!==4||re.stateNode.containerInfo!==ue.containerInfo||re.stateNode.implementation!==ue.implementation?(re=uv(ue,se.mode,ye),re.return=se,re):(re=x(re,ue.children||[]),re.return=se,re)}function ve(se,re,ue,ye,$e){return re===null||re.tag!==7?(re=gl(ue,se.mode,ye,$e),re.return=se,re):(re=x(re,ue),re.return=se,re)}function xe(se,re,ue){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=cv(""+re,se.mode,ue),re.return=se,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case b:return ue=pp(re.type,re.key,re.props,null,se.mode,ue),kd(ue,re),ue.return=se,ue;case _:return re=uv(re,se.mode,ue),re.return=se,re;case k:return re=xl(re),xe(se,re,ue)}if(X(re)||U(re))return re=gl(re,se.mode,ue,null),re.return=se,re;if(typeof re.then=="function")return xe(se,_p(re),ue);if(re.$$typeof===N)return xe(se,vp(se,re),ue);wp(se,re)}return null}function fe(se,re,ue,ye){var $e=re!==null?re.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return $e!==null?null:G(se,re,""+ue,ye);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case b:return ue.key===$e?Q(se,re,ue,ye):null;case _:return ue.key===$e?de(se,re,ue,ye):null;case k:return ue=xl(ue),fe(se,re,ue,ye)}if(X(ue)||U(ue))return $e!==null?null:ve(se,re,ue,ye,null);if(typeof ue.then=="function")return fe(se,re,_p(ue),ye);if(ue.$$typeof===N)return fe(se,re,vp(se,ue),ye);wp(se,ue)}return null}function pe(se,re,ue,ye,$e){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return se=se.get(ue)||null,G(re,se,""+ye,$e);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return se=se.get(ye.key===null?ue:ye.key)||null,Q(re,se,ye,$e);case _:return se=se.get(ye.key===null?ue:ye.key)||null,de(re,se,ye,$e);case k:return ye=xl(ye),pe(se,re,ue,ye,$e)}if(X(ye)||U(ye))return se=se.get(ue)||null,ve(re,se,ye,$e,null);if(typeof ye.then=="function")return pe(se,re,ue,_p(ye),$e);if(ye.$$typeof===N)return pe(se,re,ue,vp(re,ye),$e);wp(re,ye)}return null}function je(se,re,ue,ye){for(var $e=null,Ct=null,Ue=re,dt=re=0,vt=null;Ue!==null&&dt<ue.length;dt++){Ue.index>dt?(vt=Ue,Ue=null):vt=Ue.sibling;var kt=fe(se,Ue,ue[dt],ye);if(kt===null){Ue===null&&(Ue=vt);break}s&&Ue&&kt.alternate===null&&l(se,Ue),re=S(kt,re,dt),Ct===null?$e=kt:Ct.sibling=kt,Ct=kt,Ue=vt}if(dt===ue.length)return f(se,Ue),St&&Xa(se,dt),$e;if(Ue===null){for(;dt<ue.length;dt++)Ue=xe(se,ue[dt],ye),Ue!==null&&(re=S(Ue,re,dt),Ct===null?$e=Ue:Ct.sibling=Ue,Ct=Ue);return St&&Xa(se,dt),$e}for(Ue=p(Ue);dt<ue.length;dt++)vt=pe(Ue,se,dt,ue[dt],ye),vt!==null&&(s&&vt.alternate!==null&&Ue.delete(vt.key===null?dt:vt.key),re=S(vt,re,dt),Ct===null?$e=vt:Ct.sibling=vt,Ct=vt);return s&&Ue.forEach(function(uo){return l(se,uo)}),St&&Xa(se,dt),$e}function Xe(se,re,ue,ye){if(ue==null)throw Error(r(151));for(var $e=null,Ct=null,Ue=re,dt=re=0,vt=null,kt=ue.next();Ue!==null&&!kt.done;dt++,kt=ue.next()){Ue.index>dt?(vt=Ue,Ue=null):vt=Ue.sibling;var uo=fe(se,Ue,kt.value,ye);if(uo===null){Ue===null&&(Ue=vt);break}s&&Ue&&uo.alternate===null&&l(se,Ue),re=S(uo,re,dt),Ct===null?$e=uo:Ct.sibling=uo,Ct=uo,Ue=vt}if(kt.done)return f(se,Ue),St&&Xa(se,dt),$e;if(Ue===null){for(;!kt.done;dt++,kt=ue.next())kt=xe(se,kt.value,ye),kt!==null&&(re=S(kt,re,dt),Ct===null?$e=kt:Ct.sibling=kt,Ct=kt);return St&&Xa(se,dt),$e}for(Ue=p(Ue);!kt.done;dt++,kt=ue.next())kt=pe(Ue,se,dt,kt.value,ye),kt!==null&&(s&&kt.alternate!==null&&Ue.delete(kt.key===null?dt:kt.key),re=S(kt,re,dt),Ct===null?$e=kt:Ct.sibling=kt,Ct=kt);return s&&Ue.forEach(function(pj){return l(se,pj)}),St&&Xa(se,dt),$e}function Ut(se,re,ue,ye){if(typeof ue=="object"&&ue!==null&&ue.type===w&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case b:e:{for(var $e=ue.key;re!==null;){if(re.key===$e){if($e=ue.type,$e===w){if(re.tag===7){f(se,re.sibling),ye=x(re,ue.props.children),ye.return=se,se=ye;break e}}else if(re.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===k&&xl($e)===re.type){f(se,re.sibling),ye=x(re,ue.props),kd(ye,ue),ye.return=se,se=ye;break e}f(se,re);break}else l(se,re);re=re.sibling}ue.type===w?(ye=gl(ue.props.children,se.mode,ye,ue.key),ye.return=se,se=ye):(ye=pp(ue.type,ue.key,ue.props,null,se.mode,ye),kd(ye,ue),ye.return=se,se=ye)}return I(se);case _:e:{for($e=ue.key;re!==null;){if(re.key===$e)if(re.tag===4&&re.stateNode.containerInfo===ue.containerInfo&&re.stateNode.implementation===ue.implementation){f(se,re.sibling),ye=x(re,ue.children||[]),ye.return=se,se=ye;break e}else{f(se,re);break}else l(se,re);re=re.sibling}ye=uv(ue,se.mode,ye),ye.return=se,se=ye}return I(se);case k:return ue=xl(ue),Ut(se,re,ue,ye)}if(X(ue))return je(se,re,ue,ye);if(U(ue)){if($e=U(ue),typeof $e!="function")throw Error(r(150));return ue=$e.call(ue),Xe(se,re,ue,ye)}if(typeof ue.then=="function")return Ut(se,re,_p(ue),ye);if(ue.$$typeof===N)return Ut(se,re,vp(se,ue),ye);wp(se,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint"?(ue=""+ue,re!==null&&re.tag===6?(f(se,re.sibling),ye=x(re,ue),ye.return=se,se=ye):(f(se,re),ye=cv(ue,se.mode,ye),ye.return=se,se=ye),I(se)):f(se,re)}return function(se,re,ue,ye){try{Cd=0;var $e=Ut(se,re,ue,ye);return Dc=null,$e}catch(Ue){if(Ue===Rc||Ue===bp)throw Ue;var Ct=qr(29,Ue,null,se.mode);return Ct.lanes=ye,Ct.return=se,Ct}finally{}}}var wl=PS(!0),jS=PS(!1),Ys=!1;function wv(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sv(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Xs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ws(s,l,f){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(Nt&2)!==0){var x=p.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),p.pending=l,l=hp(s),bS(s,null,f),l}return fp(s,p,l,f),hp(s)}function Rd(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var p=l.lanes;p&=s.pendingLanes,f|=p,l.lanes=f,nd(s,f)}}function Ev(s,l){var f=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var x=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var I={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};S===null?x=S=I:S=S.next=I,f=f.next}while(f!==null);S===null?x=S=l:S=S.next=l}else x=S=l;f={baseState:p.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:p.shared,callbacks:p.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var Tv=!1;function Dd(){if(Tv){var s=kc;if(s!==null)throw s}}function Nd(s,l,f,p){Tv=!1;var x=s.updateQueue;Ys=!1;var S=x.firstBaseUpdate,I=x.lastBaseUpdate,G=x.shared.pending;if(G!==null){x.shared.pending=null;var Q=G,de=Q.next;Q.next=null,I===null?S=de:I.next=de,I=Q;var ve=s.alternate;ve!==null&&(ve=ve.updateQueue,G=ve.lastBaseUpdate,G!==I&&(G===null?ve.firstBaseUpdate=de:G.next=de,ve.lastBaseUpdate=Q))}if(S!==null){var xe=x.baseState;I=0,ve=de=Q=null,G=S;do{var fe=G.lane&-536870913,pe=fe!==G.lane;if(pe?(mt&fe)===fe:(p&fe)===fe){fe!==0&&fe===Cc&&(Tv=!0),ve!==null&&(ve=ve.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});e:{var je=s,Xe=G;fe=l;var Ut=f;switch(Xe.tag){case 1:if(je=Xe.payload,typeof je=="function"){xe=je.call(Ut,xe,fe);break e}xe=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Xe.payload,fe=typeof je=="function"?je.call(Ut,xe,fe):je,fe==null)break e;xe=g({},xe,fe);break e;case 2:Ys=!0}}fe=G.callback,fe!==null&&(s.flags|=64,pe&&(s.flags|=8192),pe=x.callbacks,pe===null?x.callbacks=[fe]:pe.push(fe))}else pe={lane:fe,tag:G.tag,payload:G.payload,callback:G.callback,next:null},ve===null?(de=ve=pe,Q=xe):ve=ve.next=pe,I|=fe;if(G=G.next,G===null){if(G=x.shared.pending,G===null)break;pe=G,G=pe.next,pe.next=null,x.lastBaseUpdate=pe,x.shared.pending=null}}while(!0);ve===null&&(Q=xe),x.baseState=Q,x.firstBaseUpdate=de,x.lastBaseUpdate=ve,S===null&&(x.shared.lanes=0),eo|=I,s.lanes=I,s.memoizedState=xe}}function VS(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function zS(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)VS(f[s],l)}var Nc=F(null),Sp=F(0);function LS(s,l){s=as,J(Sp,s),J(Nc,l),as=s|l.baseLanes}function Av(){J(Sp,as),J(Nc,Nc.current)}function Cv(){as=Sp.current,Y(Nc),Y(Sp)}var Yr=F(null),fi=null;function Ks(s){var l=s.alternate;J(vn,vn.current&1),J(Yr,s),fi===null&&(l===null||Nc.current!==null||l.memoizedState!==null)&&(fi=s)}function kv(s){J(vn,vn.current),J(Yr,s),fi===null&&(fi=s)}function BS(s){s.tag===22?(J(vn,vn.current),J(Yr,s),fi===null&&(fi=s)):Qs()}function Qs(){J(vn,vn.current),J(Yr,Yr.current)}function Xr(s){Y(Yr),fi===s&&(fi=null),Y(vn)}var vn=F(0);function Ep(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Oy(f)||Py(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Qa=0,lt=null,Lt=null,kn=null,Tp=!1,Ic=!1,Sl=!1,Ap=0,Id=0,Mc=null,i3=0;function un(){throw Error(r(321))}function Rv(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!Hr(s[f],l[f]))return!1;return!0}function Dv(s,l,f,p,x,S){return Qa=S,lt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,q.H=s===null||s.memoizedState===null?SE:Hv,Sl=!1,S=f(p,x),Sl=!1,Ic&&(S=FS(l,f,p,x)),US(s),S}function US(s){q.H=Pd;var l=Lt!==null&&Lt.next!==null;if(Qa=0,kn=Lt=lt=null,Tp=!1,Id=0,Mc=null,l)throw Error(r(300));s===null||Rn||(s=s.dependencies,s!==null&&mp(s)&&(Rn=!0))}function FS(s,l,f,p){lt=s;var x=0;do{if(Ic&&(Mc=null),Id=0,Ic=!1,25<=x)throw Error(r(301));if(x+=1,kn=Lt=null,s.updateQueue!=null){var S=s.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}q.H=EE,S=l(f,p)}while(Ic);return S}function a3(){var s=q.H,l=s.useState()[0];return l=typeof l.then=="function"?Md(l):l,s=s.useState()[0],(Lt!==null?Lt.memoizedState:null)!==s&&(lt.flags|=1024),l}function Nv(){var s=Ap!==0;return Ap=0,s}function Iv(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function Mv(s){if(Tp){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Tp=!1}Qa=0,kn=Lt=lt=null,Ic=!1,Id=Ap=0,Mc=null}function mr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?lt.memoizedState=kn=s:kn=kn.next=s,kn}function yn(){if(Lt===null){var s=lt.alternate;s=s!==null?s.memoizedState:null}else s=Lt.next;var l=kn===null?lt.memoizedState:kn.next;if(l!==null)kn=l,Lt=s;else{if(s===null)throw lt.alternate===null?Error(r(467)):Error(r(310));Lt=s,s={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},kn===null?lt.memoizedState=kn=s:kn=kn.next=s}return kn}function Cp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Md(s){var l=Id;return Id+=1,Mc===null&&(Mc=[]),s=IS(Mc,s,l),l=lt,(kn===null?l.memoizedState:kn.next)===null&&(l=l.alternate,q.H=l===null||l.memoizedState===null?SE:Hv),s}function kp(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Md(s);if(s.$$typeof===N)return Kn(s)}throw Error(r(438,String(s)))}function Ov(s){var l=null,f=lt.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var p=lt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(x){return x.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Cp(),lt.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),p=0;p<s;p++)f[p]=j;return l.index++,f}function Za(s,l){return typeof l=="function"?l(s):l}function Rp(s){var l=yn();return Pv(l,Lt,s)}function Pv(s,l,f){var p=s.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var x=s.baseQueue,S=p.pending;if(S!==null){if(x!==null){var I=x.next;x.next=S.next,S.next=I}l.baseQueue=x=S,p.pending=null}if(S=s.baseState,x===null)s.memoizedState=S;else{l=x.next;var G=I=null,Q=null,de=l,ve=!1;do{var xe=de.lane&-536870913;if(xe!==de.lane?(mt&xe)===xe:(Qa&xe)===xe){var fe=de.revertLane;if(fe===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),xe===Cc&&(ve=!0);else if((Qa&fe)===fe){de=de.next,fe===Cc&&(ve=!0);continue}else xe={lane:0,revertLane:de.revertLane,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},Q===null?(G=Q=xe,I=S):Q=Q.next=xe,lt.lanes|=fe,eo|=fe;xe=de.action,Sl&&f(S,xe),S=de.hasEagerState?de.eagerState:f(S,xe)}else fe={lane:xe,revertLane:de.revertLane,gesture:de.gesture,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},Q===null?(G=Q=fe,I=S):Q=Q.next=fe,lt.lanes|=xe,eo|=xe;de=de.next}while(de!==null&&de!==l);if(Q===null?I=S:Q.next=G,!Hr(S,s.memoizedState)&&(Rn=!0,ve&&(f=kc,f!==null)))throw f;s.memoizedState=S,s.baseState=I,s.baseQueue=Q,p.lastRenderedState=S}return x===null&&(p.lanes=0),[s.memoizedState,p.dispatch]}function jv(s){var l=yn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var p=f.dispatch,x=f.pending,S=l.memoizedState;if(x!==null){f.pending=null;var I=x=x.next;do S=s(S,I.action),I=I.next;while(I!==x);Hr(S,l.memoizedState)||(Rn=!0),l.memoizedState=S,l.baseQueue===null&&(l.baseState=S),f.lastRenderedState=S}return[S,p]}function GS(s,l,f){var p=lt,x=yn(),S=St;if(S){if(f===void 0)throw Error(r(407));f=f()}else f=l();var I=!Hr((Lt||x).memoizedState,f);if(I&&(x.memoizedState=f,Rn=!0),x=x.queue,Lv(qS.bind(null,p,x,s),[s]),x.getSnapshot!==l||I||kn!==null&&kn.memoizedState.tag&1){if(p.flags|=2048,Oc(9,{destroy:void 0},HS.bind(null,p,x,f,l),null),$t===null)throw Error(r(349));S||(Qa&127)!==0||$S(p,l,f)}return f}function $S(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=lt.updateQueue,l===null?(l=Cp(),lt.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function HS(s,l,f,p){l.value=f,l.getSnapshot=p,YS(l)&&XS(s)}function qS(s,l,f){return f(function(){YS(l)&&XS(s)})}function YS(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!Hr(s,f)}catch{return!0}}function XS(s){var l=pl(s,2);l!==null&&Nr(l,s,2)}function Vv(s){var l=mr();if(typeof s=="function"){var f=s;if(s=f(),Sl){ar(!0);try{f()}finally{ar(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:s},l}function WS(s,l,f,p){return s.baseState=f,Pv(s,Lt,typeof p=="function"?p:Za)}function s3(s,l,f,p,x){if(Ip(s))throw Error(r(485));if(s=l.action,s!==null){var S={payload:x,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){S.listeners.push(I)}};q.T!==null?f(!0):S.isTransition=!1,p(S),f=l.pending,f===null?(S.next=l.pending=S,KS(l,S)):(S.next=f.next,l.pending=f.next=S)}}function KS(s,l){var f=l.action,p=l.payload,x=s.state;if(l.isTransition){var S=q.T,I={};q.T=I;try{var G=f(x,p),Q=q.S;Q!==null&&Q(I,G),QS(s,l,G)}catch(de){zv(s,l,de)}finally{S!==null&&I.types!==null&&(S.types=I.types),q.T=S}}else try{S=f(x,p),QS(s,l,S)}catch(de){zv(s,l,de)}}function QS(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){ZS(s,l,p)},function(p){return zv(s,l,p)}):ZS(s,l,f)}function ZS(s,l,f){l.status="fulfilled",l.value=f,JS(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,KS(s,f)))}function zv(s,l,f){var p=s.pending;if(s.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=f,JS(l),l=l.next;while(l!==p)}s.action=null}function JS(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function eE(s,l){return l}function tE(s,l){if(St){var f=$t.formState;if(f!==null){e:{var p=lt;if(St){if(Xt){t:{for(var x=Xt,S=di;x.nodeType!==8;){if(!S){x=null;break t}if(x=hi(x.nextSibling),x===null){x=null;break t}}S=x.data,x=S==="F!"||S==="F"?x:null}if(x){Xt=hi(x.nextSibling),p=x.data==="F!";break e}}Hs(p)}p=!1}p&&(l=f[0])}}return f=mr(),f.memoizedState=f.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eE,lastRenderedState:l},f.queue=p,f=xE.bind(null,lt,p),p.dispatch=f,p=Vv(!1),S=$v.bind(null,lt,!1,p.queue),p=mr(),x={state:l,dispatch:null,action:s,pending:null},p.queue=x,f=s3.bind(null,lt,x,S,f),x.dispatch=f,p.memoizedState=s,[l,f,!1]}function nE(s){var l=yn();return rE(l,Lt,s)}function rE(s,l,f){if(l=Pv(s,l,eE)[0],s=Rp(Za)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=Md(l)}catch(I){throw I===Rc?bp:I}else p=l;l=yn();var x=l.queue,S=x.dispatch;return f!==l.memoizedState&&(lt.flags|=2048,Oc(9,{destroy:void 0},o3.bind(null,x,f),null)),[p,S,s]}function o3(s,l){s.action=l}function iE(s){var l=yn(),f=Lt;if(f!==null)return rE(l,f,s);yn(),l=l.memoizedState,f=yn();var p=f.queue.dispatch;return f.memoizedState=s,[l,p,!1]}function Oc(s,l,f,p){return s={tag:s,create:f,deps:p,inst:l,next:null},l=lt.updateQueue,l===null&&(l=Cp(),lt.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(p=f.next,f.next=s,s.next=p,l.lastEffect=s),s}function aE(){return yn().memoizedState}function Dp(s,l,f,p){var x=mr();lt.flags|=s,x.memoizedState=Oc(1|l,{destroy:void 0},f,p===void 0?null:p)}function Np(s,l,f,p){var x=yn();p=p===void 0?null:p;var S=x.memoizedState.inst;Lt!==null&&p!==null&&Rv(p,Lt.memoizedState.deps)?x.memoizedState=Oc(l,S,f,p):(lt.flags|=s,x.memoizedState=Oc(1|l,S,f,p))}function sE(s,l){Dp(8390656,8,s,l)}function Lv(s,l){Np(2048,8,s,l)}function l3(s){lt.flags|=4;var l=lt.updateQueue;if(l===null)l=Cp(),lt.updateQueue=l,l.events=[s];else{var f=l.events;f===null?l.events=[s]:f.push(s)}}function oE(s){var l=yn().memoizedState;return l3({ref:l,nextImpl:s}),function(){if((Nt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function lE(s,l){return Np(4,2,s,l)}function cE(s,l){return Np(4,4,s,l)}function uE(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function dE(s,l,f){f=f!=null?f.concat([s]):null,Np(4,4,uE.bind(null,l,s),f)}function Bv(){}function fE(s,l){var f=yn();l=l===void 0?null:l;var p=f.memoizedState;return l!==null&&Rv(l,p[1])?p[0]:(f.memoizedState=[s,l],s)}function hE(s,l){var f=yn();l=l===void 0?null:l;var p=f.memoizedState;if(l!==null&&Rv(l,p[1]))return p[0];if(p=s(),Sl){ar(!0);try{s()}finally{ar(!1)}}return f.memoizedState=[p,l],p}function Uv(s,l,f){return f===void 0||(Qa&1073741824)!==0&&(mt&261930)===0?s.memoizedState=l:(s.memoizedState=f,s=pT(),lt.lanes|=s,eo|=s,f)}function pE(s,l,f,p){return Hr(f,l)?f:Nc.current!==null?(s=Uv(s,f,p),Hr(s,l)||(Rn=!0),s):(Qa&42)===0||(Qa&1073741824)!==0&&(mt&261930)===0?(Rn=!0,s.memoizedState=f):(s=pT(),lt.lanes|=s,eo|=s,l)}function gE(s,l,f,p,x){var S=W.p;W.p=S!==0&&8>S?S:8;var I=q.T,G={};q.T=G,$v(s,!1,l,f);try{var Q=x(),de=q.S;if(de!==null&&de(G,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var ve=r3(Q,p);Od(s,l,ve,Qr(s))}else Od(s,l,p,Qr(s))}catch(xe){Od(s,l,{then:function(){},status:"rejected",reason:xe},Qr())}finally{W.p=S,I!==null&&G.types!==null&&(I.types=G.types),q.T=I}}function c3(){}function Fv(s,l,f,p){if(s.tag!==5)throw Error(r(476));var x=mE(s).queue;gE(s,x,l,ee,f===null?c3:function(){return vE(s),f(p)})}function mE(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:ee},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function vE(s){var l=mE(s);l.next===null&&(l=s.alternate.memoizedState),Od(s,l.next.queue,{},Qr())}function Gv(){return Kn(Qd)}function yE(){return yn().memoizedState}function bE(){return yn().memoizedState}function u3(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=Qr();s=Xs(f);var p=Ws(l,s,f);p!==null&&(Nr(p,l,f),Rd(p,l,f)),l={cache:yv()},s.payload=l;return}l=l.return}}function d3(s,l,f){var p=Qr();f={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Ip(s)?_E(l,f):(f=ov(s,l,f,p),f!==null&&(Nr(f,s,p),wE(f,l,p)))}function xE(s,l,f){var p=Qr();Od(s,l,f,p)}function Od(s,l,f,p){var x={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Ip(s))_E(l,x);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=l.lastRenderedReducer,S!==null))try{var I=l.lastRenderedState,G=S(I,f);if(x.hasEagerState=!0,x.eagerState=G,Hr(G,I))return fp(s,l,x,0),$t===null&&dp(),!1}catch{}finally{}if(f=ov(s,l,x,p),f!==null)return Nr(f,s,p),wE(f,l,p),!0}return!1}function $v(s,l,f,p){if(p={lane:2,revertLane:wy(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Ip(s)){if(l)throw Error(r(479))}else l=ov(s,f,p,2),l!==null&&Nr(l,s,2)}function Ip(s){var l=s.alternate;return s===lt||l!==null&&l===lt}function _E(s,l){Ic=Tp=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function wE(s,l,f){if((f&4194048)!==0){var p=l.lanes;p&=s.pendingLanes,f|=p,l.lanes=f,nd(s,f)}}var Pd={readContext:Kn,use:kp,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un,useHostTransitionStatus:un,useFormState:un,useActionState:un,useOptimistic:un,useMemoCache:un,useCacheRefresh:un};Pd.useEffectEvent=un;var SE={readContext:Kn,use:kp,useCallback:function(s,l){return mr().memoizedState=[s,l===void 0?null:l],s},useContext:Kn,useEffect:sE,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Dp(4194308,4,uE.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Dp(4194308,4,s,l)},useInsertionEffect:function(s,l){Dp(4,2,s,l)},useMemo:function(s,l){var f=mr();l=l===void 0?null:l;var p=s();if(Sl){ar(!0);try{s()}finally{ar(!1)}}return f.memoizedState=[p,l],p},useReducer:function(s,l,f){var p=mr();if(f!==void 0){var x=f(l);if(Sl){ar(!0);try{f(l)}finally{ar(!1)}}}else x=l;return p.memoizedState=p.baseState=x,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:x},p.queue=s,s=s.dispatch=d3.bind(null,lt,s),[p.memoizedState,s]},useRef:function(s){var l=mr();return s={current:s},l.memoizedState=s},useState:function(s){s=Vv(s);var l=s.queue,f=xE.bind(null,lt,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:Bv,useDeferredValue:function(s,l){var f=mr();return Uv(f,s,l)},useTransition:function(){var s=Vv(!1);return s=gE.bind(null,lt,s.queue,!0,!1),mr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var p=lt,x=mr();if(St){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),$t===null)throw Error(r(349));(mt&127)!==0||$S(p,l,f)}x.memoizedState=f;var S={value:f,getSnapshot:l};return x.queue=S,sE(qS.bind(null,p,S,s),[s]),p.flags|=2048,Oc(9,{destroy:void 0},HS.bind(null,p,S,f,l),null),f},useId:function(){var s=mr(),l=$t.identifierPrefix;if(St){var f=ya,p=va;f=(p&~(1<<32-tn(p)-1)).toString(32)+f,l="_"+l+"R_"+f,f=Ap++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=i3++,l="_"+l+"r_"+f.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:Gv,useFormState:tE,useActionState:tE,useOptimistic:function(s){var l=mr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=$v.bind(null,lt,!0,f),f.dispatch=l,[s,l]},useMemoCache:Ov,useCacheRefresh:function(){return mr().memoizedState=u3.bind(null,lt)},useEffectEvent:function(s){var l=mr(),f={impl:s};return l.memoizedState=f,function(){if((Nt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},Hv={readContext:Kn,use:kp,useCallback:fE,useContext:Kn,useEffect:Lv,useImperativeHandle:dE,useInsertionEffect:lE,useLayoutEffect:cE,useMemo:hE,useReducer:Rp,useRef:aE,useState:function(){return Rp(Za)},useDebugValue:Bv,useDeferredValue:function(s,l){var f=yn();return pE(f,Lt.memoizedState,s,l)},useTransition:function(){var s=Rp(Za)[0],l=yn().memoizedState;return[typeof s=="boolean"?s:Md(s),l]},useSyncExternalStore:GS,useId:yE,useHostTransitionStatus:Gv,useFormState:nE,useActionState:nE,useOptimistic:function(s,l){var f=yn();return WS(f,Lt,s,l)},useMemoCache:Ov,useCacheRefresh:bE};Hv.useEffectEvent=oE;var EE={readContext:Kn,use:kp,useCallback:fE,useContext:Kn,useEffect:Lv,useImperativeHandle:dE,useInsertionEffect:lE,useLayoutEffect:cE,useMemo:hE,useReducer:jv,useRef:aE,useState:function(){return jv(Za)},useDebugValue:Bv,useDeferredValue:function(s,l){var f=yn();return Lt===null?Uv(f,s,l):pE(f,Lt.memoizedState,s,l)},useTransition:function(){var s=jv(Za)[0],l=yn().memoizedState;return[typeof s=="boolean"?s:Md(s),l]},useSyncExternalStore:GS,useId:yE,useHostTransitionStatus:Gv,useFormState:iE,useActionState:iE,useOptimistic:function(s,l){var f=yn();return Lt!==null?WS(f,Lt,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:Ov,useCacheRefresh:bE};EE.useEffectEvent=oE;function qv(s,l,f,p){l=s.memoizedState,f=f(p,l),f=f==null?l:g({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var Yv={enqueueSetState:function(s,l,f){s=s._reactInternals;var p=Qr(),x=Xs(p);x.payload=l,f!=null&&(x.callback=f),l=Ws(s,x,p),l!==null&&(Nr(l,s,p),Rd(l,s,p))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var p=Qr(),x=Xs(p);x.tag=1,x.payload=l,f!=null&&(x.callback=f),l=Ws(s,x,p),l!==null&&(Nr(l,s,p),Rd(l,s,p))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=Qr(),p=Xs(f);p.tag=2,l!=null&&(p.callback=l),l=Ws(s,p,f),l!==null&&(Nr(l,s,f),Rd(l,s,f))}};function TE(s,l,f,p,x,S,I){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,S,I):l.prototype&&l.prototype.isPureReactComponent?!_d(f,p)||!_d(x,S):!0}function AE(s,l,f,p){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,p),l.state!==s&&Yv.enqueueReplaceState(l,l.state,null)}function El(s,l){var f=l;if("ref"in l){f={};for(var p in l)p!=="ref"&&(f[p]=l[p])}if(s=s.defaultProps){f===l&&(f=g({},f));for(var x in s)f[x]===void 0&&(f[x]=s[x])}return f}function CE(s){up(s)}function kE(s){console.error(s)}function RE(s){up(s)}function Mp(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function DE(s,l,f){try{var p=s.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Xv(s,l,f){return f=Xs(f),f.tag=3,f.payload={element:null},f.callback=function(){Mp(s,l)},f}function NE(s){return s=Xs(s),s.tag=3,s}function IE(s,l,f,p){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var S=p.value;s.payload=function(){return x(S)},s.callback=function(){DE(l,f,p)}}var I=f.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(s.callback=function(){DE(l,f,p),typeof x!="function"&&(to===null?to=new Set([this]):to.add(this));var G=p.stack;this.componentDidCatch(p.value,{componentStack:G!==null?G:""})})}function f3(s,l,f,p,x){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=f.alternate,l!==null&&Ac(l,f,x,!0),f=Yr.current,f!==null){switch(f.tag){case 31:case 13:return fi===null?Hp():f.alternate===null&&dn===0&&(dn=3),f.flags&=-257,f.flags|=65536,f.lanes=x,p===xp?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([p]):l.add(p),by(s,p,x)),!1;case 22:return f.flags|=65536,p===xp?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([p]):f.add(p)),by(s,p,x)),!1}throw Error(r(435,f.tag))}return by(s,p,x),Hp(),!1}if(St)return l=Yr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=x,p!==hv&&(s=Error(r(422),{cause:p}),Ed(li(s,f)))):(p!==hv&&(l=Error(r(423),{cause:p}),Ed(li(l,f))),s=s.current.alternate,s.flags|=65536,x&=-x,s.lanes|=x,p=li(p,f),x=Xv(s.stateNode,p,x),Ev(s,x),dn!==4&&(dn=2)),!1;var S=Error(r(520),{cause:p});if(S=li(S,f),Gd===null?Gd=[S]:Gd.push(S),dn!==4&&(dn=2),l===null)return!0;p=li(p,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=x&-x,f.lanes|=s,s=Xv(f.stateNode,p,s),Ev(f,s),!1;case 1:if(l=f.type,S=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(to===null||!to.has(S))))return f.flags|=65536,x&=-x,f.lanes|=x,x=NE(x),IE(x,s,f,p),Ev(f,x),!1}f=f.return}while(f!==null);return!1}var Wv=Error(r(461)),Rn=!1;function Qn(s,l,f,p){l.child=s===null?jS(l,null,f,p):wl(l,s.child,f,p)}function ME(s,l,f,p,x){f=f.render;var S=l.ref;if("ref"in p){var I={};for(var G in p)G!=="ref"&&(I[G]=p[G])}else I=p;return yl(l),p=Dv(s,l,f,I,S,x),G=Nv(),s!==null&&!Rn?(Iv(s,l,x),Ja(s,l,x)):(St&&G&&dv(l),l.flags|=1,Qn(s,l,p,x),l.child)}function OE(s,l,f,p,x){if(s===null){var S=f.type;return typeof S=="function"&&!lv(S)&&S.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=S,PE(s,l,S,p,x)):(s=pp(f.type,null,p,l,l.mode,x),s.ref=l.ref,s.return=l,l.child=s)}if(S=s.child,!ry(s,x)){var I=S.memoizedProps;if(f=f.compare,f=f!==null?f:_d,f(I,p)&&s.ref===l.ref)return Ja(s,l,x)}return l.flags|=1,s=Ya(S,p),s.ref=l.ref,s.return=l,l.child=s}function PE(s,l,f,p,x){if(s!==null){var S=s.memoizedProps;if(_d(S,p)&&s.ref===l.ref)if(Rn=!1,l.pendingProps=p=S,ry(s,x))(s.flags&131072)!==0&&(Rn=!0);else return l.lanes=s.lanes,Ja(s,l,x)}return Kv(s,l,f,p,x)}function jE(s,l,f,p){var x=p.children,S=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((l.flags&128)!==0){if(S=S!==null?S.baseLanes|f:f,s!==null){for(p=l.child=s.child,x=0;p!==null;)x=x|p.lanes|p.childLanes,p=p.sibling;p=x&~S}else p=0,l.child=null;return VE(s,l,S,f,p)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&yp(l,S!==null?S.cachePool:null),S!==null?LS(l,S):Av(),BS(l);else return p=l.lanes=536870912,VE(s,l,S!==null?S.baseLanes|f:f,f,p)}else S!==null?(yp(l,S.cachePool),LS(l,S),Qs(),l.memoizedState=null):(s!==null&&yp(l,null),Av(),Qs());return Qn(s,l,x,f),l.child}function jd(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function VE(s,l,f,p,x){var S=xv();return S=S===null?null:{parent:Cn._currentValue,pool:S},l.memoizedState={baseLanes:f,cachePool:S},s!==null&&yp(l,null),Av(),BS(l),s!==null&&Ac(s,l,p,!0),l.childLanes=x,null}function Op(s,l){return l=jp({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function zE(s,l,f){return wl(l,s.child,null,f),s=Op(l,l.pendingProps),s.flags|=2,Xr(l),l.memoizedState=null,s}function h3(s,l,f){var p=l.pendingProps,x=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(St){if(p.mode==="hidden")return s=Op(l,p),l.lanes=536870912,jd(null,s);if(kv(l),(s=Xt)?(s=KT(s,di),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Gs!==null?{id:va,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},f=_S(s),f.return=l,l.child=f,Wn=l,Xt=null)):s=null,s===null)throw Hs(l);return l.lanes=536870912,null}return Op(l,p)}var S=s.memoizedState;if(S!==null){var I=S.dehydrated;if(kv(l),x)if(l.flags&256)l.flags&=-257,l=zE(s,l,f);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(Rn||Ac(s,l,f,!1),x=(f&s.childLanes)!==0,Rn||x){if(p=$t,p!==null&&(I=rd(p,f),I!==0&&I!==S.retryLane))throw S.retryLane=I,pl(s,I),Nr(p,s,I),Wv;Hp(),l=zE(s,l,f)}else s=S.treeContext,Xt=hi(I.nextSibling),Wn=l,St=!0,$s=null,di=!1,s!==null&&ES(l,s),l=Op(l,p),l.flags|=4096;return l}return s=Ya(s.child,{mode:p.mode,children:p.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Pp(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function Kv(s,l,f,p,x){return yl(l),f=Dv(s,l,f,p,void 0,x),p=Nv(),s!==null&&!Rn?(Iv(s,l,x),Ja(s,l,x)):(St&&p&&dv(l),l.flags|=1,Qn(s,l,f,x),l.child)}function LE(s,l,f,p,x,S){return yl(l),l.updateQueue=null,f=FS(l,p,f,x),US(s),p=Nv(),s!==null&&!Rn?(Iv(s,l,S),Ja(s,l,S)):(St&&p&&dv(l),l.flags|=1,Qn(s,l,f,S),l.child)}function BE(s,l,f,p,x){if(yl(l),l.stateNode===null){var S=wc,I=f.contextType;typeof I=="object"&&I!==null&&(S=Kn(I)),S=new f(p,S),l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Yv,l.stateNode=S,S._reactInternals=l,S=l.stateNode,S.props=p,S.state=l.memoizedState,S.refs={},wv(l),I=f.contextType,S.context=typeof I=="object"&&I!==null?Kn(I):wc,S.state=l.memoizedState,I=f.getDerivedStateFromProps,typeof I=="function"&&(qv(l,f,I,p),S.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(I=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),I!==S.state&&Yv.enqueueReplaceState(S,S.state,null),Nd(l,p,S,x),Dd(),S.state=l.memoizedState),typeof S.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(s===null){S=l.stateNode;var G=l.memoizedProps,Q=El(f,G);S.props=Q;var de=S.context,ve=f.contextType;I=wc,typeof ve=="object"&&ve!==null&&(I=Kn(ve));var xe=f.getDerivedStateFromProps;ve=typeof xe=="function"||typeof S.getSnapshotBeforeUpdate=="function",G=l.pendingProps!==G,ve||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(G||de!==I)&&AE(l,S,p,I),Ys=!1;var fe=l.memoizedState;S.state=fe,Nd(l,p,S,x),Dd(),de=l.memoizedState,G||fe!==de||Ys?(typeof xe=="function"&&(qv(l,f,xe,p),de=l.memoizedState),(Q=Ys||TE(l,f,Q,p,fe,de,I))?(ve||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(l.flags|=4194308)):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=de),S.props=p,S.state=de,S.context=I,p=Q):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{S=l.stateNode,Sv(s,l),I=l.memoizedProps,ve=El(f,I),S.props=ve,xe=l.pendingProps,fe=S.context,de=f.contextType,Q=wc,typeof de=="object"&&de!==null&&(Q=Kn(de)),G=f.getDerivedStateFromProps,(de=typeof G=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(I!==xe||fe!==Q)&&AE(l,S,p,Q),Ys=!1,fe=l.memoizedState,S.state=fe,Nd(l,p,S,x),Dd();var pe=l.memoizedState;I!==xe||fe!==pe||Ys||s!==null&&s.dependencies!==null&&mp(s.dependencies)?(typeof G=="function"&&(qv(l,f,G,p),pe=l.memoizedState),(ve=Ys||TE(l,f,ve,p,fe,pe,Q)||s!==null&&s.dependencies!==null&&mp(s.dependencies))?(de||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,pe,Q),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,pe,Q)),typeof S.componentDidUpdate=="function"&&(l.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof S.componentDidUpdate!="function"||I===s.memoizedProps&&fe===s.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&fe===s.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=pe),S.props=p,S.state=pe,S.context=Q,p=ve):(typeof S.componentDidUpdate!="function"||I===s.memoizedProps&&fe===s.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&fe===s.memoizedState||(l.flags|=1024),p=!1)}return S=p,Pp(s,l),p=(l.flags&128)!==0,S||p?(S=l.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:S.render(),l.flags|=1,s!==null&&p?(l.child=wl(l,s.child,null,x),l.child=wl(l,null,f,x)):Qn(s,l,f,x),l.memoizedState=S.state,s=l.child):s=Ja(s,l,x),s}function UE(s,l,f,p){return ml(),l.flags|=256,Qn(s,l,f,p),l.child}var Qv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zv(s){return{baseLanes:s,cachePool:DS()}}function Jv(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=Kr),s}function FE(s,l,f){var p=l.pendingProps,x=!1,S=(l.flags&128)!==0,I;if((I=S)||(I=s!==null&&s.memoizedState===null?!1:(vn.current&2)!==0),I&&(x=!0,l.flags&=-129),I=(l.flags&32)!==0,l.flags&=-33,s===null){if(St){if(x?Ks(l):Qs(),(s=Xt)?(s=KT(s,di),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Gs!==null?{id:va,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},f=_S(s),f.return=l,l.child=f,Wn=l,Xt=null)):s=null,s===null)throw Hs(l);return Py(s)?l.lanes=32:l.lanes=536870912,null}var G=p.children;return p=p.fallback,x?(Qs(),x=l.mode,G=jp({mode:"hidden",children:G},x),p=gl(p,x,f,null),G.return=l,p.return=l,G.sibling=p,l.child=G,p=l.child,p.memoizedState=Zv(f),p.childLanes=Jv(s,I,f),l.memoizedState=Qv,jd(null,p)):(Ks(l),ey(l,G))}var Q=s.memoizedState;if(Q!==null&&(G=Q.dehydrated,G!==null)){if(S)l.flags&256?(Ks(l),l.flags&=-257,l=ty(s,l,f)):l.memoizedState!==null?(Qs(),l.child=s.child,l.flags|=128,l=null):(Qs(),G=p.fallback,x=l.mode,p=jp({mode:"visible",children:p.children},x),G=gl(G,x,f,null),G.flags|=2,p.return=l,G.return=l,p.sibling=G,l.child=p,wl(l,s.child,null,f),p=l.child,p.memoizedState=Zv(f),p.childLanes=Jv(s,I,f),l.memoizedState=Qv,l=jd(null,p));else if(Ks(l),Py(G)){if(I=G.nextSibling&&G.nextSibling.dataset,I)var de=I.dgst;I=de,p=Error(r(419)),p.stack="",p.digest=I,Ed({value:p,source:null,stack:null}),l=ty(s,l,f)}else if(Rn||Ac(s,l,f,!1),I=(f&s.childLanes)!==0,Rn||I){if(I=$t,I!==null&&(p=rd(I,f),p!==0&&p!==Q.retryLane))throw Q.retryLane=p,pl(s,p),Nr(I,s,p),Wv;Oy(G)||Hp(),l=ty(s,l,f)}else Oy(G)?(l.flags|=192,l.child=s.child,l=null):(s=Q.treeContext,Xt=hi(G.nextSibling),Wn=l,St=!0,$s=null,di=!1,s!==null&&ES(l,s),l=ey(l,p.children),l.flags|=4096);return l}return x?(Qs(),G=p.fallback,x=l.mode,Q=s.child,de=Q.sibling,p=Ya(Q,{mode:"hidden",children:p.children}),p.subtreeFlags=Q.subtreeFlags&65011712,de!==null?G=Ya(de,G):(G=gl(G,x,f,null),G.flags|=2),G.return=l,p.return=l,p.sibling=G,l.child=p,jd(null,p),p=l.child,G=s.child.memoizedState,G===null?G=Zv(f):(x=G.cachePool,x!==null?(Q=Cn._currentValue,x=x.parent!==Q?{parent:Q,pool:Q}:x):x=DS(),G={baseLanes:G.baseLanes|f,cachePool:x}),p.memoizedState=G,p.childLanes=Jv(s,I,f),l.memoizedState=Qv,jd(s.child,p)):(Ks(l),f=s.child,s=f.sibling,f=Ya(f,{mode:"visible",children:p.children}),f.return=l,f.sibling=null,s!==null&&(I=l.deletions,I===null?(l.deletions=[s],l.flags|=16):I.push(s)),l.child=f,l.memoizedState=null,f)}function ey(s,l){return l=jp({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function jp(s,l){return s=qr(22,s,null,l),s.lanes=0,s}function ty(s,l,f){return wl(l,s.child,null,f),s=ey(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function GE(s,l,f){s.lanes|=l;var p=s.alternate;p!==null&&(p.lanes|=l),mv(s.return,l,f)}function ny(s,l,f,p,x,S){var I=s.memoizedState;I===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:x,treeForkCount:S}:(I.isBackwards=l,I.rendering=null,I.renderingStartTime=0,I.last=p,I.tail=f,I.tailMode=x,I.treeForkCount=S)}function $E(s,l,f){var p=l.pendingProps,x=p.revealOrder,S=p.tail;p=p.children;var I=vn.current,G=(I&2)!==0;if(G?(I=I&1|2,l.flags|=128):I&=1,J(vn,I),Qn(s,l,p,f),p=St?Sd:0,!G&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&GE(s,f,l);else if(s.tag===19)GE(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(x){case"forwards":for(f=l.child,x=null;f!==null;)s=f.alternate,s!==null&&Ep(s)===null&&(x=f),f=f.sibling;f=x,f===null?(x=l.child,l.child=null):(x=f.sibling,f.sibling=null),ny(l,!1,x,f,S,p);break;case"backwards":case"unstable_legacy-backwards":for(f=null,x=l.child,l.child=null;x!==null;){if(s=x.alternate,s!==null&&Ep(s)===null){l.child=x;break}s=x.sibling,x.sibling=f,f=x,x=s}ny(l,!0,f,null,S,p);break;case"together":ny(l,!1,null,null,void 0,p);break;default:l.memoizedState=null}return l.child}function Ja(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),eo|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(Ac(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=Ya(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=Ya(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function ry(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&mp(s)))}function p3(s,l,f){switch(l.tag){case 3:ge(l,l.stateNode.containerInfo),qs(l,Cn,s.memoizedState.cache),ml();break;case 27:case 5:Ne(l);break;case 4:ge(l,l.stateNode.containerInfo);break;case 10:qs(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,kv(l),null;break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(Ks(l),l.flags|=128,null):(f&l.child.childLanes)!==0?FE(s,l,f):(Ks(l),s=Ja(s,l,f),s!==null?s.sibling:null);Ks(l);break;case 19:var x=(s.flags&128)!==0;if(p=(f&l.childLanes)!==0,p||(Ac(s,l,f,!1),p=(f&l.childLanes)!==0),x){if(p)return $E(s,l,f);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),J(vn,vn.current),p)break;return null;case 22:return l.lanes=0,jE(s,l,f,l.pendingProps);case 24:qs(l,Cn,s.memoizedState.cache)}return Ja(s,l,f)}function HE(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)Rn=!0;else{if(!ry(s,f)&&(l.flags&128)===0)return Rn=!1,p3(s,l,f);Rn=(s.flags&131072)!==0}else Rn=!1,St&&(l.flags&1048576)!==0&&SS(l,Sd,l.index);switch(l.lanes=0,l.tag){case 16:e:{var p=l.pendingProps;if(s=xl(l.elementType),l.type=s,typeof s=="function")lv(s)?(p=El(s,p),l.tag=1,l=BE(null,l,s,p,f)):(l.tag=0,l=Kv(null,l,s,p,f));else{if(s!=null){var x=s.$$typeof;if(x===V){l.tag=11,l=ME(null,l,s,p,f);break e}else if(x===A){l.tag=14,l=OE(null,l,s,p,f);break e}}throw l=Z(s)||s,Error(r(306,l,""))}}return l;case 0:return Kv(s,l,l.type,l.pendingProps,f);case 1:return p=l.type,x=El(p,l.pendingProps),BE(s,l,p,x,f);case 3:e:{if(ge(l,l.stateNode.containerInfo),s===null)throw Error(r(387));p=l.pendingProps;var S=l.memoizedState;x=S.element,Sv(s,l),Nd(l,p,null,f);var I=l.memoizedState;if(p=I.cache,qs(l,Cn,p),p!==S.cache&&vv(l,[Cn],f,!0),Dd(),p=I.element,S.isDehydrated)if(S={element:p,isDehydrated:!1,cache:I.cache},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){l=UE(s,l,p,f);break e}else if(p!==x){x=li(Error(r(424)),l),Ed(x),l=UE(s,l,p,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Xt=hi(s.firstChild),Wn=l,St=!0,$s=null,di=!0,f=jS(l,null,p,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(ml(),p===x){l=Ja(s,l,f);break e}Qn(s,l,p,f)}l=l.child}return l;case 26:return Pp(s,l),s===null?(f=nA(l.type,null,l.pendingProps,null))?l.memoizedState=f:St||(f=l.type,s=l.pendingProps,p=Zp(ce.current).createElement(f),p[En]=l,p[$n]=s,Zn(p,f,s),Tn(p),l.stateNode=p):l.memoizedState=nA(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Ne(l),s===null&&St&&(p=l.stateNode=JT(l.type,l.pendingProps,ce.current),Wn=l,di=!0,x=Xt,ao(l.type)?(jy=x,Xt=hi(p.firstChild)):Xt=x),Qn(s,l,l.pendingProps.children,f),Pp(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&St&&((x=p=Xt)&&(p=$3(p,l.type,l.pendingProps,di),p!==null?(l.stateNode=p,Wn=l,Xt=hi(p.firstChild),di=!1,x=!0):x=!1),x||Hs(l)),Ne(l),x=l.type,S=l.pendingProps,I=s!==null?s.memoizedProps:null,p=S.children,Ny(x,S)?p=null:I!==null&&Ny(x,I)&&(l.flags|=32),l.memoizedState!==null&&(x=Dv(s,l,a3,null,null,f),Qd._currentValue=x),Pp(s,l),Qn(s,l,p,f),l.child;case 6:return s===null&&St&&((s=f=Xt)&&(f=H3(f,l.pendingProps,di),f!==null?(l.stateNode=f,Wn=l,Xt=null,s=!0):s=!1),s||Hs(l)),null;case 13:return FE(s,l,f);case 4:return ge(l,l.stateNode.containerInfo),p=l.pendingProps,s===null?l.child=wl(l,null,p,f):Qn(s,l,p,f),l.child;case 11:return ME(s,l,l.type,l.pendingProps,f);case 7:return Qn(s,l,l.pendingProps,f),l.child;case 8:return Qn(s,l,l.pendingProps.children,f),l.child;case 12:return Qn(s,l,l.pendingProps.children,f),l.child;case 10:return p=l.pendingProps,qs(l,l.type,p.value),Qn(s,l,p.children,f),l.child;case 9:return x=l.type._context,p=l.pendingProps.children,yl(l),x=Kn(x),p=p(x),l.flags|=1,Qn(s,l,p,f),l.child;case 14:return OE(s,l,l.type,l.pendingProps,f);case 15:return PE(s,l,l.type,l.pendingProps,f);case 19:return $E(s,l,f);case 31:return h3(s,l,f);case 22:return jE(s,l,f,l.pendingProps);case 24:return yl(l),p=Kn(Cn),s===null?(x=xv(),x===null&&(x=$t,S=yv(),x.pooledCache=S,S.refCount++,S!==null&&(x.pooledCacheLanes|=f),x=S),l.memoizedState={parent:p,cache:x},wv(l),qs(l,Cn,x)):((s.lanes&f)!==0&&(Sv(s,l),Nd(l,null,null,f),Dd()),x=s.memoizedState,S=l.memoizedState,x.parent!==p?(x={parent:p,cache:p},l.memoizedState=x,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=x),qs(l,Cn,p)):(p=S.cache,qs(l,Cn,p),p!==x.cache&&vv(l,[Cn],f,!0))),Qn(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function es(s){s.flags|=4}function iy(s,l,f,p,x){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(x&335544128)===x)if(s.stateNode.complete)s.flags|=8192;else if(yT())s.flags|=8192;else throw _l=xp,_v}else s.flags&=-16777217}function qE(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!oA(l))if(yT())s.flags|=8192;else throw _l=xp,_v}function Vp(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Gh():536870912,s.lanes|=l,zc|=l)}function Vd(s,l){if(!St)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function Wt(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,p=0;if(l)for(var x=s.child;x!==null;)f|=x.lanes|x.childLanes,p|=x.subtreeFlags&65011712,p|=x.flags&65011712,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)f|=x.lanes|x.childLanes,p|=x.subtreeFlags,p|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=p,s.childLanes=f,l}function g3(s,l,f){var p=l.pendingProps;switch(fv(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(l),null;case 1:return Wt(l),null;case 3:return f=l.stateNode,p=null,s!==null&&(p=s.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Ka(Cn),Te(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Tc(l)?es(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,pv())),Wt(l),null;case 26:var x=l.type,S=l.memoizedState;return s===null?(es(l),S!==null?(Wt(l),qE(l,S)):(Wt(l),iy(l,x,null,p,f))):S?S!==s.memoizedState?(es(l),Wt(l),qE(l,S)):(Wt(l),l.flags&=-16777217):(s=s.memoizedProps,s!==p&&es(l),Wt(l),iy(l,x,s,p,f)),null;case 27:if(ae(l),f=ce.current,x=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&es(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return Wt(l),null}s=K.current,Tc(l)?TS(l):(s=JT(x,p,f),l.stateNode=s,es(l))}return Wt(l),null;case 5:if(ae(l),x=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&es(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return Wt(l),null}if(S=K.current,Tc(l))TS(l);else{var I=Zp(ce.current);switch(S){case 1:S=I.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:S=I.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":S=I.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":S=I.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":S=I.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof p.is=="string"?I.createElement("select",{is:p.is}):I.createElement("select"),p.multiple?S.multiple=!0:p.size&&(S.size=p.size);break;default:S=typeof p.is=="string"?I.createElement(x,{is:p.is}):I.createElement(x)}}S[En]=l,S[$n]=p;e:for(I=l.child;I!==null;){if(I.tag===5||I.tag===6)S.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===l)break e;for(;I.sibling===null;){if(I.return===null||I.return===l)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}l.stateNode=S;e:switch(Zn(S,x,p),x){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&es(l)}}return Wt(l),iy(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,f),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==p&&es(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(r(166));if(s=ce.current,Tc(l)){if(s=l.stateNode,f=l.memoizedProps,p=null,x=Wn,x!==null)switch(x.tag){case 27:case 5:p=x.memoizedProps}s[En]=l,s=!!(s.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||FT(s.nodeValue,f)),s||Hs(l,!0)}else s=Zp(s).createTextNode(p),s[En]=l,l.stateNode=s}return Wt(l),null;case 31:if(f=l.memoizedState,s===null||s.memoizedState!==null){if(p=Tc(l),f!==null){if(s===null){if(!p)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[En]=l}else ml(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Wt(l),s=!1}else f=pv(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return l.flags&256?(Xr(l),l):(Xr(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Wt(l),null;case 13:if(p=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(x=Tc(l),p!==null&&p.dehydrated!==null){if(s===null){if(!x)throw Error(r(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[En]=l}else ml(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Wt(l),x=!1}else x=pv(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=x),x=!0;if(!x)return l.flags&256?(Xr(l),l):(Xr(l),null)}return Xr(l),(l.flags&128)!==0?(l.lanes=f,l):(f=p!==null,s=s!==null&&s.memoizedState!==null,f&&(p=l.child,x=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(x=p.alternate.memoizedState.cachePool.pool),S=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),S!==x&&(p.flags|=2048)),f!==s&&f&&(l.child.flags|=8192),Vp(l,l.updateQueue),Wt(l),null);case 4:return Te(),s===null&&Ay(l.stateNode.containerInfo),Wt(l),null;case 10:return Ka(l.type),Wt(l),null;case 19:if(Y(vn),p=l.memoizedState,p===null)return Wt(l),null;if(x=(l.flags&128)!==0,S=p.rendering,S===null)if(x)Vd(p,!1);else{if(dn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(S=Ep(s),S!==null){for(l.flags|=128,Vd(p,!1),s=S.updateQueue,l.updateQueue=s,Vp(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)xS(f,s),f=f.sibling;return J(vn,vn.current&1|2),St&&Xa(l,p.treeForkCount),l.child}s=s.sibling}p.tail!==null&&ut()>Fp&&(l.flags|=128,x=!0,Vd(p,!1),l.lanes=4194304)}else{if(!x)if(s=Ep(S),s!==null){if(l.flags|=128,x=!0,s=s.updateQueue,l.updateQueue=s,Vp(l,s),Vd(p,!0),p.tail===null&&p.tailMode==="hidden"&&!S.alternate&&!St)return Wt(l),null}else 2*ut()-p.renderingStartTime>Fp&&f!==536870912&&(l.flags|=128,x=!0,Vd(p,!1),l.lanes=4194304);p.isBackwards?(S.sibling=l.child,l.child=S):(s=p.last,s!==null?s.sibling=S:l.child=S,p.last=S)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=ut(),s.sibling=null,f=vn.current,J(vn,x?f&1|2:f&1),St&&Xa(l,p.treeForkCount),s):(Wt(l),null);case 22:case 23:return Xr(l),Cv(),p=l.memoizedState!==null,s!==null?s.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(f&536870912)!==0&&(l.flags&128)===0&&(Wt(l),l.subtreeFlags&6&&(l.flags|=8192)):Wt(l),f=l.updateQueue,f!==null&&Vp(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048),s!==null&&Y(bl),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Ka(Cn),Wt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function m3(s,l){switch(fv(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ka(Cn),Te(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return ae(l),null;case 31:if(l.memoizedState!==null){if(Xr(l),l.alternate===null)throw Error(r(340));ml()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(Xr(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));ml()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Y(vn),null;case 4:return Te(),null;case 10:return Ka(l.type),null;case 22:case 23:return Xr(l),Cv(),s!==null&&Y(bl),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Ka(Cn),null;case 25:return null;default:return null}}function YE(s,l){switch(fv(l),l.tag){case 3:Ka(Cn),Te();break;case 26:case 27:case 5:ae(l);break;case 4:Te();break;case 31:l.memoizedState!==null&&Xr(l);break;case 13:Xr(l);break;case 19:Y(vn);break;case 10:Ka(l.type);break;case 22:case 23:Xr(l),Cv(),s!==null&&Y(bl);break;case 24:Ka(Cn)}}function zd(s,l){try{var f=l.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var x=p.next;f=x;do{if((f.tag&s)===s){p=void 0;var S=f.create,I=f.inst;p=S(),I.destroy=p}f=f.next}while(f!==x)}}catch(G){jt(l,l.return,G)}}function Zs(s,l,f){try{var p=l.updateQueue,x=p!==null?p.lastEffect:null;if(x!==null){var S=x.next;p=S;do{if((p.tag&s)===s){var I=p.inst,G=I.destroy;if(G!==void 0){I.destroy=void 0,x=l;var Q=f,de=G;try{de()}catch(ve){jt(x,Q,ve)}}}p=p.next}while(p!==S)}}catch(ve){jt(l,l.return,ve)}}function XE(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{zS(l,f)}catch(p){jt(s,s.return,p)}}}function WE(s,l,f){f.props=El(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(p){jt(s,l,p)}}function Ld(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var p=s.stateNode;break;case 30:p=s.stateNode;break;default:p=s.stateNode}typeof f=="function"?s.refCleanup=f(p):f.current=p}}catch(x){jt(s,l,x)}}function ba(s,l){var f=s.ref,p=s.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(x){jt(s,l,x)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){jt(s,l,x)}else f.current=null}function KE(s){var l=s.type,f=s.memoizedProps,p=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break e;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(x){jt(s,s.return,x)}}function ay(s,l,f){try{var p=s.stateNode;z3(p,s.type,f,l),p[$n]=l}catch(x){jt(s,s.return,x)}}function QE(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ao(s.type)||s.tag===4}function sy(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||QE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ao(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function oy(s,l,f){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Mi));else if(p!==4&&(p===27&&ao(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(oy(s,l,f),s=s.sibling;s!==null;)oy(s,l,f),s=s.sibling}function zp(s,l,f){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(p!==4&&(p===27&&ao(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(zp(s,l,f),s=s.sibling;s!==null;)zp(s,l,f),s=s.sibling}function ZE(s){var l=s.stateNode,f=s.memoizedProps;try{for(var p=s.type,x=l.attributes;x.length;)l.removeAttributeNode(x[0]);Zn(l,p,f),l[En]=s,l[$n]=f}catch(S){jt(s,s.return,S)}}var ts=!1,Dn=!1,ly=!1,JE=typeof WeakSet=="function"?WeakSet:Set,qn=null;function v3(s,l){if(s=s.containerInfo,Ry=ag,s=dS(s),tv(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var x=p.anchorOffset,S=p.focusNode;p=p.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break e}var I=0,G=-1,Q=-1,de=0,ve=0,xe=s,fe=null;t:for(;;){for(var pe;xe!==f||x!==0&&xe.nodeType!==3||(G=I+x),xe!==S||p!==0&&xe.nodeType!==3||(Q=I+p),xe.nodeType===3&&(I+=xe.nodeValue.length),(pe=xe.firstChild)!==null;)fe=xe,xe=pe;for(;;){if(xe===s)break t;if(fe===f&&++de===x&&(G=I),fe===S&&++ve===p&&(Q=I),(pe=xe.nextSibling)!==null)break;xe=fe,fe=xe.parentNode}xe=pe}f=G===-1||Q===-1?null:{start:G,end:Q}}else f=null}f=f||{start:0,end:0}}else f=null;for(Dy={focusedElem:s,selectionRange:f},ag=!1,qn=l;qn!==null;)if(l=qn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,qn=s;else for(;qn!==null;){switch(l=qn,S=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)x=s[f],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&S!==null){s=void 0,f=l,x=S.memoizedProps,S=S.memoizedState,p=f.stateNode;try{var je=El(f.type,x);s=p.getSnapshotBeforeUpdate(je,S),p.__reactInternalSnapshotBeforeUpdate=s}catch(Xe){jt(f,f.return,Xe)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)My(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":My(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,qn=s;break}qn=l.return}}function eT(s,l,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:rs(s,f),p&4&&zd(5,f);break;case 1:if(rs(s,f),p&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(I){jt(f,f.return,I)}else{var x=El(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(x,l,s.__reactInternalSnapshotBeforeUpdate)}catch(I){jt(f,f.return,I)}}p&64&&XE(f),p&512&&Ld(f,f.return);break;case 3:if(rs(s,f),p&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{zS(s,l)}catch(I){jt(f,f.return,I)}}break;case 27:l===null&&p&4&&ZE(f);case 26:case 5:rs(s,f),l===null&&p&4&&KE(f),p&512&&Ld(f,f.return);break;case 12:rs(s,f);break;case 31:rs(s,f),p&4&&rT(s,f);break;case 13:rs(s,f),p&4&&iT(s,f),p&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=A3.bind(null,f),q3(s,f))));break;case 22:if(p=f.memoizedState!==null||ts,!p){l=l!==null&&l.memoizedState!==null||Dn,x=ts;var S=Dn;ts=p,(Dn=l)&&!S?is(s,f,(f.subtreeFlags&8772)!==0):rs(s,f),ts=x,Dn=S}break;case 30:break;default:rs(s,f)}}function tT(s){var l=s.alternate;l!==null&&(s.alternate=null,tT(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&lc(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Zt=null,Cr=!1;function ns(s,l,f){for(f=f.child;f!==null;)nT(s,l,f),f=f.sibling}function nT(s,l,f){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(Ur,f)}catch{}switch(f.tag){case 26:Dn||ba(f,l),ns(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Dn||ba(f,l);var p=Zt,x=Cr;ao(f.type)&&(Zt=f.stateNode,Cr=!1),ns(s,l,f),Xd(f.stateNode),Zt=p,Cr=x;break;case 5:Dn||ba(f,l);case 6:if(p=Zt,x=Cr,Zt=null,ns(s,l,f),Zt=p,Cr=x,Zt!==null)if(Cr)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(f.stateNode)}catch(S){jt(f,l,S)}else try{Zt.removeChild(f.stateNode)}catch(S){jt(f,l,S)}break;case 18:Zt!==null&&(Cr?(s=Zt,XT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),qc(s)):XT(Zt,f.stateNode));break;case 4:p=Zt,x=Cr,Zt=f.stateNode.containerInfo,Cr=!0,ns(s,l,f),Zt=p,Cr=x;break;case 0:case 11:case 14:case 15:Zs(2,f,l),Dn||Zs(4,f,l),ns(s,l,f);break;case 1:Dn||(ba(f,l),p=f.stateNode,typeof p.componentWillUnmount=="function"&&WE(f,l,p)),ns(s,l,f);break;case 21:ns(s,l,f);break;case 22:Dn=(p=Dn)||f.memoizedState!==null,ns(s,l,f),Dn=p;break;default:ns(s,l,f)}}function rT(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{qc(s)}catch(f){jt(l,l.return,f)}}}function iT(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{qc(s)}catch(f){jt(l,l.return,f)}}function y3(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new JE),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new JE),l;default:throw Error(r(435,s.tag))}}function Lp(s,l){var f=y3(s);l.forEach(function(p){if(!f.has(p)){f.add(p);var x=C3.bind(null,s,p);p.then(x,x)}})}function kr(s,l){var f=l.deletions;if(f!==null)for(var p=0;p<f.length;p++){var x=f[p],S=s,I=l,G=I;e:for(;G!==null;){switch(G.tag){case 27:if(ao(G.type)){Zt=G.stateNode,Cr=!1;break e}break;case 5:Zt=G.stateNode,Cr=!1;break e;case 3:case 4:Zt=G.stateNode.containerInfo,Cr=!0;break e}G=G.return}if(Zt===null)throw Error(r(160));nT(S,I,x),Zt=null,Cr=!1,S=x.alternate,S!==null&&(S.return=null),x.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)aT(l,s),l=l.sibling}var Li=null;function aT(s,l){var f=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:kr(l,s),Rr(s),p&4&&(Zs(3,s,s.return),zd(3,s),Zs(5,s,s.return));break;case 1:kr(l,s),Rr(s),p&512&&(Dn||f===null||ba(f,f.return)),p&64&&ts&&(s=s.updateQueue,s!==null&&(p=s.callbacks,p!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var x=Li;if(kr(l,s),Rr(s),p&512&&(Dn||f===null||ba(f,f.return)),p&4){var S=f!==null?f.memoizedState:null;if(p=s.memoizedState,f===null)if(p===null)if(s.stateNode===null){e:{p=s.type,f=s.memoizedProps,x=x.ownerDocument||x;t:switch(p){case"title":S=x.getElementsByTagName("title")[0],(!S||S[aa]||S[En]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=x.createElement(p),x.head.insertBefore(S,x.querySelector("head > title"))),Zn(S,p,f),S[En]=s,Tn(S),p=S;break e;case"link":var I=aA("link","href",x).get(p+(f.href||""));if(I){for(var G=0;G<I.length;G++)if(S=I[G],S.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&S.getAttribute("rel")===(f.rel==null?null:f.rel)&&S.getAttribute("title")===(f.title==null?null:f.title)&&S.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){I.splice(G,1);break t}}S=x.createElement(p),Zn(S,p,f),x.head.appendChild(S);break;case"meta":if(I=aA("meta","content",x).get(p+(f.content||""))){for(G=0;G<I.length;G++)if(S=I[G],S.getAttribute("content")===(f.content==null?null:""+f.content)&&S.getAttribute("name")===(f.name==null?null:f.name)&&S.getAttribute("property")===(f.property==null?null:f.property)&&S.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&S.getAttribute("charset")===(f.charSet==null?null:f.charSet)){I.splice(G,1);break t}}S=x.createElement(p),Zn(S,p,f),x.head.appendChild(S);break;default:throw Error(r(468,p))}S[En]=s,Tn(S),p=S}s.stateNode=p}else sA(x,s.type,s.stateNode);else s.stateNode=iA(x,p,s.memoizedProps);else S!==p?(S===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):S.count--,p===null?sA(x,s.type,s.stateNode):iA(x,p,s.memoizedProps)):p===null&&s.stateNode!==null&&ay(s,s.memoizedProps,f.memoizedProps)}break;case 27:kr(l,s),Rr(s),p&512&&(Dn||f===null||ba(f,f.return)),f!==null&&p&4&&ay(s,s.memoizedProps,f.memoizedProps);break;case 5:if(kr(l,s),Rr(s),p&512&&(Dn||f===null||ba(f,f.return)),s.flags&32){x=s.stateNode;try{Ar(x,"")}catch(je){jt(s,s.return,je)}}p&4&&s.stateNode!=null&&(x=s.memoizedProps,ay(s,x,f!==null?f.memoizedProps:x)),p&1024&&(ly=!0);break;case 6:if(kr(l,s),Rr(s),p&4){if(s.stateNode===null)throw Error(r(162));p=s.memoizedProps,f=s.stateNode;try{f.nodeValue=p}catch(je){jt(s,s.return,je)}}break;case 3:if(tg=null,x=Li,Li=Jp(l.containerInfo),kr(l,s),Li=x,Rr(s),p&4&&f!==null&&f.memoizedState.isDehydrated)try{qc(l.containerInfo)}catch(je){jt(s,s.return,je)}ly&&(ly=!1,sT(s));break;case 4:p=Li,Li=Jp(s.stateNode.containerInfo),kr(l,s),Rr(s),Li=p;break;case 12:kr(l,s),Rr(s);break;case 31:kr(l,s),Rr(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Lp(s,p)));break;case 13:kr(l,s),Rr(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Up=ut()),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Lp(s,p)));break;case 22:x=s.memoizedState!==null;var Q=f!==null&&f.memoizedState!==null,de=ts,ve=Dn;if(ts=de||x,Dn=ve||Q,kr(l,s),Dn=ve,ts=de,Rr(s),p&8192)e:for(l=s.stateNode,l._visibility=x?l._visibility&-2:l._visibility|1,x&&(f===null||Q||ts||Dn||Tl(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){Q=f=l;try{if(S=Q.stateNode,x)I=S.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{G=Q.stateNode;var xe=Q.memoizedProps.style,fe=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;G.style.display=fe==null||typeof fe=="boolean"?"":(""+fe).trim()}}catch(je){jt(Q,Q.return,je)}}}else if(l.tag===6){if(f===null){Q=l;try{Q.stateNode.nodeValue=x?"":Q.memoizedProps}catch(je){jt(Q,Q.return,je)}}}else if(l.tag===18){if(f===null){Q=l;try{var pe=Q.stateNode;x?WT(pe,!0):WT(Q.stateNode,!1)}catch(je){jt(Q,Q.return,je)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=s.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,Lp(s,f))));break;case 19:kr(l,s),Rr(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Lp(s,p)));break;case 30:break;case 21:break;default:kr(l,s),Rr(s)}}function Rr(s){var l=s.flags;if(l&2){try{for(var f,p=s.return;p!==null;){if(QE(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var x=f.stateNode,S=sy(s);zp(s,S,x);break;case 5:var I=f.stateNode;f.flags&32&&(Ar(I,""),f.flags&=-33);var G=sy(s);zp(s,G,I);break;case 3:case 4:var Q=f.stateNode.containerInfo,de=sy(s);oy(s,de,Q);break;default:throw Error(r(161))}}catch(ve){jt(s,s.return,ve)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function sT(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;sT(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function rs(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)eT(s,l.alternate,l),l=l.sibling}function Tl(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Zs(4,l,l.return),Tl(l);break;case 1:ba(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&WE(l,l.return,f),Tl(l);break;case 27:Xd(l.stateNode);case 26:case 5:ba(l,l.return),Tl(l);break;case 22:l.memoizedState===null&&Tl(l);break;case 30:Tl(l);break;default:Tl(l)}s=s.sibling}}function is(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,x=s,S=l,I=S.flags;switch(S.tag){case 0:case 11:case 15:is(x,S,f),zd(4,S);break;case 1:if(is(x,S,f),p=S,x=p.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(de){jt(p,p.return,de)}if(p=S,x=p.updateQueue,x!==null){var G=p.stateNode;try{var Q=x.shared.hiddenCallbacks;if(Q!==null)for(x.shared.hiddenCallbacks=null,x=0;x<Q.length;x++)VS(Q[x],G)}catch(de){jt(p,p.return,de)}}f&&I&64&&XE(S),Ld(S,S.return);break;case 27:ZE(S);case 26:case 5:is(x,S,f),f&&p===null&&I&4&&KE(S),Ld(S,S.return);break;case 12:is(x,S,f);break;case 31:is(x,S,f),f&&I&4&&rT(x,S);break;case 13:is(x,S,f),f&&I&4&&iT(x,S);break;case 22:S.memoizedState===null&&is(x,S,f),Ld(S,S.return);break;case 30:break;default:is(x,S,f)}l=l.sibling}}function cy(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&Td(f))}function uy(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Td(s))}function Bi(s,l,f,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)oT(s,l,f,p),l=l.sibling}function oT(s,l,f,p){var x=l.flags;switch(l.tag){case 0:case 11:case 15:Bi(s,l,f,p),x&2048&&zd(9,l);break;case 1:Bi(s,l,f,p);break;case 3:Bi(s,l,f,p),x&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Td(s)));break;case 12:if(x&2048){Bi(s,l,f,p),s=l.stateNode;try{var S=l.memoizedProps,I=S.id,G=S.onPostCommit;typeof G=="function"&&G(I,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Q){jt(l,l.return,Q)}}else Bi(s,l,f,p);break;case 31:Bi(s,l,f,p);break;case 13:Bi(s,l,f,p);break;case 23:break;case 22:S=l.stateNode,I=l.alternate,l.memoizedState!==null?S._visibility&2?Bi(s,l,f,p):Bd(s,l):S._visibility&2?Bi(s,l,f,p):(S._visibility|=2,Pc(s,l,f,p,(l.subtreeFlags&10256)!==0||!1)),x&2048&&cy(I,l);break;case 24:Bi(s,l,f,p),x&2048&&uy(l.alternate,l);break;default:Bi(s,l,f,p)}}function Pc(s,l,f,p,x){for(x=x&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var S=s,I=l,G=f,Q=p,de=I.flags;switch(I.tag){case 0:case 11:case 15:Pc(S,I,G,Q,x),zd(8,I);break;case 23:break;case 22:var ve=I.stateNode;I.memoizedState!==null?ve._visibility&2?Pc(S,I,G,Q,x):Bd(S,I):(ve._visibility|=2,Pc(S,I,G,Q,x)),x&&de&2048&&cy(I.alternate,I);break;case 24:Pc(S,I,G,Q,x),x&&de&2048&&uy(I.alternate,I);break;default:Pc(S,I,G,Q,x)}l=l.sibling}}function Bd(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,p=l,x=p.flags;switch(p.tag){case 22:Bd(f,p),x&2048&&cy(p.alternate,p);break;case 24:Bd(f,p),x&2048&&uy(p.alternate,p);break;default:Bd(f,p)}l=l.sibling}}var Ud=8192;function jc(s,l,f){if(s.subtreeFlags&Ud)for(s=s.child;s!==null;)lT(s,l,f),s=s.sibling}function lT(s,l,f){switch(s.tag){case 26:jc(s,l,f),s.flags&Ud&&s.memoizedState!==null&&ij(f,Li,s.memoizedState,s.memoizedProps);break;case 5:jc(s,l,f);break;case 3:case 4:var p=Li;Li=Jp(s.stateNode.containerInfo),jc(s,l,f),Li=p;break;case 22:s.memoizedState===null&&(p=s.alternate,p!==null&&p.memoizedState!==null?(p=Ud,Ud=16777216,jc(s,l,f),Ud=p):jc(s,l,f));break;default:jc(s,l,f)}}function cT(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Fd(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];qn=p,dT(p,s)}cT(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)uT(s),s=s.sibling}function uT(s){switch(s.tag){case 0:case 11:case 15:Fd(s),s.flags&2048&&Zs(9,s,s.return);break;case 3:Fd(s);break;case 12:Fd(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Bp(s)):Fd(s);break;default:Fd(s)}}function Bp(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];qn=p,dT(p,s)}cT(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Zs(8,l,l.return),Bp(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Bp(l));break;default:Bp(l)}s=s.sibling}}function dT(s,l){for(;qn!==null;){var f=qn;switch(f.tag){case 0:case 11:case 15:Zs(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Td(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,qn=p;else e:for(f=s;qn!==null;){p=qn;var x=p.sibling,S=p.return;if(tT(p),p===f){qn=null;break e}if(x!==null){x.return=S,qn=x;break e}qn=S}}}var b3={getCacheForType:function(s){var l=Kn(Cn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f},cacheSignal:function(){return Kn(Cn).controller.signal}},x3=typeof WeakMap=="function"?WeakMap:Map,Nt=0,$t=null,ht=null,mt=0,Pt=0,Wr=null,Js=!1,Vc=!1,dy=!1,as=0,dn=0,eo=0,Al=0,fy=0,Kr=0,zc=0,Gd=null,Dr=null,hy=!1,Up=0,fT=0,Fp=1/0,Gp=null,to=null,zn=0,no=null,Lc=null,ss=0,py=0,gy=null,hT=null,$d=0,my=null;function Qr(){return(Nt&2)!==0&&mt!==0?mt&-mt:q.T!==null?wy():$h()}function pT(){if(Kr===0)if((mt&536870912)===0||St){var s=nn;nn<<=1,(nn&3932160)===0&&(nn=262144),Kr=s}else Kr=536870912;return s=Yr.current,s!==null&&(s.flags|=32),Kr}function Nr(s,l,f){(s===$t&&(Pt===2||Pt===9)||s.cancelPendingCommit!==null)&&(Bc(s,0),ro(s,mt,Kr,!1)),el(s,f),((Nt&2)===0||s!==$t)&&(s===$t&&((Nt&2)===0&&(Al|=f),dn===4&&ro(s,mt,Kr,!1)),xa(s))}function gT(s,l,f){if((Nt&6)!==0)throw Error(r(327));var p=!f&&(l&127)===0&&(l&s.expiredLanes)===0||pr(s,l),x=p?S3(s,l):yy(s,l,!0),S=p;do{if(x===0){Vc&&!p&&ro(s,l,0,!1);break}else{if(f=s.current.alternate,S&&!_3(f)){x=yy(s,l,!1),S=!1;continue}if(x===2){if(S=l,s.errorRecoveryDisabledLanes&S)var I=0;else I=s.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){l=I;e:{var G=s;x=Gd;var Q=G.current.memoizedState.isDehydrated;if(Q&&(Bc(G,I).flags|=256),I=yy(G,I,!1),I!==2){if(dy&&!Q){G.errorRecoveryDisabledLanes|=S,Al|=S,x=4;break e}S=Dr,Dr=x,S!==null&&(Dr===null?Dr=S:Dr.push.apply(Dr,S))}x=I}if(S=!1,x!==2)continue}}if(x===1){Bc(s,0),ro(s,l,0,!0);break}e:{switch(p=s,S=x,S){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:ro(p,l,Kr,!Js);break e;case 2:Dr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(x=Up+300-ut(),10<x)){if(ro(p,l,Kr,!Js),ni(p,0,!0)!==0)break e;ss=l,p.timeoutHandle=qT(mT.bind(null,p,f,Dr,Gp,hy,l,Kr,Al,zc,Js,S,"Throttled",-0,0),x);break e}mT(p,f,Dr,Gp,hy,l,Kr,Al,zc,Js,S,null,-0,0)}}break}while(!0);xa(s)}function mT(s,l,f,p,x,S,I,G,Q,de,ve,xe,fe,pe){if(s.timeoutHandle=-1,xe=l.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mi},lT(l,S,xe);var je=(S&62914560)===S?Up-ut():(S&4194048)===S?fT-ut():0;if(je=aj(xe,je),je!==null){ss=S,s.cancelPendingCommit=je(ET.bind(null,s,l,S,f,p,x,I,G,Q,ve,xe,null,fe,pe)),ro(s,S,I,!de);return}}ET(s,l,S,f,p,x,I,G,Q)}function _3(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var x=f[p],S=x.getSnapshot;x=x.value;try{if(!Hr(S(),x))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ro(s,l,f,p){l&=~fy,l&=~Al,s.suspendedLanes|=l,s.pingedLanes&=~l,p&&(s.warmLanes|=l),p=s.expirationTimes;for(var x=l;0<x;){var S=31-tn(x),I=1<<S;p[S]=-1,x&=~I}f!==0&&tl(s,f,l)}function $p(){return(Nt&6)===0?(Hd(0),!1):!0}function vy(){if(ht!==null){if(Pt===0)var s=ht.return;else s=ht,Wa=vl=null,Mv(s),Dc=null,Cd=0,s=ht;for(;s!==null;)YE(s.alternate,s),s=s.return;ht=null}}function Bc(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,U3(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),ss=0,vy(),$t=s,ht=f=Ya(s.current,null),mt=l,Pt=0,Wr=null,Js=!1,Vc=pr(s,l),dy=!1,zc=Kr=fy=Al=eo=dn=0,Dr=Gd=null,hy=!1,(l&8)!==0&&(l|=l&32);var p=s.entangledLanes;if(p!==0)for(s=s.entanglements,p&=l;0<p;){var x=31-tn(p),S=1<<x;l|=s[x],p&=~S}return as=l,dp(),f}function vT(s,l){lt=null,q.H=Pd,l===Rc||l===bp?(l=MS(),Pt=3):l===_v?(l=MS(),Pt=4):Pt=l===Wv?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Wr=l,ht===null&&(dn=1,Mp(s,li(l,s.current)))}function yT(){var s=Yr.current;return s===null?!0:(mt&4194048)===mt?fi===null:(mt&62914560)===mt||(mt&536870912)!==0?s===fi:!1}function bT(){var s=q.H;return q.H=Pd,s===null?Pd:s}function xT(){var s=q.A;return q.A=b3,s}function Hp(){dn=4,Js||(mt&4194048)!==mt&&Yr.current!==null||(Vc=!0),(eo&134217727)===0&&(Al&134217727)===0||$t===null||ro($t,mt,Kr,!1)}function yy(s,l,f){var p=Nt;Nt|=2;var x=bT(),S=xT();($t!==s||mt!==l)&&(Gp=null,Bc(s,l)),l=!1;var I=dn;e:do try{if(Pt!==0&&ht!==null){var G=ht,Q=Wr;switch(Pt){case 8:vy(),I=6;break e;case 3:case 2:case 9:case 6:Yr.current===null&&(l=!0);var de=Pt;if(Pt=0,Wr=null,Uc(s,G,Q,de),f&&Vc){I=0;break e}break;default:de=Pt,Pt=0,Wr=null,Uc(s,G,Q,de)}}w3(),I=dn;break}catch(ve){vT(s,ve)}while(!0);return l&&s.shellSuspendCounter++,Wa=vl=null,Nt=p,q.H=x,q.A=S,ht===null&&($t=null,mt=0,dp()),I}function w3(){for(;ht!==null;)_T(ht)}function S3(s,l){var f=Nt;Nt|=2;var p=bT(),x=xT();$t!==s||mt!==l?(Gp=null,Fp=ut()+500,Bc(s,l)):Vc=pr(s,l);e:do try{if(Pt!==0&&ht!==null){l=ht;var S=Wr;t:switch(Pt){case 1:Pt=0,Wr=null,Uc(s,l,S,1);break;case 2:case 9:if(NS(S)){Pt=0,Wr=null,wT(l);break}l=function(){Pt!==2&&Pt!==9||$t!==s||(Pt=7),xa(s)},S.then(l,l);break e;case 3:Pt=7;break e;case 4:Pt=5;break e;case 7:NS(S)?(Pt=0,Wr=null,wT(l)):(Pt=0,Wr=null,Uc(s,l,S,7));break;case 5:var I=null;switch(ht.tag){case 26:I=ht.memoizedState;case 5:case 27:var G=ht;if(I?oA(I):G.stateNode.complete){Pt=0,Wr=null;var Q=G.sibling;if(Q!==null)ht=Q;else{var de=G.return;de!==null?(ht=de,qp(de)):ht=null}break t}}Pt=0,Wr=null,Uc(s,l,S,5);break;case 6:Pt=0,Wr=null,Uc(s,l,S,6);break;case 8:vy(),dn=6;break e;default:throw Error(r(462))}}E3();break}catch(ve){vT(s,ve)}while(!0);return Wa=vl=null,q.H=p,q.A=x,Nt=f,ht!==null?0:($t=null,mt=0,dp(),dn)}function E3(){for(;ht!==null&&!wt();)_T(ht)}function _T(s){var l=HE(s.alternate,s,as);s.memoizedProps=s.pendingProps,l===null?qp(s):ht=l}function wT(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=LE(f,l,l.pendingProps,l.type,void 0,mt);break;case 11:l=LE(f,l,l.pendingProps,l.type.render,l.ref,mt);break;case 5:Mv(l);default:YE(f,l),l=ht=xS(l,as),l=HE(f,l,as)}s.memoizedProps=s.pendingProps,l===null?qp(s):ht=l}function Uc(s,l,f,p){Wa=vl=null,Mv(l),Dc=null,Cd=0;var x=l.return;try{if(f3(s,x,l,f,mt)){dn=1,Mp(s,li(f,s.current)),ht=null;return}}catch(S){if(x!==null)throw ht=x,S;dn=1,Mp(s,li(f,s.current)),ht=null;return}l.flags&32768?(St||p===1?s=!0:Vc||(mt&536870912)!==0?s=!1:(Js=s=!0,(p===2||p===9||p===3||p===6)&&(p=Yr.current,p!==null&&p.tag===13&&(p.flags|=16384))),ST(l,s)):qp(l)}function qp(s){var l=s;do{if((l.flags&32768)!==0){ST(l,Js);return}s=l.return;var f=g3(l.alternate,l,as);if(f!==null){ht=f;return}if(l=l.sibling,l!==null){ht=l;return}ht=l=s}while(l!==null);dn===0&&(dn=5)}function ST(s,l){do{var f=m3(s.alternate,s);if(f!==null){f.flags&=32767,ht=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){ht=s;return}ht=s=f}while(s!==null);dn=6,ht=null}function ET(s,l,f,p,x,S,I,G,Q){s.cancelPendingCommit=null;do Yp();while(zn!==0);if((Nt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(S=l.lanes|l.childLanes,S|=sv,Q0(s,f,S,I,G,Q),s===$t&&(ht=$t=null,mt=0),Lc=l,no=s,ss=f,py=S,gy=x,hT=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,k3(wn,function(){return RT(),null})):(s.callbackNode=null,s.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=q.T,q.T=null,x=W.p,W.p=2,I=Nt,Nt|=4;try{v3(s,l,f)}finally{Nt=I,W.p=x,q.T=p}}zn=1,TT(),AT(),CT()}}function TT(){if(zn===1){zn=0;var s=no,l=Lc,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=q.T,q.T=null;var p=W.p;W.p=2;var x=Nt;Nt|=4;try{aT(l,s);var S=Dy,I=dS(s.containerInfo),G=S.focusedElem,Q=S.selectionRange;if(I!==G&&G&&G.ownerDocument&&uS(G.ownerDocument.documentElement,G)){if(Q!==null&&tv(G)){var de=Q.start,ve=Q.end;if(ve===void 0&&(ve=de),"selectionStart"in G)G.selectionStart=de,G.selectionEnd=Math.min(ve,G.value.length);else{var xe=G.ownerDocument||document,fe=xe&&xe.defaultView||window;if(fe.getSelection){var pe=fe.getSelection(),je=G.textContent.length,Xe=Math.min(Q.start,je),Ut=Q.end===void 0?Xe:Math.min(Q.end,je);!pe.extend&&Xe>Ut&&(I=Ut,Ut=Xe,Xe=I);var se=cS(G,Xe),re=cS(G,Ut);if(se&&re&&(pe.rangeCount!==1||pe.anchorNode!==se.node||pe.anchorOffset!==se.offset||pe.focusNode!==re.node||pe.focusOffset!==re.offset)){var ue=xe.createRange();ue.setStart(se.node,se.offset),pe.removeAllRanges(),Xe>Ut?(pe.addRange(ue),pe.extend(re.node,re.offset)):(ue.setEnd(re.node,re.offset),pe.addRange(ue))}}}}for(xe=[],pe=G;pe=pe.parentNode;)pe.nodeType===1&&xe.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<xe.length;G++){var ye=xe[G];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}ag=!!Ry,Dy=Ry=null}finally{Nt=x,W.p=p,q.T=f}}s.current=l,zn=2}}function AT(){if(zn===2){zn=0;var s=no,l=Lc,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=q.T,q.T=null;var p=W.p;W.p=2;var x=Nt;Nt|=4;try{eT(s,l.alternate,l)}finally{Nt=x,W.p=p,q.T=f}}zn=3}}function CT(){if(zn===4||zn===3){zn=0,Qe();var s=no,l=Lc,f=ss,p=hT;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?zn=5:(zn=0,Lc=no=null,kT(s,s.pendingLanes));var x=s.pendingLanes;if(x===0&&(to=null),Ga(f),l=l.stateNode,Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(Ur,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=q.T,x=W.p,W.p=2,q.T=null;try{for(var S=s.onRecoverableError,I=0;I<p.length;I++){var G=p[I];S(G.value,{componentStack:G.stack})}}finally{q.T=l,W.p=x}}(ss&3)!==0&&Yp(),xa(s),x=s.pendingLanes,(f&261930)!==0&&(x&42)!==0?s===my?$d++:($d=0,my=s):$d=0,Hd(0)}}function kT(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Td(l)))}function Yp(){return TT(),AT(),CT(),RT()}function RT(){if(zn!==5)return!1;var s=no,l=py;py=0;var f=Ga(ss),p=q.T,x=W.p;try{W.p=32>f?32:f,q.T=null,f=gy,gy=null;var S=no,I=ss;if(zn=0,Lc=no=null,ss=0,(Nt&6)!==0)throw Error(r(331));var G=Nt;if(Nt|=4,uT(S.current),oT(S,S.current,I,f),Nt=G,Hd(0,!1),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(Ur,S)}catch{}return!0}finally{W.p=x,q.T=p,kT(s,l)}}function DT(s,l,f){l=li(f,l),l=Xv(s.stateNode,l,2),s=Ws(s,l,2),s!==null&&(el(s,2),xa(s))}function jt(s,l,f){if(s.tag===3)DT(s,s,f);else for(;l!==null;){if(l.tag===3){DT(l,s,f);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(to===null||!to.has(p))){s=li(f,s),f=NE(2),p=Ws(l,f,2),p!==null&&(IE(f,p,l,s),el(p,2),xa(p));break}}l=l.return}}function by(s,l,f){var p=s.pingCache;if(p===null){p=s.pingCache=new x3;var x=new Set;p.set(l,x)}else x=p.get(l),x===void 0&&(x=new Set,p.set(l,x));x.has(f)||(dy=!0,x.add(f),s=T3.bind(null,s,l,f),l.then(s,s))}function T3(s,l,f){var p=s.pingCache;p!==null&&p.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,$t===s&&(mt&f)===f&&(dn===4||dn===3&&(mt&62914560)===mt&&300>ut()-Up?(Nt&2)===0&&Bc(s,0):fy|=f,zc===mt&&(zc=0)),xa(s)}function NT(s,l){l===0&&(l=Gh()),s=pl(s,l),s!==null&&(el(s,l),xa(s))}function A3(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),NT(s,f)}function C3(s,l){var f=0;switch(s.tag){case 31:case 13:var p=s.stateNode,x=s.memoizedState;x!==null&&(f=x.retryLane);break;case 19:p=s.stateNode;break;case 22:p=s.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(l),NT(s,f)}function k3(s,l){return Le(s,l)}var Xp=null,Fc=null,xy=!1,Wp=!1,_y=!1,io=0;function xa(s){s!==Fc&&s.next===null&&(Fc===null?Xp=Fc=s:Fc=Fc.next=s),Wp=!0,xy||(xy=!0,D3())}function Hd(s,l){if(!_y&&Wp){_y=!0;do for(var f=!1,p=Xp;p!==null;){if(s!==0){var x=p.pendingLanes;if(x===0)var S=0;else{var I=p.suspendedLanes,G=p.pingedLanes;S=(1<<31-tn(42|s)+1)-1,S&=x&~(I&~G),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(f=!0,PT(p,S))}else S=mt,S=ni(p,p===$t?S:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(S&3)===0||pr(p,S)||(f=!0,PT(p,S));p=p.next}while(f);_y=!1}}function R3(){IT()}function IT(){Wp=xy=!1;var s=0;io!==0&&B3()&&(s=io);for(var l=ut(),f=null,p=Xp;p!==null;){var x=p.next,S=MT(p,l);S===0?(p.next=null,f===null?Xp=x:f.next=x,x===null&&(Fc=f)):(f=p,(s!==0||(S&3)!==0)&&(Wp=!0)),p=x}zn!==0&&zn!==5||Hd(s),io!==0&&(io=0)}function MT(s,l){for(var f=s.suspendedLanes,p=s.pingedLanes,x=s.expirationTimes,S=s.pendingLanes&-62914561;0<S;){var I=31-tn(S),G=1<<I,Q=x[I];Q===-1?((G&f)===0||(G&p)!==0)&&(x[I]=K0(G,l)):Q<=l&&(s.expiredLanes|=G),S&=~G}if(l=$t,f=mt,f=ni(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p=s.callbackNode,f===0||s===l&&(Pt===2||Pt===9)||s.cancelPendingCommit!==null)return p!==null&&p!==null&&st(p),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||pr(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(p!==null&&st(p),Ga(f)){case 2:case 8:f=It;break;case 32:f=wn;break;case 268435456:f=na;break;default:f=wn}return p=OT.bind(null,s),f=Le(f,p),s.callbackPriority=l,s.callbackNode=f,l}return p!==null&&p!==null&&st(p),s.callbackPriority=2,s.callbackNode=null,2}function OT(s,l){if(zn!==0&&zn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(Yp()&&s.callbackNode!==f)return null;var p=mt;return p=ni(s,s===$t?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p===0?null:(gT(s,p,l),MT(s,ut()),s.callbackNode!=null&&s.callbackNode===f?OT.bind(null,s):null)}function PT(s,l){if(Yp())return null;gT(s,l,!0)}function D3(){F3(function(){(Nt&6)!==0?Le(cn,R3):IT()})}function wy(){if(io===0){var s=Cc;s===0&&(s=ft,ft<<=1,(ft&261888)===0&&(ft=256)),io=s}return io}function jT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:fc(""+s)}function VT(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function N3(s,l,f,p,x){if(l==="submit"&&f&&f.stateNode===x){var S=jT((x[$n]||null).action),I=p.submitter;I&&(l=(l=I[$n]||null)?jT(l.formAction):I.getAttribute("formAction"),l!==null&&(S=l,I=null));var G=new ha("action","action",null,p,x);s.push({event:G,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(io!==0){var Q=I?VT(x,I):new FormData(x);Fv(f,{pending:!0,data:Q,method:x.method,action:S},null,Q)}}else typeof S=="function"&&(G.preventDefault(),Q=I?VT(x,I):new FormData(x),Fv(f,{pending:!0,data:Q,method:x.method,action:S},S,Q))},currentTarget:x}]})}}for(var Sy=0;Sy<av.length;Sy++){var Ey=av[Sy],I3=Ey.toLowerCase(),M3=Ey[0].toUpperCase()+Ey.slice(1);zi(I3,"on"+M3)}zi(pS,"onAnimationEnd"),zi(gS,"onAnimationIteration"),zi(mS,"onAnimationStart"),zi("dblclick","onDoubleClick"),zi("focusin","onFocus"),zi("focusout","onBlur"),zi(WP,"onTransitionRun"),zi(KP,"onTransitionStart"),zi(QP,"onTransitionCancel"),zi(vS,"onTransitionEnd"),ca("onMouseEnter",["mouseout","mouseover"]),ca("onMouseLeave",["mouseout","mouseover"]),ca("onPointerEnter",["pointerout","pointerover"]),ca("onPointerLeave",["pointerout","pointerover"]),la("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),la("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),la("onBeforeInput",["compositionend","keypress","textInput","paste"]),la("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),la("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),la("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qd));function zT(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var p=s[f],x=p.event;p=p.listeners;e:{var S=void 0;if(l)for(var I=p.length-1;0<=I;I--){var G=p[I],Q=G.instance,de=G.currentTarget;if(G=G.listener,Q!==S&&x.isPropagationStopped())break e;S=G,x.currentTarget=de;try{S(x)}catch(ve){up(ve)}x.currentTarget=null,S=Q}else for(I=0;I<p.length;I++){if(G=p[I],Q=G.instance,de=G.currentTarget,G=G.listener,Q!==S&&x.isPropagationStopped())break e;S=G,x.currentTarget=de;try{S(x)}catch(ve){up(ve)}x.currentTarget=null,S=Q}}}}function pt(s,l){var f=l[oc];f===void 0&&(f=l[oc]=new Set);var p=s+"__bubble";f.has(p)||(LT(l,s,2,!1),f.add(p))}function Ty(s,l,f){var p=0;l&&(p|=4),LT(f,s,p,l)}var Kp="_reactListening"+Math.random().toString(36).slice(2);function Ay(s){if(!s[Kp]){s[Kp]=!0,id.forEach(function(f){f!=="selectionchange"&&(O3.has(f)||Ty(f,!1,s),Ty(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Kp]||(l[Kp]=!0,Ty("selectionchange",!1,l))}}function LT(s,l,f,p){switch(pA(l)){case 2:var x=lj;break;case 8:x=cj;break;default:x=Uy}f=x.bind(null,l,f,s),x=void 0,!sl||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),p?x!==void 0?s.addEventListener(l,f,{capture:!0,passive:x}):s.addEventListener(l,f,!0):x!==void 0?s.addEventListener(l,f,{passive:x}):s.addEventListener(l,f,!1)}function Cy(s,l,f,p,x){var S=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var I=p.tag;if(I===3||I===4){var G=p.stateNode.containerInfo;if(G===x)break;if(I===4)for(I=p.return;I!==null;){var Q=I.tag;if((Q===3||Q===4)&&I.stateNode.containerInfo===x)return;I=I.return}for(;G!==null;){if(I=sa(G),I===null)return;if(Q=I.tag,Q===5||Q===6||Q===26||Q===27){p=S=I;continue e}G=G.parentNode}}p=p.return}Ls(function(){var de=S,ve=ii(f),xe=[];e:{var fe=yS.get(s);if(fe!==void 0){var pe=ha,je=s;switch(s){case"keypress":if(ll(f)===0)break e;case"keydown":case"keyup":pe=op;break;case"focusin":je="focus",pe=ul;break;case"focusout":je="blur",pe=ul;break;case"beforeblur":case"afterblur":pe=ul;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Zh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=R;break;case pS:case gS:case mS:pe=ep;break;case vS:pe=H;break;case"scroll":case"scrollend":pe=md;break;case"wheel":pe=he;break;case"copy":case"cut":case"paste":pe=tp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=qa;break;case"toggle":case"beforetoggle":pe=ot}var Xe=(l&4)!==0,Ut=!Xe&&(s==="scroll"||s==="scrollend"),se=Xe?fe!==null?fe+"Capture":null:fe;Xe=[];for(var re=de,ue;re!==null;){var ye=re;if(ue=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||ue===null||se===null||(ye=Oi(re,se),ye!=null&&Xe.push(Yd(re,ye,ue))),Ut)break;re=re.return}0<Xe.length&&(fe=new pe(fe,je,null,f,ve),xe.push({event:fe,listeners:Xe}))}}if((l&7)===0){e:{if(fe=s==="mouseover"||s==="pointerover",pe=s==="mouseout"||s==="pointerout",fe&&f!==hd&&(je=f.relatedTarget||f.fromElement)&&(sa(je)||je[ia]))break e;if((pe||fe)&&(fe=ve.window===ve?ve:(fe=ve.ownerDocument)?fe.defaultView||fe.parentWindow:window,pe?(je=f.relatedTarget||f.toElement,pe=de,je=je?sa(je):null,je!==null&&(Ut=a(je),Xe=je.tag,je!==Ut||Xe!==5&&Xe!==27&&Xe!==6)&&(je=null)):(pe=null,je=de),pe!==je)){if(Xe=vd,ye="onMouseLeave",se="onMouseEnter",re="mouse",(s==="pointerout"||s==="pointerover")&&(Xe=qa,ye="onPointerLeave",se="onPointerEnter",re="pointer"),Ut=pe==null?fe:Gr(pe),ue=je==null?fe:Gr(je),fe=new Xe(ye,re+"leave",pe,f,ve),fe.target=Ut,fe.relatedTarget=ue,ye=null,sa(ve)===de&&(Xe=new Xe(se,re+"enter",je,f,ve),Xe.target=ue,Xe.relatedTarget=Ut,ye=Xe),Ut=ye,pe&&je)t:{for(Xe=P3,se=pe,re=je,ue=0,ye=se;ye;ye=Xe(ye))ue++;ye=0;for(var $e=re;$e;$e=Xe($e))ye++;for(;0<ue-ye;)se=Xe(se),ue--;for(;0<ye-ue;)re=Xe(re),ye--;for(;ue--;){if(se===re||re!==null&&se===re.alternate){Xe=se;break t}se=Xe(se),re=Xe(re)}Xe=null}else Xe=null;pe!==null&&BT(xe,fe,pe,Xe,!1),je!==null&&Ut!==null&&BT(xe,Ut,je,Xe,!0)}}e:{if(fe=de?Gr(de):window,pe=fe.nodeName&&fe.nodeName.toLowerCase(),pe==="select"||pe==="input"&&fe.type==="file")var Ct=rS;else if(tS(fe))if(iS)Ct=qP;else{Ct=$P;var Ue=GP}else pe=fe.nodeName,!pe||pe.toLowerCase()!=="input"||fe.type!=="checkbox"&&fe.type!=="radio"?de&&dc(de.elementType)&&(Ct=rS):Ct=HP;if(Ct&&(Ct=Ct(s,de))){nS(xe,Ct,f,ve);break e}Ue&&Ue(s,fe,de),s==="focusout"&&de&&fe.type==="number"&&de.memoizedProps.value!=null&&ud(fe,"number",fe.value)}switch(Ue=de?Gr(de):window,s){case"focusin":(tS(Ue)||Ue.contentEditable==="true")&&(bc=Ue,nv=de,wd=null);break;case"focusout":wd=nv=bc=null;break;case"mousedown":rv=!0;break;case"contextmenu":case"mouseup":case"dragend":rv=!1,fS(xe,f,ve);break;case"selectionchange":if(XP)break;case"keydown":case"keyup":fS(xe,f,ve)}var dt;if(Dt)e:{switch(s){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else yc?dl(s,f)&&(vt="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(vt="onCompositionStart");vt&&(ma&&f.locale!=="ko"&&(yc||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&yc&&(dt=gd()):(fa=ve,pd="value"in fa?fa.value:fa.textContent,yc=!0)),Ue=Qp(de,vt),0<Ue.length&&(vt=new ga(vt,s,null,f,ve),xe.push({event:vt,listeners:Ue}),dt?vt.data=dt:(dt=vc(f),dt!==null&&(vt.data=dt)))),(dt=si?LP(s,f):BP(s,f))&&(vt=Qp(de,"onBeforeInput"),0<vt.length&&(Ue=new ga("onBeforeInput","beforeinput",null,f,ve),xe.push({event:Ue,listeners:vt}),Ue.data=dt)),N3(xe,s,de,f,ve)}zT(xe,l)})}function Yd(s,l,f){return{instance:s,listener:l,currentTarget:f}}function Qp(s,l){for(var f=l+"Capture",p=[];s!==null;){var x=s,S=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||S===null||(x=Oi(s,f),x!=null&&p.unshift(Yd(s,x,S)),x=Oi(s,l),x!=null&&p.push(Yd(s,x,S))),s.tag===3)return p;s=s.return}return[]}function P3(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function BT(s,l,f,p,x){for(var S=l._reactName,I=[];f!==null&&f!==p;){var G=f,Q=G.alternate,de=G.stateNode;if(G=G.tag,Q!==null&&Q===p)break;G!==5&&G!==26&&G!==27||de===null||(Q=de,x?(de=Oi(f,S),de!=null&&I.unshift(Yd(f,de,Q))):x||(de=Oi(f,S),de!=null&&I.push(Yd(f,de,Q)))),f=f.return}I.length!==0&&s.push({event:l,listeners:I})}var j3=/\r\n?/g,V3=/\u0000|\uFFFD/g;function UT(s){return(typeof s=="string"?s:""+s).replace(j3,`
`).replace(V3,"")}function FT(s,l){return l=UT(l),UT(s)===l}function Bt(s,l,f,p,x,S){switch(f){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||Ar(s,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&Ar(s,""+p);break;case"className":$r(s,"class",p);break;case"tabIndex":$r(s,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":$r(s,f,p);break;case"style":fd(s,p,S);break;case"data":if(l!=="object"){$r(s,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(f);break}p=fc(""+p),s.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(f==="formAction"?(l!=="input"&&Bt(s,l,"name",x.name,x,null),Bt(s,l,"formEncType",x.formEncType,x,null),Bt(s,l,"formMethod",x.formMethod,x,null),Bt(s,l,"formTarget",x.formTarget,x,null)):(Bt(s,l,"encType",x.encType,x,null),Bt(s,l,"method",x.method,x,null),Bt(s,l,"target",x.target,x,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(f);break}p=fc(""+p),s.setAttribute(f,p);break;case"onClick":p!=null&&(s.onclick=Mi);break;case"onScroll":p!=null&&pt("scroll",s);break;case"onScrollEnd":p!=null&&pt("scrollend",s);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(x.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":s.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){s.removeAttribute("xlink:href");break}f=fc(""+p),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,""+p):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":p===!0?s.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,p):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?s.setAttribute(f,p):s.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?s.removeAttribute(f):s.setAttribute(f,p);break;case"popover":pt("beforetoggle",s),pt("toggle",s),cc(s,"popover",p);break;case"xlinkActuate":An(s,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":An(s,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":An(s,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":An(s,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":An(s,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":An(s,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":An(s,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":An(s,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":An(s,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":cc(s,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Qh.get(f)||f,cc(s,f,p))}}function ky(s,l,f,p,x,S){switch(f){case"style":fd(s,p,S);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(x.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof p=="string"?Ar(s,p):(typeof p=="number"||typeof p=="bigint")&&Ar(s,""+p);break;case"onScroll":p!=null&&pt("scroll",s);break;case"onScrollEnd":p!=null&&pt("scrollend",s);break;case"onClick":p!=null&&(s.onclick=Mi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ad.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),l=f.slice(2,x?f.length-7:void 0),S=s[$n]||null,S=S!=null?S[f]:null,typeof S=="function"&&s.removeEventListener(l,S,x),typeof p=="function")){typeof S!="function"&&S!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,p,x);break e}f in s?s[f]=p:p===!0?s.setAttribute(f,""):cc(s,f,p)}}}function Zn(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",s),pt("load",s);var p=!1,x=!1,S;for(S in f)if(f.hasOwnProperty(S)){var I=f[S];if(I!=null)switch(S){case"src":p=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Bt(s,l,S,I,f,null)}}x&&Bt(s,l,"srcSet",f.srcSet,f,null),p&&Bt(s,l,"src",f.src,f,null);return;case"input":pt("invalid",s);var G=S=I=x=null,Q=null,de=null;for(p in f)if(f.hasOwnProperty(p)){var ve=f[p];if(ve!=null)switch(p){case"name":x=ve;break;case"type":I=ve;break;case"checked":Q=ve;break;case"defaultChecked":de=ve;break;case"value":S=ve;break;case"defaultValue":G=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,l));break;default:Bt(s,l,p,ve,f,null)}}Xh(s,S,G,Q,de,I,x,!1);return;case"select":pt("invalid",s),p=I=S=null;for(x in f)if(f.hasOwnProperty(x)&&(G=f[x],G!=null))switch(x){case"value":S=G;break;case"defaultValue":I=G;break;case"multiple":p=G;default:Bt(s,l,x,G,f,null)}l=S,f=I,s.multiple=!!p,l!=null?Ps(s,!!p,l,!1):f!=null&&Ps(s,!!p,f,!0);return;case"textarea":pt("invalid",s),S=x=p=null;for(I in f)if(f.hasOwnProperty(I)&&(G=f[I],G!=null))switch(I){case"value":p=G;break;case"defaultValue":x=G;break;case"children":S=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(91));break;default:Bt(s,l,I,G,f,null)}js(s,p,x,S);return;case"option":for(Q in f)if(f.hasOwnProperty(Q)&&(p=f[Q],p!=null))switch(Q){case"selected":s.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Bt(s,l,Q,p,f,null)}return;case"dialog":pt("beforetoggle",s),pt("toggle",s),pt("cancel",s),pt("close",s);break;case"iframe":case"object":pt("load",s);break;case"video":case"audio":for(p=0;p<qd.length;p++)pt(qd[p],s);break;case"image":pt("error",s),pt("load",s);break;case"details":pt("toggle",s);break;case"embed":case"source":case"link":pt("error",s),pt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(de in f)if(f.hasOwnProperty(de)&&(p=f[de],p!=null))switch(de){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Bt(s,l,de,p,f,null)}return;default:if(dc(l)){for(ve in f)f.hasOwnProperty(ve)&&(p=f[ve],p!==void 0&&ky(s,l,ve,p,f,void 0));return}}for(G in f)f.hasOwnProperty(G)&&(p=f[G],p!=null&&Bt(s,l,G,p,f,null))}function z3(s,l,f,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,S=null,I=null,G=null,Q=null,de=null,ve=null;for(pe in f){var xe=f[pe];if(f.hasOwnProperty(pe)&&xe!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":Q=xe;default:p.hasOwnProperty(pe)||Bt(s,l,pe,null,p,xe)}}for(var fe in p){var pe=p[fe];if(xe=f[fe],p.hasOwnProperty(fe)&&(pe!=null||xe!=null))switch(fe){case"type":S=pe;break;case"name":x=pe;break;case"checked":de=pe;break;case"defaultChecked":ve=pe;break;case"value":I=pe;break;case"defaultValue":G=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,l));break;default:pe!==xe&&Bt(s,l,fe,pe,p,xe)}}uc(s,I,G,Q,de,ve,S,x);return;case"select":pe=I=G=fe=null;for(S in f)if(Q=f[S],f.hasOwnProperty(S)&&Q!=null)switch(S){case"value":break;case"multiple":pe=Q;default:p.hasOwnProperty(S)||Bt(s,l,S,null,p,Q)}for(x in p)if(S=p[x],Q=f[x],p.hasOwnProperty(x)&&(S!=null||Q!=null))switch(x){case"value":fe=S;break;case"defaultValue":G=S;break;case"multiple":I=S;default:S!==Q&&Bt(s,l,x,S,p,Q)}l=G,f=I,p=pe,fe!=null?Ps(s,!!f,fe,!1):!!p!=!!f&&(l!=null?Ps(s,!!f,l,!0):Ps(s,!!f,f?[]:"",!1));return;case"textarea":pe=fe=null;for(G in f)if(x=f[G],f.hasOwnProperty(G)&&x!=null&&!p.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:Bt(s,l,G,null,p,x)}for(I in p)if(x=p[I],S=f[I],p.hasOwnProperty(I)&&(x!=null||S!=null))switch(I){case"value":fe=x;break;case"defaultValue":pe=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==S&&Bt(s,l,I,x,p,S)}Wh(s,fe,pe);return;case"option":for(var je in f)if(fe=f[je],f.hasOwnProperty(je)&&fe!=null&&!p.hasOwnProperty(je))switch(je){case"selected":s.selected=!1;break;default:Bt(s,l,je,null,p,fe)}for(Q in p)if(fe=p[Q],pe=f[Q],p.hasOwnProperty(Q)&&fe!==pe&&(fe!=null||pe!=null))switch(Q){case"selected":s.selected=fe&&typeof fe!="function"&&typeof fe!="symbol";break;default:Bt(s,l,Q,fe,p,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in f)fe=f[Xe],f.hasOwnProperty(Xe)&&fe!=null&&!p.hasOwnProperty(Xe)&&Bt(s,l,Xe,null,p,fe);for(de in p)if(fe=p[de],pe=f[de],p.hasOwnProperty(de)&&fe!==pe&&(fe!=null||pe!=null))switch(de){case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,l));break;default:Bt(s,l,de,fe,p,pe)}return;default:if(dc(l)){for(var Ut in f)fe=f[Ut],f.hasOwnProperty(Ut)&&fe!==void 0&&!p.hasOwnProperty(Ut)&&ky(s,l,Ut,void 0,p,fe);for(ve in p)fe=p[ve],pe=f[ve],!p.hasOwnProperty(ve)||fe===pe||fe===void 0&&pe===void 0||ky(s,l,ve,fe,p,pe);return}}for(var se in f)fe=f[se],f.hasOwnProperty(se)&&fe!=null&&!p.hasOwnProperty(se)&&Bt(s,l,se,null,p,fe);for(xe in p)fe=p[xe],pe=f[xe],!p.hasOwnProperty(xe)||fe===pe||fe==null&&pe==null||Bt(s,l,xe,fe,p,pe)}function GT(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function L3(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,f=performance.getEntriesByType("resource"),p=0;p<f.length;p++){var x=f[p],S=x.transferSize,I=x.initiatorType,G=x.duration;if(S&&G&&GT(I)){for(I=0,G=x.responseEnd,p+=1;p<f.length;p++){var Q=f[p],de=Q.startTime;if(de>G)break;var ve=Q.transferSize,xe=Q.initiatorType;ve&&GT(xe)&&(Q=Q.responseEnd,I+=ve*(Q<G?1:(G-de)/(Q-de)))}if(--p,l+=8*(S+I)/(x.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Ry=null,Dy=null;function Zp(s){return s.nodeType===9?s:s.ownerDocument}function $T(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function HT(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Ny(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Iy=null;function B3(){var s=window.event;return s&&s.type==="popstate"?s===Iy?!1:(Iy=s,!0):(Iy=null,!1)}var qT=typeof setTimeout=="function"?setTimeout:void 0,U3=typeof clearTimeout=="function"?clearTimeout:void 0,YT=typeof Promise=="function"?Promise:void 0,F3=typeof queueMicrotask=="function"?queueMicrotask:typeof YT<"u"?function(s){return YT.resolve(null).then(s).catch(G3)}:qT;function G3(s){setTimeout(function(){throw s})}function ao(s){return s==="head"}function XT(s,l){var f=l,p=0;do{var x=f.nextSibling;if(s.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"||f==="/&"){if(p===0){s.removeChild(x),qc(l);return}p--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")p++;else if(f==="html")Xd(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,Xd(f);for(var S=f.firstChild;S;){var I=S.nextSibling,G=S.nodeName;S[aa]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&S.rel.toLowerCase()==="stylesheet"||f.removeChild(S),S=I}}else f==="body"&&Xd(s.ownerDocument.body);f=x}while(f);qc(l)}function WT(s,l){var f=s;s=0;do{var p=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),p&&p.nodeType===8)if(f=p.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=p}while(f)}function My(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":My(f),lc(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function $3(s,l,f,p){for(;s.nodeType===1;){var x=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(p){if(!s[aa])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(S=s.getAttribute("rel"),S==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(S!==x.rel||s.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||s.getAttribute("title")!==(x.title==null?null:x.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(S=s.getAttribute("src"),(S!==(x.src==null?null:x.src)||s.getAttribute("type")!==(x.type==null?null:x.type)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&S&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var S=x.name==null?null:""+x.name;if(x.type==="hidden"&&s.getAttribute("name")===S)return s}else return s;if(s=hi(s.nextSibling),s===null)break}return null}function H3(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=hi(s.nextSibling),s===null))return null;return s}function KT(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=hi(s.nextSibling),s===null))return null;return s}function Oy(s){return s.data==="$?"||s.data==="$~"}function Py(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function q3(s,l){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||f.readyState!=="loading")l();else{var p=function(){l(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),s._reactRetry=p}}function hi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var jy=null;function QT(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(l===0)return hi(s.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}s=s.nextSibling}return null}function ZT(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return s;l--}else f!=="/$"&&f!=="/&"||l++}s=s.previousSibling}return null}function JT(s,l,f){switch(l=Zp(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Xd(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);lc(s)}var pi=new Map,eA=new Set;function Jp(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var os=W.d;W.d={f:Y3,r:X3,D:W3,C:K3,L:Q3,m:Z3,X:ej,S:J3,M:tj};function Y3(){var s=os.f(),l=$p();return s||l}function X3(s){var l=ri(s);l!==null&&l.tag===5&&l.type==="form"?vE(l):os.r(s)}var Gc=typeof document>"u"?null:document;function tA(s,l,f){var p=Gc;if(p&&typeof l=="string"&&l){var x=Tr(l);x='link[rel="'+s+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),eA.has(x)||(eA.add(x),s={rel:s,crossOrigin:f,href:l},p.querySelector(x)===null&&(l=p.createElement("link"),Zn(l,"link",s),Tn(l),p.head.appendChild(l)))}}function W3(s){os.D(s),tA("dns-prefetch",s,null)}function K3(s,l){os.C(s,l),tA("preconnect",s,l)}function Q3(s,l,f){os.L(s,l,f);var p=Gc;if(p&&s&&l){var x='link[rel="preload"][as="'+Tr(l)+'"]';l==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+Tr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+Tr(f.imageSizes)+'"]')):x+='[href="'+Tr(s)+'"]';var S=x;switch(l){case"style":S=$c(s);break;case"script":S=Hc(s)}pi.has(S)||(s=g({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),pi.set(S,s),p.querySelector(x)!==null||l==="style"&&p.querySelector(Wd(S))||l==="script"&&p.querySelector(Kd(S))||(l=p.createElement("link"),Zn(l,"link",s),Tn(l),p.head.appendChild(l)))}}function Z3(s,l){os.m(s,l);var f=Gc;if(f&&s){var p=l&&typeof l.as=="string"?l.as:"script",x='link[rel="modulepreload"][as="'+Tr(p)+'"][href="'+Tr(s)+'"]',S=x;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Hc(s)}if(!pi.has(S)&&(s=g({rel:"modulepreload",href:s},l),pi.set(S,s),f.querySelector(x)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Kd(S)))return}p=f.createElement("link"),Zn(p,"link",s),Tn(p),f.head.appendChild(p)}}}function J3(s,l,f){os.S(s,l,f);var p=Gc;if(p&&s){var x=oa(p).hoistableStyles,S=$c(s);l=l||"default";var I=x.get(S);if(!I){var G={loading:0,preload:null};if(I=p.querySelector(Wd(S)))G.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},f),(f=pi.get(S))&&Vy(s,f);var Q=I=p.createElement("link");Tn(Q),Zn(Q,"link",s),Q._p=new Promise(function(de,ve){Q.onload=de,Q.onerror=ve}),Q.addEventListener("load",function(){G.loading|=1}),Q.addEventListener("error",function(){G.loading|=2}),G.loading|=4,eg(I,l,p)}I={type:"stylesheet",instance:I,count:1,state:G},x.set(S,I)}}}function ej(s,l){os.X(s,l);var f=Gc;if(f&&s){var p=oa(f).hoistableScripts,x=Hc(s),S=p.get(x);S||(S=f.querySelector(Kd(x)),S||(s=g({src:s,async:!0},l),(l=pi.get(x))&&zy(s,l),S=f.createElement("script"),Tn(S),Zn(S,"link",s),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},p.set(x,S))}}function tj(s,l){os.M(s,l);var f=Gc;if(f&&s){var p=oa(f).hoistableScripts,x=Hc(s),S=p.get(x);S||(S=f.querySelector(Kd(x)),S||(s=g({src:s,async:!0,type:"module"},l),(l=pi.get(x))&&zy(s,l),S=f.createElement("script"),Tn(S),Zn(S,"link",s),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},p.set(x,S))}}function nA(s,l,f,p){var x=(x=ce.current)?Jp(x):null;if(!x)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=$c(f.href),f=oa(x).hoistableStyles,p=f.get(l),p||(p={type:"style",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=$c(f.href);var S=oa(x).hoistableStyles,I=S.get(s);if(I||(x=x.ownerDocument||x,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(s,I),(S=x.querySelector(Wd(s)))&&!S._p&&(I.instance=S,I.state.loading=5),pi.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},pi.set(s,f),S||nj(x,s,f,I.state))),l&&p===null)throw Error(r(528,""));return I}if(l&&p!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Hc(f),f=oa(x).hoistableScripts,p=f.get(l),p||(p={type:"script",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function $c(s){return'href="'+Tr(s)+'"'}function Wd(s){return'link[rel="stylesheet"]['+s+"]"}function rA(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function nj(s,l,f,p){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=s.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),Zn(l,"link",f),Tn(l),s.head.appendChild(l))}function Hc(s){return'[src="'+Tr(s)+'"]'}function Kd(s){return"script[async]"+s}function iA(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var p=s.querySelector('style[data-href~="'+Tr(f.href)+'"]');if(p)return l.instance=p,Tn(p),p;var x=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(s.ownerDocument||s).createElement("style"),Tn(p),Zn(p,"style",x),eg(p,f.precedence,s),l.instance=p;case"stylesheet":x=$c(f.href);var S=s.querySelector(Wd(x));if(S)return l.state.loading|=4,l.instance=S,Tn(S),S;p=rA(f),(x=pi.get(x))&&Vy(p,x),S=(s.ownerDocument||s).createElement("link"),Tn(S);var I=S;return I._p=new Promise(function(G,Q){I.onload=G,I.onerror=Q}),Zn(S,"link",p),l.state.loading|=4,eg(S,f.precedence,s),l.instance=S;case"script":return S=Hc(f.src),(x=s.querySelector(Kd(S)))?(l.instance=x,Tn(x),x):(p=f,(x=pi.get(S))&&(p=g({},f),zy(p,x)),s=s.ownerDocument||s,x=s.createElement("script"),Tn(x),Zn(x,"link",p),s.head.appendChild(x),l.instance=x);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,eg(p,f.precedence,s));return l.instance}function eg(s,l,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=p.length?p[p.length-1]:null,S=x,I=0;I<p.length;I++){var G=p[I];if(G.dataset.precedence===l)S=G;else if(S!==x)break}S?S.parentNode.insertBefore(s,S.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function Vy(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function zy(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var tg=null;function aA(s,l,f){if(tg===null){var p=new Map,x=tg=new Map;x.set(f,p)}else x=tg,p=x.get(f),p||(p=new Map,x.set(f,p));if(p.has(s))return p;for(p.set(s,null),f=f.getElementsByTagName(s),x=0;x<f.length;x++){var S=f[x];if(!(S[aa]||S[En]||s==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var I=S.getAttribute(l)||"";I=s+I;var G=p.get(I);G?G.push(S):p.set(I,[S])}}return p}function sA(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function rj(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function oA(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function ij(s,l,f,p){if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var x=$c(p.href),S=l.querySelector(Wd(x));if(S){l=S._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=ng.bind(s),l.then(s,s)),f.state.loading|=4,f.instance=S,Tn(S);return}S=l.ownerDocument||l,p=rA(p),(x=pi.get(x))&&Vy(p,x),S=S.createElement("link"),Tn(S);var I=S;I._p=new Promise(function(G,Q){I.onload=G,I.onerror=Q}),Zn(S,"link",p),f.instance=S}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=ng.bind(s),l.addEventListener("load",f),l.addEventListener("error",f))}}var Ly=0;function aj(s,l){return s.stylesheets&&s.count===0&&ig(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var p=setTimeout(function(){if(s.stylesheets&&ig(s,s.stylesheets),s.unsuspend){var S=s.unsuspend;s.unsuspend=null,S()}},6e4+l);0<s.imgBytes&&Ly===0&&(Ly=62500*L3());var x=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&ig(s,s.stylesheets),s.unsuspend)){var S=s.unsuspend;s.unsuspend=null,S()}},(s.imgBytes>Ly?50:800)+l);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(p),clearTimeout(x)}}:null}function ng(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ig(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var rg=null;function ig(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,rg=new Map,l.forEach(sj,s),rg=null,ng.call(s))}function sj(s,l){if(!(l.state.loading&4)){var f=rg.get(s);if(f)var p=f.get(null);else{f=new Map,rg.set(s,f);for(var x=s.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<x.length;S++){var I=x[S];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(f.set(I.dataset.precedence,I),p=I)}p&&f.set(null,p)}x=l.instance,I=x.getAttribute("data-precedence"),S=f.get(I)||p,S===p&&f.set(null,x),f.set(I,x),this.count++,p=ng.bind(this),x.addEventListener("load",p),x.addEventListener("error",p),S?S.parentNode.insertBefore(x,S.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(x,s.firstChild)),l.state.loading|=4}}var Qd={$$typeof:N,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function oj(s,l,f,p,x,S,I,G,Q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ra(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ra(0),this.hiddenUpdates=ra(null),this.identifierPrefix=p,this.onUncaughtError=x,this.onCaughtError=S,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function lA(s,l,f,p,x,S,I,G,Q,de,ve,xe){return s=new oj(s,l,f,I,Q,de,ve,xe,G),l=1,S===!0&&(l|=24),S=qr(3,null,null,l),s.current=S,S.stateNode=s,l=yv(),l.refCount++,s.pooledCache=l,l.refCount++,S.memoizedState={element:p,isDehydrated:f,cache:l},wv(S),s}function cA(s){return s?(s=wc,s):wc}function uA(s,l,f,p,x,S){x=cA(x),p.context===null?p.context=x:p.pendingContext=x,p=Xs(l),p.payload={element:f},S=S===void 0?null:S,S!==null&&(p.callback=S),f=Ws(s,p,l),f!==null&&(Nr(f,s,l),Rd(f,s,l))}function dA(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function By(s,l){dA(s,l),(s=s.alternate)&&dA(s,l)}function fA(s){if(s.tag===13||s.tag===31){var l=pl(s,67108864);l!==null&&Nr(l,s,67108864),By(s,67108864)}}function hA(s){if(s.tag===13||s.tag===31){var l=Qr();l=nl(l);var f=pl(s,l);f!==null&&Nr(f,s,l),By(s,l)}}var ag=!0;function lj(s,l,f,p){var x=q.T;q.T=null;var S=W.p;try{W.p=2,Uy(s,l,f,p)}finally{W.p=S,q.T=x}}function cj(s,l,f,p){var x=q.T;q.T=null;var S=W.p;try{W.p=8,Uy(s,l,f,p)}finally{W.p=S,q.T=x}}function Uy(s,l,f,p){if(ag){var x=Fy(p);if(x===null)Cy(s,l,p,sg,f),gA(s,p);else if(dj(x,s,l,f,p))p.stopPropagation();else if(gA(s,p),l&4&&-1<uj.indexOf(s)){for(;x!==null;){var S=ri(x);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var I=Fr(S.pendingLanes);if(I!==0){var G=S;for(G.pendingLanes|=2,G.entangledLanes|=2;I;){var Q=1<<31-tn(I);G.entanglements[1]|=Q,I&=~Q}xa(S),(Nt&6)===0&&(Fp=ut()+500,Hd(0))}}break;case 31:case 13:G=pl(S,2),G!==null&&Nr(G,S,2),$p(),By(S,2)}if(S=Fy(p),S===null&&Cy(s,l,p,sg,f),S===x)break;x=S}x!==null&&p.stopPropagation()}else Cy(s,l,p,null,f)}}function Fy(s){return s=ii(s),Gy(s)}var sg=null;function Gy(s){if(sg=null,s=sa(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===31){if(s=c(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return sg=s,null}function pA(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rt()){case cn:return 2;case It:return 8;case wn:case Br:return 32;case na:return 268435456;default:return 32}default:return 32}}var $y=!1,so=null,oo=null,lo=null,Zd=new Map,Jd=new Map,co=[],uj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gA(s,l){switch(s){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":oo=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":Zd.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jd.delete(l.pointerId)}}function ef(s,l,f,p,x,S){return s===null||s.nativeEvent!==S?(s={blockedOn:l,domEventName:f,eventSystemFlags:p,nativeEvent:S,targetContainers:[x]},l!==null&&(l=ri(l),l!==null&&fA(l)),s):(s.eventSystemFlags|=p,l=s.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),s)}function dj(s,l,f,p,x){switch(l){case"focusin":return so=ef(so,s,l,f,p,x),!0;case"dragenter":return oo=ef(oo,s,l,f,p,x),!0;case"mouseover":return lo=ef(lo,s,l,f,p,x),!0;case"pointerover":var S=x.pointerId;return Zd.set(S,ef(Zd.get(S)||null,s,l,f,p,x)),!0;case"gotpointercapture":return S=x.pointerId,Jd.set(S,ef(Jd.get(S)||null,s,l,f,p,x)),!0}return!1}function mA(s){var l=sa(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,Ni(s.priority,function(){hA(f)});return}}else if(l===31){if(l=c(f),l!==null){s.blockedOn=l,Ni(s.priority,function(){hA(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function og(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=Fy(s.nativeEvent);if(f===null){f=s.nativeEvent;var p=new f.constructor(f.type,f);hd=p,f.target.dispatchEvent(p),hd=null}else return l=ri(f),l!==null&&fA(l),s.blockedOn=f,!1;l.shift()}return!0}function vA(s,l,f){og(s)&&f.delete(l)}function fj(){$y=!1,so!==null&&og(so)&&(so=null),oo!==null&&og(oo)&&(oo=null),lo!==null&&og(lo)&&(lo=null),Zd.forEach(vA),Jd.forEach(vA)}function lg(s,l){s.blockedOn===l&&(s.blockedOn=null,$y||($y=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,fj)))}var cg=null;function yA(s){cg!==s&&(cg=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){cg===s&&(cg=null);for(var l=0;l<s.length;l+=3){var f=s[l],p=s[l+1],x=s[l+2];if(typeof p!="function"){if(Gy(p||f)===null)continue;break}var S=ri(f);S!==null&&(s.splice(l,3),l-=3,Fv(S,{pending:!0,data:x,method:f.method,action:p},p,x))}}))}function qc(s){function l(Q){return lg(Q,s)}so!==null&&lg(so,s),oo!==null&&lg(oo,s),lo!==null&&lg(lo,s),Zd.forEach(l),Jd.forEach(l);for(var f=0;f<co.length;f++){var p=co[f];p.blockedOn===s&&(p.blockedOn=null)}for(;0<co.length&&(f=co[0],f.blockedOn===null);)mA(f),f.blockedOn===null&&co.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var x=f[p],S=f[p+1],I=x[$n]||null;if(typeof S=="function")I||yA(f);else if(I){var G=null;if(S&&S.hasAttribute("formAction")){if(x=S,I=S[$n]||null)G=I.formAction;else if(Gy(x)!==null)continue}else G=I.action;typeof G=="function"?f[p+1]=G:(f.splice(p,3),p-=3),yA(f)}}}function bA(){function s(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(I){return x=I})},focusReset:"manual",scroll:"manual"})}function l(){x!==null&&(x(),x=null),p||setTimeout(f,20)}function f(){if(!p&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,x=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){p=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),x!==null&&(x(),x=null)}}}function Hy(s){this._internalRoot=s}ug.prototype.render=Hy.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,p=Qr();uA(f,p,s,l,null,null)},ug.prototype.unmount=Hy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;uA(s.current,2,null,s,null,null),$p(),l[ia]=null}};function ug(s){this._internalRoot=s}ug.prototype.unstable_scheduleHydration=function(s){if(s){var l=$h();s={blockedOn:null,target:s,priority:l};for(var f=0;f<co.length&&l!==0&&l<co[f].priority;f++);co.splice(f,0,s),f===0&&mA(s)}};var xA=e.version;if(xA!=="19.2.0")throw Error(r(527,xA,"19.2.0"));W.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(l),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var hj={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dg.isDisabled&&dg.supportsFiber)try{Ur=dg.inject(hj),Sn=dg}catch{}}return nf.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,p="",x=CE,S=kE,I=RE;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError)),l=lA(s,1,!1,null,null,f,p,null,x,S,I,bA),s[ia]=l.current,Ay(s),new Hy(l)},nf.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var p=!1,x="",S=CE,I=kE,G=RE,Q=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&(S=f.onUncaughtError),f.onCaughtError!==void 0&&(I=f.onCaughtError),f.onRecoverableError!==void 0&&(G=f.onRecoverableError),f.formState!==void 0&&(Q=f.formState)),l=lA(s,1,!0,l,f??null,p,x,Q,S,I,G,bA),l.context=cA(null),f=l.current,p=Qr(),p=nl(p),x=Xs(p),x.callback=null,Ws(f,x,p),f=p,l.current.lanes=f,el(l,f),xa(l),s[ia]=l.current,Ay(s),new ug(l)},nf.version="19.2.0",nf}var DA;function Ej(){if(DA)return Xy.exports;DA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xy.exports=Sj(),Xy.exports}var Tj=Ej();const Aj="modulepreload",Cj=function(t){return"/personal-budget-pwa/"+t},NA={},Tt=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");i=u(n.map(d=>{if(d=Cj(d),d in NA)return;NA[d]=!0;const h=d.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":Aj,h||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),h)return new Promise((b,_)=>{m.addEventListener("load",b),m.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};function kj(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:o}=t;let c,u;const d=async(g=!0)=>{await u};async function h(){if("serviceWorker"in navigator){if(c=await Tt(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(g=>{o?.(g)}),!c)return;c.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),c.addEventListener("installed",g=>{g.isUpdate||r?.()}),c.register({immediate:e}).then(g=>{a?a("/personal-budget-pwa/sw.js",g):i?.(g)}).catch(g=>{o?.(g)})}}return u=h(),d}const Rj=()=>{};var IA={};const GR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Dj=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},$R={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=a>>2,g=(a&3)<<4|c>>4;let m=(c&15)<<2|d>>6,b=d&63;u||(b=64,o||(m=64)),r.push(n[h],n[g],n[m],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(GR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Dj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||d==null||g==null)throw new Nj;const m=a<<2|c>>4;if(r.push(m),d!==64){const b=c<<4&240|d>>2;if(r.push(b),g!==64){const _=d<<6&192|g;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Nj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ij=function(t){const e=GR(t);return $R.encodeByteArray(e,!0)},sm=function(t){return Ij(t).replace(/\./g,"")},HR=function(t){try{return $R.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Mj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Oj=()=>Mj().__FIREBASE_DEFAULTS__,Pj=()=>{if(typeof process>"u"||typeof IA>"u")return;const t=IA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&HR(t[1]);return e&&JSON.parse(e)},Jm=()=>{try{return Rj()||Oj()||Pj()||jj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qR=t=>Jm()?.emulatorHosts?.[t],Vj=t=>{const e=qR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},YR=()=>Jm()?.config,XR=t=>Jm()?.[`_${t}`];class zj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function zu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function WR(t){return(await fetch(t,{credentials:"include"})).ok}function Lj(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[sm(JSON.stringify(n)),sm(JSON.stringify(o)),""].join(".")}const bf={};function Bj(){const t={prod:[],emulator:[]};for(const e of Object.keys(bf))bf[e]?t.emulator.push(e):t.prod.push(e);return t}function Uj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let MA=!1;function KR(t,e){if(typeof window>"u"||typeof document>"u"||!zu(window.location.host)||bf[t]===e||bf[t]||MA)return;bf[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=Bj().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,b){m.setAttribute("width","24"),m.setAttribute("id",b),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{MA=!0,o()},m}function h(m,b){m.setAttribute("id",b),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=Uj(r),b=n("text"),_=document.getElementById(b)||document.createElement("span"),w=n("learnmore"),E=document.getElementById(w)||document.createElement("a"),T=n("preprendIcon"),C=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const N=m.element;c(N),h(E,w);const V=d();u(C,T),N.append(C,_,E,V),document.body.appendChild(N)}a?(_.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function dr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dr())}function Gj(){const t=Jm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $j(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Hj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yj(){const t=dr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Xj(){return!Gj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wj(){try{return typeof indexedDB=="object"}catch{return!1}}function Kj(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const Qj="FirebaseError";class Rs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Qj,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lh.prototype.create)}}class lh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?Zj(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Rs(i,c,r)}}function Zj(t,e){return t.replace(Jj,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Jj=/\{\$([^}]+)}/g;function e5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(OA(a)&&OA(o)){if(!Mo(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function OA(t){return t!==null&&typeof t=="object"}function ch(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function lf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function cf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function t5(t,e){const n=new n5(t,e);return n.subscribe.bind(n)}class n5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");r5(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Zy),i.error===void 0&&(i.error=Zy),i.complete===void 0&&(i.complete=Zy);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function r5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Zy(){}function qt(t){return t&&t._delegate?t._delegate:t}let $l=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const kl="[DEFAULT]";let i5=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new zj;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s5(e))try{this.getOrInitializeService({instanceIdentifier:kl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=kl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kl){return this.instances.has(e)}getOptions(e=kl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:a5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=kl){return this.component?this.component.multipleInstances?e:kl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function a5(t){return t===kl?void 0:t}function s5(t){return t.instantiationMode==="EAGER"}class o5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new i5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var bt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(bt||(bt={}));const l5={debug:bt.DEBUG,verbose:bt.VERBOSE,info:bt.INFO,warn:bt.WARN,error:bt.ERROR,silent:bt.SILENT},c5=bt.INFO,u5={[bt.DEBUG]:"log",[bt.VERBOSE]:"log",[bt.INFO]:"info",[bt.WARN]:"warn",[bt.ERROR]:"error"},d5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=u5[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class R1{constructor(e){this.name=e,this._logLevel=c5,this._logHandler=d5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in bt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?l5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,bt.DEBUG,...e),this._logHandler(this,bt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,bt.VERBOSE,...e),this._logHandler(this,bt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,bt.INFO,...e),this._logHandler(this,bt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,bt.WARN,...e),this._logHandler(this,bt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,bt.ERROR,...e),this._logHandler(this,bt.ERROR,...e)}}const f5=(t,e)=>e.some(n=>t instanceof n);let PA,jA;function h5(){return PA||(PA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function p5(){return jA||(jA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QR=new WeakMap,Zb=new WeakMap,ZR=new WeakMap,Jy=new WeakMap,D1=new WeakMap;function g5(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Co(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&QR.set(n,t)}).catch(()=>{}),D1.set(e,t),e}function m5(t){if(Zb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Zb.set(t,e)}let Jb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ZR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Co(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function v5(t){Jb=t(Jb)}function y5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(eb(this),e,...n);return ZR.set(r,e.sort?e.sort():[e]),Co(r)}:p5().includes(t)?function(...e){return t.apply(eb(this),e),Co(QR.get(this))}:function(...e){return Co(t.apply(eb(this),e))}}function b5(t){return typeof t=="function"?y5(t):(t instanceof IDBTransaction&&m5(t),f5(t,h5())?new Proxy(t,Jb):t)}function Co(t){if(t instanceof IDBRequest)return g5(t);if(Jy.has(t))return Jy.get(t);const e=b5(t);return e!==t&&(Jy.set(t,e),D1.set(e,t)),e}const eb=t=>D1.get(t);function x5(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=Co(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Co(o.result),u.oldVersion,u.newVersion,Co(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const _5=["get","getKey","getAll","getAllKeys","count"],w5=["put","add","delete","clear"],tb=new Map;function VA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(tb.get(e))return tb.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=w5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_5.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return tb.set(e,a),a}v5(t=>({...t,get:(e,n,r)=>VA(e,n)||t.get(e,n,r),has:(e,n)=>!!VA(e,n)||t.has(e,n)}));class S5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(E5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function E5(t){return t.getComponent()?.type==="VERSION"}const ex="@firebase/app",zA="0.14.6";const xs=new R1("@firebase/app"),T5="@firebase/app-compat",A5="@firebase/analytics-compat",C5="@firebase/analytics",k5="@firebase/app-check-compat",R5="@firebase/app-check",D5="@firebase/auth",N5="@firebase/auth-compat",I5="@firebase/database",M5="@firebase/data-connect",O5="@firebase/database-compat",P5="@firebase/functions",j5="@firebase/functions-compat",V5="@firebase/installations",z5="@firebase/installations-compat",L5="@firebase/messaging",B5="@firebase/messaging-compat",U5="@firebase/performance",F5="@firebase/performance-compat",G5="@firebase/remote-config",$5="@firebase/remote-config-compat",H5="@firebase/storage",q5="@firebase/storage-compat",Y5="@firebase/firestore",X5="@firebase/ai",W5="@firebase/firestore-compat",K5="firebase",Q5="12.6.0";const tx="[DEFAULT]",Z5={[ex]:"fire-core",[T5]:"fire-core-compat",[C5]:"fire-analytics",[A5]:"fire-analytics-compat",[R5]:"fire-app-check",[k5]:"fire-app-check-compat",[D5]:"fire-auth",[N5]:"fire-auth-compat",[I5]:"fire-rtdb",[M5]:"fire-data-connect",[O5]:"fire-rtdb-compat",[P5]:"fire-fn",[j5]:"fire-fn-compat",[V5]:"fire-iid",[z5]:"fire-iid-compat",[L5]:"fire-fcm",[B5]:"fire-fcm-compat",[U5]:"fire-perf",[F5]:"fire-perf-compat",[G5]:"fire-rc",[$5]:"fire-rc-compat",[H5]:"fire-gcs",[q5]:"fire-gcs-compat",[Y5]:"fire-fst",[W5]:"fire-fst-compat",[X5]:"fire-vertex","fire-js":"fire-js",[K5]:"fire-js-all"};const om=new Map,J5=new Map,nx=new Map;function LA(t,e){try{t.container.addComponent(e)}catch(n){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yu(t){const e=t.name;if(nx.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;nx.set(e,t);for(const n of om.values())LA(n,t);for(const n of J5.values())LA(n,t);return!0}function N1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xi(t){return t==null?!1:t.settings!==void 0}const eV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ko=new lh("app","Firebase",eV);class tV{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $l("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ko.create("app-deleted",{appName:this._name})}}const Lu=Q5;function JR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:tx,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ko.create("bad-app-name",{appName:String(i)});if(n||(n=YR()),!n)throw ko.create("no-options");const a=om.get(i);if(a){if(Mo(n,a.options)&&Mo(r,a.config))return a;throw ko.create("duplicate-app",{appName:i})}const o=new o5(i);for(const u of nx.values())o.addComponent(u);const c=new tV(n,r,o);return om.set(i,c),c}function eD(t=tx){const e=om.get(t);if(!e&&t===tx&&YR())return JR();if(!e)throw ko.create("no-app",{appName:t});return e}function Ro(t,e,n){let r=Z5[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(o.join(" "));return}yu(new $l(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const nV="firebase-heartbeat-database",rV=1,jf="firebase-heartbeat-store";let nb=null;function tD(){return nb||(nb=x5(nV,rV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jf)}catch(n){console.warn(n)}}}}).catch(t=>{throw ko.create("idb-open",{originalErrorMessage:t.message})})),nb}async function iV(t){try{const n=(await tD()).transaction(jf),r=await n.objectStore(jf).get(nD(t));return await n.done,r}catch(e){if(e instanceof Rs)xs.warn(e.message);else{const n=ko.create("idb-get",{originalErrorMessage:e?.message});xs.warn(n.message)}}}async function BA(t,e){try{const r=(await tD()).transaction(jf,"readwrite");await r.objectStore(jf).put(e,nD(t)),await r.done}catch(n){if(n instanceof Rs)xs.warn(n.message);else{const r=ko.create("idb-set",{originalErrorMessage:n?.message});xs.warn(r.message)}}}function nD(t){return`${t.name}!${t.options.appId}`}const aV=1024,sV=30;class oV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=UA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>sV){const i=uV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=UA(),{heartbeatsToSend:n,unsentEntries:r}=lV(this._heartbeatsCache.heartbeats),i=sm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return xs.warn(e),""}}}function UA(){return new Date().toISOString().substring(0,10)}function lV(t,e=aV){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),FA(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),FA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wj()?Kj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return BA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return BA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function FA(t){return sm(JSON.stringify({version:2,heartbeats:t})).length}function uV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function dV(t){yu(new $l("platform-logger",e=>new S5(e),"PRIVATE")),yu(new $l("heartbeat",e=>new oV(e),"PRIVATE")),Ro(ex,zA,t),Ro(ex,zA,"esm2020"),Ro("fire-js","")}dV("");function rD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fV=rD,iD=new lh("auth","Firebase",rD());const lm=new R1("@firebase/auth");function hV(t,...e){lm.logLevel<=bt.WARN&&lm.warn(`Auth (${Lu}): ${t}`,...e)}function Lg(t,...e){lm.logLevel<=bt.ERROR&&lm.error(`Auth (${Lu}): ${t}`,...e)}function Wi(t,...e){throw I1(t,...e)}function Aa(t,...e){return I1(t,...e)}function aD(t,e,n){const r={...fV(),[e]:n};return new lh("auth","Firebase",r).create(e,{appName:t.name})}function ps(t){return aD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function I1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return iD.create(t,...e)}function Ye(t,e,...n){if(!t)throw I1(e,...n)}function ds(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lg(e),new Error(e)}function _s(t,e){t||ds(e)}function rx(){return typeof self<"u"&&self.location?.href||""}function pV(){return GA()==="http:"||GA()==="https:"}function GA(){return typeof self<"u"&&self.location?.protocol||null}function gV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pV()||Hj()||"connection"in navigator)?navigator.onLine:!0}function mV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class uh{constructor(e,n){this.shortDelay=e,this.longDelay=n,_s(n>e,"Short delay should be less than long delay!"),this.isMobile=Fj()||qj()}get(){return gV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function M1(t,e){_s(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class sD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const vV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const yV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bV=new uh(3e4,6e4);function ea(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ri(t,e,n,r,i={}){return oD(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=ch({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...a};return $j()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&zu(t.emulatorConfig.host)&&(d.credentials="include"),sD.fetch()(await lD(t,t.config.apiHost,n,c),d)})}async function oD(t,e,n){t._canInitEmulator=!1;const r={...vV,...e};try{const i=new _V(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw fg(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw fg(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw fg(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw fg(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw aD(t,h,d);Wi(t,h)}}catch(i){if(i instanceof Rs)throw i;Wi(t,"network-request-failed",{message:String(i)})}}async function dh(t,e,n,r,i={}){const a=await Ri(t,e,n,r,i);return"mfaPendingCredential"in a&&Wi(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function lD(t,e,n,r){const i=`${e}${n}?${r}`,a=t,o=a.config.emulator?M1(t.config,i):`${t.config.apiScheme}://${i}`;return yV.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function xV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _V{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Aa(this.auth,"network-request-failed")),bV.get())})}}function fg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Aa(t,e,r);return i.customData._tokenResponse=n,i}function $A(t){return t!==void 0&&t.enterprise!==void 0}class wV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SV(t,e){return Ri(t,"GET","/v2/recaptchaConfig",ea(t,e))}async function EV(t,e){return Ri(t,"POST","/v1/accounts:delete",e)}async function cm(t,e){return Ri(t,"POST","/v1/accounts:lookup",e)}function xf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TV(t,e=!1){const n=qt(t),r=await n.getIdToken(e),i=O1(r);Ye(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:xf(rb(i.auth_time)),issuedAtTime:xf(rb(i.iat)),expirationTime:xf(rb(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function rb(t){return Number(t)*1e3}function O1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Lg("JWT malformed, contained fewer than 3 sections"),null;try{const i=HR(n);return i?JSON.parse(i):(Lg("Failed to decode base64 JWT payload"),null)}catch(i){return Lg("Caught error parsing JWT payload as JSON",i?.toString()),null}}function HA(t){const e=O1(t);return Ye(e,"internal-error"),Ye(typeof e.exp<"u","internal-error"),Ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function bu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Rs&&AV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function AV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class CV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ix{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xf(this.lastLoginAt),this.creationTime=xf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function um(t){const e=t.auth,n=await t.getIdToken(),r=await bu(t,cm(e,{idToken:n}));Ye(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?cD(i.providerUserInfo):[],o=RV(t.providerData,a),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!o?.length,d=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ix(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function kV(t){const e=qt(t);await um(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cD(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function DV(t,e){const n=await oD(t,{},async()=>{const r=ch({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await lD(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&zu(t.emulatorConfig.host)&&(u.credentials="include"),sD.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function NV(t,e){return Ri(t,"POST","/v2/accounts:revokeToken",ea(t,e))}class du{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ye(e.idToken,"internal-error"),Ye(typeof e.idToken<"u","internal-error"),Ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ye(e.length!==0,"internal-error");const n=HA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await DV(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new du;return r&&(Ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ye(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Ye(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new du,this.toJSON())}_performRefresh(){return ds("not implemented")}}function fo(t,e){Ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hi{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new CV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ix(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await bu(this,this.stsTokenManager.getToken(this.auth,e));return Ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return TV(this,e)}reload(){return kV(this)}_assign(e){this!==e&&(Ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await um(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xi(this.auth.app))return Promise.reject(ps(this.auth));const e=await this.getIdToken();return await bu(this,EV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:b,providerData:_,stsTokenManager:w}=n;Ye(g&&w,e,"internal-error");const E=du.fromJSON(this.name,w);Ye(typeof g=="string",e,"internal-error"),fo(r,e.name),fo(i,e.name),Ye(typeof m=="boolean",e,"internal-error"),Ye(typeof b=="boolean",e,"internal-error"),fo(a,e.name),fo(o,e.name),fo(c,e.name),fo(u,e.name),fo(d,e.name),fo(h,e.name);const T=new Hi({uid:g,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:b,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:E,createdAt:d,lastLoginAt:h});return _&&Array.isArray(_)&&(T.providerData=_.map(C=>({...C}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new du;i.updateFromServerResponse(n);const a=new Hi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await um(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ye(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?cD(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new du;c.updateFromIdToken(r);const u=new Hi({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ix(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,d),u}}const qA=new Map;function fs(t){_s(t instanceof Function,"Expected a class definition");let e=qA.get(t);return e?(_s(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qA.set(t,e),e)}class uD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uD.type="NONE";const YA=uD;function Bg(t,e,n){return`firebase:${t}:${e}:${n}`}class fu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Bg(this.userKey,i.apiKey,a),this.fullPersistenceKey=Bg("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await cm(this.auth,{idToken:e}).catch(()=>{});return n?Hi._fromGetAccountInfoResponse(this.auth,n,e):null}return Hi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fu(fs(YA),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||fs(YA);const o=Bg(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(o);if(h){let g;if(typeof h=="string"){const m=await cm(e,{idToken:h}).catch(()=>{});if(!m)break;g=await Hi._fromGetAccountInfoResponse(e,m,h)}else g=Hi._fromJSON(e,h);d!==a&&(c=g),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new fu(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new fu(a,e,r))}}function XA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mD(e))return"Blackberry";if(vD(e))return"Webos";if(fD(e))return"Safari";if((e.includes("chrome/")||hD(e))&&!e.includes("edge/"))return"Chrome";if(gD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function dD(t=dr()){return/firefox\//i.test(t)}function fD(t=dr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hD(t=dr()){return/crios\//i.test(t)}function pD(t=dr()){return/iemobile/i.test(t)}function gD(t=dr()){return/android/i.test(t)}function mD(t=dr()){return/blackberry/i.test(t)}function vD(t=dr()){return/webos/i.test(t)}function P1(t=dr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function IV(t=dr()){return P1(t)&&!!window.navigator?.standalone}function MV(){return Yj()&&document.documentMode===10}function yD(t=dr()){return P1(t)||gD(t)||vD(t)||mD(t)||/windows phone/i.test(t)||pD(t)}function bD(t,e=[]){let n;switch(t){case"Browser":n=XA(dr());break;case"Worker":n=`${XA(dr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Lu}/${r}`}class OV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function PV(t,e={}){return Ri(t,"GET","/v2/passwordPolicy",ea(t,e))}const jV=6;class VV{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??jV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class zV{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new WA(this),this.idTokenSubscription=new WA(this),this.beforeStateQueue=new OV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fs(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await cm(this,{idToken:e}),r=await Hi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(xi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await um(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xi(this.app))return Promise.reject(ps(this));const n=e?qt(e):null;return n&&Ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xi(this.app)?Promise.reject(ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xi(this.app)?Promise.reject(ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PV(this),n=new VV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await NV(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fs(e)||this._popupRedirectResolver;Ye(n,this,"argument-error"),this.redirectPersistenceManager=await fu.create(this,[fs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ye(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(xi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&hV(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Xo(t){return qt(t)}class WA{constructor(e){this.auth=e,this.observer=null,this.addObserver=t5(n=>this.observer=n)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let e0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LV(t){e0=t}function xD(t){return e0.loadJS(t)}function BV(){return e0.recaptchaEnterpriseScript}function UV(){return e0.gapiScript}function FV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class GV{constructor(){this.enterprise=new $V}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class $V{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const HV="recaptcha-enterprise",_D="NO_RECAPTCHA";class qV{constructor(e){this.type=HV,this.auth=Xo(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{SV(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new wV(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;$A(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(_D)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GV().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&$A(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=BV();u.length!==0&&(u+=c),xD(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function KA(t,e,n,r=!1,i=!1){const a=new qV(t);let o;if(i)o=_D;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function dm(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await KA(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await KA(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}function YV(t,e){const n=N1(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Mo(a,e??{}))return i;Wi(i,"already-initialized")}return n.initialize({options:e})}function XV(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(fs);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function WV(t,e,n){const r=Xo(t);Ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=wD(e),{host:o,port:c}=KV(e),u=c===null?"":`:${c}`,d={url:`${a}//${o}${u}/`},h=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ye(Mo(d,r.config.emulator)&&Mo(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,zu(o)?(WR(`${a}//${o}${u}`),KR("Auth",!0)):QV()}function wD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function KV(t){const e=wD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:QA(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:QA(o)}}}function QA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function QV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class j1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ds("not implemented")}_getIdTokenResponse(e){return ds("not implemented")}_linkToIdToken(e,n){return ds("not implemented")}_getReauthenticationResolver(e){return ds("not implemented")}}async function ZV(t,e){return Ri(t,"POST","/v1/accounts:resetPassword",ea(t,e))}async function JV(t,e){return Ri(t,"POST","/v1/accounts:signUp",e)}async function e6(t,e){return Ri(t,"POST","/v1/accounts:update",ea(t,e))}async function t6(t,e){return dh(t,"POST","/v1/accounts:signInWithPassword",ea(t,e))}async function SD(t,e){return Ri(t,"POST","/v1/accounts:sendOobCode",ea(t,e))}async function n6(t,e){return SD(t,e)}async function r6(t,e){return SD(t,e)}async function i6(t,e){return dh(t,"POST","/v1/accounts:signInWithEmailLink",ea(t,e))}async function a6(t,e){return dh(t,"POST","/v1/accounts:signInWithEmailLink",ea(t,e))}class Vf extends j1{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Vf(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Vf(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,n,"signInWithPassword",t6);case"emailLink":return i6(e,{email:this._email,oobCode:this._password});default:Wi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,r,"signUpPassword",JV);case"emailLink":return a6(e,{idToken:n,email:this._email,oobCode:this._password});default:Wi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function hu(t,e){return dh(t,"POST","/v1/accounts:signInWithIdp",ea(t,e))}const s6="http://localhost";class Hl extends j1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Wi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const o=new Hl(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return hu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hu(e,n)}buildRequest(){const e={requestUri:s6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ch(n)}return e}}function o6(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function l6(t){const e=lf(cf(t)).link,n=e?lf(cf(e)).deep_link_id:null,r=lf(cf(t)).deep_link_id;return(r?lf(cf(r)).link:null)||r||n||e||t}class V1{constructor(e){const n=lf(cf(e)),r=n.apiKey??null,i=n.oobCode??null,a=o6(n.mode??null);Ye(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=l6(e);try{return new V1(n)}catch{return null}}}class Jl{constructor(){this.providerId=Jl.PROVIDER_ID}static credential(e,n){return Vf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=V1.parseLink(n);return Ye(r,"argument-error"),Vf._fromEmailAndCode(e,r.code,r.tenantId)}}Jl.PROVIDER_ID="password";Jl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ED{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fh extends ED{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class vo extends fh{constructor(){super("facebook.com")}static credential(e){return Hl._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vo.credential(e.oauthAccessToken)}catch{return null}}}vo.FACEBOOK_SIGN_IN_METHOD="facebook.com";vo.PROVIDER_ID="facebook.com";class yo extends fh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hl._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yo.credential(n,r)}catch{return null}}}yo.GOOGLE_SIGN_IN_METHOD="google.com";yo.PROVIDER_ID="google.com";class bo extends fh{constructor(){super("github.com")}static credential(e){return Hl._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bo.credential(e.oauthAccessToken)}catch{return null}}}bo.GITHUB_SIGN_IN_METHOD="github.com";bo.PROVIDER_ID="github.com";class xo extends fh{constructor(){super("twitter.com")}static credential(e,n){return Hl._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xo.credential(n,r)}catch{return null}}}xo.TWITTER_SIGN_IN_METHOD="twitter.com";xo.PROVIDER_ID="twitter.com";async function c6(t,e){return dh(t,"POST","/v1/accounts:signUp",ea(t,e))}class ql{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Hi._fromIdTokenResponse(e,r,i),o=ZA(r);return new ql({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=ZA(r);return new ql({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function ZA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class fm extends Rs{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,fm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new fm(e,n,r,i)}}function TD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?fm._fromErrorAndOperation(t,a,e,r):a})}async function u6(t,e,n=!1){const r=await bu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ql._forOperation(t,"link",r)}async function AD(t,e,n=!1){const{auth:r}=t;if(xi(r.app))return Promise.reject(ps(r));const i="reauthenticate";try{const a=await bu(t,TD(r,i,e,t),n);Ye(a.idToken,r,"internal-error");const o=O1(a.idToken);Ye(o,r,"internal-error");const{sub:c}=o;return Ye(t.uid===c,r,"user-mismatch"),ql._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Wi(r,"user-mismatch"),a}}async function CD(t,e,n=!1){if(xi(t.app))return Promise.reject(ps(t));const r="signIn",i=await TD(t,r,e),a=await ql._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function d6(t,e){return CD(Xo(t),e)}async function f6(t,e){return AD(qt(t),e)}function h6(t,e,n){Ye(n.url?.length>0,t,"invalid-continue-uri"),Ye(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Ye(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ye(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Ye(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function z1(t){const e=Xo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function p6(t,e,n){const r=Xo(t);await dm(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",r6)}async function g6(t,e,n){await ZV(qt(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&z1(t),r})}async function m6(t,e){await e6(qt(t),{oobCode:e})}async function v6(t,e,n){if(xi(t.app))return Promise.reject(ps(t));const r=Xo(t),o=await dm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",c6).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&z1(t),u}),c=await ql._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function y6(t,e,n){return xi(t.app)?Promise.reject(ps(t)):d6(qt(t),Jl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&z1(t),r})}async function JA(t,e){const n=qt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&h6(n.auth,i,e);const{email:a}=await n6(n.auth,i);a!==t.email&&await t.reload()}async function b6(t,e){return Ri(t,"POST","/v1/accounts:update",e)}async function x6(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=qt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await bu(r,b6(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function _6(t,e,n,r){return qt(t).onIdTokenChanged(e,n,r)}function w6(t,e,n){return qt(t).beforeAuthStateChanged(e,n)}function S6(t,e,n,r){return qt(t).onAuthStateChanged(e,n,r)}function eC(t){return qt(t).signOut()}async function E6(t){return qt(t).delete()}const hm="__sak";class kD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hm,"1"),this.storage.removeItem(hm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const T6=1e3,A6=10;class RD extends kD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);MV()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,A6):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},T6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RD.type="LOCAL";const C6=RD;class DD extends kD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}DD.type="SESSION";const ND=DD;function k6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class t0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new t0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,a)),u=await k6(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t0.receivers=[];function L1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class R6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=L1("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(m.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Ca(){return window}function D6(t){Ca().location.href=t}function ID(){return typeof Ca().WorkerGlobalScope<"u"&&typeof Ca().importScripts=="function"}async function N6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function I6(){return navigator?.serviceWorker?.controller||null}function M6(){return ID()?self:null}const MD="firebaseLocalStorageDb",O6=1,pm="firebaseLocalStorage",OD="fbase_key";class hh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function n0(t,e){return t.transaction([pm],e?"readwrite":"readonly").objectStore(pm)}function P6(){const t=indexedDB.deleteDatabase(MD);return new hh(t).toPromise()}function ax(){const t=indexedDB.open(MD,O6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(pm,{keyPath:OD})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(pm)?e(r):(r.close(),await P6(),e(await ax()))})})}async function tC(t,e,n){const r=n0(t,!0).put({[OD]:e,value:n});return new hh(r).toPromise()}async function j6(t,e){const n=n0(t,!1).get(e),r=await new hh(n).toPromise();return r===void 0?null:r.value}function nC(t,e){const n=n0(t,!0).delete(e);return new hh(n).toPromise()}const V6=800,z6=3;class PD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ax(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>z6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ID()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=t0._getInstance(M6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await N6(),!this.activeServiceWorker)return;this.sender=new R6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||I6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ax();return await tC(e,hm,"1"),await nC(e,hm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tC(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>j6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>nC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=n0(i,!1).getAll();return new hh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),V6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PD.type="LOCAL";const L6=PD;new uh(3e4,6e4);function B6(t,e){return e?fs(e):(Ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class B1 extends j1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function U6(t){return CD(t.auth,new B1(t),t.bypassAuthState)}function F6(t){const{auth:e,user:n}=t;return Ye(n,e,"internal-error"),AD(n,new B1(t),t.bypassAuthState)}async function G6(t){const{auth:e,user:n}=t;return Ye(n,e,"internal-error"),u6(n,new B1(t),t.bypassAuthState)}class jD{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U6;case"linkViaPopup":case"linkViaRedirect":return G6;case"reauthViaPopup":case"reauthViaRedirect":return F6;default:Wi(this.auth,"internal-error")}}resolve(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $6=new uh(2e3,1e4);class Jc extends jD{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Jc.currentPopupAction&&Jc.currentPopupAction.cancel(),Jc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ye(e,this.auth,"internal-error"),e}async onExecution(){_s(this.filter.length===1,"Popup operations only handle one event");const e=L1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Aa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Aa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Aa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$6.get())};e()}}Jc.currentPopupAction=null;const H6="pendingRedirect",Ug=new Map;class q6 extends jD{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ug.get(this.auth._key());if(!e){try{const r=await Y6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ug.set(this.auth._key(),e)}return this.bypassAuthState||Ug.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Y6(t,e){const n=K6(e),r=W6(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function X6(t,e){Ug.set(t._key(),e)}function W6(t){return fs(t._redirectPersistence)}function K6(t){return Bg(H6,t.config.apiKey,t.name)}async function Q6(t,e,n=!1){if(xi(t.app))return Promise.reject(ps(t));const r=Xo(t),i=B6(r,e),o=await new q6(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const Z6=600*1e3;class J6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ez(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!VD(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Aa(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z6&&this.cachedEventUids.clear(),this.cachedEventUids.has(rC(e))}saveEventToCache(e){this.cachedEventUids.add(rC(e)),this.lastProcessedEventTime=Date.now()}}function rC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function VD({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function ez(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VD(t);default:return!1}}async function tz(t,e={}){return Ri(t,"GET","/v1/projects",e)}const nz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rz=/^https?/;async function iz(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tz(t);for(const n of e)try{if(az(n))return}catch{}Wi(t,"unauthorized-domain")}function az(t){const e=rx(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!rz.test(n))return!1;if(nz.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const sz=new uh(3e4,6e4);function iC(){const t=Ca().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function oz(t){return new Promise((e,n)=>{function r(){iC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iC(),n(Aa(t,"network-request-failed"))},timeout:sz.get()})}if(Ca().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ca().gapi?.load)r();else{const i=FV("iframefcb");return Ca()[i]=()=>{gapi.load?r():n(Aa(t,"network-request-failed"))},xD(`${UV()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Fg=null,e})}let Fg=null;function lz(t){return Fg=Fg||oz(t),Fg}const cz=new uh(5e3,15e3),uz="__/auth/iframe",dz="emulator/auth/iframe",fz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pz(t){const e=t.config;Ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?M1(e,dz):`https://${t.config.authDomain}/${uz}`,r={apiKey:e.apiKey,appName:t.name,v:Lu},i=hz.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${ch(r).slice(1)}`}async function gz(t){const e=await lz(t),n=Ca().gapi;return Ye(n,t,"internal-error"),e.open({where:document.body,url:pz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fz,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Aa(t,"network-request-failed"),c=Ca().setTimeout(()=>{a(o)},cz.get());function u(){Ca().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}const mz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vz=500,yz=600,bz="_blank",xz="http://localhost";class aC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _z(t,e,n,r=vz,i=yz){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...mz,width:r.toString(),height:i.toString(),top:a,left:o},d=dr().toLowerCase();n&&(c=hD(d)?bz:n),dD(d)&&(e=e||xz,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[b,_])=>`${m}${b}=${_},`,"");if(IV(d)&&c!=="_self")return wz(e||"",c),new aC(null);const g=window.open(e||"",c,h);Ye(g,t,"popup-blocked");try{g.focus()}catch{}return new aC(g)}function wz(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const Sz="__/auth/handler",Ez="emulator/auth/handler",Tz=encodeURIComponent("fac");async function sC(t,e,n,r,i,a){Ye(t.config.authDomain,t,"auth-domain-config-required"),Ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Lu,eventId:i};if(e instanceof ED){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",e5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries({}))o[h]=g}if(e instanceof fh){const h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${Tz}=${encodeURIComponent(u)}`:"";return`${Az(t)}?${ch(c).slice(1)}${d}`}function Az({config:t}){return t.emulator?M1(t,Ez):`https://${t.authDomain}/${Sz}`}const ib="webStorageSupport";class Cz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ND,this._completeRedirectFn=Q6,this._overrideRedirectResult=X6}async _openPopup(e,n,r,i){_s(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await sC(e,n,r,rx(),i);return _z(e,a,L1())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await sC(e,n,r,rx(),i);return D6(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(_s(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gz(e),r=new J6(e);return n.register("authEvent",i=>(Ye(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ib,{type:ib},i=>{const a=i?.[0]?.[ib];a!==void 0&&n(!!a),Wi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yD()||fD()||P1()}}const kz=Cz;var oC="@firebase/auth",lC="1.11.1";class Rz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Dz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nz(t){yu(new $l("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bD(t)},d=new zV(r,i,a,u);return XV(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),yu(new $l("auth-internal",e=>{const n=Xo(e.getProvider("auth").getImmediate());return(r=>new Rz(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ro(oC,lC,Dz(t)),Ro(oC,lC,"esm2020")}const Iz=300,Mz=XR("authIdTokenMaxAge")||Iz;let cC=null;const Oz=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Mz)return;const i=n?.token;cC!==i&&(cC=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Pz(t=eD()){const e=N1(t,"auth");if(e.isInitialized())return e.getImmediate();const n=YV(t,{popupRedirectResolver:kz,persistence:[L6,C6,ND]}),r=XR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=Oz(a.toString());w6(n,o,()=>o(n.currentUser)),_6(n,c=>o(c))}}const i=qR("auth");return i&&WV(n,`http://${i}`),n}function jz(){return document.getElementsByTagName("head")?.[0]??document}LV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Aa("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",jz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nz("Browser");var uC="popstate";function Vz(t={}){function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=ec(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),sx("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof a=="string"?a:zf(a))}function r(i,a){Ai(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return Lz(e,n,r,t)}function on(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ai(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zz(){return Math.random().toString(36).substring(2,10)}function dC(t,e){return{usr:t.state,key:t.key,idx:e}}function sx(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ec(e):e,state:n,key:e&&e.key||r||zz()}}function zf({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ec(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Lz(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function g(){c="POP";let E=h(),T=E==null?null:E-d;d=E,u&&u({action:c,location:w.location,delta:T})}function m(E,T){c="PUSH";let C=sx(w.location,E,T);n&&n(C,E),d=h()+1;let N=dC(C,d),V=w.createHref(C);try{o.pushState(N,"",V)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(V)}a&&u&&u({action:c,location:w.location,delta:1})}function b(E,T){c="REPLACE";let C=sx(w.location,E,T);n&&n(C,E),d=h();let N=dC(C,d),V=w.createHref(C);o.replaceState(N,"",V),a&&u&&u({action:c,location:w.location,delta:0})}function _(E){return Bz(E)}let w={get action(){return c},get location(){return t(i,o)},listen(E){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(uC,g),u=E,()=>{i.removeEventListener(uC,g),u=null}},createHref(E){return e(i,E)},createURL:_,encodeLocation(E){let T=_(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:m,replace:b,go(E){return o.go(E)}};return w}function Bz(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),on(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:zf(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function zD(t,e,n="/"){return Uz(t,e,n,!1)}function Uz(t,e,n,r){let i=typeof e=="string"?ec(e):e,a=ws(i.pathname||"/",n);if(a==null)return null;let o=LD(t);Fz(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=Jz(a);c=Qz(o[u],d,r)}return c}function LD(t,e=[],n=[],r="",i=!1){let a=(o,c,u=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;on(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let g=gs([r,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(on(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),LD(o.children,e,m,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:Wz(g,o.index),routesMeta:m})};return t.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of BD(o.path))a(o,c,!0,u)}),e}function BD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=BD(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function Fz(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Kz(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Gz=/^:[\w-]+$/,$z=3,Hz=2,qz=1,Yz=10,Xz=-2,fC=t=>t==="*";function Wz(t,e){let n=t.split("/"),r=n.length;return n.some(fC)&&(r+=Xz),e&&(r+=Hz),n.filter(i=>!fC(i)).reduce((i,a)=>i+(Gz.test(a)?$z:a===""?qz:Yz),r)}function Kz(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Qz(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",g=gm({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=gm({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:gs([a,g.pathname]),pathnameBase:rL(gs([a,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(a=gs([a,g.pathnameBase]))}return o}function gm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Zz(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:g},m)=>{if(h==="*"){let _=c[m]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const b=c[m];return g&&!b?d[h]=void 0:d[h]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function Zz(t,e=!1,n=!0){Ai(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Jz(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ai(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ws(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var eL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function tL(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ec(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=hC(n.substring(1),"/"):a=hC(n,e)):a=e,{pathname:a,search:iL(r),hash:aL(i)}}function hC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ab(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function UD(t){let e=nL(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function FD(t,e,n,r=!1){let i;typeof t=="string"?i=ec(t):(i={...t},on(!i.pathname||!i.pathname.includes("?"),ab("?","pathname","search",i)),on(!i.pathname||!i.pathname.includes("#"),ab("#","pathname","hash",i)),on(!i.search||!i.search.includes("#"),ab("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;i.pathname=m.join("/")}c=g>=0?e[g]:"/"}let u=tL(i,c),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var gs=t=>t.join("/").replace(/\/\/+/g,"/"),rL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),iL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,aL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,sL=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function oL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function lL(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var GD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $D(t,e){let n=t;if(typeof n!="string"||!eL.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(GD)try{let a=new URL(window.location.href),o=n.startsWith("//")?new URL(a.protocol+n):new URL(n),c=ws(o.pathname,e);o.origin===a.origin&&c!=null?n=c+o.search+o.hash:i=!0}catch{Ai(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var HD=["POST","PUT","PATCH","DELETE"];new Set(HD);var cL=["GET",...HD];new Set(cL);var Bu=B.createContext(null);Bu.displayName="DataRouter";var r0=B.createContext(null);r0.displayName="DataRouterState";var uL=B.createContext(!1),qD=B.createContext({isTransitioning:!1});qD.displayName="ViewTransition";var dL=B.createContext(new Map);dL.displayName="Fetchers";var fL=B.createContext(null);fL.displayName="Await";var Di=B.createContext(null);Di.displayName="Navigation";var ph=B.createContext(null);ph.displayName="Location";var La=B.createContext({outlet:null,matches:[],isDataRoute:!1});La.displayName="Route";var U1=B.createContext(null);U1.displayName="RouteError";var YD="REACT_ROUTER_ERROR",hL="REDIRECT",pL="ROUTE_ERROR_RESPONSE";function gL(t){if(t.startsWith(`${YD}:${hL}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function mL(t){if(t.startsWith(`${YD}:${pL}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new sL(e.status,e.statusText,e.data)}catch{}}function vL(t,{relative:e}={}){on(gh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=B.useContext(Di),{hash:i,pathname:a,search:o}=mh(t,{relative:e}),c=a;return n!=="/"&&(c=a==="/"?n:gs([n,a])),r.createHref({pathname:c,search:o,hash:i})}function gh(){return B.useContext(ph)!=null}function ta(){return on(gh(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(ph).location}var XD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function WD(t){B.useContext(Di).static||B.useLayoutEffect(t)}function Ba(){let{isDataRoute:t}=B.useContext(La);return t?NL():yL()}function yL(){on(gh(),"useNavigate() may be used only in the context of a <Router> component.");let t=B.useContext(Bu),{basename:e,navigator:n}=B.useContext(Di),{matches:r}=B.useContext(La),{pathname:i}=ta(),a=JSON.stringify(UD(r)),o=B.useRef(!1);return WD(()=>{o.current=!0}),B.useCallback((u,d={})=>{if(Ai(o.current,XD),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=FD(u,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:gs([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,a,i,t])}B.createContext(null);function bL(){let{matches:t}=B.useContext(La),e=t[t.length-1];return e?e.params:{}}function mh(t,{relative:e}={}){let{matches:n}=B.useContext(La),{pathname:r}=ta(),i=JSON.stringify(UD(n));return B.useMemo(()=>FD(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function xL(t,e){return KD(t,e)}function KD(t,e,n,r,i){on(gh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=B.useContext(Di),{matches:o}=B.useContext(La),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",g=c&&c.route;{let C=g&&g.path||"";ZD(d,!g||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let m=ta(),b;if(e){let C=typeof e=="string"?ec(e):e;on(h==="/"||C.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${C.pathname}" was given in the \`location\` prop.`),b=C}else b=m;let _=b.pathname||"/",w=_;if(h!=="/"){let C=h.replace(/^\//,"").split("/");w="/"+_.replace(/^\//,"").split("/").slice(C.length).join("/")}let E=zD(t,{pathname:w});Ai(g||E!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Ai(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=TL(E&&E.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:gs([h,a.encodeLocation?a.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:gs([h,a.encodeLocation?a.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),o,n,r,i);return e&&T?B.createElement(ph.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},T):T}function _L(){let t=DL(),e=oL(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=B.createElement(B.Fragment,null,B.createElement("p",null," Hey developer "),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:a},"ErrorBoundary")," or"," ",B.createElement("code",{style:a},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),n?B.createElement("pre",{style:i},n):null,o)}var wL=B.createElement(_L,null),QD=class extends B.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=mL(t.digest);n&&(t=n)}let e=t!==void 0?B.createElement(La.Provider,{value:this.props.routeContext},B.createElement(U1.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?B.createElement(SL,{error:t},e):e}};QD.contextType=uL;var sb=new WeakMap;function SL({children:t,error:e}){let{basename:n}=B.useContext(Di);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=gL(e.digest);if(r){let i=sb.get(e);if(i)throw i;let a=$D(r.location,n);if(GD&&!sb.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw sb.set(e,o),o}return B.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function EL({routeContext:t,match:e,children:n}){let r=B.useContext(Bu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(La.Provider,{value:t},n)}function TL(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n?.errors;if(o!=null){let h=a.findIndex(g=>g.route.id&&o?.[g.route.id]!==void 0);on(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let g=a[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=h),g.route.id){let{loaderData:m,errors:b}=n,_=g.route.loader&&!m.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||_){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let d=n&&r?(h,g)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:lL(n.matches),errorInfo:g})}:void 0;return a.reduceRight((h,g,m)=>{let b,_=!1,w=null,E=null;n&&(b=o&&g.route.id?o[g.route.id]:void 0,w=g.route.errorElement||wL,c&&(u<0&&m===0?(ZD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,E=null):u===m&&(_=!0,E=g.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,m+1)),C=()=>{let N;return b?N=w:_?N=E:g.route.Component?N=B.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=h,B.createElement(EL,{match:g,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:N})};return n&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?B.createElement(QD,{location:n.location,revalidation:n.revalidation,component:w,error:b,children:C(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:d}):C()},null)}function F1(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AL(t){let e=B.useContext(Bu);return on(e,F1(t)),e}function CL(t){let e=B.useContext(r0);return on(e,F1(t)),e}function kL(t){let e=B.useContext(La);return on(e,F1(t)),e}function G1(t){let e=kL(t),n=e.matches[e.matches.length-1];return on(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function RL(){return G1("useRouteId")}function DL(){let t=B.useContext(U1),e=CL("useRouteError"),n=G1("useRouteError");return t!==void 0?t:e.errors?.[n]}function NL(){let{router:t}=AL("useNavigate"),e=G1("useNavigate"),n=B.useRef(!1);return WD(()=>{n.current=!0}),B.useCallback(async(i,a={})=>{Ai(n.current,XD),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var pC={};function ZD(t,e,n){!e&&!pC[t]&&(pC[t]=!0,Ai(!1,n))}B.memo(IL);function IL({routes:t,future:e,state:n,onError:r}){return KD(t,void 0,n,r,e)}function cs(t){on(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ML({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:o}){on(!gh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=B.useMemo(()=>({basename:c,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[c,i,a,o]);typeof n=="string"&&(n=ec(n));let{pathname:d="/",search:h="",hash:g="",state:m=null,key:b="default"}=n,_=B.useMemo(()=>{let w=ws(d,c);return w==null?null:{location:{pathname:w,search:h,hash:g,state:m,key:b},navigationType:r}},[c,d,h,g,m,b,r]);return Ai(_!=null,`<Router basename="${c}"> is not able to match the URL "${d}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:B.createElement(Di.Provider,{value:u},B.createElement(ph.Provider,{children:e,value:_}))}function OL({children:t,location:e}){return xL(ox(t),e)}function ox(t,e=[]){let n=[];return B.Children.forEach(t,(r,i)=>{if(!B.isValidElement(r))return;let a=[...e,i];if(r.type===B.Fragment){n.push.apply(n,ox(r.props.children,a));return}on(r.type===cs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),on(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ox(r.props.children,a)),n.push(o)}),n}var Gg="get",$g="application/x-www-form-urlencoded";function i0(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function PL(t){return i0(t)&&t.tagName.toLowerCase()==="button"}function jL(t){return i0(t)&&t.tagName.toLowerCase()==="form"}function VL(t){return i0(t)&&t.tagName.toLowerCase()==="input"}function zL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function LL(t,e){return t.button===0&&(!e||e==="_self")&&!zL(t)}function lx(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function BL(t,e){let n=lx(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var hg=null;function UL(){if(hg===null)try{new FormData(document.createElement("form"),0),hg=!1}catch{hg=!0}return hg}var FL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ob(t){return t!=null&&!FL.has(t)?(Ai(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$g}"`),null):t}function GL(t,e){let n,r,i,a,o;if(jL(t)){let c=t.getAttribute("action");r=c?ws(c,e):null,n=t.getAttribute("method")||Gg,i=ob(t.getAttribute("enctype"))||$g,a=new FormData(t)}else if(PL(t)||VL(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?ws(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Gg,i=ob(t.getAttribute("formenctype"))||ob(c.getAttribute("enctype"))||$g,a=new FormData(c,t),!UL()){let{name:d,type:h,value:g}=t;if(h==="image"){let m=d?`${d}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else d&&a.append(d,g)}}else{if(i0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Gg,r=null,i=$g,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $L(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&ws(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function HL(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qL(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function YL(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await HL(a,n);return o.links?o.links():[]}return[]}));return QL(r.flat(1).filter(qL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function gC(t,e,n,r,i,a){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):a==="data"?e.filter((u,d)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function XL(t,e,{includeHydrateFallback:n}={}){return WL(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function WL(t){return[...new Set(t)]}function KL(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function QL(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(KL(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function JD(){let t=B.useContext(Bu);return $1(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ZL(){let t=B.useContext(r0);return $1(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var H1=B.createContext(void 0);H1.displayName="FrameworkContext";function eN(){let t=B.useContext(H1);return $1(t,"You must render this element inside a <HydratedRouter> element"),t}function JL(t,e){let n=B.useContext(H1),[r,i]=B.useState(!1),[a,o]=B.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:g}=e,m=B.useRef(null);B.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let w=T=>{T.forEach(C=>{o(C.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return m.current&&E.observe(m.current),()=>{E.disconnect()}}},[t]),B.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let b=()=>{i(!0)},_=()=>{i(!1),o(!1)};return n?t!=="intent"?[a,m,{}]:[a,m,{onFocus:rf(c,b),onBlur:rf(u,_),onMouseEnter:rf(d,b),onMouseLeave:rf(h,_),onTouchStart:rf(g,b)}]:[!1,m,{}]}function rf(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function e9({page:t,...e}){let{router:n}=JD(),r=B.useMemo(()=>zD(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?B.createElement(n9,{page:t,matches:r,...e}):null}function t9(t){let{manifest:e,routeModules:n}=eN(),[r,i]=B.useState([]);return B.useEffect(()=>{let a=!1;return YL(t,e,n).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,n]),r}function n9({page:t,matches:e,...n}){let r=ta(),{future:i,manifest:a,routeModules:o}=eN(),{basename:c}=JD(),{loaderData:u,matches:d}=ZL(),h=B.useMemo(()=>gC(t,e,d,a,r,"data"),[t,e,d,a,r]),g=B.useMemo(()=>gC(t,e,d,a,r,"assets"),[t,e,d,a,r]),m=B.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,E=!1;if(e.forEach(C=>{let N=a.routes[C.route.id];!N||!N.hasLoader||(!h.some(V=>V.route.id===C.route.id)&&C.route.id in u&&o[C.route.id]?.shouldRevalidate||N.hasClientLoader?E=!0:w.add(C.route.id))}),w.size===0)return[];let T=$L(t,c,i.unstable_trailingSlashAwareDataRequests,"data");return E&&w.size>0&&T.searchParams.set("_routes",e.filter(C=>w.has(C.route.id)).map(C=>C.route.id).join(",")),[T.pathname+T.search]},[c,i.unstable_trailingSlashAwareDataRequests,u,r,a,h,e,t,o]),b=B.useMemo(()=>XL(g,a),[g,a]),_=t9(g);return B.createElement(B.Fragment,null,m.map(w=>B.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),b.map(w=>B.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),_.map(({key:w,link:E})=>B.createElement("link",{key:w,nonce:n.nonce,...E,crossOrigin:E.crossOrigin??n.crossOrigin})))}function r9(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var i9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{i9&&(window.__reactRouterVersion="7.13.0")}catch{}function a9({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=B.useRef();i.current==null&&(i.current=Vz({window:r,v5Compat:!0}));let a=i.current,[o,c]=B.useState({action:a.action,location:a.location}),u=B.useCallback(d=>{n===!1?c(d):B.startTransition(()=>c(d))},[n]);return B.useLayoutEffect(()=>a.listen(u),[a,u]),B.createElement(ML,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:n})}var tN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nN=B.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:m,...b},_){let{basename:w,unstable_useTransitions:E}=B.useContext(Di),T=typeof d=="string"&&tN.test(d),C=$D(d,w);d=C.to;let N=vL(d,{relative:i}),[V,P,M]=JL(r,b),A=c9(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:g,unstable_defaultShouldRevalidate:m,unstable_useTransitions:E});function k(j){e&&e(j),j.defaultPrevented||A(j)}let D=B.createElement("a",{...b,...M,href:C.absoluteURL||N,onClick:C.isExternal||a?e:k,ref:r9(_,P),target:u,"data-discover":!T&&n==="render"?"true":void 0});return V&&!T?B.createElement(B.Fragment,null,D,B.createElement(e9,{page:N})):D});nN.displayName="Link";var s9=B.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...d},h){let g=mh(o,{relative:d.relative}),m=ta(),b=B.useContext(r0),{navigator:_,basename:w}=B.useContext(Di),E=b!=null&&g9(g)&&c===!0,T=_.encodeLocation?_.encodeLocation(g).pathname:g.pathname,C=m.pathname,N=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(C=C.toLowerCase(),N=N?N.toLowerCase():null,T=T.toLowerCase()),N&&w&&(N=ws(N,w)||N);const V=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let P=C===T||!i&&C.startsWith(T)&&C.charAt(V)==="/",M=N!=null&&(N===T||!i&&N.startsWith(T)&&N.charAt(T.length)==="/"),A={isActive:P,isPending:M,isTransitioning:E},k=P?e:void 0,D;typeof r=="function"?D=r(A):D=[r,P?"active":null,M?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(A):a;return B.createElement(nN,{...d,"aria-current":k,className:D,ref:h,style:j,to:o,viewTransition:c},typeof u=="function"?u(A):u)});s9.displayName="NavLink";var o9=B.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:o=Gg,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:m,...b},_)=>{let{unstable_useTransitions:w}=B.useContext(Di),E=h9(),T=p9(c,{relative:d}),C=o.toLowerCase()==="get"?"get":"post",N=typeof c=="string"&&tN.test(c),V=P=>{if(u&&u(P),P.defaultPrevented)return;P.preventDefault();let M=P.nativeEvent.submitter,A=M?.getAttribute("formmethod")||o,k=()=>E(M||P.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:m});w&&n!==!1?B.startTransition(()=>k()):k()};return B.createElement("form",{ref:_,method:C,action:T,onSubmit:r?u:V,...b,"data-discover":!N&&t==="render"?"true":void 0})});o9.displayName="Form";function l9(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rN(t){let e=B.useContext(Bu);return on(e,l9(t)),e}function c9(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:c,unstable_useTransitions:u}={}){let d=Ba(),h=ta(),g=mh(t,{relative:a});return B.useCallback(m=>{if(LL(m,e)){m.preventDefault();let b=n!==void 0?n:zf(h)===zf(g),_=()=>d(t,{replace:b,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:c});u?B.startTransition(()=>_()):_()}},[h,d,g,n,r,e,t,i,a,o,c,u])}function u9(t){Ai(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=B.useRef(lx(t)),n=B.useRef(!1),r=ta(),i=B.useMemo(()=>BL(r.search,n.current?null:e.current),[r.search]),a=Ba(),o=B.useCallback((c,u)=>{const d=lx(typeof c=="function"?c(new URLSearchParams(i)):c);n.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var d9=0,f9=()=>`__${String(++d9)}__`;function h9(){let{router:t}=rN("useSubmit"),{basename:e}=B.useContext(Di),n=RL(),r=t.fetch,i=t.navigate;return B.useCallback(async(a,o={})=>{let{action:c,method:u,encType:d,formData:h,body:g}=GL(a,e);if(o.navigate===!1){let m=o.fetcherKey||f9();await r(m,n,o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:g,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await i(o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:g,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,e,n])}function p9(t,{relative:e}={}){let{basename:n}=B.useContext(Di),r=B.useContext(La);on(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...mh(t||".",{relative:e})},o=ta();if(t==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let h=c.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:gs([n,a.pathname])),zf(a)}function g9(t,{relative:e}={}){let n=B.useContext(qD);on(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=rN("useViewTransitionState"),i=mh(t,{relative:e});if(!n.isTransitioning)return!1;let a=ws(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ws(n.nextLocation.pathname,r)||n.nextLocation.pathname;return gm(i.pathname,o)!=null||gm(i.pathname,a)!=null}const m9=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v9=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),mC=t=>{const e=v9(t);return e.charAt(0).toUpperCase()+e.slice(1)},iN=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),y9=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var b9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const x9=B.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>B.createElement("svg",{ref:u,...b9,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:iN("lucide",i),...!a&&!y9(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>B.createElement(d,h)),...Array.isArray(a)?a:[a]]));const Je=(t,e)=>{const n=B.forwardRef(({className:r,...i},a)=>B.createElement(x9,{ref:a,iconNode:e,className:iN(`lucide-${m9(mC(t))}`,`lucide-${t}`,r),...i}));return n.displayName=mC(t),n};const _9=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Oo=Je("arrow-left",_9);const w9=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],S9=Je("arrow-right-left",w9);const E9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],T9=Je("arrow-right",E9);const A9=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],C9=Je("calendar",A9);const k9=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],R9=Je("chart-column",k9);const D9=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],N9=Je("chart-pie",D9);const I9=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],M9=Je("check",I9);const O9=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],P9=Je("chevron-left",O9);const j9=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_a=Je("chevron-right",j9);const V9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],z9=Je("circle-arrow-down",V9);const L9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],B9=Je("circle-arrow-up",L9);const U9=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mm=Je("circle-check-big",U9);const F9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],us=Je("circle-check",F9);const G9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vC=Je("circle",G9);const $9=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],yC=Je("dollar-sign",$9);const H9=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],bC=Je("download",H9);const q9=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Y9=Je("ellipsis",q9);const X9=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],aN=Je("eye-off",X9);const W9=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sN=Je("eye",W9);const K9=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Q9=Je("file-text",K9);const Z9=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],J9=Je("folder",Z9);const eB=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],tB=Je("funnel",eB);const nB=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Lf=Je("grip-vertical",nB);const rB=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],iB=Je("house",rB);const aB=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],sB=Je("list",aB);const oB=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],xC=Je("loader",oB);const lB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],_C=Je("lock",lB);const cB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],uB=Je("log-out",cB);const dB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],cx=Je("mail",dB);const fB=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],hB=Je("pause",fB);const pB=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],gB=Je("pen",pB);const mB=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],vh=Je("piggy-bank",mB);const vB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yh=Je("plus",vB);const yB=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Bf=Je("refresh-cw",yB);const bB=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],xB=Je("rotate-ccw",bB);const _B=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],wB=Je("search",_B);const SB=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],EB=Je("settings",SB);const TB=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Uf=Je("sparkles",TB);const AB=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],CB=Je("tags",AB);const kB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],RB=Je("target",kB);const DB=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vm=Je("trash-2",DB);const NB=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],oN=Je("trash",NB);const IB=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ym=Je("trending-up",IB);const MB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],pu=Je("triangle-alert",MB);const OB=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],PB=Je("undo-2",OB);const jB=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],VB=Je("upload",jB);const zB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],LB=Je("user-plus",zB);const BB=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],a0=Je("wallet",BB);const UB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],s0=Je("x",UB),wC=t=>{let e;const n=new Set,r=(d,h)=>{const g=typeof d=="function"?d(e):d;if(!Object.is(g,e)){const m=e;e=h??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(b=>b(e,m))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=e=t(r,i,c);return c},FB=(t=>t?wC(t):wC),GB=t=>t;function $B(t,e=GB){const n=of.useSyncExternalStore(t.subscribe,of.useCallback(()=>e(t.getState()),[t,e]),of.useCallback(()=>e(t.getInitialState()),[t,e]));return of.useDebugValue(n),n}const SC=t=>{const e=FB(t),n=r=>$B(e,r);return Object.assign(n,e),n},q1=(t=>t?SC(t):SC),EC={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",VITE_FIREBASE_APP_ID:"1:137454342284:web:0ae73943f9058a4342aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-VMP5DF6273",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app"},Ff=new Map,pg=t=>{const e=Ff.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},HB=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=Ff.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return Ff.set(n.name,i),{type:"tracked",store:t,...i}},qB=(t,e)=>{if(e===void 0)return;const n=Ff.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&Ff.delete(t))},YB=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(o=>o.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},XB=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:o,store:c,...u}=e;let d;try{d=(a??(EC?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return t(n,r,i);const{connection:h,...g}=HB(c,d,u);let m=!0;i.setState=((w,E,T)=>{const C=n(w,E);if(!m)return C;const N=T===void 0?{type:o||YB(new Error().stack)||"anonymous"}:typeof T=="string"?{type:T}:T;return c===void 0?(h?.send(N,r()),C):(h?.send({...N,type:`${c}/${N.type}`},{...pg(u.name),[c]:i.getState()}),C)}),i.devtools={cleanup:()=>{h&&typeof h.unsubscribe=="function"&&h.unsubscribe(),qB(u.name,c)}};const b=(...w)=>{const E=m;m=!1,n(...w),m=E},_=t(i.setState,r,i);if(g.type==="untracked"?h?.init(_):(g.stores[g.store]=i,h?.init(Object.fromEntries(Object.entries(g.stores).map(([w,E])=>[w,w===g.store?_:E.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let w=!1;const E=i.dispatch;i.dispatch=(...T)=>{(EC?"production":void 0)!=="production"&&T[0].type==="__setState"&&!w&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),w=!0),E(...T)}}return h.subscribe(w=>{var E;switch(w.type){case"ACTION":if(typeof w.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return lb(w.payload,T=>{if(T.type==="__setState"){if(c===void 0){b(T.state);return}Object.keys(T.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const C=T.state[c];if(C==null)return;JSON.stringify(i.getState())!==JSON.stringify(C)&&b(C);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(T)});case"DISPATCH":switch(w.payload.type){case"RESET":return b(_),c===void 0?h?.init(i.getState()):h?.init(pg(u.name));case"COMMIT":if(c===void 0){h?.init(i.getState());return}return h?.init(pg(u.name));case"ROLLBACK":return lb(w.state,T=>{if(c===void 0){b(T),h?.init(i.getState());return}b(T[c]),h?.init(pg(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return lb(w.state,T=>{if(c===void 0){b(T);return}JSON.stringify(i.getState())!==JSON.stringify(T[c])&&b(T[c])});case"IMPORT_STATE":{const{nextLiftedState:T}=w.payload,C=(E=T.computedStates.slice(-1)[0])==null?void 0:E.state;if(!C)return;b(c===void 0?C:C[c]),h?.send(null,T);return}case"PAUSE_RECORDING":return m=!m}return}}),_},WB=XB,lb=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function KB(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const ux=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return ux(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return ux(r)(n)}}}},QB=(t,e)=>(n,r,i)=>{let a={storage:KB(()=>localStorage),partialize:w=>w,version:0,merge:(w,E)=>({...E,...w}),...e},o=!1;const c=new Set,u=new Set;let d=a.storage;if(!d)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...w)},r,i);const h=()=>{const w=a.partialize({...r()});return d.setItem(a.name,{state:w,version:a.version})},g=i.setState;i.setState=(w,E)=>(g(w,E),h());const m=t((...w)=>(n(...w),h()),r,i);i.getInitialState=()=>m;let b;const _=()=>{var w,E;if(!d)return;o=!1,c.forEach(C=>{var N;return C((N=r())!=null?N:m)});const T=((E=a.onRehydrateStorage)==null?void 0:E.call(a,(w=r())!=null?w:m))||void 0;return ux(d.getItem.bind(d))(a.name).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==a.version){if(a.migrate){const N=a.migrate(C.state,C.version);return N instanceof Promise?N.then(V=>[!0,V]):[!0,N]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,C.state];return[!1,void 0]}).then(C=>{var N;const[V,P]=C;if(b=a.merge(P,(N=r())!=null?N:m),n(b,!0),V)return h()}).then(()=>{T?.(b,void 0),b=r(),o=!0,u.forEach(C=>C(b))}).catch(C=>{T?.(void 0,C)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(d=w.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:w=>(c.add(w),()=>{c.delete(w)}),onFinishHydration:w=>(u.add(w),()=>{u.delete(w)})},a.skipHydration||_(),b||m},lN=QB;var ZB="firebase",JB="12.6.0";Ro(ZB,JB,"app");var TC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Do,cN;(function(){var t;function e(A,k){function D(){}D.prototype=k.prototype,A.F=k.prototype,A.prototype=new D,A.prototype.constructor=A,A.D=function(j,L,U){for(var O=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)O[Z-2]=arguments[Z];return k.prototype[L].apply(j,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,k,D){D||(D=0);const j=Array(16);if(typeof k=="string")for(var L=0;L<16;++L)j[L]=k.charCodeAt(D++)|k.charCodeAt(D++)<<8|k.charCodeAt(D++)<<16|k.charCodeAt(D++)<<24;else for(L=0;L<16;++L)j[L]=k[D++]|k[D++]<<8|k[D++]<<16|k[D++]<<24;k=A.g[0],D=A.g[1],L=A.g[2];let U=A.g[3],O;O=k+(U^D&(L^U))+j[0]+3614090360&4294967295,k=D+(O<<7&4294967295|O>>>25),O=U+(L^k&(D^L))+j[1]+3905402710&4294967295,U=k+(O<<12&4294967295|O>>>20),O=L+(D^U&(k^D))+j[2]+606105819&4294967295,L=U+(O<<17&4294967295|O>>>15),O=D+(k^L&(U^k))+j[3]+3250441966&4294967295,D=L+(O<<22&4294967295|O>>>10),O=k+(U^D&(L^U))+j[4]+4118548399&4294967295,k=D+(O<<7&4294967295|O>>>25),O=U+(L^k&(D^L))+j[5]+1200080426&4294967295,U=k+(O<<12&4294967295|O>>>20),O=L+(D^U&(k^D))+j[6]+2821735955&4294967295,L=U+(O<<17&4294967295|O>>>15),O=D+(k^L&(U^k))+j[7]+4249261313&4294967295,D=L+(O<<22&4294967295|O>>>10),O=k+(U^D&(L^U))+j[8]+1770035416&4294967295,k=D+(O<<7&4294967295|O>>>25),O=U+(L^k&(D^L))+j[9]+2336552879&4294967295,U=k+(O<<12&4294967295|O>>>20),O=L+(D^U&(k^D))+j[10]+4294925233&4294967295,L=U+(O<<17&4294967295|O>>>15),O=D+(k^L&(U^k))+j[11]+2304563134&4294967295,D=L+(O<<22&4294967295|O>>>10),O=k+(U^D&(L^U))+j[12]+1804603682&4294967295,k=D+(O<<7&4294967295|O>>>25),O=U+(L^k&(D^L))+j[13]+4254626195&4294967295,U=k+(O<<12&4294967295|O>>>20),O=L+(D^U&(k^D))+j[14]+2792965006&4294967295,L=U+(O<<17&4294967295|O>>>15),O=D+(k^L&(U^k))+j[15]+1236535329&4294967295,D=L+(O<<22&4294967295|O>>>10),O=k+(L^U&(D^L))+j[1]+4129170786&4294967295,k=D+(O<<5&4294967295|O>>>27),O=U+(D^L&(k^D))+j[6]+3225465664&4294967295,U=k+(O<<9&4294967295|O>>>23),O=L+(k^D&(U^k))+j[11]+643717713&4294967295,L=U+(O<<14&4294967295|O>>>18),O=D+(U^k&(L^U))+j[0]+3921069994&4294967295,D=L+(O<<20&4294967295|O>>>12),O=k+(L^U&(D^L))+j[5]+3593408605&4294967295,k=D+(O<<5&4294967295|O>>>27),O=U+(D^L&(k^D))+j[10]+38016083&4294967295,U=k+(O<<9&4294967295|O>>>23),O=L+(k^D&(U^k))+j[15]+3634488961&4294967295,L=U+(O<<14&4294967295|O>>>18),O=D+(U^k&(L^U))+j[4]+3889429448&4294967295,D=L+(O<<20&4294967295|O>>>12),O=k+(L^U&(D^L))+j[9]+568446438&4294967295,k=D+(O<<5&4294967295|O>>>27),O=U+(D^L&(k^D))+j[14]+3275163606&4294967295,U=k+(O<<9&4294967295|O>>>23),O=L+(k^D&(U^k))+j[3]+4107603335&4294967295,L=U+(O<<14&4294967295|O>>>18),O=D+(U^k&(L^U))+j[8]+1163531501&4294967295,D=L+(O<<20&4294967295|O>>>12),O=k+(L^U&(D^L))+j[13]+2850285829&4294967295,k=D+(O<<5&4294967295|O>>>27),O=U+(D^L&(k^D))+j[2]+4243563512&4294967295,U=k+(O<<9&4294967295|O>>>23),O=L+(k^D&(U^k))+j[7]+1735328473&4294967295,L=U+(O<<14&4294967295|O>>>18),O=D+(U^k&(L^U))+j[12]+2368359562&4294967295,D=L+(O<<20&4294967295|O>>>12),O=k+(D^L^U)+j[5]+4294588738&4294967295,k=D+(O<<4&4294967295|O>>>28),O=U+(k^D^L)+j[8]+2272392833&4294967295,U=k+(O<<11&4294967295|O>>>21),O=L+(U^k^D)+j[11]+1839030562&4294967295,L=U+(O<<16&4294967295|O>>>16),O=D+(L^U^k)+j[14]+4259657740&4294967295,D=L+(O<<23&4294967295|O>>>9),O=k+(D^L^U)+j[1]+2763975236&4294967295,k=D+(O<<4&4294967295|O>>>28),O=U+(k^D^L)+j[4]+1272893353&4294967295,U=k+(O<<11&4294967295|O>>>21),O=L+(U^k^D)+j[7]+4139469664&4294967295,L=U+(O<<16&4294967295|O>>>16),O=D+(L^U^k)+j[10]+3200236656&4294967295,D=L+(O<<23&4294967295|O>>>9),O=k+(D^L^U)+j[13]+681279174&4294967295,k=D+(O<<4&4294967295|O>>>28),O=U+(k^D^L)+j[0]+3936430074&4294967295,U=k+(O<<11&4294967295|O>>>21),O=L+(U^k^D)+j[3]+3572445317&4294967295,L=U+(O<<16&4294967295|O>>>16),O=D+(L^U^k)+j[6]+76029189&4294967295,D=L+(O<<23&4294967295|O>>>9),O=k+(D^L^U)+j[9]+3654602809&4294967295,k=D+(O<<4&4294967295|O>>>28),O=U+(k^D^L)+j[12]+3873151461&4294967295,U=k+(O<<11&4294967295|O>>>21),O=L+(U^k^D)+j[15]+530742520&4294967295,L=U+(O<<16&4294967295|O>>>16),O=D+(L^U^k)+j[2]+3299628645&4294967295,D=L+(O<<23&4294967295|O>>>9),O=k+(L^(D|~U))+j[0]+4096336452&4294967295,k=D+(O<<6&4294967295|O>>>26),O=U+(D^(k|~L))+j[7]+1126891415&4294967295,U=k+(O<<10&4294967295|O>>>22),O=L+(k^(U|~D))+j[14]+2878612391&4294967295,L=U+(O<<15&4294967295|O>>>17),O=D+(U^(L|~k))+j[5]+4237533241&4294967295,D=L+(O<<21&4294967295|O>>>11),O=k+(L^(D|~U))+j[12]+1700485571&4294967295,k=D+(O<<6&4294967295|O>>>26),O=U+(D^(k|~L))+j[3]+2399980690&4294967295,U=k+(O<<10&4294967295|O>>>22),O=L+(k^(U|~D))+j[10]+4293915773&4294967295,L=U+(O<<15&4294967295|O>>>17),O=D+(U^(L|~k))+j[1]+2240044497&4294967295,D=L+(O<<21&4294967295|O>>>11),O=k+(L^(D|~U))+j[8]+1873313359&4294967295,k=D+(O<<6&4294967295|O>>>26),O=U+(D^(k|~L))+j[15]+4264355552&4294967295,U=k+(O<<10&4294967295|O>>>22),O=L+(k^(U|~D))+j[6]+2734768916&4294967295,L=U+(O<<15&4294967295|O>>>17),O=D+(U^(L|~k))+j[13]+1309151649&4294967295,D=L+(O<<21&4294967295|O>>>11),O=k+(L^(D|~U))+j[4]+4149444226&4294967295,k=D+(O<<6&4294967295|O>>>26),O=U+(D^(k|~L))+j[11]+3174756917&4294967295,U=k+(O<<10&4294967295|O>>>22),O=L+(k^(U|~D))+j[2]+718787259&4294967295,L=U+(O<<15&4294967295|O>>>17),O=D+(U^(L|~k))+j[9]+3951481745&4294967295,A.g[0]=A.g[0]+k&4294967295,A.g[1]=A.g[1]+(L+(O<<21&4294967295|O>>>11))&4294967295,A.g[2]=A.g[2]+L&4294967295,A.g[3]=A.g[3]+U&4294967295}r.prototype.v=function(A,k){k===void 0&&(k=A.length);const D=k-this.blockSize,j=this.C;let L=this.h,U=0;for(;U<k;){if(L==0)for(;U<=D;)i(this,A,U),U+=this.blockSize;if(typeof A=="string"){for(;U<k;)if(j[L++]=A.charCodeAt(U++),L==this.blockSize){i(this,j),L=0;break}}else for(;U<k;)if(j[L++]=A[U++],L==this.blockSize){i(this,j),L=0;break}}this.h=L,this.o+=k},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var k=1;k<A.length-8;++k)A[k]=0;k=this.o*8;for(var D=A.length-8;D<A.length;++D)A[D]=k&255,k/=256;for(this.v(A),A=Array(16),k=0,D=0;D<4;++D)for(let j=0;j<32;j+=8)A[k++]=this.g[D]>>>j&255;return A};function a(A,k){var D=c;return Object.prototype.hasOwnProperty.call(D,A)?D[A]:D[A]=k(A)}function o(A,k){this.h=k;const D=[];let j=!0;for(let L=A.length-1;L>=0;L--){const U=A[L]|0;j&&U==k||(D[L]=U,j=!1)}this.g=D}var c={};function u(A){return-128<=A&&A<128?a(A,function(k){return new o([k|0],k<0?-1:0)}):new o([A|0],A<0?-1:0)}function d(A){if(isNaN(A)||!isFinite(A))return g;if(A<0)return E(d(-A));const k=[];let D=1;for(let j=0;A>=D;j++)k[j]=A/D|0,D*=4294967296;return new o(k,0)}function h(A,k){if(A.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(A.charAt(0)=="-")return E(h(A.substring(1),k));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=d(Math.pow(k,8));let j=g;for(let U=0;U<A.length;U+=8){var L=Math.min(8,A.length-U);const O=parseInt(A.substring(U,U+L),k);L<8?(L=d(Math.pow(k,L)),j=j.j(L).add(d(O))):(j=j.j(D),j=j.add(d(O)))}return j}var g=u(0),m=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(w(this))return-E(this).m();let A=0,k=1;for(let D=0;D<this.g.length;D++){const j=this.i(D);A+=(j>=0?j:4294967296+j)*k,k*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(_(this))return"0";if(w(this))return"-"+E(this).toString(A);const k=d(Math.pow(A,6));var D=this;let j="";for(;;){const L=V(D,k).g;D=T(D,L.j(k));let U=((D.g.length>0?D.g[0]:D.h)>>>0).toString(A);if(D=L,_(D))return U+j;for(;U.length<6;)U="0"+U;j=U+j}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function _(A){if(A.h!=0)return!1;for(let k=0;k<A.g.length;k++)if(A.g[k]!=0)return!1;return!0}function w(A){return A.h==-1}t.l=function(A){return A=T(this,A),w(A)?-1:_(A)?0:1};function E(A){const k=A.g.length,D=[];for(let j=0;j<k;j++)D[j]=~A.g[j];return new o(D,~A.h).add(m)}t.abs=function(){return w(this)?E(this):this},t.add=function(A){const k=Math.max(this.g.length,A.g.length),D=[];let j=0;for(let L=0;L<=k;L++){let U=j+(this.i(L)&65535)+(A.i(L)&65535),O=(U>>>16)+(this.i(L)>>>16)+(A.i(L)>>>16);j=O>>>16,U&=65535,O&=65535,D[L]=O<<16|U}return new o(D,D[D.length-1]&-2147483648?-1:0)};function T(A,k){return A.add(E(k))}t.j=function(A){if(_(this)||_(A))return g;if(w(this))return w(A)?E(this).j(E(A)):E(E(this).j(A));if(w(A))return E(this.j(E(A)));if(this.l(b)<0&&A.l(b)<0)return d(this.m()*A.m());const k=this.g.length+A.g.length,D=[];for(var j=0;j<2*k;j++)D[j]=0;for(j=0;j<this.g.length;j++)for(let L=0;L<A.g.length;L++){const U=this.i(j)>>>16,O=this.i(j)&65535,Z=A.i(L)>>>16,X=A.i(L)&65535;D[2*j+2*L]+=O*X,C(D,2*j+2*L),D[2*j+2*L+1]+=U*X,C(D,2*j+2*L+1),D[2*j+2*L+1]+=O*Z,C(D,2*j+2*L+1),D[2*j+2*L+2]+=U*Z,C(D,2*j+2*L+2)}for(A=0;A<k;A++)D[A]=D[2*A+1]<<16|D[2*A];for(A=k;A<2*k;A++)D[A]=0;return new o(D,0)};function C(A,k){for(;(A[k]&65535)!=A[k];)A[k+1]+=A[k]>>>16,A[k]&=65535,k++}function N(A,k){this.g=A,this.h=k}function V(A,k){if(_(k))throw Error("division by zero");if(_(A))return new N(g,g);if(w(A))return k=V(E(A),k),new N(E(k.g),E(k.h));if(w(k))return k=V(A,E(k)),new N(E(k.g),k.h);if(A.g.length>30){if(w(A)||w(k))throw Error("slowDivide_ only works with positive integers.");for(var D=m,j=k;j.l(A)<=0;)D=P(D),j=P(j);var L=M(D,1),U=M(j,1);for(j=M(j,2),D=M(D,2);!_(j);){var O=U.add(j);O.l(A)<=0&&(L=L.add(D),U=O),j=M(j,1),D=M(D,1)}return k=T(A,L.j(k)),new N(L,k)}for(L=g;A.l(k)>=0;){for(D=Math.max(1,Math.floor(A.m()/k.m())),j=Math.ceil(Math.log(D)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),U=d(D),O=U.j(k);w(O)||O.l(A)>0;)D-=j,U=d(D),O=U.j(k);_(U)&&(U=m),L=L.add(U),A=T(A,O)}return new N(L,A)}t.B=function(A){return V(this,A).h},t.and=function(A){const k=Math.max(this.g.length,A.g.length),D=[];for(let j=0;j<k;j++)D[j]=this.i(j)&A.i(j);return new o(D,this.h&A.h)},t.or=function(A){const k=Math.max(this.g.length,A.g.length),D=[];for(let j=0;j<k;j++)D[j]=this.i(j)|A.i(j);return new o(D,this.h|A.h)},t.xor=function(A){const k=Math.max(this.g.length,A.g.length),D=[];for(let j=0;j<k;j++)D[j]=this.i(j)^A.i(j);return new o(D,this.h^A.h)};function P(A){const k=A.g.length+1,D=[];for(let j=0;j<k;j++)D[j]=A.i(j)<<1|A.i(j-1)>>>31;return new o(D,A.h)}function M(A,k){const D=k>>5;k%=32;const j=A.g.length-D,L=[];for(let U=0;U<j;U++)L[U]=k>0?A.i(U+D)>>>k|A.i(U+D+1)<<32-k:A.i(U+D);return new o(L,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,cN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Do=o}).apply(typeof TC<"u"?TC:typeof self<"u"?self:typeof window<"u"?window:{});var gg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var uN,uf,dN,Hg,dx,fN,hN,pN;(function(){var t,e=Object.defineProperty;function n(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof gg=="object"&&gg];for(var R=0;R<y.length;++R){var z=y[R];if(z&&z.Math==Math)return z}throw Error("Cannot find global object")}var r=n(this);function i(y,R){if(R)e:{var z=r;y=y.split(".");for(var H=0;H<y.length-1;H++){var le=y[H];if(!(le in z))break e;z=z[le]}y=y[y.length-1],H=z[y],R=R(H),R!=H&&R!=null&&e(z,y,{configurable:!0,writable:!0,value:R})}}i("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(y){return y||function(R){var z=[],H;for(H in R)Object.prototype.hasOwnProperty.call(R,H)&&z.push([H,R[H]]);return z}});var a=a||{},o=this||self;function c(y){var R=typeof y;return R=="object"&&y!=null||R=="function"}function u(y,R,z){return y.call.apply(y.bind,arguments)}function d(y,R,z){return d=u,d.apply(null,arguments)}function h(y,R){var z=Array.prototype.slice.call(arguments,1);return function(){var H=z.slice();return H.push.apply(H,arguments),y.apply(this,H)}}function g(y,R){function z(){}z.prototype=R.prototype,y.Z=R.prototype,y.prototype=new z,y.prototype.constructor=y,y.Ob=function(H,le,he){for(var ke=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)ke[ot-2]=arguments[ot];return R.prototype[le].apply(H,ke)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function b(y){const R=y.length;if(R>0){const z=Array(R);for(let H=0;H<R;H++)z[H]=y[H];return z}return[]}function _(y,R){for(let H=1;H<arguments.length;H++){const le=arguments[H];var z=typeof le;if(z=z!="object"?z:le?Array.isArray(le)?"array":z:"null",z=="array"||z=="object"&&typeof le.length=="number"){z=y.length||0;const he=le.length||0;y.length=z+he;for(let ke=0;ke<he;ke++)y[z+ke]=le[ke]}else y.push(le)}}class w{constructor(R,z){this.i=R,this.j=z,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function E(y){o.setTimeout(()=>{throw y},0)}function T(){var y=A;let R=null;return y.g&&(R=y.g,y.g=y.g.next,y.g||(y.h=null),R.next=null),R}class C{constructor(){this.h=this.g=null}add(R,z){const H=N.get();H.set(R,z),this.h?this.h.next=H:this.g=H,this.h=H}}var N=new w(()=>new V,y=>y.reset());class V{constructor(){this.next=this.g=this.h=null}set(R,z){this.h=R,this.g=z,this.next=null}reset(){this.next=this.g=this.h=null}}let P,M=!1,A=new C,k=()=>{const y=Promise.resolve(void 0);P=()=>{y.then(D)}};function D(){for(var y;y=T();){try{y.h.call(y.g)}catch(z){E(z)}var R=N;R.j(y),R.h<100&&(R.h++,y.next=R.g,R.g=y)}M=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(y,R){this.type=y,this.g=this.target=R,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var y=!1,R=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const z=()=>{};o.addEventListener("test",z,R),o.removeEventListener("test",z,R)}catch{}return y})();function O(y){return/^[\s\xa0]*$/.test(y)}function Z(y,R){L.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,R)}g(Z,L),Z.prototype.init=function(y,R){const z=this.type=y.type,H=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=R,R=y.relatedTarget,R||(z=="mouseover"?R=y.fromElement:z=="mouseout"&&(R=y.toElement)),this.relatedTarget=R,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&Z.Z.h.call(this)},Z.prototype.h=function(){Z.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var X="closure_listenable_"+(Math.random()*1e6|0),q=0;function W(y,R,z,H,le){this.listener=y,this.proxy=null,this.src=R,this.type=z,this.capture=!!H,this.ha=le,this.key=++q,this.da=this.fa=!1}function ee(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function ie(y,R,z){for(const H in y)R.call(z,y[H],H,y)}function $(y,R){for(const z in y)R.call(void 0,y[z],z,y)}function F(y){const R={};for(const z in y)R[z]=y[z];return R}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(y,R){let z,H;for(let le=1;le<arguments.length;le++){H=arguments[le];for(z in H)y[z]=H[z];for(let he=0;he<Y.length;he++)z=Y[he],Object.prototype.hasOwnProperty.call(H,z)&&(y[z]=H[z])}}function K(y){this.src=y,this.g={},this.h=0}K.prototype.add=function(y,R,z,H,le){const he=y.toString();y=this.g[he],y||(y=this.g[he]=[],this.h++);const ke=ce(y,R,H,le);return ke>-1?(R=y[ke],z||(R.fa=!1)):(R=new W(R,this.src,he,!!H,le),R.fa=z,y.push(R)),R};function oe(y,R){const z=R.type;if(z in y.g){var H=y.g[z],le=Array.prototype.indexOf.call(H,R,void 0),he;(he=le>=0)&&Array.prototype.splice.call(H,le,1),he&&(ee(R),y.g[z].length==0&&(delete y.g[z],y.h--))}}function ce(y,R,z,H){for(let le=0;le<y.length;++le){const he=y[le];if(!he.da&&he.listener==R&&he.capture==!!z&&he.ha==H)return le}return-1}var me="closure_lm_"+(Math.random()*1e6|0),ge={};function Te(y,R,z,H,le){if(Array.isArray(R)){for(let he=0;he<R.length;he++)Te(y,R[he],z,H,le);return null}return z=ze(z),y&&y[X]?y.J(R,z,c(H)?!!H.capture:!1,le):Ne(y,R,z,!1,H,le)}function Ne(y,R,z,H,le,he){if(!R)throw Error("Invalid event type");const ke=c(le)?!!le.capture:!!le;let ot=Ve(y);if(ot||(y[me]=ot=new K(y)),z=ot.add(R,z,H,ke,he),z.proxy)return z;if(H=ae(),z.proxy=H,H.src=y,H.listener=z,y.addEventListener)U||(le=ke),le===void 0&&(le=!1),y.addEventListener(R.toString(),H,le);else if(y.attachEvent)y.attachEvent(Me(R.toString()),H);else if(y.addListener&&y.removeListener)y.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return z}function ae(){function y(z){return R.call(y.src,y.listener,z)}const R=Be;return y}function Ae(y,R,z,H,le){if(Array.isArray(R))for(var he=0;he<R.length;he++)Ae(y,R[he],z,H,le);else H=c(H)?!!H.capture:!!H,z=ze(z),y&&y[X]?(y=y.i,he=String(R).toString(),he in y.g&&(R=y.g[he],z=ce(R,z,H,le),z>-1&&(ee(R[z]),Array.prototype.splice.call(R,z,1),R.length==0&&(delete y.g[he],y.h--)))):y&&(y=Ve(y))&&(R=y.g[R.toString()],y=-1,R&&(y=ce(R,z,H,le)),(z=y>-1?R[y]:null)&&De(z))}function De(y){if(typeof y!="number"&&y&&!y.da){var R=y.src;if(R&&R[X])oe(R.i,y);else{var z=y.type,H=y.proxy;R.removeEventListener?R.removeEventListener(z,H,y.capture):R.detachEvent?R.detachEvent(Me(z),H):R.addListener&&R.removeListener&&R.removeListener(H),(z=Ve(R))?(oe(z,y),z.h==0&&(z.src=null,R[me]=null)):ee(y)}}}function Me(y){return y in ge?ge[y]:ge[y]="on"+y}function Be(y,R){if(y.da)y=!0;else{R=new Z(R,this);const z=y.listener,H=y.ha||y.src;y.fa&&De(y),y=z.call(H,R)}return y}function Ve(y){return y=y[me],y instanceof K?y:null}var Se="__closure_events_fn_"+(Math.random()*1e9>>>0);function ze(y){return typeof y=="function"?y:(y[Se]||(y[Se]=function(R){return y.handleEvent(R)}),y[Se])}function Ie(){j.call(this),this.i=new K(this),this.M=this,this.G=null}g(Ie,j),Ie.prototype[X]=!0,Ie.prototype.removeEventListener=function(y,R,z,H){Ae(this,y,R,z,H)};function Le(y,R){var z,H=y.G;if(H)for(z=[];H;H=H.G)z.push(H);if(y=y.M,H=R.type||R,typeof R=="string")R=new L(R,y);else if(R instanceof L)R.target=R.target||y;else{var le=R;R=new L(H,y),J(R,le)}le=!0;let he,ke;if(z)for(ke=z.length-1;ke>=0;ke--)he=R.g=z[ke],le=st(he,H,!0,R)&&le;if(he=R.g=y,le=st(he,H,!0,R)&&le,le=st(he,H,!1,R)&&le,z)for(ke=0;ke<z.length;ke++)he=R.g=z[ke],le=st(he,H,!1,R)&&le}Ie.prototype.N=function(){if(Ie.Z.N.call(this),this.i){var y=this.i;for(const R in y.g){const z=y.g[R];for(let H=0;H<z.length;H++)ee(z[H]);delete y.g[R],y.h--}}this.G=null},Ie.prototype.J=function(y,R,z,H){return this.i.add(String(y),R,!1,z,H)},Ie.prototype.K=function(y,R,z,H){return this.i.add(String(y),R,!0,z,H)};function st(y,R,z,H){if(R=y.i.g[String(R)],!R)return!0;R=R.concat();let le=!0;for(let he=0;he<R.length;++he){const ke=R[he];if(ke&&!ke.da&&ke.capture==z){const ot=ke.listener,mn=ke.ha||ke.src;ke.fa&&oe(y.i,ke),le=ot.call(mn,H)!==!1&&le}}return le&&!H.defaultPrevented}function wt(y,R){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=d(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:o.setTimeout(y,R||0)}function Qe(y){y.g=wt(()=>{y.g=null,y.i&&(y.i=!1,Qe(y))},y.l);const R=y.h;y.h=null,y.m.apply(null,R)}class ut extends j{constructor(R,z){super(),this.m=R,this.l=z,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:Qe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rt(y){j.call(this),this.h=y,this.g={}}g(Rt,j);var cn=[];function It(y){ie(y.g,function(R,z){this.g.hasOwnProperty(z)&&De(R)},y),y.g={}}Rt.prototype.N=function(){Rt.Z.N.call(this),It(this)},Rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=o.JSON.stringify,Br=o.JSON.parse,na=class{stringify(y){return o.JSON.stringify(y,void 0)}parse(y){return o.JSON.parse(y,void 0)}};function Fa(){}function Ns(){}var Ur={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Sn(){L.call(this,"d")}g(Sn,L);function ar(){L.call(this,"c")}g(ar,L);var tn={},sc=null;function Is(){return sc=sc||new Ie}tn.Ia="serverreachability";function Ms(y){L.call(this,tn.Ia,y)}g(Ms,L);function ft(y){const R=Is();Le(R,new Ms(R))}tn.STAT_EVENT="statevent";function nn(y,R){L.call(this,tn.STAT_EVENT,y),this.stat=R}g(nn,L);function rn(y){const R=Is();Le(R,new nn(R,y))}tn.Ja="timingevent";function Fr(y,R){L.call(this,tn.Ja,y),this.size=R}g(Fr,L);function ni(y,R){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){y()},R)}function pr(){this.g=!0}pr.prototype.ua=function(){this.g=!1};function K0(y,R,z,H,le,he){y.info(function(){if(y.g)if(he){var ke="",ot=he.split("&");for(let Dt=0;Dt<ot.length;Dt++){var mn=ot[Dt].split("=");if(mn.length>1){const Qt=mn[0];mn=mn[1];const si=Qt.split("_");ke=si.length>=2&&si[1]=="type"?ke+(Qt+"="+mn+"&"):ke+(Qt+"=redacted&")}}}else ke=null;else ke=he;return"XMLHTTP REQ ("+H+") [attempt "+le+"]: "+R+`
`+z+`
`+ke})}function Gh(y,R,z,H,le,he,ke){y.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+le+"]: "+R+`
`+z+`
`+he+" "+ke})}function ra(y,R,z,H){y.info(function(){return"XMLHTTP TEXT ("+R+"): "+Q0(y,z)+(H?" "+H:"")})}function el(y,R){y.info(function(){return"TIMEOUT: "+R})}pr.prototype.info=function(){};function Q0(y,R){if(!y.g)return R;if(!R)return null;try{const he=JSON.parse(R);if(he){for(y=0;y<he.length;y++)if(Array.isArray(he[y])){var z=he[y];if(!(z.length<2)){var H=z[1];if(Array.isArray(H)&&!(H.length<1)){var le=H[0];if(le!="noop"&&le!="stop"&&le!="close")for(let ke=1;ke<H.length;ke++)H[ke]=""}}}}return wn(he)}catch{return R}}var tl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},nd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rd;function nl(){}g(nl,Fa),nl.prototype.g=function(){return new XMLHttpRequest},rd=new nl;function Ga(y){return encodeURIComponent(String(y))}function $h(y){var R=1;y=y.split(":");const z=[];for(;R>0&&y.length;)z.push(y.shift()),R--;return y.length&&z.push(y.join(":")),z}function Ni(y,R,z,H){this.j=y,this.i=R,this.l=z,this.S=H||1,this.V=new Rt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ii}function Ii(){this.i=null,this.g="",this.h=!1}var En={},$n={};function ia(y,R,z){y.M=1,y.A=rl(An(R)),y.u=z,y.R=!0,oc(y,null)}function oc(y,R){y.F=Date.now(),aa(y),y.B=An(y.A);var z=y.B,H=y.S;Array.isArray(H)||(H=[String(H)]),dc(z.i,"t",H),y.C=0,z=y.j.L,y.h=new Ii,y.g=ap(y.j,z?R:null,!y.u),y.P>0&&(y.O=new ut(d(y.Y,y,y.g),y.P)),R=y.V,z=y.g,H=y.ba;var le="readystatechange";Array.isArray(le)||(le&&(cn[0]=le.toString()),le=cn);for(let he=0;he<le.length;he++){const ke=Te(z,le[he],H||R.handleEvent,!1,R.h||R);if(!ke)break;R.g[ke.key]=ke}R=y.J?F(y.J):{},y.u?(y.v||(y.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,R)):(y.v="GET",y.g.ea(y.B,y.v,null,R)),ft(),K0(y.i,y.v,y.B,y.l,y.S,y.u)}Ni.prototype.ba=function(y){y=y.target;const R=this.O;R&&Pi(y)==3?R.j():this.Y(y)},Ni.prototype.Y=function(y){try{if(y==this.g)e:{const ot=Pi(this.g),mn=this.g.ya(),Dt=this.g.ca();if(!(ot<3)&&(ot!=3||this.g&&(this.h.h||this.g.la()||Xn(this.g)))){this.K||ot!=4||mn==7||(mn==8||Dt<=0?ft(3):ft(2)),sa(this);var R=this.g.ca();this.X=R;var z=Z0(this);if(this.o=R==200,Gh(this.i,this.v,this.B,this.l,this.S,ot,R),this.o){if(this.U&&!this.L){t:{if(this.g){var H,le=this.g;if((H=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(H)){var he=H;break t}}he=null}if(y=he)ra(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,oa(this,y);else{this.o=!1,this.m=3,rn(12),Gr(this),ri(this);break e}}if(this.R){y=!0;let Qt;for(;!this.K&&this.C<z.length;)if(Qt=qh(this,z),Qt==$n){ot==4&&(this.m=4,rn(14),y=!1),ra(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==En){this.m=4,rn(15),ra(this.i,this.l,z,"[Invalid Chunk]"),y=!1;break}else ra(this.i,this.l,Qt,null),oa(this,Qt);if(Hh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||z.length!=0||this.h.h||(this.m=1,rn(16),y=!1),this.o=this.o&&y,!y)ra(this.i,this.l,z,"[Invalid Chunked Response]"),Gr(this),ri(this);else if(z.length>0&&!this.W){this.W=!0;var ke=this.j;ke.g==this&&ke.aa&&!ke.P&&(ke.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),yd(ke),ke.P=!0,rn(11))}}else ra(this.i,this.l,z,null),oa(this,z);ot==4&&Gr(this),this.o&&!this.K&&(ot==4?tp(this.j,this):(this.o=!1,aa(this)))}else Ha(this.g),R==400&&z.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),Gr(this),ri(this)}}}catch{}finally{}};function Z0(y){if(!Hh(y))return y.g.la();const R=Xn(y.g);if(R==="")return"";let z="";const H=R.length,le=Pi(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return Gr(y),ri(y),"";y.h.i=new o.TextDecoder}for(let he=0;he<H;he++)y.h.h=!0,z+=y.h.i.decode(R[he],{stream:!(le&&he==H-1)});return R.length=0,y.h.g+=z,y.C=0,y.h.g}function Hh(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function qh(y,R){var z=y.C,H=R.indexOf(`
`,z);return H==-1?$n:(z=Number(R.substring(z,H)),isNaN(z)?En:(H+=1,H+z>R.length?$n:(R=R.slice(H,H+z),y.C=H+z,R)))}Ni.prototype.cancel=function(){this.K=!0,Gr(this)};function aa(y){y.T=Date.now()+y.H,lc(y,y.H)}function lc(y,R){if(y.D!=null)throw Error("WatchDog timer not null");y.D=ni(d(y.aa,y),R)}function sa(y){y.D&&(o.clearTimeout(y.D),y.D=null)}Ni.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(el(this.i,this.B),this.M!=2&&(ft(),rn(17)),Gr(this),this.m=2,ri(this)):lc(this,this.T-y)};function ri(y){y.j.I==0||y.K||tp(y.j,y)}function Gr(y){sa(y);var R=y.O;R&&typeof R.dispose=="function"&&R.dispose(),y.O=null,It(y.V),y.g&&(R=y.g,y.g=null,R.abort(),R.dispose())}function oa(y,R){try{var z=y.j;if(z.I!=0&&(z.g==y||ca(z.h,y))){if(!y.L&&ca(z.h,y)&&z.I==3){try{var H=z.Ba.g.parse(R)}catch{H=null}if(Array.isArray(H)&&H.length==3){var le=H;if(le[0]==0){e:if(!z.v){if(z.g)if(z.g.F+3e3<y.F)mc(z),Us(z);else break e;ul(z),rn(18)}}else z.xa=le[1],0<z.xa-z.K&&le[2]<37500&&z.F&&z.A==0&&!z.C&&(z.C=ni(d(z.Va,z),6e3));la(z.h)<=1&&z.ta&&(z.ta=void 0)}else ga(z,11)}else if((y.L||z.g==y)&&mc(z),!O(R))for(le=z.Ba.g.parse(R),R=0;R<le.length;R++){let Dt=le[R];const Qt=Dt[0];if(!(Qt<=z.K))if(z.K=Qt,Dt=Dt[1],z.I==2)if(Dt[0]=="c"){z.M=Dt[1],z.ba=Dt[2];const si=Dt[3];si!=null&&(z.ka=si,z.j.info("VER="+z.ka));const ma=Dt[4];ma!=null&&(z.za=ma,z.j.info("SVER="+z.za));const ji=Dt[5];ji!=null&&typeof ji=="number"&&ji>0&&(H=1.5*ji,z.O=H,z.j.info("backChannelRequestTimeoutMs_="+H)),H=z;const Vi=y.g;if(Vi){const dl=Vi.g?Vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dl){var he=H.h;he.g||dl.indexOf("spdy")==-1&&dl.indexOf("quic")==-1&&dl.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(sd(he,he.h),he.h=null))}if(H.G){const vc=Vi.g?Vi.g.getResponseHeader("X-HTTP-Session-Id"):null;vc&&(H.wa=vc,Ot(H.J,H.G,vc))}}z.I=3,z.l&&z.l.ra(),z.aa&&(z.T=Date.now()-y.F,z.j.info("Handshake RTT: "+z.T+"ms")),H=z;var ke=y;if(H.na=ip(H,H.L?H.ba:null,H.W),ke.L){od(H.h,ke);var ot=ke,mn=H.O;mn&&(ot.H=mn),ot.D&&(sa(ot),aa(ot)),H.g=ke}else Jh(H);z.i.length>0&&pa(z)}else Dt[0]!="stop"&&Dt[0]!="close"||ga(z,7);else z.I==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?ga(z,7):md(z):Dt[0]!="noop"&&z.l&&z.l.qa(Dt),z.A=0)}}ft(4)}catch{}}var Tn=class{constructor(y,R){this.g=y,this.map=R}};function id(y){this.l=y||10,o.PerformanceNavigationTiming?(y=o.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ad(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function la(y){return y.h?1:y.g?y.g.size:0}function ca(y,R){return y.h?y.h==R:y.g?y.g.has(R):!1}function sd(y,R){y.g?y.g.add(R):y.h=R}function od(y,R){y.h&&y.h==R?y.h=null:y.g&&y.g.has(R)&&y.g.delete(R)}id.prototype.cancel=function(){if(this.i=ld(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function ld(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let R=y.i;for(const z of y.g.values())R=R.concat(z.G);return R}return b(y.i)}var Yh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cc(y,R){if(y){y=y.split("&");for(let z=0;z<y.length;z++){const H=y[z].indexOf("=");let le,he=null;H>=0?(le=y[z].substring(0,H),he=y[z].substring(H+1)):le=y[z],R(le,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}}function $r(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;y instanceof $r?(this.l=y.l,Hn(this,y.j),this.o=y.o,this.g=y.g,Os(this,y.u),this.h=y.h,cd(this,Qh(y.i)),this.m=y.m):y&&(R=String(y).match(Yh))?(this.l=!1,Hn(this,R[1]||"",!0),this.o=ua(R[2]||""),this.g=ua(R[3]||"",!0),Os(this,R[4]),this.h=ua(R[5]||"",!0),cd(this,R[6]||"",!0),this.m=ua(R[7]||"")):(this.l=!1,this.i=new js(null,this.l))}$r.prototype.toString=function(){const y=[];var R=this.j;R&&y.push(il(R,uc,!0),":");var z=this.g;return(z||R=="file")&&(y.push("//"),(R=this.o)&&y.push(il(R,uc,!0),"@"),y.push(Ga(z).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),z=this.u,z!=null&&y.push(":",String(z))),(z=this.h)&&(this.g&&z.charAt(0)!="/"&&y.push("/"),y.push(il(z,z.charAt(0)=="/"?ud:Xh,!0))),(z=this.i.toString())&&y.push("?",z),(z=this.m)&&y.push("#",il(z,Wh)),y.join("")},$r.prototype.resolve=function(y){const R=An(this);let z=!!y.j;z?Hn(R,y.j):z=!!y.o,z?R.o=y.o:z=!!y.g,z?R.g=y.g:z=y.u!=null;var H=y.h;if(z)Os(R,y.u);else if(z=!!y.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var le=R.h.lastIndexOf("/");le!=-1&&(H=R.h.slice(0,le+1)+H)}if(le=H,le==".."||le==".")H="";else if(le.indexOf("./")!=-1||le.indexOf("/.")!=-1){H=le.lastIndexOf("/",0)==0,le=le.split("/");const he=[];for(let ke=0;ke<le.length;){const ot=le[ke++];ot=="."?H&&ke==le.length&&he.push(""):ot==".."?((he.length>1||he.length==1&&he[0]!="")&&he.pop(),H&&ke==le.length&&he.push("")):(he.push(ot),H=!0)}H=he.join("/")}else H=le}return z?R.h=H:z=y.i.toString()!=="",z?cd(R,Qh(y.i)):z=!!y.m,z&&(R.m=y.m),R};function An(y){return new $r(y)}function Hn(y,R,z){y.j=z?ua(R,!0):R,y.j&&(y.j=y.j.replace(/:$/,""))}function Os(y,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);y.u=R}else y.u=null}function cd(y,R,z){R instanceof js?(y.i=R,fc(y.i,y.l)):(z||(R=il(R,Ps)),y.i=new js(R,y.l))}function Ot(y,R,z){y.i.set(R,z)}function rl(y){return Ot(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function ua(y,R){return y?R?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function il(y,R,z){return typeof y=="string"?(y=encodeURI(y).replace(R,Tr),z&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Tr(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var uc=/[#\/\?@]/g,Xh=/[#\?:]/g,ud=/[#\?]/g,Ps=/[#\?@]/g,Wh=/#/g;function js(y,R){this.h=this.g=null,this.i=y||null,this.j=!!R}function Ar(y){y.g||(y.g=new Map,y.h=0,y.i&&cc(y.i,function(R,z){y.add(decodeURIComponent(R.replace(/\+/g," ")),z)}))}t=js.prototype,t.add=function(y,R){Ar(this),this.i=null,y=Vs(this,y);let z=this.g.get(y);return z||this.g.set(y,z=[]),z.push(R),this.h+=1,this};function Kh(y,R){Ar(y),R=Vs(y,R),y.g.has(R)&&(y.i=null,y.h-=y.g.get(R).length,y.g.delete(R))}function dd(y,R){return Ar(y),R=Vs(y,R),y.g.has(R)}t.forEach=function(y,R){Ar(this),this.g.forEach(function(z,H){z.forEach(function(le){y.call(R,le,H,this)},this)},this)};function fd(y,R){Ar(y);let z=[];if(typeof R=="string")dd(y,R)&&(z=z.concat(y.g.get(Vs(y,R))));else for(y=Array.from(y.g.values()),R=0;R<y.length;R++)z=z.concat(y[R]);return z}t.set=function(y,R){return Ar(this),this.i=null,y=Vs(this,y),dd(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[R]),this.h+=1,this},t.get=function(y,R){return y?(y=fd(this,y),y.length>0?String(y[0]):R):R};function dc(y,R,z){Kh(y,R),z.length>0&&(y.i=null,y.g.set(Vs(y,R),b(z)),y.h+=z.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],R=Array.from(this.g.keys());for(let H=0;H<R.length;H++){var z=R[H];const le=Ga(z);z=fd(this,z);for(let he=0;he<z.length;he++){let ke=le;z[he]!==""&&(ke+="="+Ga(z[he])),y.push(ke)}}return this.i=y.join("&")};function Qh(y){const R=new js;return R.i=y.i,y.g&&(R.g=new Map(y.g),R.h=y.h),R}function Vs(y,R){return R=String(R),y.j&&(R=R.toLowerCase()),R}function fc(y,R){R&&!y.j&&(Ar(y),y.i=null,y.g.forEach(function(z,H){const le=H.toLowerCase();H!=le&&(Kh(this,H),dc(this,le,z))},y)),y.j=R}function Mi(y,R){const z=new pr;if(o.Image){const H=new Image;H.onload=h(ii,z,"TestLoadImage: loaded",!0,R,H),H.onerror=h(ii,z,"TestLoadImage: error",!1,R,H),H.onabort=h(ii,z,"TestLoadImage: abort",!1,R,H),H.ontimeout=h(ii,z,"TestLoadImage: timeout",!1,R,H),o.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=y}else R(!1)}function hd(y,R){const z=new pr,H=new AbortController,le=setTimeout(()=>{H.abort(),ii(z,"TestPingServer: timeout",!1,R)},1e4);fetch(y,{signal:H.signal}).then(he=>{clearTimeout(le),he.ok?ii(z,"TestPingServer: ok",!0,R):ii(z,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(le),ii(z,"TestPingServer: error",!1,R)})}function ii(y,R,z,H,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),H(z)}catch{}}function zs(){this.g=new na}function da(y){this.i=y.Sb||null,this.h=y.ab||!1}g(da,Fa),da.prototype.g=function(){return new al(this.i,this.h)};function al(y,R){Ie.call(this),this.H=y,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(al,Ie),t=al.prototype,t.open=function(y,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=R,this.readyState=1,Oi(this)},t.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(R.body=y),(this.H||o).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ls(this)),this.readyState=0},t.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;hc(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function hc(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}t.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var R=y.value?y.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!y.done}))&&(this.response=this.responseText+=R)}y.done?Ls(this):Oi(this),this.readyState==3&&hc(this)}},t.Oa=function(y){this.g&&(this.response=this.responseText=y,Ls(this))},t.Na=function(y){this.g&&(this.response=y,Ls(this))},t.ga=function(){this.g&&Ls(this)};function Ls(y){y.readyState=4,y.l=null,y.j=null,y.B=null,Oi(y)}t.setRequestHeader=function(y,R){this.A.append(y,R)},t.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],R=this.h.entries();for(var z=R.next();!z.done;)z=z.value,y.push(z[0]+": "+z[1]),z=R.next();return y.join(`\r
`)};function Oi(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(al.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function ai(y){let R="";return ie(y,function(z,H){R+=H,R+=":",R+=z,R+=`\r
`}),R}function sl(y,R,z){e:{for(H in z){var H=!1;break e}H=!0}H||(z=ai(z),typeof y=="string"?z!=null&&Ga(z):Ot(y,R,z))}function zt(y){Ie.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(zt,Ie);var fa=/^https?$/i,pd=["POST","PUT"];t=zt.prototype,t.Fa=function(y){this.H=y},t.ea=function(y,R,z,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);R=R?R.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rd.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(R,String(y),!0),this.B=!1}catch(he){ol(this,he);return}if(y=z||"",z=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var le in H)z.set(le,H[le]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const he of H.keys())z.set(he,H.get(he));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(z.keys()).find(he=>he.toLowerCase()=="content-type"),le=o.FormData&&y instanceof o.FormData,!(Array.prototype.indexOf.call(pd,R,void 0)>=0)||H||le||z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,ke]of z)this.g.setRequestHeader(he,ke);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(he){ol(this,he)}};function ol(y,R){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=R,y.o=5,gd(y),$a(y)}function gd(y){y.A||(y.A=!0,Le(y,"complete"),Le(y,"error"))}t.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,Le(this,"complete"),Le(this,"abort"),$a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$a(this,!0)),zt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ll(this):this.Xa())},t.Xa=function(){ll(this)};function ll(y){if(y.h&&typeof a<"u"){if(y.v&&Pi(y)==4)setTimeout(y.Ca.bind(y),0);else if(Le(y,"readystatechange"),Pi(y)==4){y.h=!1;try{const he=y.ca();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var z;if(!(z=R)){var H;if(H=he===0){let ke=String(y.D).match(Yh)[1]||null;!ke&&o.self&&o.self.location&&(ke=o.self.location.protocol.slice(0,-1)),H=!fa.test(ke?ke.toLowerCase():"")}z=H}if(z)Le(y,"complete"),Le(y,"success");else{y.o=6;try{var le=Pi(y)>2?y.g.statusText:""}catch{le=""}y.l=le+" ["+y.ca()+"]",gd(y)}}finally{$a(y)}}}}function $a(y,R){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const z=y.g;y.g=null,R||Le(y,"ready");try{z.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Pi(y){return y.g?y.g.readyState:0}t.ca=function(){try{return Pi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(y){if(this.g){var R=this.g.responseText;return y&&R.indexOf(y)==0&&(R=R.substring(y.length)),Br(R)}};function Xn(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Ha(y){const R={};y=(y.g&&Pi(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<y.length;H++){if(O(y[H]))continue;var z=$h(y[H]);const le=z[0];if(z=z[1],typeof z!="string")continue;z=z.trim();const he=R[le]||[];R[le]=he,he.push(z)}$(R,function(H){return H.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ha(y,R,z){return z&&z.internalChannelParams&&z.internalChannelParams[y]||R}function Bs(y){this.za=0,this.i=[],this.j=new pr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ha("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ha("baseRetryDelayMs",5e3,y),this.Za=ha("retryDelaySeedMs",1e4,y),this.Ta=ha("forwardChannelMaxRetries",2,y),this.va=ha("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new id(y&&y.concurrentRequestLimit),this.Ba=new zs,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Bs.prototype,t.ka=8,t.I=1,t.connect=function(y,R,z,H){rn(0),this.W=y,this.H=R||{},z&&H!==void 0&&(this.H.OSID=z,this.H.OAID=H),this.F=this.X,this.J=ip(this,null,this.W),pa(this)};function md(y){if(pc(y),y.I==3){var R=y.V++,z=An(y.J);if(Ot(z,"SID",y.M),Ot(z,"RID",R),Ot(z,"TYPE","terminate"),cl(y,z),R=new Ni(y,y.j,R),R.M=2,R.A=rl(An(z)),z=!1,o.navigator&&o.navigator.sendBeacon)try{z=o.navigator.sendBeacon(R.A.toString(),"")}catch{}!z&&o.Image&&(new Image().src=R.A,z=!0),z||(R.g=ap(R.j,null),R.g.ea(R.A)),R.F=Date.now(),aa(R)}rp(y)}function Us(y){y.g&&(yd(y),y.g.cancel(),y.g=null)}function pc(y){Us(y),y.v&&(o.clearTimeout(y.v),y.v=null),mc(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&o.clearTimeout(y.m),y.m=null)}function pa(y){if(!ad(y.h)&&!y.m){y.m=!0;var R=y.Ea;P||k(),M||(P(),M=!0),A.add(R,y),y.D=0}}function gc(y,R){return la(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=R.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=ni(d(y.Ea,y,R),np(y,y.D)),y.D++,!0)}t.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const le=new Ni(this,this.j,y);let he=this.o;if(this.U&&(he?(he=F(he),J(he,this.U)):he=this.U),this.u!==null||this.R||(le.J=he,he=null),this.S)e:{for(var R=0,z=0;z<this.i.length;z++){t:{var H=this.i[z];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(R+=H,R>4096){R=z;break e}if(R===4096||z===this.i.length-1){R=z+1;break e}}R=1e3}else R=1e3;R=Zh(this,le,R),z=An(this.J),Ot(z,"RID",y),Ot(z,"CVER",22),this.G&&Ot(z,"X-HTTP-Session-Id",this.G),cl(this,z),he&&(this.R?R="headers="+Ga(ai(he))+"&"+R:this.u&&sl(z,this.u,he)),sd(this.h,le),this.Ra&&Ot(z,"TYPE","init"),this.S?(Ot(z,"$req",R),Ot(z,"SID","null"),le.U=!0,ia(le,z,null)):ia(le,z,R),this.I=2}}else this.I==3&&(y?vd(this,y):this.i.length==0||ad(this.h)||vd(this))};function vd(y,R){var z;R?z=R.l:z=y.V++;const H=An(y.J);Ot(H,"SID",y.M),Ot(H,"RID",z),Ot(H,"AID",y.K),cl(y,H),y.u&&y.o&&sl(H,y.u,y.o),z=new Ni(y,y.j,z,y.D+1),y.u===null&&(z.J=y.o),R&&(y.i=R.G.concat(y.i)),R=Zh(y,z,1e3),z.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),sd(y.h,z),ia(z,H,R)}function cl(y,R){y.H&&ie(y.H,function(z,H){Ot(R,H,z)}),y.l&&ie({},function(z,H){Ot(R,H,z)})}function Zh(y,R,z){z=Math.min(y.i.length,z);const H=y.l?d(y.l.Ka,y.l,y):null;e:{var le=y.i;let ot=-1;for(;;){const mn=["count="+z];ot==-1?z>0?(ot=le[0].g,mn.push("ofs="+ot)):ot=0:mn.push("ofs="+ot);let Dt=!0;for(let Qt=0;Qt<z;Qt++){var he=le[Qt].g;const si=le[Qt].map;if(he-=ot,he<0)ot=Math.max(0,le[Qt].g-100),Dt=!1;else try{he="req"+he+"_"||"";try{var ke=si instanceof Map?si:Object.entries(si);for(const[ma,ji]of ke){let Vi=ji;c(ji)&&(Vi=wn(ji)),mn.push(he+ma+"="+encodeURIComponent(Vi))}}catch(ma){throw mn.push(he+"type="+encodeURIComponent("_badmap")),ma}}catch{H&&H(si)}}if(Dt){ke=mn.join("&");break e}}ke=void 0}return y=y.i.splice(0,z),R.G=y,ke}function Jh(y){if(!y.g&&!y.v){y.Y=1;var R=y.Da;P||k(),M||(P(),M=!0),A.add(R,y),y.A=0}}function ul(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=ni(d(y.Da,y),np(y,y.A)),y.A++,!0)}t.Da=function(){if(this.v=null,ep(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=ni(d(this.Wa,this),y)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),Us(this),ep(this))};function yd(y){y.B!=null&&(o.clearTimeout(y.B),y.B=null)}function ep(y){y.g=new Ni(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var R=An(y.na);Ot(R,"RID","rpc"),Ot(R,"SID",y.M),Ot(R,"AID",y.K),Ot(R,"CI",y.F?"0":"1"),!y.F&&y.ia&&Ot(R,"TO",y.ia),Ot(R,"TYPE","xmlhttp"),cl(y,R),y.u&&y.o&&sl(R,y.u,y.o),y.O&&(y.g.H=y.O);var z=y.g;y=y.ba,z.M=1,z.A=rl(An(R)),z.u=null,z.R=!0,oc(z,y)}t.Va=function(){this.C!=null&&(this.C=null,Us(this),ul(this),rn(19))};function mc(y){y.C!=null&&(o.clearTimeout(y.C),y.C=null)}function tp(y,R){var z=null;if(y.g==R){mc(y),yd(y),y.g=null;var H=2}else if(ca(y.h,R))z=R.G,od(y.h,R),H=1;else return;if(y.I!=0){if(R.o)if(H==1){z=R.u?R.u.length:0,R=Date.now()-R.F;var le=y.D;H=Is(),Le(H,new Fr(H,z)),pa(y)}else Jh(y);else if(le=R.m,le==3||le==0&&R.X>0||!(H==1&&gc(y,R)||H==2&&ul(y)))switch(z&&z.length>0&&(R=y.h,R.i=R.i.concat(z)),le){case 1:ga(y,5);break;case 4:ga(y,10);break;case 3:ga(y,6);break;default:ga(y,2)}}}function np(y,R){let z=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(z*=2),z*R}function ga(y,R){if(y.j.info("Error code "+R),R==2){var z=d(y.bb,y),H=y.Ua;const le=!H;H=new $r(H||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Hn(H,"https"),rl(H),le?Mi(H.toString(),z):hd(H.toString(),z)}else rn(2);y.I=0,y.l&&y.l.pa(R),rp(y),pc(y)}t.bb=function(y){y?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function rp(y){if(y.I=0,y.ja=[],y.l){const R=ld(y.h);(R.length!=0||y.i.length!=0)&&(_(y.ja,R),_(y.ja,y.i),y.h.i.length=0,b(y.i),y.i.length=0),y.l.oa()}}function ip(y,R,z){var H=z instanceof $r?An(z):new $r(z);if(H.g!="")R&&(H.g=R+"."+H.g),Os(H,H.u);else{var le=o.location;H=le.protocol,R=R?R+"."+le.hostname:le.hostname,le=+le.port;const he=new $r(null);H&&Hn(he,H),R&&(he.g=R),le&&Os(he,le),z&&(he.h=z),H=he}return z=y.G,R=y.wa,z&&R&&Ot(H,z,R),Ot(H,"VER",y.ka),cl(y,H),H}function ap(y,R,z){if(R&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=y.Aa&&!y.ma?new zt(new da({ab:z})):new zt(y.ma),R.Fa(y.L),R}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sp(){}t=sp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Fs(){}Fs.prototype.g=function(y,R){return new gr(y,R)};function gr(y,R){Ie.call(this),this.g=new Bs(R),this.l=y,this.h=R&&R.messageUrlParams||null,y=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(y?y["X-WebChannel-Content-Type"]=R.messageContentType:y={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(y?y["X-WebChannel-Client-Profile"]=R.sa:y={"X-WebChannel-Client-Profile":R.sa}),this.g.U=y,(y=R&&R.Qb)&&!O(y)&&(this.g.u=y),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!O(R)&&(this.g.G=R,y=this.h,y!==null&&R in y&&(y=this.h,R in y&&delete y[R])),this.j=new qa(this)}g(gr,Ie),gr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gr.prototype.close=function(){md(this.g)},gr.prototype.o=function(y){var R=this.g;if(typeof y=="string"){var z={};z.__data__=y,y=z}else this.v&&(z={},z.__data__=wn(y),y=z);R.i.push(new Tn(R.Ya++,y)),R.I==3&&pa(R)},gr.prototype.N=function(){this.g.l=null,delete this.j,md(this.g),delete this.g,gr.Z.N.call(this)};function op(y){Sn.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var R=y.__sm__;if(R){e:{for(const z in R){y=z;break e}y=void 0}(this.i=y)&&(y=this.i,R=R!==null&&y in R?R[y]:void 0),this.data=R}else this.data=y}g(op,Sn);function lp(){ar.call(this),this.status=1}g(lp,ar);function qa(y){this.g=y}g(qa,sp),qa.prototype.ra=function(){Le(this.g,"a")},qa.prototype.qa=function(y){Le(this.g,new op(y))},qa.prototype.pa=function(y){Le(this.g,new lp)},qa.prototype.oa=function(){Le(this.g,"b")},Fs.prototype.createWebChannel=Fs.prototype.g,gr.prototype.send=gr.prototype.o,gr.prototype.open=gr.prototype.m,gr.prototype.close=gr.prototype.close,pN=function(){return new Fs},hN=function(){return Is()},fN=tn,dx={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},tl.NO_ERROR=0,tl.TIMEOUT=8,tl.HTTP_ERROR=6,Hg=tl,nd.COMPLETE="complete",dN=nd,Ns.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",Ie.prototype.listen=Ie.prototype.J,uf=Ns,zt.prototype.listenOnce=zt.prototype.K,zt.prototype.getLastError=zt.prototype.Ha,zt.prototype.getLastErrorCode=zt.prototype.ya,zt.prototype.getStatus=zt.prototype.ca,zt.prototype.getResponseJson=zt.prototype.La,zt.prototype.getResponseText=zt.prototype.la,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Fa,uN=zt}).apply(typeof gg<"u"?gg:typeof self<"u"?self:typeof window<"u"?window:{});const AC="@firebase/firestore",CC="4.9.2";class lr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lr.UNAUTHENTICATED=new lr(null),lr.GOOGLE_CREDENTIALS=new lr("google-credentials-uid"),lr.FIRST_PARTY=new lr("first-party-uid"),lr.MOCK_USER=new lr("mock-user");let Uu="12.3.0";const Yl=new R1("@firebase/firestore");function Xc(){return Yl.logLevel}function Oe(t,...e){if(Yl.logLevel<=bt.DEBUG){const n=e.map(Y1);Yl.debug(`Firestore (${Uu}): ${t}`,...n)}}function Ss(t,...e){if(Yl.logLevel<=bt.ERROR){const n=e.map(Y1);Yl.error(`Firestore (${Uu}): ${t}`,...n)}}function xu(t,...e){if(Yl.logLevel<=bt.WARN){const n=e.map(Y1);Yl.warn(`Firestore (${Uu}): ${t}`,...n)}}function Y1(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Ze(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,gN(t,r,n)}function gN(t,e,n){let r=`FIRESTORE (${Uu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ss(r),new Error(r)}function Mt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||gN(e,i,r)}function at(t,e){return t}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Rs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ms{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class mN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class e8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(lr.UNAUTHENTICATED)))}shutdown(){}}class t8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class n8{constructor(e){this.t=e,this.currentUser=lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Mt(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new ms;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ms,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ms)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mt(typeof r.accessToken=="string",31837,{l:r}),new mN(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Mt(e===null||typeof e=="string",2055,{h:e}),new lr(e)}}class r8{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=lr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class i8{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new r8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(lr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a8{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Mt(this.o===void 0,3512);const r=a=>{a.error!=null&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Mt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new kC(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function s8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class X1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=s8(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function xt(t,e){return t<e?-1:t>e?1:0}function fx(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return cb(i)===cb(a)?xt(i,a):cb(i)?1:-1}return xt(t.length,e.length)}const o8=55296,l8=57343;function cb(t){const e=t.charCodeAt(0);return e>=o8&&e<=l8}function _u(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}const RC="__name__";class wa{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ze(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ze(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wa?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=wa.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return xt(e.length,n.length)}static compareSegments(e,n){const r=wa.isNumericId(e),i=wa.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?wa.extractNumericId(e).compare(wa.extractNumericId(n)):fx(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Do.fromString(e.substring(4,e.length-2))}}class Yt extends wa{construct(e,n,r){return new Yt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Yt(n)}static emptyPath(){return new Yt([])}}const c8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends wa{construct(e,n,r){return new nr(e,n,r)}static isValidIdentifier(e){return c8.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===RC}static keyField(){return new nr([RC])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Re(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Re(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Re(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Re(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nr(n)}static emptyPath(){return new nr([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Yt.fromString(e))}static fromName(e){return new qe(Yt.fromString(e).popFirst(5))}static empty(){return new qe(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Yt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Yt(e.slice()))}}function vN(t,e,n){if(!n)throw new Re(be.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function u8(t,e,n,r){if(e===!0&&r===!0)throw new Re(be.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function DC(t){if(!qe.isDocumentKey(t))throw new Re(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function NC(t){if(qe.isDocumentKey(t))throw new Re(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function o0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ze(12329,{type:typeof t})}function wr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Re(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=o0(t);throw new Re(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jn(t,e){const n={typeString:t};return e&&(n.value=e),n}function bh(t,e){if(!yN(t))throw new Re(be.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Re(be.INVALID_ARGUMENT,n);return!0}const IC=-62135596800,MC=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*MC);return new gt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Re(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Re(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<IC)throw new Re(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/MC}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bh(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-IC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:jn("string",gt._jsonSchemaVersion),seconds:jn("number"),nanoseconds:jn("number")};class nt{static fromTimestamp(e){return new nt(e)}static min(){return new nt(new gt(0,0))}static max(){return new nt(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Gf=-1;function d8(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=nt.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new Po(i,qe.empty(),e)}function f8(t){return new Po(t.readTime,t.key,Gf)}class Po{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Po(nt.min(),qe.empty(),Gf)}static max(){return new Po(nt.max(),qe.empty(),Gf)}}function h8(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=qe.comparator(t.documentKey,e.documentKey),n!==0?n:xt(t.largestBatchId,e.largestBatchId))}const p8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Fu(t){if(t.code!==be.FAILED_PRECONDITION||t.message!==p8)throw t;Oe("LocalStore","Unexpectedly lost primary lease")}class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):_e.reject(n)}static resolve(e){return new _e(((n,r)=>{n(e)}))}static reject(e){return new _e(((n,r)=>{r(e)}))}static waitFor(e){return new _e(((n,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&n()}),(u=>r(u)))})),o=!0,a===i&&n()}))}static or(e){let n=_e.resolve(!1);for(const r of e)n=n.next((i=>i?_e.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new _e(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next((h=>{o[d]=h,++c,c===a&&r(o)}),(h=>i(h)))}}))}static doWhile(e,n){return new _e(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}function m8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gu(t){return t.name==="IndexedDbTransactionError"}class l0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}l0.ce=-1;const W1=-1;function c0(t){return t==null}function bm(t){return t===0&&1/t==-1/0}function v8(t){return typeof t=="number"&&Number.isInteger(t)&&!bm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const bN="";function y8(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=OC(e)),e=b8(t.get(n),e);return OC(e)}function b8(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case bN:n+="";break;default:n+=a}}return n}function OC(t){return t+bN+""}function PC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ln{constructor(e,n){this.comparator=e,this.root=n||tr.EMPTY}insert(e,n){return new ln(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tr.BLACK,null,null))}remove(e){return new ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mg(this.root,e,this.comparator,!1)}getReverseIterator(){return new mg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mg(this.root,e,this.comparator,!0)}}class mg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??tr.RED,this.left=i??tr.EMPTY,this.right=a??tr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new tr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return tr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return tr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ze(27949);return e+(this.isRed()?0:1)}}tr.EMPTY=null,tr.RED=!0,tr.BLACK=!1;tr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze(57766)}get value(){throw Ze(16141)}get color(){throw Ze(16727)}get left(){throw Ze(29726)}get right(){throw Ze(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new tr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gn{constructor(e){this.comparator=e,this.data=new ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jC(this.data.getIterator())}getIteratorFrom(e){return new jC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Gn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Gn(this.comparator);return n.data=e,n}}class jC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Jr{constructor(e){this.fields=e,e.sort(nr.comparator)}static empty(){return new Jr([])}unionWith(e){let n=new Gn(nr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _u(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class _N extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ir{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new _N("Invalid base64 string: "+a):a}})(e);return new ir(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new ir(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ir.EMPTY_BYTE_STRING=new ir("");const x8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jo(t){if(Mt(!!t,39018),typeof t=="string"){let e=0;const n=x8.exec(t);if(Mt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xn(t.seconds),nanos:xn(t.nanos)}}function xn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vo(t){return typeof t=="string"?ir.fromBase64String(t):ir.fromUint8Array(t)}const wN="server_timestamp",SN="__type__",EN="__previous_value__",TN="__local_write_time__";function K1(t){return(t?.mapValue?.fields||{})[SN]?.stringValue===wN}function u0(t){const e=t.mapValue.fields[EN];return K1(e)?u0(e):e}function $f(t){const e=jo(t.mapValue.fields[TN].timestampValue);return new gt(e.seconds,e.nanos)}class _8{constructor(e,n,r,i,a,o,c,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const xm="(default)";class Hf{constructor(e,n){this.projectId=e,this.database=n||xm}static empty(){return new Hf("","")}get isDefaultDatabase(){return this.database===xm}isEqual(e){return e instanceof Hf&&e.projectId===this.projectId&&e.database===this.database}}const AN="__type__",w8="__max__",vg={mapValue:{}},CN="__vector__",_m="value";function zo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?K1(t)?4:E8(t)?9007199254740991:S8(t)?10:11:Ze(28295,{value:t})}function Pa(t,e){if(t===e)return!0;const n=zo(t);if(n!==zo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $f(t).isEqual($f(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=jo(i.timestampValue),c=jo(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Vo(i.bytesValue).isEqual(Vo(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return xn(i.geoPointValue.latitude)===xn(a.geoPointValue.latitude)&&xn(i.geoPointValue.longitude)===xn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return xn(i.integerValue)===xn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=xn(i.doubleValue),c=xn(a.doubleValue);return o===c?bm(o)===bm(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return _u(t.arrayValue.values||[],e.arrayValue.values||[],Pa);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(PC(o)!==PC(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Pa(o[u],c[u])))return!1;return!0})(t,e);default:return Ze(52216,{left:t})}}function qf(t,e){return(t.values||[]).find((n=>Pa(n,e)))!==void 0}function wu(t,e){if(t===e)return 0;const n=zo(t),r=zo(e);if(n!==r)return xt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xt(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=xn(a.integerValue||a.doubleValue),u=xn(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return VC(t.timestampValue,e.timestampValue);case 4:return VC($f(t),$f(e));case 5:return fx(t.stringValue,e.stringValue);case 6:return(function(a,o){const c=Vo(a),u=Vo(o);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=xt(c[d],u[d]);if(h!==0)return h}return xt(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=xt(xn(a.latitude),xn(o.latitude));return c!==0?c:xt(xn(a.longitude),xn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return zC(t.arrayValue,e.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},d=c[_m]?.arrayValue,h=u[_m]?.arrayValue,g=xt(d?.values?.length||0,h?.values?.length||0);return g!==0?g:zC(d,h)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===vg.mapValue&&o===vg.mapValue)return 0;if(a===vg.mapValue)return 1;if(o===vg.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=fx(u[g],h[g]);if(m!==0)return m;const b=wu(c[u[g]],d[h[g]]);if(b!==0)return b}return xt(u.length,h.length)})(t.mapValue,e.mapValue);default:throw Ze(23264,{he:n})}}function VC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xt(t,e);const n=jo(t),r=jo(e),i=xt(n.seconds,r.seconds);return i!==0?i:xt(n.nanos,r.nanos)}function zC(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=wu(n[i],r[i]);if(a)return a}return xt(n.length,r.length)}function Su(t){return hx(t)}function hx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=jo(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Vo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return qe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=hx(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${hx(n.fields[o])}`;return i+"}"})(t.mapValue):Ze(61005,{value:t})}function qg(t){switch(zo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=u0(t);return e?16+qg(e):16;case 5:return 2*t.stringValue.length;case 6:return Vo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+qg(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Wo(r.fields,((a,o)=>{i+=a.length+qg(o)})),i})(t.mapValue);default:throw Ze(13486,{value:t})}}function LC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function px(t){return!!t&&"integerValue"in t}function Q1(t){return!!t&&"arrayValue"in t}function BC(t){return!!t&&"nullValue"in t}function UC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yg(t){return!!t&&"mapValue"in t}function S8(t){return(t?.mapValue?.fields||{})[AN]?.stringValue===CN}function _f(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Wo(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=_f(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_f(t.arrayValue.values[n]);return e}return{...t}}function E8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===w8}class Or{constructor(e){this.value=e}static empty(){return new Or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_f(n)}setAll(e){let n=nr.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=_f(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Yg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Yg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wo(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Or(_f(this.value))}}function kN(t){const e=[];return Wo(t.fields,((n,r)=>{const i=new nr([n]);if(Yg(r)){const a=kN(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new Jr(e)}class cr{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new cr(e,0,nt.min(),nt.min(),nt.min(),Or.empty(),0)}static newFoundDocument(e,n,r,i){return new cr(e,1,n,nt.min(),r,i,0)}static newNoDocument(e,n){return new cr(e,2,n,nt.min(),nt.min(),Or.empty(),0)}static newUnknownDocument(e,n){return new cr(e,3,n,nt.min(),nt.min(),Or.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wm{constructor(e,n){this.position=e,this.inclusive=n}}function FC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=qe.comparator(qe.fromName(o.referenceValue),n.key):r=wu(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function GC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pa(t.position[n],e.position[n]))return!1;return!0}class Yf{constructor(e,n="asc"){this.field=e,this.dir=n}}function T8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class RN{}class On extends RN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new C8(e,n,r):n==="array-contains"?new D8(e,r):n==="in"?new N8(e,r):n==="not-in"?new I8(e,r):n==="array-contains-any"?new M8(e,r):new On(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new k8(e,r):new R8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(wu(n,this.value)):n!==null&&zo(this.value)===zo(n)&&this.matchesComparison(wu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ki extends RN{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ki(e,n)}matches(e){return DN(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function DN(t){return t.op==="and"}function NN(t){return A8(t)&&DN(t)}function A8(t){for(const e of t.filters)if(e instanceof Ki)return!1;return!0}function gx(t){if(t instanceof On)return t.field.canonicalString()+t.op.toString()+Su(t.value);if(NN(t))return t.filters.map((e=>gx(e))).join(",");{const e=t.filters.map((n=>gx(n))).join(",");return`${t.op}(${e})`}}function IN(t,e){return t instanceof On?(function(r,i){return i instanceof On&&r.op===i.op&&r.field.isEqual(i.field)&&Pa(r.value,i.value)})(t,e):t instanceof Ki?(function(r,i){return i instanceof Ki&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&IN(o,i.filters[c])),!0):!1})(t,e):void Ze(19439)}function MN(t){return t instanceof On?(function(n){return`${n.field.canonicalString()} ${n.op} ${Su(n.value)}`})(t):t instanceof Ki?(function(n){return n.op.toString()+" {"+n.getFilters().map(MN).join(" ,")+"}"})(t):"Filter"}class C8 extends On{constructor(e,n,r){super(e,n,r),this.key=qe.fromName(r.referenceValue)}matches(e){const n=qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class k8 extends On{constructor(e,n){super(e,"in",n),this.keys=ON("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class R8 extends On{constructor(e,n){super(e,"not-in",n),this.keys=ON("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function ON(t,e){return(e.arrayValue?.values||[]).map((n=>qe.fromName(n.referenceValue)))}class D8 extends On{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Q1(n)&&qf(n.arrayValue,this.value)}}class N8 extends On{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qf(this.value.arrayValue,n)}}class I8 extends On{constructor(e,n){super(e,"not-in",n)}matches(e){if(qf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qf(this.value.arrayValue,n)}}class M8 extends On{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Q1(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>qf(this.value.arrayValue,r)))}}class O8{constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function $C(t,e=null,n=[],r=[],i=null,a=null,o=null){return new O8(t,e,n,r,i,a,o)}function Z1(t){const e=at(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>gx(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),c0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Su(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Su(r))).join(",")),e.Te=n}return e.Te}function J1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!T8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!IN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!GC(t.startAt,e.startAt)&&GC(t.endAt,e.endAt)}function mx(t){return qe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class $u{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function P8(t,e,n,r,i,a,o,c){return new $u(t,e,n,r,i,a,o,c)}function d0(t){return new $u(t)}function HC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PN(t){return t.collectionGroup!==null}function wf(t){const e=at(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Gn(nr.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Yf(a,r))})),n.has(nr.keyField().canonicalString())||e.Ie.push(new Yf(nr.keyField(),r))}return e.Ie}function ka(t){const e=at(t);return e.Ee||(e.Ee=j8(e,wf(t))),e.Ee}function j8(t,e){if(t.limitType==="F")return $C(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Yf(i.field,a)}));const n=t.endAt?new wm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wm(t.startAt.position,t.startAt.inclusive):null;return $C(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function vx(t,e){const n=t.filters.concat([e]);return new $u(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sm(t,e,n){return new $u(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function f0(t,e){return J1(ka(t),ka(e))&&t.limitType===e.limitType}function jN(t){return`${Z1(ka(t))}|lt:${t.limitType}`}function Wc(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>MN(i))).join(", ")}]`),c0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Su(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Su(i))).join(",")),`Target(${r})`})(ka(t))}; limitType=${t.limitType})`}function h0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):qe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of wf(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const d=FC(o,c,u);return o.inclusive?d<=0:d<0})(r.startAt,wf(r),i)||r.endAt&&!(function(o,c,u){const d=FC(o,c,u);return o.inclusive?d>=0:d>0})(r.endAt,wf(r),i))})(t,e)}function V8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function VN(t){return(e,n)=>{let r=!1;for(const i of wf(t)){const a=z8(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function z8(t,e,n){const r=t.field.isKeyField()?qe.comparator(e.key,n.key):(function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?wu(u,d):Ze(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ze(19790,{direction:t.dir})}}class tc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wo(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return xN(this.inner)}size(){return this.innerSize}}const L8=new ln(qe.comparator);function Es(){return L8}const zN=new ln(qe.comparator);function df(...t){let e=zN;for(const n of t)e=e.insert(n.key,n);return e}function LN(t){let e=zN;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Pl(){return Sf()}function BN(){return Sf()}function Sf(){return new tc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const B8=new ln(qe.comparator),U8=new Gn(qe.comparator);function _t(...t){let e=U8;for(const n of t)e=e.add(n);return e}const F8=new Gn(xt);function G8(){return F8}function e_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bm(e)?"-0":e}}function UN(t){return{integerValue:""+t}}function $8(t,e){return v8(e)?UN(e):e_(t,e)}class p0{constructor(){this._=void 0}}function H8(t,e,n){return t instanceof Em?(function(i,a){const o={fields:{[SN]:{stringValue:wN},[TN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&K1(a)&&(a=u0(a)),a&&(o.fields[EN]=a),{mapValue:o}})(n,e):t instanceof Eu?GN(t,e):t instanceof Xf?$N(t,e):(function(i,a){const o=FN(i,a),c=qC(o)+qC(i.Ae);return px(o)&&px(i.Ae)?UN(c):e_(i.serializer,c)})(t,e)}function q8(t,e,n){return t instanceof Eu?GN(t,e):t instanceof Xf?$N(t,e):n}function FN(t,e){return t instanceof Tm?(function(r){return px(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Em extends p0{}class Eu extends p0{constructor(e){super(),this.elements=e}}function GN(t,e){const n=HN(e);for(const r of t.elements)n.some((i=>Pa(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Xf extends p0{constructor(e){super(),this.elements=e}}function $N(t,e){let n=HN(e);for(const r of t.elements)n=n.filter((i=>!Pa(i,r)));return{arrayValue:{values:n}}}class Tm extends p0{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function qC(t){return xn(t.integerValue||t.doubleValue)}function HN(t){return Q1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Y8{constructor(e,n){this.field=e,this.transform=n}}function X8(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Eu&&i instanceof Eu||r instanceof Xf&&i instanceof Xf?_u(r.elements,i.elements,Pa):r instanceof Tm&&i instanceof Tm?Pa(r.Ae,i.Ae):r instanceof Em&&i instanceof Em})(t.transform,e.transform)}class W8{constructor(e,n){this.version=e,this.transformResults=n}}class Sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class g0{}function qN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new m0(t.key,Sr.none()):new xh(t.key,t.data,Sr.none());{const n=t.data,r=Or.empty();let i=new Gn(nr.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Ko(t.key,r,new Jr(i.toArray()),Sr.none())}}function K8(t,e,n){t instanceof xh?(function(i,a,o){const c=i.value.clone(),u=XC(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Ko?(function(i,a,o){if(!Xg(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=XC(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(YN(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Ef(t,e,n,r){return t instanceof xh?(function(a,o,c,u){if(!Xg(a.precondition,o))return c;const d=a.value.clone(),h=WC(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ko?(function(a,o,c,u){if(!Xg(a.precondition,o))return c;const d=WC(a.fieldTransforms,u,o),h=o.data;return h.setAll(YN(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(a,o,c){return Xg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function Q8(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=FN(r.transform,i||null);a!=null&&(n===null&&(n=Or.empty()),n.set(r.field,a))}return n||null}function YC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_u(r,i,((a,o)=>X8(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xh extends g0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ko extends g0{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function YN(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function XC(t,e,n){const r=new Map;Mt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,q8(o,c,n[i]))}return r}function WC(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,H8(a,o,e))}return r}class m0 extends g0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z8 extends g0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class J8{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&K8(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ef(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ef(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=BN();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=qN(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(nt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),_t())}isEqual(e){return this.batchId===e.batchId&&_u(this.mutations,e.mutations,((n,r)=>YC(n,r)))&&_u(this.baseMutations,e.baseMutations,((n,r)=>YC(n,r)))}}class t_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Mt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return B8})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new t_(e,n,r,i)}}class eU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class tU{constructor(e,n){this.count=e,this.unchangedNames=n}}var In,Et;function nU(t){switch(t){case be.OK:return Ze(64938);case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return Ze(15467,{code:t})}}function XN(t){if(t===void 0)return Ss("GRPC error has no .code"),be.UNKNOWN;switch(t){case In.OK:return be.OK;case In.CANCELLED:return be.CANCELLED;case In.UNKNOWN:return be.UNKNOWN;case In.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case In.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case In.INTERNAL:return be.INTERNAL;case In.UNAVAILABLE:return be.UNAVAILABLE;case In.UNAUTHENTICATED:return be.UNAUTHENTICATED;case In.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case In.NOT_FOUND:return be.NOT_FOUND;case In.ALREADY_EXISTS:return be.ALREADY_EXISTS;case In.PERMISSION_DENIED:return be.PERMISSION_DENIED;case In.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case In.ABORTED:return be.ABORTED;case In.OUT_OF_RANGE:return be.OUT_OF_RANGE;case In.UNIMPLEMENTED:return be.UNIMPLEMENTED;case In.DATA_LOSS:return be.DATA_LOSS;default:return Ze(39323,{code:t})}}(Et=In||(In={}))[Et.OK=0]="OK",Et[Et.CANCELLED=1]="CANCELLED",Et[Et.UNKNOWN=2]="UNKNOWN",Et[Et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Et[Et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Et[Et.NOT_FOUND=5]="NOT_FOUND",Et[Et.ALREADY_EXISTS=6]="ALREADY_EXISTS",Et[Et.PERMISSION_DENIED=7]="PERMISSION_DENIED",Et[Et.UNAUTHENTICATED=16]="UNAUTHENTICATED",Et[Et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Et[Et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Et[Et.ABORTED=10]="ABORTED",Et[Et.OUT_OF_RANGE=11]="OUT_OF_RANGE",Et[Et.UNIMPLEMENTED=12]="UNIMPLEMENTED",Et[Et.INTERNAL=13]="INTERNAL",Et[Et.UNAVAILABLE=14]="UNAVAILABLE",Et[Et.DATA_LOSS=15]="DATA_LOSS";function rU(){return new TextEncoder}const iU=new Do([4294967295,4294967295],0);function KC(t){const e=rU().encode(t),n=new cN;return n.update(e),new Uint8Array(n.digest())}function QC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Do([n,r],0),new Do([i,a],0)]}class n_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ff(`Invalid padding: ${n}`);if(r<0)throw new ff(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ff(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ff(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Do.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Do.fromNumber(r)));return i.compare(iU)===1&&(i=new Do([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=KC(e),[r,i]=QC(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new n_(a,i,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=KC(e),[r,i]=QC(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ff extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class v0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,_h.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new v0(nt.min(),i,new ln(xt),Es(),_t())}}class _h{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _h(r,n,_t(),_t(),_t())}}class Wg{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class WN{constructor(e,n){this.targetId=e,this.Ce=n}}class KN{constructor(e,n,r=ir.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ZC{constructor(){this.ve=0,this.Fe=JC(),this.Me=ir.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_t(),n=_t(),r=_t();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ze(38017,{changeType:a})}})),new _h(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=JC()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class aU{constructor(e){this.Ge=e,this.ze=new Map,this.je=Es(),this.Je=yg(),this.He=yg(),this.Ye=new ln(xt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ze(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(mx(a))if(r===0){const o=new qe(a.path);this.et(n,o,cr.newNoDocument(o,nt.min()))}else Mt(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=Vo(r).toUint8Array()}catch(u){if(u instanceof _N)return xu("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new n_(o,i,a)}catch(u){return xu(u instanceof ff?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&mx(c.target)){const u=new qe(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,cr.newNoDocument(u,e))}a.Be&&(n.set(o,a.ke()),a.qe())}}));let r=_t();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new v0(e,n,this.Ye,this.je,r);return this.je=Es(),this.Je=yg(),this.He=yg(),this.Ye=new ln(xt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ZC,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Gn(xt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Gn(xt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ZC),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function yg(){return new ln(qe.comparator)}function JC(){return new ln(qe.comparator)}const sU={asc:"ASCENDING",desc:"DESCENDING"},oU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lU={and:"AND",or:"OR"};class cU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yx(t,e){return t.useProto3Json||c0(e)?e:{value:e}}function Am(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uU(t,e){return Am(t,e.toTimestamp())}function Ra(t){return Mt(!!t,49232),nt.fromTimestamp((function(n){const r=jo(n);return new gt(r.seconds,r.nanos)})(t))}function r_(t,e){return bx(t,e).canonicalString()}function bx(t,e){const n=(function(i){return new Yt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function ZN(t){const e=Yt.fromString(t);return Mt(rI(e),10190,{key:e.toString()}),e}function xx(t,e){return r_(t.databaseId,e.path)}function ub(t,e){const n=ZN(e);if(n.get(1)!==t.databaseId.projectId)throw new Re(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Re(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new qe(eI(n))}function JN(t,e){return r_(t.databaseId,e)}function dU(t){const e=ZN(t);return e.length===4?Yt.emptyPath():eI(e)}function _x(t){return new Yt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eI(t){return Mt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function e2(t,e,n){return{name:xx(t,e),fields:n.value.mapValue.fields}}function fU(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ze(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(d,h){return d.useProto3Json?(Mt(h===void 0||typeof h=="string",58123),ir.fromBase64String(h||"")):(Mt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ir.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const h=d.code===void 0?be.UNKNOWN:XN(d.code);return new Re(h,d.message||"")})(o);n=new KN(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ub(t,r.document.name),a=Ra(r.document.updateTime),o=r.document.createTime?Ra(r.document.createTime):nt.min(),c=new Or({mapValue:{fields:r.document.fields}}),u=cr.newFoundDocument(i,a,o,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Wg(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ub(t,r.document),a=r.readTime?Ra(r.readTime):nt.min(),o=cr.newNoDocument(i,a),c=r.removedTargetIds||[];n=new Wg([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ub(t,r.document),a=r.removedTargetIds||[];n=new Wg([],a,i,null)}else{if(!("filter"in e))return Ze(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new tU(i,a),c=r.targetId;n=new WN(c,o)}}return n}function hU(t,e){let n;if(e instanceof xh)n={update:e2(t,e.key,e.value)};else if(e instanceof m0)n={delete:xx(t,e.key)};else if(e instanceof Ko)n={update:e2(t,e.key,e.data),updateMask:wU(e.fieldMask)};else{if(!(e instanceof Z8))return Ze(16599,{Vt:e.type});n={verify:xx(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof Em)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Eu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Tm)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Ze(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:uU(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ze(27497)})(t,e.precondition)),n}function pU(t,e){return t&&t.length>0?(Mt(e!==void 0,14353),t.map((n=>(function(i,a){let o=i.updateTime?Ra(i.updateTime):Ra(a);return o.isEqual(nt.min())&&(o=Ra(a)),new W8(o,i.transformResults||[])})(n,e)))):[]}function gU(t,e){return{documents:[JN(t,e.path)]}}function mU(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=JN(t,i);const a=(function(d){if(d.length!==0)return nI(Ki.create(d,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const o=(function(d){if(d.length!==0)return d.map((h=>(function(m){return{field:Kc(m.field),direction:bU(m.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=yx(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:i}}function vU(t){let e=dU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Mt(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=(function(g){const m=tI(g);return m instanceof Ki&&NN(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(g){return g.map((m=>(function(_){return new Yf(Qc(_.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(g){let m;return m=typeof g=="object"?g.value:g,c0(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(g){const m=!!g.before,b=g.values||[];return new wm(b,m)})(n.startAt));let d=null;return n.endAt&&(d=(function(g){const m=!g.before,b=g.values||[];return new wm(b,m)})(n.endAt)),P8(e,i,o,a,c,"F",u,d)}function yU(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ze(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tI(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qc(n.unaryFilter.field);return On.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qc(n.unaryFilter.field);return On.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Qc(n.unaryFilter.field);return On.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qc(n.unaryFilter.field);return On.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ze(61313);default:return Ze(60726)}})(t):t.fieldFilter!==void 0?(function(n){return On.create(Qc(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ze(58110);default:return Ze(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ki.create(n.compositeFilter.filters.map((r=>tI(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ze(1026)}})(n.compositeFilter.op))})(t):Ze(30097,{filter:t})}function bU(t){return sU[t]}function xU(t){return oU[t]}function _U(t){return lU[t]}function Kc(t){return{fieldPath:t.canonicalString()}}function Qc(t){return nr.fromServerFormat(t.fieldPath)}function nI(t){return t instanceof On?(function(n){if(n.op==="=="){if(UC(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NAN"}};if(BC(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(UC(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NOT_NAN"}};if(BC(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kc(n.field),op:xU(n.op),value:n.value}}})(t):t instanceof Ki?(function(n){const r=n.getFilters().map((i=>nI(i)));return r.length===1?r[0]:{compositeFilter:{op:_U(n.op),filters:r}}})(t):Ze(54877,{filter:t})}function wU(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function rI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class _o{constructor(e,n,r,i,a=nt.min(),o=nt.min(),c=ir.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new _o(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class SU{constructor(e){this.yt=e}}function EU(t){const e=vU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sm(e,e.limit,"L"):e}class TU{constructor(){this.Cn=new AU}addToCollectionParentIndex(e,n){return this.Cn.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(Po.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(Po.min())}updateCollectionGroup(e,n,r){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class AU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Gn(Yt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gn(Yt.comparator)).toArray()}}const t2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iI=41943040;class Mr{static withCacheSize(e){return new Mr(e,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Mr.DEFAULT_COLLECTION_PERCENTILE=10,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mr.DEFAULT=new Mr(iI,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mr.DISABLED=new Mr(-1,0,0);class Tu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Tu(0)}static cr(){return new Tu(-1)}}const n2="LruGarbageCollector",CU=1048576;function r2([t,e],[n,r]){const i=xt(t,n);return i===0?xt(e,r):i}class kU{constructor(e){this.Ir=e,this.buffer=new Gn(r2),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();r2(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Oe(n2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gu(n)?Oe(n2,"Ignoring IndexedDB error during garbage collection: ",n):await Fu(n)}await this.Vr(3e5)}))}}class DU{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return _e.resolve(l0.ce);const r=new kU(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(t2)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t2):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,o,c,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,n)))).next((g=>(a=g,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(d=Date.now(),Xc()<=bt.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function NU(t,e){return new DU(t,e)}class IU{constructor(){this.changes=new tc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?_e.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class MU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class OU{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Ef(r.mutation,i,Jr.empty(),gt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,_t()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=_t()){const i=Pl();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let o=df();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Pl();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,_t())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,i){let a=Es();const o=Sf(),c=(function(){return Sf()})();return n.forEach(((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Ko)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Ef(h.mutation,d,h.mutation.getFieldMask(),gt.now())):o.set(d.key,Jr.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((d,h)=>o.set(d,h))),n.forEach(((d,h)=>c.set(d,new MU(h,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Sf();let i=new ln(((o,c)=>o-c)),a=_t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||Jr.empty();h=c.applyToLocalView(d,h),r.set(u,h);const g=(i.get(c.batchId)||_t()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,g=BN();h.forEach((m=>{if(!a.has(m)){const b=qN(n.get(m),r.get(m));b!==null&&g.set(m,b),a=a.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return _e.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return qe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):_e.resolve(Pl());let c=Gf,u=a;return o.next((d=>_e.forEach(d,((h,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(h)?_e.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{u=u.insert(h,m)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,u,d,_t()))).next((h=>({batchId:c,changes:LN(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new qe(n)).next((r=>{let i=df();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=df();return this.indexManager.getCollectionParents(e,a).next((c=>_e.forEach(c,(u=>{const d=(function(g,m){return new $u(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((h=>{h.forEach(((g,m)=>{o=o.insert(g,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((o=>{a.forEach(((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,cr.newInvalidDocument(h)))}));let c=df();return o.forEach(((u,d)=>{const h=a.get(u);h!==void 0&&Ef(h.mutation,d,Jr.empty(),gt.now()),h0(n,d)&&(c=c.insert(u,d))})),c}))}}class PU{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return _e.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ra(i.createTime)}})(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:EU(i.bundledQuery),readTime:Ra(i.readTime)}})(n)),_e.resolve()}}class jU{constructor(){this.overlays=new ln(qe.comparator),this.qr=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Pl();return _e.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.St(e,n,a)})),_e.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),_e.resolve()}getOverlaysForCollection(e,n,r){const i=Pl(),a=n.length+1,o=new qe(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return _e.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new ln(((d,h)=>d-h));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=a.get(d.largestBatchId);h===null&&(h=Pl(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=Pl(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,h)=>c.set(d,h))),!(c.size()>=i)););return _e.resolve(c)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new eU(n,r));let a=this.qr.get(n);a===void 0&&(a=_t(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class VU{constructor(){this.sessionToken=ir.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}class i_{constructor(){this.Qr=new Gn(Yn.$r),this.Ur=new Gn(Yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Yn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Yn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new qe(new Yt([])),r=new Yn(n,e),i=new Yn(n,e+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new qe(new Yt([])),r=new Yn(n,e),i=new Yn(n,e+1);let a=_t();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const n=new Yn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Yn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return qe.comparator(e.key,n.key)||xt(e.Yr,n.Yr)}static Kr(e,n){return xt(e.Yr,n.Yr)||qe.comparator(e.key,n.key)}}class zU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Gn(Yn.$r)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new J8(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new Yn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return _e.resolve(o)}lookupMutationBatch(e,n){return _e.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return _e.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?W1:this.tr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Yn(n,0),i=new Yn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),_e.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Gn(xt);return n.forEach((i=>{const a=new Yn(i,0),o=new Yn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),_e.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;qe.isDocumentKey(a)||(a=a.child(""));const o=new Yn(new qe(a),0);let c=new Gn(xt);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)}),o),_e.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Mt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return _e.forEach(n.mutations,(i=>{const a=new Yn(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Yn(n,0),i=this.Zr.firstAfterOrEqual(r);return _e.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class LU{constructor(e){this.ri=e,this.docs=(function(){return new ln(qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return _e.resolve(r?r.document.mutableCopy():cr.newInvalidDocument(n))}getEntries(e,n){let r=Es();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():cr.newInvalidDocument(i))})),_e.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Es();const o=n.path,c=new qe(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||h8(f8(h),r)<=0||(i.has(h.key)||h0(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return _e.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Ze(9500)}ii(e,n){return _e.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new BU(this)}getSize(e){return _e.resolve(this.size)}}class BU extends IU{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),_e.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class UU{constructor(e){this.persistence=e,this.si=new tc((n=>Z1(n)),J1),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.oi=0,this._i=new i_,this.targetCount=0,this.ai=Tu.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),_e.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Tu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.Pr(n),_e.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),_e.waitFor(a).next((()=>i))}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return _e.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),_e.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),_e.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return _e.resolve(r)}containsKey(e,n){return _e.resolve(this._i.containsKey(n))}}class aI{constructor(e,n){this.ui={},this.overlays={},this.ci=new l0(0),this.li=!1,this.li=!0,this.hi=new VU,this.referenceDelegate=e(this),this.Pi=new UU(this),this.indexManager=new TU,this.remoteDocumentCache=(function(i){return new LU(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new SU(n),this.Ii=new PU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new zU(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new FU(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,n){return _e.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class FU extends g8{constructor(e){super(),this.currentSequenceNumber=e}}class a_{constructor(e){this.persistence=e,this.Ri=new i_,this.Vi=null}static mi(e){return new a_(e)}get fi(){if(this.Vi)return this.Vi;throw Ze(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),_e.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.fi,(r=>{const i=qe.fromPath(r);return this.gi(e,i).next((a=>{a||n.removeEntry(i,nt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return _e.or([()=>_e.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Cm{constructor(e,n){this.persistence=e,this.pi=new tc((r=>y8(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=NU(this,n)}static mi(e,n){return new Cm(e,n)}Ei(){}di(e){return _e.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return _e.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?_e.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,a.removeEntry(o,nt.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),_e.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qg(e.data.value)),n}br(e,n,r){return _e.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return _e.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class s_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=_t(),i=_t();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new s_(e,n.fromCache,r,i)}}class GU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class $U{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Xj()?8:m8(dr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,n,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new GU;return this.Ss(e,n,o).next((c=>{if(a.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>a.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(Xc()<=bt.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",Wc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),_e.resolve()):(Xc()<=bt.DEBUG&&Oe("QueryEngine","Query:",Wc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Xc()<=bt.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",Wc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ka(n))):_e.resolve())}ys(e,n){if(HC(n))return _e.resolve(null);let r=ka(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Sm(n,null,"F"),r=ka(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=_t(...a);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,Sm(n,null,"F")):this.vs(e,d,n,u)}))))})))))}ws(e,n,r,i){return HC(n)||i.isEqual(nt.min())?_e.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,i)?_e.resolve(null):(Xc()<=bt.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wc(n)),this.vs(e,o,n,d8(i,Gf)).next((c=>c)))}))}Ds(e,n){let r=new Gn(VN(e));return n.forEach(((i,a)=>{h0(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return Xc()<=bt.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",Wc(n)),this.ps.getDocumentsMatchingQuery(e,n,Po.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}const o_="LocalStore",HU=3e8;class qU{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ln(xt),this.xs=new tc((a=>Z1(a)),J1),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OU(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function YU(t,e,n,r){return new qU(t,e,n,r)}async function sI(t,e){const n=at(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=_t();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function XU(t,e){const n=at(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,h){const g=d.batch,m=g.keys();let b=_e.resolve();return m.forEach((_=>{b=b.next((()=>h.getEntry(u,_))).next((w=>{const E=d.docVersions.get(_);Mt(E!==null,48541),w.version.compareTo(E)<0&&(g.applyToRemoteDocument(w,d),w.isValidDocument()&&(w.setReadTime(d.commitVersion),h.addEntry(w)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=_t();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function oI(t){const e=at(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function WU(t,e){const n=at(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];e.targetChanges.forEach(((h,g)=>{const m=i.get(g);if(!m)return;c.push(n.Pi.removeMatchingKeys(a,h.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(a,h.addedDocuments,g))));let b=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(ir.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,r)),i=i.insert(g,b),(function(w,E,T){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=HU?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(m,b,h)&&c.push(n.Pi.updateTargetData(a,b))}));let u=Es(),d=_t();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))})),c.push(KU(a,o,e.documentUpdates).next((h=>{u=h.ks,d=h.qs}))),!r.isEqual(nt.min())){const h=n.Pi.getLastRemoteSnapshotVersion(a).next((g=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(h)}return _e.waitFor(c).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,u,d))).next((()=>u))})).then((a=>(n.Ms=i,a)))}function KU(t,e,n){let r=_t(),i=_t();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let o=Es();return n.forEach(((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(nt.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Oe(o_,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function QU(t,e){const n=at(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=W1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function ZU(t,e){const n=at(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((a=>a?(i=a,_e.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new _o(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function wx(t,e,n){const r=at(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Gu(o))throw o;Oe(o_,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function i2(t,e,n){const r=at(t);let i=nt.min(),a=_t();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,d,h){const g=at(u),m=g.xs.get(h);return m!==void 0?_e.resolve(g.Ms.get(m)):g.Pi.getTargetData(d,h)})(r,o,ka(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:nt.min(),n?a:_t()))).next((c=>(JU(r,V8(e),c),{documents:c,Qs:a})))))}function JU(t,e,n){let r=t.Os.get(e)||nt.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}class a2{constructor(){this.activeTargetIds=G8()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eF{constructor(){this.Mo=new a2,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new a2,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tF{Oo(e){}shutdown(){}}const s2="ConnectivityMonitor";class o2{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Oe(s2,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Oe(s2,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let bg=null;function Sx(){return bg===null?bg=(function(){return 268435456+Math.round(2147483648*Math.random())})():bg++,"0x"+bg.toString(16)}const db="RestConnection",nF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rF{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===xm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const o=Sx(),c=this.zo(e,n.toUriEncodedString());Oe(db,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:d}=new URL(c),h=zu(d);return this.Jo(e,c,u,r,h).then((g=>(Oe(db,`Received RPC '${e}' ${o}: `,g),g)),(g=>{throw xu(db,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g}))}Ho(e,n,r,i,a,o){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,n){const r=nF[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class iF{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const or="WebChannelConnection";class aF extends rF{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const o=Sx();return new Promise(((c,u)=>{const d=new uN;d.setWithCredentials(!0),d.listenOnce(dN.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Hg.NO_ERROR:const g=d.getResponseJson();Oe(or,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case Hg.TIMEOUT:Oe(or,`RPC '${e}' ${o} timed out`),u(new Re(be.DEADLINE_EXCEEDED,"Request time out"));break;case Hg.HTTP_ERROR:const m=d.getStatus();if(Oe(or,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const _=b?.error;if(_&&_.status&&_.message){const w=(function(T){const C=T.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(C)>=0?C:be.UNKNOWN})(_.status);u(new Re(w,_.message))}else u(new Re(be.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Re(be.UNAVAILABLE,"Connection failed."));break;default:Ze(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Oe(or,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(i);Oe(or,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,r,15)}))}T_(e,n,r){const i=Sx(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pN(),c=hN(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=a.join("");Oe(or,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);this.I_(g);let m=!1,b=!1;const _=new iF({Yo:E=>{b?Oe(or,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(m||(Oe(or,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),Oe(or,`RPC '${e}' stream ${i} sending:`,E),g.send(E))},Zo:()=>g.close()}),w=(E,T,C)=>{E.listen(T,(N=>{try{C(N)}catch(V){setTimeout((()=>{throw V}),0)}}))};return w(g,uf.EventType.OPEN,(()=>{b||(Oe(or,`RPC '${e}' stream ${i} transport opened.`),_.o_())})),w(g,uf.EventType.CLOSE,(()=>{b||(b=!0,Oe(or,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(g))})),w(g,uf.EventType.ERROR,(E=>{b||(b=!0,xu(or,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),_.a_(new Re(be.UNAVAILABLE,"The operation could not be completed")))})),w(g,uf.EventType.MESSAGE,(E=>{if(!b){const T=E.data[0];Mt(!!T,16349);const C=T,N=C?.error||C[0]?.error;if(N){Oe(or,`RPC '${e}' stream ${i} received error:`,N);const V=N.status;let P=(function(k){const D=In[k];if(D!==void 0)return XN(D)})(V),M=N.message;P===void 0&&(P=be.INTERNAL,M="Unknown error status: "+V+" with message "+N.message),b=!0,_.a_(new Re(P,M)),g.close()}else Oe(or,`RPC '${e}' stream ${i} received:`,T),_.u_(T)}})),w(c,fN.STAT_EVENT,(E=>{E.stat===dx.PROXY?Oe(or,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===dx.NOPROXY&&Oe(or,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function fb(){return typeof document<"u"?document:null}function y0(t){return new cU(t,!0)}class lI{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const l2="PersistentStream";class cI{constructor(e,n,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===be.RESOURCE_EXHAUSTED?(Ss(n.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Re(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Oe(l2,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Oe(l2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sF extends cI{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=fU(this.serializer,e),r=(function(a){if(!("targetChange"in a))return nt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?nt.min():o.readTime?Ra(o.readTime):nt.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=_x(this.serializer),n.addTarget=(function(a,o){let c;const u=o.target;if(c=mx(u)?{documents:gU(a,u)}:{query:mU(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=QN(a,o.resumeToken);const d=yx(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(nt.min())>0){c.readTime=Am(a,o.snapshotVersion.toTimestamp());const d=yx(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const r=yU(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=_x(this.serializer),n.removeTarget=e,this.q_(n)}}class oF extends cI{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=pU(e.writeResults,e.commitTime),r=Ra(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=_x(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>hU(this.serializer,r)))};this.q_(n)}}class lF{}class cF extends lF{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Re(be.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,bx(n,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(be.UNKNOWN,a.toString())}))}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,bx(n,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(be.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class uF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ss(n),this.aa=!1):Oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Xl="RemoteStore";class dF{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{nc(this)&&(Oe(Xl,"Restarting streams for network reachability change."),await(async function(u){const d=at(u);d.Ea.add(4),await wh(d),d.Ra.set("Unknown"),d.Ea.delete(4),await b0(d)})(this))}))})),this.Ra=new uF(r,i)}}async function b0(t){if(nc(t))for(const e of t.da)await e(!0)}async function wh(t){for(const e of t.da)await e(!1)}function uI(t,e){const n=at(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),d_(n)?u_(n):Hu(n).O_()&&c_(n,e))}function l_(t,e){const n=at(t),r=Hu(n);n.Ia.delete(e),r.O_()&&dI(n,e),n.Ia.size===0&&(r.O_()?r.L_():nc(n)&&n.Ra.set("Unknown"))}function c_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hu(t).Y_(e)}function dI(t,e){t.Va.Ue(e),Hu(t).Z_(e)}function u_(t){t.Va=new aU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Hu(t).start(),t.Ra.ua()}function d_(t){return nc(t)&&!Hu(t).x_()&&t.Ia.size>0}function nc(t){return at(t).Ea.size===0}function fI(t){t.Va=void 0}async function fF(t){t.Ra.set("Online")}async function hF(t){t.Ia.forEach(((e,n)=>{c_(t,e)}))}async function pF(t,e){fI(t),d_(t)?(t.Ra.ha(e),u_(t)):t.Ra.set("Unknown")}async function gF(t,e,n){if(t.Ra.set("Online"),e instanceof KN&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(t,e)}catch(r){Oe(Xl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await km(t,r)}else if(e instanceof Wg?t.Va.Ze(e):e instanceof WN?t.Va.st(e):t.Va.tt(e),!n.isEqual(nt.min()))try{const r=await oI(t.localStore);n.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.Ia.get(d);h&&a.Ia.set(d,h.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,d)=>{const h=a.Ia.get(u);if(!h)return;a.Ia.set(u,h.withResumeToken(ir.EMPTY_BYTE_STRING,h.snapshotVersion)),dI(a,u);const g=new _o(h.target,u,d,h.sequenceNumber);c_(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){Oe(Xl,"Failed to raise snapshot:",r),await km(t,r)}}async function km(t,e,n){if(!Gu(e))throw e;t.Ea.add(1),await wh(t),t.Ra.set("Offline"),n||(n=()=>oI(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Oe(Xl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await b0(t)}))}function hI(t,e){return e().catch((n=>km(t,n,e)))}async function x0(t){const e=at(t),n=Lo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:W1;for(;mF(e);)try{const i=await QU(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,vF(e,i)}catch(i){await km(e,i)}pI(e)&&gI(e)}function mF(t){return nc(t)&&t.Ta.length<10}function vF(t,e){t.Ta.push(e);const n=Lo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function pI(t){return nc(t)&&!Lo(t).x_()&&t.Ta.length>0}function gI(t){Lo(t).start()}async function yF(t){Lo(t).ra()}async function bF(t){const e=Lo(t);for(const n of t.Ta)e.ea(n.mutations)}async function xF(t,e,n){const r=t.Ta.shift(),i=t_.from(r,e,n);await hI(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await x0(t)}async function _F(t,e){e&&Lo(t).X_&&await(async function(r,i){if((function(o){return nU(o)&&o!==be.ABORTED})(i.code)){const a=r.Ta.shift();Lo(r).B_(),await hI(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await x0(r)}})(t,e),pI(t)&&gI(t)}async function c2(t,e){const n=at(t);n.asyncQueue.verifyOperationInProgress(),Oe(Xl,"RemoteStore received new credentials");const r=nc(n);n.Ea.add(3),await wh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await b0(n)}async function wF(t,e){const n=at(t);e?(n.Ea.delete(2),await b0(n)):e||(n.Ea.add(2),await wh(n),n.Ra.set("Unknown"))}function Hu(t){return t.ma||(t.ma=(function(n,r,i){const a=at(n);return a.sa(),new sF(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:fF.bind(null,t),t_:hF.bind(null,t),r_:pF.bind(null,t),H_:gF.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),d_(t)?u_(t):t.Ra.set("Unknown")):(await t.ma.stop(),fI(t))}))),t.ma}function Lo(t){return t.fa||(t.fa=(function(n,r,i){const a=at(n);return a.sa(),new oF(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:yF.bind(null,t),r_:_F.bind(null,t),ta:bF.bind(null,t),na:xF.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await x0(t)):(await t.fa.stop(),t.Ta.length>0&&(Oe(Xl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class f_{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new f_(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function h_(t,e){if(Ss("AsyncQueue",`${e}: ${t}`),Gu(t))return new Re(be.UNAVAILABLE,`${e}: ${t}`);throw t}class gu{static emptySet(e){return new gu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||qe.comparator(n.key,r.key):(n,r)=>qe.comparator(n.key,r.key),this.keyedMap=df(),this.sortedSet=new ln(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new gu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class u2{constructor(){this.ga=new ln(qe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ze(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Au{constructor(e,n,r,i,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Au(e,n,gu.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&f0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class SF{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class EF{constructor(){this.queries=d2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=at(n),a=i.queries;i.queries=d2(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new Re(be.ABORTED,"Firestore shutting down"))}}function d2(){return new tc((t=>jN(t)),f0)}async function p_(t,e){const n=at(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new SF,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=h_(o,`Initialization of query '${Wc(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&m_(n)}async function g_(t,e){const n=at(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function TF(t,e){const n=at(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&m_(n)}function AF(t,e,n){const r=at(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function m_(t){t.Ca.forEach((e=>{e.next()}))}var Ex,f2;(f2=Ex||(Ex={})).Ma="default",f2.Cache="cache";class v_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Au(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Au.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ex.Cache}}class mI{constructor(e){this.key=e}}class vI{constructor(e){this.key=e}}class CF{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_t(),this.mutatedKeys=_t(),this.eu=VN(e),this.tu=new gu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new u2,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,g)=>{const m=i.get(h),b=h0(this.query,g)?g:null,_=!!m&&this.mutatedKeys.has(m.key),w=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let E=!1;m&&b?m.data.isEqual(b.data)?_!==w&&(r.track({type:3,doc:b}),E=!0):this.su(m,b)||(r.track({type:2,doc:b}),E=!0,(u&&this.eu(b,u)>0||d&&this.eu(b,d)<0)&&(c=!0)):!m&&b?(r.track({type:0,doc:b}),E=!0):m&&!b&&(r.track({type:1,doc:m}),E=!0,(u||d)&&(c=!0)),E&&(b?(o=o.add(b),a=w?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,g)=>(function(b,_){const w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze(20277,{Rt:E})}};return w(b)-w(_)})(h.type,g.type)||this.eu(h.doc,g.doc))),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Au(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new u2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_t(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new vI(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new mI(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=_t();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Au.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const y_="SyncEngine";class kF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class RF{constructor(e){this.key=e,this.hu=!1}}class DF{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new tc((c=>jN(c)),f0),this.Iu=new Map,this.Eu=new Set,this.du=new ln(qe.comparator),this.Au=new Map,this.Ru=new i_,this.Vu={},this.mu=new Map,this.fu=Tu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NF(t,e,n=!0){const r=SI(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await yI(r,e,n,!0),i}async function IF(t,e){const n=SI(t);await yI(n,e,!0,!1)}async function yI(t,e,n,r){const i=await ZU(t.localStore,ka(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await MF(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&uI(t.remoteStore,i),c}async function MF(t,e,n,r,i){t.pu=(g,m,b)=>(async function(w,E,T,C){let N=E.view.ru(T);N.Cs&&(N=await i2(w.localStore,E.query,!1).then((({documents:A})=>E.view.ru(A,N))));const V=C&&C.targetChanges.get(E.targetId),P=C&&C.targetMismatches.get(E.targetId)!=null,M=E.view.applyChanges(N,w.isPrimaryClient,V,P);return p2(w,E.targetId,M.au),M.snapshot})(t,g,m,b);const a=await i2(t.localStore,e,!0),o=new CF(e,a.Qs),c=o.ru(a.documents),u=_h.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);p2(t,n,d.au);const h=new kF(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function OF(t,e,n){const r=at(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!f0(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await wx(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&l_(r.remoteStore,i.targetId),Tx(r,i.targetId)})).catch(Fu)):(Tx(r,i.targetId),await wx(r.localStore,i.targetId,!0))}async function PF(t,e){const n=at(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),l_(n.remoteStore,r.targetId))}async function jF(t,e,n){const r=GF(t);try{const i=await(function(o,c){const u=at(o),d=gt.now(),h=c.reduce(((b,_)=>b.add(_.key)),_t());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let _=Es(),w=_t();return u.Ns.getEntries(b,h).next((E=>{_=E,_.forEach(((T,C)=>{C.isValidDocument()||(w=w.add(T))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,_))).next((E=>{g=E;const T=[];for(const C of c){const N=Q8(C,g.get(C.key).overlayedDocument);N!=null&&T.push(new Ko(C.key,N,kN(N.value.mapValue),Sr.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,T,c)})).next((E=>{m=E;const T=E.applyToLocalDocumentSet(g,w);return u.documentOverlayCache.saveOverlays(b,E.batchId,T)}))})).then((()=>({batchId:m.batchId,changes:LN(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new ln(xt)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d})(r,i.batchId,n),await Sh(r,i.changes),await x0(r.remoteStore)}catch(i){const a=h_(i,"Failed to persist write");n.reject(a)}}async function bI(t,e){const n=at(t);try{const r=await WU(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=n.Au.get(a);o&&(Mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Mt(o.hu,14607):i.removedDocuments.size>0&&(Mt(o.hu,42227),o.hu=!1))})),await Sh(n,r,e)}catch(r){await Fu(r)}}function h2(t,e,n){const r=at(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=at(o);u.onlineState=c;let d=!1;u.queries.forEach(((h,g)=>{for(const m of g.Sa)m.va(c)&&(d=!0)})),d&&m_(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VF(t,e,n){const r=at(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new ln(qe.comparator);o=o.insert(a,cr.newNoDocument(a,nt.min()));const c=_t().add(a),u=new v0(nt.min(),new Map,new ln(xt),o,c);await bI(r,u),r.du=r.du.remove(a),r.Au.delete(e),b_(r)}else await wx(r.localStore,e,!1).then((()=>Tx(r,e,n))).catch(Fu)}async function zF(t,e){const n=at(t),r=e.batch.batchId;try{const i=await XU(n.localStore,e);_I(n,r,null),xI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sh(n,i)}catch(i){await Fu(i)}}async function LF(t,e,n){const r=at(t);try{const i=await(function(o,c){const u=at(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next((g=>(Mt(g!==null,37113),h=g.keys(),u.mutationQueue.removeMutationBatch(d,g)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>u.localDocuments.getDocuments(d,h)))}))})(r.localStore,e);_I(r,e,n),xI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Sh(r,i)}catch(i){await Fu(i)}}function xI(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function _I(t,e,n){const r=at(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Tx(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||wI(t,r)}))}function wI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(l_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),b_(t))}function p2(t,e,n){for(const r of n)r instanceof mI?(t.Ru.addReference(r.key,e),BF(t,r)):r instanceof vI?(Oe(y_,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||wI(t,r.key)):Ze(19791,{wu:r})}function BF(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Oe(y_,"New document in limbo: "+n),t.Eu.add(r),b_(t))}function b_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new qe(Yt.fromString(e)),r=t.fu.next();t.Au.set(r,new RF(n)),t.du=t.du.insert(n,r),uI(t.remoteStore,new _o(ka(d0(n.path)),r,"TargetPurposeLimboResolution",l0.ce))}}async function Sh(t,e,n){const r=at(t),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,n).then((d=>{if((d||n)&&r.isPrimaryClient){const h=d?!d.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(d){i.push(d);const h=s_.As(u.targetId,d);a.push(h)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,d){const h=at(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>_e.forEach(d,(m=>_e.forEach(m.Es,(b=>h.persistence.referenceDelegate.addReference(g,m.targetId,b))).next((()=>_e.forEach(m.ds,(b=>h.persistence.referenceDelegate.removeReference(g,m.targetId,b)))))))))}catch(g){if(!Gu(g))throw g;Oe(o_,"Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const b=h.Ms.get(m),_=b.snapshotVersion,w=b.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(m,w)}}})(r.localStore,a))}async function UF(t,e){const n=at(t);if(!n.currentUser.isEqual(e)){Oe(y_,"User change. New user:",e.toKey());const r=await sI(n.localStore,e);n.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new Re(be.CANCELLED,o))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sh(n,r.Ls)}}function FF(t,e){const n=at(t),r=n.Au.get(e);if(r&&r.hu)return _t().add(r.key);{let i=_t();const a=n.Iu.get(e);if(!a)return i;for(const o of a){const c=n.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function SI(t){const e=at(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VF.bind(null,e),e.Pu.H_=TF.bind(null,e.eventManager),e.Pu.yu=AF.bind(null,e.eventManager),e}function GF(t){const e=at(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LF.bind(null,e),e}class Rm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=y0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return YU(this.persistence,new $U,e.initialUser,this.serializer)}Cu(e){return new aI(a_.mi,this.serializer)}Du(e){return new eF}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rm.provider={build:()=>new Rm};class $F extends Rm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Mt(this.persistence.referenceDelegate instanceof Cm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new RU(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Mr.withCacheSize(this.cacheSizeBytes):Mr.DEFAULT;return new aI((r=>Cm.mi(r,n)),this.serializer)}}class Ax{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>h2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UF.bind(null,this.syncEngine),await wF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new EF})()}createDatastore(e){const n=y0(e.databaseInfo.databaseId),r=(function(a){return new aF(a)})(e.databaseInfo);return(function(a,o,c,u){return new cF(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,o,c){return new dF(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>h2(this.syncEngine,n,0)),(function(){return o2.v()?new o2:new tF})())}createSyncEngine(e,n){return(function(i,a,o,c,u,d,h){const g=new DF(i,a,o,c,u,d);return h&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=at(n);Oe(Xl,"RemoteStore shutting down."),r.Ea.add(5),await wh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ax.provider={build:()=>new Ax};class x_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Bo="FirestoreClient";class HF{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=lr.UNAUTHENTICATED,this.clientId=X1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{Oe(Bo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Oe(Bo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=h_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function hb(t,e){t.asyncQueue.verifyOperationInProgress(),Oe(Bo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await sI(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function g2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qF(t);Oe(Bo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>c2(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>c2(e.remoteStore,i))),t._onlineComponents=e}async function qF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Oe(Bo,"Using user provided OfflineComponentProvider");try{await hb(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===be.FAILED_PRECONDITION||i.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;xu("Error using user provided cache. Falling back to memory cache: "+n),await hb(t,new Rm)}}else Oe(Bo,"Using default OfflineComponentProvider"),await hb(t,new $F(void 0));return t._offlineComponents}async function EI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Oe(Bo,"Using user provided OnlineComponentProvider"),await g2(t,t._uninitializedComponentsProvider._online)):(Oe(Bo,"Using default OnlineComponentProvider"),await g2(t,new Ax))),t._onlineComponents}function YF(t){return EI(t).then((e=>e.syncEngine))}async function Dm(t){const e=await EI(t),n=e.eventManager;return n.onListen=NF.bind(null,e.syncEngine),n.onUnlisten=OF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PF.bind(null,e.syncEngine),n}function XF(t,e,n={}){const r=new ms;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new x_({next:m=>{h.Nu(),o.enqueueAndForget((()=>g_(a,g)));const b=m.docs.has(c);!b&&m.fromCache?d.reject(new Re(be.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&m.fromCache&&u&&u.source==="server"?d.reject(new Re(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new v_(d0(c.path),h,{includeMetadataChanges:!0,qa:!0});return p_(a,g)})(await Dm(t),t.asyncQueue,e,n,r))),r.promise}function WF(t,e,n={}){const r=new ms;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new x_({next:m=>{h.Nu(),o.enqueueAndForget((()=>g_(a,g))),m.fromCache&&u.source==="server"?d.reject(new Re(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new v_(c,h,{includeMetadataChanges:!0,qa:!0});return p_(a,g)})(await Dm(t),t.asyncQueue,e,n,r))),r.promise}function TI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const m2=new Map;const AI="firestore.googleapis.com",v2=!0;class y2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AI,this.ssl=v2}else this.host=e.host,this.ssl=e.ssl??v2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CU)throw new Re(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}u8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TI(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Re(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Re(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Re(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new y2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new y2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new e8;switch(r.type){case"firstParty":return new i8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=m2.get(n);r&&(Oe("ComponentProvider","Removing Datastore"),m2.delete(n),r.terminate())})(this),Promise.resolve()}}function KF(t,e,n,r={}){t=wr(t,_0);const i=zu(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(WR(`https://${c}`),KR("Firestore",!0)),a.host!==AI&&a.host!==c&&xu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!Mo(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=lr.MOCK_USER;else{d=Lj(r.mockUserToken,t._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Re(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new lr(g)}t._authCredentials=new t8(new mN(d,h))}}class Ds{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class pn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new No(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(bh(n,pn._jsonSchema))return new pn(e,r||null,new qe(Yt.fromString(n.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:jn("string",pn._jsonSchemaVersion),referencePath:jn("string")};class No extends Ds{constructor(e,n,r){super(e,n,d0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new qe(e))}withConverter(e){return new No(this.firestore,e,this._path)}}function vr(t,e,...n){if(t=qt(t),vN("collection","path",e),t instanceof _0){const r=Yt.fromString(e,...n);return NC(r),new No(t,null,r)}{if(!(t instanceof pn||t instanceof No))throw new Re(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Yt.fromString(e,...n));return NC(r),new No(t.firestore,null,r)}}function yt(t,e,...n){if(t=qt(t),arguments.length===1&&(e=X1.newId()),vN("doc","path",e),t instanceof _0){const r=Yt.fromString(e,...n);return DC(r),new pn(t,null,new qe(r))}{if(!(t instanceof pn||t instanceof No))throw new Re(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Yt.fromString(e,...n));return DC(r),new pn(t.firestore,t instanceof No?t.converter:null,new qe(r))}}const b2="AsyncQueue";class x2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lI(this,"async_queue_retry"),this._c=()=>{const r=fb();r&&Oe(b2,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=fb();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fb();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ms;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Gu(e))throw e;Oe(b2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ss("INTERNAL UNHANDLED ERROR: ",_2(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=f_.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Ze(47125,{Pc:_2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function _2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function w2(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class ja extends _0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new x2,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new x2(e),this._firestoreClient=void 0,await e}}}function QF(t,e){const n=typeof t=="object"?t:eD(),r=typeof t=="string"?t:xm,i=N1(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=Vj("firestore");a&&KF(i,...a)}return i}function Eh(t){if(t._terminated)throw new Re(be.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZF(t),t._firestoreClient}function ZF(t){const e=t._freezeSettings(),n=(function(i,a,o,c){return new _8(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,TI(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new HF(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class _i{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _i(ir.fromBase64String(e))}catch(n){throw new Re(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _i(ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_i._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bh(e,_i._jsonSchema))return _i.fromBase64String(e.bytes)}}_i._jsonSchemaVersion="firestore/bytes/1.0",_i._jsonSchema={type:jn("string",_i._jsonSchemaVersion),bytes:jn("string")};class Th{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Re(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class w0{constructor(e){this._methodName=e}}class Da{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Re(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Re(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Da._jsonSchemaVersion}}static fromJSON(e){if(bh(e,Da._jsonSchema))return new Da(e.latitude,e.longitude)}}Da._jsonSchemaVersion="firestore/geoPoint/1.0",Da._jsonSchema={type:jn("string",Da._jsonSchemaVersion),latitude:jn("number"),longitude:jn("number")};class Na{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Na._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bh(e,Na._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Na(e.vectorValues);throw new Re(be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Na._jsonSchemaVersion="firestore/vectorValue/1.0",Na._jsonSchema={type:jn("string",Na._jsonSchemaVersion),vectorValues:jn("object")};const JF=/^__.*__$/;class e7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ko(e,this.data,this.fieldMask,n,this.fieldTransforms):new xh(e,this.data,n,this.fieldTransforms)}}class CI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ko(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze(40011,{Ac:t})}}class S0{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new S0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Nm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kI(this.Ac)&&JF.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class t7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||y0(e)}Cc(e,n,r,i=!1){return new S0({Ac:e,methodName:n,Dc:r,path:nr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ah(t){const e=t._freezeSettings(),n=y0(t._databaseId);return new t7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function __(t,e,n,r,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);S_("Data must be an object, but it was:",o,r);const c=NI(r,o);let u,d;if(a.merge)u=new Jr(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const g of a.mergeFields){const m=Cx(e,g,n);if(!o.contains(m))throw new Re(be.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);MI(h,m)||h.push(m)}u=new Jr(h),d=o.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,d=o.fieldTransforms;return new e7(new Or(c),u,d)}class Ch extends w0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ch}}function n7(t,e,n){return new S0({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class w_ extends w0{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=n7(this,e,!0),r=this.vc.map((a=>qu(a,n))),i=new Eu(r);return new Y8(e.path,i)}isEqual(e){return e instanceof w_&&Mo(this.vc,e.vc)}}function RI(t,e,n,r){const i=t.Cc(1,e,n);S_("Data must be an object, but it was:",i,r);const a=[],o=Or.empty();Wo(r,((u,d)=>{const h=E_(e,u,n);d=qt(d);const g=i.yc(h);if(d instanceof Ch)a.push(h);else{const m=qu(d,g);m!=null&&(a.push(h),o.set(h,m))}}));const c=new Jr(a);return new CI(o,c,i.fieldTransforms)}function DI(t,e,n,r,i,a){const o=t.Cc(1,e,n),c=[Cx(e,r,n)],u=[i];if(a.length%2!=0)throw new Re(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)c.push(Cx(e,a[m])),u.push(a[m+1]);const d=[],h=Or.empty();for(let m=c.length-1;m>=0;--m)if(!MI(d,c[m])){const b=c[m];let _=u[m];_=qt(_);const w=o.yc(b);if(_ instanceof Ch)d.push(b);else{const E=qu(_,w);E!=null&&(d.push(b),h.set(b,E))}}const g=new Jr(d);return new CI(h,g,o.fieldTransforms)}function r7(t,e,n,r=!1){return qu(n,t.Cc(r?4:3,e))}function qu(t,e){if(II(t=qt(t)))return S_("Unsupported field value:",e,t),NI(t,e);if(t instanceof w0)return(function(r,i){if(!kI(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=qu(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $8(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=gt.fromDate(r);return{timestampValue:Am(i.serializer,a)}}if(r instanceof gt){const a=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Am(i.serializer,a)}}if(r instanceof Da)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _i)return{bytesValue:QN(i.serializer,r._byteString)};if(r instanceof pn){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:r_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Na)return(function(o,c){return{mapValue:{fields:{[AN]:{stringValue:CN},[_m]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return e_(c.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${o0(r)}`)})(t,e)}function NI(t,e){const n={};return xN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wo(t,((r,i)=>{const a=qu(i,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function II(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof Da||t instanceof _i||t instanceof pn||t instanceof w0||t instanceof Na)}function S_(t,e,n){if(!II(n)||!yN(n)){const r=o0(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Cx(t,e,n){if((e=qt(e))instanceof Th)return e._internalPath;if(typeof e=="string")return E_(t,e);throw Nm("Field path arguments must be of type string or ",t,!1,void 0,n)}const i7=new RegExp("[~\\*/\\[\\]]");function E_(t,e,n){if(e.search(i7)>=0)throw Nm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Th(...e.split("."))._internalPath}catch{throw Nm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nm(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Re(be.INVALID_ARGUMENT,c+t+u)}function MI(t,e){return t.some((n=>n.isEqual(e)))}class OI{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(E0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class a7 extends OI{data(){return super.data()}}function E0(t,e){return typeof e=="string"?E_(t,e):e instanceof Th?e._internalPath:e._delegate._internalPath}function PI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Re(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class T_{}class A_ extends T_{}function Qi(t,e,...n){let r=[];e instanceof T_&&r.push(e),r=r.concat(n),(function(a){const o=a.filter((u=>u instanceof C_)).length,c=a.filter((u=>u instanceof T0)).length;if(o>1||o>0&&c>0)throw new Re(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class T0 extends A_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new T0(e,n,r)}_apply(e){const n=this._parse(e);return jI(e._query,n),new Ds(e.firestore,e.converter,vx(e._query,n))}_parse(e){const n=Ah(e.firestore);return(function(a,o,c,u,d,h,g){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Re(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){T2(g,h);const _=[];for(const w of g)_.push(E2(u,a,w));m={arrayValue:{values:_}}}else m=E2(u,a,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||T2(g,h),m=r7(c,o,g,h==="in"||h==="not-in");return On.create(d,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function s7(t,e,n){const r=e,i=E0("where",t);return T0._create(i,r,n)}class C_ extends T_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new C_(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ki.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)jI(o,u),o=vx(o,u)})(e._query,n),new Ds(e.firestore,e.converter,vx(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class k_ extends A_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new k_(e,n)}_apply(e){const n=(function(i,a,o){if(i.startAt!==null)throw new Re(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Re(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yf(a,o)})(e._query,this._field,this._direction);return new Ds(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new $u(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function Uo(t,e="asc"){const n=e,r=E0("orderBy",t);return k_._create(r,n)}class R_ extends A_{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new R_(e,n,r)}_apply(e){return new Ds(e.firestore,e.converter,Sm(e._query,this._limit,this._limitType))}}function S2(t){return R_._create("limit",t,"F")}function E2(t,e,n){if(typeof(n=qt(n))=="string"){if(n==="")throw new Re(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PN(e)&&n.indexOf("/")!==-1)throw new Re(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Yt.fromString(n));if(!qe.isDocumentKey(r))throw new Re(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return LC(t,new qe(r))}if(n instanceof pn)return LC(t,n._key);throw new Re(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${o0(n)}.`)}function T2(t,e){if(!Array.isArray(t)||t.length===0)throw new Re(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jI(t,e){const n=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Re(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class o7{convertValue(e,n="none"){switch(zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ze(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wo(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[_m].arrayValue?.values?.map((r=>xn(r.doubleValue)));return new Na(n)}convertGeoPoint(e){return new Da(xn(e.latitude),xn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=u0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($f(e));default:return null}}convertTimestamp(e){const n=jo(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Yt.fromString(e);Mt(rI(r),9688,{name:e});const i=new Hf(r.get(1),r.get(3)),a=new qe(r.popFirst(5));return i.isEqual(n)||Ss(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function D_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class hf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bl extends OI{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(E0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Bl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Bl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bl._jsonSchema={type:jn("string",Bl._jsonSchemaVersion),bundleSource:jn("string","DocumentSnapshot"),bundleName:jn("string"),bundle:jn("string")};class Kg extends Bl{data(e={}){return super.data(e)}}class Ul{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new hf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Kg(this._firestore,this._userDataWriter,r.key,r,new hf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Re(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new Kg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new hf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new Kg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new hf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:l7(c.type),doc:u,oldIndex:d,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ul._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=X1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function l7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze(61501,{type:t})}}function pb(t){t=wr(t,pn);const e=wr(t.firestore,ja);return XF(Eh(e),t._key).then((n=>VI(e,t,n)))}Ul._jsonSchemaVersion="firestore/querySnapshot/1.0",Ul._jsonSchema={type:jn("string",Ul._jsonSchemaVersion),bundleSource:jn("string","QuerySnapshot"),bundleName:jn("string"),bundle:jn("string")};class N_ extends o7{constructor(e){super(),this.firestore=e}convertBytes(e){return new _i(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,n)}}function Gi(t){t=wr(t,Ds);const e=wr(t.firestore,ja),n=Eh(e),r=new N_(e);return PI(t._query),WF(n,t._query).then((i=>new Ul(e,r,t,i)))}function Zr(t,e,n){t=wr(t,pn);const r=wr(t.firestore,ja),i=D_(t.converter,e,n);return kh(r,[__(Ah(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Sr.none())])}function Sa(t,e,n,...r){t=wr(t,pn);const i=wr(t.firestore,ja),a=Ah(i);let o;return o=typeof(e=qt(e))=="string"||e instanceof Th?DI(a,"updateDoc",t._key,e,n,r):RI(a,"updateDoc",t._key,e),kh(i,[o.toMutation(t._key,Sr.exists(!0))])}function $i(t){return kh(wr(t.firestore,ja),[new m0(t._key,Sr.none())])}function A0(t,e){const n=wr(t.firestore,ja),r=yt(t),i=D_(t.converter,e);return kh(n,[__(Ah(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Sr.exists(!1))]).then((()=>r))}function Yu(t,...e){t=qt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||w2(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(w2(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,o,c;if(t instanceof pn)o=wr(t.firestore,ja),c=d0(t._key.path),a={next:u=>{e[r]&&e[r](VI(o,t,u))},error:e[r+1],complete:e[r+2]};else{const u=wr(t,Ds);o=wr(u.firestore,ja),c=u._query;const d=new N_(o);a={next:h=>{e[r]&&e[r](new Ul(o,d,u,h))},error:e[r+1],complete:e[r+2]},PI(t._query)}return(function(d,h,g,m){const b=new x_(m),_=new v_(h,b,g);return d.asyncQueue.enqueueAndForget((async()=>p_(await Dm(d),_))),()=>{b.Nu(),d.asyncQueue.enqueueAndForget((async()=>g_(await Dm(d),_)))}})(Eh(o),c,i,a)}function kh(t,e){return(function(r,i){const a=new ms;return r.asyncQueue.enqueueAndForget((async()=>jF(await YF(r),i,a))),a.promise})(Eh(t),e)}function VI(t,e,n){const r=n.docs.get(e._key),i=new N_(t);return new Bl(t,i,e._key,r,new hf(n.hasPendingWrites,n.fromCache),e.converter)}class c7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ah(e)}set(e,n,r){this._verifyNotCommitted();const i=gb(e,this._firestore),a=D_(i.converter,n,r),o=__(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Sr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=gb(e,this._firestore);let o;return o=typeof(n=qt(n))=="string"||n instanceof Th?DI(this._dataReader,"WriteBatch.update",a._key,n,r,i):RI(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=gb(e,this._firestore);return this._mutations=this._mutations.concat(new m0(n._key,Sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gb(t,e){if((t=qt(t)).firestore!==e)throw new Re(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function A2(){return new Ch("deleteField")}function u7(...t){return new w_("arrayUnion",t)}function kx(t){return Eh(t=wr(t,ja)),new c7(t,(e=>kh(t,e)))}(function(e,n=!0){(function(i){Uu=i})(Lu),yu(new $l("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new ja(new n8(r.getProvider("auth-internal")),new a8(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Re(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hf(d.options.projectId,h)})(o,i),o);return a={useFetchStreams:n,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Ro(AC,CC,e),Ro(AC,CC,"esm2020")})();const d7={apiKey:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:0ae73943f9058a4342aba9",measurementId:"G-VMP5DF6273"},zI=JR(d7),vi=Pz(zI),Ke=QF(zI),C2=()=>({url:window.location.origin+"/personal-budget-pwa/",handleCodeInApp:!1}),xg=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),Si=q1()(lN(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await y6(vi,e,n)).user;if(console.log(` Checking email verification for: ${i.email}`),console.log(" emailVerified status:",i.emailVerified),console.log(" Firebase user object:",{uid:i.uid,email:i.email,emailVerified:i.emailVerified,metadata:i.metadata}),!i.emailVerified)return console.log(` BLOCKING LOGIN: Email not verified for ${i.email}`),await eC(vi),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${i.email} not verified`),!1;console.log(` EMAIL VERIFIED: Allowing login for ${i.email}`);const a=xg(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${a.email}`),!0}catch(r){console.error("Login error:",r),console.error("Error code:",r.code),console.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await v6(vi,e,n)).user;await x6(a,{displayName:r}),await JA(a,C2());const o=xg(a);return t({currentUser:o,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${o.email}, verification email sent`),!0}catch(i){console.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await eC(vi),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await p6(vi,e),t({isLoading:!1}),!0}catch(n){console.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=vi.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await JA(e,C2()),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(n){console.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=Si.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},checkVerificationStatus:async()=>{const e=vi.currentUser;if(!e)return!1;try{await e.reload();const n=vi.currentUser;if(n?.emailVerified){const r=xg(n);return t({currentUser:r,isAuthenticated:!0,lastAuthTime:Date.now()}),console.log(` Email verified for: ${n.email}`),!0}return!1}catch(n){return console.error("Error checking verification status:",n),!1}},deleteAccount:async e=>{const n=vi.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=Jl.credential(n.email,e);return await f6(n,r),await E6(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${n.email}`),!0}catch(r){console.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},confirmPasswordReset:async(e,n)=>{t({isLoading:!0,loginError:null});try{return await g6(vi,e,n),t({isLoading:!1}),console.log(" Password reset successful"),!0}catch(r){console.error("Password reset confirmation error:",r);let i="Failed to reset password. The link may be expired or invalid.";switch(r.code){case"auth/expired-action-code":i="The password reset link has expired. Please request a new one.";break;case"auth/invalid-action-code":i="The password reset link is invalid. Please request a new one.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>Si.getState().isInitialized?()=>{}:(t({isInitialized:!1}),S6(vi,async r=>{const i=Date.now(),a=Si.getState(),o=r?xg(r):null,c=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,d=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&c&&!o,h=r?r.emailVerified:!0,g=r&&h||!!d,m=r?o:d?a.currentUser:null;if(t({currentUser:m,isAuthenticated:g,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&h?i:a.lastAuthTime}),m)if(console.log(` Auth state: User is signed in (${m.email})`,d?"(offline grace period)":h?"(verified)":"(unverified)"),console.log(" Onboarding check:",{isVerified:h,shouldGrantOfflineAccess:d,willCheckOnboarding:h&&!d}),h&&!d){console.log(" Loading budgetStore to check onboarding...");const b=await Tt(()=>Promise.resolve().then(()=>DQ),[]).then(_=>_.useBudgetStore.getState());console.log(" Calling budgetStore.checkAndStartOnboarding()..."),await b.checkAndStartOnboarding()}else console.log(" Skipping onboarding check (not verified or offline grace period)");else console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),Vt=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:Si},Symbol.toStringTag,{value:"Module"})),LI=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],f7=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=LI.map(c=>({...c,met:c.regex.test(t)})).filter(c=>c.met).length;let i,a,o;return r<=1?(i="weak",a="text-red-500",o="Weak"):r<=3?(i="medium",a="text-yellow-500",o="Medium"):r===4?(i="strong",a="text-blue-500",o="Strong"):(i="very-strong",a="text-green-500",o="Very Strong"),{score:r,level:i,color:a,label:o}},C0=t=>{const e=LI.map(i=>({...i,met:i.regex.test(t)})),n=f7(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},BI=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=C0(t);return r?null:v.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[v.jsx("div",{className:"flex-1",children:v.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>v.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),v.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},UI=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=C0(t);return r?null:v.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?v.jsx(M9,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):v.jsx(s0,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),v.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},h7=()=>{const[t,e]=B.useState(""),[n,r]=B.useState(""),[i,a]=B.useState(""),[o,c]=B.useState(!1),[u,d]=B.useState(!1),[h,g]=B.useState(!1),[m,b]=B.useState(!1),{login:_,register:w,sendPasswordReset:E,isLoading:T,loginError:C,clearError:N}=Si(),V=C0(n),P=async A=>{if(A.preventDefault(),N(),t.trim()&&n.trim())if(u){if(!i.trim()||!V.isValid)return;await w(t.trim(),n,i.trim())}else await _(t.trim(),n)},M=async A=>{A.preventDefault(),t.trim()&&await E(t.trim())&&b(!0)};return B.useEffect(()=>{e(""),r(""),a(""),b(!1)},[u,h]),v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsx("div",{className:"text-center",children:v.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),v.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),v.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:h?v.jsxs("form",{onSubmit:M,className:"space-y-6",children:[v.jsxs("div",{className:"text-center mb-2",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(cx,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{id:"reset-email",type:"email",value:t,onChange:A=>e(A.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:T,autoComplete:"email"})]})]}),m?v.jsxs("div",{className:"text-center py-4",children:[v.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:v.jsx(cx,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),v.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),v.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",v.jsx("span",{className:"font-medium",children:t})]}),v.jsxs("button",{type:"button",onClick:()=>g(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[v.jsx(Oo,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{type:"submit",disabled:T||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:T?"Sending...":"Send Reset Link"}),v.jsx("div",{className:"mt-4 text-center",children:v.jsxs("button",{type:"button",onClick:()=>g(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:T,children:[v.jsx(Oo,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):v.jsxs("form",{onSubmit:P,className:"space-y-6",children:[v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u?"Create Account":"Sign In"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:u?"Create a new account to get started":"Sign in to your account"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),v.jsx("input",{id:"email",type:"email",value:t,onChange:A=>e(A.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:T,autoComplete:"username"})]}),u&&v.jsxs("div",{children:[v.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),v.jsx("input",{id:"displayName",type:"text",value:i,onChange:A=>a(A.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:T})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!u&&v.jsx("button",{type:"button",onClick:()=>g(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:T,children:"Forgot password?"})]}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{id:"password",type:o?"text":"password",value:n,onChange:A=>r(A.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${u&&n&&!V.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:T,autoComplete:u?"new-password":"current-password"}),v.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:T,children:o?v.jsx(aN,{className:"h-5 w-5"}):v.jsx(sN,{className:"h-5 w-5"})})]}),u&&n&&v.jsx("div",{className:"mt-2",children:v.jsx(BI,{password:n})}),u&&n&&v.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:v.jsx(UI,{password:n})})]}),C&&v.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[C,C.includes("verify your email")&&v.jsx("div",{className:"mt-3",children:v.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),v.jsx("button",{type:"submit",disabled:T||!t.trim()||!n.trim()||u&&!i.trim()||u&&!V.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:T?u?"Creating Account...":"Signing in...":u?"Create Account":"Sign In"}),v.jsx("div",{className:"mt-6 text-center",children:v.jsxs("button",{type:"button",onClick:()=>{d(!u),g(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:T,children:[v.jsx(LB,{className:"h-4 w-4"}),u?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},p7=({oobCode:t,onSuccess:e,onCancel:n})=>{const[r,i]=B.useState(""),[a,o]=B.useState(""),[c,u]=B.useState(!1),[d,h]=B.useState(!1),{confirmPasswordReset:g,isLoading:m,loginError:b,clearError:_}=Si(),w=C0(r);B.useEffect(()=>{_()},[_]);const E=async T=>{if(T.preventDefault(),r!==a||!w.isValid)return;await g(t,r)&&h(!0)};return d?v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:[v.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-6",children:v.jsx(mm,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Password Reset Complete"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Your password has been successfully updated. You can now log in with your new password."}),v.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200",children:"Go to Login"})]})}):v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsx("div",{className:"text-center",children:v.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),v.jsx("h1",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"Reset Password"})]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create a new password for your account"})]})}),v.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:v.jsxs("form",{onSubmit:E,className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(_C,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{id:"new-password",type:c?"text":"password",value:r,onChange:T=>i(T.target.value),className:"w-full pl-10 pr-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Enter new password",required:!0}),v.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",onClick:()=>u(!c),children:c?v.jsx(aN,{className:"h-5 w-5"}):v.jsx(sN,{className:"h-5 w-5"})})]}),v.jsx("div",{className:"mt-2",children:v.jsx(BI,{password:r})})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(_C,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{id:"confirm-password",type:c?"text":"password",value:a,onChange:T=>o(T.target.value),className:`w-full pl-10 px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors ${a&&r!==a?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Confirm new password",required:!0})]}),a&&r!==a&&v.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Passwords do not match"})]}),v.jsx(UI,{password:r}),b&&v.jsx("div",{className:"p-3 rounded-md bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm",children:b}),v.jsx("button",{type:"submit",disabled:m||!r||!a||r!==a||!w.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:m?"Updating Password...":"Reset Password"}),v.jsx("div",{className:"text-center",children:v.jsxs("button",{type:"button",onClick:n,className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium inline-flex items-center",children:[v.jsx(Oo,{className:"h-4 w-4 mr-1"}),"Back to Login"]})})]})})]})})},FI=()=>{const[t,e]=B.useState(!1),[n,r]=B.useState(!1),{currentUser:i,resendEmailVerification:a,checkVerificationStatus:o,logout:c,loginError:u}=Si();B.useEffect(()=>{i||console.warn("EmailVerificationView: No current user, this should not happen")},[i]),B.useEffect(()=>{const g=()=>{console.log("Window focused, checking verification status..."),o()};return window.addEventListener("focus",g),()=>window.removeEventListener("focus",g)},[o]);const d=async()=>{e(!0),r(!1);const g=await a();e(!1),g&&(r(!0),setTimeout(()=>r(!1),3e3))},h=async()=>{await c()};return i?v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsx("div",{className:"text-center",children:v.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),v.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),v.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:v.jsx(cx,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",v.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),v.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(mm,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),v.jsxs("div",{className:"text-left",children:[v.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),v.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[v.jsx("li",{children:"1. Open your email inbox"}),v.jsx("li",{children:"2. Find the email from House Budget"}),v.jsx("li",{children:'3. Click the "Verify Email" link'}),v.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),u&&v.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:u}),n&&v.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),v.jsx("button",{onClick:d,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?v.jsxs(v.Fragment,{children:[v.jsx(Bf,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):v.jsxs(v.Fragment,{children:[v.jsx(Bf,{className:"h-4 w-4"}),"Resend verification email"]})}),v.jsxs("button",{onClick:h,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[v.jsx(Oo,{className:"h-4 w-4"}),"Back to sign in"]})]})}),v.jsx("div",{className:"text-center",children:v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},GI=({message:t="Loading your budget...",showTimeout:e=!1})=>v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[v.jsx("div",{className:"mb-8",children:v.jsxs("div",{className:"relative",children:[v.jsx(Bf,{size:48,className:"text-blue-500 animate-spin"}),v.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:v.jsx(a0,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),v.jsxs("div",{className:"text-center space-y-3",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),v.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),v.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),v.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),v.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),v.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),v.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),v.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),v.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),v.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&v.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:v.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),v.jsx("div",{className:"mt-8 w-full max-w-md",children:v.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:v.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),I_=B.createContext({});function k0(t){const e=B.useRef(null);return e.current===null&&(e.current=t()),e.current}const M_=typeof window<"u",O_=M_?B.useLayoutEffect:B.useEffect,R0=B.createContext(null);function P_(t,e){t.indexOf(e)===-1&&t.push(e)}function j_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ts=(t,e,n)=>n>e?e:n<t?t:n;let V_=()=>{};const As={},$I=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function HI(t){return typeof t=="object"&&t!==null}const qI=t=>/^0[^.\s]+$/u.test(t);function z_(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ei=t=>t,g7=(t,e)=>n=>e(t(n)),Rh=(...t)=>t.reduce(g7),Wf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class L_{constructor(){this.subscriptions=[]}add(e){return P_(this.subscriptions,e),()=>j_(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ia=t=>t*1e3,wi=t=>t/1e3;function YI(t,e){return e?t*(1e3/e):0}const XI=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,m7=1e-7,v7=12;function y7(t,e,n,r,i){let a,o,c=0;do o=e+(n-e)/2,a=XI(o,r,i)-t,a>0?n=o:e=o;while(Math.abs(a)>m7&&++c<v7);return o}function Dh(t,e,n,r){if(t===e&&n===r)return Ei;const i=a=>y7(a,0,1,t,n);return a=>a===0||a===1?a:XI(i(a),e,r)}const WI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,KI=t=>e=>1-t(1-e),QI=Dh(.33,1.53,.69,.99),B_=KI(QI),ZI=WI(B_),JI=t=>(t*=2)<1?.5*B_(t):.5*(2-Math.pow(2,-10*(t-1))),U_=t=>1-Math.sin(Math.acos(t)),eM=KI(U_),tM=WI(U_),b7=Dh(.42,0,1,1),x7=Dh(0,0,.58,1),nM=Dh(.42,0,.58,1),_7=t=>Array.isArray(t)&&typeof t[0]!="number",rM=t=>Array.isArray(t)&&typeof t[0]=="number",w7={linear:Ei,easeIn:b7,easeInOut:nM,easeOut:x7,circIn:U_,circInOut:tM,circOut:eM,backIn:B_,backInOut:ZI,backOut:QI,anticipate:JI},S7=t=>typeof t=="string",k2=t=>{if(rM(t)){V_(t.length===4);const[e,n,r,i]=t;return Dh(e,n,r,i)}else if(S7(t))return w7[t];return t},_g=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function E7(t,e){let n=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),t()),h(c)}const d={schedule:(h,g=!1,m=!1)=>{const _=m&&i?n:r;return g&&o.add(h),_.has(h)||_.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(c=h,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,a&&(a=!1,d.process(h))}};return d}const T7=40;function iM(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=_g.reduce((N,V)=>(N[V]=E7(a),N),{}),{setup:c,read:u,resolveKeyframes:d,preUpdate:h,update:g,preRender:m,render:b,postRender:_}=o,w=()=>{const N=As.useManualTiming?i.timestamp:performance.now();n=!1,As.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(N-i.timestamp,T7),1)),i.timestamp=N,i.isProcessing=!0,c.process(i),u.process(i),d.process(i),h.process(i),g.process(i),m.process(i),b.process(i),_.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(w))},E=()=>{n=!0,r=!0,i.isProcessing||t(w)};return{schedule:_g.reduce((N,V)=>{const P=o[V];return N[V]=(M,A=!1,k=!1)=>(n||E(),P.schedule(M,A,k)),N},{}),cancel:N=>{for(let V=0;V<_g.length;V++)o[_g[V]].cancel(N)},state:i,steps:o}}const{schedule:en,cancel:Fo,state:er,steps:mb}=iM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ei,!0);let Qg;function A7(){Qg=void 0}const Pr={now:()=>(Qg===void 0&&Pr.set(er.isProcessing||As.useManualTiming?er.timestamp:performance.now()),Qg),set:t=>{Qg=t,queueMicrotask(A7)}},aM=t=>e=>typeof e=="string"&&e.startsWith(t),F_=aM("--"),C7=aM("var(--"),G_=t=>C7(t)?k7.test(t.split("/*")[0].trim()):!1,k7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Kf={...Xu,transform:t=>Ts(0,1,t)},wg={...Xu,default:1},Tf=t=>Math.round(t*1e5)/1e5,$_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function R7(t){return t==null}const D7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,H_=(t,e)=>n=>!!(typeof n=="string"&&D7.test(n)&&n.startsWith(t)||e&&!R7(n)&&Object.prototype.hasOwnProperty.call(n,e)),sM=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match($_);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},N7=t=>Ts(0,255,t),vb={...Xu,transform:t=>Math.round(N7(t))},jl={test:H_("rgb","red"),parse:sM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+vb.transform(t)+", "+vb.transform(e)+", "+vb.transform(n)+", "+Tf(Kf.transform(r))+")"};function I7(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Rx={test:H_("#"),parse:I7,transform:jl.transform},Nh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),go=Nh("deg"),Ma=Nh("%"),et=Nh("px"),M7=Nh("vh"),O7=Nh("vw"),R2={...Ma,parse:t=>Ma.parse(t)/100,transform:t=>Ma.transform(t*100)},eu={test:H_("hsl","hue"),parse:sM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ma.transform(Tf(e))+", "+Ma.transform(Tf(n))+", "+Tf(Kf.transform(r))+")"},Mn={test:t=>jl.test(t)||Rx.test(t)||eu.test(t),parse:t=>jl.test(t)?jl.parse(t):eu.test(t)?eu.parse(t):Rx.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?jl.transform(t):eu.transform(t),getAnimatableNone:t=>{const e=Mn.parse(t);return e.alpha=0,Mn.transform(e)}},P7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function j7(t){return isNaN(t)&&typeof t=="string"&&(t.match($_)?.length||0)+(t.match(P7)?.length||0)>0}const oM="number",lM="color",V7="var",z7="var(",D2="${}",L7=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Qf(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(L7,u=>(Mn.test(u)?(r.color.push(a),i.push(lM),n.push(Mn.parse(u))):u.startsWith(z7)?(r.var.push(a),i.push(V7),n.push(u)):(r.number.push(a),i.push(oM),n.push(parseFloat(u))),++a,D2)).split(D2);return{values:n,split:c,indexes:r,types:i}}function cM(t){return Qf(t).values}function uM(t){const{split:e,types:n}=Qf(t),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const c=n[o];c===oM?a+=Tf(i[o]):c===lM?a+=Mn.transform(i[o]):a+=i[o]}return a}}const B7=t=>typeof t=="number"?0:Mn.test(t)?Mn.getAnimatableNone(t):t;function U7(t){const e=cM(t);return uM(t)(e.map(B7))}const Go={test:j7,parse:cM,createTransformer:uM,getAnimatableNone:U7};function yb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function F7({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;i=yb(u,c,t+1/3),a=yb(u,c,t),o=yb(u,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function Im(t,e){return n=>n>0?e:t}const sn=(t,e,n)=>t+(e-t)*n,bb=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},G7=[Rx,jl,eu],$7=t=>G7.find(e=>e.test(t));function N2(t){const e=$7(t);if(!e)return!1;let n=e.parse(t);return e===eu&&(n=F7(n)),n}const I2=(t,e)=>{const n=N2(t),r=N2(e);if(!n||!r)return Im(t,e);const i={...n};return a=>(i.red=bb(n.red,r.red,a),i.green=bb(n.green,r.green,a),i.blue=bb(n.blue,r.blue,a),i.alpha=sn(n.alpha,r.alpha,a),jl.transform(i))},Dx=new Set(["none","hidden"]);function H7(t,e){return Dx.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function q7(t,e){return n=>sn(t,e,n)}function q_(t){return typeof t=="number"?q7:typeof t=="string"?G_(t)?Im:Mn.test(t)?I2:W7:Array.isArray(t)?dM:typeof t=="object"?Mn.test(t)?I2:Y7:Im}function dM(t,e){const n=[...t],r=n.length,i=t.map((a,o)=>q_(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function Y7(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=q_(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function X7(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=t.indexes[a][r[a]],c=t.values[o]??0;n[i]=c,r[a]++}return n}const W7=(t,e)=>{const n=Go.createTransformer(e),r=Qf(t),i=Qf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Dx.has(t)&&!i.values.length||Dx.has(e)&&!r.values.length?H7(t,e):Rh(dM(X7(r,i),i.values),n):Im(t,e)};function fM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?sn(t,e,n):q_(t)(t,e)}const K7=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>en.update(e,n),stop:()=>Fo(e),now:()=>er.isProcessing?er.timestamp:Pr.now()}},hM=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Mm=2e4;function Y_(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Mm;)e+=n,r=t.next(e);return e>=Mm?1/0:e}function Q7(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Y_(r),Mm);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:wi(i)}}const Z7=5;function pM(t,e,n){const r=Math.max(e-Z7,0);return YI(n-t(r),e-r)}const hn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},xb=.001;function J7({duration:t=hn.duration,bounce:e=hn.bounce,velocity:n=hn.velocity,mass:r=hn.mass}){let i,a,o=1-e;o=Ts(hn.minDamping,hn.maxDamping,o),t=Ts(hn.minDuration,hn.maxDuration,wi(t)),o<1?(i=d=>{const h=d*o,g=h*t,m=h-n,b=Nx(d,o),_=Math.exp(-g);return xb-m/b*_},a=d=>{const g=d*o*t,m=g*n+n,b=Math.pow(o,2)*Math.pow(d,2)*t,_=Math.exp(-g),w=Nx(Math.pow(d,2),o);return(-i(d)+xb>0?-1:1)*((m-b)*_)/w}):(i=d=>{const h=Math.exp(-d*t),g=(d-n)*t+1;return-xb+h*g},a=d=>{const h=Math.exp(-d*t),g=(n-d)*(t*t);return h*g});const c=5/t,u=tG(i,a,c);if(t=Ia(t),isNaN(u))return{stiffness:hn.stiffness,damping:hn.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const eG=12;function tG(t,e,n){let r=n;for(let i=1;i<eG;i++)r=r-t(r)/e(r);return r}function Nx(t,e){return t*Math.sqrt(1-e*e)}const nG=["duration","bounce"],rG=["stiffness","damping","mass"];function M2(t,e){return e.some(n=>t[n]!==void 0)}function iG(t){let e={velocity:hn.velocity,stiffness:hn.stiffness,damping:hn.damping,mass:hn.mass,isResolvedFromDuration:!1,...t};if(!M2(t,rG)&&M2(t,nG))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Ts(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:hn.mass,stiffness:i,damping:a}}else{const n=J7(t);e={...e,...n,mass:hn.mass},e.isResolvedFromDuration=!0}return e}function Om(t=hn.visualDuration,e=hn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:d,mass:h,duration:g,velocity:m,isResolvedFromDuration:b}=iG({...n,velocity:-wi(n.velocity||0)}),_=m||0,w=d/(2*Math.sqrt(u*h)),E=o-a,T=wi(Math.sqrt(u/h)),C=Math.abs(E)<5;r||(r=C?hn.restSpeed.granular:hn.restSpeed.default),i||(i=C?hn.restDelta.granular:hn.restDelta.default);let N;if(w<1){const P=Nx(T,w);N=M=>{const A=Math.exp(-w*T*M);return o-A*((_+w*T*E)/P*Math.sin(P*M)+E*Math.cos(P*M))}}else if(w===1)N=P=>o-Math.exp(-T*P)*(E+(_+T*E)*P);else{const P=T*Math.sqrt(w*w-1);N=M=>{const A=Math.exp(-w*T*M),k=Math.min(P*M,300);return o-A*((_+w*T*E)*Math.sinh(k)+P*E*Math.cosh(k))/P}}const V={calculatedDuration:b&&g||null,next:P=>{const M=N(P);if(b)c.done=P>=g;else{let A=P===0?_:0;w<1&&(A=P===0?Ia(_):pM(N,P,M));const k=Math.abs(A)<=r,D=Math.abs(o-M)<=i;c.done=k&&D}return c.value=c.done?o:M,c},toString:()=>{const P=Math.min(Y_(V),Mm),M=hM(A=>V.next(P*A).value,P,30);return P+"ms "+M},toTransition:()=>{}};return V}Om.applyToOptions=t=>{const e=Q7(t,100,Om);return t.ease=e.ease,t.duration=Ia(e.duration),t.type="keyframes",t};function Ix({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:d=.5,restSpeed:h}){const g=t[0],m={done:!1,value:g},b=k=>c!==void 0&&k<c||u!==void 0&&k>u,_=k=>c===void 0?u:u===void 0||Math.abs(c-k)<Math.abs(u-k)?c:u;let w=n*e;const E=g+w,T=o===void 0?E:o(E);T!==E&&(w=T-g);const C=k=>-w*Math.exp(-k/r),N=k=>T+C(k),V=k=>{const D=C(k),j=N(k);m.done=Math.abs(D)<=d,m.value=m.done?T:j};let P,M;const A=k=>{b(m.value)&&(P=k,M=Om({keyframes:[m.value,_(m.value)],velocity:pM(N,k,m.value),damping:i,stiffness:a,restDelta:d,restSpeed:h}))};return A(0),{calculatedDuration:null,next:k=>{let D=!1;return!M&&P===void 0&&(D=!0,V(k),A(k)),P!==void 0&&k>=P?M.next(k-P):(!D&&V(k),m)}}}function aG(t,e,n){const r=[],i=n||As.mix||fM,a=t.length-1;for(let o=0;o<a;o++){let c=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Ei:e;c=Rh(u,c)}r.push(c)}return r}function sG(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(V_(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=aG(e,r,i),u=c.length,d=h=>{if(o&&h<t[0])return e[0];let g=0;if(u>1)for(;g<t.length-2&&!(h<t[g+1]);g++);const m=Wf(t[g],t[g+1],h);return c[g](m)};return n?h=>d(Ts(t[0],t[a-1],h)):d}function oG(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Wf(0,e,r);t.push(sn(n,1,i))}}function lG(t){const e=[0];return oG(e,t.length-1),e}function cG(t,e){return t.map(n=>n*e)}function uG(t,e){return t.map(()=>e||nM).splice(0,t.length-1)}function Af({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=_7(r)?r.map(k2):k2(r),a={done:!1,value:e[0]},o=cG(n&&n.length===e.length?n:lG(e),t),c=sG(o,e,{ease:Array.isArray(i)?i:uG(e,i)});return{calculatedDuration:t,next:u=>(a.value=c(u),a.done=u>=t,a)}}const dG=t=>t!==null;function X_(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(dG),c=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const fG={decay:Ix,inertia:Ix,tween:Af,keyframes:Af,spring:Om};function gM(t){typeof t.type=="string"&&(t.type=fG[t.type])}class W_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const hG=t=>t/100;class K_ extends W_{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Pr.now()&&this.tick(Pr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;gM(e);const{type:n=Af,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=e;let{keyframes:c}=e;const u=n||Af;u!==Af&&typeof c[0]!="number"&&(this.mixKeyframes=Rh(hG,fM(c[0],c[1])),c=[0,100]);const d=u({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Y_(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:g,repeatType:m,repeatDelay:b,type:_,onUpdate:w,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-d*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let N=this.currentTime,V=r;if(g){const k=Math.min(this.currentTime,i)/c;let D=Math.floor(k),j=k%1;!j&&k>=1&&(j=1),j===1&&D--,D=Math.min(D,g+1),!!(D%2)&&(m==="reverse"?(j=1-j,b&&(j-=b/c)):m==="mirror"&&(V=o)),N=Ts(0,1,j)*c}const P=C?{done:!1,value:h[0]}:V.next(N);a&&(P.value=a(P.value));let{done:M}=P;!C&&u!==null&&(M=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return A&&_!==Ix&&(P.value=X_(h,this.options,E,this.speed)),w&&w(P.value),A&&this.finish(),P}then(e,n){return this.finished.then(e,n)}get duration(){return wi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+wi(e)}get time(){return wi(this.currentTime)}set time(e){e=Ia(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Pr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=wi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=K7,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function pG(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Vl=t=>t*180/Math.PI,Mx=t=>{const e=Vl(Math.atan2(t[1],t[0]));return Ox(e)},gG={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Mx,rotateZ:Mx,skewX:t=>Vl(Math.atan(t[1])),skewY:t=>Vl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Ox=t=>(t=t%360,t<0&&(t+=360),t),O2=Mx,P2=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),j2=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),mG={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:P2,scaleY:j2,scale:t=>(P2(t)+j2(t))/2,rotateX:t=>Ox(Vl(Math.atan2(t[6],t[5]))),rotateY:t=>Ox(Vl(Math.atan2(-t[2],t[0]))),rotateZ:O2,rotate:O2,skewX:t=>Vl(Math.atan(t[4])),skewY:t=>Vl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Px(t){return t.includes("scale")?1:0}function jx(t,e){if(!t||t==="none")return Px(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=mG,i=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=gG,i=c}if(!i)return Px(e);const a=r[e],o=i[1].split(",").map(yG);return typeof a=="function"?a(o):o[a]}const vG=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return jx(n,e)};function yG(t){return parseFloat(t.trim())}const Wu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ku=new Set(Wu),V2=t=>t===Xu||t===et,bG=new Set(["x","y","z"]),xG=Wu.filter(t=>!bG.has(t));function _G(t){const e=[];return xG.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Fl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>jx(e,"x"),y:(t,{transform:e})=>jx(e,"y")};Fl.translateX=Fl.x;Fl.translateY=Fl.y;const Gl=new Set;let Vx=!1,zx=!1,Lx=!1;function mM(){if(zx){const t=Array.from(Gl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=_G(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{r.getValue(a)?.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}zx=!1,Vx=!1,Gl.forEach(t=>t.complete(Lx)),Gl.clear()}function vM(){Gl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(zx=!0)})}function wG(){Lx=!0,vM(),mM(),Lx=!1}class Q_{constructor(e,n,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Gl.add(this),Vx||(Vx=!0,en.read(vM),en.resolveKeyframes(mM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const c=r.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}pG(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Gl.delete(this)}cancel(){this.state==="scheduled"&&(Gl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const SG=t=>t.startsWith("--");function EG(t,e,n){SG(e)?t.style.setProperty(e,n):t.style[e]=n}const TG=z_(()=>window.ScrollTimeline!==void 0),AG={};function CG(t,e){const n=z_(t);return()=>AG[e]??n()}const yM=CG(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),pf=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,z2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:pf([0,.65,.55,1]),circOut:pf([.55,0,1,.45]),backIn:pf([.31,.01,.66,-.59]),backOut:pf([.33,1.53,.69,.99])};function bM(t,e){if(t)return typeof t=="function"?yM()?hM(t,e):"ease-out":rM(t)?pf(t):Array.isArray(t)?t.map(n=>bM(n,e)||z2.easeOut):z2[t]}function kG(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:u}={},d=void 0){const h={[e]:n};u&&(h.offset=u);const g=bM(c,i);Array.isArray(g)&&(h.easing=g);const m={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(h,m)}function xM(t){return typeof t=="function"&&"applyToOptions"in t}function RG({type:t,...e}){return xM(t)&&yM()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class DG extends W_{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,V_(typeof e.type!="string");const d=RG(e);this.animation=kG(n,r,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const h=X_(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(h):EG(n,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return wi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+wi(e)}get time(){return wi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ia(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&TG()?(this.animation.timeline=e,Ei):n(this)}}const _M={anticipate:JI,backInOut:ZI,circInOut:tM};function NG(t){return t in _M}function IG(t){typeof t.ease=="string"&&NG(t.ease)&&(t.ease=_M[t.ease])}const L2=10;class MG extends DG{constructor(e){IG(e),gM(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new K_({...o,autoplay:!1}),u=Ia(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-L2).value,c.sample(u).value,L2),c.stop()}}const B2=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Go.test(t)||t==="0")&&!t.startsWith("url("));function OG(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function PG(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=B2(i,e),c=B2(a,e);return!o||!c?!1:OG(t)||(n==="spring"||xM(n))&&r}function Bx(t){t.duration=0,t.type="keyframes"}const jG=new Set(["opacity","clipPath","filter","transform"]),VG=z_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function zG(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return VG()&&n&&jG.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const LG=40;class BG extends W_{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:u,motionValue:d,element:h,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Pr.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,name:u,motionValue:d,element:h,...g},b=h?.KeyframeResolver||Q_;this.keyframeResolver=new b(c,(_,w,E)=>this.onKeyframesResolved(_,w,m,!E),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Pr.now(),PG(e,a,o,c)||((As.instantAnimations||!u)&&h?.(X_(e,r,n)),e[0]=e[e.length-1],Bx(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>LG?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},b=!d&&zG(m)?new MG({...m,element:m.motionValue.owner.current}):new K_(m);b.finished.then(()=>this.notifyFinished()).catch(Ei),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),wG()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const UG=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function FG(t){const e=UG.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function wM(t,e,n=1){const[r,i]=FG(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return $I(o)?parseFloat(o):o}return G_(i)?wM(i,e,n+1):i}function Z_(t,e){return t?.[e]??t?.default??t}const SM=new Set(["width","height","top","left","right","bottom",...Wu]),GG={test:t=>t==="auto",parse:t=>t},EM=t=>e=>e.test(t),TM=[Xu,et,Ma,go,O7,M7,GG],U2=t=>TM.find(EM(t));function $G(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||qI(t):!0}const HG=new Set(["brightness","contrast","saturate","opacity"]);function qG(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match($_)||[];if(!r)return t;const i=n.replace(r,"");let a=HG.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const YG=/\b([a-z-]*)\(.*?\)/gu,Ux={...Go,getAnimatableNone:t=>{const e=t.match(YG);return e?e.map(qG).join(" "):t}},F2={...Xu,transform:Math.round},XG={rotate:go,rotateX:go,rotateY:go,rotateZ:go,scale:wg,scaleX:wg,scaleY:wg,scaleZ:wg,skew:go,skewX:go,skewY:go,distance:et,translateX:et,translateY:et,translateZ:et,x:et,y:et,z:et,perspective:et,transformPerspective:et,opacity:Kf,originX:R2,originY:R2,originZ:et},J_={borderWidth:et,borderTopWidth:et,borderRightWidth:et,borderBottomWidth:et,borderLeftWidth:et,borderRadius:et,radius:et,borderTopLeftRadius:et,borderTopRightRadius:et,borderBottomRightRadius:et,borderBottomLeftRadius:et,width:et,maxWidth:et,height:et,maxHeight:et,top:et,right:et,bottom:et,left:et,padding:et,paddingTop:et,paddingRight:et,paddingBottom:et,paddingLeft:et,margin:et,marginTop:et,marginRight:et,marginBottom:et,marginLeft:et,backgroundPositionX:et,backgroundPositionY:et,...XG,zIndex:F2,fillOpacity:Kf,strokeOpacity:Kf,numOctaves:F2},WG={...J_,color:Mn,backgroundColor:Mn,outlineColor:Mn,fill:Mn,stroke:Mn,borderColor:Mn,borderTopColor:Mn,borderRightColor:Mn,borderBottomColor:Mn,borderLeftColor:Mn,filter:Ux,WebkitFilter:Ux},AM=t=>WG[t];function CM(t,e){let n=AM(t);return n!==Ux&&(n=Go),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const KG=new Set(["auto","none","0"]);function QG(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!KG.has(a)&&Qf(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=CM(n,i)}class ZG extends Q_{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),G_(d))){const h=wM(d,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!SM.has(r)||e.length!==2)return;const[i,a]=e,o=U2(i),c=U2(a);if(o!==c)if(V2(o)&&V2(c))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else Fl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||$G(e[i]))&&r.push(i);r.length&&QG(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=Fl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function JG(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const kM=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function RM(t){return HI(t)&&"offsetHeight"in t}const G2=30,e$=t=>!isNaN(parseFloat(t));class t${constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Pr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Pr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=e$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new L_);const r=this.events[e].add(n);return e==="change"?()=>{r(),en.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Pr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>G2)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,G2);return YI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Cu(t,e){return new t$(t,e)}const{schedule:ew}=iM(queueMicrotask,!1),Ui={x:!1,y:!1};function DM(){return Ui.x||Ui.y}function n$(t){return t==="x"||t==="y"?Ui[t]?null:(Ui[t]=!0,()=>{Ui[t]=!1}):Ui.x||Ui.y?null:(Ui.x=Ui.y=!0,()=>{Ui.x=Ui.y=!1})}function NM(t,e){const n=JG(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function $2(t){return!(t.pointerType==="touch"||DM())}function r$(t,e,n={}){const[r,i,a]=NM(t,n),o=c=>{if(!$2(c))return;const{target:u}=c,d=e(u,c);if(typeof d!="function"||!u)return;const h=g=>{$2(g)&&(d(g),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const IM=(t,e)=>e?t===e?!0:IM(t,e.parentElement):!1,tw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,i$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function a$(t){return i$.has(t.tagName)||t.tabIndex!==-1}const Zg=new WeakSet;function H2(t){return e=>{e.key==="Enter"&&t(e)}}function _b(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const s$=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=H2(()=>{if(Zg.has(n))return;_b(n,"down");const i=H2(()=>{_b(n,"up")}),a=()=>_b(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function q2(t){return tw(t)&&!DM()}function o$(t,e,n={}){const[r,i,a]=NM(t,n),o=c=>{const u=c.currentTarget;if(!q2(c))return;Zg.add(u);const d=e(u,c),h=(b,_)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",m),Zg.has(u)&&Zg.delete(u),q2(b)&&typeof d=="function"&&d(b,{success:_})},g=b=>{h(b,u===window||u===document||n.useGlobalTarget||IM(u,b.target))},m=b=>{h(b,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",m,i)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),RM(c)&&(c.addEventListener("focus",d=>s$(d,i)),!a$(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function MM(t){return HI(t)&&"ownerSVGElement"in t}function l$(t){return MM(t)&&t.tagName==="svg"}const ur=t=>!!(t&&t.getVelocity),c$=[...TM,Mn,Go],u$=t=>c$.find(EM(t)),nw=B.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Y2(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function d$(...t){return e=>{let n=!1;const r=t.map(i=>{const a=Y2(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():Y2(t[i],null)}}}}function f$(...t){return B.useCallback(d$(...t),t)}class h$ extends B.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=RM(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function p$({children:t,isPresent:e,anchorX:n,root:r}){const i=B.useId(),a=B.useRef(null),o=B.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=B.useContext(nw),u=f$(a,t?.ref);return B.useInsertionEffect(()=>{const{width:d,height:h,top:g,left:m,right:b}=o.current;if(e||!a.current||!d||!h)return;const _=n==="left"?`left: ${m}`:`right: ${b}`;a.current.dataset.motionPopId=i;const w=document.createElement("style");c&&(w.nonce=c);const E=r??document.head;return E.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${_}px !important;
            top: ${g}px !important;
          }
        `),()=>{E.contains(w)&&E.removeChild(w)}},[e]),v.jsx(h$,{isPresent:e,childRef:a,sizeRef:o,children:B.cloneElement(t,{ref:u})})}const g$=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:c,root:u})=>{const d=k0(m$),h=B.useId();let g=!0,m=B.useMemo(()=>(g=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:b=>{d.set(b,!0);for(const _ of d.values())if(!_)return;r&&r()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[n,d,r]);return a&&g&&(m={...m}),B.useMemo(()=>{d.forEach((b,_)=>d.set(_,!1))},[n]),B.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(t=v.jsx(p$,{isPresent:n,anchorX:c,root:u,children:t})),v.jsx(R0.Provider,{value:m,children:t})};function m$(){return new Map}function OM(t=!0){const e=B.useContext(R0);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=B.useId();B.useEffect(()=>{if(t)return i(a)},[t]);const o=B.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const Sg=t=>t.key||"";function X2(t){const e=[];return B.Children.forEach(t,n=>{B.isValidElement(n)&&e.push(n)}),e}const ti=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",root:u})=>{const[d,h]=OM(o),g=B.useMemo(()=>X2(t),[t]),m=o&&!d?[]:g.map(Sg),b=B.useRef(!0),_=B.useRef(g),w=k0(()=>new Map),[E,T]=B.useState(g),[C,N]=B.useState(g);O_(()=>{b.current=!1,_.current=g;for(let M=0;M<C.length;M++){const A=Sg(C[M]);m.includes(A)?w.delete(A):w.get(A)!==!0&&w.set(A,!1)}},[C,m.length,m.join("-")]);const V=[];if(g!==E){let M=[...g];for(let A=0;A<C.length;A++){const k=C[A],D=Sg(k);m.includes(D)||(M.splice(A,0,k),V.push(k))}return a==="wait"&&V.length&&(M=V),N(X2(M)),T(g),null}const{forceRender:P}=B.useContext(I_);return v.jsx(v.Fragment,{children:C.map(M=>{const A=Sg(M),k=o&&!d?!1:g===C||m.includes(A),D=()=>{if(w.has(A))w.set(A,!0);else return;let j=!0;w.forEach(L=>{L||(j=!1)}),j&&(P?.(),N(_.current),o&&h?.(),r&&r())};return v.jsx(g$,{isPresent:k,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:k?void 0:D,anchorX:c,children:M},A)})})},PM=B.createContext({strict:!1}),W2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ku={};for(const t in W2)ku[t]={isEnabled:e=>W2[t].some(n=>!!e[n])};function v$(t){for(const e in t)ku[e]={...ku[e],...t[e]}}const y$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||y$.has(t)}let jM=t=>!Pm(t);function b$(t){typeof t=="function"&&(jM=e=>e.startsWith("on")?!Pm(e):t(e))}try{b$(require("@emotion/is-prop-valid").default)}catch{}function x$(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(jM(i)||n===!0&&Pm(i)||!e&&!Pm(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const D0=B.createContext({});function N0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Zf(t){return typeof t=="string"||Array.isArray(t)}const rw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],iw=["initial",...rw];function I0(t){return N0(t.animate)||iw.some(e=>Zf(t[e]))}function VM(t){return!!(I0(t)||t.variants)}function _$(t,e){if(I0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Zf(n)?n:void 0,animate:Zf(r)?r:void 0}}return t.inherit!==!1?e:{}}function w$(t){const{initial:e,animate:n}=_$(t,B.useContext(D0));return B.useMemo(()=>({initial:e,animate:n}),[K2(e),K2(n)])}function K2(t){return Array.isArray(t)?t.join(" "):t}const Jf={};function S$(t){for(const e in t)Jf[e]=t[e],F_(e)&&(Jf[e].isCSSVariable=!0)}function zM(t,{layout:e,layoutId:n}){return Ku.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Jf[t]||t==="opacity")}const E$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},T$=Wu.length;function A$(t,e,n){let r="",i=!0;for(let a=0;a<T$;a++){const o=Wu[a],c=t[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const d=kM(c,J_[o]);if(!u){i=!1;const h=E$[o]||o;r+=`${h}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function aw(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let o=!1,c=!1;for(const u in e){const d=e[u];if(Ku.has(u)){o=!0;continue}else if(F_(u)){i[u]=d;continue}else{const h=kM(d,J_[u]);u.startsWith("origin")?(c=!0,a[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=A$(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:h=0}=a;r.transformOrigin=`${u} ${d} ${h}`}}const sw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function LM(t,e,n){for(const r in e)!ur(e[r])&&!zM(r,n)&&(t[r]=e[r])}function C$({transformTemplate:t},e){return B.useMemo(()=>{const n=sw();return aw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function k$(t,e){const n=t.style||{},r={};return LM(r,n,t),Object.assign(r,C$(t,e)),r}function R$(t,e){const n={},r=k$(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const D$={offset:"stroke-dashoffset",array:"stroke-dasharray"},N$={offset:"strokeDashoffset",array:"strokeDasharray"};function I$(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?D$:N$;t[a.offset]=et.transform(-r);const o=et.transform(e),c=et.transform(n);t[a.array]=`${o} ${c}`}function BM(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...c},u,d,h){if(aw(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:m}=t;g.transform&&(m.transform=g.transform,delete g.transform),(m.transform||g.transformOrigin)&&(m.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),i!==void 0&&I$(g,i,a,o,!1)}const UM=()=>({...sw(),attrs:{}}),FM=t=>typeof t=="string"&&t.toLowerCase()==="svg";function M$(t,e,n,r){const i=B.useMemo(()=>{const a=UM();return BM(a,e,FM(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};LM(a,t.style,t),i.style={...a,...i.style}}return i}const O$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ow(t){return typeof t!="string"||t.includes("-")?!1:!!(O$.indexOf(t)>-1||/[A-Z]/u.test(t))}function P$(t,e,n,{latestValues:r},i,a=!1){const c=(ow(t)?M$:R$)(e,r,i,t),u=x$(e,typeof t=="string",a),d=t!==B.Fragment?{...u,...c,ref:n}:{},{children:h}=e,g=B.useMemo(()=>ur(h)?h.get():h,[h]);return B.createElement(t,{...d,children:g})}function Q2(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function lw(t,e,n,r){if(typeof e=="function"){const[i,a]=Q2(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=Q2(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Jg(t){return ur(t)?t.get():t}function j$({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:V$(n,r,i,t),renderState:e()}}function V$(t,e,n,r){const i={},a=r(t,{});for(const m in a)i[m]=Jg(a[m]);let{initial:o,animate:c}=t;const u=I0(t),d=VM(t);e&&d&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const g=h?c:o;if(g&&typeof g!="boolean"&&!N0(g)){const m=Array.isArray(g)?g:[g];for(let b=0;b<m.length;b++){const _=lw(t,m[b]);if(_){const{transitionEnd:w,transition:E,...T}=_;for(const C in T){let N=T[C];if(Array.isArray(N)){const V=h?N.length-1:0;N=N[V]}N!==null&&(i[C]=N)}for(const C in w)i[C]=w[C]}}}return i}const GM=t=>(e,n)=>{const r=B.useContext(D0),i=B.useContext(R0),a=()=>j$(t,e,r,i);return n?a():k0(a)};function cw(t,e,n){const{style:r}=t,i={};for(const a in r)(ur(r[a])||e.style&&ur(e.style[a])||zM(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const z$=GM({scrapeMotionValuesFromProps:cw,createRenderState:sw});function $M(t,e,n){const r=cw(t,e,n);for(const i in t)if(ur(t[i])||ur(e[i])){const a=Wu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const L$=GM({scrapeMotionValuesFromProps:$M,createRenderState:UM}),B$=Symbol.for("motionComponentSymbol");function tu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function U$(t,e,n){return B.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):tu(n)&&(n.current=r))},[e])}const uw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),F$="framerAppearId",HM="data-"+uw(F$),qM=B.createContext({});function G$(t,e,n,r,i){const{visualElement:a}=B.useContext(D0),o=B.useContext(PM),c=B.useContext(R0),u=B.useContext(nw).reducedMotion,d=B.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,g=B.useContext(qM);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&$$(d.current,n,i,g);const m=B.useRef(!1);B.useInsertionEffect(()=>{h&&m.current&&h.update(n,c)});const b=n[HM],_=B.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return O_(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),_.current&&h.animationState&&h.animationState.animateChanges())}),B.useEffect(()=>{h&&(!_.current&&h.animationState&&h.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),_.current=!1),h.enteringChildren=void 0)}),h}function $$(t,e,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:YM(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&tu(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function YM(t){if(t)return t.options.allowProjection!==!1?t.projection:YM(t.parent)}function wb(t,{forwardMotionProps:e=!1}={},n,r){n&&v$(n);const i=ow(t)?L$:z$;function a(c,u){let d;const h={...B.useContext(nw),...c,layoutId:H$(c)},{isStatic:g}=h,m=w$(c),b=i(c,g);if(!g&&M_){q$();const _=Y$(h);d=_.MeasureLayout,m.visualElement=G$(t,b,h,r,_.ProjectionNode)}return v.jsxs(D0.Provider,{value:m,children:[d&&m.visualElement?v.jsx(d,{visualElement:m.visualElement,...h}):null,P$(t,c,U$(b,m.visualElement,u),b,g,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=B.forwardRef(a);return o[B$]=t,o}function H$({layoutId:t}){const e=B.useContext(I_).id;return e&&t!==void 0?e+"-"+t:t}function q$(t,e){B.useContext(PM).strict}function Y$(t){const{drag:e,layout:n}=ku;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function X$(t,e){if(typeof Proxy>"u")return wb;const n=new Map,r=(a,o)=>wb(a,o,t,e),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,wb(o,void 0,t,e)),n.get(o))})}function XM({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function W$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function K$(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Sb(t){return t===void 0||t===1}function Fx({scale:t,scaleX:e,scaleY:n}){return!Sb(t)||!Sb(e)||!Sb(n)}function Rl(t){return Fx(t)||WM(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function WM(t){return Z2(t.x)||Z2(t.y)}function Z2(t){return t&&t!=="0%"}function jm(t,e,n){const r=t-n,i=e*r;return n+i}function J2(t,e,n,r,i){return i!==void 0&&(t=jm(t,i,r)),jm(t,n,r)+e}function Gx(t,e=0,n=1,r,i){t.min=J2(t.min,e,n,r,i),t.max=J2(t.max,e,n,r,i)}function KM(t,{x:e,y:n}){Gx(t.x,e.translate,e.scale,e.originPoint),Gx(t.y,n.translate,n.scale,n.originPoint)}const ek=.999999999999,tk=1.0000000000001;function Q$(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,o;for(let c=0;c<i;c++){a=n[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ru(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,KM(t,o)),r&&Rl(a.latestValues)&&ru(t,a.latestValues))}e.x<tk&&e.x>ek&&(e.x=1),e.y<tk&&e.y>ek&&(e.y=1)}function nu(t,e){t.min=t.min+e,t.max=t.max+e}function nk(t,e,n,r,i=.5){const a=sn(t.min,t.max,i);Gx(t,e,n,a,r)}function ru(t,e){nk(t.x,e.x,e.scaleX,e.scale,e.originX),nk(t.y,e.y,e.scaleY,e.scale,e.originY)}function QM(t,e){return XM(K$(t.getBoundingClientRect(),e))}function Z$(t,e,n){const r=QM(t,n),{scroll:i}=e;return i&&(nu(r.x,i.offset.x),nu(r.y,i.offset.y)),r}const rk=()=>({translate:0,scale:1,origin:0,originPoint:0}),iu=()=>({x:rk(),y:rk()}),ik=()=>({min:0,max:0}),bn=()=>({x:ik(),y:ik()}),$x={current:null},ZM={current:!1};function J$(){if(ZM.current=!0,!!M_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>$x.current=t.matches;t.addEventListener("change",e),e()}else $x.current=!1}const eH=new WeakMap;function tH(t,e,n){for(const r in e){const i=e[r],a=n[r];if(ur(i))t.addValue(r,i);else if(ur(a))t.addValue(r,Cu(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Cu(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const ak=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class nH{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Q_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Pr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,en.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=I0(n),this.isVariantNode=VM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in g){const b=g[m];u[m]!==void 0&&ur(b)&&b.set(u[m])}}mount(e){this.current=e,eH.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),ZM.current||J$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$x.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Fo(this.notifyUpdate),Fo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ku.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&en.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ku){const n=ku[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<ak.length;r++){const i=ak[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=tH(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Cu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&($I(r)||qI(r))?r=parseFloat(r):!u$(r)&&Go.test(n)&&(r=CM(e,n)),this.setBaseTarget(e,ur(r)?r.get():r)),ur(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=lw(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ur(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new L_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){ew.render(this.render)}}class JM extends nH{constructor(){super(...arguments),this.KeyframeResolver=ZG}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ur(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function e4(t,{style:e,vars:n},r,i){const a=t.style;let o;for(o in e)a[o]=e[o];i?.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function rH(t){return window.getComputedStyle(t)}class iH extends JM{constructor(){super(...arguments),this.type="html",this.renderInstance=e4}readValueFromInstance(e,n){if(Ku.has(n))return this.projection?.isProjecting?Px(n):vG(e,n);{const r=rH(e),i=(F_(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return QM(e,n)}build(e,n,r){aw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return cw(e,n,r)}}const t4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function aH(t,e,n,r){e4(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(t4.has(i)?i:uw(i),e.attrs[i])}class sH extends JM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=bn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ku.has(n)){const r=AM(n);return r&&r.default||0}return n=t4.has(n)?n:uw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return $M(e,n,r)}build(e,n,r){BM(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){aH(e,n,r,i)}mount(e){this.isSVGTag=FM(e.tagName),super.mount(e)}}const oH=(t,e)=>ow(t)?new sH(e):new iH(e,{allowProjection:t!==B.Fragment});function mu(t,e,n){const r=t.getProps();return lw(r,e,n!==void 0?n:r.custom,t)}const Hx=t=>Array.isArray(t);function lH(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Cu(n))}function cH(t){return Hx(t)?t[t.length-1]||0:t}function dw(t,e){const n=mu(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const c=cH(a[o]);lH(t,o,c)}}function uH(t){return!!(ur(t)&&t.add)}function qx(t,e){const n=t.getValue("willChange");if(uH(n))return n.add(e);if(!n&&As.WillChange){const r=new As.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function n4(t){return t.props[HM]}const dH=t=>t!==null;function fH(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(dH),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const hH={type:"spring",stiffness:500,damping:25,restSpeed:10},pH=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),gH={type:"keyframes",duration:.8},mH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vH=(t,{keyframes:e})=>e.length>2?gH:Ku.has(t)?t.startsWith("scale")?pH(e[1]):hH:mH;function yH({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const fw=(t,e,n,r={},i,a)=>o=>{const c=Z_(r,t)||{},u=c.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Ia(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:m=>{e.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:i};yH(c)||Object.assign(h,vH(t,h)),h.duration&&(h.duration=Ia(h.duration)),h.repeatDelay&&(h.repeatDelay=Ia(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let g=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Bx(h),h.delay===0&&(g=!0)),(As.instantAnimations||As.skipAnimations)&&(g=!0,Bx(h),h.delay=0),h.allowFlatten=!c.type&&!c.ease,g&&!a&&e.get()!==void 0){const m=fH(h.keyframes,c);if(m!==void 0){en.update(()=>{h.onUpdate(m),h.onComplete()});return}}return c.isSync?new K_(h):new BG(h)};function bH({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function r4(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;r&&(a=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in c){const g=t.getValue(h,t.latestValues[h]??null),m=c[h];if(m===void 0||d&&bH(d,h))continue;const b={delay:n,...Z_(a||{},h)},_=g.get();if(_!==void 0&&!g.isAnimating&&!Array.isArray(m)&&m===_&&!b.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const T=n4(t);if(T){const C=window.MotionHandoffAnimation(T,h,en);C!==null&&(b.startTime=C,w=!0)}}qx(t,h),g.start(fw(h,g,m,t.shouldReduceMotion&&SM.has(h)?{type:!1}:b,t,w));const E=g.animation;E&&u.push(E)}return o&&Promise.all(u).then(()=>{en.update(()=>{o&&dw(t,o)})}),u}function i4(t,e,n,r=0,i=1){const a=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=t.size,c=(o-1)*r;return typeof n=="function"?n(a,o):i===1?a*r:c-a*r}function Yx(t,e,n={}){const r=mu(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(r4(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:g}=i;return xH(t,e,u,d,h,g,n)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,d]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(n.delay)])}function xH(t,e,n=0,r=0,i=0,a=1,o){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(Yx(u,e,{...o,delay:n+(typeof r=="function"?0:r)+i4(t.variantChildren,u,r,i,a)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function a4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Yx(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=Yx(t,e,n);else{const i=typeof e=="function"?mu(t,e,n.custom):e;r=Promise.all(r4(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function s4(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const _H=iw.length;function o4(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?o4(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<_H;n++){const r=iw[n],i=t.props[r];(Zf(i)||i===!1)&&(e[r]=i)}return e}const wH=[...rw].reverse(),SH=rw.length;function EH(t){return e=>Promise.all(e.map(({animation:n,options:r})=>a4(t,n,r)))}function TH(t){let e=EH(t),n=sk(),r=!0;const i=u=>(d,h)=>{const g=mu(t,h,u==="exit"?t.presenceContext?.custom:void 0);if(g){const{transition:m,transitionEnd:b,..._}=g;d={...d,..._,...b}}return d};function a(u){e=u(t)}function o(u){const{props:d}=t,h=o4(t.parent)||{},g=[],m=new Set;let b={},_=1/0;for(let E=0;E<SH;E++){const T=wH[E],C=n[T],N=d[T]!==void 0?d[T]:h[T],V=Zf(N),P=T===u?C.isActive:null;P===!1&&(_=E);let M=N===h[T]&&N!==d[T]&&V;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),C.protectedKeys={...b},!C.isActive&&P===null||!N&&!C.prevProp||N0(N)||typeof N=="boolean")continue;const A=AH(C.prevProp,N);let k=A||T===u&&C.isActive&&!M&&V||E>_&&V,D=!1;const j=Array.isArray(N)?N:[N];let L=j.reduce(i(T),{});P===!1&&(L={});const{prevResolvedValues:U={}}=C,O={...U,...L},Z=W=>{k=!0,m.has(W)&&(D=!0,m.delete(W)),C.needsAnimating[W]=!0;const ee=t.getValue(W);ee&&(ee.liveStyle=!1)};for(const W in O){const ee=L[W],ie=U[W];if(b.hasOwnProperty(W))continue;let $=!1;Hx(ee)&&Hx(ie)?$=!s4(ee,ie):$=ee!==ie,$?ee!=null?Z(W):m.add(W):ee!==void 0&&m.has(W)?Z(W):C.protectedKeys[W]=!0}C.prevProp=N,C.prevResolvedValues=L,C.isActive&&(b={...b,...L}),r&&t.blockInitialAnimation&&(k=!1);const X=M&&A;k&&(!X||D)&&g.push(...j.map(W=>{const ee={type:T};if(typeof W=="string"&&r&&!X&&t.manuallyAnimateOnMount&&t.parent){const{parent:ie}=t,$=mu(ie,W);if(ie.enteringChildren&&$){const{delayChildren:F}=$.transition||{};ee.delay=i4(ie.enteringChildren,t,F)}}return{animation:W,options:ee}}))}if(m.size){const E={};if(typeof d.initial!="boolean"){const T=mu(t,Array.isArray(d.initial)?d.initial[0]:d.initial);T&&T.transition&&(E.transition=T.transition)}m.forEach(T=>{const C=t.getBaseTarget(T),N=t.getValue(T);N&&(N.liveStyle=!0),E[T]=C??null}),g.push({animation:E})}let w=!!g.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(g):Promise.resolve()}function c(u,d){if(n[u].isActive===d)return Promise.resolve();t.variantChildren?.forEach(g=>g.animationState?.setActive(u,d)),n[u].isActive=d;const h=o(u);for(const g in n)n[g].protectedKeys={};return h}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=sk()}}}function AH(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!s4(e,t):!1}function Cl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sk(){return{animate:Cl(!0),whileInView:Cl(),whileHover:Cl(),whileTap:Cl(),whileDrag:Cl(),whileFocus:Cl(),exit:Cl()}}class Qo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class CH extends Qo{constructor(e){super(e),e.animationState||(e.animationState=TH(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();N0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let kH=0;class RH extends Qo{constructor(){super(...arguments),this.id=kH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const DH={animation:{Feature:CH},exit:{Feature:RH}};function eh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ih(t){return{point:{x:t.pageX,y:t.pageY}}}const NH=t=>e=>tw(e)&&t(e,Ih(e));function Cf(t,e,n,r){return eh(t,e,NH(n),r)}const l4=1e-4,IH=1-l4,MH=1+l4,c4=.01,OH=0-c4,PH=0+c4;function xr(t){return t.max-t.min}function jH(t,e,n){return Math.abs(t-e)<=n}function ok(t,e,n,r=.5){t.origin=r,t.originPoint=sn(e.min,e.max,t.origin),t.scale=xr(n)/xr(e),t.translate=sn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=IH&&t.scale<=MH||isNaN(t.scale))&&(t.scale=1),(t.translate>=OH&&t.translate<=PH||isNaN(t.translate))&&(t.translate=0)}function kf(t,e,n,r){ok(t.x,e.x,n.x,r?r.originX:void 0),ok(t.y,e.y,n.y,r?r.originY:void 0)}function lk(t,e,n){t.min=n.min+e.min,t.max=t.min+xr(e)}function VH(t,e,n){lk(t.x,e.x,n.x),lk(t.y,e.y,n.y)}function ck(t,e,n){t.min=e.min-n.min,t.max=t.min+xr(e)}function Rf(t,e,n){ck(t.x,e.x,n.x),ck(t.y,e.y,n.y)}function yi(t){return[t("x"),t("y")]}const u4=({current:t})=>t?t.ownerDocument.defaultView:null,uk=(t,e)=>Math.abs(t-e);function zH(t,e){const n=uk(t.x,e.x),r=uk(t.y,e.y);return Math.sqrt(n**2+r**2)}class d4{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Tb(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,_=zH(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!_)return;const{point:w}=m,{timestamp:E}=er;this.history.push({...w,timestamp:E});const{onStart:T,onMove:C}=this.handlers;b||(T&&T(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,m)},this.handlePointerMove=(m,b)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Eb(b,this.transformPagePoint),en.update(this.updatePoint,!0)},this.handlePointerUp=(m,b)=>{this.end();const{onEnd:_,onSessionEnd:w,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Tb(m.type==="pointercancel"?this.lastMoveEventInfo:Eb(b,this.transformPagePoint),this.history);this.startEvent&&_&&_(m,T),w&&w(m,T)},!tw(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const c=Ih(e),u=Eb(c,this.transformPagePoint),{point:d}=u,{timestamp:h}=er;this.history=[{...d,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,Tb(u,this.history)),this.removeListeners=Rh(Cf(this.contextWindow,"pointermove",this.handlePointerMove),Cf(this.contextWindow,"pointerup",this.handlePointerUp),Cf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Fo(this.updatePoint)}}function Eb(t,e){return e?{point:e(t.point)}:t}function dk(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Tb({point:t},e){return{point:t,delta:dk(t,f4(e)),offset:dk(t,LH(e)),velocity:BH(e,.1)}}function LH(t){return t[0]}function f4(t){return t[t.length-1]}function BH(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=f4(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ia(e)));)n--;if(!r)return{x:0,y:0};const a=wi(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function UH(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?sn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?sn(n,t,r.max):Math.min(t,n)),t}function fk(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function FH(t,{top:e,left:n,bottom:r,right:i}){return{x:fk(t.x,n,i),y:fk(t.y,e,r)}}function hk(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function GH(t,e){return{x:hk(t.x,e.x),y:hk(t.y,e.y)}}function $H(t,e){let n=.5;const r=xr(t),i=xr(e);return i>r?n=Wf(e.min,e.max-r,t.min):r>i&&(n=Wf(t.min,t.max-i,e.min)),Ts(0,1,n)}function HH(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Xx=.35;function qH(t=Xx){return t===!1?t=0:t===!0&&(t=Xx),{x:pk(t,"left","right"),y:pk(t,"top","bottom")}}function pk(t,e,n){return{min:gk(t,e),max:gk(t,n)}}function gk(t,e){return typeof t=="number"?t:t[e]||0}const YH=new WeakMap;class XH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ih(g).point)},o=(g,m)=>{const{drag:b,dragPropagation:_,onDragStart:w}=this.getProps();if(b&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=n$(b),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yi(T=>{let C=this.getAxisMotionValue(T).get()||0;if(Ma.test(C)){const{projection:N}=this.visualElement;if(N&&N.layout){const V=N.layout.layoutBox[T];V&&(C=xr(V)*(parseFloat(C)/100))}}this.originPoint[T]=C}),w&&en.postRender(()=>w(g,m)),qx(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},c=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m;const{dragPropagation:b,dragDirectionLock:_,onDirectionLock:w,onDrag:E}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:T}=m;if(_&&this.currentDirection===null){this.currentDirection=WH(T),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",m.point,T),this.updateAxis("y",m.point,T),this.visualElement.render(),E&&E(g,m)},u=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m,this.stop(g,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>yi(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new d4(e,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:u4(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&en.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Eg(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=UH(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&tu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=FH(r.layoutBox,e):this.constraints=!1,this.elastic=qH(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&yi(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=HH(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!tu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=Z$(r,i.root,this.visualElement.getTransformPagePoint());let o=GH(i.layout.layoutBox,a);if(n){const c=n(W$(o));this.hasMutatedConstraints=!!c,c&&(o=XM(c))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=yi(h=>{if(!Eg(h,n,this.currentDirection))return;let g=u&&u[h]||{};o&&(g={min:0,max:0});const m=i?200:1e6,b=i?40:1e7,_={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(h,_)});return Promise.all(d).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return qx(this.visualElement,e),r.start(fw(e,r,0,n,this.visualElement,!1))}stopAnimation(){yi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){yi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){yi(n=>{const{drag:r}=this.getProps();if(!Eg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[n];a.set(e[n]-sn(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!tu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};yi(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=$H({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),yi(o=>{if(!Eg(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];c.set(sn(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;YH.set(this.visualElement,this);const e=this.visualElement.current,n=Cf(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();tu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),en.read(r);const o=eh(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(yi(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=u[h].translate,g.set(g.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=Xx,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function Eg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function WH(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class KH extends Qo{constructor(e){super(e),this.removeGroupControls=Ei,this.removeListeners=Ei,this.controls=new XH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ei}unmount(){this.removeGroupControls(),this.removeListeners()}}const mk=t=>(e,n)=>{t&&en.postRender(()=>t(e,n))};class QH extends Qo{constructor(){super(...arguments),this.removePointerDownListener=Ei}onPointerDown(e){this.session=new d4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:u4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:mk(e),onStart:mk(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&en.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=Cf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const em={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function vk(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const af={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(et.test(t))t=parseFloat(t);else return t;const n=vk(t,e.target.x),r=vk(t,e.target.y);return`${n}% ${r}%`}},ZH={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Go.parse(t);if(i.length>5)return r;const a=Go.createTransformer(t),o=typeof i[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const d=sn(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),a(i)}};let Ab=!1;class JH extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;S$(eq),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),Ab&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),em.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,Ab=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||en.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ew.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Ab=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function h4(t){const[e,n]=OM(),r=B.useContext(I_);return v.jsx(JH,{...t,layoutGroup:r,switchLayoutGroup:B.useContext(qM),isPresent:e,safeToRemove:n})}const eq={borderRadius:{...af,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:af,borderTopRightRadius:af,borderBottomLeftRadius:af,borderBottomRightRadius:af,boxShadow:ZH};function tq(t,e,n){const r=ur(t)?t:Cu(t);return r.start(fw("",r,e,n)),r.animation}const nq=(t,e)=>t.depth-e.depth;class rq{constructor(){this.children=[],this.isDirty=!1}add(e){P_(this.children,e),this.isDirty=!0}remove(e){j_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(nq),this.isDirty=!1,this.children.forEach(e)}}function iq(t,e){const n=Pr.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Fo(r),t(a-e))};return en.setup(r,!0),()=>Fo(r)}const p4=["TopLeft","TopRight","BottomLeft","BottomRight"],aq=p4.length,yk=t=>typeof t=="string"?parseFloat(t):t,bk=t=>typeof t=="number"||et.test(t);function sq(t,e,n,r,i,a){i?(t.opacity=sn(0,n.opacity??1,oq(r)),t.opacityExit=sn(e.opacity??1,0,lq(r))):a&&(t.opacity=sn(e.opacity??1,n.opacity??1,r));for(let o=0;o<aq;o++){const c=`border${p4[o]}Radius`;let u=xk(e,c),d=xk(n,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||bk(u)===bk(d)?(t[c]=Math.max(sn(yk(u),yk(d),r),0),(Ma.test(d)||Ma.test(u))&&(t[c]+="%")):t[c]=d}(e.rotate||n.rotate)&&(t.rotate=sn(e.rotate||0,n.rotate||0,r))}function xk(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const oq=g4(0,.5,eM),lq=g4(.5,.95,Ei);function g4(t,e,n){return r=>r<t?0:r>e?1:n(Wf(t,e,r))}function _k(t,e){t.min=e.min,t.max=e.max}function gi(t,e){_k(t.x,e.x),_k(t.y,e.y)}function wk(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Sk(t,e,n,r,i){return t-=e,t=jm(t,1/n,r),i!==void 0&&(t=jm(t,1/i,r)),t}function cq(t,e=0,n=1,r=.5,i,a=t,o=t){if(Ma.test(e)&&(e=parseFloat(e),e=sn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=sn(a.min,a.max,r);t===a&&(c-=e),t.min=Sk(t.min,e,n,c,i),t.max=Sk(t.max,e,n,c,i)}function Ek(t,e,[n,r,i],a,o){cq(t,e[n],e[r],e[i],e.scale,a,o)}const uq=["x","scaleX","originX"],dq=["y","scaleY","originY"];function Tk(t,e,n,r){Ek(t.x,e,uq,n?n.x:void 0,r?r.x:void 0),Ek(t.y,e,dq,n?n.y:void 0,r?r.y:void 0)}function Ak(t){return t.translate===0&&t.scale===1}function m4(t){return Ak(t.x)&&Ak(t.y)}function Ck(t,e){return t.min===e.min&&t.max===e.max}function fq(t,e){return Ck(t.x,e.x)&&Ck(t.y,e.y)}function kk(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function v4(t,e){return kk(t.x,e.x)&&kk(t.y,e.y)}function Rk(t){return xr(t.x)/xr(t.y)}function Dk(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class hq{constructor(){this.members=[]}add(e){P_(this.members,e),e.scheduleRender()}remove(e){if(j_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function pq(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=n?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:g,rotateY:m,skewX:b,skewY:_}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),g&&(r+=`rotateX(${g}deg) `),m&&(r+=`rotateY(${m}deg) `),b&&(r+=`skewX(${b}deg) `),_&&(r+=`skewY(${_}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const Cb=["","X","Y","Z"],gq=1e3;let mq=0;function kb(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function y4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=n4(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",en,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&y4(r)}function b4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},c=e?.()){this.id=mq++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bq),this.nodes.forEach(Sq),this.nodes.forEach(Eq),this.nodes.forEach(xq)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new rq)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new L_),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=MM(o)&&!l$(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let h,g=0;const m=()=>this.root.updateBlockedByResize=!1;en.read(()=>{g=window.innerWidth}),t(o,()=>{const b=window.innerWidth;b!==g&&(g=b,this.root.updateBlockedByResize=!0,h&&h(),h=iq(m,250),em.hasAnimatedSinceResize&&(em.hasAnimatedSinceResize=!1,this.nodes.forEach(Mk)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:m,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||d.getDefaultTransition()||Rq,{onLayoutAnimationStart:w,onLayoutAnimationComplete:E}=d.getProps(),T=!this.targetLayout||!v4(this.targetLayout,b),C=!g&&m;if(this.options.layoutRoot||this.resumeFrom||C||g&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...Z_(_,"layout"),onPlay:w,onComplete:E};(d.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(h,C)}else g||Mk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Fo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Tq),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&y4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const g=this.path[h];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Nk);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ik);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(wq),this.nodes.forEach(vq),this.nodes.forEach(yq)):this.nodes.forEach(Ik),this.clearAllSnapshots();const c=Pr.now();er.delta=Ts(0,1e3/60,c-er.timestamp),er.timestamp=c,er.isProcessing=!0,mb.update.process(er),mb.preRender.process(er),mb.render.process(er),er.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ew.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(_q),this.sharedNodes.forEach(Aq)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,en.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){en.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!xr(this.snapshot.measuredBox.x)&&!xr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!m4(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(c||Rl(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),Dq(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return bn();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Nq))){const{scroll:d}=this.root;d&&(nu(c.x,d.offset.x),nu(c.y,d.offset.y))}return c}removeElementScroll(o){const c=bn();if(gi(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:g}=d;d!==this.root&&h&&g.layoutScroll&&(h.wasRoot&&gi(c,o),nu(c.x,h.offset.x),nu(c.y,h.offset.y))}return c}applyTransform(o,c=!1){const u=bn();gi(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!c&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ru(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Rl(h.latestValues)&&ru(u,h.latestValues)}return Rl(this.latestValues)&&ru(u,this.latestValues),u}removeTransform(o){const c=bn();gi(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Rl(d.latestValues))continue;Fx(d.latestValues)&&d.updateSnapshot();const h=bn(),g=d.measurePageBox();gi(h,g),Tk(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Rl(this.latestValues)&&Tk(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==er.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:g}=this.options;if(!(!this.layout||!(h||g))){if(this.resolvedRelativeTargetAt=er.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),Rf(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=bn(),this.targetWithTransforms=bn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),VH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gi(this.target,this.layout.layoutBox),KM(this.target,this.targetDelta)):gi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),Rf(this.relativeTargetOrigin,this.target,m.target),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Fx(this.parent.latestValues)||WM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===er.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;gi(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,m=this.treeScale.y;Q$(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=bn());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wk(this.prevProjectionDelta.x,this.projectionDelta.x),wk(this.prevProjectionDelta.y,this.projectionDelta.y)),kf(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==m||!Dk(this.projectionDelta.x,this.prevProjectionDelta.x)||!Dk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=iu(),this.projectionDelta=iu(),this.projectionDeltaWithTransform=iu()}setAnimationOrigin(o,c=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},g=iu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=bn(),b=u?u.source:void 0,_=this.layout?this.layout.source:void 0,w=b!==_,E=this.getStack(),T=!E||E.members.length<=1,C=!!(w&&!T&&this.options.crossfade===!0&&!this.path.some(kq));this.animationProgress=0;let N;this.mixTargetDelta=V=>{const P=V/1e3;Ok(g.x,o.x,P),Ok(g.y,o.y,P),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Rf(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Cq(this.relativeTarget,this.relativeTargetOrigin,m,P),N&&fq(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=bn()),gi(N,this.relativeTarget)),w&&(this.animationValues=h,sq(h,d,this.latestValues,P,C,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Fo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=en.update(()=>{em.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Cu(0)),this.currentAnimation=tq(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gq),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:h}=o;if(!(!c||!u||!d)){if(this!==o&&this.layout&&d&&x4(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||bn();const g=xr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const m=xr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}gi(c,u),ru(c,h),kf(this.projectionDeltaWithTransform,this.layoutCorrected,c,h)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new hq),this.sharedNodes.get(o).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const d={};u.z&&kb("z",o,d,this.animationValues);for(let h=0;h<Cb.length;h++)kb(`rotate${Cb[h]}`,o,d,this.animationValues),kb(`skew${Cb[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Jg(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Jg(c?.pointerEvents)||""),this.hasProjected&&!Rl(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let g=pq(this.projectionDeltaWithTransform,this.treeScale,h);u&&(g=u(h,g)),o.transform=g;const{x:m,y:b}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${b.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const _ in Jf){if(h[_]===void 0)continue;const{correct:w,applyTo:E,isCSSVariable:T}=Jf[_],C=g==="none"?h[_]:w(h[_],d);if(E){const N=E.length;for(let V=0;V<N;V++)o[E[V]]=C}else T?this.options.visualElement.renderState.vars[_]=C:o[_]=C}this.options.layoutId&&(o.pointerEvents=d===this?Jg(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(Nk),this.root.sharedNodes.clear()}}}function vq(t){t.updateLayout()}function yq(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?yi(h=>{const g=a?e.measuredBox[h]:e.layoutBox[h],m=xr(g);g.min=n[h].min,g.max=g.min+m}):x4(i,e.layoutBox,n)&&yi(h=>{const g=a?e.measuredBox[h]:e.layoutBox[h],m=xr(n[h]);g.max=g.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const o=iu();kf(o,n,e.layoutBox);const c=iu();a?kf(c,t.applyTransform(r,!0),e.measuredBox):kf(c,n,e.layoutBox);const u=!m4(o);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:g,layout:m}=h;if(g&&m){const b=bn();Rf(b,e.layoutBox,g.layoutBox);const _=bn();Rf(_,n,m.layoutBox),v4(b,_)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=b,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function bq(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function xq(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function _q(t){t.clearSnapshot()}function Nk(t){t.clearMeasurements()}function Ik(t){t.isLayoutDirty=!1}function wq(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Mk(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Sq(t){t.resolveTargetDelta()}function Eq(t){t.calcProjection()}function Tq(t){t.resetSkewAndRotation()}function Aq(t){t.removeLeadSnapshot()}function Ok(t,e,n){t.translate=sn(e.translate,0,n),t.scale=sn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Pk(t,e,n,r){t.min=sn(e.min,n.min,r),t.max=sn(e.max,n.max,r)}function Cq(t,e,n,r){Pk(t.x,e.x,n.x,r),Pk(t.y,e.y,n.y,r)}function kq(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Rq={duration:.45,ease:[.4,0,.1,1]},jk=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Vk=jk("applewebkit/")&&!jk("chrome/")?Math.round:Ei;function zk(t){t.min=Vk(t.min),t.max=Vk(t.max)}function Dq(t){zk(t.x),zk(t.y)}function x4(t,e,n){return t==="position"||t==="preserve-aspect"&&!jH(Rk(e),Rk(n),.2)}function Nq(t){return t!==t.root&&t.scroll?.wasRoot}const Iq=b4({attachResizeListener:(t,e)=>eh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rb={current:void 0},_4=b4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Rb.current){const t=new Iq({});t.mount(window),t.setOptions({layoutScroll:!0}),Rb.current=t}return Rb.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Mq={pan:{Feature:QH},drag:{Feature:KH,ProjectionNode:_4,MeasureLayout:h4}};function Lk(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&en.postRender(()=>a(e,Ih(e)))}class Oq extends Qo{mount(){const{current:e}=this.node;e&&(this.unmount=r$(e,(n,r)=>(Lk(this.node,r,"Start"),i=>Lk(this.node,i,"End"))))}unmount(){}}class Pq extends Qo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rh(eh(this.node.current,"focus",()=>this.onFocus()),eh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Bk(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&en.postRender(()=>a(e,Ih(e)))}class jq extends Qo{mount(){const{current:e}=this.node;e&&(this.unmount=o$(e,(n,r)=>(Bk(this.node,r,"Start"),(i,{success:a})=>Bk(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Wx=new WeakMap,Db=new WeakMap,Vq=t=>{const e=Wx.get(t.target);e&&e(t)},zq=t=>{t.forEach(Vq)};function Lq({root:t,...e}){const n=t||document;Db.has(n)||Db.set(n,{});const r=Db.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(zq,{root:t,...e})),r[i]}function Bq(t,e,n){const r=Lq(e);return Wx.set(t,n),r.observe(t),()=>{Wx.delete(t),r.unobserve(t)}}const Uq={some:0,all:1};class Fq extends Qo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Uq[i]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:g}=this.node.getProps(),m=d?h:g;m&&m(u)};return Bq(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Gq(e,n))&&this.startObserver()}unmount(){}}function Gq({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const $q={inView:{Feature:Fq},tap:{Feature:jq},focus:{Feature:Pq},hover:{Feature:Oq}},Hq={layout:{ProjectionNode:_4,MeasureLayout:h4}},qq={...DH,...$q,...Mq,...Hq},gn=X$(qq,oH);function Yq(t){t.values.forEach(e=>e.stop())}function Kx(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&dw(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{Kx(a,e)})})}function Xq(t,e){if(Array.isArray(e))return Kx(t,e);if(typeof e=="string")return Kx(t,[e]);dw(t,e)}function Wq(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(a4(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{Xq(r,n)})},stop(){t.forEach(n=>{Yq(n)})},mount(){return()=>{e.stop()}}};return e}function Kq(){const t=k0(Wq);return O_(t.mount,[]),t}const Qq=Kq,rc=q1((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},2e3)},hideToast:()=>{t({isVisible:!1})}})),Zq=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=rc(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return v.jsx(ti,{children:n&&v.jsx(gn.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-24 right-6 z-[110] max-w-xs",children:v.jsxs("div",{className:`rounded-lg shadow-lg p-3 flex items-center justify-between ${a()}`,children:[v.jsx("div",{className:"flex items-center flex-1 min-w-0",children:v.jsx("span",{className:"text-xs font-medium whitespace-pre-line pr-2",children:t})}),v.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r&&v.jsxs("button",{onClick:()=>{r(),i()},className:"px-2 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-bold transition-colors",children:[v.jsx(PB,{size:12,className:"inline mr-1"}),"Undo"]}),v.jsx("button",{onClick:i,className:"p-0.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:v.jsx(s0,{size:14})})]})]})})})};class bi extends B.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[v.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:v.jsx(pu,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,v.jsxs("div",{className:"flex flex-col gap-3",children:[v.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[v.jsx(Bf,{className:"h-4 w-4"}),"Try Again"]}),v.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[v.jsx(iB,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const Jq=({onAddTransaction:t})=>{const e=Ba(),n=ta(),[r,i]=B.useState(!1),a=B.useRef(null),o=d=>n.pathname===d;B.useEffect(()=>{const d=h=>{a.current&&!a.current.contains(h.target)&&i(!1)};if(r)return document.addEventListener("mousedown",d),document.addEventListener("touchstart",d),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("touchstart",d)}},[r]);const c=[{path:"/reports",icon:v.jsx(R9,{className:"w-5 h-5"}),label:"Reports"},{path:"/analytics",icon:v.jsx(ym,{className:"w-5 h-5"}),label:"Analytics"},{path:"/budget-breakdown",icon:v.jsx(N9,{className:"w-5 h-5"}),label:"Budget Breakdown"}],u=({path:d,icon:h,label:g})=>{const m=o(d);return v.jsxs("button",{onClick:b=>{b.stopPropagation(),e(d)},className:`
          relative group flex flex-col items-center justify-center
          w-12 h-12 rounded-2xl transition-all duration-300
          ${m?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
        `,children:[v.jsx("div",{className:`transition-transform duration-300 ${m?"scale-110":"group-hover:scale-105"}`,children:h}),v.jsx("span",{className:"sr-only",children:g}),m&&v.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]})};return v.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center z-[100] pointer-events-none safe-area-inset-bottom",children:v.jsxs("nav",{className:`
          pointer-events-auto
          flex items-center gap-1 p-2 pl-4 pr-4
          bg-white/60 dark:bg-zinc-900/60 backdrop-blur-xl
          border border-zinc-200/30 dark:border-zinc-800/30
          rounded-full shadow-2xl shadow-zinc-900/10
          transform transition-all duration-500 ease-out
        `,onClick:d=>d.stopPropagation(),onTouchStart:d=>d.stopPropagation(),onTouchEnd:d=>d.stopPropagation(),children:[v.jsx(u,{path:"/",label:"Budget",icon:v.jsx(a0,{className:"w-6 h-6"})}),v.jsx(u,{path:"/transactions",label:"Transactions",icon:v.jsx(sB,{className:"w-6 h-6"})}),v.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),v.jsx("button",{onClick:d=>{if(d.stopPropagation(),i(!1),t){t();return}e("/add-transaction")},className:`
            -mt-8 mb-2 mx-1
            group relative flex items-center justify-center
            w-16 h-16 rounded-full
            bg-blue-600 text-white
            shadow-xl shadow-blue-600/30
            hover:shadow-blue-600/50 hover:scale-105 hover:-translate-y-1
            active:scale-95 active:translate-y-0
            transition-all duration-300 cubic-bezier(0.175, 0.885, 0.32, 1.275)
          `,children:v.jsx(yh,{className:"w-8 h-8 transition-transform duration-300 group-hover:rotate-90"})}),v.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),v.jsxs("div",{className:"relative",ref:a,children:[v.jsxs("button",{onClick:d=>{d.stopPropagation(),i(!r)},className:`
              relative group flex flex-col items-center justify-center
              w-12 h-12 rounded-2xl transition-all duration-300
              ${r?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
            `,children:[v.jsx("div",{className:`transition-transform duration-300 ${r?"scale-110":"group-hover:scale-105"}`,children:v.jsx(Y9,{className:"w-6 h-6"})}),v.jsx("span",{className:"sr-only",children:"More"}),r&&v.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]}),r&&v.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-56 bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-200/50 dark:border-zinc-800/50 backdrop-blur-xl z-50 overflow-hidden",onClick:d=>d.stopPropagation(),onTouchStart:d=>d.stopPropagation(),onTouchEnd:d=>d.stopPropagation(),children:v.jsx("div",{className:"p-2 space-y-1",children:c.map((d,h)=>v.jsxs("button",{onClick:g=>{g.stopPropagation(),e(d.path),i(!1)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[v.jsx("div",{className:"text-zinc-600 dark:text-zinc-400",children:d.icon}),v.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:d.label})]},h))})})]}),v.jsx(u,{path:"/settings",label:"Settings",icon:v.jsx(EB,{className:"w-6 h-6"})})]})})};function eY(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function tY(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function vs(t,e){return function(n){n&&(t[e]=n)}}function w4(t,e,n){return function(r){r&&(t[e][n]=r)}}function Uk(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function nY(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var o,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var d=(o=this[r])[i].apply(o,c);return d===this[r]?this:d})})}}var rY="function",iY="object",aY="string",sY="number",hw="undefined",S4=typeof window!==hw,oY=typeof document!==hw&&document,lY=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Pn=1e-7,Tg={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function cY(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function Vm(t,e,n,r){return(t*r+e*n)/(n+r)}function M0(t){return typeof t===hw}function Zi(t){return t&&typeof t===iY}function Vn(t){return Array.isArray(t)}function jr(t){return typeof t===aY}function Ru(t){return typeof t===sY}function pw(t){return typeof t===rY}function uY(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function E4(t,e,n,r,i){var a=gw(t,e,n);return a?n:dY(t,e,n+1,r,i)}function gw(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function dY(t,e,n,r,i){for(var a=function(d){var h=e[d].trim();if(h===t.close&&!gw(t,e,d))return{value:d};var g=d,m=Vr(i,function(b){var _=b.open;return _===h});if(m&&(g=E4(m,e,d,r,i)),g===-1)return o=d,"break";d=g,o=d},o,c=n;c<r;++c){var u=a(c);if(c=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function mw(t,e){var n=jr(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,o=n.isSeparateOnlyOpenClose,c=n.isSeparateOpenClose,u=c===void 0?o:c,d=n.openCloseCharacters,h=d===void 0?lY:d,g=h.map(function(A){var k=A.open,D=A.close;return k===D?k:k+"|"+D}).join("|"),m="(\\s*"+i+"\\s*|"+g+"|\\s+)",b=new RegExp(m,"g"),_=t.split(b).filter(function(A){return A&&A!=="undefined"}),w=_.length,E=[],T=[];function C(){return T.length?(E.push(T.join("")),T=[],!0):!1}for(var N=function(A){var k=_[A].trim(),D=A,j=Vr(h,function(O){var Z=O.open;return Z===k}),L=Vr(h,function(O){var Z=O.close;return Z===k});if(j){if(D=E4(j,_,A,w,h),D!==-1&&u)return C()&&a||(E.push(_.slice(A,D+1).join("")),A=D,a)?(V=A,"break"):(V=A,"continue")}else if(L&&!gw(L,_,A)){var U=cY(h);return U.splice(h.indexOf(L),1),{value:mw(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:U})}}else if(uY(k,i)&&!o)return C(),a?(V=A,"break"):(V=A,"continue");D===-1&&(D=w-1),T.push(_.slice(A,D+1).join("")),A=D,V=A},V,P=0;P<w;++P){var M=N(P);if(P=V,typeof M=="object")return M.value;if(M==="break")break}return T.length&&E.push(T.join("")),E}function $o(t){return mw(t,"")}function zl(t){return mw(t,",")}function T4(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Mh(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function fY(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function tm(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function th(){return Date.now?Date.now():new Date().getTime()}function Cs(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Vr(t,e,n){var r=Cs(t,e);return r>-1?t[r]:n}var A4=(function(){var t=th(),e=S4&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=th(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),hY=(function(){var t=S4&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function ks(t){return Object.keys(t)}function pY(t){var e=ks(t);return e.map(function(n){return t[n]})}function Ft(t,e){var n=Mh(t),r=n.value,i=n.unit;if(Zi(e)){var a=e[i];if(a){if(pw(a))return a(r);if(Tg[i])return Tg[i](r,a)}}else if(i==="%")return r*e/100;return Tg[i]?Tg[i](r):r}function Qx(t,e,n){return Math.max(e,Math.min(t,n))}function Fk(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[rt(e[0],Pn),rt(e[0]/r,Pn)],[rt(e[1]*r,Pn),rt(e[1],Pn)]].filter(function(i){return i.every(function(a,o){var c=e[o],u=rt(c,Pn);return n?a<=c||a<=u:a>=c||a>=u})})[0]||t}function C4(t,e,n,r){if(!r)return t.map(function(b,_){return Qx(b,e[_],n[_])});var i=t[0],a=t[1],o=r===!0?i/a:r,c=Fk(t,e,!1,o),u=c[0],d=c[1],h=Fk(t,n,!0,o),g=h[0],m=h[1];return i<u||a<d?(i=u,a=d):(i>g||a>m)&&(i=g,a=m),[i,a]}function gY(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function Zx(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function _n(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function mY(t){return[0,1].map(function(e){return Zx(t.map(function(n){return n[e]}))})}function Gk(t){var e=mY(t),n=_n(e,t[0]),r=_n(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function ys(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function rt(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function $k(t,e){return t.forEach(function(n,r){t[r]=rt(t[r],e)}),t}function vY(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function k4(t){return t.reduce(function(e,n){return e.concat(n)},[])}function R4(t,e){t.indexOf(e)===-1&&t.push(e)}function Un(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function D4(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function N4(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Jn(t,e,n,r){t.addEventListener(e,n,r)}function Ln(t,e,n,r){t.removeEventListener(e,n,r)}function Qu(t){return t?.ownerDocument||oY}function vw(t){return Qu(t).documentElement}function Zo(t){return Qu(t).body}function Io(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function I4(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Zu(t){return Zi(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var yY=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,o=i.indexOf(n),c=o===-1?i.length:o;i[c]=n,a[c]=r},t})(),bY=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),xY=typeof Map=="function",_Y=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function wY(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],o=i[1],c=new _Y;n[a]=c,r[o]=c}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var o=i[0],c=i[1];if(o===c)return[0,0];var u=n[o],d=r[c-1],h=u.getIndex();u.disconnect(),d?u.connect(d,d.next):u.connect(void 0,n[0]);var g=u.getIndex();return[h,g]})}var SY=(function(){function t(n,r,i,a,o,c,u,d){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=o,this.maintained=c,this.changedBeforeAdded=u,this.fixed=d}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=wY(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,o){var c=a[0],u=a[1],d=r[o],h=d[0],g=d[1];if(c!==u)return i.push([h,g]),!0}),this.cachePureChanged=i},t})();function Oh(t,e,n){var r=xY?Map:n?bY:yY,i=n||function(C){return C},a=[],o=[],c=[],u=t.map(i),d=e.map(i),h=new r,g=new r,m=[],b=[],_={},w=[],E=0,T=0;return u.forEach(function(C,N){h.set(C,N)}),d.forEach(function(C,N){g.set(C,N)}),u.forEach(function(C,N){var V=g.get(C);typeof V>"u"?(++T,o.push(N)):_[V]=T}),d.forEach(function(C,N){var V=h.get(C);typeof V>"u"?(a.push(N),++E):(c.push([V,N]),T=_[N]||0,m.push([V-T,N-E]),b.push(N===V),V!==N&&w.push([V,N]))}),o.reverse(),new SY(t,e,a,o,w,c,m,b)}var EY=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=Oh(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),Jx=function(t,e){return Jx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Jx(t,e)};function Ph(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Jx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ea=function(){return Ea=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ea.apply(this,arguments)};function M4(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Hk(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function qk(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function O4(t){var e=[];return t.forEach(function(n){e=e.concat(Vn(n)?O4(n):n)}),e}function Nb(t,e){if(!e)return t;for(var n in e)M0(t[n])&&(t[n]=e[n]);return t}function zm(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function Yk(t){var e=t.className,n=M4(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function Xk(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function O0(t){if(!t)return null;var e=t.b;return Zu(e)?e:O0(t.c)}function P4(t){var e=t.parentNode;e&&e.removeChild(t)}function j4(t){t.forEach(function(e){e()})}function TY(){return this.constructor(this.props,this.context)}var yw=0,P0=(function(){function t(n,r,i,a,o,c,u){u===void 0&&(u={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=o,this.ref=c,this.ps=u,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,o){var c=this,u=c.d,d=pY(r).filter(function(_){return _.$_req}),h=O4(d.map(function(_){return _.$_subs})),g=Vr(h,function(_){return _.d===u});if(c.b&&!jr(i)&&!o&&!c.s(i.props,a)&&!g){var m=h.reduce(function(_,w){var E=w.d;return _[0]?_[0].d===E&&_.push(w):E>u&&_.push(w),_},[]);return m.forEach(function(_){jh(_,_._ps,[_.o],n,r,!0)}),!1}c.o=i,c.ss(a);var b=c.ps;return jr(i)||(c.ps=i.props,c.ref=i.ref),bw(this),c.r(n,r,c.b?b:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function V4(){return Object.__CROACT_CURRENT_INSTNACE__}function AY(){return yw}function CY(t){yw=t}function bw(t){return Object.__CROACT_CURRENT_INSTNACE__=t,yw=0,t}var xw=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=Ea(Ea({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,o=jh(a.c,[a],[a.o],i,a._cs,Ea(Ea({},this.state),this.$_state),r);o&&(n&&i.push(n),j4(i),bw(null))},t})(),z4=(function(t){Ph(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return zm(this.props,r)||zm(this.state,i)},e})(xw);function L4(t){var e=function(n){e.current=n};return e.current=t,e}function kY(t){return t._fr=!0,t}function RY(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new xw(e,n),a.constructor=t,t._fr?(r.fr=L4(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=TY),a.$_p=r,a}var DY=(function(t){Ph(e,t);function e(r,i,a,o,c,u,d){d===void 0&&(d={});var h=t.call(this,r,i,a,o,c,u,Nb(d,r.defaultProps))||this;return h.typ="comp",h._usefs=[],h._uefs=[],h._defs=[],h}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(Nb(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var o,c,u=this,d=u.t;u.ps=Nb(u.ps,u.t.defaultProps);var h=u.ps,g=!u.b,m=d.contextType,b=u.b,_=m?.get(u);u._cs=i,g?(b=RY(d,h,_,u),u.b=b):(b.props=h,b.context=_);var w=b.state;u._usefs=[],u._uefs=[];var E=b.render();((c=(o=E?.props)===null||o===void 0?void 0:o.children)===null||c===void 0?void 0:c.length)===0&&(E.props.children=u.ps.children);var T=Ea(Ea({},i),b.$_cs);jh(u,u._ps,E?[E]:[],r,T),g?u._uefs.push(function(){m?.register(u),b.componentDidMount()}):u._uefs.push(function(){b.componentDidUpdate(a,w)}),r.push(function(){u._usefs.forEach(function(C){C()}),g?u.md():u.ud(),u._defs=u._uefs.map(function(C){return C()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(o){o.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(o){o&&o()}),i.b.componentWillUnmount()},e})(P0);function NY(t,e,n){var r=_w(Yk(t),Yk(e)),i=r.added,a=r.removed,o=r.changed;for(var c in i)n.setAttribute(c,i[c]);for(var u in o)n.setAttribute(u,o[u][1]);for(var d in a)n.removeAttribute(d)}function IY(t,e,n){var r=_w(t,e),i=r.added,a=r.removed;for(var o in a)n.e(o,!0);for(var c in i)n.e(c)}function _w(t,e){var n=ks(t),r=ks(e),i=Oh(n,r,function(u){return u}),a={},o={},c={};return i.added.forEach(function(u){var d=r[u];a[d]=e[d]}),i.removed.forEach(function(u){var d=n[u];o[d]=t[d]}),i.maintained.forEach(function(u){var d=u[0],h=n[d],g=[t[h],e[h]];t[h]!==e[h]&&(c[h]=g)}),{added:a,removed:o,changed:c}}function MY(t,e,n){var r=n.style,i=_w(t,e),a=i.added,o=i.removed,c=i.changed;for(var u in a){var d=tm(u,"-");r.setProperty(d,a[u])}for(var u in c){var h=tm(u,"-");r.setProperty(h,c[u][1])}for(var u in o){var g=tm(u,"-");r.removeProperty(g)}}function OY(t){return t.replace(/^on/g,"").toLowerCase()}var PY=(function(t){Ph(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,o=a._es,c=a.b,u=OY(r);i?(Ln(c,u,o[r]),delete o[r]):(o[r]=function(d){var h,g;(g=(h=a.ps)[r])===null||g===void 0||g.call(h,d)},Jn(c,u,o[r]))},n.s=function(r){return zm(this.ps,r)},n.r=function(r,i,a){var o,c=this,u=!c.b,d=c.ps;if(u){var h=O0(c.c),g=!1;c._svg||c.t==="svg"?g=!0:g=h&&h.ownerSVGElement,c._svg=g;var m=(o=c._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],b=c.t;if(m)c._hyd=[].slice.call(m.children||[]);else{var _=Qu(h);g?m=_.createElementNS("http://www.w3.org/2000/svg",b):m=_.createElement(b)}c.b=m}jh(c,c._ps,d.children,r,i);var w=c.b,E=Xk(a),T=E[0],C=E[1],N=Xk(d),V=N[0],P=N[1];return NY(T,V,w),IY(C,P,c),MY(a.style||{},d.style||{},w),r.push(function(){u?c.md():c.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var o in i)Ln(a,o,i[o]);r._ps.forEach(function(c){c.un()}),r._es={},r._sel||P4(a)},e})(P0);function nh(t){if(!t||Zu(t))return t;var e=t.$_p._ps;return e.length?nh(e[0].b):null}function B4(t){if(t){if(t.b&&Zu(t.b))return t;var e=t._ps;return e.length?B4(e[0]):null}}function qi(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,o=i.ref,c=M4(i,["key","ref"]);return{type:t,key:a,ref:o,props:Ea(Ea({},c),{children:k4(n).filter(function(u){return u!=null&&u!==!1})})}}var U4=(function(t){Ph(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(P0),jY=(function(t){Ph(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,o=!a.b;if(o){var c=O0(a.c),u=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=u||Qu(c).createTextNode(a.t.replace("text_",""))}return r.push(function(){o?a.md():a.ud()}),!0},n.un=function(){P4(this.b)},e})(P0);function VY(t,e,n){var r=n.map(function(u){return jr(u)?null:u.key}),i=qk(e.map(function(u){return u.k})),a=qk(r),o=Oh(i,a,function(u){return u});o.removed.forEach(function(u){e.splice(u,1)[0].un()}),o.ordered.forEach(function(u){var d=u[0],h=u[1],g=e.splice(d,1)[0];e.splice(h,0,g);var m=nh(g.b),b=nh(e[h+1]&&e[h+1].b);m&&m.parentNode.insertBefore(m,b)}),o.added.forEach(function(u){e.splice(u,0,Wk(n[u],r[u],u,t))});var c=o.maintained.filter(function(u){u[0];var d=u[1],h=n[d],g=e[d],m=jr(h)?"text_".concat(h):h.type;return m!==g.t?(g.un(),e.splice(d,1,Wk(h,r[d],d,t)),!0):(g.i=d,!1)});return Hk(Hk([],o.added,!0),c.map(function(u){u[0];var d=u[1];return d}))}function zY(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=nh(n[i].b);if(a)return a}return null}function Wk(t,e,n,r){var i=r.d+1;if(jr(t)||Ru(t))return new jY("text_".concat(t),i,e,n,r,null,{});var a=t.type,o=typeof a=="string"?PY:DY;return new o(a,i,e,n,r,t.ref,t.props)}function jh(t,e,n,r,i,a,o){var c=VY(t,e,n),u=t._hyd,d=e.filter(function(g,m){return g._hyd=u,g.u(r,i,n[m],a,o)});t.typ==="container"&&t._sel&&e.forEach(function(g){var m=B4(g);m&&(m._sel=!0)}),t._hyd=null;var h=O0(t);return h&&c.reverse().forEach(function(g){var m=e[g],b=nh(m.b);if(b&&h!==b&&!b.parentNode){var _=zY(t,m);h.insertBefore(b,_)}}),d.length>0}function LY(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new U4(e));var a=[];return jh(n,n._ps,t?[t]:[],a,r,void 0,void 0),j4(a),bw(null),i||(e.__CROACT__=n),n}function Kk(t,e,n){return!n&&t&&(n=new U4(e.parentElement),n._hyd=[e],n._sel=!0),LY(t,e,n),n}function F4(t){var e=V4(),n=e._hs||(e._hs=[]),r=AY(),i=n[r];if(CY(r+1),i){if(!zm(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function BY(t,e){var n=F4({func:t,deps:e});return n.value}function UY(t){return BY(function(){return L4(t)},[])}function G4(t,e,n){var r=V4(),i=F4({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function FY(t,e,n){G4(function(){t?.(e())},n,!0)}function ww(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function $4(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function H4(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function Sw(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function GY(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function $Y(t,e){var n=Sw("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function e1(t){return t.replace(/_/g,".")}function gf(t,e){var n=null,r="-1";return ww(t,function(i){var a=Sw("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=$Y(i.versionTest.toLowerCase(),e)||r),r=e1(r),!0)}),{preset:n,version:r}}function Ag(t,e){var n={brand:"",version:"-1"};return ww(t,function(r){var i=q4(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function q4(t,e){return $4(t,function(n){var r=n.brand;return Sw(""+e.test,r.toLowerCase())})}var Y4=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],X4=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],t1=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],W4=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],K4=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Q4(t){return!!gf(W4,t).preset}function HY(t){var e=H4(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:Q4(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=gf(Y4,e),o=a.preset,c=a.version,u=gf(K4,e),d=u.preset,h=u.version,g=gf(X4,e);if(r.chromium=!!g.preset,r.chromiumVersion=g.version,!r.chromium){var m=gf(t1,e);r.webkit=!!m.preset,r.webkitVersion=m.version}return d&&(i.name=d.id,i.version=h,i.majorVersion=parseInt(h,10)),o&&(r.name=o.id,r.version=c,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function qY(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Ag(W4,n).brand||Q4(H4())},c={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&ww(t1,function(m){return q4(n,m)});var u=Ag(X4,n);if(o.chromium=!!u.brand,o.chromiumVersion=u.version||"-1",!o.chromium){var d=Ag(t1,n);o.webkit=!!d.brand,o.webkitVersion=d.version||"-1"}var h=$4(K4,function(m){return new RegExp(""+m.test,"g").exec(a)});c.name=h?h.id:"";{var g=Ag(Y4,n);o.name=g.brand||o.name,o.version=g.brand&&t?t.uaFullVersion:g.version}return o.webkit&&(c.name=r?"ios":"mac"),c.name==="ios"&&o.webview&&(o.version="-1"),c.version=e1(c.version),o.version=e1(o.version),c.majorVersion=parseInt(c.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:c,isMobile:r,isHints:!0}}function YY(t){return GY()?qY():HY(t)}function XY(t,e,n,r,i,a){for(var o=0;o<i;++o){var c=n+o*i,u=r+o*i;t[c]+=t[u]*a,e[c]+=e[u]*a}}function WY(t,e,n,r,i){for(var a=0;a<i;++a){var o=n+a*i,c=r+a*i,u=t[o],d=e[o];t[o]=t[c],t[c]=u,e[o]=e[c],e[c]=d}}function KY(t,e,n,r,i){for(var a=0;a<r;++a){var o=n+a*r;t[o]/=i,e[o]/=i}}function Z4(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function Va(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Kt(e),i=0;i<e;++i){var a=e*i+i;if(!rt(n[a],Pn)){for(var o=i+1;o<e;++o)if(n[e*i+o]){WY(n,r,i,o,e);break}}if(!rt(n[a],Pn))return[];KY(n,r,i,e,n[a]);for(var o=0;o<e;++o){var c=o,u=o+i*e,d=n[u];!rt(d,Pn)||i===o||XY(n,r,c,i,e,-d)}}return r}function QY(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function J4(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function ZY(t,e){for(var n=Kt(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Wl(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Ji(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=Kt(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)r[a*n+o]=t[a*e+o];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function Lm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Kt(t);return e.forEach(function(i){r=Gt(r,i,t)}),r}function Gt(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var o=0;o<n;++o)for(var c=0;c<a;++c){r[c*n+o]=0;for(var u=0;u<i;++u)r[c*n+o]+=t[u*n+o]*e[c*i+u]}return r}function At(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function He(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function JY(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function eO(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function fr(t,e,n){n===void 0&&(n=e.length);var r=Gt(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function eX(t,e){return Gt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function tX(t,e){return Gt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function nX(t,e){return Gt(t,zh(e,4))}function Cg(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,o=e[2],c=o===void 0?1:o;return Gt(t,[r,0,0,0,0,a,0,0,0,0,c,0,0,0,0,1],4)}function Vh(t,e){return fr(zh(e,3),Wl(t,3))}function Ib(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,o=e[2],c=o===void 0?0:o;return Gt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,c,1],4)}function Qk(t,e){return Gt(t,e,4)}function zh(t,e){var n=Math.cos(t),r=Math.sin(t),i=Kt(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function Kt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Ew(t,e){for(var n=Kt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Kl(t,e){for(var n=Kt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function Tw(t,e,n,r,i,a,o,c){var u=t[0],d=t[1],h=e[0],g=e[1],m=n[0],b=n[1],_=r[0],w=r[1],E=i[0],T=i[1],C=a[0],N=a[1],V=o[0],P=o[1],M=c[0],A=c[1],k=[u,0,h,0,m,0,_,0,d,0,g,0,b,0,w,0,1,0,1,0,1,0,1,0,0,u,0,h,0,m,0,_,0,d,0,g,0,b,0,w,0,1,0,1,0,1,0,1,-E*u,-T*u,-C*h,-N*h,-V*m,-P*m,-M*_,-A*_,-E*d,-T*d,-C*g,-N*g,-V*b,-P*b,-M*w,-A*w],D=Va(k,8);if(!D.length)return[];var j=Gt(D,[E,T,C,N,V,P,M,A],8);return j[8]=1,Ji(QY(j),3,4)}var Df=function(){return Df=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Df.apply(this,arguments)};function rX(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function rh(t,e){return e===void 0&&(e=0),Zc(Du(t,e))}function iX(t,e){var n=fr(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Zc(t){var e=rX();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function Du(t,e){e===void 0&&(e=0);var n=Vn(t)?t:$o(t);return n.map(function(r){var i=T4(r),a=i.prefix,o=i.value,c=null,u=a,d="";if(a==="translate"||a==="translateX"||a==="translate3d"){var h=Zi(e)?Df(Df({},e),{"o%":e["%"]}):{"%":e,"o%":e},g=zl(o).map(function(O,Z){return Z===0&&"x%"in h?h["%"]=e["x%"]:Z===1&&"y%"in h?h["%"]=e["y%"]:h["%"]=e["o%"],Ft(O,h)}),m=g[0],b=g[1],_=b===void 0?0:b,w=g[2],E=w===void 0?0:w;c=Ib,d=[m,_,E]}else if(a==="translateY"){var T=Zi(e)?Df({"%":e["y%"]},e):{"%":e},_=Ft(o,T);c=Ib,d=[0,_,0]}else if(a==="translateZ"){var E=parseFloat(o);c=Ib,d=[0,0,E]}else if(a==="scale"||a==="scale3d"){var C=zl(o).map(function(O){return parseFloat(O)}),N=C[0],V=C[1],P=V===void 0?N:V,M=C[2],A=M===void 0?1:M;c=Cg,d=[N,P,A]}else if(a==="scaleX"){var N=parseFloat(o);c=Cg,d=[N,1,1]}else if(a==="scaleY"){var P=parseFloat(o);c=Cg,d=[1,P,1]}else if(a==="scaleZ"){var A=parseFloat(o);c=Cg,d=[1,1,A]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var k=Mh(o),D=k.unit,j=k.value,L=D==="rad"?j:j*Math.PI/180;a==="rotate"||a==="rotateZ"?(u="rotateZ",c=nX):a==="rotateX"?c=eX:a==="rotateY"&&(c=tX),d=L}else if(a==="matrix3d")c=Qk,d=zl(o).map(function(O){return parseFloat(O)});else if(a==="matrix"){var U=zl(o).map(function(O){return parseFloat(O)});c=Qk,d=[U[0],U[1],0,0,U[2],U[3],0,0,0,0,1,0,U[4],U[5],0,1]}else u="";return{name:a,functionName:u,value:o,matrixFunction:c,functionValue:d}})}var n1=function(t,e){return n1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},n1(t,e)};function aX(t,e){n1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var tO=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),nO=(function(t){aX(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,tO)||this}return e})(EY);function sX(t,e){return Oh(t,e,tO)}var r1=function(){return r1=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r1.apply(this,arguments)};function oX(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}var j0=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Zi(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Zi(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var o=Cs(a,function(c){return c.listener===r});o>-1&&a.splice(o,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var o=!1;return r.eventType=n,r.stop=function(){o=!0},r.currentTarget=this,oX(a).forEach(function(c){c.listener(r),c.once&&i.off(n,c.listener)}),!o},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var o=a[n];o.push(r1({listener:r},i))},t})();var i1=function(t,e){return i1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},i1(t,e)};function lX(t,e){i1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var au=function(){return au=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},au.apply(this,arguments)};function cX(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function Zk(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function kg(t){if(t){if(jr(t))return document.querySelector(t)}else return null;if(pw(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var uX=(function(t){lX(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=kg(i.container);if(!a){this._flag=!1;return}var o=0,c=0,u=0,d=0;if(a===document.body)u=window.innerWidth,d=window.innerHeight;else{var h=a.getBoundingClientRect();o=h.top,c=h.left,u=h.width,d=h.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:o,left:c,width:u,height:d},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,o=r.clientY,c=i.threshold,u=c===void 0?0:c,d=this,h=d._startRect,g=d._startPos;this._currentOptions=i;var m=[0,0];return h.top>o-u?(g[1]>h.top||o<g[1])&&(m[1]=-1):h.top+h.height<o+u&&(g[1]<h.top+h.height||o>g[1])&&(m[1]=1),h.left>a-u?(g[0]>h.left||a<g[0])&&(m[0]=-1):h.left+h.width<a+u&&(g[0]<h.left+h.width||a>g[0])&&(m[0]=1),!m[0]&&!m[1]?!1:this._continueDrag(au(au({},i),{direction:m,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,o=a===void 0?this._prevScrollPos:a,c=r.direction,u=r.throttleTime,d=u===void 0?0:u,h=r.inputEvent,g=r.isDrag,m=this._getScrollPosition(c||[0,0],r),b=m[0]-o[0],_=m[1]-o[1],w=c||[b?Math.abs(b)/b:0,_?Math.abs(_)/_:0];return this._prevScrollPos=m,this._lock=!1,!b&&!_?!1:(this.emit("move",{offsetX:w[0]?b:0,offsetY:w[1]?_:0,inputEvent:h}),d&&g&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},d)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,o=i.getScrollPosition,c=o===void 0?cX:o;return c({container:kg(a),direction:r})},n._continueDrag=function(r){var i=this,a,o=r.container,c=r.direction,u=r.throttleTime,d=r.useScroll,h=r.isDrag,g=r.inputEvent;if(!(!this._flag||h&&this._isWait)){var m=th(),b=Math.max(u+this._prevTime-m,0);if(b>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},b),!1;this._prevTime=m;var _=this._getScrollPosition(c,r);this._prevScrollPos=_,h&&(this._isWait=!0),d||(this._lock=!0);var w={container:kg(o),direction:c,inputEvent:g};return(a=r.requestScroll)===null||a===void 0||a.call(r,w),this.emit("scroll",w),this._isWait=!1,d||this.checkScroll(au(au({},r),{prevScrollPos:_,direction:c,inputEvent:g}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?Zk:i,o=kg(r.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=Zk(window,this._onScroll):this._unregister=a(o,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(j0);function dX(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function Ir(t){return rt(t,Pn)}function fX(t,e){return t.every(function(n,r){return Ir(n-e[r])===0})}function hX(t,e){return!Ir(t[0]-e[0])&&!Ir(t[1]-e[1])}function rO(t){return t.length<3?0:Math.abs(gY(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function Jk(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,o=Ql(t),c=o.minX,u=o.minY,d=o.maxX,h=o.maxY,g=n/(d-c),m=r/(h-u);return t.map(function(b){return[i+(b[0]-c)*g,a+(b[1]-u)*m]})}function Ql(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function a1(t,e,n){var r=t[0],i=t[1],a=Ql(e),o=a.minX,c=a.maxX,u=[[o,i],[c,i]],d=Bm(u[0],u[1]),h=s1(e),g=[];if(h.forEach(function(_){var w=Bm(_[0],_[1]),E=_[0];if(fX(d,w))g.push({pos:t,line:_,type:"line"});else{var T=iO(Aw(d,w),[u,_]);T.forEach(function(C){_.some(function(N){return hX(N,C)})?g.push({pos:C,line:_,type:"point"}):Ir(E[1]-i)!==0&&g.push({pos:C,line:_,type:"intersection"})})}}),Vr(g,function(_){return _[0]===r}))return!0;var m=0,b={};return g.forEach(function(_){var w=_.pos,E=_.type,T=_.line;if(!(w[0]>r))if(E==="intersection")++m;else{if(E==="line")return;if(E==="point"){var C=Vr(T,function(P){return P[1]!==i}),N=b[w[0]],V=C[1]>i?1:-1;N?N!==V&&++m:b[w[0]]=V}}}),m%2===1}function Bm(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=i-n,c=a-r;Math.abs(o)<Pn&&(o=0),Math.abs(c)<Pn&&(c=0);var u=0,d=0,h=0;return o?c?(u=-c/o,d=1,h=-u*n-r):(d=1,h=-r):c&&(u=-1,h=n),[u,d,h]}function Aw(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],c=e[2],u=n===0&&a===0,d=r===0&&o===0,h=[];if(u&&d)return[];if(u){var g=-i/r,m=-c/o;return g!==m?[]:[[-1/0,g],[1/0,g]]}else if(d){var b=-i/n,_=-c/a;return b!==_?[]:[[b,-1/0],[b,1/0]]}else if(n===0){var w=-i/r,E=-(o*w+c)/a;h=[[E,w]]}else if(a===0){var w=-c/o,E=-(r*w+i)/n;h=[[E,w]]}else if(r===0){var E=-i/n,w=-(a*E+c)/o;h=[[E,w]]}else if(o===0){var E=-c/a,w=-(n*E+i)/r;h=[[E,w]]}else{var E=(r*c-o*i)/(o*n-r*a),w=-(n*E+i)/r;h=[[E,w]]}return h.map(function(T){return[T[0],T[1]]})}function iO(t,e){var n=e.map(function(g){return[0,1].map(function(m){return[Math.min(g[0][m],g[1][m]),Math.max(g[0][m],g[1][m])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],o=i[1];if(Ir(a-t[1][0])){if(!Ir(o-t[1][1])){var d=Math.max.apply(Math,n.map(function(g){return g[0][0]})),h=Math.min.apply(Math,n.map(function(g){return g[0][1]}));if(Ir(d-h)>0)return[];r=[[d,o],[h,o]]}}else{var c=Math.max.apply(Math,n.map(function(g){return g[1][0]})),u=Math.min.apply(Math,n.map(function(g){return g[1][1]}));if(Ir(c-u)>0)return[];r=[[a,c],[a,u]]}}return r.length||(r=t.filter(function(g){var m=g[0],b=g[1];return n.every(function(_){return 0<=Ir(m-_[0][0])&&0<=Ir(_[0][1]-m)&&0<=Ir(b-_[1][0])&&0<=Ir(_[1][1]-b)})})),r.map(function(g){return[Ir(g[0]),Ir(g[1])]})}function s1(t){return dX(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function pX(t,e){var n=t.slice(),r=e.slice();Gk(n)===-1&&n.reverse(),Gk(r)===-1&&r.reverse();var i=s1(n),a=s1(r),o=i.map(function(h){return Bm(h[0],h[1])}),c=a.map(function(h){return Bm(h[0],h[1])}),u=[];o.forEach(function(h,g){var m=i[g],b=[];c.forEach(function(_,w){var E=Aw(h,_),T=iO(E,[m,a[w]]);b.push.apply(b,T.map(function(C){return{index1:g,index2:w,pos:C,type:"intersection"}}))}),b.sort(function(_,w){return ys(m[0],_.pos)-ys(m[0],w.pos)}),u.push.apply(u,b),a1(m[1],r)&&u.push({index1:g,index2:-1,pos:m[1],type:"inside"})}),a.forEach(function(h,g){if(a1(h[1],n)){var m=!1,b=Cs(u,function(_){var w=_.index2;return w===g?(m=!0,!1):!!m});b===-1&&(m=!1,b=Cs(u,function(_){var w=_.index1,E=_.index2;return w===-1&&E+1===g?(m=!0,!1):!!m})),b===-1?u.push({index1:-1,index2:g,pos:h[1],type:"inside"}):u.splice(b,0,{index1:-1,index2:g,pos:h[1],type:"inside"})}});var d={};return u.filter(function(h){var g=h.pos,m=g[0]+"x"+g[1];return d[m]?!1:(d[m]=!0,!0)})}function gX(t,e){var n=pX(t,e);return n.map(function(r){var i=r.pos;return i})}function mX(t,e){var n=gX(t,e);return rO(n)}var o1=function(t,e){return o1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},o1(t,e)};function vX(t,e){o1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Nn=function(){return Nn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Nn.apply(this,arguments)};function yX(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Mb(t){return yX([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function bX(t){return t.touches&&t.touches.length>=2}function Rg(t){return t?t.touches?_X(t.touches):[aO(t)]:[]}function xX(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function eR(t,e,n){var r=n.length,i=Nf(t,r),a=i.clientX,o=i.clientY,c=i.originalClientX,u=i.originalClientY,d=Nf(e,r),h=d.clientX,g=d.clientY,m=Nf(n,r),b=m.clientX,_=m.clientY,w=a-h,E=o-g,T=a-b,C=o-_;return{clientX:c,clientY:u,deltaX:w,deltaY:E,distX:T,distY:C}}function Ob(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function _X(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(aO(t[r]));return n}function aO(t){return{clientX:t.clientX,clientY:t.clientY}}function Nf(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var Pb=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),Mb(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),Mb(e)-Mb(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=eR(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],o=0;o<i;++o)a[o]=eR([e[o]],[n[o]],[r[o]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=Nf(e,this.length),i=Nf(this.prevClients,this.length),a=r.clientX-i.clientX,o=r.clientY-i.clientY;return Math.sqrt(a*a+o*o)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),Ob(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),Ob(e)/Ob(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),tR=["textarea","input"],wX=(function(t){vX(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(m,b){if(b===void 0&&(b=!0),!(!i.flag&&m.cancelable===!1)){var _=m.type.indexOf("drag")>=-1;if(!(i.flag&&_)){i._isDragAPI=!0;var w=i.options,E=w.container,T=w.pinchOutside,C=w.preventWheelClick,N=w.preventRightClick,V=w.preventDefault,P=w.checkInput,M=w.dragFocusedInput,A=w.preventClickEventOnDragStart,k=w.preventClickEventOnDrag,D=w.preventClickEventByCondition,j=i._useTouch,L=!i.flag;if(i._isSecondaryButton=m.which===3||m.button===2,C&&(m.which===2||m.button===1)||N&&(m.which===3||m.button===2))return i.stop(),!1;if(L){var U=i._window.document.activeElement,O=m.target;if(O){var Z=O.tagName.toLowerCase(),X=tR.indexOf(Z)>-1,q=O.isContentEditable;if(X||q){if(P||!M&&U===O)return!1;if(U&&(U===O||q&&U.isContentEditable&&U.contains(O)))if(M)O.blur();else return!1}else if((V||m.type==="touchstart")&&U){var W=U.tagName.toLowerCase();(U.isContentEditable||tR.indexOf(W)>-1)&&U.blur()}(A||k||D)&&Jn(i._window,"click",i._onClick,!0)}i.clientStores=[new Pb(Rg(m))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=b,i._dragFlag=!0,i._prevInputEvent=m,i.data={},i.doubleFlag=th()-i.prevTime<200,i._isMouseEvent=xX(m),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var ee=i._preventMouseEvent||i.emit("dragStart",Nn(Nn({data:i.data,datas:i.data,inputEvent:m,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:b,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){m.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));ee===!1&&i.stop(),i._isMouseEvent&&i.flag&&V&&m.preventDefault()}if(!i.flag)return!1;var ie=0;if(L?(i._attchDragEvent(),j&&T&&(ie=setTimeout(function(){Jn(E,"touchstart",i.onDragStart,{passive:!1})}))):j&&T&&Ln(E,"touchstart",i.onDragStart),i.flag&&bX(m)){if(clearTimeout(ie),L&&m.touches.length!==m.changedTouches.length)return;i.pinchFlag||i.onPinchStart(m)}}}},i.onDrag=function(m,b){if(i.flag){var _=i.options.preventDefault;!i._isMouseEvent&&_&&m.preventDefault(),i._prevInputEvent=m;var w=Rg(m),E=i.moveClients(w,m,!1);if(i._dragFlag){if(i.pinchFlag||E.deltaX||E.deltaY){var T=i._preventMouseEvent||i.emit("drag",Nn(Nn({},E),{isScroll:!!b,inputEvent:m}));if(T===!1){i.stop();return}}i.pinchFlag&&i.onPinch(m,w)}i.getCurrentStore().getPosition(w,!0)}},i.onDragEnd=function(m){if(i.flag){var b=i.options,_=b.pinchOutside,w=b.container,E=b.preventClickEventOnDrag,T=b.preventClickEventOnDragStart,C=b.preventClickEventByCondition,N=i.isDrag;(E||T||C)&&requestAnimationFrame(function(){i._allowClickEvent()}),!C&&!T&&E&&!N&&i._allowClickEvent(),i._useTouch&&_&&Ln(w,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(m);var V=m?.touches?Rg(m):[],P=V.length;P===0||!i.options.keepDragging?i.flag=!1:i._addStore(new Pb(V));var M=i._getPosition(),A=th(),k=!N&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=N||k?0:A,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Nn({data:i.data,datas:i.data,isDouble:k,isDrag:N,isClick:!N,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:m,isTrusted:i._isTrusted},M)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Ln(i._window,"click",i._onClick,!0)},i._onClick=function(m){i._allowClickEvent(),i._allowMouseEvent();var b=i.options.preventClickEventByCondition;b?.(m)||(m.stopPropagation(),m.preventDefault())},i._onContextMenu=function(m){var b=i.options;b.preventRightClick?i.onDragEnd(m):m.preventDefault()},i._passCallback=function(){};var a=[].concat(n),o=a[0];i._window=I4(o)?o:Io(o),i.options=Nn({checkInput:!1,container:o&&!("document"in o)?Io(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var c=i.options,u=c.container,d=c.events,h=c.checkWindowBlur;if(i._useDrag=d.indexOf("drag")>-1,i._useTouch=d.indexOf("touch")>-1,i._useMouse=d.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(m){Jn(m,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(m){Jn(m,"mousedown",i.onDragStart),Jn(m,"mousemove",i._passCallback)}),Jn(u,"contextmenu",i._onContextMenu)),h&&Jn(Io(),"blur",i.onBlur),i._useTouch){var g={passive:!1};a.forEach(function(m){Jn(m,"touchstart",i.onDragStart,g),Jn(m,"touchmove",i._passCallback,g)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],o=this.getCurrentStore(),c=o.prevClients;return this.moveClients(c.map(function(u){var d=u.clientX,h=u.clientY;return{clientX:d+i,clientY:h+a,originalClientX:d,originalClientY:h}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),Nn(Nn({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),Ln(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){Ln(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){Ln(a,"mousedown",n.onDragStart)}),Ln(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){Ln(a,"touchstart",n.onDragStart)}),Ln(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new Pb(Rg(n));this.pinchFlag=!0,this._addStore(a);var o=this.emit("pinchStart",Nn(Nn({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Nn(Nn({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Nn(Nn({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),o=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var c=!1;return!o&&this.isDrag&&(c=!0),Nn(Nn({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:c})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),o=this.clientStores.slice(1).reduce(function(d,h){var g=h.getPosition();return d.distX+=g.distX,d.distY+=g.distY,d},a),c=o.distX,u=o.distY;return Nn(Nn({},a),{distX:c,distY:u})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(Jn(r,"dragover",this.onDrag,i),Jn(n,"dragend",this.onDragEnd)),this._useMouse&&(Jn(r,"mousemove",this.onDrag),Jn(n,"mouseup",this.onDragEnd)),this._useTouch&&(Jn(r,"touchmove",this.onDrag,i),Jn(n,"touchend",this.onDragEnd,i),Jn(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(Ln(r,"dragover",this.onDrag),Ln(n,"dragend",this.onDragEnd)),this._useMouse&&(Ln(r,"mousemove",this.onDrag),Ln(n,"mouseup",this.onDragEnd)),this._useTouch&&(Ln(r,"touchstart",this.onDragStart),Ln(r,"touchmove",this.onDrag),Ln(n,"touchend",this.onDragEnd),Ln(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(j0);function SX(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var EX=SX;function TX(t){return EX(t).toString(36)}function AX(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function CX(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?zl(a):[""]).map(function(o){var c=o.trim();return c.indexOf("@")===0?c:c.indexOf(":global")>-1?c.replace(/\:global/g,""):c.indexOf(":host")>-1?"".concat(c.replace(/\:host/g,".".concat(t))):c?".".concat(t," ").concat(c):".".concat(t)}).join(", ")+" {"})}function kX(t,e,n,r,i){var a=Qu(r),o=a.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=CX(t,e,n),(i||a.head||a.body).appendChild(o),o}function RX(t){var e="rCS"+TX(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=AX(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=kX(e,t,r,n,i);else{var o=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var c,u=parseFloat(a.getAttribute("data-styled-count"))||0;u<=1?(a.remove?a.remove():(c=a.parentNode)===null||c===void 0||c.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(u-1))}}}}}var l1=function(){return l1=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l1.apply(this,arguments)};function DX(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function sO(t,e){var n=RX(e),r=n.className;return kY(function(i,a){var o=i.className,c=o===void 0?"":o;i.cspNonce;var u=DX(i,["className","cspNonce"]),d=UY();return FY(a,function(){return d.current},[]),G4(function(){var h=n.inject(d.current,{nonce:i.cspNonce});return function(){h.destroy()}},[]),qi(t,l1({ref:d,"data-styled-id":r,className:"".concat(c," ").concat(r)},u))})}var c1=function(t,e){return c1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},c1(t,e)};function Lh(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");c1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var te=function(){return te=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},te.apply(this,arguments)};function NX(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function IX(t,e,n,r){var i=arguments.length,a=i<3?e:r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function MX(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ne(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function Ce(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Bh(t,e){return te({events:[],props:[],name:t},e)}var OX=["n","w","s","e"],Cw=["n","w","s","e","nw","ne","sw","se"];function PX(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function jX(t){var e=PX(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Ju=YY(),oO=Ju.browser.webkit,lO=oO&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),cO=Ju.browser.name,uO=parseInt(Ju.browser.version,10),VX=cO==="chrome",zX=Ju.browser.chromium,LX=parseInt(Ju.browser.chromiumVersion,10)||0,BX=VX&&uO>=109||zX&&LX>=109,UX=cO==="firefox",FX=parseInt(Ju.browser.webkitVersion,10)>=612||uO>=15,kw="moveable-",GX=Cw.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),$X=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(GX,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(jX(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(lO?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),HX=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],u1=1e-4,Er=1e-7,Dg=1e-9,d1=Math.pow(10,10),nR=-d1,qX={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Rw={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},dO={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},fO=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Uh(t,e,n,r,i,a){var o,c;a===void 0&&(a="draggable");var u=(c=(o=e.gestos[a])===null||o===void 0?void 0:o.move(n,t.inputEvent))!==null&&c!==void 0?c:{},d=u.originalDatas||u.datas,h=d[a]||(d[a]={});return te(te({},u),{isPinch:!!r,parentEvent:!0,datas:h,originalDatas:t.originalDatas})}var Nu=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),te(te({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var o=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!o&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function vu(t,e,n,r){var i=t.length===16,a=i?4:3,o=ac(t,n,r,a),c=ne(o,4),u=ne(c[0],2),d=u[0],h=u[1],g=ne(c[1],2),m=g[0],b=g[1],_=ne(c[2],2),w=_[0],E=_[1],T=ne(c[3],2),C=T[0],N=T[1],V=ne(an(t,e,a),2),P=V[0],M=V[1],A=Math.min(d,m,w,C),k=Math.min(h,b,E,N),D=Math.max(d,m,w,C),j=Math.max(h,b,E,N);d=d-A||0,m=m-A||0,w=w-A||0,C=C-A||0,h=h-k||0,b=b-k||0,E=E-k||0,N=N-k||0,P=P-A||0,M=M-k||0;var L=t[0],U=t[a+1],O=br(L*U);return{left:A,top:k,right:D,bottom:j,origin:[P,M],pos1:[d,h],pos2:[m,b],pos3:[w,E],pos4:[C,N],direction:O}}function hO(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,o=a.moveableClientRect,c=a.rootMatrix,u=a.is3d,d=a.pos1,h=o.left,g=o.top,m=u?4:3,b=ne(He(Ou(c,[n-h,r-g],m),d),2),_=b[0],w=b[1],E=ne(Ua({datas:i,distX:_,distY:w}),2),T=E[0],C=E[1];return[T,C]}function ic(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,o=r.is3d,c=r.left,u=r.top,d=r.origin,h=r.offsetMatrix,g=r.targetMatrix,m=r.transformOrigin,b=o?4:3;n.is3d=o,n.matrix=i,n.targetMatrix=g,n.beforeMatrix=a,n.offsetMatrix=h,n.transformOrigin=m,n.inverseMatrix=Va(i,b),n.inverseBeforeMatrix=Va(a,b),n.absoluteOrigin=Wl(At([c,u],d),b),n.startDragBeforeDist=fr(n.inverseBeforeMatrix,n.absoluteOrigin,b),n.startDragDist=fr(n.inverseMatrix,n.absoluteOrigin,b)}function YX(t){return vu(t.datas.beforeTransform,[50,50],100,100).direction}function V0(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,o=i.nextTransforms,c=o.length,u=i.nextTransformAppendedIndexes,d=-1;a===-1?(n==="translate"?d=0:n==="rotate"&&(d=Cs(o,function(b){return b.match(/scale\(/g)})),d===-1&&(d=o.length),r.transformIndex=d):Vr(u,function(b){return b.index===a&&b.functionName===n})?d=a:d=a+u.filter(function(b){return b.index<a}).length;var h=bK(o,t.state,d),g=h.targetFunction,m=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=h.beforeFunctionTexts,r.afterFunctionTexts=h.afterFunctionTexts,r.beforeTransform=h.beforeFunctionMatrix,r.beforeTransform2=h.beforeFunctionMatrix2,r.targetTansform=h.targetFunctionMatrix,r.afterTransform=h.afterFunctionMatrix,r.afterTransform2=h.afterFunctionMatrix2,r.targetAllTransform=h.allFunctionMatrix,g.functionName===m?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):c>d&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Ce(Ce([],ne(u),!1),[{functionName:n,index:d,isAppend:!0}],!1))}function z0(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function XX(t){var e=t.datas,n=t.distX,r=t.distY,i=ne(gO({datas:e,distX:n,distY:r}),2),a=i[0],o=i[1],c=pO(e,ZY([a,o],4));return fr(c,Wl([0,0,0],4),4)}function pO(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,o=t.afterTransform2,c=t.targetAllTransform,u=n?Gt(c,e,4):Gt(e,c,4),d=Gt(Va(n?a:r,4),u,4),h=Gt(d,Va(n?o:i,4),4);return h}function gO(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,o=e.startDragBeforeDist,c=e.absoluteOrigin,u=a?4:3;return He(fr(i,At(c,[n,r]),u),o)}function Ua(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,o=n.inverseMatrix,c=n.is3d,u=n.startDragBeforeDist,d=n.startDragDist,h=n.absoluteOrigin,g=c?4:3;return He(fr(e?a:o,At(h,[r,i]),g),e?u:d)}function WX(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,o=n.is3d;n.startDragBeforeDist;var c=n.startDragDist,u=n.absoluteOrigin,d=o?4:3;return He(fr(a,At(c,[r,i]),d),u)}function KX(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(o,c){var u=Mh(o),d=u.value,h=u.unit,g=c?i:r,m=c?n:e;if(o==="%"||isNaN(d)){var b=g?a[c]/g:0;return m*b}else if(h!=="%")return d;return m*d/100}):a}function mO(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function QX(t,e){return mO(e).map(function(n){return t[n]})}function jb(t,e){var n=(e+1)/2;return[Vm(t[0][0],t[1][0],n,1-n),Vm(t[0][1],t[1][1],n,1-n)]}function Fn(t,e){var n=jb([t[0],t[1]],e[0]),r=jb([t[2],t[3]],e[0]);return jb([n,r],e[1])}function ZX(t,e,n,r,i,a){var o=ac(e,n,r,i),c=Fn(o,a),u=t[0]-c[0],d=t[1]-c[1];return[u,d]}function Fh(t,e,n,r){return Gt(t,Mf(e,r,n),r)}function JX(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,o=t.is3d,c=o?4:3,u;if(jr(n)){var d=e.beforeTransform,h=e.afterTransform;r?u=Ji(rh(n),4,c):u=Ji(Gt(Gt(d,rh([n]),4),h,4),4,c)}else u=n;return Fh(a,u,i,c)}function eW(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,o=t.targetAllTransform,c=i?4:3;return Fh(r,Gt(o||a,Ew(e,c),c),n,c)}function L0(t,e){var n=ed(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=Vn(r)?r:$o(r),f1(t,e,i)},setTransformIndex:function(r){f1(t,e,r)}}}function B0(t,e,n){var r=ed(e),i=r.startTransforms;f1(t,e,Cs(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function f1(t,e,n){var r=ed(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var o=t.state,c=Du([a],{"x%":function(u){return u/100*o.offsetWidth},"y%":function(u){return u/100*o.offsetHeight}});i.startValue=c[0].functionValue}}}function Dw(t,e){var n=ed(t);n.nextTransforms=$o(e)}function ed(t){return t.originalDatas.beforeRenderable}function Um(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Ng(t){return(Um(t)||[]).join(" ")}function Ig(t){return ed(t).nextStyle}function vO(t,e,n,r,i){Dw(i,e);var a=yr.drag(t,Uh(i,t.state,n,r)),o=a?a.transform:e;return te(te({transform:e,drag:a},_r({transform:o},i)),{afterTransform:o})}function Nw(t,e,n,r,i,a){var o=JX(t.state,i,e,a),c=rW(t,n,r,o);return c}function yO(t,e,n,r,i,a,o){var c=Nw(t,e,n,i,a,o),u=t.state,d=u.left,h=u.top,g=t.props.groupable,m=g?d:0,b=g?h:0,_=He(r,c);return He(_,[m,b])}function tW(t,e,n,r,i,a,o){var c=yO(t,e,n,r,i,a,o);return c}function nW(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function rW(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,o=i.height,c=i.is3d,u=c?4:3,d=[a/2*(1+e[0])+n[0],o/2*(1+e[1])+n[1]];return an(r,d,u)}function iW(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return yO(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function aW(t,e,n,r,i,a){var o=t.props.groupable,c=t.state,u=c.transformOrigin,d=c.offsetMatrix,h=c.is3d,g=c.width,m=c.height,b=c.left,_=c.top,w=a.fixedDirection,E=a.nextTargetMatrix||c.targetMatrix,T=h?4:3,C=KX(i,e,n,g,m,u),N=o?b:0,V=o?_:0,P=Fh(d,E,C,T),M=ZX(r,P,e,n,T,w);return He(M,[N,V])}function sW(t,e){return Fn(ki(t.state),e)}function oW(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function lW(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function cW(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function bO(t,e,n){for(var r=t,i=[],a=vw(t)||Zo(t),o=!n&&t===e||t===a,c=o,u=!1,d=3,h,g,m,b=!1,_=ah(e,e,!0).offsetParent,w=1;r&&!c;){c=o;var E=zr(r),T=E("position"),C=GO(r),N=T==="fixed",V=cW(E),P=JY(sK(C)),M=void 0,A=!1,k=!1,D=0,j=0,L=0,U=0,O={hasTransform:!1,fixedContainer:null};N&&(b=!0,O=dK(r),_=O.fixedContainer);var Z=P.length;!u&&(Z===16||V.length)&&(u=!0,d=4,y1(i),m&&(m=Ji(m,3,4))),u&&Z===9&&(P=Ji(P,3,4));var X=uK(r,t),q=X.tagName,W=X.hasOffset,ee=X.isSVG,ie=X.origin,$=X.targetOrigin,F=X.offset,Y=ne(F,2),J=Y[0],K=Y[1];q==="svg"&&!r.ownerSVGElement&&m&&(i.push({type:"target",target:r,matrix:fK(r,d)}),i.push({type:"offset",target:r,matrix:Kt(d)}));var oe=parseFloat(E("zoom"))||1;if(N)M=O.fixedContainer,A=!0;else{var ce=ah(r,e,!1,!0,E),me=ce.offsetZoom;if(M=ce.offsetParent,A=ce.isEnd,k=ce.isStatic,w*=me,(ce.isCustomElement||me!==1)&&k)J-=M.offsetLeft,K-=M.offsetTop;else if(UX||BX){var ge=ce.parentSlotElement;if(ge){for(var Te=M,Ne=0,ae=0;Te&&lW(Te);)Ne+=Te.offsetLeft,ae+=Te.offsetTop,Te=Te.offsetParent;J-=Ne,K-=ae}}}if(oO&&!FX&&W&&!ee&&k&&(T==="relative"||T==="static")&&(J-=M.offsetLeft,K-=M.offsetTop,o=o||A),N)W&&O.hasTransform&&(L=M.clientLeft,U=M.clientTop);else if(W&&_!==M&&(D=M.clientLeft,j=M.clientTop),W&&M===a){var Ae=$O(r,!1);J+=Ae[0],K+=Ae[1]}if(i.push({type:"target",target:r,matrix:Mf(P,d,ie)}),V.length&&(i.push({type:"offset",target:r,matrix:Kt(d)}),i.push({type:"target",target:r,matrix:Mf(rh(V),d,ie)})),W){var De=r===t,Me=De?0:r.scrollLeft,Be=De?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Kl([J-Me+D-L,K-Be+j-U],d)})}else i.push({type:"offset",target:r,origin:ie});if(oe!==1&&i.push({type:"zoom",target:r,matrix:Mf(Ew([oe,oe],d),d,[0,0])}),m||(m=P),h||(h=ie),g||(g=$),c||N)break;r=M,o=A,(!n||r===a)&&(c=o)}return m||(m=Kt(d)),h||(h=[0,0]),g||(g=[0,0]),{zoom:w,offsetContainer:_,matrixes:i,targetMatrix:m,transformOrigin:h,targetOrigin:g,is3d:u,hasFixed:b}}var Nl=null,Il=null,su=null;function Iu(t){t?(window.Map&&(Nl=new Map,Il=new Map),su=[]):(Nl=null,su=null,Il=null)}function uW(t){var e=Il?.get(t);if(e)return e;var n=Of(t,!0);return Il&&Il.set(t,n),n}function dW(t,e){if(su){var n=Vr(su,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=bO(t,e,!0);return su&&su.push([[t,e],r]),r}function zr(t){var e=Nl?.get(t);if(!e){var n=Io(t).getComputedStyle(t);if(!Nl)return function(a){return n[a]};e={style:n,cached:{}},Nl.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function Yi(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(o,c){return a[c]=a[c]||{},a[c][e]=a[c][e]||{},te(te({},n),{isRequestChild:!0,datas:a[c][e],originalDatas:a[c]})})}function Vb(t,e,n,r,i,a,o){var c=!!n.match(/Start$/g),u=!!n.match(/End$/g),d=i.isPinch,h=i.datas,g=Yi(t,e.name,i),m=t.moveables,b=[],_=g.map(function(w,E){var T=m[E],C=T.state,N=C.gestos,V=w;if(c)V=new Nu(o).dragStart(r,w),b.push(V);else{if(N[o]||(N[o]=h.childGestos[E]),!N[o])return;V=Uh(w,C,r,d,a,o),b.push(V)}var P=e[n](T,te(te({},V),{parentFlag:!0}));return u&&(N[o]=null),P});return c&&(h.childGestos=m.map(function(w){return w.state.gestos[o]})),{eventParams:_,childEvents:b}}function bs(t,e,n,r,i,a){i===void 0&&(i=function(h,g){return g});var o=!!n.match(/End$/g),c=Yi(t,e.name,r),u=t.moveables,d=c.map(function(h,g){var m=u[g],b=h;b=i(m,h);var _=e[n](m,te(te({},b),{parentFlag:!0}));return o&&(m.state.gestos={}),_});return d}function Fm(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,o=r.datas.startPositions||ki(e.state),c=Fn(o,i),u=ne(fr(zh(-t.rotation/180*Math.PI,3),[c[0]-a[0],c[1]-a[1],1],3),2),d=u[0],h=u[1];return r.datas.originalX=d,r.datas.originalY=h,r}function xO(t,e,n,r){var i=t.getState(),a=i.renderPoses,o=i.rotation,c=i.direction,u=Zl(t.props,e).zoom,d=If(o/Math.PI*180),h={},g=t.renderState;g.renderDirectionMap||(g.renderDirectionMap={});var m=g.renderDirectionMap;n.forEach(function(_){var w=_.dir;h[w]=!0});var b=br(c);return n.map(function(_){var w=_.data,E=_.classNames,T=_.dir,C=Rw[T];if(!C||!h[T])return null;m[T]=!0;var N=(rt(d,15)+b*dO[T]+720)%180,V={};return ks(w).forEach(function(P){V["data-".concat(P)]=w[P]}),r.createElement("div",te({className:Fe.apply(void 0,Ce(["control","direction",T,e],ne(E),!1)),"data-rotation":N,"data-direction":T},V,{key:"direction-".concat(T),style:qm.apply(void 0,Ce([o,u],ne(C.map(function(P){return a[P]})),!1))}))})}function _O(t,e,n,r){var i=Zl(t.props,n),a=i.renderDirections,o=a===void 0?e:a,c=i.displayAroundControls;if(!o)return[];var u=o===!0?Cw:o;return Ce(Ce([],ne(c?TO(t,r,n,u):[]),!1),ne(xO(t,n,u.map(function(d){return{data:{},classNames:[],dir:d}}),r)),!1)}function ih(t,e,n,r,i,a){for(var o=[],c=6;c<arguments.length;c++)o[c-6]=arguments[c];var u=_n(n,r),d=e?rt(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Fe.apply(void 0,Ce(["line","direction",e?"edge":"",e],ne(o),!1)),"data-rotation":d,"data-line-key":a,"data-direction":e,style:vf(n,r,i,u)})}function wO(t,e,n,r,i){var a=n===!0?OX:n;return a.map(function(o,c){var u=ne(Rw[o],2),d=u[0],h=u[1];if(h!=null)return ih(t,o,r[d],r[h],i,"".concat(e,"Edge").concat(c),e)}).filter(Boolean)}function SO(t){return function(e,n){var r=Zl(e.props,t).edge;return r&&(r===!0||r.length)?Ce(Ce([],ne(wO(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),ne(fW(e,t,n)),!1):EO(e,t,n)}}function EO(t,e,n){return _O(t,Cw,e,n)}function fW(t,e,n){return _O(t,["nw","ne","sw","se"],e,n)}function TO(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),o=a.renderPoses,c=a.rotation,u=a.direction,d=i.renderDirectionMap,h=t.props.zoom,g=br(u),m=c/Math.PI*180;return(r||ks(d)).map(function(b){var _=Rw[b];if(!_)return null;var w=(rt(m,15)+g*dO[b]+720)%180,E=["around-control"];return n&&E.push("direction",n),e.createElement("div",{className:Fe.apply(void 0,Ce([],ne(E),!1)),"data-rotation":w,"data-direction":b,key:"direction-around-".concat(b),style:qm.apply(void 0,Ce([c,h],ne(_.map(function(T){return o[T]})),!1))})})}function Iw(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,o=r.left,c=o===void 0?-1/0:o,u=r.top,d=u===void 0?-1/0:u,h=r.right,g=h===void 0?1/0:h,m=r.bottom,b=m===void 0?1/0:m,_={position:a,left:c,top:d,right:g,bottom:b};return{vertical:rR(_,e,!0),horizontal:rR(_,n,!1)}}function U0(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,o=r.clientLeft,c=r.clientTop,u=n.snapOffset,d=u.left,h=u.top,g=u.right,m=u.bottom,b=e||t.props.bounds||{},_=b.position||"client",w=_==="css",E=b.left,T=E===void 0?-1/0:E,C=b.top,N=C===void 0?-1/0:C,V=b.right,P=V===void 0?w?-1/0:1/0:V,M=b.bottom,A=M===void 0?w?-1/0:1/0:M;return w&&(P=a+g-d-P,A=i+m-h-A),{left:T+d-o,right:P+d-o,top:N+h-c,bottom:A+h-c}}function hW(t,e,n){var r=U0(t),i=r.left,a=r.top,o=r.right,c=r.bottom,u=ne(n,2),d=u[0],h=u[1],g=ne(He(n,e),2),m=g[0],b=g[1];we(m)<Er&&(m=0),we(b)<Er&&(b=0);var _=b>0,w=m>0,E={isBound:!1,offset:0,pos:0},T={isBound:!1,offset:0,pos:0};if(m===0&&b===0)return{vertical:E,horizontal:T};if(m===0)_?c<h&&(T.pos=c,T.offset=h-c):a>h&&(T.pos=a,T.offset=h-a);else if(b===0)w?o<d&&(E.pos=o,E.offset=d-o):i>d&&(E.pos=i,E.offset=d-i);else{var C=b/m,N=n[1]-C*d,V=0,P=0,M=!1;w&&o<=d?(V=C*o+N,P=o,M=!0):!w&&d<=i&&(V=C*i+N,P=i,M=!0),M&&(V<a||V>c)&&(M=!1),M||(_&&c<=h?(V=c,P=(V-N)/C,M=!0):!_&&h<=a&&(V=a,P=(V-N)/C,M=!0)),M&&(E.isBound=!0,E.pos=P,E.offset=d-P,T.isBound=!0,T.pos=V,T.offset=h-V)}return{vertical:E,horizontal:T}}function rR(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,Ce([],ne(e),!1)),o=Math.max.apply(Math,Ce([],ne(e),!1)),c=[];return r+1>a&&c.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<o&&c.push({direction:"end",isBound:!0,offset:o-i,pos:i}),c.length||c.push({isBound:!1,offset:0,pos:0}),c.sort(function(u,d){return we(d.offset)-we(u.offset)})}function iR(t,e,n){var r=n?t.map(function(i){return Vh(i,n)}):t;return r.some(function(i){return i[0]<e.left&&we(i[0]-e.left)>.1||i[0]>e.right&&we(i[0]-e.right)>.1||i[1]<e.top&&we(i[1]-e.top)>.1||i[1]>e.bottom&&we(i[1]-e.bottom)>.1})}function pW(t,e,n){var r=Ci(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,o){return we(a-t[n?0:1])-we(o-t[n?0:1])}).map(function(a){return _n([0,0],n?[a,e]:[e,a])})}function gW(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,o=U0(t),c=o.left,u=o.top,d=o.right,h=o.bottom,g=c-r[0],m=d-r[0],b=u-r[1],_=h-r[1],w={left:g,top:b,right:m,bottom:_};if(!iR(n,w,0))return[];var E=[];return[[g,0],[m,0],[b,1],[_,1]].forEach(function(T){var C=ne(T,2),N=C[0],V=C[1];n.forEach(function(P){var M=_n([0,0],P);E.push.apply(E,Ce([],ne(pW(P,N,V).map(function(A){return a+A-M}).filter(function(A){return!iR(e,w,A)}).map(function(A){return rt(A*180/Math.PI,Er)})),!1))})}),E}var mW=["left","right","center"],vW=["top","bottom","middle"],aR={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Ho={start:"left",end:"right",center:"center"},qo={start:"top",end:"bottom",center:"middle"};function ou(){return{left:!1,top:!1,right:!1,bottom:!1}}function td(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,o=n.verticalGuidelines,c=n.horizontalGuidelines,u=n.snapGridWidth,d=n.snapGridHeight,h=t.state,g=h.guidelines,m=h.enableSnap;return!r||!m||e&&r!==!0&&r.indexOf(e)<0?!1:!!(u||d||i||a||g&&g.length||o&&o.length||c&&c.length)}function Mw(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function yW(t,e){var n=Mw(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function Ow(t,e){var n=yW(t,e),r=vW.filter(function(a){return a in n}),i=mW.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function bW(t,e,n){var r=an(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function xW(t){var e=ne(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<Pn&&(i=0),Math.abs(a)<Pn&&(a=0);var o=0,c=0,u=0;return i?a?(o=-a/i,c=1,u=o*n[0]-n[1]):(c=1,u=-n[1]):(o=-1,u=n[0]),[o,c,u].map(function(d){return rt(d,Pn)})}var AO="snapRotationThreshold",CO="snapRotationDegrees",kO="snapHorizontalThreshold",RO="snapVerticalThreshold";function F0(t,e,n,r,i,a,o){var c;r===void 0&&(r=[]),i===void 0&&(i=[]);var u=t.props,d=((c=t.state.snapThresholdInfo)===null||c===void 0?void 0:c.multiples)||[1,1],h=xR(o,u[kO],5),g=xR(a,u[RO],5);return DO(t.state.guidelines,e,n,r,i,h,g,d)}function DO(t,e,n,r,i,a,o,c){return{vertical:oR(t,"vertical",e,o*c[0],r),horizontal:oR(t,"horizontal",n,a*c[1],i)}}function _W(t,e,n){var r=ne(n,2),i=r[0],a=r[1],o=ne(e,2),c=o[0],u=o[1],d=ne(He(n,e),2),h=d[0],g=d[1],m=g>0,b=h>0;h=Ym(h),g=Ym(g);var _={isSnap:!1,offset:0,pos:0},w={isSnap:!1,offset:0,pos:0};if(h===0&&g===0)return{vertical:_,horizontal:w};var E=F0(t,h?[i]:[],g?[a]:[],[],[],void 0,void 0),T=E.vertical,C=E.horizontal;T.posInfos.filter(function(q){var W=q.pos;return b?W>=c:W<=c}),C.posInfos.filter(function(q){var W=q.pos;return m?W>=u:W<=u}),T.isSnap=T.posInfos.length>0,C.isSnap=C.posInfos.length>0;var N=h1(T),V=N.isSnap,P=N.guideline,M=h1(C),A=M.isSnap,k=M.guideline,D=A?k.pos[1]:0,j=V?P.pos[0]:0;if(h===0)A&&(w.isSnap=!0,w.pos=k.pos[1],w.offset=a-w.pos);else if(g===0)V&&(_.isSnap=!0,_.pos=j,_.offset=i-j);else{var L=g/h,U=n[1]-L*i,O=0,Z=0,X=!1;V?(Z=j,O=L*Z+U,X=!0):A&&(O=D,Z=(O-U)/L,X=!0),X&&(_.isSnap=!0,_.pos=Z,_.offset=i-Z,w.isSnap=!0,w.pos=O,w.offset=a-O)}return{vertical:_,horizontal:w}}function wo(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function sR(t,e,n,r){var i=Ow(t.props.snapDirections,e),a=F0(t,i.vertical,i.horizontal,i.verticalNames.map(function(u){return wo(u)}),i.horizontalNames.map(function(u){return wo(u)}),n,r),o=wo(i.horizontalNames[a.horizontal.index]),c=wo(i.verticalNames[a.vertical.index]);return{vertical:te(te({},a.vertical),{direction:c}),horizontal:te(te({},a.horizontal),{direction:o})}}function h1(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,o=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:o}}function oR(t,e,n,r,i){var a,o;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var c=e==="vertical",u=c?0:1,d=n.map(function(g,m){var b=i[m]||"",_=t.map(function(w){var E=w.pos,T=g-E[u];return{offset:T,dist:we(T),guideline:w,direction:b}}).filter(function(w){var E=w.guideline,T=w.dist,C=E.type;return!(C!==e||T>r)}).sort(function(w,E){return w.dist-E.dist});return{pos:g,index:m,guidelineInfos:_,direction:b}}).filter(function(g){return g.guidelineInfos.length>0}).sort(function(g,m){return g.guidelineInfos[0].dist-m.guidelineInfos[0].dist}),h=d.length>0;return{isSnap:h,index:h?d[0].index:-1,direction:(o=(a=d[0])===null||a===void 0?void 0:a.direction)!==null&&o!==void 0?o:"",posInfos:d}}function wW(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(m,b,_){var w=_[b+1]||_[0];a.push(m),a.push([(m[0]+w[0])/2,(m[1]+w[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,Ce([],ne(QX([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var o=a.map(function(m){return Fn(e,m)}),c=o.map(function(m){return m[0]}),u=o.map(function(m){return m[1]}),d=F0(t,c,u,a.map(function(m){return wo(m[0])}),a.map(function(m){return wo(m[1])}),r,i),h=wo(a.map(function(m){return m[0]})[d.vertical.index]),g=wo(a.map(function(m){return m[1]})[d.horizontal.index]);return{vertical:te(te({},d.vertical),{direction:h}),horizontal:te(te({},d.horizontal),{direction:g})}}function NO(t,e){var n=we(t.offset),r=we(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Er?1:r<Er?-1:n-r}function Gm(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],o=n.offset[e],c=r.offset[e];if(i){if(!a)return-1}else return 1;return NO({isBound:n.isBound,isSnap:n.isSnap,offset:o},{isBound:r.isBound,isSnap:r.isSnap,offset:c})})[0]}function SW(t,e,n){var r=[];if(n)we(e[0])!==1||we(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(c){var u=[o*i[0],c*i[1]];e[0]===u[0]&&e[1]===u[1]||r.push([e,u])})})}else if(t[0]){var a=we(e[0])===1?[1]:[1,-1];a.forEach(function(o){r.push([[e[0],-1],[o*t[0],-1]],[[e[0],0],[o*t[0],0]],[[e[0],1],[o*t[0],1]])})}else if(t[1]){var a=we(e[1])===1?[1]:[1,-1];a.forEach(function(c){r.push([[-1,e[1]],[-1,c*t[1]]],[[0,e[1]],[0,c*t[1]]],[[1,e[1]],[1,c*t[1]]])})}return r}function IO(t,e){var n=Zx([e[0][0],e[1][0]]),r=Zx([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function Pw(t,e){var n=ne(e,2),r=n[0],i=n[1],a=i[0]-r[0],o=i[1]-r[1];we(a)<Er&&(a=0),we(o)<Er&&(o=0);var c,u;if(!a)c=r[0],u=t[0];else if(!o)c=r[1],u=t[1];else{var d=o/a;c=d*(t[0]-r[0])+r[1],u=t[1]}return c-u}function MO(t,e,n,r){return r===void 0&&(r=Er),t.every(function(i){var a=Pw(i,e),o=a<=0;return o===n||we(a)<=r})}function lR(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function EW(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,o=e.lineConstants,c=t.props.innerBounds;if(!c)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=c.left,d=c.top,h=c.width,g=c.height,m=[[u,d],[u,d+g]],b=[[u,d],[u+h,d]],_=[[u+h,d],[u+h,d+g]],w=[[u,d+g],[u+h,d+g]];if(MO([[u,d],[u+h,d],[u,d+g],[u+h,d+g]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var E=So(n,o,b,i),T=So(n,o,w,i),C=So(n,o,m,a),N=So(n,o,_,a),V=E.isBound&&T.isBound,P=E.isBound||T.isBound,M=C.isBound&&N.isBound,A=C.isBound||N.isBound,k=Mu(E.offset,T.offset),D=Mu(C.offset,N.offset),j=[0,0],L=!1,U=!1;return we(D)<we(k)?(j=[k,0],L=P,U=V):(j=[0,D],L=A,U=M),{isAllBound:U,isVerticalBound:P,isHorizontalBound:A,isBound:L,offset:j}}function So(t,e,n,r,i,a){var o=ne(e,2),c=o[0],u=o[1],d=t[0],h=n[0],g=n[1],m=Ym(g[1]-h[1]),b=Ym(g[0]-h[0]),_=u,w=c,E=-c/u;if(b){if(!m){if(a&&!_)return{isBound:!1,offset:0};if(w){var V=(h[1]-d[1])/E+d[0];return lR(V,h[0],g[0],r,i)}else{var C=h[1]-d[1],N=we(C)<=(i||0);return{isBound:N,offset:N?C:0}}}}else{if(a&&!w)return{isBound:!1,offset:0};if(_){var T=E*(h[0]-d[0])+d[1];return lR(T,h[1],g[1],r,i)}else{var C=h[0]-d[0],N=we(C)<=(i||0);return{isBound:N,offset:N?C:0}}}return{isBound:!1,offset:0}}function OO(t,e,n){return e.map(function(r){var i=EW(t,r),a=i.isBound,o=i.offset,c=i.isVerticalBound,u=i.isHorizontalBound,d=r.multiple,h=Ua({datas:n,distX:o[0],distY:o[1]}).map(function(g,m){return g*(d[m]?2/d[m]:0)});return{sign:d,isBound:a,isVerticalBound:c,isHorizontalBound:u,isSnap:!1,offset:h}})}function TW(t,e,n){var r,i=jw(t,e,[0,0],!1).map(function(m){return te(te({},m),{multiple:m.multiple.map(function(b){return we(b)*2})})}),a=OO(t,i,n),o=Gm(a,0),c=Gm(a,1),u=0,d=0,h=o.isVerticalBound||c.isVerticalBound,g=o.isHorizontalBound||c.isHorizontalBound;return(h||g)&&(r=ne(WX({datas:n,distX:-o.offset[0],distY:-c.offset[1]}),2),u=r[0],d=r[1]),{vertical:{isBound:h,offset:u},horizontal:{isBound:g,offset:d}}}function AW(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function jw(t,e,n,r){var i=t.state,a=i.allMatrix,o=i.is3d,c=ac(a,100,100,o?4:3),u=Fn(c,[0,0]);return AW(n,r).map(function(d){var h=ne(d,3),g=h[0],m=h[1],b=h[2],_=[Fn(c,m),Fn(c,b)],w=xW(_),E=IO(u,_),T=E.vertical,C=E.horizontal,N=Pw(u,_)<=0;return{multiple:g,centerSign:N,verticalSign:T,horizontalSign:C,lineConstants:w,line:[Fn(e,m),Fn(e,b)]}})}function cR(t,e,n,r){var i=r?t.map(function(a){return Vh(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var o=Pw(n,a)<=0;return!MO(e,a,o)})}function CW(t){var e=ne(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return we(n[0]);if(!a)return we(n[1]);var o=a/i;return we((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}function kW(t){var e=ne(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var o=a/i,c=-o*n[0]+n[1];return[-c/(o+1/o),c/(o*o+1)]}function RW(t,e,n,r,i){var a=t.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var c=a.left,u=a.top,d=a.width,h=a.height,g=c-r[0],m=c+d-r[0],b=u-r[1],_=u+h-r[1],w=[[g,b],[m,b],[g,_],[m,_]],E=Fn(n,[0,0]);if(!cR(n,w,E,0))return[];var T=[],C=w.map(function(N){return[Ci(N),_n([0,0],N)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(N){var V=_n([0,0],kW(N)),P=CW(N);T.push.apply(T,Ce([],ne(C.filter(function(M){var A=ne(M,1),k=A[0];return k&&P<=k}).map(function(M){var A=ne(M,2),k=A[0],D=A[1],j=Math.acos(k?P/k:0),L=D+j,U=D-j;return[o+L-V,o+U-V]}).reduce(function(M,A){return M.push.apply(M,Ce([],ne(A),!1)),M},[]).filter(function(M){return!cR(e,w,E,M)}).map(function(M){return rt(M*180/Math.PI,Er)})),!1))}),T}function DW(t){var e=t.props.innerBounds,n=ou();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,o=r.pos3,c=r.pos4,u=[i,a,o,c],d=Fn(u,[0,0]),h=e.left,g=e.top,m=e.width,b=e.height,_=[[h,g],[h,g+b]],w=[[h,g],[h+m,g]],E=[[h+m,g],[h+m,g+b]],T=[[h,g+b],[h+m,g+b]],C=jw(t,u,[0,0],!1),N=[],V=[];return C.forEach(function(P){var M=P.line,A=P.lineConstants,k=IO(d,M),D=k.horizontal,j=k.vertical,L=So(M,A,w,j,1,!0),U=So(M,A,T,j,1,!0),O=So(M,A,_,D,1,!0),Z=So(M,A,E,D,1,!0);L.isBound&&!n.top&&(N.push(g),n.top=!0),U.isBound&&!n.bottom&&(N.push(g+b),n.bottom=!0),O.isBound&&!n.left&&(V.push(h),n.left=!0),Z.isBound&&!n.right&&(V.push(h+m),n.right=!0)}),{boundMap:n,horizontal:N,vertical:V}}function NW(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(we(i)<Pn&&(i=0),we(a)<Pn&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var o=a/i,c=t[1]-o*t[0];if(r){var u=o*(e[0]+n)+c;return[n,u-e[1]]}else{var d=(e[1]+n-c)/o;return[d-e[0],n]}}function p1(t,e,n,r,i){var a=NW(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var o=ys(t,e),c=ys(a,t),u=ys(a,e),d=c>o||u>o,h=ne(Ua({datas:i,distX:a[0],distY:a[1]}),2),g=h[0],m=h[1];return{offset:[g,m],isOutside:d}}function $m(t,e){return t.isBound?t.offset:e.isSnap?h1(e).offset:0}function IW(t,e,n,r,i){var a=ne(e,2),o=a[0],c=a[1],u=ne(n,2),d=u[0],h=u[1],g=ne(r,2),m=g[0],b=g[1],_=ne(i,2),w=_[0],E=_[1],T=-w,C=-E;if(t&&o&&c){T=0,C=0;var N=[];if(d&&h?N.push([0,E],[w,0]):d?N.push([w,0]):h?N.push([0,E]):m&&b?N.push([0,E],[w,0]):m?N.push([w,0]):b&&N.push([0,E]),N.length){N.sort(function(A,k){return Ci(He([o,c],A))-Ci(He([o,c],k))});var V=N[0];if(V[0]&&we(o)>Pn)T=-V[0],C=c*we(o+T)/we(o)-c;else if(V[1]&&we(c)>Pn){var P=c;C=-V[1],T=o*we(c+C)/we(P)-o}if(t&&h&&d)if(we(T)>Pn&&we(T)<we(w)){var M=we(w)/we(T);T*=M,C*=M}else if(we(C)>Pn&&we(C)<we(E)){var M=we(E)/we(C);T*=M,C*=M}else T=Mu(-w,T),C=Mu(-E,C)}}else T=o||d?-w:0,C=c||h?-E:0;return[T,C]}function MW(t,e,n,r,i,a){if(!td(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=Lw(a.absolutePoses,[e,n]),c=Ti(o),u=c.left,d=c.right,h=c.top,g=c.bottom,m={horizontal:o.map(function(Z){return Z[1]}),vertical:o.map(function(Z){return Z[0]})},b=Mw(t.props.snapDirections),_=Ow(b,{left:u,right:d,top:h,bottom:g,center:(u+d)/2,middle:(h+g)/2}),w=G0(t,i,_,m),E=w.vertical,T=w.horizontal,C=TW(t,o,a),N=C.vertical,V=C.horizontal,P=E.isSnap,M=T.isSnap,A=E.isBound||N.isBound,k=T.isBound||V.isBound,D=Mu(E.offset,N.offset),j=Mu(T.offset,V.offset),L=ne(IW(r,[e,n],[A,k],[P,M],[D,j]),2),U=L[0],O=L[1];return[{isBound:A,isSnap:P,offset:U},{isBound:k,isSnap:M,offset:O}]}function G0(t,e,n,r){r===void 0&&(r=n);var i=Iw(U0(t),r.vertical,r.horizontal),a=i.horizontal,o=i.vertical,c=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:F0(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),u=c.horizontal,d=c.vertical,h=$m(a[0],u),g=$m(o[0],d),m=we(h),b=we(g);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:m,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:g,dist:b,bounds:o,snap:d}}}function uR(t,e,n,r,i,a,o){o===void 0&&(o=[1,1]);var c=Iw(e,n,r),u=c.horizontal,d=c.vertical,h=DO(t,n,r,[],[],i,a,o),g=h.horizontal,m=h.vertical,b=$m(u[0],g),_=$m(d[0],m),w=we(b),E=we(_);return{horizontal:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:b,dist:w,bounds:u,snap:g},vertical:{isBound:d[0].isBound,isSnap:m.isSnap,snapIndex:m.index,offset:_,dist:E,bounds:d,snap:m}}}function OW(t,e,n,r){var i=_n(t,e)/Math.PI*180,a=n.vertical,o=a.isBound,c=a.isSnap,u=a.dist,d=n.horizontal,h=d.isBound,g=d.isSnap,m=d.dist,b=i%180,_=b<3||b>177,w=b>87&&b<93;return m<u&&(o||c&&!w&&(!r||!_))?"vertical":h||g&&!_&&(!r||!w)?"horizontal":""}function PW(t,e,n,r,i,a){return n.map(function(o){var c=ne(o,2),u=c[0],d=c[1],h=Fn(e,u),g=Fn(e,d),m=r?jW(t,h,g,i):G0(t,i,{vertical:[g[0]],horizontal:[g[1]]}),b=m.horizontal,_=b.offset,w=b.isBound,E=b.isSnap,T=m.vertical,C=T.offset,N=T.isBound,V=T.isSnap,P=He(d,u);if(!C&&!_)return{isBound:N||w,isSnap:V||E,sign:P,offset:[0,0]};var M=OW(h,g,m,r);if(!M)return{sign:P,isBound:!1,isSnap:!1,offset:[0,0]};var A=M==="vertical",k=[0,0];return!r&&we(d[0])===1&&we(d[1])===1&&u[0]!==d[0]&&u[1]!==d[1]?k=Ua({datas:a,distX:-C,distY:-_}):k=p1(h,g,-(A?C:_),A,a).offset,k=k.map(function(D,j){return D*(P[j]?2/P[j]:0)}),{sign:P,isBound:A?N:w,isSnap:A?V:E,offset:k}})}function dR(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function jW(t,e,n,r){var i=hW(t,e,n),a=i.horizontal,o=i.vertical,c=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:_W(t,e,n),u=c.horizontal,d=c.vertical,h=dR(a,u),g=dR(o,d),m=we(h),b=we(g);return{horizontal:{isBound:a.isBound,isSnap:u.isSnap,offset:h,dist:m},vertical:{isBound:o.isBound,isSnap:d.isSnap,offset:g,dist:b}}}function VW(t,e,n,r,i){var a=[-n[0],-n[1]],o=t.state,c=o.width,u=o.height,d=t.props.bounds,h=1/0,g=1/0;if(d){var m=[[n[0],-n[1]],[-n[0],n[1]]],b=d.left,_=b===void 0?-1/0:b,w=d.top,E=w===void 0?-1/0:w,T=d.right,C=T===void 0?1/0:T,N=d.bottom,V=N===void 0?1/0:N;m.forEach(function(P){var M=P[0]!==a[0],A=P[1]!==a[1],k=Fn(e,P),D=_n(r,k)*360/Math.PI;if(A){var j=k.slice();(we(D-360)<2||we(D-180)<2)&&(j[1]=r[1]);var L=p1(r,j,(r[1]<k[1]?V:E)-k[1],!1,i),U=ne(L.offset,2),O=U[1],Z=L.isOutside;isNaN(O)||(g=u+(Z?1:-1)*we(O))}if(M){var j=k.slice();(we(D-90)<2||we(D-270)<2)&&(j[0]=r[0]);var X=p1(r,j,(r[0]<k[0]?C:_)-k[0],!0,i),q=ne(X.offset,1),W=q[0],ee=X.isOutside;isNaN(W)||(h=c+(ee?1:-1)*we(W))}})}return{maxWidth:h,maxHeight:g}}var yr={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,o=t.getState(),c=o.dragInfo,u=o.beforeOrigin;if(r||!i||!c)return[];var d=c.dist;if(!d[0]&&!d[1])return[];var h=Ci(d),g=_n(d,[0,0]);return[e.createElement("div",{className:Fe("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(h,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(g,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,o=a.gestos,c=a.style;if(o.draggable)return!1;o.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(c.left||"")||0,n.top=parseFloat(c.top||"")||0,n.bottom=parseFloat(c.bottom||"")||0,n.right=parseFloat(c.right||"")||0,n.startValue=[0,0],ic(t,e),B0(t,e,"translate"),nK(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var u=ct(t,e,te({set:function(h){n.startValue=h}},L0(t,e))),d=r||Pe(t,"onDragStart",u);return d!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,n.isPinch=!1),n.isDrag?u:!1},drag:function(t,e){if(e){V0(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,o=e.deltaOffset,c=e.useSnap,u=e.isRequest,d=e.isGroup,h=e.parentThrottleDrag,g=e.distX,m=e.distY,b=n.isDrag,_=n.prevDist,w=n.prevBeforeDist,E=n.startValue;if(b){o&&(g+=o[0],m+=o[1]);var T=t.props,C=T.parentMoveable,N=d?0:T.throttleDrag||h||0,V=r?0:T.throttleDragRotate||0,P=0,M=!1,A=!1,k=!1,D=!1;if(!r&&V>0&&(g||m)){var j=T.startDragRotate||0,L=rt(j+_n([0,0],[g,m])*180/Math.PI,V)-j,U=m*Math.abs(Math.cos((L-90)/180*Math.PI)),O=g*Math.abs(Math.cos(L/180*Math.PI)),Z=Ci([O,U]);P=L*Math.PI/180,g=Z*Math.cos(P),m=Z*Math.sin(P)}if(!a&&!r&&!i){var X=ne(MW(t,g,m,V,!c&&u||o,n),2),q=X[0],W=X[1];M=q.isSnap,A=q.isBound,k=W.isSnap,D=W.isBound;var ee=q.offset,ie=W.offset;g+=ee,m+=ie}var $=At(gO({datas:n,distX:g,distY:m}),E),F=At(XX({datas:n,distX:g,distY:m}),E);$k(F,Er),$k($,Er),V||(!M&&!A&&(F[0]=rt(F[0],N),$[0]=rt($[0],N)),!k&&!D&&(F[1]=rt(F[1],N),$[1]=rt($[1],N)));var Y=He($,E),J=He(F,E),K=He(J,_),oe=He(Y,w);n.prevDist=J,n.prevBeforeDist=Y,n.passDelta=K,n.passDist=J;var ce=n.left+Y[0],me=n.top+Y[1],ge=n.right-Y[0],Te=n.bottom-Y[1],Ne=z0(n,"translate(".concat(F[0],"px, ").concat(F[1],"px)"),"translate(".concat(J[0],"px, ").concat(J[1],"px)"));if(Dw(e,Ne),t.state.dragInfo.dist=r?[0,0]:J,!(!r&&!C&&K.every(function(Be){return!Be})&&oe.some(function(Be){return!Be}))){var ae=t.state,Ae=ae.width,De=ae.height,Me=ct(t,e,te({transform:Ne,dist:J,delta:K,translate:F,beforeDist:Y,beforeDelta:oe,beforeTranslate:$,left:ce,top:me,right:ge,bottom:Te,width:Ae,height:De,isPinch:a},_r({transform:Ne},e)));return!r&&Pe(t,"onDrag",Me),Me}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,te(te({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=ei(t,e,{});return!n&&Pe(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,o=e.clientY,c=this.dragStart(t,e);if(!c)return!1;var u=Vb(t,this,"dragStart",[a||0,o||0],e,!1,"draggable"),d=u.childEvents,h=u.eventParams,g=te(te({},c),{targets:t.props.targets,events:h}),m=Pe(t,"onDragGroupStart",g);i.isDrag=m!==!1;var b=(r=(n=d[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[b[0]%1,b[1]%1],i.isDrag?c:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,te(te({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=Vb(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var o=te({targets:t.props.targets,events:a},r);return Pe(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=Vb(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Pe(t,"onDragGroupEnd",ei(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(o){return a=o.useSnap,{datas:e,useSnap:a}},request:function(o){return"x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function PO(t,e){var n=Fn(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function zW(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,o=r?4:3,c=[i/2*(1+e[0]),a/2*(1+e[1])],u=an(n,c,o),d=[0,0];return{fixedPosition:u,fixedDirection:e,fixedOffset:d}}function jO(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,o=r?4:3,c=nW(e,i,a),u=an(n,e,o),d=[i?0:e[0],a?0:e[1]];return{fixedPosition:u,fixedDirection:c,fixedOffset:d}}var fR=Fw("resizable"),g1={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:SO("resizable"),dragControlCondition:fR,viewClassName:Uw("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,o=e.parentDirection,c=e.parentGesto,u=e.datas,d=e.parentFixedDirection,h=e.parentEvent,g=WO(o,i,r,u),m=t.state,b=m.target,_=m.width,w=m.height,E=m.gestos;if(!g||!b||E.resizable)return!1;E.resizable=c||t.controlGesto,!i&&ic(t,e),u.datas={},u.direction=g,u.startOffsetWidth=_,u.startOffsetHeight=w,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=m.inlineCSSWidth||m.cssWidth,u.startHeight=m.inlineCSSHeight||m.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[m.minOffsetWidth,m.minOffsetHeight],u.maxSize=[m.maxOffsetWidth,m.maxOffsetHeight]);var T=t.props.transformOrigin||"% %";u.transformOrigin=jr(T)?T.split(" "):T,u.startOffsetMatrix=m.offsetMatrix,u.startTransformOrigin=m.transformOrigin,u.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!g[0]&&!g[1]||g[0]||!g[1];function C(D){u.ratio=D&&isFinite(D)?D:0}u.startPositions=ki(t.state);function N(D){var j=PO(u.startPositions,D);u.fixedDirection=j.fixedDirection,u.fixedPosition=j.fixedPosition,u.fixedOffset=j.fixedOffset}function V(D){var j=jO(t.state,D);u.fixedDirection=j.fixedDirection,u.fixedPosition=j.fixedPosition,u.fixedOffset=j.fixedOffset}function P(D){u.minSize=[Ft("".concat(D[0]),0)||0,Ft("".concat(D[1]),0)||0]}function M(D){var j=[D[0]||1/0,D[1]||1/0];(!Ru(j[0])||isFinite(j[0]))&&(j[0]=Ft("".concat(j[0]),0)||1/0),(!Ru(j[1])||isFinite(j[1]))&&(j[1]=Ft("".concat(j[1]),0)||1/0),u.maxSize=j}C(_/w),N(d||[-g[0],-g[1]]),u.setFixedDirection=N,u.setFixedPosition=V,u.setMin=P,u.setMax=M;var A=ct(t,e,{direction:g,startRatio:u.ratio,set:function(D){var j=ne(D,2),L=j[0],U=j[1];u.startWidth=L,u.startHeight=U},setMin:P,setMax:M,setRatio:C,setFixedDirection:N,setFixedPosition:V,setOrigin:function(D){u.transformOrigin=D},dragStart:yr.dragStart(t,new Nu().dragStart([0,0],e))}),k=h||Pe(t,"onResizeStart",A);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,k!==!1&&(u.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:g}),u.isResize?A:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,o=e.parentKeepRatio,c=e.dragClient,u=e.parentDist,d=e.useSnap,h=e.isRequest,g=e.isGroup,m=e.parentEvent,b=e.resolveMatrix,_=r.isResize,w=r.transformOrigin,E=r.startWidth,T=r.startHeight,C=r.prevWidth,N=r.prevHeight,V=r.minSize,P=r.maxSize,M=r.ratio,A=r.startOffsetWidth,k=r.startOffsetHeight,D=r.isWidth;if(!_)return;if(b){var j=t.state.is3d,L=r.startOffsetMatrix,U=r.startTransformOrigin,O=j?4:3,Z=rh(Um(e)),X=Math.sqrt(Z.length);O!==X&&(Z=Ji(Z,X,O));var q=Fh(L,Z,U,O),W=ac(q,A,k,O);r.startPositions=W,r.nextTargetMatrix=Z,r.nextAllMatrix=q}var ee=Zl(t.props,"resizable"),ie=ee.resizeFormat,$=ee.throttleResize,F=$===void 0?i?0:1:$,Y=ee.parentMoveable,J=ee.keepRatioFinally,K=r.direction,oe=K,ce=0,me=0;!K[0]&&!K[1]&&(oe=[1,1]);var ge=M&&(o??ee.keepRatio)||!1;function Te(){var ut=r.fixedDirection,Rt=tP(oe,ge,r,e);ce=Rt.distWidth,me=Rt.distHeight;var cn=oe[0]-ut[0]||ge?Math.max(A+ce,Er):A,It=oe[1]-ut[1]||ge?Math.max(k+me,Er):k;return ge&&A&&k&&(D?It=cn/M:cn=It*M),[cn,It]}var Ne=ne(Te(),2),ae=Ne[0],Ae=Ne[1];m||(r.setFixedDirection(r.fixedDirection),Pe(t,"onBeforeResize",ct(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(ut){var Rt;return r.setFixedDirection(ut),Rt=ne(Te(),2),ae=Rt[0],Ae=Rt[1],[ae,Ae]},setFixedPosition:function(ut){var Rt;return r.setFixedPosition(ut),Rt=ne(Te(),2),ae=Rt[0],Ae=Rt[1],[ae,Ae]},boundingWidth:ae,boundingHeight:Ae,setSize:function(ut){var Rt;Rt=ne(ut,2),ae=Rt[0],Ae=Rt[1]}},!0)));var De=c;c||(!i&&a?De=sW(t,[0,0]):De=r.fixedPosition);var Me=[0,0];a||(Me=eK(t,ae,Ae,K,De,!d&&h,r)),u&&(!u[0]&&(Me[0]=0),!u[1]&&(Me[1]=0));function Be(){var ut;ie&&(ut=ne(ie([ae,Ae]),2),ae=ut[0],Ae=ut[1]),ae=rt(ae,F),Ae=rt(Ae,F)}if(ge){oe[0]&&oe[1]&&Me[0]&&Me[1]&&(we(Me[0])>we(Me[1])?Me[1]=0:Me[0]=0);var Ve=!Me[0]&&!Me[1];Ve&&Be(),oe[0]&&!oe[1]||Me[0]&&!Me[1]||Ve&&D?(ae+=Me[0],Ae=ae/M):(!oe[0]&&oe[1]||!Me[0]&&Me[1]||Ve&&!D)&&(Ae+=Me[1],ae=Ae*M)}else ae+=Me[0],Ae+=Me[1],ae=Math.max(0,ae),Ae=Math.max(0,Ae);n=ne(C4([ae,Ae],V,P,ge?M:!1),2),ae=n[0],Ae=n[1],Be(),ge&&(g||J)&&(D?Ae=ae/M:ae=Ae*M),ce=ae-A,me=Ae-k;var Se=[ce-C,me-N];r.prevWidth=ce,r.prevHeight=me;var ze=aW(t,ae,Ae,De,w,r);if(!(!Y&&Se.every(function(ut){return!ut})&&ze.every(function(ut){return!ut}))){var Ie=yr.drag(t,Uh(e,t.state,ze,!!a,!1,"draggable")),Le=Ie.transform,st=E+ce,wt=T+me,Qe=ct(t,e,te({width:st,height:wt,offsetWidth:Math.round(ae),offsetHeight:Math.round(Ae),startRatio:M,boundingWidth:ae,boundingHeight:Ae,direction:K,dist:[ce,me],delta:Se,isPinch:!!a,drag:Ie},QO({style:{width:"".concat(st,"px"),height:"".concat(wt,"px")},transform:Le},Ie,e)));return!m&&Pe(t,"onResize",Qe),Qe}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,o=n.prevWidth,c=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var u=t.state,d=u.width,h=u.height,g=d-(i+o),m=h-(a+c),b=we(g)>3,_=we(m)>3;if(b&&(n.startWidth+=g,n.startOffsetWidth+=g,n.prevWidth+=g),_&&(n.startHeight+=m,n.startOffsetHeight+=m,n.prevHeight+=m),b||_)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=ei(t,e,{});return!r&&Pe(t,"onResizeEnd",i),i}},dragGroupControlCondition:fR,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,te(te({},e),{isGroup:!0}));if(!r)return!1;var i=Yi(t,"resizable",e),a=n.startOffsetWidth,o=n.startOffsetHeight;function c(){var b=n.minSize;i.forEach(function(_){var w=_.datas,E=w.minSize,T=w.startOffsetWidth,C=w.startOffsetHeight,N=a*(T?E[0]/T:0),V=o*(C?E[1]/C:0);b[0]=Math.max(b[0],N),b[1]=Math.max(b[1],V)})}function u(){var b=n.maxSize;i.forEach(function(_){var w=_.datas,E=w.maxSize,T=w.startOffsetWidth,C=w.startOffsetHeight,N=a*(T?E[0]/T:0),V=o*(C?E[1]/C:0);b[0]=Math.min(b[0],N),b[1]=Math.min(b[1],V)})}var d=bs(t,this,"dragControlStart",e,function(b,_){return Fm(t,b,n,_)});c(),u();var h=function(b){r.setFixedDirection(b),d.forEach(function(_,w){_.setFixedDirection(b),Fm(t,_.moveable,n,i[w])})};n.setFixedDirection=h;var g=te(te({},r),{targets:t.props.targets,events:d.map(function(b){return te(te({},b),{setMin:function(_){b.setMin(_),c()},setMax:function(_){b.setMax(_),u()}})}),setFixedDirection:h,setMin:function(b){r.setMin(b),c()},setMax:function(b){r.setMax(b),u()}}),m=Pe(t,"onResizeGroupStart",g);return n.isResize=m!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Zl(t.props,"resizable");H0(t,"onBeforeResize",function(b){Pe(t,"onBeforeResizeGroup",ct(t,e,te(te({},b),{targets:r.targets}),!0))});var i=this.dragControl(t,te(te({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,c=i.dist,u=r.keepRatio,d=[a/(a-c[0]),o/(o-c[1])],h=n.fixedPosition,g=bs(t,this,"dragControl",e,function(b,_){var w=ne(fr(zh(t.rotation/180*Math.PI,3),[_.datas.originalX*d[0],_.datas.originalY*d[1],1],3),2),E=w[0],T=w[1];return te(te({},_),{parentDist:null,parentScale:d,dragClient:At(h,[E,T]),parentKeepRatio:u})}),m=te({targets:r.targets,events:g},i);return Pe(t,"onResizeGroup",m),m}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=bs(t,this,"dragControlEnd",e),a=ei(t,e,{targets:t.props.targets,events:i});return Pe(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(o){var c;return i=o.useSnap,{datas:e,parentDirection:o.direction||[1,1],parentIsWidth:(c=o?.horizontal)!==null&&c!==void 0?c:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?n=o.offsetWidth-a.offsetWidth:"deltaWidth"in o&&(n+=o.deltaWidth),"offsetHeight"in o?r=o.offsetHeight-a.offsetHeight:"deltaHeight"in o&&(r+=o.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function zb(t,e,n,r,i){var a=t.props.groupable,o=t.state,c=o.is3d?4:3,u=e.origin,d=an(t.state.rootMatrix,He([u[0],u[1]],a?[0,0]:[o.left,o.top]),c),h=At([i.left,i.top],d);e.startAbsoluteOrigin=h,e.prevDeg=_n(h,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=ys(h,[n,r])}function nm(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++o:a<t&&a<90&&t>270&&--o;var c=e*(o*360+t-r);return n.prevDeg=r+c,c}function Lb(t,e,n,r){return nm(_n(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function Bb(t,e,n,r,i,a){var o=t.props.throttleRotate,c=o===void 0?0:o,u=n.prevSnapDeg,d=0,h=!1;if(a){var g=JW(t,e,r,i+r);h=g.isSnap,d=i+g.dist}h||(d=rt(i+r,c));var m=d-i;return n.prevSnapDeg=m,[m-u,m,d]}function VO(t,e,n){var r=ne(e,4),i=r[0],a=r[1],o=r[2],c=r[3];if(t==="none")return[];if(Vn(t))return t.map(function(E){return VO(E,[i,a,o,c],n)[0]});var u=ne((t||"top").split("-"),2),d=u[0],h=u[1],g=[i,a];d==="left"?g=[o,i]:d==="right"?g=[a,c]:d==="bottom"&&(g=[c,o]);var m=[(g[0][0]+g[1][0])/2,(g[0][1]+g[1][1])/2],b=YO(g,n);if(h){var _=h==="top"||h==="left",w=d==="bottom"||d==="left";m=g[_&&!w||!_&&w?0:1]}return[[m,b]]}function m1(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(Un(n,Fe("rotation-control"))||t.props.rotateAroundControls&&Un(n,Fe("around-control"))||Un(n,Fe("control"))&&Un(n,Fe("rotatable")))return!0;var r=t.props.rotationTarget;return r?Gw(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var LW=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,BW={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[LW],viewClassName:function(t){return t.isDragging("rotatable")?Fe("view-rotation-dragging"):""},render:function(t,e){var n=Zl(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,o=n.renderDirections,c=n.rotateAroundControls,u=n.resolveAblesWithRotatable,d=t.getState(),h=d.renderPoses,g=d.direction;if(!r)return null;var m=VO(i,h,g),b=[];if(m.forEach(function(T,C){var N=ne(T,2),V=N[0],P=N[1];b.push(e.createElement("div",{key:"rotation".concat(C),className:Fe("rotation"),style:{transform:"translate(-50%) translate(".concat(V[0],"px, ").concat(V[1],"px) rotate(").concat(P,"rad)")}},e.createElement("div",{className:Fe("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Fe("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),o){var _=ks(u||{}),w={};_.forEach(function(T){u[T].forEach(function(C){w[C]=T})});var E=[];Vn(o)&&(E=o.map(function(T){var C=w[T];return{data:C?{resolve:C}:{},classNames:C?["move"]:[],dir:T}})),b.push.apply(b,Ce([],ne(xO(t,"rotatable",E,e)),!1))}return c&&b.push.apply(b,Ce([],ne(TO(t,e)),!1)),b},dragControlCondition:m1,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,o=e.clientY,c=e.parentRotate,u=e.parentFlag,d=e.isPinch,h=e.isRequest,g=t.state,m=g.target,b=g.left,_=g.top,w=g.direction,E=g.beforeDirection,T=g.targetTransform,C=g.moveableClientRect,N=g.offsetMatrix,V=g.targetMatrix,P=g.allMatrix,M=g.width,A=g.height;if(!h&&!m)return!1;var k=t.getRect();i.rect=k,i.transform=T,i.left=b,i.top=_;var D=function(oe){var ce=jO(t.state,oe);i.fixedDirection=ce.fixedDirection,i.fixedOffset=ce.fixedOffset,i.fixedPosition=ce.fixedPosition,F&&F.setFixedPosition(oe)},j=function(oe){var ce=zW(t.state,oe);i.fixedDirection=ce.fixedDirection,i.fixedOffset=ce.fixedOffset,i.fixedPosition=ce.fixedPosition,F&&F.setFixedDirection(oe)},L=a,U=o;if(h||d||u){var O=c||0;i.beforeInfo={origin:k.beforeOrigin,prevDeg:O,defaultDeg:O,prevSnapDeg:0,startDist:0},i.afterInfo=te(te({},i.beforeInfo),{origin:k.origin}),i.absoluteInfo=te(te({},i.beforeInfo),{origin:k.origin,startValue:O})}else{var Z=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(Z){var X=Z.getAttribute("data-direction")||"",q=qX[X];if(q){i.isControl=!0,i.isAroundControl=Un(Z,Fe("around-control")),i.controlDirection=q;var W=Z.getAttribute("data-resolve");W&&(i.resolveAble=W);var ee=gK(g.rootMatrix,g.renderPoses,C);n=ne(Fn(ee,q),2),L=n[0],U=n[1]}}i.beforeInfo={origin:k.beforeOrigin},i.afterInfo={origin:k.origin},i.absoluteInfo={origin:k.origin,startValue:k.rotation};var ie=D;D=function(oe){var ce=g.is3d?4:3,me=ne(At(J4(V,ce),oe),2),ge=me[0],Te=me[1],Ne=fr(N,Wl([ge,Te],ce)),ae=fr(P,Wl([oe[0],oe[1]],ce));ie(oe);var Ae=g.posDelta;i.beforeInfo.origin=He(Ne,Ae),i.afterInfo.origin=He(ae,Ae),i.absoluteInfo.origin=He(ae,Ae),zb(t,i.beforeInfo,L,U,C),zb(t,i.afterInfo,L,U,C),zb(t,i.absoluteInfo,L,U,C)},j=function(oe){var ce=Fn([[0,0],[M,0],[0,A],[M,A]],oe);D(ce)}}i.startClientX=L,i.startClientY=U,i.direction=w,i.beforeDirection=E,i.startValue=0,i.datas={},B0(t,e,"rotate");var $=!1,F=!1;if(i.isControl&&i.resolveAble){var Y=i.resolveAble;Y==="resizable"&&(F=g1.dragControlStart(t,te(te({},new Nu("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}F||($=yr.dragStart(t,new Nu().dragStart([0,0],e))),D(mK(t));var J=ct(t,e,te(te({set:function(oe){i.startValue=oe*Math.PI/180},setFixedDirection:j,setFixedPosition:D},L0(t,e)),{dragStart:$,resizeStart:F})),K=Pe(t,"onRotateStart",J);return i.isRotate=K!==!1,g.snapRenderInfo={request:e.isRequest},i.isRotate?J:!1},dragControl:function(t,e){var n,r,i,a=e.datas,o=e.clientDistX,c=e.clientDistY,u=e.parentRotate,d=e.parentFlag,h=e.isPinch,g=e.groupDelta,m=e.resolveMatrix,b=a.beforeDirection,_=a.beforeInfo,w=a.afterInfo,E=a.absoluteInfo,T=a.isRotate,C=a.startValue,N=a.rect,V=a.startClientX,P=a.startClientY;if(T){V0(t,e,"rotate");var M=YX(e),A=b*M,k=t.props.parentMoveable,D=0,j,L,U=0,O,Z,X=0,q,W,ee=180/Math.PI*C,ie=E.startValue,$=!1,F=V+o,Y=P+c;if(!d&&"parentDist"in e){var J=e.parentDist;j=J,O=J,q=J}else h||d?(j=nm(u,b,_),O=nm(u,A,w),q=nm(u,A,E)):(j=Lb(F,Y,b,_),O=Lb(F,Y,A,w),q=Lb(F,Y,A,E),$=!0);if(L=ee+j,Z=ee+O,W=ie+q,Pe(t,"onBeforeRotate",ct(t,e,{beforeRotation:L,rotation:Z,absoluteRotation:W,setRotation:function(De){O=De-ee,j=O,q=O}},!0)),n=ne(Bb(t,N,_,j,ee,$),3),D=n[0],j=n[1],L=n[2],r=ne(Bb(t,N,w,O,ee,$),3),U=r[0],O=r[1],Z=r[2],i=ne(Bb(t,N,E,q,ie,$),3),X=i[0],q=i[1],W=i[2],!(!X&&!U&&!D&&!k&&!m)){var K=z0(a,"rotate(".concat(Z,"deg)"),"rotate(".concat(O,"deg)"));m&&(a.fixedPosition=Nw(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var oe=iW(t,O,a),ce=He(At(g||[0,0],oe),a.prevInverseDist||[0,0]);a.prevInverseDist=oe,a.requestValue=null;var me=vO(t,K,ce,h,e),ge=me,Te=ys([F,Y],E.startAbsoluteOrigin)-E.startDist,Ne=void 0;if(a.resolveAble==="resizable"){var ae=g1.dragControl(t,te(te({},Uh(e,t.state,[e.deltaX,e.deltaY],!!h,!1,"resizable")),{resolveMatrix:!0,parentDistance:Te}));ae&&(Ne=ae,ge=QO(ge,ae,e))}var Ae=ct(t,e,te(te({delta:U,dist:O,rotate:Z,rotation:Z,beforeDist:j,beforeDelta:D,beforeRotate:L,beforeRotation:L,absoluteDist:q,absoluteDelta:X,absoluteRotate:W,absoluteRotation:W,isPinch:!!h,resize:Ne},me),ge));return Pe(t,"onRotate",Ae),Ae}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=ei(t,e,{});return Pe(t,"onRotateEnd",r),r}},dragGroupControlCondition:m1,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,o=r.beforeOrigin,c=this.dragControlStart(t,e);if(!c)return!1;c.set(n.beforeDirection*t.rotation);var u=bs(t,this,"dragControlStart",e,function(g,m){var b=g.state,_=b.left,w=b.top,E=b.beforeOrigin,T=At(He([_,w],[i,a]),He(E,o));return m.datas.startGroupClient=T,m.datas.groupClient=T,te(te({},m),{parentRotate:0})}),d=te(te({},c),{targets:t.props.targets,events:u}),h=Pe(t,"onRotateGroupStart",d);return n.isRotate=h!==!1,n.isRotate?c:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){H0(t,"onBeforeRotate",function(d){Pe(t,"onBeforeRotateGroup",ct(t,e,te(te({},d),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,o=a/180*Math.PI,c=bs(t,this,"dragControl",e,function(d,h){var g=h.datas.startGroupClient,m=ne(h.datas.groupClient,2),b=m[0],_=m[1],w=ne(Vh(g,o*i),2),E=w[0],T=w[1],C=[E-b,T-_];return h.datas.groupClient=[E,T],te(te({},h),{parentRotate:a,groupDelta:C})});t.rotation=i*r.beforeRotation;var u=te({targets:t.props.targets,events:c,set:function(d){t.rotation=d},setGroupRotation:function(d){t.rotation=d}},r);return Pe(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=bs(t,this,"dragControlEnd",e),a=ei(t,e,{targets:t.props.targets,events:i});return Pe(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function UW(t,e){var n,r=t.direction,i=t.classNames,a=t.size,o=t.pos,c=t.zoom,u=t.key,d=r==="horizontal",h=d?"Y":"X";return e.createElement("div",{key:u,className:i.join(" "),style:(n={},n[d?"width":"height"]="".concat(a),n.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(h,"(-50%) scale").concat(h,"(").concat(c,")"),n)})}function Vw(t,e){return UW(te(te({},t),{classNames:Ce([Fe("line","guideline",t.direction)],ne(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(rt(n,.1),"px")})}),e)}function hR(t,e,n,r,i,a,o,c){var u=t.props.zoom;return n.map(function(d,h){var g=d.type,m=d.pos,b=[0,0];return b[o]=r,b[o?0:1]=-i+m,Vw({key:"".concat(e,"TargetGuideline").concat(h),classNames:[Fe("target","bold",g)],posValue:b,sizeValue:a,zoom:u,direction:e},c)})}function pR(t,e,n,r,i,a){var o=t.props,c=o.zoom,u=o.isDisplayInnerSnapDigit,d=e==="horizontal"?Ho:qo,h=i[d.start],g=i[d.end];return n.filter(function(m){var b=m.hide,_=m.elementRect;if(b)return!1;if(u&&_){var w=_.rect;if(w[d.start]<=h&&g<=w[d.end])return!1}return!0}).map(function(m,b){var _=m.pos,w=m.size,E=m.element,T=m.className,C=[-r[0]+_[0],-r[1]+_[1]];return Vw({key:"".concat(e,"-default-guideline-").concat(b),classNames:E?[Fe("bold"),T]:[Fe("normal"),T],direction:e,posValue:C,sizeValue:w,zoom:c},a)})}function mf(t,e,n,r,i,a,o,c){var u,d=t.props,h=d.snapDigit,g=h===void 0?0:h,m=d.isDisplaySnapDigit,b=m===void 0?!0:m,_=d.snapDistFormat,w=_===void 0?function(P,M){return P}:_,E=d.zoom,T=e==="horizontal"?"X":"Y",C=e==="vertical"?"height":"width",N=Math.abs(i),V=b?parseFloat(N.toFixed(g)):0;return c.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Fe("guideline-group",e),style:(u={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},u[C]="".concat(N,"px"),u)},Vw({direction:e,classNames:[Fe(n),o],size:"100%",posValue:[0,0],sizeValue:N,zoom:E},c),c.createElement("div",{className:Fe("size-value","gap"),style:{transform:"translate".concat(T,"(-50%) scale(").concat(E,")")}},V>0?w(V,e):""))}function FW(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,o=i?Ho:qo,c=n[o.start],u=n[o.end];return ZO(e,function(d){return d.pos[i]}).map(function(d){var h=[],g=[],m=[];return d.forEach(function(b){var _,w,E=b.element,T=b.elementRect.rect;if(T[o.end]<c)h.push(b);else if(u<T[o.start])g.push(b);else if(T[o.start]<=c&&u<=T[o.end]&&r){var C=b.pos,N={element:E,rect:te(te({},T),(_={},_[o.end]=T[o.start],_))},V={element:E,rect:te(te({},T),(w={},w[o.start]=T[o.end],w))},P=[0,0],M=[0,0];P[i]=C[i],P[a]=C[a],M[i]=C[i],M[a]=C[a]+b.size,h.push({type:t,pos:P,size:0,elementRect:N,direction:"",elementDirection:"end"}),g.push({type:t,pos:M,size:0,elementRect:V,direction:"",elementDirection:"start"})}}),h.sort(function(b,_){return _.pos[a]-b.pos[a]}),g.sort(function(b,_){return b.pos[a]-_.pos[a]}),{total:d,start:h,end:g,inner:m}})}function GW(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(c){var u=e.filter(function(E){return E.type===c}),d=c==="vertical"?1:0,h=d?0:1,g=FW(c,u,r,a),m=d?qo:Ho,b=d?Ho:qo,_=r[m.start],w=r[m.end];g.forEach(function(E){var T=E.total,C=E.start,N=E.end,V=E.inner,P=n[h]+T[0].pos[h]-r[b.start],M=r;C.forEach(function(A){var k=A.elementRect.rect,D=M[m.start]-k[m.end];if(D>0){var j=[0,0];j[d]=n[d]+M[m.start]-_-D,j[h]=P,o.push(mf(t,c,"dashed",o.length,D,j,A.className,i))}M=k}),M=r,N.forEach(function(A){var k=A.elementRect.rect,D=k[m.start]-M[m.end];if(D>0){var j=[0,0];j[d]=n[d]+M[m.end]-_,j[h]=P,o.push(mf(t,c,"dashed",o.length,D,j,A.className,i))}M=k}),V.forEach(function(A){var k=A.elementRect.rect,D=_-k[m.start],j=k[m.end]-w,L=[0,0],U=[0,0];L[d]=n[d]-D,L[h]=P,U[d]=n[d]+w-_,U[h]=P,o.push(mf(t,c,"dashed",o.length,D,L,A.className,i)),o.push(mf(t,c,"dashed",o.length,j,U,A.className,i))})})}),o}function $W(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(o){var c=e.filter(function(E){return E.type===o}).slice(0,1),u=o==="vertical"?0:1,d=u?0:1,h=u?qo:Ho,g=u?Ho:qo,m=r[h.start],b=r[h.end],_=r[g.start],w=r[g.end];c.forEach(function(E){var T=E.gap,C=E.gapRects,N=Math.max.apply(Math,Ce([_],ne(C.map(function(M){var A=M.rect;return A[g.start]})),!1)),V=Math.min.apply(Math,Ce([w],ne(C.map(function(M){var A=M.rect;return A[g.end]})),!1)),P=(N+V)/2;N===V||P===(_+w)/2||C.forEach(function(M){var A=M.rect,k=M.className,D=[n[0],n[1]];if(A[h.end]<m)D[u]+=A[h.end]-m;else if(b<A[h.start])D[u]+=A[h.start]-m-T;else return;D[d]+=P-_,a.push(mf(t,u?"vertical":"horizontal","gap",a.length,T,D,k,i))})})}),a}function v1(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,o=i.overflow,c=i.scrollHeight,u=i.scrollWidth,d=i.clientHeight,h=i.clientWidth,g=i.clientLeft,m=i.clientTop,b=t.props,_=b.snapGap,w=_===void 0?!0:_,E=b.verticalGuidelines,T=b.horizontalGuidelines,C=b.snapThreshold,N=C===void 0?5:C,V=b.maxSnapElementGuidelineDistance,P=V===void 0?1/0:V,M=b.isDisplayGridGuidelines,A=Ti(ki(t.state)),k=A.top,D=A.left,j=A.bottom,L=A.right,U={top:k,left:D,bottom:j,right:L,center:(D+L)/2,middle:(k+j)/2},O=XW(t),Z=Ce([],ne(O),!1),X=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(ie){return ie*N});w&&Z.push.apply(Z,Ce([],ne(HW(t,U,X)),!1));var q=te({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(Z.push.apply(Z,Ce([],ne(YW(t,o?u:h,o?c:d,g,m,q,M)),!1)),a){var W=i.left,ee=i.top;q.left+=W,q.top+=ee,q.right+=W,q.bottom+=ee}return Z.push.apply(Z,Ce([],ne(LO(T||!1,E||!1,o?u:h,o?c:d,g,m,q)),!1)),Z=Z.filter(function(ie){var $=ie.element,F=ie.elementRect,Y=ie.type;if(!$||!F)return!0;var J=F.rect;return zO(U,J,Y,P)}),Z}function HW(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,o=r.maxSnapElementGapDistance,c=o===void 0?1/0:o,u=t.state.elementRects,d=[];return[["vertical",Ho,qo],["horizontal",qo,Ho]].forEach(function(h){var g=ne(h,3),m=g[0],b=g[1],_=g[2],w=e[b.start],E=e[b.end],T=e[b.center],C=e[_.start],N=e[_.end],V={left:n[0],top:n[1]};function P(k){var D=k.rect,j=V[b.start];return D[b.end]<w+j?w-D[b.end]:E-j<D[b.start]?D[b.start]-E:-1}var M=u.filter(function(k){var D=k.rect;return D[_.start]>N||D[_.end]<C?!1:P(k)>0}).sort(function(k,D){return P(k)-P(D)}),A=[];M.forEach(function(k){M.forEach(function(D){if(k!==D){var j=k.rect,L=D.rect,U=j[_.start],O=j[_.end],Z=L[_.start],X=L[_.end];U>X||Z>O||A.push([k,D])}})}),A.forEach(function(k){var D=ne(k,2),j=D[0],L=D[1],U=j.rect,O=L.rect,Z=U[b.start],X=U[b.end],q=O[b.start],W=O[b.end],ee=V[b.start],ie=0,$=0,F=!1,Y=!1,J=!1;if(X<=w&&E<=q){if(Y=!0,ie=(q-X-(E-w))/2,$=X+ie+(E-w)/2,we($-T)>ee)return}else if(X<q&&W<w+ee){if(F=!0,ie=q-X,$=W+ie,we($-w)>ee)return}else if(X<q&&E-ee<Z){if(J=!0,ie=q-X,$=Z-ie,we($-E)>ee)return}else return;ie&&zO(e,O,m,a)&&(ie>c||d.push({type:m,pos:m==="vertical"?[$,0]:[0,$],element:L.element,size:0,className:L.className,isStart:F,isCenter:Y,isEnd:J,gap:ie,hide:!0,gapRects:[j,L],direction:"",elementDirection:""}))})}),d}function qW(t,e,n,r){var i,a,o=t.props,c=t.state,u=o.snapGridAll,d=o.snapGridWidth,h=d===void 0?0:d,g=o.snapGridHeight,m=g===void 0?0:g,b=c.snapRenderInfo,_=b&&(((i=b.direction)===null||i===void 0?void 0:i[0])||((a=b.direction)===null||a===void 0?void 0:a[1])),w=t.moveables;if(u&&w&&_&&(h||m)){if(c.snapThresholdInfo)return;c.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var E=t.getRect(),T=E.children,C=b.direction;if(T){var N=C.map(function(P,M){var A=M===0?{snapSize:h,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:m,posName:"top",sizeName:"height",clientOffset:r.top-n},k=A.snapSize,D=A.posName,j=A.sizeName,L=A.clientOffset;if(!k)return{dir:P,multiple:1,snapSize:k,snapOffset:0};var U=E[j],O=E[D],Z=k4(T.map(function(F){return[F[D]-O,F[j],U-F[j]-F[D]+O]})).filter(function(F){return F}).sort(function(F,Y){return F-Y}),X=Z[0],q=Z.map(function(F){return rt(F/X,.1)*k}),W=1,ee=rt(U/X,.1);for(W=1;W<=10&&!q.every(function(F){return F*W%1===0});++W);var ie=(-P+1)/2,$=Vm(O-L,O-L+U,ie,1-ie);return{multiple:ee*W,dir:P,snapSize:k,snapOffset:Math.round($/k)}}),V=N.map(function(P){return P.multiple||1});c.snapThresholdInfo.multiples=V,c.snapThresholdInfo.offset=N.map(function(P){return P.snapOffset}),N.forEach(function(P,M){P.snapSize})}}else c.snapThresholdInfo=null}function YW(t,e,n,r,i,a,o){r===void 0&&(r=0),i===void 0&&(i=0);var c=t.props,u=t.state,d=c.snapGridWidth,h=d===void 0?0:d,g=c.snapGridHeight,m=g===void 0?0:g,b=[],_=a.left,w=a.top,E=[0,0];qW(t,r,i,a);var T=u.snapThresholdInfo,C=h,N=m;if(T&&(h*=T.multiples[0]||1,m*=T.multiples[1]||1,E=T.offset),m){for(var V=function(M){b.push({type:"horizontal",pos:[_,rt(E[1]*N+M-i+w,.1)],className:Fe("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},P=0;P<=n*2;P+=m)V(P);for(var P=-m;P>=-n;P-=m)V(P)}if(h){for(var V=function(A){b.push({type:"vertical",pos:[rt(E[0]*C+A-r+_,.1),w],className:Fe("grid-guideline"),size:n,hide:!o,direction:"",grid:!0})},P=0;P<=e*2;P+=h)V(P);for(var P=-h;P>=-e;P-=h)V(P)}return b}function zO(t,e,n,r){return n==="horizontal"?we(t.right-e.left)<=r||we(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?we(t.bottom-e.top)<=r||we(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function XW(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(m){return!m.refresh}),a=r.map(function(m){return Zi(m)&&"element"in m?te(te({},m),{element:Oa(m.element,!0)}):{element:Oa(m,!0)}}).filter(function(m){return m.element}),o=sX(i.map(function(m){return m.element}),a.map(function(m){return m.element})),c=o.maintained,u=o.added,d=[];c.forEach(function(m){var b=ne(m,2),_=b[0],w=b[1];d[w]=i[_]}),WW(t,u.map(function(m){return a[m]})).map(function(m,b){d[u[b]]=m}),e.elementRects=d;var h=Mw(t.props.elementSnapDirections),g=[];return d.forEach(function(m){var b=m.element,_=m.top,w=_===void 0?h.top:_,E=m.left,T=E===void 0?h.left:E,C=m.right,N=C===void 0?h.right:C,V=m.bottom,P=V===void 0?h.bottom:V,M=m.center,A=M===void 0?h.center:M,k=m.middle,D=k===void 0?h.middle:k,j=m.className,L=m.rect,U=Ow({top:w,right:N,left:T,bottom:P,center:A,middle:D},L),O=U.horizontal,Z=U.vertical,X=U.horizontalNames,q=U.verticalNames,W=L.top,ee=L.left,ie=L.right-ee,$=L.bottom-W,F=[ie,$];Z.forEach(function(Y,J){g.push({type:"vertical",element:b,pos:[rt(Y,.1),W],size:$,sizes:F,className:j,elementRect:m,elementDirection:aR[q[J]]||q[J],direction:""})}),O.forEach(function(Y,J){g.push({type:"horizontal",element:b,pos:[ee,rt(Y,.1)],size:ie,sizes:F,className:j,elementRect:m,elementDirection:aR[X[J]]||X[J],direction:""})})}),g}function gR(t,e){return t?t.map(function(n){var r=Zi(n)?n:{pos:n},i=r.pos;return Ru(i)?r:te(te({},r),{pos:Ft(i,e)})}):[]}function LO(t,e,n,r,i,a,o){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var c=[],u=o.left,d=o.top,h=o.bottom,g=o.right,m=n+g-u,b=r+h-d;return gR(t,b).forEach(function(_){c.push({type:"horizontal",pos:[u,rt(_.pos-a+d,.1)],size:m,className:_.className,direction:""})}),gR(e,m).forEach(function(_){c.push({type:"vertical",pos:[rt(_.pos-i+u,.1),d],size:b,className:_.className,direction:""})}),c}function WW(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,o=r.is3d,c=r.offsetDelta,u=o?4:3,d=ne(bW(a,i,u),2),h=d[0],g=d[1],m=n?0:c[0],b=n?0:c[1];return e.map(function(_){var w=_.element.getBoundingClientRect(),E=w.left-h-m,T=w.top-g-b,C=T+w.height,N=E+w.width,V=ne(Ou(a,[E,T],u),2),P=V[0],M=V[1],A=ne(Ou(a,[N,C],u),2),k=A[0],D=A[1];return te(te({},_),{rect:{left:P,right:k,top:M,bottom:D,center:(P+k)/2,middle:(M+D)/2}})})}function Mg(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var o=Oa(r,!0);if(o){var c=Of(o),u=_R(e,[c.left-i.left,c.top-i.top]),d=_R(e,[c.right-i.right,c.bottom-i.bottom]);a.left=rt(u[0],1e-5),a.top=rt(u[1],1e-5),a.right=rt(d[0],1e-5),a.bottom=rt(d[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=v1(t),e.enableSnap=!0,!0}function BO(t,e,n,r,i,a){var o=ac(t,e,n,a?4:3),c=Fn(o,r);return Lw(o,He(i,c))}function mR(t){return t?t/we(t):0}function KW(t,e,n,r,i,a){var o=a.fixedDirection,c=SW(n,o,r),u=jw(t,e,n,r),d=Ce(Ce([],ne(PW(t,e,c,r,i,a)),!1),ne(OO(t,u,a)),!1),h=Gm(d,0),g=Gm(d,1);return{width:{isBound:h.isBound,offset:h.offset[0]},height:{isBound:g.isBound,offset:g.offset[1]}}}function QW(t,e,n,r,i,a,o,c,u){var d=Fn(e,o),h=G0(t,c,{vertical:[d[0]],horizontal:[d[1]]}),g=h.horizontal.offset,m=h.vertical.offset;if(rt(m,u1)||rt(g,u1)){var b=ne(Ua({datas:u,distX:-m,distY:-g}),2),_=b[0],w=b[1],E=Math.min(i||1/0,n+o[0]*_),T=Math.min(a||1/0,r+o[1]*w);return[E-n,T-r]}return[0,0]}function UO(t,e,n,r,i,a,o,c){for(var u=ki(t.state),d=t.props.keepRatio,h=0,g=0,m=0;m<2;++m){var b=e(h,g),_=KW(t,b,i,d,o,c),w=_.width,E=_.height,T=w.isBound,C=E.isBound,N=w.offset,V=E.offset;if(m===1&&(T||(N=0),C||(V=0)),m===0&&o&&!T&&!C)return[0,0];if(d){var P=we(N)*(n?1/n:1),M=we(V)*(r?1/r:1),A=T&&C?P<M:C||!T&&P<M;A?N=n*V/r:V=r*N/n}h+=N,g+=V}if(!d&&i[0]&&i[1]){var k=VW(t,u,i,a,c),D=k.maxWidth,j=k.maxHeight,L=ne(QW(t,e(h,g).map(function(Z){return Z.map(function(X){return rt(X,u1)})}),n+h,r+g,D,j,i,o,c),2),N=L[0],V=L[1];h+=N,g+=V}return[h,g]}function If(t){return t<0&&(t=t%360+360),t%=360,t}function ZW(t,e){e=If(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return we(t-r)<we(t-i)?r:i}function Ub(t,e){t=If(t),e=If(e);var n=If(t-e);return Math.min(n,360-n)}function JW(t,e,n,r){var i,a=t.props,o=(i=a[AO])!==null&&i!==void 0?i:5,c=a[CO];if(td(t,"rotatable")){var u=e.pos1,d=e.pos2,h=e.pos3,g=e.pos4,m=e.origin,b=n*Math.PI/180,_=[u,d,h,g].map(function(V){return He(V,m)}),w=_.map(function(V){return Vh(V,b)}),E=Ce(Ce([],ne(gW(t,_,w,m,n)),!1),ne(RW(t,_,w,m,n)),!1);E.sort(function(V,P){return we(V-n)-we(P-n)});var T=E.length>0;if(T)return{isSnap:T,dist:T?E[0]:n}}if(c?.length&&o){var C=c.slice().sort(function(V,P){return Ub(V,r)-Ub(P,r)}),N=C[0];if(Ub(N,r)<=o)return{isSnap:!0,dist:n+ZW(r,N)-r}}return{isSnap:!1,dist:n}}function eK(t,e,n,r,i,a,o){if(!td(t,"resizable"))return[0,0];var c=o.fixedDirection,u=o.nextAllMatrix,d=t.state,h=d.allMatrix,g=d.is3d;return UO(t,function(m,b){return BO(u||h,e+m,n+b,c,i,g)},e,n,r,i,a,o)}function tK(t,e,n,r,i){if(!td(t,"scalable"))return[0,0];var a=i.startOffsetWidth,o=i.startOffsetHeight,c=i.fixedPosition,u=i.fixedDirection,d=i.is3d,h=UO(t,function(g,m){return BO(eW(i,At(e,[g/a,m/o])),a,o,u,c,d)},a,o,n,c,r,i);return[h[0]/a,h[1]/o]}function nK(t,e){e.absolutePoses=ki(t.state)}function vR(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Vr(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return te(te({},r),{direction:i.direction})})}function yR(t,e,n,r,i,a){var o=Iw(U0(t,a),e,n),c=o.vertical,u=o.horizontal,d=ou();c.forEach(function(_){_.isBound&&(_.direction==="start"&&(d.left=!0),_.direction==="end"&&(d.right=!0),r.push({type:"bounds",pos:_.pos}))}),u.forEach(function(_){_.isBound&&(_.direction==="start"&&(d.top=!0),_.direction==="end"&&(d.bottom=!0),i.push({type:"bounds",pos:_.pos}))});var h=DW(t),g=h.boundMap,m=h.vertical,b=h.horizontal;return m.forEach(function(_){Cs(r,function(w){var E=w.type,T=w.pos;return E==="bounds"&&T===_})>=0||r.push({type:"bounds",pos:_})}),b.forEach(function(_){Cs(i,function(w){var E=w.type,T=w.pos;return E==="bounds"&&T===_})>=0||i.push({type:"bounds",pos:_})}),{boundMap:d,innerBoundMap:g}}var rK=Fw("",["resizable","scalable"]),iK={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",AO,CO,kO,RO,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,o=n.pos2,c=n.pos3,u=n.pos4,d=n.snapRenderInfo,h=t.props.snapRenderThreshold,g=h===void 0?1:h;if(!d||!d.render||!td(t,""))return cu(t,"boundMap",ou(),function(K){return JSON.stringify(K)}),cu(t,"innerBoundMap",ou(),function(K){return JSON.stringify(K)}),[];n.guidelines=v1(t);var m=Math.min(a[0],o[0],c[0],u[0]),b=Math.min(a[1],o[1],c[1],u[1]),_=d.externalPoses||[],w=ki(t.state),E=[],T=[],C=[],N=[],V=[],P=Ti(w),M=P.width,A=P.height,k=P.top,D=P.left,j=P.bottom,L=P.right,U={left:D,right:L,top:k,bottom:j,center:(D+L)/2,middle:(k+j)/2},O=_.length>0,Z=O?Ti(_):{};if(!d.request){if(d.direction&&V.push(wW(t,w,d.direction,g,g)),d.snap){var X=Ti(w);d.center&&(X.middle=(X.top+X.bottom)/2,X.center=(X.left+X.right)/2),V.push(sR(t,X,g,g))}O&&(d.center&&(Z.middle=(Z.top+Z.bottom)/2,Z.center=(Z.left+Z.right)/2),V.push(sR(t,Z,g,g))),V.forEach(function(K){var oe=K.vertical.posInfos,ce=K.horizontal.posInfos;E.push.apply(E,Ce([],ne(oe.filter(function(me){var ge=me.guidelineInfos;return ge.some(function(Te){var Ne=Te.guideline;return!Ne.hide})}).map(function(me){return{type:"snap",pos:me.pos}})),!1)),T.push.apply(T,Ce([],ne(ce.filter(function(me){var ge=me.guidelineInfos;return ge.some(function(Te){var Ne=Te.guideline;return!Ne.hide})}).map(function(me){return{type:"snap",pos:me.pos}})),!1)),C.push.apply(C,Ce([],ne(vR(oe)),!1)),N.push.apply(N,Ce([],ne(vR(ce)),!1))})}var q=yR(t,[D,L],[k,j],E,T),W=q.boundMap,ee=q.innerBoundMap;O&&yR(t,[Z.left,Z.right],[Z.top,Z.bottom],E,T,d.externalBounds);var ie=Ce(Ce([],ne(C),!1),ne(N),!1),$=ie.filter(function(K){return K.element&&!K.gapRects}),F=ie.filter(function(K){return K.gapRects}).sort(function(K,oe){return K.gap-oe.gap});Pe(t,"onSnap",{guidelines:ie.filter(function(K){var oe=K.element;return!oe}),elements:$,gaps:F},!0);var Y=cu(t,"boundMap",W,function(K){return JSON.stringify(K)},ou()),J=cu(t,"innerBoundMap",ee,function(K){return JSON.stringify(K)},ou());return(W===Y||ee===J)&&Pe(t,"onBound",{bounds:W,innerBounds:ee},!0),Ce(Ce(Ce(Ce(Ce(Ce([],ne(GW(t,$,[m,b],U,e)),!1),ne($W(t,F,[m,b],U,e)),!1),ne(pR(t,"horizontal",N,[i,r],U,e)),!1),ne(pR(t,"vertical",C,[i,r],U,e)),!1),ne(hR(t,"horizontal",T,m,r,M,0,e)),!1),ne(hR(t,"vertical",E,b,i,A,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Mg(t)},drag:function(t){var e=t.state;Mg(t)||(e.guidelines=v1(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(rK(t,e)||m1(t,e))return!0;if(!e.isRequest&&e.inputEvent)return Un(e.inputEvent.target,Fe("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Mg(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Mg(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function aK(t,e){return[t[0]*e[0],t[1]*e[1]]}function Fe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return eY.apply(void 0,Ce([kw],ne(t),!1))}function FO(t){t()}function sK(t){return!t||t==="none"?[1,0,0,1,0,0]:Zi(t)?t:rh(t)}function Mf(t,e,n){return Lm(e,Kl(n,e),t,Kl(n.map(function(r){return-r}),e))}function oK(t,e,n){if(e==="%"){var r=zw(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function lK(t){var e=cK(Bw(t,":before"));return e.map(function(n,r){var i=Mh(n),a=i.value,o=i.unit;return a*oK(t,o,r===0)})}function Hm(t){return t?t.split(" "):["0","0"]}function cK(t){return Hm(t.transformOrigin)}function GO(t){var e=zr(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var o=[],c=function(d){var h=i[d].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(g){return h[g]}).join(", "),")"))},u=0;u<a;++u)c(u);return o.join(" ")}return""}function ah(t,e,n,r,i){var a,o,c=vw(t)||Zo(t),u=!1,d,h;if(!t||n)d=t;else{var g=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,m=t.parentElement;g?(u=!0,h=m,d=g):d=m}for(var b=!1,_=t===e||d===e,w="relative",E=1,T=parseFloat(i?.("zoom"))||1,C=i?.("position");d&&d!==c;){e===d&&(_=!0);var N=zr(d),V=d.tagName.toLowerCase(),P=GO(d),M=N("willChange"),A=parseFloat(N("zoom"))||1;if(w=N("position"),r&&A!==1){E=A;break}if(!n&&r&&T!==1&&C&&C!=="absolute"||V==="svg"||V==="foreignobject"||w!=="static"||P&&P!=="none"||M==="transform")break;var k=(o=t?.assignedSlot)===null||o===void 0?void 0:o.parentNode,D=d.parentNode;k&&(u=!0,h=D);var j=D;if(j&&j.nodeType===11){d=j.host,b=!0,w=zr(d)("position");break}d=j,w="relative"}return{offsetZoom:E,hasSlot:u,parentSlotElement:h,isCustomElement:b,isStatic:w==="static",isEnd:_||!d||d===c,offsetParent:d||c}}function uK(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,o=zr(t),c=M0(i),u=!c,d,h;return!u&&(r!=="svg"||t.ownerSVGElement)?(d=lO?lK(t):Hm(o("transformOrigin")).map(function(g){return parseFloat(g)}),h=d.slice(),u=!0,r==="svg"?(i=0,a=0):(n=ne(hK(t,d,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],d[0]=n[2],d[1]=n[3])):(d=Hm(o("transformOrigin")).map(function(g){return parseFloat(g)}),h=d.slice()),{tagName:r,isSVG:c,hasOffset:u,offset:[i||0,a||0],origin:d,targetOrigin:h}}function $O(t,e){var n=zr(t),r=zr(Zo(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),o=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(o=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,o]}function y1(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=Ji(n,3,4))})}function dK(t){for(var e=t.parentElement,n=!1,r=Zo(t);e;){var i=Bw(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function $0(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(eO(t,!e).join(","),")")}function zw(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function fK(t,e){var n,r=zw(t),i=r.width,a=r.height,o=r.clientWidth,c=r.clientHeight,u=o/i,d=c/a,h=t.preserveAspectRatio.baseVal,g=h.align,m=h.meetOrSlice,b=[0,0],_=[u,d],w=[0,0];if(g!==1){var E=(g-2)%3,T=Math.floor((g-2)/3);b[0]=i*E/2,b[1]=a*T/2;var C=m===2?Math.max(d,u):Math.min(u,d);_[0]=C,_[1]=C,w[0]=(o-i)/2*E,w[1]=(c-a)/2*T}var N=Ew(_,e);return n=ne(w,2),N[e*(e-1)]=n[0],N[e*(e-1)+1]=n[1],Mf(N,e,b)}function hK(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=zr(t),a=i("transform-box")==="fill-box",o=t.getBBox(),c=zw(t.ownerSVGElement),u=o.x,d=o.y;r==="foreignobject"&&!u&&!d&&(u=parseFloat(t.getAttribute("x"))||0,d=parseFloat(t.getAttribute("y"))||0);var h=u-c.x,g=d-c.y,m=a?e[0]:e[0]-h,b=a?e[1]:e[1]-g;return[h,g,m,b]}function an(t,e,n){return fr(t,Wl(e,n),n)}function ac(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return an(t,i,r)})}function Ti(t){var e=t.map(function(d){return d[0]}),n=t.map(function(d){return d[1]}),r=Math.min.apply(Math,Ce([],ne(e),!1)),i=Math.min.apply(Math,Ce([],ne(n),!1)),a=Math.max.apply(Math,Ce([],ne(e),!1)),o=Math.max.apply(Math,Ce([],ne(n),!1)),c=a-r,u=o-i;return{left:r,top:i,right:a,bottom:o,width:c,height:u}}function bR(t,e,n,r){var i=ac(t,e,n,r);return Ti(i)}function pK(t,e,n,r,i){var a,o=t.target,c=t.origin,u=e.matrix,d=qO(o),h=d.offsetWidth,g=d.offsetHeight,m=n.getBoundingClientRect(),b=[0,0];n===Zo(n)&&(b=$O(o,!0));for(var _=o.getBoundingClientRect(),w=_.left-m.left+n.scrollLeft-(n.clientLeft||0)+b[0],E=_.top-m.top+n.scrollTop-(n.clientTop||0)+b[1],T=_.width,C=_.height,N=Lm(r,i,u),V=bR(N,h,g,r),P=V.left,M=V.top,A=V.width,k=V.height,D=an(N,c,r),j=He(D,[P,M]),L=[w+j[0]*T/A,E+j[1]*C/k],U=[0,0],O=0;++O<10;){var Z=Va(i,r);a=ne(He(an(Z,L,r),an(Z,D,r)),2),U[0]=a[0],U[1]=a[1];var X=Lm(r,i,Kl(U,r),u),q=bR(X,h,g,r),W=q.left,ee=q.top,ie=W-w,$=ee-E;if(we(ie)<2&&we($)<2)break;L[0]-=ie,L[1]-=$}return U.map(function(F){return Math.round(F)})}function gK(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(u){return an(t,u,i)}),o=n.left,c=n.top;return a.map(function(u){return[u[0]+o,u[1]+c]})}function Ci(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function HO(t,e){return Ci([e[0]-t[0],e[1]-t[1]])}function vf(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=_n(t,e));var i=HO(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function qm(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(c,u){return c+u[0]},0)/i,o=n.reduce(function(c,u){return c+u[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Zl(t,e){var n=t[e];return Zi(n)?te(te({},t),n):t}function qO(t){var e=t&&!M0(t.offsetWidth),n=0,r=0,i=0,a=0,o=0,c=0,u=0,d=0,h=0,g=0,m=0,b=0,_=1/0,w=1/0,E=1/0,T=1/0,C=0,N=0,V=!1;if(t)if(!e&&t.ownerSVGElement){var P=t.getBBox();V=!0,n=P.width,r=P.height,o=n,c=r,u=n,d=r,i=n,a=r}else{var M=zr(t),A=t.style,k=M("boxSizing")==="border-box",D=parseFloat(M("borderLeftWidth"))||0,j=parseFloat(M("borderRightWidth"))||0,L=parseFloat(M("borderTopWidth"))||0,U=parseFloat(M("borderBottomWidth"))||0,O=parseFloat(M("paddingLeft"))||0,Z=parseFloat(M("paddingRight"))||0,X=parseFloat(M("paddingTop"))||0,q=parseFloat(M("paddingBottom"))||0,W=O+Z,ee=X+q,ie=D+j,$=L+U,F=W+ie,Y=ee+$,J=M("position"),K=0,oe=0;if("clientLeft"in t){var ce=null;if(J==="absolute"){var me=ah(t,Zo(t));ce=me.offsetParent}else ce=t.parentElement;if(ce){var ge=zr(ce);K=parseFloat(ge("width")),oe=parseFloat(ge("height"))}}h=Math.max(W,Ft(M("minWidth"),K)||0),g=Math.max(ee,Ft(M("minHeight"),oe)||0),_=Ft(M("maxWidth"),K),w=Ft(M("maxHeight"),oe),isNaN(_)&&(_=1/0),isNaN(w)&&(w=1/0),C=Ft(A.width,0)||0,N=Ft(A.height,0)||0,o=parseFloat(M("width"))||0,c=parseFloat(M("height"))||0,u=we(o-C)<1?Qx(h,C||o,_):o,d=we(c-N)<1?Qx(g,N||c,w):c,n=u,r=d,i=u,a=d,k?(E=_,T=w,m=h,b=g,u=n-F,d=r-Y):(E=_+F,T=w+Y,m=h+F,b=g+Y,n=u+F,r=d+Y),i=u+W,a=d+ee}return{svg:V,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:u,contentHeight:d,inlineCSSWidth:C,inlineCSSHeight:N,cssWidth:o,cssHeight:c,minWidth:h,minHeight:g,maxWidth:_,maxHeight:w,minOffsetWidth:m,minOffsetHeight:b,maxOffsetWidth:E,maxOffsetHeight:T}}function YO(t,e){return _n(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Og(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function XO(t,e){var n=t===Zo(t)||t===vw(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=zr(t)("overflow")!=="visible",te(te({},e),r)}function Fb(t,e,n,r){var i=t.left,a=t.right,o=t.top,c=t.bottom,u=e.top,d=e.left,h={left:d+i,top:u+o,right:d+a,bottom:u+c,width:a-i,height:c-o};return n&&r?XO(n,h):h}function Of(t,e){var n=0,r=0,i=0,a=0;if(t){var o=t.getBoundingClientRect();n=o.left,r=o.top,i=o.width,a=o.height}var c={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?XO(t,c):c}function mK(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,o=i.offsetHeight,c=i.svg,u=i.transformOrigin;return!n&&c&&r?$w(r,a,o):u}function WO(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=KO(a,r)}return i}function KO(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function Lw(t,e){return[At(e,t[0]),At(e,t[1]),At(e,t[2]),At(e,t[3])]}function ki(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,o=t.pos4;return Lw([r,i,a,o],[e,n])}function b1(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function lu(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&b1(t,e),r?.unset(),t[n]=null}function _r(t,e){if(e){var n=ed(e);n.nextStyle=te(te({},n.nextStyle),t)}return{style:t,cssText:ks(t).map(function(r){return"".concat(tm(r,"-"),": ").concat(t[r],";")}).join("")}}function QO(t,e,n){var r=e.afterTransform||e.transform;return te(te({},_r(te(te(te({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function ct(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=te(te({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=e.stop)===null||o===void 0||o.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function ei(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),te(te({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function H0(t,e,n){t._emitter.on(e,n)}function Pe(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function Bw(t,e){return Io(t).getComputedStyle(t,e)}function Pg(t,e,n){var r={},i={};return t.filter(function(a){var o=a.name;if(r[o]||!e.some(function(c){return a[c]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[o]=!0,!0})}function x1(t,e){return t===e||t==null&&e==null}function xR(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!M0(i))return i}return t[n]}function ZO(t,e){var n=[],r=[];return t.forEach(function(i,a){var o=e(i,a,t),c=r.indexOf(o),u=n[c]||[];c===-1&&(r.push(o),n.push(u)),u.push(i)}),n}function vK(t,e){var n=[],r={};return t.forEach(function(i,a){var o=e(i,a,t),c=r[o];c||(c=[],r[o]=c,n.push(c)),c.push(i)}),n}function JO(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Mu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return we(r)-we(n)}),t[0]}function Ou(t,e,n){return fr(Va(t,n),Wl(e,n),n)}function yK(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=ne(Ou(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function mi(t,e,n,r){if(!n[0]&&!n[1])return e;var i=an(t,[mR(n[0]||1),0],r),a=an(t,[0,mR(n[1]||1)],r),o=an(t,[n[0]/Ci(i),n[1]/Ci(a)],r);return At(e,o)}function Fi(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function Ym(t){return we(t)<=Er?0:t}function Uw(t){return function(e){if(!e.isDragging(t))return"";var n=oW(e,t),r=n.deg;return r?Fe("view-control-rotation".concat(r)):""}}function Fw(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return Un(i,Fe("direction"))&&(!t||Un(i,Fe(t)))}}function bK(t,e,n){var r,i=Du(t,{"x%":function(P){return P/100*e.offsetWidth},"y%":function(P){return P/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),o=t.slice(0,n<0?void 0:n+1),c=t[n]||"",u=n<0?[]:t.slice(n),d=n<0?[]:t.slice(n+1),h=i.slice(0,n<0?void 0:n),g=i.slice(0,n<0?void 0:n+1),m=(r=i[n])!==null&&r!==void 0?r:Du([""])[0],b=n<0?[]:i.slice(n),_=n<0?[]:i.slice(n+1),w=m?[m]:[],E=Zc(h),T=Zc(g),C=Zc(b),N=Zc(_),V=Gt(E,C,4);return{transforms:t,beforeFunctionMatrix:E,beforeFunctionMatrix2:T,targetFunctionMatrix:Zc(w),afterFunctionMatrix:C,afterFunctionMatrix2:N,allFunctionMatrix:V,beforeFunctions:h,beforeFunctions2:g,targetFunction:w[0],afterFunctions:b,afterFunctions2:_,beforeFunctionTexts:a,beforeFunctionTexts2:o,targetFunctionText:c,afterFunctionTexts:u,afterFunctionTexts2:d}}function xK(t){return!t||!Zi(t)||Zu(t)?!1:Vn(t)||"length"in t}function Oa(t,e){return t?Zu(t)?t:jr(t)?e?document.querySelector(t):t:pw(t)?t():I4(t)?t:"current"in t?t.current:t:null}function Gw(t,e){if(!t)return[];var n=xK(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return jr(i)&&e?Ce(Ce([],ne(r),!1),ne([].slice.call(document.querySelectorAll(i))),!1):(Vn(i)?r.push(Gw(i,e)):r.push(Oa(i,e)),r)},[])}function _K(t,e,n){var r=_n(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function _R(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=Va(n,i);return r||(a=Ji(a,3,4)),a[12]=0,a[13]=0,a[14]=0,iX(a,e)}function eP(t,e,n,r,i){var a=ne(t,2),o=a[0],c=a[1],u=0,d=0;if(i&&o&&c){var h=_n([0,0],e),g=_n([0,0],r),m=Ci(e),b=Math.cos(h-g)*m;if(!r[0])d=b,u=d*n;else if(!r[1])u=b,d=u/n;else{var _=r[0]*o,w=r[1]*c,E=Math.atan2(_+e[0],w+e[1]),T=Math.atan2(_,w);E<0&&(E+=Math.PI*2),T<0&&(T+=Math.PI*2);var C=0;we(E-T)<Math.PI/2||we(E-T)>Math.PI/2*3||(T+=Math.PI),C=E-T,C>Math.PI*2?C-=Math.PI*2:C>Math.PI?C=2*Math.PI-C:C<-Math.PI&&(C=-2*Math.PI-C);var N=Ci([_+e[0],w+e[1]])*Math.cos(C);u=N*Math.sin(T)-_,d=N*Math.cos(T)-w,r[0]<0&&(u*=-1),r[1]<0&&(d*=-1)}}else u=r[0]*e[0],d=r[1]*e[1];return[u,d]}function tP(t,e,n,r){var i,a=n.ratio,o=n.startOffsetWidth,c=n.startOffsetHeight,u=0,d=0,h=r.distX,g=r.distY,m=r.pinchScale,b=r.parentDistance,_=r.parentDist,w=r.parentScale,E=n.fixedDirection,T=[0,1].map(function(A){return we(t[A]-E[A])}),C=[0,1].map(function(A){var k=T[A];return k!==0&&(k=2/k),k});if(_)u=_[0],d=_[1],e&&(u?d||(d=u/a):u=d*a);else if(Ru(m))u=(m-1)*o,d=(m-1)*c;else if(w)u=(w[0]-1)*o,d=(w[1]-1)*c;else if(b){var N=o*T[0],V=c*T[1],P=Ci([N,V]);u=b/P*N*C[0],d=b/P*V*C[1]}else{var M=Ua({datas:n,distX:h,distY:g});M=C.map(function(A,k){return M[k]*A}),i=ne(eP([o,c],M,a,t,e),2),u=i[0],d=i[1]}return{distWidth:u,distHeight:d}}function _1(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=ne(t.split(" "),2),r=n[0],i=n[1],a=_1(r||""),o=_1(i||""),c=te(te({},a),o),u={x:"50%",y:"50%"};return c.x&&(u.x=c.x),c.y&&(u.y=c.y),c.value&&(c.x&&!c.y&&(u.y=c.value),!c.x&&c.y&&(u.x=c.value)),u}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function $w(t,e,n){var r=_1(t,!0),i=r.x,a=r.y;return[Ft(i,e)||0,Ft(a,n)||0]}function wK(t,e,n){var r=t.map(function(a){return He(a,e)}),i=r.map(function(a){return Vh(a,n)});return{prev:r,next:i,result:i.map(function(a){return At(a,e)})}}function nP(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=Vn(n),o=Vn(i);return a&&o?nP(n,i):!a&&!o?n===i:!1})}function cu(t,e,n,r,i){var a=t._store,o=a[e];if(!(e in a))if(i!=null)a[e]=i,o=i;else return a[e]=n,n;return o===n||r(o)===r(n)?o:(a[e]=n,n)}function br(t){return t>=0?1:-1}function we(t){return Math.abs(t)}function Gb(t,e){return vY(t).map(function(n){return e(n)})}function rP(t){return Ru(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var SK=Bh("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,o=t.props,c=o.pinchable,u=o.ables;if(!c)return!1;var d="onPinch".concat(r?"Group":"","Start"),h="drag".concat(r?"Group":"","ControlStart"),g=(c===!0?t.controlAbles:u.filter(function(w){return c.indexOf(w.name)>-1})).filter(function(w){return w.canPinch&&w[h]}),m=ct(t,e,{});r&&(m.targets=r);var b=Pe(t,d,m);n.isPinch=b!==!1,n.ables=g;var _=n.isPinch;return _?(g.forEach(function(w){if(a[w.name]=a[w.name]||{},!!w[h]){var E=te(te({},e),{datas:a[w.name],parentRotate:i,isPinch:!0});w[h](t,E)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},_):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,o=e.inputEvent,c=e.targets,u=e.angle;if(n.isPinch){var d=i*(1-1/r),h=ct(t,e,{});c&&(h.targets=c);var g="onPinch".concat(c?"Group":"");Pe(t,g,h);var m=n.ables,b="drag".concat(c?"Group":"","Control");return m.forEach(function(_){_[b]&&_[b](t,te(te({},e),{datas:a[_.name],inputEvent:o,resolveMatrix:!0,pinchScale:r,parentDistance:d,parentRotate:u,isPinch:!0}))}),h}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,o=e.originalDatas;if(n.isPinch){var c="onPinch".concat(a?"Group":"","End"),u=ei(t,e,{isDrag:r});a&&(u.targets=a),Pe(t,c,u);var d=n.ables,h="drag".concat(a?"Group":"","ControlEnd");return d.forEach(function(g){g[h]&&g[h](t,te(te({},e),{isDrag:r,datas:o[g.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,te(te({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,te(te({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,te(te({},e),{targets:t.props.targets}))}}),wR=Fw("scalable"),EK={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:SO("scalable"),dragControlCondition:wR,viewClassName:Uw("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,o=WO(a,r,i,n),c=t.state,u=c.width,d=c.height,h=c.targetTransform,g=c.target,m=c.pos1,b=c.pos2,_=c.pos4;if(!o||!g)return!1;r||ic(t,e),n.datas={},n.transform=h,n.prevDist=[1,1],n.direction=o,n.startOffsetWidth=u,n.startOffsetHeight=d,n.startValue=[1,1];var w=!o[0]&&!o[1]||o[0]||!o[1];B0(t,e,"scale"),n.isWidth=w;function E(M){n.ratio=M&&isFinite(M)?M:0}n.startPositions=ki(t.state);function T(M){var A=PO(n.startPositions,M);n.fixedDirection=A.fixedDirection,n.fixedPosition=A.fixedPosition,n.fixedOffset=A.fixedOffset}n.setFixedDirection=T,E(ys(m,b)/ys(b,_)),T([-o[0],-o[1]]);var C=function(M){n.minScaleSize=M},N=function(M){n.maxScaleSize=M};C([-1/0,-1/0]),N([1/0,1/0]);var V=ct(t,e,te(te({direction:o,set:function(M){n.startValue=M},setRatio:E,setFixedDirection:T,setMinScaleSize:C,setMaxScaleSize:N},L0(t,e)),{dragStart:yr.dragStart(t,new Nu().dragStart([0,0],e))})),P=Pe(t,"onScaleStart",V);return n.startFixedDirection=n.fixedDirection,P!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),n.isScale?V:!1},dragControl:function(t,e){V0(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,o=e.dragClient,c=e.isRequest,u=e.useSnap,d=e.resolveMatrix,h=n.prevDist,g=n.direction,m=n.startOffsetWidth,b=n.startOffsetHeight,_=n.isScale,w=n.startValue,E=n.isWidth,T=n.ratio;if(!_)return!1;var C=t.props,N=C.throttleScale,V=C.parentMoveable,P=g;!g[0]&&!g[1]&&(P=[1,1]);var M=T&&(r??C.keepRatio)||!1,A=t.state,k=[w[0],w[1]];function D(){var ae=tP(P,M,n,e),Ae=ae.distWidth,De=ae.distHeight,Me=m?(m+Ae)/m:1,Be=b?(b+De)/b:1;w[0]||(k[0]=Ae/m),w[1]||(k[1]=De/b);var Ve=(P[0]||M?Me:1)*k[0],Se=(P[1]||M?Be:1)*k[1];return Ve===0&&(Ve=br(h[0])*Dg),Se===0&&(Se=br(h[1])*Dg),[Ve,Se]}var j=D();if(!a&&t.props.groupable){var L=A.snapRenderInfo||{},U=L.direction;Vn(U)&&(U[0]||U[1])&&(A.snapRenderInfo={direction:g,request:e.isRequest})}Pe(t,"onBeforeScale",ct(t,e,{scale:j,setFixedDirection:function(ae){return n.setFixedDirection(ae),j=D(),j},startFixedDirection:n.startFixedDirection,setScale:function(ae){j=ae}},!0));var O=[j[0]/k[0],j[1]/k[1]],Z=o,X=[0,0],q=br(O[0]*O[1]),W=!o&&!i&&a;if(W||d?Z=Nw(t,n.targetAllTransform,[0,0],[0,0],n):o||(Z=n.fixedPosition),a||(X=tK(t,O,g,!u&&c,n)),M){P[0]&&P[1]&&X[0]&&X[1]&&(Math.abs(X[0]*m)>Math.abs(X[1]*b)?X[1]=0:X[0]=0);var ee=!X[0]&&!X[1];if(ee&&(E?O[0]=rt(O[0]*k[0],N)/k[0]:O[1]=rt(O[1]*k[1],N)/k[1]),P[0]&&!P[1]||X[0]&&!X[1]||ee&&E){O[0]+=X[0];var ie=m*O[0]*k[0]/T;O[1]=br(q*O[0])*we(ie/b/k[1])}else if(!P[0]&&P[1]||!X[0]&&X[1]||ee&&!E){O[1]+=X[1];var $=b*O[1]*k[1]*T;O[0]=br(q*O[1])*we($/m/k[0])}}else O[0]+=X[0],O[1]+=X[1],X[0]||(O[0]=rt(O[0]*k[0],N)/k[0]),X[1]||(O[1]=rt(O[1]*k[1],N)/k[1]);O[0]===0&&(O[0]=br(h[0])*Dg),O[1]===0&&(O[1]=br(h[1])*Dg),j=aK(O,[k[0],k[1]]);var F=[m,b],Y=[m*j[0],b*j[1]];Y=C4(Y,n.minScaleSize,n.maxScaleSize,M?T:!1),j=Gb(2,function(ae){return F[ae]?Y[ae]/F[ae]:Y[ae]}),O=Gb(2,function(ae){return j[ae]/k[ae]});var J=Gb(2,function(ae){return h[ae]?O[ae]/h[ae]:O[ae]}),K="scale(".concat(O.join(", "),")"),oe="scale(".concat(j.join(", "),")"),ce=z0(n,oe,K),me=!w[0]||!w[1],ge=tW(t,me?oe:K,n.fixedDirection,Z,n.fixedOffset,n,me),Te=W?ge:He(ge,n.prevInverseDist||[0,0]);if(n.prevDist=O,n.prevInverseDist=ge,j[0]===h[0]&&j[1]===h[1]&&Te.every(function(ae){return!ae})&&!V&&!W)return!1;var Ne=ct(t,e,te({offsetWidth:m,offsetHeight:b,direction:g,scale:j,dist:O,delta:J,isPinch:!!a},vO(t,ce,Te,a,e)));return Pe(t,"onScale",Ne),Ne},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=ei(t,e,{});return Pe(t,"onScaleEnd",r),r},dragGroupControlCondition:wR,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=Yi(t,"resizable",e);n.moveableScale=t.scale;var a=bs(t,this,"dragControlStart",e,function(d,h){return Fm(t,d,n,h)}),o=function(d){r.setFixedDirection(d),a.forEach(function(h,g){h.setFixedDirection(d),Fm(t,h.moveable,n,i[g])})};n.setFixedDirection=o;var c=te(te({},r),{targets:t.props.targets,events:a,setFixedDirection:o}),u=Pe(t,"onScaleGroupStart",c);return n.isScale=u!==!1,n.isScale?c:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){H0(t,"onBeforeScale",function(h){Pe(t,"onBeforeScaleGroup",ct(t,e,te(te({},h),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var o=t.props.keepRatio,c=n.fixedPosition,u=bs(t,this,"dragControl",e,function(h,g){var m=ne(fr(zh(t.rotation/180*Math.PI,3),[g.datas.originalX*i[0],g.datas.originalY*i[1],1],3),2),b=m[0],_=m[1];return te(te({},g),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:At(c,[b,_])})}),d=te({targets:t.props.targets,events:u},r);return Pe(t,"onScaleGroup",d),d}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=bs(t,this,"dragControlEnd",e),a=ei(t,e,{targets:t.props.targets,events:i});return Pe(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function ho(t,e){return t.map(function(n,r){return Vm(n,e[r],1,2)})}function SR(t,e,n){var r=_n(t,e),i=_n(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function TK(t,e){var n=SR(t[0],t[1],t[2]),r=SR(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var AK={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:Uw("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,o=n.zoom;if(r||i||!a)return[];var c=t.state,u=c.pos1,d=c.pos2,h=c.pos3,g=c.pos4,m=ho(u,d),b=ho(d,u),_=ho(u,h),w=ho(h,u),E=ho(h,g),T=ho(g,h),C=ho(d,g),N=ho(g,d);return Ce([e.createElement("div",{className:Fe("line"),key:"middeLine1",style:vf(m,E,o)}),e.createElement("div",{className:Fe("line"),key:"middeLine2",style:vf(b,T,o)}),e.createElement("div",{className:Fe("line"),key:"middeLine3",style:vf(_,C,o)}),e.createElement("div",{className:Fe("line"),key:"middeLine4",style:vf(w,N,o)})],ne(EO(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return Un(n,Fe("direction"))&&Un(n,Fe("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,o=KO(a,n);if(!o||!i)return!1;var c=t.state,u=c.transformOrigin,d=c.is3d,h=c.targetTransform,g=c.targetMatrix,m=c.width,b=c.height,_=c.left,w=c.top;n.datas={},n.targetTransform=h,n.warpTargetMatrix=d?g:Ji(g,3,4),n.targetInverseMatrix=Z4(Va(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=_,n.top=w,n.poses=[[0,0],[m,0],[0,b],[m,b]].map(function(C){return He(C,u)}),n.nextPoses=n.poses.map(function(C){var N=ne(C,2),V=N[0],P=N[1];return fr(n.warpTargetMatrix,[V,P,0,1],4)}),n.startValue=Kt(4),n.prevMatrix=Kt(4),n.absolutePoses=ki(c),n.posIndexes=mO(o),ic(t,e),B0(t,e,"matrix3d"),c.snapRenderInfo={request:e.isRequest,direction:o};var E=ct(t,e,te({set:function(C){n.startValue=C}},L0(t,e))),T=Pe(t,"onWarpStart",E);return T!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,o=n.targetInverseMatrix,c=n.prevMatrix,u=n.isWarp,d=n.startValue,h=n.poses,g=n.posIndexes,m=n.absolutePoses;if(!u)return!1;if(V0(t,e,"matrix3d"),td(t,"warpable")){var b=g.map(function(D){return m[D]});b.length>1&&b.push([(b[0][0]+b[1][0])/2,(b[0][1]+b[1][1])/2]);var _=G0(t,r,{horizontal:b.map(function(D){return D[1]+a}),vertical:b.map(function(D){return D[0]+i})}),w=_.horizontal,E=_.vertical;a-=w.offset,i-=E.offset}var T=Ua({datas:n,distX:i,distY:a},!0),C=n.nextPoses.slice();if(g.forEach(function(D){C[D]=At(C[D],T)}),!HX.every(function(D){return TK(D.map(function(j){return h[j]}),D.map(function(j){return C[j]}))}))return!1;var N=Tw(h[0],h[2],h[1],h[3],C[0],C[2],C[1],C[3]);if(!N.length)return!1;var V=Gt(o,N,4),P=pO(n,V,!0),M=Gt(Va(c,4),P,4);n.prevMatrix=P;var A=Gt(d,P,4),k=z0(n,"matrix3d(".concat(A.join(", "),")"),"matrix3d(".concat(P.join(", "),")"));return Dw(e,k),Pe(t,"onWarp",ct(t,e,te({delta:M,matrix:A,dist:P,multiply:Gt,transform:k},_r({transform:k},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Pe(t,"onWarpEnd",ei(t,e,{})),r):!1}},CK=Fe("area-pieces"),jg=Fe("area-piece"),iP=Fe("avoid"),kK=Fe("view-dragging");function $b(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;N4(e,iP),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function ER(t){return t.createElement("div",{key:"area_pieces",className:CK},t.createElement("div",{className:jg}),t.createElement("div",{className:jg}),t.createElement("div",{className:jg}),t.createElement("div",{className:jg}))}var aP={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,o=n.passDragArea,c=t.getState(),u=c.width,d=c.height,h=c.renderPoses,g=o?Fe("area","pass"):Fe("area");if(a)return[e.createElement("div",{key:"area",ref:vs(t,"areaElement"),className:g}),ER(e)];if(!r||!i)return[];var m=Tw([0,0],[u,0],[0,d],[u,d],h[0],h[1],h[2],h[3]),b=m.length?$0(m,!0):"none";return[e.createElement("div",{key:"area",ref:vs(t,"areaElement"),className:g,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(d,"px"),transformOrigin:"0 0",transform:b}}),ER(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var o=t.areaElement,c=t.state,u=c.moveableClientRect,d=c.renderPoses,h=c.rootMatrix,g=c.is3d,m=u.left,b=u.top,_=Ti(d),w=_.left,E=_.top,T=_.width,C=_.height,N=g?4:3,V=ne(Ou(h,[r-m,i-b],N),2),P=V[0],M=V[1];P-=w,M-=E;var A=[{left:w,top:E,width:T,height:M-10},{left:w,top:E,width:P-10,height:C},{left:w,top:E+M+10,width:T,height:C-M-10},{left:w+P+10,top:E,width:T-P-10,height:C}],k=[].slice.call(o.nextElementSibling.children);A.forEach(function(D,j){k[j].style.cssText="left: ".concat(D.left,"px;top: ").concat(D.top,"px; width: ").concat(D.width,"px; height: ").concat(D.height,"px;")}),D4(o,iP),c.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,$b(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||$b(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){$b(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&A4(function(){e.disableNativeEvent=!1})}},RK=Bh("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,o=t.getState(),c=o.beforeOrigin,u=o.rotation,d=o.svg,h=o.allMatrix,g=o.is3d,m=o.left,b=o.top,_=o.offsetWidth,w=o.offsetHeight,E;if(!a&&d&&i){var T=ne($w(i,_,w),2),C=T[0],N=T[1],V=g?4:3,P=an(h,[C,N],V);E=qm(u,r,He(P,[m,b]))}else E=qm(u,r,c);return[e.createElement("div",{className:Fe("control","origin"),style:E,key:"beforeOrigin"})]}});function DK(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var NK={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,o=new uX,c=Oa(i,!0);e.datas.dragScroll=o,t.state.dragScroll=o;var u=e.isControl?"controlGesto":"targetGesto",d=e.targets;o.on("scroll",function(h){var g=h.container,m=h.direction,b=ct(t,e,{scrollContainer:g,direction:m}),_=d?"onScrollGroup":"onScroll";d&&(b.targets=d),Pe(t,_,b)}).on("move",function(h){var g=h.offsetX,m=h.offsetY,b=h.inputEvent;t[u].scrollBy(g,m,b.inputEvent,!1)}).on("scrollDrag",function(h){var g=h.next;g(t[u].getCurrentEvent())}),o.dragStart(e,te({container:c},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,o=r.scrollThreshold,c=o===void 0?0:o,u=r.scrollThrottleTime,d=u===void 0?0:u,h=r.getScrollPosition,g=h===void 0?DK:h,m=r.scrollOptions;return n.drag(e,te({container:a,threshold:c,throttleTime:d,getScrollPosition:function(b){return g({scrollContainer:b.container,direction:b.direction})}},m)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,te(te({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,te(te({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,te(te({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,te(te({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,te(te({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,te(te({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,te(te({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},sP={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},IK=Bh("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=rP(n.padding||{}),i=r.left,a=r.top,o=r.right,c=r.bottom,u=t.getState(),d=u.renderPoses,h=u.pos1,g=u.pos2,m=u.pos3,b=u.pos4,_=[h,g,m,b],w=[];return i>0&&w.push([0,2]),a>0&&w.push([0,1]),o>0&&w.push([1,3]),c>0&&w.push([2,3]),w.map(function(E,T){var C=ne(E,2),N=C[0],V=C[1],P=_[N],M=_[V],A=d[N],k=d[V],D=Tw([0,0],[100,0],[0,100],[100,100],P,M,A,k);if(D.length)return e.createElement("div",{key:"padding".concat(T),className:Fe("padding"),style:{transform:$0(D,!0)}})})}}),TR=["nw","ne","se","sw"];function Vg(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var MK=[1,2,5,6],OK=[0,3,4,7],Ml=[1,-1,-1,1],Ol=[1,1,-1,-1];function Hw(t,e,n,r,i,a,o,c){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=n),c===void 0&&(c=r);var u=[],d=!1,h=t.filter(function(m){return!m.virtual}),g=h.map(function(m){var b=m.horizontal,_=m.vertical,w=m.pos;if(_&&!d&&(d=!0,u.push("/")),d){var E=Math.max(0,_===1?w[1]-a:c-w[1]);return u.push(Fi(E,r,e)),E}else{var E=Math.max(0,b===1?w[0]-i:o-w[0]);return u.push(Fi(E,n,e)),E}});return{radiusPoses:h,styles:u,raws:g}}function oP(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function lP(t,e,n,r,i,a,o){var c,u,d,h;a===void 0&&(a=[0,0]),o===void 0&&(o=!1);var g=t.indexOf("/"),m=(g>-1?t.slice(0,g):t).length,b=t.slice(0,m),_=t.slice(m+1),w=b.length,E=_.length,T=E>0,C=ne(b,4),N=C[0],V=N===void 0?"0px":N,P=C[1],M=P===void 0?V:P,A=C[2],k=A===void 0?V:A,D=C[3],j=D===void 0?M:D,L=ne(_,4),U=L[0],O=U===void 0?V:U,Z=L[1],X=Z===void 0?T?O:M:Z,q=L[2],W=q===void 0?T?O:k:q,ee=L[3],ie=ee===void 0?T?X:j:ee,$=[V,M,k,j].map(function(ce){return Ft(ce,e)}),F=[O,X,W,ie].map(function(ce){return Ft(ce,n)}),Y=$.slice(),J=F.slice();c=ne(Vg([Y[0],Y[1]],e),2),Y[0]=c[0],Y[1]=c[1],u=ne(Vg([Y[3],Y[2]],e),2),Y[3]=u[0],Y[2]=u[1],d=ne(Vg([J[0],J[3]],n),2),J[0]=d[0],J[3]=d[1],h=ne(Vg([J[1],J[2]],n),2),J[1]=h[0],J[2]=h[1];var K=o?Y:Y.slice(0,Math.max(a[0],w)),oe=o?J:J.slice(0,Math.max(a[1],E));return Ce(Ce([],ne(K.map(function(ce,me){var ge=TR[me];return{virtual:me>=w,horizontal:Ml[me],vertical:0,pos:[r+ce,i+(Ol[me]===-1?n:0)],sub:!0,raw:$[me],direction:ge}})),!1),ne(oe.map(function(ce,me){var ge=TR[me];return{virtual:me>=E,horizontal:0,vertical:Ol[me],pos:[r+(Ml[me]===-1?e:0),i+ce],sub:!0,raw:F[me],direction:ge}})),!1)}function PK(t,e,n,r,i){i===void 0&&(i=e.length);var a=oP(t.slice(r)),o=a.horizontalRange,c=a.verticalRange,u=n-r,d=0;if(u===0)d=i;else if(u>0&&u<o[1])d=o[1]-u;else if(u>=c[0])d=c[0]+c[1]-u;else return;t.splice(n,d),e.splice(n,d)}function jK(t,e,n,r,i,a,o,c,u,d,h){d===void 0&&(d=0),h===void 0&&(h=0);var g=oP(t.slice(n)),m=g.horizontalRange,b=g.verticalRange;if(r>-1)for(var _=Ml[r]===1?a-d:c-a,w=m[1];w<=r;++w){var E=Ol[w]===1?h:u,T=0;if(r===w?T=a:w===0?T=d+_:Ml[w]===-1&&(T=c-(e[n][0]-d)),t.splice(n+w,0,{horizontal:Ml[w],vertical:0,pos:[T,E]}),e.splice(n+w,0,[T,E]),w===0)break}else if(i>-1){var C=Ol[i]===1?o-h:u-o;if(m[1]===0&&b[1]===0){var N=[d+C,h];t.push({horizontal:Ml[0],vertical:0,pos:N}),e.push(N)}for(var V=b[0],w=b[1];w<=i;++w){var T=Ml[w]===1?d:c,E=0;if(i===w?E=o:w===0?E=h+C:Ol[w]===1?E=e[n+V][1]:Ol[w]===-1&&(E=u-(e[n+V][1]-h)),t.push({horizontal:0,vertical:Ol[w],pos:[T,E]}),e.push([T,E]),w===0)break}}}function VK(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var zK=[[0,-1,"n"],[1,0,"e"]],LK=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function qw(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,o=i.height,c=e,u=c.type,d=c.poses,h=u==="rect",g=u==="circle";if(u==="polygon")return n.map(function(M){return"".concat(Fi(M[0],a,r)," ").concat(Fi(M[1],o,r))});if(h||u==="inset"){var m=n[1][1],b=n[3][0],_=n[7][0],w=n[5][1];if(h)return[m,b,w,_].map(function(M){return"".concat(M,"px")});var E=[m,a-b,o-w,_].map(function(M,A){return Fi(M,A%2?a:o,r)});if(n.length>8){var T=ne(He(n[4],n[0]),2),C=T[0],N=T[1];E.push.apply(E,Ce(["round"],ne(Hw(d.slice(8).map(function(M,A){return te(te({},M),{pos:n[A]})}),r,C,N,_,m,b,w).styles),!1))}return E}else if(g||u==="ellipse"){var V=n[0],P=Fi(we(n[1][1]-V[1]),g?Math.sqrt((a*a+o*o)/2):o,r),E=g?[P]:[Fi(we(n[2][0]-V[0]),a,r),P];return E.push("at",Fi(V[0],a,r),Fi(V[1],o,r)),E}}function Xm(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return LK.map(function(o){var c=ne(o,3),u=c[0],d=c[1],h=c[2],g=i[u+1],m=a[d+1];return{vertical:we(d),horizontal:we(u),direction:h,pos:[g,m]}})}function cP(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[we(e[1]-e[0]),we(n[1]-n[0])]}function AR(t,e,n,r,i){var a,o,c,u,d,h,g,m,b;if(t){var _=i;if(!_){var w=zr(t),E=w("clipPath");_=E!=="none"?E:w("clip")}if(!((!_||_==="none"||_==="auto")&&(_=r,!_))){var T=T4(_),C=T.prefix,N=C===void 0?_:C,V=T.value,P=V===void 0?"":V,M=N==="circle",A=" ";if(N==="polygon"){var k=zl(P||"0% 0%, 100% 0%, 100% 100%, 0% 100%");A=",";var D=k.map(function(st){var wt=ne(st.split(" "),2),Qe=wt[0],ut=wt[1];return{vertical:1,horizontal:1,pos:[Ft(Qe,e),Ft(ut,n)]}}),j=Ql(D.map(function(st){return st.pos}));return{type:N,clipText:_,poses:D,splitter:A,left:j.minX,right:j.maxX,top:j.minY,bottom:j.maxY}}else if(M||N==="ellipse"){var L="",U="",O=0,Z=0,k=$o(P);if(M){var X="";a=ne(k,4),o=a[0],X=o===void 0?"50%":o,c=a[2],L=c===void 0?"50%":c,u=a[3],U=u===void 0?"50%":u,O=Ft(X,Math.sqrt((e*e+n*n)/2)),Z=O}else{var q="",W="";d=ne(k,5),h=d[0],q=h===void 0?"50%":h,g=d[1],W=g===void 0?"50%":g,m=d[3],L=m===void 0?"50%":m,b=d[4],U=b===void 0?"50%":b,O=Ft(q,e),Z=Ft(W,n)}var ee=[Ft(L,e),Ft(U,n)],D=Ce([{vertical:1,horizontal:1,pos:ee,direction:"nesw"}],ne(zK.slice(0,M?1:2).map(function(Qe){return{vertical:we(Qe[1]),horizontal:Qe[0],direction:Qe[2],sub:!0,pos:[ee[0]+Qe[0]*O,ee[1]+Qe[1]*Z]}})),!1);return{type:N,clipText:_,radiusX:O,radiusY:Z,left:ee[0]-O,top:ee[1]-Z,right:ee[0]+O,bottom:ee[1]+Z,poses:D,splitter:A}}else if(N==="inset"){var k=$o(P||"0 0 0 0"),ie=k.indexOf("round"),$=(ie>-1?k.slice(0,ie):k).length,F=k.slice($+1),Y=ne(k.slice(0,$),4),J=Y[0],K=Y[1],oe=K===void 0?J:K,ce=Y[2],me=ce===void 0?J:ce,ge=Y[3],Te=ge===void 0?oe:ge,Ne=ne([J,me].map(function(Qe){return Ft(Qe,n)}),2),ae=Ne[0],Ae=Ne[1],De=ne([Te,oe].map(function(Qe){return Ft(Qe,e)}),2),Me=De[0],Be=De[1],Ve=e-Be,Se=n-Ae,ze=lP(F,Ve-Me,Se-ae,Me,ae),D=Ce(Ce([],ne(Xm(ae,Ve,Se,Me)),!1),ne(ze),!1);return{type:"inset",clipText:_,poses:D,top:ae,left:Me,right:Ve,bottom:Se,radius:F,splitter:A}}else if(N==="rect"){var k=zl(P||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));A=",";var Ie=ne(k.map(function(cn){var It=Mh(cn).value;return It}),4),Le=Ie[0],Be=Ie[1],Ae=Ie[2],Me=Ie[3],D=Xm(Le,Be,Ae,Me);return{type:"rect",clipText:_,poses:D,top:Le,right:Be,bottom:Ae,left:Me,values:k,splitter:A}}}}}function BK(t,e,n,r,i){var a=t[e],o=a.direction,c=a.sub,u=t.map(function(){return[0,0]}),d=o?o.split(""):[];if(r&&e<8){var h=d.filter(function(O){return O==="w"||O==="e"}),g=d.filter(function(O){return O==="n"||O==="s"}),m=h[0],b=g[0];u[e]=n;var _=ne(cP(t),2),w=_[0],E=_[1],T=w&&E?w/E:0;if(T&&i){var C=(e+4)%8,N=t[C].pos,V=[0,0];o.indexOf("w")>-1?V[0]=-1:o.indexOf("e")>-1&&(V[0]=1),o.indexOf("n")>-1?V[1]=-1:o.indexOf("s")>-1&&(V[1]=1);var P=eP([w,E],n,T,V,!0),M=w+P[0],A=E+P[1],k=N[1],D=N[1],j=N[0],L=N[0];V[0]===-1?j=L-M:V[0]===1?L=j+M:(j=j-M/2,L=L+M/2),V[1]===-1?k=D-A:(V[1]===1||(k=D-A/2),D=k+A);var U=Xm(k,L,D,j);t.forEach(function(O,Z){u[Z][0]=U[Z].pos[0]-O.pos[0],u[Z][1]=U[Z].pos[1]-O.pos[1]})}else t.forEach(function(O,Z){var X=O.direction;X&&(X.indexOf(m)>-1&&(u[Z][0]=n[0]),X.indexOf(b)>-1&&(u[Z][1]=n[1]))}),m&&(u[1][0]=n[0]/2,u[5][0]=n[0]/2),b&&(u[3][1]=n[1]/2,u[7][1]=n[1]/2)}else o&&!c?d.forEach(function(O){var Z=O==="n"||O==="s";t.forEach(function(X,q){var W=X.direction,ee=X.horizontal,ie=X.vertical;!W||W.indexOf(O)===-1||(u[q]=[Z||!ee?0:n[0],!Z||!ie?0:n[1]])})}):u[e]=n;return u}function UK(t,e){var n=ne(hO(t,e),2),r=n[0],i=n[1],a=e.datas,o=a.clipPath,c=a.clipIndex,u=o,d=u.type,h=u.poses,g=u.splitter,m=h.map(function(C){return C.pos});if(d==="polygon")m.splice(c,0,[r,i]);else if(d==="inset"){var b=MK.indexOf(c),_=OK.indexOf(c),w=h.length;if(jK(h,m,8,b,_,r,i,m[4][0],m[4][1],m[0][0],m[0][1]),w===h.length)return}else return;var E=qw(t,o,m),T="".concat(d,"(").concat(E.join(g),")");Pe(t,"onClip",ct(t,e,te({clipEventType:"added",clipType:d,poses:m,clipStyles:E,clipStyle:T,distX:0,distY:0},_r({clipPath:T},e))))}function FK(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,o=a.type,c=a.poses,u=a.splitter,d=c.map(function(b){return b.pos}),h=d.length;if(o==="polygon")c.splice(i,1),d.splice(i,1);else if(o==="inset"){if(i<8||(PK(c,d,i,8,h),h===c.length))return}else return;var g=qw(t,r,d),m="".concat(o,"(").concat(g.join(u),")");Pe(t,"onClip",ct(t,e,te({clipEventType:"removed",clipType:o,poses:d,clipStyles:g,clipStyle:m,distX:0,distY:0},_r({clipPath:m},e))))}var GK={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,o=n.zoom,c=n.groupable,u=t.getState(),d=u.target,h=u.width,g=u.height,m=u.allMatrix,b=u.is3d,_=u.left,w=u.top,E=u.pos1,T=u.pos2,C=u.pos3,N=u.pos4,V=u.clipPathState,P=u.snapBoundInfos,M=u.rotation;if(!d||c)return[];var A=AR(d,h,g,i||"inset",V||r);if(!A)return[];var k=b?4:3,D=A.type,j=A.poses,L=j.map(function(Be){var Ve=an(m,Be.pos,k);return[Ve[0]-_,Ve[1]-w]}),U=[],O=[],Z=D==="rect",X=D==="inset",q=D==="polygon";if(Z||X||q){var W=X?L.slice(0,8):L;O=W.map(function(Be,Ve){var Se=Ve===0?W[W.length-1]:W[Ve-1],ze=_n(Se,Be),Ie=HO(Se,Be);return e.createElement("div",{key:"clipLine".concat(Ve),className:Fe("line","clip-line","snap-control"),"data-clip-index":Ve,style:{width:"".concat(Ie,"px"),transform:"translate(".concat(Se[0],"px, ").concat(Se[1],"px) rotate(").concat(ze,"rad) scaleY(").concat(o,")")}})})}if(U=L.map(function(Be,Ve){return e.createElement("div",{key:"clipControl".concat(Ve),className:Fe("control","clip-control","snap-control"),"data-clip-index":Ve,style:{transform:"translate(".concat(Be[0],"px, ").concat(Be[1],"px) rotate(").concat(M,"rad) scale(").concat(o,")")}})}),X&&U.push.apply(U,Ce([],ne(L.slice(8).map(function(Be,Ve){return e.createElement("div",{key:"clipRadiusControl".concat(Ve),className:Fe("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Ve,style:{transform:"translate(".concat(Be[0],"px, ").concat(Be[1],"px) rotate(").concat(M,"rad) scale(").concat(o,")")}})})),!1)),D==="circle"||D==="ellipse"){var ee=A.left,ie=A.top,$=A.radiusX,F=A.radiusY,Y=ne(He(an(m,[ee,ie],k),an(m,[0,0],k)),2),J=Y[0],K=Y[1],oe="none";if(!a){for(var ce=Math.max(10,$/5,F/5),me=[],ge=0;ge<=ce;++ge){var Te=Math.PI*2/ce*ge;me.push([$+($-o)*Math.cos(Te),F+(F-o)*Math.sin(Te)])}me.push([$,-2]),me.push([-2,-2]),me.push([-2,F*2+2]),me.push([$*2+2,F*2+2]),me.push([$*2+2,-2]),me.push([$,-2]),oe="polygon(".concat(me.map(function(Be){return"".concat(Be[0],"px ").concat(Be[1],"px")}).join(", "),")")}U.push(e.createElement("div",{key:"clipEllipse",className:Fe("clip-ellipse","snap-control"),style:{width:"".concat($*2,"px"),height:"".concat(F*2,"px"),clipPath:oe,transform:"translate(".concat(-_+J,"px, ").concat(-w+K,"px) ").concat($0(m))}}))}if(a){var Ne=Ti(Ce([E,T,C,N],ne(L),!1)),ae=Ne.width,Ae=Ne.height,De=Ne.left,Me=Ne.top;if(q||Z||X){var me=X?L.slice(0,8):L;U.push(e.createElement("div",{key:"clipArea",className:Fe("clip-area","snap-control"),style:{width:"".concat(ae,"px"),height:"".concat(Ae,"px"),transform:"translate(".concat(De,"px, ").concat(Me,"px)"),clipPath:"polygon(".concat(me.map(function(Ve){return"".concat(Ve[0]-De,"px ").concat(Ve[1]-Me,"px")}).join(", "),")")}}))}}return P&&["vertical","horizontal"].forEach(function(Be){var Ve=P[Be],Se=Be==="horizontal";Ve.isSnap&&O.push.apply(O,Ce([],ne(Ve.snap.posInfos.map(function(ze,Ie){var Le=ze.pos,st=He(an(m,Se?[0,Le]:[Le,0],k),[_,w]),wt=He(an(m,Se?[h,Le]:[Le,g],k),[_,w]);return ih(e,"",st,wt,o,"clip".concat(Be,"snap").concat(Ie),"guideline")})),!1)),Ve.isBound&&O.push.apply(O,Ce([],ne(Ve.bounds.map(function(ze,Ie){var Le=ze.pos,st=He(an(m,Se?[0,Le]:[Le,0],k),[_,w]),wt=He(an(m,Se?[h,Le]:[Le,g],k),[_,w]);return ih(e,"",st,wt,o,"clip".concat(Be,"bounds").concat(Ie),"guideline","bounds","bold")})),!1))}),Ce(Ce([],ne(U),!1),ne(O),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,te(te({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,o=n.target,c=n.width,u=n.height,d=e.inputEvent?e.inputEvent.target:null,h=d&&d.getAttribute("class")||"",g=e.datas,m=AR(o,c,u,i||"inset",a);if(!m)return!1;var b=m.clipText,_=m.type,w=m.poses,E=Pe(t,"onClipStart",ct(t,e,{clipType:_,clipStyle:b,poses:w.map(function(T){return T.pos})}));return E===!1?(g.isClipStart=!1,!1):(g.isControl=h&&h.indexOf("clip-control")>-1,g.isLine=h.indexOf("clip-line")>-1,g.isArea=h.indexOf("clip-area")>-1||h.indexOf("clip-ellipse")>-1,g.clipIndex=d?parseInt(d.getAttribute("data-clip-index"),10):-1,g.clipPath=m,g.isClipStart=!0,n.clipPathState=b,ic(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,o=e.originalDatas,c=e.isDragTarget;if(!a.isClipStart)return!1;var u=a,d=u.isControl,h=u.isLine,g=u.isArea,m=u.clipIndex,b=u.clipPath;if(!b)return!1;var _=Zl(t.props,"clippable"),w=_.keepRatio,E=0,T=0,C=o.draggable,N=Ua(e);c&&C?(n=ne(C.prevBeforeDist,2),E=n[0],T=n[1]):(r=ne(N,2),E=r[0],T=r[1]);var V=[E,T],P=t.state,M=P.width,A=P.height,k=!g&&!d&&!h,D=b.type,j=b.poses,L=b.splitter,U=j.map(function(ft){return ft.pos});k&&(E=-E,T=-T);var O=!d||j[m].direction==="nesw",Z=D==="inset"||D==="rect",X=j.map(function(){return[0,0]});if(d&&!O){var q=j[m],W=q.horizontal,ee=q.vertical,ie=[E*we(W),T*we(ee)];X=BK(j,m,ie,Z,w)}else O&&(X=U.map(function(){return[E,T]}));var $=U.map(function(ft,nn){return At(ft,X[nn])}),F=Ce([],ne($),!1);P.snapBoundInfos=null;var Y=b.type==="circle",J=b.type==="ellipse";if(Y||J){var K=Ti($),oe=we(K.bottom-K.top),ce=we(J?K.right-K.left:oe),me=$[0][1]+oe,ge=$[0][0]-ce,Te=$[0][0]+ce;Y&&(F.push([Te,K.bottom]),X.push([1,0])),F.push([K.left,me]),X.push([0,1]),F.push([ge,K.bottom]),X.push([1,0])}var Ne=LO((_.clipHorizontalGuidelines||[]).map(function(ft){return Ft("".concat(ft),A)}),(_.clipVerticalGuidelines||[]).map(function(ft){return Ft("".concat(ft),M)}),M,A),ae=[],Ae=[];if(Y||J)ae=[F[4][0],F[2][0]],Ae=[F[1][1],F[3][1]];else if(Z){var De=[F[0],F[2],F[4],F[6]],Me=[X[0],X[2],X[4],X[6]];ae=De.filter(function(ft,nn){return Me[nn][0]}).map(function(ft){return ft[0]}),Ae=De.filter(function(ft,nn){return Me[nn][1]}).map(function(ft){return ft[1]})}else ae=F.filter(function(ft,nn){return X[nn][0]}).map(function(ft){return ft[0]}),Ae=F.filter(function(ft,nn){return X[nn][1]}).map(function(ft){return ft[1]});var Be=[0,0],Ve=uR(Ne,_.clipTargetBounds&&{left:0,top:0,right:M,bottom:A},ae,Ae,5,5),Se=Ve.horizontal,ze=Ve.vertical,Ie=Se.offset,Le=ze.offset;if(Se.isBound&&(Be[1]+=Ie),ze.isBound&&(Be[0]+=Le),(J||Y)&&X[0][0]===0&&X[0][1]===0){var K=Ti($),st=K.bottom-K.top,wt=J?K.right-K.left:st,Qe=ze.isBound?we(Le):ze.snapIndex===0?-Le:Le,ut=Se.isBound?we(Ie):Se.snapIndex===0?-Ie:Ie;wt-=Qe,st-=ut,Y&&(st=NO(ze,Se)>0?st:wt,wt=st);var Rt=F[0];F[1][1]=Rt[1]-st,F[2][0]=Rt[0]+wt,F[3][1]=Rt[1]+st,F[4][0]=Rt[0]-wt}else if(Z&&w&&d){var cn=ne(cP(j),2),It=cn[0],wn=cn[1],Br=It&&wn?It/wn:0,na=j[m],Fa=na.direction||"",Ns=F[1][1],me=F[5][1],ge=F[7][0],Te=F[3][0];we(Ie)<=we(Le)?Ie=br(Ie)*we(Le)/Br:Le=br(Le)*we(Ie)*Br,Fa.indexOf("w")>-1?ge-=Le:Fa.indexOf("e")>-1?Te-=Le:(ge+=Le/2,Te-=Le/2),Fa.indexOf("n")>-1?Ns-=Ie:Fa.indexOf("s")>-1?me-=Ie:(Ns+=Ie/2,me-=Ie/2);var Ur=Xm(Ns,Te,me,ge);F.forEach(function(Fr,ni){var pr;pr=ne(Ur[ni].pos,2),Fr[0]=pr[0],Fr[1]=pr[1]})}else F.forEach(function(ft,nn){var rn=X[nn];rn[0]&&(ft[0]-=Le),rn[1]&&(ft[1]-=Ie)});var Sn=qw(t,b,$),ar="".concat(D,"(").concat(Sn.join(L),")");if(P.clipPathState=ar,Y||J)ae=[F[4][0],F[2][0]],Ae=[F[1][1],F[3][1]];else if(Z){var De=[F[0],F[2],F[4],F[6]];ae=De.map(function(nn){return nn[0]}),Ae=De.map(function(nn){return nn[1]})}else ae=F.map(function(ft){return ft[0]}),Ae=F.map(function(ft){return ft[1]});if(P.snapBoundInfos=uR(Ne,_.clipTargetBounds&&{left:0,top:0,right:M,bottom:A},ae,Ae,1,1),C){var tn=P.is3d,sc=P.allMatrix,Is=tn?4:3,Ms=Be;c&&(Ms=[V[0]+Be[0]-N[0],V[1]+Be[1]-N[1]]),C.deltaOffset=Gt(sc,[Ms[0],Ms[1],0,0],Is)}return Pe(t,"onClip",ct(t,e,te({clipEventType:"changed",clipType:D,poses:$,clipStyle:ar,clipStyles:Sn,distX:E,distY:T},_r((i={},i[D==="rect"?"clip":"clipPath"]=ar,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,o=r.isClipStart,c=r.isControl;return o?(Pe(t,"onClipEnd",ei(t,e,{})),i&&(c?FK(t,e):a&&UK(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},$K={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":Un(e.inputEvent.target,Fe("origin"))},dragControlStart:function(t,e){var n=e.datas;ic(t,e);var r=ct(t,e,{dragStart:yr.dragStart(t,new Nu().dragStart([0,0],e))}),i=Pe(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=ne(Ua(e),2),o=a[0],c=a[1],u=t.state,d=u.width,h=u.height,g=u.offsetMatrix,m=u.targetMatrix,b=u.is3d,_=t.props.originRelative,w=_===void 0?!0:_,E=b?4:3,T=[o,c];if(i){var C=e.distOrigin;(C[0]||C[1])&&(T=C)}var N=At(n.startOrigin,T),V=At(n.startTargetOrigin,T),P=He(T,n.prevOrigin),M=Fh(g,m,N,E),A=t.getRect(),k=Ti(ac(M,d,h,E)),D=[A.left-k.left,A.top-k.top];n.prevOrigin=T;var j=[Fi(V[0],d,w),Fi(V[1],h,w)].join(" "),L=yr.drag(t,Uh(e,t.state,D,!!r)),U=ct(t,e,te(te({width:d,height:h,origin:N,dist:T,delta:P,transformOrigin:j,drag:L},_r({transformOrigin:j,transform:L.transform},e)),{afterTransform:L.transform}));return Pe(t,"onDragOrigin",U),U},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Pe(t,"onDragOriginEnd",ei(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(c){return"deltaOrigin"in c?(o[0]+=c.deltaOrigin[0],o[1]+=c.deltaOrigin[1]):"origin"in c?(o[0]=c.origin[0]-a[0],o[1]=c.origin[1]-a[1]):("x"in c?r=c.x-n.left:"deltaX"in c&&(r+=c.deltaX),"y"in c?i=c.y-n.top:"deltaY"in c&&(i+=c.deltaY)),{datas:e,distX:r,distY:i,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function HK(t,e,n,r){var i=t.filter(function(u){var d=u.virtual,h=u.horizontal;return h&&!d}).length,a=t.filter(function(u){var d=u.virtual,h=u.vertical;return h&&!d}).length,o=-1;if(e===0&&(i===0?o=0:i===1&&(o=1)),e===2&&(i<=2?o=2:i<=3&&(o=3)),e===3&&(a===0?o=4:a<4&&(o=7)),e===1&&(a<=1?o=5:a<=2&&(o=6)),!(o===-1||!t[o].virtual)){var c=t[o];qK(t,o),o<4?c.pos[0]=n:c.pos[1]=r}}function qK(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function YK(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function CR(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=$o(t),lP(a,e,n,0,0,r,i)}function kR(t,e,n,r,i){var a=t.state,o=a.width,c=a.height,u=Hw(i,t.props.roundRelative,o,c),d=u.raws,h=u.styles,g=u.radiusPoses,m=VK(g,d),b=m.horizontals,_=m.verticals,w=h.join(" ");a.borderRadiusState=w;var E=ct(t,e,te({horizontals:b,verticals:_,borderRadius:w,width:o,height:c,delta:r,dist:n},_r({borderRadius:w},e)));return Pe(t,"onRound",E),E}function RR(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],o=t.getTargets()[0];o&&(a?.props.target===o?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=Bw(o).borderRadius,r.borderRadius=i))}return i}var XK={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Fe("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,o=n.allMatrix,c=n.is3d,u=n.left,d=n.top,h=n.borderRadiusState,g=t.props,m=g.minRoundControls,b=m===void 0?[0,0]:m,_=g.maxRoundControls,w=_===void 0?[4,4]:_,E=g.zoom,T=g.roundPadding,C=T===void 0?0:T,N=g.isDisplayShadowRoundControls,V=g.groupable;if(!r)return null;var P=h||RR(t),M=c?4:3,A=CR(P,i,a,b,!0);if(!A)return null;var k=0,D=0,j=V?[0,0]:[u,d];return A.map(function(L,U){var O=L.horizontal,Z=L.vertical,X=L.direction||"",q=Ce([],ne(L.pos),!1);D+=Math.abs(O),k+=Math.abs(Z),O&&X.indexOf("n")>-1&&(q[1]-=C),Z&&X.indexOf("w")>-1&&(q[0]-=C),O&&X.indexOf("s")>-1&&(q[1]+=C),Z&&X.indexOf("e")>-1&&(q[0]+=C);var W=He(an(o,q,M),j),ee=N&&N!=="horizontal",ie=L.vertical?k<=w[1]&&(ee||!L.virtual):D<=w[0]&&(N||!L.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(U),className:Fe("control","border-radius",L.vertical?"vertical":"",L.virtual?"virtual":""),"data-radius-index":U,style:{display:ie?"block":"none",transform:"translate(".concat(W[0],"px, ").concat(W[1],"px) scale(").concat(E,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,c=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=o?parseInt(i.getAttribute("data-radius-index"),10):-1,d=-1;if(c){var h=i.getAttribute("data-line-key")||"";h&&(d=parseInt(h.replace(/render-line-/g,""),10),isNaN(d)&&(d=-1))}if(!o&&!c)return!1;var g=ct(t,e,{}),m=Pe(t,"onRoundStart",g);if(m===!1)return!1;r.lineIndex=d,r.controlIndex=u,r.isControl=o,r.isLine=c,ic(t,e);var b=t.props,_=b.roundRelative,w=b.minRoundControls,E=w===void 0?[0,0]:w,T=t.state,C=T.width,N=T.height;r.isRound=!0,r.prevDist=[0,0];var V=RR(t),P=CR(V||"",C,N,E,!0)||[];return r.controlPoses=P,T.borderRadiusState=Hw(P,_,C,N).styles.join(" "),g},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=ne(Ua(e),2),o=a[0],c=a[1],u=[o,c],d=He(u,n.prevDist),h=t.props.maxRoundControls,g=h===void 0?[4,4]:h,m=t.state,b=m.width,_=m.height,w=r[i],E=w.vertical,T=w.horizontal,C=r.map(function(V){var P=V.horizontal,M=V.vertical,A=[P*T*u[0],M*E*u[1]];if(P){if(g[0]===1)return A;if(g[0]<4&&P!==T)return A}else{if(g[1]===0)return A[1]=M*T*u[0]/b*_,A;if(E){if(g[1]===1)return A;if(g[1]<4&&M!==E)return A}}return[0,0]});C[i]=u;var N=r.map(function(V,P){return te(te({},V),{pos:At(V.pos,C[P])})});return i<4?N.slice(0,i+1).forEach(function(V){V.virtual=!1}):N.slice(4,i+1).forEach(function(V){V.virtual=!1}),n.prevDist=[o,c],kR(t,e,u,d,N)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,o=r.controlIndex,c=r.isLine,u=r.lineIndex,d=r.controlPoses,h=d.filter(function(T){var C=T.virtual;return C}).length,g=t.props.roundClickable,m=g===void 0?!0:g;if(i&&m){if(a&&(m===!0||m==="control"))YK(d,o);else if(c&&(m===!0||m==="line")){var b=ne(hO(t,e),2),_=b[0],w=b[1];HK(d,u,_,w)}h!==d.filter(function(T){var C=T.virtual;return C}).length&&kR(t,e,[0,0],[0,0],d)}var E=ei(t,e,{});return Pe(t,"onRoundEnd",E),n.borderRadiusState="",E},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=Yi(t,"roundable",e),o=te({targets:t.props.targets,events:a.map(function(c,u){return te(te({},c),{target:i[u],moveable:r[u],currentTarget:r[u]})})},n);return Pe(t,"onRoundGroupStart",o),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=Yi(t,"roundable",e),o=te({targets:t.props.targets,events:a.map(function(c,u){return te(te(te({},c),{target:i[u],moveable:r[u],currentTarget:r[u]}),_r({borderRadius:n.borderRadius},c))})},n);return Pe(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=Yi(t,"roundable",e);H0(t,"onRound",function(c){var u=te({targets:t.props.targets,events:i.map(function(d,h){return te(te(te({},d),{target:r[h],moveable:n[h],currentTarget:n[h]}),_r({borderRadius:c.borderRadius},d))})},c);Pe(t,"onRoundGroup",u)});var a=this.dragControlEnd(t,e);if(!a)return!1;var o=te({targets:t.props.targets,events:i.map(function(c,u){var d;return te(te({},c),{target:r[u],moveable:n[u],currentTarget:n[u],lastEvent:(d=c.datas)===null||d===void 0?void 0:d.lastEvent})})},a);return Pe(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function WK(t,e){var n=e?4:3,r=Kt(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var uP={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(eO(i,!0),")"),c=!a||a==="none"?o:a;e.datas.startTransforms=WK(c,r)?[]:$o(c)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ct(t,e,{setTransform:function(n){e.datas.startTransforms=Vn(n)?n:$o(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ct(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Pe(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Pe(t,"onBeforeRender",ct(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Pe(t,"onBeforeRenderEnd",ct(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=Yi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.setTransform(u,o),n.resetStyle(o),n.fillDragStartParams(u,o)});Pe(t,"onBeforeRenderGroupStart",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=Yi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.resetStyle(o),n.fillDragParams(u,o)});Pe(t,"onBeforeRenderGroup",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Pe(t,"onBeforeRenderGroupEnd",ct(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},dP={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Pe(t,"onRenderStart",ct(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Pe(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Pe(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Pe(t,"onRenderGroupStart",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=Yi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.fillDragParams(u,o)});Pe(t,"onRenderGroup",ct(t,e,te(te({isPinch:!!e.isPinch,targets:t.props.targets,transform:Ng(e),transformObject:{}},_r(Ig(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=Yi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.fillDragEndParams(u,o)});Pe(t,"onRenderGroupEnd",ct(t,e,te({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:Ng(e)},_r(Ig(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return Du(Um(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ct(t,e,te({isPinch:!!e.isPinch,transformObject:n,transform:Ng(e)},_r(Ig(e))))},fillDragEndParams:function(t,e){var n={};return Du(Um(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ct(t,e,te({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:Ng(e)},_r(Ig(e))))}};function Pf(t,e,n,r,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var c=i==="Start",u=i==="End",d=i==="After",h=t.state.target,g=a.isRequest,m=r.indexOf("Control")>-1;if(!h||c&&m&&!g&&t.areaElement===a.inputEvent.target)return!1;var b=Ce([],ne(e),!1);if(g){var _=a.requestAble;b.some(function(U){return U.name===_})||b.push.apply(b,Ce([],ne(t.props.ables.filter(function(U){return U.name===_})),!1))}if(!b.length||b.every(function(U){return U.dragRelation}))return!1;var w=a.inputEvent,E;u&&w&&(E=document.elementFromPoint(a.clientX,a.clientY)||w.target);var T=!1,C=function(){var U;T=!0,(U=a.stop)===null||U===void 0||U.call(a)},N=c&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());N&&t.updateRect(i,!0,!1);var V=a.datas,P=m?"controlGesto":"targetGesto",M=t[P],A=function(U,O,Z){if(!(O in U)||M!==t[P])return!1;var X=U.name,q=V[X]||(V[X]={});if(c&&(q.isEventStart=!Z||!U[Z]||U[Z](t,a)),!q.isEventStart)return!1;var W=U[O](t,te(te({},a),{stop:C,datas:q,originalDatas:V,inputTarget:E}));return t._emitter.off(),c&&W===!1&&(q.isEventStart=!1),W};N&&b.forEach(function(U){U.unset&&U.unset(t)}),A(uP,"drag".concat(r).concat(i));var k=0,D=0;n.forEach(function(U){if(T)return!1;var O="".concat(U).concat(r).concat(i),Z="".concat(U).concat(r,"Condition");i===""&&!g&&yK(t.state,a);var X=b.filter(function(ee){return ee[O]});X=X.filter(function(ee,ie){return ee.name&&X.indexOf(ee)===ie});var q=X.filter(function(ee){return A(ee,O,Z)}),W=q.length;T&&++k,W&&++D,!T&&c&&X.length&&!W&&(k+=X.filter(function(ee){var ie=ee.name,$=V[ie];return $.isEventStart?ee.dragRelation!=="strong":!1}).length?1:0)}),(!d||D)&&A(dP,"drag".concat(r).concat(i));var j=M!==t[P]||k===n.length;if((u||T||j)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(U){U.state.gestos={}}),b.forEach(function(U){U.unset&&U.unset(t)})),c&&!j&&!g&&D&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||j)return!1;if(!c&&D&&!o||u){var L=t.props.flushSync||FO;L(function(){t.updateRect(u?i:"",!0,!1),t.forceUpdate()})}return!c&&!u&&!d&&D&&!o&&Pf(t,e,n,r,i+"After",a),!0}function Yw(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,o=t.areaElement,c=t._dragTarget;return!c||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===c||c.contains(a)||a===o||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||Un(a,"moveable-area")||Un(a,"moveable-padding")||Un(a,"moveable-edgeDraggable")}}function fP(t,e,n){var r=t.controlBox,i=[],a=t.props,o=a.dragArea,c=t.state.target,u=a.dragTarget;i.push(r),(!o||u)&&i.push(e),!o&&u&&c&&e!==c&&a.dragTargetSelf&&i.push(c);var d=Yw(t);return pP(t,i,"targetAbles",n,{dragStart:d,pinchStart:d})}function hP(t,e){var n=t.controlBox,r=[];r.push(n);var i=Yw(t,!0),a=function(o,c){if(c===void 0&&(c=o.inputEvent.target),c===n)return!0;var u=i(o,c);return!u};return pP(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function pP(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",o=t.props,c=o.pinchOutside,u=o.pinchThreshold,d=o.preventClickEventOnDrag,h=o.preventClickDefault,g=o.checkInput,m=o.dragFocusedInput,b=o.preventDefault,_=b===void 0?!0:b,w=o.preventRightClick,E=w===void 0?!0:w,T=o.preventWheelClick,C=T===void 0?!0:T,N=o.dragContainer,V=Oa(N,!0),P={preventDefault:_,preventRightClick:E,preventWheelClick:C,container:V||Io(t.getControlBoxElement()),pinchThreshold:u,pinchOutside:c,preventClickEventOnDrag:a?d:!1,preventClickEventOnDragStart:a?h:!1,preventClickEventByCondition:a?null:function(k){return t.controlBox.contains(k.target)},checkInput:a?g:!1,dragFocusedInput:m},M=new wX(e,P),A=r==="Control";return["drag","pinch"].forEach(function(k){["Start","","End"].forEach(function(D){M.on("".concat(k).concat(D),function(j){var L,U=j.eventType,O=k==="drag"&&j.isPinch;if(i[U]&&!i[U](j)){j.stop();return}if(!O){var Z=k==="drag"?[k]:["drag",k],X=Ce([],ne(t[n]),!1),q=Pf(t,X,Z,r,D,j);q?(t.props.stopPropagation||D==="Start"&&A)&&((L=j?.inputEvent)===null||L===void 0||L.stopPropagation()):j.stop()}})})}),M}var KK=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var o=i.eventName,c=i.moveable;c.state.disableNativeEvent||i.ables.forEach(function(u){u[o](c,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function QK(t,e,n,r){var i;n===void 0&&(n=e);var a=bO(t,e),o=a.matrixes,c=a.is3d,u=a.targetMatrix,d=a.transformOrigin,h=a.targetOrigin,g=a.offsetContainer,m=a.hasFixed,b=a.zoom,_=dW(g,n),w=_.matrixes,E=_.is3d,T=_.offsetContainer,C=_.zoom,N=r,V=4,P=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,M=u,A=Kt(V),k=Kt(V),D=Kt(V),j=Kt(V),L=o.length,U=w.map(function(ie){return te(te({},ie),{matrix:ie.matrix?Ce([],ne(ie.matrix),!1):void 0})}).reverse();o.reverse(),!c&&N&&(M=Ji(M,3,4),y1(o)),!E&&N&&y1(U),U.forEach(function(ie){k=Gt(k,ie.matrix,V)});var O=n||Zo(t),Z=((i=U[0])===null||i===void 0?void 0:i.target)||ah(O,O,!0).offsetParent,X=U.slice(1).reduce(function(ie,$){return Gt(ie,$.matrix,V)},Kt(V));o.forEach(function(ie,$){if(L-2===$&&(D=A.slice()),L-1===$&&(j=A.slice()),!ie.matrix){var F=o[$+1],Y=pK(ie,F,Z,V,Gt(X,A,V));ie.matrix=Kl(Y,V)}A=Gt(A,ie.matrix,V)});var q=!P&&c;M||(M=Kt(q?4:3));var W=$0(P&&M.length===16?Ji(M,4,3):M,q),ee=k;return k=Z4(k,V,V),{hasZoom:b!==1||C!==1,hasFixed:m,matrixes:o,rootMatrix:k,originalRootMatrix:ee,beforeMatrix:D,offsetMatrix:j,allMatrix:A,targetMatrix:M,targetTransform:W,inlineTransform:t.style.transform,transformOrigin:d,targetOrigin:h,is3d:N,offsetContainer:g,offsetRootContainer:T}}function ZK(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,o=0,c={},u=qO(t);if(t&&(i=u.offsetWidth,a=u.offsetHeight),t){var d=QK(t,e,n,r),h=vu(d.allMatrix,d.transformOrigin,i,a);c=te(te({},d),h);var g=vu(d.allMatrix,[50,50],100,100);o=YO([g.pos1,g.pos2],g.direction)}var m=4;return te(te(te({hasZoom:!1,width:i,height:a,rotation:o},u),{originalRootMatrix:Kt(m),rootMatrix:Kt(m),beforeMatrix:Kt(m),offsetMatrix:Kt(m),allMatrix:Kt(m),targetMatrix:Kt(m),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),c)}function w1(t,e,n,r,i,a){a===void 0&&(a=[]);var o=1,c=[0,0],u=Og(),d=Og(),h=Og(),g=Og(),m=[0,0],b={},_=ZK(e,n,i,!0);if(e){var w=zr(e);a.forEach(function(U){b[U]=w(U)});var E=_.is3d?4:3,T=vu(_.offsetMatrix,At(_.transformOrigin,J4(_.targetMatrix,E)),_.width,_.height);o=T.direction,c=At(T.origin,[T.left-_.left,T.top-_.top]),g=Of(_.offsetRootContainer);var C=ah(r,r,!0).offsetParent||_.offsetRootContainer;if(_.hasZoom){var N=vu(Gt(_.originalRootMatrix,_.allMatrix),_.transformOrigin,_.width,_.height),V=vu(_.originalRootMatrix,Hm(zr(C)("transformOrigin")).map(function(U){return parseFloat(U)}),C.offsetWidth,C.offsetHeight);if(u=Fb(N,g),h=Fb(V,g,C,!0),t){var P=N.left,M=N.top;d=Fb({left:P,top:M,bottom:M,right:M},g)}}else{u=Of(e),h=uW(C),t&&(d=Of(t));var A=h.left,k=h.top,D=h.clientLeft,j=h.clientTop,L=[u.left-A,u.top-k];m=He(Ou(_.rootMatrix,L,4),[D+_.left,j+_.top])}}return te({targetClientRect:u,containerClientRect:h,moveableClientRect:d,rootContainerClientRect:g,beforeDirection:o,beforeOrigin:c,originalBeforeOrigin:c,target:e,style:b,offsetDelta:m},_)}function DR(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Ql([e,n,r,i]),o=[a.minX,a.minY],c=He(t.origin,o);return e=He(e,o),n=He(n,o),r=He(r,o),i=He(i,o),te(te({},t),{left:t.left,top:t.top,posDelta:o,pos1:e,pos2:n,pos3:r,pos4:i,origin:c,beforeOrigin:c,isPersisted:!0})}var Pu=(function(t){Lh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=te({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},w1(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new j0,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}hY(n._observerId),n._observerId=A4(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,o=n.target,c=n.zoom,u=n.cspNonce,d=n.translateZ,h=n.cssStyled,g=n.groupable,m=n.linePadding,b=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var _=ne(i||[0,0],2),w=_[0],E=_[1],T=r.left,C=r.top,N=r.target,V=r.direction,P=r.hasFixed,M=r.offsetDelta,A=n.targets,k=this.isDragging(),D={};this.getEnabledAbles().forEach(function(X){D["data-able-".concat(X.name.toLowerCase())]=!0});var j=this._getAbleClassName(),L=A&&A.length&&(N||g)||o||!this._hasFirstTarget&&this.state.isPersisted,U=this.controlBox||this.props.firstRenderState||this.props.persistData,O=[T-w,C-E];!g&&n.useAccuratePosition&&(O[0]+=M[0],O[1]+=M[1]);var Z={position:P?"fixed":"absolute",display:L?"block":"none",visibility:U?"visible":"hidden",transform:"translate3d(".concat(O[0],"px, ").concat(O[1],"px, ").concat(d,")"),"--zoom":c,"--zoompx":"".concat(c,"px")};return m&&(Z["--moveable-line-padding"]=m),b&&(Z["--moveable-control-padding"]=b),qi(h,te({cspNonce:u,ref:vs(this,"controlBox"),className:"".concat(Fe("control-box",V===-1?"reverse":"",k?"dragging":"")," ").concat(j," ").concat(a)},D,{onClick:this._onPreventClick,style:Z}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),lu(this,!1),lu(this,!0);var a=this.events;for(var o in a){var c=a[o];c&&c.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Vr(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(kw)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&Yw(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,o=r.pos2,c=r.pos3,u=r.pos4,d=r.targetClientRect;if(!i)return 0;var h;if(Zu(n)){var g=n.getBoundingClientRect();h={left:g.left,top:g.top,width:g.width,height:g.height}}else h=te({width:0,height:0},n);var m=h.left,b=h.top,_=h.width,w=h.height,E=Jk([a,o,u,c],d),T=mX(E,[[m,b],[m+_,b],[m+_,b+w],[m,b+w]]),C=rO(E);return!T||!C?0:Math.min(100,T/C*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,o=i.pos1,c=i.pos2,u=i.pos3,d=i.pos4,h=i.targetClientRect;return a?a1([n,r],Jk([o,c,d,u],h)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,o=!a.parentPosition&&!a.wrapperMoveable;o&&Iu(!0);var c=a.parentMoveable,u=this.state,d=u.target||a.target,h=this.getContainer(),g=c?c._rootContainer:this._rootContainer,m=w1(this.controlBox,d,h,h,g||h,this._getRequestStyles());if(!d&&this._hasFirstTarget&&a.persistData){var b=DR(a.persistData);for(var _ in b)m[_]=b[_]}o&&Iu(),this.updateState(m,c?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,o=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var c=a.getEventData();return!!(!((r=c[n])===null||r===void 0)&&r.isEventStart)}if(o?.isFlag()){if(!n)return!0;var c=o.getEventData();return!!(!((i=c[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=ki(this.state),i=ne(r,4),a=i[0],o=i[1],c=i[2],u=i[3],d=Ti(r),h=n.width,g=n.height,m=d.width,b=d.height,_=d.left,w=d.top,E=[n.left,n.top],T=At(E,n.origin),C=At(E,n.beforeOrigin),N=n.transformOrigin;return{width:m,height:b,left:_,top:w,pos1:a,pos2:o,pos3:c,pos4:u,offsetWidth:h,offsetHeight:g,beforeOrigin:C,origin:T,transformOrigin:N,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&b1(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&b1(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return _K(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,o=a.props,c=o.parentMoveable||o.wrapperMoveable||a,u=c.props.ables,d=o.groupable,h=Vr(u,function(T){return T.name===n});if(this.isDragging()||!h||!h.request)return{request:function(){return this},requestEnd:function(){return this}};var g=h.request(a),m=i||r.isInstant,b=g.isControl?"controlAbles":"targetAbles",_="".concat(d?"Group":"").concat(g.isControl?"Control":""),w=Ce([],ne(c[b]),!1),E={request:function(T){return Pf(a,w,["drag"],_,"",te(te({},g.request(T)),{requestAble:n,isRequest:!0}),m),E},requestEnd:function(){return Pf(a,w,["drag"],_,"End",te(te({},g.requestEnd()),{requestAble:n,isRequest:!0}),m),E}};return Pf(a,w,["drag"],_,"Start",te(te({},g.requestStart(r)),{requestAble:n,isRequest:!0}),m),m?E.request(r).requestEnd():E},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,o=n.transformOrigin,c=n.allMatrix,u=n.is3d,d=n.pos1,h=n.pos2,g=n.pos3,m=n.pos4,b=n.left,_=n.top,w=n.isPersisted,E=r.zoom||1;if(!i&&E<=1){n.renderPoses=[d,h,g,m],n.renderLines=[[d,h],[h,m],[m,g],[g,d]];return}var T=rP(i||{}),C=T.left,N=T.top,V=T.bottom,P=T.right,M=u?4:3,A=[];w?A=o:this.controlBox&&r.groupable?A=a:A=At(a,[b,_]);var k=Lm(M,Kl(A.map(function(Z){return-Z}),M),c,Kl(o,M)),D=mi(k,d,[-C,-N],M),j=mi(k,h,[P,-N],M),L=mi(k,g,[-C,V],M),U=mi(k,m,[P,V],M);n.renderPoses=[D,j,L,U],n.renderLines=[[D,j],[j,U],[U,L],[L,D]];{var O=E/2;n.renderLines=[[mi(k,d,[-C-O,-N],M),mi(k,h,[P+O,-N],M)],[mi(k,h,[P,-N-O],M),mi(k,m,[P,V+O],M)],[mi(k,m,[P+O,V],M),mi(k,g,[-C-O,V],M)],[mi(k,g,[-C,V+O],M),mi(k,d,[-C,-N-O],M)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,o=this.state,c=o.target,u=o.container;if(!(!c&&!r)){this.updateAbles();var d=!x1(c,r),h=d||!x1(u,i);if(h){var g=i||this.controlBox;g&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&g&&this.updateRect("End",!1,!1),this._isPropTargetChanged=d}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=sO(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,o=r.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&a){var c=DR(a);if(c)return this.updateState(c,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,o=this.getEnabledAbles(n),c="drag".concat(r,"Start"),u="pinch".concat(r,"Start"),d="drag".concat(r,"ControlStart"),h=Pg(o,[c,u],a),g=Pg(o,[d],a);this.enabledAbles=o,this.targetAbles=h,this.controlAbles=g},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:qi};return this.renderState={},vK(JO(Pg(this.getEnabledAbles(),["render"],i).map(function(o){var c=o.render;return c(n,a)||[]})).filter(function(o){return o}),function(o){var c=o.key;return c}).map(function(o){return o[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return Ce(Ce([],ne(r),!1),ne(c),!1)},Ce([],ne(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(lu(this,!1),this.updateState({gestos:{}})),r||lu(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=fP(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=hP(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=Oa(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,o=r.hideChildMoveableDefaultLines,c=r.parentMoveable;if(a||c&&o)return[];var u=this.getState(),d={createElement:qi};return u.renderLines.map(function(h,g){return ih(d,"",h[0],h[1],i,"render-line-".concat(g))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,o=this._prevDragArea,c=r.dragArea,u=!c&&a!==i,d=(n||c)&&o!==c;return u||d||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,o=ks(a);if(this._isTargetChanged())for(var c in a){var u=a[c];u&&u.destroy(),a[c]=null}if(i){var d=this.enabledAbles;o.forEach(function(h){var g=Pg(d,[h]),m=g.length>0,b=a[h];if(!m){b&&(b.destroy(),a[h]=null);return}b||(b=new KK(i,n,h),a[h]=b),b.setAbles(g)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=Oa(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=Oa(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Ce(Ce([],ne(this._getAbleViewClassNames()),!1),[this.isDragging()?kK:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=ZO(n.filter(Boolean),function(d){return d}).map(function(d){var h=ne(d,1),g=h[0];return g}),a=this._viewClassNames,o=Oh(a,i),c=o.removed,u=o.added;c.forEach(function(d){N4(r,a[d])}),u.forEach(function(d){D4(r,i[d])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,o=this.controlGesto,c=a?.isFlag()?a.getEventData():{},u=o?.isFlag()?o.getEventData():{};return i.map(function(d){var h,g,m,b=d.name,_=((h=d.className)===null||h===void 0?void 0:h.call(d,r))||"";return(!((g=c[b])===null||g===void 0)&&g.isEventStart||!((m=u[b])===null||m===void 0)&&m.isEventStart)&&(_+=" ".concat(Fe("".concat(b).concat(n,"-dragging")))),_.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,o=Io(this.getControlBoxElement());if(!o.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var c=new o.ResizeObserver(this.checkUpdateRect);c.observe(a,{box:"border-box"}),this._reiszeObserver=c}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,o=a.target,c=Io(this.getControlBoxElement());if(!c.MutationObserver||!o||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===o&&this._mutationObserver)){var u=new c.MutationObserver(function(d){var h,g;try{for(var m=MX(d),b=m.next();!b.done;b=m.next()){var _=b.value;_.type==="attributes"&&_.attributeName==="style"&&r.checkUpdateRect()}}catch(w){h={error:w}}finally{try{b&&!b.done&&(g=m.return)&&g.call(m)}finally{if(h)throw h.error}}});u.observe(o,{attributes:!0}),this._mutationObserver=u}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:FO,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(z4),Xw={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),o=a.left,c=a.top,u=a.isPersisted,d=r.zoom||1,h=t.renderGroupRects,g=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];u?i=g.map(function(){return null}):g=[];var m=cu(t,"parentPosition",[o,c],function(_){return _.join(",")}),b=cu(t,"requestStyles",t.getRequestChildStyles(),function(_){return _.join(",")});return t.moveables=t.moveables.slice(0,i.length),Ce(Ce([],ne(i.map(function(_,w){return e.createElement(Pu,{key:"moveable"+w,ref:w4(t,"moveables",w),target:_,origin:!1,requestStyles:b,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,c],persistData:g[w],zoom:d})})),!1),ne(JO(h.map(function(_,w){var E=_.pos1,T=_.pos2,C=_.pos3,N=_.pos4,V=[E,T,C,N];return[[0,1],[1,3],[3,2],[2,0]].map(function(P,M){var A=ne(P,2),k=A[0],D=A[1];return ih(e,"",He(V[k],m),He(V[D],m),d,"group-rect-".concat(w,"-").concat(M))})}))),!1)}},JK=Bh("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),o=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||o)){var c=n.contains(i);Pe(t,"onClick",ct(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:c}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),o=a>-1,c=!1;a===-1&&(a=Cs(i,function(u){return u.contains(r)}),c=a>-1),Pe(t,"onClickGroup",ct(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:o,containsTarget:c,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Yc(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),te(te({},t),{datas:e})}var eQ=Bh("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?wO(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Un(i,Fe("direction"))&&Un(i,Fe("edge"))&&Un(i,Fe("edgeDraggable"))},dragStart:function(t,e){return yr.dragStart(t,Yc(e))},drag:function(t,e){return yr.drag(t,Yc(e))},dragEnd:function(t,e){return yr.dragEnd(t,Yc(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Un(i,Fe("direction"))&&Un(i,Fe("line"))},dragGroupStart:function(t,e){return yr.dragGroupStart(t,Yc(e))},dragGroup:function(t,e){return yr.dragGroup(t,Yc(e))},dragGroupEnd:function(t,e){return yr.dragGroupEnd(t,Yc(e))},unset:function(t){return yr.unset(t)}}),gP={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},Ww=[uP,sP,iK,SK,yr,eQ,g1,EK,AK,BW,NK,IK,RK,$K,GK,XK,Xw,gP,JK,aP,dP],tQ=Ww.reduce(function(t,e){return(e.events||[]).forEach(function(n){R4(t,n)}),t},[]),nQ=Ww.reduce(function(t,e){return(e.props||[]).forEach(function(n){R4(t,n)}),t},[]);function NR(t,e){var n=ne(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function zg(t,e){var n=ne(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function IR(t,e){return Math.max.apply(Math,Ce([],ne(t.map(function(n){var r=ne(n,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.max(i[e],a[e],o[e],c[e])})),!1))}function MR(t,e){return Math.min.apply(Math,Ce([],ne(t.map(function(n){var r=ne(n,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.min(i[e],a[e],o[e],c[e])})),!1))}function rQ(t,e){var n,r,i,a=[0,0],o=[0,0],c=[0,0],u=[0,0],d=0,h=0;if(!t.length)return{pos1:a,pos2:o,pos3:c,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:d,height:h,rotation:e};var g=rt(e,Er);if(g%90){var m=g/180*Math.PI,b=Math.tan(m),_=-1/b,w=[d1,nR],E=[[0,0],[0,0]],T=[d1,nR],C=[[0,0],[0,0]];t.forEach(function(J){J.forEach(function(K){var oe=NR([-b,1,0],K),ce=NR([-_,1,0],K);w[0]>oe&&(E[0]=K,w[0]=oe),w[1]<oe&&(E[1]=K,w[1]=oe),T[0]>ce&&(C[0]=K,T[0]=ce),T[1]<ce&&(C[1]=K,T[1]=ce)})});var N=ne(E,2),V=N[0],P=N[1],M=ne(C,2),A=M[0],k=M[1],D=[-b,1,zg([-b,1],V)],j=[-b,1,zg([-b,1],P)],L=[-_,1,zg([-_,1],A)],U=[-_,1,zg([-_,1],k)];n=ne([[D,L],[D,U],[j,L],[j,U]].map(function(J){var K=ne(J,2),oe=K[0],ce=K[1];return Aw(oe,ce)[0]}),4),a=n[0],o=n[1],c=n[2],u=n[3],d=T[1]-T[0],h=w[1]-w[0]}else{var O=MR(t,0),Z=MR(t,1),X=IR(t,0),q=IR(t,1);if(a=[O,Z],o=[X,Z],c=[O,q],u=[X,q],d=X-O,h=q-Z,g%180){var W=[c,a,u,o];r=ne(W,4),a=r[0],o=r[1],c=r[2],u=r[3],d=q-Z,h=X-O}}if(g%360>180){var W=[u,c,o,a];i=ne(W,4),a=i[0],o=i[1],c=i[2],u=i[3]}var ee=Ql([a,o,c,u]),ie=ee.minX,$=ee.minY,F=ee.maxX,Y=ee.maxY;return{pos1:a,pos2:o,pos3:c,pos4:u,width:d,height:h,minX:ie,minY:$,maxX:F,maxY:Y,rotation:e}}function mP(t,e){var n=e.map(function(r){if(Vn(r)){var i=mP(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var o=Vr(t,function(c){var u=c.manager;return u.props.target===r});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return n.length===1&&Vn(n[0])?n[0]:n}var iQ=(function(t){Lh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new nO,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;Iu(!0),this.moveables.forEach(function(ge){ge.updateRect(n,!1,!1)});var c=this.props,u=this.moveables,d=o.target||c.target,h=u.map(function(ge){return{finded:!1,manager:ge}}),g=this.props.targetGroups||[],m=mP(h,g),b=c.useDefaultGroupRotate;m.push.apply(m,Ce([],ne(h.filter(function(ge){var Te=ge.finded;return!Te}).map(function(ge){var Te=ge.manager;return Te})),!1));var _=[],w=!r||n!==""&&c.updateGroup,E=c.defaultGroupRotate||0;if(!this._hasFirstTargets){var T=(a=c.persistData)===null||a===void 0?void 0:a.rotation;T!=null&&(E=T)}function C(ge,Te,Ne){var ae=ge.map(function(ze){if(Vn(ze)){var Ie=C(ze,Te),Le=[Ie.pos1,Ie.pos2,Ie.pos3,Ie.pos4];return _.push(Ie),{poses:Le,rotation:Ie.rotation}}else return{poses:ki(ze.state),rotation:ze.getRotation()}}),Ae=ae.map(function(ze){var Ie=ze.rotation;return Ie}),De=0,Me=Ae[0],Be=Ae.every(function(ze){return Math.abs(Me-ze)<.1});w?De=!b&&Be?Me:E:De=!b&&!Ne&&Be?Me:Te;var Ve=ae.map(function(ze){var Ie=ze.poses;return Ie}),Se=rQ(Ve,De);return Se}var N=C(m,this.rotation,!0);w&&(this.rotation=N.rotation,this.transformOrigin=c.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=g,this.renderGroupRects=_;var V=this.transformOrigin,P=this.rotation,M=this.scale,A=N.width,k=N.height,D=N.minX,j=N.minY,L=wK([[0,0],[A,0],[0,k],[A,k]],$w(V,A,k),this.rotation/180*Math.PI),U=Ql(L.result),O=U.minX,Z=U.minY,X=" rotate(".concat(P,"deg)")+" scale(".concat(br(M[0]),", ").concat(br(M[1]),")"),q="translate(".concat(-O,"px, ").concat(-Z,"px)").concat(X);this.controlBox.style.transform="translate3d(".concat(D,"px, ").concat(j,"px, ").concat(this.props.translateZ||0,")"),d.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(V,";")+"width:".concat(A,"px;height:").concat(k,"px;")+"transform: ".concat(q),o.width=A,o.height=k;var W=this.getContainer(),ee=w1(this.controlBox,d,this.controlBox,this.getContainer(),this._rootContainer||W,[]),ie=[ee.left,ee.top],$=ne(ki(ee),4),F=$[0],Y=$[1],J=$[2],K=$[3],oe=Ql([F,Y,J,K]),ce=[oe.minX,oe.minY],me=br(M[0]*M[1]);ee.pos1=He(F,ce),ee.pos2=He(Y,ce),ee.pos3=He(J,ce),ee.pos4=He(K,ce),ee.left=D-ee.left+ce[0],ee.top=j-ee.top+ce[1],ee.origin=He(At(ie,ee.origin),ce),ee.beforeOrigin=He(At(ie,ee.beforeOrigin),ce),ee.originalBeforeOrigin=At(ie,ee.originalBeforeOrigin),ee.transformOrigin=He(At(ie,ee.transformOrigin),ce),d.style.transform="translate(".concat(-O-ce[0],"px, ").concat(-Z-ce[1],"px)")+X,Iu(),this.updateState(te(te({},ee),{posDelta:ce,direction:me,beforeDirection:me}),i)},e.prototype.getRect=function(){return te(te({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return Ce(Ce([],ne(r),!1),ne(c),!1)},[]);return n},e.prototype.getMoveables=function(){return Ce([],ne(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Ce(Ce([],ne(this.props.ables),!1),[Xw],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Oa(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,o=r.targets,c=this.differ.update(o),u=c.added,d=c.changed,h=c.removed,g=u.length||h.length;(g||this._prevOriginalDragTarget!==this._originalDragTarget)&&(lu(this,!1),lu(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=fP(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=hP(this,"GroupControl")));var m=!x1(n.container,r.container);m&&(n.container=r.container),(m||g||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||d.length||o.length&&!nP(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!g},e.prototype._updateObserver=function(){},e.defaultProps=te(te({},Pu.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(Pu),aQ=(function(t){Lh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,o=i.cssStyled,c=i.persistData,u=i.targets||[],d=u.length,h=this.isUnmounted||!d,g=(r=c?.children)!==null&&r!==void 0?r:[];return h&&!d&&g.length?u=g.map(function(){return null}):h||(g=[]),qi(o,{cspNonce:a,ref:vs(this,"controlBox"),className:Fe("control-box")},u.map(function(m,b){var _,w,E=(w=(_=i.individualGroupableProps)===null||_===void 0?void 0:_.call(i,m,b))!==null&&w!==void 0?w:{};return qi(Pu,te({key:"moveable"+b,ref:w4(n,"moveables",b)},i,E,{target:m,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:g[b]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),Iu(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),Iu()},e.prototype.getRect=function(){return te(te({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(u){return u.request(n,te(te({},r),{isInstant:!1}),!1)}),o=i||r.isInstant,c={request:function(u){return a.forEach(function(d){return d.request(u)}),this},requestEnd:function(){return a.forEach(function(u){return u.requestEnd()}),this}};return o?c.request(r).requestEnd():c},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Vr(this.moveables,function(o){var c=o.getTargets()[0],u=o.getControlBoxElement(),d=o.getDragElement();return!c||!d?!1:d===i||d.contains(i)||d!==c&&c===i||c.contains(i)||u===i||u.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Ce([],ne(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(Pu);function vP(t,e){var n=[];return t.forEach(function(r){if(r){if(jr(r)){e[r]&&n.push.apply(n,Ce([],ne(e[r]),!1));return}Vn(r)?n.push.apply(n,Ce([],ne(vP(r,e)),!1)):n.push(r)}}),n}function yP(t,e){var n=[];return t.forEach(function(r){if(r){if(jr(r)){e[r]&&n.push.apply(n,Ce([],ne(e[r]),!1));return}Vn(r)?n.push(yP(r,e)):n.push(r)}}),n}function bP(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?Vn(n)&&Vn(i)?bP(n,i):!0:!1})}var sQ=(function(t){Lh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new nO,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var o=a.css;o&&o.forEach(function(c){n[c]=!0})});var i=ks(n).join(`
`);this.defaultStyled=sO("div",tY(kw,$X+i))},e.getTotalAbles=function(){return Ce([sP,Xw,gP,aP],ne(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,o=i.props,c=NX(i,["ables","props"]),u=ne(this._updateRefs(!0),2),d=u[0],h=u[1],g=vP(d,h),m=g.length>1,b=r.getTotalAbles(),_=Ce(Ce([],ne(b),!1),ne(a||[]),!1),w=te(te(te({},c),o||{}),{ables:_,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=g;var E=null,T=this.moveable,C=c.persistData;if(C?.children&&(m=!0),c.individualGroupable)return qi(aQ,te({key:"individual-group",ref:vs(this,"moveable")},w,{target:null,targets:g}));if(m){var N=yP(d,h);if(T&&!T.props.groupable&&!T.props.individualGroupable){var V=T.props.target;V&&g.indexOf(V)>-1&&(E=te({},T.state))}return qi(iQ,te({key:"group",ref:vs(this,"moveable")},w,(n=c.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:g,targetGroups:N,firstRenderState:E}))}else{var P=g[0];if(T&&(T.props.groupable||T.props.individualGroupable)){var M=T.moveables||[],A=Vr(M,function(k){return k.props.target===P});A&&(E=te({},A.state))}return qi(Pu,te({key:"single",ref:vs(this,"moveable")},w,{target:P,firstRenderState:E}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=Gw(this.props.target||this.props.targets),a=typeof document<"u",o=bP(r,i),c=this.selectorMap,u={};return this.refTargets.forEach(function d(h){if(jr(h)){var g=c[h];g?u[h]=c[h]:a&&(o=!0,u[h]=[].slice.call(document.querySelectorAll(h)))}else Vn(h)&&h.forEach(d)}),this._tmpRefTargets=i,this._tmpSelectorMap=u,[i,u,!n&&o]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),o=a.added,c=a.removed,u=o.length||c.length;u&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var d=ne(this._updateRefs(),3),h=d[0],g=d[1],m=d[2];this.refTargets=h,this.selectorMap=g,m&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,IX([nY(fO)],e.prototype,"moveable",void 0),e})(z4),oQ=(function(t){Lh(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=Ww,e})(sQ),S1=function(t,e){return S1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},S1(t,e)};function Kw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");S1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var sh=function(){return sh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sh.apply(this,arguments)};function lQ(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var cQ=(function(t){Kw(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return qi(oQ,sh({ref:vs(this,"moveable")},this.state))},e})(xw),uQ=nQ,dQ=fO,fQ=tQ,hQ=(function(t){Kw(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var o=sh({},i),c={};fQ.forEach(function(h){c[fY("on ".concat(h))]=function(g){return a.trigger(h,g)}});var u;i.warpSelf?(delete i.warpSelf,a._warp=!0,u=r):(u=Qu(r).createElement("div"),r.appendChild(u)),a.containerProvider=Kk(qi(cQ,sh({ref:vs(a,"innerMoveable")},o,c)),u),a.selfElement=u;var d=o.target;return Vn(d)&&d.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;Kk(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=lQ([Uk(dQ,function(r,i){r[i]||(r[i]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var c=this.getMoveable();if(!(!c||!c[i]))return c[i].apply(c,a)})}),Uk(uQ,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var o;this.setState((o={},o[i]=a,o))},enumerable:!0,configurable:!0})})],e),e})(j0),xP=(function(t){Kw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(hQ),Eo=(t=>(t.Mouse="mouse",t.Touch="touch",t.Pointer="pointer",t))(Eo||{}),yf=(t=>(t.CancelledByMovement="cancelled-by-movement",t.CancelledByRelease="cancelled-by-release",t.CancelledOutsideElement="cancelled-outside-element",t))(yf||{});const pQ=["mousedown","mousemove","mouseup","mouseleave","mouseout"],gQ=["touchstart","touchmove","touchend","touchcancel"],mQ=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function vQ(t){return typeof t=="object"&&t!==null&&"pageX"in t&&typeof t.pageX=="number"&&"pageY"in t&&typeof t.pageY=="number"}function yQ(t){var e;return pQ.includes((e=t?.nativeEvent)==null?void 0:e.type)}function _P(t){var e;return gQ.includes((e=t?.nativeEvent)==null?void 0:e.type)||"touches"in t}function bQ(t){const{nativeEvent:e}=t;return e?mQ.includes(e?.type)||"pointerId"in e:!1}function Hb(t){return yQ(t)||_P(t)||bQ(t)}function OR(t){var e;const n=_P(t)?(e=t?.touches)==null?void 0:e[0]:t;return vQ(n)?{x:n.pageX,y:n.pageY}:null}function xQ(t){return{target:t.target,currentTarget:t.currentTarget,nativeEvent:t,persist:()=>{}}}function Qw(t,{threshold:e=400,captureEvent:n=!1,detect:r=Eo.Pointer,cancelOnMovement:i=!1,cancelOutsideElement:a=!0,filterEvents:o,onStart:c,onMove:u,onFinish:d,onCancel:h}={}){const g=B.useRef(!1),m=B.useRef(!1),b=B.useRef(),_=B.useRef(),w=B.useRef(t),E=B.useRef(null),T=B.useCallback(P=>M=>{m.current||Hb(M)&&(o!==void 0&&!o(M)||(n&&M.persist(),c?.(M,{context:P}),E.current=OR(M),m.current=!0,b.current=M.currentTarget,_.current=setTimeout(()=>{w.current&&(w.current(M,{context:P}),g.current=!0)},e)))},[n,o,c,e]),C=B.useCallback(P=>(M,A)=>{Hb(M)&&m.current&&(E.current=null,n&&M.persist(),g.current?d?.(M,{context:P}):m.current&&h?.(M,{context:P,reason:A??yf.CancelledByRelease}),g.current=!1,m.current=!1,_.current!==void 0&&clearTimeout(_.current))},[n,d,h]),N=B.useCallback(P=>M=>{if(Hb(M)&&(u?.(M,{context:P}),i!==!1&&E.current)){const A=OR(M);if(A){const k=i===!0?25:i,D={x:Math.abs(A.x-E.current.x),y:Math.abs(A.y-E.current.y)};(D.x>k||D.y>k)&&C(P)(M,yf.CancelledByMovement)}}},[C,i,u]),V=B.useCallback(P=>{if(t===null)return{};switch(r){case Eo.Mouse:{const M={onMouseDown:T(P),onMouseMove:N(P),onMouseUp:C(P)};return a&&(M.onMouseLeave=A=>{C(P)(A,yf.CancelledOutsideElement)}),M}case Eo.Touch:return{onTouchStart:T(P),onTouchMove:N(P),onTouchEnd:C(P)};case Eo.Pointer:{const M={onPointerDown:T(P),onPointerMove:N(P),onPointerUp:C(P)};return a&&(M.onPointerLeave=A=>C(P)(A,yf.CancelledOutsideElement)),M}}},[t,C,a,r,N,T]);return B.useEffect(()=>{function P(M){const A=xQ(M);C()(A)}return window.addEventListener("mouseup",P),window.addEventListener("touchend",P),window.addEventListener("pointerup",P),()=>{window.removeEventListener("mouseup",P),window.removeEventListener("touchend",P),window.removeEventListener("pointerup",P)}},[C]),B.useEffect(()=>()=>{_.current!==void 0&&clearTimeout(_.current)},[]),B.useEffect(()=>{w.current=t},[t]),V}const wP=()=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){const e=document.getElementById("ios-haptic-trigger");e&&e.click()}else typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50)},Wm=t=>t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="number"?new Date(t):t?.toDate&&typeof t.toDate=="function"?t.toDate():new Date:new Date,Dl=t=>Wm(t).toISOString(),_Q=t=>{const e=Wm(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},wQ=t=>{const e=t.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},Zw=t=>{const e=t;let n=0;typeof e.amount=="number"?n=e.amount:typeof e.amount=="string"&&(n=parseFloat(e.amount)),isNaN(n)&&(n=0);const r=Dl(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:n,date:r,month:e.month||_Q(r),description:e.description||"",merchant:e.merchant||void 0,type:wQ(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}};class Ll{static instance;static getInstance(){return Ll.instance||(Ll.instance=new Ll),Ll.instance}async restoreUserData(e,n){try{console.log(" BudgetService.restoreUserData: STARTING RESTORE for user:",e),await this.deleteAllUserData(e);const r=[{name:"envelopes",data:n.envelopes||[]},{name:"transactions",data:n.transactions||[]},{name:"envelopeAllocations",data:n.allocations?Object.values(n.allocations).flat():[]},{name:"monthlyBudgets",data:this.prepareMonthlyBudgetsData(n.allocations,n.incomeSources)},{name:"appSettings",data:n.appSettings?[n.appSettings]:[]}],i=[];for(const{name:o,data:c}of r)if(Array.isArray(c))for(const u of c){if(!u.id&&o!=="monthlyBudgets")continue;const d={...u,userId:e};let h=u.id;o==="monthlyBudgets"&&u.month&&(h=u.month);const g=yt(Ke,"users",e,o,h);i.push({ref:g,data:d})}console.log(` Prepared ${i.length} items for restoration.`);const a=450;for(let o=0;o<i.length;o+=a){const c=kx(Ke);i.slice(o,o+a).forEach(d=>{c.set(d.ref,d.data)}),console.log(` Committing batch ${Math.floor(o/a)+1}/${Math.ceil(i.length/a)}...`),await c.commit()}console.log(" Restore completed successfully.")}catch(r){throw console.error(" BudgetService.restoreUserData failed:",r),new Error(`Failed to restore user data: ${r instanceof Error?r.message:"Unknown error"}`)}}async getEnvelopes(e){try{console.log(" BudgetService.getEnvelopes called for user:",e);const n=vr(Ke,"users",e,"envelopes"),a=(await Gi(n)).docs.map((o,c)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??c})).sort((o,c)=>{const u=o.orderIndex??0,d=c.orderIndex??0;return u-d});return console.log(" Fetched envelopes:",a.length),a}catch(n){throw console.error(" BudgetService.getEnvelopes failed:",n),new Error(`Failed to fetch envelopes: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactions(e){try{console.log(" BudgetService.getTransactions: Fetching for user",e);const n=vr(Ke,"users",e,"transactions"),r=Qi(n,Uo("date","desc")),a=(await Gi(r)).docs.map(o=>{const c={id:o.id,...o.data()};return Zw(c)});return console.log(` Fetched ${a.length} transactions`),a}catch(n){throw console.error(" BudgetService.getTransactions failed:",n),new Error(`Failed to fetch transactions: ${n instanceof Error?n.message:"Unknown error"}`)}}async createEnvelope(e){try{console.log(" BudgetService.createEnvelope called for user:",e.userId);const n=vr(Ke,"users",e.userId,"envelopes"),r=yt(n),i=gt.now(),a={...e,createdAt:i,lastUpdated:i};Zr(r,a).catch(c=>console.error("Create env failed",c));const o={...e,id:r.id,createdAt:Dl(i),lastUpdated:Dl(i)};return console.log(" Created envelope (optimistic):",o.id),o}catch(n){throw console.error(" BudgetService.createEnvelope failed:",n),new Error(`Failed to create envelope: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelope(e,n){try{console.log(" BudgetService.updateEnvelope called for envelope:",n.id);const r=yt(Ke,"users",e,"envelopes",n.id);Zr(r,{...n,lastUpdated:gt.now()},{merge:!0}).catch(i=>console.error("Update env failed",i)),console.log(" Updated envelope (optimistic):",n.id)}catch(r){throw console.error(" BudgetService.updateEnvelope failed:",r),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,n){try{const r=yt(Ke,"users",e,"envelopes",n),i=Qi(vr(Ke,"users",e,"transactions"),s7("envelopeId","==",n)),o=(await Gi(i)).docs.map(c=>$i(c.ref));await Promise.all([$i(r),...o]),console.log(" Deleted envelope and associated transactions from Firestore:",n)}catch(r){throw console.error(" BudgetService.deleteEnvelope failed:",r),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,n){try{console.log(" BudgetService.reorderEnvelopes called for user:",e);const r=n.map(i=>{const a=yt(Ke,"users",e,"envelopes",i.id);return Zr(a,{orderIndex:i.orderIndex,lastUpdated:gt.now()},{merge:!0})});Promise.all(r).catch(i=>console.error("Reorder env failed",i)),console.log(" Reordered envelopes (optimistic)")}catch(r){throw console.error(" BudgetService.reorderEnvelopes failed:",r),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{console.log(" BudgetService.createTransaction called for user:",e.userId);const n=vr(Ke,"users",e.userId,"transactions"),r=yt(n),i=gt.now();if(e.paymentMethod){const u={...e.paymentMethod};u.last4===void 0&&delete u.last4,e.paymentMethod=u}const o={...Object.fromEntries(Object.entries(e).filter(([u,d])=>d!==void 0)),createdAt:i};Zr(r,o).catch(u=>console.error("Create tx failed",u));const c={...e,id:r.id};return console.log(" Created transaction (optimistic):",c.id),c}catch(n){throw console.error(" BudgetService.createTransaction failed:",n),new Error(`Failed to create transaction: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateTransaction(e,n){try{if(console.log(" BudgetService.updateTransaction called for transaction:",n.id),n.paymentMethod){const a={...n.paymentMethod};a.last4===void 0&&delete a.last4,n.paymentMethod=a}const r=Object.fromEntries(Object.entries(n).filter(([a,o])=>o!==void 0)),i=yt(Ke,"users",e,"transactions",n.id);Zr(i,r,{merge:!0}).catch(a=>console.error("Update tx failed",a)),console.log(" Updated transaction (optimistic):",n.id)}catch(r){throw console.error(" BudgetService.updateTransaction failed:",r),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,n){try{console.log(" BudgetService.deleteTransaction called for transaction:",n);const r=yt(Ke,"users",e,"transactions",n);$i(r).catch(i=>console.error("Delete tx failed",i)),console.log(" Deleted transaction (optimistic):",n)}catch(r){throw console.error(" BudgetService.deleteTransaction failed:",r),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async createIncomeSource(e){try{console.log(" BudgetService.createIncomeSource (Embedded) called for user:",e.userId);const n=yt(Ke,"users",e.userId,"monthlyBudgets",e.month),r=gt.now(),i=`inc_${r.toMillis()}_${Math.random().toString(36).substring(2,9)}`,a={...e,id:i,amount:Number(e.amount),createdAt:r,updatedAt:r};Sa(n,{incomeSources:u7(a),updatedAt:r}).catch(c=>{c.code==="not-found"?Zr(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[a],allocations:{},totalIncome:0,availableToBudget:0}).catch(u=>console.error("Failed to create monthly budget doc",u)):console.error("Create income failed",c)});const o={...e,id:i,amount:Number(e.amount),createdAt:Dl(r),updatedAt:Dl(r)};return console.log(" Created income source (optimistic/embedded):",o.id),o}catch(n){throw console.error(" BudgetService.createIncomeSource failed:",n),new Error(`Failed to create income source: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateIncomeSource(e,n,r,i){try{console.log(" BudgetService.updateIncomeSource (Embedded) called for source:",n);const a=yt(Ke,"users",e,"monthlyBudgets",r);pb(a).then(o=>{if(!o.exists())return;const d=(o.data().incomeSources||[]).map(h=>{if(h.id===n){const g={...h,...i,updatedAt:gt.now()};return i.amount!==void 0&&(g.amount=Number(i.amount)),g}return h});Sa(a,{incomeSources:d,updatedAt:gt.now()})}).catch(o=>console.error("Update income failed",o)),console.log(" Updated income source (optimistic/embedded):",n)}catch(a){throw console.error(" BudgetService.updateIncomeSource failed:",a),a}}async deleteIncomeSource(e,n,r){try{console.log(" BudgetService.deleteIncomeSource (Embedded) called for source:",n);const i=yt(Ke,"users",e,"monthlyBudgets",r);pb(i).then(a=>{if(!a.exists())return;const u=(a.data().incomeSources||[]).filter(d=>d.id!==n);Sa(i,{incomeSources:u,updatedAt:gt.now()})}).catch(a=>console.error("Delete income failed",a)),console.log(" Deleted income source (optimistic/embedded):",n)}catch(i){throw console.error(" BudgetService.deleteIncomeSource failed:",i),new Error(`Failed to delete income source: ${i instanceof Error?i.message:"Unknown error"}`)}}async createEnvelopeAllocation(e){try{console.log(" BudgetService.createEnvelopeAllocation (Embedded) called for user:",e.userId);const n=yt(Ke,"users",e.userId,"monthlyBudgets",e.month),r=gt.now(),i={[`allocations.${e.envelopeId}`]:Number(e.budgetedAmount),updatedAt:r};Sa(n,i).catch(o=>{o.code==="not-found"?Zr(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[],allocations:{[e.envelopeId]:Number(e.budgetedAmount)},totalIncome:0,availableToBudget:0}).catch(c=>console.error("Failed to create monthly budget doc",c)):console.error("Create allocation failed",o)});const a={...e,id:e.envelopeId,createdAt:Dl(r),updatedAt:Dl(r)};return console.log(" Created allocation (optimistic/embedded):",a.id),a}catch(n){throw console.error(" BudgetService.createEnvelopeAllocation failed:",n),new Error(`Failed to create envelope allocation: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelopeAllocation(e,n,r,i){try{console.log(" BudgetService.updateEnvelopeAllocation (Embedded) called for envelope:",n);const a=yt(Ke,"users",e,"monthlyBudgets",r),o={updatedAt:gt.now()};i.budgetedAmount!==void 0&&(o[`allocations.${n}`]=Number(i.budgetedAmount)),Sa(a,o).catch(c=>console.error("Update allocation failed",c)),console.log(" Updated allocation (optimistic/embedded):",n)}catch(a){throw console.error(" BudgetService.updateEnvelopeAllocation failed:",a),new Error(`Failed to update envelope allocation: ${a instanceof Error?a.message:"Unknown error"}`)}}async deleteEnvelopeAllocation(e,n,r){try{console.log(" BudgetService.deleteEnvelopeAllocation (Embedded) called for envelope:",n);const i=yt(Ke,"users",e,"monthlyBudgets",r);Sa(i,{[`allocations.${n}`]:A2(),updatedAt:gt.now()}).catch(a=>console.error("Delete allocation failed",a)),console.log(" Deleted allocation (optimistic/embedded):",n)}catch(i){throw console.error(" BudgetService.deleteEnvelopeAllocation failed:",i),new Error(`Failed to delete envelope allocation: ${i instanceof Error?i.message:"Unknown error"}`)}}async getMonthData(e,n){try{console.log(` BudgetService.getMonthData (Embedded): Fetching for user ${e}, month ${n}`);const r=yt(Ke,"users",e,"monthlyBudgets",n),i=await pb(r);if(!i.exists())return console.log(` No budget data found for ${n}, returning empty defaults.`),{incomeSources:[],allocations:[]};const a=i.data(),o=(a.incomeSources||[]).map(d=>({...d,amount:Number(d.amount),createdAt:d.createdAt?.toDate?d.createdAt.toDate().toISOString():d.createdAt||new Date().toISOString(),updatedAt:d.updatedAt?.toDate?d.updatedAt.toDate().toISOString():d.updatedAt||new Date().toISOString()})).sort((d,h)=>new Date(d.createdAt).getTime()-new Date(h.createdAt).getTime()),c=a.allocations||{},u=Object.entries(c).map(([d,h])=>({id:d,userId:e,envelopeId:d,month:n,budgetedAmount:Number(h),createdAt:a.createdAt?.toDate?a.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((d,h)=>new Date(d.createdAt).getTime()-new Date(h.createdAt).getTime());return console.log(` Fetched ${o.length} income sources and ${u.length} allocations for ${n}`),{incomeSources:o,allocations:u}}catch(r){throw console.error(" BudgetService.getMonthData failed:",r),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{console.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const n={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(b=>b.id));console.log(` Found ${r.length} existing envelopes`);const a=vr(Ke,"users",e,"envelopeAllocations"),o=await Gi(a),c=[],u=new Set;for(const b of o.docs){const _=b.data();u.add(_.month),i.has(_.envelopeId)||(c.push(b.id),console.log(` Found orphaned allocation: ${b.id} for envelope ${_.envelopeId} in month ${_.month}`))}if(c.length>0){const b=c.map(_=>$i(yt(Ke,"users",e,"envelopeAllocations",_)));await Promise.all(b),n.orphanedAllocationsDeleted+=c.length,n.details.deletedAllocationIds.push(...c),console.log(` Deleted ${c.length} orphaned allocations (legacy)`)}const d=vr(Ke,"users",e,"monthlyBudgets"),h=await Gi(d);for(const b of h.docs){const w=b.data().allocations||{},E={};let T=!1;Object.keys(w).forEach(C=>{i.has(C)||(E[`allocations.${C}`]=A2(),T=!0,console.log(` Found orphaned embedded allocation in ${b.id} for envelope ${C}`),n.orphanedAllocationsDeleted++,n.details.deletedAllocationIds.push(`${b.id}_${C}`))}),T&&(E.updatedAt=gt.now(),await Sa(b.ref,E),u.add(b.id))}const g=await this.getTransactions(e),m=[];for(const b of g)i.has(b.envelopeId)||(m.push(b.id),console.log(` Found orphaned transaction: ${b.id} for envelope ${b.envelopeId}`));if(m.length>0){const b=m.map(_=>$i(yt(Ke,"users",e,"transactions",_)));await Promise.all(b),n.orphanedTransactionsDeleted=m.length,n.details.deletedTransactionIds=m,console.log(` Deleted ${m.length} orphaned transactions`)}return n.details.monthsProcessed=Array.from(u),console.log(" Cleanup completed:",{orphanedAllocationsDeleted:n.orphanedAllocationsDeleted,orphanedTransactionsDeleted:n.orphanedTransactionsDeleted,monthsProcessed:n.details.monthsProcessed.length}),n}catch(n){throw console.error(" BudgetService.cleanupOrphanedData failed:",n),new Error(`Failed to cleanup orphaned data: ${n instanceof Error?n.message:"Unknown error"}`)}}subscribeToMonthlyBudget(e,n,r){const i=yt(Ke,"users",e,"monthlyBudgets",n);return Yu(i,a=>{if(!a.exists()){r({incomeSources:[],allocations:[]});return}const o=a.data(),c=(o.incomeSources||[]).map(h=>({...h,amount:Number(h.amount),createdAt:h.createdAt?.toDate?h.createdAt.toDate().toISOString():h.createdAt||new Date().toISOString(),updatedAt:h.updatedAt?.toDate?h.updatedAt.toDate().toISOString():h.updatedAt||new Date().toISOString()})).sort((h,g)=>new Date(h.createdAt).getTime()-new Date(g.createdAt).getTime()),u=o.allocations||{},d=Object.entries(u).map(([h,g])=>({id:h,userId:e,envelopeId:h,month:n,budgetedAmount:Number(g),createdAt:o.createdAt?.toDate?o.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:o.updatedAt?.toDate?o.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((h,g)=>new Date(h.createdAt).getTime()-new Date(g.createdAt).getTime());r({incomeSources:c,allocations:d})})}prepareMonthlyBudgetsData(e,n){const r=[],i=new Set;return e&&Object.keys(e).forEach(a=>i.add(a)),n&&Object.keys(n).forEach(a=>i.add(a)),i.forEach(a=>{const o=e?.[a]||[],c=n?.[a]||[],u={};o.forEach(h=>{u[h.envelopeId]=h.budgetedAmount});const d={month:a,userId:"",incomeSources:c,allocations:u,totalIncome:c.reduce((h,g)=>h+Number(g.amount||0),0),availableToBudget:c.reduce((h,g)=>h+Number(g.amount||0),0)-o.reduce((h,g)=>h+Number(g.budgetedAmount||0),0),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r.push(d)}),r}async deleteAllUserData(e){try{console.log(" BudgetService.deleteAllUserData: STARTING DELETION for user:",e);const n=["envelopes","transactions","incomeSources","envelopeAllocations","monthlyBudgets","appSettings"];for(const r of n){console.log(` Deleting collection: ${r}...`);const i=vr(Ke,"users",e,r),a=await Gi(i);if(a.empty){console.log("   (Empty collection)");continue}const o=a.docs.map(c=>$i(c.ref));await Promise.all(o),console.log(`    Deleted ${a.size} documents from ${r}`)}console.log(" All user data deleted successfully.")}catch(n){throw console.error(" BudgetService.deleteAllUserData failed:",n),new Error(`Failed to delete all user data: ${n instanceof Error?n.message:"Unknown error"}`)}}}const Jw=Ll.getInstance();class To{static instance;constructor(){}static getInstance(){return To.instance||(To.instance=new To),To.instance}createId(){return yt(vr(Ke,"temp")).id}async createCategory(e){const n=yt(Ke,`users/${e.userId}/categories`,e.id);return await Zr(n,e),e}async getCategories(e){const n=Qi(vr(Ke,`users/${e}/categories`),Uo("orderIndex","asc"));return(await Gi(n)).docs.map(i=>i.data())}async updateCategory(e,n){const r=yt(Ke,`users/${e}/categories`,n.id);await Zr(r,n,{merge:!0})}async deleteCategory(e,n){const r=yt(Ke,`users/${e}/categories`,n);await $i(r)}async reorderCategories(e,n){const r=kx(Ke);n.forEach((i,a)=>{const o=yt(Ke,`users/${e}/categories`,i.id);r.update(o,{orderIndex:a})}),await r.commit()}async deduplicateCategories(e){const n=await this.getCategories(e),r=new Map,i=[];for(const o of n){const c=o.name.toLowerCase().trim();r.has(c)?i.push(o.id):r.set(c,o)}if(i.length===0)return console.log(" No duplicate categories found"),0;console.log(` Found ${i.length} duplicate categories to remove`);const a=450;for(let o=0;o<i.length;o+=a){const c=kx(Ke);i.slice(o,o+a).forEach(d=>{const h=yt(Ke,`users/${e}/categories`,d);c.delete(h)}),await c.commit(),console.log(` Deleted batch ${Math.floor(o/a)+1}`)}return console.log(` Removed ${i.length} duplicate categories`),i.length}subscribeToCategories(e,n){const r=Qi(vr(Ke,`users/${e}/categories`),Uo("orderIndex","asc"));return Yu(r,i=>{const a=i.docs.map(o=>o.data());n(a)},i=>{console.error(" Category subscription error:",i)})}}To.getInstance();const qb=t=>vr(Ke,"users",t,"transactions"),SQ={subscribeToTransactions:(t,e)=>{const n=Qi(qb(t),Uo("date","desc"));return Yu(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllTransactions:async t=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=Qi(qb(t),Uo("date","desc")),r=(await Gi(e)).docs.map(i=>{const a={id:i.id,...i.data()};return Zw(a)});return console.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),console.log(` Original transaction had temp ID: ${n}`);try{console.log(" About to call addDoc with:",r);const i=await A0(qb(e),r);console.log(" addDoc succeeded, docRef:",i),console.log(` Document ID: ${i.id}`),console.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return console.log(" Final result object:",a),a}catch(i){throw console.error(" addDoc failed:",i),console.error("Error message:",i.message),i}},updateTransaction:async(t,e,n)=>{const r=yt(Ke,"users",t,"transactions",e);return await Sa(r,n)},deleteTransaction:async(t,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=yt(Ke,"users",t,"transactions",e);console.log(` Deleting document at path: ${n.path}`),await $i(n),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n),console.error("Error message:",n.message),n}}},Yb=t=>vr(Ke,"users",t,"envelopes"),EQ={subscribeToEnvelopes:(t,e)=>{const n=Qi(Yb(t),Uo("orderIndex","asc"));return Yu(n,i=>{const a=i.docs.map(o=>{const c=o.data();return{id:o.id,...c,createdAt:c.createdAt?.toDate?.()?c.createdAt.toDate().toISOString():c.createdAt,lastUpdated:c.lastUpdated?.toDate?.()?c.lastUpdated.toDate().toISOString():c.lastUpdated}});e(a)})},getAllEnvelopes:async t=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=Yb(t),i=(await Gi(e)).docs.map((a,o)=>{const c=a.data();return{id:a.id,...c,createdAt:c.createdAt?.toDate?.()?c.createdAt.toDate().toISOString():c.createdAt,lastUpdated:c.lastUpdated?.toDate?.()?c.lastUpdated.toDate().toISOString():c.lastUpdated,orderIndex:c.orderIndex??o}}).sort((a,o)=>{const c=a.orderIndex??0,u=o.orderIndex??0;return c-u});return console.log(" Fetched envelopes:",i.length),i}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await A0(Yb(e),r)).id,...r,userId:e}}catch(i){throw console.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=yt(Ke,"users",t,"envelopes",e.id);return await Zr(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=yt(Ke,"users",t,"envelopes",e);return await Sa(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=yt(Ke,"users",t,"envelopes",e);await $i(n),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},Xb=t=>vr(Ke,"users",t,"distributionTemplates"),TQ={subscribeToDistributionTemplates:(t,e)=>{const n=Qi(Xb(t),Uo("lastUsed","desc"));return Yu(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=Qi(Xb(t),Uo("lastUsed","desc"));return(await Gi(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await A0(Xb(e),r);console.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return console.log(" Final template result object:",a),a}catch(i){throw console.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=yt(Ke,"users",t,"distributionTemplates",e.id);return await Zr(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=yt(Ke,"users",t,"distributionTemplates",e);return await Sa(r,n)},deleteDistributionTemplate:async(t,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=yt(Ke,"users",t,"distributionTemplates",e);await $i(n),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},Wb=t=>vr(Ke,"users",t,"appSettings"),SP={subscribeToAppSettings:(t,e)=>{const n=Qi(Wb(t),S2(1));return Yu(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(o=>({id:o.id,...o.data()}))[0];e(a)})},getAppSettings:async t=>{const e=Qi(Wb(t),S2(1)),n=await Gi(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await A0(Wb(e),n);console.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return console.log(" Final settings result object:",i),i}catch(r){throw console.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=yt(Ke,"users",t,"appSettings",e.id);return await Zr(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=yt(Ke,"users",t,"appSettings",e);return await Zr(r,n,{merge:!0})},deleteAppSettings:async(t,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=yt(Ke,"users",t,"appSettings",e);await $i(n),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},PR=Object.freeze(Object.defineProperty({__proto__:null,AppSettingsService:SP},Symbol.toStringTag,{value:"Module"})),AQ=t=>Zw(t),CQ=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated?.toDate?.()?t.lastUpdated.toDate().toISOString():t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig,categoryId:t.categoryId}),kQ=t=>({id:t.id,userId:t.userId,name:t.name,orderIndex:t.orderIndex,isArchived:t.isArchived,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt}),jR=(t,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=t.getState().currentMonth;console.log(" Current month for subscriptions:",n);const r=EQ.subscribeToEnvelopes(e,h=>{console.log(" Real-time sync: Envelopes updated",h.length);const g=h.map(CQ),m=t.getState(),b=new Set(m.envelopes.map(E=>E.id)),_=new Set(g.map(E=>E.id)),w=[...g.filter(E=>b.has(E.id)),...m.envelopes.filter(E=>!_.has(E.id))];t.setState({envelopes:w})}),i=SQ.subscribeToTransactions(e,h=>{console.log(" Real-time sync: Transactions updated",h.length);const g=h.map(AQ),m=t.getState(),b=new Set(m.transactions.map(E=>`${E.id}-${E.month}`)),_=new Set(g.map(E=>`${E.id}-${E.month}`)),w=[...g.filter(E=>b.has(`${E.id}-${E.month}`)),...m.transactions.filter(E=>!_.has(`${E.id}-${E.month}`))];t.setState({transactions:w})}),o=To.getInstance().subscribeToCategories(e,h=>{console.log(" Real-time sync: Categories updated",h.length);const g=h.map(kQ),m=Array.from(new Map(g.map(b=>[b.id,b])).values());m.length!==g.length&&console.warn(" Duplicate categories detected in real-time update, deduplicating..."),t.setState({categories:m})}),c=TQ.subscribeToDistributionTemplates(e,h=>{console.log(" Real-time sync: Templates updated from Firebase",h.length)}),u=SP.subscribeToAppSettings(e,h=>{console.log(" Real-time sync: Settings updated",h?"found":"null");const g=t.getState();if(h){const m={...g.appSettings,...h,paymentSources:h.paymentSources??g.appSettings?.paymentSources??[]};t.setState({appSettings:m})}else console.log(" Firebase settings null, preserving local state")}),d=Jw.subscribeToMonthlyBudget(e,n,h=>{console.log(` Real-time sync: Monthly budget updated (${h.incomeSources.length} sources, ${h.allocations.length} allocations)`);const g=t.getState();t.setState({incomeSources:{...g.incomeSources,[n]:h.incomeSources},allocations:{...g.allocations,[n]:h.allocations}})});window.__firebaseUnsubscribers={envelopes:r,transactions:i,categories:o,templates:c,settings:u,monthlyBudget:d},console.log(" Real-time subscriptions active - cross-device sync enabled")},RQ=t=>{const{useBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),e.setState({isOnline:!0})}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),e.setState({isOnline:navigator.onLine});const i=n.getState();i.isAuthenticated&&i.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),jR(e,r())),n.subscribe(o=>{if(o.isAuthenticated&&o.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),jR(e,r());else if(!o.isAuthenticated&&!o.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const c=window.__firebaseUnsubscribers;c.envelopes&&c.envelopes(),c.transactions&&c.transactions(),c.categories&&c.categories(),c.templates&&c.templates(),c.settings&&c.settings(),c.monthlyBudget&&c.monthlyBudget(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let a=e.getState().currentMonth;e.subscribe(o=>{if(o.currentMonth!==a&&o.isAuthenticated){console.log(" Month changed from",a,"to",o.currentMonth),a=o.currentMonth;const c=r();if(c&&window.__firebaseUnsubscribers){const u=window.__firebaseUnsubscribers;u.monthlyBudget&&u.monthlyBudget(),console.log(" Unsubscribed from old month data"),u.monthlyBudget=Jw.subscribeToMonthlyBudget(c,o.currentMonth,d=>{console.log(" Real-time sync: Monthly budget updated for new month");const h=e.getState();e.setState({incomeSources:{...h.incomeSources,[o.currentMonth]:d.incomeSources},allocations:{...h.allocations,[o.currentMonth]:d.allocations}})}),console.log(" Subscribed to monthly data for new month:",o.currentMonth)}}})},rm=()=>Si.getState().currentUser?.id||"",fn=Ll.getInstance(),ls=To.getInstance(),Jt=q1()(WB(lN((t,e)=>({envelopes:[],transactions:[],categories:[],appSettings:null,incomeSources:{},allocations:{},currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null,setIsOnboardingActive:n=>{t({isOnboardingActive:n})},checkAndStartOnboarding:async()=>{const n=rm();if(!n){console.log(" No user ID, skipping onboarding check");return}const r=`onboardingCompleted_${n}`,i=typeof localStorage<"u"?localStorage.getItem(r)==="true":!1;if(console.log(" checkAndStartOnboarding called:",{userId:n,isOnboardingCompleted:i,isOnboardingActive:e().isOnboardingActive,localStorage_key:r,localStorage_value:localStorage.getItem(r)}),i){t({isOnboardingCompleted:!0}),console.log(" Skipping onboarding: already completed (localStorage)");return}try{if((await fn.getEnvelopes(n)).length>0){console.log(" Existing user detected on new device  skipping onboarding, setting localStorage"),localStorage.setItem(r,"true"),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}}catch(a){console.error(" Failed to check existing envelopes for onboarding:",a),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}e().isOnboardingActive||(console.log(" Starting onboarding for new user - setting isOnboardingActive to TRUE"),t({isOnboardingCompleted:!1,isOnboardingActive:!0}),console.log(" isOnboardingActive set to:",e().isOnboardingActive))},completeOnboarding:()=>{const n=rm();if(n){const r=`onboardingCompleted_${n}`;localStorage.setItem(r,"true"),console.log(" Onboarding completed for user:",n)}t({isOnboardingCompleted:!0,isOnboardingActive:!1})},resetOnboarding:()=>{const n=rm();if(n){const r=`onboardingCompleted_${n}`;localStorage.removeItem(r),console.log(" Onboarding reset for user:",n)}t({isOnboardingCompleted:!1,isOnboardingActive:!0})},clearMonthData:async n=>{try{t({isLoading:!0,error:null}),console.log(` Clearing all data for month: ${n}`);const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const{monthlyBudgetService:a}=await Tt(async()=>{const{monthlyBudgetService:o}=await import("./MonthlyBudgetService-CMkkZVRc.js");return{monthlyBudgetService:o}},[]);await a.clearMonthData(i.id,n),await e().init(),console.log(` Cleared month data for ${n}`),t({isLoading:!1})}catch(r){throw console.error(" clearMonthData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to clear month data"}),r}},fetchMonthData:async n=>{try{const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping month data fetch");return}console.log(`Fetching month data for: ${n}`);const a=await fn.getMonthData(i.id,n),o=e();t({incomeSources:{...o.incomeSources,[n]:a.incomeSources},allocations:{...o.allocations,[n]:a.allocations}}),console.log(` Fetched month data for ${n}`),(async()=>{const u=e(),d=u.allocations[n]||[],h=u.transactions.filter(m=>m.month===n);let g=0;for(const m of d){const b=u.envelopes.find(w=>w.id===m.envelopeId);if(b?.isPiggybank)continue;const _=h.find(w=>w.envelopeId===m.envelopeId&&(w.description==="Monthly Budget Allocation"||w.description==="Monthly Allocation"||w.description==="Budgeted"||w.description==="Piggybank Contribution"));_?_.amount!==m.budgetedAmount&&(console.log(` Repairing mismatch for envelope ${b?.name||m.envelopeId}: Alloc ${m.budgetedAmount} vs Tx ${_.amount}`),await u.updateTransaction({..._,amount:m.budgetedAmount}),g++):m.budgetedAmount>0&&(console.log(` Repairing missing transaction for envelope ${b?.name||m.envelopeId}`),await u.addTransaction({description:"Budgeted",amount:m.budgetedAmount,envelopeId:m.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),g++)}g>0&&console.log(` Repaired ${g} allocation discrepancies for ${n}`)})().catch(u=>console.error("Verification failed:",u))}catch(r){console.error(` Failed to fetch month data for ${n}:`,r)}},removeEnvelopeFromMonth:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(` Removing envelope ${n} from month ${r}`);const i=e(),a=i.allocations[r]?.find(c=>c.envelopeId===n);a?await e().deleteEnvelopeAllocation(a.id):console.log(` No allocation found for envelope ${n} in ${r}`);const o=i.transactions.filter(c=>c.envelopeId===n&&(c.month===r||c.date.startsWith(r)));o.length>0&&(console.log(` Deleting ${o.length} transactions for envelope ${n} in ${r}`),await Promise.all(o.map(c=>e().deleteTransaction(c.id)))),t({isLoading:!1}),console.log(` Removed envelope ${n} from month ${r}`)}catch(i){throw console.error(" removeEnvelopeFromMonth failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to remove envelope from month"}),i}},setMonth:async n=>{t({currentMonth:n});const r=e();(r.incomeSources[n]===void 0||r.allocations[n]===void 0)&&(console.log(`Month ${n} data missing in store, fetching...`),t({isLoading:!0}),await e().fetchMonthData(n),t({isLoading:!1}))},init:async()=>{console.log("BudgetStore initializing...");const n=e();try{t({isLoading:!0,error:null});const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(m=>m.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping data fetch"),t({isLoading:!1});return}console.log(`Fetching data for user: ${i.id}, month: ${n.currentMonth}`);const[a,o,c,u]=await Promise.all([fn.getEnvelopes(i.id),fn.getTransactions(i.id),ls.getCategories(i.id).catch(m=>(console.error(" Failed to load categories:",m),[])),fn.getMonthData(i.id,n.currentMonth)]);let d=Array.from(new Map(c.map(m=>[m.id,m])).values());const h=new Set;let g=!1;for(const m of d){const b=m.name.toLowerCase().trim();if(h.has(b)){g=!0;break}h.add(b)}g&&i&&(console.log(" Duplicate category names detected, running Firestore cleanup..."),await ls.deduplicateCategories(i.id)>0&&(d=await ls.getCategories(i.id))),t({envelopes:a,transactions:o,categories:d,incomeSources:{...n.incomeSources,[n.currentMonth]:u.incomeSources},allocations:{...n.allocations,[n.currentMonth]:u.allocations},isLoading:!1,error:null}),console.log(` BudgetStore initialized: ${a.length} envelopes, ${o.length} transactions, ${c.length} categories, ${u.incomeSources.length} income sources, ${u.allocations.length} allocations`)}catch(r){console.error(" BudgetStore initialization failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},fetchCategories:async()=>{try{t({isLoading:!0,error:null});const r=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!r)return;const i=await ls.getCategories(r.id),a=Array.from(new Map(i.map(o=>[o.id,o])).values());t({categories:a,isLoading:!1})}catch(n){console.error("Failed to fetch categories:",n),t({isLoading:!1})}},addCategory:async n=>{try{t({isLoading:!0,error:null});const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");const a=e().categories.find(u=>u.name.toLowerCase().trim()===(n.name||"").toLowerCase().trim());if(a)return console.log(` Category "${n.name}" already exists, skipping creation`),t({isLoading:!1}),a.id;const o=ls.createId(),c={...n,id:o,userId:i.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),orderIndex:e().categories.length};return await ls.createCategory(c),t(u=>u.categories.some(h=>h.id===o)?{isLoading:!1}:{categories:[...u.categories,c],isLoading:!1}),o}catch(r){throw console.error("Failed to add category:",r),t({isLoading:!1}),r}},updateCategory:async n=>{try{t({isLoading:!0,error:null});const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");const a={...n,updatedAt:new Date().toISOString()};await ls.updateCategory(i.id,a),t(o=>({categories:o.categories.map(c=>c.id===n.id?a:c),isLoading:!1}))}catch(r){throw console.error("Failed to update category:",r),t({isLoading:!1}),r}},deleteCategory:async n=>{try{t({isLoading:!0,error:null});const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");await ls.deleteCategory(i.id,n),t(a=>({categories:a.categories.filter(o=>o.id!==n),isLoading:!1}))}catch(r){throw console.error("Failed to delete category:",r),t({isLoading:!1}),r}},reorderCategories:async n=>{try{t({isLoading:!0,error:null});const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");const a=e(),o=new Map;n.forEach((u,d)=>o.set(u,d));const c=a.categories.map(u=>{if(!o.has(u.id))return u;const d=o.get(u.id);return u.orderIndex===d?u:{...u,orderIndex:d}});t({categories:c.sort((u,d)=>u.orderIndex-d.orderIndex)}),await ls.reorderCategories(i.id,c),t({isLoading:!1})}catch(r){throw console.error("Failed to reorder categories:",r),t({isLoading:!1}),r}},addEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a={...n,userId:i.id},o=await fn.createEnvelope(a);return t(c=>c.envelopes.some(d=>d.id===o.id)?{isLoading:!1}:{envelopes:[...c.envelopes,o],isLoading:!1}),console.log(" Added envelope:",o.id),o.id}catch(r){throw console.error(" addEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await fn.updateEnvelope(i.id,n),t(a=>({envelopes:a.envelopes.map(o=>o.id===n.id?n:o),isLoading:!1})),console.log(" Updated envelope:",n.id)}catch(r){throw console.error(" updateEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await fn.deleteEnvelope(i.id,n),t(a=>({envelopes:a.envelopes.filter(o=>o.id!==n),transactions:a.transactions.filter(o=>o.envelopeId!==n),isLoading:!1})),console.log(" Deleted envelope:",n)}catch(r){throw console.error(" deleteEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async n=>{try{t({isLoading:!0,error:null});const r=e(),i=new Map;n.forEach((d,h)=>{i.set(d,h)});const a=r.envelopes.map(d=>{if(!i.has(d.id))return d;const h=i.get(d.id);return d.orderIndex===h?d:{...d,orderIndex:h}}),o=a.filter((d,h)=>d!==r.envelopes[h]);if(!o.length){t({isLoading:!1});return}const u=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!u)throw new Error("No authenticated user found");await fn.reorderEnvelopes(u.id,o),t({envelopes:a,isLoading:!1}),console.log(" Reordered envelopes")}catch(r){throw console.error(" reorderEnvelopes failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},addTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(n.date),o=n.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,c={...n,userId:i.id,month:o},u=await fn.createTransaction(c);t(d=>d.transactions.some(g=>g.id===u.id)?{isLoading:!1}:{transactions:[...d.transactions,u],isLoading:!1}),console.log(" Added transaction:",u.id)}catch(r){throw console.error(" addTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(n.date),o=n.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,c={...n,month:o};await fn.updateTransaction(i.id,c),t(u=>({transactions:u.transactions.map(d=>d.id===n.id?c:d),isLoading:!1})),console.log(" Updated transaction:",n.id)}catch(r){throw console.error(" updateTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await fn.deleteTransaction(i.id,n),t(a=>({transactions:a.transactions.filter(o=>o.id!==n),isLoading:!1})),console.log(" Deleted transaction:",n)}catch(r){throw console.error(" deleteTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async n=>{await e().updateTransaction(n)},transferFunds:async(n,r,i,a,o)=>{try{const c=o?typeof o=="string"?o:o.toISOString():new Date().toISOString(),u=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(d=>d.id===r)?.name||"envelope"}`,amount:i,envelopeId:n,date:c,type:"Expense",transferId:u,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(d=>d.id===n)?.name||"envelope"}`,amount:i,envelopeId:r,date:c,type:"Income",transferId:u,reconciled:!1}),console.log(" Transfer completed")}catch(c){throw console.error(" transferFunds failed:",c),c}},fetchData:async()=>{await e().init()},renameEnvelope:async(n,r)=>{try{t({isLoading:!0,error:null});const a=e().envelopes.find(d=>d.id===n);if(!a)throw new Error("Envelope not found");t(d=>({envelopes:d.envelopes.map(h=>h.id===n?{...h,name:r}:h),isLoading:!0}));const c=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!c)throw new Error("No authenticated user found");const u={...a,name:r};await fn.updateEnvelope(c.id,u),t({isLoading:!1}),console.log(" Renamed envelope:",n)}catch(i){throw console.error(" renameEnvelope failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},getEnvelopeBalance:(n,r)=>{const i=e(),a=i.envelopes.find(o=>o.id===n);if(!a)return console.log(` getEnvelopeBalance: Envelope ${n} not found`),0;if(a.isPiggybank){const o=i.transactions.filter(g=>g.envelopeId===n),c=o.filter(g=>g.type==="Expense"),u=o.filter(g=>g.type==="Income"),d=c.reduce((g,m)=>g+(m.amount||0),0);return u.reduce((g,m)=>g+(m.amount||0),0)-d}if(r){const o=i.transactions.filter(g=>g.envelopeId===n&&g.month===r),c=o.filter(g=>g.type==="Expense"),u=o.filter(g=>g.type==="Income"),d=c.reduce((g,m)=>g+(m.amount||0),0);return u.reduce((g,m)=>g+(m.amount||0),0)-d}return console.warn(` getEnvelopeBalance: Month not provided for non-piggybank envelope ${n}. Returning 0.`),0},resetData:async()=>{console.log(" Resetting all data"),t({isLoading:!0});try{const r=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(i=>i.useAuthStore.getState())).currentUser;r?(console.log(" Deleting all data from Firestore for user:",r.id),await fn.deleteAllUserData(r.id)):console.warn(" No user logged in, only clearing local state"),t({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null}),console.log(" Reset data complete")}catch(n){throw console.error(" resetData failed:",n),t({isLoading:!1,error:n instanceof Error?n.message:"Failed to reset data"}),n}},importData:async n=>{try{if(t({isLoading:!0,error:null}),!n||typeof n!="object")throw new Error("Invalid data format");const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("You must be logged in to restore data.");return console.log(" Starting Time Machine Restore for user:",i.id),await fn.restoreUserData(i.id,n),console.log(" Reloading app state from cloud..."),await e().init(),t({isLoading:!1}),{success:!0,message:"Data restored successfully from backup."}}catch(r){return console.error(" importData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},updateAppSettings:async n=>{try{t({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:n.theme??r.appSettings?.theme??"system",fontSize:n.fontSize??r.appSettings?.fontSize??"medium",enableMoveableReorder:n.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,paymentSources:n.paymentSources??r.appSettings?.paymentSources??[]};(n.userId||r.appSettings?.userId)&&(i.userId=n.userId??r.appSettings?.userId),i.paymentSources&&(i.paymentSources=i.paymentSources.map(c=>{const u={...c};return u.last4===void 0&&delete u.last4,u}));const o=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(o){const{AppSettingsService:c}=await Tt(async()=>{const{AppSettingsService:u}=await Promise.resolve().then(()=>PR);return{AppSettingsService:u}},void 0);await c.updateAppSettings(o.id,i.id,i)}t({appSettings:i,isLoading:!1}),console.log(" Updated app settings")}catch(r){throw console.error(" updateAppSettings failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(i){const{AppSettingsService:o}=await Tt(async()=>{const{AppSettingsService:u}=await Promise.resolve().then(()=>PR);return{AppSettingsService:u}},void 0),c=await o.getAppSettings(i.id);if(c){t({appSettings:c}),console.log(" Loaded app settings from Firestore");return}}const a={id:"default",theme:"system",fontSize:"medium",enableMoveableReorder:!0,paymentSources:[]};i&&(a.userId=i.id),t({appSettings:a}),console.log(" Initialized default app settings")}catch(n){console.error(" initializeAppSettings failed:",n),t({error:n instanceof Error?n.message:"Failed to initialize settings"})}},updatePiggybankContribution:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Updating piggybank contribution:",{envelopeId:n,newAmount:r});const a=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const o=e().envelopes.find(u=>u.id===n&&u.isPiggybank);if(!o)throw new Error("Piggybank not found");const c={...o,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:o.piggybankConfig?.targetAmount,color:o.piggybankConfig?.color,icon:o.piggybankConfig?.icon,paused:o.piggybankConfig?.paused??!1}};if(console.log(" Updating envelope in Firestore:",c),await fn.updateEnvelope(a.id,c),console.log(" Envelope updated successfully"),t(u=>({envelopes:u.envelopes.map(d=>d.id===n?c:d),isLoading:!1})),!o.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(n,r),setTimeout(()=>{e().transactions.find(d=>d.envelopeId===n&&(d.description==="Monthly Allocation"||d.description==="Piggybank Contribution"))||console.warn(" Piggybank contribution transaction not found after update")},1e3)}catch(u){console.error(" Failed to update piggybank contribution:",u)}console.log(" Piggybank contribution updated successfully")}catch(i){throw console.error(" updatePiggybankContribution failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}},addIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null});const a=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");console.log(" Adding income source:",{month:n,source:r});const o=await fn.createIncomeSource({...r,userId:a.id,month:n});t(c=>{const u=c.incomeSources[n]||[];return u.some(h=>h.id===o.id)?{isLoading:!1}:{incomeSources:{...c.incomeSources,[n]:[...u,o]},isLoading:!1}}),console.log(" Added income source:",o.id)}catch(i){throw console.error(" addIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Updating income source:",{month:n,sourceId:r.id}),t(o=>({incomeSources:{...o.incomeSources,[n]:o.incomeSources[n]?.map(c=>c.id===r.id?{...r,updatedAt:new Date().toISOString()}:c)||[]},isLoading:!1}));const a=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!a)return;await fn.updateIncomeSource(a.id,r.id,n,r),console.log(" Updated income source:",r.id)}catch(i){throw console.error(" updateIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Deleting income source:",{month:n,sourceId:r}),t(o=>({incomeSources:{...o.incomeSources,[n]:o.incomeSources[n]?.filter(c=>c.id!==r)||[]},isLoading:!1}));const a=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!a)return;await fn.deleteIncomeSource(a.id,r,n),console.log(" Deleted income source:",r)}catch(i){throw console.error(" deleteIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async n=>{try{t({isLoading:!0,error:null});const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(_=>_.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");console.log(" Copying allocations from previous month:",n);const[a,o]=n.split("-").map(Number);let c=a,u=o-1;u<1&&(c=a-1,u=12);const d=`${c}-${String(u).padStart(2,"0")}`;(!e().incomeSources[d]||!e().allocations[d])&&(console.log(` Previous month ${d} data missing, fetching...`),await e().fetchMonthData(d));const h=e().incomeSources[d]||[];if(console.log(` Found ${h.length} income sources from ${d}`),h.length>0){for(const _ of h){const{id:w,...E}=_;await e().addIncomeSource(n,E)}console.log(` Copied ${h.length} income sources to ${n}`)}const g=e().allocations[d]||[];console.log(` Found ${g.length} allocations from ${d}`);const m=g.filter(_=>{const w=e().envelopes.find(E=>E.id===_.envelopeId);return!!w&&!w.isPiggybank});if(m.length>0){for(const _ of m)await e().createEnvelopeAllocation({envelopeId:_.envelopeId,budgetedAmount:_.budgetedAmount,userId:i.id,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),_.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:_.budgetedAmount,envelopeId:_.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0});console.log(` Copied ${m.length} regular allocations to ${n}`)}const b=e().envelopes.filter(_=>_.isPiggybank);console.log(` Processing ${b.length} piggybanks for ${n}`);for(const _ of b){const w=_.piggybankConfig?.monthlyContribution,E=_.piggybankConfig?.paused??!1;if(!E&&w&&w>0)try{console.log(` Setting piggybank allocation for ${_.name}: ${w}`),await e().setEnvelopeAllocation(_.id,w)}catch(T){console.error(` Failed to set allocation for piggybank ${_.name}:`,T)}else console.log(` Skipping piggybank ${_.name} (paused=${E}, contribution=${w})`)}t({isLoading:!1}),console.log(` Complete monthly setup copied to ${n}`)}catch(r){throw console.error(" copyPreviousMonthAllocations failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(n,r)=>{try{t({isLoading:!0,error:null});const a=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(h=>h.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const o=e().currentMonth,c=e().envelopes.find(h=>h.id===n);if(!c){console.error(` setEnvelopeAllocation: Envelope ${n} not found in store! Aborting.`),t({isLoading:!1});return}const u=!!c.isPiggybank;console.log(` setEnvelopeAllocation called: envelopeId=${n}, amount=${r}, currentMonth=${o}, isPiggybank=${u}`);const d=e().allocations[o]?.find(h=>h.envelopeId===n);if(d?await e().updateEnvelopeAllocation(d.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r,userId:a.id,month:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),u&&r>0&&!c?.piggybankConfig?.paused){const h=e().transactions.find(g=>g.envelopeId===n&&g.month===o&&(g.description==="Monthly Allocation"||g.description==="Piggybank Contribution"));if(h){const g={...h,amount:r,description:"Piggybank Contribution"};await e().updateTransaction(g)}else{const g={description:"Piggybank Contribution",amount:r,envelopeId:n,type:"Income",month:o,date:`${o}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(g)}}if(!u&&r>0){const h=e().transactions.find(g=>g.envelopeId===n&&g.month===o&&(g.description==="Monthly Budget Allocation"||g.description==="Budgeted"));if(h){const g={...h,amount:r,description:"Budgeted"};await e().updateTransaction(g)}else{const g={description:"Budgeted",amount:r,envelopeId:n,type:"Income",month:o,date:`${o}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(g)}}console.log(" Envelope allocation set successfully")}catch(i){throw console.error(" setEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async n=>{try{const i=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=e().currentMonth,o=await fn.createEnvelopeAllocation({envelopeId:n.envelopeId,budgetedAmount:n.budgetedAmount,userId:i.id,month:a});t(c=>{const u=c.allocations[a]||[];return u.some(h=>h.id===o.id)?{isLoading:!1}:{allocations:{...c.allocations,[a]:[...u,o]},isLoading:!1}}),console.log(" Created envelope allocation:",o.id)}catch(r){throw console.error(" createEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(n,r)=>{try{console.log(" Updating envelope allocation:",{id:n,updates:r});const i=e().currentMonth,o=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(h=>h.useAuthStore.getState())).currentUser;if(!o)throw new Error("No authenticated user found");const c=e().allocations[i]?.find(h=>h.id===n);if(!c)throw new Error("Allocation not found");const u=e().envelopes.find(h=>h.id===c.envelopeId),d=u?.isPiggybank;if(await fn.updateEnvelopeAllocation(o.id,c.envelopeId,i,{budgetedAmount:r.budgetedAmount}),t(h=>({allocations:{...h.allocations,[i]:h.allocations[i]?.map(g=>g.id===n?{...g,...r,updatedAt:new Date().toISOString()}:g)||[]},isLoading:!1})),d&&r.budgetedAmount!==void 0){const h=e().transactions.find(g=>g.envelopeId===c.envelopeId&&g.month===i&&(g.description==="Monthly Allocation"||g.description==="Piggybank Contribution"));h?r.budgetedAmount>0&&!u?.piggybankConfig?.paused?await e().updateTransaction({...h,amount:r.budgetedAmount,description:"Piggybank Contribution"}):(r.budgetedAmount===0||u?.piggybankConfig?.paused)&&await e().deleteTransaction(h.id):r.budgetedAmount>0&&!u?.piggybankConfig?.paused&&await e().addTransaction({description:"Piggybank Contribution",amount:r.budgetedAmount,envelopeId:c.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!d&&r.budgetedAmount!==void 0){const h=e().transactions.find(g=>g.envelopeId===c.envelopeId&&g.month===i&&(g.description==="Monthly Budget Allocation"||g.description==="Budgeted"));h?r.budgetedAmount>0?await e().updateTransaction({...h,amount:r.budgetedAmount,description:"Budgeted"}):r.budgetedAmount===0&&await e().deleteTransaction(h.id):r.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:r.budgetedAmount,envelopeId:c.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}console.log(" Updated envelope allocation:",n)}catch(i){throw console.error(" updateEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async n=>{try{console.log(" Deleting envelope allocation:",n);const r=e().currentMonth,i=e().allocations[r]?.find(c=>c.id===n);if(!i){console.warn("Allocation not found in store, skipping delete");return}const o=(await Tt(()=>Promise.resolve().then(()=>Vt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!o)throw new Error("No authenticated user found");await fn.deleteEnvelopeAllocation(o.id,i.envelopeId,r),t(c=>({allocations:{...c.allocations,[r]:c.allocations[r]?.filter(u=>u.id!==n)||[]},isLoading:!1})),console.log(" Deleted envelope allocation:",n)}catch(r){throw console.error(" deleteEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const n=e().currentMonth,r=e().allocations[n]||[],i=e().incomeSources[n]||[],a=r.reduce((u,d)=>u+d.budgetedAmount,0);return i.reduce((u,d)=>u+d.amount,0)-a}catch(n){throw console.error(" refreshAvailableToBudget failed:",n),t({error:n instanceof Error?n.message:"Failed to refresh available to budget"}),n}},updateOnlineStatus:async()=>{try{const n=typeof navigator<"u"?navigator.onLine:!0;t({isOnline:n}),console.log(" Online status updated:",n)}catch(n){console.error(" Failed to update online status:",n)}},handleUserLogout:()=>{console.log(" Clearing user data on logout"),t({envelopes:[],transactions:[],categories:[],incomeSources:{},allocations:{},isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null})}}),{name:"budget-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,categories:t.categories,appSettings:t.appSettings,incomeSources:t.incomeSources,allocations:t.allocations,currentMonth:t.currentMonth,isOnline:t.isOnline})})));RQ({useBudgetStore:Jt,useAuthStore:Si,getCurrentUserId:rm});const DQ=Object.freeze(Object.defineProperty({__proto__:null,useBudgetStore:Jt},Symbol.toStringTag,{value:"Module"}));var uu=9e15,Jo=1e9,E1="0123456789abcdef",Km="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Qm="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",T1={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-uu,maxE:uu,crypto:!1},EP,hs,tt=!0,q0="[DecimalError] ",Yo=q0+"Invalid argument: ",TP=q0+"Precision limit exceeded",AP=q0+"crypto unavailable",CP="[object Decimal]",hr=Math.floor,Bn=Math.pow,NQ=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,IQ=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,MQ=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,kP=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xi=1e7,We=7,OQ=9007199254740991,PQ=Km.length-1,A1=Qm.length-1,Ee={toStringTag:CP};Ee.absoluteValue=Ee.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ge(t)};Ee.ceil=function(){return Ge(new this.constructor(this),this.e+1,2)};Ee.clampedTo=Ee.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Yo+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};Ee.comparedTo=Ee.cmp=function(t){var e,n,r,i,a=this,o=a.d,c=(t=new a.constructor(t)).d,u=a.s,d=t.s;if(!o||!c)return!u||!d?NaN:u!==d?u:o===c?0:!o^u<0?1:-1;if(!o[0]||!c[0])return o[0]?u:c[0]?-d:0;if(u!==d)return u;if(a.e!==t.e)return a.e>t.e^u<0?1:-1;for(r=o.length,i=c.length,e=0,n=r<i?r:i;e<n;++e)if(o[e]!==c[e])return o[e]>c[e]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};Ee.cosine=Ee.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+We,r.rounding=1,n=jQ(r,MP(r,n)),r.precision=t,r.rounding=e,Ge(hs==2||hs==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};Ee.cubeRoot=Ee.cbrt=function(){var t,e,n,r,i,a,o,c,u,d,h=this,g=h.constructor;if(!h.isFinite()||h.isZero())return new g(h);for(tt=!1,a=h.s*Bn(h.s*h,1/3),!a||Math.abs(a)==1/0?(n=rr(h.d),t=h.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=Bn(n,1/3),t=hr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new g(n),r.s=h.s):r=new g(a.toString()),o=(t=g.precision)+3;;)if(c=r,u=c.times(c).times(c),d=u.plus(h),r=Ht(d.plus(h).times(c),d.plus(u),o+2,1),rr(c.d).slice(0,o)===(n=rr(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(Ge(c,t+1,0),c.times(c).times(c).eq(h))){r=c;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Ge(r,t+1,1),e=!r.times(r).times(r).eq(h));break}return tt=!0,Ge(r,t,g.rounding,e)};Ee.decimalPlaces=Ee.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-hr(this.e/We))*We,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};Ee.dividedBy=Ee.div=function(t){return Ht(this,new this.constructor(t))};Ee.dividedToIntegerBy=Ee.divToInt=function(t){var e=this,n=e.constructor;return Ge(Ht(e,new n(t),0,1,1),n.precision,n.rounding)};Ee.equals=Ee.eq=function(t){return this.cmp(t)===0};Ee.floor=function(){return Ge(new this.constructor(this),this.e+1,3)};Ee.greaterThan=Ee.gt=function(t){return this.cmp(t)>0};Ee.greaterThanOrEqualTo=Ee.gte=function(t){var e=this.cmp(t);return e==1||e===0};Ee.hyperbolicCosine=Ee.cosh=function(){var t,e,n,r,i,a=this,o=a.constructor,c=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return c;n=o.precision,r=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/X0(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=ju(o,1,a.times(e),new o(1),!0);for(var u,d=t,h=new o(8);d--;)u=a.times(a),a=c.minus(u.times(h.minus(u.times(h))));return Ge(a,o.precision=n,o.rounding=r,!0)};Ee.hyperbolicSine=Ee.sinh=function(){var t,e,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=ju(a,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/X0(5,t)),i=ju(a,2,i,i,!0);for(var o,c=new a(5),u=new a(16),d=new a(20);t--;)o=i.times(i),i=i.times(c.plus(o.times(u.times(o).plus(d))))}return a.precision=e,a.rounding=n,Ge(i,e,n,!0)};Ee.hyperbolicTangent=Ee.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,Ht(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};Ee.inverseCosine=Ee.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?Ta(e,r,i):new e(0):new e(NaN):t.isZero()?Ta(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))};Ee.inverseHyperbolicCosine=Ee.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,tt=!1,n=n.times(n).minus(1).sqrt().plus(n),tt=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};Ee.inverseHyperbolicSine=Ee.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,tt=!1,n=n.times(n).plus(1).sqrt().plus(n),tt=!0,r.precision=t,r.rounding=e,n.ln())};Ee.inverseHyperbolicTangent=Ee.atanh=function(){var t,e,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Ge(new a(i),t,e,!0):(a.precision=n=r-i.e,i=Ht(i.plus(1),new a(1).minus(i),n+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};Ee.inverseSine=Ee.asin=function(){var t,e,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),n=a.precision,r=a.rounding,e!==-1?e===0?(t=Ta(a,n+4,r).times(.5),t.s=i.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))};Ee.inverseTangent=Ee.atan=function(){var t,e,n,r,i,a,o,c,u,d=this,h=d.constructor,g=h.precision,m=h.rounding;if(d.isFinite()){if(d.isZero())return new h(d);if(d.abs().eq(1)&&g+4<=A1)return o=Ta(h,g+4,m).times(.25),o.s=d.s,o}else{if(!d.s)return new h(NaN);if(g+4<=A1)return o=Ta(h,g+4,m).times(.5),o.s=d.s,o}for(h.precision=c=g+10,h.rounding=1,n=Math.min(28,c/We+2|0),t=n;t;--t)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(tt=!1,e=Math.ceil(c/We),r=1,u=d.times(d),o=new h(d),i=d;t!==-1;)if(i=i.times(u),a=o.minus(i.div(r+=2)),i=i.times(u),o=a.plus(i.div(r+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),tt=!0,Ge(o,h.precision=g,h.rounding=m,!0)};Ee.isFinite=function(){return!!this.d};Ee.isInteger=Ee.isInt=function(){return!!this.d&&hr(this.e/We)>this.d.length-2};Ee.isNaN=function(){return!this.s};Ee.isNegative=Ee.isNeg=function(){return this.s<0};Ee.isPositive=Ee.isPos=function(){return this.s>0};Ee.isZero=function(){return!!this.d&&this.d[0]===0};Ee.lessThan=Ee.lt=function(t){return this.cmp(t)<0};Ee.lessThanOrEqualTo=Ee.lte=function(t){return this.cmp(t)<1};Ee.logarithm=Ee.log=function(t){var e,n,r,i,a,o,c,u,d=this,h=d.constructor,g=h.precision,m=h.rounding,b=5;if(t==null)t=new h(10),e=!0;else{if(t=new h(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new h(NaN);e=t.eq(10)}if(n=d.d,d.s<0||!n||!n[0]||d.eq(1))return new h(n&&!n[0]?-1/0:d.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=i!==1}if(tt=!1,c=g+b,o=Ao(d,c),r=e?Zm(h,c+10):Ao(t,c),u=Ht(o,r,c,1),oh(u.d,i=g,m))do if(c+=10,o=Ao(d,c),r=e?Zm(h,c+10):Ao(t,c),u=Ht(o,r,c,1),!a){+rr(u.d).slice(i+1,i+15)+1==1e14&&(u=Ge(u,g+1,0));break}while(oh(u.d,i+=10,m));return tt=!0,Ge(u,g,m)};Ee.minus=Ee.sub=function(t){var e,n,r,i,a,o,c,u,d,h,g,m,b=this,_=b.constructor;if(t=new _(t),!b.d||!t.d)return!b.s||!t.s?t=new _(NaN):b.d?t.s=-t.s:t=new _(t.d||b.s!==t.s?b:NaN),t;if(b.s!=t.s)return t.s=-t.s,b.plus(t);if(d=b.d,m=t.d,c=_.precision,u=_.rounding,!d[0]||!m[0]){if(m[0])t.s=-t.s;else if(d[0])t=new _(b);else return new _(u===3?-0:0);return tt?Ge(t,c,u):t}if(n=hr(t.e/We),h=hr(b.e/We),d=d.slice(),a=h-n,a){for(g=a<0,g?(e=d,a=-a,o=m.length):(e=m,n=h,o=d.length),r=Math.max(Math.ceil(c/We),o)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=d.length,o=m.length,g=r<o,g&&(o=r),r=0;r<o;r++)if(d[r]!=m[r]){g=d[r]<m[r];break}a=0}for(g&&(e=d,d=m,m=e,t.s=-t.s),o=d.length,r=m.length-o;r>0;--r)d[o++]=0;for(r=m.length;r>a;){if(d[--r]<m[r]){for(i=r;i&&d[--i]===0;)d[i]=Xi-1;--d[i],d[r]+=Xi}d[r]-=m[r]}for(;d[--o]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=Y0(d,n),tt?Ge(t,c,u):t):new _(u===3?-0:0)};Ee.modulo=Ee.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Ge(new r(n),r.precision,r.rounding):(tt=!1,r.modulo==9?(e=Ht(n,t.abs(),0,3,1),e.s*=t.s):e=Ht(n,t,0,r.modulo,1),e=e.times(t),tt=!0,n.minus(e))};Ee.naturalExponential=Ee.exp=function(){return C1(this)};Ee.naturalLogarithm=Ee.ln=function(){return Ao(this)};Ee.negated=Ee.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ge(t)};Ee.plus=Ee.add=function(t){var e,n,r,i,a,o,c,u,d,h,g=this,m=g.constructor;if(t=new m(t),!g.d||!t.d)return!g.s||!t.s?t=new m(NaN):g.d||(t=new m(t.d||g.s===t.s?g:NaN)),t;if(g.s!=t.s)return t.s=-t.s,g.minus(t);if(d=g.d,h=t.d,c=m.precision,u=m.rounding,!d[0]||!h[0])return h[0]||(t=new m(g)),tt?Ge(t,c,u):t;if(a=hr(g.e/We),r=hr(t.e/We),d=d.slice(),i=a-r,i){for(i<0?(n=d,i=-i,o=h.length):(n=h,r=a,o=d.length),a=Math.ceil(c/We),o=a>o?a+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=d.length,i=h.length,o-i<0&&(i=o,n=h,h=d,d=n),e=0;i;)e=(d[--i]=d[i]+h[i]+e)/Xi|0,d[i]%=Xi;for(e&&(d.unshift(e),++r),o=d.length;d[--o]==0;)d.pop();return t.d=d,t.e=Y0(d,r),tt?Ge(t,c,u):t};Ee.precision=Ee.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Yo+t);return n.d?(e=RP(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};Ee.round=function(){var t=this,e=t.constructor;return Ge(new e(t),t.e+1,e.rounding)};Ee.sine=Ee.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+We,r.rounding=1,n=zQ(r,MP(r,n)),r.precision=t,r.rounding=e,Ge(hs>2?n.neg():n,t,e,!0)):new r(NaN)};Ee.squareRoot=Ee.sqrt=function(){var t,e,n,r,i,a,o=this,c=o.d,u=o.e,d=o.s,h=o.constructor;if(d!==1||!c||!c[0])return new h(!d||d<0&&(!c||c[0])?NaN:c?o:1/0);for(tt=!1,d=Math.sqrt(+o),d==0||d==1/0?(e=rr(c),(e.length+u)%2==0&&(e+="0"),d=Math.sqrt(e),u=hr((u+1)/2)-(u<0||u%2),d==1/0?e="5e"+u:(e=d.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new h(e)):r=new h(d.toString()),n=(u=h.precision)+3;;)if(a=r,r=a.plus(Ht(o,a,n+2,1)).times(.5),rr(a.d).slice(0,n)===(e=rr(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ge(a,u+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ge(r,u+1,1),t=!r.times(r).eq(o));break}return tt=!0,Ge(r,u,h.rounding,t)};Ee.tangent=Ee.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=Ht(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Ge(hs==2||hs==4?n.neg():n,t,e,!0)):new r(NaN)};Ee.times=Ee.mul=function(t){var e,n,r,i,a,o,c,u,d,h=this,g=h.constructor,m=h.d,b=(t=new g(t)).d;if(t.s*=h.s,!m||!m[0]||!b||!b[0])return new g(!t.s||m&&!m[0]&&!b||b&&!b[0]&&!m?NaN:!m||!b?t.s/0:t.s*0);for(n=hr(h.e/We)+hr(t.e/We),u=m.length,d=b.length,u<d&&(a=m,m=b,b=a,o=u,u=d,d=o),a=[],o=u+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(e=0,i=u+r;i>r;)c=a[i]+b[r]*m[i-r-1]+e,a[i--]=c%Xi|0,e=c/Xi|0;a[i]=(a[i]+e)%Xi|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=Y0(a,n),tt?Ge(t,g.precision,g.rounding):t};Ee.toBinary=function(t,e){return eS(this,2,t,e)};Ee.toDecimalPlaces=Ee.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Lr(t,0,Jo),e===void 0?e=r.rounding:Lr(e,0,8),Ge(n,t+n.e+1,e))};Ee.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=za(r,!0):(Lr(t,0,Jo),e===void 0?e=i.rounding:Lr(e,0,8),r=Ge(new i(r),t+1,e),n=za(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Ee.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?n=za(i):(Lr(t,0,Jo),e===void 0?e=a.rounding:Lr(e,0,8),r=Ge(new a(i),t+i.e+1,e),n=za(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};Ee.toFraction=function(t){var e,n,r,i,a,o,c,u,d,h,g,m,b=this,_=b.d,w=b.constructor;if(!_)return new w(b);if(d=n=new w(1),r=u=new w(0),e=new w(r),a=e.e=RP(_)-b.e-1,o=a%We,e.d[0]=Bn(10,o<0?We+o:o),t==null)t=a>0?e:d;else{if(c=new w(t),!c.isInt()||c.lt(d))throw Error(Yo+c);t=c.gt(e)?a>0?e:d:c}for(tt=!1,c=new w(rr(_)),h=w.precision,w.precision=a=_.length*We*2;g=Ht(c,e,0,1,1),i=n.plus(g.times(r)),i.cmp(t)!=1;)n=r,r=i,i=d,d=u.plus(g.times(i)),u=i,i=e,e=c.minus(g.times(i)),c=i;return i=Ht(t.minus(n),r,0,1,1),u=u.plus(i.times(d)),n=n.plus(i.times(r)),u.s=d.s=b.s,m=Ht(d,r,a,1).minus(b).abs().cmp(Ht(u,n,a,1).minus(b).abs())<1?[d,r]:[u,n],w.precision=h,tt=!0,m};Ee.toHexadecimal=Ee.toHex=function(t,e){return eS(this,16,t,e)};Ee.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:Lr(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(tt=!1,n=Ht(n,t,0,e,1).times(t),tt=!0,Ge(n)):(t.s=n.s,n=t),n};Ee.toNumber=function(){return+this};Ee.toOctal=function(t,e){return eS(this,8,t,e)};Ee.toPower=Ee.pow=function(t){var e,n,r,i,a,o,c=this,u=c.constructor,d=+(t=new u(t));if(!c.d||!t.d||!c.d[0]||!t.d[0])return new u(Bn(+c,d));if(c=new u(c),c.eq(1))return c;if(r=u.precision,a=u.rounding,t.eq(1))return Ge(c,r,a);if(e=hr(t.e/We),e>=t.d.length-1&&(n=d<0?-d:d)<=OQ)return i=DP(u,c,n,r),t.s<0?new u(1).div(i):Ge(i,r,a);if(o=c.s,o<0){if(e<t.d.length-1)return new u(NaN);if((t.d[e]&1)==0&&(o=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=o,c}return n=Bn(+c,d),e=n==0||!isFinite(n)?hr(d*(Math.log("0."+rr(c.d))/Math.LN10+c.e+1)):new u(n+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(tt=!1,u.rounding=c.s=1,n=Math.min(12,(e+"").length),i=C1(t.times(Ao(c,r+n)),r),i.d&&(i=Ge(i,r+5,1),oh(i.d,r,a)&&(e=r+10,i=Ge(C1(t.times(Ao(c,e+n)),e),e+5,1),+rr(i.d).slice(r+1,r+15)+1==1e14&&(i=Ge(i,r+1,0)))),i.s=o,tt=!0,u.rounding=a,Ge(i,r,a))};Ee.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=za(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Lr(t,1,Jo),e===void 0?e=i.rounding:Lr(e,0,8),r=Ge(new i(r),t,e),n=za(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};Ee.toSignificantDigits=Ee.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Lr(t,1,Jo),e===void 0?e=r.rounding:Lr(e,0,8)),Ge(new r(n),t,e)};Ee.toString=function(){var t=this,e=t.constructor,n=za(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};Ee.truncated=Ee.trunc=function(){return Ge(new this.constructor(this),this.e+1,1)};Ee.valueOf=Ee.toJSON=function(){var t=this,e=t.constructor,n=za(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function rr(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=We-r.length,n&&(a+=mo(n)),a+=r;o=t[e],r=o+"",n=We-r.length,n&&(a+=mo(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function Lr(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Yo+t)}function oh(t,e,n,r){var i,a,o,c;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=We,i=0):(i=Math.ceil((e+1)/We),e%=We),a=Bn(10,We-e),c=t[i]%a|0,r==null?e<3?(e==0?c=c/100|0:e==1&&(c=c/10|0),o=n<4&&c==99999||n>3&&c==49999||c==5e4||c==0):o=(n<4&&c+1==a||n>3&&c+1==a/2)&&(t[i+1]/a/100|0)==Bn(10,e-2)-1||(c==a/2||c==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?c=c/1e3|0:e==1?c=c/100|0:e==2&&(c=c/10|0),o=(r||n<4)&&c==9999||!r&&n>3&&c==4999):o=((r||n<4)&&c+1==a||!r&&n>3&&c+1==a/2)&&(t[i+1]/a/1e3|0)==Bn(10,e-3)-1,o}function im(t,e,n){for(var r,i=[0],a,o=0,c=t.length;o<c;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=E1.indexOf(t.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function jQ(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/X0(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=ju(t,1,e.times(i),new t(1));for(var a=n;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}var Ht=(function(){function t(r,i,a){var o,c=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+c,r[u]=o%a|0,c=o/a|0;return c&&r.unshift(c),r}function e(r,i,a,o){var c,u;if(a!=o)u=a>o?1:-1;else for(c=u=0;c<a;c++)if(r[c]!=i[c]){u=r[c]>i[c]?1:-1;break}return u}function n(r,i,a,o){for(var c=0;a--;)r[a]-=c,c=r[a]<i[a]?1:0,r[a]=c*o+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o,c,u){var d,h,g,m,b,_,w,E,T,C,N,V,P,M,A,k,D,j,L,U,O=r.constructor,Z=r.s==i.s?1:-1,X=r.d,q=i.d;if(!X||!X[0]||!q||!q[0])return new O(!r.s||!i.s||(X?q&&X[0]==q[0]:!q)?NaN:X&&X[0]==0||!q?Z*0:Z/0);for(u?(b=1,h=r.e-i.e):(u=Xi,b=We,h=hr(r.e/b)-hr(i.e/b)),L=q.length,D=X.length,T=new O(Z),C=T.d=[],g=0;q[g]==(X[g]||0);g++);if(q[g]>(X[g]||0)&&h--,a==null?(M=a=O.precision,o=O.rounding):c?M=a+(r.e-i.e)+1:M=a,M<0)C.push(1),_=!0;else{if(M=M/b+2|0,g=0,L==1){for(m=0,q=q[0],M++;(g<D||m)&&M--;g++)A=m*u+(X[g]||0),C[g]=A/q|0,m=A%q|0;_=m||g<D}else{for(m=u/(q[0]+1)|0,m>1&&(q=t(q,m,u),X=t(X,m,u),L=q.length,D=X.length),k=L,N=X.slice(0,L),V=N.length;V<L;)N[V++]=0;U=q.slice(),U.unshift(0),j=q[0],q[1]>=u/2&&++j;do m=0,d=e(q,N,L,V),d<0?(P=N[0],L!=V&&(P=P*u+(N[1]||0)),m=P/j|0,m>1?(m>=u&&(m=u-1),w=t(q,m,u),E=w.length,V=N.length,d=e(w,N,E,V),d==1&&(m--,n(w,L<E?U:q,E,u))):(m==0&&(d=m=1),w=q.slice()),E=w.length,E<V&&w.unshift(0),n(N,w,V,u),d==-1&&(V=N.length,d=e(q,N,L,V),d<1&&(m++,n(N,L<V?U:q,V,u))),V=N.length):d===0&&(m++,N=[0]),C[g++]=m,d&&N[0]?N[V++]=X[k]||0:(N=[X[k]],V=1);while((k++<D||N[0]!==void 0)&&M--);_=N[0]!==void 0}C[0]||C.shift()}if(b==1)T.e=h,EP=_;else{for(g=1,m=C[0];m>=10;m/=10)g++;T.e=g+h*b-1,Ge(T,c?a+T.e+1:a,o,_)}return T}})();function Ge(t,e,n,r){var i,a,o,c,u,d,h,g,m,b=t.constructor;e:if(e!=null){if(g=t.d,!g)return t;for(i=1,c=g[0];c>=10;c/=10)i++;if(a=e-i,a<0)a+=We,o=e,h=g[m=0],u=h/Bn(10,i-o-1)%10|0;else if(m=Math.ceil((a+1)/We),c=g.length,m>=c)if(r){for(;c++<=m;)g.push(0);h=u=0,i=1,a%=We,o=a-We+1}else break e;else{for(h=c=g[m],i=1;c>=10;c/=10)i++;a%=We,o=a-We+i,u=o<0?0:h/Bn(10,i-o-1)%10|0}if(r=r||e<0||g[m+1]!==void 0||(o<0?h:h%Bn(10,i-o-1)),d=n<4?(u||r)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(a>0?o>0?h/Bn(10,i-o):0:g[m-1])%10&1||n==(t.s<0?8:7)),e<1||!g[0])return g.length=0,d?(e-=t.e+1,g[0]=Bn(10,(We-e%We)%We),t.e=-e||0):g[0]=t.e=0,t;if(a==0?(g.length=m,c=1,m--):(g.length=m+1,c=Bn(10,We-a),g[m]=o>0?(h/Bn(10,i-o)%Bn(10,o)|0)*c:0),d)for(;;)if(m==0){for(a=1,o=g[0];o>=10;o/=10)a++;for(o=g[0]+=c,c=1;o>=10;o/=10)c++;a!=c&&(t.e++,g[0]==Xi&&(g[0]=1));break}else{if(g[m]+=c,g[m]!=Xi)break;g[m--]=0,c=1}for(a=g.length;g[--a]===0;)g.pop()}return tt&&(t.e>b.maxE?(t.d=null,t.e=NaN):t.e<b.minE&&(t.e=0,t.d=[0])),t}function za(t,e,n){if(!t.isFinite())return IP(t);var r,i=t.e,a=rr(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+mo(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+mo(-i-1)+a,n&&(r=n-o)>0&&(a+=mo(r))):i>=o?(a+=mo(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+mo(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=mo(r))),a}function Y0(t,e){var n=t[0];for(e*=We;n>=10;n/=10)e++;return e}function Zm(t,e,n){if(e>PQ)throw tt=!0,n&&(t.precision=n),Error(TP);return Ge(new t(Km),e,1,!0)}function Ta(t,e,n){if(e>A1)throw Error(TP);return Ge(new t(Qm),e,n,!0)}function RP(t){var e=t.length-1,n=e*We+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function mo(t){for(var e="";t--;)e+="0";return e}function DP(t,e,n,r){var i,a=new t(1),o=Math.ceil(r/We+4);for(tt=!1;;){if(n%2&&(a=a.times(e),zR(a.d,o)&&(i=!0)),n=hr(n/2),n===0){n=a.d.length-1,i&&a.d[n]===0&&++a.d[n];break}e=e.times(e),zR(e.d,o)}return tt=!0,a}function VR(t){return t.d[t.d.length-1]&1}function NP(t,e,n){for(var r,i,a=new t(e[0]),o=0;++o<e.length;){if(i=new t(e[o]),!i.s){a=i;break}r=a.cmp(i),(r===n||r===0&&a.s===n)&&(a=i)}return a}function C1(t,e){var n,r,i,a,o,c,u,d=0,h=0,g=0,m=t.constructor,b=m.rounding,_=m.precision;if(!t.d||!t.d[0]||t.e>17)return new m(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(tt=!1,u=_):u=e,c=new m(.03125);t.e>-2;)t=t.times(c),g+=5;for(r=Math.log(Bn(2,g))/Math.LN10*2+5|0,u+=r,n=a=o=new m(1),m.precision=u;;){if(a=Ge(a.times(t),u,1),n=n.times(++h),c=o.plus(Ht(a,n,u,1)),rr(c.d).slice(0,u)===rr(o.d).slice(0,u)){for(i=g;i--;)o=Ge(o.times(o),u,1);if(e==null)if(d<3&&oh(o.d,u-r,b,d))m.precision=u+=10,n=a=c=new m(1),h=0,d++;else return Ge(o,m.precision=_,b,tt=!0);else return m.precision=_,o}o=c}}function Ao(t,e){var n,r,i,a,o,c,u,d,h,g,m,b=1,_=10,w=t,E=w.d,T=w.constructor,C=T.rounding,N=T.precision;if(w.s<0||!E||!E[0]||!w.e&&E[0]==1&&E.length==1)return new T(E&&!E[0]?-1/0:w.s!=1?NaN:E?0:w);if(e==null?(tt=!1,h=N):h=e,T.precision=h+=_,n=rr(E),r=n.charAt(0),Math.abs(a=w.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)w=w.times(t),n=rr(w.d),r=n.charAt(0),b++;a=w.e,r>1?(w=new T("0."+n),a++):w=new T(r+"."+n.slice(1))}else return d=Zm(T,h+2,N).times(a+""),w=Ao(new T(r+"."+n.slice(1)),h-_).plus(d),T.precision=N,e==null?Ge(w,N,C,tt=!0):w;for(g=w,u=o=w=Ht(w.minus(1),w.plus(1),h,1),m=Ge(w.times(w),h,1),i=3;;){if(o=Ge(o.times(m),h,1),d=u.plus(Ht(o,new T(i),h,1)),rr(d.d).slice(0,h)===rr(u.d).slice(0,h))if(u=u.times(2),a!==0&&(u=u.plus(Zm(T,h+2,N).times(a+""))),u=Ht(u,new T(b),h,1),e==null)if(oh(u.d,h-_,C,c))T.precision=h+=_,d=o=w=Ht(g.minus(1),g.plus(1),h,1),m=Ge(w.times(w),h,1),i=c=1;else return Ge(u,T.precision=N,C,tt=!0);else return T.precision=N,u;u=d,i+=2}}function IP(t){return String(t.s*t.s/0)}function am(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%We,n<0&&(r+=We),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=We;r<i;)t.d.push(+e.slice(r,r+=We));e=e.slice(r),r=We-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),tt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function VQ(t,e){var n,r,i,a,o,c,u,d,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),kP.test(e))return am(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(IQ.test(e))n=16,e=e.toLowerCase();else if(NQ.test(e))n=2;else if(MQ.test(e))n=8;else throw Error(Yo+e);for(a=e.search(/p/i),a>0?(u=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,r=t.constructor,o&&(e=e.replace(".",""),c=e.length,a=c-a,i=DP(r,new r(n),a,a*2)),d=im(e,n,Xi),h=d.length-1,a=h;d[a]===0;--a)d.pop();return a<0?new r(t.s*0):(t.e=Y0(d,h),t.d=d,tt=!1,o&&(t=Ht(t,i,c*4)),u&&(t=t.times(Math.abs(u)<54?Bn(2,u):Vu.pow(2,u))),tt=!0,t)}function zQ(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:ju(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/X0(5,n)),e=ju(t,2,e,e);for(var i,a=new t(5),o=new t(16),c=new t(20);n--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(c))));return e}function ju(t,e,n,r,i){var a,o,c,u,d=t.precision,h=Math.ceil(d/We);for(tt=!1,u=n.times(n),c=new t(r);;){if(o=Ht(c.times(u),new t(e++*e++),d,1),c=i?r.plus(o):r.minus(o),r=Ht(o.times(u),new t(e++*e++),d,1),o=c.plus(r),o.d[h]!==void 0){for(a=h;o.d[a]===c.d[a]&&a--;);if(a==-1)break}a=c,c=r,r=o,o=a}return tt=!0,o.d.length=h+1,o}function X0(t,e){for(var n=t;--e;)n*=t;return n}function MP(t,e){var n,r=e.s<0,i=Ta(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return hs=r?4:1,e;if(n=e.divToInt(i),n.isZero())hs=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(a))return hs=VR(n)?r?2:3:r?4:1,e;hs=VR(n)?r?1:4:r?3:2}return e.minus(i).abs()}function eS(t,e,n,r){var i,a,o,c,u,d,h,g,m,b=t.constructor,_=n!==void 0;if(_?(Lr(n,1,Jo),r===void 0?r=b.rounding:Lr(r,0,8)):(n=b.precision,r=b.rounding),!t.isFinite())h=IP(t);else{for(h=za(t),o=h.indexOf("."),_?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,o>=0&&(h=h.replace(".",""),m=new b(1),m.e=h.length-o,m.d=im(za(m),10,i),m.e=m.d.length),g=im(h,10,i),a=u=g.length;g[--u]==0;)g.pop();if(!g[0])h=_?"0p+0":"0";else{if(o<0?a--:(t=new b(t),t.d=g,t.e=a,t=Ht(t,m,n,r,0,i),g=t.d,a=t.e,d=EP),o=g[n],c=i/2,d=d||g[n+1]!==void 0,d=r<4?(o!==void 0||d)&&(r===0||r===(t.s<0?3:2)):o>c||o===c&&(r===4||d||r===6&&g[n-1]&1||r===(t.s<0?8:7)),g.length=n,d)for(;++g[--n]>i-1;)g[n]=0,n||(++a,g.unshift(1));for(u=g.length;!g[u-1];--u);for(o=0,h="";o<u;o++)h+=E1.charAt(g[o]);if(_){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)h+="0";for(g=im(h,i,e),u=g.length;!g[u-1];--u);for(o=1,h="1.";o<u;o++)h+=E1.charAt(g[o])}else h=h.charAt(0)+"."+h.slice(1);h=h+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)h="0"+h;h="0."+h}else if(++a>u)for(a-=u;a--;)h+="0";else a<u&&(h=h.slice(0,a)+"."+h.slice(a))}h=(e==16?"0x":e==2?"0b":e==8?"0o":"")+h}return t.s<0?"-"+h:h}function zR(t,e){if(t.length>e)return t.length=e,!0}function LQ(t){return new this(t).abs()}function BQ(t){return new this(t).acos()}function UQ(t){return new this(t).acosh()}function FQ(t,e){return new this(t).plus(e)}function GQ(t){return new this(t).asin()}function $Q(t){return new this(t).asinh()}function HQ(t){return new this(t).atan()}function qQ(t){return new this(t).atanh()}function YQ(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,a=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=Ta(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?Ta(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=Ta(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(Ht(t,e,a,1)),e=Ta(this,a,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(Ht(t,e,a,1)),n}function XQ(t){return new this(t).cbrt()}function WQ(t){return Ge(t=new this(t),t.e+1,2)}function KQ(t,e,n){return new this(t).clamp(e,n)}function QQ(t){if(!t||typeof t!="object")throw Error(q0+"Object expected");var e,n,r,i=t.defaults===!0,a=["precision",1,Jo,"rounding",0,8,"toExpNeg",-uu,0,"toExpPos",0,uu,"maxE",0,uu,"minE",-uu,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],i&&(this[n]=T1[n]),(r=t[n])!==void 0)if(hr(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(Yo+n+": "+r);if(n="crypto",i&&(this[n]=T1[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(AP);else this[n]=!1;else throw Error(Yo+n+": "+r);return this}function ZQ(t){return new this(t).cos()}function JQ(t){return new this(t).cosh()}function OP(t){var e,n,r;function i(a){var o,c,u,d=this;if(!(d instanceof i))return new i(a);if(d.constructor=i,LR(a)){d.s=a.s,tt?!a.d||a.e>i.maxE?(d.e=NaN,d.d=null):a.e<i.minE?(d.e=0,d.d=[0]):(d.e=a.e,d.d=a.d.slice()):(d.e=a.e,d.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){d.s=1/a<0?-1:1,d.e=0,d.d=[0];return}if(a<0?(a=-a,d.s=-1):d.s=1,a===~~a&&a<1e7){for(o=0,c=a;c>=10;c/=10)o++;tt?o>i.maxE?(d.e=NaN,d.d=null):o<i.minE?(d.e=0,d.d=[0]):(d.e=o,d.d=[a]):(d.e=o,d.d=[a]);return}if(a*0!==0){a||(d.s=NaN),d.e=NaN,d.d=null;return}return am(d,a.toString())}if(u==="string")return(c=a.charCodeAt(0))===45?(a=a.slice(1),d.s=-1):(c===43&&(a=a.slice(1)),d.s=1),kP.test(a)?am(d,a):VQ(d,a);if(u==="bigint")return a<0?(a=-a,d.s=-1):d.s=1,am(d,a.toString());throw Error(Yo+a)}if(i.prototype=Ee,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=QQ,i.clone=OP,i.isDecimal=LR,i.abs=LQ,i.acos=BQ,i.acosh=UQ,i.add=FQ,i.asin=GQ,i.asinh=$Q,i.atan=HQ,i.atanh=qQ,i.atan2=YQ,i.cbrt=XQ,i.ceil=WQ,i.clamp=KQ,i.cos=ZQ,i.cosh=JQ,i.div=eZ,i.exp=tZ,i.floor=nZ,i.hypot=rZ,i.ln=iZ,i.log=aZ,i.log10=oZ,i.log2=sZ,i.max=lZ,i.min=cZ,i.mod=uZ,i.mul=dZ,i.pow=fZ,i.random=hZ,i.round=pZ,i.sign=gZ,i.sin=mZ,i.sinh=vZ,i.sqrt=yZ,i.sub=bZ,i.sum=xZ,i.tan=_Z,i.tanh=wZ,i.trunc=SZ,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function eZ(t,e){return new this(t).div(e)}function tZ(t){return new this(t).exp()}function nZ(t){return Ge(t=new this(t),t.e+1,3)}function rZ(){var t,e,n=new this(0);for(tt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return tt=!0,new this(1/0);n=e}return tt=!0,n.sqrt()}function LR(t){return t instanceof Vu||t&&t.toStringTag===CP||!1}function iZ(t){return new this(t).ln()}function aZ(t,e){return new this(t).log(e)}function sZ(t){return new this(t).log(2)}function oZ(t){return new this(t).log(10)}function lZ(){return NP(this,arguments,-1)}function cZ(){return NP(this,arguments,1)}function uZ(t,e){return new this(t).mod(e)}function dZ(t,e){return new this(t).mul(e)}function fZ(t,e){return new this(t).pow(e)}function hZ(t){var e,n,r,i,a=0,o=new this(1),c=[];if(t===void 0?t=this.precision:Lr(t,1,Jo),r=Math.ceil(t/We),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:c[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(c.push(i%1e7),a+=4);a=r/4}else throw Error(AP);else for(;a<r;)c[a++]=Math.random()*1e7|0;for(r=c[--a],t%=We,r&&t&&(i=Bn(10,We-t),c[a]=(r/i|0)*i);c[a]===0;a--)c.pop();if(a<0)n=0,c=[0];else{for(n=-1;c[0]===0;n-=We)c.shift();for(r=1,i=c[0];i>=10;i/=10)r++;r<We&&(n-=We-r)}return o.e=n,o.d=c,o}function pZ(t){return Ge(t=new this(t),t.e+1,this.rounding)}function gZ(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function mZ(t){return new this(t).sin()}function vZ(t){return new this(t).sinh()}function yZ(t){return new this(t).sqrt()}function bZ(t,e){return new this(t).sub(e)}function xZ(){var t=0,e=arguments,n=new this(e[t]);for(tt=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return tt=!0,Ge(n,this.precision,this.rounding)}function _Z(t){return new this(t).tan()}function wZ(t){return new this(t).tanh()}function SZ(t){return Ge(t=new this(t),t.e+1,1)}Ee[Symbol.for("nodejs.util.inspect.custom")]=Ee.toString;Ee[Symbol.toStringTag]="Decimal";var Vu=Ee.constructor=OP(T1);Km=new Vu(Km);Qm=new Vu(Qm);const BR=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&t.seconds!==void 0)return new Date(t.seconds*1e3);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}if(typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?null:e}return null},EZ=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,reorderEnvelopes:a}=Jt(),{currentUser:o}=Si(),{currentMonth:c,incomeSources:u,allocations:d,deleteIncomeSource:h,setEnvelopeAllocation:g,copyPreviousMonthAllocations:m,isLoading:b}=Jt(),{showToast:_}=rc(),[w,E]=B.useState(!1),T=B.useRef(null),[C,N]=B.useState(!1),V=!C||r||b,[P,M]=B.useState([]),A=B.useRef([]),[k,D]=B.useState([]),j=B.useRef([]),L=B.useCallback(J=>{if(t.find(ce=>ce.id===J)?.isPiggybank){const ce=Jt.getState().getEnvelopeBalance(J);return new Vu(ce)}const oe=Jt.getState().getEnvelopeBalance(J,c);return new Vu(oe)},[t,c]);B.useEffect(()=>{const J=t.filter(K=>{if(!K.isPiggybank||!K.isActive)return!1;if(K.createdAt)try{const oe=BR(K.createdAt);if(!oe)return console.error(` Invalid creation date for piggybank ${K.name}:`,K.createdAt),!1;const ce=`${oe.getFullYear()}-${String(oe.getMonth()+1).padStart(2,"0")}`;return c>=ce}catch(oe){return console.error(` Error processing piggybank ${K.name}:`,oe,{createdAt:K.createdAt,typeofCreatedAt:typeof K.createdAt}),!1}return!0}).sort((K,oe)=>{const ce=K.orderIndex??0,me=oe.orderIndex??0;return ce-me});D(J),j.current=J},[t,c]);const U=k,O=P;B.useEffect(()=>(T.current=setTimeout(()=>{E(!0)},8e3),n(),N(!0),()=>{T.current&&clearTimeout(T.current)}),[]),B.useEffect(()=>{C&&!r&&!b&&(E(!1),T.current&&clearTimeout(T.current))},[C,r,b]),B.useEffect(()=>{const J=t.filter(K=>{if(K.isPiggybank||K.isActive===!1)return!1;const ce=(d[c]||[]).some(ge=>ge.envelopeId===K.id),me=e.some(ge=>ge.envelopeId===K.id&&(ge.month===c||ge.date.startsWith(c)));return ce||me}).sort((K,oe)=>{const ce=K.orderIndex??0,me=oe.orderIndex??0;return ce-me});M(J),A.current=J},[t,d,c,e]);const Z=(u[c]||[]).reduce((J,K)=>J+K.amount,0),X=(d[c]||[]).filter(J=>O.some(K=>K.id===J.envelopeId)||U.some(K=>K.id===J.envelopeId)).reduce((J,K)=>J+K.budgetedAmount,0),q=Z-X,W=B.useCallback(async J=>{if(!J.length)return;const K=J.map(oe=>oe.id);try{await a(K)}catch(oe){console.error("Failed to persist envelope order:",oe),_("Failed to save envelope order","error")}},[a,_]),ee=B.useCallback(async J=>{await W(J)},[W]),ie=B.useCallback(J=>{h(c,J.id).catch(console.error),_(`Deleted "${J.name}"`,"neutral")},[h,c,_]),$=B.useCallback(async J=>{try{const K=J||c;console.log(" Copying to month:",K),await m(K),_("Previous month budget copied","success")}catch(K){console.error("Error copying previous month:",K),_("Failed to copy previous month","error")}},[m,_,c]),F=B.useCallback(async()=>{if(!o||!c){_("Cannot clear data: not logged in or no month selected","error");return}try{await Jt.getState().clearMonthData(c),_(`"${c}" budget and transactions cleared successfully`,"success")}catch(J){console.error("Error clearing month data:",J),_("Failed to clear month data","error")}},[o,c,_]),Y=B.useCallback(async(J,K)=>{try{await g(J,K),setTimeout(()=>{const oe=Jt.getState(),ce=oe.currentMonth,me=oe.incomeSources[ce]||[],ge=oe.allocations[ce]||[],Te=new Set(oe.envelopes.filter(De=>{if(De.isPiggybank){if(!De.isActive)return!1;if(De.createdAt){const Me=BR(De.createdAt);if(!Me)return!1;const Be=`${Me.getFullYear()}-${String(Me.getMonth()+1).padStart(2,"0")}`;return ce>=Be}return!0}return De.isActive!==!1}).map(De=>De.id)),Ne=ge.filter(De=>Te.has(De.envelopeId)),ae=me.reduce((De,Me)=>De+Me.amount,0),Ae=Ne.reduce((De,Me)=>De+Me.budgetedAmount,0);ae-Ae<-.005?_(`You can't spend more than you make.
You're not in Congress!`,"error"):Math.abs(ae-Ae)<.005&&ae>0&&_("Every dollar has a job ","success")},100)}catch(oe){console.error("Failed to set allocation:",oe),_("Failed to update budget","error")}},[g,_]);return{visibleEnvelopes:O,piggybanks:U,incomeSources:u,availableToBudget:q,currentMonth:c,allocations:d,transactions:e,isLoading:r,isInitialLoading:V,isOnline:i,showTimeoutMessage:w,getEnvelopeBalance:L,fetchData:n,reorderEnvelopes:ee,deleteIncomeSource:ie,clearMonthData:F,copyFromPreviousMonth:$,setEnvelopeAllocation:Y,localOrderRef:A,setLocalEnvelopes:M,localPiggybankOrderRef:j,setLocalPiggybanks:D}},TZ=({currentMonth:t,onMonthChange:e,budgetStatus:n})=>{const[r,i]=t.split("-").map(Number),o=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],c=()=>{let g=r,m=i-1;m<1&&(g=r-1,m=12);const b=`${g}-${m.toString().padStart(2,"0")}`;e(b)},u=()=>{let g=r,m=i+1;m>12&&(g=r+1,m=1);const b=`${g}-${m.toString().padStart(2,"0")}`;e(b)},d=()=>{const g=new Date,m=`${g.getFullYear()}-${(g.getMonth()+1).toString().padStart(2,"0")}`;e(m)},h=()=>{if(!n)return null;const{amount:g,totalIncome:m,totalAllocated:b}=n,_=typeof g=="number"?g:0,w=typeof m=="number"?m:0,E=typeof b=="number"?b:0,T=Math.abs(_)<.005,C=_<-.005,N=w>0?E/w*100:0;let V="text-gray-900 dark:text-white",P="bg-green-500",M="Left to Budget",A=w>0?Math.min(N,100):0,k=!0;return w===0?(M="Add income to start budgeting",A=0,k=!1,V="text-gray-500 dark:text-zinc-500"):T?(V="text-green-600 dark:text-emerald-400",P="bg-green-500",M="Perfect! Every dollar has a job ",A=100,k=!1):C&&(V="text-red-600 dark:text-red-400",P="bg-red-500",M="You're not in Congress! Try again.",A=100),v.jsxs("div",{className:"flex flex-col justify-center min-w-0 w-full",children:[v.jsxs("div",{className:"flex items-baseline justify-start mb-1",children:[v.jsx("span",{className:`text-xs font-medium truncate mr-1.5 ${V}`,children:M}),k&&v.jsxs("span",{className:`text-sm font-bold truncate ${V}`,children:[C?"-":"","$",Math.abs(_).toFixed(2)]})]}),v.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:v.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${P}`,style:{width:`${A}%`}})})]})};return v.jsxs("div",{className:"py-2 space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-center gap-4",children:[v.jsx("button",{onClick:c,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:v.jsx(P9,{size:20})}),v.jsx("div",{className:"text-center",children:v.jsxs("button",{onClick:d,className:"text-base font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors whitespace-nowrap",title:"Click to go to current month",children:[o," ",r]})}),v.jsx("button",{onClick:u,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:v.jsx(_a,{size:20})})]}),n&&v.jsx("div",{className:"px-1",children:h()})]})},W0=({children:t,onDelete:e,threshold:n=-100,disabled:r=!1})=>{const i=Qq(),[a,o]=B.useState(!1),c=B.useRef(0),u=()=>{r||(o(!0),c.current=Date.now())},d=async(h,g)=>{if(r)return;const m=g.offset.x,b=g.velocity.x;if(setTimeout(()=>o(!1),100),m<n||m<-50&&b<-500){const _=e();_===!1?i.start({x:0}):_ instanceof Promise&&_.then(w=>{w===!1&&i.start({x:0})})}else i.start({x:0})};return v.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[v.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:v.jsx(vm,{className:"text-white w-6 h-6"})}),v.jsx(gn.div,{drag:r?!1:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:u,onDragEnd:d,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${a?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:a?"none":"auto"},children:t})]})},AZ=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:o}=Jt(),{showToast:c}=rc(),[u,d]=B.useState(""),[h,g]=B.useState(""),[m,b]=B.useState(!1);B.useEffect(()=>{if(!t)return;const w=window.setTimeout(()=>{n==="edit"&&r?(d(r.name),g(r.amount.toString())):(d(""),g(""))},0);return()=>window.clearTimeout(w)},[t,n,r]);const _=async w=>{if(w.preventDefault(),!u.trim()||!h||parseFloat(h)<=0){c("Please fill in all required fields with valid values","error");return}b(!0);try{if(n==="add")await i(o,{name:u.trim(),amount:parseFloat(h),month:o,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),c("Income source added successfully","success");else{if(!r){c("Error: No income source to edit","error");return}await a(o,{...r,name:u.trim(),amount:parseFloat(h),updatedAt:new Date().toISOString()}),c(`Updated "${u.trim()}" income source`,"success")}e()}catch(E){console.error("Error saving income source:",E),c("Failed to save income source. Please try again.","error")}finally{b(!1)}};return v.jsx(ti,{children:t&&v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[v.jsx(gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),v.jsxs(gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[v.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),v.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),v.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),v.jsx("input",{type:"text",value:u,onChange:w=>d(w.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),v.jsx("input",{type:"text",inputMode:"numeric",value:h,onChange:w=>{const E=w.target.value.replace(/\D/g,"");if(!E){g("");return}const C=(parseInt(E,10)/100).toFixed(2);g(C)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:m||!u.trim()||!h||parseFloat(h)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})]})})},CZ=({currentMonth:t,onCopy:e,isLoading:n=!1})=>{const r=c=>{const[u,d]=c.split("-");return new Date(parseInt(u),parseInt(d)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},i=c=>{const[u,d]=c.split("-").map(Number);let h=u,g=d-1;return g<1&&(h=u-1,g=12),r(`${h}-${g.toString().padStart(2,"0")}`)},a=r(t),o=i(t);return v.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 py-12 space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute inset-0 bg-blue-100 dark:bg-blue-900/30 blur-2xl rounded-full opacity-50"}),v.jsxs("div",{className:"relative bg-white dark:bg-zinc-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-700",children:[v.jsx(C9,{className:"w-12 h-12 text-blue-500"}),v.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-white p-1.5 rounded-full border-2 border-white dark:border-zinc-900",children:v.jsx(Uf,{size:14})})]})]}),v.jsxs("div",{className:"max-w-xs mx-auto space-y-2",children:[v.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["It looks like you need a budget for ",a]}),v.jsxs("p",{className:"text-gray-500 dark:text-zinc-400",children:["We can copy your budget from ",o," to get you started right away."]})]}),v.jsx("div",{className:"w-full max-w-xs space-y-3 pt-2",children:v.jsx("button",{onClick:e,disabled:n,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-sm transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?"Creating...":v.jsx(v.Fragment,{children:v.jsxs("span",{children:["Create ",a," Budget"]})})})})]})},kZ="/personal-budget-pwa/icon-512.png",Kb="/personal-budget-pwa/images/budget-balanced.png",UR=["Giving","Savings","Housing","Transportation","Food","Personal","Health","Insurance","Debt"],RZ=({currentMonth:t,onComplete:e})=>{const[n,r]=B.useState(0),[i,a]=B.useState(0),[o,c]=B.useState(2500),[u,d]=B.useState(UR),{addCategory:h}=Jt(),g=M=>{d(A=>A.includes(M)?A.filter(k=>k!==M):[...A,M])},m=async()=>{for(let M=0;M<u.length;M++)await h({name:u[M],orderIndex:M,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});e()};B.useEffect(()=>{if(console.log("Animation effect triggered:",{currentStep:n,animationKey:i}),n===5){console.log("Starting animation from $2500 to $0"),c(2500);const M=2e3,A=20,k=M/A,D=2500/A;let j=0;const L=setInterval(()=>{j++;const U=Math.max(0,2500-D*j);console.log("Phase 1 - Animation step:",j,"New amount:",U),c(U),j>=A&&(clearInterval(L),console.log("Phase 1 completed - Perfect budget reached"),setTimeout(()=>{console.log("Starting Phase 2 - Over budget demonstration");let O=0;const Z=10,X=200,q=500/Z,W=setInterval(()=>{O++;const ee=-(q*O);console.log("Phase 2 - Over budget step:",O,"Over budget amount:",ee),c(ee),O>=Z&&(clearInterval(W),console.log("Animation completed - Over budget scenario demonstrated"))},X)},1e3))},k);return()=>{console.log("Cleaning up animation timers"),clearInterval(L)}}},[i,n]);const _=(M=>{const[A,k]=M.split("-");return new Date(parseInt(A),parseInt(k)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})})(t),w=[{icon:Uf,title:"Welcome to Dollars At Work!",description:`Let's set up your budget for ${_}`,content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Dollars At Work helps you take control of your money using the ",v.jsx("strong",{children:"zero-based budgeting"})," method."]}),v.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Every dollar gets a job, and you'll know exactly where your money is going."}),v.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:v.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium",children:" This quick guide will show you how to get started in just a few steps!"})})]}),color:"blue"},{icon:CB,title:"Step 1: Choose Categories",description:"Select categories to organize your spending",content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Categories help group your envelopes. Select the ones you need:"}),v.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto pr-1",children:UR.map(M=>v.jsxs("button",{onClick:()=>g(M),className:`p-3 rounded-xl border text-sm font-medium transition-all flex items-center gap-2 ${u.includes(M)?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300":"bg-white border-gray-200 text-gray-600 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-400"}`,children:[v.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${u.includes(M)?"border-blue-500 bg-blue-500":"border-gray-400"}`,children:u.includes(M)&&v.jsx(us,{size:12,className:"text-white"})}),M]},M))}),u.length===0&&v.jsx("p",{className:"text-red-500 text-xs",children:"Please select at least one category."})]}),color:"blue"},{icon:yC,title:"Step 2: Add Your Income",description:"Tell us how much money you have to work with",content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"First, you'll add your income sources for the month. This could be:"}),v.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx(us,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Salary"})," - Your regular paycheck"]})]}),v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx(us,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Freelance"})," - Side gig income"]})]}),v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx(us,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Other Income"})," - Any other money coming in"]})]})]}),v.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4",children:v.jsxs("p",{className:"text-sm text-green-900 dark:text-green-200",children:[v.jsx("strong",{children:'Look for the "Income Sources" section'})," at the top of your budget and tap the ",v.jsx(yh,{className:"w-4 h-4 inline"})," button to add income."]})})]}),color:"green"},{icon:a0,title:"Step 3: Create Spending Envelopes",description:"Organize your spending into categories",content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Spending envelopes are where you track expenses. You'll assign each envelope to a category."}),v.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx(us,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Groceries"})," (Food)"]})]}),v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx(us,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Rent/Mortgage"})," (Housing)"]})]}),v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx(us,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Gas"})," (Transportation)"]})]})]}),v.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4",children:v.jsxs("p",{className:"text-sm text-purple-900 dark:text-purple-200",children:[v.jsx("strong",{children:'Tap "+" on a category section'})," to add an envelope to it."]})})]}),color:"purple"},{icon:Lf,title:"Step 4: Organize Your Budget",description:"Reorder categories and envelopes to match your preferences",content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Your budget should work the way ",v.jsx("strong",{children:"you"})," think about money. Customize the order to match your priorities!"]}),v.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4",children:[v.jsxs("h4",{className:"font-medium text-indigo-900 dark:text-indigo-200 mb-3 flex items-center gap-2",children:[v.jsx(Lf,{className:"w-4 h-4"}),"Drag to Reorder"]}),v.jsx("p",{className:"text-sm text-indigo-800 dark:text-indigo-300 mb-3",children:"Both categories and envelopes can be reordered the same way:"}),v.jsxs("div",{className:"space-y-2 mb-3",children:[v.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[v.jsx("strong",{children:"Mobile:"})," Long-press and drag"]}),v.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[v.jsx("strong",{children:"PC:"})," Click and hold on the ",v.jsx("strong",{children:""})," dots, then drag"]})]}),v.jsxs("div",{className:"bg-white dark:bg-indigo-950/30 rounded-lg p-3 mb-3 border border-indigo-300 dark:border-indigo-700",children:[v.jsxs("div",{className:"flex items-center gap-2 text-xs mb-2",children:[v.jsx("div",{className:"text-indigo-600 dark:text-indigo-400 font-bold",children:""}),v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"font-medium text-indigo-900 dark:text-indigo-200",children:"Food"}),v.jsx("div",{className:"text-indigo-700 dark:text-indigo-400 text-xs",children:"Category"})]})]}),v.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[v.jsx("div",{className:"text-indigo-600 dark:text-indigo-400 font-bold",children:""}),v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"font-medium text-indigo-900 dark:text-indigo-200",children:"Groceries"}),v.jsx("div",{className:"text-indigo-700 dark:text-indigo-400 text-xs",children:"$450 / $500"})]})]}),v.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-2 italic",children:" Click and hold these dots to drag"})]}),v.jsxs("ul",{className:"space-y-1 text-sm text-indigo-700 dark:text-indigo-400",children:[v.jsx("li",{children:" Reorder categories: Settings  Manage Categories"}),v.jsx("li",{children:" Reorder envelopes: On the main budget screen"}),v.jsx("li",{children:" Organize by priority, frequency, or preference"})]})]}),v.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4",children:v.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[" ",v.jsx("strong",{children:"Pro tip:"})," Try organizing your budget like this: Income  Fixed Expenses  Variable Expenses  Savings Goals"]})})]}),color:"indigo"},{icon:ym,title:"Step 5: Allocate Your Budget",description:"Assign money to each envelope",content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Now comes the fun part - giving every dollar a job!"}),v.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 rounded-r-xl p-4 relative",children:[v.jsx("button",{onClick:()=>a(M=>M+1),className:"absolute top-2 right-2 p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-lg transition-colors",title:"Replay animation",children:v.jsx(xB,{className:"w-4 h-4"})}),v.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium mb-2",children:'The "Left to Budget" amount shows unassigned money'}),v.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 mb-3",children:["Your goal is to get this to ",v.jsx("strong",{children:"$0.00"})," by allocating all your income to envelopes."]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 font-medium",children:[v.jsx("span",{children:"Left to Budget"}),v.jsxs("span",{className:`font-bold ${o<0?"text-red-600 dark:text-red-400":""}`,children:["$",o.toFixed(2)]})]}),v.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2 overflow-hidden",children:v.jsx(gn.div,{className:`h-full rounded-full ${o<0?"bg-red-500":"bg-green-500"}`,initial:{width:"0%"},animate:{width:o<0?"100%":`${(2500-o)/2500*100}%`},transition:{duration:.3,ease:"easeInOut"}})}),v.jsxs(gn.div,{className:`text-xs font-medium text-center mt-1 ${o===0?"text-green-600 dark:text-emerald-400":o<0?"text-red-600 dark:text-red-400":"text-blue-700 dark:text-blue-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.5},children:[o===0&&"Perfect! Every dollar has a job ",o<0&&"You're not in Congress! Try again.",o>0&&"Keep allocating until you reach $0"]})]},i)]}),v.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:[v.jsx("strong",{children:"To allocate money:"})," Tap the budget amount on any envelope and enter how much you want to assign to it."]}),v.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4",children:v.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[" ",v.jsx("strong",{children:"Pro tip:"})," Start with your essential expenses (rent, utilities, groceries) first, then allocate what's left to other categories."]})})]}),color:"blue"},{icon:vh,title:"Bonus: Piggybanks (Savings Goals)",description:"Save for future goals",content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Piggybanks are special envelopes for ",v.jsx("strong",{children:"savings goals"})," that carry over month-to-month."]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(RB,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Set a Goal"}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Vacation, emergency fund, new car - whatever you're saving for"})]})]}),v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(yC,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Contributions"}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Set an automatic monthly amount to save"})]})]}),v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(ym,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Track Progress"}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Watch your savings grow toward your goal"})]})]})]}),v.jsx("div",{className:"bg-pink-50 dark:bg-pink-900/20 border border-pink-200 dark:border-pink-800 rounded-xl p-4",children:v.jsxs("p",{className:"text-sm text-pink-900 dark:text-pink-200",children:[v.jsx("strong",{children:"Find Piggybanks"})," at the bottom of your budget. They're optional but powerful for reaching your goals!"]})})]}),color:"pink"},{icon:Kb,title:"You're Ready to Budget!",description:"Start taking control of your money",content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"That's it! You now know the basics of Dollars At Work:"}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:v.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"1"})}),v.jsx("span",{children:"Choose your categories"})]}),v.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:v.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"2"})}),v.jsx("span",{children:"Add your income sources"})]}),v.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:v.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"3"})}),v.jsx("span",{children:"Create envelopes in categories"})]}),v.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:v.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"4"})}),v.jsx("span",{children:"Organize your budget order"})]}),v.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:v.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"5"})}),v.jsx("span",{children:"Allocate until Left to Budget = $0"})]})]}),v.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mt-6",children:v.jsx("p",{className:"text-sm text-center text-blue-900 dark:text-blue-200 font-medium",children:' Click "Start Budgeting" below to create your first budget!'})})]}),color:"green",useCustomIcon:!0}],E=w[n],T=E.useCustomIcon?Kb:E.icon,C=n===w.length-1,N=n===0,P={blue:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700"},green:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",button:"bg-green-600 hover:bg-green-700"},purple:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-600 dark:text-purple-400",button:"bg-purple-600 hover:bg-purple-700"},indigo:{bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-600 dark:text-indigo-400",button:"bg-indigo-600 hover:bg-indigo-700"},pink:{bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-600 dark:text-pink-400",button:"bg-pink-600 hover:bg-pink-700"}}[E.color];return v.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex items-center justify-center p-4",children:v.jsx("div",{className:"w-full max-w-2xl",children:v.jsx(ti,{mode:"wait",children:v.jsxs(gn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[v.jsx("div",{className:"p-6 pb-2",children:v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:E.title}),v.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:E.description})]}),v.jsx("div",{className:"flex flex-col items-center mx-4",children:n===0?v.jsx("img",{src:kZ,alt:"Dollars At Work",className:`w-20 h-20 ${P.text}`}):E.useCustomIcon?v.jsx("img",{src:Kb,alt:"Budget Balanced",className:`w-32 h-32 ${P.text}`}):v.jsx("div",{className:`${P.bg} p-3 rounded-xl`,children:v.jsx(T,{className:`w-8 h-8 ${P.text}`})})}),v.jsxs("div",{className:"text-sm text-gray-500 dark:text-zinc-400 whitespace-nowrap",children:["Step ",n+1," of ",w.length]})]})}),v.jsx("div",{className:"px-6 pb-6 pt-2",children:E.content}),v.jsx("div",{className:"px-6 pb-4 flex justify-center gap-2",children:w.map((M,A)=>v.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${A===n?`w-8 ${P.button}`:A<n?"w-2 bg-gray-400 dark:bg-zinc-600":"w-2 bg-gray-200 dark:bg-zinc-700"}`},A))}),v.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[!N&&v.jsxs("button",{onClick:()=>r(M=>M-1),className:"flex-1 py-3 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors flex items-center justify-center gap-2",children:[v.jsx(Oo,{className:"w-5 h-5"}),"Back"]}),v.jsx("button",{onClick:()=>{if(C)m();else{if(E.title.includes("Choose Categories")&&u.length===0)return;r(M=>M+1)}},disabled:E.title.includes("Choose Categories")&&u.length===0,className:`${N?"flex-1":"flex-[2]"} py-3 px-4 ${P.button} text-white rounded-xl font-semibold transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:C?v.jsxs(v.Fragment,{children:[v.jsx(Uf,{className:"w-5 h-5"}),"Start Budgeting"]}):v.jsxs(v.Fragment,{children:["Next",v.jsx(T9,{className:"w-5 h-5"})]})})]})]},n)})})})},DZ=({piggybank:t,balance:e,onNavigate:n,setMoveableRef:r,isReorderingActive:i,activelyDraggingId:a,onItemDragStart:o,onLongPressTrigger:c})=>{const u=B.useRef(null),[d,h]=B.useState(!1),g=Qw(D=>{wP(),c(D,t.id)},{threshold:500,cancelOnMovement:25,detect:Eo.Touch}),m=t.piggybankConfig?.targetAmount,b=t.piggybankConfig?.monthlyContribution??0,_=t.piggybankConfig?.color||"#3B82F6",w=t.piggybankConfig?.paused||!1,E=typeof e=="number"?e:e.toNumber(),T=(D,j=1)=>{const L=D.replace("#",""),U=parseInt(L,16),O=U>>16&255,Z=U>>8&255,X=U&255;return`rgba(${O}, ${Z}, ${X}, ${j})`},C=`linear-gradient(135deg, ${T(_,.14)} 0%, ${T(_,.05)} 100%)`,N=T(_,.4),V=m&&m>0?Math.min(E/m*100,100):0,P=m&&E>=m;B.useEffect(()=>{a&&a!==t.id&&h(!1)},[a,t.id]),B.useEffect(()=>{a===t.id&&(h(!0),o&&o(t.id))},[a,t.id,o]),B.useEffect(()=>{if(!a&&d){const D=setTimeout(()=>{h(!1)},300);return()=>clearTimeout(D)}},[a,d]);const M=D=>{if(d||i){D.preventDefault(),D.stopPropagation();return}n(t.id)},A=a===t.id,k=v.jsxs("div",{className:"flex items-center gap-3 w-full",children:[v.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:D=>c(D,t.id),children:v.jsx(Lf,{size:20})}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center justify-between gap-3 mb-1",children:[v.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[v.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center",style:{backgroundColor:`${_}20`},children:v.jsx(vh,{size:12,style:{color:_}})}),v.jsxs("div",{className:"min-w-0",children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate leading-tight",children:t.name}),v.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[v.jsx(ym,{size:10,style:{color:_}}),v.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400 font-medium",children:["$",b.toFixed(2),"/mo"]}),w&&v.jsxs("span",{className:"text-[9px] text-orange-600 dark:text-orange-400 font-bold ml-1 flex items-center gap-0.5",children:[v.jsx(hB,{size:8})," PAUSED"]})]})]})]}),v.jsxs("div",{className:"text-right flex-shrink-0",children:[v.jsxs("div",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:["$",E.toFixed(2)]}),v.jsxs("div",{className:"text-[9px] text-gray-400 dark:text-zinc-500 mt-1",children:["of $",m?.toFixed(0)||"0"]})]})]}),m&&m>0&&v.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800/50 rounded-full h-0.5 overflow-hidden",children:v.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${V}%`,backgroundColor:_}})}),P&&!m&&v.jsx("div",{className:"text-[9px] text-green-600 dark:text-green-400 font-bold mt-0.5",children:" GOAL REACHED"})]})]});return v.jsx(gn.div,{...g(),layout:!A,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:D=>{r&&r(D),u.current=D},onClick:M,style:{background:C,borderColor:N,boxShadow:A?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",zIndex:A?50:1,scale:A?1.02:1},className:"rounded-xl py-1.5 px-3 border transition-all cursor-pointer shadow-sm hover:shadow-md select-none active:scale-[0.99] group",children:k})},sf=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,o=r&255;return`rgba(${i}, ${a}, ${o}, ${e})`},NZ=12,IZ=(t,e,n)=>Math.min(Math.max(t,e),n),MZ=({env:t,budgetedAmount:e,remainingBalance:n,navigate:r,transactions:i,currentMonth:a,setMoveableRef:o,isReorderingActive:c,activelyDraggingId:u,onItemDragStart:d,onLongPressTrigger:h})=>{const g=!!t.isPiggybank,m=t.piggybankConfig?.color||"#3B82F6",b=g?`linear-gradient(135deg, ${sf(m,.18)} 0%, ${sf(m,.08)} 100%)`:void 0,_=g?sf(m,.5):void 0,[w,E]=B.useState(!1),T=Qw(L=>{wP(),h(L,t.id)},{threshold:500,cancelOnMovement:25,detect:Eo.Touch}),C=i.filter(L=>L.envelopeId===t.id&&L.month===a),N=C.filter(L=>L.type==="Expense"),V=C.filter(L=>L.type==="Income"),P=N.reduce((L,U)=>L+(U.amount||0),0),M=V.reduce((L,U)=>L+(U.amount||0),0),A=M>0?Math.max(0,P/M*100):0,k=L=>{if(w||c){L.preventDefault(),L.stopPropagation();return}r(`/envelope/${t.id}`)};B.useEffect(()=>{u&&u!==t.id&&E(!1)},[u,t.id]),B.useEffect(()=>{u===t.id&&(E(!0),d(t.id))},[u,t.id,d]),B.useEffect(()=>{if(!u&&w){const L=setTimeout(()=>{E(!1)},300);return()=>clearTimeout(L)}},[u,w]);const D=v.jsxs("div",{className:"flex items-center gap-3 w-full",children:[v.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:L=>h(L,t.id),children:v.jsx(Lf,{size:20})}),v.jsxs("div",{className:"flex-1",children:[v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[g&&v.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center border",style:{borderColor:sf(m,.4),backgroundColor:sf(m,.15),color:m},children:v.jsx(vh,{size:10})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-tight",children:t.name}),v.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[v.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),v.jsxs("span",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300",children:["$",e.toFixed(2)]})]})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsxs("span",{className:`text-sm font-bold leading-none ${(typeof n=="number"?n:n.toNumber())<0||100-A<=5?"text-red-500":A>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof n=="number"?n:n.toNumber()).toFixed(2)]}),v.jsx("span",{className:"text-[9px] text-gray-400 dark:text-zinc-500 block uppercase tracking-wider mt-0.5",children:"Remaining"})]})]}),e>0&&v.jsx("div",{className:"mt-1",children:v.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700/50 rounded-full h-0.5 overflow-hidden",children:v.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof n=="number"?n:n.toNumber())<0||100-A<=5?"bg-red-500":A>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-A,2)}%`}})})})]})]}),j=u===t.id;return v.jsx(gn.div,{...T(),layout:!j,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},"data-envelope-id":t.id,ref:o(t.id),onClick:k,style:{boxShadow:j?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",background:b,borderColor:_,cursor:j?"grabbing":"pointer",zIndex:j?50:1,scale:j?1.02:1},className:`py-1.5 px-3 rounded-xl active:scale-[0.99] transition-all select-none border group ${g?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:D})},FR=({category:t,envelopes:e,allocations:n,currentMonth:r,transactions:i,navigate:a,getEnvelopeBalance:o,onReorderGlobal:c})=>{if(e.length===0&&t.id==="uncategorized")return null;const[u,d]=B.useState(e),h=B.useRef(e),[g,m]=B.useState(!1),[b,_]=B.useState(null),w=B.useRef(!1),E=B.useRef(null),T=B.useRef({}),C=B.useRef({}),N=B.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});B.useEffect(()=>{g||(d(e),h.current=e)},[e,g]);const V=B.useCallback((M,A)=>{const k=C.current[A];if(k){w.current=!0;const D=M.nativeEvent||M;k.dragStart(D)}},[]),P=B.useCallback(M=>A=>{A?T.current[M]=A:delete T.current[M]},[]);return B.useEffect(()=>{const M=()=>{Object.values(C.current).forEach(D=>D?.destroy()),C.current={}};if(!u.length)return;const A=()=>{u.forEach(D=>{const j=T.current[D.id];if(!j||!E.current)return;const L=new xP(E.current,{target:j,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[]});L.on("dragStart",O=>{if(!w.current){O.stop();return}const Z=O.inputEvent.target;if(Z.closest(".js-budget-target")||Z.tagName==="INPUT"){O.stop();return}const X=h.current.findIndex(ee=>ee.id===D.id),q=O.target,W=q.getBoundingClientRect();_(D.id),N.current={activeId:D.id,startIndex:X,currentIndex:X,itemHeight:W.height+NZ},q.style.transition="none",q.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",q.style.zIndex="20",m(!0)});let U=null;L.on("drag",O=>{const Z=O.target;U!==null&&cancelAnimationFrame(U),U=requestAnimationFrame(()=>{const X=N.current;if(X.activeId!==D.id)return;const q=O.beforeTranslate[1];Z.style.transform=`translateY(${q}px)`,Z.style.transition="none";const{itemHeight:W,startIndex:ee}=X,ie=Math.round(q/W),$=IZ(ee+ie,0,h.current.length-1);$!==X.currentIndex&&(X.currentIndex=$,h.current.forEach((F,Y)=>{if(F.id===D.id)return;const J=T.current[F.id];if(!J)return;let K=0;ee<$&&Y>ee&&Y<=$?K=-W:ee>$&&Y>=$&&Y<ee&&(K=W),J.style.transform=K?`translateY(${K}px)`:"",J.style.transition="transform 0.2s ease"})),U=null})}),L.on("dragEnd",O=>{U!==null&&(cancelAnimationFrame(U),U=null);const Z=O.target,{startIndex:X,currentIndex:q}=N.current;if(Z.style.transform="",Z.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",Z.style.boxShadow="",h.current.forEach(W=>{const ee=T.current[W.id];ee&&(ee.style.transform="",ee.style.transition="")}),X!==q){const W=[...h.current],[ee]=W.splice(X,1);W.splice(q,0,ee),h.current=W,d(W),c(W.map(ie=>ie.id))}setTimeout(()=>{Z.style.zIndex="",_(null),m(!1),w.current=!1},300)}),L.on("click",()=>{const O=window.event?.target;O&&(O.closest(".js-budget-target")||O.tagName==="INPUT")||a(`/envelope/${D.id}`)}),C.current[D.id]=L})},k=window.setTimeout(A,80);return()=>{clearTimeout(k),M()}},[u,a,c]),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[v.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2",children:t.name}),v.jsx("button",{onClick:()=>a(t.id==="uncategorized"?"/add-envelope":`/add-envelope?categoryId=${t.id}`),className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",title:`Add to ${t.name}`,children:v.jsx(yh,{size:20})})]}),v.jsx("div",{ref:E,className:"space-y-2 relative",children:u.length===0?v.jsx("div",{className:"py-2 text-center border border-dashed border-gray-100 dark:border-zinc-800 rounded-xl",children:v.jsx("p",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:"Empty category"})}):v.jsx(ti,{initial:!1,children:u.map(M=>{const k=(n[r]||[]).find(j=>j.envelopeId===M.id)?.budgetedAmount||0,D=o(M.id);return M.isPiggybank?v.jsx(DZ,{piggybank:M,balance:D,onNavigate:j=>a(`/envelope/${j}`),setMoveableRef:P(M.id),isReorderingActive:g,activelyDraggingId:b,onItemDragStart:()=>{},onLongPressTrigger:V},M.id):v.jsx(MZ,{env:M,budgetedAmount:k,remainingBalance:D,navigate:a,transactions:i,currentMonth:r,setMoveableRef:P,isReorderingActive:g,activelyDraggingId:b,onItemDragStart:()=>{},onLongPressTrigger:V},M.id)})})})]})},OZ=()=>{const{visibleEnvelopes:t,piggybanks:e,incomeSources:n,availableToBudget:r,currentMonth:i,allocations:a,transactions:o,isLoading:c,isInitialLoading:u,showTimeoutMessage:d,getEnvelopeBalance:h,deleteIncomeSource:g}=EZ(),{setMonth:m,setIsOnboardingActive:b,isOnboardingActive:_,isOnboardingCompleted:w,completeOnboarding:E,categories:T,fetchCategories:C,envelopes:N,reorderEnvelopes:V}=Jt(),P=Ba(),[M,A]=B.useState(!1),[k,D]=B.useState("add"),[j,L]=B.useState(null),[U,O]=B.useState(!1),[Z,X]=B.useState(!1),q=B.useRef(null),W=B.useRef(null),[ee,ie]=B.useState(0);B.useEffect(()=>{T.length===0&&C()},[T.length,C]);const $=B.useMemo(()=>{const ge={},Te=[];return T.forEach(ae=>ge[ae.id]=[]),[...t,...e].sort((ae,Ae)=>(ae.orderIndex??0)-(Ae.orderIndex??0)).forEach(ae=>{ae.categoryId&&ge[ae.categoryId]?ge[ae.categoryId].push(ae):Te.push(ae)}),{groups:ge,uncategorized:Te}},[T,t,e]),F=B.useCallback(async ge=>{const Te=[...N.map(De=>De.id)],Ne=new Set(ge),ae=[];let Ae=0;Te.forEach(De=>{Ne.has(De)?ae.push(ge[Ae++]):ae.push(De)}),await V(ae)},[N,V]);B.useLayoutEffect(()=>{if(_)return;const ge=W.current;if(!ge)return;const Te=()=>ie(ge.getBoundingClientRect().height);Te();const Ne=new ResizeObserver(()=>Te());return Ne.observe(ge),window.addEventListener("resize",Te),()=>{window.removeEventListener("resize",Te),Ne.disconnect()}},[_,i,n,a,t,e,r]),B.useEffect(()=>{if(!u&&!c){const ge=setTimeout(()=>{if(_)return;if(w){b(!1);const ae=(n[i]||[]).length===0&&(a[i]||[]).length===0,Ae=Object.keys(n).some(De=>(n[De]||[]).length>0)||Object.keys(a).some(De=>(a[De]||[]).length>0);X(!!(ae&&Ae));return}const Te=(n[i]||[]).length===0&&(a[i]||[]).length===0,Ne=Object.keys(n).some(ae=>(n[ae]||[]).length>0)||Object.keys(a).some(ae=>(a[ae]||[]).length>0);Te?Ne?(X(!0),b(!1)):(b(!0),X(!1)):(X(!1),b(!1))},500);return()=>clearTimeout(ge)}},[u,c,i,n,a,w]);const Y=()=>{D("add"),L(null),A(!0)},J=ge=>{q.current&&clearTimeout(q.current),!U&&(D("edit"),L(ge),A(!0))},K=ge=>{q.current&&clearTimeout(q.current),O(!0),g(ge),setTimeout(()=>O(!1),500)},oe=()=>{A(!1),L(null)},ce=async()=>{X(!1);const{copyPreviousMonthAllocations:ge}=Jt.getState();await ge(i)},me=()=>{E(),b(!1)};return u?v.jsx(GI,{message:d?"Still loading...":"Loading your budget...",showTimeout:d}):v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:".moveable-control, .moveable-origin, .moveable-line { display: none !important; }"}}),v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[!_&&v.jsx("header",{ref:W,className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:v.jsx(TZ,{currentMonth:i,onMonthChange:ge=>{X(!1),m(ge)},budgetStatus:{amount:r,totalIncome:(n[i]||[]).reduce((ge,Te)=>ge+Te.amount,0),totalAllocated:(a[i]||[]).filter(ge=>t.some(Te=>Te.id===ge.envelopeId)||e.some(Te=>Te.id===ge.envelopeId)).reduce((ge,Te)=>ge+Te.budgetedAmount,0)}})}),v.jsxs("div",{className:"pb-[calc(8rem+env(safe-area-inset-bottom))] px-4 max-w-4xl mx-auto space-y-4",style:_?void 0:{paddingTop:Math.max(0,ee+16)},children:[_?v.jsx(RZ,{currentMonth:i,onComplete:me}):Z?v.jsx(CZ,{currentMonth:i,onCopy:ce}):v.jsxs(v.Fragment,{children:[v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[v.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Income Sources"}),v.jsx("button",{onClick:Y,className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",children:v.jsx(yh,{size:20})})]}),(n[i]||[]).length===0?v.jsx("div",{className:"text-center py-4",children:v.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-[10px]",children:"No income sources yet."})}):v.jsx("div",{className:"space-y-2",children:v.jsx(ti,{initial:!1,mode:"popLayout",children:(n[i]||[]).map(ge=>v.jsx(gn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(W0,{onDelete:()=>K(ge),children:v.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>J(ge),children:[v.jsx("div",{className:"flex-1",children:v.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:ge.name})}),v.jsxs("p",{className:"text-xs font-bold text-green-600 dark:text-emerald-400",children:["$",ge.amount.toFixed(2)]})]})})},ge.id))})})]}),T.map(ge=>v.jsx(FR,{category:ge,envelopes:$.groups[ge.id]||[],allocations:a,currentMonth:i,transactions:o,navigate:P,getEnvelopeBalance:h,onReorderGlobal:F},ge.id)),$.uncategorized.length>0&&v.jsx(FR,{category:{id:"uncategorized",name:"Uncategorized"},envelopes:$.uncategorized,allocations:a,currentMonth:i,transactions:o,navigate:P,getEnvelopeBalance:h,onReorderGlobal:F}),T.length===0&&$.uncategorized.length===0&&v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 text-center py-12",children:[v.jsx(a0,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),v.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:"No envelopes yet."}),v.jsx("button",{onClick:()=>P("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]})]}),v.jsx(AZ,{isVisible:M,onClose:oe,mode:k,initialIncomeSource:j})]})]})]})},PZ=[],PP=({selectedCard:t,onCardSelect:e,initialCards:n=PZ,disabled:r=!1,isUserSelected:i=!1})=>{const a=Jt($=>$.appSettings),o=Jt($=>$.updateAppSettings),[c,u]=B.useState(n.length>0?n[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}),[d,h]=B.useState(!1),[g,m]=B.useState(!1),[b,_]=B.useState(n),[w,E]=B.useState(null),[T,C]=B.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),[N,V]=B.useState(null),[P,M]=B.useState(null);B.useEffect(()=>{a?.paymentSources&&(_(a.paymentSources),a.paymentSources.length>0&&!t&&u(a.paymentSources[0]))},[a,t]);const A=t||c;B.useEffect(()=>{!t&&e&&b.length>0&&e(b[0])},[t,e,b]);const k=$=>{r||($.id==="add-new"?m(!0):(u($),e?.($),h(!1)))},D=()=>{r||h(!d)},j=$=>{r||E($)},L=async()=>{if(w&&!r){const $=b.filter(F=>F.id!==w.id);if(_($),A?.id===w.id){const F=$.length>0?$[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"};u(F),e?.(F)}E(null),h(!1);try{await o({paymentSources:$})}catch(F){console.error("Failed to delete card from app settings:",F),_(b),alert("Failed to delete card. Please try again.");return}}},U=()=>{E(null)},O=async()=>{if(r)return;const $=!["Cash","Venmo"].includes(T.network);if($&&(T.last4.length!==4||!/^\d{4}$/.test(T.last4))){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!T.name.trim()){alert("Please enter a name");return}const F={id:`custom-${Date.now()}`,name:T.name.trim(),network:T.network,last4:$?T.last4:void 0,color:T.color},Y=[...b,F];_(Y),u(F),e?.(F),m(!1),h(!1);try{await o({paymentSources:Y})}catch(J){console.error("Failed to save card to app settings:",J),_(b),u(A),alert("Failed to save card. Please try again.");return}C({name:"",network:"Visa",last4:"",color:"#3b82f6"})},Z=($,F)=>{r||(V(F),$.dataTransfer.effectAllowed="move")},X=($,F)=>{r||!N||($.preventDefault(),$.dataTransfer.dropEffect="move",M(F))},q=()=>{M(null)},W=async($,F)=>{if(r||!N)return;$.preventDefault(),M(null);const Y=b.findIndex(K=>K.id===N.id);if(Y===-1||Y===F)return;const J=[...b];J.splice(Y,1),J.splice(F,0,N),_(J),V(null);try{await o({paymentSources:J})}catch(K){console.error("Failed to reorder cards:",K),_(b),alert("Failed to reorder cards. Please try again.")}},ee=()=>{V(null),M(null)},ie=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return v.jsxs(v.Fragment,{children:[v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&v.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),v.jsxs("div",{onClick:D,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[v.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:A.color},children:[v.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:A.network}),v.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(A.network)?A.network==="Cash"?"$$$":"@":` ${A.last4||""}`})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:A.name}),v.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cash","Venmo"].includes(A.network)?A.network:`(...${A.last4})`})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-gray-400",children:d?"":""}),!i&&v.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),d&&v.jsxs("div",{className:"card-stack-dropdown",children:[b.length>1&&v.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 text-center",children:" Drag and drop cards to reorder"}),v.jsx("div",{className:"card-stack",children:v.jsx(ti,{initial:!1,mode:"popLayout",children:[...b,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map(($,F)=>{const Y=A.id===$.id,J=$.id==="add-new",K=["Cash","Venmo"].includes($.network);return v.jsx(gn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(W0,{onDelete:()=>!J&&!r&&j($),threshold:-80,children:v.jsxs("div",{className:`card-stack-item ${Y?"selected":""} ${J?"add-new-card":""} ${N?.id===$.id?"dragging":""} ${P===F?"drag-over":""}`,onClick:()=>k($),draggable:!J&&!r,onDragStart:J?void 0:oe=>Z(oe,$),onDragOver:J?void 0:oe=>X(oe,F),onDragLeave:J?void 0:q,onDrop:J?void 0:oe=>W(oe,F),onDragEnd:J?void 0:ee,style:{backgroundColor:J?"#f3f4f6":$.color,color:J?"#374151":$.color==="#e3e3e3"?"#000":"#fff",zIndex:b.length-F,opacity:N?.id===$.id?.5:1,transform:P===F?"scale(1.02)":"scale(1)"},children:[v.jsxs("div",{className:"card-header",children:[v.jsx("span",{className:"card-network",children:J?"":$.network}),Y&&!J&&v.jsx("span",{className:"selected-indicator",children:""})]}),v.jsxs("div",{className:"card-details",children:[v.jsx("div",{className:"card-name",children:$.name}),v.jsx("div",{className:"card-number",children:J?"":K?$.network==="Cash"?"$$$":"@":` ${$.last4}`})]}),J&&v.jsx("div",{className:"add-icon",children:v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),v.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},$.id)})})})]})]}),g&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Payment Method"}),v.jsx("button",{type:"button",onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),v.jsx("input",{type:"text",value:T.name,onChange:$=>C({...T,name:$.target.value}),placeholder:"e.g., Wallet Cash, My Venmo",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),v.jsxs("select",{value:T.network,onChange:$=>C({...T,network:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[v.jsx("option",{value:"Visa",children:"Visa"}),v.jsx("option",{value:"Mastercard",children:"Mastercard"}),v.jsx("option",{value:"Amex",children:"Amex"}),v.jsx("option",{value:"Cash",children:"Cash"}),v.jsx("option",{value:"Venmo",children:"Venmo"})]})]}),!["Cash","Venmo"].includes(T.network)&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),v.jsx("input",{type:"text",value:T.last4,onChange:$=>C({...T,last4:$.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),v.jsx("div",{className:"grid grid-cols-6 gap-2",children:ie.map($=>v.jsx("button",{type:"button",onClick:()=>C({...T,color:$}),className:`w-full h-10 rounded-lg border-2 transition-all ${T.color===$?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:$}},$))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),v.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:T.color},children:[v.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:T.network}),v.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(T.network)?T.network==="Cash"?"$$$":"@":` ${T.last4||"0000"}`})]})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),v.jsx("button",{type:"button",onClick:O,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add"})]})]})]})}),w&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",v.jsx("span",{className:"font-medium",children:w.name}),"?"]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("button",{type:"button",onClick:U,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),v.jsx("button",{type:"button",onClick:L,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},jP=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i})=>{const{addTransaction:a,updateTransaction:o,deleteTransaction:c,currentMonth:u}=Jt(),[d,h]=B.useState(""),[g,m]=B.useState(""),[b,_]=B.useState(""),[w,E]=B.useState(new Date().toISOString().split("T")[0]),[T,C]=B.useState(null);B.useEffect(()=>{if(t)if(n==="edit"&&i){h(i.amount.toString()),m(i.merchant||""),_(i.description),C(i.paymentMethod||null);try{const A=new Date(i.date);isNaN(A.getTime())?(console.warn("Invalid date in transaction:",i.date),E(new Date().toISOString().split("T")[0])):E(A.toISOString().split("T")[0])}catch(A){console.error("Error parsing transaction date:",A),E(new Date().toISOString().split("T")[0])}}else h(""),m(""),_(""),E(new Date().toISOString().split("T")[0])},[t,n,i]);const N=async A=>{A.preventDefault();const k=parseFloat(d);if(isNaN(k)||k<=0){console.log(" Invalid amount:",d);return}console.log(" Saving transaction:",{mode:n,amount:k,note:b,date:w,envelopeId:r.id,paymentMethod:T});try{const D=new Date(w),j=`${D.getFullYear()}-${(D.getMonth()+1).toString().padStart(2,"0")}`;if(j!==u){const L=`This transaction date (${j}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(L))return}n==="add"?(console.log(" Adding income transaction"),await a({amount:k,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:r.id,type:"Income",reconciled:!1,paymentMethod:T||void 0})):n==="spend"?(console.log(" Adding expense transaction"),await a({amount:k,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:r.id,type:"Expense",reconciled:!1,paymentMethod:T||void 0})):n==="edit"&&i&&(console.log(" Updating transaction"),await o({...i,amount:k,description:b,merchant:g||void 0,date:new Date(w).toISOString(),paymentMethod:T||void 0})),console.log(" Transaction saved successfully"),e()}catch(D){console.error(" Error saving transaction:",D),alert("Failed to save transaction: "+(D instanceof Error?D.message:"Unknown error"))}},V=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},P=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",M=n==="add"?"text-green-500":"text-red-500";return v.jsx(ti,{children:t&&v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[v.jsx(gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),v.jsxs(gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[v.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),v.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:P}),v.jsx("button",{onClick:N,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!d||parseFloat(d)<=0||i?.isAutomatic,children:i?.isAutomatic?"":"Save"})]}),v.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${M}`,children:"$"}),v.jsx("input",{type:"text",inputMode:"numeric",value:d,onChange:A=>{const k=A.target.value.replace(/\D/g,"");if(!k){h("");return}const j=(parseInt(k,10)/100).toFixed(2);h(j)},onKeyDown:A=>{(A.key==="e"||A.key==="E"||A.key==="+"||A.key==="-")&&A.preventDefault()},placeholder:"0.00",autoFocus:!0,disabled:i?.isAutomatic,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${M} placeholder-gray-700 ${i?.isAutomatic?"cursor-not-allowed opacity-80":""}`})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),v.jsx("input",{type:"text",value:g,onChange:A=>m(A.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),!i?.isAutomatic&&v.jsx(PP,{selectedCard:T,onCardSelect:C}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),v.jsx("input",{type:"text",value:b,onChange:A=>_(A.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsxs("div",{className:"flex justify-between items-center mb-1",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const A=new Date(w);return`${A.getFullYear()}-${(A.getMonth()+1).toString().padStart(2,"0")}`!==u?v.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[v.jsx(pu,{size:14}),v.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),v.jsx("input",{type:"date",value:w,onChange:A=>{console.log("Date changed to:",A.target.value),E(A.target.value)},required:!0,disabled:i?.isAutomatic,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark] disabled:opacity-80"})]}),n==="edit"&&!i?.isAutomatic&&v.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:v.jsxs("button",{type:"button",onClick:V,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[v.jsx(oN,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})]})})},jZ=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=Jt(),[a,o]=B.useState(""),[c,u]=B.useState(""),[d,h]=B.useState(""),[g,m]=B.useState(new Date().toISOString().split("T")[0]),b=r.filter(E=>E.id!==n.id);B.useEffect(()=>{if(!t)return;const E=window.setTimeout(()=>{o(""),u(""),h(""),m(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(E)},[t]);const _=E=>{E.preventDefault();const T=parseFloat(c);isNaN(T)||T<=0||!a||(i(n.id,a,T,d,new Date(g)),e())},w=r.find(E=>E.id===a);return v.jsx(ti,{children:t&&v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[v.jsx(gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),v.jsxs(gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[v.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),v.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),v.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!c||parseFloat(c)<=0||!a,children:"Transfer"})]}),v.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),v.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),v.jsxs("select",{value:a,onChange:E=>o(E.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[v.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),b.map(E=>v.jsx("option",{value:E.id,className:"bg-white dark:bg-zinc-900",children:E.name},E.id))]})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),v.jsx("input",{type:"text",inputMode:"numeric",value:c,onChange:E=>{const T=E.target.value.replace(/\D/g,"");if(!T){u("");return}const N=(parseInt(T,10)/100).toFixed(2);u(N)},onKeyDown:E=>{(E.key==="e"||E.key==="E"||E.key==="+"||E.key==="-")&&E.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),v.jsx("input",{type:"text",value:d,onChange:E=>h(E.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),v.jsx("input",{type:"date",value:g,onChange:E=>m(E.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),w&&c&&parseFloat(c)>0&&v.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",v.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(c).toFixed(2)]})," from"," ",v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:w.name})]})]})]})]})})},VZ=({isOpen:t,onClose:e,onSave:n,existingPiggybank:r})=>{const[i,a]=B.useState(""),[o,c]=B.useState(""),[u,d]=B.useState(""),[h,g]=B.useState("#3B82F6"),[m,b]=B.useState("piggy-bank"),[_,w]=B.useState(!1),[E,T]=B.useState(!1);B.useEffect(()=>{r?(a(r.name),c(r.piggybankConfig?.targetAmount?.toString()||""),d(r.piggybankConfig?.monthlyContribution.toString()||"0"),g(r.piggybankConfig?.color||"#3B82F6"),b(r.piggybankConfig?.icon||"piggy-bank"),w(r.piggybankConfig?.paused||!1)):(a(""),c(""),d(""),g("#3B82F6"),b("piggy-bank"),w(!1))},[r,t]);const C=async V=>{if(V.preventDefault(),!(!i.trim()||!u)){T(!0);try{const P={name:i.trim(),isPiggybank:!0,piggybankConfig:{monthlyContribution:parseFloat(u),color:h,icon:m,paused:_}};o&&parseFloat(o)>0&&(P.piggybankConfig.targetAmount=parseFloat(o)),r&&(P.id=r.id,P.currentBalance=r.currentBalance,P.lastUpdated=new Date().toISOString(),P.isActive=r.isActive,P.orderIndex=r.orderIndex,P.userId=r.userId),await n(P),e()}catch(P){console.error("Error saving piggybank:",P),alert("Failed to save piggybank")}finally{T(!1)}}},N=[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}];return v.jsx(ti,{children:t&&v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[v.jsx(gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),v.jsxs(gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[v.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-800 px-6 py-4 flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:v.jsx(vh,{size:20,className:"text-blue-600 dark:text-blue-400"})}),v.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r?"Edit Piggybank":"New Piggybank"})]}),v.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:v.jsx(s0,{size:24})})]}),v.jsxs("form",{onSubmit:C,className:"p-6 space-y-5",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"piggybank-name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Piggybank Name *"}),v.jsx("input",{type:"text",id:"piggybank-name",value:i,onChange:V=>a(V.target.value),placeholder:"e.g. Vacation Fund, Emergency Savings",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0,autoFocus:!0})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),v.jsx("input",{type:"text",inputMode:"numeric",id:"monthly-contribution",value:u,onChange:V=>{const P=V.target.value.replace(/\D/g,"");if(!P){d("");return}const A=(parseInt(P,10)/100).toFixed(2);d(A)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),v.jsx("input",{type:"text",inputMode:"numeric",id:"target-amount",value:o,onChange:V=>{const P=V.target.value.replace(/\D/g,"");if(!P){c("");return}const A=(parseInt(P,10)/100).toFixed(2);c(A)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),v.jsx("div",{className:"space-y-2",children:v.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:_,onChange:V=>w(V.target.checked),className:"w-5 h-5 rounded border-gray-300 dark:border-zinc-700 text-blue-600 focus:ring-2 focus:ring-blue-500"}),v.jsxs("div",{children:[v.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Pause auto-contributions"}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Monthly contributions will be skipped while paused"})]})]})}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),v.jsx("div",{className:"grid grid-cols-6 gap-2",children:N.map(V=>v.jsx("button",{type:"button",onClick:()=>g(V.value),className:`w-full aspect-square rounded-lg transition-all ${h===V.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:V.value},title:V.label},V.value))})]}),v.jsxs("div",{className:"pt-4 flex gap-3",children:[v.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",disabled:E,children:"Cancel"}),v.jsx("button",{type:"submit",disabled:!i.trim()||!u||E,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&u&&!E?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:E?"Saving...":r?"Update":"Create"})]})]})]})]})})},zZ=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},LZ=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},VP=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;console.log(" Transaction payment method:",t.paymentMethod);const i=t.type==="Income",a=t.type==="Expense";let o="text-gray-900 dark:text-white";return i&&(o="text-green-600 dark:text-green-400"),a&&(o="text-red-600 dark:text-red-400"),v.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 active:scale-[0.99] transition-all cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[v.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&v.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&v.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),v.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[v.jsx("span",{children:zZ(t.date)}),e&&v.jsxs(v.Fragment,{children:[v.jsx("span",{children:""}),v.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),t.paymentMethod&&v.jsxs(v.Fragment,{children:[v.jsx("span",{children:""}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:t.paymentMethod.color}}),v.jsx("span",{className:"truncate max-w-[80px]",children:t.paymentMethod.name})]})]})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${o}`,children:[a?"-":i?"+":"",LZ(t.amount)]}),n?v.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?v.jsx(us,{className:"text-green-500",size:20}):v.jsx(vC,{className:"text-gray-400",size:20})}):v.jsx("span",{children:t.reconciled?v.jsx(us,{className:"text-green-500",size:20}):v.jsx(vC,{className:"text-gray-400",size:20})})]})]})},Qb=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),BZ=()=>{const{id:t}=bL(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:o,updateTransaction:c,deleteTransaction:u,restoreTransaction:d,getEnvelopeBalance:h,currentMonth:g,allocations:m,incomeSources:b,setEnvelopeAllocation:_,updatePiggybankContribution:w,updateEnvelope:E}=Jt(),{showToast:T}=rc(),C=Ba(),N=ta(),[V,P]=B.useState(!1),[M,A]=B.useState(!1),[k,D]=B.useState(!1),[j,L]=B.useState(null),[U,O]=B.useState(!1),[Z,X]=B.useState(!1),[q,W]=B.useState(""),ee=B.useRef(null),ie=B.useRef(!1);B.useEffect(()=>{e.length===0&&r()},[]);const $=e.find(ae=>ae.id===t),F=async ae=>{if($)try{const Ae={...$,...ae,id:$.id,userId:$.userId,currentBalance:$.currentBalance,lastUpdated:new Date().toISOString(),isActive:$.isActive,orderIndex:$.orderIndex};await E(Ae),T("Piggybank updated successfully","success"),O(!1)}catch(Ae){console.error("Failed to update piggybank:",Ae),T("Failed to update piggybank","error")}},Y=$?.isPiggybank?$.piggybankConfig?.monthlyContribution||0:m[g]?.find(ae=>ae.envelopeId===t)?.budgetedAmount||0;B.useEffect(()=>{Z&&(W(Y.toString()),setTimeout(()=>{ee.current?.focus(),ee.current?.select()},50))},[Z,Y]);const J=ae=>{const Ae=(b[g]||[]).reduce((Ve,Se)=>Ve+Se.amount,0),De=m[g]||[];let Be=De.map(Ve=>$&&Ve.envelopeId===$.id&&ae!==void 0?{...Ve,budgetedAmount:ae}:Ve).filter(Ve=>{const Se=e.find(ze=>ze.id===Ve.envelopeId);return Se?Se.isActive!==!1:!1}).reduce((Ve,Se)=>Ve+Se.budgetedAmount,0);return ae!==void 0&&$&&(De.some(Se=>Se.envelopeId===$.id)||(Be+=ae)),Ae-Be},oe=Z?J(parseFloat(q)||0):J(),ce=async()=>{if(!$||ie.current)return;const ae=parseFloat(q);if(isNaN(ae)||ae<0){T("Please enter a valid positive number","error");return}ie.current=!0;try{$.isPiggybank?await w($.id,ae):await _($.id,ae),X(!1)}catch(Ae){console.error("Failed to save budget:",Ae),T("Failed to update budget","error")}finally{ie.current=!1}};if(!$)return i?v.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:v.jsx("p",{children:"Loading envelope..."})}):v.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:v.jsx("p",{children:"Envelope not found."})});if($.isPiggybank){const ae=n.filter(Ae=>Ae.envelopeId===$.id);console.log(" Piggybank:",$.name),console.log(" Created at:",$.createdAt),console.log(" Transactions:",ae.map(Ae=>({date:Ae.date,description:Ae.description,amount:Ae.amount})))}const me=n.filter(ae=>ae.envelopeId===$.id).filter(ae=>{if(ae.description==="Budgeted"||ae.description==="Piggybank Contribution")return!1;if($.isPiggybank){if(!$.createdAt)return!0;const Ae=Wm($.createdAt).toISOString().split("T")[0];return Wm(ae.date).toISOString().split("T")[0]>=Ae}return ae.month===g||!ae.month}).sort((ae,Ae)=>new Date(Ae.date).getTime()-new Date(ae.date).getTime()),ge=()=>{N.state?.fromGlobalFAB?C("/"):C(-1)},Te=()=>{t&&(a(t),C(-1))},Ne=ae=>{const Ae={...ae,reconciled:!ae.reconciled};c(Ae)};return v.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-[calc(8rem+env(safe-area-inset-bottom))] max-w-4xl mx-auto",children:[v.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[v.jsx("button",{onClick:()=>{if($.isPiggybank)O(!0);else{const ae=prompt("Rename envelope:",$.name);ae&&ae.trim()&&t&&o(t,ae)}},className:"text-blue-600 dark:text-blue-400 font-medium",children:$.isPiggybank?"Edit":"Rename"}),v.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:$.name}),v.jsx("button",{onClick:ge,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),v.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const ae=$.isPiggybank?h($.id):h($.id,g);return console.log(`Debug: Envelope ${$.name} Balance:`,ae),v.jsx("span",{className:`text-xl font-bold ${ae<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:Qb(ae)})})()]}),v.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-zinc-400",children:$.isPiggybank?"Monthly Contribution":"Budgeted This Month"}),Z?v.jsx("form",{onSubmit:ae=>{ae.preventDefault(),ce()},className:"flex items-center gap-2",children:v.jsx("input",{ref:ee,type:"number",step:"0.01",value:q,onChange:ae=>W(ae.target.value),onBlur:ce,className:"w-24 px-2 py-1 text-right font-semibold bg-gray-100 dark:bg-zinc-800 rounded border border-blue-500 focus:outline-none"})}):v.jsx("div",{onClick:()=>X(!0),className:"px-2 py-1 -mr-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 cursor-pointer transition-colors",children:v.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Qb(Y)})})]}),v.jsxs("div",{className:`mt-3 py-1.5 px-3 rounded-md flex justify-between items-center text-xs font-medium transition-colors ${oe<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":oe===0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:[v.jsx("span",{children:"Left to Budget:"}),v.jsx("span",{children:Qb(oe)})]})]})]}),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>P(!0),children:[v.jsx(B9,{className:"w-5 h-5 mr-3"}),"Add Money"]}),v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>A(!0),children:[v.jsx(z9,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>D(!0),children:[v.jsx(S9,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),v.jsxs("section",{className:"mt-6",children:[v.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:me.length===0?v.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):v.jsx(ti,{initial:!1,mode:"popLayout",children:me.map(ae=>v.jsx(gn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(W0,{disabled:ae.isAutomatic,onDelete:()=>{if(!ae.id)return;const Ae={...ae};u(ae.id),T("Transaction deleted","neutral",()=>d(Ae))},children:v.jsx(VP,{transaction:ae,onReconcile:()=>Ne(ae),onEdit:()=>{ae.isAutomatic||L(ae)}})})},ae.id))})})]}),v.jsx("div",{className:"mt-8",children:v.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{const ae=$.isPiggybank?`Are you sure you want to delete "${$.name}"? This will delete the piggybank and all its history.`:`Are you sure you want to remove "${$.name}" from ${g}? This will delete all transactions for this month only.`;confirm(ae)&&Te()},children:[v.jsx(oN,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),v.jsx(jP,{isVisible:V||M||!!j,onClose:()=>{P(!1),A(!1),L(null)},mode:V?"add":M?"spend":"edit",currentEnvelope:$,initialTransaction:j}),v.jsx(jZ,{isVisible:k,onClose:()=>D(!1),sourceEnvelope:$}),v.jsx(VZ,{isOpen:U,onClose:()=>O(!1),onSave:F,existingPiggybank:$})]})},UZ=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:o,totalAllocated:c,transactionCount:u,totalTransactionAmount:d,isLoading:h=!1})=>{const[g,m]=B.useState("confirm"),b=E=>{const[T,C]=E.split("-");return new Date(parseInt(T),parseInt(C)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},_=()=>{g==="confirm"?m("final_confirm"):g==="final_confirm"&&n()},w=()=>{m("confirm"),e()};return v.jsx(ti,{children:t&&v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[v.jsx(gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:w,className:"absolute inset-0 bg-black bg-opacity-50"}),v.jsxs(gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[v.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[v.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",b(r)]}),v.jsx("button",{onClick:w,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:h,children:""})]}),v.jsx("div",{className:"p-6 space-y-4",children:g==="confirm"?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:v.jsxs("div",{className:"flex items-start",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),v.jsxs("div",{className:"ml-3",children:[v.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),v.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:v.jsxs("ul",{className:"space-y-1",children:[v.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),v.jsxs("li",{children:[" ",o," envelope allocation",o!==1?"s":""," (totaling $",c.toFixed(2),")"]}),v.jsxs("li",{children:[" ",u," transaction",u!==1?"s":""," (totaling $",d.toFixed(2),")"]})]})})]})]})}),v.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),v.jsx("div",{className:"ml-3",children:v.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[v.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data, income sources, allocations, and all transactions."]})})]})})]}):v.jsxs("div",{className:"text-center py-4",children:[v.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:v.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),v.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-2",children:"Are you absolutely sure?"}),v.jsxs("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["This action cannot be undone. All budget data and transactions for ",v.jsx("strong",{children:b(r)})," will be permanently removed."]})]})}),v.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[v.jsx("button",{type:"button",onClick:w,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:h,children:"Cancel"}),v.jsx("button",{type:"button",onClick:_,disabled:h,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Clearing...":g==="confirm"?"Continue":"Yes, Start Fresh"})]})]})]})})},FZ=()=>{const t=Ba(),e=B.useRef(null),{envelopes:n,transactions:r,resetData:i,importData:a,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:d,incomeSources:h,allocations:g,currentMonth:m,clearMonthData:b,handleUserLogout:_,resetOnboarding:w}=Jt(),{deleteAccount:E,currentUser:T,logout:C}=Si(),[N,V]=B.useState(null),[P,M]=B.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[A,k]=B.useState(!1),[D,j]=B.useState(""),[L,U]=B.useState(!1),[O,Z]=B.useState(!1),[X,q]=B.useState(null),[W,ee]=B.useState(!1),[ie,$]=B.useState(!1),F=978307200,Y=c?.theme??"system",J=c?.fontSize??"medium";B.useEffect(()=>{c||d().catch(Se=>{console.error("Failed to initialize app settings:",Se)})},[d,c]);const K=(Se,ze)=>{V({type:Se,text:ze}),setTimeout(()=>V(null),3500)},oe=B.useMemo(()=>{const Se=n.length,ze=r.length,Ie=m?g[m]||[]:[],Le=Object.values(h).reduce((cn,It)=>cn+It.length,0),st=Ie.length,wt=n.reduce((cn,It)=>{const wn=It.isPiggybank?o(It.id):o(It.id,m);return cn+(typeof wn=="number"?wn:0)},0),Qe=0,ut=r.reduce((cn,It)=>{let wn=0;if(typeof It.date=="string"){const Br=Date.parse(It.date);wn=Number.isNaN(Br)?0:Br}else typeof It.date=="number"&&(wn=It.date<2e9?(It.date+F)*1e3:It.date);return Math.max(cn,wn)},0),Rt=Qe||ut?new Date(Math.max(Qe,ut)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:Se,transactionCount:ze,incomeSourceCount:Le,allocationCount:st,totalBalance:wt,lastUpdated:Rt}},[n,r,h,g,m]),ce=()=>{try{console.log(" Creating backup...");const Se={appVersion:"1.6.9",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:n.map(wt=>({...wt,currentBalance:(()=>{const Qe=wt.isPiggybank?o(wt.id):o(wt.id,m);return typeof Qe=="number"?Qe:0})(),lastUpdated:new Date().toISOString()})),transactions:r,allocations:g,incomeSources:h},ze=new Blob([JSON.stringify(Se,null,2)],{type:"application/json"}),Ie=URL.createObjectURL(ze),Le=document.createElement("a");Le.href=Ie,Le.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Le),Le.click(),document.body.removeChild(Le),URL.revokeObjectURL(Ie);const st=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",st),M(st),q({success:!0,message:"Backup downloaded successfully."})}catch(Se){console.error(Se),q({success:!1,message:"Failed to create backup file.",onRetry:ce})}},me=()=>{Z(!0),q(null);try{const Se=["Date","Merchant","Payment Method","Notes","Amount","Type","Envelope","Reconciled"],ze=r.filter(Qe=>Qe.description!=="Budgeted"&&Qe.description!=="Piggybank Contribution").map(Qe=>{const ut=n.find(na=>na.id===Qe.envelopeId)?.name||"Unknown",Rt=(Qe.merchant||"").replace(/"/g,'""'),cn=(Qe.description||"").replace(/"/g,'""');let It="";Qe.paymentMethod&&(It=`${Qe.paymentMethod.name} (...${Qe.paymentMethod.last4})`);const wn=It.replace(/"/g,'""');let Br="Invalid Date";if(Qe.date){if(typeof Qe.date=="string")Br=Qe.date.split("T")[0];else if(typeof Qe.date=="number"){const na=Qe.date<2e9?(Qe.date+F)*1e3:Qe.date;Br=new Date(na).toISOString().split("T")[0]}}return[Br,`"${Rt}"`,`"${wn}"`,`"${cn}"`,Qe.amount.toFixed(2),Qe.type,`"${ut}"`,Qe.reconciled?"Yes":"No"].join(",")}),Ie=[Se.join(","),...ze].join(`
`),Le=new Blob([Ie],{type:"text/csv;charset=utf-8;"}),st=URL.createObjectURL(Le),wt=document.createElement("a");wt.href=st,wt.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(wt),wt.click(),document.body.removeChild(wt),URL.revokeObjectURL(st),q({success:!0,message:"Transactions CSV exported successfully."})}catch(Se){console.error(Se),q({success:!1,message:"Failed to export CSV. Please try again.",onRetry:me})}finally{Z(!1)}},ge=()=>{e.current?.click()},Te=Se=>{const ze=Se.target.files?.[0];if(!ze)return;const Ie=new FileReader;Ie.onload=async Le=>{try{const st=JSON.parse(Le.target?.result),wt=await a(st);if(!wt.success){K("error",wt.message);return}if(st.appSettings?.theme)try{await u({theme:st.appSettings.theme})}catch(Qe){console.error("Failed to update imported settings:",Qe)}K("success",`Loaded ${st.envelopes?.length??0} envelopes, ${st.transactions?.length??0} transactions.`)}catch(st){console.error(st),K("error","Invalid backup file. Please verify the JSON.")}},Ie.readAsText(ze),Se.target.value=""},Ne=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await i(),K("success","All data has been permanently deleted."),t("/")}catch(Se){console.error("Reset failed:",Se),K("error","Failed to delete all data. Some data may remain.")}},ae=async()=>{if(!D.trim()){K("error","Please enter your password to confirm account deletion.");return}k(!0);try{await i(),await E(D)?K("success","Your account has been permanently deleted."):K("error","Failed to delete account. Please try again.")}catch(Se){console.error("Account deletion failed:",Se),K("error","Failed to delete account. Please try again.")}finally{k(!1),U(!1),j("")}},Ae=async()=>{if(!T){K("error","You must be logged in to clean up data.");return}ee(!0);try{const Se=await Jw.cleanupOrphanedData(T.id),ze=Se.orphanedAllocationsDeleted+Se.orphanedTransactionsDeleted;ze>0?K("success",`Cleaned ${ze} orphaned items: ${Se.orphanedAllocationsDeleted} allocations and ${Se.orphanedTransactionsDeleted} transactions.`):K("success","No orphaned data found. Your database is already clean!")}catch(Se){console.error("Cleanup failed:",Se),K("error","Failed to clean up orphaned data. Please try again.")}finally{ee(!1)}},De=()=>{$(!0)},Me=async()=>{$(!1),await b(m),K("success","Month data has been reset.")},Be=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{_(),C(),t("/")}catch(Se){console.error("Logout failed:",Se)}},Ve=T?.displayName?.charAt(0)?.toUpperCase()||T?.email?.charAt(0)?.toUpperCase()||"U";return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[v.jsx("button",{onClick:()=>t(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),v.jsxs("div",{className:"p-4 space-y-6 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[N&&v.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${N.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[N.type==="success"?v.jsx(mm,{size:18}):v.jsx(vm,{size:18}),N.text]}),v.jsx("section",{children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 flex items-center gap-4",children:[v.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-semibold shadow-md",children:Ve}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:T?.displayName||T?.email?.split("@")[0]||"User"}),v.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate",children:T?.email}),v.jsxs("button",{onClick:Be,className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium flex items-center gap-1 hover:underline",children:[v.jsx(uB,{size:14})," Log Out"]})]})]})}),v.jsx("section",{children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(bC,{className:"text-blue-500",size:22}),v.jsxs("div",{children:[v.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),v.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),v.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:oe.envelopeCount})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:oe.transactionCount})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:oe.incomeSourceCount})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:oe.allocationCount})]})]})]})}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Categories"}),v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:v.jsxs("button",{onClick:()=>t("/settings/categories"),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("span",{className:"text-xl",children:""}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Manage Categories"})]}),v.jsx(_a,{className:"text-gray-400",size:18})]})})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[Y==="light"&&v.jsx("span",{className:"text-orange-500 text-lg",children:""}),Y==="dark"&&v.jsx("span",{className:"text-purple-500 text-lg",children:""}),Y==="system"&&v.jsx("span",{className:"text-gray-500 text-lg",children:""}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),v.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:Y})]}),v.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(Se=>v.jsx("button",{onClick:async()=>{try{await u({theme:Se.value})}catch(ze){console.error("Failed to update theme setting:",ze)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${Y===Se.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:Se.label},Se.value))})]}),v.jsx("div",{className:"h-px bg-gray-100 dark:bg-zinc-800"}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("span",{className:"text-gray-500 text-lg",children:"Aa"}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Font Size"})]}),v.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:J})]}),v.jsx("div",{className:"flex gap-2",children:[{label:"A",value:"extra-small",sizeClass:"text-[10px]"},{label:"A",value:"small",sizeClass:"text-xs"},{label:"A",value:"medium",sizeClass:"text-base"},{label:"A",value:"large",sizeClass:"text-xl"},{label:"A",value:"extra-large",sizeClass:"text-2xl"}].map(Se=>v.jsx("button",{onClick:async()=>{try{await u({fontSize:Se.value})}catch(ze){console.error("Failed to update font size setting:",ze)}},className:`flex-1 py-2 rounded-lg font-medium border transition-colors flex items-center justify-center ${J===Se.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:v.jsx("span",{className:Se.sizeClass,children:Se.label})},Se.value))})]})]})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Help & Guide"}),v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:v.jsxs("button",{onClick:()=>{w(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Uf,{className:"text-purple-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Onboarding Guide"}),v.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"View the welcome tutorial again"})]})]}),v.jsx(_a,{className:"text-gray-400",size:18})]})})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[v.jsxs("button",{onClick:ce,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(bC,{className:"text-blue-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),v.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",P]})]})]}),v.jsx(_a,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:ge,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(VB,{className:"text-blue-500",size:20}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),v.jsx(_a,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:me,disabled:O,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[O?v.jsx(xC,{className:"text-blue-500 animate-spin",size:20}):v.jsx(Q9,{className:"text-blue-500",size:20}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:O?"Preparing CSV":"Export Transactions (CSV)"})]}),v.jsx(_a,{className:"text-gray-400",size:18})]}),v.jsx("input",{type:"file",ref:e,onChange:Te,accept:".json",className:"hidden"})]})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[v.jsxs("button",{onClick:De,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Bf,{className:"text-orange-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Start Fresh (This Month)"}),v.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Clear all allocations and data for the current month only"})]})]}),v.jsx(_a,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:Ae,disabled:W,className:"w-full p-4 flex items-center justify-between hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800 disabled:opacity-60 disabled:cursor-not-allowed",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[W?v.jsx(xC,{className:"text-yellow-500 animate-spin",size:20}):v.jsx(Uf,{className:"text-yellow-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:W?"Cleaning Data...":"Purge Orphaned Data"}),v.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Remove allocations and transactions pointing to deleted envelopes"})]})]}),v.jsx(_a,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:Ne,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(vm,{className:"text-red-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),v.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete everything"})]})]}),v.jsx(_a,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:()=>U(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(pu,{className:"text-red-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),v.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),v.jsx(_a,{className:"text-gray-400",size:18})]})]})]}),v.jsxs("div",{className:"text-center py-4",children:[v.jsxs("p",{className:"text-xs text-gray-400 dark:text-zinc-500",children:["Version ","1.6.9"," (PWA)"]}),"        "]}),X&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[X.success?v.jsx(mm,{className:"text-green-500",size:24}):v.jsx(pu,{className:"text-red-500",size:24}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:X.success?"Success":"Error"})]}),v.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:X.message}),v.jsxs("div",{className:"flex gap-2",children:[X.onRetry&&v.jsx("button",{onClick:()=>{q(null),X.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),v.jsx("button",{onClick:()=>q(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),v.jsx(UZ,{isVisible:ie,onClose:()=>$(!1),onConfirm:Me,currentMonth:m,incomeCount:(h[m]||[]).length,totalIncome:(h[m]||[]).reduce((Se,ze)=>Se+ze.amount,0),allocationCount:(g[m]||[]).filter(Se=>n.some(ze=>ze.id===Se.envelopeId)).length,totalAllocated:(g[m]||[]).filter(Se=>n.some(ze=>ze.id===Se.envelopeId)).reduce((Se,ze)=>Se+ze.budgetedAmount,0),transactionCount:r.filter(Se=>Se.month===m).length,totalTransactionAmount:r.filter(Se=>Se.month===m).reduce((Se,ze)=>Se+ze.amount,0)}),L&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx(pu,{className:"text-red-500",size:24}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),v.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),v.jsx("input",{type:"password",value:D,onChange:Se=>j(Se.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>{U(!1),j("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:ae,disabled:A||!D.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:A?"Deleting...":"Delete Account"})]})]})})]})]})},GZ=()=>{const t=Ba(),{categories:e,addCategory:n,updateCategory:r,deleteCategory:i,reorderCategories:a}=Jt(),{showToast:o}=rc(),[c,u]=B.useState(!1),[d,h]=B.useState(""),[g,m]=B.useState(null),[b,_]=B.useState(""),[w,E]=B.useState(e),T=B.useRef(e),[C,N]=B.useState(!1),[V,P]=B.useState(null),M=B.useRef(!1),A=B.useRef(null),k=B.useRef({}),D=B.useRef({}),j=B.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});B.useEffect(()=>{C||(E(e),T.current=e)},[e,C]),B.useEffect(()=>(C?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[C]);const L=B.useCallback((ie,$)=>{console.log(" Long press triggered for category:",$);const F=D.current[$];if(F){console.log(" Moveable instance found, starting drag"),M.current=!0;const Y=ie.nativeEvent||ie;F.dragStart(Y)}else console.log(" No moveable instance found for:",$)},[]),U=B.useCallback(ie=>$=>{$?k.current[ie]=$:delete k.current[ie]},[]),O=async ie=>{if(ie.preventDefault(),!!d.trim())try{await n({name:d.trim(),orderIndex:e.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),h(""),u(!1),o("Category added","success")}catch($){console.error($),o("Failed to add category","error")}},Z=async ie=>{if(!b.trim())return;const $=e.find(F=>F.id===ie);if($)try{await r({...$,name:b.trim()}),m(null),o("Category updated","success")}catch(F){console.error(F),o("Failed to update category","error")}},X=async ie=>{if(confirm("Are you sure? Envelopes in this category will become Uncategorized."))try{await i(ie),o("Category deleted","success")}catch($){console.error($),o("Failed to delete category","error")}},q=8,W=(ie,$,F)=>Math.max($,Math.min(F,ie)),ee=B.useCallback(async ie=>{if(!ie.length)return;const $=ie.map(F=>F.id);try{await a($)}catch(F){console.error("Failed to persist category order:",F),o("Failed to save category order","error")}},[a,o]);return B.useEffect(()=>{const ie=()=>{Object.values(D.current).forEach(Y=>Y?.destroy()),D.current={}};if(!w.length)return;const $=()=>{w.forEach(Y=>{const J=k.current[Y.id];if(!J||!A.current)return;const K=new xP(A.current,{target:J,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[],edge:!1,origin:!1});K.on("dragStart",ce=>{if(console.log(" Moveable dragStart event",{isManualDrag:M.current,categoryId:Y.id}),!M.current){console.log(" Stopping drag - not manual"),ce.stop();return}const me=ce.inputEvent.target;if(me.tagName==="INPUT"||me.tagName==="BUTTON"||me.closest("button")){console.log(" Stopping drag - clicked on button/input"),ce.stop();return}console.log(" Drag starting for category:",Y.id);const ge=T.current.findIndex(ae=>ae.id===Y.id),Te=ce.target,Ne=Te.getBoundingClientRect();P(Y.id),j.current={activeId:Y.id,startIndex:ge,currentIndex:ge,itemHeight:Ne.height+q},Te.style.transition="none",Te.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",Te.style.zIndex="20",N(!0)});let oe=null;K.on("drag",ce=>{const me=ce.target;oe!==null&&cancelAnimationFrame(oe),oe=requestAnimationFrame(()=>{const ge=j.current;if(ge.activeId!==Y.id)return;const Te=ce.beforeTranslate[1];me.style.transform=`translateY(${Te}px)`,me.style.transition="none";const{itemHeight:Ne,startIndex:ae}=ge,Ae=Math.round(Te/Ne),De=W(ae+Ae,0,T.current.length-1);De!==ge.currentIndex&&(ge.currentIndex=De,T.current.forEach((Me,Be)=>{if(Me.id===Y.id)return;const Ve=k.current[Me.id];if(!Ve)return;let Se=0;ae<De&&Be>ae&&Be<=De?Se=-Ne:ae>De&&Be>=De&&Be<ae&&(Se=Ne),Ve.style.transform=Se?`translateY(${Se}px)`:"",Ve.style.transition="transform 0.2s ease"})),oe=null})}),K.on("dragEnd",ce=>{oe!==null&&(cancelAnimationFrame(oe),oe=null);const me=ce.target,{startIndex:ge,currentIndex:Te}=j.current;if(me.style.transform="",me.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",me.style.boxShadow="",T.current.forEach(Ne=>{const ae=k.current[Ne.id];ae&&(ae.style.transform="",ae.style.transition="")}),ge!==Te){const Ne=[...T.current],[ae]=Ne.splice(ge,1);Ne.splice(Te,0,ae),T.current=Ne,E(Ne),ee(Ne)}setTimeout(()=>{me.style.zIndex="",P(null),N(!1),M.current=!1},300)}),D.current[Y.id]=K})},F=window.setTimeout($,80);return()=>{clearTimeout(F),ie()}},[w,ee]),v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[v.jsx("style",{children:`
        .moveable-control-box,
        .moveable-line,
        .moveable-direction {
          display: none !important;
        }
      `}),v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[v.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:v.jsx(Oo,{size:24})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Manage Categories"})]}),v.jsxs("div",{className:"p-4 max-w-2xl mx-auto space-y-4",children:[v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:c?v.jsxs("form",{onSubmit:O,className:"flex gap-2",children:[v.jsx("input",{type:"text",value:d,onChange:ie=>h(ie.target.value),placeholder:"Category Name",className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),v.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium",children:"Save"}),v.jsx("button",{type:"button",onClick:()=>u(!1),className:"text-gray-500 px-2",children:"Cancel"})]}):v.jsxs("button",{onClick:()=>u(!0),className:"w-full flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 font-medium py-2",children:[v.jsx(yh,{size:20}),"Add Category"]})}),v.jsxs("div",{ref:A,className:"space-y-2",style:{touchAction:C?"none":"auto"},children:[w.map(ie=>{const $=Qw(Y=>{L(Y,ie.id)},{threshold:500,cancelOnMovement:25,detect:Eo.Touch}),F=V===ie.id;return v.jsx("div",{...$(),ref:U(ie.id),style:{cursor:F?"grabbing":"pointer"},className:"bg-white dark:bg-zinc-900 rounded-xl p-4 border border-gray-100 dark:border-zinc-800 flex items-center justify-between group select-none",children:g===ie.id?v.jsxs("div",{className:"flex-1 flex gap-2",children:[v.jsx("input",{type:"text",value:b,onChange:Y=>_(Y.target.value),className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),v.jsx("button",{onClick:()=>Z(ie.id),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm",children:"Save"}),v.jsx("button",{onClick:()=>m(null),className:"text-gray-500 px-2 text-sm",children:"Cancel"})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"text-gray-400 dark:text-zinc-600 cursor-grab active:cursor-grabbing",onMouseDown:Y=>L(Y,ie.id),children:v.jsx(Lf,{size:20})}),v.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:ie.name})]}),v.jsxs("div",{className:"flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[v.jsx("button",{onClick:()=>{m(ie.id),_(ie.name)},className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400",children:v.jsx(gB,{size:18})}),v.jsx("button",{onClick:()=>X(ie.id),className:"p-2 text-gray-500 hover:text-red-600 dark:hover:text-red-400",children:v.jsx(vm,{size:18})})]})]})},ie.id)}),w.length===0&&!c&&v.jsx("div",{className:"text-center text-gray-500 dark:text-zinc-500 py-8",children:"No categories yet. Add one to get started."})]})]})]})},$Z=()=>{const{addEnvelope:t,setEnvelopeAllocation:e,currentMonth:n,categories:r,fetchCategories:i}=Jt(),{showToast:a}=rc(),o=Ba(),[c]=u9();of.useEffect(()=>{r.length===0&&i()},[r.length,i]);const[u,d]=B.useState(""),[h,g]=B.useState(c.get("type")==="piggybank"),[m,b]=B.useState(c.get("categoryId")||""),[_,w]=B.useState(""),[E,T]=B.useState(""),[C,N]=B.useState("#3B82F6"),[V,P]=B.useState(!1),M=async A=>{if(A.preventDefault(),!u.trim()||V)return;P(!0);const k=Jt.getState().envelopes,j=(k.length>0?Math.max(...k.map(Z=>Z.orderIndex??0)):-1)+1,L=h?new Date(`${n}-01T00:00:00`):new Date,U={name:u,currentBalance:0,lastUpdated:new Date().toISOString(),createdAt:L.toISOString(),isActive:!0,orderIndex:j,categoryId:m||void 0};if(h){U.isPiggybank=!0;const Z={monthlyContribution:parseFloat(E||"0"),color:C,icon:"piggy-bank"};_&&parseFloat(_)>0&&(Z.targetAmount=parseFloat(_)),U.piggybankConfig=Z}t(U).then(Z=>{if(Z){const X=h?parseFloat(E||"0"):0;e(Z,X).catch(q=>console.error("Failed to create allocation:",q)),setTimeout(()=>{o("/")},50)}}).catch(Z=>{console.error("Failed to create envelope:",Z),a(Z.message||"Failed to create envelope","error"),P(!1)})};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[v.jsx("button",{onClick:()=>o("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:v.jsx(Oo,{size:24})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:h?"New Piggybank":"New Envelope"})]}),v.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[v.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:v.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:h?v.jsx(vh,{size:40}):v.jsx(J9,{size:40})})}),v.jsxs("form",{onSubmit:M,className:"p-6 space-y-6 pb-6",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Type"}),v.jsxs("div",{className:"flex bg-gray-100 dark:bg-zinc-800 p-1 rounded-xl",children:[v.jsx("button",{type:"button",onClick:()=>g(!1),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${h?"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300":"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm"}`,children:"Spending"}),v.jsx("button",{type:"button",onClick:()=>g(!0),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${h?"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300"}`,children:"Piggybank"})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Category"}),v.jsxs("select",{id:"category",value:m,onChange:A=>b(A.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all appearance-none",children:[v.jsx("option",{value:"",children:"Uncategorized"}),r.map(A=>v.jsx("option",{value:A.id,children:A.name},A.id))]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:h?"Piggybank Name":"Envelope Name"}),v.jsx("input",{type:"text",id:"name",value:u,onChange:A=>d(A.target.value),placeholder:h?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),h&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),v.jsx("input",{type:"number",id:"monthly-contribution",value:E,onChange:A=>T(A.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:h})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),v.jsx("input",{type:"number",id:"target-amount",value:_,onChange:A=>w(A.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),v.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(A=>v.jsx("button",{type:"button",onClick:()=>N(A.value),className:`w-full aspect-square rounded-lg transition-all ${C===A.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:A.value},title:A.label},A.value))})]})]}),v.jsxs("div",{className:"pt-4 flex gap-3",children:[v.jsx("button",{type:"button",onClick:()=>o("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:!u.trim()||h&&!E||V,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${u.trim()&&(!h||E)&&!V?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:V?"Creating...":h?"Create Piggybank":"Create Envelope"})]})]})]})})]})},HZ=({envelopes:t,transactionAmount:e,onSplitChange:n})=>{const[r,i]=B.useState([]),[a,o]=B.useState({}),[c,u]=B.useState(e),d=_=>{i(w=>w.includes(_)?w.filter(E=>E!==_):[...w,_])},h=(_,w)=>{o(E=>({...E,[_]:w}))};B.useEffect(()=>{if(r.length===1){const _=r[0];o({[_]:e})}},[r.length,e]),B.useEffect(()=>{const _=Object.values(a).reduce((w,E)=>w+(E||0),0);u(e-_),n(a)},[a,e,n]),B.useEffect(()=>{const _={...a};Object.keys(_).forEach(w=>{r.includes(w)||delete _[w]}),Object.keys(_).length!==Object.keys(a).length&&o(_)},[r,a]);const g=()=>{i([]),o({})},m=Math.abs(c)<.01&&r.length>0,b=r.length>0&&Math.abs(c)>.01;return v.jsxs("div",{className:"space-y-3",children:[r.length>1&&v.jsxs("div",{className:`p-3 rounded-lg ${b?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":m?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),v.jsxs("span",{className:`font-bold text-lg ${b?"text-red-600 dark:text-red-400":m?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",c.toFixed(2)]})]}),b&&v.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:r.length>1?"Split Across Envelopes":"Select Envelope"}),r.length>0&&v.jsx("button",{type:"button",onClick:g,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),v.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-zinc-800 rounded-lg",children:t.map(_=>v.jsxs("div",{className:"flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsx("input",{type:"checkbox",checked:r.includes(_.id),onChange:()=>d(_.id),className:"mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),v.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:_.name}),r.includes(_.id)&&r.length>1&&v.jsxs("div",{className:"flex items-center",children:[v.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400",children:"$"}),v.jsx("input",{type:"number",min:"0",step:"0.01",value:a[_.id]||"",onChange:w=>h(_.id,parseFloat(w.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},_.id))})]})},zP=({onClose:t,onSaved:e})=>{const n=Ba(),{envelopes:r,addTransaction:i,currentMonth:a}=Jt(),[o,c]=B.useState(""),[u,d]=B.useState(""),[h,g]=B.useState(""),[m,b]=B.useState(()=>{const X=new Date;return new Date(X.getTime()-X.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[_,w]=B.useState("expense"),[E,T]=B.useState({}),[C,N]=B.useState(null),[V,P]=B.useState(!1),M=()=>{if(t){t();return}n(-1)},A=X=>{N(X),C&&P(!0)},k=Object.keys(E).length>0,D=Object.values(E).reduce((X,q)=>X+(q||0),0),j=Math.abs(D-parseFloat(o||"0"))<.01,L=o&&parseFloat(o)>0&&k&&j,U=async X=>{if(X.preventDefault(),!L)return;const[q,W,ee]=m.split("-").map(Number),ie=new Date(q,W-1,ee,12,0,0);console.log(" Selected date:",m),console.log(" Parsed date:",ie.toISOString());try{const[$,F]=m.split("-").map(Number),Y=`${$}-${F.toString().padStart(2,"0")}`;if(Y!==a){const K=`This transaction date (${Y}) does not match the current budget month (${a}). Are you sure you want to save it?`;if(!window.confirm(K))return}const J=Object.entries(E).filter(([K,oe])=>oe>0);Promise.all(J.map(([K,oe])=>i({amount:oe,description:h,merchant:u||void 0,date:ie.toISOString(),envelopeId:K,type:_==="income"?"Income":"Expense",reconciled:!1,paymentMethod:C||void 0}).catch(ce=>console.error("Failed to create transaction:",ce)))).catch(K=>console.error("Failed to create transactions:",K)),e&&e(),t?t():n("/")}catch($){console.error("Error saving transaction:",$),alert("Failed to save transaction: "+($ instanceof Error?$.message:"Unknown error"))}},O=[...r].filter(X=>X.isActive!==!1).sort((X,q)=>{const W=X.orderIndex??0,ee=q.orderIndex??0;return W!==ee?W-ee:X.name.localeCompare(q.name)}),Z=_==="income"?"text-green-500":"text-red-500";return v.jsxs("div",{className:"h-screen overflow-y-auto bg-gray-50 dark:bg-black overscroll-contain",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-20 flex items-center justify-between",children:[v.jsx("button",{onClick:M,className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),v.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),v.jsx("button",{onClick:U,disabled:!L,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),v.jsx("div",{className:"p-4 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:v.jsxs("form",{onSubmit:U,className:"space-y-6",children:[v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:v.jsxs("div",{className:"flex",children:[v.jsx("button",{type:"button",onClick:()=>w("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${_==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),v.jsx("button",{type:"button",onClick:()=>w("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${_==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${Z}`,children:"$"}),v.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:X=>{const q=X.target.value.replace(/\D/g,"");if(!q){c("");return}const ee=(parseInt(q,10)/100).toFixed(2);c(ee)},onKeyDown:X=>{(X.key==="e"||X.key==="E"||X.key==="+"||X.key==="-")&&X.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${Z} placeholder-gray-700`})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),v.jsx("input",{type:"text",value:u,onChange:X=>d(X.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsx(PP,{selectedCard:C,onCardSelect:A,isUserSelected:V}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),v.jsx("input",{type:"text",value:h,onChange:X=>g(X.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsxs("div",{className:"flex justify-between items-center mb-1",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[X,q]=m.split("-").map(Number);return`${X}-${q.toString().padStart(2,"0")}`!==a?v.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[v.jsx(pu,{size:14}),v.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),v.jsx("input",{type:"date",value:m,onChange:X=>b(X.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:v.jsx(HZ,{envelopes:O,transactionAmount:parseFloat(o)||0,onSplitChange:T})})]})})]})},qZ=()=>{const t=Ba(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:o,appSettings:c}=Jt(),{showToast:u}=rc(),[d,h]=B.useState(!1),[g,m]=B.useState(""),[b,_]=B.useState("all"),[w,E]=B.useState("All"),[T,C]=B.useState(!1),[N,V]=B.useState("all"),[P,M]=B.useState(!1),[A,k]=B.useState("all"),[D,j]=B.useState(!1),[L,U]=B.useState(()=>{const $=new Date;return $.setMonth($.getMonth()-1),$.toISOString().split("T")[0]}),[O,Z]=B.useState(()=>new Date().toISOString().split("T")[0]),[X,q]=B.useState(null),W=B.useMemo(()=>{console.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:P,currentMonth:o,transactionMonths:e.map(Y=>({id:Y.id,month:Y.month,date:Y.date,description:Y.description}))});let $=e;return P||($=e.filter(Y=>Y.month===o||!Y.month),console.log(" After month filter:",{remaining:$.length,currentMonth:o,filteredTransactions:$.map(Y=>({id:Y.id,description:Y.description,month:Y.month,matchesCurrentMonth:Y.month===o}))})),$.map(Y=>{if(!Y)return null;let J=Y.date;if(typeof Y.date=="number"){const oe=(Y.date+978307200)*1e3;J=new Date(oe).toISOString()}else if(!Y.date||typeof Y.date!="string")return null;return{...Y,date:J}}).filter(Boolean).filter(Y=>{if(Y.description==="Budgeted"||Y.description==="Piggybank Contribution")return!1;if(g){const K=g.toLowerCase(),oe=n.find(ge=>ge.id===Y.envelopeId)?.name.toLowerCase()||"",ce=Y.amount.toFixed(2);if(!(Y.description.toLowerCase().includes(K)||oe.includes(K)||ce.includes(K)))return!1}if(b!=="all"&&Y.envelopeId!==b||w!=="All"&&Y.type!==w||A!=="all"&&(!Y.paymentMethod||Y.paymentMethod.id!==A)||!Y.date||typeof Y.date!="string")return!1;const J=Y.date.split("T")[0];return!(D&&(J<L||J>O)||N!=="all"&&new Date(J).getMonth()!==parseInt(N)||T&&!Y.reconciled)}).sort((Y,J)=>new Date(J.date).getTime()-new Date(Y.date).getTime())},[e,n,g,b,w,A,L,O,T,P,o,D]);console.log(" Final filtered transactions:",{count:W.length,transactions:W.map($=>({id:$.id,description:$.description,amount:$.amount,date:$.date,month:$.month,type:$.type}))});const ee=X?n.find($=>$.id===X.envelopeId):null,ie=$=>{const F={...$,reconciled:!$.reconciled};r(F)};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))] transition-colors duration-200",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:v.jsx(Oo,{size:24})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),v.jsx("button",{onClick:()=>h(!d),className:`p-2 rounded-full transition-colors ${d?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:v.jsx(tB,{size:20,className:d?"fill-current":""})})]}),v.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[v.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",o]}),v.jsx("button",{onClick:()=>M(!P),className:`text-sm px-3 py-1 rounded-md ${P?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"}`,children:P?"Current Month Only":"All Time"})]}),v.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:v.jsxs("div",{className:"relative",children:[v.jsx(wB,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),v.jsx("input",{type:"text",placeholder:"Search transactions...",value:g,onChange:$=>m($.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),g&&v.jsx("button",{onClick:()=>m(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:v.jsx(s0,{size:16})})]})}),v.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${d?"max-h-[600px] opacity-100":"max-h-0 opacity-0"}`,children:v.jsxs("div",{className:"p-4 space-y-4",children:[v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),v.jsxs("select",{value:A,onChange:$=>k($.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[v.jsx("option",{value:"all",children:"All Payment Methods"}),c?.paymentSources?.map($=>v.jsx("option",{value:$.id,children:$.name},$.id))]})]}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),v.jsxs("select",{value:b,onChange:$=>_($.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[v.jsx("option",{value:"all",children:"All Envelopes"}),n.sort(($,F)=>$.name.localeCompare(F.name)).map($=>v.jsx("option",{value:$.id,children:$.name},$.id))]})]}),v.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map($=>v.jsx("button",{onClick:()=>E($),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${w===$?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:$},$))}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),v.jsxs("select",{value:N,onChange:$=>V($.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[v.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},($,F)=>F).map($=>v.jsx("option",{value:$,children:new Date(2022,$).toLocaleString("default",{month:"long"})},$))]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Date Range"}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("label",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Enable"}),v.jsx("button",{onClick:()=>j(!D),className:`w-9 h-5 rounded-full transition-colors relative ${D?"bg-blue-500":"bg-gray-300 dark:bg-zinc-700"}`,children:v.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${D?"translate-x-4":"translate-x-0"}`})})]})]}),v.jsxs("div",{className:`grid grid-cols-2 gap-4 transition-opacity ${D?"opacity-100":"opacity-50 pointer-events-none"}`,children:[v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"From"}),v.jsx("div",{className:"relative",children:v.jsx("input",{type:"date",value:L,onChange:$=>U($.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"To"}),v.jsx("div",{className:"relative",children:v.jsx("input",{type:"date",value:O,onChange:$=>Z($.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]})]}),v.jsxs("div",{className:"flex items-center justify-between pt-2",children:[v.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),v.jsx("button",{onClick:()=>C(!T),className:`w-11 h-6 rounded-full transition-colors relative ${T?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:v.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${T?"translate-x-5":"translate-x-0"}`})})]}),v.jsxs("div",{className:"flex items-center justify-between pt-2",children:[v.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),v.jsx("button",{onClick:()=>M(!P),className:`w-11 h-6 rounded-full transition-colors relative ${P?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:v.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${P?"translate-x-5":"translate-x-0"}`})})]})]})}),v.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:W.length===0?v.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):v.jsx(ti,{initial:!1,mode:"popLayout",children:W.map($=>{const F=n.find(Y=>Y.id===$.envelopeId);return v.jsx(gn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(W0,{disabled:$.isAutomatic,onDelete:()=>{if(!$.id)return;const Y={...$};i($.id),u("Transaction deleted","neutral",()=>a(Y))},children:v.jsx(VP,{transaction:$,envelopeName:F?.name||"Unknown Envelope",onReconcile:()=>ie($),onEdit:()=>{$.isAutomatic||(F?q($):alert("Cannot edit: Envelope deleted."))}})})},$.id)})})})}),v.jsx(jP,{isVisible:!!X&&!!ee,onClose:()=>q(null),mode:"edit",currentEnvelope:ee||{},initialTransaction:X})]})},po=({children:t})=>v.jsx(gn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:"easeInOut"},className:"w-full h-full bg-gray-50 dark:bg-black",children:t}),YZ=()=>{const t=ta();return v.jsx(ti,{mode:"wait",children:v.jsxs(OL,{location:t,children:[v.jsx(cs,{path:"/",element:v.jsx(po,{children:v.jsx(bi,{children:v.jsx(OZ,{})})})}),v.jsx(cs,{path:"/envelope/:id",element:v.jsx(po,{children:v.jsx(bi,{children:v.jsx(BZ,{})})})}),v.jsx(cs,{path:"/add-envelope",element:v.jsx(po,{children:v.jsx(bi,{children:v.jsx($Z,{})})})}),v.jsx(cs,{path:"/add-transaction",element:v.jsx(po,{children:v.jsx(bi,{children:v.jsx(zP,{})})})}),v.jsx(cs,{path:"/transactions",element:v.jsx(po,{children:v.jsx(bi,{children:v.jsx(qZ,{})})})}),v.jsx(cs,{path:"/settings",element:v.jsx(po,{children:v.jsx(bi,{children:v.jsx(FZ,{})})})}),v.jsx(cs,{path:"/settings/categories",element:v.jsx(po,{children:v.jsx(bi,{children:v.jsx(GZ,{})})})}),v.jsx(cs,{path:"/verify-email",element:v.jsx(po,{children:v.jsx(bi,{children:v.jsx(FI,{})})})})]},t.pathname)})};function XZ(){const[t,e]=B.useState(!0),[n,r]=B.useState(!1),[i,a]=B.useState(null),{appSettings:o,isOnboardingActive:c}=Jt(),{isAuthenticated:u,isInitialized:d,initializeAuth:h,lastAuthTime:g,offlineGracePeriod:m,currentUser:b}=Si();if(B.useEffect(()=>{const E=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(E)},[]),B.useEffect(()=>h(),[h]),B.useEffect(()=>{(async()=>{const T=new URLSearchParams(window.location.search),C=T.get("mode"),N=T.get("oobCode");if(C==="resetPassword"&&N){console.log(" Processing password reset from URL"),a(N);return}if(C==="verifyEmail"&&N){console.log(" Processing email verification from URL");try{await m6(vi,N),console.log(" Email verification successful");const V=window.location.pathname;window.history.replaceState({},document.title,V),alert("Email verified successfully! You can now sign in.")}catch(V){console.error(" Email verification failed:",V),alert("Email verification failed. The link may be expired or invalid.")}}})()},[]),B.useEffect(()=>{const E=document.documentElement,T=window.matchMedia("(prefers-color-scheme: dark)"),C=()=>{const N=o?.theme??"system",V=T.matches;N==="dark"||N==="system"&&V?E.classList.add("dark"):E.classList.remove("dark")};if(C(),o?.theme==="system")return T.addEventListener("change",C),()=>T.removeEventListener("change",C)},[o]),B.useEffect(()=>{const E=document.documentElement;switch(o?.fontSize??"medium"){case"extra-small":E.style.fontSize="75%";break;case"small":E.style.fontSize="87.5%";break;case"large":E.style.fontSize="112.5%";break;case"extra-large":E.style.fontSize="125%";break;default:E.style.fontSize="100%"}},[o?.fontSize]),t||!d)return v.jsx(GI,{message:"Initializing Personal Budget..."});if(i)return v.jsx(bi,{children:v.jsx(p7,{oobCode:i,onSuccess:()=>{a(null);const E=window.location.pathname;window.history.replaceState({},document.title,E)},onCancel:()=>{a(null);const E=window.location.pathname;window.history.replaceState({},document.title,E)}})});if(!u)return b?v.jsx(bi,{children:v.jsx(FI,{})}):v.jsx(bi,{children:v.jsx(h7,{})});const w=typeof navigator<"u"&&!navigator.onLine&&u&&g&&Date.now()-g<m;return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"fixed opacity-0 pointer-events-none -z-50",children:v.jsx("label",{id:"ios-haptic-trigger",htmlFor:"ios-haptic-checkbox",children:v.jsx("input",{type:"checkbox",id:"ios-haptic-checkbox",switch:"true"})})}),v.jsxs(bi,{children:[w&&v.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),v.jsx("div",{className:"ml-3",children:v.jsxs("p",{className:"text-sm",children:[v.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((m-(Date.now()-g))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),v.jsxs(a9,{children:[v.jsx(YZ,{}),n&&v.jsxs("div",{className:"fixed inset-0 z-[60]",children:[v.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>r(!1)}),v.jsx("div",{className:"absolute inset-0",children:v.jsx(zP,{onClose:()=>r(!1),onSaved:()=>r(!1)})})]}),!c&&v.jsx(Jq,{onAddTransaction:()=>r(!0)})]}),v.jsx(Zq,{})]})]})}kj({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});Tj.createRoot(document.getElementById("root")).render(v.jsx(B.StrictMode,{children:v.jsx(XZ,{})}));export{gt as T,Ke as a,u7 as b,A2 as c,yt as d,vr as e,Gi as f,pb as g,$i as h,Yu as o,Qi as q,Zr as s,Dl as t,Sa as u,s7 as w};
