function _ne(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Bl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iA={exports:{}},om={};var q3;function Sne(){if(q3)return om;q3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return om.Fragment=e,om.jsx=n,om.jsxs=n,om}var G3;function Ene(){return G3||(G3=1,iA.exports=Sne()),iA.exports}var y=Ene(),aA={exports:{}},dt={};var H3;function Tne(){if(H3)return dt;H3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),g=Symbol.iterator;function m(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function S(U,Q,K){this.props=U,this.context=Q,this.refs=w,this.updater=K||b}S.prototype.isReactComponent={},S.prototype.setState=function(U,Q){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Q,"setState")},S.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function T(){}T.prototype=S.prototype;function I(U,Q,K){this.props=U,this.context=Q,this.refs=w,this.updater=K||b}var N=I.prototype=new T;N.constructor=I,x(N,S.prototype),N.isPureReactComponent=!0;var O=Array.isArray;function P(){}var k={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function R(U,Q,K){var Z=K.ref;return{$$typeof:t,type:U,key:Q,ref:Z!==void 0?Z:null,props:K}}function z(U,Q){return R(U.type,Q,U.props)}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function B(U){var Q={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(K){return Q[K]})}var j=/\/+/g;function H(U,Q){return typeof U=="object"&&U!==null&&U.key!=null?B(""+U.key):Q.toString(36)}function X(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(P,P):(U.status="pending",U.then(function(Q){U.status==="pending"&&(U.status="fulfilled",U.value=Q)},function(Q){U.status==="pending"&&(U.status="rejected",U.reason=Q)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function q(U,Q,K,Z,le){var de=typeof U;(de==="undefined"||de==="boolean")&&(U=null);var ce=!1;if(U===null)ce=!0;else switch(de){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(U.$$typeof){case t:case e:ce=!0;break;case f:return ce=U._init,q(ce(U._payload),Q,K,Z,le)}}if(ce)return le=le(U),ce=Z===""?"."+H(U,0):Z,O(le)?(K="",ce!=null&&(K=ce.replace(j,"$&/")+"/"),q(le,Q,K,"",function(Se){return Se})):le!=null&&(L(le)&&(le=z(le,K+(le.key==null||U&&U.key===le.key?"":(""+le.key).replace(j,"$&/")+"/")+ce)),Q.push(le)),1;ce=0;var he=Z===""?".":Z+":";if(O(U))for(var ee=0;ee<U.length;ee++)Z=U[ee],de=he+H(Z,ee),ce+=q(Z,Q,K,de,le);else if(ee=m(U),typeof ee=="function")for(U=ee.call(U),ee=0;!(Z=U.next()).done;)Z=Z.value,de=he+H(Z,ee++),ce+=q(Z,Q,K,de,le);else if(de==="object"){if(typeof U.then=="function")return q(X(U),Q,K,Z,le);throw Q=String(U),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return ce}function W(U,Q,K){if(U==null)return U;var Z=[],le=0;return q(U,Z,"","",function(de){return Q.call(K,de,le++)}),Z}function J(U){if(U._status===-1){var Q=U._result;Q=Q(),Q.then(function(K){(U._status===0||U._status===-1)&&(U._status=1,U._result=K)},function(K){(U._status===0||U._status===-1)&&(U._status=2,U._result=K)}),U._status===-1&&(U._status=0,U._result=Q)}if(U._status===1)return U._result.default;throw U._result}var ne=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Y={map:W,forEach:function(U,Q,K){W(U,function(){Q.apply(this,arguments)},K)},count:function(U){var Q=0;return W(U,function(){Q++}),Q},toArray:function(U){return W(U,function(Q){return Q})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return dt.Activity=h,dt.Children=Y,dt.Component=S,dt.Fragment=n,dt.Profiler=i,dt.PureComponent=I,dt.StrictMode=r,dt.Suspense=c,dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,dt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return k.H.useMemoCache(U)}},dt.cache=function(U){return function(){return U.apply(null,arguments)}},dt.cacheSignal=function(){return null},dt.cloneElement=function(U,Q,K){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var Z=x({},U.props),le=U.key;if(Q!=null)for(de in Q.key!==void 0&&(le=""+Q.key),Q)!D.call(Q,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&Q.ref===void 0||(Z[de]=Q[de]);var de=arguments.length-2;if(de===1)Z.children=K;else if(1<de){for(var ce=Array(de),he=0;he<de;he++)ce[he]=arguments[he+2];Z.children=ce}return R(U.type,le,Z)},dt.createContext=function(U){return U={$$typeof:s,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},dt.createElement=function(U,Q,K){var Z,le={},de=null;if(Q!=null)for(Z in Q.key!==void 0&&(de=""+Q.key),Q)D.call(Q,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(le[Z]=Q[Z]);var ce=arguments.length-2;if(ce===1)le.children=K;else if(1<ce){for(var he=Array(ce),ee=0;ee<ce;ee++)he[ee]=arguments[ee+2];le.children=he}if(U&&U.defaultProps)for(Z in ce=U.defaultProps,ce)le[Z]===void 0&&(le[Z]=ce[Z]);return R(U,de,le)},dt.createRef=function(){return{current:null}},dt.forwardRef=function(U){return{$$typeof:o,render:U}},dt.isValidElement=L,dt.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:J}},dt.memo=function(U,Q){return{$$typeof:u,type:U,compare:Q===void 0?null:Q}},dt.startTransition=function(U){var Q=k.T,K={};k.T=K;try{var Z=U(),le=k.S;le!==null&&le(K,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(P,ne)}catch(de){ne(de)}finally{Q!==null&&K.types!==null&&(Q.types=K.types),k.T=Q}},dt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},dt.use=function(U){return k.H.use(U)},dt.useActionState=function(U,Q,K){return k.H.useActionState(U,Q,K)},dt.useCallback=function(U,Q){return k.H.useCallback(U,Q)},dt.useContext=function(U){return k.H.useContext(U)},dt.useDebugValue=function(){},dt.useDeferredValue=function(U,Q){return k.H.useDeferredValue(U,Q)},dt.useEffect=function(U,Q){return k.H.useEffect(U,Q)},dt.useEffectEvent=function(U){return k.H.useEffectEvent(U)},dt.useId=function(){return k.H.useId()},dt.useImperativeHandle=function(U,Q,K){return k.H.useImperativeHandle(U,Q,K)},dt.useInsertionEffect=function(U,Q){return k.H.useInsertionEffect(U,Q)},dt.useLayoutEffect=function(U,Q){return k.H.useLayoutEffect(U,Q)},dt.useMemo=function(U,Q){return k.H.useMemo(U,Q)},dt.useOptimistic=function(U,Q){return k.H.useOptimistic(U,Q)},dt.useReducer=function(U,Q,K){return k.H.useReducer(U,Q,K)},dt.useRef=function(U){return k.H.useRef(U)},dt.useState=function(U){return k.H.useState(U)},dt.useSyncExternalStore=function(U,Q,K){return k.H.useSyncExternalStore(U,Q,K)},dt.useTransition=function(){return k.H.useTransition()},dt.version="19.2.0",dt}var K3;function Np(){return K3||(K3=1,aA.exports=Tne()),aA.exports}var A=Np();const xd=Bl(A),Ane=_ne({__proto__:null,default:xd},[A]);var sA={exports:{}},lm={},oA={exports:{}},lA={};var W3;function Cne(){return W3||(W3=1,(function(t){function e(q,W){var J=q.length;q.push(W);e:for(;0<J;){var ne=J-1>>>1,Y=q[ne];if(0<i(Y,W))q[ne]=W,q[J]=Y,J=ne;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var W=q[0],J=q.pop();if(J!==W){q[0]=J;e:for(var ne=0,Y=q.length,U=Y>>>1;ne<U;){var Q=2*(ne+1)-1,K=q[Q],Z=Q+1,le=q[Z];if(0>i(K,J))Z<Y&&0>i(le,K)?(q[ne]=le,q[Z]=J,ne=Z):(q[ne]=K,q[Q]=J,ne=Q);else if(Z<Y&&0>i(le,J))q[ne]=le,q[Z]=J,ne=Z;else break e}}return W}function i(q,W){var J=q.sortIndex-W.sortIndex;return J!==0?J:q.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],f=1,h=null,g=3,m=!1,b=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function N(q){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=q)r(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(u)}}function O(q){if(x=!1,N(q),!b)if(n(c)!==null)b=!0,P||(P=!0,B());else{var W=n(u);W!==null&&X(O,W.startTime-q)}}var P=!1,k=-1,D=5,R=-1;function z(){return w?!0:!(t.unstable_now()-R<D)}function L(){if(w=!1,P){var q=t.unstable_now();R=q;var W=!0;try{e:{b=!1,x&&(x=!1,T(k),k=-1),m=!0;var J=g;try{t:{for(N(q),h=n(c);h!==null&&!(h.expirationTime>q&&z());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,g=h.priorityLevel;var Y=ne(h.expirationTime<=q);if(q=t.unstable_now(),typeof Y=="function"){h.callback=Y,N(q),W=!0;break t}h===n(c)&&r(c),N(q)}else r(c);h=n(c)}if(h!==null)W=!0;else{var U=n(u);U!==null&&X(O,U.startTime-q),W=!1}}break e}finally{h=null,g=J,m=!1}W=void 0}}finally{W?B():P=!1}}}var B;if(typeof I=="function")B=function(){I(L)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,H=j.port2;j.port1.onmessage=L,B=function(){H.postMessage(null)}}else B=function(){S(L,0)};function X(q,W){k=S(function(){q(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var J=g;g=W;try{return q()}finally{g=J}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(q,W){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var J=g;g=q;try{return W()}finally{g=J}},t.unstable_scheduleCallback=function(q,W,J){var ne=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ne+J:ne):J=ne,q){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=J+Y,q={id:f++,callback:W,priorityLevel:q,startTime:J,expirationTime:Y,sortIndex:-1},J>ne?(q.sortIndex=J,e(u,q),n(c)===null&&q===n(u)&&(x?(T(k),k=-1):x=!0,X(O,J-ne))):(q.sortIndex=Y,e(c,q),b||m||(b=!0,P||(P=!0,B()))),q},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(q){var W=g;return function(){var J=g;g=W;try{return q.apply(this,arguments)}finally{g=J}}}})(lA)),lA}var Y3;function Ine(){return Y3||(Y3=1,oA.exports=Cne()),oA.exports}var cA={exports:{}},ti={};var X3;function kne(){if(X3)return ti;X3=1;var t=Np();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:u,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ti.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,f)},ti.flushSync=function(c){var u=s.T,f=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=f,r.d.f()}},ti.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},ti.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},ti.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:m}):f==="script"&&r.d.X(c,{crossOrigin:h,integrity:g,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ti.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},ti.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin);r.d.L(c,f,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ti.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},ti.requestFormReset=function(c){r.d.r(c)},ti.unstable_batchedUpdates=function(c,u){return c(u)},ti.useFormState=function(c,u,f){return s.H.useFormState(c,u,f)},ti.useFormStatus=function(){return s.H.useHostTransitionStatus()},ti.version="19.2.0",ti}var Q3;function R8(){if(Q3)return cA.exports;Q3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),cA.exports=kne(),cA.exports}var Z3;function Pne(){if(Z3)return lm;Z3=1;var t=Ine(),e=Np(),n=R8();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function s(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function o(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=a(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,v=d;;){var E=p.return;if(E===null)break;var C=E.alternate;if(C===null){if(v=E.return,v!==null){p=v;continue}break}if(E.child===C.child){for(C=E.child;C;){if(C===p)return c(E),l;if(C===v)return c(E),d;C=C.sibling}throw Error(r(188))}if(p.return!==v.return)p=E,v=C;else{for(var V=!1,$=E.child;$;){if($===p){V=!0,p=E,v=C;break}if($===v){V=!0,v=E,p=C;break}$=$.sibling}if(!V){for($=C.child;$;){if($===p){V=!0,p=C,v=E;break}if($===v){V=!0,v=C,p=E;break}$=$.sibling}if(!V)throw Error(r(189))}}if(p.alternate!==v)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),I=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(l){return l===null||typeof l!="object"?null:(l=L&&l[L]||l["@@iterator"],typeof l=="function"?l:null)}var j=Symbol.for("react.client.reference");function H(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===j?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case I:return l.displayName||"Context";case T:return(l._context.displayName||"Context")+".Consumer";case N:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case k:return d=l.displayName||null,d!==null?d:H(l.type)||"Memo";case D:d=l._payload,l=l._init;try{return H(l(d))}catch{}}return null}var X=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ne=[],Y=-1;function U(l){return{current:l}}function Q(l){0>Y||(l.current=ne[Y],ne[Y]=null,Y--)}function K(l,d){Y++,ne[Y]=l.current,l.current=d}var Z=U(null),le=U(null),de=U(null),ce=U(null);function he(l,d){switch(K(de,d),K(le,l),K(Z,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?h3(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=h3(d),l=p3(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Q(Z),K(Z,l)}function ee(){Q(Z),Q(le),Q(de)}function Se(l){l.memoizedState!==null&&K(ce,l);var d=Z.current,p=p3(d,l.type);d!==p&&(K(le,l),K(Z,p))}function re(l){le.current===l&&(Q(Z),Q(le)),ce.current===l&&(Q(ce),rm._currentValue=J)}var oe,De;function Pe(l){if(oe===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);oe=d&&d[1]||"",De=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oe+l+De}var ze=!1;function je(l,d){if(!l||ze)return"";ze=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(d){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(xe){var ye=xe}Reflect.construct(l,[],Te)}else{try{Te.call()}catch(xe){ye=xe}l.call(Te.prototype)}}else{try{throw Error()}catch(xe){ye=xe}(Te=l())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(xe){if(xe&&ye&&typeof xe.stack=="string")return[xe.stack,ye.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=v.DetermineComponentFrameRoot(),V=C[0],$=C[1];if(V&&$){var te=V.split(`
`),me=$.split(`
`);for(E=v=0;v<te.length&&!te[v].includes("DetermineComponentFrameRoot");)v++;for(;E<me.length&&!me[E].includes("DetermineComponentFrameRoot");)E++;if(v===te.length||E===me.length)for(v=te.length-1,E=me.length-1;1<=v&&0<=E&&te[v]!==me[E];)E--;for(;1<=v&&0<=E;v--,E--)if(te[v]!==me[E]){if(v!==1||E!==1)do if(v--,E--,0>E||te[v]!==me[E]){var _e=`
`+te[v].replace(" at new "," at ");return l.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",l.displayName)),_e}while(1<=v&&0<=E);break}}}finally{ze=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Pe(p):""}function Ue(l,d){switch(l.tag){case 26:case 27:case 5:return Pe(l.type);case 16:return Pe("Lazy");case 13:return l.child!==d&&d!==null?Pe("Suspense Fallback"):Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 15:return je(l.type,!1);case 11:return je(l.type.render,!1);case 1:return je(l.type,!0);case 31:return Pe("Activity");default:return""}}function Ie(l){try{var d="",p=null;do d+=Ue(l,p),p=l,l=l.return;while(l);return d}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var Oe=Object.prototype.hasOwnProperty,Ge=t.unstable_scheduleCallback,yt=t.unstable_cancelCallback,Dt=t.unstable_shouldYield,Nt=t.unstable_requestPaint,ot=t.unstable_now,Et=t.unstable_getCurrentPriorityLevel,ft=t.unstable_ImmediatePriority,xn=t.unstable_UserBlockingPriority,Zt=t.unstable_NormalPriority,Ur=t.unstable_LowPriority,as=t.unstable_IdlePriority,ss=t.log,os=t.unstable_setDisableYieldValue,pi=null,wn=null;function _n(l){if(typeof ss=="function"&&os(l),wn&&typeof wn.setStrictMode=="function")try{wn.setStrictMode(pi,l)}catch{}}var Vt=Math.clz32?Math.clz32:Xl,Bs=Math.log,Yl=Math.LN2;function Xl(l){return l>>>=0,l===0?32:31-(Bs(l)/Yl|0)|0}var xt=256,Pn=262144,Dn=4194304;function Yi(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function _a(l,d,p){var v=l.pendingLanes;if(v===0)return 0;var E=0,C=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var $=v&134217727;return $!==0?(v=$&~C,v!==0?E=Yi(v):(V&=$,V!==0?E=Yi(V):p||(p=$&~l,p!==0&&(E=Yi(p))))):($=v&~C,$!==0?E=Yi($):V!==0?E=Yi(V):p||(p=v&~l,p!==0&&(E=Yi(p)))),E===0?0:d!==0&&d!==E&&(d&C)===0&&(C=E&-E,p=d&-d,C>=p||C===32&&(p&4194048)!==0)?d:E}function gi(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function lE(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function py(){var l=Dn;return Dn<<=1,(Dn&62914560)===0&&(Dn=4194304),l}function Fs(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function ku(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function cE(l,d,p,v,E,C){var V=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var $=l.entanglements,te=l.expirationTimes,me=l.hiddenUpdates;for(p=V&~p;0<p;){var _e=31-Vt(p),Te=1<<_e;$[_e]=0,te[_e]=-1;var ye=me[_e];if(ye!==null)for(me[_e]=null,_e=0;_e<ye.length;_e++){var xe=ye[_e];xe!==null&&(xe.lane&=-536870913)}p&=~Te}v!==0&&Pu(l,v,0),C!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=C&~(V&~d))}function Pu(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var v=31-Vt(d);l.entangledLanes|=d,l.entanglements[v]=l.entanglements[v]|1073741824|p&261930}function lg(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var v=31-Vt(p),E=1<<v;E&d|l[v]&d&&(l[v]|=d),p&=~E}}function cg(l,d){var p=d&-d;return p=(p&42)!==0?1:Du(p),(p&(l.suspendedLanes|d))!==0?0:p}function Du(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Lo(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function gy(){var l=W.p;return l!==0?l:(l=window.event,l===void 0?32:z3(l.type))}function ls(l,d){var p=W.p;try{return W.p=l,d()}finally{W.p=p}}var cs=Math.random().toString(36).slice(2),er="__reactFiber$"+cs,Dr="__reactProps$"+cs,Us="__reactContainer$"+cs,_f="__reactEvents$"+cs,uE="__reactListeners$"+cs,my="__reactHandles$"+cs,vy="__reactResources$"+cs,$s="__reactMarker$"+cs;function Sf(l){delete l[er],delete l[Dr],delete l[_f],delete l[uE],delete l[my]}function qs(l){var d=l[er];if(d)return d;for(var p=l.parentNode;p;){if(d=p[Us]||p[er]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=w3(l);l!==null;){if(p=l[er])return p;l=w3(l)}return d}l=p,p=l.parentNode}return null}function Sa(l){if(l=l[er]||l[Us]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Xi(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function Gs(l){var d=l[vy];return d||(d=l[vy]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function tr(l){l[$s]=!0}var ug=new Set,dg={};function Hs(l,d){Ks(l,d),Ks(l+"Capture",d)}function Ks(l,d){for(dg[l]=d,l=0;l<d.length;l++)ug.add(d[l])}var fg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hg={},pg={};function yy(l){return Oe.call(pg,l)?!0:Oe.call(hg,l)?!1:fg.test(l)?pg[l]=!0:(hg[l]=!0,!1)}function Ef(l,d,p){if(yy(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var v=d.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Qi(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function nr(l,d,p,v){if(v===null)l.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+v)}}function Or(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Ql(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function gg(l,d,p){var v=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var E=v.get,C=v.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return E.call(this)},set:function(V){p=""+V,C.call(this,V)}}),Object.defineProperty(l,d,{enumerable:v.enumerable}),{getValue:function(){return p},setValue:function(V){p=""+V},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Gt(l){if(!l._valueTracker){var d=Ql(l)?"checked":"value";l._valueTracker=gg(l,d,""+l[d])}}function Ou(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),v="";return l&&(v=Ql(l)?l.checked?"true":"false":l.value),l=v,l!==p?(d.setValue(l),!0):!1}function Ws(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Nu=/[\n"\\]/g;function ki(l){return l.replace(Nu,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Tf(l,d,p,v,E,C,V,$){l.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?l.type=V:l.removeAttribute("type"),d!=null?V==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Or(d)):l.value!==""+Or(d)&&(l.value=""+Or(d)):V!=="submit"&&V!=="reset"||l.removeAttribute("value"),d!=null?mg(l,V,Or(d)):p!=null?mg(l,V,Or(p)):v!=null&&l.removeAttribute("value"),E==null&&C!=null&&(l.defaultChecked=!!C),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?l.name=""+Or($):l.removeAttribute("name")}function by(l,d,p,v,E,C,V,$){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(l.type=C),d!=null||p!=null){if(!(C!=="submit"&&C!=="reset"||d!=null)){Gt(l);return}p=p!=null?""+Or(p):"",d=d!=null?""+Or(d):p,$||d===l.value||(l.value=d),l.defaultValue=d}v=v??E,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=$?l.checked:!!v,l.defaultChecked=!!v,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(l.name=V),Gt(l)}function mg(l,d,p){d==="number"&&Ws(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Zl(l,d,p,v){if(l=l.options,d){d={};for(var E=0;E<p.length;E++)d["$"+p[E]]=!0;for(p=0;p<l.length;p++)E=d.hasOwnProperty("$"+l[p].value),l[p].selected!==E&&(l[p].selected=E),E&&v&&(l[p].defaultSelected=!0)}else{for(p=""+Or(p),d=null,E=0;E<l.length;E++){if(l[E].value===p){l[E].selected=!0,v&&(l[E].defaultSelected=!0);return}d!==null||l[E].disabled||(d=l[E])}d!==null&&(d.selected=!0)}}function xy(l,d,p){if(d!=null&&(d=""+Or(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+Or(p):""}function Jl(l,d,p,v){if(d==null){if(v!=null){if(p!=null)throw Error(r(92));if(X(v)){if(1<v.length)throw Error(r(93));v=v[0]}p=v}p==null&&(p=""),d=p}p=Or(d),l.defaultValue=p,v=l.textContent,v===p&&v!==""&&v!==null&&(l.value=v),Gt(l)}function Pi(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var wy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vg(l,d,p){var v=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":v?l.setProperty(d,p):typeof p!="number"||p===0||wy.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function yg(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||d!=null&&d.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var E in d)v=d[E],d.hasOwnProperty(E)&&p[E]!==v&&vg(l,E,v)}else for(var C in d)d.hasOwnProperty(C)&&vg(l,C,d[C])}function Af(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _y=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ec=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cf(l){return ec.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function us(){}var bg=null;function Ea(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var tc=null,Ys=null;function Ru(l){var d=Sa(l);if(d&&(l=d.stateNode)){var p=l[Dr]||null;e:switch(l=d.stateNode,d.type){case"input":if(Tf(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+ki(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var v=p[d];if(v!==l&&v.form===l.form){var E=v[Dr]||null;if(!E)throw Error(r(90));Tf(v,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(d=0;d<p.length;d++)v=p[d],v.form===l.form&&Ou(v)}break e;case"textarea":xy(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Zl(l,!!p.multiple,d,!1)}}}var If=!1;function nc(l,d,p){if(If)return l(d,p);If=!0;try{var v=l(d);return v}finally{if(If=!1,(tc!==null||Ys!==null)&&(gb(),tc&&(d=tc,l=Ys,Ys=tc=null,Ru(d),l)))for(d=0;d<l.length;d++)Ru(l[d])}}function ds(l,d){var p=l.stateNode;if(p===null)return null;var v=p[Dr]||null;if(v===null)return null;p=v[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var Ta=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mu=!1;if(Ta)try{var Jt={};Object.defineProperty(Jt,"passive",{get:function(){Mu=!0}}),window.addEventListener("test",Jt,Jt),window.removeEventListener("test",Jt,Jt)}catch{Mu=!1}var Xs=null,xg=null,ju=null;function wg(){if(ju)return ju;var l,d=xg,p=d.length,v,E="value"in Xs?Xs.value:Xs.textContent,C=E.length;for(l=0;l<p&&d[l]===E[l];l++);var V=p-l;for(v=1;v<=V&&d[p-v]===E[C-v];v++);return ju=E.slice(l,1<v?1-v:void 0)}function zu(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Vo(){return!0}function fs(){return!1}function $r(l){function d(p,v,E,C,V){this._reactName=p,this._targetInst=E,this.type=v,this.nativeEvent=C,this.target=V,this.currentTarget=null;for(var $ in l)l.hasOwnProperty($)&&(p=l[$],this[$]=p?p(C):C[$]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Vo:fs,this.isPropagationStopped=fs,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Vo)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Vo)},persist:function(){},isPersistent:Vo}),d}var Bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qs=$r(Bo),rc=h({},Bo,{view:0,detail:0}),_g=$r(rc),ic,kf,Zs,Pf=h({},rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ac,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Zs&&(Zs&&l.type==="mousemove"?(ic=l.screenX-Zs.screenX,kf=l.screenY-Zs.screenY):kf=ic=0,Zs=l),ic)},movementY:function(l){return"movementY"in l?l.movementY:kf}}),Sg=$r(Pf),Lu=h({},Pf,{dataTransfer:0}),Sy=$r(Lu),Ey=h({},rc,{relatedTarget:0}),Vu=$r(Ey),Eg=h({},Bo,{animationName:0,elapsedTime:0,pseudoElement:0}),Ty=$r(Eg),Df=h({},Bo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Ay=$r(Df),Cy=h({},Bo,{data:0}),Js=$r(Cy),Iy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ky={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Py={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dy(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=Py[l])?!!d[l]:!1}function ac(){return Dy}var mi=h({},rc,{key:function(l){if(l.key){var d=Iy[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=zu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?ky[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ac,charCode:function(l){return l.type==="keypress"?zu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?zu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Oy=$r(mi),Ny=h({},Pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fo=$r(Ny),_=h({},rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ac}),M=$r(_),F=h({},Bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),G=$r(F),pe=h({},Pf,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),be=$r(pe),Me=h({},Bo,{newState:0,oldState:0}),ht=$r(Me),Hn=[9,13,27,32],Bt=Ta&&"CompositionEvent"in window,Sn=null;Ta&&"documentMode"in document&&(Sn=document.documentMode);var Aa=Ta&&"TextEvent"in window&&!Sn,eo=Ta&&(!Bt||Sn&&8<Sn&&11>=Sn),hs=" ",ps=!1;function Bu(l,d){switch(l){case"keyup":return Hn.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Of(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Nf=!1;function Hee(l,d){switch(l){case"compositionend":return Of(d);case"keypress":return d.which!==32?null:(ps=!0,hs);case"textInput":return l=d.data,l===hs&&ps?null:l;default:return null}}function Kee(l,d){if(Nf)return l==="compositionend"||!Bt&&Bu(l,d)?(l=wg(),ju=xg=Xs=null,Nf=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return eo&&d.locale!=="ko"?null:d.data;default:return null}}var Wee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function EM(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!Wee[l.type]:d==="textarea"}function TM(l,d,p,v){tc?Ys?Ys.push(v):Ys=[v]:tc=v,d=_b(d,"onChange"),0<d.length&&(p=new Qs("onChange","change",null,p,v),l.push({event:p,listeners:d}))}var Tg=null,Ag=null;function Yee(l){o3(l,0)}function Ry(l){var d=Xi(l);if(Ou(d))return l}function AM(l,d){if(l==="change")return d}var CM=!1;if(Ta){var dE;if(Ta){var fE="oninput"in document;if(!fE){var IM=document.createElement("div");IM.setAttribute("oninput","return;"),fE=typeof IM.oninput=="function"}dE=fE}else dE=!1;CM=dE&&(!document.documentMode||9<document.documentMode)}function kM(){Tg&&(Tg.detachEvent("onpropertychange",PM),Ag=Tg=null)}function PM(l){if(l.propertyName==="value"&&Ry(Ag)){var d=[];TM(d,Ag,l,Ea(l)),nc(Yee,d)}}function Xee(l,d,p){l==="focusin"?(kM(),Tg=d,Ag=p,Tg.attachEvent("onpropertychange",PM)):l==="focusout"&&kM()}function Qee(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Ry(Ag)}function Zee(l,d){if(l==="click")return Ry(d)}function Jee(l,d){if(l==="input"||l==="change")return Ry(d)}function ete(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Zi=typeof Object.is=="function"?Object.is:ete;function Cg(l,d){if(Zi(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),v=Object.keys(d);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var E=p[v];if(!Oe.call(d,E)||!Zi(l[E],d[E]))return!1}return!0}function DM(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function OM(l,d){var p=DM(l);l=0;for(var v;p;){if(p.nodeType===3){if(v=l+p.textContent.length,l<=d&&v>=d)return{node:p,offset:d-l};l=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=DM(p)}}function NM(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?NM(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function RM(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Ws(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=Ws(l.document)}return d}function hE(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var tte=Ta&&"documentMode"in document&&11>=document.documentMode,Rf=null,pE=null,Ig=null,gE=!1;function MM(l,d,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;gE||Rf==null||Rf!==Ws(v)||(v=Rf,"selectionStart"in v&&hE(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Ig&&Cg(Ig,v)||(Ig=v,v=_b(pE,"onSelect"),0<v.length&&(d=new Qs("onSelect","select",null,d,p),l.push({event:d,listeners:v}),d.target=Rf)))}function Fu(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Mf={animationend:Fu("Animation","AnimationEnd"),animationiteration:Fu("Animation","AnimationIteration"),animationstart:Fu("Animation","AnimationStart"),transitionrun:Fu("Transition","TransitionRun"),transitionstart:Fu("Transition","TransitionStart"),transitioncancel:Fu("Transition","TransitionCancel"),transitionend:Fu("Transition","TransitionEnd")},mE={},jM={};Ta&&(jM=document.createElement("div").style,"AnimationEvent"in window||(delete Mf.animationend.animation,delete Mf.animationiteration.animation,delete Mf.animationstart.animation),"TransitionEvent"in window||delete Mf.transitionend.transition);function Uu(l){if(mE[l])return mE[l];if(!Mf[l])return l;var d=Mf[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in jM)return mE[l]=d[p];return l}var zM=Uu("animationend"),LM=Uu("animationiteration"),VM=Uu("animationstart"),nte=Uu("transitionrun"),rte=Uu("transitionstart"),ite=Uu("transitioncancel"),BM=Uu("transitionend"),FM=new Map,vE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vE.push("scrollEnd");function gs(l,d){FM.set(l,d),Hs(d,[l])}var My=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ca=[],jf=0,yE=0;function jy(){for(var l=jf,d=yE=jf=0;d<l;){var p=Ca[d];Ca[d++]=null;var v=Ca[d];Ca[d++]=null;var E=Ca[d];Ca[d++]=null;var C=Ca[d];if(Ca[d++]=null,v!==null&&E!==null){var V=v.pending;V===null?E.next=E:(E.next=V.next,V.next=E),v.pending=E}C!==0&&UM(p,E,C)}}function zy(l,d,p,v){Ca[jf++]=l,Ca[jf++]=d,Ca[jf++]=p,Ca[jf++]=v,yE|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function bE(l,d,p,v){return zy(l,d,p,v),Ly(l)}function $u(l,d){return zy(l,null,null,d),Ly(l)}function UM(l,d,p){l.lanes|=p;var v=l.alternate;v!==null&&(v.lanes|=p);for(var E=!1,C=l.return;C!==null;)C.childLanes|=p,v=C.alternate,v!==null&&(v.childLanes|=p),C.tag===22&&(l=C.stateNode,l===null||l._visibility&1||(E=!0)),l=C,C=C.return;return l.tag===3?(C=l.stateNode,E&&d!==null&&(E=31-Vt(p),l=C.hiddenUpdates,v=l[E],v===null?l[E]=[d]:v.push(d),d.lane=p|536870912),C):null}function Ly(l){if(50<Xg)throw Xg=0,IT=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var zf={};function ate(l,d,p,v){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(l,d,p,v){return new ate(l,d,p,v)}function xE(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Uo(l,d){var p=l.alternate;return p===null?(p=Ji(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function $M(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Vy(l,d,p,v,E,C){var V=0;if(v=l,typeof l=="function")xE(l)&&(V=1);else if(typeof l=="string")V=une(l,p,Z.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=Ji(31,p,d,E),l.elementType=R,l.lanes=C,l;case x:return qu(p.children,E,C,d);case w:V=8,E|=24;break;case S:return l=Ji(12,p,d,E|2),l.elementType=S,l.lanes=C,l;case O:return l=Ji(13,p,d,E),l.elementType=O,l.lanes=C,l;case P:return l=Ji(19,p,d,E),l.elementType=P,l.lanes=C,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case I:V=10;break e;case T:V=9;break e;case N:V=11;break e;case k:V=14;break e;case D:V=16,v=null;break e}V=29,p=Error(r(130,l===null?"null":typeof l,"")),v=null}return d=Ji(V,p,d,E),d.elementType=l,d.type=v,d.lanes=C,d}function qu(l,d,p,v){return l=Ji(7,l,v,d),l.lanes=p,l}function wE(l,d,p){return l=Ji(6,l,null,d),l.lanes=p,l}function qM(l){var d=Ji(18,null,null,0);return d.stateNode=l,d}function _E(l,d,p){return d=Ji(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var GM=new WeakMap;function Ia(l,d){if(typeof l=="object"&&l!==null){var p=GM.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Ie(d)},GM.set(l,d),d)}return{value:l,source:d,stack:Ie(d)}}var Lf=[],Vf=0,By=null,kg=0,ka=[],Pa=0,sc=null,to=1,no="";function $o(l,d){Lf[Vf++]=kg,Lf[Vf++]=By,By=l,kg=d}function HM(l,d,p){ka[Pa++]=to,ka[Pa++]=no,ka[Pa++]=sc,sc=l;var v=to;l=no;var E=32-Vt(v)-1;v&=~(1<<E),p+=1;var C=32-Vt(d)+E;if(30<C){var V=E-E%5;C=(v&(1<<V)-1).toString(32),v>>=V,E-=V,to=1<<32-Vt(d)+E|p<<E|v,no=C+l}else to=1<<C|p<<E|v,no=l}function SE(l){l.return!==null&&($o(l,1),HM(l,1,0))}function EE(l){for(;l===By;)By=Lf[--Vf],Lf[Vf]=null,kg=Lf[--Vf],Lf[Vf]=null;for(;l===sc;)sc=ka[--Pa],ka[Pa]=null,no=ka[--Pa],ka[Pa]=null,to=ka[--Pa],ka[Pa]=null}function KM(l,d){ka[Pa++]=to,ka[Pa++]=no,ka[Pa++]=sc,to=d.id,no=d.overflow,sc=l}var qr=null,pn=null,kt=!1,oc=null,Da=!1,TE=Error(r(519));function lc(l){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pg(Ia(d,l)),TE}function WM(l){var d=l.stateNode,p=l.type,v=l.memoizedProps;switch(d[er]=l,d[Dr]=v,p){case"dialog":_t("cancel",d),_t("close",d);break;case"iframe":case"object":case"embed":_t("load",d);break;case"video":case"audio":for(p=0;p<Zg.length;p++)_t(Zg[p],d);break;case"source":_t("error",d);break;case"img":case"image":case"link":_t("error",d),_t("load",d);break;case"details":_t("toggle",d);break;case"input":_t("invalid",d),by(d,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":_t("invalid",d);break;case"textarea":_t("invalid",d),Jl(d,v.value,v.defaultValue,v.children)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||v.suppressHydrationWarning===!0||d3(d.textContent,p)?(v.popover!=null&&(_t("beforetoggle",d),_t("toggle",d)),v.onScroll!=null&&_t("scroll",d),v.onScrollEnd!=null&&_t("scrollend",d),v.onClick!=null&&(d.onclick=us),d=!0):d=!1,d||lc(l,!0)}function YM(l){for(qr=l.return;qr;)switch(qr.tag){case 5:case 31:case 13:Da=!1;return;case 27:case 3:Da=!0;return;default:qr=qr.return}}function Bf(l){if(l!==qr)return!1;if(!kt)return YM(l),kt=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||$T(l.type,l.memoizedProps)),p=!p),p&&pn&&lc(l),YM(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));pn=x3(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));pn=x3(l)}else d===27?(d=pn,_c(l.type)?(l=WT,WT=null,pn=l):pn=d):pn=qr?Na(l.stateNode.nextSibling):null;return!0}function Gu(){pn=qr=null,kt=!1}function AE(){var l=oc;return l!==null&&(Ri===null?Ri=l:Ri.push.apply(Ri,l),oc=null),l}function Pg(l){oc===null?oc=[l]:oc.push(l)}var CE=U(null),Hu=null,qo=null;function cc(l,d,p){K(CE,d._currentValue),d._currentValue=p}function Go(l){l._currentValue=CE.current,Q(CE)}function IE(l,d,p){for(;l!==null;){var v=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,v!==null&&(v.childLanes|=d)):v!==null&&(v.childLanes&d)!==d&&(v.childLanes|=d),l===p)break;l=l.return}}function kE(l,d,p,v){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var C=E.dependencies;if(C!==null){var V=E.child;C=C.firstContext;e:for(;C!==null;){var $=C;C=E;for(var te=0;te<d.length;te++)if($.context===d[te]){C.lanes|=p,$=C.alternate,$!==null&&($.lanes|=p),IE(C.return,p,l),v||(V=null);break e}C=$.next}}else if(E.tag===18){if(V=E.return,V===null)throw Error(r(341));V.lanes|=p,C=V.alternate,C!==null&&(C.lanes|=p),IE(V,p,l),V=null}else V=E.child;if(V!==null)V.return=E;else for(V=E;V!==null;){if(V===l){V=null;break}if(E=V.sibling,E!==null){E.return=V.return,V=E;break}V=V.return}E=V}}function Ff(l,d,p,v){l=null;for(var E=d,C=!1;E!==null;){if(!C){if((E.flags&524288)!==0)C=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var V=E.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var $=E.type;Zi(E.pendingProps.value,V.value)||(l!==null?l.push($):l=[$])}}else if(E===ce.current){if(V=E.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(rm):l=[rm])}E=E.return}l!==null&&kE(d,l,p,v),d.flags|=262144}function Fy(l){for(l=l.firstContext;l!==null;){if(!Zi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Ku(l){Hu=l,qo=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Gr(l){return XM(Hu,l)}function Uy(l,d){return Hu===null&&Ku(l),XM(l,d)}function XM(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},qo===null){if(l===null)throw Error(r(308));qo=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else qo=qo.next=d;return p}var ste=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,v){l.push(v)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},ote=t.unstable_scheduleCallback,lte=t.unstable_NormalPriority,rr={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function PE(){return{controller:new ste,data:new Map,refCount:0}}function Dg(l){l.refCount--,l.refCount===0&&ote(lte,function(){l.controller.abort()})}var Og=null,DE=0,Uf=0,$f=null;function cte(l,d){if(Og===null){var p=Og=[];DE=0,Uf=RT(),$f={status:"pending",value:void 0,then:function(v){p.push(v)}}}return DE++,d.then(QM,QM),d}function QM(){if(--DE===0&&Og!==null){$f!==null&&($f.status="fulfilled");var l=Og;Og=null,Uf=0,$f=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function ute(l,d){var p=[],v={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return l.then(function(){v.status="fulfilled",v.value=d;for(var E=0;E<p.length;E++)(0,p[E])(d)},function(E){for(v.status="rejected",v.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),v}var ZM=q.S;q.S=function(l,d){M4=ot(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&cte(l,d),ZM!==null&&ZM(l,d)};var Wu=U(null);function OE(){var l=Wu.current;return l!==null?l:ln.pooledCache}function $y(l,d){d===null?K(Wu,Wu.current):K(Wu,d.pool)}function JM(){var l=OE();return l===null?null:{parent:rr._currentValue,pool:l}}var qf=Error(r(460)),NE=Error(r(474)),qy=Error(r(542)),Gy={then:function(){}};function ej(l){return l=l.status,l==="fulfilled"||l==="rejected"}function tj(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(us,us),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,rj(l),l;default:if(typeof d.status=="string")d.then(us,us);else{if(l=ln,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(v){if(d.status==="pending"){var E=d;E.status="fulfilled",E.value=v}},function(v){if(d.status==="pending"){var E=d;E.status="rejected",E.reason=v}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,rj(l),l}throw Xu=d,qf}}function Yu(l){try{var d=l._init;return d(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Xu=p,qf):p}}var Xu=null;function nj(){if(Xu===null)throw Error(r(459));var l=Xu;return Xu=null,l}function rj(l){if(l===qf||l===qy)throw Error(r(483))}var Gf=null,Ng=0;function Hy(l){var d=Ng;return Ng+=1,Gf===null&&(Gf=[]),tj(Gf,l,d)}function Rg(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Ky(l,d){throw d.$$typeof===g?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function ij(l){function d(ue,se){if(l){var ge=ue.deletions;ge===null?(ue.deletions=[se],ue.flags|=16):ge.push(se)}}function p(ue,se){if(!l)return null;for(;se!==null;)d(ue,se),se=se.sibling;return null}function v(ue){for(var se=new Map;ue!==null;)ue.key!==null?se.set(ue.key,ue):se.set(ue.index,ue),ue=ue.sibling;return se}function E(ue,se){return ue=Uo(ue,se),ue.index=0,ue.sibling=null,ue}function C(ue,se,ge){return ue.index=ge,l?(ge=ue.alternate,ge!==null?(ge=ge.index,ge<se?(ue.flags|=67108866,se):ge):(ue.flags|=67108866,se)):(ue.flags|=1048576,se)}function V(ue){return l&&ue.alternate===null&&(ue.flags|=67108866),ue}function $(ue,se,ge,Ee){return se===null||se.tag!==6?(se=wE(ge,ue.mode,Ee),se.return=ue,se):(se=E(se,ge),se.return=ue,se)}function te(ue,se,ge,Ee){var Ze=ge.type;return Ze===x?_e(ue,se,ge.props.children,Ee,ge.key):se!==null&&(se.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===D&&Yu(Ze)===se.type)?(se=E(se,ge.props),Rg(se,ge),se.return=ue,se):(se=Vy(ge.type,ge.key,ge.props,null,ue.mode,Ee),Rg(se,ge),se.return=ue,se)}function me(ue,se,ge,Ee){return se===null||se.tag!==4||se.stateNode.containerInfo!==ge.containerInfo||se.stateNode.implementation!==ge.implementation?(se=_E(ge,ue.mode,Ee),se.return=ue,se):(se=E(se,ge.children||[]),se.return=ue,se)}function _e(ue,se,ge,Ee,Ze){return se===null||se.tag!==7?(se=qu(ge,ue.mode,Ee,Ze),se.return=ue,se):(se=E(se,ge),se.return=ue,se)}function Te(ue,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=wE(""+se,ue.mode,ge),se.return=ue,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case m:return ge=Vy(se.type,se.key,se.props,null,ue.mode,ge),Rg(ge,se),ge.return=ue,ge;case b:return se=_E(se,ue.mode,ge),se.return=ue,se;case D:return se=Yu(se),Te(ue,se,ge)}if(X(se)||B(se))return se=qu(se,ue.mode,ge,null),se.return=ue,se;if(typeof se.then=="function")return Te(ue,Hy(se),ge);if(se.$$typeof===I)return Te(ue,Uy(ue,se),ge);Ky(ue,se)}return null}function ye(ue,se,ge,Ee){var Ze=se!==null?se.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Ze!==null?null:$(ue,se,""+ge,Ee);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case m:return ge.key===Ze?te(ue,se,ge,Ee):null;case b:return ge.key===Ze?me(ue,se,ge,Ee):null;case D:return ge=Yu(ge),ye(ue,se,ge,Ee)}if(X(ge)||B(ge))return Ze!==null?null:_e(ue,se,ge,Ee,null);if(typeof ge.then=="function")return ye(ue,se,Hy(ge),Ee);if(ge.$$typeof===I)return ye(ue,se,Uy(ue,ge),Ee);Ky(ue,ge)}return null}function xe(ue,se,ge,Ee,Ze){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return ue=ue.get(ge)||null,$(se,ue,""+Ee,Ze);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case m:return ue=ue.get(Ee.key===null?ge:Ee.key)||null,te(se,ue,Ee,Ze);case b:return ue=ue.get(Ee.key===null?ge:Ee.key)||null,me(se,ue,Ee,Ze);case D:return Ee=Yu(Ee),xe(ue,se,ge,Ee,Ze)}if(X(Ee)||B(Ee))return ue=ue.get(ge)||null,_e(se,ue,Ee,Ze,null);if(typeof Ee.then=="function")return xe(ue,se,ge,Hy(Ee),Ze);if(Ee.$$typeof===I)return xe(ue,se,ge,Uy(se,Ee),Ze);Ky(se,Ee)}return null}function $e(ue,se,ge,Ee){for(var Ze=null,Mt=null,Ke=se,mt=se=0,At=null;Ke!==null&&mt<ge.length;mt++){Ke.index>mt?(At=Ke,Ke=null):At=Ke.sibling;var jt=ye(ue,Ke,ge[mt],Ee);if(jt===null){Ke===null&&(Ke=At);break}l&&Ke&&jt.alternate===null&&d(ue,Ke),se=C(jt,se,mt),Mt===null?Ze=jt:Mt.sibling=jt,Mt=jt,Ke=At}if(mt===ge.length)return p(ue,Ke),kt&&$o(ue,mt),Ze;if(Ke===null){for(;mt<ge.length;mt++)Ke=Te(ue,ge[mt],Ee),Ke!==null&&(se=C(Ke,se,mt),Mt===null?Ze=Ke:Mt.sibling=Ke,Mt=Ke);return kt&&$o(ue,mt),Ze}for(Ke=v(Ke);mt<ge.length;mt++)At=xe(Ke,ue,mt,ge[mt],Ee),At!==null&&(l&&At.alternate!==null&&Ke.delete(At.key===null?mt:At.key),se=C(At,se,mt),Mt===null?Ze=At:Mt.sibling=At,Mt=At);return l&&Ke.forEach(function(Cc){return d(ue,Cc)}),kt&&$o(ue,mt),Ze}function nt(ue,se,ge,Ee){if(ge==null)throw Error(r(151));for(var Ze=null,Mt=null,Ke=se,mt=se=0,At=null,jt=ge.next();Ke!==null&&!jt.done;mt++,jt=ge.next()){Ke.index>mt?(At=Ke,Ke=null):At=Ke.sibling;var Cc=ye(ue,Ke,jt.value,Ee);if(Cc===null){Ke===null&&(Ke=At);break}l&&Ke&&Cc.alternate===null&&d(ue,Ke),se=C(Cc,se,mt),Mt===null?Ze=Cc:Mt.sibling=Cc,Mt=Cc,Ke=At}if(jt.done)return p(ue,Ke),kt&&$o(ue,mt),Ze;if(Ke===null){for(;!jt.done;mt++,jt=ge.next())jt=Te(ue,jt.value,Ee),jt!==null&&(se=C(jt,se,mt),Mt===null?Ze=jt:Mt.sibling=jt,Mt=jt);return kt&&$o(ue,mt),Ze}for(Ke=v(Ke);!jt.done;mt++,jt=ge.next())jt=xe(Ke,ue,mt,jt.value,Ee),jt!==null&&(l&&jt.alternate!==null&&Ke.delete(jt.key===null?mt:jt.key),se=C(jt,se,mt),Mt===null?Ze=jt:Mt.sibling=jt,Mt=jt);return l&&Ke.forEach(function(wne){return d(ue,wne)}),kt&&$o(ue,mt),Ze}function nn(ue,se,ge,Ee){if(typeof ge=="object"&&ge!==null&&ge.type===x&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case m:e:{for(var Ze=ge.key;se!==null;){if(se.key===Ze){if(Ze=ge.type,Ze===x){if(se.tag===7){p(ue,se.sibling),Ee=E(se,ge.props.children),Ee.return=ue,ue=Ee;break e}}else if(se.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===D&&Yu(Ze)===se.type){p(ue,se.sibling),Ee=E(se,ge.props),Rg(Ee,ge),Ee.return=ue,ue=Ee;break e}p(ue,se);break}else d(ue,se);se=se.sibling}ge.type===x?(Ee=qu(ge.props.children,ue.mode,Ee,ge.key),Ee.return=ue,ue=Ee):(Ee=Vy(ge.type,ge.key,ge.props,null,ue.mode,Ee),Rg(Ee,ge),Ee.return=ue,ue=Ee)}return V(ue);case b:e:{for(Ze=ge.key;se!==null;){if(se.key===Ze)if(se.tag===4&&se.stateNode.containerInfo===ge.containerInfo&&se.stateNode.implementation===ge.implementation){p(ue,se.sibling),Ee=E(se,ge.children||[]),Ee.return=ue,ue=Ee;break e}else{p(ue,se);break}else d(ue,se);se=se.sibling}Ee=_E(ge,ue.mode,Ee),Ee.return=ue,ue=Ee}return V(ue);case D:return ge=Yu(ge),nn(ue,se,ge,Ee)}if(X(ge))return $e(ue,se,ge,Ee);if(B(ge)){if(Ze=B(ge),typeof Ze!="function")throw Error(r(150));return ge=Ze.call(ge),nt(ue,se,ge,Ee)}if(typeof ge.then=="function")return nn(ue,se,Hy(ge),Ee);if(ge.$$typeof===I)return nn(ue,se,Uy(ue,ge),Ee);Ky(ue,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,se!==null&&se.tag===6?(p(ue,se.sibling),Ee=E(se,ge),Ee.return=ue,ue=Ee):(p(ue,se),Ee=wE(ge,ue.mode,Ee),Ee.return=ue,ue=Ee),V(ue)):p(ue,se)}return function(ue,se,ge,Ee){try{Ng=0;var Ze=nn(ue,se,ge,Ee);return Gf=null,Ze}catch(Ke){if(Ke===qf||Ke===qy)throw Ke;var Mt=Ji(29,Ke,null,ue.mode);return Mt.lanes=Ee,Mt.return=ue,Mt}finally{}}}var Qu=ij(!0),aj=ij(!1),uc=!1;function RE(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ME(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function dc(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function fc(l,d,p){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(Ft&2)!==0){var E=v.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),v.pending=d,d=Ly(l),UM(l,null,p),d}return zy(l,v,d,p),Ly(l)}function Mg(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var v=d.lanes;v&=l.pendingLanes,p|=v,d.lanes=p,lg(l,p)}}function jE(l,d){var p=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var E=null,C=null;if(p=p.firstBaseUpdate,p!==null){do{var V={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};C===null?E=C=V:C=C.next=V,p=p.next}while(p!==null);C===null?E=C=d:C=C.next=d}else E=C=d;p={baseState:v.baseState,firstBaseUpdate:E,lastBaseUpdate:C,shared:v.shared,callbacks:v.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var zE=!1;function jg(){if(zE){var l=$f;if(l!==null)throw l}}function zg(l,d,p,v){zE=!1;var E=l.updateQueue;uc=!1;var C=E.firstBaseUpdate,V=E.lastBaseUpdate,$=E.shared.pending;if($!==null){E.shared.pending=null;var te=$,me=te.next;te.next=null,V===null?C=me:V.next=me,V=te;var _e=l.alternate;_e!==null&&(_e=_e.updateQueue,$=_e.lastBaseUpdate,$!==V&&($===null?_e.firstBaseUpdate=me:$.next=me,_e.lastBaseUpdate=te))}if(C!==null){var Te=E.baseState;V=0,_e=me=te=null,$=C;do{var ye=$.lane&-536870913,xe=ye!==$.lane;if(xe?(Tt&ye)===ye:(v&ye)===ye){ye!==0&&ye===Uf&&(zE=!0),_e!==null&&(_e=_e.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var $e=l,nt=$;ye=d;var nn=p;switch(nt.tag){case 1:if($e=nt.payload,typeof $e=="function"){Te=$e.call(nn,Te,ye);break e}Te=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=nt.payload,ye=typeof $e=="function"?$e.call(nn,Te,ye):$e,ye==null)break e;Te=h({},Te,ye);break e;case 2:uc=!0}}ye=$.callback,ye!==null&&(l.flags|=64,xe&&(l.flags|=8192),xe=E.callbacks,xe===null?E.callbacks=[ye]:xe.push(ye))}else xe={lane:ye,tag:$.tag,payload:$.payload,callback:$.callback,next:null},_e===null?(me=_e=xe,te=Te):_e=_e.next=xe,V|=ye;if($=$.next,$===null){if($=E.shared.pending,$===null)break;xe=$,$=xe.next,xe.next=null,E.lastBaseUpdate=xe,E.shared.pending=null}}while(!0);_e===null&&(te=Te),E.baseState=te,E.firstBaseUpdate=me,E.lastBaseUpdate=_e,C===null&&(E.shared.lanes=0),vc|=V,l.lanes=V,l.memoizedState=Te}}function sj(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function oj(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)sj(p[l],d)}var Hf=U(null),Wy=U(0);function lj(l,d){l=el,K(Wy,l),K(Hf,d),el=l|d.baseLanes}function LE(){K(Wy,el),K(Hf,Hf.current)}function VE(){el=Wy.current,Q(Hf),Q(Wy)}var ea=U(null),Oa=null;function hc(l){var d=l.alternate;K(Kn,Kn.current&1),K(ea,l),Oa===null&&(d===null||Hf.current!==null||d.memoizedState!==null)&&(Oa=l)}function BE(l){K(Kn,Kn.current),K(ea,l),Oa===null&&(Oa=l)}function cj(l){l.tag===22?(K(Kn,Kn.current),K(ea,l),Oa===null&&(Oa=l)):pc()}function pc(){K(Kn,Kn.current),K(ea,ea.current)}function ta(l){Q(ea),Oa===l&&(Oa=null),Q(Kn)}var Kn=U(0);function Yy(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||HT(p)||KT(p)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Ho=0,pt=null,en=null,ir=null,Xy=!1,Kf=!1,Zu=!1,Qy=0,Lg=0,Wf=null,dte=0;function Ln(){throw Error(r(321))}function FE(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Zi(l[p],d[p]))return!1;return!0}function UE(l,d,p,v,E,C){return Ho=C,pt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,q.H=l===null||l.memoizedState===null?Hj:rT,Zu=!1,C=p(v,E),Zu=!1,Kf&&(C=dj(d,p,v,E)),uj(l),C}function uj(l){q.H=Fg;var d=en!==null&&en.next!==null;if(Ho=0,ir=en=pt=null,Xy=!1,Lg=0,Wf=null,d)throw Error(r(300));l===null||ar||(l=l.dependencies,l!==null&&Fy(l)&&(ar=!0))}function dj(l,d,p,v){pt=l;var E=0;do{if(Kf&&(Wf=null),Lg=0,Kf=!1,25<=E)throw Error(r(301));if(E+=1,ir=en=null,l.updateQueue!=null){var C=l.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}q.H=Kj,C=d(p,v)}while(Kf);return C}function fte(){var l=q.H,d=l.useState()[0];return d=typeof d.then=="function"?Vg(d):d,l=l.useState()[0],(en!==null?en.memoizedState:null)!==l&&(pt.flags|=1024),d}function $E(){var l=Qy!==0;return Qy=0,l}function qE(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function GE(l){if(Xy){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Xy=!1}Ho=0,ir=en=pt=null,Kf=!1,Lg=Qy=0,Wf=null}function vi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?pt.memoizedState=ir=l:ir=ir.next=l,ir}function Wn(){if(en===null){var l=pt.alternate;l=l!==null?l.memoizedState:null}else l=en.next;var d=ir===null?pt.memoizedState:ir.next;if(d!==null)ir=d,en=l;else{if(l===null)throw pt.alternate===null?Error(r(467)):Error(r(310));en=l,l={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},ir===null?pt.memoizedState=ir=l:ir=ir.next=l}return ir}function Zy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vg(l){var d=Lg;return Lg+=1,Wf===null&&(Wf=[]),l=tj(Wf,l,d),d=pt,(ir===null?d.memoizedState:ir.next)===null&&(d=d.alternate,q.H=d===null||d.memoizedState===null?Hj:rT),l}function Jy(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Vg(l);if(l.$$typeof===I)return Gr(l)}throw Error(r(438,String(l)))}function HE(l){var d=null,p=pt.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var v=pt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(d={data:v.data.map(function(E){return E.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=Zy(),pt.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),v=0;v<l;v++)p[v]=z;return d.index++,p}function Ko(l,d){return typeof d=="function"?d(l):d}function eb(l){var d=Wn();return KE(d,en,l)}function KE(l,d,p){var v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=p;var E=l.baseQueue,C=v.pending;if(C!==null){if(E!==null){var V=E.next;E.next=C.next,C.next=V}d.baseQueue=E=C,v.pending=null}if(C=l.baseState,E===null)l.memoizedState=C;else{d=E.next;var $=V=null,te=null,me=d,_e=!1;do{var Te=me.lane&-536870913;if(Te!==me.lane?(Tt&Te)===Te:(Ho&Te)===Te){var ye=me.revertLane;if(ye===0)te!==null&&(te=te.next={lane:0,revertLane:0,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),Te===Uf&&(_e=!0);else if((Ho&ye)===ye){me=me.next,ye===Uf&&(_e=!0);continue}else Te={lane:0,revertLane:me.revertLane,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},te===null?($=te=Te,V=C):te=te.next=Te,pt.lanes|=ye,vc|=ye;Te=me.action,Zu&&p(C,Te),C=me.hasEagerState?me.eagerState:p(C,Te)}else ye={lane:Te,revertLane:me.revertLane,gesture:me.gesture,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},te===null?($=te=ye,V=C):te=te.next=ye,pt.lanes|=Te,vc|=Te;me=me.next}while(me!==null&&me!==d);if(te===null?V=C:te.next=$,!Zi(C,l.memoizedState)&&(ar=!0,_e&&(p=$f,p!==null)))throw p;l.memoizedState=C,l.baseState=V,l.baseQueue=te,v.lastRenderedState=C}return E===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function WE(l){var d=Wn(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var v=p.dispatch,E=p.pending,C=d.memoizedState;if(E!==null){p.pending=null;var V=E=E.next;do C=l(C,V.action),V=V.next;while(V!==E);Zi(C,d.memoizedState)||(ar=!0),d.memoizedState=C,d.baseQueue===null&&(d.baseState=C),p.lastRenderedState=C}return[C,v]}function fj(l,d,p){var v=pt,E=Wn(),C=kt;if(C){if(p===void 0)throw Error(r(407));p=p()}else p=d();var V=!Zi((en||E).memoizedState,p);if(V&&(E.memoizedState=p,ar=!0),E=E.queue,QE(gj.bind(null,v,E,l),[l]),E.getSnapshot!==d||V||ir!==null&&ir.memoizedState.tag&1){if(v.flags|=2048,Yf(9,{destroy:void 0},pj.bind(null,v,E,p,d),null),ln===null)throw Error(r(349));C||(Ho&127)!==0||hj(v,d,p)}return p}function hj(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=pt.updateQueue,d===null?(d=Zy(),pt.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function pj(l,d,p,v){d.value=p,d.getSnapshot=v,mj(d)&&vj(l)}function gj(l,d,p){return p(function(){mj(d)&&vj(l)})}function mj(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Zi(l,p)}catch{return!0}}function vj(l){var d=$u(l,2);d!==null&&Mi(d,l,2)}function YE(l){var d=vi();if(typeof l=="function"){var p=l;if(l=p(),Zu){_n(!0);try{p()}finally{_n(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:l},d}function yj(l,d,p,v){return l.baseState=p,KE(l,en,typeof v=="function"?v:Ko)}function hte(l,d,p,v,E){if(rb(l))throw Error(r(485));if(l=d.action,l!==null){var C={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){C.listeners.push(V)}};q.T!==null?p(!0):C.isTransition=!1,v(C),p=d.pending,p===null?(C.next=d.pending=C,bj(d,C)):(C.next=p.next,d.pending=p.next=C)}}function bj(l,d){var p=d.action,v=d.payload,E=l.state;if(d.isTransition){var C=q.T,V={};q.T=V;try{var $=p(E,v),te=q.S;te!==null&&te(V,$),xj(l,d,$)}catch(me){XE(l,d,me)}finally{C!==null&&V.types!==null&&(C.types=V.types),q.T=C}}else try{C=p(E,v),xj(l,d,C)}catch(me){XE(l,d,me)}}function xj(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){wj(l,d,v)},function(v){return XE(l,d,v)}):wj(l,d,p)}function wj(l,d,p){d.status="fulfilled",d.value=p,_j(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,bj(l,p)))}function XE(l,d,p){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do d.status="rejected",d.reason=p,_j(d),d=d.next;while(d!==v)}l.action=null}function _j(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function Sj(l,d){return d}function Ej(l,d){if(kt){var p=ln.formState;if(p!==null){e:{var v=pt;if(kt){if(pn){t:{for(var E=pn,C=Da;E.nodeType!==8;){if(!C){E=null;break t}if(E=Na(E.nextSibling),E===null){E=null;break t}}C=E.data,E=C==="F!"||C==="F"?E:null}if(E){pn=Na(E.nextSibling),v=E.data==="F!";break e}}lc(v)}v=!1}v&&(d=p[0])}}return p=vi(),p.memoizedState=p.baseState=d,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sj,lastRenderedState:d},p.queue=v,p=$j.bind(null,pt,v),v.dispatch=p,v=YE(!1),C=nT.bind(null,pt,!1,v.queue),v=vi(),E={state:d,dispatch:null,action:l,pending:null},v.queue=E,p=hte.bind(null,pt,E,C,p),E.dispatch=p,v.memoizedState=l,[d,p,!1]}function Tj(l){var d=Wn();return Aj(d,en,l)}function Aj(l,d,p){if(d=KE(l,d,Sj)[0],l=eb(Ko)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var v=Vg(d)}catch(V){throw V===qf?qy:V}else v=d;d=Wn();var E=d.queue,C=E.dispatch;return p!==d.memoizedState&&(pt.flags|=2048,Yf(9,{destroy:void 0},pte.bind(null,E,p),null)),[v,C,l]}function pte(l,d){l.action=d}function Cj(l){var d=Wn(),p=en;if(p!==null)return Aj(d,p,l);Wn(),d=d.memoizedState,p=Wn();var v=p.queue.dispatch;return p.memoizedState=l,[d,v,!1]}function Yf(l,d,p,v){return l={tag:l,create:p,deps:v,inst:d,next:null},d=pt.updateQueue,d===null&&(d=Zy(),pt.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(v=p.next,p.next=l,l.next=v,d.lastEffect=l),l}function Ij(){return Wn().memoizedState}function tb(l,d,p,v){var E=vi();pt.flags|=l,E.memoizedState=Yf(1|d,{destroy:void 0},p,v===void 0?null:v)}function nb(l,d,p,v){var E=Wn();v=v===void 0?null:v;var C=E.memoizedState.inst;en!==null&&v!==null&&FE(v,en.memoizedState.deps)?E.memoizedState=Yf(d,C,p,v):(pt.flags|=l,E.memoizedState=Yf(1|d,C,p,v))}function kj(l,d){tb(8390656,8,l,d)}function QE(l,d){nb(2048,8,l,d)}function gte(l){pt.flags|=4;var d=pt.updateQueue;if(d===null)d=Zy(),pt.updateQueue=d,d.events=[l];else{var p=d.events;p===null?d.events=[l]:p.push(l)}}function Pj(l){var d=Wn().memoizedState;return gte({ref:d,nextImpl:l}),function(){if((Ft&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function Dj(l,d){return nb(4,2,l,d)}function Oj(l,d){return nb(4,4,l,d)}function Nj(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function Rj(l,d,p){p=p!=null?p.concat([l]):null,nb(4,4,Nj.bind(null,d,l),p)}function ZE(){}function Mj(l,d){var p=Wn();d=d===void 0?null:d;var v=p.memoizedState;return d!==null&&FE(d,v[1])?v[0]:(p.memoizedState=[l,d],l)}function jj(l,d){var p=Wn();d=d===void 0?null:d;var v=p.memoizedState;if(d!==null&&FE(d,v[1]))return v[0];if(v=l(),Zu){_n(!0);try{l()}finally{_n(!1)}}return p.memoizedState=[v,d],v}function JE(l,d,p){return p===void 0||(Ho&1073741824)!==0&&(Tt&261930)===0?l.memoizedState=d:(l.memoizedState=p,l=z4(),pt.lanes|=l,vc|=l,p)}function zj(l,d,p,v){return Zi(p,d)?p:Hf.current!==null?(l=JE(l,p,v),Zi(l,d)||(ar=!0),l):(Ho&42)===0||(Ho&1073741824)!==0&&(Tt&261930)===0?(ar=!0,l.memoizedState=p):(l=z4(),pt.lanes|=l,vc|=l,d)}function Lj(l,d,p,v,E){var C=W.p;W.p=C!==0&&8>C?C:8;var V=q.T,$={};q.T=$,nT(l,!1,d,p);try{var te=E(),me=q.S;if(me!==null&&me($,te),te!==null&&typeof te=="object"&&typeof te.then=="function"){var _e=ute(te,v);Bg(l,d,_e,ia(l))}else Bg(l,d,v,ia(l))}catch(Te){Bg(l,d,{then:function(){},status:"rejected",reason:Te},ia())}finally{W.p=C,V!==null&&$.types!==null&&(V.types=$.types),q.T=V}}function mte(){}function eT(l,d,p,v){if(l.tag!==5)throw Error(r(476));var E=Vj(l).queue;Lj(l,E,d,J,p===null?mte:function(){return Bj(l),p(v)})}function Vj(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:J},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function Bj(l){var d=Vj(l);d.next===null&&(d=l.alternate.memoizedState),Bg(l,d.next.queue,{},ia())}function tT(){return Gr(rm)}function Fj(){return Wn().memoizedState}function Uj(){return Wn().memoizedState}function vte(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=ia();l=dc(p);var v=fc(d,l,p);v!==null&&(Mi(v,d,p),Mg(v,d,p)),d={cache:PE()},l.payload=d;return}d=d.return}}function yte(l,d,p){var v=ia();p={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},rb(l)?qj(d,p):(p=bE(l,d,p,v),p!==null&&(Mi(p,l,v),Gj(p,d,v)))}function $j(l,d,p){var v=ia();Bg(l,d,p,v)}function Bg(l,d,p,v){var E={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(rb(l))qj(d,E);else{var C=l.alternate;if(l.lanes===0&&(C===null||C.lanes===0)&&(C=d.lastRenderedReducer,C!==null))try{var V=d.lastRenderedState,$=C(V,p);if(E.hasEagerState=!0,E.eagerState=$,Zi($,V))return zy(l,d,E,0),ln===null&&jy(),!1}catch{}finally{}if(p=bE(l,d,E,v),p!==null)return Mi(p,l,v),Gj(p,d,v),!0}return!1}function nT(l,d,p,v){if(v={lane:2,revertLane:RT(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},rb(l)){if(d)throw Error(r(479))}else d=bE(l,p,v,2),d!==null&&Mi(d,l,2)}function rb(l){var d=l.alternate;return l===pt||d!==null&&d===pt}function qj(l,d){Kf=Xy=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function Gj(l,d,p){if((p&4194048)!==0){var v=d.lanes;v&=l.pendingLanes,p|=v,d.lanes=p,lg(l,p)}}var Fg={readContext:Gr,use:Jy,useCallback:Ln,useContext:Ln,useEffect:Ln,useImperativeHandle:Ln,useLayoutEffect:Ln,useInsertionEffect:Ln,useMemo:Ln,useReducer:Ln,useRef:Ln,useState:Ln,useDebugValue:Ln,useDeferredValue:Ln,useTransition:Ln,useSyncExternalStore:Ln,useId:Ln,useHostTransitionStatus:Ln,useFormState:Ln,useActionState:Ln,useOptimistic:Ln,useMemoCache:Ln,useCacheRefresh:Ln};Fg.useEffectEvent=Ln;var Hj={readContext:Gr,use:Jy,useCallback:function(l,d){return vi().memoizedState=[l,d===void 0?null:d],l},useContext:Gr,useEffect:kj,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,tb(4194308,4,Nj.bind(null,d,l),p)},useLayoutEffect:function(l,d){return tb(4194308,4,l,d)},useInsertionEffect:function(l,d){tb(4,2,l,d)},useMemo:function(l,d){var p=vi();d=d===void 0?null:d;var v=l();if(Zu){_n(!0);try{l()}finally{_n(!1)}}return p.memoizedState=[v,d],v},useReducer:function(l,d,p){var v=vi();if(p!==void 0){var E=p(d);if(Zu){_n(!0);try{p(d)}finally{_n(!1)}}}else E=d;return v.memoizedState=v.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},v.queue=l,l=l.dispatch=yte.bind(null,pt,l),[v.memoizedState,l]},useRef:function(l){var d=vi();return l={current:l},d.memoizedState=l},useState:function(l){l=YE(l);var d=l.queue,p=$j.bind(null,pt,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:ZE,useDeferredValue:function(l,d){var p=vi();return JE(p,l,d)},useTransition:function(){var l=YE(!1);return l=Lj.bind(null,pt,l.queue,!0,!1),vi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var v=pt,E=vi();if(kt){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),ln===null)throw Error(r(349));(Tt&127)!==0||hj(v,d,p)}E.memoizedState=p;var C={value:p,getSnapshot:d};return E.queue=C,kj(gj.bind(null,v,C,l),[l]),v.flags|=2048,Yf(9,{destroy:void 0},pj.bind(null,v,C,p,d),null),p},useId:function(){var l=vi(),d=ln.identifierPrefix;if(kt){var p=no,v=to;p=(v&~(1<<32-Vt(v)-1)).toString(32)+p,d="_"+d+"R_"+p,p=Qy++,0<p&&(d+="H"+p.toString(32)),d+="_"}else p=dte++,d="_"+d+"r_"+p.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:tT,useFormState:Ej,useActionState:Ej,useOptimistic:function(l){var d=vi();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=nT.bind(null,pt,!0,p),p.dispatch=d,[l,d]},useMemoCache:HE,useCacheRefresh:function(){return vi().memoizedState=vte.bind(null,pt)},useEffectEvent:function(l){var d=vi(),p={impl:l};return d.memoizedState=p,function(){if((Ft&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},rT={readContext:Gr,use:Jy,useCallback:Mj,useContext:Gr,useEffect:QE,useImperativeHandle:Rj,useInsertionEffect:Dj,useLayoutEffect:Oj,useMemo:jj,useReducer:eb,useRef:Ij,useState:function(){return eb(Ko)},useDebugValue:ZE,useDeferredValue:function(l,d){var p=Wn();return zj(p,en.memoizedState,l,d)},useTransition:function(){var l=eb(Ko)[0],d=Wn().memoizedState;return[typeof l=="boolean"?l:Vg(l),d]},useSyncExternalStore:fj,useId:Fj,useHostTransitionStatus:tT,useFormState:Tj,useActionState:Tj,useOptimistic:function(l,d){var p=Wn();return yj(p,en,l,d)},useMemoCache:HE,useCacheRefresh:Uj};rT.useEffectEvent=Pj;var Kj={readContext:Gr,use:Jy,useCallback:Mj,useContext:Gr,useEffect:QE,useImperativeHandle:Rj,useInsertionEffect:Dj,useLayoutEffect:Oj,useMemo:jj,useReducer:WE,useRef:Ij,useState:function(){return WE(Ko)},useDebugValue:ZE,useDeferredValue:function(l,d){var p=Wn();return en===null?JE(p,l,d):zj(p,en.memoizedState,l,d)},useTransition:function(){var l=WE(Ko)[0],d=Wn().memoizedState;return[typeof l=="boolean"?l:Vg(l),d]},useSyncExternalStore:fj,useId:Fj,useHostTransitionStatus:tT,useFormState:Cj,useActionState:Cj,useOptimistic:function(l,d){var p=Wn();return en!==null?yj(p,en,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:HE,useCacheRefresh:Uj};Kj.useEffectEvent=Pj;function iT(l,d,p,v){d=l.memoizedState,p=p(v,d),p=p==null?d:h({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var aT={enqueueSetState:function(l,d,p){l=l._reactInternals;var v=ia(),E=dc(v);E.payload=d,p!=null&&(E.callback=p),d=fc(l,E,v),d!==null&&(Mi(d,l,v),Mg(d,l,v))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var v=ia(),E=dc(v);E.tag=1,E.payload=d,p!=null&&(E.callback=p),d=fc(l,E,v),d!==null&&(Mi(d,l,v),Mg(d,l,v))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=ia(),v=dc(p);v.tag=2,d!=null&&(v.callback=d),d=fc(l,v,p),d!==null&&(Mi(d,l,p),Mg(d,l,p))}};function Wj(l,d,p,v,E,C,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,C,V):d.prototype&&d.prototype.isPureReactComponent?!Cg(p,v)||!Cg(E,C):!0}function Yj(l,d,p,v){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,v),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,v),d.state!==l&&aT.enqueueReplaceState(d,d.state,null)}function Ju(l,d){var p=d;if("ref"in d){p={};for(var v in d)v!=="ref"&&(p[v]=d[v])}if(l=l.defaultProps){p===d&&(p=h({},p));for(var E in l)p[E]===void 0&&(p[E]=l[E])}return p}function Xj(l){My(l)}function Qj(l){console.error(l)}function Zj(l){My(l)}function ib(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(v){setTimeout(function(){throw v})}}function Jj(l,d,p){try{var v=l.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function sT(l,d,p){return p=dc(p),p.tag=3,p.payload={element:null},p.callback=function(){ib(l,d)},p}function e4(l){return l=dc(l),l.tag=3,l}function t4(l,d,p,v){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var C=v.value;l.payload=function(){return E(C)},l.callback=function(){Jj(d,p,v)}}var V=p.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){Jj(d,p,v),typeof E!="function"&&(yc===null?yc=new Set([this]):yc.add(this));var $=v.stack;this.componentDidCatch(v.value,{componentStack:$!==null?$:""})})}function bte(l,d,p,v,E){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(d=p.alternate,d!==null&&Ff(d,p,E,!0),p=ea.current,p!==null){switch(p.tag){case 31:case 13:return Oa===null?mb():p.alternate===null&&Vn===0&&(Vn=3),p.flags&=-257,p.flags|=65536,p.lanes=E,v===Gy?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([v]):d.add(v),DT(l,v,E)),!1;case 22:return p.flags|=65536,v===Gy?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([v]):p.add(v)),DT(l,v,E)),!1}throw Error(r(435,p.tag))}return DT(l,v,E),mb(),!1}if(kt)return d=ea.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=E,v!==TE&&(l=Error(r(422),{cause:v}),Pg(Ia(l,p)))):(v!==TE&&(d=Error(r(423),{cause:v}),Pg(Ia(d,p))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,v=Ia(v,p),E=sT(l.stateNode,v,E),jE(l,E),Vn!==4&&(Vn=2)),!1;var C=Error(r(520),{cause:v});if(C=Ia(C,p),Yg===null?Yg=[C]:Yg.push(C),Vn!==4&&(Vn=2),d===null)return!0;v=Ia(v,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=E&-E,p.lanes|=l,l=sT(p.stateNode,v,l),jE(p,l),!1;case 1:if(d=p.type,C=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(yc===null||!yc.has(C))))return p.flags|=65536,E&=-E,p.lanes|=E,E=e4(E),t4(E,l,p,v),jE(p,E),!1}p=p.return}while(p!==null);return!1}var oT=Error(r(461)),ar=!1;function Hr(l,d,p,v){d.child=l===null?aj(d,null,p,v):Qu(d,l.child,p,v)}function n4(l,d,p,v,E){p=p.render;var C=d.ref;if("ref"in v){var V={};for(var $ in v)$!=="ref"&&(V[$]=v[$])}else V=v;return Ku(d),v=UE(l,d,p,V,C,E),$=$E(),l!==null&&!ar?(qE(l,d,E),Wo(l,d,E)):(kt&&$&&SE(d),d.flags|=1,Hr(l,d,v,E),d.child)}function r4(l,d,p,v,E){if(l===null){var C=p.type;return typeof C=="function"&&!xE(C)&&C.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=C,i4(l,d,C,v,E)):(l=Vy(p.type,null,v,d,d.mode,E),l.ref=d.ref,l.return=d,d.child=l)}if(C=l.child,!gT(l,E)){var V=C.memoizedProps;if(p=p.compare,p=p!==null?p:Cg,p(V,v)&&l.ref===d.ref)return Wo(l,d,E)}return d.flags|=1,l=Uo(C,v),l.ref=d.ref,l.return=d,d.child=l}function i4(l,d,p,v,E){if(l!==null){var C=l.memoizedProps;if(Cg(C,v)&&l.ref===d.ref)if(ar=!1,d.pendingProps=v=C,gT(l,E))(l.flags&131072)!==0&&(ar=!0);else return d.lanes=l.lanes,Wo(l,d,E)}return lT(l,d,p,v,E)}function a4(l,d,p,v){var E=v.children,C=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((d.flags&128)!==0){if(C=C!==null?C.baseLanes|p:p,l!==null){for(v=d.child=l.child,E=0;v!==null;)E=E|v.lanes|v.childLanes,v=v.sibling;v=E&~C}else v=0,d.child=null;return s4(l,d,C,p,v)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&$y(d,C!==null?C.cachePool:null),C!==null?lj(d,C):LE(),cj(d);else return v=d.lanes=536870912,s4(l,d,C!==null?C.baseLanes|p:p,p,v)}else C!==null?($y(d,C.cachePool),lj(d,C),pc(),d.memoizedState=null):(l!==null&&$y(d,null),LE(),pc());return Hr(l,d,E,p),d.child}function Ug(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function s4(l,d,p,v,E){var C=OE();return C=C===null?null:{parent:rr._currentValue,pool:C},d.memoizedState={baseLanes:p,cachePool:C},l!==null&&$y(d,null),LE(),cj(d),l!==null&&Ff(l,d,v,!0),d.childLanes=E,null}function ab(l,d){return d=ob({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function o4(l,d,p){return Qu(d,l.child,null,p),l=ab(d,d.pendingProps),l.flags|=2,ta(d),d.memoizedState=null,l}function xte(l,d,p){var v=d.pendingProps,E=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(kt){if(v.mode==="hidden")return l=ab(d,v),d.lanes=536870912,Ug(null,l);if(BE(d),(l=pn)?(l=b3(l,Da),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:sc!==null?{id:to,overflow:no}:null,retryLane:536870912,hydrationErrors:null},p=qM(l),p.return=d,d.child=p,qr=d,pn=null)):l=null,l===null)throw lc(d);return d.lanes=536870912,null}return ab(d,v)}var C=l.memoizedState;if(C!==null){var V=C.dehydrated;if(BE(d),E)if(d.flags&256)d.flags&=-257,d=o4(l,d,p);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(r(558));else if(ar||Ff(l,d,p,!1),E=(p&l.childLanes)!==0,ar||E){if(v=ln,v!==null&&(V=cg(v,p),V!==0&&V!==C.retryLane))throw C.retryLane=V,$u(l,V),Mi(v,l,V),oT;mb(),d=o4(l,d,p)}else l=C.treeContext,pn=Na(V.nextSibling),qr=d,kt=!0,oc=null,Da=!1,l!==null&&KM(d,l),d=ab(d,v),d.flags|=4096;return d}return l=Uo(l.child,{mode:v.mode,children:v.children}),l.ref=d.ref,d.child=l,l.return=d,l}function sb(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function lT(l,d,p,v,E){return Ku(d),p=UE(l,d,p,v,void 0,E),v=$E(),l!==null&&!ar?(qE(l,d,E),Wo(l,d,E)):(kt&&v&&SE(d),d.flags|=1,Hr(l,d,p,E),d.child)}function l4(l,d,p,v,E,C){return Ku(d),d.updateQueue=null,p=dj(d,v,p,E),uj(l),v=$E(),l!==null&&!ar?(qE(l,d,C),Wo(l,d,C)):(kt&&v&&SE(d),d.flags|=1,Hr(l,d,p,C),d.child)}function c4(l,d,p,v,E){if(Ku(d),d.stateNode===null){var C=zf,V=p.contextType;typeof V=="object"&&V!==null&&(C=Gr(V)),C=new p(v,C),d.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=aT,d.stateNode=C,C._reactInternals=d,C=d.stateNode,C.props=v,C.state=d.memoizedState,C.refs={},RE(d),V=p.contextType,C.context=typeof V=="object"&&V!==null?Gr(V):zf,C.state=d.memoizedState,V=p.getDerivedStateFromProps,typeof V=="function"&&(iT(d,p,V,v),C.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(V=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),V!==C.state&&aT.enqueueReplaceState(C,C.state,null),zg(d,v,C,E),jg(),C.state=d.memoizedState),typeof C.componentDidMount=="function"&&(d.flags|=4194308),v=!0}else if(l===null){C=d.stateNode;var $=d.memoizedProps,te=Ju(p,$);C.props=te;var me=C.context,_e=p.contextType;V=zf,typeof _e=="object"&&_e!==null&&(V=Gr(_e));var Te=p.getDerivedStateFromProps;_e=typeof Te=="function"||typeof C.getSnapshotBeforeUpdate=="function",$=d.pendingProps!==$,_e||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||($||me!==V)&&Yj(d,C,v,V),uc=!1;var ye=d.memoizedState;C.state=ye,zg(d,v,C,E),jg(),me=d.memoizedState,$||ye!==me||uc?(typeof Te=="function"&&(iT(d,p,Te,v),me=d.memoizedState),(te=uc||Wj(d,p,te,v,ye,me,V))?(_e||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(d.flags|=4194308)):(typeof C.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=v,d.memoizedState=me),C.props=v,C.state=me,C.context=V,v=te):(typeof C.componentDidMount=="function"&&(d.flags|=4194308),v=!1)}else{C=d.stateNode,ME(l,d),V=d.memoizedProps,_e=Ju(p,V),C.props=_e,Te=d.pendingProps,ye=C.context,me=p.contextType,te=zf,typeof me=="object"&&me!==null&&(te=Gr(me)),$=p.getDerivedStateFromProps,(me=typeof $=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(V!==Te||ye!==te)&&Yj(d,C,v,te),uc=!1,ye=d.memoizedState,C.state=ye,zg(d,v,C,E),jg();var xe=d.memoizedState;V!==Te||ye!==xe||uc||l!==null&&l.dependencies!==null&&Fy(l.dependencies)?(typeof $=="function"&&(iT(d,p,$,v),xe=d.memoizedState),(_e=uc||Wj(d,p,_e,v,ye,xe,te)||l!==null&&l.dependencies!==null&&Fy(l.dependencies))?(me||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(v,xe,te),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(v,xe,te)),typeof C.componentDidUpdate=="function"&&(d.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof C.componentDidUpdate!="function"||V===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),d.memoizedProps=v,d.memoizedState=xe),C.props=v,C.state=xe,C.context=te,v=_e):(typeof C.componentDidUpdate!="function"||V===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),v=!1)}return C=v,sb(l,d),v=(d.flags&128)!==0,C||v?(C=d.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:C.render(),d.flags|=1,l!==null&&v?(d.child=Qu(d,l.child,null,E),d.child=Qu(d,null,p,E)):Hr(l,d,p,E),d.memoizedState=C.state,l=d.child):l=Wo(l,d,E),l}function u4(l,d,p,v){return Gu(),d.flags|=256,Hr(l,d,p,v),d.child}var cT={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uT(l){return{baseLanes:l,cachePool:JM()}}function dT(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=ra),l}function d4(l,d,p){var v=d.pendingProps,E=!1,C=(d.flags&128)!==0,V;if((V=C)||(V=l!==null&&l.memoizedState===null?!1:(Kn.current&2)!==0),V&&(E=!0,d.flags&=-129),V=(d.flags&32)!==0,d.flags&=-33,l===null){if(kt){if(E?hc(d):pc(),(l=pn)?(l=b3(l,Da),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:sc!==null?{id:to,overflow:no}:null,retryLane:536870912,hydrationErrors:null},p=qM(l),p.return=d,d.child=p,qr=d,pn=null)):l=null,l===null)throw lc(d);return KT(l)?d.lanes=32:d.lanes=536870912,null}var $=v.children;return v=v.fallback,E?(pc(),E=d.mode,$=ob({mode:"hidden",children:$},E),v=qu(v,E,p,null),$.return=d,v.return=d,$.sibling=v,d.child=$,v=d.child,v.memoizedState=uT(p),v.childLanes=dT(l,V,p),d.memoizedState=cT,Ug(null,v)):(hc(d),fT(d,$))}var te=l.memoizedState;if(te!==null&&($=te.dehydrated,$!==null)){if(C)d.flags&256?(hc(d),d.flags&=-257,d=hT(l,d,p)):d.memoizedState!==null?(pc(),d.child=l.child,d.flags|=128,d=null):(pc(),$=v.fallback,E=d.mode,v=ob({mode:"visible",children:v.children},E),$=qu($,E,p,null),$.flags|=2,v.return=d,$.return=d,v.sibling=$,d.child=v,Qu(d,l.child,null,p),v=d.child,v.memoizedState=uT(p),v.childLanes=dT(l,V,p),d.memoizedState=cT,d=Ug(null,v));else if(hc(d),KT($)){if(V=$.nextSibling&&$.nextSibling.dataset,V)var me=V.dgst;V=me,v=Error(r(419)),v.stack="",v.digest=V,Pg({value:v,source:null,stack:null}),d=hT(l,d,p)}else if(ar||Ff(l,d,p,!1),V=(p&l.childLanes)!==0,ar||V){if(V=ln,V!==null&&(v=cg(V,p),v!==0&&v!==te.retryLane))throw te.retryLane=v,$u(l,v),Mi(V,l,v),oT;HT($)||mb(),d=hT(l,d,p)}else HT($)?(d.flags|=192,d.child=l.child,d=null):(l=te.treeContext,pn=Na($.nextSibling),qr=d,kt=!0,oc=null,Da=!1,l!==null&&KM(d,l),d=fT(d,v.children),d.flags|=4096);return d}return E?(pc(),$=v.fallback,E=d.mode,te=l.child,me=te.sibling,v=Uo(te,{mode:"hidden",children:v.children}),v.subtreeFlags=te.subtreeFlags&65011712,me!==null?$=Uo(me,$):($=qu($,E,p,null),$.flags|=2),$.return=d,v.return=d,v.sibling=$,d.child=v,Ug(null,v),v=d.child,$=l.child.memoizedState,$===null?$=uT(p):(E=$.cachePool,E!==null?(te=rr._currentValue,E=E.parent!==te?{parent:te,pool:te}:E):E=JM(),$={baseLanes:$.baseLanes|p,cachePool:E}),v.memoizedState=$,v.childLanes=dT(l,V,p),d.memoizedState=cT,Ug(l.child,v)):(hc(d),p=l.child,l=p.sibling,p=Uo(p,{mode:"visible",children:v.children}),p.return=d,p.sibling=null,l!==null&&(V=d.deletions,V===null?(d.deletions=[l],d.flags|=16):V.push(l)),d.child=p,d.memoizedState=null,p)}function fT(l,d){return d=ob({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function ob(l,d){return l=Ji(22,l,null,d),l.lanes=0,l}function hT(l,d,p){return Qu(d,l.child,null,p),l=fT(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function f4(l,d,p){l.lanes|=d;var v=l.alternate;v!==null&&(v.lanes|=d),IE(l.return,d,p)}function pT(l,d,p,v,E,C){var V=l.memoizedState;V===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:E,treeForkCount:C}:(V.isBackwards=d,V.rendering=null,V.renderingStartTime=0,V.last=v,V.tail=p,V.tailMode=E,V.treeForkCount=C)}function h4(l,d,p){var v=d.pendingProps,E=v.revealOrder,C=v.tail;v=v.children;var V=Kn.current,$=(V&2)!==0;if($?(V=V&1|2,d.flags|=128):V&=1,K(Kn,V),Hr(l,d,v,p),v=kt?kg:0,!$&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&f4(l,p,d);else if(l.tag===19)f4(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(E){case"forwards":for(p=d.child,E=null;p!==null;)l=p.alternate,l!==null&&Yy(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=d.child,d.child=null):(E=p.sibling,p.sibling=null),pT(d,!1,E,p,C,v);break;case"backwards":case"unstable_legacy-backwards":for(p=null,E=d.child,d.child=null;E!==null;){if(l=E.alternate,l!==null&&Yy(l)===null){d.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}pT(d,!0,p,null,C,v);break;case"together":pT(d,!1,null,null,void 0,v);break;default:d.memoizedState=null}return d.child}function Wo(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),vc|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(Ff(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=Uo(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Uo(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function gT(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Fy(l)))}function wte(l,d,p){switch(d.tag){case 3:he(d,d.stateNode.containerInfo),cc(d,rr,l.memoizedState.cache),Gu();break;case 27:case 5:Se(d);break;case 4:he(d,d.stateNode.containerInfo);break;case 10:cc(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,BE(d),null;break;case 13:var v=d.memoizedState;if(v!==null)return v.dehydrated!==null?(hc(d),d.flags|=128,null):(p&d.child.childLanes)!==0?d4(l,d,p):(hc(d),l=Wo(l,d,p),l!==null?l.sibling:null);hc(d);break;case 19:var E=(l.flags&128)!==0;if(v=(p&d.childLanes)!==0,v||(Ff(l,d,p,!1),v=(p&d.childLanes)!==0),E){if(v)return h4(l,d,p);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),K(Kn,Kn.current),v)break;return null;case 22:return d.lanes=0,a4(l,d,p,d.pendingProps);case 24:cc(d,rr,l.memoizedState.cache)}return Wo(l,d,p)}function p4(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)ar=!0;else{if(!gT(l,p)&&(d.flags&128)===0)return ar=!1,wte(l,d,p);ar=(l.flags&131072)!==0}else ar=!1,kt&&(d.flags&1048576)!==0&&HM(d,kg,d.index);switch(d.lanes=0,d.tag){case 16:e:{var v=d.pendingProps;if(l=Yu(d.elementType),d.type=l,typeof l=="function")xE(l)?(v=Ju(l,v),d.tag=1,d=c4(null,d,l,v,p)):(d.tag=0,d=lT(null,d,l,v,p));else{if(l!=null){var E=l.$$typeof;if(E===N){d.tag=11,d=n4(null,d,l,v,p);break e}else if(E===k){d.tag=14,d=r4(null,d,l,v,p);break e}}throw d=H(l)||l,Error(r(306,d,""))}}return d;case 0:return lT(l,d,d.type,d.pendingProps,p);case 1:return v=d.type,E=Ju(v,d.pendingProps),c4(l,d,v,E,p);case 3:e:{if(he(d,d.stateNode.containerInfo),l===null)throw Error(r(387));v=d.pendingProps;var C=d.memoizedState;E=C.element,ME(l,d),zg(d,v,null,p);var V=d.memoizedState;if(v=V.cache,cc(d,rr,v),v!==C.cache&&kE(d,[rr],p,!0),jg(),v=V.element,C.isDehydrated)if(C={element:v,isDehydrated:!1,cache:V.cache},d.updateQueue.baseState=C,d.memoizedState=C,d.flags&256){d=u4(l,d,v,p);break e}else if(v!==E){E=Ia(Error(r(424)),d),Pg(E),d=u4(l,d,v,p);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(pn=Na(l.firstChild),qr=d,kt=!0,oc=null,Da=!0,p=aj(d,null,v,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Gu(),v===E){d=Wo(l,d,p);break e}Hr(l,d,v,p)}d=d.child}return d;case 26:return sb(l,d),l===null?(p=T3(d.type,null,d.pendingProps,null))?d.memoizedState=p:kt||(p=d.type,l=d.pendingProps,v=Sb(de.current).createElement(p),v[er]=d,v[Dr]=l,Kr(v,p,l),tr(v),d.stateNode=v):d.memoizedState=T3(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Se(d),l===null&&kt&&(v=d.stateNode=_3(d.type,d.pendingProps,de.current),qr=d,Da=!0,E=pn,_c(d.type)?(WT=E,pn=Na(v.firstChild)):pn=E),Hr(l,d,d.pendingProps.children,p),sb(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&kt&&((E=v=pn)&&(v=Qte(v,d.type,d.pendingProps,Da),v!==null?(d.stateNode=v,qr=d,pn=Na(v.firstChild),Da=!1,E=!0):E=!1),E||lc(d)),Se(d),E=d.type,C=d.pendingProps,V=l!==null?l.memoizedProps:null,v=C.children,$T(E,C)?v=null:V!==null&&$T(E,V)&&(d.flags|=32),d.memoizedState!==null&&(E=UE(l,d,fte,null,null,p),rm._currentValue=E),sb(l,d),Hr(l,d,v,p),d.child;case 6:return l===null&&kt&&((l=p=pn)&&(p=Zte(p,d.pendingProps,Da),p!==null?(d.stateNode=p,qr=d,pn=null,l=!0):l=!1),l||lc(d)),null;case 13:return d4(l,d,p);case 4:return he(d,d.stateNode.containerInfo),v=d.pendingProps,l===null?d.child=Qu(d,null,v,p):Hr(l,d,v,p),d.child;case 11:return n4(l,d,d.type,d.pendingProps,p);case 7:return Hr(l,d,d.pendingProps,p),d.child;case 8:return Hr(l,d,d.pendingProps.children,p),d.child;case 12:return Hr(l,d,d.pendingProps.children,p),d.child;case 10:return v=d.pendingProps,cc(d,d.type,v.value),Hr(l,d,v.children,p),d.child;case 9:return E=d.type._context,v=d.pendingProps.children,Ku(d),E=Gr(E),v=v(E),d.flags|=1,Hr(l,d,v,p),d.child;case 14:return r4(l,d,d.type,d.pendingProps,p);case 15:return i4(l,d,d.type,d.pendingProps,p);case 19:return h4(l,d,p);case 31:return xte(l,d,p);case 22:return a4(l,d,p,d.pendingProps);case 24:return Ku(d),v=Gr(rr),l===null?(E=OE(),E===null&&(E=ln,C=PE(),E.pooledCache=C,C.refCount++,C!==null&&(E.pooledCacheLanes|=p),E=C),d.memoizedState={parent:v,cache:E},RE(d),cc(d,rr,E)):((l.lanes&p)!==0&&(ME(l,d),zg(d,null,null,p),jg()),E=l.memoizedState,C=d.memoizedState,E.parent!==v?(E={parent:v,cache:v},d.memoizedState=E,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=E),cc(d,rr,v)):(v=C.cache,cc(d,rr,v),v!==E.cache&&kE(d,[rr],p,!0))),Hr(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function Yo(l){l.flags|=4}function mT(l,d,p,v,E){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(E&335544128)===E)if(l.stateNode.complete)l.flags|=8192;else if(F4())l.flags|=8192;else throw Xu=Gy,NE}else l.flags&=-16777217}function g4(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!P3(d))if(F4())l.flags|=8192;else throw Xu=Gy,NE}function lb(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?py():536870912,l.lanes|=d,Jf|=d)}function $g(l,d){if(!kt)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function gn(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,v=0;if(d)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,v|=E.subtreeFlags&65011712,v|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,v|=E.subtreeFlags,v|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=v,l.childLanes=p,d}function _te(l,d,p){var v=d.pendingProps;switch(EE(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(d),null;case 1:return gn(d),null;case 3:return p=d.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),d.memoizedState.cache!==v&&(d.flags|=2048),Go(rr),ee(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Bf(d)?Yo(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,AE())),gn(d),null;case 26:var E=d.type,C=d.memoizedState;return l===null?(Yo(d),C!==null?(gn(d),g4(d,C)):(gn(d),mT(d,E,null,v,p))):C?C!==l.memoizedState?(Yo(d),gn(d),g4(d,C)):(gn(d),d.flags&=-16777217):(l=l.memoizedProps,l!==v&&Yo(d),gn(d),mT(d,E,l,v,p)),null;case 27:if(re(d),p=de.current,E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==v&&Yo(d);else{if(!v){if(d.stateNode===null)throw Error(r(166));return gn(d),null}l=Z.current,Bf(d)?WM(d):(l=_3(E,v,p),d.stateNode=l,Yo(d))}return gn(d),null;case 5:if(re(d),E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==v&&Yo(d);else{if(!v){if(d.stateNode===null)throw Error(r(166));return gn(d),null}if(C=Z.current,Bf(d))WM(d);else{var V=Sb(de.current);switch(C){case 1:C=V.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:C=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":C=V.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":C=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":C=V.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof v.is=="string"?V.createElement("select",{is:v.is}):V.createElement("select"),v.multiple?C.multiple=!0:v.size&&(C.size=v.size);break;default:C=typeof v.is=="string"?V.createElement(E,{is:v.is}):V.createElement(E)}}C[er]=d,C[Dr]=v;e:for(V=d.child;V!==null;){if(V.tag===5||V.tag===6)C.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===d)break e;for(;V.sibling===null;){if(V.return===null||V.return===d)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}d.stateNode=C;e:switch(Kr(C,E,v),E){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&Yo(d)}}return gn(d),mT(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,p),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==v&&Yo(d);else{if(typeof v!="string"&&d.stateNode===null)throw Error(r(166));if(l=de.current,Bf(d)){if(l=d.stateNode,p=d.memoizedProps,v=null,E=qr,E!==null)switch(E.tag){case 27:case 5:v=E.memoizedProps}l[er]=d,l=!!(l.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||d3(l.nodeValue,p)),l||lc(d,!0)}else l=Sb(l).createTextNode(v),l[er]=d,d.stateNode=l}return gn(d),null;case 31:if(p=d.memoizedState,l===null||l.memoizedState!==null){if(v=Bf(d),p!==null){if(l===null){if(!v)throw Error(r(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[er]=d}else Gu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;gn(d),l=!1}else p=AE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return d.flags&256?(ta(d),d):(ta(d),null);if((d.flags&128)!==0)throw Error(r(558))}return gn(d),null;case 13:if(v=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=Bf(d),v!==null&&v.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[er]=d}else Gu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;gn(d),E=!1}else E=AE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return d.flags&256?(ta(d),d):(ta(d),null)}return ta(d),(d.flags&128)!==0?(d.lanes=p,d):(p=v!==null,l=l!==null&&l.memoizedState!==null,p&&(v=d.child,E=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(E=v.alternate.memoizedState.cachePool.pool),C=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(C=v.memoizedState.cachePool.pool),C!==E&&(v.flags|=2048)),p!==l&&p&&(d.child.flags|=8192),lb(d,d.updateQueue),gn(d),null);case 4:return ee(),l===null&&LT(d.stateNode.containerInfo),gn(d),null;case 10:return Go(d.type),gn(d),null;case 19:if(Q(Kn),v=d.memoizedState,v===null)return gn(d),null;if(E=(d.flags&128)!==0,C=v.rendering,C===null)if(E)$g(v,!1);else{if(Vn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(C=Yy(l),C!==null){for(d.flags|=128,$g(v,!1),l=C.updateQueue,d.updateQueue=l,lb(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)$M(p,l),p=p.sibling;return K(Kn,Kn.current&1|2),kt&&$o(d,v.treeForkCount),d.child}l=l.sibling}v.tail!==null&&ot()>hb&&(d.flags|=128,E=!0,$g(v,!1),d.lanes=4194304)}else{if(!E)if(l=Yy(C),l!==null){if(d.flags|=128,E=!0,l=l.updateQueue,d.updateQueue=l,lb(d,l),$g(v,!0),v.tail===null&&v.tailMode==="hidden"&&!C.alternate&&!kt)return gn(d),null}else 2*ot()-v.renderingStartTime>hb&&p!==536870912&&(d.flags|=128,E=!0,$g(v,!1),d.lanes=4194304);v.isBackwards?(C.sibling=d.child,d.child=C):(l=v.last,l!==null?l.sibling=C:d.child=C,v.last=C)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=ot(),l.sibling=null,p=Kn.current,K(Kn,E?p&1|2:p&1),kt&&$o(d,v.treeForkCount),l):(gn(d),null);case 22:case 23:return ta(d),VE(),v=d.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(d.flags|=8192):v&&(d.flags|=8192),v?(p&536870912)!==0&&(d.flags&128)===0&&(gn(d),d.subtreeFlags&6&&(d.flags|=8192)):gn(d),p=d.updateQueue,p!==null&&lb(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==p&&(d.flags|=2048),l!==null&&Q(Wu),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),Go(rr),gn(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function Ste(l,d){switch(EE(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Go(rr),ee(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return re(d),null;case 31:if(d.memoizedState!==null){if(ta(d),d.alternate===null)throw Error(r(340));Gu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(ta(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Gu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return Q(Kn),null;case 4:return ee(),null;case 10:return Go(d.type),null;case 22:case 23:return ta(d),VE(),l!==null&&Q(Wu),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Go(rr),null;case 25:return null;default:return null}}function m4(l,d){switch(EE(d),d.tag){case 3:Go(rr),ee();break;case 26:case 27:case 5:re(d);break;case 4:ee();break;case 31:d.memoizedState!==null&&ta(d);break;case 13:ta(d);break;case 19:Q(Kn);break;case 10:Go(d.type);break;case 22:case 23:ta(d),VE(),l!==null&&Q(Wu);break;case 24:Go(rr)}}function qg(l,d){try{var p=d.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var E=v.next;p=E;do{if((p.tag&l)===l){v=void 0;var C=p.create,V=p.inst;v=C(),V.destroy=v}p=p.next}while(p!==E)}}catch($){Kt(d,d.return,$)}}function gc(l,d,p){try{var v=d.updateQueue,E=v!==null?v.lastEffect:null;if(E!==null){var C=E.next;v=C;do{if((v.tag&l)===l){var V=v.inst,$=V.destroy;if($!==void 0){V.destroy=void 0,E=d;var te=p,me=$;try{me()}catch(_e){Kt(E,te,_e)}}}v=v.next}while(v!==C)}}catch(_e){Kt(d,d.return,_e)}}function v4(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{oj(d,p)}catch(v){Kt(l,l.return,v)}}}function y4(l,d,p){p.props=Ju(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(v){Kt(l,d,v)}}function Gg(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof p=="function"?l.refCleanup=p(v):p.current=v}}catch(E){Kt(l,d,E)}}function ro(l,d){var p=l.ref,v=l.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(E){Kt(l,d,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){Kt(l,d,E)}else p.current=null}function b4(l){var d=l.type,p=l.memoizedProps,v=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(E){Kt(l,l.return,E)}}function vT(l,d,p){try{var v=l.stateNode;Gte(v,l.type,p,d),v[Dr]=d}catch(E){Kt(l,l.return,E)}}function x4(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&_c(l.type)||l.tag===4}function yT(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||x4(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&_c(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function bT(l,d,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=us));else if(v!==4&&(v===27&&_c(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(bT(l,d,p),l=l.sibling;l!==null;)bT(l,d,p),l=l.sibling}function cb(l,d,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(v!==4&&(v===27&&_c(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(cb(l,d,p),l=l.sibling;l!==null;)cb(l,d,p),l=l.sibling}function w4(l){var d=l.stateNode,p=l.memoizedProps;try{for(var v=l.type,E=d.attributes;E.length;)d.removeAttributeNode(E[0]);Kr(d,v,p),d[er]=l,d[Dr]=p}catch(C){Kt(l,l.return,C)}}var Xo=!1,sr=!1,xT=!1,_4=typeof WeakSet=="function"?WeakSet:Set,Nr=null;function Ete(l,d){if(l=l.containerInfo,FT=Pb,l=RM(l),hE(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var E=v.anchorOffset,C=v.focusNode;v=v.focusOffset;try{p.nodeType,C.nodeType}catch{p=null;break e}var V=0,$=-1,te=-1,me=0,_e=0,Te=l,ye=null;t:for(;;){for(var xe;Te!==p||E!==0&&Te.nodeType!==3||($=V+E),Te!==C||v!==0&&Te.nodeType!==3||(te=V+v),Te.nodeType===3&&(V+=Te.nodeValue.length),(xe=Te.firstChild)!==null;)ye=Te,Te=xe;for(;;){if(Te===l)break t;if(ye===p&&++me===E&&($=V),ye===C&&++_e===v&&(te=V),(xe=Te.nextSibling)!==null)break;Te=ye,ye=Te.parentNode}Te=xe}p=$===-1||te===-1?null:{start:$,end:te}}else p=null}p=p||{start:0,end:0}}else p=null;for(UT={focusedElem:l,selectionRange:p},Pb=!1,Nr=d;Nr!==null;)if(d=Nr,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,Nr=l;else for(;Nr!==null;){switch(d=Nr,C=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)E=l[p],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&C!==null){l=void 0,p=d,E=C.memoizedProps,C=C.memoizedState,v=p.stateNode;try{var $e=Ju(p.type,E);l=v.getSnapshotBeforeUpdate($e,C),v.__reactInternalSnapshotBeforeUpdate=l}catch(nt){Kt(p,p.return,nt)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)GT(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":GT(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,Nr=l;break}Nr=d.return}}function S4(l,d,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:Zo(l,p),v&4&&qg(5,p);break;case 1:if(Zo(l,p),v&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(V){Kt(p,p.return,V)}else{var E=Ju(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(E,d,l.__reactInternalSnapshotBeforeUpdate)}catch(V){Kt(p,p.return,V)}}v&64&&v4(p),v&512&&Gg(p,p.return);break;case 3:if(Zo(l,p),v&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{oj(l,d)}catch(V){Kt(p,p.return,V)}}break;case 27:d===null&&v&4&&w4(p);case 26:case 5:Zo(l,p),d===null&&v&4&&b4(p),v&512&&Gg(p,p.return);break;case 12:Zo(l,p);break;case 31:Zo(l,p),v&4&&A4(l,p);break;case 13:Zo(l,p),v&4&&C4(l,p),v&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=Nte.bind(null,p),Jte(l,p))));break;case 22:if(v=p.memoizedState!==null||Xo,!v){d=d!==null&&d.memoizedState!==null||sr,E=Xo;var C=sr;Xo=v,(sr=d)&&!C?Jo(l,p,(p.subtreeFlags&8772)!==0):Zo(l,p),Xo=E,sr=C}break;case 30:break;default:Zo(l,p)}}function E4(l){var d=l.alternate;d!==null&&(l.alternate=null,E4(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Sf(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var En=null,Di=!1;function Qo(l,d,p){for(p=p.child;p!==null;)T4(l,d,p),p=p.sibling}function T4(l,d,p){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(pi,p)}catch{}switch(p.tag){case 26:sr||ro(p,d),Qo(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:sr||ro(p,d);var v=En,E=Di;_c(p.type)&&(En=p.stateNode,Di=!1),Qo(l,d,p),em(p.stateNode),En=v,Di=E;break;case 5:sr||ro(p,d);case 6:if(v=En,E=Di,En=null,Qo(l,d,p),En=v,Di=E,En!==null)if(Di)try{(En.nodeType===9?En.body:En.nodeName==="HTML"?En.ownerDocument.body:En).removeChild(p.stateNode)}catch(C){Kt(p,d,C)}else try{En.removeChild(p.stateNode)}catch(C){Kt(p,d,C)}break;case 18:En!==null&&(Di?(l=En,v3(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),oh(l)):v3(En,p.stateNode));break;case 4:v=En,E=Di,En=p.stateNode.containerInfo,Di=!0,Qo(l,d,p),En=v,Di=E;break;case 0:case 11:case 14:case 15:gc(2,p,d),sr||gc(4,p,d),Qo(l,d,p);break;case 1:sr||(ro(p,d),v=p.stateNode,typeof v.componentWillUnmount=="function"&&y4(p,d,v)),Qo(l,d,p);break;case 21:Qo(l,d,p);break;case 22:sr=(v=sr)||p.memoizedState!==null,Qo(l,d,p),sr=v;break;default:Qo(l,d,p)}}function A4(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{oh(l)}catch(p){Kt(d,d.return,p)}}}function C4(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{oh(l)}catch(p){Kt(d,d.return,p)}}function Tte(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new _4),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new _4),d;default:throw Error(r(435,l.tag))}}function ub(l,d){var p=Tte(l);d.forEach(function(v){if(!p.has(v)){p.add(v);var E=Rte.bind(null,l,v);v.then(E,E)}})}function Oi(l,d){var p=d.deletions;if(p!==null)for(var v=0;v<p.length;v++){var E=p[v],C=l,V=d,$=V;e:for(;$!==null;){switch($.tag){case 27:if(_c($.type)){En=$.stateNode,Di=!1;break e}break;case 5:En=$.stateNode,Di=!1;break e;case 3:case 4:En=$.stateNode.containerInfo,Di=!0;break e}$=$.return}if(En===null)throw Error(r(160));T4(C,V,E),En=null,Di=!1,C=E.alternate,C!==null&&(C.return=null),E.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)I4(d,l),d=d.sibling}var ms=null;function I4(l,d){var p=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Oi(d,l),Ni(l),v&4&&(gc(3,l,l.return),qg(3,l),gc(5,l,l.return));break;case 1:Oi(d,l),Ni(l),v&512&&(sr||p===null||ro(p,p.return)),v&64&&Xo&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var E=ms;if(Oi(d,l),Ni(l),v&512&&(sr||p===null||ro(p,p.return)),v&4){var C=p!==null?p.memoizedState:null;if(v=l.memoizedState,p===null)if(v===null)if(l.stateNode===null){e:{v=l.type,p=l.memoizedProps,E=E.ownerDocument||E;t:switch(v){case"title":C=E.getElementsByTagName("title")[0],(!C||C[$s]||C[er]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=E.createElement(v),E.head.insertBefore(C,E.querySelector("head > title"))),Kr(C,v,p),C[er]=l,tr(C),v=C;break e;case"link":var V=I3("link","href",E).get(v+(p.href||""));if(V){for(var $=0;$<V.length;$++)if(C=V[$],C.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&C.getAttribute("rel")===(p.rel==null?null:p.rel)&&C.getAttribute("title")===(p.title==null?null:p.title)&&C.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){V.splice($,1);break t}}C=E.createElement(v),Kr(C,v,p),E.head.appendChild(C);break;case"meta":if(V=I3("meta","content",E).get(v+(p.content||""))){for($=0;$<V.length;$++)if(C=V[$],C.getAttribute("content")===(p.content==null?null:""+p.content)&&C.getAttribute("name")===(p.name==null?null:p.name)&&C.getAttribute("property")===(p.property==null?null:p.property)&&C.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&C.getAttribute("charset")===(p.charSet==null?null:p.charSet)){V.splice($,1);break t}}C=E.createElement(v),Kr(C,v,p),E.head.appendChild(C);break;default:throw Error(r(468,v))}C[er]=l,tr(C),v=C}l.stateNode=v}else k3(E,l.type,l.stateNode);else l.stateNode=C3(E,v,l.memoizedProps);else C!==v?(C===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):C.count--,v===null?k3(E,l.type,l.stateNode):C3(E,v,l.memoizedProps)):v===null&&l.stateNode!==null&&vT(l,l.memoizedProps,p.memoizedProps)}break;case 27:Oi(d,l),Ni(l),v&512&&(sr||p===null||ro(p,p.return)),p!==null&&v&4&&vT(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Oi(d,l),Ni(l),v&512&&(sr||p===null||ro(p,p.return)),l.flags&32){E=l.stateNode;try{Pi(E,"")}catch($e){Kt(l,l.return,$e)}}v&4&&l.stateNode!=null&&(E=l.memoizedProps,vT(l,E,p!==null?p.memoizedProps:E)),v&1024&&(xT=!0);break;case 6:if(Oi(d,l),Ni(l),v&4){if(l.stateNode===null)throw Error(r(162));v=l.memoizedProps,p=l.stateNode;try{p.nodeValue=v}catch($e){Kt(l,l.return,$e)}}break;case 3:if(Ab=null,E=ms,ms=Eb(d.containerInfo),Oi(d,l),ms=E,Ni(l),v&4&&p!==null&&p.memoizedState.isDehydrated)try{oh(d.containerInfo)}catch($e){Kt(l,l.return,$e)}xT&&(xT=!1,k4(l));break;case 4:v=ms,ms=Eb(l.stateNode.containerInfo),Oi(d,l),Ni(l),ms=v;break;case 12:Oi(d,l),Ni(l);break;case 31:Oi(d,l),Ni(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,ub(l,v)));break;case 13:Oi(d,l),Ni(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(fb=ot()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,ub(l,v)));break;case 22:E=l.memoizedState!==null;var te=p!==null&&p.memoizedState!==null,me=Xo,_e=sr;if(Xo=me||E,sr=_e||te,Oi(d,l),sr=_e,Xo=me,Ni(l),v&8192)e:for(d=l.stateNode,d._visibility=E?d._visibility&-2:d._visibility|1,E&&(p===null||te||Xo||sr||ed(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){te=p=d;try{if(C=te.stateNode,E)V=C.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{$=te.stateNode;var Te=te.memoizedProps.style,ye=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;$.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch($e){Kt(te,te.return,$e)}}}else if(d.tag===6){if(p===null){te=d;try{te.stateNode.nodeValue=E?"":te.memoizedProps}catch($e){Kt(te,te.return,$e)}}}else if(d.tag===18){if(p===null){te=d;try{var xe=te.stateNode;E?y3(xe,!0):y3(te.stateNode,!1)}catch($e){Kt(te,te.return,$e)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}v&4&&(v=l.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,ub(l,p))));break;case 19:Oi(d,l),Ni(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,ub(l,v)));break;case 30:break;case 21:break;default:Oi(d,l),Ni(l)}}function Ni(l){var d=l.flags;if(d&2){try{for(var p,v=l.return;v!==null;){if(x4(v)){p=v;break}v=v.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var E=p.stateNode,C=yT(l);cb(l,C,E);break;case 5:var V=p.stateNode;p.flags&32&&(Pi(V,""),p.flags&=-33);var $=yT(l);cb(l,$,V);break;case 3:case 4:var te=p.stateNode.containerInfo,me=yT(l);bT(l,me,te);break;default:throw Error(r(161))}}catch(_e){Kt(l,l.return,_e)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function k4(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;k4(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Zo(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)S4(l,d.alternate,d),d=d.sibling}function ed(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:gc(4,d,d.return),ed(d);break;case 1:ro(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&y4(d,d.return,p),ed(d);break;case 27:em(d.stateNode);case 26:case 5:ro(d,d.return),ed(d);break;case 22:d.memoizedState===null&&ed(d);break;case 30:ed(d);break;default:ed(d)}l=l.sibling}}function Jo(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var v=d.alternate,E=l,C=d,V=C.flags;switch(C.tag){case 0:case 11:case 15:Jo(E,C,p),qg(4,C);break;case 1:if(Jo(E,C,p),v=C,E=v.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(me){Kt(v,v.return,me)}if(v=C,E=v.updateQueue,E!==null){var $=v.stateNode;try{var te=E.shared.hiddenCallbacks;if(te!==null)for(E.shared.hiddenCallbacks=null,E=0;E<te.length;E++)sj(te[E],$)}catch(me){Kt(v,v.return,me)}}p&&V&64&&v4(C),Gg(C,C.return);break;case 27:w4(C);case 26:case 5:Jo(E,C,p),p&&v===null&&V&4&&b4(C),Gg(C,C.return);break;case 12:Jo(E,C,p);break;case 31:Jo(E,C,p),p&&V&4&&A4(E,C);break;case 13:Jo(E,C,p),p&&V&4&&C4(E,C);break;case 22:C.memoizedState===null&&Jo(E,C,p),Gg(C,C.return);break;case 30:break;default:Jo(E,C,p)}d=d.sibling}}function wT(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Dg(p))}function _T(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Dg(l))}function vs(l,d,p,v){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)P4(l,d,p,v),d=d.sibling}function P4(l,d,p,v){var E=d.flags;switch(d.tag){case 0:case 11:case 15:vs(l,d,p,v),E&2048&&qg(9,d);break;case 1:vs(l,d,p,v);break;case 3:vs(l,d,p,v),E&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Dg(l)));break;case 12:if(E&2048){vs(l,d,p,v),l=d.stateNode;try{var C=d.memoizedProps,V=C.id,$=C.onPostCommit;typeof $=="function"&&$(V,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(te){Kt(d,d.return,te)}}else vs(l,d,p,v);break;case 31:vs(l,d,p,v);break;case 13:vs(l,d,p,v);break;case 23:break;case 22:C=d.stateNode,V=d.alternate,d.memoizedState!==null?C._visibility&2?vs(l,d,p,v):Hg(l,d):C._visibility&2?vs(l,d,p,v):(C._visibility|=2,Xf(l,d,p,v,(d.subtreeFlags&10256)!==0||!1)),E&2048&&wT(V,d);break;case 24:vs(l,d,p,v),E&2048&&_T(d.alternate,d);break;default:vs(l,d,p,v)}}function Xf(l,d,p,v,E){for(E=E&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var C=l,V=d,$=p,te=v,me=V.flags;switch(V.tag){case 0:case 11:case 15:Xf(C,V,$,te,E),qg(8,V);break;case 23:break;case 22:var _e=V.stateNode;V.memoizedState!==null?_e._visibility&2?Xf(C,V,$,te,E):Hg(C,V):(_e._visibility|=2,Xf(C,V,$,te,E)),E&&me&2048&&wT(V.alternate,V);break;case 24:Xf(C,V,$,te,E),E&&me&2048&&_T(V.alternate,V);break;default:Xf(C,V,$,te,E)}d=d.sibling}}function Hg(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,v=d,E=v.flags;switch(v.tag){case 22:Hg(p,v),E&2048&&wT(v.alternate,v);break;case 24:Hg(p,v),E&2048&&_T(v.alternate,v);break;default:Hg(p,v)}d=d.sibling}}var Kg=8192;function Qf(l,d,p){if(l.subtreeFlags&Kg)for(l=l.child;l!==null;)D4(l,d,p),l=l.sibling}function D4(l,d,p){switch(l.tag){case 26:Qf(l,d,p),l.flags&Kg&&l.memoizedState!==null&&dne(p,ms,l.memoizedState,l.memoizedProps);break;case 5:Qf(l,d,p);break;case 3:case 4:var v=ms;ms=Eb(l.stateNode.containerInfo),Qf(l,d,p),ms=v;break;case 22:l.memoizedState===null&&(v=l.alternate,v!==null&&v.memoizedState!==null?(v=Kg,Kg=16777216,Qf(l,d,p),Kg=v):Qf(l,d,p));break;default:Qf(l,d,p)}}function O4(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Wg(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var v=d[p];Nr=v,R4(v,l)}O4(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)N4(l),l=l.sibling}function N4(l){switch(l.tag){case 0:case 11:case 15:Wg(l),l.flags&2048&&gc(9,l,l.return);break;case 3:Wg(l);break;case 12:Wg(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,db(l)):Wg(l);break;default:Wg(l)}}function db(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var v=d[p];Nr=v,R4(v,l)}O4(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:gc(8,d,d.return),db(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,db(d));break;default:db(d)}l=l.sibling}}function R4(l,d){for(;Nr!==null;){var p=Nr;switch(p.tag){case 0:case 11:case 15:gc(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Dg(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,Nr=v;else e:for(p=l;Nr!==null;){v=Nr;var E=v.sibling,C=v.return;if(E4(v),v===p){Nr=null;break e}if(E!==null){E.return=C,Nr=E;break e}Nr=C}}}var Ate={getCacheForType:function(l){var d=Gr(rr),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p},cacheSignal:function(){return Gr(rr).controller.signal}},Cte=typeof WeakMap=="function"?WeakMap:Map,Ft=0,ln=null,wt=null,Tt=0,Ht=0,na=null,mc=!1,Zf=!1,ST=!1,el=0,Vn=0,vc=0,td=0,ET=0,ra=0,Jf=0,Yg=null,Ri=null,TT=!1,fb=0,M4=0,hb=1/0,pb=null,yc=null,mr=0,bc=null,eh=null,tl=0,AT=0,CT=null,j4=null,Xg=0,IT=null;function ia(){return(Ft&2)!==0&&Tt!==0?Tt&-Tt:q.T!==null?RT():gy()}function z4(){if(ra===0)if((Tt&536870912)===0||kt){var l=Pn;Pn<<=1,(Pn&3932160)===0&&(Pn=262144),ra=l}else ra=536870912;return l=ea.current,l!==null&&(l.flags|=32),ra}function Mi(l,d,p){(l===ln&&(Ht===2||Ht===9)||l.cancelPendingCommit!==null)&&(th(l,0),xc(l,Tt,ra,!1)),ku(l,p),((Ft&2)===0||l!==ln)&&(l===ln&&((Ft&2)===0&&(td|=p),Vn===4&&xc(l,Tt,ra,!1)),io(l))}function L4(l,d,p){if((Ft&6)!==0)throw Error(r(327));var v=!p&&(d&127)===0&&(d&l.expiredLanes)===0||gi(l,d),E=v?Pte(l,d):PT(l,d,!0),C=v;do{if(E===0){Zf&&!v&&xc(l,d,0,!1);break}else{if(p=l.current.alternate,C&&!Ite(p)){E=PT(l,d,!1),C=!1;continue}if(E===2){if(C=d,l.errorRecoveryDisabledLanes&C)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){d=V;e:{var $=l;E=Yg;var te=$.current.memoizedState.isDehydrated;if(te&&(th($,V).flags|=256),V=PT($,V,!1),V!==2){if(ST&&!te){$.errorRecoveryDisabledLanes|=C,td|=C,E=4;break e}C=Ri,Ri=E,C!==null&&(Ri===null?Ri=C:Ri.push.apply(Ri,C))}E=V}if(C=!1,E!==2)continue}}if(E===1){th(l,0),xc(l,d,0,!0);break}e:{switch(v=l,C=E,C){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:xc(v,d,ra,!mc);break e;case 2:Ri=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(E=fb+300-ot(),10<E)){if(xc(v,d,ra,!mc),_a(v,0,!0)!==0)break e;tl=d,v.timeoutHandle=g3(V4.bind(null,v,p,Ri,pb,TT,d,ra,td,Jf,mc,C,"Throttled",-0,0),E);break e}V4(v,p,Ri,pb,TT,d,ra,td,Jf,mc,C,null,-0,0)}}break}while(!0);io(l)}function V4(l,d,p,v,E,C,V,$,te,me,_e,Te,ye,xe){if(l.timeoutHandle=-1,Te=d.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:us},D4(d,C,Te);var $e=(C&62914560)===C?fb-ot():(C&4194048)===C?M4-ot():0;if($e=fne(Te,$e),$e!==null){tl=C,l.cancelPendingCommit=$e(K4.bind(null,l,d,C,p,v,E,V,$,te,_e,Te,null,ye,xe)),xc(l,C,V,!me);return}}K4(l,d,C,p,v,E,V,$,te)}function Ite(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var E=p[v],C=E.getSnapshot;E=E.value;try{if(!Zi(C(),E))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function xc(l,d,p,v){d&=~ET,d&=~td,l.suspendedLanes|=d,l.pingedLanes&=~d,v&&(l.warmLanes|=d),v=l.expirationTimes;for(var E=d;0<E;){var C=31-Vt(E),V=1<<C;v[C]=-1,E&=~V}p!==0&&Pu(l,p,d)}function gb(){return(Ft&6)===0?(Qg(0),!1):!0}function kT(){if(wt!==null){if(Ht===0)var l=wt.return;else l=wt,qo=Hu=null,GE(l),Gf=null,Ng=0,l=wt;for(;l!==null;)m4(l.alternate,l),l=l.return;wt=null}}function th(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,Wte(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),tl=0,kT(),ln=l,wt=p=Uo(l.current,null),Tt=d,Ht=0,na=null,mc=!1,Zf=gi(l,d),ST=!1,Jf=ra=ET=td=vc=Vn=0,Ri=Yg=null,TT=!1,(d&8)!==0&&(d|=d&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=d;0<v;){var E=31-Vt(v),C=1<<E;d|=l[E],v&=~C}return el=d,jy(),p}function B4(l,d){pt=null,q.H=Fg,d===qf||d===qy?(d=nj(),Ht=3):d===NE?(d=nj(),Ht=4):Ht=d===oT?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,na=d,wt===null&&(Vn=1,ib(l,Ia(d,l.current)))}function F4(){var l=ea.current;return l===null?!0:(Tt&4194048)===Tt?Oa===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?l===Oa:!1}function U4(){var l=q.H;return q.H=Fg,l===null?Fg:l}function $4(){var l=q.A;return q.A=Ate,l}function mb(){Vn=4,mc||(Tt&4194048)!==Tt&&ea.current!==null||(Zf=!0),(vc&134217727)===0&&(td&134217727)===0||ln===null||xc(ln,Tt,ra,!1)}function PT(l,d,p){var v=Ft;Ft|=2;var E=U4(),C=$4();(ln!==l||Tt!==d)&&(pb=null,th(l,d)),d=!1;var V=Vn;e:do try{if(Ht!==0&&wt!==null){var $=wt,te=na;switch(Ht){case 8:kT(),V=6;break e;case 3:case 2:case 9:case 6:ea.current===null&&(d=!0);var me=Ht;if(Ht=0,na=null,nh(l,$,te,me),p&&Zf){V=0;break e}break;default:me=Ht,Ht=0,na=null,nh(l,$,te,me)}}kte(),V=Vn;break}catch(_e){B4(l,_e)}while(!0);return d&&l.shellSuspendCounter++,qo=Hu=null,Ft=v,q.H=E,q.A=C,wt===null&&(ln=null,Tt=0,jy()),V}function kte(){for(;wt!==null;)q4(wt)}function Pte(l,d){var p=Ft;Ft|=2;var v=U4(),E=$4();ln!==l||Tt!==d?(pb=null,hb=ot()+500,th(l,d)):Zf=gi(l,d);e:do try{if(Ht!==0&&wt!==null){d=wt;var C=na;t:switch(Ht){case 1:Ht=0,na=null,nh(l,d,C,1);break;case 2:case 9:if(ej(C)){Ht=0,na=null,G4(d);break}d=function(){Ht!==2&&Ht!==9||ln!==l||(Ht=7),io(l)},C.then(d,d);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:ej(C)?(Ht=0,na=null,G4(d)):(Ht=0,na=null,nh(l,d,C,7));break;case 5:var V=null;switch(wt.tag){case 26:V=wt.memoizedState;case 5:case 27:var $=wt;if(V?P3(V):$.stateNode.complete){Ht=0,na=null;var te=$.sibling;if(te!==null)wt=te;else{var me=$.return;me!==null?(wt=me,vb(me)):wt=null}break t}}Ht=0,na=null,nh(l,d,C,5);break;case 6:Ht=0,na=null,nh(l,d,C,6);break;case 8:kT(),Vn=6;break e;default:throw Error(r(462))}}Dte();break}catch(_e){B4(l,_e)}while(!0);return qo=Hu=null,q.H=v,q.A=E,Ft=p,wt!==null?0:(ln=null,Tt=0,jy(),Vn)}function Dte(){for(;wt!==null&&!Dt();)q4(wt)}function q4(l){var d=p4(l.alternate,l,el);l.memoizedProps=l.pendingProps,d===null?vb(l):wt=d}function G4(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=l4(p,d,d.pendingProps,d.type,void 0,Tt);break;case 11:d=l4(p,d,d.pendingProps,d.type.render,d.ref,Tt);break;case 5:GE(d);default:m4(p,d),d=wt=$M(d,el),d=p4(p,d,el)}l.memoizedProps=l.pendingProps,d===null?vb(l):wt=d}function nh(l,d,p,v){qo=Hu=null,GE(d),Gf=null,Ng=0;var E=d.return;try{if(bte(l,E,d,p,Tt)){Vn=1,ib(l,Ia(p,l.current)),wt=null;return}}catch(C){if(E!==null)throw wt=E,C;Vn=1,ib(l,Ia(p,l.current)),wt=null;return}d.flags&32768?(kt||v===1?l=!0:Zf||(Tt&536870912)!==0?l=!1:(mc=l=!0,(v===2||v===9||v===3||v===6)&&(v=ea.current,v!==null&&v.tag===13&&(v.flags|=16384))),H4(d,l)):vb(d)}function vb(l){var d=l;do{if((d.flags&32768)!==0){H4(d,mc);return}l=d.return;var p=_te(d.alternate,d,el);if(p!==null){wt=p;return}if(d=d.sibling,d!==null){wt=d;return}wt=d=l}while(d!==null);Vn===0&&(Vn=5)}function H4(l,d){do{var p=Ste(l.alternate,l);if(p!==null){p.flags&=32767,wt=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){wt=l;return}wt=l=p}while(l!==null);Vn=6,wt=null}function K4(l,d,p,v,E,C,V,$,te){l.cancelPendingCommit=null;do yb();while(mr!==0);if((Ft&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(C=d.lanes|d.childLanes,C|=yE,cE(l,p,C,V,$,te),l===ln&&(wt=ln=null,Tt=0),eh=d,bc=l,tl=p,AT=C,CT=E,j4=v,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Mte(Zt,function(){return Z4(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||v){v=q.T,q.T=null,E=W.p,W.p=2,V=Ft,Ft|=4;try{Ete(l,d,p)}finally{Ft=V,W.p=E,q.T=v}}mr=1,W4(),Y4(),X4()}}function W4(){if(mr===1){mr=0;var l=bc,d=eh,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=q.T,q.T=null;var v=W.p;W.p=2;var E=Ft;Ft|=4;try{I4(d,l);var C=UT,V=RM(l.containerInfo),$=C.focusedElem,te=C.selectionRange;if(V!==$&&$&&$.ownerDocument&&NM($.ownerDocument.documentElement,$)){if(te!==null&&hE($)){var me=te.start,_e=te.end;if(_e===void 0&&(_e=me),"selectionStart"in $)$.selectionStart=me,$.selectionEnd=Math.min(_e,$.value.length);else{var Te=$.ownerDocument||document,ye=Te&&Te.defaultView||window;if(ye.getSelection){var xe=ye.getSelection(),$e=$.textContent.length,nt=Math.min(te.start,$e),nn=te.end===void 0?nt:Math.min(te.end,$e);!xe.extend&&nt>nn&&(V=nn,nn=nt,nt=V);var ue=OM($,nt),se=OM($,nn);if(ue&&se&&(xe.rangeCount!==1||xe.anchorNode!==ue.node||xe.anchorOffset!==ue.offset||xe.focusNode!==se.node||xe.focusOffset!==se.offset)){var ge=Te.createRange();ge.setStart(ue.node,ue.offset),xe.removeAllRanges(),nt>nn?(xe.addRange(ge),xe.extend(se.node,se.offset)):(ge.setEnd(se.node,se.offset),xe.addRange(ge))}}}}for(Te=[],xe=$;xe=xe.parentNode;)xe.nodeType===1&&Te.push({element:xe,left:xe.scrollLeft,top:xe.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<Te.length;$++){var Ee=Te[$];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}Pb=!!FT,UT=FT=null}finally{Ft=E,W.p=v,q.T=p}}l.current=d,mr=2}}function Y4(){if(mr===2){mr=0;var l=bc,d=eh,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=q.T,q.T=null;var v=W.p;W.p=2;var E=Ft;Ft|=4;try{S4(l,d.alternate,d)}finally{Ft=E,W.p=v,q.T=p}}mr=3}}function X4(){if(mr===4||mr===3){mr=0,Nt();var l=bc,d=eh,p=tl,v=j4;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?mr=5:(mr=0,eh=bc=null,Q4(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(yc=null),Lo(p),d=d.stateNode,wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(pi,d,void 0,(d.current.flags&128)===128)}catch{}if(v!==null){d=q.T,E=W.p,W.p=2,q.T=null;try{for(var C=l.onRecoverableError,V=0;V<v.length;V++){var $=v[V];C($.value,{componentStack:$.stack})}}finally{q.T=d,W.p=E}}(tl&3)!==0&&yb(),io(l),E=l.pendingLanes,(p&261930)!==0&&(E&42)!==0?l===IT?Xg++:(Xg=0,IT=l):Xg=0,Qg(0)}}function Q4(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Dg(d)))}function yb(){return W4(),Y4(),X4(),Z4()}function Z4(){if(mr!==5)return!1;var l=bc,d=AT;AT=0;var p=Lo(tl),v=q.T,E=W.p;try{W.p=32>p?32:p,q.T=null,p=CT,CT=null;var C=bc,V=tl;if(mr=0,eh=bc=null,tl=0,(Ft&6)!==0)throw Error(r(331));var $=Ft;if(Ft|=4,N4(C.current),P4(C,C.current,V,p),Ft=$,Qg(0,!1),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(pi,C)}catch{}return!0}finally{W.p=E,q.T=v,Q4(l,d)}}function J4(l,d,p){d=Ia(p,d),d=sT(l.stateNode,d,2),l=fc(l,d,2),l!==null&&(ku(l,2),io(l))}function Kt(l,d,p){if(l.tag===3)J4(l,l,p);else for(;d!==null;){if(d.tag===3){J4(d,l,p);break}else if(d.tag===1){var v=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(yc===null||!yc.has(v))){l=Ia(p,l),p=e4(2),v=fc(d,p,2),v!==null&&(t4(p,v,d,l),ku(v,2),io(v));break}}d=d.return}}function DT(l,d,p){var v=l.pingCache;if(v===null){v=l.pingCache=new Cte;var E=new Set;v.set(d,E)}else E=v.get(d),E===void 0&&(E=new Set,v.set(d,E));E.has(p)||(ST=!0,E.add(p),l=Ote.bind(null,l,d,p),d.then(l,l))}function Ote(l,d,p){var v=l.pingCache;v!==null&&v.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,ln===l&&(Tt&p)===p&&(Vn===4||Vn===3&&(Tt&62914560)===Tt&&300>ot()-fb?(Ft&2)===0&&th(l,0):ET|=p,Jf===Tt&&(Jf=0)),io(l)}function e3(l,d){d===0&&(d=py()),l=$u(l,d),l!==null&&(ku(l,d),io(l))}function Nte(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),e3(l,p)}function Rte(l,d){var p=0;switch(l.tag){case 31:case 13:var v=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(d),e3(l,p)}function Mte(l,d){return Ge(l,d)}var bb=null,rh=null,OT=!1,xb=!1,NT=!1,wc=0;function io(l){l!==rh&&l.next===null&&(rh===null?bb=rh=l:rh=rh.next=l),xb=!0,OT||(OT=!0,zte())}function Qg(l,d){if(!NT&&xb){NT=!0;do for(var p=!1,v=bb;v!==null;){if(l!==0){var E=v.pendingLanes;if(E===0)var C=0;else{var V=v.suspendedLanes,$=v.pingedLanes;C=(1<<31-Vt(42|l)+1)-1,C&=E&~(V&~$),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(p=!0,i3(v,C))}else C=Tt,C=_a(v,v===ln?C:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(C&3)===0||gi(v,C)||(p=!0,i3(v,C));v=v.next}while(p);NT=!1}}function jte(){t3()}function t3(){xb=OT=!1;var l=0;wc!==0&&Kte()&&(l=wc);for(var d=ot(),p=null,v=bb;v!==null;){var E=v.next,C=n3(v,d);C===0?(v.next=null,p===null?bb=E:p.next=E,E===null&&(rh=p)):(p=v,(l!==0||(C&3)!==0)&&(xb=!0)),v=E}mr!==0&&mr!==5||Qg(l),wc!==0&&(wc=0)}function n3(l,d){for(var p=l.suspendedLanes,v=l.pingedLanes,E=l.expirationTimes,C=l.pendingLanes&-62914561;0<C;){var V=31-Vt(C),$=1<<V,te=E[V];te===-1?(($&p)===0||($&v)!==0)&&(E[V]=lE($,d)):te<=d&&(l.expiredLanes|=$),C&=~$}if(d=ln,p=Tt,p=_a(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,p===0||l===d&&(Ht===2||Ht===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&yt(v),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||gi(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(v!==null&&yt(v),Lo(p)){case 2:case 8:p=xn;break;case 32:p=Zt;break;case 268435456:p=as;break;default:p=Zt}return v=r3.bind(null,l),p=Ge(p,v),l.callbackPriority=d,l.callbackNode=p,d}return v!==null&&v!==null&&yt(v),l.callbackPriority=2,l.callbackNode=null,2}function r3(l,d){if(mr!==0&&mr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(yb()&&l.callbackNode!==p)return null;var v=Tt;return v=_a(l,l===ln?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(L4(l,v,d),n3(l,ot()),l.callbackNode!=null&&l.callbackNode===p?r3.bind(null,l):null)}function i3(l,d){if(yb())return null;L4(l,d,!0)}function zte(){Yte(function(){(Ft&6)!==0?Ge(ft,jte):t3()})}function RT(){if(wc===0){var l=Uf;l===0&&(l=xt,xt<<=1,(xt&261888)===0&&(xt=256)),wc=l}return wc}function a3(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Cf(""+l)}function s3(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function Lte(l,d,p,v,E){if(d==="submit"&&p&&p.stateNode===E){var C=a3((E[Dr]||null).action),V=v.submitter;V&&(d=(d=V[Dr]||null)?a3(d.formAction):V.getAttribute("formAction"),d!==null&&(C=d,V=null));var $=new Qs("action","action",null,v,E);l.push({event:$,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(wc!==0){var te=V?s3(E,V):new FormData(E);eT(p,{pending:!0,data:te,method:E.method,action:C},null,te)}}else typeof C=="function"&&($.preventDefault(),te=V?s3(E,V):new FormData(E),eT(p,{pending:!0,data:te,method:E.method,action:C},C,te))},currentTarget:E}]})}}for(var MT=0;MT<vE.length;MT++){var jT=vE[MT],Vte=jT.toLowerCase(),Bte=jT[0].toUpperCase()+jT.slice(1);gs(Vte,"on"+Bte)}gs(zM,"onAnimationEnd"),gs(LM,"onAnimationIteration"),gs(VM,"onAnimationStart"),gs("dblclick","onDoubleClick"),gs("focusin","onFocus"),gs("focusout","onBlur"),gs(nte,"onTransitionRun"),gs(rte,"onTransitionStart"),gs(ite,"onTransitionCancel"),gs(BM,"onTransitionEnd"),Ks("onMouseEnter",["mouseout","mouseover"]),Ks("onMouseLeave",["mouseout","mouseover"]),Ks("onPointerEnter",["pointerout","pointerover"]),Ks("onPointerLeave",["pointerout","pointerover"]),Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fte=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zg));function o3(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var v=l[p],E=v.event;v=v.listeners;e:{var C=void 0;if(d)for(var V=v.length-1;0<=V;V--){var $=v[V],te=$.instance,me=$.currentTarget;if($=$.listener,te!==C&&E.isPropagationStopped())break e;C=$,E.currentTarget=me;try{C(E)}catch(_e){My(_e)}E.currentTarget=null,C=te}else for(V=0;V<v.length;V++){if($=v[V],te=$.instance,me=$.currentTarget,$=$.listener,te!==C&&E.isPropagationStopped())break e;C=$,E.currentTarget=me;try{C(E)}catch(_e){My(_e)}E.currentTarget=null,C=te}}}}function _t(l,d){var p=d[_f];p===void 0&&(p=d[_f]=new Set);var v=l+"__bubble";p.has(v)||(l3(d,l,2,!1),p.add(v))}function zT(l,d,p){var v=0;d&&(v|=4),l3(p,l,v,d)}var wb="_reactListening"+Math.random().toString(36).slice(2);function LT(l){if(!l[wb]){l[wb]=!0,ug.forEach(function(p){p!=="selectionchange"&&(Fte.has(p)||zT(p,!1,l),zT(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[wb]||(d[wb]=!0,zT("selectionchange",!1,d))}}function l3(l,d,p,v){switch(z3(d)){case 2:var E=gne;break;case 8:E=mne;break;default:E=JT}p=E.bind(null,d,p,l),E=void 0,!Mu||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),v?E!==void 0?l.addEventListener(d,p,{capture:!0,passive:E}):l.addEventListener(d,p,!0):E!==void 0?l.addEventListener(d,p,{passive:E}):l.addEventListener(d,p,!1)}function VT(l,d,p,v,E){var C=v;if((d&1)===0&&(d&2)===0&&v!==null)e:for(;;){if(v===null)return;var V=v.tag;if(V===3||V===4){var $=v.stateNode.containerInfo;if($===E)break;if(V===4)for(V=v.return;V!==null;){var te=V.tag;if((te===3||te===4)&&V.stateNode.containerInfo===E)return;V=V.return}for(;$!==null;){if(V=qs($),V===null)return;if(te=V.tag,te===5||te===6||te===26||te===27){v=C=V;continue e}$=$.parentNode}}v=v.return}nc(function(){var me=C,_e=Ea(p),Te=[];e:{var ye=FM.get(l);if(ye!==void 0){var xe=Qs,$e=l;switch(l){case"keypress":if(zu(p)===0)break e;case"keydown":case"keyup":xe=Oy;break;case"focusin":$e="focus",xe=Vu;break;case"focusout":$e="blur",xe=Vu;break;case"beforeblur":case"afterblur":xe=Vu;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=Sg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=Sy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=M;break;case zM:case LM:case VM:xe=Ty;break;case BM:xe=G;break;case"scroll":case"scrollend":xe=_g;break;case"wheel":xe=be;break;case"copy":case"cut":case"paste":xe=Ay;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=Fo;break;case"toggle":case"beforetoggle":xe=ht}var nt=(d&4)!==0,nn=!nt&&(l==="scroll"||l==="scrollend"),ue=nt?ye!==null?ye+"Capture":null:ye;nt=[];for(var se=me,ge;se!==null;){var Ee=se;if(ge=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||ge===null||ue===null||(Ee=ds(se,ue),Ee!=null&&nt.push(Jg(se,Ee,ge))),nn)break;se=se.return}0<nt.length&&(ye=new xe(ye,$e,null,p,_e),Te.push({event:ye,listeners:nt}))}}if((d&7)===0){e:{if(ye=l==="mouseover"||l==="pointerover",xe=l==="mouseout"||l==="pointerout",ye&&p!==bg&&($e=p.relatedTarget||p.fromElement)&&(qs($e)||$e[Us]))break e;if((xe||ye)&&(ye=_e.window===_e?_e:(ye=_e.ownerDocument)?ye.defaultView||ye.parentWindow:window,xe?($e=p.relatedTarget||p.toElement,xe=me,$e=$e?qs($e):null,$e!==null&&(nn=a($e),nt=$e.tag,$e!==nn||nt!==5&&nt!==27&&nt!==6)&&($e=null)):(xe=null,$e=me),xe!==$e)){if(nt=Sg,Ee="onMouseLeave",ue="onMouseEnter",se="mouse",(l==="pointerout"||l==="pointerover")&&(nt=Fo,Ee="onPointerLeave",ue="onPointerEnter",se="pointer"),nn=xe==null?ye:Xi(xe),ge=$e==null?ye:Xi($e),ye=new nt(Ee,se+"leave",xe,p,_e),ye.target=nn,ye.relatedTarget=ge,Ee=null,qs(_e)===me&&(nt=new nt(ue,se+"enter",$e,p,_e),nt.target=ge,nt.relatedTarget=nn,Ee=nt),nn=Ee,xe&&$e)t:{for(nt=Ute,ue=xe,se=$e,ge=0,Ee=ue;Ee;Ee=nt(Ee))ge++;Ee=0;for(var Ze=se;Ze;Ze=nt(Ze))Ee++;for(;0<ge-Ee;)ue=nt(ue),ge--;for(;0<Ee-ge;)se=nt(se),Ee--;for(;ge--;){if(ue===se||se!==null&&ue===se.alternate){nt=ue;break t}ue=nt(ue),se=nt(se)}nt=null}else nt=null;xe!==null&&c3(Te,ye,xe,nt,!1),$e!==null&&nn!==null&&c3(Te,nn,$e,nt,!0)}}e:{if(ye=me?Xi(me):window,xe=ye.nodeName&&ye.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ye.type==="file")var Mt=AM;else if(EM(ye))if(CM)Mt=Jee;else{Mt=Qee;var Ke=Xee}else xe=ye.nodeName,!xe||xe.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?me&&Af(me.elementType)&&(Mt=AM):Mt=Zee;if(Mt&&(Mt=Mt(l,me))){TM(Te,Mt,p,_e);break e}Ke&&Ke(l,ye,me),l==="focusout"&&me&&ye.type==="number"&&me.memoizedProps.value!=null&&mg(ye,"number",ye.value)}switch(Ke=me?Xi(me):window,l){case"focusin":(EM(Ke)||Ke.contentEditable==="true")&&(Rf=Ke,pE=me,Ig=null);break;case"focusout":Ig=pE=Rf=null;break;case"mousedown":gE=!0;break;case"contextmenu":case"mouseup":case"dragend":gE=!1,MM(Te,p,_e);break;case"selectionchange":if(tte)break;case"keydown":case"keyup":MM(Te,p,_e)}var mt;if(Bt)e:{switch(l){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else Nf?Bu(l,p)&&(At="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(At="onCompositionStart");At&&(eo&&p.locale!=="ko"&&(Nf||At!=="onCompositionStart"?At==="onCompositionEnd"&&Nf&&(mt=wg()):(Xs=_e,xg="value"in Xs?Xs.value:Xs.textContent,Nf=!0)),Ke=_b(me,At),0<Ke.length&&(At=new Js(At,l,null,p,_e),Te.push({event:At,listeners:Ke}),mt?At.data=mt:(mt=Of(p),mt!==null&&(At.data=mt)))),(mt=Aa?Hee(l,p):Kee(l,p))&&(At=_b(me,"onBeforeInput"),0<At.length&&(Ke=new Js("onBeforeInput","beforeinput",null,p,_e),Te.push({event:Ke,listeners:At}),Ke.data=mt)),Lte(Te,l,me,p,_e)}o3(Te,d)})}function Jg(l,d,p){return{instance:l,listener:d,currentTarget:p}}function _b(l,d){for(var p=d+"Capture",v=[];l!==null;){var E=l,C=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||C===null||(E=ds(l,p),E!=null&&v.unshift(Jg(l,E,C)),E=ds(l,d),E!=null&&v.push(Jg(l,E,C))),l.tag===3)return v;l=l.return}return[]}function Ute(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function c3(l,d,p,v,E){for(var C=d._reactName,V=[];p!==null&&p!==v;){var $=p,te=$.alternate,me=$.stateNode;if($=$.tag,te!==null&&te===v)break;$!==5&&$!==26&&$!==27||me===null||(te=me,E?(me=ds(p,C),me!=null&&V.unshift(Jg(p,me,te))):E||(me=ds(p,C),me!=null&&V.push(Jg(p,me,te)))),p=p.return}V.length!==0&&l.push({event:d,listeners:V})}var $te=/\r\n?/g,qte=/\u0000|\uFFFD/g;function u3(l){return(typeof l=="string"?l:""+l).replace($te,`
`).replace(qte,"")}function d3(l,d){return d=u3(d),u3(l)===d}function tn(l,d,p,v,E,C){switch(p){case"children":typeof v=="string"?d==="body"||d==="textarea"&&v===""||Pi(l,v):(typeof v=="number"||typeof v=="bigint")&&d!=="body"&&Pi(l,""+v);break;case"className":Qi(l,"class",v);break;case"tabIndex":Qi(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Qi(l,p,v);break;case"style":yg(l,v,C);break;case"data":if(d!=="object"){Qi(l,"data",v);break}case"src":case"href":if(v===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=Cf(""+v),l.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(p==="formAction"?(d!=="input"&&tn(l,d,"name",E.name,E,null),tn(l,d,"formEncType",E.formEncType,E,null),tn(l,d,"formMethod",E.formMethod,E,null),tn(l,d,"formTarget",E.formTarget,E,null)):(tn(l,d,"encType",E.encType,E,null),tn(l,d,"method",E.method,E,null),tn(l,d,"target",E.target,E,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=Cf(""+v),l.setAttribute(p,v);break;case"onClick":v!=null&&(l.onclick=us);break;case"onScroll":v!=null&&_t("scroll",l);break;case"onScrollEnd":v!=null&&_t("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(p=v.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}p=Cf(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""+v):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":v===!0?l.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,v):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(p,v):l.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(p):l.setAttribute(p,v);break;case"popover":_t("beforetoggle",l),_t("toggle",l),Ef(l,"popover",v);break;case"xlinkActuate":nr(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":nr(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":nr(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":nr(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":nr(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":nr(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":nr(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":nr(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":nr(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Ef(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=_y.get(p)||p,Ef(l,p,v))}}function BT(l,d,p,v,E,C){switch(p){case"style":yg(l,v,C);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(p=v.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof v=="string"?Pi(l,v):(typeof v=="number"||typeof v=="bigint")&&Pi(l,""+v);break;case"onScroll":v!=null&&_t("scroll",l);break;case"onScrollEnd":v!=null&&_t("scrollend",l);break;case"onClick":v!=null&&(l.onclick=us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!dg.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),d=p.slice(2,E?p.length-7:void 0),C=l[Dr]||null,C=C!=null?C[p]:null,typeof C=="function"&&l.removeEventListener(d,C,E),typeof v=="function")){typeof C!="function"&&C!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,v,E);break e}p in l?l[p]=v:v===!0?l.setAttribute(p,""):Ef(l,p,v)}}}function Kr(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",l),_t("load",l);var v=!1,E=!1,C;for(C in p)if(p.hasOwnProperty(C)){var V=p[C];if(V!=null)switch(C){case"src":v=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:tn(l,d,C,V,p,null)}}E&&tn(l,d,"srcSet",p.srcSet,p,null),v&&tn(l,d,"src",p.src,p,null);return;case"input":_t("invalid",l);var $=C=V=E=null,te=null,me=null;for(v in p)if(p.hasOwnProperty(v)){var _e=p[v];if(_e!=null)switch(v){case"name":E=_e;break;case"type":V=_e;break;case"checked":te=_e;break;case"defaultChecked":me=_e;break;case"value":C=_e;break;case"defaultValue":$=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,d));break;default:tn(l,d,v,_e,p,null)}}by(l,C,$,te,me,V,E,!1);return;case"select":_t("invalid",l),v=V=C=null;for(E in p)if(p.hasOwnProperty(E)&&($=p[E],$!=null))switch(E){case"value":C=$;break;case"defaultValue":V=$;break;case"multiple":v=$;default:tn(l,d,E,$,p,null)}d=C,p=V,l.multiple=!!v,d!=null?Zl(l,!!v,d,!1):p!=null&&Zl(l,!!v,p,!0);return;case"textarea":_t("invalid",l),C=E=v=null;for(V in p)if(p.hasOwnProperty(V)&&($=p[V],$!=null))switch(V){case"value":v=$;break;case"defaultValue":E=$;break;case"children":C=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(r(91));break;default:tn(l,d,V,$,p,null)}Jl(l,v,E,C);return;case"option":for(te in p)if(p.hasOwnProperty(te)&&(v=p[te],v!=null))switch(te){case"selected":l.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:tn(l,d,te,v,p,null)}return;case"dialog":_t("beforetoggle",l),_t("toggle",l),_t("cancel",l),_t("close",l);break;case"iframe":case"object":_t("load",l);break;case"video":case"audio":for(v=0;v<Zg.length;v++)_t(Zg[v],l);break;case"image":_t("error",l),_t("load",l);break;case"details":_t("toggle",l);break;case"embed":case"source":case"link":_t("error",l),_t("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in p)if(p.hasOwnProperty(me)&&(v=p[me],v!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:tn(l,d,me,v,p,null)}return;default:if(Af(d)){for(_e in p)p.hasOwnProperty(_e)&&(v=p[_e],v!==void 0&&BT(l,d,_e,v,p,void 0));return}}for($ in p)p.hasOwnProperty($)&&(v=p[$],v!=null&&tn(l,d,$,v,p,null))}function Gte(l,d,p,v){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,C=null,V=null,$=null,te=null,me=null,_e=null;for(xe in p){var Te=p[xe];if(p.hasOwnProperty(xe)&&Te!=null)switch(xe){case"checked":break;case"value":break;case"defaultValue":te=Te;default:v.hasOwnProperty(xe)||tn(l,d,xe,null,v,Te)}}for(var ye in v){var xe=v[ye];if(Te=p[ye],v.hasOwnProperty(ye)&&(xe!=null||Te!=null))switch(ye){case"type":C=xe;break;case"name":E=xe;break;case"checked":me=xe;break;case"defaultChecked":_e=xe;break;case"value":V=xe;break;case"defaultValue":$=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(r(137,d));break;default:xe!==Te&&tn(l,d,ye,xe,v,Te)}}Tf(l,V,$,te,me,_e,C,E);return;case"select":xe=V=$=ye=null;for(C in p)if(te=p[C],p.hasOwnProperty(C)&&te!=null)switch(C){case"value":break;case"multiple":xe=te;default:v.hasOwnProperty(C)||tn(l,d,C,null,v,te)}for(E in v)if(C=v[E],te=p[E],v.hasOwnProperty(E)&&(C!=null||te!=null))switch(E){case"value":ye=C;break;case"defaultValue":$=C;break;case"multiple":V=C;default:C!==te&&tn(l,d,E,C,v,te)}d=$,p=V,v=xe,ye!=null?Zl(l,!!p,ye,!1):!!v!=!!p&&(d!=null?Zl(l,!!p,d,!0):Zl(l,!!p,p?[]:"",!1));return;case"textarea":xe=ye=null;for($ in p)if(E=p[$],p.hasOwnProperty($)&&E!=null&&!v.hasOwnProperty($))switch($){case"value":break;case"children":break;default:tn(l,d,$,null,v,E)}for(V in v)if(E=v[V],C=p[V],v.hasOwnProperty(V)&&(E!=null||C!=null))switch(V){case"value":ye=E;break;case"defaultValue":xe=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==C&&tn(l,d,V,E,v,C)}xy(l,ye,xe);return;case"option":for(var $e in p)if(ye=p[$e],p.hasOwnProperty($e)&&ye!=null&&!v.hasOwnProperty($e))switch($e){case"selected":l.selected=!1;break;default:tn(l,d,$e,null,v,ye)}for(te in v)if(ye=v[te],xe=p[te],v.hasOwnProperty(te)&&ye!==xe&&(ye!=null||xe!=null))switch(te){case"selected":l.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:tn(l,d,te,ye,v,xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in p)ye=p[nt],p.hasOwnProperty(nt)&&ye!=null&&!v.hasOwnProperty(nt)&&tn(l,d,nt,null,v,ye);for(me in v)if(ye=v[me],xe=p[me],v.hasOwnProperty(me)&&ye!==xe&&(ye!=null||xe!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,d));break;default:tn(l,d,me,ye,v,xe)}return;default:if(Af(d)){for(var nn in p)ye=p[nn],p.hasOwnProperty(nn)&&ye!==void 0&&!v.hasOwnProperty(nn)&&BT(l,d,nn,void 0,v,ye);for(_e in v)ye=v[_e],xe=p[_e],!v.hasOwnProperty(_e)||ye===xe||ye===void 0&&xe===void 0||BT(l,d,_e,ye,v,xe);return}}for(var ue in p)ye=p[ue],p.hasOwnProperty(ue)&&ye!=null&&!v.hasOwnProperty(ue)&&tn(l,d,ue,null,v,ye);for(Te in v)ye=v[Te],xe=p[Te],!v.hasOwnProperty(Te)||ye===xe||ye==null&&xe==null||tn(l,d,Te,ye,v,xe)}function f3(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Hte(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,p=performance.getEntriesByType("resource"),v=0;v<p.length;v++){var E=p[v],C=E.transferSize,V=E.initiatorType,$=E.duration;if(C&&$&&f3(V)){for(V=0,$=E.responseEnd,v+=1;v<p.length;v++){var te=p[v],me=te.startTime;if(me>$)break;var _e=te.transferSize,Te=te.initiatorType;_e&&f3(Te)&&(te=te.responseEnd,V+=_e*(te<$?1:($-me)/(te-me)))}if(--v,d+=8*(C+V)/(E.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var FT=null,UT=null;function Sb(l){return l.nodeType===9?l:l.ownerDocument}function h3(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function p3(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function $T(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var qT=null;function Kte(){var l=window.event;return l&&l.type==="popstate"?l===qT?!1:(qT=l,!0):(qT=null,!1)}var g3=typeof setTimeout=="function"?setTimeout:void 0,Wte=typeof clearTimeout=="function"?clearTimeout:void 0,m3=typeof Promise=="function"?Promise:void 0,Yte=typeof queueMicrotask=="function"?queueMicrotask:typeof m3<"u"?function(l){return m3.resolve(null).then(l).catch(Xte)}:g3;function Xte(l){setTimeout(function(){throw l})}function _c(l){return l==="head"}function v3(l,d){var p=d,v=0;do{var E=p.nextSibling;if(l.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"||p==="/&"){if(v===0){l.removeChild(E),oh(d);return}v--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")v++;else if(p==="html")em(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,em(p);for(var C=p.firstChild;C;){var V=C.nextSibling,$=C.nodeName;C[$s]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&C.rel.toLowerCase()==="stylesheet"||p.removeChild(C),C=V}}else p==="body"&&em(l.ownerDocument.body);p=E}while(p);oh(d)}function y3(l,d){var p=l;l=0;do{var v=p.nextSibling;if(p.nodeType===1?d?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(d?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),v&&v.nodeType===8)if(p=v.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=v}while(p)}function GT(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":GT(p),Sf(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function Qte(l,d,p,v){for(;l.nodeType===1;){var E=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[$s])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(C=l.getAttribute("rel"),C==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(C!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(C=l.getAttribute("src"),(C!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&C&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var C=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===C)return l}else return l;if(l=Na(l.nextSibling),l===null)break}return null}function Zte(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Na(l.nextSibling),l===null))return null;return l}function b3(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=Na(l.nextSibling),l===null))return null;return l}function HT(l){return l.data==="$?"||l.data==="$~"}function KT(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function Jte(l,d){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||p.readyState!=="loading")d();else{var v=function(){d(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function Na(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var WT=null;function x3(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(d===0)return Na(l.nextSibling);d--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||d++}l=l.nextSibling}return null}function w3(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(d===0)return l;d--}else p!=="/$"&&p!=="/&"||d++}l=l.previousSibling}return null}function _3(l,d,p){switch(d=Sb(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function em(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Sf(l)}var Ra=new Map,S3=new Set;function Eb(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var nl=W.d;W.d={f:ene,r:tne,D:nne,C:rne,L:ine,m:ane,X:one,S:sne,M:lne};function ene(){var l=nl.f(),d=gb();return l||d}function tne(l){var d=Sa(l);d!==null&&d.tag===5&&d.type==="form"?Bj(d):nl.r(l)}var ih=typeof document>"u"?null:document;function E3(l,d,p){var v=ih;if(v&&typeof d=="string"&&d){var E=ki(d);E='link[rel="'+l+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),S3.has(E)||(S3.add(E),l={rel:l,crossOrigin:p,href:d},v.querySelector(E)===null&&(d=v.createElement("link"),Kr(d,"link",l),tr(d),v.head.appendChild(d)))}}function nne(l){nl.D(l),E3("dns-prefetch",l,null)}function rne(l,d){nl.C(l,d),E3("preconnect",l,d)}function ine(l,d,p){nl.L(l,d,p);var v=ih;if(v&&l&&d){var E='link[rel="preload"][as="'+ki(d)+'"]';d==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+ki(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+ki(p.imageSizes)+'"]')):E+='[href="'+ki(l)+'"]';var C=E;switch(d){case"style":C=ah(l);break;case"script":C=sh(l)}Ra.has(C)||(l=h({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),Ra.set(C,l),v.querySelector(E)!==null||d==="style"&&v.querySelector(tm(C))||d==="script"&&v.querySelector(nm(C))||(d=v.createElement("link"),Kr(d,"link",l),tr(d),v.head.appendChild(d)))}}function ane(l,d){nl.m(l,d);var p=ih;if(p&&l){var v=d&&typeof d.as=="string"?d.as:"script",E='link[rel="modulepreload"][as="'+ki(v)+'"][href="'+ki(l)+'"]',C=E;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=sh(l)}if(!Ra.has(C)&&(l=h({rel:"modulepreload",href:l},d),Ra.set(C,l),p.querySelector(E)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(nm(C)))return}v=p.createElement("link"),Kr(v,"link",l),tr(v),p.head.appendChild(v)}}}function sne(l,d,p){nl.S(l,d,p);var v=ih;if(v&&l){var E=Gs(v).hoistableStyles,C=ah(l);d=d||"default";var V=E.get(C);if(!V){var $={loading:0,preload:null};if(V=v.querySelector(tm(C)))$.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":d},p),(p=Ra.get(C))&&YT(l,p);var te=V=v.createElement("link");tr(te),Kr(te,"link",l),te._p=new Promise(function(me,_e){te.onload=me,te.onerror=_e}),te.addEventListener("load",function(){$.loading|=1}),te.addEventListener("error",function(){$.loading|=2}),$.loading|=4,Tb(V,d,v)}V={type:"stylesheet",instance:V,count:1,state:$},E.set(C,V)}}}function one(l,d){nl.X(l,d);var p=ih;if(p&&l){var v=Gs(p).hoistableScripts,E=sh(l),C=v.get(E);C||(C=p.querySelector(nm(E)),C||(l=h({src:l,async:!0},d),(d=Ra.get(E))&&XT(l,d),C=p.createElement("script"),tr(C),Kr(C,"link",l),p.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},v.set(E,C))}}function lne(l,d){nl.M(l,d);var p=ih;if(p&&l){var v=Gs(p).hoistableScripts,E=sh(l),C=v.get(E);C||(C=p.querySelector(nm(E)),C||(l=h({src:l,async:!0,type:"module"},d),(d=Ra.get(E))&&XT(l,d),C=p.createElement("script"),tr(C),Kr(C,"link",l),p.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},v.set(E,C))}}function T3(l,d,p,v){var E=(E=de.current)?Eb(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=ah(p.href),p=Gs(E).hoistableStyles,v=p.get(d),v||(v={type:"style",instance:null,count:0,state:null},p.set(d,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=ah(p.href);var C=Gs(E).hoistableStyles,V=C.get(l);if(V||(E=E.ownerDocument||E,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(l,V),(C=E.querySelector(tm(l)))&&!C._p&&(V.instance=C,V.state.loading=5),Ra.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Ra.set(l,p),C||cne(E,l,p,V.state))),d&&v===null)throw Error(r(528,""));return V}if(d&&v!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=sh(p),p=Gs(E).hoistableScripts,v=p.get(d),v||(v={type:"script",instance:null,count:0,state:null},p.set(d,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function ah(l){return'href="'+ki(l)+'"'}function tm(l){return'link[rel="stylesheet"]['+l+"]"}function A3(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function cne(l,d,p,v){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?v.loading=1:(d=l.createElement("link"),v.preload=d,d.addEventListener("load",function(){return v.loading|=1}),d.addEventListener("error",function(){return v.loading|=2}),Kr(d,"link",p),tr(d),l.head.appendChild(d))}function sh(l){return'[src="'+ki(l)+'"]'}function nm(l){return"script[async]"+l}function C3(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var v=l.querySelector('style[data-href~="'+ki(p.href)+'"]');if(v)return d.instance=v,tr(v),v;var E=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),tr(v),Kr(v,"style",E),Tb(v,p.precedence,l),d.instance=v;case"stylesheet":E=ah(p.href);var C=l.querySelector(tm(E));if(C)return d.state.loading|=4,d.instance=C,tr(C),C;v=A3(p),(E=Ra.get(E))&&YT(v,E),C=(l.ownerDocument||l).createElement("link"),tr(C);var V=C;return V._p=new Promise(function($,te){V.onload=$,V.onerror=te}),Kr(C,"link",v),d.state.loading|=4,Tb(C,p.precedence,l),d.instance=C;case"script":return C=sh(p.src),(E=l.querySelector(nm(C)))?(d.instance=E,tr(E),E):(v=p,(E=Ra.get(C))&&(v=h({},p),XT(v,E)),l=l.ownerDocument||l,E=l.createElement("script"),tr(E),Kr(E,"link",v),l.head.appendChild(E),d.instance=E);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(v=d.instance,d.state.loading|=4,Tb(v,p.precedence,l));return d.instance}function Tb(l,d,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=v.length?v[v.length-1]:null,C=E,V=0;V<v.length;V++){var $=v[V];if($.dataset.precedence===d)C=$;else if(C!==E)break}C?C.parentNode.insertBefore(l,C.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function YT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function XT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var Ab=null;function I3(l,d,p){if(Ab===null){var v=new Map,E=Ab=new Map;E.set(p,v)}else E=Ab,v=E.get(p),v||(v=new Map,E.set(p,v));if(v.has(l))return v;for(v.set(l,null),p=p.getElementsByTagName(l),E=0;E<p.length;E++){var C=p[E];if(!(C[$s]||C[er]||l==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var V=C.getAttribute(d)||"";V=l+V;var $=v.get(V);$?$.push(C):v.set(V,[C])}}return v}function k3(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function une(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function P3(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function dne(l,d,p,v){if(p.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var E=ah(v.href),C=d.querySelector(tm(E));if(C){d=C._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=Cb.bind(l),d.then(l,l)),p.state.loading|=4,p.instance=C,tr(C);return}C=d.ownerDocument||d,v=A3(v),(E=Ra.get(E))&&YT(v,E),C=C.createElement("link"),tr(C);var V=C;V._p=new Promise(function($,te){V.onload=$,V.onerror=te}),Kr(C,"link",v),p.instance=C}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,d),(d=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=Cb.bind(l),d.addEventListener("load",p),d.addEventListener("error",p))}}var QT=0;function fne(l,d){return l.stylesheets&&l.count===0&&kb(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var v=setTimeout(function(){if(l.stylesheets&&kb(l,l.stylesheets),l.unsuspend){var C=l.unsuspend;l.unsuspend=null,C()}},6e4+d);0<l.imgBytes&&QT===0&&(QT=62500*Hte());var E=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&kb(l,l.stylesheets),l.unsuspend)){var C=l.unsuspend;l.unsuspend=null,C()}},(l.imgBytes>QT?50:800)+d);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(v),clearTimeout(E)}}:null}function Cb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kb(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Ib=null;function kb(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Ib=new Map,d.forEach(hne,l),Ib=null,Cb.call(l))}function hne(l,d){if(!(d.state.loading&4)){var p=Ib.get(l);if(p)var v=p.get(null);else{p=new Map,Ib.set(l,p);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<E.length;C++){var V=E[C];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(p.set(V.dataset.precedence,V),v=V)}v&&p.set(null,v)}E=d.instance,V=E.getAttribute("data-precedence"),C=p.get(V)||v,C===v&&p.set(null,E),p.set(V,E),this.count++,v=Cb.bind(this),E.addEventListener("load",v),E.addEventListener("error",v),C?C.parentNode.insertBefore(E,C.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),d.state.loading|=4}}var rm={$$typeof:I,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function pne(l,d,p,v,E,C,V,$,te){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fs(0),this.hiddenUpdates=Fs(null),this.identifierPrefix=v,this.onUncaughtError=E,this.onCaughtError=C,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=te,this.incompleteTransitions=new Map}function D3(l,d,p,v,E,C,V,$,te,me,_e,Te){return l=new pne(l,d,p,V,te,me,_e,Te,$),d=1,C===!0&&(d|=24),C=Ji(3,null,null,d),l.current=C,C.stateNode=l,d=PE(),d.refCount++,l.pooledCache=d,d.refCount++,C.memoizedState={element:v,isDehydrated:p,cache:d},RE(C),l}function O3(l){return l?(l=zf,l):zf}function N3(l,d,p,v,E,C){E=O3(E),v.context===null?v.context=E:v.pendingContext=E,v=dc(d),v.payload={element:p},C=C===void 0?null:C,C!==null&&(v.callback=C),p=fc(l,v,d),p!==null&&(Mi(p,l,d),Mg(p,l,d))}function R3(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function ZT(l,d){R3(l,d),(l=l.alternate)&&R3(l,d)}function M3(l){if(l.tag===13||l.tag===31){var d=$u(l,67108864);d!==null&&Mi(d,l,67108864),ZT(l,67108864)}}function j3(l){if(l.tag===13||l.tag===31){var d=ia();d=Du(d);var p=$u(l,d);p!==null&&Mi(p,l,d),ZT(l,d)}}var Pb=!0;function gne(l,d,p,v){var E=q.T;q.T=null;var C=W.p;try{W.p=2,JT(l,d,p,v)}finally{W.p=C,q.T=E}}function mne(l,d,p,v){var E=q.T;q.T=null;var C=W.p;try{W.p=8,JT(l,d,p,v)}finally{W.p=C,q.T=E}}function JT(l,d,p,v){if(Pb){var E=eA(v);if(E===null)VT(l,d,v,Db,p),L3(l,v);else if(yne(E,l,d,p,v))v.stopPropagation();else if(L3(l,v),d&4&&-1<vne.indexOf(l)){for(;E!==null;){var C=Sa(E);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var V=Yi(C.pendingLanes);if(V!==0){var $=C;for($.pendingLanes|=2,$.entangledLanes|=2;V;){var te=1<<31-Vt(V);$.entanglements[1]|=te,V&=~te}io(C),(Ft&6)===0&&(hb=ot()+500,Qg(0))}}break;case 31:case 13:$=$u(C,2),$!==null&&Mi($,C,2),gb(),ZT(C,2)}if(C=eA(v),C===null&&VT(l,d,v,Db,p),C===E)break;E=C}E!==null&&v.stopPropagation()}else VT(l,d,v,null,p)}}function eA(l){return l=Ea(l),tA(l)}var Db=null;function tA(l){if(Db=null,l=qs(l),l!==null){var d=a(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=s(d),l!==null)return l;l=null}else if(p===31){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Db=l,null}function z3(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Et()){case ft:return 2;case xn:return 8;case Zt:case Ur:return 32;case as:return 268435456;default:return 32}default:return 32}}var nA=!1,Sc=null,Ec=null,Tc=null,im=new Map,am=new Map,Ac=[],vne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function L3(l,d){switch(l){case"focusin":case"focusout":Sc=null;break;case"dragenter":case"dragleave":Ec=null;break;case"mouseover":case"mouseout":Tc=null;break;case"pointerover":case"pointerout":im.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":am.delete(d.pointerId)}}function sm(l,d,p,v,E,C){return l===null||l.nativeEvent!==C?(l={blockedOn:d,domEventName:p,eventSystemFlags:v,nativeEvent:C,targetContainers:[E]},d!==null&&(d=Sa(d),d!==null&&M3(d)),l):(l.eventSystemFlags|=v,d=l.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),l)}function yne(l,d,p,v,E){switch(d){case"focusin":return Sc=sm(Sc,l,d,p,v,E),!0;case"dragenter":return Ec=sm(Ec,l,d,p,v,E),!0;case"mouseover":return Tc=sm(Tc,l,d,p,v,E),!0;case"pointerover":var C=E.pointerId;return im.set(C,sm(im.get(C)||null,l,d,p,v,E)),!0;case"gotpointercapture":return C=E.pointerId,am.set(C,sm(am.get(C)||null,l,d,p,v,E)),!0}return!1}function V3(l){var d=qs(l.target);if(d!==null){var p=a(d);if(p!==null){if(d=p.tag,d===13){if(d=s(p),d!==null){l.blockedOn=d,ls(l.priority,function(){j3(p)});return}}else if(d===31){if(d=o(p),d!==null){l.blockedOn=d,ls(l.priority,function(){j3(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Ob(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=eA(l.nativeEvent);if(p===null){p=l.nativeEvent;var v=new p.constructor(p.type,p);bg=v,p.target.dispatchEvent(v),bg=null}else return d=Sa(p),d!==null&&M3(d),l.blockedOn=p,!1;d.shift()}return!0}function B3(l,d,p){Ob(l)&&p.delete(d)}function bne(){nA=!1,Sc!==null&&Ob(Sc)&&(Sc=null),Ec!==null&&Ob(Ec)&&(Ec=null),Tc!==null&&Ob(Tc)&&(Tc=null),im.forEach(B3),am.forEach(B3)}function Nb(l,d){l.blockedOn===d&&(l.blockedOn=null,nA||(nA=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,bne)))}var Rb=null;function F3(l){Rb!==l&&(Rb=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Rb===l&&(Rb=null);for(var d=0;d<l.length;d+=3){var p=l[d],v=l[d+1],E=l[d+2];if(typeof v!="function"){if(tA(v||p)===null)continue;break}var C=Sa(p);C!==null&&(l.splice(d,3),d-=3,eT(C,{pending:!0,data:E,method:p.method,action:v},v,E))}}))}function oh(l){function d(te){return Nb(te,l)}Sc!==null&&Nb(Sc,l),Ec!==null&&Nb(Ec,l),Tc!==null&&Nb(Tc,l),im.forEach(d),am.forEach(d);for(var p=0;p<Ac.length;p++){var v=Ac[p];v.blockedOn===l&&(v.blockedOn=null)}for(;0<Ac.length&&(p=Ac[0],p.blockedOn===null);)V3(p),p.blockedOn===null&&Ac.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var E=p[v],C=p[v+1],V=E[Dr]||null;if(typeof C=="function")V||F3(p);else if(V){var $=null;if(C&&C.hasAttribute("formAction")){if(E=C,V=C[Dr]||null)$=V.formAction;else if(tA(E)!==null)continue}else $=V.action;typeof $=="function"?p[v+1]=$:(p.splice(v,3),v-=3),F3(p)}}}function U3(){function l(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(V){return E=V})},focusReset:"manual",scroll:"manual"})}function d(){E!==null&&(E(),E=null),v||setTimeout(p,20)}function p(){if(!v&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,E=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(p,100),function(){v=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),E!==null&&(E(),E=null)}}}function rA(l){this._internalRoot=l}Mb.prototype.render=rA.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,v=ia();N3(p,v,l,d,null,null)},Mb.prototype.unmount=rA.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;N3(l.current,2,null,l,null,null),gb(),d[Us]=null}};function Mb(l){this._internalRoot=l}Mb.prototype.unstable_scheduleHydration=function(l){if(l){var d=gy();l={blockedOn:null,target:l,priority:d};for(var p=0;p<Ac.length&&d!==0&&d<Ac[p].priority;p++);Ac.splice(p,0,l),p===0&&V3(l)}};var $3=e.version;if($3!=="19.2.0")throw Error(r(527,$3,"19.2.0"));W.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var xne={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jb.isDisabled&&jb.supportsFiber)try{pi=jb.inject(xne),wn=jb}catch{}}return lm.createRoot=function(l,d){if(!i(l))throw Error(r(299));var p=!1,v="",E=Xj,C=Qj,V=Zj;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(E=d.onUncaughtError),d.onCaughtError!==void 0&&(C=d.onCaughtError),d.onRecoverableError!==void 0&&(V=d.onRecoverableError)),d=D3(l,1,!1,null,null,p,v,null,E,C,V,U3),l[Us]=d.current,LT(l),new rA(d)},lm.hydrateRoot=function(l,d,p){if(!i(l))throw Error(r(299));var v=!1,E="",C=Xj,V=Qj,$=Zj,te=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(C=p.onUncaughtError),p.onCaughtError!==void 0&&(V=p.onCaughtError),p.onRecoverableError!==void 0&&($=p.onRecoverableError),p.formState!==void 0&&(te=p.formState)),d=D3(l,1,!0,d,p??null,v,E,te,C,V,$,U3),d.context=O3(null),p=d.current,v=ia(),v=Du(v),E=dc(v),E.callback=null,fc(p,E,v),p=v,d.current.lanes=p,ku(d,p),io(d),l[Us]=d.current,LT(l),new Mb(d)},lm.version="19.2.0",lm}var J3;function Dne(){if(J3)return sA.exports;J3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sA.exports=Pne(),sA.exports}var One=Dne();const Nne="modulepreload",Rne=function(t){return"/personal-budget-pwa/"+t},ez={},Pt=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=c(n.map(u=>{if(u=Rne(u),u in ez)return;ez[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":Nne,f||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((m,b)=>{g.addEventListener("load",m),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Mne(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:s}=t;let o,c;const u=async(h=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(o=await Pt(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(h=>{s?.(h)}),!o)return;o.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),o.addEventListener("installed",h=>{h.isUpdate||r?.()}),o.register({immediate:e}).then(h=>{a?a("/personal-budget-pwa/sw.js",h):i?.(h)}).catch(h=>{s?.(h)})}}return c=f(),u}const jne=()=>{};var tz={};const M8=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},zne=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},j2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,f=a>>2,h=(a&3)<<4|o>>4;let g=(o&15)<<2|u>>6,m=u&63;c||(m=64,s||(g=64)),r.push(n[f],n[h],n[g],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(M8(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zne(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||h==null)throw new Lne;const g=a<<2|o>>4;if(r.push(g),u!==64){const m=o<<4&240|u>>2;if(r.push(m),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Lne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vne=function(t){const e=M8(t);return j2.encodeByteArray(e,!0)},j8=function(t){return Vne(t).replace(/\./g,"")},z8=function(t){try{return j2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function z2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Bne=()=>z2().__FIREBASE_DEFAULTS__,Fne=()=>{if(typeof process>"u"||typeof tz>"u")return;const t=tz.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Une=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&z8(t[1]);return e&&JSON.parse(e)},s_=()=>{try{return jne()||Bne()||Fne()||Une()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},L8=t=>s_()?.emulatorHosts?.[t],$ne=t=>{const e=L8(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},V8=()=>s_()?.config,B8=t=>s_()?.[`_${t}`];class lv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function yu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function L2(t){return(await fetch(t,{credentials:"include"})).ok}const Vm={};function qne(){const t={prod:[],emulator:[]};for(const e of Object.keys(Vm))Vm[e]?t.emulator.push(e):t.prod.push(e);return t}function Gne(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let nz=!1;function F8(t,e){if(typeof window>"u"||typeof document>"u"||!yu(window.location.host)||Vm[t]===e||Vm[t]||nz)return;Vm[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=qne().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{nz=!0,s()},g}function f(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function h(){const g=Gne(r),m=n("text"),b=document.getElementById(m)||document.createElement("span"),x=n("learnmore"),w=document.getElementById(x)||document.createElement("a"),S=n("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;o(I),f(w,x);const N=u();c(T,S),I.append(T,b,w,N),document.body.appendChild(I)}a?(b.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function Tr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tr())}function U8(){const t=s_()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Kne(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Wne(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Yne(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Xne(){const t=Tr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $8(){return!U8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q8(){return!U8()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function o_(){try{return typeof indexedDB=="object"}catch{return!1}}function Qne(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const Zne="FirebaseError";class No extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Zne,Object.setPrototypeOf(this,No.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rp.prototype.create)}}class Rp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?Jne(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new No(i,o,r)}}function Jne(t,e){return t.replace(ere,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ere=/\{\$([^}]+)}/g;function tre(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function iu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(rz(a)&&rz(s)){if(!iu(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function rz(t){return t!==null&&typeof t=="object"}function o0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Tm(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Am(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function nre(t,e){const n=new rre(t,e);return n.subscribe.bind(n)}class rre{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ire(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=uA),i.error===void 0&&(i.error=uA),i.complete===void 0&&(i.complete=uA);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ire(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function uA(){}const are=1e3,sre=2,ore=14400*1e3,lre=.5;function cre(t,e=are,n=sre){const r=e*Math.pow(n,t),i=Math.round(lre*r*(Math.random()-.5)*2);return Math.min(ore,r+i)}function $t(t){return t&&t._delegate?t._delegate:t}let Ao=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const id="[DEFAULT]";let ure=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fre(e))try{this.getOrInitializeService({instanceIdentifier:id})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=id){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=id){return this.instances.has(e)}getOptions(e=id){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dre(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=id){return this.component?this.component.multipleInstances?e:id:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function dre(t){return t===id?void 0:t}function fre(t){return t.instantiationMode==="EAGER"}class hre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ure(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ct||(Ct={}));const pre={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},gre=Ct.INFO,mre={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},vre=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=mre[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class l_{constructor(e){this.name=e,this._logLevel=gre,this._logHandler=vre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pre[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...e),this._logHandler(this,Ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...e),this._logHandler(this,Ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...e),this._logHandler(this,Ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...e),this._logHandler(this,Ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...e),this._logHandler(this,Ct.ERROR,...e)}}const yre=(t,e)=>e.some(n=>t instanceof n);let iz,az;function bre(){return iz||(iz=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xre(){return az||(az=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G8=new WeakMap,WI=new WeakMap,H8=new WeakMap,dA=new WeakMap,V2=new WeakMap;function wre(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(Qc(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&G8.set(n,t)}).catch(()=>{}),V2.set(e,t),e}function _re(t){if(WI.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});WI.set(t,e)}let YI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return WI.get(t);if(e==="objectStoreNames")return t.objectStoreNames||H8.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Sre(t){YI=t(YI)}function Ere(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fA(this),e,...n);return H8.set(r,e.sort?e.sort():[e]),Qc(r)}:xre().includes(t)?function(...e){return t.apply(fA(this),e),Qc(G8.get(this))}:function(...e){return Qc(t.apply(fA(this),e))}}function Tre(t){return typeof t=="function"?Ere(t):(t instanceof IDBTransaction&&_re(t),yre(t,bre())?new Proxy(t,YI):t)}function Qc(t){if(t instanceof IDBRequest)return wre(t);if(dA.has(t))return dA.get(t);const e=Tre(t);return e!==t&&(dA.set(t,e),V2.set(e,t)),e}const fA=t=>V2.get(t);function Are(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=Qc(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Qc(s.result),c.oldVersion,c.newVersion,Qc(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Cre=["get","getKey","getAll","getAllKeys","count"],Ire=["put","add","delete","clear"],hA=new Map;function sz(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hA.get(e))return hA.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Ire.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Cre.includes(n)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&c.done]))[0]};return hA.set(e,a),a}Sre(t=>({...t,get:(e,n,r)=>sz(e,n)||t.get(e,n,r),has:(e,n)=>!!sz(e,n)||t.has(e,n)}));class kre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Pre(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Pre(t){return t.getComponent()?.type==="VERSION"}const XI="@firebase/app",oz="0.14.6";const _l=new l_("@firebase/app"),Dre="@firebase/app-compat",Ore="@firebase/analytics-compat",Nre="@firebase/analytics",Rre="@firebase/app-check-compat",Mre="@firebase/app-check",jre="@firebase/auth",zre="@firebase/auth-compat",Lre="@firebase/database",Vre="@firebase/data-connect",Bre="@firebase/database-compat",Fre="@firebase/functions",Ure="@firebase/functions-compat",$re="@firebase/installations",qre="@firebase/installations-compat",Gre="@firebase/messaging",Hre="@firebase/messaging-compat",Kre="@firebase/performance",Wre="@firebase/performance-compat",Yre="@firebase/remote-config",Xre="@firebase/remote-config-compat",Qre="@firebase/storage",Zre="@firebase/storage-compat",Jre="@firebase/firestore",eie="@firebase/ai",tie="@firebase/firestore-compat",nie="firebase",rie="12.6.0";const QI="[DEFAULT]",iie={[XI]:"fire-core",[Dre]:"fire-core-compat",[Nre]:"fire-analytics",[Ore]:"fire-analytics-compat",[Mre]:"fire-app-check",[Rre]:"fire-app-check-compat",[jre]:"fire-auth",[zre]:"fire-auth-compat",[Lre]:"fire-rtdb",[Vre]:"fire-data-connect",[Bre]:"fire-rtdb-compat",[Fre]:"fire-fn",[Ure]:"fire-fn-compat",[$re]:"fire-iid",[qre]:"fire-iid-compat",[Gre]:"fire-fcm",[Hre]:"fire-fcm-compat",[Kre]:"fire-perf",[Wre]:"fire-perf-compat",[Yre]:"fire-rc",[Xre]:"fire-rc-compat",[Qre]:"fire-gcs",[Zre]:"fire-gcs-compat",[Jre]:"fire-fst",[tie]:"fire-fst-compat",[eie]:"fire-vertex","fire-js":"fire-js",[nie]:"fire-js-all"};const d1=new Map,aie=new Map,ZI=new Map;function lz(t,e){try{t.container.addComponent(e)}catch(n){_l.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sl(t){const e=t.name;if(ZI.has(e))return _l.debug(`There were multiple attempts to register component ${e}.`),!1;ZI.set(e,t);for(const n of d1.values())lz(n,t);for(const n of aie.values())lz(n,t);return!0}function Mp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ua(t){return t==null?!1:t.settings!==void 0}const sie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zc=new Rp("app","Firebase",sie);class oie{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zc.create("app-deleted",{appName:this._name})}}const jp=rie;function K8(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:QI,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Zc.create("bad-app-name",{appName:String(i)});if(n||(n=V8()),!n)throw Zc.create("no-options");const a=d1.get(i);if(a){if(iu(n,a.options)&&iu(r,a.config))return a;throw Zc.create("duplicate-app",{appName:i})}const s=new hre(i);for(const c of ZI.values())s.addComponent(c);const o=new oie(n,r,s);return d1.set(i,o),o}function B2(t=QI){const e=d1.get(t);if(!e&&t===QI&&V8())return K8();if(!e)throw Zc.create("no-app",{appName:t});return e}function As(t,e,n){let r=iie[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_l.warn(s.join(" "));return}Sl(new Ao(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const lie="firebase-heartbeat-database",cie=1,cv="firebase-heartbeat-store";let pA=null;function W8(){return pA||(pA=Are(lie,cie,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cv)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zc.create("idb-open",{originalErrorMessage:t.message})})),pA}async function uie(t){try{const n=(await W8()).transaction(cv),r=await n.objectStore(cv).get(Y8(t));return await n.done,r}catch(e){if(e instanceof No)_l.warn(e.message);else{const n=Zc.create("idb-get",{originalErrorMessage:e?.message});_l.warn(n.message)}}}async function cz(t,e){try{const r=(await W8()).transaction(cv,"readwrite");await r.objectStore(cv).put(e,Y8(t)),await r.done}catch(n){if(n instanceof No)_l.warn(n.message);else{const r=Zc.create("idb-set",{originalErrorMessage:n?.message});_l.warn(r.message)}}}function Y8(t){return`${t.name}!${t.options.appId}`}const die=1024,fie=30;class hie{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gie(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=uz();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>fie){const i=mie(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_l.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=uz(),{heartbeatsToSend:n,unsentEntries:r}=pie(this._heartbeatsCache.heartbeats),i=j8(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return _l.warn(e),""}}}function uz(){return new Date().toISOString().substring(0,10)}function pie(t,e=die){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),dz(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dz(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return o_()?Qne().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uie(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cz(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cz(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function dz(t){return j8(JSON.stringify({version:2,heartbeats:t})).length}function mie(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function vie(t){Sl(new Ao("platform-logger",e=>new kre(e),"PRIVATE")),Sl(new Ao("heartbeat",e=>new hie(e),"PRIVATE")),As(XI,oz,t),As(XI,oz,"esm2020"),As("fire-js","")}vie("");function X8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yie=X8,Q8=new Rp("auth","Firebase",X8());const f1=new l_("@firebase/auth");function bie(t,...e){f1.logLevel<=Ct.WARN&&f1.warn(`Auth (${jp}): ${t}`,...e)}function Nx(t,...e){f1.logLevel<=Ct.ERROR&&f1.error(`Auth (${jp}): ${t}`,...e)}function Ds(t,...e){throw F2(t,...e)}function vo(t,...e){return F2(t,...e)}function Z8(t,e,n){const r={...yie(),[e]:n};return new Rp("auth","Firebase",r).create(e,{appName:t.name})}function gl(t){return Z8(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function F2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Q8.create(t,...e)}function tt(t,e,...n){if(!t)throw F2(e,...n)}function cl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nx(e),new Error(e)}function El(t,e){t||cl(e)}function JI(){return typeof self<"u"&&self.location?.href||""}function xie(){return fz()==="http:"||fz()==="https:"}function fz(){return typeof self<"u"&&self.location?.protocol||null}function wie(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xie()||Wne()||"connection"in navigator)?navigator.onLine:!0}function _ie(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class l0{constructor(e,n){this.shortDelay=e,this.longDelay=n,El(n>e,"Short delay should be less than long delay!"),this.isMobile=Hne()||Yne()}get(){return wie()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function U2(t,e){El(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class J8{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Sie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Eie=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Tie=new l0(3e4,6e4);function zs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function es(t,e,n,r,i={}){return e$(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=o0({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return Kne()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&yu(t.emulatorConfig.host)&&(u.credentials="include"),J8.fetch()(await t$(t,t.config.apiHost,n,o),u)})}async function e$(t,e,n){t._canInitEmulator=!1;const r={...Sie,...e};try{const i=new Cie(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw zb(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw zb(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw zb(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw zb(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Z8(t,f,u);Ds(t,f)}}catch(i){if(i instanceof No)throw i;Ds(t,"network-request-failed",{message:String(i)})}}async function c0(t,e,n,r,i={}){const a=await es(t,e,n,r,i);return"mfaPendingCredential"in a&&Ds(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function t$(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?U2(t.config,i):`${t.config.apiScheme}://${i}`;return Eie.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function Aie(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Cie{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vo(this.auth,"network-request-failed")),Tie.get())})}}function zb(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=vo(t,e,r);return i.customData._tokenResponse=n,i}function hz(t){return t!==void 0&&t.enterprise!==void 0}class Iie{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Aie(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kie(t,e){return es(t,"GET","/v2/recaptchaConfig",zs(t,e))}async function Pie(t,e){return es(t,"POST","/v1/accounts:delete",e)}async function h1(t,e){return es(t,"POST","/v1/accounts:lookup",e)}function Bm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Die(t,e=!1){const n=$t(t),r=await n.getIdToken(e),i=$2(r);tt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a?.sign_in_provider;return{claims:i,token:r,authTime:Bm(gA(i.auth_time)),issuedAtTime:Bm(gA(i.iat)),expirationTime:Bm(gA(i.exp)),signInProvider:s||null,signInSecondFactor:a?.sign_in_second_factor||null}}function gA(t){return Number(t)*1e3}function $2(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nx("JWT malformed, contained fewer than 3 sections"),null;try{const i=z8(n);return i?JSON.parse(i):(Nx("Failed to decode base64 JWT payload"),null)}catch(i){return Nx("Caught error parsing JWT payload as JSON",i?.toString()),null}}function pz(t){const e=$2(t);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Yh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof No&&Oie(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Oie({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Nie{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ek{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bm(this.lastLoginAt),this.creationTime=Bm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function p1(t){const e=t.auth,n=await t.getIdToken(),r=await Yh(t,h1(e,{idToken:n}));tt(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?n$(i.providerUserInfo):[],s=Mie(t.providerData,a),o=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!s?.length,u=o?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ek(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function Rie(t){const e=$t(t);await p1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Mie(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function n$(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function jie(t,e){const n=await e$(t,{},async()=>{const r=o0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await t$(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&yu(t.emulatorConfig.host)&&(c.credentials="include"),J8.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zie(t,e){return es(t,"POST","/v2/accounts:revokeToken",zs(t,e))}class Bh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pz(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const n=pz(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await jie(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Bh;return r&&(tt(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(tt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(tt(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bh,this.toJSON())}_performRefresh(){return cl("not implemented")}}function Ic(t,e){tt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ts{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Nie(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ek(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Yh(this,this.stsTokenManager.getToken(this.auth,e));return tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Die(this,e)}reload(){return Rie(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ts({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await p1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ua(this.auth.app))return Promise.reject(gl(this.auth));const e=await this.getIdToken();return await Yh(this,Pie(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,s=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:h,emailVerified:g,isAnonymous:m,providerData:b,stsTokenManager:x}=n;tt(h&&x,e,"internal-error");const w=Bh.fromJSON(this.name,x);tt(typeof h=="string",e,"internal-error"),Ic(r,e.name),Ic(i,e.name),tt(typeof g=="boolean",e,"internal-error"),tt(typeof m=="boolean",e,"internal-error"),Ic(a,e.name),Ic(s,e.name),Ic(o,e.name),Ic(c,e.name),Ic(u,e.name),Ic(f,e.name);const S=new Ts({uid:h,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:m,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:f});return b&&Array.isArray(b)&&(S.providerData=b.map(T=>({...T}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Bh;i.updateFromServerResponse(n);const a=new Ts({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await p1(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];tt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?n$(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!a?.length,o=new Bh;o.updateFromIdToken(r);const c=new Ts({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ek(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,u),c}}const gz=new Map;function ul(t){El(t instanceof Function,"Expected a class definition");let e=gz.get(t);return e?(El(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gz.set(t,e),e)}class r${constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}r$.type="NONE";const mz=r$;function Rx(t,e,n){return`firebase:${t}:${e}:${n}`}class Fh{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Rx(this.userKey,i.apiKey,a),this.fullPersistenceKey=Rx("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await h1(this.auth,{idToken:e}).catch(()=>{});return n?Ts._fromGetAccountInfoResponse(this.auth,n,e):null}return Ts._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fh(ul(mz),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||ul(mz);const s=Rx(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const f=await u._get(s);if(f){let h;if(typeof f=="string"){const g=await h1(e,{idToken:f}).catch(()=>{});if(!g)break;h=await Ts._fromGetAccountInfoResponse(e,g,f)}else h=Ts._fromJSON(e,f);u!==a&&(o=h),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Fh(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new Fh(a,e,r))}}function vz(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(o$(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(i$(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(c$(e))return"Blackberry";if(u$(e))return"Webos";if(a$(e))return"Safari";if((e.includes("chrome/")||s$(e))&&!e.includes("edge/"))return"Chrome";if(l$(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function i$(t=Tr()){return/firefox\//i.test(t)}function a$(t=Tr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function s$(t=Tr()){return/crios\//i.test(t)}function o$(t=Tr()){return/iemobile/i.test(t)}function l$(t=Tr()){return/android/i.test(t)}function c$(t=Tr()){return/blackberry/i.test(t)}function u$(t=Tr()){return/webos/i.test(t)}function q2(t=Tr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Lie(t=Tr()){return q2(t)&&!!window.navigator?.standalone}function Vie(){return Xne()&&document.documentMode===10}function d$(t=Tr()){return q2(t)||l$(t)||u$(t)||c$(t)||/windows phone/i.test(t)||o$(t)}function f$(t,e=[]){let n;switch(t){case"Browser":n=vz(Tr());break;case"Worker":n=`${vz(Tr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jp}/${r}`}class Bie{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Fie(t,e={}){return es(t,"GET","/v2/passwordPolicy",zs(t,e))}const Uie=6;class $ie{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Uie,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class qie{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yz(this),this.idTokenSubscription=new yz(this),this.beforeStateQueue=new Bie(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Q8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ul(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Fh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await h1(this,{idToken:e}),r=await Ts._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ua(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,s=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!a||a===s)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await p1(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_ie()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ua(this.app))return Promise.reject(gl(this));const n=e?$t(e):null;return n&&tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ua(this.app)?Promise.reject(gl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ua(this.app)?Promise.reject(gl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ul(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Fie(this),n=new $ie(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zie(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ul(e)||this._popupRedirectResolver;tt(n,this,"argument-error"),this.redirectPersistenceManager=await Fh.create(this,[ul(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=f$(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ua(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&bie(`Error while retrieving App Check token: ${e.error}`),e?.token}}function bu(t){return $t(t)}class yz{constructor(e){this.auth=e,this.observer=null,this.addObserver=nre(n=>this.observer=n)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let c_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gie(t){c_=t}function h$(t){return c_.loadJS(t)}function Hie(){return c_.recaptchaEnterpriseScript}function Kie(){return c_.gapiScript}function Wie(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Yie{constructor(){this.enterprise=new Xie}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Xie{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Qie="recaptcha-enterprise",p$="NO_RECAPTCHA";class Zie{constructor(e){this.type=Qie,this.auth=bu(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{kie(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Iie(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;hz(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(p$)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Yie().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&hz(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Hie();c.length!==0&&(c+=o),h$(c).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function bz(t,e,n,r=!1,i=!1){const a=new Zie(t);let s;if(i)s=p$;else try{s=await a.verify(n)}catch{s=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function g1(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await bz(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await bz(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(a)})}function Jie(t,e){const n=Mp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(iu(a,e??{}))return i;Ds(i,"already-initialized")}return n.initialize({options:e})}function eae(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ul);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function tae(t,e,n){const r=bu(t);tt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=g$(e),{host:s,port:o}=nae(e),c=o===null?"":`:${o}`,u={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){tt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),tt(iu(u,r.config.emulator)&&iu(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,yu(s)?(L2(`${a}//${s}${c}`),F8("Auth",!0)):rae()}function g$(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nae(t){const e=g$(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:xz(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:xz(s)}}}function xz(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rae(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class G2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cl("not implemented")}_getIdTokenResponse(e){return cl("not implemented")}_linkToIdToken(e,n){return cl("not implemented")}_getReauthenticationResolver(e){return cl("not implemented")}}async function iae(t,e){return es(t,"POST","/v1/accounts:resetPassword",zs(t,e))}async function aae(t,e){return es(t,"POST","/v1/accounts:signUp",e)}async function sae(t,e){return es(t,"POST","/v1/accounts:update",zs(t,e))}async function oae(t,e){return c0(t,"POST","/v1/accounts:signInWithPassword",zs(t,e))}async function m$(t,e){return es(t,"POST","/v1/accounts:sendOobCode",zs(t,e))}async function lae(t,e){return m$(t,e)}async function cae(t,e){return m$(t,e)}async function uae(t,e){return c0(t,"POST","/v1/accounts:signInWithEmailLink",zs(t,e))}async function dae(t,e){return c0(t,"POST","/v1/accounts:signInWithEmailLink",zs(t,e))}class uv extends G2{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new uv(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new uv(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return g1(e,n,"signInWithPassword",oae);case"emailLink":return uae(e,{email:this._email,oobCode:this._password});default:Ds(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return g1(e,r,"signUpPassword",aae);case"emailLink":return dae(e,{idToken:n,email:this._email,oobCode:this._password});default:Ds(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Uh(t,e){return c0(t,"POST","/v1/accounts:signInWithIdp",zs(t,e))}const fae="http://localhost";class Bd extends G2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Bd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ds("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const s=new Bd(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Uh(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Uh(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Uh(e,n)}buildRequest(){const e={requestUri:fae,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=o0(n)}return e}}function hae(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pae(t){const e=Tm(Am(t)).link,n=e?Tm(Am(e)).deep_link_id:null,r=Tm(Am(t)).deep_link_id;return(r?Tm(Am(r)).link:null)||r||n||e||t}class H2{constructor(e){const n=Tm(Am(e)),r=n.apiKey??null,i=n.oobCode??null,a=hae(n.mode??null);tt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=pae(e);try{return new H2(n)}catch{return null}}}class uf{constructor(){this.providerId=uf.PROVIDER_ID}static credential(e,n){return uv._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=H2.parseLink(n);return tt(r,"argument-error"),uv._fromEmailAndCode(e,r.code,r.tenantId)}}uf.PROVIDER_ID="password";uf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class v${constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class u0 extends v${constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class zc extends u0{constructor(){super("facebook.com")}static credential(e){return Bd._fromParams({providerId:zc.PROVIDER_ID,signInMethod:zc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zc.credentialFromTaggedObject(e)}static credentialFromError(e){return zc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zc.credential(e.oauthAccessToken)}catch{return null}}}zc.FACEBOOK_SIGN_IN_METHOD="facebook.com";zc.PROVIDER_ID="facebook.com";class Lc extends u0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Bd._fromParams({providerId:Lc.PROVIDER_ID,signInMethod:Lc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Lc.credentialFromTaggedObject(e)}static credentialFromError(e){return Lc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Lc.credential(n,r)}catch{return null}}}Lc.GOOGLE_SIGN_IN_METHOD="google.com";Lc.PROVIDER_ID="google.com";class Vc extends u0{constructor(){super("github.com")}static credential(e){return Bd._fromParams({providerId:Vc.PROVIDER_ID,signInMethod:Vc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vc.credentialFromTaggedObject(e)}static credentialFromError(e){return Vc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vc.credential(e.oauthAccessToken)}catch{return null}}}Vc.GITHUB_SIGN_IN_METHOD="github.com";Vc.PROVIDER_ID="github.com";class Bc extends u0{constructor(){super("twitter.com")}static credential(e,n){return Bd._fromParams({providerId:Bc.PROVIDER_ID,signInMethod:Bc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bc.credentialFromTaggedObject(e)}static credentialFromError(e){return Bc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Bc.credential(n,r)}catch{return null}}}Bc.TWITTER_SIGN_IN_METHOD="twitter.com";Bc.PROVIDER_ID="twitter.com";async function gae(t,e){return c0(t,"POST","/v1/accounts:signUp",zs(t,e))}class Fd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Ts._fromIdTokenResponse(e,r,i),s=wz(r);return new Fd({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=wz(r);return new Fd({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function wz(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class m1 extends No{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,m1.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new m1(e,n,r,i)}}function y$(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?m1._fromErrorAndOperation(t,a,e,r):a})}async function mae(t,e,n=!1){const r=await Yh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fd._forOperation(t,"link",r)}async function b$(t,e,n=!1){const{auth:r}=t;if(ua(r.app))return Promise.reject(gl(r));const i="reauthenticate";try{const a=await Yh(t,y$(r,i,e,t),n);tt(a.idToken,r,"internal-error");const s=$2(a.idToken);tt(s,r,"internal-error");const{sub:o}=s;return tt(t.uid===o,r,"user-mismatch"),Fd._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Ds(r,"user-mismatch"),a}}async function x$(t,e,n=!1){if(ua(t.app))return Promise.reject(gl(t));const r="signIn",i=await y$(t,r,e),a=await Fd._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function vae(t,e){return x$(bu(t),e)}async function yae(t,e){return b$($t(t),e)}function bae(t,e,n){tt(n.url?.length>0,t,"invalid-continue-uri"),tt(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),tt(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(tt(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(tt(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function K2(t){const e=bu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xae(t,e,n){const r=bu(t);await g1(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",cae)}async function wae(t,e,n){await iae($t(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&K2(t),r})}async function _ae(t,e){await sae($t(t),{oobCode:e})}async function Sae(t,e,n){if(ua(t.app))return Promise.reject(gl(t));const r=bu(t),s=await g1(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gae).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&K2(t),c}),o=await Fd._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function Eae(t,e,n){return ua(t.app)?Promise.reject(gl(t)):vae($t(t),uf.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&K2(t),r})}async function _z(t,e){const n=$t(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&bae(n.auth,i,e);const{email:a}=await lae(n.auth,i);a!==t.email&&await t.reload()}async function Tae(t,e){return es(t,"POST","/v1/accounts:update",e)}async function Aae(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=$t(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await Yh(r,Tae(r.auth,a));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function Cae(t,e,n,r){return $t(t).onIdTokenChanged(e,n,r)}function Iae(t,e,n){return $t(t).beforeAuthStateChanged(e,n)}function kae(t,e,n,r){return $t(t).onAuthStateChanged(e,n,r)}function Sz(t){return $t(t).signOut()}async function Pae(t){return $t(t).delete()}const v1="__sak";class w${constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(v1,"1"),this.storage.removeItem(v1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Dae=1e3,Oae=10;class _$ extends w${constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=d$(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);Vie()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Oae):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Dae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_$.type="LOCAL";const Nae=_$;class S$ extends w${constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}S$.type="SESSION";const E$=S$;function Rae(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class u_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new u_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!s?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async u=>u(n.origin,a)),c=await Rae(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}u_.receivers=[];function W2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class Mae{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const u=W2("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const g=h;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function yo(){return window}function jae(t){yo().location.href=t}function T$(){return typeof yo().WorkerGlobalScope<"u"&&typeof yo().importScripts=="function"}async function zae(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Lae(){return navigator?.serviceWorker?.controller||null}function Vae(){return T$()?self:null}const A$="firebaseLocalStorageDb",Bae=1,y1="firebaseLocalStorage",C$="fbase_key";class d0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function d_(t,e){return t.transaction([y1],e?"readwrite":"readonly").objectStore(y1)}function Fae(){const t=indexedDB.deleteDatabase(A$);return new d0(t).toPromise()}function tk(){const t=indexedDB.open(A$,Bae);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(y1,{keyPath:C$})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(y1)?e(r):(r.close(),await Fae(),e(await tk()))})})}async function Ez(t,e,n){const r=d_(t,!0).put({[C$]:e,value:n});return new d0(r).toPromise()}async function Uae(t,e){const n=d_(t,!1).get(e),r=await new d0(n).toPromise();return r===void 0?null:r.value}function Tz(t,e){const n=d_(t,!0).delete(e);return new d0(n).toPromise()}const $ae=800,qae=3;class I${constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tk(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>qae)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return T$()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=u_._getInstance(Vae()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await zae(),!this.activeServiceWorker)return;this.sender=new Mae(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Lae()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tk();return await Ez(e,v1,"1"),await Tz(e,v1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ez(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Uae(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tz(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=d_(i,!1).getAll();return new d0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$ae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}I$.type="LOCAL";const Gae=I$;new l0(3e4,6e4);function Hae(t,e){return e?ul(e):(tt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Y2 extends G2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Uh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Uh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Uh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Kae(t){return x$(t.auth,new Y2(t),t.bypassAuthState)}function Wae(t){const{auth:e,user:n}=t;return tt(n,e,"internal-error"),b$(n,new Y2(t),t.bypassAuthState)}async function Yae(t){const{auth:e,user:n}=t;return tt(n,e,"internal-error"),mae(n,new Y2(t),t.bypassAuthState)}class k${constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Kae;case"linkViaPopup":case"linkViaRedirect":return Yae;case"reauthViaPopup":case"reauthViaRedirect":return Wae;default:Ds(this.auth,"internal-error")}}resolve(e){El(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){El(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xae=new l0(2e3,1e4);class Th extends k${constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Th.currentPopupAction&&Th.currentPopupAction.cancel(),Th.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){El(this.filter.length===1,"Popup operations only handle one event");const e=W2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(vo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Th.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Xae.get())};e()}}Th.currentPopupAction=null;const Qae="pendingRedirect",Mx=new Map;class Zae extends k${constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Mx.get(this.auth._key());if(!e){try{const r=await Jae(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Mx.set(this.auth._key(),e)}return this.bypassAuthState||Mx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Jae(t,e){const n=nse(e),r=tse(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ese(t,e){Mx.set(t._key(),e)}function tse(t){return ul(t._redirectPersistence)}function nse(t){return Rx(Qae,t.config.apiKey,t.name)}async function rse(t,e,n=!1){if(ua(t.app))return Promise.reject(gl(t));const r=bu(t),i=Hae(r,e),s=await new Zae(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}const ise=600*1e3;class ase{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sse(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!P$(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(vo(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ise&&this.cachedEventUids.clear(),this.cachedEventUids.has(Az(e))}saveEventToCache(e){this.cachedEventUids.add(Az(e)),this.lastProcessedEventTime=Date.now()}}function Az(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function P$({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function sse(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return P$(t);default:return!1}}async function ose(t,e={}){return es(t,"GET","/v1/projects",e)}const lse=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cse=/^https?/;async function use(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ose(t);for(const n of e)try{if(dse(n))return}catch{}Ds(t,"unauthorized-domain")}function dse(t){const e=JI(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!cse.test(n))return!1;if(lse.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const fse=new l0(3e4,6e4);function Cz(){const t=yo().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hse(t){return new Promise((e,n)=>{function r(){Cz(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cz(),n(vo(t,"network-request-failed"))},timeout:fse.get()})}if(yo().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(yo().gapi?.load)r();else{const i=Wie("iframefcb");return yo()[i]=()=>{gapi.load?r():n(vo(t,"network-request-failed"))},h$(`${Kie()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw jx=null,e})}let jx=null;function pse(t){return jx=jx||hse(t),jx}const gse=new l0(5e3,15e3),mse="__/auth/iframe",vse="emulator/auth/iframe",yse={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bse=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xse(t){const e=t.config;tt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?U2(e,vse):`https://${t.config.authDomain}/${mse}`,r={apiKey:e.apiKey,appName:t.name,v:jp},i=bse.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${o0(r).slice(1)}`}async function wse(t){const e=await pse(t),n=yo().gapi;return tt(n,t,"internal-error"),e.open({where:document.body,url:xse(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yse,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=vo(t,"network-request-failed"),o=yo().setTimeout(()=>{a(s)},gse.get());function c(){yo().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}const _se={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Sse=500,Ese=600,Tse="_blank",Ase="http://localhost";class Iz{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Cse(t,e,n,r=Sse,i=Ese){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={..._se,width:r.toString(),height:i.toString(),top:a,left:s},u=Tr().toLowerCase();n&&(o=s$(u)?Tse:n),i$(u)&&(e=e||Ase,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[m,b])=>`${g}${m}=${b},`,"");if(Lie(u)&&o!=="_self")return Ise(e||"",o),new Iz(null);const h=window.open(e||"",o,f);tt(h,t,"popup-blocked");try{h.focus()}catch{}return new Iz(h)}function Ise(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const kse="__/auth/handler",Pse="emulator/auth/handler",Dse=encodeURIComponent("fac");async function kz(t,e,n,r,i,a){tt(t.config.authDomain,t,"auth-domain-config-required"),tt(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:jp,eventId:i};if(e instanceof v$){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",tre(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))s[f]=h}if(e instanceof u0){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),u=c?`#${Dse}=${encodeURIComponent(c)}`:"";return`${Ose(t)}?${o0(o).slice(1)}${u}`}function Ose({config:t}){return t.emulator?U2(t,Pse):`https://${t.authDomain}/${kse}`}const mA="webStorageSupport";class Nse{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=E$,this._completeRedirectFn=rse,this._overrideRedirectResult=ese}async _openPopup(e,n,r,i){El(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await kz(e,n,r,JI(),i);return Cse(e,a,W2())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await kz(e,n,r,JI(),i);return jae(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(El(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await wse(e),r=new ase(e);return n.register("authEvent",i=>(tt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mA,{type:mA},i=>{const a=i?.[0]?.[mA];a!==void 0&&n(!!a),Ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=use(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return d$()||a$()||q2()}}const Rse=Nse;var Pz="@firebase/auth",Dz="1.11.1";class Mse{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function jse(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zse(t){Sl(new Ao("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;tt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f$(t)},u=new qie(r,i,a,c);return eae(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Sl(new Ao("auth-internal",e=>{const n=bu(e.getProvider("auth").getImmediate());return(r=>new Mse(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),As(Pz,Dz,jse(t)),As(Pz,Dz,"esm2020")}const Lse=300,Vse=B8("authIdTokenMaxAge")||Lse;let Oz=null;const Bse=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Vse)return;const i=n?.token;Oz!==i&&(Oz=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Fse(t=B2()){const e=Mp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Jie(t,{popupRedirectResolver:Rse,persistence:[Gae,Nae,E$]}),r=B8("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=Bse(a.toString());Iae(n,s,()=>s(n.currentUser)),Cae(n,o=>s(o))}}const i=L8("auth");return i&&tae(n,`http://${i}`),n}function Use(){return document.getElementsByTagName("head")?.[0]??document}Gie({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=vo("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",Use().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zse("Browser");var Nz="popstate";function $se(t={}){function e(i,a){let{pathname:s="/",search:o="",hash:c=""}=df(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),nk("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof a=="string"?a:dv(a))}function r(i,a){Wa(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return Gse(e,n,r,t)}function jn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qse(){return Math.random().toString(36).substring(2,10)}function Rz(t,e){return{usr:t.state,key:t.key,idx:e}}function nk(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?df(e):e,state:n,key:e&&e.key||r||qse()}}function dv({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function df(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Gse(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,u=f();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function f(){return(s.state||{idx:null}).idx}function h(){o="POP";let w=f(),S=w==null?null:w-u;u=w,c&&c({action:o,location:x.location,delta:S})}function g(w,S){o="PUSH";let T=nk(x.location,w,S);n&&n(T,w),u=f()+1;let I=Rz(T,u),N=x.createHref(T);try{s.pushState(I,"",N)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(N)}a&&c&&c({action:o,location:x.location,delta:1})}function m(w,S){o="REPLACE";let T=nk(x.location,w,S);n&&n(T,w),u=f();let I=Rz(T,u),N=x.createHref(T);s.replaceState(I,"",N),a&&c&&c({action:o,location:x.location,delta:0})}function b(w){return Hse(w)}let x={get action(){return o},get location(){return t(i,s)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Nz,h),c=w,()=>{i.removeEventListener(Nz,h),c=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let S=b(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:m,go(w){return s.go(w)}};return x}function Hse(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),jn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:dv(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function D$(t,e,n="/"){return Kse(t,e,n,!1)}function Kse(t,e,n,r){let i=typeof e=="string"?df(e):e,a=Tl(i.pathname||"/",n);if(a==null)return null;let s=O$(t);Wse(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=aoe(a);o=roe(s[c],u,r)}return o}function O$(t,e=[],n=[],r="",i=!1){let a=(s,o,c=i,u)=>{let f={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;jn(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let h=ml([r,f.relativePath]),g=n.concat(f);s.children&&s.children.length>0&&(jn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),O$(s.children,e,g,h,c)),!(s.path==null&&!s.index)&&e.push({path:h,score:toe(h,s.index),routesMeta:g})};return t.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let c of N$(s.path))a(s,o,!0,c)}),e}function N$(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=N$(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function Wse(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:noe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Yse=/^:[\w-]+$/,Xse=3,Qse=2,Zse=1,Jse=10,eoe=-2,Mz=t=>t==="*";function toe(t,e){let n=t.split("/"),r=n.length;return n.some(Mz)&&(r+=eoe),e&&(r+=Qse),n.filter(i=>!Mz(i)).reduce((i,a)=>i+(Yse.test(a)?Xse:a===""?Zse:Jse),r)}function noe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function roe(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=b1({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),g=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=b1({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:ml([a,h.pathname]),pathnameBase:coe(ml([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=ml([a,h.pathnameBase]))}return s}function b1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=ioe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:h},g)=>{if(f==="*"){let b=o[g]||"";s=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const m=o[g];return h&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function ioe(t,e=!1,n=!0){Wa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function aoe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wa(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Tl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var soe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function ooe(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?df(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=jz(n.substring(1),"/"):a=jz(n,e)):a=e,{pathname:a,search:uoe(r),hash:doe(i)}}function jz(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function vA(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function loe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function R$(t){let e=loe(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function M$(t,e,n,r=!1){let i;typeof t=="string"?i=df(t):(i={...t},jn(!i.pathname||!i.pathname.includes("?"),vA("?","pathname","search",i)),jn(!i.pathname||!i.pathname.includes("#"),vA("#","pathname","hash",i)),jn(!i.search||!i.search.includes("#"),vA("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}o=h>=0?e[h]:"/"}let c=ooe(i,o),u=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var ml=t=>t.join("/").replace(/\/\/+/g,"/"),coe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uoe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,doe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,foe=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function hoe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function poe(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var j$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function z$(t,e){let n=t;if(typeof n!="string"||!soe.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(j$)try{let a=new URL(window.location.href),s=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=Tl(s.pathname,e);s.origin===a.origin&&o!=null?n=o+s.search+s.hash:i=!0}catch{Wa(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var L$=["POST","PUT","PATCH","DELETE"];new Set(L$);var goe=["GET",...L$];new Set(goe);var zp=A.createContext(null);zp.displayName="DataRouter";var f_=A.createContext(null);f_.displayName="DataRouterState";var moe=A.createContext(!1),V$=A.createContext({isTransitioning:!1});V$.displayName="ViewTransition";var voe=A.createContext(new Map);voe.displayName="Fetchers";var yoe=A.createContext(null);yoe.displayName="Await";var ts=A.createContext(null);ts.displayName="Navigation";var f0=A.createContext(null);f0.displayName="Location";var Ro=A.createContext({outlet:null,matches:[],isDataRoute:!1});Ro.displayName="Route";var X2=A.createContext(null);X2.displayName="RouteError";var B$="REACT_ROUTER_ERROR",boe="REDIRECT",xoe="ROUTE_ERROR_RESPONSE";function woe(t){if(t.startsWith(`${B$}:${boe}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function _oe(t){if(t.startsWith(`${B$}:${xoe}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new foe(e.status,e.statusText,e.data)}catch{}}function Soe(t,{relative:e}={}){jn(h0(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(ts),{hash:i,pathname:a,search:s}=p0(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:ml([n,a])),r.createHref({pathname:o,search:s,hash:i})}function h0(){return A.useContext(f0)!=null}function Ls(){return jn(h0(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(f0).location}var F$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function U$(t){A.useContext(ts).static||A.useLayoutEffect(t)}function ns(){let{isDataRoute:t}=A.useContext(Ro);return t?zoe():Eoe()}function Eoe(){jn(h0(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(zp),{basename:e,navigator:n}=A.useContext(ts),{matches:r}=A.useContext(Ro),{pathname:i}=Ls(),a=JSON.stringify(R$(r)),s=A.useRef(!1);return U$(()=>{s.current=!0}),A.useCallback((c,u={})=>{if(Wa(s.current,F$),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=M$(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ml([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,a,i,t])}A.createContext(null);function Toe(){let{matches:t}=A.useContext(Ro),e=t[t.length-1];return e?e.params:{}}function p0(t,{relative:e}={}){let{matches:n}=A.useContext(Ro),{pathname:r}=Ls(),i=JSON.stringify(R$(n));return A.useMemo(()=>M$(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Aoe(t,e){return $$(t,e)}function $$(t,e,n,r,i){jn(h0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(ts),{matches:s}=A.useContext(Ro),o=s[s.length-1],c=o?o.params:{},u=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let T=h&&h.path||"";G$(u,!h||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let g=Ls(),m;if(e){let T=typeof e=="string"?df(e):e;jn(f==="/"||T.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${T.pathname}" was given in the \`location\` prop.`),m=T}else m=g;let b=m.pathname||"/",x=b;if(f!=="/"){let T=f.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let w=D$(t,{pathname:x});Wa(h||w!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Wa(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=Doe(w&&w.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:ml([f,a.encodeLocation?a.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:ml([f,a.encodeLocation?a.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),s,n,r,i);return e&&S?A.createElement(f0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},S):S}function Coe(){let t=joe(),e=hoe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,s)}var Ioe=A.createElement(Coe,null),q$=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=_oe(t.digest);n&&(t=n)}let e=t!==void 0?A.createElement(Ro.Provider,{value:this.props.routeContext},A.createElement(X2.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?A.createElement(koe,{error:t},e):e}};q$.contextType=moe;var yA=new WeakMap;function koe({children:t,error:e}){let{basename:n}=A.useContext(ts);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=woe(e.digest);if(r){let i=yA.get(e);if(i)throw i;let a=z$(r.location,n);if(j$&&!yA.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw yA.set(e,s),s}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function Poe({routeContext:t,match:e,children:n}){let r=A.useContext(zp);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(Ro.Provider,{value:t},n)}function Doe(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n?.errors;if(s!=null){let f=a.findIndex(h=>h.route.id&&s?.[h.route.id]!==void 0);jn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,c=-1;if(n)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:m}=n,b=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||b){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let u=n&&r?(f,h)=>{r(f,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:poe(n.matches),errorInfo:h})}:void 0;return a.reduceRight((f,h,g)=>{let m,b=!1,x=null,w=null;n&&(m=s&&h.route.id?s[h.route.id]:void 0,x=h.route.errorElement||Ioe,o&&(c<0&&g===0?(G$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):c===g&&(b=!0,w=h.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,g+1)),T=()=>{let I;return m?I=x:b?I=w:h.route.Component?I=A.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=f,A.createElement(Poe,{match:h,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?A.createElement(q$,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:u}):T()},null)}function Q2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ooe(t){let e=A.useContext(zp);return jn(e,Q2(t)),e}function Noe(t){let e=A.useContext(f_);return jn(e,Q2(t)),e}function Roe(t){let e=A.useContext(Ro);return jn(e,Q2(t)),e}function Z2(t){let e=Roe(t),n=e.matches[e.matches.length-1];return jn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Moe(){return Z2("useRouteId")}function joe(){let t=A.useContext(X2),e=Noe("useRouteError"),n=Z2("useRouteError");return t!==void 0?t:e.errors?.[n]}function zoe(){let{router:t}=Ooe("useNavigate"),e=Z2("useNavigate"),n=A.useRef(!1);return U$(()=>{n.current=!0}),A.useCallback(async(i,a={})=>{Wa(n.current,F$),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var zz={};function G$(t,e,n){!e&&!zz[t]&&(zz[t]=!0,Wa(!1,n))}A.memo(Loe);function Loe({routes:t,future:e,state:n,onError:r}){return $$(t,void 0,n,r,e)}function so(t){jn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Voe({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){jn(!h0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof n=="string"&&(n=df(n));let{pathname:u="/",search:f="",hash:h="",state:g=null,key:m="default"}=n,b=A.useMemo(()=>{let x=Tl(u,o);return x==null?null:{location:{pathname:x,search:f,hash:h,state:g,key:m},navigationType:r}},[o,u,f,h,g,m,r]);return Wa(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(ts.Provider,{value:c},A.createElement(f0.Provider,{children:e,value:b}))}function Boe({children:t,location:e}){return Aoe(rk(t),e)}function rk(t,e=[]){let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let a=[...e,i];if(r.type===A.Fragment){n.push.apply(n,rk(r.props.children,a));return}jn(r.type===so,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),jn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=rk(r.props.children,a)),n.push(s)}),n}var zx="get",Lx="application/x-www-form-urlencoded";function h_(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function Foe(t){return h_(t)&&t.tagName.toLowerCase()==="button"}function Uoe(t){return h_(t)&&t.tagName.toLowerCase()==="form"}function $oe(t){return h_(t)&&t.tagName.toLowerCase()==="input"}function qoe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Goe(t,e){return t.button===0&&(!e||e==="_self")&&!qoe(t)}function ik(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Hoe(t,e){let n=ik(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var Lb=null;function Koe(){if(Lb===null)try{new FormData(document.createElement("form"),0),Lb=!1}catch{Lb=!0}return Lb}var Woe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bA(t){return t!=null&&!Woe.has(t)?(Wa(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Lx}"`),null):t}function Yoe(t,e){let n,r,i,a,s;if(Uoe(t)){let o=t.getAttribute("action");r=o?Tl(o,e):null,n=t.getAttribute("method")||zx,i=bA(t.getAttribute("enctype"))||Lx,a=new FormData(t)}else if(Foe(t)||$oe(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?Tl(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||zx,i=bA(t.getAttribute("formenctype"))||bA(o.getAttribute("enctype"))||Lx,a=new FormData(o,t),!Koe()){let{name:u,type:f,value:h}=t;if(f==="image"){let g=u?`${u}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else u&&a.append(u,h)}}else{if(h_(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=zx,r=null,i=Lx,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function J2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xoe(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&Tl(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function Qoe(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Zoe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Joe(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await Qoe(a,n);return s.links?s.links():[]}return[]}));return rle(r.flat(1).filter(Zoe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Lz(t,e,n,r,i,a){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>n[u].pathname!==c.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==c.params["*"];return a==="assets"?e.filter((c,u)=>s(c,u)||o(c,u)):a==="data"?e.filter((c,u)=>{let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function ele(t,e,{includeHydrateFallback:n}={}){return tle(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function tle(t){return[...new Set(t)]}function nle(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function rle(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(nle(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function H$(){let t=A.useContext(zp);return J2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ile(){let t=A.useContext(f_);return J2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var eD=A.createContext(void 0);eD.displayName="FrameworkContext";function K$(){let t=A.useContext(eD);return J2(t,"You must render this element inside a <HydratedRouter> element"),t}function ale(t,e){let n=A.useContext(eD),[r,i]=A.useState(!1),[a,s]=A.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:h}=e,g=A.useRef(null);A.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=S=>{S.forEach(T=>{s(T.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[t]),A.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let m=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,g,{}]:[a,g,{onFocus:cm(o,m),onBlur:cm(c,b),onMouseEnter:cm(u,m),onMouseLeave:cm(f,b),onTouchStart:cm(h,m)}]:[!1,g,{}]}function cm(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function sle({page:t,...e}){let{router:n}=H$(),r=A.useMemo(()=>D$(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(lle,{page:t,matches:r,...e}):null}function ole(t){let{manifest:e,routeModules:n}=K$(),[r,i]=A.useState([]);return A.useEffect(()=>{let a=!1;return Joe(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function lle({page:t,matches:e,...n}){let r=Ls(),{future:i,manifest:a,routeModules:s}=K$(),{basename:o}=H$(),{loaderData:c,matches:u}=ile(),f=A.useMemo(()=>Lz(t,e,u,a,r,"data"),[t,e,u,a,r]),h=A.useMemo(()=>Lz(t,e,u,a,r,"assets"),[t,e,u,a,r]),g=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(T=>{let I=a.routes[T.route.id];!I||!I.hasLoader||(!f.some(N=>N.route.id===T.route.id)&&T.route.id in c&&s[T.route.id]?.shouldRevalidate||I.hasClientLoader?w=!0:x.add(T.route.id))}),x.size===0)return[];let S=Xoe(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return w&&x.size>0&&S.searchParams.set("_routes",e.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[o,i.unstable_trailingSlashAwareDataRequests,c,r,a,f,e,t,s]),m=A.useMemo(()=>ele(h,a),[h,a]),b=ole(h);return A.createElement(A.Fragment,null,g.map(x=>A.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),m.map(x=>A.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),b.map(({key:x,link:w})=>A.createElement("link",{key:x,nonce:n.nonce,...w,crossOrigin:w.crossOrigin??n.crossOrigin})))}function cle(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ule=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ule&&(window.__reactRouterVersion="7.13.0")}catch{}function dle({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=A.useRef();i.current==null&&(i.current=$se({window:r,v5Compat:!0}));let a=i.current,[s,o]=A.useState({action:a.action,location:a.location}),c=A.useCallback(u=>{n===!1?o(u):A.startTransition(()=>o(u))},[n]);return A.useLayoutEffect(()=>a.listen(c),[a,c]),A.createElement(Voe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}var W$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y$=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...m},b){let{basename:x,unstable_useTransitions:w}=A.useContext(ts),S=typeof u=="string"&&W$.test(u),T=z$(u,x);u=T.to;let I=Soe(u,{relative:i}),[N,O,P]=ale(r,m),k=gle(u,{replace:s,state:o,target:c,preventScrollReset:f,relative:i,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:w});function D(z){e&&e(z),z.defaultPrevented||k(z)}let R=A.createElement("a",{...m,...P,href:T.absoluteURL||I,onClick:T.isExternal||a?e:D,ref:cle(b,O),target:c,"data-discover":!S&&n==="render"?"true":void 0});return N&&!S?A.createElement(A.Fragment,null,R,A.createElement(sle,{page:I})):R});Y$.displayName="Link";var fle=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...u},f){let h=p0(s,{relative:u.relative}),g=Ls(),m=A.useContext(f_),{navigator:b,basename:x}=A.useContext(ts),w=m!=null&&xle(h)&&o===!0,S=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,T=g.pathname,I=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(T=T.toLowerCase(),I=I?I.toLowerCase():null,S=S.toLowerCase()),I&&x&&(I=Tl(I,x)||I);const N=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let O=T===S||!i&&T.startsWith(S)&&T.charAt(N)==="/",P=I!=null&&(I===S||!i&&I.startsWith(S)&&I.charAt(S.length)==="/"),k={isActive:O,isPending:P,isTransitioning:w},D=O?e:void 0,R;typeof r=="function"?R=r(k):R=[r,O?"active":null,P?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let z=typeof a=="function"?a(k):a;return A.createElement(Y$,{...u,"aria-current":D,className:R,ref:f,style:z,to:s,viewTransition:o},typeof c=="function"?c(k):c)});fle.displayName="NavLink";var hle=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=zx,action:o,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...m},b)=>{let{unstable_useTransitions:x}=A.useContext(ts),w=yle(),S=ble(o,{relative:u}),T=s.toLowerCase()==="get"?"get":"post",I=typeof o=="string"&&W$.test(o),N=O=>{if(c&&c(O),O.defaultPrevented)return;O.preventDefault();let P=O.nativeEvent.submitter,k=P?.getAttribute("formmethod")||s,D=()=>w(P||O.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:i,state:a,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g});x&&n!==!1?A.startTransition(()=>D()):D()};return A.createElement("form",{ref:b,method:T,action:S,onSubmit:r?c:N,...m,"data-discover":!I&&t==="render"?"true":void 0})});hle.displayName="Form";function ple(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function X$(t){let e=A.useContext(zp);return jn(e,ple(t)),e}function gle(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=ns(),f=Ls(),h=p0(t,{relative:a});return A.useCallback(g=>{if(Goe(g,e)){g.preventDefault();let m=n!==void 0?n:dv(f)===dv(h),b=()=>u(t,{replace:m,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});c?A.startTransition(()=>b()):b()}},[f,u,h,n,r,e,t,i,a,s,o,c])}function Q$(t){Wa(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(ik(t)),n=A.useRef(!1),r=Ls(),i=A.useMemo(()=>Hoe(r.search,n.current?null:e.current),[r.search]),a=ns(),s=A.useCallback((o,c)=>{const u=ik(typeof o=="function"?o(new URLSearchParams(i)):o);n.current=!0,a("?"+u,c)},[a,i]);return[i,s]}var mle=0,vle=()=>`__${String(++mle)}__`;function yle(){let{router:t}=X$("useSubmit"),{basename:e}=A.useContext(ts),n=Moe(),r=t.fetch,i=t.navigate;return A.useCallback(async(a,s={})=>{let{action:o,method:c,encType:u,formData:f,body:h}=Yoe(a,e);if(s.navigate===!1){let g=s.fetcherKey||vle();await r(g,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,n])}function ble(t,{relative:e}={}){let{basename:n}=A.useContext(ts),r=A.useContext(Ro);jn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...p0(t||".",{relative:e})},s=Ls();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let f=o.toString();a.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:ml([n,a.pathname])),dv(a)}function xle(t,{relative:e}={}){let n=A.useContext(V$);jn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=X$("useViewTransitionState"),i=p0(t,{relative:e});if(!n.isTransitioning)return!1;let a=Tl(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Tl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return b1(i.pathname,s)!=null||b1(i.pathname,a)!=null}var Z$=R8();const wle=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_le=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Vz=t=>{const e=_le(t);return e.charAt(0).toUpperCase()+e.slice(1)},J$=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Sle=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Ele={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Tle=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>A.createElement("svg",{ref:c,...Ele,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:J$("lucide",i),...!a&&!Sle(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,f])=>A.createElement(u,f)),...Array.isArray(a)?a:[a]]));const at=(t,e)=>{const n=A.forwardRef(({className:r,...i},a)=>A.createElement(Tle,{ref:a,iconNode:e,className:J$(`lucide-${wle(Vz(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Vz(t),n};const Ale=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Al=at("arrow-left",Ale);const Cle=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Ile=at("arrow-right-left",Cle);const kle=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ple=at("arrow-right",kle);const Dle=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ole=at("calendar",Dle);const Nle=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],e7=at("chart-column",Nle);const Rle=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Mle=at("chart-pie",Rle);const jle=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],zle=at("check",jle);const Lle=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Vle=at("chevron-left",Lle);const Ble=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],oo=at("chevron-right",Ble);const Fle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],Ule=at("circle-arrow-down",Fle);const $le=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],qle=at("circle-arrow-up",$le);const Gle=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],x1=at("circle-check-big",Gle);const Hle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],al=at("circle-check",Hle);const Kle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Bz=at("circle",Kle);const Wle=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Fz=at("dollar-sign",Wle);const Yle=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Uz=at("download",Yle);const Xle=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Qle=at("ellipsis",Xle);const Zle=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],t7=at("eye-off",Zle);const Jle=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],n7=at("eye",Jle);const ece=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],tce=at("file-text",ece);const nce=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],rce=at("folder",nce);const ice=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ace=at("funnel",ice);const sce=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],fv=at("grip-vertical",sce);const oce=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],lce=at("house",oce);const cce=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],uce=at("list",cce);const dce=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],$z=at("loader",dce);const fce=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],qz=at("lock",fce);const hce=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],pce=at("log-out",hce);const gce=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ak=at("mail",gce);const mce=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Gz=at("mic",mce);const vce=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],yce=at("pause",vce);const bce=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xce=at("pen",bce);const wce=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],g0=at("piggy-bank",wce);const _ce=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],m0=at("plus",_ce);const Sce=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Xh=at("refresh-cw",Sce);const Ece=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Tce=at("rotate-ccw",Ece);const Ace=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Cce=at("search",Ace);const Ice=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kce=at("settings",Ice);const Pce=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],hv=at("sparkles",Pce);const Dce=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],Oce=at("tags",Dce);const Nce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Rce=at("target",Nce);const Mce=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],w1=at("trash-2",Mce);const jce=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],r7=at("trash",jce);const zce=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],_1=at("trending-up",zce);const Lce=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$h=at("triangle-alert",Lce);const Vce=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Bce=at("undo-2",Vce);const Fce=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Uce=at("upload",Fce);const $ce=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],qce=at("user-plus",$ce);const Gce=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],p_=at("wallet",Gce);const Hce=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],g_=at("x",Hce),Hz=t=>{let e;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const g=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(m=>m(e,g))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,i,o);return o},Kce=(t=>t?Hz(t):Hz),Wce=t=>t;function Yce(t,e=Wce){const n=xd.useSyncExternalStore(t.subscribe,xd.useCallback(()=>e(t.getState()),[t,e]),xd.useCallback(()=>e(t.getInitialState()),[t,e]));return xd.useDebugValue(n),n}const Kz=t=>{const e=Kce(t),n=r=>Yce(e,r);return Object.assign(n,e),n},tD=(t=>t?Kz(t):Kz),Wz={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",VITE_FIREBASE_APP_ID:"1:137454342284:web:0ae73943f9058a4342aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-VMP5DF6273",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app",VITE_RECAPTCHA_ENTERPRISE_SITE_KEY:"6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"},pv=new Map,Vb=t=>{const e=pv.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},Xce=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=pv.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return pv.set(n.name,i),{type:"tracked",store:t,...i}},Qce=(t,e)=>{if(e===void 0)return;const n=pv.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&pv.delete(t))},Zce=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(s=>s.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},Jce=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:s,store:o,...c}=e;let u;try{u=(a??(Wz?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return t(n,r,i);const{connection:f,...h}=Xce(o,u,c);let g=!0;i.setState=((x,w,S)=>{const T=n(x,w);if(!g)return T;const I=S===void 0?{type:s||Zce(new Error().stack)||"anonymous"}:typeof S=="string"?{type:S}:S;return o===void 0?(f?.send(I,r()),T):(f?.send({...I,type:`${o}/${I.type}`},{...Vb(c.name),[o]:i.getState()}),T)}),i.devtools={cleanup:()=>{f&&typeof f.unsubscribe=="function"&&f.unsubscribe(),Qce(c.name,o)}};const m=(...x)=>{const w=g;g=!1,n(...x),g=w},b=t(i.setState,r,i);if(h.type==="untracked"?f?.init(b):(h.stores[h.store]=i,f?.init(Object.fromEntries(Object.entries(h.stores).map(([x,w])=>[x,x===h.store?b:w.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let x=!1;const w=i.dispatch;i.dispatch=(...S)=>{(Wz?"production":void 0)!=="production"&&S[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),w(...S)}}return f.subscribe(x=>{var w;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return xA(x.payload,S=>{if(S.type==="__setState"){if(o===void 0){m(S.state);return}Object.keys(S.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const T=S.state[o];if(T==null)return;JSON.stringify(i.getState())!==JSON.stringify(T)&&m(T);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(S)});case"DISPATCH":switch(x.payload.type){case"RESET":return m(b),o===void 0?f?.init(i.getState()):f?.init(Vb(c.name));case"COMMIT":if(o===void 0){f?.init(i.getState());return}return f?.init(Vb(c.name));case"ROLLBACK":return xA(x.state,S=>{if(o===void 0){m(S),f?.init(i.getState());return}m(S[o]),f?.init(Vb(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return xA(x.state,S=>{if(o===void 0){m(S);return}JSON.stringify(i.getState())!==JSON.stringify(S[o])&&m(S[o])});case"IMPORT_STATE":{const{nextLiftedState:S}=x.payload,T=(w=S.computedStates.slice(-1)[0])==null?void 0:w.state;if(!T)return;m(o===void 0?T:T[o]),f?.send(null,S);return}case"PAUSE_RECORDING":return g=!g}return}}),b},eue=Jce,xA=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function tue(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const s=c=>c===null?null:JSON.parse(c,void 0),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const sk=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return sk(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return sk(r)(n)}}}},nue=(t,e)=>(n,r,i)=>{let a={storage:tue(()=>localStorage),partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...e},s=!1;const o=new Set,c=new Set;let u=a.storage;if(!u)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...x)},r,i);const f=()=>{const x=a.partialize({...r()});return u.setItem(a.name,{state:x,version:a.version})},h=i.setState;i.setState=(x,w)=>(h(x,w),f());const g=t((...x)=>(n(...x),f()),r,i);i.getInitialState=()=>g;let m;const b=()=>{var x,w;if(!u)return;s=!1,o.forEach(T=>{var I;return T((I=r())!=null?I:g)});const S=((w=a.onRehydrateStorage)==null?void 0:w.call(a,(x=r())!=null?x:g))||void 0;return sk(u.getItem.bind(u))(a.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==a.version){if(a.migrate){const I=a.migrate(T.state,T.version);return I instanceof Promise?I.then(N=>[!0,N]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var I;const[N,O]=T;if(m=a.merge(O,(I=r())!=null?I:g),n(m,!0),N)return f()}).then(()=>{S?.(m,void 0),m=r(),s=!0,c.forEach(T=>T(m))}).catch(T=>{S?.(void 0,T)})};return i.persist={setOptions:x=>{a={...a,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>s,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},a.skipHydration||b(),m||g},i7=nue;var rue="firebase",iue="12.6.0";As(rue,iue,"app");var Yz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Jc,a7;(function(){var t;function e(k,D){function R(){}R.prototype=D.prototype,k.F=D.prototype,k.prototype=new R,k.prototype.constructor=k,k.D=function(z,L,B){for(var j=Array(arguments.length-2),H=2;H<arguments.length;H++)j[H-2]=arguments[H];return D.prototype[L].apply(z,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,D,R){R||(R=0);const z=Array(16);if(typeof D=="string")for(var L=0;L<16;++L)z[L]=D.charCodeAt(R++)|D.charCodeAt(R++)<<8|D.charCodeAt(R++)<<16|D.charCodeAt(R++)<<24;else for(L=0;L<16;++L)z[L]=D[R++]|D[R++]<<8|D[R++]<<16|D[R++]<<24;D=k.g[0],R=k.g[1],L=k.g[2];let B=k.g[3],j;j=D+(B^R&(L^B))+z[0]+3614090360&4294967295,D=R+(j<<7&4294967295|j>>>25),j=B+(L^D&(R^L))+z[1]+3905402710&4294967295,B=D+(j<<12&4294967295|j>>>20),j=L+(R^B&(D^R))+z[2]+606105819&4294967295,L=B+(j<<17&4294967295|j>>>15),j=R+(D^L&(B^D))+z[3]+3250441966&4294967295,R=L+(j<<22&4294967295|j>>>10),j=D+(B^R&(L^B))+z[4]+4118548399&4294967295,D=R+(j<<7&4294967295|j>>>25),j=B+(L^D&(R^L))+z[5]+1200080426&4294967295,B=D+(j<<12&4294967295|j>>>20),j=L+(R^B&(D^R))+z[6]+2821735955&4294967295,L=B+(j<<17&4294967295|j>>>15),j=R+(D^L&(B^D))+z[7]+4249261313&4294967295,R=L+(j<<22&4294967295|j>>>10),j=D+(B^R&(L^B))+z[8]+1770035416&4294967295,D=R+(j<<7&4294967295|j>>>25),j=B+(L^D&(R^L))+z[9]+2336552879&4294967295,B=D+(j<<12&4294967295|j>>>20),j=L+(R^B&(D^R))+z[10]+4294925233&4294967295,L=B+(j<<17&4294967295|j>>>15),j=R+(D^L&(B^D))+z[11]+2304563134&4294967295,R=L+(j<<22&4294967295|j>>>10),j=D+(B^R&(L^B))+z[12]+1804603682&4294967295,D=R+(j<<7&4294967295|j>>>25),j=B+(L^D&(R^L))+z[13]+4254626195&4294967295,B=D+(j<<12&4294967295|j>>>20),j=L+(R^B&(D^R))+z[14]+2792965006&4294967295,L=B+(j<<17&4294967295|j>>>15),j=R+(D^L&(B^D))+z[15]+1236535329&4294967295,R=L+(j<<22&4294967295|j>>>10),j=D+(L^B&(R^L))+z[1]+4129170786&4294967295,D=R+(j<<5&4294967295|j>>>27),j=B+(R^L&(D^R))+z[6]+3225465664&4294967295,B=D+(j<<9&4294967295|j>>>23),j=L+(D^R&(B^D))+z[11]+643717713&4294967295,L=B+(j<<14&4294967295|j>>>18),j=R+(B^D&(L^B))+z[0]+3921069994&4294967295,R=L+(j<<20&4294967295|j>>>12),j=D+(L^B&(R^L))+z[5]+3593408605&4294967295,D=R+(j<<5&4294967295|j>>>27),j=B+(R^L&(D^R))+z[10]+38016083&4294967295,B=D+(j<<9&4294967295|j>>>23),j=L+(D^R&(B^D))+z[15]+3634488961&4294967295,L=B+(j<<14&4294967295|j>>>18),j=R+(B^D&(L^B))+z[4]+3889429448&4294967295,R=L+(j<<20&4294967295|j>>>12),j=D+(L^B&(R^L))+z[9]+568446438&4294967295,D=R+(j<<5&4294967295|j>>>27),j=B+(R^L&(D^R))+z[14]+3275163606&4294967295,B=D+(j<<9&4294967295|j>>>23),j=L+(D^R&(B^D))+z[3]+4107603335&4294967295,L=B+(j<<14&4294967295|j>>>18),j=R+(B^D&(L^B))+z[8]+1163531501&4294967295,R=L+(j<<20&4294967295|j>>>12),j=D+(L^B&(R^L))+z[13]+2850285829&4294967295,D=R+(j<<5&4294967295|j>>>27),j=B+(R^L&(D^R))+z[2]+4243563512&4294967295,B=D+(j<<9&4294967295|j>>>23),j=L+(D^R&(B^D))+z[7]+1735328473&4294967295,L=B+(j<<14&4294967295|j>>>18),j=R+(B^D&(L^B))+z[12]+2368359562&4294967295,R=L+(j<<20&4294967295|j>>>12),j=D+(R^L^B)+z[5]+4294588738&4294967295,D=R+(j<<4&4294967295|j>>>28),j=B+(D^R^L)+z[8]+2272392833&4294967295,B=D+(j<<11&4294967295|j>>>21),j=L+(B^D^R)+z[11]+1839030562&4294967295,L=B+(j<<16&4294967295|j>>>16),j=R+(L^B^D)+z[14]+4259657740&4294967295,R=L+(j<<23&4294967295|j>>>9),j=D+(R^L^B)+z[1]+2763975236&4294967295,D=R+(j<<4&4294967295|j>>>28),j=B+(D^R^L)+z[4]+1272893353&4294967295,B=D+(j<<11&4294967295|j>>>21),j=L+(B^D^R)+z[7]+4139469664&4294967295,L=B+(j<<16&4294967295|j>>>16),j=R+(L^B^D)+z[10]+3200236656&4294967295,R=L+(j<<23&4294967295|j>>>9),j=D+(R^L^B)+z[13]+681279174&4294967295,D=R+(j<<4&4294967295|j>>>28),j=B+(D^R^L)+z[0]+3936430074&4294967295,B=D+(j<<11&4294967295|j>>>21),j=L+(B^D^R)+z[3]+3572445317&4294967295,L=B+(j<<16&4294967295|j>>>16),j=R+(L^B^D)+z[6]+76029189&4294967295,R=L+(j<<23&4294967295|j>>>9),j=D+(R^L^B)+z[9]+3654602809&4294967295,D=R+(j<<4&4294967295|j>>>28),j=B+(D^R^L)+z[12]+3873151461&4294967295,B=D+(j<<11&4294967295|j>>>21),j=L+(B^D^R)+z[15]+530742520&4294967295,L=B+(j<<16&4294967295|j>>>16),j=R+(L^B^D)+z[2]+3299628645&4294967295,R=L+(j<<23&4294967295|j>>>9),j=D+(L^(R|~B))+z[0]+4096336452&4294967295,D=R+(j<<6&4294967295|j>>>26),j=B+(R^(D|~L))+z[7]+1126891415&4294967295,B=D+(j<<10&4294967295|j>>>22),j=L+(D^(B|~R))+z[14]+2878612391&4294967295,L=B+(j<<15&4294967295|j>>>17),j=R+(B^(L|~D))+z[5]+4237533241&4294967295,R=L+(j<<21&4294967295|j>>>11),j=D+(L^(R|~B))+z[12]+1700485571&4294967295,D=R+(j<<6&4294967295|j>>>26),j=B+(R^(D|~L))+z[3]+2399980690&4294967295,B=D+(j<<10&4294967295|j>>>22),j=L+(D^(B|~R))+z[10]+4293915773&4294967295,L=B+(j<<15&4294967295|j>>>17),j=R+(B^(L|~D))+z[1]+2240044497&4294967295,R=L+(j<<21&4294967295|j>>>11),j=D+(L^(R|~B))+z[8]+1873313359&4294967295,D=R+(j<<6&4294967295|j>>>26),j=B+(R^(D|~L))+z[15]+4264355552&4294967295,B=D+(j<<10&4294967295|j>>>22),j=L+(D^(B|~R))+z[6]+2734768916&4294967295,L=B+(j<<15&4294967295|j>>>17),j=R+(B^(L|~D))+z[13]+1309151649&4294967295,R=L+(j<<21&4294967295|j>>>11),j=D+(L^(R|~B))+z[4]+4149444226&4294967295,D=R+(j<<6&4294967295|j>>>26),j=B+(R^(D|~L))+z[11]+3174756917&4294967295,B=D+(j<<10&4294967295|j>>>22),j=L+(D^(B|~R))+z[2]+718787259&4294967295,L=B+(j<<15&4294967295|j>>>17),j=R+(B^(L|~D))+z[9]+3951481745&4294967295,k.g[0]=k.g[0]+D&4294967295,k.g[1]=k.g[1]+(L+(j<<21&4294967295|j>>>11))&4294967295,k.g[2]=k.g[2]+L&4294967295,k.g[3]=k.g[3]+B&4294967295}r.prototype.v=function(k,D){D===void 0&&(D=k.length);const R=D-this.blockSize,z=this.C;let L=this.h,B=0;for(;B<D;){if(L==0)for(;B<=R;)i(this,k,B),B+=this.blockSize;if(typeof k=="string"){for(;B<D;)if(z[L++]=k.charCodeAt(B++),L==this.blockSize){i(this,z),L=0;break}}else for(;B<D;)if(z[L++]=k[B++],L==this.blockSize){i(this,z),L=0;break}}this.h=L,this.o+=D},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var D=1;D<k.length-8;++D)k[D]=0;D=this.o*8;for(var R=k.length-8;R<k.length;++R)k[R]=D&255,D/=256;for(this.v(k),k=Array(16),D=0,R=0;R<4;++R)for(let z=0;z<32;z+=8)k[D++]=this.g[R]>>>z&255;return k};function a(k,D){var R=o;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=D(k)}function s(k,D){this.h=D;const R=[];let z=!0;for(let L=k.length-1;L>=0;L--){const B=k[L]|0;z&&B==D||(R[L]=B,z=!1)}this.g=R}var o={};function c(k){return-128<=k&&k<128?a(k,function(D){return new s([D|0],D<0?-1:0)}):new s([k|0],k<0?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return h;if(k<0)return w(u(-k));const D=[];let R=1;for(let z=0;k>=R;z++)D[z]=k/R|0,R*=4294967296;return new s(D,0)}function f(k,D){if(k.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(k.charAt(0)=="-")return w(f(k.substring(1),D));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=u(Math.pow(D,8));let z=h;for(let B=0;B<k.length;B+=8){var L=Math.min(8,k.length-B);const j=parseInt(k.substring(B,B+L),D);L<8?(L=u(Math.pow(D,L)),z=z.j(L).add(u(j))):(z=z.j(R),z=z.add(u(j)))}return z}var h=c(0),g=c(1),m=c(16777216);t=s.prototype,t.m=function(){if(x(this))return-w(this).m();let k=0,D=1;for(let R=0;R<this.g.length;R++){const z=this.i(R);k+=(z>=0?z:4294967296+z)*D,D*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(b(this))return"0";if(x(this))return"-"+w(this).toString(k);const D=u(Math.pow(k,6));var R=this;let z="";for(;;){const L=N(R,D).g;R=S(R,L.j(D));let B=((R.g.length>0?R.g[0]:R.h)>>>0).toString(k);if(R=L,b(R))return B+z;for(;B.length<6;)B="0"+B;z=B+z}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function b(k){if(k.h!=0)return!1;for(let D=0;D<k.g.length;D++)if(k.g[D]!=0)return!1;return!0}function x(k){return k.h==-1}t.l=function(k){return k=S(this,k),x(k)?-1:b(k)?0:1};function w(k){const D=k.g.length,R=[];for(let z=0;z<D;z++)R[z]=~k.g[z];return new s(R,~k.h).add(g)}t.abs=function(){return x(this)?w(this):this},t.add=function(k){const D=Math.max(this.g.length,k.g.length),R=[];let z=0;for(let L=0;L<=D;L++){let B=z+(this.i(L)&65535)+(k.i(L)&65535),j=(B>>>16)+(this.i(L)>>>16)+(k.i(L)>>>16);z=j>>>16,B&=65535,j&=65535,R[L]=j<<16|B}return new s(R,R[R.length-1]&-2147483648?-1:0)};function S(k,D){return k.add(w(D))}t.j=function(k){if(b(this)||b(k))return h;if(x(this))return x(k)?w(this).j(w(k)):w(w(this).j(k));if(x(k))return w(this.j(w(k)));if(this.l(m)<0&&k.l(m)<0)return u(this.m()*k.m());const D=this.g.length+k.g.length,R=[];for(var z=0;z<2*D;z++)R[z]=0;for(z=0;z<this.g.length;z++)for(let L=0;L<k.g.length;L++){const B=this.i(z)>>>16,j=this.i(z)&65535,H=k.i(L)>>>16,X=k.i(L)&65535;R[2*z+2*L]+=j*X,T(R,2*z+2*L),R[2*z+2*L+1]+=B*X,T(R,2*z+2*L+1),R[2*z+2*L+1]+=j*H,T(R,2*z+2*L+1),R[2*z+2*L+2]+=B*H,T(R,2*z+2*L+2)}for(k=0;k<D;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=D;k<2*D;k++)R[k]=0;return new s(R,0)};function T(k,D){for(;(k[D]&65535)!=k[D];)k[D+1]+=k[D]>>>16,k[D]&=65535,D++}function I(k,D){this.g=k,this.h=D}function N(k,D){if(b(D))throw Error("division by zero");if(b(k))return new I(h,h);if(x(k))return D=N(w(k),D),new I(w(D.g),w(D.h));if(x(D))return D=N(k,w(D)),new I(w(D.g),D.h);if(k.g.length>30){if(x(k)||x(D))throw Error("slowDivide_ only works with positive integers.");for(var R=g,z=D;z.l(k)<=0;)R=O(R),z=O(z);var L=P(R,1),B=P(z,1);for(z=P(z,2),R=P(R,2);!b(z);){var j=B.add(z);j.l(k)<=0&&(L=L.add(R),B=j),z=P(z,1),R=P(R,1)}return D=S(k,L.j(D)),new I(L,D)}for(L=h;k.l(D)>=0;){for(R=Math.max(1,Math.floor(k.m()/D.m())),z=Math.ceil(Math.log(R)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),B=u(R),j=B.j(D);x(j)||j.l(k)>0;)R-=z,B=u(R),j=B.j(D);b(B)&&(B=g),L=L.add(B),k=S(k,j)}return new I(L,k)}t.B=function(k){return N(this,k).h},t.and=function(k){const D=Math.max(this.g.length,k.g.length),R=[];for(let z=0;z<D;z++)R[z]=this.i(z)&k.i(z);return new s(R,this.h&k.h)},t.or=function(k){const D=Math.max(this.g.length,k.g.length),R=[];for(let z=0;z<D;z++)R[z]=this.i(z)|k.i(z);return new s(R,this.h|k.h)},t.xor=function(k){const D=Math.max(this.g.length,k.g.length),R=[];for(let z=0;z<D;z++)R[z]=this.i(z)^k.i(z);return new s(R,this.h^k.h)};function O(k){const D=k.g.length+1,R=[];for(let z=0;z<D;z++)R[z]=k.i(z)<<1|k.i(z-1)>>>31;return new s(R,k.h)}function P(k,D){const R=D>>5;D%=32;const z=k.g.length-R,L=[];for(let B=0;B<z;B++)L[B]=D>0?k.i(B+R)>>>D|k.i(B+R+1)<<32-D:k.i(B+R);return new s(L,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,a7=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,Jc=s}).apply(typeof Yz<"u"?Yz:typeof self<"u"?self:typeof window<"u"?window:{});var Bb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var s7,Cm,o7,Vx,ok,l7,c7,u7;(function(){var t,e=Object.defineProperty;function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bb=="object"&&Bb];for(var M=0;M<_.length;++M){var F=_[M];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function i(_,M){if(M)e:{var F=r;_=_.split(".");for(var G=0;G<_.length-1;G++){var pe=_[G];if(!(pe in F))break e;F=F[pe]}_=_[_.length-1],G=F[_],M=M(G),M!=G&&M!=null&&e(F,_,{configurable:!0,writable:!0,value:M})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(M){var F=[],G;for(G in M)Object.prototype.hasOwnProperty.call(M,G)&&F.push([G,M[G]]);return F}});var a=a||{},s=this||self;function o(_){var M=typeof _;return M=="object"&&_!=null||M=="function"}function c(_,M,F){return _.call.apply(_.bind,arguments)}function u(_,M,F){return u=c,u.apply(null,arguments)}function f(_,M){var F=Array.prototype.slice.call(arguments,1);return function(){var G=F.slice();return G.push.apply(G,arguments),_.apply(this,G)}}function h(_,M){function F(){}F.prototype=M.prototype,_.Z=M.prototype,_.prototype=new F,_.prototype.constructor=_,_.Ob=function(G,pe,be){for(var Me=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)Me[ht-2]=arguments[ht];return M.prototype[pe].apply(G,Me)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function m(_){const M=_.length;if(M>0){const F=Array(M);for(let G=0;G<M;G++)F[G]=_[G];return F}return[]}function b(_,M){for(let G=1;G<arguments.length;G++){const pe=arguments[G];var F=typeof pe;if(F=F!="object"?F:pe?Array.isArray(pe)?"array":F:"null",F=="array"||F=="object"&&typeof pe.length=="number"){F=_.length||0;const be=pe.length||0;_.length=F+be;for(let Me=0;Me<be;Me++)_[F+Me]=pe[Me]}else _.push(pe)}}class x{constructor(M,F){this.i=M,this.j=F,this.h=0,this.g=null}get(){let M;return this.h>0?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function w(_){s.setTimeout(()=>{throw _},0)}function S(){var _=k;let M=null;return _.g&&(M=_.g,_.g=_.g.next,_.g||(_.h=null),M.next=null),M}class T{constructor(){this.h=this.g=null}add(M,F){const G=I.get();G.set(M,F),this.h?this.h.next=G:this.g=G,this.h=G}}var I=new x(()=>new N,_=>_.reset());class N{constructor(){this.next=this.g=this.h=null}set(M,F){this.h=M,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let O,P=!1,k=new T,D=()=>{const _=Promise.resolve(void 0);O=()=>{_.then(R)}};function R(){for(var _;_=S();){try{_.h.call(_.g)}catch(F){w(F)}var M=I;M.j(_),M.h<100&&(M.h++,_.next=M.g,M.g=_)}P=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(_,M){this.type=_,this.g=this.target=M,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var _=!1,M=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const F=()=>{};s.addEventListener("test",F,M),s.removeEventListener("test",F,M)}catch{}return _})();function j(_){return/^[\s\xa0]*$/.test(_)}function H(_,M){L.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,M)}h(H,L),H.prototype.init=function(_,M){const F=this.type=_.type,G=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=M,M=_.relatedTarget,M||(F=="mouseover"?M=_.fromElement:F=="mouseout"&&(M=_.toElement)),this.relatedTarget=M,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&H.Z.h.call(this)},H.prototype.h=function(){H.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var X="closure_listenable_"+(Math.random()*1e6|0),q=0;function W(_,M,F,G,pe){this.listener=_,this.proxy=null,this.src=M,this.type=F,this.capture=!!G,this.ha=pe,this.key=++q,this.da=this.fa=!1}function J(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function ne(_,M,F){for(const G in _)M.call(F,_[G],G,_)}function Y(_,M){for(const F in _)M.call(void 0,_[F],F,_)}function U(_){const M={};for(const F in _)M[F]=_[F];return M}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(_,M){let F,G;for(let pe=1;pe<arguments.length;pe++){G=arguments[pe];for(F in G)_[F]=G[F];for(let be=0;be<Q.length;be++)F=Q[be],Object.prototype.hasOwnProperty.call(G,F)&&(_[F]=G[F])}}function Z(_){this.src=_,this.g={},this.h=0}Z.prototype.add=function(_,M,F,G,pe){const be=_.toString();_=this.g[be],_||(_=this.g[be]=[],this.h++);const Me=de(_,M,G,pe);return Me>-1?(M=_[Me],F||(M.fa=!1)):(M=new W(M,this.src,be,!!G,pe),M.fa=F,_.push(M)),M};function le(_,M){const F=M.type;if(F in _.g){var G=_.g[F],pe=Array.prototype.indexOf.call(G,M,void 0),be;(be=pe>=0)&&Array.prototype.splice.call(G,pe,1),be&&(J(M),_.g[F].length==0&&(delete _.g[F],_.h--))}}function de(_,M,F,G){for(let pe=0;pe<_.length;++pe){const be=_[pe];if(!be.da&&be.listener==M&&be.capture==!!F&&be.ha==G)return pe}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),he={};function ee(_,M,F,G,pe){if(Array.isArray(M)){for(let be=0;be<M.length;be++)ee(_,M[be],F,G,pe);return null}return F=Ie(F),_&&_[X]?_.J(M,F,o(G)?!!G.capture:!1,pe):Se(_,M,F,!1,G,pe)}function Se(_,M,F,G,pe,be){if(!M)throw Error("Invalid event type");const Me=o(pe)?!!pe.capture:!!pe;let ht=je(_);if(ht||(_[ce]=ht=new Z(_)),F=ht.add(M,F,G,Me,be),F.proxy)return F;if(G=re(),F.proxy=G,G.src=_,G.listener=F,_.addEventListener)B||(pe=Me),pe===void 0&&(pe=!1),_.addEventListener(M.toString(),G,pe);else if(_.attachEvent)_.attachEvent(Pe(M.toString()),G);else if(_.addListener&&_.removeListener)_.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return F}function re(){function _(F){return M.call(_.src,_.listener,F)}const M=ze;return _}function oe(_,M,F,G,pe){if(Array.isArray(M))for(var be=0;be<M.length;be++)oe(_,M[be],F,G,pe);else G=o(G)?!!G.capture:!!G,F=Ie(F),_&&_[X]?(_=_.i,be=String(M).toString(),be in _.g&&(M=_.g[be],F=de(M,F,G,pe),F>-1&&(J(M[F]),Array.prototype.splice.call(M,F,1),M.length==0&&(delete _.g[be],_.h--)))):_&&(_=je(_))&&(M=_.g[M.toString()],_=-1,M&&(_=de(M,F,G,pe)),(F=_>-1?M[_]:null)&&De(F))}function De(_){if(typeof _!="number"&&_&&!_.da){var M=_.src;if(M&&M[X])le(M.i,_);else{var F=_.type,G=_.proxy;M.removeEventListener?M.removeEventListener(F,G,_.capture):M.detachEvent?M.detachEvent(Pe(F),G):M.addListener&&M.removeListener&&M.removeListener(G),(F=je(M))?(le(F,_),F.h==0&&(F.src=null,M[ce]=null)):J(_)}}}function Pe(_){return _ in he?he[_]:he[_]="on"+_}function ze(_,M){if(_.da)_=!0;else{M=new H(M,this);const F=_.listener,G=_.ha||_.src;_.fa&&De(_),_=F.call(G,M)}return _}function je(_){return _=_[ce],_ instanceof Z?_:null}var Ue="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ie(_){return typeof _=="function"?_:(_[Ue]||(_[Ue]=function(M){return _.handleEvent(M)}),_[Ue])}function Oe(){z.call(this),this.i=new Z(this),this.M=this,this.G=null}h(Oe,z),Oe.prototype[X]=!0,Oe.prototype.removeEventListener=function(_,M,F,G){oe(this,_,M,F,G)};function Ge(_,M){var F,G=_.G;if(G)for(F=[];G;G=G.G)F.push(G);if(_=_.M,G=M.type||M,typeof M=="string")M=new L(M,_);else if(M instanceof L)M.target=M.target||_;else{var pe=M;M=new L(G,_),K(M,pe)}pe=!0;let be,Me;if(F)for(Me=F.length-1;Me>=0;Me--)be=M.g=F[Me],pe=yt(be,G,!0,M)&&pe;if(be=M.g=_,pe=yt(be,G,!0,M)&&pe,pe=yt(be,G,!1,M)&&pe,F)for(Me=0;Me<F.length;Me++)be=M.g=F[Me],pe=yt(be,G,!1,M)&&pe}Oe.prototype.N=function(){if(Oe.Z.N.call(this),this.i){var _=this.i;for(const M in _.g){const F=_.g[M];for(let G=0;G<F.length;G++)J(F[G]);delete _.g[M],_.h--}}this.G=null},Oe.prototype.J=function(_,M,F,G){return this.i.add(String(_),M,!1,F,G)},Oe.prototype.K=function(_,M,F,G){return this.i.add(String(_),M,!0,F,G)};function yt(_,M,F,G){if(M=_.i.g[String(M)],!M)return!0;M=M.concat();let pe=!0;for(let be=0;be<M.length;++be){const Me=M[be];if(Me&&!Me.da&&Me.capture==F){const ht=Me.listener,Hn=Me.ha||Me.src;Me.fa&&le(_.i,Me),pe=ht.call(Hn,G)!==!1&&pe}}return pe&&!G.defaultPrevented}function Dt(_,M){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(M)>2147483647?-1:s.setTimeout(_,M||0)}function Nt(_){_.g=Dt(()=>{_.g=null,_.i&&(_.i=!1,Nt(_))},_.l);const M=_.h;_.h=null,_.m.apply(null,M)}class ot extends z{constructor(M,F){super(),this.m=M,this.l=F,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:Nt(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Et(_){z.call(this),this.h=_,this.g={}}h(Et,z);var ft=[];function xn(_){ne(_.g,function(M,F){this.g.hasOwnProperty(F)&&De(M)},_),_.g={}}Et.prototype.N=function(){Et.Z.N.call(this),xn(this)},Et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zt=s.JSON.stringify,Ur=s.JSON.parse,as=class{stringify(_){return s.JSON.stringify(_,void 0)}parse(_){return s.JSON.parse(_,void 0)}};function ss(){}function os(){}var pi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wn(){L.call(this,"d")}h(wn,L);function _n(){L.call(this,"c")}h(_n,L);var Vt={},Bs=null;function Yl(){return Bs=Bs||new Oe}Vt.Ia="serverreachability";function Xl(_){L.call(this,Vt.Ia,_)}h(Xl,L);function xt(_){const M=Yl();Ge(M,new Xl(M))}Vt.STAT_EVENT="statevent";function Pn(_,M){L.call(this,Vt.STAT_EVENT,_),this.stat=M}h(Pn,L);function Dn(_){const M=Yl();Ge(M,new Pn(M,_))}Vt.Ja="timingevent";function Yi(_,M){L.call(this,Vt.Ja,_),this.size=M}h(Yi,L);function _a(_,M){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){_()},M)}function gi(){this.g=!0}gi.prototype.ua=function(){this.g=!1};function lE(_,M,F,G,pe,be){_.info(function(){if(_.g)if(be){var Me="",ht=be.split("&");for(let Bt=0;Bt<ht.length;Bt++){var Hn=ht[Bt].split("=");if(Hn.length>1){const Sn=Hn[0];Hn=Hn[1];const Aa=Sn.split("_");Me=Aa.length>=2&&Aa[1]=="type"?Me+(Sn+"="+Hn+"&"):Me+(Sn+"=redacted&")}}}else Me=null;else Me=be;return"XMLHTTP REQ ("+G+") [attempt "+pe+"]: "+M+`
`+F+`
`+Me})}function py(_,M,F,G,pe,be,Me){_.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+pe+"]: "+M+`
`+F+`
`+be+" "+Me})}function Fs(_,M,F,G){_.info(function(){return"XMLHTTP TEXT ("+M+"): "+cE(_,F)+(G?" "+G:"")})}function ku(_,M){_.info(function(){return"TIMEOUT: "+M})}gi.prototype.info=function(){};function cE(_,M){if(!_.g)return M;if(!M)return null;try{const be=JSON.parse(M);if(be){for(_=0;_<be.length;_++)if(Array.isArray(be[_])){var F=be[_];if(!(F.length<2)){var G=F[1];if(Array.isArray(G)&&!(G.length<1)){var pe=G[0];if(pe!="noop"&&pe!="stop"&&pe!="close")for(let Me=1;Me<G.length;Me++)G[Me]=""}}}}return Zt(be)}catch{return M}}var Pu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},lg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},cg;function Du(){}h(Du,ss),Du.prototype.g=function(){return new XMLHttpRequest},cg=new Du;function Lo(_){return encodeURIComponent(String(_))}function gy(_){var M=1;_=_.split(":");const F=[];for(;M>0&&_.length;)F.push(_.shift()),M--;return _.length&&F.push(_.join(":")),F}function ls(_,M,F,G){this.j=_,this.i=M,this.l=F,this.S=G||1,this.V=new Et(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new cs}function cs(){this.i=null,this.g="",this.h=!1}var er={},Dr={};function Us(_,M,F){_.M=1,_.A=Ou(nr(M)),_.u=F,_.R=!0,_f(_,null)}function _f(_,M){_.F=Date.now(),$s(_),_.B=nr(_.A);var F=_.B,G=_.S;Array.isArray(G)||(G=[String(G)]),Af(F.i,"t",G),_.C=0,F=_.j.L,_.h=new cs,_.g=Py(_.j,F?M:null,!_.u),_.P>0&&(_.O=new ot(u(_.Y,_,_.g),_.P)),M=_.V,F=_.g,G=_.ba;var pe="readystatechange";Array.isArray(pe)||(pe&&(ft[0]=pe.toString()),pe=ft);for(let be=0;be<pe.length;be++){const Me=ee(F,pe[be],G||M.handleEvent,!1,M.h||M);if(!Me)break;M.g[Me.key]=Me}M=_.J?U(_.J):{},_.u?(_.v||(_.v="POST"),M["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,M)):(_.v="GET",_.g.ea(_.B,_.v,null,M)),xt(),lE(_.i,_.v,_.B,_.l,_.S,_.u)}ls.prototype.ba=function(_){_=_.target;const M=this.O;M&&fs(_)==3?M.j():this.Y(_)},ls.prototype.Y=function(_){try{if(_==this.g)e:{const ht=fs(this.g),Hn=this.g.ya(),Bt=this.g.ca();if(!(ht<3)&&(ht!=3||this.g&&(this.h.h||this.g.la()||$r(this.g)))){this.K||ht!=4||Hn==7||(Hn==8||Bt<=0?xt(3):xt(2)),qs(this);var M=this.g.ca();this.X=M;var F=uE(this);if(this.o=M==200,py(this.i,this.v,this.B,this.l,this.S,ht,M),this.o){if(this.U&&!this.L){t:{if(this.g){var G,pe=this.g;if((G=pe.g?pe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(G)){var be=G;break t}}be=null}if(_=be)Fs(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Gs(this,_);else{this.o=!1,this.m=3,Dn(12),Xi(this),Sa(this);break e}}if(this.R){_=!0;let Sn;for(;!this.K&&this.C<F.length;)if(Sn=vy(this,F),Sn==Dr){ht==4&&(this.m=4,Dn(14),_=!1),Fs(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==er){this.m=4,Dn(15),Fs(this.i,this.l,F,"[Invalid Chunk]"),_=!1;break}else Fs(this.i,this.l,Sn,null),Gs(this,Sn);if(my(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||F.length!=0||this.h.h||(this.m=1,Dn(16),_=!1),this.o=this.o&&_,!_)Fs(this.i,this.l,F,"[Invalid Chunked Response]"),Xi(this),Sa(this);else if(F.length>0&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.aa&&!Me.P&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),Eg(Me),Me.P=!0,Dn(11))}}else Fs(this.i,this.l,F,null),Gs(this,F);ht==4&&Xi(this),this.o&&!this.K&&(ht==4?Ay(this.j,this):(this.o=!1,$s(this)))}else Bo(this.g),M==400&&F.indexOf("Unknown SID")>0?(this.m=3,Dn(12)):(this.m=0,Dn(13)),Xi(this),Sa(this)}}}catch{}finally{}};function uE(_){if(!my(_))return _.g.la();const M=$r(_.g);if(M==="")return"";let F="";const G=M.length,pe=fs(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Xi(_),Sa(_),"";_.h.i=new s.TextDecoder}for(let be=0;be<G;be++)_.h.h=!0,F+=_.h.i.decode(M[be],{stream:!(pe&&be==G-1)});return M.length=0,_.h.g+=F,_.C=0,_.h.g}function my(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function vy(_,M){var F=_.C,G=M.indexOf(`
`,F);return G==-1?Dr:(F=Number(M.substring(F,G)),isNaN(F)?er:(G+=1,G+F>M.length?Dr:(M=M.slice(G,G+F),_.C=G+F,M)))}ls.prototype.cancel=function(){this.K=!0,Xi(this)};function $s(_){_.T=Date.now()+_.H,Sf(_,_.H)}function Sf(_,M){if(_.D!=null)throw Error("WatchDog timer not null");_.D=_a(u(_.aa,_),M)}function qs(_){_.D&&(s.clearTimeout(_.D),_.D=null)}ls.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(ku(this.i,this.B),this.M!=2&&(xt(),Dn(17)),Xi(this),this.m=2,Sa(this)):Sf(this,this.T-_)};function Sa(_){_.j.I==0||_.K||Ay(_.j,_)}function Xi(_){qs(_);var M=_.O;M&&typeof M.dispose=="function"&&M.dispose(),_.O=null,xn(_.V),_.g&&(M=_.g,_.g=null,M.abort(),M.dispose())}function Gs(_,M){try{var F=_.j;if(F.I!=0&&(F.g==_||Ks(F.h,_))){if(!_.L&&Ks(F.h,_)&&F.I==3){try{var G=F.Ba.g.parse(M)}catch{G=null}if(Array.isArray(G)&&G.length==3){var pe=G;if(pe[0]==0){e:if(!F.v){if(F.g)if(F.g.F+3e3<_.F)Df(F),ic(F);else break e;Vu(F),Dn(18)}}else F.xa=pe[1],0<F.xa-F.K&&pe[2]<37500&&F.F&&F.A==0&&!F.C&&(F.C=_a(u(F.Va,F),6e3));Hs(F.h)<=1&&F.ta&&(F.ta=void 0)}else Js(F,11)}else if((_.L||F.g==_)&&Df(F),!j(M))for(pe=F.Ba.g.parse(M),M=0;M<pe.length;M++){let Bt=pe[M];const Sn=Bt[0];if(!(Sn<=F.K))if(F.K=Sn,Bt=Bt[1],F.I==2)if(Bt[0]=="c"){F.M=Bt[1],F.ba=Bt[2];const Aa=Bt[3];Aa!=null&&(F.ka=Aa,F.j.info("VER="+F.ka));const eo=Bt[4];eo!=null&&(F.za=eo,F.j.info("SVER="+F.za));const hs=Bt[5];hs!=null&&typeof hs=="number"&&hs>0&&(G=1.5*hs,F.O=G,F.j.info("backChannelRequestTimeoutMs_="+G)),G=F;const ps=_.g;if(ps){const Bu=ps.g?ps.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bu){var be=G.h;be.g||Bu.indexOf("spdy")==-1&&Bu.indexOf("quic")==-1&&Bu.indexOf("h2")==-1||(be.j=be.l,be.g=new Set,be.h&&(fg(be,be.h),be.h=null))}if(G.G){const Of=ps.g?ps.g.getResponseHeader("X-HTTP-Session-Id"):null;Of&&(G.wa=Of,Gt(G.J,G.G,Of))}}F.I=3,F.l&&F.l.ra(),F.aa&&(F.T=Date.now()-_.F,F.j.info("Handshake RTT: "+F.T+"ms")),G=F;var Me=_;if(G.na=ky(G,G.L?G.ba:null,G.W),Me.L){hg(G.h,Me);var ht=Me,Hn=G.O;Hn&&(ht.H=Hn),ht.D&&(qs(ht),$s(ht)),G.g=Me}else Ey(G);F.i.length>0&&Zs(F)}else Bt[0]!="stop"&&Bt[0]!="close"||Js(F,7);else F.I==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?Js(F,7):_g(F):Bt[0]!="noop"&&F.l&&F.l.qa(Bt),F.A=0)}}xt(4)}catch{}}var tr=class{constructor(_,M){this.g=_,this.map=M}};function ug(_){this.l=_||10,s.PerformanceNavigationTiming?(_=s.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function dg(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Hs(_){return _.h?1:_.g?_.g.size:0}function Ks(_,M){return _.h?_.h==M:_.g?_.g.has(M):!1}function fg(_,M){_.g?_.g.add(M):_.h=M}function hg(_,M){_.h&&_.h==M?_.h=null:_.g&&_.g.has(M)&&_.g.delete(M)}ug.prototype.cancel=function(){if(this.i=pg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function pg(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let M=_.i;for(const F of _.g.values())M=M.concat(F.G);return M}return m(_.i)}var yy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ef(_,M){if(_){_=_.split("&");for(let F=0;F<_.length;F++){const G=_[F].indexOf("=");let pe,be=null;G>=0?(pe=_[F].substring(0,G),be=_[F].substring(G+1)):pe=_[F],M(pe,be?decodeURIComponent(be.replace(/\+/g," ")):"")}}}function Qi(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let M;_ instanceof Qi?(this.l=_.l,Or(this,_.j),this.o=_.o,this.g=_.g,Ql(this,_.u),this.h=_.h,gg(this,_y(_.i)),this.m=_.m):_&&(M=String(_).match(yy))?(this.l=!1,Or(this,M[1]||"",!0),this.o=Ws(M[2]||""),this.g=Ws(M[3]||"",!0),Ql(this,M[4]),this.h=Ws(M[5]||"",!0),gg(this,M[6]||"",!0),this.m=Ws(M[7]||"")):(this.l=!1,this.i=new Jl(null,this.l))}Qi.prototype.toString=function(){const _=[];var M=this.j;M&&_.push(Nu(M,Tf,!0),":");var F=this.g;return(F||M=="file")&&(_.push("//"),(M=this.o)&&_.push(Nu(M,Tf,!0),"@"),_.push(Lo(F).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.u,F!=null&&_.push(":",String(F))),(F=this.h)&&(this.g&&F.charAt(0)!="/"&&_.push("/"),_.push(Nu(F,F.charAt(0)=="/"?mg:by,!0))),(F=this.i.toString())&&_.push("?",F),(F=this.m)&&_.push("#",Nu(F,xy)),_.join("")},Qi.prototype.resolve=function(_){const M=nr(this);let F=!!_.j;F?Or(M,_.j):F=!!_.o,F?M.o=_.o:F=!!_.g,F?M.g=_.g:F=_.u!=null;var G=_.h;if(F)Ql(M,_.u);else if(F=!!_.h){if(G.charAt(0)!="/")if(this.g&&!this.h)G="/"+G;else{var pe=M.h.lastIndexOf("/");pe!=-1&&(G=M.h.slice(0,pe+1)+G)}if(pe=G,pe==".."||pe==".")G="";else if(pe.indexOf("./")!=-1||pe.indexOf("/.")!=-1){G=pe.lastIndexOf("/",0)==0,pe=pe.split("/");const be=[];for(let Me=0;Me<pe.length;){const ht=pe[Me++];ht=="."?G&&Me==pe.length&&be.push(""):ht==".."?((be.length>1||be.length==1&&be[0]!="")&&be.pop(),G&&Me==pe.length&&be.push("")):(be.push(ht),G=!0)}G=be.join("/")}else G=pe}return F?M.h=G:F=_.i.toString()!=="",F?gg(M,_y(_.i)):F=!!_.m,F&&(M.m=_.m),M};function nr(_){return new Qi(_)}function Or(_,M,F){_.j=F?Ws(M,!0):M,_.j&&(_.j=_.j.replace(/:$/,""))}function Ql(_,M){if(M){if(M=Number(M),isNaN(M)||M<0)throw Error("Bad port number "+M);_.u=M}else _.u=null}function gg(_,M,F){M instanceof Jl?(_.i=M,Cf(_.i,_.l)):(F||(M=Nu(M,Zl)),_.i=new Jl(M,_.l))}function Gt(_,M,F){_.i.set(M,F)}function Ou(_){return Gt(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Ws(_,M){return _?M?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Nu(_,M,F){return typeof _=="string"?(_=encodeURI(_).replace(M,ki),F&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function ki(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var Tf=/[#\/\?@]/g,by=/[#\?:]/g,mg=/[#\?]/g,Zl=/[#\?@]/g,xy=/#/g;function Jl(_,M){this.h=this.g=null,this.i=_||null,this.j=!!M}function Pi(_){_.g||(_.g=new Map,_.h=0,_.i&&Ef(_.i,function(M,F){_.add(decodeURIComponent(M.replace(/\+/g," ")),F)}))}t=Jl.prototype,t.add=function(_,M){Pi(this),this.i=null,_=ec(this,_);let F=this.g.get(_);return F||this.g.set(_,F=[]),F.push(M),this.h+=1,this};function wy(_,M){Pi(_),M=ec(_,M),_.g.has(M)&&(_.i=null,_.h-=_.g.get(M).length,_.g.delete(M))}function vg(_,M){return Pi(_),M=ec(_,M),_.g.has(M)}t.forEach=function(_,M){Pi(this),this.g.forEach(function(F,G){F.forEach(function(pe){_.call(M,pe,G,this)},this)},this)};function yg(_,M){Pi(_);let F=[];if(typeof M=="string")vg(_,M)&&(F=F.concat(_.g.get(ec(_,M))));else for(_=Array.from(_.g.values()),M=0;M<_.length;M++)F=F.concat(_[M]);return F}t.set=function(_,M){return Pi(this),this.i=null,_=ec(this,_),vg(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[M]),this.h+=1,this},t.get=function(_,M){return _?(_=yg(this,_),_.length>0?String(_[0]):M):M};function Af(_,M,F){wy(_,M),F.length>0&&(_.i=null,_.g.set(ec(_,M),m(F)),_.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],M=Array.from(this.g.keys());for(let G=0;G<M.length;G++){var F=M[G];const pe=Lo(F);F=yg(this,F);for(let be=0;be<F.length;be++){let Me=pe;F[be]!==""&&(Me+="="+Lo(F[be])),_.push(Me)}}return this.i=_.join("&")};function _y(_){const M=new Jl;return M.i=_.i,_.g&&(M.g=new Map(_.g),M.h=_.h),M}function ec(_,M){return M=String(M),_.j&&(M=M.toLowerCase()),M}function Cf(_,M){M&&!_.j&&(Pi(_),_.i=null,_.g.forEach(function(F,G){const pe=G.toLowerCase();G!=pe&&(wy(this,G),Af(this,pe,F))},_)),_.j=M}function us(_,M){const F=new gi;if(s.Image){const G=new Image;G.onload=f(Ea,F,"TestLoadImage: loaded",!0,M,G),G.onerror=f(Ea,F,"TestLoadImage: error",!1,M,G),G.onabort=f(Ea,F,"TestLoadImage: abort",!1,M,G),G.ontimeout=f(Ea,F,"TestLoadImage: timeout",!1,M,G),s.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=_}else M(!1)}function bg(_,M){const F=new gi,G=new AbortController,pe=setTimeout(()=>{G.abort(),Ea(F,"TestPingServer: timeout",!1,M)},1e4);fetch(_,{signal:G.signal}).then(be=>{clearTimeout(pe),be.ok?Ea(F,"TestPingServer: ok",!0,M):Ea(F,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(pe),Ea(F,"TestPingServer: error",!1,M)})}function Ea(_,M,F,G,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),G(F)}catch{}}function tc(){this.g=new as}function Ys(_){this.i=_.Sb||null,this.h=_.ab||!1}h(Ys,ss),Ys.prototype.g=function(){return new Ru(this.i,this.h)};function Ru(_,M){Oe.call(this),this.H=_,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Ru,Oe),t=Ru.prototype,t.open=function(_,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=M,this.readyState=1,ds(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const M={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(M.body=_),(this.H||s).fetch(new Request(this.D,M)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,nc(this)),this.readyState=0},t.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,ds(this)),this.g&&(this.readyState=3,ds(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;If(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function If(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}t.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var M=_.value?_.value:new Uint8Array(0);(M=this.B.decode(M,{stream:!_.done}))&&(this.response=this.responseText+=M)}_.done?nc(this):ds(this),this.readyState==3&&If(this)}},t.Oa=function(_){this.g&&(this.response=this.responseText=_,nc(this))},t.Na=function(_){this.g&&(this.response=_,nc(this))},t.ga=function(){this.g&&nc(this)};function nc(_){_.readyState=4,_.l=null,_.j=null,_.B=null,ds(_)}t.setRequestHeader=function(_,M){this.A.append(_,M)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],M=this.h.entries();for(var F=M.next();!F.done;)F=F.value,_.push(F[0]+": "+F[1]),F=M.next();return _.join(`\r
`)};function ds(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Ru.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function Ta(_){let M="";return ne(_,function(F,G){M+=G,M+=":",M+=F,M+=`\r
`}),M}function Mu(_,M,F){e:{for(G in F){var G=!1;break e}G=!0}G||(F=Ta(F),typeof _=="string"?F!=null&&Lo(F):Gt(_,M,F))}function Jt(_){Oe.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Jt,Oe);var Xs=/^https?$/i,xg=["POST","PUT"];t=Jt.prototype,t.Fa=function(_){this.H=_},t.ea=function(_,M,F,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);M=M?M.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cg.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(M,String(_),!0),this.B=!1}catch(be){ju(this,be);return}if(_=F||"",F=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var pe in G)F.set(pe,G[pe]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const be of G.keys())F.set(be,G.get(be));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(F.keys()).find(be=>be.toLowerCase()=="content-type"),pe=s.FormData&&_ instanceof s.FormData,!(Array.prototype.indexOf.call(xg,M,void 0)>=0)||G||pe||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[be,Me]of F)this.g.setRequestHeader(be,Me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(be){ju(this,be)}};function ju(_,M){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=M,_.o=5,wg(_),Vo(_)}function wg(_){_.A||(_.A=!0,Ge(_,"complete"),Ge(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,Ge(this,"complete"),Ge(this,"abort"),Vo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vo(this,!0)),Jt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?zu(this):this.Xa())},t.Xa=function(){zu(this)};function zu(_){if(_.h&&typeof a<"u"){if(_.v&&fs(_)==4)setTimeout(_.Ca.bind(_),0);else if(Ge(_,"readystatechange"),fs(_)==4){_.h=!1;try{const be=_.ca();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var F;if(!(F=M)){var G;if(G=be===0){let Me=String(_.D).match(yy)[1]||null;!Me&&s.self&&s.self.location&&(Me=s.self.location.protocol.slice(0,-1)),G=!Xs.test(Me?Me.toLowerCase():"")}F=G}if(F)Ge(_,"complete"),Ge(_,"success");else{_.o=6;try{var pe=fs(_)>2?_.g.statusText:""}catch{pe=""}_.l=pe+" ["+_.ca()+"]",wg(_)}}finally{Vo(_)}}}}function Vo(_,M){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const F=_.g;_.g=null,M||Ge(_,"ready");try{F.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function fs(_){return _.g?_.g.readyState:0}t.ca=function(){try{return fs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(_){if(this.g){var M=this.g.responseText;return _&&M.indexOf(_)==0&&(M=M.substring(_.length)),Ur(M)}};function $r(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function Bo(_){const M={};_=(_.g&&fs(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<_.length;G++){if(j(_[G]))continue;var F=gy(_[G]);const pe=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const be=M[pe]||[];M[pe]=be,be.push(F)}Y(M,function(G){return G.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qs(_,M,F){return F&&F.internalChannelParams&&F.internalChannelParams[_]||M}function rc(_){this.za=0,this.i=[],this.j=new gi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Qs("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Qs("baseRetryDelayMs",5e3,_),this.Za=Qs("retryDelaySeedMs",1e4,_),this.Ta=Qs("forwardChannelMaxRetries",2,_),this.va=Qs("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new ug(_&&_.concurrentRequestLimit),this.Ba=new tc,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=rc.prototype,t.ka=8,t.I=1,t.connect=function(_,M,F,G){Dn(0),this.W=_,this.H=M||{},F&&G!==void 0&&(this.H.OSID=F,this.H.OAID=G),this.F=this.X,this.J=ky(this,null,this.W),Zs(this)};function _g(_){if(kf(_),_.I==3){var M=_.V++,F=nr(_.J);if(Gt(F,"SID",_.M),Gt(F,"RID",M),Gt(F,"TYPE","terminate"),Lu(_,F),M=new ls(_,_.j,M),M.M=2,M.A=Ou(nr(F)),F=!1,s.navigator&&s.navigator.sendBeacon)try{F=s.navigator.sendBeacon(M.A.toString(),"")}catch{}!F&&s.Image&&(new Image().src=M.A,F=!0),F||(M.g=Py(M.j,null),M.g.ea(M.A)),M.F=Date.now(),$s(M)}Iy(_)}function ic(_){_.g&&(Eg(_),_.g.cancel(),_.g=null)}function kf(_){ic(_),_.v&&(s.clearTimeout(_.v),_.v=null),Df(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&s.clearTimeout(_.m),_.m=null)}function Zs(_){if(!dg(_.h)&&!_.m){_.m=!0;var M=_.Ea;O||D(),P||(O(),P=!0),k.add(M,_),_.D=0}}function Pf(_,M){return Hs(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=M.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=_a(u(_.Ea,_,M),Cy(_,_.D)),_.D++,!0)}t.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const pe=new ls(this,this.j,_);let be=this.o;if(this.U&&(be?(be=U(be),K(be,this.U)):be=this.U),this.u!==null||this.R||(pe.J=be,be=null),this.S)e:{for(var M=0,F=0;F<this.i.length;F++){t:{var G=this.i[F];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(M+=G,M>4096){M=F;break e}if(M===4096||F===this.i.length-1){M=F+1;break e}}M=1e3}else M=1e3;M=Sy(this,pe,M),F=nr(this.J),Gt(F,"RID",_),Gt(F,"CVER",22),this.G&&Gt(F,"X-HTTP-Session-Id",this.G),Lu(this,F),be&&(this.R?M="headers="+Lo(Ta(be))+"&"+M:this.u&&Mu(F,this.u,be)),fg(this.h,pe),this.Ra&&Gt(F,"TYPE","init"),this.S?(Gt(F,"$req",M),Gt(F,"SID","null"),pe.U=!0,Us(pe,F,null)):Us(pe,F,M),this.I=2}}else this.I==3&&(_?Sg(this,_):this.i.length==0||dg(this.h)||Sg(this))};function Sg(_,M){var F;M?F=M.l:F=_.V++;const G=nr(_.J);Gt(G,"SID",_.M),Gt(G,"RID",F),Gt(G,"AID",_.K),Lu(_,G),_.u&&_.o&&Mu(G,_.u,_.o),F=new ls(_,_.j,F,_.D+1),_.u===null&&(F.J=_.o),M&&(_.i=M.G.concat(_.i)),M=Sy(_,F,1e3),F.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),fg(_.h,F),Us(F,G,M)}function Lu(_,M){_.H&&ne(_.H,function(F,G){Gt(M,G,F)}),_.l&&ne({},function(F,G){Gt(M,G,F)})}function Sy(_,M,F){F=Math.min(_.i.length,F);const G=_.l?u(_.l.Ka,_.l,_):null;e:{var pe=_.i;let ht=-1;for(;;){const Hn=["count="+F];ht==-1?F>0?(ht=pe[0].g,Hn.push("ofs="+ht)):ht=0:Hn.push("ofs="+ht);let Bt=!0;for(let Sn=0;Sn<F;Sn++){var be=pe[Sn].g;const Aa=pe[Sn].map;if(be-=ht,be<0)ht=Math.max(0,pe[Sn].g-100),Bt=!1;else try{be="req"+be+"_"||"";try{var Me=Aa instanceof Map?Aa:Object.entries(Aa);for(const[eo,hs]of Me){let ps=hs;o(hs)&&(ps=Zt(hs)),Hn.push(be+eo+"="+encodeURIComponent(ps))}}catch(eo){throw Hn.push(be+"type="+encodeURIComponent("_badmap")),eo}}catch{G&&G(Aa)}}if(Bt){Me=Hn.join("&");break e}}Me=void 0}return _=_.i.splice(0,F),M.G=_,Me}function Ey(_){if(!_.g&&!_.v){_.Y=1;var M=_.Da;O||D(),P||(O(),P=!0),k.add(M,_),_.A=0}}function Vu(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=_a(u(_.Da,_),Cy(_,_.A)),_.A++,!0)}t.Da=function(){if(this.v=null,Ty(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=_a(u(this.Wa,this),_)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dn(10),ic(this),Ty(this))};function Eg(_){_.B!=null&&(s.clearTimeout(_.B),_.B=null)}function Ty(_){_.g=new ls(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var M=nr(_.na);Gt(M,"RID","rpc"),Gt(M,"SID",_.M),Gt(M,"AID",_.K),Gt(M,"CI",_.F?"0":"1"),!_.F&&_.ia&&Gt(M,"TO",_.ia),Gt(M,"TYPE","xmlhttp"),Lu(_,M),_.u&&_.o&&Mu(M,_.u,_.o),_.O&&(_.g.H=_.O);var F=_.g;_=_.ba,F.M=1,F.A=Ou(nr(M)),F.u=null,F.R=!0,_f(F,_)}t.Va=function(){this.C!=null&&(this.C=null,ic(this),Vu(this),Dn(19))};function Df(_){_.C!=null&&(s.clearTimeout(_.C),_.C=null)}function Ay(_,M){var F=null;if(_.g==M){Df(_),Eg(_),_.g=null;var G=2}else if(Ks(_.h,M))F=M.G,hg(_.h,M),G=1;else return;if(_.I!=0){if(M.o)if(G==1){F=M.u?M.u.length:0,M=Date.now()-M.F;var pe=_.D;G=Yl(),Ge(G,new Yi(G,F)),Zs(_)}else Ey(_);else if(pe=M.m,pe==3||pe==0&&M.X>0||!(G==1&&Pf(_,M)||G==2&&Vu(_)))switch(F&&F.length>0&&(M=_.h,M.i=M.i.concat(F)),pe){case 1:Js(_,5);break;case 4:Js(_,10);break;case 3:Js(_,6);break;default:Js(_,2)}}}function Cy(_,M){let F=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(F*=2),F*M}function Js(_,M){if(_.j.info("Error code "+M),M==2){var F=u(_.bb,_),G=_.Ua;const pe=!G;G=new Qi(G||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Or(G,"https"),Ou(G),pe?us(G.toString(),F):bg(G.toString(),F)}else Dn(2);_.I=0,_.l&&_.l.pa(M),Iy(_),kf(_)}t.bb=function(_){_?(this.j.info("Successfully pinged google.com"),Dn(2)):(this.j.info("Failed to ping google.com"),Dn(1))};function Iy(_){if(_.I=0,_.ja=[],_.l){const M=pg(_.h);(M.length!=0||_.i.length!=0)&&(b(_.ja,M),b(_.ja,_.i),_.h.i.length=0,m(_.i),_.i.length=0),_.l.oa()}}function ky(_,M,F){var G=F instanceof Qi?nr(F):new Qi(F);if(G.g!="")M&&(G.g=M+"."+G.g),Ql(G,G.u);else{var pe=s.location;G=pe.protocol,M=M?M+"."+pe.hostname:pe.hostname,pe=+pe.port;const be=new Qi(null);G&&Or(be,G),M&&(be.g=M),pe&&Ql(be,pe),F&&(be.h=F),G=be}return F=_.G,M=_.wa,F&&M&&Gt(G,F,M),Gt(G,"VER",_.ka),Lu(_,G),G}function Py(_,M,F){if(M&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return M=_.Aa&&!_.ma?new Jt(new Ys({ab:F})):new Jt(_.ma),M.Fa(_.L),M}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dy(){}t=Dy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ac(){}ac.prototype.g=function(_,M){return new mi(_,M)};function mi(_,M){Oe.call(this),this.g=new rc(M),this.l=_,this.h=M&&M.messageUrlParams||null,_=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(_?_["X-WebChannel-Content-Type"]=M.messageContentType:_={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.sa&&(_?_["X-WebChannel-Client-Profile"]=M.sa:_={"X-WebChannel-Client-Profile":M.sa}),this.g.U=_,(_=M&&M.Qb)&&!j(_)&&(this.g.u=_),this.A=M&&M.supportsCrossDomainXhr||!1,this.v=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!j(M)&&(this.g.G=M,_=this.h,_!==null&&M in _&&(_=this.h,M in _&&delete _[M])),this.j=new Fo(this)}h(mi,Oe),mi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mi.prototype.close=function(){_g(this.g)},mi.prototype.o=function(_){var M=this.g;if(typeof _=="string"){var F={};F.__data__=_,_=F}else this.v&&(F={},F.__data__=Zt(_),_=F);M.i.push(new tr(M.Ya++,_)),M.I==3&&Zs(M)},mi.prototype.N=function(){this.g.l=null,delete this.j,_g(this.g),delete this.g,mi.Z.N.call(this)};function Oy(_){wn.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var M=_.__sm__;if(M){e:{for(const F in M){_=F;break e}_=void 0}(this.i=_)&&(_=this.i,M=M!==null&&_ in M?M[_]:void 0),this.data=M}else this.data=_}h(Oy,wn);function Ny(){_n.call(this),this.status=1}h(Ny,_n);function Fo(_){this.g=_}h(Fo,Dy),Fo.prototype.ra=function(){Ge(this.g,"a")},Fo.prototype.qa=function(_){Ge(this.g,new Oy(_))},Fo.prototype.pa=function(_){Ge(this.g,new Ny)},Fo.prototype.oa=function(){Ge(this.g,"b")},ac.prototype.createWebChannel=ac.prototype.g,mi.prototype.send=mi.prototype.o,mi.prototype.open=mi.prototype.m,mi.prototype.close=mi.prototype.close,u7=function(){return new ac},c7=function(){return Yl()},l7=Vt,ok={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Pu.NO_ERROR=0,Pu.TIMEOUT=8,Pu.HTTP_ERROR=6,Vx=Pu,lg.COMPLETE="complete",o7=lg,os.EventType=pi,pi.OPEN="a",pi.CLOSE="b",pi.ERROR="c",pi.MESSAGE="d",Oe.prototype.listen=Oe.prototype.J,Cm=os,Jt.prototype.listenOnce=Jt.prototype.K,Jt.prototype.getLastError=Jt.prototype.Ha,Jt.prototype.getLastErrorCode=Jt.prototype.ya,Jt.prototype.getStatus=Jt.prototype.ca,Jt.prototype.getResponseJson=Jt.prototype.La,Jt.prototype.getResponseText=Jt.prototype.la,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Fa,s7=Jt}).apply(typeof Bb<"u"?Bb:typeof self<"u"?self:typeof window<"u"?window:{});const Xz="@firebase/firestore",Qz="4.9.2";class ii{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ii.UNAUTHENTICATED=new ii(null),ii.GOOGLE_CREDENTIALS=new ii("google-credentials-uid"),ii.FIRST_PARTY=new ii("first-party-uid"),ii.MOCK_USER=new ii("mock-user");let Lp="12.3.0";const Ud=new l_("@firebase/firestore");function yh(){return Ud.logLevel}function ke(t,...e){if(Ud.logLevel<=Ct.DEBUG){const n=e.map(nD);Ud.debug(`Firestore (${Lp}): ${t}`,...n)}}function Qn(t,...e){if(Ud.logLevel<=Ct.ERROR){const n=e.map(nD);Ud.error(`Firestore (${Lp}): ${t}`,...n)}}function gv(t,...e){if(Ud.logLevel<=Ct.WARN){const n=e.map(nD);Ud.warn(`Firestore (${Lp}): ${t}`,...n)}}function nD(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Be(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,d7(t,r,n)}function d7(t,e,n){let r=`FIRESTORE (${Lp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Qn(r),new Error(r)}function Ye(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||d7(e,i,r)}function He(t,e){return t}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends No{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class aue{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sue{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ii.UNAUTHENTICATED)))}shutdown(){}}class oue{constructor(e){this.t=e,this.currentUser=ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new bo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new bo,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},o=c=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new bo)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string",31837,{l:r}),new aue(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new ii(e)}}class lue{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ii.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cue{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new lue(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ii.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zz{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uue{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ua(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const r=a=>{a.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,ke("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Zz(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Zz(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function due(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class rD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=due(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function lt(t,e){return t<e?-1:t>e?1:0}function lk(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return wA(i)===wA(a)?lt(i,a):wA(i)?1:-1}return lt(t.length,e.length)}const fue=55296,hue=57343;function wA(t){const e=t.charCodeAt(0);return e>=fue&&e<=hue}function Qh(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function f7(t){return t+"\0"}const Jz="__name__";class lo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Be(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Be(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return lo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof lo?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=lo.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return lt(e.length,n.length)}static compareSegments(e,n){const r=lo.isNumericId(e),i=lo.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?lo.extractNumericId(e).compare(lo.extractNumericId(n)):lk(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jc.fromString(e.substring(4,e.length-2))}}class Ut extends lo{construct(e,n,r){return new Ut(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(we.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Ut(n)}static emptyPath(){return new Ut([])}}const pue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rn extends lo{construct(e,n,r){return new Rn(e,n,r)}static isValidIdentifier(e){return pue.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jz}static keyField(){return new Rn([Jz])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Re(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Re(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Re(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Re(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rn(n)}static emptyPath(){return new Rn([])}}class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Ut.fromString(e))}static fromName(e){return new Le(Ut.fromString(e).popFirst(5))}static empty(){return new Le(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Ut(e.slice()))}}function h7(t,e,n){if(!n)throw new Re(we.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gue(t,e,n,r){if(e===!0&&r===!0)throw new Re(we.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function eL(t){if(!Le.isDocumentKey(t))throw new Re(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tL(t){if(Le.isDocumentKey(t))throw new Re(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function p7(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function m_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Be(12329,{type:typeof t})}function $i(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Re(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=m_(t);throw new Re(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function fr(t,e){const n={typeString:t};return e&&(n.value=e),n}function v0(t,e){if(!p7(t))throw new Re(we.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Re(we.INVALID_ARGUMENT,n);return!0}const nL=-62135596800,rL=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*rL);return new vt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Re(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Re(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nL)throw new Re(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rL}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(v0(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:fr("string",vt._jsonSchemaVersion),seconds:fr("number"),nanoseconds:fr("number")};class Je{static fromTimestamp(e){return new Je(e)}static min(){return new Je(new vt(0,0))}static max(){return new Je(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Zh=-1;class S1{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function ck(t){return t.fields.find((e=>e.kind===2))}function ad(t){return t.fields.filter((e=>e.kind!==2))}S1.UNKNOWN_ID=-1;class Bx{constructor(e,n){this.fieldPath=e,this.kind=n}}class mv{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new mv(0,ma.min())}}function g7(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Je.fromTimestamp(r===1e9?new vt(n+1,0):new vt(n,r));return new ma(i,Le.empty(),e)}function m7(t){return new ma(t.readTime,t.key,Zh)}class ma{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ma(Je.min(),Le.empty(),Zh)}static max(){return new ma(Je.max(),Le.empty(),Zh)}}function iD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Le.comparator(t.documentKey,e.documentKey),n!==0?n:lt(t.largestBatchId,e.largestBatchId))}const v7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function xu(t){if(t.code!==we.FAILED_PRECONDITION||t.message!==v7)throw t;ke("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.reject(n)}static resolve(e){return new fe(((n,r)=>{n(e)}))}static reject(e){return new fe(((n,r)=>{r(e)}))}static waitFor(e){return new fe(((n,r)=>{let i=0,a=0,s=!1;e.forEach((o=>{++i,o.next((()=>{++a,s&&a===i&&n()}),(c=>r(c)))})),s=!0,a===i&&n()}))}static or(e){let n=fe.resolve(!1);for(const r of e)n=n.next((i=>i?fe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new fe(((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next((f=>{s[u]=f,++o,o===a&&r(s)}),(f=>i(f)))}}))}static doWhile(e,n){return new fe(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}const sa="SimpleDb";class v_{static open(e,n,r,i){try{return new v_(n,e.transaction(i,r))}catch(a){throw new Fm(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new bo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Fm(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=aD(r.target.error);this.S.reject(new Fm(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ke(sa,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new vue(n)}}class eu{static delete(e){return ke(sa,"Removing database:",e),fd(z2().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!o_())return!1;if(eu.F())return!0;const e=Tr(),n=eu.M(e),r=0<n&&n<10,i=b7(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,eu.M(Tr())===12.2&&Qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ke(sa,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;n(s)},i.onblocked=()=>{r(new Fm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?r(new Re(we.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new Re(we.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Fm(e,s))},i.onupgradeneeded=a=>{ke(sa,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.N.k(s,i.transaction,a.oldVersion,this.version).next((()=>{ke(sa,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const o=v_.open(this.db,e,a?"readonly":"readwrite",r),c=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),fe.reject(u)))).toPromise();return c.catch((()=>{})),await o.D,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&s<3;if(ke(sa,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function b7(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class mue{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return fd(this.U.delete())}}class Fm extends Re{constructor(e,n){super(we.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function wu(t){return t.name==="IndexedDbTransactionError"}class vue{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ke(sa,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(ke(sa,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fd(r)}add(e){return ke(sa,"ADD",this.store.name,e,e),fd(this.store.add(e))}get(e){return fd(this.store.get(e)).next((n=>(n===void 0&&(n=null),ke(sa,"GET",this.store.name,e,n),n)))}delete(e){return ke(sa,"DELETE",this.store.name,e),fd(this.store.delete(e))}count(){return ke(sa,"COUNT",this.store.name),fd(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new fe(((s,o)=>{a.onerror=c=>{o(c.target.error)},a.onsuccess=c=>{s(c.target.result)}}))}{const a=this.cursor(r),s=[];return this.H(a,((o,c)=>{s.push(c)})).next((()=>s))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new fe(((i,a)=>{r.onerror=s=>{a(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}Z(e,n){ke(sa,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((a,s,o)=>o.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new fe(((r,i)=>{n.onerror=a=>{const s=aD(a.target.error);i(s)},n.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((o=>{o?s.continue():r()})):r()}}))}H(e,n){const r=[];return new fe(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const o=s.target.result;if(!o)return void i();const c=new mue(o),u=n(o.primaryKey,o.value,c);if(u instanceof fe){const f=u.catch((h=>(c.done(),fe.reject(h))));r.push(f)}c.isDone?i():c.G===null?o.continue():o.continue(c.G)}})).next((()=>fe.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function fd(t){return new fe(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=aD(r.target.error);n(i)}}))}let iL=!1;function aD(t){const e=eu.M(Tr());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iL||(iL=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Um="IndexBackfiller";class yue{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ke(Um,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();ke(Um,`Documents written: ${n}`)}catch(n){wu(n)?ke(Um,"Ignoring IndexedDB error during index backfill: ",n):await xu(n)}await this.re(6e4)}))}}class bue{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return fe.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return ke(Um,`Processing collection: ${s}`),this.oe(e,s,i).next((o=>{i-=o,r.add(s)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,a))).next((o=>(ke(Um,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const s=m7(a);iD(s,r)>0&&(r=s)})),new ma(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class zi{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zi.ce=-1;const Pd=-1;function y_(t){return t==null}function vv(t){return t===0&&1/t==-1/0}function x7(t){return typeof t=="number"&&Number.isInteger(t)&&!vv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const E1="";function ci(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=aL(e)),e=xue(t.get(n),e);return aL(e)}function xue(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case E1:n+="";break;default:n+=a}}return n}function aL(t){return t+E1+""}function fo(t){const e=t.length;if(Ye(e>=2,64408,{path:t}),e===2)return Ye(t.charAt(0)===E1&&t.charAt(1)==="",56145,{path:t}),Ut.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const s=t.indexOf(E1,a);switch((s<0||s>n)&&Be(50515,{path:t}),t.charAt(s+1)){case"":const o=t.substring(a,s);let c;i.length===0?c=o:(i+=o,c=i,i=""),r.push(c);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:Be(61167,{path:t})}a=s+2}return new Ut(r)}const sd="remoteDocuments",y0="owner",lh="owner",yv="mutationQueues",wue="userId",bs="mutations",sL="batchId",wd="userMutationsIndex",oL=["userId","batchId"];function Fx(t,e){return[t,ci(e)]}function w7(t,e,n){return[t,ci(e),n]}const _ue={},Jh="documentMutations",T1="remoteDocumentsV14",Sue=["prefixPath","collectionGroup","readTime","documentId"],Ux="documentKeyIndex",Eue=["prefixPath","collectionGroup","documentId"],_7="collectionGroupIndex",Tue=["collectionGroup","readTime","prefixPath","documentId"],bv="remoteDocumentGlobal",uk="remoteDocumentGlobalKey",ep="targets",S7="queryTargetsIndex",Aue=["canonicalId","targetId"],tp="targetDocuments",Cue=["targetId","path"],sD="documentTargetsIndex",Iue=["path","targetId"],A1="targetGlobalKey",Dd="targetGlobal",xv="collectionParents",kue=["collectionId","parent"],np="clientMetadata",Pue="clientId",b_="bundles",Due="bundleId",x_="namedQueries",Oue="name",oD="indexConfiguration",Nue="indexId",dk="collectionGroupIndex",Rue="collectionGroup",$m="indexState",Mue=["indexId","uid"],E7="sequenceNumberIndex",jue=["uid","sequenceNumber"],qm="indexEntries",zue=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],T7="documentKeyIndex",Lue=["indexId","uid","orderedDocumentKey"],w_="documentOverlays",Vue=["userId","collectionPath","documentId"],fk="collectionPathOverlayIndex",Bue=["userId","collectionPath","largestBatchId"],A7="collectionGroupOverlayIndex",Fue=["userId","collectionGroup","largestBatchId"],lD="globals",Uue="name",C7=[yv,bs,Jh,sd,ep,y0,Dd,tp,np,bv,xv,b_,x_],$ue=[...C7,w_],I7=[yv,bs,Jh,T1,ep,y0,Dd,tp,np,bv,xv,b_,x_,w_],k7=I7,cD=[...k7,oD,$m,qm],que=cD,P7=[...cD,lD],Gue=P7;class hk extends y7{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Ar(t,e){const n=He(t);return eu.O(n.le,e)}function lL(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _u(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function D7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class hn{constructor(e,n){this.comparator=e,this.root=n||Zr.EMPTY}insert(e,n){return new hn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zr.BLACK,null,null))}remove(e){return new hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fb(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fb(this.root,e,this.comparator,!0)}}class Fb{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Zr.RED,this.left=i??Zr.EMPTY,this.right=a??Zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Zr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Zr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}Zr.EMPTY=null,Zr.RED=!0,Zr.BLACK=!1;Zr.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new Zr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xt{constructor(e){this.comparator=e,this.data=new hn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cL(this.data.getIterator())}getIteratorFrom(e){return new cL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Xt(this.comparator);return n.data=e,n}}class cL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ch(t){return t.hasNext()?t.getNext():void 0}class Li{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new Li([])}unionWith(e){let n=new Xt(Rn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Li(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qh(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class O7 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new O7("Invalid base64 string: "+a):a}})(e);return new Zn(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new Zn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zn.EMPTY_BYTE_STRING=new Zn("");const Hue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cl(t){if(Ye(!!t,39018),typeof t=="string"){let e=0;const n=Hue.exec(t);if(Ye(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:An(t.seconds),nanos:An(t.nanos)}}function An(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Il(t){return typeof t=="string"?Zn.fromBase64String(t):Zn.fromUint8Array(t)}const N7="server_timestamp",R7="__type__",M7="__previous_value__",j7="__local_write_time__";function uD(t){return(t?.mapValue?.fields||{})[R7]?.stringValue===N7}function __(t){const e=t.mapValue.fields[M7];return uD(e)?__(e):e}function wv(t){const e=Cl(t.mapValue.fields[j7].timestampValue);return new vt(e.seconds,e.nanos)}class Kue{constructor(e,n,r,i,a,s,o,c,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f}}const C1="(default)";class $d{constructor(e,n){this.projectId=e,this.database=n||C1}static empty(){return new $d("","")}get isDefaultDatabase(){return this.database===C1}isEqual(e){return e instanceof $d&&e.projectId===this.projectId&&e.database===this.database}}const dD="__type__",z7="__max__",$c={mapValue:{fields:{__type__:{stringValue:z7}}}},fD="__vector__",rp="value",$x={nullValue:"NULL_VALUE"};function au(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uD(t)?4:L7(t)?9007199254740991:S_(t)?10:11:Be(28295,{value:t})}function Co(t,e){if(t===e)return!0;const n=au(t);if(n!==au(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wv(t).isEqual(wv(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Cl(i.timestampValue),o=Cl(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Il(i.bytesValue).isEqual(Il(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return An(i.geoPointValue.latitude)===An(a.geoPointValue.latitude)&&An(i.geoPointValue.longitude)===An(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return An(i.integerValue)===An(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=An(i.doubleValue),o=An(a.doubleValue);return s===o?vv(s)===vv(o):isNaN(s)&&isNaN(o)}return!1})(t,e);case 9:return Qh(t.arrayValue.values||[],e.arrayValue.values||[],Co);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(lL(s)!==lL(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!Co(s[c],o[c])))return!1;return!0})(t,e);default:return Be(52216,{left:t})}}function _v(t,e){return(t.values||[]).find((n=>Co(n,e)))!==void 0}function su(t,e){if(t===e)return 0;const n=au(t),r=au(e);if(n!==r)return lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const o=An(a.integerValue||a.doubleValue),c=An(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(t,e);case 3:return uL(t.timestampValue,e.timestampValue);case 4:return uL(wv(t),wv(e));case 5:return lk(t.stringValue,e.stringValue);case 6:return(function(a,s){const o=Il(a),c=Il(s);return o.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const o=a.split("/"),c=s.split("/");for(let u=0;u<o.length&&u<c.length;u++){const f=lt(o[u],c[u]);if(f!==0)return f}return lt(o.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const o=lt(An(a.latitude),An(s.latitude));return o!==0?o:lt(An(a.longitude),An(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return dL(t.arrayValue,e.arrayValue);case 10:return(function(a,s){const o=a.fields||{},c=s.fields||{},u=o[rp]?.arrayValue,f=c[rp]?.arrayValue,h=lt(u?.values?.length||0,f?.values?.length||0);return h!==0?h:dL(u,f)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===$c.mapValue&&s===$c.mapValue)return 0;if(a===$c.mapValue)return 1;if(s===$c.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),u=s.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let h=0;h<c.length&&h<f.length;++h){const g=lk(c[h],f[h]);if(g!==0)return g;const m=su(o[c[h]],u[f[h]]);if(m!==0)return m}return lt(c.length,f.length)})(t.mapValue,e.mapValue);default:throw Be(23264,{he:n})}}function uL(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lt(t,e);const n=Cl(t),r=Cl(e),i=lt(n.seconds,r.seconds);return i!==0?i:lt(n.nanos,r.nanos)}function dL(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=su(n[i],r[i]);if(a)return a}return lt(n.length,r.length)}function ip(t){return pk(t)}function pk(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Cl(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Il(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Le.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=pk(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${pk(n.fields[s])}`;return i+"}"})(t.mapValue):Be(61005,{value:t})}function qx(t){switch(au(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__(t);return e?16+qx(e):16;case 5:return 2*t.stringValue.length;case 6:return Il(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+qx(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return _u(r.fields,((a,s)=>{i+=a.length+qx(s)})),i})(t.mapValue);default:throw Be(13486,{value:t})}}function Sv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gk(t){return!!t&&"integerValue"in t}function Ev(t){return!!t&&"arrayValue"in t}function fL(t){return!!t&&"nullValue"in t}function hL(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gx(t){return!!t&&"mapValue"in t}function S_(t){return(t?.mapValue?.fields||{})[dD]?.stringValue===fD}function Gm(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return _u(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Gm(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gm(t.arrayValue.values[n]);return e}return{...t}}function L7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===z7}const V7={mapValue:{fields:{[dD]:{stringValue:fD},[rp]:{arrayValue:{}}}}};function Wue(t){return"nullValue"in t?$x:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Sv($d.empty(),Le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?S_(t)?V7:{mapValue:{}}:Be(35942,{value:t})}function Yue(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Sv($d.empty(),Le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?V7:"mapValue"in t?S_(t)?{mapValue:{}}:$c:Be(61959,{value:t})}function pL(t,e){const n=su(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function gL(t,e){const n=su(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class oi{constructor(e){this.value=e}static empty(){return new oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gx(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gm(n)}setAll(e){let n=Rn.emptyPath(),r={},i=[];e.forEach(((s,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=Gm(s):i.push(o.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Gx(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Co(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Gx(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){_u(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new oi(Gm(this.value))}}function B7(t){const e=[];return _u(t.fields,((n,r)=>{const i=new Rn([n]);if(Gx(r)){const a=B7(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new Li(e)}class $n{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new $n(e,0,Je.min(),Je.min(),Je.min(),oi.empty(),0)}static newFoundDocument(e,n,r,i){return new $n(e,1,n,Je.min(),r,i,0)}static newNoDocument(e,n){return new $n(e,2,n,Je.min(),Je.min(),oi.empty(),0)}static newUnknownDocument(e,n){return new $n(e,3,n,Je.min(),Je.min(),oi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ap{constructor(e,n){this.position=e,this.inclusive=n}}function mL(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=Le.comparator(Le.fromName(s.referenceValue),n.key):r=su(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function vL(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Co(t.position[n],e.position[n]))return!1;return!0}class Tv{constructor(e,n="asc"){this.field=e,this.dir=n}}function Xue(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class F7{}class It extends F7{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Que(e,n,r):n==="array-contains"?new ede(e,r):n==="in"?new K7(e,r):n==="not-in"?new tde(e,r):n==="array-contains-any"?new nde(e,r):new It(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Zue(e,r):new Jue(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(su(n,this.value)):n!==null&&au(this.value)===au(n)&&this.matchesComparison(su(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yt extends F7{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Yt(e,n)}matches(e){return sp(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sp(t){return t.op==="and"}function mk(t){return t.op==="or"}function hD(t){return U7(t)&&sp(t)}function U7(t){for(const e of t.filters)if(e instanceof Yt)return!1;return!0}function vk(t){if(t instanceof It)return t.field.canonicalString()+t.op.toString()+ip(t.value);if(hD(t))return t.filters.map((e=>vk(e))).join(",");{const e=t.filters.map((n=>vk(n))).join(",");return`${t.op}(${e})`}}function $7(t,e){return t instanceof It?(function(r,i){return i instanceof It&&r.op===i.op&&r.field.isEqual(i.field)&&Co(r.value,i.value)})(t,e):t instanceof Yt?(function(r,i){return i instanceof Yt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,s,o)=>a&&$7(s,i.filters[o])),!0):!1})(t,e):void Be(19439)}function q7(t,e){const n=t.filters.concat(e);return Yt.create(n,t.op)}function G7(t){return t instanceof It?(function(n){return`${n.field.canonicalString()} ${n.op} ${ip(n.value)}`})(t):t instanceof Yt?(function(n){return n.op.toString()+" {"+n.getFilters().map(G7).join(" ,")+"}"})(t):"Filter"}class Que extends It{constructor(e,n,r){super(e,n,r),this.key=Le.fromName(r.referenceValue)}matches(e){const n=Le.comparator(e.key,this.key);return this.matchesComparison(n)}}class Zue extends It{constructor(e,n){super(e,"in",n),this.keys=H7("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Jue extends It{constructor(e,n){super(e,"not-in",n),this.keys=H7("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function H7(t,e){return(e.arrayValue?.values||[]).map((n=>Le.fromName(n.referenceValue)))}class ede extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ev(n)&&_v(n.arrayValue,this.value)}}class K7 extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_v(this.value.arrayValue,n)}}class tde extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(_v(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!_v(this.value.arrayValue,n)}}class nde extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ev(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>_v(this.value.arrayValue,r)))}}class rde{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function yk(t,e=null,n=[],r=[],i=null,a=null,s=null){return new rde(t,e,n,r,i,a,s)}function qd(t){const e=He(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>vk(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),y_(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ip(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ip(r))).join(",")),e.Te=n}return e.Te}function b0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Xue(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$7(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vL(t.startAt,e.startAt)&&vL(t.endAt,e.endAt)}function I1(t){return Le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function k1(t,e){return t.filters.filter((n=>n instanceof It&&n.field.isEqual(e)))}function yL(t,e,n){let r=$x,i=!0;for(const a of k1(t,e)){let s=$x,o=!0;switch(a.op){case"<":case"<=":s=Wue(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,o=!1;break;case"!=":case"not-in":s=$x}pL({value:r,inclusive:i},{value:s,inclusive:o})<0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];pL({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function bL(t,e,n){let r=$c,i=!0;for(const a of k1(t,e)){let s=$c,o=!0;switch(a.op){case">=":case">":s=Yue(a.value),o=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,o=!1;break;case"!=":case"not-in":s=$c}gL({value:r,inclusive:i},{value:s,inclusive:o})>0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];gL({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}class Vp{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function W7(t,e,n,r,i,a,s,o){return new Vp(t,e,n,r,i,a,s,o)}function x0(t){return new Vp(t)}function xL(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Y7(t){return t.collectionGroup!==null}function Hm(t){const e=He(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Xt(Rn.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Tv(a,r))})),n.has(Rn.keyField().canonicalString())||e.Ie.push(new Tv(Rn.keyField(),r))}return e.Ie}function pa(t){const e=He(t);return e.Ee||(e.Ee=ide(e,Hm(t))),e.Ee}function ide(t,e){if(t.limitType==="F")return yk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Tv(i.field,a)}));const n=t.endAt?new ap(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ap(t.startAt.position,t.startAt.inclusive):null;return yk(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bk(t,e){const n=t.filters.concat([e]);return new Vp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function P1(t,e,n){return new Vp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function E_(t,e){return b0(pa(t),pa(e))&&t.limitType===e.limitType}function X7(t){return`${qd(pa(t))}|lt:${t.limitType}`}function bh(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>G7(i))).join(", ")}]`),y_(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>ip(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>ip(i))).join(",")),`Target(${r})`})(pa(t))}; limitType=${t.limitType})`}function w0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Le.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Hm(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,o,c){const u=mL(s,o,c);return s.inclusive?u<=0:u<0})(r.startAt,Hm(r),i)||r.endAt&&!(function(s,o,c){const u=mL(s,o,c);return s.inclusive?u>=0:u>0})(r.endAt,Hm(r),i))})(t,e)}function Q7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Z7(t){return(e,n)=>{let r=!1;for(const i of Hm(t)){const a=ade(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function ade(t,e,n){const r=t.field.isKeyField()?Le.comparator(e.key,n.key):(function(a,s,o){const c=s.data.field(a),u=o.data.field(a);return c!==null&&u!==null?su(c,u):Be(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Be(19790,{direction:t.dir})}}class Fl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_u(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return D7(this.inner)}size(){return this.innerSize}}const sde=new hn(Le.comparator);function fa(){return sde}const J7=new hn(Le.comparator);function Im(...t){let e=J7;for(const n of t)e=e.insert(n.key,n);return e}function eq(t){let e=J7;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ho(){return Km()}function tq(){return Km()}function Km(){return new Fl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const ode=new hn(Le.comparator),lde=new Xt(Le.comparator);function bt(...t){let e=lde;for(const n of t)e=e.add(n);return e}const cde=new Xt(lt);function pD(){return cde}function gD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vv(e)?"-0":e}}function nq(t){return{integerValue:""+t}}function ude(t,e){return x7(e)?nq(e):gD(t,e)}class T_{constructor(){this._=void 0}}function dde(t,e,n){return t instanceof Av?(function(i,a){const s={fields:{[R7]:{stringValue:N7},[j7]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&uD(a)&&(a=__(a)),a&&(s.fields[M7]=a),{mapValue:s}})(n,e):t instanceof Gd?iq(t,e):t instanceof op?aq(t,e):(function(i,a){const s=rq(i,a),o=wL(s)+wL(i.Ae);return gk(s)&&gk(i.Ae)?nq(o):gD(i.serializer,o)})(t,e)}function fde(t,e,n){return t instanceof Gd?iq(t,e):t instanceof op?aq(t,e):n}function rq(t,e){return t instanceof Cv?(function(r){return gk(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Av extends T_{}class Gd extends T_{constructor(e){super(),this.elements=e}}function iq(t,e){const n=sq(e);for(const r of t.elements)n.some((i=>Co(i,r)))||n.push(r);return{arrayValue:{values:n}}}class op extends T_{constructor(e){super(),this.elements=e}}function aq(t,e){let n=sq(e);for(const r of t.elements)n=n.filter((i=>!Co(i,r)));return{arrayValue:{values:n}}}class Cv extends T_{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function wL(t){return An(t.integerValue||t.doubleValue)}function sq(t){return Ev(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class oq{constructor(e,n){this.field=e,this.transform=n}}function hde(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Gd&&i instanceof Gd||r instanceof op&&i instanceof op?Qh(r.elements,i.elements,Co):r instanceof Cv&&i instanceof Cv?Co(r.Ae,i.Ae):r instanceof Av&&i instanceof Av})(t.transform,e.transform)}class pde{constructor(e,n){this.version=e,this.transformResults=n}}class Sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hx(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class A_{}function lq(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _0(t.key,Sr.none()):new Bp(t.key,t.data,Sr.none());{const n=t.data,r=oi.empty();let i=new Xt(Rn.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Ul(t.key,r,new Li(i.toArray()),Sr.none())}}function gde(t,e,n){t instanceof Bp?(function(i,a,s){const o=i.value.clone(),c=SL(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()})(t,e,n):t instanceof Ul?(function(i,a,s){if(!Hx(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=SL(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(cq(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Wm(t,e,n,r){return t instanceof Bp?(function(a,s,o,c){if(!Hx(a.precondition,s))return o;const u=a.value.clone(),f=EL(a.fieldTransforms,c,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ul?(function(a,s,o,c){if(!Hx(a.precondition,s))return o;const u=EL(a.fieldTransforms,c,s),f=s.data;return f.setAll(cq(a)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(a,s,o){return Hx(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o})(t,e,n)}function mde(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=rq(r.transform,i||null);a!=null&&(n===null&&(n=oi.empty()),n.set(r.field,a))}return n||null}function _L(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qh(r,i,((a,s)=>hde(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bp extends A_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ul extends A_{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function cq(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function SL(t,e,n){const r=new Map;Ye(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,fde(s,o,n[i]))}return r}function EL(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,dde(a,s,e))}return r}class _0 extends A_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uq extends A_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&gde(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wm(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wm(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=tq();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const c=lq(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Je.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),bt())}isEqual(e){return this.batchId===e.batchId&&Qh(this.mutations,e.mutations,((n,r)=>_L(n,r)))&&Qh(this.baseMutations,e.baseMutations,((n,r)=>_L(n,r)))}}class vD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return ode})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new vD(e,n,r,i)}}class yD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class vde{constructor(e,n){this.count=e,this.unchangedNames=n}}var lr,Ot;function yde(t){switch(t){case we.OK:return Be(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return Be(15467,{code:t})}}function dq(t){if(t===void 0)return Qn("GRPC error has no .code"),we.UNKNOWN;switch(t){case lr.OK:return we.OK;case lr.CANCELLED:return we.CANCELLED;case lr.UNKNOWN:return we.UNKNOWN;case lr.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case lr.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case lr.INTERNAL:return we.INTERNAL;case lr.UNAVAILABLE:return we.UNAVAILABLE;case lr.UNAUTHENTICATED:return we.UNAUTHENTICATED;case lr.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case lr.NOT_FOUND:return we.NOT_FOUND;case lr.ALREADY_EXISTS:return we.ALREADY_EXISTS;case lr.PERMISSION_DENIED:return we.PERMISSION_DENIED;case lr.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case lr.ABORTED:return we.ABORTED;case lr.OUT_OF_RANGE:return we.OUT_OF_RANGE;case lr.UNIMPLEMENTED:return we.UNIMPLEMENTED;case lr.DATA_LOSS:return we.DATA_LOSS;default:return Be(39323,{code:t})}}(Ot=lr||(lr={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";function bde(){return new TextEncoder}const xde=new Jc([4294967295,4294967295],0);function TL(t){const e=bde().encode(t),n=new a7;return n.update(e),new Uint8Array(n.digest())}function AL(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Jc([n,r],0),new Jc([i,a],0)]}class bD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new km(`Invalid padding: ${n}`);if(r<0)throw new km(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new km(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new km(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Jc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Jc.fromNumber(r)));return i.compare(xde)===1&&(i=new Jc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=TL(e),[r,i]=AL(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new bD(a,i,n);return r.forEach((o=>s.insert(o))),s}insert(e){if(this.ge===0)return;const n=TL(e),[r,i]=AL(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class km extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class S0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,E0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new S0(Je.min(),i,new hn(lt),fa(),bt())}}class E0{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new E0(r,n,bt(),bt(),bt())}}class Kx{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class fq{constructor(e,n){this.targetId=e,this.Ce=n}}class hq{constructor(e,n,r=Zn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class CL{constructor(){this.ve=0,this.Fe=IL(),this.Me=Zn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=bt(),n=bt(),r=bt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Be(38017,{changeType:a})}})),new E0(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=IL()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wde{constructor(e){this.Ge=e,this.ze=new Map,this.je=fa(),this.Je=Ub(),this.He=Ub(),this.Ye=new hn(lt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(I1(a))if(r===0){const s=new Le(a.path);this.et(n,s,$n.newNoDocument(s,Je.min()))}else Ye(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const o=this.ut(e),c=o?this.ct(o,e,s):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=Il(r).toUint8Array()}catch(c){if(c instanceof O7)return gv("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new bD(s,i,a)}catch(c){return gv(c instanceof km?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,s)=>{const o=this.ot(s);if(o){if(a.current&&I1(o.target)){const c=new Le(o.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,$n.newNoDocument(c,e))}a.Be&&(n.set(s,a.ke()),a.qe())}}));let r=bt();this.He.forEach(((a,s)=>{let o=!0;s.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const i=new S0(e,n,this.Ye,this.je,r);return this.je=fa(),this.Je=Ub(),this.He=Ub(),this.Ye=new hn(lt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new CL,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Xt(lt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Xt(lt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new CL),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ub(){return new hn(Le.comparator)}function IL(){return new hn(Le.comparator)}const _de={asc:"ASCENDING",desc:"DESCENDING"},Sde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ede={and:"AND",or:"OR"};class Tde{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xk(t,e){return t.useProto3Json||y_(e)?e:{value:e}}function lp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ade(t,e){return lp(t,e.toTimestamp())}function Ti(t){return Ye(!!t,49232),Je.fromTimestamp((function(n){const r=Cl(n);return new vt(r.seconds,r.nanos)})(t))}function xD(t,e){return wk(t,e).canonicalString()}function wk(t,e){const n=(function(i){return new Ut(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function gq(t){const e=Ut.fromString(t);return Ye(Eq(e),10190,{key:e.toString()}),e}function D1(t,e){return xD(t.databaseId,e.path)}function Od(t,e){const n=gq(e);if(n.get(1)!==t.databaseId.projectId)throw new Re(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Re(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Le(yq(n))}function mq(t,e){return xD(t.databaseId,e)}function vq(t){const e=gq(t);return e.length===4?Ut.emptyPath():yq(e)}function _k(t){return new Ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yq(t){return Ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function kL(t,e,n){return{name:D1(t,e),fields:n.value.mapValue.fields}}function Cde(t,e,n){const r=Od(t,e.name),i=Ti(e.updateTime),a=e.createTime?Ti(e.createTime):Je.min(),s=new oi({mapValue:{fields:e.fields}}),o=$n.newFoundDocument(r,i,a,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ide(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Be(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(u,f){return u.useProto3Json?(Ye(f===void 0||typeof f=="string",58123),Zn.fromBase64String(f||"")):(Ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Zn.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&(function(u){const f=u.code===void 0?we.UNKNOWN:dq(u.code);return new Re(f,u.message||"")})(s);n=new hq(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Od(t,r.document.name),a=Ti(r.document.updateTime),s=r.document.createTime?Ti(r.document.createTime):Je.min(),o=new oi({mapValue:{fields:r.document.fields}}),c=$n.newFoundDocument(i,a,s,o),u=r.targetIds||[],f=r.removedTargetIds||[];n=new Kx(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Od(t,r.document),a=r.readTime?Ti(r.readTime):Je.min(),s=$n.newNoDocument(i,a),o=r.removedTargetIds||[];n=new Kx([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Od(t,r.document),a=r.removedTargetIds||[];n=new Kx([],a,i,null)}else{if(!("filter"in e))return Be(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new vde(i,a),o=r.targetId;n=new fq(o,s)}}return n}function O1(t,e){let n;if(e instanceof Bp)n={update:kL(t,e.key,e.value)};else if(e instanceof _0)n={delete:D1(t,e.key)};else if(e instanceof Ul)n={update:kL(t,e.key,e.data),updateMask:Rde(e.fieldMask)};else{if(!(e instanceof uq))return Be(16599,{Vt:e.type});n={verify:D1(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,s){const o=s.transform;if(o instanceof Av)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Gd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof op)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Cv)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw Be(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:Ade(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Be(27497)})(t,e.precondition)),n}function Sk(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?Sr.updateTime(Ti(a.updateTime)):a.exists!==void 0?Sr.exists(a.exists):Sr.none()})(e.currentDocument):Sr.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,o){let c=null;if("setToServerValue"in o)Ye(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),c=new Av;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];c=new Gd(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];c=new op(f)}else"increment"in o?c=new Cv(s,o.increment):Be(16584,{proto:o});const u=Rn.fromServerFormat(o.fieldPath);return new oq(u,c)})(t,i))):[];if(e.update){e.update.name;const i=Od(t,e.update.name),a=new oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(c){const u=c.fieldPaths||[];return new Li(u.map((f=>Rn.fromServerFormat(f))))})(e.updateMask);return new Ul(i,a,s,n,r)}return new Bp(i,a,n,r)}if(e.delete){const i=Od(t,e.delete);return new _0(i,n)}if(e.verify){const i=Od(t,e.verify);return new uq(i,n)}return Be(1463,{proto:e})}function kde(t,e){return t&&t.length>0?(Ye(e!==void 0,14353),t.map((n=>(function(i,a){let s=i.updateTime?Ti(i.updateTime):Ti(a);return s.isEqual(Je.min())&&(s=Ti(a)),new pde(s,i.transformResults||[])})(n,e)))):[]}function bq(t,e){return{documents:[mq(t,e.path)]}}function xq(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mq(t,i);const a=(function(u){if(u.length!==0)return Sq(Yt.create(u,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const s=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:xh(g.field),direction:Dde(g.dir)}})(f)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=xk(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:i}}function wq(t){let e=vq(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ye(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=(function(h){const g=_q(h);return g instanceof Yt&&hD(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(h){return h.map((g=>(function(b){return new Tv(wh(b.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g)))})(n.orderBy));let o=null;n.limit&&(o=(function(h){let g;return g=typeof h=="object"?h.value:h,y_(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(h){const g=!!h.before,m=h.values||[];return new ap(m,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(h){const g=!h.before,m=h.values||[];return new ap(m,g)})(n.endAt)),W7(e,i,s,a,o,"F",c,u)}function Pde(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _q(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wh(n.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=wh(n.unaryFilter.field);return It.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=wh(n.unaryFilter.field);return It.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=wh(n.unaryFilter.field);return It.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(t):t.fieldFilter!==void 0?(function(n){return It.create(wh(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Yt.create(n.compositeFilter.filters.map((r=>_q(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(n.compositeFilter.op))})(t):Be(30097,{filter:t})}function Dde(t){return _de[t]}function Ode(t){return Sde[t]}function Nde(t){return Ede[t]}function xh(t){return{fieldPath:t.canonicalString()}}function wh(t){return Rn.fromServerFormat(t.fieldPath)}function Sq(t){return t instanceof It?(function(n){if(n.op==="=="){if(hL(n.value))return{unaryFilter:{field:xh(n.field),op:"IS_NAN"}};if(fL(n.value))return{unaryFilter:{field:xh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hL(n.value))return{unaryFilter:{field:xh(n.field),op:"IS_NOT_NAN"}};if(fL(n.value))return{unaryFilter:{field:xh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xh(n.field),op:Ode(n.op),value:n.value}}})(t):t instanceof Yt?(function(n){const r=n.getFilters().map((i=>Sq(i)));return r.length===1?r[0]:{compositeFilter:{op:Nde(n.op),filters:r}}})(t):Be(54877,{filter:t})}function Rde(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Eq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class dl{constructor(e,n,r,i,a=Je.min(),s=Je.min(),o=Zn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new dl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Tq{constructor(e){this.yt=e}}function Mde(t,e){let n;if(e.document)n=Cde(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Le.fromSegments(e.noDocument.path),i=Kd(e.noDocument.readTime);n=$n.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Be(56709);{const r=Le.fromSegments(e.unknownDocument.path),i=Kd(e.unknownDocument.version);n=$n.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new vt(i[0],i[1]);return Je.fromTimestamp(a)})(e.readTime)),n}function PL(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:N1(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,s){return{name:D1(a,s.key),fields:s.data.value.mapValue.fields,updateTime:lp(a,s.version.toTimestamp()),createTime:lp(a,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Hd(e.version)};else{if(!e.isUnknownDocument())return Be(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Hd(e.version)}}return r}function N1(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Hd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Kd(t){const e=new vt(t.seconds,t.nanoseconds);return Je.fromTimestamp(e)}function hd(t,e){const n=(e.baseMutations||[]).map((a=>Sk(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const o=e.mutations[a+1];s.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>Sk(t.yt,a))),i=vt.fromMillis(e.localWriteTimeMs);return new mD(e.batchId,i,n,r)}function Pm(t){const e=Kd(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Kd(t.lastLimboFreeSnapshotVersion):Je.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const s=a.documents.length;return Ye(s===1,1966,{count:s}),pa(x0(vq(a.documents[0])))})(t.query):(function(a){return pa(wq(a))})(t.query),new dl(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Zn.fromBase64String(t.resumeToken))}function Aq(t,e){const n=Hd(e.snapshotVersion),r=Hd(e.lastLimboFreeSnapshotVersion);let i;i=I1(e.target)?bq(t.yt,e.target):xq(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qd(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Cq(t){const e=wq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?P1(e,e.limit,"L"):e}function _A(t,e){return new yD(e.largestBatchId,Sk(t.yt,e.overlayMutation))}function DL(t,e){const n=e.path.lastSegment();return[t,ci(e.path.popLast()),n]}function OL(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Hd(r.readTime),documentKey:ci(r.documentKey.path),largestBatchId:r.largestBatchId}}class jde{getBundleMetadata(e,n){return NL(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Kd(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return NL(e).put((function(i){return{bundleId:i.id,createTime:Hd(Ti(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return RL(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:Cq(a.bundledQuery),readTime:Kd(a.readTime)}})(r)}))}saveNamedQuery(e,n){return RL(e).put((function(i){return{name:i.name,readTime:Hd(Ti(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function NL(t){return Ar(t,b_)}function RL(t){return Ar(t,x_)}class C_{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new C_(e,r)}getOverlay(e,n){return um(e).get(DL(this.userId,n)).next((r=>r?_A(this.serializer,r):null))}getOverlays(e,n){const r=ho();return fe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,s)=>{const o=new yD(n,s);i.push(this.St(e,o))})),fe.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(ci(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);a.push(um(e).Z(fk,o))})),fe.waitFor(a)}getOverlaysForCollection(e,n,r){const i=ho(),a=ci(n),s=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return um(e).J(fk,s).next((o=>{for(const c of o){const u=_A(this.serializer,c);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=ho();let s;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return um(e).ee({index:A7,range:o},((c,u,f)=>{const h=_A(this.serializer,u);a.size()<i||h.largestBatchId===s?(a.set(h.getKey(),h),s=h.largestBatchId):f.done()})).next((()=>a))}St(e,n){return um(e).put((function(i,a,s){const[o,c,u]=DL(a,s.mutation.key);return{userId:a,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:O1(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function um(t){return Ar(t,w_)}class zde{bt(e){return Ar(e,lD)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?Zn.fromUint8Array(r):Zn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class pd{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(An(e.integerValue));else if("doubleValue"in e){const r=An(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),vv(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Cl(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Il(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?L7(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):S_(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Be(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=rp,a=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(An(a)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),Le.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}pd.Kt=new pd;const uh=255;function Lde(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function ML(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const s=Lde(255&r[a]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class Vde{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=ML(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=ML(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(uh),this.sn(255)}_n(){this.an(uh),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===uh?(this.sn(uh),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===uh?(this.an(uh),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Bde{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Fde{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class dm{constructor(){this.cn=new Vde,this.ln=new Bde(this.cn),this.hn=new Fde(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class gd{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new gd(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Wx(this.En),directionalValue:Wx(this.dn),orderedDocumentKey:Wx(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function kc(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=jL(t.En,e.En),n!==0?n:(n=jL(t.dn,e.dn),n!==0?n:Le.comparator(t.In,e.In)))}function jL(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Wx(t){return q8()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function zL(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class LL{constructor(e){this.mn=new Xt(((n,r)=>Rn.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ye(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=ck(e);if(n!==void 0&&!this.wn(n))return!1;const r=ad(e);let i=new Set,a=0,s=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=r[a];if(!this.Sn(o,c)||!this.bn(this.fn[s++],c))return!1}++a}for(;a<r.length;++a){const o=r[a];if(s>=this.fn.length||!this.bn(this.fn[s++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Xt(Rn.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Bx(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Bx(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Bx(r.field,r.dir==="asc"?0:1)));return new S1(S1.UNKNOWN_ID,this.collectionId,n,mv.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function Iq(t){if(Ye(t instanceof It||t instanceof Yt,20012),t instanceof It){if(t instanceof K7){const n=t.value.arrayValue?.values?.map((r=>It.create(t.field,"==",r)))||[];return Yt.create(n,"or")}return t}const e=t.filters.map((n=>Iq(n)));return Yt.create(e,t.op)}function Ude(t){if(t.getFilters().length===0)return[];const e=Ak(Iq(t));return Ye(kq(e),7391),Ek(e)||Tk(e)?[e]:e.getFilters()}function Ek(t){return t instanceof It}function Tk(t){return t instanceof Yt&&hD(t)}function kq(t){return Ek(t)||Tk(t)||(function(n){if(n instanceof Yt&&mk(n)){for(const r of n.getFilters())if(!Ek(r)&&!Tk(r))return!1;return!0}return!1})(t)}function Ak(t){if(Ye(t instanceof It||t instanceof Yt,34018),t instanceof It)return t;if(t.filters.length===1)return Ak(t.filters[0]);const e=t.filters.map((r=>Ak(r)));let n=Yt.create(e,t.op);return n=R1(n),kq(n)?n:(Ye(n instanceof Yt,64498),Ye(sp(n),40251),Ye(n.filters.length>1,57927),n.filters.reduce(((r,i)=>wD(r,i))))}function wD(t,e){let n;return Ye(t instanceof It||t instanceof Yt,38388),Ye(e instanceof It||e instanceof Yt,25473),n=t instanceof It?e instanceof It?(function(i,a){return Yt.create([i,a],"and")})(t,e):VL(t,e):e instanceof It?VL(e,t):(function(i,a){if(Ye(i.filters.length>0&&a.filters.length>0,48005),sp(i)&&sp(a))return q7(i,a.getFilters());const s=mk(i)?i:a,o=mk(i)?a:i,c=s.filters.map((u=>wD(u,o)));return Yt.create(c,"or")})(t,e),R1(n)}function VL(t,e){if(sp(e))return q7(e,t.getFilters());{const n=e.filters.map((r=>wD(t,r)));return Yt.create(n,"or")}}function R1(t){if(Ye(t instanceof It||t instanceof Yt,11850),t instanceof It)return t;const e=t.getFilters();if(e.length===1)return R1(e[0]);if(U7(t))return t;const n=e.map((i=>R1(i))),r=[];return n.forEach((i=>{i instanceof It?r.push(i):i instanceof Yt&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Yt.create(r,t.op)}class $de{constructor(){this.Cn=new _D}addToCollectionParentIndex(e,n){return this.Cn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(ma.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(ma.min())}updateCollectionGroup(e,n,r){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class _D{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xt(Ut.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xt(Ut.comparator)).toArray()}}const BL="IndexedDbIndexManager",$b=new Uint8Array(0);class qde{constructor(e,n){this.databaseId=n,this.vn=new _D,this.Fn=new Fl((r=>qd(r)),((r,i)=>b0(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const a={collectionId:r,parent:ci(i)};return FL(e).put(a)}return fe.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[f7(n),""],!1,!0);return FL(e).J(i).next((a=>{for(const s of a){if(s.collectionId!==n)break;r.push(fo(s.parent))}return r}))}addFieldIndex(e,n){const r=fm(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const s=fh(e);return a.next((o=>{s.put(OL(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=fm(e),i=fh(e),a=dh(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=fm(e),r=dh(e),i=fh(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return fe.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new LL(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=dh(e);let i=!0;const a=new Map;return fe.forEach(this.Mn(n),(s=>this.xn(e,s).next((o=>{i&&(i=!!o),a.set(s,o)})))).next((()=>{if(i){let s=bt();const o=[];return fe.forEach(a,((c,u)=>{ke(BL,`Using index ${(function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map((N=>`${N.fieldPath}:${N.kind}`)).join(",")}`})(c)} to execute ${qd(n)}`);const f=(function(I,N){const O=ck(N);if(O===void 0)return null;for(const P of k1(I,O.fieldPath))switch(P.op){case"array-contains-any":return P.value.arrayValue.values||[];case"array-contains":return[P.value]}return null})(u,c),h=(function(I,N){const O=new Map;for(const P of ad(N))for(const k of k1(I,P.fieldPath))switch(k.op){case"==":case"in":O.set(P.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return O.set(P.fieldPath.canonicalString(),k.value),Array.from(O.values())}return null})(u,c),g=(function(I,N){const O=[];let P=!0;for(const k of ad(N)){const D=k.kind===0?yL(I,k.fieldPath,I.startAt):bL(I,k.fieldPath,I.startAt);O.push(D.value),P&&(P=D.inclusive)}return new ap(O,P)})(u,c),m=(function(I,N){const O=[];let P=!0;for(const k of ad(N)){const D=k.kind===0?bL(I,k.fieldPath,I.endAt):yL(I,k.fieldPath,I.endAt);O.push(D.value),P&&(P=D.inclusive)}return new ap(O,P)})(u,c),b=this.On(c,u,g),x=this.On(c,u,m),w=this.Nn(c,u,h),S=this.Bn(c.indexId,f,b,g.inclusive,x,m.inclusive,w);return fe.forEach(S,(T=>r.Y(T,n.limit).next((I=>{I.forEach((N=>{const O=Le.fromSegments(N.documentKey);s.has(O)||(s=s.add(O),o.push(O))}))}))))})).next((()=>o))}return fe.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=Ude(Yt.create(e.filters,"and")).map((r=>yk(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,a,s,o){const c=(n!=null?n.length:1)*Math.max(r.length,a.length),u=c/(n!=null?n.length:1),f=[];for(let h=0;h<c;++h){const g=n?this.Ln(n[h/u]):$b,m=this.kn(e,g,r[h%u],i),b=this.qn(e,g,a[h%u],s),x=o.map((w=>this.kn(e,g,w,!0)));f.push(...this.createRange(m,b,x))}return f}kn(e,n,r,i){const a=new gd(e,Le.empty(),n,r);return i?a:a.An()}qn(e,n,r,i){const a=new gd(e,Le.empty(),n,r);return i?a.An():a}xn(e,n){const r=new LL(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const o of a)r.yn(o)&&(!s||o.fields.length>s.fields.length)&&(s=o);return s}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return fe.forEach(i,(a=>this.xn(e,a).next((s=>{s?r!==0&&s.fields.length<(function(c){let u=new Xt(Rn.comparator),f=!1;for(const h of c.filters)for(const g of h.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:u=u.add(g.field));for(const h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(f?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new dm;for(const i of ad(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const s=r.Pn(i.kind);pd.Kt.Dt(a,s)}return r.un()}Ln(e){const n=new dm;return pd.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new dm;return pd.Kt.Dt(Sv(this.databaseId,n),r.Pn((function(a){const s=ad(a);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new dm);let a=0;for(const s of ad(e)){const o=r[a++];for(const c of i)if(this.Un(n,s.fieldPath)&&Ev(o))i=this.Kn(i,s,o);else{const u=c.Pn(s.kind);pd.Kt.Dt(o,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],a=[];for(const s of r.arrayValue.values||[])for(const o of i){const c=new dm;c.seed(o.un()),pd.Kt.Dt(s,c.Pn(n.kind)),a.push(c)}return a}Un(e,n){return!!e.filters.find((r=>r instanceof It&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=fm(e),i=fh(e);return(n?r.J(dk,IDBKeyRange.bound(n,n)):r.J()).next((a=>{const s=[];return fe.forEach(a,(o=>i.get([o.indexId,this.uid]).next((c=>{s.push((function(f,h){const g=h?new mv(h.sequenceNumber,new ma(Kd(h.readTime),new Le(fo(h.documentKey)),h.largestBatchId)):mv.empty(),m=f.fields.map((([b,x])=>new Bx(Rn.fromServerFormat(b),x)));return new S1(f.indexId,f.collectionGroup,m,g)})(o,c))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:lt(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=fm(e),a=fh(e);return this.Gn(e).next((s=>i.J(dk,IDBKeyRange.bound(n,n)).next((o=>fe.forEach(o,(c=>a.put(OL(c.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return fe.forEach(n,((i,a)=>{const s=r.get(i.collectionGroup);return(s?fe.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),fe.forEach(o,(c=>this.zn(e,i,c).next((u=>{const f=this.jn(a,c);return u.isEqual(f)?fe.resolve():this.Jn(e,a,c,u,f)})))))))}))}Hn(e,n,r,i){return dh(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return dh(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=dh(e);let a=new Xt(kc);return i.ee({index:T7,range:IDBKeyRange.only([r.indexId,this.uid,Wx(this.$n(r,n))])},((s,o)=>{a=a.add(new gd(r.indexId,n,zL(o.arrayValue),zL(o.directionalValue)))})).next((()=>a))}jn(e,n){let r=new Xt(kc);const i=this.Qn(n,e);if(i==null)return r;const a=ck(n);if(a!=null){const s=e.data.field(a.fieldPath);if(Ev(s))for(const o of s.arrayValue.values||[])r=r.add(new gd(n.indexId,e.key,this.Ln(o),i))}else r=r.add(new gd(n.indexId,e.key,$b,i));return r}Jn(e,n,r,i,a){ke(BL,"Updating index entries for document '%s'",n.key);const s=[];return(function(c,u,f,h,g){const m=c.getIterator(),b=u.getIterator();let x=ch(m),w=ch(b);for(;x||w;){let S=!1,T=!1;if(x&&w){const I=f(x,w);I<0?T=!0:I>0&&(S=!0)}else x!=null?T=!0:S=!0;S?(h(w),w=ch(b)):T?(g(x),x=ch(m)):(x=ch(m),w=ch(b))}})(i,a,kc,(o=>{s.push(this.Hn(e,n,r,o))}),(o=>{s.push(this.Yn(e,n,r,o))})),fe.waitFor(s)}Gn(e){let n=1;return fh(e).ee({index:E7,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,o)=>kc(s,o))).filter(((s,o,c)=>!o||kc(s,c[o-1])!==0));const i=[];i.push(e);for(const s of r){const o=kc(s,e),c=kc(s,n);if(o===0)i[0]=e.An();else if(o>0&&c<0)i.push(s),i.push(s.An());else if(c>0)break}i.push(n);const a=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const o=i[s].Vn(this.uid,$b,Le.empty()),c=i[s+1].Vn(this.uid,$b,Le.empty());a.push(IDBKeyRange.bound(o,c))}return a}Zn(e,n){return kc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(UL)}getMinOffset(e,n){return fe.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Be(44426))))).next(UL)}}function FL(t){return Ar(t,xv)}function dh(t){return Ar(t,qm)}function fm(t){return Ar(t,oD)}function fh(t){return Ar(t,$m)}function UL(t){Ye(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;iD(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ma(e.readTime,e.documentKey,n)}const $L={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Pq=41943040;class ai{static withCacheSize(e){return new ai(e,ai.DEFAULT_COLLECTION_PERCENTILE,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function Dq(t,e,n){const r=t.store(bs),i=t.store(Jh),a=[],s=IDBKeyRange.only(n.batchId);let o=0;const c=r.ee({range:s},((f,h,g)=>(o++,g.delete())));a.push(c.next((()=>{Ye(o===1,47070,{batchId:n.batchId})})));const u=[];for(const f of n.mutations){const h=w7(e,f.key.path,n.batchId);a.push(i.delete(h)),u.push(f.key)}return fe.waitFor(a).next((()=>u))}function M1(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Be(14731);e=t.noDocument}return JSON.stringify(e).length}ai.DEFAULT_COLLECTION_PERCENTILE=10,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ai.DEFAULT=new ai(Pq,ai.DEFAULT_COLLECTION_PERCENTILE,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ai.DISABLED=new ai(-1,0,0);class I_{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){Ye(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new I_(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pc(e).ee({index:wd,range:r},((i,a,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=_h(e),s=Pc(e);return s.add({}).next((o=>{Ye(typeof o=="number",49019);const c=new mD(o,n,r,i),u=(function(m,b,x){const w=x.baseMutations.map((T=>O1(m.yt,T))),S=x.mutations.map((T=>O1(m.yt,T)));return{userId:b,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:w,mutations:S}})(this.serializer,this.userId,c),f=[];let h=new Xt(((g,m)=>lt(g.canonicalString(),m.canonicalString())));for(const g of i){const m=w7(this.userId,g.key.path,o);h=h.add(g.key.path.popLast()),f.push(s.put(u)),f.push(a.put(m,_ue))}return h.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Xn[o]=c.keys()})),fe.waitFor(f).next((()=>c))}))}lookupMutationBatch(e,n){return Pc(e).get(n).next((r=>r?(Ye(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),hd(this.serializer,r)):null))}er(e,n){return this.Xn[n]?fe.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Pc(e).ee({index:wd,range:i},((s,o,c)=>{o.userId===this.userId&&(Ye(o.batchId>=r,47524,{tr:r}),a=hd(this.serializer,o)),c.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Pd;return Pc(e).ee({index:wd,range:n,reverse:!0},((i,a,s)=>{r=a.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Pd],[this.userId,Number.POSITIVE_INFINITY]);return Pc(e).J(wd,n).next((r=>r.map((i=>hd(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Fx(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return _h(e).ee({range:i},((s,o,c)=>{const[u,f,h]=s,g=fo(f);if(u===this.userId&&n.path.isEqual(g))return Pc(e).get(h).next((m=>{if(!m)throw Be(61480,{nr:s,batchId:h});Ye(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),a.push(hd(this.serializer,m))}));c.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xt(lt);const i=[];return n.forEach((a=>{const s=Fx(this.userId,a.path),o=IDBKeyRange.lowerBound(s),c=_h(e).ee({range:o},((u,f,h)=>{const[g,m,b]=u,x=fo(m);g===this.userId&&a.path.isEqual(x)?r=r.add(b):h.done()}));i.push(c)})),fe.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=Fx(this.userId,r),s=IDBKeyRange.lowerBound(a);let o=new Xt(lt);return _h(e).ee({range:s},((c,u,f)=>{const[h,g,m]=c,b=fo(g);h===this.userId&&r.isPrefixOf(b)?b.length===i&&(o=o.add(m)):f.done()})).next((()=>this.rr(e,o)))}rr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(Pc(e).get(a).next((s=>{if(s===null)throw Be(35274,{batchId:a});Ye(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:a}),r.push(hd(this.serializer,s))})))})),fe.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return Dq(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),fe.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return fe.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return _h(e).ee({range:r},((a,s,o)=>{if(a[0]===this.userId){const c=fo(a[1]);i.push(c)}else o.done()})).next((()=>{Ye(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return Oq(e,this.userId,n)}_r(e){return Nq(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Pd,lastStreamToken:""}))}}function Oq(t,e,n){const r=Fx(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let s=!1;return _h(t).ee({range:a,X:!0},((o,c,u)=>{const[f,h,g]=o;f===e&&h===i&&(s=!0),u.done()})).next((()=>s))}function Pc(t){return Ar(t,bs)}function _h(t){return Ar(t,Jh)}function Nq(t){return Ar(t,yv)}class Wd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Wd(0)}static cr(){return new Wd(-1)}}class Gde{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new Wd(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>Je.fromTimestamp(new vt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>hh(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(Ye(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return hh(e).ee(((s,o)=>{const c=Pm(o);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,a.push(this.removeTargetData(e,c)))})).next((()=>fe.waitFor(a))).next((()=>i))}forEachTarget(e,n){return hh(e).ee(((r,i)=>{const a=Pm(i);n(a)}))}lr(e){return qL(e).get(A1).next((n=>(Ye(n!==null,2888),n)))}hr(e,n){return qL(e).put(A1,n)}Pr(e,n){return hh(e).put(Aq(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=qd(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return hh(e).ee({range:i,index:S7},((s,o,c)=>{const u=Pm(o);b0(n,u.target)&&(a=u,c.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=Fc(e);return n.forEach((s=>{const o=ci(s.path);i.push(a.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,s))})),fe.waitFor(i)}removeMatchingKeys(e,n,r){const i=Fc(e);return fe.forEach(n,(a=>{const s=ci(a.path);return fe.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=Fc(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Fc(e);let a=bt();return i.ee({range:r,X:!0},((s,o,c)=>{const u=fo(s[1]),f=new Le(u);a=a.add(f)})).next((()=>a))}containsKey(e,n){const r=ci(n.path),i=IDBKeyRange.bound([r],[f7(r)],!1,!0);let a=0;return Fc(e).ee({index:sD,X:!0,range:i},(([s,o],c,u)=>{s!==0&&(a++,u.done())})).next((()=>a>0))}At(e,n){return hh(e).get(n).next((r=>r?Pm(r):null))}}function hh(t){return Ar(t,ep)}function qL(t){return Ar(t,Dd)}function Fc(t){return Ar(t,tp)}const GL="LruGarbageCollector",Rq=1048576;function HL([t,e],[n,r]){const i=lt(t,n);return i===0?lt(e,r):i}class Hde{constructor(e){this.Ir=e,this.buffer=new Xt(HL),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();HL(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Mq{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ke(GL,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){wu(n)?ke(GL,"Ignoring IndexedDB error during garbage collection: ",n):await xu(n)}await this.Vr(3e5)}))}}class Kde{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(zi.ce);const r=new Hde(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve($L)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$L):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,s,o,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,o=Date.now(),this.removeTargets(e,r,n)))).next((h=>(a=h,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(u=Date.now(),yh()<=Ct.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:h}))))}}function jq(t,e){return new Kde(t,e)}class Wde{constructor(e,n){this.db=e,this.garbageCollector=jq(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return qb(e,r)}removeReference(e,n,r){return qb(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return qb(e,n)}br(e,n){return(function(i,a){let s=!1;return Nq(i).te((o=>Oq(i,o,a).next((c=>(c&&(s=!0),fe.resolve(!c)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((s,o)=>{if(o<=n){const c=this.br(e,s).next((u=>{if(!u)return a++,r.getEntry(e,s).next((()=>(r.removeEntry(s,Je.min()),Fc(e).delete((function(h){return[0,ci(h.path)]})(s)))))}));i.push(c)}})).next((()=>fe.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return qb(e,n)}Sr(e,n){const r=Fc(e);let i,a=zi.ce;return r.ee({index:sD},(([s,o],{path:c,sequenceNumber:u})=>{s===0?(a!==zi.ce&&n(new Le(fo(i)),a),a=u,i=c):a=zi.ce})).next((()=>{a!==zi.ce&&n(new Le(fo(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qb(t,e){return Fc(t).put((function(r,i){return{targetId:0,path:ci(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class zq{constructor(){this.changes=new Fl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?fe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Yde{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return nd(e).put(r)}removeEntry(e,n,r){return nd(e).delete((function(a,s){const o=a.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],N1(s),o[o.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=$n.newInvalidDocument(n);return nd(e).ee({index:Ux,range:IDBKeyRange.only(hm(n))},((i,a)=>{r=this.Cr(n,a)})).next((()=>r))}vr(e,n){let r={size:0,document:$n.newInvalidDocument(n)};return nd(e).ee({index:Ux,range:IDBKeyRange.only(hm(n))},((i,a)=>{r={document:this.Cr(n,a),size:M1(a)}})).next((()=>r))}getEntries(e,n){let r=fa();return this.Fr(e,n,((i,a)=>{const s=this.Cr(i,a);r=r.insert(i,s)})).next((()=>r))}Mr(e,n){let r=fa(),i=new hn(Le.comparator);return this.Fr(e,n,((a,s)=>{const o=this.Cr(a,s);r=r.insert(a,o),i=i.insert(a,M1(s))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return fe.resolve();let i=new Xt(YL);n.forEach((c=>i=i.add(c)));const a=IDBKeyRange.bound(hm(i.first()),hm(i.last())),s=i.getIterator();let o=s.getNext();return nd(e).ee({index:Ux,range:a},((c,u,f)=>{const h=Le.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&YL(o,h)<0;)r(o,null),o=s.getNext();o&&o.isEqual(h)&&(r(o,u),o=s.hasNext()?s.getNext():null),o?f.j(hm(o)):f.done()})).next((()=>{for(;o;)r(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),N1(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return nd(e).J(IDBKeyRange.bound(o,c,!0)).next((u=>{a?.incrementDocumentReadCount(u.length);let f=fa();for(const h of u){const g=this.Cr(Le.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);g.isFoundDocument()&&(w0(n,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,n,r,i){let a=fa();const s=WL(n,r),o=WL(n,ma.max());return nd(e).ee({index:_7,range:IDBKeyRange.bound(s,o,!0)},((c,u,f)=>{const h=this.Cr(Le.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);a=a.insert(h.key,h),a.size===i&&f.done()})).next((()=>a))}newChangeBuffer(e){return new Xde(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return KL(e).get(uk).next((n=>(Ye(!!n,20021),n)))}Dr(e,n){return KL(e).put(uk,n)}Cr(e,n){if(n){const r=Mde(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Je.min())))return r}return $n.newInvalidDocument(e)}}function Lq(t){return new Yde(t)}class Xde extends zq{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Fl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Xt(((a,s)=>lt(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const o=this.Br.get(a);if(n.push(this.Nr.removeEntry(e,a,o.readTime)),s.isValidDocument()){const c=PL(this.Nr.serializer,s);i=i.add(a.path.popLast());const u=M1(c);r+=u-o.size,n.push(this.Nr.addEntry(e,a,c))}else if(r-=o.size,this.trackRemovals){const c=PL(this.Nr.serializer,s.convertToNoDocument(Je.min()));n.push(this.Nr.addEntry(e,a,c))}})),i.forEach((a=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Nr.updateMetadata(e,r)),fe.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((a,s)=>{this.Br.set(a,{size:s,readTime:r.get(a).readTime})})),r)))}}function KL(t){return Ar(t,bv)}function nd(t){return Ar(t,T1)}function hm(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WL(t,e){const n=e.documentKey.path.toArray();return[t,N1(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function YL(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=lt(n[a],r[a]),i)return i;return i=lt(n.length,r.length),i||(i=lt(n[n.length-2],r[r.length-2]),i||lt(n[n.length-1],r[r.length-1]))}class Qde{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Vq{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Wm(r.mutation,i,Li.empty(),vt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,bt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=bt()){const i=ho();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let s=Im();return a.forEach(((o,c)=>{s=s.insert(o,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=ho();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,bt())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,o)=>{n.set(s,o)}))}))}computeViews(e,n,r,i){let a=fa();const s=Km(),o=(function(){return Km()})();return n.forEach(((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Ul)?a=a.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),Wm(f.mutation,u,f.mutation.getFieldMask(),vt.now())):s.set(u.key,Li.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((u,f)=>s.set(u,f))),n.forEach(((u,f)=>o.set(u,new Qde(f,s.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,n){const r=Km();let i=new hn(((s,o)=>s-o)),a=bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const o of s)o.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let f=r.get(c)||Li.empty();f=o.applyToLocalView(u,f),r.set(c,f);const h=(i.get(o.batchId)||bt()).add(c);i=i.insert(o.batchId,h)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,f=c.value,h=tq();f.forEach((g=>{if(!a.has(g)){const m=lq(n.get(g),r.get(g));m!==null&&h.set(g,m),a=a.add(g)}})),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return fe.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return Le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Y7(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):fe.resolve(ho());let o=Zh,c=a;return s.next((u=>fe.forEach(u,((f,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(f)?fe.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{c=c.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,a))).next((()=>this.computeViews(e,c,u,bt()))).next((f=>({batchId:o,changes:eq(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Le(n)).next((r=>{let i=Im();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=Im();return this.indexManager.getCollectionParents(e,a).next((o=>fe.forEach(o,(c=>{const u=(function(h,g){return new Vp(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((f=>{f.forEach(((h,g)=>{s=s.insert(h,g)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((s=>{a.forEach(((c,u)=>{const f=u.getKey();s.get(f)===null&&(s=s.insert(f,$n.newInvalidDocument(f)))}));let o=Im();return s.forEach(((c,u)=>{const f=a.get(c);f!==void 0&&Wm(f.mutation,u,Li.empty(),vt.now()),w0(n,u)&&(o=o.insert(c,u))})),o}))}}class Zde{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return fe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ti(i.createTime)}})(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:Cq(i.bundledQuery),readTime:Ti(i.readTime)}})(n)),fe.resolve()}}class Jde{constructor(){this.overlays=new hn(Le.comparator),this.qr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ho();return fe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.St(e,n,a)})),fe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),fe.resolve()}getOverlaysForCollection(e,n,r){const i=ho(),a=n.length+1,s=new Le(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new hn(((u,f)=>u-f));const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=a.get(u.largestBatchId);f===null&&(f=ho(),a=a.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=ho(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,f)=>o.set(u,f))),!(o.size()>=i)););return fe.resolve(o)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new yD(n,r));let a=this.qr.get(n);a===void 0&&(a=bt(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class efe{constructor(){this.sessionToken=Zn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}class SD{constructor(){this.Qr=new Xt(jr.$r),this.Ur=new Xt(jr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new jr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new jr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Le(new Ut([])),r=new jr(n,e),i=new jr(n,e+1),a=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),a.push(s.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Le(new Ut([])),r=new jr(n,e),i=new jr(n,e+1);let a=bt();return this.Ur.forEachInRange([r,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const n=new jr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class jr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Le.comparator(e.key,n.key)||lt(e.Yr,n.Yr)}static Kr(e,n){return lt(e.Yr,n.Yr)||Le.comparator(e.key,n.key)}}class tfe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Xt(jr.$r)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new mD(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Zr=this.Zr.add(new jr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return fe.resolve(s)}lookupMutationBatch(e,n){return fe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return fe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?Pd:this.tr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new jr(n,0),i=new jr(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(s=>{const o=this.Xr(s.Yr);a.push(o)})),fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xt(lt);return n.forEach((i=>{const a=new jr(i,0),s=new jr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,s],(o=>{r=r.add(o.Yr)}))})),fe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Le.isDocumentKey(a)||(a=a.child(""));const s=new jr(new Le(a),0);let o=new Xt(lt);return this.Zr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.Yr)),!0)}),s),fe.resolve(this.ti(o))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return fe.forEach(n.mutations,(i=>{const a=new jr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new jr(n,0),i=this.Zr.firstAfterOrEqual(r);return fe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class nfe{constructor(e){this.ri=e,this.docs=(function(){return new hn(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return fe.resolve(r?r.document.mutableCopy():$n.newInvalidDocument(n))}getEntries(e,n){let r=fa();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():$n.newInvalidDocument(i))})),fe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=fa();const s=n.path,o=new Le(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||iD(m7(f),r)<=0||(i.has(f.key)||w0(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return fe.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Be(9500)}ii(e,n){return fe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new rfe(this)}getSize(e){return fe.resolve(this.size)}}class rfe extends zq{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),fe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class ife{constructor(e){this.persistence=e,this.si=new Fl((n=>qd(n)),b0),this.lastRemoteSnapshotVersion=Je.min(),this.highestTargetId=0,this.oi=0,this._i=new SD,this.targetCount=0,this.ai=Wd.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),fe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Wd(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.Pr(n),fe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach(((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),fe.waitFor(a).next((()=>i))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return fe.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),fe.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),fe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return fe.resolve(r)}containsKey(e,n){return fe.resolve(this._i.containsKey(n))}}class ED{constructor(e,n){this.ui={},this.overlays={},this.ci=new zi(0),this.li=!1,this.li=!0,this.hi=new efe,this.referenceDelegate=e(this),this.Pi=new ife(this),this.indexManager=new $de,this.remoteDocumentCache=(function(i){return new nfe(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Tq(n),this.Ii=new Zde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Jde,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new tfe(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ke("MemoryPersistence","Starting transaction:",e);const i=new afe(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,n){return fe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class afe extends y7{constructor(e){super(),this.currentSequenceNumber=e}}class k_{constructor(e){this.persistence=e,this.Ri=new SD,this.Vi=null}static mi(e){return new k_(e)}get fi(){if(this.Vi)return this.Vi;throw Be(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),fe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,(r=>{const i=Le.fromPath(r);return this.gi(e,i).next((a=>{a||n.removeEntry(i,Je.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return fe.or([()=>fe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class j1{constructor(e,n){this.persistence=e,this.pi=new Fl((r=>ci(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=jq(this,n)}static mi(e,n){return new j1(e,n)}Ei(){}di(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return fe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?fe.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,n).next((o=>{o||(r++,a.removeEntry(s,Je.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),fe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qx(e.data.value)),n}br(e,n,r){return fe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return fe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class sfe{constructor(e){this.serializer=e}k(e,n,r,i){const a=new v_("createOrUpgrade",n);r<1&&i>=1&&((function(c){c.createObjectStore(y0)})(e),(function(c){c.createObjectStore(yv,{keyPath:wue}),c.createObjectStore(bs,{keyPath:sL,autoIncrement:!0}).createIndex(wd,oL,{unique:!0}),c.createObjectStore(Jh)})(e),XL(e),(function(c){c.createObjectStore(sd)})(e));let s=fe.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(tp),c.deleteObjectStore(ep),c.deleteObjectStore(Dd)})(e),XL(e)),s=s.next((()=>(function(c){const u=c.store(Dd),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Je.min().toTimestamp(),targetCount:0};return u.put(A1,f)})(a)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(c,u){return u.store(bs).J().next((h=>{c.deleteObjectStore(bs),c.createObjectStore(bs,{keyPath:sL,autoIncrement:!0}).createIndex(wd,oL,{unique:!0});const g=u.store(bs),m=h.map((b=>g.put(b)));return fe.waitFor(m)}))})(e,a)))),s=s.next((()=>{(function(c){c.createObjectStore(np,{keyPath:Pue})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.yi(a)))),r<6&&i>=6&&(s=s.next((()=>((function(c){c.createObjectStore(bv)})(e),this.wi(a))))),r<7&&i>=7&&(s=s.next((()=>this.Si(a)))),r<8&&i>=8&&(s=s.next((()=>this.bi(e,a)))),r<9&&i>=9&&(s=s.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.Di(a)))),r<11&&i>=11&&(s=s.next((()=>{(function(c){c.createObjectStore(b_,{keyPath:Due})})(e),(function(c){c.createObjectStore(x_,{keyPath:Oue})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(c){const u=c.createObjectStore(w_,{keyPath:Vue});u.createIndex(fk,Bue,{unique:!1}),u.createIndex(A7,Fue,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(c){const u=c.createObjectStore(T1,{keyPath:Sue});u.createIndex(Ux,Eue),u.createIndex(_7,Tue)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(sd)))),r<14&&i>=14&&(s=s.next((()=>this.Fi(e,a)))),r<15&&i>=15&&(s=s.next((()=>(function(c){c.createObjectStore(oD,{keyPath:Nue,autoIncrement:!0}).createIndex(dk,Rue,{unique:!1}),c.createObjectStore($m,{keyPath:Mue}).createIndex(E7,jue,{unique:!1}),c.createObjectStore(qm,{keyPath:zue}).createIndex(T7,Lue,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore($m).clear()})).next((()=>{n.objectStore(qm).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(c){c.createObjectStore(lD,{keyPath:Uue})})(e)}))),r<18&&i>=18&&q8()&&(s=s.next((()=>{n.objectStore($m).clear()})).next((()=>{n.objectStore(qm).clear()}))),s}wi(e){let n=0;return e.store(sd).ee(((r,i)=>{n+=M1(i)})).next((()=>{const r={byteSize:n};return e.store(bv).put(uk,r)}))}yi(e){const n=e.store(yv),r=e.store(bs);return n.J().next((i=>fe.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,Pd],[a.userId,a.lastAcknowledgedBatchId]);return r.J(wd,s).next((o=>fe.forEach(o,(c=>{Ye(c.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=hd(this.serializer,c);return Dq(e,a.userId,u).next((()=>{}))}))))}))))}Si(e){const n=e.store(tp),r=e.store(sd);return e.store(Dd).get(A1).next((i=>{const a=[];return r.ee(((s,o)=>{const c=new Ut(s),u=(function(h){return[0,ci(h)]})(c);a.push(n.get(u).next((f=>f?fe.resolve():(h=>n.put({targetId:0,path:ci(h),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>fe.waitFor(a)))}))}bi(e,n){e.createObjectStore(xv,{keyPath:kue});const r=n.store(xv),i=new _D,a=s=>{if(i.add(s)){const o=s.lastSegment(),c=s.popLast();return r.put({collectionId:o,parent:ci(c)})}};return n.store(sd).ee({X:!0},((s,o)=>{const c=new Ut(s);return a(c.popLast())})).next((()=>n.store(Jh).ee({X:!0},(([s,o,c],u)=>{const f=fo(o);return a(f.popLast())}))))}Di(e){const n=e.store(ep);return n.ee(((r,i)=>{const a=Pm(i),s=Aq(this.serializer,a);return n.put(s)}))}Ci(e,n){const r=n.store(sd),i=[];return r.ee(((a,s)=>{const o=n.store(T1),c=(function(h){return h.document?new Le(Ut.fromString(h.document.name).popFirst(5)):h.noDocument?Le.fromSegments(h.noDocument.path):h.unknownDocument?Le.fromSegments(h.unknownDocument.path):Be(36783)})(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(o.put(u))})).next((()=>fe.waitFor(i)))}Fi(e,n){const r=n.store(bs),i=Lq(this.serializer),a=new ED(k_.mi,this.serializer.yt);return r.J().next((s=>{const o=new Map;return s.forEach((c=>{let u=o.get(c.userId)??bt();hd(this.serializer,c).keys().forEach((f=>u=u.add(f))),o.set(c.userId,u)})),fe.forEach(o,((c,u)=>{const f=new ii(u),h=C_.wt(this.serializer,f),g=a.getIndexManager(f),m=I_.wt(f,this.serializer,g,a.referenceDelegate);return new Vq(i,m,h,g).recalculateAndSaveOverlaysForDocumentKeys(new hk(n,zi.ce),c).next()}))}))}}function XL(t){t.createObjectStore(tp,{keyPath:Cue}).createIndex(sD,Iue,{unique:!0}),t.createObjectStore(ep,{keyPath:"targetId"}).createIndex(S7,Aue,{unique:!0}),t.createObjectStore(Dd)}const Dc="IndexedDbPersistence",SA=18e5,EA=5e3,TA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ofe="main";class TD{constructor(e,n,r,i,a,s,o,c,u,f,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=a,this.window=s,this.document=o,this.xi=u,this.Oi=f,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!TD.v())throw new Re(we.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wde(this,i),this.$i=n+ofe,this.serializer=new Tq(c),this.Ui=new eu(this.$i,this.Ni,new sfe(this.serializer)),this.hi=new zde,this.Pi=new Gde(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Lq(this.serializer),this.Ii=new jde,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&Qn(Dc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(we.FAILED_PRECONDITION,TA);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new zi(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Gb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(wu(e))return ke(Dc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke(Dc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return pm(e).get(lh).next((n=>fe.resolve(this.es(n))))}ts(e){return Gb(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,SA)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Ar(n,np);return r.J().next((i=>{const a=this.ss(i,SA),s=i.filter((o=>a.indexOf(o)===-1));return fe.forEach(s,(o=>r.delete(o.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?fe.resolve(!0):pm(e).get(lh).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,EA)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Re(we.FAILED_PRECONDITION,TA);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gb(e).J().next((r=>this.ss(r,EA).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(a||s&&o)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&ke(Dc,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[y0,np],(e=>{const n=new hk(e,zi.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Gb(e).J().next((n=>this.ss(n,SA).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return I_.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qde(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return C_.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){ke(Dc,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(c){return c===18?Gue:c===17?P7:c===16?que:c===15?cD:c===14?k7:c===13?I7:c===12?$ue:c===11?C7:void Be(60245)})(this.Ni);let s;return this.Ui.runTransaction(e,i,a,(o=>(s=new hk(o,this.ci?this.ci.next():zi.ce),n==="readwrite-primary"?this.Hi(s).next((c=>!!c||this.Yi(s))).next((c=>{if(!c)throw Qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Re(we.FAILED_PRECONDITION,v7);return r(s)})).next((c=>this.Xi(s).next((()=>c)))):this.Is(s).next((()=>r(s)))))).then((o=>(s.raiseOnCommittedEvent(),o)))}Is(e){return pm(e).get(lh).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,EA)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Re(we.FAILED_PRECONDITION,TA)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pm(e).put(lh,n)}static v(){return eu.v()}Zi(e){const n=pm(e);return n.get(lh).next((r=>this.es(r)?(ke(Dc,"Releasing primary lease."),n.delete(lh)):fe.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Qn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;$8()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return ke(Dc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Qn(Dc,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Qn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pm(t){return Ar(t,y0)}function Gb(t){return Ar(t,np)}function Bq(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class AD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=bt(),i=bt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new AD(e,n.fromCache,r,i)}}class lfe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Fq{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return $8()?8:b7(Tr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ws(e,n,i,r).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new lfe;return this.Ss(e,n,s).next((o=>{if(a.result=o,this.Vs)return this.bs(e,n,s,o.size)}))})).next((()=>a.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(yh()<=Ct.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",bh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(yh()<=Ct.DEBUG&&ke("QueryEngine","Query:",bh(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(yh()<=Ct.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",bh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pa(n))):fe.resolve())}ys(e,n){if(xL(n))return fe.resolve(null);let r=pa(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=P1(n,null,"F"),r=pa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const s=bt(...a);return this.ps.getDocuments(e,s).next((o=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.Ds(n,o);return this.Cs(n,u,s,c.readTime)?this.ys(e,P1(n,null,"F")):this.vs(e,u,n,c)}))))})))))}ws(e,n,r,i){return xL(n)||i.isEqual(Je.min())?fe.resolve(null):this.ps.getDocuments(e,r).next((a=>{const s=this.Ds(n,a);return this.Cs(n,s,r,i)?fe.resolve(null):(yh()<=Ct.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bh(n)),this.vs(e,s,n,g7(i,Zh)).next((o=>o)))}))}Ds(e,n){let r=new Xt(Z7(e));return n.forEach(((i,a)=>{w0(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return yh()<=Ct.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",bh(n)),this.ps.getDocumentsMatchingQuery(e,n,ma.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((s=>{a=a.insert(s.key,s)})),a)))}}const CD="LocalStore",cfe=3e8;class ufe{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new hn(lt),this.xs=new Fl((a=>qd(a)),b0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vq(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Uq(t,e,n,r){return new ufe(t,e,n,r)}async function $q(t,e){const n=He(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const s=[],o=[];let c=bt();for(const u of i){s.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of a){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Ls:u,removedBatchIds:s,addedBatchIds:o})))}))}))}function dfe(t,e){const n=He(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,c,u,f){const h=u.batch,g=h.keys();let m=fe.resolve();return g.forEach((b=>{m=m.next((()=>f.getEntry(c,b))).next((x=>{const w=u.docVersions.get(b);Ye(w!==null,48541),x.version.compareTo(w)<0&&(h.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),f.addEntry(x)))}))})),m.next((()=>o.mutationQueue.removeMutationBatch(c,h)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let c=bt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function qq(t){const e=He(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function ffe(t,e){const n=He(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];e.targetChanges.forEach(((f,h)=>{const g=i.get(h);if(!g)return;o.push(n.Pi.removeMatchingKeys(a,f.removedDocuments,h).next((()=>n.Pi.addMatchingKeys(a,f.addedDocuments,h))));let m=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Zn.EMPTY_BYTE_STRING,Je.min()).withLastLimboFreeSnapshotVersion(Je.min()):f.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(f.resumeToken,r)),i=i.insert(h,m),(function(x,w,S){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=cfe?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(g,m,f)&&o.push(n.Pi.updateTargetData(a,m))}));let c=fa(),u=bt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))})),o.push(hfe(a,s,e.documentUpdates).next((f=>{c=f.ks,u=f.qs}))),!r.isEqual(Je.min())){const f=n.Pi.getLastRemoteSnapshotVersion(a).next((h=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));o.push(f)}return fe.waitFor(o).next((()=>s.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,c,u))).next((()=>c))})).then((a=>(n.Ms=i,a)))}function hfe(t,e,n){let r=bt(),i=bt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let s=fa();return n.forEach(((o,c)=>{const u=a.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(Je.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):ke(CD,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function pfe(t,e){const n=He(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Pd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function z1(t,e){const n=He(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((a=>a?(i=a,fe.resolve(i)):n.Pi.allocateTargetId(r).next((s=>(i=new dl(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function cp(t,e,n){const r=He(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!wu(s))throw s;ke(CD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Ck(t,e,n){const r=He(t);let i=Je.min(),a=bt();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,u,f){const h=He(c),g=h.xs.get(f);return g!==void 0?fe.resolve(h.Ms.get(g)):h.Pi.getTargetData(u,f)})(r,s,pa(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,o.targetId).next((c=>{a=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Je.min(),n?a:bt()))).next((o=>(Kq(r,Q7(e),o),{documents:o,Qs:a})))))}function Gq(t,e){const n=He(t),r=He(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((s=>s?s.target:null))))}function Hq(t,e){const n=He(t),r=n.Os.get(e)||Je.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,g7(r,Zh),Number.MAX_SAFE_INTEGER))).then((i=>(Kq(n,e,i),i)))}function Kq(t,e,n){let r=t.Os.get(e)||Je.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}const Wq="firestore_clients";function QL(t,e){return`${Wq}_${t}_${e}`}const Yq="firestore_mutations";function ZL(t,e,n){let r=`${Yq}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Xq="firestore_targets";function AA(t,e){return`${Xq}_${t}_${e}`}const uo="SharedClientState";class L1{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new Re(i.error.code,i.error.message))),s?new L1(e,n,i.state,a):(Qn(uo,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ym{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new Re(r.error.code,r.error.message))),a?new Ym(e,r.state,i):(Qn(uo,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class V1{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=pD();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=x7(r.activeTargetIds[s]),a=a.add(r.activeTargetIds[s]);return i?new V1(e,a):(Qn(uo,`Failed to parse client data for instance '${e}': ${n}`),null)}}class ID{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new ID(n.clientId,n.onlineState):(Qn(uo,`Failed to parse online state: ${e}`),null)}}class Ik{constructor(){this.activeTargetIds=pD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CA{constructor(e,n,r,i,a){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new hn(lt),this.started=!1,this.Xs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.eo=QL(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Ik),this.ro=new RegExp(`^${Wq}_${s}_([^_]*)$`),this.io=new RegExp(`^${Yq}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Xq}_${s}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(QL(this.persistenceKey,r));if(i){const a=V1.Ws(r,i);a&&(this.Zs=this.Zs.insert(a.clientId,a))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(AA(this.persistenceKey,e));if(i){const a=Ym.Ws(e,i);a&&(r=a.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(AA(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ke(uo,"READ",e,n),n}setItem(e,n){ke(uo,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){ke(uo,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(ke(uo,"EVENT",n.key,n.newValue),n.key===this.eo)return void Qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(a){let s=zi.ce;if(a!=null)try{const o=JSON.parse(a);Ye(typeof o=="number",30636,{So:a}),s=o}catch(o){Qn(uo,"Failed to read sequence number from WebStorage",o)}return s})(n.newValue);r!==zi.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new L1(this.currentUser,e,n,r),a=ZL(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Gs())}Po(e){const n=ZL(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=AA(this.persistenceKey,e),a=new Ym(e,n,r);this.setItem(i,a.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return V1.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return L1.Ws(new ii(a),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Ym.Ws(i,n)}uo(e){return ID.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ke(uo,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),a=this.lo(r),s=[],o=[];return a.forEach((c=>{i.has(c)||s.push(c)})),i.forEach((c=>{a.has(c)||o.push(c)})),this.syncEngine.Fo(s,o).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=pD();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class Qq{constructor(){this.Mo=new Ik,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ik,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gfe{Oo(e){}shutdown(){}}const JL="ConnectivityMonitor";class e5{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ke(JL,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ke(JL,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Hb=null;function kk(){return Hb===null?Hb=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hb++,"0x"+Hb.toString(16)}const IA="RestConnection",mfe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vfe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===C1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const s=kk(),o=this.zo(e,n.toUriEncodedString());ke(IA,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,a);const{host:u}=new URL(o),f=yu(u);return this.Jo(e,o,c,r,f).then((h=>(ke(IA,`Received RPC '${e}' ${s}: `,h),h)),(h=>{throw gv(IA,`RPC '${e}' ${s} failed with error: `,h,"url: ",o,"request:",r),h}))}Ho(e,n,r,i,a,s){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Lp})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,n){const r=mfe[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class yfe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ni="WebChannelConnection";class bfe extends vfe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const s=kk();return new Promise(((o,c)=>{const u=new s7;u.setWithCredentials(!0),u.listenOnce(o7.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Vx.NO_ERROR:const h=u.getResponseJson();ke(ni,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Vx.TIMEOUT:ke(ni,`RPC '${e}' ${s} timed out`),c(new Re(we.DEADLINE_EXCEEDED,"Request time out"));break;case Vx.HTTP_ERROR:const g=u.getStatus();if(ke(ni,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const b=m?.error;if(b&&b.status&&b.message){const x=(function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(T)>=0?T:we.UNKNOWN})(b.status);c(new Re(x,b.message))}else c(new Re(we.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Re(we.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ke(ni,`RPC '${e}' ${s} completed.`)}}));const f=JSON.stringify(i);ke(ni,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const i=kk(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=u7(),o=c7(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=a.join("");ke(ni,`Creating RPC '${e}' stream ${i}: ${f}`,c);const h=s.createWebChannel(f,c);this.I_(h);let g=!1,m=!1;const b=new yfe({Yo:w=>{m?ke(ni,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(g||(ke(ni,`Opening RPC '${e}' stream ${i} transport.`),h.open(),g=!0),ke(ni,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},Zo:()=>h.close()}),x=(w,S,T)=>{w.listen(S,(I=>{try{T(I)}catch(N){setTimeout((()=>{throw N}),0)}}))};return x(h,Cm.EventType.OPEN,(()=>{m||(ke(ni,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),x(h,Cm.EventType.CLOSE,(()=>{m||(m=!0,ke(ni,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(h))})),x(h,Cm.EventType.ERROR,(w=>{m||(m=!0,gv(ni,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),b.a_(new Re(we.UNAVAILABLE,"The operation could not be completed")))})),x(h,Cm.EventType.MESSAGE,(w=>{if(!m){const S=w.data[0];Ye(!!S,16349);const T=S,I=T?.error||T[0]?.error;if(I){ke(ni,`RPC '${e}' stream ${i} received error:`,I);const N=I.status;let O=(function(D){const R=lr[D];if(R!==void 0)return dq(R)})(N),P=I.message;O===void 0&&(O=we.INTERNAL,P="Unknown error status: "+N+" with message "+I.message),m=!0,b.a_(new Re(O,P)),h.close()}else ke(ni,`RPC '${e}' stream ${i} received:`,S),b.u_(S)}})),x(o,l7.STAT_EVENT,(w=>{w.stat===ok.PROXY?ke(ni,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===ok.NOPROXY&&ke(ni,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Zq(){return typeof window<"u"?window:null}function Yx(){return typeof document<"u"?document:null}function P_(t){return new Tde(t,!0)}class Jq{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const t5="PersistentStream";class eG{constructor(e,n,r,i,a,s,o,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jq(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===we.RESOURCE_EXHAUSTED?(Qn(n.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Re(we.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(t5,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ke(t5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xfe extends eG{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Ide(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Je.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Je.min():s.readTime?Ti(s.readTime):Je.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=_k(this.serializer),n.addTarget=(function(a,s){let o;const c=s.target;if(o=I1(c)?{documents:bq(a,c)}:{query:xq(a,c).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=pq(a,s.resumeToken);const u=xk(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(Je.min())>0){o.readTime=lp(a,s.snapshotVersion.toTimestamp());const u=xk(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=Pde(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=_k(this.serializer),n.removeTarget=e,this.q_(n)}}class wfe extends eG{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=kde(e.writeResults,e.commitTime),r=Ti(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=_k(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>O1(this.serializer,r)))};this.q_(n)}}class _fe{}class Sfe extends _fe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Re(we.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Go(e,wk(n,r),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(we.UNKNOWN,a.toString())}))}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Ho(e,wk(n,r),i,s,o,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(we.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Efe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qn(n),this.aa=!1):ke("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Yd="RemoteStore";class Tfe{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{ff(this)&&(ke(Yd,"Restarting streams for network reachability change."),await(async function(c){const u=He(c);u.Ea.add(4),await T0(u),u.Ra.set("Unknown"),u.Ea.delete(4),await D_(u)})(this))}))})),this.Ra=new Efe(r,i)}}async function D_(t){if(ff(t))for(const e of t.da)await e(!0)}async function T0(t){for(const e of t.da)await e(!1)}function O_(t,e){const n=He(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),DD(n)?PD(n):Up(n).O_()&&kD(n,e))}function up(t,e){const n=He(t),r=Up(n);n.Ia.delete(e),r.O_()&&tG(n,e),n.Ia.size===0&&(r.O_()?r.L_():ff(n)&&n.Ra.set("Unknown"))}function kD(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Je.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Up(t).Y_(e)}function tG(t,e){t.Va.Ue(e),Up(t).Z_(e)}function PD(t){t.Va=new wde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Up(t).start(),t.Ra.ua()}function DD(t){return ff(t)&&!Up(t).x_()&&t.Ia.size>0}function ff(t){return He(t).Ea.size===0}function nG(t){t.Va=void 0}async function Afe(t){t.Ra.set("Online")}async function Cfe(t){t.Ia.forEach(((e,n)=>{kD(t,e)}))}async function Ife(t,e){nG(t),DD(t)?(t.Ra.ha(e),PD(t)):t.Ra.set("Unknown")}async function kfe(t,e,n){if(t.Ra.set("Online"),e instanceof hq&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.Va.removeTarget(o))})(t,e)}catch(r){ke(Yd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await B1(t,r)}else if(e instanceof Kx?t.Va.Ze(e):e instanceof fq?t.Va.st(e):t.Va.tt(e),!n.isEqual(Je.min()))try{const r=await qq(t.localStore);n.compareTo(r)>=0&&await(function(a,s){const o=a.Va.Tt(s);return o.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ia.get(u);f&&a.Ia.set(u,f.withResumeToken(c.resumeToken,s))}})),o.targetMismatches.forEach(((c,u)=>{const f=a.Ia.get(c);if(!f)return;a.Ia.set(c,f.withResumeToken(Zn.EMPTY_BYTE_STRING,f.snapshotVersion)),tG(a,c);const h=new dl(f.target,c,u,f.sequenceNumber);kD(a,h)})),a.remoteSyncer.applyRemoteEvent(o)})(t,n)}catch(r){ke(Yd,"Failed to raise snapshot:",r),await B1(t,r)}}async function B1(t,e,n){if(!wu(e))throw e;t.Ea.add(1),await T0(t),t.Ra.set("Offline"),n||(n=()=>qq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ke(Yd,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await D_(t)}))}function rG(t,e){return e().catch((n=>B1(t,n,e)))}async function Fp(t){const e=He(t),n=ou(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pd;for(;Pfe(e);)try{const i=await pfe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Dfe(e,i)}catch(i){await B1(e,i)}iG(e)&&aG(e)}function Pfe(t){return ff(t)&&t.Ta.length<10}function Dfe(t,e){t.Ta.push(e);const n=ou(t);n.O_()&&n.X_&&n.ea(e.mutations)}function iG(t){return ff(t)&&!ou(t).x_()&&t.Ta.length>0}function aG(t){ou(t).start()}async function Ofe(t){ou(t).ra()}async function Nfe(t){const e=ou(t);for(const n of t.Ta)e.ea(n.mutations)}async function Rfe(t,e,n){const r=t.Ta.shift(),i=vD.from(r,e,n);await rG(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Fp(t)}async function Mfe(t,e){e&&ou(t).X_&&await(async function(r,i){if((function(s){return yde(s)&&s!==we.ABORTED})(i.code)){const a=r.Ta.shift();ou(r).B_(),await rG(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Fp(r)}})(t,e),iG(t)&&aG(t)}async function n5(t,e){const n=He(t);n.asyncQueue.verifyOperationInProgress(),ke(Yd,"RemoteStore received new credentials");const r=ff(n);n.Ea.add(3),await T0(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await D_(n)}async function Pk(t,e){const n=He(t);e?(n.Ea.delete(2),await D_(n)):e||(n.Ea.add(2),await T0(n),n.Ra.set("Unknown"))}function Up(t){return t.ma||(t.ma=(function(n,r,i){const a=He(n);return a.sa(),new xfe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:Afe.bind(null,t),t_:Cfe.bind(null,t),r_:Ife.bind(null,t),H_:kfe.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),DD(t)?PD(t):t.Ra.set("Unknown")):(await t.ma.stop(),nG(t))}))),t.ma}function ou(t){return t.fa||(t.fa=(function(n,r,i){const a=He(n);return a.sa(),new wfe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ofe.bind(null,t),r_:Mfe.bind(null,t),ta:Nfe.bind(null,t),na:Rfe.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Fp(t)):(await t.fa.stop(),t.Ta.length>0&&(ke(Yd,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class OD{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new bo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new OD(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ND(t,e){if(Qn("AsyncQueue",`${e}: ${t}`),wu(t))return new Re(we.UNAVAILABLE,`${e}: ${t}`);throw t}class qh{static emptySet(e){return new qh(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Le.comparator(n.key,r.key):(n,r)=>Le.comparator(n.key,r.key),this.keyedMap=Im(),this.sortedSet=new hn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class r5{constructor(){this.ga=new hn(Le.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Be(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class dp{constructor(e,n,r,i,a,s,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach((o=>{s.push({type:0,doc:o})})),new dp(e,n,qh.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&E_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class jfe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class zfe{constructor(){this.queries=i5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=He(n),a=i.queries;i.queries=i5(),a.forEach(((s,o)=>{for(const c of o.Sa)c.onError(r)}))})(this,new Re(we.ABORTED,"Firestore shutting down"))}}function i5(){return new Fl((t=>X7(t)),E_)}async function RD(t,e){const n=He(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new jfe,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=ND(s,`Initialization of query '${bh(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&jD(n)}async function MD(t,e){const n=He(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.Sa.indexOf(e);s>=0&&(a.Sa.splice(s,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Lfe(t,e){const n=He(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.Sa)o.Fa(i)&&(r=!0);s.wa=i}}r&&jD(n)}function Vfe(t,e,n){const r=He(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function jD(t){t.Ca.forEach((e=>{e.next()}))}var Dk,a5;(a5=Dk||(Dk={})).Ma="default",a5.Cache="cache";class zD{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new dp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=dp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dk.Cache}}class sG{constructor(e){this.key=e}}class oG{constructor(e){this.key=e}}class Bfe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=bt(),this.mutatedKeys=bt(),this.eu=Z7(e),this.tu=new qh(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new r5,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,h)=>{const g=i.get(f),m=w0(this.query,h)?h:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;g&&m?g.data.isEqual(m.data)?b!==x&&(r.track({type:3,doc:m}),w=!0):this.su(g,m)||(r.track({type:2,doc:m}),w=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(o=!0)):!g&&m?(r.track({type:0,doc:m}),w=!0):g&&!m&&(r.track({type:1,doc:g}),w=!0,(c||u)&&(o=!0)),w&&(m?(s=s.add(m),a=x?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((f,h)=>(function(m,b){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{Rt:w})}};return x(m)-x(b)})(f.type,h.type)||this.eu(f.doc,h.doc))),this.ou(r),i=i??!1;const o=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,s.length!==0||u?{snapshot:new dp(this.query,e.tu,a,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r5,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=bt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new oG(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new sG(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=bt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return dp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $p="SyncEngine";class Ffe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Ufe{constructor(e){this.key=e,this.hu=!1}}class $fe{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Fl((o=>X7(o)),E_),this.Iu=new Map,this.Eu=new Set,this.du=new hn(Le.comparator),this.Au=new Map,this.Ru=new SD,this.Vu={},this.mu=new Map,this.fu=Wd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qfe(t,e,n=!0){const r=N_(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await lG(r,e,n,!0),i}async function Gfe(t,e){const n=N_(t);await lG(n,e,!0,!1)}async function lG(t,e,n,r){const i=await z1(t.localStore,pa(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await LD(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&O_(t.remoteStore,i),o}async function LD(t,e,n,r,i){t.pu=(h,g,m)=>(async function(x,w,S,T){let I=w.view.ru(S);I.Cs&&(I=await Ck(x.localStore,w.query,!1).then((({documents:k})=>w.view.ru(k,I))));const N=T&&T.targetChanges.get(w.targetId),O=T&&T.targetMismatches.get(w.targetId)!=null,P=w.view.applyChanges(I,x.isPrimaryClient,N,O);return Ok(x,w.targetId,P.au),P.snapshot})(t,h,g,m);const a=await Ck(t.localStore,e,!0),s=new Bfe(e,a.Qs),o=s.ru(a.documents),c=E0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,c);Ok(t,n,u.au);const f=new Ffe(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function Hfe(t,e,n){const r=He(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((s=>!E_(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await cp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&up(r.remoteStore,i.targetId),fp(r,i.targetId)})).catch(xu)):(fp(r,i.targetId),await cp(r.localStore,i.targetId,!0))}async function Kfe(t,e){const n=He(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),up(n.remoteStore,r.targetId))}async function Wfe(t,e,n){const r=UD(t);try{const i=await(function(s,o){const c=He(s),u=vt.now(),f=o.reduce(((m,b)=>m.add(b.key)),bt());let h,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let b=fa(),x=bt();return c.Ns.getEntries(m,f).next((w=>{b=w,b.forEach(((S,T)=>{T.isValidDocument()||(x=x.add(S))}))})).next((()=>c.localDocuments.getOverlayedDocuments(m,b))).next((w=>{h=w;const S=[];for(const T of o){const I=mde(T,h.get(T.key).overlayedDocument);I!=null&&S.push(new Ul(T.key,I,B7(I.value.mapValue),Sr.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,S,o)})).next((w=>{g=w;const S=w.applyToLocalDocumentSet(h,x);return c.documentOverlayCache.saveOverlays(m,w.batchId,S)}))})).then((()=>({batchId:g.batchId,changes:eq(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,o,c){let u=s.Vu[s.currentUser.toKey()];u||(u=new hn(lt)),u=u.insert(o,c),s.Vu[s.currentUser.toKey()]=u})(r,i.batchId,n),await Su(r,i.changes),await Fp(r.remoteStore)}catch(i){const a=ND(i,"Failed to persist write");n.reject(a)}}async function cG(t,e){const n=He(t);try{const r=await ffe(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=n.Au.get(a);s&&(Ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Ye(s.hu,14607):i.removedDocuments.size>0&&(Ye(s.hu,42227),s.hu=!1))})),await Su(n,r,e)}catch(r){await xu(r)}}function s5(t,e,n){const r=He(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(s,o){const c=He(s);c.onlineState=o;let u=!1;c.queries.forEach(((f,h)=>{for(const g of h.Sa)g.va(o)&&(u=!0)})),u&&jD(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Yfe(t,e,n){const r=He(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let s=new hn(Le.comparator);s=s.insert(a,$n.newNoDocument(a,Je.min()));const o=bt().add(a),c=new S0(Je.min(),new Map,new hn(lt),s,o);await cG(r,c),r.du=r.du.remove(a),r.Au.delete(e),FD(r)}else await cp(r.localStore,e,!1).then((()=>fp(r,e,n))).catch(xu)}async function Xfe(t,e){const n=He(t),r=e.batch.batchId;try{const i=await dfe(n.localStore,e);BD(n,r,null),VD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Su(n,i)}catch(i){await xu(i)}}async function Qfe(t,e,n){const r=He(t);try{const i=await(function(s,o){const c=He(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return c.mutationQueue.lookupMutationBatch(u,o).next((h=>(Ye(h!==null,37113),f=h.keys(),c.mutationQueue.removeMutationBatch(u,h)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>c.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);BD(r,e,n),VD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Su(r,i)}catch(i){await xu(i)}}function VD(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function BD(t,e,n){const r=He(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function fp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||uG(t,r)}))}function uG(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(up(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),FD(t))}function Ok(t,e,n){for(const r of n)r instanceof sG?(t.Ru.addReference(r.key,e),Zfe(t,r)):r instanceof oG?(ke($p,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||uG(t,r.key)):Be(19791,{wu:r})}function Zfe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ke($p,"New document in limbo: "+n),t.Eu.add(r),FD(t))}function FD(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Le(Ut.fromString(e)),r=t.fu.next();t.Au.set(r,new Ufe(n)),t.du=t.du.insert(n,r),O_(t.remoteStore,new dl(pa(x0(n.path)),r,"TargetPurposeLimboResolution",zi.ce))}}async function Su(t,e,n){const r=He(t),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,c)=>{s.push(r.pu(c,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=AD.As(c.targetId,u);a.push(f)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(c,u){const f=He(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>fe.forEach(u,(g=>fe.forEach(g.Es,(m=>f.persistence.referenceDelegate.addReference(h,g.targetId,m))).next((()=>fe.forEach(g.ds,(m=>f.persistence.referenceDelegate.removeReference(h,g.targetId,m)))))))))}catch(h){if(!wu(h))throw h;ke(CD,"Failed to update sequence numbers: "+h)}for(const h of u){const g=h.targetId;if(!h.fromCache){const m=f.Ms.get(g),b=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(b);f.Ms=f.Ms.insert(g,x)}}})(r.localStore,a))}async function Jfe(t,e){const n=He(t);if(!n.currentUser.isEqual(e)){ke($p,"User change. New user:",e.toKey());const r=await $q(n.localStore,e);n.currentUser=e,(function(a,s){a.mu.forEach((o=>{o.forEach((c=>{c.reject(new Re(we.CANCELLED,s))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Su(n,r.Ls)}}function ehe(t,e){const n=He(t),r=n.Au.get(e);if(r&&r.hu)return bt().add(r.key);{let i=bt();const a=n.Iu.get(e);if(!a)return i;for(const s of a){const o=n.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}async function the(t,e){const n=He(t),r=await Ck(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&Ok(n,e.targetId,i.au),i}async function nhe(t,e){const n=He(t);return Hq(n.localStore,e).then((r=>Su(n,r)))}async function rhe(t,e,n,r){const i=He(t),a=await(function(o,c){const u=He(o),f=He(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(h=>f.er(h,c).next((g=>g?u.localDocuments.getDocuments(h,g):fe.resolve(null)))))})(i.localStore,e);a!==null?(n==="pending"?await Fp(i.remoteStore):n==="acknowledged"||n==="rejected"?(BD(i,e,r||null),VD(i,e),(function(o,c){He(He(o).mutationQueue).ir(c)})(i.localStore,e)):Be(6720,"Unknown batchState",{Su:n}),await Su(i,a)):ke($p,"Cannot apply mutation batch with id: "+e)}async function ihe(t,e){const n=He(t);if(N_(n),UD(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await o5(n,r.toArray());n.gu=!0,await Pk(n.remoteStore,!0);for(const a of i)O_(n.remoteStore,a)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((a,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(fp(n,s),cp(n.localStore,s,!0)))),up(n.remoteStore,s)})),await i,await o5(n,r),(function(s){const o=He(s);o.Au.forEach(((c,u)=>{up(o.remoteStore,u)})),o.Ru.Jr(),o.Au=new Map,o.du=new hn(Le.comparator)})(n),n.gu=!1,await Pk(n.remoteStore,!1)}}async function o5(t,e,n){const r=He(t),i=[],a=[];for(const s of e){let o;const c=r.Iu.get(s);if(c&&c.length!==0){o=await z1(r.localStore,pa(c[0]));for(const u of c){const f=r.Tu.get(u),h=await the(r,f);h.snapshot&&a.push(h.snapshot)}}else{const u=await Gq(r.localStore,s);o=await z1(r.localStore,u),await LD(r,dG(u),s,!1,o.resumeToken)}i.push(o)}return r.Pu.H_(a),i}function dG(t){return W7(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ahe(t){return(function(n){return He(He(n).persistence).Ts()})(He(t).localStore)}async function she(t,e,n,r){const i=He(t);if(i.gu)return void ke($p,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const s=await Hq(i.localStore,Q7(a[0])),o=S0.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Zn.EMPTY_BYTE_STRING);await Su(i,s,o);break}case"rejected":await cp(i.localStore,e,!0),fp(i,e,r);break;default:Be(64155,n)}}async function ohe(t,e,n){const r=N_(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ke($p,"Adding an already active target "+i);continue}const a=await Gq(r.localStore,i),s=await z1(r.localStore,a);await LD(r,dG(a),s.targetId,!1,s.resumeToken),O_(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await cp(r.localStore,i,!1).then((()=>{up(r.remoteStore,i),fp(r,i)})).catch(xu)}}function N_(t){const e=He(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cG.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ehe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yfe.bind(null,e),e.Pu.H_=Lfe.bind(null,e.eventManager),e.Pu.yu=Vfe.bind(null,e.eventManager),e}function UD(t){const e=He(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qfe.bind(null,e),e}class Iv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=P_(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Uq(this.persistence,new Fq,e.initialUser,this.serializer)}Cu(e){return new ED(k_.mi,this.serializer)}Du(e){return new Qq}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Iv.provider={build:()=>new Iv};class lhe extends Iv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ye(this.persistence.referenceDelegate instanceof j1,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Mq(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ai.withCacheSize(this.cacheSizeBytes):ai.DEFAULT;return new ED((r=>j1.mi(r,n)),this.serializer)}}class fG extends Iv{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await UD(this.xu.syncEngine),await Fp(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return Uq(this.persistence,new Fq,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Mq(r,e.asyncQueue,n)}Mu(e,n){const r=new bue(n,this.persistence);return new yue(e.asyncQueue,r)}Cu(e){const n=Bq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ai.withCacheSize(this.cacheSizeBytes):ai.DEFAULT;return new TD(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Zq(),Yx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Qq}}class che extends fG{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof CA&&(this.sharedClientState.syncEngine={Co:rhe.bind(null,n),vo:she.bind(null,n),Fo:ohe.bind(null,n),Ts:ahe.bind(null,n),Do:nhe.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await ihe(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=Zq();if(!CA.v(n))throw new Re(we.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Bq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new CA(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class kv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>s5(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Jfe.bind(null,this.syncEngine),await Pk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new zfe})()}createDatastore(e){const n=P_(e.databaseInfo.databaseId),r=(function(a){return new bfe(a)})(e.databaseInfo);return(function(a,s,o,c){return new Sfe(a,s,o,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,s,o){return new Tfe(r,i,a,s,o)})(this.localStore,this.datastore,e.asyncQueue,(n=>s5(this.syncEngine,n,0)),(function(){return e5.v()?new e5:new gfe})())}createSyncEngine(e,n){return(function(i,a,s,o,c,u,f){const h=new $fe(i,a,s,o,c,u);return f&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=He(n);ke(Yd,"RemoteStore shutting down."),r.Ea.add(5),await T0(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}kv.provider={build:()=>new kv};class $D{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const lu="FirestoreClient";class uhe{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ii.UNAUTHENTICATED,this.clientId=rD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async s=>{ke(lu,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(ke(lu,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ND(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function kA(t,e){t.asyncQueue.verifyOperationInProgress(),ke(lu,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await $q(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function l5(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dhe(t);ke(lu,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>n5(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>n5(e.remoteStore,i))),t._onlineComponents=e}async function dhe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ke(lu,"Using user provided OfflineComponentProvider");try{await kA(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===we.FAILED_PRECONDITION||i.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;gv("Error using user provided cache. Falling back to memory cache: "+n),await kA(t,new Iv)}}else ke(lu,"Using default OfflineComponentProvider"),await kA(t,new lhe(void 0));return t._offlineComponents}async function hG(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ke(lu,"Using user provided OnlineComponentProvider"),await l5(t,t._uninitializedComponentsProvider._online)):(ke(lu,"Using default OnlineComponentProvider"),await l5(t,new kv))),t._onlineComponents}function fhe(t){return hG(t).then((e=>e.syncEngine))}async function F1(t){const e=await hG(t),n=e.eventManager;return n.onListen=qfe.bind(null,e.syncEngine),n.onUnlisten=Hfe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Gfe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Kfe.bind(null,e.syncEngine),n}function hhe(t,e,n={}){const r=new bo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new $D({next:g=>{f.Nu(),s.enqueueAndForget((()=>MD(a,h)));const m=g.docs.has(o);!m&&g.fromCache?u.reject(new Re(we.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?u.reject(new Re(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new zD(x0(o.path),f,{includeMetadataChanges:!0,qa:!0});return RD(a,h)})(await F1(t),t.asyncQueue,e,n,r))),r.promise}function phe(t,e,n={}){const r=new bo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new $D({next:g=>{f.Nu(),s.enqueueAndForget((()=>MD(a,h))),g.fromCache&&c.source==="server"?u.reject(new Re(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new zD(o,f,{includeMetadataChanges:!0,qa:!0});return RD(a,h)})(await F1(t),t.asyncQueue,e,n,r))),r.promise}function pG(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const c5=new Map;const ghe="firestore.googleapis.com",u5=!0;class d5{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ghe,this.ssl=u5}else this.host=e.host,this.ssl=e.ssl??u5;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Pq;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Rq)throw new Re(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pG(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Re(we.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Re(we.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Re(we.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qD{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d5(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new sue;switch(r.type){case"firstParty":return new cue(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=c5.get(n);r&&(ke("ComponentProvider","Removing Datastore"),c5.delete(n),r.terminate())})(this),Promise.resolve()}}class $l{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $l(this.firestore,e,this._query)}}class qn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}toJSON(){return{type:qn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(v0(n,qn._jsonSchema))return new qn(e,r||null,new Le(Ut.fromString(n.referencePath)))}}qn._jsonSchemaVersion="firestore/documentReference/1.0",qn._jsonSchema={type:fr("string",qn._jsonSchemaVersion),referencePath:fr("string")};class tu extends $l{constructor(e,n,r){super(e,n,x0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Le(e))}withConverter(e){return new tu(this.firestore,e,this._path)}}function yi(t,e,...n){if(t=$t(t),h7("collection","path",e),t instanceof qD){const r=Ut.fromString(e,...n);return tL(r),new tu(t,null,r)}{if(!(t instanceof qn||t instanceof tu))throw new Re(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ut.fromString(e,...n));return tL(r),new tu(t.firestore,null,r)}}function St(t,e,...n){if(t=$t(t),arguments.length===1&&(e=rD.newId()),h7("doc","path",e),t instanceof qD){const r=Ut.fromString(e,...n);return eL(r),new qn(t,null,new Le(r))}{if(!(t instanceof qn||t instanceof tu))throw new Re(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ut.fromString(e,...n));return eL(r),new qn(t.firestore,t instanceof tu?t.converter:null,new Le(r))}}const f5="AsyncQueue";class h5{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jq(this,"async_queue_retry"),this._c=()=>{const r=Yx();r&&ke(f5,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Yx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Yx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new bo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!wu(e))throw e;ke(f5,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Qn("INTERNAL UNHANDLED ERROR: ",p5(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=OD.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Be(47125,{Pc:p5(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function p5(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function g5(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Io extends qD{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new h5,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new h5(e),this._firestoreClient=void 0,await e}}}function mhe(t,e,n){n||(n=C1);const r=Mp(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(iu(a,e))return i;throw new Re(we.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Re(we.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Rq)throw new Re(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&yu(e.host)&&L2(e.host),r.initialize({options:e,instanceIdentifier:n})}function A0(t){if(t._terminated)throw new Re(we.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vhe(t),t._firestoreClient}function vhe(t){const e=t._freezeSettings(),n=(function(i,a,s,o){return new Kue(i,a,s,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,pG(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new uhe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class Ua{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ua(Zn.fromBase64String(e))}catch(n){throw new Re(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ua(Zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ua._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(v0(e,Ua._jsonSchema))return Ua.fromBase64String(e.bytes)}}Ua._jsonSchemaVersion="firestore/bytes/1.0",Ua._jsonSchema={type:fr("string",Ua._jsonSchemaVersion),bytes:fr("string")};class C0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Re(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class R_{constructor(e){this._methodName=e}}class xo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Re(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Re(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xo._jsonSchemaVersion}}static fromJSON(e){if(v0(e,xo._jsonSchema))return new xo(e.latitude,e.longitude)}}xo._jsonSchemaVersion="firestore/geoPoint/1.0",xo._jsonSchema={type:fr("string",xo._jsonSchemaVersion),latitude:fr("number"),longitude:fr("number")};class wo{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(v0(e,wo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new wo(e.vectorValues);throw new Re(we.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wo._jsonSchemaVersion="firestore/vectorValue/1.0",wo._jsonSchema={type:fr("string",wo._jsonSchemaVersion),vectorValues:fr("object")};const yhe=/^__.*__$/;class bhe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ul(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bp(e,this.data,n,this.fieldTransforms)}}class gG{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ul(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mG(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ac:t})}}class M_{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new M_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return U1(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mG(this.Ac)&&yhe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xhe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||P_(e)}Cc(e,n,r,i=!1){return new M_({Ac:e,methodName:n,Dc:r,path:Rn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function I0(t){const e=t._freezeSettings(),n=P_(t._databaseId);return new xhe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function GD(t,e,n,r,i,a={}){const s=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);KD("Data must be an object, but it was:",s,r);const o=bG(r,s);let c,u;if(a.merge)c=new Li(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const h of a.mergeFields){const g=Nk(e,h,n);if(!s.contains(g))throw new Re(we.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);wG(f,g)||f.push(g)}c=new Li(f),u=s.fieldTransforms.filter((h=>c.covers(h.field)))}else c=null,u=s.fieldTransforms;return new bhe(new oi(o),c,u)}class k0 extends R_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof k0}}function whe(t,e,n){return new M_({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class HD extends R_{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=whe(this,e,!0),r=this.vc.map((a=>qp(a,n))),i=new Gd(r);return new oq(e.path,i)}isEqual(e){return e instanceof HD&&iu(this.vc,e.vc)}}function vG(t,e,n,r){const i=t.Cc(1,e,n);KD("Data must be an object, but it was:",i,r);const a=[],s=oi.empty();_u(r,((c,u)=>{const f=WD(e,c,n);u=$t(u);const h=i.yc(f);if(u instanceof k0)a.push(f);else{const g=qp(u,h);g!=null&&(a.push(f),s.set(f,g))}}));const o=new Li(a);return new gG(s,o,i.fieldTransforms)}function yG(t,e,n,r,i,a){const s=t.Cc(1,e,n),o=[Nk(e,r,n)],c=[i];if(a.length%2!=0)throw new Re(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(Nk(e,a[g])),c.push(a[g+1]);const u=[],f=oi.empty();for(let g=o.length-1;g>=0;--g)if(!wG(u,o[g])){const m=o[g];let b=c[g];b=$t(b);const x=s.yc(m);if(b instanceof k0)u.push(m);else{const w=qp(b,x);w!=null&&(u.push(m),f.set(m,w))}}const h=new Li(u);return new gG(f,h,s.fieldTransforms)}function _he(t,e,n,r=!1){return qp(n,t.Cc(r?4:3,e))}function qp(t,e){if(xG(t=$t(t)))return KD("Unsupported field value:",e,t),bG(t,e);if(t instanceof R_)return(function(r,i){if(!mG(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let s=0;for(const o of r){let c=qp(o,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=$t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ude(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=vt.fromDate(r);return{timestampValue:lp(i.serializer,a)}}if(r instanceof vt){const a=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lp(i.serializer,a)}}if(r instanceof xo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ua)return{bytesValue:pq(i.serializer,r._byteString)};if(r instanceof qn){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:xD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wo)return(function(s,o){return{mapValue:{fields:{[dD]:{stringValue:fD},[rp]:{arrayValue:{values:s.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return gD(o.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${m_(r)}`)})(t,e)}function bG(t,e){const n={};return D7(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_u(t,((r,i)=>{const a=qp(i,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function xG(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vt||t instanceof xo||t instanceof Ua||t instanceof qn||t instanceof R_||t instanceof wo)}function KD(t,e,n){if(!xG(n)||!p7(n)){const r=m_(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Nk(t,e,n){if((e=$t(e))instanceof C0)return e._internalPath;if(typeof e=="string")return WD(t,e);throw U1("Field path arguments must be of type string or ",t,!1,void 0,n)}const She=new RegExp("[~\\*/\\[\\]]");function WD(t,e,n){if(e.search(She)>=0)throw U1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new C0(...e.split("."))._internalPath}catch{throw U1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function U1(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Re(we.INVALID_ARGUMENT,o+t+c)}function wG(t,e){return t.some((n=>n.isEqual(e)))}class _G{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ehe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(j_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Ehe extends _G{data(){return super.data()}}function j_(t,e){return typeof e=="string"?WD(t,e):e instanceof C0?e._internalPath:e._delegate._internalPath}function SG(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Re(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class YD{}class XD extends YD{}function Os(t,e,...n){let r=[];e instanceof YD&&r.push(e),r=r.concat(n),(function(a){const s=a.filter((c=>c instanceof QD)).length,o=a.filter((c=>c instanceof z_)).length;if(s>1||s>0&&o>0)throw new Re(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class z_ extends XD{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new z_(e,n,r)}_apply(e){const n=this._parse(e);return EG(e._query,n),new $l(e.firestore,e.converter,bk(e._query,n))}_parse(e){const n=I0(e.firestore);return(function(a,s,o,c,u,f,h){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Re(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){y5(h,f);const b=[];for(const x of h)b.push(v5(c,a,x));g={arrayValue:{values:b}}}else g=v5(c,a,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||y5(h,f),g=_he(o,s,h,f==="in"||f==="not-in");return It.create(u,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function The(t,e,n){const r=e,i=j_("where",t);return z_._create(i,r,n)}class QD extends YD{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new QD(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Yt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)EG(s,c),s=bk(s,c)})(e._query,n),new $l(e.firestore,e.converter,bk(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ZD extends XD{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ZD(e,n)}_apply(e){const n=(function(i,a,s){if(i.startAt!==null)throw new Re(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Re(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tv(a,s)})(e._query,this._field,this._direction);return new $l(e.firestore,e.converter,(function(i,a){const s=i.explicitOrderBy.concat([a]);return new Vp(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function cu(t,e="asc"){const n=e,r=j_("orderBy",t);return ZD._create(r,n)}class JD extends XD{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new JD(e,n,r)}_apply(e){return new $l(e.firestore,e.converter,P1(e._query,this._limit,this._limitType))}}function m5(t){return JD._create("limit",t,"F")}function v5(t,e,n){if(typeof(n=$t(n))=="string"){if(n==="")throw new Re(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y7(e)&&n.indexOf("/")!==-1)throw new Re(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ut.fromString(n));if(!Le.isDocumentKey(r))throw new Re(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sv(t,new Le(r))}if(n instanceof qn)return Sv(t,n._key);throw new Re(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${m_(n)}.`)}function y5(t,e){if(!Array.isArray(t)||t.length===0)throw new Re(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EG(t,e){const n=(function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Re(we.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(we.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Ahe{convertValue(e,n="none"){switch(au(e)){case 0:return null;case 1:return e.booleanValue;case 2:return An(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Il(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _u(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[rp].arrayValue?.values?.map((r=>An(r.doubleValue)));return new wo(n)}convertGeoPoint(e){return new xo(An(e.latitude),An(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=__(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wv(e));default:return null}}convertTimestamp(e){const n=Cl(e);return new vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ut.fromString(e);Ye(Eq(r),9688,{name:e});const i=new $d(r.get(1),r.get(3)),a=new Le(r.popFirst(5));return i.isEqual(n)||Qn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function eO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Dm{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nd extends _G{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(j_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(we.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Nd._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Nd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nd._jsonSchema={type:fr("string",Nd._jsonSchemaVersion),bundleSource:fr("string","DocumentSnapshot"),bundleName:fr("string"),bundle:fr("string")};class Xx extends Nd{data(e={}){return super.data(e)}}class Rd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Dm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Xx(this._firestore,this._userDataWriter,r.key,r,new Dm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Re(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((o=>{const c=new Xx(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Dm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>a||o.type!==3)).map((o=>{const c=new Xx(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Dm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:Che(o.type),doc:c,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(we.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Rd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rD.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Che(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:t})}}function PA(t){t=$i(t,qn);const e=$i(t.firestore,Io);return hhe(A0(e),t._key).then((n=>TG(e,t,n)))}Rd._jsonSchemaVersion="firestore/querySnapshot/1.0",Rd._jsonSchema={type:fr("string",Rd._jsonSchemaVersion),bundleSource:fr("string","QuerySnapshot"),bundleName:fr("string"),bundle:fr("string")};class tO extends Ahe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ua(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,n)}}function ws(t){t=$i(t,$l);const e=$i(t.firestore,Io),n=A0(e),r=new tO(e);return SG(t._query),phe(n,t._query).then((i=>new Rd(e,r,t,i)))}function oa(t,e,n){t=$i(t,qn);const r=$i(t.firestore,Io),i=eO(t.converter,e,n);return P0(r,[GD(I0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Sr.none())])}function co(t,e,n,...r){t=$i(t,qn);const i=$i(t.firestore,Io),a=I0(i);let s;return s=typeof(e=$t(e))=="string"||e instanceof C0?yG(a,"updateDoc",t._key,e,n,r):vG(a,"updateDoc",t._key,e),P0(i,[s.toMutation(t._key,Sr.exists(!0))])}function ca(t){return P0($i(t.firestore,Io),[new _0(t._key,Sr.none())])}function L_(t,e){const n=$i(t.firestore,Io),r=St(t),i=eO(t.converter,e);return P0(n,[GD(I0(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Sr.exists(!1))]).then((()=>r))}function hf(t,...e){t=$t(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||g5(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(g5(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let a,s,o;if(t instanceof qn)s=$i(t.firestore,Io),o=x0(t._key.path),a={next:c=>{e[r]&&e[r](TG(s,t,c))},error:e[r+1],complete:e[r+2]};else{const c=$i(t,$l);s=$i(c.firestore,Io),o=c._query;const u=new tO(s);a={next:f=>{e[r]&&e[r](new Rd(s,u,c,f))},error:e[r+1],complete:e[r+2]},SG(t._query)}return(function(u,f,h,g){const m=new $D(g),b=new zD(f,m,h);return u.asyncQueue.enqueueAndForget((async()=>RD(await F1(u),b))),()=>{m.Nu(),u.asyncQueue.enqueueAndForget((async()=>MD(await F1(u),b)))}})(A0(s),o,i,a)}function P0(t,e){return(function(r,i){const a=new bo;return r.asyncQueue.enqueueAndForget((async()=>Wfe(await fhe(r),i,a))),a.promise})(A0(t),e)}function TG(t,e,n){const r=n.docs.get(e._key),i=new tO(t);return new Nd(t,i,e._key,r,new Dm(n.hasPendingWrites,n.fromCache),e.converter)}class Ihe{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=Ohe(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function khe(t){return new Ihe(t)}class Phe{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=kv.provider,this._offlineComponentProvider={build:n=>new fG(n,e?.cacheSizeBytes,this.forceOwnership)}}}class Dhe{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=kv.provider,this._offlineComponentProvider={build:n=>new che(n,e?.cacheSizeBytes)}}}function Ohe(t){return new Phe(t?.forceOwnership)}function Nhe(){return new Dhe}class Rhe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=I0(e)}set(e,n,r){this._verifyNotCommitted();const i=DA(e,this._firestore),a=eO(i.converter,n,r),s=GD(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Sr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=DA(e,this._firestore);let s;return s=typeof(n=$t(n))=="string"||n instanceof C0?yG(this._dataReader,"WriteBatch.update",a._key,n,r,i):vG(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,Sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=DA(e,this._firestore);return this._mutations=this._mutations.concat(new _0(n._key,Sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(we.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function DA(t,e){if((t=$t(t)).firestore!==e)throw new Re(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function b5(){return new k0("deleteField")}function Mhe(...t){return new HD("arrayUnion",t)}function Rk(t){return A0(t=$i(t,Io)),new Rhe(t,(e=>P0(t,e)))}(function(e,n=!0){(function(i){Lp=i})(jp),Sl(new Ao("firestore",((r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new Io(new oue(r.getProvider("auth-internal")),new uue(s,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Re(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $d(u.options.projectId,f)})(s,i),s);return a={useFetchStreams:n,...a},o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),As(Xz,Qz,e),As(Xz,Qz,"esm2020")})();const Mk=new Map,AG={activated:!1,tokenObservers:[]},jhe={initialized:!1,enabled:!1};function Er(t){return Mk.get(t)||{...AG}}function zhe(t,e){return Mk.set(t,e),Mk.get(t)}function V_(){return jhe}const CG="https://content-firebaseappcheck.googleapis.com/v1",Lhe="exchangeRecaptchaEnterpriseToken",Vhe="exchangeDebugToken",x5={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Bhe=1440*60*1e3;class Fhe{constructor(e,n,r,i,a){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new lv,this.pending.promise.catch(n=>{}),await Uhe(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new lv,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Uhe(t){return new Promise(e=>{setTimeout(e,t)})}const $he={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Vi=new Rp("appCheck","AppCheck",$he);function w5(t=!1){return t?self.grecaptcha?.enterprise:self.grecaptcha}function nO(t){if(!Er(t).activated)throw Vi.create("use-before-activation",{appName:t.name})}function IG(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),a=e-n*3600*24-r*3600-i*60;let s="";return n&&(s+=Kb(n)+"d:"),r&&(s+=Kb(r)+"h:"),s+=Kb(i)+"m:"+Kb(a)+"s",s}function Kb(t){return t===0?"00":t>=10?t.toString():"0"+t}async function rO({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const a={method:"POST",body:JSON.stringify(e),headers:r};let s;try{s=await fetch(t,a)}catch(h){throw Vi.create("fetch-network-error",{originalErrorMessage:h?.message})}if(s.status!==200)throw Vi.create("fetch-status-error",{httpStatus:s.status});let o;try{o=await s.json()}catch(h){throw Vi.create("fetch-parse-error",{originalErrorMessage:h?.message})}const c=o.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Vi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${o.ttl}`});const u=Number(c[1])*1e3,f=Date.now();return{token:o.token,expireTimeMillis:f+u,issuedAtTimeMillis:f}}function qhe(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${CG}/projects/${n}/apps/${r}:${Lhe}?key=${i}`,body:{recaptcha_enterprise_token:e}}}function kG(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${CG}/projects/${n}/apps/${r}:${Vhe}?key=${i}`,body:{debug_token:e}}}const Ghe="firebase-app-check-database",Hhe=1,Pv="firebase-app-check-store",PG="debug-token";let Wb=null;function DG(){return Wb||(Wb=new Promise((t,e)=>{try{const n=indexedDB.open(Ghe,Hhe);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{e(Vi.create("storage-open",{originalErrorMessage:r.target.error?.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Pv,{keyPath:"compositeKey"})}}}catch(n){e(Vi.create("storage-open",{originalErrorMessage:n?.message}))}}),Wb)}function Khe(t){return NG(RG(t))}function Whe(t,e){return OG(RG(t),e)}function Yhe(t){return OG(PG,t)}function Xhe(){return NG(PG)}async function OG(t,e){const r=(await DG()).transaction(Pv,"readwrite"),a=r.objectStore(Pv).put({compositeKey:t,value:e});return new Promise((s,o)=>{a.onsuccess=c=>{s()},r.onerror=c=>{o(Vi.create("storage-set",{originalErrorMessage:c.target.error?.message}))}})}async function NG(t){const n=(await DG()).transaction(Pv,"readonly"),i=n.objectStore(Pv).get(t);return new Promise((a,s)=>{i.onsuccess=o=>{const c=o.target.result;a(c?c.value:void 0)},n.onerror=o=>{s(Vi.create("storage-get",{originalErrorMessage:o.target.error?.message}))}})}function RG(t){return`${t.options.appId}-${t.name}`}const qc=new l_("@firebase/app-check");async function Qhe(t){if(o_()){let e;try{e=await Khe(t)}catch(n){qc.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function OA(t,e){return o_()?Whe(t,e).catch(n=>{qc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function Zhe(){let t;try{t=await Xhe()}catch{}if(t)return t;{const e=crypto.randomUUID();return Yhe(e).catch(n=>qc.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}function iO(){return V_().enabled}async function aO(){const t=V_();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Jhe(){const t=z2(),e=V_();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new lv;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Zhe())}const epe={error:"UNKNOWN_ERROR"};function tpe(t){return j2.encodeString(JSON.stringify(t),!1)}async function jk(t,e=!1,n=!1){const r=t.app;nO(r);const i=Er(r);let a=i.token,s;if(a&&!Ah(a)&&(i.token=void 0,a=void 0),!a){const u=await i.cachedTokenPromise;u&&(Ah(u)?a=u:await OA(r,void 0))}if(!e&&a&&Ah(a))return{token:a.token};let o=!1;if(iO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=rO(kG(r,await aO()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const u=await i.exchangeTokenPromise;return await OA(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?qc.warn(u.message):n&&qc.error(u),NA(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),a=await Er(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?qc.warn(u.message):n&&qc.error(u),s=u}let c;return a?s?Ah(a)?c={token:a.token,internalError:s}:c=NA(s):(c={token:a.token},i.token=a,await OA(r,a)):c=NA(s),o&&zG(r,c),c}async function npe(t){const e=t.app;nO(e);const{provider:n}=Er(e);if(iO()){const r=await aO(),{token:i}=await rO(kG(e,r),t.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function MG(t,e,n,r){const{app:i}=t,a=Er(i),s={next:n,error:r,type:e};if(a.tokenObservers=[...a.tokenObservers,s],a.token&&Ah(a.token)){const o=a.token;Promise.resolve().then(()=>{n({token:o.token}),_5(t)}).catch(()=>{})}a.cachedTokenPromise.then(()=>_5(t))}function jG(t,e){const n=Er(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function _5(t){const{app:e}=t,n=Er(e);let r=n.tokenRefresher;r||(r=rpe(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function rpe(t){const{app:e}=t;return new Fhe(async()=>{const n=Er(e);let r;if(n.token?r=await jk(t,!0):r=await jk(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Er(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},x5.RETRIAL_MIN_WAIT,x5.RETRIAL_MAX_WAIT)}function zG(t,e){const n=Er(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ah(t){return t.expireTimeMillis-Date.now()>0}function NA(t){return{token:tpe(epe),error:t}}class ipe{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Er(this.app);for(const n of e)jG(this.app,n.next);return Promise.resolve()}}function ape(t,e){return new ipe(t,e)}function spe(t){return{getToken:e=>jk(t,e),getLimitedUseToken:()=>npe(t),addTokenListener:e=>MG(t,"INTERNAL",e),removeTokenListener:e=>jG(t.app,e)}}const ope="@firebase/app-check",lpe="0.11.0",cpe="https://www.google.com/recaptcha/enterprise.js";function upe(t,e){const n=new lv,r=Er(t);r.reCAPTCHAState={initialized:n};const i=dpe(t),a=w5(!0);return a?S5(t,e,a,i,n):ppe(()=>{const s=w5(!0);if(!s)throw new Error("no recaptcha");S5(t,e,s,i,n)}),n.promise}function S5(t,e,n,r,i){n.ready(()=>{hpe(t,e,n,r),i.resolve(n)})}function dpe(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function fpe(t){nO(t);const n=await Er(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const a=Er(t).reCAPTCHAState;n.ready(()=>{r(n.execute(a.widgetId,{action:"fire_app_check"}))})})}function hpe(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible",callback:()=>{Er(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Er(t).reCAPTCHAState.succeeded=!1}}),a=Er(t);a.reCAPTCHAState={...a.reCAPTCHAState,widgetId:i}}function ppe(t){const e=document.createElement("script");e.src=cpe,e.onload=t,document.head.appendChild(e)}class sO{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){mpe(this._throttleData);const e=await fpe(this._app).catch(r=>{throw Vi.create("recaptcha-error")});if(!Er(this._app).reCAPTCHAState?.succeeded)throw Vi.create("recaptcha-error");let n;try{n=await rO(qhe(this._app,e),this._heartbeatServiceProvider)}catch(r){throw r.code?.includes("fetch-status-error")?(this._throttleData=gpe(Number(r.customData?.httpStatus),this._throttleData),Vi.create("initial-throttle",{time:IG(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):r}return this._throttleData=null,n}initialize(e){this._app=e,this._heartbeatServiceProvider=Mp(e,"heartbeat"),upe(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof sO?this._siteKey===e._siteKey:!1}}function gpe(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+Bhe,httpStatus:t};{const n=e?e.backoffCount:0,r=cre(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function mpe(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw Vi.create("throttled",{time:IG(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}function vpe(t=B2(),e){t=$t(t);const n=Mp(t,"app-check");if(V_().initialized||Jhe(),iO()&&aO().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(a.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&a.provider.isEqual(e.provider))return i;throw Vi.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return ype(t,e.provider,e.isTokenAutoRefreshEnabled),Er(t).isTokenAutoRefreshEnabled&&MG(r,"INTERNAL",()=>{}),r}function ype(t,e,n=!1){const r=zhe(t,{...AG});r.activated=!0,r.provider=e,r.cachedTokenPromise=Qhe(t).then(i=>(i&&Ah(i)&&(r.token=i,zG(t,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n&&t.automaticDataCollectionEnabled,!t.automaticDataCollectionEnabled&&n&&qc.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),r.provider.initialize(t)}const bpe="app-check",E5="app-check-internal";function xpe(){Sl(new Ao(bpe,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return ape(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(E5).initialize()})),Sl(new Ao(E5,t=>{const e=t.getProvider("app-check").getImmediate();return spe(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),As(ope,lpe)}xpe();const wpe={apiKey:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:0ae73943f9058a4342aba9",measurementId:"G-VMP5DF6273"},oO=K8(wpe);vpe(oO,{provider:new sO("6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"),isTokenAutoRefreshEnabled:!0});const Va=Fse(oO),rt=mhe(oO,{localCache:khe({tabManager:Nhe()})}),T5=()=>({url:window.location.origin+"/personal-budget-pwa/",handleCodeInApp:!1}),Yb=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),Ga=tD()(i7(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await Eae(Va,e,n)).user;if(console.log(` Checking email verification for: ${i.email}`),console.log(" emailVerified status:",i.emailVerified),console.log(" Firebase user object:",{uid:i.uid,email:i.email,emailVerified:i.emailVerified,metadata:i.metadata}),!i.emailVerified)return console.log(` BLOCKING LOGIN: Email not verified for ${i.email}`),await Sz(Va),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${i.email} not verified`),!1;console.log(` EMAIL VERIFIED: Allowing login for ${i.email}`);const a=Yb(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${a.email}`),!0}catch(r){console.error("Login error:",r),console.error("Error code:",r.code),console.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await Sae(Va,e,n)).user;await Aae(a,{displayName:r}),await _z(a,T5());const s=Yb(a);return t({currentUser:s,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${s.email}, verification email sent`),!0}catch(i){console.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await Sz(Va),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await xae(Va,e),t({isLoading:!1}),!0}catch(n){console.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=Va.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await _z(e,T5()),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(n){console.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=Ga.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},checkVerificationStatus:async()=>{const e=Va.currentUser;if(!e)return!1;try{await e.reload();const n=Va.currentUser;if(n?.emailVerified){const r=Yb(n);return t({currentUser:r,isAuthenticated:!0,lastAuthTime:Date.now()}),console.log(` Email verified for: ${n.email}`),!0}return!1}catch(n){return console.error("Error checking verification status:",n),!1}},deleteAccount:async e=>{const n=Va.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=uf.credential(n.email,e);return await yae(n,r),await Pae(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${n.email}`),!0}catch(r){console.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},confirmPasswordReset:async(e,n)=>{t({isLoading:!0,loginError:null});try{return await wae(Va,e,n),t({isLoading:!1}),console.log(" Password reset successful"),!0}catch(r){console.error("Password reset confirmation error:",r);let i="Failed to reset password. The link may be expired or invalid.";switch(r.code){case"auth/expired-action-code":i="The password reset link has expired. Please request a new one.";break;case"auth/invalid-action-code":i="The password reset link is invalid. Please request a new one.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>Ga.getState().isInitialized?()=>{}:(t({isInitialized:!1}),kae(Va,async r=>{const i=Date.now(),a=Ga.getState(),s=r?Yb(r):null,o=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,u=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&o&&!s,f=r?r.emailVerified:!0,h=r&&f||!!u,g=r?s:u?a.currentUser:null;if(t({currentUser:g,isAuthenticated:h,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&f?i:a.lastAuthTime}),g)if(console.log(` Auth state: User is signed in (${g.email})`,u?"(offline grace period)":f?"(verified)":"(unverified)"),console.log(" Onboarding check:",{isVerified:f,shouldGrantOfflineAccess:u,willCheckOnboarding:f&&!u}),f&&!u){console.log(" Loading budgetStore to check onboarding...");const m=await Pt(()=>Promise.resolve().then(()=>Bwe),[]).then(b=>b.useBudgetStore.getState());console.log(" Calling budgetStore.checkAndStartOnboarding()..."),await m.checkAndStartOnboarding()}else console.log(" Skipping onboarding check (not verified or offline grace period)");else console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),qt=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:Ga},Symbol.toStringTag,{value:"Module"})),LG=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],_pe=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=LG.map(o=>({...o,met:o.regex.test(t)})).filter(o=>o.met).length;let i,a,s;return r<=1?(i="weak",a="text-red-500",s="Weak"):r<=3?(i="medium",a="text-yellow-500",s="Medium"):r===4?(i="strong",a="text-blue-500",s="Strong"):(i="very-strong",a="text-green-500",s="Very Strong"),{score:r,level:i,color:a,label:s}},B_=t=>{const e=LG.map(i=>({...i,met:i.regex.test(t)})),n=_pe(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},VG=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=B_(t);return r?null:y.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[y.jsx("div",{className:"flex-1",children:y.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>y.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),y.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},BG=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=B_(t);return r?null:y.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>y.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?y.jsx(zle,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):y.jsx(g_,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),y.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},Spe=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[i,a]=A.useState(""),[s,o]=A.useState(!1),[c,u]=A.useState(!1),[f,h]=A.useState(!1),[g,m]=A.useState(!1),{login:b,register:x,sendPasswordReset:w,isLoading:S,loginError:T,clearError:I}=Ga(),N=B_(n),O=async k=>{if(k.preventDefault(),I(),t.trim()&&n.trim())if(c){if(!i.trim()||!N.isValid)return;await x(t.trim(),n,i.trim())}else await b(t.trim(),n)},P=async k=>{k.preventDefault(),t.trim()&&await w(t.trim())&&m(!0)};return A.useEffect(()=>{e(""),r(""),a(""),m(!1)},[c,f]),y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:f?y.jsxs("form",{onSubmit:P,className:"space-y-6",children:[y.jsxs("div",{className:"text-center mb-2",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(ak,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{id:"reset-email",type:"email",value:t,onChange:k=>e(k.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"email"})]})]}),g?y.jsxs("div",{className:"text-center py-4",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:y.jsx(ak,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),y.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),y.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",y.jsx("span",{className:"font-medium",children:t})]}),y.jsxs("button",{type:"button",onClick:()=>h(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[y.jsx(Al,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"submit",disabled:S||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?"Sending...":"Send Reset Link"}),y.jsx("div",{className:"mt-4 text-center",children:y.jsxs("button",{type:"button",onClick:()=>h(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:[y.jsx(Al,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):y.jsxs("form",{onSubmit:O,className:"space-y-6",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c?"Create Account":"Sign In"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:c?"Create a new account to get started":"Sign in to your account"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),y.jsx("input",{id:"email",type:"email",value:t,onChange:k=>e(k.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"username"})]}),c&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),y.jsx("input",{id:"displayName",type:"text",value:i,onChange:k=>a(k.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:S})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!c&&y.jsx("button",{type:"button",onClick:()=>h(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:"Forgot password?"})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{id:"password",type:s?"text":"password",value:n,onChange:k=>r(k.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${c&&n&&!N.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:S,autoComplete:c?"new-password":"current-password"}),y.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:S,children:s?y.jsx(t7,{className:"h-5 w-5"}):y.jsx(n7,{className:"h-5 w-5"})})]}),c&&n&&y.jsx("div",{className:"mt-2",children:y.jsx(VG,{password:n})}),c&&n&&y.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:y.jsx(BG,{password:n})})]}),T&&y.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[T,T.includes("verify your email")&&y.jsx("div",{className:"mt-3",children:y.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),y.jsx("button",{type:"submit",disabled:S||!t.trim()||!n.trim()||c&&!i.trim()||c&&!N.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?c?"Creating Account...":"Signing in...":c?"Create Account":"Sign In"}),y.jsx("div",{className:"mt-6 text-center",children:y.jsxs("button",{type:"button",onClick:()=>{u(!c),h(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:S,children:[y.jsx(qce,{className:"h-4 w-4"}),c?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},Epe=({oobCode:t,onSuccess:e,onCancel:n})=>{const[r,i]=A.useState(""),[a,s]=A.useState(""),[o,c]=A.useState(!1),[u,f]=A.useState(!1),{confirmPasswordReset:h,isLoading:g,loginError:m,clearError:b}=Ga(),x=B_(r);A.useEffect(()=>{b()},[b]);const w=async S=>{if(S.preventDefault(),r!==a||!x.isValid)return;await h(t,r)&&f(!0)};return u?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-6",children:y.jsx(x1,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Password Reset Complete"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Your password has been successfully updated. You can now log in with your new password."}),y.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200",children:"Go to Login"})]})}):y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"Reset Password"})]}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create a new password for your account"})]})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:y.jsxs("form",{onSubmit:w,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(qz,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{id:"new-password",type:o?"text":"password",value:r,onChange:S=>i(S.target.value),className:"w-full pl-10 pr-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Enter new password",required:!0}),y.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",onClick:()=>c(!o),children:o?y.jsx(t7,{className:"h-5 w-5"}):y.jsx(n7,{className:"h-5 w-5"})})]}),y.jsx("div",{className:"mt-2",children:y.jsx(VG,{password:r})})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(qz,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{id:"confirm-password",type:o?"text":"password",value:a,onChange:S=>s(S.target.value),className:`w-full pl-10 px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors ${a&&r!==a?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Confirm new password",required:!0})]}),a&&r!==a&&y.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Passwords do not match"})]}),y.jsx(BG,{password:r}),m&&y.jsx("div",{className:"p-3 rounded-md bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm",children:m}),y.jsx("button",{type:"submit",disabled:g||!r||!a||r!==a||!x.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:g?"Updating Password...":"Reset Password"}),y.jsx("div",{className:"text-center",children:y.jsxs("button",{type:"button",onClick:n,className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium inline-flex items-center",children:[y.jsx(Al,{className:"h-4 w-4 mr-1"}),"Back to Login"]})})]})})]})})},FG=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(!1),{currentUser:i,resendEmailVerification:a,checkVerificationStatus:s,logout:o,loginError:c}=Ga();A.useEffect(()=>{i||console.warn("EmailVerificationView: No current user, this should not happen")},[i]),A.useEffect(()=>{const h=()=>{console.log("Window focused, checking verification status..."),s()};return window.addEventListener("focus",h),()=>window.removeEventListener("focus",h)},[s]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},f=async()=>{await o()};return i?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:y.jsx(ak,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(x1,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),y.jsxs("div",{className:"text-left",children:[y.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),y.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[y.jsx("li",{children:"1. Open your email inbox"}),y.jsx("li",{children:"2. Find the email from House Budget"}),y.jsx("li",{children:'3. Click the "Verify Email" link'}),y.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&y.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&y.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),y.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?y.jsxs(y.Fragment,{children:[y.jsx(Xh,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):y.jsxs(y.Fragment,{children:[y.jsx(Xh,{className:"h-4 w-4"}),"Resend verification email"]})}),y.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[y.jsx(Al,{className:"h-4 w-4"}),"Back to sign in"]})]})}),y.jsx("div",{className:"text-center",children:y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},UG=({message:t="Loading your budget...",showTimeout:e=!1})=>y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[y.jsx("div",{className:"mb-8",children:y.jsxs("div",{className:"relative",children:[y.jsx(Xh,{size:48,className:"text-blue-500 animate-spin"}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:y.jsx(p_,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),y.jsxs("div",{className:"text-center space-y-3",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),y.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),y.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),y.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),y.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&y.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:y.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),y.jsx("div",{className:"mt-8 w-full max-w-md",children:y.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),lO=A.createContext({});function F_(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const cO=typeof window<"u",uO=cO?A.useLayoutEffect:A.useEffect,U_=A.createContext(null);function dO(t,e){t.indexOf(e)===-1&&t.push(e)}function fO(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const kl=(t,e,n)=>n>e?e:n<t?t:n;let hO=()=>{};const Pl={},$G=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function qG(t){return typeof t=="object"&&t!==null}const GG=t=>/^0[^.\s]+$/u.test(t);function pO(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ha=t=>t,Tpe=(t,e)=>n=>e(t(n)),D0=(...t)=>t.reduce(Tpe),Dv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class gO{constructor(){this.subscriptions=[]}add(e){return dO(this.subscriptions,e),()=>fO(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _o=t=>t*1e3,$a=t=>t/1e3;function HG(t,e){return e?t*(1e3/e):0}const KG=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Ape=1e-7,Cpe=12;function Ipe(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=KG(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>Ape&&++o<Cpe);return s}function O0(t,e,n,r){if(t===e&&n===r)return Ha;const i=a=>Ipe(a,0,1,t,n);return a=>a===0||a===1?a:KG(i(a),e,r)}const WG=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,YG=t=>e=>1-t(1-e),XG=O0(.33,1.53,.69,.99),mO=YG(XG),QG=WG(mO),ZG=t=>(t*=2)<1?.5*mO(t):.5*(2-Math.pow(2,-10*(t-1))),vO=t=>1-Math.sin(Math.acos(t)),JG=YG(vO),eH=WG(vO),kpe=O0(.42,0,1,1),Ppe=O0(0,0,.58,1),tH=O0(.42,0,.58,1),Dpe=t=>Array.isArray(t)&&typeof t[0]!="number",nH=t=>Array.isArray(t)&&typeof t[0]=="number",Ope={linear:Ha,easeIn:kpe,easeInOut:tH,easeOut:Ppe,circIn:vO,circInOut:eH,circOut:JG,backIn:mO,backInOut:QG,backOut:XG,anticipate:ZG},Npe=t=>typeof t=="string",A5=t=>{if(nH(t)){hO(t.length===4);const[e,n,r,i]=t;return O0(e,n,r,i)}else if(Npe(t))return Ope[t];return t},Xb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Rpe(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(f){s.has(f)&&(u.schedule(f),t()),f(o)}const u={schedule:(f,h=!1,g=!1)=>{const b=g&&i?n:r;return h&&s.add(f),b.has(f)||b.add(f),f},cancel:f=>{r.delete(f),s.delete(f)},process:f=>{if(o=f,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,a&&(a=!1,u.process(f))}};return u}const Mpe=40;function rH(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=Xb.reduce((I,N)=>(I[N]=Rpe(a),I),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:f,update:h,preRender:g,render:m,postRender:b}=s,x=()=>{const I=Pl.useManualTiming?i.timestamp:performance.now();n=!1,Pl.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(I-i.timestamp,Mpe),1)),i.timestamp=I,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),f.process(i),h.process(i),g.process(i),m.process(i),b.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},w=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:Xb.reduce((I,N)=>{const O=s[N];return I[N]=(P,k=!1,D=!1)=>(n||w(),O.schedule(P,k,D)),I},{}),cancel:I=>{for(let N=0;N<Xb.length;N++)s[Xb[N]].cancel(I)},state:i,steps:s}}const{schedule:Cn,cancel:uu,state:Xr,steps:RA}=rH(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ha,!0);let Qx;function jpe(){Qx=void 0}const Bi={now:()=>(Qx===void 0&&Bi.set(Xr.isProcessing||Pl.useManualTiming?Xr.timestamp:performance.now()),Qx),set:t=>{Qx=t,queueMicrotask(jpe)}},iH=t=>e=>typeof e=="string"&&e.startsWith(t),yO=iH("--"),zpe=iH("var(--"),bO=t=>zpe(t)?Lpe.test(t.split("/*")[0].trim()):!1,Lpe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Gp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ov={...Gp,transform:t=>kl(0,1,t)},Qb={...Gp,default:1},Xm=t=>Math.round(t*1e5)/1e5,xO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Vpe(t){return t==null}const Bpe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,wO=(t,e)=>n=>!!(typeof n=="string"&&Bpe.test(n)&&n.startsWith(t)||e&&!Vpe(n)&&Object.prototype.hasOwnProperty.call(n,e)),aH=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(xO);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},Fpe=t=>kl(0,255,t),MA={...Gp,transform:t=>Math.round(Fpe(t))},_d={test:wO("rgb","red"),parse:aH("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+MA.transform(t)+", "+MA.transform(e)+", "+MA.transform(n)+", "+Xm(Ov.transform(r))+")"};function Upe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const zk={test:wO("#"),parse:Upe,transform:_d.transform},N0=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Nc=N0("deg"),So=N0("%"),st=N0("px"),$pe=N0("vh"),qpe=N0("vw"),C5={...So,parse:t=>So.parse(t)/100,transform:t=>So.transform(t*100)},Ch={test:wO("hsl","hue"),parse:aH("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+So.transform(Xm(e))+", "+So.transform(Xm(n))+", "+Xm(Ov.transform(r))+")"},cr={test:t=>_d.test(t)||zk.test(t)||Ch.test(t),parse:t=>_d.test(t)?_d.parse(t):Ch.test(t)?Ch.parse(t):zk.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_d.transform(t):Ch.transform(t),getAnimatableNone:t=>{const e=cr.parse(t);return e.alpha=0,cr.transform(e)}},Gpe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Hpe(t){return isNaN(t)&&typeof t=="string"&&(t.match(xO)?.length||0)+(t.match(Gpe)?.length||0)>0}const sH="number",oH="color",Kpe="var",Wpe="var(",I5="${}",Ype=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(Ype,c=>(cr.test(c)?(r.color.push(a),i.push(oH),n.push(cr.parse(c))):c.startsWith(Wpe)?(r.var.push(a),i.push(Kpe),n.push(c)):(r.number.push(a),i.push(sH),n.push(parseFloat(c))),++a,I5)).split(I5);return{values:n,split:o,indexes:r,types:i}}function lH(t){return Nv(t).values}function cH(t){const{split:e,types:n}=Nv(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===sH?a+=Xm(i[s]):o===oH?a+=cr.transform(i[s]):a+=i[s]}return a}}const Xpe=t=>typeof t=="number"?0:cr.test(t)?cr.getAnimatableNone(t):t;function Qpe(t){const e=lH(t);return cH(t)(e.map(Xpe))}const du={test:Hpe,parse:lH,createTransformer:cH,getAnimatableNone:Qpe};function jA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Zpe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=jA(c,o,t+1/3),a=jA(c,o,t),s=jA(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function $1(t,e){return n=>n>0?e:t}const Mn=(t,e,n)=>t+(e-t)*n,zA=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Jpe=[zk,_d,Ch],ege=t=>Jpe.find(e=>e.test(t));function k5(t){const e=ege(t);if(!e)return!1;let n=e.parse(t);return e===Ch&&(n=Zpe(n)),n}const P5=(t,e)=>{const n=k5(t),r=k5(e);if(!n||!r)return $1(t,e);const i={...n};return a=>(i.red=zA(n.red,r.red,a),i.green=zA(n.green,r.green,a),i.blue=zA(n.blue,r.blue,a),i.alpha=Mn(n.alpha,r.alpha,a),_d.transform(i))},Lk=new Set(["none","hidden"]);function tge(t,e){return Lk.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function nge(t,e){return n=>Mn(t,e,n)}function _O(t){return typeof t=="number"?nge:typeof t=="string"?bO(t)?$1:cr.test(t)?P5:age:Array.isArray(t)?uH:typeof t=="object"?cr.test(t)?P5:rge:$1}function uH(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>_O(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function rge(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=_O(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function ige(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const age=(t,e)=>{const n=du.createTransformer(e),r=Nv(t),i=Nv(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Lk.has(t)&&!i.values.length||Lk.has(e)&&!r.values.length?tge(t,e):D0(uH(ige(r,i),i.values),n):$1(t,e)};function dH(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Mn(t,e,n):_O(t)(t,e)}const sge=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Cn.update(e,n),stop:()=>uu(e),now:()=>Xr.isProcessing?Xr.timestamp:Bi.now()}},fH=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},q1=2e4;function SO(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<q1;)e+=n,r=t.next(e);return e>=q1?1/0:e}function oge(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(SO(r),q1);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:$a(i)}}const lge=5;function hH(t,e,n){const r=Math.max(e-lge,0);return HG(n-t(r),e-r)}const Bn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},LA=.001;function cge({duration:t=Bn.duration,bounce:e=Bn.bounce,velocity:n=Bn.velocity,mass:r=Bn.mass}){let i,a,s=1-e;s=kl(Bn.minDamping,Bn.maxDamping,s),t=kl(Bn.minDuration,Bn.maxDuration,$a(t)),s<1?(i=u=>{const f=u*s,h=f*t,g=f-n,m=Vk(u,s),b=Math.exp(-h);return LA-g/m*b},a=u=>{const h=u*s*t,g=h*n+n,m=Math.pow(s,2)*Math.pow(u,2)*t,b=Math.exp(-h),x=Vk(Math.pow(u,2),s);return(-i(u)+LA>0?-1:1)*((g-m)*b)/x}):(i=u=>{const f=Math.exp(-u*t),h=(u-n)*t+1;return-LA+f*h},a=u=>{const f=Math.exp(-u*t),h=(n-u)*(t*t);return f*h});const o=5/t,c=dge(i,a,o);if(t=_o(t),isNaN(c))return{stiffness:Bn.stiffness,damping:Bn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const uge=12;function dge(t,e,n){let r=n;for(let i=1;i<uge;i++)r=r-t(r)/e(r);return r}function Vk(t,e){return t*Math.sqrt(1-e*e)}const fge=["duration","bounce"],hge=["stiffness","damping","mass"];function D5(t,e){return e.some(n=>t[n]!==void 0)}function pge(t){let e={velocity:Bn.velocity,stiffness:Bn.stiffness,damping:Bn.damping,mass:Bn.mass,isResolvedFromDuration:!1,...t};if(!D5(t,hge)&&D5(t,fge))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*kl(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Bn.mass,stiffness:i,damping:a}}else{const n=cge(t);e={...e,...n,mass:Bn.mass},e.isResolvedFromDuration=!0}return e}function G1(t=Bn.visualDuration,e=Bn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:f,duration:h,velocity:g,isResolvedFromDuration:m}=pge({...n,velocity:-$a(n.velocity||0)}),b=g||0,x=u/(2*Math.sqrt(c*f)),w=s-a,S=$a(Math.sqrt(c/f)),T=Math.abs(w)<5;r||(r=T?Bn.restSpeed.granular:Bn.restSpeed.default),i||(i=T?Bn.restDelta.granular:Bn.restDelta.default);let I;if(x<1){const O=Vk(S,x);I=P=>{const k=Math.exp(-x*S*P);return s-k*((b+x*S*w)/O*Math.sin(O*P)+w*Math.cos(O*P))}}else if(x===1)I=O=>s-Math.exp(-S*O)*(w+(b+S*w)*O);else{const O=S*Math.sqrt(x*x-1);I=P=>{const k=Math.exp(-x*S*P),D=Math.min(O*P,300);return s-k*((b+x*S*w)*Math.sinh(D)+O*w*Math.cosh(D))/O}}const N={calculatedDuration:m&&h||null,next:O=>{const P=I(O);if(m)o.done=O>=h;else{let k=O===0?b:0;x<1&&(k=O===0?_o(b):hH(I,O,P));const D=Math.abs(k)<=r,R=Math.abs(s-P)<=i;o.done=D&&R}return o.value=o.done?s:P,o},toString:()=>{const O=Math.min(SO(N),q1),P=fH(k=>N.next(O*k).value,O,30);return O+"ms "+P},toTransition:()=>{}};return N}G1.applyToOptions=t=>{const e=oge(t,100,G1);return t.ease=e.ease,t.duration=_o(e.duration),t.type="keyframes",t};function Bk({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:u=.5,restSpeed:f}){const h=t[0],g={done:!1,value:h},m=D=>o!==void 0&&D<o||c!==void 0&&D>c,b=D=>o===void 0?c:c===void 0||Math.abs(o-D)<Math.abs(c-D)?o:c;let x=n*e;const w=h+x,S=s===void 0?w:s(w);S!==w&&(x=S-h);const T=D=>-x*Math.exp(-D/r),I=D=>S+T(D),N=D=>{const R=T(D),z=I(D);g.done=Math.abs(R)<=u,g.value=g.done?S:z};let O,P;const k=D=>{m(g.value)&&(O=D,P=G1({keyframes:[g.value,b(g.value)],velocity:hH(I,D,g.value),damping:i,stiffness:a,restDelta:u,restSpeed:f}))};return k(0),{calculatedDuration:null,next:D=>{let R=!1;return!P&&O===void 0&&(R=!0,N(D),k(D)),O!==void 0&&D>=O?P.next(D-O):(!R&&N(D),g)}}}function gge(t,e,n){const r=[],i=n||Pl.mix||dH,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Ha:e;o=D0(c,o)}r.push(o)}return r}function mge(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(hO(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=gge(e,r,i),c=o.length,u=f=>{if(s&&f<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const g=Dv(t[h],t[h+1],f);return o[h](g)};return n?f=>u(kl(t[0],t[a-1],f)):u}function vge(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Dv(0,e,r);t.push(Mn(n,1,i))}}function yge(t){const e=[0];return vge(e,t.length-1),e}function bge(t,e){return t.map(n=>n*e)}function xge(t,e){return t.map(()=>e||tH).splice(0,t.length-1)}function Qm({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Dpe(r)?r.map(A5):A5(r),a={done:!1,value:e[0]},s=bge(n&&n.length===e.length?n:yge(e),t),o=mge(s,e,{ease:Array.isArray(i)?i:xge(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const wge=t=>t!==null;function EO(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(wge),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const _ge={decay:Bk,inertia:Bk,tween:Qm,keyframes:Qm,spring:G1};function pH(t){typeof t.type=="string"&&(t.type=_ge[t.type])}class TO{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Sge=t=>t/100;class AO extends TO{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Bi.now()&&this.tick(Bi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;pH(e);const{type:n=Qm,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const c=n||Qm;c!==Qm&&typeof o[0]!="number"&&(this.mixKeyframes=D0(Sge,dH(o[0],o[1])),o=[0,100]);const u=c({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=SO(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:f,repeat:h,repeatType:g,repeatDelay:m,type:b,onUpdate:x,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let I=this.currentTime,N=r;if(h){const D=Math.min(this.currentTime,i)/o;let R=Math.floor(D),z=D%1;!z&&D>=1&&(z=1),z===1&&R--,R=Math.min(R,h+1),!!(R%2)&&(g==="reverse"?(z=1-z,m&&(z-=m/o)):g==="mirror"&&(N=s)),I=kl(0,1,z)*o}const O=T?{done:!1,value:f[0]}:N.next(I);a&&(O.value=a(O.value));let{done:P}=O;!T&&c!==null&&(P=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return k&&b!==Bk&&(O.value=EO(f,this.options,w,this.speed)),x&&x(O.value),k&&this.finish(),O}then(e,n){return this.finished.then(e,n)}get duration(){return $a(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+$a(e)}get time(){return $a(this.currentTime)}set time(e){e=_o(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Bi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=$a(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=sge,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Bi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Ege(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Sd=t=>t*180/Math.PI,Fk=t=>{const e=Sd(Math.atan2(t[1],t[0]));return Uk(e)},Tge={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Fk,rotateZ:Fk,skewX:t=>Sd(Math.atan(t[1])),skewY:t=>Sd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Uk=t=>(t=t%360,t<0&&(t+=360),t),O5=Fk,N5=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),R5=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Age={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:N5,scaleY:R5,scale:t=>(N5(t)+R5(t))/2,rotateX:t=>Uk(Sd(Math.atan2(t[6],t[5]))),rotateY:t=>Uk(Sd(Math.atan2(-t[2],t[0]))),rotateZ:O5,rotate:O5,skewX:t=>Sd(Math.atan(t[4])),skewY:t=>Sd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function $k(t){return t.includes("scale")?1:0}function qk(t,e){if(!t||t==="none")return $k(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Age,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Tge,i=o}if(!i)return $k(e);const a=r[e],s=i[1].split(",").map(Ige);return typeof a=="function"?a(s):s[a]}const Cge=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return qk(n,e)};function Ige(t){return parseFloat(t.trim())}const Hp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Kp=new Set(Hp),M5=t=>t===Gp||t===st,kge=new Set(["x","y","z"]),Pge=Hp.filter(t=>!kge.has(t));function Dge(t){const e=[];return Pge.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Md={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>qk(e,"x"),y:(t,{transform:e})=>qk(e,"y")};Md.translateX=Md.x;Md.translateY=Md.y;const jd=new Set;let Gk=!1,Hk=!1,Kk=!1;function gH(){if(Hk){const t=Array.from(jd).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Dge(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Hk=!1,Gk=!1,jd.forEach(t=>t.complete(Kk)),jd.clear()}function mH(){jd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Hk=!0)})}function Oge(){Kk=!0,mH(),gH(),Kk=!1}class CO{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(jd.add(this),Gk||(Gk=!0,Cn.read(mH),Cn.resolveKeyframes(gH))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}Ege(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),jd.delete(this)}cancel(){this.state==="scheduled"&&(jd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Nge=t=>t.startsWith("--");function Rge(t,e,n){Nge(e)?t.style.setProperty(e,n):t.style[e]=n}const Mge=pO(()=>window.ScrollTimeline!==void 0),jge={};function zge(t,e){const n=pO(t);return()=>jge[e]??n()}const vH=zge(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Om=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,j5={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Om([0,.65,.55,1]),circOut:Om([.55,0,1,.45]),backIn:Om([.31,.01,.66,-.59]),backOut:Om([.33,1.53,.69,.99])};function yH(t,e){if(t)return typeof t=="function"?vH()?fH(t,e):"ease-out":nH(t)?Om(t):Array.isArray(t)?t.map(n=>yH(n,e)||j5.easeOut):j5[t]}function Lge(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:c}={},u=void 0){const f={[e]:n};c&&(f.offset=c);const h=yH(o,i);Array.isArray(h)&&(f.easing=h);const g={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),t.animate(f,g)}function bH(t){return typeof t=="function"&&"applyToOptions"in t}function Vge({type:t,...e}){return bH(t)&&vH()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Bge extends TO{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,hO(typeof e.type!="string");const u=Vge(e);this.animation=Lge(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=EO(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):Rge(n,r,f),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return $a(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+$a(e)}get time(){return $a(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=_o(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Mge()?(this.animation.timeline=e,Ha):n(this)}}const xH={anticipate:ZG,backInOut:QG,circInOut:eH};function Fge(t){return t in xH}function Uge(t){typeof t.ease=="string"&&Fge(t.ease)&&(t.ease=xH[t.ease])}const z5=10;class $ge extends Bge{constructor(e){Uge(e),pH(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new AO({...s,autoplay:!1}),c=_o(this.finishedTime??this.time);n.setWithVelocity(o.sample(c-z5).value,o.sample(c).value,z5),o.stop()}}const L5=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(du.test(t)||t==="0")&&!t.startsWith("url("));function qge(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Gge(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=L5(i,e),o=L5(a,e);return!s||!o?!1:qge(t)||(n==="spring"||bH(n))&&r}function Wk(t){t.duration=0,t.type="keyframes"}const Hge=new Set(["opacity","clipPath","filter","transform"]),Kge=pO(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Wge(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return Kge()&&n&&Hge.has(n)&&(n!=="transform"||!u)&&!c&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const Yge=40;class Xge extends TO{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:c,motionValue:u,element:f,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Bi.now();const g={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:u,element:f,...h},m=f?.KeyframeResolver||CO;this.keyframeResolver=new m(o,(b,x,w)=>this.onKeyframesResolved(b,x,g,!w),c,u,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:c,isHandoff:u,onUpdate:f}=r;this.resolvedAt=Bi.now(),Gge(e,a,s,o)||((Pl.instantAnimations||!c)&&f?.(EO(e,r,n)),e[0]=e[e.length-1],Wk(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Yge?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},m=!u&&Wge(g)?new $ge({...g,element:g.motionValue.owner.current}):new AO(g);m.finished.then(()=>this.notifyFinished()).catch(Ha),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Oge()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Qge=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Zge(t){const e=Qge.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function wH(t,e,n=1){const[r,i]=Zge(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return $G(s)?parseFloat(s):s}return bO(i)?wH(i,e,n+1):i}function IO(t,e){return t?.[e]??t?.default??t}const _H=new Set(["width","height","top","left","right","bottom",...Hp]),Jge={test:t=>t==="auto",parse:t=>t},SH=t=>e=>e.test(t),EH=[Gp,st,So,Nc,qpe,$pe,Jge],V5=t=>EH.find(SH(t));function eme(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||GG(t):!0}const tme=new Set(["brightness","contrast","saturate","opacity"]);function nme(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(xO)||[];if(!r)return t;const i=n.replace(r,"");let a=tme.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const rme=/\b([a-z-]*)\(.*?\)/gu,Yk={...du,getAnimatableNone:t=>{const e=t.match(rme);return e?e.map(nme).join(" "):t}},B5={...Gp,transform:Math.round},ime={rotate:Nc,rotateX:Nc,rotateY:Nc,rotateZ:Nc,scale:Qb,scaleX:Qb,scaleY:Qb,scaleZ:Qb,skew:Nc,skewX:Nc,skewY:Nc,distance:st,translateX:st,translateY:st,translateZ:st,x:st,y:st,z:st,perspective:st,transformPerspective:st,opacity:Ov,originX:C5,originY:C5,originZ:st},kO={borderWidth:st,borderTopWidth:st,borderRightWidth:st,borderBottomWidth:st,borderLeftWidth:st,borderRadius:st,radius:st,borderTopLeftRadius:st,borderTopRightRadius:st,borderBottomRightRadius:st,borderBottomLeftRadius:st,width:st,maxWidth:st,height:st,maxHeight:st,top:st,right:st,bottom:st,left:st,padding:st,paddingTop:st,paddingRight:st,paddingBottom:st,paddingLeft:st,margin:st,marginTop:st,marginRight:st,marginBottom:st,marginLeft:st,backgroundPositionX:st,backgroundPositionY:st,...ime,zIndex:B5,fillOpacity:Ov,strokeOpacity:Ov,numOctaves:B5},ame={...kO,color:cr,backgroundColor:cr,outlineColor:cr,fill:cr,stroke:cr,borderColor:cr,borderTopColor:cr,borderRightColor:cr,borderBottomColor:cr,borderLeftColor:cr,filter:Yk,WebkitFilter:Yk},TH=t=>ame[t];function AH(t,e){let n=TH(t);return n!==Yk&&(n=du),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const sme=new Set(["auto","none","0"]);function ome(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!sme.has(a)&&Nv(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=AH(n,i)}class lme extends CO{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),bO(u))){const f=wH(u,n.current);f!==void 0&&(e[c]=f),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!_H.has(r)||e.length!==2)return;const[i,a]=e,s=V5(i),o=V5(a);if(s!==o)if(M5(s)&&M5(o))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else Md[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||eme(e[i]))&&r.push(i);r.length&&ome(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Md[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=Md[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{e.getValue(o).set(c)}),this.resolveNoneKeyframes()}}function cme(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const CH=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function IH(t){return qG(t)&&"offsetHeight"in t}const F5=30,ume=t=>!isNaN(parseFloat(t));class dme{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Bi.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Bi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ume(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new gO);const r=this.events[e].add(n);return e==="change"?()=>{r(),Cn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Bi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>F5)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,F5);return HG(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hp(t,e){return new dme(t,e)}const{schedule:PO}=rH(queueMicrotask,!1),ys={x:!1,y:!1};function kH(){return ys.x||ys.y}function fme(t){return t==="x"||t==="y"?ys[t]?null:(ys[t]=!0,()=>{ys[t]=!1}):ys.x||ys.y?null:(ys.x=ys.y=!0,()=>{ys.x=ys.y=!1})}function PH(t,e){const n=cme(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function U5(t){return!(t.pointerType==="touch"||kH())}function hme(t,e,n={}){const[r,i,a]=PH(t,n),s=o=>{if(!U5(o))return;const{target:c}=o,u=e(c,o);if(typeof u!="function"||!c)return;const f=h=>{U5(h)&&(u(h),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,i)};return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const DH=(t,e)=>e?t===e?!0:DH(t,e.parentElement):!1,DO=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,pme=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function gme(t){return pme.has(t.tagName)||t.tabIndex!==-1}const Zx=new WeakSet;function $5(t){return e=>{e.key==="Enter"&&t(e)}}function VA(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const mme=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=$5(()=>{if(Zx.has(n))return;VA(n,"down");const i=$5(()=>{VA(n,"up")}),a=()=>VA(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function q5(t){return DO(t)&&!kH()}function vme(t,e,n={}){const[r,i,a]=PH(t,n),s=o=>{const c=o.currentTarget;if(!q5(o))return;Zx.add(c);const u=e(c,o),f=(m,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),Zx.has(c)&&Zx.delete(c),q5(m)&&typeof u=="function"&&u(m,{success:b})},h=m=>{f(m,c===window||c===document||n.useGlobalTarget||DH(c,m.target))},g=m=>{f(m,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),IH(o)&&(o.addEventListener("focus",u=>mme(u,i)),!gme(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function OH(t){return qG(t)&&"ownerSVGElement"in t}function yme(t){return OH(t)&&t.tagName==="svg"}const li=t=>!!(t&&t.getVelocity),bme=[...EH,cr,du],xme=t=>bme.find(SH(t)),OO=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function G5(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function wme(...t){return e=>{let n=!1;const r=t.map(i=>{const a=G5(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():G5(t[i],null)}}}}function _me(...t){return A.useCallback(wme(...t),t)}class Sme extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=IH(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Eme({children:t,isPresent:e,anchorX:n,root:r}){const i=A.useId(),a=A.useRef(null),s=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=A.useContext(OO),c=_me(a,t?.ref);return A.useInsertionEffect(()=>{const{width:u,height:f,top:h,left:g,right:m}=s.current;if(e||!a.current||!u||!f)return;const b=n==="left"?`left: ${g}`:`right: ${m}`;a.current.dataset.motionPopId=i;const x=document.createElement("style");o&&(x.nonce=o);const w=r??document.head;return w.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            ${b}px !important;
            top: ${h}px !important;
          }
        `),()=>{w.contains(x)&&w.removeChild(x)}},[e]),y.jsx(Sme,{isPresent:e,childRef:a,sizeRef:s,children:A.cloneElement(t,{ref:c})})}const Tme=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,root:c})=>{const u=F_(Ame),f=A.useId();let h=!0,g=A.useMemo(()=>(h=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:m=>{u.set(m,!0);for(const b of u.values())if(!b)return;r&&r()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[n,u,r]);return a&&h&&(g={...g}),A.useMemo(()=>{u.forEach((m,b)=>u.set(b,!1))},[n]),A.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),s==="popLayout"&&(t=y.jsx(Eme,{isPresent:n,anchorX:o,root:c,children:t})),y.jsx(U_.Provider,{value:g,children:t})};function Ame(){return new Map}function NH(t=!0){const e=A.useContext(U_);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=A.useId();A.useEffect(()=>{if(t)return i(a)},[t]);const s=A.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const Zb=t=>t.key||"";function H5(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const wa=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",root:c})=>{const[u,f]=NH(s),h=A.useMemo(()=>H5(t),[t]),g=s&&!u?[]:h.map(Zb),m=A.useRef(!0),b=A.useRef(h),x=F_(()=>new Map),[w,S]=A.useState(h),[T,I]=A.useState(h);uO(()=>{m.current=!1,b.current=h;for(let P=0;P<T.length;P++){const k=Zb(T[P]);g.includes(k)?x.delete(k):x.get(k)!==!0&&x.set(k,!1)}},[T,g.length,g.join("-")]);const N=[];if(h!==w){let P=[...h];for(let k=0;k<T.length;k++){const D=T[k],R=Zb(D);g.includes(R)||(P.splice(k,0,D),N.push(D))}return a==="wait"&&N.length&&(P=N),I(H5(P)),S(h),null}const{forceRender:O}=A.useContext(lO);return y.jsx(y.Fragment,{children:T.map(P=>{const k=Zb(P),D=s&&!u?!1:h===T||g.includes(k),R=()=>{if(x.has(k))x.set(k,!0);else return;let z=!0;x.forEach(L=>{L||(z=!1)}),z&&(O?.(),I(b.current),s&&f?.(),r&&r())};return y.jsx(Tme,{isPresent:D,initial:!m.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:c,onExitComplete:D?void 0:R,anchorX:o,children:P},k)})})},RH=A.createContext({strict:!1}),K5={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pp={};for(const t in K5)pp[t]={isEnabled:e=>K5[t].some(n=>!!e[n])};function Cme(t){for(const e in t)pp[e]={...pp[e],...t[e]}}const Ime=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function H1(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Ime.has(t)}let MH=t=>!H1(t);function kme(t){typeof t=="function"&&(MH=e=>e.startsWith("on")?!H1(e):t(e))}try{kme(require("@emotion/is-prop-valid").default)}catch{}function Pme(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(MH(i)||n===!0&&H1(i)||!e&&!H1(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const $_=A.createContext({});function q_(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Rv(t){return typeof t=="string"||Array.isArray(t)}const NO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],RO=["initial",...NO];function G_(t){return q_(t.animate)||RO.some(e=>Rv(t[e]))}function jH(t){return!!(G_(t)||t.variants)}function Dme(t,e){if(G_(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Rv(n)?n:void 0,animate:Rv(r)?r:void 0}}return t.inherit!==!1?e:{}}function Ome(t){const{initial:e,animate:n}=Dme(t,A.useContext($_));return A.useMemo(()=>({initial:e,animate:n}),[W5(e),W5(n)])}function W5(t){return Array.isArray(t)?t.join(" "):t}const Mv={};function Nme(t){for(const e in t)Mv[e]=t[e],yO(e)&&(Mv[e].isCSSVariable=!0)}function zH(t,{layout:e,layoutId:n}){return Kp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Mv[t]||t==="opacity")}const Rme={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Mme=Hp.length;function jme(t,e,n){let r="",i=!0;for(let a=0;a<Mme;a++){const s=Hp[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(s.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=CH(o,kO[s]);if(!c){i=!1;const f=Rme[s]||s;r+=`${f}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function MO(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const u=e[c];if(Kp.has(c)){s=!0;continue}else if(yO(c)){i[c]=u;continue}else{const f=CH(u,kO[c]);c.startsWith("origin")?(o=!0,a[c]=f):r[c]=f}}if(e.transform||(s||n?r.transform=jme(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:f=0}=a;r.transformOrigin=`${c} ${u} ${f}`}}const jO=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function LH(t,e,n){for(const r in e)!li(e[r])&&!zH(r,n)&&(t[r]=e[r])}function zme({transformTemplate:t},e){return A.useMemo(()=>{const n=jO();return MO(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Lme(t,e){const n=t.style||{},r={};return LH(r,n,t),Object.assign(r,zme(t,e)),r}function Vme(t,e){const n={},r=Lme(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Bme={offset:"stroke-dashoffset",array:"stroke-dasharray"},Fme={offset:"strokeDashoffset",array:"strokeDasharray"};function Ume(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?Bme:Fme;t[a.offset]=st.transform(-r);const s=st.transform(e),o=st.transform(n);t[a.array]=`${s} ${o}`}function VH(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},c,u,f){if(MO(t,o,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:g}=t;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=f?.transformBox??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&Ume(h,i,a,s,!1)}const BH=()=>({...jO(),attrs:{}}),FH=t=>typeof t=="string"&&t.toLowerCase()==="svg";function $me(t,e,n,r){const i=A.useMemo(()=>{const a=BH();return VH(a,e,FH(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};LH(a,t.style,t),i.style={...a,...i.style}}return i}const qme=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zO(t){return typeof t!="string"||t.includes("-")?!1:!!(qme.indexOf(t)>-1||/[A-Z]/u.test(t))}function Gme(t,e,n,{latestValues:r},i,a=!1){const o=(zO(t)?$me:Vme)(e,r,i,t),c=Pme(e,typeof t=="string",a),u=t!==A.Fragment?{...c,...o,ref:n}:{},{children:f}=e,h=A.useMemo(()=>li(f)?f.get():f,[f]);return A.createElement(t,{...u,children:h})}function Y5(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function LO(t,e,n,r){if(typeof e=="function"){const[i,a]=Y5(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=Y5(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Jx(t){return li(t)?t.get():t}function Hme({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Kme(n,r,i,t),renderState:e()}}function Kme(t,e,n,r){const i={},a=r(t,{});for(const g in a)i[g]=Jx(a[g]);let{initial:s,animate:o}=t;const c=G_(t),u=jH(t);e&&u&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||s===!1;const h=f?o:s;if(h&&typeof h!="boolean"&&!q_(h)){const g=Array.isArray(h)?h:[h];for(let m=0;m<g.length;m++){const b=LO(t,g[m]);if(b){const{transitionEnd:x,transition:w,...S}=b;for(const T in S){let I=S[T];if(Array.isArray(I)){const N=f?I.length-1:0;I=I[N]}I!==null&&(i[T]=I)}for(const T in x)i[T]=x[T]}}}return i}const UH=t=>(e,n)=>{const r=A.useContext($_),i=A.useContext(U_),a=()=>Hme(t,e,r,i);return n?a():F_(a)};function VO(t,e,n){const{style:r}=t,i={};for(const a in r)(li(r[a])||e.style&&li(e.style[a])||zH(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const Wme=UH({scrapeMotionValuesFromProps:VO,createRenderState:jO});function $H(t,e,n){const r=VO(t,e,n);for(const i in t)if(li(t[i])||li(e[i])){const a=Hp.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const Yme=UH({scrapeMotionValuesFromProps:$H,createRenderState:BH}),Xme=Symbol.for("motionComponentSymbol");function Ih(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Qme(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ih(n)&&(n.current=r))},[e])}const BO=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Zme="framerAppearId",qH="data-"+BO(Zme),GH=A.createContext({});function Jme(t,e,n,r,i){const{visualElement:a}=A.useContext($_),s=A.useContext(RH),o=A.useContext(U_),c=A.useContext(OO).reducedMotion,u=A.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const f=u.current,h=A.useContext(GH);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&eve(u.current,n,i,h);const g=A.useRef(!1);A.useInsertionEffect(()=>{f&&g.current&&f.update(n,o)});const m=n[qH],b=A.useRef(!!m&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return uO(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),A.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(m)}),b.current=!1),f.enteringChildren=void 0)}),f}function eve(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:HH(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Ih(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:u})}function HH(t){if(t)return t.options.allowProjection!==!1?t.projection:HH(t.parent)}function BA(t,{forwardMotionProps:e=!1}={},n,r){n&&Cme(n);const i=zO(t)?Yme:Wme;function a(o,c){let u;const f={...A.useContext(OO),...o,layoutId:tve(o)},{isStatic:h}=f,g=Ome(o),m=i(o,h);if(!h&&cO){nve();const b=rve(f);u=b.MeasureLayout,g.visualElement=Jme(t,m,f,r,b.ProjectionNode)}return y.jsxs($_.Provider,{value:g,children:[u&&g.visualElement?y.jsx(u,{visualElement:g.visualElement,...f}):null,Gme(t,o,Qme(m,g.visualElement,c),m,h,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const s=A.forwardRef(a);return s[Xme]=t,s}function tve({layoutId:t}){const e=A.useContext(lO).id;return e&&t!==void 0?e+"-"+t:t}function nve(t,e){A.useContext(RH).strict}function rve(t){const{drag:e,layout:n}=pp;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function ive(t,e){if(typeof Proxy>"u")return BA;const n=new Map,r=(a,s)=>BA(a,s,t,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(n.has(s)||n.set(s,BA(s,void 0,t,e)),n.get(s))})}function KH({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function ave({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function sve(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function FA(t){return t===void 0||t===1}function Xk({scale:t,scaleX:e,scaleY:n}){return!FA(t)||!FA(e)||!FA(n)}function od(t){return Xk(t)||WH(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function WH(t){return X5(t.x)||X5(t.y)}function X5(t){return t&&t!=="0%"}function K1(t,e,n){const r=t-n,i=e*r;return n+i}function Q5(t,e,n,r,i){return i!==void 0&&(t=K1(t,i,r)),K1(t,n,r)+e}function Qk(t,e=0,n=1,r,i){t.min=Q5(t.min,e,n,r,i),t.max=Q5(t.max,e,n,r,i)}function YH(t,{x:e,y:n}){Qk(t.x,e.translate,e.scale,e.originPoint),Qk(t.y,n.translate,n.scale,n.originPoint)}const Z5=.999999999999,J5=1.0000000000001;function ove(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ph(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,YH(t,s)),r&&od(a.latestValues)&&Ph(t,a.latestValues))}e.x<J5&&e.x>Z5&&(e.x=1),e.y<J5&&e.y>Z5&&(e.y=1)}function kh(t,e){t.min=t.min+e,t.max=t.max+e}function eV(t,e,n,r,i=.5){const a=Mn(t.min,t.max,i);Qk(t,e,n,a,r)}function Ph(t,e){eV(t.x,e.x,e.scaleX,e.scale,e.originX),eV(t.y,e.y,e.scaleY,e.scale,e.originY)}function XH(t,e){return KH(sve(t.getBoundingClientRect(),e))}function lve(t,e,n){const r=XH(t,n),{scroll:i}=e;return i&&(kh(r.x,i.offset.x),kh(r.y,i.offset.y)),r}const tV=()=>({translate:0,scale:1,origin:0,originPoint:0}),Dh=()=>({x:tV(),y:tV()}),nV=()=>({min:0,max:0}),Xn=()=>({x:nV(),y:nV()}),Zk={current:null},QH={current:!1};function cve(){if(QH.current=!0,!!cO)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Zk.current=t.matches;t.addEventListener("change",e),e()}else Zk.current=!1}const uve=new WeakMap;function dve(t,e,n){for(const r in e){const i=e[r],a=n[r];if(li(i))t.addValue(r,i);else if(li(a))t.addValue(r,hp(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,hp(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const rV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fve{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=CO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Bi.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Cn.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=G_(n),this.isVariantNode=jH(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in h){const m=h[g];c[g]!==void 0&&li(m)&&m.set(c[g])}}mount(e){this.current=e,uve.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),QH.current||cve(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Zk.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),uu(this.notifyUpdate),uu(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Kp.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&Cn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in pp){const n=pp[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<rV.length;r++){const i=rV[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=dve(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=hp(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&($G(r)||GG(r))?r=parseFloat(r):!xme(r)&&du.test(n)&&(r=AH(e,n)),this.setBaseTarget(e,li(r)?r.get():r)),li(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=LO(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!li(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new gO),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){PO.render(this.render)}}class ZH extends fve{constructor(){super(...arguments),this.KeyframeResolver=lme}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;li(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function JH(t,{style:e,vars:n},r,i){const a=t.style;let s;for(s in e)a[s]=e[s];i?.applyProjectionStyles(a,r);for(s in n)a.setProperty(s,n[s])}function hve(t){return window.getComputedStyle(t)}class pve extends ZH{constructor(){super(...arguments),this.type="html",this.renderInstance=JH}readValueFromInstance(e,n){if(Kp.has(n))return this.projection?.isProjecting?$k(n):Cge(e,n);{const r=hve(e),i=(yO(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return XH(e,n)}build(e,n,r){MO(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return VO(e,n,r)}}const eK=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gve(t,e,n,r){JH(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(eK.has(i)?i:BO(i),e.attrs[i])}class mve extends ZH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Kp.has(n)){const r=TH(n);return r&&r.default||0}return n=eK.has(n)?n:BO(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return $H(e,n,r)}build(e,n,r){VH(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){gve(e,n,r,i)}mount(e){this.isSVGTag=FH(e.tagName),super.mount(e)}}const vve=(t,e)=>zO(t)?new mve(e):new pve(e,{allowProjection:t!==A.Fragment});function Gh(t,e,n){const r=t.getProps();return LO(r,e,n!==void 0?n:r.custom,t)}const Jk=t=>Array.isArray(t);function yve(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,hp(n))}function bve(t){return Jk(t)?t[t.length-1]||0:t}function FO(t,e){const n=Gh(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=bve(a[s]);yve(t,s,o)}}function xve(t){return!!(li(t)&&t.add)}function eP(t,e){const n=t.getValue("willChange");if(xve(n))return n.add(e);if(!n&&Pl.WillChange){const r=new Pl.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function tK(t){return t.props[qH]}const wve=t=>t!==null;function _ve(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(wve),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const Sve={type:"spring",stiffness:500,damping:25,restSpeed:10},Eve=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Tve={type:"keyframes",duration:.8},Ave={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Cve=(t,{keyframes:e})=>e.length>2?Tve:Kp.has(t)?t.startsWith("scale")?Eve(e[1]):Sve:Ave;function Ive({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:u,...f}){return!!Object.keys(f).length}const UO=(t,e,n,r={},i,a)=>s=>{const o=IO(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-_o(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};Ive(o)||Object.assign(f,Cve(t,f)),f.duration&&(f.duration=_o(f.duration)),f.repeatDelay&&(f.repeatDelay=_o(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(Wk(f),f.delay===0&&(h=!0)),(Pl.instantAnimations||Pl.skipAnimations)&&(h=!0,Wk(f),f.delay=0),f.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const g=_ve(f.keyframes,o);if(g!==void 0){Cn.update(()=>{f.onUpdate(g),f.onComplete()});return}}return o.isSync?new AO(f):new Xge(f)};function kve({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function nK(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=e;r&&(a=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in o){const h=t.getValue(f,t.latestValues[f]??null),g=o[f];if(g===void 0||u&&kve(u,f))continue;const m={delay:n,...IO(a||{},f)},b=h.get();if(b!==void 0&&!h.isAnimating&&!Array.isArray(g)&&g===b&&!m.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const S=tK(t);if(S){const T=window.MotionHandoffAnimation(S,f,Cn);T!==null&&(m.startTime=T,x=!0)}}eP(t,f),h.start(UO(f,h,g,t.shouldReduceMotion&&_H.has(f)?{type:!1}:m,t,x));const w=h.animation;w&&c.push(w)}return s&&Promise.all(c).then(()=>{Cn.update(()=>{s&&FO(t,s)})}),c}function rK(t,e,n,r=0,i=1){const a=Array.from(t).sort((u,f)=>u.sortNodePosition(f)).indexOf(e),s=t.size,o=(s-1)*r;return typeof n=="function"?n(a,s):i===1?a*r:o-a*r}function tP(t,e,n={}){const r=Gh(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(nK(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=i;return Pve(t,e,c,u,f,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function Pve(t,e,n=0,r=0,i=0,a=1,s){const o=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),o.push(tP(c,e,{...s,delay:n+(typeof r=="function"?0:r)+rK(t.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(o)}function iK(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>tP(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=tP(t,e,n);else{const i=typeof e=="function"?Gh(t,e,n.custom):e;r=Promise.all(nK(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function aK(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Dve=RO.length;function sK(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?sK(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Dve;n++){const r=RO[n],i=t.props[r];(Rv(i)||i===!1)&&(e[r]=i)}return e}const Ove=[...NO].reverse(),Nve=NO.length;function Rve(t){return e=>Promise.all(e.map(({animation:n,options:r})=>iK(t,n,r)))}function Mve(t){let e=Rve(t),n=iV(),r=!0;const i=c=>(u,f)=>{const h=Gh(t,f,c==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:g,transitionEnd:m,...b}=h;u={...u,...b,...m}}return u};function a(c){e=c(t)}function s(c){const{props:u}=t,f=sK(t.parent)||{},h=[],g=new Set;let m={},b=1/0;for(let w=0;w<Nve;w++){const S=Ove[w],T=n[S],I=u[S]!==void 0?u[S]:f[S],N=Rv(I),O=S===c?T.isActive:null;O===!1&&(b=w);let P=I===f[S]&&I!==u[S]&&N;if(P&&r&&t.manuallyAnimateOnMount&&(P=!1),T.protectedKeys={...m},!T.isActive&&O===null||!I&&!T.prevProp||q_(I)||typeof I=="boolean")continue;const k=jve(T.prevProp,I);let D=k||S===c&&T.isActive&&!P&&N||w>b&&N,R=!1;const z=Array.isArray(I)?I:[I];let L=z.reduce(i(S),{});O===!1&&(L={});const{prevResolvedValues:B={}}=T,j={...B,...L},H=W=>{D=!0,g.has(W)&&(R=!0,g.delete(W)),T.needsAnimating[W]=!0;const J=t.getValue(W);J&&(J.liveStyle=!1)};for(const W in j){const J=L[W],ne=B[W];if(m.hasOwnProperty(W))continue;let Y=!1;Jk(J)&&Jk(ne)?Y=!aK(J,ne):Y=J!==ne,Y?J!=null?H(W):g.add(W):J!==void 0&&g.has(W)?H(W):T.protectedKeys[W]=!0}T.prevProp=I,T.prevResolvedValues=L,T.isActive&&(m={...m,...L}),r&&t.blockInitialAnimation&&(D=!1);const X=P&&k;D&&(!X||R)&&h.push(...z.map(W=>{const J={type:S};if(typeof W=="string"&&r&&!X&&t.manuallyAnimateOnMount&&t.parent){const{parent:ne}=t,Y=Gh(ne,W);if(ne.enteringChildren&&Y){const{delayChildren:U}=Y.transition||{};J.delay=rK(ne.enteringChildren,t,U)}}return{animation:W,options:J}}))}if(g.size){const w={};if(typeof u.initial!="boolean"){const S=Gh(t,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(w.transition=S.transition)}g.forEach(S=>{const T=t.getBaseTarget(S),I=t.getValue(S);I&&(I.liveStyle=!0),w[S]=T??null}),h.push({animation:w})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function o(c,u){if(n[c].isActive===u)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(c,u)),n[c].isActive=u;const f=s(c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=iV()}}}function jve(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!aK(e,t):!1}function rd(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iV(){return{animate:rd(!0),whileInView:rd(),whileHover:rd(),whileTap:rd(),whileDrag:rd(),whileFocus:rd(),exit:rd()}}class Eu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class zve extends Eu{constructor(e){super(e),e.animationState||(e.animationState=Mve(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();q_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Lve=0;class Vve extends Eu{constructor(){super(...arguments),this.id=Lve++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Bve={animation:{Feature:zve},exit:{Feature:Vve}};function jv(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function R0(t){return{point:{x:t.pageX,y:t.pageY}}}const Fve=t=>e=>DO(e)&&t(e,R0(e));function Zm(t,e,n,r){return jv(t,e,Fve(n),r)}const oK=1e-4,Uve=1-oK,$ve=1+oK,lK=.01,qve=0-lK,Gve=0+lK;function _i(t){return t.max-t.min}function Hve(t,e,n){return Math.abs(t-e)<=n}function aV(t,e,n,r=.5){t.origin=r,t.originPoint=Mn(e.min,e.max,t.origin),t.scale=_i(n)/_i(e),t.translate=Mn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Uve&&t.scale<=$ve||isNaN(t.scale))&&(t.scale=1),(t.translate>=qve&&t.translate<=Gve||isNaN(t.translate))&&(t.translate=0)}function Jm(t,e,n,r){aV(t.x,e.x,n.x,r?r.originX:void 0),aV(t.y,e.y,n.y,r?r.originY:void 0)}function sV(t,e,n){t.min=n.min+e.min,t.max=t.min+_i(e)}function Kve(t,e,n){sV(t.x,e.x,n.x),sV(t.y,e.y,n.y)}function oV(t,e,n){t.min=e.min-n.min,t.max=t.min+_i(e)}function ev(t,e,n){oV(t.x,e.x,n.x),oV(t.y,e.y,n.y)}function Fa(t){return[t("x"),t("y")]}const cK=({current:t})=>t?t.ownerDocument.defaultView:null,lV=(t,e)=>Math.abs(t-e);function Wve(t,e){const n=lV(t.x,e.x),r=lV(t.y,e.y);return Math.sqrt(n**2+r**2)}class uK{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=$A(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,b=Wve(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!b)return;const{point:x}=g,{timestamp:w}=Xr;this.history.push({...x,timestamp:w});const{onStart:S,onMove:T}=this.handlers;m||(S&&S(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,g)},this.handlePointerMove=(g,m)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=UA(m,this.transformPagePoint),Cn.update(this.updatePoint,!0)},this.handlePointerUp=(g,m)=>{this.end();const{onEnd:b,onSessionEnd:x,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=$A(g.type==="pointercancel"?this.lastMoveEventInfo:UA(m,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,S),x&&x(g,S)},!DO(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const o=R0(e),c=UA(o,this.transformPagePoint),{point:u}=c,{timestamp:f}=Xr;this.history=[{...u,timestamp:f}];const{onSessionStart:h}=n;h&&h(e,$A(c,this.history)),this.removeListeners=D0(Zm(this.contextWindow,"pointermove",this.handlePointerMove),Zm(this.contextWindow,"pointerup",this.handlePointerUp),Zm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),uu(this.updatePoint)}}function UA(t,e){return e?{point:e(t.point)}:t}function cV(t,e){return{x:t.x-e.x,y:t.y-e.y}}function $A({point:t},e){return{point:t,delta:cV(t,dK(e)),offset:cV(t,Yve(e)),velocity:Xve(e,.1)}}function Yve(t){return t[0]}function dK(t){return t[t.length-1]}function Xve(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=dK(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>_o(e)));)n--;if(!r)return{x:0,y:0};const a=$a(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Qve(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Mn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Mn(n,t,r.max):Math.min(t,n)),t}function uV(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Zve(t,{top:e,left:n,bottom:r,right:i}){return{x:uV(t.x,n,i),y:uV(t.y,e,r)}}function dV(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Jve(t,e){return{x:dV(t.x,e.x),y:dV(t.y,e.y)}}function e0e(t,e){let n=.5;const r=_i(t),i=_i(e);return i>r?n=Dv(e.min,e.max-r,t.min):r>i&&(n=Dv(t.min,t.max-i,e.min)),kl(0,1,n)}function t0e(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const nP=.35;function n0e(t=nP){return t===!1?t=0:t===!0&&(t=nP),{x:fV(t,"left","right"),y:fV(t,"top","bottom")}}function fV(t,e,n){return{min:hV(t,e),max:hV(t,n)}}function hV(t,e){return typeof t=="number"?t:t[e]||0}const r0e=new WeakMap;class i0e{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(R0(h).point)},s=(h,g)=>{const{drag:m,dragPropagation:b,onDragStart:x}=this.getProps();if(m&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=fme(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Fa(S=>{let T=this.getAxisMotionValue(S).get()||0;if(So.test(T)){const{projection:I}=this.visualElement;if(I&&I.layout){const N=I.layout.layoutBox[S];N&&(T=_i(N)*(parseFloat(T)/100))}}this.originPoint[S]=T}),x&&Cn.postRender(()=>x(h,g)),eP(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:m,dragDirectionLock:b,onDirectionLock:x,onDrag:w}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:S}=g;if(b&&this.currentDirection===null){this.currentDirection=a0e(S),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,S),this.updateAxis("y",g.point,S),this.visualElement.render(),w&&w(h,g)},c=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Fa(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new uK(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:cK(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Cn.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Jb(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=Qve(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Ih(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Zve(r.layoutBox,e):this.constraints=!1,this.elastic=n0e(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Fa(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=t0e(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ih(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=lve(r,i.root,this.visualElement.getTransformPagePoint());let s=Jve(i.layout.layoutBox,a);if(n){const o=n(ave(s));this.hasMutatedConstraints=!!o,o&&(s=KH(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=Fa(f=>{if(!Jb(f,n,this.currentDirection))return;let h=c&&c[f]||{};s&&(h={min:0,max:0});const g=i?200:1e6,m=i?40:1e7,b={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(f,b)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return eP(this.visualElement,e),r.start(UO(e,r,0,n,this.visualElement,!1))}stopAnimation(){Fa(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Fa(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Fa(n=>{const{drag:r}=this.getProps();if(!Jb(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-Mn(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ih(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Fa(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=e0e({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Fa(s=>{if(!Jb(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];o.set(Mn(c,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;r0e.set(this.visualElement,this);const e=this.visualElement.current,n=Zm(e,"pointerdown",c=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Ih(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Cn.read(r);const s=jv(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Fa(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=c[f].translate,h.set(h.get()+c[f].translate))}),this.visualElement.render())}));return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=nP,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function Jb(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function a0e(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class s0e extends Eu{constructor(e){super(e),this.removeGroupControls=Ha,this.removeListeners=Ha,this.controls=new i0e(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ha}unmount(){this.removeGroupControls(),this.removeListeners()}}const pV=t=>(e,n)=>{t&&Cn.postRender(()=>t(e,n))};class o0e extends Eu{constructor(){super(...arguments),this.removePointerDownListener=Ha}onPointerDown(e){this.session=new uK(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:cK(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:pV(e),onStart:pV(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&Cn.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Zm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const e1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gV(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const gm={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(st.test(t))t=parseFloat(t);else return t;const n=gV(t,e.target.x),r=gV(t,e.target.y);return`${n}% ${r}%`}},l0e={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=du.parse(t);if(i.length>5)return r;const a=du.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const u=Mn(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};let qA=!1;class c0e extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;Nme(u0e),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),qA&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),e1.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,qA=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||Cn.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),PO.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;qA=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function fK(t){const[e,n]=NH(),r=A.useContext(lO);return y.jsx(c0e,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(GH),isPresent:e,safeToRemove:n})}const u0e={borderRadius:{...gm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:gm,borderTopRightRadius:gm,borderBottomLeftRadius:gm,borderBottomRightRadius:gm,boxShadow:l0e};function d0e(t,e,n){const r=li(t)?t:hp(t);return r.start(UO("",r,e,n)),r.animation}const f0e=(t,e)=>t.depth-e.depth;class h0e{constructor(){this.children=[],this.isDirty=!1}add(e){dO(this.children,e),this.isDirty=!0}remove(e){fO(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(f0e),this.isDirty=!1,this.children.forEach(e)}}function p0e(t,e){const n=Bi.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(uu(r),t(a-e))};return Cn.setup(r,!0),()=>uu(r)}const hK=["TopLeft","TopRight","BottomLeft","BottomRight"],g0e=hK.length,mV=t=>typeof t=="string"?parseFloat(t):t,vV=t=>typeof t=="number"||st.test(t);function m0e(t,e,n,r,i,a){i?(t.opacity=Mn(0,n.opacity??1,v0e(r)),t.opacityExit=Mn(e.opacity??1,0,y0e(r))):a&&(t.opacity=Mn(e.opacity??1,n.opacity??1,r));for(let s=0;s<g0e;s++){const o=`border${hK[s]}Radius`;let c=yV(e,o),u=yV(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||vV(c)===vV(u)?(t[o]=Math.max(Mn(mV(c),mV(u),r),0),(So.test(u)||So.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=Mn(e.rotate||0,n.rotate||0,r))}function yV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const v0e=pK(0,.5,JG),y0e=pK(.5,.95,Ha);function pK(t,e,n){return r=>r<t?0:r>e?1:n(Dv(t,e,r))}function bV(t,e){t.min=e.min,t.max=e.max}function Ma(t,e){bV(t.x,e.x),bV(t.y,e.y)}function xV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function wV(t,e,n,r,i){return t-=e,t=K1(t,1/n,r),i!==void 0&&(t=K1(t,1/i,r)),t}function b0e(t,e=0,n=1,r=.5,i,a=t,s=t){if(So.test(e)&&(e=parseFloat(e),e=Mn(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Mn(a.min,a.max,r);t===a&&(o-=e),t.min=wV(t.min,e,n,o,i),t.max=wV(t.max,e,n,o,i)}function _V(t,e,[n,r,i],a,s){b0e(t,e[n],e[r],e[i],e.scale,a,s)}const x0e=["x","scaleX","originX"],w0e=["y","scaleY","originY"];function SV(t,e,n,r){_V(t.x,e,x0e,n?n.x:void 0,r?r.x:void 0),_V(t.y,e,w0e,n?n.y:void 0,r?r.y:void 0)}function EV(t){return t.translate===0&&t.scale===1}function gK(t){return EV(t.x)&&EV(t.y)}function TV(t,e){return t.min===e.min&&t.max===e.max}function _0e(t,e){return TV(t.x,e.x)&&TV(t.y,e.y)}function AV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function mK(t,e){return AV(t.x,e.x)&&AV(t.y,e.y)}function CV(t){return _i(t.x)/_i(t.y)}function IV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class S0e{constructor(){this.members=[]}add(e){dO(this.members,e),e.scheduleRender()}remove(e){if(fO(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function E0e(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=n?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:f,rotateX:h,rotateY:g,skewX:m,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),g&&(r+=`rotateY(${g}deg) `),m&&(r+=`skewX(${m}deg) `),b&&(r+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const GA=["","X","Y","Z"],T0e=1e3;let A0e=0;function HA(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function vK(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=tK(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Cn,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&vK(r)}function yK({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e?.()){this.id=A0e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(k0e),this.nodes.forEach(N0e),this.nodes.forEach(R0e),this.nodes.forEach(P0e)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new h0e)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new gO),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=OH(s)&&!yme(s),this.instance=s;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let f,h=0;const g=()=>this.root.updateBlockedByResize=!1;Cn.read(()=>{h=window.innerWidth}),t(s,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,f&&f(),f=p0e(g,250),e1.hasAnimatedSinceResize&&(e1.hasAnimatedSinceResize=!1,this.nodes.forEach(DV)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||V0e,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=u.getProps(),S=!this.targetLayout||!mK(this.targetLayout,m),T=!h&&g;if(this.options.layoutRoot||this.resumeFrom||T||h&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...IO(b,"layout"),onPlay:x,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(f,T)}else h||DV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),uu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(M0e),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&vK(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(PV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(O0e),this.nodes.forEach(C0e),this.nodes.forEach(I0e)):this.nodes.forEach(PV),this.clearAllSnapshots();const o=Bi.now();Xr.delta=kl(0,1e3/60,o-Xr.timestamp),Xr.timestamp=o,Xr.isProcessing=!0,RA.update.process(Xr),RA.preRender.process(Xr),RA.render.process(Xr),Xr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,PO.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(D0e),this.sharedNodes.forEach(j0e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Cn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Cn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!_i(this.snapshot.measuredBox.x)&&!_i(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!gK(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||od(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),B0e(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Xn();const o=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(F0e))){const{scroll:u}=this.root;u&&(kh(o.x,u.offset.x),kh(o.y,u.offset.y))}return o}removeElementScroll(s){const o=Xn();if(Ma(o,s),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Ma(o,s),kh(o.x,f.offset.x),kh(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const c=Xn();Ma(c,s);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Ph(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),od(f.latestValues)&&Ph(c,f.latestValues)}return od(this.latestValues)&&Ph(c,this.latestValues),c}removeTransform(s){const o=Xn();Ma(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!od(u.latestValues))continue;Xk(u.latestValues)&&u.updateSnapshot();const f=Xn(),h=u.measurePageBox();Ma(f,h),SV(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return od(this.latestValues)&&SV(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Xr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xn(),this.relativeTargetOrigin=Xn(),ev(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Ma(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Xn(),this.targetWithTransforms=Xn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Kve(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ma(this.target,this.layout.layoutBox),YH(this.target,this.targetDelta)):Ma(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xn(),this.relativeTargetOrigin=Xn(),ev(this.relativeTargetOrigin,this.target,g.target),Ma(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Xk(this.parent.latestValues)||WH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),o=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Xr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;Ma(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;ove(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Xn());const{target:m}=s;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(xV(this.prevProjectionDelta.x,this.projectionDelta.x),xV(this.prevProjectionDelta.y,this.projectionDelta.y)),Jm(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!IV(this.projectionDelta.x,this.prevProjectionDelta.x)||!IV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Dh(),this.projectionDelta=Dh(),this.projectionDeltaWithTransform=Dh()}setAnimationOrigin(s,o=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},h=Dh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=Xn(),m=c?c.source:void 0,b=this.layout?this.layout.source:void 0,x=m!==b,w=this.getStack(),S=!w||w.members.length<=1,T=!!(x&&!S&&this.options.crossfade===!0&&!this.path.some(L0e));this.animationProgress=0;let I;this.mixTargetDelta=N=>{const O=N/1e3;OV(h.x,s.x,O),OV(h.y,s.y,O),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ev(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),z0e(this.relativeTarget,this.relativeTargetOrigin,g,O),I&&_0e(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=Xn()),Ma(I,this.relativeTarget)),x&&(this.animationValues=f,m0e(f,u,this.latestValues,O,T,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(uu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Cn.update(()=>{e1.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=hp(0)),this.currentAnimation=d0e(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(T0e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:f}=s;if(!(!o||!c||!u)){if(this!==s&&this.layout&&u&&bK(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Xn();const h=_i(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const g=_i(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+g}Ma(o,c),Ph(o,f),Jm(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new S0e),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&HA("z",s,u,this.animationValues);for(let f=0;f<GA.length;f++)HA(`rotate${GA[f]}`,s,u,this.animationValues),HA(`skew${GA[f]}`,s,u,this.animationValues);s.render();for(const f in u)s.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=Jx(o?.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=Jx(o?.pointerEvents)||""),this.hasProjected&&!od(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const f=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=E0e(this.projectionDeltaWithTransform,this.treeScale,f);c&&(h=c(f,h)),s.transform=h;const{x:g,y:m}=this.projectionDelta;s.transformOrigin=`${g.origin*100}% ${m.origin*100}% 0`,u.animationValues?s.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in Mv){if(f[b]===void 0)continue;const{correct:x,applyTo:w,isCSSVariable:S}=Mv[b],T=h==="none"?f[b]:x(f[b],u);if(w){const I=w.length;for(let N=0;N<I;N++)s[w[N]]=T}else S?this.options.visualElement.renderState.vars[b]=T:s[b]=T}this.options.layoutId&&(s.pointerEvents=u===this?Jx(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(kV),this.root.sharedNodes.clear()}}}function C0e(t){t.updateLayout()}function I0e(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?Fa(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=_i(h);h.min=n[f].min,h.max=h.min+g}):bK(i,e.layoutBox,n)&&Fa(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=_i(n[f]);h.max=h.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const s=Dh();Jm(s,n,e.layoutBox);const o=Dh();a?Jm(o,t.applyTransform(r,!0),e.measuredBox):Jm(o,n,e.layoutBox);const c=!gK(s);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:g}=f;if(h&&g){const m=Xn();ev(m,e.layoutBox,h.layoutBox);const b=Xn();ev(b,n,g.layoutBox),mK(m,b)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=m,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:o,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function k0e(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function P0e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function D0e(t){t.clearSnapshot()}function kV(t){t.clearMeasurements()}function PV(t){t.isLayoutDirty=!1}function O0e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function DV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function N0e(t){t.resolveTargetDelta()}function R0e(t){t.calcProjection()}function M0e(t){t.resetSkewAndRotation()}function j0e(t){t.removeLeadSnapshot()}function OV(t,e,n){t.translate=Mn(e.translate,0,n),t.scale=Mn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function NV(t,e,n,r){t.min=Mn(e.min,n.min,r),t.max=Mn(e.max,n.max,r)}function z0e(t,e,n,r){NV(t.x,e.x,n.x,r),NV(t.y,e.y,n.y,r)}function L0e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const V0e={duration:.45,ease:[.4,0,.1,1]},RV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),MV=RV("applewebkit/")&&!RV("chrome/")?Math.round:Ha;function jV(t){t.min=MV(t.min),t.max=MV(t.max)}function B0e(t){jV(t.x),jV(t.y)}function bK(t,e,n){return t==="position"||t==="preserve-aspect"&&!Hve(CV(e),CV(n),.2)}function F0e(t){return t!==t.root&&t.scroll?.wasRoot}const U0e=yK({attachResizeListener:(t,e)=>jv(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),KA={current:void 0},xK=yK({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!KA.current){const t=new U0e({});t.mount(window),t.setOptions({layoutScroll:!0}),KA.current=t}return KA.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),$0e={pan:{Feature:o0e},drag:{Feature:s0e,ProjectionNode:xK,MeasureLayout:fK}};function zV(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Cn.postRender(()=>a(e,R0(e)))}class q0e extends Eu{mount(){const{current:e}=this.node;e&&(this.unmount=hme(e,(n,r)=>(zV(this.node,r,"Start"),i=>zV(this.node,i,"End"))))}unmount(){}}class G0e extends Eu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=D0(jv(this.node.current,"focus",()=>this.onFocus()),jv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function LV(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Cn.postRender(()=>a(e,R0(e)))}class H0e extends Eu{mount(){const{current:e}=this.node;e&&(this.unmount=vme(e,(n,r)=>(LV(this.node,r,"Start"),(i,{success:a})=>LV(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const rP=new WeakMap,WA=new WeakMap,K0e=t=>{const e=rP.get(t.target);e&&e(t)},W0e=t=>{t.forEach(K0e)};function Y0e({root:t,...e}){const n=t||document;WA.has(n)||WA.set(n,{});const r=WA.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(W0e,{root:t,...e})),r[i]}function X0e(t,e,n){const r=Y0e(e);return rP.set(t,n),r.observe(t),()=>{rP.delete(t),r.unobserve(t)}}const Q0e={some:0,all:1};class Z0e extends Eu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Q0e[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),g=u?f:h;g&&g(c)};return X0e(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(J0e(e,n))&&this.startObserver()}unmount(){}}function J0e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const eye={inView:{Feature:Z0e},tap:{Feature:H0e},focus:{Feature:G0e},hover:{Feature:q0e}},tye={layout:{ProjectionNode:xK,MeasureLayout:fK}},nye={...Bve,...eye,...$0e,...tye},Gn=ive(nye,vve);function rye(t){t.values.forEach(e=>e.stop())}function iP(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&FO(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{iP(a,e)})})}function iye(t,e){if(Array.isArray(e))return iP(t,e);if(typeof e=="string")return iP(t,[e]);FO(t,e)}function aye(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(iK(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{iye(r,n)})},stop(){t.forEach(n=>{rye(n)})},mount(){return()=>{e.stop()}}};return e}function sye(){const t=F_(aye);return uO(t.mount,[]),t}const oye=sye,pf=tD((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},2e3)},hideToast:()=>{t({isVisible:!1})}})),lye=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=pf(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return y.jsx(wa,{children:n&&y.jsx(Gn.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-24 right-6 z-[110] max-w-xs",children:y.jsxs("div",{className:`rounded-lg shadow-lg p-3 flex items-center justify-between ${a()}`,children:[y.jsx("div",{className:"flex items-center flex-1 min-w-0",children:y.jsx("span",{className:"text-xs font-medium whitespace-pre-line pr-2",children:t})}),y.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r&&y.jsxs("button",{onClick:()=>{r(),i()},className:"px-2 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-bold transition-colors",children:[y.jsx(Bce,{size:12,className:"inline mr-1"}),"Undo"]}),y.jsx("button",{onClick:i,className:"p-0.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:y.jsx(g_,{size:14})})]})]})})})};class aa extends A.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[y.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:y.jsx($h,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[y.jsx(Xh,{className:"h-4 w-4"}),"Try Again"]}),y.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[y.jsx(lce,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const cye=({onAddTransaction:t})=>{const e=ns(),n=Ls(),[r,i]=A.useState(!1),a=A.useRef(null),s=u=>n.pathname===u;A.useEffect(()=>{const u=f=>{a.current&&!a.current.contains(f.target)&&i(!1)};if(r)return document.addEventListener("mousedown",u),document.addEventListener("touchstart",u),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("touchstart",u)}},[r]);const o=[{path:"/reports",icon:y.jsx(e7,{className:"w-5 h-5"}),label:"Reports"},{path:"/analytics",icon:y.jsx(_1,{className:"w-5 h-5"}),label:"Analytics"},{path:"/budget-breakdown",icon:y.jsx(Mle,{className:"w-5 h-5"}),label:"Budget Breakdown"}],c=({path:u,icon:f,label:h})=>{const g=s(u);return y.jsxs("button",{onClick:m=>{m.stopPropagation(),e(u)},className:`
          relative group flex flex-col items-center justify-center
          w-12 h-12 rounded-2xl transition-all duration-300
          ${g?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
        `,children:[y.jsx("div",{className:`transition-transform duration-300 ${g?"scale-110":"group-hover:scale-105"}`,children:f}),y.jsx("span",{className:"sr-only",children:h}),g&&y.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]})};return y.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center z-[100] pointer-events-none safe-area-inset-bottom",children:y.jsxs("nav",{className:`
          pointer-events-auto
          flex items-center gap-1 p-2 pl-4 pr-4
          bg-white/60 dark:bg-zinc-900/60 backdrop-blur-xl
          border border-zinc-200/30 dark:border-zinc-800/30
          rounded-full shadow-2xl shadow-zinc-900/10
          transform transition-all duration-500 ease-out
        `,onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:[y.jsx(c,{path:"/",label:"Budget",icon:y.jsx(p_,{className:"w-6 h-6"})}),y.jsx(c,{path:"/transactions",label:"Transactions",icon:y.jsx(uce,{className:"w-6 h-6"})}),y.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),y.jsx("button",{onClick:u=>{if(u.stopPropagation(),i(!1),t){t();return}e("/add-transaction")},className:`
            -mt-8 mb-2 mx-1
            group relative flex items-center justify-center
            w-16 h-16 rounded-full
            bg-blue-600 text-white
            shadow-xl shadow-blue-600/30
            hover:shadow-blue-600/50 hover:scale-105 hover:-translate-y-1
            active:scale-95 active:translate-y-0
            transition-all duration-300 cubic-bezier(0.175, 0.885, 0.32, 1.275)
          `,children:y.jsx(m0,{className:"w-8 h-8 transition-transform duration-300 group-hover:rotate-90"})}),y.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),y.jsxs("div",{className:"relative",ref:a,children:[y.jsxs("button",{onClick:u=>{u.stopPropagation(),i(!r)},className:`
              relative group flex flex-col items-center justify-center
              w-12 h-12 rounded-2xl transition-all duration-300
              ${r?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
            `,children:[y.jsx("div",{className:`transition-transform duration-300 ${r?"scale-110":"group-hover:scale-105"}`,children:y.jsx(Qle,{className:"w-6 h-6"})}),y.jsx("span",{className:"sr-only",children:"More"}),r&&y.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]}),r&&y.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-56 bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-200/50 dark:border-zinc-800/50 backdrop-blur-xl z-50 overflow-hidden",onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:y.jsx("div",{className:"p-2 space-y-1",children:o.map((u,f)=>y.jsxs("button",{onClick:h=>{h.stopPropagation(),e(u.path),i(!1)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[y.jsx("div",{className:"text-zinc-600 dark:text-zinc-400",children:u.icon}),y.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:u.label})]},f))})})]}),y.jsx(c,{path:"/settings",label:"Settings",icon:y.jsx(kce,{className:"w-6 h-6"})})]})})};function uye(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function dye(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function vl(t,e){return function(n){n&&(t[e]=n)}}function wK(t,e,n){return function(r){r&&(t[e][n]=r)}}function VV(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function fye(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var s,o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];var u=(s=this[r])[i].apply(s,o);return u===this[r]?this:u})})}}var hye="function",pye="object",gye="string",mye="number",$O="undefined",_K=typeof window!==$O,vye=typeof document!==$O&&document,yye=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],dr=1e-7,ex={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function bye(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function W1(t,e,n,r){return(t*r+e*n)/(n+r)}function H_(t){return typeof t===$O}function Ns(t){return t&&typeof t===pye}function gr(t){return Array.isArray(t)}function qi(t){return typeof t===gye}function gp(t){return typeof t===mye}function qO(t){return typeof t===hye}function xye(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function SK(t,e,n,r,i){var a=GO(t,e,n);return a?n:wye(t,e,n+1,r,i)}function GO(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function wye(t,e,n,r,i){for(var a=function(u){var f=e[u].trim();if(f===t.close&&!GO(t,e,u))return{value:u};var h=u,g=Gi(i,function(m){var b=m.open;return b===f});if(g&&(h=SK(g,e,u,r,i)),h===-1)return s=u,"break";u=h,s=u},s,o=n;o<r;++o){var c=a(o);if(o=s,typeof c=="object")return c.value;if(c==="break")break}return-1}function HO(t,e){var n=qi(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,c=o===void 0?s:o,u=n.openCloseCharacters,f=u===void 0?yye:u,h=f.map(function(k){var D=k.open,R=k.close;return D===R?D:D+"|"+R}).join("|"),g="(\\s*"+i+"\\s*|"+h+"|\\s+)",m=new RegExp(g,"g"),b=t.split(m).filter(function(k){return k&&k!=="undefined"}),x=b.length,w=[],S=[];function T(){return S.length?(w.push(S.join("")),S=[],!0):!1}for(var I=function(k){var D=b[k].trim(),R=k,z=Gi(f,function(j){var H=j.open;return H===D}),L=Gi(f,function(j){var H=j.close;return H===D});if(z){if(R=SK(z,b,k,x,f),R!==-1&&c)return T()&&a||(w.push(b.slice(k,R+1).join("")),k=R,a)?(N=k,"break"):(N=k,"continue")}else if(L&&!GO(L,b,k)){var B=bye(f);return B.splice(f.indexOf(L),1),{value:HO(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:c,openCloseCharacters:B})}}else if(xye(D,i)&&!s)return T(),a?(N=k,"break"):(N=k,"continue");R===-1&&(R=x-1),S.push(b.slice(k,R+1).join("")),k=R,N=k},N,O=0;O<x;++O){var P=I(O);if(O=N,typeof P=="object")return P.value;if(P==="break")break}return S.length&&w.push(S.join("")),w}function fu(t){return HO(t,"")}function Ed(t){return HO(t,",")}function EK(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function M0(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function _ye(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function t1(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function zv(){return Date.now?Date.now():new Date().getTime()}function Dl(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Gi(t,e,n){var r=Dl(t,e);return r>-1?t[r]:n}var TK=(function(){var t=zv(),e=_K&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=zv(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),Sye=(function(){var t=_K&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function Ol(t){return Object.keys(t)}function Eye(t){var e=Ol(t);return e.map(function(n){return t[n]})}function an(t,e){var n=M0(t),r=n.value,i=n.unit;if(Ns(e)){var a=e[i];if(a){if(qO(a))return a(r);if(ex[i])return ex[i](r,a)}}else if(i==="%")return r*e/100;return ex[i]?ex[i](r):r}function aP(t,e,n){return Math.max(e,Math.min(t,n))}function BV(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[ut(e[0],dr),ut(e[0]/r,dr)],[ut(e[1]*r,dr),ut(e[1],dr)]].filter(function(i){return i.every(function(a,s){var o=e[s],c=ut(o,dr);return n?a<=o||a<=c:a>=o||a>=c})})[0]||t}function AK(t,e,n,r){if(!r)return t.map(function(m,b){return aP(m,e[b],n[b])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=BV(t,e,!1,s),c=o[0],u=o[1],f=BV(t,n,!0,s),h=f[0],g=f[1];return i<c||a<u?(i=c,a=u):(i>h||a>g)&&(i=h,a=g),[i,a]}function Tye(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function sP(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Jn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Aye(t){return[0,1].map(function(e){return sP(t.map(function(n){return n[e]}))})}function FV(t){var e=Aye(t),n=Jn(e,t[0]),r=Jn(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function yl(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function ut(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function UV(t,e){return t.forEach(function(n,r){t[r]=ut(t[r],e)}),t}function Cye(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function CK(t){return t.reduce(function(e,n){return e.concat(n)},[])}function IK(t,e){t.indexOf(e)===-1&&t.push(e)}function wr(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function kK(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function PK(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Wr(t,e,n,r){t.addEventListener(e,n,r)}function vr(t,e,n,r){t.removeEventListener(e,n,r)}function Wp(t){return t?.ownerDocument||vye}function KO(t){return Wp(t).documentElement}function Tu(t){return Wp(t).body}function nu(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function DK(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Yp(t){return Ns(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var Iye=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,s=i.indexOf(n),o=s===-1?i.length:s;i[o]=n,a[o]=r},t})(),kye=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),Pye=typeof Map=="function",Dye=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function Oye(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],s=i[1],o=new Dye;n[a]=o,r[s]=o}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var s=i[0],o=i[1];if(s===o)return[0,0];var c=n[s],u=r[o-1],f=c.getIndex();c.disconnect(),u?c.connect(u,u.next):c.connect(void 0,n[0]);var h=c.getIndex();return[f,h]})}var Nye=(function(){function t(n,r,i,a,s,o,c,u){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=c,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=Oye(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,s){var o=a[0],c=a[1],u=r[s],f=u[0],h=u[1];if(o!==c)return i.push([f,h]),!0}),this.cachePureChanged=i},t})();function j0(t,e,n){var r=Pye?Map:n?kye:Iye,i=n||function(T){return T},a=[],s=[],o=[],c=t.map(i),u=e.map(i),f=new r,h=new r,g=[],m=[],b={},x=[],w=0,S=0;return c.forEach(function(T,I){f.set(T,I)}),u.forEach(function(T,I){h.set(T,I)}),c.forEach(function(T,I){var N=h.get(T);typeof N>"u"?(++S,s.push(I)):b[N]=S}),u.forEach(function(T,I){var N=f.get(T);typeof N>"u"?(a.push(I),++w):(o.push([N,I]),S=b[I]||0,g.push([N-S,I-w]),m.push(I===N),N!==I&&x.push([N,I]))}),s.reverse(),new Nye(t,e,a,s,x,o,g,m)}var Rye=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=j0(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),oP=function(t,e){return oP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},oP(t,e)};function z0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");oP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var po=function(){return po=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},po.apply(this,arguments)};function OK(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function $V(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function qV(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function NK(t){var e=[];return t.forEach(function(n){e=e.concat(gr(n)?NK(n):n)}),e}function YA(t,e){if(!e)return t;for(var n in e)H_(t[n])&&(t[n]=e[n]);return t}function Y1(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function GV(t){var e=t.className,n=OK(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function HV(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function K_(t){if(!t)return null;var e=t.b;return Yp(e)?e:K_(t.c)}function RK(t){var e=t.parentNode;e&&e.removeChild(t)}function MK(t){t.forEach(function(e){e()})}function Mye(){return this.constructor(this.props,this.context)}var WO=0,W_=(function(){function t(n,r,i,a,s,o,c){c===void 0&&(c={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=s,this.ref=o,this.ps=c,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,s){var o=this,c=o.d,u=Eye(r).filter(function(b){return b.$_req}),f=NK(u.map(function(b){return b.$_subs})),h=Gi(f,function(b){return b.d===c});if(o.b&&!qi(i)&&!s&&!o.s(i.props,a)&&!h){var g=f.reduce(function(b,x){var w=x.d;return b[0]?b[0].d===w&&b.push(x):w>c&&b.push(x),b},[]);return g.forEach(function(b){L0(b,b._ps,[b.o],n,r,!0)}),!1}o.o=i,o.ss(a);var m=o.ps;return qi(i)||(o.ps=i.props,o.ref=i.ref),YO(this),o.r(n,r,o.b?m:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function jK(){return Object.__CROACT_CURRENT_INSTNACE__}function jye(){return WO}function zye(t){WO=t}function YO(t){return Object.__CROACT_CURRENT_INSTNACE__=t,WO=0,t}var XO=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=po(po({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,s=L0(a.c,[a],[a.o],i,a._cs,po(po({},this.state),this.$_state),r);s&&(n&&i.push(n),MK(i),YO(null))},t})(),zK=(function(t){z0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return Y1(this.props,r)||Y1(this.state,i)},e})(XO);function LK(t){var e=function(n){e.current=n};return e.current=t,e}function Lye(t){return t._fr=!0,t}function Vye(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new XO(e,n),a.constructor=t,t._fr?(r.fr=LK(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=Mye),a.$_p=r,a}var Bye=(function(t){z0(e,t);function e(r,i,a,s,o,c,u){u===void 0&&(u={});var f=t.call(this,r,i,a,s,o,c,YA(u,r.defaultProps))||this;return f.typ="comp",f._usefs=[],f._uefs=[],f._defs=[],f}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(YA(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var s,o,c=this,u=c.t;c.ps=YA(c.ps,c.t.defaultProps);var f=c.ps,h=!c.b,g=u.contextType,m=c.b,b=g?.get(c);c._cs=i,h?(m=Vye(u,f,b,c),c.b=m):(m.props=f,m.context=b);var x=m.state;c._usefs=[],c._uefs=[];var w=m.render();((o=(s=w?.props)===null||s===void 0?void 0:s.children)===null||o===void 0?void 0:o.length)===0&&(w.props.children=c.ps.children);var S=po(po({},i),m.$_cs);L0(c,c._ps,w?[w]:[],r,S),h?c._uefs.push(function(){g?.register(c),m.componentDidMount()}):c._uefs.push(function(){m.componentDidUpdate(a,x)}),r.push(function(){c._usefs.forEach(function(T){T()}),h?c.md():c.ud(),c._defs=c._uefs.map(function(T){return T()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(s){s.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(s){s&&s()}),i.b.componentWillUnmount()},e})(W_);function Fye(t,e,n){var r=QO(GV(t),GV(e)),i=r.added,a=r.removed,s=r.changed;for(var o in i)n.setAttribute(o,i[o]);for(var c in s)n.setAttribute(c,s[c][1]);for(var u in a)n.removeAttribute(u)}function Uye(t,e,n){var r=QO(t,e),i=r.added,a=r.removed;for(var s in a)n.e(s,!0);for(var o in i)n.e(o)}function QO(t,e){var n=Ol(t),r=Ol(e),i=j0(n,r,function(c){return c}),a={},s={},o={};return i.added.forEach(function(c){var u=r[c];a[u]=e[u]}),i.removed.forEach(function(c){var u=n[c];s[u]=t[u]}),i.maintained.forEach(function(c){var u=c[0],f=n[u],h=[t[f],e[f]];t[f]!==e[f]&&(o[f]=h)}),{added:a,removed:s,changed:o}}function $ye(t,e,n){var r=n.style,i=QO(t,e),a=i.added,s=i.removed,o=i.changed;for(var c in a){var u=t1(c,"-");r.setProperty(u,a[c])}for(var c in o){var f=t1(c,"-");r.setProperty(f,o[c][1])}for(var c in s){var h=t1(c,"-");r.removeProperty(h)}}function qye(t){return t.replace(/^on/g,"").toLowerCase()}var Gye=(function(t){z0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,s=a._es,o=a.b,c=qye(r);i?(vr(o,c,s[r]),delete s[r]):(s[r]=function(u){var f,h;(h=(f=a.ps)[r])===null||h===void 0||h.call(f,u)},Wr(o,c,s[r]))},n.s=function(r){return Y1(this.ps,r)},n.r=function(r,i,a){var s,o=this,c=!o.b,u=o.ps;if(c){var f=K_(o.c),h=!1;o._svg||o.t==="svg"?h=!0:h=f&&f.ownerSVGElement,o._svg=h;var g=(s=o._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],m=o.t;if(g)o._hyd=[].slice.call(g.children||[]);else{var b=Wp(f);h?g=b.createElementNS("http://www.w3.org/2000/svg",m):g=b.createElement(m)}o.b=g}L0(o,o._ps,u.children,r,i);var x=o.b,w=HV(a),S=w[0],T=w[1],I=HV(u),N=I[0],O=I[1];return Fye(S,N,x),Uye(T,O,o),$ye(a.style||{},u.style||{},x),r.push(function(){c?o.md():o.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var s in i)vr(a,s,i[s]);r._ps.forEach(function(o){o.un()}),r._es={},r._sel||RK(a)},e})(W_);function Lv(t){if(!t||Yp(t))return t;var e=t.$_p._ps;return e.length?Lv(e[0].b):null}function VK(t){if(t){if(t.b&&Yp(t.b))return t;var e=t._ps;return e.length?VK(e[0]):null}}function Cs(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,s=i.ref,o=OK(i,["key","ref"]);return{type:t,key:a,ref:s,props:po(po({},o),{children:CK(n).filter(function(c){return c!=null&&c!==!1})})}}var BK=(function(t){z0(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(W_),Hye=(function(t){z0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,s=!a.b;if(s){var o=K_(a.c),c=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=c||Wp(o).createTextNode(a.t.replace("text_",""))}return r.push(function(){s?a.md():a.ud()}),!0},n.un=function(){RK(this.b)},e})(W_);function Kye(t,e,n){var r=n.map(function(c){return qi(c)?null:c.key}),i=qV(e.map(function(c){return c.k})),a=qV(r),s=j0(i,a,function(c){return c});s.removed.forEach(function(c){e.splice(c,1)[0].un()}),s.ordered.forEach(function(c){var u=c[0],f=c[1],h=e.splice(u,1)[0];e.splice(f,0,h);var g=Lv(h.b),m=Lv(e[f+1]&&e[f+1].b);g&&g.parentNode.insertBefore(g,m)}),s.added.forEach(function(c){e.splice(c,0,KV(n[c],r[c],c,t))});var o=s.maintained.filter(function(c){c[0];var u=c[1],f=n[u],h=e[u],g=qi(f)?"text_".concat(f):f.type;return g!==h.t?(h.un(),e.splice(u,1,KV(f,r[u],u,t)),!0):(h.i=u,!1)});return $V($V([],s.added,!0),o.map(function(c){c[0];var u=c[1];return u}))}function Wye(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=Lv(n[i].b);if(a)return a}return null}function KV(t,e,n,r){var i=r.d+1;if(qi(t)||gp(t))return new Hye("text_".concat(t),i,e,n,r,null,{});var a=t.type,s=typeof a=="string"?Gye:Bye;return new s(a,i,e,n,r,t.ref,t.props)}function L0(t,e,n,r,i,a,s){var o=Kye(t,e,n),c=t._hyd,u=e.filter(function(h,g){return h._hyd=c,h.u(r,i,n[g],a,s)});t.typ==="container"&&t._sel&&e.forEach(function(h){var g=VK(h);g&&(g._sel=!0)}),t._hyd=null;var f=K_(t);return f&&o.reverse().forEach(function(h){var g=e[h],m=Lv(g.b);if(m&&f!==m&&!m.parentNode){var b=Wye(t,g);f.insertBefore(m,b)}}),u.length>0}function Yye(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new BK(e));var a=[];return L0(n,n._ps,t?[t]:[],a,r,void 0,void 0),MK(a),YO(null),i||(e.__CROACT__=n),n}function WV(t,e,n){return!n&&t&&(n=new BK(e.parentElement),n._hyd=[e],n._sel=!0),Yye(t,e,n),n}function FK(t){var e=jK(),n=e._hs||(e._hs=[]),r=jye(),i=n[r];if(zye(r+1),i){if(!Y1(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function Xye(t,e){var n=FK({func:t,deps:e});return n.value}function Qye(t){return Xye(function(){return LK(t)},[])}function UK(t,e,n){var r=jK(),i=FK({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function Zye(t,e,n){UK(function(){t?.(e())},n,!0)}function ZO(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function $K(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function qK(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function JO(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Jye(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function ebe(t,e){var n=JO("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function lP(t){return t.replace(/_/g,".")}function Nm(t,e){var n=null,r="-1";return ZO(t,function(i){var a=JO("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=ebe(i.versionTest.toLowerCase(),e)||r),r=lP(r),!0)}),{preset:n,version:r}}function tx(t,e){var n={brand:"",version:"-1"};return ZO(t,function(r){var i=GK(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function GK(t,e){return $K(t,function(n){var r=n.brand;return JO(""+e.test,r.toLowerCase())})}var HK=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],KK=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],cP=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],WK=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],YK=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function XK(t){return!!Nm(WK,t).preset}function tbe(t){var e=qK(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:XK(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=Nm(HK,e),s=a.preset,o=a.version,c=Nm(YK,e),u=c.preset,f=c.version,h=Nm(KK,e);if(r.chromium=!!h.preset,r.chromiumVersion=h.version,!r.chromium){var g=Nm(cP,e);r.webkit=!!g.preset,r.webkitVersion=g.version}return u&&(i.name=u.id,i.version=f,i.majorVersion=parseInt(f,10)),s&&(r.name=s.id,r.version=o,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function nbe(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!tx(WK,n).brand||XK(qK())},o={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&ZO(cP,function(g){return GK(n,g)});var c=tx(KK,n);if(s.chromium=!!c.brand,s.chromiumVersion=c.version||"-1",!s.chromium){var u=tx(cP,n);s.webkit=!!u.brand,s.webkitVersion=u.version||"-1"}var f=$K(YK,function(g){return new RegExp(""+g.test,"g").exec(a)});o.name=f?f.id:"";{var h=tx(HK,n);s.name=h.brand||s.name,s.version=h.brand&&t?t.uaFullVersion:h.version}return s.webkit&&(o.name=r?"ios":"mac"),o.name==="ios"&&s.webview&&(s.version="-1"),o.version=lP(o.version),s.version=lP(s.version),o.majorVersion=parseInt(o.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:o,isMobile:r,isHints:!0}}function rbe(t){return Jye()?nbe():tbe(t)}function ibe(t,e,n,r,i,a){for(var s=0;s<i;++s){var o=n+s*i,c=r+s*i;t[o]+=t[c]*a,e[o]+=e[c]*a}}function abe(t,e,n,r,i){for(var a=0;a<i;++a){var s=n+a*i,o=r+a*i,c=t[s],u=e[s];t[s]=t[o],t[o]=c,e[s]=e[o],e[o]=u}}function sbe(t,e,n,r,i){for(var a=0;a<r;++a){var s=n+a*r;t[s]/=i,e[s]/=i}}function QK(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function ko(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=vn(e),i=0;i<e;++i){var a=e*i+i;if(!ut(n[a],dr)){for(var s=i+1;s<e;++s)if(n[e*i+s]){abe(n,r,i,s,e);break}}if(!ut(n[a],dr))return[];sbe(n,r,i,e,n[a]);for(var s=0;s<e;++s){var o=s,c=s+i*e,u=n[c];!ut(u,dr)||i===s||ibe(n,r,o,i,e,-u)}}return r}function obe(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function ZK(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function lbe(t,e){for(var n=vn(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Xd(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Rs(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=vn(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var s=0;s<i-1;++s)r[a*n+s]=t[a*e+s];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function X1(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=vn(t);return e.forEach(function(i){r=on(r,i,t)}),r}function on(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<a;++o){r[o*n+s]=0;for(var c=0;c<i;++c)r[o*n+s]+=t[c*n+s]*e[o*i+c]}return r}function Rt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function et(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function cbe(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function JK(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function di(t,e,n){n===void 0&&(n=e.length);var r=on(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function ube(t,e){return on(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function dbe(t,e){return on(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function fbe(t,e){return on(t,B0(e,4))}function nx(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,s=e[2],o=s===void 0?1:s;return on(t,[r,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function V0(t,e){return di(B0(e,3),Xd(t,3))}function XA(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,s=e[2],o=s===void 0?0:s;return on(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,o,1],4)}function YV(t,e){return on(t,e,4)}function B0(t,e){var n=Math.cos(t),r=Math.sin(t),i=vn(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function vn(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function eN(t,e){for(var n=vn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Qd(t,e){for(var n=vn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function tN(t,e,n,r,i,a,s,o){var c=t[0],u=t[1],f=e[0],h=e[1],g=n[0],m=n[1],b=r[0],x=r[1],w=i[0],S=i[1],T=a[0],I=a[1],N=s[0],O=s[1],P=o[0],k=o[1],D=[c,0,f,0,g,0,b,0,u,0,h,0,m,0,x,0,1,0,1,0,1,0,1,0,0,c,0,f,0,g,0,b,0,u,0,h,0,m,0,x,0,1,0,1,0,1,0,1,-w*c,-S*c,-T*f,-I*f,-N*g,-O*g,-P*b,-k*b,-w*u,-S*u,-T*h,-I*h,-N*m,-O*m,-P*x,-k*x],R=ko(D,8);if(!R.length)return[];var z=on(R,[w,S,T,I,N,O,P,k],8);return z[8]=1,Rs(obe(z),3,4)}var tv=function(){return tv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tv.apply(this,arguments)};function hbe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Vv(t,e){return e===void 0&&(e=0),Sh(mp(t,e))}function pbe(t,e){var n=di(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Sh(t){var e=hbe();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function mp(t,e){e===void 0&&(e=0);var n=gr(t)?t:fu(t);return n.map(function(r){var i=EK(r),a=i.prefix,s=i.value,o=null,c=a,u="";if(a==="translate"||a==="translateX"||a==="translate3d"){var f=Ns(e)?tv(tv({},e),{"o%":e["%"]}):{"%":e,"o%":e},h=Ed(s).map(function(j,H){return H===0&&"x%"in f?f["%"]=e["x%"]:H===1&&"y%"in f?f["%"]=e["y%"]:f["%"]=e["o%"],an(j,f)}),g=h[0],m=h[1],b=m===void 0?0:m,x=h[2],w=x===void 0?0:x;o=XA,u=[g,b,w]}else if(a==="translateY"){var S=Ns(e)?tv({"%":e["y%"]},e):{"%":e},b=an(s,S);o=XA,u=[0,b,0]}else if(a==="translateZ"){var w=parseFloat(s);o=XA,u=[0,0,w]}else if(a==="scale"||a==="scale3d"){var T=Ed(s).map(function(j){return parseFloat(j)}),I=T[0],N=T[1],O=N===void 0?I:N,P=T[2],k=P===void 0?1:P;o=nx,u=[I,O,k]}else if(a==="scaleX"){var I=parseFloat(s);o=nx,u=[I,1,1]}else if(a==="scaleY"){var O=parseFloat(s);o=nx,u=[1,O,1]}else if(a==="scaleZ"){var k=parseFloat(s);o=nx,u=[1,1,k]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var D=M0(s),R=D.unit,z=D.value,L=R==="rad"?z:z*Math.PI/180;a==="rotate"||a==="rotateZ"?(c="rotateZ",o=fbe):a==="rotateX"?o=ube:a==="rotateY"&&(o=dbe),u=L}else if(a==="matrix3d")o=YV,u=Ed(s).map(function(j){return parseFloat(j)});else if(a==="matrix"){var B=Ed(s).map(function(j){return parseFloat(j)});o=YV,u=[B[0],B[1],0,0,B[2],B[3],0,0,0,0,1,0,B[4],B[5],0,1]}else c="";return{name:a,functionName:c,value:s,matrixFunction:o,functionValue:u}})}var uP=function(t,e){return uP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},uP(t,e)};function gbe(t,e){uP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var eW=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),tW=(function(t){gbe(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,eW)||this}return e})(Rye);function mbe(t,e){return j0(t,e,eW)}var dP=function(){return dP=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dP.apply(this,arguments)};function vbe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var Y_=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Ns(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Ns(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var s=Dl(a,function(o){return o.listener===r});s>-1&&a.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,vbe(a).forEach(function(o){o.listener(r),o.once&&i.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push(dP({listener:r},i))},t})();var fP=function(t,e){return fP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},fP(t,e)};function ybe(t,e){fP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Oh=function(){return Oh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Oh.apply(this,arguments)};function bbe(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function XV(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function rx(t){if(t){if(qi(t))return document.querySelector(t)}else return null;if(qO(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var xbe=(function(t){ybe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=rx(i.container);if(!a){this._flag=!1;return}var s=0,o=0,c=0,u=0;if(a===document.body)c=window.innerWidth,u=window.innerHeight;else{var f=a.getBoundingClientRect();s=f.top,o=f.left,c=f.width,u=f.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:c,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,s=r.clientY,o=i.threshold,c=o===void 0?0:o,u=this,f=u._startRect,h=u._startPos;this._currentOptions=i;var g=[0,0];return f.top>s-c?(h[1]>f.top||s<h[1])&&(g[1]=-1):f.top+f.height<s+c&&(h[1]<f.top+f.height||s>h[1])&&(g[1]=1),f.left>a-c?(h[0]>f.left||a<h[0])&&(g[0]=-1):f.left+f.width<a+c&&(h[0]<f.left+f.width||a>h[0])&&(g[0]=1),!g[0]&&!g[1]?!1:this._continueDrag(Oh(Oh({},i),{direction:g,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=r.direction,c=r.throttleTime,u=c===void 0?0:c,f=r.inputEvent,h=r.isDrag,g=this._getScrollPosition(o||[0,0],r),m=g[0]-s[0],b=g[1]-s[1],x=o||[m?Math.abs(m)/m:0,b?Math.abs(b)/b:0];return this._prevScrollPos=g,this._lock=!1,!m&&!b?!1:(this.emit("move",{offsetX:x[0]?m:0,offsetY:x[1]?b:0,inputEvent:f}),u&&h&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},u)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,s=i.getScrollPosition,o=s===void 0?bbe:s;return o({container:rx(a),direction:r})},n._continueDrag=function(r){var i=this,a,s=r.container,o=r.direction,c=r.throttleTime,u=r.useScroll,f=r.isDrag,h=r.inputEvent;if(!(!this._flag||f&&this._isWait)){var g=zv(),m=Math.max(c+this._prevTime-g,0);if(m>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},m),!1;this._prevTime=g;var b=this._getScrollPosition(o,r);this._prevScrollPos=b,f&&(this._isWait=!0),u||(this._lock=!0);var x={container:rx(s),direction:o,inputEvent:h};return(a=r.requestScroll)===null||a===void 0||a.call(r,x),this.emit("scroll",x),this._isWait=!1,u||this.checkScroll(Oh(Oh({},r),{prevScrollPos:b,direction:o,inputEvent:h}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?XV:i,s=rx(r.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=XV(window,this._onScroll):this._unregister=a(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(Y_);function wbe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function ji(t){return ut(t,dr)}function _be(t,e){return t.every(function(n,r){return ji(n-e[r])===0})}function Sbe(t,e){return!ji(t[0]-e[0])&&!ji(t[1]-e[1])}function nW(t){return t.length<3?0:Math.abs(Tye(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function QV(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,s=Zd(t),o=s.minX,c=s.minY,u=s.maxX,f=s.maxY,h=n/(u-o),g=r/(f-c);return t.map(function(m){return[i+(m[0]-o)*h,a+(m[1]-c)*g]})}function Zd(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function hP(t,e,n){var r=t[0],i=t[1],a=Zd(e),s=a.minX,o=a.maxX,c=[[s,i],[o,i]],u=Q1(c[0],c[1]),f=pP(e),h=[];if(f.forEach(function(b){var x=Q1(b[0],b[1]),w=b[0];if(_be(u,x))h.push({pos:t,line:b,type:"line"});else{var S=rW(nN(u,x),[c,b]);S.forEach(function(T){b.some(function(I){return Sbe(I,T)})?h.push({pos:T,line:b,type:"point"}):ji(w[1]-i)!==0&&h.push({pos:T,line:b,type:"intersection"})})}}),Gi(h,function(b){return b[0]===r}))return!0;var g=0,m={};return h.forEach(function(b){var x=b.pos,w=b.type,S=b.line;if(!(x[0]>r))if(w==="intersection")++g;else{if(w==="line")return;if(w==="point"){var T=Gi(S,function(O){return O[1]!==i}),I=m[x[0]],N=T[1]>i?1:-1;I?I!==N&&++g:m[x[0]]=N}}}),g%2===1}function Q1(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],s=i-n,o=a-r;Math.abs(s)<dr&&(s=0),Math.abs(o)<dr&&(o=0);var c=0,u=0,f=0;return s?o?(c=-o/s,u=1,f=-c*n-r):(u=1,f=-r):o&&(c=-1,f=n),[c,u,f]}function nN(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],o=e[2],c=n===0&&a===0,u=r===0&&s===0,f=[];if(c&&u)return[];if(c){var h=-i/r,g=-o/s;return h!==g?[]:[[-1/0,h],[1/0,h]]}else if(u){var m=-i/n,b=-o/a;return m!==b?[]:[[m,-1/0],[m,1/0]]}else if(n===0){var x=-i/r,w=-(s*x+o)/a;f=[[w,x]]}else if(a===0){var x=-o/s,w=-(r*x+i)/n;f=[[w,x]]}else if(r===0){var w=-i/n,x=-(a*w+o)/s;f=[[w,x]]}else if(s===0){var w=-o/a,x=-(n*w+i)/r;f=[[w,x]]}else{var w=(r*o-s*i)/(s*n-r*a),x=-(n*w+i)/r;f=[[w,x]]}return f.map(function(S){return[S[0],S[1]]})}function rW(t,e){var n=e.map(function(h){return[0,1].map(function(g){return[Math.min(h[0][g],h[1][g]),Math.max(h[0][g],h[1][g])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],s=i[1];if(ji(a-t[1][0])){if(!ji(s-t[1][1])){var u=Math.max.apply(Math,n.map(function(h){return h[0][0]})),f=Math.min.apply(Math,n.map(function(h){return h[0][1]}));if(ji(u-f)>0)return[];r=[[u,s],[f,s]]}}else{var o=Math.max.apply(Math,n.map(function(h){return h[1][0]})),c=Math.min.apply(Math,n.map(function(h){return h[1][1]}));if(ji(o-c)>0)return[];r=[[a,o],[a,c]]}}return r.length||(r=t.filter(function(h){var g=h[0],m=h[1];return n.every(function(b){return 0<=ji(g-b[0][0])&&0<=ji(b[0][1]-g)&&0<=ji(m-b[1][0])&&0<=ji(b[1][1]-m)})})),r.map(function(h){return[ji(h[0]),ji(h[1])]})}function pP(t){return wbe(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function Ebe(t,e){var n=t.slice(),r=e.slice();FV(n)===-1&&n.reverse(),FV(r)===-1&&r.reverse();var i=pP(n),a=pP(r),s=i.map(function(f){return Q1(f[0],f[1])}),o=a.map(function(f){return Q1(f[0],f[1])}),c=[];s.forEach(function(f,h){var g=i[h],m=[];o.forEach(function(b,x){var w=nN(f,b),S=rW(w,[g,a[x]]);m.push.apply(m,S.map(function(T){return{index1:h,index2:x,pos:T,type:"intersection"}}))}),m.sort(function(b,x){return yl(g[0],b.pos)-yl(g[0],x.pos)}),c.push.apply(c,m),hP(g[1],r)&&c.push({index1:h,index2:-1,pos:g[1],type:"inside"})}),a.forEach(function(f,h){if(hP(f[1],n)){var g=!1,m=Dl(c,function(b){var x=b.index2;return x===h?(g=!0,!1):!!g});m===-1&&(g=!1,m=Dl(c,function(b){var x=b.index1,w=b.index2;return x===-1&&w+1===h?(g=!0,!1):!!g})),m===-1?c.push({index1:-1,index2:h,pos:f[1],type:"inside"}):c.splice(m,0,{index1:-1,index2:h,pos:f[1],type:"inside"})}});var u={};return c.filter(function(f){var h=f.pos,g=h[0]+"x"+h[1];return u[g]?!1:(u[g]=!0,!0)})}function Tbe(t,e){var n=Ebe(t,e);return n.map(function(r){var i=r.pos;return i})}function Abe(t,e){var n=Tbe(t,e);return nW(n)}var gP=function(t,e){return gP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},gP(t,e)};function Cbe(t,e){gP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var or=function(){return or=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},or.apply(this,arguments)};function Ibe(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function QA(t){return Ibe([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function kbe(t){return t.touches&&t.touches.length>=2}function ix(t){return t?t.touches?Dbe(t.touches):[iW(t)]:[]}function Pbe(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function ZV(t,e,n){var r=n.length,i=nv(t,r),a=i.clientX,s=i.clientY,o=i.originalClientX,c=i.originalClientY,u=nv(e,r),f=u.clientX,h=u.clientY,g=nv(n,r),m=g.clientX,b=g.clientY,x=a-f,w=s-h,S=a-m,T=s-b;return{clientX:o,clientY:c,deltaX:x,deltaY:w,distX:S,distY:T}}function ZA(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Dbe(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(iW(t[r]));return n}function iW(t){return{clientX:t.clientX,clientY:t.clientY}}function nv(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var JA=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),QA(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),QA(e)-QA(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=ZV(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],s=0;s<i;++s)a[s]=ZV([e[s]],[n[s]],[r[s]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=nv(e,this.length),i=nv(this.prevClients,this.length),a=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(a*a+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),ZA(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),ZA(e)/ZA(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),JV=["textarea","input"],Obe=(function(t){Cbe(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(g,m){if(m===void 0&&(m=!0),!(!i.flag&&g.cancelable===!1)){var b=g.type.indexOf("drag")>=-1;if(!(i.flag&&b)){i._isDragAPI=!0;var x=i.options,w=x.container,S=x.pinchOutside,T=x.preventWheelClick,I=x.preventRightClick,N=x.preventDefault,O=x.checkInput,P=x.dragFocusedInput,k=x.preventClickEventOnDragStart,D=x.preventClickEventOnDrag,R=x.preventClickEventByCondition,z=i._useTouch,L=!i.flag;if(i._isSecondaryButton=g.which===3||g.button===2,T&&(g.which===2||g.button===1)||I&&(g.which===3||g.button===2))return i.stop(),!1;if(L){var B=i._window.document.activeElement,j=g.target;if(j){var H=j.tagName.toLowerCase(),X=JV.indexOf(H)>-1,q=j.isContentEditable;if(X||q){if(O||!P&&B===j)return!1;if(B&&(B===j||q&&B.isContentEditable&&B.contains(j)))if(P)j.blur();else return!1}else if((N||g.type==="touchstart")&&B){var W=B.tagName.toLowerCase();(B.isContentEditable||JV.indexOf(W)>-1)&&B.blur()}(k||D||R)&&Wr(i._window,"click",i._onClick,!0)}i.clientStores=[new JA(ix(g))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=m,i._dragFlag=!0,i._prevInputEvent=g,i.data={},i.doubleFlag=zv()-i.prevTime<200,i._isMouseEvent=Pbe(g),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var J=i._preventMouseEvent||i.emit("dragStart",or(or({data:i.data,datas:i.data,inputEvent:g,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:m,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){g.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));J===!1&&i.stop(),i._isMouseEvent&&i.flag&&N&&g.preventDefault()}if(!i.flag)return!1;var ne=0;if(L?(i._attchDragEvent(),z&&S&&(ne=setTimeout(function(){Wr(w,"touchstart",i.onDragStart,{passive:!1})}))):z&&S&&vr(w,"touchstart",i.onDragStart),i.flag&&kbe(g)){if(clearTimeout(ne),L&&g.touches.length!==g.changedTouches.length)return;i.pinchFlag||i.onPinchStart(g)}}}},i.onDrag=function(g,m){if(i.flag){var b=i.options.preventDefault;!i._isMouseEvent&&b&&g.preventDefault(),i._prevInputEvent=g;var x=ix(g),w=i.moveClients(x,g,!1);if(i._dragFlag){if(i.pinchFlag||w.deltaX||w.deltaY){var S=i._preventMouseEvent||i.emit("drag",or(or({},w),{isScroll:!!m,inputEvent:g}));if(S===!1){i.stop();return}}i.pinchFlag&&i.onPinch(g,x)}i.getCurrentStore().getPosition(x,!0)}},i.onDragEnd=function(g){if(i.flag){var m=i.options,b=m.pinchOutside,x=m.container,w=m.preventClickEventOnDrag,S=m.preventClickEventOnDragStart,T=m.preventClickEventByCondition,I=i.isDrag;(w||S||T)&&requestAnimationFrame(function(){i._allowClickEvent()}),!T&&!S&&w&&!I&&i._allowClickEvent(),i._useTouch&&b&&vr(x,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(g);var N=g?.touches?ix(g):[],O=N.length;O===0||!i.options.keepDragging?i.flag=!1:i._addStore(new JA(N));var P=i._getPosition(),k=zv(),D=!I&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=I||D?0:k,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",or({data:i.data,datas:i.data,isDouble:D,isDrag:I,isClick:!I,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:g,isTrusted:i._isTrusted},P)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){vr(i._window,"click",i._onClick,!0)},i._onClick=function(g){i._allowClickEvent(),i._allowMouseEvent();var m=i.options.preventClickEventByCondition;m?.(g)||(g.stopPropagation(),g.preventDefault())},i._onContextMenu=function(g){var m=i.options;m.preventRightClick?i.onDragEnd(g):g.preventDefault()},i._passCallback=function(){};var a=[].concat(n),s=a[0];i._window=DK(s)?s:nu(s),i.options=or({checkInput:!1,container:s&&!("document"in s)?nu(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=i.options,c=o.container,u=o.events,f=o.checkWindowBlur;if(i._useDrag=u.indexOf("drag")>-1,i._useTouch=u.indexOf("touch")>-1,i._useMouse=u.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(g){Wr(g,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(g){Wr(g,"mousedown",i.onDragStart),Wr(g,"mousemove",i._passCallback)}),Wr(c,"contextmenu",i._onContextMenu)),f&&Wr(nu(),"blur",i.onBlur),i._useTouch){var h={passive:!1};a.forEach(function(g){Wr(g,"touchstart",i.onDragStart,h),Wr(g,"touchmove",i._passCallback,h)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(c){var u=c.clientX,f=c.clientY;return{clientX:u+i,clientY:f+a,originalClientX:u,originalClientY:f}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),or(or({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),vr(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){vr(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){vr(a,"mousedown",n.onDragStart)}),vr(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){vr(a,"touchstart",n.onDragStart)}),vr(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new JA(ix(n));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",or(or({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",or(or({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",or(or({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),or(or({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(u,f){var h=f.getPosition();return u.distX+=h.distX,u.distY+=h.distY,u},a),o=s.distX,c=s.distY;return or(or({},a),{distX:o,distY:c})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(Wr(r,"dragover",this.onDrag,i),Wr(n,"dragend",this.onDragEnd)),this._useMouse&&(Wr(r,"mousemove",this.onDrag),Wr(n,"mouseup",this.onDragEnd)),this._useTouch&&(Wr(r,"touchmove",this.onDrag,i),Wr(n,"touchend",this.onDragEnd,i),Wr(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(vr(r,"dragover",this.onDrag),vr(n,"dragend",this.onDragEnd)),this._useMouse&&(vr(r,"mousemove",this.onDrag),vr(n,"mouseup",this.onDragEnd)),this._useTouch&&(vr(r,"touchstart",this.onDragStart),vr(r,"touchmove",this.onDrag),vr(n,"touchend",this.onDragEnd),vr(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(Y_);function Nbe(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var Rbe=Nbe;function Mbe(t){return Rbe(t).toString(36)}function jbe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function zbe(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?Ed(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function Lbe(t,e,n,r,i){var a=Wp(r),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=zbe(t,e,n),(i||a.head||a.body).appendChild(s),s}function Vbe(t){var e="rCS"+Mbe(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=jbe(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=Lbe(e,t,r,n,i);else{var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,c=parseFloat(a.getAttribute("data-styled-count"))||0;c<=1?(a.remove?a.remove():(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(c-1))}}}}}var mP=function(){return mP=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mP.apply(this,arguments)};function Bbe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function aW(t,e){var n=Vbe(e),r=n.className;return Lye(function(i,a){var s=i.className,o=s===void 0?"":s;i.cspNonce;var c=Bbe(i,["className","cspNonce"]),u=Qye();return Zye(a,function(){return u.current},[]),UK(function(){var f=n.inject(u.current,{nonce:i.cspNonce});return function(){f.destroy()}},[]),Cs(t,mP({ref:u,"data-styled-id":r,className:"".concat(o," ").concat(r)},c))})}var vP=function(t,e){return vP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},vP(t,e)};function F0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");vP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ie=function(){return ie=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ie.apply(this,arguments)};function Fbe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ube(t,e,n,r){var i=arguments.length,a=i<3?e:r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function $be(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ae(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function Ne(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function U0(t,e){return ie({events:[],props:[],name:t},e)}var qbe=["n","w","s","e"],rN=["n","w","s","e","nw","ne","sw","se"];function Gbe(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function Hbe(t){var e=Gbe(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Xp=rbe(),sW=Xp.browser.webkit,oW=sW&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),lW=Xp.browser.name,cW=parseInt(Xp.browser.version,10),Kbe=lW==="chrome",Wbe=Xp.browser.chromium,Ybe=parseInt(Xp.browser.chromiumVersion,10)||0,Xbe=Kbe&&cW>=109||Wbe&&Ybe>=109,Qbe=lW==="firefox",Zbe=parseInt(Xp.browser.webkitVersion,10)>=612||cW>=15,iN="moveable-",Jbe=rN.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),exe=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Jbe,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(Hbe(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(oW?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),txe=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],yP=1e-4,Ai=1e-7,ax=1e-9,bP=Math.pow(10,10),e6=-bP,nxe={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},aN={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},uW={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},dW=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function $0(t,e,n,r,i,a){var s,o;a===void 0&&(a="draggable");var c=(o=(s=e.gestos[a])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},u=c.originalDatas||c.datas,f=u[a]||(u[a]={});return ie(ie({},c),{isPinch:!!r,parentEvent:!0,datas:f,originalDatas:t.originalDatas})}var vp=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),ie(ie({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var s=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function Hh(t,e,n,r){var i=t.length===16,a=i?4:3,s=mf(t,n,r,a),o=ae(s,4),c=ae(o[0],2),u=c[0],f=c[1],h=ae(o[1],2),g=h[0],m=h[1],b=ae(o[2],2),x=b[0],w=b[1],S=ae(o[3],2),T=S[0],I=S[1],N=ae(Nn(t,e,a),2),O=N[0],P=N[1],k=Math.min(u,g,x,T),D=Math.min(f,m,w,I),R=Math.max(u,g,x,T),z=Math.max(f,m,w,I);u=u-k||0,g=g-k||0,x=x-k||0,T=T-k||0,f=f-D||0,m=m-D||0,w=w-D||0,I=I-D||0,O=O-k||0,P=P-D||0;var L=t[0],B=t[a+1],j=xi(L*B);return{left:k,top:D,right:R,bottom:z,origin:[O,P],pos1:[u,f],pos2:[g,m],pos3:[x,w],pos4:[T,I],direction:j}}function fW(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,s=a.moveableClientRect,o=a.rootMatrix,c=a.is3d,u=a.pos1,f=s.left,h=s.top,g=c?4:3,m=ae(et(xp(o,[n-f,r-h],g),u),2),b=m[0],x=m[1],w=ae(Mo({datas:i,distX:b,distY:x}),2),S=w[0],T=w[1];return[S,T]}function gf(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,s=r.is3d,o=r.left,c=r.top,u=r.origin,f=r.offsetMatrix,h=r.targetMatrix,g=r.transformOrigin,m=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=h,n.beforeMatrix=a,n.offsetMatrix=f,n.transformOrigin=g,n.inverseMatrix=ko(i,m),n.inverseBeforeMatrix=ko(a,m),n.absoluteOrigin=Xd(Rt([o,c],u),m),n.startDragBeforeDist=di(n.inverseBeforeMatrix,n.absoluteOrigin,m),n.startDragDist=di(n.inverseMatrix,n.absoluteOrigin,m)}function rxe(t){return Hh(t.datas.beforeTransform,[50,50],100,100).direction}function X_(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,s=i.nextTransforms,o=s.length,c=i.nextTransformAppendedIndexes,u=-1;a===-1?(n==="translate"?u=0:n==="rotate"&&(u=Dl(s,function(m){return m.match(/scale\(/g)})),u===-1&&(u=s.length),r.transformIndex=u):Gi(c,function(m){return m.index===a&&m.functionName===n})?u=a:u=a+c.filter(function(m){return m.index<a}).length;var f=k1e(s,t.state,u),h=f.targetFunction,g=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=f.beforeFunctionTexts,r.afterFunctionTexts=f.afterFunctionTexts,r.beforeTransform=f.beforeFunctionMatrix,r.beforeTransform2=f.beforeFunctionMatrix2,r.targetTansform=f.targetFunctionMatrix,r.afterTransform=f.afterFunctionMatrix,r.afterTransform2=f.afterFunctionMatrix2,r.targetAllTransform=f.allFunctionMatrix,h.functionName===g?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):o>u&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Ne(Ne([],ae(c),!1),[{functionName:n,index:u,isAppend:!0}],!1))}function Q_(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function ixe(t){var e=t.datas,n=t.distX,r=t.distY,i=ae(pW({datas:e,distX:n,distY:r}),2),a=i[0],s=i[1],o=hW(e,lbe([a,s],4));return di(o,Xd([0,0,0],4),4)}function hW(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,c=n?on(o,e,4):on(e,o,4),u=on(ko(n?a:r,4),c,4),f=on(u,ko(n?s:i,4),4);return f}function pW(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,c=a?4:3;return et(di(i,Rt(o,[n,r]),c),s)}function Mo(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,c=n.startDragBeforeDist,u=n.startDragDist,f=n.absoluteOrigin,h=o?4:3;return et(di(e?a:s,Rt(f,[r,i]),h),e?c:u)}function axe(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,s=n.is3d;n.startDragBeforeDist;var o=n.startDragDist,c=n.absoluteOrigin,u=s?4:3;return et(di(a,Rt(o,[r,i]),u),c)}function sxe(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(s,o){var c=M0(s),u=c.value,f=c.unit,h=o?i:r,g=o?n:e;if(s==="%"||isNaN(u)){var m=h?a[o]/h:0;return g*m}else if(f!=="%")return u;return g*u/100}):a}function gW(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function oxe(t,e){return gW(e).map(function(n){return t[n]})}function eC(t,e){var n=(e+1)/2;return[W1(t[0][0],t[1][0],n,1-n),W1(t[0][1],t[1][1],n,1-n)]}function _r(t,e){var n=eC([t[0],t[1]],e[0]),r=eC([t[2],t[3]],e[0]);return eC([n,r],e[1])}function lxe(t,e,n,r,i,a){var s=mf(e,n,r,i),o=_r(s,a),c=t[0]-o[0],u=t[1]-o[1];return[c,u]}function q0(t,e,n,r){return on(t,iv(e,r,n),r)}function cxe(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,s=t.is3d,o=s?4:3,c;if(qi(n)){var u=e.beforeTransform,f=e.afterTransform;r?c=Rs(Vv(n),4,o):c=Rs(on(on(u,Vv([n]),4),f,4),4,o)}else c=n;return q0(a,c,i,o)}function uxe(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,s=t.targetAllTransform,o=i?4:3;return q0(r,on(s||a,eN(e,o),o),n,o)}function Z_(t,e){var n=Qp(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=gr(r)?r:fu(r),xP(t,e,i)},setTransformIndex:function(r){xP(t,e,r)}}}function J_(t,e,n){var r=Qp(e),i=r.startTransforms;xP(t,e,Dl(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function xP(t,e,n){var r=Qp(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var s=t.state,o=mp([a],{"x%":function(c){return c/100*s.offsetWidth},"y%":function(c){return c/100*s.offsetHeight}});i.startValue=o[0].functionValue}}}function sN(t,e){var n=Qp(t);n.nextTransforms=fu(e)}function Qp(t){return t.originalDatas.beforeRenderable}function Z1(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function sx(t){return(Z1(t)||[]).join(" ")}function ox(t){return Qp(t).nextStyle}function mW(t,e,n,r,i){sN(i,e);var a=bi.drag(t,$0(i,t.state,n,r)),s=a?a.transform:e;return ie(ie({transform:e,drag:a},Si({transform:s},i)),{afterTransform:s})}function oN(t,e,n,r,i,a){var s=cxe(t.state,i,e,a),o=hxe(t,n,r,s);return o}function vW(t,e,n,r,i,a,s){var o=oN(t,e,n,i,a,s),c=t.state,u=c.left,f=c.top,h=t.props.groupable,g=h?u:0,m=h?f:0,b=et(r,o);return et(b,[g,m])}function dxe(t,e,n,r,i,a,s){var o=vW(t,e,n,r,i,a,s);return o}function fxe(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function hxe(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,s=i.height,o=i.is3d,c=o?4:3,u=[a/2*(1+e[0])+n[0],s/2*(1+e[1])+n[1]];return Nn(r,u,c)}function pxe(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return vW(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function gxe(t,e,n,r,i,a){var s=t.props.groupable,o=t.state,c=o.transformOrigin,u=o.offsetMatrix,f=o.is3d,h=o.width,g=o.height,m=o.left,b=o.top,x=a.fixedDirection,w=a.nextTargetMatrix||o.targetMatrix,S=f?4:3,T=sxe(i,e,n,h,g,c),I=s?m:0,N=s?b:0,O=q0(u,w,T,S),P=lxe(r,O,e,n,S,x);return et(P,[I,N])}function mxe(t,e){return _r(Xa(t.state),e)}function vxe(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function yxe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function bxe(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function yW(t,e,n){for(var r=t,i=[],a=KO(t)||Tu(t),s=!n&&t===e||t===a,o=s,c=!1,u=3,f,h,g,m=!1,b=Fv(e,e,!0).offsetParent,x=1;r&&!o;){o=s;var w=Hi(r),S=w("position"),T=UW(r),I=S==="fixed",N=bxe(w),O=cbe(m1e(T)),P=void 0,k=!1,D=!1,R=0,z=0,L=0,B=0,j={hasTransform:!1,fixedContainer:null};I&&(m=!0,j=w1e(r),b=j.fixedContainer);var H=O.length;!c&&(H===16||N.length)&&(c=!0,u=4,AP(i),g&&(g=Rs(g,3,4))),c&&H===9&&(O=Rs(O,3,4));var X=x1e(r,t),q=X.tagName,W=X.hasOffset,J=X.isSVG,ne=X.origin,Y=X.targetOrigin,U=X.offset,Q=ae(U,2),K=Q[0],Z=Q[1];q==="svg"&&!r.ownerSVGElement&&g&&(i.push({type:"target",target:r,matrix:_1e(r,u)}),i.push({type:"offset",target:r,matrix:vn(u)}));var le=parseFloat(w("zoom"))||1;if(I)P=j.fixedContainer,k=!0;else{var de=Fv(r,e,!1,!0,w),ce=de.offsetZoom;if(P=de.offsetParent,k=de.isEnd,D=de.isStatic,x*=ce,(de.isCustomElement||ce!==1)&&D)K-=P.offsetLeft,Z-=P.offsetTop;else if(Qbe||Xbe){var he=de.parentSlotElement;if(he){for(var ee=P,Se=0,re=0;ee&&yxe(ee);)Se+=ee.offsetLeft,re+=ee.offsetTop,ee=ee.offsetParent;K-=Se,Z-=re}}}if(sW&&!Zbe&&W&&!J&&D&&(S==="relative"||S==="static")&&(K-=P.offsetLeft,Z-=P.offsetTop,s=s||k),I)W&&j.hasTransform&&(L=P.clientLeft,B=P.clientTop);else if(W&&b!==P&&(R=P.clientLeft,z=P.clientTop),W&&P===a){var oe=$W(r,!1);K+=oe[0],Z+=oe[1]}if(i.push({type:"target",target:r,matrix:iv(O,u,ne)}),N.length&&(i.push({type:"offset",target:r,matrix:vn(u)}),i.push({type:"target",target:r,matrix:iv(Vv(N),u,ne)})),W){var De=r===t,Pe=De?0:r.scrollLeft,ze=De?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Qd([K-Pe+R-L,Z-ze+z-B],u)})}else i.push({type:"offset",target:r,origin:ne});if(le!==1&&i.push({type:"zoom",target:r,matrix:iv(eN([le,le],u),u,[0,0])}),g||(g=O),f||(f=ne),h||(h=Y),o||I)break;r=P,s=k,(!n||r===a)&&(o=s)}return g||(g=vn(u)),f||(f=[0,0]),h||(h=[0,0]),{zoom:x,offsetContainer:b,matrixes:i,targetMatrix:g,transformOrigin:f,targetOrigin:h,is3d:c,hasFixed:m}}var md=null,vd=null,Nh=null;function yp(t){t?(window.Map&&(md=new Map,vd=new Map),Nh=[]):(md=null,Nh=null,vd=null)}function xxe(t){var e=vd?.get(t);if(e)return e;var n=av(t,!0);return vd&&vd.set(t,n),n}function wxe(t,e){if(Nh){var n=Gi(Nh,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=yW(t,e,!0);return Nh&&Nh.push([[t,e],r]),r}function Hi(t){var e=md?.get(t);if(!e){var n=nu(t).getComputedStyle(t);if(!md)return function(a){return n[a]};e={style:n,cached:{}},md.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function Is(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(s,o){return a[o]=a[o]||{},a[o][e]=a[o][e]||{},ie(ie({},n),{isRequestChild:!0,datas:a[o][e],originalDatas:a[o]})})}function tC(t,e,n,r,i,a,s){var o=!!n.match(/Start$/g),c=!!n.match(/End$/g),u=i.isPinch,f=i.datas,h=Is(t,e.name,i),g=t.moveables,m=[],b=h.map(function(x,w){var S=g[w],T=S.state,I=T.gestos,N=x;if(o)N=new vp(s).dragStart(r,x),m.push(N);else{if(I[s]||(I[s]=f.childGestos[w]),!I[s])return;N=$0(x,T,r,u,a,s),m.push(N)}var O=e[n](S,ie(ie({},N),{parentFlag:!0}));return c&&(I[s]=null),O});return o&&(f.childGestos=g.map(function(x){return x.state.gestos[s]})),{eventParams:b,childEvents:m}}function bl(t,e,n,r,i,a){i===void 0&&(i=function(f,h){return h});var s=!!n.match(/End$/g),o=Is(t,e.name,r),c=t.moveables,u=o.map(function(f,h){var g=c[h],m=f;m=i(g,f);var b=e[n](g,ie(ie({},m),{parentFlag:!0}));return s&&(g.state.gestos={}),b});return u}function J1(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,s=r.datas.startPositions||Xa(e.state),o=_r(s,i),c=ae(di(B0(-t.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),2),u=c[0],f=c[1];return r.datas.originalX=u,r.datas.originalY=f,r}function bW(t,e,n,r){var i=t.getState(),a=i.renderPoses,s=i.rotation,o=i.direction,c=Jd(t.props,e).zoom,u=rv(s/Math.PI*180),f={},h=t.renderState;h.renderDirectionMap||(h.renderDirectionMap={});var g=h.renderDirectionMap;n.forEach(function(b){var x=b.dir;f[x]=!0});var m=xi(o);return n.map(function(b){var x=b.data,w=b.classNames,S=b.dir,T=aN[S];if(!T||!f[S])return null;g[S]=!0;var I=(ut(u,15)+m*uW[S]+720)%180,N={};return Ol(x).forEach(function(O){N["data-".concat(O)]=x[O]}),r.createElement("div",ie({className:Xe.apply(void 0,Ne(["control","direction",S,e],ae(w),!1)),"data-rotation":I,"data-direction":S},N,{key:"direction-".concat(S),style:rw.apply(void 0,Ne([s,c],ae(T.map(function(O){return a[O]})),!1))}))})}function xW(t,e,n,r){var i=Jd(t.props,n),a=i.renderDirections,s=a===void 0?e:a,o=i.displayAroundControls;if(!s)return[];var c=s===!0?rN:s;return Ne(Ne([],ae(o?EW(t,r,n,c):[]),!1),ae(bW(t,n,c.map(function(u){return{data:{},classNames:[],dir:u}}),r)),!1)}function Bv(t,e,n,r,i,a){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var c=Jn(n,r),u=e?ut(c/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Xe.apply(void 0,Ne(["line","direction",e?"edge":"",e],ae(s),!1)),"data-rotation":u,"data-line-key":a,"data-direction":e,style:Mm(n,r,i,c)})}function wW(t,e,n,r,i){var a=n===!0?qbe:n;return a.map(function(s,o){var c=ae(aN[s],2),u=c[0],f=c[1];if(f!=null)return Bv(t,s,r[u],r[f],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function _W(t){return function(e,n){var r=Jd(e.props,t).edge;return r&&(r===!0||r.length)?Ne(Ne([],ae(wW(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),ae(_xe(e,t,n)),!1):SW(e,t,n)}}function SW(t,e,n){return xW(t,rN,e,n)}function _xe(t,e,n){return xW(t,["nw","ne","sw","se"],e,n)}function EW(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,o=a.rotation,c=a.direction,u=i.renderDirectionMap,f=t.props.zoom,h=xi(c),g=o/Math.PI*180;return(r||Ol(u)).map(function(m){var b=aN[m];if(!b)return null;var x=(ut(g,15)+h*uW[m]+720)%180,w=["around-control"];return n&&w.push("direction",n),e.createElement("div",{className:Xe.apply(void 0,Ne([],ae(w),!1)),"data-rotation":x,"data-direction":m,key:"direction-around-".concat(m),style:rw.apply(void 0,Ne([o,f],ae(b.map(function(S){return s[S]})),!1))})})}function lN(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,s=r.left,o=s===void 0?-1/0:s,c=r.top,u=c===void 0?-1/0:c,f=r.right,h=f===void 0?1/0:f,g=r.bottom,m=g===void 0?1/0:g,b={position:a,left:o,top:u,right:h,bottom:m};return{vertical:t6(b,e,!0),horizontal:t6(b,n,!1)}}function eS(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,s=r.clientLeft,o=r.clientTop,c=n.snapOffset,u=c.left,f=c.top,h=c.right,g=c.bottom,m=e||t.props.bounds||{},b=m.position||"client",x=b==="css",w=m.left,S=w===void 0?-1/0:w,T=m.top,I=T===void 0?-1/0:T,N=m.right,O=N===void 0?x?-1/0:1/0:N,P=m.bottom,k=P===void 0?x?-1/0:1/0:P;return x&&(O=a+h-u-O,k=i+g-f-k),{left:S+u-s,right:O+u-s,top:I+f-o,bottom:k+f-o}}function Sxe(t,e,n){var r=eS(t),i=r.left,a=r.top,s=r.right,o=r.bottom,c=ae(n,2),u=c[0],f=c[1],h=ae(et(n,e),2),g=h[0],m=h[1];Ae(g)<Ai&&(g=0),Ae(m)<Ai&&(m=0);var b=m>0,x=g>0,w={isBound:!1,offset:0,pos:0},S={isBound:!1,offset:0,pos:0};if(g===0&&m===0)return{vertical:w,horizontal:S};if(g===0)b?o<f&&(S.pos=o,S.offset=f-o):a>f&&(S.pos=a,S.offset=f-a);else if(m===0)x?s<u&&(w.pos=s,w.offset=u-s):i>u&&(w.pos=i,w.offset=u-i);else{var T=m/g,I=n[1]-T*u,N=0,O=0,P=!1;x&&s<=u?(N=T*s+I,O=s,P=!0):!x&&u<=i&&(N=T*i+I,O=i,P=!0),P&&(N<a||N>o)&&(P=!1),P||(b&&o<=f?(N=o,O=(N-I)/T,P=!0):!b&&f<=a&&(N=a,O=(N-I)/T,P=!0)),P&&(w.isBound=!0,w.pos=O,w.offset=u-O,S.isBound=!0,S.pos=N,S.offset=f-N)}return{vertical:w,horizontal:S}}function t6(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,Ne([],ae(e),!1)),s=Math.max.apply(Math,Ne([],ae(e),!1)),o=[];return r+1>a&&o.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<s&&o.push({direction:"end",isBound:!0,offset:s-i,pos:i}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(c,u){return Ae(u.offset)-Ae(c.offset)})}function n6(t,e,n){var r=n?t.map(function(i){return V0(i,n)}):t;return r.some(function(i){return i[0]<e.left&&Ae(i[0]-e.left)>.1||i[0]>e.right&&Ae(i[0]-e.right)>.1||i[1]<e.top&&Ae(i[1]-e.top)>.1||i[1]>e.bottom&&Ae(i[1]-e.bottom)>.1})}function Exe(t,e,n){var r=Ya(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,s){return Ae(a-t[n?0:1])-Ae(s-t[n?0:1])}).map(function(a){return Jn([0,0],n?[a,e]:[e,a])})}function Txe(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=eS(t),o=s.left,c=s.top,u=s.right,f=s.bottom,h=o-r[0],g=u-r[0],m=c-r[1],b=f-r[1],x={left:h,top:m,right:g,bottom:b};if(!n6(n,x,0))return[];var w=[];return[[h,0],[g,0],[m,1],[b,1]].forEach(function(S){var T=ae(S,2),I=T[0],N=T[1];n.forEach(function(O){var P=Jn([0,0],O);w.push.apply(w,Ne([],ae(Exe(O,I,N).map(function(k){return a+k-P}).filter(function(k){return!n6(e,x,k)}).map(function(k){return ut(k*180/Math.PI,Ai)})),!1))})}),w}var Axe=["left","right","center"],Cxe=["top","bottom","middle"],r6={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},hu={start:"left",end:"right",center:"center"},pu={start:"top",end:"bottom",center:"middle"};function Rh(){return{left:!1,top:!1,right:!1,bottom:!1}}function Zp(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,c=n.snapGridWidth,u=n.snapGridHeight,f=t.state,h=f.guidelines,g=f.enableSnap;return!r||!g||e&&r!==!0&&r.indexOf(e)<0?!1:!!(c||u||i||a||h&&h.length||s&&s.length||o&&o.length)}function cN(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function Ixe(t,e){var n=cN(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function uN(t,e){var n=Ixe(t,e),r=Cxe.filter(function(a){return a in n}),i=Axe.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function kxe(t,e,n){var r=Nn(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function Pxe(t){var e=ae(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<dr&&(i=0),Math.abs(a)<dr&&(a=0);var s=0,o=0,c=0;return i?a?(s=-a/i,o=1,c=s*n[0]-n[1]):(o=1,c=-n[1]):(s=-1,c=n[0]),[s,o,c].map(function(u){return ut(u,dr)})}var TW="snapRotationThreshold",AW="snapRotationDegrees",CW="snapHorizontalThreshold",IW="snapVerticalThreshold";function tS(t,e,n,r,i,a,s){var o;r===void 0&&(r=[]),i===void 0&&(i=[]);var c=t.props,u=((o=t.state.snapThresholdInfo)===null||o===void 0?void 0:o.multiples)||[1,1],f=y6(s,c[CW],5),h=y6(a,c[IW],5);return kW(t.state.guidelines,e,n,r,i,f,h,u)}function kW(t,e,n,r,i,a,s,o){return{vertical:a6(t,"vertical",e,s*o[0],r),horizontal:a6(t,"horizontal",n,a*o[1],i)}}function Dxe(t,e,n){var r=ae(n,2),i=r[0],a=r[1],s=ae(e,2),o=s[0],c=s[1],u=ae(et(n,e),2),f=u[0],h=u[1],g=h>0,m=f>0;f=iw(f),h=iw(h);var b={isSnap:!1,offset:0,pos:0},x={isSnap:!1,offset:0,pos:0};if(f===0&&h===0)return{vertical:b,horizontal:x};var w=tS(t,f?[i]:[],h?[a]:[],[],[],void 0,void 0),S=w.vertical,T=w.horizontal;S.posInfos.filter(function(q){var W=q.pos;return m?W>=o:W<=o}),T.posInfos.filter(function(q){var W=q.pos;return g?W>=c:W<=c}),S.isSnap=S.posInfos.length>0,T.isSnap=T.posInfos.length>0;var I=wP(S),N=I.isSnap,O=I.guideline,P=wP(T),k=P.isSnap,D=P.guideline,R=k?D.pos[1]:0,z=N?O.pos[0]:0;if(f===0)k&&(x.isSnap=!0,x.pos=D.pos[1],x.offset=a-x.pos);else if(h===0)N&&(b.isSnap=!0,b.pos=z,b.offset=i-z);else{var L=h/f,B=n[1]-L*i,j=0,H=0,X=!1;N?(H=z,j=L*H+B,X=!0):k&&(j=R,H=(j-B)/L,X=!0),X&&(b.isSnap=!0,b.pos=H,b.offset=i-H,x.isSnap=!0,x.pos=j,x.offset=a-j)}return{vertical:b,horizontal:x}}function Gc(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function i6(t,e,n,r){var i=uN(t.props.snapDirections,e),a=tS(t,i.vertical,i.horizontal,i.verticalNames.map(function(c){return Gc(c)}),i.horizontalNames.map(function(c){return Gc(c)}),n,r),s=Gc(i.horizontalNames[a.horizontal.index]),o=Gc(i.verticalNames[a.vertical.index]);return{vertical:ie(ie({},a.vertical),{direction:o}),horizontal:ie(ie({},a.horizontal),{direction:s})}}function wP(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:s}}function a6(t,e,n,r,i){var a,s;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o=e==="vertical",c=o?0:1,u=n.map(function(h,g){var m=i[g]||"",b=t.map(function(x){var w=x.pos,S=h-w[c];return{offset:S,dist:Ae(S),guideline:x,direction:m}}).filter(function(x){var w=x.guideline,S=x.dist,T=w.type;return!(T!==e||S>r)}).sort(function(x,w){return x.dist-w.dist});return{pos:h,index:g,guidelineInfos:b,direction:m}}).filter(function(h){return h.guidelineInfos.length>0}).sort(function(h,g){return h.guidelineInfos[0].dist-g.guidelineInfos[0].dist}),f=u.length>0;return{isSnap:f,index:f?u[0].index:-1,direction:(s=(a=u[0])===null||a===void 0?void 0:a.direction)!==null&&s!==void 0?s:"",posInfos:u}}function Oxe(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(g,m,b){var x=b[m+1]||b[0];a.push(g),a.push([(g[0]+x[0])/2,(g[1]+x[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,Ne([],ae(oxe([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var s=a.map(function(g){return _r(e,g)}),o=s.map(function(g){return g[0]}),c=s.map(function(g){return g[1]}),u=tS(t,o,c,a.map(function(g){return Gc(g[0])}),a.map(function(g){return Gc(g[1])}),r,i),f=Gc(a.map(function(g){return g[0]})[u.vertical.index]),h=Gc(a.map(function(g){return g[1]})[u.horizontal.index]);return{vertical:ie(ie({},u.vertical),{direction:f}),horizontal:ie(ie({},u.horizontal),{direction:h})}}function PW(t,e){var n=Ae(t.offset),r=Ae(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Ai?1:r<Ai?-1:n-r}function ew(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],s=n.offset[e],o=r.offset[e];if(i){if(!a)return-1}else return 1;return PW({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function Nxe(t,e,n){var r=[];if(n)Ae(e[0])!==1||Ae(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var c=[s*i[0],o*i[1]];e[0]===c[0]&&e[1]===c[1]||r.push([e,c])})})}else if(t[0]){var a=Ae(e[0])===1?[1]:[1,-1];a.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var a=Ae(e[1])===1?[1]:[1,-1];a.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function DW(t,e){var n=sP([e[0][0],e[1][0]]),r=sP([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function dN(t,e){var n=ae(e,2),r=n[0],i=n[1],a=i[0]-r[0],s=i[1]-r[1];Ae(a)<Ai&&(a=0),Ae(s)<Ai&&(s=0);var o,c;if(!a)o=r[0],c=t[0];else if(!s)o=r[1],c=t[1];else{var u=s/a;o=u*(t[0]-r[0])+r[1],c=t[1]}return o-c}function OW(t,e,n,r){return r===void 0&&(r=Ai),t.every(function(i){var a=dN(i,e),s=a<=0;return s===n||Ae(a)<=r})}function s6(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function Rxe(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var c=o.left,u=o.top,f=o.width,h=o.height,g=[[c,u],[c,u+h]],m=[[c,u],[c+f,u]],b=[[c+f,u],[c+f,u+h]],x=[[c,u+h],[c+f,u+h]];if(OW([[c,u],[c+f,u],[c,u+h],[c+f,u+h]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var w=Hc(n,s,m,i),S=Hc(n,s,x,i),T=Hc(n,s,g,a),I=Hc(n,s,b,a),N=w.isBound&&S.isBound,O=w.isBound||S.isBound,P=T.isBound&&I.isBound,k=T.isBound||I.isBound,D=bp(w.offset,S.offset),R=bp(T.offset,I.offset),z=[0,0],L=!1,B=!1;return Ae(R)<Ae(D)?(z=[D,0],L=O,B=N):(z=[0,R],L=k,B=P),{isAllBound:B,isVerticalBound:O,isHorizontalBound:k,isBound:L,offset:z}}function Hc(t,e,n,r,i,a){var s=ae(e,2),o=s[0],c=s[1],u=t[0],f=n[0],h=n[1],g=iw(h[1]-f[1]),m=iw(h[0]-f[0]),b=c,x=o,w=-o/c;if(m){if(!g){if(a&&!b)return{isBound:!1,offset:0};if(x){var N=(f[1]-u[1])/w+u[0];return s6(N,f[0],h[0],r,i)}else{var T=f[1]-u[1],I=Ae(T)<=(i||0);return{isBound:I,offset:I?T:0}}}}else{if(a&&!x)return{isBound:!1,offset:0};if(b){var S=w*(f[0]-u[0])+u[1];return s6(S,f[1],h[1],r,i)}else{var T=f[0]-u[0],I=Ae(T)<=(i||0);return{isBound:I,offset:I?T:0}}}return{isBound:!1,offset:0}}function NW(t,e,n){return e.map(function(r){var i=Rxe(t,r),a=i.isBound,s=i.offset,o=i.isVerticalBound,c=i.isHorizontalBound,u=r.multiple,f=Mo({datas:n,distX:s[0],distY:s[1]}).map(function(h,g){return h*(u[g]?2/u[g]:0)});return{sign:u,isBound:a,isVerticalBound:o,isHorizontalBound:c,isSnap:!1,offset:f}})}function Mxe(t,e,n){var r,i=fN(t,e,[0,0],!1).map(function(g){return ie(ie({},g),{multiple:g.multiple.map(function(m){return Ae(m)*2})})}),a=NW(t,i,n),s=ew(a,0),o=ew(a,1),c=0,u=0,f=s.isVerticalBound||o.isVerticalBound,h=s.isHorizontalBound||o.isHorizontalBound;return(f||h)&&(r=ae(axe({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),2),c=r[0],u=r[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:h,offset:u}}}function jxe(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function fN(t,e,n,r){var i=t.state,a=i.allMatrix,s=i.is3d,o=mf(a,100,100,s?4:3),c=_r(o,[0,0]);return jxe(n,r).map(function(u){var f=ae(u,3),h=f[0],g=f[1],m=f[2],b=[_r(o,g),_r(o,m)],x=Pxe(b),w=DW(c,b),S=w.vertical,T=w.horizontal,I=dN(c,b)<=0;return{multiple:h,centerSign:I,verticalSign:S,horizontalSign:T,lineConstants:x,line:[_r(e,g),_r(e,m)]}})}function o6(t,e,n,r){var i=r?t.map(function(a){return V0(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var s=dN(n,a)<=0;return!OW(e,a,s)})}function zxe(t){var e=ae(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return Ae(n[0]);if(!a)return Ae(n[1]);var s=a/i;return Ae((-s*n[0]+n[1])/Math.sqrt(Math.pow(s,2)+1))}function Lxe(t){var e=ae(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var s=a/i,o=-s*n[0]+n[1];return[-o/(s+1/s),o/(s*s+1)]}function Vxe(t,e,n,r,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var o=a.left,c=a.top,u=a.width,f=a.height,h=o-r[0],g=o+u-r[0],m=c-r[1],b=c+f-r[1],x=[[h,m],[g,m],[h,b],[g,b]],w=_r(n,[0,0]);if(!o6(n,x,w,0))return[];var S=[],T=x.map(function(I){return[Ya(I),Jn([0,0],I)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(I){var N=Jn([0,0],Lxe(I)),O=zxe(I);S.push.apply(S,Ne([],ae(T.filter(function(P){var k=ae(P,1),D=k[0];return D&&O<=D}).map(function(P){var k=ae(P,2),D=k[0],R=k[1],z=Math.acos(D?O/D:0),L=R+z,B=R-z;return[s+L-N,s+B-N]}).reduce(function(P,k){return P.push.apply(P,Ne([],ae(k),!1)),P},[]).filter(function(P){return!o6(e,x,w,P)}).map(function(P){return ut(P*180/Math.PI,Ai)})),!1))}),S}function Bxe(t){var e=t.props.innerBounds,n=Rh();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,s=r.pos3,o=r.pos4,c=[i,a,s,o],u=_r(c,[0,0]),f=e.left,h=e.top,g=e.width,m=e.height,b=[[f,h],[f,h+m]],x=[[f,h],[f+g,h]],w=[[f+g,h],[f+g,h+m]],S=[[f,h+m],[f+g,h+m]],T=fN(t,c,[0,0],!1),I=[],N=[];return T.forEach(function(O){var P=O.line,k=O.lineConstants,D=DW(u,P),R=D.horizontal,z=D.vertical,L=Hc(P,k,x,z,1,!0),B=Hc(P,k,S,z,1,!0),j=Hc(P,k,b,R,1,!0),H=Hc(P,k,w,R,1,!0);L.isBound&&!n.top&&(I.push(h),n.top=!0),B.isBound&&!n.bottom&&(I.push(h+m),n.bottom=!0),j.isBound&&!n.left&&(N.push(f),n.left=!0),H.isBound&&!n.right&&(N.push(f+g),n.right=!0)}),{boundMap:n,horizontal:I,vertical:N}}function Fxe(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(Ae(i)<dr&&(i=0),Ae(a)<dr&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var s=a/i,o=t[1]-s*t[0];if(r){var c=s*(e[0]+n)+o;return[n,c-e[1]]}else{var u=(e[1]+n-o)/s;return[u-e[0],n]}}function _P(t,e,n,r,i){var a=Fxe(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var s=yl(t,e),o=yl(a,t),c=yl(a,e),u=o>s||c>s,f=ae(Mo({datas:i,distX:a[0],distY:a[1]}),2),h=f[0],g=f[1];return{offset:[h,g],isOutside:u}}function tw(t,e){return t.isBound?t.offset:e.isSnap?wP(e).offset:0}function Uxe(t,e,n,r,i){var a=ae(e,2),s=a[0],o=a[1],c=ae(n,2),u=c[0],f=c[1],h=ae(r,2),g=h[0],m=h[1],b=ae(i,2),x=b[0],w=b[1],S=-x,T=-w;if(t&&s&&o){S=0,T=0;var I=[];if(u&&f?I.push([0,w],[x,0]):u?I.push([x,0]):f?I.push([0,w]):g&&m?I.push([0,w],[x,0]):g?I.push([x,0]):m&&I.push([0,w]),I.length){I.sort(function(k,D){return Ya(et([s,o],k))-Ya(et([s,o],D))});var N=I[0];if(N[0]&&Ae(s)>dr)S=-N[0],T=o*Ae(s+S)/Ae(s)-o;else if(N[1]&&Ae(o)>dr){var O=o;T=-N[1],S=s*Ae(o+T)/Ae(O)-s}if(t&&f&&u)if(Ae(S)>dr&&Ae(S)<Ae(x)){var P=Ae(x)/Ae(S);S*=P,T*=P}else if(Ae(T)>dr&&Ae(T)<Ae(w)){var P=Ae(w)/Ae(T);S*=P,T*=P}else S=bp(-x,S),T=bp(-w,T)}}else S=s||u?-x:0,T=o||f?-w:0;return[S,T]}function $xe(t,e,n,r,i,a){if(!Zp(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=gN(a.absolutePoses,[e,n]),o=Ka(s),c=o.left,u=o.right,f=o.top,h=o.bottom,g={horizontal:s.map(function(H){return H[1]}),vertical:s.map(function(H){return H[0]})},m=cN(t.props.snapDirections),b=uN(m,{left:c,right:u,top:f,bottom:h,center:(c+u)/2,middle:(f+h)/2}),x=nS(t,i,b,g),w=x.vertical,S=x.horizontal,T=Mxe(t,s,a),I=T.vertical,N=T.horizontal,O=w.isSnap,P=S.isSnap,k=w.isBound||I.isBound,D=S.isBound||N.isBound,R=bp(w.offset,I.offset),z=bp(S.offset,N.offset),L=ae(Uxe(r,[e,n],[k,D],[O,P],[R,z]),2),B=L[0],j=L[1];return[{isBound:k,isSnap:O,offset:B},{isBound:D,isSnap:P,offset:j}]}function nS(t,e,n,r){r===void 0&&(r=n);var i=lN(eS(t),r.vertical,r.horizontal),a=i.horizontal,s=i.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:tS(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),c=o.horizontal,u=o.vertical,f=tw(a[0],c),h=tw(s[0],u),g=Ae(f),m=Ae(h);return{horizontal:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:g,bounds:a,snap:c},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:m,bounds:s,snap:u}}}function l6(t,e,n,r,i,a,s){s===void 0&&(s=[1,1]);var o=lN(e,n,r),c=o.horizontal,u=o.vertical,f=kW(t,n,r,[],[],i,a,s),h=f.horizontal,g=f.vertical,m=tw(c[0],h),b=tw(u[0],g),x=Ae(m),w=Ae(b);return{horizontal:{isBound:c[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:m,dist:x,bounds:c,snap:h},vertical:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:b,dist:w,bounds:u,snap:g}}}function qxe(t,e,n,r){var i=Jn(t,e)/Math.PI*180,a=n.vertical,s=a.isBound,o=a.isSnap,c=a.dist,u=n.horizontal,f=u.isBound,h=u.isSnap,g=u.dist,m=i%180,b=m<3||m>177,x=m>87&&m<93;return g<c&&(s||o&&!x&&(!r||!b))?"vertical":f||h&&!b&&(!r||!x)?"horizontal":""}function Gxe(t,e,n,r,i,a){return n.map(function(s){var o=ae(s,2),c=o[0],u=o[1],f=_r(e,c),h=_r(e,u),g=r?Hxe(t,f,h,i):nS(t,i,{vertical:[h[0]],horizontal:[h[1]]}),m=g.horizontal,b=m.offset,x=m.isBound,w=m.isSnap,S=g.vertical,T=S.offset,I=S.isBound,N=S.isSnap,O=et(u,c);if(!T&&!b)return{isBound:I||x,isSnap:N||w,sign:O,offset:[0,0]};var P=qxe(f,h,g,r);if(!P)return{sign:O,isBound:!1,isSnap:!1,offset:[0,0]};var k=P==="vertical",D=[0,0];return!r&&Ae(u[0])===1&&Ae(u[1])===1&&c[0]!==u[0]&&c[1]!==u[1]?D=Mo({datas:a,distX:-T,distY:-b}):D=_P(f,h,-(k?T:b),k,a).offset,D=D.map(function(R,z){return R*(O[z]?2/O[z]:0)}),{sign:O,isBound:k?I:x,isSnap:k?N:w,offset:D}})}function c6(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Hxe(t,e,n,r){var i=Sxe(t,e,n),a=i.horizontal,s=i.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Dxe(t,e,n),c=o.horizontal,u=o.vertical,f=c6(a,c),h=c6(s,u),g=Ae(f),m=Ae(h);return{horizontal:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:g},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:h,dist:m}}}function Kxe(t,e,n,r,i){var a=[-n[0],-n[1]],s=t.state,o=s.width,c=s.height,u=t.props.bounds,f=1/0,h=1/0;if(u){var g=[[n[0],-n[1]],[-n[0],n[1]]],m=u.left,b=m===void 0?-1/0:m,x=u.top,w=x===void 0?-1/0:x,S=u.right,T=S===void 0?1/0:S,I=u.bottom,N=I===void 0?1/0:I;g.forEach(function(O){var P=O[0]!==a[0],k=O[1]!==a[1],D=_r(e,O),R=Jn(r,D)*360/Math.PI;if(k){var z=D.slice();(Ae(R-360)<2||Ae(R-180)<2)&&(z[1]=r[1]);var L=_P(r,z,(r[1]<D[1]?N:w)-D[1],!1,i),B=ae(L.offset,2),j=B[1],H=L.isOutside;isNaN(j)||(h=c+(H?1:-1)*Ae(j))}if(P){var z=D.slice();(Ae(R-90)<2||Ae(R-270)<2)&&(z[0]=r[0]);var X=_P(r,z,(r[0]<D[0]?T:b)-D[0],!0,i),q=ae(X.offset,1),W=q[0],J=X.isOutside;isNaN(W)||(f=o+(J?1:-1)*Ae(W))}})}return{maxWidth:f,maxHeight:h}}var bi={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,s=t.getState(),o=s.dragInfo,c=s.beforeOrigin;if(r||!i||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var f=Ya(u),h=Jn(u,[0,0]);return[e.createElement("div",{className:Xe("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(h,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,s=a.gestos,o=a.style;if(s.draggable)return!1;s.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],gf(t,e),J_(t,e,"translate"),f1e(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var c=gt(t,e,ie({set:function(f){n.startValue=f}},Z_(t,e))),u=r||Ve(t,"onDragStart",c);return u!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?c:!1},drag:function(t,e){if(e){X_(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,s=e.deltaOffset,o=e.useSnap,c=e.isRequest,u=e.isGroup,f=e.parentThrottleDrag,h=e.distX,g=e.distY,m=n.isDrag,b=n.prevDist,x=n.prevBeforeDist,w=n.startValue;if(m){s&&(h+=s[0],g+=s[1]);var S=t.props,T=S.parentMoveable,I=u?0:S.throttleDrag||f||0,N=r?0:S.throttleDragRotate||0,O=0,P=!1,k=!1,D=!1,R=!1;if(!r&&N>0&&(h||g)){var z=S.startDragRotate||0,L=ut(z+Jn([0,0],[h,g])*180/Math.PI,N)-z,B=g*Math.abs(Math.cos((L-90)/180*Math.PI)),j=h*Math.abs(Math.cos(L/180*Math.PI)),H=Ya([j,B]);O=L*Math.PI/180,h=H*Math.cos(O),g=H*Math.sin(O)}if(!a&&!r&&!i){var X=ae($xe(t,h,g,N,!o&&c||s,n),2),q=X[0],W=X[1];P=q.isSnap,k=q.isBound,D=W.isSnap,R=W.isBound;var J=q.offset,ne=W.offset;h+=J,g+=ne}var Y=Rt(pW({datas:n,distX:h,distY:g}),w),U=Rt(ixe({datas:n,distX:h,distY:g}),w);UV(U,Ai),UV(Y,Ai),N||(!P&&!k&&(U[0]=ut(U[0],I),Y[0]=ut(Y[0],I)),!D&&!R&&(U[1]=ut(U[1],I),Y[1]=ut(Y[1],I)));var Q=et(Y,w),K=et(U,w),Z=et(K,b),le=et(Q,x);n.prevDist=K,n.prevBeforeDist=Q,n.passDelta=Z,n.passDist=K;var de=n.left+Q[0],ce=n.top+Q[1],he=n.right-Q[0],ee=n.bottom-Q[1],Se=Q_(n,"translate(".concat(U[0],"px, ").concat(U[1],"px)"),"translate(".concat(K[0],"px, ").concat(K[1],"px)"));if(sN(e,Se),t.state.dragInfo.dist=r?[0,0]:K,!(!r&&!T&&Z.every(function(ze){return!ze})&&le.some(function(ze){return!ze}))){var re=t.state,oe=re.width,De=re.height,Pe=gt(t,e,ie({transform:Se,dist:K,delta:Z,translate:U,beforeDist:Q,beforeDelta:le,beforeTranslate:Y,left:de,top:ce,right:he,bottom:ee,width:oe,height:De,isPinch:a},Si({transform:Se},e)));return!r&&Ve(t,"onDrag",Pe),Pe}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,ie(ie({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=va(t,e,{});return!n&&Ve(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var c=tC(t,this,"dragStart",[a||0,s||0],e,!1,"draggable"),u=c.childEvents,f=c.eventParams,h=ie(ie({},o),{targets:t.props.targets,events:f}),g=Ve(t,"onDragGroupStart",h);i.isDrag=g!==!1;var m=(r=(n=u[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[m[0]%1,m[1]%1],i.isDrag?o:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,ie(ie({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=tC(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var s=ie({targets:t.props.targets,events:a},r);return Ve(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=tC(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Ve(t,"onDragGroupEnd",va(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(s){return a=s.useSnap,{datas:e,useSnap:a}},request:function(s){return"x"in s?r=s.x-n.left:"deltaX"in s&&(r+=s.deltaX),"y"in s?i=s.y-n.top:"deltaY"in s&&(i+=s.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function RW(t,e){var n=_r(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function Wxe(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=[i/2*(1+e[0]),a/2*(1+e[1])],c=Nn(n,o,s),u=[0,0];return{fixedPosition:c,fixedDirection:e,fixedOffset:u}}function MW(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=fxe(e,i,a),c=Nn(n,e,s),u=[i?0:e[0],a?0:e[1]];return{fixedPosition:c,fixedDirection:o,fixedOffset:u}}var u6=yN("resizable"),SP={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:_W("resizable"),dragControlCondition:u6,viewClassName:vN("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,s=e.parentDirection,o=e.parentGesto,c=e.datas,u=e.parentFixedDirection,f=e.parentEvent,h=WW(s,i,r,c),g=t.state,m=g.target,b=g.width,x=g.height,w=g.gestos;if(!h||!m||w.resizable)return!1;w.resizable=o||t.controlGesto,!i&&gf(t,e),c.datas={},c.direction=h,c.startOffsetWidth=b,c.startOffsetHeight=x,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=g.inlineCSSWidth||g.cssWidth,c.startHeight=g.inlineCSSHeight||g.cssHeight,c.maxSize=[1/0,1/0],a||(c.minSize=[g.minOffsetWidth,g.minOffsetHeight],c.maxSize=[g.maxOffsetWidth,g.maxOffsetHeight]);var S=t.props.transformOrigin||"% %";c.transformOrigin=qi(S)?S.split(" "):S,c.startOffsetMatrix=g.offsetMatrix,c.startTransformOrigin=g.transformOrigin,c.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!h[0]&&!h[1]||h[0]||!h[1];function T(R){c.ratio=R&&isFinite(R)?R:0}c.startPositions=Xa(t.state);function I(R){var z=RW(c.startPositions,R);c.fixedDirection=z.fixedDirection,c.fixedPosition=z.fixedPosition,c.fixedOffset=z.fixedOffset}function N(R){var z=MW(t.state,R);c.fixedDirection=z.fixedDirection,c.fixedPosition=z.fixedPosition,c.fixedOffset=z.fixedOffset}function O(R){c.minSize=[an("".concat(R[0]),0)||0,an("".concat(R[1]),0)||0]}function P(R){var z=[R[0]||1/0,R[1]||1/0];(!gp(z[0])||isFinite(z[0]))&&(z[0]=an("".concat(z[0]),0)||1/0),(!gp(z[1])||isFinite(z[1]))&&(z[1]=an("".concat(z[1]),0)||1/0),c.maxSize=z}T(b/x),I(u||[-h[0],-h[1]]),c.setFixedDirection=I,c.setFixedPosition=N,c.setMin=O,c.setMax=P;var k=gt(t,e,{direction:h,startRatio:c.ratio,set:function(R){var z=ae(R,2),L=z[0],B=z[1];c.startWidth=L,c.startHeight=B},setMin:O,setMax:P,setRatio:T,setFixedDirection:I,setFixedPosition:N,setOrigin:function(R){c.transformOrigin=R},dragStart:bi.dragStart(t,new vp().dragStart([0,0],e))}),D=f||Ve(t,"onResizeStart",k);return c.startFixedDirection=c.fixedDirection,c.startFixedPosition=c.fixedPosition,D!==!1&&(c.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:h}),c.isResize?k:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,c=e.parentDist,u=e.useSnap,f=e.isRequest,h=e.isGroup,g=e.parentEvent,m=e.resolveMatrix,b=r.isResize,x=r.transformOrigin,w=r.startWidth,S=r.startHeight,T=r.prevWidth,I=r.prevHeight,N=r.minSize,O=r.maxSize,P=r.ratio,k=r.startOffsetWidth,D=r.startOffsetHeight,R=r.isWidth;if(!b)return;if(m){var z=t.state.is3d,L=r.startOffsetMatrix,B=r.startTransformOrigin,j=z?4:3,H=Vv(Z1(e)),X=Math.sqrt(H.length);j!==X&&(H=Rs(H,X,j));var q=q0(L,H,B,j),W=mf(q,k,D,j);r.startPositions=W,r.nextTargetMatrix=H,r.nextAllMatrix=q}var J=Jd(t.props,"resizable"),ne=J.resizeFormat,Y=J.throttleResize,U=Y===void 0?i?0:1:Y,Q=J.parentMoveable,K=J.keepRatioFinally,Z=r.direction,le=Z,de=0,ce=0;!Z[0]&&!Z[1]&&(le=[1,1]);var he=P&&(s??J.keepRatio)||!1;function ee(){var ot=r.fixedDirection,Et=eY(le,he,r,e);de=Et.distWidth,ce=Et.distHeight;var ft=le[0]-ot[0]||he?Math.max(k+de,Ai):k,xn=le[1]-ot[1]||he?Math.max(D+ce,Ai):D;return he&&k&&D&&(R?xn=ft/P:ft=xn*P),[ft,xn]}var Se=ae(ee(),2),re=Se[0],oe=Se[1];g||(r.setFixedDirection(r.fixedDirection),Ve(t,"onBeforeResize",gt(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(ot){var Et;return r.setFixedDirection(ot),Et=ae(ee(),2),re=Et[0],oe=Et[1],[re,oe]},setFixedPosition:function(ot){var Et;return r.setFixedPosition(ot),Et=ae(ee(),2),re=Et[0],oe=Et[1],[re,oe]},boundingWidth:re,boundingHeight:oe,setSize:function(ot){var Et;Et=ae(ot,2),re=Et[0],oe=Et[1]}},!0)));var De=o;o||(!i&&a?De=mxe(t,[0,0]):De=r.fixedPosition);var Pe=[0,0];a||(Pe=u1e(t,re,oe,Z,De,!u&&f,r)),c&&(!c[0]&&(Pe[0]=0),!c[1]&&(Pe[1]=0));function ze(){var ot;ne&&(ot=ae(ne([re,oe]),2),re=ot[0],oe=ot[1]),re=ut(re,U),oe=ut(oe,U)}if(he){le[0]&&le[1]&&Pe[0]&&Pe[1]&&(Ae(Pe[0])>Ae(Pe[1])?Pe[1]=0:Pe[0]=0);var je=!Pe[0]&&!Pe[1];je&&ze(),le[0]&&!le[1]||Pe[0]&&!Pe[1]||je&&R?(re+=Pe[0],oe=re/P):(!le[0]&&le[1]||!Pe[0]&&Pe[1]||je&&!R)&&(oe+=Pe[1],re=oe*P)}else re+=Pe[0],oe+=Pe[1],re=Math.max(0,re),oe=Math.max(0,oe);n=ae(AK([re,oe],N,O,he?P:!1),2),re=n[0],oe=n[1],ze(),he&&(h||K)&&(R?oe=re/P:re=oe*P),de=re-k,ce=oe-D;var Ue=[de-T,ce-I];r.prevWidth=de,r.prevHeight=ce;var Ie=gxe(t,re,oe,De,x,r);if(!(!Q&&Ue.every(function(ot){return!ot})&&Ie.every(function(ot){return!ot}))){var Oe=bi.drag(t,$0(e,t.state,Ie,!!a,!1,"draggable")),Ge=Oe.transform,yt=w+de,Dt=S+ce,Nt=gt(t,e,ie({width:yt,height:Dt,offsetWidth:Math.round(re),offsetHeight:Math.round(oe),startRatio:P,boundingWidth:re,boundingHeight:oe,direction:Z,dist:[de,ce],delta:Ue,isPinch:!!a,drag:Oe},XW({style:{width:"".concat(yt,"px"),height:"".concat(Dt,"px")},transform:Ge},Oe,e)));return!g&&Ve(t,"onResize",Nt),Nt}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var c=t.state,u=c.width,f=c.height,h=u-(i+s),g=f-(a+o),m=Ae(h)>3,b=Ae(g)>3;if(m&&(n.startWidth+=h,n.startOffsetWidth+=h,n.prevWidth+=h),b&&(n.startHeight+=g,n.startOffsetHeight+=g,n.prevHeight+=g),m||b)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=va(t,e,{});return!r&&Ve(t,"onResizeEnd",i),i}},dragGroupControlCondition:u6,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,ie(ie({},e),{isGroup:!0}));if(!r)return!1;var i=Is(t,"resizable",e),a=n.startOffsetWidth,s=n.startOffsetHeight;function o(){var m=n.minSize;i.forEach(function(b){var x=b.datas,w=x.minSize,S=x.startOffsetWidth,T=x.startOffsetHeight,I=a*(S?w[0]/S:0),N=s*(T?w[1]/T:0);m[0]=Math.max(m[0],I),m[1]=Math.max(m[1],N)})}function c(){var m=n.maxSize;i.forEach(function(b){var x=b.datas,w=x.maxSize,S=x.startOffsetWidth,T=x.startOffsetHeight,I=a*(S?w[0]/S:0),N=s*(T?w[1]/T:0);m[0]=Math.min(m[0],I),m[1]=Math.min(m[1],N)})}var u=bl(t,this,"dragControlStart",e,function(m,b){return J1(t,m,n,b)});o(),c();var f=function(m){r.setFixedDirection(m),u.forEach(function(b,x){b.setFixedDirection(m),J1(t,b.moveable,n,i[x])})};n.setFixedDirection=f;var h=ie(ie({},r),{targets:t.props.targets,events:u.map(function(m){return ie(ie({},m),{setMin:function(b){m.setMin(b),o()},setMax:function(b){m.setMax(b),c()}})}),setFixedDirection:f,setMin:function(m){r.setMin(m),o()},setMax:function(m){r.setMax(m),c()}}),g=Ve(t,"onResizeGroupStart",h);return n.isResize=g!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Jd(t.props,"resizable");iS(t,"onBeforeResize",function(m){Ve(t,"onBeforeResizeGroup",gt(t,e,ie(ie({},m),{targets:r.targets}),!0))});var i=this.dragControl(t,ie(ie({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,s=i.boundingHeight,o=i.dist,c=r.keepRatio,u=[a/(a-o[0]),s/(s-o[1])],f=n.fixedPosition,h=bl(t,this,"dragControl",e,function(m,b){var x=ae(di(B0(t.rotation/180*Math.PI,3),[b.datas.originalX*u[0],b.datas.originalY*u[1],1],3),2),w=x[0],S=x[1];return ie(ie({},b),{parentDist:null,parentScale:u,dragClient:Rt(f,[w,S]),parentKeepRatio:c})}),g=ie({targets:r.targets,events:h},i);return Ve(t,"onResizeGroup",g),g}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=bl(t,this,"dragControlEnd",e),a=va(t,e,{targets:t.props.targets,events:i});return Ve(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(s){var o;return i=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(o=s?.horizontal)!==null&&o!==void 0?o:!0,useSnap:i}},request:function(s){return"offsetWidth"in s?n=s.offsetWidth-a.offsetWidth:"deltaWidth"in s&&(n+=s.deltaWidth),"offsetHeight"in s?r=s.offsetHeight-a.offsetHeight:"deltaHeight"in s&&(r+=s.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:s.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function nC(t,e,n,r,i){var a=t.props.groupable,s=t.state,o=s.is3d?4:3,c=e.origin,u=Nn(t.state.rootMatrix,et([c[0],c[1]],a?[0,0]:[s.left,s.top]),o),f=Rt([i.left,i.top],u);e.startAbsoluteOrigin=f,e.prevDeg=Jn(f,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=yl(f,[n,r])}function n1(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,s=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++s:a<t&&a<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function rC(t,e,n,r){return n1(Jn(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function iC(t,e,n,r,i,a){var s=t.props.throttleRotate,o=s===void 0?0:s,c=n.prevSnapDeg,u=0,f=!1;if(a){var h=c1e(t,e,r,i+r);f=h.isSnap,u=i+h.dist}f||(u=ut(i+r,o));var g=u-i;return n.prevSnapDeg=g,[g-c,g,u]}function jW(t,e,n){var r=ae(e,4),i=r[0],a=r[1],s=r[2],o=r[3];if(t==="none")return[];if(gr(t))return t.map(function(w){return jW(w,[i,a,s,o],n)[0]});var c=ae((t||"top").split("-"),2),u=c[0],f=c[1],h=[i,a];u==="left"?h=[s,i]:u==="right"?h=[a,o]:u==="bottom"&&(h=[o,s]);var g=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2],m=HW(h,n);if(f){var b=f==="top"||f==="left",x=u==="bottom"||u==="left";g=h[b&&!x||!b&&x?0:1]}return[[g,m]]}function EP(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(wr(n,Xe("rotation-control"))||t.props.rotateAroundControls&&wr(n,Xe("around-control"))||wr(n,Xe("control"))&&wr(n,Xe("rotatable")))return!0;var r=t.props.rotationTarget;return r?bN(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var Yxe=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Xxe={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Yxe],viewClassName:function(t){return t.isDragging("rotatable")?Xe("view-rotation-dragging"):""},render:function(t,e){var n=Jd(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,c=n.resolveAblesWithRotatable,u=t.getState(),f=u.renderPoses,h=u.direction;if(!r)return null;var g=jW(i,f,h),m=[];if(g.forEach(function(S,T){var I=ae(S,2),N=I[0],O=I[1];m.push(e.createElement("div",{key:"rotation".concat(T),className:Xe("rotation"),style:{transform:"translate(-50%) translate(".concat(N[0],"px, ").concat(N[1],"px) rotate(").concat(O,"rad)")}},e.createElement("div",{className:Xe("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Xe("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var b=Ol(c||{}),x={};b.forEach(function(S){c[S].forEach(function(T){x[T]=S})});var w=[];gr(s)&&(w=s.map(function(S){var T=x[S];return{data:T?{resolve:T}:{},classNames:T?["move"]:[],dir:S}})),m.push.apply(m,Ne([],ae(bW(t,"rotatable",w,e)),!1))}return o&&m.push.apply(m,Ne([],ae(EW(t,e)),!1)),m},dragControlCondition:EP,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=e.parentRotate,c=e.parentFlag,u=e.isPinch,f=e.isRequest,h=t.state,g=h.target,m=h.left,b=h.top,x=h.direction,w=h.beforeDirection,S=h.targetTransform,T=h.moveableClientRect,I=h.offsetMatrix,N=h.targetMatrix,O=h.allMatrix,P=h.width,k=h.height;if(!f&&!g)return!1;var D=t.getRect();i.rect=D,i.transform=S,i.left=m,i.top=b;var R=function(le){var de=MW(t.state,le);i.fixedDirection=de.fixedDirection,i.fixedOffset=de.fixedOffset,i.fixedPosition=de.fixedPosition,U&&U.setFixedPosition(le)},z=function(le){var de=Wxe(t.state,le);i.fixedDirection=de.fixedDirection,i.fixedOffset=de.fixedOffset,i.fixedPosition=de.fixedPosition,U&&U.setFixedDirection(le)},L=a,B=s;if(f||u||c){var j=o||0;i.beforeInfo={origin:D.beforeOrigin,prevDeg:j,defaultDeg:j,prevSnapDeg:0,startDist:0},i.afterInfo=ie(ie({},i.beforeInfo),{origin:D.origin}),i.absoluteInfo=ie(ie({},i.beforeInfo),{origin:D.origin,startValue:j})}else{var H=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(H){var X=H.getAttribute("data-direction")||"",q=nxe[X];if(q){i.isControl=!0,i.isAroundControl=wr(H,Xe("around-control")),i.controlDirection=q;var W=H.getAttribute("data-resolve");W&&(i.resolveAble=W);var J=T1e(h.rootMatrix,h.renderPoses,T);n=ae(_r(J,q),2),L=n[0],B=n[1]}}i.beforeInfo={origin:D.beforeOrigin},i.afterInfo={origin:D.origin},i.absoluteInfo={origin:D.origin,startValue:D.rotation};var ne=R;R=function(le){var de=h.is3d?4:3,ce=ae(Rt(ZK(N,de),le),2),he=ce[0],ee=ce[1],Se=di(I,Xd([he,ee],de)),re=di(O,Xd([le[0],le[1]],de));ne(le);var oe=h.posDelta;i.beforeInfo.origin=et(Se,oe),i.afterInfo.origin=et(re,oe),i.absoluteInfo.origin=et(re,oe),nC(t,i.beforeInfo,L,B,T),nC(t,i.afterInfo,L,B,T),nC(t,i.absoluteInfo,L,B,T)},z=function(le){var de=_r([[0,0],[P,0],[0,k],[P,k]],le);R(de)}}i.startClientX=L,i.startClientY=B,i.direction=x,i.beforeDirection=w,i.startValue=0,i.datas={},J_(t,e,"rotate");var Y=!1,U=!1;if(i.isControl&&i.resolveAble){var Q=i.resolveAble;Q==="resizable"&&(U=SP.dragControlStart(t,ie(ie({},new vp("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}U||(Y=bi.dragStart(t,new vp().dragStart([0,0],e))),R(A1e(t));var K=gt(t,e,ie(ie({set:function(le){i.startValue=le*Math.PI/180},setFixedDirection:z,setFixedPosition:R},Z_(t,e)),{dragStart:Y,resizeStart:U})),Z=Ve(t,"onRotateStart",K);return i.isRotate=Z!==!1,h.snapRenderInfo={request:e.isRequest},i.isRotate?K:!1},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.clientDistX,o=e.clientDistY,c=e.parentRotate,u=e.parentFlag,f=e.isPinch,h=e.groupDelta,g=e.resolveMatrix,m=a.beforeDirection,b=a.beforeInfo,x=a.afterInfo,w=a.absoluteInfo,S=a.isRotate,T=a.startValue,I=a.rect,N=a.startClientX,O=a.startClientY;if(S){X_(t,e,"rotate");var P=rxe(e),k=m*P,D=t.props.parentMoveable,R=0,z,L,B=0,j,H,X=0,q,W,J=180/Math.PI*T,ne=w.startValue,Y=!1,U=N+s,Q=O+o;if(!u&&"parentDist"in e){var K=e.parentDist;z=K,j=K,q=K}else f||u?(z=n1(c,m,b),j=n1(c,k,x),q=n1(c,k,w)):(z=rC(U,Q,m,b),j=rC(U,Q,k,x),q=rC(U,Q,k,w),Y=!0);if(L=J+z,H=J+j,W=ne+q,Ve(t,"onBeforeRotate",gt(t,e,{beforeRotation:L,rotation:H,absoluteRotation:W,setRotation:function(De){j=De-J,z=j,q=j}},!0)),n=ae(iC(t,I,b,z,J,Y),3),R=n[0],z=n[1],L=n[2],r=ae(iC(t,I,x,j,J,Y),3),B=r[0],j=r[1],H=r[2],i=ae(iC(t,I,w,q,ne,Y),3),X=i[0],q=i[1],W=i[2],!(!X&&!B&&!R&&!D&&!g)){var Z=Q_(a,"rotate(".concat(H,"deg)"),"rotate(".concat(j,"deg)"));g&&(a.fixedPosition=oN(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var le=pxe(t,j,a),de=et(Rt(h||[0,0],le),a.prevInverseDist||[0,0]);a.prevInverseDist=le,a.requestValue=null;var ce=mW(t,Z,de,f,e),he=ce,ee=yl([U,Q],w.startAbsoluteOrigin)-w.startDist,Se=void 0;if(a.resolveAble==="resizable"){var re=SP.dragControl(t,ie(ie({},$0(e,t.state,[e.deltaX,e.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:ee}));re&&(Se=re,he=XW(he,re,e))}var oe=gt(t,e,ie(ie({delta:B,dist:j,rotate:H,rotation:H,beforeDist:z,beforeDelta:R,beforeRotate:L,beforeRotation:L,absoluteDist:q,absoluteDelta:X,absoluteRotate:W,absoluteRotation:W,isPinch:!!f,resize:Se},ce),he));return Ve(t,"onRotate",oe),oe}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=va(t,e,{});return Ve(t,"onRotateEnd",r),r}},dragGroupControlCondition:EP,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var c=bl(t,this,"dragControlStart",e,function(h,g){var m=h.state,b=m.left,x=m.top,w=m.beforeOrigin,S=Rt(et([b,x],[i,a]),et(w,s));return g.datas.startGroupClient=S,g.datas.groupClient=S,ie(ie({},g),{parentRotate:0})}),u=ie(ie({},o),{targets:t.props.targets,events:c}),f=Ve(t,"onRotateGroupStart",u);return n.isRotate=f!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){iS(t,"onBeforeRotate",function(u){Ve(t,"onBeforeRotateGroup",gt(t,e,ie(ie({},u),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,s=a/180*Math.PI,o=bl(t,this,"dragControl",e,function(u,f){var h=f.datas.startGroupClient,g=ae(f.datas.groupClient,2),m=g[0],b=g[1],x=ae(V0(h,s*i),2),w=x[0],S=x[1],T=[w-m,S-b];return f.datas.groupClient=[w,S],ie(ie({},f),{parentRotate:a,groupDelta:T})});t.rotation=i*r.beforeRotation;var c=ie({targets:t.props.targets,events:o,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},r);return Ve(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=bl(t,this,"dragControlEnd",e),a=va(t,e,{targets:t.props.targets,events:i});return Ve(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Qxe(t,e){var n,r=t.direction,i=t.classNames,a=t.size,s=t.pos,o=t.zoom,c=t.key,u=r==="horizontal",f=u?"Y":"X";return e.createElement("div",{key:c,className:i.join(" "),style:(n={},n[u?"width":"height"]="".concat(a),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(o,")"),n)})}function hN(t,e){return Qxe(ie(ie({},t),{classNames:Ne([Xe("line","guideline",t.direction)],ae(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(ut(n,.1),"px")})}),e)}function d6(t,e,n,r,i,a,s,o){var c=t.props.zoom;return n.map(function(u,f){var h=u.type,g=u.pos,m=[0,0];return m[s]=r,m[s?0:1]=-i+g,hN({key:"".concat(e,"TargetGuideline").concat(f),classNames:[Xe("target","bold",h)],posValue:m,sizeValue:a,zoom:c,direction:e},o)})}function f6(t,e,n,r,i,a){var s=t.props,o=s.zoom,c=s.isDisplayInnerSnapDigit,u=e==="horizontal"?hu:pu,f=i[u.start],h=i[u.end];return n.filter(function(g){var m=g.hide,b=g.elementRect;if(m)return!1;if(c&&b){var x=b.rect;if(x[u.start]<=f&&h<=x[u.end])return!1}return!0}).map(function(g,m){var b=g.pos,x=g.size,w=g.element,S=g.className,T=[-r[0]+b[0],-r[1]+b[1]];return hN({key:"".concat(e,"-default-guideline-").concat(m),classNames:w?[Xe("bold"),S]:[Xe("normal"),S],direction:e,posValue:T,sizeValue:x,zoom:o},a)})}function Rm(t,e,n,r,i,a,s,o){var c,u=t.props,f=u.snapDigit,h=f===void 0?0:f,g=u.isDisplaySnapDigit,m=g===void 0?!0:g,b=u.snapDistFormat,x=b===void 0?function(O,P){return O}:b,w=u.zoom,S=e==="horizontal"?"X":"Y",T=e==="vertical"?"height":"width",I=Math.abs(i),N=m?parseFloat(I.toFixed(h)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Xe("guideline-group",e),style:(c={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},c[T]="".concat(I,"px"),c)},hN({direction:e,classNames:[Xe(n),s],size:"100%",posValue:[0,0],sizeValue:I,zoom:w},o),o.createElement("div",{className:Xe("size-value","gap"),style:{transform:"translate".concat(S,"(-50%) scale(").concat(w,")")}},N>0?x(N,e):""))}function Zxe(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,s=i?hu:pu,o=n[s.start],c=n[s.end];return QW(e,function(u){return u.pos[i]}).map(function(u){var f=[],h=[],g=[];return u.forEach(function(m){var b,x,w=m.element,S=m.elementRect.rect;if(S[s.end]<o)f.push(m);else if(c<S[s.start])h.push(m);else if(S[s.start]<=o&&c<=S[s.end]&&r){var T=m.pos,I={element:w,rect:ie(ie({},S),(b={},b[s.end]=S[s.start],b))},N={element:w,rect:ie(ie({},S),(x={},x[s.start]=S[s.end],x))},O=[0,0],P=[0,0];O[i]=T[i],O[a]=T[a],P[i]=T[i],P[a]=T[a]+m.size,f.push({type:t,pos:O,size:0,elementRect:I,direction:"",elementDirection:"end"}),h.push({type:t,pos:P,size:0,elementRect:N,direction:"",elementDirection:"start"})}}),f.sort(function(m,b){return b.pos[a]-m.pos[a]}),h.sort(function(m,b){return m.pos[a]-b.pos[a]}),{total:u,start:f,end:h,inner:g}})}function Jxe(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var c=e.filter(function(w){return w.type===o}),u=o==="vertical"?1:0,f=u?0:1,h=Zxe(o,c,r,a),g=u?pu:hu,m=u?hu:pu,b=r[g.start],x=r[g.end];h.forEach(function(w){var S=w.total,T=w.start,I=w.end,N=w.inner,O=n[f]+S[0].pos[f]-r[m.start],P=r;T.forEach(function(k){var D=k.elementRect.rect,R=P[g.start]-D[g.end];if(R>0){var z=[0,0];z[u]=n[u]+P[g.start]-b-R,z[f]=O,s.push(Rm(t,o,"dashed",s.length,R,z,k.className,i))}P=D}),P=r,I.forEach(function(k){var D=k.elementRect.rect,R=D[g.start]-P[g.end];if(R>0){var z=[0,0];z[u]=n[u]+P[g.end]-b,z[f]=O,s.push(Rm(t,o,"dashed",s.length,R,z,k.className,i))}P=D}),N.forEach(function(k){var D=k.elementRect.rect,R=b-D[g.start],z=D[g.end]-x,L=[0,0],B=[0,0];L[u]=n[u]-R,L[f]=O,B[u]=n[u]+x-b,B[f]=O,s.push(Rm(t,o,"dashed",s.length,R,L,k.className,i)),s.push(Rm(t,o,"dashed",s.length,z,B,k.className,i))})})}),s}function e1e(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(w){return w.type===s}).slice(0,1),c=s==="vertical"?0:1,u=c?0:1,f=c?pu:hu,h=c?hu:pu,g=r[f.start],m=r[f.end],b=r[h.start],x=r[h.end];o.forEach(function(w){var S=w.gap,T=w.gapRects,I=Math.max.apply(Math,Ne([b],ae(T.map(function(P){var k=P.rect;return k[h.start]})),!1)),N=Math.min.apply(Math,Ne([x],ae(T.map(function(P){var k=P.rect;return k[h.end]})),!1)),O=(I+N)/2;I===N||O===(b+x)/2||T.forEach(function(P){var k=P.rect,D=P.className,R=[n[0],n[1]];if(k[f.end]<g)R[c]+=k[f.end]-g;else if(m<k[f.start])R[c]+=k[f.start]-g-S;else return;R[u]+=O-b,a.push(Rm(t,c?"vertical":"horizontal","gap",a.length,S,R,D,i))})})}),a}function TP(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,s=i.overflow,o=i.scrollHeight,c=i.scrollWidth,u=i.clientHeight,f=i.clientWidth,h=i.clientLeft,g=i.clientTop,m=t.props,b=m.snapGap,x=b===void 0?!0:b,w=m.verticalGuidelines,S=m.horizontalGuidelines,T=m.snapThreshold,I=T===void 0?5:T,N=m.maxSnapElementGuidelineDistance,O=N===void 0?1/0:N,P=m.isDisplayGridGuidelines,k=Ka(Xa(t.state)),D=k.top,R=k.left,z=k.bottom,L=k.right,B={top:D,left:R,bottom:z,right:L,center:(R+L)/2,middle:(D+z)/2},j=i1e(t),H=Ne([],ae(j),!1),X=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(ne){return ne*I});x&&H.push.apply(H,Ne([],ae(t1e(t,B,X)),!1));var q=ie({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(H.push.apply(H,Ne([],ae(r1e(t,s?c:f,s?o:u,h,g,q,P)),!1)),a){var W=i.left,J=i.top;q.left+=W,q.top+=J,q.right+=W,q.bottom+=J}return H.push.apply(H,Ne([],ae(LW(S||!1,w||!1,s?c:f,s?o:u,h,g,q)),!1)),H=H.filter(function(ne){var Y=ne.element,U=ne.elementRect,Q=ne.type;if(!Y||!U)return!0;var K=U.rect;return zW(B,K,Q,O)}),H}function t1e(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,c=t.state.elementRects,u=[];return[["vertical",hu,pu],["horizontal",pu,hu]].forEach(function(f){var h=ae(f,3),g=h[0],m=h[1],b=h[2],x=e[m.start],w=e[m.end],S=e[m.center],T=e[b.start],I=e[b.end],N={left:n[0],top:n[1]};function O(D){var R=D.rect,z=N[m.start];return R[m.end]<x+z?x-R[m.end]:w-z<R[m.start]?R[m.start]-w:-1}var P=c.filter(function(D){var R=D.rect;return R[b.start]>I||R[b.end]<T?!1:O(D)>0}).sort(function(D,R){return O(D)-O(R)}),k=[];P.forEach(function(D){P.forEach(function(R){if(D!==R){var z=D.rect,L=R.rect,B=z[b.start],j=z[b.end],H=L[b.start],X=L[b.end];B>X||H>j||k.push([D,R])}})}),k.forEach(function(D){var R=ae(D,2),z=R[0],L=R[1],B=z.rect,j=L.rect,H=B[m.start],X=B[m.end],q=j[m.start],W=j[m.end],J=N[m.start],ne=0,Y=0,U=!1,Q=!1,K=!1;if(X<=x&&w<=q){if(Q=!0,ne=(q-X-(w-x))/2,Y=X+ne+(w-x)/2,Ae(Y-S)>J)return}else if(X<q&&W<x+J){if(U=!0,ne=q-X,Y=W+ne,Ae(Y-x)>J)return}else if(X<q&&w-J<H){if(K=!0,ne=q-X,Y=H-ne,Ae(Y-w)>J)return}else return;ne&&zW(e,j,g,a)&&(ne>o||u.push({type:g,pos:g==="vertical"?[Y,0]:[0,Y],element:L.element,size:0,className:L.className,isStart:U,isCenter:Q,isEnd:K,gap:ne,hide:!0,gapRects:[z,L],direction:"",elementDirection:""}))})}),u}function n1e(t,e,n,r){var i,a,s=t.props,o=t.state,c=s.snapGridAll,u=s.snapGridWidth,f=u===void 0?0:u,h=s.snapGridHeight,g=h===void 0?0:h,m=o.snapRenderInfo,b=m&&(((i=m.direction)===null||i===void 0?void 0:i[0])||((a=m.direction)===null||a===void 0?void 0:a[1])),x=t.moveables;if(c&&x&&b&&(f||g)){if(o.snapThresholdInfo)return;o.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var w=t.getRect(),S=w.children,T=m.direction;if(S){var I=T.map(function(O,P){var k=P===0?{snapSize:f,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:g,posName:"top",sizeName:"height",clientOffset:r.top-n},D=k.snapSize,R=k.posName,z=k.sizeName,L=k.clientOffset;if(!D)return{dir:O,multiple:1,snapSize:D,snapOffset:0};var B=w[z],j=w[R],H=CK(S.map(function(U){return[U[R]-j,U[z],B-U[z]-U[R]+j]})).filter(function(U){return U}).sort(function(U,Q){return U-Q}),X=H[0],q=H.map(function(U){return ut(U/X,.1)*D}),W=1,J=ut(B/X,.1);for(W=1;W<=10&&!q.every(function(U){return U*W%1===0});++W);var ne=(-O+1)/2,Y=W1(j-L,j-L+B,ne,1-ne);return{multiple:J*W,dir:O,snapSize:D,snapOffset:Math.round(Y/D)}}),N=I.map(function(O){return O.multiple||1});o.snapThresholdInfo.multiples=N,o.snapThresholdInfo.offset=I.map(function(O){return O.snapOffset}),I.forEach(function(O,P){O.snapSize})}}else o.snapThresholdInfo=null}function r1e(t,e,n,r,i,a,s){r===void 0&&(r=0),i===void 0&&(i=0);var o=t.props,c=t.state,u=o.snapGridWidth,f=u===void 0?0:u,h=o.snapGridHeight,g=h===void 0?0:h,m=[],b=a.left,x=a.top,w=[0,0];n1e(t,r,i,a);var S=c.snapThresholdInfo,T=f,I=g;if(S&&(f*=S.multiples[0]||1,g*=S.multiples[1]||1,w=S.offset),g){for(var N=function(P){m.push({type:"horizontal",pos:[b,ut(w[1]*I+P-i+x,.1)],className:Xe("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},O=0;O<=n*2;O+=g)N(O);for(var O=-g;O>=-n;O-=g)N(O)}if(f){for(var N=function(k){m.push({type:"vertical",pos:[ut(w[0]*T+k-r+b,.1),x],className:Xe("grid-guideline"),size:n,hide:!s,direction:"",grid:!0})},O=0;O<=e*2;O+=f)N(O);for(var O=-f;O>=-e;O-=f)N(O)}return m}function zW(t,e,n,r){return n==="horizontal"?Ae(t.right-e.left)<=r||Ae(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Ae(t.bottom-e.top)<=r||Ae(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function i1e(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(g){return!g.refresh}),a=r.map(function(g){return Ns(g)&&"element"in g?ie(ie({},g),{element:Eo(g.element,!0)}):{element:Eo(g,!0)}}).filter(function(g){return g.element}),s=mbe(i.map(function(g){return g.element}),a.map(function(g){return g.element})),o=s.maintained,c=s.added,u=[];o.forEach(function(g){var m=ae(g,2),b=m[0],x=m[1];u[x]=i[b]}),a1e(t,c.map(function(g){return a[g]})).map(function(g,m){u[c[m]]=g}),e.elementRects=u;var f=cN(t.props.elementSnapDirections),h=[];return u.forEach(function(g){var m=g.element,b=g.top,x=b===void 0?f.top:b,w=g.left,S=w===void 0?f.left:w,T=g.right,I=T===void 0?f.right:T,N=g.bottom,O=N===void 0?f.bottom:N,P=g.center,k=P===void 0?f.center:P,D=g.middle,R=D===void 0?f.middle:D,z=g.className,L=g.rect,B=uN({top:x,right:I,left:S,bottom:O,center:k,middle:R},L),j=B.horizontal,H=B.vertical,X=B.horizontalNames,q=B.verticalNames,W=L.top,J=L.left,ne=L.right-J,Y=L.bottom-W,U=[ne,Y];H.forEach(function(Q,K){h.push({type:"vertical",element:m,pos:[ut(Q,.1),W],size:Y,sizes:U,className:z,elementRect:g,elementDirection:r6[q[K]]||q[K],direction:""})}),j.forEach(function(Q,K){h.push({type:"horizontal",element:m,pos:[J,ut(Q,.1)],size:ne,sizes:U,className:z,elementRect:g,elementDirection:r6[X[K]]||X[K],direction:""})})}),h}function h6(t,e){return t?t.map(function(n){var r=Ns(n)?n:{pos:n},i=r.pos;return gp(i)?r:ie(ie({},r),{pos:an(i,e)})}):[]}function LW(t,e,n,r,i,a,s){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],c=s.left,u=s.top,f=s.bottom,h=s.right,g=n+h-c,m=r+f-u;return h6(t,m).forEach(function(b){o.push({type:"horizontal",pos:[c,ut(b.pos-a+u,.1)],size:g,className:b.className,direction:""})}),h6(e,g).forEach(function(b){o.push({type:"vertical",pos:[ut(b.pos-i+c,.1),u],size:m,className:b.className,direction:""})}),o}function a1e(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,s=r.is3d,o=r.offsetDelta,c=s?4:3,u=ae(kxe(a,i,c),2),f=u[0],h=u[1],g=n?0:o[0],m=n?0:o[1];return e.map(function(b){var x=b.element.getBoundingClientRect(),w=x.left-f-g,S=x.top-h-m,T=S+x.height,I=w+x.width,N=ae(xp(a,[w,S],c),2),O=N[0],P=N[1],k=ae(xp(a,[I,T],c),2),D=k[0],R=k[1];return ie(ie({},b),{rect:{left:O,right:D,top:P,bottom:R,center:(O+D)/2,middle:(P+R)/2}})})}function lx(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var s=Eo(r,!0);if(s){var o=av(s),c=b6(e,[o.left-i.left,o.top-i.top]),u=b6(e,[o.right-i.right,o.bottom-i.bottom]);a.left=ut(c[0],1e-5),a.top=ut(c[1],1e-5),a.right=ut(u[0],1e-5),a.bottom=ut(u[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=TP(t),e.enableSnap=!0,!0}function VW(t,e,n,r,i,a){var s=mf(t,e,n,a?4:3),o=_r(s,r);return gN(s,et(i,o))}function p6(t){return t?t/Ae(t):0}function s1e(t,e,n,r,i,a){var s=a.fixedDirection,o=Nxe(n,s,r),c=fN(t,e,n,r),u=Ne(Ne([],ae(Gxe(t,e,o,r,i,a)),!1),ae(NW(t,c,a)),!1),f=ew(u,0),h=ew(u,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function o1e(t,e,n,r,i,a,s,o,c){var u=_r(e,s),f=nS(t,o,{vertical:[u[0]],horizontal:[u[1]]}),h=f.horizontal.offset,g=f.vertical.offset;if(ut(g,yP)||ut(h,yP)){var m=ae(Mo({datas:c,distX:-g,distY:-h}),2),b=m[0],x=m[1],w=Math.min(i||1/0,n+s[0]*b),S=Math.min(a||1/0,r+s[1]*x);return[w-n,S-r]}return[0,0]}function BW(t,e,n,r,i,a,s,o){for(var c=Xa(t.state),u=t.props.keepRatio,f=0,h=0,g=0;g<2;++g){var m=e(f,h),b=s1e(t,m,i,u,s,o),x=b.width,w=b.height,S=x.isBound,T=w.isBound,I=x.offset,N=w.offset;if(g===1&&(S||(I=0),T||(N=0)),g===0&&s&&!S&&!T)return[0,0];if(u){var O=Ae(I)*(n?1/n:1),P=Ae(N)*(r?1/r:1),k=S&&T?O<P:T||!S&&O<P;k?I=n*N/r:N=r*I/n}f+=I,h+=N}if(!u&&i[0]&&i[1]){var D=Kxe(t,c,i,a,o),R=D.maxWidth,z=D.maxHeight,L=ae(o1e(t,e(f,h).map(function(H){return H.map(function(X){return ut(X,yP)})}),n+f,r+h,R,z,i,s,o),2),I=L[0],N=L[1];f+=I,h+=N}return[f,h]}function rv(t){return t<0&&(t=t%360+360),t%=360,t}function l1e(t,e){e=rv(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return Ae(t-r)<Ae(t-i)?r:i}function aC(t,e){t=rv(t),e=rv(e);var n=rv(t-e);return Math.min(n,360-n)}function c1e(t,e,n,r){var i,a=t.props,s=(i=a[TW])!==null&&i!==void 0?i:5,o=a[AW];if(Zp(t,"rotatable")){var c=e.pos1,u=e.pos2,f=e.pos3,h=e.pos4,g=e.origin,m=n*Math.PI/180,b=[c,u,f,h].map(function(N){return et(N,g)}),x=b.map(function(N){return V0(N,m)}),w=Ne(Ne([],ae(Txe(t,b,x,g,n)),!1),ae(Vxe(t,b,x,g,n)),!1);w.sort(function(N,O){return Ae(N-n)-Ae(O-n)});var S=w.length>0;if(S)return{isSnap:S,dist:S?w[0]:n}}if(o?.length&&s){var T=o.slice().sort(function(N,O){return aC(N,r)-aC(O,r)}),I=T[0];if(aC(I,r)<=s)return{isSnap:!0,dist:n+l1e(r,I)-r}}return{isSnap:!1,dist:n}}function u1e(t,e,n,r,i,a,s){if(!Zp(t,"resizable"))return[0,0];var o=s.fixedDirection,c=s.nextAllMatrix,u=t.state,f=u.allMatrix,h=u.is3d;return BW(t,function(g,m){return VW(c||f,e+g,n+m,o,i,h)},e,n,r,i,a,s)}function d1e(t,e,n,r,i){if(!Zp(t,"scalable"))return[0,0];var a=i.startOffsetWidth,s=i.startOffsetHeight,o=i.fixedPosition,c=i.fixedDirection,u=i.is3d,f=BW(t,function(h,g){return VW(uxe(i,Rt(e,[h/a,g/s])),a,s,c,o,u)},a,s,n,o,r,i);return[f[0]/a,f[1]/s]}function f1e(t,e){e.absolutePoses=Xa(t.state)}function g6(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Gi(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return ie(ie({},r),{direction:i.direction})})}function m6(t,e,n,r,i,a){var s=lN(eS(t,a),e,n),o=s.vertical,c=s.horizontal,u=Rh();o.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.left=!0),b.direction==="end"&&(u.right=!0),r.push({type:"bounds",pos:b.pos}))}),c.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.top=!0),b.direction==="end"&&(u.bottom=!0),i.push({type:"bounds",pos:b.pos}))});var f=Bxe(t),h=f.boundMap,g=f.vertical,m=f.horizontal;return g.forEach(function(b){Dl(r,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||r.push({type:"bounds",pos:b})}),m.forEach(function(b){Dl(i,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||i.push({type:"bounds",pos:b})}),{boundMap:u,innerBoundMap:h}}var h1e=yN("",["resizable","scalable"]),p1e={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",TW,AW,CW,IW,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,s=n.pos2,o=n.pos3,c=n.pos4,u=n.snapRenderInfo,f=t.props.snapRenderThreshold,h=f===void 0?1:f;if(!u||!u.render||!Zp(t,""))return jh(t,"boundMap",Rh(),function(Z){return JSON.stringify(Z)}),jh(t,"innerBoundMap",Rh(),function(Z){return JSON.stringify(Z)}),[];n.guidelines=TP(t);var g=Math.min(a[0],s[0],o[0],c[0]),m=Math.min(a[1],s[1],o[1],c[1]),b=u.externalPoses||[],x=Xa(t.state),w=[],S=[],T=[],I=[],N=[],O=Ka(x),P=O.width,k=O.height,D=O.top,R=O.left,z=O.bottom,L=O.right,B={left:R,right:L,top:D,bottom:z,center:(R+L)/2,middle:(D+z)/2},j=b.length>0,H=j?Ka(b):{};if(!u.request){if(u.direction&&N.push(Oxe(t,x,u.direction,h,h)),u.snap){var X=Ka(x);u.center&&(X.middle=(X.top+X.bottom)/2,X.center=(X.left+X.right)/2),N.push(i6(t,X,h,h))}j&&(u.center&&(H.middle=(H.top+H.bottom)/2,H.center=(H.left+H.right)/2),N.push(i6(t,H,h,h))),N.forEach(function(Z){var le=Z.vertical.posInfos,de=Z.horizontal.posInfos;w.push.apply(w,Ne([],ae(le.filter(function(ce){var he=ce.guidelineInfos;return he.some(function(ee){var Se=ee.guideline;return!Se.hide})}).map(function(ce){return{type:"snap",pos:ce.pos}})),!1)),S.push.apply(S,Ne([],ae(de.filter(function(ce){var he=ce.guidelineInfos;return he.some(function(ee){var Se=ee.guideline;return!Se.hide})}).map(function(ce){return{type:"snap",pos:ce.pos}})),!1)),T.push.apply(T,Ne([],ae(g6(le)),!1)),I.push.apply(I,Ne([],ae(g6(de)),!1))})}var q=m6(t,[R,L],[D,z],w,S),W=q.boundMap,J=q.innerBoundMap;j&&m6(t,[H.left,H.right],[H.top,H.bottom],w,S,u.externalBounds);var ne=Ne(Ne([],ae(T),!1),ae(I),!1),Y=ne.filter(function(Z){return Z.element&&!Z.gapRects}),U=ne.filter(function(Z){return Z.gapRects}).sort(function(Z,le){return Z.gap-le.gap});Ve(t,"onSnap",{guidelines:ne.filter(function(Z){var le=Z.element;return!le}),elements:Y,gaps:U},!0);var Q=jh(t,"boundMap",W,function(Z){return JSON.stringify(Z)},Rh()),K=jh(t,"innerBoundMap",J,function(Z){return JSON.stringify(Z)},Rh());return(W===Q||J===K)&&Ve(t,"onBound",{bounds:W,innerBounds:J},!0),Ne(Ne(Ne(Ne(Ne(Ne([],ae(Jxe(t,Y,[g,m],B,e)),!1),ae(e1e(t,U,[g,m],B,e)),!1),ae(f6(t,"horizontal",I,[i,r],B,e)),!1),ae(f6(t,"vertical",T,[i,r],B,e)),!1),ae(d6(t,"horizontal",S,g,r,P,0,e)),!1),ae(d6(t,"vertical",w,m,i,k,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},lx(t)},drag:function(t){var e=t.state;lx(t)||(e.guidelines=TP(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(h1e(t,e)||EP(t,e))return!0;if(!e.isRequest&&e.inputEvent)return wr(e.inputEvent.target,Xe("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,lx(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,lx(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function g1e(t,e){return[t[0]*e[0],t[1]*e[1]]}function Xe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return uye.apply(void 0,Ne([iN],ae(t),!1))}function FW(t){t()}function m1e(t){return!t||t==="none"?[1,0,0,1,0,0]:Ns(t)?t:Vv(t)}function iv(t,e,n){return X1(e,Qd(n,e),t,Qd(n.map(function(r){return-r}),e))}function v1e(t,e,n){if(e==="%"){var r=pN(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function y1e(t){var e=b1e(mN(t,":before"));return e.map(function(n,r){var i=M0(n),a=i.value,s=i.unit;return a*v1e(t,s,r===0)})}function nw(t){return t?t.split(" "):["0","0"]}function b1e(t){return nw(t.transformOrigin)}function UW(t){var e=Hi(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var s=[],o=function(u){var f=i[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(h){return f[h]}).join(", "),")"))},c=0;c<a;++c)o(c);return s.join(" ")}return""}function Fv(t,e,n,r,i){var a,s,o=KO(t)||Tu(t),c=!1,u,f;if(!t||n)u=t;else{var h=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,g=t.parentElement;h?(c=!0,f=g,u=h):u=g}for(var m=!1,b=t===e||u===e,x="relative",w=1,S=parseFloat(i?.("zoom"))||1,T=i?.("position");u&&u!==o;){e===u&&(b=!0);var I=Hi(u),N=u.tagName.toLowerCase(),O=UW(u),P=I("willChange"),k=parseFloat(I("zoom"))||1;if(x=I("position"),r&&k!==1){w=k;break}if(!n&&r&&S!==1&&T&&T!=="absolute"||N==="svg"||N==="foreignobject"||x!=="static"||O&&O!=="none"||P==="transform")break;var D=(s=t?.assignedSlot)===null||s===void 0?void 0:s.parentNode,R=u.parentNode;D&&(c=!0,f=R);var z=R;if(z&&z.nodeType===11){u=z.host,m=!0,x=Hi(u)("position");break}u=z,x="relative"}return{offsetZoom:w,hasSlot:c,parentSlotElement:f,isCustomElement:m,isStatic:x==="static",isEnd:b||!u||u===o,offsetParent:u||o}}function x1e(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,s=Hi(t),o=H_(i),c=!o,u,f;return!c&&(r!=="svg"||t.ownerSVGElement)?(u=oW?y1e(t):nw(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice(),c=!0,r==="svg"?(i=0,a=0):(n=ae(S1e(t,u,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],u[0]=n[2],u[1]=n[3])):(u=nw(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice()),{tagName:r,isSVG:o,hasOffset:c,offset:[i||0,a||0],origin:u,targetOrigin:f}}function $W(t,e){var n=Hi(t),r=Hi(Tu(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),s=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(s=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,s]}function AP(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=Rs(n,3,4))})}function w1e(t){for(var e=t.parentElement,n=!1,r=Tu(t);e;){var i=mN(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function rS(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(JK(t,!e).join(","),")")}function pN(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function _1e(t,e){var n,r=pN(t),i=r.width,a=r.height,s=r.clientWidth,o=r.clientHeight,c=s/i,u=o/a,f=t.preserveAspectRatio.baseVal,h=f.align,g=f.meetOrSlice,m=[0,0],b=[c,u],x=[0,0];if(h!==1){var w=(h-2)%3,S=Math.floor((h-2)/3);m[0]=i*w/2,m[1]=a*S/2;var T=g===2?Math.max(u,c):Math.min(c,u);b[0]=T,b[1]=T,x[0]=(s-i)/2*w,x[1]=(o-a)/2*S}var I=eN(b,e);return n=ae(x,2),I[e*(e-1)]=n[0],I[e*(e-1)+1]=n[1],iv(I,e,m)}function S1e(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=Hi(t),a=i("transform-box")==="fill-box",s=t.getBBox(),o=pN(t.ownerSVGElement),c=s.x,u=s.y;r==="foreignobject"&&!c&&!u&&(c=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var f=c-o.x,h=u-o.y,g=a?e[0]:e[0]-f,m=a?e[1]:e[1]-h;return[f,h,g,m]}function Nn(t,e,n){return di(t,Xd(e,n),n)}function mf(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return Nn(t,i,r)})}function Ka(t){var e=t.map(function(u){return u[0]}),n=t.map(function(u){return u[1]}),r=Math.min.apply(Math,Ne([],ae(e),!1)),i=Math.min.apply(Math,Ne([],ae(n),!1)),a=Math.max.apply(Math,Ne([],ae(e),!1)),s=Math.max.apply(Math,Ne([],ae(n),!1)),o=a-r,c=s-i;return{left:r,top:i,right:a,bottom:s,width:o,height:c}}function v6(t,e,n,r){var i=mf(t,e,n,r);return Ka(i)}function E1e(t,e,n,r,i){var a,s=t.target,o=t.origin,c=e.matrix,u=GW(s),f=u.offsetWidth,h=u.offsetHeight,g=n.getBoundingClientRect(),m=[0,0];n===Tu(n)&&(m=$W(s,!0));for(var b=s.getBoundingClientRect(),x=b.left-g.left+n.scrollLeft-(n.clientLeft||0)+m[0],w=b.top-g.top+n.scrollTop-(n.clientTop||0)+m[1],S=b.width,T=b.height,I=X1(r,i,c),N=v6(I,f,h,r),O=N.left,P=N.top,k=N.width,D=N.height,R=Nn(I,o,r),z=et(R,[O,P]),L=[x+z[0]*S/k,w+z[1]*T/D],B=[0,0],j=0;++j<10;){var H=ko(i,r);a=ae(et(Nn(H,L,r),Nn(H,R,r)),2),B[0]=a[0],B[1]=a[1];var X=X1(r,i,Qd(B,r),c),q=v6(X,f,h,r),W=q.left,J=q.top,ne=W-x,Y=J-w;if(Ae(ne)<2&&Ae(Y)<2)break;L[0]-=ne,L[1]-=Y}return B.map(function(U){return Math.round(U)})}function T1e(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(c){return Nn(t,c,i)}),s=n.left,o=n.top;return a.map(function(c){return[c[0]+s,c[1]+o]})}function Ya(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function qW(t,e){return Ya([e[0]-t[0],e[1]-t[1]])}function Mm(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Jn(t,e));var i=qW(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function rw(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(o,c){return o+c[0]},0)/i,s=n.reduce(function(o,c){return o+c[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Jd(t,e){var n=t[e];return Ns(n)?ie(ie({},t),n):t}function GW(t){var e=t&&!H_(t.offsetWidth),n=0,r=0,i=0,a=0,s=0,o=0,c=0,u=0,f=0,h=0,g=0,m=0,b=1/0,x=1/0,w=1/0,S=1/0,T=0,I=0,N=!1;if(t)if(!e&&t.ownerSVGElement){var O=t.getBBox();N=!0,n=O.width,r=O.height,s=n,o=r,c=n,u=r,i=n,a=r}else{var P=Hi(t),k=t.style,D=P("boxSizing")==="border-box",R=parseFloat(P("borderLeftWidth"))||0,z=parseFloat(P("borderRightWidth"))||0,L=parseFloat(P("borderTopWidth"))||0,B=parseFloat(P("borderBottomWidth"))||0,j=parseFloat(P("paddingLeft"))||0,H=parseFloat(P("paddingRight"))||0,X=parseFloat(P("paddingTop"))||0,q=parseFloat(P("paddingBottom"))||0,W=j+H,J=X+q,ne=R+z,Y=L+B,U=W+ne,Q=J+Y,K=P("position"),Z=0,le=0;if("clientLeft"in t){var de=null;if(K==="absolute"){var ce=Fv(t,Tu(t));de=ce.offsetParent}else de=t.parentElement;if(de){var he=Hi(de);Z=parseFloat(he("width")),le=parseFloat(he("height"))}}f=Math.max(W,an(P("minWidth"),Z)||0),h=Math.max(J,an(P("minHeight"),le)||0),b=an(P("maxWidth"),Z),x=an(P("maxHeight"),le),isNaN(b)&&(b=1/0),isNaN(x)&&(x=1/0),T=an(k.width,0)||0,I=an(k.height,0)||0,s=parseFloat(P("width"))||0,o=parseFloat(P("height"))||0,c=Ae(s-T)<1?aP(f,T||s,b):s,u=Ae(o-I)<1?aP(h,I||o,x):o,n=c,r=u,i=c,a=u,D?(w=b,S=x,g=f,m=h,c=n-U,u=r-Q):(w=b+U,S=x+Q,g=f+U,m=h+Q,n=c+U,r=u+Q),i=c+W,a=u+J}return{svg:N,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:c,contentHeight:u,inlineCSSWidth:T,inlineCSSHeight:I,cssWidth:s,cssHeight:o,minWidth:f,minHeight:h,maxWidth:b,maxHeight:x,minOffsetWidth:g,minOffsetHeight:m,maxOffsetWidth:w,maxOffsetHeight:S}}function HW(t,e){return Jn(e>0?t[0]:t[1],e>0?t[1]:t[0])}function cx(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function KW(t,e){var n=t===Tu(t)||t===KO(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Hi(t)("overflow")!=="visible",ie(ie({},e),r)}function sC(t,e,n,r){var i=t.left,a=t.right,s=t.top,o=t.bottom,c=e.top,u=e.left,f={left:u+i,top:c+s,right:u+a,bottom:c+o,width:a-i,height:o-s};return n&&r?KW(n,f):f}function av(t,e){var n=0,r=0,i=0,a=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,i=s.width,a=s.height}var o={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?KW(t,o):o}function A1e(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,s=i.offsetHeight,o=i.svg,c=i.transformOrigin;return!n&&o&&r?xN(r,a,s):c}function WW(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=YW(a,r)}return i}function YW(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function gN(t,e){return[Rt(e,t[0]),Rt(e,t[1]),Rt(e,t[2]),Rt(e,t[3])]}function Xa(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,s=t.pos4;return gN([r,i,a,s],[e,n])}function CP(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function Mh(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&CP(t,e),r?.unset(),t[n]=null}function Si(t,e){if(e){var n=Qp(e);n.nextStyle=ie(ie({},n.nextStyle),t)}return{style:t,cssText:Ol(t).map(function(r){return"".concat(t1(r,"-"),": ").concat(t[r],";")}).join("")}}function XW(t,e,n){var r=e.afterTransform||e.transform;return ie(ie({},Si(ie(ie(ie({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function gt(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=ie(ie({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function va(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),ie(ie({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function iS(t,e,n){t._emitter.on(e,n)}function Ve(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function mN(t,e){return nu(t).getComputedStyle(t,e)}function ux(t,e,n){var r={},i={};return t.filter(function(a){var s=a.name;if(r[s]||!e.some(function(o){return a[o]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[s]=!0,!0})}function IP(t,e){return t===e||t==null&&e==null}function y6(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!H_(i))return i}return t[n]}function QW(t,e){var n=[],r=[];return t.forEach(function(i,a){var s=e(i,a,t),o=r.indexOf(s),c=n[o]||[];o===-1&&(r.push(s),n.push(c)),c.push(i)}),n}function C1e(t,e){var n=[],r={};return t.forEach(function(i,a){var s=e(i,a,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(i)}),n}function ZW(t){return t.reduce(function(e,n){return e.concat(n)},[])}function bp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Ae(r)-Ae(n)}),t[0]}function xp(t,e,n){return di(ko(t,n),Xd(e,n),n)}function I1e(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=ae(xp(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function ja(t,e,n,r){if(!n[0]&&!n[1])return e;var i=Nn(t,[p6(n[0]||1),0],r),a=Nn(t,[0,p6(n[1]||1)],r),s=Nn(t,[n[0]/Ya(i),n[1]/Ya(a)],r);return Rt(e,s)}function xs(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function iw(t){return Ae(t)<=Ai?0:t}function vN(t){return function(e){if(!e.isDragging(t))return"";var n=vxe(e,t),r=n.deg;return r?Xe("view-control-rotation".concat(r)):""}}function yN(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return wr(i,Xe("direction"))&&(!t||wr(i,Xe(t)))}}function k1e(t,e,n){var r,i=mp(t,{"x%":function(O){return O/100*e.offsetWidth},"y%":function(O){return O/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),s=t.slice(0,n<0?void 0:n+1),o=t[n]||"",c=n<0?[]:t.slice(n),u=n<0?[]:t.slice(n+1),f=i.slice(0,n<0?void 0:n),h=i.slice(0,n<0?void 0:n+1),g=(r=i[n])!==null&&r!==void 0?r:mp([""])[0],m=n<0?[]:i.slice(n),b=n<0?[]:i.slice(n+1),x=g?[g]:[],w=Sh(f),S=Sh(h),T=Sh(m),I=Sh(b),N=on(w,T,4);return{transforms:t,beforeFunctionMatrix:w,beforeFunctionMatrix2:S,targetFunctionMatrix:Sh(x),afterFunctionMatrix:T,afterFunctionMatrix2:I,allFunctionMatrix:N,beforeFunctions:f,beforeFunctions2:h,targetFunction:x[0],afterFunctions:m,afterFunctions2:b,beforeFunctionTexts:a,beforeFunctionTexts2:s,targetFunctionText:o,afterFunctionTexts:c,afterFunctionTexts2:u}}function P1e(t){return!t||!Ns(t)||Yp(t)?!1:gr(t)||"length"in t}function Eo(t,e){return t?Yp(t)?t:qi(t)?e?document.querySelector(t):t:qO(t)?t():DK(t)?t:"current"in t?t.current:t:null}function bN(t,e){if(!t)return[];var n=P1e(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return qi(i)&&e?Ne(Ne([],ae(r),!1),ae([].slice.call(document.querySelectorAll(i))),!1):(gr(i)?r.push(bN(i,e)):r.push(Eo(i,e)),r)},[])}function D1e(t,e,n){var r=Jn(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function b6(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=ko(n,i);return r||(a=Rs(a,3,4)),a[12]=0,a[13]=0,a[14]=0,pbe(a,e)}function JW(t,e,n,r,i){var a=ae(t,2),s=a[0],o=a[1],c=0,u=0;if(i&&s&&o){var f=Jn([0,0],e),h=Jn([0,0],r),g=Ya(e),m=Math.cos(f-h)*g;if(!r[0])u=m,c=u*n;else if(!r[1])c=m,u=c/n;else{var b=r[0]*s,x=r[1]*o,w=Math.atan2(b+e[0],x+e[1]),S=Math.atan2(b,x);w<0&&(w+=Math.PI*2),S<0&&(S+=Math.PI*2);var T=0;Ae(w-S)<Math.PI/2||Ae(w-S)>Math.PI/2*3||(S+=Math.PI),T=w-S,T>Math.PI*2?T-=Math.PI*2:T>Math.PI?T=2*Math.PI-T:T<-Math.PI&&(T=-2*Math.PI-T);var I=Ya([b+e[0],x+e[1]])*Math.cos(T);c=I*Math.sin(S)-b,u=I*Math.cos(S)-x,r[0]<0&&(c*=-1),r[1]<0&&(u*=-1)}}else c=r[0]*e[0],u=r[1]*e[1];return[c,u]}function eY(t,e,n,r){var i,a=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,c=0,u=0,f=r.distX,h=r.distY,g=r.pinchScale,m=r.parentDistance,b=r.parentDist,x=r.parentScale,w=n.fixedDirection,S=[0,1].map(function(k){return Ae(t[k]-w[k])}),T=[0,1].map(function(k){var D=S[k];return D!==0&&(D=2/D),D});if(b)c=b[0],u=b[1],e&&(c?u||(u=c/a):c=u*a);else if(gp(g))c=(g-1)*s,u=(g-1)*o;else if(x)c=(x[0]-1)*s,u=(x[1]-1)*o;else if(m){var I=s*S[0],N=o*S[1],O=Ya([I,N]);c=m/O*I*T[0],u=m/O*N*T[1]}else{var P=Mo({datas:n,distX:f,distY:h});P=T.map(function(k,D){return P[D]*k}),i=ae(JW([s,o],P,a,t,e),2),c=i[0],u=i[1]}return{distWidth:c,distHeight:u}}function kP(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=ae(t.split(" "),2),r=n[0],i=n[1],a=kP(r||""),s=kP(i||""),o=ie(ie({},a),s),c={x:"50%",y:"50%"};return o.x&&(c.x=o.x),o.y&&(c.y=o.y),o.value&&(o.x&&!o.y&&(c.y=o.value),!o.x&&o.y&&(c.x=o.value)),c}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function xN(t,e,n){var r=kP(t,!0),i=r.x,a=r.y;return[an(i,e)||0,an(a,n)||0]}function O1e(t,e,n){var r=t.map(function(a){return et(a,e)}),i=r.map(function(a){return V0(a,n)});return{prev:r,next:i,result:i.map(function(a){return Rt(a,e)})}}function tY(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=gr(n),s=gr(i);return a&&s?tY(n,i):!a&&!s?n===i:!1})}function jh(t,e,n,r,i){var a=t._store,s=a[e];if(!(e in a))if(i!=null)a[e]=i,s=i;else return a[e]=n,n;return s===n||r(s)===r(n)?s:(a[e]=n,n)}function xi(t){return t>=0?1:-1}function Ae(t){return Math.abs(t)}function oC(t,e){return Cye(t).map(function(n){return e(n)})}function nY(t){return gp(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var N1e=U0("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,s=t.props,o=s.pinchable,c=s.ables;if(!o)return!1;var u="onPinch".concat(r?"Group":"","Start"),f="drag".concat(r?"Group":"","ControlStart"),h=(o===!0?t.controlAbles:c.filter(function(x){return o.indexOf(x.name)>-1})).filter(function(x){return x.canPinch&&x[f]}),g=gt(t,e,{});r&&(g.targets=r);var m=Ve(t,u,g);n.isPinch=m!==!1,n.ables=h;var b=n.isPinch;return b?(h.forEach(function(x){if(a[x.name]=a[x.name]||{},!!x[f]){var w=ie(ie({},e),{datas:a[x.name],parentRotate:i,isPinch:!0});x[f](t,w)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},b):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,s=e.inputEvent,o=e.targets,c=e.angle;if(n.isPinch){var u=i*(1-1/r),f=gt(t,e,{});o&&(f.targets=o);var h="onPinch".concat(o?"Group":"");Ve(t,h,f);var g=n.ables,m="drag".concat(o?"Group":"","Control");return g.forEach(function(b){b[m]&&b[m](t,ie(ie({},e),{datas:a[b.name],inputEvent:s,resolveMatrix:!0,pinchScale:r,parentDistance:u,parentRotate:c,isPinch:!0}))}),f}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(a?"Group":"","End"),c=va(t,e,{isDrag:r});a&&(c.targets=a),Ve(t,o,c);var u=n.ables,f="drag".concat(a?"Group":"","ControlEnd");return u.forEach(function(h){h[f]&&h[f](t,ie(ie({},e),{isDrag:r,datas:s[h.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,ie(ie({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,ie(ie({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,ie(ie({},e),{targets:t.props.targets}))}}),x6=yN("scalable"),R1e={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:_W("scalable"),dragControlCondition:x6,viewClassName:vN("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,s=WW(a,r,i,n),o=t.state,c=o.width,u=o.height,f=o.targetTransform,h=o.target,g=o.pos1,m=o.pos2,b=o.pos4;if(!s||!h)return!1;r||gf(t,e),n.datas={},n.transform=f,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=c,n.startOffsetHeight=u,n.startValue=[1,1];var x=!s[0]&&!s[1]||s[0]||!s[1];J_(t,e,"scale"),n.isWidth=x;function w(P){n.ratio=P&&isFinite(P)?P:0}n.startPositions=Xa(t.state);function S(P){var k=RW(n.startPositions,P);n.fixedDirection=k.fixedDirection,n.fixedPosition=k.fixedPosition,n.fixedOffset=k.fixedOffset}n.setFixedDirection=S,w(yl(g,m)/yl(m,b)),S([-s[0],-s[1]]);var T=function(P){n.minScaleSize=P},I=function(P){n.maxScaleSize=P};T([-1/0,-1/0]),I([1/0,1/0]);var N=gt(t,e,ie(ie({direction:s,set:function(P){n.startValue=P},setRatio:w,setFixedDirection:S,setMinScaleSize:T,setMaxScaleSize:I},Z_(t,e)),{dragStart:bi.dragStart(t,new vp().dragStart([0,0],e))})),O=Ve(t,"onScaleStart",N);return n.startFixedDirection=n.fixedDirection,O!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?N:!1},dragControl:function(t,e){X_(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,s=e.dragClient,o=e.isRequest,c=e.useSnap,u=e.resolveMatrix,f=n.prevDist,h=n.direction,g=n.startOffsetWidth,m=n.startOffsetHeight,b=n.isScale,x=n.startValue,w=n.isWidth,S=n.ratio;if(!b)return!1;var T=t.props,I=T.throttleScale,N=T.parentMoveable,O=h;!h[0]&&!h[1]&&(O=[1,1]);var P=S&&(r??T.keepRatio)||!1,k=t.state,D=[x[0],x[1]];function R(){var re=eY(O,P,n,e),oe=re.distWidth,De=re.distHeight,Pe=g?(g+oe)/g:1,ze=m?(m+De)/m:1;x[0]||(D[0]=oe/g),x[1]||(D[1]=De/m);var je=(O[0]||P?Pe:1)*D[0],Ue=(O[1]||P?ze:1)*D[1];return je===0&&(je=xi(f[0])*ax),Ue===0&&(Ue=xi(f[1])*ax),[je,Ue]}var z=R();if(!a&&t.props.groupable){var L=k.snapRenderInfo||{},B=L.direction;gr(B)&&(B[0]||B[1])&&(k.snapRenderInfo={direction:h,request:e.isRequest})}Ve(t,"onBeforeScale",gt(t,e,{scale:z,setFixedDirection:function(re){return n.setFixedDirection(re),z=R(),z},startFixedDirection:n.startFixedDirection,setScale:function(re){z=re}},!0));var j=[z[0]/D[0],z[1]/D[1]],H=s,X=[0,0],q=xi(j[0]*j[1]),W=!s&&!i&&a;if(W||u?H=oN(t,n.targetAllTransform,[0,0],[0,0],n):s||(H=n.fixedPosition),a||(X=d1e(t,j,h,!c&&o,n)),P){O[0]&&O[1]&&X[0]&&X[1]&&(Math.abs(X[0]*g)>Math.abs(X[1]*m)?X[1]=0:X[0]=0);var J=!X[0]&&!X[1];if(J&&(w?j[0]=ut(j[0]*D[0],I)/D[0]:j[1]=ut(j[1]*D[1],I)/D[1]),O[0]&&!O[1]||X[0]&&!X[1]||J&&w){j[0]+=X[0];var ne=g*j[0]*D[0]/S;j[1]=xi(q*j[0])*Ae(ne/m/D[1])}else if(!O[0]&&O[1]||!X[0]&&X[1]||J&&!w){j[1]+=X[1];var Y=m*j[1]*D[1]*S;j[0]=xi(q*j[1])*Ae(Y/g/D[0])}}else j[0]+=X[0],j[1]+=X[1],X[0]||(j[0]=ut(j[0]*D[0],I)/D[0]),X[1]||(j[1]=ut(j[1]*D[1],I)/D[1]);j[0]===0&&(j[0]=xi(f[0])*ax),j[1]===0&&(j[1]=xi(f[1])*ax),z=g1e(j,[D[0],D[1]]);var U=[g,m],Q=[g*z[0],m*z[1]];Q=AK(Q,n.minScaleSize,n.maxScaleSize,P?S:!1),z=oC(2,function(re){return U[re]?Q[re]/U[re]:Q[re]}),j=oC(2,function(re){return z[re]/D[re]});var K=oC(2,function(re){return f[re]?j[re]/f[re]:j[re]}),Z="scale(".concat(j.join(", "),")"),le="scale(".concat(z.join(", "),")"),de=Q_(n,le,Z),ce=!x[0]||!x[1],he=dxe(t,ce?le:Z,n.fixedDirection,H,n.fixedOffset,n,ce),ee=W?he:et(he,n.prevInverseDist||[0,0]);if(n.prevDist=j,n.prevInverseDist=he,z[0]===f[0]&&z[1]===f[1]&&ee.every(function(re){return!re})&&!N&&!W)return!1;var Se=gt(t,e,ie({offsetWidth:g,offsetHeight:m,direction:h,scale:z,dist:j,delta:K,isPinch:!!a},mW(t,de,ee,a,e)));return Ve(t,"onScale",Se),Se},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=va(t,e,{});return Ve(t,"onScaleEnd",r),r},dragGroupControlCondition:x6,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=Is(t,"resizable",e);n.moveableScale=t.scale;var a=bl(t,this,"dragControlStart",e,function(u,f){return J1(t,u,n,f)}),s=function(u){r.setFixedDirection(u),a.forEach(function(f,h){f.setFixedDirection(u),J1(t,f.moveable,n,i[h])})};n.setFixedDirection=s;var o=ie(ie({},r),{targets:t.props.targets,events:a,setFixedDirection:s}),c=Ve(t,"onScaleGroupStart",o);return n.isScale=c!==!1,n.isScale?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){iS(t,"onBeforeScale",function(f){Ve(t,"onBeforeScaleGroup",gt(t,e,ie(ie({},f),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var s=t.props.keepRatio,o=n.fixedPosition,c=bl(t,this,"dragControl",e,function(f,h){var g=ae(di(B0(t.rotation/180*Math.PI,3),[h.datas.originalX*i[0],h.datas.originalY*i[1],1],3),2),m=g[0],b=g[1];return ie(ie({},h),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:Rt(o,[m,b])})}),u=ie({targets:t.props.targets,events:c},r);return Ve(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=bl(t,this,"dragControlEnd",e),a=va(t,e,{targets:t.props.targets,events:i});return Ve(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function Oc(t,e){return t.map(function(n,r){return W1(n,e[r],1,2)})}function w6(t,e,n){var r=Jn(t,e),i=Jn(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function M1e(t,e){var n=w6(t[0],t[1],t[2]),r=w6(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var j1e={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:vN("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,s=n.zoom;if(r||i||!a)return[];var o=t.state,c=o.pos1,u=o.pos2,f=o.pos3,h=o.pos4,g=Oc(c,u),m=Oc(u,c),b=Oc(c,f),x=Oc(f,c),w=Oc(f,h),S=Oc(h,f),T=Oc(u,h),I=Oc(h,u);return Ne([e.createElement("div",{className:Xe("line"),key:"middeLine1",style:Mm(g,w,s)}),e.createElement("div",{className:Xe("line"),key:"middeLine2",style:Mm(m,S,s)}),e.createElement("div",{className:Xe("line"),key:"middeLine3",style:Mm(b,T,s)}),e.createElement("div",{className:Xe("line"),key:"middeLine4",style:Mm(x,I,s)})],ae(SW(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return wr(n,Xe("direction"))&&wr(n,Xe("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,s=YW(a,n);if(!s||!i)return!1;var o=t.state,c=o.transformOrigin,u=o.is3d,f=o.targetTransform,h=o.targetMatrix,g=o.width,m=o.height,b=o.left,x=o.top;n.datas={},n.targetTransform=f,n.warpTargetMatrix=u?h:Rs(h,3,4),n.targetInverseMatrix=QK(ko(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=b,n.top=x,n.poses=[[0,0],[g,0],[0,m],[g,m]].map(function(T){return et(T,c)}),n.nextPoses=n.poses.map(function(T){var I=ae(T,2),N=I[0],O=I[1];return di(n.warpTargetMatrix,[N,O,0,1],4)}),n.startValue=vn(4),n.prevMatrix=vn(4),n.absolutePoses=Xa(o),n.posIndexes=gW(s),gf(t,e),J_(t,e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var w=gt(t,e,ie({set:function(T){n.startValue=T}},Z_(t,e))),S=Ve(t,"onWarpStart",w);return S!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,c=n.isWarp,u=n.startValue,f=n.poses,h=n.posIndexes,g=n.absolutePoses;if(!c)return!1;if(X_(t,e,"matrix3d"),Zp(t,"warpable")){var m=h.map(function(R){return g[R]});m.length>1&&m.push([(m[0][0]+m[1][0])/2,(m[0][1]+m[1][1])/2]);var b=nS(t,r,{horizontal:m.map(function(R){return R[1]+a}),vertical:m.map(function(R){return R[0]+i})}),x=b.horizontal,w=b.vertical;a-=x.offset,i-=w.offset}var S=Mo({datas:n,distX:i,distY:a},!0),T=n.nextPoses.slice();if(h.forEach(function(R){T[R]=Rt(T[R],S)}),!txe.every(function(R){return M1e(R.map(function(z){return f[z]}),R.map(function(z){return T[z]}))}))return!1;var I=tN(f[0],f[2],f[1],f[3],T[0],T[2],T[1],T[3]);if(!I.length)return!1;var N=on(s,I,4),O=hW(n,N,!0),P=on(ko(o,4),O,4);n.prevMatrix=O;var k=on(u,O,4),D=Q_(n,"matrix3d(".concat(k.join(", "),")"),"matrix3d(".concat(O.join(", "),")"));return sN(e,D),Ve(t,"onWarp",gt(t,e,ie({delta:P,matrix:k,dist:O,multiply:on,transform:D},Si({transform:D},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Ve(t,"onWarpEnd",va(t,e,{})),r):!1}},z1e=Xe("area-pieces"),dx=Xe("area-piece"),rY=Xe("avoid"),L1e=Xe("view-dragging");function lC(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;PK(e,rY),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function _6(t){return t.createElement("div",{key:"area_pieces",className:z1e},t.createElement("div",{className:dx}),t.createElement("div",{className:dx}),t.createElement("div",{className:dx}),t.createElement("div",{className:dx}))}var iY={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,s=n.passDragArea,o=t.getState(),c=o.width,u=o.height,f=o.renderPoses,h=s?Xe("area","pass"):Xe("area");if(a)return[e.createElement("div",{key:"area",ref:vl(t,"areaElement"),className:h}),_6(e)];if(!r||!i)return[];var g=tN([0,0],[c,0],[0,u],[c,u],f[0],f[1],f[2],f[3]),m=g.length?rS(g,!0):"none";return[e.createElement("div",{key:"area",ref:vl(t,"areaElement"),className:h,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:m}}),_6(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,c=o.moveableClientRect,u=o.renderPoses,f=o.rootMatrix,h=o.is3d,g=c.left,m=c.top,b=Ka(u),x=b.left,w=b.top,S=b.width,T=b.height,I=h?4:3,N=ae(xp(f,[r-g,i-m],I),2),O=N[0],P=N[1];O-=x,P-=w;var k=[{left:x,top:w,width:S,height:P-10},{left:x,top:w,width:O-10,height:T},{left:x,top:w+P+10,width:S,height:T-P-10},{left:x+O+10,top:w,width:S-O-10,height:T}],D=[].slice.call(s.nextElementSibling.children);k.forEach(function(R,z){D[z].style.cssText="left: ".concat(R.left,"px;top: ").concat(R.top,"px; width: ").concat(R.width,"px; height: ").concat(R.height,"px;")}),kK(s,rY),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,lC(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||lC(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){lC(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&TK(function(){e.disableNativeEvent=!1})}},V1e=U0("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,s=t.getState(),o=s.beforeOrigin,c=s.rotation,u=s.svg,f=s.allMatrix,h=s.is3d,g=s.left,m=s.top,b=s.offsetWidth,x=s.offsetHeight,w;if(!a&&u&&i){var S=ae(xN(i,b,x),2),T=S[0],I=S[1],N=h?4:3,O=Nn(f,[T,I],N);w=rw(c,r,et(O,[g,m]))}else w=rw(c,r,o);return[e.createElement("div",{className:Xe("control","origin"),style:w,key:"beforeOrigin"})]}});function B1e(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var F1e={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,s=new xbe,o=Eo(i,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var c=e.isControl?"controlGesto":"targetGesto",u=e.targets;s.on("scroll",function(f){var h=f.container,g=f.direction,m=gt(t,e,{scrollContainer:h,direction:g}),b=u?"onScrollGroup":"onScroll";u&&(m.targets=u),Ve(t,b,m)}).on("move",function(f){var h=f.offsetX,g=f.offsetY,m=f.inputEvent;t[c].scrollBy(h,g,m.inputEvent,!1)}).on("scrollDrag",function(f){var h=f.next;h(t[c].getCurrentEvent())}),s.dragStart(e,ie({container:o},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,s=r.scrollThreshold,o=s===void 0?0:s,c=r.scrollThrottleTime,u=c===void 0?0:c,f=r.getScrollPosition,h=f===void 0?B1e:f,g=r.scrollOptions;return n.drag(e,ie({container:a,threshold:o,throttleTime:u,getScrollPosition:function(m){return h({scrollContainer:m.container,direction:m.direction})}},g)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,ie(ie({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,ie(ie({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,ie(ie({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,ie(ie({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,ie(ie({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,ie(ie({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,ie(ie({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},aY={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},U1e=U0("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=nY(n.padding||{}),i=r.left,a=r.top,s=r.right,o=r.bottom,c=t.getState(),u=c.renderPoses,f=c.pos1,h=c.pos2,g=c.pos3,m=c.pos4,b=[f,h,g,m],x=[];return i>0&&x.push([0,2]),a>0&&x.push([0,1]),s>0&&x.push([1,3]),o>0&&x.push([2,3]),x.map(function(w,S){var T=ae(w,2),I=T[0],N=T[1],O=b[I],P=b[N],k=u[I],D=u[N],R=tN([0,0],[100,0],[0,100],[100,100],O,P,k,D);if(R.length)return e.createElement("div",{key:"padding".concat(S),className:Xe("padding"),style:{transform:rS(R,!0)}})})}}),S6=["nw","ne","se","sw"];function fx(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var $1e=[1,2,5,6],q1e=[0,3,4,7],yd=[1,-1,-1,1],bd=[1,1,-1,-1];function wN(t,e,n,r,i,a,s,o){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=n),o===void 0&&(o=r);var c=[],u=!1,f=t.filter(function(g){return!g.virtual}),h=f.map(function(g){var m=g.horizontal,b=g.vertical,x=g.pos;if(b&&!u&&(u=!0,c.push("/")),u){var w=Math.max(0,b===1?x[1]-a:o-x[1]);return c.push(xs(w,r,e)),w}else{var w=Math.max(0,m===1?x[0]-i:s-x[0]);return c.push(xs(w,n,e)),w}});return{radiusPoses:f,styles:c,raws:h}}function sY(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function oY(t,e,n,r,i,a,s){var o,c,u,f;a===void 0&&(a=[0,0]),s===void 0&&(s=!1);var h=t.indexOf("/"),g=(h>-1?t.slice(0,h):t).length,m=t.slice(0,g),b=t.slice(g+1),x=m.length,w=b.length,S=w>0,T=ae(m,4),I=T[0],N=I===void 0?"0px":I,O=T[1],P=O===void 0?N:O,k=T[2],D=k===void 0?N:k,R=T[3],z=R===void 0?P:R,L=ae(b,4),B=L[0],j=B===void 0?N:B,H=L[1],X=H===void 0?S?j:P:H,q=L[2],W=q===void 0?S?j:D:q,J=L[3],ne=J===void 0?S?X:z:J,Y=[N,P,D,z].map(function(de){return an(de,e)}),U=[j,X,W,ne].map(function(de){return an(de,n)}),Q=Y.slice(),K=U.slice();o=ae(fx([Q[0],Q[1]],e),2),Q[0]=o[0],Q[1]=o[1],c=ae(fx([Q[3],Q[2]],e),2),Q[3]=c[0],Q[2]=c[1],u=ae(fx([K[0],K[3]],n),2),K[0]=u[0],K[3]=u[1],f=ae(fx([K[1],K[2]],n),2),K[1]=f[0],K[2]=f[1];var Z=s?Q:Q.slice(0,Math.max(a[0],x)),le=s?K:K.slice(0,Math.max(a[1],w));return Ne(Ne([],ae(Z.map(function(de,ce){var he=S6[ce];return{virtual:ce>=x,horizontal:yd[ce],vertical:0,pos:[r+de,i+(bd[ce]===-1?n:0)],sub:!0,raw:Y[ce],direction:he}})),!1),ae(le.map(function(de,ce){var he=S6[ce];return{virtual:ce>=w,horizontal:0,vertical:bd[ce],pos:[r+(yd[ce]===-1?e:0),i+de],sub:!0,raw:U[ce],direction:he}})),!1)}function G1e(t,e,n,r,i){i===void 0&&(i=e.length);var a=sY(t.slice(r)),s=a.horizontalRange,o=a.verticalRange,c=n-r,u=0;if(c===0)u=i;else if(c>0&&c<s[1])u=s[1]-c;else if(c>=o[0])u=o[0]+o[1]-c;else return;t.splice(n,u),e.splice(n,u)}function H1e(t,e,n,r,i,a,s,o,c,u,f){u===void 0&&(u=0),f===void 0&&(f=0);var h=sY(t.slice(n)),g=h.horizontalRange,m=h.verticalRange;if(r>-1)for(var b=yd[r]===1?a-u:o-a,x=g[1];x<=r;++x){var w=bd[x]===1?f:c,S=0;if(r===x?S=a:x===0?S=u+b:yd[x]===-1&&(S=o-(e[n][0]-u)),t.splice(n+x,0,{horizontal:yd[x],vertical:0,pos:[S,w]}),e.splice(n+x,0,[S,w]),x===0)break}else if(i>-1){var T=bd[i]===1?s-f:c-s;if(g[1]===0&&m[1]===0){var I=[u+T,f];t.push({horizontal:yd[0],vertical:0,pos:I}),e.push(I)}for(var N=m[0],x=m[1];x<=i;++x){var S=yd[x]===1?u:o,w=0;if(i===x?w=s:x===0?w=f+T:bd[x]===1?w=e[n+N][1]:bd[x]===-1&&(w=c-(e[n+N][1]-f)),t.push({horizontal:0,vertical:bd[x],pos:[S,w]}),e.push([S,w]),x===0)break}}}function K1e(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var W1e=[[0,-1,"n"],[1,0,"e"]],Y1e=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function _N(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,s=i.height,o=e,c=o.type,u=o.poses,f=c==="rect",h=c==="circle";if(c==="polygon")return n.map(function(P){return"".concat(xs(P[0],a,r)," ").concat(xs(P[1],s,r))});if(f||c==="inset"){var g=n[1][1],m=n[3][0],b=n[7][0],x=n[5][1];if(f)return[g,m,x,b].map(function(P){return"".concat(P,"px")});var w=[g,a-m,s-x,b].map(function(P,k){return xs(P,k%2?a:s,r)});if(n.length>8){var S=ae(et(n[4],n[0]),2),T=S[0],I=S[1];w.push.apply(w,Ne(["round"],ae(wN(u.slice(8).map(function(P,k){return ie(ie({},P),{pos:n[k]})}),r,T,I,b,g,m,x).styles),!1))}return w}else if(h||c==="ellipse"){var N=n[0],O=xs(Ae(n[1][1]-N[1]),h?Math.sqrt((a*a+s*s)/2):s,r),w=h?[O]:[xs(Ae(n[2][0]-N[0]),a,r),O];return w.push("at",xs(N[0],a,r),xs(N[1],s,r)),w}}function aw(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return Y1e.map(function(s){var o=ae(s,3),c=o[0],u=o[1],f=o[2],h=i[c+1],g=a[u+1];return{vertical:Ae(u),horizontal:Ae(c),direction:f,pos:[h,g]}})}function lY(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[Ae(e[1]-e[0]),Ae(n[1]-n[0])]}function E6(t,e,n,r,i){var a,s,o,c,u,f,h,g,m;if(t){var b=i;if(!b){var x=Hi(t),w=x("clipPath");b=w!=="none"?w:x("clip")}if(!((!b||b==="none"||b==="auto")&&(b=r,!b))){var S=EK(b),T=S.prefix,I=T===void 0?b:T,N=S.value,O=N===void 0?"":N,P=I==="circle",k=" ";if(I==="polygon"){var D=Ed(O||"0% 0%, 100% 0%, 100% 100%, 0% 100%");k=",";var R=D.map(function(yt){var Dt=ae(yt.split(" "),2),Nt=Dt[0],ot=Dt[1];return{vertical:1,horizontal:1,pos:[an(Nt,e),an(ot,n)]}}),z=Zd(R.map(function(yt){return yt.pos}));return{type:I,clipText:b,poses:R,splitter:k,left:z.minX,right:z.maxX,top:z.minY,bottom:z.maxY}}else if(P||I==="ellipse"){var L="",B="",j=0,H=0,D=fu(O);if(P){var X="";a=ae(D,4),s=a[0],X=s===void 0?"50%":s,o=a[2],L=o===void 0?"50%":o,c=a[3],B=c===void 0?"50%":c,j=an(X,Math.sqrt((e*e+n*n)/2)),H=j}else{var q="",W="";u=ae(D,5),f=u[0],q=f===void 0?"50%":f,h=u[1],W=h===void 0?"50%":h,g=u[3],L=g===void 0?"50%":g,m=u[4],B=m===void 0?"50%":m,j=an(q,e),H=an(W,n)}var J=[an(L,e),an(B,n)],R=Ne([{vertical:1,horizontal:1,pos:J,direction:"nesw"}],ae(W1e.slice(0,P?1:2).map(function(Nt){return{vertical:Ae(Nt[1]),horizontal:Nt[0],direction:Nt[2],sub:!0,pos:[J[0]+Nt[0]*j,J[1]+Nt[1]*H]}})),!1);return{type:I,clipText:b,radiusX:j,radiusY:H,left:J[0]-j,top:J[1]-H,right:J[0]+j,bottom:J[1]+H,poses:R,splitter:k}}else if(I==="inset"){var D=fu(O||"0 0 0 0"),ne=D.indexOf("round"),Y=(ne>-1?D.slice(0,ne):D).length,U=D.slice(Y+1),Q=ae(D.slice(0,Y),4),K=Q[0],Z=Q[1],le=Z===void 0?K:Z,de=Q[2],ce=de===void 0?K:de,he=Q[3],ee=he===void 0?le:he,Se=ae([K,ce].map(function(Nt){return an(Nt,n)}),2),re=Se[0],oe=Se[1],De=ae([ee,le].map(function(Nt){return an(Nt,e)}),2),Pe=De[0],ze=De[1],je=e-ze,Ue=n-oe,Ie=oY(U,je-Pe,Ue-re,Pe,re),R=Ne(Ne([],ae(aw(re,je,Ue,Pe)),!1),ae(Ie),!1);return{type:"inset",clipText:b,poses:R,top:re,left:Pe,right:je,bottom:Ue,radius:U,splitter:k}}else if(I==="rect"){var D=Ed(O||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));k=",";var Oe=ae(D.map(function(ft){var xn=M0(ft).value;return xn}),4),Ge=Oe[0],ze=Oe[1],oe=Oe[2],Pe=Oe[3],R=aw(Ge,ze,oe,Pe);return{type:"rect",clipText:b,poses:R,top:Ge,right:ze,bottom:oe,left:Pe,values:D,splitter:k}}}}}function X1e(t,e,n,r,i){var a=t[e],s=a.direction,o=a.sub,c=t.map(function(){return[0,0]}),u=s?s.split(""):[];if(r&&e<8){var f=u.filter(function(j){return j==="w"||j==="e"}),h=u.filter(function(j){return j==="n"||j==="s"}),g=f[0],m=h[0];c[e]=n;var b=ae(lY(t),2),x=b[0],w=b[1],S=x&&w?x/w:0;if(S&&i){var T=(e+4)%8,I=t[T].pos,N=[0,0];s.indexOf("w")>-1?N[0]=-1:s.indexOf("e")>-1&&(N[0]=1),s.indexOf("n")>-1?N[1]=-1:s.indexOf("s")>-1&&(N[1]=1);var O=JW([x,w],n,S,N,!0),P=x+O[0],k=w+O[1],D=I[1],R=I[1],z=I[0],L=I[0];N[0]===-1?z=L-P:N[0]===1?L=z+P:(z=z-P/2,L=L+P/2),N[1]===-1?D=R-k:(N[1]===1||(D=R-k/2),R=D+k);var B=aw(D,L,R,z);t.forEach(function(j,H){c[H][0]=B[H].pos[0]-j.pos[0],c[H][1]=B[H].pos[1]-j.pos[1]})}else t.forEach(function(j,H){var X=j.direction;X&&(X.indexOf(g)>-1&&(c[H][0]=n[0]),X.indexOf(m)>-1&&(c[H][1]=n[1]))}),g&&(c[1][0]=n[0]/2,c[5][0]=n[0]/2),m&&(c[3][1]=n[1]/2,c[7][1]=n[1]/2)}else s&&!o?u.forEach(function(j){var H=j==="n"||j==="s";t.forEach(function(X,q){var W=X.direction,J=X.horizontal,ne=X.vertical;!W||W.indexOf(j)===-1||(c[q]=[H||!J?0:n[0],!H||!ne?0:n[1]])})}):c[e]=n;return c}function Q1e(t,e){var n=ae(fW(t,e),2),r=n[0],i=n[1],a=e.datas,s=a.clipPath,o=a.clipIndex,c=s,u=c.type,f=c.poses,h=c.splitter,g=f.map(function(T){return T.pos});if(u==="polygon")g.splice(o,0,[r,i]);else if(u==="inset"){var m=$1e.indexOf(o),b=q1e.indexOf(o),x=f.length;if(H1e(f,g,8,m,b,r,i,g[4][0],g[4][1],g[0][0],g[0][1]),x===f.length)return}else return;var w=_N(t,s,g),S="".concat(u,"(").concat(w.join(h),")");Ve(t,"onClip",gt(t,e,ie({clipEventType:"added",clipType:u,poses:g,clipStyles:w,clipStyle:S,distX:0,distY:0},Si({clipPath:S},e))))}function Z1e(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,s=a.type,o=a.poses,c=a.splitter,u=o.map(function(m){return m.pos}),f=u.length;if(s==="polygon")o.splice(i,1),u.splice(i,1);else if(s==="inset"){if(i<8||(G1e(o,u,i,8,f),f===o.length))return}else return;var h=_N(t,r,u),g="".concat(s,"(").concat(h.join(c),")");Ve(t,"onClip",gt(t,e,ie({clipEventType:"removed",clipType:s,poses:u,clipStyles:h,clipStyle:g,distX:0,distY:0},Si({clipPath:g},e))))}var J1e={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,s=n.zoom,o=n.groupable,c=t.getState(),u=c.target,f=c.width,h=c.height,g=c.allMatrix,m=c.is3d,b=c.left,x=c.top,w=c.pos1,S=c.pos2,T=c.pos3,I=c.pos4,N=c.clipPathState,O=c.snapBoundInfos,P=c.rotation;if(!u||o)return[];var k=E6(u,f,h,i||"inset",N||r);if(!k)return[];var D=m?4:3,R=k.type,z=k.poses,L=z.map(function(ze){var je=Nn(g,ze.pos,D);return[je[0]-b,je[1]-x]}),B=[],j=[],H=R==="rect",X=R==="inset",q=R==="polygon";if(H||X||q){var W=X?L.slice(0,8):L;j=W.map(function(ze,je){var Ue=je===0?W[W.length-1]:W[je-1],Ie=Jn(Ue,ze),Oe=qW(Ue,ze);return e.createElement("div",{key:"clipLine".concat(je),className:Xe("line","clip-line","snap-control"),"data-clip-index":je,style:{width:"".concat(Oe,"px"),transform:"translate(".concat(Ue[0],"px, ").concat(Ue[1],"px) rotate(").concat(Ie,"rad) scaleY(").concat(s,")")}})})}if(B=L.map(function(ze,je){return e.createElement("div",{key:"clipControl".concat(je),className:Xe("control","clip-control","snap-control"),"data-clip-index":je,style:{transform:"translate(".concat(ze[0],"px, ").concat(ze[1],"px) rotate(").concat(P,"rad) scale(").concat(s,")")}})}),X&&B.push.apply(B,Ne([],ae(L.slice(8).map(function(ze,je){return e.createElement("div",{key:"clipRadiusControl".concat(je),className:Xe("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+je,style:{transform:"translate(".concat(ze[0],"px, ").concat(ze[1],"px) rotate(").concat(P,"rad) scale(").concat(s,")")}})})),!1)),R==="circle"||R==="ellipse"){var J=k.left,ne=k.top,Y=k.radiusX,U=k.radiusY,Q=ae(et(Nn(g,[J,ne],D),Nn(g,[0,0],D)),2),K=Q[0],Z=Q[1],le="none";if(!a){for(var de=Math.max(10,Y/5,U/5),ce=[],he=0;he<=de;++he){var ee=Math.PI*2/de*he;ce.push([Y+(Y-s)*Math.cos(ee),U+(U-s)*Math.sin(ee)])}ce.push([Y,-2]),ce.push([-2,-2]),ce.push([-2,U*2+2]),ce.push([Y*2+2,U*2+2]),ce.push([Y*2+2,-2]),ce.push([Y,-2]),le="polygon(".concat(ce.map(function(ze){return"".concat(ze[0],"px ").concat(ze[1],"px")}).join(", "),")")}B.push(e.createElement("div",{key:"clipEllipse",className:Xe("clip-ellipse","snap-control"),style:{width:"".concat(Y*2,"px"),height:"".concat(U*2,"px"),clipPath:le,transform:"translate(".concat(-b+K,"px, ").concat(-x+Z,"px) ").concat(rS(g))}}))}if(a){var Se=Ka(Ne([w,S,T,I],ae(L),!1)),re=Se.width,oe=Se.height,De=Se.left,Pe=Se.top;if(q||H||X){var ce=X?L.slice(0,8):L;B.push(e.createElement("div",{key:"clipArea",className:Xe("clip-area","snap-control"),style:{width:"".concat(re,"px"),height:"".concat(oe,"px"),transform:"translate(".concat(De,"px, ").concat(Pe,"px)"),clipPath:"polygon(".concat(ce.map(function(je){return"".concat(je[0]-De,"px ").concat(je[1]-Pe,"px")}).join(", "),")")}}))}}return O&&["vertical","horizontal"].forEach(function(ze){var je=O[ze],Ue=ze==="horizontal";je.isSnap&&j.push.apply(j,Ne([],ae(je.snap.posInfos.map(function(Ie,Oe){var Ge=Ie.pos,yt=et(Nn(g,Ue?[0,Ge]:[Ge,0],D),[b,x]),Dt=et(Nn(g,Ue?[f,Ge]:[Ge,h],D),[b,x]);return Bv(e,"",yt,Dt,s,"clip".concat(ze,"snap").concat(Oe),"guideline")})),!1)),je.isBound&&j.push.apply(j,Ne([],ae(je.bounds.map(function(Ie,Oe){var Ge=Ie.pos,yt=et(Nn(g,Ue?[0,Ge]:[Ge,0],D),[b,x]),Dt=et(Nn(g,Ue?[f,Ge]:[Ge,h],D),[b,x]);return Bv(e,"",yt,Dt,s,"clip".concat(ze,"bounds").concat(Oe),"guideline","bounds","bold")})),!1))}),Ne(Ne([],ae(B),!1),ae(j),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,ie(ie({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,s=n.target,o=n.width,c=n.height,u=e.inputEvent?e.inputEvent.target:null,f=u&&u.getAttribute("class")||"",h=e.datas,g=E6(s,o,c,i||"inset",a);if(!g)return!1;var m=g.clipText,b=g.type,x=g.poses,w=Ve(t,"onClipStart",gt(t,e,{clipType:b,clipStyle:m,poses:x.map(function(S){return S.pos})}));return w===!1?(h.isClipStart=!1,!1):(h.isControl=f&&f.indexOf("clip-control")>-1,h.isLine=f.indexOf("clip-line")>-1,h.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,h.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,h.clipPath=g,h.isClipStart=!0,n.clipPathState=m,gf(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.originalDatas,o=e.isDragTarget;if(!a.isClipStart)return!1;var c=a,u=c.isControl,f=c.isLine,h=c.isArea,g=c.clipIndex,m=c.clipPath;if(!m)return!1;var b=Jd(t.props,"clippable"),x=b.keepRatio,w=0,S=0,T=s.draggable,I=Mo(e);o&&T?(n=ae(T.prevBeforeDist,2),w=n[0],S=n[1]):(r=ae(I,2),w=r[0],S=r[1]);var N=[w,S],O=t.state,P=O.width,k=O.height,D=!h&&!u&&!f,R=m.type,z=m.poses,L=m.splitter,B=z.map(function(xt){return xt.pos});D&&(w=-w,S=-S);var j=!u||z[g].direction==="nesw",H=R==="inset"||R==="rect",X=z.map(function(){return[0,0]});if(u&&!j){var q=z[g],W=q.horizontal,J=q.vertical,ne=[w*Ae(W),S*Ae(J)];X=X1e(z,g,ne,H,x)}else j&&(X=B.map(function(){return[w,S]}));var Y=B.map(function(xt,Pn){return Rt(xt,X[Pn])}),U=Ne([],ae(Y),!1);O.snapBoundInfos=null;var Q=m.type==="circle",K=m.type==="ellipse";if(Q||K){var Z=Ka(Y),le=Ae(Z.bottom-Z.top),de=Ae(K?Z.right-Z.left:le),ce=Y[0][1]+le,he=Y[0][0]-de,ee=Y[0][0]+de;Q&&(U.push([ee,Z.bottom]),X.push([1,0])),U.push([Z.left,ce]),X.push([0,1]),U.push([he,Z.bottom]),X.push([1,0])}var Se=LW((b.clipHorizontalGuidelines||[]).map(function(xt){return an("".concat(xt),k)}),(b.clipVerticalGuidelines||[]).map(function(xt){return an("".concat(xt),P)}),P,k),re=[],oe=[];if(Q||K)re=[U[4][0],U[2][0]],oe=[U[1][1],U[3][1]];else if(H){var De=[U[0],U[2],U[4],U[6]],Pe=[X[0],X[2],X[4],X[6]];re=De.filter(function(xt,Pn){return Pe[Pn][0]}).map(function(xt){return xt[0]}),oe=De.filter(function(xt,Pn){return Pe[Pn][1]}).map(function(xt){return xt[1]})}else re=U.filter(function(xt,Pn){return X[Pn][0]}).map(function(xt){return xt[0]}),oe=U.filter(function(xt,Pn){return X[Pn][1]}).map(function(xt){return xt[1]});var ze=[0,0],je=l6(Se,b.clipTargetBounds&&{left:0,top:0,right:P,bottom:k},re,oe,5,5),Ue=je.horizontal,Ie=je.vertical,Oe=Ue.offset,Ge=Ie.offset;if(Ue.isBound&&(ze[1]+=Oe),Ie.isBound&&(ze[0]+=Ge),(K||Q)&&X[0][0]===0&&X[0][1]===0){var Z=Ka(Y),yt=Z.bottom-Z.top,Dt=K?Z.right-Z.left:yt,Nt=Ie.isBound?Ae(Ge):Ie.snapIndex===0?-Ge:Ge,ot=Ue.isBound?Ae(Oe):Ue.snapIndex===0?-Oe:Oe;Dt-=Nt,yt-=ot,Q&&(yt=PW(Ie,Ue)>0?yt:Dt,Dt=yt);var Et=U[0];U[1][1]=Et[1]-yt,U[2][0]=Et[0]+Dt,U[3][1]=Et[1]+yt,U[4][0]=Et[0]-Dt}else if(H&&x&&u){var ft=ae(lY(z),2),xn=ft[0],Zt=ft[1],Ur=xn&&Zt?xn/Zt:0,as=z[g],ss=as.direction||"",os=U[1][1],ce=U[5][1],he=U[7][0],ee=U[3][0];Ae(Oe)<=Ae(Ge)?Oe=xi(Oe)*Ae(Ge)/Ur:Ge=xi(Ge)*Ae(Oe)*Ur,ss.indexOf("w")>-1?he-=Ge:ss.indexOf("e")>-1?ee-=Ge:(he+=Ge/2,ee-=Ge/2),ss.indexOf("n")>-1?os-=Oe:ss.indexOf("s")>-1?ce-=Oe:(os+=Oe/2,ce-=Oe/2);var pi=aw(os,ee,ce,he);U.forEach(function(Yi,_a){var gi;gi=ae(pi[_a].pos,2),Yi[0]=gi[0],Yi[1]=gi[1]})}else U.forEach(function(xt,Pn){var Dn=X[Pn];Dn[0]&&(xt[0]-=Ge),Dn[1]&&(xt[1]-=Oe)});var wn=_N(t,m,Y),_n="".concat(R,"(").concat(wn.join(L),")");if(O.clipPathState=_n,Q||K)re=[U[4][0],U[2][0]],oe=[U[1][1],U[3][1]];else if(H){var De=[U[0],U[2],U[4],U[6]];re=De.map(function(Pn){return Pn[0]}),oe=De.map(function(Pn){return Pn[1]})}else re=U.map(function(xt){return xt[0]}),oe=U.map(function(xt){return xt[1]});if(O.snapBoundInfos=l6(Se,b.clipTargetBounds&&{left:0,top:0,right:P,bottom:k},re,oe,1,1),T){var Vt=O.is3d,Bs=O.allMatrix,Yl=Vt?4:3,Xl=ze;o&&(Xl=[N[0]+ze[0]-I[0],N[1]+ze[1]-I[1]]),T.deltaOffset=on(Bs,[Xl[0],Xl[1],0,0],Yl)}return Ve(t,"onClip",gt(t,e,ie({clipEventType:"changed",clipType:R,poses:Y,clipStyle:_n,clipStyles:wn,distX:w,distY:S},Si((i={},i[R==="rect"?"clip":"clipPath"]=_n,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,s=r.isClipStart,o=r.isControl;return s?(Ve(t,"onClipEnd",va(t,e,{})),i&&(o?Z1e(t,e):a&&Q1e(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},ewe={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":wr(e.inputEvent.target,Xe("origin"))},dragControlStart:function(t,e){var n=e.datas;gf(t,e);var r=gt(t,e,{dragStart:bi.dragStart(t,new vp().dragStart([0,0],e))}),i=Ve(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=ae(Mo(e),2),s=a[0],o=a[1],c=t.state,u=c.width,f=c.height,h=c.offsetMatrix,g=c.targetMatrix,m=c.is3d,b=t.props.originRelative,x=b===void 0?!0:b,w=m?4:3,S=[s,o];if(i){var T=e.distOrigin;(T[0]||T[1])&&(S=T)}var I=Rt(n.startOrigin,S),N=Rt(n.startTargetOrigin,S),O=et(S,n.prevOrigin),P=q0(h,g,I,w),k=t.getRect(),D=Ka(mf(P,u,f,w)),R=[k.left-D.left,k.top-D.top];n.prevOrigin=S;var z=[xs(N[0],u,x),xs(N[1],f,x)].join(" "),L=bi.drag(t,$0(e,t.state,R,!!r)),B=gt(t,e,ie(ie({width:u,height:f,origin:I,dist:S,delta:O,transformOrigin:z,drag:L},Si({transformOrigin:z,transform:L.transform},e)),{afterTransform:L.transform}));return Ve(t,"onDragOrigin",B),B},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Ve(t,"onDragOriginEnd",va(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-a[0],s[1]=o.origin[1]-a[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function twe(t,e,n,r){var i=t.filter(function(c){var u=c.virtual,f=c.horizontal;return f&&!u}).length,a=t.filter(function(c){var u=c.virtual,f=c.vertical;return f&&!u}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(a===0?s=4:a<4&&(s=7)),e===1&&(a<=1?s=5:a<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];nwe(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function nwe(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function rwe(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function T6(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=fu(t),oY(a,e,n,0,0,r,i)}function A6(t,e,n,r,i){var a=t.state,s=a.width,o=a.height,c=wN(i,t.props.roundRelative,s,o),u=c.raws,f=c.styles,h=c.radiusPoses,g=K1e(h,u),m=g.horizontals,b=g.verticals,x=f.join(" ");a.borderRadiusState=x;var w=gt(t,e,ie({horizontals:m,verticals:b,borderRadius:x,width:s,height:o,delta:r,dist:n},Si({borderRadius:x},e)));return Ve(t,"onRound",w),w}function C6(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],s=t.getTargets()[0];s&&(a?.props.target===s?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=mN(s).borderRadius,r.borderRadius=i))}return i}var iwe={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Xe("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,s=n.allMatrix,o=n.is3d,c=n.left,u=n.top,f=n.borderRadiusState,h=t.props,g=h.minRoundControls,m=g===void 0?[0,0]:g,b=h.maxRoundControls,x=b===void 0?[4,4]:b,w=h.zoom,S=h.roundPadding,T=S===void 0?0:S,I=h.isDisplayShadowRoundControls,N=h.groupable;if(!r)return null;var O=f||C6(t),P=o?4:3,k=T6(O,i,a,m,!0);if(!k)return null;var D=0,R=0,z=N?[0,0]:[c,u];return k.map(function(L,B){var j=L.horizontal,H=L.vertical,X=L.direction||"",q=Ne([],ae(L.pos),!1);R+=Math.abs(j),D+=Math.abs(H),j&&X.indexOf("n")>-1&&(q[1]-=T),H&&X.indexOf("w")>-1&&(q[0]-=T),j&&X.indexOf("s")>-1&&(q[1]+=T),H&&X.indexOf("e")>-1&&(q[0]+=T);var W=et(Nn(s,q,P),z),J=I&&I!=="horizontal",ne=L.vertical?D<=x[1]&&(J||!L.virtual):R<=x[0]&&(I||!L.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(B),className:Xe("control","border-radius",L.vertical?"vertical":"",L.virtual?"virtual":""),"data-radius-index":B,style:{display:ne?"block":"none",transform:"translate(".concat(W[0],"px, ").concat(W[1],"px) scale(").concat(w,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,o=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,c=s?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(o){var f=i.getAttribute("data-line-key")||"";f&&(u=parseInt(f.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!o)return!1;var h=gt(t,e,{}),g=Ve(t,"onRoundStart",h);if(g===!1)return!1;r.lineIndex=u,r.controlIndex=c,r.isControl=s,r.isLine=o,gf(t,e);var m=t.props,b=m.roundRelative,x=m.minRoundControls,w=x===void 0?[0,0]:x,S=t.state,T=S.width,I=S.height;r.isRound=!0,r.prevDist=[0,0];var N=C6(t),O=T6(N||"",T,I,w,!0)||[];return r.controlPoses=O,S.borderRadiusState=wN(O,b,T,I).styles.join(" "),h},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=ae(Mo(e),2),s=a[0],o=a[1],c=[s,o],u=et(c,n.prevDist),f=t.props.maxRoundControls,h=f===void 0?[4,4]:f,g=t.state,m=g.width,b=g.height,x=r[i],w=x.vertical,S=x.horizontal,T=r.map(function(N){var O=N.horizontal,P=N.vertical,k=[O*S*c[0],P*w*c[1]];if(O){if(h[0]===1)return k;if(h[0]<4&&O!==S)return k}else{if(h[1]===0)return k[1]=P*S*c[0]/m*b,k;if(w){if(h[1]===1)return k;if(h[1]<4&&P!==w)return k}}return[0,0]});T[i]=c;var I=r.map(function(N,O){return ie(ie({},N),{pos:Rt(N.pos,T[O])})});return i<4?I.slice(0,i+1).forEach(function(N){N.virtual=!1}):I.slice(4,i+1).forEach(function(N){N.virtual=!1}),n.prevDist=[s,o],A6(t,e,c,u,I)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,s=r.controlIndex,o=r.isLine,c=r.lineIndex,u=r.controlPoses,f=u.filter(function(S){var T=S.virtual;return T}).length,h=t.props.roundClickable,g=h===void 0?!0:h;if(i&&g){if(a&&(g===!0||g==="control"))rwe(u,s);else if(o&&(g===!0||g==="line")){var m=ae(fW(t,e),2),b=m[0],x=m[1];twe(u,c,b,x)}f!==u.filter(function(S){var T=S.virtual;return T}).length&&A6(t,e,[0,0],[0,0],u)}var w=va(t,e,{});return Ve(t,"onRoundEnd",w),n.borderRadiusState="",w},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=Is(t,"roundable",e),s=ie({targets:t.props.targets,events:a.map(function(o,c){return ie(ie({},o),{target:i[c],moveable:r[c],currentTarget:r[c]})})},n);return Ve(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=Is(t,"roundable",e),s=ie({targets:t.props.targets,events:a.map(function(o,c){return ie(ie(ie({},o),{target:i[c],moveable:r[c],currentTarget:r[c]}),Si({borderRadius:n.borderRadius},o))})},n);return Ve(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=Is(t,"roundable",e);iS(t,"onRound",function(o){var c=ie({targets:t.props.targets,events:i.map(function(u,f){return ie(ie(ie({},u),{target:r[f],moveable:n[f],currentTarget:n[f]}),Si({borderRadius:o.borderRadius},u))})},o);Ve(t,"onRoundGroup",c)});var a=this.dragControlEnd(t,e);if(!a)return!1;var s=ie({targets:t.props.targets,events:i.map(function(o,c){var u;return ie(ie({},o),{target:r[c],moveable:n[c],currentTarget:n[c],lastEvent:(u=o.datas)===null||u===void 0?void 0:u.lastEvent})})},a);return Ve(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function awe(t,e){var n=e?4:3,r=vn(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var cY={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,s=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(JK(i,!0),")"),o=!a||a==="none"?s:a;e.datas.startTransforms=awe(o,r)?[]:fu(o)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return gt(t,e,{setTransform:function(n){e.datas.startTransforms=gr(n)?n:fu(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return gt(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Ve(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Ve(t,"onBeforeRender",gt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Ve(t,"onBeforeRenderEnd",gt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=Is(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.setTransform(c,s),n.resetStyle(s),n.fillDragStartParams(c,s)});Ve(t,"onBeforeRenderGroupStart",gt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=Is(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.resetStyle(s),n.fillDragParams(c,s)});Ve(t,"onBeforeRenderGroup",gt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Ve(t,"onBeforeRenderGroupEnd",gt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},uY={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Ve(t,"onRenderStart",gt(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Ve(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Ve(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Ve(t,"onRenderGroupStart",gt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=Is(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragParams(c,s)});Ve(t,"onRenderGroup",gt(t,e,ie(ie({isPinch:!!e.isPinch,targets:t.props.targets,transform:sx(e),transformObject:{}},Si(ox(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=Is(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragEndParams(c,s)});Ve(t,"onRenderGroupEnd",gt(t,e,ie({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:sx(e)},Si(ox(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return mp(Z1(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),gt(t,e,ie({isPinch:!!e.isPinch,transformObject:n,transform:sx(e)},Si(ox(e))))},fillDragEndParams:function(t,e){var n={};return mp(Z1(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),gt(t,e,ie({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:sx(e)},Si(ox(e))))}};function sv(t,e,n,r,i,a,s){a.clientDistX=a.distX,a.clientDistY=a.distY;var o=i==="Start",c=i==="End",u=i==="After",f=t.state.target,h=a.isRequest,g=r.indexOf("Control")>-1;if(!f||o&&g&&!h&&t.areaElement===a.inputEvent.target)return!1;var m=Ne([],ae(e),!1);if(h){var b=a.requestAble;m.some(function(B){return B.name===b})||m.push.apply(m,Ne([],ae(t.props.ables.filter(function(B){return B.name===b})),!1))}if(!m.length||m.every(function(B){return B.dragRelation}))return!1;var x=a.inputEvent,w;c&&x&&(w=document.elementFromPoint(a.clientX,a.clientY)||x.target);var S=!1,T=function(){var B;S=!0,(B=a.stop)===null||B===void 0||B.call(a)},I=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());I&&t.updateRect(i,!0,!1);var N=a.datas,O=g?"controlGesto":"targetGesto",P=t[O],k=function(B,j,H){if(!(j in B)||P!==t[O])return!1;var X=B.name,q=N[X]||(N[X]={});if(o&&(q.isEventStart=!H||!B[H]||B[H](t,a)),!q.isEventStart)return!1;var W=B[j](t,ie(ie({},a),{stop:T,datas:q,originalDatas:N,inputTarget:w}));return t._emitter.off(),o&&W===!1&&(q.isEventStart=!1),W};I&&m.forEach(function(B){B.unset&&B.unset(t)}),k(cY,"drag".concat(r).concat(i));var D=0,R=0;n.forEach(function(B){if(S)return!1;var j="".concat(B).concat(r).concat(i),H="".concat(B).concat(r,"Condition");i===""&&!h&&I1e(t.state,a);var X=m.filter(function(J){return J[j]});X=X.filter(function(J,ne){return J.name&&X.indexOf(J)===ne});var q=X.filter(function(J){return k(J,j,H)}),W=q.length;S&&++D,W&&++R,!S&&o&&X.length&&!W&&(D+=X.filter(function(J){var ne=J.name,Y=N[ne];return Y.isEventStart?J.dragRelation!=="strong":!1}).length?1:0)}),(!u||R)&&k(uY,"drag".concat(r).concat(i));var z=P!==t[O]||D===n.length;if((c||S||z)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(B){B.state.gestos={}}),m.forEach(function(B){B.unset&&B.unset(t)})),o&&!z&&!h&&R&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||z)return!1;if(!o&&R&&!s||c){var L=t.props.flushSync||FW;L(function(){t.updateRect(c?i:"",!0,!1),t.forceUpdate()})}return!o&&!c&&!u&&R&&!s&&sv(t,e,n,r,i+"After",a),!0}function SN(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,s=t.areaElement,o=t._dragTarget;return!o||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===o||o.contains(a)||a===s||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||wr(a,"moveable-area")||wr(a,"moveable-padding")||wr(a,"moveable-edgeDraggable")}}function dY(t,e,n){var r=t.controlBox,i=[],a=t.props,s=a.dragArea,o=t.state.target,c=a.dragTarget;i.push(r),(!s||c)&&i.push(e),!s&&c&&o&&e!==o&&a.dragTargetSelf&&i.push(o);var u=SN(t);return hY(t,i,"targetAbles",n,{dragStart:u,pinchStart:u})}function fY(t,e){var n=t.controlBox,r=[];r.push(n);var i=SN(t,!0),a=function(s,o){if(o===void 0&&(o=s.inputEvent.target),o===n)return!0;var c=i(s,o);return!c};return hY(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function hY(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",s=t.props,o=s.pinchOutside,c=s.pinchThreshold,u=s.preventClickEventOnDrag,f=s.preventClickDefault,h=s.checkInput,g=s.dragFocusedInput,m=s.preventDefault,b=m===void 0?!0:m,x=s.preventRightClick,w=x===void 0?!0:x,S=s.preventWheelClick,T=S===void 0?!0:S,I=s.dragContainer,N=Eo(I,!0),O={preventDefault:b,preventRightClick:w,preventWheelClick:T,container:N||nu(t.getControlBoxElement()),pinchThreshold:c,pinchOutside:o,preventClickEventOnDrag:a?u:!1,preventClickEventOnDragStart:a?f:!1,preventClickEventByCondition:a?null:function(D){return t.controlBox.contains(D.target)},checkInput:a?h:!1,dragFocusedInput:g},P=new Obe(e,O),k=r==="Control";return["drag","pinch"].forEach(function(D){["Start","","End"].forEach(function(R){P.on("".concat(D).concat(R),function(z){var L,B=z.eventType,j=D==="drag"&&z.isPinch;if(i[B]&&!i[B](z)){z.stop();return}if(!j){var H=D==="drag"?[D]:["drag",D],X=Ne([],ae(t[n]),!1),q=sv(t,X,H,r,R,z);q?(t.props.stopPropagation||R==="Start"&&k)&&((L=z?.inputEvent)===null||L===void 0||L.stopPropagation()):z.stop()}})})}),P}var swe=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var s=i.eventName,o=i.moveable;o.state.disableNativeEvent||i.ables.forEach(function(c){c[s](o,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function owe(t,e,n,r){var i;n===void 0&&(n=e);var a=yW(t,e),s=a.matrixes,o=a.is3d,c=a.targetMatrix,u=a.transformOrigin,f=a.targetOrigin,h=a.offsetContainer,g=a.hasFixed,m=a.zoom,b=wxe(h,n),x=b.matrixes,w=b.is3d,S=b.offsetContainer,T=b.zoom,I=r,N=4,O=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,P=c,k=vn(N),D=vn(N),R=vn(N),z=vn(N),L=s.length,B=x.map(function(ne){return ie(ie({},ne),{matrix:ne.matrix?Ne([],ae(ne.matrix),!1):void 0})}).reverse();s.reverse(),!o&&I&&(P=Rs(P,3,4),AP(s)),!w&&I&&AP(B),B.forEach(function(ne){D=on(D,ne.matrix,N)});var j=n||Tu(t),H=((i=B[0])===null||i===void 0?void 0:i.target)||Fv(j,j,!0).offsetParent,X=B.slice(1).reduce(function(ne,Y){return on(ne,Y.matrix,N)},vn(N));s.forEach(function(ne,Y){if(L-2===Y&&(R=k.slice()),L-1===Y&&(z=k.slice()),!ne.matrix){var U=s[Y+1],Q=E1e(ne,U,H,N,on(X,k,N));ne.matrix=Qd(Q,N)}k=on(k,ne.matrix,N)});var q=!O&&o;P||(P=vn(q?4:3));var W=rS(O&&P.length===16?Rs(P,4,3):P,q),J=D;return D=QK(D,N,N),{hasZoom:m!==1||T!==1,hasFixed:g,matrixes:s,rootMatrix:D,originalRootMatrix:J,beforeMatrix:R,offsetMatrix:z,allMatrix:k,targetMatrix:P,targetTransform:W,inlineTransform:t.style.transform,transformOrigin:u,targetOrigin:f,is3d:I,offsetContainer:h,offsetRootContainer:S}}function lwe(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,s=0,o={},c=GW(t);if(t&&(i=c.offsetWidth,a=c.offsetHeight),t){var u=owe(t,e,n,r),f=Hh(u.allMatrix,u.transformOrigin,i,a);o=ie(ie({},u),f);var h=Hh(u.allMatrix,[50,50],100,100);s=HW([h.pos1,h.pos2],h.direction)}var g=4;return ie(ie(ie({hasZoom:!1,width:i,height:a,rotation:s},c),{originalRootMatrix:vn(g),rootMatrix:vn(g),beforeMatrix:vn(g),offsetMatrix:vn(g),allMatrix:vn(g),targetMatrix:vn(g),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),o)}function PP(t,e,n,r,i,a){a===void 0&&(a=[]);var s=1,o=[0,0],c=cx(),u=cx(),f=cx(),h=cx(),g=[0,0],m={},b=lwe(e,n,i,!0);if(e){var x=Hi(e);a.forEach(function(B){m[B]=x(B)});var w=b.is3d?4:3,S=Hh(b.offsetMatrix,Rt(b.transformOrigin,ZK(b.targetMatrix,w)),b.width,b.height);s=S.direction,o=Rt(S.origin,[S.left-b.left,S.top-b.top]),h=av(b.offsetRootContainer);var T=Fv(r,r,!0).offsetParent||b.offsetRootContainer;if(b.hasZoom){var I=Hh(on(b.originalRootMatrix,b.allMatrix),b.transformOrigin,b.width,b.height),N=Hh(b.originalRootMatrix,nw(Hi(T)("transformOrigin")).map(function(B){return parseFloat(B)}),T.offsetWidth,T.offsetHeight);if(c=sC(I,h),f=sC(N,h,T,!0),t){var O=I.left,P=I.top;u=sC({left:O,top:P,bottom:P,right:P},h)}}else{c=av(e),f=xxe(T),t&&(u=av(t));var k=f.left,D=f.top,R=f.clientLeft,z=f.clientTop,L=[c.left-k,c.top-D];g=et(xp(b.rootMatrix,L,4),[R+b.left,z+b.top])}}return ie({targetClientRect:c,containerClientRect:f,moveableClientRect:u,rootContainerClientRect:h,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:m,offsetDelta:g},b)}function I6(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Zd([e,n,r,i]),s=[a.minX,a.minY],o=et(t.origin,s);return e=et(e,s),n=et(n,s),r=et(r,s),i=et(i,s),ie(ie({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:i,origin:o,beforeOrigin:o,isPersisted:!0})}var wp=(function(t){F0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=ie({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},PP(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new Y_,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}Sye(n._observerId),n._observerId=TK(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,s=n.target,o=n.zoom,c=n.cspNonce,u=n.translateZ,f=n.cssStyled,h=n.groupable,g=n.linePadding,m=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var b=ae(i||[0,0],2),x=b[0],w=b[1],S=r.left,T=r.top,I=r.target,N=r.direction,O=r.hasFixed,P=r.offsetDelta,k=n.targets,D=this.isDragging(),R={};this.getEnabledAbles().forEach(function(X){R["data-able-".concat(X.name.toLowerCase())]=!0});var z=this._getAbleClassName(),L=k&&k.length&&(I||h)||s||!this._hasFirstTarget&&this.state.isPersisted,B=this.controlBox||this.props.firstRenderState||this.props.persistData,j=[S-x,T-w];!h&&n.useAccuratePosition&&(j[0]+=P[0],j[1]+=P[1]);var H={position:O?"fixed":"absolute",display:L?"block":"none",visibility:B?"visible":"hidden",transform:"translate3d(".concat(j[0],"px, ").concat(j[1],"px, ").concat(u,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return g&&(H["--moveable-line-padding"]=g),m&&(H["--moveable-control-padding"]=m),Cs(f,ie({cspNonce:c,ref:vl(this,"controlBox"),className:"".concat(Xe("control-box",N===-1?"reverse":"",D?"dragging":"")," ").concat(z," ").concat(a)},R,{onClick:this._onPreventClick,style:H}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),Mh(this,!1),Mh(this,!0);var a=this.events;for(var s in a){var o=a[s];o&&o.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Gi(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(iN)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&SN(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,s=r.pos2,o=r.pos3,c=r.pos4,u=r.targetClientRect;if(!i)return 0;var f;if(Yp(n)){var h=n.getBoundingClientRect();f={left:h.left,top:h.top,width:h.width,height:h.height}}else f=ie({width:0,height:0},n);var g=f.left,m=f.top,b=f.width,x=f.height,w=QV([a,s,c,o],u),S=Abe(w,[[g,m],[g+b,m],[g+b,m+x],[g,m+x]]),T=nW(w);return!S||!T?0:Math.min(100,S/T*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,s=i.pos1,o=i.pos2,c=i.pos3,u=i.pos4,f=i.targetClientRect;return a?hP([n,r],QV([s,o,u,c],f)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,s=!a.parentPosition&&!a.wrapperMoveable;s&&yp(!0);var o=a.parentMoveable,c=this.state,u=c.target||a.target,f=this.getContainer(),h=o?o._rootContainer:this._rootContainer,g=PP(this.controlBox,u,f,f,h||f,this._getRequestStyles());if(!u&&this._hasFirstTarget&&a.persistData){var m=I6(a.persistData);for(var b in m)g[b]=m[b]}s&&yp(),this.updateState(g,o?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,s=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var o=a.getEventData();return!!(!((r=o[n])===null||r===void 0)&&r.isEventStart)}if(s?.isFlag()){if(!n)return!0;var o=s.getEventData();return!!(!((i=o[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Xa(this.state),i=ae(r,4),a=i[0],s=i[1],o=i[2],c=i[3],u=Ka(r),f=n.width,h=n.height,g=u.width,m=u.height,b=u.left,x=u.top,w=[n.left,n.top],S=Rt(w,n.origin),T=Rt(w,n.beforeOrigin),I=n.transformOrigin;return{width:g,height:m,left:b,top:x,pos1:a,pos2:s,pos3:o,pos4:c,offsetWidth:f,offsetHeight:h,beforeOrigin:T,origin:S,transformOrigin:I,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&CP(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&CP(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return D1e(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,s=a.props,o=s.parentMoveable||s.wrapperMoveable||a,c=o.props.ables,u=s.groupable,f=Gi(c,function(S){return S.name===n});if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var h=f.request(a),g=i||r.isInstant,m=h.isControl?"controlAbles":"targetAbles",b="".concat(u?"Group":"").concat(h.isControl?"Control":""),x=Ne([],ae(o[m]),!1),w={request:function(S){return sv(a,x,["drag"],b,"",ie(ie({},h.request(S)),{requestAble:n,isRequest:!0}),g),w},requestEnd:function(){return sv(a,x,["drag"],b,"End",ie(ie({},h.requestEnd()),{requestAble:n,isRequest:!0}),g),w}};return sv(a,x,["drag"],b,"Start",ie(ie({},h.requestStart(r)),{requestAble:n,isRequest:!0}),g),g?w.request(r).requestEnd():w},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,s=n.transformOrigin,o=n.allMatrix,c=n.is3d,u=n.pos1,f=n.pos2,h=n.pos3,g=n.pos4,m=n.left,b=n.top,x=n.isPersisted,w=r.zoom||1;if(!i&&w<=1){n.renderPoses=[u,f,h,g],n.renderLines=[[u,f],[f,g],[g,h],[h,u]];return}var S=nY(i||{}),T=S.left,I=S.top,N=S.bottom,O=S.right,P=c?4:3,k=[];x?k=s:this.controlBox&&r.groupable?k=a:k=Rt(a,[m,b]);var D=X1(P,Qd(k.map(function(H){return-H}),P),o,Qd(s,P)),R=ja(D,u,[-T,-I],P),z=ja(D,f,[O,-I],P),L=ja(D,h,[-T,N],P),B=ja(D,g,[O,N],P);n.renderPoses=[R,z,L,B],n.renderLines=[[R,z],[z,B],[B,L],[L,R]];{var j=w/2;n.renderLines=[[ja(D,u,[-T-j,-I],P),ja(D,f,[O+j,-I],P)],[ja(D,f,[O,-I-j],P),ja(D,g,[O,N+j],P)],[ja(D,g,[O+j,N],P),ja(D,h,[-T-j,N],P)],[ja(D,h,[-T,N+j],P),ja(D,u,[-T,-I-j],P)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,s=this.state,o=s.target,c=s.container;if(!(!o&&!r)){this.updateAbles();var u=!IP(o,r),f=u||!IP(c,i);if(f){var h=i||this.controlBox;h&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&h&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=aW(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,s=r.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&a){var o=I6(a);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,s=this.getEnabledAbles(n),o="drag".concat(r,"Start"),c="pinch".concat(r,"Start"),u="drag".concat(r,"ControlStart"),f=ux(s,[o,c],a),h=ux(s,[u],a);this.enabledAbles=s,this.targetAbles=f,this.controlAbles=h},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:Cs};return this.renderState={},C1e(ZW(ux(this.getEnabledAbles(),["render"],i).map(function(s){var o=s.render;return o(n,a)||[]})).filter(function(s){return s}),function(s){var o=s.key;return o}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Ne(Ne([],ae(r),!1),ae(o),!1)},Ne([],ae(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(Mh(this,!1),this.updateState({gestos:{}})),r||Mh(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=dY(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=fY(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=Eo(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,s=r.hideChildMoveableDefaultLines,o=r.parentMoveable;if(a||o&&s)return[];var c=this.getState(),u={createElement:Cs};return c.renderLines.map(function(f,h){return Bv(u,"",f[0],f[1],i,"render-line-".concat(h))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,s=this._prevDragArea,o=r.dragArea,c=!o&&a!==i,u=(n||o)&&s!==o;return c||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,s=Ol(a);if(this._isTargetChanged())for(var o in a){var c=a[o];c&&c.destroy(),a[o]=null}if(i){var u=this.enabledAbles;s.forEach(function(f){var h=ux(u,[f]),g=h.length>0,m=a[f];if(!g){m&&(m.destroy(),a[f]=null);return}m||(m=new swe(i,n,f),a[f]=m),m.setAbles(h)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=Eo(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=Eo(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Ne(Ne([],ae(this._getAbleViewClassNames()),!1),[this.isDragging()?L1e:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=QW(n.filter(Boolean),function(u){return u}).map(function(u){var f=ae(u,1),h=f[0];return h}),a=this._viewClassNames,s=j0(a,i),o=s.removed,c=s.added;o.forEach(function(u){PK(r,a[u])}),c.forEach(function(u){kK(r,i[u])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,s=this.controlGesto,o=a?.isFlag()?a.getEventData():{},c=s?.isFlag()?s.getEventData():{};return i.map(function(u){var f,h,g,m=u.name,b=((f=u.className)===null||f===void 0?void 0:f.call(u,r))||"";return(!((h=o[m])===null||h===void 0)&&h.isEventStart||!((g=c[m])===null||g===void 0)&&g.isEventStart)&&(b+=" ".concat(Xe("".concat(m).concat(n,"-dragging")))),b.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,s=nu(this.getControlBoxElement());if(!s.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var o=new s.ResizeObserver(this.checkUpdateRect);o.observe(a,{box:"border-box"}),this._reiszeObserver=o}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,s=a.target,o=nu(this.getControlBoxElement());if(!o.MutationObserver||!s||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===s&&this._mutationObserver)){var c=new o.MutationObserver(function(u){var f,h;try{for(var g=$be(u),m=g.next();!m.done;m=g.next()){var b=m.value;b.type==="attributes"&&b.attributeName==="style"&&r.checkUpdateRect()}}catch(x){f={error:x}}finally{try{m&&!m.done&&(h=g.return)&&h.call(g)}finally{if(f)throw f.error}}});c.observe(s,{attributes:!0}),this._mutationObserver=c}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:FW,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(zK),EN={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),s=a.left,o=a.top,c=a.isPersisted,u=r.zoom||1,f=t.renderGroupRects,h=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];c?i=h.map(function(){return null}):h=[];var g=jh(t,"parentPosition",[s,o],function(b){return b.join(",")}),m=jh(t,"requestStyles",t.getRequestChildStyles(),function(b){return b.join(",")});return t.moveables=t.moveables.slice(0,i.length),Ne(Ne([],ae(i.map(function(b,x){return e.createElement(wp,{key:"moveable"+x,ref:wK(t,"moveables",x),target:b,origin:!1,requestStyles:m,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,o],persistData:h[x],zoom:u})})),!1),ae(ZW(f.map(function(b,x){var w=b.pos1,S=b.pos2,T=b.pos3,I=b.pos4,N=[w,S,T,I];return[[0,1],[1,3],[3,2],[2,0]].map(function(O,P){var k=ae(O,2),D=k[0],R=k[1];return Bv(e,"",et(N[D],g),et(N[R],g),u,"group-rect-".concat(x,"-").concat(P))})}))),!1)}},cwe=U0("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),s=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||s)){var o=n.contains(i);Ve(t,"onClick",gt(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),s=a>-1,o=!1;a===-1&&(a=Dl(i,function(c){return c.contains(r)}),o=a>-1),Ve(t,"onClickGroup",gt(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:s,containsTarget:o,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function ph(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),ie(ie({},t),{datas:e})}var uwe=U0("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?wW(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&wr(i,Xe("direction"))&&wr(i,Xe("edge"))&&wr(i,Xe("edgeDraggable"))},dragStart:function(t,e){return bi.dragStart(t,ph(e))},drag:function(t,e){return bi.drag(t,ph(e))},dragEnd:function(t,e){return bi.dragEnd(t,ph(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&wr(i,Xe("direction"))&&wr(i,Xe("line"))},dragGroupStart:function(t,e){return bi.dragGroupStart(t,ph(e))},dragGroup:function(t,e){return bi.dragGroup(t,ph(e))},dragGroupEnd:function(t,e){return bi.dragGroupEnd(t,ph(e))},unset:function(t){return bi.unset(t)}}),pY={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},TN=[cY,aY,p1e,N1e,bi,uwe,SP,R1e,j1e,Xxe,F1e,U1e,V1e,ewe,J1e,iwe,EN,pY,cwe,iY,uY],dwe=TN.reduce(function(t,e){return(e.events||[]).forEach(function(n){IK(t,n)}),t},[]),fwe=TN.reduce(function(t,e){return(e.props||[]).forEach(function(n){IK(t,n)}),t},[]);function k6(t,e){var n=ae(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function hx(t,e){var n=ae(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function P6(t,e){return Math.max.apply(Math,Ne([],ae(t.map(function(n){var r=ae(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.max(i[e],a[e],s[e],o[e])})),!1))}function D6(t,e){return Math.min.apply(Math,Ne([],ae(t.map(function(n){var r=ae(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.min(i[e],a[e],s[e],o[e])})),!1))}function hwe(t,e){var n,r,i,a=[0,0],s=[0,0],o=[0,0],c=[0,0],u=0,f=0;if(!t.length)return{pos1:a,pos2:s,pos3:o,pos4:c,minX:0,minY:0,maxX:0,maxY:0,width:u,height:f,rotation:e};var h=ut(e,Ai);if(h%90){var g=h/180*Math.PI,m=Math.tan(g),b=-1/m,x=[bP,e6],w=[[0,0],[0,0]],S=[bP,e6],T=[[0,0],[0,0]];t.forEach(function(K){K.forEach(function(Z){var le=k6([-m,1,0],Z),de=k6([-b,1,0],Z);x[0]>le&&(w[0]=Z,x[0]=le),x[1]<le&&(w[1]=Z,x[1]=le),S[0]>de&&(T[0]=Z,S[0]=de),S[1]<de&&(T[1]=Z,S[1]=de)})});var I=ae(w,2),N=I[0],O=I[1],P=ae(T,2),k=P[0],D=P[1],R=[-m,1,hx([-m,1],N)],z=[-m,1,hx([-m,1],O)],L=[-b,1,hx([-b,1],k)],B=[-b,1,hx([-b,1],D)];n=ae([[R,L],[R,B],[z,L],[z,B]].map(function(K){var Z=ae(K,2),le=Z[0],de=Z[1];return nN(le,de)[0]}),4),a=n[0],s=n[1],o=n[2],c=n[3],u=S[1]-S[0],f=x[1]-x[0]}else{var j=D6(t,0),H=D6(t,1),X=P6(t,0),q=P6(t,1);if(a=[j,H],s=[X,H],o=[j,q],c=[X,q],u=X-j,f=q-H,h%180){var W=[o,a,c,s];r=ae(W,4),a=r[0],s=r[1],o=r[2],c=r[3],u=q-H,f=X-j}}if(h%360>180){var W=[c,o,s,a];i=ae(W,4),a=i[0],s=i[1],o=i[2],c=i[3]}var J=Zd([a,s,o,c]),ne=J.minX,Y=J.minY,U=J.maxX,Q=J.maxY;return{pos1:a,pos2:s,pos3:o,pos4:c,width:u,height:f,minX:ne,minY:Y,maxX:U,maxY:Q,rotation:e}}function gY(t,e){var n=e.map(function(r){if(gr(r)){var i=gY(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var s=Gi(t,function(o){var c=o.manager;return c.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&gr(n[0])?n[0]:n}var pwe=(function(t){F0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new tW,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;yp(!0),this.moveables.forEach(function(he){he.updateRect(n,!1,!1)});var o=this.props,c=this.moveables,u=s.target||o.target,f=c.map(function(he){return{finded:!1,manager:he}}),h=this.props.targetGroups||[],g=gY(f,h),m=o.useDefaultGroupRotate;g.push.apply(g,Ne([],ae(f.filter(function(he){var ee=he.finded;return!ee}).map(function(he){var ee=he.manager;return ee})),!1));var b=[],x=!r||n!==""&&o.updateGroup,w=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var S=(a=o.persistData)===null||a===void 0?void 0:a.rotation;S!=null&&(w=S)}function T(he,ee,Se){var re=he.map(function(Ie){if(gr(Ie)){var Oe=T(Ie,ee),Ge=[Oe.pos1,Oe.pos2,Oe.pos3,Oe.pos4];return b.push(Oe),{poses:Ge,rotation:Oe.rotation}}else return{poses:Xa(Ie.state),rotation:Ie.getRotation()}}),oe=re.map(function(Ie){var Oe=Ie.rotation;return Oe}),De=0,Pe=oe[0],ze=oe.every(function(Ie){return Math.abs(Pe-Ie)<.1});x?De=!m&&ze?Pe:w:De=!m&&!Se&&ze?Pe:ee;var je=re.map(function(Ie){var Oe=Ie.poses;return Oe}),Ue=hwe(je,De);return Ue}var I=T(g,this.rotation,!0);x&&(this.rotation=I.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=h,this.renderGroupRects=b;var N=this.transformOrigin,O=this.rotation,P=this.scale,k=I.width,D=I.height,R=I.minX,z=I.minY,L=O1e([[0,0],[k,0],[0,D],[k,D]],xN(N,k,D),this.rotation/180*Math.PI),B=Zd(L.result),j=B.minX,H=B.minY,X=" rotate(".concat(O,"deg)")+" scale(".concat(xi(P[0]),", ").concat(xi(P[1]),")"),q="translate(".concat(-j,"px, ").concat(-H,"px)").concat(X);this.controlBox.style.transform="translate3d(".concat(R,"px, ").concat(z,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(N,";")+"width:".concat(k,"px;height:").concat(D,"px;")+"transform: ".concat(q),s.width=k,s.height=D;var W=this.getContainer(),J=PP(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||W,[]),ne=[J.left,J.top],Y=ae(Xa(J),4),U=Y[0],Q=Y[1],K=Y[2],Z=Y[3],le=Zd([U,Q,K,Z]),de=[le.minX,le.minY],ce=xi(P[0]*P[1]);J.pos1=et(U,de),J.pos2=et(Q,de),J.pos3=et(K,de),J.pos4=et(Z,de),J.left=R-J.left+de[0],J.top=z-J.top+de[1],J.origin=et(Rt(ne,J.origin),de),J.beforeOrigin=et(Rt(ne,J.beforeOrigin),de),J.originalBeforeOrigin=Rt(ne,J.originalBeforeOrigin),J.transformOrigin=et(Rt(ne,J.transformOrigin),de),u.style.transform="translate(".concat(-j-de[0],"px, ").concat(-H-de[1],"px)")+X,yp(),this.updateState(ie(ie({},J),{posDelta:de,direction:ce,beforeDirection:ce}),i)},e.prototype.getRect=function(){return ie(ie({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Ne(Ne([],ae(r),!1),ae(o),!1)},[]);return n},e.prototype.getMoveables=function(){return Ne([],ae(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Ne(Ne([],ae(this.props.ables),!1),[EN],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Eo(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,s=r.targets,o=this.differ.update(s),c=o.added,u=o.changed,f=o.removed,h=c.length||f.length;(h||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Mh(this,!1),Mh(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=dY(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=fY(this,"GroupControl")));var g=!IP(n.container,r.container);g&&(n.container=r.container),(g||h||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||u.length||s.length&&!tY(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!h},e.prototype._updateObserver=function(){},e.defaultProps=ie(ie({},wp.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(wp),gwe=(function(t){F0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,s=i.cssStyled,o=i.persistData,c=i.targets||[],u=c.length,f=this.isUnmounted||!u,h=(r=o?.children)!==null&&r!==void 0?r:[];return f&&!u&&h.length?c=h.map(function(){return null}):f||(h=[]),Cs(s,{cspNonce:a,ref:vl(this,"controlBox"),className:Xe("control-box")},c.map(function(g,m){var b,x,w=(x=(b=i.individualGroupableProps)===null||b===void 0?void 0:b.call(i,g,m))!==null&&x!==void 0?x:{};return Cs(wp,ie({key:"moveable"+m,ref:wK(n,"moveables",m)},i,w,{target:g,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:h[m]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),yp(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),yp()},e.prototype.getRect=function(){return ie(ie({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(c){return c.request(n,ie(ie({},r),{isInstant:!1}),!1)}),s=i||r.isInstant,o={request:function(c){return a.forEach(function(u){return u.request(c)}),this},requestEnd:function(){return a.forEach(function(c){return c.requestEnd()}),this}};return s?o.request(r).requestEnd():o},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Gi(this.moveables,function(s){var o=s.getTargets()[0],c=s.getControlBoxElement(),u=s.getDragElement();return!o||!u?!1:u===i||u.contains(i)||u!==o&&o===i||o.contains(i)||c===i||c.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Ne([],ae(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(wp);function mY(t,e){var n=[];return t.forEach(function(r){if(r){if(qi(r)){e[r]&&n.push.apply(n,Ne([],ae(e[r]),!1));return}gr(r)?n.push.apply(n,Ne([],ae(mY(r,e)),!1)):n.push(r)}}),n}function vY(t,e){var n=[];return t.forEach(function(r){if(r){if(qi(r)){e[r]&&n.push.apply(n,Ne([],ae(e[r]),!1));return}gr(r)?n.push(vY(r,e)):n.push(r)}}),n}function yY(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?gr(n)&&gr(i)?yY(n,i):!0:!1})}var mwe=(function(t){F0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new tW,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var s=a.css;s&&s.forEach(function(o){n[o]=!0})});var i=Ol(n).join(`
`);this.defaultStyled=aW("div",dye(iN,exe+i))},e.getTotalAbles=function(){return Ne([aY,EN,pY,iY],ae(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,s=i.props,o=Fbe(i,["ables","props"]),c=ae(this._updateRefs(!0),2),u=c[0],f=c[1],h=mY(u,f),g=h.length>1,m=r.getTotalAbles(),b=Ne(Ne([],ae(m),!1),ae(a||[]),!1),x=ie(ie(ie({},o),s||{}),{ables:b,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=h;var w=null,S=this.moveable,T=o.persistData;if(T?.children&&(g=!0),o.individualGroupable)return Cs(gwe,ie({key:"individual-group",ref:vl(this,"moveable")},x,{target:null,targets:h}));if(g){var I=vY(u,f);if(S&&!S.props.groupable&&!S.props.individualGroupable){var N=S.props.target;N&&h.indexOf(N)>-1&&(w=ie({},S.state))}return Cs(pwe,ie({key:"group",ref:vl(this,"moveable")},x,(n=o.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:h,targetGroups:I,firstRenderState:w}))}else{var O=h[0];if(S&&(S.props.groupable||S.props.individualGroupable)){var P=S.moveables||[],k=Gi(P,function(D){return D.props.target===O});k&&(w=ie({},k.state))}return Cs(wp,ie({key:"single",ref:vl(this,"moveable")},x,{target:O,firstRenderState:w}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=bN(this.props.target||this.props.targets),a=typeof document<"u",s=yY(r,i),o=this.selectorMap,c={};return this.refTargets.forEach(function u(f){if(qi(f)){var h=o[f];h?c[f]=o[f]:a&&(s=!0,c[f]=[].slice.call(document.querySelectorAll(f)))}else gr(f)&&f.forEach(u)}),this._tmpRefTargets=i,this._tmpSelectorMap=c,[i,c,!n&&s]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),s=a.added,o=a.removed,c=s.length||o.length;c&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var u=ae(this._updateRefs(),3),f=u[0],h=u[1],g=u[2];this.refTargets=f,this.selectorMap=h,g&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,Ube([fye(dW)],e.prototype,"moveable",void 0),e})(zK),vwe=(function(t){F0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=TN,e})(mwe),DP=function(t,e){return DP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},DP(t,e)};function AN(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");DP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Uv=function(){return Uv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Uv.apply(this,arguments)};function ywe(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var bwe=(function(t){AN(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return Cs(vwe,Uv({ref:vl(this,"moveable")},this.state))},e})(XO),xwe=fwe,wwe=dW,_we=dwe,Swe=(function(t){AN(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var s=Uv({},i),o={};_we.forEach(function(f){o[_ye("on ".concat(f))]=function(h){return a.trigger(f,h)}});var c;i.warpSelf?(delete i.warpSelf,a._warp=!0,c=r):(c=Wp(r).createElement("div"),r.appendChild(c)),a.containerProvider=WV(Cs(bwe,Uv({ref:vl(a,"innerMoveable")},s,o)),c),a.selfElement=c;var u=s.target;return gr(u)&&u.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;WV(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=ywe([VV(wwe,function(r,i){r[i]||(r[i]=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[i]))return o[i].apply(o,a)})}),VV(xwe,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var s;this.setState((s={},s[i]=a,s))},enumerable:!0,configurable:!0})})],e),e})(Y_),bY=(function(t){AN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Swe),Kc=(t=>(t.Mouse="mouse",t.Touch="touch",t.Pointer="pointer",t))(Kc||{}),jm=(t=>(t.CancelledByMovement="cancelled-by-movement",t.CancelledByRelease="cancelled-by-release",t.CancelledOutsideElement="cancelled-outside-element",t))(jm||{});const Ewe=["mousedown","mousemove","mouseup","mouseleave","mouseout"],Twe=["touchstart","touchmove","touchend","touchcancel"],Awe=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function Cwe(t){return typeof t=="object"&&t!==null&&"pageX"in t&&typeof t.pageX=="number"&&"pageY"in t&&typeof t.pageY=="number"}function Iwe(t){var e;return Ewe.includes((e=t?.nativeEvent)==null?void 0:e.type)}function xY(t){var e;return Twe.includes((e=t?.nativeEvent)==null?void 0:e.type)||"touches"in t}function kwe(t){const{nativeEvent:e}=t;return e?Awe.includes(e?.type)||"pointerId"in e:!1}function cC(t){return Iwe(t)||xY(t)||kwe(t)}function O6(t){var e;const n=xY(t)?(e=t?.touches)==null?void 0:e[0]:t;return Cwe(n)?{x:n.pageX,y:n.pageY}:null}function Pwe(t){return{target:t.target,currentTarget:t.currentTarget,nativeEvent:t,persist:()=>{}}}function CN(t,{threshold:e=400,captureEvent:n=!1,detect:r=Kc.Pointer,cancelOnMovement:i=!1,cancelOutsideElement:a=!0,filterEvents:s,onStart:o,onMove:c,onFinish:u,onCancel:f}={}){const h=A.useRef(!1),g=A.useRef(!1),m=A.useRef(),b=A.useRef(),x=A.useRef(t),w=A.useRef(null),S=A.useCallback(O=>P=>{g.current||cC(P)&&(s!==void 0&&!s(P)||(n&&P.persist(),o?.(P,{context:O}),w.current=O6(P),g.current=!0,m.current=P.currentTarget,b.current=setTimeout(()=>{x.current&&(x.current(P,{context:O}),h.current=!0)},e)))},[n,s,o,e]),T=A.useCallback(O=>(P,k)=>{cC(P)&&g.current&&(w.current=null,n&&P.persist(),h.current?u?.(P,{context:O}):g.current&&f?.(P,{context:O,reason:k??jm.CancelledByRelease}),h.current=!1,g.current=!1,b.current!==void 0&&clearTimeout(b.current))},[n,u,f]),I=A.useCallback(O=>P=>{if(cC(P)&&(c?.(P,{context:O}),i!==!1&&w.current)){const k=O6(P);if(k){const D=i===!0?25:i,R={x:Math.abs(k.x-w.current.x),y:Math.abs(k.y-w.current.y)};(R.x>D||R.y>D)&&T(O)(P,jm.CancelledByMovement)}}},[T,i,c]),N=A.useCallback(O=>{if(t===null)return{};switch(r){case Kc.Mouse:{const P={onMouseDown:S(O),onMouseMove:I(O),onMouseUp:T(O)};return a&&(P.onMouseLeave=k=>{T(O)(k,jm.CancelledOutsideElement)}),P}case Kc.Touch:return{onTouchStart:S(O),onTouchMove:I(O),onTouchEnd:T(O)};case Kc.Pointer:{const P={onPointerDown:S(O),onPointerMove:I(O),onPointerUp:T(O)};return a&&(P.onPointerLeave=k=>T(O)(k,jm.CancelledOutsideElement)),P}}},[t,T,a,r,I,S]);return A.useEffect(()=>{function O(P){const k=Pwe(P);T()(k)}return window.addEventListener("mouseup",O),window.addEventListener("touchend",O),window.addEventListener("pointerup",O),()=>{window.removeEventListener("mouseup",O),window.removeEventListener("touchend",O),window.removeEventListener("pointerup",O)}},[T]),A.useEffect(()=>()=>{b.current!==void 0&&clearTimeout(b.current)},[]),A.useEffect(()=>{x.current=t},[t]),N}const wY=()=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){const e=document.getElementById("ios-haptic-trigger");e&&e.click()}else typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50)},sw=t=>t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="number"?new Date(t):t?.toDate&&typeof t.toDate=="function"?t.toDate():new Date:new Date,ld=t=>sw(t).toISOString(),Dwe=t=>{const e=sw(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},Owe=t=>{const e=t.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},IN=t=>{const e=t;let n=0;typeof e.amount=="number"?n=e.amount:typeof e.amount=="string"&&(n=parseFloat(e.amount)),isNaN(n)&&(n=0);const r=ld(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:n,date:r,month:e.month||Dwe(r),description:e.description||"",merchant:e.merchant||void 0,type:Owe(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,splitGroupId:e.splitGroupId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}};class Td{static instance;static getInstance(){return Td.instance||(Td.instance=new Td),Td.instance}async restoreUserData(e,n){try{console.log(" BudgetService.restoreUserData: STARTING RESTORE for user:",e),await this.deleteAllUserData(e);const r=[{name:"envelopes",data:n.envelopes||[]},{name:"transactions",data:n.transactions||[]},{name:"categories",data:n.categories||[]},{name:"envelopeAllocations",data:n.allocations?Object.values(n.allocations).flat():[]},{name:"monthlyBudgets",data:this.prepareMonthlyBudgetsData(n.allocations,n.incomeSources)},{name:"appSettings",data:n.appSettings?[n.appSettings]:[]}],i=[];for(const{name:s,data:o}of r)if(Array.isArray(o))for(const c of o){if(!c.id&&s!=="monthlyBudgets")continue;const u={...c,userId:e};let f=c.id;s==="monthlyBudgets"&&c.month&&(f=c.month);const h=St(rt,"users",e,s,f);i.push({ref:h,data:u})}console.log(` Prepared ${i.length} items for restoration.`);const a=450;for(let s=0;s<i.length;s+=a){const o=Rk(rt);i.slice(s,s+a).forEach(u=>{o.set(u.ref,u.data)}),console.log(` Committing batch ${Math.floor(s/a)+1}/${Math.ceil(i.length/a)}...`),await o.commit()}console.log(" Restore completed successfully.")}catch(r){throw console.error(" BudgetService.restoreUserData failed:",r),new Error(`Failed to restore user data: ${r instanceof Error?r.message:"Unknown error"}`)}}async getEnvelopes(e){try{console.log(" BudgetService.getEnvelopes called for user:",e);const n=yi(rt,"users",e,"envelopes"),a=(await ws(n)).docs.map((s,o)=>({id:s.id,...s.data(),orderIndex:s.data().orderIndex??o})).sort((s,o)=>{const c=s.orderIndex??0,u=o.orderIndex??0;return c-u});return console.log(" Fetched envelopes:",a.length),a}catch(n){throw console.error(" BudgetService.getEnvelopes failed:",n),new Error(`Failed to fetch envelopes: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactions(e){try{console.log(" BudgetService.getTransactions: Fetching for user",e);const n=yi(rt,"users",e,"transactions"),r=Os(n,cu("date","desc")),a=(await ws(r)).docs.map(s=>{const o={id:s.id,...s.data()};return IN(o)});return console.log(` Fetched ${a.length} transactions`),a}catch(n){throw console.error(" BudgetService.getTransactions failed:",n),new Error(`Failed to fetch transactions: ${n instanceof Error?n.message:"Unknown error"}`)}}async createEnvelope(e){try{console.log(" BudgetService.createEnvelope called for user:",e.userId);const n=yi(rt,"users",e.userId,"envelopes"),r=St(n),i=vt.now(),a={...e,createdAt:i,lastUpdated:i};oa(r,a).catch(o=>console.error("Create env failed",o));const s={...e,id:r.id,createdAt:ld(i),lastUpdated:ld(i)};return console.log(" Created envelope (optimistic):",s.id),s}catch(n){throw console.error(" BudgetService.createEnvelope failed:",n),new Error(`Failed to create envelope: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelope(e,n){try{console.log(" BudgetService.updateEnvelope called for envelope:",n.id);const r=St(rt,"users",e,"envelopes",n.id);oa(r,{...n,lastUpdated:vt.now()},{merge:!0}).catch(i=>console.error("Update env failed",i)),console.log(" Updated envelope (optimistic):",n.id)}catch(r){throw console.error(" BudgetService.updateEnvelope failed:",r),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,n){try{const r=St(rt,"users",e,"envelopes",n),i=Os(yi(rt,"users",e,"transactions"),The("envelopeId","==",n)),s=(await ws(i)).docs.map(o=>ca(o.ref));await Promise.all([ca(r),...s]),console.log(" Deleted envelope and associated transactions from Firestore:",n)}catch(r){throw console.error(" BudgetService.deleteEnvelope failed:",r),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,n){try{console.log(" BudgetService.reorderEnvelopes called for user:",e);const r=n.map(i=>{const a=St(rt,"users",e,"envelopes",i.id);return oa(a,{orderIndex:i.orderIndex,lastUpdated:vt.now()},{merge:!0})});Promise.all(r).catch(i=>console.error("Reorder env failed",i)),console.log(" Reordered envelopes (optimistic)")}catch(r){throw console.error(" BudgetService.reorderEnvelopes failed:",r),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{console.log(" BudgetService.createTransaction called for user:",e.userId);const n=yi(rt,"users",e.userId,"transactions"),r=St(n),i=vt.now();if(e.paymentMethod){const c={...e.paymentMethod};c.last4===void 0&&delete c.last4,e.paymentMethod=c}const s={...Object.fromEntries(Object.entries(e).filter(([c,u])=>u!==void 0)),createdAt:i};oa(r,s).catch(c=>console.error("Create tx failed",c));const o={...e,id:r.id};return console.log(" Created transaction (optimistic):",o.id),o}catch(n){throw console.error(" BudgetService.createTransaction failed:",n),new Error(`Failed to create transaction: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateTransaction(e,n){try{if(console.log(" BudgetService.updateTransaction called for transaction:",n.id),n.paymentMethod){const a={...n.paymentMethod};a.last4===void 0&&delete a.last4,n.paymentMethod=a}const r=Object.fromEntries(Object.entries(n).filter(([a,s])=>s!==void 0)),i=St(rt,"users",e,"transactions",n.id);oa(i,r,{merge:!0}).catch(a=>console.error("Update tx failed",a)),console.log(" Updated transaction (optimistic):",n.id)}catch(r){throw console.error(" BudgetService.updateTransaction failed:",r),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,n){try{console.log(" BudgetService.deleteTransaction called for transaction:",n);const r=St(rt,"users",e,"transactions",n);ca(r).catch(i=>console.error("Delete tx failed",i)),console.log(" Deleted transaction (optimistic):",n)}catch(r){throw console.error(" BudgetService.deleteTransaction failed:",r),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async createIncomeSource(e){try{console.log(" BudgetService.createIncomeSource (Embedded) called for user:",e.userId);const n=St(rt,"users",e.userId,"monthlyBudgets",e.month),r=vt.now(),i=`inc_${r.toMillis()}_${Math.random().toString(36).substring(2,9)}`,a={...e,id:i,amount:Number(e.amount),createdAt:r,updatedAt:r};co(n,{incomeSources:Mhe(a),updatedAt:r}).catch(o=>{o.code==="not-found"?oa(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[a],allocations:{},totalIncome:0,availableToBudget:0}).catch(c=>console.error("Failed to create monthly budget doc",c)):console.error("Create income failed",o)});const s={...e,id:i,amount:Number(e.amount),createdAt:ld(r),updatedAt:ld(r)};return console.log(" Created income source (optimistic/embedded):",s.id),s}catch(n){throw console.error(" BudgetService.createIncomeSource failed:",n),new Error(`Failed to create income source: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateIncomeSource(e,n,r,i){try{console.log(" BudgetService.updateIncomeSource (Embedded) called for source:",n);const a=St(rt,"users",e,"monthlyBudgets",r);PA(a).then(s=>{if(!s.exists())return;const u=(s.data().incomeSources||[]).map(f=>{if(f.id===n){const h={...f,...i,updatedAt:vt.now()};return i.amount!==void 0&&(h.amount=Number(i.amount)),h}return f});co(a,{incomeSources:u,updatedAt:vt.now()})}).catch(s=>console.error("Update income failed",s)),console.log(" Updated income source (optimistic/embedded):",n)}catch(a){throw console.error(" BudgetService.updateIncomeSource failed:",a),a}}async deleteIncomeSource(e,n,r){try{console.log(" BudgetService.deleteIncomeSource (Embedded) called for source:",n);const i=St(rt,"users",e,"monthlyBudgets",r);PA(i).then(a=>{if(!a.exists())return;const c=(a.data().incomeSources||[]).filter(u=>u.id!==n);co(i,{incomeSources:c,updatedAt:vt.now()})}).catch(a=>console.error("Delete income failed",a)),console.log(" Deleted income source (optimistic/embedded):",n)}catch(i){throw console.error(" BudgetService.deleteIncomeSource failed:",i),new Error(`Failed to delete income source: ${i instanceof Error?i.message:"Unknown error"}`)}}async createEnvelopeAllocation(e){try{console.log(" BudgetService.createEnvelopeAllocation (Embedded) called for user:",e.userId);const n=St(rt,"users",e.userId,"monthlyBudgets",e.month),r=vt.now(),i={[`allocations.${e.envelopeId}`]:Number(e.budgetedAmount),updatedAt:r};co(n,i).catch(s=>{s.code==="not-found"?oa(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[],allocations:{[e.envelopeId]:Number(e.budgetedAmount)},totalIncome:0,availableToBudget:0}).catch(o=>console.error("Failed to create monthly budget doc",o)):console.error("Create allocation failed",s)});const a={...e,id:e.envelopeId,createdAt:ld(r),updatedAt:ld(r)};return console.log(" Created allocation (optimistic/embedded):",a.id),a}catch(n){throw console.error(" BudgetService.createEnvelopeAllocation failed:",n),new Error(`Failed to create envelope allocation: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelopeAllocation(e,n,r,i){try{console.log(" BudgetService.updateEnvelopeAllocation (Embedded) called for envelope:",n);const a=St(rt,"users",e,"monthlyBudgets",r),s={updatedAt:vt.now()};i.budgetedAmount!==void 0&&(s[`allocations.${n}`]=Number(i.budgetedAmount)),co(a,s).catch(o=>console.error("Update allocation failed",o)),console.log(" Updated allocation (optimistic/embedded):",n)}catch(a){throw console.error(" BudgetService.updateEnvelopeAllocation failed:",a),new Error(`Failed to update envelope allocation: ${a instanceof Error?a.message:"Unknown error"}`)}}async deleteEnvelopeAllocation(e,n,r){try{console.log(" BudgetService.deleteEnvelopeAllocation (Embedded) called for envelope:",n);const i=St(rt,"users",e,"monthlyBudgets",r);co(i,{[`allocations.${n}`]:b5(),updatedAt:vt.now()}).catch(a=>console.error("Delete allocation failed",a)),console.log(" Deleted allocation (optimistic/embedded):",n)}catch(i){throw console.error(" BudgetService.deleteEnvelopeAllocation failed:",i),new Error(`Failed to delete envelope allocation: ${i instanceof Error?i.message:"Unknown error"}`)}}async getMonthData(e,n){try{console.log(` BudgetService.getMonthData (Embedded): Fetching for user ${e}, month ${n}`);const r=St(rt,"users",e,"monthlyBudgets",n),i=await PA(r);if(!i.exists())return console.log(` No budget data found for ${n}, returning empty defaults.`),{incomeSources:[],allocations:[]};const a=i.data(),s=(a.incomeSources||[]).map(u=>({...u,amount:Number(u.amount),createdAt:u.createdAt?.toDate?u.createdAt.toDate().toISOString():u.createdAt||new Date().toISOString(),updatedAt:u.updatedAt?.toDate?u.updatedAt.toDate().toISOString():u.updatedAt||new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime()),o=a.allocations||{},c=Object.entries(o).map(([u,f])=>({id:u,userId:e,envelopeId:u,month:n,budgetedAmount:Number(f),createdAt:a.createdAt?.toDate?a.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime());return console.log(` Fetched ${s.length} income sources and ${c.length} allocations for ${n}`),{incomeSources:s,allocations:c}}catch(r){throw console.error(" BudgetService.getMonthData failed:",r),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{console.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const n={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(m=>m.id));console.log(` Found ${r.length} existing envelopes`);const a=yi(rt,"users",e,"envelopeAllocations"),s=await ws(a),o=[],c=new Set;for(const m of s.docs){const b=m.data();c.add(b.month),i.has(b.envelopeId)||(o.push(m.id),console.log(` Found orphaned allocation: ${m.id} for envelope ${b.envelopeId} in month ${b.month}`))}if(o.length>0){const m=o.map(b=>ca(St(rt,"users",e,"envelopeAllocations",b)));await Promise.all(m),n.orphanedAllocationsDeleted+=o.length,n.details.deletedAllocationIds.push(...o),console.log(` Deleted ${o.length} orphaned allocations (legacy)`)}const u=yi(rt,"users",e,"monthlyBudgets"),f=await ws(u);for(const m of f.docs){const x=m.data().allocations||{},w={};let S=!1;Object.keys(x).forEach(T=>{i.has(T)||(w[`allocations.${T}`]=b5(),S=!0,console.log(` Found orphaned embedded allocation in ${m.id} for envelope ${T}`),n.orphanedAllocationsDeleted++,n.details.deletedAllocationIds.push(`${m.id}_${T}`))}),S&&(w.updatedAt=vt.now(),await co(m.ref,w),c.add(m.id))}const h=await this.getTransactions(e),g=[];for(const m of h)i.has(m.envelopeId)||(g.push(m.id),console.log(` Found orphaned transaction: ${m.id} for envelope ${m.envelopeId}`));if(g.length>0){const m=g.map(b=>ca(St(rt,"users",e,"transactions",b)));await Promise.all(m),n.orphanedTransactionsDeleted=g.length,n.details.deletedTransactionIds=g,console.log(` Deleted ${g.length} orphaned transactions`)}return n.details.monthsProcessed=Array.from(c),console.log(" Cleanup completed:",{orphanedAllocationsDeleted:n.orphanedAllocationsDeleted,orphanedTransactionsDeleted:n.orphanedTransactionsDeleted,monthsProcessed:n.details.monthsProcessed.length}),n}catch(n){throw console.error(" BudgetService.cleanupOrphanedData failed:",n),new Error(`Failed to cleanup orphaned data: ${n instanceof Error?n.message:"Unknown error"}`)}}subscribeToMonthlyBudget(e,n,r){const i=St(rt,"users",e,"monthlyBudgets",n);return hf(i,a=>{if(!a.exists()){r({incomeSources:[],allocations:[]});return}const s=a.data(),o=(s.incomeSources||[]).map(f=>({...f,amount:Number(f.amount),createdAt:f.createdAt?.toDate?f.createdAt.toDate().toISOString():f.createdAt||new Date().toISOString(),updatedAt:f.updatedAt?.toDate?f.updatedAt.toDate().toISOString():f.updatedAt||new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime()),c=s.allocations||{},u=Object.entries(c).map(([f,h])=>({id:f,userId:e,envelopeId:f,month:n,budgetedAmount:Number(h),createdAt:s.createdAt?.toDate?s.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:s.updatedAt?.toDate?s.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime());r({incomeSources:o,allocations:u})})}prepareMonthlyBudgetsData(e,n){const r=[],i=new Set;return e&&Object.keys(e).forEach(a=>i.add(a)),n&&Object.keys(n).forEach(a=>i.add(a)),i.forEach(a=>{const s=e?.[a]||[],o=n?.[a]||[],c={};s.forEach(f=>{c[f.envelopeId]=f.budgetedAmount});const u={month:a,userId:"",incomeSources:o,allocations:c,totalIncome:o.reduce((f,h)=>f+Number(h.amount||0),0),availableToBudget:o.reduce((f,h)=>f+Number(h.amount||0),0)-s.reduce((f,h)=>f+Number(h.budgetedAmount||0),0),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r.push(u)}),r}async deleteAllUserData(e){try{console.log(" BudgetService.deleteAllUserData: STARTING DELETION for user:",e);const n=["envelopes","transactions","categories","incomeSources","envelopeAllocations","monthlyBudgets","appSettings"];for(const r of n){console.log(` Deleting collection: ${r}...`);const i=yi(rt,"users",e,r),a=await ws(i);if(a.empty){console.log("   (Empty collection)");continue}const s=a.docs.map(o=>ca(o.ref));await Promise.all(s),console.log(`    Deleted ${a.size} documents from ${r}`)}console.log(" All user data deleted successfully.")}catch(n){throw console.error(" BudgetService.deleteAllUserData failed:",n),new Error(`Failed to delete all user data: ${n instanceof Error?n.message:"Unknown error"}`)}}}const kN=Td.getInstance();class Wc{static instance;constructor(){}static getInstance(){return Wc.instance||(Wc.instance=new Wc),Wc.instance}createId(){return St(yi(rt,"temp")).id}async createCategory(e){const n=St(rt,`users/${e.userId}/categories`,e.id);return await oa(n,e),e}async getCategories(e){const n=Os(yi(rt,`users/${e}/categories`),cu("orderIndex","asc"));return(await ws(n)).docs.map(i=>i.data())}async updateCategory(e,n){const r=St(rt,`users/${e}/categories`,n.id);await oa(r,n,{merge:!0})}async deleteCategory(e,n){const r=St(rt,`users/${e}/categories`,n);await ca(r)}async reorderCategories(e,n){const r=Rk(rt);n.forEach((i,a)=>{const s=St(rt,`users/${e}/categories`,i.id);r.update(s,{orderIndex:a})}),await r.commit()}async deduplicateCategories(e){const n=await this.getCategories(e),r=new Map,i=[];for(const s of n){const o=s.name.toLowerCase().trim();r.has(o)?i.push(s.id):r.set(o,s)}if(i.length===0)return console.log(" No duplicate categories found"),0;console.log(` Found ${i.length} duplicate categories to remove`);const a=450;for(let s=0;s<i.length;s+=a){const o=Rk(rt);i.slice(s,s+a).forEach(u=>{const f=St(rt,`users/${e}/categories`,u);o.delete(f)}),await o.commit(),console.log(` Deleted batch ${Math.floor(s/a)+1}`)}return console.log(` Removed ${i.length} duplicate categories`),i.length}subscribeToCategories(e,n){const r=Os(yi(rt,`users/${e}/categories`),cu("orderIndex","asc"));return hf(r,i=>{const a=i.docs.map(s=>s.data());n(a)},i=>{console.error(" Category subscription error:",i)})}}Wc.getInstance();const uC=t=>yi(rt,"users",t,"transactions"),Nwe={subscribeToTransactions:(t,e)=>{const n=Os(uC(t),cu("date","desc"));return hf(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));e(a)})},getAllTransactions:async t=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=Os(uC(t),cu("date","desc")),r=(await ws(e)).docs.map(i=>{const a={id:i.id,...i.data()};return IN(a)});return console.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),console.log(` Original transaction had temp ID: ${n}`);try{console.log(" About to call addDoc with:",r);const i=await L_(uC(e),r);console.log(" addDoc succeeded, docRef:",i),console.log(` Document ID: ${i.id}`),console.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return console.log(" Final result object:",a),a}catch(i){throw console.error(" addDoc failed:",i),console.error("Error message:",i.message),i}},updateTransaction:async(t,e,n)=>{const r=St(rt,"users",t,"transactions",e);return await co(r,n)},deleteTransaction:async(t,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=St(rt,"users",t,"transactions",e);console.log(` Deleting document at path: ${n.path}`),await ca(n),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n),console.error("Error message:",n.message),n}}},dC=t=>yi(rt,"users",t,"envelopes"),Rwe={subscribeToEnvelopes:(t,e)=>{const n=Os(dC(t),cu("orderIndex","asc"));return hf(n,i=>{const a=i.docs.map(s=>{const o=s.data();return{id:s.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated}});e(a)})},getAllEnvelopes:async t=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=dC(t),i=(await ws(e)).docs.map((a,s)=>{const o=a.data();return{id:a.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated,orderIndex:o.orderIndex??s}}).sort((a,s)=>{const o=a.orderIndex??0,c=s.orderIndex??0;return o-c});return console.log(" Fetched envelopes:",i.length),i}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await L_(dC(e),r)).id,...r,userId:e}}catch(i){throw console.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=St(rt,"users",t,"envelopes",e.id);return await oa(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=St(rt,"users",t,"envelopes",e);return await co(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=St(rt,"users",t,"envelopes",e);await ca(n),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},fC=t=>yi(rt,"users",t,"distributionTemplates"),Mwe={subscribeToDistributionTemplates:(t,e)=>{const n=Os(fC(t),cu("lastUsed","desc"));return hf(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=Os(fC(t),cu("lastUsed","desc"));return(await ws(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await L_(fC(e),r);console.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return console.log(" Final template result object:",a),a}catch(i){throw console.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=St(rt,"users",t,"distributionTemplates",e.id);return await oa(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=St(rt,"users",t,"distributionTemplates",e);return await co(r,n)},deleteDistributionTemplate:async(t,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=St(rt,"users",t,"distributionTemplates",e);await ca(n),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},hC=t=>yi(rt,"users",t,"appSettings"),_Y={subscribeToAppSettings:(t,e)=>{const n=Os(hC(t),m5(1));return hf(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(s=>({id:s.id,...s.data()}))[0];e(a)})},getAppSettings:async t=>{const e=Os(hC(t),m5(1)),n=await ws(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await L_(hC(e),n);console.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return console.log(" Final settings result object:",i),i}catch(r){throw console.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=St(rt,"users",t,"appSettings",e.id);return await oa(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=St(rt,"users",t,"appSettings",e);return await oa(r,n,{merge:!0})},deleteAppSettings:async(t,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=St(rt,"users",t,"appSettings",e);await ca(n),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},N6=Object.freeze(Object.defineProperty({__proto__:null,AppSettingsService:_Y},Symbol.toStringTag,{value:"Module"})),jwe=t=>IN(t),zwe=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated?.toDate?.()?t.lastUpdated.toDate().toISOString():t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig,categoryId:t.categoryId}),Lwe=t=>({id:t.id,userId:t.userId,name:t.name,orderIndex:t.orderIndex,isArchived:t.isArchived,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt}),R6=(t,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=t.getState().currentMonth;console.log(" Current month for subscriptions:",n);const r=Rwe.subscribeToEnvelopes(e,f=>{console.log(" Real-time sync: Envelopes updated",f.length);const h=f.map(zwe),g=t.getState(),m=new Set(g.envelopes.map(w=>w.id)),b=new Set(h.map(w=>w.id)),x=[...h.filter(w=>m.has(w.id)),...g.envelopes.filter(w=>!b.has(w.id))];t.setState({envelopes:x})}),i=Nwe.subscribeToTransactions(e,f=>{console.log(" Real-time sync: Transactions updated",f.length);const h=f.map(jwe),g=t.getState(),m=new Set(g.transactions.map(w=>`${w.id}-${w.month}`)),b=new Set(h.map(w=>`${w.id}-${w.month}`)),x=[...h.filter(w=>m.has(`${w.id}-${w.month}`)),...g.transactions.filter(w=>!b.has(`${w.id}-${w.month}`))];t.setState({transactions:x})}),s=Wc.getInstance().subscribeToCategories(e,f=>{console.log(" Real-time sync: Categories updated",f.length);const h=f.map(Lwe),g=Array.from(new Map(h.map(m=>[m.id,m])).values());g.length!==h.length&&console.warn(" Duplicate categories detected in real-time update, deduplicating..."),t.setState({categories:g})}),o=Mwe.subscribeToDistributionTemplates(e,f=>{console.log(" Real-time sync: Templates updated from Firebase",f.length)}),c=_Y.subscribeToAppSettings(e,f=>{console.log(" Real-time sync: Settings updated",f?"found":"null");const h=t.getState();if(f){const g={...h.appSettings,...f,paymentSources:f.paymentSources??h.appSettings?.paymentSources??[]};t.setState({appSettings:g})}else console.log(" Firebase settings null, preserving local state")}),u=kN.subscribeToMonthlyBudget(e,n,f=>{console.log(` Real-time sync: Monthly budget updated (${f.incomeSources.length} sources, ${f.allocations.length} allocations)`);const h=t.getState();t.setState({incomeSources:{...h.incomeSources,[n]:f.incomeSources},allocations:{...h.allocations,[n]:f.allocations}})});window.__firebaseUnsubscribers={envelopes:r,transactions:i,categories:s,templates:o,settings:c,monthlyBudget:u},console.log(" Real-time subscriptions active - cross-device sync enabled")},Vwe=t=>{const{useBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),e.setState({isOnline:!0})}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),e.setState({isOnline:navigator.onLine});const i=n.getState();i.isAuthenticated&&i.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),R6(e,r())),n.subscribe(s=>{if(s.isAuthenticated&&s.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),R6(e,r());else if(!s.isAuthenticated&&!s.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const o=window.__firebaseUnsubscribers;o.envelopes&&o.envelopes(),o.transactions&&o.transactions(),o.categories&&o.categories(),o.templates&&o.templates(),o.settings&&o.settings(),o.monthlyBudget&&o.monthlyBudget(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let a=e.getState().currentMonth;e.subscribe(s=>{if(s.currentMonth!==a&&s.isAuthenticated){console.log(" Month changed from",a,"to",s.currentMonth),a=s.currentMonth;const o=r();if(o&&window.__firebaseUnsubscribers){const c=window.__firebaseUnsubscribers;c.monthlyBudget&&c.monthlyBudget(),console.log(" Unsubscribed from old month data"),c.monthlyBudget=kN.subscribeToMonthlyBudget(o,s.currentMonth,u=>{console.log(" Real-time sync: Monthly budget updated for new month");const f=e.getState();e.setState({incomeSources:{...f.incomeSources,[s.currentMonth]:u.incomeSources},allocations:{...f.allocations,[s.currentMonth]:u.allocations}})}),console.log(" Subscribed to monthly data for new month:",s.currentMonth)}}})},r1=()=>Ga.getState().currentUser?.id||"",On=Td.getInstance(),rl=Wc.getInstance(),sn=tD()(eue(i7((t,e)=>({envelopes:[],transactions:[],categories:[],appSettings:null,incomeSources:{},allocations:{},currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null,setIsOnboardingActive:n=>{t({isOnboardingActive:n})},checkAndStartOnboarding:async()=>{const n=r1();if(!n){console.log(" No user ID, skipping onboarding check");return}const r=`onboardingCompleted_${n}`,i=typeof localStorage<"u"?localStorage.getItem(r)==="true":!1;if(console.log(" checkAndStartOnboarding called:",{userId:n,isOnboardingCompleted:i,isOnboardingActive:e().isOnboardingActive,localStorage_key:r,localStorage_value:localStorage.getItem(r)}),i){t({isOnboardingCompleted:!0}),console.log(" Skipping onboarding: already completed (localStorage)");return}try{if((await On.getEnvelopes(n)).length>0){console.log(" Existing user detected on new device  skipping onboarding, setting localStorage"),localStorage.setItem(r,"true"),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}}catch(a){console.error(" Failed to check existing envelopes for onboarding:",a),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}e().isOnboardingActive||(console.log(" Starting onboarding for new user - setting isOnboardingActive to TRUE"),t({isOnboardingCompleted:!1,isOnboardingActive:!0}),console.log(" isOnboardingActive set to:",e().isOnboardingActive))},completeOnboarding:()=>{const n=r1();if(n){const r=`onboardingCompleted_${n}`;localStorage.setItem(r,"true"),console.log(" Onboarding completed for user:",n)}t({isOnboardingCompleted:!0,isOnboardingActive:!1})},resetOnboarding:()=>{const n=r1();if(n){const r=`onboardingCompleted_${n}`;localStorage.removeItem(r),console.log(" Onboarding reset for user:",n)}t({isOnboardingCompleted:!1,isOnboardingActive:!0})},clearMonthData:async n=>{try{t({isLoading:!0,error:null}),console.log(` Clearing all data for month: ${n}`);const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(s=>s.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const{monthlyBudgetService:a}=await Pt(async()=>{const{monthlyBudgetService:s}=await import("./MonthlyBudgetService-BVxpo93u.js");return{monthlyBudgetService:s}},[]);await a.clearMonthData(i.id,n),await e().init(),console.log(` Cleared month data for ${n}`),t({isLoading:!1})}catch(r){throw console.error(" clearMonthData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to clear month data"}),r}},fetchMonthData:async n=>{try{const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping month data fetch");return}console.log(`Fetching month data for: ${n}`);const a=await On.getMonthData(i.id,n),s=e();t({incomeSources:{...s.incomeSources,[n]:a.incomeSources},allocations:{...s.allocations,[n]:a.allocations}}),console.log(` Fetched month data for ${n}`),(async()=>{const c=e(),u=c.allocations[n]||[],f=c.transactions.filter(g=>g.month===n);let h=0;for(const g of u){const m=c.envelopes.find(x=>x.id===g.envelopeId);if(m?.isPiggybank)continue;const b=f.find(x=>x.envelopeId===g.envelopeId&&(x.description==="Monthly Budget Allocation"||x.description==="Monthly Allocation"||x.description==="Budgeted"||x.description==="Piggybank Contribution"));b?b.amount!==g.budgetedAmount&&(console.log(` Repairing mismatch for envelope ${m?.name||g.envelopeId}: Alloc ${g.budgetedAmount} vs Tx ${b.amount}`),await c.updateTransaction({...b,amount:g.budgetedAmount}),h++):g.budgetedAmount>0&&(console.log(` Repairing missing transaction for envelope ${m?.name||g.envelopeId}`),await c.addTransaction({description:"Budgeted",amount:g.budgetedAmount,envelopeId:g.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),h++)}h>0&&console.log(` Repaired ${h} allocation discrepancies for ${n}`)})().catch(c=>console.error("Verification failed:",c))}catch(r){console.error(` Failed to fetch month data for ${n}:`,r)}},removeEnvelopeFromMonth:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(` Removing envelope ${n} from month ${r}`);const i=e(),a=i.allocations[r]?.find(o=>o.envelopeId===n);a?await e().deleteEnvelopeAllocation(a.id):console.log(` No allocation found for envelope ${n} in ${r}`);const s=i.transactions.filter(o=>o.envelopeId===n&&(o.month===r||o.date.startsWith(r)));s.length>0&&(console.log(` Deleting ${s.length} transactions for envelope ${n} in ${r}`),await Promise.all(s.map(o=>e().deleteTransaction(o.id)))),t({isLoading:!1}),console.log(` Removed envelope ${n} from month ${r}`)}catch(i){throw console.error(" removeEnvelopeFromMonth failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to remove envelope from month"}),i}},setMonth:async n=>{t({currentMonth:n});const r=e();(r.incomeSources[n]===void 0||r.allocations[n]===void 0)&&(console.log(`Month ${n} data missing in store, fetching...`),t({isLoading:!0}),await e().fetchMonthData(n),t({isLoading:!1}))},init:async()=>{console.log("BudgetStore initializing...");const n=e();try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(g=>g.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping data fetch"),t({isLoading:!1});return}console.log(`Fetching data for user: ${i.id}, month: ${n.currentMonth}`);const[a,s,o,c]=await Promise.all([On.getEnvelopes(i.id),On.getTransactions(i.id),rl.getCategories(i.id).catch(g=>(console.error(" Failed to load categories:",g),[])),On.getMonthData(i.id,n.currentMonth)]);let u=Array.from(new Map(o.map(g=>[g.id,g])).values());const f=new Set;let h=!1;for(const g of u){const m=g.name.toLowerCase().trim();if(f.has(m)){h=!0;break}f.add(m)}h&&i&&(console.log(" Duplicate category names detected, running Firestore cleanup..."),await rl.deduplicateCategories(i.id)>0&&(u=await rl.getCategories(i.id))),t({envelopes:a,transactions:s,categories:u,incomeSources:{...n.incomeSources,[n.currentMonth]:c.incomeSources},allocations:{...n.allocations,[n.currentMonth]:c.allocations},isLoading:!1,error:null}),console.log(` BudgetStore initialized: ${a.length} envelopes, ${s.length} transactions, ${o.length} categories, ${c.incomeSources.length} income sources, ${c.allocations.length} allocations`)}catch(r){console.error(" BudgetStore initialization failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},fetchCategories:async()=>{try{t({isLoading:!0,error:null});const r=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(s=>s.useAuthStore.getState())).currentUser;if(!r)return;const i=await rl.getCategories(r.id),a=Array.from(new Map(i.map(s=>[s.id,s])).values());t({categories:a,isLoading:!1})}catch(n){console.error("Failed to fetch categories:",n),t({isLoading:!1})}},addCategory:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");const a=e().categories.find(c=>c.name.toLowerCase().trim()===(n.name||"").toLowerCase().trim());if(a)return console.log(` Category "${n.name}" already exists, skipping creation`),t({isLoading:!1}),a.id;const s=rl.createId(),o={...n,id:s,userId:i.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),orderIndex:e().categories.length};return await rl.createCategory(o),t(c=>c.categories.some(f=>f.id===s)?{isLoading:!1}:{categories:[...c.categories,o],isLoading:!1}),s}catch(r){throw console.error("Failed to add category:",r),t({isLoading:!1}),r}},updateCategory:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(s=>s.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");const a={...n,updatedAt:new Date().toISOString()};await rl.updateCategory(i.id,a),t(s=>({categories:s.categories.map(o=>o.id===n.id?a:o),isLoading:!1}))}catch(r){throw console.error("Failed to update category:",r),t({isLoading:!1}),r}},deleteCategory:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");await rl.deleteCategory(i.id,n),t(a=>({categories:a.categories.filter(s=>s.id!==n),isLoading:!1}))}catch(r){throw console.error("Failed to delete category:",r),t({isLoading:!1}),r}},reorderCategories:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");const a=e(),s=new Map;n.forEach((c,u)=>s.set(c,u));const o=a.categories.map(c=>{if(!s.has(c.id))return c;const u=s.get(c.id);return c.orderIndex===u?c:{...c,orderIndex:u}});t({categories:o.sort((c,u)=>c.orderIndex-u.orderIndex)}),await rl.reorderCategories(i.id,o),t({isLoading:!1})}catch(r){throw console.error("Failed to reorder categories:",r),t({isLoading:!1}),r}},addEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a={...n,userId:i.id},s=await On.createEnvelope(a);return t(o=>o.envelopes.some(u=>u.id===s.id)?{isLoading:!1}:{envelopes:[...o.envelopes,s],isLoading:!1}),console.log(" Added envelope:",s.id),s.id}catch(r){throw console.error(" addEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await On.updateEnvelope(i.id,n),t(a=>({envelopes:a.envelopes.map(s=>s.id===n.id?n:s),isLoading:!1})),console.log(" Updated envelope:",n.id)}catch(r){throw console.error(" updateEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await On.deleteEnvelope(i.id,n),t(a=>({envelopes:a.envelopes.filter(s=>s.id!==n),transactions:a.transactions.filter(s=>s.envelopeId!==n),isLoading:!1})),console.log(" Deleted envelope:",n)}catch(r){throw console.error(" deleteEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async n=>{try{t({isLoading:!0,error:null});const r=e(),i=new Map;n.forEach((u,f)=>{i.set(u,f)});const a=r.envelopes.map(u=>{if(!i.has(u.id))return u;const f=i.get(u.id);return u.orderIndex===f?u:{...u,orderIndex:f}}),s=a.filter((u,f)=>u!==r.envelopes[f]);if(!s.length){t({isLoading:!1});return}const c=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!c)throw new Error("No authenticated user found");await On.reorderEnvelopes(c.id,s),t({envelopes:a,isLoading:!1}),console.log(" Reordered envelopes")}catch(r){throw console.error(" reorderEnvelopes failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},addTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(n.date),s=n.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,o={...n,userId:i.id,month:s},c=await On.createTransaction(o);t(u=>u.transactions.some(h=>h.id===c.id)?{isLoading:!1}:{transactions:[...u.transactions,c],isLoading:!1}),console.log(" Added transaction:",c.id)}catch(r){throw console.error(" addTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(n.date),s=n.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,o={...n,month:s};await On.updateTransaction(i.id,o),t(c=>({transactions:c.transactions.map(u=>u.id===n.id?o:u),isLoading:!1})),console.log(" Updated transaction:",n.id)}catch(r){throw console.error(" updateTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await On.deleteTransaction(i.id,n),t(a=>({transactions:a.transactions.filter(s=>s.id!==n),isLoading:!1})),console.log(" Deleted transaction:",n)}catch(r){throw console.error(" deleteTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(n.date),s=n.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,o={...n,month:s};await On.updateTransaction(i.id,o),t(c=>{const u=c.transactions.findIndex(h=>h.id===n.id);let f;return u>=0?f=c.transactions.map(h=>h.id===n.id?o:h):f=[...c.transactions,o],{transactions:f,isLoading:!1}}),console.log(" Restored transaction:",n.id)}catch(r){throw console.error(" restoreTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to restore transaction"}),r}},transferFunds:async(n,r,i,a,s)=>{try{const o=s?typeof s=="string"?s:s.toISOString():new Date().toISOString(),c=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(u=>u.id===r)?.name||"envelope"}`,amount:i,envelopeId:n,date:o,type:"Expense",transferId:c,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(u=>u.id===n)?.name||"envelope"}`,amount:i,envelopeId:r,date:o,type:"Income",transferId:c,reconciled:!1}),console.log(" Transfer completed")}catch(o){throw console.error(" transferFunds failed:",o),o}},fetchData:async()=>{await e().init()},renameEnvelope:async(n,r)=>{try{t({isLoading:!0,error:null});const a=e().envelopes.find(u=>u.id===n);if(!a)throw new Error("Envelope not found");t(u=>({envelopes:u.envelopes.map(f=>f.id===n?{...f,name:r}:f),isLoading:!0}));const o=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!o)throw new Error("No authenticated user found");const c={...a,name:r};await On.updateEnvelope(o.id,c),t({isLoading:!1}),console.log(" Renamed envelope:",n)}catch(i){throw console.error(" renameEnvelope failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},getEnvelopeBalance:(n,r)=>{const i=e(),a=i.envelopes.find(s=>s.id===n);if(!a)return console.log(` getEnvelopeBalance: Envelope ${n} not found`),0;if(a.isPiggybank){const s=i.transactions.filter(h=>h.envelopeId===n),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}if(r){const s=i.transactions.filter(h=>h.envelopeId===n&&h.month===r),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}return console.warn(` getEnvelopeBalance: Month not provided for non-piggybank envelope ${n}. Returning 0.`),0},resetData:async()=>{console.log(" Resetting all data"),t({isLoading:!0});try{const r=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(i=>i.useAuthStore.getState())).currentUser;r?(console.log(" Deleting all data from Firestore for user:",r.id),await On.deleteAllUserData(r.id)):console.warn(" No user logged in, only clearing local state"),t({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null}),console.log(" Reset data complete")}catch(n){throw console.error(" resetData failed:",n),t({isLoading:!1,error:n instanceof Error?n.message:"Failed to reset data"}),n}},importData:async n=>{try{if(t({isLoading:!0,error:null}),!n||typeof n!="object")throw new Error("Invalid data format");const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("You must be logged in to restore data.");return console.log(" Starting Time Machine Restore for user:",i.id),await On.restoreUserData(i.id,n),console.log(" Reloading app state from cloud..."),await e().init(),t({isLoading:!1}),{success:!0,message:"Data restored successfully from backup."}}catch(r){return console.error(" importData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},updateAppSettings:async n=>{try{t({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:n.theme??r.appSettings?.theme??"system",fontSize:n.fontSize??r.appSettings?.fontSize??"medium",enableMoveableReorder:n.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,paymentSources:n.paymentSources??r.appSettings?.paymentSources??[],siriToken:n.siriToken??r.appSettings?.siriToken};(n.userId||r.appSettings?.userId)&&(i.userId=n.userId??r.appSettings?.userId),i.paymentSources&&(i.paymentSources=i.paymentSources.map(o=>{const c={...o};return c.last4===void 0&&delete c.last4,c}));const s=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(s){const{AppSettingsService:o}=await Pt(async()=>{const{AppSettingsService:c}=await Promise.resolve().then(()=>N6);return{AppSettingsService:c}},void 0);await o.updateAppSettings(s.id,i.id,i)}t({appSettings:i,isLoading:!1}),console.log(" Updated app settings")}catch(r){throw console.error(" updateAppSettings failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(s=>s.useAuthStore.getState())).currentUser;if(i){const{AppSettingsService:s}=await Pt(async()=>{const{AppSettingsService:c}=await Promise.resolve().then(()=>N6);return{AppSettingsService:c}},void 0),o=await s.getAppSettings(i.id);if(o){t({appSettings:o}),console.log(" Loaded app settings from Firestore");return}}const a={id:"default",theme:"system",fontSize:"medium",enableMoveableReorder:!0,paymentSources:[]};i&&(a.userId=i.id),t({appSettings:a}),console.log(" Initialized default app settings")}catch(n){console.error(" initializeAppSettings failed:",n),t({error:n instanceof Error?n.message:"Failed to initialize settings"})}},updatePiggybankContribution:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Updating piggybank contribution:",{envelopeId:n,newAmount:r});const a=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const s=e().envelopes.find(c=>c.id===n&&c.isPiggybank);if(!s)throw new Error("Piggybank not found");const o={...s,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:s.piggybankConfig?.targetAmount,color:s.piggybankConfig?.color,icon:s.piggybankConfig?.icon,paused:s.piggybankConfig?.paused??!1}};if(console.log(" Updating envelope in Firestore:",o),await On.updateEnvelope(a.id,o),console.log(" Envelope updated successfully"),t(c=>({envelopes:c.envelopes.map(u=>u.id===n?o:u),isLoading:!1})),!s.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(n,r),setTimeout(()=>{e().transactions.find(u=>u.envelopeId===n&&(u.description==="Monthly Allocation"||u.description==="Piggybank Contribution"))||console.warn(" Piggybank contribution transaction not found after update")},1e3)}catch(c){console.error(" Failed to update piggybank contribution:",c)}console.log(" Piggybank contribution updated successfully")}catch(i){throw console.error(" updatePiggybankContribution failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}},addIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null});const a=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");console.log(" Adding income source:",{month:n,source:r});const s=await On.createIncomeSource({...r,userId:a.id,month:n});t(o=>{const c=o.incomeSources[n]||[];return c.some(f=>f.id===s.id)?{isLoading:!1}:{incomeSources:{...o.incomeSources,[n]:[...c,s]},isLoading:!1}}),console.log(" Added income source:",s.id)}catch(i){throw console.error(" addIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Updating income source:",{month:n,sourceId:r.id}),t(s=>({incomeSources:{...s.incomeSources,[n]:s.incomeSources[n]?.map(o=>o.id===r.id?{...r,updatedAt:new Date().toISOString()}:o)||[]},isLoading:!1}));const a=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(s=>s.useAuthStore.getState())).currentUser;if(!a)return;await On.updateIncomeSource(a.id,r.id,n,r),console.log(" Updated income source:",r.id)}catch(i){throw console.error(" updateIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Deleting income source:",{month:n,sourceId:r}),t(s=>({incomeSources:{...s.incomeSources,[n]:s.incomeSources[n]?.filter(o=>o.id!==r)||[]},isLoading:!1}));const a=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(s=>s.useAuthStore.getState())).currentUser;if(!a)return;await On.deleteIncomeSource(a.id,r,n),console.log(" Deleted income source:",r)}catch(i){throw console.error(" deleteIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(b=>b.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");console.log(" Copying allocations from previous month:",n);const[a,s]=n.split("-").map(Number);let o=a,c=s-1;c<1&&(o=a-1,c=12);const u=`${o}-${String(c).padStart(2,"0")}`;(!e().incomeSources[u]||!e().allocations[u])&&(console.log(` Previous month ${u} data missing, fetching...`),await e().fetchMonthData(u));const f=e().incomeSources[u]||[];if(console.log(` Found ${f.length} income sources from ${u}`),f.length>0){for(const b of f){const{id:x,...w}=b;await e().addIncomeSource(n,w)}console.log(` Copied ${f.length} income sources to ${n}`)}const h=e().allocations[u]||[];console.log(` Found ${h.length} allocations from ${u}`);const g=h.filter(b=>{const x=e().envelopes.find(w=>w.id===b.envelopeId);return!!x&&!x.isPiggybank});if(g.length>0){for(const b of g)await e().createEnvelopeAllocation({envelopeId:b.envelopeId,budgetedAmount:b.budgetedAmount,userId:i.id,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),b.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:b.budgetedAmount,envelopeId:b.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0});console.log(` Copied ${g.length} regular allocations to ${n}`)}const m=e().envelopes.filter(b=>b.isPiggybank);console.log(` Processing ${m.length} piggybanks for ${n}`);for(const b of m){const x=b.piggybankConfig?.monthlyContribution,w=b.piggybankConfig?.paused??!1;if(!w&&x&&x>0)try{console.log(` Setting piggybank allocation for ${b.name}: ${x}`),await e().setEnvelopeAllocation(b.id,x)}catch(S){console.error(` Failed to set allocation for piggybank ${b.name}:`,S)}else console.log(` Skipping piggybank ${b.name} (paused=${w}, contribution=${x})`)}t({isLoading:!1}),console.log(` Complete monthly setup copied to ${n}`)}catch(r){throw console.error(" copyPreviousMonthAllocations failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(n,r)=>{try{t({isLoading:!0,error:null});const a=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(f=>f.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const s=e().currentMonth,o=e().envelopes.find(f=>f.id===n);if(!o){console.error(` setEnvelopeAllocation: Envelope ${n} not found in store! Aborting.`),t({isLoading:!1});return}const c=!!o.isPiggybank;console.log(` setEnvelopeAllocation called: envelopeId=${n}, amount=${r}, currentMonth=${s}, isPiggybank=${c}`);const u=e().allocations[s]?.find(f=>f.envelopeId===n);if(u?await e().updateEnvelopeAllocation(u.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r,userId:a.id,month:s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),c&&r>0&&!o?.piggybankConfig?.paused){const f=e().transactions.find(h=>h.envelopeId===n&&h.month===s&&(h.description==="Monthly Allocation"||h.description==="Piggybank Contribution"));if(f){const h={...f,amount:r,description:"Piggybank Contribution"};await e().updateTransaction(h)}else{const h={description:"Piggybank Contribution",amount:r,envelopeId:n,type:"Income",month:s,date:`${s}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(h)}}if(!c&&r>0){const f=e().transactions.find(h=>h.envelopeId===n&&h.month===s&&(h.description==="Monthly Budget Allocation"||h.description==="Budgeted"));if(f){const h={...f,amount:r,description:"Budgeted"};await e().updateTransaction(h)}else{const h={description:"Budgeted",amount:r,envelopeId:n,type:"Income",month:s,date:`${s}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(h)}}console.log(" Envelope allocation set successfully")}catch(i){throw console.error(" setEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async n=>{try{const i=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=e().currentMonth,s=await On.createEnvelopeAllocation({envelopeId:n.envelopeId,budgetedAmount:n.budgetedAmount,userId:i.id,month:a});t(o=>{const c=o.allocations[a]||[];return c.some(f=>f.id===s.id)?{isLoading:!1}:{allocations:{...o.allocations,[a]:[...c,s]},isLoading:!1}}),console.log(" Created envelope allocation:",s.id)}catch(r){throw console.error(" createEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(n,r)=>{try{console.log(" Updating envelope allocation:",{id:n,updates:r});const i=e().currentMonth,s=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(f=>f.useAuthStore.getState())).currentUser;if(!s)throw new Error("No authenticated user found");const o=e().allocations[i]?.find(f=>f.id===n);if(!o)throw new Error("Allocation not found");const c=e().envelopes.find(f=>f.id===o.envelopeId),u=c?.isPiggybank;if(await On.updateEnvelopeAllocation(s.id,o.envelopeId,i,{budgetedAmount:r.budgetedAmount}),t(f=>({allocations:{...f.allocations,[i]:f.allocations[i]?.map(h=>h.id===n?{...h,...r,updatedAt:new Date().toISOString()}:h)||[]},isLoading:!1})),u&&r.budgetedAmount!==void 0){const f=e().transactions.find(h=>h.envelopeId===o.envelopeId&&h.month===i&&(h.description==="Monthly Allocation"||h.description==="Piggybank Contribution"));f?r.budgetedAmount>0&&!c?.piggybankConfig?.paused?await e().updateTransaction({...f,amount:r.budgetedAmount,description:"Piggybank Contribution"}):(r.budgetedAmount===0||c?.piggybankConfig?.paused)&&await e().deleteTransaction(f.id):r.budgetedAmount>0&&!c?.piggybankConfig?.paused&&await e().addTransaction({description:"Piggybank Contribution",amount:r.budgetedAmount,envelopeId:o.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!u&&r.budgetedAmount!==void 0){const f=e().transactions.find(h=>h.envelopeId===o.envelopeId&&h.month===i&&(h.description==="Monthly Budget Allocation"||h.description==="Budgeted"));f?r.budgetedAmount>0?await e().updateTransaction({...f,amount:r.budgetedAmount,description:"Budgeted"}):r.budgetedAmount===0&&await e().deleteTransaction(f.id):r.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:r.budgetedAmount,envelopeId:o.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}console.log(" Updated envelope allocation:",n)}catch(i){throw console.error(" updateEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async n=>{try{console.log(" Deleting envelope allocation:",n);const r=e().currentMonth,i=e().allocations[r]?.find(o=>o.id===n);if(!i){console.warn("Allocation not found in store, skipping delete");return}const s=(await Pt(()=>Promise.resolve().then(()=>qt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!s)throw new Error("No authenticated user found");await On.deleteEnvelopeAllocation(s.id,i.envelopeId,r),t(o=>({allocations:{...o.allocations,[r]:o.allocations[r]?.filter(c=>c.id!==n)||[]},isLoading:!1})),console.log(" Deleted envelope allocation:",n)}catch(r){throw console.error(" deleteEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const n=e().currentMonth,r=e().allocations[n]||[],i=e().incomeSources[n]||[],a=r.reduce((c,u)=>c+u.budgetedAmount,0);return i.reduce((c,u)=>c+u.amount,0)-a}catch(n){throw console.error(" refreshAvailableToBudget failed:",n),t({error:n instanceof Error?n.message:"Failed to refresh available to budget"}),n}},updateOnlineStatus:async()=>{try{const n=typeof navigator<"u"?navigator.onLine:!0;t({isOnline:n}),console.log(" Online status updated:",n)}catch(n){console.error(" Failed to update online status:",n)}},handleUserLogout:()=>{console.log(" Clearing user data on logout"),t({envelopes:[],transactions:[],categories:[],incomeSources:{},allocations:{},isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null})}}),{name:"budget-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,categories:t.categories,appSettings:t.appSettings,incomeSources:t.incomeSources,allocations:t.allocations,currentMonth:t.currentMonth,isOnline:t.isOnline})})));Vwe({useBudgetStore:sn,useAuthStore:Ga,getCurrentUserId:r1});const Bwe=Object.freeze(Object.defineProperty({__proto__:null,useBudgetStore:sn},Symbol.toStringTag,{value:"Module"}));var zh=9e15,Au=1e9,OP="0123456789abcdef",ow="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",lw="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",NP={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-zh,maxE:zh,crypto:!1},SY,fl,ct=!0,aS="[DecimalError] ",gu=aS+"Invalid argument: ",EY=aS+"Precision limit exceeded",TY=aS+"crypto unavailable",AY="[object Decimal]",fi=Math.floor,yr=Math.pow,Fwe=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Uwe=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,$we=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,CY=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ks=1e7,it=7,qwe=9007199254740991,Gwe=ow.length-1,RP=lw.length-1,Ce={toStringTag:AY};Ce.absoluteValue=Ce.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Qe(t)};Ce.ceil=function(){return Qe(new this.constructor(this),this.e+1,2)};Ce.clampedTo=Ce.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(gu+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};Ce.comparedTo=Ce.cmp=function(t){var e,n,r,i,a=this,s=a.d,o=(t=new a.constructor(t)).d,c=a.s,u=t.s;if(!s||!o)return!c||!u?NaN:c!==u?c:s===o?0:!s^c<0?1:-1;if(!s[0]||!o[0])return s[0]?c:o[0]?-u:0;if(c!==u)return c;if(a.e!==t.e)return a.e>t.e^c<0?1:-1;for(r=s.length,i=o.length,e=0,n=r<i?r:i;e<n;++e)if(s[e]!==o[e])return s[e]>o[e]^c<0?1:-1;return r===i?0:r>i^c<0?1:-1};Ce.cosine=Ce.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+it,r.rounding=1,n=Hwe(r,OY(r,n)),r.precision=t,r.rounding=e,Qe(fl==2||fl==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};Ce.cubeRoot=Ce.cbrt=function(){var t,e,n,r,i,a,s,o,c,u,f=this,h=f.constructor;if(!f.isFinite()||f.isZero())return new h(f);for(ct=!1,a=f.s*yr(f.s*f,1/3),!a||Math.abs(a)==1/0?(n=Jr(f.d),t=f.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=yr(n,1/3),t=fi((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new h(n),r.s=f.s):r=new h(a.toString()),s=(t=h.precision)+3;;)if(o=r,c=o.times(o).times(o),u=c.plus(f),r=cn(u.plus(f).times(o),u.plus(c),s+2,1),Jr(o.d).slice(0,s)===(n=Jr(r.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!i&&n=="4999"){if(!i&&(Qe(o,t+1,0),o.times(o).times(o).eq(f))){r=o;break}s+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Qe(r,t+1,1),e=!r.times(r).times(r).eq(f));break}return ct=!0,Qe(r,t,h.rounding,e)};Ce.decimalPlaces=Ce.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-fi(this.e/it))*it,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};Ce.dividedBy=Ce.div=function(t){return cn(this,new this.constructor(t))};Ce.dividedToIntegerBy=Ce.divToInt=function(t){var e=this,n=e.constructor;return Qe(cn(e,new n(t),0,1,1),n.precision,n.rounding)};Ce.equals=Ce.eq=function(t){return this.cmp(t)===0};Ce.floor=function(){return Qe(new this.constructor(this),this.e+1,3)};Ce.greaterThan=Ce.gt=function(t){return this.cmp(t)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(t){var e=this.cmp(t);return e==1||e===0};Ce.hyperbolicCosine=Ce.cosh=function(){var t,e,n,r,i,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;n=s.precision,r=s.rounding,s.precision=n+Math.max(a.e,a.sd())+4,s.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/oS(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=_p(s,1,a.times(e),new s(1),!0);for(var c,u=t,f=new s(8);u--;)c=a.times(a),a=o.minus(c.times(f.minus(c.times(f))));return Qe(a,s.precision=n,s.rounding=r,!0)};Ce.hyperbolicSine=Ce.sinh=function(){var t,e,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=_p(a,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/oS(5,t)),i=_p(a,2,i,i,!0);for(var s,o=new a(5),c=new a(16),u=new a(20);t--;)s=i.times(i),i=i.times(o.plus(s.times(c.times(s).plus(u))))}return a.precision=e,a.rounding=n,Qe(i,e,n,!0)};Ce.hyperbolicTangent=Ce.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,cn(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};Ce.inverseCosine=Ce.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?go(e,r,i):new e(0):new e(NaN):t.isZero()?go(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))};Ce.inverseHyperbolicCosine=Ce.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,ct=!1,n=n.times(n).minus(1).sqrt().plus(n),ct=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};Ce.inverseHyperbolicSine=Ce.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,ct=!1,n=n.times(n).plus(1).sqrt().plus(n),ct=!0,r.precision=t,r.rounding=e,n.ln())};Ce.inverseHyperbolicTangent=Ce.atanh=function(){var t,e,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Qe(new a(i),t,e,!0):(a.precision=n=r-i.e,i=cn(i.plus(1),new a(1).minus(i),n+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};Ce.inverseSine=Ce.asin=function(){var t,e,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),n=a.precision,r=a.rounding,e!==-1?e===0?(t=go(a,n+4,r).times(.5),t.s=i.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))};Ce.inverseTangent=Ce.atan=function(){var t,e,n,r,i,a,s,o,c,u=this,f=u.constructor,h=f.precision,g=f.rounding;if(u.isFinite()){if(u.isZero())return new f(u);if(u.abs().eq(1)&&h+4<=RP)return s=go(f,h+4,g).times(.25),s.s=u.s,s}else{if(!u.s)return new f(NaN);if(h+4<=RP)return s=go(f,h+4,g).times(.5),s.s=u.s,s}for(f.precision=o=h+10,f.rounding=1,n=Math.min(28,o/it+2|0),t=n;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(ct=!1,e=Math.ceil(o/it),r=1,c=u.times(u),s=new f(u),i=u;t!==-1;)if(i=i.times(c),a=s.minus(i.div(r+=2)),i=i.times(c),s=a.plus(i.div(r+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===a.d[t]&&t--;);return n&&(s=s.times(2<<n-1)),ct=!0,Qe(s,f.precision=h,f.rounding=g,!0)};Ce.isFinite=function(){return!!this.d};Ce.isInteger=Ce.isInt=function(){return!!this.d&&fi(this.e/it)>this.d.length-2};Ce.isNaN=function(){return!this.s};Ce.isNegative=Ce.isNeg=function(){return this.s<0};Ce.isPositive=Ce.isPos=function(){return this.s>0};Ce.isZero=function(){return!!this.d&&this.d[0]===0};Ce.lessThan=Ce.lt=function(t){return this.cmp(t)<0};Ce.lessThanOrEqualTo=Ce.lte=function(t){return this.cmp(t)<1};Ce.logarithm=Ce.log=function(t){var e,n,r,i,a,s,o,c,u=this,f=u.constructor,h=f.precision,g=f.rounding,m=5;if(t==null)t=new f(10),e=!0;else{if(t=new f(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new f(NaN);e=t.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new f(n&&!n[0]?-1/0:u.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=i!==1}if(ct=!1,o=h+m,s=Yc(u,o),r=e?cw(f,o+10):Yc(t,o),c=cn(s,r,o,1),$v(c.d,i=h,g))do if(o+=10,s=Yc(u,o),r=e?cw(f,o+10):Yc(t,o),c=cn(s,r,o,1),!a){+Jr(c.d).slice(i+1,i+15)+1==1e14&&(c=Qe(c,h+1,0));break}while($v(c.d,i+=10,g));return ct=!0,Qe(c,h,g)};Ce.minus=Ce.sub=function(t){var e,n,r,i,a,s,o,c,u,f,h,g,m=this,b=m.constructor;if(t=new b(t),!m.d||!t.d)return!m.s||!t.s?t=new b(NaN):m.d?t.s=-t.s:t=new b(t.d||m.s!==t.s?m:NaN),t;if(m.s!=t.s)return t.s=-t.s,m.plus(t);if(u=m.d,g=t.d,o=b.precision,c=b.rounding,!u[0]||!g[0]){if(g[0])t.s=-t.s;else if(u[0])t=new b(m);else return new b(c===3?-0:0);return ct?Qe(t,o,c):t}if(n=fi(t.e/it),f=fi(m.e/it),u=u.slice(),a=f-n,a){for(h=a<0,h?(e=u,a=-a,s=g.length):(e=g,n=f,s=u.length),r=Math.max(Math.ceil(o/it),s)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=u.length,s=g.length,h=r<s,h&&(s=r),r=0;r<s;r++)if(u[r]!=g[r]){h=u[r]<g[r];break}a=0}for(h&&(e=u,u=g,g=e,t.s=-t.s),s=u.length,r=g.length-s;r>0;--r)u[s++]=0;for(r=g.length;r>a;){if(u[--r]<g[r]){for(i=r;i&&u[--i]===0;)u[i]=ks-1;--u[i],u[r]+=ks}u[r]-=g[r]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(t.d=u,t.e=sS(u,n),ct?Qe(t,o,c):t):new b(c===3?-0:0)};Ce.modulo=Ce.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Qe(new r(n),r.precision,r.rounding):(ct=!1,r.modulo==9?(e=cn(n,t.abs(),0,3,1),e.s*=t.s):e=cn(n,t,0,r.modulo,1),e=e.times(t),ct=!0,n.minus(e))};Ce.naturalExponential=Ce.exp=function(){return MP(this)};Ce.naturalLogarithm=Ce.ln=function(){return Yc(this)};Ce.negated=Ce.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Qe(t)};Ce.plus=Ce.add=function(t){var e,n,r,i,a,s,o,c,u,f,h=this,g=h.constructor;if(t=new g(t),!h.d||!t.d)return!h.s||!t.s?t=new g(NaN):h.d||(t=new g(t.d||h.s===t.s?h:NaN)),t;if(h.s!=t.s)return t.s=-t.s,h.minus(t);if(u=h.d,f=t.d,o=g.precision,c=g.rounding,!u[0]||!f[0])return f[0]||(t=new g(h)),ct?Qe(t,o,c):t;if(a=fi(h.e/it),r=fi(t.e/it),u=u.slice(),i=a-r,i){for(i<0?(n=u,i=-i,s=f.length):(n=f,r=a,s=u.length),a=Math.ceil(o/it),s=a>s?a+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=u.length,i=f.length,s-i<0&&(i=s,n=f,f=u,u=n),e=0;i;)e=(u[--i]=u[i]+f[i]+e)/ks|0,u[i]%=ks;for(e&&(u.unshift(e),++r),s=u.length;u[--s]==0;)u.pop();return t.d=u,t.e=sS(u,r),ct?Qe(t,o,c):t};Ce.precision=Ce.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(gu+t);return n.d?(e=IY(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};Ce.round=function(){var t=this,e=t.constructor;return Qe(new e(t),t.e+1,e.rounding)};Ce.sine=Ce.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+it,r.rounding=1,n=Wwe(r,OY(r,n)),r.precision=t,r.rounding=e,Qe(fl>2?n.neg():n,t,e,!0)):new r(NaN)};Ce.squareRoot=Ce.sqrt=function(){var t,e,n,r,i,a,s=this,o=s.d,c=s.e,u=s.s,f=s.constructor;if(u!==1||!o||!o[0])return new f(!u||u<0&&(!o||o[0])?NaN:o?s:1/0);for(ct=!1,u=Math.sqrt(+s),u==0||u==1/0?(e=Jr(o),(e.length+c)%2==0&&(e+="0"),u=Math.sqrt(e),c=fi((c+1)/2)-(c<0||c%2),u==1/0?e="5e"+c:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+c),r=new f(e)):r=new f(u.toString()),n=(c=f.precision)+3;;)if(a=r,r=a.plus(cn(s,a,n+2,1)).times(.5),Jr(a.d).slice(0,n)===(e=Jr(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Qe(a,c+1,0),a.times(a).eq(s))){r=a;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Qe(r,c+1,1),t=!r.times(r).eq(s));break}return ct=!0,Qe(r,c,f.rounding,t)};Ce.tangent=Ce.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=cn(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Qe(fl==2||fl==4?n.neg():n,t,e,!0)):new r(NaN)};Ce.times=Ce.mul=function(t){var e,n,r,i,a,s,o,c,u,f=this,h=f.constructor,g=f.d,m=(t=new h(t)).d;if(t.s*=f.s,!g||!g[0]||!m||!m[0])return new h(!t.s||g&&!g[0]&&!m||m&&!m[0]&&!g?NaN:!g||!m?t.s/0:t.s*0);for(n=fi(f.e/it)+fi(t.e/it),c=g.length,u=m.length,c<u&&(a=g,g=m,m=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+m[r]*g[i-r-1]+e,a[i--]=o%ks|0,e=o/ks|0;a[i]=(a[i]+e)%ks|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=sS(a,n),ct?Qe(t,h.precision,h.rounding):t};Ce.toBinary=function(t,e){return PN(this,2,t,e)};Ce.toDecimalPlaces=Ce.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ki(t,0,Au),e===void 0?e=r.rounding:Ki(e,0,8),Qe(n,t+n.e+1,e))};Ce.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Po(r,!0):(Ki(t,0,Au),e===void 0?e=i.rounding:Ki(e,0,8),r=Qe(new i(r),t+1,e),n=Po(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Ce.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?n=Po(i):(Ki(t,0,Au),e===void 0?e=a.rounding:Ki(e,0,8),r=Qe(new a(i),t+i.e+1,e),n=Po(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};Ce.toFraction=function(t){var e,n,r,i,a,s,o,c,u,f,h,g,m=this,b=m.d,x=m.constructor;if(!b)return new x(m);if(u=n=new x(1),r=c=new x(0),e=new x(r),a=e.e=IY(b)-m.e-1,s=a%it,e.d[0]=yr(10,s<0?it+s:s),t==null)t=a>0?e:u;else{if(o=new x(t),!o.isInt()||o.lt(u))throw Error(gu+o);t=o.gt(e)?a>0?e:u:o}for(ct=!1,o=new x(Jr(b)),f=x.precision,x.precision=a=b.length*it*2;h=cn(o,e,0,1,1),i=n.plus(h.times(r)),i.cmp(t)!=1;)n=r,r=i,i=u,u=c.plus(h.times(i)),c=i,i=e,e=o.minus(h.times(i)),o=i;return i=cn(t.minus(n),r,0,1,1),c=c.plus(i.times(u)),n=n.plus(i.times(r)),c.s=u.s=m.s,g=cn(u,r,a,1).minus(m).abs().cmp(cn(c,n,a,1).minus(m).abs())<1?[u,r]:[c,n],x.precision=f,ct=!0,g};Ce.toHexadecimal=Ce.toHex=function(t,e){return PN(this,16,t,e)};Ce.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:Ki(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(ct=!1,n=cn(n,t,0,e,1).times(t),ct=!0,Qe(n)):(t.s=n.s,n=t),n};Ce.toNumber=function(){return+this};Ce.toOctal=function(t,e){return PN(this,8,t,e)};Ce.toPower=Ce.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=+(t=new c(t));if(!o.d||!t.d||!o.d[0]||!t.d[0])return new c(yr(+o,u));if(o=new c(o),o.eq(1))return o;if(r=c.precision,a=c.rounding,t.eq(1))return Qe(o,r,a);if(e=fi(t.e/it),e>=t.d.length-1&&(n=u<0?-u:u)<=qwe)return i=kY(c,o,n,r),t.s<0?new c(1).div(i):Qe(i,r,a);if(s=o.s,s<0){if(e<t.d.length-1)return new c(NaN);if((t.d[e]&1)==0&&(s=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=s,o}return n=yr(+o,u),e=n==0||!isFinite(n)?fi(u*(Math.log("0."+Jr(o.d))/Math.LN10+o.e+1)):new c(n+"").e,e>c.maxE+1||e<c.minE-1?new c(e>0?s/0:0):(ct=!1,c.rounding=o.s=1,n=Math.min(12,(e+"").length),i=MP(t.times(Yc(o,r+n)),r),i.d&&(i=Qe(i,r+5,1),$v(i.d,r,a)&&(e=r+10,i=Qe(MP(t.times(Yc(o,e+n)),e),e+5,1),+Jr(i.d).slice(r+1,r+15)+1==1e14&&(i=Qe(i,r+1,0)))),i.s=s,ct=!0,c.rounding=a,Qe(i,r,a))};Ce.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Po(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Ki(t,1,Au),e===void 0?e=i.rounding:Ki(e,0,8),r=Qe(new i(r),t,e),n=Po(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};Ce.toSignificantDigits=Ce.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ki(t,1,Au),e===void 0?e=r.rounding:Ki(e,0,8)),Qe(new r(n),t,e)};Ce.toString=function(){var t=this,e=t.constructor,n=Po(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};Ce.truncated=Ce.trunc=function(){return Qe(new this.constructor(this),this.e+1,1)};Ce.valueOf=Ce.toJSON=function(){var t=this,e=t.constructor,n=Po(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function Jr(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=it-r.length,n&&(a+=Rc(n)),a+=r;s=t[e],r=s+"",n=it-r.length,n&&(a+=Rc(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}function Ki(t,e,n){if(t!==~~t||t<e||t>n)throw Error(gu+t)}function $v(t,e,n,r){var i,a,s,o;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=it,i=0):(i=Math.ceil((e+1)/it),e%=it),a=yr(10,it-e),o=t[i]%a|0,r==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),s=n<4&&o==99999||n>3&&o==49999||o==5e4||o==0):s=(n<4&&o+1==a||n>3&&o+1==a/2)&&(t[i+1]/a/100|0)==yr(10,e-2)-1||(o==a/2||o==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),s=(r||n<4)&&o==9999||!r&&n>3&&o==4999):s=((r||n<4)&&o+1==a||!r&&n>3&&o+1==a/2)&&(t[i+1]/a/1e3|0)==yr(10,e-3)-1,s}function i1(t,e,n){for(var r,i=[0],a,s=0,o=t.length;s<o;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=OP.indexOf(t.charAt(s++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function Hwe(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/oS(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=_p(t,1,e.times(i),new t(1));for(var a=n;a--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=n,e}var cn=(function(){function t(r,i,a){var s,o=0,c=r.length;for(r=r.slice();c--;)s=r[c]*i+o,r[c]=s%a|0,o=s/a|0;return o&&r.unshift(o),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a,s){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*s+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s,o,c){var u,f,h,g,m,b,x,w,S,T,I,N,O,P,k,D,R,z,L,B,j=r.constructor,H=r.s==i.s?1:-1,X=r.d,q=i.d;if(!X||!X[0]||!q||!q[0])return new j(!r.s||!i.s||(X?q&&X[0]==q[0]:!q)?NaN:X&&X[0]==0||!q?H*0:H/0);for(c?(m=1,f=r.e-i.e):(c=ks,m=it,f=fi(r.e/m)-fi(i.e/m)),L=q.length,R=X.length,S=new j(H),T=S.d=[],h=0;q[h]==(X[h]||0);h++);if(q[h]>(X[h]||0)&&f--,a==null?(P=a=j.precision,s=j.rounding):o?P=a+(r.e-i.e)+1:P=a,P<0)T.push(1),b=!0;else{if(P=P/m+2|0,h=0,L==1){for(g=0,q=q[0],P++;(h<R||g)&&P--;h++)k=g*c+(X[h]||0),T[h]=k/q|0,g=k%q|0;b=g||h<R}else{for(g=c/(q[0]+1)|0,g>1&&(q=t(q,g,c),X=t(X,g,c),L=q.length,R=X.length),D=L,I=X.slice(0,L),N=I.length;N<L;)I[N++]=0;B=q.slice(),B.unshift(0),z=q[0],q[1]>=c/2&&++z;do g=0,u=e(q,I,L,N),u<0?(O=I[0],L!=N&&(O=O*c+(I[1]||0)),g=O/z|0,g>1?(g>=c&&(g=c-1),x=t(q,g,c),w=x.length,N=I.length,u=e(x,I,w,N),u==1&&(g--,n(x,L<w?B:q,w,c))):(g==0&&(u=g=1),x=q.slice()),w=x.length,w<N&&x.unshift(0),n(I,x,N,c),u==-1&&(N=I.length,u=e(q,I,L,N),u<1&&(g++,n(I,L<N?B:q,N,c))),N=I.length):u===0&&(g++,I=[0]),T[h++]=g,u&&I[0]?I[N++]=X[D]||0:(I=[X[D]],N=1);while((D++<R||I[0]!==void 0)&&P--);b=I[0]!==void 0}T[0]||T.shift()}if(m==1)S.e=f,SY=b;else{for(h=1,g=T[0];g>=10;g/=10)h++;S.e=h+f*m-1,Qe(S,o?a+S.e+1:a,s,b)}return S}})();function Qe(t,e,n,r){var i,a,s,o,c,u,f,h,g,m=t.constructor;e:if(e!=null){if(h=t.d,!h)return t;for(i=1,o=h[0];o>=10;o/=10)i++;if(a=e-i,a<0)a+=it,s=e,f=h[g=0],c=f/yr(10,i-s-1)%10|0;else if(g=Math.ceil((a+1)/it),o=h.length,g>=o)if(r){for(;o++<=g;)h.push(0);f=c=0,i=1,a%=it,s=a-it+1}else break e;else{for(f=o=h[g],i=1;o>=10;o/=10)i++;a%=it,s=a-it+i,c=s<0?0:f/yr(10,i-s-1)%10|0}if(r=r||e<0||h[g+1]!==void 0||(s<0?f:f%yr(10,i-s-1)),u=n<4?(c||r)&&(n==0||n==(t.s<0?3:2)):c>5||c==5&&(n==4||r||n==6&&(a>0?s>0?f/yr(10,i-s):0:h[g-1])%10&1||n==(t.s<0?8:7)),e<1||!h[0])return h.length=0,u?(e-=t.e+1,h[0]=yr(10,(it-e%it)%it),t.e=-e||0):h[0]=t.e=0,t;if(a==0?(h.length=g,o=1,g--):(h.length=g+1,o=yr(10,it-a),h[g]=s>0?(f/yr(10,i-s)%yr(10,s)|0)*o:0),u)for(;;)if(g==0){for(a=1,s=h[0];s>=10;s/=10)a++;for(s=h[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(t.e++,h[0]==ks&&(h[0]=1));break}else{if(h[g]+=o,h[g]!=ks)break;h[g--]=0,o=1}for(a=h.length;h[--a]===0;)h.pop()}return ct&&(t.e>m.maxE?(t.d=null,t.e=NaN):t.e<m.minE&&(t.e=0,t.d=[0])),t}function Po(t,e,n){if(!t.isFinite())return DY(t);var r,i=t.e,a=Jr(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Rc(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Rc(-i-1)+a,n&&(r=n-s)>0&&(a+=Rc(r))):i>=s?(a+=Rc(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Rc(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Rc(r))),a}function sS(t,e){var n=t[0];for(e*=it;n>=10;n/=10)e++;return e}function cw(t,e,n){if(e>Gwe)throw ct=!0,n&&(t.precision=n),Error(EY);return Qe(new t(ow),e,1,!0)}function go(t,e,n){if(e>RP)throw Error(EY);return Qe(new t(lw),e,n,!0)}function IY(t){var e=t.length-1,n=e*it+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Rc(t){for(var e="";t--;)e+="0";return e}function kY(t,e,n,r){var i,a=new t(1),s=Math.ceil(r/it+4);for(ct=!1;;){if(n%2&&(a=a.times(e),j6(a.d,s)&&(i=!0)),n=fi(n/2),n===0){n=a.d.length-1,i&&a.d[n]===0&&++a.d[n];break}e=e.times(e),j6(e.d,s)}return ct=!0,a}function M6(t){return t.d[t.d.length-1]&1}function PY(t,e,n){for(var r,i,a=new t(e[0]),s=0;++s<e.length;){if(i=new t(e[s]),!i.s){a=i;break}r=a.cmp(i),(r===n||r===0&&a.s===n)&&(a=i)}return a}function MP(t,e){var n,r,i,a,s,o,c,u=0,f=0,h=0,g=t.constructor,m=g.rounding,b=g.precision;if(!t.d||!t.d[0]||t.e>17)return new g(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(ct=!1,c=b):c=e,o=new g(.03125);t.e>-2;)t=t.times(o),h+=5;for(r=Math.log(yr(2,h))/Math.LN10*2+5|0,c+=r,n=a=s=new g(1),g.precision=c;;){if(a=Qe(a.times(t),c,1),n=n.times(++f),o=s.plus(cn(a,n,c,1)),Jr(o.d).slice(0,c)===Jr(s.d).slice(0,c)){for(i=h;i--;)s=Qe(s.times(s),c,1);if(e==null)if(u<3&&$v(s.d,c-r,m,u))g.precision=c+=10,n=a=o=new g(1),f=0,u++;else return Qe(s,g.precision=b,m,ct=!0);else return g.precision=b,s}s=o}}function Yc(t,e){var n,r,i,a,s,o,c,u,f,h,g,m=1,b=10,x=t,w=x.d,S=x.constructor,T=S.rounding,I=S.precision;if(x.s<0||!w||!w[0]||!x.e&&w[0]==1&&w.length==1)return new S(w&&!w[0]?-1/0:x.s!=1?NaN:w?0:x);if(e==null?(ct=!1,f=I):f=e,S.precision=f+=b,n=Jr(w),r=n.charAt(0),Math.abs(a=x.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(t),n=Jr(x.d),r=n.charAt(0),m++;a=x.e,r>1?(x=new S("0."+n),a++):x=new S(r+"."+n.slice(1))}else return u=cw(S,f+2,I).times(a+""),x=Yc(new S(r+"."+n.slice(1)),f-b).plus(u),S.precision=I,e==null?Qe(x,I,T,ct=!0):x;for(h=x,c=s=x=cn(x.minus(1),x.plus(1),f,1),g=Qe(x.times(x),f,1),i=3;;){if(s=Qe(s.times(g),f,1),u=c.plus(cn(s,new S(i),f,1)),Jr(u.d).slice(0,f)===Jr(c.d).slice(0,f))if(c=c.times(2),a!==0&&(c=c.plus(cw(S,f+2,I).times(a+""))),c=cn(c,new S(m),f,1),e==null)if($v(c.d,f-b,T,o))S.precision=f+=b,u=s=x=cn(h.minus(1),h.plus(1),f,1),g=Qe(x.times(x),f,1),i=o=1;else return Qe(c,S.precision=I,T,ct=!0);else return S.precision=I,c;c=u,i+=2}}function DY(t){return String(t.s*t.s/0)}function a1(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%it,n<0&&(r+=it),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=it;r<i;)t.d.push(+e.slice(r,r+=it));e=e.slice(r),r=it-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),ct&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Kwe(t,e){var n,r,i,a,s,o,c,u,f;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),CY.test(e))return a1(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Uwe.test(e))n=16,e=e.toLowerCase();else if(Fwe.test(e))n=2;else if($we.test(e))n=8;else throw Error(gu+e);for(a=e.search(/p/i),a>0?(c=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),s=a>=0,r=t.constructor,s&&(e=e.replace(".",""),o=e.length,a=o-a,i=kY(r,new r(n),a,a*2)),u=i1(e,n,ks),f=u.length-1,a=f;u[a]===0;--a)u.pop();return a<0?new r(t.s*0):(t.e=sS(u,f),t.d=u,ct=!1,s&&(t=cn(t,i,o*4)),c&&(t=t.times(Math.abs(c)<54?yr(2,c):Sp.pow(2,c))),ct=!0,t)}function Wwe(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:_p(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/oS(5,n)),e=_p(t,2,e,e);for(var i,a=new t(5),s=new t(16),o=new t(20);n--;)i=e.times(e),e=e.times(a.plus(i.times(s.times(i).minus(o))));return e}function _p(t,e,n,r,i){var a,s,o,c,u=t.precision,f=Math.ceil(u/it);for(ct=!1,c=n.times(n),o=new t(r);;){if(s=cn(o.times(c),new t(e++*e++),u,1),o=i?r.plus(s):r.minus(s),r=cn(s.times(c),new t(e++*e++),u,1),s=o.plus(r),s.d[f]!==void 0){for(a=f;s.d[a]===o.d[a]&&a--;);if(a==-1)break}a=o,o=r,r=s,s=a}return ct=!0,s.d.length=f+1,s}function oS(t,e){for(var n=t;--e;)n*=t;return n}function OY(t,e){var n,r=e.s<0,i=go(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return fl=r?4:1,e;if(n=e.divToInt(i),n.isZero())fl=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(a))return fl=M6(n)?r?2:3:r?4:1,e;fl=M6(n)?r?1:4:r?3:2}return e.minus(i).abs()}function PN(t,e,n,r){var i,a,s,o,c,u,f,h,g,m=t.constructor,b=n!==void 0;if(b?(Ki(n,1,Au),r===void 0?r=m.rounding:Ki(r,0,8)):(n=m.precision,r=m.rounding),!t.isFinite())f=DY(t);else{for(f=Po(t),s=f.indexOf("."),b?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,s>=0&&(f=f.replace(".",""),g=new m(1),g.e=f.length-s,g.d=i1(Po(g),10,i),g.e=g.d.length),h=i1(f,10,i),a=c=h.length;h[--c]==0;)h.pop();if(!h[0])f=b?"0p+0":"0";else{if(s<0?a--:(t=new m(t),t.d=h,t.e=a,t=cn(t,g,n,r,0,i),h=t.d,a=t.e,u=SY),s=h[n],o=i/2,u=u||h[n+1]!==void 0,u=r<4?(s!==void 0||u)&&(r===0||r===(t.s<0?3:2)):s>o||s===o&&(r===4||u||r===6&&h[n-1]&1||r===(t.s<0?8:7)),h.length=n,u)for(;++h[--n]>i-1;)h[n]=0,n||(++a,h.unshift(1));for(c=h.length;!h[c-1];--c);for(s=0,f="";s<c;s++)f+=OP.charAt(h[s]);if(b){if(c>1)if(e==16||e==8){for(s=e==16?4:3,--c;c%s;c++)f+="0";for(h=i1(f,i,e),c=h.length;!h[c-1];--c);for(s=1,f="1.";s<c;s++)f+=OP.charAt(h[s])}else f=f.charAt(0)+"."+f.slice(1);f=f+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)f="0"+f;f="0."+f}else if(++a>c)for(a-=c;a--;)f+="0";else a<c&&(f=f.slice(0,a)+"."+f.slice(a))}f=(e==16?"0x":e==2?"0b":e==8?"0o":"")+f}return t.s<0?"-"+f:f}function j6(t,e){if(t.length>e)return t.length=e,!0}function Ywe(t){return new this(t).abs()}function Xwe(t){return new this(t).acos()}function Qwe(t){return new this(t).acosh()}function Zwe(t,e){return new this(t).plus(e)}function Jwe(t){return new this(t).asin()}function e_e(t){return new this(t).asinh()}function t_e(t){return new this(t).atan()}function n_e(t){return new this(t).atanh()}function r_e(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,a=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=go(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?go(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=go(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(cn(t,e,a,1)),e=go(this,a,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(cn(t,e,a,1)),n}function i_e(t){return new this(t).cbrt()}function a_e(t){return Qe(t=new this(t),t.e+1,2)}function s_e(t,e,n){return new this(t).clamp(e,n)}function o_e(t){if(!t||typeof t!="object")throw Error(aS+"Object expected");var e,n,r,i=t.defaults===!0,a=["precision",1,Au,"rounding",0,8,"toExpNeg",-zh,0,"toExpPos",0,zh,"maxE",0,zh,"minE",-zh,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],i&&(this[n]=NP[n]),(r=t[n])!==void 0)if(fi(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(gu+n+": "+r);if(n="crypto",i&&(this[n]=NP[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(TY);else this[n]=!1;else throw Error(gu+n+": "+r);return this}function l_e(t){return new this(t).cos()}function c_e(t){return new this(t).cosh()}function NY(t){var e,n,r;function i(a){var s,o,c,u=this;if(!(u instanceof i))return new i(a);if(u.constructor=i,z6(a)){u.s=a.s,ct?!a.d||a.e>i.maxE?(u.e=NaN,u.d=null):a.e<i.minE?(u.e=0,u.d=[0]):(u.e=a.e,u.d=a.d.slice()):(u.e=a.e,u.d=a.d?a.d.slice():a.d);return}if(c=typeof a,c==="number"){if(a===0){u.s=1/a<0?-1:1,u.e=0,u.d=[0];return}if(a<0?(a=-a,u.s=-1):u.s=1,a===~~a&&a<1e7){for(s=0,o=a;o>=10;o/=10)s++;ct?s>i.maxE?(u.e=NaN,u.d=null):s<i.minE?(u.e=0,u.d=[0]):(u.e=s,u.d=[a]):(u.e=s,u.d=[a]);return}if(a*0!==0){a||(u.s=NaN),u.e=NaN,u.d=null;return}return a1(u,a.toString())}if(c==="string")return(o=a.charCodeAt(0))===45?(a=a.slice(1),u.s=-1):(o===43&&(a=a.slice(1)),u.s=1),CY.test(a)?a1(u,a):Kwe(u,a);if(c==="bigint")return a<0?(a=-a,u.s=-1):u.s=1,a1(u,a.toString());throw Error(gu+a)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=o_e,i.clone=NY,i.isDecimal=z6,i.abs=Ywe,i.acos=Xwe,i.acosh=Qwe,i.add=Zwe,i.asin=Jwe,i.asinh=e_e,i.atan=t_e,i.atanh=n_e,i.atan2=r_e,i.cbrt=i_e,i.ceil=a_e,i.clamp=s_e,i.cos=l_e,i.cosh=c_e,i.div=u_e,i.exp=d_e,i.floor=f_e,i.hypot=h_e,i.ln=p_e,i.log=g_e,i.log10=v_e,i.log2=m_e,i.max=y_e,i.min=b_e,i.mod=x_e,i.mul=w_e,i.pow=__e,i.random=S_e,i.round=E_e,i.sign=T_e,i.sin=A_e,i.sinh=C_e,i.sqrt=I_e,i.sub=k_e,i.sum=P_e,i.tan=D_e,i.tanh=O_e,i.trunc=N_e,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function u_e(t,e){return new this(t).div(e)}function d_e(t){return new this(t).exp()}function f_e(t){return Qe(t=new this(t),t.e+1,3)}function h_e(){var t,e,n=new this(0);for(ct=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return ct=!0,new this(1/0);n=e}return ct=!0,n.sqrt()}function z6(t){return t instanceof Sp||t&&t.toStringTag===AY||!1}function p_e(t){return new this(t).ln()}function g_e(t,e){return new this(t).log(e)}function m_e(t){return new this(t).log(2)}function v_e(t){return new this(t).log(10)}function y_e(){return PY(this,arguments,-1)}function b_e(){return PY(this,arguments,1)}function x_e(t,e){return new this(t).mod(e)}function w_e(t,e){return new this(t).mul(e)}function __e(t,e){return new this(t).pow(e)}function S_e(t){var e,n,r,i,a=0,s=new this(1),o=[];if(t===void 0?t=this.precision:Ki(t,1,Au),r=Math.ceil(t/it),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(o.push(i%1e7),a+=4);a=r/4}else throw Error(TY);else for(;a<r;)o[a++]=Math.random()*1e7|0;for(r=o[--a],t%=it,r&&t&&(i=yr(10,it-t),o[a]=(r/i|0)*i);o[a]===0;a--)o.pop();if(a<0)n=0,o=[0];else{for(n=-1;o[0]===0;n-=it)o.shift();for(r=1,i=o[0];i>=10;i/=10)r++;r<it&&(n-=it-r)}return s.e=n,s.d=o,s}function E_e(t){return Qe(t=new this(t),t.e+1,this.rounding)}function T_e(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function A_e(t){return new this(t).sin()}function C_e(t){return new this(t).sinh()}function I_e(t){return new this(t).sqrt()}function k_e(t,e){return new this(t).sub(e)}function P_e(){var t=0,e=arguments,n=new this(e[t]);for(ct=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return ct=!0,Qe(n,this.precision,this.rounding)}function D_e(t){return new this(t).tan()}function O_e(t){return new this(t).tanh()}function N_e(t){return Qe(t=new this(t),t.e+1,1)}Ce[Symbol.for("nodejs.util.inspect.custom")]=Ce.toString;Ce[Symbol.toStringTag]="Decimal";var Sp=Ce.constructor=NY(NP);ow=new Sp(ow);lw=new Sp(lw);const L6=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&t.seconds!==void 0)return new Date(t.seconds*1e3);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}if(typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?null:e}return null},R_e=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,reorderEnvelopes:a}=sn(),{currentUser:s}=Ga(),{currentMonth:o,incomeSources:c,allocations:u,deleteIncomeSource:f,setEnvelopeAllocation:h,copyPreviousMonthAllocations:g,isLoading:m}=sn(),{showToast:b}=pf(),[x,w]=A.useState(!1),S=A.useRef(null),[T,I]=A.useState(!1),N=!T||r||m,[O,P]=A.useState([]),k=A.useRef([]),[D,R]=A.useState([]),z=A.useRef([]),L=A.useCallback(K=>{if(t.find(de=>de.id===K)?.isPiggybank){const de=sn.getState().getEnvelopeBalance(K);return new Sp(de)}const le=sn.getState().getEnvelopeBalance(K,o);return new Sp(le)},[t,o]);A.useEffect(()=>{const K=t.filter(Z=>{if(!Z.isPiggybank||!Z.isActive)return!1;if(Z.createdAt)try{const le=L6(Z.createdAt);if(!le)return console.error(` Invalid creation date for piggybank ${Z.name}:`,Z.createdAt),!1;const de=`${le.getFullYear()}-${String(le.getMonth()+1).padStart(2,"0")}`;return o>=de}catch(le){return console.error(` Error processing piggybank ${Z.name}:`,le,{createdAt:Z.createdAt,typeofCreatedAt:typeof Z.createdAt}),!1}return!0}).sort((Z,le)=>{const de=Z.orderIndex??0,ce=le.orderIndex??0;return de-ce});R(K),z.current=K},[t,o]);const B=D,j=O;A.useEffect(()=>(S.current=setTimeout(()=>{w(!0)},8e3),n(),I(!0),()=>{S.current&&clearTimeout(S.current)}),[]),A.useEffect(()=>{T&&!r&&!m&&(w(!1),S.current&&clearTimeout(S.current))},[T,r,m]),A.useEffect(()=>{const K=t.filter(Z=>{if(Z.isPiggybank||Z.isActive===!1)return!1;const de=(u[o]||[]).some(he=>he.envelopeId===Z.id),ce=e.some(he=>he.envelopeId===Z.id&&(he.month===o||he.date.startsWith(o)));return de||ce}).sort((Z,le)=>{const de=Z.orderIndex??0,ce=le.orderIndex??0;return de-ce});P(K),k.current=K},[t,u,o,e]);const H=(c[o]||[]).reduce((K,Z)=>K+Z.amount,0),X=(u[o]||[]).filter(K=>j.some(Z=>Z.id===K.envelopeId)||B.some(Z=>Z.id===K.envelopeId)).reduce((K,Z)=>K+Z.budgetedAmount,0),q=H-X,W=A.useCallback(async K=>{if(!K.length)return;const Z=K.map(le=>le.id);try{await a(Z)}catch(le){console.error("Failed to persist envelope order:",le),b("Failed to save envelope order","error")}},[a,b]),J=A.useCallback(async K=>{await W(K)},[W]),ne=A.useCallback(K=>{f(o,K.id).catch(console.error),b(`Deleted "${K.name}"`,"neutral")},[f,o,b]),Y=A.useCallback(async K=>{try{const Z=K||o;console.log(" Copying to month:",Z),await g(Z),b("Previous month budget copied","success")}catch(Z){console.error("Error copying previous month:",Z),b("Failed to copy previous month","error")}},[g,b,o]),U=A.useCallback(async()=>{if(!s||!o){b("Cannot clear data: not logged in or no month selected","error");return}try{await sn.getState().clearMonthData(o),b(`"${o}" budget and transactions cleared successfully`,"success")}catch(K){console.error("Error clearing month data:",K),b("Failed to clear month data","error")}},[s,o,b]),Q=A.useCallback(async(K,Z)=>{try{await h(K,Z),setTimeout(()=>{const le=sn.getState(),de=le.currentMonth,ce=le.incomeSources[de]||[],he=le.allocations[de]||[],ee=new Set(le.envelopes.filter(De=>{if(De.isPiggybank){if(!De.isActive)return!1;if(De.createdAt){const Pe=L6(De.createdAt);if(!Pe)return!1;const ze=`${Pe.getFullYear()}-${String(Pe.getMonth()+1).padStart(2,"0")}`;return de>=ze}return!0}return De.isActive!==!1}).map(De=>De.id)),Se=he.filter(De=>ee.has(De.envelopeId)),re=ce.reduce((De,Pe)=>De+Pe.amount,0),oe=Se.reduce((De,Pe)=>De+Pe.budgetedAmount,0);re-oe<-.005?b(`You can't spend more than you make.
You're not in Congress!`,"error"):Math.abs(re-oe)<.005&&re>0&&b("Every dollar has a job ","success")},100)}catch(le){console.error("Failed to set allocation:",le),b("Failed to update budget","error")}},[h,b]);return{visibleEnvelopes:j,piggybanks:B,incomeSources:c,availableToBudget:q,currentMonth:o,allocations:u,transactions:e,isLoading:r,isInitialLoading:N,isOnline:i,showTimeoutMessage:x,getEnvelopeBalance:L,fetchData:n,reorderEnvelopes:J,deleteIncomeSource:ne,clearMonthData:U,copyFromPreviousMonth:Y,setEnvelopeAllocation:Q,localOrderRef:k,setLocalEnvelopes:P,localPiggybankOrderRef:z,setLocalPiggybanks:R}},M_e=({currentMonth:t,onMonthChange:e,budgetStatus:n})=>{const[r,i]=t.split("-").map(Number),s=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],o=()=>{let h=r,g=i-1;g<1&&(h=r-1,g=12);const m=`${h}-${g.toString().padStart(2,"0")}`;e(m)},c=()=>{let h=r,g=i+1;g>12&&(h=r+1,g=1);const m=`${h}-${g.toString().padStart(2,"0")}`;e(m)},u=()=>{const h=new Date,g=`${h.getFullYear()}-${(h.getMonth()+1).toString().padStart(2,"0")}`;e(g)},f=()=>{if(!n)return null;const{amount:h,totalIncome:g,totalAllocated:m}=n,b=typeof h=="number"?h:0,x=typeof g=="number"?g:0,w=typeof m=="number"?m:0,S=Math.abs(b)<.005,T=b<-.005,I=x>0?w/x*100:0;let N="text-gray-900 dark:text-white",O="bg-green-500",P="Left to Budget",k=x>0?Math.min(I,100):0,D=!0;return x===0?(P="Add income to start budgeting",k=0,D=!1,N="text-gray-500 dark:text-zinc-500"):S?(N="text-green-600 dark:text-emerald-400",O="bg-green-500",P="Perfect! Every dollar has a job ",k=100,D=!1):T&&(N="text-red-600 dark:text-red-400",O="bg-red-500",P="You're not in Congress! Try again.",k=100),y.jsxs("div",{className:"flex flex-col justify-center min-w-0 w-full",children:[y.jsxs("div",{className:"flex items-baseline justify-start mb-1",children:[y.jsx("span",{className:`text-xs font-medium truncate mr-1.5 ${N}`,children:P}),D&&y.jsxs("span",{className:`text-sm font-bold truncate ${N}`,children:[T?"-":"","$",Math.abs(b).toFixed(2)]})]}),y.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${O}`,style:{width:`${k}%`}})})]})};return y.jsxs("div",{className:"py-2 space-y-3",children:[y.jsxs("div",{className:"flex items-center justify-center gap-4",children:[y.jsx("button",{onClick:o,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:y.jsx(Vle,{size:20})}),y.jsx("div",{className:"text-center",children:y.jsxs("button",{onClick:u,className:"text-base font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors whitespace-nowrap",title:"Click to go to current month",children:[s," ",r]})}),y.jsx("button",{onClick:c,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:y.jsx(oo,{size:20})})]}),n&&y.jsx("div",{className:"px-1",children:f()})]})},lS=({children:t,onDelete:e,threshold:n=-100,disabled:r=!1})=>{const i=oye(),[a,s]=A.useState(!1),o=A.useRef(0),c=()=>{r||(s(!0),o.current=Date.now())},u=async(f,h)=>{if(r)return;const g=h.offset.x,m=h.velocity.x;if(setTimeout(()=>s(!1),100),g<n||g<-50&&m<-500){const b=e();b===!1?i.start({x:0}):b instanceof Promise&&b.then(x=>{x===!1&&i.start({x:0})})}else i.start({x:0})};return y.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[y.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:y.jsx(w1,{className:"text-white w-6 h-6"})}),y.jsx(Gn.div,{drag:r?!1:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${a?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:a?"none":"auto"},children:t})]})},j_e=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:s}=sn(),{showToast:o}=pf(),[c,u]=A.useState(""),[f,h]=A.useState(""),[g,m]=A.useState(!1);A.useEffect(()=>{if(!t)return;const x=window.setTimeout(()=>{n==="edit"&&r?(u(r.name),h(r.amount.toString())):(u(""),h(""))},0);return()=>window.clearTimeout(x)},[t,n,r]);const b=async x=>{if(x.preventDefault(),!c.trim()||!f||parseFloat(f)<=0){o("Please fill in all required fields with valid values","error");return}m(!0);try{if(n==="add")await i(s,{name:c.trim(),amount:parseFloat(f),month:s,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o("Income source added successfully","success");else{if(!r){o("Error: No income source to edit","error");return}await a(s,{...r,name:c.trim(),amount:parseFloat(f),updatedAt:new Date().toISOString()}),o(`Updated "${c.trim()}" income source`,"success")}e()}catch(w){console.error("Error saving income source:",w),o("Failed to save income source. Please try again.","error")}finally{m(!1)}};return y.jsx(wa,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),y.jsxs(Gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),y.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),y.jsx("input",{type:"text",value:c,onChange:x=>u(x.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:x=>{const w=x.target.value.replace(/\D/g,"");if(!w){h("");return}const T=(parseInt(w,10)/100).toFixed(2);h(T)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:g||!c.trim()||!f||parseFloat(f)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})]})})},z_e=({currentMonth:t,onCopy:e,isLoading:n=!1})=>{const r=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},i=o=>{const[c,u]=o.split("-").map(Number);let f=c,h=u-1;return h<1&&(f=c-1,h=12),r(`${f}-${h.toString().padStart(2,"0")}`)},a=r(t),s=i(t);return y.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 py-12 space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 bg-blue-100 dark:bg-blue-900/30 blur-2xl rounded-full opacity-50"}),y.jsxs("div",{className:"relative bg-white dark:bg-zinc-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-700",children:[y.jsx(Ole,{className:"w-12 h-12 text-blue-500"}),y.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-white p-1.5 rounded-full border-2 border-white dark:border-zinc-900",children:y.jsx(hv,{size:14})})]})]}),y.jsxs("div",{className:"max-w-xs mx-auto space-y-2",children:[y.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["It looks like you need a budget for ",a]}),y.jsxs("p",{className:"text-gray-500 dark:text-zinc-400",children:["We can copy your budget from ",s," to get you started right away."]})]}),y.jsx("div",{className:"w-full max-w-xs space-y-3 pt-2",children:y.jsx("button",{onClick:e,disabled:n,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-sm transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?"Creating...":y.jsx(y.Fragment,{children:y.jsxs("span",{children:["Create ",a," Budget"]})})})})]})},L_e="/personal-budget-pwa/icon-512.png",pC="/personal-budget-pwa/images/budget-balanced.png",V6=["Giving","Savings","Housing","Transportation","Food","Personal","Health","Insurance","Debt"],V_e=({currentMonth:t,onComplete:e})=>{const[n,r]=A.useState(0),[i,a]=A.useState(0),[s,o]=A.useState(2500),[c,u]=A.useState(V6),{addCategory:f}=sn(),h=P=>{u(k=>k.includes(P)?k.filter(D=>D!==P):[...k,P])},g=async()=>{for(let P=0;P<c.length;P++)await f({name:c[P],orderIndex:P,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});e()};A.useEffect(()=>{if(console.log("Animation effect triggered:",{currentStep:n,animationKey:i}),n===5){console.log("Starting animation from $2500 to $0"),o(2500);const P=2e3,k=20,D=P/k,R=2500/k;let z=0;const L=setInterval(()=>{z++;const B=Math.max(0,2500-R*z);console.log("Phase 1 - Animation step:",z,"New amount:",B),o(B),z>=k&&(clearInterval(L),console.log("Phase 1 completed - Perfect budget reached"),setTimeout(()=>{console.log("Starting Phase 2 - Over budget demonstration");let j=0;const H=10,X=200,q=500/H,W=setInterval(()=>{j++;const J=-(q*j);console.log("Phase 2 - Over budget step:",j,"Over budget amount:",J),o(J),j>=H&&(clearInterval(W),console.log("Animation completed - Over budget scenario demonstrated"))},X)},1e3))},D);return()=>{console.log("Cleaning up animation timers"),clearInterval(L)}}},[i,n]);const b=(P=>{const[k,D]=P.split("-");return new Date(parseInt(k),parseInt(D)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})})(t),x=[{icon:hv,title:"Welcome to Dollars At Work!",description:`Let's set up your budget for ${b}`,content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Dollars At Work helps you take control of your money using the ",y.jsx("strong",{children:"zero-based budgeting"})," method."]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Every dollar gets a job, and you'll know exactly where your money is going."}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:y.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium",children:" This quick guide will show you how to get started in just a few steps!"})})]}),color:"blue"},{icon:Oce,title:"Step 1: Choose Categories",description:"Select categories to organize your spending",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Categories help group your envelopes. Select the ones you need:"}),y.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto pr-1",children:V6.map(P=>y.jsxs("button",{onClick:()=>h(P),className:`p-3 rounded-xl border text-sm font-medium transition-all flex items-center gap-2 ${c.includes(P)?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300":"bg-white border-gray-200 text-gray-600 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-400"}`,children:[y.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${c.includes(P)?"border-blue-500 bg-blue-500":"border-gray-400"}`,children:c.includes(P)&&y.jsx(al,{size:12,className:"text-white"})}),P]},P))}),c.length===0&&y.jsx("p",{className:"text-red-500 text-xs",children:"Please select at least one category."})]}),color:"blue"},{icon:Fz,title:"Step 2: Add Your Income",description:"Tell us how much money you have to work with",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"First, you'll add your income sources for the month. This could be:"}),y.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(al,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Salary"})," - Your regular paycheck"]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(al,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Freelance"})," - Side gig income"]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(al,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Other Income"})," - Any other money coming in"]})]})]}),y.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-green-900 dark:text-green-200",children:[y.jsx("strong",{children:'Look for the "Income Sources" section'})," at the top of your budget and tap the ",y.jsx(m0,{className:"w-4 h-4 inline"})," button to add income."]})})]}),color:"green"},{icon:p_,title:"Step 3: Create Spending Envelopes",description:"Organize your spending into categories",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Spending envelopes are where you track expenses. You'll assign each envelope to a category."}),y.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(al,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Groceries"})," (Food)"]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(al,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Rent/Mortgage"})," (Housing)"]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(al,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Gas"})," (Transportation)"]})]})]}),y.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-purple-900 dark:text-purple-200",children:[y.jsx("strong",{children:'Tap "+" on a category section'})," to add an envelope to it."]})})]}),color:"purple"},{icon:fv,title:"Step 4: Organize Your Budget",description:"Reorder categories and envelopes to match your preferences",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Your budget should work the way ",y.jsx("strong",{children:"you"})," think about money. Customize the order to match your priorities!"]}),y.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4",children:[y.jsxs("h4",{className:"font-medium text-indigo-900 dark:text-indigo-200 mb-3 flex items-center gap-2",children:[y.jsx(fv,{className:"w-4 h-4"}),"Drag to Reorder"]}),y.jsx("p",{className:"text-sm text-indigo-800 dark:text-indigo-300 mb-3",children:"Both categories and envelopes can be reordered the same way:"}),y.jsxs("div",{className:"space-y-2 mb-3",children:[y.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[y.jsx("strong",{children:"Mobile:"})," Long-press and drag"]}),y.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[y.jsx("strong",{children:"PC:"})," Click and hold on the ",y.jsx("strong",{children:""})," dots, then drag"]})]}),y.jsxs("div",{className:"bg-white dark:bg-indigo-950/30 rounded-lg p-3 mb-3 border border-indigo-300 dark:border-indigo-700",children:[y.jsxs("div",{className:"flex items-center gap-2 text-xs mb-2",children:[y.jsx("div",{className:"text-indigo-600 dark:text-indigo-400 font-bold",children:""}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-indigo-900 dark:text-indigo-200",children:"Food"}),y.jsx("div",{className:"text-indigo-700 dark:text-indigo-400 text-xs",children:"Category"})]})]}),y.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[y.jsx("div",{className:"text-indigo-600 dark:text-indigo-400 font-bold",children:""}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-indigo-900 dark:text-indigo-200",children:"Groceries"}),y.jsx("div",{className:"text-indigo-700 dark:text-indigo-400 text-xs",children:"$450 / $500"})]})]}),y.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-2 italic",children:" Click and hold these dots to drag"})]}),y.jsxs("ul",{className:"space-y-1 text-sm text-indigo-700 dark:text-indigo-400",children:[y.jsx("li",{children:" Reorder categories: Settings  Manage Categories"}),y.jsx("li",{children:" Reorder envelopes: On the main budget screen"}),y.jsx("li",{children:" Organize by priority, frequency, or preference"})]})]}),y.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[" ",y.jsx("strong",{children:"Pro tip:"})," Try organizing your budget like this: Income  Fixed Expenses  Variable Expenses  Savings Goals"]})})]}),color:"indigo"},{icon:_1,title:"Step 5: Allocate Your Budget",description:"Assign money to each envelope",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Now comes the fun part - giving every dollar a job!"}),y.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 rounded-r-xl p-4 relative",children:[y.jsx("button",{onClick:()=>a(P=>P+1),className:"absolute top-2 right-2 p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-lg transition-colors",title:"Replay animation",children:y.jsx(Tce,{className:"w-4 h-4"})}),y.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium mb-2",children:'The "Left to Budget" amount shows unassigned money'}),y.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 mb-3",children:["Your goal is to get this to ",y.jsx("strong",{children:"$0.00"})," by allocating all your income to envelopes."]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 font-medium",children:[y.jsx("span",{children:"Left to Budget"}),y.jsxs("span",{className:`font-bold ${s<0?"text-red-600 dark:text-red-400":""}`,children:["$",s.toFixed(2)]})]}),y.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2 overflow-hidden",children:y.jsx(Gn.div,{className:`h-full rounded-full ${s<0?"bg-red-500":"bg-green-500"}`,initial:{width:"0%"},animate:{width:s<0?"100%":`${(2500-s)/2500*100}%`},transition:{duration:.3,ease:"easeInOut"}})}),y.jsxs(Gn.div,{className:`text-xs font-medium text-center mt-1 ${s===0?"text-green-600 dark:text-emerald-400":s<0?"text-red-600 dark:text-red-400":"text-blue-700 dark:text-blue-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.5},children:[s===0&&"Perfect! Every dollar has a job ",s<0&&"You're not in Congress! Try again.",s>0&&"Keep allocating until you reach $0"]})]},i)]}),y.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:[y.jsx("strong",{children:"To allocate money:"})," Tap the budget amount on any envelope and enter how much you want to assign to it."]}),y.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[" ",y.jsx("strong",{children:"Pro tip:"})," Start with your essential expenses (rent, utilities, groceries) first, then allocate what's left to other categories."]})})]}),color:"blue"},{icon:g0,title:"Bonus: Piggybanks (Savings Goals)",description:"Save for future goals",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Piggybanks are special envelopes for ",y.jsx("strong",{children:"savings goals"})," that carry over month-to-month."]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(Rce,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Set a Goal"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Vacation, emergency fund, new car - whatever you're saving for"})]})]}),y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(Fz,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Contributions"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Set an automatic monthly amount to save"})]})]}),y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(_1,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Track Progress"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Watch your savings grow toward your goal"})]})]})]}),y.jsx("div",{className:"bg-pink-50 dark:bg-pink-900/20 border border-pink-200 dark:border-pink-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-pink-900 dark:text-pink-200",children:[y.jsx("strong",{children:"Find Piggybanks"})," at the bottom of your budget. They're optional but powerful for reaching your goals!"]})})]}),color:"pink"},{icon:pC,title:"You're Ready to Budget!",description:"Start taking control of your money",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"That's it! You now know the basics of Dollars At Work:"}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"1"})}),y.jsx("span",{children:"Choose your categories"})]}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"2"})}),y.jsx("span",{children:"Add your income sources"})]}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"3"})}),y.jsx("span",{children:"Create envelopes in categories"})]}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"4"})}),y.jsx("span",{children:"Organize your budget order"})]}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"5"})}),y.jsx("span",{children:"Allocate until Left to Budget = $0"})]})]}),y.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mt-6",children:y.jsx("p",{className:"text-sm text-center text-blue-900 dark:text-blue-200 font-medium",children:' Click "Start Budgeting" below to create your first budget!'})})]}),color:"green",useCustomIcon:!0}],w=x[n],S=w.useCustomIcon?pC:w.icon,T=n===x.length-1,I=n===0,O={blue:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700"},green:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",button:"bg-green-600 hover:bg-green-700"},purple:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-600 dark:text-purple-400",button:"bg-purple-600 hover:bg-purple-700"},indigo:{bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-600 dark:text-indigo-400",button:"bg-indigo-600 hover:bg-indigo-700"},pink:{bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-600 dark:text-pink-400",button:"bg-pink-600 hover:bg-pink-700"}}[w.color];return y.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex items-center justify-center p-4",children:y.jsx("div",{className:"w-full max-w-2xl",children:y.jsx(wa,{mode:"wait",children:y.jsxs(Gn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[y.jsx("div",{className:"p-6 pb-2",children:y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:w.title}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:w.description})]}),y.jsx("div",{className:"flex flex-col items-center mx-4",children:n===0?y.jsx("img",{src:L_e,alt:"Dollars At Work",className:`w-20 h-20 ${O.text}`}):w.useCustomIcon?y.jsx("img",{src:pC,alt:"Budget Balanced",className:`w-32 h-32 ${O.text}`}):y.jsx("div",{className:`${O.bg} p-3 rounded-xl`,children:y.jsx(S,{className:`w-8 h-8 ${O.text}`})})}),y.jsxs("div",{className:"text-sm text-gray-500 dark:text-zinc-400 whitespace-nowrap",children:["Step ",n+1," of ",x.length]})]})}),y.jsx("div",{className:"px-6 pb-6 pt-2",children:w.content}),y.jsx("div",{className:"px-6 pb-4 flex justify-center gap-2",children:x.map((P,k)=>y.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${k===n?`w-8 ${O.button}`:k<n?"w-2 bg-gray-400 dark:bg-zinc-600":"w-2 bg-gray-200 dark:bg-zinc-700"}`},k))}),y.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[!I&&y.jsxs("button",{onClick:()=>r(P=>P-1),className:"flex-1 py-3 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors flex items-center justify-center gap-2",children:[y.jsx(Al,{className:"w-5 h-5"}),"Back"]}),y.jsx("button",{onClick:()=>{if(T)g();else{if(w.title.includes("Choose Categories")&&c.length===0)return;r(P=>P+1)}},disabled:w.title.includes("Choose Categories")&&c.length===0,className:`${I?"flex-1":"flex-[2]"} py-3 px-4 ${O.button} text-white rounded-xl font-semibold transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:T?y.jsxs(y.Fragment,{children:[y.jsx(hv,{className:"w-5 h-5"}),"Start Budgeting"]}):y.jsxs(y.Fragment,{children:["Next",y.jsx(Ple,{className:"w-5 h-5"})]})})]})]},n)})})})},B_e=({piggybank:t,balance:e,onNavigate:n,setMoveableRef:r,isReorderingActive:i,activelyDraggingId:a,onItemDragStart:s,onLongPressTrigger:o})=>{const c=A.useRef(null),[u,f]=A.useState(!1),h=CN(R=>{wY(),o(R,t.id)},{threshold:500,cancelOnMovement:25,detect:Kc.Touch}),g=t.piggybankConfig?.targetAmount,m=t.piggybankConfig?.monthlyContribution??0,b=t.piggybankConfig?.color||"#3B82F6",x=t.piggybankConfig?.paused||!1,w=typeof e=="number"?e:e.toNumber(),S=(R,z=1)=>{const L=R.replace("#",""),B=parseInt(L,16),j=B>>16&255,H=B>>8&255,X=B&255;return`rgba(${j}, ${H}, ${X}, ${z})`},T=`linear-gradient(135deg, ${S(b,.14)} 0%, ${S(b,.05)} 100%)`,I=S(b,.4),N=g&&g>0?Math.min(w/g*100,100):0,O=g&&w>=g;A.useEffect(()=>{a&&a!==t.id&&f(!1)},[a,t.id]),A.useEffect(()=>{a===t.id&&(f(!0),s&&s(t.id))},[a,t.id,s]),A.useEffect(()=>{if(!a&&u){const R=setTimeout(()=>{f(!1)},300);return()=>clearTimeout(R)}},[a,u]);const P=R=>{if(u||i){R.preventDefault(),R.stopPropagation();return}n(t.id)},k=a===t.id,D=y.jsxs("div",{className:"flex items-center gap-3 w-full",children:[y.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:R=>o(R,t.id),children:y.jsx(fv,{size:20})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between gap-3 mb-1",children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[y.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center",style:{backgroundColor:`${b}20`},children:y.jsx(g0,{size:12,style:{color:b}})}),y.jsxs("div",{className:"min-w-0",children:[y.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate leading-tight",children:t.name}),y.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[y.jsx(_1,{size:10,style:{color:b}}),y.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400 font-medium",children:["$",m.toFixed(2),"/mo"]}),x&&y.jsxs("span",{className:"text-[9px] text-orange-600 dark:text-orange-400 font-bold ml-1 flex items-center gap-0.5",children:[y.jsx(yce,{size:8})," PAUSED"]})]})]})]}),y.jsxs("div",{className:"text-right flex-shrink-0",children:[y.jsxs("div",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:["$",w.toFixed(2)]}),y.jsxs("div",{className:"text-[9px] text-gray-400 dark:text-zinc-500 mt-1",children:["of $",g?.toFixed(0)||"0"]})]})]}),g&&g>0&&y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800/50 rounded-full h-0.5 overflow-hidden",children:y.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${N}%`,backgroundColor:b}})}),O&&!g&&y.jsx("div",{className:"text-[9px] text-green-600 dark:text-green-400 font-bold mt-0.5",children:" GOAL REACHED"})]})]});return y.jsx(Gn.div,{...h(),layout:!k,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:R=>{r&&r(R),c.current=R},onClick:P,style:{background:T,borderColor:I,boxShadow:k?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",zIndex:k?50:1,scale:k?1.02:1},className:"rounded-xl py-1.5 px-3 border transition-all cursor-pointer shadow-sm hover:shadow-md select-none active:scale-[0.99] group",children:D})},mm=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,s=r&255;return`rgba(${i}, ${a}, ${s}, ${e})`},F_e=12,U_e=(t,e,n)=>Math.min(Math.max(t,e),n),$_e=({env:t,budgetedAmount:e,remainingBalance:n,navigate:r,transactions:i,currentMonth:a,setMoveableRef:s,isReorderingActive:o,activelyDraggingId:c,onItemDragStart:u,onLongPressTrigger:f})=>{const h=!!t.isPiggybank,g=t.piggybankConfig?.color||"#3B82F6",m=h?`linear-gradient(135deg, ${mm(g,.18)} 0%, ${mm(g,.08)} 100%)`:void 0,b=h?mm(g,.5):void 0,[x,w]=A.useState(!1),S=CN(L=>{wY(),f(L,t.id)},{threshold:500,cancelOnMovement:25,detect:Kc.Touch}),T=i.filter(L=>L.envelopeId===t.id&&L.month===a),I=T.filter(L=>L.type==="Expense"),N=T.filter(L=>L.type==="Income"),O=I.reduce((L,B)=>L+(B.amount||0),0),P=N.reduce((L,B)=>L+(B.amount||0),0),k=P>0?Math.max(0,O/P*100):0,D=L=>{if(x||o){L.preventDefault(),L.stopPropagation();return}r(`/envelope/${t.id}`)};A.useEffect(()=>{c&&c!==t.id&&w(!1)},[c,t.id]),A.useEffect(()=>{c===t.id&&(w(!0),u(t.id))},[c,t.id,u]),A.useEffect(()=>{if(!c&&x){const L=setTimeout(()=>{w(!1)},300);return()=>clearTimeout(L)}},[c,x]);const R=y.jsxs("div",{className:"flex items-center gap-3 w-full",children:[y.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:L=>f(L,t.id),children:y.jsx(fv,{size:20})}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[h&&y.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center border",style:{borderColor:mm(g,.4),backgroundColor:mm(g,.15),color:g},children:y.jsx(g0,{size:10})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-tight",children:t.name}),y.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),y.jsxs("span",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300",children:["$",e.toFixed(2)]})]})]})]}),y.jsxs("div",{className:"text-right",children:[y.jsxs("span",{className:`text-sm font-bold leading-none ${(typeof n=="number"?n:n.toNumber())<0||100-k<=5?"text-red-500":k>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof n=="number"?n:n.toNumber()).toFixed(2)]}),y.jsx("span",{className:"text-[9px] text-gray-400 dark:text-zinc-500 block uppercase tracking-wider mt-0.5",children:"Remaining"})]})]}),e>0&&y.jsx("div",{className:"mt-1",children:y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700/50 rounded-full h-0.5 overflow-hidden",children:y.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof n=="number"?n:n.toNumber())<0||100-k<=5?"bg-red-500":k>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-k,2)}%`}})})})]})]}),z=c===t.id;return y.jsx(Gn.div,{...S(),layout:!z,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},"data-envelope-id":t.id,ref:s(t.id),onClick:D,style:{boxShadow:z?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",background:m,borderColor:b,cursor:z?"grabbing":"pointer",zIndex:z?50:1,scale:z?1.02:1},className:`py-1.5 px-3 rounded-xl active:scale-[0.99] transition-all select-none border group ${h?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:R})},B6=({category:t,envelopes:e,allocations:n,currentMonth:r,transactions:i,navigate:a,getEnvelopeBalance:s,onReorderGlobal:o})=>{if(e.length===0&&t.id==="uncategorized")return null;const[c,u]=A.useState(e),f=A.useRef(e),[h,g]=A.useState(!1),[m,b]=A.useState(null),x=A.useRef(!1),w=A.useRef(null),S=A.useRef({}),T=A.useRef({}),I=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{h||(u(e),f.current=e)},[e,h]);const N=A.useCallback((P,k)=>{const D=T.current[k];if(D){x.current=!0;const R=P.nativeEvent||P;D.dragStart(R)}},[]),O=A.useCallback(P=>k=>{k?S.current[P]=k:delete S.current[P]},[]);return A.useEffect(()=>{const P=()=>{Object.values(T.current).forEach(R=>R?.destroy()),T.current={}};if(!c.length)return;const k=()=>{c.forEach(R=>{const z=S.current[R.id];if(!z||!w.current)return;const L=new bY(w.current,{target:z,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[]});L.on("dragStart",j=>{if(!x.current){j.stop();return}const H=j.inputEvent.target;if(H.closest(".js-budget-target")||H.tagName==="INPUT"){j.stop();return}const X=f.current.findIndex(J=>J.id===R.id),q=j.target,W=q.getBoundingClientRect();b(R.id),I.current={activeId:R.id,startIndex:X,currentIndex:X,itemHeight:W.height+F_e},q.style.transition="none",q.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",q.style.zIndex="20",g(!0)});let B=null;L.on("drag",j=>{const H=j.target;B!==null&&cancelAnimationFrame(B),B=requestAnimationFrame(()=>{const X=I.current;if(X.activeId!==R.id)return;const q=j.beforeTranslate[1];H.style.transform=`translateY(${q}px)`,H.style.transition="none";const{itemHeight:W,startIndex:J}=X,ne=Math.round(q/W),Y=U_e(J+ne,0,f.current.length-1);Y!==X.currentIndex&&(X.currentIndex=Y,f.current.forEach((U,Q)=>{if(U.id===R.id)return;const K=S.current[U.id];if(!K)return;let Z=0;J<Y&&Q>J&&Q<=Y?Z=-W:J>Y&&Q>=Y&&Q<J&&(Z=W),K.style.transform=Z?`translateY(${Z}px)`:"",K.style.transition="transform 0.2s ease"})),B=null})}),L.on("dragEnd",j=>{B!==null&&(cancelAnimationFrame(B),B=null);const H=j.target,{startIndex:X,currentIndex:q}=I.current;if(H.style.transform="",H.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",H.style.boxShadow="",f.current.forEach(W=>{const J=S.current[W.id];J&&(J.style.transform="",J.style.transition="")}),X!==q){const W=[...f.current],[J]=W.splice(X,1);W.splice(q,0,J),f.current=W,u(W),o(W.map(ne=>ne.id))}setTimeout(()=>{H.style.zIndex="",b(null),g(!1),x.current=!1},300)}),L.on("click",()=>{const j=window.event?.target;j&&(j.closest(".js-budget-target")||j.tagName==="INPUT")||a(`/envelope/${R.id}`)}),T.current[R.id]=L})},D=window.setTimeout(k,80);return()=>{clearTimeout(D),P()}},[c,a,o]),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[y.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2",children:t.name}),y.jsx("button",{onClick:()=>a(t.id==="uncategorized"?"/add-envelope":`/add-envelope?categoryId=${t.id}`),className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",title:`Add to ${t.name}`,children:y.jsx(m0,{size:20})})]}),y.jsx("div",{ref:w,className:"space-y-2 relative",children:c.length===0?y.jsx("div",{className:"py-2 text-center border border-dashed border-gray-100 dark:border-zinc-800 rounded-xl",children:y.jsx("p",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:"Empty category"})}):y.jsx(wa,{initial:!1,children:c.map(P=>{const D=(n[r]||[]).find(z=>z.envelopeId===P.id)?.budgetedAmount||0,R=s(P.id);return P.isPiggybank?y.jsx(B_e,{piggybank:P,balance:R,onNavigate:z=>a(`/envelope/${z}`),setMoveableRef:O(P.id),isReorderingActive:h,activelyDraggingId:m,onItemDragStart:()=>{},onLongPressTrigger:N},P.id):y.jsx($_e,{env:P,budgetedAmount:D,remainingBalance:R,navigate:a,transactions:i,currentMonth:r,setMoveableRef:O,isReorderingActive:h,activelyDraggingId:m,onItemDragStart:()=>{},onLongPressTrigger:N},P.id)})})})]})},q_e=()=>{const{visibleEnvelopes:t,piggybanks:e,incomeSources:n,availableToBudget:r,currentMonth:i,allocations:a,transactions:s,isLoading:o,isInitialLoading:c,showTimeoutMessage:u,getEnvelopeBalance:f,deleteIncomeSource:h}=R_e(),{setMonth:g,setIsOnboardingActive:m,isOnboardingActive:b,isOnboardingCompleted:x,completeOnboarding:w,categories:S,fetchCategories:T,envelopes:I,reorderEnvelopes:N}=sn(),O=ns(),[P,k]=A.useState(!1),[D,R]=A.useState("add"),[z,L]=A.useState(null),[B,j]=A.useState(!1),[H,X]=A.useState(!1),q=A.useRef(null),W=A.useRef(null),[J,ne]=A.useState(0);A.useEffect(()=>{S.length===0&&T()},[S.length,T]);const Y=A.useMemo(()=>{const he={},ee=[];return S.forEach(re=>he[re.id]=[]),[...t,...e].sort((re,oe)=>(re.orderIndex??0)-(oe.orderIndex??0)).forEach(re=>{re.categoryId&&he[re.categoryId]?he[re.categoryId].push(re):ee.push(re)}),{groups:he,uncategorized:ee}},[S,t,e]),U=A.useCallback(async he=>{const ee=[...I.map(De=>De.id)],Se=new Set(he),re=[];let oe=0;ee.forEach(De=>{Se.has(De)?re.push(he[oe++]):re.push(De)}),await N(re)},[I,N]);A.useLayoutEffect(()=>{if(b)return;const he=W.current;if(!he)return;const ee=()=>ne(he.getBoundingClientRect().height);ee();const Se=new ResizeObserver(()=>ee());return Se.observe(he),window.addEventListener("resize",ee),()=>{window.removeEventListener("resize",ee),Se.disconnect()}},[b,i,n,a,t,e,r]),A.useEffect(()=>{if(!c&&!o){const he=setTimeout(()=>{if(b)return;if(x){m(!1);const re=(n[i]||[]).length===0&&(a[i]||[]).length===0,oe=Object.keys(n).some(De=>(n[De]||[]).length>0)||Object.keys(a).some(De=>(a[De]||[]).length>0);X(!!(re&&oe));return}const ee=(n[i]||[]).length===0&&(a[i]||[]).length===0,Se=Object.keys(n).some(re=>(n[re]||[]).length>0)||Object.keys(a).some(re=>(a[re]||[]).length>0);ee?Se?(X(!0),m(!1)):(m(!0),X(!1)):(X(!1),m(!1))},500);return()=>clearTimeout(he)}},[c,o,i,n,a,x]);const Q=()=>{R("add"),L(null),k(!0)},K=he=>{q.current&&clearTimeout(q.current),!B&&(R("edit"),L(he),k(!0))},Z=he=>{q.current&&clearTimeout(q.current),j(!0),h(he),setTimeout(()=>j(!1),500)},le=()=>{k(!1),L(null)},de=async()=>{X(!1);const{copyPreviousMonthAllocations:he}=sn.getState();await he(i)},ce=()=>{w(),m(!1)};return c?y.jsx(UG,{message:u?"Still loading...":"Loading your budget...",showTimeout:u}):y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:".moveable-control, .moveable-origin, .moveable-line { display: none !important; }"}}),y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[!b&&y.jsx("header",{ref:W,className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:y.jsx(M_e,{currentMonth:i,onMonthChange:he=>{X(!1),g(he)},budgetStatus:{amount:r,totalIncome:(n[i]||[]).reduce((he,ee)=>he+ee.amount,0),totalAllocated:(a[i]||[]).filter(he=>t.some(ee=>ee.id===he.envelopeId)||e.some(ee=>ee.id===he.envelopeId)).reduce((he,ee)=>he+ee.budgetedAmount,0)}})}),y.jsxs("div",{className:"pb-[calc(8rem+env(safe-area-inset-bottom))] px-4 max-w-4xl mx-auto space-y-4",style:b?void 0:{paddingTop:Math.max(0,J+16)},children:[b?y.jsx(V_e,{currentMonth:i,onComplete:ce}):H?y.jsx(z_e,{currentMonth:i,onCopy:de}):y.jsxs(y.Fragment,{children:[y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[y.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Income Sources"}),y.jsx("button",{onClick:Q,className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",children:y.jsx(m0,{size:20})})]}),(n[i]||[]).length===0?y.jsx("div",{className:"text-center py-4",children:y.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-[10px]",children:"No income sources yet."})}):y.jsx("div",{className:"space-y-2",children:y.jsx(wa,{initial:!1,mode:"popLayout",children:(n[i]||[]).map(he=>y.jsx(Gn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(lS,{onDelete:()=>Z(he),children:y.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>K(he),children:[y.jsx("div",{className:"flex-1",children:y.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:he.name})}),y.jsxs("p",{className:"text-xs font-bold text-green-600 dark:text-emerald-400",children:["$",he.amount.toFixed(2)]})]})})},he.id))})})]}),S.map(he=>y.jsx(B6,{category:he,envelopes:Y.groups[he.id]||[],allocations:a,currentMonth:i,transactions:s,navigate:O,getEnvelopeBalance:f,onReorderGlobal:U},he.id)),Y.uncategorized.length>0&&y.jsx(B6,{category:{id:"uncategorized",name:"Uncategorized"},envelopes:Y.uncategorized,allocations:a,currentMonth:i,transactions:s,navigate:O,getEnvelopeBalance:f,onReorderGlobal:U}),S.length===0&&Y.uncategorized.length===0&&y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 text-center py-12",children:[y.jsx(p_,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),y.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:"No envelopes yet."}),y.jsx("button",{onClick:()=>O("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]})]}),y.jsx(j_e,{isVisible:P,onClose:le,mode:D,initialIncomeSource:z})]})]})]})},G_e=[],RY=({selectedCard:t,onCardSelect:e,initialCards:n=G_e,disabled:r=!1,isUserSelected:i=!1})=>{const a=sn(Y=>Y.appSettings),s=sn(Y=>Y.updateAppSettings),[o,c]=A.useState(n.length>0?n[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}),[u,f]=A.useState(!1),[h,g]=A.useState(!1),[m,b]=A.useState(n),[x,w]=A.useState(null),[S,T]=A.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),[I,N]=A.useState(null),[O,P]=A.useState(null);A.useEffect(()=>{a?.paymentSources&&(b(a.paymentSources),a.paymentSources.length>0&&!t&&c(a.paymentSources[0]))},[a,t]);const k=t||o;A.useEffect(()=>{!t&&e&&m.length>0&&e(m[0])},[t,e,m]);const D=Y=>{r||(Y.id==="add-new"?g(!0):(c(Y),e?.(Y),f(!1)))},R=()=>{r||f(!u)},z=Y=>{r||w(Y)},L=async()=>{if(x&&!r){const Y=m.filter(U=>U.id!==x.id);if(b(Y),k?.id===x.id){const U=Y.length>0?Y[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"};c(U),e?.(U)}w(null),f(!1);try{await s({paymentSources:Y})}catch(U){console.error("Failed to delete card from app settings:",U),b(m),alert("Failed to delete card. Please try again.");return}}},B=()=>{w(null)},j=async()=>{if(r)return;const Y=!["Cash","Venmo"].includes(S.network);if(Y&&(S.last4.length!==4||!/^\d{4}$/.test(S.last4))){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!S.name.trim()){alert("Please enter a name");return}const U={id:`custom-${Date.now()}`,name:S.name.trim(),network:S.network,last4:Y?S.last4:void 0,color:S.color},Q=[...m,U];b(Q),c(U),e?.(U),g(!1),f(!1);try{await s({paymentSources:Q})}catch(K){console.error("Failed to save card to app settings:",K),b(m),c(k),alert("Failed to save card. Please try again.");return}T({name:"",network:"Visa",last4:"",color:"#3b82f6"})},H=(Y,U)=>{r||(N(U),Y.dataTransfer.effectAllowed="move")},X=(Y,U)=>{r||!I||(Y.preventDefault(),Y.dataTransfer.dropEffect="move",P(U))},q=()=>{P(null)},W=async(Y,U)=>{if(r||!I)return;Y.preventDefault(),P(null);const Q=m.findIndex(Z=>Z.id===I.id);if(Q===-1||Q===U)return;const K=[...m];K.splice(Q,1),K.splice(U,0,I),b(K),N(null);try{await s({paymentSources:K})}catch(Z){console.error("Failed to reorder cards:",Z),b(m),alert("Failed to reorder cards. Please try again.")}},J=()=>{N(null),P(null)},ne=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&y.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),y.jsxs("div",{onClick:R,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[y.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:k.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:k.network}),y.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(k.network)?k.network==="Cash"?"$$$":"@":` ${k.last4||""}`})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:k.name}),y.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cash","Venmo"].includes(k.network)?k.network:`(...${k.last4})`})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-gray-400",children:u?"":""}),!i&&y.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),u&&y.jsxs("div",{className:"card-stack-dropdown",children:[m.length>1&&y.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 text-center",children:" Drag and drop cards to reorder"}),y.jsx("div",{className:"card-stack",children:y.jsx(wa,{initial:!1,mode:"popLayout",children:[...m,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((Y,U)=>{const Q=k.id===Y.id,K=Y.id==="add-new",Z=["Cash","Venmo"].includes(Y.network);return y.jsx(Gn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(lS,{onDelete:()=>!K&&!r&&z(Y),threshold:-80,children:y.jsxs("div",{className:`card-stack-item ${Q?"selected":""} ${K?"add-new-card":""} ${I?.id===Y.id?"dragging":""} ${O===U?"drag-over":""}`,onClick:()=>D(Y),draggable:!K&&!r,onDragStart:K?void 0:le=>H(le,Y),onDragOver:K?void 0:le=>X(le,U),onDragLeave:K?void 0:q,onDrop:K?void 0:le=>W(le,U),onDragEnd:K?void 0:J,style:{backgroundColor:K?"#f3f4f6":Y.color,color:K?"#374151":Y.color==="#e3e3e3"?"#000":"#fff",zIndex:m.length-U,opacity:I?.id===Y.id?.5:1,transform:O===U?"scale(1.02)":"scale(1)"},children:[y.jsxs("div",{className:"card-header",children:[y.jsx("span",{className:"card-network",children:K?"":Y.network}),Q&&!K&&y.jsx("span",{className:"selected-indicator",children:""})]}),y.jsxs("div",{className:"card-details",children:[y.jsx("div",{className:"card-name",children:Y.name}),y.jsx("div",{className:"card-number",children:K?"":Z?Y.network==="Cash"?"$$$":"@":` ${Y.last4}`})]}),K&&y.jsx("div",{className:"add-icon",children:y.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),y.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},Y.id)})})})]})]}),h&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Payment Method"}),y.jsx("button",{type:"button",onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),y.jsx("input",{type:"text",value:S.name,onChange:Y=>T({...S,name:Y.target.value}),placeholder:"e.g., Wallet Cash, My Venmo",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),y.jsxs("select",{value:S.network,onChange:Y=>T({...S,network:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[y.jsx("option",{value:"Visa",children:"Visa"}),y.jsx("option",{value:"Mastercard",children:"Mastercard"}),y.jsx("option",{value:"Amex",children:"Amex"}),y.jsx("option",{value:"Cash",children:"Cash"}),y.jsx("option",{value:"Venmo",children:"Venmo"})]})]}),!["Cash","Venmo"].includes(S.network)&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),y.jsx("input",{type:"text",value:S.last4,onChange:Y=>T({...S,last4:Y.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:ne.map(Y=>y.jsx("button",{type:"button",onClick:()=>T({...S,color:Y}),className:`w-full h-10 rounded-lg border-2 transition-all ${S.color===Y?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:Y}},Y))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),y.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:S.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:S.network}),y.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(S.network)?S.network==="Cash"?"$$$":"@":` ${S.last4||"0000"}`})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{type:"button",onClick:j,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add"})]})]})]})}),x&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",y.jsx("span",{className:"font-medium",children:x.name}),"?"]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{type:"button",onClick:B,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{type:"button",onClick:L,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},MY=({envelopes:t,transactionAmount:e,onSplitChange:n,initialSelectedEnvelopeId:r})=>{const[i,a]=A.useState([]),[s,o]=A.useState(!1);A.useEffect(()=>{r&&!s&&t.some(I=>I.id===r)&&(a([r]),o(!0))},[r,t,s]);const[c,u]=A.useState({}),[f,h]=A.useState(e),g=T=>{a(I=>I.includes(T)?I.filter(N=>N!==T):[...I,T])},m=(T,I)=>{u(N=>({...N,[T]:I}))},b=xd.useRef(i.length);A.useEffect(()=>{if(i.length===1){const T=i[0];u({[T]:e})}else if(i.length>1&&b.current<=1){const T={};i.forEach(I=>{T[I]=0}),u(T)}b.current=i.length},[i.length,i,e]),A.useEffect(()=>{const T=Object.values(c).reduce((I,N)=>I+(N||0),0);h(e-T),n(c)},[c,e,n]),A.useEffect(()=>{const T={...c};Object.keys(T).forEach(I=>{i.includes(I)||delete T[I]}),Object.keys(T).length!==Object.keys(c).length&&u(T)},[i,c]);const x=()=>{a([]),u({})},w=Math.abs(f)<.01&&i.length>0,S=i.length>0&&Math.abs(f)>.01;return y.jsxs("div",{className:"space-y-3",children:[i.length>1&&y.jsxs("div",{className:`p-3 rounded-lg ${S?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":w?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),y.jsxs("span",{className:`font-bold text-lg ${S?"text-red-600 dark:text-red-400":w?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",f.toFixed(2)]})]}),S&&y.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:i.length>1?"Split Across Envelopes":"Select Envelope"}),i.length>0&&y.jsx("button",{type:"button",onClick:x,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),y.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-zinc-800 rounded-lg",children:t.map(T=>y.jsxs("div",{className:"flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsx("input",{type:"checkbox",checked:i.includes(T.id),onChange:()=>g(T.id),className:"mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),y.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:T.name}),i.includes(T.id)&&i.length>1&&y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400",children:"$"}),y.jsx("input",{type:"number",min:"0",step:"0.01",value:c[T.id]||"",onChange:I=>m(T.id,parseFloat(I.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},T.id))})]})},jY=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i,envelopes:a})=>{const{addTransaction:s,updateTransaction:o,deleteTransaction:c,currentMonth:u}=sn(),[f,h]=A.useState(""),[g,m]=A.useState(""),[b,x]=A.useState(""),[w,S]=A.useState(new Date().toISOString().split("T")[0]),[T,I]=A.useState(null),[N,O]=A.useState(null),[P,k]=A.useState({}),D=a?[...a].filter(j=>j.isActive!==!1).sort((j,H)=>{const X=j.orderIndex??0,q=H.orderIndex??0;return X!==q?X-q:j.name.localeCompare(H.name)}):[];A.useEffect(()=>{if(t)if(n==="edit"&&i){if(h(i.amount.toString()),m(i.merchant||""),x(i.description),I(i.paymentMethod||null),a){const j=a.find(H=>H.id===i.envelopeId);O(j||r),k({[i.envelopeId]:i.amount})}try{const j=new Date(i.date);isNaN(j.getTime())?(console.warn("Invalid date in transaction:",i.date),S(new Date().toISOString().split("T")[0])):S(j.toISOString().split("T")[0])}catch(j){console.error("Error parsing transaction date:",j),S(new Date().toISOString().split("T")[0])}}else h(""),m(""),x(""),S(new Date().toISOString().split("T")[0]),O(r),k({})},[t,n,i,r,a]);const R=async j=>{j.preventDefault();const H=parseFloat(f);if(isNaN(H)||H<=0){console.log(" Invalid amount:",f);return}const X=n==="edit"&&Object.keys(P).length>0;console.log(" Saving transaction:",{mode:n,amount:H,note:b,date:w,splitAmounts:P,paymentMethod:T});try{const q=new Date(w),W=`${q.getFullYear()}-${(q.getMonth()+1).toString().padStart(2,"0")}`;if(W!==u){const J=`This transaction date (${W}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(J))return}n==="add"?(console.log(" Adding income transaction"),await s({amount:H,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(N||r).id,type:"Income",reconciled:!1,paymentMethod:T||void 0})):n==="spend"?(console.log(" Adding expense transaction"),await s({amount:H,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(N||r).id,type:"Expense",reconciled:!1,paymentMethod:T||void 0})):n==="edit"&&i&&(console.log(" Updating transaction"),X?await o({...i,amount:H,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:Object.keys(P)[0]||i.envelopeId,paymentMethod:T||void 0}):await o({...i,amount:H,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(N||r).id,paymentMethod:T||void 0})),console.log(" Transaction saved successfully"),e()}catch(q){console.error(" Error saving transaction:",q),alert("Failed to save transaction: "+(q instanceof Error?q.message:"Unknown error"))}},z=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},L=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",B=n==="add"?"text-green-500":"text-red-500";return y.jsx(wa,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),y.jsxs(Gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10 flex flex-col max-h-[90vh]",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),y.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:L}),y.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0||i?.isAutomatic,children:i?.isAutomatic?"":"Save"})]}),y.jsxs("form",{onSubmit:R,className:"p-6 space-y-6 flex-1 overflow-y-auto",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${B}`,children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:j=>{const H=j.target.value.replace(/\D/g,"");if(!H){h("");return}const q=(parseInt(H,10)/100).toFixed(2);h(q)},onKeyDown:j=>{(j.key==="e"||j.key==="E"||j.key==="+"||j.key==="-")&&j.preventDefault()},placeholder:"0.00",autoFocus:!0,disabled:i?.isAutomatic,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${B} placeholder-gray-700 ${i?.isAutomatic?"cursor-not-allowed opacity-80":""}`})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),y.jsx("input",{type:"text",value:g,onChange:j=>m(j.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),!i?.isAutomatic&&y.jsx(RY,{selectedCard:T,onCardSelect:I}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),y.jsx("input",{type:"text",value:b,onChange:j=>x(j.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const j=new Date(w);return`${j.getFullYear()}-${(j.getMonth()+1).toString().padStart(2,"0")}`!==u?y.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[y.jsx($h,{size:14}),y.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),y.jsx("input",{type:"date",value:w,onChange:j=>{console.log("Date changed to:",j.target.value),S(j.target.value)},required:!0,disabled:i?.isAutomatic,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark] disabled:opacity-80"})]}),n==="edit"&&a&&y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:y.jsx(MY,{envelopes:D,transactionAmount:parseFloat(f)||0,onSplitChange:k,initialSelectedEnvelopeId:i?.envelopeId})}),n==="edit"&&!i?.isAutomatic&&y.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:y.jsxs("button",{type:"button",onClick:z,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[y.jsx(r7,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})]})})},H_e=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=sn(),[a,s]=A.useState(""),[o,c]=A.useState(""),[u,f]=A.useState(""),[h,g]=A.useState(new Date().toISOString().split("T")[0]),m=r.filter(w=>w.id!==n.id);A.useEffect(()=>{if(!t)return;const w=window.setTimeout(()=>{s(""),c(""),f(""),g(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(w)},[t]);const b=w=>{w.preventDefault();const S=parseFloat(o);isNaN(S)||S<=0||!a||(i(n.id,a,S,u,new Date(h)),e())},x=r.find(w=>w.id===a);return y.jsx(wa,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),y.jsxs(Gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),y.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),y.jsx("button",{onClick:b,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!o||parseFloat(o)<=0||!a,children:"Transfer"})]}),y.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),y.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),y.jsxs("select",{value:a,onChange:w=>s(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[y.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),m.map(w=>y.jsx("option",{value:w.id,className:"bg-white dark:bg-zinc-900",children:w.name},w.id))]})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:w=>{const S=w.target.value.replace(/\D/g,"");if(!S){c("");return}const I=(parseInt(S,10)/100).toFixed(2);c(I)},onKeyDown:w=>{(w.key==="e"||w.key==="E"||w.key==="+"||w.key==="-")&&w.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),y.jsx("input",{type:"text",value:u,onChange:w=>f(w.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),y.jsx("input",{type:"date",value:h,onChange:w=>g(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),x&&o&&parseFloat(o)>0&&y.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",y.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(o).toFixed(2)]})," from"," ",y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:x.name})]})]})]})]})})},K_e=({isOpen:t,onClose:e,onSave:n,existingPiggybank:r})=>{const[i,a]=A.useState(""),[s,o]=A.useState(""),[c,u]=A.useState(""),[f,h]=A.useState("#3B82F6"),[g,m]=A.useState("piggy-bank"),[b,x]=A.useState(!1),[w,S]=A.useState(!1);A.useEffect(()=>{r?(a(r.name),o(r.piggybankConfig?.targetAmount?.toString()||""),u(r.piggybankConfig?.monthlyContribution.toString()||"0"),h(r.piggybankConfig?.color||"#3B82F6"),m(r.piggybankConfig?.icon||"piggy-bank"),x(r.piggybankConfig?.paused||!1)):(a(""),o(""),u(""),h("#3B82F6"),m("piggy-bank"),x(!1))},[r,t]);const T=async N=>{if(N.preventDefault(),!(!i.trim()||!c)){S(!0);try{const O={name:i.trim(),isPiggybank:!0,piggybankConfig:{monthlyContribution:parseFloat(c),color:f,icon:g,paused:b}};s&&parseFloat(s)>0&&(O.piggybankConfig.targetAmount=parseFloat(s)),r&&(O.id=r.id,O.currentBalance=r.currentBalance,O.lastUpdated=new Date().toISOString(),O.isActive=r.isActive,O.orderIndex=r.orderIndex,O.userId=r.userId),await n(O),e()}catch(O){console.error("Error saving piggybank:",O),alert("Failed to save piggybank")}finally{S(!1)}}},I=[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}];return y.jsx(wa,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),y.jsxs(Gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[y.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-800 px-6 py-4 flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:y.jsx(g0,{size:20,className:"text-blue-600 dark:text-blue-400"})}),y.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r?"Edit Piggybank":"New Piggybank"})]}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:y.jsx(g_,{size:24})})]}),y.jsxs("form",{onSubmit:T,className:"p-6 space-y-5",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"piggybank-name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Piggybank Name *"}),y.jsx("input",{type:"text",id:"piggybank-name",value:i,onChange:N=>a(N.target.value),placeholder:"e.g. Vacation Fund, Emergency Savings",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0,autoFocus:!0})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",id:"monthly-contribution",value:c,onChange:N=>{const O=N.target.value.replace(/\D/g,"");if(!O){u("");return}const k=(parseInt(O,10)/100).toFixed(2);u(k)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",id:"target-amount",value:s,onChange:N=>{const O=N.target.value.replace(/\D/g,"");if(!O){o("");return}const k=(parseInt(O,10)/100).toFixed(2);o(k)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),y.jsx("div",{className:"space-y-2",children:y.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:b,onChange:N=>x(N.target.checked),className:"w-5 h-5 rounded border-gray-300 dark:border-zinc-700 text-blue-600 focus:ring-2 focus:ring-blue-500"}),y.jsxs("div",{children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Pause auto-contributions"}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Monthly contributions will be skipped while paused"})]})]})}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:I.map(N=>y.jsx("button",{type:"button",onClick:()=>h(N.value),className:`w-full aspect-square rounded-lg transition-all ${f===N.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:N.value},title:N.label},N.value))})]}),y.jsxs("div",{className:"pt-4 flex gap-3",children:[y.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",disabled:w,children:"Cancel"}),y.jsx("button",{type:"submit",disabled:!i.trim()||!c||w,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&c&&!w?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:w?"Saving...":r?"Update":"Create"})]})]})]})]})})},W_e=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},Y_e=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},zY=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;console.log(" Transaction payment method:",t.paymentMethod);const i=t.type==="Income",a=t.type==="Expense";let s="text-gray-900 dark:text-white";return i&&(s="text-green-600 dark:text-green-400"),a&&(s="text-red-600 dark:text-red-400"),y.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 active:scale-[0.99] transition-all cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[y.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&y.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),y.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[y.jsx("span",{children:W_e(t.date)}),e&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),t.paymentMethod&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:t.paymentMethod.color}}),y.jsx("span",{className:"truncate max-w-[80px]",children:t.paymentMethod.name})]})]})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${s}`,children:[a?"-":i?"+":"",Y_e(t.amount)]}),n?y.jsx("button",{type:"button",onClick:o=>{o.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?y.jsx(al,{className:"text-green-500",size:20}):y.jsx(Bz,{className:"text-gray-400",size:20})}):y.jsx("span",{children:t.reconciled?y.jsx(al,{className:"text-green-500",size:20}):y.jsx(Bz,{className:"text-gray-400",size:20})})]})]})},gC=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),X_e=()=>{const{id:t}=Toe(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:s,updateTransaction:o,deleteTransaction:c,restoreTransaction:u,getEnvelopeBalance:f,currentMonth:h,allocations:g,incomeSources:m,setEnvelopeAllocation:b,updatePiggybankContribution:x,updateEnvelope:w}=sn(),{showToast:S}=pf(),T=ns(),I=Ls(),[N,O]=A.useState(!1),[P,k]=A.useState(!1),[D,R]=A.useState(!1),[z,L]=A.useState(null),[B,j]=A.useState(!1),[H,X]=A.useState(!1),[q,W]=A.useState(""),J=A.useRef(null),ne=A.useRef(!1);A.useEffect(()=>{e.length===0&&r()},[]);const Y=e.find(re=>re.id===t),U=async re=>{if(Y)try{const oe={...Y,...re,id:Y.id,userId:Y.userId,currentBalance:Y.currentBalance,lastUpdated:new Date().toISOString(),isActive:Y.isActive,orderIndex:Y.orderIndex};await w(oe),S("Piggybank updated successfully","success"),j(!1)}catch(oe){console.error("Failed to update piggybank:",oe),S("Failed to update piggybank","error")}},Q=Y?.isPiggybank?Y.piggybankConfig?.monthlyContribution||0:g[h]?.find(re=>re.envelopeId===t)?.budgetedAmount||0;A.useEffect(()=>{H&&(W(Q.toString()),setTimeout(()=>{J.current?.focus(),J.current?.select()},50))},[H,Q]);const K=re=>{const oe=(m[h]||[]).reduce((je,Ue)=>je+Ue.amount,0),De=g[h]||[];let ze=De.map(je=>Y&&je.envelopeId===Y.id&&re!==void 0?{...je,budgetedAmount:re}:je).filter(je=>{const Ue=e.find(Ie=>Ie.id===je.envelopeId);return Ue?Ue.isActive!==!1:!1}).reduce((je,Ue)=>je+Ue.budgetedAmount,0);return re!==void 0&&Y&&(De.some(Ue=>Ue.envelopeId===Y.id)||(ze+=re)),oe-ze},le=H?K(parseFloat(q)||0):K(),de=async()=>{if(!Y||ne.current)return;const re=parseFloat(q);if(isNaN(re)||re<0){S("Please enter a valid positive number","error");return}ne.current=!0;try{Y.isPiggybank?await x(Y.id,re):await b(Y.id,re),X(!1)}catch(oe){console.error("Failed to save budget:",oe),S("Failed to update budget","error")}finally{ne.current=!1}};if(!Y)return i?y.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:y.jsx("p",{children:"Loading envelope..."})}):y.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:y.jsx("p",{children:"Envelope not found."})});if(Y.isPiggybank){const re=n.filter(oe=>oe.envelopeId===Y.id);console.log(" Piggybank:",Y.name),console.log(" Created at:",Y.createdAt),console.log(" Transactions:",re.map(oe=>({date:oe.date,description:oe.description,amount:oe.amount})))}const ce=n.filter(re=>re.envelopeId===Y.id).filter(re=>{if(re.description==="Budgeted"||re.description==="Piggybank Contribution")return!1;if(Y.isPiggybank){if(!Y.createdAt)return!0;const oe=sw(Y.createdAt).toISOString().split("T")[0];return sw(re.date).toISOString().split("T")[0]>=oe}return re.month===h||!re.month}).sort((re,oe)=>new Date(oe.date).getTime()-new Date(re.date).getTime()),he=()=>{I.state?.fromGlobalFAB?T("/"):T(-1)},ee=()=>{t&&(a(t),T(-1))},Se=re=>{const oe={...re,reconciled:!re.reconciled};o(oe)};return y.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-[calc(8rem+env(safe-area-inset-bottom))] max-w-4xl mx-auto",children:[y.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[y.jsx("button",{onClick:()=>{if(Y.isPiggybank)j(!0);else{const re=prompt("Rename envelope:",Y.name);re&&re.trim()&&t&&s(t,re)}},className:"text-blue-600 dark:text-blue-400 font-medium",children:Y.isPiggybank?"Edit":"Rename"}),y.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Y.name}),y.jsx("button",{onClick:he,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),y.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const re=Y.isPiggybank?f(Y.id):f(Y.id,h);return console.log(`Debug: Envelope ${Y.name} Balance:`,re),y.jsx("span",{className:`text-xl font-bold ${re<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:gC(re)})})()]}),y.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-zinc-400",children:Y.isPiggybank?"Monthly Contribution":"Budgeted This Month"}),H?y.jsx("form",{onSubmit:re=>{re.preventDefault(),de()},className:"flex items-center gap-2",children:y.jsx("input",{ref:J,type:"number",step:"0.01",value:q,onChange:re=>W(re.target.value),onBlur:de,className:"w-24 px-2 py-1 text-right font-semibold bg-gray-100 dark:bg-zinc-800 rounded border border-blue-500 focus:outline-none"})}):y.jsx("div",{onClick:()=>X(!0),className:"px-2 py-1 -mr-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 cursor-pointer transition-colors",children:y.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:gC(Q)})})]}),y.jsxs("div",{className:`mt-3 py-1.5 px-3 rounded-md flex justify-between items-center text-xs font-medium transition-colors ${le<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":le===0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:[y.jsx("span",{children:"Left to Budget:"}),y.jsx("span",{children:gC(le)})]})]})]}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>O(!0),children:[y.jsx(qle,{className:"w-5 h-5 mr-3"}),"Add Money"]}),y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>k(!0),children:[y.jsx(Ule,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>R(!0),children:[y.jsx(Ile,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),y.jsxs("section",{className:"mt-6",children:[y.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:ce.length===0?y.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):y.jsx(wa,{initial:!1,mode:"popLayout",children:ce.map(re=>y.jsx(Gn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(lS,{disabled:re.isAutomatic,onDelete:()=>{if(!re.id)return;const oe={...re};c(re.id),S("Transaction deleted","neutral",()=>u(oe))},children:y.jsx(zY,{transaction:re,onReconcile:()=>Se(re),onEdit:()=>{re.isAutomatic||L(re)}})})},re.id))})})]}),y.jsx("div",{className:"mt-8",children:y.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{const re=Y.isPiggybank?`Are you sure you want to delete "${Y.name}"? This will delete the piggybank and all its history.`:`Are you sure you want to remove "${Y.name}" from ${h}? This will delete all transactions for this month only.`;confirm(re)&&ee()},children:[y.jsx(r7,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),y.jsx(jY,{isVisible:N||P||!!z,onClose:()=>{O(!1),k(!1),L(null)},mode:N?"add":P?"spend":"edit",currentEnvelope:Y,initialTransaction:z}),y.jsx(H_e,{isVisible:D,onClose:()=>R(!1),sourceEnvelope:Y}),y.jsx(K_e,{isOpen:B,onClose:()=>j(!1),onSave:U,existingPiggybank:Y})]})},Q_e=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:s,totalAllocated:o,transactionCount:c,totalTransactionAmount:u,isLoading:f=!1})=>{const[h,g]=A.useState("confirm"),m=w=>{const[S,T]=w.split("-");return new Date(parseInt(S),parseInt(T)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},b=()=>{h==="confirm"?g("final_confirm"):h==="final_confirm"&&n()},x=()=>{g("confirm"),e()};return y.jsx(wa,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x,className:"absolute inset-0 bg-black bg-opacity-50"}),y.jsxs(Gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[y.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",m(r)]}),y.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:f,children:""})]}),y.jsx("div",{className:"p-6 space-y-4",children:h==="confirm"?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),y.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:y.jsxs("ul",{className:"space-y-1",children:[y.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),y.jsxs("li",{children:[" ",s," envelope allocation",s!==1?"s":""," (totaling $",o.toFixed(2),")"]}),y.jsxs("li",{children:[" ",c," transaction",c!==1?"s":""," (totaling $",u.toFixed(2),")"]})]})})]})]})}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[y.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data, income sources, allocations, and all transactions."]})})]})})]}):y.jsxs("div",{className:"text-center py-4",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:y.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),y.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-2",children:"Are you absolutely sure?"}),y.jsxs("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["This action cannot be undone. All budget data and transactions for ",y.jsx("strong",{children:m(r)})," will be permanently removed."]})]})}),y.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:f,children:"Cancel"}),y.jsx("button",{type:"button",onClick:b,disabled:f,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Clearing...":h==="confirm"?"Continue":"Yes, Start Fresh"})]})]})]})})},Z_e=()=>{const t=ns(),e=A.useRef(null),{envelopes:n,transactions:r,categories:i,resetData:a,importData:s,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:f,incomeSources:h,allocations:g,currentMonth:m,clearMonthData:b,handleUserLogout:x,resetOnboarding:w}=sn(),{deleteAccount:S,currentUser:T,logout:I}=Ga(),[N,O]=A.useState(null),[P,k]=A.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[D,R]=A.useState(!1),[z,L]=A.useState(""),[B,j]=A.useState(!1),[H,X]=A.useState(!1),[q,W]=A.useState(null),[J,ne]=A.useState(!1),[Y,U]=A.useState(!1),Q=978307200,K=c?.theme??"system",Z=c?.fontSize??"medium";A.useEffect(()=>{c||f().catch(Ie=>{console.error("Failed to initialize app settings:",Ie)})},[f,c]);const le=(Ie,Oe)=>{O({type:Ie,text:Oe}),setTimeout(()=>O(null),3500)},de=A.useMemo(()=>{const Ie=n.length,Oe=r.length,Ge=m?g[m]||[]:[],yt=Object.values(h).reduce((xn,Zt)=>xn+Zt.length,0),Dt=Ge.length,Nt=n.reduce((xn,Zt)=>{const Ur=Zt.isPiggybank?o(Zt.id):o(Zt.id,m);return xn+(typeof Ur=="number"?Ur:0)},0),ot=0,Et=r.reduce((xn,Zt)=>{let Ur=0;if(typeof Zt.date=="string"){const as=Date.parse(Zt.date);Ur=Number.isNaN(as)?0:as}else typeof Zt.date=="number"&&(Ur=Zt.date<2e9?(Zt.date+Q)*1e3:Zt.date);return Math.max(xn,Ur)},0),ft=ot||Et?new Date(Math.max(ot,Et)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:Ie,transactionCount:Oe,incomeSourceCount:yt,allocationCount:Dt,totalBalance:Nt,lastUpdated:ft}},[n,r,h,g,m]),ce=()=>{try{console.log(" Creating backup...");const Ie={appVersion:"1.9.3",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:n.map(Nt=>({...Nt,currentBalance:(()=>{const ot=Nt.isPiggybank?o(Nt.id):o(Nt.id,m);return typeof ot=="number"?ot:0})(),lastUpdated:new Date().toISOString()})),transactions:r,categories:i,allocations:g,incomeSources:h},Oe=new Blob([JSON.stringify(Ie,null,2)],{type:"application/json"}),Ge=URL.createObjectURL(Oe),yt=document.createElement("a");yt.href=Ge,yt.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(yt),yt.click(),document.body.removeChild(yt),URL.revokeObjectURL(Ge);const Dt=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",Dt),k(Dt),W({success:!0,message:"Backup downloaded successfully."})}catch(Ie){console.error(Ie),W({success:!1,message:"Failed to create backup file.",onRetry:ce})}},he=()=>{X(!0),W(null);try{const Ie=["Date","Merchant","Payment Method","Notes","Amount","Type","Envelope","Reconciled"],Oe=r.filter(ft=>ft.description!=="Budgeted"&&ft.description!=="Piggybank Contribution"),Ge=new Set,yt=[];for(const ft of Oe){let xn,Zt,Ur;if(ft.splitGroupId&&!Ge.has(ft.splitGroupId)){Ge.add(ft.splitGroupId);const _n=Oe.filter(Vt=>Vt.splitGroupId===ft.splitGroupId);xn=_n.reduce((Vt,Bs)=>Vt+Bs.amount,0),Zt=_n.map(Vt=>n.find(Bs=>Bs.id===Vt.envelopeId)?.name||"Unknown").join(", "),Ur=_n.every(Vt=>Vt.reconciled)}else{if(ft.splitGroupId&&Ge.has(ft.splitGroupId))continue;xn=ft.amount,Zt=n.find(_n=>_n.id===ft.envelopeId)?.name||"Unknown",Ur=ft.reconciled}const as=(ft.merchant||"").replace(/"/g,'""'),ss=(ft.description||"").replace(/"/g,'""');let os="";ft.paymentMethod&&(os=`${ft.paymentMethod.name} (...${ft.paymentMethod.last4})`);const pi=os.replace(/"/g,'""');let wn="Invalid Date";if(ft.date){if(typeof ft.date=="string")wn=ft.date.split("T")[0];else if(typeof ft.date=="number"){const _n=ft.date<2e9?(ft.date+Q)*1e3:ft.date;wn=new Date(_n).toISOString().split("T")[0]}}yt.push([wn,`"${as}"`,`"${pi}"`,`"${ss}"`,xn.toFixed(2),ft.type,`"${Zt}"`,Ur?"Yes":"No"].join(","))}const Dt=[Ie.join(","),...yt].join(`
`),Nt=new Blob([Dt],{type:"text/csv;charset=utf-8;"}),ot=URL.createObjectURL(Nt),Et=document.createElement("a");Et.href=ot,Et.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Et),Et.click(),document.body.removeChild(Et),URL.revokeObjectURL(ot),W({success:!0,message:"Transactions CSV exported successfully."})}catch(Ie){console.error(Ie),W({success:!1,message:"Failed to export CSV. Please try again.",onRetry:he})}finally{X(!1)}},ee=()=>{e.current?.click()},Se=Ie=>{const Oe=Ie.target.files?.[0];if(!Oe)return;const Ge=new FileReader;Ge.onload=async yt=>{try{const Dt=JSON.parse(yt.target?.result),Nt=await s(Dt);if(!Nt.success){le("error",Nt.message);return}if(Dt.appSettings?.theme)try{await u({theme:Dt.appSettings.theme})}catch(ot){console.error("Failed to update imported settings:",ot)}le("success",`Loaded ${Dt.envelopes?.length??0} envelopes, ${Dt.transactions?.length??0} transactions.`)}catch(Dt){console.error(Dt),le("error","Invalid backup file. Please verify the JSON.")}},Ge.readAsText(Oe),Ie.target.value=""},re=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await a(),le("success","All data has been permanently deleted."),t("/")}catch(Ie){console.error("Reset failed:",Ie),le("error","Failed to delete all data. Some data may remain.")}},oe=async()=>{if(!z.trim()){le("error","Please enter your password to confirm account deletion.");return}R(!0);try{await a(),await S(z)?le("success","Your account has been permanently deleted."):le("error","Failed to delete account. Please try again.")}catch(Ie){console.error("Account deletion failed:",Ie),le("error","Failed to delete account. Please try again.")}finally{R(!1),j(!1),L("")}},De=async()=>{if(!T){le("error","You must be logged in to clean up data.");return}ne(!0);try{const Ie=await kN.cleanupOrphanedData(T.id),Oe=Ie.orphanedAllocationsDeleted+Ie.orphanedTransactionsDeleted;Oe>0?le("success",`Cleaned ${Oe} orphaned items: ${Ie.orphanedAllocationsDeleted} allocations and ${Ie.orphanedTransactionsDeleted} transactions.`):le("success","No orphaned data found. Your database is already clean!")}catch(Ie){console.error("Cleanup failed:",Ie),le("error","Failed to clean up orphaned data. Please try again.")}finally{ne(!1)}},Pe=()=>{U(!0)},ze=async()=>{U(!1),await b(m),le("success","Month data has been reset.")},je=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{x(),I(),t("/")}catch(Ie){console.error("Logout failed:",Ie)}},Ue=T?.displayName?.charAt(0)?.toUpperCase()||T?.email?.charAt(0)?.toUpperCase()||"U";return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[y.jsx("button",{onClick:()=>t(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),y.jsxs("div",{className:"p-4 space-y-6 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[N&&y.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${N.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[N.type==="success"?y.jsx(x1,{size:18}):y.jsx(w1,{size:18}),N.text]}),y.jsx("section",{children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 flex items-center gap-4",children:[y.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-semibold shadow-md",children:Ue}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:T?.displayName||T?.email?.split("@")[0]||"User"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate",children:T?.email}),y.jsxs("button",{onClick:je,className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium flex items-center gap-1 hover:underline",children:[y.jsx(pce,{size:14})," Log Out"]})]})]})}),y.jsx("section",{children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(Uz,{className:"text-blue-500",size:22}),y.jsxs("div",{children:[y.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),y.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:de.envelopeCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:de.transactionCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:de.incomeSourceCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:de.allocationCount})]})]})]})}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Categories"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:y.jsxs("button",{onClick:()=>t("/settings/categories"),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"text-xl",children:""}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Manage Categories"})]}),y.jsx(oo,{className:"text-gray-400",size:18})]})})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[K==="light"&&y.jsx("span",{className:"text-orange-500 text-lg",children:""}),K==="dark"&&y.jsx("span",{className:"text-purple-500 text-lg",children:""}),K==="system"&&y.jsx("span",{className:"text-gray-500 text-lg",children:""}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:K})]}),y.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(Ie=>y.jsx("button",{onClick:async()=>{try{await u({theme:Ie.value})}catch(Oe){console.error("Failed to update theme setting:",Oe)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${K===Ie.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:Ie.label},Ie.value))})]}),y.jsx("div",{className:"h-px bg-gray-100 dark:bg-zinc-800"}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"text-gray-500 text-lg",children:"Aa"}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Font Size"})]}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:Z})]}),y.jsx("div",{className:"flex gap-2",children:[{label:"A",value:"extra-small",sizeClass:"text-[10px]"},{label:"A",value:"small",sizeClass:"text-xs"},{label:"A",value:"medium",sizeClass:"text-base"},{label:"A",value:"large",sizeClass:"text-xl"},{label:"A",value:"extra-large",sizeClass:"text-2xl"}].map(Ie=>y.jsx("button",{onClick:async()=>{try{await u({fontSize:Ie.value})}catch(Oe){console.error("Failed to update font size setting:",Oe)}},className:`flex-1 py-2 rounded-lg font-medium border transition-colors flex items-center justify-center ${Z===Ie.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:y.jsx("span",{className:Ie.sizeClass,children:Ie.label})},Ie.value))})]})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Help & Guide"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:y.jsxs("button",{onClick:()=>{w(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(hv,{className:"text-purple-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Onboarding Guide"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"View the welcome tutorial again"})]})]}),y.jsx(oo,{className:"text-gray-400",size:18})]})})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[y.jsxs("button",{onClick:ce,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(Uz,{className:"text-blue-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",P]})]})]}),y.jsx(oo,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:ee,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(Uce,{className:"text-blue-500",size:20}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),y.jsx(oo,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:he,disabled:H,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[H?y.jsx($z,{className:"text-blue-500 animate-spin",size:20}):y.jsx(tce,{className:"text-blue-500",size:20}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:H?"Preparing CSV":"Export Transactions (CSV)"})]}),y.jsx(oo,{className:"text-gray-400",size:18})]}),y.jsx("input",{type:"file",ref:e,onChange:Se,accept:".json",className:"hidden"})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[y.jsxs("button",{onClick:Pe,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(Xh,{className:"text-orange-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Start Fresh (This Month)"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Clear all allocations and data for the current month only"})]})]}),y.jsx(oo,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:De,disabled:J,className:"w-full p-4 flex items-center justify-between hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800 disabled:opacity-60 disabled:cursor-not-allowed",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[J?y.jsx($z,{className:"text-yellow-500 animate-spin",size:20}):y.jsx(hv,{className:"text-yellow-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:J?"Cleaning Data...":"Purge Orphaned Data"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Remove allocations and transactions pointing to deleted envelopes"})]})]}),y.jsx(oo,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:re,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(w1,{className:"text-red-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete everything"})]})]}),y.jsx(oo,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:()=>j(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx($h,{className:"text-red-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),y.jsx(oo,{className:"text-gray-400",size:18})]})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider px-4 mb-2",children:"Siri Integration"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-200 dark:border-zinc-800",children:y.jsxs("div",{className:"p-4",children:[y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-3",children:"Use this token in your Siri Shortcut to add transactions by voice."}),c?.siriToken?y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("code",{className:"flex-1 bg-gray-100 dark:bg-zinc-800 px-3 py-2 rounded-lg text-sm font-mono text-gray-900 dark:text-white select-all",children:c.siriToken}),y.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c.siriToken),le("success","Token copied to clipboard")},className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",title:"Copy token",children:y.jsx("div",{className:"flex items-center gap-1",children:y.jsx("span",{className:"text-sm font-medium",children:"Copy"})})}),y.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to regenerate your Siri token? You will need to update your Shortcut.")){const Ie=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:Ie}),le("success","Siri token regenerated")}},className:"p-2 bg-gray-200 dark:bg-zinc-700 text-gray-700 dark:text-zinc-300 rounded-lg hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",title:"Regenerate token",children:y.jsx(Xh,{size:20})})]}):y.jsx("button",{onClick:async()=>{const Ie=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:Ie}),le("success","Siri token generated")},className:"w-full py-2 px-4 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors",children:"Generate Siri Token"})]})})]}),y.jsxs("div",{className:"text-center py-4",children:[y.jsxs("p",{className:"text-xs text-gray-400 dark:text-zinc-500",children:["Version ","1.9.3"," (PWA)"]}),"        "]}),q&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[q.success?y.jsx(x1,{className:"text-green-500",size:24}):y.jsx($h,{className:"text-red-500",size:24}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:q.success?"Success":"Error"})]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:q.message}),y.jsxs("div",{className:"flex gap-2",children:[q.onRetry&&y.jsx("button",{onClick:()=>{W(null),q.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),y.jsx("button",{onClick:()=>W(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),y.jsx(Q_e,{isVisible:Y,onClose:()=>U(!1),onConfirm:ze,currentMonth:m,incomeCount:(h[m]||[]).length,totalIncome:(h[m]||[]).reduce((Ie,Oe)=>Ie+Oe.amount,0),allocationCount:(g[m]||[]).filter(Ie=>n.some(Oe=>Oe.id===Ie.envelopeId)).length,totalAllocated:(g[m]||[]).filter(Ie=>n.some(Oe=>Oe.id===Ie.envelopeId)).reduce((Ie,Oe)=>Ie+Oe.budgetedAmount,0),transactionCount:r.filter(Ie=>Ie.month===m).length,totalTransactionAmount:r.filter(Ie=>Ie.month===m).reduce((Ie,Oe)=>Ie+Oe.amount,0)}),B&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx($h,{className:"text-red-500",size:24}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),y.jsx("input",{type:"password",value:z,onChange:Ie=>L(Ie.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>{j(!1),L("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:oe,disabled:D||!z.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:D?"Deleting...":"Delete Account"})]})]})})]})]})},J_e=()=>{const t=ns(),{categories:e,addCategory:n,updateCategory:r,deleteCategory:i,reorderCategories:a}=sn(),{showToast:s}=pf(),[o,c]=A.useState(!1),[u,f]=A.useState(""),[h,g]=A.useState(null),[m,b]=A.useState(""),[x,w]=A.useState(e),S=A.useRef(e),[T,I]=A.useState(!1),[N,O]=A.useState(null),P=A.useRef(!1),k=A.useRef(null),D=A.useRef({}),R=A.useRef({}),z=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{T||(w(e),S.current=e)},[e,T]),A.useEffect(()=>(T?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[T]);const L=A.useCallback((ne,Y)=>{console.log(" Long press triggered for category:",Y);const U=R.current[Y];if(U){console.log(" Moveable instance found, starting drag"),P.current=!0;const Q=ne.nativeEvent||ne;U.dragStart(Q)}else console.log(" No moveable instance found for:",Y)},[]),B=A.useCallback(ne=>Y=>{Y?D.current[ne]=Y:delete D.current[ne]},[]),j=async ne=>{if(ne.preventDefault(),!!u.trim())try{await n({name:u.trim(),orderIndex:e.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),f(""),c(!1),s("Category added","success")}catch(Y){console.error(Y),s("Failed to add category","error")}},H=async ne=>{if(!m.trim())return;const Y=e.find(U=>U.id===ne);if(Y)try{await r({...Y,name:m.trim()}),g(null),s("Category updated","success")}catch(U){console.error(U),s("Failed to update category","error")}},X=async ne=>{if(confirm("Are you sure? Envelopes in this category will become Uncategorized."))try{await i(ne),s("Category deleted","success")}catch(Y){console.error(Y),s("Failed to delete category","error")}},q=8,W=(ne,Y,U)=>Math.max(Y,Math.min(U,ne)),J=A.useCallback(async ne=>{if(!ne.length)return;const Y=ne.map(U=>U.id);try{await a(Y)}catch(U){console.error("Failed to persist category order:",U),s("Failed to save category order","error")}},[a,s]);return A.useEffect(()=>{const ne=()=>{Object.values(R.current).forEach(Q=>Q?.destroy()),R.current={}};if(!x.length)return;const Y=()=>{x.forEach(Q=>{const K=D.current[Q.id];if(!K||!k.current)return;const Z=new bY(k.current,{target:K,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[],edge:!1,origin:!1});Z.on("dragStart",de=>{if(console.log(" Moveable dragStart event",{isManualDrag:P.current,categoryId:Q.id}),!P.current){console.log(" Stopping drag - not manual"),de.stop();return}const ce=de.inputEvent.target;if(ce.tagName==="INPUT"||ce.tagName==="BUTTON"||ce.closest("button")){console.log(" Stopping drag - clicked on button/input"),de.stop();return}console.log(" Drag starting for category:",Q.id);const he=S.current.findIndex(re=>re.id===Q.id),ee=de.target,Se=ee.getBoundingClientRect();O(Q.id),z.current={activeId:Q.id,startIndex:he,currentIndex:he,itemHeight:Se.height+q},ee.style.transition="none",ee.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",ee.style.zIndex="20",I(!0)});let le=null;Z.on("drag",de=>{const ce=de.target;le!==null&&cancelAnimationFrame(le),le=requestAnimationFrame(()=>{const he=z.current;if(he.activeId!==Q.id)return;const ee=de.beforeTranslate[1];ce.style.transform=`translateY(${ee}px)`,ce.style.transition="none";const{itemHeight:Se,startIndex:re}=he,oe=Math.round(ee/Se),De=W(re+oe,0,S.current.length-1);De!==he.currentIndex&&(he.currentIndex=De,S.current.forEach((Pe,ze)=>{if(Pe.id===Q.id)return;const je=D.current[Pe.id];if(!je)return;let Ue=0;re<De&&ze>re&&ze<=De?Ue=-Se:re>De&&ze>=De&&ze<re&&(Ue=Se),je.style.transform=Ue?`translateY(${Ue}px)`:"",je.style.transition="transform 0.2s ease"})),le=null})}),Z.on("dragEnd",de=>{le!==null&&(cancelAnimationFrame(le),le=null);const ce=de.target,{startIndex:he,currentIndex:ee}=z.current;if(ce.style.transform="",ce.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",ce.style.boxShadow="",S.current.forEach(Se=>{const re=D.current[Se.id];re&&(re.style.transform="",re.style.transition="")}),he!==ee){const Se=[...S.current],[re]=Se.splice(he,1);Se.splice(ee,0,re),S.current=Se,w(Se),J(Se)}setTimeout(()=>{ce.style.zIndex="",O(null),I(!1),P.current=!1},300)}),R.current[Q.id]=Z})},U=window.setTimeout(Y,80);return()=>{clearTimeout(U),ne()}},[x,J]),y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[y.jsx("style",{children:`
        .moveable-control-box,
        .moveable-line,
        .moveable-direction {
          display: none !important;
        }
      `}),y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[y.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:y.jsx(Al,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Manage Categories"})]}),y.jsxs("div",{className:"p-4 max-w-2xl mx-auto space-y-4",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:o?y.jsxs("form",{onSubmit:j,className:"flex gap-2",children:[y.jsx("input",{type:"text",value:u,onChange:ne=>f(ne.target.value),placeholder:"Category Name",className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),y.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium",children:"Save"}),y.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-500 px-2",children:"Cancel"})]}):y.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 font-medium py-2",children:[y.jsx(m0,{size:20}),"Add Category"]})}),y.jsxs("div",{ref:k,className:"space-y-2",style:{touchAction:T?"none":"auto"},children:[x.map(ne=>{const Y=CN(Q=>{L(Q,ne.id)},{threshold:500,cancelOnMovement:25,detect:Kc.Touch}),U=N===ne.id;return y.jsx("div",{...Y(),ref:B(ne.id),style:{cursor:U?"grabbing":"pointer"},className:"bg-white dark:bg-zinc-900 rounded-xl p-4 border border-gray-100 dark:border-zinc-800 flex items-center justify-between group select-none",children:h===ne.id?y.jsxs("div",{className:"flex-1 flex gap-2",children:[y.jsx("input",{type:"text",value:m,onChange:Q=>b(Q.target.value),className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),y.jsx("button",{onClick:()=>H(ne.id),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm",children:"Save"}),y.jsx("button",{onClick:()=>g(null),className:"text-gray-500 px-2 text-sm",children:"Cancel"})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"text-gray-400 dark:text-zinc-600 cursor-grab active:cursor-grabbing",onMouseDown:Q=>L(Q,ne.id),children:y.jsx(fv,{size:20})}),y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:ne.name})]}),y.jsxs("div",{className:"flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[y.jsx("button",{onClick:()=>{g(ne.id),b(ne.name)},className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400",children:y.jsx(xce,{size:18})}),y.jsx("button",{onClick:()=>X(ne.id),className:"p-2 text-gray-500 hover:text-red-600 dark:hover:text-red-400",children:y.jsx(w1,{size:18})})]})]})},ne.id)}),x.length===0&&!o&&y.jsx("div",{className:"text-center text-gray-500 dark:text-zinc-500 py-8",children:"No categories yet. Add one to get started."})]})]})]})},eSe=()=>{const{addEnvelope:t,setEnvelopeAllocation:e,currentMonth:n,categories:r,fetchCategories:i}=sn(),{showToast:a}=pf(),s=ns(),[o]=Q$();xd.useEffect(()=>{r.length===0&&i()},[r.length,i]);const[c,u]=A.useState(""),[f,h]=A.useState(o.get("type")==="piggybank"),[g,m]=A.useState(o.get("categoryId")||""),[b,x]=A.useState(""),[w,S]=A.useState(""),[T,I]=A.useState("#3B82F6"),[N,O]=A.useState(!1),P=async k=>{if(k.preventDefault(),!c.trim()||N)return;O(!0);const D=sn.getState().envelopes,z=(D.length>0?Math.max(...D.map(H=>H.orderIndex??0)):-1)+1,L=f?new Date(`${n}-01T00:00:00`):new Date,B={name:c,currentBalance:0,lastUpdated:new Date().toISOString(),createdAt:L.toISOString(),isActive:!0,orderIndex:z,categoryId:g||void 0};if(f){B.isPiggybank=!0;const H={monthlyContribution:parseFloat(w||"0"),color:T,icon:"piggy-bank"};b&&parseFloat(b)>0&&(H.targetAmount=parseFloat(b)),B.piggybankConfig=H}t(B).then(H=>{if(H){const X=f?parseFloat(w||"0"):0;e(H,X).catch(q=>console.error("Failed to create allocation:",q)),setTimeout(()=>{s("/")},50)}}).catch(H=>{console.error("Failed to create envelope:",H),a(H.message||"Failed to create envelope","error"),O(!1)})};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[y.jsx("button",{onClick:()=>s("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:y.jsx(Al,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f?"New Piggybank":"New Envelope"})]}),y.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[y.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:y.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:f?y.jsx(g0,{size:40}):y.jsx(rce,{size:40})})}),y.jsxs("form",{onSubmit:P,className:"p-6 space-y-6 pb-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Type"}),y.jsxs("div",{className:"flex bg-gray-100 dark:bg-zinc-800 p-1 rounded-xl",children:[y.jsx("button",{type:"button",onClick:()=>h(!1),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300":"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm"}`,children:"Spending"}),y.jsx("button",{type:"button",onClick:()=>h(!0),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300"}`,children:"Piggybank"})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Category"}),y.jsxs("select",{id:"category",value:g,onChange:k=>m(k.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all appearance-none",children:[y.jsx("option",{value:"",children:"Uncategorized"}),r.map(k=>y.jsx("option",{value:k.id,children:k.name},k.id))]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:f?"Piggybank Name":"Envelope Name"}),y.jsx("input",{type:"text",id:"name",value:c,onChange:k=>u(k.target.value),placeholder:f?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),f&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"monthly-contribution",value:w,onChange:k=>S(k.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:f})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"target-amount",value:b,onChange:k=>x(k.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(k=>y.jsx("button",{type:"button",onClick:()=>I(k.value),className:`w-full aspect-square rounded-lg transition-all ${T===k.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:k.value},title:k.label},k.value))})]})]}),y.jsxs("div",{className:"pt-4 flex gap-3",children:[y.jsx("button",{type:"button",onClick:()=>s("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:!c.trim()||f&&!w||N,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${c.trim()&&(!f||w)&&!N?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:N?"Creating...":f?"Create Piggybank":"Create Envelope"})]})]})]})})]})};const tSe="type.googleapis.com/google.protobuf.Int64Value",nSe="type.googleapis.com/google.protobuf.UInt64Value";function LY(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function uw(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>uw(e));if(typeof t=="function"||typeof t=="object")return LY(t,e=>uw(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ep(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case tSe:case nSe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ep(e)):typeof t=="function"||typeof t=="object"?LY(t,e=>Ep(e)):t}const DN="functions";const F6={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fi extends No{constructor(e,n,r){super(`${DN}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Fi.prototype)}}function rSe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function dw(t,e){let n=rSe(t),r=n,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!F6[s])return new Fi("internal","internal");n=F6[s],r=s}const o=a.message;typeof o=="string"&&(r=o),i=a.details,i!==void 0&&(i=Ep(i))}}catch{}return n==="ok"?null:new Fi(n,r,i)}class iSe{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ua(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}const jP="us-central1",aSe=/^data: (.*?)(?:\n|$)/;function sSe(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Fi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class oSe{constructor(e,n,r,i,a=jP,s=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new iSe(e,n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=jP}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function lSe(t,e,n){const r=yu(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(L2(t.emulatorOrigin+"/backends"),F8("Functions",!0))}function cSe(t,e,n){const r=i=>dSe(t,e,i,{});return r.stream=(i,a)=>hSe(t,e,i,a),r}function VY(t){return t.emulatorOrigin&&yu(t.emulatorOrigin)?"include":void 0}async function uSe(t,e,n,r,i){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:VY(i)})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function BY(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function dSe(t,e,n,r){const i=t._url(e);return fSe(t,i,n,r)}async function fSe(t,e,n,r){n=uw(n);const i={data:n},a=await BY(t,r),s=r.timeout||7e4,o=sSe(s),c=await Promise.race([uSe(e,i,a,t.fetchImpl,t),o.promise,t.cancelAllRequests]);if(o.cancel(),!c)throw new Fi("cancelled","Firebase Functions instance was deleted.");const u=dw(c.status,c.json);if(u)throw u;if(!c.json)throw new Fi("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new Fi("internal","Response is missing data field.");return{data:Ep(f)}}function hSe(t,e,n,r){const i=t._url(e);return pSe(t,i,n,r||{})}async function pSe(t,e,n,r){n=uw(n);const i={data:n},a=await BY(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let s;try{s=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r?.signal,credentials:VY(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const b=new Fi("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const m=dw(0,null);return{data:Promise.reject(m),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(m)}}}}}}let o,c;const u=new Promise((g,m)=>{o=g,c=m});r?.signal?.addEventListener("abort",()=>{const g=new Fi("cancelled","Request was cancelled.");c(g)});const f=s.body.getReader(),h=gSe(f,o,c,r?.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:m,done:b}=await g.read();return{value:m,done:b}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:u}}function gSe(t,e,n,r){const i=(s,o)=>{const c=s.match(aSe);if(!c)return;const u=c[1];try{const f=JSON.parse(u);if("result"in f){e(Ep(f.result));return}if("message"in f){o.enqueue(Ep(f.message));return}if("error"in f){const h=dw(0,f);o.error(h),n(h);return}}catch(f){if(f instanceof Fi){o.error(f),n(f);return}}},a=new TextDecoder;return new ReadableStream({start(s){let o="";return c();async function c(){if(r?.aborted){const u=new Fi("cancelled","Request was cancelled");return s.error(u),n(u),Promise.resolve()}try{const{value:u,done:f}=await t.read();if(f){o.trim()&&i(o.trim(),s),s.close();return}if(r?.aborted){const g=new Fi("cancelled","Request was cancelled");s.error(g),n(g),await t.cancel();return}o+=a.decode(u,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const g of h)g.trim()&&i(g.trim(),s);return c()}catch(u){const f=u instanceof Fi?u:dw(0,null);s.error(f),n(f)}}},cancel(){return t.cancel()}})}const U6="@firebase/functions",$6="0.13.1";const mSe="auth-internal",vSe="app-check-internal",ySe="messaging-internal";function bSe(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(mSe),s=n.getProvider(ySe),o=n.getProvider(vSe);return new oSe(i,a,s,o,r)};Sl(new Ao(DN,e,"PUBLIC").setMultipleInstances(!0)),As(U6,$6,t),As(U6,$6,"esm2020")}function xSe(t=B2(),e=jP){const r=Mp($t(t),DN).getImmediate({identifier:e}),i=$ne("functions");return i&&wSe(r,...i),r}function wSe(t,e,n){lSe($t(t),e,n)}function _Se(t,e,n){return cSe($t(t),e)}bSe();function FY(t,e){const n={amount:null,merchant:null,envelope:null,envelopeId:null,description:null,paymentMethodName:null,type:"Expense",confidence:0};if(!t||t.trim().length===0)return n;const r=t.trim();let i=r,a=0;const s=r.match(/\b(?:with|using)\s+(.+)$/i);if(s&&s[1]){const m=s[1].trim();m.length>0&&m.length<60&&(n.paymentMethodName=m,i=i.replace(s[0]," ").trim(),a++)}/\b(income|earned|received|got paid|paycheck|salary|deposit|refund)\b/i.test(r)&&(n.type="Income",a++);const c=[/\$\s?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/,/(\d{1,}(?:,\d{3})*\.\d{1,2})\s*(?:dollars?)?/,/\b(\d{1,}(?:,\d{3})*)\s*(?:dollars?|bucks?)\b/i,/(?:for|of|spent|paid|cost|was)\s+\$?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/i];for(const m of c){const b=r.match(m);if(b){const x=b[1].replace(/,/g,""),w=parseFloat(x);if(!isNaN(w)&&w>0){n.amount=w,i=i.replace(b[0]," ").trim(),a++;break}}}if(n.amount===null){const m=r.match(/\b(\d{1,}(?:\.\d{1,2})?)\b/);if(m){const b=parseFloat(m[1]);!isNaN(b)&&b>0&&b<1e6&&(n.amount=b,i=i.replace(m[0]," ").trim(),a++)}}const u=e.filter(m=>m.isActive!==!1);let f=null;for(const m of u){const b=m.name.toLowerCase(),x=r.toLowerCase();if(x.includes(b)){const T=b.length/x.length;(!f||T>f.score)&&(f={envelope:m,score:Math.max(T,.8)});continue}const w=x.split(/\s+/),S=b.split(/\s+/);for(const T of S)if(!(T.length<3)){for(const I of w)if(!(I.length<3)&&(I.startsWith(T.slice(0,-1))||T.startsWith(I.slice(0,-1)))){const N=Math.min(I.length,T.length)/Math.max(I.length,T.length);N>=.6&&(!f||N>f.score)&&(f={envelope:m,score:N})}}}if(f){n.envelope=f.envelope.name,n.envelopeId=f.envelope.id,a++;const m=new RegExp(f.envelope.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");i=i.replace(m," ").trim()}const h=/\b(at|for|from|to|the|a|an|on|in|my|spent|paid|bought|got|transaction|purchase|payment|income|earned|received)\b/gi;let g=i.replace(h," ").replace(/\s+/g," ").trim();return g=g.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9]+$/g,"").trim(),g.length>0&&g.length<100&&(n.merchant=g,a++),n.description=r,n.confidence=0,n.amount!==null&&(n.confidence+=.35),n.envelopeId!==null&&(n.confidence+=.3),n.merchant!==null&&(n.confidence+=.2),n.paymentMethodName!==null&&(n.confidence+=.1),a>0&&(n.confidence+=.05),n.confidence=Math.min(n.confidence,1),n}async function SSe(t,e){const n=e.filter(i=>i.isActive!==!1),r=n.map(i=>i.name);try{console.log(" Siri: Calling Cloud Function to parse:",t);const i=xSe(),o=(await _Se(i,"parseTransaction")({text:t,userEnvelopes:r})).data;console.log(" Siri: Cloud Function response:",o);let c=null,u=o.envelope;if(o.envelope){const f=n.find(h=>h.name.toLowerCase()===o.envelope.toLowerCase());f&&(c=f.id,u=f.name)}return{amount:o.amount,merchant:o.merchant,envelope:u,envelopeId:c,description:o.description||t,paymentMethodName:o.paymentMethodName||null,type:o.type||"Expense",confidence:.9}}catch(i){return console.warn(" Siri: Cloud Function failed, falling back to regex parser:",i.message),FY(t,e)}}function ESe(t,e){return console.log(" Siri: Parsing locally with regex:",t),FY(t,e)}async function UY(t,e){return typeof navigator<"u"&&!navigator.onLine?(console.log(" Siri: Offline  using local parser"),ESe(t,e)):SSe(t,e)}function TSe(){const[t,e]=Q$(),{envelopes:n}=sn(),[r,i]=A.useState(null),[a,s]=A.useState(!1),[o,c]=A.useState(null);A.useEffect(()=>{const f=t.get("query");if(!f||f.trim().length===0){c(null);return}c(f),s(!0),UY(f,n).then(g=>{console.log(" Siri: Parsed result:",g),i(g)}).catch(g=>{console.error(" Siri: Parse failed:",g),i(null)}).finally(()=>{s(!1)});const h=new URLSearchParams(t);h.delete("query"),e(h,{replace:!0})},[t,n]);const u=A.useCallback(()=>{i(null),c(null)},[]);return{parsedData:r,isParsing:a,siriQuery:o,clearParsedData:u}}const $Y=({onClose:t,onSaved:e})=>{const n=ns(),{envelopes:r,addTransaction:i,currentMonth:a,appSettings:s}=sn(),{parsedData:o,isParsing:c,siriQuery:u,clearParsedData:f}=TSe(),h=()=>{const ce=sessionStorage.getItem("siriParsedData"),he=sessionStorage.getItem("siriQuery");if(ce&&he)try{const ee=JSON.parse(ce);if(console.log(" Siri: Loaded stored data from sessionStorage:",ee),ee.amount!==null&&m(ee.amount.toFixed(2)),ee.merchant&&x(ee.merchant),ee.description&&S(ee.description),ee.type&&R(ee.type==="Income"?"income":"expense"),ee.envelopeId&&W(ee.envelopeId),ee.paymentMethodName&&s?.paymentSources?.length){const Se=ee.paymentMethodName.toLowerCase(),re=s.paymentSources.find(oe=>{const De=oe.name.toLowerCase();return De===Se||De.includes(Se)||Se.includes(De)});re&&(j(re),X(!1))}I(!0),O(he),console.log(" Siri: Pre-filled form from sessionStorage"),sessionStorage.removeItem("siriParsedData"),sessionStorage.removeItem("siriQuery")}catch(ee){console.error(" Siri: Failed to parse stored data:",ee)}};A.useEffect(()=>{!o&&!u&&h()},[o,u,s?.paymentSources]),A.useEffect(()=>{const ce=()=>{console.log(" Siri: Received siri-query-ready event"),h()};return window.addEventListener("siri-query-ready",ce),()=>window.removeEventListener("siri-query-ready",ce)},[s?.paymentSources]);const[g,m]=A.useState(""),[b,x]=A.useState(""),[w,S]=A.useState(""),[T,I]=A.useState(!1),[N,O]=A.useState(null),[P,k]=A.useState(()=>{const ce=new Date;return new Date(ce.getTime()-ce.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[D,R]=A.useState("expense"),[z,L]=A.useState({}),[B,j]=A.useState(null),[H,X]=A.useState(!1),[q,W]=A.useState(null);A.useEffect(()=>{if(!(!o||T)){if(o.amount!==null&&m(o.amount.toFixed(2)),o.merchant&&x(o.merchant),o.description&&S(o.description),o.type&&R(o.type==="Income"?"income":"expense"),o.envelopeId&&W(o.envelopeId),o.paymentMethodName&&s?.paymentSources?.length){const ce=o.paymentMethodName.toLowerCase(),he=s.paymentSources.find(ee=>{const Se=ee.name.toLowerCase();return Se===ce||Se.includes(ce)||ce.includes(Se)});he&&(j(he),X(!1))}I(!0),console.log(" Siri: Pre-filled form with parsed data:",o)}},[o,T,s?.paymentSources]);const J=()=>{if(t){t();return}n("/")},ne=ce=>{j(ce),B&&X(!0)},Y=Object.keys(z).length>0,U=Object.values(z).reduce((ce,he)=>ce+(he||0),0),Q=Math.abs(U-parseFloat(g||"0"))<.01,K=g&&parseFloat(g)>0&&Y&&Q,Z=async ce=>{if(ce.preventDefault(),!K)return;const[he,ee,Se]=P.split("-").map(Number),re=new Date(he,ee-1,Se,12,0,0);console.log(" Selected date:",P),console.log(" Parsed date:",re.toISOString());try{const[oe,De]=P.split("-").map(Number),Pe=`${oe}-${De.toString().padStart(2,"0")}`;if(Pe!==a){const Ue=`This transaction date (${Pe}) does not match the current budget month (${a}). Are you sure you want to save it?`;if(!window.confirm(Ue))return}const ze=Object.entries(z).filter(([Ue,Ie])=>Ie>0),je=ze.length>1?crypto.randomUUID():void 0;Promise.all(ze.map(([Ue,Ie])=>i({amount:Ie,description:w,merchant:b||void 0,date:re.toISOString(),envelopeId:Ue,type:D==="income"?"Income":"Expense",reconciled:!1,paymentMethod:B||void 0,splitGroupId:je}).catch(Oe=>console.error("Failed to create transaction:",Oe)))).catch(Ue=>console.error("Failed to create transactions:",Ue)),e&&e(),t?t():n("/")}catch(oe){console.error("Error saving transaction:",oe),alert("Failed to save transaction: "+(oe instanceof Error?oe.message:"Unknown error"))}},le=[...r].filter(ce=>ce.isActive!==!1).sort((ce,he)=>{const ee=ce.orderIndex??0,Se=he.orderIndex??0;return ee!==Se?ee-Se:ce.name.localeCompare(he.name)}),de=D==="income"?"text-green-500":"text-red-500";return y.jsxs("div",{className:"h-screen overflow-y-auto bg-gray-50 dark:bg-black overscroll-contain",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-20 flex items-center justify-between",children:[y.jsx("button",{onClick:J,className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),y.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),y.jsx("button",{onClick:Z,disabled:!K,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),c&&y.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl flex items-center gap-3",children:[y.jsx(Gz,{size:18,className:"text-purple-500 animate-pulse"}),y.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Parsing voice input..."})]}),T&&!c&&(u||N)&&y.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx(Gz,{size:14,className:"text-purple-500"}),y.jsx("span",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300",children:"Siri Shortcut"}),o&&y.jsxs("span",{className:"ml-auto text-[10px] text-purple-500 dark:text-purple-400",children:[Math.round(o.confidence*100),"% confidence"]})]}),y.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 italic truncate",children:['"',u||N,'"']}),y.jsx("button",{type:"button",onClick:()=>{f(),I(!1),O(null)},className:"text-[10px] text-purple-500 dark:text-purple-400 underline mt-1",children:"Clear pre-filled data"})]}),y.jsx("div",{className:"p-4 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:y.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:y.jsxs("div",{className:"flex",children:[y.jsx("button",{type:"button",onClick:()=>R("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${D==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),y.jsx("button",{type:"button",onClick:()=>R("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${D==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${de}`,children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",value:g,onChange:ce=>{const he=ce.target.value.replace(/\D/g,"");if(!he){m("");return}const Se=(parseInt(he,10)/100).toFixed(2);m(Se)},onKeyDown:ce=>{(ce.key==="e"||ce.key==="E"||ce.key==="+"||ce.key==="-")&&ce.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${de} placeholder-gray-700`})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),y.jsx("input",{type:"text",value:b,onChange:ce=>x(ce.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsx(RY,{selectedCard:B,onCardSelect:ne,isUserSelected:H}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),y.jsx("input",{type:"text",value:w,onChange:ce=>S(ce.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[ce,he]=P.split("-").map(Number);return`${ce}-${he.toString().padStart(2,"0")}`!==a?y.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[y.jsx($h,{size:14}),y.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),y.jsx("input",{type:"date",value:P,onChange:ce=>k(ce.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:y.jsx(MY,{envelopes:le,transactionAmount:parseFloat(g)||0,onSplitChange:L,initialSelectedEnvelopeId:q})})]})})]})},ASe=()=>{const t=ns(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:s,appSettings:o}=sn(),{showToast:c}=pf(),[u,f]=A.useState(!1),[h,g]=A.useState(""),[m,b]=A.useState("all"),[x,w]=A.useState("All"),[S,T]=A.useState(!1),[I,N]=A.useState("all"),[O,P]=A.useState(!1),[k,D]=A.useState("all"),[R,z]=A.useState(!1),[L,B]=A.useState(()=>{const U=new Date;return U.setMonth(U.getMonth()-1),U.toISOString().split("T")[0]}),[j,H]=A.useState(()=>new Date().toISOString().split("T")[0]),[X,q]=A.useState(null),W=A.useMemo(()=>{console.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:O,currentMonth:s,transactionMonths:e.map(K=>({id:K.id,month:K.month,date:K.date,description:K.description}))});let U=e;return O||(U=e.filter(K=>K.month===s||!K.month),console.log(" After month filter:",{remaining:U.length,currentMonth:s,filteredTransactions:U.map(K=>({id:K.id,description:K.description,month:K.month,matchesCurrentMonth:K.month===s}))})),U.map(K=>{if(!K)return null;let Z=K.date;if(typeof K.date=="number"){const de=(K.date+978307200)*1e3;Z=new Date(de).toISOString()}else if(!K.date||typeof K.date!="string")return null;return{...K,date:Z}}).filter(Boolean).filter(K=>{if(K.description==="Budgeted"||K.description==="Piggybank Contribution")return!1;if(h){const le=h.toLowerCase(),de=n.find(ee=>ee.id===K.envelopeId)?.name.toLowerCase()||"",ce=K.amount.toFixed(2);if(!(K.description.toLowerCase().includes(le)||de.includes(le)||ce.includes(le)))return!1}if(m!=="all"&&K.envelopeId!==m||x!=="All"&&K.type!==x||k!=="all"&&(!K.paymentMethod||K.paymentMethod.id!==k)||!K.date||typeof K.date!="string")return!1;const Z=K.date.split("T")[0];return!(R&&(Z<L||Z>j)||I!=="all"&&new Date(Z).getMonth()!==parseInt(I)||S&&!K.reconciled)}).sort((K,Z)=>new Date(Z.date).getTime()-new Date(K.date).getTime())},[e,n,h,m,x,k,L,j,S,O,s,R]);console.log(" Final filtered transactions:",{count:W.length,transactions:W.map(U=>({id:U.id,description:U.description,amount:U.amount,date:U.date,month:U.month,type:U.type}))});const J=A.useMemo(()=>{const U=[],Q=new Set;for(const K of W)if(K.splitGroupId&&!Q.has(K.splitGroupId)){Q.add(K.splitGroupId);const Z=W.filter(ce=>ce.splitGroupId===K.splitGroupId),le=Z.reduce((ce,he)=>ce+he.amount,0),de=Z.map(ce=>n.find(he=>he.id===ce.envelopeId)?.name||"Unknown").join(", ");U.push({key:`split-${K.splitGroupId}`,transaction:K,totalAmount:le,envelopeNames:de,splitTransactions:Z,isSplitGroup:!0})}else{if(K.splitGroupId&&Q.has(K.splitGroupId))continue;{const Z=n.find(le=>le.id===K.envelopeId)?.name||"Unknown Envelope";U.push({key:K.id,transaction:K,totalAmount:K.amount,envelopeNames:Z,splitTransactions:[K],isSplitGroup:!1})}}return U},[W,n]),ne=X?n.find(U=>U.id===X.envelopeId):null,Y=U=>{const Q={...U,reconciled:!U.reconciled};r(Q)};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))] transition-colors duration-200",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:y.jsx(Al,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),y.jsx("button",{onClick:()=>f(!u),className:`p-2 rounded-full transition-colors ${u?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:y.jsx(ace,{size:20,className:u?"fill-current":""})})]}),y.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[y.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",s]}),y.jsx("button",{onClick:()=>P(!O),className:`text-sm px-3 py-1 rounded-md ${O?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"}`,children:O?"Current Month Only":"All Time"})]}),y.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:y.jsxs("div",{className:"relative",children:[y.jsx(Cce,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),y.jsx("input",{type:"text",placeholder:"Search transactions...",value:h,onChange:U=>g(U.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),h&&y.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:y.jsx(g_,{size:16})})]})}),y.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${u?"max-h-[600px] opacity-100":"max-h-0 opacity-0"}`,children:y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),y.jsxs("select",{value:k,onChange:U=>D(U.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Payment Methods"}),o?.paymentSources?.map(U=>y.jsx("option",{value:U.id,children:U.name},U.id))]})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),y.jsxs("select",{value:m,onChange:U=>b(U.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((U,Q)=>U.name.localeCompare(Q.name)).map(U=>y.jsx("option",{value:U.id,children:U.name},U.id))]})]}),y.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(U=>y.jsx("button",{onClick:()=>w(U),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${x===U?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:U},U))}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),y.jsxs("select",{value:I,onChange:U=>N(U.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(U,Q)=>Q).map(U=>y.jsx("option",{value:U,children:new Date(2022,U).toLocaleString("default",{month:"long"})},U))]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Date Range"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("label",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Enable"}),y.jsx("button",{onClick:()=>z(!R),className:`w-9 h-5 rounded-full transition-colors relative ${R?"bg-blue-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${R?"translate-x-4":"translate-x-0"}`})})]})]}),y.jsxs("div",{className:`grid grid-cols-2 gap-4 transition-opacity ${R?"opacity-100":"opacity-50 pointer-events-none"}`,children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"From"}),y.jsx("div",{className:"relative",children:y.jsx("input",{type:"date",value:L,onChange:U=>B(U.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"To"}),y.jsx("div",{className:"relative",children:y.jsx("input",{type:"date",value:j,onChange:U=>H(U.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),y.jsx("button",{onClick:()=>T(!S),className:`w-11 h-6 rounded-full transition-colors relative ${S?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${S?"translate-x-5":"translate-x-0"}`})})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),y.jsx("button",{onClick:()=>P(!O),className:`w-11 h-6 rounded-full transition-colors relative ${O?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${O?"translate-x-5":"translate-x-0"}`})})]})]})}),y.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:J.length===0?y.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):y.jsx(wa,{initial:!1,mode:"popLayout",children:J.map(U=>{const Q=U.transaction;return y.jsx(Gn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(lS,{disabled:Q.isAutomatic,onDelete:()=>{const K=U.splitTransactions.map(Z=>({...Z}));for(const Z of U.splitTransactions)Z.id&&i(Z.id);c(U.isSplitGroup?"Split transaction deleted":"Transaction deleted","neutral",()=>{for(const Z of K)a(Z)})},children:y.jsx(zY,{transaction:{...Q,amount:U.totalAmount},envelopeName:U.envelopeNames,onReconcile:()=>{for(const K of U.splitTransactions)Y(K)},onEdit:()=>{if(Q.isAutomatic)return;n.find(Z=>Z.id===Q.envelopeId)?q(Q):alert("Cannot edit: Envelope deleted.")}})})},U.key)})})})}),y.jsx(jY,{isVisible:!!X&&!!ne,onClose:()=>q(null),mode:"edit",currentEnvelope:ne||{},initialTransaction:X,envelopes:n})]})};function qY(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=qY(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Qt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=qY(t))&&(r&&(r+=" "),r+=e);return r}var CSe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function ON(t){if(typeof t!="string")return!1;var e=CSe;return e.includes(t)}var ISe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],kSe=new Set(ISe);function GY(t){return typeof t!="string"?!1:kSe.has(t)}function HY(t){return typeof t=="string"&&t.startsWith("data-")}function Ms(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(GY(n)||HY(n))&&(e[n]=t[n]);return e}function qv(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Ms(e)}return typeof t=="object"&&!Array.isArray(t)?Ms(t):null}function ya(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(GY(n)||HY(n)||ON(n))&&(e[n]=t[n]);return e}var PSe=["children","width","height","viewBox","className","style","title","desc"];function zP(){return zP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zP.apply(null,arguments)}function DSe(t,e){if(t==null)return{};var n,r,i=OSe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function OSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var KY=A.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:s,style:o,title:c,desc:u}=t,f=DSe(t,PSe),h=a||{width:r,height:i,x:0,y:0},g=Qt("recharts-surface",s);return A.createElement("svg",zP({},ya(f),{className:g,width:r,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),A.createElement("title",null,c),A.createElement("desc",null,u),n)}),NSe=["children","className"];function LP(){return LP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LP.apply(null,arguments)}function RSe(t,e){if(t==null)return{};var n,r,i=MSe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function MSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var hi=A.forwardRef((t,e)=>{var{children:n,className:r}=t,i=RSe(t,NSe),a=Qt("recharts-layer",r);return A.createElement("g",LP({className:a},ya(i),{ref:e}),n)}),jSe=A.createContext(null);function fn(t){return function(){return t}}const WY=Math.cos,fw=Math.sin,Vs=Math.sqrt,hw=Math.PI,cS=2*hw,VP=Math.PI,BP=2*VP,cd=1e-6,zSe=BP-cd;function YY(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function LSe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return YY;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class VSe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?YY:LSe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,f=s-e,h=o-n,g=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>cd)if(!(Math.abs(h*c-u*f)>cd)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-s,b=i-o,x=c*c+u*u,w=m*m+b*b,S=Math.sqrt(x),T=Math.sqrt(g),I=a*Math.tan((VP-Math.acos((x+g-w)/(2*S*T)))/2),N=I/T,O=I/S;Math.abs(N-1)>cd&&this._append`L${e+N*f},${n+N*h}`,this._append`A${a},${a},0,0,${+(h*m>f*b)},${this._x1=e+O*c},${this._y1=n+O*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,f=n+c,h=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>cd||Math.abs(this._y1-f)>cd)&&this._append`L${u},${f}`,r&&(g<0&&(g=g%BP+BP),g>zSe?this._append`A${r},${r},0,1,${h},${e-o},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:g>cd&&this._append`A${r},${r},0,${+(g>=VP)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function NN(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new VSe(e)}function RN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function XY(t){this._context=t}XY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function uS(t){return new XY(t)}function QY(t){return t[0]}function ZY(t){return t[1]}function JY(t,e){var n=fn(!0),r=null,i=uS,a=null,s=NN(o);t=typeof t=="function"?t:t===void 0?QY:fn(t),e=typeof e=="function"?e:e===void 0?ZY:fn(e);function o(c){var u,f=(c=RN(c)).length,h,g=!1,m;for(r==null&&(a=i(m=s())),u=0;u<=f;++u)!(u<f&&n(h=c[u],u,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(h,u,c),+e(h,u,c));if(m)return a=null,m+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:fn(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:fn(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:fn(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function px(t,e,n){var r=null,i=fn(!0),a=null,s=uS,o=null,c=NN(u);t=typeof t=="function"?t:t===void 0?QY:fn(+t),e=typeof e=="function"?e:fn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?ZY:fn(+n);function u(h){var g,m,b,x=(h=RN(h)).length,w,S=!1,T,I=new Array(x),N=new Array(x);for(a==null&&(o=s(T=c())),g=0;g<=x;++g){if(!(g<x&&i(w=h[g],g,h))===S)if(S=!S)m=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=g-1;b>=m;--b)o.point(I[b],N[b]);o.lineEnd(),o.areaEnd()}S&&(I[g]=+t(w,g,h),N[g]=+e(w,g,h),o.point(r?+r(w,g,h):I[g],n?+n(w,g,h):N[g]))}if(T)return o=null,T+""||null}function f(){return JY().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:fn(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:fn(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:fn(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:fn(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:fn(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:fn(+h),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:fn(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class eX{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function BSe(t){return new eX(t,!0)}function FSe(t){return new eX(t,!1)}const MN={draw(t,e){const n=Vs(e/hw);t.moveTo(n,0),t.arc(0,0,n,0,cS)}},USe={draw(t,e){const n=Vs(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},tX=Vs(1/3),$Se=tX*2,qSe={draw(t,e){const n=Vs(e/$Se),r=n*tX;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},GSe={draw(t,e){const n=Vs(e),r=-n/2;t.rect(r,r,n,n)}},HSe=.8908130915292852,nX=fw(hw/10)/fw(7*hw/10),KSe=fw(cS/10)*nX,WSe=-WY(cS/10)*nX,YSe={draw(t,e){const n=Vs(e*HSe),r=KSe*n,i=WSe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=cS*a/5,o=WY(s),c=fw(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},mC=Vs(3),XSe={draw(t,e){const n=-Vs(e/(mC*3));t.moveTo(0,n*2),t.lineTo(-mC*n,-n),t.lineTo(mC*n,-n),t.closePath()}},za=-.5,La=Vs(3)/2,FP=1/Vs(12),QSe=(FP/2+1)*3,ZSe={draw(t,e){const n=Vs(e/QSe),r=n/2,i=n*FP,a=r,s=n*FP+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(za*r-La*i,La*r+za*i),t.lineTo(za*a-La*s,La*a+za*s),t.lineTo(za*o-La*c,La*o+za*c),t.lineTo(za*r+La*i,za*i-La*r),t.lineTo(za*a+La*s,za*s-La*a),t.lineTo(za*o+La*c,za*c-La*o),t.closePath()}};function JSe(t,e){let n=null,r=NN(i);t=typeof t=="function"?t:fn(t||MN),e=typeof e=="function"?e:fn(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:fn(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:fn(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function pw(){}function gw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function rX(t){this._context=t}rX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function eEe(t){return new rX(t)}function iX(t){this._context=t}iX.prototype={areaStart:pw,areaEnd:pw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:gw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tEe(t){return new iX(t)}function aX(t){this._context=t}aX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:gw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function nEe(t){return new aX(t)}function sX(t){this._context=t}sX.prototype={areaStart:pw,areaEnd:pw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function rEe(t){return new sX(t)}function q6(t){return t<0?-1:1}function G6(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(q6(a)+q6(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function H6(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function vC(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function mw(t){this._context=t}mw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:vC(this,this._t0,H6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,vC(this,H6(this,n=G6(this,t,e)),n);break;default:vC(this,this._t0,n=G6(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function oX(t){this._context=new lX(t)}(oX.prototype=Object.create(mw.prototype)).point=function(t,e){mw.prototype.point.call(this,e,t)};function lX(t){this._context=t}lX.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function iEe(t){return new mw(t)}function aEe(t){return new oX(t)}function cX(t){this._context=t}cX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=K6(t),i=K6(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function K6(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function sEe(t){return new cX(t)}function dS(t,e){this._context=t,this._t=e}dS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function oEe(t){return new dS(t,.5)}function lEe(t){return new dS(t,0)}function cEe(t){return new dS(t,1)}function ef(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function UP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function uEe(t,e){return t[e]}function dEe(t){const e=[];return e.key=t,e}function fEe(){var t=fn([]),e=UP,n=ef,r=uEe;function i(a){var s=Array.from(t.apply(this,arguments),dEe),o,c=s.length,u=-1,f;for(const h of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,f=RN(e(s));o<c;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:fn(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:fn(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?UP:typeof a=="function"?a:fn(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??ef,i):n},i}function hEe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}ef(t,e)}}function pEe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}ef(t,e)}}function gEe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var f=t[e[o]],h=f[r][1]||0,g=f[r-1][1]||0,m=(h-g)/2,b=0;b<o;++b){var x=t[e[b]],w=x[r][1]||0,S=x[r-1][1]||0;m+=w-S}c+=h,u+=m*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,ef(t,e)}}var yC={},bC={},W6;function mEe(){return W6||(W6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(bC)),bC}var xC={},Y6;function uX(){return Y6||(Y6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(xC)),xC}var wC={},X6;function jN(){return X6||(X6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(wC)),wC}var _C={},SC={},Q6;function vEe(){return Q6||(Q6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(SC)),SC}var Z6;function zN(){return Z6||(Z6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vEe(),n=jN();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,c="",u="",f=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const h=i[o];u?h==="\\"&&o+1<s?(o++,c+=i[o]):h===u?u="":c+=h:f?h==='"'||h==="'"?u=h:h==="]"?(f=!1,a.push(c),c=""):c+=h:h==="["?(f=!0,c&&(a.push(c),c="")):h==="."?c&&(a.push(c),c=""):c+=h,o++}return c&&a.push(c),a}t.toPath=r})(_C)),_C}var J6;function LN(){return J6||(J6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mEe(),n=uX(),r=jN(),i=zN();function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?n.isDeepKey(c)?a(o,i.toPath(c),u):u:f}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const f=o[c];return f===void 0?u:f}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?u:f}}}function s(o,c,u){if(c.length===0)return u;let f=o;for(let h=0;h<c.length;h++){if(f==null||e.isUnsafeProperty(c[h]))return u;f=f[c[h]]}return f===void 0?u:f}t.get=a})(yC)),yC}var EC,eB;function yEe(){return eB||(eB=1,EC=LN().get),EC}var bEe=yEe();const tf=Bl(bEe);var xEe=4;function Xc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xEe,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Fn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,s)=>{var o=n[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+Xc(o)+a:i+a},"")}var Lr=t=>t===0?0:t>0?1:-1,ba=t=>typeof t=="number"&&t!=+t,Nl=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,We=t=>(typeof t=="number"||t instanceof Number)&&!ba(t),Qa=t=>We(t)||typeof t=="string",wEe=0,Gv=t=>{var e=++wEe;return"".concat(t||"").concat(e)},ui=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!We(e)&&typeof e!="string")return r;var a;if(Nl(e)){if(n==null)return r;var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return ba(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},dX=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function br(t,e,n){return We(t)&&We(e)?Xc(t+n*(e-t)):e}function _Ee(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):tf(r,e))===n)}var Br=t=>t===null||typeof t>"u",G0=t=>Br(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function SEe(t){return t!=null}function H0(){}var EEe=["type","size","sizeType"];function $P(){return $P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$P.apply(null,arguments)}function tB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tB(Object(n),!0).forEach(function(r){TEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TEe(t,e,n){return(e=AEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AEe(t){var e=CEe(t,"string");return typeof e=="symbol"?e:e+""}function CEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IEe(t,e){if(t==null)return{};var n,r,i=kEe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var fX={symbolCircle:MN,symbolCross:USe,symbolDiamond:qSe,symbolSquare:GSe,symbolStar:YSe,symbolTriangle:XSe,symbolWye:ZSe},PEe=Math.PI/180,DEe=t=>{var e="symbol".concat(G0(t));return fX[e]||MN},OEe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*PEe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},NEe=(t,e)=>{fX["symbol".concat(G0(t))]=e},hX=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=IEe(t,EEe),a=nB(nB({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var g=DEe(s),m=JSe().type(g).size(OEe(n,r,s)),b=m();if(b!==null)return b},{className:c,cx:u,cy:f}=a,h=ya(a);return We(u)&&We(f)&&We(n)?A.createElement("path",$P({},h,{className:Qt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(f,")"),d:o()})):null};hX.registerSymbol=NEe;var pX=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,REe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{ON(i)&&(r[i]=(a=>n[i](n,a)))}),r},MEe=(t,e,n)=>r=>(t(e,n,r),null),fS=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];ON(i)&&typeof a=="function"&&(r||(r={}),r[i]=MEe(a,e,n))}),r};function rB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jEe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rB(Object(n),!0).forEach(function(r){zEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zEe(t,e,n){return(e=LEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LEe(t){var e=VEe(t,"string");return typeof e=="symbol"?e:e+""}function VEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ei(t,e){var n=jEe({},t),r=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&r[o]!==void 0&&(s[o]=r[o]),s),n);return a}var TC={},AC={},iB;function BEe(){return iB||(iB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const s=n[a],o=r(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}t.uniqBy=e})(AC)),AC}var CC={},aB;function gX(){return aB||(aB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(CC)),CC}var IC={},kC={},PC={},sB;function FEe(){return sB||(sB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(PC)),PC}var oB;function VN(){return oB||(oB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FEe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(kC)),kC}var DC={},lB;function UEe(){return lB||(lB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(DC)),DC}var cB;function $Ee(){return cB||(cB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VN(),n=UEe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(IC)),IC}var OC={},NC={},uB;function qEe(){return uB||(uB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LN();function n(r){return function(i){return e.get(i,r)}}t.property=n})(NC)),NC}var RC={},MC={},jC={},zC={},dB;function mX(){return dB||(dB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(zC)),zC}var LC={},fB;function vX(){return fB||(fB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(LC)),LC}var VC={},hB;function yX(){return hB||(hB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(VC)),VC}var pB;function GEe(){return pB||(pB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mX(),n=vX(),r=yX();function i(f,h,g){return typeof g!="function"?i(f,h,()=>{}):a(f,h,function m(b,x,w,S,T,I){const N=g(b,x,w,S,T,I);return N!==void 0?!!N:a(b,x,m,I)},new Map)}function a(f,h,g,m){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,g,m);case"function":return Object.keys(h).length>0?a(f,{...h},g,m):r.eq(f,h);default:return e.isObject(f)?typeof h=="string"?h==="":!0:r.eq(f,h)}}function s(f,h,g,m){if(h==null)return!0;if(Array.isArray(h))return c(f,h,g,m);if(h instanceof Map)return o(f,h,g,m);if(h instanceof Set)return u(f,h,g,m);const b=Object.keys(h);if(f==null||n.isPrimitive(f))return b.length===0;if(b.length===0)return!0;if(m?.has(h))return m.get(h)===f;m?.set(h,f);try{for(let x=0;x<b.length;x++){const w=b[x];if(!n.isPrimitive(f)&&!(w in f)||h[w]===void 0&&f[w]!==void 0||h[w]===null&&f[w]!==null||!g(f[w],h[w],w,f,h,m))return!1}return!0}finally{m?.delete(h)}}function o(f,h,g,m){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,x]of h.entries()){const w=f.get(b);if(g(w,x,b,f,h,m)===!1)return!1}return!0}function c(f,h,g,m){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let x=0;x<h.length;x++){const w=h[x];let S=!1;for(let T=0;T<f.length;T++){if(b.has(T))continue;const I=f[T];let N=!1;if(g(I,w,x,f,h,m)&&(N=!0),N){b.add(T),S=!0;break}}if(!S)return!1}return!0}function u(f,h,g,m){return h.size===0?!0:f instanceof Set?c([...f],[...h],g,m):!1}t.isMatchWith=i,t.isSetMatch=u})(jC)),jC}var gB;function bX(){return gB||(gB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GEe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(MC)),MC}var BC={},FC={},UC={},mB;function HEe(){return mB||(mB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(UC)),UC}var $C={},vB;function xX(){return vB||(vB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})($C)),$C}var qC={},yB;function wX(){return yB||(yB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",f="[object Array]",h="[object Function]",g="[object ArrayBuffer]",m="[object Object]",b="[object Error]",x="[object DataView]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",T="[object Uint16Array]",I="[object Uint32Array]",N="[object BigUint64Array]",O="[object Int8Array]",P="[object Int16Array]",k="[object Int32Array]",D="[object BigInt64Array]",R="[object Float32Array]",z="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=f,t.bigInt64ArrayTag=D,t.bigUint64ArrayTag=N,t.booleanTag=i,t.dataViewTag=x,t.dateTag=o,t.errorTag=b,t.float32ArrayTag=R,t.float64ArrayTag=z,t.functionTag=h,t.int16ArrayTag=P,t.int32ArrayTag=k,t.int8ArrayTag=O,t.mapTag=c,t.numberTag=r,t.objectTag=m,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=T,t.uint32ArrayTag=I,t.uint8ArrayTag=w,t.uint8ClampedArrayTag=S})(qC)),qC}var GC={},bB;function KEe(){return bB||(bB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(GC)),GC}var xB;function _X(){return xB||(xB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HEe(),n=xX(),r=wX(),i=vX(),a=KEe();function s(f,h){return o(f,void 0,f,new Map,h)}function o(f,h,g,m=new Map,b=void 0){const x=b?.(f,h,g,m);if(x!==void 0)return x;if(i.isPrimitive(f))return f;if(m.has(f))return m.get(f);if(Array.isArray(f)){const w=new Array(f.length);m.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,m,b);return Object.hasOwn(f,"index")&&(w.index=f.index),Object.hasOwn(f,"input")&&(w.input=f.input),w}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const w=new RegExp(f.source,f.flags);return w.lastIndex=f.lastIndex,w}if(f instanceof Map){const w=new Map;m.set(f,w);for(const[S,T]of f)w.set(S,o(T,S,g,m,b));return w}if(f instanceof Set){const w=new Set;m.set(f,w);for(const S of f)w.add(o(S,void 0,g,m,b));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const w=new(Object.getPrototypeOf(f)).constructor(f.length);m.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,m,b);return w}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const w=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return m.set(f,w),c(w,f,g,m,b),w}if(typeof File<"u"&&f instanceof File){const w=new File([f],f.name,{type:f.type});return m.set(f,w),c(w,f,g,m,b),w}if(typeof Blob<"u"&&f instanceof Blob){const w=new Blob([f],{type:f.type});return m.set(f,w),c(w,f,g,m,b),w}if(f instanceof Error){const w=new f.constructor;return m.set(f,w),w.message=f.message,w.name=f.name,w.stack=f.stack,w.cause=f.cause,c(w,f,g,m,b),w}if(f instanceof Boolean){const w=new Boolean(f.valueOf());return m.set(f,w),c(w,f,g,m,b),w}if(f instanceof Number){const w=new Number(f.valueOf());return m.set(f,w),c(w,f,g,m,b),w}if(f instanceof String){const w=new String(f.valueOf());return m.set(f,w),c(w,f,g,m,b),w}if(typeof f=="object"&&u(f)){const w=Object.create(Object.getPrototypeOf(f));return m.set(f,w),c(w,f,g,m,b),w}return f}function c(f,h,g=f,m,b){const x=[...Object.keys(h),...e.getSymbols(h)];for(let w=0;w<x.length;w++){const S=x[w],T=Object.getOwnPropertyDescriptor(f,S);(T==null||T.writable)&&(f[S]=o(h[S],S,g,m,b))}}function u(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=c})(FC)),FC}var wB;function WEe(){return wB||(wB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_X();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(BC)),BC}var _B;function YEe(){return _B||(_B=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bX(),n=WEe();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(RC)),RC}var HC={},KC={},WC={},SB;function XEe(){return SB||(SB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_X(),n=wX();function r(i,a){return e.cloneDeepWith(i,(s,o,c,u)=>{const f=a?.(s,o,c,u);if(f!==void 0)return f;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new i.constructor(i?.valueOf());return e.copyProperties(h,i),h}case n.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}t.cloneDeepWith=r})(WC)),WC}var EB;function QEe(){return EB||(EB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XEe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(KC)),KC}var YC={},XC={},TB;function SX(){return TB||(TB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(XC)),XC}var QC={},AB;function ZEe(){return AB||(AB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xX();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(QC)),QC}var CB;function JEe(){return CB||(CB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uX(),n=SX(),r=ZEe(),i=zN();function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&s?.[o]==null?c=i.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let f=0;f<c.length;f++){const h=c[f];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}t.has=a})(YC)),YC}var IB;function eTe(){return IB||(IB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bX(),n=jN(),r=QEe(),i=LN(),a=JEe();function s(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return c=r.cloneDeep(c),function(u){const f=i.get(u,o);return f===void 0?a.has(u,o):c===void 0?f===void 0:e.isMatch(f,c)}}t.matchesProperty=s})(HC)),HC}var kB;function tTe(){return kB||(kB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gX(),n=qEe(),r=YEe(),i=eTe();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=a})(OC)),OC}var PB;function nTe(){return PB||(PB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BEe(),n=gX(),r=$Ee(),i=tTe();function a(s,o=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(o)):[]}t.uniqBy=a})(TC)),TC}var ZC,DB;function rTe(){return DB||(DB=1,ZC=nTe().uniqBy),ZC}var iTe=rTe();const OB=Bl(iTe);function aTe(t,e,n){return e===!0?OB(t,n):typeof e=="function"?OB(t,e):t}var JC={exports:{}},eI={},tI={exports:{}},nI={};var NB;function sTe(){if(NB)return nI;NB=1;var t=Np();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(h,g){var m=g(),b=r({inst:{value:m,getSnapshot:g}}),x=b[0].inst,w=b[1];return a(function(){x.value=m,x.getSnapshot=g,c(x)&&w({inst:x})},[h,m,g]),i(function(){return c(x)&&w({inst:x}),h(function(){c(x)&&w({inst:x})})},[h]),s(m),m}function c(h){var g=h.getSnapshot;h=h.value;try{var m=g();return!n(h,m)}catch{return!0}}function u(h,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return nI.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,nI}var RB;function oTe(){return RB||(RB=1,tI.exports=sTe()),tI.exports}var MB;function lTe(){if(MB)return eI;MB=1;var t=Np(),e=oTe();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return eI.useSyncExternalStoreWithSelector=function(u,f,h,g,m){var b=a(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=o(function(){function S(P){if(!T){if(T=!0,I=P,P=g(P),m!==void 0&&x.hasValue){var k=x.value;if(m(k,P))return N=k}return N=P}if(k=N,r(I,P))return k;var D=g(P);return m!==void 0&&m(k,D)?(I=P,k):(I=P,N=D)}var T=!1,I,N,O=h===void 0?null:h;return[function(){return S(f())},O===null?void 0:function(){return S(O())}]},[f,h,g,m]);var w=i(u,b[0],b[1]);return s(function(){x.hasValue=!0,x.value=w},[w]),c(w),w},eI}var jB;function cTe(){return jB||(jB=1,JC.exports=lTe()),JC.exports}var uTe=cTe(),BN=A.createContext(null),dTe=t=>t,bn=()=>{var t=A.useContext(BN);return t?t.store.dispatch:dTe},s1=()=>{},fTe=()=>s1,hTe=(t,e)=>t===e;function qe(t){var e=A.useContext(BN);return uTe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:fTe,e?e.store.getState:s1,e?e.store.getState:s1,e?t:s1,hTe)}function pTe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function gTe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function mTe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var zB=t=>Array.isArray(t)?t:[t];function vTe(t){const e=Array.isArray(t[0])?t[0]:t;return mTe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function yTe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var bTe=class{constructor(t){this.value=t}deref(){return this.value}},xTe=typeof WeakRef<"u"?WeakRef:bTe,wTe=0,LB=1;function gx(){return{s:wTe,v:void 0,o:null,p:null}}function EX(t,e={}){let n=gx();const{resultEqualityCheck:r}=e;let i,a=0;function s(){let o=n;const{length:c}=arguments;for(let h=0,g=c;h<g;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const x=b.get(m);x===void 0?(o=gx(),b.set(m,o)):o=x}else{let b=o.p;b===null&&(o.p=b=new Map);const x=b.get(m);x===void 0?(o=gx(),b.set(m,o)):o=x}}const u=o;let f;if(o.s===LB)f=o.v;else if(f=t.apply(null,arguments),a++,r){const h=i?.deref?.()??i;h!=null&&r(h,f)&&(f=h,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new xTe(f):f}return u.s=LB,u.v=f,f}return s.clearCache=()=>{n=gx(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function _Te(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,o,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),pTe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...n,...c},{memoize:h,memoizeOptions:g=[],argsMemoize:m=EX,argsMemoizeOptions:b=[]}=f,x=zB(g),w=zB(b),S=vTe(i),T=h(function(){return a++,u.apply(null,arguments)},...x),I=m(function(){s++;const O=yTe(S,arguments);return o=T.apply(null,O),o},...w);return Object.assign(I,{resultFunc:u,memoizedResultFunc:T,dependencies:S,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var ve=_Te(EX),STe=Object.assign((t,e=ve)=>{gTe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[n[c]]=o,s),{}))},{withTypes:()=>STe}),rI={},iI={},aI={},VB;function ETe(){return VB||(VB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const s=e(r),o=e(i);if(s===o&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};t.compareValues=n})(aI)),aI}var sI={},oI={},BB;function TX(){return BB||(BB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(oI)),oI}var FB;function TTe(){return FB||(FB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TX(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(sI)),sI}var UB;function ATe(){return UB||(UB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ETe(),n=TTe(),r=zN();function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const u=(m,b)=>{let x=m;for(let w=0;w<b.length&&x!=null;++w)x=x[b[w]];return x},f=(m,b)=>b==null||m==null?b:typeof m=="object"&&"key"in m?Object.hasOwn(b,m.key)?b[m.key]:u(b,m.path):typeof m=="function"?m(b):Array.isArray(m)?u(b,m):typeof b=="object"?b[m]:b,h=s.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||n.isKey(m)?m:{key:m,path:r.toPath(m)}));return a.map(m=>({original:m,criteria:h.map(b=>f(b,m))})).slice().sort((m,b)=>{for(let x=0;x<h.length;x++){const w=e.compareValues(m.criteria[x],b.criteria[x],o[x]);if(w!==0)return w}return 0}).map(m=>m.original)}t.orderBy=i})(iI)),iI}var lI={},$B;function CTe(){return $B||($B=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),s=(o,c)=>{for(let u=0;u<o.length;u++){const f=o[u];Array.isArray(f)&&c<a?s(f,c+1):i.push(f)}};return s(n,0),i}t.flatten=e})(lI)),lI}var cI={},qB;function AX(){return qB||(qB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SX(),n=VN(),r=mX(),i=yX();function a(s,o,c){return r.isObject(c)&&(typeof o=="number"&&n.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.eq(c[o],s):!1}t.isIterateeCall=a})(cI)),cI}var GB;function ITe(){return GB||(GB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ATe(),n=CTe(),r=AX();function i(a,...s){const o=s.length;return o>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,n.flatten(s),["asc"])}t.sortBy=i})(rI)),rI}var uI,HB;function kTe(){return HB||(HB=1,uI=ITe().sortBy),uI}var PTe=kTe();const hS=Bl(PTe);var CX=t=>t.legend.settings,DTe=t=>t.legend.size,OTe=t=>t.legend.payload;ve([OTe,CX],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?hS(r,n):r});var mx=1;function NTe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>mx||Math.abs(s.left-e.left)>mx||Math.abs(s.top-e.top)>mx||Math.abs(s.width-e.width)>mx)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Yr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var RTe=typeof Symbol=="function"&&Symbol.observable||"@@observable",KB=RTe,dI=()=>Math.random().toString(36).substring(7).split("").join("."),MTe={INIT:`@@redux/INIT${dI()}`,REPLACE:`@@redux/REPLACE${dI()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${dI()}`},vw=MTe;function FN(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function IX(t,e,n){if(typeof t!="function")throw new Error(Yr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Yr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Yr(1));return n(IX)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((w,S)=>{s.set(S,w)}))}function f(){if(c)throw new Error(Yr(3));return i}function h(w){if(typeof w!="function")throw new Error(Yr(4));if(c)throw new Error(Yr(5));let S=!0;u();const T=o++;return s.set(T,w),function(){if(S){if(c)throw new Error(Yr(6));S=!1,u(),s.delete(T),a=null}}}function g(w){if(!FN(w))throw new Error(Yr(7));if(typeof w.type>"u")throw new Error(Yr(8));if(typeof w.type!="string")throw new Error(Yr(17));if(c)throw new Error(Yr(9));try{c=!0,i=r(i,w)}finally{c=!1}return(a=s).forEach(T=>{T()}),w}function m(w){if(typeof w!="function")throw new Error(Yr(10));r=w,g({type:vw.REPLACE})}function b(){const w=h;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Yr(11));function T(){const N=S;N.next&&N.next(f())}return T(),{unsubscribe:w(T)}},[KB](){return this}}}return g({type:vw.INIT}),{dispatch:g,subscribe:h,getState:f,replaceReducer:m,[KB]:b}}function jTe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:vw.INIT})>"u")throw new Error(Yr(12));if(typeof n(void 0,{type:vw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Yr(13))})}function kX(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{jTe(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let f=0;f<r.length;f++){const h=r[f],g=n[h],m=s[h],b=g(m,o);if(typeof b>"u")throw o&&o.type,new Error(Yr(14));u[h]=b,c=c||b!==m}return c=c||r.length!==Object.keys(s).length,c?u:s}}function yw(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function zTe(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(Yr(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=t.map(c=>c(s));return a=yw(...o)(i.dispatch),{...i,dispatch:a}}}function PX(t){return FN(t)&&"type"in t&&typeof t.type=="string"}var DX=Symbol.for("immer-nothing"),WB=Symbol.for("immer-draftable"),Ci=Symbol.for("immer-state");function _s(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ha=Object,Tp=ha.getPrototypeOf,bw="constructor",pS="prototype",qP="configurable",xw="enumerable",o1="writable",Hv="value",Rl=t=>!!t&&!!t[Ci];function js(t){return t?OX(t)||mS(t)||!!t[WB]||!!t[bw]?.[WB]||vS(t)||yS(t):!1}var LTe=ha[pS][bw].toString(),YB=new WeakMap;function OX(t){if(!t||!UN(t))return!1;const e=Tp(t);if(e===null||e===ha[pS])return!0;const n=ha.hasOwnProperty.call(e,bw)&&e[bw];if(n===Object)return!0;if(!Eh(n))return!1;let r=YB.get(n);return r===void 0&&(r=Function.toString.call(n),YB.set(n,r)),r===LTe}function gS(t,e,n=!0){K0(t)===0?(n?Reflect.ownKeys(t):ha.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function K0(t){const e=t[Ci];return e?e.type_:mS(t)?1:vS(t)?2:yS(t)?3:0}var XB=(t,e,n=K0(t))=>n===2?t.has(e):ha[pS].hasOwnProperty.call(t,e),GP=(t,e,n=K0(t))=>n===2?t.get(e):t[e],ww=(t,e,n,r=K0(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function VTe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var mS=Array.isArray,vS=t=>t instanceof Map,yS=t=>t instanceof Set,UN=t=>typeof t=="object",Eh=t=>typeof t=="function",fI=t=>typeof t=="boolean";function BTe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var sl=t=>t.copy_||t.base_,$N=t=>t.modified_?t.copy_:t.base_;function HP(t,e){if(vS(t))return new Map(t);if(yS(t))return new Set(t);if(mS(t))return Array[pS].slice.call(t);const n=OX(t);if(e===!0||e==="class_only"&&!n){const r=ha.getOwnPropertyDescriptors(t);delete r[Ci];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o[o1]===!1&&(o[o1]=!0,o[qP]=!0),(o.get||o.set)&&(r[s]={[qP]:!0,[o1]:!0,[xw]:o[xw],[Hv]:t[s]})}return ha.create(Tp(t),r)}else{const r=Tp(t);if(r!==null&&n)return{...t};const i=ha.create(r);return ha.assign(i,t)}}function qN(t,e=!1){return bS(t)||Rl(t)||!js(t)||(K0(t)>1&&ha.defineProperties(t,{set:vx,add:vx,clear:vx,delete:vx}),ha.freeze(t),e&&gS(t,(n,r)=>{qN(r,!0)},!1)),t}function FTe(){_s(2)}var vx={[Hv]:FTe};function bS(t){return t===null||!UN(t)?!0:ha.isFrozen(t)}var _w="MapSet",KP="Patches",QB="ArrayMethods",NX={};function nf(t){const e=NX[t];return e||_s(0,t),e}var ZB=t=>!!NX[t],Kv,RX=()=>Kv,UTe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:ZB(_w)?nf(_w):void 0,arrayMethodsPlugin_:ZB(QB)?nf(QB):void 0});function JB(t,e){e&&(t.patchPlugin_=nf(KP),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function WP(t){YP(t),t.drafts_.forEach($Te),t.drafts_=null}function YP(t){t===Kv&&(Kv=t.parent_)}var e9=t=>Kv=UTe(Kv,t);function $Te(t){const e=t[Ci];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function t9(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Ci].modified_&&(WP(e),_s(4)),js(t)&&(t=n9(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Ci].base_,t,e)}else t=n9(e,n);return qTe(e,t,!0),WP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==DX?t:void 0}function n9(t,e){if(bS(e))return e;const n=e[Ci];if(!n)return Sw(e,t.handledSet_,t);if(!xS(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);zX(n,t)}return n.copy_}function qTe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&qN(e,n)}function MX(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var xS=(t,e)=>t.scope_===e,GTe=[];function jX(t,e,n,r){const i=sl(t),a=t.type_;if(r!==void 0&&GP(i,r,a)===e){ww(i,r,n,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;gS(i,(c,u)=>{if(Rl(u)){const f=o.get(u)||[];f.push(c),o.set(u,f)}})}const s=t.draftLocations_.get(e)??GTe;for(const o of s)ww(i,o,n,a)}function HTe(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!xS(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const s=$N(a);jX(t,a.draft_??a,s,n),zX(a,i)})}function zX(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}MX(t)}}function KTe(t,e,n){const{scope_:r}=t;if(Rl(n)){const i=n[Ci];xS(i,r)&&i.callbacks_.push(function(){l1(t);const s=$N(i);jX(t,n,s,e)})}else js(n)&&t.callbacks_.push(function(){const a=sl(t);t.type_===3?a.has(n)&&Sw(n,r.handledSet_,r):GP(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Sw(GP(t.copy_,e,t.type_),r.handledSet_,r)})}function Sw(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Rl(t)||e.has(t)||!js(t)||bS(t)||(e.add(t),gS(t,(r,i)=>{if(Rl(i)){const a=i[Ci];if(xS(a,n)){const s=$N(a);ww(t,r,s,t.type_),MX(a)}}else js(i)&&Sw(i,e,n)})),t}function WTe(t,e){const n=mS(t),r={type_:n?1:0,scope_:e?e.scope_:RX(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=Ew;n&&(i=[r],a=Wv);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,[o,r]}var Ew={get(t,e){if(e===Ci)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=sl(t);if(!XB(i,e,t.type_))return YTe(t,i,e);const a=i[e];if(t.finalized_||!js(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&BTe(e))return a;if(a===hI(t.base_,e)){l1(t);const s=t.type_===1?+e:e,o=QP(t.scope_,a,t,s);return t.copy_[s]=o}return a},has(t,e){return e in sl(t)},ownKeys(t){return Reflect.ownKeys(sl(t))},set(t,e,n){const r=LX(sl(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=hI(sl(t),e),a=i?.[Ci];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(VTe(n,i)&&(n!==void 0||XB(t.base_,e,t.type_)))return!0;l1(t),XP(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),KTe(t,e,n)),!0},deleteProperty(t,e){return l1(t),hI(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),XP(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=sl(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[o1]:!0,[qP]:t.type_!==1||e!=="length",[xw]:r[xw],[Hv]:n[e]}},defineProperty(){_s(11)},getPrototypeOf(t){return Tp(t.base_)},setPrototypeOf(){_s(12)}},Wv={};for(let t in Ew){let e=Ew[t];Wv[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}Wv.deleteProperty=function(t,e){return Wv.set.call(this,t,e,void 0)};Wv.set=function(t,e,n){return Ew.set.call(this,t[0],e,n,t[0])};function hI(t,e){const n=t[Ci];return(n?sl(n):t)[e]}function YTe(t,e,n){const r=LX(e,n);return r?Hv in r?r[Hv]:r.get?.call(t.draft_):void 0}function LX(t,e){if(!(e in t))return;let n=Tp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Tp(n)}}function XP(t){t.modified_||(t.modified_=!0,t.parent_&&XP(t.parent_))}function l1(t){t.copy_||(t.assigned_=new Map,t.copy_=HP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var XTe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Eh(n)&&!Eh(r)){const s=r;r=n;const o=this;return function(u=s,...f){return o.produce(u,h=>r.call(this,h,...f))}}Eh(r)||_s(6),i!==void 0&&!Eh(i)&&_s(7);let a;if(js(n)){const s=e9(this),o=QP(s,n,void 0);let c=!0;try{a=r(o),c=!1}finally{c?WP(s):YP(s)}return JB(s,i),t9(a,s)}else if(!n||!UN(n)){if(a=r(n),a===void 0&&(a=n),a===DX&&(a=void 0),this.autoFreeze_&&qN(a,!0),i){const s=[],o=[];nf(KP).generateReplacementPatches_(n,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else _s(1,n)},this.produceWithPatches=(n,r)=>{if(Eh(n))return(o,...c)=>this.produceWithPatches(o,u=>n(u,...c));let i,a;return[this.produce(n,r,(o,c)=>{i=o,a=c}),i,a]},fI(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),fI(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),fI(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){js(e)||_s(8),Rl(e)&&(e=Ps(e));const n=e9(this),r=QP(n,e,void 0);return r[Ci].isManual_=!0,YP(n),r}finishDraft(e,n){const r=e&&e[Ci];(!r||!r.isManual_)&&_s(9);const{scope_:i}=r;return JB(i,n),t9(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=nf(KP).applyPatches_;return Rl(e)?i(e,n):this.produce(e,a=>i(a,n))}};function QP(t,e,n,r){const[i,a]=vS(e)?nf(_w).proxyMap_(e,n):yS(e)?nf(_w).proxySet_(e,n):WTe(e,n);return(n?.scope_??RX()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?HTe(n,a,r):a.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:u}=c;a.modified_&&u&&u.generatePatches_(a,[],c)}),i}function Ps(t){return Rl(t)||_s(10,t),VX(t)}function VX(t){if(!js(t)||bS(t))return t;const e=t[Ci];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=HP(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=HP(t,!0);return gS(n,(i,a)=>{ww(n,i,VX(a))},r),e&&(e.finalized_=!1),n}var QTe=new XTe,BX=QTe.produce;function FX(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var ZTe=FX(),JTe=FX,eAe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?yw:yw.apply(null,arguments)};function Za(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(ga(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>PX(r)&&r.type===t,n}var UX=class zm extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,zm.prototype)}static get[Symbol.species](){return zm}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new zm(...e[0].concat(this)):new zm(...e.concat(this))}};function r9(t){return js(t)?BX(t,()=>{}):t}function yx(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function tAe(t){return typeof t=="boolean"}var nAe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new UX;return n&&(tAe(n)?s.push(ZTe):s.push(JTe(n.extraArgument))),s},$X="RTK_autoBatch",Tn=()=>t=>({payload:t,meta:{[$X]:!0}}),i9=t=>e=>{setTimeout(e,t)},qX=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:i9(10):t.type==="callback"?t.queueNotification:i9(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const h=()=>i&&f(),g=r.subscribe(h);return o.add(f),()=>{g(),o.delete(f)}},dispatch(f){try{return i=!f?.meta?.[$X],a=!i,a&&(s||(s=!0,c(u))),r.dispatch(f)}finally{i=!0}}})},rAe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new UX(t);return r&&i.push(qX(typeof r=="object"?r:void 0)),i};function iAe(t){const e=nAe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(FN(n))o=kX(n);else throw new Error(ga(1));let c;typeof r=="function"?c=r(e):c=e();let u=yw;i&&(u=eAe({trace:!1,...typeof i=="object"&&i}));const f=zTe(...c),h=rAe(f);let g=typeof s=="function"?s(h):h();const m=u(...g);return IX(o,a,m)}function GX(t){const e={},n=[];let r;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(ga(28));if(o in e)throw new Error(ga(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return n.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function aAe(t){return typeof t=="function"}function sAe(t,e){let[n,r,i]=GX(e),a;if(aAe(t))a=()=>r9(t());else{const o=r9(t);a=()=>o}function s(o=a(),c){let u=[n[c.type],...r.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,h)=>{if(h)if(Rl(f)){const m=h(f,c);return m===void 0?f:m}else{if(js(f))return BX(f,g=>h(g,c));{const g=h(f,c);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},o)}return s.getInitialState=a,s}var oAe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",lAe=(t=21)=>{let e="",n=t;for(;n--;)e+=oAe[Math.random()*64|0];return e},cAe=Symbol.for("rtk-slice-createasyncthunk");function uAe(t,e){return`${t}/${e}`}function dAe({creators:t}={}){const e=t?.asyncThunk?.[cAe];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(ga(11));const s=(typeof r.reducers=="function"?r.reducers(hAe()):r.reducers)||{},o=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(I,N){const O=typeof I=="string"?I:I.type;if(!O)throw new Error(ga(12));if(O in c.sliceCaseReducersByType)throw new Error(ga(13));return c.sliceCaseReducersByType[O]=N,u},addMatcher(I,N){return c.sliceMatchers.push({matcher:I,reducer:N}),u},exposeAction(I,N){return c.actionCreators[I]=N,u},exposeCaseReducer(I,N){return c.sliceCaseReducersByName[I]=N,u}};o.forEach(I=>{const N=s[I],O={reducerName:I,type:uAe(i,I),createNotation:typeof r.reducers=="function"};gAe(N)?vAe(O,N,u,e):pAe(O,N,u)});function f(){const[I={},N=[],O=void 0]=typeof r.extraReducers=="function"?GX(r.extraReducers):[r.extraReducers],P={...I,...c.sliceCaseReducersByType};return sAe(r.initialState,k=>{for(let D in P)k.addCase(D,P[D]);for(let D of c.sliceMatchers)k.addMatcher(D.matcher,D.reducer);for(let D of N)k.addMatcher(D.matcher,D.reducer);O&&k.addDefaultCase(O)})}const h=I=>I,g=new Map,m=new WeakMap;let b;function x(I,N){return b||(b=f()),b(I,N)}function w(){return b||(b=f()),b.getInitialState()}function S(I,N=!1){function O(k){let D=k[I];return typeof D>"u"&&N&&(D=yx(m,O,w)),D}function P(k=h){const D=yx(g,N,()=>new WeakMap);return yx(D,k,()=>{const R={};for(const[z,L]of Object.entries(r.selectors??{}))R[z]=fAe(L,k,()=>yx(m,k,w),N);return R})}return{reducerPath:I,getSelectors:P,get selectors(){return P(O)},selectSlice:O}}const T={name:i,reducer:x,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...S(a),injectInto(I,{reducerPath:N,...O}={}){const P=N??a;return I.inject({reducerPath:P,reducer:x},O),{...T,...S(P,!0)}}};return T}}function fAe(t,e,n,r){function i(a,...s){let o=e(a);return typeof o>"u"&&r&&(o=n()),t(o,...s)}return i.unwrapped=t,i}var Wi=dAe();function hAe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function pAe({type:t,reducerName:e,createNotation:n},r,i){let a,s;if("reducer"in r){if(n&&!mAe(r))throw new Error(ga(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?Za(t,s):Za(t))}function gAe(t){return t._reducerDefinitionType==="asyncThunk"}function mAe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function vAe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(ga(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:u,options:f}=n,h=i(t,a,f);r.exposeAction(e,h),s&&r.addCase(h.fulfilled,s),o&&r.addCase(h.pending,o),c&&r.addCase(h.rejected,c),u&&r.addMatcher(h.settled,u),r.exposeCaseReducer(e,{fulfilled:s||bx,pending:o||bx,rejected:c||bx,settled:u||bx})}function bx(){}var yAe="task",HX="listener",KX="completed",GN="cancelled",bAe=`task-${GN}`,xAe=`task-${KX}`,ZP=`${HX}-${GN}`,wAe=`${HX}-${KX}`,wS=class{constructor(t){this.code=t,this.message=`${yAe} ${GN} (reason: ${t})`}name="TaskAbortError";message},HN=(t,e)=>{if(typeof t!="function")throw new TypeError(ga(32))},Tw=()=>{},WX=(t,e=Tw)=>(t.catch(e),t),YX=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),zd=t=>{if(t.aborted)throw new wS(t.reason)};function XX(t,e){let n=Tw;return new Promise((r,i)=>{const a=()=>i(new wS(t.reason));if(t.aborted){a();return}n=YX(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=Tw})}var _Ae=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof wS?"cancelled":"rejected",error:n}}finally{e?.()}},Aw=t=>e=>WX(XX(t,e).then(n=>(zd(t),n))),QX=t=>{const e=Aw(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Kh}=Object,a9={},_S="listenerMiddleware",SAe=(t,e)=>{const n=r=>YX(t,()=>r.abort(t.reason));return(r,i)=>{HN(r);const a=new AbortController;n(a);const s=_Ae(async()=>{zd(t),zd(a.signal);const o=await r({pause:Aw(a.signal),delay:QX(a.signal),signal:a.signal});return zd(a.signal),o},()=>a.abort(xAe));return i?.autoJoin&&e.push(s.catch(Tw)),{result:Aw(t)(s),cancel(){a.abort(bAe)}}}},EAe=(t,e)=>{const n=async(r,i)=>{zd(e);let a=()=>{};const o=[new Promise((c,u)=>{let f=t({predicate:r,effect:(h,g)=>{g.unsubscribe(),c([h,g.getState(),g.getOriginalState()])}});a=()=>{f(),u()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await XX(e,Promise.race(o));return zd(e),c}finally{a()}};return(r,i)=>WX(n(r,i))},ZX=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Za(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ga(21));return HN(a),{predicate:i,type:e,effect:a}},JX=Kh(t=>{const{type:e,predicate:n,effect:r}=ZX(t);return{id:lAe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ga(22))}}},{withTypes:()=>JX}),s9=(t,e)=>{const{type:n,effect:r,predicate:i}=ZX(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},JP=t=>{t.pending.forEach(e=>{e.abort(ZP)})},TAe=(t,e)=>()=>{for(const n of e.keys())JP(n);t.clear()},o9=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},eQ=Kh(Za(`${_S}/add`),{withTypes:()=>eQ}),AAe=Za(`${_S}/removeAll`),tQ=Kh(Za(`${_S}/remove`),{withTypes:()=>tQ}),CAe=(...t)=>{console.error(`${_S}/error`,...t)},W0=(t={})=>{const e=new Map,n=new Map,r=m=>{const b=n.get(m)??0;n.set(m,b+1)},i=m=>{const b=n.get(m)??1;b===1?n.delete(m):n.set(m,b-1)},{extra:a,onError:s=CAe}=t;HN(s);const o=m=>(m.unsubscribe=()=>e.delete(m.id),e.set(m.id,m),b=>{m.unsubscribe(),b?.cancelActive&&JP(m)}),c=m=>{const b=s9(e,m)??JX(m);return o(b)};Kh(c,{withTypes:()=>c});const u=m=>{const b=s9(e,m);return b&&(b.unsubscribe(),m.cancelActive&&JP(b)),!!b};Kh(u,{withTypes:()=>u});const f=async(m,b,x,w)=>{const S=new AbortController,T=EAe(c,S.signal),I=[];try{m.pending.add(S),r(m),await Promise.resolve(m.effect(b,Kh({},x,{getOriginalState:w,condition:(N,O)=>T(N,O).then(Boolean),take:T,delay:QX(S.signal),pause:Aw(S.signal),extra:a,signal:S.signal,fork:SAe(S.signal,I),unsubscribe:m.unsubscribe,subscribe:()=>{e.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((N,O,P)=>{N!==S&&(N.abort(ZP),P.delete(N))})},cancel:()=>{S.abort(ZP),m.pending.delete(S)},throwIfCancelled:()=>{zd(S.signal)}})))}catch(N){N instanceof wS||o9(s,N,{raisedBy:"effect"})}finally{await Promise.all(I),S.abort(wAe),i(m),m.pending.delete(S)}},h=TAe(e,n);return{middleware:m=>b=>x=>{if(!PX(x))return b(x);if(eQ.match(x))return c(x.payload);if(AAe.match(x)){h();return}if(tQ.match(x))return u(x.payload);let w=m.getState();const S=()=>{if(w===a9)throw new Error(ga(23));return w};let T;try{if(T=b(x),e.size>0){const I=m.getState(),N=Array.from(e.values());for(const O of N){let P=!1;try{P=O.predicate(x,I,w)}catch(k){P=!1,o9(s,k,{raisedBy:"predicate"})}P&&f(O,x,m,S)}}}finally{w=a9}return T},startListening:c,stopListening:u,clearListeners:h}};function ga(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var IAe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},nQ=Wi({name:"chartLayout",initialState:IAe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:kAe,setLayout:PAe,setChartSize:DAe,setScale:OAe}=nQ.actions,NAe=nQ.reducer;function rQ(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function un(t){return Number.isFinite(t)}function Do(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function l9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l9(Object(n),!0).forEach(function(r){RAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RAe(t,e,n){return(e=MAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MAe(t){var e=jAe(t,"string");return typeof e=="symbol"?e:e+""}function jAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yn(t,e,n){return Br(t)||Br(e)?n:Qa(e)?tf(t,e,n):typeof e=="function"?e(t):n}var zAe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&We(t[a]))return Lh(Lh({},t),{},{[a]:t[a]+(r||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&We(t[s]))return Lh(Lh({},t),{},{[s]:t[s]+(i||0)})}return t},vf=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",iQ=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,a,s=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(n),s},aQ=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:f,ticks:h,niceTicks:g,axisType:m}=t;if(!s)return null;var b=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,x=i==="category"&&s.bandwidth?s.bandwidth()/b:0;if(x=m==="angleAxis"&&a&&a.length>=2?Lr(a[0]-a[1])*2*x:x,h||g){var w=(h||g||[]).map((S,T)=>{var I=r?r.indexOf(S):S;return{coordinate:s(I)+x,value:S,offset:x,index:T}});return w.filter(S=>!ba(S.coordinate))}return c&&u?u.map((S,T)=>({coordinate:s(S)+x,value:S,index:T,offset:x})):s.ticks&&f!=null?s.ticks(f).map((S,T)=>({coordinate:s(S)+x,value:S,offset:x,index:T})):s.domain().map((S,T)=>({coordinate:s(S)+x,value:r?r[S]:S,index:T,offset:x}))},c9=1e-4,LAe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-c9,a=Math.max(r[0],r[1])+c9,s=t(e[0]),o=t(e[n-1]);(s<i||s>a||o<i||o>a)&&t.domain([e[0],e[n-1]])}},VAe=(t,e)=>{if(!e||e.length!==2||!We(e[0])||!We(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!We(t[0])||t[0]<n)&&(i[0]=n),(!We(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},BAe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0,o=0;o<n;++o){var c=t[o],u=c?.[i];if(u!=null){var f=u[1],h=u[0],g=ba(f)?h:f;g>=0?(u[0]=a,u[1]=a+g,a=f):(u[0]=s,u[1]=s+g,s=f)}}}},FAe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0;s<n;++s){var o=t[s],c=o?.[i];if(c!=null){var u=ba(c[1])?c[0]:c[1];u>=0?(c[0]=a,c[1]=a+u,a=c[1]):(c[0]=0,c[1]=0)}}}},UAe={sign:BAe,expand:hEe,none:ef,silhouette:pEe,wiggle:gEe,positive:FAe},$Ae=(t,e,n)=>{var r,i=(r=UAe[n])!==null&&r!==void 0?r:ef,a=fEe().keys(e).value((o,c)=>Number(yn(o,c,0))).order(UP).offset(i),s=a(t);return s.forEach((o,c)=>{o.forEach((u,f)=>{var h=yn(t[f],e[c],0);Array.isArray(h)&&h.length===2&&We(h[0])&&We(h[1])&&(u[0]=h[0],u[1]=h[1])})}),s};function qAe(t){return t==null?void 0:String(t)}var u9=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var o=yn(a,e.dataKey,e.scale.domain()[s]);return Br(o)?null:e.scale(o)-i/2+r},GAe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},HAe=t=>{var e=t.flat(2).filter(We);return[Math.min(...e),Math.max(...e)]},KAe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],WAe=(t,e,n)=>{if(t!=null)return KAe(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:s}=a,o=s.reduce((c,u)=>{var f=rQ(u,e,n),h=HAe(f);return!un(h[0])||!un(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},d9=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,f9=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Cw=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=hS(e,f=>f.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],u=i[s-1];a=Math.min((c?.coordinate||0)-(u?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function h9(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Lh(Lh({},e),{},{dataKey:n,payload:r,value:i,name:a})}function SS(t,e){if(t)return String(t);if(typeof e=="string")return e}var YAe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},XAe=(t,e)=>e==="centric"?t.angle:t.radius,ql=t=>t.layout.width,Gl=t=>t.layout.height,QAe=t=>t.layout.scale,sQ=t=>t.layout.margin,ES=ve(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),TS=ve(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),oQ="data-recharts-item-index",lQ="data-recharts-item-id",Y0=60;function p9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p9(Object(n),!0).forEach(function(r){ZAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZAe(t,e,n){return(e=JAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JAe(t){var e=eCe(t,"string");return typeof e=="symbol"?e:e+""}function eCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tCe=t=>t.brush.height;function nCe(t){var e=TS(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Y0;return n+i}return n},0)}function rCe(t){var e=TS(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Y0;return n+i}return n},0)}function iCe(t){var e=ES(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function aCe(t){var e=ES(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Cr=ve([ql,Gl,sQ,tCe,nCe,rCe,iCe,aCe,CX,DTe],(t,e,n,r,i,a,s,o,c,u)=>{var f={left:(n.left||0)+i,right:(n.right||0)+a},h={top:(n.top||0)+s,bottom:(n.bottom||0)+o},g=xx(xx({},h),f),m=g.bottom;g.bottom+=r,g=zAe(g,c,u);var b=t-g.left-g.right,x=e-g.top-g.bottom;return xx(xx({brushBottom:m},g),{},{width:Math.max(b,0),height:Math.max(x,0)})}),sCe=ve(Cr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),KN=ve(ql,Gl,(t,e)=>({x:0,y:0,width:t,height:e})),oCe=A.createContext(null),Ii=()=>A.useContext(oCe)!=null,AS=t=>t.brush,CS=ve([AS,Cr,sQ],(t,e,n)=>({height:t.height,x:We(t.x)?t.x:e.left,y:We(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:We(t.width)?t.width:e.width})),pI={},gI={},mI={},g9;function lCe(){return g9||(g9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),f=()=>{o!==null&&(n.apply(s,o),s=void 0,o=null)},h=()=>{u&&f(),x()};let g=null;const m=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,h()},r)},b=()=>{g!==null&&(clearTimeout(g),g=null)},x=()=>{b(),s=void 0,o=null},w=()=>{f()},S=function(...T){if(i?.aborted)return;s=this,o=T;const I=g==null;m(),c&&I&&f()};return S.schedule=m,S.cancel=x,S.flush=w,i?.addEventListener("abort",x,{once:!0}),S}t.debounce=e})(mI)),mI}var m9;function cCe(){return m9||(m9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lCe();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let f,h=null;const g=e.debounce(function(...x){f=r.apply(this,x),h=null},i,{edges:u}),m=function(...x){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(f=r.apply(this,x),h=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,x),f)},b=()=>(g.flush(),f);return m.cancel=g.cancel,m.flush=b,m}t.debounce=n})(gI)),gI}var v9;function uCe(){return v9||(v9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cCe();function n(r,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:o})}t.throttle=n})(pI)),pI}var vI,y9;function dCe(){return y9||(y9=1,vI=uCe().throttle),vI}var fCe=dCe();const hCe=Bl(fCe);var Iw=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>i[s++]))}},cQ=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:s}=n,o=Nl(r)?t:Number(r),c=Nl(i)?e:Number(i);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},pCe={width:0,height:0,overflow:"visible"},gCe={width:0,overflowX:"visible"},mCe={height:0,overflowY:"visible"},vCe={},yCe=t=>{var{width:e,height:n}=t,r=Nl(e),i=Nl(n);return r&&i?pCe:r?gCe:i?mCe:vCe};function bCe(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function e2(){return e2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e2.apply(null,arguments)}function b9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function x9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b9(Object(n),!0).forEach(function(r){xCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xCe(t,e,n){return(e=wCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wCe(t){var e=_Ce(t,"string");return typeof e=="symbol"?e:e+""}function _Ce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uQ=A.createContext({width:-1,height:-1});function SCe(t){return Do(t.width)&&Do(t.height)}function dQ(t){var{children:e,width:n,height:r}=t,i=A.useMemo(()=>({width:n,height:r}),[n,r]);return SCe(i)?A.createElement(uQ.Provider,{value:i},e):null}var WN=()=>A.useContext(uQ),ECe=A.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:c,children:u,debounce:f=0,id:h,className:g,onResize:m,style:b={}}=t,x=A.useRef(null),w=A.useRef();w.current=m,A.useImperativeHandle(e,()=>x.current);var[S,T]=A.useState({containerWidth:r.width,containerHeight:r.height}),I=A.useCallback((D,R)=>{T(z=>{var L=Math.round(D),B=Math.round(R);return z.containerWidth===L&&z.containerHeight===B?z:{containerWidth:L,containerHeight:B}})},[]);A.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return H0;var D=B=>{var j,{width:H,height:X}=B[0].contentRect;I(H,X),(j=w.current)===null||j===void 0||j.call(w,H,X)};f>0&&(D=hCe(D,f,{trailing:!0,leading:!1}));var R=new ResizeObserver(D),{width:z,height:L}=x.current.getBoundingClientRect();return I(z,L),R.observe(x.current),()=>{R.disconnect()}},[I,f]);var{containerWidth:N,containerHeight:O}=S;Iw(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:P,calculatedHeight:k}=cQ(N,O,{width:i,height:a,aspect:n,maxHeight:c});return Iw(P!=null&&P>0||k!=null&&k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,k,i,a,s,o,n),A.createElement("div",{id:h?"".concat(h):void 0,className:Qt("recharts-responsive-container",g),style:x9(x9({},b),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:x},A.createElement("div",{style:yCe({width:i,height:a})},A.createElement(dQ,{width:P,height:k},u)))}),IS=A.forwardRef((t,e)=>{var n=WN();if(Do(n.width)&&Do(n.height))return t.children;var{width:r,height:i}=bCe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=cQ(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return We(a)&&We(s)?A.createElement(dQ,{width:a,height:s},t.children):A.createElement(ECe,e2({},t,{width:r,height:i,ref:e}))});function fQ(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var X0=()=>{var t,e=Ii(),n=qe(sCe),r=qe(CS),i=(t=qe(AS))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},TCe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},hQ=()=>{var t;return(t=qe(Cr))!==null&&t!==void 0?t:TCe},pQ=()=>qe(ql),gQ=()=>qe(Gl),Lt=t=>t.layout.layoutType,Q0=()=>qe(Lt),ACe=()=>{var t=Q0();return t!==void 0},kS=t=>{var e=bn(),n=Ii(),{width:r,height:i}=t,a=WN(),s=r,o=i;return a&&(s=a.width>0?a.width:r,o=a.height>0?a.height:i),A.useEffect(()=>{!n&&Do(s)&&Do(o)&&e(DAe({width:s,height:o}))},[e,n,s,o]),null},mQ=Symbol.for("immer-nothing"),w9=Symbol.for("immer-draftable"),xa=Symbol.for("immer-state");function Ss(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Yv=Object.getPrototypeOf;function Ap(t){return!!t&&!!t[xa]}function rf(t){return t?vQ(t)||Array.isArray(t)||!!t[w9]||!!t.constructor?.[w9]||Z0(t)||DS(t):!1}var CCe=Object.prototype.constructor.toString(),_9=new WeakMap;function vQ(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=_9.get(n);return r===void 0&&(r=Function.toString.call(n),_9.set(n,r)),r===CCe}function kw(t,e,n=!0){PS(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function PS(t){const e=t[xa];return e?e.type_:Array.isArray(t)?1:Z0(t)?2:DS(t)?3:0}function t2(t,e){return PS(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function yQ(t,e,n){const r=PS(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function ICe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Z0(t){return t instanceof Map}function DS(t){return t instanceof Set}function ud(t){return t.copy_||t.base_}function n2(t,e){if(Z0(t))return new Map(t);if(DS(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=vQ(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[xa];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(Yv(t),r)}else{const r=Yv(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function YN(t,e=!1){return OS(t)||Ap(t)||!rf(t)||(PS(t)>1&&Object.defineProperties(t,{set:wx,add:wx,clear:wx,delete:wx}),Object.freeze(t),e&&Object.values(t).forEach(n=>YN(n,!0))),t}function kCe(){Ss(2)}var wx={value:kCe};function OS(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var PCe={};function af(t){const e=PCe[t];return e||Ss(0,t),e}var Xv;function bQ(){return Xv}function DCe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function S9(t,e){e&&(af("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function r2(t){i2(t),t.drafts_.forEach(OCe),t.drafts_=null}function i2(t){t===Xv&&(Xv=t.parent_)}function E9(t){return Xv=DCe(Xv,t)}function OCe(t){const e=t[xa];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function T9(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[xa].modified_&&(r2(e),Ss(4)),rf(t)&&(t=Pw(e,t),e.parent_||Dw(e,t)),e.patches_&&af("Patches").generateReplacementPatches_(n[xa].base_,t,e.patches_,e.inversePatches_)):t=Pw(e,n,[]),r2(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==mQ?t:void 0}function Pw(t,e,n){if(OS(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[xa];if(!i)return kw(e,(a,s)=>A9(t,i,e,a,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return Dw(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),kw(s,(c,u)=>A9(t,i,a,c,u,n,o),r),Dw(t,a,!1),n&&t.patches_&&af("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function A9(t,e,n,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=OS(i);if(!(o&&!s)){if(Ap(i)){const c=a&&e&&e.type_!==3&&!t2(e.assigned_,r)?a.concat(r):void 0,u=Pw(t,i,c);if(yQ(n,r,u),Ap(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(rf(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;Pw(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Z0(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Dw(t,i)}}}function Dw(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&YN(e,n)}function NCe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:bQ(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=XN;n&&(i=[r],a=Qv);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var XN={get(t,e){if(e===xa)return t;const n=ud(t);if(!t2(n,e))return RCe(t,n,e);const r=n[e];return t.finalized_||!rf(r)?r:r===yI(t.base_,e)?(bI(t),t.copy_[e]=s2(r,t)):r},has(t,e){return e in ud(t)},ownKeys(t){return Reflect.ownKeys(ud(t))},set(t,e,n){const r=xQ(ud(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=yI(ud(t),e),a=i?.[xa];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(ICe(n,i)&&(n!==void 0||t2(t.base_,e)))return!0;bI(t),a2(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return yI(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,bI(t),a2(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ud(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Ss(11)},getPrototypeOf(t){return Yv(t.base_)},setPrototypeOf(){Ss(12)}},Qv={};kw(XN,(t,e)=>{Qv[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Qv.deleteProperty=function(t,e){return Qv.set.call(this,t,e,void 0)};Qv.set=function(t,e,n){return XN.set.call(this,t[0],e,n,t[0])};function yI(t,e){const n=t[xa];return(n?ud(n):t)[e]}function RCe(t,e,n){const r=xQ(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function xQ(t,e){if(!(e in t))return;let n=Yv(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Yv(n)}}function a2(t){t.modified_||(t.modified_=!0,t.parent_&&a2(t.parent_))}function bI(t){t.copy_||(t.copy_=n2(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var MCe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(c=a,...u){return s.produce(c,f=>n.call(this,f,...u))}}typeof n!="function"&&Ss(6),r!==void 0&&typeof r!="function"&&Ss(7);let i;if(rf(e)){const a=E9(this),s=s2(e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?r2(a):i2(a)}return S9(a,r),T9(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===mQ&&(i=void 0),this.autoFreeze_&&YN(i,!0),r){const a=[],s=[];af("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else Ss(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){rf(t)||Ss(8),Ap(t)&&(t=jCe(t));const e=E9(this),n=s2(t,void 0);return n[xa].isManual_=!0,i2(e),n}finishDraft(t,e){const n=t&&t[xa];(!n||!n.isManual_)&&Ss(9);const{scope_:r}=n;return S9(r,e),T9(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=af("Patches").applyPatches_;return Ap(t)?r(t,e):this.produce(t,i=>r(i,e))}};function s2(t,e){const n=Z0(t)?af("MapSet").proxyMap_(t,e):DS(t)?af("MapSet").proxySet_(t,e):NCe(t,e);return(e?e.scope_:bQ()).drafts_.push(n),n}function jCe(t){return Ap(t)||Ss(10,t),wQ(t)}function wQ(t){if(!rf(t)||OS(t))return t;const e=t[xa];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=n2(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=n2(t,!0);return kw(n,(i,a)=>{yQ(n,i,wQ(a))},r),e&&(e.finalized_=!1),n}var zCe=new MCe;zCe.produce;var LCe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},_Q=Wi({name:"legend",initialState:LCe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Tn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ps(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Tn()},removeLegendPayload:{reducer(t,e){var n=Ps(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Tn()}}}),{setLegendSize:x5e,setLegendSettings:w5e,addLegendPayload:SQ,replaceLegendPayload:EQ,removeLegendPayload:TQ}=_Q.actions,VCe=_Q.reducer;function o2(){return o2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o2.apply(null,arguments)}function C9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C9(Object(n),!0).forEach(function(r){BCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BCe(t,e,n){return(e=FCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FCe(t){var e=UCe(t,"string");return typeof e=="symbol"?e:e+""}function UCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ce(t){return Array.isArray(t)&&Qa(t[0])&&Qa(t[1])?t.join(" ~ "):t}var qCe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:f,labelFormatter:h,accessibilityLayer:g=!1}=t,m=()=>{if(a&&a.length){var O={padding:0,margin:0},P=(o?hS(a,o):a).map((k,D)=>{if(k.type==="none")return null;var R=k.formatter||s||$Ce,{value:z,name:L}=k,B=z,j=L;if(R){var H=R(z,L,k,D,a);if(Array.isArray(H))[B,j]=H;else if(H!=null)B=H;else return null}var X=xI({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:X},Qa(j)?A.createElement("span",{className:"recharts-tooltip-item-name"},j):null,Qa(j)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},B),A.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:O},P)}return null},b=xI({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),x=xI({margin:0},i),w=!Br(f),S=w?f:"",T=Qt("recharts-default-tooltip",c),I=Qt("recharts-tooltip-label",u);w&&h&&a!==void 0&&a!==null&&(S=h(f,a));var N=g?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",o2({className:T,style:b},N),A.createElement("p",{className:I,style:x},A.isValidElement(S)?S:"".concat(S)),m())},vm="recharts-tooltip-wrapper",GCe={visibility:"hidden"};function HCe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Qt(vm,{["".concat(vm,"-right")]:We(n)&&e&&We(e.x)&&n>=e.x,["".concat(vm,"-left")]:We(n)&&e&&We(e.x)&&n<e.x,["".concat(vm,"-bottom")]:We(r)&&e&&We(e.y)&&r>=e.y,["".concat(vm,"-top")]:We(r)&&e&&We(e.y)&&r<e.y})}function I9(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=t;if(a&&We(a[r]))return a[r];var f=n[r]-o-(i>0?i:0),h=n[r]+i;if(e[r])return s[r]?f:h;var g=c[r];if(g==null)return 0;if(s[r]){var m=f,b=g;return m<b?Math.max(h,g):Math.max(f,g)}if(u==null)return 0;var x=h+o,w=g+u;return x>w?Math.max(f,g):Math.max(h,g)}function KCe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function WCe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:c}=t,u,f,h;return s.height>0&&s.width>0&&n?(f=I9({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),h=I9({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=KCe({translateX:f,translateY:h,useTranslate3d:o})):u=GCe,{cssProperties:u,cssClasses:HCe({translateX:f,translateY:h,coordinate:n})}}function k9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _x(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k9(Object(n),!0).forEach(function(r){l2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l2(t,e,n){return(e=YCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YCe(t){var e=XCe(t,"string");return typeof e=="symbol"?e:e+""}function XCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class QCe extends A.PureComponent{constructor(){super(...arguments),l2(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),l2(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:m,wrapperStyle:b,lastBoundingBox:x,innerRef:w,hasPortalFromProps:S}=this.props,{cssClasses:T,cssProperties:I}=WCe({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:u,position:f,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:g,viewBox:m}),N=S?{}:_x(_x({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),O=_x(_x({},N),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},b);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:O,ref:w},a)}}var AQ=()=>{var t;return(t=qe(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function c2(){return c2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c2.apply(null,arguments)}function P9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function D9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P9(Object(n),!0).forEach(function(r){ZCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZCe(t,e,n){return(e=JCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JCe(t){var e=eIe(t,"string");return typeof e=="symbol"?e:e+""}function eIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var O9={curveBasisClosed:tEe,curveBasisOpen:nEe,curveBasis:eEe,curveBumpX:BSe,curveBumpY:FSe,curveLinearClosed:rEe,curveLinear:uS,curveMonotoneX:iEe,curveMonotoneY:aEe,curveNatural:sEe,curveStep:oEe,curveStepAfter:cEe,curveStepBefore:lEe},Ow=t=>un(t.x)&&un(t.y),N9=t=>t.base!=null&&Ow(t.base)&&Ow(t),ym=t=>t.x,bm=t=>t.y,tIe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(G0(t));return(n==="curveMonotone"||n==="curveBump")&&e?O9["".concat(n).concat(e==="vertical"?"Y":"X")]:O9[n]||uS},nIe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=t,s=tIe(e,i),o=a?n.filter(Ow):n,c;if(Array.isArray(r)){var u=n.map((m,b)=>D9(D9({},m),{},{base:r[b]}));i==="vertical"?c=px().y(bm).x1(ym).x0(m=>m.base.x):c=px().x(ym).y1(bm).y0(m=>m.base.y);var f=c.defined(N9).curve(s),h=a?u.filter(N9):u;return f(h)}i==="vertical"&&We(r)?c=px().y(bm).x1(ym).x0(r):We(r)?c=px().x(ym).y1(bm).y0(r):c=JY().x(ym).y(bm);var g=c.defined(Ow).curve(s);return g(o)},QN=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=Q0();if((!n||!n.length)&&!r)return null;var s={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},o=n&&n.length?nIe(s):r;return A.createElement("path",c2({},Ms(t),REe(t),{className:Qt("recharts-curve",e),d:o===null?void 0:o,ref:i}))},rIe=["x","y","top","left","width","height","className"];function u2(){return u2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u2.apply(null,arguments)}function R9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iIe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R9(Object(n),!0).forEach(function(r){aIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aIe(t,e,n){return(e=sIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sIe(t){var e=oIe(t,"string");return typeof e=="symbol"?e:e+""}function oIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lIe(t,e){if(t==null)return{};var n,r,i=cIe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cIe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var uIe=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),dIe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:s=0,className:o}=t,c=lIe(t,rIe),u=iIe({x:e,y:n,top:r,left:i,width:a,height:s},c);return!We(e)||!We(n)||!We(a)||!We(s)||!We(r)||!We(i)?null:A.createElement("path",u2({},ya(u),{className:Qt("recharts-cross",o),d:uIe(e,n,a,s,r,i)}))};function fIe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function M9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function j9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M9(Object(n),!0).forEach(function(r){hIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hIe(t,e,n){return(e=pIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pIe(t){var e=gIe(t,"string");return typeof e=="symbol"?e:e+""}function gIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mIe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),CQ=(t,e,n)=>t.map(r=>"".concat(mIe(r)," ").concat(e,"ms ").concat(n)).join(","),vIe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Zv=(t,e)=>Object.keys(e).reduce((n,r)=>j9(j9({},n),{},{[r]:t(r,e[r])}),{});function z9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z9(Object(n),!0).forEach(function(r){yIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yIe(t,e,n){return(e=bIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bIe(t){var e=xIe(t,"string");return typeof e=="symbol"?e:e+""}function xIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nw=(t,e,n)=>t+(e-t)*n,d2=t=>{var{from:e,to:n}=t;return e!==n},IQ=(t,e,n)=>{var r=Zv((i,a)=>{if(d2(a)){var[s,o]=t(a.from,a.to,a.velocity);return xr(xr({},a),{},{from:s,velocity:o})}return a},e);return n<1?Zv((i,a)=>d2(a)&&r[i]!=null?xr(xr({},a),{},{velocity:Nw(a.velocity,r[i].velocity,n),from:Nw(a.from,r[i].from,n)}):a,e):IQ(t,r,n-1)};function wIe(t,e,n,r,i,a){var s,o=r.reduce((g,m)=>xr(xr({},g),{},{[m]:{from:t[m],velocity:0,to:e[m]}}),{}),c=()=>Zv((g,m)=>m.from,o),u=()=>!Object.values(o).filter(d2).length,f=null,h=g=>{s||(s=g);var m=g-s,b=m/n.dt;o=IQ(n,o,b),i(xr(xr(xr({},t),e),c())),s=g,u()||(f=a.setTimeout(h))};return()=>(f=a.setTimeout(h),()=>{var g;(g=f)===null||g===void 0||g()})}function _Ie(t,e,n,r,i,a,s){var o=null,c=i.reduce((h,g)=>{var m=t[g],b=e[g];return m==null||b==null?h:xr(xr({},h),{},{[g]:[m,b]})},{}),u,f=h=>{u||(u=h);var g=(h-u)/r,m=Zv((x,w)=>Nw(...w,n(g)),c);if(a(xr(xr(xr({},t),e),m)),g<1)o=s.setTimeout(f);else{var b=Zv((x,w)=>Nw(...w,n(1)),c);a(xr(xr(xr({},t),e),b))}};return()=>(o=s.setTimeout(f),()=>{var h;(h=o)===null||h===void 0||h()})}const SIe=(t,e,n,r,i,a)=>{var s=vIe(t,e);return n==null?()=>(i(xr(xr({},t),e)),()=>{}):n.isStepper===!0?wIe(t,e,n,s,i,a):_Ie(t,e,n,r,s,i,a)};var Rw=1e-4,kQ=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],PQ=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),L9=(t,e)=>n=>{var r=kQ(t,e);return PQ(r,n)},EIe=(t,e)=>n=>{var r=kQ(t,e),i=[...r.map((a,s)=>a*s).slice(1),0];return PQ(i,n)},TIe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},AIe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=TIe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},CIe=(t,e,n,r)=>{var i=L9(t,n),a=L9(e,r),s=EIe(t,n),o=u=>u>1?1:u<0?0:u,c=u=>{for(var f=u>1?1:u,h=f,g=0;g<8;++g){var m=i(h)-f,b=s(h);if(Math.abs(m-f)<Rw||b<Rw)return a(h);h=o(h-m/b)}return a(h)};return c.isStepper=!1,c},V9=function(){return CIe(...AIe(...arguments))},IIe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(s,o,c)=>{var u=-(s-o)*n,f=c*r,h=c+(u-f)*i/1e3,g=c*i/1e3+s;return Math.abs(g-o)<Rw&&Math.abs(h)<Rw?[o,0]:[g,h]};return a.isStepper=!0,a.dt=i,a},kIe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return V9(t);case"spring":return IIe();default:if(t.split("(")[0]==="cubic-bezier")return V9(t)}return typeof t=="function"?t:null};function PIe(t){var e,n=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){i=t.setTimeout(a.bind(null,u),c);return}a(c),i=t.setTimeout(a.bind(null,u));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class DIe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function OIe(){return PIe(new DIe)}var NIe=A.createContext(OIe);function RIe(t,e){var n=A.useContext(NIe);return A.useMemo(()=>e??n(t),[t,e,n])}var MIe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),NS={isSsr:MIe()},jIe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},B9={t:0},wI={t:1};function RS(t){var e=ei(t,jIe),{isActive:n,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=e,f=n==="auto"?!NS.isSsr:n,h=RIe(e.animationId,e.animationManager),[g,m]=A.useState(f?B9:wI),b=A.useRef(null);return A.useEffect(()=>{f||m(wI)},[f]),A.useEffect(()=>{if(!f||!r)return H0;var x=SIe(B9,wI,kIe(a),i,m,h.getTimeoutController()),w=()=>{b.current=x()};return h.start([c,s,w,i,o]),()=>{h.stop(),b.current&&b.current(),o()}},[f,r,i,a,s,c,o,h]),u(g.t)}function MS(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(Gv(e)),r=A.useRef(t);return r.current!==t&&(n.current=Gv(e),r.current=t),n.current}var zIe=["radius"],LIe=["radius"],F9,U9,$9,q9,G9,H9,K9,W9,Y9,X9;function Q9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Z9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q9(Object(n),!0).forEach(function(r){VIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VIe(t,e,n){return(e=BIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BIe(t){var e=FIe(t,"string");return typeof e=="symbol"?e:e+""}function FIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mw(){return Mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mw.apply(null,arguments)}function J9(t,e){if(t==null)return{};var n,r,i=UIe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function UIe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ao(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var eF=(t,e,n,r,i)=>{var a=Xc(n),s=Xc(r),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,u=a>=0?1:-1,f=s>=0&&a>=0||s<0&&a<0?1:0,h;if(o>0&&i instanceof Array){for(var g=[0,0,0,0],m=0,b=4;m<b;m++)g[m]=i[m]>o?o:i[m];h=Fn(F9||(F9=ao(["M",",",""])),t,e+c*g[0]),g[0]>0&&(h+=Fn(U9||(U9=ao(["A ",",",",0,0,",",",",",""])),g[0],g[0],f,t+u*g[0],e)),h+=Fn($9||($9=ao(["L ",",",""])),t+n-u*g[1],e),g[1]>0&&(h+=Fn(q9||(q9=ao(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],f,t+n,e+c*g[1])),h+=Fn(G9||(G9=ao(["L ",",",""])),t+n,e+r-c*g[2]),g[2]>0&&(h+=Fn(H9||(H9=ao(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],f,t+n-u*g[2],e+r)),h+=Fn(K9||(K9=ao(["L ",",",""])),t+u*g[3],e+r),g[3]>0&&(h+=Fn(W9||(W9=ao(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],f,t,e+r-c*g[3])),h+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);h=Fn(Y9||(Y9=ao(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*x,x,x,f,t+u*x,e,t+n-u*x,e,x,x,f,t+n,e+c*x,t+n,e+r-c*x,x,x,f,t+n-u*x,e+r,t+u*x,e+r,x,x,f,t,e+r-c*x)}else h=Fn(X9||(X9=ao(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},tF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DQ=t=>{var e=ei(t,tF),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var W=n.current.getTotalLength();W&&i(W)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:u,className:f}=e,{animationEasing:h,animationDuration:g,animationBegin:m,isAnimationActive:b,isUpdateAnimationActive:x}=e,w=A.useRef(o),S=A.useRef(c),T=A.useRef(a),I=A.useRef(s),N=A.useMemo(()=>({x:a,y:s,width:o,height:c,radius:u}),[a,s,o,c,u]),O=MS(N,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var P=Qt("recharts-rectangle",f);if(!x){var k=ya(e),{radius:D}=k,R=J9(k,zIe);return A.createElement("path",Mw({},R,{x:Xc(a),y:Xc(s),width:Xc(o),height:Xc(c),radius:typeof u=="number"?u:void 0,className:P,d:eF(a,s,o,c,u)}))}var z=w.current,L=S.current,B=T.current,j=I.current,H="0px ".concat(r===-1?1:r,"px"),X="".concat(r,"px 0px"),q=CQ(["strokeDasharray"],g,typeof h=="string"?h:tF.animationEasing);return A.createElement(RS,{animationId:O,key:O,canBegin:r>0,duration:g,easing:h,isActive:x,begin:m},W=>{var J=br(z,o,W),ne=br(L,c,W),Y=br(B,a,W),U=br(j,s,W);n.current&&(w.current=J,S.current=ne,T.current=Y,I.current=U);var Q;b?W>0?Q={transition:q,strokeDasharray:X}:Q={strokeDasharray:H}:Q={strokeDasharray:X};var K=ya(e),{radius:Z}=K,le=J9(K,LIe);return A.createElement("path",Mw({},le,{radius:typeof u=="number"?u:void 0,className:P,d:eF(Y,U,J,ne,u),ref:n,style:Z9(Z9({},Q),e.style)}))})};function nF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nF(Object(n),!0).forEach(function(r){$Ie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Ie(t,e,n){return(e=qIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qIe(t){var e=GIe(t,"string");return typeof e=="symbol"?e:e+""}function GIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jw=Math.PI/180,HIe=t=>t*180/Math.PI,hr=(t,e,n,r)=>({x:t+Math.cos(-jw*r)*n,y:e+Math.sin(-jw*r)*n}),OQ=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},KIe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},WIe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,s=KIe({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(n-i)/s,c=Math.acos(o);return r>a&&(c=2*Math.PI-c),{radius:s,angle:HIe(c),angleInRadian:c}},YIe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},XIe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return t+s*360},QIe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=WIe({x:n,y:r},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:u}=YIe(e),f=a,h;if(c<=u){for(;f>u;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=u}else{for(;f>c;)f-=360;for(;f<u;)f+=360;h=f>=u&&f<=c}return h?rF(rF({},e),{},{radius:i,angle:XIe(f,e)}):null};function NQ(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,s=hr(e,n,r,i),o=hr(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var iF,aF,sF,oF,lF,cF,uF;function f2(){return f2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f2.apply(null,arguments)}function Ad(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var ZIe=(t,e)=>{var n=Lr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Sx=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=t,u=o*(s?1:-1)+r,f=Math.asin(o/u)/jw,h=c?i:i+a*f,g=hr(e,n,u,h),m=hr(e,n,r,h),b=c?i-a*f:i,x=hr(e,n,u*Math.cos(f*jw),b);return{center:g,circleTangency:m,lineTangency:x,theta:f}},RQ=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=t,o=ZIe(a,s),c=a+o,u=hr(e,n,i,a),f=hr(e,n,i,c),h=Fn(iF||(iF=Ad(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(o)>180),+(a>c),f.x,f.y);if(r>0){var g=hr(e,n,r,a),m=hr(e,n,r,c);h+=Fn(aF||(aF=Ad(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),m.x,m.y,r,r,+(Math.abs(o)>180),+(a<=c),g.x,g.y)}else h+=Fn(sF||(sF=Ad(["L ",","," Z"])),e,n);return h},JIe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=t,f=Lr(u-c),{circleTangency:h,lineTangency:g,theta:m}=Sx({cx:e,cy:n,radius:i,angle:c,sign:f,cornerRadius:a,cornerIsExternal:o}),{circleTangency:b,lineTangency:x,theta:w}=Sx({cx:e,cy:n,radius:i,angle:u,sign:-f,cornerRadius:a,cornerIsExternal:o}),S=o?Math.abs(c-u):Math.abs(c-u)-m-w;if(S<0)return s?Fn(oF||(oF=Ad(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,a,a,a*2,a,a,-a*2):RQ({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:u});var T=Fn(lF||(lF=Ad(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,a,a,+(f<0),h.x,h.y,i,i,+(S>180),+(f<0),b.x,b.y,a,a,+(f<0),x.x,x.y);if(r>0){var{circleTangency:I,lineTangency:N,theta:O}=Sx({cx:e,cy:n,radius:r,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:P,lineTangency:k,theta:D}=Sx({cx:e,cy:n,radius:r,angle:u,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),R=o?Math.abs(c-u):Math.abs(c-u)-O-D;if(R<0&&a===0)return"".concat(T,"L").concat(e,",").concat(n,"Z");T+=Fn(cF||(cF=Ad(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),k.x,k.y,a,a,+(f<0),P.x,P.y,r,r,+(R>180),+(f>0),I.x,I.y,a,a,+(f<0),N.x,N.y)}else T+=Fn(uF||(uF=Ad(["L",",","Z"])),e,n);return T},eke={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},MQ=t=>{var e=ei(t,eke),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f,className:h}=e;if(a<i||u===f)return null;var g=Qt("recharts-sector",h),m=a-i,b=ui(s,m,0,!0),x;return b>0&&Math.abs(u-f)<360?x=JIe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(b,m/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f}):x=RQ({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f}),A.createElement("path",f2({},ya(e),{className:g,d:x}))};function tke(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(pX(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,c=hr(r,i,a,o),u=hr(r,i,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return NQ(e)}}var _I={},SI={},EI={},dF;function nke(){return dF||(dF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TX();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(EI)),EI}var fF;function rke(){return fF||(fF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nke();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(SI)),SI}var hF;function ike(){return hF||(hF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AX(),n=rke();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),s=s===void 0?i<a?1:-1:n.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=i,i+=s;return c}t.range=r})(_I)),_I}var TI,pF;function ake(){return pF||(pF=1,TI=ike().range),TI}var ske=ake();const jQ=Bl(ske);function ru(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function oke(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ZN(t){let e,n,r;t.length!==2?(e=ru,n=(o,c)=>ru(t(o),c),r=(o,c)=>t(o)-c):(e=t===ru||t===oke?t:lke,n=t,r=t);function i(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<0?u=h+1:f=h}while(u<f)}return u}function a(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<=0?u=h+1:f=h}while(u<f)}return u}function s(o,c,u=0,f=o.length){const h=i(o,c,u,f-1);return h>u&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function lke(){return 0}function zQ(t){return t===null?NaN:+t}function*cke(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const uke=ZN(ru),J0=uke.right;ZN(zQ).center;class gF extends Map{constructor(e,n=hke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(mF(this,e))}has(e){return super.has(mF(this,e))}set(e,n){return super.set(dke(this,e),n)}delete(e){return super.delete(fke(this,e))}}function mF({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function dke({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function fke({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function hke(t){return t!==null&&typeof t=="object"?t.valueOf():t}function pke(t=ru){if(t===ru)return LQ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function LQ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const gke=Math.sqrt(50),mke=Math.sqrt(10),vke=Math.sqrt(2);function zw(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=gke?10:a>=mke?5:a>=vke?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?zw(t,e,n*2):[o,c,u]}function h2(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?zw(e,t,n):zw(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function p2(t,e,n){return e=+e,t=+t,n=+n,zw(t,e,n)[2]}function g2(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?p2(e,t,n):p2(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function vF(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function yF(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function VQ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?LQ:pke(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,f=Math.log(c),h=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(e-u*h/c+g)),b=Math.min(r,Math.floor(e+(c-u)*h/c+g));VQ(t,e,m,b,i)}const a=t[e];let s=n,o=r;for(xm(t,n,e),i(t[r],a)>0&&xm(t,n,r);s<o;){for(xm(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?xm(t,n,o):(++o,xm(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function xm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function yke(t,e,n){if(t=Float64Array.from(cke(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return yF(t);if(e>=1)return vF(t);var r,i=(r-1)*e,a=Math.floor(i),s=vF(VQ(t,a).subarray(0,a+1)),o=yF(t.subarray(a+1));return s+(o-s)*(i-a)}}function bke(t,e,n=zQ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function xke(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function rs(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Hl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const m2=Symbol("implicit");function JN(){var t=new gF,e=[],n=[],r=m2;function i(a){let s=t.get(a);if(s===void 0){if(r!==m2)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new gF;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return JN(e,n).unknown(r)},rs.apply(i,arguments),i}function eR(){var t=JN().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,f=.5;delete t.unknown;function h(){var g=e().length,m=i<r,b=m?i:r,x=m?r:i;a=(x-b)/Math.max(1,g-c+u*2),o&&(a=Math.floor(a)),b+=(x-b-a*(g-c))*f,s=a*(1-c),o&&(b=Math.round(b),s=Math.round(s));var w=xke(g).map(function(S){return b+a*S});return n(m?w.reverse():w)}return t.domain=function(g){return arguments.length?(e(g),h()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(g){return arguments.length?(o=!!g,h()):o},t.padding=function(g){return arguments.length?(c=Math.min(1,u=+g),h()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),h()):c},t.paddingOuter=function(g){return arguments.length?(u=+g,h()):u},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),h()):f},t.copy=function(){return eR(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(f)},rs.apply(h(),arguments)}function BQ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return BQ(e())},t}function wke(){return BQ(eR.apply(null,arguments).paddingInner(1))}function tR(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function FQ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ey(){}var Jv=.7,Lw=1/Jv,Wh="\\s*([+-]?\\d+)\\s*",e0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",To="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_ke=/^#([0-9a-f]{3,8})$/,Ske=new RegExp(`^rgb\\(${Wh},${Wh},${Wh}\\)$`),Eke=new RegExp(`^rgb\\(${To},${To},${To}\\)$`),Tke=new RegExp(`^rgba\\(${Wh},${Wh},${Wh},${e0}\\)$`),Ake=new RegExp(`^rgba\\(${To},${To},${To},${e0}\\)$`),Cke=new RegExp(`^hsl\\(${e0},${To},${To}\\)$`),Ike=new RegExp(`^hsla\\(${e0},${To},${To},${e0}\\)$`),bF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tR(ey,t0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:xF,formatHex:xF,formatHex8:kke,formatHsl:Pke,formatRgb:wF,toString:wF});function xF(){return this.rgb().formatHex()}function kke(){return this.rgb().formatHex8()}function Pke(){return UQ(this).formatHsl()}function wF(){return this.rgb().formatRgb()}function t0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=_ke.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?_F(e):n===3?new Ui(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ex(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ex(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ske.exec(t))?new Ui(e[1],e[2],e[3],1):(e=Eke.exec(t))?new Ui(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Tke.exec(t))?Ex(e[1],e[2],e[3],e[4]):(e=Ake.exec(t))?Ex(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Cke.exec(t))?TF(e[1],e[2]/100,e[3]/100,1):(e=Ike.exec(t))?TF(e[1],e[2]/100,e[3]/100,e[4]):bF.hasOwnProperty(t)?_F(bF[t]):t==="transparent"?new Ui(NaN,NaN,NaN,0):null}function _F(t){return new Ui(t>>16&255,t>>8&255,t&255,1)}function Ex(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ui(t,e,n,r)}function Dke(t){return t instanceof ey||(t=t0(t)),t?(t=t.rgb(),new Ui(t.r,t.g,t.b,t.opacity)):new Ui}function v2(t,e,n,r){return arguments.length===1?Dke(t):new Ui(t,e,n,r??1)}function Ui(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}tR(Ui,v2,FQ(ey,{brighter(t){return t=t==null?Lw:Math.pow(Lw,t),new Ui(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Jv:Math.pow(Jv,t),new Ui(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ui(Ld(this.r),Ld(this.g),Ld(this.b),Vw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:SF,formatHex:SF,formatHex8:Oke,formatRgb:EF,toString:EF}));function SF(){return`#${Cd(this.r)}${Cd(this.g)}${Cd(this.b)}`}function Oke(){return`#${Cd(this.r)}${Cd(this.g)}${Cd(this.b)}${Cd((isNaN(this.opacity)?1:this.opacity)*255)}`}function EF(){const t=Vw(this.opacity);return`${t===1?"rgb(":"rgba("}${Ld(this.r)}, ${Ld(this.g)}, ${Ld(this.b)}${t===1?")":`, ${t})`}`}function Vw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ld(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Cd(t){return t=Ld(t),(t<16?"0":"")+t.toString(16)}function TF(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Es(t,e,n,r)}function UQ(t){if(t instanceof Es)return new Es(t.h,t.s,t.l,t.opacity);if(t instanceof ey||(t=t0(t)),!t)return new Es;if(t instanceof Es)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Es(s,o,c,t.opacity)}function Nke(t,e,n,r){return arguments.length===1?UQ(t):new Es(t,e,n,r??1)}function Es(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}tR(Es,Nke,FQ(ey,{brighter(t){return t=t==null?Lw:Math.pow(Lw,t),new Es(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Jv:Math.pow(Jv,t),new Es(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ui(AI(t>=240?t-240:t+120,i,r),AI(t,i,r),AI(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Es(AF(this.h),Tx(this.s),Tx(this.l),Vw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Vw(this.opacity);return`${t===1?"hsl(":"hsla("}${AF(this.h)}, ${Tx(this.s)*100}%, ${Tx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function AF(t){return t=(t||0)%360,t<0?t+360:t}function Tx(t){return Math.max(0,Math.min(1,t||0))}function AI(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const nR=t=>()=>t;function Rke(t,e){return function(n){return t+n*e}}function Mke(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function jke(t){return(t=+t)==1?$Q:function(e,n){return n-e?Mke(e,n,t):nR(isNaN(e)?n:e)}}function $Q(t,e){var n=e-t;return n?Rke(t,n):nR(isNaN(t)?e:t)}const CF=(function t(e){var n=jke(e);function r(i,a){var s=n((i=v2(i)).r,(a=v2(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=$Q(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function zke(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Lke(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Vke(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Jp(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Bke(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Bw(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Fke(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Jp(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var y2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,CI=new RegExp(y2.source,"g");function Uke(t){return function(){return t}}function $ke(t){return function(e){return t(e)+""}}function qke(t,e){var n=y2.lastIndex=CI.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=y2.exec(t))&&(i=CI.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Bw(r,i)})),n=CI.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?$ke(c[0].x):Uke(e):(e=c.length,function(u){for(var f=0,h;f<e;++f)o[(h=c[f]).i]=h.x(u);return o.join("")})}function Jp(t,e){var n=typeof e,r;return e==null||n==="boolean"?nR(e):(n==="number"?Bw:n==="string"?(r=t0(e))?(e=r,CF):qke:e instanceof t0?CF:e instanceof Date?Bke:Lke(e)?zke:Array.isArray(e)?Vke:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Fke:Bw)(t,e)}function rR(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Gke(t,e){e===void 0&&(e=t,t=Jp);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function Hke(t){return function(){return t}}function Fw(t){return+t}var IF=[0,1];function Ei(t){return t}function b2(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Hke(isNaN(e)?NaN:.5)}function Kke(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Wke(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=b2(i,r),a=n(s,a)):(r=b2(r,i),a=n(a,s)),function(o){return a(r(o))}}function Yke(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=b2(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=J0(t,o,1,r)-1;return a[c](i[c](o))}}function ty(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function jS(){var t=IF,e=IF,n=Jp,r,i,a,s=Ei,o,c,u;function f(){var g=Math.min(t.length,e.length);return s!==Ei&&(s=Kke(t[0],t[g-1])),o=g>2?Yke:Wke,c=u=null,h}function h(g){return g==null||isNaN(g=+g)?a:(c||(c=o(t.map(r),e,n)))(r(s(g)))}return h.invert=function(g){return s(i((u||(u=o(e,t.map(r),Bw)))(g)))},h.domain=function(g){return arguments.length?(t=Array.from(g,Fw),f()):t.slice()},h.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},h.rangeRound=function(g){return e=Array.from(g),n=rR,f()},h.clamp=function(g){return arguments.length?(s=g?!0:Ei,f()):s!==Ei},h.interpolate=function(g){return arguments.length?(n=g,f()):n},h.unknown=function(g){return arguments.length?(a=g,h):a},function(g,m){return r=g,i=m,f()}}function iR(){return jS()(Ei,Ei)}function Xke(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Uw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Cp(t){return t=Uw(Math.abs(t)),t?t[1]:NaN}function Qke(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Zke(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Jke=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n0(t){if(!(e=Jke.exec(t)))throw new Error("invalid format: "+t);var e;return new aR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}n0.prototype=aR.prototype;function aR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}aR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ePe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var qQ;function tPe(t,e){var n=Uw(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(qQ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Uw(t,Math.max(0,e+a-1))[0]}function kF(t,e){var n=Uw(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const PF={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Xke,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>kF(t*100,e),r:kF,s:tPe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function DF(t){return t}var OF=Array.prototype.map,NF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function nPe(t){var e=t.grouping===void 0||t.thousands===void 0?DF:Qke(OF.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?DF:Zke(OF.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=n0(h);var g=h.fill,m=h.align,b=h.sign,x=h.symbol,w=h.zero,S=h.width,T=h.comma,I=h.precision,N=h.trim,O=h.type;O==="n"?(T=!0,O="g"):PF[O]||(I===void 0&&(I=12),N=!0,O="g"),(w||g==="0"&&m==="=")&&(w=!0,g="0",m="=");var P=x==="$"?n:x==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",k=x==="$"?r:/[%p]/.test(O)?s:"",D=PF[O],R=/[defgprs%]/.test(O);I=I===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function z(L){var B=P,j=k,H,X,q;if(O==="c")j=D(L)+j,L="";else{L=+L;var W=L<0||1/L<0;if(L=isNaN(L)?c:D(Math.abs(L),I),N&&(L=ePe(L)),W&&+L==0&&b!=="+"&&(W=!1),B=(W?b==="("?b:o:b==="-"||b==="("?"":b)+B,j=(O==="s"?NF[8+qQ/3]:"")+j+(W&&b==="("?")":""),R){for(H=-1,X=L.length;++H<X;)if(q=L.charCodeAt(H),48>q||q>57){j=(q===46?i+L.slice(H+1):L.slice(H))+j,L=L.slice(0,H);break}}}T&&!w&&(L=e(L,1/0));var J=B.length+L.length+j.length,ne=J<S?new Array(S-J+1).join(g):"";switch(T&&w&&(L=e(ne+L,ne.length?S-j.length:1/0),ne=""),m){case"<":L=B+L+j+ne;break;case"=":L=B+ne+L+j;break;case"^":L=ne.slice(0,J=ne.length>>1)+B+L+j+ne.slice(J);break;default:L=ne+B+L+j;break}return a(L)}return z.toString=function(){return h+""},z}function f(h,g){var m=u((h=n0(h),h.type="f",h)),b=Math.max(-8,Math.min(8,Math.floor(Cp(g)/3)))*3,x=Math.pow(10,-b),w=NF[8+b/3];return function(S){return m(x*S)+w}}return{format:u,formatPrefix:f}}var Ax,sR,GQ;rPe({thousands:",",grouping:[3],currency:["$",""]});function rPe(t){return Ax=nPe(t),sR=Ax.format,GQ=Ax.formatPrefix,Ax}function iPe(t){return Math.max(0,-Cp(Math.abs(t)))}function aPe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Cp(e)/3)))*3-Cp(Math.abs(t)))}function sPe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Cp(e)-Cp(t))+1}function HQ(t,e,n,r){var i=g2(t,e,n),a;switch(r=n0(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=aPe(i,s))&&(r.precision=a),GQ(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=sPe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=iPe(i))&&(r.precision=a-(r.type==="%")*2);break}}return sR(r)}function Cu(t){var e=t.domain;return t.ticks=function(n){var r=e();return h2(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return HQ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,f=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=p2(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function KQ(){var t=iR();return t.copy=function(){return ty(t,KQ())},rs.apply(t,arguments),Cu(t)}function WQ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Fw),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return WQ(t).unknown(e)},t=arguments.length?Array.from(t,Fw):[0,1],Cu(n)}function YQ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function RF(t){return Math.log(t)}function MF(t){return Math.exp(t)}function oPe(t){return-Math.log(-t)}function lPe(t){return-Math.exp(-t)}function cPe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function uPe(t){return t===10?cPe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function dPe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function jF(t){return(e,n)=>-t(-e,n)}function oR(t){const e=t(RF,MF),n=e.domain;let r=10,i,a;function s(){return i=dPe(r),a=uPe(r),n()[0]<0?(i=jF(i),a=jF(a),t(oPe,lPe)):t(RF,MF),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],f=c[c.length-1];const h=f<u;h&&([u,f]=[f,u]);let g=i(u),m=i(f),b,x;const w=o==null?10:+o;let S=[];if(!(r%1)&&m-g<w){if(g=Math.floor(g),m=Math.ceil(m),u>0){for(;g<=m;++g)for(b=1;b<r;++b)if(x=g<0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}}else for(;g<=m;++g)for(b=r-1;b>=1;--b)if(x=g>0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}S.length*2<w&&(S=h2(u,f,w))}else S=h2(g,m,Math.min(m-g,w)).map(a);return h?S.reverse():S},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=n0(c)).precision==null&&(c.trim=!0),c=sR(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?c(f):""}},e.nice=()=>n(YQ(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function XQ(){const t=oR(jS()).domain([1,10]);return t.copy=()=>ty(t,XQ()).base(t.base()),rs.apply(t,arguments),t}function zF(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function LF(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function lR(t){var e=1,n=t(zF(e),LF(e));return n.constant=function(r){return arguments.length?t(zF(e=+r),LF(e)):e},Cu(n)}function QQ(){var t=lR(jS());return t.copy=function(){return ty(t,QQ()).constant(t.constant())},rs.apply(t,arguments)}function VF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function fPe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function hPe(t){return t<0?-t*t:t*t}function cR(t){var e=t(Ei,Ei),n=1;function r(){return n===1?t(Ei,Ei):n===.5?t(fPe,hPe):t(VF(n),VF(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Cu(e)}function uR(){var t=cR(jS());return t.copy=function(){return ty(t,uR()).exponent(t.exponent())},rs.apply(t,arguments),t}function pPe(){return uR.apply(null,arguments).exponent(.5)}function BF(t){return Math.sign(t)*t*t}function gPe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function ZQ(){var t=iR(),e=[0,1],n=!1,r;function i(a){var s=gPe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(BF(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Fw)).map(BF)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return ZQ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},rs.apply(i,arguments),Cu(i)}function JQ(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=bke(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[J0(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(ru),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return JQ().domain(t).range(e).unknown(r)},rs.apply(a,arguments)}function eZ(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[J0(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return eZ().domain([t,e]).range(i).unknown(a)},rs.apply(Cu(s),arguments)}function tZ(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[J0(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return tZ().domain(t).range(e).unknown(n)},rs.apply(i,arguments)}const II=new Date,kI=new Date;function Ir(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>Ir(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(II.setTime(+a),kI.setTime(+s),t(II),t(kI),Math.floor(n(II,kI))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const $w=Ir(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);$w.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ir(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):$w);$w.range;const hl=1e3,qa=hl*60,pl=qa*60,Ml=pl*24,dR=Ml*7,FF=Ml*30,PI=Ml*365,Id=Ir(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*hl)},(t,e)=>(e-t)/hl,t=>t.getUTCSeconds());Id.range;const fR=Ir(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*hl)},(t,e)=>{t.setTime(+t+e*qa)},(t,e)=>(e-t)/qa,t=>t.getMinutes());fR.range;const hR=Ir(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*qa)},(t,e)=>(e-t)/qa,t=>t.getUTCMinutes());hR.range;const pR=Ir(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*hl-t.getMinutes()*qa)},(t,e)=>{t.setTime(+t+e*pl)},(t,e)=>(e-t)/pl,t=>t.getHours());pR.range;const gR=Ir(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*pl)},(t,e)=>(e-t)/pl,t=>t.getUTCHours());gR.range;const ny=Ir(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*qa)/Ml,t=>t.getDate()-1);ny.range;const zS=Ir(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ml,t=>t.getUTCDate()-1);zS.range;const nZ=Ir(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ml,t=>Math.floor(t/Ml));nZ.range;function yf(t){return Ir(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*qa)/dR)}const LS=yf(0),qw=yf(1),mPe=yf(2),vPe=yf(3),Ip=yf(4),yPe=yf(5),bPe=yf(6);LS.range;qw.range;mPe.range;vPe.range;Ip.range;yPe.range;bPe.range;function bf(t){return Ir(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/dR)}const VS=bf(0),Gw=bf(1),xPe=bf(2),wPe=bf(3),kp=bf(4),_Pe=bf(5),SPe=bf(6);VS.range;Gw.range;xPe.range;wPe.range;kp.range;_Pe.range;SPe.range;const mR=Ir(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());mR.range;const vR=Ir(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());vR.range;const jl=Ir(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());jl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ir(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});jl.range;const zl=Ir(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());zl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ir(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});zl.range;function rZ(t,e,n,r,i,a){const s=[[Id,1,hl],[Id,5,5*hl],[Id,15,15*hl],[Id,30,30*hl],[a,1,qa],[a,5,5*qa],[a,15,15*qa],[a,30,30*qa],[i,1,pl],[i,3,3*pl],[i,6,6*pl],[i,12,12*pl],[r,1,Ml],[r,2,2*Ml],[n,1,dR],[e,1,FF],[e,3,3*FF],[t,1,PI]];function o(u,f,h){const g=f<u;g&&([u,f]=[f,u]);const m=h&&typeof h.range=="function"?h:c(u,f,h),b=m?m.range(u,+f+1):[];return g?b.reverse():b}function c(u,f,h){const g=Math.abs(f-u)/h,m=ZN(([,,w])=>w).right(s,g);if(m===s.length)return t.every(g2(u/PI,f/PI,h));if(m===0)return $w.every(Math.max(g2(u,f,h),1));const[b,x]=s[g/s[m-1][2]<s[m][2]/g?m-1:m];return b.every(x)}return[o,c]}const[EPe,TPe]=rZ(zl,vR,VS,nZ,gR,hR),[APe,CPe]=rZ(jl,mR,LS,ny,pR,fR);function DI(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function OI(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function wm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function IPe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=_m(i),f=Sm(i),h=_m(a),g=Sm(a),m=_m(s),b=Sm(s),x=_m(o),w=Sm(o),S=_m(c),T=Sm(c),I={a:W,A:J,b:ne,B:Y,c:null,d:KF,e:KF,f:QPe,g:o2e,G:c2e,H:WPe,I:YPe,j:XPe,L:iZ,m:ZPe,M:JPe,p:U,q:Q,Q:XF,s:QF,S:e2e,u:t2e,U:n2e,V:r2e,w:i2e,W:a2e,x:null,X:null,y:s2e,Y:l2e,Z:u2e,"%":YF},N={a:K,A:Z,b:le,B:de,c:null,d:WF,e:WF,f:p2e,g:E2e,G:A2e,H:d2e,I:f2e,j:h2e,L:sZ,m:g2e,M:m2e,p:ce,q:he,Q:XF,s:QF,S:v2e,u:y2e,U:b2e,V:x2e,w:w2e,W:_2e,x:null,X:null,y:S2e,Y:T2e,Z:C2e,"%":YF},O={a:z,A:L,b:B,B:j,c:H,d:GF,e:GF,f:qPe,g:qF,G:$F,H:HF,I:HF,j:BPe,L:$Pe,m:VPe,M:FPe,p:R,q:LPe,Q:HPe,s:KPe,S:UPe,u:NPe,U:RPe,V:MPe,w:OPe,W:jPe,x:X,X:q,y:qF,Y:$F,Z:zPe,"%":GPe};I.x=P(n,I),I.X=P(r,I),I.c=P(e,I),N.x=P(n,N),N.X=P(r,N),N.c=P(e,N);function P(ee,Se){return function(re){var oe=[],De=-1,Pe=0,ze=ee.length,je,Ue,Ie;for(re instanceof Date||(re=new Date(+re));++De<ze;)ee.charCodeAt(De)===37&&(oe.push(ee.slice(Pe,De)),(Ue=UF[je=ee.charAt(++De)])!=null?je=ee.charAt(++De):Ue=je==="e"?" ":"0",(Ie=Se[je])&&(je=Ie(re,Ue)),oe.push(je),Pe=De+1);return oe.push(ee.slice(Pe,De)),oe.join("")}}function k(ee,Se){return function(re){var oe=wm(1900,void 0,1),De=D(oe,ee,re+="",0),Pe,ze;if(De!=re.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(Se&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(Pe=OI(wm(oe.y,0,1)),ze=Pe.getUTCDay(),Pe=ze>4||ze===0?Gw.ceil(Pe):Gw(Pe),Pe=zS.offset(Pe,(oe.V-1)*7),oe.y=Pe.getUTCFullYear(),oe.m=Pe.getUTCMonth(),oe.d=Pe.getUTCDate()+(oe.w+6)%7):(Pe=DI(wm(oe.y,0,1)),ze=Pe.getDay(),Pe=ze>4||ze===0?qw.ceil(Pe):qw(Pe),Pe=ny.offset(Pe,(oe.V-1)*7),oe.y=Pe.getFullYear(),oe.m=Pe.getMonth(),oe.d=Pe.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),ze="Z"in oe?OI(wm(oe.y,0,1)).getUTCDay():DI(wm(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(ze+5)%7:oe.w+oe.U*7-(ze+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,OI(oe)):DI(oe)}}function D(ee,Se,re,oe){for(var De=0,Pe=Se.length,ze=re.length,je,Ue;De<Pe;){if(oe>=ze)return-1;if(je=Se.charCodeAt(De++),je===37){if(je=Se.charAt(De++),Ue=O[je in UF?Se.charAt(De++):je],!Ue||(oe=Ue(ee,re,oe))<0)return-1}else if(je!=re.charCodeAt(oe++))return-1}return oe}function R(ee,Se,re){var oe=u.exec(Se.slice(re));return oe?(ee.p=f.get(oe[0].toLowerCase()),re+oe[0].length):-1}function z(ee,Se,re){var oe=m.exec(Se.slice(re));return oe?(ee.w=b.get(oe[0].toLowerCase()),re+oe[0].length):-1}function L(ee,Se,re){var oe=h.exec(Se.slice(re));return oe?(ee.w=g.get(oe[0].toLowerCase()),re+oe[0].length):-1}function B(ee,Se,re){var oe=S.exec(Se.slice(re));return oe?(ee.m=T.get(oe[0].toLowerCase()),re+oe[0].length):-1}function j(ee,Se,re){var oe=x.exec(Se.slice(re));return oe?(ee.m=w.get(oe[0].toLowerCase()),re+oe[0].length):-1}function H(ee,Se,re){return D(ee,e,Se,re)}function X(ee,Se,re){return D(ee,n,Se,re)}function q(ee,Se,re){return D(ee,r,Se,re)}function W(ee){return s[ee.getDay()]}function J(ee){return a[ee.getDay()]}function ne(ee){return c[ee.getMonth()]}function Y(ee){return o[ee.getMonth()]}function U(ee){return i[+(ee.getHours()>=12)]}function Q(ee){return 1+~~(ee.getMonth()/3)}function K(ee){return s[ee.getUTCDay()]}function Z(ee){return a[ee.getUTCDay()]}function le(ee){return c[ee.getUTCMonth()]}function de(ee){return o[ee.getUTCMonth()]}function ce(ee){return i[+(ee.getUTCHours()>=12)]}function he(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var Se=P(ee+="",I);return Se.toString=function(){return ee},Se},parse:function(ee){var Se=k(ee+="",!1);return Se.toString=function(){return ee},Se},utcFormat:function(ee){var Se=P(ee+="",N);return Se.toString=function(){return ee},Se},utcParse:function(ee){var Se=k(ee+="",!0);return Se.toString=function(){return ee},Se}}}var UF={"-":"",_:" ",0:"0"},Fr=/^\s*\d+/,kPe=/^%/,PPe=/[\\^$*+?|[\]().{}]/g;function zt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function DPe(t){return t.replace(PPe,"\\$&")}function _m(t){return new RegExp("^(?:"+t.map(DPe).join("|")+")","i")}function Sm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function OPe(t,e,n){var r=Fr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function NPe(t,e,n){var r=Fr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function RPe(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function MPe(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function jPe(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function $F(t,e,n){var r=Fr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function qF(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function zPe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function LPe(t,e,n){var r=Fr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function VPe(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function GF(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function BPe(t,e,n){var r=Fr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function HF(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function FPe(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function UPe(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function $Pe(t,e,n){var r=Fr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function qPe(t,e,n){var r=Fr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function GPe(t,e,n){var r=kPe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function HPe(t,e,n){var r=Fr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function KPe(t,e,n){var r=Fr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function KF(t,e){return zt(t.getDate(),e,2)}function WPe(t,e){return zt(t.getHours(),e,2)}function YPe(t,e){return zt(t.getHours()%12||12,e,2)}function XPe(t,e){return zt(1+ny.count(jl(t),t),e,3)}function iZ(t,e){return zt(t.getMilliseconds(),e,3)}function QPe(t,e){return iZ(t,e)+"000"}function ZPe(t,e){return zt(t.getMonth()+1,e,2)}function JPe(t,e){return zt(t.getMinutes(),e,2)}function e2e(t,e){return zt(t.getSeconds(),e,2)}function t2e(t){var e=t.getDay();return e===0?7:e}function n2e(t,e){return zt(LS.count(jl(t)-1,t),e,2)}function aZ(t){var e=t.getDay();return e>=4||e===0?Ip(t):Ip.ceil(t)}function r2e(t,e){return t=aZ(t),zt(Ip.count(jl(t),t)+(jl(t).getDay()===4),e,2)}function i2e(t){return t.getDay()}function a2e(t,e){return zt(qw.count(jl(t)-1,t),e,2)}function s2e(t,e){return zt(t.getFullYear()%100,e,2)}function o2e(t,e){return t=aZ(t),zt(t.getFullYear()%100,e,2)}function l2e(t,e){return zt(t.getFullYear()%1e4,e,4)}function c2e(t,e){var n=t.getDay();return t=n>=4||n===0?Ip(t):Ip.ceil(t),zt(t.getFullYear()%1e4,e,4)}function u2e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+zt(e/60|0,"0",2)+zt(e%60,"0",2)}function WF(t,e){return zt(t.getUTCDate(),e,2)}function d2e(t,e){return zt(t.getUTCHours(),e,2)}function f2e(t,e){return zt(t.getUTCHours()%12||12,e,2)}function h2e(t,e){return zt(1+zS.count(zl(t),t),e,3)}function sZ(t,e){return zt(t.getUTCMilliseconds(),e,3)}function p2e(t,e){return sZ(t,e)+"000"}function g2e(t,e){return zt(t.getUTCMonth()+1,e,2)}function m2e(t,e){return zt(t.getUTCMinutes(),e,2)}function v2e(t,e){return zt(t.getUTCSeconds(),e,2)}function y2e(t){var e=t.getUTCDay();return e===0?7:e}function b2e(t,e){return zt(VS.count(zl(t)-1,t),e,2)}function oZ(t){var e=t.getUTCDay();return e>=4||e===0?kp(t):kp.ceil(t)}function x2e(t,e){return t=oZ(t),zt(kp.count(zl(t),t)+(zl(t).getUTCDay()===4),e,2)}function w2e(t){return t.getUTCDay()}function _2e(t,e){return zt(Gw.count(zl(t)-1,t),e,2)}function S2e(t,e){return zt(t.getUTCFullYear()%100,e,2)}function E2e(t,e){return t=oZ(t),zt(t.getUTCFullYear()%100,e,2)}function T2e(t,e){return zt(t.getUTCFullYear()%1e4,e,4)}function A2e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?kp(t):kp.ceil(t),zt(t.getUTCFullYear()%1e4,e,4)}function C2e(){return"+0000"}function YF(){return"%"}function XF(t){return+t}function QF(t){return Math.floor(+t/1e3)}var gh,lZ,cZ;I2e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function I2e(t){return gh=IPe(t),lZ=gh.format,gh.parse,cZ=gh.utcFormat,gh.utcParse,gh}function k2e(t){return new Date(t)}function P2e(t){return t instanceof Date?+t:+new Date(+t)}function yR(t,e,n,r,i,a,s,o,c,u){var f=iR(),h=f.invert,g=f.domain,m=u(".%L"),b=u(":%S"),x=u("%I:%M"),w=u("%I %p"),S=u("%a %d"),T=u("%b %d"),I=u("%B"),N=u("%Y");function O(P){return(c(P)<P?m:o(P)<P?b:s(P)<P?x:a(P)<P?w:r(P)<P?i(P)<P?S:T:n(P)<P?I:N)(P)}return f.invert=function(P){return new Date(h(P))},f.domain=function(P){return arguments.length?g(Array.from(P,P2e)):g().map(k2e)},f.ticks=function(P){var k=g();return t(k[0],k[k.length-1],P??10)},f.tickFormat=function(P,k){return k==null?O:u(k)},f.nice=function(P){var k=g();return(!P||typeof P.range!="function")&&(P=e(k[0],k[k.length-1],P??10)),P?g(YQ(k,P)):f},f.copy=function(){return ty(f,yR(t,e,n,r,i,a,s,o,c,u))},f}function D2e(){return rs.apply(yR(APe,CPe,jl,mR,LS,ny,pR,fR,Id,lZ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function O2e(){return rs.apply(yR(EPe,TPe,zl,vR,VS,zS,gR,hR,Id,cZ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function BS(){var t=0,e=1,n,r,i,a,s=Ei,o=!1,c;function u(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function f(h){return function(g){var m,b;return arguments.length?([m,b]=g,s=h(m,b),u):[s(0),s(1)]}}return u.range=f(Jp),u.rangeRound=f(rR),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function Iu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function uZ(){var t=Cu(BS()(Ei));return t.copy=function(){return Iu(t,uZ())},Hl.apply(t,arguments)}function dZ(){var t=oR(BS()).domain([1,10]);return t.copy=function(){return Iu(t,dZ()).base(t.base())},Hl.apply(t,arguments)}function fZ(){var t=lR(BS());return t.copy=function(){return Iu(t,fZ()).constant(t.constant())},Hl.apply(t,arguments)}function bR(){var t=cR(BS());return t.copy=function(){return Iu(t,bR()).exponent(t.exponent())},Hl.apply(t,arguments)}function N2e(){return bR.apply(null,arguments).exponent(.5)}function hZ(){var t=[],e=Ei;function n(r){if(r!=null&&!isNaN(r=+r))return e((J0(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ru),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>yke(t,a/r))},n.copy=function(){return hZ(e).domain(t)},Hl.apply(n,arguments)}function FS(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=Ei,f,h=!1,g;function m(x){return isNaN(x=+x)?g:(x=.5+((x=+f(x))-a)*(r*x<r*a?o:c),u(h?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([t,e,n]=x,i=f(t=+t),a=f(e=+e),s=f(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,m):[t,e,n]},m.clamp=function(x){return arguments.length?(h=!!x,m):h},m.interpolator=function(x){return arguments.length?(u=x,m):u};function b(x){return function(w){var S,T,I;return arguments.length?([S,T,I]=w,u=Gke(x,[S,T,I]),m):[u(0),u(.5),u(1)]}}return m.range=b(Jp),m.rangeRound=b(rR),m.unknown=function(x){return arguments.length?(g=x,m):g},function(x){return f=x,i=x(t),a=x(e),s=x(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,m}}function pZ(){var t=Cu(FS()(Ei));return t.copy=function(){return Iu(t,pZ())},Hl.apply(t,arguments)}function gZ(){var t=oR(FS()).domain([.1,1,10]);return t.copy=function(){return Iu(t,gZ()).base(t.base())},Hl.apply(t,arguments)}function mZ(){var t=lR(FS());return t.copy=function(){return Iu(t,mZ()).constant(t.constant())},Hl.apply(t,arguments)}function xR(){var t=cR(FS());return t.copy=function(){return Iu(t,xR()).exponent(t.exponent())},Hl.apply(t,arguments)}function R2e(){return xR.apply(null,arguments).exponent(.5)}const Lm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:eR,scaleDiverging:pZ,scaleDivergingLog:gZ,scaleDivergingPow:xR,scaleDivergingSqrt:R2e,scaleDivergingSymlog:mZ,scaleIdentity:WQ,scaleImplicit:m2,scaleLinear:KQ,scaleLog:XQ,scaleOrdinal:JN,scalePoint:wke,scalePow:uR,scaleQuantile:JQ,scaleQuantize:eZ,scaleRadial:ZQ,scaleSequential:uZ,scaleSequentialLog:dZ,scaleSequentialPow:bR,scaleSequentialQuantile:hZ,scaleSequentialSqrt:N2e,scaleSequentialSymlog:fZ,scaleSqrt:pPe,scaleSymlog:QQ,scaleThreshold:tZ,scaleTime:D2e,scaleUtc:O2e,tickFormat:HQ},Symbol.toStringTag,{value:"Module"}));var Kl=t=>t.chartData,US=ve([Kl],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),vZ=(t,e,n,r)=>r?US(t):Kl(t),M2e=(t,e,n)=>n?US(t):Kl(t);function mu(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(un(e)&&un(n))return!0}return!1}function ZF(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function yZ(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(un(n))i=n;else if(typeof n=="function")return;if(un(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(mu(s))return s}}function j2e(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(mu(r))return ZF(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(We(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&d9.test(i)){var c=d9.exec(i);if(c==null||c[1]==null||e==null)s=void 0;else{var u=+c[1];s=e[0]-u}}else s=e?.[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(We(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e?.[1]))}catch{}else if(typeof a=="string"&&f9.test(a)){var f=f9.exec(a);if(f==null||f[1]==null||e==null)o=void 0;else{var h=+f[1];o=e[1]+h}}else o=e?.[1];var g=[s,o];if(mu(g))return e==null?g:ZF(g,e,n)}}}var eg=1e9,z2e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},_R,In=!0,Ja="[DecimalError] ",Vd=Ja+"Invalid argument: ",wR=Ja+"Exponent out of range: ",tg=Math.floor,dd=Math.pow,L2e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,da,zr=1e7,mn=7,bZ=9007199254740991,Hw=tg(bZ/mn),Fe={};Fe.absoluteValue=Fe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Fe.comparedTo=Fe.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Fe.decimalPlaces=Fe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*mn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Fe.dividedBy=Fe.div=function(t){return xl(this,new this.constructor(t))};Fe.dividedToIntegerBy=Fe.idiv=function(t){var e=this,n=e.constructor;return dn(xl(e,new n(t),0,1),n.precision)};Fe.equals=Fe.eq=function(t){return!this.cmp(t)};Fe.exponent=function(){return pr(this)};Fe.greaterThan=Fe.gt=function(t){return this.cmp(t)>0};Fe.greaterThanOrEqualTo=Fe.gte=function(t){return this.cmp(t)>=0};Fe.isInteger=Fe.isint=function(){return this.e>this.d.length-2};Fe.isNegative=Fe.isneg=function(){return this.s<0};Fe.isPositive=Fe.ispos=function(){return this.s>0};Fe.isZero=function(){return this.s===0};Fe.lessThan=Fe.lt=function(t){return this.cmp(t)<0};Fe.lessThanOrEqualTo=Fe.lte=function(t){return this.cmp(t)<1};Fe.logarithm=Fe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(da))throw Error(Ja+"NaN");if(n.s<1)throw Error(Ja+(n.s?"NaN":"-Infinity"));return n.eq(da)?new r(0):(In=!1,e=xl(r0(n,a),r0(t,a),a),In=!0,dn(e,i))};Fe.minus=Fe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?_Z(e,t):xZ(e,(t.s=-t.s,t))};Fe.modulo=Fe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ja+"NaN");return n.s?(In=!1,e=xl(n,t,0,1).times(t),In=!0,n.minus(e)):dn(new r(n),i)};Fe.naturalExponential=Fe.exp=function(){return wZ(this)};Fe.naturalLogarithm=Fe.ln=function(){return r0(this)};Fe.negated=Fe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Fe.plus=Fe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?xZ(e,t):_Z(e,(t.s=-t.s,t))};Fe.precision=Fe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Vd+t);if(e=pr(i)+1,r=i.d.length-1,n=r*mn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Fe.squareRoot=Fe.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Ja+"NaN")}for(t=pr(o),In=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=mo(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=tg((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(xl(o,a,s+2)).times(.5),mo(a.d).slice(0,s)===(e=mo(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(dn(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return In=!0,dn(r,n)};Fe.times=Fe.mul=function(t){var e,n,r,i,a,s,o,c,u,f=this,h=f.constructor,g=f.d,m=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,u=m.length,c<u&&(a=g,g=m,m=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+m[r]*g[i-r-1]+e,a[i--]=o%zr|0,e=o/zr|0;a[i]=(a[i]+e)%zr|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,In?dn(t,h.precision):t};Fe.toDecimalPlaces=Fe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Oo(t,0,eg),e===void 0?e=r.rounding:Oo(e,0,8),dn(n,t+pr(n)+1,e))};Fe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=sf(r,!0):(Oo(t,0,eg),e===void 0?e=i.rounding:Oo(e,0,8),r=dn(new i(r),t+1,e),n=sf(r,!0,t+1)),n};Fe.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?sf(i):(Oo(t,0,eg),e===void 0?e=a.rounding:Oo(e,0,8),r=dn(new a(i),t+pr(i)+1,e),n=sf(r.abs(),!1,t+pr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Fe.toInteger=Fe.toint=function(){var t=this,e=t.constructor;return dn(new e(t),pr(t)+1,e.rounding)};Fe.toNumber=function(){return+this};Fe.toPower=Fe.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,f=+(t=new c(t));if(!t.s)return new c(da);if(o=new c(o),!o.s){if(t.s<1)throw Error(Ja+"Infinity");return o}if(o.eq(da))return o;if(r=c.precision,t.eq(da))return dn(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=f<0?-f:f)<=bZ){for(i=new c(da),e=Math.ceil(r/mn+4),In=!1;n%2&&(i=i.times(o),eU(i.d,e)),n=tg(n/2),n!==0;)o=o.times(o),eU(o.d,e);return In=!0,t.s<0?new c(da).div(i):dn(i,r)}}else if(a<0)throw Error(Ja+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,In=!1,i=t.times(r0(o,r+u)),In=!0,i=wZ(i),i.s=a,i};Fe.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=pr(i),r=sf(i,n<=a.toExpNeg||n>=a.toExpPos)):(Oo(t,1,eg),e===void 0?e=a.rounding:Oo(e,0,8),i=dn(new a(i),t,e),n=pr(i),r=sf(i,t<=n||n<=a.toExpNeg,t)),r};Fe.toSignificantDigits=Fe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Oo(t,1,eg),e===void 0?e=r.rounding:Oo(e,0,8)),dn(new r(n),t,e)};Fe.toString=Fe.valueOf=Fe.val=Fe.toJSON=Fe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=pr(t),n=t.constructor;return sf(t,e<=n.toExpNeg||e>=n.toExpPos)};function xZ(t,e){var n,r,i,a,s,o,c,u,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),In?dn(e,h):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(h/mn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/zr|0,c[a]%=zr;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,In?dn(e,h):e}function Oo(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Vd+t)}function mo(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=mn-r.length,n&&(a+=Mc(n)),a+=r;s=t[e],r=s+"",n=mn-r.length,n&&(a+=Mc(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var xl=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%zr|0,s=a/zr|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*zr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,f,h,g,m,b,x,w,S,T,I,N,O,P,k,D,R=r.constructor,z=r.s==i.s?1:-1,L=r.d,B=i.d;if(!r.s)return new R(r);if(!i.s)throw Error(Ja+"Division by zero");for(c=r.e-i.e,k=B.length,O=L.length,m=new R(z),b=m.d=[],u=0;B[u]==(L[u]||0);)++u;if(B[u]>(L[u]||0)&&--c,a==null?T=a=R.precision:s?T=a+(pr(r)-pr(i))+1:T=a,T<0)return new R(0);if(T=T/mn+2|0,u=0,k==1)for(f=0,B=B[0],T++;(u<O||f)&&T--;u++)I=f*zr+(L[u]||0),b[u]=I/B|0,f=I%B|0;else{for(f=zr/(B[0]+1)|0,f>1&&(B=t(B,f),L=t(L,f),k=B.length,O=L.length),N=k,x=L.slice(0,k),w=x.length;w<k;)x[w++]=0;D=B.slice(),D.unshift(0),P=B[0],B[1]>=zr/2&&++P;do f=0,o=e(B,x,k,w),o<0?(S=x[0],k!=w&&(S=S*zr+(x[1]||0)),f=S/P|0,f>1?(f>=zr&&(f=zr-1),h=t(B,f),g=h.length,w=x.length,o=e(h,x,g,w),o==1&&(f--,n(h,k<g?D:B,g))):(f==0&&(o=f=1),h=B.slice()),g=h.length,g<w&&h.unshift(0),n(x,h,w),o==-1&&(w=x.length,o=e(B,x,k,w),o<1&&(f++,n(x,k<w?D:B,w))),w=x.length):o===0&&(f++,x=[0]),b[u++]=f,o&&x[0]?x[w++]=L[N]||0:(x=[L[N]],w=1);while((N++<O||x[0]!==void 0)&&T--)}return b[0]||b.shift(),m.e=c,dn(m,s?a+pr(m)+1:a)}})();function wZ(t,e){var n,r,i,a,s,o,c=0,u=0,f=t.constructor,h=f.precision;if(pr(t)>16)throw Error(wR+pr(t));if(!t.s)return new f(da);for(In=!1,o=h,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(dd(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new f(da),f.precision=o;;){if(i=dn(i.times(t),o),n=n.times(++c),s=a.plus(xl(i,n,o)),mo(s.d).slice(0,o)===mo(a.d).slice(0,o)){for(;u--;)a=dn(a.times(a),o);return f.precision=h,e==null?(In=!0,dn(a,h)):a}a=s}}function pr(t){for(var e=t.e*mn,n=t.d[0];n>=10;n/=10)e++;return e}function NI(t,e,n){if(e>t.LN10.sd())throw In=!0,n&&(t.precision=n),Error(Ja+"LN10 precision limit exceeded");return dn(new t(t.LN10),e)}function Mc(t){for(var e="";t--;)e+="0";return e}function r0(t,e){var n,r,i,a,s,o,c,u,f,h=1,g=10,m=t,b=m.d,x=m.constructor,w=x.precision;if(m.s<1)throw Error(Ja+(m.s?"NaN":"-Infinity"));if(m.eq(da))return new x(0);if(e==null?(In=!1,u=w):u=e,m.eq(10))return e==null&&(In=!0),NI(x,u);if(u+=g,x.precision=u,n=mo(b),r=n.charAt(0),a=pr(m),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=mo(m.d),r=n.charAt(0),h++;a=pr(m),r>1?(m=new x("0."+n),a++):m=new x(r+"."+n.slice(1))}else return c=NI(x,u+2,w).times(a+""),m=r0(new x(r+"."+n.slice(1)),u-g).plus(c),x.precision=w,e==null?(In=!0,dn(m,w)):m;for(o=s=m=xl(m.minus(da),m.plus(da),u),f=dn(m.times(m),u),i=3;;){if(s=dn(s.times(f),u),c=o.plus(xl(s,new x(i),u)),mo(c.d).slice(0,u)===mo(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(NI(x,u+2,w).times(a+""))),o=xl(o,new x(h),u),x.precision=w,e==null?(In=!0,dn(o,w)):o;o=c,i+=2}}function JF(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=tg(n/mn),t.d=[],r=(n+1)%mn,n<0&&(r+=mn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=mn;r<i;)t.d.push(+e.slice(r,r+=mn));e=e.slice(r),r=mn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),In&&(t.e>Hw||t.e<-Hw))throw Error(wR+n)}else t.s=0,t.e=0,t.d=[0];return t}function dn(t,e,n){var r,i,a,s,o,c,u,f,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=mn,i=e,u=h[f=0];else{if(f=Math.ceil((r+1)/mn),a=h.length,f>=a)return t;for(u=a=h[f],s=1;a>=10;a/=10)s++;r%=mn,i=r-mn+s}if(n!==void 0&&(a=dd(10,s-i-1),o=u/a%10|0,c=e<0||h[f+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/dd(10,s-i):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=pr(t),h.length=1,e=e-a-1,h[0]=dd(10,(mn-e%mn)%mn),t.e=tg(-e/mn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,a=1,f--):(h.length=f+1,a=dd(10,mn-r),h[f]=i>0?(u/dd(10,s-i)%dd(10,i)|0)*a:0),c)for(;;)if(f==0){(h[0]+=a)==zr&&(h[0]=1,++t.e);break}else{if(h[f]+=a,h[f]!=zr)break;h[f--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(In&&(t.e>Hw||t.e<-Hw))throw Error(wR+pr(t));return t}function _Z(t,e){var n,r,i,a,s,o,c,u,f,h,g=t.constructor,m=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),In?dn(e,m):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(f=s<0,f?(n=c,s=-s,o=h.length):(n=h,r=u,o=c.length),i=Math.max(Math.ceil(m/mn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){f=c[i]<h[i];break}s=0}for(f&&(n=c,c=h,h=n,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=zr-1;--c[a],c[i]+=zr}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,In?dn(e,m):e):new g(0)}function sf(t,e,n){var r,i=pr(t),a=mo(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Mc(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Mc(-i-1)+a,n&&(r=n-s)>0&&(a+=Mc(r))):i>=s?(a+=Mc(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Mc(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Mc(r))),t.s<0?"-"+a:a}function eU(t,e){if(t.length>e)return t.length=e,!0}function SZ(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Vd+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return JF(s,a.toString())}else if(typeof a!="string")throw Error(Vd+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,L2e.test(a))JF(s,a);else throw Error(Vd+a)}if(i.prototype=Fe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=SZ,i.config=i.set=V2e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function V2e(t){if(!t||typeof t!="object")throw Error(Ja+"Object expected");var e,n,r,i=["precision",1,eg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(tg(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Vd+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Vd+n+": "+r);return this}var _R=SZ(z2e);da=new _R(1);const Wt=_R;var B2e=t=>t,EZ={},TZ=t=>t===EZ,tU=t=>function e(){return arguments.length===0||arguments.length===1&&TZ(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},AZ=(t,e)=>t===1?e:tU(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(s=>s!==EZ).length;return a>=t?e(...r):AZ(t-a,tU(function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];var u=r.map(f=>TZ(f)?o.shift():f);return e(...u,...o)}))}),F2e=t=>AZ(t.length,t),x2=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},U2e=F2e((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),$2e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return B2e;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,c)=>c(o),a(...arguments))}};function CZ(t){var e;return t===0?e=1:e=Math.floor(new Wt(t).abs().log(10).toNumber())+1,e}function IZ(t,e,n){for(var r=new Wt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var kZ=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},PZ=(t,e,n)=>{if(t.lte(0))return new Wt(0);var r=CZ(t.toNumber()),i=new Wt(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new Wt(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?new Wt(c.toNumber()):new Wt(Math.ceil(c.toNumber()))},q2e=(t,e,n)=>{var r=new Wt(1),i=new Wt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Wt(10).pow(CZ(t)-1),i=new Wt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Wt(Math.floor(t)))}else t===0?i=new Wt(Math.floor((e-1)/2)):n||(i=new Wt(Math.floor(t)));var s=Math.floor((e-1)/2),o=$2e(U2e(c=>i.add(new Wt(c-s).mul(r)).toNumber()),x2);return o(0,e)},DZ=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Wt(0),tickMin:new Wt(0),tickMax:new Wt(0)};var s=PZ(new Wt(n).sub(e).div(r-1),i,a),o;e<=0&&n>=0?o=new Wt(0):(o=new Wt(e).add(n).div(2),o=o.sub(new Wt(o).mod(s)));var c=Math.ceil(o.sub(e).div(s).toNumber()),u=Math.ceil(new Wt(n).sub(o).div(s).toNumber()),f=c+u+1;return f>r?DZ(e,n,r,i,a+1):(f<r&&(u=n>0?u+(r-f):u,c=n>0?c:c+(r-f)),{step:s,tickMin:o.sub(new Wt(c).mul(s)),tickMax:o.add(new Wt(u).mul(s))})},G2e=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,c]=kZ([n,r]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...x2(0,i-1).map(()=>1/0)]:[...x2(0,i-1).map(()=>-1/0),c];return n>r?u.reverse():u}if(o===c)return q2e(o,i,a);var{step:f,tickMin:h,tickMax:g}=DZ(o,c,s,a,0),m=IZ(h,g.add(new Wt(.1).mul(f)),f);return n>r?m.reverse():m},H2e=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=kZ([r,i]);if(s===-1/0||o===1/0)return[r,i];if(s===o)return[s];var c=Math.max(n,2),u=PZ(new Wt(o).sub(s).div(c-1),a,0),f=[...IZ(new Wt(s),new Wt(o),u),o];return a===!1&&(f=f.map(h=>Math.round(h))),r>i?f.reverse():f},OZ=t=>t.rootProps.maxBarSize,K2e=t=>t.rootProps.barGap,NZ=t=>t.rootProps.barCategoryGap,W2e=t=>t.rootProps.barSize,ry=t=>t.rootProps.stackOffset,RZ=t=>t.rootProps.reverseStackOrder,SR=t=>t.options.chartName,ER=t=>t.rootProps.syncId,MZ=t=>t.rootProps.syncMethod,TR=t=>t.options.eventEmitter,Vr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ol={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},la={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},$S=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Y2e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ol.angleAxisId,includeHidden:!1,name:void 0,reversed:ol.reversed,scale:ol.scale,tick:ol.tick,tickCount:void 0,ticks:void 0,type:ol.type,unit:void 0},X2e={allowDataOverflow:la.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:la.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:la.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:la.scale,tick:la.tick,tickCount:la.tickCount,ticks:void 0,type:la.type,unit:void 0},Q2e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ol.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ol.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ol.scale,tick:ol.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Z2e={allowDataOverflow:la.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:la.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:la.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:la.scale,tick:la.tick,tickCount:la.tickCount,ticks:void 0,type:"category",unit:void 0},AR=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?Q2e:Y2e,CR=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?Z2e:X2e,qS=t=>t.polarOptions,IR=ve([ql,Gl,Cr],OQ),jZ=ve([qS,IR],(t,e)=>{if(t!=null)return ui(t.innerRadius,e,0)}),zZ=ve([qS,IR],(t,e)=>{if(t!=null)return ui(t.outerRadius,e,e*.8)}),J2e=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},LZ=ve([qS],J2e);ve([AR,LZ],$S);var VZ=ve([IR,jZ,zZ],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ve([CR,VZ],$S);var BZ=ve([Lt,qS,jZ,zZ,ql,Gl],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=e;return{cx:ui(s,i,i/2),cy:ui(o,a,a/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:u,clockWise:!1}}}),kn=(t,e)=>e,iy=(t,e,n)=>n;function kR(t){return t?.id}function FZ(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,s=new Map;return t.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:r;if(!(u==null||u.length===0)){var f=kR(o);u.forEach((h,g)=>{var m=a==null||i?g:String(yn(h,a,null)),b=yn(h,o.dataKey,0),x;s.has(m)?x=s.get(m):x={},Object.assign(x,{[f]:b}),s.set(m,x)})}}),Array.from(s.values())}function GS(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var HS=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function KS(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function eDe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var kr=t=>{var e=Lt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},ng=t=>t.tooltip.settings.axisId;function nU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nU(Object(n),!0).forEach(function(r){tDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tDe(t,e,n){return(e=nDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nDe(t){var e=rDe(t,"string");return typeof e=="symbol"?e:e+""}function rDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var w2=[0,"auto"],Rr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},UZ=(t,e)=>t.cartesianAxis.xAxis[e],jo=(t,e)=>{var n=UZ(t,e);return n??Rr},Mr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:w2,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Y0},$Z=(t,e)=>t.cartesianAxis.yAxis[e],zo=(t,e)=>{var n=$Z(t,e);return n??Mr},iDe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},PR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??iDe},zn=(t,e,n)=>{switch(e){case"xAxis":return jo(t,n);case"yAxis":return zo(t,n);case"zAxis":return PR(t,n);case"angleAxis":return AR(t,n);case"radiusAxis":return CR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},aDe=(t,e,n)=>{switch(e){case"xAxis":return jo(t,n);case"yAxis":return zo(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},ay=(t,e,n)=>{switch(e){case"xAxis":return jo(t,n);case"yAxis":return zo(t,n);case"angleAxis":return AR(t,n);case"radiusAxis":return CR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},qZ=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function DR(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var OR=t=>t.graphicalItems.cartesianItems,sDe=ve([kn,iy],DR),NR=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),sy=ve([OR,zn,sDe],NR,{memoizeOptions:{resultEqualityCheck:KS}}),GZ=ve([sy],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(GS)),HZ=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),oDe=ve([sy],HZ),RR=t=>t.map(e=>e.data).filter(Boolean).flat(1),lDe=ve([sy],RR,{memoizeOptions:{resultEqualityCheck:KS}}),MR=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},jR=ve([lDe,vZ],MR),zR=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:yn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:yn(i,r)}))):t.map(r=>({value:r})),WS=ve([jR,zn,sy],zR);function KZ(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function c1(t){if(Qa(t)||t instanceof Date){var e=Number(t);if(un(e))return e}}function rU(t){if(Array.isArray(t)){var e=[c1(t[0]),c1(t[1])];return mu(e)?e:void 0}var n=c1(t);if(n!=null)return[n,n]}function Ll(t){return t.map(c1).filter(SEe)}function cDe(t,e,n){return!n||typeof e!="number"||ba(e)?[]:n.length?Ll(n.flatMap(r=>{var i=yn(t,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!un(a)||!un(s)))return[e-a,e+s]})):[]}var Pr=t=>{var e=kr(t),n=ng(t);return ay(t,e,n)},oy=ve([Pr],t=>t?.dataKey),uDe=ve([GZ,vZ,Pr],FZ),WZ=(t,e,n,r)=>{var i={},a=e.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,u=r?[...c].reverse():c,f=u.map(kR);return[o,{stackedData:$Ae(t,f,n),graphicalItems:u}]}))},_2=ve([uDe,GZ,ry,RZ],WZ),YZ=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var s=WAe(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},dDe=ve([zn],t=>t.allowDataOverflow),LR=t=>{var e;if(t==null||!("domain"in t))return w2;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Ll(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:w2},VR=ve([zn],LR),BR=ve([VR,dDe],yZ),fDe=ve([_2,Kl,kn,BR],YZ,{memoizeOptions:{resultEqualityCheck:HS}}),YS=t=>t.errorBars,hDe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>KZ(n,r)),Ww=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},FR=(t,e,n,r,i)=>{var a,s;if(n.length>0&&t.forEach(o=>{n.forEach(c=>{var u,f,h=(u=r[c.id])===null||u===void 0?void 0:u.filter(S=>KZ(i,S)),g=yn(o,(f=e.dataKey)!==null&&f!==void 0?f:c.dataKey),m=cDe(o,g,h);if(m.length>=2){var b=Math.min(...m),x=Math.max(...m);(a==null||b<a)&&(a=b),(s==null||x>s)&&(s=x)}var w=rU(g);w!=null&&(a=a==null?w[0]:Math.min(a,w[0]),s=s==null?w[1]:Math.max(s,w[1]))})}),e?.dataKey!=null&&t.forEach(o=>{var c=rU(yn(o,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),un(a)&&un(s))return[a,s]},pDe=ve([jR,zn,oDe,YS,kn],FR,{memoizeOptions:{resultEqualityCheck:HS}});function gDe(t){var{value:e}=t;if(Qa(e)||e instanceof Date)return e}var mDe=(t,e,n)=>{var r=t.map(gDe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&dX(r))?jQ(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},XZ=t=>t.referenceElements.dots,rg=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),vDe=ve([XZ,kn,iy],rg),QZ=t=>t.referenceElements.areas,yDe=ve([QZ,kn,iy],rg),ZZ=t=>t.referenceElements.lines,bDe=ve([ZZ,kn,iy],rg),JZ=(t,e)=>{if(t!=null){var n=Ll(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},xDe=ve(vDe,kn,JZ),eJ=(t,e)=>{if(t!=null){var n=Ll(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},wDe=ve([yDe,kn],eJ);function _De(t){var e;if(t.x!=null)return Ll([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Ll(n)}function SDe(t){var e;if(t.y!=null)return Ll([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Ll(n)}var tJ=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?_De(r):SDe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},EDe=ve([bDe,kn],tJ),TDe=ve(xDe,EDe,wDe,(t,e,n)=>Ww(t,n,e)),UR=(t,e,n,r,i,a,s,o)=>{if(n!=null)return n;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?Ww(r,a,i):Ww(a,i);return j2e(e,u,t.allowDataOverflow)},ADe=ve([zn,VR,BR,fDe,pDe,TDe,Lt,kn],UR,{memoizeOptions:{resultEqualityCheck:HS}}),CDe=[0,1],$R=(t,e,n,r,i,a,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:o,type:c}=t,u=vf(e,a);if(u&&o==null){var f;return jQ(0,(f=n?.length)!==null&&f!==void 0?f:0)}return c==="category"?mDe(r,t,u):i==="expand"?CDe:s}},qR=ve([zn,Lt,jR,WS,ry,kn,ADe],$R),nJ=(t,e,n,r,i)=>{if(t!=null){var{scale:a,type:s}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(G0(a));return o in Lm?o:"point"}}},ig=ve([zn,Lt,qZ,SR,kn],nJ);function IDe(t){if(t!=null){if(t in Lm)return Lm[t]();var e="scale".concat(G0(t));if(e in Lm)return Lm[e]()}}function GR(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=IDe(e);if(i!=null){var a=i.domain(n).range(r);return LAe(a),a}}}var HR=(t,e,n)=>{var r=LR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&mu(t))return G2e(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&mu(t))return H2e(t,e.tickCount,e.allowDecimals)}},KR=ve([qR,ay,ig],HR),WR=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&mu(e)&&Array.isArray(n)&&n.length>0){var i=e[0],a=n[0],s=e[1],o=n[n.length-1];return[Math.min(i,a),Math.max(s,o)]}return e},kDe=ve([zn,qR,KR,kn],WR),PDe=ve(WS,zn,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Ll(t.map(h=>h.value))).sort((h,g)=>h-g),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<r.length-1;o++){var c=r[o],u=r[o+1];if(!(c==null||u==null)){var f=u-c;n=Math.min(n,f)}}return n/s}}),rJ=ve(PDe,Lt,NZ,Cr,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!un(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=ui(n,t*a),o=t*a/2;return o-s-(o-s)/a*s}return 0}),DDe=(t,e,n)=>{var r=jo(t,e);return r==null||typeof r.padding!="string"?0:rJ(t,"xAxis",e,n,r.padding)},ODe=(t,e,n)=>{var r=zo(t,e);return r==null||typeof r.padding!="string"?0:rJ(t,"yAxis",e,n,r.padding)},NDe=ve(jo,DDe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),RDe=ve(zo,ODe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),MDe=ve([Cr,NDe,CS,AS,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),jDe=ve([Cr,Lt,RDe,CS,AS,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),ly=(t,e,n,r)=>{var i;switch(e){case"xAxis":return MDe(t,n,r);case"yAxis":return jDe(t,n,r);case"zAxis":return(i=PR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return LZ(t);case"radiusAxis":return VZ(t,n);default:return}},iJ=ve([zn,ly],$S),Pp=ve([zn,ig,kDe,iJ],GR);ve([sy,YS,kn],hDe);function aJ(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var XS=(t,e)=>e,QS=(t,e,n)=>n,zDe=ve(ES,XS,QS,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(aJ)),LDe=ve(TS,XS,QS,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(aJ)),sJ=(t,e)=>({width:t.width,height:e.height}),VDe=(t,e)=>{var n=typeof e.width=="number"?e.width:Y0;return{width:n,height:t.height}},oJ=ve(Cr,jo,sJ),BDe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},FDe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},UDe=ve(Gl,Cr,zDe,XS,QS,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=sJ(e,o);s==null&&(s=BDe(e,r,t));var u=r==="top"&&!i||r==="bottom"&&i;a[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),a}),$De=ve(ql,Cr,LDe,XS,QS,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=VDe(e,o);s==null&&(s=FDe(e,r,t));var u=r==="left"&&!i||r==="right"&&i;a[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),a}),qDe=(t,e)=>{var n=jo(t,e);if(n!=null)return UDe(t,n.orientation,n.mirror)},GDe=ve([Cr,jo,qDe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),HDe=(t,e)=>{var n=zo(t,e);if(n!=null)return $De(t,n.orientation,n.mirror)},KDe=ve([Cr,zo,HDe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),lJ=ve(Cr,zo,(t,e)=>{var n=typeof e.width=="number"?e.width:Y0;return{width:n,height:t.height}}),iU=(t,e,n)=>{switch(e){case"xAxis":return oJ(t,n).width;case"yAxis":return lJ(t,n).height;default:return}},cJ=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,o=vf(t,r),c=e.map(u=>u.value);if(s&&o&&a==="category"&&i&&dX(c))return c}},YR=ve([Lt,WS,zn,kn],cJ),uJ=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,s=vf(t,r);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},XR=ve([Lt,WS,ay,kn],uJ),aU=ve([Lt,aDe,ig,Pp,YR,XR,ly,KR,kn],(t,e,n,r,i,a,s,o,c)=>{if(e!=null){var u=vf(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:n,scale:r}}}),WDe=(t,e,n,r,i,a,s,o,c)=>{if(!(e==null||r==null)){var u=vf(t,c),{type:f,ticks:h,tickCount:g}=e,m=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=f==="category"&&r.bandwidth?r.bandwidth()/m:0;b=c==="angleAxis"&&a!=null&&a.length>=2?Lr(a[0]-a[1])*2*b:b;var x=h||i;if(x){var w=x.map((S,T)=>{var I=s?s.indexOf(S):S;return{index:T,coordinate:r(I)+b,value:S,offset:b}});return w.filter(S=>un(S.coordinate))}return u&&o?o.map((S,T)=>({coordinate:r(S)+b,value:S,index:T,offset:b})).filter(S=>un(S.coordinate)):r.ticks?r.ticks(g).map(S=>({coordinate:r(S)+b,value:S,offset:b})):r.domain().map((S,T)=>({coordinate:r(S)+b,value:s?s[S]:S,index:T,offset:b}))}},dJ=ve([Lt,ay,ig,Pp,KR,ly,YR,XR,kn],WDe),YDe=(t,e,n,r,i,a,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=vf(t,s),{tickCount:c}=e,u=0;return u=s==="angleAxis"&&r?.length>=2?Lr(r[0]-r[1])*2*u:u,o&&a?a.map((f,h)=>({coordinate:n(f)+u,value:f,index:h,offset:u})):n.ticks?n.ticks(c).map(f=>({coordinate:n(f)+u,value:f,offset:u})):n.domain().map((f,h)=>({coordinate:n(f)+u,value:i?i[f]:f,index:h,offset:u}))}},Dp=ve([Lt,ay,Pp,ly,YR,XR,kn],YDe),Op=ve(zn,Pp,(t,e)=>{if(!(t==null||e==null))return Kw(Kw({},t),{},{scale:e})}),XDe=ve([zn,ig,qR,iJ],GR);ve((t,e,n)=>PR(t,n),XDe,(t,e)=>{if(!(t==null||e==null))return Kw(Kw({},t),{},{scale:e})});var QDe=ve([Lt,ES,TS],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),fJ=t=>t.options.defaultTooltipEventType,hJ=t=>t.options.validateTooltipEventTypes;function pJ(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function QR(t,e){var n=fJ(t),r=hJ(t);return pJ(e,n,r)}function ZDe(t){return qe(e=>QR(e,t))}var gJ=(t,e)=>{var n,r=Number(e);if(!(ba(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},JDe=t=>t.tooltip.settings,Uc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},eOe={itemInteraction:{click:Uc,hover:Uc},axisInteraction:{click:Uc,hover:Uc},keyboardInteraction:Uc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},mJ=Wi({name:"tooltip",initialState:eOe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Tn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ps(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Tn()},removeTooltipEntrySettings:{reducer(t,e){var n=Ps(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Tn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:tOe,replaceTooltipEntrySettings:nOe,removeTooltipEntrySettings:rOe,setTooltipSettingsState:iOe,setActiveMouseOverItemIndex:vJ,mouseLeaveItem:aOe,mouseLeaveChart:yJ,setActiveClickItemIndex:sOe,setMouseOverAxisIndex:bJ,setMouseClickAxisIndex:oOe,setSyncInteraction:S2,setKeyboardInteraction:E2}=mJ.actions,lOe=mJ.reducer;function sU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sU(Object(n),!0).forEach(function(r){cOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cOe(t,e,n){return(e=uOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uOe(t){var e=dOe(t,"string");return typeof e=="symbol"?e:e+""}function dOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fOe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function hOe(t){return t.index!=null}var xJ=(t,e,n,r)=>{if(e==null)return Uc;var i=fOe(t,e,n);if(i==null)return Uc;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(hOe(i)){if(a)return Cx(Cx({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Cx(Cx({},Uc),{},{coordinate:i.coordinate})};function pOe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function gOe(t,e){var n=pOe(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),s=Math.max(r,i);return n>=a&&n<=s}function mOe(t,e,n){if(n==null||e==null)return!0;var r=yn(t,e);return r==null||!mu(n)?!0:gOe(r,n)}var ZR=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!un(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var c=Math.max(s,Math.min(a,o)),u=e[c];return u==null||mOe(u,n,r)?String(c):null},wJ=(t,e,n,r,i,a,s,o)=>{if(!(a==null||o==null)){var c=s[0],u=c==null?void 0:o(c.positions,a);if(u!=null)return u;var f=i?.[Number(a)];if(f)switch(n){case"horizontal":return{x:f.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:f.coordinate}}}},_J=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},cy=t=>t.options.tooltipPayloadSearcher,ag=t=>t.tooltip;function oU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oU(Object(n),!0).forEach(function(r){vOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vOe(t,e,n){return(e=yOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yOe(t){var e=bOe(t,"string");return typeof e=="symbol"?e:e+""}function bOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xOe(t,e){return t??e}var SJ=(t,e,n,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:f}=n,h=[];return t.reduce((g,m)=>{var b,{dataDefinedOnItem:x,settings:w}=m,S=xOe(x,o),T=Array.isArray(S)?rQ(S,u,f):S,I=(b=w?.dataKey)!==null&&b!==void 0?b:r,N=w?.nameKey,O;if(r&&Array.isArray(T)&&!Array.isArray(T[0])&&s==="axis"?O=_Ee(T,r,i):O=a(T,e,c,N),Array.isArray(O))O.forEach(k=>{var D=lU(lU({},w),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});g.push(h9({tooltipEntrySettings:D,dataKey:k.dataKey,payload:k.payload,value:yn(k.payload,k.dataKey),name:k.name}))});else{var P;g.push(h9({tooltipEntrySettings:w,dataKey:I,payload:O,value:yn(O,I),name:(P=yn(O,N))!==null&&P!==void 0?P:w?.name}))}return g},h)}},JR=ve([Pr,Lt,qZ,SR,kr],nJ),wOe=ve([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),_Oe=ve([kr,ng],DR),sg=ve([wOe,Pr,_Oe],NR,{memoizeOptions:{resultEqualityCheck:KS}}),SOe=ve([sg],t=>t.filter(GS)),EOe=ve([sg],RR,{memoizeOptions:{resultEqualityCheck:KS}}),og=ve([EOe,Kl],MR),TOe=ve([SOe,Kl,Pr],FZ),eM=ve([og,Pr,sg],zR),EJ=ve([Pr],LR),AOe=ve([Pr],t=>t.allowDataOverflow),TJ=ve([EJ,AOe],yZ),COe=ve([sg],t=>t.filter(GS)),IOe=ve([TOe,COe,ry,RZ],WZ),kOe=ve([IOe,Kl,kr,TJ],YZ),POe=ve([sg],HZ),DOe=ve([og,Pr,POe,YS,kr],FR,{memoizeOptions:{resultEqualityCheck:HS}}),OOe=ve([XZ,kr,ng],rg),NOe=ve([OOe,kr],JZ),ROe=ve([QZ,kr,ng],rg),MOe=ve([ROe,kr],eJ),jOe=ve([ZZ,kr,ng],rg),zOe=ve([jOe,kr],tJ),LOe=ve([NOe,zOe,MOe],Ww),VOe=ve([Pr,EJ,TJ,kOe,DOe,LOe,Lt,kr],UR),uy=ve([Pr,Lt,og,eM,ry,kr,VOe],$R),BOe=ve([uy,Pr,JR],HR),FOe=ve([Pr,uy,BOe,kr],WR),AJ=t=>{var e=kr(t),n=ng(t),r=!1;return ly(t,e,n,r)},CJ=ve([Pr,AJ],$S),IJ=ve([Pr,JR,FOe,CJ],GR),UOe=ve([Lt,eM,Pr,kr],cJ),$Oe=ve([Lt,eM,Pr,kr],uJ),qOe=(t,e,n,r,i,a,s,o)=>{if(e){var{type:c}=e,u=vf(t,o);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=c==="category"&&r.bandwidth?r.bandwidth()/f:0;return h=o==="angleAxis"&&i!=null&&i?.length>=2?Lr(i[0]-i[1])*2*h:h,u&&s?s.map((g,m)=>({coordinate:r(g)+h,value:g,index:m,offset:h})):r.domain().map((g,m)=>({coordinate:r(g)+h,value:a?a[g]:g,index:m,offset:h}))}}},Wl=ve([Lt,Pr,JR,IJ,AJ,UOe,$Oe,kr],qOe),tM=ve([fJ,hJ,JDe],(t,e,n)=>pJ(n.shared,t,e)),kJ=t=>t.tooltip.settings.trigger,nM=t=>t.tooltip.settings.defaultIndex,dy=ve([ag,tM,kJ,nM],xJ),of=ve([dy,og,oy,uy],ZR),PJ=ve([Wl,of],gJ),rM=ve([dy],t=>{if(t)return t.dataKey}),GOe=ve([dy],t=>{if(t)return t.graphicalItemId}),DJ=ve([ag,tM,kJ,nM],_J),HOe=ve([ql,Gl,Lt,Cr,Wl,nM,DJ,cy],wJ),KOe=ve([dy,HOe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),WOe=ve([dy],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),YOe=ve([DJ,of,Kl,oy,PJ,cy,tM],SJ);ve([YOe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function cU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cU(Object(n),!0).forEach(function(r){XOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XOe(t,e,n){return(e=QOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QOe(t){var e=ZOe(t,"string");return typeof e=="symbol"?e:e+""}function ZOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JOe=()=>qe(Pr),eNe=()=>{var t=JOe(),e=qe(Wl),n=qe(IJ);return Cw(!t||!n?void 0:uU(uU({},t),{},{scale:n}),e)};function dU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dU(Object(n),!0).forEach(function(r){tNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tNe(t,e,n){return(e=nNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nNe(t){var e=rNe(t,"string");return typeof e=="symbol"?e:e+""}function rNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iNe=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},aNe=(t,e,n,r)=>{var i=e.find(u=>u&&u.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=r;return mh(mh(mh({},r),hr(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=r;return mh(mh(mh({},r),hr(r.cx,r.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function sNe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var OJ=(t,e,n,r,i)=>{var a,s=(a=e?.length)!==null&&a!==void 0?a:0;if(s<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,u,f,h,g,m=o>0?(c=n[o-1])===null||c===void 0?void 0:c.coordinate:(u=n[s-1])===null||u===void 0?void 0:u.coordinate,b=(f=n[o])===null||f===void 0?void 0:f.coordinate,x=o>=s-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(g=n[o+1])===null||g===void 0?void 0:g.coordinate,w=void 0;if(!(m==null||b==null||x==null))if(Lr(b-m)!==Lr(x-b)){var S=[];if(Lr(x-b)===Lr(i[1]-i[0])){w=x;var T=b+i[1]-i[0];S[0]=Math.min(T,(T+m)/2),S[1]=Math.max(T,(T+m)/2)}else{w=m;var I=x+i[1]-i[0];S[0]=Math.min(b,(I+b)/2),S[1]=Math.max(b,(I+b)/2)}var N=[Math.min(b,(w+b)/2),Math.max(b,(w+b)/2)];if(t>N[0]&&t<=N[1]||t>=S[0]&&t<=S[1]){var O;return(O=n[o])===null||O===void 0?void 0:O.index}}else{var P=Math.min(m,x),k=Math.max(m,x);if(t>(P+b)/2&&t<=(k+b)/2){var D;return(D=n[o])===null||D===void 0?void 0:D.index}}}else if(e)for(var R=0;R<s;R++){var z=e[R];if(z!=null){var L=e[R+1],B=e[R-1];if(R===0&&L!=null&&t<=(z.coordinate+L.coordinate)/2||R===s-1&&B!=null&&t>(z.coordinate+B.coordinate)/2||R>0&&R<s-1&&B!=null&&L!=null&&t>(z.coordinate+B.coordinate)/2&&t<=(z.coordinate+L.coordinate)/2)return z.index}}return-1},oNe=()=>qe(SR),iM=(t,e)=>e,NJ=(t,e,n)=>n,aM=(t,e,n,r)=>r,lNe=ve(Wl,t=>hS(t,e=>e.coordinate)),sM=ve([ag,iM,NJ,aM],xJ),oM=ve([sM,og,oy,uy],ZR),cNe=(t,e,n)=>{if(e!=null){var r=ag(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},RJ=ve([ag,iM,NJ,aM],_J),Yw=ve([ql,Gl,Lt,Cr,Wl,aM,RJ,cy],wJ),uNe=ve([sM,Yw],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),MJ=ve([Wl,oM],gJ),dNe=ve([RJ,oM,Kl,oy,MJ,cy,iM],SJ),fNe=ve([sM,oM],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),hNe=(t,e,n,r,i,a,s)=>{if(!(!t||!n||!r||!i)&&sNe(t,s)){var o=YAe(t,e),c=OJ(o,a,i,n,r),u=iNe(e,i,c,t);return{activeIndex:String(c),activeCoordinate:u}}},pNe=(t,e,n,r,i,a,s)=>{if(!(!t||!r||!i||!a||!n)){var o=QIe(t,n);if(o){var c=XAe(o,e),u=OJ(c,s,a,r,i),f=aNe(e,a,u,o);return{activeIndex:String(u),activeCoordinate:f}}}},gNe=(t,e,n,r,i,a,s,o)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?hNe(t,e,r,i,a,s,o):pNe(t,e,n,r,i,a,s)},mNe=ve(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),vNe=ve(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Vr)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:eDe}});function fU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fU(Object(n),!0).forEach(function(r){yNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yNe(t,e,n){return(e=bNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bNe(t){var e=xNe(t,"string");return typeof e=="symbol"?e:e+""}function xNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wNe={},_Ne={zIndexMap:Object.values(Vr).reduce((t,e)=>hU(hU({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),wNe)},SNe=new Set(Object.values(Vr));function ENe(t){return SNe.has(t)}var jJ=Wi({name:"zIndex",initialState:_Ne,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Tn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!ENe(n)&&delete t.zIndexMap[n])},prepare:Tn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Tn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Tn()}}}),{registerZIndexPortal:TNe,unregisterZIndexPortal:ANe,registerZIndexPortalElement:CNe,unregisterZIndexPortalElement:INe}=jJ.actions,kNe=jJ.reducer;function is(t){var{zIndex:e,children:n}=t,r=ACe(),i=r&&e!==void 0&&e!==0,a=Ii(),s=bn();A.useLayoutEffect(()=>i?(s(TNe({zIndex:e})),()=>{s(ANe({zIndex:e}))}):H0,[s,e,i]);var o=qe(c=>mNe(c,e,a));return i?o?Z$.createPortal(n,o):null:n}function T2(){return T2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T2.apply(null,arguments)}function pU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ix(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pU(Object(n),!0).forEach(function(r){PNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PNe(t,e,n){return(e=DNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DNe(t){var e=ONe(t,"string");return typeof e=="symbol"?e:e+""}function ONe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NNe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return A.isValidElement(e)?A.cloneElement(e,r):A.createElement(n,r)}function RNe(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:f}=t,h=n,g=r,m=i;if(!c||!h||f!=="ScatterChart"&&u!=="axis")return null;var b,x,w;if(f==="ScatterChart")b=h,x=dIe,w=Vr.cursorLine;else if(f==="BarChart")b=fIe(o,h,a,s),x=DQ,w=Vr.cursorRectangle;else if(o==="radial"&&pX(h)){var{cx:S,cy:T,radius:I,startAngle:N,endAngle:O}=NQ(h);b={cx:S,cy:T,startAngle:N,endAngle:O,innerRadius:I,outerRadius:I},x=MQ,w=Vr.cursorLine}else b={points:tke(o,h,a)},x=QN,w=Vr.cursorLine;var P=typeof c=="object"&&"className"in c?c.className:void 0,k=Ix(Ix(Ix(Ix({stroke:"#ccc",pointerEvents:"none"},a),b),qv(c)),{},{payload:g,payloadIndex:m,className:Qt("recharts-tooltip-cursor",P)});return A.createElement(is,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:w},A.createElement(NNe,{cursor:c,cursorComp:x,cursorProps:k}))}function MNe(t){var e=eNe(),n=hQ(),r=Q0(),i=oNe();return e==null||n==null||r==null||i==null?null:A.createElement(RNe,T2({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var zJ=A.createContext(null),jNe=()=>A.useContext(zJ),RI={exports:{}},gU;function zNe(){return gU||(gU=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function a(c,u,f,h,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new i(f,h||c,g),b=n?n+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],m]:c._events[b].push(m):(c._events[b]=m,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,h;if(this._eventsCount===0)return u;for(h in f=this._events)e.call(f,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=n?n+u:u,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,m=h.length,b=new Array(m);g<m;g++)b[g]=h[g].fn;return b},o.prototype.listenerCount=function(u){var f=n?n+u:u,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,f,h,g,m,b){var x=n?n+u:u;if(!this._events[x])return!1;var w=this._events[x],S=arguments.length,T,I;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),S){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,h),!0;case 4:return w.fn.call(w.context,f,h,g),!0;case 5:return w.fn.call(w.context,f,h,g,m),!0;case 6:return w.fn.call(w.context,f,h,g,m,b),!0}for(I=1,T=new Array(S-1);I<S;I++)T[I-1]=arguments[I];w.fn.apply(w.context,T)}else{var N=w.length,O;for(I=0;I<N;I++)switch(w[I].once&&this.removeListener(u,w[I].fn,void 0,!0),S){case 1:w[I].fn.call(w[I].context);break;case 2:w[I].fn.call(w[I].context,f);break;case 3:w[I].fn.call(w[I].context,f,h);break;case 4:w[I].fn.call(w[I].context,f,h,g);break;default:if(!T)for(O=1,T=new Array(S-1);O<S;O++)T[O-1]=arguments[O];w[I].fn.apply(w[I].context,T)}}return!0},o.prototype.on=function(u,f,h){return a(this,u,f,h,!1)},o.prototype.once=function(u,f,h){return a(this,u,f,h,!0)},o.prototype.removeListener=function(u,f,h,g){var m=n?n+u:u;if(!this._events[m])return this;if(!f)return s(this,m),this;var b=this._events[m];if(b.fn)b.fn===f&&(!g||b.once)&&(!h||b.context===h)&&s(this,m);else{for(var x=0,w=[],S=b.length;x<S;x++)(b[x].fn!==f||g&&!b[x].once||h&&b[x].context!==h)&&w.push(b[x]);w.length?this._events[m]=w.length===1?w[0]:w:s(this,m)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(RI)),RI.exports}var LNe=zNe();const VNe=Bl(LNe);var i0=new VNe,A2="recharts.syncEvent.tooltip",mU="recharts.syncEvent.brush";function LJ(t,e){if(e){var n=Number.parseInt(e,10);if(!ba(n))return t?.[n]}}var BNe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},VJ=Wi({name:"options",initialState:BNe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),FNe=VJ.reducer,{createEventEmitter:UNe}=VJ.actions;function $Ne(t){return t.tooltip.syncInteraction}var qNe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},BJ=Wi({name:"chartData",initialState:qNe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:vU,setDataStartEndIndexes:GNe,setComputedData:_5e}=BJ.actions,HNe=BJ.reducer,KNe=["x","y"];function yU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yU(Object(n),!0).forEach(function(r){WNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WNe(t,e,n){return(e=YNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YNe(t){var e=XNe(t,"string");return typeof e=="symbol"?e:e+""}function XNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QNe(t,e){if(t==null)return{};var n,r,i=ZNe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ZNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function JNe(){var t=qe(ER),e=qe(TR),n=bn(),r=qe(MZ),i=qe(Wl),a=Q0(),s=X0(),o=qe(c=>c.rootProps.className);A.useEffect(()=>{if(t==null)return H0;var c=(u,f,h)=>{if(e!==h&&t===u){if(r==="index"){var g;if(s&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate&&f.payload.sourceViewBox){var m=f.payload.coordinate,{x:b,y:x}=m,w=QNe(m,KNe),{x:S,y:T,width:I,height:N}=f.payload.sourceViewBox,O=vh(vh({},w),{},{x:s.x+(I?(b-S)/I:0)*s.width,y:s.y+(N?(x-T)/N:0)*s.height});n(vh(vh({},f),{},{payload:vh(vh({},f.payload),{},{coordinate:O})}))}else n(f);return}if(i!=null){var P;if(typeof r=="function"){var k={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},D=r(i,k);P=i[D]}else r==="value"&&(P=i.find(q=>String(q.value)===f.payload.label));var{coordinate:R}=f.payload;if(P==null||f.payload.active===!1||R==null||s==null){n(S2({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:z,y:L}=R,B=Math.min(z,s.x+s.width),j=Math.min(L,s.y+s.height),H={x:a==="horizontal"?P.coordinate:B,y:a==="horizontal"?j:P.coordinate},X=S2({active:f.payload.active,coordinate:H,dataKey:f.payload.dataKey,index:String(P.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(X)}}};return i0.on(A2,c),()=>{i0.off(A2,c)}},[o,n,e,t,r,i,a,s])}function eRe(){var t=qe(ER),e=qe(TR),n=bn();A.useEffect(()=>{if(t==null)return H0;var r=(i,a,s)=>{e!==s&&t===i&&n(GNe(a))};return i0.on(mU,r),()=>{i0.off(mU,r)}},[n,e,t])}function tRe(){var t=bn();A.useEffect(()=>{t(UNe())},[t]),JNe(),eRe()}function nRe(t,e,n,r,i,a){var s=qe(m=>cNe(m,t,e)),o=qe(TR),c=qe(ER),u=qe(MZ),f=qe($Ne),h=f?.active,g=X0();A.useEffect(()=>{if(!h&&c!=null&&o!=null){var m=S2({active:a,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:g,graphicalItemId:void 0});i0.emit(A2,c,m,o)}},[h,n,s,i,r,o,c,u,a,g])}function bU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(n),!0).forEach(function(r){rRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rRe(t,e,n){return(e=iRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iRe(t){var e=aRe(t,"string");return typeof e=="symbol"?e:e+""}function aRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sRe(t){return t.dataKey}function oRe(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(qCe,e)}var wU=[],lRe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ZS(t){var e,n,r=ei(t,lRe),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:f,offset:h,payloadUniqBy:g,position:m,reverseDirection:b,useTranslate3d:x,wrapperStyle:w,cursor:S,shared:T,trigger:I,defaultIndex:N,portal:O,axisId:P}=r,k=bn(),D=typeof N=="number"?String(N):N;A.useEffect(()=>{k(iOe({shared:T,trigger:I,axisId:P,active:i,defaultIndex:D}))},[k,T,I,P,i,D]);var R=X0(),z=AQ(),L=ZDe(T),{activeIndex:B,isActive:j}=(e=qe(ce=>fNe(ce,L,I,D)))!==null&&e!==void 0?e:{},H=qe(ce=>dNe(ce,L,I,D)),X=qe(ce=>MJ(ce,L,I,D)),q=qe(ce=>uNe(ce,L,I,D)),W=H,J=jNe(),ne=(n=i??j)!==null&&n!==void 0?n:!1,[Y,U]=NTe([W,ne]),Q=L==="axis"?X:void 0;nRe(L,I,q,Q,B,ne);var K=O??J;if(K==null||R==null||L==null)return null;var Z=W??wU;ne||(Z=wU),u&&Z.length&&(Z=aTe(Z.filter(ce=>ce.value!=null&&(ce.hide!==!0||r.includeHidden)),g,sRe));var le=Z.length>0,de=A.createElement(QCe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:f,active:ne,coordinate:q,hasPayload:le,offset:h,position:m,reverseDirection:b,useTranslate3d:x,viewBox:R,wrapperStyle:w,lastBoundingBox:Y,innerRef:U,hasPortalFromProps:!!O},oRe(c,xU(xU({},r),{},{payload:Z,label:Q,active:ne,activeIndex:B,coordinate:q,accessibilityLayer:z})));return A.createElement(A.Fragment,null,Z$.createPortal(de,K),ne&&A.createElement(MNe,{cursor:S,tooltipEventType:L,coordinate:q,payload:Z,index:B}))}var fy=t=>null;fy.displayName="Cell";function cRe(t,e,n){return(e=uRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uRe(t){var e=dRe(t,"string");return typeof e=="symbol"?e:e+""}function dRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class fRe{constructor(e){cRe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function _U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hRe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_U(Object(n),!0).forEach(function(r){pRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_U(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pRe(t,e,n){return(e=gRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gRe(t){var e=mRe(t,"string");return typeof e=="symbol"?e:e+""}function mRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vRe={cacheSize:2e3,enableCache:!0},FJ=hRe({},vRe),SU=new fRe(FJ.cacheSize),yRe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},EU="recharts_measurement_span";function bRe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var TU=(t,e)=>{try{var n=document.getElementById(EU);n||(n=document.createElement("span"),n.setAttribute("id",EU),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,yRe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},ov=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||NS.isSsr)return{width:0,height:0};if(!FJ.enableCache)return TU(e,n);var r=bRe(e,n),i=SU.get(r);if(i)return i;var a=TU(e,n);return SU.set(r,a),a},UJ;function xRe(t,e,n){return(e=wRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wRe(t){var e=_Re(t,"string");return typeof e=="symbol"?e:e+""}function _Re(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,SRe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ERe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,TRe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ARe=["cm","mm","pt","pc","in","Q","px"];function CRe(t){return ARe.includes(t)}var Vh="NaN";function IRe(t,e){return t*TRe[e]}class Qr{static parse(e){var n,[,r,i]=(n=ERe.exec(e))!==null&&n!==void 0?n:[];return r==null?Qr.NaN:new Qr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,ba(e)&&(this.unit=""),n!==""&&!SRe.test(n)&&(this.num=NaN,this.unit=""),CRe(n)&&(this.num=IRe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ba(this.num)}}UJ=Qr;xRe(Qr,"NaN",new UJ(NaN,""));function $J(t){if(t==null||t.includes(Vh))return Vh;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=AU.exec(e))!==null&&n!==void 0?n:[],s=Qr.parse(r??""),o=Qr.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return Vh;e=e.replace(AU,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,f,h,g]=(u=CU.exec(e))!==null&&u!==void 0?u:[],m=Qr.parse(f??""),b=Qr.parse(g??""),x=h==="+"?m.add(b):m.subtract(b);if(x.isNaN())return Vh;e=e.replace(CU,x.toString())}return e}var IU=/\(([^()]*)\)/;function kRe(t){for(var e=t,n;(n=IU.exec(e))!=null;){var[,r]=n;e=e.replace(IU,$J(r))}return e}function PRe(t){var e=t.replace(/\s+/g,"");return e=kRe(e),e=$J(e),e}function DRe(t){try{return PRe(t)}catch{return Vh}}function MI(t){var e=DRe(t.slice(5,-1));return e===Vh?"":e}var ORe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],NRe=["dx","dy","angle","className","breakAll"];function C2(){return C2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C2.apply(null,arguments)}function kU(t,e){if(t==null)return{};var n,r,i=RRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function RRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qJ=/[ \f\n\r\t\v\u2028\u2029]+/,GJ=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Br(e)||(n?i=e.toString().split(""):i=e.toString().split(qJ));var a=i.map(o=>({word:o,width:ov(o,r).width})),s=n?0:ov("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function MRe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var HJ=(t,e,n,r)=>t.reduce((i,a)=>{var{word:s,width:o}=a,c=i[i.length-1];if(c&&o!=null&&(e==null||r||c.width+o+n<Number(e)))c.words.push(s),c.width+=o+n;else{var u={words:[s],width:o};i.push(u)}return i},[]),KJ=t=>t.reduce((e,n)=>e.width>n.width?e:n),jRe="",PU=(t,e,n,r,i,a,s,o)=>{var c=t.slice(0,e),u=GJ({breakAll:n,style:r,children:c+jRe});if(!u)return[!1,[]];var f=HJ(u.wordsWithComputedWidth,a,s,o),h=f.length>i||KJ(f).width>Number(a);return[h,f]},zRe=(t,e,n,r,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=t,u=We(a),f=String(s),h=HJ(e,r,n,i);if(!u||i)return h;var g=h.length>a||KJ(h).width>Number(r);if(!g)return h;for(var m=0,b=f.length-1,x=0,w;m<=b&&x<=f.length-1;){var S=Math.floor((m+b)/2),T=S-1,[I,N]=PU(f,T,c,o,a,r,n,i),[O]=PU(f,S,c,o,a,r,n,i);if(!I&&!O&&(m=S+1),I&&O&&(b=S-1),!I&&O){w=N;break}x++}return w||h},DU=t=>{var e=Br(t)?[]:t.toString().split(qJ);return[{words:e,width:void 0}]},LRe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=t;if((e||n)&&!NS.isSsr){var o,c,u=GJ({breakAll:a,children:r,style:i});if(u){var{wordsWithComputedWidth:f,spaceWidth:h}=u;o=f,c=h}else return DU(r);return zRe({breakAll:a,children:r,maxLines:s,style:i},o,c,e,!!n)}return DU(r)},WJ="#808080",VRe={angle:0,breakAll:!1,capHeight:"0.71em",fill:WJ,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},JS=A.forwardRef((t,e)=>{var n=ei(t,VRe),{x:r,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:f}=n,h=kU(n,ORe),g=A.useMemo(()=>LRe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:m,dy:b,angle:x,className:w,breakAll:S}=h,T=kU(h,NRe);if(!Qa(r)||!Qa(i)||g.length===0)return null;var I=Number(r)+(We(m)?m:0),N=Number(i)+(We(b)?b:0);if(!un(I)||!un(N))return null;var O;switch(f){case"start":O=MI("calc(".concat(s,")"));break;case"middle":O=MI("calc(".concat((g.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:O=MI("calc(".concat(g.length-1," * -").concat(a,")"));break}var P=[];if(c){var k=g[0].width,{width:D}=h;P.push("scale(".concat(We(D)&&We(k)?D/k:1,")"))}return x&&P.push("rotate(".concat(x,", ").concat(I,", ").concat(N,")")),P.length&&(T.transform=P.join(" ")),A.createElement("text",C2({},ya(T),{ref:e,x:I,y:N,className:Qt("recharts-text",w),textAnchor:u,fill:o.includes("url")?WJ:o}),g.map((R,z)=>{var L=R.words.join(S?"":" ");return A.createElement("tspan",{x:I,dy:z===0?O:a,key:"".concat(L,"-").concat(z)},L)}))});JS.displayName="Text";var BRe=["labelRef"],FRe=["content"];function OU(t,e){if(t==null)return{};var n,r,i=URe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function URe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function NU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(n),!0).forEach(function(r){$Re(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Re(t,e,n){return(e=qRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qRe(t){var e=GRe(t,"string");return typeof e=="symbol"?e:e+""}function GRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ll(){return ll=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ll.apply(null,arguments)}var YJ=A.createContext(null),XJ=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s,children:o}=t,c=A.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,n,r,i,a,s]);return A.createElement(YJ.Provider,{value:c},o)},QJ=()=>{var t=A.useContext(YJ),e=X0();return t||fQ(e)},HRe=A.createContext(null),KRe=()=>{var t=A.useContext(HRe),e=qe(BZ);return t||e},WRe=t=>{var{value:e,formatter:n}=t,r=Br(t.children)?e:t.children;return typeof n=="function"?n(r):r},lM=t=>t!=null&&typeof t=="function",YRe=(t,e)=>{var n=Lr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},XRe=(t,e,n,r,i)=>{var{offset:a,className:s}=t,{cx:o,cy:c,innerRadius:u,outerRadius:f,startAngle:h,endAngle:g,clockWise:m}=i,b=(u+f)/2,x=YRe(h,g),w=x>=0?1:-1,S,T;switch(e){case"insideStart":S=h+w*a,T=m;break;case"insideEnd":S=g-w*a,T=!m;break;case"end":S=g+w*a,T=m;break;default:throw new Error("Unsupported position ".concat(e))}T=x<=0?T:!T;var I=hr(o,c,b,S),N=hr(o,c,b,S+(T?1:-1)*359),O="M".concat(I.x,",").concat(I.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(N.x,",").concat(N.y),P=Br(t.id)?Gv("recharts-radial-line-"):t.id;return A.createElement("text",ll({},r,{dominantBaseline:"central",className:Qt("recharts-radial-bar-label",s)}),A.createElement("defs",null,A.createElement("path",{id:P,d:O})),A.createElement("textPath",{xlinkHref:"#".concat(P)},n))},QRe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=t,u=(o+c)/2;if(n==="outside"){var{x:f,y:h}=hr(r,i,s+e,u);return{x:f,y:h,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+s)/2,{x:m,y:b}=hr(r,i,g,u);return{x:m,y:b,textAnchor:"middle",verticalAnchor:"middle"}},I2=t=>"cx"in t&&We(t.cx),ZRe=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,a;n!=null&&!I2(n)&&(a=n);var{x:s,y:o,upperWidth:c,lowerWidth:u,height:f}=e,h=s,g=s+(c-u)/2,m=(h+g)/2,b=(c+u)/2,x=h+c/2,w=f>=0?1:-1,S=w*r,T=w>0?"end":"start",I=w>0?"start":"end",N=c>=0?1:-1,O=N*r,P=N>0?"end":"start",k=N>0?"start":"end";if(i==="top"){var D={x:h+c/2,y:o-S,textAnchor:"middle",verticalAnchor:T};return Yn(Yn({},D),a?{height:Math.max(o-a.y,0),width:c}:{})}if(i==="bottom"){var R={x:g+u/2,y:o+f+S,textAnchor:"middle",verticalAnchor:I};return Yn(Yn({},R),a?{height:Math.max(a.y+a.height-(o+f),0),width:u}:{})}if(i==="left"){var z={x:m-O,y:o+f/2,textAnchor:P,verticalAnchor:"middle"};return Yn(Yn({},z),a?{width:Math.max(z.x-a.x,0),height:f}:{})}if(i==="right"){var L={x:m+b+O,y:o+f/2,textAnchor:k,verticalAnchor:"middle"};return Yn(Yn({},L),a?{width:Math.max(a.x+a.width-L.x,0),height:f}:{})}var B=a?{width:b,height:f}:{};return i==="insideLeft"?Yn({x:m+O,y:o+f/2,textAnchor:k,verticalAnchor:"middle"},B):i==="insideRight"?Yn({x:m+b-O,y:o+f/2,textAnchor:P,verticalAnchor:"middle"},B):i==="insideTop"?Yn({x:h+c/2,y:o+S,textAnchor:"middle",verticalAnchor:I},B):i==="insideBottom"?Yn({x:g+u/2,y:o+f-S,textAnchor:"middle",verticalAnchor:T},B):i==="insideTopLeft"?Yn({x:h+O,y:o+S,textAnchor:k,verticalAnchor:I},B):i==="insideTopRight"?Yn({x:h+c-O,y:o+S,textAnchor:P,verticalAnchor:I},B):i==="insideBottomLeft"?Yn({x:g+O,y:o+f-S,textAnchor:k,verticalAnchor:T},B):i==="insideBottomRight"?Yn({x:g+u-O,y:o+f-S,textAnchor:P,verticalAnchor:T},B):i&&typeof i=="object"&&(We(i.x)||Nl(i.x))&&(We(i.y)||Nl(i.y))?Yn({x:s+ui(i.x,b),y:o+ui(i.y,f),textAnchor:"end",verticalAnchor:"end"},B):Yn({x,y:o+f/2,textAnchor:"middle",verticalAnchor:"middle"},B)},JRe={angle:0,offset:5,zIndex:Vr.label,position:"middle",textBreakAll:!1};function jc(t){var e=ei(t,JRe),{viewBox:n,position:r,value:i,children:a,content:s,className:o="",textBreakAll:c,labelRef:u}=e,f=KRe(),h=QJ(),g=r==="center"?h:f??h,m,b,x;if(n==null?m=g:I2(n)?m=n:m=fQ(n),!m||Br(i)&&Br(a)&&!A.isValidElement(s)&&typeof s!="function")return null;var w=Yn(Yn({},e),{},{viewBox:m});if(A.isValidElement(s)){var{labelRef:S}=w,T=OU(w,BRe);return A.cloneElement(s,T)}if(typeof s=="function"){var{content:I}=w,N=OU(w,FRe);if(b=A.createElement(s,N),A.isValidElement(b))return b}else b=WRe(e);var O=ya(e);if(I2(m)){if(r==="insideStart"||r==="insideEnd"||r==="end")return XRe(e,r,b,O,m);x=QRe(m,e.offset,e.position)}else x=ZRe(e,m);return A.createElement(is,{zIndex:e.zIndex},A.createElement(JS,ll({ref:u,className:Qt("recharts-label",o)},O,x,{textAnchor:MRe(O.textAnchor)?O.textAnchor:x.textAnchor,breakAll:c}),b))}jc.displayName="Label";var eMe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?A.createElement(jc,ll({key:"label-implicit"},r)):Qa(t)?A.createElement(jc,ll({key:"label-implicit",value:t},r)):A.isValidElement(t)?t.type===jc?A.cloneElement(t,Yn({key:"label-implicit"},r)):A.createElement(jc,ll({key:"label-implicit",content:t},r)):lM(t)?A.createElement(jc,ll({key:"label-implicit",content:t},r)):t&&typeof t=="object"?A.createElement(jc,ll({},t,{key:"label-implicit"},r)):null};function ZJ(t){var{label:e,labelRef:n}=t,r=QJ();return eMe(e,r,n)||null}var jI={},zI={},RU;function tMe(){return RU||(RU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(zI)),zI}var LI={},MU;function nMe(){return MU||(MU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(LI)),LI}var jU;function rMe(){return jU||(jU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tMe(),n=nMe(),r=VN();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(jI)),jI}var VI,zU;function iMe(){return zU||(zU=1,VI=rMe().last),VI}var aMe=iMe();const sMe=Bl(aMe);var oMe=["valueAccessor"],lMe=["dataKey","clockWise","id","textBreakAll","zIndex"];function Xw(){return Xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xw.apply(null,arguments)}function LU(t,e){if(t==null)return{};var n,r,i=cMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var uMe=t=>Array.isArray(t.value)?sMe(t.value):t.value,JJ=A.createContext(void 0),dMe=JJ.Provider,eee=A.createContext(void 0),fMe=eee.Provider;function hMe(){return A.useContext(JJ)}function pMe(){return A.useContext(eee)}function u1(t){var{valueAccessor:e=uMe}=t,n=LU(t,oMe),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:o}=n,c=LU(n,lMe),u=hMe(),f=pMe(),h=u||f;return!h||!h.length?null:A.createElement(is,{zIndex:o??Vr.label},A.createElement(hi,{className:"recharts-label-list"},h.map((g,m)=>{var b,x=Br(r)?e(g,m):yn(g&&g.payload,r),w=Br(a)?{}:{id:"".concat(a,"-").concat(m)};return A.createElement(jc,Xw({key:"label-".concat(m)},ya(g),c,w,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:x,textBreakAll:s,viewBox:g.viewBox,index:m,zIndex:0}))})))}u1.displayName="LabelList";function tee(t){var{label:e}=t;return e?e===!0?A.createElement(u1,{key:"labelList-implicit"}):A.isValidElement(e)||lM(e)?A.createElement(u1,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(u1,Xw({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var nee=t=>t.graphicalItems.polarItems,gMe=ve([kn,iy],DR),eE=ve([nee,zn,gMe],NR),mMe=ve([eE],RR),tE=ve([mMe,US],MR),vMe=ve([tE,zn,eE],zR);ve([tE,zn,eE],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,s=yn(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:yn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var VU=()=>{},yMe=ve([tE,zn,eE,YS,kn],FR),bMe=ve([zn,VR,BR,VU,yMe,VU,Lt,kn],UR),ree=ve([zn,Lt,tE,vMe,ry,kn,bMe],$R),xMe=ve([ree,zn,ig],HR);ve([zn,ree,xMe,kn],WR);var wMe={radiusAxis:{},angleAxis:{}},iee=Wi({name:"polarAxis",initialState:wMe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:S5e,removeRadiusAxis:E5e,addAngleAxis:T5e,removeAngleAxis:A5e}=iee.actions,_Me=iee.reducer;function BU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BU(Object(n),!0).forEach(function(r){SMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SMe(t,e,n){return(e=EMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EMe(t){var e=TMe(t,"string");return typeof e=="symbol"?e:e+""}function TMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AMe=(t,e)=>e,cM=ve([nee,AMe],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),CMe=[],uM=(t,e,n)=>n?.length===0?CMe:n,aee=ve([US,cM,uM],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>FU(FU({},e.presentationProps),a.props))),i!=null)return i}}),IMe=ve([aee,cM,uM],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,s=yn(r,e.nameKey,e.name),o;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?o=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:SS(s,e.dataKey),color:o,payload:r,type:e.legendType}})}),kMe=ve([aee,cM,uM,Cr],(t,e,n,r)=>{if(!(e==null||t==null))return Nje({offset:r,pieSettings:e,displayedData:t,cells:n})}),BI={exports:{}},rn={};var UU;function PMe(){if(UU)return rn;UU=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function b(x){if(typeof x=="object"&&x!==null){var w=x.$$typeof;switch(w){case t:switch(x=x.type,x){case n:case i:case r:case c:case u:case g:return x;default:switch(x=x&&x.$$typeof,x){case s:case o:case h:case f:return x;case a:return x;default:return w}}case e:return w}}}return rn.ContextConsumer=a,rn.ContextProvider=s,rn.Element=t,rn.ForwardRef=o,rn.Fragment=n,rn.Lazy=h,rn.Memo=f,rn.Portal=e,rn.Profiler=i,rn.StrictMode=r,rn.Suspense=c,rn.SuspenseList=u,rn.isContextConsumer=function(x){return b(x)===a},rn.isContextProvider=function(x){return b(x)===s},rn.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},rn.isForwardRef=function(x){return b(x)===o},rn.isFragment=function(x){return b(x)===n},rn.isLazy=function(x){return b(x)===h},rn.isMemo=function(x){return b(x)===f},rn.isPortal=function(x){return b(x)===e},rn.isProfiler=function(x){return b(x)===i},rn.isStrictMode=function(x){return b(x)===r},rn.isSuspense=function(x){return b(x)===c},rn.isSuspenseList=function(x){return b(x)===u},rn.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===c||x===u||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===f||x.$$typeof===s||x.$$typeof===a||x.$$typeof===o||x.$$typeof===m||x.getModuleId!==void 0)},rn.typeOf=b,rn}var $U;function DMe(){return $U||($U=1,BI.exports=PMe()),BI.exports}var OMe=DMe(),qU=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",GU=null,FI=null,see=t=>{if(t===GU&&Array.isArray(FI))return FI;var e=[];return A.Children.forEach(t,n=>{Br(n)||(OMe.isFragment(n)?e=e.concat(see(n.props.children)):e.push(n))}),FI=e,GU=t,e};function dM(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>qU(i)):r=[qU(e)],see(t).forEach(i=>{var a=tf(i,"type.displayName")||tf(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var UI={},HU;function NMe(){return HU||(HU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(UI)),UI}var $I,KU;function RMe(){return KU||(KU=1,$I=NMe().isPlainObject),$I}var MMe=RMe();const jMe=Bl(MMe);var WU,YU,XU,QU,ZU;function JU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function e8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JU(Object(n),!0).forEach(function(r){zMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zMe(t,e,n){return(e=LMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LMe(t){var e=VMe(t,"string");return typeof e=="symbol"?e:e+""}function VMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qw(){return Qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qw.apply(null,arguments)}function Em(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var t8=(t,e,n,r,i)=>{var a=n-r,s;return s=Fn(WU||(WU=Em(["M ",",",""])),t,e),s+=Fn(YU||(YU=Em(["L ",",",""])),t+n,e),s+=Fn(XU||(XU=Em(["L ",",",""])),t+n-a/2,e+i),s+=Fn(QU||(QU=Em(["L ",",",""])),t+n-a/2-r,e+i),s+=Fn(ZU||(ZU=Em(["L ",","," Z"])),t,e),s},BMe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},FMe=t=>{var e=ei(t,BMe),{x:n,y:r,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:c,animationDuration:u,animationBegin:f,isUpdateAnimationActive:h}=e,g=A.useRef(null),[m,b]=A.useState(-1),x=A.useRef(i),w=A.useRef(a),S=A.useRef(s),T=A.useRef(n),I=A.useRef(r),N=MS(t,"trapezoid-");if(A.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var H=g.current.getTotalLength();H&&b(H)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var O=Qt("recharts-trapezoid",o);if(!h)return A.createElement("g",null,A.createElement("path",Qw({},ya(e),{className:O,d:t8(n,r,i,a,s)})));var P=x.current,k=w.current,D=S.current,R=T.current,z=I.current,L="0px ".concat(m===-1?1:m,"px"),B="".concat(m,"px 0px"),j=CQ(["strokeDasharray"],u,c);return A.createElement(RS,{animationId:N,key:N,canBegin:m>0,duration:u,easing:c,isActive:h,begin:f},H=>{var X=br(P,i,H),q=br(k,a,H),W=br(D,s,H),J=br(R,n,H),ne=br(z,r,H);g.current&&(x.current=X,w.current=q,S.current=W,T.current=J,I.current=ne);var Y=H>0?{transition:j,strokeDasharray:B}:{strokeDasharray:L};return A.createElement("path",Qw({},ya(e),{className:O,d:t8(J,ne,X,q,W),ref:g,style:e8(e8({},Y),e.style)}))})},UMe=["option","shapeType","activeClassName"];function $Me(t,e){if(t==null)return{};var n,r,i=qMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function n8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n8(Object(n),!0).forEach(function(r){GMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GMe(t,e,n){return(e=HMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HMe(t){var e=KMe(t,"string");return typeof e=="symbol"?e:e+""}function KMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WMe(t,e){return Zw(Zw({},e),t)}function YMe(t,e){return t==="symbols"}function r8(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return A.createElement(DQ,n);case"trapezoid":return A.createElement(FMe,n);case"sector":return A.createElement(MQ,n);case"symbols":if(YMe(e))return A.createElement(hX,n);break;case"curve":return A.createElement(QN,n);default:return null}}function XMe(t){return A.isValidElement(t)?t.props:t}function oee(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=$Me(t,UMe),a;if(A.isValidElement(e))a=A.cloneElement(e,Zw(Zw({},i),XMe(e)));else if(typeof e=="function")a=e(i,i.index);else if(jMe(e)&&typeof e!="boolean"){var s=WMe(e,i);a=A.createElement(r8,{shapeType:n,elementProps:s})}else{var o=i;a=A.createElement(r8,{shapeType:n,elementProps:o})}return i.isActive?A.createElement(hi,{className:r},a):a}var fM=(t,e,n)=>{var r=bn();return(i,a)=>s=>{t?.(i,a,s),r(vJ({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},hM=t=>{var e=bn();return(n,r)=>i=>{t?.(n,r,i),e(aOe())}},pM=(t,e,n)=>{var r=bn();return(i,a)=>s=>{t?.(i,a,s),r(sOe({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function lee(t){var{tooltipEntrySettings:e}=t,n=bn(),r=Ii(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(tOe(e)):i.current!==e&&n(nOe({prev:i.current,next:e})),i.current=e)},[e,n,r]),A.useLayoutEffect(()=>()=>{i.current&&(n(rOe(i.current)),i.current=null)},[n]),null}function QMe(t){var{legendPayload:e}=t,n=bn(),r=Ii(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(SQ(e)):i.current!==e&&n(EQ({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(TQ(i.current)),i.current=null)},[n]),null}function ZMe(t){var{legendPayload:e}=t,n=bn(),r=qe(Lt),i=A.useRef(null);return A.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(SQ(e)):i.current!==e&&n(EQ({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(TQ(i.current)),i.current=null)},[n]),null}var qI,JMe=()=>{var[t]=A.useState(()=>Gv("uid-"));return t},eje=(qI=Ane.useId)!==null&&qI!==void 0?qI:JMe;function tje(t,e){var n=eje();return e||(t?"".concat(t,"-").concat(n):n)}var nje=A.createContext(void 0),cee=t=>{var{id:e,type:n,children:r}=t,i=tje("recharts-".concat(n),e);return A.createElement(nje.Provider,{value:i},r(i))},rje={cartesianItems:[],polarItems:[]},uee=Wi({name:"graphicalItems",initialState:rje,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Tn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ps(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Tn()},removeCartesianGraphicalItem:{reducer(t,e){var n=Ps(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Tn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Tn()},removePolarGraphicalItem:{reducer(t,e){var n=Ps(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Tn()}}}),{addCartesianGraphicalItem:ije,replaceCartesianGraphicalItem:aje,removeCartesianGraphicalItem:sje,addPolarGraphicalItem:oje,removePolarGraphicalItem:lje}=uee.actions,cje=uee.reducer,uje=t=>{var e=bn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(ije(t)):n.current!==t&&e(aje({prev:n.current,next:t})),n.current=t},[e,t]),A.useLayoutEffect(()=>()=>{n.current&&(e(sje(n.current)),n.current=null)},[e]),null},dje=A.memo(uje);function fje(t){var e=bn();return A.useLayoutEffect(()=>(e(oje(t)),()=>{e(lje(t))}),[e,t]),null}var hje=["key"],pje=["onMouseEnter","onClick","onMouseLeave"],gje=["id"],mje=["id"];function i8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Un(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i8(Object(n),!0).forEach(function(r){vje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vje(t,e,n){return(e=yje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yje(t){var e=bje(t,"string");return typeof e=="symbol"?e:e+""}function bje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vu(){return vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vu.apply(null,arguments)}function nE(t,e){if(t==null)return{};var n,r,i=xje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function wje(t){var e=A.useMemo(()=>dM(t.children,fy),[t.children]),n=qe(r=>IMe(r,t.id,e));return n==null?null:A.createElement(ZMe,{legendPayload:n})}var _je=A.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:s,name:o,hide:c,tooltipType:u,id:f}=t,h={dataDefinedOnItem:r.map(g=>g.tooltipPayload),positions:r.map(g=>g.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:s,dataKey:e,nameKey:n,name:SS(o,e),hide:c,type:u,color:s,unit:"",graphicalItemId:f}};return A.createElement(lee,{tooltipEntrySettings:h})}),Sje=(t,e)=>t>e?"start":t<e?"end":"middle",Eje=(t,e,n)=>ui(typeof e=="function"?e(t):e,n,n*.8),Tje=(t,e,n)=>{var{top:r,left:i,width:a,height:s}=e,o=OQ(a,s),c=i+ui(t.cx,a,a/2),u=r+ui(t.cy,s,s/2),f=ui(t.innerRadius,o,0),h=Eje(n,t.outerRadius,o),g=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:u,innerRadius:f,outerRadius:h,maxRadius:g}},Aje=(t,e)=>{var n=Lr(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function Cje(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Ije=(t,e)=>{if(A.isValidElement(t))return A.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Qt("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=nE(e,hje);return A.createElement(QN,vu({},i,{type:"linear",className:n}))},kje=(t,e,n)=>{if(A.isValidElement(t))return A.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),A.isValidElement(r)))return r;var i=Qt("recharts-pie-label-text",Cje(t));return A.createElement(JS,vu({},e,{alignmentBaseline:"middle",className:i}),r)};function Pje(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:s}=n;if(!r||!i||!e)return null;var o=Ms(n),c=qv(i),u=qv(a),f=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=e.map((g,m)=>{var b=(g.startAngle+g.endAngle)/2,x=hr(g.cx,g.cy,g.outerRadius+f,b),w=Un(Un(Un(Un({},o),g),{},{stroke:"none"},c),{},{index:m,textAnchor:Sje(x.x,g.cx)},x),S=Un(Un(Un(Un({},o),g),{},{fill:"none",stroke:g.fill},u),{},{index:m,points:[hr(g.cx,g.cy,g.outerRadius,b),x],key:"line"});return A.createElement(is,{zIndex:Vr.label,key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(m)},A.createElement(hi,null,a&&Ije(a,S),kje(i,w,yn(g,s))))});return A.createElement(hi,{className:"recharts-pie-labels"},h)}function Dje(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?A.createElement(tee,{label:i}):A.createElement(Pje,{sectors:e,props:n,showLabels:r})}function Oje(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:s}=t,o=qe(of),c=qe(rM),u=qe(GOe),{onMouseEnter:f,onClick:h,onMouseLeave:g}=i,m=nE(i,pje),b=fM(f,i.dataKey,s),x=hM(g),w=pM(h,i.dataKey,s);return e==null||e.length===0?null:A.createElement(A.Fragment,null,e.map((S,T)=>{if(S?.startAngle===0&&S?.endAngle===0&&e.length!==1)return null;var I=u==null||u===s,N=String(T)===o&&(c==null||i.dataKey===c)&&I,O=o?r:null,P=n&&N?n:O,k=Un(Un({},S),{},{stroke:S.stroke,tabIndex:-1,[oQ]:T,[lQ]:s});return A.createElement(hi,vu({key:"sector-".concat(S?.startAngle,"-").concat(S?.endAngle,"-").concat(S.midAngle,"-").concat(T),tabIndex:-1,className:"recharts-pie-sector"},fS(m,S,T),{onMouseEnter:b(S,T),onMouseLeave:x(S,T),onClick:w(S,T)}),A.createElement(oee,vu({option:a??P,index:T,shapeType:"sector",isActive:N},k)))}))}function Nje(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:s,startAngle:o,endAngle:c,dataKey:u,nameKey:f,tooltipType:h}=n,g=Math.abs(n.minAngle),m=Aje(o,c),b=Math.abs(m),x=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,w=r.filter(P=>yn(P,u,0)!==0).length,S=(b>=360?w:w-1)*x,T=b-w*g-S,I=r.reduce((P,k)=>{var D=yn(k,u,0);return P+(We(D)?D:0)},0),N;if(I>0){var O;N=r.map((P,k)=>{var D=yn(P,u,0),R=yn(P,f,k),z=Tje(n,a,P),L=(We(D)?D:0)/I,B,j=Un(Un({},P),i&&i[k]&&i[k].props);k?B=O.endAngle+Lr(m)*x*(D!==0?1:0):B=o;var H=B+Lr(m)*((D!==0?g:0)+L*T),X=(B+H)/2,q=(z.innerRadius+z.outerRadius)/2,W=[{name:R,value:D,payload:j,dataKey:u,type:h,graphicalItemId:n.id}],J=hr(z.cx,z.cy,q,X);return O=Un(Un(Un(Un({},n.presentationProps),{},{percent:L,cornerRadius:typeof s=="string"?parseFloat(s):s,name:R,tooltipPayload:W,midAngle:X,middleRadius:q,tooltipPosition:J},j),z),{},{value:D,dataKey:u,startAngle:B,endAngle:H,payload:j,paddingAngle:Lr(m)*x}),O})}return N}function Rje(t){var{showLabels:e,sectors:n,children:r}=t,i=A.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return A.createElement(fMe,{value:e?i:void 0},r)}function Mje(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:f,onAnimationStart:h,onAnimationEnd:g}=e,m=MS(e,"recharts-pie-"),b=n.current,[x,w]=A.useState(!1),S=A.useCallback(()=>{typeof g=="function"&&g(),w(!1)},[g]),T=A.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return A.createElement(Rje,{showLabels:!x,sectors:i},A.createElement(RS,{animationId:m,begin:s,duration:o,isActive:a,easing:c,onAnimationStart:T,onAnimationEnd:S,key:m},I=>{var N=[],O=i&&i[0],P=O?.startAngle;return i?.forEach((k,D)=>{var R=b&&b[D],z=D>0?tf(k,"paddingAngle",0):0;if(R){var L=br(R.endAngle-R.startAngle,k.endAngle-k.startAngle,I),B=Un(Un({},k),{},{startAngle:P+z,endAngle:P+L+z});N.push(B),P=B.endAngle}else{var{endAngle:j,startAngle:H}=k,X=br(0,j-H,I),q=Un(Un({},k),{},{startAngle:P+z,endAngle:P+X+z});N.push(q),P=q.endAngle}}),n.current=N,A.createElement(hi,null,A.createElement(Oje,{sectors:N,activeShape:u,inactiveShape:f,allOtherPieProps:e,shape:e.shape,id:r}))}),A.createElement(Dje,{showLabels:!x,sectors:i,props:e}),e.children)}var jje={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Vr.area};function zje(t){var{id:e}=t,n=nE(t,gje),{hide:r,className:i,rootTabIndex:a}=t,s=A.useMemo(()=>dM(t.children,fy),[t.children]),o=qe(f=>kMe(f,e,s)),c=A.useRef(null),u=Qt("recharts-pie",i);return r||o==null?(c.current=null,A.createElement(hi,{tabIndex:a,className:u})):A.createElement(is,{zIndex:t.zIndex},A.createElement(_je,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:o,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),A.createElement(hi,{tabIndex:a,className:u},A.createElement(Mje,{props:Un(Un({},n),{},{sectors:o}),previousSectorsRef:c,id:e})))}function dee(t){var e=ei(t,jje),{id:n}=e,r=nE(e,mje),i=Ms(r);return A.createElement(cee,{id:n,type:"pie"},a=>A.createElement(A.Fragment,null,A.createElement(fje,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),A.createElement(wje,vu({},r,{id:a})),A.createElement(zje,vu({},r,{id:a}))))}dee.displayName="Pie";function a8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a8(Object(n),!0).forEach(function(r){Lje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lje(t,e,n){return(e=Vje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vje(t){var e=Bje(t,"string");return typeof e=="symbol"?e:e+""}function Bje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fee=0,Fje={xAxis:{},yAxis:{},zAxis:{}},hee=Wi({name:"cartesianAxis",initialState:Fje,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Tn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Tn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Tn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Tn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Tn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Tn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Tn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Tn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Tn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var s=[...a,r].slice(-3);t.yAxis[n]=s8(s8({},t.yAxis[n]),{},{width:r,widthHistory:s})}}}}),{addXAxis:Uje,replaceXAxis:$je,removeXAxis:qje,addYAxis:Gje,replaceYAxis:Hje,removeYAxis:Kje,addZAxis:C5e,replaceZAxis:I5e,removeZAxis:k5e,updateYAxisWidth:Wje}=hee.actions,Yje=hee.reducer,Xje=ve([Cr],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Qje=ve([Xje,ql,Gl],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),pee=()=>qe(Qje),o8=(t,e,n)=>{var r=n??t;if(!Br(r))return ui(r,e,0)},Zje=(t,e,n)=>{var r={},i=t.filter(GS),a=t.filter(u=>u.stackId==null),s=i.reduce((u,f)=>(u[f.stackId]||(u[f.stackId]=[]),u[f.stackId].push(f),u),r),o=Object.entries(s).map(u=>{var[f,h]=u,g=h.map(b=>b.dataKey),m=o8(e,n,h[0].barSize);return{stackId:f,dataKeys:g,barSize:m}}),c=a.map(u=>{var f=[u.dataKey].filter(g=>g!=null),h=o8(e,n,u.barSize);return{stackId:void 0,dataKeys:f,barSize:h}});return[...o,...c]};function l8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l8(Object(n),!0).forEach(function(r){Jje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jje(t,e,n){return(e=e4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e4e(t){var e=t4e(t,"string");return typeof e=="symbol"?e:e+""}function t4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n4e(t,e,n,r,i){var a=r.length;if(!(a<1)){var s=ui(t,n,0,!0),o,c=[];if(un(r[0].barSize)){var u=!1,f=n/a,h=r.reduce((S,T)=>S+(T.barSize||0),0);h+=(a-1)*s,h>=n&&(h-=(a-1)*s,s=0),h>=n&&f>0&&(u=!0,f*=.9,h=a*f);var g=(n-h)/2>>0,m={offset:g-s,size:0};o=r.reduce((S,T)=>{var I,N={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:m.offset+m.size+s,size:u?f:(I=T.barSize)!==null&&I!==void 0?I:0}},O=[...S,N];return m=O[O.length-1].position,O},c)}else{var b=ui(e,n,0,!0);n-2*b-(a-1)*s<=0&&(s=0);var x=(n-2*b-(a-1)*s)/a;x>1&&(x>>=0);var w=un(i)?Math.min(x,i):x;o=r.reduce((S,T,I)=>[...S,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:b+(x+s)*I+(x-w)/2,size:w}}],c)}return o}}var r4e=(t,e,n,r,i,a,s)=>{var o=Br(s)?e:s,c=n4e(n,r,i!==a?i:a,t,o);return i!==a&&c!=null&&(c=c.map(u=>kx(kx({},u),{},{position:kx(kx({},u.position),{},{offset:u.position.offset-i/2})}))),c},i4e=(t,e)=>{var n=kR(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===n)}}}};function a4e(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&un(t.zIndex)?t.zIndex:e}var gee=t=>{var{chartData:e}=t,n=bn(),r=Ii();return A.useEffect(()=>r?()=>{}:(n(vU(e)),()=>{n(vU(void 0))}),[e,n,r]),null},c8={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},mee=Wi({name:"brush",initialState:c8,reducers:{setBrushSettings(t,e){return e.payload==null?c8:e.payload}}}),{setBrushSettings:P5e}=mee.actions,s4e=mee.reducer;function u8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Px(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u8(Object(n),!0).forEach(function(r){vee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vee(t,e,n){return(e=o4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o4e(t){var e=l4e(t,"string");return typeof e=="symbol"?e:e+""}function l4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c4e=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},u4e=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return c4e({x:e,y:n},{x:r,y:i})};class rE{static create(e){return new rE(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}vee(rE,"EPS",1e-4);var d4e=t=>{var e=Object.keys(t).reduce((n,r)=>Px(Px({},n),{},{[r]:rE.create(t[r])}),{});return Px(Px({},e),{},{apply(n){var{bandAware:r,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(a=>{var[s,o]=a;return[s,e[s].apply(o,{bandAware:r,position:i})]}))},isInRange(n){return Object.keys(n).every(r=>e[r].isInRange(n[r]))}})};function f4e(t){return(t%180+180)%180}var h4e=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=f4e(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},p4e={dots:[],areas:[],lines:[]},yee=Wi({name:"referenceElements",initialState:p4e,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Ps(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Ps(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Ps(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:D5e,removeDot:O5e,addArea:N5e,removeArea:R5e,addLine:g4e,removeLine:m4e}=yee.actions,v4e=yee.reducer,bee=A.createContext(void 0),y4e=t=>{var{children:e}=t,[n]=A.useState("".concat(Gv("recharts"),"-clip")),r=pee();if(r==null)return null;var{x:i,y:a,width:s,height:o}=r;return A.createElement(bee.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:a,height:o,width:s}))),e)},b4e=()=>A.useContext(bee);function d8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function f8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d8(Object(n),!0).forEach(function(r){x4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x4e(t,e,n){return(e=w4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w4e(t){var e=_4e(t,"string");return typeof e=="symbol"?e:e+""}function _4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jw(){return Jw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jw.apply(null,arguments)}var S4e=(t,e)=>{var n;if(A.isValidElement(t))n=A.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!un(e.x1)||!un(e.y1)||!un(e.x2)||!un(e.y2))return null;n=A.createElement("line",Jw({},e,{className:"recharts-reference-line-line"}))}return n},E4e=(t,e,n,r,i,a)=>{var{x:s,width:o}=a,c=i.y.apply(t,{position:n});if(ba(c)||e==="discard"&&!i.y.isInRange(c))return null;var u=[{x:s+o,y:c},{x:s,y:c}];return r==="left"?u.reverse():u},T4e=(t,e,n,r,i,a)=>{var{y:s,height:o}=a,c=i.x.apply(t,{position:n});if(ba(c)||e==="discard"&&!i.x.isInRange(c))return null;var u=[{x:c,y:s+o},{x:c,y:s}];return r==="top"?u.reverse():u},A4e=(t,e,n,r)=>{var i=t.map(a=>r.apply(a,{position:n}));return e==="discard"&&i.some(a=>!r.isInRange(a))?null:i},C4e=(t,e,n,r,i,a)=>{var{x:s,y:o,segment:c,ifOverflow:u}=a,f=Qa(s),h=Qa(o);return h?E4e(o,u,n,i,t,e):f?T4e(s,u,n,r,t,e):c!=null&&c.length===2?A4e(c,u,n,t):null};function I4e(t){var e=bn();return A.useEffect(()=>(e(g4e(t)),()=>{e(m4e(t))})),null}function k4e(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:a}=t,s=Ii(),o=b4e(),c=qe(P=>jo(P,e)),u=qe(P=>zo(P,n)),f=qe(P=>Pp(P,"xAxis",e,s)),h=qe(P=>Pp(P,"yAxis",n,s)),g=X0();if(!o||!g||c==null||u==null||f==null||h==null)return null;var m=d4e({x:f,y:h}),b=C4e(m,g,t.position,c.orientation,u.orientation,t);if(!b)return null;var[{x,y:w},{x:S,y:T}]=b,I=a==="hidden"?"url(#".concat(o,")"):void 0,N=f8(f8({clipPath:I},ya(t)),{},{x1:x,y1:w,x2:S,y2:T}),O=u4e({x1:x,y1:w,x2:S,y2:T});return A.createElement(is,{zIndex:t.zIndex},A.createElement(hi,{className:Qt("recharts-reference-line",i)},S4e(r,N),A.createElement(XJ,Jw({},O,{lowerWidth:O.width,upperWidth:O.width}),A.createElement(ZJ,{label:t.label}),t.children)))}var P4e={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Vr.line};function gM(t){var e=ei(t,P4e);return A.createElement(A.Fragment,null,A.createElement(I4e,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),A.createElement(k4e,e))}gM.displayName="ReferenceLine";function xee(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function D4e(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return h4e(r,n)}function O4e(t,e,n){var r=n==="width",{x:i,y:a,width:s,height:o}=t;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function a0(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function N4e(t,e){return xee(t,e+1)}function R4e(t,e,n,r,i){for(var a=(r||[]).slice(),{start:s,end:o}=e,c=0,u=1,f=s,h=function(){var b=r?.[c];if(b===void 0)return{v:xee(r,u)};var x=c,w,S=()=>(w===void 0&&(w=n(b,x)),w),T=b.coordinate,I=c===0||a0(t,T,S,f,o);I||(c=0,f=s,u+=1),I&&(f=T+t*(S()/2+i),c+=u)},g;u<=a.length;)if(g=h(),g)return g.v;return[]}function M4e(t,e,n,r,i){var a=(r||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=e,u=1;u<=s;u++){for(var f=(s-1)%u,h=o,g=!0,m=function(){var T=r[b],I=b,N,O=()=>(N===void 0&&(N=n(T,I)),N),P=T.coordinate,k=b===f||a0(t,P,O,h,c);if(!k)return g=!1,1;k&&(h=P+t*(O()/2+i))},b=f;b<s&&!m();b+=u);if(g){for(var x=[],w=f;w<s;w+=u)x.push(r[w]);return x}}return[]}function h8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h8(Object(n),!0).forEach(function(r){j4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j4e(t,e,n){return(e=z4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z4e(t){var e=L4e(t,"string");return typeof e=="symbol"?e:e+""}function L4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function V4e(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:o}=e,{end:c}=e,u=function(g){var m=a[g],b,x=()=>(b===void 0&&(b=n(m,g)),b);if(g===s-1){var w=t*(m.coordinate+t*x()/2-c);a[g]=m=ri(ri({},m),{},{tickCoord:w>0?m.coordinate-w*t:m.coordinate})}else a[g]=m=ri(ri({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var S=a0(t,m.tickCoord,x,o,c);S&&(c=m.tickCoord-t*(x()/2+i),a[g]=ri(ri({},m),{},{isShow:!0}))}},f=s-1;f>=0;f--)u(f);return a}function B4e(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,{start:c,end:u}=e;if(a){var f=r[o-1],h=n(f,o-1),g=t*(f.coordinate+t*h/2-u);if(s[o-1]=f=ri(ri({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate}),f.tickCoord!=null){var m=a0(t,f.tickCoord,()=>h,c,u);m&&(u=f.tickCoord-t*(h/2+i),s[o-1]=ri(ri({},f),{},{isShow:!0}))}}for(var b=a?o-1:o,x=function(T){var I=s[T],N,O=()=>(N===void 0&&(N=n(I,T)),N);if(T===0){var P=t*(I.coordinate-t*O()/2-c);s[T]=I=ri(ri({},I),{},{tickCoord:P<0?I.coordinate-P*t:I.coordinate})}else s[T]=I=ri(ri({},I),{},{tickCoord:I.coordinate});if(I.tickCoord!=null){var k=a0(t,I.tickCoord,O,c,u);k&&(c=I.tickCoord+t*(O()/2+i),s[T]=ri(ri({},I),{},{isShow:!0}))}},w=0;w<b;w++)x(w);return s}function mM(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:f,angle:h}=t;if(!i||!i.length||!r)return[];if(We(c)||NS.isSsr){var g;return(g=N4e(i,We(c)?c:0))!==null&&g!==void 0?g:[]}var m=[],b=o==="top"||o==="bottom"?"width":"height",x=f&&b==="width"?ov(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},w=(I,N)=>{var O=typeof u=="function"?u(I.value,N):I.value;return b==="width"?D4e(ov(O,{fontSize:e,letterSpacing:n}),x,h):ov(O,{fontSize:e,letterSpacing:n})[b]},S=i.length>=2?Lr(i[1].coordinate-i[0].coordinate):1,T=O4e(a,S,b);return c==="equidistantPreserveStart"?R4e(S,T,w,i,s):c==="equidistantPreserveEnd"?M4e(S,T,w,i,s):(c==="preserveStart"||c==="preserveStartEnd"?m=B4e(S,T,w,i,s,c==="preserveStartEnd"):m=V4e(S,T,w,i,s),m.filter(I=>I.isShow))}var F4e=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=n?n.getBoundingClientRect().width:0,c=i+a,u=s+c+o+(n?r:0);return Math.round(u)}return 0},U4e=["axisLine","width","height","className","hide","ticks","axisType"];function $4e(t,e){if(t==null)return{};var n,r,i=q4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function q4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function lf(){return lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lf.apply(null,arguments)}function p8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ur(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p8(Object(n),!0).forEach(function(r){G4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G4e(t,e,n){return(e=H4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H4e(t){var e=K4e(t,"string");return typeof e=="symbol"?e:e+""}function K4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wl={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Vr.axis};function W4e(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=t;if(!o)return null;var u=ur(ur(ur({},c),Ms(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!s||a==="bottom"&&s);u=ur(ur({},u),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(a==="left"&&!s||a==="right"&&s);u=ur(ur({},u),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return A.createElement("line",lf({},u,{className:Qt("recharts-cartesian-axis-line",tf(o,"className"))}))}function Y4e(t,e,n,r,i,a,s,o,c){var u,f,h,g,m,b,x=o?-1:1,w=t.tickSize||s,S=We(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":u=f=t.coordinate,g=n+ +!o*i,h=g-x*w,b=h-x*c,m=S;break;case"left":h=g=t.coordinate,f=e+ +!o*r,u=f-x*w,m=u-x*c,b=S;break;case"right":h=g=t.coordinate,f=e+ +o*r,u=f+x*w,m=u+x*c,b=S;break;default:u=f=t.coordinate,g=n+ +o*i,h=g+x*w,b=h+x*c,m=S;break}return{line:{x1:u,y1:h,x2:f,y2:g},tick:{x:m,y:b}}}function X4e(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Q4e(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Z4e(t){var{option:e,tickProps:n,value:r}=t,i,a=Qt(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))i=A.cloneElement(e,ur(ur({},n),{},{className:a}));else if(typeof e=="function")i=e(ur(ur({},n),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Qt(s,e?.className)),i=A.createElement(JS,lf({},n,{className:s}),r)}return i}var J4e=A.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:f,mirror:h,x:g,y:m,width:b,height:x,tickSize:w,tickMargin:S,fontSize:T,letterSpacing:I,getTicksConfig:N,events:O,axisType:P}=t,k=mM(ur(ur({},N),{},{ticks:n}),T,I),D=X4e(f,h),R=Q4e(f,h),z=Ms(N),L=qv(r),B={};typeof i=="object"&&(B=i);var j=ur(ur({},z),{},{fill:"none"},B),H=k.map(W=>ur({entry:W},Y4e(W,g,m,b,x,f,w,h,S))),X=H.map(W=>{var{entry:J,line:ne}=W;return A.createElement(hi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},i&&A.createElement("line",lf({},j,ne,{className:Qt("recharts-cartesian-axis-tick-line",tf(i,"className"))})))}),q=H.map((W,J)=>{var{entry:ne,tick:Y}=W,U=ur(ur(ur(ur({textAnchor:D,verticalAnchor:R},z),{},{stroke:"none",fill:a},L),Y),{},{index:J,payload:ne,visibleTicksCount:k.length,tickFormatter:s,padding:c},u);return A.createElement(hi,lf({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ne.value,"-").concat(ne.coordinate,"-").concat(ne.tickCoord)},fS(O,ne,J)),r&&A.createElement(Z4e,{option:r,tickProps:U,value:"".concat(typeof s=="function"?s(ne.value,J):ne.value).concat(o||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},q.length>0&&A.createElement(is,{zIndex:Vr.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:e},q)),X.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},X))}),e3e=A.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:s,ticks:o,axisType:c}=t,u=$4e(t,U4e),[f,h]=A.useState(""),[g,m]=A.useState(""),b=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var w;return F4e({ticks:b.current,label:(w=t.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=A.useCallback(w=>{if(w){var S=w.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=S;var T=S[0];if(T){var I=window.getComputedStyle(T),N=I.fontSize,O=I.letterSpacing;(N!==f||O!==g)&&(h(N),m(O))}}},[f,g]);return s||r!=null&&r<=0||i!=null&&i<=0?null:A.createElement(is,{zIndex:t.zIndex},A.createElement(hi,{className:Qt("recharts-cartesian-axis",a)},A.createElement(W4e,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Ms(t)}),A.createElement(J4e,{ref:x,axisType:c,events:u,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(XJ,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(ZJ,{label:t.label,labelRef:t.labelRef}),t.children)))}),vM=A.forwardRef((t,e)=>{var n=ei(t,wl);return A.createElement(e3e,lf({},n,{ref:e}))});vM.displayName="CartesianAxis";var t3e=["x1","y1","x2","y2","key"],n3e=["offset"],r3e=["xAxisId","yAxisId"],i3e=["xAxisId","yAxisId"];function g8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function si(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g8(Object(n),!0).forEach(function(r){a3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a3e(t,e,n){return(e=s3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s3e(t){var e=o3e(t,"string");return typeof e=="symbol"?e:e+""}function o3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kd(){return kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kd.apply(null,arguments)}function e_(t,e){if(t==null)return{};var n,r,i=l3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function l3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var c3e=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:s,ry:o}=t;return A.createElement("rect",{x:r,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function wee(t){var{option:e,lineItemProps:n}=t,r;if(A.isValidElement(e))r=A.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:s,x2:o,y2:c,key:u}=n,f=e_(n,t3e),h=(i=Ms(f))!==null&&i!==void 0?i:{},{offset:g}=h,m=e_(h,n3e);r=A.createElement("line",kd({},m,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:u}))}return r}function u3e(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=e_(t,r3e),c=i.map((u,f)=>{var h=si(si({},o),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(f),index:f});return A.createElement(wee,{key:"line-".concat(f),option:r,lineItemProps:h})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function d3e(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=e_(t,i3e),c=i.map((u,f)=>{var h=si(si({},o),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(f),index:f});return A.createElement(wee,{option:r,lineItemProps:h,key:"line-".concat(f)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function f3e(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=t;if(!c||!e||!e.length||o==null)return null;var u=o.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var m=!u[g+1],b=m?i+s-h:u[g+1]-h;if(b<=0)return null;var x=g%e.length;return A.createElement("rect",{key:"react-".concat(g),y:h,x:r,height:b,width:a,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function h3e(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:s,height:o,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var u=c.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var m=!u[g+1],b=m?i+s-h:u[g+1]-h;if(b<=0)return null;var x=g%n.length;return A.createElement("rect",{key:"react-".concat(g),x:h,y:a,width:b,height:o,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var p3e=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return iQ(mM(si(si(si({},wl),n),{},{ticks:aQ(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},g3e=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return iQ(mM(si(si(si({},wl),n),{},{ticks:aQ(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},m3e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Vr.grid};function iE(t){var e=pQ(),n=gQ(),r=hQ(),i=si(si({},ei(t,m3e)),{},{x:We(t.x)?t.x:r.left,y:We(t.y)?t.y:r.top,width:We(t.width)?t.width:r.width,height:We(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:u,height:f,syncWithTicks:h,horizontalValues:g,verticalValues:m}=i,b=Ii(),x=qe(R=>aU(R,"xAxis",a,b)),w=qe(R=>aU(R,"yAxis",s,b));if(!Do(u)||!Do(f)||!We(o)||!We(c))return null;var S=i.verticalCoordinatesGenerator||p3e,T=i.horizontalCoordinatesGenerator||g3e,{horizontalPoints:I,verticalPoints:N}=i;if((!I||!I.length)&&typeof T=="function"){var O=g&&g.length,P=T({yAxis:w?si(si({},w),{},{ticks:O?g:w.ticks}):void 0,width:e??u,height:n??f,offset:r},O?!0:h);Iw(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(I=P)}if((!N||!N.length)&&typeof S=="function"){var k=m&&m.length,D=S({xAxis:x?si(si({},x),{},{ticks:k?m:x.ticks}):void 0,width:e??u,height:n??f,offset:r},k?!0:h);Iw(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(N=D)}return A.createElement(is,{zIndex:i.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(c3e,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(f3e,kd({},i,{horizontalPoints:I})),A.createElement(h3e,kd({},i,{verticalPoints:N})),A.createElement(u3e,kd({},i,{offset:r,horizontalPoints:I,xAxis:x,yAxis:w})),A.createElement(d3e,kd({},i,{offset:r,verticalPoints:N,xAxis:x,yAxis:w}))))}iE.displayName="CartesianGrid";var v3e={},_ee=Wi({name:"errorBars",initialState:v3e,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:M5e,replaceErrorBar:j5e,removeErrorBar:z5e}=_ee.actions,y3e=_ee.reducer,b3e=["children"];function x3e(t,e){if(t==null)return{};var n,r,i=w3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function w3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _3e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},S3e=A.createContext(_3e);function E3e(t){var{children:e}=t,n=x3e(t,b3e);return A.createElement(S3e.Provider,{value:n},e)}function See(t,e){var n,r,i=qe(u=>jo(u,t)),a=qe(u=>zo(u,e)),s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Rr.allowDataOverflow,o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:Mr.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function T3e(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=pee(),{needClipX:a,needClipY:s,needClip:o}=See(e,n);if(!o||!i)return null;var{x:c,y:u,width:f,height:h}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:a?c:c-f/2,y:s?u:u-h/2,width:a?f:f*2,height:s?h:h*2}))}var GI={exports:{}},HI={};var m8;function A3e(){if(m8)return HI;m8=1;var t=Np();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return HI.useSyncExternalStoreWithSelector=function(c,u,f,h,g){var m=i(null);if(m.current===null){var b={hasValue:!1,value:null};m.current=b}else b=m.current;m=s(function(){function w(O){if(!S){if(S=!0,T=O,O=h(O),g!==void 0&&b.hasValue){var P=b.value;if(g(P,O))return I=P}return I=O}if(P=I,n(T,O))return P;var k=h(O);return g!==void 0&&g(P,k)?(T=O,P):(T=O,I=k)}var S=!1,T,I,N=f===void 0?null:f;return[function(){return w(u())},N===null?void 0:function(){return w(N())}]},[u,f,h,g]);var x=r(c,m[0],m[1]);return a(function(){b.hasValue=!0,b.value=x},[x]),o(x),x},HI}var v8;function C3e(){return v8||(v8=1,GI.exports=A3e()),GI.exports}C3e();function I3e(t){t()}function k3e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){I3e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var y8={notify(){},get:()=>[]};function P3e(t,e){let n,r=y8,i=0,a=!1;function s(x){f();const w=r.subscribe(x);let S=!1;return()=>{S||(S=!0,w(),h())}}function o(){r.notify()}function c(){b.onStateChange&&b.onStateChange()}function u(){return a}function f(){i++,n||(n=t.subscribe(c),r=k3e())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=y8)}function g(){a||(a=!0,f())}function m(){a&&(a=!1,h())}const b={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:g,tryUnsubscribe:m,getListeners:()=>r};return b}var D3e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",O3e=D3e(),N3e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",R3e=N3e(),M3e=()=>O3e||R3e?A.useLayoutEffect:A.useEffect,j3e=M3e();function b8(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function z3e(t,e){if(b8(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!b8(t[n[i]],e[n[i]]))return!1;return!0}var L3e=Symbol.for("react-redux-context"),V3e=typeof globalThis<"u"?globalThis:{};function B3e(){if(!A.createContext)return{};const t=V3e[L3e]??=new Map;let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var F3e=B3e();function U3e(t){const{children:e,context:n,serverState:r,store:i}=t,a=A.useMemo(()=>{const c=P3e(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=A.useMemo(()=>i.getState(),[i]);j3e(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=n||F3e;return A.createElement(o.Provider,{value:a},e)}var $3e=U3e,q3e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function G3e(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function yM(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(q3e.has(r)){if(t[r]==null&&e[r]==null)continue;if(!z3e(t[r],e[r]))return!1}else if(!G3e(t[r],e[r]))return!1;return!0}function xf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:fee}function wf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:fee}var H3e="Invariant failed";function K3e(t,e){throw new Error(H3e)}function k2(){return k2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k2.apply(null,arguments)}function t_(t){return A.createElement(oee,k2({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var W3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(We(e))return e;var a=We(r)||Br(r);return a?e(r,i):(a||K3e(),n)}},Y3e=(t,e,n)=>n,X3e=(t,e)=>e,hy=ve([OR,X3e],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Q3e=ve([hy],t=>t?.maxBarSize),Z3e=(t,e,n,r)=>r,J3e=ve([Lt,OR,xf,wf,Y3e],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),eze=(t,e,n)=>{var r=Lt(t),i=xf(t,e),a=wf(t,e);if(!(i==null||a==null))return r==="horizontal"?_2(t,"yAxis",a,n):_2(t,"xAxis",i,n)},tze=(t,e)=>{var n=Lt(t),r=xf(t,e),i=wf(t,e);if(!(r==null||i==null))return n==="horizontal"?iU(t,"xAxis",r):iU(t,"yAxis",i)},nze=ve([J3e,W2e,tze],Zje),rze=(t,e,n)=>{var r,i,a=hy(t,e);if(a!=null){var s=xf(t,e),o=wf(t,e);if(!(s==null||o==null)){var c=Lt(t),u=OZ(t),{maxBarSize:f}=a,h=Br(f)?u:f,g,m;return c==="horizontal"?(g=Op(t,"xAxis",s,n),m=Dp(t,"xAxis",s,n)):(g=Op(t,"yAxis",o,n),m=Dp(t,"yAxis",o,n)),(r=(i=Cw(g,m,!0))!==null&&i!==void 0?i:h)!==null&&r!==void 0?r:0}}},Eee=(t,e,n)=>{var r=Lt(t),i=xf(t,e),a=wf(t,e);if(!(i==null||a==null)){var s,o;return r==="horizontal"?(s=Op(t,"xAxis",i,n),o=Dp(t,"xAxis",i,n)):(s=Op(t,"yAxis",a,n),o=Dp(t,"yAxis",a,n)),Cw(s,o)}},ize=ve([nze,OZ,K2e,NZ,rze,Eee,Q3e],r4e),aze=(t,e,n)=>{var r=xf(t,e);if(r!=null)return Op(t,"xAxis",r,n)},sze=(t,e,n)=>{var r=wf(t,e);if(r!=null)return Op(t,"yAxis",r,n)},oze=(t,e,n)=>{var r=xf(t,e);if(r!=null)return Dp(t,"xAxis",r,n)},lze=(t,e,n)=>{var r=wf(t,e);if(r!=null)return Dp(t,"yAxis",r,n)},cze=ve([ize,hy],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),uze=ve([eze,hy],i4e),dze=ve([Cr,KN,aze,sze,oze,lze,cze,Lt,M2e,Eee,uze,hy,Z3e],(t,e,n,r,i,a,s,o,c,u,f,h,g)=>{var{chartData:m,dataStartIndex:b,dataEndIndex:x}=c;if(!(h==null||s==null||e==null||o!=="horizontal"&&o!=="vertical"||n==null||r==null||i==null||a==null||u==null)){var{data:w}=h,S;if(w!=null&&w.length>0?S=w:S=m?.slice(b,x+1),S!=null)return Bze({layout:o,barSettings:h,pos:s,parentViewBox:e,bandSize:u,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:f,displayedData:S,offset:t,cells:g,dataStartIndex:b})}}),fze=["index"];function P2(){return P2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P2.apply(null,arguments)}function hze(t,e){if(t==null)return{};var n,r,i=pze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Tee=A.createContext(void 0),gze=t=>{var e=A.useContext(Tee);if(e!=null)return e.stackId;if(t!=null)return qAe(t)},mze=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),vze=t=>{var e=A.useContext(Tee);if(e!=null){var{stackId:n}=e;return"url(#".concat(mze(n,t),")")}},yze=t=>{var{index:e}=t,n=hze(t,fze),r=vze(e);return A.createElement(hi,P2({className:"recharts-bar-stack-layer",clipPath:r},n))},bze=["onMouseEnter","onMouseLeave","onClick"],xze=["value","background","tooltipPosition"],wze=["id"],_ze=["onMouseEnter","onClick","onMouseLeave"];function Vl(){return Vl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vl.apply(null,arguments)}function x8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x8(Object(n),!0).forEach(function(r){Sze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sze(t,e,n){return(e=Eze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eze(t){var e=Tze(t,"string");return typeof e=="symbol"?e:e+""}function Tze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n_(t,e){if(t==null)return{};var n,r,i=Aze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Aze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Cze=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:SS(n,e),payload:t}]},Ize=A.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:s,unit:o,tooltipType:c,id:u}=t,f={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:SS(a,e),hide:s,type:c,color:i,unit:o,graphicalItemId:u}};return A.createElement(lee,{tooltipEntrySettings:f})});function kze(t){var e=qe(of),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:s,onMouseLeave:o,onClick:c}=a,u=n_(a,bze),f=fM(s,r,a.id),h=hM(o),g=pM(c,r,a.id);if(!i||n==null)return null;var m=qv(i);return A.createElement(is,{zIndex:a4e(i,Vr.barBackground)},n.map((b,x)=>{var{value:w,background:S,tooltipPosition:T}=b,I=n_(b,xze);if(!S)return null;var N=f(b,x),O=h(b,x),P=g(b,x),k=wi(wi(wi(wi(wi({option:i,isActive:String(x)===e},I),{},{fill:"#eee"},S),m),fS(u,b,x)),{},{onMouseEnter:N,onMouseLeave:O,onClick:P,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return A.createElement(t_,Vl({key:"background-bar-".concat(x)},k))}))}function Pze(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return wi(wi({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return A.createElement(dMe,{value:e?i:void 0},n)}function Dze(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:s}=t,o=qe(of),c=qe(rM),u=n&&String(a)===o&&(c==null||s===c),f=u?n:e;return u?A.createElement(is,{zIndex:Vr.activeBar},A.createElement(t_,Vl({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s}))):A.createElement(t_,Vl({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s}))}function Oze(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return A.createElement(t_,Vl({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function Nze(t){var e,{data:n,props:r}=t,i=(e=Ms(r))!==null&&e!==void 0?e:{},{id:a}=i,s=n_(i,wze),{shape:o,dataKey:c,activeBar:u}=r,{onMouseEnter:f,onClick:h,onMouseLeave:g}=r,m=n_(r,_ze),b=fM(f,c,a),x=hM(g),w=pM(h,c,a);return n?A.createElement(A.Fragment,null,n.map((S,T)=>A.createElement(yze,Vl({index:T,key:"rectangle-".concat(S?.x,"-").concat(S?.y,"-").concat(S?.value,"-").concat(T),className:"recharts-bar-rectangle"},fS(m,S,T),{onMouseEnter:b(S,T),onMouseLeave:x(S,T),onClick:w(S,T)}),u?A.createElement(Dze,{shape:o,activeBar:u,baseProps:s,entry:S,index:T,dataKey:c}):A.createElement(Oze,{shape:o,baseProps:s,entry:S,index:T,dataKey:c})))):null}function Rze(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:f}=e,h=n.current,g=MS(e,"recharts-bar-"),[m,b]=A.useState(!1),x=!m,w=A.useCallback(()=>{typeof u=="function"&&u(),b(!1)},[u]),S=A.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return A.createElement(Pze,{showLabels:x,rects:r},A.createElement(RS,{animationId:g,begin:s,duration:o,isActive:a,easing:c,onAnimationEnd:w,onAnimationStart:S,key:g},T=>{var I=T===1?r:r?.map((N,O)=>{var P=h&&h[O];if(P)return wi(wi({},N),{},{x:br(P.x,N.x,T),y:br(P.y,N.y,T),width:br(P.width,N.width,T),height:br(P.height,N.height,T)});if(i==="horizontal"){var k=br(0,N.height,T),D=br(N.stackedBarStart,N.y,T);return wi(wi({},N),{},{y:D,height:k})}var R=br(0,N.width,T),z=br(N.stackedBarStart,N.x,T);return wi(wi({},N),{},{width:R,x:z})});return T>0&&(n.current=I??null),I==null?null:A.createElement(hi,null,A.createElement(Nze,{props:e,data:I}))}),A.createElement(tee,{label:e.label}),e.children)}function Mze(t){var e=A.useRef(null);return A.createElement(Rze,{previousRectanglesRef:e,props:t})}var Aee=0,jze=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:yn(t,e)}};class zze extends A.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:s,needClip:o,background:c,id:u}=this.props;if(e||n==null)return null;var f=Qt("recharts-bar",i),h=u;return A.createElement(hi,{className:f,id:u},o&&A.createElement("defs",null,A.createElement(T3e,{clipPathId:h,xAxisId:a,yAxisId:s})),A.createElement(hi,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(h,")"):void 0},A.createElement(kze,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),A.createElement(Mze,this.props)))}}var Lze={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Aee,xAxisId:0,yAxisId:0,zIndex:Vr.bar};function Vze(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f}=t,{needClip:h}=See(e,n),g=Q0(),m=Ii(),b=dM(t.children,fy),x=qe(T=>dze(T,t.id,m,b));if(g!=="vertical"&&g!=="horizontal")return null;var w,S=x?.[0];return S==null||S.height==null||S.width==null?w=0:w=g==="vertical"?S.height/2:S.width/2,A.createElement(E3e,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:jze,errorBarOffset:w},A.createElement(zze,Vl({},t,{layout:g,needClip:h,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f})))}function Bze(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:f,displayedData:h,offset:g,cells:m,parentViewBox:b,dataStartIndex:x}=t,w=e==="horizontal"?o:s,S=f?w.scale.domain():null,T=GAe({numericAxis:w}),I=w.scale(T);return h.map((N,O)=>{var P,k,D,R,z,L;if(f){var B=f[O+x];if(B==null)return null;P=VAe(B,S)}else P=yn(N,n),Array.isArray(P)||(P=[T,P]);var j=W3e(r,Aee)(P[1],O);if(e==="horizontal"){var H,[X,q]=[o.scale(P[0]),o.scale(P[1])];k=u9({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:N,index:O}),D=(H=q??X)!==null&&H!==void 0?H:void 0,R=i.size;var W=X-q;if(z=ba(W)?0:W,L={x:k,y:g.top,width:R,height:g.height},Math.abs(j)>0&&Math.abs(z)<Math.abs(j)){var J=Lr(z||j)*(Math.abs(j)-Math.abs(z));D-=J,z+=J}}else{var[ne,Y]=[s.scale(P[0]),s.scale(P[1])];if(k=ne,D=u9({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:N,index:O}),R=Y-ne,z=i.size,L={x:g.left,y:D,width:g.width,height:z},Math.abs(j)>0&&Math.abs(R)<Math.abs(j)){var U=Lr(R||j)*(Math.abs(j)-Math.abs(R));R+=U}}if(k==null||D==null||R==null||z==null)return null;var Q=wi(wi({},N),{},{stackedBarStart:I,x:k,y:D,width:R,height:z,value:f?P:P[1],payload:N,background:L,tooltipPosition:{x:k+R/2,y:D+z/2},parentViewBox:b},m&&m[O]&&m[O].props);return Q}).filter(Boolean)}function Fze(t){var e=ei(t,Lze),n=gze(e.stackId),r=Ii();return A.createElement(cee,{id:e.id,type:"bar"},i=>A.createElement(A.Fragment,null,A.createElement(QMe,{legendPayload:Cze(e)}),A.createElement(Ize,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),A.createElement(dje,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),A.createElement(is,{zIndex:e.zIndex},A.createElement(Vze,Vl({},e,{id:i})))))}var s0=A.memo(Fze,yM);s0.displayName="Bar";var Uze=["domain","range"],$ze=["domain","range"];function w8(t,e){if(t==null)return{};var n,r,i=qze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function _8(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Cee(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=w8(t,Uze),{domain:a,range:s}=e,o=w8(e,$ze);return!_8(n,a)||!_8(r,s)?!1:yM(i,o)}var Gze=["dangerouslySetInnerHTML","ticks","scale"],Hze=["id","scale"];function D2(){return D2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D2.apply(null,arguments)}function S8(t,e){if(t==null)return{};var n,r,i=Kze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Kze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Wze(t){var e=bn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(Uje(t)):n.current!==t&&e($je({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(qje(n.current)),n.current=null)},[e]),null}var Yze=t=>{var{xAxisId:e,className:n}=t,r=qe(KN),i=Ii(),a="xAxis",s=qe(S=>dJ(S,a,e,i)),o=qe(S=>oJ(S,e)),c=qe(S=>GDe(S,e)),u=qe(S=>UZ(S,e));if(o==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:f,ticks:h,scale:g}=t,m=S8(t,Gze),{id:b,scale:x}=u,w=S8(u,Hze);return A.createElement(vM,D2({},m,w,{x:c.x,y:c.y,width:o.width,height:o.height,className:Qt("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:s,axisType:a}))},Xze={allowDataOverflow:Rr.allowDataOverflow,allowDecimals:Rr.allowDecimals,allowDuplicatedCategory:Rr.allowDuplicatedCategory,angle:Rr.angle,axisLine:wl.axisLine,height:Rr.height,hide:!1,includeHidden:Rr.includeHidden,interval:Rr.interval,minTickGap:Rr.minTickGap,mirror:Rr.mirror,orientation:Rr.orientation,padding:Rr.padding,reversed:Rr.reversed,scale:Rr.scale,tick:Rr.tick,tickCount:Rr.tickCount,tickLine:wl.tickLine,tickSize:wl.tickSize,type:Rr.type,xAxisId:0},Qze=t=>{var e=ei(t,Xze);return A.createElement(A.Fragment,null,A.createElement(Wze,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),A.createElement(Yze,e))},aE=A.memo(Qze,Cee);aE.displayName="XAxis";var Zze=["dangerouslySetInnerHTML","ticks","scale"],Jze=["id","scale"];function O2(){return O2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O2.apply(null,arguments)}function E8(t,e){if(t==null)return{};var n,r,i=eLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function eLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function tLe(t){var e=bn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(Gje(t)):n.current!==t&&e(Hje({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(Kje(n.current)),n.current=null)},[e]),null}var nLe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,a=A.useRef(null),s=A.useRef(null),o=qe(KN),c=Ii(),u=bn(),f="yAxis",h=qe(P=>lJ(P,e)),g=qe(P=>KDe(P,e)),m=qe(P=>dJ(P,f,e,c)),b=qe(P=>$Z(P,e));if(A.useLayoutEffect(()=>{if(!(r!=="auto"||!h||lM(i)||A.isValidElement(i)||b==null)){var P=a.current;if(P){var k=P.getCalculatedWidth();Math.round(h.width)!==Math.round(k)&&u(Wje({id:e,width:k}))}}},[m,h,u,i,e,r,b]),h==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:x,ticks:w,scale:S}=t,T=E8(t,Zze),{id:I,scale:N}=b,O=E8(b,Jze);return A.createElement(vM,O2({},T,O,{ref:a,labelRef:s,x:g.x,y:g.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Qt("recharts-".concat(f," ").concat(f),n),viewBox:o,ticks:m,axisType:f}))},rLe={allowDataOverflow:Mr.allowDataOverflow,allowDecimals:Mr.allowDecimals,allowDuplicatedCategory:Mr.allowDuplicatedCategory,angle:Mr.angle,axisLine:wl.axisLine,hide:!1,includeHidden:Mr.includeHidden,interval:Mr.interval,minTickGap:Mr.minTickGap,mirror:Mr.mirror,orientation:Mr.orientation,padding:Mr.padding,reversed:Mr.reversed,scale:Mr.scale,tick:Mr.tick,tickCount:Mr.tickCount,tickLine:wl.tickLine,tickSize:wl.tickSize,type:Mr.type,width:Mr.width,yAxisId:0},iLe=t=>{var e=ei(t,rLe);return A.createElement(A.Fragment,null,A.createElement(tLe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),A.createElement(nLe,e))},sE=A.memo(iLe,Cee);sE.displayName="YAxis";var aLe=(t,e)=>e,bM=ve([aLe,Lt,BZ,kr,CJ,Wl,lNe,Cr],gNe),xM=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},Iee=Za("mouseClick"),kee=W0();kee.startListening({actionCreator:Iee,effect:(t,e)=>{var n=t.payload,r=bM(e.getState(),xM(n));r?.activeIndex!=null&&e.dispatch(oOe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var N2=Za("mouseMove"),Pee=W0(),Dx=null;Pee.startListening({actionCreator:N2,effect:(t,e)=>{var n=t.payload;Dx!==null&&cancelAnimationFrame(Dx);var r=xM(n);Dx=requestAnimationFrame(()=>{var i=e.getState(),a=QR(i,i.tooltip.settings.shared);if(a==="axis"){var s=bM(i,r);s?.activeIndex!=null?e.dispatch(bJ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(yJ())}Dx=null})}});function sLe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var T8={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Dee=Wi({name:"rootProps",initialState:T8,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:T8.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),oLe=Dee.reducer,{updateOptions:lLe}=Dee.actions,Oee=Wi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:cLe}=Oee.actions,uLe=Oee.reducer,Nee=Za("keyDown"),Ree=Za("focus"),wM=W0();wM.startListening({actionCreator:Nee,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=ZR(i,og(n),oy(n),uy(n)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=Wl(n);if(a==="Enter"){var u=Yw(n,"axis","hover",String(i.index));e.dispatch(E2({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var f=QDe(n),h=f==="left-to-right"?1:-1,g=a==="ArrowRight"?1:-1,m=o+g*h;if(!(c==null||m>=c.length||m<0)){var b=Yw(n,"axis","hover",String(m));e.dispatch(E2({active:!0,activeIndex:m.toString(),activeCoordinate:b}))}}}}}});wM.startListening({actionCreator:Ree,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",s=Yw(n,"axis","hover",String(a));e.dispatch(E2({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Ba=Za("externalEvent"),Mee=W0(),KI=new Map;Mee.startListening({actionCreator:Ba,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=KI.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),c={activeCoordinate:KOe(o),activeDataKey:rM(o),activeIndex:of(o),activeLabel:PJ(o),activeTooltipIndex:of(o),isTooltipActive:WOe(o)};n(c,r)}finally{KI.delete(i)}});KI.set(i,s)}}});var dLe=ve([ag],t=>t.tooltipItemPayloads),fLe=ve([dLe,cy,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(o=>o.settings.graphicalItemId===r);if(i!=null){var{positions:a}=i;if(a!=null){var s=e(a,n);return s}}}),jee=Za("touchMove"),zee=W0();zee.startListening({actionCreator:jee,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=QR(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var s=bM(r,xM({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(bJ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var f=u.getAttribute(oQ),h=(o=u.getAttribute(lQ))!==null&&o!==void 0?o:void 0,g=sg(r).find(x=>x.id===h);if(f==null||g==null||h==null)return;var{dataKey:m}=g,b=fLe(r,f,h);e.dispatch(vJ({activeDataKey:m,activeIndex:f,activeCoordinate:b,activeGraphicalItemId:h}))}}}});var hLe=kX({brush:s4e,cartesianAxis:Yje,chartData:HNe,errorBars:y3e,graphicalItems:cje,layout:NAe,legend:VCe,options:FNe,polarAxis:_Me,polarOptions:uLe,referenceElements:v4e,rootProps:oLe,tooltip:lOe,zIndex:kNe}),pLe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return iAe({reducer:hLe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([kee.middleware,Pee.middleware,wM.middleware,Mee.middleware,zee.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(qX({type:"raf"}))},devTools:{serialize:{replacer:sLe},name:"recharts-".concat(n)}})};function Lee(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Ii(),a=A.useRef(null);if(i)return n;a.current==null&&(a.current=pLe(e,r));var s=BN;return A.createElement($3e,{context:s,store:a.current},n)}function gLe(t){var{layout:e,margin:n}=t,r=bn(),i=Ii();return A.useEffect(()=>{i||(r(PAe(e)),r(kAe(n)))},[r,i,e,n]),null}var Vee=A.memo(gLe,yM);function Bee(t){var e=bn();return A.useEffect(()=>{e(lLe(t))},[e,t]),null}function A8(t){var{zIndex:e,isPanorama:n}=t,r=A.useRef(null),i=bn();return A.useLayoutEffect(()=>(r.current&&i(CNe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(INe({zIndex:e,isPanorama:n}))}),[i,e,n]),A.createElement("g",{tabIndex:-1,ref:r})}function C8(t){var{children:e,isPanorama:n}=t,r=qe(vNe);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return A.createElement(A.Fragment,null,i.map(s=>A.createElement(A8,{key:s,zIndex:s,isPanorama:n})),e,a.map(s=>A.createElement(A8,{key:s,zIndex:s,isPanorama:n})))}var mLe=["children"];function vLe(t,e){if(t==null)return{};var n,r,i=yLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function r_(){return r_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r_.apply(null,arguments)}var bLe={width:"100%",height:"100%",display:"block"},xLe=A.forwardRef((t,e)=>{var n=pQ(),r=gQ(),i=AQ();if(!Do(n)||!Do(r))return null;var{children:a,otherAttributes:s,title:o,desc:c}=t,u,f;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0),A.createElement(KY,r_({},s,{title:o,desc:c,role:f,tabIndex:u,width:n,height:r,style:bLe,ref:e}),a)}),wLe=t=>{var{children:e}=t,n=qe(CS);if(!n)return null;var{width:r,height:i,y:a,x:s}=n;return A.createElement(KY,{width:r,height:i,x:s,y:a},e)},I8=A.forwardRef((t,e)=>{var{children:n}=t,r=vLe(t,mLe),i=Ii();return i?A.createElement(wLe,null,A.createElement(C8,{isPanorama:!0},n)):A.createElement(xLe,r_({ref:e},r),A.createElement(C8,{isPanorama:!1},n))});function _Le(){var t=bn(),[e,n]=A.useState(null),r=qe(QAe);return A.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;un(a)&&a!==r&&t(OAe(a))}},[e,t,r]),n}function k8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SLe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k8(Object(n),!0).forEach(function(r){ELe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ELe(t,e,n){return(e=TLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TLe(t){var e=ALe(t,"string");return typeof e=="symbol"?e:e+""}function ALe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cf(){return cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cf.apply(null,arguments)}var CLe=()=>(tRe(),null);function i_(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var ILe=A.forwardRef((t,e)=>{var n,r,i=A.useRef(null),[a,s]=A.useState({containerWidth:i_((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:i_((r=t.style)===null||r===void 0?void 0:r.height)}),o=A.useCallback((u,f)=>{s(h=>{var g=Math.round(u),m=Math.round(f);return h.containerWidth===g&&h.containerHeight===m?h:{containerWidth:g,containerHeight:m}})},[]),c=A.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:f,height:h}=u.getBoundingClientRect();o(f,h);var g=b=>{var{width:x,height:w}=b[0].contentRect;o(x,w)},m=new ResizeObserver(g);m.observe(u),i.current=m}},[e,o]);return A.useEffect(()=>()=>{var u=i.current;u?.disconnect()},[o]),A.createElement(A.Fragment,null,A.createElement(kS,{width:a.containerWidth,height:a.containerHeight}),A.createElement("div",cf({ref:c},t)))}),kLe=A.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=A.useState({containerWidth:i_(n),containerHeight:i_(r)}),s=A.useCallback((c,u)=>{a(f=>{var h=Math.round(c),g=Math.round(u);return f.containerWidth===h&&f.containerHeight===g?f:{containerWidth:h,containerHeight:g}})},[]),o=A.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:f}=c.getBoundingClientRect();s(u,f)}},[e,s]);return A.createElement(A.Fragment,null,A.createElement(kS,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",cf({ref:o},t)))}),PLe=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return A.createElement(A.Fragment,null,A.createElement(kS,{width:n,height:r}),A.createElement("div",cf({ref:e},t)))}),DLe=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return Nl(n)||Nl(r)?A.createElement(kLe,cf({},t,{ref:e})):A.createElement(PLe,cf({},t,{ref:e}))});function OLe(t){return t===!0?ILe:DLe}var NLe=A.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:f,onMouseMove:h,onMouseUp:g,onTouchEnd:m,onTouchMove:b,onTouchStart:x,style:w,width:S,responsive:T,dispatchTouchEvents:I=!0}=t,N=A.useRef(null),O=bn(),[P,k]=A.useState(null),[D,R]=A.useState(null),z=_Le(),L=WN(),B=L?.width>0?L.width:S,j=L?.height>0?L.height:i,H=A.useCallback(ee=>{z(ee),typeof e=="function"&&e(ee),k(ee),R(ee),ee!=null&&(N.current=ee)},[z,e,k,R]),X=A.useCallback(ee=>{O(Iee(ee)),O(Ba({handler:a,reactEvent:ee}))},[O,a]),q=A.useCallback(ee=>{O(N2(ee)),O(Ba({handler:u,reactEvent:ee}))},[O,u]),W=A.useCallback(ee=>{O(yJ()),O(Ba({handler:f,reactEvent:ee}))},[O,f]),J=A.useCallback(ee=>{O(N2(ee)),O(Ba({handler:h,reactEvent:ee}))},[O,h]),ne=A.useCallback(()=>{O(Ree())},[O]),Y=A.useCallback(ee=>{O(Nee(ee.key))},[O]),U=A.useCallback(ee=>{O(Ba({handler:s,reactEvent:ee}))},[O,s]),Q=A.useCallback(ee=>{O(Ba({handler:o,reactEvent:ee}))},[O,o]),K=A.useCallback(ee=>{O(Ba({handler:c,reactEvent:ee}))},[O,c]),Z=A.useCallback(ee=>{O(Ba({handler:g,reactEvent:ee}))},[O,g]),le=A.useCallback(ee=>{O(Ba({handler:x,reactEvent:ee}))},[O,x]),de=A.useCallback(ee=>{I&&O(jee(ee)),O(Ba({handler:b,reactEvent:ee}))},[O,I,b]),ce=A.useCallback(ee=>{O(Ba({handler:m,reactEvent:ee}))},[O,m]),he=OLe(T);return A.createElement(zJ.Provider,{value:P},A.createElement(jSe.Provider,{value:D},A.createElement(he,{width:B??w?.width,height:j??w?.height,className:Qt("recharts-wrapper",r),style:SLe({position:"relative",cursor:"default",width:B,height:j},w),onClick:X,onContextMenu:U,onDoubleClick:Q,onFocus:ne,onKeyDown:Y,onMouseDown:K,onMouseEnter:q,onMouseLeave:W,onMouseMove:J,onMouseUp:Z,onTouchEnd:ce,onTouchMove:de,onTouchStart:le,ref:H},A.createElement(CLe,null),n)))}),RLe=["width","height","responsive","children","className","style","compact","title","desc"];function MLe(t,e){if(t==null)return{};var n,r,i=jLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Fee=A.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:s,style:o,compact:c,title:u,desc:f}=t,h=MLe(t,RLe),g=Ms(h);return c?A.createElement(A.Fragment,null,A.createElement(kS,{width:n,height:r}),A.createElement(I8,{otherAttributes:g,title:u,desc:f},a)):A.createElement(NLe,{className:s,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(I8,{otherAttributes:g,title:u,desc:f,ref:e},A.createElement(y4e,null,a)))});function R2(){return R2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R2.apply(null,arguments)}var zLe={top:5,right:5,bottom:5,left:5},LLe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:zLe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},VLe=A.forwardRef(function(e,n){var r,i=ei(e.categoricalChartProps,LLe),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,f={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return A.createElement(Lee,{preloadedState:{options:f},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:a},A.createElement(gee,{chartData:u.data}),A.createElement(Vee,{layout:i.layout,margin:i.margin}),A.createElement(Bee,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(Fee,R2({},i,{ref:n})))}),BLe=["axis","item"],_M=A.forwardRef((t,e)=>A.createElement(VLe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:BLe,tooltipPayloadSearcher:LJ,categoricalChartProps:t,ref:e}));function FLe(t){var e=bn();return A.useEffect(()=>{e(cLe(t))},[e,t]),null}var ULe=["layout"];function M2(){return M2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},M2.apply(null,arguments)}function $Le(t,e){if(t==null)return{};var n,r,i=qLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var GLe={top:5,right:5,bottom:5,left:5},Uee={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:GLe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},HLe=A.forwardRef(function(e,n){var r,i=ei(e.categoricalChartProps,Uee),{layout:a}=i,s=$Le(i,ULe),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f}=e,h={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return A.createElement(Lee,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:o},A.createElement(gee,{chartData:i.data}),A.createElement(Vee,{layout:a,margin:i.margin}),A.createElement(Bee,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(FLe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(Fee,M2({},s,{ref:n})))});function P8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function D8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P8(Object(n),!0).forEach(function(r){KLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KLe(t,e,n){return(e=WLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WLe(t){var e=YLe(t,"string");return typeof e=="symbol"?e:e+""}function YLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XLe=["item"],QLe=D8(D8({},Uee),{},{layout:"centric",startAngle:0,endAngle:360}),ZLe=A.forwardRef((t,e)=>{var n=ei(t,QLe);return A.createElement(HLe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:XLe,tooltipPayloadSearcher:LJ,categoricalChartProps:n,ref:e})});const O8=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316","#14B8A6","#6366F1","#84CC16","#D946EF"],N8=["#10B981","#3B82F6","#F59E0B","#8B5CF6","#06B6D4","#F97316","#EC4899","#14B8A6"];function $ee(t,e){const n=[];if(t.startsWith("year-")){const c=parseInt(t.split("-")[1],10);for(let u=1;u<=12;u++)n.push(`${c}-${String(u).padStart(2,"0")}`);return n}const i={"1m":1,"3m":3,"6m":6,"9m":9,"12m":12}[t]||1,[a,s]=e.split("-").map(Number),o=new Date(a,s-1,1);for(let c=i-1;c>=0;c--){const u=new Date(o.getFullYear(),o.getMonth()-c,1),f=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`;n.push(f)}return n}const JLe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ox(t){const e=parseInt(t.split("-")[1],10);return JLe[e-1]||t}function e5e(t){const e={};return t.forEach((n,r)=>{e[n.id]=O8[r%O8.length]}),e.uncategorized="#9CA3AF",e}function t5e(t){const e={};return[...new Set(t)].forEach((r,i)=>{e[r]=N8[i%N8.length]}),e}function n5e(t){const{transactions:e,envelopes:n,categories:r,incomeSources:i,currentMonth:a}=sn(),s=A.useMemo(()=>$ee(t,a),[t,a]),o=A.useMemo(()=>{const x={};return n.forEach(w=>{x[w.id]=w.categoryId||"uncategorized"}),x},[n]),c=A.useMemo(()=>e5e(r),[r]),u=A.useMemo(()=>{const x={};return r.forEach(w=>{x[w.id]=w.name}),x.uncategorized="Uncategorized",x},[r]),f=A.useMemo(()=>{const x=new Set(s);return e.filter(w=>w.type==="Expense"&&w.month&&x.has(w.month))},[e,s]),h=A.useMemo(()=>{const x={};f.forEach(T=>{const I=o[T.envelopeId]||"uncategorized";x[I]=(x[I]||0)+Math.abs(T.amount)});const w=Object.entries(x).map(([T,I])=>({categoryId:T,categoryName:u[T]||"Uncategorized",color:c[T]||"#9CA3AF",amount:Math.round(I*100)/100})).sort((T,I)=>I.amount-T.amount),S=w.reduce((T,I)=>T+I.amount,0);return{items:w,total:Math.round(S*100)/100}},[f,o,u,c]),g=A.useMemo(()=>{const x=new Set,w={};s.forEach(P=>{w[P]={}}),f.forEach(P=>{const k=o[P.envelopeId]||"uncategorized",D=P.month;w[D]&&(w[D][k]=(w[D][k]||0)+Math.abs(P.amount),x.add(k))});const S=[...x],T={};S.forEach(P=>{T[P]=c[P]||"#9CA3AF"});const I=s.map(P=>{const k={month:P,monthLabel:Ox(P)};return S.forEach(D=>{k[D]=Math.round((w[P][D]||0)*100)/100}),k}),N=I.map(P=>S.reduce((k,D)=>k+(P[D]||0),0)),O=N.length>0?Math.round(N.reduce((P,k)=>P+k,0)/N.length):0;return{data:I,categoryKeys:S,colorMap:T,average:O}},[s,f,o,c]),m=A.useMemo(()=>{const x=[],w={};s.forEach(P=>{w[P]={}}),s.forEach(P=>{(i[P]||[]).forEach(D=>{x.push(D.name),w[P][D.name]=(w[P][D.name]||0)+D.amount})});const S=[...new Set(x)],T=t5e(S),I=s.map(P=>{const k={month:P,monthLabel:Ox(P)};return S.forEach(D=>{k[D]=Math.round((w[P][D]||0)*100)/100}),k}),N=I.map(P=>S.reduce((k,D)=>k+(P[D]||0),0)),O=N.length>0?Math.round(N.reduce((P,k)=>P+k,0)/N.length):0;return{data:I,sourceKeys:S,colorMap:T,average:O}},[s,i]),b=A.useMemo(()=>({data:s.map(w=>{const T=(i[w]||[]).reduce((D,R)=>D+R.amount,0),N=f.filter(D=>D.month===w).reduce((D,R)=>D+Math.abs(R.amount),0),O=Math.max(0,T-N);if(T<=0)return{month:w,monthLabel:Ox(w),savingsPercent:0,spendingPercent:100};const P=Math.min(100,Math.round(O/T*1e3)/10),k=Math.round((100-P)*10)/10;return{month:w,monthLabel:Ox(w),savingsPercent:P,spendingPercent:k}})}),[s,i,f]);return{months:s,spendingTotals:h,spendingBreakdown:g,monthlyIncome:m,savingsData:b,categoryNameMap:u,categoryColorMap:c}}const r5e=[{key:"totals",label:"Spending Totals"},{key:"breakdown",label:"Spending Breakdown"},{key:"income",label:"Monthly Income"},{key:"savings",label:"Savings"}],i5e=[{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"6m",label:"6 Months"},{value:"9m",label:"9 Months"},{value:"12m",label:"12 Months"}];function a5e(){const t=new Date().getFullYear(),e=[];for(let n=t;n>=2024;n--)e.push({value:`year-${n}`,label:`${n}`});return e}const SM=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),a_=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),qee=({active:t,payload:e,label:n,nameMap:r})=>{if(!t||!e?.length)return null;const i=e.reduce((a,s)=>a+(s.value||0),0);return y.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[y.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),e.map((a,s)=>y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:a.fill||a.color}}),y.jsxs("span",{className:"text-zinc-600 dark:text-zinc-300",children:[r?.[a.dataKey]||a.dataKey,":"]}),y.jsx("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:a_(a.value)})]},s)),y.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-700 mt-1.5 pt-1.5 flex justify-between font-semibold",children:[y.jsx("span",{className:"text-zinc-700 dark:text-zinc-200",children:"Total"}),y.jsx("span",{className:"text-zinc-900 dark:text-white",children:a_(i)})]})]})},s5e=({active:t,payload:e,label:n})=>{if(!t||!e?.length)return null;const r=e.find(a=>a.dataKey==="savingsPercent"),i=e.find(a=>a.dataKey==="spendingPercent");return y.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[y.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),r&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#3B82F6"}}),y.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Savings & Investments:"}),y.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[r.value.toFixed(1),"%"]})]}),i&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#4ADE80"}}),y.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Spending:"}),y.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[i.value.toFixed(1),"%"]})]})]})},o5e=()=>{const t=ns(),[e,n]=A.useState("totals"),[r,i]=A.useState("12m"),{currentMonth:a,fetchMonthData:s,incomeSources:o}=sn(),c=A.useMemo(()=>a5e(),[]);A.useEffect(()=>{$ee(r,a).forEach(x=>{o[x]===void 0&&s(x)})},[r,a,s,o]);const{spendingTotals:u,spendingBreakdown:f,monthlyIncome:h,savingsData:g,categoryNameMap:m}=n5e(r);return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-32",children:[y.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50 safe-area-top",children:[y.jsxs("div",{className:"flex items-center gap-3 px-4 pt-2 pb-2",children:[y.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:y.jsx(Al,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),y.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Analytics"})]}),y.jsx("div",{className:"px-4 pb-2",children:y.jsx("div",{className:"flex flex-wrap gap-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl p-1",children:r5e.map(({key:b,label:x})=>y.jsx("button",{onClick:()=>n(b),className:`
                  flex-1 min-w-0 px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200
                  ${e===b?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}
                `,children:x},b))})}),y.jsx("div",{className:"px-4 pb-3 overflow-x-auto scrollbar-hide",children:y.jsxs("div",{className:"inline-flex gap-1.5 min-w-max",children:[i5e.map(({value:b,label:x})=>y.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b)),c.map(({value:b,label:x})=>y.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b))]})})]}),y.jsxs("div",{className:"px-4 pt-4",children:[e==="totals"&&y.jsx(l5e,{items:u.items,total:u.total}),e==="breakdown"&&y.jsx(c5e,{data:f.data,categoryKeys:f.categoryKeys,colorMap:f.colorMap,nameMap:m,average:f.average}),e==="income"&&y.jsx(u5e,{data:h.data,sourceKeys:h.sourceKeys,colorMap:h.colorMap,average:h.average}),e==="savings"&&y.jsx(d5e,{data:g.data})]})]})},l5e=({items:t,total:e})=>t.length===0?y.jsx(oE,{message:"No spending data for this time period."}):y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:y.jsxs("div",{className:"relative no-select-chart",children:[y.jsx(IS,{width:"100%",height:280,children:y.jsxs(ZLe,{children:[y.jsx(dee,{data:t,dataKey:"amount",nameKey:"categoryName",cx:"50%",cy:"50%",innerRadius:"55%",outerRadius:"80%",paddingAngle:2,strokeWidth:0,isAnimationActive:!1,children:t.map((n,r)=>y.jsx(fy,{fill:n.color},r))}),y.jsx(ZS,{content:({active:n,payload:r})=>{if(!n||!r?.length)return null;const i=r[0].payload,a=e>0?(i.amount/e*100).toFixed(1):"0";return y.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:i.color}}),y.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:i.categoryName})]}),y.jsxs("div",{className:"text-zinc-600 dark:text-zinc-300",children:[a_(i.amount)," (",a,"%)"]})]})},contentStyle:{backgroundColor:"transparent",border:"none",padding:0,borderRadius:0,boxShadow:"none"}})]})}),y.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none z-10",children:[y.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Total Spent"}),y.jsx("span",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:SM(e)})]})]})}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Categories"}),y.jsx("div",{className:"space-y-2",children:t.map(n=>{const r=e>0?(n.amount/e*100).toFixed(1):"0";return y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2.5",children:[y.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),y.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:n.categoryName})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:[r,"%"]}),y.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white w-20 text-right",children:a_(n.amount)})]})]},n.categoryId)})})]})]}),c5e=({data:t,categoryKeys:e,colorMap:n,nameMap:r,average:i})=>t.length===0||e.length===0?y.jsx(oE,{message:"No spending data for this time period."}):y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Spending by Category"}),y.jsx(IS,{width:"100%",height:300,children:y.jsxs(_M,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[y.jsx(iE,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),y.jsx(aE,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(sE,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(ZS,{cursor:!1,content:a=>y.jsx(qee,{...a,colorMap:n,nameMap:r})}),y.jsx(gM,{y:i,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${SM(i)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>y.jsx(s0,{dataKey:a,stackId:"spending",fill:n[a],radius:[0,0,0,0],name:r[a]||a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),y.jsx(Gee,{keys:e,colorMap:n,nameMap:r})]}),u5e=({data:t,sourceKeys:e,colorMap:n,average:r})=>{const i=A.useMemo(()=>{const a={};return e.forEach(s=>{a[s]=s}),a},[e]);return t.length===0||e.length===0?y.jsx(oE,{message:"No income data for this time period."}):y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Income by Source"}),y.jsx(IS,{width:"100%",height:300,children:y.jsxs(_M,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[y.jsx(iE,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),y.jsx(aE,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(sE,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(ZS,{cursor:!1,content:a=>y.jsx(qee,{...a,colorMap:n,nameMap:i})}),y.jsx(gM,{y:r,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${SM(r)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>y.jsx(s0,{dataKey:a,stackId:"income",fill:n[a],radius:[0,0,0,0],name:a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),y.jsx(Gee,{keys:e,colorMap:n,nameMap:i})]})},d5e=({data:t})=>{if(t.length===0)return y.jsx(oE,{message:"No data for this time period."});const e=t.length>0?Math.round(t.reduce((n,r)=>n+r.savingsPercent,0)/t.length*10)/10:0;return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300",children:"Income Allocation (Savings Base)"}),y.jsxs("span",{className:"text-xs font-medium text-blue-500",children:["Avg Savings: ",e,"%"]})]}),y.jsx(IS,{width:"100%",height:300,children:y.jsxs(_M,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[y.jsx(iE,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),y.jsx(aE,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(sE,{domain:[0,100],tickFormatter:n=>`${n}%`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(ZS,{content:s5e}),y.jsx(s0,{dataKey:"savingsPercent",stackId:"allocation",fill:"#3B82F6",name:"Savings & Investments",radius:[0,0,0,0]}),y.jsx(s0,{dataKey:"spendingPercent",stackId:"allocation",fill:"#4ADE80",name:"Spending",radius:[0,0,0,0]})]})})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center gap-6",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),y.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Savings & Investments"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),y.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Spending"})]})]}),y.jsx("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-2",children:"Pay yourself first: savings grows from the bottom, reinforcing the goal of maximizing your savings rate."})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Savings Rate"}),y.jsx("div",{className:"space-y-2",children:t.map(n=>y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 w-10",children:n.monthLabel}),y.jsx("div",{className:"flex-1 mx-3 h-2 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${n.savingsPercent}%`}})}),y.jsxs("span",{className:`text-sm font-medium w-14 text-right ${n.savingsPercent>=20?"text-blue-500":n.savingsPercent>=10?"text-amber-500":"text-red-500"}`,children:[n.savingsPercent.toFixed(1),"%"]})]},n.month))})]})]})},Gee=({keys:t,colorMap:e,nameMap:n})=>y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Legend"}),y.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:t.map(r=>y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e[r]}}),y.jsx("span",{className:"text-xs text-zinc-600 dark:text-zinc-300",children:n[r]||r})]},r))})]}),oE=({message:t})=>y.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[y.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:y.jsx(e7,{className:"w-8 h-8 text-zinc-400"})}),y.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm",children:t})]}),il=({children:t})=>y.jsx(Gn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:"easeInOut"},className:"w-full h-full bg-gray-50 dark:bg-black",children:t}),f5e=()=>{const t=Ls();return y.jsx(wa,{mode:"wait",children:y.jsxs(Boe,{location:t,children:[y.jsx(so,{path:"/",element:y.jsx(il,{children:y.jsx(aa,{children:y.jsx(q_e,{})})})}),y.jsx(so,{path:"/envelope/:id",element:y.jsx(il,{children:y.jsx(aa,{children:y.jsx(X_e,{})})})}),y.jsx(so,{path:"/add-envelope",element:y.jsx(il,{children:y.jsx(aa,{children:y.jsx(eSe,{})})})}),y.jsx(so,{path:"/add-transaction",element:y.jsx(il,{children:y.jsx(aa,{children:y.jsx($Y,{})})})}),y.jsx(so,{path:"/transactions",element:y.jsx(il,{children:y.jsx(aa,{children:y.jsx(ASe,{})})})}),y.jsx(so,{path:"/settings",element:y.jsx(il,{children:y.jsx(aa,{children:y.jsx(Z_e,{})})})}),y.jsx(so,{path:"/settings/categories",element:y.jsx(il,{children:y.jsx(aa,{children:y.jsx(J_e,{})})})}),y.jsx(so,{path:"/verify-email",element:y.jsx(il,{children:y.jsx(aa,{children:y.jsx(FG,{})})})}),y.jsx(so,{path:"/analytics",element:y.jsx(il,{children:y.jsx(aa,{children:y.jsx(o5e,{})})})})]},t.pathname)})},h5e=()=>{const t=ns(),{envelopes:e,appSettings:n}=sn(),r=A.useRef(!1);return A.useEffect(()=>{const i=n?.siriToken;if(!i||e.length===0)return;const a=St(rt,"siriQueries",i),s=hf(a,async o=>{if(!o.exists()||r.current)return;const c=o.data();if(!c?.query||c.consumed)return;if(Date.now()-(c.timestamp||0)>12e4){try{await ca(a)}catch(f){console.error("Failed to cleanup stale Siri query",f)}return}console.log(" Siri: Found pending query in Firestore:",c.query),r.current=!0;try{await ca(a);const f=await UY(c.query,e);console.log(" Siri: Parsed result:",f),sessionStorage.setItem("siriParsedData",JSON.stringify(f)),sessionStorage.setItem("siriQuery",c.query),t(`/add-transaction?siri=${Date.now()}`),window.dispatchEvent(new CustomEvent("siri-query-ready"))}catch(f){console.error(" Siri: Error processing query:",f)}finally{r.current=!1}},o=>{console.error(" Siri: Error listening for queries:",o)});return()=>s()},[e,n?.siriToken,t]),null};function p5e(){const[t,e]=A.useState(!0),[n,r]=A.useState(!1),[i,a]=A.useState(null),{appSettings:s,isOnboardingActive:o}=sn(),{isAuthenticated:c,isInitialized:u,initializeAuth:f,lastAuthTime:h,offlineGracePeriod:g,currentUser:m}=Ga();if(A.useEffect(()=>{const w=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(w)},[]),A.useEffect(()=>f(),[f]),A.useEffect(()=>{(async()=>{const S=new URLSearchParams(window.location.search),T=S.get("mode"),I=S.get("oobCode");if(T==="resetPassword"&&I){console.log(" Processing password reset from URL"),a(I);return}if(T==="verifyEmail"&&I){console.log(" Processing email verification from URL");try{await _ae(Va,I),console.log(" Email verification successful");const N=window.location.pathname;window.history.replaceState({},document.title,N),alert("Email verified successfully! You can now sign in.")}catch(N){console.error(" Email verification failed:",N),alert("Email verification failed. The link may be expired or invalid.")}}})()},[]),A.useEffect(()=>{const w=document.documentElement,S=window.matchMedia("(prefers-color-scheme: dark)"),T=()=>{const I=s?.theme??"system",N=S.matches;I==="dark"||I==="system"&&N?w.classList.add("dark"):w.classList.remove("dark")};if(T(),s?.theme==="system")return S.addEventListener("change",T),()=>S.removeEventListener("change",T)},[s]),A.useEffect(()=>{const w=document.documentElement;switch(s?.fontSize??"medium"){case"extra-small":w.style.fontSize="75%";break;case"small":w.style.fontSize="87.5%";break;case"large":w.style.fontSize="112.5%";break;case"extra-large":w.style.fontSize="125%";break;default:w.style.fontSize="100%"}},[s?.fontSize]),t||!u)return y.jsx(UG,{message:"Initializing Personal Budget..."});if(i)return y.jsx(aa,{children:y.jsx(Epe,{oobCode:i,onSuccess:()=>{a(null);const w=window.location.pathname;window.history.replaceState({},document.title,w)},onCancel:()=>{a(null);const w=window.location.pathname;window.history.replaceState({},document.title,w)}})});if(!c)return m?y.jsx(aa,{children:y.jsx(FG,{})}):y.jsx(aa,{children:y.jsx(Spe,{})});const x=typeof navigator<"u"&&!navigator.onLine&&c&&h&&Date.now()-h<g;return y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"fixed opacity-0 pointer-events-none -z-50",children:y.jsx("label",{id:"ios-haptic-trigger",htmlFor:"ios-haptic-checkbox",children:y.jsx("input",{type:"checkbox",id:"ios-haptic-checkbox",switch:"true"})})}),y.jsxs(aa,{children:[x&&y.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm",children:[y.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((g-(Date.now()-h))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),y.jsxs(dle,{children:[y.jsx(h5e,{}),y.jsx(f5e,{}),n&&y.jsxs("div",{className:"fixed inset-0 z-[60]",children:[y.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>r(!1)}),y.jsx("div",{className:"absolute inset-0",children:y.jsx($Y,{onClose:()=>r(!1),onSaved:()=>r(!1)})})]}),!o&&y.jsx(cye,{onAddTransaction:()=>r(!0)})]}),y.jsx(lye,{})]})]})}Mne({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});One.createRoot(document.getElementById("root")).render(y.jsx(A.StrictMode,{children:y.jsx(p5e,{})}));export{vt as T,rt as a,Mhe as b,b5 as c,St as d,yi as e,ws as f,PA as g,ca as h,hf as o,Os as q,oa as s,ld as t,co as u,The as w};
